var nS=Object.defineProperty,rS=Object.defineProperties,oS=Object.getOwnPropertyDescriptors,$b=Object.getOwnPropertySymbols,sS=Object.prototype.hasOwnProperty,aS=Object.prototype.propertyIsEnumerable,Zb=(U,$,m)=>$ in U?nS(U,$,{enumerable:!0,configurable:!0,writable:!0,value:m}):U[$]=m,km=(U,$)=>{for(var m in $||($={}))sS.call($,m)&&Zb(U,m,$[m]);if($b)for(var m of $b($))aS.call($,m)&&Zb(U,m,$[m]);return U},Lm=(U,$)=>rS(U,oS($));(self.webpackChunkAutoBlocklyApp=self.webpackChunkAutoBlocklyApp||[]).push([[179],{28017:(U,$,m)=>{"use strict";m.d($,{d:()=>st});var T=m(68306),_=m(38421);const{isArray:e}=Array;var n=m(60515),r=m(25403),s=m(63269);var b=m(39646),x=m(4128),B=m(32076),Z=m(91005),ot=m(18505),et=m(63900),Tt=m(70262),Pt=m(54004),pt=m(43014),It=m(51707);class Ht{constructor(lt,Bt){this.urL=lt,this.http=Bt,this.WasAlive=!1}download(){window.location.href="https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseLocalAPI.zip"}IsAlive(){this.WasAlive=!1;var lt=this,Bt=(new Date).toISOString();return this.http.get(this.urL+`api/v1/Management/CurrentDate?${Bt}`,{responseType:"text"}).pipe((0,Tt.K)(Dt=>(0,b.of)("")),(0,Pt.U)(Dt=>(null==Dt?void 0:Dt.length)>0&&(Date.parse(Dt),lt.WasAlive=!0,!0)))}LoadBlockContent(lt){return(new Date).toISOString(),this.http.post(this.urL+"api/v1/BASave/GetBlocksContent",{id:lt},{responseType:"text"}).pipe((0,Pt.U)(Dt=>null==Dt?void 0:Dt.toString()))}LoadBlocks(){return(new Date).toISOString(),this.http.post(this.urL+"api/v1/BASave/GetBlocks",null).pipe((0,Pt.U)(Bt=>Bt.map(Et=>{var ut=new pt.q(Et);return ut.Source="LocalAPI",ut})))}SaveBlock(lt,Bt){return this.http.post(this.urL+"api/v1/BASave/SaveNewBlock",{b:lt,content:Bt},{responseType:"text"}).pipe((0,Pt.U)(Dt=>Number.parseInt(null==Dt?void 0:Dt.toString(),10)))}}var Jt=m(5e3),Ct=m(40520),bt=m(92590);let st=(()=>{class gt{constructor(Bt,Dt){this.http=Bt,this.loadShowUsageService=Dt,this.settings=null,this.linksSwagger=[],this.demoBlocks=[],this.swaggersDict=new Map,this.customCategories="",this.LocalAPI=null,this.Init()}CreateLocalApis(Bt,Dt){return new Ht(Dt,Bt)}Init(){return function(...gt){const lt=(0,s.jO)(gt),Bt=function(gt){return 1===gt.length&&e(gt[0])?gt[0]:gt}(gt);return Bt.length?new T.y(Dt=>{let Et=Bt.map(()=>[]),ut=Bt.map(()=>!1);Dt.add(()=>{Et=ut=null});for(let rt=0;!Dt.closed&&rt<Bt.length;rt++)(0,_.Xf)(Bt[rt]).subscribe(new r.Q(Dt,fe=>{if(Et[rt].push(fe),Et.every(Mt=>Mt.length)){const Mt=Et.map(Nt=>Nt.shift());Dt.next(lt?lt(...Mt):Mt),Et.some((Nt,ge)=>!Nt.length&&ut[ge])&&Dt.complete()}},()=>{ut[rt]=!0,!Et[rt].length&&Dt.complete()}));return()=>{Et=ut=null}}):n.E}(this.getSettings(),this.loadShowUsageService.getSwaggerLinks(),this.loadShowUsageService.getDemoBlocks(),this.loadShowUsageService.getCustomCategories(),this.getLatestVersion()).pipe((0,Z.g)(1e3),(0,ot.b)(([Bt,Dt,Et,ut,rt])=>{this.settings=Bt,this.settings.latestVersion=rt,this.linksSwagger=Dt,this.demoBlocks=Et.map(fe=>{var Mt=new pt.q(fe);return Mt.Source="Demos",Mt}),this.customCategories=ut,this.LocalAPI=this.CreateLocalApis(this.http,this.settings.localAPI),this.LocalAPI.IsAlive().subscribe(fe=>{console.log("LocalAPI is alive",fe)})}),(0,et.w)(()=>this.obtainSwaggers(this.linksSwagger)),(0,et.w)(()=>(0,b.of)("")))}obtainSwaggers(Bt){var Dt=Bt.map(ut=>this.LoadSwaggersFromUrl(ut));return(0,x.D)(Dt)}LoadSwaggersFromUrl(Bt){var Dt=Bt.link,Et=Bt.id||Bt.link,ut=new It.L(Dt);return(0,B.D)(ut.ParseSwagger()).pipe((0,ot.b)(fe=>{console.log("swagger loaded:"+Dt,fe),fe.name=Et,this.swaggersDict.set(Dt,fe)},fe=>{console.error("swagger error:"+Dt,fe)}))}getLatestVersion(){return this.http.get("https://ignatandrei.github.io/BlocklyAutomation/version.txt",{responseType:"text"}).pipe((0,Tt.K)(Bt=>(console.error("error getting latest version",Bt),(0,b.of)("vcannot get latest version"))),(0,Pt.U)(Bt=>Bt.toString().trim().substr(1)))}getSettings(){var Bt=(new Date).toISOString();return this.http.get(`assets/settings.json?${Bt}`,{responseType:"text"}).pipe((0,Pt.U)(Dt=>JSON.parse(Dt)))}}return gt.\u0275fac=function(Bt){return new(Bt||gt)(Jt.LFG(Ct.eN),Jt.LFG(bt.F))},gt.\u0275prov=Jt.Yz7({token:gt,factory:gt.\u0275fac}),gt})()},43014:(U,$,m)=>{"use strict";m.d($,{q:()=>T});class T{constructor(e={}){this.id="",this.description="",this.categories="",this.blocks="",this.Source="None",Object.assign(this,e)}}},80926:(U,$,m)=>{"use strict";m.d($,{v:()=>e});var T=m(77579),_=m(5e3);let e=(()=>{class t{constructor(){this.sendData=new T.x}receiveData(){return this.sendData.asObservable()}sendDataToServer(r,s){this.sendData.next([r,s])}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=_.Yz7({token:t,factory:t.\u0275fac}),t})()},27392:(U,$,m)=>{"use strict";m.r($),m.d($,{DisplayBlocklyComponent:()=>np});var T=m(15861),e=(m(64166),m(76279)),t=m(30069);const n=[e.Events.VIEWPORT_CHANGE,e.Events.BLOCK_MOVE,e.Events.BLOCK_DELETE];class u{constructor(l){this.workspace_=l,this.width_=0,this.height_=0,this.top_=0,this.left_=0,this.lastScale_=1,this.cachedContentMetrics_=void 0}init(l){l=Number(l),this.padding_=isNaN(l)?10:l,this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"contentAreaHighlight"},null);const o=String(Math.random()).substring(2),a=e.utils.dom.createSvgElement(new e.utils.Svg("mask"),{id:"contentAreaHighlightMask"+o},this.svgGroup_);e.utils.dom.createSvgElement(e.utils.Svg.RECT,{x:0,y:0,width:"100%",height:"100%",fill:"white"},a),this.rect_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{x:0,y:0,rx:e.Bubble.BORDER_WIDTH,ry:e.Bubble.BORDER_WIDTH,fill:"black"},a),this.background_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{x:0,y:0,width:"100%",height:"100%",mask:"url(#contentAreaHighlightMask"+o+")"},this.svgGroup_),this.applyColor_();const c=this.workspace_.getMetricsManager();this.cachedContentMetrics_=c.getContentMetrics(!0),this.resize_(this.cachedContentMetrics_);const f=c.getAbsoluteMetrics();this.position_(this.cachedContentMetrics_,f),this.svgGroup_.style.transition="opacity 0.25s";const E=this.workspace_.getParentSvg();E.firstChild?E.insertBefore(this.svgGroup_,E.firstChild):E.appendChild(this.svgGroup_),this.onChangeWrapper_=this.onChange_.bind(this),this.workspace_.addChangeListener(this.onChangeWrapper_)}dispose(){this.svgGroup_&&e.utils.dom.removeNode(this.svgGroup_),this.onChangeWrapper_&&e.unbindEvent_(this.onChangeWrapper_)}onChange_(l){if(l.type===e.Events.THEME_CHANGE)this.applyColor_();else if(-1!==n.indexOf(l.type)){const o=this.workspace_.getMetricsManager();l.type!==e.Events.VIEWPORT_CHANGE&&(this.cachedContentMetrics_=o.getContentMetrics(!0),this.resize_(this.cachedContentMetrics_));const a=o.getAbsoluteMetrics();this.position_(this.cachedContentMetrics_,a)}else l.type===e.Events.BLOCK_DRAG&&this.handleBlockDrag_(l)}handleBlockDrag_(l){this.svgGroup_.setAttribute("opacity",l.isStart?"0":"1")}applyColor_(){const o=this.workspace_.getTheme().getComponentStyle("workspaceBackgroundColour")||"#ffffff",a=e.utils.colour.blend("#000",o,.1),c=e.utils.colour.blend("#fff",o,.1);this.background_.setAttribute("fill","#ffffff"===o||"#fff"===o?a:c)}resize_(l){const o=l.width?l.width+2*this.padding_:0,a=l.height?l.height+2*this.padding_:0;o!==this.width_&&(this.width_=o,this.rect_.setAttribute("width",o)),a!==this.height_&&(this.height_=a,this.rect_.setAttribute("height",a))}position_(l,o){const f=this.workspace_.scale,E=o.top+l.top*f- -this.workspace_.scrollY-this.padding_*f,R=o.left+l.left*f- -this.workspace_.scrollX-this.padding_*f;(E!==this.top_||R!==this.left_||this.lastScale_!==f)&&(this.top_=E,this.left_=R,this.lastScale_=f,this.rect_.setAttribute("transform","translate("+R+","+E+") scale("+f+")"))}}var b=m(43014),x=m(51707),B=m(70697);const ot="undefined"==typeof window?function(g){return g()}:window.requestAnimationFrame;function et(g,l,o){const a=o||(E=>Array.prototype.slice.call(E));let c=!1,f=[];return function(...E){f=a(E),c||(c=!0,ot.call(window,()=>{c=!1,g.apply(l,f)}))}}const Pt=g=>"start"===g?"left":"end"===g?"right":"center",pt=(g,l,o)=>"start"===g?l:"end"===g?o:(l+o)/2;function Ht(){}const Jt=function(){let g=0;return function(){return g++}}();function Ct(g){return null==g}function bt(g){if(Array.isArray&&Array.isArray(g))return!0;const l=Object.prototype.toString.call(g);return"[object"===l.substr(0,7)&&"Array]"===l.substr(-6)}function st(g){return null!==g&&"[object Object]"===Object.prototype.toString.call(g)}const gt=g=>("number"==typeof g||g instanceof Number)&&isFinite(+g);function lt(g,l){return gt(g)?g:l}function Bt(g,l){return void 0===g?l:g}const Et=(g,l)=>"string"==typeof g&&g.endsWith("%")?parseFloat(g)/100*l:+g;function ut(g,l,o){if(g&&"function"==typeof g.call)return g.apply(o,l)}function rt(g,l,o,a){let c,f,E;if(bt(g))if(f=g.length,a)for(c=f-1;c>=0;c--)l.call(o,g[c],c);else for(c=0;c<f;c++)l.call(o,g[c],c);else if(st(g))for(E=Object.keys(g),f=E.length,c=0;c<f;c++)l.call(o,g[E[c]],E[c])}function fe(g,l){let o,a,c,f;if(!g||!l||g.length!==l.length)return!1;for(o=0,a=g.length;o<a;++o)if(c=g[o],f=l[o],c.datasetIndex!==f.datasetIndex||c.index!==f.index)return!1;return!0}function Mt(g){if(bt(g))return g.map(Mt);if(st(g)){const l=Object.create(null),o=Object.keys(g),a=o.length;let c=0;for(;c<a;++c)l[o[c]]=Mt(g[o[c]]);return l}return g}function Nt(g){return-1===["__proto__","prototype","constructor"].indexOf(g)}function ge(g,l,o,a){if(!Nt(g))return;const c=l[g],f=o[g];st(c)&&st(f)?ve(c,f,a):l[g]=Mt(f)}function ve(g,l,o){const a=bt(l)?l:[l],c=a.length;if(!st(g))return g;const f=(o=o||{}).merger||ge;for(let E=0;E<c;++E){if(!st(l=a[E]))continue;const R=Object.keys(l);for(let O=0,F=R.length;O<F;++O)f(R[O],g,l,o)}return g}function pe(g,l){return ve(g,l,{merger:He})}function He(g,l,o){if(!Nt(g))return;const a=l[g],c=o[g];st(a)&&st(c)?pe(a,c):Object.prototype.hasOwnProperty.call(l,g)||(l[g]=Mt(c))}function $e(g,l){const o=g.indexOf(".",l);return-1===o?g.length:o}function Le(g,l){if(""===l)return g;let o=0,a=$e(l,o);for(;g&&a>o;)g=g[l.substr(o,a-o)],o=a+1,a=$e(l,o);return g}function pi(g){return g.charAt(0).toUpperCase()+g.slice(1)}const Gt=g=>void 0!==g,Se=g=>"function"==typeof g,Zt=(g,l)=>{if(g.size!==l.size)return!1;for(const o of g)if(!l.has(o))return!1;return!0},St=Math.PI,jt=2*St,Ce=jt+St,ri=Number.POSITIVE_INFINITY,Te=St/180,te=St/2,ne=St/4,Oe=2*St/3,re=Math.log10,me=Math.sign;function ye(g){const l=Math.round(g);g=ti(g,l,g/1e3)?l:g;const o=Math.pow(10,Math.floor(re(g))),a=g/o;return(a<=1?1:a<=2?2:a<=5?5:10)*o}function de(g){return!isNaN(parseFloat(g))&&isFinite(g)}function ti(g,l,o){return Math.abs(g-l)<o}function Pi(g,l,o){let a,c,f;for(a=0,c=g.length;a<c;a++)f=g[a][o],isNaN(f)||(l.min=Math.min(l.min,f),l.max=Math.max(l.max,f))}function wi(g){return g*(St/180)}function yi(g){return g*(180/St)}function dn(g){if(!gt(g))return;let l=1,o=0;for(;Math.round(g*l)/l!==g;)l*=10,o++;return o}function mi(g,l){const o=l.x-g.x,a=l.y-g.y,c=Math.sqrt(o*o+a*a);let f=Math.atan2(a,o);return f<-.5*St&&(f+=jt),{angle:f,distance:c}}function Zi(g,l){return Math.sqrt(Math.pow(l.x-g.x,2)+Math.pow(l.y-g.y,2))}function Re(g,l){return(g-l+Ce)%jt-St}function xe(g){return(g%jt+jt)%jt}function Ci(g,l,o,a){const c=xe(g),f=xe(l),E=xe(o),R=xe(f-c),O=xe(E-c),F=xe(c-f),J=xe(c-E);return c===f||c===E||a&&f===E||R>O&&F<J}function je(g,l,o){return Math.max(l,Math.min(o,g))}function _i(g,l,o,a=1e-6){return g>=Math.min(l,o)-a&&g<=Math.max(l,o)+a}const Hi=g=>0===g||1===g,Je=(g,l,o)=>-Math.pow(2,10*(g-=1))*Math.sin((g-l)*jt/o),ue=(g,l,o)=>Math.pow(2,-10*g)*Math.sin((g-l)*jt/o)+1,kt={linear:g=>g,easeInQuad:g=>g*g,easeOutQuad:g=>-g*(g-2),easeInOutQuad:g=>(g/=.5)<1?.5*g*g:-.5*(--g*(g-2)-1),easeInCubic:g=>g*g*g,easeOutCubic:g=>(g-=1)*g*g+1,easeInOutCubic:g=>(g/=.5)<1?.5*g*g*g:.5*((g-=2)*g*g+2),easeInQuart:g=>g*g*g*g,easeOutQuart:g=>-((g-=1)*g*g*g-1),easeInOutQuart:g=>(g/=.5)<1?.5*g*g*g*g:-.5*((g-=2)*g*g*g-2),easeInQuint:g=>g*g*g*g*g,easeOutQuint:g=>(g-=1)*g*g*g*g+1,easeInOutQuint:g=>(g/=.5)<1?.5*g*g*g*g*g:.5*((g-=2)*g*g*g*g+2),easeInSine:g=>1-Math.cos(g*te),easeOutSine:g=>Math.sin(g*te),easeInOutSine:g=>-.5*(Math.cos(St*g)-1),easeInExpo:g=>0===g?0:Math.pow(2,10*(g-1)),easeOutExpo:g=>1===g?1:1-Math.pow(2,-10*g),easeInOutExpo:g=>Hi(g)?g:g<.5?.5*Math.pow(2,10*(2*g-1)):.5*(2-Math.pow(2,-10*(2*g-1))),easeInCirc:g=>g>=1?g:-(Math.sqrt(1-g*g)-1),easeOutCirc:g=>Math.sqrt(1-(g-=1)*g),easeInOutCirc:g=>(g/=.5)<1?-.5*(Math.sqrt(1-g*g)-1):.5*(Math.sqrt(1-(g-=2)*g)+1),easeInElastic:g=>Hi(g)?g:Je(g,.075,.3),easeOutElastic:g=>Hi(g)?g:ue(g,.075,.3),easeInOutElastic(g){const l=.1125;return Hi(g)?g:g<.5?.5*Je(2*g,l,.45):.5+.5*ue(2*g-1,l,.45)},easeInBack(g){const l=1.70158;return g*g*((l+1)*g-l)},easeOutBack(g){const l=1.70158;return(g-=1)*g*((l+1)*g+l)+1},easeInOutBack(g){let l=1.70158;return(g/=.5)<1?g*g*((1+(l*=1.525))*g-l)*.5:.5*((g-=2)*g*((1+(l*=1.525))*g+l)+2)},easeInBounce:g=>1-kt.easeOutBounce(1-g),easeOutBounce(g){const l=7.5625,o=2.75;return g<1/o?l*g*g:g<2/o?l*(g-=1.5/o)*g+.75:g<2.5/o?l*(g-=2.25/o)*g+.9375:l*(g-=2.625/o)*g+.984375},easeInOutBounce:g=>g<.5?.5*kt.easeInBounce(2*g):.5*kt.easeOutBounce(2*g-1)+.5},ct={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Lt="0123456789ABCDEF",ce=g=>Lt[15&g],Ne=g=>Lt[(240&g)>>4]+Lt[15&g],Wi=g=>(240&g)>>4==(15&g);function ci(g){return g+.5|0}const Ke=(g,l,o)=>Math.max(Math.min(g,o),l);function Pe(g){return Ke(ci(2.55*g),0,255)}function hi(g){return Ke(ci(255*g),0,255)}function xi(g){return Ke(ci(g/2.55)/100,0,1)}function fn(g){return Ke(ci(100*g),0,100)}const In=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,to=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function no(g,l,o){const a=l*Math.min(o,1-o),c=(f,E=(f+g/30)%12)=>o-a*Math.max(Math.min(E-3,9-E,1),-1);return[c(0),c(8),c(4)]}function fo(g,l,o){const a=(c,f=(c+g/60)%6)=>o-o*l*Math.max(Math.min(f,4-f,1),0);return[a(5),a(3),a(1)]}function kr(g,l,o){const a=no(g,1,.5);let c;for(l+o>1&&(c=1/(l+o),l*=c,o*=c),c=0;c<3;c++)a[c]*=1-l-o,a[c]+=l;return a}function ar(g){const o=g.r/255,a=g.g/255,c=g.b/255,f=Math.max(o,a,c),E=Math.min(o,a,c),R=(f+E)/2;let O,F,J;return f!==E&&(J=f-E,F=R>.5?J/(2-f-E):J/(f+E),O=f===o?(a-c)/J+(a<c?6:0):f===a?(c-o)/J+2:(o-a)/J+4,O=60*O+.5),[0|O,F||0,R]}function Oo(g,l,o,a){return(Array.isArray(l)?g(l[0],l[1],l[2]):g(l,o,a)).map(hi)}function nr(g,l,o){return Oo(no,g,l,o)}function hr(g){return(g%360+360)%360}const Zr={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Rr={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let On;function ae(g,l,o){if(g){let a=ar(g);a[l]=Math.max(0,Math.min(a[l]+a[l]*o,0===l?360:1)),a=nr(a),g.r=a[0],g.g=a[1],g.b=a[2]}}function Ue(g,l){return g&&Object.assign(l||{},g)}function Oi(g){var l={r:0,g:0,b:0,a:255};return Array.isArray(g)?g.length>=3&&(l={r:g[0],g:g[1],b:g[2],a:255},g.length>3&&(l.a=hi(g[3]))):(l=Ue(g,{r:0,g:0,b:0,a:1})).a=hi(l.a),l}function Ji(g){return"r"===g.charAt(0)?function(g){const l=In.exec(g);let a,c,f,o=255;if(l){if(l[7]!==a){const E=+l[7];o=255&(l[8]?Pe(E):255*E)}return a=+l[1],c=+l[3],f=+l[5],a=255&(l[2]?Pe(a):a),c=255&(l[4]?Pe(c):c),f=255&(l[6]?Pe(f):f),{r:a,g:c,b:f,a:o}}}(g):function(g){const l=to.exec(g);let a,o=255;if(!l)return;l[5]!==a&&(o=l[6]?Pe(+l[5]):hi(+l[5]));const c=hr(+l[2]),f=+l[3]/100,E=+l[4]/100;return a="hwb"===l[1]?function(g,l,o){return Oo(kr,g,l,o)}(c,f,E):"hsv"===l[1]?function(g,l,o){return Oo(fo,g,l,o)}(c,f,E):nr(c,f,E),{r:a[0],g:a[1],b:a[2],a:o}}(g)}class Yi{constructor(l){if(l instanceof Yi)return l;const o=typeof l;let a;"object"===o?a=Oi(l):"string"===o&&(a=function(g){var o,l=g.length;return"#"===g[0]&&(4===l||5===l?o={r:255&17*ct[g[1]],g:255&17*ct[g[2]],b:255&17*ct[g[3]],a:5===l?17*ct[g[4]]:255}:(7===l||9===l)&&(o={r:ct[g[1]]<<4|ct[g[2]],g:ct[g[3]]<<4|ct[g[4]],b:ct[g[5]]<<4|ct[g[6]],a:9===l?ct[g[7]]<<4|ct[g[8]]:255})),o}(l)||function(g){On||(On=function(){const g={},l=Object.keys(Rr),o=Object.keys(Zr);let a,c,f,E,R;for(a=0;a<l.length;a++){for(E=R=l[a],c=0;c<o.length;c++)f=o[c],R=R.replace(f,Zr[f]);f=parseInt(Rr[E],16),g[R]=[f>>16&255,f>>8&255,255&f]}return g}(),On.transparent=[0,0,0,0]);const l=On[g.toLowerCase()];return l&&{r:l[0],g:l[1],b:l[2],a:4===l.length?l[3]:255}}(l)||Ji(l)),this._rgb=a,this._valid=!!a}get valid(){return this._valid}get rgb(){var l=Ue(this._rgb);return l&&(l.a=xi(l.a)),l}set rgb(l){this._rgb=Oi(l)}rgbString(){return this._valid?(g=this._rgb)&&(g.a<255?`rgba(${g.r}, ${g.g}, ${g.b}, ${xi(g.a)})`:`rgb(${g.r}, ${g.g}, ${g.b})`):this._rgb;var g}hexString(){return this._valid?(l=function(g){return Wi(g.r)&&Wi(g.g)&&Wi(g.b)&&Wi(g.a)}(g=this._rgb)?ce:Ne,g&&"#"+l(g.r)+l(g.g)+l(g.b)+(g.a<255?l(g.a):"")):this._rgb;var g,l}hslString(){return this._valid?function(g){if(!g)return;const l=ar(g),o=l[0],a=fn(l[1]),c=fn(l[2]);return g.a<255?`hsla(${o}, ${a}%, ${c}%, ${xi(g.a)})`:`hsl(${o}, ${a}%, ${c}%)`}(this._rgb):this._rgb}mix(l,o){const a=this;if(l){const c=a.rgb,f=l.rgb;let E;const R=o===E?.5:o,O=2*R-1,F=c.a-f.a,J=((O*F==-1?O:(O+F)/(1+O*F))+1)/2;E=1-J,c.r=255&J*c.r+E*f.r+.5,c.g=255&J*c.g+E*f.g+.5,c.b=255&J*c.b+E*f.b+.5,c.a=R*c.a+(1-R)*f.a,a.rgb=c}return a}clone(){return new Yi(this.rgb)}alpha(l){return this._rgb.a=hi(l),this}clearer(l){return this._rgb.a*=1-l,this}greyscale(){const l=this._rgb,o=ci(.3*l.r+.59*l.g+.11*l.b);return l.r=l.g=l.b=o,this}opaquer(l){return this._rgb.a*=1+l,this}negate(){const l=this._rgb;return l.r=255-l.r,l.g=255-l.g,l.b=255-l.b,this}lighten(l){return ae(this._rgb,2,l),this}darken(l){return ae(this._rgb,2,-l),this}saturate(l){return ae(this._rgb,1,l),this}desaturate(l){return ae(this._rgb,1,-l),this}rotate(l){return function(g,l){var o=ar(g);o[0]=hr(o[0]+l),o=nr(o),g.r=o[0],g.g=o[1],g.b=o[2]}(this._rgb,l),this}}function sr(g){return new Yi(g)}const zn=g=>g instanceof CanvasGradient||g instanceof CanvasPattern;function Yn(g){return zn(g)?g:sr(g)}function kn(g){return zn(g)?g:sr(g).saturate(.5).darken(.1).hexString()}const xo=Object.create(null),$o=Object.create(null);function so(g,l){if(!l)return g;const o=l.split(".");for(let a=0,c=o.length;a<c;++a){const f=o[a];g=g[f]||(g[f]=Object.create(null))}return g}function go(g,l,o){return"string"==typeof l?ve(so(g,l),o):ve(so(g,""),l)}var lr=new class{constructor(l){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=o=>o.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(o,a)=>kn(a.backgroundColor),this.hoverBorderColor=(o,a)=>kn(a.borderColor),this.hoverColor=(o,a)=>kn(a.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(l)}set(l,o){return go(this,l,o)}get(l){return so(this,l)}describe(l,o){return go($o,l,o)}override(l,o){return go(xo,l,o)}route(l,o,a,c){const f=so(this,l),E=so(this,a),R="_"+o;Object.defineProperties(f,{[R]:{value:f[o],writable:!0},[o]:{enumerable:!0,get(){const O=this[R],F=E[c];return st(O)?Object.assign({},F,O):Bt(O,F)},set(O){this[R]=O}}})}}({_scriptable:g=>!g.startsWith("on"),_indexable:g=>"events"!==g,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function eo(g,l,o,a,c){let f=l[c];return f||(f=l[c]=g.measureText(c).width,o.push(c)),f>a&&(a=f),a}function ks(g,l,o,a){let c=(a=a||{}).data=a.data||{},f=a.garbageCollect=a.garbageCollect||[];a.font!==l&&(c=a.data={},f=a.garbageCollect=[],a.font=l),g.save(),g.font=l;let E=0;const R=o.length;let O,F,J,dt,Ft;for(O=0;O<R;O++)if(dt=o[O],null!=dt&&!0!==bt(dt))E=eo(g,c,f,E,dt);else if(bt(dt))for(F=0,J=dt.length;F<J;F++)Ft=dt[F],null!=Ft&&!bt(Ft)&&(E=eo(g,c,f,E,Ft));g.restore();const qt=f.length/2;if(qt>o.length){for(O=0;O<qt;O++)delete c[f[O]];f.splice(0,qt)}return E}function Ls(g,l,o){const a=g.currentDevicePixelRatio,c=0!==o?Math.max(o/2,.5):0;return Math.round((l-c)*a)/a+c}function Fo(g,l){(l=l||g.getContext("2d")).save(),l.resetTransform(),l.clearRect(0,0,g.width,g.height),l.restore()}function Do(g,l,o,a){let c,f,E,R,O;const F=l.pointStyle,J=l.rotation,dt=l.radius;let Ft=(J||0)*Te;if(F&&"object"==typeof F&&(c=F.toString(),"[object HTMLImageElement]"===c||"[object HTMLCanvasElement]"===c))return g.save(),g.translate(o,a),g.rotate(Ft),g.drawImage(F,-F.width/2,-F.height/2,F.width,F.height),void g.restore();if(!(isNaN(dt)||dt<=0)){switch(g.beginPath(),F){default:g.arc(o,a,dt,0,jt),g.closePath();break;case"triangle":g.moveTo(o+Math.sin(Ft)*dt,a-Math.cos(Ft)*dt),Ft+=Oe,g.lineTo(o+Math.sin(Ft)*dt,a-Math.cos(Ft)*dt),Ft+=Oe,g.lineTo(o+Math.sin(Ft)*dt,a-Math.cos(Ft)*dt),g.closePath();break;case"rectRounded":O=.516*dt,R=dt-O,f=Math.cos(Ft+ne)*R,E=Math.sin(Ft+ne)*R,g.arc(o-f,a-E,O,Ft-St,Ft-te),g.arc(o+E,a-f,O,Ft-te,Ft),g.arc(o+f,a+E,O,Ft,Ft+te),g.arc(o-E,a+f,O,Ft+te,Ft+St),g.closePath();break;case"rect":if(!J){R=Math.SQRT1_2*dt,g.rect(o-R,a-R,2*R,2*R);break}Ft+=ne;case"rectRot":f=Math.cos(Ft)*dt,E=Math.sin(Ft)*dt,g.moveTo(o-f,a-E),g.lineTo(o+E,a-f),g.lineTo(o+f,a+E),g.lineTo(o-E,a+f),g.closePath();break;case"crossRot":Ft+=ne;case"cross":f=Math.cos(Ft)*dt,E=Math.sin(Ft)*dt,g.moveTo(o-f,a-E),g.lineTo(o+f,a+E),g.moveTo(o+E,a-f),g.lineTo(o-E,a+f);break;case"star":f=Math.cos(Ft)*dt,E=Math.sin(Ft)*dt,g.moveTo(o-f,a-E),g.lineTo(o+f,a+E),g.moveTo(o+E,a-f),g.lineTo(o-E,a+f),Ft+=ne,f=Math.cos(Ft)*dt,E=Math.sin(Ft)*dt,g.moveTo(o-f,a-E),g.lineTo(o+f,a+E),g.moveTo(o+E,a-f),g.lineTo(o-E,a+f);break;case"line":f=Math.cos(Ft)*dt,E=Math.sin(Ft)*dt,g.moveTo(o-f,a-E),g.lineTo(o+f,a+E);break;case"dash":g.moveTo(o,a),g.lineTo(o+Math.cos(Ft)*dt,a+Math.sin(Ft)*dt)}g.fill(),l.borderWidth>0&&g.stroke()}}function jo(g,l,o){return o=o||.5,!l||g&&g.x>l.left-o&&g.x<l.right+o&&g.y>l.top-o&&g.y<l.bottom+o}function Io(g,l){g.save(),g.beginPath(),g.rect(l.left,l.top,l.right-l.left,l.bottom-l.top),g.clip()}function Ka(g){g.restore()}function ka(g,l,o,a,c){if(!l)return g.lineTo(o.x,o.y);if("middle"===c){const f=(l.x+o.x)/2;g.lineTo(f,l.y),g.lineTo(f,o.y)}else"after"===c!=!!a?g.lineTo(l.x,o.y):g.lineTo(o.x,l.y);g.lineTo(o.x,o.y)}function Ca(g,l,o,a){if(!l)return g.lineTo(o.x,o.y);g.bezierCurveTo(a?l.cp1x:l.cp2x,a?l.cp1y:l.cp2y,a?o.cp2x:o.cp1x,a?o.cp2y:o.cp1y,o.x,o.y)}function Zo(g,l,o,a,c,f={}){const E=bt(l)?l:[l],R=f.strokeWidth>0&&""!==f.strokeColor;let O,F;for(g.save(),g.font=c.string,function(g,l){l.translation&&g.translate(l.translation[0],l.translation[1]),Ct(l.rotation)||g.rotate(l.rotation),l.color&&(g.fillStyle=l.color),l.textAlign&&(g.textAlign=l.textAlign),l.textBaseline&&(g.textBaseline=l.textBaseline)}(g,f),O=0;O<E.length;++O)F=E[O],R&&(f.strokeColor&&(g.strokeStyle=f.strokeColor),Ct(f.strokeWidth)||(g.lineWidth=f.strokeWidth),g.strokeText(F,o,a,f.maxWidth)),g.fillText(F,o,a,f.maxWidth),El(g,o,a,F,f),a+=c.lineHeight;g.restore()}function El(g,l,o,a,c){if(c.strikethrough||c.underline){const f=g.measureText(a),E=l-f.actualBoundingBoxLeft,R=l+f.actualBoundingBoxRight,O=o-f.actualBoundingBoxAscent,F=o+f.actualBoundingBoxDescent,J=c.strikethrough?(O+F)/2:F;g.strokeStyle=g.fillStyle,g.beginPath(),g.lineWidth=c.decorationWidth||2,g.moveTo(E,J),g.lineTo(R,J),g.stroke()}}function aa(g,l){const{x:o,y:a,w:c,h:f,radius:E}=l;g.arc(o+E.topLeft,a+E.topLeft,E.topLeft,-te,St,!0),g.lineTo(o,a+f-E.bottomLeft),g.arc(o+E.bottomLeft,a+f-E.bottomLeft,E.bottomLeft,St,te,!0),g.lineTo(o+c-E.bottomRight,a+f),g.arc(o+c-E.bottomRight,a+f-E.bottomRight,E.bottomRight,te,0,!0),g.lineTo(o+c,a+E.topRight),g.arc(o+c-E.topRight,a+E.topRight,E.topRight,0,-te,!0),g.lineTo(o+E.topLeft,a)}const Ja=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),Ks=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function Cs(g,l){const o=(""+g).match(Ja);if(!o||"normal"===o[1])return 1.2*l;switch(g=+o[2],o[3]){case"px":return g;case"%":g/=100}return l*g}const Tl=g=>+g||0;function Sa(g,l){const o={},a=st(l),c=a?Object.keys(l):l,f=st(g)?a?E=>Bt(g[E],g[l[E]]):E=>g[E]:()=>g;for(const E of c)o[E]=Tl(f(E));return o}function la(g){return Sa(g,{top:"y",right:"x",bottom:"y",left:"x"})}function ko(g){return Sa(g,["topLeft","topRight","bottomLeft","bottomRight"])}function jr(g){const l=la(g);return l.width=l.left+l.right,l.height=l.top+l.bottom,l}function ho(g,l){let o=Bt((g=g||{}).size,(l=l||lr.font).size);"string"==typeof o&&(o=parseInt(o,10));let a=Bt(g.style,l.style);a&&!(""+a).match(Ks)&&(console.warn('Invalid font style specified: "'+a+'"'),a="");const c={family:Bt(g.family,l.family),lineHeight:Cs(Bt(g.lineHeight,l.lineHeight),o),size:o,style:a,weight:Bt(g.weight,l.weight),string:""};return c.string=function(g){return!g||Ct(g.size)||Ct(g.family)?null:(g.style?g.style+" ":"")+(g.weight?g.weight+" ":"")+g.size+"px "+g.family}(c),c}function To(g,l,o,a){let f,E,R,c=!0;for(f=0,E=g.length;f<E;++f)if(R=g[f],void 0!==R&&(void 0!==l&&"function"==typeof R&&(R=R(l),c=!1),void 0!==o&&bt(R)&&(R=R[o%R.length],c=!1),void 0!==R))return a&&!c&&(a.cacheable=!1),R}function Yo(g,l){return Object.assign(Object.create(g),l)}function Ss(g,l,o){o=o||(E=>g[E]<l);let f,a=g.length-1,c=0;for(;a-c>1;)f=c+a>>1,o(f)?c=f:a=f;return{lo:c,hi:a}}const Bo=(g,l,o)=>Ss(g,o,a=>g[a][l]<o),Lo=(g,l,o)=>Ss(g,o,a=>g[a][l]>=o),ws=["push","pop","shift","splice","unshift"];function fs(g,l){const o=g._chartjs;if(!o)return;const a=o.listeners,c=a.indexOf(l);-1!==c&&a.splice(c,1),!(a.length>0)&&(ws.forEach(f=>{delete g[f]}),delete g._chartjs)}function Lr(g){const l=new Set;let o,a;for(o=0,a=g.length;o<a;++o)l.add(g[o]);return l.size===a?g:Array.from(l)}function Js(g,l=[""],o=g,a,c=(()=>g[0])){Gt(a)||(a=Be("_fallback",g));const f={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:g,_rootScopes:o,_fallback:a,_getTarget:c,override:E=>Js([E,...g],l,o,a)};return new Proxy(f,{deleteProperty:(E,R)=>(delete E[R],delete E._keys,delete g[0][R],!0),get:(E,R)=>Ho(E,R,()=>function(g,l,o,a){let c;for(const f of l)if(c=Be(ol(f,g),o),Gt(c))return is(g,c)?Q(o,a,g,c):c}(R,l,g,E)),getOwnPropertyDescriptor:(E,R)=>Reflect.getOwnPropertyDescriptor(E._scopes[0],R),getPrototypeOf:()=>Reflect.getPrototypeOf(g[0]),has:(E,R)=>vi(E).includes(R),ownKeys:E=>vi(E),set(E,R,O){const F=E._storage||(E._storage=c());return E[R]=F[R]=O,delete E._keys,!0}})}function Ar(g,l,o,a){const c={_cacheable:!1,_proxy:g,_context:l,_subProxy:o,_stack:new Set,_descriptors:$s(g,a),setContext:f=>Ar(g,f,o,a),override:f=>Ar(g.override(f),l,o,a)};return new Proxy(c,{deleteProperty:(f,E)=>(delete f[E],delete g[E],!0),get:(f,E,R)=>Ho(f,E,()=>function(g,l,o){const{_proxy:a,_context:c,_subProxy:f,_descriptors:E}=g;let R=a[l];return Se(R)&&E.isScriptable(l)&&(R=function(g,l,o,a){const{_proxy:c,_context:f,_subProxy:E,_stack:R}=o;if(R.has(g))throw new Error("Recursion detected: "+Array.from(R).join("->")+"->"+g);return R.add(g),l=l(f,E||a),R.delete(g),is(g,l)&&(l=Q(c._scopes,c,g,l)),l}(l,R,g,o)),bt(R)&&R.length&&(R=function(g,l,o,a){const{_proxy:c,_context:f,_subProxy:E,_descriptors:R}=o;if(Gt(f.index)&&a(g))l=l[f.index%l.length];else if(st(l[0])){const O=l,F=c._scopes.filter(J=>J!==O);l=[];for(const J of O){const dt=Q(F,c,g,J);l.push(Ar(dt,f,E&&E[g],R))}}return l}(l,R,g,E.isIndexable)),is(l,R)&&(R=Ar(R,c,f&&f[l],E)),R}(f,E,R)),getOwnPropertyDescriptor:(f,E)=>f._descriptors.allKeys?Reflect.has(g,E)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(g,E),getPrototypeOf:()=>Reflect.getPrototypeOf(g),has:(f,E)=>Reflect.has(g,E),ownKeys:()=>Reflect.ownKeys(g),set:(f,E,R)=>(g[E]=R,delete f[E],!0)})}function $s(g,l={scriptable:!0,indexable:!0}){const{_scriptable:o=l.scriptable,_indexable:a=l.indexable,_allKeys:c=l.allKeys}=g;return{allKeys:c,scriptable:o,indexable:a,isScriptable:Se(o)?o:()=>o,isIndexable:Se(a)?a:()=>a}}const ol=(g,l)=>g?g+pi(l):l,is=(g,l)=>st(l)&&"adapters"!==g&&(null===Object.getPrototypeOf(l)||l.constructor===Object);function Ho(g,l,o){if(Object.prototype.hasOwnProperty.call(g,l))return g[l];const a=o();return g[l]=a,a}function Ln(g,l,o){return Se(g)?g(l,o):g}const ma=(g,l)=>!0===g?l:"string"==typeof g?Le(l,g):void 0;function xt(g,l,o,a,c){for(const f of l){const E=ma(o,f);if(E){g.add(E);const R=Ln(E._fallback,o,c);if(Gt(R)&&R!==o&&R!==a)return R}else if(!1===E&&Gt(a)&&o!==a)return null}return!1}function Q(g,l,o,a){const c=l._rootScopes,f=Ln(l._fallback,o,a),E=[...g,...c],R=new Set;R.add(a);let O=V(R,E,o,f||o,a);return!(null===O||Gt(f)&&f!==o&&(O=V(R,E,f,O,a),null===O))&&Js(Array.from(R),[""],c,f,()=>function(g,l,o){const a=g._getTarget();l in a||(a[l]={});const c=a[l];return bt(c)&&st(o)?o:c}(l,o,a))}function V(g,l,o,a,c){for(;o;)o=xt(g,l,o,a,c);return o}function Be(g,l){for(const o of l){if(!o)continue;const a=o[g];if(Gt(a))return a}}function vi(g){let l=g._keys;return l||(l=g._keys=function(g){const l=new Set;for(const o of g)for(const a of Object.keys(o).filter(c=>!c.startsWith("_")))l.add(a);return Array.from(l)}(g._scopes)),l}const Xn=Number.EPSILON||1e-14,yr=(g,l)=>l<g.length&&!g[l].skip&&g[l],Or=g=>"x"===g?"y":"x";function Dr(g,l,o,a){const c=g.skip?l:g,f=l,E=o.skip?l:o,R=Zi(f,c),O=Zi(E,f);let F=R/(R+O),J=O/(R+O);F=isNaN(F)?0:F,J=isNaN(J)?0:J;const dt=a*F,Ft=a*J;return{previous:{x:f.x-dt*(E.x-c.x),y:f.y-dt*(E.y-c.y)},next:{x:f.x+Ft*(E.x-c.x),y:f.y+Ft*(E.y-c.y)}}}function Hn(g,l,o){return Math.max(Math.min(g,o),l)}function wa(g,l,o,a,c){let f,E,R,O;if(l.spanGaps&&(g=g.filter(F=>!F.skip)),"monotone"===l.cubicInterpolationMode)!function(g,l="x"){const o=Or(l),a=g.length,c=Array(a).fill(0),f=Array(a);let E,R,O,F=yr(g,0);for(E=0;E<a;++E)if(R=O,O=F,F=yr(g,E+1),O){if(F){const J=F[l]-O[l];c[E]=0!==J?(F[o]-O[o])/J:0}f[E]=R?F?me(c[E-1])!==me(c[E])?0:(c[E-1]+c[E])/2:c[E-1]:c[E]}(function(g,l,o){const a=g.length;let c,f,E,R,O,F=yr(g,0);for(let J=0;J<a-1;++J)if(O=F,F=yr(g,J+1),O&&F){if(ti(l[J],0,Xn)){o[J]=o[J+1]=0;continue}c=o[J]/l[J],f=o[J+1]/l[J],R=Math.pow(c,2)+Math.pow(f,2),!(R<=9)&&(E=3/Math.sqrt(R),o[J]=c*E*l[J],o[J+1]=f*E*l[J])}})(g,c,f),function(g,l,o="x"){const a=Or(o),c=g.length;let f,E,R,O=yr(g,0);for(let F=0;F<c;++F){if(E=R,R=O,O=yr(g,F+1),!R)continue;const J=R[o],dt=R[a];E&&(f=(J-E[o])/3,R[`cp1${o}`]=J-f,R[`cp1${a}`]=dt-f*l[F]),O&&(f=(O[o]-J)/3,R[`cp2${o}`]=J+f,R[`cp2${a}`]=dt+f*l[F])}}(g,f,l)}(g,c);else{let F=a?g[g.length-1]:g[0];for(f=0,E=g.length;f<E;++f)R=g[f],O=Dr(F,R,g[Math.min(f+1,E-(a?0:1))%E],l.tension),R.cp1x=O.previous.x,R.cp1y=O.previous.y,R.cp2x=O.next.x,R.cp2y=O.next.y,F=R}l.capBezierPoints&&function(g,l){let o,a,c,f,E,R=jo(g[0],l);for(o=0,a=g.length;o<a;++o)E=f,f=R,R=o<a-1&&jo(g[o+1],l),f&&(c=g[o],E&&(c.cp1x=Hn(c.cp1x,l.left,l.right),c.cp1y=Hn(c.cp1y,l.top,l.bottom)),R&&(c.cp2x=Hn(c.cp2x,l.left,l.right),c.cp2y=Hn(c.cp2y,l.top,l.bottom)))}(g,o)}function Uo(){return"undefined"!=typeof window&&"undefined"!=typeof document}function $a(g){let l=g.parentNode;return l&&"[object ShadowRoot]"===l.toString()&&(l=l.host),l}function Rs(g,l,o){let a;return"string"==typeof g?(a=parseInt(g,10),-1!==g.indexOf("%")&&(a=a/100*l.parentNode[o])):a=g,a}const Ps=g=>window.getComputedStyle(g,null),Wt=["top","right","bottom","left"];function G(g,l,o){const a={};o=o?"-"+o:"";for(let c=0;c<4;c++){const f=Wt[c];a[f]=parseFloat(g[l+"-"+f+o])||0}return a.width=a.left+a.right,a.height=a.top+a.bottom,a}function ee(g,l){const{canvas:o,currentDevicePixelRatio:a}=l,c=Ps(o),f="border-box"===c.boxSizing,E=G(c,"padding"),R=G(c,"border","width"),{x:O,y:F,box:J}=function(g,l){const o=g.native||g,a=o.touches,c=a&&a.length?a[0]:o,{offsetX:f,offsetY:E}=c;let O,F,R=!1;if(((g,l,o)=>(g>0||l>0)&&(!o||!o.shadowRoot))(f,E,o.target))O=f,F=E;else{const J=l.getBoundingClientRect();O=c.clientX-J.left,F=c.clientY-J.top,R=!0}return{x:O,y:F,box:R}}(g,o),dt=E.left+(J&&R.left),Ft=E.top+(J&&R.top);let{width:qt,height:Ee}=l;return f&&(qt-=E.width+R.width,Ee-=E.height+R.height),{x:Math.round((O-dt)/qt*o.width/a),y:Math.round((F-Ft)/Ee*o.height/a)}}const Xe=g=>Math.round(10*g)/10;function bi(g,l,o){const a=l||1,c=Math.floor(g.height*a),f=Math.floor(g.width*a);g.height=c/a,g.width=f/a;const E=g.canvas;return E.style&&(o||!E.style.height&&!E.style.width)&&(E.style.height=`${g.height}px`,E.style.width=`${g.width}px`),(g.currentDevicePixelRatio!==a||E.height!==c||E.width!==f)&&(g.currentDevicePixelRatio=a,E.height=c,E.width=f,g.ctx.setTransform(a,0,0,a,0,0),!0)}const Ui=function(){let g=!1;try{const l={get passive(){return g=!0,!1}};window.addEventListener("test",null,l),window.removeEventListener("test",null,l)}catch(l){}return g}();function hn(g,l){const o=function(g,l){return Ps(g).getPropertyValue(l)}(g,l),a=o&&o.match(/^(\d+)(\.\d+)?px$/);return a?+a[1]:void 0}function Cn(g,l,o,a){return{x:g.x+o*(l.x-g.x),y:g.y+o*(l.y-g.y)}}function Zn(g,l,o,a){return{x:g.x+o*(l.x-g.x),y:"middle"===a?o<.5?g.y:l.y:"after"===a?o<1?g.y:l.y:o>0?l.y:g.y}}function Qn(g,l,o,a){const c={x:g.cp2x,y:g.cp2y},f={x:l.cp1x,y:l.cp1y},E=Cn(g,c,o),R=Cn(c,f,o),O=Cn(f,l,o),F=Cn(E,R,o),J=Cn(R,O,o);return Cn(F,J,o)}const Nn=new Map;function er(g,l,o){return function(g,l){l=l||{};const o=g+JSON.stringify(l);let a=Nn.get(o);return a||(a=new Intl.NumberFormat(g,l),Nn.set(o,a)),a}(l,o).format(g)}function ro(g,l,o){return g?function(g,l){return{x:o=>g+g+l-o,setWidth(o){l=o},textAlign:o=>"center"===o?o:"right"===o?"left":"right",xPlus:(o,a)=>o-a,leftForLtr:(o,a)=>o-a}}(l,o):{x:g=>g,setWidth(g){},textAlign:g=>g,xPlus:(g,l)=>g+l,leftForLtr:(g,l)=>g}}function Vo(g,l){let o,a;("ltr"===l||"rtl"===l)&&(o=g.canvas.style,a=[o.getPropertyValue("direction"),o.getPropertyPriority("direction")],o.setProperty("direction",l,"important"),g.prevTextDirection=a)}function La(g,l){void 0!==l&&(delete g.prevTextDirection,g.canvas.style.setProperty("direction",l[0],l[1]))}function Fs(g){return"angle"===g?{between:Ci,compare:Re,normalize:xe}:{between:_i,compare:(l,o)=>l-o,normalize:l=>l}}function Mo({start:g,end:l,count:o,loop:a,style:c}){return{start:g%o,end:l%o,loop:a&&(l-g+1)%o==0,style:c}}function gs(g,l,o){if(!o)return[g];const{property:a,start:c,end:f}=o,E=l.length,{compare:R,between:O,normalize:F}=Fs(a),{start:J,end:dt,loop:Ft,style:qt}=function(g,l,o){const{property:a,start:c,end:f}=o,{between:E,normalize:R}=Fs(a),O=l.length;let Ft,qt,{start:F,end:J,loop:dt}=g;if(dt){for(F+=O,J+=O,Ft=0,qt=O;Ft<qt&&E(R(l[F%O][a]),c,f);++Ft)F--,J--;F%=O,J%=O}return J<F&&(J+=O),{start:F,end:J,loop:dt,style:g.style}}(g,l,o),Ee=[];let ze,Si,an,Ae=!1,We=null;for(let wn=J,Pn=J;wn<=dt;++wn)Si=l[wn%E],!Si.skip&&(ze=F(Si[a]),ze!==an&&(Ae=O(ze,c,f),null===We&&(Ae||O(c,an,ze)&&0!==R(c,an))&&(We=0===R(ze,c)?wn:Pn),null!==We&&(!Ae||0===R(f,ze)||O(f,an,ze))&&(Ee.push(Mo({start:We,end:wn,loop:Ft,count:E,style:qt})),We=null),Pn=wn,an=ze));return null!==We&&Ee.push(Mo({start:We,end:dt,loop:Ft,count:E,style:qt})),Ee}function Bs(g,l){const o=[],a=g.segments;for(let c=0;c<a.length;c++){const f=gs(a[c],g.points,l);f.length&&o.push(...f)}return o}function Dn(g){return{backgroundColor:g.backgroundColor,borderCapStyle:g.borderCapStyle,borderDash:g.borderDash,borderDashOffset:g.borderDashOffset,borderJoinStyle:g.borderJoinStyle,borderWidth:g.borderWidth,borderColor:g.borderColor}}function An(g,l){return l&&JSON.stringify(g)!==JSON.stringify(l)}var ur=new class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(l,o,a,c){const E=o.duration;o.listeners[c].forEach(R=>R({chart:l,initial:o.initial,numSteps:E,currentStep:Math.min(a-o.start,E)}))}_refresh(){this._request||(this._running=!0,this._request=ot.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(l=Date.now()){let o=0;this._charts.forEach((a,c)=>{if(!a.running||!a.items.length)return;const f=a.items;let O,E=f.length-1,R=!1;for(;E>=0;--E)O=f[E],O._active?(O._total>a.duration&&(a.duration=O._total),O.tick(l),R=!0):(f[E]=f[f.length-1],f.pop());R&&(c.draw(),this._notify(c,a,l,"progress")),f.length||(a.running=!1,this._notify(c,a,l,"complete"),a.initial=!1),o+=f.length}),this._lastDate=l,0===o&&(this._running=!1)}_getAnims(l){const o=this._charts;let a=o.get(l);return a||(a={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},o.set(l,a)),a}listen(l,o,a){this._getAnims(l).listeners[o].push(a)}add(l,o){!o||!o.length||this._getAnims(l).items.push(...o)}has(l){return this._getAnims(l).items.length>0}start(l){const o=this._charts.get(l);!o||(o.running=!0,o.start=Date.now(),o.duration=o.items.reduce((a,c)=>Math.max(a,c._duration),0),this._refresh())}running(l){if(!this._running)return!1;const o=this._charts.get(l);return!(!o||!o.running||!o.items.length)}stop(l){const o=this._charts.get(l);if(!o||!o.items.length)return;const a=o.items;let c=a.length-1;for(;c>=0;--c)a[c].cancel();o.items=[],this._notify(l,o,Date.now(),"complete")}remove(l){return this._charts.delete(l)}};const Er="transparent",ns={boolean:(g,l,o)=>o>.5?l:g,color(g,l,o){const a=Yn(g||Er),c=a.valid&&Yn(l||Er);return c&&c.valid?c.mix(a,o).hexString():l},number:(g,l,o)=>g+(l-g)*o};class Ir{constructor(l,o,a,c){const f=o[a];c=To([l.to,c,f,l.from]);const E=To([l.from,f,c]);this._active=!0,this._fn=l.fn||ns[l.type||typeof E],this._easing=kt[l.easing]||kt.linear,this._start=Math.floor(Date.now()+(l.delay||0)),this._duration=this._total=Math.floor(l.duration),this._loop=!!l.loop,this._target=o,this._prop=a,this._from=E,this._to=c,this._promises=void 0}active(){return this._active}update(l,o,a){if(this._active){this._notify(!1);const c=this._target[this._prop],f=a-this._start,E=this._duration-f;this._start=a,this._duration=Math.floor(Math.max(E,l.duration)),this._total+=f,this._loop=!!l.loop,this._to=To([l.to,o,c,l.from]),this._from=To([l.from,c,o])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(l){const o=l-this._start,a=this._duration,c=this._prop,f=this._from,E=this._loop,R=this._to;let O;if(this._active=f!==R&&(E||o<a),!this._active)return this._target[c]=R,void this._notify(!0);o<0?this._target[c]=f:(O=o/a%2,O=E&&O>1?2-O:O,O=this._easing(Math.min(1,Math.max(0,O))),this._target[c]=this._fn(f,R,O))}wait(){const l=this._promises||(this._promises=[]);return new Promise((o,a)=>{l.push({res:o,rej:a})})}_notify(l){const o=l?"res":"rej",a=this._promises||[];for(let c=0;c<a.length;c++)a[c][o]()}}lr.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const al=Object.keys(lr.animation);lr.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:g=>"onProgress"!==g&&"onComplete"!==g&&"fn"!==g}),lr.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),lr.describe("animations",{_fallback:"animation"}),lr.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:g=>0|g}}}});class Za{constructor(l,o){this._chart=l,this._properties=new Map,this.configure(o)}configure(l){if(!st(l))return;const o=this._properties;Object.getOwnPropertyNames(l).forEach(a=>{const c=l[a];if(!st(c))return;const f={};for(const E of al)f[E]=c[E];(bt(c.properties)&&c.properties||[a]).forEach(E=>{(E===a||!o.has(E))&&o.set(E,f)})})}_animateOptions(l,o){const a=o.options,c=function(g,l){if(!l)return;let o=g.options;if(o)return o.$shared&&(g.options=o=Object.assign({},o,{$shared:!1,$animations:{}})),o;g.options=l}(l,a);if(!c)return[];const f=this._createAnimations(c,a);return a.$shared&&function(g,l){const o=[],a=Object.keys(l);for(let c=0;c<a.length;c++){const f=g[a[c]];f&&f.active()&&o.push(f.wait())}return Promise.all(o)}(l.options.$animations,a).then(()=>{l.options=a},()=>{}),f}_createAnimations(l,o){const a=this._properties,c=[],f=l.$animations||(l.$animations={}),E=Object.keys(o),R=Date.now();let O;for(O=E.length-1;O>=0;--O){const F=E[O];if("$"===F.charAt(0))continue;if("options"===F){c.push(...this._animateOptions(l,o));continue}const J=o[F];let dt=f[F];const Ft=a.get(F);if(dt){if(Ft&&dt.active()){dt.update(Ft,J,R);continue}dt.cancel()}Ft&&Ft.duration?(f[F]=dt=new Ir(Ft,l,F,J),c.push(dt)):l[F]=J}return c}update(l,o){if(0===this._properties.size)return void Object.assign(l,o);const a=this._createAnimations(l,o);return a.length?(ur.add(this._chart,a),!0):void 0}}function _s(g,l){const o=g&&g.options||{},a=o.reverse,c=void 0===o.min?l:0,f=void 0===o.max?l:0;return{start:a?f:c,end:a?c:f}}function _a(g,l){const o=[],a=g._getSortedDatasetMetas(l);let c,f;for(c=0,f=a.length;c<f;++c)o.push(a[c].index);return o}function Ol(g,l,o,a={}){const c=g.keys,f="single"===a.mode;let E,R,O,F;if(null!==l){for(E=0,R=c.length;E<R;++E){if(O=+c[E],O===o){if(a.all)continue;break}F=g.values[O],gt(F)&&(f||0===l||me(l)===me(F))&&(l+=F)}return l}}function vs(g,l){const o=g&&g.options.stacked;return o||void 0===o&&void 0!==l.stack}function Fa(g,l,o){const a=g[l]||(g[l]={});return a[o]||(a[o]={})}function qs(g,l,o,a){for(const c of l.getMatchingVisibleMetas(a).reverse()){const f=g[c.index];if(o&&f>0||!o&&f<0)return c.index}return null}function Ul(g,l){const{chart:o,_cachedMeta:a}=g,c=o._stacks||(o._stacks={}),{iScale:f,vScale:E,index:R}=a,O=f.axis,F=E.axis,J=function(g,l,o){return`${g.id}.${l.id}.${o.stack||o.type}`}(f,E,a),dt=l.length;let Ft;for(let qt=0;qt<dt;++qt){const Ee=l[qt],{[O]:Ae,[F]:We}=Ee;Ft=(Ee._stacks||(Ee._stacks={}))[F]=Fa(c,J,Ae),Ft[R]=We,Ft._top=qs(Ft,E,!0,a.type),Ft._bottom=qs(Ft,E,!1,a.type)}}function Ba(g,l){const o=g.scales;return Object.keys(o).filter(a=>o[a].axis===l).shift()}function Ra(g,l){const o=g.controller.index,a=g.vScale&&g.vScale.axis;if(a){l=l||g._parsed;for(const c of l){const f=c._stacks;if(!f||void 0===f[a]||void 0===f[a][o])return;delete f[a][o]}}}const Qa=g=>"reset"===g||"none"===g,Rc=(g,l)=>l?g:Object.assign({},g);let va=(()=>{class g{constructor(o,a){this.chart=o,this._ctx=o.ctx,this.index=a,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const o=this._cachedMeta;this.configure(),this.linkScales(),o._stacked=vs(o.vScale,o),this.addElements()}updateIndex(o){this.index!==o&&Ra(this._cachedMeta),this.index=o}linkScales(){const o=this.chart,a=this._cachedMeta,c=this.getDataset(),f=(Ft,qt,Ee,Ae)=>"x"===Ft?qt:"r"===Ft?Ae:Ee,E=a.xAxisID=Bt(c.xAxisID,Ba(o,"x")),R=a.yAxisID=Bt(c.yAxisID,Ba(o,"y")),O=a.rAxisID=Bt(c.rAxisID,Ba(o,"r")),F=a.indexAxis,J=a.iAxisID=f(F,E,R,O),dt=a.vAxisID=f(F,R,E,O);a.xScale=this.getScaleForId(E),a.yScale=this.getScaleForId(R),a.rScale=this.getScaleForId(O),a.iScale=this.getScaleForId(J),a.vScale=this.getScaleForId(dt)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(o){return this.chart.scales[o]}_getOtherScale(o){const a=this._cachedMeta;return o===a.iScale?a.vScale:a.iScale}reset(){this._update("reset")}_destroy(){const o=this._cachedMeta;this._data&&fs(this._data,this),o._stacked&&Ra(o)}_dataCheck(){const o=this.getDataset(),a=o.data||(o.data=[]),c=this._data;if(st(a))this._data=function(g){const l=Object.keys(g),o=new Array(l.length);let a,c,f;for(a=0,c=l.length;a<c;++a)f=l[a],o[a]={x:f,y:g[f]};return o}(a);else if(c!==a){if(c){fs(c,this);const f=this._cachedMeta;Ra(f),f._parsed=[]}a&&Object.isExtensible(a)&&function(g,l){g._chartjs?g._chartjs.listeners.push(l):(Object.defineProperty(g,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[l]}}),ws.forEach(o=>{const a="_onData"+pi(o),c=g[o];Object.defineProperty(g,o,{configurable:!0,enumerable:!1,value(...f){const E=c.apply(this,f);return g._chartjs.listeners.forEach(R=>{"function"==typeof R[a]&&R[a](...f)}),E}})}))}(a,this),this._syncList=[],this._data=a}}addElements(){const o=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(o.dataset=new this.datasetElementType)}buildOrUpdateElements(o){const a=this._cachedMeta,c=this.getDataset();let f=!1;this._dataCheck();const E=a._stacked;a._stacked=vs(a.vScale,a),a.stack!==c.stack&&(f=!0,Ra(a),a.stack=c.stack),this._resyncElements(o),(f||E!==a._stacked)&&Ul(this,a._parsed)}configure(){const o=this.chart.config,a=o.datasetScopeKeys(this._type),c=o.getOptionScopes(this.getDataset(),a,!0);this.options=o.createResolver(c,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(o,a){const{_cachedMeta:c,_data:f}=this,{iScale:E,_stacked:R}=c,O=E.axis;let dt,Ft,qt,F=0===o&&a===f.length||c._sorted,J=o>0&&c._parsed[o-1];if(!1===this._parsing)c._parsed=f,c._sorted=!0,qt=f;else{qt=bt(f[o])?this.parseArrayData(c,f,o,a):st(f[o])?this.parseObjectData(c,f,o,a):this.parsePrimitiveData(c,f,o,a);const Ee=()=>null===Ft[O]||J&&Ft[O]<J[O];for(dt=0;dt<a;++dt)c._parsed[dt+o]=Ft=qt[dt],F&&(Ee()&&(F=!1),J=Ft);c._sorted=F}R&&Ul(this,qt)}parsePrimitiveData(o,a,c,f){const{iScale:E,vScale:R}=o,O=E.axis,F=R.axis,J=E.getLabels(),dt=E===R,Ft=new Array(f);let qt,Ee,Ae;for(qt=0,Ee=f;qt<Ee;++qt)Ae=qt+c,Ft[qt]={[O]:dt||E.parse(J[Ae],Ae),[F]:R.parse(a[Ae],Ae)};return Ft}parseArrayData(o,a,c,f){const{xScale:E,yScale:R}=o,O=new Array(f);let F,J,dt,Ft;for(F=0,J=f;F<J;++F)dt=F+c,Ft=a[dt],O[F]={x:E.parse(Ft[0],dt),y:R.parse(Ft[1],dt)};return O}parseObjectData(o,a,c,f){const{xScale:E,yScale:R}=o,{xAxisKey:O="x",yAxisKey:F="y"}=this._parsing,J=new Array(f);let dt,Ft,qt,Ee;for(dt=0,Ft=f;dt<Ft;++dt)qt=dt+c,Ee=a[qt],J[dt]={x:E.parse(Le(Ee,O),qt),y:R.parse(Le(Ee,F),qt)};return J}getParsed(o){return this._cachedMeta._parsed[o]}getDataElement(o){return this._cachedMeta.data[o]}applyStack(o,a,c){const E=this._cachedMeta,R=a[o.axis];return Ol({keys:_a(this.chart,!0),values:a._stacks[o.axis]},R,E.index,{mode:c})}updateRangeFromParsed(o,a,c,f){const E=c[a.axis];let R=null===E?NaN:E;const O=f&&c._stacks[a.axis];f&&O&&(f.values=O,R=Ol(f,E,this._cachedMeta.index)),o.min=Math.min(o.min,R),o.max=Math.max(o.max,R)}getMinMax(o,a){const c=this._cachedMeta,f=c._parsed,E=c._sorted&&o===c.iScale,R=f.length,O=this._getOtherScale(o),F=((g,l,o)=>g&&!l.hidden&&l._stacked&&{keys:_a(this.chart,!0),values:null})(a,c),J={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:dt,max:Ft}=function(g){const{min:l,max:o,minDefined:a,maxDefined:c}=g.getUserBounds();return{min:a?l:Number.NEGATIVE_INFINITY,max:c?o:Number.POSITIVE_INFINITY}}(O);let qt,Ee;function Ae(){Ee=f[qt];const We=Ee[O.axis];return!gt(Ee[o.axis])||dt>We||Ft<We}for(qt=0;qt<R&&(Ae()||(this.updateRangeFromParsed(J,o,Ee,F),!E));++qt);if(E)for(qt=R-1;qt>=0;--qt)if(!Ae()){this.updateRangeFromParsed(J,o,Ee,F);break}return J}getAllParsedValues(o){const a=this._cachedMeta._parsed,c=[];let f,E,R;for(f=0,E=a.length;f<E;++f)R=a[f][o.axis],gt(R)&&c.push(R);return c}getMaxOverflow(){return!1}getLabelAndValue(o){const a=this._cachedMeta,c=a.iScale,f=a.vScale,E=this.getParsed(o);return{label:c?""+c.getLabelForValue(E[c.axis]):"",value:f?""+f.getLabelForValue(E[f.axis]):""}}_update(o){const a=this._cachedMeta;this.update(o||"default"),a._clip=function(g){let l,o,a,c;return st(g)?(l=g.top,o=g.right,a=g.bottom,c=g.left):l=o=a=c=g,{top:l,right:o,bottom:a,left:c,disabled:!1===g}}(Bt(this.options.clip,function(g,l,o){if(!1===o)return!1;const a=_s(g,o),c=_s(l,o);return{top:c.end,right:a.end,bottom:c.start,left:a.start}}(a.xScale,a.yScale,this.getMaxOverflow())))}update(o){}draw(){const o=this._ctx,c=this._cachedMeta,f=c.data||[],E=this.chart.chartArea,R=[],O=this._drawStart||0,F=this._drawCount||f.length-O,J=this.options.drawActiveElementsOnTop;let dt;for(c.dataset&&c.dataset.draw(o,E,O,F),dt=O;dt<O+F;++dt){const Ft=f[dt];Ft.hidden||(Ft.active&&J?R.push(Ft):Ft.draw(o,E))}for(dt=0;dt<R.length;++dt)R[dt].draw(o,E)}getStyle(o,a){const c=a?"active":"default";return void 0===o&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(c):this.resolveDataElementOptions(o||0,c)}getContext(o,a,c){const f=this.getDataset();let E;if(o>=0&&o<this._cachedMeta.data.length){const R=this._cachedMeta.data[o];E=R.$context||(R.$context=function(g,l,o){return Yo(g,{active:!1,dataIndex:l,parsed:void 0,raw:void 0,element:o,index:l,mode:"default",type:"data"})}(this.getContext(),o,R)),E.parsed=this.getParsed(o),E.raw=f.data[o],E.index=E.dataIndex=o}else E=this.$context||(this.$context=function(g,l){return Yo(g,{active:!1,dataset:void 0,datasetIndex:l,index:l,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),E.dataset=f,E.index=E.datasetIndex=this.index;return E.active=!!a,E.mode=c,E}resolveDatasetElementOptions(o){return this._resolveElementOptions(this.datasetElementType.id,o)}resolveDataElementOptions(o,a){return this._resolveElementOptions(this.dataElementType.id,a,o)}_resolveElementOptions(o,a="default",c){const f="active"===a,E=this._cachedDataOpts,R=o+"-"+a,O=E[R],F=this.enableOptionSharing&&Gt(c);if(O)return Rc(O,F);const J=this.chart.config,dt=J.datasetElementScopeKeys(this._type,o),Ft=f?[`${o}Hover`,"hover",o,""]:[o,""],qt=J.getOptionScopes(this.getDataset(),dt),Ee=Object.keys(lr.elements[o]),We=J.resolveNamedOptions(qt,Ee,()=>this.getContext(c,f),Ft);return We.$shared&&(We.$shared=F,E[R]=Object.freeze(Rc(We,F))),We}_resolveAnimations(o,a,c){const f=this.chart,E=this._cachedDataOpts,R=`animation-${a}`,O=E[R];if(O)return O;let F;if(!1!==f.options.animation){const dt=this.chart.config,Ft=dt.datasetAnimationScopeKeys(this._type,a),qt=dt.getOptionScopes(this.getDataset(),Ft);F=dt.createResolver(qt,this.getContext(o,c,a))}const J=new Za(f,F&&F.animations);return F&&F._cacheable&&(E[R]=Object.freeze(J)),J}getSharedOptions(o){if(o.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},o))}includeOptions(o,a){return!a||Qa(o)||this.chart._animationsDisabled}updateElement(o,a,c,f){Qa(f)?Object.assign(o,c):this._resolveAnimations(a,f).update(o,c)}updateSharedOptions(o,a,c){o&&!Qa(a)&&this._resolveAnimations(void 0,a).update(o,c)}_setStyle(o,a,c,f){o.active=f;const E=this.getStyle(a,f);this._resolveAnimations(a,c,f).update(o,{options:!f&&this.getSharedOptions(E)||E})}removeHoverStyle(o,a,c){this._setStyle(o,c,"active",!1)}setHoverStyle(o,a,c){this._setStyle(o,c,"active",!0)}_removeDatasetHoverStyle(){const o=this._cachedMeta.dataset;o&&this._setStyle(o,void 0,"active",!1)}_setDatasetHoverStyle(){const o=this._cachedMeta.dataset;o&&this._setStyle(o,void 0,"active",!0)}_resyncElements(o){const a=this._data,c=this._cachedMeta.data;for(const[O,F,J]of this._syncList)this[O](F,J);this._syncList=[];const f=c.length,E=a.length,R=Math.min(E,f);R&&this.parse(0,R),E>f?this._insertElements(f,E-f,o):E<f&&this._removeElements(E,f-E)}_insertElements(o,a,c=!0){const f=this._cachedMeta,E=f.data,R=o+a;let O;const F=J=>{for(J.length+=a,O=J.length-1;O>=R;O--)J[O]=J[O-a]};for(F(E),O=o;O<R;++O)E[O]=new this.dataElementType;this._parsing&&F(f._parsed),this.parse(o,a),c&&this.updateElements(E,o,a,"reset")}updateElements(o,a,c,f){}_removeElements(o,a){const c=this._cachedMeta;if(this._parsing){const f=c._parsed.splice(o,a);c._stacked&&Ra(c,f)}c.data.splice(o,a)}_sync(o){if(this._parsing)this._syncList.push(o);else{const[a,c,f]=o;this[a](c,f)}this.chart._dataChanges.push([this.index,...o])}_onDataPush(){const o=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-o,o])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(o,a){a&&this._sync(["_removeElements",o,a]);const c=arguments.length-2;c&&this._sync(["_insertElements",o,c])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return g.defaults={},g})();function Us(g){const l=g.iScale,o=function(g,l){if(!g._cache.$bar){const o=g.getMatchingVisibleMetas(l);let a=[];for(let c=0,f=o.length;c<f;c++)a=a.concat(o[c].controller.getAllParsedValues(g));g._cache.$bar=Lr(a.sort((c,f)=>c-f))}return g._cache.$bar}(l,g.type);let c,f,E,R,a=l._length;const O=()=>{32767===E||-32768===E||(Gt(R)&&(a=Math.min(a,Math.abs(E-R)||a)),R=E)};for(c=0,f=o.length;c<f;++c)E=l.getPixelForValue(o[c]),O();for(R=void 0,c=0,f=l.ticks.length;c<f;++c)E=l.getPixelForTick(c),O();return a}function kl(g,l,o,a){return bt(g)?function(g,l,o,a){const c=o.parse(g[0],a),f=o.parse(g[1],a),E=Math.min(c,f),R=Math.max(c,f);let O=E,F=R;Math.abs(E)>Math.abs(R)&&(O=R,F=E),l[o.axis]=F,l._custom={barStart:O,barEnd:F,start:c,end:f,min:E,max:R}}(g,l,o,a):l[o.axis]=o.parse(g,a),l}function nc(g,l,o,a){const c=g.iScale,f=g.vScale,E=c.getLabels(),R=c===f,O=[];let F,J,dt,Ft;for(F=o,J=o+a;F<J;++F)Ft=l[F],dt={},dt[c.axis]=R||c.parse(E[F],F),O.push(kl(Ft,dt,f,F));return O}function Wl(g){return g&&void 0!==g.barStart&&void 0!==g.barEnd}function ft(g,l,o,a){let c=l.borderSkipped;const f={};if(!c)return void(g.borderSkipped=f);const{start:E,end:R,reverse:O,top:F,bottom:J}=function(g){let l,o,a,c,f;return g.horizontal?(l=g.base>g.x,o="left",a="right"):(l=g.base<g.y,o="bottom",a="top"),l?(c="end",f="start"):(c="start",f="end"),{start:o,end:a,reverse:l,top:c,bottom:f}}(g);"middle"===c&&o&&(g.enableBorderRadius=!0,(o._top||0)===a?c=F:(o._bottom||0)===a?c=J:(f[nt(J,E,R,O)]=!0,c=F)),f[nt(c,E,R,O)]=!0,g.borderSkipped=f}function nt(g,l,o,a){return a?(g=function(g,l,o){return g===l?o:g===o?l:g}(g,l,o),g=Ot(g,o,l)):g=Ot(g,l,o),g}function Ot(g,l,o){return"start"===g?l:"end"===g?o:g}function zt(g,{inflateAmount:l},o){g.inflateAmount="auto"===l?1===o?.33:0:l}va.prototype.datasetElementType=null,va.prototype.dataElementType=null;let _e=(()=>{class g extends va{parsePrimitiveData(o,a,c,f){return nc(o,a,c,f)}parseArrayData(o,a,c,f){return nc(o,a,c,f)}parseObjectData(o,a,c,f){const{iScale:E,vScale:R}=o,{xAxisKey:O="x",yAxisKey:F="y"}=this._parsing,J="x"===E.axis?O:F,dt="x"===R.axis?O:F,Ft=[];let qt,Ee,Ae,We;for(qt=c,Ee=c+f;qt<Ee;++qt)We=a[qt],Ae={},Ae[E.axis]=E.parse(Le(We,J),qt),Ft.push(kl(Le(We,dt),Ae,R,qt));return Ft}updateRangeFromParsed(o,a,c,f){super.updateRangeFromParsed(o,a,c,f);const E=c._custom;E&&a===this._cachedMeta.vScale&&(o.min=Math.min(o.min,E.min),o.max=Math.max(o.max,E.max))}getMaxOverflow(){return 0}getLabelAndValue(o){const a=this._cachedMeta,{iScale:c,vScale:f}=a,E=this.getParsed(o),R=E._custom,O=Wl(R)?"["+R.start+", "+R.end+"]":""+f.getLabelForValue(E[f.axis]);return{label:""+c.getLabelForValue(E[c.axis]),value:O}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(o){const a=this._cachedMeta;this.updateElements(a.data,0,a.data.length,o)}updateElements(o,a,c,f){const E="reset"===f,{index:R,_cachedMeta:{vScale:O}}=this,F=O.getBasePixel(),J=O.isHorizontal(),dt=this._getRuler(),Ft=this.resolveDataElementOptions(a,f),qt=this.getSharedOptions(Ft),Ee=this.includeOptions(f,qt);this.updateSharedOptions(qt,f,Ft);for(let Ae=a;Ae<a+c;Ae++){const We=this.getParsed(Ae),ze=E||Ct(We[O.axis])?{base:F,head:F}:this._calculateBarValuePixels(Ae),Si=this._calculateBarIndexPixels(Ae,dt),an=(We._stacks||{})[O.axis],Gi={horizontal:J,base:ze.base,enableBorderRadius:!an||Wl(We._custom)||R===an._top||R===an._bottom,x:J?ze.head:Si.center,y:J?Si.center:ze.head,height:J?Si.size:Math.abs(ze.size),width:J?Math.abs(ze.size):Si.size};Ee&&(Gi.options=qt||this.resolveDataElementOptions(Ae,o[Ae].active?"active":f));const Ki=Gi.options||o[Ae].options;ft(Gi,Ki,an,R),zt(Gi,Ki,dt.ratio),this.updateElement(o[Ae],Ae,Gi,f)}}_getStacks(o,a){const f=this._cachedMeta.iScale,E=f.getMatchingVisibleMetas(this._type),R=f.options.stacked,O=E.length,F=[];let J,dt;for(J=0;J<O;++J)if(dt=E[J],dt.controller.options.grouped){if(void 0!==a){const Ft=dt.controller.getParsed(a)[dt.controller._cachedMeta.vScale.axis];if(Ct(Ft)||isNaN(Ft))continue}if((!1===R||-1===F.indexOf(dt.stack)||void 0===R&&void 0===dt.stack)&&F.push(dt.stack),dt.index===o)break}return F.length||F.push(void 0),F}_getStackCount(o){return this._getStacks(void 0,o).length}_getStackIndex(o,a,c){const f=this._getStacks(o,c),E=void 0!==a?f.indexOf(a):-1;return-1===E?f.length-1:E}_getRuler(){const o=this.options,a=this._cachedMeta,c=a.iScale,f=[];let E,R;for(E=0,R=a.data.length;E<R;++E)f.push(c.getPixelForValue(this.getParsed(E)[c.axis],E));const O=o.barThickness;return{min:O||Us(a),pixels:f,start:c._startPixel,end:c._endPixel,stackCount:this._getStackCount(),scale:c,grouped:o.grouped,ratio:O?1:o.categoryPercentage*o.barPercentage}}_calculateBarValuePixels(o){const{_cachedMeta:{vScale:a,_stacked:c},options:{base:f,minBarLength:E}}=this,R=f||0,O=this.getParsed(o),F=O._custom,J=Wl(F);let Ee,Ae,dt=O[a.axis],Ft=0,qt=c?this.applyStack(a,O,c):dt;qt!==dt&&(Ft=qt-dt,qt=dt),J&&(dt=F.barStart,qt=F.barEnd-F.barStart,0!==dt&&me(dt)!==me(F.barEnd)&&(Ft=0),Ft+=dt);const We=Ct(f)||J?Ft:f;let ze=a.getPixelForValue(We);if(Ee=this.chart.getDataVisibility(o)?a.getPixelForValue(Ft+qt):ze,Ae=Ee-ze,Math.abs(Ae)<E&&(Ae=function(g,l,o){return 0!==g?me(g):(l.isHorizontal()?1:-1)*(l.min>=o?1:-1)}(Ae,a,R)*E,dt===R&&(ze-=Ae/2),Ee=ze+Ae),ze===a.getPixelForValue(R)){const Si=me(Ae)*a.getLineWidthForValue(R)/2;ze+=Si,Ae-=Si}return{size:Ae,base:ze,head:Ee,center:Ee+Ae/2}}_calculateBarIndexPixels(o,a){const c=a.scale,f=this.options,E=f.skipNull,R=Bt(f.maxBarThickness,1/0);let O,F;if(a.grouped){const J=E?this._getStackCount(o):a.stackCount,dt="flex"===f.barThickness?function(g,l,o,a){const c=l.pixels,f=c[g];let E=g>0?c[g-1]:null,R=g<c.length-1?c[g+1]:null;const O=o.categoryPercentage;null===E&&(E=f-(null===R?l.end-l.start:R-f)),null===R&&(R=f+f-E);const F=f-(f-Math.min(E,R))/2*O;return{chunk:Math.abs(R-E)/2*O/a,ratio:o.barPercentage,start:F}}(o,a,f,J):function(g,l,o,a){const c=o.barThickness;let f,E;return Ct(c)?(f=l.min*o.categoryPercentage,E=o.barPercentage):(f=c*a,E=1),{chunk:f/a,ratio:E,start:l.pixels[g]-f/2}}(o,a,f,J),Ft=this._getStackIndex(this.index,this._cachedMeta.stack,E?o:void 0);O=dt.start+dt.chunk*Ft+dt.chunk/2,F=Math.min(R,dt.chunk*dt.ratio)}else O=c.getPixelForValue(this.getParsed(o)[c.axis],o),F=Math.min(R,a.min*a.ratio);return{base:O-F/2,head:O+F/2,center:O,size:F}}draw(){const o=this._cachedMeta,a=o.vScale,c=o.data,f=c.length;let E=0;for(;E<f;++E)null!==this.getParsed(E)[a.axis]&&c[E].draw(this._ctx)}}return g.id="bar",g.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},g.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}},g})(),Ge=(()=>{class g extends va{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(o,a,c,f){const E=super.parsePrimitiveData(o,a,c,f);for(let R=0;R<E.length;R++)E[R]._custom=this.resolveDataElementOptions(R+c).radius;return E}parseArrayData(o,a,c,f){const E=super.parseArrayData(o,a,c,f);for(let R=0;R<E.length;R++)E[R]._custom=Bt(a[c+R][2],this.resolveDataElementOptions(R+c).radius);return E}parseObjectData(o,a,c,f){const E=super.parseObjectData(o,a,c,f);for(let R=0;R<E.length;R++){const O=a[c+R];E[R]._custom=Bt(O&&O.r&&+O.r,this.resolveDataElementOptions(R+c).radius)}return E}getMaxOverflow(){const o=this._cachedMeta.data;let a=0;for(let c=o.length-1;c>=0;--c)a=Math.max(a,o[c].size(this.resolveDataElementOptions(c))/2);return a>0&&a}getLabelAndValue(o){const a=this._cachedMeta,{xScale:c,yScale:f}=a,E=this.getParsed(o),R=c.getLabelForValue(E.x),O=f.getLabelForValue(E.y),F=E._custom;return{label:a.label,value:"("+R+", "+O+(F?", "+F:"")+")"}}update(o){const a=this._cachedMeta.data;this.updateElements(a,0,a.length,o)}updateElements(o,a,c,f){const E="reset"===f,{iScale:R,vScale:O}=this._cachedMeta,F=this.resolveDataElementOptions(a,f),J=this.getSharedOptions(F),dt=this.includeOptions(f,J),Ft=R.axis,qt=O.axis;for(let Ee=a;Ee<a+c;Ee++){const Ae=o[Ee],We=!E&&this.getParsed(Ee),ze={},Si=ze[Ft]=E?R.getPixelForDecimal(.5):R.getPixelForValue(We[Ft]),an=ze[qt]=E?O.getBasePixel():O.getPixelForValue(We[qt]);ze.skip=isNaN(Si)||isNaN(an),dt&&(ze.options=this.resolveDataElementOptions(Ee,Ae.active?"active":f),E&&(ze.options.radius=0)),this.updateElement(Ae,Ee,ze,f)}this.updateSharedOptions(J,f,F)}resolveDataElementOptions(o,a){const c=this.getParsed(o);let f=super.resolveDataElementOptions(o,a);f.$shared&&(f=Object.assign({},f,{$shared:!1}));const E=f.radius;return"active"!==a&&(f.radius=0),f.radius+=Bt(c&&c._custom,E),f}}return g.id="bubble",g.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},g.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:()=>""}}}},g})(),ki=(()=>{class g extends va{constructor(o,a){super(o,a),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(o,a){const c=this.getDataset().data,f=this._cachedMeta;if(!1===this._parsing)f._parsed=c;else{let R,O,E=F=>+c[F];if(st(c[o])){const{key:F="value"}=this._parsing;E=J=>+Le(c[J],F)}for(R=o,O=o+a;R<O;++R)f._parsed[R]=E(R)}}_getRotation(){return wi(this.options.rotation-90)}_getCircumference(){return wi(this.options.circumference)}_getRotationExtents(){let o=jt,a=-jt;for(let c=0;c<this.chart.data.datasets.length;++c)if(this.chart.isDatasetVisible(c)){const f=this.chart.getDatasetMeta(c).controller,E=f._getRotation(),R=f._getCircumference();o=Math.min(o,E),a=Math.max(a,E+R)}return{rotation:o,circumference:a-o}}update(o){const a=this.chart,{chartArea:c}=a,f=this._cachedMeta,E=f.data,R=this.getMaxBorderWidth()+this.getMaxOffset(E)+this.options.spacing,O=Math.max((Math.min(c.width,c.height)-R)/2,0),F=Math.min(((g,l)=>"string"==typeof g&&g.endsWith("%")?parseFloat(g)/100:g/l)(this.options.cutout,O),1),J=this._getRingWeight(this.index),{circumference:dt,rotation:Ft}=this._getRotationExtents(),{ratioX:qt,ratioY:Ee,offsetX:Ae,offsetY:We}=function(g,l,o){let a=1,c=1,f=0,E=0;if(l<jt){const R=g,O=R+l,F=Math.cos(R),J=Math.sin(R),dt=Math.cos(O),Ft=Math.sin(O),qt=(an,Gi,Ki)=>Ci(an,R,O,!0)?1:Math.max(Gi,Gi*o,Ki,Ki*o),Ee=(an,Gi,Ki)=>Ci(an,R,O,!0)?-1:Math.min(Gi,Gi*o,Ki,Ki*o),Ae=qt(0,F,dt),We=qt(te,J,Ft),ze=Ee(St,F,dt),Si=Ee(St+te,J,Ft);a=(Ae-ze)/2,c=(We-Si)/2,f=-(Ae+ze)/2,E=-(We+Si)/2}return{ratioX:a,ratioY:c,offsetX:f,offsetY:E}}(Ft,dt,F),an=Math.max(Math.min((c.width-R)/qt,(c.height-R)/Ee)/2,0),Gi=Et(this.options.radius,an),pn=(Gi-Math.max(Gi*F,0))/this._getVisibleDatasetWeightTotal();this.offsetX=Ae*Gi,this.offsetY=We*Gi,f.total=this.calculateTotal(),this.outerRadius=Gi-pn*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-pn*J,0),this.updateElements(E,0,E.length,o)}_circumference(o,a){const c=this.options,f=this._cachedMeta,E=this._getCircumference();return a&&c.animation.animateRotate||!this.chart.getDataVisibility(o)||null===f._parsed[o]||f.data[o].hidden?0:this.calculateCircumference(f._parsed[o]*E/jt)}updateElements(o,a,c,f){const E="reset"===f,R=this.chart,O=R.chartArea,dt=(O.left+O.right)/2,Ft=(O.top+O.bottom)/2,qt=E&&R.options.animation.animateScale,Ee=qt?0:this.innerRadius,Ae=qt?0:this.outerRadius,We=this.resolveDataElementOptions(a,f),ze=this.getSharedOptions(We),Si=this.includeOptions(f,ze);let Gi,an=this._getRotation();for(Gi=0;Gi<a;++Gi)an+=this._circumference(Gi,E);for(Gi=a;Gi<a+c;++Gi){const Ki=this._circumference(Gi,E),pn=o[Gi],mn={x:dt+this.offsetX,y:Ft+this.offsetY,startAngle:an,endAngle:an+Ki,circumference:Ki,outerRadius:Ae,innerRadius:Ee};Si&&(mn.options=ze||this.resolveDataElementOptions(Gi,pn.active?"active":f)),an+=Ki,this.updateElement(pn,Gi,mn,f)}this.updateSharedOptions(ze,f,We)}calculateTotal(){const o=this._cachedMeta,a=o.data;let f,c=0;for(f=0;f<a.length;f++){const E=o._parsed[f];null!==E&&!isNaN(E)&&this.chart.getDataVisibility(f)&&!a[f].hidden&&(c+=Math.abs(E))}return c}calculateCircumference(o){const a=this._cachedMeta.total;return a>0&&!isNaN(o)?jt*(Math.abs(o)/a):0}getLabelAndValue(o){const c=this.chart,f=c.data.labels||[],E=er(this._cachedMeta._parsed[o],c.options.locale);return{label:f[o]||"",value:E}}getMaxBorderWidth(o){let a=0;const c=this.chart;let f,E,R,O,F;if(!o)for(f=0,E=c.data.datasets.length;f<E;++f)if(c.isDatasetVisible(f)){R=c.getDatasetMeta(f),o=R.data,O=R.controller;break}if(!o)return 0;for(f=0,E=o.length;f<E;++f)F=O.resolveDataElementOptions(f),"inner"!==F.borderAlign&&(a=Math.max(a,F.borderWidth||0,F.hoverBorderWidth||0));return a}getMaxOffset(o){let a=0;for(let c=0,f=o.length;c<f;++c){const E=this.resolveDataElementOptions(c);a=Math.max(a,E.offset||0,E.hoverOffset||0)}return a}_getRingWeightOffset(o){let a=0;for(let c=0;c<o;++c)this.chart.isDatasetVisible(c)&&(a+=this._getRingWeight(c));return a}_getRingWeight(o){return Math.max(Bt(this.chart.data.datasets[o].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return g.id="doughnut",g.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},g.descriptors={_scriptable:l=>"spacing"!==l,_indexable:l=>"spacing"!==l},g.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(l){const o=l.data;if(o.labels.length&&o.datasets.length){const{labels:{pointStyle:a}}=l.legend.options;return o.labels.map((c,f)=>{const R=l.getDatasetMeta(0).controller.getStyle(f);return{text:c,fillStyle:R.backgroundColor,strokeStyle:R.borderColor,lineWidth:R.borderWidth,pointStyle:a,hidden:!l.getDataVisibility(f),index:f}})}return[]}},onClick(l,o,a){a.chart.toggleDataVisibility(o.index),a.chart.update()}},tooltip:{callbacks:{title:()=>"",label(l){let o=l.label;const a=": "+l.formattedValue;return bt(o)?(o=o.slice(),o[0]+=a):o+=a,o}}}}},g})(),_n=(()=>{class g extends va{initialize(){this.enableOptionSharing=!0,super.initialize()}update(o){const a=this._cachedMeta,{dataset:c,data:f=[],_dataset:E}=a,R=this.chart._animationsDisabled;let{start:O,count:F}=function(g,l,o){const a=l.length;let c=0,f=a;if(g._sorted){const{iScale:E,_parsed:R}=g,O=E.axis,{min:F,max:J,minDefined:dt,maxDefined:Ft}=E.getUserBounds();dt&&(c=je(Math.min(Bo(R,E.axis,F).lo,o?a:Bo(l,O,E.getPixelForValue(F)).lo),0,a-1)),f=Ft?je(Math.max(Bo(R,E.axis,J).hi+1,o?0:Bo(l,O,E.getPixelForValue(J)).hi+1),c,a)-c:a-c}return{start:c,count:f}}(a,f,R);this._drawStart=O,this._drawCount=F,function(g){const{xScale:l,yScale:o,_scaleRanges:a}=g,c={xmin:l.min,xmax:l.max,ymin:o.min,ymax:o.max};if(!a)return g._scaleRanges=c,!0;const f=a.xmin!==l.min||a.xmax!==l.max||a.ymin!==o.min||a.ymax!==o.max;return Object.assign(a,c),f}(a)&&(O=0,F=f.length),c._chart=this.chart,c._datasetIndex=this.index,c._decimated=!!E._decimated,c.points=f;const J=this.resolveDatasetElementOptions(o);this.options.showLine||(J.borderWidth=0),J.segment=this.options.segment,this.updateElement(c,void 0,{animated:!R,options:J},o),this.updateElements(f,O,F,o)}updateElements(o,a,c,f){const E="reset"===f,{iScale:R,vScale:O,_stacked:F,_dataset:J}=this._cachedMeta,dt=this.resolveDataElementOptions(a,f),Ft=this.getSharedOptions(dt),qt=this.includeOptions(f,Ft),Ee=R.axis,Ae=O.axis,{spanGaps:We,segment:ze}=this.options,Si=de(We)?We:Number.POSITIVE_INFINITY,an=this.chart._animationsDisabled||E||"none"===f;let Gi=a>0&&this.getParsed(a-1);for(let Ki=a;Ki<a+c;++Ki){const pn=o[Ki],mn=this.getParsed(Ki),wn=an?pn:{},Pn=Ct(mn[Ae]),bn=wn[Ee]=R.getPixelForValue(mn[Ee],Ki),Qi=wn[Ae]=E||Pn?O.getBasePixel():O.getPixelForValue(F?this.applyStack(O,mn,F):mn[Ae],Ki);wn.skip=isNaN(bn)||isNaN(Qi)||Pn,wn.stop=Ki>0&&mn[Ee]-Gi[Ee]>Si,ze&&(wn.parsed=mn,wn.raw=J.data[Ki]),qt&&(wn.options=Ft||this.resolveDataElementOptions(Ki,pn.active?"active":f)),an||this.updateElement(pn,Ki,wn,f),Gi=mn}this.updateSharedOptions(Ft,f,dt)}getMaxOverflow(){const o=this._cachedMeta,a=o.dataset,c=a.options&&a.options.borderWidth||0,f=o.data||[];if(!f.length)return c;const E=f[0].size(this.resolveDataElementOptions(0)),R=f[f.length-1].size(this.resolveDataElementOptions(f.length-1));return Math.max(c,E,R)/2}draw(){const o=this._cachedMeta;o.dataset.updateControlPoints(this.chart.chartArea,o.iScale.axis),super.draw()}}return g.id="line",g.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},g.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}},g})();var ha=Object.freeze({__proto__:null,BarController:_e,BubbleController:Ge,DoughnutController:ki,LineController:_n,PolarAreaController:(()=>{class g extends va{constructor(o,a){super(o,a),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(o){const c=this.chart,f=c.data.labels||[],E=er(this._cachedMeta._parsed[o].r,c.options.locale);return{label:f[o]||"",value:E}}update(o){const a=this._cachedMeta.data;this._updateRadius(),this.updateElements(a,0,a.length,o)}_updateRadius(){const o=this.chart,a=o.chartArea,c=o.options,f=Math.min(a.right-a.left,a.bottom-a.top),E=Math.max(f/2,0),O=(E-Math.max(c.cutoutPercentage?E/100*c.cutoutPercentage:1,0))/o.getVisibleDatasetCount();this.outerRadius=E-O*this.index,this.innerRadius=this.outerRadius-O}updateElements(o,a,c,f){const E="reset"===f,R=this.chart,O=this.getDataset(),J=R.options.animation,dt=this._cachedMeta.rScale,Ft=dt.xCenter,qt=dt.yCenter,Ee=dt.getIndexAngle(0)-.5*St;let We,Ae=Ee;const ze=360/this.countVisibleElements();for(We=0;We<a;++We)Ae+=this._computeAngle(We,f,ze);for(We=a;We<a+c;We++){const Si=o[We];let an=Ae,Gi=Ae+this._computeAngle(We,f,ze),Ki=R.getDataVisibility(We)?dt.getDistanceFromCenterForValue(O.data[We]):0;Ae=Gi,E&&(J.animateScale&&(Ki=0),J.animateRotate&&(an=Gi=Ee));const pn={x:Ft,y:qt,innerRadius:0,outerRadius:Ki,startAngle:an,endAngle:Gi,options:this.resolveDataElementOptions(We,Si.active?"active":f)};this.updateElement(Si,We,pn,f)}}countVisibleElements(){const o=this.getDataset();let c=0;return this._cachedMeta.data.forEach((f,E)=>{!isNaN(o.data[E])&&this.chart.getDataVisibility(E)&&c++}),c}_computeAngle(o,a,c){return this.chart.getDataVisibility(o)?wi(this.resolveDataElementOptions(o,a).angle||c):0}}return g.id="polarArea",g.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},g.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(l){const o=l.data;if(o.labels.length&&o.datasets.length){const{labels:{pointStyle:a}}=l.legend.options;return o.labels.map((c,f)=>{const R=l.getDatasetMeta(0).controller.getStyle(f);return{text:c,fillStyle:R.backgroundColor,strokeStyle:R.borderColor,lineWidth:R.borderWidth,pointStyle:a,hidden:!l.getDataVisibility(f),index:f}})}return[]}},onClick(l,o,a){a.chart.toggleDataVisibility(o.index),a.chart.update()}},tooltip:{callbacks:{title:()=>"",label:l=>l.chart.data.labels[l.dataIndex]+": "+l.formattedValue}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}},g})(),PieController:(()=>{class g extends ki{}return g.id="pie",g.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"},g})(),RadarController:(()=>{class g extends va{getLabelAndValue(o){const a=this._cachedMeta.vScale,c=this.getParsed(o);return{label:a.getLabels()[o],value:""+a.getLabelForValue(c[a.axis])}}update(o){const a=this._cachedMeta,c=a.dataset,f=a.data||[],E=a.iScale.getLabels();if(c.points=f,"resize"!==o){const R=this.resolveDatasetElementOptions(o);this.options.showLine||(R.borderWidth=0),this.updateElement(c,void 0,{_loop:!0,_fullLoop:E.length===f.length,options:R},o)}this.updateElements(f,0,f.length,o)}updateElements(o,a,c,f){const E=this.getDataset(),R=this._cachedMeta.rScale,O="reset"===f;for(let F=a;F<a+c;F++){const J=o[F],dt=this.resolveDataElementOptions(F,J.active?"active":f),Ft=R.getPointPositionForValue(F,E.data[F]),qt=O?R.xCenter:Ft.x,Ee=O?R.yCenter:Ft.y,Ae={x:qt,y:Ee,angle:Ft.angle,skip:isNaN(qt)||isNaN(Ee),options:dt};this.updateElement(J,F,Ae,f)}}}return g.id="radar",g.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},g.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}},g})(),ScatterController:(()=>{class g extends _n{}return g.id="scatter",g.defaults={showLine:!1,fill:!1},g.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:()=>"",label:l=>"("+l.label+", "+l.formattedValue+")"}}},scales:{x:{type:"linear"},y:{type:"linear"}}},g})()});function Go(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var Gs={_date:(()=>{class g{constructor(o){this.options=o||{}}formats(){return Go()}parse(o,a){return Go()}format(o,a){return Go()}add(o,a,c){return Go()}diff(o,a,c){return Go()}startOf(o,a,c){return Go()}endOf(o,a){return Go()}}return g.override=function(l){Object.assign(g.prototype,l)},g})()};function Da(g,l){return"native"in g?{x:g.x,y:g.y}:ee(g,l)}function rc(g,l,o,a){const{controller:c,data:f,_sorted:E}=g,R=c._cachedMeta.iScale;if(R&&l===R.axis&&"r"!==l&&E&&f.length){const O=R._reversePixels?Lo:Bo;if(!a)return O(f,l,o);if(c._sharedOptions){const F=f[0],J="function"==typeof F.getRange&&F.getRange(l);if(J){const dt=O(f,l,o-J),Ft=O(f,l,o+J);return{lo:dt.lo,hi:Ft.hi}}}}return{lo:0,hi:f.length-1}}function Ws(g,l,o,a,c){const f=g.getSortedVisibleDatasetMetas(),E=o[l];for(let R=0,O=f.length;R<O;++R){const{index:F,data:J}=f[R],{lo:dt,hi:Ft}=rc(f[R],l,E,c);for(let qt=dt;qt<=Ft;++qt){const Ee=J[qt];Ee.skip||a(Ee,F,qt)}}}function hs(g,l,o,a){const c=[];return jo(l,g.chartArea,g._minPadding)&&Ws(g,o,l,function(E,R,O){E.inRange(l.x,l.y,a)&&c.push({element:E,datasetIndex:R,index:O})},!0),c}function Xr(g,l,o,a,c){return jo(l,g.chartArea,g._minPadding)?"r"!==o||a?function(g,l,o,a,c){let f=[];const E=function(g){const l=-1!==g.indexOf("x"),o=-1!==g.indexOf("y");return function(a,c){const f=l?Math.abs(a.x-c.x):0,E=o?Math.abs(a.y-c.y):0;return Math.sqrt(Math.pow(f,2)+Math.pow(E,2))}}(o);let R=Number.POSITIVE_INFINITY;return Ws(g,o,l,function(F,J,dt){const Ft=F.inRange(l.x,l.y,c);if(a&&!Ft)return;const qt=F.getCenterPoint(c);if(!jo(qt,g.chartArea,g._minPadding)&&!Ft)return;const Ae=E(l,qt);Ae<R?(f=[{element:F,datasetIndex:J,index:dt}],R=Ae):Ae===R&&f.push({element:F,datasetIndex:J,index:dt})}),f}(g,l,o,a,c):function(g,l,o,a){let c=[];return Ws(g,o,l,function(E,R,O){const{startAngle:F,endAngle:J}=E.getProps(["startAngle","endAngle"],a),{angle:dt}=mi(E,{x:l.x,y:l.y});Ci(dt,F,J)&&c.push({element:E,datasetIndex:R,index:O})}),c}(g,l,o,c):[]}function sc(g,l,o,a){const c=Da(l,g),f=[],E=o.axis,R="x"===E?"inXRange":"inYRange";let O=!1;return function(g,l){const o=g.getSortedVisibleDatasetMetas();let a,c,f;for(let E=0,R=o.length;E<R;++E){({index:a,data:c}=o[E]);for(let O=0,F=c.length;O<F;++O)f=c[O],f.skip||l(f,a,O)}}(g,(F,J,dt)=>{F[R](c[E],a)&&f.push({element:F,datasetIndex:J,index:dt}),F.inRange(c.x,c.y,a)&&(O=!0)}),o.intersect&&!O?[]:f}var su={modes:{index(g,l,o,a){const c=Da(l,g),f=o.axis||"x",E=o.intersect?hs(g,c,f,a):Xr(g,c,f,!1,a),R=[];return E.length?(g.getSortedVisibleDatasetMetas().forEach(O=>{const F=E[0].index,J=O.data[F];J&&!J.skip&&R.push({element:J,datasetIndex:O.index,index:F})}),R):[]},dataset(g,l,o,a){const c=Da(l,g),f=o.axis||"xy";let E=o.intersect?hs(g,c,f,a):Xr(g,c,f,!1,a);if(E.length>0){const R=E[0].datasetIndex,O=g.getDatasetMeta(R).data;E=[];for(let F=0;F<O.length;++F)E.push({element:O[F],datasetIndex:R,index:F})}return E},point:(g,l,o,a)=>hs(g,Da(l,g),o.axis||"xy",a),nearest:(g,l,o,a)=>Xr(g,Da(l,g),o.axis||"xy",o.intersect,a),x:(g,l,o,a)=>sc(g,l,{axis:"x",intersect:o.intersect},a),y:(g,l,o,a)=>sc(g,l,{axis:"y",intersect:o.intersect},a)}};const No=["left","top","right","bottom"];function zc(g,l){return g.filter(o=>o.pos===l)}function Au(g,l){return g.filter(o=>-1===No.indexOf(o.pos)&&o.box.axis===l)}function ac(g,l){return g.sort((o,a)=>{const c=l?a:o,f=l?o:a;return c.weight===f.weight?c.index-f.index:c.weight-f.weight})}function zl(g,l,o,a){return Math.max(g[o],l[o])+Math.max(g[a],l[a])}function au(g,l){g.top=Math.max(g.top,l.top),g.left=Math.max(g.left,l.left),g.bottom=Math.max(g.bottom,l.bottom),g.right=Math.max(g.right,l.right)}function rs(g,l,o,a){const{pos:c,box:f}=o,E=g.maxPadding;if(!st(c)){o.size&&(g[c]-=o.size);const dt=a[o.stack]||{size:0,count:1};dt.size=Math.max(dt.size,o.horizontal?f.height:f.width),o.size=dt.size/dt.count,g[c]+=o.size}f.getPadding&&au(E,f.getPadding());const R=Math.max(0,l.outerWidth-zl(E,g,"left","right")),O=Math.max(0,l.outerHeight-zl(E,g,"top","bottom")),F=R!==g.w,J=O!==g.h;return g.w=R,g.h=O,o.horizontal?{same:F,other:J}:{same:J,other:F}}function ul(g,l){const o=l.maxPadding;return function(c){const f={left:0,top:0,right:0,bottom:0};return c.forEach(E=>{f[E]=Math.max(l[E],o[E])}),f}(g?["left","right"]:["top","bottom"])}function Ac(g,l,o,a){const c=[];let f,E,R,O,F,J;for(f=0,E=g.length,F=0;f<E;++f){R=g[f],O=R.box,O.update(R.width||l.w,R.height||l.h,ul(R.horizontal,l));const{same:dt,other:Ft}=rs(l,o,R,a);F|=dt&&c.length,J=J||Ft,O.fullSize||c.push(R)}return F&&Ac(c,l,o,a)||J}function Sl(g,l,o,a,c){g.top=o,g.left=l,g.right=l+a,g.bottom=o+c,g.width=a,g.height=c}function da(g,l,o,a){const c=o.padding;let{x:f,y:E}=l;for(const R of g){const O=R.box,F=a[R.stack]||{count:1,placed:0,weight:1},J=R.stackWeight/F.weight||1;if(R.horizontal){const dt=l.w*J,Ft=F.size||O.height;Gt(F.start)&&(E=F.start),O.fullSize?Sl(O,c.left,E,o.outerWidth-c.right-c.left,Ft):Sl(O,l.left+F.placed,E,dt,Ft),F.start=E,F.placed+=dt,E=O.bottom}else{const dt=l.h*J,Ft=F.size||O.width;Gt(F.start)&&(f=F.start),O.fullSize?Sl(O,f,c.top,Ft,o.outerHeight-c.bottom-c.top):Sl(O,f,l.top+F.placed,Ft,dt),F.start=f,F.placed+=dt,f=O.right}}l.x=f,l.y=E}lr.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var bo={addBox(g,l){g.boxes||(g.boxes=[]),l.fullSize=l.fullSize||!1,l.position=l.position||"top",l.weight=l.weight||0,l._layers=l._layers||function(){return[{z:0,draw(o){l.draw(o)}}]},g.boxes.push(l)},removeBox(g,l){const o=g.boxes?g.boxes.indexOf(l):-1;-1!==o&&g.boxes.splice(o,1)},configure(g,l,o){l.fullSize=o.fullSize,l.position=o.position,l.weight=o.weight},update(g,l,o,a){if(!g)return;const c=jr(g.options.layout.padding),f=Math.max(l-c.width,0),E=Math.max(o-c.height,0),R=function(g){const l=function(g){const l=[];let o,a,c,f,E,R;for(o=0,a=(g||[]).length;o<a;++o)c=g[o],({position:f,options:{stack:E,stackWeight:R=1}}=c),l.push({index:o,box:c,pos:f,horizontal:c.isHorizontal(),weight:c.weight,stack:E&&f+E,stackWeight:R});return l}(g),o=ac(l.filter(F=>F.box.fullSize),!0),a=ac(zc(l,"left"),!0),c=ac(zc(l,"right")),f=ac(zc(l,"top"),!0),E=ac(zc(l,"bottom")),R=Au(l,"x"),O=Au(l,"y");return{fullSize:o,leftAndTop:a.concat(f),rightAndBottom:c.concat(O).concat(E).concat(R),chartArea:zc(l,"chartArea"),vertical:a.concat(c).concat(O),horizontal:f.concat(E).concat(R)}}(g.boxes),O=R.vertical,F=R.horizontal;rt(g.boxes,Ae=>{"function"==typeof Ae.beforeLayout&&Ae.beforeLayout()});const J=O.reduce((Ae,We)=>We.box.options&&!1===We.box.options.display?Ae:Ae+1,0)||1,dt=Object.freeze({outerWidth:l,outerHeight:o,padding:c,availableWidth:f,availableHeight:E,vBoxMaxWidth:f/2/J,hBoxMaxHeight:E/2}),Ft=Object.assign({},c);au(Ft,jr(a));const qt=Object.assign({maxPadding:Ft,w:f,h:E,x:c.left,y:c.top},c),Ee=function(g,l){const o=function(g){const l={};for(const o of g){const{stack:a,pos:c,stackWeight:f}=o;if(!a||!No.includes(c))continue;const E=l[a]||(l[a]={count:0,placed:0,weight:0,size:0});E.count++,E.weight+=f}return l}(g),{vBoxMaxWidth:a,hBoxMaxHeight:c}=l;let f,E,R;for(f=0,E=g.length;f<E;++f){R=g[f];const{fullSize:O}=R.box,F=o[R.stack],J=F&&R.stackWeight/F.weight;R.horizontal?(R.width=J?J*a:O&&l.availableWidth,R.height=c):(R.width=a,R.height=J?J*c:O&&l.availableHeight)}return o}(O.concat(F),dt);Ac(R.fullSize,qt,dt,Ee),Ac(O,qt,dt,Ee),Ac(F,qt,dt,Ee)&&Ac(O,qt,dt,Ee),function(g){const l=g.maxPadding;function o(a){const c=Math.max(l[a]-g[a],0);return g[a]+=c,c}g.y+=o("top"),g.x+=o("left"),o("right"),o("bottom")}(qt),da(R.leftAndTop,qt,dt,Ee),qt.x+=qt.w,qt.y+=qt.h,da(R.rightAndBottom,qt,dt,Ee),g.chartArea={left:qt.left,top:qt.top,right:qt.left+qt.w,bottom:qt.top+qt.h,height:qt.h,width:qt.w},rt(R.chartArea,Ae=>{const We=Ae.box;Object.assign(We,g.chartArea),We.update(qt.w,qt.h,{left:0,top:0,right:0,bottom:0})})}};class ba{acquireContext(l,o){}releaseContext(l){return!1}addEventListener(l,o,a){}removeEventListener(l,o,a){}getDevicePixelRatio(){return 1}getMaximumSize(l,o,a,c){return o=Math.max(0,o||l.width),a=a||l.height,{width:o,height:Math.max(0,c?Math.floor(o/c):a)}}isAttached(l){return!0}updateConfig(l){}}class Wa extends ba{acquireContext(l){return l&&l.getContext&&l.getContext("2d")||null}updateConfig(l){l.options.animation=!1}}const jl="$chartjs",lu={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},ya=g=>null===g||""===g,Ia=!!Ui&&{passive:!0};function Ll(g,l,o){g.canvas.removeEventListener(l,o,Ia)}function Yl(g,l){for(const o of g)if(o===l||o.contains(l))return!0}function cc(g,l,o){const a=g.canvas,c=new MutationObserver(f=>{let E=!1;for(const R of f)E=E||Yl(R.addedNodes,a),E=E&&!Yl(R.removedNodes,a);E&&o()});return c.observe(document,{childList:!0,subtree:!0}),c}function Ch(g,l,o){const a=g.canvas,c=new MutationObserver(f=>{let E=!1;for(const R of f)E=E||Yl(R.removedNodes,a),E=E&&!Yl(R.addedNodes,a);E&&o()});return c.observe(document,{childList:!0,subtree:!0}),c}const Ma=new Map;let wl=0;function Oc(){const g=window.devicePixelRatio;g!==wl&&(wl=g,Ma.forEach((l,o)=>{o.currentDevicePixelRatio!==g&&l()}))}function Mr(g,l,o){const a=g.canvas,c=a&&$a(a);if(!c)return;const f=et((R,O)=>{const F=c.clientWidth;o(R,O),F<c.clientWidth&&o()},window),E=new ResizeObserver(R=>{const O=R[0],F=O.contentRect.width,J=O.contentRect.height;0===F&&0===J||f(F,J)});return E.observe(c),function(g,l){Ma.size||window.addEventListener("resize",Oc),Ma.set(g,l)}(g,f),E}function uc(g,l,o){o&&o.disconnect(),"resize"===l&&function(g){Ma.delete(g),Ma.size||window.removeEventListener("resize",Oc)}(g)}function Xl(g,l,o){const a=g.canvas,c=et(f=>{null!==g.ctx&&o(function(g,l){const o=lu[g.type]||g.type,{x:a,y:c}=ee(g,l);return{type:o,chart:l,native:g,x:void 0!==a?a:null,y:void 0!==c?c:null}}(f,g))},g,f=>{const E=f[0];return[E,E.offsetX,E.offsetY]});return function(g,l,o){g.addEventListener(l,o,Ia)}(a,l,c),c}class hc extends ba{acquireContext(l,o){const a=l&&l.getContext&&l.getContext("2d");return a&&a.canvas===l?(function(g,l){const o=g.style,a=g.getAttribute("height"),c=g.getAttribute("width");if(g[jl]={initial:{height:a,width:c,style:{display:o.display,height:o.height,width:o.width}}},o.display=o.display||"block",o.boxSizing=o.boxSizing||"border-box",ya(c)){const f=hn(g,"width");void 0!==f&&(g.width=f)}if(ya(a))if(""===g.style.height)g.height=g.width/(l||2);else{const f=hn(g,"height");void 0!==f&&(g.height=f)}}(l,o),a):null}releaseContext(l){const o=l.canvas;if(!o[jl])return!1;const a=o[jl].initial;["height","width"].forEach(f=>{const E=a[f];Ct(E)?o.removeAttribute(f):o.setAttribute(f,E)});const c=a.style||{};return Object.keys(c).forEach(f=>{o.style[f]=c[f]}),o.width=o.width,delete o[jl],!0}addEventListener(l,o,a){this.removeEventListener(l,o),(l.$proxies||(l.$proxies={}))[o]=({attach:cc,detach:Ch,resize:Mr}[o]||Xl)(l,o,a)}removeEventListener(l,o){const a=l.$proxies||(l.$proxies={}),c=a[o];c&&(({attach:uc,detach:uc,resize:uc}[o]||Ll)(l,o,c),a[o]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(l,o,a,c){return function(g,l,o,a){const c=Ps(g),f=G(c,"margin"),E=Rs(c.maxWidth,g,"clientWidth")||ri,R=Rs(c.maxHeight,g,"clientHeight")||ri,O=function(g,l,o){let a,c;if(void 0===l||void 0===o){const f=$a(g);if(f){const E=f.getBoundingClientRect(),R=Ps(f),O=G(R,"border","width"),F=G(R,"padding");l=E.width-F.width-O.width,o=E.height-F.height-O.height,a=Rs(R.maxWidth,f,"clientWidth"),c=Rs(R.maxHeight,f,"clientHeight")}else l=g.clientWidth,o=g.clientHeight}return{width:l,height:o,maxWidth:a||ri,maxHeight:c||ri}}(g,l,o);let{width:F,height:J}=O;if("content-box"===c.boxSizing){const dt=G(c,"border","width"),Ft=G(c,"padding");F-=Ft.width+dt.width,J-=Ft.height+dt.height}return F=Math.max(0,F-f.width),J=Math.max(0,a?Math.floor(F/a):J-f.height),F=Xe(Math.min(F,E,O.maxWidth)),J=Xe(Math.min(J,R,O.maxHeight)),F&&!J&&(J=Xe(F/2)),{width:F,height:J}}(l,o,a,c)}isAttached(l){const o=$a(l);return!(!o||!o.isConnected)}}class ea{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(l){const{x:o,y:a}=this.getProps(["x","y"],l);return{x:o,y:a}}hasValue(){return de(this.x)&&de(this.y)}getProps(l,o){const a=this.$animations;if(!o||!a)return this;const c={};return l.forEach(f=>{c[f]=a[f]&&a[f].active()?a[f]._to:this[f]}),c}}ea.defaults={},ea.defaultRoutes=void 0;const Yc={values:g=>bt(g)?g:""+g,numeric(g,l,o){if(0===g)return"0";const a=this.chart.options.locale;let c,f=g;if(o.length>1){const F=Math.max(Math.abs(o[0].value),Math.abs(o[o.length-1].value));(F<1e-4||F>1e15)&&(c="scientific"),f=function(g,l){let o=l.length>3?l[2].value-l[1].value:l[1].value-l[0].value;return Math.abs(o)>=1&&g!==Math.floor(g)&&(o=g-Math.floor(g)),o}(g,o)}const E=re(Math.abs(f)),R=Math.max(Math.min(-1*Math.floor(E),20),0),O={notation:c,minimumFractionDigits:R,maximumFractionDigits:R};return Object.assign(O,this.options.ticks.format),er(g,a,O)},logarithmic(g,l,o){if(0===g)return"0";const a=g/Math.pow(10,Math.floor(re(g)));return 1===a||2===a||5===a?Yc.numeric.call(this,g,l,o):""}};var Xc={formatters:Yc};function Kl(g,l,o,a,c){const f=Bt(a,0),E=Math.min(Bt(c,g.length),g.length);let O,F,J,R=0;for(o=Math.ceil(o),c&&(O=c-a,o=O/Math.floor(O/o)),J=f;J<0;)R++,J=Math.round(f+R*o);for(F=Math.max(f,0);F<E;F++)F===J&&(l.push(g[F]),R++,J=Math.round(f+R*o))}lr.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(g,l)=>l.lineWidth,tickColor:(g,l)=>l.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Xc.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),lr.route("scale.ticks","color","","color"),lr.route("scale.grid","color","","borderColor"),lr.route("scale.grid","borderColor","","borderColor"),lr.route("scale.title","color","","color"),lr.describe("scale",{_fallback:!1,_scriptable:g=>!g.startsWith("before")&&!g.startsWith("after")&&"callback"!==g&&"parser"!==g,_indexable:g=>"borderDash"!==g&&"tickBorderDash"!==g}),lr.describe("scales",{_fallback:"scale"}),lr.describe("scale.ticks",{_scriptable:g=>"backdropPadding"!==g&&"callback"!==g,_indexable:g=>"backdropPadding"!==g});const Dl=(g,l,o)=>"top"===l||"left"===l?g[l]+o:g[l]-o;function Il(g,l){const o=[],a=g.length/l,c=g.length;let f=0;for(;f<c;f+=a)o.push(g[Math.floor(f)]);return o}function Jl(g,l,o){const a=g.ticks.length,c=Math.min(l,a-1),f=g._startPixel,E=g._endPixel,R=1e-6;let F,O=g.getPixelForTick(c);if(!(o&&(F=1===a?Math.max(O-f,E-O):0===l?(g.getPixelForTick(1)-O)/2:(O-g.getPixelForTick(c-1))/2,O+=c<l?F:-F,O<f-R||O>E+R)))return O}function Kc(g){return g.drawTicks?g.tickLength:0}function Jc(g,l){if(!g.display)return 0;const o=ho(g.font,l),a=jr(g.padding);return(bt(g.text)?g.text.length:1)*o.lineHeight+a.height}function $l(g,l,o){let a=Pt(g);return(o&&"right"!==l||!o&&"right"===l)&&(a=(g=>"left"===g?"right":"right"===g?"left":g)(a)),a}class pa extends ea{constructor(l){super(),this.id=l.id,this.type=l.type,this.options=void 0,this.ctx=l.ctx,this.chart=l.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(l){this.options=l.setContext(this.getContext()),this.axis=l.axis,this._userMin=this.parse(l.min),this._userMax=this.parse(l.max),this._suggestedMin=this.parse(l.suggestedMin),this._suggestedMax=this.parse(l.suggestedMax)}parse(l,o){return l}getUserBounds(){let{_userMin:l,_userMax:o,_suggestedMin:a,_suggestedMax:c}=this;return l=lt(l,Number.POSITIVE_INFINITY),o=lt(o,Number.NEGATIVE_INFINITY),a=lt(a,Number.POSITIVE_INFINITY),c=lt(c,Number.NEGATIVE_INFINITY),{min:lt(l,a),max:lt(o,c),minDefined:gt(l),maxDefined:gt(o)}}getMinMax(l){let E,{min:o,max:a,minDefined:c,maxDefined:f}=this.getUserBounds();if(c&&f)return{min:o,max:a};const R=this.getMatchingVisibleMetas();for(let O=0,F=R.length;O<F;++O)E=R[O].controller.getMinMax(this,l),c||(o=Math.min(o,E.min)),f||(a=Math.max(a,E.max));return o=f&&o>a?a:o,a=c&&o>a?o:a,{min:lt(o,lt(a,o)),max:lt(a,lt(o,a))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const l=this.chart.data;return this.options.labels||(this.isHorizontal()?l.xLabels:l.yLabels)||l.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ut(this.options.beforeUpdate,[this])}update(l,o,a){const{beginAtZero:c,grace:f,ticks:E}=this.options,R=E.sampleSize;this.beforeUpdate(),this.maxWidth=l,this.maxHeight=o,this._margins=a=Object.assign({left:0,right:0,top:0,bottom:0},a),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+a.left+a.right:this.height+a.top+a.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(g,l,o){const{min:a,max:c}=g,f=Et(l,(c-a)/2),E=(R,O)=>o&&0===R?0:R+O;return{min:E(a,-Math.abs(f)),max:E(c,f)}}(this,f,c),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const O=R<this.ticks.length;this._convertTicksToLabels(O?Il(this.ticks,R):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),E.display&&(E.autoSkip||"auto"===E.source)&&(this.ticks=function(g,l){const o=g.options.ticks,a=o.maxTicksLimit||function(g){const l=g.options.offset,o=g._tickSize();return Math.floor(Math.min(g._length/o+(l?0:1),g._maxLength/o))}(g),c=o.major.enabled?function(g){const l=[];let o,a;for(o=0,a=g.length;o<a;o++)g[o].major&&l.push(o);return l}(l):[],f=c.length,E=c[0],R=c[f-1],O=[];if(f>a)return function(g,l,o,a){let E,c=0,f=o[0];for(a=Math.ceil(a),E=0;E<g.length;E++)E===f&&(l.push(g[E]),c++,f=o[c*a])}(l,O,c,f/a),O;const F=function(g,l,o){const a=function(g){const l=g.length;let o,a;if(l<2)return!1;for(a=g[0],o=1;o<l;++o)if(g[o]-g[o-1]!==a)return!1;return a}(g),c=l.length/o;if(!a)return Math.max(c,1);const f=function(g){const l=[],o=Math.sqrt(g);let a;for(a=1;a<o;a++)g%a==0&&(l.push(a),l.push(g/a));return o===(0|o)&&l.push(o),l.sort((c,f)=>c-f).pop(),l}(a);for(let E=0,R=f.length-1;E<R;E++){const O=f[E];if(O>c)return O}return Math.max(c,1)}(c,l,a);if(f>0){let J,dt;const Ft=f>1?Math.round((R-E)/(f-1)):null;for(Kl(l,O,F,Ct(Ft)?0:E-Ft,E),J=0,dt=f-1;J<dt;J++)Kl(l,O,F,c[J],c[J+1]);return Kl(l,O,F,R,Ct(Ft)?l.length:R+Ft),O}return Kl(l,O,F),O}(this,this.ticks),this._labelSizes=null),O&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let o,a,l=this.options.reverse;this.isHorizontal()?(o=this.left,a=this.right):(o=this.top,a=this.bottom,l=!l),this._startPixel=o,this._endPixel=a,this._reversePixels=l,this._length=a-o,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ut(this.options.afterUpdate,[this])}beforeSetDimensions(){ut(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ut(this.options.afterSetDimensions,[this])}_callHooks(l){this.chart.notifyPlugins(l,this.getContext()),ut(this.options[l],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ut(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(l){const o=this.options.ticks;let a,c,f;for(a=0,c=l.length;a<c;a++)f=l[a],f.label=ut(o.callback,[f.value,a,l],this)}afterTickToLabelConversion(){ut(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ut(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const l=this.options,o=l.ticks,a=this.ticks.length,c=o.minRotation||0,f=o.maxRotation;let R,O,F,E=c;if(!this._isVisible()||!o.display||c>=f||a<=1||!this.isHorizontal())return void(this.labelRotation=c);const J=this._getLabelSizes(),dt=J.widest.width,Ft=J.highest.height,qt=je(this.chart.width-dt,0,this.maxWidth);R=l.offset?this.maxWidth/a:qt/(a-1),dt+6>R&&(R=qt/(a-(l.offset?.5:1)),O=this.maxHeight-Kc(l.grid)-o.padding-Jc(l.title,this.chart.options.font),F=Math.sqrt(dt*dt+Ft*Ft),E=yi(Math.min(Math.asin(je((J.highest.height+6)/R,-1,1)),Math.asin(je(O/F,-1,1))-Math.asin(je(Ft/F,-1,1)))),E=Math.max(c,Math.min(f,E))),this.labelRotation=E}afterCalculateLabelRotation(){ut(this.options.afterCalculateLabelRotation,[this])}beforeFit(){ut(this.options.beforeFit,[this])}fit(){const l={width:0,height:0},{chart:o,options:{ticks:a,title:c,grid:f}}=this,E=this._isVisible(),R=this.isHorizontal();if(E){const O=Jc(c,o.options.font);if(R?(l.width=this.maxWidth,l.height=Kc(f)+O):(l.height=this.maxHeight,l.width=Kc(f)+O),a.display&&this.ticks.length){const{first:F,last:J,widest:dt,highest:Ft}=this._getLabelSizes(),qt=2*a.padding,Ee=wi(this.labelRotation),Ae=Math.cos(Ee),We=Math.sin(Ee);R?l.height=Math.min(this.maxHeight,l.height+(a.mirror?0:We*dt.width+Ae*Ft.height)+qt):l.width=Math.min(this.maxWidth,l.width+(a.mirror?0:Ae*dt.width+We*Ft.height)+qt),this._calculatePadding(F,J,We,Ae)}}this._handleMargins(),R?(this.width=this._length=o.width-this._margins.left-this._margins.right,this.height=l.height):(this.width=l.width,this.height=this._length=o.height-this._margins.top-this._margins.bottom)}_calculatePadding(l,o,a,c){const{ticks:{align:f,padding:E},position:R}=this.options,O=0!==this.labelRotation,F="top"!==R&&"x"===this.axis;if(this.isHorizontal()){const J=this.getPixelForTick(0)-this.left,dt=this.right-this.getPixelForTick(this.ticks.length-1);let Ft=0,qt=0;O?F?(Ft=c*l.width,qt=a*o.height):(Ft=a*l.height,qt=c*o.width):"start"===f?qt=o.width:"end"===f?Ft=l.width:(Ft=l.width/2,qt=o.width/2),this.paddingLeft=Math.max((Ft-J+E)*this.width/(this.width-J),0),this.paddingRight=Math.max((qt-dt+E)*this.width/(this.width-dt),0)}else{let J=o.height/2,dt=l.height/2;"start"===f?(J=0,dt=l.height):"end"===f&&(J=o.height,dt=0),this.paddingTop=J+E,this.paddingBottom=dt+E}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ut(this.options.afterFit,[this])}isHorizontal(){const{axis:l,position:o}=this.options;return"top"===o||"bottom"===o||"x"===l}isFullSize(){return this.options.fullSize}_convertTicksToLabels(l){let o,a;for(this.beforeTickToLabelConversion(),this.generateTickLabels(l),o=0,a=l.length;o<a;o++)Ct(l[o].label)&&(l.splice(o,1),a--,o--);this.afterTickToLabelConversion()}_getLabelSizes(){let l=this._labelSizes;if(!l){const o=this.options.ticks.sampleSize;let a=this.ticks;o<a.length&&(a=Il(a,o)),this._labelSizes=l=this._computeLabelSizes(a,a.length)}return l}_computeLabelSizes(l,o){const{ctx:a,_longestTextCache:c}=this,f=[],E=[];let F,J,dt,Ft,qt,Ee,Ae,We,ze,Si,an,R=0,O=0;for(F=0;F<o;++F){if(Ft=l[F].label,qt=this._resolveTickFontOptions(F),a.font=Ee=qt.string,Ae=c[Ee]=c[Ee]||{data:{},gc:[]},We=qt.lineHeight,ze=Si=0,Ct(Ft)||bt(Ft)){if(bt(Ft))for(J=0,dt=Ft.length;J<dt;++J)an=Ft[J],!Ct(an)&&!bt(an)&&(ze=eo(a,Ae.data,Ae.gc,ze,an),Si+=We)}else ze=eo(a,Ae.data,Ae.gc,ze,Ft),Si=We;f.push(ze),E.push(Si),R=Math.max(ze,R),O=Math.max(Si,O)}!function(g,l){rt(g,o=>{const a=o.gc,c=a.length/2;let f;if(c>l){for(f=0;f<c;++f)delete o.data[a[f]];a.splice(0,c)}})}(c,o);const Gi=f.indexOf(R),Ki=E.indexOf(O),pn=mn=>({width:f[mn]||0,height:E[mn]||0});return{first:pn(0),last:pn(o-1),widest:pn(Gi),highest:pn(Ki),widths:f,heights:E}}getLabelForValue(l){return l}getPixelForValue(l,o){return NaN}getValueForPixel(l){}getPixelForTick(l){const o=this.ticks;return l<0||l>o.length-1?null:this.getPixelForValue(o[l].value)}getPixelForDecimal(l){this._reversePixels&&(l=1-l);const o=this._startPixel+l*this._length;return je(this._alignToPixels?Ls(this.chart,o,0):o,-32768,32767)}getDecimalForPixel(l){const o=(l-this._startPixel)/this._length;return this._reversePixels?1-o:o}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:l,max:o}=this;return l<0&&o<0?o:l>0&&o>0?l:0}getContext(l){const o=this.ticks||[];if(l>=0&&l<o.length){const a=o[l];return a.$context||(a.$context=function(g,l,o){return Yo(g,{tick:o,index:l,type:"tick"})}(this.getContext(),l,a))}return this.$context||(this.$context=function(g,l){return Yo(g,{scale:l,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const l=this.options.ticks,o=wi(this.labelRotation),a=Math.abs(Math.cos(o)),c=Math.abs(Math.sin(o)),f=this._getLabelSizes(),E=l.autoSkipPadding||0,R=f?f.widest.width+E:0,O=f?f.highest.height+E:0;return this.isHorizontal()?O*a>R*c?R/a:O/c:O*c<R*a?O/a:R/c}_isVisible(){const l=this.options.display;return"auto"!==l?!!l:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(l){const o=this.axis,a=this.chart,c=this.options,{grid:f,position:E}=c,R=f.offset,O=this.isHorizontal(),J=this.ticks.length+(R?1:0),dt=Kc(f),Ft=[],qt=f.setContext(this.getContext()),Ee=qt.drawBorder?qt.borderWidth:0,Ae=Ee/2,We=function(Bi){return Ls(a,Bi,Ee)};let ze,Si,an,Gi,Ki,pn,mn,wn,Pn,bn,Qi,Bn;if("top"===E)ze=We(this.bottom),pn=this.bottom-dt,wn=ze-Ae,bn=We(l.top)+Ae,Bn=l.bottom;else if("bottom"===E)ze=We(this.top),bn=l.top,Bn=We(l.bottom)-Ae,pn=ze+Ae,wn=this.top+dt;else if("left"===E)ze=We(this.right),Ki=this.right-dt,mn=ze-Ae,Pn=We(l.left)+Ae,Qi=l.right;else if("right"===E)ze=We(this.left),Pn=l.left,Qi=We(l.right)-Ae,Ki=ze+Ae,mn=this.left+dt;else if("x"===o){if("center"===E)ze=We((l.top+l.bottom)/2+.5);else if(st(E)){const Bi=Object.keys(E)[0];ze=We(this.chart.scales[Bi].getPixelForValue(E[Bi]))}bn=l.top,Bn=l.bottom,pn=ze+Ae,wn=pn+dt}else if("y"===o){if("center"===E)ze=We((l.left+l.right)/2);else if(st(E)){const Bi=Object.keys(E)[0];ze=We(this.chart.scales[Bi].getPixelForValue(E[Bi]))}Ki=ze-Ae,mn=Ki-dt,Pn=l.left,Qi=l.right}const dr=Bt(c.ticks.maxTicksLimit,J),Ei=Math.max(1,Math.ceil(J/dr));for(Si=0;Si<J;Si+=Ei){const Bi=f.setContext(this.getContext(Si)),Rn=Bi.lineWidth,gr=Bi.color,vr=f.borderDash||[],qr=Bi.borderDashOffset,Du=Bi.tickWidth,nn=Bi.tickColor,qn=Bi.tickBorderDash||[],ls=Bi.tickBorderDashOffset;an=Jl(this,Si,R),void 0!==an&&(Gi=Ls(a,an,Rn),O?Ki=mn=Pn=Qi=Gi:pn=wn=bn=Bn=Gi,Ft.push({tx1:Ki,ty1:pn,tx2:mn,ty2:wn,x1:Pn,y1:bn,x2:Qi,y2:Bn,width:Rn,color:gr,borderDash:vr,borderDashOffset:qr,tickWidth:Du,tickColor:nn,tickBorderDash:qn,tickBorderDashOffset:ls}))}return this._ticksLength=J,this._borderValue=ze,Ft}_computeLabelItems(l){const o=this.axis,a=this.options,{position:c,ticks:f}=a,E=this.isHorizontal(),R=this.ticks,{align:O,crossAlign:F,padding:J,mirror:dt}=f,Ft=Kc(a.grid),qt=Ft+J,Ee=dt?-J:qt,Ae=-wi(this.labelRotation),We=[];let ze,Si,an,Gi,Ki,pn,mn,wn,Pn,bn,Qi,Bn,dr="middle";if("top"===c)pn=this.bottom-Ee,mn=this._getXAxisLabelAlignment();else if("bottom"===c)pn=this.top+Ee,mn=this._getXAxisLabelAlignment();else if("left"===c){const Bi=this._getYAxisLabelAlignment(Ft);mn=Bi.textAlign,Ki=Bi.x}else if("right"===c){const Bi=this._getYAxisLabelAlignment(Ft);mn=Bi.textAlign,Ki=Bi.x}else if("x"===o){if("center"===c)pn=(l.top+l.bottom)/2+qt;else if(st(c)){const Bi=Object.keys(c)[0];pn=this.chart.scales[Bi].getPixelForValue(c[Bi])+qt}mn=this._getXAxisLabelAlignment()}else if("y"===o){if("center"===c)Ki=(l.left+l.right)/2-qt;else if(st(c)){const Bi=Object.keys(c)[0];Ki=this.chart.scales[Bi].getPixelForValue(c[Bi])}mn=this._getYAxisLabelAlignment(Ft).textAlign}"y"===o&&("start"===O?dr="top":"end"===O&&(dr="bottom"));const Ei=this._getLabelSizes();for(ze=0,Si=R.length;ze<Si;++ze){an=R[ze],Gi=an.label;const Bi=f.setContext(this.getContext(ze));wn=this.getPixelForTick(ze)+f.labelOffset,Pn=this._resolveTickFontOptions(ze),bn=Pn.lineHeight,Qi=bt(Gi)?Gi.length:1;const Rn=Qi/2,gr=Bi.color,vr=Bi.textStrokeColor,qr=Bi.textStrokeWidth;let Du;if(E?(Ki=wn,Bn="top"===c?"near"===F||0!==Ae?-Qi*bn+bn/2:"center"===F?-Ei.highest.height/2-Rn*bn+bn:bn/2-Ei.highest.height:"near"===F||0!==Ae?bn/2:"center"===F?Ei.highest.height/2-Rn*bn:Ei.highest.height-Qi*bn,dt&&(Bn*=-1)):(pn=wn,Bn=(1-Qi)*bn/2),Bi.showLabelBackdrop){const nn=jr(Bi.backdropPadding),qn=Ei.heights[ze],ls=Ei.widths[ze];let rl=pn+Bn-nn.top,uh=Ki-nn.left;switch(dr){case"middle":rl-=qn/2;break;case"bottom":rl-=qn}switch(mn){case"center":uh-=ls/2;break;case"right":uh-=ls}Du={left:uh,top:rl,width:ls+nn.width,height:qn+nn.height,color:Bi.backdropColor}}We.push({rotation:Ae,label:Gi,font:Pn,color:gr,strokeColor:vr,strokeWidth:qr,textOffset:Bn,textAlign:mn,textBaseline:dr,translation:[Ki,pn],backdrop:Du})}return We}_getXAxisLabelAlignment(){const{position:l,ticks:o}=this.options;if(-wi(this.labelRotation))return"top"===l?"left":"right";let c="center";return"start"===o.align?c="left":"end"===o.align&&(c="right"),c}_getYAxisLabelAlignment(l){const{position:o,ticks:{crossAlign:a,mirror:c,padding:f}}=this.options,R=l+f,O=this._getLabelSizes().widest.width;let F,J;return"left"===o?c?(J=this.right+f,"near"===a?F="left":"center"===a?(F="center",J+=O/2):(F="right",J+=O)):(J=this.right-R,"near"===a?F="right":"center"===a?(F="center",J-=O/2):(F="left",J=this.left)):"right"===o?c?(J=this.left+f,"near"===a?F="right":"center"===a?(F="center",J-=O/2):(F="left",J-=O)):(J=this.left+R,"near"===a?F="left":"center"===a?(F="center",J+=O/2):(F="right",J=this.right)):F="right",{textAlign:F,x:J}}_computeLabelArea(){if(this.options.ticks.mirror)return;const l=this.chart,o=this.options.position;return"left"===o||"right"===o?{top:0,left:this.left,bottom:l.height,right:this.right}:"top"===o||"bottom"===o?{top:this.top,left:0,bottom:this.bottom,right:l.width}:void 0}drawBackground(){const{ctx:l,options:{backgroundColor:o},left:a,top:c,width:f,height:E}=this;o&&(l.save(),l.fillStyle=o,l.fillRect(a,c,f,E),l.restore())}getLineWidthForValue(l){const o=this.options.grid;if(!this._isVisible()||!o.display)return 0;const c=this.ticks.findIndex(f=>f.value===l);return c>=0?o.setContext(this.getContext(c)).lineWidth:0}drawGrid(l){const o=this.options.grid,a=this.ctx,c=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(l));let f,E;const R=(O,F,J)=>{!J.width||!J.color||(a.save(),a.lineWidth=J.width,a.strokeStyle=J.color,a.setLineDash(J.borderDash||[]),a.lineDashOffset=J.borderDashOffset,a.beginPath(),a.moveTo(O.x,O.y),a.lineTo(F.x,F.y),a.stroke(),a.restore())};if(o.display)for(f=0,E=c.length;f<E;++f){const O=c[f];o.drawOnChartArea&&R({x:O.x1,y:O.y1},{x:O.x2,y:O.y2},O),o.drawTicks&&R({x:O.tx1,y:O.ty1},{x:O.tx2,y:O.ty2},{color:O.tickColor,width:O.tickWidth,borderDash:O.tickBorderDash,borderDashOffset:O.tickBorderDashOffset})}}drawBorder(){const{chart:l,ctx:o,options:{grid:a}}=this,c=a.setContext(this.getContext()),f=a.drawBorder?c.borderWidth:0;if(!f)return;const E=a.setContext(this.getContext(0)).lineWidth,R=this._borderValue;let O,F,J,dt;this.isHorizontal()?(O=Ls(l,this.left,f)-f/2,F=Ls(l,this.right,E)+E/2,J=dt=R):(J=Ls(l,this.top,f)-f/2,dt=Ls(l,this.bottom,E)+E/2,O=F=R),o.save(),o.lineWidth=c.borderWidth,o.strokeStyle=c.borderColor,o.beginPath(),o.moveTo(O,J),o.lineTo(F,dt),o.stroke(),o.restore()}drawLabels(l){if(!this.options.ticks.display)return;const a=this.ctx,c=this._computeLabelArea();c&&Io(a,c);const f=this._labelItems||(this._labelItems=this._computeLabelItems(l));let E,R;for(E=0,R=f.length;E<R;++E){const O=f[E],F=O.font,J=O.label;O.backdrop&&(a.fillStyle=O.backdrop.color,a.fillRect(O.backdrop.left,O.backdrop.top,O.backdrop.width,O.backdrop.height)),Zo(a,J,0,O.textOffset,F,O)}c&&Ka(a)}drawTitle(){const{ctx:l,options:{position:o,title:a,reverse:c}}=this;if(!a.display)return;const f=ho(a.font),E=jr(a.padding),R=a.align;let O=f.lineHeight/2;"bottom"===o||"center"===o||st(o)?(O+=E.bottom,bt(a.text)&&(O+=f.lineHeight*(a.text.length-1))):O+=E.top;const{titleX:F,titleY:J,maxWidth:dt,rotation:Ft}=function(g,l,o,a){const{top:c,left:f,bottom:E,right:R,chart:O}=g,{chartArea:F,scales:J}=O;let Ft,qt,Ee,dt=0;const Ae=E-c,We=R-f;if(g.isHorizontal()){if(qt=pt(a,f,R),st(o)){const ze=Object.keys(o)[0];Ee=J[ze].getPixelForValue(o[ze])+Ae-l}else Ee="center"===o?(F.bottom+F.top)/2+Ae-l:Dl(g,o,l);Ft=R-f}else{if(st(o)){const ze=Object.keys(o)[0];qt=J[ze].getPixelForValue(o[ze])-We+l}else qt="center"===o?(F.left+F.right)/2-We+l:Dl(g,o,l);Ee=pt(a,E,c),dt="left"===o?-te:te}return{titleX:qt,titleY:Ee,maxWidth:Ft,rotation:dt}}(this,O,o,R);Zo(l,a.text,0,0,f,{color:a.color,maxWidth:dt,rotation:Ft,textAlign:$l(R,o,c),textBaseline:"middle",translation:[F,J]})}draw(l){!this._isVisible()||(this.drawBackground(),this.drawGrid(l),this.drawBorder(),this.drawTitle(),this.drawLabels(l))}_layers(){const l=this.options,o=l.ticks&&l.ticks.z||0,a=Bt(l.grid&&l.grid.z,-1);return this._isVisible()&&this.draw===pa.prototype.draw?[{z:a,draw:c=>{this.drawBackground(),this.drawGrid(c),this.drawTitle()}},{z:a+1,draw:()=>{this.drawBorder()}},{z:o,draw:c=>{this.drawLabels(c)}}]:[{z:o,draw:c=>{this.draw(c)}}]}getMatchingVisibleMetas(l){const o=this.chart.getSortedVisibleDatasetMetas(),a=this.axis+"AxisID",c=[];let f,E;for(f=0,E=o.length;f<E;++f){const R=o[f];R[a]===this.id&&(!l||R.type===l)&&c.push(R)}return c}_resolveTickFontOptions(l){return ho(this.options.ticks.setContext(this.getContext(l)).font)}_maxDigits(){const l=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/l}}class tl{constructor(l,o,a){this.type=l,this.scope=o,this.override=a,this.items=Object.create(null)}isForType(l){return Object.prototype.isPrototypeOf.call(this.type.prototype,l.prototype)}register(l){const o=Object.getPrototypeOf(l);let a;var g;"id"in(g=o)&&"defaults"in g&&(a=this.register(o));const c=this.items,f=l.id,E=this.scope+"."+f;if(!f)throw new Error("class does not have id: "+l);return f in c||(c[f]=l,function(g,l,o){const a=ve(Object.create(null),[o?lr.get(o):{},lr.get(l),g.defaults]);lr.set(l,a),g.defaultRoutes&&function(g,l){Object.keys(l).forEach(o=>{const a=o.split("."),c=a.pop(),f=[g].concat(a).join("."),E=l[o].split("."),R=E.pop(),O=E.join(".");lr.route(f,c,O,R)})}(l,g.defaultRoutes),g.descriptors&&lr.describe(l,g.descriptors)}(l,E,a),this.override&&lr.override(l.id,l.overrides)),E}get(l){return this.items[l]}unregister(l){const o=this.items,a=l.id,c=this.scope;a in o&&delete o[a],c&&a in lr[c]&&(delete lr[c][a],this.override&&delete xo[a])}}var Oa=new class{constructor(){this.controllers=new tl(va,"datasets",!0),this.elements=new tl(ea,"elements"),this.plugins=new tl(Object,"plugins"),this.scales=new tl(pa,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...l){this._each("register",l)}remove(...l){this._each("unregister",l)}addControllers(...l){this._each("register",l,this.controllers)}addElements(...l){this._each("register",l,this.elements)}addPlugins(...l){this._each("register",l,this.plugins)}addScales(...l){this._each("register",l,this.scales)}getController(l){return this._get(l,this.controllers,"controller")}getElement(l){return this._get(l,this.elements,"element")}getPlugin(l){return this._get(l,this.plugins,"plugin")}getScale(l){return this._get(l,this.scales,"scale")}removeControllers(...l){this._each("unregister",l,this.controllers)}removeElements(...l){this._each("unregister",l,this.elements)}removePlugins(...l){this._each("unregister",l,this.plugins)}removeScales(...l){this._each("unregister",l,this.scales)}_each(l,o,a){[...o].forEach(c=>{const f=a||this._getRegistryForType(c);a||f.isForType(c)||f===this.plugins&&c.id?this._exec(l,f,c):rt(c,E=>{const R=a||this._getRegistryForType(E);this._exec(l,R,E)})})}_exec(l,o,a){const c=pi(l);ut(a["before"+c],[],a),o[l](a),ut(a["after"+c],[],a)}_getRegistryForType(l){for(let o=0;o<this._typedRegistries.length;o++){const a=this._typedRegistries[o];if(a.isForType(l))return a}return this.plugins}_get(l,o,a){const c=o.get(l);if(void 0===c)throw new Error('"'+l+'" is not a registered '+a+".");return c}};class co{constructor(){this._init=[]}notify(l,o,a,c){"beforeInit"===o&&(this._init=this._createDescriptors(l,!0),this._notify(this._init,l,"install"));const f=c?this._descriptors(l).filter(c):this._descriptors(l),E=this._notify(f,l,o,a);return"afterDestroy"===o&&(this._notify(f,l,"stop"),this._notify(this._init,l,"uninstall")),E}_notify(l,o,a,c){c=c||{};for(const f of l){const E=f.plugin;if(!1===ut(E[a],[o,c,f.options],E)&&c.cancelable)return!1}return!0}invalidate(){Ct(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(l){if(this._cache)return this._cache;const o=this._cache=this._createDescriptors(l);return this._notifyStateChanges(l),o}_createDescriptors(l,o){const a=l&&l.config,c=Bt(a.options&&a.options.plugins,{}),f=function(g){const l=[],o=Object.keys(Oa.plugins.items);for(let c=0;c<o.length;c++)l.push(Oa.getPlugin(o[c]));const a=g.plugins||[];for(let c=0;c<a.length;c++){const f=a[c];-1===l.indexOf(f)&&l.push(f)}return l}(a);return!1!==c||o?function(g,l,o,a){const c=[],f=g.getContext();for(let E=0;E<l.length;E++){const R=l[E],F=Zl(o[R.id],a);null!==F&&c.push({plugin:R,options:xu(g.config,R,F,f)})}return c}(l,f,c,o):[]}_notifyStateChanges(l){const o=this._oldCache||[],a=this._cache,c=(f,E)=>f.filter(R=>!E.some(O=>R.plugin.id===O.plugin.id));this._notify(c(o,a),l,"stop"),this._notify(c(a,o),l,"start")}}function Zl(g,l){return l||!1!==g?!0===g?{}:g:null}function xu(g,l,o,a){const c=g.pluginScopeKeys(l),f=g.getOptionScopes(o,c);return g.createResolver(f,a,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function dl(g,l){return((l.datasets||{})[g]||{}).indexAxis||l.indexAxis||(lr.datasets[g]||{}).indexAxis||"x"}function vc(g,l){return"x"===g||"y"===g?g:l.axis||function(g){return"top"===g||"bottom"===g?"x":"left"===g||"right"===g?"y":void 0}(l.position)||g.charAt(0).toLowerCase()}function Ml(g){const l=g.options||(g.options={});l.plugins=Bt(l.plugins,{}),l.scales=function(g,l){const o=xo[g.type]||{scales:{}},a=l.scales||{},c=dl(g.type,l),f=Object.create(null),E=Object.create(null);return Object.keys(a).forEach(R=>{const O=a[R];if(!st(O))return console.error(`Invalid scale configuration for scale: ${R}`);if(O._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${R}`);const F=vc(R,O),J=function(g,l){return g===l?"_index_":"_value_"}(F,c),dt=o.scales||{};f[F]=f[F]||R,E[R]=pe(Object.create(null),[{axis:F},O,dt[F],dt[J]])}),g.data.datasets.forEach(R=>{const O=R.type||g.type,F=R.indexAxis||dl(O,l),dt=(xo[O]||{}).scales||{};Object.keys(dt).forEach(Ft=>{const qt=function(g,l){let o=g;return"_index_"===g?o=l:"_value_"===g&&(o="x"===l?"y":"x"),o}(Ft,F),Ee=R[qt+"AxisID"]||f[qt]||qt;E[Ee]=E[Ee]||Object.create(null),pe(E[Ee],[{axis:qt},a[Ee],dt[Ft]])})}),Object.keys(E).forEach(R=>{const O=E[R];pe(O,[lr.scales[O.type],lr.scale])}),E}(g,l)}function el(g){return(g=g||{}).datasets=g.datasets||[],g.labels=g.labels||[],g}const Nu=new Map,uu=new Set;function fl(g,l){let o=Nu.get(g);return o||(o=l(),Nu.set(g,o),uu.add(o)),o}const Ea=(g,l,o)=>{const a=Le(l,o);void 0!==a&&g.add(a)};class il{constructor(l){var g;this._config=((g=(g=l)||{}).data=el(g.data),Ml(g),g),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(l){this._config.type=l}get data(){return this._config.data}set data(l){this._config.data=el(l)}get options(){return this._config.options}set options(l){this._config.options=l}get plugins(){return this._config.plugins}update(){const l=this._config;this.clearCache(),Ml(l)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(l){return fl(l,()=>[[`datasets.${l}`,""]])}datasetAnimationScopeKeys(l,o){return fl(`${l}.transition.${o}`,()=>[[`datasets.${l}.transitions.${o}`,`transitions.${o}`],[`datasets.${l}`,""]])}datasetElementScopeKeys(l,o){return fl(`${l}-${o}`,()=>[[`datasets.${l}.elements.${o}`,`datasets.${l}`,`elements.${o}`,""]])}pluginScopeKeys(l){const o=l.id;return fl(`${this.type}-plugin-${o}`,()=>[[`plugins.${o}`,...l.additionalOptionScopes||[]]])}_cachedScopes(l,o){const a=this._scopeCache;let c=a.get(l);return(!c||o)&&(c=new Map,a.set(l,c)),c}getOptionScopes(l,o,a){const{options:c,type:f}=this,E=this._cachedScopes(l,a),R=E.get(o);if(R)return R;const O=new Set;o.forEach(J=>{l&&(O.add(l),J.forEach(dt=>Ea(O,l,dt))),J.forEach(dt=>Ea(O,c,dt)),J.forEach(dt=>Ea(O,xo[f]||{},dt)),J.forEach(dt=>Ea(O,lr,dt)),J.forEach(dt=>Ea(O,$o,dt))});const F=Array.from(O);return 0===F.length&&F.push(Object.create(null)),uu.has(o)&&E.set(o,F),F}chartOptionScopes(){const{options:l,type:o}=this;return[l,xo[o]||{},lr.datasets[o]||{},{type:o},lr,$o]}resolveNamedOptions(l,o,a,c=[""]){const f={$shared:!0},{resolver:E,subPrefixes:R}=gl(this._resolverCache,l,c);let O=E;(function(g,l){const{isScriptable:o,isIndexable:a}=$s(g);for(const c of l){const f=o(c),E=a(c),R=(E||f)&&g[c];if(f&&(Se(R)||na(R))||E&&bt(R))return!0}return!1})(E,o)&&(f.$shared=!1,O=Ar(E,a=Se(a)?a():a,this.createResolver(l,a,R)));for(const F of o)f[F]=O[F];return f}createResolver(l,o,a=[""],c){const{resolver:f}=gl(this._resolverCache,l,a);return st(o)?Ar(f,o,void 0,c):f}}function gl(g,l,o){let a=g.get(l);a||(a=new Map,g.set(l,a));const c=o.join();let f=a.get(c);return f||(f={resolver:Js(l,o),subPrefixes:o.filter(R=>!R.toLowerCase().includes("hover"))},a.set(c,f)),f}const na=g=>st(g)&&Object.getOwnPropertyNames(g).reduce((l,o)=>l||Se(g[o]),!1),fh=["top","bottom","left","right","chartArea"];function ds(g,l){return"top"===g||"bottom"===g||-1===fh.indexOf(g)&&"x"===l}function Lc(g,l){return function(o,a){return o[g]===a[g]?o[l]-a[l]:o[g]-a[g]}}function vt(g){const l=g.chart,o=l.options.animation;l.notifyPlugins("afterRender"),ut(o&&o.onComplete,[g],l)}function Rt(g){const l=g.chart,o=l.options.animation;ut(o&&o.onProgress,[g],l)}function se(g){return Uo()&&"string"==typeof g?g=document.getElementById(g):g&&g.length&&(g=g[0]),g&&g.canvas&&(g=g.canvas),g}const De={},Ve=g=>{const l=se(g);return Object.values(De).filter(o=>o.canvas===l).pop()};function fi(g,l,o){const a=Object.keys(g);for(const c of a){const f=+c;if(f>=l){const E=g[c];delete g[c],(o>0||f>l)&&(g[f+o]=E)}}}class li{constructor(l,o){const a=this.config=new il(o),c=se(l),f=Ve(c);if(f)throw new Error("Canvas is already in use. Chart with ID '"+f.id+"' must be destroyed before the canvas can be reused.");const E=a.createResolver(a.chartOptionScopes(),this.getContext());var g;this.platform=new(a.platform||(g=c,!Uo()||"undefined"!=typeof OffscreenCanvas&&g instanceof OffscreenCanvas?Wa:hc)),this.platform.updateConfig(a);const R=this.platform.acquireContext(c,E.aspectRatio),O=R&&R.canvas,F=O&&O.height,J=O&&O.width;this.id=Jt(),this.ctx=R,this.canvas=O,this.width=J,this.height=F,this._options=E,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new co,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(g,l){let o;return function(...a){return l?(clearTimeout(o),o=setTimeout(g,l,a)):g.apply(this,a),l}}(dt=>this.update(dt),E.resizeDelay||0),this._dataChanges=[],De[this.id]=this,R&&O?(ur.listen(this,"complete",vt),ur.listen(this,"progress",Rt),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:l,maintainAspectRatio:o},width:a,height:c,_aspectRatio:f}=this;return Ct(l)?o&&f?f:c?a/c:null:l}get data(){return this.config.data}set data(l){this.config.data=l}get options(){return this._options}set options(l){this.config.options=l}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():bi(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Fo(this.canvas,this.ctx),this}stop(){return ur.stop(this),this}resize(l,o){ur.running(this)?this._resizeBeforeDraw={width:l,height:o}:this._resize(l,o)}_resize(l,o){const a=this.options,E=this.platform.getMaximumSize(this.canvas,l,o,a.maintainAspectRatio&&this.aspectRatio),R=a.devicePixelRatio||this.platform.getDevicePixelRatio(),O=this.width?"resize":"attach";this.width=E.width,this.height=E.height,this._aspectRatio=this.aspectRatio,bi(this,R,!0)&&(this.notifyPlugins("resize",{size:E}),ut(a.onResize,[this,E],this),this.attached&&this._doResize(O)&&this.render())}ensureScalesHaveIDs(){rt(this.options.scales||{},(a,c)=>{a.id=c})}buildOrUpdateScales(){const l=this.options,o=l.scales,a=this.scales,c=Object.keys(a).reduce((E,R)=>(E[R]=!1,E),{});let f=[];o&&(f=f.concat(Object.keys(o).map(E=>{const R=o[E],O=vc(E,R),F="r"===O,J="x"===O;return{options:R,dposition:F?"chartArea":J?"bottom":"left",dtype:F?"radialLinear":J?"category":"linear"}}))),rt(f,E=>{const R=E.options,O=R.id,F=vc(O,R),J=Bt(R.type,E.dtype);(void 0===R.position||ds(R.position,F)!==ds(E.dposition))&&(R.position=E.dposition),c[O]=!0;let dt=null;O in a&&a[O].type===J?dt=a[O]:(dt=new(Oa.getScale(J))({id:O,type:J,ctx:this.ctx,chart:this}),a[dt.id]=dt),dt.init(R,l)}),rt(c,(E,R)=>{E||delete a[R]}),rt(a,E=>{bo.configure(this,E,E.options),bo.addBox(this,E)})}_updateMetasets(){const l=this._metasets,o=this.data.datasets.length,a=l.length;if(l.sort((c,f)=>c.index-f.index),a>o){for(let c=o;c<a;++c)this._destroyDatasetMeta(c);l.splice(o,a-o)}this._sortedMetasets=l.slice(0).sort(Lc("order","index"))}_removeUnreferencedMetasets(){const{_metasets:l,data:{datasets:o}}=this;l.length>o.length&&delete this._stacks,l.forEach((a,c)=>{0===o.filter(f=>f===a._dataset).length&&this._destroyDatasetMeta(c)})}buildOrUpdateControllers(){const l=[],o=this.data.datasets;let a,c;for(this._removeUnreferencedMetasets(),a=0,c=o.length;a<c;a++){const f=o[a];let E=this.getDatasetMeta(a);const R=f.type||this.config.type;if(E.type&&E.type!==R&&(this._destroyDatasetMeta(a),E=this.getDatasetMeta(a)),E.type=R,E.indexAxis=f.indexAxis||dl(R,this.options),E.order=f.order||0,E.index=a,E.label=""+f.label,E.visible=this.isDatasetVisible(a),E.controller)E.controller.updateIndex(a),E.controller.linkScales();else{const O=Oa.getController(R),{datasetElementType:F,dataElementType:J}=lr.datasets[R];Object.assign(O.prototype,{dataElementType:Oa.getElement(J),datasetElementType:F&&Oa.getElement(F)}),E.controller=new O(this,a),l.push(E.controller)}}return this._updateMetasets(),l}_resetElements(){rt(this.data.datasets,(l,o)=>{this.getDatasetMeta(o).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(l){const o=this.config;o.update();const a=this._options=o.createResolver(o.chartOptionScopes(),this.getContext()),c=this._animationsDisabled=!a.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:l,cancelable:!0}))return;const f=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let E=0;for(let F=0,J=this.data.datasets.length;F<J;F++){const{controller:dt}=this.getDatasetMeta(F),Ft=!c&&-1===f.indexOf(dt);dt.buildOrUpdateElements(Ft),E=Math.max(+dt.getMaxOverflow(),E)}E=this._minPadding=a.layout.autoPadding?E:0,this._updateLayout(E),c||rt(f,F=>{F.reset()}),this._updateDatasets(l),this.notifyPlugins("afterUpdate",{mode:l}),this._layers.sort(Lc("z","_idx"));const{_active:R,_lastEvent:O}=this;O?this._eventHandler(O,!0):R.length&&this._updateHoverStyles(R,R,!0),this.render()}_updateScales(){rt(this.scales,l=>{bo.removeBox(this,l)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const l=this.options,o=new Set(Object.keys(this._listeners)),a=new Set(l.events);(!Zt(o,a)||!!this._responsiveListeners!==l.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:l}=this,o=this._getUniformDataChanges()||[];for(const{method:a,start:c,count:f}of o)fi(l,c,"_removeElements"===a?-f:f)}_getUniformDataChanges(){const l=this._dataChanges;if(!l||!l.length)return;this._dataChanges=[];const o=this.data.datasets.length,a=f=>new Set(l.filter(E=>E[0]===f).map((E,R)=>R+","+E.splice(1).join(","))),c=a(0);for(let f=1;f<o;f++)if(!Zt(c,a(f)))return;return Array.from(c).map(f=>f.split(",")).map(f=>({method:f[1],start:+f[2],count:+f[3]}))}_updateLayout(l){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;bo.update(this,this.width,this.height,l);const o=this.chartArea,a=o.width<=0||o.height<=0;this._layers=[],rt(this.boxes,c=>{a&&"chartArea"===c.position||(c.configure&&c.configure(),this._layers.push(...c._layers()))},this),this._layers.forEach((c,f)=>{c._idx=f}),this.notifyPlugins("afterLayout")}_updateDatasets(l){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:l,cancelable:!0})){for(let o=0,a=this.data.datasets.length;o<a;++o)this.getDatasetMeta(o).controller.configure();for(let o=0,a=this.data.datasets.length;o<a;++o)this._updateDataset(o,Se(l)?l({datasetIndex:o}):l);this.notifyPlugins("afterDatasetsUpdate",{mode:l})}}_updateDataset(l,o){const a=this.getDatasetMeta(l),c={meta:a,index:l,mode:o,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",c)&&(a.controller._update(o),c.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",c))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(ur.has(this)?this.attached&&!ur.running(this)&&ur.start(this):(this.draw(),vt({chart:this})))}draw(){let l;if(this._resizeBeforeDraw){const{width:a,height:c}=this._resizeBeforeDraw;this._resize(a,c),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const o=this._layers;for(l=0;l<o.length&&o[l].z<=0;++l)o[l].draw(this.chartArea);for(this._drawDatasets();l<o.length;++l)o[l].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(l){const o=this._sortedMetasets,a=[];let c,f;for(c=0,f=o.length;c<f;++c){const E=o[c];(!l||E.visible)&&a.push(E)}return a}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const l=this.getSortedVisibleDatasetMetas();for(let o=l.length-1;o>=0;--o)this._drawDataset(l[o]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(l){const o=this.ctx,a=l._clip,c=!a.disabled,f=this.chartArea,E={meta:l,index:l.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",E)&&(c&&Io(o,{left:!1===a.left?0:f.left-a.left,right:!1===a.right?this.width:f.right+a.right,top:!1===a.top?0:f.top-a.top,bottom:!1===a.bottom?this.height:f.bottom+a.bottom}),l.controller.draw(),c&&Ka(o),E.cancelable=!1,this.notifyPlugins("afterDatasetDraw",E))}getElementsAtEventForMode(l,o,a,c){const f=su.modes[o];return"function"==typeof f?f(this,l,a,c):[]}getDatasetMeta(l){const o=this.data.datasets[l],a=this._metasets;let c=a.filter(f=>f&&f._dataset===o).pop();return c||(c={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:o&&o.order||0,index:l,_dataset:o,_parsed:[],_sorted:!1},a.push(c)),c}getContext(){return this.$context||(this.$context=Yo(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(l){const o=this.data.datasets[l];if(!o)return!1;const a=this.getDatasetMeta(l);return"boolean"==typeof a.hidden?!a.hidden:!o.hidden}setDatasetVisibility(l,o){this.getDatasetMeta(l).hidden=!o}toggleDataVisibility(l){this._hiddenIndices[l]=!this._hiddenIndices[l]}getDataVisibility(l){return!this._hiddenIndices[l]}_updateVisibility(l,o,a){const c=a?"show":"hide",f=this.getDatasetMeta(l),E=f.controller._resolveAnimations(void 0,c);Gt(o)?(f.data[o].hidden=!a,this.update()):(this.setDatasetVisibility(l,a),E.update(f,{visible:a}),this.update(R=>R.datasetIndex===l?c:void 0))}hide(l,o){this._updateVisibility(l,o,!1)}show(l,o){this._updateVisibility(l,o,!0)}_destroyDatasetMeta(l){const o=this._metasets[l];o&&o.controller&&o.controller._destroy(),delete this._metasets[l]}_stop(){let l,o;for(this.stop(),ur.remove(this),l=0,o=this.data.datasets.length;l<o;++l)this._destroyDatasetMeta(l)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:l,ctx:o}=this;this._stop(),this.config.clearCache(),l&&(this.unbindEvents(),Fo(l,o),this.platform.releaseContext(o),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete De[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...l){return this.canvas.toDataURL(...l)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const l=this._listeners,o=this.platform,a=(f,E)=>{o.addEventListener(this,f,E),l[f]=E},c=(f,E,R)=>{f.offsetX=E,f.offsetY=R,this._eventHandler(f)};rt(this.options.events,f=>a(f,c))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const l=this._responsiveListeners,o=this.platform,a=(O,F)=>{o.addEventListener(this,O,F),l[O]=F},c=(O,F)=>{l[O]&&(o.removeEventListener(this,O,F),delete l[O])},f=(O,F)=>{this.canvas&&this.resize(O,F)};let E;const R=()=>{c("attach",R),this.attached=!0,this.resize(),a("resize",f),a("detach",E)};E=()=>{this.attached=!1,c("resize",f),this._stop(),this._resize(0,0),a("attach",R)},o.isAttached(this.canvas)?R():E()}unbindEvents(){rt(this._listeners,(l,o)=>{this.platform.removeEventListener(this,o,l)}),this._listeners={},rt(this._responsiveListeners,(l,o)=>{this.platform.removeEventListener(this,o,l)}),this._responsiveListeners=void 0}updateHoverStyle(l,o,a){const c=a?"set":"remove";let f,E,R,O;for("dataset"===o&&(f=this.getDatasetMeta(l[0].datasetIndex),f.controller["_"+c+"DatasetHoverStyle"]()),R=0,O=l.length;R<O;++R){E=l[R];const F=E&&this.getDatasetMeta(E.datasetIndex).controller;F&&F[c+"HoverStyle"](E.element,E.datasetIndex,E.index)}}getActiveElements(){return this._active||[]}setActiveElements(l){const o=this._active||[],a=l.map(({datasetIndex:f,index:E})=>{const R=this.getDatasetMeta(f);if(!R)throw new Error("No dataset found at index "+f);return{datasetIndex:f,element:R.data[E],index:E}});!fe(a,o)&&(this._active=a,this._lastEvent=null,this._updateHoverStyles(a,o))}notifyPlugins(l,o,a){return this._plugins.notify(this,l,o,a)}_updateHoverStyles(l,o,a){const c=this.options.hover,f=(O,F)=>O.filter(J=>!F.some(dt=>J.datasetIndex===dt.datasetIndex&&J.index===dt.index)),E=f(o,l),R=a?l:f(l,o);E.length&&this.updateHoverStyle(E,c.mode,!1),R.length&&c.mode&&this.updateHoverStyle(R,c.mode,!0)}_eventHandler(l,o){const a={event:l,replay:o,cancelable:!0,inChartArea:jo(l,this.chartArea,this._minPadding)},c=E=>(E.options.events||this.options.events).includes(l.native.type);if(!1===this.notifyPlugins("beforeEvent",a,c))return;const f=this._handleEvent(l,o,a.inChartArea);return a.cancelable=!1,this.notifyPlugins("afterEvent",a,c),(f||a.changed)&&this.render(),this}_handleEvent(l,o,a){const{_active:c=[],options:f}=this,R=this._getActiveElements(l,c,a,o),O="mouseup"===(g=l).type||"click"===g.type||"contextmenu"===g.type,F=function(g,l,o,a){return o&&"mouseout"!==g.type?a?l:g:null}(l,this._lastEvent,a,O);var g;a&&(this._lastEvent=null,ut(f.onHover,[l,R,this],this),O&&ut(f.onClick,[l,R,this],this));const J=!fe(R,c);return(J||o)&&(this._active=R,this._updateHoverStyles(R,c,o)),this._lastEvent=F,J}_getActiveElements(l,o,a,c){if("mouseout"===l.type)return[];if(!a)return o;const f=this.options.hover;return this.getElementsAtEventForMode(l,f.mode,f,c)}}const Li=()=>rt(li.instances,g=>g._plugins.invalidate()),Ai=!0;function zi(g,l,o){const{startAngle:a,pixelMargin:c,x:f,y:E,outerRadius:R,innerRadius:O}=l;let F=c/R;g.beginPath(),g.arc(f,E,R,a-F,o+F),O>c?(F=c/O,g.arc(f,E,O,o+F,a-F,!0)):g.arc(f,E,c,o+te,a-te),g.closePath(),g.clip()}function $n(g,l,o,a){return{x:o+g*Math.cos(l),y:a+g*Math.sin(l)}}function Ko(g,l,o,a,c){const{x:f,y:E,startAngle:R,pixelMargin:O,innerRadius:F}=l,J=Math.max(l.outerRadius+a+o-O,0),dt=F>0?F+a+o+O:0;let Ft=0;const qt=c-R;if(a){const vr=((F>0?F-a:0)+(J>0?J-a:0))/2;Ft=(qt-(0!==vr?qt*vr/(vr+a):qt))/2}const Ae=(qt-Math.max(.001,qt*J-o/St)/J)/2,We=R+Ae+Ft,ze=c-Ae-Ft,{outerStart:Si,outerEnd:an,innerStart:Gi,innerEnd:Ki}=function(g,l,o,a){const c=function(g){return Sa(g,["outerStart","outerEnd","innerStart","innerEnd"])}(g.options.borderRadius),f=(o-l)/2,E=Math.min(f,a*l/2),R=O=>{const F=(o-Math.min(f,O))*a/2;return je(O,0,Math.min(f,F))};return{outerStart:R(c.outerStart),outerEnd:R(c.outerEnd),innerStart:je(c.innerStart,0,E),innerEnd:je(c.innerEnd,0,E)}}(l,dt,J,ze-We),pn=J-Si,mn=J-an,wn=We+Si/pn,Pn=ze-an/mn,bn=dt+Gi,Qi=dt+Ki,Bn=We+Gi/bn,dr=ze-Ki/Qi;if(g.beginPath(),g.arc(f,E,J,wn,Pn),an>0){const Rn=$n(mn,Pn,f,E);g.arc(Rn.x,Rn.y,an,Pn,ze+te)}const Ei=$n(Qi,ze,f,E);if(g.lineTo(Ei.x,Ei.y),Ki>0){const Rn=$n(Qi,dr,f,E);g.arc(Rn.x,Rn.y,Ki,ze+te,dr+Math.PI)}if(g.arc(f,E,dt,ze-Ki/dt,We+Gi/dt,!0),Gi>0){const Rn=$n(bn,Bn,f,E);g.arc(Rn.x,Rn.y,Gi,Bn+Math.PI,We-te)}const Bi=$n(pn,We,f,E);if(g.lineTo(Bi.x,Bi.y),Si>0){const Rn=$n(pn,wn,f,E);g.arc(Rn.x,Rn.y,Si,We-te,wn)}g.closePath()}Object.defineProperties(li,{defaults:{enumerable:Ai,value:lr},instances:{enumerable:Ai,value:De},overrides:{enumerable:Ai,value:xo},registry:{enumerable:Ai,value:Oa},version:{enumerable:Ai,value:"3.7.0"},getChart:{enumerable:Ai,value:Ve},register:{enumerable:Ai,value:(...g)=>{Oa.add(...g),Li()}},unregister:{enumerable:Ai,value:(...g)=>{Oa.remove(...g),Li()}}});class So extends ea{constructor(l){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,l&&Object.assign(this,l)}inRange(l,o,a){const c=this.getProps(["x","y"],a),{angle:f,distance:E}=mi(c,{x:l,y:o}),{startAngle:R,endAngle:O,innerRadius:F,outerRadius:J,circumference:dt}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],a),Ft=this.options.spacing/2,Ee=Bt(dt,O-R)>=jt||Ci(f,R,O),Ae=_i(E,F+Ft,J+Ft);return Ee&&Ae}getCenterPoint(l){const{x:o,y:a,startAngle:c,endAngle:f,innerRadius:E,outerRadius:R}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],l),{offset:O,spacing:F}=this.options,J=(c+f)/2,dt=(E+R+F+O)/2;return{x:o+Math.cos(J)*dt,y:a+Math.sin(J)*dt}}tooltipPosition(l){return this.getCenterPoint(l)}draw(l){const{options:o,circumference:a}=this,c=(o.offset||0)/2,f=(o.spacing||0)/2;if(this.pixelMargin="inner"===o.borderAlign?.33:0,this.fullCircles=a>jt?Math.floor(a/jt):0,0===a||this.innerRadius<0||this.outerRadius<0)return;l.save();let E=0;if(c){E=c/2;const O=(this.startAngle+this.endAngle)/2;l.translate(Math.cos(O)*E,Math.sin(O)*E),this.circumference>=St&&(E=c)}l.fillStyle=o.backgroundColor,l.strokeStyle=o.borderColor;const R=function(g,l,o,a){const{fullCircles:c,startAngle:f,circumference:E}=l;let R=l.endAngle;if(c){Ko(g,l,o,a,f+jt);for(let O=0;O<c;++O)g.fill();isNaN(E)||(R=f+E%jt,E%jt==0&&(R+=jt))}return Ko(g,l,o,a,R),g.fill(),R}(l,this,E,f);(function(g,l,o,a,c){const{options:f}=l,{borderWidth:E,borderJoinStyle:R}=f,O="inner"===f.borderAlign;!E||(O?(g.lineWidth=2*E,g.lineJoin=R||"round"):(g.lineWidth=E,g.lineJoin=R||"bevel"),l.fullCircles&&function(g,l,o){const{x:a,y:c,startAngle:f,pixelMargin:E,fullCircles:R}=l,O=Math.max(l.outerRadius-E,0),F=l.innerRadius+E;let J;for(o&&zi(g,l,f+jt),g.beginPath(),g.arc(a,c,F,f+jt,f,!0),J=0;J<R;++J)g.stroke();for(g.beginPath(),g.arc(a,c,O,f,f+jt),J=0;J<R;++J)g.stroke()}(g,l,O),O&&zi(g,l,c),Ko(g,l,o,a,c),g.stroke())})(l,this,E,f,R),l.restore()}}function oo(g,l,o=l){g.lineCap=Bt(o.borderCapStyle,l.borderCapStyle),g.setLineDash(Bt(o.borderDash,l.borderDash)),g.lineDashOffset=Bt(o.borderDashOffset,l.borderDashOffset),g.lineJoin=Bt(o.borderJoinStyle,l.borderJoinStyle),g.lineWidth=Bt(o.borderWidth,l.borderWidth),g.strokeStyle=Bt(o.borderColor,l.borderColor)}function Ms(g,l,o){g.lineTo(o.x,o.y)}function ys(g,l,o={}){const a=g.length,{start:c=0,end:f=a-1}=o,{start:E,end:R}=l,O=Math.max(c,E),F=Math.min(f,R);return{count:a,start:O,loop:l.loop,ilen:F<O&&!(c<E&&f<E||c>R&&f>R)?a+F-O:F-O}}function ml(g,l,o,a){const{points:c,options:f}=l,{count:E,start:R,loop:O,ilen:F}=ys(c,o,a),J=function(g){return g.stepped?ka:g.tension||"monotone"===g.cubicInterpolationMode?Ca:Ms}(f);let qt,Ee,Ae,{move:dt=!0,reverse:Ft}=a||{};for(qt=0;qt<=F;++qt)Ee=c[(R+(Ft?F-qt:qt))%E],!Ee.skip&&(dt?(g.moveTo(Ee.x,Ee.y),dt=!1):J(g,Ae,Ee,Ft,f.stepped),Ae=Ee);return O&&(Ee=c[(R+(Ft?F:0))%E],J(g,Ae,Ee,Ft,f.stepped)),!!O}function hu(g,l,o,a){const c=l.points,{count:f,start:E,ilen:R}=ys(c,o,a),{move:O=!0,reverse:F}=a||{};let Ft,qt,Ee,Ae,We,ze,J=0,dt=0;const Si=Gi=>(E+(F?R-Gi:Gi))%f,an=()=>{Ae!==We&&(g.lineTo(J,We),g.lineTo(J,Ae),g.lineTo(J,ze))};for(O&&(qt=c[Si(0)],g.moveTo(qt.x,qt.y)),Ft=0;Ft<=R;++Ft){if(qt=c[Si(Ft)],qt.skip)continue;const Gi=qt.x,Ki=qt.y,pn=0|Gi;pn===Ee?(Ki<Ae?Ae=Ki:Ki>We&&(We=Ki),J=(dt*J+Gi)/++dt):(an(),g.lineTo(Gi,Ki),Ee=pn,dt=0,Ae=We=Ki),ze=Ki}an()}function gh(g){const l=g.options;return g._decimated||g._loop||l.tension||"monotone"===l.cubicInterpolationMode||l.stepped||l.borderDash&&l.borderDash.length?ml:hu}So.id="arc",So.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0},So.defaultRoutes={backgroundColor:"backgroundColor"};const pu="function"==typeof Path2D;let Bu=(()=>{class g extends ea{constructor(o){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,o&&Object.assign(this,o)}updateControlPoints(o,a){const c=this.options;!c.tension&&"monotone"!==c.cubicInterpolationMode||c.stepped||this._pointsUpdated||(wa(this._points,c,o,c.spanGaps?this._loop:this._fullLoop,a),this._pointsUpdated=!0)}set points(o){this._points=o,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(g,l){const o=g.points,a=g.options.spanGaps,c=o.length;if(!c)return[];const f=!!g._loop,{start:E,end:R}=function(g,l,o,a){let c=0,f=l-1;if(o&&!a)for(;c<l&&!g[c].skip;)c++;for(;c<l&&g[c].skip;)c++;for(c%=l,o&&(f+=c);f>c&&g[f%l].skip;)f--;return f%=l,{start:c,end:f}}(o,c,f,a);return function(g,l,o,a){return a&&a.setContext&&o?function(g,l,o,a){const c=g._chart.getContext(),f=Dn(g.options),{_datasetIndex:E,options:{spanGaps:R}}=g,O=o.length,F=[];let J=f,dt=l[0].start,Ft=dt;function qt(Ee,Ae,We,ze){const Si=R?-1:1;if(Ee!==Ae){for(Ee+=O;o[Ee%O].skip;)Ee-=Si;for(;o[Ae%O].skip;)Ae+=Si;Ee%O!=Ae%O&&(F.push({start:Ee%O,end:Ae%O,loop:We,style:ze}),J=ze,dt=Ae%O)}}for(const Ee of l){dt=R?dt:Ee.start;let We,Ae=o[dt%O];for(Ft=dt+1;Ft<=Ee.end;Ft++){const ze=o[Ft%O];We=Dn(a.setContext(Yo(c,{type:"segment",p0:Ae,p1:ze,p0DataIndex:(Ft-1)%O,p1DataIndex:Ft%O,datasetIndex:E}))),An(We,J)&&qt(dt,Ft-1,Ee.loop,J),Ae=ze,J=We}dt<Ft-1&&qt(dt,Ft-1,Ee.loop,J)}return F}(g,l,o,a):l}(g,!0===a?[{start:E,end:R,loop:f}]:function(g,l,o,a){const c=g.length,f=[];let O,E=l,R=g[l];for(O=l+1;O<=o;++O){const F=g[O%c];F.skip||F.stop?R.skip||(f.push({start:l%c,end:(O-1)%c,loop:a=!1}),l=E=F.stop?O:null):(E=O,R.skip&&(l=O)),R=F}return null!==E&&f.push({start:l%c,end:E%c,loop:a}),f}(o,E,R<E?R+c:R,!!g._fullLoop&&0===E&&R===c-1),o,l)}(this,this.options.segment))}first(){const o=this.segments;return o.length&&this.points[o[0].start]}last(){const o=this.segments,c=o.length;return c&&this.points[o[c-1].end]}interpolate(o,a){const c=this.options,f=o[a],E=this.points,R=Bs(this,{property:a,start:f,end:f});if(!R.length)return;const O=[],F=function(g){return g.stepped?Zn:g.tension||"monotone"===g.cubicInterpolationMode?Qn:Cn}(c);let J,dt;for(J=0,dt=R.length;J<dt;++J){const{start:Ft,end:qt}=R[J],Ee=E[Ft],Ae=E[qt];if(Ee===Ae){O.push(Ee);continue}const ze=F(Ee,Ae,Math.abs((f-Ee[a])/(Ae[a]-Ee[a])),c.stepped);ze[a]=o[a],O.push(ze)}return 1===O.length?O[0]:O}pathSegment(o,a,c){return gh(this)(o,this,a,c)}path(o,a,c){const f=this.segments,E=gh(this);let R=this._loop;a=a||0,c=c||this.points.length-a;for(const O of f)R&=E(o,this,O,{start:a,end:a+c-1});return!!R}draw(o,a,c,f){(this.points||[]).length&&(this.options||{}).borderWidth&&(o.save(),function(g,l,o,a){pu&&!l.options.segment?function(g,l,o,a){let c=l._path;c||(c=l._path=new Path2D,l.path(c,o,a)&&c.closePath()),oo(g,l.options),g.stroke(c)}(g,l,o,a):function(g,l,o,a){const{segments:c,options:f}=l,E=gh(l);for(const R of c)oo(g,f,R.style),g.beginPath(),E(g,l,R,{start:o,end:o+a-1})&&g.closePath(),g.stroke()}(g,l,o,a)}(o,this,c,f),o.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return g.id="line",g.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},g.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},g.descriptors={_scriptable:!0,_indexable:l=>"borderDash"!==l&&"fill"!==l},g})();function Hu(g,l,o,a){const c=g.options,{[o]:f}=g.getProps([o],a);return Math.abs(l-f)<c.radius+c.hitRadius}let fu=(()=>{class g extends ea{constructor(o){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,o&&Object.assign(this,o)}inRange(o,a,c){const f=this.options,{x:E,y:R}=this.getProps(["x","y"],c);return Math.pow(o-E,2)+Math.pow(a-R,2)<Math.pow(f.hitRadius+f.radius,2)}inXRange(o,a){return Hu(this,o,"x",a)}inYRange(o,a){return Hu(this,o,"y",a)}getCenterPoint(o){const{x:a,y:c}=this.getProps(["x","y"],o);return{x:a,y:c}}size(o){let a=(o=o||this.options||{}).radius||0;return a=Math.max(a,a&&o.hoverRadius||0),2*(a+(a&&o.borderWidth||0))}draw(o,a){const c=this.options;this.skip||c.radius<.1||!jo(this,a,this.size(c)/2)||(o.strokeStyle=c.borderColor,o.lineWidth=c.borderWidth,o.fillStyle=c.backgroundColor,Do(o,c,this.x,this.y))}getRange(){const o=this.options||{};return o.radius+o.hitRadius}}return g.id="point",g.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},g.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},g})();function Uu(g,l){const{x:o,y:a,base:c,width:f,height:E}=g.getProps(["x","y","base","width","height"],l);let R,O,F,J,dt;return g.horizontal?(dt=E/2,R=Math.min(o,c),O=Math.max(o,c),F=a-dt,J=a+dt):(dt=f/2,R=o-dt,O=o+dt,F=Math.min(a,c),J=Math.max(a,c)),{left:R,top:F,right:O,bottom:J}}function ql(g,l,o,a){return g?0:je(l,o,a)}function tc(g,l,o,a){const c=null===l,f=null===o,R=g&&!(c&&f)&&Uu(g,a);return R&&(c||_i(l,R.left,R.right))&&(f||_i(o,R.top,R.bottom))}function Vu(g,l){g.rect(l.x,l.y,l.w,l.h)}function Jo(g,l,o={}){const a=g.x!==o.x?-l:0,c=g.y!==o.y?-l:0;return{x:g.x+a,y:g.y+c,w:g.w+((g.x+g.w!==o.x+o.w?l:0)-a),h:g.h+((g.y+g.h!==o.y+o.h?l:0)-c),radius:g.radius}}class Nc extends ea{constructor(l){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,l&&Object.assign(this,l)}draw(l){const{inflateAmount:o,options:{borderColor:a,backgroundColor:c}}=this,{inner:f,outer:E}=function(g){const l=Uu(g),o=l.right-l.left,a=l.bottom-l.top,c=function(g,l,o){const c=g.borderSkipped,f=la(g.options.borderWidth);return{t:ql(c.top,f.top,0,o),r:ql(c.right,f.right,0,l),b:ql(c.bottom,f.bottom,0,o),l:ql(c.left,f.left,0,l)}}(g,o/2,a/2),f=function(g,l,o){const{enableBorderRadius:a}=g.getProps(["enableBorderRadius"]),c=g.options.borderRadius,f=ko(c),E=Math.min(l,o),R=g.borderSkipped,O=a||st(c);return{topLeft:ql(!O||R.top||R.left,f.topLeft,0,E),topRight:ql(!O||R.top||R.right,f.topRight,0,E),bottomLeft:ql(!O||R.bottom||R.left,f.bottomLeft,0,E),bottomRight:ql(!O||R.bottom||R.right,f.bottomRight,0,E)}}(g,o/2,a/2);return{outer:{x:l.left,y:l.top,w:o,h:a,radius:f},inner:{x:l.left+c.l,y:l.top+c.t,w:o-c.l-c.r,h:a-c.t-c.b,radius:{topLeft:Math.max(0,f.topLeft-Math.max(c.t,c.l)),topRight:Math.max(0,f.topRight-Math.max(c.t,c.r)),bottomLeft:Math.max(0,f.bottomLeft-Math.max(c.b,c.l)),bottomRight:Math.max(0,f.bottomRight-Math.max(c.b,c.r))}}}}(this),R=(g=E.radius).topLeft||g.topRight||g.bottomLeft||g.bottomRight?aa:Vu;var g;l.save(),(E.w!==f.w||E.h!==f.h)&&(l.beginPath(),R(l,Jo(E,o,f)),l.clip(),R(l,Jo(f,-o,E)),l.fillStyle=a,l.fill("evenodd")),l.beginPath(),R(l,Jo(f,o)),l.fillStyle=c,l.fill(),l.restore()}inRange(l,o,a){return tc(this,l,o,a)}inXRange(l,o){return tc(this,l,null,o)}inYRange(l,o){return tc(this,null,l,o)}getCenterPoint(l){const{x:o,y:a,base:c,horizontal:f}=this.getProps(["x","y","base","horizontal"],l);return{x:f?(o+c)/2:o,y:f?a:(a+c)/2}}getRange(l){return"x"===l?this.width/2:this.height/2}}Nc.id="bar",Nc.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},Nc.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var mu=Object.freeze({__proto__:null,ArcElement:So,LineElement:Bu,PointElement:fu,BarElement:Nc});function eh(g){if(g._decimated){const l=g._data;delete g._decimated,delete g._data,Object.defineProperty(g,"data",{value:l})}}function _h(g){g.data.datasets.forEach(l=>{eh(l)})}var wh={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(g,l,o)=>{if(!o.enabled)return void _h(g);const a=g.width;g.data.datasets.forEach((c,f)=>{const{_data:E,indexAxis:R}=c,O=g.getDatasetMeta(f),F=E||c.data;if("y"===To([R,g.options.indexAxis])||"line"!==O.type)return;const J=g.scales[O.xAxisID];if("linear"!==J.type&&"time"!==J.type||g.options.parsing)return;let Ee,{start:dt,count:Ft}=function(g,l){const o=l.length;let c,a=0;const{iScale:f}=g,{min:E,max:R,minDefined:O,maxDefined:F}=f.getUserBounds();return O&&(a=je(Bo(l,f.axis,E).lo,0,o-1)),c=F?je(Bo(l,f.axis,R).hi+1,a,o)-a:o-a,{start:a,count:c}}(O,F);if(Ft<=(o.threshold||4*a))eh(c);else{switch(Ct(E)&&(c._data=F,delete c.data,Object.defineProperty(c,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(Ae){this._data=Ae}})),o.algorithm){case"lttb":Ee=function(g,l,o,a,c){const f=c.samples||a;if(f>=o)return g.slice(l,l+o);const E=[],R=(o-2)/(f-2);let O=0;const F=l+o-1;let dt,Ft,qt,Ee,Ae,J=l;for(E[O++]=g[J],dt=0;dt<f-2;dt++){let Si,We=0,ze=0;const an=Math.floor((dt+1)*R)+1+l,Gi=Math.min(Math.floor((dt+2)*R)+1,o)+l,Ki=Gi-an;for(Si=an;Si<Gi;Si++)We+=g[Si].x,ze+=g[Si].y;We/=Ki,ze/=Ki;const pn=Math.floor(dt*R)+1+l,mn=Math.min(Math.floor((dt+1)*R)+1,o)+l,{x:wn,y:Pn}=g[J];for(qt=Ee=-1,Si=pn;Si<mn;Si++)Ee=.5*Math.abs((wn-We)*(g[Si].y-Pn)-(wn-g[Si].x)*(ze-Pn)),Ee>qt&&(qt=Ee,Ft=g[Si],Ae=Si);E[O++]=Ft,J=Ae}return E[O++]=g[F],E}(F,dt,Ft,a,o);break;case"min-max":Ee=function(g,l,o,a){let E,R,O,F,J,dt,Ft,qt,Ee,Ae,c=0,f=0;const We=[],Si=g[l].x,Gi=g[l+o-1].x-Si;for(E=l;E<l+o;++E){R=g[E],O=(R.x-Si)/Gi*a,F=R.y;const Ki=0|O;if(Ki===J)F<Ee?(Ee=F,dt=E):F>Ae&&(Ae=F,Ft=E),c=(f*c+R.x)/++f;else{const pn=E-1;if(!Ct(dt)&&!Ct(Ft)){const mn=Math.min(dt,Ft),wn=Math.max(dt,Ft);mn!==qt&&mn!==pn&&We.push(Lm(km({},g[mn]),{x:c})),wn!==qt&&wn!==pn&&We.push(Lm(km({},g[wn]),{x:c}))}E>0&&pn!==qt&&We.push(g[pn]),We.push(R),J=Ki,f=0,Ee=Ae=F,dt=Ft=qt=E}}return We}(F,dt,Ft,a);break;default:throw new Error(`Unsupported decimation algorithm '${o.algorithm}'`)}c._decimated=Ee}})},destroy(g){_h(g)}};function Rh(g,l,o){const a=function(g){const l=g.options,o=l.fill;let a=Bt(o&&o.target,o);return void 0===a&&(a=!!l.backgroundColor),!1!==a&&null!==a&&(!0===a?"origin":a)}(g);if(st(a))return!isNaN(a.value)&&a;let c=parseFloat(a);return gt(c)&&Math.floor(c)===c?(("-"===a[0]||"+"===a[0])&&(c=l+c),!(c===l||c<0||c>=o)&&c):["origin","start","end","stack","shape"].indexOf(a)>=0&&a}class fa{constructor(l){this.x=l.x,this.y=l.y,this.radius=l.radius}pathSegment(l,o,a){const{x:c,y:f,radius:E}=this;return l.arc(c,f,E,(o=o||{start:0,end:jt}).end,o.start,!0),!a.bounds}interpolate(l){const{x:o,y:a,radius:c}=this,f=l.angle;return{x:o+Math.cos(f)*c,y:a+Math.sin(f)*c,angle:f}}}function nh(g,l,o){for(;l>g;l--){const a=o[l];if(!isNaN(a.x)&&!isNaN(a.y))break}return l}function zu(g,l,o){const a=[];for(let c=0;c<o.length;c++){const f=o[c],{first:E,last:R,point:O}=Fc(f,l,"x");if(!(!O||E&&R))if(E)a.unshift(O);else if(g.push(O),!R)break}g.push(...a)}function Fc(g,l,o){const a=g.interpolate(l,o);if(!a)return{};const c=a[o],f=g.segments,E=g.points;let R=!1,O=!1;for(let F=0;F<f.length;F++){const J=f[F],dt=E[J.start][o],Ft=E[J.end][o];if(_i(c,dt,Ft)){R=c===dt,O=c===Ft;break}}return{first:R,last:O,point:a}}function ju(g){const{chart:l,fill:o,line:a}=g;if(gt(o))return function(g,l){const o=g.getDatasetMeta(l);return o&&g.isDatasetVisible(l)?o.dataset:null}(l,o);if("stack"===o)return function(g){const{scale:l,index:o,line:a}=g,c=[],f=a.segments,E=a.points,R=function(g,l){const o=[],a=g.getMatchingVisibleMetas("line");for(let c=0;c<a.length;c++){const f=a[c];if(f.index===l)break;f.hidden||o.unshift(f.dataset)}return o}(l,o);R.push(Dh({x:null,y:l.bottom},a));for(let O=0;O<f.length;O++){const F=f[O];for(let J=F.start;J<=F.end;J++)zu(c,E[J],R)}return new Bu({points:c,options:{}})}(g);if("shape"===o)return!0;const c=function(g){return(g.scale||{}).getPointPositionForValue?function(g){const{scale:l,fill:o}=g,a=l.options,c=l.getLabels().length,f=[],E=a.reverse?l.max:l.min;let O,F,J;if(J="start"===o?E:"end"===o?a.reverse?l.min:l.max:st(o)?o.value:l.getBaseValue(),a.grid.circular)return F=l.getPointPositionForValue(0,E),new fa({x:F.x,y:F.y,radius:l.getDistanceFromCenterForValue(J)});for(O=0;O<c;++O)f.push(l.getPointPositionForValue(O,J));return f}(g):function(g){const{scale:l={},fill:o}=g;let c,a=null;return"start"===o?a=l.bottom:"end"===o?a=l.top:st(o)?a=l.getPixelForValue(o.value):l.getBasePixel&&(a=l.getBasePixel()),gt(a)?(c=l.isHorizontal(),{x:c?a:null,y:c?null:a}):null}(g)}(g);return c instanceof fa?c:Dh(c,a)}function Dh(g,l){let o=[],a=!1;return bt(g)?(a=!0,o=g):o=function(g,l){const{x:o=null,y:a=null}=g||{},c=l.points,f=[];return l.segments.forEach(({start:E,end:R})=>{R=nh(E,R,c);const O=c[E],F=c[R];null!==a?(f.push({x:O.x,y:a}),f.push({x:F.x,y:a})):null!==o&&(f.push({x:o,y:O.y}),f.push({x:o,y:F.y}))}),f}(g,l),o.length?new Bu({points:o,options:{tension:0},_loop:a,_fullLoop:a}):null}function Wo(g,l,o){let c=g[l].fill;const f=[l];let E;if(!o)return c;for(;!1!==c&&-1===f.indexOf(c);){if(!gt(c))return c;if(E=g[c],!E)return!1;if(E.visible)return c;f.push(c),c=E.fill}return!1}function Ih(g,l,o){g.beginPath(),l.path(g),g.lineTo(l.last().x,o),g.lineTo(l.first().x,o),g.closePath(),g.clip()}function vu(g,l,o,a){if(a)return;let c=l[g],f=o[g];return"angle"===g&&(c=xe(c),f=xe(f)),{property:g,start:c,end:f}}function ec(g,l,o,a){return g&&l?a(g[o],l[o]):g?g[o]:l?l[o]:0}function bu(g,l,o){const{top:a,bottom:c}=l.chart.chartArea,{property:f,start:E,end:R}=o||{};"x"===f&&(g.beginPath(),g.rect(E,a,R-E,c-a),g.clip())}function yu(g,l,o,a){const c=l.interpolate(o,a);c&&g.lineTo(c.x,c.y)}function rh(g,l){const{line:o,target:a,property:c,color:f,scale:E}=l,R=function(g,l,o){const a=g.segments,c=g.points,f=l.points,E=[];for(const R of a){let{start:O,end:F}=R;F=nh(O,F,c);const J=vu(o,c[O],c[F],R.loop);if(!l.segments){E.push({source:R,target:J,start:c[O],end:c[F]});continue}const dt=Bs(l,J);for(const Ft of dt){const qt=vu(o,f[Ft.start],f[Ft.end],Ft.loop),Ee=gs(R,c,qt);for(const Ae of Ee)E.push({source:Ae,target:Ft,start:{[o]:ec(J,qt,"start",Math.max)},end:{[o]:ec(J,qt,"end",Math.min)}})}}return E}(o,a,c);for(const{source:O,target:F,start:J,end:dt}of R){const{style:{backgroundColor:Ft=f}={}}=O,qt=!0!==a;g.save(),g.fillStyle=Ft,bu(g,E,qt&&vu(c,J,dt)),g.beginPath();const Ee=!!o.pathSegment(g,O);let Ae;if(qt){Ee?g.closePath():yu(g,a,dt,c);const We=!!a.pathSegment(g,F,{move:Ee,reverse:!0});Ae=Ee&&We,Ae||yu(g,a,J,c)}g.closePath(),g.fill(Ae?"evenodd":"nonzero"),g.restore()}}function eu(g,l,o){const a=ju(l),{line:c,scale:f,axis:E}=l,R=c.options,O=R.fill,F=R.backgroundColor,{above:J=F,below:dt=F}=O||{};a&&c.points.length&&(Io(g,o),function(g,l){const{line:o,target:a,above:c,below:f,area:E,scale:R}=l,O=o._loop?"angle":l.axis;g.save(),"x"===O&&f!==c&&(Ih(g,a,E.top),rh(g,{line:o,target:a,color:c,scale:R,property:O}),g.restore(),g.save(),Ih(g,a,E.bottom)),rh(g,{line:o,target:a,color:f,scale:R,property:O}),g.restore()}(g,{line:c,target:a,above:J,below:dt,area:o,scale:f,axis:E}),Ka(g))}var oh={id:"filler",afterDatasetsUpdate(g,l,o){const a=(g.data.datasets||[]).length,c=[];let f,E,R,O;for(E=0;E<a;++E)f=g.getDatasetMeta(E),R=f.dataset,O=null,R&&R.options&&R instanceof Bu&&(O={visible:g.isDatasetVisible(E),index:E,fill:Rh(R,E,a),chart:g,axis:f.controller.options.indexAxis,scale:f.vScale,line:R}),f.$filler=O,c.push(O);for(E=0;E<a;++E)O=c[E],O&&!1!==O.fill&&(O.fill=Wo(c,E,o.propagate))},beforeDraw(g,l,o){const a="beforeDraw"===o.drawTime,c=g.getSortedVisibleDatasetMetas(),f=g.chartArea;for(let E=c.length-1;E>=0;--E){const R=c[E].$filler;!R||(R.line.updateControlPoints(f,R.axis),a&&eu(g.ctx,R,f))}},beforeDatasetsDraw(g,l,o){if("beforeDatasetsDraw"!==o.drawTime)return;const a=g.getSortedVisibleDatasetMetas();for(let c=a.length-1;c>=0;--c){const f=a[c].$filler;f&&eu(g.ctx,f,g.chartArea)}},beforeDatasetDraw(g,l,o){const a=l.meta.$filler;!a||!1===a.fill||"beforeDatasetDraw"!==o.drawTime||eu(g.ctx,a,g.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Yu=(g,l)=>{let{boxHeight:o=l,boxWidth:a=l}=g;return g.usePointStyle&&(o=Math.min(o,l),a=Math.min(a,l)),{boxWidth:a,boxHeight:o,itemHeight:Math.max(l,o)}};class bc extends ea{constructor(l){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=l.chart,this.options=l.options,this.ctx=l.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(l,o,a){this.maxWidth=l,this.maxHeight=o,this._margins=a,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const l=this.options.labels||{};let o=ut(l.generateLabels,[this.chart],this)||[];l.filter&&(o=o.filter(a=>l.filter(a,this.chart.data))),l.sort&&(o=o.sort((a,c)=>l.sort(a,c,this.chart.data))),this.options.reverse&&o.reverse(),this.legendItems=o}fit(){const{options:l,ctx:o}=this;if(!l.display)return void(this.width=this.height=0);const a=l.labels,c=ho(a.font),f=c.size,E=this._computeTitleHeight(),{boxWidth:R,itemHeight:O}=Yu(a,f);let F,J;o.font=c.string,this.isHorizontal()?(F=this.maxWidth,J=this._fitRows(E,f,R,O)+10):(J=this.maxHeight,F=this._fitCols(E,f,R,O)+10),this.width=Math.min(F,l.maxWidth||this.maxWidth),this.height=Math.min(J,l.maxHeight||this.maxHeight)}_fitRows(l,o,a,c){const{ctx:f,maxWidth:E,options:{labels:{padding:R}}}=this,O=this.legendHitBoxes=[],F=this.lineWidths=[0],J=c+R;let dt=l;f.textAlign="left",f.textBaseline="middle";let Ft=-1,qt=-J;return this.legendItems.forEach((Ee,Ae)=>{const We=a+o/2+f.measureText(Ee.text).width;(0===Ae||F[F.length-1]+We+2*R>E)&&(dt+=J,F[F.length-(Ae>0?0:1)]=0,qt+=J,Ft++),O[Ae]={left:0,top:qt,row:Ft,width:We,height:c},F[F.length-1]+=We+R}),dt}_fitCols(l,o,a,c){const{ctx:f,maxHeight:E,options:{labels:{padding:R}}}=this,O=this.legendHitBoxes=[],F=this.columnSizes=[],J=E-l;let dt=R,Ft=0,qt=0,Ee=0,Ae=0;return this.legendItems.forEach((We,ze)=>{const Si=a+o/2+f.measureText(We.text).width;ze>0&&qt+c+2*R>J&&(dt+=Ft+R,F.push({width:Ft,height:qt}),Ee+=Ft+R,Ae++,Ft=qt=0),O[ze]={left:Ee,top:qt,col:Ae,width:Si,height:c},Ft=Math.max(Ft,Si),qt+=c+R}),dt+=Ft,F.push({width:Ft,height:qt}),dt}adjustHitBoxes(){if(!this.options.display)return;const l=this._computeTitleHeight(),{legendHitBoxes:o,options:{align:a,labels:{padding:c},rtl:f}}=this,E=ro(f,this.left,this.width);if(this.isHorizontal()){let R=0,O=pt(a,this.left+c,this.right-this.lineWidths[R]);for(const F of o)R!==F.row&&(R=F.row,O=pt(a,this.left+c,this.right-this.lineWidths[R])),F.top+=this.top+l+c,F.left=E.leftForLtr(E.x(O),F.width),O+=F.width+c}else{let R=0,O=pt(a,this.top+l+c,this.bottom-this.columnSizes[R].height);for(const F of o)F.col!==R&&(R=F.col,O=pt(a,this.top+l+c,this.bottom-this.columnSizes[R].height)),F.top=O,F.left+=this.left+c,F.left=E.leftForLtr(E.x(F.left),F.width),O+=F.height+c}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const l=this.ctx;Io(l,this),this._draw(),Ka(l)}}_draw(){const{options:l,columnSizes:o,lineWidths:a,ctx:c}=this,{align:f,labels:E}=l,R=lr.color,O=ro(l.rtl,this.left,this.width),F=ho(E.font),{color:J,padding:dt}=E,Ft=F.size,qt=Ft/2;let Ee;this.drawTitle(),c.textAlign=O.textAlign("left"),c.textBaseline="middle",c.lineWidth=.5,c.font=F.string;const{boxWidth:Ae,boxHeight:We,itemHeight:ze}=Yu(E,Ft),Gi=this.isHorizontal(),Ki=this._computeTitleHeight();Ee=Gi?{x:pt(f,this.left+dt,this.right-a[0]),y:this.top+dt+Ki,line:0}:{x:this.left+dt,y:pt(f,this.top+Ki+dt,this.bottom-o[0].height),line:0},Vo(this.ctx,l.textDirection);const pn=ze+dt;this.legendItems.forEach((mn,wn)=>{c.strokeStyle=mn.fontColor||J,c.fillStyle=mn.fontColor||J;const Pn=c.measureText(mn.text).width,bn=O.textAlign(mn.textAlign||(mn.textAlign=E.textAlign)),Qi=Ae+qt+Pn;let Bn=Ee.x,dr=Ee.y;O.setWidth(this.width),Gi?wn>0&&Bn+Qi+dt>this.right&&(dr=Ee.y+=pn,Ee.line++,Bn=Ee.x=pt(f,this.left+dt,this.right-a[Ee.line])):wn>0&&dr+pn>this.bottom&&(Bn=Ee.x=Bn+o[Ee.line].width+dt,Ee.line++,dr=Ee.y=pt(f,this.top+Ki+dt,this.bottom-o[Ee.line].height)),function(mn,wn,Pn){if(isNaN(Ae)||Ae<=0||isNaN(We)||We<0)return;c.save();const bn=Bt(Pn.lineWidth,1);if(c.fillStyle=Bt(Pn.fillStyle,R),c.lineCap=Bt(Pn.lineCap,"butt"),c.lineDashOffset=Bt(Pn.lineDashOffset,0),c.lineJoin=Bt(Pn.lineJoin,"miter"),c.lineWidth=bn,c.strokeStyle=Bt(Pn.strokeStyle,R),c.setLineDash(Bt(Pn.lineDash,[])),E.usePointStyle){const Qi={radius:Ae*Math.SQRT2/2,pointStyle:Pn.pointStyle,rotation:Pn.rotation,borderWidth:bn},Bn=O.xPlus(mn,Ae/2);Do(c,Qi,Bn,wn+qt)}else{const Qi=wn+Math.max((Ft-We)/2,0),Bn=O.leftForLtr(mn,Ae),dr=ko(Pn.borderRadius);c.beginPath(),Object.values(dr).some(Ei=>0!==Ei)?aa(c,{x:Bn,y:Qi,w:Ae,h:We,radius:dr}):c.rect(Bn,Qi,Ae,We),c.fill(),0!==bn&&c.stroke()}c.restore()}(O.x(Bn),dr,mn),Bn=((g,l,o,a)=>g===(a?"left":"right")?o:"center"===g?(l+o)/2:l)(bn,Bn+Ae+qt,Gi?Bn+Qi:this.right,l.rtl),function(mn,wn,Pn){Zo(c,Pn.text,mn,wn+ze/2,F,{strikethrough:Pn.hidden,textAlign:O.textAlign(Pn.textAlign)})}(O.x(Bn),dr,mn),Gi?Ee.x+=Qi+dt:Ee.y+=pn}),La(this.ctx,l.textDirection)}drawTitle(){const l=this.options,o=l.title,a=ho(o.font),c=jr(o.padding);if(!o.display)return;const f=ro(l.rtl,this.left,this.width),E=this.ctx,R=o.position,F=c.top+a.size/2;let J,dt=this.left,Ft=this.width;if(this.isHorizontal())Ft=Math.max(...this.lineWidths),J=this.top+F,dt=pt(l.align,dt,this.right-Ft);else{const Ee=this.columnSizes.reduce((Ae,We)=>Math.max(Ae,We.height),0);J=F+pt(l.align,this.top,this.bottom-Ee-l.labels.padding-this._computeTitleHeight())}const qt=pt(R,dt,dt+Ft);E.textAlign=f.textAlign(Pt(R)),E.textBaseline="middle",E.strokeStyle=o.color,E.fillStyle=o.color,E.font=a.string,Zo(E,o.text,qt,J,a)}_computeTitleHeight(){const l=this.options.title,o=ho(l.font),a=jr(l.padding);return l.display?o.lineHeight+a.height:0}_getLegendItemAt(l,o){let a,c,f;if(_i(l,this.left,this.right)&&_i(o,this.top,this.bottom))for(f=this.legendHitBoxes,a=0;a<f.length;++a)if(c=f[a],_i(l,c.left,c.left+c.width)&&_i(o,c.top,c.top+c.height))return this.legendItems[a];return null}handleEvent(l){const o=this.options;if(!function(g,l){return!!("mousemove"===g&&(l.onHover||l.onLeave)||l.onClick&&("click"===g||"mouseup"===g))}(l.type,o))return;const a=this._getLegendItemAt(l.x,l.y);if("mousemove"===l.type){const c=this._hoveredItem,f=((g,l)=>null!==g&&null!==l&&g.datasetIndex===l.datasetIndex&&g.index===l.index)(c,a);c&&!f&&ut(o.onLeave,[l,c,this],this),this._hoveredItem=a,a&&!f&&ut(o.onHover,[l,a,this],this)}else a&&ut(o.onClick,[l,a,this],this)}}var yo={id:"legend",_element:bc,start(g,l,o){const a=g.legend=new bc({ctx:g.ctx,options:o,chart:g});bo.configure(g,a,o),bo.addBox(g,a)},stop(g){bo.removeBox(g,g.legend),delete g.legend},beforeUpdate(g,l,o){const a=g.legend;bo.configure(g,a,o),a.options=o},afterUpdate(g){const l=g.legend;l.buildLabels(),l.adjustHitBoxes()},afterEvent(g,l){l.replay||g.legend.handleEvent(l.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(g,l,o){const a=l.datasetIndex,c=o.chart;c.isDatasetVisible(a)?(c.hide(a),l.hidden=!0):(c.show(a),l.hidden=!1)},onHover:null,onLeave:null,labels:{color:g=>g.chart.options.color,boxWidth:40,padding:10,generateLabels(g){const l=g.data.datasets,{labels:{usePointStyle:o,pointStyle:a,textAlign:c,color:f}}=g.legend.options;return g._getSortedDatasetMetas().map(E=>{const R=E.controller.getStyle(o?0:void 0),O=jr(R.borderWidth);return{text:l[E.index].label,fillStyle:R.backgroundColor,fontColor:f,hidden:!E.visible,lineCap:R.borderCapStyle,lineDash:R.borderDash,lineDashOffset:R.borderDashOffset,lineJoin:R.borderJoinStyle,lineWidth:(O.width+O.height)/4,strokeStyle:R.borderColor,pointStyle:a||R.pointStyle,rotation:R.rotation,textAlign:c||R.textAlign,borderRadius:0,datasetIndex:E.index}},this)}},title:{color:g=>g.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:g=>!g.startsWith("on"),labels:{_scriptable:g=>!["generateLabels","filter","sort"].includes(g)}}};class Xu extends ea{constructor(l){super(),this.chart=l.chart,this.options=l.options,this.ctx=l.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(l,o){const a=this.options;if(this.left=0,this.top=0,!a.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=l,this.height=this.bottom=o;const c=bt(a.text)?a.text.length:1;this._padding=jr(a.padding);const f=c*ho(a.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=f:this.width=f}isHorizontal(){const l=this.options.position;return"top"===l||"bottom"===l}_drawArgs(l){const{top:o,left:a,bottom:c,right:f,options:E}=this,R=E.align;let F,J,dt,O=0;return this.isHorizontal()?(J=pt(R,a,f),dt=o+l,F=f-a):("left"===E.position?(J=a+l,dt=pt(R,c,o),O=-.5*St):(J=f-l,dt=pt(R,o,c),O=.5*St),F=c-o),{titleX:J,titleY:dt,maxWidth:F,rotation:O}}draw(){const l=this.ctx,o=this.options;if(!o.display)return;const a=ho(o.font),f=a.lineHeight/2+this._padding.top,{titleX:E,titleY:R,maxWidth:O,rotation:F}=this._drawArgs(f);Zo(l,o.text,0,0,a,{color:o.color,maxWidth:O,rotation:F,textAlign:Pt(o.align),textBaseline:"middle",translation:[E,R]})}}var yc={id:"title",_element:Xu,start(g,l,o){!function(g,l){const o=new Xu({ctx:g.ctx,options:l,chart:g});bo.configure(g,o,l),bo.addBox(g,o),g.titleBlock=o}(g,o)},stop(g){bo.removeBox(g,g.titleBlock),delete g.titleBlock},beforeUpdate(g,l,o){const a=g.titleBlock;bo.configure(g,a,o),a.options=o},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const nu=new WeakMap;var Ku={id:"subtitle",start(g,l,o){const a=new Xu({ctx:g.ctx,options:o,chart:g});bo.configure(g,a,o),bo.addBox(g,a),nu.set(g,a)},stop(g){bo.removeBox(g,nu.get(g)),nu.delete(g)},beforeUpdate(g,l,o){const a=nu.get(g);bo.configure(g,a,o),a.options=o},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Eu={average(g){if(!g.length)return!1;let l,o,a=0,c=0,f=0;for(l=0,o=g.length;l<o;++l){const E=g[l].element;if(E&&E.hasValue()){const R=E.tooltipPosition();a+=R.x,c+=R.y,++f}}return{x:a/f,y:c/f}},nearest(g,l){if(!g.length)return!1;let f,E,R,o=l.x,a=l.y,c=Number.POSITIVE_INFINITY;for(f=0,E=g.length;f<E;++f){const O=g[f].element;if(O&&O.hasValue()){const J=Zi(l,O.getCenterPoint());J<c&&(c=J,R=O)}}if(R){const O=R.tooltipPosition();o=O.x,a=O.y}return{x:o,y:a}}};function po(g,l){return l&&(bt(l)?Array.prototype.push.apply(g,l):g.push(l)),g}function vl(g){return("string"==typeof g||g instanceof String)&&g.indexOf("\n")>-1?g.split("\n"):g}function Bc(g,l){const{element:o,datasetIndex:a,index:c}=l,f=g.getDatasetMeta(a).controller,{label:E,value:R}=f.getLabelAndValue(c);return{chart:g,label:E,parsed:f.getParsed(c),raw:g.data.datasets[a].data[c],formattedValue:R,dataset:f.getDataset(),dataIndex:c,datasetIndex:a,element:o}}function vh(g,l){const o=g.chart.ctx,{body:a,footer:c,title:f}=g,{boxWidth:E,boxHeight:R}=l,O=ho(l.bodyFont),F=ho(l.titleFont),J=ho(l.footerFont),dt=f.length,Ft=c.length,qt=a.length,Ee=jr(l.padding);let Ae=Ee.height,We=0,ze=a.reduce((Gi,Ki)=>Gi+Ki.before.length+Ki.lines.length+Ki.after.length,0);ze+=g.beforeBody.length+g.afterBody.length,dt&&(Ae+=dt*F.lineHeight+(dt-1)*l.titleSpacing+l.titleMarginBottom),ze&&(Ae+=qt*(l.displayColors?Math.max(R,O.lineHeight):O.lineHeight)+(ze-qt)*O.lineHeight+(ze-1)*l.bodySpacing),Ft&&(Ae+=l.footerMarginTop+Ft*J.lineHeight+(Ft-1)*l.footerSpacing);let Si=0;const an=function(Gi){We=Math.max(We,o.measureText(Gi).width+Si)};return o.save(),o.font=F.string,rt(g.title,an),o.font=O.string,rt(g.beforeBody.concat(g.afterBody),an),Si=l.displayColors?E+2+l.boxPadding:0,rt(a,Gi=>{rt(Gi.before,an),rt(Gi.lines,an),rt(Gi.after,an)}),Si=0,o.font=J.string,rt(g.footer,an),o.restore(),We+=Ee.width,{width:We,height:Ae}}function C(g,l,o,a){const{x:c,width:f}=o,{width:E,chartArea:{left:R,right:O}}=g;let F="center";return"center"===a?F=c<=(R+O)/2?"left":"right":c<=f/2?F="left":c>=E-f/2&&(F="right"),function(g,l,o,a){const{x:c,width:f}=a,E=o.caretSize+o.caretPadding;if("left"===g&&c+f+E>l.width||"right"===g&&c-f-E<0)return!0}(F,g,l,o)&&(F="center"),F}function I(g,l,o){const a=o.yAlign||l.yAlign||function(g,l){const{y:o,height:a}=l;return o<a/2?"top":o>g.height-a/2?"bottom":"center"}(g,o);return{xAlign:o.xAlign||l.xAlign||C(g,l,o,a),yAlign:a}}function Y(g,l,o,a){const{caretSize:c,caretPadding:f,cornerRadius:E}=g,{xAlign:R,yAlign:O}=o,F=c+f,{topLeft:J,topRight:dt,bottomLeft:Ft,bottomRight:qt}=ko(E);let Ee=function(g,l){let{x:o,width:a}=g;return"right"===l?o-=a:"center"===l&&(o-=a/2),o}(l,R);const Ae=function(g,l,o){let{y:a,height:c}=g;return"top"===l?a+=o:a-="bottom"===l?c+o:c/2,a}(l,O,F);return"center"===O?"left"===R?Ee+=F:"right"===R&&(Ee-=F):"left"===R?Ee-=Math.max(J,Ft)+c:"right"===R&&(Ee+=Math.max(dt,qt)+c),{x:je(Ee,0,a.width-l.width),y:je(Ae,0,a.height-l.height)}}function ht(g,l,o){const a=jr(o.padding);return"center"===l?g.x+g.width/2:"right"===l?g.x+g.width-a.right:g.x+a.left}function wt(g){return po([],vl(g))}function $t(g,l){const o=l&&l.dataset&&l.dataset.tooltip&&l.dataset.tooltip.callbacks;return o?g.override(o):g}let Ie=(()=>{class g extends ea{constructor(o){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=o.chart||o._chart,this._chart=this.chart,this.options=o.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(o){this.options=o,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const o=this._cachedAnimations;if(o)return o;const a=this.chart,c=this.options.setContext(this.getContext()),f=c.enabled&&a.options.animation&&c.animations,E=new Za(this.chart,f);return f._cacheable&&(this._cachedAnimations=Object.freeze(E)),E}getContext(){return this.$context||(this.$context=function(g,l,o){return Yo(g,{tooltip:l,tooltipItems:o,type:"tooltip"})}(this.chart.getContext(),this,this._tooltipItems))}getTitle(o,a){const{callbacks:c}=a,f=c.beforeTitle.apply(this,[o]),E=c.title.apply(this,[o]),R=c.afterTitle.apply(this,[o]);let O=[];return O=po(O,vl(f)),O=po(O,vl(E)),O=po(O,vl(R)),O}getBeforeBody(o,a){return wt(a.callbacks.beforeBody.apply(this,[o]))}getBody(o,a){const{callbacks:c}=a,f=[];return rt(o,E=>{const R={before:[],lines:[],after:[]},O=$t(c,E);po(R.before,vl(O.beforeLabel.call(this,E))),po(R.lines,O.label.call(this,E)),po(R.after,vl(O.afterLabel.call(this,E))),f.push(R)}),f}getAfterBody(o,a){return wt(a.callbacks.afterBody.apply(this,[o]))}getFooter(o,a){const{callbacks:c}=a,f=c.beforeFooter.apply(this,[o]),E=c.footer.apply(this,[o]),R=c.afterFooter.apply(this,[o]);let O=[];return O=po(O,vl(f)),O=po(O,vl(E)),O=po(O,vl(R)),O}_createItems(o){const a=this._active,c=this.chart.data,f=[],E=[],R=[];let F,J,O=[];for(F=0,J=a.length;F<J;++F)O.push(Bc(this.chart,a[F]));return o.filter&&(O=O.filter((dt,Ft,qt)=>o.filter(dt,Ft,qt,c))),o.itemSort&&(O=O.sort((dt,Ft)=>o.itemSort(dt,Ft,c))),rt(O,dt=>{const Ft=$t(o.callbacks,dt);f.push(Ft.labelColor.call(this,dt)),E.push(Ft.labelPointStyle.call(this,dt)),R.push(Ft.labelTextColor.call(this,dt))}),this.labelColors=f,this.labelPointStyles=E,this.labelTextColors=R,this.dataPoints=O,O}update(o,a){const c=this.options.setContext(this.getContext()),f=this._active;let E,R=[];if(f.length){const O=Eu[c.position].call(this,f,this._eventPosition);R=this._createItems(c),this.title=this.getTitle(R,c),this.beforeBody=this.getBeforeBody(R,c),this.body=this.getBody(R,c),this.afterBody=this.getAfterBody(R,c),this.footer=this.getFooter(R,c);const F=this._size=vh(this,c),J=Object.assign({},O,F),dt=I(this.chart,c,J),Ft=Y(c,J,dt,this.chart);this.xAlign=dt.xAlign,this.yAlign=dt.yAlign,E={opacity:1,x:Ft.x,y:Ft.y,width:F.width,height:F.height,caretX:O.x,caretY:O.y}}else 0!==this.opacity&&(E={opacity:0});this._tooltipItems=R,this.$context=void 0,E&&this._resolveAnimations().update(this,E),o&&c.external&&c.external.call(this,{chart:this.chart,tooltip:this,replay:a})}drawCaret(o,a,c,f){const E=this.getCaretPosition(o,c,f);a.lineTo(E.x1,E.y1),a.lineTo(E.x2,E.y2),a.lineTo(E.x3,E.y3)}getCaretPosition(o,a,c){const{xAlign:f,yAlign:E}=this,{caretSize:R,cornerRadius:O}=c,{topLeft:F,topRight:J,bottomLeft:dt,bottomRight:Ft}=ko(O),{x:qt,y:Ee}=o,{width:Ae,height:We}=a;let ze,Si,an,Gi,Ki,pn;return"center"===E?(Ki=Ee+We/2,"left"===f?(ze=qt,Si=ze-R,Gi=Ki+R,pn=Ki-R):(ze=qt+Ae,Si=ze+R,Gi=Ki-R,pn=Ki+R),an=ze):(Si="left"===f?qt+Math.max(F,dt)+R:"right"===f?qt+Ae-Math.max(J,Ft)-R:this.caretX,"top"===E?(Gi=Ee,Ki=Gi-R,ze=Si-R,an=Si+R):(Gi=Ee+We,Ki=Gi+R,ze=Si+R,an=Si-R),pn=Gi),{x1:ze,x2:Si,x3:an,y1:Gi,y2:Ki,y3:pn}}drawTitle(o,a,c){const f=this.title,E=f.length;let R,O,F;if(E){const J=ro(c.rtl,this.x,this.width);for(o.x=ht(this,c.titleAlign,c),a.textAlign=J.textAlign(c.titleAlign),a.textBaseline="middle",R=ho(c.titleFont),O=c.titleSpacing,a.fillStyle=c.titleColor,a.font=R.string,F=0;F<E;++F)a.fillText(f[F],J.x(o.x),o.y+R.lineHeight/2),o.y+=R.lineHeight+O,F+1===E&&(o.y+=c.titleMarginBottom-O)}}_drawColorBox(o,a,c,f,E){const R=this.labelColors[c],O=this.labelPointStyles[c],{boxHeight:F,boxWidth:J,boxPadding:dt}=E,Ft=ho(E.bodyFont),qt=ht(this,"left",E),Ee=f.x(qt),We=a.y+(F<Ft.lineHeight?(Ft.lineHeight-F)/2:0);if(E.usePointStyle){const ze={radius:Math.min(J,F)/2,pointStyle:O.pointStyle,rotation:O.rotation,borderWidth:1},Si=f.leftForLtr(Ee,J)+J/2,an=We+F/2;o.strokeStyle=E.multiKeyBackground,o.fillStyle=E.multiKeyBackground,Do(o,ze,Si,an),o.strokeStyle=R.borderColor,o.fillStyle=R.backgroundColor,Do(o,ze,Si,an)}else{o.lineWidth=R.borderWidth||1,o.strokeStyle=R.borderColor,o.setLineDash(R.borderDash||[]),o.lineDashOffset=R.borderDashOffset||0;const ze=f.leftForLtr(Ee,J-dt),Si=f.leftForLtr(f.xPlus(Ee,1),J-dt-2),an=ko(R.borderRadius);Object.values(an).some(Gi=>0!==Gi)?(o.beginPath(),o.fillStyle=E.multiKeyBackground,aa(o,{x:ze,y:We,w:J,h:F,radius:an}),o.fill(),o.stroke(),o.fillStyle=R.backgroundColor,o.beginPath(),aa(o,{x:Si,y:We+1,w:J-2,h:F-2,radius:an}),o.fill()):(o.fillStyle=E.multiKeyBackground,o.fillRect(ze,We,J,F),o.strokeRect(ze,We,J,F),o.fillStyle=R.backgroundColor,o.fillRect(Si,We+1,J-2,F-2))}o.fillStyle=this.labelTextColors[c]}drawBody(o,a,c){const{body:f}=this,{bodySpacing:E,bodyAlign:R,displayColors:O,boxHeight:F,boxWidth:J,boxPadding:dt}=c,Ft=ho(c.bodyFont);let qt=Ft.lineHeight,Ee=0;const Ae=ro(c.rtl,this.x,this.width),We=function(Pn){a.fillText(Pn,Ae.x(o.x+Ee),o.y+qt/2),o.y+=qt+E},ze=Ae.textAlign(R);let Si,an,Gi,Ki,pn,mn,wn;for(a.textAlign=R,a.textBaseline="middle",a.font=Ft.string,o.x=ht(this,ze,c),a.fillStyle=c.bodyColor,rt(this.beforeBody,We),Ee=O&&"right"!==ze?"center"===R?J/2+dt:J+2+dt:0,Ki=0,mn=f.length;Ki<mn;++Ki){for(Si=f[Ki],an=this.labelTextColors[Ki],a.fillStyle=an,rt(Si.before,We),Gi=Si.lines,O&&Gi.length&&(this._drawColorBox(a,o,Ki,Ae,c),qt=Math.max(Ft.lineHeight,F)),pn=0,wn=Gi.length;pn<wn;++pn)We(Gi[pn]),qt=Ft.lineHeight;rt(Si.after,We)}Ee=0,qt=Ft.lineHeight,rt(this.afterBody,We),o.y-=E}drawFooter(o,a,c){const f=this.footer,E=f.length;let R,O;if(E){const F=ro(c.rtl,this.x,this.width);for(o.x=ht(this,c.footerAlign,c),o.y+=c.footerMarginTop,a.textAlign=F.textAlign(c.footerAlign),a.textBaseline="middle",R=ho(c.footerFont),a.fillStyle=c.footerColor,a.font=R.string,O=0;O<E;++O)a.fillText(f[O],F.x(o.x),o.y+R.lineHeight/2),o.y+=R.lineHeight+c.footerSpacing}}drawBackground(o,a,c,f){const{xAlign:E,yAlign:R}=this,{x:O,y:F}=o,{width:J,height:dt}=c,{topLeft:Ft,topRight:qt,bottomLeft:Ee,bottomRight:Ae}=ko(f.cornerRadius);a.fillStyle=f.backgroundColor,a.strokeStyle=f.borderColor,a.lineWidth=f.borderWidth,a.beginPath(),a.moveTo(O+Ft,F),"top"===R&&this.drawCaret(o,a,c,f),a.lineTo(O+J-qt,F),a.quadraticCurveTo(O+J,F,O+J,F+qt),"center"===R&&"right"===E&&this.drawCaret(o,a,c,f),a.lineTo(O+J,F+dt-Ae),a.quadraticCurveTo(O+J,F+dt,O+J-Ae,F+dt),"bottom"===R&&this.drawCaret(o,a,c,f),a.lineTo(O+Ee,F+dt),a.quadraticCurveTo(O,F+dt,O,F+dt-Ee),"center"===R&&"left"===E&&this.drawCaret(o,a,c,f),a.lineTo(O,F+Ft),a.quadraticCurveTo(O,F,O+Ft,F),a.closePath(),a.fill(),f.borderWidth>0&&a.stroke()}_updateAnimationTarget(o){const a=this.chart,c=this.$animations,f=c&&c.x,E=c&&c.y;if(f||E){const R=Eu[o.position].call(this,this._active,this._eventPosition);if(!R)return;const O=this._size=vh(this,o),F=Object.assign({},R,this._size),J=I(a,o,F),dt=Y(o,F,J,a);(f._to!==dt.x||E._to!==dt.y)&&(this.xAlign=J.xAlign,this.yAlign=J.yAlign,this.width=O.width,this.height=O.height,this.caretX=R.x,this.caretY=R.y,this._resolveAnimations().update(this,dt))}}draw(o){const a=this.options.setContext(this.getContext());let c=this.opacity;if(!c)return;this._updateAnimationTarget(a);const f={width:this.width,height:this.height},E={x:this.x,y:this.y};c=Math.abs(c)<.001?0:c;const R=jr(a.padding);a.enabled&&(this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length)&&(o.save(),o.globalAlpha=c,this.drawBackground(E,o,f,a),Vo(o,a.textDirection),E.y+=R.top,this.drawTitle(E,o,a),this.drawBody(E,o,a),this.drawFooter(E,o,a),La(o,a.textDirection),o.restore())}getActiveElements(){return this._active||[]}setActiveElements(o,a){const c=this._active,f=o.map(({datasetIndex:O,index:F})=>{const J=this.chart.getDatasetMeta(O);if(!J)throw new Error("Cannot find a dataset at index "+O);return{datasetIndex:O,element:J.data[F],index:F}}),E=!fe(c,f),R=this._positionChanged(f,a);(E||R)&&(this._active=f,this._eventPosition=a,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(o,a,c=!0){if(a&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const f=this.options,E=this._active||[],R=this._getActiveElements(o,E,a,c),O=this._positionChanged(R,o),F=a||!fe(R,E)||O;return F&&(this._active=R,(f.enabled||f.external)&&(this._eventPosition={x:o.x,y:o.y},this.update(!0,a))),F}_getActiveElements(o,a,c,f){const E=this.options;if("mouseout"===o.type)return[];if(!f)return a;const R=this.chart.getElementsAtEventForMode(o,E.mode,E,c);return E.reverse&&R.reverse(),R}_positionChanged(o,a){const{caretX:c,caretY:f,options:E}=this,R=Eu[E.position].call(this,o,a);return!1!==R&&(c!==R.x||f!==R.y)}}return g.positioners=Eu,g})();var gi=Object.freeze({__proto__:null,Decimation:wh,Filler:oh,Legend:yo,SubTitle:Ku,Title:yc,Tooltip:{id:"tooltip",_element:Ie,positioners:Eu,afterInit(g,l,o){o&&(g.tooltip=new Ie({chart:g,options:o}))},beforeUpdate(g,l,o){g.tooltip&&g.tooltip.initialize(o)},reset(g,l,o){g.tooltip&&g.tooltip.initialize(o)},afterDraw(g){const l=g.tooltip,o={tooltip:l};!1!==g.notifyPlugins("beforeTooltipDraw",o)&&(l&&l.draw(g.ctx),g.notifyPlugins("afterTooltipDraw",o))},afterEvent(g,l){g.tooltip&&g.tooltip.handleEvent(l.event,l.replay,l.inChartArea)&&(l.changed=!0)},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(g,l)=>l.bodyFont.size,boxWidth:(g,l)=>l.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:Ht,title(g){if(g.length>0){const l=g[0],o=l.chart.data.labels,a=o?o.length:0;if(this&&this.options&&"dataset"===this.options.mode)return l.dataset.label||"";if(l.label)return l.label;if(a>0&&l.dataIndex<a)return o[l.dataIndex]}return""},afterTitle:Ht,beforeBody:Ht,beforeLabel:Ht,label(g){if(this&&this.options&&"dataset"===this.options.mode)return g.label+": "+g.formattedValue||g.formattedValue;let l=g.dataset.label||"";l&&(l+=": ");const o=g.formattedValue;return Ct(o)||(l+=o),l},labelColor(g){const o=g.chart.getDatasetMeta(g.datasetIndex).controller.getStyle(g.dataIndex);return{borderColor:o.borderColor,backgroundColor:o.backgroundColor,borderWidth:o.borderWidth,borderDash:o.borderDash,borderDashOffset:o.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(g){const o=g.chart.getDatasetMeta(g.datasetIndex).controller.getStyle(g.dataIndex);return{pointStyle:o.pointStyle,rotation:o.rotation}},afterLabel:Ht,afterBody:Ht,beforeFooter:Ht,footer:Ht,afterFooter:Ht}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:g=>"filter"!==g&&"itemSort"!==g&&"external"!==g,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]}});class tn extends pa{constructor(l){super(l),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(l){const o=this._addedLabels;if(o.length){const a=this.getLabels();for(const{index:c,label:f}of o)a[c]===f&&a.splice(c,1);this._addedLabels=[]}super.init(l)}parse(l,o){if(Ct(l))return null;const a=this.getLabels();return((g,l)=>null===g?null:je(Math.round(g),0,l))(o=isFinite(o)&&a[o]===l?o:function(g,l,o,a){const c=g.indexOf(l);return-1===c?((g,l,o,a)=>("string"==typeof l?(o=g.push(l)-1,a.unshift({index:o,label:l})):isNaN(l)&&(o=null),o))(g,l,o,a):c!==g.lastIndexOf(l)?o:c}(a,l,Bt(o,l),this._addedLabels),a.length-1)}determineDataLimits(){const{minDefined:l,maxDefined:o}=this.getUserBounds();let{min:a,max:c}=this.getMinMax(!0);"ticks"===this.options.bounds&&(l||(a=0),o||(c=this.getLabels().length-1)),this.min=a,this.max=c}buildTicks(){const l=this.min,o=this.max,a=this.options.offset,c=[];let f=this.getLabels();f=0===l&&o===f.length-1?f:f.slice(l,o+1),this._valueRange=Math.max(f.length-(a?0:1),1),this._startValue=this.min-(a?.5:0);for(let E=l;E<=o;E++)c.push({value:E});return c}getLabelForValue(l){const o=this.getLabels();return l>=0&&l<o.length?o[l]:l}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(l){return"number"!=typeof l&&(l=this.parse(l)),null===l?NaN:this.getPixelForDecimal((l-this._startValue)/this._valueRange)}getPixelForTick(l){const o=this.ticks;return l<0||l>o.length-1?null:this.getPixelForValue(o[l].value)}getValueForPixel(l){return Math.round(this._startValue+this.getDecimalForPixel(l)*this._valueRange)}getBasePixel(){return this.bottom}}function Tn(g,l,{horizontal:o,minRotation:a}){const c=wi(a),f=(o?Math.sin(c):Math.cos(c))||.001;return Math.min(l/f,.75*l*(""+g).length)}tn.id="category",tn.defaults={ticks:{callback:tn.prototype.getLabelForValue}};class cn extends pa{constructor(l){super(l),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(l,o){return Ct(l)||("number"==typeof l||l instanceof Number)&&!isFinite(+l)?null:+l}handleTickRangeOptions(){const{beginAtZero:l}=this.options,{minDefined:o,maxDefined:a}=this.getUserBounds();let{min:c,max:f}=this;const E=O=>c=o?c:O,R=O=>f=a?f:O;if(l){const O=me(c),F=me(f);O<0&&F<0?R(0):O>0&&F>0&&E(0)}if(c===f){let O=1;(f>=Number.MAX_SAFE_INTEGER||c<=Number.MIN_SAFE_INTEGER)&&(O=Math.abs(.05*f)),R(f+O),l||E(c-O)}this.min=c,this.max=f}getTickLimit(){const l=this.options.ticks;let c,{maxTicksLimit:o,stepSize:a}=l;return a?(c=Math.ceil(this.max/a)-Math.floor(this.min/a)+1,c>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${a} would result generating up to ${c} ticks. Limiting to 1000.`),c=1e3)):(c=this.computeTickLimit(),o=o||11),o&&(c=Math.min(o,c)),c}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const l=this.options,o=l.ticks;let a=this.getTickLimit();a=Math.max(2,a);const E=function(g,l){const o=[],{bounds:c,step:f,min:E,max:R,precision:O,count:F,maxTicks:J,maxDigits:dt,includeBounds:Ft}=g,qt=f||1,Ee=J-1,{min:Ae,max:We}=l,ze=!Ct(E),Si=!Ct(R),an=!Ct(F),Gi=(We-Ae)/(dt+1);let pn,mn,wn,Pn,Ki=ye((We-Ae)/Ee/qt)*qt;if(Ki<1e-14&&!ze&&!Si)return[{value:Ae},{value:We}];Pn=Math.ceil(We/Ki)-Math.floor(Ae/Ki),Pn>Ee&&(Ki=ye(Pn*Ki/Ee/qt)*qt),Ct(O)||(pn=Math.pow(10,O),Ki=Math.ceil(Ki*pn)/pn),"ticks"===c?(mn=Math.floor(Ae/Ki)*Ki,wn=Math.ceil(We/Ki)*Ki):(mn=Ae,wn=We),ze&&Si&&f&&function(g,l){const o=Math.round(g);return o-l<=g&&o+l>=g}((R-E)/f,Ki/1e3)?(Pn=Math.round(Math.min((R-E)/Ki,J)),Ki=(R-E)/Pn,mn=E,wn=R):an?(mn=ze?E:mn,wn=Si?R:wn,Pn=F-1,Ki=(wn-mn)/Pn):(Pn=(wn-mn)/Ki,Pn=ti(Pn,Math.round(Pn),Ki/1e3)?Math.round(Pn):Math.ceil(Pn));const bn=Math.max(dn(Ki),dn(mn));pn=Math.pow(10,Ct(O)?bn:O),mn=Math.round(mn*pn)/pn,wn=Math.round(wn*pn)/pn;let Qi=0;for(ze&&(Ft&&mn!==E?(o.push({value:E}),mn<E&&Qi++,ti(Math.round((mn+Qi*Ki)*pn)/pn,E,Tn(E,Gi,g))&&Qi++):mn<E&&Qi++);Qi<Pn;++Qi)o.push({value:Math.round((mn+Qi*Ki)*pn)/pn});return Si&&Ft&&wn!==R?o.length&&ti(o[o.length-1].value,R,Tn(R,Gi,g))?o[o.length-1].value=R:o.push({value:R}):(!Si||wn===R)&&o.push({value:wn}),o}({maxTicks:a,bounds:l.bounds,min:l.min,max:l.max,precision:o.precision,step:o.stepSize,count:o.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:o.minRotation||0,includeBounds:!1!==o.includeBounds},this._range||this);return"ticks"===l.bounds&&Pi(E,this,"value"),l.reverse?(E.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),E}configure(){const l=this.ticks;let o=this.min,a=this.max;if(super.configure(),this.options.offset&&l.length){const c=(a-o)/Math.max(l.length-1,1)/2;o-=c,a+=c}this._startValue=o,this._endValue=a,this._valueRange=a-o}getLabelForValue(l){return er(l,this.chart.options.locale,this.options.ticks.format)}}class En extends cn{determineDataLimits(){const{min:l,max:o}=this.getMinMax(!0);this.min=gt(l)?l:0,this.max=gt(o)?o:1,this.handleTickRangeOptions()}computeTickLimit(){const l=this.isHorizontal(),o=l?this.width:this.height,a=wi(this.options.ticks.minRotation),c=(l?Math.sin(a):Math.cos(a))||.001,f=this._resolveTickFontOptions(0);return Math.ceil(o/Math.min(40,f.lineHeight/c))}getPixelForValue(l){return null===l?NaN:this.getPixelForDecimal((l-this._startValue)/this._valueRange)}getValueForPixel(l){return this._startValue+this.getDecimalForPixel(l)*this._valueRange}}function Vn(g){return g/Math.pow(10,Math.floor(re(g)))==1}En.id="linear",En.defaults={ticks:{callback:Xc.formatters.numeric}};class fr extends pa{constructor(l){super(l),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(l,o){const a=cn.prototype.parse.apply(this,[l,o]);if(0!==a)return gt(a)&&a>0?a:null;this._zero=!0}determineDataLimits(){const{min:l,max:o}=this.getMinMax(!0);this.min=gt(l)?Math.max(0,l):null,this.max=gt(o)?Math.max(0,o):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:l,maxDefined:o}=this.getUserBounds();let a=this.min,c=this.max;const f=O=>a=l?a:O,E=O=>c=o?c:O,R=(O,F)=>Math.pow(10,Math.floor(re(O))+F);a===c&&(a<=0?(f(1),E(10)):(f(R(a,-1)),E(R(c,1)))),a<=0&&f(R(c,-1)),c<=0&&E(R(a,1)),this._zero&&this.min!==this._suggestedMin&&a===R(this.min,0)&&f(R(a,-1)),this.min=a,this.max=c}buildTicks(){const l=this.options,a=function(g,l){const o=Math.floor(re(l.max)),a=Math.ceil(l.max/Math.pow(10,o)),c=[];let f=lt(g.min,Math.pow(10,Math.floor(re(l.min)))),E=Math.floor(re(f)),R=Math.floor(f/Math.pow(10,E)),O=E<0?Math.pow(10,Math.abs(E)):1;do{c.push({value:f,major:Vn(f)}),++R,10===R&&(R=1,++E,O=E>=0?1:O),f=Math.round(R*Math.pow(10,E)*O)/O}while(E<o||E===o&&R<a);const F=lt(g.max,f);return c.push({value:F,major:Vn(f)}),c}({min:this._userMin,max:this._userMax},this);return"ticks"===l.bounds&&Pi(a,this,"value"),l.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}getLabelForValue(l){return void 0===l?"0":er(l,this.chart.options.locale,this.options.ticks.format)}configure(){const l=this.min;super.configure(),this._startValue=re(l),this._valueRange=re(this.max)-re(l)}getPixelForValue(l){return(void 0===l||0===l)&&(l=this.min),null===l||isNaN(l)?NaN:this.getPixelForDecimal(l===this.min?0:(re(l)-this._startValue)/this._valueRange)}getValueForPixel(l){const o=this.getDecimalForPixel(l);return Math.pow(10,this._startValue+o*this._valueRange)}}function io(g){const l=g.ticks;if(l.display&&g.display){const o=jr(l.backdropPadding);return Bt(l.font&&l.font.size,lr.font.size)+o.height}return 0}function ss(g,l,o){return o=bt(o)?o:[o],{w:ks(g,l.string,o),h:o.length*l.lineHeight}}function zo(g,l,o,a,c){return g===a||g===c?{start:l-o/2,end:l+o/2}:g<a||g>c?{start:l-o,end:l}:{start:l,end:l+o}}function Ya(g,l,o,a,c){const f=Math.abs(Math.sin(o)),E=Math.abs(Math.cos(o));let R=0,O=0;a.start<l.l?(R=(l.l-a.start)/f,g.l=Math.min(g.l,l.l-R)):a.end>l.r&&(R=(a.end-l.r)/f,g.r=Math.max(g.r,l.r+R)),c.start<l.t?(O=(l.t-c.start)/E,g.t=Math.min(g.t,l.t-O)):c.end>l.b&&(O=(c.end-l.b)/E,g.b=Math.max(g.b,l.b+O))}function Kr(g){return 0===g||180===g?"center":g<180?"left":"right"}function zs(g,l,o){return"right"===o?g-=l:"center"===o&&(g-=l/2),g}function Os(g,l,o){return 90===o||270===o?g-=l/2:(o>270||o<90)&&(g-=l),g}function H(g,l,o,a){const{ctx:c}=g;if(o)c.arc(g.xCenter,g.yCenter,l,0,jt);else{let f=g.getPointPosition(0,l);c.moveTo(f.x,f.y);for(let E=1;E<a;E++)f=g.getPointPosition(E,l),c.lineTo(f.x,f.y)}}fr.id="logarithmic",fr.defaults={ticks:{callback:Xc.formatters.logarithmic,major:{enabled:!0}}};class mt extends cn{constructor(l){super(l),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const l=this._padding=jr(io(this.options)/2),o=this.width=this.maxWidth-l.width,a=this.height=this.maxHeight-l.height;this.xCenter=Math.floor(this.left+o/2+l.left),this.yCenter=Math.floor(this.top+a/2+l.top),this.drawingArea=Math.floor(Math.min(o,a)/2)}determineDataLimits(){const{min:l,max:o}=this.getMinMax(!1);this.min=gt(l)&&!isNaN(l)?l:0,this.max=gt(o)&&!isNaN(o)?o:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/io(this.options))}generateTickLabels(l){cn.prototype.generateTickLabels.call(this,l),this._pointLabels=this.getLabels().map((o,a)=>{const c=ut(this.options.pointLabels.callback,[o,a],this);return c||0===c?c:""}).filter((o,a)=>this.chart.getDataVisibility(a))}fit(){const l=this.options;l.display&&l.pointLabels.display?function(g){const l={l:g.left+g._padding.left,r:g.right-g._padding.right,t:g.top+g._padding.top,b:g.bottom-g._padding.bottom},o=Object.assign({},l),a=[],c=[],f=g._pointLabels.length,E=g.options.pointLabels,R=E.centerPointLabels?St/f:0;for(let O=0;O<f;O++){const F=E.setContext(g.getPointLabelContext(O));c[O]=F.padding;const J=g.getPointPosition(O,g.drawingArea+c[O],R),dt=ho(F.font),Ft=ss(g.ctx,dt,g._pointLabels[O]);a[O]=Ft;const qt=xe(g.getIndexAngle(O)+R),Ee=Math.round(yi(qt));Ya(o,l,qt,zo(Ee,J.x,Ft.w,0,180),zo(Ee,J.y,Ft.h,90,270))}g.setCenterPoint(l.l-o.l,o.r-l.r,l.t-o.t,o.b-l.b),g._pointLabelItems=function(g,l,o){const a=[],c=g._pointLabels.length,f=g.options,E=io(f)/2,R=g.drawingArea,O=f.pointLabels.centerPointLabels?St/c:0;for(let F=0;F<c;F++){const J=g.getPointPosition(F,R+E+o[F],O),dt=Math.round(yi(xe(J.angle+te))),Ft=l[F],qt=Os(J.y,Ft.h,dt),Ee=Kr(dt),Ae=zs(J.x,Ft.w,Ee);a.push({x:J.x,y:qt,textAlign:Ee,left:Ae,top:qt,right:Ae+Ft.w,bottom:qt+Ft.h})}return a}(g,a,c)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(l,o,a,c){this.xCenter+=Math.floor((l-o)/2),this.yCenter+=Math.floor((a-c)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(l,o,a,c))}getIndexAngle(l){return xe(l*(jt/(this._pointLabels.length||1))+wi(this.options.startAngle||0))}getDistanceFromCenterForValue(l){if(Ct(l))return NaN;const o=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-l)*o:(l-this.min)*o}getValueForDistanceFromCenter(l){if(Ct(l))return NaN;const o=l/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-o:this.min+o}getPointLabelContext(l){const o=this._pointLabels||[];if(l>=0&&l<o.length){const a=o[l];return function(g,l,o){return Yo(g,{label:o,index:l,type:"pointLabel"})}(this.getContext(),l,a)}}getPointPosition(l,o,a=0){const c=this.getIndexAngle(l)-te+a;return{x:Math.cos(c)*o+this.xCenter,y:Math.sin(c)*o+this.yCenter,angle:c}}getPointPositionForValue(l,o){return this.getPointPosition(l,this.getDistanceFromCenterForValue(o))}getBasePosition(l){return this.getPointPositionForValue(l||0,this.getBaseValue())}getPointLabelPosition(l){const{left:o,top:a,right:c,bottom:f}=this._pointLabelItems[l];return{left:o,top:a,right:c,bottom:f}}drawBackground(){const{backgroundColor:l,grid:{circular:o}}=this.options;if(l){const a=this.ctx;a.save(),a.beginPath(),H(this,this.getDistanceFromCenterForValue(this._endValue),o,this._pointLabels.length),a.closePath(),a.fillStyle=l,a.fill(),a.restore()}}drawGrid(){const l=this.ctx,o=this.options,{angleLines:a,grid:c}=o,f=this._pointLabels.length;let E,R,O;if(o.pointLabels.display&&function(g,l){const{ctx:o,options:{pointLabels:a}}=g;for(let c=l-1;c>=0;c--){const f=a.setContext(g.getPointLabelContext(c)),E=ho(f.font),{x:R,y:O,textAlign:F,left:J,top:dt,right:Ft,bottom:qt}=g._pointLabelItems[c],{backdropColor:Ee}=f;if(!Ct(Ee)){const Ae=jr(f.backdropPadding);o.fillStyle=Ee,o.fillRect(J-Ae.left,dt-Ae.top,Ft-J+Ae.width,qt-dt+Ae.height)}Zo(o,g._pointLabels[c],R,O+E.lineHeight/2,E,{color:f.color,textAlign:F,textBaseline:"middle"})}}(this,f),c.display&&this.ticks.forEach((F,J)=>{0!==J&&(R=this.getDistanceFromCenterForValue(F.value),function(g,l,o,a){const c=g.ctx,f=l.circular,{color:E,lineWidth:R}=l;!f&&!a||!E||!R||o<0||(c.save(),c.strokeStyle=E,c.lineWidth=R,c.setLineDash(l.borderDash),c.lineDashOffset=l.borderDashOffset,c.beginPath(),H(g,o,f,a),c.closePath(),c.stroke(),c.restore())}(this,c.setContext(this.getContext(J-1)),R,f))}),a.display){for(l.save(),E=f-1;E>=0;E--){const F=a.setContext(this.getPointLabelContext(E)),{color:J,lineWidth:dt}=F;!dt||!J||(l.lineWidth=dt,l.strokeStyle=J,l.setLineDash(F.borderDash),l.lineDashOffset=F.borderDashOffset,R=this.getDistanceFromCenterForValue(o.ticks.reverse?this.min:this.max),O=this.getPointPosition(E,R),l.beginPath(),l.moveTo(this.xCenter,this.yCenter),l.lineTo(O.x,O.y),l.stroke())}l.restore()}}drawBorder(){}drawLabels(){const l=this.ctx,o=this.options,a=o.ticks;if(!a.display)return;const c=this.getIndexAngle(0);let f,E;l.save(),l.translate(this.xCenter,this.yCenter),l.rotate(c),l.textAlign="center",l.textBaseline="middle",this.ticks.forEach((R,O)=>{if(0===O&&!o.reverse)return;const F=a.setContext(this.getContext(O)),J=ho(F.font);if(f=this.getDistanceFromCenterForValue(this.ticks[O].value),F.showLabelBackdrop){l.font=J.string,E=l.measureText(R.label).width,l.fillStyle=F.backdropColor;const dt=jr(F.backdropPadding);l.fillRect(-E/2-dt.left,-f-J.size/2-dt.top,E+dt.width,J.size+dt.height)}Zo(l,R.label,0,-f,J,{color:F.color})}),l.restore()}drawTitle(){}}mt.id="radialLinear",mt.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Xc.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:g=>g,padding:5,centerPointLabels:!1}},mt.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},mt.descriptors={angleLines:{_fallback:"grid"}};const Xt={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Yt=Object.keys(Xt);function le(g,l){return g-l}function we(g,l){if(Ct(l))return null;const o=g._adapter,{parser:a,round:c,isoWeekday:f}=g._parseOpts;let E=l;return"function"==typeof a&&(E=a(E)),gt(E)||(E="string"==typeof a?o.parse(E,a):o.parse(E)),null===E?null:(c&&(E="week"!==c||!de(f)&&!0!==f?o.startOf(E,c):o.startOf(E,"isoWeek",f)),+E)}function Me(g,l,o,a){const c=Yt.length;for(let f=Yt.indexOf(g);f<c-1;++f){const E=Xt[Yt[f]],R=E.steps?E.steps:Number.MAX_SAFE_INTEGER;if(E.common&&Math.ceil((o-l)/(R*E.size))<=a)return Yt[f]}return Yt[c-1]}function di(g,l,o){if(o){if(o.length){const{lo:a,hi:c}=Ss(o,l);g[o[a]>=l?o[a]:o[c]]=!0}}else g[l]=!0}function ji(g,l,o){const a=[],c={},f=l.length;let E,R;for(E=0;E<f;++E)R=l[E],c[R]=E,a.push({value:R,major:!1});return 0!==f&&o?function(g,l,o,a){const c=g._adapter,f=+c.startOf(l[0].value,a),E=l[l.length-1].value;let R,O;for(R=f;R<=E;R=+c.add(R,1,a))O=o[R],O>=0&&(l[O].major=!0);return l}(g,a,c,o):a}let en=(()=>{class g extends pa{constructor(o){super(o),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(o,a){const c=o.time||(o.time={}),f=this._adapter=new Gs._date(o.adapters.date);pe(c.displayFormats,f.formats()),this._parseOpts={parser:c.parser,round:c.round,isoWeekday:c.isoWeekday},super.init(o),this._normalized=a.normalized}parse(o,a){return void 0===o?null:we(this,o)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const o=this.options,a=this._adapter,c=o.time.unit||"day";let{min:f,max:E,minDefined:R,maxDefined:O}=this.getUserBounds();function F(J){!R&&!isNaN(J.min)&&(f=Math.min(f,J.min)),!O&&!isNaN(J.max)&&(E=Math.max(E,J.max))}(!R||!O)&&(F(this._getLabelBounds()),("ticks"!==o.bounds||"labels"!==o.ticks.source)&&F(this.getMinMax(!1))),f=gt(f)&&!isNaN(f)?f:+a.startOf(Date.now(),c),E=gt(E)&&!isNaN(E)?E:+a.endOf(Date.now(),c)+1,this.min=Math.min(f,E-1),this.max=Math.max(f+1,E)}_getLabelBounds(){const o=this.getLabelTimestamps();let a=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY;return o.length&&(a=o[0],c=o[o.length-1]),{min:a,max:c}}buildTicks(){const o=this.options,a=o.time,c=o.ticks,f="labels"===c.source?this.getLabelTimestamps():this._generate();"ticks"===o.bounds&&f.length&&(this.min=this._userMin||f[0],this.max=this._userMax||f[f.length-1]);const E=this.min,O=function(g,l,o){let a=0,c=g.length;for(;a<c&&g[a]<l;)a++;for(;c>a&&g[c-1]>o;)c--;return a>0||c<g.length?g.slice(a,c):g}(f,E,this.max);return this._unit=a.unit||(c.autoSkip?Me(a.minUnit,this.min,this.max,this._getLabelCapacity(E)):function(g,l,o,a,c){for(let f=Yt.length-1;f>=Yt.indexOf(o);f--){const E=Yt[f];if(Xt[E].common&&g._adapter.diff(c,a,E)>=l-1)return E}return Yt[o?Yt.indexOf(o):0]}(this,O.length,a.minUnit,this.min,this.max)),this._majorUnit=c.major.enabled&&"year"!==this._unit?function(g){for(let l=Yt.indexOf(g)+1,o=Yt.length;l<o;++l)if(Xt[Yt[l]].common)return Yt[l]}(this._unit):void 0,this.initOffsets(f),o.reverse&&O.reverse(),ji(this,O,this._majorUnit)}initOffsets(o){let f,E,a=0,c=0;this.options.offset&&o.length&&(f=this.getDecimalForValue(o[0]),a=1===o.length?1-f:(this.getDecimalForValue(o[1])-f)/2,E=this.getDecimalForValue(o[o.length-1]),c=1===o.length?E:(E-this.getDecimalForValue(o[o.length-2]))/2);const R=o.length<3?.5:.25;a=je(a,0,R),c=je(c,0,R),this._offsets={start:a,end:c,factor:1/(a+1+c)}}_generate(){const o=this._adapter,a=this.min,c=this.max,f=this.options,E=f.time,R=E.unit||Me(E.minUnit,a,c,this._getLabelCapacity(a)),O=Bt(E.stepSize,1),F="week"===R&&E.isoWeekday,J=de(F)||!0===F,dt={};let qt,Ee,Ft=a;if(J&&(Ft=+o.startOf(Ft,"isoWeek",F)),Ft=+o.startOf(Ft,J?"day":R),o.diff(c,a,R)>1e5*O)throw new Error(a+" and "+c+" are too far apart with stepSize of "+O+" "+R);const Ae="data"===f.ticks.source&&this.getDataTimestamps();for(qt=Ft,Ee=0;qt<c;qt=+o.add(qt,O,R),Ee++)di(dt,qt,Ae);return(qt===c||"ticks"===f.bounds||1===Ee)&&di(dt,qt,Ae),Object.keys(dt).sort((We,ze)=>We-ze).map(We=>+We)}getLabelForValue(o){const c=this.options.time;return this._adapter.format(o,c.tooltipFormat?c.tooltipFormat:c.displayFormats.datetime)}_tickFormatFunction(o,a,c,f){const E=this.options,R=E.time.displayFormats,O=this._unit,F=this._majorUnit,dt=F&&R[F],Ft=c[a],Ee=this._adapter.format(o,f||(F&&dt&&Ft&&Ft.major?dt:O&&R[O])),Ae=E.ticks.callback;return Ae?ut(Ae,[Ee,a,c],this):Ee}generateTickLabels(o){let a,c,f;for(a=0,c=o.length;a<c;++a)f=o[a],f.label=this._tickFormatFunction(f.value,a,o)}getDecimalForValue(o){return null===o?NaN:(o-this.min)/(this.max-this.min)}getPixelForValue(o){const a=this._offsets,c=this.getDecimalForValue(o);return this.getPixelForDecimal((a.start+c)*a.factor)}getValueForPixel(o){const a=this._offsets,c=this.getDecimalForPixel(o)/a.factor-a.end;return this.min+c*(this.max-this.min)}_getLabelSize(o){const a=this.options.ticks,c=this.ctx.measureText(o).width,f=wi(this.isHorizontal()?a.maxRotation:a.minRotation),E=Math.cos(f),R=Math.sin(f),O=this._resolveTickFontOptions(0).size;return{w:c*E+O*R,h:c*R+O*E}}_getLabelCapacity(o){const a=this.options.time,c=a.displayFormats,f=c[a.unit]||c.millisecond,E=this._tickFormatFunction(o,0,ji(this,[o],this._majorUnit),f),R=this._getLabelSize(E),O=Math.floor(this.isHorizontal()?this.width/R.w:this.height/R.h)-1;return O>0?O:1}getDataTimestamps(){let a,c,o=this._cache.data||[];if(o.length)return o;const f=this.getMatchingVisibleMetas();if(this._normalized&&f.length)return this._cache.data=f[0].controller.getAllParsedValues(this);for(a=0,c=f.length;a<c;++a)o=o.concat(f[a].controller.getAllParsedValues(this));return this._cache.data=this.normalize(o)}getLabelTimestamps(){const o=this._cache.labels||[];let a,c;if(o.length)return o;const f=this.getLabels();for(a=0,c=f.length;a<c;++a)o.push(we(this,f[a]));return this._cache.labels=this._normalized?o:this.normalize(o)}normalize(o){return Lr(o.sort(le))}}return g.id="time",g.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}},g})();function sn(g,l,o){let f,E,R,O,a=0,c=g.length-1;o?(l>=g[a].pos&&l<=g[c].pos&&({lo:a,hi:c}=Bo(g,"pos",l)),({pos:f,time:R}=g[a]),({pos:E,time:O}=g[c])):(l>=g[a].time&&l<=g[c].time&&({lo:a,hi:c}=Bo(g,"time",l)),({time:f,pos:R}=g[a]),({time:E,pos:O}=g[c]));const F=E-f;return F?R+(O-R)*(l-f)/F:R}class Mn extends en{constructor(l){super(l),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const l=this._getTimestampsForTable(),o=this._table=this.buildLookupTable(l);this._minPos=sn(o,this.min),this._tableRange=sn(o,this.max)-this._minPos,super.initOffsets(l)}buildLookupTable(l){const{min:o,max:a}=this,c=[],f=[];let E,R,O,F,J;for(E=0,R=l.length;E<R;++E)F=l[E],F>=o&&F<=a&&c.push(F);if(c.length<2)return[{time:o,pos:0},{time:a,pos:1}];for(E=0,R=c.length;E<R;++E)J=c[E+1],O=c[E-1],F=c[E],Math.round((J+O)/2)!==F&&f.push({time:F,pos:E/(R-1)});return f}_getTimestampsForTable(){let l=this._cache.all||[];if(l.length)return l;const o=this.getDataTimestamps(),a=this.getLabelTimestamps();return l=o.length&&a.length?this.normalize(o.concat(a)):o.length?o:a,l=this._cache.all=l,l}getDecimalForValue(l){return(sn(this._table,l)-this._minPos)/this._tableRange}getValueForPixel(l){const o=this._offsets,a=this.getDecimalForPixel(l)/o.factor-o.end;return sn(this._table,a*this._tableRange+this._minPos,!0)}}Mn.id="timeseries",Mn.defaults=en.defaults,li.register(ha,mu,gi,Object.freeze({__proto__:null,CategoryScale:tn,LinearScale:En,LogarithmicScale:fr,RadialLinearScale:mt,TimeScale:en,TimeSeriesScale:Mn}));const Wr=li;var as=m(54968),wo=m(70262),Br=m(93075),xs=m(68675),xa=m(54004),js=m(39841),oe=m(5e3),zr=m(48966),Ys=m(28017),ga=m(53251),Ec=m(67322),Tc=m(77531),Tu=m(91079),Ju=m(69808),bh=m(47423),bl=m(63874),Zh=m(90508);function Qh(g,l){if(1&g&&(oe.TgZ(0,"mat-option",14),oe._uU(1),oe.qZA()),2&g){const o=l.$implicit;oe.Q6J("value",o),oe.xp6(1),oe.hij(" ",o," ")}}function nl(g,l){if(1&g&&(oe.TgZ(0,"mat-option",14),oe._uU(1),oe.qZA()),2&g){const o=l.$implicit;oe.Q6J("value",o),oe.xp6(1),oe.hij(" ",o," ")}}function vp(g,l){if(1&g){const o=oe.EpF();oe.TgZ(0,"tr"),oe.TgZ(1,"td"),oe._uU(2),oe.qZA(),oe.TgZ(3,"td"),oe.TgZ(4,"button",15),oe.NdJ("click",function(){const f=oe.CHM(o).$implicit;return oe.oxw().chooseDemo(f)}),oe._uU(5),oe.qZA(),oe.qZA(),oe.TgZ(6,"td"),oe.TgZ(7,"b"),oe._uU(8),oe.qZA(),oe._uU(9),oe.qZA(),oe.qZA()}if(2&g){const o=l.$implicit,a=l.index;let c,f;oe.xp6(2),oe.hij(" ",a+1," "),oe.xp6(3),oe.hij(" ",o.description," "),oe.xp6(3),oe.Oqu(null==o.categories||null==(c=o.categories.split(";"))?null:c.join(", ")),oe.xp6(1),oe.hij(" ",null==o.blocks||null==(f=o.blocks.split(";"))?null:f.join(", ")," ")}}function bp(g,l){if(1&g){const o=oe.EpF();oe.TgZ(0,"button",15),oe.NdJ("click",function(){return oe.CHM(o),oe.oxw().Verify()}),oe.TgZ(1,"mat-icon"),oe._uU(2,"save"),oe.qZA(),oe._uU(3," Verify LocalAPI "),oe.qZA()}}function yp(g,l){if(1&g){const o=oe.EpF();oe.TgZ(0,"tr"),oe.TgZ(1,"td"),oe._uU(2),oe.qZA(),oe.TgZ(3,"td"),oe.TgZ(4,"button",15),oe.NdJ("click",function(){const f=oe.CHM(o).$implicit;return oe.oxw().chooseDemo(f)}),oe._uU(5),oe.qZA(),oe.qZA(),oe.TgZ(6,"td"),oe.TgZ(7,"b"),oe._uU(8),oe.qZA(),oe._uU(9),oe.qZA(),oe.qZA()}if(2&g){const o=l.$implicit,a=l.index;let c,f;oe.xp6(2),oe.hij(" ",a+1," "),oe.xp6(3),oe.hij(" ",o.description||o.id," "),oe.xp6(3),oe.Oqu(null==o.categories||null==(c=o.categories.split(";"))?null:c.join(", ")),oe.xp6(1),oe.hij(" ",null==o.blocks||null==(f=o.blocks.split(";"))?null:f.join(", ")," ")}}let Fd=(()=>{class g{constructor(o,a){this.dialogRef=o,this.DetailsApp=a,this.BlocksLocal=[],this.demos=[],this.demosCategories=new Map,this.demosBlocks=new Map,this.demosArray=null,this.myBlocks=new Br.NI,this.optionsBlocks=[],this.filteredOptionsBlocks=null,this.myCategories=new Br.NI,this.mySearchText=new Br.NI,this.optionsCategories=[],this.filteredOptionsCategories=null,this.InitiateDemos(),this.loadFromLocalAPI()}loadFromLocalAPI(){var o,a;(null===(o=this.DetailsApp.LocalAPI)||void 0===o?void 0:o.WasAlive)&&(null===(a=this.DetailsApp.LocalAPI)||void 0===a||a.LoadBlocks().subscribe(c=>{this.BlocksLocal=c}))}Verify(){var o;null===(o=this.DetailsApp.LocalAPI)||void 0===o||o.IsAlive().subscribe(a=>{a&&this.loadFromLocalAPI()})}InitiateDemos(){var o=this.DetailsApp.demoBlocks;this.demos=o.sort((a,c)=>a.description.localeCompare(c.description)),this.optionsCategories=[...new Set(o.map(a=>a.categories).filter(a=>(null==a?void 0:a.length)>0).flatMap(a=>a.split(";")).filter(a=>(null==a?void 0:a.length)>0).sort((a,c)=>a.toLocaleLowerCase().localeCompare(c.toLocaleLowerCase())))],this.optionsBlocks=[...new Set(o.map(a=>a.blocks).filter(a=>(null==a?void 0:a.length)>0).flatMap(a=>a.split(";")).filter(a=>(null==a?void 0:a.length)>0).sort((a,c)=>a.toLowerCase().localeCompare(c.toLowerCase())))],this.filteredOptionsBlocks=this.myBlocks.valueChanges.pipe((0,xs.O)(""),(0,xa.U)(a=>{var c=(a||"").trim();return this._filter(c,this.optionsBlocks)})),this.filteredOptionsCategories=this.myCategories.valueChanges.pipe((0,xs.O)(""),(0,xa.U)(a=>{var c=(a||"").trim();return this._filter(c,this.optionsCategories)})),this.demosArray=(0,js.a)([this.myBlocks.valueChanges.pipe((0,xs.O)("")),this.myCategories.valueChanges.pipe((0,xs.O)("")),this.mySearchText.valueChanges.pipe((0,xs.O)(""))]).pipe((0,xs.O)(this.demos),(0,xa.U)(([a,c,f])=>((Array.isArray(a)||"object"==typeof a)&&(a=""),(Array.isArray(c)||"object"==typeof c)&&(c=""),(Array.isArray(f)||"object"==typeof f)&&(f=""),a=(a||"").trim().toLowerCase(),c=(c||"").trim().toLowerCase(),f=(null==f?void 0:f.trim().toLowerCase())||"",this.demos.filter(R=>{var O,F,J,dt,Ft,qt;return(0==a.length||(null===(O=R.blocks)||void 0===O?void 0:O.toLowerCase().indexOf(a))>-1)&&(0==c.length||(null===(F=R.categories)||void 0===F?void 0:F.toLowerCase().indexOf(c))>-1)&&(0==f.length||(null===(J=R.description)||void 0===J?void 0:J.toLowerCase().indexOf(f))>-1||(null===(dt=R.blocks)||void 0===dt?void 0:dt.toLowerCase().indexOf(f))>-1||(null===(Ft=R.categories)||void 0===Ft?void 0:Ft.toLowerCase().indexOf(f))>-1||(null===(qt=R.id)||void 0===qt?void 0:qt.toLowerCase().indexOf(f))>-1)}))))}ngOnInit(){}_filter(o,a){const c=o.toLowerCase();return 0==c.length?a:a.filter(f=>f.toLowerCase().includes(c))}chooseDemo(o){return this.dialogRef.close(o)}Close(){this.dialogRef.close()}}return g.\u0275fac=function(o){return new(o||g)(oe.Y36(zr.so),oe.Y36(Ys.d))},g.\u0275cmp=oe.Xpm({type:g,selectors:[["app-find-saved-blocks"]],decls:52,vars:16,consts:[["label","Demos"],[1,"example-form"],["appearance","fill",1,"example-full-width"],["type","text","placeholder","Pick one","aria-label","Categories","matInput","",3,"formControl","matAutocomplete"],["autoCategories","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","Pick one","aria-label","Blocks","matInput","",3,"formControl","matAutocomplete"],["autoBlocks","matAutocomplete"],["type","text","placeholder","enter text to search","matInput","",3,"formControl"],[4,"ngFor","ngForOf"],["label","Saved on local"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["label","CLOUD","disabled","disabled"],["mat-raised-button","","id","blocks","color","accent",3,"click"],[3,"value"],["mat-raised-button","","color","primary",3,"click"]],template:function(o,a){if(1&o&&(oe.TgZ(0,"mat-tab-group"),oe.TgZ(1,"mat-tab",0),oe.TgZ(2,"form",1),oe.TgZ(3,"mat-form-field",2),oe.TgZ(4,"mat-label"),oe._uU(5,"Categories"),oe.qZA(),oe._UZ(6,"input",3),oe.TgZ(7,"mat-autocomplete",null,4),oe.YNc(9,Qh,2,2,"mat-option",5),oe.ALo(10,"async"),oe.qZA(),oe.qZA(),oe.TgZ(11,"mat-form-field",2),oe.TgZ(12,"mat-label"),oe._uU(13,"Blocks"),oe.qZA(),oe._UZ(14,"input",6),oe.TgZ(15,"mat-autocomplete",null,7),oe.YNc(17,nl,2,2,"mat-option",5),oe.ALo(18,"async"),oe.qZA(),oe.qZA(),oe.TgZ(19,"mat-form-field",2),oe.TgZ(20,"mat-label"),oe._uU(21,"Search"),oe.qZA(),oe._UZ(22,"input",8),oe.qZA(),oe.qZA(),oe.TgZ(23,"table"),oe.TgZ(24,"thead"),oe.TgZ(25,"tr"),oe.TgZ(26,"th"),oe._uU(27,"Number"),oe.qZA(),oe.TgZ(28,"th"),oe._uU(29,"Name"),oe.qZA(),oe.TgZ(30,"th"),oe._uU(31,"Details"),oe.qZA(),oe.qZA(),oe.qZA(),oe.YNc(32,vp,10,4,"tr",9),oe.ALo(33,"async"),oe.qZA(),oe.qZA(),oe.TgZ(34,"mat-tab",10),oe.YNc(35,bp,4,0,"button",11),oe.TgZ(36,"table"),oe.TgZ(37,"thead"),oe.TgZ(38,"tr"),oe.TgZ(39,"th"),oe._uU(40,"Number"),oe.qZA(),oe.TgZ(41,"th"),oe._uU(42,"Name"),oe.qZA(),oe.TgZ(43,"th"),oe._uU(44,"Details"),oe.qZA(),oe.qZA(),oe.qZA(),oe.YNc(45,yp,10,4,"tr",9),oe.qZA(),oe.qZA(),oe.TgZ(46,"mat-tab",12),oe._uU(47," Saved on Cloud "),oe.qZA(),oe.qZA(),oe.TgZ(48,"button",13),oe.NdJ("click",function(){return a.Close()}),oe.TgZ(49,"mat-icon"),oe._uU(50,"close"),oe.qZA(),oe._uU(51," Close\n"),oe.qZA()),2&o){const c=oe.MAs(8),f=oe.MAs(16);oe.xp6(6),oe.Q6J("formControl",a.myCategories)("matAutocomplete",c),oe.xp6(3),oe.Q6J("ngForOf",oe.lcZ(10,10,a.filteredOptionsCategories)),oe.xp6(5),oe.Q6J("formControl",a.myBlocks)("matAutocomplete",f),oe.xp6(3),oe.Q6J("ngForOf",oe.lcZ(18,12,a.filteredOptionsBlocks)),oe.xp6(5),oe.Q6J("formControl",a.mySearchText),oe.xp6(10),oe.Q6J("ngForOf",oe.lcZ(33,14,a.demosArray)),oe.xp6(3),oe.Q6J("ngIf",!(null!=a.DetailsApp.LocalAPI&&a.DetailsApp.LocalAPI.WasAlive)),oe.xp6(10),oe.Q6J("ngForOf",a.BlocksLocal)}},directives:[ga.SP,ga.uX,Br._Y,Br.JL,Br.F,Ec.KE,Ec.hX,Tc.Nt,Br.Fj,Tu.ZL,Br.JJ,Br.oH,Tu.XC,Ju.sg,Ju.O5,bh.lW,bl.Hw,Zh.ey],pipes:[Ju.Ov],styles:["table[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid}table[_ngcontent-%COMP%]{width:100%;height:480px;margin:0 auto;display:block;overflow-x:auto;border-spacing:0}tbody[_ngcontent-%COMP%]{white-space:nowrap}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:5px 10px;border-top-width:0;border-left-width:0}th[_ngcontent-%COMP%]{position:sticky;top:0;background:#fff;vertical-align:bottom}th[_ngcontent-%COMP%]:last-child, td[_ngcontent-%COMP%]:last-child{border-right-width:0}tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom-width:0}"]}),g})();class Ep{constructor(){}definitionBlocks(l,o){l.headersbeforehttp={init:function(){this.appendDummyInput().appendField("Add Headers"),this.appendValueInput("HttpDomain").setCheck("String").appendField("Domain"),this.appendValueInput("HeaderName").setCheck("String").appendField("Header Name"),this.appendValueInput("HeaderValue").setCheck("String").appendField("Header Value"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("at domain put (localSite) or *")}},o.headersbeforehttp=function(f){var E=o.valueToCode(f,"HttpDomain",0)||"(localSite)",F="\n";return F+="{\n",F+="if(!("+E+" in headersForDomain))\n",F+="{\n",F+="headersForDomain["+E+"]=[];\n",F+="};\n",F+="var arr = headersForDomain["+E+"];\n",F+="arr.push({name:"+o.valueToCode(f,"HeaderName",0)+", value:"+o.valueToCode(f,"HeaderValue",0)+"});\n",F+='//alert("a" + JSON.stringify(arr)+"a");\n',(F+='//alert("a" + JSON.stringify(headersForDomain['+E+'])+"a");\n')+"};\n"},l.httprequest={init:function(){this.appendDummyInput().appendField(new e.FieldDropdown([["JSON","JSON"],["Text","Text"]]),"TypeOutput").appendField("HttpRequest"),this.appendValueInput("TheUrl").setCheck(null).appendField(new e.FieldDropdown([["GET","GET"],["POST","POST"],["PUT","PUT"],["DELETE","DELETE"]]),"TypeRequest").appendField("URL"),this.appendValueInput("Data").setCheck(null).appendField("Data"),this.setOutput(!0,null)}},o.httprequest=function(f){var E=f.getFieldValue("TypeOutput"),R=f.getFieldValue("TypeRequest"),O=o.valueToCode(f,"TheUrl",0),F=o.valueToCode(f,"Data",0),J="";switch(R.toString()){case"GET":J="(function(url){ var res=JSON.parse(getXhr(url)); if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;}("+O+") )";break;case"POST":J="(function(url,data){ var res=JSON.parse(postXhr(url,JSON.stringify(data))); if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;}("+O,F&&(J+=","+F),J+=") )";break;case"DELETE":J="(function(url,data){ var res=JSON.parse(deleteXhr(url,JSON.stringify(data))); if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;}("+O,F&&(J+=","+F),J+=") )";break;case"PUT":J="(function(url,data){ var res=JSON.parse(putXhr(url,JSON.stringify(data))); if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;}("+O,F&&(J+=","+F),J+=") )";break;default:alert("Do not understand : "+R.toString())}var dt=J;return"JSON"===E&&(dt="JSON.parse("+dt+")"),[dt,99]}}fieldXML(){return'\n    \n    <block type="headersbeforehttp">\n    <value name="HttpDomain">\n        <shadow type="text">\n            <field name="TEXT">(localSite)</field>\n        </shadow>\n    </value>\n    <value name="HeaderName">\n        <shadow type="text">\n            <field name="TEXT">Authorization</field>\n        </shadow>\n    </value>\n    <value name="HeaderValue">\n        <shadow type="text_join">\n\n        </shadow>\n    </value>\n</block>\n<block type="text_print">\n<value name="TEXT">\n\n    <block type="httprequest">\n    <value name="TheUrl">\n        <shadow type="text">\n            <field name="TEXT">https://httpbin.org/get</field>\n        </shadow>\n    </value>\n</block>\n</value>\n</block>  \n  }\n}\n'}}class Ph{fieldXML(){return'\n    \n    <category name="Blockly Core">\n\n    <category id="catLogic" colour="210" name="Logic">\n        <block type="controls_if"></block>\n        <block type="logic_compare"></block>\n        <block type="logic_operation"></block>\n        <block type="logic_negate"></block>\n        <block type="logic_boolean"></block>\n        <block type="logic_null"></block>\n        <block type="logic_ternary"></block>\n    </category>\n    <category id="catLoops" colour="120" name="Loops">\n        <block type="controls_repeat_ext">\n            <value name="TIMES">\n                <shadow type="math_number">\n                    <field name="NUM">10</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="controls_whileUntil"></block>\n        <block type="controls_for">\n            <value name="FROM">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="TO">\n                <shadow type="math_number">\n                    <field name="NUM">10</field>\n                </shadow>\n            </value>\n            <value name="BY">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="controls_forEach"></block>\n        <block type="controls_flow_statements"></block>\n    </category>\n    <category id="catMath" colour="230" name="Math">\n        <block type="math_number"></block>\n        <block type="math_arithmetic">\n            <value name="A">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="B">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_single">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">9</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_trig">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">45</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_constant"></block>\n        <block type="math_number_property">\n            <value name="NUMBER_TO_CHECK">\n                <shadow type="math_number">\n                    <field name="NUM">0</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_change">\n            <value name="DELTA">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_round">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">3.1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_on_list"></block>\n        <block type="math_modulo">\n            <value name="DIVIDEND">\n                <shadow type="math_number">\n                    <field name="NUM">64</field>\n                </shadow>\n            </value>\n            <value name="DIVISOR">\n                <shadow type="math_number">\n                    <field name="NUM">10</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_constrain">\n            <value name="VALUE">\n                <shadow type="math_number">\n                    <field name="NUM">50</field>\n                </shadow>\n            </value>\n            <value name="LOW">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="HIGH">\n                <shadow type="math_number">\n                    <field name="NUM">100</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_random_int">\n            <value name="FROM">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="TO">\n                <shadow type="math_number">\n                    <field name="NUM">100</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_random_float"></block>\n    </category>\n    <category id="catText" colour="160" name="Text">\n        <block type="text"></block>\n        <block type="text_join"></block>\n        <block type="text_append">\n            <value name="TEXT">\n                <shadow type="text"></shadow>\n            </value>\n        </block>\n        <block type="text_length">\n            <value name="VALUE">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_isEmpty">\n            <value name="VALUE">\n                <shadow type="text">\n                    <field name="TEXT"></field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_indexOf">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">text</field>\n                </block>\n            </value>\n            <value name="FIND">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_charAt">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">text</field>\n                </block>\n            </value>\n        </block>\n        <block type="text_getSubstring">\n            <value name="STRING">\n                <block type="variables_get">\n                    <field name="VAR">text</field>\n                </block>\n            </value>\n        </block>\n        <block type="text_changeCase">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_trim">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_print">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_prompt_ext">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n    </category>\n    <category id="catLists" colour="260" name="Lists">\n        <block type="lists_create_with">\n            <mutation items="0"></mutation>\n        </block>\n        <block type="lists_create_with"></block>\n        <block type="lists_repeat">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">5</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="lists_length"></block>\n        <block type="lists_isEmpty"></block>\n        <block type="lists_indexOf">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_getIndex">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_setIndex">\n            <value name="LIST">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_getSublist">\n            <value name="LIST">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_split">\n            <value name="DELIM">\n                <shadow type="text">\n                    <field name="TEXT">,</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="lists_sort"></block>\n    </category>\n    <category id="catColour" colour="20" name="Color">\n        <block type="colour_picker"></block>\n        <block type="colour_random"></block>\n        <block type="colour_rgb">\n            <value name="RED">\n                <shadow type="math_number">\n                    <field name="NUM">100</field>\n                </shadow>\n            </value>\n            <value name="GREEN">\n                <shadow type="math_number">\n                    <field name="NUM">50</field>\n                </shadow>\n            </value>\n            <value name="BLUE">\n                <shadow type="math_number">\n                    <field name="NUM">0</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="colour_blend">\n            <value name="COLOUR1">\n                <shadow type="colour_picker">\n                    <field name="COLOUR">#ff0000</field>\n                </shadow>\n            </value>\n            <value name="COLOUR2">\n                <shadow type="colour_picker">\n                    <field name="COLOUR">#3333ff</field>\n                </shadow>\n            </value>\n            <value name="RATIO">\n                <shadow type="math_number">\n                    <field name="NUM">0.5</field>\n                </shadow>\n            </value>\n        </block>\n    </category>\n    <category id="catVariables" colour="330" custom="VARIABLE" name="Variables"></category>\n    <category id="catFunctions" colour="290" custom="PROCEDURE" name="Functions"></category>\n</category>\n\n      '}}class Oh{definitionBlocks(l,o){l.trycatchfinally={init:function(){this.appendStatementInput("TRY").appendField("try"),this.appendStatementInput("CATCH").appendField("catch"),this.appendStatementInput("FINALLY").appendField("finally"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},o.trycatchfinally=function(f){var F="try {\n"+o.statementToCode(f,"TRY")+"}\n";return(F+="catch(err){\n errHandler(JSON.stringify(err));\n"+o.statementToCode(f,"CATCH")+"\n}")+"finally{\n "+o.statementToCode(f,"FINALLY")+"\n}\n"}}fieldXML(){return'\n    \n    <block type="trycatchfinally">\n    \n</block>\n'}}class xr{definitionBlocks(l,o){l.ttsBlock={init:function(){this.appendValueInput("NAME").setCheck(null).appendField("Voice").appendField(new e.FieldDropdown(this.generateOptions),"voiceSelected"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")},generateOptions:function(){if(window.speechSynthesis){var c=window.speechSynthesis.getVoices().map((f,E)=>[f.name,"voice"+E]);if(c.length>0)return c}return[["no voice","NoVoice"]]}},o.ttsBlock=function(a){var c=a.getFieldValue("voiceSelected");return c=c.replace("voice",""),"speakDefault("+o.valueToCode(a,"NAME",o.ORDER_ATOMIC)+","+c+");\n"}}fieldXML(){return'<block type="ttsBlock">\n        <value name="NAME">\n            <shadow type="text">\n            <field name="TEXT">Hello</field></shadow>\n        </value>       \n        </block>\n'}}class xh{definitionBlocks(l,o){l.pianoBlock={init:function(){this.appendValueInput("Note").setCheck("String").appendField("Note(A-G)"),this.appendValueInput("Sharp").setCheck("Boolean").appendField("#"),this.appendValueInput("Octave").setCheck("Number").appendField("Octave"),this.appendValueInput("Duration").setCheck("Number").appendField("Duration"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("https://github.com/keithwhor/audiosynth")}},o.pianoBlock=function(a){var c=o.valueToCode(a,"Note",o.ORDER_ATOMIC),O="";return"true"==(o.valueToCode(a,"Sharp",o.ORDER_ATOMIC)||!1)&&(O="#"),"playPiano("+c+O+","+o.valueToCode(a,"Octave",o.ORDER_ATOMIC)+","+(o.valueToCode(a,"Duration",o.ORDER_ATOMIC)||2)+");\n"},l.cmajor={init:function(){this.appendDummyInput().appendField("CMajor "),this.setOutput(!0,"Array"),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},o.cmajor=function(a){return['["C","D","E","F","G","A","B"]',o.ORDER_NONE]}}fieldXML(){return'<block type="pianoBlock">\n        <value name="Note">\n            <shadow type="text">\n            <field name="TEXT">C</field></shadow>\n        </value>       \n        <value name="Octave">\n            <shadow type="math_number">\n            <field name="NUM">4</field></shadow>\n        </value>       \n        <value name="Sharp">\n            <shadow type="logic_boolean">\n            <field name="BOOL">FALSE</field></shadow>\n        </value>       \n        \n        <value name="Duration">\n            <shadow type="math_number">\n            <field name="NUM">2</field></shadow>\n        </value>       \n        </block>\n        <block type="cmajor"></block>\n\n'}}class Bd{constructor(){this.definitionBlocks=function(l,o){l.filterList={init:function(){this.appendDummyInput().appendField("filterList"),this.appendValueInput("LIST").setCheck("Array"),this.appendValueInput("Logic").setCheck("String").appendField("item=>"),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},o.filterList=function(a){var c=o.valueToCode(a,"LIST",o.ORDER_MEMBER)||"[]",f=o.valueToCode(a,"Logic",o.ORDER_ATOMIC);"string"==typeof f&&(f=f.substr(1,f.length-2));var E="";return E+='(function(t){ if (typeof t === "string") return JSON.parse(t);  return t;}('+c+")).filter(function (item){ return "+f+";})",[E+="",o.ORDER_FUNCTION_CALL]},l.mapList={init:function(){this.appendDummyInput().appendField("mapList"),this.appendValueInput("LIST").setCheck("Array"),this.appendValueInput("Logic").setCheck("String").appendField("item=>"),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},o.mapList=function(a){var c=o.valueToCode(a,"LIST",o.ORDER_MEMBER)||"[]",f=o.valueToCode(a,"Logic",o.ORDER_ATOMIC);"string"==typeof f&&(f=f.substr(1,f.length-2));var E="";return E+='(function(t){ if (typeof t === "string") return JSON.parse(t);  return t;}('+c+")).map(function (item){ return "+f+";})",[E+="",o.ORDER_FUNCTION_CALL]},l.reduceList={init:function(){this.appendDummyInput().appendField("reduceList"),this.appendValueInput("LIST").setCheck("Array"),this.appendValueInput("initValue").setCheck(null).appendField("initialValue"),this.appendValueInput("Logic").setCheck("String").appendField("callback(acc,curVal,index, array)=>"),this.setInputsInline(!0),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},o.reduceList=function(a){var c=o.valueToCode(a,"LIST",o.ORDER_MEMBER)||"[]",f="";try{f=o.valueToCode(a,"initValue",o.ORDER_ATOMIC)}catch(O){window.alert(O)}var E=o.valueToCode(a,"Logic",o.ORDER_ATOMIC);"string"==typeof E&&(E=E.substr(1,E.length-2));var R="";return R+='(function(t){ if (typeof t === "string") return JSON.parse(t);  return t;}('+c+")).reduce(function (acc,curVal,index,array){ "+E+";}",f&&f.toString().length>0&&(R+=","+f),R+=")",[R+="",o.ORDER_FUNCTION_CALL]}}}fieldXML(){return'\n        <category id="catA" name="Array">\n            <block type="filterList">\n                <value name="LIST">\n                    <block type="variables_get">\n                        <field name="VAR">list</field>\n                    </block>\n                </value>\n                <value name="initValue">\n                    <shadow type="text">\n                        <field name="TEXT"> </field>\n                    </shadow>\n                </value>\n                <value name="Logic">\n                    <shadow type="text">\n                        <field name="TEXT">item.property == "value"</field>\n                    </shadow>\n                </value>\n            </block>\n            <block type="mapList">\n            <value name="LIST">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n            <value name="Logic">\n                <shadow type="text">\n                    <field name="TEXT">item.property</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="reduceList">\n        <value name="LIST">\n        <block type="variables_get">\n                <field name="VAR">list</field>\n            </block>\n            </value>\n            <value name="Logic">\n                <shadow type="text">\n                    <field name="TEXT">...</field>\n                </shadow>\n            </value>\n        </block>\n        </category>\n\n'}}class Hd{definitionBlocks(l,o){l.auth0webapidata={init:function(){this.appendDummyInput().appendField("Auth0"),this.appendValueInput("client_id").setCheck(null).appendField("client_id"),this.appendValueInput("client_secret").setCheck(null).appendField("client_secret"),this.appendValueInput("audience").setCheck(null).appendField("audience"),this.appendValueInput("grant_type").setCheck(null).appendField("grant_type"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},o.auth0webapidata=function(f){var J='{"client_id":'+o.valueToCode(f,"client_id",0);return J+=',"client_secret":'+o.valueToCode(f,"client_secret",0),J+=',"audience":'+o.valueToCode(f,"audience",0),J+=',"grant_type":'+o.valueToCode(f,"grant_type",0),[J+="}",99]}}fieldXML(){return'<category id="Auth0" name="Auth0">\n    <block type="auth0webapidata">\n        <value name="client_id">\n            <shadow type="text">\n                <field name="TEXT">client_id?</field>\n            </shadow>\n\n        </value>\n        <value name="client_secret">\n            <shadow type="text">\n                <field name="TEXT">client_secret?</field>\n            </shadow>\n\n        </value>\n        <value name="audience">\n            <shadow type="text">\n                <field name="TEXT">audience</field>\n            </shadow>\n\n        </value>\n        <value name="grant_type">\n            <shadow type="text">\n                <field name="TEXT">grant_type?</field>\n            </shadow>\n\n        </value>\n    </block>\n</category>\n'}}class qh{definitionBlocks(l,o){l.converttojson={init:function(){this.appendDummyInput().appendField("ConvertToJSON"),this.appendValueInput("ValueToConvert").setCheck(null),this.setInputsInline(!0),this.setOutput(!0,null),this.setTooltip("Convert to JSON"),this.setHelpUrl("")}},o.converttojson=function(f){return["JSON.parse("+o.valueToCode(f,"ValueToConvert",0)+")",99]},l.converttostring={init:function(){this.appendDummyInput().appendField("ConvertToString"),this.appendValueInput("ValueToConvert").setCheck(null),this.setInputsInline(!0),this.setOutput(!0,null),this.setTooltip("Convert to String"),this.setHelpUrl("")}},o.converttostring=function(f){return["JSON.stringify("+o.valueToCode(f,"ValueToConvert",0)+")",99]},l.convertcsv={init:function(){this.appendDummyInput().appendField("Convert To CSV"),this.appendValueInput("ArrayToConvert").setCheck(null).appendField("Array to convert"),this.setOutput(!0,null),this.setTooltip(""),this.setHelpUrl("")}},o.convertcsv=function(f){return["convertToCSV("+o.valueToCode(f,"ArrayToConvert",o.ORDER_ATOMIC)+")",99]}}fieldXML(){return'<block type="converttojson"></block>\n <block type="converttostring"></block>\n <block type="convertcsv"></block>\n'}}class ru{definitionBlocks(l,o){l.displayCurrentDate={init:function(){this.appendDummyInput().appendField("Current Date"),this.appendDummyInput().appendField("Pick date format:").appendField(new e.FieldDropdown([["Unix format","unix"],["ISO format","iso"],["Human format","human"]]),"dateFormat"),this.setOutput(!0,null),this.setColour(100),this.setTooltip("Show current date."),this.setHelpUrl("https://www.w3schools.com/jsref/jsref_obj_date.asp")}};o.displayCurrentDate=f=>{let R="";switch(f.getFieldValue("dateFormat").toString()){case"human":R="displayDateFormatted('human')";break;case"iso":R="displayDateFormatted('iso')";break;case"unix":R="displayDateFormatted('unix')";break;default:console.log("Date time format not suported")}return[R,99]}}fieldXML(){return'<block type="displayCurrentDate"></block>'}}class Ud{definitionBlocks(l,o){l.DateFromText={init:function(){this.appendValueInput("VALUE").appendField("Date from "),this.setOutput(!0,null),this.setHelpUrl("https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/parse#Date_Time_String_Format")}},o.DateFromText=c=>["Date.parse("+(o.valueToCode(c,"VALUE",o.ORDER_ATOMIC)||"")+")",99]}fieldXML(){return'<block type="DateFromText">\n    <value name="VALUE">\n        <shadow type="text">\n            <field name="TEXT">1970-04-16T02:00:00</field>\n        </shadow>\n    </value>\n</block>\n'}}class Cu{definitionBlocks(l,o){l.blockemail={init:function(){this.appendValueInput("from").setCheck(null).appendField("From:"),this.appendValueInput("to").setCheck(null).appendField("To:"),this.appendValueInput("cc").setCheck(null).appendField("CC:"),this.appendValueInput("bcc").setCheck(null).appendField("BCC:"),this.appendValueInput("subject").setCheck(null).appendField("Subject:"),this.appendValueInput("body").setCheck(null).appendField("Body:").appendField(new e.FieldDropdown([["HTML","Html"],["TEXT","Text"]]),"NAME"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},l.sendinblue={init:function(){this.appendDummyInput().appendField("SendInBlue"),this.appendValueInput("APIKey").setCheck(null).appendField("ApiKey"),this.appendValueInput("email").setCheck("blockemail").appendField("Email"),this.setColour(230),this.setTooltip("Please see https://account.sendinblue.com/advanced/api"),this.setHelpUrl("https://account.sendinblue.com/advanced/api"),this.setOutput(!0,null)}},o.sendinblue=function(c){var R='window.alert("SendInBlue");\n',O="api.sendinblue.com";return R=`(function(apiKey,email){if(!('${O}' in headersForDomain)){ headersForDomain['${O}']=[]; };\n`,R+=`headersForDomain['${O}'].push({"name":"api-key","value":apiKey});\n`,R+=`headersForDomain['${O}'].push({"name":"Content-Type","value":"application/json"});\n`,R+=`headersForDomain['${O}'].push({"name":"Accept","value":"application/json"});\n`,R+='var sendinblueData={"sender":{"email": email.from }, "to":[{"email":email.to }],"subject":email.subject,"htmlContent": email.body} ;\n',R+="\nwindow.alert(JSON.stringify(sendinblueData));\n",R+=`var res=JSON.parse(postXhr("https://${O}/v3/smtp/email",JSON.stringify(sendinblueData)));if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;\n`,[R+="})("+o.valueToCode(c,"APIKey",o.ORDER_ATOMIC)+","+o.valueToCode(c,"email",o.ORDER_ATOMIC)+")",o.ORDER_NONE]},o.blockemail=function(c){var f=o.valueToCode(c,"from",o.ORDER_ATOMIC),E=o.valueToCode(c,"to",o.ORDER_ATOMIC),R=o.valueToCode(c,"cc",o.ORDER_ATOMIC),O=o.valueToCode(c,"bcc",o.ORDER_ATOMIC),F=o.valueToCode(c,"subject",o.ORDER_ATOMIC),J=c.getFieldValue("NAME"),Ft="{";return Ft+='"from":'+f+",",Ft+='"to":'+E+",",Ft+='"cc":'+R+",",Ft+='"bcc":'+O+",",Ft+='"subject":'+F+",",Ft+='"body":'+o.valueToCode(c,"body",o.ORDER_ATOMIC)+",",Ft+='"typeEmail":"'+J+'"',[""+(Ft+="}"),o.ORDER_NONE]}}fieldXML(){return'<block type="blockemail">\n        <value name="from">\n            <shadow type="text">\n                <field name="TEXT">test@test.com</field>\n            </shadow>\n        </value>\n        <value name="to">\n            <shadow type="text">\n                <field name="TEXT">ignatandrei@yahoo.com</field>\n            </shadow>\n        </value>\n        <value name="cc">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n        <value name="bcc">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n        <value name="subject">\n            <shadow type="text">\n                <field name="TEXT">My test email</field>\n            </shadow>\n        </value>\n        <value name="body">\n            <shadow type="text">\n                <field name="TEXT">This is the body</field>\n            </shadow>\n        </value>\n            </block>\n        <block type="sendinblue">\n        <value name="APIKey">\n            <shadow type="text">\n                <field name="TEXT">Please put here the API Key from SendInBlue</field>\n            </shadow>\n            \n        </value>\n        <value name="email">\n            <shadow type="blockemail">\n            </shadow>\n            \n        </value>\n        \n        </block>\n'}}class Cc{definitionBlocks(l,o){l.exportfile={init:function(){this.appendDummyInput().appendField("ExportToFile"),this.appendValueInput("fileName").setCheck(null).appendField("FileName"),this.appendValueInput("contentFile").setCheck(null).appendField("Content"),this.appendValueInput("convertToByte").setCheck("Boolean").appendField("ConvertToByteFromBase64"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},o.exportfile=function(f){return"exportToFile("+o.valueToCode(f,"fileName",0)+","+o.valueToCode(f,"contentFile",0)+","+o.valueToCode(f,"convertToByte",0)+");\n"}}fieldXML(){return'<block type="exportfile">\n    <value name="fileName">\n        <shadow type="text">\n            <field name="TEXT">abc</field>\n        </shadow>\n    </value>\n    <value name="convertToByte">\n        <shadow type="logic_boolean">\n            <field name="BOOL">FALSE</field>\n        </shadow>\n    </value>\n</block>\n'}}class Su{constructor(){this.definitionBlocks=function(l,o){l.window_open={init:function(){this.jsonInit({message0:"Open %1",args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks"})}},o.window_open=function(f){var E=o.valueToCode(f,"TEXT",99)||"''";return"if((typeof "+E+' == "object") && ("to" in '+E+')){open("mailto:'+E.to+'")}else{ open('+E+")};\n"},l.text_message={init:function(){this.jsonInit({message0:"alert %1",args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks"})}},o.text_message=function(f){return"alert1("+(o.valueToCode(f,"TEXT",99)||"''")+");\n"},l.text_print_return={init:function(){this.appendValueInput("TEXT").setCheck(null).appendField("print return").appendField(new e.FieldLabelSerializable(""),"NAME"),this.setOutput(!0,null),this.setTooltip(""),this.setHelpUrl("")}},o.text_print_return=function(f){var E=o.valueToCode(f,"TEXT",0)||"''";return["(function(){window.alert("+E+");\n;return ("+E+");}())\n",99]},l.valuefromtext={init:function(){this.appendDummyInput().appendField("InputFromText"),this.appendValueInput("IdOfText").setCheck("String").appendField("Text id"),this.appendValueInput("ValueToObtain").setCheck("String").appendField("Property"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},o.valuefromtext=function(f){return["getIDProp("+o.valueToCode(f,"IdOfText",0)+","+(o.valueToCode(f,"ValueToObtain",0)||'"value"')+")",99]}}}fieldXML(){return'<block type="window_open"></block>\n    <block type="valuefromtext">\n        <value name="IdOfText">\n            <shadow type="text">\n                <field name="TEXT">output</field>\n            </shadow>\n        </value>\n        <value name="ValueToObtain">\n            <shadow type="text">\n                <field name="TEXT">value</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="text_print"></block>\n    <block type="text_print_return"></block>  \n    <block type="text_prompt_ext"></block>\n    <block type="text_message"></block>\n    \n    '}}class td{definitionBlocks(l,o){l.chart_js={init:function(){this.appendDummyInput().appendField("ChartType").appendField(new e.FieldDropdown([["HBar","HBar"],["VBar","VBar"]]),"ChartTypeValue"),this.appendValueInput("ChartTitleValue").setCheck(null).appendField(new e.FieldLabelSerializable("Title"),"ChartTitle"),this.appendValueInput("LabelsValue").setCheck("Array").appendField(new e.FieldLabelSerializable("Labels"),"ChartLabels"),this.appendValueInput("DataSet1Label").setCheck("String").appendField(new e.FieldLabelSerializable("DataSet1 Label"),"DataSetLabel1"),this.appendValueInput("DataSet1Data").setCheck("Array").appendField(new e.FieldLabelSerializable("DataSet1 Data"),"DataSetData1"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},o.chart_js=function(a){var c=a.getFieldValue("ChartTypeValue"),E=(o.valueToCode(a,"ChartTitleValue",o.ORDER_ATOMIC),o.valueToCode(a,"LabelsValue",o.ORDER_ATOMIC)),R=o.valueToCode(a,"DataSet1Label",o.ORDER_ATOMIC),O=o.valueToCode(a,"DataSet1Data",o.ORDER_ATOMIC),F="",J="x";switch(c){case"HBar":F="bar",J="y";break;case"VBar":F="bar";break;default:throw"Unknown chart type:"+c}return[`JSON.stringify({ 'type': '${F}', 'options':{ 'indexAxis':'${J}'},  'data': {  'labels': ${E}, 'datasets': [{ 'backgroundColor': ['green','blue'],'label': ${R}, 'data': ${O} }] } })`,o.ORDER_NONE]}}fieldXML(){return'<block type="chart_js"></block>'}}class Fh{definitionBlocks(l,o){l.HTMLheaders={init:function(){this.appendValueInput("NAME").setCheck(null).appendField("Header").appendField(new e.FieldDropdown([["H1","H1"],["H2","H2"],["H3","H3"]]),"NAME"),this.setOutput(!0,null),this.setColour(240),this.setTooltip("string to Header "),this.setHelpUrl("")}},o.HTMLheaders=function(a){var c=a.getFieldValue("NAME");return[`'<${c}>'+ ${o.valueToCode(a,"NAME",o.ORDER_ATOMIC)} + '</${c}>'`,o.ORDER_NONE]},l.HTMLlist={init:function(){this.appendDummyInput().appendField("List ").appendField(new e.FieldDropdown([["OL","ol"],["UL","ul"]]),"listType"),this.appendStatementInput("Content").setCheck(null),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(240),this.setTooltip("list - please add li block "),this.setHelpUrl("")}},o.HTMLlist=function(a){var c=a.getFieldValue("listType");return o.valueToCode(a,"ListType",o.ORDER_ATOMIC),`window.alert('<${c}>');\n;${o.statementToCode(a,"Content")};\n;window.alert('</${c}>');\n`},l.HTMLli={init:function(){this.appendValueInput("NAME").setCheck(null).appendField("LI"),this.setOutput(!0,null),this.setColour(240),this.setTooltip("string to LI"),this.setHelpUrl("")}},o.HTMLli=function(a){return[`'<li>'+ ${o.valueToCode(a,"NAME",o.ORDER_ATOMIC)} + '</li>'`,o.ORDER_NONE]},l.HTMLliStart={init:function(){this.appendDummyInput().appendField("List").appendField(new e.FieldDropdown([["OL","OL"],["UL","UL"]]),"NAME"),this.setColour(240),this.setOutput(!0,null),this.setTooltip("LI start"),this.setHelpUrl("")}},o.HTMLliStart=function(a){return[`'<${a.getFieldValue("NAME")}>'`,o.ORDER_NONE]},l.HTMLliStop={init:function(){this.appendDummyInput().appendField("/List").appendField(new e.FieldDropdown([["OL","OL"],["UL","UL"]]),"NAME"),this.setColour(240),this.setOutput(!0,null),this.setTooltip("LI stop"),this.setHelpUrl("")}},o.HTMLliStop=function(a){return[`'</${a.getFieldValue("NAME")}>'`,o.ORDER_NONE]},l.HTMLlink={init:function(){this.appendDummyInput().appendField("A").appendField("target").appendField(new e.FieldDropdown([["_blank","_blank"],["_self","_self"],["_parent","_parent"],["_top","_top"]]),"targetDrop"),this.appendValueInput("HREF").setCheck(null).appendField("href"),this.appendValueInput("text").setCheck(null).appendField("text"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},o.HTMLlink=function(a){var c=a.getFieldValue("targetDrop"),f=o.valueToCode(a,"HREF",o.ORDER_ATOMIC),E=o.valueToCode(a,"text",o.ORDER_ATOMIC),R="'<a href=\"'+"+f;return R+=`+ '" target="${c}"'`,[R+="+ '>'+"+(E=E||f)+"+ '</a> '",o.ORDER_NONE]}}fieldXML(){return'\n    <block type=\'text_print\'>" \n               <value name=\'TEXT\'>" \n                 \n    <block type="HTMLheaders">\n        <value name="NAME">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n    </block>    \n      </value>\n\n\n      </block>\n        \n<block type="HTMLlist"></block>\n\n<block type=\'text_print\'>" \n<value name=\'TEXT\'>" \n  \n<block type="HTMLli">\n<value name="NAME">\n<shadow type="text">\n <field name="TEXT"></field>\n</shadow>\n</value>\n</block>    \n</value>\n</block>\n<block type=\'text_print\'>" \n<value name=\'TEXT\'>" \n\n<block type="HTMLliStart"></block>\n</value>\n</block>    \n<block type=\'text_print\'>" \n<value name=\'TEXT\'>" \n\n<block type="HTMLliStop"></block>\n\n</value>\n</block>    \n\n<block type=\'text_print\'>" \n<value name=\'TEXT\'>" \n\n<block type="HTMLlink"></block>\n\n</value>\n</block>    \n\n\n'}}class ed{definitionBlocks(l,o){l.simpleHtmlparser={init:function(){this.appendValueInput("NAME").setCheck(null).appendField("Find ").appendField(new e.FieldDropdown([["Tables","table"],["Links","a"],["Images","img"],["List","ul,ol"],["Headers","h1,h2,h3,h4,h5,h6"]]),"To"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},o.simpleHtmlparser=function(a){var E="(function(value){ \n";return E+=`var doc  = parseDOMFromStringElements(value,"text/html","${a.getFieldValue("To")}");\n`,E+="return doc;\n",[E+="})("+o.valueToCode(a,"NAME",o.ORDER_ATOMIC)+")",o.ORDER_NONE]}}fieldXML(){return'\n    <block type=\'text_print\'>" \n               <value name=\'TEXT\'>" \n                 \n    <block type="simpleHtmlparser">\n        <value name="NAME">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n    </block>    \n      </value>\n\n\n      </block>\n        '}}class fd{definitionBlocks(l,o){l.modifyproperty={init:function(){this.appendDummyInput().appendField("Modify "),this.appendValueInput("ObjectToChange").setCheck(null).setAlign(0).appendField(new e.FieldLabelSerializable("object"),"objectName"),this.appendValueInput("PropertyName").setCheck(null).setAlign(1).appendField(new e.FieldLabelSerializable(",property"),"prop"),this.appendValueInput("NewValue").setCheck(null).setAlign(1).appendField(new e.FieldLabelSerializable("toValue"),"newValue"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(""),this.setHelpUrl("")}},o.modifyproperty=function(R){return o.valueToCode(R,"ObjectToChange",0)+"["+o.valueToCode(R,"PropertyName",0)+"]="+o.valueToCode(R,"NewValue",0)+";"},l.getproperty={init:function(){this.appendDummyInput().appendField("Get from"),this.appendValueInput("ObjectToChange").setCheck(null).setAlign(0).appendField(new e.FieldLabelSerializable("object"),"objectName"),this.appendValueInput("PropertyName").setCheck(null).setAlign(1).appendField(new e.FieldLabelSerializable("property"),"prop"),this.setInputsInline(!0),this.setOutput(!0,null)}},o.getproperty=function(R){return['(function(t){ if (typeof t === "string") return JSON.parse(t);  return t;}('+o.valueToCode(R,"ObjectToChange",0)+"))["+o.valueToCode(R,"PropertyName",0)+"]",99]}}fieldXML(){return'\n    \n    <block type="modifyproperty">\n        <value name="PropertyName">\n            <shadow type="text">\n                <field name="TEXT">enter property name</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="getproperty">\n        <value name="PropertyName">\n            <shadow type="text">\n                <field name="TEXT">enter property name</field>\n            </shadow>\n        </value>\n\n    </block>    \n'}}class Bh{definitionBlocks(l,o,a,c){o.object_from_json=function(bn){return[`JSON.parse(${o.valueToCode(bn,"JSON",0)})`,99]},o.object_to_json=function(bn){return[`JSON.stringify(${o.valueToCode(bn,"object",0)})`,99]},o.object_get=function(bn){const Qi=bn.getFieldValue("field_name");return[`${o.valueToCode(bn,"object",0)}['${Qi}']`,99]},o.object_set=function(bn){const Qi=bn.getFieldValue("field_name");return`${o.valueToCode(bn,"object_field",0)}['${Qi}'] = ${o.valueToCode(bn,"value_field",0)};\n`},o.object_create=function(bn){if(!bn.numFields)return["{}",99];let Qi="";for(let dr=1;dr<=bn.numFields;dr++)Qi+=`"${bn.getFieldValue("field"+dr)}": ${o.valueToCode(bn,"field_input"+dr,0)}, `;return[`{ ${Qi} }`,99]};const Ee="object_field",Ae="object_create_mutator_top",We="#F99EA3",ze=bn=>({object_from_json:"get object from JSON %1",object_from_json_tooltip:"Create object from JSON string.",object_to_json:"generate JSON from object %1",object_to_json_tooltip:"Save object as a JSON string.",object_get_json:"get property %1 %2 of object %3",object_get_json_tooltip:"Get a property of an object.",object_set_json:"set property %1 %2 of object %3 to %4",object_set_json_tooltip:"Set a property of an object.",object_create:"create object",object_create_tooltip:"Create a new object, optionally with some property values.",object_field_name:"property name"}[bn]),Si={type:"object_from_json",message0:ze("object_from_json"),args0:[{type:"input_value",name:"JSON",check:"String"}],output:"Object",colour:We,tooltip:ze("object_from_json_tooltip"),helpUrl:"http://www.json.org/"};l.object_from_json={init:function(){this.jsonInit(Si)}};const an={type:"object_to_json",message0:ze("object_to_json"),args0:[{type:"input_value",name:"object",check:"Object"}],output:null,colour:We,tooltip:ze("object_to_json_tooltip"),helpUrl:"http://www.json.org/"};l.object_to_json={init:function(){this.jsonInit(an)}};const Gi={type:"object_get",message0:ze("object_get_json"),args0:[{type:"field_input",name:"field_name",text:"default"},{type:"input_dummy"},{type:"input_value",name:"object",check:"Object",align:"RIGHT"}],output:null,colour:We,tooltip:ze("object_get_json_tooltip"),helpUrl:""};l.object_get={init:function(){this.jsonInit(Gi)}};const Ki={type:"object_set",message0:ze("object_set_json"),args0:[{type:"field_input",name:"field_name",text:ze("object_field_name")},{type:"input_dummy"},{type:"input_value",name:"object_field",check:"Object",align:"RIGHT"},{type:"input_value",name:"value_field",align:"RIGHT"}],previousStatement:null,nextStatement:null,colour:We,tooltip:ze("object_set_json_tooltip"),helpUrl:""};l.object_set={init:function(){this.jsonInit(Ki)}};const pn={type:"object_create",message0:ze("object_create"),output:"Object",mutator:"controls_create_mutator",colour:15,tooltip:ze("object_create_tooltip"),helpUrl:""};l.object_create={init:function(){this.jsonInit(pn)}};const mn={type:"object_field",message0:"%1 %2",args0:[{type:"field_input",name:"field_name",text:ze("object_field_name")},{type:"input_value",name:"field_value"}],previousStatement:null,nextStatement:null,colour:15,tooltip:"",helpUrl:""};l[Ee]={init:function(){this.jsonInit(mn)}};const wn={type:"object_create_mutator",message0:ze("object_create"),nextStatement:null,colour:15,tooltip:ze("object_create_tooltip"),helpUrl:""};l[Ae]={init:function(){this.jsonInit(wn)}};const Pn={numFields:0,fields:new Array,domToMutation:function(bn){this.fields=[];for(let Bn,Qi=0;Bn=bn.childNodes[Qi];Qi++)"field"==Bn.nodeName.toLowerCase()&&this.fields.push(Bn.getAttribute("name"));this.numFields=this.fields.length,this.updateShape()},mutationToDom:function(){if(!this.numFields)return null;const bn=document.createElement("mutation");bn.setAttribute("num_fields",""+this.numFields);for(let Qi=0;Qi<this.fields.length;Qi++){const Bn=document.createElement("field");Bn.setAttribute("name",this.fields[Qi]),bn.appendChild(Bn)}return bn},compose:function(bn){let Qi=bn.nextConnection&&bn.nextConnection.targetBlock();this.numFields=0,this.fields=[];let Bn=[null];for(;Qi;)this.fields.push(Qi.getFieldValue("field_name")),this.numFields++,Bn.push(Qi.savedConnection),Qi=Qi.nextConnection&&Qi.nextConnection.targetBlock();this.updateShape();for(let dr=1;dr<=this.numFields;dr++)c.reconnect(Bn[dr],this,"field_input"+dr)},decompose:function(bn){const Qi=bn.newBlock(Ae);Qi.initSvg();let Bn=Qi.nextConnection;for(let dr=0;dr<this.fields.length;dr++){const Ei=bn.newBlock(Ee);Ei.initSvg(),Ei.setFieldValue(this.fields[dr],"field_name"),Bn.connect(Ei.previousConnection),Bn=Ei.nextConnection}return Qi},saveConnections:function(bn){let Qi=bn.nextConnection&&bn.nextConnection.targetBlock(),Bn=1;for(;Qi;){const dr=this.getInput("field_input"+Bn);Qi.savedConnection=dr&&dr.connection.targetConnection,Qi.setFieldValue(this.getFieldValue("field"+Bn),"field_name"),Bn++,Qi=Qi.nextConnection&&Qi.nextConnection.targetBlock()}},updateShape:function(){this.getInput("with")&&this.removeInput("with");let bn=1;for(;this.getInput("field_input"+bn);)this.removeInput("field_input"+bn),bn++;this.numFields>0&&this.appendDummyInput("with").setAlign(1).appendField("with fields");for(let Qi=1;Qi<=this.numFields;Qi++){const Bn=this.fields[Qi-1];this.appendValueInput("field_input"+Qi).setCheck(null).setAlign(1).appendField(new e.FieldTextInput(Bn),"field"+Qi)}}};try{a.registerMutator("controls_create_mutator",Pn,null,["object_field"])}catch(bn){}}fieldXML(){return'    \n    <block type="modifyproperty"></block>\n    <block type="getproperty"></block>\n    <block type="object_create"></block>\n    \x3c!--<block type="object_from_json"></block>\n<block type="object_to_json"></block>\n<block type="object_get"></block>\n<block type="object_set"></block>--\x3e\n\n'}}class Rf{definitionBlocks(l,o){l.credsforhttp={init:function(){this.appendDummyInput().appendField("Http with Creds"),this.appendValueInput("HttpDomain").setCheck("String").appendField("Domain"),this.appendValueInput("WithCreds").setCheck("Boolean").appendField("With Creds ?"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},o.credsforhttp=function(f){return"withCredsForDomain["+(o.valueToCode(f,"HttpDomain",0)||"(localSite)")+"]="+o.valueToCode(f,"WithCreds",0)+";\n"}}fieldXML(){return'<block type="credsforhttp">\n    <value name="HttpDomain">\n        <shadow type="text">\n            <field name="TEXT">(localSite)</field>\n        </shadow>\n    </value>\n    <value name="WithCreds">\n        <shadow type="logic_boolean">\n            <field name="BOOL">FALSE</field>\n        </shadow>\n    </value>\n</block>\n'}}class Hh{definitionBlocks(l,o){l.wait={init:function(){this.appendValueInput("VALUE").appendField("wait secs"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},o.wait=function(c){return"waitTime("+(o.valueToCode(c,"VALUE",o.ORDER_ATOMIC)||"")+");"},l.wait_until={init:function(){this.appendValueInput("VALUE").appendField("wait until date"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},o.wait_until=function(c){return"waitTime(("+(o.valueToCode(c,"VALUE",0)||"")+"-new Date())/1000);"}}fieldXML(){return'\n    <block type="wait">\n\n    <value name="VALUE">\n        <shadow type="math_number">\n            <field name="NUM">10</field>\n        </shadow>\n    </value>\n\n</block>\n<block type="wait_until">\n\n</block>'}}class Uh{definitionBlocks(l,o){l([{type:"wait_seconds",message0:" wait %1 seconds",args0:[{type:"field_number",name:"SECONDS",min:0,max:600,value:1}],previousStatement:null,nextStatement:null,colour:"%{BKY_LOOPS_HUE}"}]),o.wait_seconds=function(a){return"waitForSeconds("+Number(a.getFieldValue("SECONDS"))+");\n"}}fieldXML(){return'\n  <block type="wait_seconds"></block>\n'}}class id{definitionBlocks(l,o){l.comment={init:function(){this.appendValueInput("TEXT").setCheck(null).appendField("comment /* */").appendField(new e.FieldLabelSerializable(""),"NAME"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(""),this.setHelpUrl("")}},o.comment=function(c){return"/*\n"+(o.valueToCode(c,"TEXT",0)||"''")+"\n*/;\n"},l.debugger={init:function(){this.appendValueInput("TEXT").setCheck(null).appendField("debugger").appendField(new e.FieldLabelSerializable(""),"NAME"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(""),this.setHelpUrl("")}},o.debugger=function(c){return"startDebugger("+(o.valueToCode(c,"TEXT",0)||"''")+",'"+c.id+"',this);\n"}}fieldXML(){return'<block type="comment">\n    <value name="TEXT">\n        <shadow type="text">\n            <field name="TEXT">Put here comments</field>\n        </shadow>\n    </value>\n</block>\n<block type="debugger">\n    <value name="TEXT">\n        <shadow type="text">\n            <field name="TEXT">my message for debug</field>\n        </shadow>\n    </value>\n</block>\n'}}class nd{constructor(){this.xhrBlocks=new Ep,this.defaultBlocks=new Ph,this.trycatchFinBlock=new Oh,this.ttsBlock=new xr,this.pianoBlock=new xh,this.filterBlocks=new Bd,this.auth0Blocks=new Hd,this.convertersBlocks=new qh,this.currentDateBlock=new ru,this.dateFromTextBlock=new Ud,this.emailBlocks=new Cu,this.exportFileBlock=new Cc,this.guiBlocks=new Su,this.chartBlock=new td,this.htmlblocks=new Fh,this.HTMLParserBlocks=new ed,this.propBlocks=new fd,this.createObjectBlocks=new Bh,this.windowsCreds=new Rf,this.waitBlocks1=new Hh,this.waitBlocks2=new Uh,this.commentBlock=new id}}var Vh=m(82734);class Tp{constructor(){}DownloadBlocks(l,o,a){var c=l.workspaceToDom(o,!0),f=l.domToPrettyText(c),E=new Blob([f],{type:"text/plain;charset=utf-16"});Vh.saveAs(E,a)}A(){return 1}LoadFile(l,o,a){o.clear();var c=l.textToDom(a);l.domToWorkspace(c,o)}formatInt(l){return l<10?"0"+l:l.toString(10)}formatDate(l){return`${this.formatInt(l.getFullYear())}${this.formatInt(l.getMonth()+1)}${this.formatInt(l.getDate())}${this.formatInt(l.getHours())}${this.formatInt(l.getMinutes())}${this.formatInt(l.getSeconds())}`}saveState(l,o,a){var c="BlocklyState"+(a||""),f=l.workspaceToDom(o,!0),E=l.domToPrettyText(f);window.localStorage.setItem(c,E)}restoreState(l,o,a){var f=window.localStorage.getItem("BlocklyState"+(a||""));if(((null==f?void 0:f.length)||0)>62){var E=l.textToDom(f);l.clearWorkspaceAndLoadFromXml(E,o)}return""}}const rd=m(86942);class gd{constructor(l,o){this.workspace=l,this.BlocklyJavaScript=o,this.latestCode="",this.step=0,this.highlightPause=!1,this.myInterpreter=null,this.runner=null}generateCodeAndLoadIntoInterpreter(){this.BlocklyJavaScript.STATEMENT_PREFIX="highlightBlock(%1);\n",this.BlocklyJavaScript.addReservedWords("highlightBlock"),this.latestCode=this.BlocklyJavaScript.workspaceToCode(this.workspace),this.resetStepUi(!0)}resetStepUi(l){this.step=0,this.workspace.highlightBlock(null),this.highlightPause=!1}resetInterpreter(){this.myInterpreter=null,this.runner&&(window.clearTimeout(this.runner),this.runner=null)}highlightBlock(l){this.workspace.highlightBlock(l),this.highlightPause=!0}nextStep(l,o){console.log("next step"),l.myInterpreter.step()?setTimeout((a,c)=>{a.nextStep(a,c)},10,l,o):(o?o():console.log("\n\n<< Program complete >>"),l.resetInterpreter(),l.resetStepUi(!1))}runCode(l,o,a,c){""==c&&(c=this.latestCode),this.myInterpreter||this.resetStepUi(!0),this.generateCodeAndLoadIntoInterpreter();var f=this;f.myInterpreter=l(c,(E,R)=>f.initApiJS(E,R,f,o,a)),1!=window.runOneByOne?setTimeout(function(){f.highlightPause=!1,f.runner=function(){f.myInterpreter&&(f.myInterpreter.run()?setTimeout(f.runner,10):(a?a():console.log("\n\n<< Program complete >>"),f.resetInterpreter(),f.resetStepUi(!1)))},f.runner&&f.runner()},100):this.nextStep(f,a)}initInterpreterWaitForSeconds(l,o){this.BlocklyJavaScript.addReservedWords("waitForSeconds");var a=l.createAsyncFunction(function(c,f){setTimeout(f,1e3*c)});l.setProperty(o,"waitForSeconds",a)}getCreds(l,o,a){var c=l.pseudoToNative(o),f="(localSite)";(a.startsWith("http://")||a.startsWith("https://"))&&(f=new URL(a).hostname);var E=!1;return f in c?E=c[f]:"*"in c&&(E=c["*"]),E}getHeaders(l,o,a){var c=l.pseudoToNative(o),f="(localSite)";(a.startsWith("http://")||a.startsWith("https://"))&&(f=new URL(a).hostname);var E=[];return f in c?E=c[f]:"*"in c&&(E=c["*"]),E}doGet(l,o,a,c){let f=new XMLHttpRequest;f.open("GET",l,!0),this.generateDataAndCreds(f,a,c,!1),f.onreadystatechange=function(){if(4==f.readyState){if(f.status>=200&&f.status<300){var E=JSON.stringify({origHref:l,objectToSend:"",status:f.status,statusOK:!0,text:f.responseText});return o(E)}return E=JSON.stringify({origHref:l,objectToSend:"",status:f.status,statusOK:!1,text:f.responseText,headers:f.getAllResponseHeaders()}),o(E)}},f.send(null)}exportToFile(l,o,a){var c;return c=1==a?this.b64toBlob1(o,"",512):new Blob([o],{type:"text/plain;charset=utf-8"}),Vh.saveAs(c,l),l}b64toBlob1(l,o="",a=512){const c=atob(l),f=[];for(let R=0;R<c.length;R+=a){const O=c.slice(R,R+a),F=new Array(O.length);for(let dt=0;dt<O.length;dt++)F[dt]=O.charCodeAt(dt);const J=new Uint8Array(F);f.push(J)}return new Blob(f,{type:o})}displayDateCurrentAsHuman(){return(new Date).toLocaleDateString(void 0,{day:"numeric",month:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}displayDateCurrentAsIso(){return(new Date).toISOString()}displayDateCurrentAsUnix(){return Date.now()}displayDateFormatted(l){switch(l){case"human":return this.displayDateCurrentAsHuman();case"iso":return this.displayDateCurrentAsIso();case"unix":return this.displayDateCurrentAsUnix();default:return console.log("Date time format not suported"),""}}generateDataAndCreds(l,o,a,c){if(a)l.withCredentials=a;else{var f=!1;if(o&&o.length>0)for(var E=0;E<o.length;E++){var R=o[E];"Content-Type"==R.name&&(f=!0),l.setRequestHeader(R.name,R.value)}c&&!f&&l.setRequestHeader("Content-Type","application/json;charset=UTF-8")}}doPut(l,o,a,c,f){let E=o,R=new XMLHttpRequest;R.open("PUT",l,!0),this.generateDataAndCreds(R,c,f,!!o),R.onreadystatechange=function(){if(4==R.readyState){if(R.status>=200&&R.status<300){var O=JSON.stringify({origHref:l,objectToSend:o,status:R.status,statusOK:!0,text:R.responseText});return a(O)}return O=JSON.stringify({origHref:l,objectToSend:o,status:R.status,statusOK:!1,text:R.responseText,headers:R.getAllResponseHeaders()}),a(O)}},R.send(E)}doDelete(l,o,a,c,f){let E=o;var R=new XMLHttpRequest;R.open("DELETE",l,!0),this.generateDataAndCreds(R,c,f,!!o),R.onreadystatechange=function(){if(4==R.readyState){if(R.status>=200&&R.status<300){var O=JSON.stringify({origHref:l,objectToSend:"",status:R.status,statusOK:!0,text:R.responseText});return a(O)}return O=JSON.stringify({origHref:l,status:R.status,statusOK:!1,text:R.responseText,objectToSend:o,headers:R.getAllResponseHeaders()}),a(O)}},R.send(E)}doPost(l,o,a,c,f){let E=o,R=new XMLHttpRequest;R.open("POST",l,!0),this.generateDataAndCreds(R,c,f,!!o),R.onreadystatechange=function(){if(4==R.readyState){if(R.status>=200&&R.status<300){var O=JSON.stringify({origHref:l,objectToSend:o,status:R.status,statusOK:!0,text:R.responseText});return a(O)}return O=JSON.stringify({origHref:l,objectToSend:o,status:R.status,statusOK:!1,text:R.responseText,headers:R.getAllResponseHeaders()}),a(O)}},R.send(E)}table2array(l){var o=l.rows,a=[];if(!o)return[];if(0==o.length)return[];for(var c=Array.from(o[0].children).map(F=>F.innerText),f=1;f<o.length;f++){for(var E=o[f].children,R={},O=0;O<E.length;O++)R[c[O]]=E[O].innerText;a.push(R)}return a}list2array(l){var o=l.getElementsByTagName("li"),a=[];if(0==o.length)return[];for(var c=0;c<o.length;c++)a.push({li:o[c].innerText});return a}parseDOMFromStringElements(l,o,a){var c,f=(new DOMParser).parseFromString(l,o),E=[];if(a.toString().indexOf(",")>-1)for(var R=a.split(","),O=0;O<R.length;O++)E=E.concat(Array.from(f.getElementsByTagName(R[O])));else E=(E=E.concat(f.getElementsByTagName(a)))[0];var F={};if(0==E.length)return F;switch(a){case"table":for(F={},O=0;O<E.length;O++)F["table"+O]=this.table2array(E[O]);break;case"a":F=[];var J=(null===(c=null==window?void 0:window.location)||void 0===c?void 0:c.host)||"";for(J.length>0&&(J=window.location.protocol+"//"+J),O=0;O<E.length;O++){var dt=E[O].href;J.length>0&&dt.startsWith(J)&&(dt=dt.substring(J.length)),F.push({href:dt,text:E[O].innerText})}break;case"img":for(F=[],O=0;O<E.length;O++)F.push({src:E[O].src});break;case"ul,ol":for(F={},O=0;O<E.length;O++)F["list"+O]=this.list2array(E[O]);break;case"h1,h2,h3,h4,h5,h6":for(F=[],O=0;O<E.length;O++)F.push({header:E[O].innerText});break;default:throw new Error(`tag !${a}! not supported`)}return JSON.stringify(F)}consoleLog(l,o){return console.log(l,o)}initApiJS(l,o,a,c,f){var E=Ei=>{c?c("\n error --\n"+Ei+"\n error --"):console.log(Ei)};l.setProperty(o,"errHandler",l.createNativeFunction(E)),l.setProperty(o,"consoleLog",l.createNativeFunction(function(Ei,Bi){return l.createPrimitive(a.consoleLog(Ei,Bi))})),l.setProperty(o,"parseDOMFromStringElements",l.createNativeFunction(function(Ei,Bi,Rn){return Ei=Ei?Ei.toString():"",l.createPrimitive(a.parseDOMFromStringElements(Ei,Bi,Rn))})),l.setProperty(o,"parseDomNative",l.createNativeFunction(E));var F=l.nativeToPseudo({"(localSite)":!1});l.setProperty(o,"withCredsForDomain",F);var J=l.nativeToPseudo({"(localSite)":[]});l.setProperty(o,"headersForDomain",J),l.setProperty(o,"alert1",l.createNativeFunction(function(Ei){Ei=Ei?Ei.toString():"",window.alert(Ei)})),l.setProperty(o,"playPiano",l.createNativeFunction(function(Ei,Bi,Rn){rd.Synth.createInstrument("piano").play(Ei,Bi,Rn)})),l.setProperty(o,"startDebugger",l.createNativeFunction(function(Ei,Bi,Rn){a.highlightBlock(Bi),console.log(Ei,Bi,Rn)})),l.setProperty(o,"alert",l.createNativeFunction(function(Ei){Ei=Ei?Ei.toString():"",c?c(Ei):console.log(Ei)})),l.setProperty(o,"waitTime",l.createAsyncFunction((Ei,Bi)=>{console.log(`waiting seconds ${Ei}`),setTimeout(Bi,1e3*Ei)})),l.setProperty(o,"displayDateFormatted",l.createNativeFunction(Ei=>a.displayDateFormatted(Ei))),l.setProperty(o,"exportToFile",l.createNativeFunction((Ei,Bi,Rn)=>a.exportToFile(Ei,Bi,Rn))),l.setProperty(o,"convertToCSV",l.createNativeFunction(Ei=>{var Bi=null;return Array.isArray(Ei)?Bi=Ei:((Bi="object"!=typeof Ei?JSON.parse(Ei):{})&&Bi.table0&&(Bi=Bi.table0),Bi&&Bi.list0&&(Bi=Bi.list0)),0==Bi.length?"":(Bi=[Object.keys(Bi[0])].concat(Bi)).map(gr=>Object.values(gr).toString()).join("\n")})),l.setProperty(o,"open",l.createNativeFunction(function(Ei){window.open(Ei,"_blank")})),l.setProperty(o,"changeHost",l.createNativeFunction(function(Ei,Bi){if(0==(Bi=(Bi=Bi?Bi.toString():"").trim()).length)return Ei;if(0==(Ei=(Ei=Ei||"").trim()).length&&!(Ei=Bi).startsWith("http"))throw`please put in front of ${Bi} http:// or https://`;var Rn=new URL(Ei);if(Bi.startsWith("http")){var gr=new URL(Bi);Rn.hostname=gr.hostname,Rn.protocol=gr.protocol}else Rn.hostname=Bi.replace("https://","").replace("http://","");var vr=Rn.href;return vr.endsWith("/")&&(vr=vr.substring(0,vr.length-1)),vr})),l.setProperty(o,"changePort",l.createNativeFunction(function(Ei,Bi){var Rn=new URL(Ei);console.log(`url ${Rn.href}`),Rn.port=Bi,console.log(`url ${Rn.href}`);var gr=Rn.href;return gr.endsWith("/")&&(gr=gr.substring(0,gr.length-1)),gr})),l.setProperty(o,"speakDefault",l.createNativeFunction(function(Ei,Bi,Rn,gr,vr){var qr=new SpeechSynthesisUtterance(Ei),Du=parseInt(Bi),nn=window.speechSynthesis.getVoices()[Du];qr.voice=nn,window.speechSynthesis.speak(qr)})),l.setProperty(o,"prompt",l.createAsyncFunction(function(Ei,Bi,Rn){Ei=Ei?Ei.toString():"",Bi=Bi?Bi.toString():"",Rn(window.prompt(Ei,Bi))})),a.BlocklyJavaScript.addReservedWords("waitForSeconds");var wn=l.createAsyncFunction(function(Ei,Bi){setTimeout(Bi,1e3*Ei)});l.setProperty(o,"waitForSeconds",wn),l.setProperty(o,"getXhr",l.createAsyncFunction((Ei,Bi)=>{var Rn=a.getHeaders(l,J,Ei),gr=a.getCreds(l,F,Ei);return a.doGet(Ei,Bi,Rn,gr)})),l.setProperty(o,"postXhr",l.createAsyncFunction((Ei,Bi,Rn)=>{try{var gr=a.getHeaders(l,J,Ei),vr=a.getCreds(l,F,Ei);a.doPost(Ei,Bi,Rn,gr,vr)}catch(qr){alert("is an error"+qr)}})),l.setProperty(o,"deleteXhr",l.createAsyncFunction((Ei,Bi,Rn)=>{try{var gr=a.getHeaders(l,J,Ei),vr=a.getCreds(l,F,Ei);a.doDelete(Ei,Bi,Rn,gr,vr)}catch(qr){alert("is an error"+qr)}})),l.setProperty(o,"putXhr",l.createAsyncFunction((Ei,Bi,Rn)=>{try{var gr=l.pseudoToNative(J),vr="(localSite)";(Ei.startsWith("http://")||Ei.startsWith("https://"))&&(vr=new URL(Ei).hostname);var qr=[];vr in gr&&(qr=gr[vr]),a.doPut(Ei,Bi,Rn,qr,!1)}catch(nn){alert("is an error"+nn)}})),l.setProperty(o,"highlightBlock",l.createNativeFunction(function(Ei){return Ei=Ei?Ei.toString():"",l.createPrimitive(a.highlightBlock(Ei))}))}}class Hc{constructor(l){this.table=l}reloadData(l,o){return this.table.dataLoader.load(l,void 0,void 0,void 0,o)}langText(){return this.table.modules.localize.getText(...arguments)}langBind(){return this.table.modules.localize.bind(...arguments)}langLocale(){return this.table.modules.localize.getLocale(...arguments)}commsConnections(){return this.table.modules.comms.getConnections(...arguments)}commsSend(){return this.table.modules.comms.send(...arguments)}layoutMode(){return this.table.modules.layout.getMode()}layoutRefresh(){return this.table.modules.layout.layout()}subscribe(){return this.table.eventBus.subscribe(...arguments)}unsubscribe(){return this.table.eventBus.unsubscribe(...arguments)}subscribed(l){return this.table.eventBus.subscribed(l)}subscriptionChange(){return this.table.eventBus.subscriptionChange(...arguments)}dispatch(){return this.table.eventBus.dispatch(...arguments)}chain(){return this.table.eventBus.chain(...arguments)}confirm(){return this.table.eventBus.confirm(...arguments)}dispatchExternal(){return this.table.externalEvents.dispatch(...arguments)}subscribedExternal(l){return this.table.externalEvents.subscribed(l)}subscriptionChangeExternal(){return this.table.externalEvents.subscriptionChange(...arguments)}options(l,o){return void 0!==o&&(this.table.options[l]=o),this.table.options[l]}setOption(l,o){return void 0!==o&&(this.table.options[l]=o),this.table.options[l]}module(l){return this.table.module(l)}}class Eo extends Hc{constructor(l,o){super(l),this._handler=null}initialize(){}registerTableOption(l,o){this.table.optionsList.register(l,o)}registerColumnOption(l,o){this.table.columnManager.optionsList.register(l,o)}registerTableFunction(l,o){void 0===this.table[l]?this.table[l]=o:console.warn("Unable to bind table function, name already in use",l)}registerComponentFunction(l,o,a){return this.table.componentFunctionBinder.bind(l,o,a)}registerDataHandler(l,o){this.table.rowManager.registerDataPipelineHandler(l,o),this._handler=l}registerDisplayHandler(l,o){this.table.rowManager.registerDisplayPipelineHandler(l,o),this._handler=l}refreshData(l,o){o||(o=this._handler),o&&this.table.rowManager.refreshActiveData(o,!1,l)}}class Es{static elVisible(l){return!(l.offsetWidth<=0&&l.offsetHeight<=0)}static elOffset(l){var o=l.getBoundingClientRect();return{top:o.top+window.pageYOffset-document.documentElement.clientTop,left:o.left+window.pageXOffset-document.documentElement.clientLeft}}static deepClone(l,o,a=[]){var c={}.__proto__,f=[].__proto__;for(var E in o||(o=Object.assign(Array.isArray(l)?[]:{},l)),l){let O,F,R=l[E];null!=R&&"object"==typeof R&&(R.__proto__===c||R.__proto__===f)&&(O=a.findIndex(J=>J.subject===R),O>-1?o[E]=a[O].copy:(F=Object.assign(Array.isArray(R)?[]:{},R),a.unshift({subject:R,copy:F}),o[E]=this.deepClone(R,F,a)))}return o}}var Df={};let Cp=(()=>{class g extends Eo{constructor(o){super(o),this.allowedTypes=["","data","download","clipboard","print","htmlOutput"],this.registerColumnOption("accessor"),this.registerColumnOption("accessorParams"),this.registerColumnOption("accessorData"),this.registerColumnOption("accessorDataParams"),this.registerColumnOption("accessorDownload"),this.registerColumnOption("accessorDownloadParams"),this.registerColumnOption("accessorClipboard"),this.registerColumnOption("accessorClipboardParams"),this.registerColumnOption("accessorPrint"),this.registerColumnOption("accessorPrintParams"),this.registerColumnOption("accessorHtmlOutput"),this.registerColumnOption("accessorHtmlOutputParams")}initialize(){this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("row-data-retrieve",this.transformRow.bind(this))}initializeColumn(o){var a=!1,c={};this.allowedTypes.forEach(f=>{var R,E="accessor"+(f.charAt(0).toUpperCase()+f.slice(1));o.definition[E]&&(R=this.lookupAccessor(o.definition[E]))&&(a=!0,c[E]={accessor:R,params:o.definition[E+"Params"]||{}})}),a&&(o.modules.accessor=c)}lookupAccessor(o){var a=!1;switch(typeof o){case"string":g.accessors[o]?a=g.accessors[o]:console.warn("Accessor Error - No such accessor found, ignoring: ",o);break;case"function":a=o}return a}transformRow(o,a){var c="accessor"+(a.charAt(0).toUpperCase()+a.slice(1)),f=o.getComponent(),E=Es.deepClone(o.data||{});return this.table.columnManager.traverse(function(R){var O,F,J,dt;R.modules.accessor&&(F=R.modules.accessor[c]||R.modules.accessor.accessor||!1)&&"undefined"!=(O=R.getFieldValue(E))&&(dt=R.getComponent(),J="function"==typeof F.params?F.params(O,E,a,dt,f):F.params,R.setFieldValue(E,F.accessor(O,E,a,J,dt,f)))}),E}}return g.moduleName="accessor",g.accessors=Df,g})();var If={method:"GET"};function Gh(g,l){var o=[];if(l=l||"",Array.isArray(g))g.forEach((c,f)=>{o=o.concat(Gh(c,l?l+"["+f+"]":f))});else if("object"==typeof g)for(var a in g)o=o.concat(Gh(g[a],l?l+"["+a+"]":a));else o.push({key:l,value:g});return o}function md(g){var l=Gh(g),o=[];return l.forEach(function(a){o.push(encodeURIComponent(a.key)+"="+encodeURIComponent(a.value))}),o.join("&")}function Vd(g,l,o){return g&&o&&Object.keys(o).length&&(!l.method||"get"==l.method.toLowerCase())&&(l.method="get",g+=(g.includes("?")?"&":"?")+md(o)),g}function _d(g,l,o){var a;return new Promise((c,f)=>{if(g=this.urlGenerator.call(this.table,g,l,o),"GET"!=l.method.toUpperCase())if(a="object"==typeof this.table.options.ajaxContentType?this.table.options.ajaxContentType:this.contentTypeFormatters[this.table.options.ajaxContentType]){for(var E in a.headers)l.headers||(l.headers={}),void 0===l.headers[E]&&(l.headers[E]=a.headers[E]);l.body=a.body.call(this,g,l,o)}else console.warn("Ajax Error - Invalid ajaxContentType value:",this.table.options.ajaxContentType);g?(void 0===l.headers&&(l.headers={}),void 0===l.headers.Accept&&(l.headers.Accept="application/json"),void 0===l.headers["X-Requested-With"]&&(l.headers["X-Requested-With"]="XMLHttpRequest"),void 0===l.mode&&(l.mode="cors"),"cors"==l.mode?(void 0===l.headers.Origin&&(l.headers.Origin=window.location.origin),void 0===l.credentials&&(l.credentials="same-origin")):void 0===l.credentials&&(l.credentials="include"),fetch(g,l).then(R=>{R.ok?R.json().then(O=>{c(O)}).catch(O=>{f(O),console.warn("Ajax Load Error - Invalid JSON returned",O)}):(console.error("Ajax Load Error - Connection Error: "+R.status,R.statusText),f(R))}).catch(R=>{console.error("Ajax Load Error - Connection Error: ",R),f(R)})):(console.warn("Ajax Load Error - No URL Set"),c([]))})}function N(g,l){var o=[];if(l=l||"",Array.isArray(g))g.forEach((c,f)=>{o=o.concat(N(c,l?l+"["+f+"]":f))});else if("object"==typeof g)for(var a in g)o=o.concat(N(g[a],l?l+"["+a+"]":a));else o.push({key:l,value:g});return o}var z={json:{headers:{"Content-Type":"application/json"},body:function(g,l,o){return JSON.stringify(o)}},form:{headers:{},body:function(g,l,o){var a=N(o),c=new FormData;return a.forEach(function(f){c.append(f.key,f.value)}),c}}};let y=(()=>{class g extends Eo{constructor(o){super(o),this.config=!1,this.url="",this.urlGenerator=!1,this.params=!1,this.loaderPromise=!1,this.registerTableOption("ajaxURL",!1),this.registerTableOption("ajaxURLGenerator",!1),this.registerTableOption("ajaxParams",{}),this.registerTableOption("ajaxConfig","get"),this.registerTableOption("ajaxContentType","form"),this.registerTableOption("ajaxRequestFunc",!1),this.registerTableOption("ajaxRequesting",function(){}),this.registerTableOption("ajaxResponse",!1),this.contentTypeFormatters=g.contentTypeFormatters}initialize(){this.loaderPromise=this.table.options.ajaxRequestFunc||g.defaultLoaderPromise,this.urlGenerator=this.table.options.ajaxURLGenerator||g.defaultURLGenerator,this.table.options.ajaxParams&&this.setParams(this.table.options.ajaxParams),this.table.options.ajaxConfig&&this.setConfig(this.table.options.ajaxConfig),this.table.options.ajaxURL&&this.setUrl(this.table.options.ajaxURL),this.registerTableFunction("getAjaxUrl",this.getUrl.bind(this)),this.subscribe("data-loading",this.requestDataCheck.bind(this)),this.subscribe("data-load",this.requestData.bind(this))}requestDataCheck(o,a,c,f){return!((o||!this.url)&&"string"!=typeof o)}requestData(o,a,c,f,E){return this.requestDataCheck(o)?(o&&this.setUrl(o),a&&this.setParams(a,!0),c&&this.setConfig(c),this.sendRequest()):E}setParams(o,a){if(a){this.params=this.params||{};for(let c in o)this.params[c]=o[c]}else this.params=o}getParams(){return this.params||{}}setConfig(o){if(this._loadDefaultConfig(),"string"==typeof o)this.config.method=o;else for(let a in o)this.config[a]=o[a]}_loadDefaultConfig(o){if(!this.config||o){this.config={};for(let a in g.defaultConfig)this.config[a]=g.defaultConfig[a]}}setUrl(o){this.url=o}getUrl(){return this.url}sendRequest(o){var a=this.url;return this._loadDefaultConfig(),!1!==this.table.options.ajaxRequesting.call(this.table,this.url,this.params)?this.loaderPromise(a,this.config,this.params).then(c=>(this.table.options.ajaxResponse&&(c=this.table.options.ajaxResponse.call(this.table,this.url,this.params,c)),c)):Promise.reject()}}return g.moduleName="ajax",g.defaultConfig=If,g.defaultURLGenerator=Vd,g.defaultLoaderPromise=_d,g.contentTypeFormatters=z,g})();var k={replace:function(g){return this.table.setData(g)},update:function(g){return this.table.updateOrAddData(g)},insert:function(g){return this.table.addData(g)}},tt={table:function(g){var l=[],o=!0,a=this.table.columnManager.columns,c=[],f=[];return(g=g.split("\n")).forEach(function(E){l.push(E.split("\t"))}),!(!l.length||1===l.length&&l[0].length<2)&&(l[0].forEach(function(E){var R=a.find(function(O){return E&&O.definition.title&&E.trim()&&O.definition.title.trim()===E.trim()});R?c.push(R):o=!1}),o||(o=!0,c=[],l[0].forEach(function(E){var R=a.find(function(O){return E&&O.field&&E.trim()&&O.field.trim()===E.trim()});R?c.push(R):o=!1}),o||(c=this.table.columnManager.columnsByIndex)),o&&l.shift(),l.forEach(function(E){var R={};E.forEach(function(O,F){c[F]&&(R[c[F].field]=O)}),f.push(R)}),f)}};let Ut=(()=>{class g extends Eo{constructor(o){super(o),this.mode=!0,this.pasteParser=function(){},this.pasteAction=function(){},this.customSelection=!1,this.rowRange=!1,this.blocked=!0,this.registerTableOption("clipboard",!1),this.registerTableOption("clipboardCopyStyled",!0),this.registerTableOption("clipboardCopyConfig",!1),this.registerTableOption("clipboardCopyFormatter",!1),this.registerTableOption("clipboardCopyRowRange","active"),this.registerTableOption("clipboardPasteParser","table"),this.registerTableOption("clipboardPasteAction","insert"),this.registerColumnOption("clipboard"),this.registerColumnOption("titleClipboard")}initialize(){this.mode=this.table.options.clipboard,this.rowRange=this.table.options.clipboardCopyRowRange,(!0===this.mode||"copy"===this.mode)&&this.table.element.addEventListener("copy",o=>{var a,c;if(!this.blocked){if(o.preventDefault(),this.customSelection)a=this.customSelection,this.table.options.clipboardCopyFormatter&&(a=this.table.options.clipboardCopyFormatter("plain",a));else{var f=this.table.modules.export.generateExportList(this.table.options.clipboardCopyConfig,this.table.options.clipboardCopyStyled,this.rowRange,"clipboard");a=(c=this.table.modules.export.genereateHTMLTable(f))?this.generatePlainContent(f):"",this.table.options.clipboardCopyFormatter&&(a=this.table.options.clipboardCopyFormatter("plain",a),c=this.table.options.clipboardCopyFormatter("html",c))}window.clipboardData&&window.clipboardData.setData?window.clipboardData.setData("Text",a):o.clipboardData&&o.clipboardData.setData?(o.clipboardData.setData("text/plain",a),c&&o.clipboardData.setData("text/html",c)):o.originalEvent&&o.originalEvent.clipboardData.setData&&(o.originalEvent.clipboardData.setData("text/plain",a),c&&o.originalEvent.clipboardData.setData("text/html",c)),this.dispatchExternal("clipboardCopied",a,c),this.reset()}}),(!0===this.mode||"paste"===this.mode)&&this.table.element.addEventListener("paste",o=>{this.paste(o)}),this.setPasteParser(this.table.options.clipboardPasteParser),this.setPasteAction(this.table.options.clipboardPasteAction),this.registerTableFunction("copyToClipboard",this.copy.bind(this))}reset(){this.blocked=!0,this.customSelection=!1}generatePlainContent(o){var a=[];return o.forEach(c=>{var f=[];c.columns.forEach(E=>{var R="";if(E)if("group"===c.type&&(E.value=E.component.getKey()),null===E.value)R="";else switch(typeof E.value){case"object":R=JSON.stringify(E.value);break;case"undefined":R="";break;default:R=E.value}f.push(R)}),a.push(f.join("\t"))}),a.join("\n")}copy(o,a){var c,f;this.blocked=!1,this.customSelection=!1,(!0===this.mode||"copy"===this.mode)&&(this.rowRange=o||this.table.options.clipboardCopyRowRange,void 0!==window.getSelection&&void 0!==document.createRange?((o=document.createRange()).selectNodeContents(this.table.element),(c=window.getSelection()).toString()&&a&&(this.customSelection=c.toString()),c.removeAllRanges(),c.addRange(o)):void 0!==document.selection&&void 0!==document.body.createTextRange&&((f=document.body.createTextRange()).moveToElementText(this.table.element),f.select()),document.execCommand("copy"),c&&c.removeAllRanges())}setPasteAction(o){switch(typeof o){case"string":this.pasteAction=g.pasteActions[o],this.pasteAction||console.warn("Clipboard Error - No such paste action found:",o);break;case"function":this.pasteAction=o}}setPasteParser(o){switch(typeof o){case"string":this.pasteParser=g.pasteParsers[o],this.pasteParser||console.warn("Clipboard Error - No such paste parser found:",o);break;case"function":this.pasteParser=o}}paste(o){var a,c,f;this.checkPaseOrigin(o)&&(a=this.getPasteData(o),(c=this.pasteParser.call(this,a))?(o.preventDefault(),this.table.modExists("mutator")&&(c=this.mutateData(c)),f=this.pasteAction.call(this,c),this.dispatchExternal("clipboardPasted",a,c,f)):this.dispatchExternal("clipboardPasteError",a))}mutateData(o){var a=[];return Array.isArray(o)?o.forEach(c=>{a.push(this.table.modules.mutator.transformRow(c,"clipboard"))}):a=o,a}checkPaseOrigin(o){var a=!0;return("DIV"!=o.target.tagName||this.table.modules.edit.currentCell)&&(a=!1),a}getPasteData(o){var a;return window.clipboardData&&window.clipboardData.getData?a=window.clipboardData.getData("Text"):o.clipboardData&&o.clipboardData.getData?a=o.clipboardData.getData("text/plain"):o.originalEvent&&o.originalEvent.clipboardData.getData&&(a=o.originalEvent.clipboardData.getData("text/plain")),a}}return g.moduleName="clipboard",g.pasteActions=k,g.pasteParsers=tt,g})();class ii{constructor(l){return this._row=l,new Proxy(this,{get:function(o,a,c){return void 0!==o[a]?o[a]:o._row.table.componentFunctionBinder.handle("row",o._row,a)}})}getData(l){return this._row.getData(l)}getElement(){return this._row.getElement()}getTable(){return this._row.table}getCells(){var l=[];return this._row.getCells().forEach(function(o){l.push(o.getComponent())}),l}getCell(l){var o=this._row.getCell(l);return!!o&&o.getComponent()}_getSelf(){return this._row}}class Fi{constructor(l){return this._cell=l,new Proxy(this,{get:function(o,a,c){return void 0!==o[a]?o[a]:o._cell.table.componentFunctionBinder.handle("cell",o._cell,a)}})}getValue(){return this._cell.getValue()}getOldValue(){return this._cell.getOldValue()}getInitialValue(){return this._cell.initialValue}getElement(){return this._cell.getElement()}getRow(){return this._cell.row.getComponent()}getData(){return this._cell.row.getData()}getField(){return this._cell.column.getField()}getColumn(){return this._cell.column.getComponent()}setValue(l,o){void 0===o&&(o=!0),this._cell.setValue(l,o)}restoreOldValue(){this._cell.setValueActual(this._cell.getOldValue())}restoreInitialValue(){this._cell.setValueActual(this._cell.initialValue)}checkHeight(){this._cell.checkHeight()}getTable(){return this._cell.table}_getSelf(){return this._cell}}class un extends Hc{constructor(l,o){super(l.table),this.table=l.table,this.column=l,this.row=o,this.element=null,this.value=null,this.oldValue=null,this.modules={},this.height=null,this.width=null,this.minWidth=null,this.component=null,this.loaded=!1,this.build()}build(){this.generateElement(),this.setWidth(),this._configureCell(),this.setValueActual(this.column.getFieldValue(this.row.data)),this.initialValue=this.value}generateElement(){this.element=document.createElement("div"),this.element.className="tabulator-cell",this.element.setAttribute("role","gridcell"),this.element=this.element}_configureCell(){var l=this.element,o=this.column.getField();l.style.textAlign=this.column.hozAlign,this.column.vertAlign&&(l.style.display="inline-flex",l.style.alignItems={top:"flex-start",bottom:"flex-end",middle:"center"}[this.column.vertAlign]||"",this.column.hozAlign&&(l.style.justifyContent={left:"flex-start",right:"flex-end",center:"center"}[this.column.hozAlign]||"")),o&&l.setAttribute("tabulator-field",o),this.column.definition.cssClass&&this.column.definition.cssClass.split(" ").forEach(E=>{l.classList.add(E)}),"hover"===this.table.options.tooltipGenerationMode&&l.addEventListener("mouseenter",E=>{this._generateTooltip()}),this.dispatch("cell-init",this),this.column.visible||this.hide()}_generateContents(){var l;switch(typeof(l=this.chain("cell-format",this,null,()=>this.element.innerHTML=this.value))){case"object":if(l instanceof Node){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.appendChild(l)}else this.element.innerHTML="",null!=l&&console.warn("Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",l);break;case"undefined":case"null":this.element.innerHTML="";break;default:this.element.innerHTML=l}}cellRendered(){this.dispatch("cell-rendered",this)}_generateTooltip(){var l=this.column.tooltip;l?(!0===l?l=this.value:"function"==typeof l&&!1===(l=l(this.getComponent()))&&(l=""),void 0===l&&(l=""),this.element.setAttribute("title",l)):this.element.setAttribute("title","")}getElement(l){return this.loaded||(this.loaded=!0,l||this.layoutElement()),this.element}getValue(){return this.value}getOldValue(){return this.oldValue}setValue(l,o){this.setValueProcessData(l,o)&&(this.dispatch("cell-value-updated",this),this.cellRendered(),this.dispatchExternal("cellEdited",this.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()))}setValueProcessData(l,o){var a=!1;return this.value!=l&&(a=!0,o&&(l=this.chain("cell-value-changing",[this,l],null,l))),this.setValueActual(l),a&&this.dispatch("cell-value-changed",this),a}setValueActual(l){this.oldValue=this.value,this.value=l,this.dispatch("cell-value-save-before",this),this.column.setFieldValue(this.row.data,l),this.dispatch("cell-value-save-after",this),this.loaded&&this.layoutElement()}layoutElement(){this._generateContents(),this._generateTooltip(),this.dispatch("cell-layout",this)}setWidth(){this.width=this.column.width,this.element.style.width=this.column.widthStyled}clearWidth(){this.width="",this.element.style.width=""}getWidth(){return this.width||this.element.offsetWidth}setMinWidth(){this.minWidth=this.column.minWidth,this.element.style.minWidth=this.column.minWidthStyled}setMaxWidth(){this.maxWidth=this.column.maxWidth,this.element.style.maxWidth=this.column.maxWidthStyled}checkHeight(){this.row.reinitializeHeight()}clearHeight(){this.element.style.height="",this.height=null}setHeight(){this.height=this.row.height,this.element.style.height=this.row.heightStyled}getHeight(){return this.height||this.element.offsetHeight}show(){this.element.style.display=this.column.vertAlign?"inline-flex":""}hide(){this.element.style.display="none"}delete(){this.dispatch("cell-delete",this),!this.table.rowManager.redrawBlock&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=!1,this.column.deleteCell(this),this.row.deleteCell(this),this.calcs={}}getIndex(){return this.row.getCellIndex(this)}getComponent(){return this.component||(this.component=new Fi(this)),this.component}}class _r{constructor(l){return this._column=l,this.type="ColumnComponent",new Proxy(this,{get:function(o,a,c){return void 0!==o[a]?o[a]:o._column.table.componentFunctionBinder.handle("column",o._column,a)}})}getElement(){return this._column.getElement()}getDefinition(){return this._column.getDefinition()}getField(){return this._column.getField()}getCells(){var l=[];return this._column.cells.forEach(function(o){l.push(o.getComponent())}),l}isVisible(){return this._column.visible}show(){this._column.isGroup?this._column.columns.forEach(function(l){l.show()}):this._column.show()}hide(){this._column.isGroup?this._column.columns.forEach(function(l){l.hide()}):this._column.hide()}toggle(){this._column.visible?this.hide():this.show()}delete(){return this._column.delete()}getSubColumns(){var l=[];return this._column.columns.length&&this._column.columns.forEach(function(o){l.push(o.getComponent())}),l}getParentColumn(){return this._column.parent instanceof Column&&this._column.parent.getComponent()}_getSelf(){return this._column}scrollTo(){return this._column.table.columnManager.scrollToColumn(this._column)}getTable(){return this._column.table}move(l,o){var a=this._column.table.columnManager.findColumn(l);a?this._column.table.columnManager.moveColumn(this._column,a,o):console.warn("Move Error - No matching column found:",a)}getNextColumn(){var l=this._column.nextColumn();return!!l&&l.getComponent()}getPrevColumn(){var l=this._column.prevColumn();return!!l&&l.getComponent()}updateDefinition(l){return this._column.updateDefinition(l)}getWidth(){return this._column.getWidth()}setWidth(l){var o;return o=!0===l?this._column.reinitializeWidth(!0):this._column.setWidth(l),this._column.table.columnManager.renderer.rerenderColumns(!0),o}}var yn={title:void 0,field:void 0,columns:void 0,visible:void 0,hozAlign:void 0,vertAlign:void 0,width:void 0,minWidth:40,maxWidth:void 0,tooltip:void 0,cssClass:void 0,variableHeight:void 0,headerTooltip:void 0,headerVertical:void 0,headerHozAlign:void 0,editableTitle:void 0};let Hr=(()=>{class g extends Hc{constructor(o,a){super(a.table),this.definition=o,this.parent=a,this.type="column",this.columns=[],this.cells=[],this.element=this.createElement(),this.contentElement=!1,this.titleHolderElement=!1,this.titleElement=!1,this.groupElement=this.createGroupElement(),this.isGroup=!1,this.tooltip=!1,this.hozAlign="",this.vertAlign="",this.field="",this.fieldStructure="",this.getFieldValue="",this.setFieldValue="",this.titleFormatterRendered=!1,this.mapDefinitions(),this.setField(this.definition.field),this.modules={},this.width=null,this.widthStyled="",this.maxWidth=null,this.maxWidthStyled="",this.minWidth=null,this.minWidthStyled="",this.widthFixed=!1,this.visible=!0,this.component=null,this.definition.columns?(this.isGroup=!0,this.definition.columns.forEach((c,f)=>{var E=new g(c,this);this.attachColumn(E)}),this.checkColumnVisibility()):a.registerColumnField(this),this._initialize(),this.bindModuleColumns()}createElement(){var o=document.createElement("div");return o.classList.add("tabulator-col"),o.setAttribute("role","columnheader"),o.setAttribute("aria-sort","none"),o}createGroupElement(){var o=document.createElement("div");return o.classList.add("tabulator-col-group-cols"),o}mapDefinitions(){var o=this.table.options.columnDefaults;if(o)for(let a in o)void 0===this.definition[a]&&(this.definition[a]=o[a]);this.definition=this.table.columnManager.optionsList.generate(g.defaultOptionList,this.definition)}checkDefinition(){Object.keys(this.definition).forEach(o=>{-1===g.defaultOptionList.indexOf(o)&&console.warn("Invalid column definition option in '"+(this.field||this.definition.title)+"' column:",o)})}setField(o){this.field=o,this.fieldStructure=o?this.table.options.nestedFieldSeparator?o.split(this.table.options.nestedFieldSeparator):[o]:[],this.getFieldValue=this.fieldStructure.length>1?this._getNestedData:this._getFlatData,this.setFieldValue=this.fieldStructure.length>1?this._setNestedData:this._setFlatData}registerColumnPosition(o){this.parent.registerColumnPosition(o)}registerColumnField(o){this.parent.registerColumnField(o)}reRegisterPosition(){this.isGroup?this.columns.forEach(function(o){o.reRegisterPosition()}):this.registerColumnPosition(this)}_mapDepricatedFunctionality(){}setTooltip(){var o=this.definition,a=void 0===o.headerTooltip?o.tooltip:o.headerTooltip;a?!0===a?o.field?this.langBind("columns|"+o.field,c=>{this.element.setAttribute("title",c||o.title)}):this.element.setAttribute("title",o.title):("function"==typeof a&&!1===(a=a(this.getComponent()))&&(a=""),this.element.setAttribute("title",a)):this.element.setAttribute("title","")}_initialize(){for(var o=this.definition;this.element.firstChild;)this.element.removeChild(this.element.firstChild);o.headerVertical&&(this.element.classList.add("tabulator-col-vertical"),"flip"===o.headerVertical&&this.element.classList.add("tabulator-col-vertical-flip")),this.contentElement=this._bindEvents(),this.contentElement=this._buildColumnHeaderContent(),this.element.appendChild(this.contentElement),this.isGroup?this._buildGroupHeader():this._buildColumnHeader(),this.setTooltip(),this.dispatch("column-init",this),this.element.addEventListener("mouseenter",a=>{this.setTooltip()})}_bindEvents(){var a,c,f,o=this.definition;"function"==typeof o.headerClick&&this.element.addEventListener("click",E=>{o.headerClick(E,this.getComponent())}),"function"==typeof o.headerDblClick&&this.element.addEventListener("dblclick",E=>{o.headerDblClick(E,this.getComponent())}),"function"==typeof o.headerContext&&this.element.addEventListener("contextmenu",E=>{o.headerContext(E,this.getComponent())}),"function"==typeof o.headerTap&&(f=!1,this.element.addEventListener("touchstart",E=>{f=!0},{passive:!0}),this.element.addEventListener("touchend",E=>{f&&o.headerTap(E,this.getComponent()),f=!1})),"function"==typeof o.headerDblTap&&(a=null,this.element.addEventListener("touchend",E=>{a?(clearTimeout(a),a=null,o.headerDblTap(E,this.getComponent())):a=setTimeout(()=>{clearTimeout(a),a=null},300)})),"function"==typeof o.headerTapHold&&(c=null,this.element.addEventListener("touchstart",E=>{clearTimeout(c),c=setTimeout(function(){clearTimeout(c),c=null,f=!1,o.headerTapHold(E,this.getComponent())},1e3)},{passive:!0}),this.element.addEventListener("touchend",E=>{clearTimeout(c),c=null}))}_buildColumnHeader(){var o=this.definition;this.dispatch("column-layout",this),void 0!==o.visible&&(o.visible?this.show(!0):this.hide(!0)),o.cssClass&&o.cssClass.split(" ").forEach(f=>{this.element.classList.add(f)}),o.field&&this.element.setAttribute("tabulator-field",o.field),this.setMinWidth(parseInt(o.minWidth)),o.maxWidth&&this.setMaxWidth(parseInt(o.maxWidth)),this.reinitializeWidth(),this.tooltip=this.definition.tooltip,this.hozAlign=this.definition.hozAlign,this.vertAlign=this.definition.vertAlign,this.titleElement.style.textAlign=this.definition.headerHozAlign}_buildColumnHeaderContent(){var c=document.createElement("div");return c.classList.add("tabulator-col-content"),this.titleHolderElement=document.createElement("div"),this.titleHolderElement.classList.add("tabulator-col-title-holder"),c.appendChild(this.titleHolderElement),this.titleElement=this._buildColumnHeaderTitle(),this.titleHolderElement.appendChild(this.titleElement),c}_buildColumnHeaderTitle(){var o=this.definition,a=document.createElement("div");if(a.classList.add("tabulator-col-title"),o.editableTitle){var c=document.createElement("input");c.classList.add("tabulator-title-editor"),c.addEventListener("click",f=>{f.stopPropagation(),c.focus()}),c.addEventListener("change",()=>{o.title=c.value,this.dispatchExternal("columnTitleChanged",this.getComponent())}),a.appendChild(c),o.field?this.langBind("columns|"+o.field,f=>{c.value=f||o.title||"&nbsp;"}):c.value=o.title||"&nbsp;"}else o.field?this.langBind("columns|"+o.field,f=>{this._formatColumnHeaderTitle(a,f||o.title||"&nbsp;")}):this._formatColumnHeaderTitle(a,o.title||"&nbsp;");return a}_formatColumnHeaderTitle(o,a){var c=this.chain("column-format",[this,a,o],null,()=>a);switch(typeof c){case"object":c instanceof Node?o.appendChild(c):(o.innerHTML="",console.warn("Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",c));break;case"undefined":case"null":o.innerHTML="";break;default:o.innerHTML=c}}_buildGroupHeader(){this.element.classList.add("tabulator-col-group"),this.element.setAttribute("role","columngroup"),this.element.setAttribute("aria-title",this.definition.title),this.definition.cssClass&&this.definition.cssClass.split(" ").forEach(a=>{this.element.classList.add(a)}),this.titleElement.style.textAlign=this.definition.headerHozAlign,this.element.appendChild(this.groupElement)}_getFlatData(o){return o[this.field]}_getNestedData(o){var E,a=o,c=this.fieldStructure,f=c.length;for(let R=0;R<f&&(E=a=a[c[R]],a);R++);return E}_setFlatData(o,a){this.field&&(o[this.field]=a)}_setNestedData(o,a){var c=o,f=this.fieldStructure,E=f.length;for(let R=0;R<E;R++)if(R==E-1)c[f[R]]=a;else{if(!c[f[R]]){if(void 0===a)break;c[f[R]]={}}c=c[f[R]]}}attachColumn(o){this.groupElement?(this.columns.push(o),this.groupElement.appendChild(o.getElement())):console.warn("Column Warning - Column being attached to another column instead of column group")}verticalAlign(o,a){var c=this.parent.isGroup?this.parent.getGroupElement().clientHeight:a||this.parent.getHeadersElement().clientHeight;this.element.style.height=c+"px",this.isGroup&&(this.groupElement.style.minHeight=c-this.contentElement.offsetHeight+"px"),!this.isGroup&&"top"!==o&&(this.element.style.paddingTop="bottom"===o?this.element.clientHeight-this.contentElement.offsetHeight+"px":(this.element.clientHeight-this.contentElement.offsetHeight)/2+"px"),this.columns.forEach(function(f){f.verticalAlign(o)})}clearVerticalAlign(){this.element.style.paddingTop="",this.element.style.height="",this.element.style.minHeight="",this.groupElement.style.minHeight="",this.columns.forEach(function(o){o.clearVerticalAlign()})}bindModuleColumns(){"rownum"==this.definition.formatter&&(this.table.rowManager.rowNumColumn=this)}getElement(){return this.element}getGroupElement(){return this.groupElement}getField(){return this.field}getFirstColumn(){return this.isGroup?!!this.columns.length&&this.columns[0].getFirstColumn():this}getLastColumn(){return this.isGroup?!!this.columns.length&&this.columns[this.columns.length-1].getLastColumn():this}getColumns(){return this.columns}getCells(){return this.cells}getTopColumn(){return this.parent.isGroup?this.parent.getTopColumn():this}getDefinition(o){var a=[];return this.isGroup&&o&&(this.columns.forEach(function(c){a.push(c.getDefinition(!0))}),this.definition.columns=a),this.definition}checkColumnVisibility(){var o=!1;this.columns.forEach(function(a){a.visible&&(o=!0)}),o?(this.show(),this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!1)):this.hide()}show(o,a){this.visible||(this.visible=!0,this.element.style.display="",this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(c){c.show()}),!this.isGroup&&null===this.width&&this.reinitializeWidth(),this.table.columnManager.verticalAlignHeaders(),this.dispatch("column-show",this,a),o||this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!0),this.parent.isGroup&&this.parent.matchChildWidths(),this.silent||this.table.columnManager.renderer.rerenderColumns())}hide(o,a){this.visible&&(this.visible=!1,this.element.style.display="none",this.table.columnManager.verticalAlignHeaders(),this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(c){c.hide()}),this.dispatch("column-hide",this),o||this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!1),this.parent.isGroup&&this.parent.matchChildWidths(),this.silent||this.table.columnManager.renderer.rerenderColumns())}matchChildWidths(){var o=0;this.contentElement&&this.columns.length&&(this.columns.forEach(function(a){a.visible&&(o+=a.getWidth())}),this.contentElement.style.maxWidth=o-1+"px",this.parent.isGroup&&this.parent.matchChildWidths())}removeChild(o){var a=this.columns.indexOf(o);a>-1&&this.columns.splice(a,1),this.columns.length||this.delete()}setWidth(o){this.widthFixed=!0,this.setWidthActual(o)}setWidthActual(o){isNaN(o)&&(o=Math.floor(this.table.element.clientWidth/100*parseInt(o))),o=Math.max(this.minWidth,o),this.maxWidth&&(o=Math.min(this.maxWidth,o)),this.width=o,this.widthStyled=o?o+"px":"",this.element.style.width=this.widthStyled,this.isGroup||this.cells.forEach(function(a){a.setWidth()}),this.parent.isGroup&&this.parent.matchChildWidths(),this.dispatch("column-width",this)}checkCellHeights(){var o=[];this.cells.forEach(function(a){a.row.heightInitialized&&(null!==a.row.getElement().offsetParent?(o.push(a.row),a.row.clearCellHeight()):a.row.heightInitialized=!1)}),o.forEach(function(a){a.calcHeight()}),o.forEach(function(a){a.setCellHeight()})}getWidth(){var o=0;return this.isGroup?this.columns.forEach(function(a){a.visible&&(o+=a.getWidth())}):o=this.width,o}getHeight(){return this.element.offsetHeight}setMinWidth(o){this.minWidth=o,this.minWidthStyled=o?o+"px":"",this.element.style.minWidth=this.minWidthStyled,this.cells.forEach(function(a){a.setMinWidth()})}setMaxWidth(o){this.maxWidth=o,this.maxWidthStyled=o?o+"px":"",this.element.style.maxWidth=this.maxWidthStyled,this.cells.forEach(function(a){a.setMaxWidth()})}delete(){return new Promise((o,a)=>{this.isGroup&&this.columns.forEach(function(f){f.delete()}),this.dispatch("column-delete",this);var c=this.cells.length;for(let f=0;f<c;f++)this.cells[0].delete();this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=!1,this.contentElement=!1,this.titleElement=!1,this.groupElement=!1,this.parent.isGroup&&this.parent.removeChild(this),this.table.columnManager.deregisterColumn(this),this.table.columnManager.renderer.rerenderColumns(!0),o()})}columnRendered(){this.titleFormatterRendered&&this.titleFormatterRendered()}generateCell(o){var a=new un(this,o);return this.cells.push(a),a}nextColumn(){var o=this.table.columnManager.findColumnIndex(this);return o>-1&&this._nextVisibleColumn(o+1)}_nextVisibleColumn(o){var a=this.table.columnManager.getColumnByIndex(o);return!a||a.visible?a:this._nextVisibleColumn(o+1)}prevColumn(){var o=this.table.columnManager.findColumnIndex(this);return o>-1&&this._prevVisibleColumn(o-1)}_prevVisibleColumn(o){var a=this.table.columnManager.getColumnByIndex(o);return!a||a.visible?a:this._prevVisibleColumn(o-1)}reinitializeWidth(o){this.widthFixed=!1,void 0!==this.definition.width&&!o&&this.setWidth(this.definition.width),this.dispatch("column-width-fit-before",this),this.fitToData(),this.dispatch("column-width-fit-after",this)}fitToData(){if(!this.isGroup){this.widthFixed||(this.element.style.width="",this.cells.forEach(a=>{a.clearWidth()}));var o=this.element.offsetWidth;(!this.width||!this.widthFixed)&&(this.cells.forEach(a=>{var c=a.getWidth();c>o&&(o=c)}),o&&this.setWidthActual(o+1))}}updateDefinition(o){var a;return this.isGroup||this.parent.isGroup?(console.error("Column Update Error - The updateDefinition function is only available on ungrouped columns"),Promise.reject("Column Update Error - The updateDefinition function is only available on columns, not column groups")):(a=Object.assign({},this.getDefinition()),a=Object.assign(a,o),this.table.columnManager.addColumn(a,!1,this).then(c=>(a.field==this.field&&(this.field=!1),this.delete().then(()=>c.getComponent()))))}deleteCell(o){var a=this.cells.indexOf(o);a>-1&&this.cells.splice(a,1)}getComponent(){return this.component||(this.component=new _r(this)),this.component}}return g.defaultOptionList=yn,g})();class $r{constructor(l){return this._row=l,new Proxy(this,{get:function(o,a,c){return void 0!==o[a]?o[a]:o._row.table.componentFunctionBinder.handle("row",o._row,a)}})}getData(l){return this._row.getData(l)}getElement(){return this._row.getElement()}getCells(){var l=[];return this._row.getCells().forEach(function(o){l.push(o.getComponent())}),l}getCell(l){var o=this._row.getCell(l);return!!o&&o.getComponent()}getIndex(){return this._row.getData("data")[this._row.table.options.index]}getPosition(l){return this._row.table.rowManager.getRowPosition(this._row,l)}delete(){return this._row.delete()}scrollTo(){return this._row.table.rowManager.scrollToRow(this._row)}move(l,o){this._row.moveToRow(l,o)}update(l){return this._row.updateData(l)}normalizeHeight(){this._row.normalizeHeight(!0)}_getSelf(){return this._row}reformat(){return this._row.reinitialize()}getTable(){return this._row.table}getNextRow(){var l=this._row.nextRow();return l&&l.getComponent()}getPrevRow(){var l=this._row.prevRow();return l&&l.getComponent()}}class Xs extends Hc{constructor(l,o,a="row"){super(o.table),this.parent=o,this.data={},this.type=a,this.element=!1,this.modules={},this.cells=[],this.height=0,this.heightStyled="",this.manualHeight=!1,this.outerHeight=0,this.initialized=!1,this.heightInitialized=!1,this.component=null,this.created=!1,this.setData(l)}create(){this.created||(this.created=!0,this.generateElement())}createElement(){var l=document.createElement("div");l.classList.add("tabulator-row"),l.setAttribute("role","row"),this.element=l}getElement(){return this.create(),this.element}detachElement(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}generateElement(){this.createElement(),this.dispatch("row-init",this)}generateCells(){this.cells=this.table.columnManager.generateCells(this)}initialize(l){if(this.create(),!this.initialized||l){for(this.deleteCells();this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.dispatch("row-layout-before",this),this.generateCells(),this.table.columnManager.renderer.renderRowCells(this),l&&this.normalizeHeight(),this.dispatch("row-layout",this),this.table.options.rowFormatter&&this.table.options.rowFormatter(this.getComponent()),this.initialized=!0,this.dispatch("row-layout-after",this)}else this.table.columnManager.renderer.rerenderRowCells(this)}reinitializeHeight(){this.heightInitialized=!1,this.element&&null!==this.element.offsetParent&&this.normalizeHeight(!0)}deinitializeHeight(){this.heightInitialized=!1}reinitialize(l){this.initialized=!1,this.heightInitialized=!1,this.manualHeight||(this.height=0,this.heightStyled=""),this.element&&null!==this.element.offsetParent&&this.initialize(!0),this.dispatch("row-relayout",this)}calcHeight(l){var o=0,a=this.table.options.resizableRows?this.element.clientHeight:0;this.cells.forEach(function(c){var f=c.getHeight();f>o&&(o=f)}),this.height=l?Math.max(o,a):this.manualHeight?this.height:Math.max(o,a),this.heightStyled=this.height?this.height+"px":"",this.outerHeight=this.element.offsetHeight}setCellHeight(){this.cells.forEach(function(l){l.setHeight()}),this.heightInitialized=!0}clearCellHeight(){this.cells.forEach(function(l){l.clearHeight()})}normalizeHeight(l){l&&this.clearCellHeight(),this.calcHeight(l),this.setCellHeight()}setHeight(l,o){(this.height!=l||o)&&(this.manualHeight=!0,this.height=l,this.heightStyled=l?l+"px":"",this.setCellHeight(),this.outerHeight=this.element.offsetHeight)}getHeight(){return this.outerHeight}getWidth(){return this.element.offsetWidth}deleteCell(l){var o=this.cells.indexOf(l);o>-1&&this.cells.splice(o,1)}setData(l){this.data=this.chain("row-data-init-before",[this,l],void 0,l),this.dispatch("row-data-init-after",this)}updateData(l){var c,o=this.element&&Es.elVisible(this.element),a={};return new Promise((f,E)=>{for(var R in"string"==typeof l&&(l=JSON.parse(l)),this.dispatch("row-data-save-before",this),this.subscribed("row-data-changing")&&(a=Object.assign(a,this.data),a=Object.assign(a,l)),c=this.chain("row-data-changing",[this,a,l],null,l))this.data[R]=c[R];for(var R in this.dispatch("row-data-save-after",this),l)this.table.columnManager.getColumnsByFieldRoot(R).forEach(J=>{let dt=this.getCell(J.getField());if(dt){let Ft=J.getFieldValue(c);dt.getValue()!=Ft&&(dt.setValueProcessData(Ft),o&&dt.cellRendered())}});o?(this.normalizeHeight(!0),this.table.options.rowFormatter&&this.table.options.rowFormatter(this.getComponent())):(this.initialized=!1,this.height=0,this.heightStyled=""),this.dispatch("row-data-changed",this,o,l),this.dispatchExternal("rowUpdated",this.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()),f()})}getData(l){return l?this.chain("row-data-retrieve",[this,l],null,this.data):this.data}getCell(l){return l=this.table.columnManager.findColumn(l),this.initialized||this.generateCells(),this.cells.find(function(a){return a.column===l})}getCellIndex(l){return this.cells.findIndex(function(o){return o===l})}findCell(l){return this.cells.find(o=>o.element===l)}getCells(){return this.initialized||this.generateCells(),this.cells}nextRow(){return this.table.rowManager.nextDisplayRow(this,!0)||!1}prevRow(){return this.table.rowManager.prevDisplayRow(this,!0)||!1}moveToRow(l,o){var a=this.table.rowManager.findRow(l);a?(this.table.rowManager.moveRowActual(this,a,!o),this.table.rowManager.refreshActiveData("display",!1,!0)):console.warn("Move Error - No matching row found:",l)}delete(){return this.dispatch("row-delete",this),this.deleteActual(),Promise.resolve()}deleteActual(l){this.table.rowManager.getRowIndex(this),this.detatchModules(),this.table.rowManager.deleteRow(this,l),this.deleteCells(),this.initialized=!1,this.heightInitialized=!1,this.element=!1,this.dispatch("row-deleted",this)}detatchModules(){this.dispatch("row-deleting",this)}deleteCells(){var l=this.cells.length;for(let o=0;o<l;o++)this.cells[0].delete()}wipe(){if(this.detatchModules(),this.deleteCells(),this.element){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.parentNode&&this.element.parentNode.removeChild(this.element)}this.element=!1,this.modules={}}getGroup(){return this.modules.group||!1}getComponent(){return this.component||(this.component=new $r(this)),this.component}}var ah={avg:function(g,l,o){var a=0,c=void 0!==o.precision?o.precision:2;return g.length&&(a=g.reduce(function(f,E){return Number(f)+Number(E)}),a/=g.length,a=!1!==c?a.toFixed(c):a),parseFloat(a).toString()},max:function(g,l,o){var a=null,c=void 0!==o.precision&&o.precision;return g.forEach(function(f){((f=Number(f))>a||null===a)&&(a=f)}),null!==a?!1!==c?a.toFixed(c):a:""},min:function(g,l,o){var a=null,c=void 0!==o.precision&&o.precision;return g.forEach(function(f){((f=Number(f))<a||null===a)&&(a=f)}),null!==a?!1!==c?a.toFixed(c):a:""},sum:function(g,l,o){var a=0,c=void 0!==o.precision&&o.precision;return g.length&&g.forEach(function(f){f=Number(f),a+=isNaN(f)?0:Number(f)}),!1!==c?a.toFixed(c):a},concat:function(g,l,o){var a=0;return g.length&&(a=g.reduce(function(c,f){return String(c)+String(f)})),a},count:function(g,l,o){var a=0;return g.length&&g.forEach(function(c){c&&a++}),a}};let wu=(()=>{class g extends Eo{constructor(o){super(o),this.topCalcs=[],this.botCalcs=[],this.genColumn=!1,this.topElement=this.createElement(),this.botElement=this.createElement(),this.topRow=!1,this.botRow=!1,this.topInitialized=!1,this.botInitialized=!1,this.registerTableOption("columnCalcs",!0),this.registerColumnOption("topCalc"),this.registerColumnOption("topCalcParams"),this.registerColumnOption("topCalcFormatter"),this.registerColumnOption("topCalcFormatterParams"),this.registerColumnOption("bottomCalc"),this.registerColumnOption("bottomCalcParams"),this.registerColumnOption("bottomCalcFormatter"),this.registerColumnOption("bottomCalcFormatterParams")}createElement(){var o=document.createElement("div");return o.classList.add("tabulator-calcs-holder"),o}initialize(){this.genColumn=new Hr({field:"value"},this),this.subscribe("cell-value-changed",this.cellValueChanged.bind(this)),this.subscribe("column-init",this.initializeColumnCheck.bind(this)),this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this)),this.subscribe("row-added",this.rowsUpdated.bind(this)),this.subscribe("column-moved",this.recalcActiveRows.bind(this)),this.subscribe("column-add",this.recalcActiveRows.bind(this)),this.subscribe("data-refeshed",this.recalcActiveRows.bind(this)),this.subscribe("table-redraw",this.tableRedraw.bind(this)),this.registerTableFunction("getCalcResults",this.getResults.bind(this)),this.registerTableFunction("recalc",this.userRecalc.bind(this))}tableRedraw(o){this.recalc(this.table.rowManager.activeRows),o&&this.redraw()}userRecalc(){this.recalc(this.table.rowManager.activeRows)}rowsUpdated(o){this.table.options.groupBy?this.recalcRowGroup(this):this.recalcActiveRows()}recalcActiveRows(){this.recalc(this.table.rowManager.activeRows)}cellValueChanged(o){(o.column.definition.topCalc||o.column.definition.bottomCalc)&&(this.table.options.groupBy?(("table"==this.table.options.columnCalcs||"both"==this.table.options.columnCalcs)&&this.recalcActiveRows(),"table"!=this.table.options.columnCalcs&&this.recalcRowGroup(o.row)):this.recalcActiveRows())}initializeColumnCheck(o){(o.definition.topCalc||o.definition.bottomCalc)&&this.initializeColumn(o)}initializeColumn(o){var a=o.definition,c={topCalcParams:a.topCalcParams||{},botCalcParams:a.bottomCalcParams||{}};if(a.topCalc){switch(typeof a.topCalc){case"string":g.calculations[a.topCalc]?c.topCalc=g.calculations[a.topCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",a.topCalc);break;case"function":c.topCalc=a.topCalc}c.topCalc&&(o.modules.columnCalcs=c,this.topCalcs.push(o),"group"!=this.table.options.columnCalcs&&this.initializeTopRow())}if(a.bottomCalc){switch(typeof a.bottomCalc){case"string":g.calculations[a.bottomCalc]?c.botCalc=g.calculations[a.bottomCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",a.bottomCalc);break;case"function":c.botCalc=a.bottomCalc}c.botCalc&&(o.modules.columnCalcs=c,this.botCalcs.push(o),"group"!=this.table.options.columnCalcs&&this.initializeBottomRow())}}registerColumnField(){}removeCalcs(){var o=!1;this.topInitialized&&(this.topInitialized=!1,this.topElement.parentNode.removeChild(this.topElement),o=!0),this.botInitialized&&(this.botInitialized=!1,this.table.footerManager.remove(this.botElement),o=!0),o&&this.table.rowManager.adjustTableSize()}initializeTopRow(){this.topInitialized||(this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling),this.topInitialized=!0)}initializeBottomRow(){this.botInitialized||(this.table.footerManager.prepend(this.botElement),this.botInitialized=!0)}scrollHorizontal(o){this.botInitialized&&this.botRow&&(this.botRow.getElement().style.marginLeft=-o+"px")}recalc(o){var a;if(this.topInitialized||this.botInitialized){if(this.rowsToData(o),this.topInitialized){for(this.topRow&&this.topRow.deleteCells(),a=this.generateRow("top",this.rowsToData(o)),this.topRow=a;this.topElement.firstChild;)this.topElement.removeChild(this.topElement.firstChild);this.topElement.appendChild(a.getElement()),a.initialize(!0)}if(this.botInitialized){for(this.botRow&&this.botRow.deleteCells(),a=this.generateRow("bottom",this.rowsToData(o)),this.botRow=a;this.botElement.firstChild;)this.botElement.removeChild(this.botElement.firstChild);this.botElement.appendChild(a.getElement()),a.initialize(!0)}this.table.rowManager.adjustTableSize(),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout()}}recalcRowGroup(o){this.recalcGroup(this.table.modules.groupRows.getRowGroup(o))}recalcAll(){(this.topCalcs.length||this.botCalcs.length)&&("group"!==this.table.options.columnCalcs&&this.recalcActiveRows(),this.table.options.groupBy&&"table"!==this.table.options.columnCalcs)&&this.table.modules.groupRows.getChildGroups().forEach(a=>{this.recalcGroup(a)})}recalcGroup(o){var a,c;o&&o.calcs&&(o.calcs.bottom&&(a=this.rowsToData(o.rows),c=this.generateRowData("bottom",a),o.calcs.bottom.updateData(c),o.calcs.bottom.reinitialize()),o.calcs.top&&(a=this.rowsToData(o.rows),c=this.generateRowData("top",a),o.calcs.top.updateData(c),o.calcs.top.reinitialize()))}generateTopRow(o){return this.generateRow("top",this.rowsToData(o))}generateBottomRow(o){return this.generateRow("bottom",this.rowsToData(o))}rowsToData(o){var a=[];return o.forEach(c=>{if(a.push(c.getData()),this.table.options.dataTree&&this.table.options.dataTreeChildColumnCalcs&&c.modules.dataTree.open){var f=this.rowsToData(this.table.modules.dataTree.getFilteredTreeChildren(c));a=a.concat(f)}}),a}generateRow(o,a){var f,c=this.generateRowData(o,a);return this.table.modExists("mutator")&&this.table.modules.mutator.disable(),f=new Xs(c,this,"calc"),this.table.modExists("mutator")&&this.table.modules.mutator.enable(),f.getElement().classList.add("tabulator-calcs","tabulator-calcs-"+o),f.component=!1,f.getComponent=()=>(f.component||(f.component=new ii(this)),f.component),f.generateCells=()=>{var E=[];this.table.columnManager.columnsByIndex.forEach(R=>{this.genColumn.setField(R.getField()),this.genColumn.hozAlign=R.hozAlign,this.genColumn.modules.format=R.definition[o+"CalcFormatter"]&&this.table.modExists("format")?{formatter:this.table.modules.format.getFormatter(R.definition[o+"CalcFormatter"]),params:R.definition[o+"CalcFormatterParams"]||{}}:{formatter:this.table.modules.format.getFormatter("plaintext"),params:{}},this.genColumn.definition.cssClass=R.definition.cssClass;var O=new un(this.genColumn,f);O.getElement(),O.column=R,O.setWidth(),R.cells.push(O),E.push(O),R.visible||O.hide()}),f.cells=E},f}generateRowData(o,a){var R,O,c={},E="top"==o?"topCalc":"botCalc";return("top"==o?this.topCalcs:this.botCalcs).forEach(function(F){var J=[];F.modules.columnCalcs&&F.modules.columnCalcs[E]&&(a.forEach(function(dt){J.push(F.getFieldValue(dt))}),R="function"==typeof F.modules.columnCalcs[O=E+"Params"]?F.modules.columnCalcs[O](J,a):F.modules.columnCalcs[O],F.setFieldValue(c,F.modules.columnCalcs[E](J,a,R)))}),c}hasTopCalcs(){return!!this.topCalcs.length}hasBottomCalcs(){return!!this.botCalcs.length}redraw(){this.topRow&&this.topRow.normalizeHeight(!0),this.botRow&&this.botRow.normalizeHeight(!0)}getResults(){var o={};return this.table.options.groupBy&&this.table.modExists("groupRows")?this.table.modules.groupRows.getGroups(!0).forEach(c=>{o[c.getKey()]=this.getGroupResults(c)}):o={top:this.topRow?this.topRow.getData():{},bottom:this.botRow?this.botRow.getData():{}},o}getGroupResults(o){var a=o._getSelf(),c=o.getSubGroups(),f={};return c.forEach(R=>{f[R.getKey()]=this.getGroupResults(R)}),{top:a.calcs.top?a.calcs.top.getData():{},bottom:a.calcs.bottom?a.calcs.bottom.getData():{},groups:f}}}return g.moduleName="columnCalcs",g.calculations=ah,g})(),yl=(()=>{class g extends Eo{constructor(o){super(o),this.indent=10,this.field="",this.collapseEl=null,this.expandEl=null,this.branchEl=null,this.elementField=!1,this.startOpen=function(){},this.displayIndex=0,this.registerTableOption("dataTree",!1),this.registerTableOption("dataTreeFilter",!0),this.registerTableOption("dataTreeSort",!0),this.registerTableOption("dataTreeElementColumn",!1),this.registerTableOption("dataTreeBranchElement",!0),this.registerTableOption("dataTreeChildIndent",9),this.registerTableOption("dataTreeChildField","_children"),this.registerTableOption("dataTreeCollapseElement",!1),this.registerTableOption("dataTreeExpandElement",!1),this.registerTableOption("dataTreeStartExpanded",!1),this.registerTableOption("dataTreeChildColumnCalcs",!1),this.registerTableOption("dataTreeSelectPropagate",!1),this.registerComponentFunction("row","treeCollapse",this.collapseRow.bind(this)),this.registerComponentFunction("row","treeExpand",this.expandRow.bind(this)),this.registerComponentFunction("row","treeToggle",this.toggleRow.bind(this)),this.registerComponentFunction("row","getTreeParent",this.getTreeParent.bind(this)),this.registerComponentFunction("row","getTreeChildren",this.getRowChildren.bind(this)),this.registerComponentFunction("row","addTreeChild",this.addTreeChildRow.bind(this))}initialize(){if(this.table.options.dataTree){var o=null,a=this.table.columnManager.getFirstVisibileColumn(),c=this.table.options;switch(this.field=c.dataTreeChildField,this.indent=c.dataTreeChildIndent,this.elementField=c.dataTreeElementColumn||!!a&&a.field,c.dataTreeBranchElement&&(!0===c.dataTreeBranchElement?(this.branchEl=document.createElement("div"),this.branchEl.classList.add("tabulator-data-tree-branch")):"string"==typeof c.dataTreeBranchElement?((o=document.createElement("div")).innerHTML=c.dataTreeBranchElement,this.branchEl=o.firstChild):this.branchEl=c.dataTreeBranchElement),c.dataTreeCollapseElement?"string"==typeof c.dataTreeCollapseElement?((o=document.createElement("div")).innerHTML=c.dataTreeCollapseElement,this.collapseEl=o.firstChild):this.collapseEl=c.dataTreeCollapseElement:(this.collapseEl=document.createElement("div"),this.collapseEl.classList.add("tabulator-data-tree-control"),this.collapseEl.tabIndex=0,this.collapseEl.innerHTML="<div class='tabulator-data-tree-control-collapse'></div>"),c.dataTreeExpandElement?"string"==typeof c.dataTreeExpandElement?((o=document.createElement("div")).innerHTML=c.dataTreeExpandElement,this.expandEl=o.firstChild):this.expandEl=c.dataTreeExpandElement:(this.expandEl=document.createElement("div"),this.expandEl.classList.add("tabulator-data-tree-control"),this.expandEl.tabIndex=0,this.expandEl.innerHTML="<div class='tabulator-data-tree-control-expand'></div>"),typeof c.dataTreeStartExpanded){case"boolean":this.startOpen=function(f,E){return c.dataTreeStartExpanded};break;case"function":this.startOpen=c.dataTreeStartExpanded;break;default:this.startOpen=function(f,E){return c.dataTreeStartExpanded[E]}}this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-layout-after",this.layoutRow.bind(this)),this.subscribe("row-relayout",this.layoutRow.bind(this)),this.subscribe("row-deleted",this.rowDelete.bind(this),0),this.subscribe("row-data-changed",this.rowDataChanged.bind(this),10),this.subscribe("column-moving-rows",this.columnMoving.bind(this)),this.registerDisplayHandler(this.getRows.bind(this),30)}}getRowChildren(o){return this.getTreeChildren(o,!0)}columnMoving(){var o=[];return this.table.rowManager.rows.forEach(a=>{o=o.concat(this.getTreeChildren(a,!1,!0))}),o}rowDataChanged(o,a,c){this.redrawNeeded(c)&&(this.initializeRow(o),a&&(this.layoutRow(o),this.refreshData(!0)))}initializeRow(o){var a=o.getData()[this.field],c=Array.isArray(a),f=c||!c&&"object"==typeof a&&null!==a;!f&&o.modules.dataTree&&o.modules.dataTree.branchEl&&o.modules.dataTree.branchEl.parentNode.removeChild(o.modules.dataTree.branchEl),!f&&o.modules.dataTree&&o.modules.dataTree.controlEl&&o.modules.dataTree.controlEl.parentNode.removeChild(o.modules.dataTree.controlEl),o.modules.dataTree={index:o.modules.dataTree?o.modules.dataTree.index:0,open:!!f&&(o.modules.dataTree?o.modules.dataTree.open:this.startOpen(o.getComponent(),0)),controlEl:!(!o.modules.dataTree||!f)&&o.modules.dataTree.controlEl,branchEl:!(!o.modules.dataTree||!f)&&o.modules.dataTree.branchEl,parent:!!o.modules.dataTree&&o.modules.dataTree.parent,children:f}}reinitializeRowChildren(o){this.getTreeChildren(o,!1,!0).forEach(function(c){c.reinitialize(!0)})}layoutRow(o){var c=(this.elementField?o.getCell(this.elementField):o.getCells()[0]).getElement(),f=o.modules.dataTree;f.branchEl&&(f.branchEl.parentNode&&f.branchEl.parentNode.removeChild(f.branchEl),f.branchEl=!1),f.controlEl&&(f.controlEl.parentNode&&f.controlEl.parentNode.removeChild(f.controlEl),f.controlEl=!1),this.generateControlElement(o,c),o.getElement().classList.add("tabulator-tree-level-"+f.index),f.index&&(this.branchEl?(f.branchEl=this.branchEl.cloneNode(!0),c.insertBefore(f.branchEl,c.firstChild),this.table.rtl?f.branchEl.style.marginRight=(f.branchEl.offsetWidth+f.branchEl.style.marginLeft)*(f.index-1)+f.index*this.indent+"px":f.branchEl.style.marginLeft=(f.branchEl.offsetWidth+f.branchEl.style.marginRight)*(f.index-1)+f.index*this.indent+"px"):this.table.rtl?c.style.paddingRight=parseInt(window.getComputedStyle(c,null).getPropertyValue("padding-right"))+f.index*this.indent+"px":c.style.paddingLeft=parseInt(window.getComputedStyle(c,null).getPropertyValue("padding-left"))+f.index*this.indent+"px")}generateControlElement(o,a){var c=o.modules.dataTree,f=(a=a||o.getCells()[0].getElement(),c.controlEl);!1!==c.children&&(c.open?(c.controlEl=this.collapseEl.cloneNode(!0),c.controlEl.addEventListener("click",E=>{E.stopPropagation(),this.collapseRow(o)})):(c.controlEl=this.expandEl.cloneNode(!0),c.controlEl.addEventListener("click",E=>{E.stopPropagation(),this.expandRow(o)})),c.controlEl.addEventListener("mousedown",E=>{E.stopPropagation()}),f&&f.parentNode===a?f.parentNode.replaceChild(c.controlEl,f):a.insertBefore(c.controlEl,a.firstChild))}setDisplayIndex(o){this.displayIndex=o}getDisplayIndex(){return this.displayIndex}getRows(o){var a=[];return o.forEach((c,f)=>{var E;a.push(c),c instanceof Xs&&(c.create(),!(E=c.modules.dataTree.children).index&&!1!==E.children&&this.getChildren(c).forEach(O=>{O.create(),a.push(O)}))}),a}getChildren(o,a){var c=o.modules.dataTree,f=[],E=[];return!1!==c.children&&(c.open||a)&&(Array.isArray(c.children)||(c.children=this.generateChildren(o)),f=this.table.modExists("filter")&&this.table.options.dataTreeFilter?this.table.modules.filter.filter(c.children):c.children,this.table.modExists("sort")&&this.table.options.dataTreeSort&&this.table.modules.sort.sort(f),f.forEach(R=>{E.push(R),this.getChildren(R).forEach(F=>{E.push(F)})})),E}generateChildren(o){var a=[],c=o.getData()[this.field];return Array.isArray(c)||(c=[c]),c.forEach(f=>{var E=new Xs(f||{},this.table.rowManager);E.create(),E.modules.dataTree.index=o.modules.dataTree.index+1,E.modules.dataTree.parent=o,E.modules.dataTree.children&&(E.modules.dataTree.open=this.startOpen(E.getComponent(),E.modules.dataTree.index)),a.push(E)}),a}expandRow(o,a){var c=o.modules.dataTree;!1!==c.children&&(c.open=!0,o.reinitialize(),this.refreshData(!0),this.dispatchExternal("dataTreeRowExpanded",o.getComponent(),o.modules.dataTree.index))}collapseRow(o){var a=o.modules.dataTree;!1!==a.children&&(a.open=!1,o.reinitialize(),this.refreshData(!0),this.dispatchExternal("dataTreeRowCollapsed",o.getComponent(),o.modules.dataTree.index))}toggleRow(o){var a=o.modules.dataTree;!1!==a.children&&(a.open?this.collapseRow(o):this.expandRow(o))}getTreeParent(o){return!!o.modules.dataTree.parent&&o.modules.dataTree.parent.getComponent()}getFilteredTreeChildren(o){var a=o.modules.dataTree,c=[];return a.children&&(Array.isArray(a.children)||(a.children=this.generateChildren(o)),(this.table.modExists("filter")&&this.table.options.dataTreeFilter?this.table.modules.filter.filter(a.children):a.children).forEach(E=>{E instanceof Xs&&c.push(E)})),c}rowDelete(o){var c,a=o.modules.dataTree.parent;a&&(!1!==(c=this.findChildIndex(o,a))&&a.data[this.field].splice(c,1),a.data[this.field].length||delete a.data[this.field],this.initializeRow(a),this.layoutRow(a)),this.refreshData(!0)}addTreeChildRow(o,a,c,f){var E=!1;"string"==typeof a&&(a=JSON.parse(a)),Array.isArray(o.data[this.field])||(o.data[this.field]=[],o.modules.dataTree.open=this.startOpen(o.getComponent(),o.modules.dataTree.index)),void 0!==f&&!1!==(E=this.findChildIndex(f,o))&&o.data[this.field].splice(c?E:E+1,0,a),!1===E&&(c?o.data[this.field].unshift(a):o.data[this.field].push(a)),this.initializeRow(o),this.layoutRow(o),this.refreshData(!0)}findChildIndex(o,a){var c=!1;return"object"==typeof o?o instanceof Xs?c=o.data:o instanceof RowComponent?c=o._getSelf().data:"undefined"!=typeof HTMLElement&&o instanceof HTMLElement&&a.modules.dataTree&&(c=a.modules.dataTree.children.find(f=>f instanceof Xs&&f.element===o))&&(c=c.data):c=null!=o&&a.data[this.field].find(f=>f.data[this.table.options.index]==o),c&&(Array.isArray(a.data[this.field])&&(c=a.data[this.field].indexOf(c)),-1==c&&(c=!1)),c}getTreeChildren(o,a,c){var f=o.modules.dataTree,E=[];return f.children&&(Array.isArray(f.children)||(f.children=this.generateChildren(o)),f.children.forEach(R=>{R instanceof Xs&&(E.push(a?R.getComponent():R),c&&(E=E.concat(this.getTreeChildren(R,a,c))))})),E}checkForRestyle(o){o.row.cells.indexOf(o)||this.layoutRow(o.row)}getChildField(){return this.field}redrawNeeded(o){return!!this.field&&void 0!==o[this.field]||!!this.elementField&&void 0!==o[this.elementField]}}return g.moduleName="dataTree",g})();var Mf={csv:function(g,l,o){var a=l&&l.delimiter?l.delimiter:",",c=[],f=[];g.forEach(E=>{var R=[];switch(E.type){case"group":console.warn("Download Warning - CSV downloader cannot process row groups");break;case"calc":console.warn("Download Warning - CSV downloader cannot process column calculations");break;case"header":E.columns.forEach((O,F)=>{O&&1===O.depth&&(f[F]=null==O.value?"":'"'+String(O.value).split('"').join('""')+'"')});break;case"row":E.columns.forEach(O=>{if(O){switch(typeof O.value){case"object":O.value=JSON.stringify(O.value);break;case"undefined":case"null":O.value=""}R.push('"'+String(O.value).split('"').join('""')+'"')}}),c.push(R.join(a))}}),f.length&&c.unshift(f.join(a)),c=c.join("\n"),l.bom&&(c="\ufeff"+c),o(c,"text/csv")},json:function(g,l,o){var a=[];g.forEach(c=>{var f={};switch(c.type){case"header":break;case"group":console.warn("Download Warning - JSON downloader cannot process row groups");break;case"calc":console.warn("Download Warning - JSON downloader cannot process column calculations");break;case"row":c.columns.forEach(E=>{E&&(f[E.component.getField()]=E.value)}),a.push(f)}}),o(a=JSON.stringify(a,null,"\t"),"application/json")},pdf:function(g,l,o){var a=[],c=[],f={},E=l.rowGroupStyles||{fontStyle:"bold",fontSize:12,cellPadding:6,fillColor:220},R=l.rowCalcStyles||{fontStyle:"bold",fontSize:10,cellPadding:4,fillColor:232},O=l.jsPDF||{},F=l&&l.title?l.title:"";function J(Ft,qt){var Ee=[];return Ft.columns.forEach(Ae=>{var We;if(Ae){switch(typeof Ae.value){case"object":Ae.value=JSON.stringify(Ae.value);break;case"undefined":case"null":Ae.value=""}We={content:Ae.value,colSpan:Ae.width,rowSpan:Ae.height},qt&&(We.styles=qt),Ee.push(We)}else Ee.push("")}),Ee}O.orientation||(O.orientation=l.orientation||"landscape"),O.unit||(O.unit="pt"),g.forEach(Ft=>{switch(Ft.type){case"header":a.push(J(Ft));break;case"group":c.push(J(Ft,E));break;case"calc":c.push(J(Ft,R));break;case"row":c.push(J(Ft))}});var dt=new jspdf.jsPDF(O);l&&l.autoTable&&(f="function"==typeof l.autoTable?l.autoTable(dt)||{}:l.autoTable),F&&(f.didDrawPage=function(Ft){dt.text(F,40,30)}),f.head=a,f.body=c,dt.autoTable(f),l&&l.documentProcessing&&l.documentProcessing(dt),o(dt.output("arraybuffer"),"application/pdf")},xlsx:function(g,l,o){var c=l.sheetName||"Sheet1",f=XLSX.utils.book_new(),E=new Hc(this);function O(){var dt=[],Ft=[],qt={},Ee={s:{c:0,r:0},e:{c:g[0]?g[0].columns.reduce((Ae,We)=>Ae+(We&&We.width?We.width:1),0):0,r:g.length}};return g.forEach((Ae,We)=>{var ze=[];Ae.columns.forEach(function(Si,an){Si?(ze.push(Si.value instanceof Date||"object"!=typeof Si.value?Si.value:JSON.stringify(Si.value)),(Si.width>1||Si.height>-1)&&Ft.push({s:{r:We,c:an},e:{r:We+Si.height-1,c:an+Si.width-1}})):ze.push("")}),dt.push(ze)}),XLSX.utils.sheet_add_aoa(qt,dt),qt["!ref"]=XLSX.utils.encode_range(Ee),Ft.length&&(qt["!merges"]=Ft),qt}if(f.SheetNames=[],f.Sheets={},l.sheetOnly)o(O());else{if(l.sheets)for(var F in l.sheets)!0===l.sheets[F]?(f.SheetNames.push(F),f.Sheets[F]=O()):(f.SheetNames.push(F),E.commsSend(l.sheets[F],"download","intercept",{type:"xlsx",options:{sheetOnly:!0},active:this.active,intercept:function(dt){f.Sheets[F]=dt}}));else f.SheetNames.push(c),f.Sheets[c]=O();l.documentProcessing&&(f=l.documentProcessing(f)),o(function(dt){for(var Ft=new ArrayBuffer(dt.length),qt=new Uint8Array(Ft),Ee=0;Ee!=dt.length;++Ee)qt[Ee]=255&dt.charCodeAt(Ee);return Ft}(XLSX.write(f,{bookType:"xlsx",bookSST:!0,type:"binary"})),"application/octet-stream")}},html:function(g,l,o){this.modExists("export",!0)&&o(this.modules.export.genereateHTMLTable(g),"text/html")}};let zd=(()=>{class g extends Eo{constructor(o){super(o),this.registerTableOption("downloadReady",function(a,c){return c}),this.registerTableOption("downloadConfig",{}),this.registerTableOption("downloadRowRange","active"),this.registerColumnOption("download"),this.registerColumnOption("titleDownload")}initialize(){this.registerTableFunction("download",this.download.bind(this)),this.registerTableFunction("downloadToTab",this.downloadToTab.bind(this))}downloadToTab(o,a,c,f){this.download(o,a,c,f,!0)}download(o,a,c,f,E){var R=!1;if("function"==typeof o?R=o:g.downloaders[o]?R=g.downloaders[o]:console.warn("Download Error - No such download type found: ",o),R){var F=this.generateExportList(f);R.call(this.table,F,c||{},function(J,dt){E?!0===E?this.triggerDownload(J,dt,o,a,!0):E(J):this.triggerDownload(J,dt,o,a)}.bind(this))}}generateExportList(o){var a=this.table.modules.export.generateExportList(this.table.options.downloadConfig,!1,o||this.table.options.downloadRowRange,"download"),c=this.table.options.groupHeaderDownload;return c&&!Array.isArray(c)&&(c=[c]),a.forEach(f=>{var E;"group"===f.type&&(E=f.columns[0],c&&c[f.indent]&&(E.value=c[f.indent](E.value,f.component._group.getRowCount(),f.component._group.getData(),f.component)))}),a}triggerDownload(o,a,c,f,E){var R=document.createElement("a"),O=new Blob([o],{type:a});f=f||"Tabulator."+("function"==typeof c?"txt":c),(O=this.table.options.downloadReady(o,O))&&(E?window.open(window.URL.createObjectURL(O)):navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(O,f):(R.setAttribute("href",window.URL.createObjectURL(O)),R.setAttribute("download",f),R.style.display="none",document.body.appendChild(R),R.click(),document.body.removeChild(R)),this.dispatchExternal("downloadComplete"))}commsReceived(o,a,c){"intercept"===a&&this.download(c.type,"",c.options,c.active,c.intercept)}}return g.moduleName="download",g.downloaders=Mf,g})();function vd(g,l){var o=l.mask,a=void 0!==l.maskLetterChar?l.maskLetterChar:"A",c=void 0!==l.maskNumberChar?l.maskNumberChar:"9",f=void 0!==l.maskWildcardChar?l.maskWildcardChar:"*";function E(R){var O=o[R];void 0!==O&&O!==f&&O!==a&&O!==c&&(g.value=g.value+""+O,E(R+1))}g.addEventListener("keydown",R=>{var O=g.value.length,F=R.key;if(R.keyCode>46){if(O>=o.length)return R.preventDefault(),R.stopPropagation(),!1;switch(o[O]){case a:if(F.toUpperCase()==F.toLowerCase())return R.preventDefault(),R.stopPropagation(),!1;break;case c:if(isNaN(F))return R.preventDefault(),R.stopPropagation(),!1;break;case f:break;default:if(F!==o[O])return R.preventDefault(),R.stopPropagation(),!1}}}),g.addEventListener("keyup",R=>{R.keyCode>46&&l.maskAutoFill&&E(g.value.length)}),g.placeholder||(g.placeholder=o),l.maskAutoFill&&E(g.value.length)}var wp={input:function(g,l,o,a,c){var f=g.getValue(),E=document.createElement("input");if(E.setAttribute("type",c.search?"search":"text"),E.style.padding="4px",E.style.width="100%",E.style.boxSizing="border-box",c.elementAttributes&&"object"==typeof c.elementAttributes)for(let O in c.elementAttributes)"+"==O.charAt(0)?(O=O.slice(1),E.setAttribute(O,E.getAttribute(O)+c.elementAttributes["+"+O])):E.setAttribute(O,c.elementAttributes[O]);function R(O){null==f&&""!==E.value||E.value!==f?o(E.value)&&(f=E.value):a()}return E.value=void 0!==f?f:"",l(function(){E.focus({preventScroll:!0}),E.style.height="100%"}),E.addEventListener("change",R),E.addEventListener("blur",R),E.addEventListener("keydown",function(O){switch(O.keyCode){case 13:R();break;case 27:a();break;case 35:case 36:O.stopPropagation()}}),c.mask&&vd(E,c),E},textarea:function(g,l,o,a,c){var f=g.getValue(),E=c.verticalNavigation||"hybrid",R=String(null!=f?f:""),F=(R.match(/(?:\r\n|\r|\n)/g),document.createElement("textarea")),J=0;if(F.style.display="block",F.style.padding="2px",F.style.height="100%",F.style.width="100%",F.style.boxSizing="border-box",F.style.whiteSpace="pre-wrap",F.style.resize="none",c.elementAttributes&&"object"==typeof c.elementAttributes)for(let Ft in c.elementAttributes)"+"==Ft.charAt(0)?(Ft=Ft.slice(1),F.setAttribute(Ft,F.getAttribute(Ft)+c.elementAttributes["+"+Ft])):F.setAttribute(Ft,c.elementAttributes[Ft]);function dt(Ft){null==f&&""!==F.value||F.value!==f?(o(F.value)&&(f=F.value),setTimeout(function(){g.getRow().normalizeHeight()},300)):a()}return F.value=R,l(function(){F.focus({preventScroll:!0}),F.style.height="100%",F.style.height=F.scrollHeight+"px",g.getRow().normalizeHeight()}),F.addEventListener("change",dt),F.addEventListener("blur",dt),F.addEventListener("keyup",function(){F.style.height="";var Ft=F.scrollHeight;F.style.height=Ft+"px",Ft!=J&&(J=Ft,g.getRow().normalizeHeight())}),F.addEventListener("keydown",function(Ft){switch(Ft.keyCode){case 27:a();break;case 38:("editor"==E||"hybrid"==E&&F.selectionStart)&&(Ft.stopImmediatePropagation(),Ft.stopPropagation());break;case 40:("editor"==E||"hybrid"==E&&F.selectionStart!==F.value.length)&&(Ft.stopImmediatePropagation(),Ft.stopPropagation());break;case 35:case 36:Ft.stopPropagation()}}),c.mask&&vd(F,c),F},number:function(g,l,o,a,c){var f=g.getValue(),E=c.verticalNavigation||"editor",R=document.createElement("input");if(R.setAttribute("type","number"),void 0!==c.max&&R.setAttribute("max",c.max),void 0!==c.min&&R.setAttribute("min",c.min),void 0!==c.step&&R.setAttribute("step",c.step),R.style.padding="4px",R.style.width="100%",R.style.boxSizing="border-box",c.elementAttributes&&"object"==typeof c.elementAttributes)for(let J in c.elementAttributes)"+"==J.charAt(0)?(J=J.slice(1),R.setAttribute(J,R.getAttribute(J)+c.elementAttributes["+"+J])):R.setAttribute(J,c.elementAttributes[J]);R.value=f;var O=function(J){F()};function F(){var J=R.value;!isNaN(J)&&""!==J&&(J=Number(J)),J!==f?o(J)&&(f=J):a()}return l(function(){R.removeEventListener("blur",O),R.focus({preventScroll:!0}),R.style.height="100%",R.addEventListener("blur",O)}),R.addEventListener("keydown",function(J){switch(J.keyCode){case 13:F();break;case 27:a();break;case 38:case 40:"editor"==E&&(J.stopImmediatePropagation(),J.stopPropagation());break;case 35:case 36:J.stopPropagation()}}),c.mask&&vd(R,c),R},range:function(g,l,o,a,c){var f=g.getValue(),E=document.createElement("input");if(E.setAttribute("type","range"),void 0!==c.max&&E.setAttribute("max",c.max),void 0!==c.min&&E.setAttribute("min",c.min),void 0!==c.step&&E.setAttribute("step",c.step),E.style.padding="4px",E.style.width="100%",E.style.boxSizing="border-box",c.elementAttributes&&"object"==typeof c.elementAttributes)for(let O in c.elementAttributes)"+"==O.charAt(0)?(O=O.slice(1),E.setAttribute(O,E.getAttribute(O)+c.elementAttributes["+"+O])):E.setAttribute(O,c.elementAttributes[O]);function R(){var O=E.value;!isNaN(O)&&""!==O&&(O=Number(O)),O!=f?o(O)&&(f=O):a()}return E.value=f,l(function(){E.focus({preventScroll:!0}),E.style.height="100%"}),E.addEventListener("blur",function(O){R()}),E.addEventListener("keydown",function(O){switch(O.keyCode){case 13:R();break;case 27:a()}}),E},select:function(g,l,o,a,c){var f=this,E=g.getElement(),R=g.getValue(),O=c.verticalNavigation||"editor",F=void 0!==R||null===R?Array.isArray(R)?R:[R]:void 0!==c.defaultValue?c.defaultValue:[],J=document.createElement("input"),dt=document.createElement("div"),Ft=c.multiselect,qt=[],Ee={},Ae=[],We=[],ze=!0,Si=!1,an="",Gi=null;function Ki(nn){var rl,qn={},ls=f.table.getData();return(rl=nn?f.table.columnManager.getColumnByField(nn):g.getColumn()._getSelf())?ls.forEach(function(uh){var Nh=rl.getFieldValue(uh);null!=Nh&&""!==Nh&&(qn[Nh]=!0)}):console.warn("unable to find matching column to create select lookup list:",nn),Object.keys(qn)}function wn(nn,qn){!Ft&&Ee&&Ee.element&&Ee.element.classList.remove("active"),Ee&&Ee.element&&Ee.element.classList.remove("focused"),Ee=nn,nn.element&&(nn.element.classList.add("focused"),qn&&nn.element.classList.add("active")),nn&&nn.element&&nn.element.scrollIntoView&&nn.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}function Pn(nn){-1==We.indexOf(nn)&&(We.push(nn),wn(nn,!0)),Ei()}function bn(nn){var qn=We[nn];nn>-1&&(We.splice(nn,1),qn.element&&qn.element.classList.remove("active"))}function Qi(nn){nn||(nn=Ee);var qn=We.indexOf(nn);qn>-1?bn(qn):(!0!==Ft&&We.length>=Ft&&bn(0),Pn(nn)),Ei()}function Bn(nn){vr(),nn||(nn=Ee),nn&&(J.value=nn.label,o(nn.value)),F=[nn.value]}function dr(nn){nn||vr();var qn=[];We.forEach(ls=>{qn.push(ls.value)}),F=qn,o(qn)}function Ei(){var nn=[];We.forEach(qn=>{nn.push(qn.label)}),J.value=nn.join(", "),!1===f.currentCell&&dr(!0)}function Rn(){vr(),a()}function vr(){dt.parentNode&&dt.parentNode.removeChild(dt),f.table.rowManager.element.removeEventListener("scroll",Rn)}if((Array.isArray(c)||!Array.isArray(c)&&"object"==typeof c&&!c.values)&&(console.warn("DEPRECATION WARNING - values for the select editor must now be passed into the values property of the editorParams object, not as the editorParams object"),c={values:c}),J.setAttribute("type","text"),J.style.padding="4px",J.style.width="100%",J.style.boxSizing="border-box",J.style.cursor="default",J.readOnly=0!=this.currentCell,c.elementAttributes&&"object"==typeof c.elementAttributes)for(let nn in c.elementAttributes)"+"==nn.charAt(0)?(nn=nn.slice(1),J.setAttribute(nn,J.getAttribute(nn)+c.elementAttributes["+"+nn])):J.setAttribute(nn,c.elementAttributes[nn]);return J.value=void 0!==R||null===R?R:"",J.addEventListener("search",function(nn){J.value||(function(){var nn=We.length;for(let qn=0;qn<nn;qn++)bn(0)}(),dr())}),J.addEventListener("keydown",function(nn){var qn;switch(nn.keyCode){case 38:qn=qt.indexOf(Ee),("editor"==O||"hybrid"==O&&qn)&&(nn.stopImmediatePropagation(),nn.stopPropagation(),nn.preventDefault(),qn>0&&wn(qt[qn-1],!Ft));break;case 40:qn=qt.indexOf(Ee),("editor"==O||"hybrid"==O&&qn<qt.length-1)&&(nn.stopImmediatePropagation(),nn.stopPropagation(),nn.preventDefault(),qn<qt.length-1&&wn(-1==qn?qt[0]:qt[qn+1],!Ft));break;case 37:case 39:nn.stopImmediatePropagation(),nn.stopPropagation(),nn.preventDefault();break;case 13:Ft?Qi():Bn();break;case 27:Rn();break;case 9:break;default:!1===f.currentCell&&nn.preventDefault(),nn.keyCode>=38&&nn.keyCode<=90&&function(nn){clearTimeout(Gi);var qn=String.fromCharCode(event.keyCode).toLowerCase();an+=qn.toLowerCase();var ls=qt.find(rl=>void 0!==rl.label&&rl.label.toLowerCase().startsWith(an));ls&&wn(ls,!Ft),Gi=setTimeout(()=>{an=""},800)}()}}),J.addEventListener("blur",function(nn){ze&&(Ft?dr():Rn())}),J.addEventListener("focus",function(nn){Si||function(){if(We=[],!dt.parentNode){!function(nn,qn){var ls=[],rl=[];function uh(Ts){return qn.indexOf((Ts={label:Ts.label,value:Ts.value,itemParams:Ts.itemParams,elementAttributes:Ts.elementAttributes,element:!1}).value)>-1&&Pn(Ts),ls.push(Ts),rl.push(Ts),Ts}if("function"==typeof nn&&(nn=nn(g)),Array.isArray(nn))nn.forEach(function(Ts){var Vc;"object"==typeof Ts?Ts.options?(rl.push(Vc={label:Ts.label,group:!0,itemParams:Ts.itemParams,elementAttributes:Ts.elementAttributes,element:!1}),Ts.options.forEach(function(bg){uh(bg)})):uh(Ts):(qn.indexOf((Vc={label:Ts,value:Ts,element:!1}).value)>-1&&Pn(Vc),ls.push(Vc),rl.push(Vc))});else for(var Nh in nn){var ud={label:nn[Nh],value:Nh,element:!1};qn.indexOf(ud.value)>-1&&Pn(ud),ls.push(ud),rl.push(ud)}c.sortValuesList&&(ls.sort((Ts,Vc)=>Ts.label<Vc.label?-1:Ts.label>Vc.label?1:0),rl.sort((Ts,Vc)=>Ts.label<Vc.label?-1:Ts.label>Vc.label?1:0),"asc"!==c.sortValuesList&&(ls.reverse(),rl.reverse())),qt=ls,Ae=rl,function(){for(;dt.firstChild;)dt.removeChild(dt.firstChild);Ae.forEach(function(nn){var qn=nn.element;if(!qn){if(qn=document.createElement("div"),nn.label=c.listItemFormatter?c.listItemFormatter(nn.value,nn.label,g,qn,nn.itemParams):nn.label,nn.group?(qn.classList.add("tabulator-edit-select-list-group"),qn.tabIndex=0,qn.innerHTML=""===nn.label?"&nbsp;":nn.label):(qn.classList.add("tabulator-edit-select-list-item"),qn.tabIndex=0,qn.innerHTML=""===nn.label?"&nbsp;":nn.label,qn.addEventListener("click",function(){Si=!0,setTimeout(()=>{Si=!1},10),Ft?(Qi(nn),J.focus()):Bn(nn)}),We.indexOf(nn)>-1&&qn.classList.add("active")),nn.elementAttributes&&"object"==typeof nn.elementAttributes)for(let ls in nn.elementAttributes)"+"==ls.charAt(0)?(ls=ls.slice(1),qn.setAttribute(ls,J.getAttribute(ls)+nn.elementAttributes["+"+ls])):qn.setAttribute(ls,nn.elementAttributes[ls]);qn.addEventListener("mousedown",function(){ze=!1,setTimeout(function(){ze=!0},10)}),nn.element=qn}dt.appendChild(qn)})}()}(!0===c.values?Ki():"string"==typeof c.values?Ki(c.values):c.values||[],F);var nn=Es.elOffset(E);dt.style.minWidth=E.offsetWidth+"px",dt.style.top=nn.top+E.offsetHeight+"px",dt.style.left=nn.left+"px",dt.addEventListener("mousedown",function(qn){ze=!1,setTimeout(function(){ze=!0},10)}),document.body.appendChild(dt)}}()}),(dt=document.createElement("div")).classList.add("tabulator-edit-select-list"),l(function(){J.style.height="100%",J.focus({preventScroll:!0})}),setTimeout(()=>{this.table.rowManager.element.addEventListener("scroll",Rn)},10),J},autocomplete:function(g,l,o,a,c){var f=this,E=g.getElement(),R=g.getValue(),O=c.verticalNavigation||"editor",F=void 0!==R||null===R?R:void 0!==c.defaultValue?c.defaultValue:"",J=document.createElement("input"),dt=document.createElement("div"),Ft=[],qt=!1,Ee=!0,Ae=!1;if(J.setAttribute("type","search"),J.style.padding="4px",J.style.width="100%",J.style.boxSizing="border-box",c.elementAttributes&&"object"==typeof c.elementAttributes)for(let Ei in c.elementAttributes)"+"==Ei.charAt(0)?(Ei=Ei.slice(1),J.setAttribute(Ei,J.getAttribute(Ei)+c.elementAttributes["+"+Ei])):J.setAttribute(Ei,c.elementAttributes[Ei]);function We(){!0===c.values?Ae=ze():"string"==typeof c.values&&(Ae=ze(c.values))}function ze(Ei){var gr,Bi={},Rn=f.table.getData();return(gr=Ei?f.table.columnManager.getColumnByField(Ei):g.getColumn()._getSelf())?(Rn.forEach(function(vr){var qr=gr.getFieldValue(vr);null!=qr&&""!==qr&&(Bi[qr]=!0)}),Bi=c.sortValuesList?"asc"==c.sortValuesList?Object.keys(Bi).sort():Object.keys(Bi).sort().reverse():Object.keys(Bi)):console.warn("unable to find matching column to create autocomplete lookup list:",Ei),Bi}function Si(Ei,Bi){var gr,vr,Rn=[];gr=Ae||c.values||[],c.searchFunc?(Rn=c.searchFunc(Ei,gr))instanceof Promise?(an(void 0!==c.searchingPlaceholder?c.searchingPlaceholder:"Searching..."),Rn.then(qr=>{pn(Gi(qr),Bi)}).catch(qr=>{console.err("error in autocomplete search promise:",qr)})):pn(Gi(Rn),Bi):(vr=Gi(gr),""===Ei?c.showListOnEmpty&&(Rn=vr):vr.forEach(function(qr){(null!==qr.value||void 0!==qr.value)&&(String(qr.value).toLowerCase().indexOf(String(Ei).toLowerCase())>-1||String(qr.title).toLowerCase().indexOf(String(Ei).toLowerCase())>-1)&&Rn.push(qr)}),pn(Rn,Bi))}function an(Ei){var Bi=document.createElement("div");Ki(),!1!==Ei&&(Bi.classList.add("tabulator-edit-select-list-notice"),Bi.tabIndex=0,Ei instanceof Node?Bi.appendChild(Ei):Bi.innerHTML=Ei,dt.appendChild(Bi))}function Gi(Ei){var Bi=[];if(Array.isArray(Ei))Ei.forEach(function(vr){var qr={};"object"==typeof vr?(qr.title=c.listItemFormatter?c.listItemFormatter(vr.value,vr.label):vr.label,qr.value=vr.value):(qr.title=c.listItemFormatter?c.listItemFormatter(vr,vr):vr,qr.value=vr),Bi.push(qr)});else for(var Rn in Ei){var gr={title:c.listItemFormatter?c.listItemFormatter(Rn,Ei[Rn]):Ei[Rn],value:Rn};Bi.push(gr)}return Bi}function Ki(){for(;dt.firstChild;)dt.removeChild(dt.firstChild)}function pn(Ei,Bi){Ei.length?function(Ei,Bi){var Rn=!1;Ki(),(Ft=Ei).forEach(function(gr){var vr=gr.element;vr||((vr=document.createElement("div")).classList.add("tabulator-edit-select-list-item"),vr.tabIndex=0,vr.innerHTML=gr.title,vr.addEventListener("click",function(qr){bn(gr),wn()}),vr.addEventListener("mousedown",function(qr){Ee=!1,setTimeout(function(){Ee=!0},10)}),gr.element=vr,Bi&&gr.value==R&&(J.value=gr.title,gr.element.classList.add("active"),Rn=!0),gr===qt&&(gr.element.classList.add("active"),Rn=!0)),dt.appendChild(vr)}),Rn||bn(!1)}(Ei,Bi):c.emptyPlaceholder&&an(c.emptyPlaceholder)}function wn(){Qi(),qt?R!==qt.value?(R=qt.value,J.value=qt.title,o(qt.value)):a():c.freetext||c.allowEmpty&&""===J.value?(R=J.value,o(J.value)):a()}function bn(Ei,Bi){qt&&qt.element&&qt.element.classList.remove("active"),qt=Ei,Ei&&Ei.element&&Ei.element.classList.add("active"),Ei&&Ei.element&&Ei.element.scrollIntoView&&Ei.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}function Qi(){dt.parentNode&&dt.parentNode.removeChild(dt),f.table.rowManager.element.removeEventListener("scroll",Bn)}function Bn(){Qi(),a()}return dt.classList.add("tabulator-edit-select-list"),dt.addEventListener("mousedown",function(Ei){Ee=!1,setTimeout(function(){Ee=!0},10)}),J.addEventListener("keydown",function(Ei){var Bi;switch(Ei.keyCode){case 38:Bi=Ft.indexOf(qt),("editor"==O||"hybrid"==O&&Bi)&&(Ei.stopImmediatePropagation(),Ei.stopPropagation(),Ei.preventDefault(),bn(Bi>0&&Ft[Bi-1]));break;case 40:Bi=Ft.indexOf(qt),("editor"==O||"hybrid"==O&&Bi<Ft.length-1)&&(Ei.stopImmediatePropagation(),Ei.stopPropagation(),Ei.preventDefault(),Bi<Ft.length-1&&bn(-1==Bi?Ft[0]:Ft[Bi+1]));break;case 37:case 39:Ei.stopImmediatePropagation(),Ei.stopPropagation();break;case 13:wn();break;case 27:Bn();break;case 36:case 35:Ei.stopImmediatePropagation()}}),J.addEventListener("keyup",function(Ei){switch(Ei.keyCode){case 38:case 37:case 39:case 40:case 13:case 27:break;default:Si(J.value)}}),J.addEventListener("search",function(Ei){Si(J.value)}),J.addEventListener("blur",function(Ei){Ee&&wn()}),J.addEventListener("focus",function(Ei){var Bi=F;We(),function(){if(!dt.parentNode){for(;dt.firstChild;)dt.removeChild(dt.firstChild);var Ei=Es.elOffset(E);dt.style.minWidth=E.offsetWidth+"px",dt.style.top=Ei.top+E.offsetHeight+"px",dt.style.left=Ei.left+"px",document.body.appendChild(dt)}}(),J.value=Bi,Si(Bi,!0)}),l(function(){J.style.height="100%",J.focus({preventScroll:!0})}),c.mask&&vd(J,c),setTimeout(()=>{this.table.rowManager.element.addEventListener("scroll",Bn)},10),We(),J.value=F,Si(F,!0),J},star:function(g,l,o,a,c){var f=this,E=g.getElement(),R=g.getValue(),O=E.getElementsByTagName("svg").length||5,F=E.getElementsByTagName("svg")[0]?E.getElementsByTagName("svg")[0].getAttribute("width"):14,J=[],dt=document.createElement("div"),Ft=document.createElementNS("http://www.w3.org/2000/svg","svg");function qt(ze){J.forEach(function(Si,an){an<ze?("ie"==f.table.browser?Si.setAttribute("class","tabulator-star-active"):Si.classList.replace("tabulator-star-inactive","tabulator-star-active"),Si.innerHTML='<polygon fill="#488CE9" stroke="#014AAE" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>'):("ie"==f.table.browser?Si.setAttribute("class","tabulator-star-inactive"):Si.classList.replace("tabulator-star-active","tabulator-star-inactive"),Si.innerHTML='<polygon fill="#010155" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>')})}function Ee(ze){var Si=document.createElement("span"),an=Ft.cloneNode(!0);J.push(an),Si.addEventListener("mouseenter",function(Gi){Gi.stopPropagation(),Gi.stopImmediatePropagation(),qt(ze)}),Si.addEventListener("mousemove",function(Gi){Gi.stopPropagation(),Gi.stopImmediatePropagation()}),Si.addEventListener("click",function(Gi){Gi.stopPropagation(),Gi.stopImmediatePropagation(),o(ze),E.blur()}),Si.appendChild(an),dt.appendChild(Si)}function Ae(ze){R=ze,qt(ze)}if(E.style.whiteSpace="nowrap",E.style.overflow="hidden",E.style.textOverflow="ellipsis",dt.style.verticalAlign="middle",dt.style.display="inline-block",dt.style.padding="4px",Ft.setAttribute("width",F),Ft.setAttribute("height",F),Ft.setAttribute("viewBox","0 0 512 512"),Ft.setAttribute("xml:space","preserve"),Ft.style.padding="0 1px",c.elementAttributes&&"object"==typeof c.elementAttributes)for(let ze in c.elementAttributes)"+"==ze.charAt(0)?(ze=ze.slice(1),dt.setAttribute(ze,dt.getAttribute(ze)+c.elementAttributes["+"+ze])):dt.setAttribute(ze,c.elementAttributes[ze]);for(var We=1;We<=O;We++)Ee(We);return qt(R=Math.min(parseInt(R),O)),dt.addEventListener("mousemove",function(ze){qt(0)}),dt.addEventListener("click",function(ze){o(0)}),E.addEventListener("blur",function(ze){a()}),E.addEventListener("keydown",function(ze){switch(ze.keyCode){case 39:Ae(R+1);break;case 37:Ae(R-1);break;case 13:o(R);break;case 27:a()}}),dt},progress:function(g,l,o,a,c){var Ae,We,Ft,qt,f=g.getElement(),E=void 0===c.max?(null==(Ae=f.getElementsByTagName("div")[0])?void 0:Ae.getAttribute("max"))||100:c.max,R=void 0===c.min?(null==(We=f.getElementsByTagName("div")[0])?void 0:We.getAttribute("min"))||0:c.min,O=(E-R)/100,F=g.getValue()||0,J=document.createElement("div"),dt=document.createElement("div");function Ee(){var ze=window.getComputedStyle(f,null),Si=O*Math.round(dt.offsetWidth/((f.clientWidth-parseInt(ze.getPropertyValue("padding-left"))-parseInt(ze.getPropertyValue("padding-right")))/100))+R;o(Si),f.setAttribute("aria-valuenow",Si),f.setAttribute("aria-label",F)}if(J.style.position="absolute",J.style.right="0",J.style.top="0",J.style.bottom="0",J.style.width="5px",J.classList.add("tabulator-progress-handle"),dt.style.display="inline-block",dt.style.position="relative",dt.style.height="100%",dt.style.backgroundColor="#488CE9",dt.style.maxWidth="100%",dt.style.minWidth="0%",c.elementAttributes&&"object"==typeof c.elementAttributes)for(let ze in c.elementAttributes)"+"==ze.charAt(0)?(ze=ze.slice(1),dt.setAttribute(ze,dt.getAttribute(ze)+c.elementAttributes["+"+ze])):dt.setAttribute(ze,c.elementAttributes[ze]);return f.style.padding="4px 4px",F=Math.min(parseFloat(F),E),F=Math.max(parseFloat(F),R),F=Math.round((F-R)/O),dt.style.width=F+"%",f.setAttribute("aria-valuemin",R),f.setAttribute("aria-valuemax",E),dt.appendChild(J),J.addEventListener("mousedown",function(ze){Ft=ze.screenX,qt=dt.offsetWidth}),J.addEventListener("mouseover",function(){J.style.cursor="ew-resize"}),f.addEventListener("mousemove",function(ze){Ft&&(dt.style.width=qt+ze.screenX-Ft+"px")}),f.addEventListener("mouseup",function(ze){Ft&&(ze.stopPropagation(),ze.stopImmediatePropagation(),Ft=!1,qt=!1,Ee())}),f.addEventListener("keydown",function(ze){switch(ze.keyCode){case 39:ze.preventDefault(),dt.style.width=dt.clientWidth+f.clientWidth/100+"px";break;case 37:ze.preventDefault(),dt.style.width=dt.clientWidth-f.clientWidth/100+"px";break;case 9:case 13:Ee();break;case 27:a()}}),f.addEventListener("blur",function(){a()}),dt},tickCross:function(g,l,o,a,c){var f=g.getValue(),E=document.createElement("input"),R=c.tristate,O=void 0===c.indeterminateValue?null:c.indeterminateValue,F=!1;if(E.setAttribute("type","checkbox"),E.style.marginTop="5px",E.style.boxSizing="border-box",c.elementAttributes&&"object"==typeof c.elementAttributes)for(let dt in c.elementAttributes)"+"==dt.charAt(0)?(dt=dt.slice(1),E.setAttribute(dt,E.getAttribute(dt)+c.elementAttributes["+"+dt])):E.setAttribute(dt,c.elementAttributes[dt]);function J(dt){return R?dt?F?O:E.checked:E.checked&&!F?(E.checked=!1,E.indeterminate=!0,F=!0,O):(F=!1,E.checked):E.checked}return E.value=f,R&&(void 0===f||f===O||""===f)&&(F=!0,E.indeterminate=!0),"firefox"!=this.table.browser&&l(function(){E.focus({preventScroll:!0})}),E.checked=!0===f||"true"===f||"True"===f||1===f,l(function(){E.focus()}),E.addEventListener("change",function(dt){o(J())}),E.addEventListener("blur",function(dt){o(J(!0))}),E.addEventListener("keydown",function(dt){13==dt.keyCode&&o(J()),27==dt.keyCode&&a()}),E}};let Yd=(()=>{class g extends Eo{constructor(o){super(o),this.currentCell=!1,this.mouseClick=!1,this.recursionBlock=!1,this.invalidEdit=!1,this.editedCells=[],this.editors=g.editors,this.registerColumnOption("editable"),this.registerColumnOption("editor"),this.registerColumnOption("editorParams"),this.registerColumnOption("cellEditing"),this.registerColumnOption("cellEdited"),this.registerColumnOption("cellEditCancelled"),this.registerTableFunction("getEditedCells",this.getEditedCells.bind(this)),this.registerTableFunction("clearCellEdited",this.clearCellEdited.bind(this)),this.registerTableFunction("navigatePrev",this.navigatePrev.bind(this)),this.registerTableFunction("navigateNext",this.navigateNext.bind(this)),this.registerTableFunction("navigateLeft",this.navigateLeft.bind(this)),this.registerTableFunction("navigateRight",this.navigateRight.bind(this)),this.registerTableFunction("navigateUp",this.navigateUp.bind(this)),this.registerTableFunction("navigateDown",this.navigateDown.bind(this)),this.registerComponentFunction("cell","isEdited",this.cellisEdited.bind(this)),this.registerComponentFunction("cell","clearEdited",this.clearEdited.bind(this)),this.registerComponentFunction("cell","edit",this.editCell.bind(this)),this.registerComponentFunction("cell","cancelEdit",this.cellCancelEdit.bind(this)),this.registerComponentFunction("cell","navigatePrev",this.navigatePrev.bind(this)),this.registerComponentFunction("cell","navigateNext",this.navigateNext.bind(this)),this.registerComponentFunction("cell","navigateLeft",this.navigateLeft.bind(this)),this.registerComponentFunction("cell","navigateRight",this.navigateRight.bind(this)),this.registerComponentFunction("cell","navigateUp",this.navigateUp.bind(this)),this.registerComponentFunction("cell","navigateDown",this.navigateDown.bind(this))}initialize(){this.subscribe("cell-init",this.bindEditor.bind(this)),this.subscribe("cell-delete",this.clearEdited.bind(this)),this.subscribe("column-layout",this.initializeColumnCheck.bind(this)),this.subscribe("column-delete",this.columnDeleteCheck.bind(this)),this.subscribe("row-deleting",this.rowDeleteCheck.bind(this)),this.subscribe("data-refeshing",this.cancelEdit.bind(this)),this.subscribe("keybinding-nav-prev",this.navigatePrev.bind(this)),this.subscribe("keybinding-nav-next",this.keybindingNavigateNext.bind(this)),this.subscribe("keybinding-nav-left",this.navigateLeft.bind(this)),this.subscribe("keybinding-nav-right",this.navigateRight.bind(this)),this.subscribe("keybinding-nav-up",this.navigateUp.bind(this)),this.subscribe("keybinding-nav-down",this.navigateDown.bind(this))}keybindingNavigateNext(o){var a=this.currentCell,c=this.options("tabEndNewRow");a&&(this.navigateNext(o)||c&&(a.getElement().firstChild.blur(),(c=this.table.addRow(!0===c?{}:"function"==typeof c?c(a.row.getComponent()):Object.assign({},c))).then(()=>{setTimeout(()=>{nav.next()})})))}cellisEdited(o){return!!o.modules.edit&&o.modules.edit.edited}cellCancelEdit(o){o===this.currentCell?this.table.modules.edit.cancelEdit():console.warn("Cancel Editor Error - This cell is not currently being edited ")}clearCellEdited(o){o||(o=this.modules.edit.getEditedCells()),Array.isArray(o)||(o=[o]),o.forEach(a=>{this.modules.edit.clearEdited(a._getSelf())})}navigatePrev(o){var c,f,a=this.currentCell;if(a){if(o&&o.preventDefault(),c=this.navigateLeft())return!0;if((f=this.table.rowManager.prevDisplayRow(a.row,!0))&&(c=this.findNextEditableCell(f,f.cells.length)))return c.getComponent().edit(),!0}return!1}navigateNext(o){var c,f,a=this.currentCell;if(a){if(o&&o.preventDefault(),c=this.navigateRight())return!0;if((f=this.table.rowManager.nextDisplayRow(a.row,!0))&&(c=this.findNextEditableCell(f,-1)))return c.getComponent().edit(),!0}return!1}navigateLeft(o){var c,f,a=this.currentCell;return!(!a||(o&&o.preventDefault(),c=a.getIndex(),f=this.findPrevEditableCell(a.row,c),!f)||(f.getComponent().edit(),0))}navigateRight(o){var c,f,a=this.currentCell;return!(!a||(o&&o.preventDefault(),c=a.getIndex(),f=this.findNextEditableCell(a.row,c),!f)||(f.getComponent().edit(),0))}navigateUp(o){var c,f,a=this.currentCell;return!(!a||(o&&o.preventDefault(),c=a.getIndex(),f=this.table.rowManager.prevDisplayRow(a.row,!0),!f)||(f.cells[c].getComponent().edit(),0))}navigateDown(o){var c,f,a=this.currentCell;return!(!a||(o&&o.preventDefault(),c=a.getIndex(),f=this.table.rowManager.nextDisplayRow(a.row,!0),!f)||(f.cells[c].getComponent().edit(),0))}findNextEditableCell(o,a){var c=!1;if(a<o.cells.length-1)for(var f=a+1;f<o.cells.length;f++){let E=o.cells[f];if(E.column.modules.edit&&Es.elVisible(E.getElement())){let R=!0;if("function"==typeof E.column.modules.edit.check&&(R=E.column.modules.edit.check(E.getComponent())),R){c=E;break}}}return c}findPrevEditableCell(o,a){var c=!1;if(a>0)for(var f=a-1;f>=0;f--){let E=o.cells[f],R=!0;if(E.column.modules.edit&&Es.elVisible(E.getElement())&&("function"==typeof E.column.modules.edit.check&&(R=E.column.modules.edit.check(E.getComponent())),R)){c=E;break}}return c}initializeColumnCheck(o){void 0!==o.definition.editor&&this.initializeColumn(o)}columnDeleteCheck(o){this.currentCell&&this.currentCell.column===o&&this.cancelEdit()}rowDeleteCheck(o){this.currentCell&&this.currentCell.row===o&&this.cancelEdit()}initializeColumn(o){var a={editor:!1,blocked:!1,check:o.definition.editable,params:o.definition.editorParams||{}};switch(typeof o.definition.editor){case"string":this.editors[o.definition.editor]?a.editor=this.editors[o.definition.editor]:console.warn("Editor Error - No such editor found: ",o.definition.editor);break;case"function":a.editor=o.definition.editor;break;case"boolean":!0===o.definition.editor&&("function"!=typeof o.definition.formatter?a.editor=this.editors[o.definition.formatter]?this.editors[o.definition.formatter]:this.editors.input:console.warn("Editor Error - Cannot auto lookup editor for a custom formatter: ",o.definition.formatter))}a.editor&&(o.modules.edit=a)}getCurrentCell(){return!!this.currentCell&&this.currentCell.getComponent()}clearEditor(o){var c,a=this.currentCell;if(this.invalidEdit=!1,a){for(this.currentCell=!1,c=a.getElement(),o?a.validate&&a.validate():c.classList.remove("tabulator-validation-fail"),c.classList.remove("tabulator-editing");c.firstChild;)c.removeChild(c.firstChild);a.row.getElement().classList.remove("tabulator-row-editing")}}cancelEdit(){if(this.currentCell){var o=this.currentCell,a=this.currentCell.getComponent();this.clearEditor(!0),o.setValueActual(o.getValue()),o.cellRendered(),("textarea"==o.column.definition.editor||o.column.definition.variableHeight)&&o.row.normalizeHeight(!0),o.column.definition.cellEditCancelled&&o.column.definition.cellEditCancelled.call(this.table,a),this.dispatchExternal("cellEditCancelled",a)}}bindEditor(o){if(o.column.modules.edit){var a=this,c=o.getElement(!0);c.setAttribute("tabindex",0),c.addEventListener("click",function(f){c.classList.contains("tabulator-editing")||c.focus({preventScroll:!0})}),c.addEventListener("mousedown",function(f){2===f.button?f.preventDefault():a.mouseClick=!0}),c.addEventListener("focus",function(f){a.recursionBlock||a.edit(o,f,!1)})}}focusCellNoEvent(o,a){this.recursionBlock=!0,a&&"ie"===this.table.browser||o.getElement().focus({preventScroll:!0}),this.recursionBlock=!1}editCell(o,a){this.focusCellNoEvent(o),this.edit(o,!1,a)}focusScrollAdjust(o){if("virtual"==this.table.rowManager.getRenderMode()){var a=this.table.rowManager.element.scrollTop,c=this.table.rowManager.element.clientHeight+this.table.rowManager.element.scrollTop,f=o.row.getElement();f.offsetTop<a?this.table.rowManager.element.scrollTop-=a-f.offsetTop:f.offsetTop+f.offsetHeight>c&&(this.table.rowManager.element.scrollTop+=f.offsetTop+f.offsetHeight-c);var R=this.table.rowManager.element.scrollLeft,O=this.table.rowManager.element.clientWidth+this.table.rowManager.element.scrollLeft,F=o.getElement();this.table.modExists("frozenColumns")&&(R+=parseInt(this.table.modules.frozenColumns.leftMargin),O-=parseInt(this.table.modules.frozenColumns.rightMargin)),"virtual"===this.table.options.renderHorizontal&&(R-=parseInt(this.table.columnManager.renderer.vDomPadLeft),O-=parseInt(this.table.columnManager.renderer.vDomPadLeft)),F.offsetLeft<R?this.table.rowManager.element.scrollLeft-=R-F.offsetLeft:F.offsetLeft+F.offsetWidth>O&&(this.table.rowManager.element.scrollLeft+=F.offsetLeft+F.offsetWidth-O)}}edit(o,a,c){var F,J,dt,f=this,E=!0,R=function(){},O=o.getElement();if(!this.currentCell){if(o.column.modules.edit.blocked)return this.mouseClick=!1,O.blur(),!1;switch(a&&a.stopPropagation(),typeof o.column.modules.edit.check){case"function":E=o.column.modules.edit.check(o.getComponent());break;case"boolean":E=o.column.modules.edit.check}if(E||c){if(f.cancelEdit(),f.currentCell=o,this.focusScrollAdjust(o),J=o.getComponent(),this.mouseClick&&(this.mouseClick=!1,o.column.definition.cellClick&&o.column.definition.cellClick.call(this.table,a,J)),o.column.definition.cellEditing&&o.column.definition.cellEditing.call(this.table,J),this.dispatchExternal("cellEditing",J),dt="function"==typeof o.column.modules.edit.params?o.column.modules.edit.params(J):o.column.modules.edit.params,!1===(F=o.column.modules.edit.editor.call(f,J,function(ze){R=ze},function(ze){if(f.currentCell===o){var Si=!0;return o.column.modules.validate&&f.table.modExists("validate")&&"manual"!=f.table.options.validationMode&&(Si=f.table.modules.validate.validate(o.column.modules.validate,o,ze)),!0===Si||"highlight"===f.table.options.validationMode?(f.clearEditor(),o.modules.edit||(o.modules.edit={}),o.modules.edit.edited=!0,-1==f.editedCells.indexOf(o)&&f.editedCells.push(o),o.setValue(ze,!0),f.table.options.dataTree&&f.table.modExists("dataTree")&&f.table.modules.dataTree.checkForRestyle(o),!0===Si||(O.classList.add("tabulator-validation-fail"),f.table.externalEvents.dispatch("validationFailed",o.getComponent(),ze,Si),!1)):(f.invalidEdit=!0,O.classList.add("tabulator-validation-fail"),f.focusCellNoEvent(o,!0),R(),f.table.externalEvents.dispatch("validationFailed",o.getComponent(),ze,Si),!1)}},function(){f.currentCell===o&&(f.cancelEdit(),f.table.options.dataTree&&f.table.modExists("dataTree")&&f.table.modules.dataTree.checkForRestyle(o))},dt)))return O.blur(),!1;if(!(F instanceof Node))return console.warn("Edit Error - Editor should return an instance of Node, the editor returned:",F),O.blur(),!1;for(O.classList.add("tabulator-editing"),o.row.getElement().classList.add("tabulator-row-editing");O.firstChild;)O.removeChild(O.firstChild);O.appendChild(F),R();for(var Ae=O.children,We=0;We<Ae.length;We++)Ae[We].addEventListener("click",function(ze){ze.stopPropagation()});return!0}return this.mouseClick=!1,O.blur(),!1}this.invalidEdit||this.cancelEdit()}getEditedCells(){var o=[];return this.editedCells.forEach(a=>{o.push(a.getComponent())}),o}clearEdited(o){var a;o.modules.edit&&o.modules.edit.edited&&(o.modules.edit.edited=!1,o.modules.validate&&(o.modules.validate.invalid=!1)),(a=this.editedCells.indexOf(o))>-1&&this.editedCells.splice(a,1)}}return g.moduleName="edit",g.editors=wp,g})();class bd{constructor(l,o,a,c){this.type=l,this.columns=o,this.component=a||!1,this.indent=c||0}}class yd{constructor(l,o,a,c,f){this.value=l,this.component=o||!1,this.width=a,this.height=c,this.depth=f}}let Ed=(()=>{class g extends Eo{constructor(o){super(o),this.config={},this.cloneTableStyle=!0,this.colVisProp="",this.registerTableOption("htmlOutputConfig",!1),this.registerColumnOption("htmlOutput"),this.registerColumnOption("titleHtmlOutput")}initialize(){this.registerTableFunction("getHtml",this.getHtml.bind(this))}generateExportList(o,a,c,f){this.cloneTableStyle=a,this.config=o||{},this.colVisProp=f;var E=!1!==this.config.columnHeaders?this.headersToExportRows(this.generateColumnGroupHeaders()):[],R=this.bodyToExportRows(this.rowLookup(c));return E.concat(R)}genereateTable(o,a,c,f){var E=this.generateExportList(o,a,c,f);return this.genereateTableElement(E)}rowLookup(o){var a=[];if("function"==typeof o)o.call(this.table).forEach(c=>{(c=this.table.rowManager.findRow(c))&&a.push(c)});else switch(o){case!0:case"visible":a=this.table.rowManager.getVisibleRows(!0);break;case"all":a=this.table.rowManager.rows;break;case"selected":a=this.table.modules.selectRow.selectedRows;break;default:a=this.table.options.pagination?this.table.rowManager.getDisplayRows(this.table.rowManager.displayRows.length-2):this.table.rowManager.getDisplayRows()}return Object.assign([],a)}generateColumnGroupHeaders(){var o=[];return(!1!==this.config.columnGroups?this.table.columnManager.columns:this.table.columnManager.columnsByIndex).forEach(c=>{var f=this.processColumnGroup(c);f&&o.push(f)}),o}processColumnGroup(o){var a=o.columns,c=0,E={title:o.definition["title"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))]||o.definition.title,column:o,depth:1};if(a.length){if(E.subGroups=[],E.width=0,a.forEach(R=>{var O=this.processColumnGroup(R);O&&(E.width+=O.width,E.subGroups.push(O),O.depth>c&&(c=O.depth))}),E.depth+=c,!E.width)return!1}else{if(!this.columnVisCheck(o))return!1;E.width=1}return E}columnVisCheck(o){return!1!==o.definition[this.colVisProp]&&(o.visible||!o.visible&&o.definition[this.colVisProp])}headersToExportRows(o){var a=[],c=0,f=[];function E(R,O){var F=c-O;if(void 0===a[O]&&(a[O]=[]),R.height=R.subGroups?1:F-R.depth+1,a[O].push(R),R.height>1)for(let J=1;J<R.height;J++)void 0===a[O+J]&&(a[O+J]=[]),a[O+J].push(!1);if(R.width>1)for(let J=1;J<R.width;J++)a[O].push(!1);R.subGroups&&R.subGroups.forEach(function(J){E(J,O+1)})}return o.forEach(function(R){R.depth>c&&(c=R.depth)}),o.forEach(function(R){E(R,0)}),a.forEach(R=>{var O=[];R.forEach(F=>{O.push(F?new yd(F.title,F.column.getComponent(),F.width,F.height,F.depth):null)}),f.push(new bd("header",O))}),f}bodyToExportRows(o){var a=[],c=[];return this.table.columnManager.columnsByIndex.forEach(f=>{this.columnVisCheck(f)&&a.push(f.getComponent())}),!1!==this.config.columnCalcs&&this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&o.unshift(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&o.push(this.table.modules.columnCalcs.botRow)),(o=o.filter(f=>{switch(f.type){case"group":return!1!==this.config.rowGroups;case"calc":return!1!==this.config.columnCalcs;case"row":return!(this.table.options.dataTree&&!1===this.config.dataTree&&f.modules.dataTree.parent)}return!0})).forEach((f,E)=>{var R=f.getData(this.colVisProp),O=[],F=0;switch(f.type){case"group":F=f.level,O.push(new yd(f.key,f.getComponent(),a.length,1));break;case"calc":case"row":a.forEach(J=>{O.push(new yd(J._column.getFieldValue(R),J,1,1))}),this.table.options.dataTree&&!1!==this.config.dataTree&&(F=f.modules.dataTree.index)}c.push(new bd(f.type,O,f.getComponent(),F))}),c}genereateTableElement(o){var a=document.createElement("table"),c=document.createElement("thead"),f=document.createElement("tbody"),E=this.lookupTableStyles(),R=this.table.options["rowFormatter"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))],O={};return O.rowFormatter=null!==R?R:this.table.options.rowFormatter,this.table.options.dataTree&&!1!==this.config.dataTree&&this.table.modExists("columnCalcs")&&(O.treeElementField=this.table.modules.dataTree.elementField),O.groupHeader=this.table.options["groupHeader"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))],O.groupHeader&&!Array.isArray(O.groupHeader)&&(O.groupHeader=[O.groupHeader]),a.classList.add("tabulator-print-table"),this.mapElementStyles(this.table.columnManager.getHeadersElement(),c,["border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),o.length>1e3&&console.warn("It may take a long time to render an HTML table with more than 1000 rows"),o.forEach((F,J)=>{switch(F.type){case"header":c.appendChild(this.genereateHeaderElement(F,O,E));break;case"group":f.appendChild(this.genereateGroupElement(F,O,E));break;case"calc":f.appendChild(this.genereateCalcElement(F,O,E));break;case"row":let dt=this.genereateRowElement(F,O,E);this.mapElementStyles(J%2&&E.evenRow?E.evenRow:E.oddRow,dt,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),f.appendChild(dt)}}),c.innerHTML&&a.appendChild(c),a.appendChild(f),this.mapElementStyles(this.table.element,a,["border-top","border-left","border-right","border-bottom"]),a}lookupTableStyles(){var o={};return this.cloneTableStyle&&window.getComputedStyle&&(o.oddRow=this.table.element.querySelector(".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)"),o.evenRow=this.table.element.querySelector(".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)"),o.calcRow=this.table.element.querySelector(".tabulator-row.tabulator-calcs"),o.firstRow=this.table.element.querySelector(".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)"),o.firstGroup=this.table.element.getElementsByClassName("tabulator-group")[0],o.firstRow&&(o.styleCells=o.firstRow.getElementsByClassName("tabulator-cell"),o.firstCell=o.styleCells[0],o.lastCell=o.styleCells[o.styleCells.length-1])),o}genereateHeaderElement(o,a,c){var f=document.createElement("tr");return o.columns.forEach(E=>{if(E){var R=document.createElement("th"),O=E.component._column.definition.cssClass?E.component._column.definition.cssClass.split(" "):[];R.colSpan=E.width,R.rowSpan=E.height,R.innerHTML=E.value,this.cloneTableStyle&&(R.style.boxSizing="border-box"),O.forEach(function(F){R.classList.add(F)}),this.mapElementStyles(E.component.getElement(),R,["text-align","border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),this.mapElementStyles(E.component._column.contentElement,R,["padding-top","padding-left","padding-right","padding-bottom"]),E.component._column.visible?this.mapElementStyles(E.component.getElement(),R,["width"]):E.component._column.definition.width&&(R.style.width=E.component._column.definition.width+"px"),E.component._column.parent&&this.mapElementStyles(E.component._column.parent.groupElement,R,["border-top"]),f.appendChild(R)}}),f}genereateGroupElement(o,a,c){var f=document.createElement("tr"),E=document.createElement("td"),R=o.columns[0];return f.classList.add("tabulator-print-table-row"),R.value=a.groupHeader&&a.groupHeader[o.indent]?a.groupHeader[o.indent](R.value,o.component._group.getRowCount(),o.component._group.getData(),o.component):!1===a.groupHeader?R.value:o.component._group.generator(R.value,o.component._group.getRowCount(),o.component._group.getData(),o.component),E.colSpan=R.width,E.innerHTML=R.value,f.classList.add("tabulator-print-table-group"),f.classList.add("tabulator-group-level-"+o.indent),R.component.isVisible()&&f.classList.add("tabulator-group-visible"),this.mapElementStyles(c.firstGroup,f,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),this.mapElementStyles(c.firstGroup,E,["padding-top","padding-left","padding-right","padding-bottom"]),f.appendChild(E),f}genereateCalcElement(o,a,c){var f=this.genereateRowElement(o,a,c);return f.classList.add("tabulator-print-table-calcs"),this.mapElementStyles(c.calcRow,f,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),f}genereateRowElement(o,a,c){var f=document.createElement("tr");return f.classList.add("tabulator-print-table-row"),o.columns.forEach(E=>{if(E){var R=document.createElement("td"),O=E.component._column,F=E.value,J={modules:{},getValue:function(){return F},getField:function(){return O.definition.field},getElement:function(){return R},getColumn:function(){return O.getComponent()},getData:function(){return o.component.getData()},getRow:function(){return o.component},getComponent:function(){return J},column:O};if((O.definition.cssClass?O.definition.cssClass.split(" "):[]).forEach(function(Ft){R.classList.add(Ft)}),this.table.modExists("format")&&!1!==this.config.formatCells)F=this.table.modules.format.formatExportValue(J,this.colVisProp);else switch(typeof F){case"object":F=JSON.stringify(F);break;case"undefined":case"null":F="";break;default:F=F}F instanceof Node?R.appendChild(F):R.innerHTML=F,c.firstCell&&(this.mapElementStyles(c.firstCell,R,["padding-top","padding-left","padding-right","padding-bottom","border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size"]),O.definition.align&&(R.style.textAlign=O.definition.align)),this.table.options.dataTree&&!1!==this.config.dataTree&&(a.treeElementField&&a.treeElementField==O.field||!a.treeElementField&&0==i)&&(o.component._row.modules.dataTree.controlEl&&R.insertBefore(o.component._row.modules.dataTree.controlEl.cloneNode(!0),R.firstChild),o.component._row.modules.dataTree.branchEl&&R.insertBefore(o.component._row.modules.dataTree.branchEl.cloneNode(!0),R.firstChild)),f.appendChild(R),J.modules.format&&J.modules.format.renderedCallback&&J.modules.format.renderedCallback(),a.rowFormatter&&!1!==this.config.formatCells&&a.rowFormatter(o.component)}}),f}genereateHTMLTable(o){var a=document.createElement("div");return a.appendChild(this.genereateTableElement(o)),a.innerHTML}getHtml(o,a,c,f){var E=this.generateExportList(c||this.table.options.htmlOutputConfig,a,o,f||"htmlOutput");return this.genereateHTMLTable(E)}mapElementStyles(o,a,c){if(this.cloneTableStyle&&o&&a){var f={"background-color":"backgroundColor",color:"fontColor",width:"width","font-weight":"fontWeight","font-family":"fontFamily","font-size":"fontSize","text-align":"textAlign","border-top":"borderTop","border-left":"borderLeft","border-right":"borderRight","border-bottom":"borderBottom","padding-top":"paddingTop","padding-left":"paddingLeft","padding-right":"paddingRight","padding-bottom":"paddingBottom"};if(window.getComputedStyle){var E=window.getComputedStyle(o);c.forEach(function(R){a.style[f[R]]=E.getPropertyValue(R)})}}}}return g.moduleName="export",g})();var xf={"=":function(g,l,o,a){return l==g},"<":function(g,l,o,a){return l<g},"<=":function(g,l,o,a){return l<=g},">":function(g,l,o,a){return l>g},">=":function(g,l,o,a){return l>=g},"!=":function(g,l,o,a){return l!=g},regex:function(g,l,o,a){return"string"==typeof g&&(g=new RegExp(g)),g.test(l)},like:function(g,l,o,a){return null==g?l===g:null!=l&&String(l).toLowerCase().indexOf(g.toLowerCase())>-1},keywords:function(g,l,o,a){var c=g.toLowerCase().split(void 0===a.separator?" ":a.separator),f=String(null==l?"":l).toLowerCase(),E=[];return c.forEach(R=>{f.includes(R)&&E.push(!0)}),a.matchAll?E.length===c.length:!!E.length},starts:function(g,l,o,a){return null==g?l===g:null!=l&&String(l).toLowerCase().startsWith(g.toLowerCase())},ends:function(g,l,o,a){return null==g?l===g:null!=l&&String(l).toLowerCase().endsWith(g.toLowerCase())},in:function(g,l,o,a){return Array.isArray(g)?!g.length||g.indexOf(l)>-1:(console.warn("Filter Error - filter value is not an array:",g),!1)}};let Rp=(()=>{class g extends Eo{constructor(o){super(o),this.filterList=[],this.headerFilters={},this.headerFilterColumns=[],this.prevHeaderFilterChangeCheck="",this.prevHeaderFilterChangeCheck="{}",this.changed=!1,this.tableInitialized=!1,this.registerTableOption("filterMode","local"),this.registerTableOption("initialFilter",!1),this.registerTableOption("initialHeaderFilter",!1),this.registerTableOption("headerFilterLiveFilterDelay",300),this.registerColumnOption("headerFilter"),this.registerColumnOption("headerFilterPlaceholder"),this.registerColumnOption("headerFilterParams"),this.registerColumnOption("headerFilterEmptyCheck"),this.registerColumnOption("headerFilterFunc"),this.registerColumnOption("headerFilterFuncParams"),this.registerColumnOption("headerFilterLiveFilter"),this.registerTableFunction("searchRows",this.searchRows.bind(this)),this.registerTableFunction("searchData",this.searchData.bind(this)),this.registerTableFunction("setFilter",this.userSetFilter.bind(this)),this.registerTableFunction("refreshFilter",this.userRefreshFilter.bind(this)),this.registerTableFunction("addFilter",this.userAddFilter.bind(this)),this.registerTableFunction("getFilters",this.getFilters.bind(this)),this.registerTableFunction("setHeaderFilterFocus",this.userSetHeaderFilterFocus.bind(this)),this.registerTableFunction("getHeaderFilterValue",this.userGetHeaderFilterValue.bind(this)),this.registerTableFunction("setHeaderFilterValue",this.userSetHeaderFilterValue.bind(this)),this.registerTableFunction("getHeaderFilters",this.getHeaderFilters.bind(this)),this.registerTableFunction("removeFilter",this.userRemoveFilter.bind(this)),this.registerTableFunction("clearFilter",this.userClearFilter.bind(this)),this.registerTableFunction("clearHeaderFilter",this.userClearHeaderFilter.bind(this)),this.registerComponentFunction("column","headerFilterFocus",this.setHeaderFilterFocus.bind(this)),this.registerComponentFunction("column","reloadHeaderFilter",this.reloadHeaderFilter.bind(this)),this.registerComponentFunction("column","getHeaderFilterValue",this.getHeaderFilterValue.bind(this)),this.registerComponentFunction("column","setHeaderFilterValue",this.setHeaderFilterValue.bind(this))}initialize(){this.subscribe("column-init",this.initializeColumnHeaderFilter.bind(this)),this.subscribe("column-width-fit-before",this.hideHeaderFilterElements.bind(this)),this.subscribe("column-width-fit-after",this.showHeaderFilterElements.bind(this)),this.subscribe("table-built",this.tableBuilt.bind(this)),"remote"===this.table.options.filterMode&&this.subscribe("data-params",this.remoteFilterParams.bind(this)),this.registerDataHandler(this.filter.bind(this),10)}tableBuilt(){this.table.options.initialFilter&&this.setFilter(this.table.options.initialFilter),this.table.options.initialHeaderFilter&&this.table.options.initialHeaderFilter.forEach(o=>{var a=this.table.columnManager.findColumn(o.field);if(!a)return console.warn("Column Filter Error - No matching column found:",o.field),!1;this.setHeaderFilterValue(a,o.value)}),this.tableInitialized=!0}remoteFilterParams(o,a,c,f){return f.filter=this.getFilters(!0,!0),f}userSetFilter(o,a,c,f){this.setFilter(o,a,c,f),this.refreshFilter()}userRefreshFilter(){this.refreshFilter()}userAddFilter(o,a,c,f){this.addFilter(o,a,c,f),this.refreshFilter()}userSetHeaderFilterFocus(o){var a=this.table.columnManager.findColumn(o);if(!a)return console.warn("Column Filter Focus Error - No matching column found:",o),!1;this.setHeaderFilterFocus(a)}userGetHeaderFilterValue(o){var a=this.table.columnManager.findColumn(o);if(a)return this.getHeaderFilterValue(a);console.warn("Column Filter Error - No matching column found:",o)}userSetHeaderFilterValue(o,a){var c=this.table.columnManager.findColumn(o);if(!c)return console.warn("Column Filter Error - No matching column found:",o),!1;this.setHeaderFilterValue(c,a)}userRemoveFilter(o,a,c){this.removeFilter(o,a,c),this.refreshFilter()}userClearFilter(o){this.clearFilter(o),this.refreshFilter()}userClearHeaderFilter(){this.clearHeaderFilter(),this.refreshFilter()}searchRows(o,a,c){return this.search("rows",o,a,c)}searchData(o,a,c){return this.search("data",o,a,c)}initializeColumnHeaderFilter(o){var a=o.definition;a.headerFilter&&(void 0!==a.headerFilterPlaceholder&&a.field&&this.module("localize").setHeaderFilterColumnPlaceholder(a.field,a.headerFilterPlaceholder),this.initializeColumn(o))}initializeColumn(o,a){var c=this,f=o.getField();o.modules.filter={success:function(R){var dt,O="input"==o.modules.filter.tagType&&"text"==o.modules.filter.attrType||"textarea"==o.modules.filter.tagType?"partial":"match",F="",J="";if(void 0===o.modules.filter.prevSuccess||o.modules.filter.prevSuccess!==R){if(o.modules.filter.prevSuccess=R,o.modules.filter.emptyFunc(R))delete c.headerFilters[f];else{switch(o.modules.filter.value=R,typeof o.definition.headerFilterFunc){case"string":g.filters[o.definition.headerFilterFunc]?(F=o.definition.headerFilterFunc,dt=function(Ft){var qt=o.definition.headerFilterFuncParams||{},Ee=o.getFieldValue(Ft);return qt="function"==typeof qt?qt(R,Ee,Ft):qt,g.filters[o.definition.headerFilterFunc](R,Ee,Ft,qt)}):console.warn("Header Filter Error - Matching filter function not found: ",o.definition.headerFilterFunc);break;case"function":F=dt=function(Ft){var qt=o.definition.headerFilterFuncParams||{},Ee=o.getFieldValue(Ft);return qt="function"==typeof qt?qt(R,Ee,Ft):qt,o.definition.headerFilterFunc(R,Ee,Ft,qt)}}dt||("partial"===O?(dt=function(Ft){var qt=o.getFieldValue(Ft);return null!=qt&&String(qt).toLowerCase().indexOf(String(R).toLowerCase())>-1},F="like"):(dt=function(Ft){return o.getFieldValue(Ft)==R},F="=")),c.headerFilters[f]={value:R,func:dt,type:F,params:{}}}J=JSON.stringify(c.headerFilters),c.prevHeaderFilterChangeCheck!==J&&(c.prevHeaderFilterChangeCheck=J,c.trackChanges(),c.refreshFilter())}return!0},attrType:!1,tagType:!1,emptyFunc:!1},this.generateHeaderFilterElement(o)}generateHeaderFilterElement(o,a,c){var O,F,J,dt,Ft,qt,Ee,f=this,E=o.modules.filter.success,R=o.getField();if(o.modules.filter.headerElement&&o.modules.filter.headerElement.parentNode&&o.contentElement.removeChild(o.modules.filter.headerElement.parentNode),R){switch(o.modules.filter.emptyFunc=o.definition.headerFilterEmptyCheck||function(We){return!We&&"0"!==We&&0!==We},(O=document.createElement("div")).classList.add("tabulator-header-filter"),typeof o.definition.headerFilter){case"string":f.table.modules.edit.editors[o.definition.headerFilter]?(F=f.table.modules.edit.editors[o.definition.headerFilter],("tick"===o.definition.headerFilter||"tickCross"===o.definition.headerFilter)&&!o.definition.headerFilterEmptyCheck&&(o.modules.filter.emptyFunc=function(We){return!0!==We&&!1!==We})):console.warn("Filter Error - Cannot build header filter, No such editor found: ",o.definition.editor);break;case"function":F=o.definition.headerFilter;break;case"boolean":o.modules.edit&&o.modules.edit.editor?F=o.modules.edit.editor:o.definition.formatter&&f.table.modules.edit.editors[o.definition.formatter]?(F=f.table.modules.edit.editors[o.definition.formatter],("tick"===o.definition.formatter||"tickCross"===o.definition.formatter)&&!o.definition.headerFilterEmptyCheck&&(o.modules.filter.emptyFunc=function(We){return!0!==We&&!1!==We})):F=f.table.modules.edit.editors.input}if(F){if(dt={getValue:function(){return void 0!==a?a:""},getField:function(){return o.definition.field},getElement:function(){return O},getColumn:function(){return o.getComponent()},getRow:function(){return{normalizeHeight:function(){}}}},Ee="function"==typeof(Ee=o.definition.headerFilterParams||{})?Ee.call(f.table):Ee,!(J=F.call(this.table.modules.edit,dt,function(){},E,function(){},Ee)))return void console.warn("Filter Error - Cannot add filter to "+R+" column, editor returned a value of false");if(!(J instanceof Node))return void console.warn("Filter Error - Cannot add filter to "+R+" column, editor should return an instance of Node, the editor returned:",J);R?f.langBind("headerFilters|columns|"+o.definition.field,function(We){J.setAttribute("placeholder",void 0!==We&&We?We:f.langText("headerFilters|default"))}):f.langBind("headerFilters|default",function(We){J.setAttribute("placeholder",We)}),J.addEventListener("click",function(We){We.stopPropagation(),J.focus()}),J.addEventListener("focus",We=>{var ze=this.table.columnManager.element.scrollLeft;ze!==this.table.rowManager.element.scrollLeft&&(this.table.rowManager.scrollHorizontal(ze),this.table.columnManager.scrollHorizontal(ze))}),Ft=!1,qt=function(We){Ft&&clearTimeout(Ft),Ft=setTimeout(function(){E(J.value)},f.table.options.headerFilterLiveFilterDelay)},o.modules.filter.headerElement=J,o.modules.filter.attrType=J.hasAttribute("type")?J.getAttribute("type").toLowerCase():"",o.modules.filter.tagType=J.tagName.toLowerCase(),!1!==o.definition.headerFilterLiveFilter&&("autocomplete"===o.definition.headerFilter||"tickCross"===o.definition.headerFilter||("autocomplete"===o.definition.editor||"tickCross"===o.definition.editor)&&!0===o.definition.headerFilter||(J.addEventListener("keyup",qt),J.addEventListener("search",qt),"number"==o.modules.filter.attrType&&J.addEventListener("change",function(We){E(J.value)}),"text"==o.modules.filter.attrType&&"ie"!==this.table.browser&&J.setAttribute("type","search")),("input"==o.modules.filter.tagType||"select"==o.modules.filter.tagType||"textarea"==o.modules.filter.tagType)&&J.addEventListener("mousedown",function(We){We.stopPropagation()})),O.appendChild(J),o.contentElement.appendChild(O),c||f.headerFilterColumns.push(o)}}else console.warn("Filter Error - Cannot add header filter, column has no field set:",o.definition.title)}hideHeaderFilterElements(){this.headerFilterColumns.forEach(function(o){o.modules.filter&&o.modules.filter.headerElement&&(o.modules.filter.headerElement.style.display="none")})}showHeaderFilterElements(){this.headerFilterColumns.forEach(function(o){o.modules.filter&&o.modules.filter.headerElement&&(o.modules.filter.headerElement.style.display="")})}setHeaderFilterFocus(o){o.modules.filter&&o.modules.filter.headerElement?o.modules.filter.headerElement.focus():console.warn("Column Filter Focus Error - No header filter set on column:",o.getField())}getHeaderFilterValue(o){if(o.modules.filter&&o.modules.filter.headerElement)return o.modules.filter.headerElement.value;console.warn("Column Filter Error - No header filter set on column:",o.getField())}setHeaderFilterValue(o,a){o&&(o.modules.filter&&o.modules.filter.headerElement?(this.generateHeaderFilterElement(o,a,!0),o.modules.filter.success(a)):console.warn("Column Filter Error - No header filter set on column:",o.getField()))}reloadHeaderFilter(o){o&&(o.modules.filter&&o.modules.filter.headerElement?this.generateHeaderFilterElement(o,o.modules.filter.value,!0):console.warn("Column Filter Error - No header filter set on column:",o.getField()))}refreshFilter(){this.tableInitialized&&("remote"===this.table.options.filterMode?this.reloadData():this.refreshData())}trackChanges(){this.changed=!0,this.dispatch("filter-changed")}hasChanged(){var o=this.changed;return this.changed=!1,o}setFilter(o,a,c,f){this.filterList=[],Array.isArray(o)||(o=[{field:o,type:a,value:c,params:f}]),this.addFilter(o)}addFilter(o,a,c,f){Array.isArray(o)||(o=[{field:o,type:a,value:c,params:f}]),o.forEach(E=>{(E=this.findFilter(E))&&(this.filterList.push(E),this.changed=!0)})}findFilter(o){var a;if(Array.isArray(o))return this.findSubFilters(o);var c=!1;return"function"==typeof o.field?c=function(f){return o.field(f,o.type||{})}:g.filters[o.type]?c=(a=this.table.columnManager.getColumnByField(o.field))?function(f){return g.filters[o.type](o.value,a.getFieldValue(f),f,o.params||{})}:function(f){return g.filters[o.type](o.value,f[o.field],f,o.params||{})}:console.warn("Filter Error - No such filter type found, ignoring: ",o.type),o.func=c,!!o.func&&o}findSubFilters(o){var a=[];return o.forEach(c=>{(c=this.findFilter(c))&&a.push(c)}),!!a.length&&a}getFilters(o,a){var c=[];return o&&(c=this.getHeaderFilters()),a&&c.forEach(function(f){"function"==typeof f.type&&(f.type="function")}),c.concat(this.filtersToArray(this.filterList,a))}filtersToArray(o,a){var c=[];return o.forEach(f=>{var E;Array.isArray(f)?c.push(this.filtersToArray(f,a)):(E={field:f.field,type:f.type,value:f.value},a&&"function"==typeof E.type&&(E.type="function"),c.push(E))}),c}getHeaderFilters(){var o=[];for(var a in this.headerFilters)o.push({field:a,type:this.headerFilters[a].type,value:this.headerFilters[a].value});return o}removeFilter(o,a,c){Array.isArray(o)||(o=[{field:o,type:a,value:c}]),o.forEach(f=>{var E;(E=this.filterList.findIndex("object"==typeof f.field?R=>f===R:R=>f.field===R.field&&f.type===R.type&&f.value===R.value))>-1?this.filterList.splice(E,1):console.warn("Filter Error - No matching filter type found, ignoring: ",f.type)}),this.trackChanges()}clearFilter(o){this.filterList=[],o&&this.clearHeaderFilter(),this.trackChanges()}clearHeaderFilter(){this.headerFilters={},this.prevHeaderFilterChangeCheck="{}",this.headerFilterColumns.forEach(o=>{void 0!==o.modules.filter.value&&delete o.modules.filter.value,o.modules.filter.prevSuccess=void 0,this.reloadHeaderFilter(o)}),this.trackChanges()}search(o,a,c,f){var E=[],R=[];return Array.isArray(a)||(a=[{field:a,type:c,value:f}]),a.forEach(O=>{(O=this.findFilter(O))&&R.push(O)}),this.table.rowManager.rows.forEach(O=>{var F=!0;R.forEach(J=>{this.filterRecurse(J,O.getData())||(F=!1)}),F&&E.push("data"===o?O.getData("data"):O.getComponent())}),E}filter(o,a){var c=[],f=[];return this.subscribedExternal("dataFiltering")&&this.dispatchExternal("dataFiltering",this.getFilters()),"remote"!==this.table.options.filterMode&&(this.filterList.length||Object.keys(this.headerFilters).length)?o.forEach(E=>{this.filterRow(E)&&c.push(E)}):c=o.slice(0),this.subscribedExternal("dataFiltered")&&(c.forEach(E=>{f.push(E.getComponent())}),this.dispatchExternal("dataFiltered",this.getFilters(),f)),c}filterRow(o,a){var c=!0,f=o.getData();for(var E in this.filterList.forEach(R=>{this.filterRecurse(R,f)||(c=!1)}),this.headerFilters)this.headerFilters[E].func(f)||(c=!1);return c}filterRecurse(o,a){var c=!1;return Array.isArray(o)?o.forEach(f=>{this.filterRecurse(f,a)&&(c=!0)}):c=o.func(a),c}}return g.moduleName="filter",g.filters=xf,g})();var xp={plaintext:function(g,l,o){return this.emptyToSpace(this.sanitizeHTML(g.getValue()))},html:function(g,l,o){return g.getValue()},textarea:function(g,l,o){return g.getElement().style.whiteSpace="pre-wrap",this.emptyToSpace(this.sanitizeHTML(g.getValue()))},money:function(g,l,o){var f,E,R,O,a=parseFloat(g.getValue()),c="",F=l.decimal||".",J=l.thousand||",",dt=l.negativeSign||"-",Ft=l.symbol||"",qt=!!l.symbolAfter,Ee=void 0!==l.precision?l.precision:2;if(isNaN(a))return this.emptyToSpace(this.sanitizeHTML(g.getValue()));for(a<0&&(a=Math.abs(a),c=dt),f=!1!==Ee?a.toFixed(Ee):a,E=(f=String(f).split("."))[0],R=f.length>1?F+f[1]:"",O=/(\d+)(\d{3})/;O.test(E);)E=E.replace(O,"$1"+J+"$2");return qt?c+E+R+Ft:c+Ft+E+R},link:function(g,l,o){var a=g.getValue(),c=l.urlPrefix||"",f=l.download,E=a,R=document.createElement("a");if(l.labelField&&(E=g.getData()[l.labelField]),l.label)switch(typeof l.label){case"string":E=l.label;break;case"function":E=l.label(g)}if(E){if(l.urlField&&(a=g.getData()[l.urlField]),l.url)switch(typeof l.url){case"string":a=l.url;break;case"function":a=l.url(g)}return R.setAttribute("href",c+a),l.target&&R.setAttribute("target",l.target),l.download&&(f="function"==typeof f?f(g):!0===f?"":f,R.setAttribute("download",f)),R.innerHTML=this.emptyToSpace(this.sanitizeHTML(E)),R}return"&nbsp;"},image:function(g,l,o){var a=document.createElement("img"),c=g.getValue();switch(l.urlPrefix&&(c=l.urlPrefix+g.getValue()),l.urlSuffix&&(c+=l.urlSuffix),a.setAttribute("src",c),typeof l.height){case"number":a.style.height=l.height+"px";break;case"string":a.style.height=l.height}switch(typeof l.width){case"number":a.style.width=l.width+"px";break;case"string":a.style.width=l.width}return a.addEventListener("load",function(){g.getRow().normalizeHeight()}),a},tickCross:function(g,l,o){var a=g.getValue(),c=g.getElement(),f=l.allowEmpty,R=void 0!==l.tickElement?l.tickElement:'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>',O=void 0!==l.crossElement?l.crossElement:'<svg enable-background="new 0 0 24 24" height="14" width="14"  viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>';return l.allowTruthy&&a||!0===a||"true"===a||"True"===a||1===a||"1"===a?(c.setAttribute("aria-checked",!0),R||""):!f||"null"!==a&&""!==a&&null!=a?(c.setAttribute("aria-checked",!1),O||""):(c.setAttribute("aria-checked","mixed"),"")},datetime:function(g,l,o){var a=window.DateTime||luxon.DateTime,c=l.inputFormat||"yyyy-MM-dd HH:mm:ss",f=l.outputFormat||"dd/MM/yyyy HH:mm:ss",E=void 0!==l.invalidPlaceholder?l.invalidPlaceholder:"",R=g.getValue();if(void 0!==a){var O=(window.DateTime||luxon.DateTime).fromFormat(R,c);return O.isValid?(l.timezone&&(O=O.shiftTimezone(l.timezone)),O.toFormat(f)):!0===E?R:"function"==typeof E?E(R):E}console.error("Format Error - 'datetime' formatter is dependant on luxon.js")},datetimediff:function(g,l,o){var a=window.DateTime||luxon.DateTime,c=l.inputFormat||"yyyy-MM-dd HH:mm:ss",f=void 0!==l.invalidPlaceholder?l.invalidPlaceholder:"",E=void 0!==l.suffix&&l.suffix,R=void 0!==l.unit?l.unit:"days",O=void 0!==l.humanize&&l.humanize,F=void 0!==l.date?l.date:a.now(),J=g.getValue();if(void 0!==a){var dt=a.fromFormat(J,c);if(!dt.isValid)return!0===f?J:"function"==typeof f?f(J):f;if(!O)return parseInt(dt.diff(F,R)[R])+(E?" "+E:"")}else console.error("Format Error - 'datetimediff' formatter is dependant on luxon.js")},lookup:function(g,l,o){var a=g.getValue();return void 0===l[a]?(console.warn("Missing display value for "+a),a):l[a]},star:function(g,l,o){var a=g.getValue(),c=g.getElement(),f=l&&l.stars?l.stars:5,E=document.createElement("span"),R=document.createElementNS("http://www.w3.org/2000/svg","svg");E.style.verticalAlign="middle",R.setAttribute("width","14"),R.setAttribute("height","14"),R.setAttribute("viewBox","0 0 512 512"),R.setAttribute("xml:space","preserve"),R.style.padding="0 1px",a=a&&!isNaN(a)?parseInt(a):0,a=Math.max(0,Math.min(a,f));for(var J=1;J<=f;J++){var dt=R.cloneNode(!0);dt.innerHTML=J<=a?'<polygon fill="#FFEA00" stroke="#C1AB60" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>':'<polygon fill="#D2D2D2" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>',E.appendChild(dt)}return c.style.whiteSpace="nowrap",c.style.overflow="hidden",c.style.textOverflow="ellipsis",c.setAttribute("aria-label",a),E},traffic:function(g,l,o){var J,a=this.sanitizeHTML(g.getValue())||0,c=document.createElement("span"),f=l&&l.max?l.max:100,E=l&&l.min?l.min:0,R=l&&void 0!==l.color?l.color:["red","orange","green"],O="#666666";if(!isNaN(a)&&void 0!==g.getValue()){switch(c.classList.add("tabulator-traffic-light"),J=parseFloat(a)<=f?parseFloat(a):f,J=parseFloat(J)>=E?parseFloat(J):E,J=Math.round((J-E)/((f-E)/100)),typeof R){case"string":O=R;break;case"function":O=R(a);break;case"object":if(Array.isArray(R)){var Ft=Math.floor(J/(100/R.length));Ft=Math.min(Ft,R.length-1),O=R[Ft=Math.max(Ft,0)];break}}return c.style.backgroundColor=O,c}},progress:function(g,l,o){var F,J,dt,Ft,a=this.sanitizeHTML(g.getValue())||0,c=g.getElement(),f=l&&l.max?l.max:100,E=l&&l.min?l.min:0,R=l&&l.legendAlign?l.legendAlign:"center";switch(F=parseFloat(a)<=f?parseFloat(a):f,F=parseFloat(F)>=E?parseFloat(F):E,F=Math.round((F-E)/((f-E)/100)),typeof l.color){case"string":J=l.color;break;case"function":J=l.color(a);break;case"object":if(Array.isArray(l.color)){var qt=100/l.color.length,Ee=Math.floor(F/qt);Ee=Math.min(Ee,l.color.length-1),Ee=Math.max(Ee,0),J=l.color[Ee];break}default:J="#2DC214"}switch(typeof l.legend){case"string":dt=l.legend;break;case"function":dt=l.legend(a);break;case"boolean":dt=a;break;default:dt=!1}switch(typeof l.legendColor){case"string":Ft=l.legendColor;break;case"function":Ft=l.legendColor(a);break;case"object":Array.isArray(l.legendColor)&&(qt=100/l.legendColor.length,Ee=Math.floor(F/qt),Ee=Math.min(Ee,l.legendColor.length-1),Ee=Math.max(Ee,0),Ft=l.legendColor[Ee]);break;default:Ft="#000"}c.style.minWidth="30px",c.style.position="relative",c.setAttribute("aria-label",F);var Ae=document.createElement("div");Ae.style.display="inline-block",Ae.style.position="absolute",Ae.style.width=F+"%",Ae.style.backgroundColor=J,Ae.style.height="100%",Ae.setAttribute("data-max",f),Ae.setAttribute("data-min",E);var We=document.createElement("div");if(We.style.position="relative",We.style.width="100%",We.style.height="100%",dt){var ze=document.createElement("div");ze.style.position="absolute",ze.style.top=0,ze.style.left=0,ze.style.textAlign=R,ze.style.width="100%",ze.style.color=Ft,ze.innerHTML=dt}return o(function(){if(!(g instanceof Fi)){var Si=document.createElement("div");Si.style.position="absolute",Si.style.top="4px",Si.style.bottom="4px",Si.style.left="4px",Si.style.right="4px",c.appendChild(Si),c=Si}c.appendChild(We),We.appendChild(Ae),dt&&We.appendChild(ze)}),""},color:function(g,l,o){return g.getElement().style.backgroundColor=this.sanitizeHTML(g.getValue()),""},buttonTick:function(g,l,o){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>'},buttonCross:function(g,l,o){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>'},rownum:function(g,l,o){return this.table.rowManager.activeRows.indexOf(g.getRow()._getSelf())+1},handle:function(g,l,o){return g.getElement().classList.add("tabulator-row-handle"),"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>"},responsiveCollapse:function(g,l,o){var a=document.createElement("div"),c=g.getRow()._row.modules.responsiveLayout;function f(E){var R=c.element;c.open=E,R&&(c.open?(a.classList.add("open"),R.style.display=""):(a.classList.remove("open"),R.style.display="none"))}return a.classList.add("tabulator-responsive-collapse-toggle"),a.innerHTML="<span class='tabulator-responsive-collapse-toggle-open'>+</span><span class='tabulator-responsive-collapse-toggle-close'>-</span>",g.getElement().classList.add("tabulator-row-handle"),a.addEventListener("click",function(E){E.stopImmediatePropagation(),f(!c.open)}),f(c.open),a},rowSelection:function(g,l,o){var a=document.createElement("input");if(a.type="checkbox",this.table.modExists("selectRow",!0))if(a.addEventListener("click",f=>{f.stopPropagation()}),"function"==typeof g.getRow){var c=g.getRow();c instanceof $r?(a.addEventListener("change",f=>{c.toggleSelect()}),a.checked=c.isSelected&&c.isSelected(),this.table.modules.selectRow.registerRowSelectCheckbox(c,a)):a=""}else a.addEventListener("change",f=>{this.table.modules.selectRow.selectedRows.length?this.table.deselectRow():this.table.selectRow(l.rowRange)}),this.table.modules.selectRow.registerHeaderSelectCheckbox(a);return a}};let kp=(()=>{class g extends Eo{constructor(o){super(o),this.registerColumnOption("formatter"),this.registerColumnOption("formatterParams"),this.registerColumnOption("formatterPrint"),this.registerColumnOption("formatterPrintParams"),this.registerColumnOption("formatterClipboard"),this.registerColumnOption("formatterClipboardParams"),this.registerColumnOption("formatterHtmlOutput"),this.registerColumnOption("formatterHtmlOutputParams"),this.registerColumnOption("titleFormatter"),this.registerColumnOption("titleFormatterParams")}initialize(){this.subscribe("cell-format",this.formatValue.bind(this)),this.subscribe("cell-rendered",this.cellRendered.bind(this)),this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("column-format",this.formatHeader.bind(this))}initializeColumn(o){o.modules.format=this.lookupFormatter(o,""),void 0!==o.definition.formatterPrint&&(o.modules.format.print=this.lookupFormatter(o,"Print")),void 0!==o.definition.formatterClipboard&&(o.modules.format.clipboard=this.lookupFormatter(o,"Clipboard")),void 0!==o.definition.formatterHtmlOutput&&(o.modules.format.htmlOutput=this.lookupFormatter(o,"HtmlOutput"))}lookupFormatter(o,a){var c={params:o.definition["formatter"+a+"Params"]||{}},f=o.definition["formatter"+a];switch(typeof f){case"string":g.formatters[f]?c.formatter=g.formatters[f]:(console.warn("Formatter Error - No such formatter found: ",f),c.formatter=g.formatters.plaintext);break;case"function":c.formatter=f;break;default:c.formatter=g.formatters.plaintext}return c}cellRendered(o){o.modules.format&&o.modules.format.renderedCallback&&!o.modules.format.rendered&&(o.modules.format.renderedCallback(),o.modules.format.rendered=!0)}formatHeader(o,a,c){var f,E,R,O;return o.definition.titleFormatter?(f=this.getFormatter(o.definition.titleFormatter),R=F=>{o.titleFormatterRendered=F},O={getValue:function(){return a},getElement:function(){return c}},E="function"==typeof(E=o.definition.titleFormatterParams||{})?E():E,f.call(this,O,E,R)):a}formatValue(o){var a=o.getComponent(),c="function"==typeof o.column.modules.format.params?o.column.modules.format.params(a):o.column.modules.format.params;return o.column.modules.format.formatter.call(this,a,c,function(E){o.modules.format||(o.modules.format={}),o.modules.format.renderedCallback=E,o.modules.format.rendered=!1})}formatExportValue(o,a){var f,c=o.column.modules.format[a];if(c){let E=function(R){o.modules.format||(o.modules.format={}),o.modules.format.renderedCallback=R,o.modules.format.rendered=!1};return f="function"==typeof c.params?c.params(component):c.params,c.formatter.call(this,o.getComponent(),f,E)}return this.formatValue(o)}sanitizeHTML(o){if(o){var a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(o).replace(/[&<>"'`=\/]/g,function(c){return a[c]})}return o}emptyToSpace(o){return null==o||""===o?"&nbsp;":o}getFormatter(o){switch(typeof o){case"string":g.formatters[o]?o=g.formatters[o]:(console.warn("Formatter Error - No such formatter found: ",o),o=g.formatters.plaintext);break;case"function":o=o;break;default:o=g.formatters.plaintext}return o}}return g.moduleName="format",g.formatters=xp,g})(),Lp=(()=>{class g extends Eo{constructor(o){super(o),this.leftColumns=[],this.rightColumns=[],this.leftMargin=0,this.rightMargin=0,this.rightPadding=0,this.initializationMode="left",this.active=!1,this.scrollEndTimer=!1,this.registerColumnOption("frozen")}reset(){this.initializationMode="left",this.leftColumns=[],this.rightColumns=[],this.leftMargin=0,this.rightMargin=0,this.rightMargin=0,this.active=!1,this.table.columnManager.headersElement.style.marginLeft=0,this.table.columnManager.element.style.paddingRight=0}initialize(){this.subscribe("cell-layout",this.layoutCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-width",this.layout.bind(this)),this.subscribe("row-layout-before",this.layoutRow.bind(this)),this.subscribe("table-layout",this.layout.bind(this)),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this)),this.subscribe("columns-loading",this.reset.bind(this)),this.subscribe("table-redraw",this.layout.bind(this))}layoutCell(o){this.layoutElement(o.element,o.column)}initializeColumn(o){var a={margin:0,edge:!1};o.isGroup||(this.frozenCheck(o)?(a.position=this.initializationMode,"left"==this.initializationMode?this.leftColumns.push(o):this.rightColumns.unshift(o),this.active=!0,o.modules.frozen=a):this.initializationMode="right")}frozenCheck(o){return o.parent.isGroup&&o.definition.frozen&&console.warn("Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups"),o.parent.isGroup?this.frozenCheck(o.parent):o.definition.frozen}scrollHorizontal(){var o;this.active&&(clearTimeout(this.scrollEndTimer),this.scrollEndTimer=setTimeout(()=>{this.layout()},100),o=this.table.rowManager.getVisibleRows(),this.calcMargins(),this.layoutColumnPosition(),this.layoutCalcRows(),o.forEach(a=>{"row"===a.type&&this.layoutRow(a)}),this.table.rowManager.tableElement.style.marginRight=this.rightMargin)}calcMargins(){this.leftMargin=this._calcSpace(this.leftColumns,this.leftColumns.length)+"px",this.table.columnManager.headersElement.style.marginLeft=this.leftMargin,this.rightMargin=this._calcSpace(this.rightColumns,this.rightColumns.length)+"px",this.table.columnManager.element.style.paddingRight=this.rightMargin,this.rightPadding=this.table.rowManager.element.clientWidth+this.table.columnManager.scrollLeft}layoutCalcRows(){this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&this.table.modules.columnCalcs.topRow&&this.layoutRow(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&this.table.modules.columnCalcs.botRow&&this.layoutRow(this.table.modules.columnCalcs.botRow),this.table.modExists("groupRows")&&this.layoutGroupCalcs(this.table.modules.groupRows.getGroups()))}layoutGroupCalcs(o){o.forEach(a=>{a.calcs.top&&this.layoutRow(a.calcs.top),a.calcs.bottom&&this.layoutRow(a.calcs.bottom),a.groupList&&a.groupList.length&&this.layoutGroupCalcs(a.groupList&&a.groupList)})}layoutColumnPosition(o){var a=[];this.leftColumns.forEach((c,f)=>{if(c.modules.frozen.margin=this._calcSpace(this.leftColumns,f)+this.table.columnManager.scrollLeft+"px",c.modules.frozen.edge=f==this.leftColumns.length-1,c.parent.isGroup){var E=this.getColGroupParentElement(c);a.includes(E)||(this.layoutElement(E,c),a.push(E)),c.modules.frozen.edge&&E.classList.add("tabulator-frozen-"+c.modules.frozen.position)}else this.layoutElement(c.getElement(),c);o&&c.cells.forEach(R=>{this.layoutElement(R.getElement(!0),c)})}),this.rightColumns.forEach((c,f)=>{c.modules.frozen.margin=this.rightPadding-this._calcSpace(this.rightColumns,f+1)+"px",c.modules.frozen.edge=f==this.rightColumns.length-1,this.layoutElement(c.parent.isGroup?this.getColGroupParentElement(c):c.getElement(),c),o&&c.cells.forEach(E=>{this.layoutElement(E.getElement(!0),c)})})}getColGroupParentElement(o){return o.parent.isGroup?this.getColGroupParentElement(o.parent):o.getElement()}layout(){this.active&&(this.calcMargins(),this.table.rowManager.getDisplayRows().forEach(o=>{"row"===o.type&&this.layoutRow(o)}),this.layoutCalcRows(),this.layoutColumnPosition(!0),this.table.rowManager.tableElement.style.marginRight=this.rightMargin)}layoutRow(o){o.getElement().style.paddingLeft=this.leftMargin,this.leftColumns.forEach(c=>{var f=o.getCell(c);f&&this.layoutElement(f.getElement(!0),c)}),this.rightColumns.forEach(c=>{var f=o.getCell(c);f&&this.layoutElement(f.getElement(!0),c)})}layoutElement(o,a){a.modules.frozen&&(o.style.position="absolute",o.style.left=a.modules.frozen.margin,o.classList.add("tabulator-frozen"),a.modules.frozen.edge&&o.classList.add("tabulator-frozen-"+a.modules.frozen.position))}_calcSpace(o,a){var c=0;for(let f=0;f<a;f++)o[f].visible&&(c+=o[f].getWidth());return c}}return g.moduleName="frozenColumns",g})(),Gf=(()=>{class g extends Eo{constructor(o){super(o),this.topElement=document.createElement("div"),this.rows=[],this.registerComponentFunction("row","freeze",this.freezeRow.bind(this)),this.registerComponentFunction("row","unfreeze",this.unfreezeRow.bind(this)),this.registerComponentFunction("row","isFrozen",this.isRowFrozen.bind(this))}initialize(){this.rows=[],this.topElement.classList.add("tabulator-frozen-rows-holder"),this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling),this.subscribe("row-deleting",this.detachRow.bind(this)),this.registerDisplayHandler(this.getRows.bind(this),10)}isRowFrozen(o){return this.rows.indexOf(o)>-1}isFrozen(){return!!this.rows.length}getRows(o){var a=o.slice(0);return this.rows.forEach(function(c){var f=a.indexOf(c);f>-1&&a.splice(f,1)}),a}freezeRow(o){o.modules.frozen?console.warn("Freeze Error - Row is already frozen"):(o.modules.frozen=!0,this.topElement.appendChild(o.getElement()),o.initialize(),o.normalizeHeight(),this.table.rowManager.adjustTableSize(),this.rows.push(o),this.refreshData(!1,"display"),this.styleRows())}unfreezeRow(o){this.rows.indexOf(o),o.modules.frozen?(o.modules.frozen=!1,this.detachRow(o),this.table.rowManager.adjustTableSize(),this.refreshData(!1,"display"),this.rows.length&&this.styleRows()):console.warn("Freeze Error - Row is already unfrozen")}detachRow(o){var a=this.rows.indexOf(o);if(a>-1){var c=o.getElement();c.parentNode&&c.parentNode.removeChild(c),this.rows.splice(a,1)}}styleRows(o){this.rows.forEach((a,c)=>{this.table.rowManager.styleRow(a,c)})}}return g.moduleName="frozenRows",g})();class Wf{constructor(l){return this._group=l,this.type="GroupComponent",new Proxy(this,{get:function(o,a,c){return void 0!==o[a]?o[a]:o._group.table.componentFunctionBinder.handle("row",o._group,a)}})}getKey(){return this._group.key}getField(){return this._group.field}getElement(){return this._group.element}getRows(){return this._group.getRows(!0)}getSubGroups(){return this._group.getSubGroups(!0)}getParentGroup(){return!!this._group.parent&&this._group.parent.getComponent()}isVisible(){return this._group.visible}show(){this._group.show()}hide(){this._group.hide()}toggle(){this._group.toggleVisibility()}_getSelf(){return this._group}getTable(){return this._group.groupManager.table}}class kh{constructor(l,o,a,c,f,E,R){this.groupManager=l,this.parent=o,this.key=c,this.level=a,this.field=f,this.hasSubGroups=a<l.groupIDLookups.length-1,this.addRow=this.hasSubGroups?this._addRowToGroup:this._addRow,this.type="group",this.old=R,this.rows=[],this.groups=[],this.groupList=[],this.generator=E,this.elementContents=!1,this.height=0,this.outerHeight=0,this.initialized=!1,this.calcs={},this.initialized=!1,this.modules={},this.arrowElement=!1,this.visible=R?R.visible:void 0!==l.startOpen[a]?l.startOpen[a]:l.startOpen[0],this.component=null,this.createElements(),this.addBindings(),this.createValueGroups()}wipe(){this.groupList.length?this.groupList.forEach(function(l){l.wipe()}):(this.element=!1,this.arrowElement=!1,this.elementContents=!1)}createElements(){var l=document.createElement("div");l.classList.add("tabulator-arrow"),this.element=document.createElement("div"),this.element.classList.add("tabulator-row"),this.element.classList.add("tabulator-group"),this.element.classList.add("tabulator-group-level-"+this.level),this.element.setAttribute("role","rowgroup"),this.arrowElement=document.createElement("div"),this.arrowElement.classList.add("tabulator-group-toggle"),this.arrowElement.appendChild(l),!1!==this.groupManager.table.options.movableRows&&this.groupManager.table.modExists("moveRow")&&this.groupManager.table.modules.moveRow.initializeGroupHeader(this)}createValueGroups(){var l=this.level+1;this.groupManager.allowedValues&&this.groupManager.allowedValues[l]&&this.groupManager.allowedValues[l].forEach(o=>{this._createGroup(o,l)})}addBindings(){var l,o,a;(this.groupManager.table.options.groupContextMenu||this.groupManager.table.options.groupClickMenu)&&this.groupManager.table.modExists("menu")&&this.groupManager.table.modules.menu.initializeGroup.call(this.groupManager.table.modules.menu,this),this.groupManager.table.options.groupTap&&(a=!1,this.element.addEventListener("touchstart",f=>{a=!0},{passive:!0}),this.element.addEventListener("touchend",f=>{a&&this.groupManager.table.options.groupTap(f,this.getComponent()),a=!1})),this.groupManager.table.options.groupDblTap&&(l=null,this.element.addEventListener("touchend",f=>{l?(clearTimeout(l),l=null,this.groupManager.table.options.groupDblTap(f,this.getComponent())):l=setTimeout(()=>{clearTimeout(l),l=null},300)})),this.groupManager.table.options.groupTapHold&&(o=null,this.element.addEventListener("touchstart",f=>{clearTimeout(o),o=setTimeout(()=>{clearTimeout(o),o=null,a=!1,this.groupManager.table.options.groupTapHold(f,this.getComponent())},1e3)},{passive:!0}),this.element.addEventListener("touchend",f=>{clearTimeout(o),o=null})),this.groupManager.table.options.groupToggleElement&&("arrow"==this.groupManager.table.options.groupToggleElement?this.arrowElement:this.element).addEventListener("click",f=>{f.stopPropagation(),f.stopImmediatePropagation(),this.toggleVisibility()})}_createGroup(l,o){var a=o+"_"+l,c=new kh(this.groupManager,this,o,l,this.groupManager.groupIDLookups[o].field,this.groupManager.headerGenerator[o]||this.groupManager.headerGenerator[0],!!this.old&&this.old.groups[a]);this.groups[a]=c,this.groupList.push(c)}_addRowToGroup(l){var o=this.level+1;if(this.hasSubGroups){var a=this.groupManager.groupIDLookups[o].func(l.getData()),c=o+"_"+a;this.groupManager.allowedValues&&this.groupManager.allowedValues[o]?this.groups[c]&&this.groups[c].addRow(l):(this.groups[c]||this._createGroup(a,o),this.groups[c].addRow(l))}}_addRow(l){this.rows.push(l),l.modules.group=this}insertRow(l,o,a){var c=this.conformRowData({});l.updateData(c);var f=this.rows.indexOf(o);f>-1?this.rows.splice(a?f+1:f,0,l):a?this.rows.push(l):this.rows.unshift(l),l.modules.group=this,this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modules.columnCalcs.recalcGroup(this),this.groupManager.updateGroupRows(!0)}scrollHeader(l){this.arrowElement.style.marginLeft=l,this.groupList.forEach(function(o){o.scrollHeader(l)})}getRowIndex(l){}conformRowData(l){return this.field?l[this.field]=this.key:console.warn("Data Conforming Error - Cannot conform row data to match new group as groupBy is a function"),this.parent&&(l=this.parent.conformRowData(l)),l}removeRow(l){var o=this.rows.indexOf(l),a=l.getElement();o>-1&&this.rows.splice(o,1),this.groupManager.table.options.groupValues||this.rows.length?(a.parentNode&&a.parentNode.removeChild(a),this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modules.columnCalcs.recalcGroup(this)):(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this),this.groupManager.updateGroupRows(!0))}removeGroup(l){var a,o=l.level+"_"+l.key;this.groups[o]&&(delete this.groups[o],(a=this.groupList.indexOf(l))>-1&&this.groupList.splice(a,1),this.groupList.length||(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this)))}getHeadersAndRows(l){var o=[];return o.push(this),this._visSet(),this.visible?this.groupList.length?this.groupList.forEach(function(a){o=o.concat(a.getHeadersAndRows(l))}):(!l&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top&&(this.calcs.top.detachElement(),this.calcs.top.deleteCells()),this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),o.push(this.calcs.top)),o=o.concat(this.rows),!l&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom&&(this.calcs.bottom.detachElement(),this.calcs.bottom.deleteCells()),this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),o.push(this.calcs.bottom))):!this.groupList.length&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&(!l&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top&&(this.calcs.top.detachElement(),this.calcs.top.deleteCells()),this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),o.push(this.calcs.top))),!l&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom&&(this.calcs.bottom.detachElement(),this.calcs.bottom.deleteCells()),this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),o.push(this.calcs.bottom)))),o}getData(l,o){var a=[];return this._visSet(),(!l||l&&this.visible)&&this.rows.forEach(c=>{a.push(c.getData(o||"data"))}),a}getRowCount(){var l=0;return this.groupList.length?this.groupList.forEach(o=>{l+=o.getRowCount()}):l=this.rows.length,l}toggleVisibility(){this.visible?this.hide():this.show()}hide(){this.visible=!1,"classic"!=this.groupManager.table.rowManager.getRenderMode()||this.groupManager.table.options.pagination?this.groupManager.updateGroupRows(!0):(this.element.classList.remove("tabulator-group-visible"),this.groupList.length?this.groupList.forEach(l=>{l.getHeadersAndRows().forEach(a=>{a.detachElement()})}):this.rows.forEach(l=>{var o=l.getElement();o.parentNode.removeChild(o)}),this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex()),this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth()),this.groupManager.table.externalEvents.dispatch("groupVisibilityChanged",this.getComponent(),!1)}show(){if(this.visible=!0,"classic"!=this.groupManager.table.rowManager.getRenderMode()||this.groupManager.table.options.pagination)this.groupManager.updateGroupRows(!0);else{this.element.classList.add("tabulator-group-visible");var l=this.getElement();this.groupList.length?this.groupList.forEach(o=>{o.getHeadersAndRows().forEach(c=>{var f=c.getElement();l.parentNode.insertBefore(f,l.nextSibling),c.initialize(),l=f})}):this.rows.forEach(o=>{var a=o.getElement();l.parentNode.insertBefore(a,l.nextSibling),o.initialize(),l=a}),this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex()),this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth()}this.groupManager.table.externalEvents.dispatch("groupVisibilityChanged",this.getComponent(),!0)}_visSet(){var l=[];"function"==typeof this.visible&&(this.rows.forEach(function(o){l.push(o.getData())}),this.visible=this.visible(this.key,this.getRowCount(),l,this.getComponent()))}getRowGroup(l){var o=!1;return this.groupList.length?this.groupList.forEach(function(a){var c=a.getRowGroup(l);c&&(o=c)}):this.rows.find(function(a){return a===l})&&(o=this),o}getSubGroups(l){var o=[];return this.groupList.forEach(function(a){o.push(l?a.getComponent():a)}),o}getRows(l){var o=[];return this.rows.forEach(function(a){o.push(l?a.getComponent():a)}),o}generateGroupHeaderContents(){var l=[];for(this.rows.forEach(function(o){l.push(o.getData())}),this.elementContents=this.generator(this.key,this.getRowCount(),l,this.getComponent());this.element.firstChild;)this.element.removeChild(this.element.firstChild);"string"==typeof this.elementContents?this.element.innerHTML=this.elementContents:this.element.appendChild(this.elementContents),this.element.insertBefore(this.arrowElement,this.element.firstChild)}getPath(l=[]){return l.unshift(this.key),this.parent&&this.parent.getPath(l),l}getElement(){this.addBindingsd=!1,this._visSet(),this.visible?this.element.classList.add("tabulator-group-visible"):this.element.classList.remove("tabulator-group-visible");for(var l=0;l<this.element.childNodes.length;++l)this.element.childNodes[l].parentNode.removeChild(this.element.childNodes[l]);return this.generateGroupHeaderContents(),this.element}detachElement(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}normalizeHeight(){this.setHeight(this.element.clientHeight)}initialize(l){(!this.initialized||l)&&(this.normalizeHeight(),this.initialized=!0)}reinitialize(){this.initialized=!1,this.height=0,Es.elVisible(this.element)&&this.initialize(!0)}setHeight(l){this.height!=l&&(this.height=l,this.outerHeight=this.element.offsetHeight)}getHeight(){return this.outerHeight}getGroup(){return this}reinitializeHeight(){}calcHeight(){}setCellHeight(){}clearCellHeight(){}deinitializeHeight(){}getComponent(){return this.component||(this.component=new Wf(this)),this.component}}let Np=(()=>{class g extends Eo{constructor(o){super(o),this.groupIDLookups=!1,this.startOpen=[function(){return!1}],this.headerGenerator=[function(){return""}],this.groupList=[],this.allowedValues=!1,this.groups={},this.displayIndex=0,this.displayHandler=this.getRows.bind(this),this.registerTableOption("groupBy",!1),this.registerTableOption("groupStartOpen",!0),this.registerTableOption("groupValues",!1),this.registerTableOption("groupUpdateOnCellEdit",!1),this.registerTableOption("groupHeader",!1),this.registerTableOption("groupHeaderPrint",null),this.registerTableOption("groupHeaderClipboard",null),this.registerTableOption("groupHeaderHtmlOutput",null),this.registerTableOption("groupHeaderDownload",null),this.registerTableOption("groupToggleElement","arrow"),this.registerTableOption("groupClosedShowCalcs",!1),this.registerTableFunction("setGroupBy",this.setGroupBy.bind(this)),this.registerTableFunction("setGroupValues",this.setGroupValues.bind(this)),this.registerTableFunction("setGroupStartOpen",this.setGroupStartOpen.bind(this)),this.registerTableFunction("setGroupHeader",this.setGroupHeader.bind(this)),this.registerTableFunction("getGroups",this.userGetGroups.bind(this)),this.registerTableFunction("getGroupedData",this.userGetGroupedData.bind(this)),this.registerComponentFunction("row","getGroup",this.rowGetGroup.bind(this))}initialize(){this.table.options.groupBy&&(this.configureGroupSetup(),this.table.options.groupUpdateOnCellEdit&&(this.subscribe("cell-value-updated",this.cellUpdated.bind(this)),this.subscribe("row-data-changed",this.reassignRowToGroup.bind(this),0)),this.subscribe("row-deleting",this.rowDeleting.bind(this)),this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("scroll-horizontal",this.scrollHeaders.bind(this)),this.subscribe("rows-wipe",this.wipe.bind(this)),this.subscribe("rows-added",this.rowsUpdated.bind(this)),this.subscribe("row-moving",this.rowMoving.bind(this)),this.subscribe("row-adding-index",this.rowAddingIndex.bind(this)),this.subscribe("rows-sample",this.rowSample.bind(this)),this.subscribe("render-virtual-fill",this.virtualRenderFill.bind(this)),this.registerDisplayHandler(this.displayHandler,20),this.initialized=!0)}configureGroupSetup(){if(this.table.options.groupBy){var o=this.table.options.groupBy,a=this.table.options.groupStartOpen,c=this.table.options.groupHeader;this.allowedValues=this.table.options.groupValues,Array.isArray(o)&&Array.isArray(c)&&o.length>c.length&&console.warn("Error creating group headers, groupHeader array is shorter than groupBy array"),this.headerGenerator=[function(){return""}],this.startOpen=[function(){return!1}],this.langBind("groups|item",(E,R)=>{this.headerGenerator[0]=(O,F,J)=>(void 0===O?"":O)+"<span>("+F+" "+(1===F?E:R.groups.items)+")</span>"}),this.groupIDLookups=[],Array.isArray(o)||o?this.table.modExists("columnCalcs")&&"table"!=this.table.options.columnCalcs&&"both"!=this.table.options.columnCalcs&&this.table.modules.columnCalcs.removeCalcs():this.table.modExists("columnCalcs")&&"group"!=this.table.options.columnCalcs&&this.table.columnManager.getRealColumns().forEach(E=>{E.definition.topCalc&&this.table.modules.columnCalcs.initializeTopRow(),E.definition.bottomCalc&&this.table.modules.columnCalcs.initializeBottomRow()}),Array.isArray(o)||(o=[o]),o.forEach((E,R)=>{var O,F;O="function"==typeof E?E:(F=this.table.columnManager.getColumnByField(E))?function(J){return F.getFieldValue(J)}:function(J){return J[E]},this.groupIDLookups.push({field:"function"!=typeof E&&E,func:O,values:!!this.allowedValues&&this.allowedValues[R]})}),a&&(Array.isArray(a)||(a=[a]),a.forEach(E=>{}),this.startOpen=a),c&&(this.headerGenerator=Array.isArray(c)?c:[c])}}rowSample(o,a){var c=this.getGroups(!1)[0];return a.push(c.getRows(!1)[0]),a}virtualRenderFill(){var o=this.table.rowManager.tableElement,a=this.table.rowManager.getVisibleRows();a=a.filter(c=>"group"!==c.type),o.style.minWidth=a.length?"":this.table.columnManager.getWidth()+"px"}rowAddingIndex(o,a,c){this.assignRowToGroup(o);var f=o.modules.group.rows;return f.length>1&&(!a||a&&-1==f.indexOf(a)?c?f[0]!==o&&this.table.rowManager.moveRowInArray(o.modules.group.rows,o,a=f[0],!c):f[f.length-1]!==o&&this.table.rowManager.moveRowInArray(o.modules.group.rows,o,a=f[f.length-1],!c):this.table.rowManager.moveRowInArray(o.modules.group.rows,o,a,!c)),a}trackChanges(){this.dispatch("group-changed")}setGroupBy(o){this.table.options.groupBy=o,this.configureGroupSetup(),this.refreshData(),this.trackChanges()}setGroupValues(o){this.table.options.groupValues=o,this.configureGroupSetup(),this.refreshData(),this.trackChanges()}setGroupStartOpen(o){this.table.options.groupStartOpen=o,this.configureGroupSetup(),this.table.options.groupBy?(this.refreshData(),this.trackChanges()):console.warn("Grouping Update - cant refresh view, no groups have been set")}setGroupHeader(o){this.table.options.groupHeader=o,this.configureGroupSetup(),this.table.options.groupBy?(this.refreshData(),this.trackChanges()):console.warn("Grouping Update - cant refresh view, no groups have been set")}userGetGroups(o){return this.getGroups(!0)}userGetGroupedData(){return this.table.options.groupBy?this.getGroupedData():this.getData()}rowGetGroup(o){return!!o.modules.group&&o.modules.group.getComponent()}rowMoving(o,a,c){!c&&a instanceof kh&&(a=this.table.rowManager.prevDisplayRow(o)||a);var f=a instanceof kh?a:a.modules.group,E=o instanceof kh?o:o.modules.group;f===E?this.table.rowManager.moveRowInArray(f.rows,o,a,c):(E&&E.removeRow(o),f.insertRow(o,a,c))}rowDeleting(o){o.modules.group&&o.modules.group.removeRow(o)}rowsUpdated(o){this.updateGroupRows(!0)}cellUpdated(o){this.reassignRowToGroup(o.row)}setDisplayIndex(o){this.displayIndex=o}getDisplayIndex(){return this.displayIndex}getRows(o){return this.table.options.groupBy&&this.groupIDLookups.length?(this.dispatchExternal("dataGrouping"),this.generateGroups(o),this.subscribedExternal("dataGrouped")&&this.dispatchExternal("dataGrouped",this.getGroups(!0)),this.updateGroupRows()):o.slice(0)}getGroups(o){var a=[];return this.groupList.forEach(function(c){a.push(o?c.getComponent():c)}),a}getChildGroups(o){var a=[];return o||(o=this),o.groupList.forEach(c=>{c.groupList.length?a=a.concat(this.getChildGroups(c)):a.push(c)}),a}wipe(){this.groupList.forEach(function(o){o.wipe()})}pullGroupListData(o){var a=[];return o.forEach(c=>{var f={level:0,rowCount:0,headerContent:""},E=[];c.hasSubGroups?(E=this.pullGroupListData(c.groupList),f.level=c.level,f.rowCount=E.length-c.groupList.length,f.headerContent=c.generator(c.key,f.rowCount,c.rows,c),a.push(f),a=a.concat(E)):(f.level=c.level,f.headerContent=c.generator(c.key,c.rows.length,c.rows,c),f.rowCount=c.getRows().length,a.push(f),c.getRows().forEach(R=>{a.push(R.getData("data"))}))}),a}getGroupedData(){return this.pullGroupListData(this.groupList)}getRowGroup(o){var a=!1;return this.groupList.forEach(c=>{var f=c.getRowGroup(o);f&&(a=f)}),a}countGroups(){return this.groupList.length}generateGroups(o){var a=this.groups;this.groups={},this.groupList=[],this.allowedValues&&this.allowedValues[0]?(this.allowedValues[0].forEach(c=>{this.createGroup(c,0,a)}),o.forEach(c=>{this.assignRowToExistingGroup(c,a)})):o.forEach(c=>{this.assignRowToGroup(c,a)})}createGroup(o,a,c){var E,f=a+"_"+o;E=new kh(this,!1,a,o,this.groupIDLookups[0].field,this.headerGenerator[0],(c=c||[])[f]),this.groups[f]=E,this.groupList.push(E)}assignRowToExistingGroup(o,a){var f="0_"+this.groupIDLookups[0].func(o.getData());this.groups[f]&&this.groups[f].addRow(o)}assignRowToGroup(o,a){var c=this.groupIDLookups[0].func(o.getData()),f=!this.groups["0_"+c];return f&&this.createGroup(c,0,a),this.groups["0_"+c].addRow(o),!f}reassignRowToGroup(o){if("row"===o.type){var a=o.modules.group,c=a.getPath(),f=this.getExpectedPath(o);c.length==f.length&&c.every((R,O)=>R===f[O])||(a.removeRow(o),this.assignRowToGroup(o,this.groups),this.refreshData(!0))}}getExpectedPath(o){var a=[],c=o.getData();return this.groupIDLookups.forEach(f=>{a.push(f.func(c))}),a}updateGroupRows(o){var a=[];return this.groupList.forEach(c=>{a=a.concat(c.getHeadersAndRows())}),o&&this.refreshData(!0,this.displayHandler),a}scrollHeaders(o){"virtual"===this.table.options.renderHorizontal&&(o-=this.table.columnManager.renderer.vDomPadLeft),o+="px",this.groupList.forEach(a=>{a.scrollHeader(o)})}removeGroup(o){var c,a=o.level+"_"+o.key;this.groups[a]&&(delete this.groups[a],(c=this.groupList.indexOf(o))>-1&&this.groupList.splice(c,1))}}return g.moduleName="groupRows",g})();var zf={cellEdit:function(g){g.component.setValueProcessData(g.data.oldValue),g.component.cellRendered()},rowAdd:function(g){g.component.deleteActual()},rowDelete:function(g){var l=this.table.rowManager.addRowActual(g.data.data,g.data.pos,g.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(g.component,l)},rowMove:function(g){this.table.rowManager.moveRowActual(g.component,this.table.rowManager.rows[g.data.posFrom],!g.data.after),this.table.rowManager.redraw()}},$u={cellEdit:function(g){g.component.setValueProcessData(g.data.newValue),g.component.cellRendered()},rowAdd:function(g){var l=this.table.rowManager.addRowActual(g.data.data,g.data.pos,g.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(g.component,l)},rowDelete:function(g){g.component.deleteActual()},rowMove:function(g){this.table.rowManager.moveRowActual(g.component,this.table.rowManager.rows[g.data.posTo],g.data.after),this.table.rowManager.redraw()}};let Kd=(()=>{class g extends Eo{constructor(o){super(o),this.history=[],this.index=-1,this.registerTableOption("history",!1)}initialize(){this.table.options.history&&(this.subscribe("cell-value-updated",this.cellUpdated.bind(this)),this.subscribe("cell-delete",this.clearComponentHistory.bind(this)),this.subscribe("row-delete",this.rowDeleted.bind(this)),this.subscribe("rows-wipe",this.clear.bind(this)),this.subscribe("row-added",this.rowAdded.bind(this)),this.subscribe("row-move",this.rowMoved.bind(this))),this.registerTableFunction("undo",this.undo.bind(this)),this.registerTableFunction("redo",this.redo.bind(this)),this.registerTableFunction("getHistoryUndoSize",this.getHistoryUndoSize.bind(this)),this.registerTableFunction("getHistoryRedoSize",this.getHistoryRedoSize.bind(this)),this.registerTableFunction("clearHistory",this.clear.bind(this))}rowMoved(o,a,c){this.action("rowMove",o,{posFrom:this.table.rowManager.getRowPosition(o),posTo:this.table.rowManager.getRowPosition(a),to:a,after:c})}rowAdded(o,a,c,f){this.action("rowAdd",o,{data:a,pos:c,index:f})}rowDeleted(o){var a,c;this.table.options.groupBy?(a=(c=o.getComponent().getGroup().rows).indexOf(o))&&(a=c[a-1]):(a=o.table.rowManager.getRowIndex(o))&&(a=o.table.rowManager.rows[a-1]),this.action("rowDelete",o,{data:o.getData(),pos:!a,index:a})}cellUpdated(o){this.action("cellEdit",o,{oldValue:o.oldValue,newValue:o.value})}clear(){this.history=[],this.index=-1}action(o,a,c){this.history=this.history.slice(0,this.index+1),this.history.push({type:o,component:a,data:c}),this.index++}getHistoryUndoSize(){return this.index+1}getHistoryRedoSize(){return this.history.length-(this.index+1)}clearComponentHistory(o){var a=this.history.findIndex(function(c){return c.component===o});a>-1&&(this.history.splice(a,1),a<=this.index&&this.index--,this.clearComponentHistory(o))}undo(){if(this.index>-1){let o=this.history[this.index];return g.undoers[o.type].call(this,o),this.index--,this.dispatchExternal("historyUndo",o.type,o.component.getComponent(),o.data),!0}return console.warn("History Undo Error - No more history to undo"),!1}redo(){if(this.history.length-1>this.index){this.index++;let o=this.history[this.index];return g.redoers[o.type].call(this,o),this.dispatchExternal("historyRedo",o.type,o.component.getComponent(),o.data),!0}return console.warn("History Redo Error - No more history to redo"),!1}_rebindRow(o,a){this.history.forEach(function(c){if(c.component instanceof Xs)c.component===o&&(c.component=a);else if(c.component instanceof un&&c.component.row===o){var f=c.component.column.getField();f&&(c.component=a.getCell(f))}})}}return g.moduleName="history",g.undoers=zf,g.redoers=$u,g})(),jf=(()=>{class g extends Eo{constructor(o){super(o),this.fieldIndex=[],this.hasIndex=!1}initialize(){this.tableElementCheck()}tableElementCheck(){this.table.originalElement&&"TABLE"===this.table.originalElement.tagName&&this.parseTable()}parseTable(){var o=this.table.originalElement,a=this.table.options,f=o.getElementsByTagName("th"),E=o.getElementsByTagName("tbody")[0],R=[];this.hasIndex=!1,this.dispatchExternal("htmlImporting"),E=E?E.getElementsByTagName("tr"):[],this._extractOptions(o,a),f.length?this._extractHeaders(f,E):this._generateBlankHeaders(f,E);for(var O=0;O<E.length;O++){var J=E[O].getElementsByTagName("td"),dt={};this.hasIndex||(dt[a.index]=O);for(var Ft=0;Ft<J.length;Ft++)void 0!==this.fieldIndex[Ft]&&(dt[this.fieldIndex[Ft]]=J[Ft].innerHTML);R.push(dt)}a.data=R,this.dispatchExternal("htmlImported")}_extractOptions(o,a,c){var f=o.attributes,E=c?Object.assign([],c):Object.keys(a),R={};for(var O in E.forEach(dt=>{R[dt.toLowerCase()]=dt}),f){var J,F=f[O];F&&"object"==typeof F&&F.name&&0===F.name.indexOf("tabulator-")&&(J=F.name.replace("tabulator-",""),void 0!==R[J]&&(a[R[J]]=this._attribValue(F.value)))}}_attribValue(o){return"true"===o||"false"!==o&&o}_findCol(o){return this.table.options.columns.find(c=>c.title===o)||!1}_extractHeaders(o,a){for(var c=0;c<o.length;c++){var O,f=o[c],E=!1,R=this._findCol(f.textContent);R?E=!0:R={title:f.textContent.trim()},R.field||(R.field=f.textContent.trim().toLowerCase().replace(" ","_")),(O=f.getAttribute("width"))&&!R.width&&(R.width=O),this._extractOptions(f,R,Hr.prototype.defaultOptionList),this.fieldIndex[c]=R.field,R.field==this.table.options.index&&(this.hasIndex=!0),E||this.table.options.columns.push(R)}}_generateBlankHeaders(o,a){for(var c=0;c<o.length;c++){var f=o[c],E={title:"",field:"col"+c};this.fieldIndex[c]=E.field;var R=f.getAttribute("width");R&&(E.width=R),this.table.options.columns.push(E)}}}return g.moduleName="htmlTableImport",g})(),Yf=(()=>{class g extends Eo{constructor(o){super(o),this.eventMap={rowClick:"row-click",rowDblClick:"row-dblclick",rowContext:"row-contextmenu",rowMouseEnter:"row-mouseenter",rowMouseLeave:"row-mouseleave",rowMouseOver:"row-mouseover",rowMouseOut:"row-mouseout",rowMouseMove:"row-mousemove",rowTap:"row",rowDblTap:"row",rowTapHold:"row",cellClick:"cell-click",cellDblClick:"cell-dblclick",cellContext:"cell-contextmenu",cellMouseEnter:"cell-mouseenter",cellMouseLeave:"cell-mouseleave",cellMouseOver:"cell-mouseover",cellMouseOut:"cell-mouseout",cellMouseMove:"cell-mousemove",cellTap:"cell",cellDblTap:"cell",cellTapHold:"cell",headerClick:"column-click",headerDblClick:"column-dblclick",headerContext:"column-contextmenu",headerMouseEnter:"column-mouseenter",headerMouseLeave:"column-mouseleave",headerMouseOver:"column-mouseover",headerMouseOut:"column-mouseout",headerMouseMove:"column-mousemove",headerTap:"column",headerDblTap:"column",headerTapHold:"column",groupClick:"group-click",groupDblClick:"group-dblclick",groupContext:"group-contextmenu",groupMouseEnter:"group-mouseenter",groupMouseLeave:"group-mouseleave",groupMouseOver:"group-mouseover",groupMouseOut:"group-mouseout",groupMouseMove:"group-mousemove",groupTap:"group",groupDblTap:"group",groupTapHold:"group"},this.subscribers={},this.touchSubscribers={},this.columnSubscribers={},this.touchWatchers={row:{tap:null,tapDbl:null,tapHold:null},cell:{tap:null,tapDbl:null,tapHold:null},column:{tap:null,tapDbl:null,tapHold:null}},this.registerColumnOption("headerClick"),this.registerColumnOption("headerDblClick"),this.registerColumnOption("headerContext"),this.registerColumnOption("headerMouseEnter"),this.registerColumnOption("headerMouseLeave"),this.registerColumnOption("headerMouseOver"),this.registerColumnOption("headerMouseOut"),this.registerColumnOption("headerMouseMove"),this.registerColumnOption("headerTap"),this.registerColumnOption("headerDblTap"),this.registerColumnOption("headerTapHold"),this.registerColumnOption("cellClick"),this.registerColumnOption("cellDblClick"),this.registerColumnOption("cellContext"),this.registerColumnOption("cellMouseEnter"),this.registerColumnOption("cellMouseLeave"),this.registerColumnOption("cellMouseOver"),this.registerColumnOption("cellMouseOut"),this.registerColumnOption("cellMouseMove"),this.registerColumnOption("cellTap"),this.registerColumnOption("cellDblTap"),this.registerColumnOption("cellTapHold")}initialize(){this.initializeExternalEvents(),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("cell-dblclick",this.cellContentsSelectionFixer.bind(this))}cellContentsSelectionFixer(o,a){if(!this.table.modExists("edit")||this.table.modules.edit.currentCell!==this){o.preventDefault();try{if(document.selection)(c=document.body.createTextRange()).moveToElementText(this.element),c.select();else if(window.getSelection){var c;(c=document.createRange()).selectNode(this.element),window.getSelection().removeAllRanges(),window.getSelection().addRange(c)}}catch(f){}}}initializeExternalEvents(){for(let o in this.eventMap)this.subscriptionChangeExternal(o,this.subscriptionChanged.bind(this,o))}subscriptionChanged(o,a){a?this.subscribers[o]||(this.eventMap[o].includes("-")?(this.subscribers[o]=this.handle.bind(this,o),this.subscribe(this.eventMap[o],this.subscribers[o])):this.subscribeTouchEvents(o)):this.eventMap[o].includes("-")?this.subscribers[o]&&!this.columnSubscribers[o]&&!this.subscribedExternal(o)&&(this.unsubscribe(this.eventMap[o],this.subscribers[o]),delete this.subscribers[o]):this.unsubscribeTouchEvents(o)}subscribeTouchEvents(o){var a=this.eventMap[o];this.touchSubscribers[a+"-touchstart"]||(this.touchSubscribers[a+"-touchstart"]=this.handleTouch.bind(this,a,"start"),this.touchSubscribers[a+"-touchend"]=this.handleTouch.bind(this,a,"end"),this.subscribe(a+"-touchstart",this.touchSubscribers[a+"-touchstart"]),this.subscribe(a+"-touchend",this.touchSubscribers[a+"-touchend"])),this.subscribers[o]=!0}unsubscribeTouchEvents(o){var a=!0,c=this.eventMap[o];if(this.subscribers[o]&&!this.subscribedExternal(o)){delete this.subscribers[o];for(let f in this.eventMap)this.eventMap[f]===c&&this.subscribers[f]&&(a=!1);a&&(this.unsubscribe(c+"-touchstart",this.touchSubscribers[c+"-touchstart"]),this.unsubscribe(c+"-touchend",this.touchSubscribers[c+"-touchend"]),delete this.touchSubscribers[c+"-touchstart"],delete this.touchSubscribers[c+"-touchend"])}}initializeColumn(o){var a=o.definition;for(let c in this.eventMap)a[c]&&(this.subscriptionChanged(c,!0),this.columnSubscribers[c]||(this.columnSubscribers[c]=[]),this.columnSubscribers[c].push(o))}handle(o,a,c){this.dispatchEvent(o,a,c)}handleTouch(o,a,c,f){var E=this.touchWatchers[o];switch("column"===o&&(o="header"),a){case"start":E.tap=!0,clearTimeout(E.tapHold),E.tapHold=setTimeout(()=>{clearTimeout(E.tapHold),E.tapHold=null,E.tap=null,clearTimeout(E.tapDbl),E.tapDbl=null,this.dispatchEvent(o+"TapHold",c,f)},1e3);break;case"end":E.tap&&(E.tap=null,this.dispatchEvent(o+"Tap",c,f)),E.tapDbl?(clearTimeout(E.tapDbl),E.tapDbl=null,this.dispatchEvent(o+"DblTap",c,f)):E.tapDbl=setTimeout(()=>{clearTimeout(E.tapDbl),E.tapDbl=null},300),clearTimeout(E.tapHold),E.tapHold=null}}dispatchEvent(o,a,c){var E,f=c.getComponent();this.columnSubscribers[o]&&(c instanceof un?E=c.column.definition[o]:c instanceof Hr&&(E=c.definition[o]),E&&E(a,f)),this.dispatchExternal(o,a,f)}}return g.moduleName="interaction",g})();var Hm={navPrev:"shift + 9",navNext:9,navUp:38,navDown:40,scrollPageUp:33,scrollPageDown:34,scrollToStart:36,scrollToEnd:35,undo:"ctrl + 90",redo:"ctrl + 89",copyToClipboard:"ctrl + 67"},Pp={keyBlock:function(g){g.stopPropagation(),g.preventDefault()},scrollPageUp:function(g){var l=this.table.rowManager,o=l.scrollTop-l.element.clientHeight;g.preventDefault(),l.displayRowsCount&&(o>=0?l.element.scrollTop=o:l.scrollToRow(l.getDisplayRows()[0])),this.table.element.focus()},scrollPageDown:function(g){var l=this.table.rowManager,o=l.scrollTop+l.element.clientHeight,a=l.element.scrollHeight;g.preventDefault(),l.displayRowsCount&&(o<=a?l.element.scrollTop=o:l.scrollToRow(l.getDisplayRows()[l.displayRowsCount-1])),this.table.element.focus()},scrollToStart:function(g){var l=this.table.rowManager;g.preventDefault(),l.displayRowsCount&&l.scrollToRow(l.getDisplayRows()[0]),this.table.element.focus()},scrollToEnd:function(g){var l=this.table.rowManager;g.preventDefault(),l.displayRowsCount&&l.scrollToRow(l.getDisplayRows()[l.displayRowsCount-1]),this.table.element.focus()},navPrev:function(g){this.dispatch("keybinding-nav-prev",g)},navNext:function(g){this.dispatch("keybinding-nav-next",g)},navLeft:function(g){this.dispatch("keybinding-nav-left",g)},navRight:function(g){this.dispatch("keybinding-nav-right",g)},navUp:function(g){this.dispatch("keybinding-nav-up",g)},navDown:function(g){this.dispatch("keybinding-nav-down",g)},undo:function(g){this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(this.table.modules.edit.currentCell||(g.preventDefault(),this.table.modules.history.undo()))},redo:function(g){this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(this.table.modules.edit.currentCell||(g.preventDefault(),this.table.modules.history.redo()))},copyToClipboard:function(g){this.table.modules.edit.currentCell||this.table.modExists("clipboard",!0)&&this.table.modules.clipboard.copy(!1,!0)}};let Xf=(()=>{class g extends Eo{constructor(o){super(o),this.watchKeys=null,this.pressedKeys=null,this.keyupBinding=!1,this.keydownBinding=!1,this.registerTableOption("keybindings",[]),this.registerTableOption("tabEndNewRow",!1)}initialize(){var o=this.table.options.keybindings,a={};if(this.watchKeys={},this.pressedKeys=[],!1!==o){for(let c in g.bindings)a[c]=g.bindings[c];if(Object.keys(o).length)for(let c in o)a[c]=o[c];this.mapBindings(a),this.bindEvents()}this.subscribe("table-destroy",this.clearBindings.bind(this))}mapBindings(o){for(let a in o)g.actions[a]?o[a]&&("object"!=typeof o[a]&&(o[a]=[o[a]]),o[a].forEach(c=>{this.mapBinding(a,c)})):console.warn("Key Binding Error - no such action:",a)}mapBinding(o,a){var c={action:g.actions[o],keys:[],ctrl:!1,shift:!1,meta:!1};a.toString().toLowerCase().split(" ").join("").split("+").forEach(E=>{switch(E){case"ctrl":c.ctrl=!0;break;case"shift":c.shift=!0;break;case"meta":c.meta=!0;break;default:E=parseInt(E),c.keys.push(E),this.watchKeys[E]||(this.watchKeys[E]=[]),this.watchKeys[E].push(c)}})}bindEvents(){var o=this;this.keyupBinding=function(a){var c=a.keyCode,f=o.watchKeys[c];f&&(o.pressedKeys.push(c),f.forEach(function(E){o.checkBinding(a,E)}))},this.keydownBinding=function(a){var c=a.keyCode;if(o.watchKeys[c]){var E=o.pressedKeys.indexOf(c);E>-1&&o.pressedKeys.splice(E,1)}},this.table.element.addEventListener("keydown",this.keyupBinding),this.table.element.addEventListener("keyup",this.keydownBinding)}clearBindings(){this.keyupBinding&&this.table.element.removeEventListener("keydown",this.keyupBinding),this.keydownBinding&&this.table.element.removeEventListener("keyup",this.keydownBinding)}checkBinding(o,a){var c=!0;return o.ctrlKey==a.ctrl&&o.shiftKey==a.shift&&o.metaKey==a.meta&&(a.keys.forEach(f=>{-1==this.pressedKeys.indexOf(f)&&(c=!1)}),c&&a.action.call(this,o),!0)}}return g.moduleName="keybindings",g.bindings=Hm,g.actions=Pp,g})(),Kf=(()=>{class g extends Eo{constructor(o){super(o),this.menuElements=[],this.blurEvent=this.hideMenu.bind(this),this.escEvent=this.escMenu.bind(this),this.nestedMenuBlock=!1,this.positionReversedX=!1,this.registerTableOption("rowContextMenu",!1),this.registerTableOption("rowClickMenu",!1),this.registerTableOption("groupContextMenu",!1),this.registerTableOption("groupClickMenu",!1),this.registerColumnOption("headerContextMenu"),this.registerColumnOption("headerMenu"),this.registerColumnOption("contextMenu"),this.registerColumnOption("clickMenu")}initialize(){this.subscribe("cell-layout",this.layoutCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("row-init",this.initializeRow.bind(this))}layoutCell(o){(o.column.definition.contextMenu||o.column.definition.clickMenu)&&this.initializeCell(o)}initializeColumn(o){var a=o.definition;(a.headerContextMenu||a.headerClickMenu||a.headerMenu)&&this.initializeColumnHeader(o)}initializeColumnHeader(o){var a;o.definition.headerContextMenu&&(o.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,o,o.definition.headerContextMenu)),this.tapHold(o,o.definition.headerContextMenu)),o.definition.headerMenu&&((a=document.createElement("span")).classList.add("tabulator-header-menu-button"),a.innerHTML="&vellip;",a.addEventListener("click",c=>{c.stopPropagation(),c.preventDefault(),this.LoadMenuEvent(o,o.definition.headerMenu,c)}),o.titleElement.insertBefore(a,o.titleElement.firstChild))}LoadMenuEvent(o,a,c){a="function"==typeof a?a.call(this.table,o.getComponent(),c):a,this.loadMenu(c,o,a)}tapHold(o,a){var c=o.getElement(),f=null,E=!1;c.addEventListener("touchstart",R=>{clearTimeout(f),E=!1,f=setTimeout(()=>{clearTimeout(f),f=null,E=!0,this.LoadMenuEvent(o,a,R)},1e3)},{passive:!0}),c.addEventListener("touchend",R=>{clearTimeout(f),f=null,E&&R.preventDefault()})}initializeCell(o){o.column.definition.contextMenu&&(o.getElement(!0).addEventListener("contextmenu",this.LoadMenuEvent.bind(this,o,o.column.definition.contextMenu)),this.tapHold(o,o.column.definition.contextMenu)),o.column.definition.clickMenu&&o.getElement(!0).addEventListener("click",this.LoadMenuEvent.bind(this,o,o.column.definition.clickMenu))}initializeRow(o){this.table.options.rowContextMenu&&(o.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,o,this.table.options.rowContextMenu)),this.tapHold(o,this.table.options.rowContextMenu)),this.table.options.rowClickMenu&&o.getElement().addEventListener("click",this.LoadMenuEvent.bind(this,o,this.table.options.rowClickMenu))}initializeGroup(o){this.table.options.groupContextMenu&&(o.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,o,this.table.options.groupContextMenu)),this.tapHold(o,this.table.options.groupContextMenu)),this.table.options.groupClickMenu&&o.getElement().addEventListener("click",this.LoadMenuEvent.bind(this,o,this.table.options.groupClickMenu))}loadMenu(o,a,c,f){var E=!(o instanceof MouseEvent),R=document.createElement("div");if(R.classList.add("tabulator-menu"),E||o.preventDefault(),c&&c.length){if(!f){if(this.nestedMenuBlock){if(this.isOpen())return}else this.nestedMenuBlock=setTimeout(()=>{this.nestedMenuBlock=!1},100);this.hideMenu(),this.menuElements=[]}c.forEach(O=>{var F=document.createElement("div"),J=O.label,dt=O.disabled;O.separator?F.classList.add("tabulator-menu-separator"):(F.classList.add("tabulator-menu-item"),"function"==typeof J&&(J=J.call(this.table,a.getComponent())),J instanceof Node?F.appendChild(J):F.innerHTML=J,"function"==typeof dt&&(dt=dt.call(this.table,a.getComponent())),dt?(F.classList.add("tabulator-menu-item-disabled"),F.addEventListener("click",Ft=>{Ft.stopPropagation()})):O.menu&&O.menu.length?F.addEventListener("click",Ft=>{Ft.stopPropagation(),this.hideOldSubMenus(R),this.loadMenu(Ft,a,O.menu,F)}):O.action&&F.addEventListener("click",Ft=>{O.action(Ft,a.getComponent())}),O.menu&&O.menu.length&&F.classList.add("tabulator-menu-item-submenu")),R.appendChild(F)}),R.addEventListener("click",O=>{this.hideMenu()}),this.menuElements.push(R),this.positionMenu(R,f,E,o)}}hideOldSubMenus(o){var a=this.menuElements.indexOf(o);if(a>-1)for(let f=this.menuElements.length-1;f>a;f--){var c=this.menuElements[f];c.parentNode&&c.parentNode.removeChild(c),this.menuElements.pop()}}positionMenu(o,a,c,f){var R,O,F,E=Math.max(document.body.offsetHeight,window.innerHeight);a?(R=(F=Es.elOffset(a)).left+a.offsetWidth,O=F.top-1):(R=c?f.touches[0].pageX:f.pageX,O=c?f.touches[0].pageY:f.pageY,this.positionReversedX=!1),o.style.top=O+"px",o.style.left=R+"px",setTimeout(()=>{this.table.rowManager.element.addEventListener("scroll",this.blurEvent),document.body.addEventListener("click",this.blurEvent),document.body.addEventListener("contextmenu",this.blurEvent),window.addEventListener("resize",this.blurEvent),document.body.addEventListener("keydown",this.escEvent)},100),document.body.appendChild(o),O+o.offsetHeight>=E&&(o.style.top="",o.style.bottom=a?E-F.top-a.offsetHeight-1+"px":E-O+"px"),(R+o.offsetWidth>=document.body.offsetWidth||this.positionReversedX)&&(o.style.left="",o.style.right=a?document.documentElement.offsetWidth-F.left+"px":document.documentElement.offsetWidth-R+"px",this.positionReversedX=!0)}isOpen(){return!!this.menuElements.length}escMenu(o){27==o.keyCode&&this.hideMenu()}hideMenu(){this.menuElements.forEach(o=>{o.parentNode&&o.parentNode.removeChild(o)}),document.body.removeEventListener("keydown",this.escEvent),document.body.removeEventListener("click",this.blurEvent),document.body.removeEventListener("contextmenu",this.blurEvent),window.removeEventListener("resize",this.blurEvent),this.table.rowManager.element.removeEventListener("scroll",this.blurEvent)}}return g.moduleName="menu",g})(),Jf=(()=>{class g extends Eo{constructor(o){super(o),this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=250,this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.startX=0,this.autoScrollMargin=40,this.autoScrollStep=5,this.autoScrollTimeout=!1,this.touchMove=!1,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.registerTableOption("movableColumns",!1)}createPlaceholderElement(){var o=document.createElement("div");return o.classList.add("tabulator-col"),o.classList.add("tabulator-col-placeholder"),o}initialize(){this.subscribe("column-init",this.initializeColumn.bind(this))}initializeColumn(o){var f,a=this,c={};o.modules.frozen||(f=o.getElement(),c.mousemove=function(E){o.parent===a.moving.parent&&((a.touchMove?E.touches[0].pageX:E.pageX)-Es.elOffset(f).left+a.table.columnManager.element.scrollLeft>o.getWidth()/2?(a.toCol!==o||!a.toColAfter)&&(f.parentNode.insertBefore(a.placeholderElement,f.nextSibling),a.moveColumn(o,!0)):(a.toCol!==o||a.toColAfter)&&(f.parentNode.insertBefore(a.placeholderElement,f),a.moveColumn(o,!1)))}.bind(a),f.addEventListener("mousedown",function(E){a.touchMove=!1,1===E.which&&(a.checkTimeout=setTimeout(function(){a.startMove(E,o)},a.checkPeriod))}),f.addEventListener("mouseup",function(E){1===E.which&&a.checkTimeout&&clearTimeout(a.checkTimeout)}),a.bindTouchEvents(o)),o.modules.moveColumn=c}bindTouchEvents(o){var f,E,R,O,F,J,a=o.getElement(),c=!1;a.addEventListener("touchstart",dt=>{this.checkTimeout=setTimeout(()=>{this.touchMove=!0,f=o.nextColumn(),R=f?f.getWidth()/2:0,E=o.prevColumn(),O=E?E.getWidth()/2:0,F=0,J=0,c=!1,this.startMove(dt,o)},this.checkPeriod)},{passive:!0}),a.addEventListener("touchmove",dt=>{var Ft,qt;this.moving&&(this.moveHover(dt),c||(c=dt.touches[0].pageX),(Ft=dt.touches[0].pageX-c)>0?f&&Ft-F>R&&(qt=f)!==o&&(c=dt.touches[0].pageX,qt.getElement().parentNode.insertBefore(this.placeholderElement,qt.getElement().nextSibling),this.moveColumn(qt,!0)):E&&-Ft-J>O&&(qt=E)!==o&&(c=dt.touches[0].pageX,qt.getElement().parentNode.insertBefore(this.placeholderElement,qt.getElement()),this.moveColumn(qt,!1)),qt&&(f=qt.nextColumn(),F=R,R=f?f.getWidth()/2:0,E=qt.prevColumn(),J=O,O=E?E.getWidth()/2:0))},{passive:!0}),a.addEventListener("touchend",dt=>{this.checkTimeout&&clearTimeout(this.checkTimeout),this.moving&&this.endMove(dt)})}startMove(o,a){var c=a.getElement(),f=this.table.columnManager.getElement(),E=this.table.columnManager.getHeadersElement();this.moving=a,this.startX=(this.touchMove?o.touches[0].pageX:o.pageX)-Es.elOffset(c).left,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=a.getWidth()+"px",this.placeholderElement.style.height=a.getHeight()+"px",c.parentNode.insertBefore(this.placeholderElement,c),c.parentNode.removeChild(c),this.hoverElement=c.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.table.columnManager.getElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.bottom=f.clientHeight-E.offsetHeight+"px",this.touchMove||(this._bindMouseMove(),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove)),this.moveHover(o)}_bindMouseMove(){this.table.columnManager.columnsByIndex.forEach(function(o){o.modules.moveColumn.mousemove&&o.getElement().addEventListener("mousemove",o.modules.moveColumn.mousemove)})}_unbindMouseMove(){this.table.columnManager.columnsByIndex.forEach(function(o){o.modules.moveColumn.mousemove&&o.getElement().removeEventListener("mousemove",o.modules.moveColumn.mousemove)})}moveColumn(o,a){var c=this.moving.getCells();this.toCol=o,this.toColAfter=a,a?o.getCells().forEach(function(f,E){var R=f.getElement(!0);R.parentNode&&c[E]&&R.parentNode.insertBefore(c[E].getElement(),R.nextSibling)}):o.getCells().forEach(function(f,E){var R=f.getElement(!0);R.parentNode&&c[E]&&R.parentNode.insertBefore(c[E].getElement(),R)})}endMove(o){(1===o.which||this.touchMove)&&(this._unbindMouseMove(),this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toCol&&this.table.columnManager.moveColumnActual(this.moving,this.toCol,this.toColAfter),this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.touchMove||(document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove)))}moveHover(o){var E,a=this.table.columnManager.getElement(),c=a.scrollLeft,f=(this.touchMove?o.touches[0].pageX:o.pageX)-Es.elOffset(a).left+c;this.hoverElement.style.left=f-this.startX+"px",f-c<this.autoScrollMargin&&(this.autoScrollTimeout||(this.autoScrollTimeout=setTimeout(()=>{E=Math.max(0,c-5),this.table.rowManager.getElement().scrollLeft=E,this.autoScrollTimeout=!1},1))),c+a.clientWidth-f<this.autoScrollMargin&&(this.autoScrollTimeout||(this.autoScrollTimeout=setTimeout(()=>{E=Math.min(a.clientWidth,c+5),this.table.rowManager.getElement().scrollLeft=E,this.autoScrollTimeout=!1},1)))}}return g.moduleName="moveColumn",g})();class Xh extends Eo{constructor(l){super(l),this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=150,this.moving=!1,this.toRow=!1,this.toRowAfter=!1,this.hasHandle=!1,this.startY=0,this.startX=0,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.tableRowDropEvent=!1,this.touchMove=!1,this.connection=!1,this.connectionSelectorsTables=!1,this.connectionSelectorsElements=!1,this.connectionElements=[],this.connections=[],this.connectedTable=!1,this.connectedRow=!1,this.registerTableOption("movableRows",!1),this.registerTableOption("movableRowsConnectedTables",!1),this.registerTableOption("movableRowsConnectedElements",!1),this.registerTableOption("movableRowsSender",!1),this.registerTableOption("movableRowsReceiver","insert"),this.registerColumnOption("rowHandle")}createPlaceholderElement(){var l=document.createElement("div");return l.classList.add("tabulator-row"),l.classList.add("tabulator-row-placeholder"),l}initialize(){this.table.options.movableRows&&(this.connectionSelectorsTables=this.table.options.movableRowsConnectedTables,this.connectionSelectorsElements=this.table.options.movableRowsConnectedElements,this.connection=this.connectionSelectorsTables||this.connectionSelectorsElements,this.subscribe("cell-init",this.initializeCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("row-init",this.initializeRow.bind(this)))}initializeGroupHeader(l){var o=this,a={};a.mouseup=function(c){o.tableRowDrop(c,row)}.bind(o),a.mousemove=function(c){if(c.pageY-Es.elOffset(l.element).top+o.table.rowManager.element.scrollTop>l.getHeight()/2)o.toRow===l&&o.toRowAfter||((f=l.getElement()).parentNode.insertBefore(o.placeholderElement,f.nextSibling),o.moveRow(l,!0));else if(o.toRow!==l||o.toRowAfter){var f;(f=l.getElement()).previousSibling&&(f.parentNode.insertBefore(o.placeholderElement,f),o.moveRow(l,!1))}}.bind(o),l.modules.moveRow=a}initializeRow(l){var c,o=this,a={};a.mouseup=function(f){o.tableRowDrop(f,l)}.bind(o),a.mousemove=function(f){var E=l.getElement();f.pageY-Es.elOffset(E).top+o.table.rowManager.element.scrollTop>l.getHeight()/2?(o.toRow!==l||!o.toRowAfter)&&(E.parentNode.insertBefore(o.placeholderElement,E.nextSibling),o.moveRow(l,!0)):(o.toRow!==l||o.toRowAfter)&&(E.parentNode.insertBefore(o.placeholderElement,E),o.moveRow(l,!1))}.bind(o),this.hasHandle||((c=l.getElement()).addEventListener("mousedown",function(f){1===f.which&&(o.checkTimeout=setTimeout(function(){o.startMove(f,l)},o.checkPeriod))}),c.addEventListener("mouseup",function(f){1===f.which&&o.checkTimeout&&clearTimeout(o.checkTimeout)}),this.bindTouchEvents(l,l.getElement())),l.modules.moveRow=a}initializeColumn(l){l.definition.rowHandle&&!1!==this.table.options.movableRows&&(this.hasHandle=!0)}initializeCell(l){if(l.column.definition.rowHandle&&!1!==this.table.options.movableRows){var o=this,a=l.getElement(!0);a.addEventListener("mousedown",function(c){1===c.which&&(o.checkTimeout=setTimeout(function(){o.startMove(c,l.row)},o.checkPeriod))}),a.addEventListener("mouseup",function(c){1===c.which&&o.checkTimeout&&clearTimeout(o.checkTimeout)}),this.bindTouchEvents(l.row,a)}}bindTouchEvents(l,o){var c,f,E,R,O,F,a=!1;o.addEventListener("touchstart",J=>{this.checkTimeout=setTimeout(()=>{this.touchMove=!0,c=l.nextRow(),E=c?c.getHeight()/2:0,f=l.prevRow(),R=f?f.getHeight()/2:0,O=0,F=0,a=!1,this.startMove(J,l)},this.checkPeriod)},{passive:!0}),o.addEventListener("touchmove",J=>{var dt,Ft;this.moving&&(J.preventDefault(),this.moveHover(J),a||(a=J.touches[0].pageY),(dt=J.touches[0].pageY-a)>0?c&&dt-O>E&&(Ft=c)!==l&&(a=J.touches[0].pageY,Ft.getElement().parentNode.insertBefore(this.placeholderElement,Ft.getElement().nextSibling),this.moveRow(Ft,!0)):f&&-dt-F>R&&(Ft=f)!==l&&(a=J.touches[0].pageY,Ft.getElement().parentNode.insertBefore(this.placeholderElement,Ft.getElement()),this.moveRow(Ft,!1)),Ft&&(c=Ft.nextRow(),O=E,E=c?c.getHeight()/2:0,f=Ft.prevRow(),F=R,R=f?f.getHeight()/2:0))}),o.addEventListener("touchend",J=>{this.checkTimeout&&clearTimeout(this.checkTimeout),this.moving&&(this.endMove(J),this.touchMove=!1)})}_bindMouseMove(){this.table.rowManager.getDisplayRows().forEach(l=>{("row"===l.type||"group"===l.type)&&l.modules.moveRow&&l.modules.moveRow.mousemove&&l.getElement().addEventListener("mousemove",l.modules.moveRow.mousemove)})}_unbindMouseMove(){this.table.rowManager.getDisplayRows().forEach(l=>{("row"===l.type||"group"===l.type)&&l.modules.moveRow&&l.modules.moveRow.mousemove&&l.getElement().removeEventListener("mousemove",l.modules.moveRow.mousemove)})}startMove(l,o){var a=o.getElement();this.setStartPosition(l,o),this.moving=o,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=o.getWidth()+"px",this.placeholderElement.style.height=o.getHeight()+"px",this.connection?(this.table.element.classList.add("tabulator-movingrow-sending"),this.connectToTables(o)):(a.parentNode.insertBefore(this.placeholderElement,a),a.parentNode.removeChild(a)),this.hoverElement=a.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.connection?(document.body.appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this.hoverElement.style.width=this.table.element.clientWidth+"px",this.hoverElement.style.whiteSpace="nowrap",this.hoverElement.style.overflow="hidden",this.hoverElement.style.pointerEvents="none"):(this.table.rowManager.getTableElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this._bindMouseMove()),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove),this.moveHover(l)}setStartPosition(l,o){var f,E,a=this.touchMove?l.touches[0].pageX:l.pageX,c=this.touchMove?l.touches[0].pageY:l.pageY;f=o.getElement(),this.connection?(E=f.getBoundingClientRect(),this.startX=E.left-a+window.pageXOffset,this.startY=E.top-c+window.pageYOffset):this.startY=c-f.getBoundingClientRect().top}endMove(l){(!l||1===l.which||this.touchMove)&&(this._unbindMouseMove(),this.connection||(this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement)),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toRow&&this.table.rowManager.moveRow(this.moving,this.toRow,this.toRowAfter),this.moving=!1,this.toRow=!1,this.toRowAfter=!1,document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove),this.connection&&(this.table.element.classList.remove("tabulator-movingrow-sending"),this.disconnectFromTables()))}moveRow(l,o){this.toRow=l,this.toRowAfter=o}moveHover(l){this.connection?this.moveHoverConnections.call(this,l):this.moveHoverTable.call(this,l)}moveHoverTable(l){var o=this.table.rowManager.getElement(),a=o.scrollTop,c=(this.touchMove?l.touches[0].pageY:l.pageY)-o.getBoundingClientRect().top+a;this.hoverElement.style.top=c-this.startY+"px"}moveHoverConnections(l){this.hoverElement.style.left=this.startX+(this.touchMove?l.touches[0].pageX:l.pageX)+"px",this.hoverElement.style.top=this.startY+(this.touchMove?l.touches[0].pageY:l.pageY)+"px"}elementRowDrop(l,o,a){this.dispatchExternal("movableRowsElementDrop",l,o,!!a&&a.getComponent())}connectToTables(l){var o;this.connectionSelectorsTables&&(o=this.commsConnections(this.connectionSelectorsTables),this.dispatchExternal("movableRowsSendingStart",o),this.commsSend(this.connectionSelectorsTables,"moveRow","connect",{row:l})),this.connectionSelectorsElements&&(this.connectionElements=[],Array.isArray(this.connectionSelectorsElements)||(this.connectionSelectorsElements=[this.connectionSelectorsElements]),this.connectionSelectorsElements.forEach(a=>{"string"==typeof a?this.connectionElements=this.connectionElements.concat(Array.prototype.slice.call(document.querySelectorAll(a))):this.connectionElements.push(a)}),this.connectionElements.forEach(a=>{var c=f=>{this.elementRowDrop(f,a,this.moving)};a.addEventListener("mouseup",c),a.tabulatorElementDropEvent=c,a.classList.add("tabulator-movingrow-receiving")}))}disconnectFromTables(){var l;this.connectionSelectorsTables&&(l=this.commsConnections(this.connectionSelectorsTables),this.dispatchExternal("movableRowsSendingStop",l),this.commsSend(this.connectionSelectorsTables,"moveRow","disconnect")),this.connectionElements.forEach(o=>{o.classList.remove("tabulator-movingrow-receiving"),o.removeEventListener("mouseup",o.tabulatorElementDropEvent),delete o.tabulatorElementDropEvent})}connect(l,o){return this.connectedTable?(console.warn("Move Row Error - Table cannot accept connection, already connected to table:",this.connectedTable),!1):(this.connectedTable=l,this.connectedRow=o,this.table.element.classList.add("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach(a=>{"row"===a.type&&a.modules.moveRow&&a.modules.moveRow.mouseup&&a.getElement().addEventListener("mouseup",a.modules.moveRow.mouseup)}),this.tableRowDropEvent=this.tableRowDrop.bind(this),this.table.element.addEventListener("mouseup",this.tableRowDropEvent),this.dispatchExternal("movableRowsReceivingStart",o,l),!0)}disconnect(l){l===this.connectedTable?(this.connectedTable=!1,this.connectedRow=!1,this.table.element.classList.remove("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach(o=>{"row"===o.type&&o.modules.moveRow&&o.modules.moveRow.mouseup&&o.getElement().removeEventListener("mouseup",o.modules.moveRow.mouseup)}),this.table.element.removeEventListener("mouseup",this.tableRowDropEvent),this.dispatchExternal("movableRowsReceivingStop",l)):console.warn("Move Row Error - trying to disconnect from non connected table")}dropComplete(l,o,a){var c=!1;if(a){switch(typeof this.table.options.movableRowsSender){case"string":c=this.senders[this.table.options.movableRowsSender];break;case"function":c=this.table.options.movableRowsSender}c?c.call(this,this.moving.getComponent(),o?o.getComponent():void 0,l):this.table.options.movableRowsSender&&console.warn("Mover Row Error - no matching sender found:",this.table.options.movableRowsSender),this.dispatchExternal("movableRowsSent",this.moving.getComponent(),o?o.getComponent():void 0,l)}else this.dispatchExternal("movableRowsSentFailed",this.moving.getComponent(),o?o.getComponent():void 0,l);this.endMove()}tableRowDrop(l,o){var a=!1,c=!1;switch(l.stopImmediatePropagation(),typeof this.table.options.movableRowsReceiver){case"string":a=this.receivers[this.table.options.movableRowsReceiver];break;case"function":a=this.table.options.movableRowsReceiver}a?c=a.call(this,this.connectedRow.getComponent(),o?o.getComponent():void 0,this.connectedTable):console.warn("Mover Row Error - no matching receiver found:",this.table.options.movableRowsReceiver),this.dispatchExternal(c?"movableRowsReceived":"movableRowsReceivedFailed",this.connectedRow.getComponent(),o?o.getComponent():void 0,this.connectedTable),this.commsSend(this.connectedTable,"moveRow","dropcomplete",{row:o,success:c})}commsReceived(l,o,a){switch(o){case"connect":return this.connect(l,a.row);case"disconnect":return this.disconnect(l);case"dropcomplete":return this.dropComplete(l,a.row,a.success)}}}Xh.prototype.receivers={insert:function(g,l,o){return this.table.addRow(g.getData(),void 0,l),!0},add:function(g,l,o){return this.table.addRow(g.getData()),!0},update:function(g,l,o){return!!l&&(l.update(g.getData()),!0)},replace:function(g,l,o){return!!l&&(this.table.addRow(g.getData(),void 0,l),l.delete(),!0)}},Xh.prototype.senders={delete:function(g,l,o){g.delete()}},Xh.moduleName="moveRow";var $f={};let Zf=(()=>{class g extends Eo{constructor(o){super(o),this.allowedTypes=["","data","edit","clipboard"],this.enabled=!0,this.registerColumnOption("mutator"),this.registerColumnOption("mutatorParams"),this.registerColumnOption("mutatorData"),this.registerColumnOption("mutatorDataParams"),this.registerColumnOption("mutatorEdit"),this.registerColumnOption("mutatorEditParams"),this.registerColumnOption("mutatorClipboard"),this.registerColumnOption("mutatorClipboardParams")}initialize(){this.subscribe("cell-value-changing",this.transformCell.bind(this)),this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("row-data-init-before",this.rowDataChanged.bind(this)),this.subscribe("row-data-changing",this.rowDataChanged.bind(this))}rowDataChanged(o,a,c){return this.transformRow(a,"data",c)}initializeColumn(o){var a=!1,c={};this.allowedTypes.forEach(f=>{var R,E="mutator"+(f.charAt(0).toUpperCase()+f.slice(1));o.definition[E]&&(R=this.lookupMutator(o.definition[E]))&&(a=!0,c[E]={mutator:R,params:o.definition[E+"Params"]||{}})}),a&&(o.modules.mutate=c)}lookupMutator(o){var a=!1;switch(typeof o){case"string":g.mutators[o]?a=g.mutators[o]:console.warn("Mutator Error - No such mutator found, ignoring: ",o);break;case"function":a=o}return a}transformRow(o,a,c){var E,f="mutator"+(a.charAt(0).toUpperCase()+a.slice(1));return this.enabled&&this.table.columnManager.traverse(R=>{var O,F,J;R.modules.mutate&&(O=R.modules.mutate[f]||R.modules.mutate.mutator||!1)&&(E=R.getFieldValue(void 0!==c?c:o),("data"==a||void 0!==E)&&(J=R.getComponent(),F="function"==typeof O.params?O.params(E,o,a,J):O.params,R.setFieldValue(o,O.mutator(E,o,a,F,J))))}),o}transformCell(o,a){if(o.column.modules.mutate){var c=o.column.modules.mutate.mutatorEdit||o.column.modules.mutate.mutator||!1,f={};if(c)return f=Object.assign(f,o.row.getData()),o.column.setFieldValue(f,a),c.mutator(a,f,"edit",c.params,o.getComponent())}return a}enable(){this.enabled=!0}disable(){this.enabled=!1}}return g.moduleName="mutator",g.mutators=$f,g})(),Td=(()=>{class g extends Eo{constructor(o){super(o),this.mode="local",this.progressiveLoad=!1,this.size=0,this.page=1,this.count=5,this.max=1,this.displayIndex=0,this.initialLoad=!0,this.dataChanging=!1,this.pageSizes=[],this.dataReceivedNames={},this.dataSentNames={},this.registerTableOption("pagination",!1),this.registerTableOption("paginationMode","local"),this.registerTableOption("paginationSize",!1),this.registerTableOption("paginationInitialPage",1),this.registerTableOption("paginationButtonCount",5),this.registerTableOption("paginationSizeSelector",!1),this.registerTableOption("paginationElement",!1),this.registerTableOption("paginationAddRow","page"),this.registerTableOption("progressiveLoad",!1),this.registerTableOption("progressiveLoadDelay",0),this.registerTableOption("progressiveLoadScrollMargin",0),this.registerTableFunction("setMaxPage",this.setMaxPage.bind(this)),this.registerTableFunction("setPage",this.setPage.bind(this)),this.registerTableFunction("setPageToRow",this.userSetPageToRow.bind(this)),this.registerTableFunction("setPageSize",this.userSetPageSize.bind(this)),this.registerTableFunction("getPageSize",this.getPageSize.bind(this)),this.registerTableFunction("previousPage",this.previousPage.bind(this)),this.registerTableFunction("nextPage",this.nextPage.bind(this)),this.registerTableFunction("getPage",this.getPage.bind(this)),this.registerTableFunction("getPageMax",this.getPageMax.bind(this)),this.registerComponentFunction("row","pageTo",this.setPageToRow.bind(this))}initialize(){this.table.options.pagination?(this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("row-adding-position",this.rowAddingPosition.bind(this)),this.subscribe("row-added",this.rowsUpdated.bind(this)),this.subscribe("data-processed",this.initialLoadComplete.bind(this)),this.subscribe("table-built",this.calculatePageSizes.bind(this)),"remote"===this.table.options.paginationMode&&(this.subscribe("data-params",this.remotePageParams.bind(this)),this.subscribe("data-loaded",this._parseRemoteData.bind(this))),this.table.options.progressiveLoad&&console.error("Progressive Load Error - Pagination and progressive load cannot be used at the same time"),this.registerDisplayHandler(this.restOnRenderBefore.bind(this),40),this.registerDisplayHandler(this.getRows.bind(this),50),this.createElements(),this.initializePaginator()):this.table.options.progressiveLoad&&(this.subscribe("data-params",this.remotePageParams.bind(this)),this.subscribe("data-loaded",this._parseRemoteData.bind(this)),this.subscribe("table-built",this.calculatePageSizes.bind(this)),this.initializeProgressive(this.table.options.progressiveLoad),"scroll"===this.table.options.progressiveLoad&&this.subscribe("scroll-vertical",this.scrollVertical.bind(this)))}rowAddingPosition(o,a){var E,c=this.table.rowManager,f=c.getDisplayRows();return a?f.length?E=f[0]:c.activeRows.length&&(E=c.activeRows[c.activeRows.length-1],a=!1):f.length&&(E=f[f.length-1],a=!(f.length<this.size)),{index:E,top:a}}calculatePageSizes(){var o,a;this.table.options.paginationSize?this.size=this.table.options.paginationSize:((o=document.createElement("div")).classList.add("tabulator-row"),o.style.visibility="hidden",(a=document.createElement("div")).classList.add("tabulator-cell"),a.innerHTML="Page Row Test",o.appendChild(a),this.table.rowManager.getTableElement().appendChild(o),this.size=Math.floor(this.table.rowManager.getElement().clientHeight/o.offsetHeight),this.table.rowManager.getTableElement().removeChild(o)),this.generatePageSizeSelectList()}initialLoadComplete(){this.initialLoad=!1}remotePageParams(o,a,c,f){return this.initialLoad||(this.progressiveLoad&&!c||!this.progressiveLoad&&!this.dataChanging)&&this.reset(!0),f.page=this.page,this.size&&(f.size=this.size),f}userSetPageToRow(o){return this.table.options.pagination&&(o=this.rowManager.findRow(o))?this.setPageToRow(o):Promise.reject()}userSetPageSize(o){return!!this.table.options.pagination&&(this.setPageSize(o),this.setPage(1))}scrollVertical(o,a){var c;!a&&!this.table.dataLoader.loading&&(c=this.table.rowManager.getElement()).scrollHeight-c.clientHeight-o<(this.table.options.progressiveLoadScrollMargin||2*c.clientHeight)&&this.nextPage()}restOnRenderBefore(o,a){return a||"local"===this.mode&&this.reset(),o}rowsUpdated(){this.refreshData(!0,"all")}createElements(){var o;this.element=document.createElement("span"),this.element.classList.add("tabulator-paginator"),this.pagesElement=document.createElement("span"),this.pagesElement.classList.add("tabulator-pages"),(o=document.createElement("button")).classList.add("tabulator-page"),o.setAttribute("type","button"),o.setAttribute("role","button"),o.setAttribute("aria-label",""),o.setAttribute("title",""),this.firstBut=o.cloneNode(!0),this.firstBut.setAttribute("data-page","first"),this.prevBut=o.cloneNode(!0),this.prevBut.setAttribute("data-page","prev"),this.nextBut=o.cloneNode(!0),this.nextBut.setAttribute("data-page","next"),this.lastBut=o.cloneNode(!0),this.lastBut.setAttribute("data-page","last"),this.table.options.paginationSizeSelector&&(this.pageSizeSelect=document.createElement("select"),this.pageSizeSelect.classList.add("tabulator-page-size"))}generatePageSizeSelectList(){var o=[];if(this.pageSizeSelect){if(Array.isArray(this.table.options.paginationSizeSelector))this.pageSizes=o=this.table.options.paginationSizeSelector,-1==this.pageSizes.indexOf(this.size)&&o.unshift(this.size);else if(-1==this.pageSizes.indexOf(this.size)){o=[];for(let a=1;a<5;a++)o.push(this.size*a);this.pageSizes=o}else o=this.pageSizes;for(;this.pageSizeSelect.firstChild;)this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild);o.forEach(a=>{var c=document.createElement("option");c.value=a,!0===a?this.langBind("pagination|all",function(f){c.innerHTML=f}):c.innerHTML=a,this.pageSizeSelect.appendChild(c)}),this.pageSizeSelect.value=this.size}}initializePaginator(o){var a;o||(this.langBind("pagination|first",c=>{this.firstBut.innerHTML=c}),this.langBind("pagination|first_title",c=>{this.firstBut.setAttribute("aria-label",c),this.firstBut.setAttribute("title",c)}),this.langBind("pagination|prev",c=>{this.prevBut.innerHTML=c}),this.langBind("pagination|prev_title",c=>{this.prevBut.setAttribute("aria-label",c),this.prevBut.setAttribute("title",c)}),this.langBind("pagination|next",c=>{this.nextBut.innerHTML=c}),this.langBind("pagination|next_title",c=>{this.nextBut.setAttribute("aria-label",c),this.nextBut.setAttribute("title",c)}),this.langBind("pagination|last",c=>{this.lastBut.innerHTML=c}),this.langBind("pagination|last_title",c=>{this.lastBut.setAttribute("aria-label",c),this.lastBut.setAttribute("title",c)}),this.firstBut.addEventListener("click",()=>{this.setPage(1)}),this.prevBut.addEventListener("click",()=>{this.previousPage()}),this.nextBut.addEventListener("click",()=>{this.nextPage()}),this.lastBut.addEventListener("click",()=>{this.setPage(this.max)}),this.table.options.paginationElement&&(this.element=this.table.options.paginationElement),this.pageSizeSelect&&(a=document.createElement("label"),this.langBind("pagination|page_size",c=>{this.pageSizeSelect.setAttribute("aria-label",c),this.pageSizeSelect.setAttribute("title",c),a.innerHTML=c}),this.element.appendChild(a),this.element.appendChild(this.pageSizeSelect),this.pageSizeSelect.addEventListener("change",c=>{this.setPageSize("true"==this.pageSizeSelect.value||this.pageSizeSelect.value),this.setPage(1)})),this.element.appendChild(this.firstBut),this.element.appendChild(this.prevBut),this.element.appendChild(this.pagesElement),this.element.appendChild(this.nextBut),this.element.appendChild(this.lastBut),!this.table.options.paginationElement&&!o&&this.table.footerManager.append(this.element,this),this.page=this.table.options.paginationInitialPage,this.count=this.table.options.paginationButtonCount),this.mode=this.table.options.paginationMode}initializeProgressive(o){this.initializePaginator(!0),this.mode="progressive_"+o,this.progressiveLoad=!0}trackChanges(){this.dispatch("page-changed")}setDisplayIndex(o){this.displayIndex=o}getDisplayIndex(){return this.displayIndex}setMaxRows(o){this.max=o?!0===this.size?1:Math.ceil(o/this.size):1,this.page>this.max&&(this.page=this.max)}reset(o){this.initialLoad||("local"==this.mode||o)&&(this.page=1)}setMaxPage(o){o=parseInt(o),this.max=o||1,this.page>this.max&&(this.page=this.max,this.trigger())}setPage(o){switch(o){case"first":return this.setPage(1);case"prev":return this.previousPage();case"next":return this.nextPage();case"last":return this.setPage(this.max)}return(o=parseInt(o))>0&&o<=this.max||"local"!==this.mode?(this.page=o,this.trackChanges(),this.trigger()):(console.warn("Pagination Error - Requested page is out of range of 1 - "+this.max+":",o),Promise.reject())}setPageToRow(o){var c=this.table.rowManager.getDisplayRows(this.displayIndex-1).indexOf(o);if(c>-1){var f=!0===this.size?1:Math.ceil((c+1)/this.size);return this.setPage(f)}return console.warn("Pagination Error - Requested row is not visible"),Promise.reject()}setPageSize(o){!0!==o&&(o=parseInt(o)),o>0&&(this.size=o),this.pageSizeSelect&&this.generatePageSizeSelectList(),this.trackChanges()}_setPageButtons(){let o=Math.floor((this.count-1)/2),a=Math.ceil((this.count-1)/2),c=this.max-this.page+o+1<this.count?this.max-this.count+1:Math.max(this.page-o,1),f=this.page<=a?Math.min(this.count,this.max):Math.min(this.page+a,this.max);for(;this.pagesElement.firstChild;)this.pagesElement.removeChild(this.pagesElement.firstChild);1==this.page?(this.firstBut.disabled=!0,this.prevBut.disabled=!0):(this.firstBut.disabled=!1,this.prevBut.disabled=!1),this.page==this.max?(this.lastBut.disabled=!0,this.nextBut.disabled=!0):(this.lastBut.disabled=!1,this.nextBut.disabled=!1);for(let E=c;E<=f;E++)E>0&&E<=this.max&&this.pagesElement.appendChild(this._generatePageButton(E));this.footerRedraw()}_generatePageButton(o){var a=document.createElement("button");return a.classList.add("tabulator-page"),o==this.page&&a.classList.add("active"),a.setAttribute("type","button"),a.setAttribute("role","button"),this.langBind("pagination|page_title",c=>{a.setAttribute("aria-label",c+" "+o),a.setAttribute("title",c+" "+o)}),a.setAttribute("data-page",o),a.textContent=o,a.addEventListener("click",c=>{this.setPage(o)}),a}previousPage(){return this.page>1?(this.page--,this.trackChanges(),this.trigger()):(console.warn("Pagination Error - Previous page would be less than page 1:",0),Promise.reject())}nextPage(){return this.page<this.max?(this.page++,this.trackChanges(),this.trigger()):(this.progressiveLoad||console.warn("Pagination Error - Next page would be greater than maximum page of "+this.max+":",this.max+1),Promise.reject())}getPage(){return this.page}getPageMax(){return this.max}getPageSize(o){return this.size}getMode(){return this.mode}getRows(o){var a,c,f;if("local"==this.mode){a=[],this.setMaxRows(o.length),!0===this.size?(c=0,f=o.length):f=(c=this.size*(this.page-1))+parseInt(this.size),this._setPageButtons();for(let E=c;E<f;E++)o[E]&&a.push(o[E]);return a}return this._setPageButtons(),o.slice(0)}trigger(){var o;switch(this.mode){case"local":return o=this.table.rowManager.scrollLeft,this.refreshData(),this.table.rowManager.scrollHorizontal(o),this.dispatchExternal("pageLoaded",this.getPage()),Promise.resolve();case"remote":return this.dataChanging=!0,this.reloadData(null).finally(()=>{this.dataChanging=!1});case"progressive_load":case"progressive_scroll":return this.reloadData(null,!0);default:return console.warn("Pagination Error - no such pagination mode:",this.mode),Promise.reject()}}_parseRemoteData(o){if(void 0===o.last_page&&console.warn("Remote Pagination Error - Server response missing '"+this.dataReceivedNames.last_page+"' property"),o.data){if(this.max=parseInt(o.last_page)||1,this.progressiveLoad){switch(this.mode){case"progressive_load":1==this.page?this.table.rowManager.setData(o.data,!1,1==this.page):this.table.rowManager.addRows(o.data),this.page<this.max&&setTimeout(()=>{this.nextPage()},this.table.options.progressiveLoadDelay);break;case"progressive_scroll":o=this.table.rowManager.getData().concat(o.data),this.table.rowManager.setData(o,1!==this.page,1==this.page),this.table.rowManager.element.scrollHeight<=this.table.rowManager.element.clientHeight+(this.table.options.progressiveLoadScrollMargin||2*this.table.rowManager.element.clientHeight)&&setTimeout(()=>{this.nextPage()})}return!1}this.dispatchExternal("pageLoaded",this.getPage())}else console.warn("Remote Pagination Error - Server response missing '"+this.dataReceivedNames.data+"' property");return o.data}footerRedraw(){var o=this.table.footerManager.element;Math.ceil(o.clientWidth)-o.scrollWidth<0?this.pagesElement.style.display="none":(this.pagesElement.style.display="",Math.ceil(o.clientWidth)-o.scrollWidth<0&&(this.pagesElement.style.display="none"))}}return g.moduleName="page",g})();var Jd={local:function(g,l){var o=localStorage.getItem(g+"-"+l);return!!o&&JSON.parse(o)},cookie:function(g,l){var f,E,o=document.cookie,a=g+"-"+l,c=o.indexOf(a+"=");return c>-1&&((f=(o=o.substr(c)).indexOf(";"))>-1&&(o=o.substr(0,f)),E=o.replace(a+"=","")),!!E&&JSON.parse(E)}},Qf={local:function(g,l,o){localStorage.setItem(g+"-"+l,JSON.stringify(o))},cookie:function(g,l,o){var a=new Date;a.setDate(a.getDate()+1e4),document.cookie=g+"-"+l+"="+JSON.stringify(o)+"; expires="+a.toUTCString()}};let $d=(()=>{class g extends Eo{constructor(o){super(o),this.mode="",this.id="",this.defWatcherBlock=!1,this.config={},this.readFunc=!1,this.writeFunc=!1,this.registerTableOption("persistence",!1),this.registerTableOption("persistenceID",""),this.registerTableOption("persistenceMode",!0),this.registerTableOption("persistenceReaderFunc",!1),this.registerTableOption("persistenceWriterFunc",!1)}localStorageTest(){var o="_tabulator_test";try{return window.localStorage.setItem(o,o),window.localStorage.removeItem(o),!0}catch(a){return!1}}initialize(){if(this.table.options.persistence){var c,o=this.table.options.persistenceMode,a=this.table.options.persistenceID;this.mode=!0!==o?o:this.localStorageTest()?"local":"cookie",this.table.options.persistenceReaderFunc?"function"==typeof this.table.options.persistenceReaderFunc?this.readFunc=this.table.options.persistenceReaderFunc:g.readers[this.table.options.persistenceReaderFunc]?this.readFunc=g.readers[this.table.options.persistenceReaderFunc]:console.warn("Persistence Read Error - invalid reader set",this.table.options.persistenceReaderFunc):g.readers[this.mode]?this.readFunc=g.readers[this.mode]:console.warn("Persistence Read Error - invalid reader set",this.mode),this.table.options.persistenceWriterFunc?"function"==typeof this.table.options.persistenceWriterFunc?this.writeFunc=this.table.options.persistenceWriterFunc:g.writers[this.table.options.persistenceWriterFunc]?this.writeFunc=g.writers[this.table.options.persistenceWriterFunc]:console.warn("Persistence Write Error - invalid reader set",this.table.options.persistenceWriterFunc):g.writers[this.mode]?this.writeFunc=g.writers[this.mode]:console.warn("Persistence Write Error - invalid writer set",this.mode),this.id="tabulator-"+(a||this.table.element.getAttribute("id")||""),this.config={sort:!0===this.table.options.persistence||this.table.options.persistence.sort,filter:!0===this.table.options.persistence||this.table.options.persistence.filter,group:!0===this.table.options.persistence||this.table.options.persistence.group,page:!0===this.table.options.persistence||this.table.options.persistence.page,columns:!0===this.table.options.persistence?["title","width","visible"]:this.table.options.persistence.columns},this.config.page&&(c=this.retreiveData("page"))&&(void 0!==c.paginationSize&&(!0===this.config.page||this.config.page.size)&&(this.table.options.paginationSize=c.paginationSize),void 0!==c.paginationInitialPage&&(!0===this.config.page||this.config.page.page)&&(this.table.options.paginationInitialPage=c.paginationInitialPage)),this.config.group&&(c=this.retreiveData("group"))&&(void 0!==c.groupBy&&(!0===this.config.group||this.config.group.groupBy)&&(this.table.options.groupBy=c.groupBy),void 0!==c.groupStartOpen&&(!0===this.config.group||this.config.group.groupStartOpen)&&(this.table.options.groupStartOpen=c.groupStartOpen),void 0!==c.groupHeader&&(!0===this.config.group||this.config.group.groupHeader)&&(this.table.options.groupHeader=c.groupHeader)),this.config.columns&&(this.table.options.columns=this.load("columns",this.table.options.columns),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-show",this.save.bind(this,"columns")),this.subscribe("column-hide",this.save.bind(this,"columns")),this.subscribe("column-moved",this.save.bind(this,"columns")),this.subscribe("table-built",this.tableBuilt.bind(this),0)),this.subscribe("table-redraw",this.tableRedraw.bind(this)),this.subscribe("filter-changed",this.eventSave.bind(this,"filter")),this.subscribe("sort-changed",this.eventSave.bind(this,"sort")),this.subscribe("group-changed",this.eventSave.bind(this,"group")),this.subscribe("page-changed",this.eventSave.bind(this,"page")),this.subscribe("column-resized",this.eventSave.bind(this,"columns")),this.subscribe("layout-refreshed",this.eventSave.bind(this,"columns"))}this.registerTableFunction("getColumnLayout",this.getColumnLayout.bind(this)),this.registerTableFunction("setColumnLayout",this.setColumnLayout.bind(this))}eventSave(o){this.config[o]&&this.save(o)}tableBuilt(){var a,c;this.config.sort&&(a=this.load("sort"))&&(this.table.initialSort=a),this.config.filter&&(c=this.load("filter"))&&(this.table.initialFilter=c)}tableRedraw(o){o&&this.config.columns&&this.save("columns")}getColumnLayout(){return this.parseColumns(this.table.columnManager.getColumns())}setColumnLayout(o){return this.table.columnManager.setColumns(this.mergeDefinition(this.table.options.columns,o)),!0}initializeColumn(o){var a;this.config.columns&&(this.defWatcherBlock=!0,a=o.getDefinition(),(!0===this.config.columns?Object.keys(a):this.config.columns).forEach(f=>{var E=Object.getOwnPropertyDescriptor(a,f),R=a[f];E&&Object.defineProperty(a,f,{set:function(O){R=O,this.defWatcherBlock||this.save("columns"),E.set&&E.set(O)},get:function(){return E.get&&E.get(),R}})}),this.defWatcherBlock=!1)}load(o,a){var c=this.retreiveData(o);return a&&(c=c?this.mergeDefinition(a,c):a),c}retreiveData(o){return!!this.readFunc&&this.readFunc(this.id,o)}mergeDefinition(o,a){var c=[];return(a=a||[]).forEach((f,E)=>{var O,R=this._findColumn(o,f);R&&(!0===this.config.columns||null==this.config.columns?(O=Object.keys(R)).push("width"):O=this.config.columns,O.forEach(F=>{"columns"!==F&&void 0!==f[F]&&(R[F]=f[F])}),R.columns&&(R.columns=this.mergeDefinition(R.columns,f.columns)),c.push(R))}),o.forEach((f,E)=>{this._findColumn(a,f)||(c.length>E?c.splice(E,0,f):c.push(f))}),c}_findColumn(o,a){var c=a.columns?"group":a.field?"field":"object";return o.find(function(f){switch(c){case"group":return f.title===a.title&&f.columns.length===a.columns.length;case"field":return f.field===a.field;case"object":return f===a}})}save(o){var a={};switch(o){case"columns":a=this.parseColumns(this.table.columnManager.getColumns());break;case"filter":a=this.table.modules.filter.getFilters();break;case"sort":a=this.validateSorters(this.table.modules.sort.getSort());break;case"group":a=this.getGroupConfig();break;case"page":a=this.getPageConfig()}this.writeFunc&&this.writeFunc(this.id,o,a)}validateSorters(o){return o.forEach(function(a){a.column=a.field,delete a.field}),o}getGroupConfig(){var o={};return this.config.group&&((!0===this.config.group||this.config.group.groupBy)&&(o.groupBy=this.table.options.groupBy),(!0===this.config.group||this.config.group.groupStartOpen)&&(o.groupStartOpen=this.table.options.groupStartOpen),(!0===this.config.group||this.config.group.groupHeader)&&(o.groupHeader=this.table.options.groupHeader)),o}getPageConfig(){var o={};return this.config.page&&((!0===this.config.page||this.config.page.size)&&(o.paginationSize=this.table.modules.page.getPageSize()),(!0===this.config.page||this.config.page.page)&&(o.paginationInitialPage=this.table.modules.page.getPage())),o}parseColumns(o){var a=[],c=["headerContextMenu","headerMenu","contextMenu","clickMenu"];return o.forEach(f=>{var O,E={},R=f.getDefinition();f.isGroup?(E.title=R.title,E.columns=this.parseColumns(f.getColumns())):(E.field=f.getField(),!0===this.config.columns||null==this.config.columns?(O=Object.keys(R)).push("width"):O=this.config.columns,O.forEach(F=>{switch(F){case"width":E.width=f.getWidth();break;case"visible":E.visible=f.visible;break;default:"function"!=typeof R[F]&&-1===c.indexOf(F)&&(E[F]=R[F])}})),a.push(E)}),a}}return g.moduleName="persistence",g.readers=Jd,g.writers=Qf,g})(),Zd=(()=>{class g extends Eo{constructor(o){super(o),this.element=!1,this.manualBlock=!1,this.registerTableOption("printAsHtml",!1),this.registerTableOption("printFormatter",!1),this.registerTableOption("printHeader",!1),this.registerTableOption("printFooter",!1),this.registerTableOption("printStyled",!0),this.registerTableOption("printRowRange","visible"),this.registerTableOption("printConfig",{}),this.registerColumnOption("print"),this.registerColumnOption("titlePrint")}initialize(){this.table.options.printAsHtml&&(window.addEventListener("beforeprint",this.replaceTable.bind(this)),window.addEventListener("afterprint",this.cleanup.bind(this))),this.registerTableFunction("print",this.printFullscreen.bind(this))}replaceTable(){this.manualBlock||(this.element=document.createElement("div"),this.element.classList.add("tabulator-print-table"),this.element.appendChild(this.table.modules.export.genereateTable(this.table.options.printConfig,this.table.options.printStyled,this.table.options.printRowRange,"print")),this.table.element.style.display="none",this.table.element.parentNode.insertBefore(this.element,this.table.element))}cleanup(){document.body.classList.remove("tabulator-print-fullscreen-hide"),this.element&&this.element.parentNode&&(this.element.parentNode.removeChild(this.element),this.table.element.style.display="")}printFullscreen(o,a,c){var J,dt,f=window.scrollX,E=window.scrollY,R=document.createElement("div"),O=document.createElement("div"),F=this.table.modules.export.genereateTable(void 0!==c?c:this.table.options.printConfig,void 0!==a?a:this.table.options.printStyled,o||this.table.options.printRowRange,"print");this.manualBlock=!0,this.element=document.createElement("div"),this.element.classList.add("tabulator-print-fullscreen"),this.table.options.printHeader&&(R.classList.add("tabulator-print-header"),"string"==typeof(J="function"==typeof this.table.options.printHeader?this.table.options.printHeader.call(this.table):this.table.options.printHeader)?R.innerHTML=J:R.appendChild(J),this.element.appendChild(R)),this.element.appendChild(F),this.table.options.printFooter&&(O.classList.add("tabulator-print-footer"),"string"==typeof(dt="function"==typeof this.table.options.printFooter?this.table.options.printFooter.call(this.table):this.table.options.printFooter)?O.innerHTML=dt:O.appendChild(dt),this.element.appendChild(O)),document.body.classList.add("tabulator-print-fullscreen-hide"),document.body.appendChild(this.element),this.table.options.printFormatter&&this.table.options.printFormatter(this.element,F),window.print(),this.cleanup(),window.scrollTo(f,E),this.manualBlock=!1}}return g.moduleName="print",g})(),Fp=(()=>{class g extends Eo{constructor(o){super(o),this.data=!1,this.blocked=!1,this.origFuncs={},this.currentVersion=0,this.registerTableOption("reactiveData",!1)}initialize(){this.table.options.reactiveData&&(this.subscribe("cell-value-save-before",this.block.bind(this)),this.subscribe("cell-value-save-after",this.unblock.bind(this)),this.subscribe("row-data-save-before",this.block.bind(this)),this.subscribe("row-data-save-after",this.unblock.bind(this)),this.subscribe("row-data-init-after",this.watchRow.bind(this)),this.subscribe("data-processing",this.watchData.bind(this)),this.subscribe("table-destroy",this.unwatchData.bind(this)))}watchData(o){var c,a=this;this.currentVersion++,c=this.currentVersion,this.unwatchData(),this.data=o,this.origFuncs.push=o.push,Object.defineProperty(this.data,"push",{enumerable:!1,configurable:!0,value:function(){var f=Array.from(arguments);return!a.blocked&&c===a.currentVersion&&f.forEach(E=>{a.table.rowManager.addRowActual(E,!1)}),a.origFuncs.push.apply(o,arguments)}}),this.origFuncs.unshift=o.unshift,Object.defineProperty(this.data,"unshift",{enumerable:!1,configurable:!0,value:function(){var f=Array.from(arguments);return!a.blocked&&c===a.currentVersion&&f.forEach(E=>{a.table.rowManager.addRowActual(E,!0)}),a.origFuncs.unshift.apply(o,arguments)}}),this.origFuncs.shift=o.shift,Object.defineProperty(this.data,"shift",{enumerable:!1,configurable:!0,value:function(){var f;return!a.blocked&&c===a.currentVersion&&a.data.length&&(f=a.table.rowManager.getRowFromDataObject(a.data[0]))&&f.deleteActual(),a.origFuncs.shift.call(o)}}),this.origFuncs.pop=o.pop,Object.defineProperty(this.data,"pop",{enumerable:!1,configurable:!0,value:function(){var f;return!a.blocked&&c===a.currentVersion&&a.data.length&&(f=a.table.rowManager.getRowFromDataObject(a.data[a.data.length-1]))&&f.deleteActual(),a.origFuncs.pop.call(o)}}),this.origFuncs.splice=o.splice,Object.defineProperty(this.data,"splice",{enumerable:!1,configurable:!0,value:function(){var F,f=Array.from(arguments),E=f[0]<0?o.length+f[0]:f[0],R=f[1],O=!!f[2]&&f.slice(2);if(!a.blocked&&c===a.currentVersion){if(O&&((F=!!o[E]&&a.table.rowManager.getRowFromDataObject(o[E]))?O.forEach(dt=>{a.table.rowManager.addRowActual(dt,!0,F,!0)}):(O=O.slice().reverse()).forEach(dt=>{a.table.rowManager.addRowActual(dt,!0,!1,!0)})),0!==R){var J=o.slice(E,void 0===f[1]?f[1]:E+R);J.forEach((dt,Ft)=>{var qt=a.table.rowManager.getRowFromDataObject(dt);qt&&qt.deleteActual(Ft!==J.length-1)})}(O||0!==R)&&a.table.rowManager.reRenderInPosition()}return a.origFuncs.splice.apply(o,arguments)}})}unwatchData(){if(!1!==this.data)for(var o in this.origFuncs)Object.defineProperty(this.data,o,{enumerable:!0,configurable:!0,writable:!0,value:this.origFuncs.key})}watchRow(o){var a=o.getData();for(var c in this.blocked=!0,a)this.watchKey(o,a,c);this.table.options.dataTree&&this.watchTreeChildren(o),this.blocked=!1}watchTreeChildren(o){var a=o.getData()[this.table.options.dataTreeChildField],c={};function f(){this.table.modules.dataTree.initializeRow(o),this.table.modules.dataTree.layoutRow(o),this.table.rowManager.refreshActiveData("tree",!1,!0)}a&&(c.push=a.push,Object.defineProperty(a,"push",{enumerable:!1,configurable:!0,value:()=>{var E=c.push.apply(a,arguments);return f(),E}}),c.unshift=a.unshift,Object.defineProperty(a,"unshift",{enumerable:!1,configurable:!0,value:()=>{var E=c.unshift.apply(a,arguments);return f(),E}}),c.shift=a.shift,Object.defineProperty(a,"shift",{enumerable:!1,configurable:!0,value:()=>{var E=c.shift.call(a);return f(),E}}),c.pop=a.pop,Object.defineProperty(a,"pop",{enumerable:!1,configurable:!0,value:()=>{var E=c.pop.call(a);return f(),E}}),c.splice=a.splice,Object.defineProperty(a,"splice",{enumerable:!1,configurable:!0,value:()=>{var E=c.splice.apply(a,arguments);return f(),E}}))}watchKey(o,a,c){var f=Object.getOwnPropertyDescriptor(a,c),E=a[c],R=this.currentVersion;Object.defineProperty(a,c,{set:O=>{if(E=O,!this.blocked&&R===this.currentVersion){var F={};F[c]=O,o.updateData(F)}f.set&&f.set(O)},get:()=>(f.get&&f.get(),E)})}unwatchRow(o){var a=o.getData();for(var c in a)Object.defineProperty(a,c,{value:a[c]})}block(){this.blocked=!0}unblock(){this.blocked=!1}}return g.moduleName="reactiveData",g})(),qf=(()=>{class g extends Eo{constructor(o){super(o),this.startColumn=!1,this.startX=!1,this.startWidth=!1,this.handle=null,this.prevHandle=null,this.registerColumnOption("resizable",!0)}initialize(){this.subscribe("cell-layout",this.layoutCellHandles.bind(this)),this.subscribe("column-init",this.layoutColumnHeader.bind(this))}layoutCellHandles(o){"row"===o.row.type&&this.initializeColumn("cell",o.column,o.element)}layoutColumnHeader(o){this.initializeColumn("header",o,o.element)}initializeColumn(o,a,c){var f=this,R=a.definition.resizable;if("header"===o&&(a.modules.resize={variableHeight:"textarea"==a.definition.formatter||a.definition.variableHeight}),!0===R||R==o){var O=document.createElement("div");O.className="tabulator-col-resize-handle";var F=document.createElement("div");F.className="tabulator-col-resize-handle prev",O.addEventListener("click",function(Ft){Ft.stopPropagation()});var J=function(Ft){var qt=a.getLastColumn();qt&&f._checkResizability(qt)&&(f.startColumn=a,f._mouseDown(Ft,qt,O))};O.addEventListener("mousedown",J),O.addEventListener("touchstart",J,{passive:!0}),O.addEventListener("dblclick",function(Ft){var qt=a.getLastColumn();qt&&f._checkResizability(qt)&&(Ft.stopPropagation(),qt.reinitializeWidth(!0))}),F.addEventListener("click",function(Ft){Ft.stopPropagation()});var dt=function(Ft){var qt,Ee,Ae;(qt=a.getFirstColumn())&&(Ae=(Ee=f.table.columnManager.findColumnIndex(qt))>0&&f.table.columnManager.getColumnByIndex(Ee-1))&&f._checkResizability(Ae)&&(f.startColumn=a,f._mouseDown(Ft,Ae,F))};F.addEventListener("mousedown",dt),F.addEventListener("touchstart",dt,{passive:!0}),F.addEventListener("dblclick",function(Ft){var qt,Ee,Ae;(qt=a.getFirstColumn())&&(Ae=(Ee=f.table.columnManager.findColumnIndex(qt))>0&&f.table.columnManager.getColumnByIndex(Ee-1))&&f._checkResizability(Ae)&&(Ft.stopPropagation(),Ae.reinitializeWidth(!0))}),c.appendChild(O),c.appendChild(F)}}_checkResizability(o){return o.definition.resizable}_mouseDown(o,a,c){var f=this;function E(O){a.setWidth(f.table.rtl?f.startWidth-((void 0===O.screenX?O.touches[0].screenX:O.screenX)-f.startX):f.startWidth+((void 0===O.screenX?O.touches[0].screenX:O.screenX)-f.startX)),f.table.columnManager.renderer.rerenderColumns(!0),!f.table.browserSlow&&a.modules.resize&&a.modules.resize.variableHeight&&a.checkCellHeights()}function R(O){f.startColumn.modules.edit&&(f.startColumn.modules.edit.blocked=!1),f.table.browserSlow&&a.modules.resize&&a.modules.resize.variableHeight&&a.checkCellHeights(),document.body.removeEventListener("mouseup",R),document.body.removeEventListener("mousemove",E),c.removeEventListener("touchmove",E),c.removeEventListener("touchend",R),f.table.element.classList.remove("tabulator-block-select"),f.dispatch("column-resized",a),f.table.externalEvents.dispatch("columnResized",a.getComponent())}f.table.element.classList.add("tabulator-block-select"),o.stopPropagation(),f.startColumn.modules.edit&&(f.startColumn.modules.edit.blocked=!0),f.startX=void 0===o.screenX?o.touches[0].screenX:o.screenX,f.startWidth=a.getWidth(),document.body.addEventListener("mousemove",E),document.body.addEventListener("mouseup",R),c.addEventListener("touchmove",E,{passive:!0}),c.addEventListener("touchend",R)}}return g.moduleName="resizeColumns",g})(),tg=(()=>{class g extends Eo{constructor(o){super(o),this.startColumn=!1,this.startY=!1,this.startHeight=!1,this.handle=null,this.prevHandle=null,this.registerTableOption("resizableRows",!1)}initialize(){this.table.options.resizableRows&&this.subscribe("row-layout-after",this.initializeRow.bind(this))}initializeRow(o){var a=this,c=o.getElement(),f=document.createElement("div");f.className="tabulator-row-resize-handle";var E=document.createElement("div");E.className="tabulator-row-resize-handle prev",f.addEventListener("click",function(F){F.stopPropagation()});var R=function(F){a.startRow=o,a._mouseDown(F,o,f)};f.addEventListener("mousedown",R),f.addEventListener("touchstart",R,{passive:!0}),E.addEventListener("click",function(F){F.stopPropagation()});var O=function(F){var J=a.table.rowManager.prevDisplayRow(o);J&&(a.startRow=J,a._mouseDown(F,J,E))};E.addEventListener("mousedown",O),E.addEventListener("touchstart",O,{passive:!0}),c.appendChild(f),c.appendChild(E)}_mouseDown(o,a,c){var f=this;function E(O){a.setHeight(f.startHeight+((void 0===O.screenY?O.touches[0].screenY:O.screenY)-f.startY))}function R(O){document.body.removeEventListener("mouseup",E),document.body.removeEventListener("mousemove",E),c.removeEventListener("touchmove",E),c.removeEventListener("touchend",R),f.table.element.classList.remove("tabulator-block-select"),this.dispatchExternal("rowResized",a.getComponent())}f.table.element.classList.add("tabulator-block-select"),o.stopPropagation(),f.startY=void 0===o.screenY?o.touches[0].screenY:o.screenY,f.startHeight=a.getHeight(),document.body.addEventListener("mousemove",E),document.body.addEventListener("mouseup",R),c.addEventListener("touchmove",E,{passive:!0}),c.addEventListener("touchend",R)}}return g.moduleName="resizeRows",g})(),Qd=(()=>{class g extends Eo{constructor(o){super(o),this.binding=!1,this.observer=!1,this.containerObserver=!1,this.tableHeight=0,this.tableWidth=0,this.containerHeight=0,this.containerWidth=0,this.autoResize=!1,this.registerTableOption("autoResize",!0)}initialize(){if(this.table.options.autoResize){var a,o=this.table;this.tableHeight=o.element.clientHeight,this.tableWidth=o.element.clientWidth,o.element.parentNode&&(this.containerHeight=o.element.parentNode.clientHeight,this.containerWidth=o.element.parentNode.clientWidth),"undefined"!=typeof ResizeObserver&&"virtual"===o.rowManager.getRenderMode()?(this.autoResize=!0,this.observer=new ResizeObserver(c=>{if(!o.browserMobile||o.browserMobile&&!o.modules.edit.currentCell){var f=Math.floor(c[0].contentRect.height),E=Math.floor(c[0].contentRect.width);(this.tableHeight!=f||this.tableWidth!=E)&&(this.tableHeight=f,this.tableWidth=E,o.element.parentNode&&(this.containerHeight=o.element.parentNode.clientHeight,this.containerWidth=o.element.parentNode.clientWidth),this.table.columnManager.renderer.rerenderColumns(!0),o.redraw())}}),this.observer.observe(o.element),a=window.getComputedStyle(o.element),this.table.element.parentNode&&!this.table.rowManager.fixedHeight&&(a.getPropertyValue("max-height")||a.getPropertyValue("min-height"))&&(this.containerObserver=new ResizeObserver(c=>{if(!o.browserMobile||o.browserMobile&&!o.modules.edit.currentCell){var f=Math.floor(c[0].contentRect.height),E=Math.floor(c[0].contentRect.width);(this.containerHeight!=f||this.containerWidth!=E)&&(this.containerHeight=f,this.containerWidth=E,this.tableHeight=o.element.clientHeight,this.tableWidth=o.element.clientWidth),o.columnManager.renderer.rerenderColumns(!0),o.redraw()}}),this.containerObserver.observe(this.table.element.parentNode)),this.subscribe("table-resize",this.tableResized.bind(this))):(this.binding=function(){(!o.browserMobile||o.browserMobile&&!o.modules.edit.currentCell)&&(o.columnManager.renderer.rerenderColumns(!0),o.redraw())},window.addEventListener("resize",this.binding)),this.subscribe("table-destroy",this.clearBindings.bind(this))}}tableResized(){this.table.rowManager.redraw()}clearBindings(){this.binding&&window.removeEventListener("resize",this.binding),this.observer&&this.observer.unobserve(this.table.element),this.containerObserver&&this.containerObserver.unobserve(this.table.element.parentNode)}}return g.moduleName="resizeTable",g})(),Um=(()=>{class g extends Eo{constructor(o){super(o),this.columns=[],this.hiddenColumns=[],this.mode="",this.index=0,this.collapseFormatter=[],this.collapseStartOpen=!0,this.collapseHandleColumn=!1,this.registerTableOption("responsiveLayout",!1),this.registerTableOption("responsiveLayoutCollapseStartOpen",!0),this.registerTableOption("responsiveLayoutCollapseUseFormatters",!0),this.registerTableOption("responsiveLayoutCollapseFormatter",!1),this.registerColumnOption("responsive")}initialize(){this.table.options.responsiveLayout&&(this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("column-show",this.updateColumnVisibility.bind(this)),this.subscribe("column-hide",this.updateColumnVisibility.bind(this)),this.subscribe("columns-loaded",this.initializeResponsivity.bind(this)),this.subscribe("column-moved",this.initializeResponsivity.bind(this)),this.subscribe("column-add",this.initializeResponsivity.bind(this)),this.subscribe("column-delete",this.initializeResponsivity.bind(this)),this.subscribe("table-redrawing",this.tableRedraw.bind(this)),"collapse"===this.table.options.responsiveLayout&&(this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-layout",this.layoutRow.bind(this))))}tableRedraw(o){-1===["fitColumns","fitDataStretch"].indexOf(this.layoutMode())&&(o||this.update())}initializeResponsivity(){var o=[];this.mode=this.table.options.responsiveLayout,this.collapseFormatter=this.table.options.responsiveLayoutCollapseFormatter||this.formatCollapsedData,this.collapseStartOpen=this.table.options.responsiveLayoutCollapseStartOpen,this.hiddenColumns=[],this.table.columnManager.columnsByIndex.forEach(function(a,c){a.modules.responsive&&a.modules.responsive.order&&a.modules.responsive.visible&&(a.modules.responsive.index=c,o.push(a),!a.visible&&"collapse"===self.mode&&self.hiddenColumns.push(a))}),o=(o=o.reverse()).sort(function(a,c){return c.modules.responsive.order-a.modules.responsive.order||c.modules.responsive.index-a.modules.responsive.index}),this.columns=o,"collapse"===this.mode&&this.generateCollapsedContent();for(let a of this.table.columnManager.columnsByIndex)if("responsiveCollapse"==a.definition.formatter){this.collapseHandleColumn=a;break}this.collapseHandleColumn&&(this.hiddenColumns.length?this.collapseHandleColumn.show():this.collapseHandleColumn.hide())}initializeColumn(o){var a=o.getDefinition();o.modules.responsive={order:void 0===a.responsive?1:a.responsive,visible:!1!==a.visible}}initializeRow(o){var a;"calc"!==o.type&&((a=document.createElement("div")).classList.add("tabulator-responsive-collapse"),o.modules.responsiveLayout={element:a,open:this.collapseStartOpen},this.collapseStartOpen||(a.style.display="none"))}layoutRow(o){var a=o.getElement();o.modules.responsiveLayout&&(a.appendChild(o.modules.responsiveLayout.element),this.generateCollapsedRowContent(o))}updateColumnVisibility(o,a){!a&&o.modules.responsive&&(o.modules.responsive.visible=o.visible,this.initialize())}hideColumn(o){var a=this.hiddenColumns.length;o.hide(!1,!0),"collapse"===this.mode&&(this.hiddenColumns.unshift(o),this.generateCollapsedContent(),this.collapseHandleColumn&&!a&&this.collapseHandleColumn.show())}showColumn(o){var a;o.show(!1,!0),o.setWidth(o.getWidth()),"collapse"===this.mode&&((a=this.hiddenColumns.indexOf(o))>-1&&this.hiddenColumns.splice(a,1),this.generateCollapsedContent(),this.collapseHandleColumn&&!this.hiddenColumns.length&&this.collapseHandleColumn.hide())}update(){for(var o=this,a=!0;a;){let c="fitColumns"==o.table.modules.layout.getMode()?o.table.columnManager.getFlexBaseWidth():o.table.columnManager.getWidth(),f=(o.table.options.headerVisible?o.table.columnManager.element.clientWidth:o.table.element.clientWidth)-c;if(f<0){let E=o.columns[o.index];E?(o.hideColumn(E),o.index++):a=!1}else{let E=o.columns[o.index-1];E&&f>0&&f>=E.getWidth()?(o.showColumn(E),o.index--):a=!1}o.table.rowManager.activeRowsCount||o.table.rowManager.renderEmptyScroll()}}generateCollapsedContent(){var o=this;this.table.rowManager.getDisplayRows().forEach(function(c){o.generateCollapsedRowContent(c)})}generateCollapsedRowContent(o){var a,c;if(o.modules.responsiveLayout){for(a=o.modules.responsiveLayout.element;a.firstChild;)a.removeChild(a.firstChild);(c=this.collapseFormatter(this.generateCollapsedRowData(o)))&&a.appendChild(c)}}generateCollapsedRowData(o){var E,a=this,c=o.getData(),f=[];return this.hiddenColumns.forEach(function(R){var O=R.getFieldValue(c);R.definition.title&&R.field&&(R.modules.format&&a.table.options.responsiveLayoutCollapseUseFormatters?(E={value:!1,data:{},getValue:function(){return O},getData:function(){return c},getElement:function(){return document.createElement("div")},getRow:function(){return o.getComponent()},getColumn:function(){return R.getComponent()}},f.push({field:R.field,title:R.definition.title,value:R.modules.format.formatter.call(a.table.modules.format,E,R.modules.format.params,function(J){J()})})):f.push({field:R.field,title:R.definition.title,value:O}))}),f}formatCollapsedData(o){var a=document.createElement("table");return o.forEach(function(c){var O,f=document.createElement("tr"),E=document.createElement("td"),R=document.createElement("td"),F=document.createElement("strong");E.appendChild(F),this.langBind("columns|"+c.field,function(J){F.innerText=J||c.title}),c.value instanceof Node?((O=document.createElement("div")).appendChild(c.value),R.appendChild(O)):R.innerHTML=c.value,f.appendChild(E),f.appendChild(R),a.appendChild(f)},this),Object.keys(o).length?a:""}}return g.moduleName="responsiveLayout",g})(),Bp=(()=>{class g extends Eo{constructor(o){super(o),this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],this.headerCheckboxElement=null,this.registerTableOption("selectable","highlight"),this.registerTableOption("selectableRangeMode","drag"),this.registerTableOption("selectableRollingSelection",!0),this.registerTableOption("selectablePersistence",!0),this.registerTableOption("selectableCheck",function(a,c){return!0}),this.registerTableFunction("selectRow",this.selectRows.bind(this)),this.registerTableFunction("deselectRow",this.deselectRows.bind(this)),this.registerTableFunction("toggleSelectRow",this.toggleRow.bind(this)),this.registerTableFunction("getSelectedRows",this.getSelectedRows.bind(this)),this.registerTableFunction("getSelectedData",this.getSelectedData.bind(this)),this.registerComponentFunction("row","select",this.selectRows.bind(this)),this.registerComponentFunction("row","deselect",this.deselectRows.bind(this)),this.registerComponentFunction("row","toggleSelect",this.toggleRow.bind(this)),this.registerComponentFunction("row","isSelected",this.isRowSelected.bind(this))}initialize(){!1!==this.table.options.selectable&&(this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-deleting",this.rowDeleted.bind(this)),this.subscribe("rows-wipe",this.clearSelectionData.bind(this)),this.subscribe("rows-retrieve",this.rowRetrieve.bind(this)),this.table.options.selectable&&this.table.options.selectablePersistence&&this.subscribe("data-refeshing",this.deselectRows.bind(this)))}rowRetrieve(o,a){return"selected"===o?this.selectedRows:a}rowDeleted(o){this._deselectRow(o,!0)}clearSelectionData(o){this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],!0!==o&&this._rowSelectionChanged()}initializeRow(o){var a=this,c=o.getElement(),f=function(){setTimeout(function(){a.selecting=!1},50),document.body.removeEventListener("mouseup",f)};o.modules.select={selected:!1},a.table.options.selectableCheck.call(this.table,o.getComponent())?(c.classList.add("tabulator-selectable"),c.classList.remove("tabulator-unselectable"),a.table.options.selectable&&"highlight"!=a.table.options.selectable&&("click"===a.table.options.selectableRangeMode?c.addEventListener("click",function(E){if(E.shiftKey){a.table._clearSelection(),a.lastClickedRow=a.lastClickedRow||o;var R=a.table.rowManager.getDisplayRowIndex(a.lastClickedRow),O=a.table.rowManager.getDisplayRowIndex(o),F=R<=O?R:O,J=R>=O?R:O,Ft=a.table.rowManager.getDisplayRows().slice(0).splice(F,J-F+1);E.ctrlKey||E.metaKey?(Ft.forEach(function(qt){qt!==a.lastClickedRow&&(!0===a.table.options.selectable||a.isRowSelected(o)||a.selectedRows.length<a.table.options.selectable)&&a.toggleRow(qt)}),a.lastClickedRow=o):(a.deselectRows(void 0,!0),!0!==a.table.options.selectable&&Ft.length>a.table.options.selectable&&(Ft=Ft.slice(0,a.table.options.selectable)),a.selectRows(Ft)),a.table._clearSelection()}else E.ctrlKey||E.metaKey?(a.toggleRow(o),a.lastClickedRow=o):(a.deselectRows(void 0,!0),a.selectRows(o),a.lastClickedRow=o)}):(c.addEventListener("click",function(E){(!a.table.modExists("edit")||!a.table.modules.edit.getCurrentCell())&&a.table._clearSelection(),a.selecting||a.toggleRow(o)}),c.addEventListener("mousedown",function(E){if(E.shiftKey)return a.table._clearSelection(),a.selecting=!0,a.selectPrev=[],document.body.addEventListener("mouseup",f),document.body.addEventListener("keyup",f),a.toggleRow(o),!1}),c.addEventListener("mouseenter",function(E){a.selecting&&(a.table._clearSelection(),a.toggleRow(o),a.selectPrev[1]==o&&a.toggleRow(a.selectPrev[0]))}),c.addEventListener("mouseout",function(E){a.selecting&&(a.table._clearSelection(),a.selectPrev.unshift(o))})))):(c.classList.add("tabulator-unselectable"),c.classList.remove("tabulator-selectable"))}toggleRow(o){this.table.options.selectableCheck.call(this.table,o.getComponent())&&(o.modules.select&&o.modules.select.selected?this._deselectRow(o):this._selectRow(o))}selectRows(o){var a;switch(typeof o){case"undefined":this.table.rowManager.rows.forEach(c=>{this._selectRow(c,!0,!0)}),this._rowSelectionChanged();break;case"string":(a=this.table.rowManager.findRow(o))?this._selectRow(a,!0,!0):this.table.rowManager.getRows(o).forEach(c=>{this._selectRow(c,!0,!0)}),this._rowSelectionChanged();break;default:Array.isArray(o)?(o.forEach(c=>{this._selectRow(c,!0,!0)}),this._rowSelectionChanged()):this._selectRow(o,!1,!0)}}_selectRow(o,a,c){if(!isNaN(this.table.options.selectable)&&!0!==this.table.options.selectable&&!c&&this.selectedRows.length>=this.table.options.selectable){if(!this.table.options.selectableRollingSelection)return!1;this._deselectRow(this.selectedRows[0])}var f=this.table.rowManager.findRow(o);f?-1==this.selectedRows.indexOf(f)&&(f.getElement().classList.add("tabulator-selected"),f.modules.select||(f.modules.select={}),f.modules.select.selected=!0,f.modules.select.checkboxEl&&(f.modules.select.checkboxEl.checked=!0),this.selectedRows.push(f),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(f,!0),a||this.dispatchExternal("rowSelected",f.getComponent()),this._rowSelectionChanged(a)):a||console.warn("Selection Error - No such row found, ignoring selection:"+o)}isRowSelected(o){return-1!==this.selectedRows.indexOf(o)}deselectRows(o,a){var f,c=this;if(void 0===o){f=c.selectedRows.length;for(let E=0;E<f;E++)c._deselectRow(c.selectedRows[0],!0);c._rowSelectionChanged(a)}else Array.isArray(o)?(o.forEach(function(E){c._deselectRow(E,!0)}),c._rowSelectionChanged(a)):c._deselectRow(o,a)}_deselectRow(o,a){var E,c=this,f=c.table.rowManager.findRow(o);f?(E=c.selectedRows.findIndex(function(R){return R==f}))>-1&&(f.getElement().classList.remove("tabulator-selected"),f.modules.select||(f.modules.select={}),f.modules.select.selected=!1,f.modules.select.checkboxEl&&(f.modules.select.checkboxEl.checked=!1),c.selectedRows.splice(E,1),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(f,!1),a||this.dispatchExternal("rowDeselected",f.getComponent()),c._rowSelectionChanged(a)):a||console.warn("Deselection Error - No such row found, ignoring selection:"+o)}getSelectedData(){var o=[];return this.selectedRows.forEach(function(a){o.push(a.getData())}),o}getSelectedRows(){var o=[];return this.selectedRows.forEach(function(a){o.push(a.getComponent())}),o}_rowSelectionChanged(o){this.headerCheckboxElement&&(0===this.selectedRows.length?(this.headerCheckboxElement.checked=!1,this.headerCheckboxElement.indeterminate=!1):this.table.rowManager.rows.length===this.selectedRows.length?(this.headerCheckboxElement.checked=!0,this.headerCheckboxElement.indeterminate=!1):(this.headerCheckboxElement.indeterminate=!0,this.headerCheckboxElement.checked=!1)),o||this.dispatchExternal("rowSelectionChanged",this.getSelectedData(),this.getSelectedRows())}registerRowSelectCheckbox(o,a){o._row.modules.select||(o._row.modules.select={}),o._row.modules.select.checkboxEl=a}registerHeaderSelectCheckbox(o){this.headerCheckboxElement=o}childRowSelection(o,a){var c=this.table.modules.dataTree.getChildren(o,!0);if(a)for(let f of c)this._selectRow(f,!0);else for(let f of c)this._deselectRow(f,!0)}}return g.moduleName="selectRow",g})();function Cd(g,l,o,a,c,f,E){var R=window.DateTime||luxon.DateTime,O=E.format||"dd/MM/yyyy HH:mm:ss",F=E.alignEmptyValues,J=0;if(void 0!==R){if(g=R.fromFormat(g,O),l=R.fromFormat(l,O),g.isValid){if(l.isValid)return g-l;J=1}else J=l.isValid?-1:0;return("top"===F&&"desc"===f||"bottom"===F&&"asc"===f)&&(J*=-1),J}console.error("Sort Error - 'datetime' sorter is dependant on luxon.js")}var Vm={number:function(g,l,o,a,c,f,E){var R=E.alignEmptyValues,O=E.decimalSeparator,F=E.thousandSeparator,J=0;if(g=String(g),l=String(l),F&&(g=g.split(F).join(""),l=l.split(F).join("")),O&&(g=g.split(O).join("."),l=l.split(O).join(".")),g=parseFloat(g),l=parseFloat(l),isNaN(g))J=isNaN(l)?0:-1;else{if(!isNaN(l))return g-l;J=1}return("top"===R&&"desc"===f||"bottom"===R&&"asc"===f)&&(J*=-1),J},string:function(g,l,o,a,c,f,E){var F,R=E.alignEmptyValues,O=0;if(g){if(l){switch(typeof E.locale){case"boolean":E.locale&&(F=this.langLocale());break;case"string":F=E.locale}return String(g).toLowerCase().localeCompare(String(l).toLowerCase(),F)}O=1}else O=l?-1:0;return("top"===R&&"desc"===f||"bottom"===R&&"asc"===f)&&(O*=-1),O},date:function(g,l,o,a,c,f,E){return E.format||(E.format="dd/MM/yyyy"),Cd.call(this,g,l,o,a,c,f,E)},time:function(g,l,o,a,c,f,E){return E.format||(E.format="HH:mm"),Cd.call(this,g,l,o,a,c,f,E)},datetime:Cd,boolean:function(g,l,o,a,c,f,E){return(!0===g||"true"===g||"True"===g||1===g?1:0)-(!0===l||"true"===l||"True"===l||1===l?1:0)},array:function(g,l,o,a,c,f,E){var F=E.type||"length",J=E.alignEmptyValues,dt=0;function Ft(qt){switch(F){case"length":return qt.length;case"sum":return qt.reduce(function(Ee,Ae){return Ee+Ae});case"max":return Math.max.apply(null,qt);case"min":return Math.min.apply(null,qt);case"avg":return qt.reduce(function(Ee,Ae){return Ee+Ae})/qt.length}}if(Array.isArray(g)){if(Array.isArray(l))return(g?Ft(g):0)-(l?Ft(l):0);J=1}else J=Array.isArray(l)?-1:0;return("top"===J&&"desc"===f||"bottom"===J&&"asc"===f)&&(dt*=-1),dt},exists:function(g,l,o,a,c,f,E){return(void 0===g?0:1)-(void 0===l?0:1)},alphanum:function(g,l,o,a,c,f,E){var R,O,F,J,Ft,dt=0,qt=/(\d+)|(\D+)/g,Ee=/\d/,Ae=E.alignEmptyValues,We=0;if(g||0===g){if(l||0===l){if(isFinite(g)&&isFinite(l))return g-l;if((R=String(g).toLowerCase())===(O=String(l).toLowerCase()))return 0;if(!Ee.test(R)||!Ee.test(O))return R>O?1:-1;for(R=R.match(qt),O=O.match(qt),Ft=R.length>O.length?O.length:R.length;dt<Ft;)if((F=R[dt])!==(J=O[dt++]))return isFinite(F)&&isFinite(J)?("0"===F.charAt(0)&&(F="."+F),"0"===J.charAt(0)&&(J="."+J),F-J):F>J?1:-1;return R.length>O.length}We=1}else We=l||0===l?-1:0;return("top"===Ae&&"desc"===f||"bottom"===Ae&&"asc"===f)&&(We*=-1),We}},Wp={integer:function(g,l,o){return""===l||null==l||"number"==typeof(l=Number(l))&&isFinite(l)&&Math.floor(l)===l},float:function(g,l,o){return""===l||null==l||"number"==typeof(l=Number(l))&&isFinite(l)&&l%1!=0},numeric:function(g,l,o){return""===l||null==l||!isNaN(l)},string:function(g,l,o){return""===l||null==l||isNaN(l)},max:function(g,l,o){return""===l||null==l||parseFloat(l)<=o},min:function(g,l,o){return""===l||null==l||parseFloat(l)>=o},starts:function(g,l,o){return""===l||null==l||String(l).toLowerCase().startsWith(String(o).toLowerCase())},ends:function(g,l,o){return""===l||null==l||String(l).toLowerCase().endsWith(String(o).toLowerCase())},minLength:function(g,l,o){return""===l||null==l||String(l).length>=o},maxLength:function(g,l,o){return""===l||null==l||String(l).length<=o},in:function(g,l,o){return""===l||null==l||("string"==typeof o&&(o=o.split("|")),""===l||o.indexOf(l)>-1)},regex:function(g,l,o){return""===l||null==l||new RegExp(o).test(l)},unique:function(g,l,o){if(""===l||null==l)return!0;var a=!0,c=g.getData(),f=g.getColumn()._getSelf();return this.table.rowManager.rows.forEach(function(E){var R=E.getData();R!==c&&l==f.getFieldValue(R)&&(a=!1)}),a},required:function(g,l,o){return""!==l&&null!=l}},ld=Object.freeze({__proto__:null,AccessorModule:Cp,AjaxModule:y,ClipboardModule:Ut,ColumnCalcsModule:wu,DataTreeModule:yl,DownloadModule:zd,EditModule:Yd,ExportModule:Ed,FilterModule:Rp,FormatModule:kp,FrozenColumnsModule:Lp,FrozenRowsModule:Gf,GroupRowsModule:Np,HistoryModule:Kd,HtmlTableImportModule:jf,InteractionModule:Yf,KeybindingsModule:Xf,MenuModule:Kf,MoveColumnsModule:Jf,MoveRowsModule:Xh,MutatorModule:Zf,PageModule:Td,PersistenceModule:$d,PrintModule:Zd,ReactiveDataModule:Fp,ResizeColumnsModule:qf,ResizeRowsModule:tg,ResizeTableModule:Qd,ResponsiveLayoutModule:Um,SelectRowModule:Bp,SortModule:(()=>{class g extends Eo{constructor(o){super(o),this.sortList=[],this.changed=!1,this.registerTableOption("sortMode","local"),this.registerTableOption("initialSort",!1),this.registerTableOption("columnHeaderSortMulti",!0),this.registerTableOption("sortOrderReverse",!1),this.registerTableOption("headerSortElement","<div class='tabulator-arrow'></div>"),this.registerColumnOption("sorter"),this.registerColumnOption("sorterParams"),this.registerColumnOption("headerSort",!0),this.registerColumnOption("headerSortStartingDir"),this.registerColumnOption("headerSortTristate")}initialize(){this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("table-built",this.tableBuilt.bind(this)),this.registerDataHandler(this.sort.bind(this),20),this.registerTableFunction("setSort",this.userSetSort.bind(this)),this.registerTableFunction("getSorters",this.getSort.bind(this)),this.registerTableFunction("clearSort",this.clearSort.bind(this)),"remote"===this.table.options.sortMode&&this.subscribe("data-params",this.remoteSortParams.bind(this))}tableBuilt(){this.table.options.initialSort&&this.setSort(this.table.options.initialSort)}remoteSortParams(o,a,c,f){var E=this.getSort();return E.forEach(R=>{delete R.column}),f.sort=E,f}userSetSort(o,a){this.setSort(o,a),this.refreshSort()}clearSort(){this.clear(),this.refreshSort()}initializeColumn(o){var c,f,a=!1;switch(typeof o.definition.sorter){case"string":g.sorters[o.definition.sorter]?a=g.sorters[o.definition.sorter]:console.warn("Sort Error - No such sorter found: ",o.definition.sorter);break;case"function":a=o.definition.sorter}o.modules.sort={sorter:a,dir:"none",params:o.definition.sorterParams||{},startingDir:o.definition.headerSortStartingDir||"asc",tristate:o.definition.headerSortTristate},!1!==o.definition.headerSort&&((c=o.getElement()).classList.add("tabulator-sortable"),(f=document.createElement("div")).classList.add("tabulator-col-sorter"),"object"==typeof this.table.options.headerSortElement?f.appendChild(this.table.options.headerSortElement):f.innerHTML=this.table.options.headerSortElement,o.titleHolderElement.appendChild(f),o.modules.sort.element=f,c.addEventListener("click",E=>{var R="",O=[],F=!1;if(o.modules.sort){if(o.modules.sort.tristate)R="none"==o.modules.sort.dir?o.modules.sort.startingDir:o.modules.sort.dir==o.modules.sort.startingDir?"asc"==o.modules.sort.dir?"desc":"asc":"none";else switch(o.modules.sort.dir){case"asc":R="desc";break;case"desc":R="asc";break;default:R=o.modules.sort.startingDir}this.table.options.columnHeaderSortMulti&&(E.shiftKey||E.ctrlKey)?((F=(O=this.getSort()).findIndex(J=>J.field===o.getField()))>-1?(O[F].dir=R,F!=O.length-1&&(F=O.splice(F,1)[0],"none"!=R&&O.push(F))):"none"!=R&&O.push({column:o,dir:R}),this.setSort(O)):"none"==R?this.clear():this.setSort(o,R),this.refreshSort()}}))}refreshSort(){"remote"===this.table.options.sortMode?this.reloadData():this.refreshData()}hasChanged(){var o=this.changed;return this.changed=!1,o}getSort(){var a=[];return this.sortList.forEach(function(c){c.column&&a.push({column:c.column.getComponent(),field:c.column.getField(),dir:c.dir})}),a}setSort(o,a){var c=this,f=[];Array.isArray(o)||(o=[{column:o,dir:a}]),o.forEach(function(E){var R;(R=c.table.columnManager.findColumn(E.column))?(E.column=R,f.push(E),c.changed=!0):console.warn("Sort Warning - Sort field does not exist and is being ignored: ",E.column)}),c.sortList=f,this.dispatch("sort-changed")}clear(){this.setSort([])}findSorter(o){var E,a=this.table.rowManager.activeRows[0],c="string";if(a&&(a=a.getData(),o.getField()))switch(E=o.getFieldValue(a),typeof E){case"undefined":c="string";break;case"boolean":c="boolean";break;default:isNaN(E)||""===E?E.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)&&(c="alphanum"):c="number"}return g.sorters[c]}sort(o){var a=this,c=this.table.options.sortOrderReverse?a.sortList.slice().reverse():a.sortList,f=[],E=[];return this.subscribedExternal("dataSorting")&&this.dispatchExternal("dataSorting",a.getSort()),a.clearColumnHeaders(),"remote"!==this.table.options.sortMode?(c.forEach(function(R,O){var F=R.column.modules.sort;R.column&&F&&(F.sorter||(F.sorter=a.findSorter(R.column)),R.params="function"==typeof F.params?F.params(R.column.getComponent(),R.dir):F.params,f.push(R)),a.setColumnHeader(R.column,R.dir)}),f.length&&a._sortItems(o,f)):c.forEach(function(R,O){a.setColumnHeader(R.column,R.dir)}),this.subscribedExternal("dataSorted")&&(o.forEach(R=>{E.push(R.getComponent())}),this.dispatchExternal("dataSorted",a.getSort(),E)),o}clearColumnHeaders(){this.table.columnManager.getRealColumns().forEach(function(o){o.modules.sort&&(o.modules.sort.dir="none",o.getElement().setAttribute("aria-sort","none"))})}setColumnHeader(o,a){o.modules.sort.dir=a,o.getElement().setAttribute("aria-sort",a)}_sortItems(o,a){var c=a.length-1;o.sort((f,E)=>{for(var R,O=c;O>=0;O--){let F=a[O];if(0!==(R=this._sortRow(f,E,F.column,F.dir,F.params)))break}return R})}_sortRow(o,a,c,f,E){var R,O,F="asc"==f?o:a,J="asc"==f?a:o;return o=void 0!==(o=c.getFieldValue(F.getData()))?o:"",a=void 0!==(a=c.getFieldValue(J.getData()))?a:"",R=F.getComponent(),O=J.getComponent(),c.modules.sort.sorter.call(this,o,a,R,O,c.getComponent(),f,E)}}return g.moduleName="sort",g.sorters=Vm,g})(),ValidateModule:(()=>{class g extends Eo{constructor(o){super(o),this.invalidCells=[],this.registerTableOption("validationMode","blocking"),this.registerColumnOption("validator"),this.registerTableFunction("getInvalidCells",this.getInvalidCells.bind(this)),this.registerTableFunction("clearCellValidation",this.userClearCellValidation.bind(this)),this.registerTableFunction("validate",this.userValidate.bind(this)),this.registerComponentFunction("cell","isValid",this.cellIsValid.bind(this)),this.registerComponentFunction("cell","clearValidation",this.clearValidation.bind(this)),this.registerComponentFunction("cell","validate",this.cellValidate.bind(this)),this.registerComponentFunction("column","validate",this.columnValidate.bind(this)),this.registerComponentFunction("row","validate",this.rowValidate.bind(this))}initialize(){this.subscribe("cell-delete",this.clearValidation.bind(this)),this.subscribe("column-layout",this.initializeColumnCheck.bind(this))}cellIsValid(o){return!o.modules.validate||!o.modules.validate.invalid}cellValidate(o){return this.validate(o.column.modules.validate,o,o.getValue())}columnValidate(o){var a=[];return o.cells.forEach(function(c){this.cellValidate(c)||a.push(c.getComponent())}),!a.length||a}rowValidate(o){var a=[];return o.cells.forEach(function(c){this.cellValidate(c)||a.push(c.getComponent())}),!a.length||a}userClearCellValidation(o){o||(o=this.getInvalidCells()),Array.isArray(o)||(o=[o]),o.forEach(a=>{this.clearValidation(a._getSelf())})}userValidate(o){var a=[];return this.table.rowManager.rows.forEach(function(c){var f=c.validate();!0!==f&&(a=a.concat(f))}),!a.length||a}initializeColumnCheck(o){void 0!==o.definition.validator&&this.initializeColumn(o)}initializeColumn(o){var f,a=this,c=[];o.definition.validator&&(Array.isArray(o.definition.validator)?o.definition.validator.forEach(function(E){(f=a._extractValidator(E))&&c.push(f)}):(f=this._extractValidator(o.definition.validator))&&c.push(f),o.modules.validate=!!c.length&&c)}_extractValidator(o){var a,c,f;switch(typeof o){case"string":return(f=o.indexOf(":"))>-1?(a=o.substring(0,f),c=o.substring(f+1)):a=o,this._buildValidator(a,c);case"function":return this._buildValidator(o);case"object":return this._buildValidator(o.type,o.parameters)}}_buildValidator(o,a){var c="function"==typeof o?o:g.validators[o];return c?{type:"function"==typeof o?"function":o,func:c,params:a}:(console.warn("Validator Setup Error - No matching validator found:",o),!1)}validate(o,a,c){var f=this,E=[],R=this.invalidCells.indexOf(a);return o&&o.forEach(function(O){O.func.call(f,a.getComponent(),c,O.params)||E.push({type:O.type,parameters:O.params})}),E=!E.length||E,a.modules.validate||(a.modules.validate={}),!0===E?(a.modules.validate.invalid=!1,a.getElement().classList.remove("tabulator-validation-fail"),R>-1&&this.invalidCells.splice(R,1)):(a.modules.validate.invalid=!0,"manual"!==this.table.options.validationMode&&a.getElement().classList.add("tabulator-validation-fail"),-1==R&&this.invalidCells.push(a)),E}getInvalidCells(){var o=[];return this.invalidCells.forEach(a=>{o.push(a.getComponent())}),o}clearValidation(o){var a;o.modules.validate&&o.modules.validate.invalid&&(o.getElement().classList.remove("tabulator-validation-fail"),o.modules.validate.invalid=!1,(a=this.invalidCells.indexOf(o))>-1&&this.invalidCells.splice(a,1))}}return g.moduleName="validate",g.validators=Wp,g})()}),ng={debugEventsExternal:!1,debugEventsInternal:!1,debugInvalidOptions:!0,height:!1,minHeight:!1,maxHeight:!1,columnMaxWidth:!1,columnHeaderVertAlign:"top",columns:[],columnDefaults:{},data:!1,autoColumns:!1,autoColumnsDefinitions:!1,nestedFieldSeparator:".",tooltipGenerationMode:"load",footerElement:!1,index:"id",textDirection:"auto",addRowPos:"bottom",headerVisible:!0,renderVertical:"virtual",renderHorizontal:"basic",renderVerticalBuffer:0,scrollToRowPosition:"top",scrollToRowIfVisible:!0,scrollToColumnPosition:"left",scrollToColumnIfVisible:!0,rowFormatter:!1,rowFormatterPrint:null,rowFormatterClipboard:null,rowFormatterHtmlOutput:null,placeholder:!1,dataLoader:!0,dataLoaderLoading:!1,dataLoaderError:!1,dataSendParams:{},dataReceiveParams:{}};class wd{constructor(l,o){this.table=l,this.msgType=o,this.registeredDefaults={}}register(l,o){this.registeredDefaults[l]=o}generate(l,o={}){var a=Object.assign({},this.registeredDefaults);if(Object.assign(a,l),!1!==o.debugInvalidOptions||this.table.options.debugInvalidOptions)for(var c in o)a.hasOwnProperty(c)||console.warn("Invalid "+this.msgType+" option:",c);for(var c in a)c in o?a[c]=o[c]:Array.isArray(a[c])?a[c]=Object.assign([],a[c]):"object"==typeof a[c]&&null!==a[c]?a[c]=Object.assign({},a[c]):void 0===a[c]&&delete a[c];return a}}class cd extends Hc{constructor(l){super(l),this.elementVertical=l.rowManager.element,this.elementHorizontal=l.columnManager.element,this.tableElement=l.rowManager.tableElement,this.verticalFillMode="fit"}initialize(){}clearRows(){}clearColumns(){}reinitializeColumnWidths(l){}renderRows(){}renderColumns(){}rerenderRows(l){l&&l()}rerenderColumns(l,o){}renderRowCells(l){}rerenderRowCells(l,o){}scrollColumns(l,o){}scrollRows(l,o){}resize(){}scrollToRow(l){}scrollToRowNearestTop(l){}visibleRows(l){return[]}rows(){return this.table.rowManager.getDisplayRows()}styleRow(l,o){var a=l.getElement();o%2?(a.classList.add("tabulator-row-even"),a.classList.remove("tabulator-row-odd")):(a.classList.add("tabulator-row-odd"),a.classList.remove("tabulator-row-even"))}clear(){this.clearRows(),this.clearColumns()}render(){this.renderRows(),this.renderColumns()}rerender(l){this.rerenderRows(),this.rerenderColumns()}scrollToRowPosition(l,o,a){var c=this.rows().indexOf(l),f=l.getElement(),E=0;return new Promise((R,O)=>{if(c>-1){if(void 0===a&&(a=this.table.options.scrollToRowIfVisible),!a&&Es.elVisible(f)&&(E=Es.elOffset(f).top-Es.elOffset(this.elementVertical).top)>0&&E<this.elementVertical.clientHeight-f.offsetHeight)return!1;switch(void 0===o&&(o=this.table.options.scrollToRowPosition),"nearest"===o&&(o=this.scrollToRowNearestTop(l)?"top":"bottom"),this.scrollToRow(l),o){case"middle":case"center":this.elementVertical.scrollTop=this.elementVertical.scrollHeight-this.elementVertical.scrollTop==this.elementVertical.clientHeight?this.elementVertical.scrollTop+(f.offsetTop-this.elementVertical.scrollTop)-(this.elementVertical.scrollHeight-f.offsetTop)/2:this.elementVertical.scrollTop-this.elementVertical.clientHeight/2;break;case"bottom":this.elementVertical.scrollTop=this.elementVertical.scrollHeight-this.elementVertical.scrollTop==this.elementVertical.clientHeight?this.elementVertical.scrollTop-(this.elementVertical.scrollHeight-f.offsetTop)+f.offsetHeight:this.elementVertical.scrollTop-this.elementVertical.clientHeight+f.offsetHeight}R()}else console.warn("Scroll Error - Row not visible"),O("Scroll Error - Row not visible")})}}class jp extends cd{constructor(l){super(l)}renderRowCells(l){l.cells.forEach(o=>{l.element.appendChild(o.getElement()),o.cellRendered()})}reinitializeColumnWidths(l){l.forEach(function(o){o.reinitializeWidth()})}}class Yp extends cd{constructor(l){super(l),this.leftCol=0,this.rightCol=0,this.scrollLeft=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0,this.fitDataColAvg=0,this.window=200,this.initialized=!1,this.columns=[]}initialize(){this.compatabilityCheck()}compatabilityCheck(){var l=this.options("columns"),a=!0;return"fitDataTable"==this.options("layout")&&(console.warn("Horizontal Vitrual DOM is not compatible with fitDataTable layout mode"),a=!1),this.options("responsiveLayout")&&(console.warn("Horizontal Vitrual DOM is not compatible with responsive columns"),a=!1),this.options("rtl")&&(console.warn("Horizontal Vitrual DOM is not currently compatible with RTL text direction"),a=!1),l&&l.find(c=>c.frozen)&&(console.warn("Horizontal Vitrual DOM is not compatible with frozen columns"),a=!1),a}renderColumns(l,o){this.dataChange()}scrollColumns(l,o){this.scrollLeft!=l&&(this.scrollLeft=l,this.scroll(l-(this.vDomScrollPosLeft+this.window)))}rerenderColumns(l,o){var a={cols:this.columns,leftCol:this.leftCol,rightCol:this.rightCol};if(!l||this.initialized){this.clear(),this.scrollLeft=this.elementVertical.scrollLeft,this.vDomScrollPosLeft=this.scrollLeft-this.window,this.vDomScrollPosRight=this.scrollLeft+this.elementVertical.clientWidth+this.window;var c=0;this.table.columnManager.columnsByIndex.forEach(f=>{var E={};if(f.visible){var R=f.getWidth();E.leftPos=c,E.rightPos=c+R,E.width=R,"fitData"===this.options("layout")&&(E.fitDataCheck=!0),c+R>this.vDomScrollPosLeft&&c<this.vDomScrollPosRight?(-1==this.leftCol&&(this.leftCol=this.columns.length,this.vDomPadLeft=c),this.rightCol=this.columns.length):-1!==this.leftCol&&(this.vDomPadRight+=R),this.columns.push(f),f.modules.vdomHoz=E,c+=R}}),this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.initialized=!0,o||(!l||this.reinitChanged(a))&&this.renitializeRows(),this.elementVertical.scrollLeft=this.scrollLeft}}renderRowCells(l){this.initialized?this.initializeRow(l):l.cells.forEach(o=>{l.element.appendChild(o.getElement()),o.cellRendered()})}rerenderRowCells(l,o){this.reinitializeRow(l,o)}reinitializeColumnWidths(l){for(let o=this.leftCol;o<=this.rightCol;o++)this.columns[o].reinitializeWidth()}deinitialize(){this.initialized=!1}clear(){this.columns=[],this.leftCol=-1,this.rightCol=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0}dataChange(){var f,c,l=!1,o=0,a=0;if("fitData"===this.options("layout")){if(this.table.columnManager.columnsByIndex.forEach(E=>{!E.definition.width&&E.visible&&(l=!0)}),l&&l&&this.table.rowManager.getDisplayRows().length&&(this.vDomScrollPosRight=this.scrollLeft+this.elementVertical.clientWidth+this.window,c=this.chain("rows-sample",[1],[],()=>this.table.rowManager.getDisplayRows()[0])[0])){for(f=c.getElement(),c.generateCells(),this.tableElement.appendChild(f),a=0;a<c.cells.length;a++){let O=c.cells[a];if(f.appendChild(O.getElement()),O.column.reinitializeWidth(),(o+=O.column.getWidth())>this.vDomScrollPosRight)break}for(f.parentNode.removeChild(f),this.fitDataColAvg=Math.floor(o/(a+1));a<this.table.columnManager.columnsByIndex.length;a++)this.table.columnManager.columnsByIndex[a].setWidth(this.fitDataColAvg);this.rerenderColumns(!1,!0)}}else"fitColumns"===this.options("layout")&&(this.layoutRefresh(),this.rerenderColumns(!1,!0))}reinitChanged(l){var o=!0;return l.cols.length!==this.columns.length||l.leftCol!==this.leftCol||l.rightCol!==this.rightCol||(l.cols.forEach((a,c)=>{a!==this.columns[c]&&(o=!1)}),!o)}renitializeRows(){this.table.rowManager.getVisibleRows().forEach(o=>{this.reinitializeRow(o,!0)})}scroll(l){this.vDomScrollPosLeft+=l,this.vDomScrollPosRight+=l,l>.8*this.elementVertical.clientWidth?this.rerenderColumns():l>0?(this.addColRight(),this.removeColLeft()):(this.addColLeft(),this.removeColRight())}colPositionAdjust(l,o,a){for(let c=l;c<o;c++){let f=this.columns[c];f.modules.vdomHoz.leftPos+=a,f.modules.vdomHoz.rightPos+=a}}addColRight(){var l=this.columns[this.rightCol+1];l&&l.modules.vdomHoz.leftPos<=this.vDomScrollPosRight&&(this.table.rowManager.getVisibleRows().forEach(a=>{if("group"!==a.type){var c=a.getCell(l);a.getElement().appendChild(c.getElement()),c.cellRendered()}}),this.fitDataColActualWidthCheck(l),this.rightCol++,this.rightCol>=this.columns.length-1?this.vDomPadRight=0:this.vDomPadRight-=l.getWidth(),this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.addColRight())}addColLeft(){var l=this.columns[this.leftCol-1];l&&l.modules.vdomHoz.rightPos>=this.vDomScrollPosLeft&&(this.table.rowManager.getVisibleRows().forEach(c=>{if("group"!==c.type){var f=c.getCell(l);c.getElement().prepend(f.getElement()),f.cellRendered()}}),this.fitDataColActualWidthCheck(l),this.leftCol?this.vDomPadLeft-=l.getWidth():this.vDomPadLeft=0,this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.leftCol--,this.addColLeft())}removeColRight(l){var o;(l=this.columns[this.rightCol])&&l.modules.vdomHoz.leftPos>this.vDomScrollPosRight&&(o=this.table.rowManager.getVisibleRows(),l.modules.vdomHoz.visible=!1,o.forEach(a=>{if("group"!==a.type){var c=a.getCell(l);a.getElement().removeChild(c.getElement())}}),this.vDomPadRight+=l.getWidth(),this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.rightCol--,this.removeColRight())}removeColLeft(){var l=this.columns[this.leftCol];l&&l.modules.vdomHoz.rightPos<this.vDomScrollPosLeft&&(this.table.rowManager.getVisibleRows().forEach(a=>{if("group"!==a.type){var c=a.getCell(l);c.parentNode&&a.getElement().removeChild(c.getElement())}}),this.vDomPadLeft+=l.getWidth(),this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.leftCol++,this.removeColLeft())}fitDataColActualWidthCheck(l){var o,a;l.modules.vdomHoz.fitDataCheck&&(l.reinitializeWidth(),(a=(o=l.getWidth())-l.modules.vdomHoz.width)&&(l.modules.vdomHoz.rightPos+=a,l.modules.vdomHoz.width=o,this.colPositionAdjust(this.rightCol+2,this.columns.length,a)),l.modules.vdomHoz.fitDataCheck=!1)}initializeRow(l){if("group"!==l.type){l.modules.vdomHoz={leftCol:this.leftCol,rightCol:this.rightCol};for(let o=this.leftCol;o<=this.rightCol;o++){let a=this.columns[o];if(a&&a.visible){let c=l.getCell(a);l.getElement().appendChild(c.getElement()),c.cellRendered()}}}}reinitializeRow(l,o){if("group"!==l.type&&(o||!l.modules.vdomHoz||l.modules.vdomHoz.leftCol!==this.leftCol||l.modules.vdomHoz.rightCol!==this.rightCol)){for(var a=l.getElement();a.firstChild;)a.removeChild(a.firstChild);this.initializeRow(l)}}}class rg extends Hc{constructor(l){super(l),this.blockHozScrollEvent=!1,this.headersElement=null,this.element=null,this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.scrollLeft=0,this.optionsList=new wd(this.table,"column definition"),this.renderer=null}initialize(){this.initializeRenderer(),this.headersElement=this.createHeadersElement(),this.element=this.createHeaderElement(),this.element.insertBefore(this.headersElement,this.element.firstChild),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this))}initializeRenderer(){var l;(l="string"==typeof this.table.options.renderHorizontal?{virtual:Yp,basic:jp}[this.table.options.renderHorizontal]:this.table.options.renderHorizontal)?(this.renderer=new l(this.table,this.element,this.tableElement),this.renderer.initialize()):console.error("Unable to find matching renderer:",table.options.renderHorizontal)}createHeadersElement(){var l=document.createElement("div");return l.classList.add("tabulator-headers"),l.setAttribute("role","row"),l}createHeaderElement(){var l=document.createElement("div");return l.classList.add("tabulator-header"),l.setAttribute("role","rowgroup"),this.table.options.headerVisible||l.classList.add("tabulator-header-hidden"),l}getElement(){return this.element}getHeadersElement(){return this.headersElement}scrollHorizontal(l){var a=this.element.scrollWidth-this.table.element.clientWidth;this.element.scrollLeft=l,this.element.style.marginLeft=l>a?-(l-a)+"px":0,this.scrollLeft=l,this.renderer.scrollColumns(l)}generateColumnsFromRowData(l){var c,f,o=[],a=this.table.options.autoColumnsDefinitions;if(l&&l.length){for(var E in c=l[0]){let R={field:E,title:E},O=c[E];switch(typeof O){case"undefined":f="string";break;case"boolean":f="boolean";break;case"object":f=Array.isArray(O)?"array":"string";break;default:f=isNaN(O)||""===O?O.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)?"alphanum":"string":"number"}R.sorter=f,o.push(R)}if(a)switch(typeof a){case"function":this.table.options.columns=a.call(this.table,o);break;case"object":Array.isArray(a)?o.forEach(R=>{var O=a.find(F=>F.field===R.field);O&&Object.assign(R,O)}):o.forEach(R=>{a[R.field]&&Object.assign(R,a[R.field])}),this.table.options.columns=o}else this.table.options.columns=o;this.setColumns(this.table.options.columns)}}setColumns(l,o){for(;this.headersElement.firstChild;)this.headersElement.removeChild(this.headersElement.firstChild);this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.dispatch("columns-loading"),l.forEach((a,c)=>{this._addColumn(a)}),this._reIndexColumns(),this.dispatch("columns-loaded"),this.renderer.rerenderColumns(!1,!0),this.redraw(!0)}_addColumn(l,o,a){var c=new Hr(l,this),f=c.getElement(),E=a&&this.findColumnIndex(a);if(a&&E>-1){var R=a.getTopColumn(),O=this.columns.indexOf(R),F=R.getElement();o?(this.columns.splice(O,0,c),F.parentNode.insertBefore(f,F)):(this.columns.splice(O+1,0,c),F.parentNode.insertBefore(f,F.nextSibling))}else o?(this.columns.unshift(c),this.headersElement.insertBefore(c.getElement(),this.headersElement.firstChild)):(this.columns.push(c),this.headersElement.appendChild(c.getElement()));return c.columnRendered(),c}registerColumnField(l){l.definition.field&&(this.columnsByField[l.definition.field]=l)}registerColumnPosition(l){this.columnsByIndex.push(l)}_reIndexColumns(){this.columnsByIndex=[],this.columns.forEach(function(l){l.reRegisterPosition()})}verticalAlignHeaders(){var l=0;this.columns.forEach(o=>{var a;o.clearVerticalAlign(),(a=o.getHeight())>l&&(l=a)}),this.columns.forEach(o=>{o.verticalAlign(this.table.options.columnHeaderVertAlign,l)}),this.table.rowManager.adjustTableSize()}findColumn(l){return"object"!=typeof l?this.columnsByField[l]||!1:l instanceof Hr?l:l instanceof _r?l._getSelf()||!1:"undefined"!=typeof HTMLElement&&l instanceof HTMLElement&&this.columns.find(a=>a.element===l)||!1}getColumnByField(l){return this.columnsByField[l]}getColumnsByFieldRoot(l){var o=[];return Object.keys(this.columnsByField).forEach(a=>{a.split(".")[0]===l&&o.push(this.columnsByField[a])}),o}getColumnByIndex(l){return this.columnsByIndex[l]}getFirstVisibileColumn(l){return(l=this.columnsByIndex.findIndex(o=>o.visible))>-1&&this.columnsByIndex[l]}getColumns(){return this.columns}findColumnIndex(l){return this.columnsByIndex.findIndex(o=>l===o)}getRealColumns(){return this.columnsByIndex}traverse(l){this.columnsByIndex.forEach((o,a)=>{l(o,a)})}getDefinitions(l){var o=[];return this.columnsByIndex.forEach(a=>{(!l||l&&a.visible)&&o.push(a.getDefinition())}),o}getDefinitionTree(){var l=[];return this.columns.forEach(o=>{l.push(o.getDefinition(!0))}),l}getComponents(l){var o=[];return(l?this.columns:this.columnsByIndex).forEach(c=>{o.push(c.getComponent())}),o}getWidth(){var l=0;return this.columnsByIndex.forEach(o=>{o.visible&&(l+=o.getWidth())}),l}moveColumn(l,o,a){this.moveColumnActual(l,o,a),o.element.parentNode.insertBefore(l.element,o.element),a&&o.element.parentNode.insertBefore(o.element,l.element),this.verticalAlignHeaders(),this.table.rowManager.reinitialize()}moveColumnActual(l,o,a){this._moveColumnInArray(l.parent.isGroup?l.parent.columns:this.columns,l,o,a),this._moveColumnInArray(this.columnsByIndex,l,o,a,!0),this.renderer.rerenderColumns(!0),this.dispatch("column-moved",l,o,a),this.subscribedExternal("columnMoved")&&this.dispatchExternal("columnMoved",l.getComponent(),this.table.columnManager.getComponents())}_moveColumnInArray(l,o,a,c,f){var R,E=l.indexOf(o);E>-1&&(l.splice(E,1),(R=l.indexOf(a))>-1?c&&(R+=1):R=E,l.splice(R,0,o),f&&(this.chain("column-moving-rows",[o,a,c],null,[])||[]).concat(this.table.rowManager.rows).forEach(function(F){if(F.cells.length){var J=F.cells.splice(E,1)[0];F.cells.splice(R,0,J)}}))}scrollToColumn(l,o,a){var c=0,f=0,E=0,R=l.getElement();return new Promise((O,F)=>{if(void 0===o&&(o=this.table.options.scrollToColumnPosition),void 0===a&&(a=this.table.options.scrollToColumnIfVisible),l.visible){switch(o){case"middle":case"center":E=-this.element.clientWidth/2;break;case"right":E=R.clientWidth-this.headersElement.clientWidth}if(!a&&(f=R.offsetLeft)>0&&f+R.offsetWidth<this.element.clientWidth)return!1;c=R.offsetLeft+E,c=Math.max(Math.min(c,this.table.rowManager.element.scrollWidth-this.table.rowManager.element.clientWidth),0),this.table.rowManager.scrollHorizontal(c),this.scrollHorizontal(c),O()}else console.warn("Scroll Error - Column not visible"),F("Scroll Error - Column not visible")})}generateCells(l){var o=[];return this.columnsByIndex.forEach(a=>{o.push(a.generateCell(l))}),o}getFlexBaseWidth(){var l=this.table.element.clientWidth,o=0;return this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(l-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),this.columnsByIndex.forEach(function(a){var c,f,E;a.visible&&(c=a.definition.width||0,f=parseInt(a.minWidth),E="string"==typeof c?c.indexOf("%")>-1?l/100*parseInt(c):parseInt(c):c,o+=E>f?E:f)}),o}addColumn(l,o,a){return new Promise((c,f)=>{var E=this._addColumn(l,o,a);this._reIndexColumns(),this.dispatch("column-add",l,o,a),"fitColumns"!=this.layoutMode()&&E.reinitializeWidth(),this.redraw(!0),this.table.rowManager.reinitialize(),this.renderer.rerenderColumns(),c(E)})}deregisterColumn(l){var a,o=l.getField();o&&delete this.columnsByField[o],(a=this.columnsByIndex.indexOf(l))>-1&&this.columnsByIndex.splice(a,1),(a=this.columns.indexOf(l))>-1&&this.columns.splice(a,1),this.verticalAlignHeaders(),this.redraw()}redraw(l){Es.elVisible(this.element)&&this.verticalAlignHeaders(),l&&(this.table.rowManager.resetScroll(),this.table.rowManager.reinitialize()),this.confirm("table-redrawing",l)||this.layoutRefresh(),this.dispatch("table-redraw",l),this.table.footerManager.redraw()}}class tp extends cd{constructor(l){super(l),this.verticalFillMode="fill",this.scrollTop=0,this.scrollLeft=0,this.scrollTop=0,this.scrollLeft=0}clearRows(){for(var l=this.tableElement;l.firstChild;)l.removeChild(l.firstChild);l.scrollTop=0,l.scrollLeft=0,l.style.minWidth="",l.style.minHeight="",l.style.display="",l.style.visibility=""}renderRows(){var l=this.tableElement,o=!0;this.rows().forEach((a,c)=>{this.styleRow(a,c),l.appendChild(a.getElement()),a.initialize(!0),"group"!==a.type&&(o=!1)}),l.style.minWidth=o?this.table.columnManager.getWidth()+"px":""}rerenderRows(l){this.render(),l&&l()}scrollToRowNearestTop(l){var o=Es.elOffset(l.getElement()).top;return!(Math.abs(this.elementVertical.scrollTop-o)>Math.abs(this.elementVertical.scrollTop+this.elementVertical.clientHeight-o))}scrollToRow(l){var o=l.getElement();this.elementVertical.scrollTop=Es.elOffset(o).top-Es.elOffset(this.elementVertical).top+this.elementVertical.scrollTop}visibleRows(l){return this.rows()}}class og extends cd{constructor(l){super(l),this.verticalFillMode="fill",this.scrollTop=0,this.scrollLeft=0,this.vDomRowHeight=20,this.vDomTop=0,this.vDomBottom=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomMaxRenderChain=90,this.vDomWindowBuffer=0,this.vDomWindowMinTotalRows=20,this.vDomWindowMinMarginRows=5,this.vDomTopNewRows=[],this.vDomBottomNewRows=[]}clearRows(){for(var l=this.tableElement;l.firstChild;)l.removeChild(l.firstChild);l.style.paddingTop="",l.style.paddingBottom="",l.style.minWidth="",l.style.minHeight="",l.style.display="",l.style.visibility="",this.elementVertical.scrollTop=0,this.elementVertical.scrollLeft=0,this.scrollTop=0,this.scrollLeft=0,this.vDomTop=0,this.vDomBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0}renderRows(){this._virtualRenderFill()}rerenderRows(l){for(var o=this.elementVertical.scrollTop,a=!1,c=!1,f=this.table.rowManager.scrollLeft,E=this.rows(),R=this.vDomTop;R<=this.vDomBottom;R++)if(E[R]){var O=o-E[R].getElement().offsetTop;if(!(!1===c||Math.abs(O)<c))break;c=O,a=R}E.forEach(F=>{F.deinitializeHeight()}),l&&l(),this._virtualRenderFill(!1===a?this.rows.length-1:a,!0,c||0),this.scrollColumns(f)}scrollColumns(l){this.table.rowManager.scrollHorizontal(l)}scrollRows(l,o){var a=l-this.vDomScrollPosTop,c=l-this.vDomScrollPosBottom,f=2*this.vDomWindowBuffer,E=this.rows();if(this.scrollTop=l,-a>f||c>f){var R=this.table.rowManager.scrollLeft;this._virtualRenderFill(Math.floor(this.elementVertical.scrollTop/this.elementVertical.scrollHeight*E.length)),this.scrollColumns(R)}else o?(a<0&&this._addTopRow(E,-a),c<0&&(this.vDomScrollHeight-this.scrollTop>this.vDomWindowBuffer?this._removeBottomRow(E,-c):this.vDomScrollPosBottom=this.scrollTop)):(c>=0&&this._addBottomRow(E,c),a>=0&&(this.scrollTop>this.vDomWindowBuffer?this._removeTopRow(E,a):this.vDomScrollPosTop=this.scrollTop))}resize(){this.vDomWindowBuffer=this.table.options.renderVerticalBuffer||this.elementVertical.clientHeight}scrollToRowNearestTop(l){var o=this.rows().indexOf(l);return!(Math.abs(this.vDomTop-o)>Math.abs(this.vDomBottom-o))}scrollToRow(l){var o=this.rows().indexOf(l);o>-1&&this._virtualRenderFill(o,!0)}visibleRows(l){var o=this.elementVertical.scrollTop,a=this.elementVertical.clientHeight+o,c=!1,f=0,E=0,R=this.rows();if(l)f=this.vDomTop,E=this.vDomBottom;else for(var O=this.vDomTop;O<=this.vDomBottom;O++)if(R[O])if(c){if(!(a-R[O].getElement().offsetTop>=0))break;E=O}else if(o-R[O].getElement().offsetTop>=0)f=O;else{if(c=!0,!(a-R[O].getElement().offsetTop>=0))break;E=O}return R.slice(f,E+1)}_virtualRenderFill(l,o,a){var c=this.tableElement,f=this.elementVertical,E=0,R=0,O=0,F=0,J=0,dt=this.rows(),Ft=dt.length,qt=this.elementVertical.clientHeight;if(a=a||0,l=l||0){for(;c.firstChild;)c.removeChild(c.firstChild);(O=(Ft-l+1)*this.vDomRowHeight)<qt&&(l-=Math.ceil((qt-O)/this.vDomRowHeight))<0&&(l=0),l-=E=Math.min(Math.max(Math.floor(this.vDomWindowBuffer/this.vDomRowHeight),this.vDomWindowMinMarginRows),l)}else this.clear();if(Ft&&Es.elVisible(this.elementVertical)){for(this.vDomTop=l,this.vDomBottom=l-1;(R<=qt+this.vDomWindowBuffer||J<this.vDomWindowMinTotalRows)&&this.vDomBottom<Ft-1;){var We,Ee=this.vDomBottom+1,Ae=dt[Ee];this.styleRow(Ae,Ee),c.appendChild(Ae.getElement()),Ae.initialize(),Ae.heightInitialized||Ae.normalizeHeight(!0),We=Ae.getHeight(),J<E?F+=We:R+=We,We>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*We),this.vDomBottom++,J++}l?(this.vDomTopPad=o?this.vDomRowHeight*this.vDomTop+a:this.scrollTop-F,this.vDomBottomPad=this.vDomBottom==Ft-1?0:Math.max(this.vDomScrollHeight-this.vDomTopPad-R-F,0)):(this.vDomTopPad=0,this.vDomRowHeight=Math.floor((R+F)/J),this.vDomBottomPad=this.vDomRowHeight*(Ft-this.vDomBottom-1),this.vDomScrollHeight=F+R+this.vDomBottomPad-qt),c.style.paddingTop=this.vDomTopPad+"px",c.style.paddingBottom=this.vDomBottomPad+"px",o&&(this.scrollTop=this.vDomTopPad+F+a-(this.elementVertical.scrollWidth>this.elementVertical.clientWidth?this.elementVertical.offsetHeight-qt:0)),this.scrollTop=Math.min(this.scrollTop,this.elementVertical.scrollHeight-qt),this.elementVertical.scrollWidth>this.elementVertical.offsetWidth&&o&&(this.scrollTop+=this.elementVertical.offsetHeight-qt),this.vDomScrollPosTop=this.scrollTop,this.vDomScrollPosBottom=this.scrollTop,f.scrollTop=this.scrollTop,this.dispatch("render-virtual-fill")}}_addTopRow(l,o){for(var a=this.tableElement,c=[],f=0,E=this.vDomTop-1,R=0;this.vDomTop;){let F,J,O=l[E];if(!(O&&R<this.vDomMaxRenderChain))break;if(F=O.getHeight()||this.vDomRowHeight,J=O.initialized,!(o>=F))break;this.styleRow(O,E),a.insertBefore(O.getElement(),a.firstChild),(!O.initialized||!O.heightInitialized)&&c.push(O),O.initialize(),J||(F=O.getElement().offsetHeight,F>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*F)),o-=F,f+=F,this.vDomTop--,E--,R++}for(let O of c)O.clearCellHeight();this._quickNormalizeRowHeight(c),f&&(this.vDomTopPad-=f,this.vDomTopPad<0&&(this.vDomTopPad=E*this.vDomRowHeight),E<1&&(this.vDomTopPad=0),a.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop-=f)}_removeTopRow(l,o){for(var a=[],c=0,f=0;;){let R,E=l[this.vDomTop];if(!(E&&f<this.vDomMaxRenderChain))break;if(R=E.getHeight()||this.vDomRowHeight,!(o>=R))break;this.vDomTop++,o-=R,c+=R,a.push(E),f++}for(let E of a){let R=E.getElement();R.parentNode&&R.parentNode.removeChild(R)}c&&(this.vDomTopPad+=c,this.tableElement.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop+=this.vDomTop?c:c+this.vDomWindowBuffer)}_addBottomRow(l,o){for(var a=this.tableElement,c=[],f=0,E=this.vDomBottom+1,R=0;;){let F,J,O=l[E];if(!(O&&R<this.vDomMaxRenderChain))break;if(F=O.getHeight()||this.vDomRowHeight,J=O.initialized,!(o>=F))break;this.styleRow(O,E),a.appendChild(O.getElement()),(!O.initialized||!O.heightInitialized)&&c.push(O),O.initialize(),J||(F=O.getElement().offsetHeight,F>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*F)),o-=F,f+=F,this.vDomBottom++,E++,R++}for(let O of c)O.clearCellHeight();this._quickNormalizeRowHeight(c),f&&(this.vDomBottomPad-=f,(this.vDomBottomPad<0||E==l.length-1)&&(this.vDomBottomPad=0),a.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom+=f)}_removeBottomRow(l,o){for(var a=[],c=0,f=0;;){let R,E=l[this.vDomBottom];if(!(E&&f<this.vDomMaxRenderChain))break;if(R=E.getHeight()||this.vDomRowHeight,!(o>=R))break;this.vDomBottom--,o-=R,c+=R,a.push(E),f++}for(let E of a){let R=E.getElement();R.parentNode&&R.parentNode.removeChild(R)}c&&(this.vDomBottomPad+=c,this.vDomBottomPad<0&&(this.vDomBottomPad=0),this.tableElement.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom-=c)}_quickNormalizeRowHeight(l){for(let o of l)o.calcHeight();for(let o of l)o.setCellHeight()}}class sg extends Hc{constructor(l){super(l),this.element=this.createHolderElement(),this.tableElement=this.createTableElement(),this.heightFixer=this.createTableElement(),this.firstRender=!1,this.renderMode="virtual",this.fixedHeight=!1,this.rows=[],this.activeRowsPipeline=[],this.activeRows=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0,this.scrollTop=0,this.scrollLeft=0,this.rowNumColumn=!1,this.redrawBlock=!1,this.redrawBlockRestoreConfig=!1,this.redrawBlockRederInPosition=!1,this.dataPipeline=[],this.displayPipeline=[],this.renderer=null}createHolderElement(){var l=document.createElement("div");return l.classList.add("tabulator-tableholder"),l.setAttribute("tabindex",0),l.setAttribute("role","rowgroup"),l}createTableElement(){var l=document.createElement("div");return l.classList.add("tabulator-table"),l.setAttribute("role","rowgroup"),l}getElement(){return this.element}getTableElement(){return this.tableElement}getRowPosition(l,o){return o?this.activeRows.indexOf(l):this.rows.indexOf(l)}initialize(){this.initializeRenderer(),this.element.appendChild(this.tableElement),this.firstRender=!0,this.element.addEventListener("scroll",()=>{var l=this.element.scrollLeft,o=this.scrollLeft>l,a=this.element.scrollTop,c=this.scrollTop>a;this.scrollLeft!=l&&(this.scrollLeft=l,this.dispatch("scroll-horizontal",l,o),this.dispatchExternal("scrollHorizontal",l,o)),this.scrollTop!=a&&(this.scrollTop=a,this.renderer.scrollRows(a,c),this.dispatch("scroll-vertical",a,c),this.dispatchExternal("scrollVertical",a,c))})}findRow(l){return"object"!=typeof l?null!=l&&(this.rows.find(a=>a.data[this.table.options.index]==l)||!1):l instanceof Xs?l:l instanceof $r?l._getSelf()||!1:"undefined"!=typeof HTMLElement&&l instanceof HTMLElement&&this.rows.find(a=>a.getElement()===l)||!1}getRowFromDataObject(l){return this.rows.find(a=>a.data===l)||!1}getRowFromPosition(l,o){return o?this.activeRows[l]:this.rows[l]}scrollToRow(l,o,a){return this.renderer.scrollToRowPosition(l,o,a)}setData(l,o,a){return new Promise((c,f)=>{o&&this.getDisplayRows().length?this.table.options.pagination?this._setDataActual(l,!0):this.reRenderInPosition(()=>{this._setDataActual(l)}):(this.table.options.autoColumns&&a&&this.table.initialized&&this.table.columnManager.generateColumnsFromRowData(l),this.resetScroll(),this._setDataActual(l)),c()})}_setDataActual(l,o){this.dispatchExternal("dataProcessing",l),this._wipeElements(),Array.isArray(l)?(this.dispatch("data-processing",l),l.forEach((a,c)=>{if(a&&"object"==typeof a){var f=new Xs(a,this);this.rows.push(f)}else console.warn("Data Loading Warning - Invalid row data detected and ignored, expecting object but received:",a)}),this.refreshActiveData(!1,!1,o),this.dispatch("data-processed",l),this.dispatchExternal("dataProcessed",l)):console.error("Data Loading Error - Unable to process data due to invalid data type \nExpecting: array \nReceived: ",typeof l,"\nData:     ",l)}_wipeElements(){this.dispatch("rows-wipe"),this.rows.forEach(l=>{l.wipe()}),this.rows=[],this.activeRows=[],this.activeRowsPipeline=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0,this.adjustTableSize()}deleteRow(l,o){var a=this.rows.indexOf(l),c=this.activeRows.indexOf(l);c>-1&&this.activeRows.splice(c,1),a>-1&&this.rows.splice(a,1),this.setActiveRows(this.activeRows),this.displayRowIterator(f=>{var E=f.indexOf(l);E>-1&&f.splice(E,1)}),o||this.reRenderInPosition(),this.regenerateRowNumbers(),this.dispatchExternal("rowDeleted",l.getComponent()),this.displayRowsCount||this._showPlaceholder(),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.getData())}addRow(l,o,a,c){var f=this.addRowActual(l,o,a,c);return this.dispatch("row-added",f,l,o,a),f}addRows(l,o,a){var c=[];return new Promise((f,E)=>{o=this.findAddRowPos(o),Array.isArray(l)||(l=[l]),(void 0===a&&o||void 0!==a&&!o)&&l.reverse(),l.forEach((R,O)=>{var F=this.addRow(R,o,a,!0);c.push(F),this.dispatch("row-added",F,l,o,a)}),this.refreshActiveData(!1,!1,!0),this.regenerateRowNumbers(),c.length&&this._clearPlaceholder(),f(c)})}findAddRowPos(l){return void 0===l&&(l=this.table.options.addRowPos),"pos"===l&&(l=!0),"bottom"===l&&(l=!1),l}addRowActual(l,o,a,c){var O,F,f=l instanceof Xs?l:new Xs(l||{},this),E=this.findAddRowPos(o),R=-1;return a||(F=this.chain("row-adding-position",[f,E],null,{index:a,top:E}),a=F.index,E=F.top),void 0!==a&&(a=this.findRow(a)),(a=this.chain("row-adding-index",[f,a,E],null,a))&&(R=this.rows.indexOf(a)),a&&R>-1?(O=this.activeRows.indexOf(a),this.displayRowIterator(function(J){var dt=J.indexOf(a);dt>-1&&J.splice(E?dt:dt+1,0,f)}),O>-1&&this.activeRows.splice(E?O:O+1,0,f),this.rows.splice(E?R:R+1,0,f)):E?(this.displayRowIterator(function(J){J.unshift(f)}),this.activeRows.unshift(f),this.rows.unshift(f)):(this.displayRowIterator(function(J){J.push(f)}),this.activeRows.push(f),this.rows.push(f)),this.setActiveRows(this.activeRows),this.dispatchExternal("rowAdded",f.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()),c||this.reRenderInPosition(),f}moveRow(l,o,a){this.dispatch("row-move",l,o,a),this.moveRowActual(l,o,a),this.regenerateRowNumbers(),this.dispatch("row-moved",l,o,a),this.dispatchExternal("rowMoved",l.getComponent())}moveRowActual(l,o,a){this.moveRowInArray(this.rows,l,o,a),this.moveRowInArray(this.activeRows,l,o,a),this.displayRowIterator(c=>{this.moveRowInArray(c,l,o,a)}),this.dispatch("row-moving",l,o,a)}moveRowInArray(l,o,a,c){var f,E,O;if(o!==a&&((f=l.indexOf(o))>-1&&(l.splice(f,1),E=l.indexOf(a),l.splice(E>-1?c?E+1:E:f,0,o)),l===this.getDisplayRows())){O=E>f?E:f+1;for(let F=f<E?f:E;F<=O;F++)l[F]&&this.styleRow(l[F],F)}}clearData(){this.setData([])}getRowIndex(l){return this.findRowIndex(l,this.rows)}getDisplayRowIndex(l){var o=this.getDisplayRows().indexOf(l);return o>-1&&o}nextDisplayRow(l,o){var a=this.getDisplayRowIndex(l),c=!1;return!1!==a&&a<this.displayRowsCount-1&&(c=this.getDisplayRows()[a+1]),!c||c instanceof Xs&&"row"==c.type?c:this.nextDisplayRow(c,o)}prevDisplayRow(l,o){var a=this.getDisplayRowIndex(l),c=!1;return a&&(c=this.getDisplayRows()[a-1]),!o||!c||c instanceof Xs&&"row"==c.type?c:this.prevDisplayRow(c,o)}findRowIndex(l,o){var a;return!!((l=this.findRow(l))&&(a=o.indexOf(l),a>-1))&&a}getData(l,o){var a=[];return this.getRows(l).forEach(function(f){"row"==f.type&&a.push(f.getData(o||"data"))}),a}getComponents(l){var o=[];return this.getRows(l).forEach(function(c){o.push(c.getComponent())}),o}getDataCount(l){return this.getRows(l).length}scrollHorizontal(l){this.scrollLeft=l,this.element.scrollLeft=l,this.dispatch("scroll-horizontal",l)}registerDataPipelineHandler(l,o){void 0!==o?(this.dataPipeline.push({handler:l,priority:o}),this.dataPipeline.sort((a,c)=>a.priority-c.priority)):console.error("Data pipeline handlers must have a priority in order to be registered")}registerDisplayPipelineHandler(l,o){void 0!==o?(this.displayPipeline.push({handler:l,priority:o}),this.displayPipeline.sort((a,c)=>a.priority-c.priority)):console.error("Display pipeline handlers must have a priority in order to be registered")}refreshActiveData(l,o,a){var c=this.table,f="",E=0,R=["all","dataPipeline","display","displayPipeline","end"];if("function"==typeof l)if((E=this.dataPipeline.findIndex(O=>O.handler===l))>-1)f="dataPipeline",o&&(E==this.dataPipeline.length-1?f="display":E++);else{if(!((E=this.displayPipeline.findIndex(O=>O.handler===l))>-1))return void console.error("Unable to refresh data, invalid handler provided",l);f="displayPipeline",o&&(E==this.displayPipeline.length-1?f="end":E++)}else f=l||"all",E=0;if(this.redrawBlock)(!this.redrawBlockRestoreConfig||this.redrawBlockRestoreConfig&&(this.redrawBlockRestoreConfig.stage===f&&E<this.redrawBlockRestoreConfig.index||R.indexOf(f)<R.indexOf(this.redrawBlockRestoreConfig.stage)))&&(this.redrawBlockRestoreConfig={handler:l,skipStage:o,renderInPosition:a,stage:f,index:E});else{switch(this.dispatch("data-refeshing"),l||(this.activeRowsPipeline[0]=this.rows.slice(0)),f){case"all":case"dataPipeline":for(let O=E;O<this.dataPipeline.length;O++){let F=this.dataPipeline[O].handler(this.activeRowsPipeline[O].slice(0));this.activeRowsPipeline[O+1]=F||this.activeRowsPipeline[O].slice(0)}this.setActiveRows(this.activeRowsPipeline[this.dataPipeline.length]),this.regenerateRowNumbers();case"display":E=0,this.resetDisplayRows();case"displayPipeline":for(let O=E;O<this.displayPipeline.length;O++){let F=this.displayPipeline[O].handler((O?this.getDisplayRows(O-1):this.activeRows).slice(0),a);this.setDisplayRows(F||this.getDisplayRows(O-1).slice(0),O)}}Es.elVisible(this.element)&&(a?this.reRenderInPosition():(l||this.table.columnManager.renderer.renderColumns(),this.renderTable(),c.options.layoutColumnsOnNewData&&this.table.columnManager.redraw(!0))),this.dispatch("data-refeshed")}}regenerateRowNumbers(){this.rowNumColumn&&this.activeRows.forEach(l=>{var o=l.getCell(this.rowNumColumn);o&&o._generateContents()})}setActiveRows(l){this.activeRows=l,this.activeRowsCount=this.activeRows.length}resetDisplayRows(){this.displayRows=[],this.displayRows.push(this.activeRows.slice(0)),this.displayRowsCount=this.displayRows[0].length}getNextDisplayIndex(){return this.displayRows.length}setDisplayRows(l,o){var a=!0;return o&&void 0!==this.displayRows[o]?(this.displayRows[o]=l,a=!0):(this.displayRows.push(l),a=o=this.displayRows.length-1),o==this.displayRows.length-1&&(this.displayRowsCount=this.displayRows[this.displayRows.length-1].length),a}getDisplayRows(l){return void 0===l?this.displayRows.length?this.displayRows[this.displayRows.length-1]:[]:this.displayRows[l]||[]}getVisibleRows(l){return this.renderer.visibleRows(!l)}displayRowIterator(l){this.activeRowsPipeline.forEach(l),this.displayRows.forEach(l),this.displayRowsCount=this.displayRows[this.displayRows.length-1].length}getRows(l){var o;switch(l){case"active":o=this.activeRows;break;case"display":o=this.table.rowManager.getDisplayRows();break;case"visible":o=this.getVisibleRows(!0);break;default:o=this.chain("rows-retrieve",l,null,this.rows)||this.rows}return o}reRenderInPosition(l){this.redrawBlock?l?l():this.redrawBlockRederInPosition=!0:this.renderer.rerenderRows(l)}initializeRenderer(){var l;(l="string"==typeof this.table.options.renderVertical?{virtual:og,basic:tp}[this.table.options.renderVertical]:this.table.options.renderVertical)?(this.renderer=new l(this.table,this.element,this.tableElement),this.renderer.initialize(),this.fixedHeight=!(!this.table.element.clientHeight&&!this.table.options.height)):console.error("Unable to find matching renderer:",table.options.renderVertical)}getRenderMode(){return this.renderMode}renderTable(){this.dispatchExternal("renderStarted"),this.element.scrollTop=0,this._clearTable(),this.displayRowsCount?(this.renderer.renderRows(),this.firstRender&&(this.firstRender=!1,this.layoutRefresh())):this.renderEmptyScroll(),this.fixedHeight||this.adjustTableSize(),this.dispatch("table-layout"),this.displayRowsCount||this._showPlaceholder(),this.dispatchExternal("renderComplete")}renderEmptyScroll(){this.table.options.placeholder?this.tableElement.style.display="none":this.tableElement.style.minWidth=this.table.columnManager.getWidth()+"px"}_clearTable(){this._clearPlaceholder(),this.scrollTop=0,this.scrollLeft=0,this.renderer.clearRows()}_showPlaceholder(){this.table.options.placeholder&&(this.table.options.placeholder.setAttribute("tabulator-render-mode",this.renderMode),this.getElement().appendChild(this.table.options.placeholder),this.table.options.placeholder.style.width=this.table.columnManager.getWidth()+"px")}_clearPlaceholder(){this.table.options.placeholder&&this.table.options.placeholder.parentNode&&this.table.options.placeholder.parentNode.removeChild(this.table.options.placeholder)}styleRow(l,o){var a=l.getElement();o%2?(a.classList.add("tabulator-row-even"),a.classList.remove("tabulator-row-odd")):(a.classList.add("tabulator-row-odd"),a.classList.remove("tabulator-row-even"))}normalizeHeight(){this.activeRows.forEach(function(l){l.normalizeHeight()})}adjustTableSize(){var l=this.element.clientHeight;if("fill"===this.renderer.verticalFillMode){let o=Math.floor(this.table.columnManager.getElement().getBoundingClientRect().height+(this.table.footerManager&&this.table.footerManager.active&&!this.table.footerManager.external?this.table.footerManager.getElement().getBoundingClientRect().height:0));this.fixedHeight?(this.element.style.minHeight="calc(100% - "+o+"px)",this.element.style.height="calc(100% - "+o+"px)",this.element.style.maxHeight="calc(100% - "+o+"px)"):(this.element.style.height="",this.element.style.height=this.table.element.clientHeight-o+"px",this.element.scrollTop=this.scrollTop),this.renderer.resize(),!this.fixedHeight&&l!=this.element.clientHeight&&(this.subscribed("table-resize")?this.dispatch("table-resize"):this.redraw())}}reinitialize(){this.rows.forEach(function(l){l.reinitialize(!0)})}blockRedraw(){this.redrawBlock=!0,this.redrawBlockRestoreConfig=!1}restoreRedraw(){this.redrawBlock=!1,this.redrawBlockRestoreConfig?(this.refreshActiveData(this.redrawBlockRestoreConfig.handler,this.redrawBlockRestoreConfig.skipStage,this.redrawBlockRestoreConfig.renderInPosition),this.redrawBlockRestoreConfig=!1):this.redrawBlockRederInPosition&&this.reRenderInPosition(),this.redrawBlockRederInPosition=!1}redraw(l){var o=this.scrollLeft;this.adjustTableSize(),this.table.tableWidth=this.table.element.clientWidth,l?this.renderTable():(this.reRenderInPosition(),this.scrollHorizontal(o),this.displayRowsCount||this.table.options.placeholder&&this.getElement().appendChild(this.table.options.placeholder))}resetScroll(){if(this.element.scrollLeft=0,this.element.scrollTop=0,"ie"===this.table.browser){var l=document.createEvent("Event");l.initEvent("scroll",!1,!0),this.element.dispatchEvent(l)}else this.element.dispatchEvent(new Event("scroll"))}}class Xp extends Hc{constructor(l){super(l),this.active=!1,this.element=this.createElement(),this.external=!1,this.links=[],this.initializeElement()}initialize(){this.initializeElement()}createElement(){var l=document.createElement("div");return l.classList.add("tabulator-footer"),l}initializeElement(){this.table.options.footerElement&&("string"==typeof this.table.options.footerElement?"<"===this.table.options.footerElement[0]?this.element.innerHTML=this.table.options.footerElement:(this.external=!0,this.element=document.querySelector(this.table.options.footerElement)):this.element=this.table.options.footerElement)}getElement(){return this.element}append(l,o){this.activate(o),this.element.appendChild(l),this.table.rowManager.adjustTableSize()}prepend(l,o){this.activate(o),this.element.insertBefore(l,this.element.firstChild),this.table.rowManager.adjustTableSize()}remove(l){l.parentNode.removeChild(l),this.deactivate()}deactivate(l){(!this.element.firstChild||l)&&(this.external||this.element.parentNode.removeChild(this.element),this.active=!1)}activate(l){this.active||(this.active=!0,this.external||(this.table.element.appendChild(this.getElement()),this.table.element.style.display="")),l&&this.links.push(l)}redraw(){this.links.forEach(function(l){l.footerRedraw()})}}class Kh extends Hc{constructor(l){super(l),this.el=this.table.element,this.abortClasses=["tabulator-headers","tabulator-table"],this.previousTargets={},this.listeners=["click","dblclick","contextmenu","mouseenter","mouseleave","mouseover","mouseout","mousemove","touchstart","touchend"],this.componentMap={"tabulator-cell":"cell","tabulator-row":"row","tabulator-group":"group","tabulator-col":"column"},this.buildListenerMap(),this.bindSubscriptionWatchers()}buildListenerMap(){var l={};this.listeners.forEach(o=>{l[o]={handler:null,components:[]}}),this.listeners=l}bindSubscriptionWatchers(){var l=Object.keys(this.listeners),o=Object.values(this.componentMap);for(let a of o)for(let c of l)this.subscriptionChange(a+"-"+c,this.subscriptionChanged.bind(this,a,c))}subscriptionChanged(l,o,a){var c=this.listeners[o].components,f=c.indexOf(l),E=!1;a?-1===f&&(c.push(l),E=!0):this.subscribed(l+"-"+o)||f>-1&&(c.splice(f,1),E=!0),E&&this.updateEventListeners()}updateEventListeners(){for(let l in this.listeners){let o=this.listeners[l];o.components.length?o.handler||(o.handler=this.track.bind(this,l),this.el.addEventListener(l,o.handler)):o.handler&&(this.el.removeEventListener(l,o.handler),o.handler=null)}}track(l,o){var a=o.composedPath&&o.composedPath()||o.path,c=this.findTargets(a);c=this.bindComponents(l,c),this.triggerEvents(l,o,c)}findTargets(l){var o={};let a=Object.keys(this.componentMap);for(let c of l){let f=c.classList?[...c.classList]:[];if(f.filter(O=>this.abortClasses.includes(O)).length)break;let R=f.filter(O=>a.includes(O));for(let O of R)o[this.componentMap[O]]=c}return o.group&&o.group===o.row&&delete o.row,o}bindComponents(l,o){var a=Object.keys(o).reverse(),c=this.listeners[l],f={};for(let E of a){let R,O=o[E],F=this.previousTargets[E];if(F&&F.target===O)R=F.component;else switch(E){case"row":case"group":(c.components.includes("row")||c.components.includes("cell"))&&(R=this.table.rowManager.getVisibleRows().find(dt=>dt.getElement()===O));break;case"column":c.components.includes("column")&&(R=this.table.columnManager.findColumn(O));break;case"cell":c.components.includes("cell")&&(R=o.row.findCell(O))}R&&(o[E]=R,f[E]={target:O,component:R})}return this.previousTargets=f,o}triggerEvents(l,o,a){var c=this.listeners[l];for(let f in a)a[f]&&c.components.includes(f)&&this.dispatch(f+"-"+l,o,a[f])}}class Kp{constructor(l){this.table=l,this.bindings={}}bind(l,o,a){this.bindings[l]||(this.bindings[l]={}),this.bindings[l][o]?console.warn("Unable to bind component handler, a matching function name is already bound",l,o,hanlder):this.bindings[l][o]=a}handle(l,o,a){if(this.bindings[l]&&this.bindings[l][a])return this.bindings[l][a].bind(null,o);"then"!==a&&"string"==typeof a&&!a.startsWith("_")&&console.error("The "+l+" component does not have a "+a+" function, have you checked that you have the correct Tabulator module installed?")}}class ag extends Hc{constructor(l){super(l),this.loaderElement=this.createLoaderElement(),this.msgElement=this.createMsgElement(),this.loadingElement=null,this.errorElement=null,this.requestOrder=0,this.loading=!1}initialize(){var l;this.loaderElement.appendChild(this.msgElement),this.table.options.dataLoaderLoading&&("string"==typeof this.table.options.dataLoaderLoading?((l=document.createElement("template")).innerHTML=this.table.options.dataLoaderLoading.trim(),this.loadingElement=l.firstElementChild):this.loadingElement=this.table.options.dataLoaderLoading),this.table.options.dataLoaderError&&("string"==typeof this.table.options.dataLoaderError?((l=document.createElement("template")).innerHTML=this.table.options.dataLoaderError.trim(),this.errorElement=l.firstElementChild):this.errorElement=this.table.options.dataLoaderError)}createLoaderElement(){var l=document.createElement("div");return l.classList.add("tabulator-loader"),l}createMsgElement(){var l=document.createElement("div");return l.classList.add("tabulator-loader-msg"),l.setAttribute("role","alert"),l}load(l,o,a,c,f){var E=++this.requestOrder;return this.dispatchExternal("dataLoading",l),l&&(0==l.indexOf("{")||0==l.indexOf("["))&&(l=JSON.parse(l)),this.confirm("data-loading",l,o,a,f)?(this.loading=!0,f||this.showLoader(),o=this.chain("data-params",[l,a,f],o||{},{}),o=this.mapParams(o,this.table.options.dataSendParams),this.chain("data-load",[l,o,a,f],Promise.resolve([])).then(F=>{!Array.isArray(F)&&"object"==typeof F&&(F=this.mapParams(F,this.objectInvert(this.table.options.dataReceiveParams)));var J=this.chain("data-loaded",F,null,F);E==this.requestOrder?(this.hideLoader(),!1!==J&&(this.dispatchExternal("dataLoaded",J),this.table.rowManager.setData(J,c,!c))):console.warn("Data Load Response Blocked - An active data load request was blocked by an attempt to change table data while the request was being made")}).catch(F=>{console.error("Data Load Error: ",F),this.dispatchExternal("dataLoadError",F),f||this.showError(),setTimeout(()=>{this.hideLoader()},3e3)}).finally(()=>{this.loading=!1})):(this.dispatchExternal("dataLoaded",l),l||(l=[]),this.table.rowManager.setData(l,c,!c),Promise.resolve())}mapParams(l,o){var a={};for(let c in l)a[o.hasOwnProperty(c)?o[c]:c]=l[c];return a}objectInvert(l){var o={};for(let a in l)o[l[a]]=a;return o}blockActiveLoad(){this.requestOrder++}showLoader(){if("function"==typeof this.table.options.dataLoader?this.table.options.dataLoader():this.table.options.dataLoader){for(this.hideLoader();this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.remove("tabulator-error"),this.msgElement.classList.add("tabulator-loading"),this.loadingElement?this.msgElement.appendChild(this.loadingElement):this.msgElement.innerHTML=this.langText("data|loading"),this.table.element.appendChild(this.loaderElement)}}showError(){for(this.hideLoader();this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.remove("tabulator-loading"),this.msgElement.classList.add("tabulator-error"),this.errorElement?this.msgElement.appendChild(this.errorElement):this.msgElement.innerHTML=this.langText("data|error"),this.table.element.appendChild(this.loaderElement)}hideLoader(){this.loaderElement.parentNode&&this.loaderElement.parentNode.removeChild(this.loaderElement)}}class lg{constructor(l,o,a){this.table=l,this.events={},this.optionsList=o||{},this.subscriptionNotifiers={},this.dispatch=a?this._debugDispatch.bind(this):this._dispatch.bind(this),this.debug=a}subscriptionChange(l,o){this.subscriptionNotifiers[l]||(this.subscriptionNotifiers[l]=[]),this.subscriptionNotifiers[l].push(o),this.subscribed(l)&&this._notifiySubscriptionChange(l,!0)}subscribe(l,o){this.events[l]||(this.events[l]=[]),this.events[l].push(o),this._notifiySubscriptionChange(l,!0)}unsubscribe(l,o){var a;if(this.events[l]){if(o){if(!((a=this.events[l].findIndex(c=>c===o))>-1))return void console.warn("Cannot remove event, no matching event found:",l,o);this.events[l].splice(a,1)}else delete this.events[l];this._notifiySubscriptionChange(l,!1)}else console.warn("Cannot remove event, no events set on:",l)}subscribed(l){return this.events[l]&&this.events[l].length}_notifiySubscriptionChange(l,o){var a=this.subscriptionNotifiers[l];a&&a.forEach(c=>{c(o)})}_dispatch(){var a,l=Array.from(arguments),o=l.shift();return this.events[o]&&this.events[o].forEach((c,f)=>{let E=c.apply(this.table,l);f||(a=E)}),a}_debugDispatch(){var l=Array.from(arguments),o=l[0];return l[0]="ExternalEvent:"+l[0],(!0===this.debug||this.debug.includes(o))&&console.log(...l),this._dispatch(...arguments)}}class Jh{constructor(l){this.events={},this.subscriptionNotifiers={},this.dispatch=l?this._debugDispatch.bind(this):this._dispatch.bind(this),this.chain=l?this._debugChain.bind(this):this._chain.bind(this),this.confirm=l?this._debugConfirm.bind(this):this._confirm.bind(this),this.debug=l}subscriptionChange(l,o){this.subscriptionNotifiers[l]||(this.subscriptionNotifiers[l]=[]),this.subscriptionNotifiers[l].push(o),this.subscribed(l)&&this._notifiySubscriptionChange(l,!0)}subscribe(l,o,a=1e4){this.events[l]||(this.events[l]=[]),this.events[l].push({callback:o,priority:a}),this.events[l].sort((c,f)=>c.priority-f.priority),this._notifiySubscriptionChange(l,!0)}unsubscribe(l,o){var a;if(this.events[l]){if(o){if(!((a=this.events[l].findIndex(c=>c.callback===o))>-1))return void console.warn("Cannot remove event, no matching event found:",l,o);this.events[l].splice(a,1)}this._notifiySubscriptionChange(l,!1)}else console.warn("Cannot remove event, no events set on:",l)}subscribed(l){return this.events[l]&&this.events[l].length}_chain(l,o,a,c){var f=a;return Array.isArray(o)||(o=[o]),this.subscribed(l)?(this.events[l].forEach((E,R)=>{f=E.callback.apply(this,o.concat([f]))}),f):"function"==typeof c?c():c}_confirm(l,o){var a=!1;return Array.isArray(o)||(o=[o]),this.subscribed(l)&&this.events[l].forEach((c,f)=>{c.callback.apply(this,o)&&(a=!0)}),a}_notifiySubscriptionChange(l,o){var a=this.subscriptionNotifiers[l];a&&a.forEach(c=>{c(o)})}_dispatch(){var l=Array.from(arguments),o=l.shift();this.events[o]&&this.events[o].forEach(a=>{a.callback.apply(this,l)})}_debugDispatch(){var l=Array.from(arguments),o=l[0];return l[0]="InternalEvent:"+o,(!0===this.debug||this.debug.includes(o))&&console.log(...l),this._dispatch(...arguments)}_debugChain(){var l=Array.from(arguments),o=l[0];return l[0]="InternalEvent:"+o,(!0===this.debug||this.debug.includes(o))&&console.log(...l),this._chain(...arguments)}_debugConfirm(){var l=Array.from(arguments),o=l[0];return l[0]="InternalEvent:"+o,(!0===this.debug||this.debug.includes(o))&&console.log(...l),this._confirm(...arguments)}}let Rd=(()=>{class g{static register(o){g.tables.push(o)}static deregister(o){var a=g.tables.indexOf(o);a>-1&&g.tables.splice(a,1)}static lookupTable(o,a){var f,E,c=[];if("string"==typeof o){if((f=document.querySelectorAll(o)).length)for(var R=0;R<f.length;R++)(E=g.matchElement(f[R]))&&c.push(E)}else"undefined"!=typeof HTMLElement&&o instanceof HTMLElement||o instanceof Lh?(E=g.matchElement(o))&&c.push(E):Array.isArray(o)?o.forEach(function(O){c=c.concat(g.lookupTable(O))}):a||console.warn("Table Connection Error - Invalid Selector",o);return c}static matchElement(o){return g.tables.find(function(a){return o instanceof Lh?a===o:a.element===o})}}return g.tables=[],g})();function Jp(g){g.forEach(function(l){l.reinitializeWidth()}),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()}var ep={fitData:function(g){this.table.columnManager.renderer.reinitializeColumnWidths(g),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitDataFill:Jp,fitDataTable:Jp,fitDataStretch:function(g){var l=0,o=this.table.rowManager.element.clientWidth,a=0,c=!1;g.forEach((f,E)=>{f.widthFixed||f.reinitializeWidth(),(this.table.options.responsiveLayout?f.modules.responsive.visible:f.visible)&&(c=f),f.visible&&(l+=f.getWidth())}),c?(a=o-l+c.getWidth(),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&(c.setWidth(0),this.table.modules.responsiveLayout.update()),a>0?c.setWidth(a):c.reinitializeWidth()):this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitColumns:function(g){var f,F,l=this.table.element.clientWidth,o=0,a=0,c=0,E=[],R=[],O=0,J=0;function dt(qt){return"string"==typeof qt?qt.indexOf("%")>-1?l/100*parseInt(qt):parseInt(qt):qt}function Ft(qt,Ee,Ae,We){var ze=[],Si=0,an=0,Gi=0,Ki=c,pn=0,mn=0,wn=[];function Pn(Qi){return Ae*(Qi.column.definition.widthGrow||1)}function bn(Qi){return dt(Qi.width)-Ae*(Qi.column.definition.widthShrink||0)}return qt.forEach(function(Qi,Bn){var dr=We?bn(Qi):Pn(Qi);Qi.column.minWidth>=dr?ze.push(Qi):Qi.column.maxWidth&&Qi.column.maxWidth<dr?(Qi.width=Qi.column.maxWidth,Ee-=Qi.column.maxWidth,(Ki-=We?Qi.column.definition.widthShrink||1:Qi.column.definition.widthGrow||1)&&(Ae=Math.floor(Ee/Ki))):(wn.push(Qi),mn+=We?Qi.column.definition.widthShrink||1:Qi.column.definition.widthGrow||1)}),ze.length?(ze.forEach(function(Qi){Si+=We?Qi.width-Qi.column.minWidth:Qi.column.minWidth,Qi.width=Qi.column.minWidth}),pn=(an=Ee-Si)-(Gi=mn?Math.floor(an/mn):an)*mn,pn+=Ft(wn,an,Gi,We)):(pn=mn?Ee-Math.floor(Ee/mn)*mn:Ee,wn.forEach(function(Qi){Qi.width=We?bn(Qi):Pn(Qi)})),pn}this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update(),this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(l-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),g.forEach(function(qt){var Ee,Ae,We;qt.visible&&(Ee=qt.definition.width,Ae=parseInt(qt.minWidth),Ee?(We=dt(Ee),o+=We>Ae?We:Ae,qt.definition.widthShrink&&(R.push({column:qt,width:We>Ae?We:Ae}),O+=qt.definition.widthShrink)):(E.push({column:qt,width:0}),c+=qt.definition.widthGrow||1))}),a=l-o,f=Math.floor(a/c),J=Ft(E,a,f,!1),E.length&&J>0&&(E[E.length-1].width+=+J),E.forEach(function(qt){a-=qt.width}),(F=Math.abs(J)+a)>0&&O&&(J=Ft(R,F,Math.floor(F/O),!0)),R.length&&(R[R.length-1].width-=J),E.forEach(function(qt){qt.column.setWidth(qt.width)}),R.forEach(function(qt){qt.column.setWidth(qt.width)})}},Zp={default:{groups:{item:"item",items:"items"},columns:{},data:{loading:"Loading",error:"Error"},pagination:{page_size:"Page Size",page_title:"Show Page",first:"First",first_title:"First Page",last:"Last",last_title:"Last Page",prev:"Prev",prev_title:"Prev Page",next:"Next",next_title:"Next Page",all:"All"},headerFilters:{default:"filter column...",columns:{}}}},pg=Object.freeze({__proto__:null,LayoutModule:(()=>{class g extends Eo{constructor(o){super(o,"layout"),this.mode=null,this.registerTableOption("layout","fitData"),this.registerTableOption("layoutColumnsOnNewData",!1),this.registerColumnOption("widthGrow"),this.registerColumnOption("widthShrink")}initialize(){var o=this.table.options.layout;g.modes[o]?this.mode=o:(console.warn("Layout Error - invalid mode set, defaulting to 'fitData' : "+o),this.mode="fitData"),this.table.element.setAttribute("tabulator-layout",this.mode)}getMode(){return this.mode}layout(){g.modes[this.mode].call(this,this.table.columnManager.columnsByIndex),this.dispatch("layout-refreshed")}}return g.moduleName="layout",g.modes=ep,g})(),LocalizeModule:(()=>{class g extends Eo{constructor(o){super(o),this.locale="default",this.lang=!1,this.bindings={},this.langList={},this.registerTableOption("locale",!1),this.registerTableOption("langs",{})}initialize(){this.langList=Es.deepClone(g.langs),!1!==this.table.options.columnDefaults.headerFilterPlaceholder&&this.setHeaderFilterPlaceholder(this.table.options.columnDefaults.headerFilterPlaceholder);for(let o in this.table.options.langs)this.installLang(o,this.table.options.langs[o]);this.setLocale(this.table.options.locale),this.registerTableFunction("setLocale",this.setLocale.bind(this)),this.registerTableFunction("getLocale",this.getLocale.bind(this)),this.registerTableFunction("getLang",this.getLang.bind(this))}setHeaderFilterPlaceholder(o){this.langList.default.headerFilters.default=o}setHeaderFilterColumnPlaceholder(o,a){this.langList.default.headerFilters.columns[o]=a,this.lang&&!this.lang.headerFilters.columns[o]&&(this.lang.headerFilters.columns[o]=a)}installLang(o,a){this.langList[o]?this._setLangProp(this.langList[o],a):this.langList[o]=a}_setLangProp(o,a){for(let c in a)o[c]&&"object"==typeof o[c]?this._setLangProp(o[c],a[c]):o[c]=a[c]}setLocale(o){if(!0===(o=o||"default")&&navigator.language&&(o=navigator.language.toLowerCase()),o&&!this.langList[o]){let c=o.split("-")[0];this.langList[c]?(console.warn("Localization Error - Exact matching locale not found, using closest match: ",o,c),o=c):(console.warn("Localization Error - Matching locale not found, using default: ",o),o="default")}this.locale=o,this.lang=Es.deepClone(this.langList.default||{}),"default"!=o&&function a(c,f){for(var E in c)"object"==typeof c[E]?(f[E]||(f[E]={}),a(c[E],f[E])):f[E]=c[E]}(this.langList[o],this.lang),this.dispatchExternal("localized",this.locale,this.lang),this._executeBindings()}getLocale(o){return this.locale}getLang(o){return o?this.langList[o]:this.lang}getText(o,a){var c=(o=a?o+"|"+a:o).split("|");return this._getLangElement(c,this.locale)||""}_getLangElement(o,a){var c=this.lang;return o.forEach(function(f){var E;c&&(c=void 0!==(E=c[f])&&E)}),c}bind(o,a){this.bindings[o]||(this.bindings[o]=[]),this.bindings[o].push(a),a(this.getText(o),this.lang)}_executeBindings(){for(let o in this.bindings)this.bindings[o].forEach(a=>{a(this.getText(o),this.lang)})}}return g.moduleName="localize",g.langs=Zp,g})(),CommsModule:(()=>{class g extends Eo{constructor(o){super(o)}initialize(){this.registerTableFunction("tableComms",this.receive.bind(this))}getConnections(o){var a=[];return Rd.lookupTable(o).forEach(f=>{this.table!==f&&a.push(f)}),a}send(o,a,c,f){var E=this.getConnections(o);E.forEach(R=>{R.tableComms(this.table.element,a,c,f)}),!E.length&&o&&console.warn("Table Connection Error - No tables matching selector found",o)}receive(o,a,c,f){if(this.table.modExists(a))return this.table.modules[a].commsReceived(o,c,f);console.warn("Inter-table Comms Error - no such module:",a)}}return g.moduleName="comms",g})()});class Qp{constructor(l,o){this.bindStaticFuctionality(l),this.bindModules(l,pg,!0),o&&this.bindModules(l,o)}bindStaticFuctionality(l){l.moduleBindings={},l.extendModule=function(o,a,c){if(l.moduleBindings[o]){var f=l.moduleBindings[o][a];if(f)if("object"==typeof c)for(let E in c)f[E]=c[E];else console.warn("Module Error - Invalid value type, it must be an object");else console.warn("Module Error - property does not exist:",a)}else console.warn("Module Error - module does not exist:",o)},l.registerModule=function(o){Array.isArray(o)||(o=[o]),o.forEach(a=>{l.registerModuleBinding(a)})},l.registerModuleBinding=function(o){l.moduleBindings[o.moduleName]=o},l.findTable=function(o){var a=Rd.lookupTable(o,!0);return!(Array.isArray(a)&&!a.length)&&a},l.prototype.bindModules=function(){for(var o in this.modules={},l.moduleBindings){let a=l.moduleBindings[o];this.modules[o]=new a(this),a.prototype.moduleCore?this.modulesCore[o]=this.modules[o]:this.modulesRegular[o]=this.modules[o]}}}bindModules(l,o,a){var c=Object.values(o);a&&c.forEach(f=>{f.prototype.moduleCore=!0}),l.registerModule(c)}}let Lh=(()=>{class g{constructor(o,a){this.options={},this.columnManager=null,this.rowManager=null,this.footerManager=null,this.vdomHoz=null,this.externalEvents=null,this.eventBus=null,this.interactionMonitor=!1,this.browser="",this.browserSlow=!1,this.browserMobile=!1,this.rtl=!1,this.originalElement=null,this.componentFunctionBinder=new Kp(this),this.dataLoader=!1,this.modules={},this.modulesCore={},this.modulesRegular={},this.optionsList=new wd(this,"table constructor"),this.initialized=!1,this.initializeElement(o)&&(this.initialzeCoreSystems(a),setTimeout(()=>{this._create()})),Rd.register(this)}initializeElement(o){return"undefined"!=typeof HTMLElement&&o instanceof HTMLElement?(this.element=o,!0):"string"==typeof o?(this.element=document.querySelector(o),!!this.element||(console.error("Tabulator Creation Error - no element found matching selector: ",o),!1)):(console.error("Tabulator Creation Error - Invalid element provided:",o),!1)}initialzeCoreSystems(o){this.columnManager=new rg(this),this.rowManager=new sg(this),this.footerManager=new Xp(this),this.dataLoader=new ag(this),this.bindModules(),this.options=this.optionsList.generate(g.defaultOptions,o),this._clearObjectPointers(),this._mapDepricatedFunctionality(),this.externalEvents=new lg(this,this.options,this.options.debugEventsExternal),this.eventBus=new Jh(this.options.debugEventsInternal),this.interactionMonitor=new Kh(this),this.dataLoader.initialize(),this.columnManager.initialize(),this.rowManager.initialize(),this.footerManager.initialize()}_mapDepricatedFunctionality(){}_clearSelection(){this.element.classList.add("tabulator-block-select"),window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty(),this.element.classList.remove("tabulator-block-select")}_create(){this.externalEvents.dispatch("tableBuilding"),this.eventBus.dispatch("table-building"),this._rtlCheck(),this._buildElement(),this._initializeTable(),this._loadInitialData(),this.initialized=!0,this.externalEvents.dispatch("tableBuilt")}_rtlCheck(){var o=window.getComputedStyle(this.element);switch(this.options.textDirection){case"auto":if("rtl"!==o.direction)break;case"rtl":this.element.classList.add("tabulator-rtl"),this.rtl=!0;break;case"ltr":this.element.classList.add("tabulator-ltr");default:this.rtl=!1}}_clearObjectPointers(){this.options.columns=this.options.columns.slice(0),this.options.data&&!this.options.reactiveData&&(this.options.data=this.options.data.slice(0))}_buildElement(){var c,o=this.element,a=this.options;if("TABLE"===o.tagName){this.originalElement=this.element,c=document.createElement("div");var f=o.attributes;for(var E in f)"object"==typeof f[E]&&c.setAttribute(f[E].name,f[E].value);o.parentNode.replaceChild(c,o),this.element=o=c}for(o.classList.add("tabulator"),o.setAttribute("role","grid");o.firstChild;)o.removeChild(o.firstChild);a.height&&(a.height=isNaN(a.height)?a.height:a.height+"px",o.style.height=a.height),!1!==a.minHeight&&(a.minHeight=isNaN(a.minHeight)?a.minHeight:a.minHeight+"px",o.style.minHeight=a.minHeight),!1!==a.maxHeight&&(a.maxHeight=isNaN(a.maxHeight)?a.maxHeight:a.maxHeight+"px",o.style.maxHeight=a.maxHeight)}_initializeTable(){var o=this.element,a=this.options;this.columnManager.initialize(),this.rowManager.initialize(),this._detectBrowser();for(let E in this.modulesCore)this.modulesCore[E].initialize();if("string"==typeof a.placeholder){var c=document.createElement("div");c.classList.add("tabulator-placeholder");var f=document.createElement("span");f.innerHTML=a.placeholder,c.appendChild(f),a.placeholder=c}o.appendChild(this.columnManager.getElement()),o.appendChild(this.rowManager.getElement()),a.footerElement&&this.footerManager.activate(),a.autoColumns&&a.data&&this.columnManager.generateColumnsFromRowData(this.options.data);for(let E in this.modulesRegular)this.modulesRegular[E].initialize();this.columnManager.setColumns(a.columns),this.eventBus.dispatch("table-built")}_loadInitialData(){this.dataLoader.load(this.options.data)}destroy(){var o=this.element;for(Rd.deregister(this),this.eventBus.dispatch("table-destroy"),this.rowManager.rows.forEach(function(a){a.wipe()}),this.rowManager.rows=[],this.rowManager.activeRows=[],this.rowManager.displayRows=[];o.firstChild;)o.removeChild(o.firstChild);o.classList.remove("tabulator")}_detectBrowser(){var o=navigator.userAgent||navigator.vendor||window.opera;o.indexOf("Trident")>-1?(this.browser="ie",this.browserSlow=!0):o.indexOf("Edge")>-1?(this.browser="edge",this.browserSlow=!0):o.indexOf("Firefox")>-1?(this.browser="firefox",this.browserSlow=!1):(this.browser="other",this.browserSlow=!1),this.browserMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(o)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(o.substr(0,4))}blockRedraw(){return this.rowManager.blockRedraw()}restoreRedraw(){return this.rowManager.restoreRedraw()}setDataFromLocalFile(o){return new Promise((a,c)=>{var f=document.createElement("input");f.type="file",f.accept=o||".json,application/json",f.addEventListener("change",E=>{var F,R=f.files[0],O=new FileReader;O.readAsText(R),O.onload=J=>{try{F=JSON.parse(O.result)}catch(dt){return console.warn("File Load Error - File contents is invalid JSON",dt),void c(dt)}this.setData(F).then(dt=>{a(dt)}).catch(dt=>{a(dt)})},O.onerror=J=>{console.warn("File Load Error - Unable to read file"),c()}}),f.click()})}setData(o,a,c){if(this.initialized)return this.dataLoader.load(o,a,c,!1);console.warn("setData failed - table not yet initialized. To set initial data please use the 'data' property in the table constructor.")}clearData(){this.dataLoader.blockActiveLoad(),this.rowManager.clearData()}getData(o){return this.rowManager.getData(o)}getDataCount(o){return this.rowManager.getDataCount(o)}replaceData(o,a,c){if(this.initialized)return this.dataLoader.load(o,a,c,!0,!0);console.warn("replaceData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}updateData(o){var a=0;if(this.initialized)return new Promise((c,f)=>{this.dataLoader.blockActiveLoad(),"string"==typeof o&&(o=JSON.parse(o)),o?o.forEach(E=>{var R=this.rowManager.findRow(E[this.options.index]);R&&(a++,R.updateData(E).then(()=>{--a||c()}))}):(console.warn("Update Error - No data provided"),f("Update Error - No data provided"))});console.warn("updateData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}addData(o,a,c){if(this.initialized)return new Promise((f,E)=>{this.dataLoader.blockActiveLoad(),"string"==typeof o&&(o=JSON.parse(o)),o?this.rowManager.addRows(o,a,c).then(R=>{var O=[];R.forEach(function(F){O.push(F.getComponent())}),f(O)}):(console.warn("Update Error - No data provided"),E("Update Error - No data provided"))});console.warn("addData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}updateOrAddData(o){var a=[],c=0;if(this.initialized)return new Promise((f,E)=>{this.dataLoader.blockActiveLoad(),"string"==typeof o&&(o=JSON.parse(o)),o?o.forEach(R=>{var O=this.rowManager.findRow(R[this.options.index]);c++,O?O.updateData(R).then(()=>{c--,a.push(O.getComponent()),c||f(a)}):this.rowManager.addRows(R).then(F=>{c--,a.push(F[0].getComponent()),c||f(a)})}):(console.warn("Update Error - No data provided"),E("Update Error - No data provided"))});console.warn("updateOrAddData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}getRow(o){var a=this.rowManager.findRow(o);return a?a.getComponent():(console.warn("Find Error - No matching row found:",o),!1)}getRowFromPosition(o,a){var c=this.rowManager.getRowFromPosition(o,a);return c?c.getComponent():(console.warn("Find Error - No matching row found:",o),!1)}deleteRow(o){var a=[];Array.isArray(o)||(o=[o]);for(let c of o){let f=this.rowManager.findRow(c,!0);if(!f)return console.error("Delete Error - No matching row found:",c),Promise.reject("Delete Error - No matching row found");a.push(f)}return a.sort((c,f)=>this.rowManager.rows.indexOf(c)>this.rowManager.rows.indexOf(f)?1:-1),a.forEach(c=>{c.delete()}),this.rowManager.reRenderInPosition(),Promise.resolve()}addRow(o,a,c){if(this.initialized)return"string"==typeof o&&(o=JSON.parse(o)),this.rowManager.addRows(o,a,c).then(f=>f[0].getComponent());console.warn("addRow failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}updateOrAddRow(o,a){var c=this.rowManager.findRow(o);return"string"==typeof a&&(a=JSON.parse(a)),c?c.updateData(a).then(()=>c.getComponent()):this.rowManager.addRows(a).then(f=>f[0].getComponent())}updateRow(o,a){var c=this.rowManager.findRow(o);return"string"==typeof a&&(a=JSON.parse(a)),c?c.updateData(a).then(()=>{resolve(c.getComponent())}):(console.warn("Update Error - No matching row found:",o),Promise.reject("Update Error - No matching row found"))}scrollToRow(o,a,c){var f=this.rowManager.findRow(o);return f?this.rowManager.scrollToRow(f,a,c):(console.warn("Scroll Error - No matching row found:",o),Promise.reject("Scroll Error - No matching row found"))}moveRow(o,a,c){var f=this.rowManager.findRow(o);f?f.moveToRow(a,c):console.warn("Move Error - No matching row found:",o)}getRows(o){if(this.initialized)return this.rowManager.getComponents(o);console.warn("getRows failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}getRowPosition(o,a){var c=this.rowManager.findRow(o);return c?this.rowManager.getRowPosition(c,a):(console.warn("Position Error - No matching row found:",o),!1)}setColumns(o){this.initialized?this.columnManager.setColumns(o):console.warn("setColumns failed - table not yet initialized. To set initial data please use the 'columns' property in the table constructor.")}getColumns(o){return this.columnManager.getComponents(o)}getColumn(o){var a=this.columnManager.findColumn(o);return a?a.getComponent():(console.warn("Find Error - No matching column found:",o),!1)}getColumnDefinitions(){return this.columnManager.getDefinitionTree()}showColumn(o){var a=this.columnManager.findColumn(o);if(!a)return console.warn("Column Show Error - No matching column found:",o),!1;a.show()}hideColumn(o){var a=this.columnManager.findColumn(o);if(!a)return console.warn("Column Hide Error - No matching column found:",o),!1;a.hide()}toggleColumn(o){var a=this.columnManager.findColumn(o);if(!a)return console.warn("Column Visibility Toggle Error - No matching column found:",o),!1;a.visible?a.hide():a.show()}addColumn(o,a,c){var f=this.columnManager.findColumn(c);return this.columnManager.addColumn(o,a,f).then(E=>E.getComponent())}deleteColumn(o){var a=this.columnManager.findColumn(o);return a?a.delete():(console.warn("Column Delete Error - No matching column found:",o),Promise.reject())}updateColumnDefinition(o,a){var c=this.columnManager.findColumn(o);return c?c.updateDefinition(a):(console.warn("Column Update Error - No matching column found:",o),Promise.reject())}moveColumn(o,a,c){var f=this.columnManager.findColumn(o),E=this.columnManager.findColumn(a);f?E?this.columnManager.moveColumn(f,E,c):console.warn("Move Error - No matching column found:",E):console.warn("Move Error - No matching column found:",o)}scrollToColumn(o,a,c){return new Promise((f,E)=>{var R=this.columnManager.findColumn(o);return R?this.columnManager.scrollToColumn(R,a,c):(console.warn("Scroll Error - No matching column found:",o),Promise.reject("Scroll Error - No matching column found"))})}redraw(o){this.initialized?(this.columnManager.redraw(o),this.rowManager.redraw(o)):console.warn("redraw failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}setHeight(o){this.options.height=isNaN(o)?o:o+"px",this.element.style.height=this.options.height,this.rowManager.initializeRenderer(),this.rowManager.redraw()}on(o,a){this.externalEvents.subscribe(o,a)}off(o,a){this.externalEvents.unsubscribe(o,a)}dispatchEvent(){Array.from(arguments).shift(),this.externalEvents.dispatch(...arguments)}modExists(o,a){return!!this.modules[o]||(a&&console.error("Tabulator Module Not Installed: "+o),!1)}module(o){var a=this.modules[o];return a||console.error("Tabulator module not installed: "+o),a}}return g.defaultOptions=ng,g})();new Qp(Lh),new Qp(class extends Lh{},ld);let Gm=(()=>{class g{constructor(){this.a=null,this.b=null,this.dataObject=[],this.objectsForGrid=[],this.stringsForGrid=[],this.hotInstance=null}get hot(){if(null!=this.hotInstance)return this.hotInstance;throw new Error("hot is null")}initGrid(o){Lh.registerModule([kp,Ut,zd,Bp]),this.hotInstance=new Lh(o,{columns:[{title:"Step",field:"id"}],layout:"fitColumns",clipboard:"copy",footerElement:"<div>\n        \x3c!-- <a href=\"javascript:{var event = new Event('TabCopy'); window.dispatchEvent(event);}\">Copy Clipboard</a>\n        &nbsp;&nbsp;&nbsp;&nbsp;\n        <a href=\"javascript:{var event = new Event('TabDownload'); window.dispatchEvent(event);}\">CSV</a>\n        --\x3e\n        \n    </div>",placeholder:"please press execute button"})}AddStringToGrid(o){if(o.startsWith("{")&&o.endsWith("}"))try{var a=JSON.parse(o);return void this.objectsForGrid.push(a)}catch(E){}if(o.startsWith("[")&&o.endsWith("]"))try{for(var c=JSON.parse(o),f=0;f<c.length;f++)this.objectsForGrid.push(c[f]);return}catch(E){}this.stringsForGrid.push(o)}AddDataToGrid(o){return"string"==typeof o?(this.AddStringToGrid(null==o?void 0:o.toString()),void this.dataObject.push([null==o?void 0:o.toString()])):"object"==typeof o?(console.log("adding object to grid"),this.AddStringToGrid(JSON.stringify(o)),void this.dataObject.push([o])):(this.dataObject.push([o.ToString()]),void this.AddStringToGrid(o.toString()))}ClearDataGrid(){this.dataObject=[],this.objectsForGrid=[],this.stringsForGrid=[],null!=this.hot&&(this.hot.setColumns([{title:"Step",field:"id"},{title:"Value",field:"val"}]),this.hot.replaceData([]),this.hot.redraw(!0))}hasOwnProperty(o,a){return null!=o&&o.hasOwnProperty(a)}AddObjectToFinishGrid(){for(var o=[],a=this.objectsForGrid,c=0;c<a.length;c++)"string"==typeof(f=a[c])?o.push("_"):o.push(...Object.keys(f));var E=new Set(o);o=Array.from(E);var R=[...o],O=[];for(c=0;c<a.length;c++){for(var f=a[c],F={Nr:c+1},J=0;J<o.length;J++){var dt=o[J],Ft=this.goodNameForKey(dt);if(f&&this.hasOwnProperty(f,dt)){var qt=f[dt];F[Ft]="object"==typeof qt?JSON.stringify(qt):qt}else F[Ft]="string"==typeof f&&0===J?f:""}O.push(F)}o.splice(0,0,"Nr"),R.splice(0,0,"Nr");var Ee=this.Headers(R);this.hot.setColumns(Ee),this.hot.replaceData(O)}Headers(o){return o.map(a=>({title:a,field:this.goodNameForKey(a),formatter:function(c,f,E){try{var R=c.getValue().toString();if(R.length<2)return R;if(R.startsWith("[")&&R.endsWith("]"))try{var O=JSON.parse(R),F=c.getRow().getData().Nr,dt=c.getColumn().getField()+"_"+F;return E(function(){new Lh("#"+dt,{data:O,autoColumns:!0,layout:"fitDataFill"})}),"<div id='"+dt+"'>"+R+"</div>"}catch(Ft){return R}}catch(Ft){return R}return c.getValue()}}))}AddStringToFinishGrid(){for(var o=[],a=0;a<this.stringsForGrid.length;a++)o.push({Nr:a+1,Text:this.stringsForGrid[a]});var f=this.Headers(["Nr","Text"]);this.hot.setColumns(f),this.hot.replaceData(o)}FinishGrid(){this.objectsForGrid.length+this.stringsForGrid.length!=0&&(this.objectsForGrid.length>0?this.AddObjectToFinishGrid():this.AddStringToFinishGrid(),this.hot.redraw(!0))}goodNameForKey(o){var a=o;return a.replace(".","_")}copyClip(){this.hot.copyToClipboard()}copyCSV(){this.hot.download("csv","data.csv",{bom:!0})}}return g.\u0275fac=function(o){return new(o||g)},g.\u0275prov=oe.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})();var qp=m(92590),tf=m(91083),mg=m(80926),Wm=m(57261),ip=m(43954),Dd=m(92181),_g=m(4834),$h=m(81125),ef=m(20773),zm=m(33);function Ru(g,l){1&g&&oe._UZ(0,"mat-spinner")}const jm=function(g){return["/","automation","loadexample",g]};function Ym(g,l){if(1&g&&(oe.TgZ(0,"a",17),oe._uU(1),oe.qZA()),2&g){const o=oe.oxw();oe.Q6J("routerLink",oe.VKq(2,jm,o.mustLoadDemoBlock)),oe.xp6(1),oe.hij("Direct link ",o.mustLoadDemoBlock,"")}}function nf(g,l){if(1&g){const o=oe.EpF();oe.TgZ(0,"ngx-codemirror",19),oe.NdJ("ngModelChange",function(c){return oe.CHM(o),oe.oxw(2).showInner=c}),oe.qZA()}if(2&g){const o=oe.oxw(2);oe.Q6J("options",o.editorPlain)("ngModel",o.showInner)}}function rf(g,l){if(1&g){const o=oe.EpF();oe.TgZ(0,"ngx-codemirror",19),oe.NdJ("ngModelChange",function(c){return oe.CHM(o),oe.oxw(2).showJSCode=c}),oe.qZA()}if(2&g){const o=oe.oxw(2);oe.Q6J("options",o.editorJSOptions)("ngModel",o.showJSCode)}}function sf(g,l){if(1&g){const o=oe.EpF();oe.TgZ(0,"ngx-codemirror",19),oe.NdJ("ngModelChange",function(c){return oe.CHM(o),oe.oxw(2).showXMLCode=c}),oe.qZA()}if(2&g){const o=oe.oxw(2);oe.Q6J("options",o.editorXMLOptions)("ngModel",o.showXMLCode)}}function vg(g,l){if(1&g){const o=oe.EpF();oe.TgZ(0,"ngx-codemirror",19),oe.NdJ("ngModelChange",function(c){return oe.CHM(o),oe.oxw(2).showBlocksDefinition=c}),oe.qZA()}if(2&g){const o=oe.oxw(2);oe.Q6J("options",o.editorJSOptions)("ngModel",o.showBlocksDefinition)}}function Xm(g,l){if(1&g&&(oe.TgZ(0,"mat-grid-tile"),oe.YNc(1,nf,1,2,"ngx-codemirror",18),oe.YNc(2,rf,1,2,"ngx-codemirror",18),oe.YNc(3,sf,1,2,"ngx-codemirror",18),oe.YNc(4,vg,1,2,"ngx-codemirror",18),oe.qZA()),2&g){const o=oe.oxw();oe.xp6(1),oe.Q6J("ngIf",o.ShowOutput()),oe.xp6(1),oe.Q6J("ngIf",o.ShowCode()),oe.xp6(1),oe.Q6J("ngIf",o.ShowXML()),oe.xp6(1),oe.Q6J("ngIf",o.ShowBlocksDefinition())}}var Sc=(()=>{return(g=Sc||(Sc={}))[g.ShowNone=0]="ShowNone",g[g.ShowBlocksDefinition=1]="ShowBlocksDefinition",g[g.ShowXML=2]="ShowXML",g[g.ShowOutput=3]="ShowOutput",g[g.ShowCode=4]="ShowCode",g[g.Stop=100]="Stop",Sc;var g})();let np=(()=>{class g{constructor(o,a,c,f,E,R,O){var F;this.tabulator=o,this.DetailsApp=a,this.loadDemo=c,this.ar=f,this.ta=E,this.snackBar=R,this.dialog=O,this.editorXMLOptions={theme:"vs-dark",language:"xml"},this.editorJSOptions={theme:"vs-dark",language:"javascript",lineNumbers:"on"},this.editorPlain={theme:"vs-dark",language:"plaintext",lineNumbers:"on"},this.code='function x() {\nconsole.log("Hello world!");\n}',this.showCodeAndXML=Sc.ShowNone,this.swaggerLoaded=0,this.demoWorkspace=null,this.mustLoadDemoBlock="",this.intro=B(),this.myId=0,this.bs=new nd,this.bh2=new Tp,this.bh=null,this.fullTextData="",this.fullHtmlData="",this.myChart=null,this.step=0,this.swaggerData=[],this.showInner="",this.showXMLCode="",this.showJSCode="",this.showBlocksDefinition="",this.toolboxXML="",this.loadedCompletely=!1,this.myId=++g.id,this.ar.paramMap.subscribe(J=>{this.mustLoadDemoBlock=J.get("demoblock")}),this.ta.receiveData().subscribe(J=>{"DisplayBlocklyComponent"==J[0]&&this[J[1]]()}),null===(F=this.DetailsApp.LocalAPI)||void 0===F||F.IsAlive().subscribe()}createIntro(){var o,a=null===(o=this.DetailsApp.settings)||void 0===o?void 0:o.tourSteps.map(c=>{var f;return{title:(null===(f=this.DetailsApp.settings)||void 0===f?void 0:f.title)||"Blockly Automation",intro:c.text,element:document.querySelector(c.query)||void 0}});this.intro.setOptions({exitOnEsc:!0,showStepNumbers:!0,showButtons:!0,doneLabel:"Exit",skipLabel:"Skip",showProgress:!0,steps:a}).start()}clearOutput(){this.step=0,this.showInner="",this.tabulator.ClearDataGrid(),null!=this.myChart&&this.myChart.destroy();var o=this.theHtmlOutput();o.innerHTML="",this.fullHtmlData="",(o=this.theTextOutput()).innerText="",this.fullTextData=""}ShowText(o){if(null!=o){var a=o.toString();this.fullTextData+=a,this.theTextOutput().innerText=this.fullTextData}}finishHTMLOutput(){this.theHtmlOutput().innerHTML=this.fullHtmlData}ShowHTML(o){if(null!=o){var a=o.toString();this.fullHtmlData+=a,this.theHtmlOutput().innerHTML+=a}}theHtmlOutput(){return document.getElementById("htmlOutput"+this.myId)}theTextOutput(){return document.getElementById("htmlText"+this.myId)}ShowChart(o){var a,c=null===(a=document.getElementById("barchart"+this.myId))||void 0===a?void 0:a.getContext("2d");if(null!=c)try{var f=null==o?void 0:o.toString(),E=JSON.parse(f);E&&E.type&&(this.myChart=new Wr(c,E),console.log("make chart",o))}catch(R){this.myChart=null}else console.log("not canvas available for chart!")}RunCode(){this.snackBar.open("Program start","Executing...");var o=this,a=this.run.latestCode,c=this.showJSCode;o.CalculateXMLAndCode(),this.bh=new gd(this.demoWorkspace,t),this.run=this.bh,this.clearOutput(),this.showCodeAndXML=Sc.ShowOutput,this.showInner='{ "step_start": "start program",',a!=c&&(window.confirm("Do you want to run the code modified by you ?")&&(a=c),this.showJSCode=c),this.run.runCode((E,R)=>{try{return new Interpreter(E,R)}catch(O){o.CalculateXMLAndCode(),window.alert("please copy the left output and report there is an error at "+JSON.stringify(O)),this.showCodeAndXML=Sc.ShowCode}},E=>{o.step++,o.showInner+=`\n           \n"step_${o.step}" : "${E}",`,o.tabulator.AddDataToGrid(E),o.ShowChart(E),o.ShowHTML(E),o.ShowText(E)},()=>{this.snackBar.open("Program end","Done!",{duration:3e3}),o.showInner+='\n "step_end" : "program executed; see results below"\n}',this.tabulator.FinishGrid(),this.finishHTMLOutput()},a)}ShowLocalAPI(o){var a;null===(a=this.DetailsApp.LocalAPI)||void 0===a||a.LoadBlockContent(o).subscribe(c=>{var f=e.Xml.textToDom(c);null!=this.demoWorkspace&&(e.Xml.clearWorkspaceAndLoadFromXml(f,this.demoWorkspace),window.alert("please press execute button"))})}ShowDemo(o){this.mustLoadDemoBlock=o,this.loadDemo.getDemoBlock(o).subscribe(a=>{var c=e.Xml.textToDom(a);if(null!=this.demoWorkspace){try{e.Xml.clearWorkspaceAndLoadFromXml(c,this.demoWorkspace)}catch(f){return(null==o?void 0:o.toString().indexOf("docker"))>-1?void(window.confirm("This demo must run with Desktop App.\nDo you want to go to download page?")&&window.open("http://ba.serviciipeweb.ro/")):(null==o?void 0:o.toString().indexOf("chrome"))>-1?void(window.confirm("This demo must run with MyPC swagger.\nDo you want to go to download page?")&&window.open("https://github.com/ignatandrei/BlocklyAutomation/wiki/MyPC")):void window.alert("error "+o)}window.alert("please press execute button")}})}registerSwaggerBlocksObjects(o,a){return a.fieldXMLObjects.map(f=>e.Xml.textToDom(f))}registerSwaggerBlocksAPIControllers(o,a,c){return a.findfieldXMLFunctions(c).map(E=>e.Xml.textToDom(E.gui))}registerSwaggerBlocksAPIAll(o,a){return a.fieldXMLFunctions.map(f=>e.Xml.textToDom(f.gui))}ngOnInit(){}ngAfterViewInit(){this.StartRegister(),(0,as.R)(window,"TabDownload").subscribe(o=>this.tabulator.copyCSV()),(0,as.R)(window,"TabCopy").subscribe(o=>this.tabulator.copyClip())}ShowBlocks(){this.dialog.open(Fd,{}).afterClosed().subscribe(a=>{if(console.log("The dialog was closed with ",a),a){var c=a;switch(c.Source){case"Demos":try{console.log("into try"),this.ShowDemo(a.id)}catch(f){window.alert(a.id),window.alert(f)}break;case"LocalAPI":this.ShowLocalAPI(a.id);break;default:window.alert(c.Source)}}})}LoadSwagger(){var o=this,c=(new x.L(""),window.prompt("Swagger/OpenAPI ? "));if(c){if(c.endsWith(".html")||c.endsWith(".htm"))return void window.alert("Swagger should end with .json - see source of html page");o.LoadSwaggerFromUrl(c).then(f=>{f.hasError?window.alert("error loading swagger"):(o.addToToolboxSwagger(f,this),window.alert("loaded successfully"))})}}LoadSwaggerFromUrl(o,a){var c=this;return(0,T.Z)(function*(){var f=new x.L(o),E=yield f.ParseSwagger();return E.name=a||o,E.hasError?E:c.LoadSwaggerFromAPI(E)})()}LoadSwaggerFromAPI(o){if(o.hasError)return console.error("error in swagger",o.name),o;this.swaggerData.push(o);for(var a=0;a<o.GenerateBlocks.length;a++)(0,o.GenerateBlocks[a])(e.Blocks,t);for(a=0;a<o.GenerateFunctions.length;a++)(0,o.GenerateFunctions[a])(e.Blocks,t);return o.metaBlocks()(e.Blocks,t),o}StartRegister(){var o=this;return(0,T.Z)(function*(){var a=o.DetailsApp.swaggersDict,c=new Map;a.forEach((F,J)=>{var dt=!F.hasError;console.log("show swagger: "+J+":"+dt),dt&&c.set(J,o.LoadSwaggerFromAPI(F))});var f=[...Array(50).keys()].map(F=>o.CategorySwaggerHidden(F)).join("");const E=document.getElementById("steps"+o.myId);if(null!=E){o.tabulator.initGrid(E),o.bs.filterBlocks.definitionBlocks(e.Blocks,t),o.bs.waitBlocks2.definitionBlocks(e.defineBlocksWithJsonArray,t),o.bs.xhrBlocks.definitionBlocks(e.Blocks,t),o.bs.propBlocks.definitionBlocks(e.Blocks,t),o.bs.guiBlocks.definitionBlocks(e.Blocks,t),o.bs.convertersBlocks.definitionBlocks(e.Blocks,t),o.bs.exportFileBlock.definitionBlocks(e.Blocks,t),o.bs.createObjectBlocks.definitionBlocks(e.Blocks,t,e.Extensions,e.Mutator),o.bs.currentDateBlock.definitionBlocks(e.Blocks,t),o.bs.dateFromTextBlock.definitionBlocks(e.Blocks,t),o.bs.waitBlocks1.definitionBlocks(e.Blocks,t),o.bs.commentBlock.definitionBlocks(e.Blocks,t),o.bs.trycatchFinBlock.definitionBlocks(e.Blocks,t),o.bs.auth0Blocks.definitionBlocks(e.Blocks,t),o.bs.windowsCreds.definitionBlocks(e.Blocks,t),o.bs.chartBlock.definitionBlocks(e.Blocks,t),o.bs.emailBlocks.definitionBlocks(e.Blocks,t),o.bs.htmlblocks.definitionBlocks(e.Blocks,t),o.bs.HTMLParserBlocks.definitionBlocks(e.Blocks,t),o.bs.ttsBlock.definitionBlocks(e.Blocks,t),o.bs.pianoBlock.definitionBlocks(e.Blocks,t);var R=o.DetailsApp.customCategories,O=[o.bs.defaultBlocks.fieldXML(),` \n        <category name='Blockly Advanced'>\n        <category id="Audio" name="Audio">\n        ${o.bs.ttsBlock.fieldXML()}\n        ${o.bs.pianoBlock.fieldXML()}\n        </category>  \n            ${o.bs.filterBlocks.fieldXML()}\n                \n                ${o.bs.auth0Blocks.fieldXML()}\n                <category id="catConverters"  name="Converters">\n                ${o.bs.convertersBlocks.fieldXML()}\n              </category>    \n              <category id="catDates"  name="Dates">\n          ${o.bs.currentDateBlock.fieldXML()}\n          ${o.bs.dateFromTextBlock.fieldXML()}\n          ${o.bs.waitBlocks1.fieldXML()}\n          ${o.bs.waitBlocks2.fieldXML()}\n        </category>\n        <category id="catEmail"  name="Email">\n        ${o.bs.emailBlocks.fieldXML()}\n      </category>\n\n        <category id="catExporter"  name="Exporter">\n        ${o.bs.exportFileBlock.fieldXML()}\n      </category>\n              <category id="catGUI" name="GUI">\n              ${o.bs.guiBlocks.fieldXML()}\n              ${o.bs.chartBlock.fieldXML()}\n              </category>\n              <category id="catHTML" name="HTML">\n              <category name="GenHTML" id="Generate">\n              ${o.bs.htmlblocks.fieldXML()}\n              </category>\n              <category name="Parser" id="parseHTML">\n              ${o.bs.HTMLParserBlocks.fieldXML()}\n              </category>\n              </category>\n              <category name="Objects" id="objects">\n              ${o.bs.propBlocks.fieldXML()}\n              ${o.bs.createObjectBlocks.fieldXML()}\n              \n              </category>\n              <category id="XHR" name="Request">\n            ${o.bs.xhrBlocks.fieldXML()}\n            ${o.bs.windowsCreds.fieldXML()}\n            </category>\n        `,`<category id="catTimers"  name="Timers">\n          ${o.bs.waitBlocks1.fieldXML()}\n          ${o.bs.waitBlocks2.fieldXML()}\n        </category>`,`  <category id="programming" name="Programming">\n        ${o.bs.trycatchFinBlock.fieldXML()}\n        ${o.bs.commentBlock.fieldXML()}\n          </category>\n        \n      `,`</category>\n      ${R}\n      \n      <category name="Swagger" id="catSwagger" expanded='false' >          \n          ${f}\n        </category> \n       \n        `];o.initialize(O)}else window.alert("gridElement is null")})()}SaveBlocks(){this.bh2.saveState(e.Xml,this.demoWorkspace,this.myId)}ShowBlocksDefinition(){return this.showCodeAndXML===Sc.ShowBlocksDefinition}ShowSelection(){return Sc[this.showCodeAndXML]}ShowSomething(){return this.showCodeAndXML!==Sc.ShowNone}ShowOutput(){return this.showCodeAndXML===Sc.ShowOutput}ShowCode(){return this.showCodeAndXML===Sc.ShowCode}ShowXML(){return this.showCodeAndXML===Sc.ShowXML}CalculateXMLAndCode(){var o=e.Xml.workspaceToDom(this.demoWorkspace,!0),a=e.Xml.domToPrettyText(o);this.showJSCode=this.run.latestCode,this.showXMLCode=a;var c=this.parseTextForBlocks(a);this.showBlocksDefinition=c.map(f=>{try{return`Blockly.Blocks['${f}']={ init: \n`+e.Blocks[f].init.toString()+`};\n};\nBlockly.JavaScript['${f}']=`+t[f].toString()+";"}catch(O){return console.error("parse definition : "+f,O),"//Error for "+f}}).join("\n")}parseTextForBlocks(o){var a=[];if(o.indexOf('<block type="')>=0)for(var c=o.split('<block type="'),f=1;f<c.length;f++){var E=c[f].split('"')[0];a.push(E)}return a}ShowInnerWorkings(){null!=this.demoWorkspace?(this.showCodeAndXML++,this.ShowSelection()||(this.showCodeAndXML=Sc.ShowNone,setTimeout(a=>{e.svgResize(a)},1e3,this.demoWorkspace)),this.CalculateXMLAndCode()):window.alert("demoWorkspace is null")}Download(){var o=window.prompt("Name?","blocks.txt");null!=o&&this.bh2.DownloadBlocks(e.Xml,this.demoWorkspace,o)}changeListener(o){this.readThis(o.target)}readThis(o){var a=o.files[0],c=new FileReader,f=this;c.onloadend=function(E){f.bh2.LoadFile(e.Xml,f.demoWorkspace,c.result),f.run.resetInterpreter()},c.readAsText(a)}CategorySwaggerHidden(o){return`<category name='swagger_hidden_${o}' hidden='true' >${o}</category>`}SaveToLocalAPI(){var o,a,c;if(0==((null===(a=null===(o=this.DetailsApp)||void 0===o?void 0:o.LocalAPI)||void 0===a?void 0:a.WasAlive)||!1))return this.LoadLocalAPI(),void window.alert("local api it is not yet loaded - please try again after loading");var f=e.Xml.workspaceToDom(this.demoWorkspace,!0),E=e.Xml.domToPrettyText(f),R=new b.q,O=window.prompt("name of the blocks?");null!=O&&(R.id=O,R.blocks="",R.categories="",R.description="",null===(c=this.DetailsApp.LocalAPI)||void 0===c||c.SaveBlock(R,E).subscribe(F=>{console.log("number blocks",F),window.alert("saved !")}))}LoadLocalAPI(){var o,a,c=this;return null===(a=null===(o=c.DetailsApp.LocalAPI)||void 0===o?void 0:o.IsAlive())||void 0===a?void 0:a.pipe((0,wo.K)(f=>{var E;throw window.alert(`cannot load ${null===(E=c.DetailsApp.LocalAPI)||void 0===E?void 0:E.urL}`),f})).subscribe(f=>{var E;if(!f){if(!window.confirm("LocalAPI is not alive.\n Do you want to downlod and run ?"))return;c.DetailsApp.LocalAPI.download()}var R=(null===(E=c.DetailsApp.LocalAPI)||void 0===E?void 0:E.urL)||"";c.LoadSwaggerFromUrl(R+="swagger/v1/swagger.json").then(O=>{O.hasError?window.alert("error loading local api"):(O.name="LocalAPI",c.addToToolboxSwagger(O,this),window.alert("loaded successfully"))})})}initialize(o){var a,c,f,E;const R=document.getElementById("blocklyDiv"+this.myId);if(null!=R){var O=o.map(qt=>`<sep></sep>${qt}`);this.toolboxXML=`<xml xmlns="https://developers.google.com/blockly/xml" id="toolbox-simple" style="display: none">    \n    ${O}\n    </xml>`,this.demoWorkspace=e.inject(R,{readOnly:!1,media:"media/",trashcan:!0,horizontalLayout:!1,move:{scrollbars:!0,drag:!0,wheel:!0},zoom:{controls:!0,wheel:!0,startScale:1,maxScale:3,minScale:.3,scaleSpeed:1.2,pinch:!0},toolbox:this.toolboxXML}),new u(this.demoWorkspace).init();var J=this;if(((null===(c=null===(a=this.DetailsApp.settings)||void 0===a?void 0:a.startBlocks)||void 0===c?void 0:c.length)||0)>0)try{var dt=((null===(f=this.DetailsApp.settings)||void 0===f?void 0:f.startBlocks)||[]).join("\n"),Ft=e.Xml.textToDom(dt);e.Xml.clearWorkspaceAndLoadFromXml(Ft,this.demoWorkspace)}catch(qt){console.error("error when load default blocks",qt)}(null===(E=this.DetailsApp.LocalAPI)||void 0===E?void 0:E.WasAlive)&&this.LoadSwaggerFromUrl(this.DetailsApp.LocalAPI.urL+"swagger/v1/swagger.json","LocalAutomation"),window.setTimeout(J.afterTimeout,2e3,this),this.bh=new gd(this.demoWorkspace,t),this.run=this.bh,J=this,this.demoWorkspace.addChangeListener(function(qt){qt.isUiEvent||(J.run.resetInterpreter(),J.run.generateCodeAndLoadIntoInterpreter(),J.CalculateXMLAndCode())})}else window.alert("blocklyDiv is null")}restoreBlocks(){this.bh2.restoreState(e.Xml,this.demoWorkspace,this.myId)}addToToolboxSwagger(o,a){var c,f=o.findCategSwaggerFromPaths().sort().map(qt=>`<category name='${qt}' custom='func_${o.name}_${qt}'></category>`).join("\n"),E=(null==a?void 0:a.CategorySwaggerHidden(null==a?void 0:a.swaggerLoaded))||"",R=a.toolboxXML,O=`<category name='${o.name}'>\n<category name='API' id='func_${o.name}'>\n${f}\n</category>\n${o.categSwagger()}\n\n<category name='meta' id='meta_${o.name}'>\n<block type='meta_swagger_controllers_${o.name}'></block>\n<block type='meta_swagger_controllers_actions_${o.name}'></block>\n</category>\n\n</category>\n`;if(R=R.replace(E,O),a.swaggerLoaded++,a.toolboxXML=R,null===(c=null==a?void 0:a.demoWorkspace)||void 0===c||c.updateToolbox(R),null!=(null==a?void 0:a.demoWorkspace)){var J="objects_"+o.nameCategSwagger(),dt="AllApi_"+o.nameCategSwagger(),Ft=o;a.demoWorkspace.registerToolboxCategoryCallback(J,qt=>a.registerSwaggerBlocksObjects(qt,Ft)),a.demoWorkspace.registerToolboxCategoryCallback(dt,qt=>a.registerSwaggerBlocksAPIAll(qt,Ft)),o.findCategSwaggerFromPaths().forEach(qt=>{var Ee;null===(Ee=null==a?void 0:a.demoWorkspace)||void 0===Ee||Ee.registerToolboxCategoryCallback(`func_${o.name}_${qt}`,Ae=>a.registerSwaggerBlocksAPIControllers(Ae,o,qt))})}}afterTimeout(o){var a,c,f;if(o.loadedCompletely=!0,null!=(null==o?void 0:o.swaggerData))if(o.toolboxXML=o.toolboxXML.replace("Swagger",`Swagger(${o.swaggerData.length})`),o.swaggerData.forEach(F=>{o.addToToolboxSwagger(F,o)}),null!=(null==o?void 0:o.mustLoadDemoBlock))o.ShowDemo(null==o?void 0:o.mustLoadDemoBlock);else{if(((null===(c=null===(a=o.DetailsApp.settings)||void 0===a?void 0:a.startBlocks)||void 0===c?void 0:c.length)||0)>0)try{var R=((null===(f=o.DetailsApp.settings)||void 0===f?void 0:f.startBlocks)||[]).join("\n");if((null==R?void 0:R.length)>62){var O=e.Xml.textToDom(R);e.Xml.clearWorkspaceAndLoadFromXml(O,o.demoWorkspace)}}catch(F){console.log("error when load default blocks",F)}o.restoreBlocks()}}}return g.id=0,g.\u0275fac=function(o){return new(o||g)(oe.Y36(Gm),oe.Y36(Ys.d),oe.Y36(qp.F),oe.Y36(tf.gz),oe.Y36(mg.v),oe.Y36(Wm.ux),oe.Y36(zr.uw))},g.\u0275cmp=oe.Xpm({type:g,selectors:[["app-display-blockly"]],decls:79,vars:14,consts:[[4,"ngIf"],["rowHeight","1:1",3,"cols"],[2,"display","inline-block","height","100%","width","100%"],[2,"display","inline-block","height","5%","width","100%"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","id","downloadBlocks","color","primary",3,"matMenuTriggerFor"],["menuSave","matMenu"],[3,"inset"],["id","downloadBlocks","mat-raised-button","","color","primary",3,"click"],["mat-raised-button","",3,"color","click"],["mat-raised-button","","color","warn","id","runButton",3,"click"],["type","file",3,"change"],["mat-raised-button","","id","demos","color","accent",3,"click"],["target","_blank","mat-raised-button","","color","primary",3,"routerLink",4,"ngIf"],[2,"display","inline-block","height","100%","width","100%",3,"id"],[3,"id"],["width","800","height","450",3,"id"],["target","_blank","mat-raised-button","","color","primary",3,"routerLink"],["style","display: inline-block; height: 100%; width: 100%",3,"options","ngModel","ngModelChange",4,"ngIf"],[2,"display","inline-block","height","100%","width","100%",3,"options","ngModel","ngModelChange"]],template:function(o,a){if(1&o&&(oe.YNc(0,Ru,1,0,"mat-spinner",0),oe.TgZ(1,"mat-grid-list",1),oe.TgZ(2,"mat-grid-tile-header"),oe.TgZ(3,"div",2),oe.TgZ(4,"div",3),oe.TgZ(5,"button",4),oe.NdJ("click",function(){return a.LoadSwagger()}),oe.TgZ(6,"mat-icon"),oe._uU(7,"file_upload"),oe.qZA(),oe._uU(8," Load Swagger/OpenAPI "),oe.qZA(),oe._uU(9," \xa0 "),oe.TgZ(10,"button",5),oe.TgZ(11,"mat-icon"),oe._uU(12,"save"),oe.qZA(),oe._uU(13," Save => "),oe.qZA(),oe.TgZ(14,"mat-menu",null,6),oe.TgZ(16,"button",4),oe.NdJ("click",function(){return a.SaveBlocks()}),oe.TgZ(17,"mat-icon"),oe._uU(18,"web"),oe.qZA(),oe._uU(19," Persist in browser "),oe.qZA(),oe._UZ(20,"mat-divider",7),oe.TgZ(21,"button",8),oe.NdJ("click",function(){return a.Download()}),oe.TgZ(22,"mat-icon"),oe._uU(23,"download"),oe.qZA(),oe._uU(24," Download blocks "),oe.qZA(),oe._UZ(25,"mat-divider",7),oe.TgZ(26,"button",9),oe.NdJ("click",function(){return a.SaveToLocalAPI()}),oe.TgZ(27,"mat-icon"),oe._uU(28,"save"),oe.qZA(),oe._uU(29," Save Local "),oe.qZA(),oe.qZA(),oe._uU(30," \xa0 "),oe.TgZ(31,"button",10),oe.NdJ("click",function(){return a.RunCode()}),oe.TgZ(32,"mat-icon"),oe._uU(33,"play_arrow"),oe.qZA(),oe._uU(34," Execute "),oe.qZA(),oe._uU(35," \xa0 \xa0 "),oe.TgZ(36,"input",11),oe.NdJ("change",function(f){return a.changeListener(f)}),oe.qZA(),oe.TgZ(37,"button",4),oe.NdJ("click",function(){return a.ShowInnerWorkings()}),oe.TgZ(38,"mat-icon"),oe._uU(39,"code"),oe.qZA(),oe._uU(40),oe.qZA(),oe.TgZ(41,"button",12),oe.NdJ("click",function(){return a.ShowBlocks()}),oe.TgZ(42,"mat-icon"),oe._uU(43,"list"),oe.qZA(),oe._uU(44," Load Blocks "),oe.qZA(),oe.YNc(45,Ym,2,4,"a",13),oe.qZA(),oe.qZA(),oe.qZA(),oe.TgZ(46,"mat-grid-tile"),oe._UZ(47,"div",14),oe.qZA(),oe.YNc(48,Xm,5,4,"mat-grid-tile",0),oe.qZA(),oe.TgZ(49,"mat-accordion"),oe.TgZ(50,"mat-expansion-panel"),oe.TgZ(51,"mat-expansion-panel-header"),oe.TgZ(52,"mat-panel-title"),oe._uU(53," Output Grid "),oe.qZA(),oe.TgZ(54,"mat-panel-description"),oe._uU(55," Click to see grid of output values "),oe.qZA(),oe.qZA(),oe._UZ(56,"div",15),oe.qZA(),oe.TgZ(57,"mat-expansion-panel"),oe.TgZ(58,"mat-expansion-panel-header"),oe.TgZ(59,"mat-panel-title"),oe._uU(60," Chart "),oe.qZA(),oe.TgZ(61,"mat-panel-description"),oe._uU(62," Click to see chart of output values "),oe.qZA(),oe.qZA(),oe.TgZ(63,"p"),oe._UZ(64,"canvas",16),oe.qZA(),oe.qZA(),oe.TgZ(65,"mat-expansion-panel"),oe.TgZ(66,"mat-expansion-panel-header"),oe.TgZ(67,"mat-panel-title"),oe._uU(68," HTML "),oe.qZA(),oe.TgZ(69,"mat-panel-description"),oe._uU(70," Click to see output as HTML "),oe.qZA(),oe.qZA(),oe._UZ(71,"div",15),oe.qZA(),oe.TgZ(72,"mat-expansion-panel"),oe.TgZ(73,"mat-expansion-panel-header"),oe.TgZ(74,"mat-panel-title"),oe._uU(75," Text "),oe.qZA(),oe.TgZ(76,"mat-panel-description"),oe._uU(77," Click to see output as Text "),oe.qZA(),oe.qZA(),oe._UZ(78,"div",15),oe.qZA(),oe.qZA()),2&o){const c=oe.MAs(15);oe.Q6J("ngIf",!a.loadedCompletely),oe.xp6(1),oe.Q6J("cols",a.ShowSomething()?2:1),oe.xp6(9),oe.Q6J("matMenuTriggerFor",c),oe.xp6(10),oe.Q6J("inset",!0),oe.xp6(5),oe.Q6J("inset",!0),oe.xp6(1),oe.Q6J("color",null!=a.DetailsApp.LocalAPI&&a.DetailsApp.LocalAPI.WasAlive?"primary":"warn"),oe.xp6(14),oe.hij(" ",a.ShowSelection()," "),oe.xp6(5),oe.Q6J("ngIf",null==a.mustLoadDemoBlock?null:a.mustLoadDemoBlock.length),oe.xp6(2),oe.Q6J("id","blocklyDiv"+a.myId),oe.xp6(1),oe.Q6J("ngIf",a.ShowSomething()),oe.xp6(8),oe.Q6J("id","steps"+a.myId),oe.xp6(8),oe.Q6J("id","barchart"+a.myId),oe.xp6(7),oe.Q6J("id","htmlOutput"+a.myId),oe.xp6(7),oe.Q6J("id","htmlText"+a.myId)}},directives:[Ju.O5,ip.Il,ip.$H,ip.jo,bh.lW,bl.Hw,Dd.p6,Dd.VK,_g.d,ip.DX,$h.pp,$h.ib,$h.yz,$h.yK,$h.u4,ef.$g,bh.zs,tf.yS,zm.C,Br.JJ,Br.On],styles:[".tabulator[_ngcontent-%COMP%]{font-size:12px;border:none}.tabulator[_ngcontent-%COMP%]   .tabulator-header[_ngcontent-%COMP%]{font-weight:400;border-bottom:1px solid;border-bottom-color:#0000001f;color:#0000008a}.tabulator[_ngcontent-%COMP%]   .tabulator-header[_ngcontent-%COMP%]   .tabulator-col[_ngcontent-%COMP%]{height:48px;background-color:#fff;border:none;padding:0 7px}.tabulator-row[_ngcontent-%COMP%]{border-bottom:1px solid;border-bottom-color:#0000001f;min-height:48px;vertical-align:middle}.tabulator-row[_ngcontent-%COMP%]   .tabulator-cell[_ngcontent-%COMP%]{padding:16px 7px;border-right:none;vertical-align:middle}.tabulator-row[_ngcontent-%COMP%]   .tabulator-cell[_ngcontent-%COMP%]:first-of-type, .tabulator[_ngcontent-%COMP%]   .tabulator-header[_ngcontent-%COMP%]   .tabulator-col[_ngcontent-%COMP%]:first-of-type{padding-left:24px}.tabulator-row.tabulator-row-even[_ngcontent-%COMP%]{background-color:#fff}"]}),g})()},92590:(U,$,m)=>{"use strict";m.d($,{F:()=>r}),m(39646);var _=m(54004),e=m(18505),t=m(5e3),n=m(40520);let r=(()=>{class s{constructor(b){this.http=b}getDemoBlocks(){var b=(new Date).toISOString();return this.http.get(`assets/showUsage/demoBlocks/all.txt?${b}`,{responseType:"text"}).pipe((0,_.U)(x=>JSON.parse(x)))}getCustomCategories(){var b=(new Date).toISOString();return this.http.get(`assets/loadAtStartup/customCategories.txt?${b}`,{responseType:"text"}).pipe((0,_.U)(x=>x.toString()))}getSwaggerLinks(){var b=(new Date).toISOString();return this.http.get(`assets/loadAtStartup/swaggers.json?${b}`,{responseType:"text"}).pipe((0,_.U)(x=>JSON.parse(x)))}getDemoBlock(b){var x=(new Date).toISOString();return this.http.get(`assets/showUsage/demoBlocks/${b}.txt?${x}`,{responseType:"text"}).pipe((0,e.b)(Z=>{}),(0,_.U)(Z=>Z.toString()))}}return s.\u0275fac=function(b){return new(b||s)(t.LFG(n.eN))},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()},4255:(U,$,m)=>{"use strict";var T=m(22313),_=m(5e3),e=m(93075),t=m(91083),n=m(15861),r=m(47423),s=m(63874),u=m(53251),b=m(69808);const x=["vcr"];function B(N,z){if(1&N&&(_.TgZ(0,"mat-icon",9),_._uU(1),_.qZA()),2&N){const y=_.oxw(2).$implicit;_.xp6(1),_.hij(" filter_",y+1,"")}}function Z(N,z){1&N&&(_.TgZ(0,"span"),_._uU(1,"W:{{number+1}"),_.qZA())}function ot(N,z){if(1&N&&(_.YNc(0,B,2,1,"mat-icon",7),_.YNc(1,Z,2,0,"span",8)),2&N){const y=_.oxw().$implicit;_.Q6J("ngIf",y<10),_.xp6(1),_.Q6J("ngIf",y>9)}}function et(N,z){}function Tt(N,z){1&N&&(_.TgZ(0,"mat-tab",4),_.YNc(1,ot,2,2,"ng-template",5),_.YNc(2,et,0,0,"ng-template",null,6,_.W1O),_.qZA()),2&N&&_.Q6J("label","W:"+(z.$implicit+1))}let Pt=(()=>{class N{constructor(y,k){this.fooInjector=y,this.resolver=k,this.data=[],this.selectedTabIndex=0,this.numbers=[0]}addTab(){this.numbers.push(this.numbers.length),this.selectedTabIndex=this.numbers.length-1}changeSelected(y){this.data.filter(k=>k==y).length>0||(this.data.push(y),this.loadBar(y).then(k=>{}))}ngAfterViewInit(){this.data.push(0),this.loadBar(0).then(y=>{})}loadBar(y){var k=this;return(0,n.Z)(function*(){var tt;try{const ii=yield Promise.resolve().then(m.bind(m,27392)),Fi=k.resolver.resolveComponentFactory(ii.DisplayBlocklyComponent);var Ut=null===(tt=k.components)||void 0===tt?void 0:tt.get(y);null!=Ut&&Ut.createComponent(Fi)}catch(ii){console.error("loading"+y,ii)}return y})()}ngOnInit(){}}return N.\u0275fac=function(y){return new(y||N)(_.Y36(_.zs3),_.Y36(_._Vd))},N.\u0275cmp=_.Xpm({type:N,selectors:[["app-blockly-studio"]],viewQuery:function(y,k){if(1&y&&_.Gf(x,5,_.s_b),2&y){let tt;_.iGM(tt=_.CRH())&&(k.components=tt)}},decls:7,vars:2,consts:[["mat-icon-button","","color","primary",3,"click"],[3,"selectedIndex","selectedIndexChange"],[3,"label",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"click"],[3,"label"],["mat-tab-label",""],["vcr",""],["aria-hidden","false",4,"ngIf"],[4,"ngIf"],["aria-hidden","false"]],template:function(y,k){1&y&&(_.TgZ(0,"button",0),_.NdJ("click",function(){return k.addTab()}),_.TgZ(1,"mat-icon"),_._uU(2,"add_circle"),_.qZA(),_.qZA(),_.TgZ(3,"mat-tab-group",1),_.NdJ("selectedIndexChange",function(Ut){return k.changeSelected(Ut)}),_.YNc(4,Tt,4,1,"mat-tab",2),_.qZA(),_.TgZ(5,"button",3),_.NdJ("click",function(){return k.addTab()}),_._uU(6,"Add"),_.qZA()),2&y&&(_.xp6(3),_.Q6J("selectedIndex",k.selectedTabIndex),_.xp6(1),_.Q6J("ngForOf",k.numbers))},directives:[r.lW,s.Hw,u.SP,b.sg,u.uX,u.uD,b.O5],styles:[""]}),N})();var pt=m(27392);const It=[{path:"",redirectTo:"automation/main",pathMatch:"full"},{path:"automation/main",component:pt.DisplayBlocklyComponent},{path:"automation/studio",component:Pt},{path:"automation/loadexample/:demoblock",component:pt.DisplayBlocklyComponent}];let Ht=(()=>{class N{}return N.\u0275fac=function(y){return new(y||N)},N.\u0275mod=_.oAB({type:N}),N.\u0275inj=_.cJS({imports:[[t.Bz.forRoot(It)],t.Bz]}),N})();var Jt=m(28017),Ct=m(95113),bt=m(54004),st=m(77579),gt=m(26063);class lt extends st.x{constructor(z=1/0,y=1/0,k=gt.l){super(),this._bufferSize=z,this._windowTime=y,this._timestampProvider=k,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=y===1/0,this._bufferSize=Math.max(1,z),this._windowTime=Math.max(1,y)}next(z){const{isStopped:y,_buffer:k,_infiniteTimeWindow:tt,_timestampProvider:Ut,_windowTime:ii}=this;y||(k.push(z),!tt&&k.push(Ut.now()+ii)),this._trimBuffer(),super.next(z)}_subscribe(z){this._throwIfClosed(),this._trimBuffer();const y=this._innerSubscribe(z),{_infiniteTimeWindow:k,_buffer:tt}=this,Ut=tt.slice();for(let ii=0;ii<Ut.length&&!z.closed;ii+=k?1:2)z.next(Ut[ii]);return this._checkFinalizedStatuses(z),y}_trimBuffer(){const{_bufferSize:z,_timestampProvider:y,_buffer:k,_infiniteTimeWindow:tt}=this,Ut=(tt?1:2)*z;if(z<1/0&&Ut<k.length&&k.splice(0,k.length-Ut),!tt){const ii=y.now();let Fi=0;for(let un=1;un<k.length&&k[un]<=ii;un+=2)Fi=un;Fi&&k.splice(0,Fi+1)}}}var Bt=m(13099);let Et=(()=>{class N{constructor(){this.title="",this.footer="",this.startBlocks=[],this.tourSteps=[],this.latestVersion="",this.localAPI=""}}return N.version="2021.12.30.1600",N})();var ut=m(80926),rt=m(70925),fe=m(30495),Mt=m(90508),Nt=m(63191),ge=m(91159),ve=m(54968),pe=m(56451),He=m(39300),ke=m(69718),Ze=m(82722),Di=m(71884),$e=m(95698),Le=m(68675),pi=m(78372),Gt=m(41777),Se=m(76360),Zt=m(15664),ie=m(50226);const St=["*"];function jt(N,z){if(1&N){const y=_.EpF();_.TgZ(0,"div",2),_.NdJ("click",function(){return _.CHM(y),_.oxw()._onBackdropClicked()}),_.qZA()}if(2&N){const y=_.oxw();_.ekj("mat-drawer-shown",y._isShowingBackdrop())}}function Ce(N,z){1&N&&(_.TgZ(0,"mat-drawer-content"),_.Hsn(1,2),_.qZA())}const ri=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],Te=["mat-drawer","mat-drawer-content","*"];function te(N,z){if(1&N){const y=_.EpF();_.TgZ(0,"div",2),_.NdJ("click",function(){return _.CHM(y),_.oxw()._onBackdropClicked()}),_.qZA()}if(2&N){const y=_.oxw();_.ekj("mat-drawer-shown",y._isShowingBackdrop())}}function ne(N,z){1&N&&(_.TgZ(0,"mat-sidenav-content",3),_.Hsn(1,2),_.qZA())}const Oe=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],re=["mat-sidenav","mat-sidenav-content","*"],ye={transformDrawer:(0,Gt.X$)("transform",[(0,Gt.SB)("open, open-instant",(0,Gt.oB)({transform:"none",visibility:"visible"})),(0,Gt.SB)("void",(0,Gt.oB)({"box-shadow":"none",visibility:"hidden"})),(0,Gt.eR)("void => open-instant",(0,Gt.jt)("0ms")),(0,Gt.eR)("void <=> open, open-instant => void",(0,Gt.jt)("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},de=new _.OlP("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function(){return!1}}),ti=new _.OlP("MAT_DRAWER_CONTAINER");let Pi=(()=>{class N extends fe.PQ{constructor(y,k,tt,Ut,ii){super(tt,Ut,ii),this._changeDetectorRef=y,this._container=k}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return N.\u0275fac=function(y){return new(y||N)(_.Y36(_.sBO),_.Y36((0,_.Gpc)(()=>yi)),_.Y36(_.SBq),_.Y36(fe.mF),_.Y36(_.R0b))},N.\u0275cmp=_.Xpm({type:N,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(y,k){2&y&&_.Udp("margin-left",k._container._contentMargins.left,"px")("margin-right",k._container._contentMargins.right,"px")},features:[_.qOj],ngContentSelectors:St,decls:1,vars:0,template:function(y,k){1&y&&(_.F$t(),_.Hsn(0))},encapsulation:2,changeDetection:0}),N})(),wi=(()=>{class N{constructor(y,k,tt,Ut,ii,Fi,un,_r){this._elementRef=y,this._focusTrapFactory=k,this._focusMonitor=tt,this._platform=Ut,this._ngZone=ii,this._interactivityChecker=Fi,this._doc=un,this._container=_r,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new st.x,this._animationEnd=new st.x,this._animationState="void",this.openedChange=new _.vpe(!0),this._openedStream=this.openedChange.pipe((0,He.h)(yn=>yn),(0,bt.U)(()=>{})),this.openedStart=this._animationStarted.pipe((0,He.h)(yn=>yn.fromState!==yn.toState&&0===yn.toState.indexOf("open")),(0,ke.h)(void 0)),this._closedStream=this.openedChange.pipe((0,He.h)(yn=>!yn),(0,bt.U)(()=>{})),this.closedStart=this._animationStarted.pipe((0,He.h)(yn=>yn.fromState!==yn.toState&&"void"===yn.toState),(0,ke.h)(void 0)),this._destroyed=new st.x,this.onPositionChanged=new _.vpe,this._modeChanged=new st.x,this.openedChange.subscribe(yn=>{yn?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{(0,ve.R)(this._elementRef.nativeElement,"keydown").pipe((0,He.h)(yn=>yn.keyCode===ge.hY&&!this.disableClose&&!(0,ge.Vb)(yn)),(0,Ze.R)(this._destroyed)).subscribe(yn=>this._ngZone.run(()=>{this.close(),yn.stopPropagation(),yn.preventDefault()}))}),this._animationEnd.pipe((0,Di.x)((yn,Hr)=>yn.fromState===Hr.fromState&&yn.toState===Hr.toState)).subscribe(yn=>{const{fromState:Hr,toState:$r}=yn;(0===$r.indexOf("open")&&"void"===Hr||"void"===$r&&0===Hr.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(y){(y="end"===y?"end":"start")!=this._position&&(this._position=y,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(y){this._mode=y,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(y){this._disableClose=(0,Nt.Ig)(y)}get autoFocus(){const y=this._autoFocus;return null==y?"side"===this.mode?"dialog":"first-tabbable":y}set autoFocus(y){("true"===y||"false"===y||null==y)&&(y=(0,Nt.Ig)(y)),this._autoFocus=y}get opened(){return this._opened}set opened(y){this.toggle((0,Nt.Ig)(y))}_forceFocus(y,k){this._interactivityChecker.isFocusable(y)||(y.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{y.addEventListener("blur",()=>y.removeAttribute("tabindex")),y.addEventListener("mousedown",()=>y.removeAttribute("tabindex"))})),y.focus(k)}_focusByCssSelector(y,k){let tt=this._elementRef.nativeElement.querySelector(y);tt&&this._forceFocus(tt,k)}_takeFocus(){if(!this._focusTrap)return;const y=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(k=>{!k&&"function"==typeof this._elementRef.nativeElement.focus&&y.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(y){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,y):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){var y;const k=null===(y=this._doc)||void 0===y?void 0:y.activeElement;return!!k&&this._elementRef.nativeElement.contains(k)}ngAfterContentInit(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState()}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(y){return this.toggle(!0,y)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(y=!this.opened,k){y&&k&&(this._openedVia=k);const tt=this._setOpen(y,!y&&this._isFocusWithinDrawer(),this._openedVia||"program");return y||(this._openedVia=null),tt}_setOpen(y,k,tt){return this._opened=y,y?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",k&&this._restoreFocus(tt)),this._updateFocusTrapState(),new Promise(Ut=>{this.openedChange.pipe((0,$e.q)(1)).subscribe(ii=>Ut(ii?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}}return N.\u0275fac=function(y){return new(y||N)(_.Y36(_.SBq),_.Y36(Zt.qV),_.Y36(Zt.tE),_.Y36(rt.t4),_.Y36(_.R0b),_.Y36(Zt.ic),_.Y36(b.K0,8),_.Y36(ti,8))},N.\u0275cmp=_.Xpm({type:N,selectors:[["mat-drawer"]],hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(y,k){1&y&&_.WFA("@transform.start",function(Ut){return k._animationStarted.next(Ut)})("@transform.done",function(Ut){return k._animationEnd.next(Ut)}),2&y&&(_.uIk("align",null),_.d8E("@transform",k._animationState),_.ekj("mat-drawer-end","end"===k.position)("mat-drawer-over","over"===k.mode)("mat-drawer-push","push"===k.mode)("mat-drawer-side","side"===k.mode)("mat-drawer-opened",k.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:St,decls:2,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(y,k){1&y&&(_.F$t(),_.TgZ(0,"div",0),_.Hsn(1),_.qZA())},directives:[fe.PQ],encapsulation:2,data:{animation:[ye.transformDrawer]},changeDetection:0}),N})(),yi=(()=>{class N{constructor(y,k,tt,Ut,ii,Fi=!1,un){this._dir=y,this._element=k,this._ngZone=tt,this._changeDetectorRef=Ut,this._animationMode=un,this._drawers=new _.n_E,this.backdropClick=new _.vpe,this._destroyed=new st.x,this._doCheckSubject=new st.x,this._contentMargins={left:null,right:null},this._contentMarginChanges=new st.x,y&&y.change.pipe((0,Ze.R)(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),ii.change().pipe((0,Ze.R)(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=Fi}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(y){this._autosize=(0,Nt.Ig)(y)}get hasBackdrop(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride}set hasBackdrop(y){this._backdropOverride=null==y?null:(0,Nt.Ig)(y)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe((0,Le.O)(this._allDrawers),(0,Ze.R)(this._destroyed)).subscribe(y=>{this._drawers.reset(y.filter(k=>!k._container||k._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe((0,Le.O)(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(y=>{this._watchDrawerToggle(y),this._watchDrawerPosition(y),this._watchDrawerMode(y)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe((0,pi.b)(10),(0,Ze.R)(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(y=>y.open())}close(){this._drawers.forEach(y=>y.close())}updateContentMargins(){let y=0,k=0;if(this._left&&this._left.opened)if("side"==this._left.mode)y+=this._left._getWidth();else if("push"==this._left.mode){const tt=this._left._getWidth();y+=tt,k-=tt}if(this._right&&this._right.opened)if("side"==this._right.mode)k+=this._right._getWidth();else if("push"==this._right.mode){const tt=this._right._getWidth();k+=tt,y-=tt}y=y||null,k=k||null,(y!==this._contentMargins.left||k!==this._contentMargins.right)&&(this._contentMargins={left:y,right:k},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(y){y._animationStarted.pipe((0,He.h)(k=>k.fromState!==k.toState),(0,Ze.R)(this._drawers.changes)).subscribe(k=>{"open-instant"!==k.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==y.mode&&y.openedChange.pipe((0,Ze.R)(this._drawers.changes)).subscribe(()=>this._setContainerClass(y.opened))}_watchDrawerPosition(y){!y||y.onPositionChanged.pipe((0,Ze.R)(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe((0,$e.q)(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(y){y&&y._modeChanged.pipe((0,Ze.R)((0,pe.T)(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(y){const k=this._element.nativeElement.classList,tt="mat-drawer-container-has-open";y?k.add(tt):k.remove(tt)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(y=>{"end"==y.position?this._end=y:this._start=y}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(y=>y&&!y.disableClose&&this._canHaveBackdrop(y)).forEach(y=>y._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(y){return"side"!==y.mode||!!this._backdropOverride}_isDrawerOpen(y){return null!=y&&y.opened}}return N.\u0275fac=function(y){return new(y||N)(_.Y36(ie.Is,8),_.Y36(_.SBq),_.Y36(_.R0b),_.Y36(_.sBO),_.Y36(fe.rL),_.Y36(de),_.Y36(Se.Qb,8))},N.\u0275cmp=_.Xpm({type:N,selectors:[["mat-drawer-container"]],contentQueries:function(y,k,tt){if(1&y&&(_.Suo(tt,Pi,5),_.Suo(tt,wi,5)),2&y){let Ut;_.iGM(Ut=_.CRH())&&(k._content=Ut.first),_.iGM(Ut=_.CRH())&&(k._allDrawers=Ut)}},viewQuery:function(y,k){if(1&y&&_.Gf(Pi,5),2&y){let tt;_.iGM(tt=_.CRH())&&(k._userContent=tt.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(y,k){2&y&&_.ekj("mat-drawer-container-explicit-backdrop",k._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[_._Bn([{provide:ti,useExisting:N}])],ngContentSelectors:Te,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(y,k){1&y&&(_.F$t(ri),_.YNc(0,jt,1,2,"div",0),_.Hsn(1),_.Hsn(2,1),_.YNc(3,Ce,2,0,"mat-drawer-content",1)),2&y&&(_.Q6J("ngIf",k.hasBackdrop),_.xp6(3),_.Q6J("ngIf",!k._content))},directives:[b.O5,Pi],styles:[".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n"],encapsulation:2,changeDetection:0}),N})(),dn=(()=>{class N extends Pi{constructor(y,k,tt,Ut,ii){super(y,k,tt,Ut,ii)}}return N.\u0275fac=function(y){return new(y||N)(_.Y36(_.sBO),_.Y36((0,_.Gpc)(()=>Zi)),_.Y36(_.SBq),_.Y36(fe.mF),_.Y36(_.R0b))},N.\u0275cmp=_.Xpm({type:N,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],hostVars:4,hostBindings:function(y,k){2&y&&_.Udp("margin-left",k._container._contentMargins.left,"px")("margin-right",k._container._contentMargins.right,"px")},features:[_.qOj],ngContentSelectors:St,decls:1,vars:0,template:function(y,k){1&y&&(_.F$t(),_.Hsn(0))},encapsulation:2,changeDetection:0}),N})(),mi=(()=>{class N extends wi{constructor(){super(...arguments),this._fixedInViewport=!1,this._fixedTopGap=0,this._fixedBottomGap=0}get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(y){this._fixedInViewport=(0,Nt.Ig)(y)}get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(y){this._fixedTopGap=(0,Nt.su)(y)}get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(y){this._fixedBottomGap=(0,Nt.su)(y)}}return N.\u0275fac=function(){let z;return function(k){return(z||(z=_.n5z(N)))(k||N)}}(),N.\u0275cmp=_.Xpm({type:N,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1",1,"mat-drawer","mat-sidenav"],hostVars:17,hostBindings:function(y,k){2&y&&(_.uIk("align",null),_.Udp("top",k.fixedInViewport?k.fixedTopGap:null,"px")("bottom",k.fixedInViewport?k.fixedBottomGap:null,"px"),_.ekj("mat-drawer-end","end"===k.position)("mat-drawer-over","over"===k.mode)("mat-drawer-push","push"===k.mode)("mat-drawer-side","side"===k.mode)("mat-drawer-opened",k.opened)("mat-sidenav-fixed",k.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],features:[_.qOj],ngContentSelectors:St,decls:2,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(y,k){1&y&&(_.F$t(),_.TgZ(0,"div",0),_.Hsn(1),_.qZA())},directives:[fe.PQ],encapsulation:2,data:{animation:[ye.transformDrawer]},changeDetection:0}),N})(),Zi=(()=>{class N extends yi{}return N.\u0275fac=function(){let z;return function(k){return(z||(z=_.n5z(N)))(k||N)}}(),N.\u0275cmp=_.Xpm({type:N,selectors:[["mat-sidenav-container"]],contentQueries:function(y,k,tt){if(1&y&&(_.Suo(tt,dn,5),_.Suo(tt,mi,5)),2&y){let Ut;_.iGM(Ut=_.CRH())&&(k._content=Ut.first),_.iGM(Ut=_.CRH())&&(k._allDrawers=Ut)}},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(y,k){2&y&&_.ekj("mat-drawer-container-explicit-backdrop",k._backdropOverride)},exportAs:["matSidenavContainer"],features:[_._Bn([{provide:ti,useExisting:N}]),_.qOj],ngContentSelectors:re,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],["cdkScrollable","",4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"],["cdkScrollable",""]],template:function(y,k){1&y&&(_.F$t(Oe),_.YNc(0,te,1,2,"div",0),_.Hsn(1),_.Hsn(2,1),_.YNc(3,ne,2,0,"mat-sidenav-content",1)),2&y&&(_.Q6J("ngIf",k.hasBackdrop),_.xp6(3),_.Q6J("ngIf",!k._content))},directives:[b.O5,dn,fe.PQ],styles:[".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n"],encapsulation:2,changeDetection:0}),N})(),Re=(()=>{class N{}return N.\u0275fac=function(y){return new(y||N)},N.\u0275mod=_.oAB({type:N}),N.\u0275inj=_.cJS({imports:[[b.ez,Mt.BQ,rt.ud,fe.ZD],fe.ZD,Mt.BQ]}),N})();const xe=["*",[["mat-toolbar-row"]]],Ci=["*","mat-toolbar-row"],je=(0,Mt.pj)(class{constructor(N){this._elementRef=N}});let Ii=(()=>{class N{}return N.\u0275fac=function(y){return new(y||N)},N.\u0275dir=_.lG2({type:N,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),N})(),_i=(()=>{class N extends je{constructor(y,k,tt){super(y),this._platform=k,this._document=tt}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return N.\u0275fac=function(y){return new(y||N)(_.Y36(_.SBq),_.Y36(rt.t4),_.Y36(b.K0))},N.\u0275cmp=_.Xpm({type:N,selectors:[["mat-toolbar"]],contentQueries:function(y,k,tt){if(1&y&&_.Suo(tt,Ii,5),2&y){let Ut;_.iGM(Ut=_.CRH())&&(k._toolbarRows=Ut)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(y,k){2&y&&_.ekj("mat-toolbar-multiple-rows",k._toolbarRows.length>0)("mat-toolbar-single-row",0===k._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[_.qOj],ngContentSelectors:Ci,decls:2,vars:0,template:function(y,k){1&y&&(_.F$t(xe),_.Hsn(0),_.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),N})(),Je=(()=>{class N{}return N.\u0275fac=function(y){return new(y||N)},N.\u0275mod=_.oAB({type:N}),N.\u0275inj=_.cJS({imports:[[Mt.BQ],Mt.BQ]}),N})();m(20449);var kt=m(4834);const ct=["*"],ce=[[["","mat-list-avatar",""],["","mat-list-icon",""],["","matListAvatar",""],["","matListIcon",""]],[["","mat-line",""],["","matLine",""]],"*"],Ne=["[mat-list-avatar], [mat-list-icon], [matListAvatar], [matListIcon]","[mat-line], [matLine]","*"],ci=(0,Mt.Id)((0,Mt.Kr)(class{})),Ke=(0,Mt.Kr)(class{}),Pe=new _.OlP("MatList"),hi=new _.OlP("MatNavList");let xi=(()=>{class N extends ci{constructor(){super(...arguments),this._stateChanges=new st.x}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return N.\u0275fac=function(){let z;return function(k){return(z||(z=_.n5z(N)))(k||N)}}(),N.\u0275cmp=_.Xpm({type:N,selectors:[["mat-nav-list"]],hostAttrs:["role","navigation",1,"mat-nav-list","mat-list-base"],inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matNavList"],features:[_._Bn([{provide:hi,useExisting:N}]),_.qOj,_.TTD],ngContentSelectors:ct,decls:1,vars:0,template:function(y,k){1&y&&(_.F$t(),_.Hsn(0))},styles:['.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:transparent}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:transparent;text-align:left}[dir=rtl] mat-action-list button{text-align:right}mat-action-list button::-moz-focus-inner{border:0}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-selection-list:focus{outline-style:dotted}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-list-option:focus,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:focus,.cdk-high-contrast-active mat-action-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:focus{outline:dotted 1px;z-index:1}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}\n'],encapsulation:2,changeDetection:0}),N})(),In=(()=>{class N{}return N.\u0275fac=function(y){return new(y||N)},N.\u0275dir=_.lG2({type:N,selectors:[["","mat-list-avatar",""],["","matListAvatar",""]],hostAttrs:[1,"mat-list-avatar"]}),N})(),or=(()=>{class N{}return N.\u0275fac=function(y){return new(y||N)},N.\u0275dir=_.lG2({type:N,selectors:[["","mat-list-icon",""],["","matListIcon",""]],hostAttrs:[1,"mat-list-icon"]}),N})(),to=(()=>{class N extends Ke{constructor(y,k,tt,Ut){super(),this._element=y,this._isInteractiveList=!1,this._destroyed=new st.x,this._disabled=!1,this._isInteractiveList=!!(tt||Ut&&"action-list"===Ut._getListType()),this._list=tt||Ut;const ii=this._getHostElement();"button"===ii.nodeName.toLowerCase()&&!ii.hasAttribute("type")&&ii.setAttribute("type","button"),this._list&&this._list._stateChanges.pipe((0,Ze.R)(this._destroyed)).subscribe(()=>{k.markForCheck()})}get disabled(){return this._disabled||!(!this._list||!this._list.disabled)}set disabled(y){this._disabled=(0,Nt.Ig)(y)}ngAfterContentInit(){(0,Mt.E0)(this._lines,this._element)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_isRippleDisabled(){return!this._isInteractiveList||this.disableRipple||!(!this._list||!this._list.disableRipple)}_getHostElement(){return this._element.nativeElement}}return N.\u0275fac=function(y){return new(y||N)(_.Y36(_.SBq),_.Y36(_.sBO),_.Y36(hi,8),_.Y36(Pe,8))},N.\u0275cmp=_.Xpm({type:N,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(y,k,tt){if(1&y&&(_.Suo(tt,In,5),_.Suo(tt,or,5),_.Suo(tt,Mt.X2,5)),2&y){let Ut;_.iGM(Ut=_.CRH())&&(k._avatar=Ut.first),_.iGM(Ut=_.CRH())&&(k._icon=Ut.first),_.iGM(Ut=_.CRH())&&(k._lines=Ut)}},hostAttrs:[1,"mat-list-item","mat-focus-indicator"],hostVars:6,hostBindings:function(y,k){2&y&&_.ekj("mat-list-item-disabled",k.disabled)("mat-list-item-avatar",k._avatar||k._icon)("mat-list-item-with-avatar",k._avatar||k._icon)},inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matListItem"],features:[_.qOj],ngContentSelectors:Ne,decls:6,vars:2,consts:[[1,"mat-list-item-content"],["mat-ripple","",1,"mat-list-item-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-list-text"]],template:function(y,k){1&y&&(_.F$t(ce),_.TgZ(0,"div",0),_._UZ(1,"div",1),_.Hsn(2),_.TgZ(3,"div",2),_.Hsn(4,1),_.qZA(),_.Hsn(5,2),_.qZA()),2&y&&(_.xp6(1),_.Q6J("matRippleTrigger",k._getHostElement())("matRippleDisabled",k._isRippleDisabled()))},directives:[Mt.wG],encapsulation:2,changeDetection:0}),N})(),Mi=(()=>{class N{}return N.\u0275fac=function(y){return new(y||N)},N.\u0275mod=_.oAB({type:N}),N.\u0275inj=_.cJS({imports:[[Mt.uc,Mt.si,Mt.BQ,Mt.us,b.ez],Mt.uc,Mt.BQ,Mt.us,kt.t]}),N})();var Fn=m(81125),hr=m(92181);const Pr=function(N){return["/","automation","loadexample",N]};function pr(N,z){if(1&N&&(_.TgZ(0,"a",24),_.TgZ(1,"mat-icon"),_._uU(2," https "),_.qZA(),_._uU(3),_.qZA()),2&N){const y=z.index,k=z.$implicit;_.Q6J("routerLink",_.VKq(3,Pr,k.id)),_.xp6(3),_.AsE(" ",y+1," ",k.description,"")}}function Sr(N,z){if(1&N){const y=_.EpF();_.TgZ(0,"button",26),_.NdJ("click",function(){return _.CHM(y),_.oxw(),_.MAs(2).toggle()}),_.TgZ(1,"mat-icon",27),_._uU(2,"menu"),_.qZA(),_.qZA()}}function Zr(N,z){if(1&N&&(_.TgZ(0,"span",28),_._uU(1),_.qZA()),2&N){const y=_.oxw();_.xp6(1),_.AsE(" ",y.version," => ",y.latestVersion," ")}}const Rr=function(){return["/","automation","studio"]},Vi=function(){return["/","automation","main"]};let On=(()=>{class N{constructor(y,k,tt){this.breakpointObserver=y,this.details=k,this.ta=tt,this.demoBlocks=[],this.isHandset$=this.breakpointObserver.observe(Ct.u3.Handset).pipe((0,bt.U)(Ut=>Ut.matches||!0),function(N,z,y){let Ut,ii=!1;return Ut=1/0,(0,Bt.B)({connector:()=>new lt(Ut,z,y),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:ii})}()),this.version=Et.version,this.latestVersion="",this.title="Blockly Automation",this.footer="",this.standalone=!1}ngOnInit(){var y,k,tt,Ut,ii;this.latestVersion=null===(y=this.details.settings)||void 0===y?void 0:y.latestVersion,this.demoBlocks=this.details.demoBlocks.sort((Fi,un)=>Fi.description.localeCompare(un.description)),this.title=(null===(tt=null===(k=this.details)||void 0===k?void 0:k.settings)||void 0===tt?void 0:tt.title)||"Blockly Automation",this.footer=(null===(ii=null===(Ut=this.details)||void 0===Ut?void 0:Ut.settings)||void 0===ii?void 0:ii.footer)||"",(navigator.standalone||window.matchMedia("(display-mode: standalone)").matches)&&(this.standalone=!0)}executeOnDisplayBlockly(y){this.ta.sendDataToServer("DisplayBlocklyComponent",y)}}return N.\u0275fac=function(y){return new(y||N)(_.Y36(Ct.Yg),_.Y36(Jt.d),_.Y36(ut.v))},N.\u0275cmp=_.Xpm({type:N,selectors:[["app-primary-navig"]],decls:84,vars:27,consts:[[1,"sidenav-container"],["fixedInViewport","",1,"sidenav",3,"mode","opened"],["drawer",""],["mat-list-item","","routerLink","/"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation","target","_blank"],["mat-list-item","","href","https://ignatandrei.github.io/BlocklyAutomation","target","_blank"],["mat-list-item","","target","_blank",3,"routerLink",4,"ngFor","ngForOf"],["color","primary",1,"nav-bar"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click",4,"ngIf"],[3,"title"],[1,"example-spacer"],["mat-mini-fab","","color","primary",3,"click"],["id","download","mat-button","",3,"matMenuTriggerFor"],["download","matMenu"],["mat-list-item","",4,"ngIf"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseBlocklyAutomation.zip/","target","_blank"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseLin.zip/","target","_blank"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseWin.zip/","target","_blank"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseIISWin.zip/","target","_blank"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseLocalAPI.zip/","target","_blank"],["mat-list-item","","href","http://ba.serviciipeweb.ro/","target","_blank"],["mat-list-item","","href","https://www.microsoft.com/en-us/p/blocklyautomation/9mxnwjt6zpd0","target","_blank"],["mat-button","",3,"matMenuTriggerFor"],["examples","matMenu"],["mat-list-item","","target","_blank",3,"routerLink"],[1,"main-content"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click"],["aria-label","Side nav toggle icon"],["mat-list-item",""]],template:function(y,k){if(1&y&&(_.TgZ(0,"mat-sidenav-container",0),_.TgZ(1,"mat-sidenav",1,2),_.ALo(3,"async"),_.ALo(4,"async"),_.ALo(5,"async"),_.TgZ(6,"mat-toolbar"),_.TgZ(7,"a",3),_._uU(8,"Menu"),_.qZA(),_.qZA(),_.TgZ(9,"mat-nav-list"),_.TgZ(10,"a",4),_.TgZ(11,"mat-icon"),_._uU(12," source "),_.qZA(),_._uU(13," Github"),_.qZA(),_._UZ(14,"mat-divider"),_.TgZ(15,"a",5),_.TgZ(16,"mat-icon"),_._uU(17," https "),_.qZA(),_._uU(18," Demo online"),_.qZA(),_._UZ(19,"mat-divider"),_.TgZ(20,"mat-expansion-panel"),_.TgZ(21,"mat-expansion-panel-header"),_.TgZ(22,"mat-panel-title"),_._uU(23),_.qZA(),_.qZA(),_.YNc(24,pr,4,5,"a",6),_.qZA(),_.qZA(),_.qZA(),_.TgZ(25,"mat-sidenav-content"),_.TgZ(26,"mat-toolbar",7),_.YNc(27,Sr,3,0,"button",8),_.ALo(28,"async"),_.TgZ(29,"span",9),_._uU(30),_.qZA(),_._UZ(31,"span",10),_.TgZ(32,"button",11),_.NdJ("click",function(){return k.executeOnDisplayBlockly("createIntro")}),_.TgZ(33,"mat-icon"),_._uU(34," help_outline "),_.qZA(),_.qZA(),_.TgZ(35,"button",12),_.TgZ(36,"mat-icon"),_._uU(37," file_download "),_.qZA(),_.qZA(),_.TgZ(38,"mat-menu",null,13),_.YNc(40,Zr,2,2,"span",14),_.TgZ(41,"a",15),_._uU(42," Download HTML"),_.qZA(),_.TgZ(43,"a",16),_._uU(44," Download Linux"),_.qZA(),_.TgZ(45,"a",17),_._uU(46," Download Windows"),_.qZA(),_.TgZ(47,"a",18),_._uU(48," Download IIS"),_.qZA(),_.TgZ(49,"a",19),_._uU(50," Download LocalAPI"),_.qZA(),_.TgZ(51,"a",20),_._uU(52," Download WPF"),_.qZA(),_.TgZ(53,"a",21),_._uU(54," Store"),_.qZA(),_.qZA(),_.TgZ(55,"button",22),_.TgZ(56,"mat-icon"),_._uU(57," source "),_.qZA(),_.qZA(),_.TgZ(58,"mat-menu",null,23),_.TgZ(60,"a",24),_.TgZ(61,"mat-icon"),_._uU(62," star "),_.qZA(),_._uU(63,"Studio "),_.qZA(),_.TgZ(64,"a",24),_.TgZ(65,"mat-icon"),_._uU(66," star_half "),_.qZA(),_._uU(67,"Single "),_.qZA(),_.TgZ(68,"a",4),_.TgZ(69,"mat-icon"),_._uU(70," source "),_.qZA(),_._uU(71," Github"),_.qZA(),_._UZ(72,"mat-divider"),_.TgZ(73,"a",5),_.TgZ(74,"mat-icon"),_._uU(75," https "),_.qZA(),_._uU(76," Demo online"),_.qZA(),_.qZA(),_.qZA(),_.TgZ(77,"div",25),_._UZ(78,"router-outlet"),_.qZA(),_.qZA(),_.qZA(),_.TgZ(79,"footer"),_.TgZ(80,"small"),_._uU(81),_.qZA(),_.TgZ(82,"small"),_._uU(83),_.qZA(),_.qZA()),2&y){const tt=_.MAs(39),Ut=_.MAs(59);_.xp6(1),_.Q6J("mode",_.lcZ(4,19,k.isHandset$)?"over":"side")("opened",!1===_.lcZ(5,21,k.isHandset$)),_.uIk("role",_.lcZ(3,17,k.isHandset$)?"dialog":"navigation"),_.xp6(22),_.hij(" Demos ",k.demoBlocks.length," "),_.xp6(1),_.Q6J("ngForOf",k.demoBlocks),_.xp6(3),_.Q6J("ngIf",_.lcZ(28,23,k.isHandset$)),_.xp6(2),_.s9C("title",k.version),_.xp6(1),_.Oqu(k.title),_.xp6(5),_.Q6J("matMenuTriggerFor",tt),_.xp6(5),_.Q6J("ngIf",k.version!=k.latestVersion),_.xp6(15),_.Q6J("matMenuTriggerFor",Ut),_.xp6(5),_.Q6J("routerLink",_.DdM(25,Rr)),_.xp6(4),_.Q6J("routerLink",_.DdM(26,Vi)),_.xp6(17),_.Oqu(k.footer),_.xp6(2),_.lnq("",k.standalone?"standalone":"browser"," ",k.version," -> ",k.latestVersion,"")}},directives:[Zi,mi,_i,to,t.yS,xi,s.Hw,kt.d,Fn.ib,Fn.yz,Fn.yK,b.sg,dn,b.O5,r.lW,hr.p6,hr.VK,t.lC],pipes:[b.Ov],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;width:100%}.sidenav-container[_ngcontent-%COMP%]{height:100%}.sidenav[_ngcontent-%COMP%]{width:200px}.sidenav[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{background:inherit}.mat-toolbar.mat-primary[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.main-content[_ngcontent-%COMP%]{height:97%;width:100%}.nav-bar[_ngcontent-%COMP%]{height:3%;width:100%}"]}),N})(),Gn=(()=>{class N{constructor(y,k){var tt,Ut;this.titleService=y,this.title="AutoBlocklyApp",console.log(null===(tt=k.settings)||void 0===tt?void 0:tt.title),this.titleService.setTitle((null===(Ut=k.settings)||void 0===Ut?void 0:Ut.title)||"")}}return N.\u0275fac=function(y){return new(y||N)(_.Y36(T.Dx),_.Y36(Jt.d))},N.\u0275cmp=_.Xpm({type:N,selectors:[["app-root"]],decls:1,vars:0,template:function(y,k){1&y&&_._UZ(0,"app-primary-navig")},directives:[On],styles:[""]}),N})();var ae=m(40520),Ue=m(91079);let zn=(()=>{class N{}return N.\u0275fac=function(y){return new(y||N)},N.\u0275mod=_.oAB({type:N}),N.\u0275inj=_.cJS({imports:[[Zt.rt,Mt.BQ],Mt.BQ]}),N})();var Yn=m(91314),kn=m(47429);let lr=(()=>{class N{}return N.\u0275fac=function(y){return new(y||N)},N.\u0275mod=_.oAB({type:N}),N.\u0275inj=_.cJS({imports:[[Yn.U8,Mt.BQ,kn.eL],Mt.BQ]}),N})(),aa=(()=>{class N{}return N.\u0275fac=function(y){return new(y||N)},N.\u0275mod=_.oAB({type:N}),N.\u0275inj=_.cJS({imports:[[Mt.BQ,Mt.si],Mt.BQ]}),N})(),Js=(()=>{class N{}return N.\u0275fac=function(y){return new(y||N)},N.\u0275mod=_.oAB({type:N}),N.\u0275inj=_.cJS({imports:[[Mt.BQ],Mt.BQ]}),N})();var Ar=m(17144);let At=(()=>{class N{}return N.\u0275fac=function(y){return new(y||N)},N.\u0275mod=_.oAB({type:N}),N.\u0275inj=_.cJS({}),N})(),Be=(()=>{class N{}return N.\u0275fac=function(y){return new(y||N)},N.\u0275mod=_.oAB({type:N}),N.\u0275inj=_.cJS({imports:[[Mt.si,Mt.BQ,Ar.Q8,At],Mt.BQ,At]}),N})();var vi=m(67322);const Uo=new _.OlP("mat-chips-default-options");let _t=(()=>{class N{}return N.\u0275fac=function(y){return new(y||N)},N.\u0275mod=_.oAB({type:N}),N.\u0275inj=_.cJS({providers:[Mt.rD,{provide:Uo,useValue:{separatorKeyCodes:[ge.K5]}}],imports:[[Mt.BQ]]}),N})(),er=(()=>{class N{}return N.\u0275fac=function(y){return new(y||N)},N.\u0275mod=_.oAB({type:N}),N.\u0275inj=_.cJS({imports:[[ie.vT]]}),N})(),ms=(()=>{class N{constructor(){this.changes=new st.x,this.optionalLabel="Optional",this.completedLabel="Completed",this.editableLabel="Editable"}}return N.\u0275fac=function(y){return new(y||N)},N.\u0275prov=_.Yz7({token:N,factory:N.\u0275fac,providedIn:"root"}),N})();const al={provide:ms,deps:[[new _.FiY,new _.tp0,ms]],useFactory:function(N){return N||new ms}};let Fa=(()=>{class N{}return N.\u0275fac=function(y){return new(y||N)},N.\u0275mod=_.oAB({type:N}),N.\u0275inj=_.cJS({providers:[al,Mt.rD],imports:[[Mt.BQ,b.ez,kn.eL,r.ot,er,s.Ps,Mt.si],Mt.BQ]}),N})();m(50727);var Ul=m(77531);let su=(()=>{class N{constructor(){this.changes=new st.x,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 24 years",this.nextMultiYearLabel="Next 24 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year"}formatYearRange(y,k){return`${y} \u2013 ${k}`}}return N.\u0275fac=function(y){return new(y||N)},N.\u0275prov=_.Yz7({token:N,factory:N.\u0275fac,providedIn:"root"}),N})();const Qu={provide:new _.OlP("mat-datepicker-scroll-strategy"),deps:[Yn.aV],useFactory:function(N){return()=>N.scrollStrategies.reposition()}};let wl=(()=>{class N{}return N.\u0275fac=function(y){return new(y||N)},N.\u0275mod=_.oAB({type:N}),N.\u0275inj=_.cJS({providers:[su,Qu],imports:[[b.ez,r.ot,Yn.U8,Zt.rt,kn.eL,Mt.BQ],fe.ZD]}),N})();var Oc=m(48966),Is=m(43954);const Jc={provide:new _.OlP("mat-select-scroll-strategy"),deps:[Yn.aV],useFactory:function(N){return()=>N.scrollStrategies.reposition()}};let gc=(()=>{class N{}return N.\u0275fac=function(y){return new(y||N)},N.\u0275mod=_.oAB({type:N}),N.\u0275inj=_.cJS({providers:[Jc],imports:[[b.ez,Yn.U8,Mt.Ng,Mt.BQ],fe.ZD,vi.lN,Mt.Ng,Mt.BQ]}),N})();const dl={provide:new _.OlP("mat-tooltip-scroll-strategy"),deps:[Yn.aV],useFactory:function(N){return()=>N.scrollStrategies.reposition({scrollThrottle:20})}};let el=(()=>{class N{}return N.\u0275fac=function(y){return new(y||N)},N.\u0275mod=_.oAB({type:N}),N.\u0275inj=_.cJS({providers:[dl],imports:[[Zt.rt,b.ez,Yn.U8,Mt.BQ],Mt.BQ,fe.ZD]}),N})(),gl=(()=>{class N{constructor(){this.changes=new st.x,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(y,k,tt)=>{if(0==tt||0==k)return`0 of ${tt}`;const Ut=y*k;return`${Ut+1} \u2013 ${Ut<(tt=Math.max(tt,0))?Math.min(Ut+k,tt):Ut+k} of ${tt}`}}}return N.\u0275fac=function(y){return new(y||N)},N.\u0275prov=_.Yz7({token:N,factory:N.\u0275fac,providedIn:"root"}),N})();const Pu={provide:gl,deps:[[new _.FiY,new _.tp0,gl]],useFactory:function(N){return N||new gl}};let se=(()=>{class N{}return N.\u0275fac=function(y){return new(y||N)},N.\u0275mod=_.oAB({type:N}),N.\u0275inj=_.cJS({providers:[Pu],imports:[[b.ez,r.ot,gc,el,Mt.BQ]]}),N})(),Kn=(()=>{class N{}return N.\u0275fac=function(y){return new(y||N)},N.\u0275mod=_.oAB({type:N}),N.\u0275inj=_.cJS({imports:[[b.ez,Mt.BQ],Mt.BQ]}),N})();var Un=m(20773);let qu=(()=>{class N{}return N.\u0275fac=function(y){return new(y||N)},N.\u0275mod=_.oAB({type:N}),N.\u0275inj=_.cJS({imports:[[Mt.si,Mt.BQ],Mt.BQ]}),N})(),Nc=(()=>{class N{}return N.\u0275fac=function(y){return new(y||N)},N.\u0275mod=_.oAB({type:N}),N.\u0275inj=_.cJS({imports:[[b.ez,Mt.BQ],Mt.BQ]}),N})(),Bl=(()=>{class N{}return N.\u0275fac=function(y){return new(y||N)},N.\u0275mod=_.oAB({type:N}),N.\u0275inj=_.cJS({}),N})(),nh=(()=>{class N{}return N.\u0275fac=function(y){return new(y||N)},N.\u0275mod=_.oAB({type:N}),N.\u0275inj=_.cJS({imports:[[Bl,Mt.si,Mt.BQ,Ar.Q8],Bl,Mt.BQ]}),N})();var ra=m(57261);let ec=(()=>{class N{constructor(){this.changes=new st.x}}return N.\u0275fac=function(y){return new(y||N)},N.\u0275prov=_.Yz7({token:N,factory:N.\u0275fac,providedIn:"root"}),N})();const bu={provide:ec,deps:[[new _.FiY,new _.tp0,ec]],useFactory:function(N){return N||new ec}};let Ah=(()=>{class N{}return N.\u0275fac=function(y){return new(y||N)},N.\u0275mod=_.oAB({type:N}),N.\u0275inj=_.cJS({providers:[bu],imports:[[b.ez,Mt.BQ]]}),N})();m(32076),m(61135),m(68306),m(30576),m(39646);let en=(()=>{class N{}return N.\u0275fac=function(y){return new(y||N)},N.\u0275mod=_.oAB({type:N}),N.\u0275inj=_.cJS({imports:[[fe.Cl]]}),N})(),Qh=(()=>{class N{}return N.\u0275fac=function(y){return new(y||N)},N.\u0275mod=_.oAB({type:N}),N.\u0275inj=_.cJS({imports:[[en,Mt.BQ],Mt.BQ]}),N})(),Hh=(()=>{class N{}return N.\u0275fac=function(y){return new(y||N)},N.\u0275mod=_.oAB({type:N}),N.\u0275inj=_.cJS({}),N})(),Es=(()=>{class N{}return N.\u0275fac=function(y){return new(y||N)},N.\u0275mod=_.oAB({type:N}),N.\u0275inj=_.cJS({imports:[[Hh,Mt.BQ],Mt.BQ]}),N})();var Gh=m(33);let md=(()=>{class N{}return N.\u0275fac=function(y){return new(y||N)},N.\u0275mod=_.oAB({type:N,bootstrap:[Gn]}),N.\u0275inj=_.cJS({providers:[Jt.d,ut.v,{provide:_.ip1,useFactory:Vd,deps:[Jt.d],multi:!0}],imports:[[T.b2,Gh.k,Ht,e.u5,e.UX,Se.PW,Nc,r.ot,ae.JF,Ue.Bb,zn,lr,r.ot,aa,Js,Be,_t,Fa,wl,Oc.Is,kt.t,Fn.To,Is.N6,s.Ps,Ul.c,Mi,hr.Tx,Mt.XK,se,Kn,Un.Cq,qu,Mt.si,gc,Re,Nc,nh,ra.ZX,Ah,Qh,u.Nh,Je,el,Es,Je,r.ot,Re,s.Ps,Mi]]}),N})();function Vd(N){return()=>N.Init()}(0,_.G48)(),T.q6().bootstrapModule(md).catch(N=>console.error(N))},51707:(U,$,m)=>{"use strict";m.d($,{L:()=>e});var T=m(15861),_=m(68699);class e{constructor(n){this.swaggerUrl=n,this.GenerateBlocks=[],this.GenerateFunctions=[],this.fieldXMLObjects=[],this.fieldXMLFunctions=[],this.hasError=!0,this.paths=[],this.name="",this.operations=[],this.basePath="",this.tagsSwagger=[],this.openApiDocument=null,this.cacheCategSwaggerFromPaths=[]}ParseSwagger(){var n=this;return(0,T.Z)(function*(){var r,s=n;s.fieldXMLObjects.push(`<label text="${s.swaggerUrl}"></label>`),s.fieldXMLFunctions.push({id:"",gui:`<label text="${s.swaggerUrl}"></label>`});var u=null;try{var b=yield m(10695).default(n.swaggerUrl);u=b.spec}catch(Z){return console.error(`parseSwagger ${n.swaggerUrl}`,Z),s.fieldXMLObjects.push("<label text='Error parsing!'></label>"),n}n.hasError=!1,n.basePath=u.basePath||"";var x=null===(r=u.components)||void 0===r?void 0:r.schemas;return(null==x||null==x)&&(x=u.definitions),x?Object.keys(x).sort().forEach(function(Z){var ot=x[Z],et=s.findProperties(ot),Tt=`<block type="${Z}">`;et.forEach(function(Pt){if(Pt.value&&Pt.value.type){var pt=s.GenerateShadowField(Pt.value.type,Pt.key,null);pt.length>0&&(Tt+=`<value name="val_${Pt.key}">${pt}</value>`)}}),s.fieldXMLObjects.push(Tt+="</block>"),s.GenerateBlocks.push(s.GenerateBlock(ot,Z))}):console.log("_A",u),u.paths&&Object.keys(u.paths).forEach(function(Z){var ot=u.paths[Z];s.paths.push({id:Z,nrOps:Object.keys(ot).length}),Object.keys(ot).forEach(function(et){s.GenerateFunctions.push(s.GenerateFunction(ot,Z,ot[et],et))})}),s.openApiDocument=u,s})()}categSwagger(){var n=this.findHostNameRegular();(n=n.split(".").join("")).length>5&&n.substring(0,5);var u=this.nameCategSwagger();return'<category name="Objects" custom="objects_'+u+'"></category><category name="AllApi" custom="AllApi_'+u+'"></category>'}GenerateBlock(n,r){var s=this,u=r,x=s.findProperties(n);return function(B,Z){B[u]={init:function(){var ot=!1,et=[];n.enum&&(ot=!0,et=Object.keys(n.enum).map(n["x-enumNames"]?pt=>[n["x-enumNames"][pt],pt]:pt=>[n.enum[pt],pt]));var Pt=this.appendDummyInput().appendField(r);ot?(et=et.map(pt=>{var It,Ht;return[null===(It=pt[0])||void 0===It?void 0:It.toString(),null===(Ht=pt[1])||void 0===Ht?void 0:Ht.toString()]}),Pt.appendField(new _.FieldDropdown(et),`val_${r}`)):x.forEach(pt=>{var It,Ht=pt.key;if(pt.value.nullable&&0==pt.value.nullable&&(Ht+="*"),null===(It=pt.value)||void 0===It?void 0:It.type){var Jt=pt.value.type||"";if("object"==Jt){var Ct=pt.value.$$ref||"";Ct.length>0&&(Jt=Ct.substring(Ct.lastIndexOf("/")+1))}Ht+=":"+Jt}pt.value.$ref&&(Ht+="->"+pt.value.$ref.replaceAll("#/components/schemas/","")),this.appendValueInput(`val_${pt.key}`).appendField(`${Ht}`)}),this.setOutput(!0,u)}},Z[u]=function(ot){{var et=!1;n.enum&&(et=!0);var Tt=s.findProperties(n);const Ht=99,Jt=0;var Pt="",pt=[];return Tt.forEach(Ct=>{let bt=Z.valueToCode(ot,`val_${Ct.key}`,Jt);""===bt&&(bt="null"),null==bt&&(bt="null"),pt.push(`"${Ct.key}":${bt}`)}),Pt="{ "+pt.join(",")+" }",et&&(Pt=ot.getFieldValue(`val_${r}`)),[Pt,Ht]}}}}findRootSite(){var n,r,s="";if((null===(r=null===(n=this.openApiDocument)||void 0===n?void 0:n.host)||void 0===r?void 0:r.length)>0){var u=this.openApiDocument.host;s=Array.isArray(u)?this.openApiDocument.schemes[0]+"://"+u[0]:this.openApiDocument.schemes[0]+"://"+u}else s=this.swaggerUrl;var b="";if(s.startsWith("http://")||s.startsWith("https://")){var x=new URL(s);b=x.protocol+"//"+x.hostname,x.port.length>0&&(b+=":"+x.port)}return b}GenerateShadowField(n,r,s){switch(n){case"integer":return`<block type='math_number'><field name='NUM'>${s||0}</field></block>`;case"string":return`<block type='text'><field name='TEXT'>${s||`please enter ${r}`}</field></block>`;case"boolean":return`<block type='logic_boolean'><field name='BOOL'>${s||"FALSE"}</field></block>`;case"array":return'<block type="lists_create_with"> <mutation items="0"></mutation></block>';default:return""}}GenerateNameFunction(n,r,s,u){return u+"_"+r.replaceAll("/","_").replaceAll("{","__").replaceAll("}","")}GenerateFunction(n,r,s,u){var b=this,x=b.GenerateNameFunction(n,r,s,u),Z=s,ot=`<block type="text_print"> <value name="TEXT"><block type="${x}">`;Z.parameters&&Z.parameters.forEach(Ht=>{if(Ht.type)(Jt=b.GenerateShadowField(Ht.type,Ht.name,null)).length>0&&(ot+=`<value name="val_${Ht.name}">${Jt}</value>`);else if(Ht.schema&&Ht.schema.type){var Jt;(Jt=b.GenerateShadowField(Ht.schema.type,Ht.name,null)).length>0&&(ot+=`<value name="val_${Ht.name}">${Jt}</value>`)}});var et="",Tt="";try{var Pt=b.findRootSite();if((Pt||"").length>0){var pt=new URL(Pt);et=pt.hostname,Tt=pt.port}}catch(Ht){console.log("find root error",Ht)}var It=b.GenerateShadowField("string","override_host",et=et||" ");return ot+=`<value name="override_Host">${It}</value>`,It=b.GenerateShadowField("integer","override_port",Tt=Tt||"0"),ot+=`<value name="override_Port">${It}</value>`,ot+="</block></value>",b.fieldXMLFunctions.push({id:r,gui:ot+="</block>"}),function(Ht,Jt){Ht[x]={init:function(){var Ct=u;switch(u.toString().toLowerCase()){case"get":Ct="",this.setColour(210);break;case"post":Ct="",this.setColour(165);break;case"put":Ct="",this.setColour(40);break;case"delete":Ct="",this.setColour(10);break;default:console.log(`not found ${u}`),this.setColour(10)}for(var bt=r,st=b.findCategSwaggerFromPaths(),gt=0;gt<st.length;gt++){var lt="/"+st[gt]+"/",Bt=r.indexOf(lt);if(Bt>-1){var Dt=r.substring(Bt+lt.length);Dt.length<bt.length&&(bt=Dt)}}bt.length>25&&(bt=bt.substring(0,25)+"..."),this.appendDummyInput().appendField(new _.FieldImage(`assets/httpImages/${u}.png`,90,20,u)).appendField(`${Ct} ${bt}`);var Et=b.findRootSite();if(Z.parameters&&Z.parameters.forEach(Mt=>{var Nt=Mt.name;if(Mt.required&&(Nt+="*"),Mt.type)Nt+=":"+Mt.type;else if(Mt.schema)if(Mt.schema.enum&&"$$ref"in Mt.schema){var ge=Mt.schema.$$ref.split("/");Nt+="=>"+ge[ge.length-1]}else if(Mt.schema.type)if("object"==Mt.schema.type){var ve=Mt.schema.$$ref||"";ve.length>0&&(Nt+=":"+(ve=ve.substring(ve.lastIndexOf("/")+1)))}else Nt+=":"+Mt.schema.type;this.appendValueInput(`val_${Mt.name}`).appendField(Nt)}),Z.requestBody){var ut="";if(Z.requestBody.content){var rt=Z.requestBody.content["application/json"];if(rt&&rt.schema){var fe=rt.schema.$$ref;fe&&(ut="=>"+fe.substring(fe.lastIndexOf("/")+1))}}this.appendValueInput("val_values").appendField("values"+ut).setCheck()}this.appendValueInput("override_Host").appendField("override Host"),this.appendValueInput("override_Port").appendField("override Port"),this.setTooltip(`${u} ${Et}${r}`),this.setOutput(!0,"")}},Jt[x]=function(Ct){var lt=b.openApiDocument.paths[r][u],Bt=[];"parameters"in lt&&(Bt=lt.parameters);var Dt=!1,Et=Bt.filter($e=>"body"==$e.in).length>0;(Et||"requestBody"in lt)&&(Dt=!0);var ut={},rt={};Dt&&(ut.val_values=Jt.valueToCode(Ct,"val_values",0),rt.val_values=ut.val_values),Bt.forEach($e=>{ut[`val_${$e.name}`]=Jt.valueToCode(Ct,`val_${$e.name}`,0)});var fe=Bt.map($e=>$e.name);Dt&&!Et&&fe.push("values"),fe.push("extraData"),Bt.map($e=>`\${obj['val_${$e.name}']},`);var Nt="function(";Nt+=fe.join(","),Nt+="){\n",Nt+='var rootSite="'+b.findRootSite()+'";\n',Nt+="if(extraData){\n",Nt+="if(extraData.url && extraData.url.host && extraData.url.host.length>0 ){\n",Nt+="rootSite =  changeHost(rootSite, extraData.url.host);\n",Nt+="};\n",Nt+="if(extraData.url && extraData.url.port && extraData.url.port.toString().length>0 ){\n",Nt+="rootSite  =changePort(rootSite , extraData.url.port);\n",Nt+="};\n",Nt+="};\n",Nt+='var strUrl =rootSite +"'+b.basePath+r+'";\n';var ge=Bt.filter($e=>"query"==$e.in);if(ge.length>0){Nt+='strUrl+="?";\n;';var ve=ge.map($e=>`${$e.name}={`+$e.name+"}").join("&");Nt+='strUrl += "'+ve+'";\n;'}var pe=Bt.filter($e=>"path"==$e.in||"query"==$e.in).map($e=>`\n          //this gives error cannot read property 'call' of undefined in acorn\n          //strUrl = strUrl.replace("{${$e.name}}",${$e.name});\n          {\n            var replaceFInd = "{${$e.name}}";\n            var index= strUrl.indexOf(replaceFInd);\n            if(index>=0){\n              var strUrlReplace = strUrl.substring(0,index)+ ${$e.name} + strUrl.substring(index+replaceFInd.length);\n              strUrl = strUrlReplace;\n            }\n\n          };`);if(Nt+=pe.join("\n"),Nt+=`\n{var res= ${u}Xhr(strUrl`,Dt){var He="values";Et&&(He=Bt.filter($e=>"body"==$e.in)[0].name),Nt+=`,JSON.stringify(${He})`}Nt+=");\n",Nt+="var resJS=JSON.parse(res);\n",Nt+="if(resJS.statusOK) return resJS.text;\n",Nt+="errHandler(res);\n}\n",Nt+="}",Nt+="(",Bt.forEach($e=>{Nt+=ut[`val_${$e.name}`]+","}),Dt&&!Et&&(Nt+=rt.val_values+",");var ke="url:{notImportant:1",Ze=Jt.valueToCode(Ct,"override_Host",0);(Ze=Ze||"").length>0&&(ke+=`,host:${Ze}`);var Di=Jt.valueToCode(Ct,"override_Port",0);return(Di=Di||"").length>0&&(ke+=`,port:${Di}`),Nt+=`{${ke+="}"}}\n`,[Nt+=")",99]}}}findProperties(n){var r=[];return n.properties&&Object.keys(n.properties).forEach(s=>{r.push({key:s,value:n.properties[s]})}),r}TranslateToBlocklyType(n){return"integer"==n?"Number":"string"==n?"String":"bool"==n?"Boolean":"array"==n?"Array":(console.error("not found TranslateToBlocklyType item"+n),"not found type"+n)}nameCategSwagger(){return`catSwagger${this.findHostNameRegular()}_${this.name}`}findHostNameRegular(){var n,r,s,u="";if((null===(r=null===(n=this.openApiDocument)||void 0===n?void 0:n.host)||void 0===r?void 0:r.length)>0){var b=this.openApiDocument.host;u=Array.isArray(b)?this.openApiDocument.schemes[0]+"://"+b[0]:this.openApiDocument.schemes[0]+"://"+b}else u=this.swaggerUrl;var x="(localSite)";if(u.startsWith("http://")||u.startsWith("https://")){var B=new URL(u),Z=null!==(s=B.port)&&void 0!==s?s:80;x=B.hostname+Z}return x.split(".").join("")}metaBlocks(){var n=this;return function(r,s){var u;r[u=`meta_swagger_controllers_${n.name}`]={init:function(){this.appendDummyInput().appendField("categories_"+n.name),this.setOutput(!0,null),this.setColour(30),this.setTooltip(""),this.setHelpUrl(n.swaggerUrl)}},s[u]=function(b){var B=n.findCategSwaggerFromPaths().map(et=>({name:et}));return[JSON.stringify({name:n.name,categories:B}),s.ORDER_NONE]},r[u=`meta_swagger_controllers_actions_${n.name}`]={init:function(){this.appendDummyInput().appendField("categories_actions"+n.name),this.setOutput(!0,null),this.setColour(30),this.setTooltip(""),this.setHelpUrl(n.swaggerUrl)}},s[u]=function(b){var B=n.findCategSwaggerFromPaths().map(et=>({name:et,ops:n.findfieldXMLFunctions(et).map(Tt=>Tt.id).filter(Tt=>Tt.length>0)}));return[JSON.stringify({name:n.name,categories:B}),s.ORDER_NONE]}}}findCategsFromTags(){var n=this.openApiDocument.paths,r=Object.keys(n),s=this;r.forEach(function(u){var b=n[u];b&&Object.keys(b).forEach(function(B){var Z=b[B].tags;Z&&Z.length>0&&Z.forEach(function(ot){s.cacheCategSwaggerFromPaths.includes(ot)||s.cacheCategSwaggerFromPaths.push(ot),s.operations.push({controller:ot,id:u})})})})}findCategSwaggerFromPaths(){if(this.findCategsFromTags(),this.cacheCategSwaggerFromPaths.length>0)return this.cacheCategSwaggerFromPaths;var n=this.paths.filter(s=>s&&s.id&&s.id.length>0).map(s=>{for(var u=s.id.length,b=s.id.indexOf("{");b>0;){var x=s.id.indexOf("}",b);if(u-x<2){s.id=s.id.substring(0,b);break}b=s.id.indexOf("{",x)}return s}).map(s=>(s.id.lastIndexOf("/")!=s.id.length-1&&(s.id+="/"),s));this.operations=n.filter(s=>s.nrOps>1).map(s=>({arr:s.id.split("/").filter(b=>b.length>0),id:s.id})).map(s=>({controller:s.arr[s.arr.length-1],id:s.id}));var r=n.filter(s=>1==s.nrOps).map(s=>({arr:s.id.split("/").filter(u=>u.length>0),id:s.id})).map(s=>1==s.arr.length?{controller:s.arr[0],id:s.id}:{controller:s.arr[s.arr.length-2],id:s.id});return this.operations.push(...r),this.cacheCategSwaggerFromPaths=[...new Set(this.operations.map(s=>s.controller))],this.cacheCategSwaggerFromPaths}findfieldXMLFunctions(n){Object.keys(this.openApiDocument.paths);var u=this.operations.filter(x=>x.controller==n);return this.fieldXMLFunctions.filter(x=>{if(""==x.id)return!0;var B=x.id+"/",Z=!1;return u.forEach(ot=>{B.startsWith(ot.id)&&(Z=!0)}),!!Z||(u.forEach(ot=>{var et=ot.id.substring(0,ot.id.lastIndexOf("/"))+"{";B.startsWith(et)&&(Z=!0)}),Z)})}}},86931:function(U,$,m){var _,e;_=[m(81069)],void 0!==(e=function(t){"use strict";return t}.apply($,_))&&(U.exports=e)},81069:function(U,$){var _;void 0!==(_=function(){"use strict";var e={connectionTypes:{INPUT_VALUE:1,OUTPUT_VALUE:2,NEXT_STATEMENT:3,PREVIOUS_STATEMENT:4},constants:{},LINE_MODE_MULTIPLIER:40,PAGE_MODE_MULTIPLIER:125,DRAG_RADIUS:5,FLYOUT_DRAG_RADIUS:10,SNAP_RADIUS:28};return e.CONNECTING_SNAP_RADIUS=e.SNAP_RADIUS,e.CURRENT_CONNECTION_PREFERENCE=8,e.BUMP_DELAY=250,e.BUMP_RANDOMNESS=10,e.COLLAPSE_CHARS=30,e.LONGPRESS=750,e.SOUND_LIMIT=100,e.DRAG_STACK=!0,e.HSV_SATURATION=.45,e.HSV_VALUE=.65,e.SPRITE={width:96,height:124,url:"sprites.png"},e.constants.ALIGN={LEFT:-1,CENTRE:0,RIGHT:1},e.DRAG_NONE=0,e.DRAG_STICKY=1,e.DRAG_BEGIN=1,e.DRAG_FREE=2,e.OPPOSITE_TYPE=[],e.OPPOSITE_TYPE[e.connectionTypes.INPUT_VALUE]=e.connectionTypes.OUTPUT_VALUE,e.OPPOSITE_TYPE[e.connectionTypes.OUTPUT_VALUE]=e.connectionTypes.INPUT_VALUE,e.OPPOSITE_TYPE[e.connectionTypes.NEXT_STATEMENT]=e.connectionTypes.PREVIOUS_STATEMENT,e.OPPOSITE_TYPE[e.connectionTypes.PREVIOUS_STATEMENT]=e.connectionTypes.NEXT_STATEMENT,e.VARIABLE_CATEGORY_NAME="VARIABLE",e.VARIABLE_DYNAMIC_CATEGORY_NAME="VARIABLE_DYNAMIC",e.PROCEDURE_CATEGORY_NAME="PROCEDURE",e.RENAME_VARIABLE_ID="RENAME_VARIABLE_ID",e.DELETE_VARIABLE_ID="DELETE_VARIABLE_ID",e.constants.COLLAPSED_INPUT_NAME="_TEMP_COLLAPSED_INPUT",e.constants.COLLAPSED_FIELD_NAME="_TEMP_COLLAPSED_FIELD",e.utils={},e.utils.global=function(){return"object"==typeof self?self:"object"==typeof window?window:"object"==typeof global?global:this}(),e.Msg={},e.utils.global.Blockly||(e.utils.global.Blockly={}),e.utils.global.Blockly.Msg||(e.utils.global.Blockly.Msg=e.Msg),e.utils.colour={},e.utils.colour.parse=function(t){t=String(t).toLowerCase().trim();var n=e.utils.colour.names[t];if(n||(n="0x"==t.substring(0,2)?"#"+t.substring(2):t,/^#[0-9a-f]{6}$/.test(n="#"==n[0]?n:"#"+n)))return n;if(/^#[0-9a-f]{3}$/.test(n))return["#",n[1],n[1],n[2],n[2],n[3],n[3]].join("");var r=t.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return r&&(t=Number(r[1]),n=Number(r[2]),r=Number(r[3]),0<=t&&256>t&&0<=n&&256>n&&0<=r&&256>r)?e.utils.colour.rgbToHex(t,n,r):null},e.utils.colour.rgbToHex=function(t,n,r){return n=t<<16|n<<8|r,16>t?"#"+(16777216|n).toString(16).substr(1):"#"+n.toString(16)},e.utils.colour.hexToRgb=function(t){return(t=e.utils.colour.parse(t))?[(t=parseInt(t.substr(1),16))>>16,t>>8&255,255&t]:[0,0,0]},e.utils.colour.hsvToHex=function(t,n,r){var s=0,u=0,b=0;if(0==n)b=u=s=r;else{var x=Math.floor(t/60),B=t/60-x;t=r*(1-n);var Z=r*(1-n*B);switch(n=r*(1-n*(1-B)),x){case 1:s=Z,u=r,b=t;break;case 2:s=t,u=r,b=n;break;case 3:s=t,u=Z,b=r;break;case 4:s=n,u=t,b=r;break;case 5:s=r,u=t,b=Z;break;case 6:case 0:s=r,u=n,b=t}}return e.utils.colour.rgbToHex(Math.floor(s),Math.floor(u),Math.floor(b))},e.utils.colour.blend=function(t,n,r){return(t=e.utils.colour.parse(t))&&(n=e.utils.colour.parse(n))?(t=e.utils.colour.hexToRgb(t),n=e.utils.colour.hexToRgb(n),e.utils.colour.rgbToHex(Math.round(n[0]+r*(t[0]-n[0])),Math.round(n[1]+r*(t[1]-n[1])),Math.round(n[2]+r*(t[2]-n[2])))):null},e.utils.colour.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},e.utils.Coordinate=function(t,n){this.x=t,this.y=n},e.utils.Coordinate.equals=function(t,n){return t==n||!(!t||!n)&&t.x==n.x&&t.y==n.y},e.utils.Coordinate.distance=function(t,n){var r=t.x-n.x;return t=t.y-n.y,Math.sqrt(r*r+t*t)},e.utils.Coordinate.magnitude=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},e.utils.Coordinate.difference=function(t,n){return new e.utils.Coordinate(t.x-n.x,t.y-n.y)},e.utils.Coordinate.sum=function(t,n){return new e.utils.Coordinate(t.x+n.x,t.y+n.y)},e.utils.Coordinate.prototype.clone=function(){return new e.utils.Coordinate(this.x,this.y)},e.utils.Coordinate.prototype.scale=function(t){return this.x*=t,this.y*=t,this},e.utils.Coordinate.prototype.translate=function(t,n){return this.x+=t,this.y+=n,this},e.utils.Rect=function(t,n,r,s){this.top=t,this.bottom=n,this.left=r,this.right=s},e.utils.Rect.prototype.contains=function(t,n){return t>=this.left&&t<=this.right&&n>=this.top&&n<=this.bottom},e.utils.Rect.prototype.intersects=function(t){return!(this.left>t.right||this.right<t.left||this.top>t.bottom||this.bottom<t.top)},e.utils.string={},e.utils.string.startsWith=function(t,n){return 0==t.lastIndexOf(n,0)},e.utils.string.shortestStringLength=function(t){return t.length?t.reduce(function(n,r){return n.length<r.length?n:r}).length:0},e.utils.string.commonWordPrefix=function(t,n){if(!t.length)return 0;if(1==t.length)return t[0].length;var r=0;n=n||e.utils.string.shortestStringLength(t);for(var s=0;s<n;s++){for(var u=t[0][s],b=1;b<t.length;b++)if(u!=t[b][s])return r;" "==u&&(r=s+1)}for(b=1;b<t.length;b++)if((u=t[b][s])&&" "!=u)return r;return n},e.utils.string.commonWordSuffix=function(t,n){if(!t.length)return 0;if(1==t.length)return t[0].length;var r=0;n=n||e.utils.string.shortestStringLength(t);for(var s=0;s<n;s++){for(var u=t[0].substr(-s-1,1),b=1;b<t.length;b++)if(u!=t[b].substr(-s-1,1))return r;" "==u&&(r=s+1)}for(b=1;b<t.length;b++)if((u=t[b].charAt(t[b].length-s-1))&&" "!=u)return r;return n},e.utils.string.wrap=function(t,n){t=t.split("\n");for(var r=0;r<t.length;r++)t[r]=e.utils.string.wrapLine_(t[r],n);return t.join("\n")},e.utils.string.wrapLine_=function(t,n){if(t.length<=n)return t;for(var r=t.trim().split(/\s+/),s=0;s<r.length;s++)r[s].length>n&&(n=r[s].length);s=-1/0;var u=1;do{var b=s,x=t;t=[];var B=r.length/u,Z=1;for(s=0;s<r.length-1;s++)Z<(s+1.5)/B?(Z++,t[s]=!0):t[s]=!1;t=e.utils.string.wrapMutate_(r,t,n),s=e.utils.string.wrapScore_(r,t,n),t=e.utils.string.wrapToText_(r,t),u++}while(s>b);return x},e.utils.string.wrapScore_=function(t,n,r){for(var s=[0],u=[],b=0;b<t.length;b++)s[s.length-1]+=t[b].length,!0===n[b]?(s.push(0),u.push(t[b].charAt(t[b].length-1))):!1===n[b]&&s[s.length-1]++;for(t=Math.max.apply(Math,s),b=n=0;b<s.length;b++)n-=2*Math.pow(Math.abs(r-s[b]),1.5),n-=Math.pow(t-s[b],1.5),-1!=".?!".indexOf(u[b])?n+=r/3:-1!=",;)]}".indexOf(u[b])&&(n+=r/4);return 1<s.length&&s[s.length-1]<=s[s.length-2]&&(n+=.5),n},e.utils.string.wrapMutate_=function(t,n,r){for(var u,s=e.utils.string.wrapScore_(t,n,r),b=0;b<n.length-1;b++)if(n[b]!=n[b+1]){var x=[].concat(n);x[b]=!x[b],x[b+1]=!x[b+1];var B=e.utils.string.wrapScore_(t,x,r);B>s&&(s=B,u=x)}return u?e.utils.string.wrapMutate_(t,u,r):n},e.utils.string.wrapToText_=function(t,n){for(var r=[],s=0;s<t.length;s++)r.push(t[s]),void 0!==n[s]&&r.push(n[s]?"\n":" ");return r.join("")},e.utils.Size=function(t,n){this.width=t,this.height=n},e.utils.Size.equals=function(t,n){return t==n||!(!t||!n)&&t.width==n.width&&t.height==n.height},e.utils.style={},e.utils.style.getSize=function(t){if("none"!=e.utils.style.getStyle_(t,"display"))return e.utils.style.getSizeWithDisplay_(t);var n=t.style,r=n.display,s=n.visibility,u=n.position;n.visibility="hidden",n.position="absolute",n.display="inline";var b=t.offsetWidth;return t=t.offsetHeight,n.display=r,n.position=u,n.visibility=s,new e.utils.Size(b,t)},e.utils.style.getSizeWithDisplay_=function(t){return new e.utils.Size(t.offsetWidth,t.offsetHeight)},e.utils.style.getStyle_=function(t,n){return e.utils.style.getComputedStyle(t,n)||e.utils.style.getCascadedStyle(t,n)||t.style&&t.style[n]},e.utils.style.getComputedStyle=function(t,n){return document.defaultView&&document.defaultView.getComputedStyle&&(t=document.defaultView.getComputedStyle(t,null))&&(t[n]||t.getPropertyValue(n))||""},e.utils.style.getCascadedStyle=function(t,n){return t.currentStyle?t.currentStyle[n]:null},e.utils.style.getPageOffset=function(t){var n=new e.utils.Coordinate(0,0);t=t.getBoundingClientRect();var r=document.documentElement;return r=new e.utils.Coordinate(window.pageXOffset||r.scrollLeft,window.pageYOffset||r.scrollTop),n.x=t.left+r.x,n.y=t.top+r.y,n},e.utils.style.getViewportPageOffset=function(){var t=document.body,n=document.documentElement;return new e.utils.Coordinate(t.scrollLeft||n.scrollLeft,t.scrollTop||n.scrollTop)},e.utils.style.setElementShown=function(t,n){t.style.display=n?"":"none"},e.utils.style.isRightToLeft=function(t){return"rtl"==e.utils.style.getStyle_(t,"direction")},e.utils.style.getBorderBox=function(t){var n=e.utils.style.getComputedStyle(t,"borderLeftWidth"),r=e.utils.style.getComputedStyle(t,"borderRightWidth"),s=e.utils.style.getComputedStyle(t,"borderTopWidth");return t=e.utils.style.getComputedStyle(t,"borderBottomWidth"),{top:parseFloat(s),right:parseFloat(r),bottom:parseFloat(t),left:parseFloat(n)}},e.utils.style.scrollIntoContainerView=function(t,n,r){t=e.utils.style.getContainerOffsetToScrollInto(t,n,r),n.scrollLeft=t.x,n.scrollTop=t.y},e.utils.style.getContainerOffsetToScrollInto=function(t,n,r){var s=e.utils.style.getPageOffset(t),u=e.utils.style.getPageOffset(n),b=e.utils.style.getBorderBox(n),x=s.x-u.x-b.left;return s=s.y-u.y-b.top,u=e.utils.style.getSizeWithDisplay_(t),t=n.clientWidth-u.width,u=n.clientHeight-u.height,b=n.scrollLeft,n=n.scrollTop,r?(b+=x-t/2,n+=s-u/2):(b+=Math.min(x,Math.max(x-t,0)),n+=Math.min(s,Math.max(s-u,0))),new e.utils.Coordinate(b,n)},e.utils.userAgent={},function(t){function n(s){return-1!=r.indexOf(s.toUpperCase())}e.utils.userAgent.raw=t;var r=e.utils.userAgent.raw.toUpperCase();e.utils.userAgent.IE=n("Trident")||n("MSIE"),e.utils.userAgent.EDGE=n("Edge"),e.utils.userAgent.JAVA_FX=n("JavaFX"),e.utils.userAgent.CHROME=(n("Chrome")||n("CriOS"))&&!e.utils.userAgent.EDGE,e.utils.userAgent.WEBKIT=n("WebKit")&&!e.utils.userAgent.EDGE,e.utils.userAgent.GECKO=n("Gecko")&&!e.utils.userAgent.WEBKIT&&!e.utils.userAgent.IE&&!e.utils.userAgent.EDGE,e.utils.userAgent.ANDROID=n("Android"),t=e.utils.global.navigator&&e.utils.global.navigator.maxTouchPoints,e.utils.userAgent.IPAD=n("iPad")||n("Macintosh")&&0<t,e.utils.userAgent.IPOD=n("iPod"),e.utils.userAgent.IPHONE=n("iPhone")&&!e.utils.userAgent.IPAD&&!e.utils.userAgent.IPOD,e.utils.userAgent.MAC=n("Macintosh"),e.utils.userAgent.TABLET=e.utils.userAgent.IPAD||e.utils.userAgent.ANDROID&&!n("Mobile")||n("Silk"),e.utils.userAgent.MOBILE=!e.utils.userAgent.TABLET&&(e.utils.userAgent.IPOD||e.utils.userAgent.IPHONE||e.utils.userAgent.ANDROID||n("IEMobile"))}(e.utils.global.navigator&&e.utils.global.navigator.userAgent||""),e.utils.noEvent=function(t){t.preventDefault(),t.stopPropagation()},e.utils.isTargetInput=function(t){return"textarea"==t.target.type||"text"==t.target.type||"number"==t.target.type||"email"==t.target.type||"password"==t.target.type||"search"==t.target.type||"tel"==t.target.type||"url"==t.target.type||t.target.isContentEditable||t.target.dataset&&"true"==t.target.dataset.isTextInput},e.utils.getRelativeXY=function(t){var n=new e.utils.Coordinate(0,0),r=t.getAttribute("x");return r&&(n.x=parseInt(r,10)),(r=t.getAttribute("y"))&&(n.y=parseInt(r,10)),(r=(r=t.getAttribute("transform"))&&r.match(e.utils.getRelativeXY.XY_REGEX_))&&(n.x+=Number(r[1]),r[3]&&(n.y+=Number(r[3]))),(t=t.getAttribute("style"))&&-1<t.indexOf("translate")&&(t=t.match(e.utils.getRelativeXY.XY_STYLE_REGEX_))&&(n.x+=Number(t[1]),t[3]&&(n.y+=Number(t[3]))),n},e.utils.getInjectionDivXY_=function(t){for(var n=0,r=0;t;){var s=e.utils.getRelativeXY(t);if(n+=s.x,r+=s.y,-1!=(" "+(t.getAttribute("class")||"")+" ").indexOf(" injectionDiv "))break;t=t.parentNode}return new e.utils.Coordinate(n,r)},e.utils.getRelativeXY.XY_REGEX_=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,e.utils.getRelativeXY.XY_STYLE_REGEX_=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,e.utils.isRightButton=function(t){return!(!t.ctrlKey||!e.utils.userAgent.MAC)||2==t.button},e.utils.mouseToSvg=function(t,n,r){var s=n.createSVGPoint();return s.x=t.clientX,s.y=t.clientY,r||(r=n.getScreenCTM().inverse()),s.matrixTransform(r)},e.utils.getScrollDeltaPixels=function(t){switch(t.deltaMode){default:return{x:t.deltaX,y:t.deltaY};case 1:return{x:t.deltaX*e.LINE_MODE_MULTIPLIER,y:t.deltaY*e.LINE_MODE_MULTIPLIER};case 2:return{x:t.deltaX*e.PAGE_MODE_MULTIPLIER,y:t.deltaY*e.PAGE_MODE_MULTIPLIER}}},e.utils.tokenizeInterpolation=function(t){return e.utils.tokenizeInterpolation_(t,!0)},e.utils.replaceMessageReferences=function(t){return"string"!=typeof t?t:(t=e.utils.tokenizeInterpolation_(t,!1)).length?String(t[0]):""},e.utils.checkMessageReferences=function(t){for(var n=!0,r=e.Msg,s=t.match(/%{BKY_[A-Z]\w*}/gi),u=0;u<s.length;u++)null==r[s[u].toUpperCase().slice(6,-1)]&&(console.warn("No message string for "+s[u]+" in "+t),n=!1);return n},e.utils.tokenizeInterpolation_=function(t,n){var r=[],s=t.split("");s.push("");var u=0;t=[];for(var b=null,x=0;x<s.length;x++){var B=s[x];0==u?"%"==B?((B=t.join(""))&&r.push(B),t.length=0,u=1):t.push(B):1==u?"%"==B?(t.push(B),u=0):n&&"0"<=B&&"9">=B?(u=2,b=B,(B=t.join(""))&&r.push(B),t.length=0):"{"==B?u=3:(t.push("%",B),u=0):2==u?"0"<=B&&"9">=B?b+=B:(r.push(parseInt(b,10)),x--,u=0):3==u&&(""==B?(t.splice(0,0,"%{"),x--,u=0):"}"!=B?t.push(B):(u=t.join(""),/[A-Z]\w*/i.test(u)?(B=u.toUpperCase(),(B=e.utils.string.startsWith(B,"BKY_")?B.substring(4):null)&&B in e.Msg?"string"==typeof(u=e.Msg[B])?Array.prototype.push.apply(r,e.utils.tokenizeInterpolation_(u,n)):r.push(n?String(u):u):r.push("%{"+u+"}")):r.push("%{"+u+"}"),u=t.length=0))}for((B=t.join(""))&&r.push(B),n=[],x=t.length=0;x<r.length;++x)"string"==typeof r[x]?t.push(r[x]):((B=t.join(""))&&n.push(B),t.length=0,n.push(r[x]));return(B=t.join(""))&&n.push(B),t.length=0,n},e.utils.genUid=function(){for(var t=e.utils.genUid.soup_.length,n=[],r=0;20>r;r++)n[r]=e.utils.genUid.soup_.charAt(Math.random()*t);return n.join("")},e.utils.genUid.soup_="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e.utils.is3dSupported=function(){if(void 0!==e.utils.is3dSupported.cached_)return e.utils.is3dSupported.cached_;if(!e.utils.global.getComputedStyle)return!1;var t=document.createElement("p"),n="none",r={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};for(var s in document.body.insertBefore(t,null),r)if(void 0!==t.style[s]){if(t.style[s]="translate3d(1px,1px,1px)",!(n=e.utils.global.getComputedStyle(t)))return document.body.removeChild(t),!1;n=n.getPropertyValue(r[s])}return document.body.removeChild(t),e.utils.is3dSupported.cached_="none"!==n,e.utils.is3dSupported.cached_},e.utils.runAfterPageLoad=function(t){if("object"!=typeof document)throw Error("Blockly.utils.runAfterPageLoad() requires browser document.");if("complete"==document.readyState)t();else var n=setInterval(function(){"complete"==document.readyState&&(clearInterval(n),t())},10)},e.utils.getViewportBBox=function(){var t=e.utils.style.getViewportPageOffset();return new e.utils.Rect(t.y,document.documentElement.clientHeight+t.y,t.x,document.documentElement.clientWidth+t.x)},e.utils.arrayRemove=function(t,n){return-1!=(n=t.indexOf(n))&&(t.splice(n,1),!0)},e.utils.getDocumentScroll=function(){var t=document.documentElement,n=window;return e.utils.userAgent.IE&&n.pageYOffset!=t.scrollTop?new e.utils.Coordinate(t.scrollLeft,t.scrollTop):new e.utils.Coordinate(n.pageXOffset||t.scrollLeft,n.pageYOffset||t.scrollTop)},e.utils.getBlockTypeCounts=function(t,n){var r=Object.create(null),s=t.getDescendants(!0);for(n&&(t=t.getNextBlock())&&(t=s.indexOf(t),s.splice(t,s.length-t)),t=0;n=s[t];t++)r[n.type]?r[n.type]++:r[n.type]=1;return r},e.utils.screenToWsCoordinates=function(t,n){var r=n.x;n=n.y;var s=t.getInjectionDiv().getBoundingClientRect();return r=new e.utils.Coordinate(r-s.left,n-s.top),n=t.getOriginOffsetInPixels(),e.utils.Coordinate.difference(r,n).scale(1/t.scale)},e.utils.parseBlockColour=function(t){var n="string"==typeof t?e.utils.replaceMessageReferences(t):t,r=Number(n);if(!isNaN(r)&&0<=r&&360>=r)return{hue:r,hex:e.utils.colour.hsvToHex(r,e.HSV_SATURATION,255*e.HSV_VALUE)};if(r=e.utils.colour.parse(n))return{hue:null,hex:r};throw r='Invalid colour: "'+n+'"',t!=n&&(r+=' (from "'+t+'")'),Error(r)},e.Touch={},e.Touch.TOUCH_ENABLED="ontouchstart"in e.utils.global||!!(e.utils.global.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!e.utils.global.navigator||!e.utils.global.navigator.maxTouchPoints&&!e.utils.global.navigator.msMaxTouchPoints),e.Touch.touchIdentifier_=null,e.Touch.TOUCH_MAP={},e.utils.global.PointerEvent?e.Touch.TOUCH_MAP={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]}:e.Touch.TOUCH_ENABLED&&(e.Touch.TOUCH_MAP={mousedown:["touchstart"],mousemove:["touchmove"],mouseup:["touchend","touchcancel"]}),e.longPid_=0,e.longStart=function(t,n){e.longStop_(),t.changedTouches&&1!=t.changedTouches.length||(e.longPid_=setTimeout(function(){t.changedTouches&&(t.button=2,t.clientX=t.changedTouches[0].clientX,t.clientY=t.changedTouches[0].clientY),n&&n.handleRightClick(t)},e.LONGPRESS))},e.longStop_=function(){e.longPid_&&(clearTimeout(e.longPid_),e.longPid_=0)},e.Touch.clearTouchIdentifier=function(){e.Touch.touchIdentifier_=null},e.Touch.shouldHandleEvent=function(t){return!e.Touch.isMouseOrTouchEvent(t)||e.Touch.checkTouchIdentifier(t)},e.Touch.getTouchIdentifierFromEvent=function(t){return null!=t.pointerId?t.pointerId:t.changedTouches&&t.changedTouches[0]&&null!=t.changedTouches[0].identifier?t.changedTouches[0].identifier:"mouse"},e.Touch.checkTouchIdentifier=function(t){var n=e.Touch.getTouchIdentifierFromEvent(t);return null!=e.Touch.touchIdentifier_?e.Touch.touchIdentifier_==n:("mousedown"==t.type||"touchstart"==t.type||"pointerdown"==t.type)&&(e.Touch.touchIdentifier_=n,!0)},e.Touch.setClientFromTouch=function(t){if(e.utils.string.startsWith(t.type,"touch")){var n=t.changedTouches[0];t.clientX=n.clientX,t.clientY=n.clientY}},e.Touch.isMouseOrTouchEvent=function(t){return e.utils.string.startsWith(t.type,"touch")||e.utils.string.startsWith(t.type,"mouse")||e.utils.string.startsWith(t.type,"pointer")},e.Touch.isTouchEvent=function(t){return e.utils.string.startsWith(t.type,"touch")||e.utils.string.startsWith(t.type,"pointer")},e.Touch.splitEventByTouches=function(t){var n=[];if(t.changedTouches)for(var r=0;r<t.changedTouches.length;r++)n[r]={type:t.type,changedTouches:[t.changedTouches[r]],target:t.target,stopPropagation:function(){t.stopPropagation()},preventDefault:function(){t.preventDefault()}};else n.push(t);return n},e.browserEvents={},e.browserEvents.conditionalBind=function(t,n,r,s,u,b){var x=!1,B=function(Pt){var pt=!u;Pt=e.Touch.splitEventByTouches(Pt);for(var Ht,It=0;Ht=Pt[It];It++)(!pt||e.Touch.shouldHandleEvent(Ht))&&(e.Touch.setClientFromTouch(Ht),r?s.call(r,Ht):s(Ht),x=!0)},Z=[];if(e.utils.global.PointerEvent&&n in e.Touch.TOUCH_MAP)for(var et,ot=0;et=e.Touch.TOUCH_MAP[n][ot];ot++)t.addEventListener(et,B,!1),Z.push([t,et,B]);else if(t.addEventListener(n,B,!1),Z.push([t,n,B]),n in e.Touch.TOUCH_MAP){var Tt=function(Pt){B(Pt),x&&!b&&Pt.preventDefault()};for(ot=0;et=e.Touch.TOUCH_MAP[n][ot];ot++)t.addEventListener(et,Tt,!1),Z.push([t,et,Tt])}return Z},e.browserEvents.bind=function(t,n,r,s){var u=function(ot){r?s.call(r,ot):s(ot)},b=[];if(e.utils.global.PointerEvent&&n in e.Touch.TOUCH_MAP)for(var B,x=0;B=e.Touch.TOUCH_MAP[n][x];x++)t.addEventListener(B,u,!1),b.push([t,B,u]);else if(t.addEventListener(n,u,!1),b.push([t,n,u]),n in e.Touch.TOUCH_MAP){var Z=function(ot){if(ot.changedTouches&&1==ot.changedTouches.length){var et=ot.changedTouches[0];ot.clientX=et.clientX,ot.clientY=et.clientY}u(ot),ot.preventDefault()};for(x=0;B=e.Touch.TOUCH_MAP[n][x];x++)t.addEventListener(B,Z,!1),b.push([t,B,Z])}return b},e.browserEvents.unbind=function(t){for(;t.length;){var n=t.pop(),r=n[2];n[0].removeEventListener(n[1],r,!1)}return r},e.ComponentManager=function(){this.componentData_=Object.create(null),this.capabilityToComponentIds_=Object.create(null)},e.ComponentManager.prototype.addComponent=function(t,n){var r=t.component.id;if(!n&&this.componentData_[r])throw Error('Plugin "'+r+'" with capabilities "'+this.componentData_[r].capabilities+'" already added.');this.componentData_[r]=t,n=[];for(var s=0;s<t.capabilities.length;s++){var u=String(t.capabilities[s]).toLowerCase();n.push(u),void 0===this.capabilityToComponentIds_[u]?this.capabilityToComponentIds_[u]=[r]:this.capabilityToComponentIds_[u].push(r)}this.componentData_[r].capabilities=n},e.ComponentManager.prototype.removeComponent=function(t){var n=this.componentData_[t];if(n){for(var r=0;r<n.capabilities.length;r++){var s=String(n.capabilities[r]).toLowerCase();this.capabilityToComponentIds_[s].splice(this.capabilityToComponentIds_[s].indexOf(t),1)}delete this.componentData_[t]}},e.ComponentManager.prototype.addCapability=function(t,n){if(!this.getComponent(t))throw Error('Cannot add capability, "'+n+'". Plugin "'+t+'" has not been added to the ComponentManager');this.hasCapability(t,n)?console.warn('Plugin "'+t+'already has capability "'+n+'"'):(n=String(n).toLowerCase(),this.componentData_[t].capabilities.push(n),this.capabilityToComponentIds_[n].push(t))},e.ComponentManager.prototype.removeCapability=function(t,n){if(!this.getComponent(t))throw Error('Cannot remove capability, "'+n+'". Plugin "'+t+'" has not been added to the ComponentManager');this.hasCapability(t,n)?(n=String(n).toLowerCase(),this.componentData_[t].capabilities.splice(this.componentData_[t].capabilities.indexOf(n),1),this.capabilityToComponentIds_[n].splice(this.capabilityToComponentIds_[n].indexOf(t),1)):console.warn('Plugin "'+t+"doesn't have capability \""+n+'" to remove')},e.ComponentManager.prototype.hasCapability=function(t,n){return n=String(n).toLowerCase(),-1!==this.componentData_[t].capabilities.indexOf(n)},e.ComponentManager.prototype.getComponent=function(t){return this.componentData_[t]&&this.componentData_[t].component},e.ComponentManager.prototype.getComponents=function(t,n){if(t=String(t).toLowerCase(),!(t=this.capabilityToComponentIds_[t]))return[];var r=[];if(n){var s=[],u=this.componentData_;t.forEach(function(b){s.push(u[b])}),s.sort(function(b,x){return b.weight-x.weight}),s.forEach(function(b){r.push(b.component)})}else u=this.componentData_,t.forEach(function(b){r.push(u[b].component)});return r},e.ComponentManager.Capability=function(t){this.name_=t},e.ComponentManager.Capability.prototype.toString=function(){return this.name_},e.ComponentManager.Capability.POSITIONABLE=new e.ComponentManager.Capability("positionable"),e.ComponentManager.Capability.DRAG_TARGET=new e.ComponentManager.Capability("drag_target"),e.ComponentManager.Capability.DELETE_AREA=new e.ComponentManager.Capability("delete_area"),e.ComponentManager.Capability.AUTOHIDEABLE=new e.ComponentManager.Capability("autohideable"),e.utils.Svg=function(t){this.tagName_=t},e.utils.Svg.prototype.toString=function(){return this.tagName_},e.utils.Svg.ANIMATE=new e.utils.Svg("animate"),e.utils.Svg.CIRCLE=new e.utils.Svg("circle"),e.utils.Svg.CLIPPATH=new e.utils.Svg("clipPath"),e.utils.Svg.DEFS=new e.utils.Svg("defs"),e.utils.Svg.FECOMPOSITE=new e.utils.Svg("feComposite"),e.utils.Svg.FECOMPONENTTRANSFER=new e.utils.Svg("feComponentTransfer"),e.utils.Svg.FEFLOOD=new e.utils.Svg("feFlood"),e.utils.Svg.FEFUNCA=new e.utils.Svg("feFuncA"),e.utils.Svg.FEGAUSSIANBLUR=new e.utils.Svg("feGaussianBlur"),e.utils.Svg.FEPOINTLIGHT=new e.utils.Svg("fePointLight"),e.utils.Svg.FESPECULARLIGHTING=new e.utils.Svg("feSpecularLighting"),e.utils.Svg.FILTER=new e.utils.Svg("filter"),e.utils.Svg.FOREIGNOBJECT=new e.utils.Svg("foreignObject"),e.utils.Svg.G=new e.utils.Svg("g"),e.utils.Svg.IMAGE=new e.utils.Svg("image"),e.utils.Svg.LINE=new e.utils.Svg("line"),e.utils.Svg.PATH=new e.utils.Svg("path"),e.utils.Svg.PATTERN=new e.utils.Svg("pattern"),e.utils.Svg.POLYGON=new e.utils.Svg("polygon"),e.utils.Svg.RECT=new e.utils.Svg("rect"),e.utils.Svg.SVG=new e.utils.Svg("svg"),e.utils.Svg.TEXT=new e.utils.Svg("text"),e.utils.Svg.TSPAN=new e.utils.Svg("tspan"),e.utils.dom={},e.utils.dom.SVG_NS="http://www.w3.org/2000/svg",e.utils.dom.HTML_NS="http://www.w3.org/1999/xhtml",e.utils.dom.XLINK_NS="http://www.w3.org/1999/xlink",e.utils.dom.NodeType={ELEMENT_NODE:1,TEXT_NODE:3,COMMENT_NODE:8,DOCUMENT_POSITION_CONTAINED_BY:16},e.utils.dom.cacheWidths_=null,e.utils.dom.cacheReference_=0,e.utils.dom.canvasContext_=null,e.utils.dom.createSvgElement=function(t,n,r){for(var s in t=document.createElementNS(e.utils.dom.SVG_NS,String(t)),n)t.setAttribute(s,n[s]);return document.body.runtimeStyle&&(t.runtimeStyle=t.currentStyle=t.style),r&&r.appendChild(t),t},e.utils.dom.addClass=function(t,n){var r=t.getAttribute("class")||"";return-1==(" "+r+" ").indexOf(" "+n+" ")&&(r&&(r+=" "),t.setAttribute("class",r+n),!0)},e.utils.dom.removeClasses=function(t,n){n=n.split(" ");for(var r=0;r<n.length;r++)e.utils.dom.removeClass(t,n[r])},e.utils.dom.removeClass=function(t,n){var r=t.getAttribute("class");if(-1==(" "+r+" ").indexOf(" "+n+" "))return!1;r=r.split(/\s+/);for(var s=0;s<r.length;s++)r[s]&&r[s]!=n||(r.splice(s,1),s--);return r.length?t.setAttribute("class",r.join(" ")):t.removeAttribute("class"),!0},e.utils.dom.hasClass=function(t,n){return-1!=(" "+t.getAttribute("class")+" ").indexOf(" "+n+" ")},e.utils.dom.removeNode=function(t){return t&&t.parentNode?t.parentNode.removeChild(t):null},e.utils.dom.insertAfter=function(t,n){var r=n.nextSibling;if(!(n=n.parentNode))throw Error("Reference node has no parent.");r?n.insertBefore(t,r):n.appendChild(t)},e.utils.dom.containsNode=function(t,n){return!!(t.compareDocumentPosition(n)&e.utils.dom.NodeType.DOCUMENT_POSITION_CONTAINED_BY)},e.utils.dom.setCssTransform=function(t,n){t.style.transform=n,t.style["-webkit-transform"]=n},e.utils.dom.startTextWidthCache=function(){e.utils.dom.cacheReference_++,e.utils.dom.cacheWidths_||(e.utils.dom.cacheWidths_=Object.create(null))},e.utils.dom.stopTextWidthCache=function(){e.utils.dom.cacheReference_--,e.utils.dom.cacheReference_||(e.utils.dom.cacheWidths_=null)},e.utils.dom.getTextWidth=function(t){var r,n=t.textContent+"\n"+t.className.baseVal;if(e.utils.dom.cacheWidths_&&(r=e.utils.dom.cacheWidths_[n]))return r;try{r=e.utils.userAgent.IE||e.utils.userAgent.EDGE?t.getBBox().width:t.getComputedTextLength()}catch(s){return 8*t.textContent.length}return e.utils.dom.cacheWidths_&&(e.utils.dom.cacheWidths_[n]=r),r},e.utils.dom.getFastTextWidth=function(t,n,r,s){return e.utils.dom.getFastTextWidthWithSizeString(t,n+"pt",r,s)},e.utils.dom.getFastTextWidthWithSizeString=function(t,n,r,s){var b,u=t.textContent;return t=u+"\n"+t.className.baseVal,e.utils.dom.cacheWidths_&&(b=e.utils.dom.cacheWidths_[t])||(e.utils.dom.canvasContext_||((b=document.createElement("canvas")).className="blocklyComputeCanvas",document.body.appendChild(b),e.utils.dom.canvasContext_=b.getContext("2d")),e.utils.dom.canvasContext_.font=r+" "+n+" "+s,b=e.utils.dom.canvasContext_.measureText(u).width,e.utils.dom.cacheWidths_&&(e.utils.dom.cacheWidths_[t]=b)),b},e.utils.dom.measureFontMetrics=function(t,n,r,s){var u=document.createElement("span");u.style.font=r+" "+n+" "+s,u.textContent=t,(t=document.createElement("div")).style.width="1px",t.style.height="0px",(n=document.createElement("div")).setAttribute("style","position: fixed; top: 0; left: 0; display: flex;"),n.appendChild(u),n.appendChild(t),document.body.appendChild(n);try{r={},n.style.alignItems="baseline",r.baseline=t.offsetTop-u.offsetTop,n.style.alignItems="flex-end",r.height=t.offsetTop-u.offsetTop}finally{document.body.removeChild(n)}return r},e.utils.math={},e.utils.math.toRadians=function(t){return t*Math.PI/180},e.utils.math.toDegrees=function(t){return 180*t/Math.PI},e.utils.math.clamp=function(t,n,r){if(r<t){var s=r;r=t,t=s}return Math.max(t,Math.min(n,r))},e.DropDownDiv=function(){},e.DropDownDiv.boundsElement_=null,e.DropDownDiv.owner_=null,e.DropDownDiv.positionToField_=null,e.DropDownDiv.ARROW_SIZE=16,e.DropDownDiv.BORDER_SIZE=1,e.DropDownDiv.ARROW_HORIZONTAL_PADDING=12,e.DropDownDiv.PADDING_Y=16,e.DropDownDiv.ANIMATION_TIME=.25,e.DropDownDiv.animateOutTimer_=null,e.DropDownDiv.onHide_=null,e.DropDownDiv.rendererClassName_="",e.DropDownDiv.themeClassName_="",e.DropDownDiv.createDom=function(){if(!e.DropDownDiv.DIV_){var t=document.createElement("div");t.className="blocklyDropDownDiv",(e.parentContainer||document.body).appendChild(t),e.DropDownDiv.DIV_=t;var n=document.createElement("div");n.className="blocklyDropDownContent",t.appendChild(n),e.DropDownDiv.content_=n,(n=document.createElement("div")).className="blocklyDropDownArrow",t.appendChild(n),e.DropDownDiv.arrow_=n,e.DropDownDiv.DIV_.style.opacity=0,e.DropDownDiv.DIV_.style.transition="transform "+e.DropDownDiv.ANIMATION_TIME+"s, opacity "+e.DropDownDiv.ANIMATION_TIME+"s",t.addEventListener("focusin",function(){e.utils.dom.addClass(t,"blocklyFocused")}),t.addEventListener("focusout",function(){e.utils.dom.removeClass(t,"blocklyFocused")})}},e.DropDownDiv.setBoundsElement=function(t){e.DropDownDiv.boundsElement_=t},e.DropDownDiv.getContentDiv=function(){return e.DropDownDiv.content_},e.DropDownDiv.clearContent=function(){e.DropDownDiv.content_.textContent="",e.DropDownDiv.content_.style.width=""},e.DropDownDiv.setColour=function(t,n){e.DropDownDiv.DIV_.style.backgroundColor=t,e.DropDownDiv.DIV_.style.borderColor=n},e.DropDownDiv.showPositionedByBlock=function(t,n,r,s){return e.DropDownDiv.showPositionedByRect_(e.DropDownDiv.getScaledBboxOfBlock_(n),t,r,s)},e.DropDownDiv.showPositionedByField=function(t,n,r){return e.DropDownDiv.positionToField_=!0,e.DropDownDiv.showPositionedByRect_(e.DropDownDiv.getScaledBboxOfField_(t),t,n,r)},e.DropDownDiv.getScaledBboxOfBlock_=function(t){var n=t.getSvgRoot(),r=n.getBBox(),s=t.workspace.scale;return t=r.height*s,r=r.width*s,n=e.utils.style.getPageOffset(n),new e.utils.Rect(n.y,n.y+t,n.x,n.x+r)},e.DropDownDiv.getScaledBboxOfField_=function(t){return t=t.getScaledBBox(),new e.utils.Rect(t.top,t.bottom,t.left,t.right)},e.DropDownDiv.showPositionedByRect_=function(t,n,r,s){var u=t.left+(t.right-t.left)/2,b=t.bottom;t=t.top,s&&(t+=s);for(var x=(s=n.getSourceBlock()).workspace;x.options.parentWorkspace;)x=x.options.parentWorkspace;return e.DropDownDiv.setBoundsElement(x.getParentSvg().parentNode),e.DropDownDiv.show(n,s.RTL,u,b,u,t,r)},e.DropDownDiv.show=function(t,n,r,s,u,b,x){return e.DropDownDiv.owner_=t,e.DropDownDiv.onHide_=x||null,(t=e.DropDownDiv.DIV_).style.direction=n?"rtl":"ltr",n=e.getMainWorkspace(),e.DropDownDiv.rendererClassName_=n.getRenderer().getClassName(),e.DropDownDiv.themeClassName_=n.getTheme().getClassName(),e.utils.dom.addClass(t,e.DropDownDiv.rendererClassName_),e.utils.dom.addClass(t,e.DropDownDiv.themeClassName_),e.DropDownDiv.positionInternal_(r,s,u,b)},e.DropDownDiv.getBoundsInfo_=function(){var t=e.utils.style.getPageOffset(e.DropDownDiv.boundsElement_),n=e.utils.style.getSize(e.DropDownDiv.boundsElement_);return{left:t.x,right:t.x+n.width,top:t.y,bottom:t.y+n.height,width:n.width,height:n.height}},e.DropDownDiv.getPositionMetrics_=function(t,n,r,s){var u=e.DropDownDiv.getBoundsInfo_(),b=e.utils.style.getSize(e.DropDownDiv.DIV_);return n+b.height<u.bottom?e.DropDownDiv.getPositionBelowMetrics_(t,n,u,b):s-b.height>u.top?e.DropDownDiv.getPositionAboveMetrics_(r,s,u,b):n+b.height<document.documentElement.clientHeight?e.DropDownDiv.getPositionBelowMetrics_(t,n,u,b):s-b.height>document.documentElement.clientTop?e.DropDownDiv.getPositionAboveMetrics_(r,s,u,b):e.DropDownDiv.getPositionTopOfPageMetrics_(t,u,b)},e.DropDownDiv.getPositionBelowMetrics_=function(t,n,r,s){return{initialX:(t=e.DropDownDiv.getPositionX(t,r.left,r.right,s.width)).divX,initialY:n,finalX:t.divX,finalY:n+e.DropDownDiv.PADDING_Y,arrowX:t.arrowX,arrowY:-(e.DropDownDiv.ARROW_SIZE/2+e.DropDownDiv.BORDER_SIZE),arrowAtTop:!0,arrowVisible:!0}},e.DropDownDiv.getPositionAboveMetrics_=function(t,n,r,s){return{initialX:(t=e.DropDownDiv.getPositionX(t,r.left,r.right,s.width)).divX,initialY:n-s.height,finalX:t.divX,finalY:n-s.height-e.DropDownDiv.PADDING_Y,arrowX:t.arrowX,arrowY:s.height-2*e.DropDownDiv.BORDER_SIZE-e.DropDownDiv.ARROW_SIZE/2,arrowAtTop:!1,arrowVisible:!0}},e.DropDownDiv.getPositionTopOfPageMetrics_=function(t,n,r){return{initialX:(t=e.DropDownDiv.getPositionX(t,n.left,n.right,r.width)).divX,initialY:0,finalX:t.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},e.DropDownDiv.getPositionX=function(t,n,r,s){var u=t;return t=e.utils.math.clamp(n,t-s/2,r-s),{arrowX:s=e.utils.math.clamp(n=e.DropDownDiv.ARROW_HORIZONTAL_PADDING,(u-=e.DropDownDiv.ARROW_SIZE/2)-t,s-n-e.DropDownDiv.ARROW_SIZE),divX:t}},e.DropDownDiv.isVisible=function(){return!!e.DropDownDiv.owner_},e.DropDownDiv.hideIfOwner=function(t,n){return e.DropDownDiv.owner_===t&&(n?e.DropDownDiv.hideWithoutAnimation():e.DropDownDiv.hide(),!0)},e.DropDownDiv.hide=function(){var t=e.DropDownDiv.DIV_;t.style.transform="translate(0, 0)",t.style.opacity=0,e.DropDownDiv.animateOutTimer_=setTimeout(function(){e.DropDownDiv.hideWithoutAnimation()},1e3*e.DropDownDiv.ANIMATION_TIME),e.DropDownDiv.onHide_&&(e.DropDownDiv.onHide_(),e.DropDownDiv.onHide_=null)},e.DropDownDiv.hideWithoutAnimation=function(){if(e.DropDownDiv.isVisible()){e.DropDownDiv.animateOutTimer_&&clearTimeout(e.DropDownDiv.animateOutTimer_);var t=e.DropDownDiv.DIV_;t.style.transform="",t.style.left="",t.style.top="",t.style.opacity=0,t.style.display="none",t.style.backgroundColor="",t.style.borderColor="",e.DropDownDiv.onHide_&&(e.DropDownDiv.onHide_(),e.DropDownDiv.onHide_=null),e.DropDownDiv.clearContent(),e.DropDownDiv.owner_=null,e.DropDownDiv.rendererClassName_&&(e.utils.dom.removeClass(t,e.DropDownDiv.rendererClassName_),e.DropDownDiv.rendererClassName_=""),e.DropDownDiv.themeClassName_&&(e.utils.dom.removeClass(t,e.DropDownDiv.themeClassName_),e.DropDownDiv.themeClassName_=""),e.getMainWorkspace().markFocused()}},e.DropDownDiv.positionInternal_=function(t,n,r,s){(t=e.DropDownDiv.getPositionMetrics_(t,n,r,s)).arrowVisible?(e.DropDownDiv.arrow_.style.display="",e.DropDownDiv.arrow_.style.transform="translate("+t.arrowX+"px,"+t.arrowY+"px) rotate(45deg)",e.DropDownDiv.arrow_.setAttribute("class",t.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):e.DropDownDiv.arrow_.style.display="none",n=Math.floor(t.initialX),r=Math.floor(t.initialY),s=Math.floor(t.finalX);var u=Math.floor(t.finalY),b=e.DropDownDiv.DIV_;return b.style.left=n+"px",b.style.top=r+"px",b.style.display="block",b.style.opacity=1,b.style.transform="translate("+(s-n)+"px,"+(u-r)+"px)",!!t.arrowAtTop},e.DropDownDiv.repositionForWindowResize=function(){if(e.DropDownDiv.owner_){var t=e.DropDownDiv.owner_,n=t.getSourceBlock();t=e.DropDownDiv.positionToField_?e.DropDownDiv.getScaledBboxOfField_(t):e.DropDownDiv.getScaledBboxOfBlock_(n),e.DropDownDiv.positionInternal_(n=t.left+(t.right-t.left)/2,t.bottom,n,t.top)}else e.DropDownDiv.hide()},e.registry={},e.registry.typeMap_=Object.create(null),e.registry.DEFAULT="default",e.registry.Type=function(t){this.name_=t},e.registry.Type.prototype.toString=function(){return this.name_},e.registry.Type.CONNECTION_CHECKER=new e.registry.Type("connectionChecker"),e.registry.Type.CURSOR=new e.registry.Type("cursor"),e.registry.Type.EVENT=new e.registry.Type("event"),e.registry.Type.FIELD=new e.registry.Type("field"),e.registry.Type.RENDERER=new e.registry.Type("renderer"),e.registry.Type.TOOLBOX=new e.registry.Type("toolbox"),e.registry.Type.THEME=new e.registry.Type("theme"),e.registry.Type.TOOLBOX_ITEM=new e.registry.Type("toolboxItem"),e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX=new e.registry.Type("flyoutsVerticalToolbox"),e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX=new e.registry.Type("flyoutsHorizontalToolbox"),e.registry.Type.METRICS_MANAGER=new e.registry.Type("metricsManager"),e.registry.Type.BLOCK_DRAGGER=new e.registry.Type("blockDragger"),e.registry.register=function(t,n,r,s){if(!(t instanceof e.registry.Type)&&"string"!=typeof t||""==String(t).trim())throw Error('Invalid type "'+t+'". The type must be a non-empty string or a Blockly.registry.Type.');if(t=String(t).toLowerCase(),"string"!=typeof n||""==n.trim())throw Error('Invalid name "'+n+'". The name must be a non-empty string.');if(n=n.toLowerCase(),!r)throw Error("Can not register a null value");var u=e.registry.typeMap_[t];if(u||(u=e.registry.typeMap_[t]=Object.create(null)),e.registry.validate_(t,r),!s&&u[n])throw Error('Name "'+n+'" with type "'+t+'" already registered.');u[n]=r},e.registry.validate_=function(t,n){if(t===String(e.registry.Type.FIELD)&&"function"!=typeof n.fromJson)throw Error('Type "'+t+'" must have a fromJson function')},e.registry.unregister=function(t,n){t=String(t).toLowerCase(),n=n.toLowerCase();var r=e.registry.typeMap_[t];r&&r[n]?delete e.registry.typeMap_[t][n]:console.warn("Unable to unregister ["+n+"]["+t+"] from the registry.")},e.registry.getItem_=function(t,n,r){t=String(t).toLowerCase(),n=n.toLowerCase();var s=e.registry.typeMap_[t];if(!s||!s[n]){if(n="Unable to find ["+n+"]["+t+"] in the registry.",r)throw Error(n+" You must require or register a "+t+" plugin.");return console.warn(n),null}return s[n]},e.registry.hasItem=function(t,n){return t=String(t).toLowerCase(),n=n.toLowerCase(),!!(t=e.registry.typeMap_[t])&&!!t[n]},e.registry.getClass=function(t,n,r){return e.registry.getItem_(t,n,r)},e.registry.getObject=function(t,n,r){return e.registry.getItem_(t,n,r)},e.registry.getClassFromOptions=function(t,n,r){return"function"==typeof(n=n.plugins[t.toString()]||e.registry.DEFAULT)?n:e.registry.getClass(t,n,r)},e.Events={},e.Events.group_="",e.Events.recordUndo=!0,e.Events.disabled_=0,e.Events.CREATE="create",e.Events.BLOCK_CREATE=e.Events.CREATE,e.Events.DELETE="delete",e.Events.BLOCK_DELETE=e.Events.DELETE,e.Events.CHANGE="change",e.Events.BLOCK_CHANGE=e.Events.CHANGE,e.Events.MOVE="move",e.Events.BLOCK_MOVE=e.Events.MOVE,e.Events.VAR_CREATE="var_create",e.Events.VAR_DELETE="var_delete",e.Events.VAR_RENAME="var_rename",e.Events.UI="ui",e.Events.BLOCK_DRAG="drag",e.Events.SELECTED="selected",e.Events.CLICK="click",e.Events.MARKER_MOVE="marker_move",e.Events.BUBBLE_OPEN="bubble_open",e.Events.TRASHCAN_OPEN="trashcan_open",e.Events.TOOLBOX_ITEM_SELECT="toolbox_item_select",e.Events.THEME_CHANGE="theme_change",e.Events.VIEWPORT_CHANGE="viewport_change",e.Events.COMMENT_CREATE="comment_create",e.Events.COMMENT_DELETE="comment_delete",e.Events.COMMENT_CHANGE="comment_change",e.Events.COMMENT_MOVE="comment_move",e.Events.FINISHED_LOADING="finished_loading",e.Events.BUMP_EVENTS=[e.Events.BLOCK_CREATE,e.Events.BLOCK_MOVE,e.Events.COMMENT_CREATE,e.Events.COMMENT_MOVE],e.Events.FIRE_QUEUE_=[],e.Events.fire=function(t){e.Events.isEnabled()&&(e.Events.FIRE_QUEUE_.length||setTimeout(e.Events.fireNow_,0),e.Events.FIRE_QUEUE_.push(t))},e.Events.fireNow_=function(){for(var r,t=e.Events.filter(e.Events.FIRE_QUEUE_,!0),n=e.Events.FIRE_QUEUE_.length=0;r=t[n];n++)if(r.workspaceId){var s=e.Workspace.getById(r.workspaceId);s&&s.fireChangeListener(r)}},e.Events.filter=function(t,n){t=t.slice(),n||t.reverse();for(var b,r=[],s=Object.create(null),u=0;b=t[u];u++)if(!b.isNull()){var x=[b.isUiEvent?e.Events.UI:b.type,b.blockId,b.workspaceId].join(" "),B=s[x],Z=B?B.event:null;B?b.type==e.Events.MOVE&&B.index==u-1?(Z.newParentId=b.newParentId,Z.newInputName=b.newInputName,Z.newCoordinate=b.newCoordinate,B.index=u):b.type==e.Events.CHANGE&&b.element==Z.element&&b.name==Z.name?Z.newValue=b.newValue:b.type==e.Events.VIEWPORT_CHANGE?(Z.viewTop=b.viewTop,Z.viewLeft=b.viewLeft,Z.scale=b.scale,Z.oldScale=b.oldScale):(b.type!=e.Events.CLICK||Z.type!=e.Events.BUBBLE_OPEN)&&(s[x]={event:b,index:u},r.push(b)):(s[x]={event:b,index:u},r.push(b))}for(t=r.filter(function(ot){return!ot.isNull()}),n||t.reverse(),u=1;b=t[u];u++)b.type==e.Events.CHANGE&&"mutation"==b.element&&t.unshift(t.splice(u,1)[0]);return t},e.Events.clearPendingUndo=function(){for(var n,t=0;n=e.Events.FIRE_QUEUE_[t];t++)n.recordUndo=!1},e.Events.disable=function(){e.Events.disabled_++},e.Events.enable=function(){e.Events.disabled_--},e.Events.isEnabled=function(){return 0==e.Events.disabled_},e.Events.getGroup=function(){return e.Events.group_},e.Events.setGroup=function(t){e.Events.group_="boolean"==typeof t?t?e.utils.genUid():"":t},e.Events.getDescendantIds=function(t){var n=[];t=t.getDescendants(!1);for(var s,r=0;s=t[r];r++)n[r]=s.id;return n},e.Events.fromJson=function(t,n){var r=e.Events.get(t.type);if(!r)throw Error("Unknown event type.");return(r=new r).fromJson(t),r.workspaceId=n.id,r},e.Events.get=function(t){return e.registry.getClass(e.registry.Type.EVENT,t)},e.Events.disableOrphans=function(t){if((t.type==e.Events.MOVE||t.type==e.Events.CREATE)&&t.workspaceId){var n=e.Workspace.getById(t.workspaceId),r=n.getBlockById(t.blockId);if(r){t=e.Events.recordUndo;try{e.Events.recordUndo=!1;var s=r.getParent();if(s&&s.isEnabled()){var b,u=r.getDescendants(!1);for(n=0;b=u[n];n++)b.setEnabled(!0)}else if((r.outputConnection||r.previousConnection)&&!n.isDragging())do{r.setEnabled(!1),r=r.getNextBlock()}while(r)}finally{e.Events.recordUndo=t}}}},e.Events.Abstract=function(){this.isBlank=null,this.workspaceId=void 0,this.group=e.Events.getGroup(),this.recordUndo=e.Events.recordUndo},e.Events.Abstract.prototype.isUiEvent=!1,e.Events.Abstract.prototype.toJson=function(){var t={type:this.type};return this.group&&(t.group=this.group),t},e.Events.Abstract.prototype.fromJson=function(t){this.isBlank=!1,this.group=t.group},e.Events.Abstract.prototype.isNull=function(){return!1},e.Events.Abstract.prototype.run=function(t){},e.Events.Abstract.prototype.getEventWorkspace_=function(){if(this.workspaceId)var t=e.Workspace.getById(this.workspaceId);if(!t)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return t},e.utils.object={},e.utils.object.inherits=function(t,n){t.superClass_=n.prototype,t.prototype=Object.create(n.prototype),t.prototype.constructor=t},e.utils.object.mixin=function(t,n){for(var r in n)t[r]=n[r]},e.utils.object.deepMerge=function(t,n){for(var r in n)t[r]=null!=n[r]&&"object"==typeof n[r]?e.utils.object.deepMerge(t[r]||Object.create(null),n[r]):n[r];return t},e.utils.object.values=function(t){return Object.values?Object.values(t):Object.keys(t).map(function(n){return t[n]})},e.utils.xml={},e.utils.xml.NAME_SPACE="https://developers.google.com/blockly/xml",e.utils.xml.document=function(){return document},e.utils.xml.createElement=function(t){return e.utils.xml.document().createElementNS(e.utils.xml.NAME_SPACE,t)},e.utils.xml.createTextNode=function(t){return e.utils.xml.document().createTextNode(t)},e.utils.xml.textToDomDocument=function(t){return(new DOMParser).parseFromString(t,"text/xml")},e.utils.xml.domToText=function(t){return(new XMLSerializer).serializeToString(t)},e.inputTypes={VALUE:e.connectionTypes.INPUT_VALUE,STATEMENT:e.connectionTypes.NEXT_STATEMENT,DUMMY:5},e.Xml={},e.Xml.workspaceToDom=function(t,n){var r=e.utils.xml.createElement("xml"),s=e.Xml.variablesToDom(e.Variables.allUsedVarModels(t));s.hasChildNodes()&&r.appendChild(s);var b,u=t.getTopComments(!0);for(s=0;b=u[s];s++)r.appendChild(b.toXmlWithXY(n));for(t=t.getTopBlocks(!0),s=0;u=t[s];s++)r.appendChild(e.Xml.blockToDomWithXY(u,n));return r},e.Xml.variablesToDom=function(t){for(var s,n=e.utils.xml.createElement("variables"),r=0;s=t[r];r++){var u=e.utils.xml.createElement("variable");u.appendChild(e.utils.xml.createTextNode(s.name)),s.type&&u.setAttribute("type",s.type),u.id=s.getId(),n.appendChild(u)}return n},e.Xml.blockToDomWithXY=function(t,n){if(t.isInsertionMarker()&&!(t=t.getChildren(!1)[0]))return new DocumentFragment;var r;t.workspace.RTL&&(r=t.workspace.getWidth()),n=e.Xml.blockToDom(t,n);var s=t.getRelativeToSurfaceXY();return n.setAttribute("x",Math.round(t.workspace.RTL?r-s.x:s.x)),n.setAttribute("y",Math.round(s.y)),n},e.Xml.fieldToDom_=function(t){if(t.isSerializable()){var n=e.utils.xml.createElement("field");return n.setAttribute("name",t.name||""),t.toXml(n)}return null},e.Xml.allFieldsToDom_=function(t,n){for(var s,r=0;s=t.inputList[r];r++)for(var b,u=0;b=s.fieldRow[u];u++)(b=e.Xml.fieldToDom_(b))&&n.appendChild(b)},e.Xml.blockToDom=function(t,n){if(t.isInsertionMarker())return(t=t.getChildren(!1)[0])?e.Xml.blockToDom(t):new DocumentFragment;var r=e.utils.xml.createElement(t.isShadow()?"shadow":"block");if(r.setAttribute("type",t.type),n||r.setAttribute("id",t.id),t.mutationToDom){var s=t.mutationToDom();s&&(s.hasChildNodes()||s.hasAttributes())&&r.appendChild(s)}if(e.Xml.allFieldsToDom_(t,r),s=t.getCommentText()){var u=t.commentModel.size,b=t.commentModel.pinned,x=e.utils.xml.createElement("comment");x.appendChild(e.utils.xml.createTextNode(s)),x.setAttribute("pinned",b),x.setAttribute("h",u.height),x.setAttribute("w",u.width),r.appendChild(x)}for(t.data&&((s=e.utils.xml.createElement("data")).appendChild(e.utils.xml.createTextNode(t.data)),r.appendChild(s)),s=0;u=t.inputList[s];s++){var B;if(b=!0,u.type!=e.inputTypes.DUMMY){var Z=u.connection.targetBlock();u.type==e.inputTypes.VALUE?B=e.utils.xml.createElement("value"):u.type==e.inputTypes.STATEMENT&&(B=e.utils.xml.createElement("statement")),!(x=u.connection.getShadowDom())||Z&&Z.isShadow()||B.appendChild(e.Xml.cloneShadow_(x,n)),Z&&(x=e.Xml.blockToDom(Z,n)).nodeType==e.utils.dom.NodeType.ELEMENT_NODE&&(B.appendChild(x),b=!1),B.setAttribute("name",u.name),b||r.appendChild(B)}}return null!=t.inputsInline&&t.inputsInline!=t.inputsInlineDefault&&r.setAttribute("inline",t.inputsInline),t.isCollapsed()&&r.setAttribute("collapsed",!0),t.isEnabled()||r.setAttribute("disabled",!0),t.isDeletable()||t.isShadow()||r.setAttribute("deletable",!1),t.isMovable()||t.isShadow()||r.setAttribute("movable",!1),t.isEditable()||r.setAttribute("editable",!1),(s=t.getNextBlock())&&(x=e.Xml.blockToDom(s,n)).nodeType==e.utils.dom.NodeType.ELEMENT_NODE&&((B=e.utils.xml.createElement("next")).appendChild(x),r.appendChild(B)),!(x=t.nextConnection&&t.nextConnection.getShadowDom())||s&&s.isShadow()||B.appendChild(e.Xml.cloneShadow_(x,n)),r},e.Xml.cloneShadow_=function(t,n){for(var s,r=t=t.cloneNode(!0);r;)if(n&&"shadow"==r.nodeName&&r.removeAttribute("id"),r.firstChild)r=r.firstChild;else{for(;r&&!r.nextSibling;)s=r,r=r.parentNode,s.nodeType==e.utils.dom.NodeType.TEXT_NODE&&""==s.data.trim()&&r.firstChild!=s&&e.utils.dom.removeNode(s);r&&(s=r,r=r.nextSibling,s.nodeType==e.utils.dom.NodeType.TEXT_NODE&&""==s.data.trim()&&e.utils.dom.removeNode(s))}return t},e.Xml.domToText=function(t){return e.utils.xml.domToText(t).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},e.Xml.domToPrettyText=function(t){t=e.Xml.domToText(t).split("<");for(var n="",r=1;r<t.length;r++){var s=t[r];"/"==s[0]&&(n=n.substring(2)),t[r]=n+"<"+s,"/"!=s[0]&&"/>"!=s.slice(-2)&&(n+="  ")}return(t=(t=t.join("\n")).replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>")).replace(/^\n/,"")},e.Xml.textToDom=function(t){var n=e.utils.xml.textToDomDocument(t);if(!n||!n.documentElement||n.getElementsByTagName("parsererror").length)throw Error("textToDom was unable to parse: "+t);return n.documentElement},e.Xml.clearWorkspaceAndLoadFromXml=function(t,n){return n.setResizesEnabled(!1),n.clear(),t=e.Xml.domToWorkspace(t,n),n.setResizesEnabled(!0),t},e.Xml.domToWorkspace=function(t,n){if(t instanceof e.Workspace){var r=t;t=n,n=r,console.warn("Deprecated call to Blockly.Xml.domToWorkspace, swap the arguments.")}var s;n.RTL&&(s=n.getWidth()),r=[],e.utils.dom.startTextWidthCache();var u=e.Events.getGroup();u||e.Events.setGroup(!0),n.setResizesEnabled&&n.setResizesEnabled(!1);var b=!0;try{for(var B,x=0;B=t.childNodes[x];x++){var Z=B.nodeName.toLowerCase(),ot=B;if("block"==Z||"shadow"==Z&&!e.Events.recordUndo){var et=e.Xml.domToBlock(ot,n);r.push(et.id);var Tt=ot.hasAttribute("x")?parseInt(ot.getAttribute("x"),10):10,Pt=ot.hasAttribute("y")?parseInt(ot.getAttribute("y"),10):10;isNaN(Tt)||isNaN(Pt)||et.moveBy(n.RTL?s-Tt:Tt,Pt),b=!1}else{if("shadow"==Z)throw TypeError("Shadow block cannot be a top-level block.");if("comment"==Z)n.rendered?e.WorkspaceCommentSvg?e.WorkspaceCommentSvg.fromXml(ot,n,s):console.warn("Missing require for Blockly.WorkspaceCommentSvg, ignoring workspace comment."):e.WorkspaceComment?e.WorkspaceComment.fromXml(ot,n):console.warn("Missing require for Blockly.WorkspaceComment, ignoring workspace comment.");else if("variables"==Z){if(!b)throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");e.Xml.domToVariables(ot,n),b=!1}}}}finally{u||e.Events.setGroup(!1),e.utils.dom.stopTextWidthCache()}return n.setResizesEnabled&&n.setResizesEnabled(!0),e.Events.fire(new(e.Events.get(e.Events.FINISHED_LOADING))(n)),r},e.Xml.appendDomToWorkspace=function(t,n){var r;if(Object.prototype.hasOwnProperty.call(n,"scale")&&(r=n.getBlocksBoundingBox()),t=e.Xml.domToWorkspace(t,n),r&&r.top!=r.bottom){var s=r.bottom,u=n.RTL?r.right:r.left,b=1/0,x=-1/0,B=1/0;for(r=0;r<t.length;r++){var Z=n.getBlockById(t[r]).getRelativeToSurfaceXY();Z.y<B&&(B=Z.y),Z.x<b&&(b=Z.x),Z.x>x&&(x=Z.x)}for(s=s-B+10,u=n.RTL?u-x:u-b,r=0;r<t.length;r++)n.getBlockById(t[r]).moveBy(u,s)}return t},e.Xml.domToBlock=function(t,n){if(t instanceof e.Workspace){var r=t;t=n,n=r,console.warn("Deprecated call to Blockly.Xml.domToBlock, swap the arguments.")}e.Events.disable(),r=n.getAllVariables();try{var s=e.Xml.domToBlockHeadless_(t,n),u=s.getDescendants(!1);if(n.rendered){s.setConnectionTracking(!1);for(var b=u.length-1;0<=b;b--)u[b].initSvg();for(b=u.length-1;0<=b;b--)u[b].render(!1);setTimeout(function(){s.disposed||s.setConnectionTracking(!0)},1),s.updateDisabled(),n.resizeContents()}else for(b=u.length-1;0<=b;b--)u[b].initModel()}finally{e.Events.enable()}if(e.Events.isEnabled()){for(t=e.Variables.getAddedVariables(n,r),b=0;b<t.length;b++)n=t[b],e.Events.fire(new(e.Events.get(e.Events.VAR_CREATE))(n));e.Events.fire(new(e.Events.get(e.Events.CREATE))(s))}return s},e.Xml.domToVariables=function(t,n){for(var s,r=0;s=t.childNodes[r];r++)if(s.nodeType==e.utils.dom.NodeType.ELEMENT_NODE){var u=s.getAttribute("type"),b=s.getAttribute("id");n.createVariable(s.textContent,u,b)}},e.Xml.mapSupportedXmlTags_=function(t){for(var s,n={mutation:[],comment:[],data:[],field:[],input:[],next:[]},r=0;s=t.childNodes[r];r++)if(s.nodeType!=e.utils.dom.NodeType.TEXT_NODE)switch(s.nodeName.toLowerCase()){case"mutation":n.mutation.push(s);break;case"comment":if(!e.Comment){console.warn("Missing require for Blockly.Comment, ignoring block comment.");break}n.comment.push(s);break;case"data":n.data.push(s);break;case"title":case"field":n.field.push(s);break;case"value":case"statement":n.input.push(s);break;case"next":n.next.push(s);break;default:console.warn("Ignoring unknown tag: "+s.nodeName)}return n},e.Xml.applyMutationTagNodes_=function(t,n){for(var u,r=!1,s=0;u=t[s];s++)n.domToMutation&&(n.domToMutation(u),n.initSvg&&(r=!0));return r},e.Xml.applyCommentTagNodes_=function(t,n){for(var s,r=0;s=t[r];r++){var u=s.textContent,b="true"==s.getAttribute("pinned"),x=parseInt(s.getAttribute("w"),10);s=parseInt(s.getAttribute("h"),10),n.setCommentText(u),n.commentModel.pinned=b,isNaN(x)||isNaN(s)||(n.commentModel.size=new e.utils.Size(x,s)),b&&n.getCommentIcon&&!n.isInFlyout&&setTimeout(function(){n.getCommentIcon().setVisible(!0)},1)}},e.Xml.applyDataTagNodes_=function(t,n){for(var s,r=0;s=t[r];r++)n.data=s.textContent},e.Xml.applyFieldTagNodes_=function(t,n){for(var s,r=0;s=t[r];r++){var u=s.getAttribute("name");e.Xml.domToField_(n,u,s)}},e.Xml.findChildBlocks_=function(t){for(var s,n={childBlockElement:null,childShadowElement:null},r=0;s=t.childNodes[r];r++)s.nodeType==e.utils.dom.NodeType.ELEMENT_NODE&&("block"==s.nodeName.toLowerCase()?n.childBlockElement=s:"shadow"==s.nodeName.toLowerCase()&&(n.childShadowElement=s));return n},e.Xml.applyInputTagNodes_=function(t,n,r,s){for(var b,u=0;b=t[u];u++){var x=b.getAttribute("name"),B=r.getInput(x);if(!B){console.warn("Ignoring non-existent input "+x+" in block "+s);break}if((b=e.Xml.findChildBlocks_(b)).childBlockElement){if(!B.connection)throw TypeError("Input connection does not exist.");e.Xml.domToBlockHeadless_(b.childBlockElement,n,B.connection,!1)}b.childShadowElement&&B.connection.setShadowDom(b.childShadowElement)}},e.Xml.applyNextTagNodes_=function(t,n,r){for(var u,s=0;u=t[s];s++){if((u=e.Xml.findChildBlocks_(u)).childBlockElement){if(!r.nextConnection)throw TypeError("Next statement does not exist.");if(r.nextConnection.isConnected())throw TypeError("Next statement is already connected.");e.Xml.domToBlockHeadless_(u.childBlockElement,n,r.nextConnection,!0)}u.childShadowElement&&r.nextConnection&&r.nextConnection.setShadowDom(u.childShadowElement)}},e.Xml.domToBlockHeadless_=function(t,n,r,s){var u=t.getAttribute("type");if(!u)throw TypeError("Block type unspecified: "+t.outerHTML);var b=t.getAttribute("id");b=n.newBlock(u,b);var x=e.Xml.mapSupportedXmlTags_(t),B=e.Xml.applyMutationTagNodes_(x.mutation,b);if(e.Xml.applyCommentTagNodes_(x.comment,b),e.Xml.applyDataTagNodes_(x.data,b),r)if(s){if(!b.previousConnection)throw TypeError("Next block does not have previous statement.");r.connect(b.previousConnection)}else if(b.outputConnection)r.connect(b.outputConnection);else{if(!b.previousConnection)throw TypeError("Child block does not have output or previous statement.");r.connect(b.previousConnection)}if(e.Xml.applyFieldTagNodes_(x.field,b),e.Xml.applyInputTagNodes_(x.input,n,b,u),e.Xml.applyNextTagNodes_(x.next,n,b),B&&b.initSvg(),(n=t.getAttribute("inline"))&&b.setInputsInline("true"==n),(n=t.getAttribute("disabled"))&&b.setEnabled("true"!=n&&"disabled"!=n),(n=t.getAttribute("deletable"))&&b.setDeletable("true"==n),(n=t.getAttribute("movable"))&&b.setMovable("true"==n),(n=t.getAttribute("editable"))&&b.setEditable("true"==n),(n=t.getAttribute("collapsed"))&&b.setCollapsed("true"==n),"shadow"==t.nodeName.toLowerCase()){for(t=b.getChildren(!1),n=0;r=t[n];n++)if(!r.isShadow())throw TypeError("Shadow block not allowed non-shadow child.");if(b.getVarModels().length)throw TypeError("Shadow blocks cannot have variable references.");b.setShadow(!0)}return b},e.Xml.domToField_=function(t,n,r){var s=t.getField(n);s?s.fromXml(r):console.warn("Ignoring non-existent field "+n+" in block "+t.type)},e.Xml.deleteNext=function(t){for(var r,n=0;r=t.childNodes[n];n++)if("next"==r.nodeName.toLowerCase()){t.removeChild(r);break}},e.Events.BlockBase=function(t){e.Events.BlockBase.superClass_.constructor.call(this),this.blockId=(this.isBlank=void 0===t)?"":t.id,this.workspaceId=this.isBlank?"":t.workspace.id},e.utils.object.inherits(e.Events.BlockBase,e.Events.Abstract),e.Events.BlockBase.prototype.toJson=function(){var t=e.Events.BlockBase.superClass_.toJson.call(this);return t.blockId=this.blockId,t},e.Events.BlockBase.prototype.fromJson=function(t){e.Events.BlockBase.superClass_.fromJson.call(this,t),this.blockId=t.blockId},e.Events.BlockChange=function(t,n,r,s,u){e.Events.Change.superClass_.constructor.call(this,t),t&&(this.element=void 0===n?"":n,this.name=void 0===r?"":r,this.oldValue=void 0===s?"":s,this.newValue=void 0===u?"":u)},e.utils.object.inherits(e.Events.BlockChange,e.Events.BlockBase),e.Events.Change=e.Events.BlockChange,e.Events.BlockChange.prototype.type=e.Events.CHANGE,e.Events.BlockChange.prototype.toJson=function(){var t=e.Events.BlockChange.superClass_.toJson.call(this);return t.element=this.element,this.name&&(t.name=this.name),t.oldValue=this.oldValue,t.newValue=this.newValue,t},e.Events.BlockChange.prototype.fromJson=function(t){e.Events.BlockChange.superClass_.fromJson.call(this,t),this.element=t.element,this.name=t.name,this.oldValue=t.oldValue,this.newValue=t.newValue},e.Events.BlockChange.prototype.isNull=function(){return this.oldValue==this.newValue},e.Events.BlockChange.prototype.run=function(t){var n=this.getEventWorkspace_().getBlockById(this.blockId);if(n)switch(n.mutator&&n.mutator.setVisible(!1),t=t?this.newValue:this.oldValue,this.element){case"field":(n=n.getField(this.name))?n.setValue(t):console.warn("Can't set non-existent field: "+this.name);break;case"comment":n.setCommentText(t||null);break;case"collapsed":n.setCollapsed(!!t);break;case"disabled":n.setEnabled(!t);break;case"inline":n.setInputsInline(!!t);break;case"mutation":var r="";if(n.mutationToDom&&(r=(r=n.mutationToDom())&&e.Xml.domToText(r)),n.domToMutation){var s=e.Xml.textToDom(t||"<mutation/>");n.domToMutation(s)}e.Events.fire(new e.Events.BlockChange(n,"mutation",null,r,t));break;default:console.warn("Unknown change type: "+this.element)}else console.warn("Can't change non-existent block: "+this.blockId)},e.Events.Create=function(t){e.Events.Create.superClass_.constructor.call(this,t),t&&(t.isShadow()&&(this.recordUndo=!1),this.xml=t.workspace.rendered?e.Xml.blockToDomWithXY(t):e.Xml.blockToDom(t),this.ids=e.Events.getDescendantIds(t))},e.utils.object.inherits(e.Events.Create,e.Events.BlockBase),e.Events.BlockCreate=e.Events.Create,e.Events.Create.prototype.type=e.Events.CREATE,e.Events.Create.prototype.toJson=function(){var t=e.Events.Create.superClass_.toJson.call(this);return t.xml=e.Xml.domToText(this.xml),t.ids=this.ids,this.recordUndo||(t.recordUndo=this.recordUndo),t},e.Events.Create.prototype.fromJson=function(t){e.Events.Create.superClass_.fromJson.call(this,t),this.xml=e.Xml.textToDom(t.xml),this.ids=t.ids,void 0!==t.recordUndo&&(this.recordUndo=t.recordUndo)},e.Events.Create.prototype.run=function(t){var n=this.getEventWorkspace_();if(t)(t=e.utils.xml.createElement("xml")).appendChild(this.xml),e.Xml.domToWorkspace(t,n);else{t=0;for(var r;r=this.ids[t];t++){var s=n.getBlockById(r);s?s.dispose(!1):r==this.blockId&&console.warn("Can't uncreate non-existent block: "+r)}}},e.Events.Delete=function(t){if(e.Events.Delete.superClass_.constructor.call(this,t),t){if(t.getParent())throw Error("Connected blocks cannot be deleted.");t.isShadow()&&(this.recordUndo=!1),this.oldXml=t.workspace.rendered?e.Xml.blockToDomWithXY(t):e.Xml.blockToDom(t),this.ids=e.Events.getDescendantIds(t)}},e.utils.object.inherits(e.Events.Delete,e.Events.BlockBase),e.Events.BlockDelete=e.Events.Delete,e.Events.Delete.prototype.type=e.Events.DELETE,e.Events.Delete.prototype.toJson=function(){var t=e.Events.Delete.superClass_.toJson.call(this);return t.oldXml=e.Xml.domToText(this.oldXml),t.ids=this.ids,this.recordUndo||(t.recordUndo=this.recordUndo),t},e.Events.Delete.prototype.fromJson=function(t){e.Events.Delete.superClass_.fromJson.call(this,t),this.oldXml=e.Xml.textToDom(t.oldXml),this.ids=t.ids,void 0!==t.recordUndo&&(this.recordUndo=t.recordUndo)},e.Events.Delete.prototype.run=function(t){var n=this.getEventWorkspace_();if(t){t=0;for(var r;r=this.ids[t];t++){var s=n.getBlockById(r);s?s.dispose(!1):r==this.blockId&&console.warn("Can't delete non-existent block: "+r)}}else(t=e.utils.xml.createElement("xml")).appendChild(this.oldXml),e.Xml.domToWorkspace(t,n)},e.Events.Move=function(t){e.Events.Move.superClass_.constructor.call(this,t),t&&(t.isShadow()&&(this.recordUndo=!1),t=this.currentLocation_(),this.oldParentId=t.parentId,this.oldInputName=t.inputName,this.oldCoordinate=t.coordinate)},e.utils.object.inherits(e.Events.Move,e.Events.BlockBase),e.Events.BlockMove=e.Events.Move,e.Events.Move.prototype.type=e.Events.MOVE,e.Events.Move.prototype.toJson=function(){var t=e.Events.Move.superClass_.toJson.call(this);return this.newParentId&&(t.newParentId=this.newParentId),this.newInputName&&(t.newInputName=this.newInputName),this.newCoordinate&&(t.newCoordinate=Math.round(this.newCoordinate.x)+","+Math.round(this.newCoordinate.y)),this.recordUndo||(t.recordUndo=this.recordUndo),t},e.Events.Move.prototype.fromJson=function(t){if(e.Events.Move.superClass_.fromJson.call(this,t),this.newParentId=t.newParentId,this.newInputName=t.newInputName,t.newCoordinate){var n=t.newCoordinate.split(",");this.newCoordinate=new e.utils.Coordinate(Number(n[0]),Number(n[1]))}void 0!==t.recordUndo&&(this.recordUndo=t.recordUndo)},e.Events.Move.prototype.recordNew=function(){var t=this.currentLocation_();this.newParentId=t.parentId,this.newInputName=t.inputName,this.newCoordinate=t.coordinate},e.Events.Move.prototype.currentLocation_=function(){var t=this.getEventWorkspace_().getBlockById(this.blockId),n={},r=t.getParent();return r?(n.parentId=r.id,(t=r.getInputWithBlock(t))&&(n.inputName=t.name)):n.coordinate=t.getRelativeToSurfaceXY(),n},e.Events.Move.prototype.isNull=function(){return this.oldParentId==this.newParentId&&this.oldInputName==this.newInputName&&e.utils.Coordinate.equals(this.oldCoordinate,this.newCoordinate)},e.Events.Move.prototype.run=function(t){var n=this.getEventWorkspace_(),r=n.getBlockById(this.blockId);if(r){var s=t?this.newParentId:this.oldParentId,u=t?this.newInputName:this.oldInputName,b=t?this.newCoordinate:this.oldCoordinate;if(t=null,s&&!(t=n.getBlockById(s)))return void console.warn("Can't connect to non-existent block: "+s);if(r.getParent()&&r.unplug(),b)u=r.getRelativeToSurfaceXY(),r.moveBy(b.x-u.x,b.y-u.y);else{if(n=(r=r.outputConnection||r.previousConnection).type,u){if(t=t.getInput(u))var x=t.connection}else n==e.connectionTypes.PREVIOUS_STATEMENT&&(x=t.nextConnection);x?r.connect(x):console.warn("Can't connect to non-existent input: "+u)}}else console.warn("Can't move non-existent block: "+this.blockId)},e.registry.register(e.registry.Type.EVENT,e.Events.CREATE,e.Events.Create),e.registry.register(e.registry.Type.EVENT,e.Events.DELETE,e.Events.Delete),e.registry.register(e.registry.Type.EVENT,e.Events.CHANGE,e.Events.BlockChange),e.registry.register(e.registry.Type.EVENT,e.Events.MOVE,e.Events.Move),e.Events.FinishedLoading=function(t){this.isBlank=void 0===t,this.workspaceId=t?t.id:"",this.group=e.Events.getGroup(),this.recordUndo=!1},e.utils.object.inherits(e.Events.FinishedLoading,e.Events.Abstract),e.Events.FinishedLoading.prototype.type=e.Events.FINISHED_LOADING,e.Events.FinishedLoading.prototype.toJson=function(){var t={type:this.type};return this.group&&(t.group=this.group),this.workspaceId&&(t.workspaceId=this.workspaceId),t},e.Events.FinishedLoading.prototype.fromJson=function(t){this.isBlank=!1,this.workspaceId=t.workspaceId,this.group=t.group},e.registry.register(e.registry.Type.EVENT,e.Events.FINISHED_LOADING,e.Events.FinishedLoading),e.Events.UiBase=function(t){e.Events.UiBase.superClass_.constructor.call(this),this.isBlank=void 0===t,this.workspaceId=t||"",this.recordUndo=!1},e.utils.object.inherits(e.Events.UiBase,e.Events.Abstract),e.Events.UiBase.prototype.isUiEvent=!0,e.Events.Ui=function(t,n,r,s){e.Events.Ui.superClass_.constructor.call(this,t?t.workspace.id:void 0),this.blockId=t?t.id:null,this.element=void 0===n?"":n,this.oldValue=void 0===r?"":r,this.newValue=void 0===s?"":s},e.utils.object.inherits(e.Events.Ui,e.Events.UiBase),e.Events.Ui.prototype.type=e.Events.UI,e.Events.Ui.prototype.toJson=function(){var t=e.Events.Ui.superClass_.toJson.call(this);return t.element=this.element,void 0!==this.newValue&&(t.newValue=this.newValue),this.blockId&&(t.blockId=this.blockId),t},e.Events.Ui.prototype.fromJson=function(t){e.Events.Ui.superClass_.fromJson.call(this,t),this.element=t.element,this.newValue=t.newValue,this.blockId=t.blockId},e.registry.register(e.registry.Type.EVENT,e.Events.UI,e.Events.Ui),e.Events.VarBase=function(t){e.Events.VarBase.superClass_.constructor.call(this),this.varId=(this.isBlank=void 0===t)?"":t.getId(),this.workspaceId=this.isBlank?"":t.workspace.id},e.utils.object.inherits(e.Events.VarBase,e.Events.Abstract),e.Events.VarBase.prototype.toJson=function(){var t=e.Events.VarBase.superClass_.toJson.call(this);return t.varId=this.varId,t},e.Events.VarBase.prototype.fromJson=function(t){e.Events.VarBase.superClass_.toJson.call(this),this.varId=t.varId},e.Events.VarCreate=function(t){e.Events.VarCreate.superClass_.constructor.call(this,t),t&&(this.varType=t.type,this.varName=t.name)},e.utils.object.inherits(e.Events.VarCreate,e.Events.VarBase),e.Events.VarCreate.prototype.type=e.Events.VAR_CREATE,e.Events.VarCreate.prototype.toJson=function(){var t=e.Events.VarCreate.superClass_.toJson.call(this);return t.varType=this.varType,t.varName=this.varName,t},e.Events.VarCreate.prototype.fromJson=function(t){e.Events.VarCreate.superClass_.fromJson.call(this,t),this.varType=t.varType,this.varName=t.varName},e.Events.VarCreate.prototype.run=function(t){var n=this.getEventWorkspace_();t?n.createVariable(this.varName,this.varType,this.varId):n.deleteVariableById(this.varId)},e.Events.VarDelete=function(t){e.Events.VarDelete.superClass_.constructor.call(this,t),t&&(this.varType=t.type,this.varName=t.name)},e.utils.object.inherits(e.Events.VarDelete,e.Events.VarBase),e.Events.VarDelete.prototype.type=e.Events.VAR_DELETE,e.Events.VarDelete.prototype.toJson=function(){var t=e.Events.VarDelete.superClass_.toJson.call(this);return t.varType=this.varType,t.varName=this.varName,t},e.Events.VarDelete.prototype.fromJson=function(t){e.Events.VarDelete.superClass_.fromJson.call(this,t),this.varType=t.varType,this.varName=t.varName},e.Events.VarDelete.prototype.run=function(t){var n=this.getEventWorkspace_();t?n.deleteVariableById(this.varId):n.createVariable(this.varName,this.varType,this.varId)},e.Events.VarRename=function(t,n){e.Events.VarRename.superClass_.constructor.call(this,t),t&&(this.oldName=t.name,this.newName=void 0===n?"":n)},e.utils.object.inherits(e.Events.VarRename,e.Events.VarBase),e.Events.VarRename.prototype.type=e.Events.VAR_RENAME,e.Events.VarRename.prototype.toJson=function(){var t=e.Events.VarRename.superClass_.toJson.call(this);return t.oldName=this.oldName,t.newName=this.newName,t},e.Events.VarRename.prototype.fromJson=function(t){e.Events.VarRename.superClass_.fromJson.call(this,t),this.oldName=t.oldName,this.newName=t.newName},e.Events.VarRename.prototype.run=function(t){this.getEventWorkspace_().renameVariableById(this.varId,t?this.newName:this.oldName)},e.registry.register(e.registry.Type.EVENT,e.Events.VAR_CREATE,e.Events.VarCreate),e.registry.register(e.registry.Type.EVENT,e.Events.VAR_DELETE,e.Events.VarDelete),e.registry.register(e.registry.Type.EVENT,e.Events.VAR_RENAME,e.Events.VarRename),e.BlockDragSurfaceSvg=function(t){this.container_=t,this.createDom()},e.BlockDragSurfaceSvg.prototype.SVG_=null,e.BlockDragSurfaceSvg.prototype.dragGroup_=null,e.BlockDragSurfaceSvg.prototype.container_=null,e.BlockDragSurfaceSvg.prototype.scale_=1,e.BlockDragSurfaceSvg.prototype.surfaceXY_=null,e.BlockDragSurfaceSvg.prototype.childSurfaceXY_=new e.utils.Coordinate(0,0),e.BlockDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{xmlns:e.utils.dom.SVG_NS,"xmlns:html":e.utils.dom.HTML_NS,"xmlns:xlink":e.utils.dom.XLINK_NS,version:"1.1",class:"blocklyBlockDragSurface"},this.container_),this.dragGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},this.SVG_))},e.BlockDragSurfaceSvg.prototype.setBlocksAndShow=function(t){if(this.dragGroup_.childNodes.length)throw Error("Already dragging a block.");this.dragGroup_.appendChild(t),this.SVG_.style.display="block",this.surfaceXY_=new e.utils.Coordinate(0,0)},e.BlockDragSurfaceSvg.prototype.translateAndScaleGroup=function(t,n,r){this.scale_=r,t=t.toFixed(0),n=n.toFixed(0),this.childSurfaceXY_.x=parseInt(t,10),this.childSurfaceXY_.y=parseInt(n,10),this.dragGroup_.setAttribute("transform","translate("+t+","+n+") scale("+r+")")},e.BlockDragSurfaceSvg.prototype.translateSurfaceInternal_=function(){var t=this.surfaceXY_.x,n=this.surfaceXY_.y;t=t.toFixed(0),n=n.toFixed(0),this.SVG_.style.display="block",e.utils.dom.setCssTransform(this.SVG_,"translate3d("+t+"px, "+n+"px, 0px)")},e.BlockDragSurfaceSvg.prototype.translateBy=function(t,n){this.surfaceXY_=new e.utils.Coordinate(this.surfaceXY_.x+t,this.surfaceXY_.y+n),this.translateSurfaceInternal_()},e.BlockDragSurfaceSvg.prototype.translateSurface=function(t,n){this.surfaceXY_=new e.utils.Coordinate(t*this.scale_,n*this.scale_),this.translateSurfaceInternal_()},e.BlockDragSurfaceSvg.prototype.getSurfaceTranslation=function(){var t=e.utils.getRelativeXY(this.SVG_);return new e.utils.Coordinate(t.x/this.scale_,t.y/this.scale_)},e.BlockDragSurfaceSvg.prototype.getGroup=function(){return this.dragGroup_},e.BlockDragSurfaceSvg.prototype.getSvgRoot=function(){return this.SVG_},e.BlockDragSurfaceSvg.prototype.getCurrentBlock=function(){return this.dragGroup_.firstChild},e.BlockDragSurfaceSvg.prototype.getWsTranslation=function(){return this.childSurfaceXY_.clone()},e.BlockDragSurfaceSvg.prototype.clearAndHide=function(t){if(t?t.appendChild(this.getCurrentBlock()):this.dragGroup_.removeChild(this.getCurrentBlock()),this.SVG_.style.display="none",this.dragGroup_.childNodes.length)throw Error("Drag group was not cleared.");this.surfaceXY_=null},e.Css={},e.Css.injected_=!1,e.Css.register=function(t){if(e.Css.injected_)throw Error("CSS already injected");Array.prototype.push.apply(e.Css.CONTENT,t),t.length=0},e.Css.inject=function(t,n){if(!e.Css.injected_){e.Css.injected_=!0;var r=e.Css.CONTENT.join("\n");e.Css.CONTENT.length=0,t&&(t=n.replace(/[\\/]$/,""),r=r.replace(/<<<PATH>>>/g,t),(t=document.createElement("style")).id="blockly-common-style",r=document.createTextNode(r),t.appendChild(r),document.head.insertBefore(t,document.head.firstChild))}},e.Css.CONTENT=[".blocklySvg {","background-color: #fff;","outline: none;","overflow: hidden;","position: absolute;","display: block;","}",".blocklyWidgetDiv {","display: none;","position: absolute;","z-index: 99999;","}",".injectionDiv {","height: 100%;","position: relative;","overflow: hidden;","touch-action: none;","}",".blocklyNonSelectable {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","}",".blocklyWsDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","}",".blocklyWsDragSurface.blocklyOverflowVisible {","overflow: visible;","}",".blocklyBlockDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","right: 0;","bottom: 0;","overflow: visible !important;","z-index: 50;","}",".blocklyBlockCanvas.blocklyCanvasTransitioning,",".blocklyBubbleCanvas.blocklyCanvasTransitioning {","transition: transform .5s;","}",".blocklyTooltipDiv {","background-color: #ffffc7;","border: 1px solid #ddc;","box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);","color: #000;","display: none;","font: 9pt sans-serif;","opacity: .9;","padding: 2px;","position: absolute;","z-index: 100000;","}",".blocklyDropDownDiv {","position: absolute;","left: 0;","top: 0;","z-index: 1000;","display: none;","border: 1px solid;","border-color: #dadce0;","background-color: #fff;","border-radius: 2px;","padding: 4px;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownContent {","max-height: 300px;","overflow: auto;","overflow-x: hidden;","position: relative;","}",".blocklyDropDownArrow {","position: absolute;","left: 0;","top: 0;","width: 16px;","height: 16px;","z-index: -1;","background-color: inherit;","border-color: inherit;","}",".blocklyDropDownButton {","display: inline-block;","float: left;","padding: 0;","margin: 4px;","border-radius: 4px;","outline: none;","border: 1px solid;","transition: box-shadow .1s;","cursor: pointer;","}",".blocklyArrowTop {","border-top: 1px solid;","border-left: 1px solid;","border-top-left-radius: 4px;","border-color: inherit;","}",".blocklyArrowBottom {","border-bottom: 1px solid;","border-right: 1px solid;","border-bottom-right-radius: 4px;","border-color: inherit;","}",".blocklyResizeSE {","cursor: se-resize;","fill: #aaa;","}",".blocklyResizeSW {","cursor: sw-resize;","fill: #aaa;","}",".blocklyResizeLine {","stroke: #515A5A;","stroke-width: 1;","}",".blocklyHighlightedConnectionPath {","fill: none;","stroke: #fc3;","stroke-width: 4px;","}",".blocklyPathLight {","fill: none;","stroke-linecap: round;","stroke-width: 1;","}",".blocklySelected>.blocklyPathLight {","display: none;","}",".blocklyDraggable {",'cursor: url("<<<PATH>>>/handopen.cur"), auto;',"cursor: grab;","cursor: -webkit-grab;","}",".blocklyDragging {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDraggable:active {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyBlockDragSurface .blocklyDraggable {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDragging.blocklyDraggingDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyDragging>.blocklyPath,",".blocklyDragging>.blocklyPathLight {","fill-opacity: .8;","stroke-opacity: .8;","}",".blocklyDragging>.blocklyPathDark {","display: none;","}",".blocklyDisabled>.blocklyPath {","fill-opacity: .5;","stroke-opacity: .5;","}",".blocklyDisabled>.blocklyPathLight,",".blocklyDisabled>.blocklyPathDark {","display: none;","}",".blocklyInsertionMarker>.blocklyPath,",".blocklyInsertionMarker>.blocklyPathLight,",".blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: .2;","stroke: none;","}",".blocklyMultilineText {","font-family: monospace;","}",".blocklyNonEditableText>text {","pointer-events: none;","}",".blocklyFlyout {","position: absolute;","z-index: 20;","}",".blocklyText text {","cursor: default;","}",".blocklySvg text,",".blocklyBlockDragSurface text {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","cursor: inherit;","}",".blocklyHidden {","display: none;","}",".blocklyFieldDropdown:not(.blocklyHidden) {","display: block;","}",".blocklyIconGroup {","cursor: default;","}",".blocklyIconGroup:not(:hover),",".blocklyIconGroupReadonly {","opacity: .6;","}",".blocklyIconShape {","fill: #00f;","stroke: #fff;","stroke-width: 1px;","}",".blocklyIconSymbol {","fill: #fff;","}",".blocklyMinimalBody {","margin: 0;","padding: 0;","}",".blocklyHtmlInput {","border: none;","border-radius: 4px;","height: 100%;","margin: 0;","outline: none;","padding: 0;","width: 100%;","text-align: center;","display: block;","box-sizing: border-box;","}",".blocklyHtmlInput::-ms-clear {","display: none;","}",".blocklyMainBackground {","stroke-width: 1;","stroke: #c6c6c6;","}",".blocklyMutatorBackground {","fill: #fff;","stroke: #ddd;","stroke-width: 1;","}",".blocklyFlyoutBackground {","fill: #ddd;","fill-opacity: .8;","}",".blocklyMainWorkspaceScrollbar {","z-index: 20;","}",".blocklyFlyoutScrollbar {","z-index: 30;","}",".blocklyScrollbarHorizontal,",".blocklyScrollbarVertical {","position: absolute;","outline: none;","}",".blocklyScrollbarBackground {","opacity: 0;","}",".blocklyScrollbarHandle {","fill: #ccc;","}",".blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyScrollbarHandle:hover {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarHandle {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyFlyout .blocklyScrollbarHandle:hover {","fill: #aaa;","}",".blocklyInvalidInput {","background: #faa;","}",".blocklyVerticalMarker {","stroke-width: 3px;","fill: rgba(255,255,255,.5);","pointer-events: none;","}",".blocklyComputeCanvas {","position: absolute;","width: 0;","height: 0;","}",".blocklyNoPointerEvents {","pointer-events: none;","}",".blocklyContextMenu {","border-radius: 4px;","max-height: 100%;","}",".blocklyDropdownMenu {","border-radius: 2px;","padding: 0 !important;","}",".blocklyDropdownMenu .blocklyMenuItem {","padding-left: 28px;","}",".blocklyDropdownMenu .blocklyMenuItemRtl {","padding-left: 5px;","padding-right: 28px;","}",".blocklyWidgetDiv .blocklyMenu {","background: #fff;","border: 1px solid transparent;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","font: normal 13px Arial, sans-serif;","margin: 0;","outline: none;","padding: 4px 0;","position: absolute;","overflow-y: auto;","overflow-x: hidden;","max-height: 100%;","z-index: 20000;","}",".blocklyWidgetDiv .blocklyMenu.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv .blocklyMenu {","background: inherit;","border: inherit;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"outline: none;","position: relative;","z-index: 20000;","}",".blocklyMenuItem {","border: none;","color: #000;","cursor: pointer;","list-style: none;","margin: 0;","min-width: 7em;","padding: 6px 15px;","white-space: nowrap;","}",".blocklyMenuItemDisabled {","color: #ccc;","cursor: inherit;","}",".blocklyMenuItemHighlight {","background-color: rgba(0,0,0,.1);","}",".blocklyMenuItemCheckbox {","height: 16px;","position: absolute;","width: 16px;","}",".blocklyMenuItemSelected .blocklyMenuItemCheckbox {","background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;","float: left;","margin-left: -24px;","position: static;","}",".blocklyMenuItemRtl .blocklyMenuItemCheckbox {","float: right;","margin-right: -24px;","}"],e.Grid=function(t,n){this.gridPattern_=t,this.spacing_=n.spacing,this.length_=n.length,this.line2_=(this.line1_=t.firstChild)&&this.line1_.nextSibling,this.snapToGrid_=n.snap},e.Grid.prototype.scale_=1,e.Grid.prototype.dispose=function(){this.gridPattern_=null},e.Grid.prototype.shouldSnap=function(){return this.snapToGrid_},e.Grid.prototype.getSpacing=function(){return this.spacing_},e.Grid.prototype.getPatternId=function(){return this.gridPattern_.id},e.Grid.prototype.update=function(t){this.scale_=t;var n=this.spacing_*t||100;this.gridPattern_.setAttribute("width",n),this.gridPattern_.setAttribute("height",n);var r=(n=Math.floor(this.spacing_/2)+.5)-this.length_/2,s=n+this.length_/2;this.setLineAttributes_(this.line1_,t,r*=t,s*=t,n*=t,n),this.setLineAttributes_(this.line2_,t,n,n,r,s)},e.Grid.prototype.setLineAttributes_=function(t,n,r,s,u,b){t&&(t.setAttribute("stroke-width",n),t.setAttribute("x1",r),t.setAttribute("y1",u),t.setAttribute("x2",s),t.setAttribute("y2",b))},e.Grid.prototype.moveTo=function(t,n){this.gridPattern_.setAttribute("x",t),this.gridPattern_.setAttribute("y",n),(e.utils.userAgent.IE||e.utils.userAgent.EDGE)&&this.update(this.scale_)},e.Grid.createDom=function(t,n,r){return t=e.utils.dom.createSvgElement(e.utils.Svg.PATTERN,{id:"blocklyGridPattern"+t,patternUnits:"userSpaceOnUse"},r),0<n.length&&0<n.spacing?(e.utils.dom.createSvgElement(e.utils.Svg.LINE,{stroke:n.colour},t),1<n.length&&e.utils.dom.createSvgElement(e.utils.Svg.LINE,{stroke:n.colour},t)):e.utils.dom.createSvgElement(e.utils.Svg.LINE,{},t),t},e.Theme=function(t,n,r,s){this.name=t,this.blockStyles=n||Object.create(null),this.categoryStyles=r||Object.create(null),this.componentStyles=s||Object.create(null),this.fontStyle=Object.create(null),this.startHats=null,e.registry.register(e.registry.Type.THEME,t,this)},e.Theme.prototype.getClassName=function(){return this.name+"-theme"},e.Theme.prototype.setBlockStyle=function(t,n){this.blockStyles[t]=n},e.Theme.prototype.setCategoryStyle=function(t,n){this.categoryStyles[t]=n},e.Theme.prototype.getComponentStyle=function(t){return(t=this.componentStyles[t])&&"string"==typeof t&&this.getComponentStyle(t)?this.getComponentStyle(t):t?String(t):null},e.Theme.prototype.setComponentStyle=function(t,n){this.componentStyles[t]=n},e.Theme.prototype.setFontStyle=function(t){this.fontStyle=t},e.Theme.prototype.setStartHats=function(t){this.startHats=t},e.Theme.defineTheme=function(t,n){var r=new e.Theme(t),s=n.base;return s&&("string"==typeof s&&(s=e.registry.getObject(e.registry.Type.THEME,s)),s instanceof e.Theme&&(e.utils.object.deepMerge(r,s),r.name=t)),e.utils.object.deepMerge(r.blockStyles,n.blockStyles),e.utils.object.deepMerge(r.categoryStyles,n.categoryStyles),e.utils.object.deepMerge(r.componentStyles,n.componentStyles),e.utils.object.deepMerge(r.fontStyle,n.fontStyle),null!=n.startHats&&(r.startHats=n.startHats),r},e.Themes={},e.Themes.Classic={},e.Themes.Classic.defaultBlockStyles={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},e.Themes.Classic.categoryStyles={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},e.Themes.Classic=new e.Theme("classic",e.Themes.Classic.defaultBlockStyles,e.Themes.Classic.categoryStyles),e.utils.IdGenerator={},e.utils.IdGenerator.nextId_=0,e.utils.IdGenerator.getNextUniqueId=function(){return"blockly-"+(e.utils.IdGenerator.nextId_++).toString(36)},e.utils.Metrics=function(){},e.utils.toolbox={},e.utils.toolbox.CATEGORY_TOOLBOX_KIND="categoryToolbox",e.utils.toolbox.FLYOUT_TOOLBOX_KIND="flyoutToolbox",e.utils.toolbox.Position={TOP:0,BOTTOM:1,LEFT:2,RIGHT:3},e.utils.toolbox.convertToolboxDefToJson=function(t){return t?((t instanceof Element||"string"==typeof t)&&(t=e.utils.toolbox.parseToolboxTree(t),t=e.utils.toolbox.convertToToolboxJson_(t)),e.utils.toolbox.validateToolbox_(t),t):null},e.utils.toolbox.validateToolbox_=function(t){var n=t.kind;if(t=t.contents,n&&n!=e.utils.toolbox.FLYOUT_TOOLBOX_KIND&&n!=e.utils.toolbox.CATEGORY_TOOLBOX_KIND)throw Error("Invalid toolbox kind "+n+". Please supply either "+e.utils.toolbox.FLYOUT_TOOLBOX_KIND+" or "+e.utils.toolbox.CATEGORY_TOOLBOX_KIND);if(!t)throw Error("Toolbox must have a contents attribute.")},e.utils.toolbox.convertFlyoutDefToJsonArray=function(t){return t?t.contents?t.contents:Array.isArray(t)&&0<t.length&&!t[0].nodeType?t:e.utils.toolbox.xmlToJsonArray_(t):[]},e.utils.toolbox.hasCategories=function(t){if(!t)return!1;var n=t.kind;return n?n==e.utils.toolbox.CATEGORY_TOOLBOX_KIND:!!t.contents.filter(function(r){return"CATEGORY"==r.kind.toUpperCase()}).length},e.utils.toolbox.isCategoryCollapsible=function(t){return!(!t||!t.contents||!t.contents.filter(function(n){return"CATEGORY"==n.kind.toUpperCase()}).length)},e.utils.toolbox.convertToToolboxJson_=function(t){var n={contents:e.utils.toolbox.xmlToJsonArray_(t)};return t instanceof Node&&e.utils.toolbox.addAttributes_(t,n),n},e.utils.toolbox.xmlToJsonArray_=function(t){var s,n=[],r=t.childNodes;for(r||(r=t),t=0;s=r[t];t++)if(s.tagName){var u={},b=s.tagName.toUpperCase();u.kind=b,"BLOCK"==b?u.blockxml=s:s.childNodes&&0<s.childNodes.length&&(u.contents=e.utils.toolbox.xmlToJsonArray_(s)),e.utils.toolbox.addAttributes_(s,u),n.push(u)}return n},e.utils.toolbox.addAttributes_=function(t,n){for(var r=0;r<t.attributes.length;r++){var s=t.attributes[r];-1<s.nodeName.indexOf("css-")?(n.cssconfig=n.cssconfig||{},n.cssconfig[s.nodeName.replace("css-","")]=s.value):n[s.nodeName]=s.value}},e.utils.toolbox.parseToolboxTree=function(t){if(t){if("string"!=typeof t&&(e.utils.userAgent.IE&&t.outerHTML?t=t.outerHTML:t instanceof Element||(t=null)),"string"==typeof t&&"xml"!=(t=e.Xml.textToDom(t)).nodeName.toLowerCase())throw TypeError("Toolbox should be an <xml> document.")}else t=null;return t},e.Options=function(t){var n=!!t.readOnly;if(n)var r=null,s=!1,u=!1,b=!1,x=!1,B=!1,Z=!1;else{r=e.utils.toolbox.convertToolboxDefToJson(t.toolbox),s=e.utils.toolbox.hasCategories(r),void 0===(u=t.trashcan)&&(u=s);var ot=t.maxTrashcanContents;u?void 0===ot&&(ot=32):ot=0,void 0===(b=t.collapse)&&(b=s),void 0===(x=t.comments)&&(x=s),void 0===(B=t.disable)&&(B=s),void 0===(Z=t.sounds)&&(Z=!0)}var et=!!t.rtl,Tt=t.horizontalLayout;void 0===Tt&&(Tt=!1);var Pt=t.toolboxPosition;Pt="end"!==Pt,Pt=Tt?Pt?e.utils.toolbox.Position.TOP:e.utils.toolbox.Position.BOTTOM:Pt==et?e.utils.toolbox.Position.RIGHT:e.utils.toolbox.Position.LEFT;var pt=t.css;void 0===pt&&(pt=!0);var It="https://blockly-demo.appspot.com/static/media/";t.media?It=t.media:t.path&&(It=t.path+"media/");var Ht=void 0===t.oneBasedIndex||!!t.oneBasedIndex,Jt=t.renderer||"geras",Ct=t.plugins||{};this.RTL=et,this.oneBasedIndex=Ht,this.collapse=b,this.comments=x,this.disable=B,this.readOnly=n,this.maxBlocks=t.maxBlocks||1/0,this.maxInstances=t.maxInstances,this.pathToMedia=It,this.hasCategories=s,this.moveOptions=e.Options.parseMoveOptions_(t,s),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=u,this.maxTrashcanContents=ot,this.hasSounds=Z,this.hasCss=pt,this.horizontalLayout=Tt,this.languageTree=r,this.gridOptions=e.Options.parseGridOptions_(t),this.zoomOptions=e.Options.parseZoomOptions_(t),this.toolboxPosition=Pt,this.theme=e.Options.parseThemeOptions_(t),this.renderer=Jt,this.rendererOverrides=t.rendererOverrides,this.gridPattern=null,this.parentWorkspace=t.parentWorkspace,this.plugins=Ct},e.BlocklyOptions=function(){},e.Options.parseMoveOptions_=function(t,n){var r=t.move||{},s={};return void 0===r.scrollbars&&void 0===t.scrollbars?s.scrollbars=n:"object"==typeof r.scrollbars?(s.scrollbars={},s.scrollbars.horizontal=!!r.scrollbars.horizontal,s.scrollbars.vertical=!!r.scrollbars.vertical,s.scrollbars.horizontal&&s.scrollbars.vertical?s.scrollbars=!0:s.scrollbars.horizontal||s.scrollbars.vertical||(s.scrollbars=!1)):s.scrollbars=!!r.scrollbars||!!t.scrollbars,s.wheel=s.scrollbars&&void 0!==r.wheel?!!r.wheel:"object"==typeof s.scrollbars,s.drag=!(!s.scrollbars||void 0!==r.drag&&!r.drag),s},e.Options.parseZoomOptions_=function(t){var n={};return n.controls=void 0!==(t=t.zoom||{}).controls&&!!t.controls,n.wheel=void 0!==t.wheel&&!!t.wheel,n.startScale=void 0===t.startScale?1:Number(t.startScale),n.maxScale=void 0===t.maxScale?3:Number(t.maxScale),n.minScale=void 0===t.minScale?.3:Number(t.minScale),n.scaleSpeed=void 0===t.scaleSpeed?1.2:Number(t.scaleSpeed),n.pinch=void 0===t.pinch?n.wheel||n.controls:!!t.pinch,n},e.Options.parseGridOptions_=function(t){t=t.grid||{};var n={};return n.spacing=Number(t.spacing)||0,n.colour=t.colour||"#888",n.length=void 0===t.length?1:Number(t.length),n.snap=0<n.spacing&&!!t.snap,n},e.Options.parseThemeOptions_=function(t){return"string"==typeof(t=t.theme||e.Themes.Classic)?e.registry.getObject(e.registry.Type.THEME,t):t instanceof e.Theme?t:e.Theme.defineTheme(t.name||"builtin"+e.utils.IdGenerator.getNextUniqueId(),t)},e.Options.parseToolboxTree=function(t){return e.utils.deprecation.warn("Blockly.Options.parseToolboxTree","September 2020","September 2021","Blockly.utils.toolbox.parseToolboxTree"),e.utils.toolbox.parseToolboxTree(t)},e.ScrollbarPair=function(t,n,r,s,u){this.workspace_=t,r=void 0===r||r;var b=(n=void 0===n||n)&&r;n&&(this.hScroll=new e.Scrollbar(t,!0,b,s,u)),r&&(this.vScroll=new e.Scrollbar(t,!1,b,s,u)),b&&(this.corner_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{height:e.Scrollbar.scrollbarThickness,width:e.Scrollbar.scrollbarThickness,class:"blocklyScrollbarBackground"},null),e.utils.dom.insertAfter(this.corner_,t.getBubbleCanvas())),this.oldHostMetrics_=null},e.ScrollbarPair.prototype.dispose=function(){e.utils.dom.removeNode(this.corner_),this.oldHostMetrics_=this.workspace_=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)},e.ScrollbarPair.prototype.resize=function(){var t=this.workspace_.getMetrics();if(t){var n=!1,r=!1;if(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==t.viewWidth&&this.oldHostMetrics_.viewHeight==t.viewHeight&&this.oldHostMetrics_.absoluteTop==t.absoluteTop&&this.oldHostMetrics_.absoluteLeft==t.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.scrollWidth==t.scrollWidth&&this.oldHostMetrics_.viewLeft==t.viewLeft&&this.oldHostMetrics_.scrollLeft==t.scrollLeft||(n=!0),this.oldHostMetrics_&&this.oldHostMetrics_.scrollHeight==t.scrollHeight&&this.oldHostMetrics_.viewTop==t.viewTop&&this.oldHostMetrics_.scrollTop==t.scrollTop||(r=!0)):r=n=!0,n||r){try{e.Events.disable(),this.hScroll&&n&&this.hScroll.resize(t),this.vScroll&&r&&this.vScroll.resize(t)}finally{e.Events.enable()}this.workspace_.maybeFireViewportChangeEvent()}this.hScroll&&this.vScroll&&(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==t.viewWidth&&this.oldHostMetrics_.absoluteLeft==t.absoluteLeft||this.corner_.setAttribute("x",this.vScroll.position.x),this.oldHostMetrics_&&this.oldHostMetrics_.viewHeight==t.viewHeight&&this.oldHostMetrics_.absoluteTop==t.absoluteTop||this.corner_.setAttribute("y",this.hScroll.position.y)),this.oldHostMetrics_=t}},e.ScrollbarPair.prototype.canScrollHorizontally=function(){return!!this.hScroll},e.ScrollbarPair.prototype.canScrollVertically=function(){return!!this.vScroll},e.ScrollbarPair.prototype.setOrigin=function(t,n){this.hScroll&&this.hScroll.setOrigin(t,n),this.vScroll&&this.vScroll.setOrigin(t,n)},e.ScrollbarPair.prototype.set=function(t,n,r){this.hScroll&&this.hScroll.set(t,!1),this.vScroll&&this.vScroll.set(n,!1),(r||void 0===r)&&(t={},this.hScroll&&(t.x=this.hScroll.getRatio_()),this.vScroll&&(t.y=this.vScroll.getRatio_()),this.workspace_.setMetrics(t))},e.ScrollbarPair.prototype.setX=function(t){this.hScroll&&this.hScroll.set(t,!0)},e.ScrollbarPair.prototype.setY=function(t){this.vScroll&&this.vScroll.set(t,!0)},e.ScrollbarPair.prototype.setContainerVisible=function(t){this.hScroll&&this.hScroll.setContainerVisible(t),this.vScroll&&this.vScroll.setContainerVisible(t)},e.ScrollbarPair.prototype.isVisible=function(){var t=!1;return this.hScroll&&(t=this.hScroll.isVisible()),this.vScroll&&(t=t||this.vScroll.isVisible()),t},e.ScrollbarPair.prototype.resizeContent=function(t){this.hScroll&&this.hScroll.resizeContentHorizontal(t),this.vScroll&&this.vScroll.resizeContentVertical(t)},e.ScrollbarPair.prototype.resizeView=function(t){this.hScroll&&this.hScroll.resizeViewHorizontal(t),this.vScroll&&this.vScroll.resizeViewVertical(t)},e.Scrollbar=function(t,n,r,s,u){this.workspace_=t,this.pair_=r||!1,this.horizontal_=n,this.margin_=void 0!==u?u:e.Scrollbar.DEFAULT_SCROLLBAR_MARGIN,this.ratio=this.oldHostMetrics_=null,this.createDom_(s),this.position=new e.utils.Coordinate(0,0),t=e.Scrollbar.scrollbarThickness,n?(this.svgBackground_.setAttribute("height",t),this.outerSvg_.setAttribute("height",t),this.svgHandle_.setAttribute("height",t-5),this.svgHandle_.setAttribute("y",2.5),this.lengthAttribute_="width",this.positionAttribute_="x"):(this.svgBackground_.setAttribute("width",t),this.outerSvg_.setAttribute("width",t),this.svgHandle_.setAttribute("width",t-5),this.svgHandle_.setAttribute("x",2.5),this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=e.browserEvents.conditionalBind(this.svgBackground_,"mousedown",this,this.onMouseDownBar_),this.onMouseDownHandleWrapper_=e.browserEvents.conditionalBind(this.svgHandle_,"mousedown",this,this.onMouseDownHandle_)},e.Scrollbar.prototype.origin_=new e.utils.Coordinate(0,0),e.Scrollbar.prototype.startDragMouse_=0,e.Scrollbar.prototype.scrollbarLength_=0,e.Scrollbar.prototype.handleLength_=0,e.Scrollbar.prototype.handlePosition_=0,e.Scrollbar.prototype.isVisible_=!0,e.Scrollbar.prototype.containerVisible_=!0,e.Scrollbar.scrollbarThickness=15,e.Touch.TOUCH_ENABLED&&(e.Scrollbar.scrollbarThickness=25),e.Scrollbar.DEFAULT_SCROLLBAR_MARGIN=.5,e.Scrollbar.metricsAreEquivalent_=function(t,n){return t.viewWidth==n.viewWidth&&t.viewHeight==n.viewHeight&&t.viewLeft==n.viewLeft&&t.viewTop==n.viewTop&&t.absoluteTop==n.absoluteTop&&t.absoluteLeft==n.absoluteLeft&&t.scrollWidth==n.scrollWidth&&t.scrollHeight==n.scrollHeight&&t.scrollLeft==n.scrollLeft&&t.scrollTop==n.scrollTop},e.Scrollbar.prototype.dispose=function(){this.cleanUp_(),e.browserEvents.unbind(this.onMouseDownBarWrapper_),this.onMouseDownBarWrapper_=null,e.browserEvents.unbind(this.onMouseDownHandleWrapper_),this.onMouseDownHandleWrapper_=null,e.utils.dom.removeNode(this.outerSvg_),this.svgBackground_=this.svgGroup_=this.outerSvg_=null,this.svgHandle_&&(this.workspace_.getThemeManager().unsubscribe(this.svgHandle_),this.svgHandle_=null),this.workspace_=null},e.Scrollbar.prototype.constrainHandleLength_=function(t){return 0>=t||isNaN(t)?0:Math.min(t,this.scrollbarLength_)},e.Scrollbar.prototype.setHandleLength_=function(t){this.handleLength_=t,this.svgHandle_.setAttribute(this.lengthAttribute_,this.handleLength_)},e.Scrollbar.prototype.constrainHandlePosition_=function(t){return 0>=t||isNaN(t)?0:Math.min(t,this.scrollbarLength_-this.handleLength_)},e.Scrollbar.prototype.setHandlePosition=function(t){this.handlePosition_=t,this.svgHandle_.setAttribute(this.positionAttribute_,this.handlePosition_)},e.Scrollbar.prototype.setScrollbarLength_=function(t){this.scrollbarLength_=t,this.outerSvg_.setAttribute(this.lengthAttribute_,this.scrollbarLength_),this.svgBackground_.setAttribute(this.lengthAttribute_,this.scrollbarLength_)},e.Scrollbar.prototype.setPosition=function(t,n){this.position.x=t,this.position.y=n,e.utils.dom.setCssTransform(this.outerSvg_,"translate("+(this.position.x+this.origin_.x)+"px,"+(this.position.y+this.origin_.y)+"px)")},e.Scrollbar.prototype.resize=function(t){!t&&!(t=this.workspace_.getMetrics())||this.oldHostMetrics_&&e.Scrollbar.metricsAreEquivalent_(t,this.oldHostMetrics_)||(this.horizontal_?this.resizeHorizontal_(t):this.resizeVertical_(t),this.oldHostMetrics_=t,this.updateMetrics_())},e.Scrollbar.prototype.requiresViewResize_=function(t){return!this.oldHostMetrics_||this.oldHostMetrics_.viewWidth!==t.viewWidth||this.oldHostMetrics_.viewHeight!==t.viewHeight||this.oldHostMetrics_.absoluteLeft!==t.absoluteLeft||this.oldHostMetrics_.absoluteTop!==t.absoluteTop},e.Scrollbar.prototype.resizeHorizontal_=function(t){this.requiresViewResize_(t)?this.resizeViewHorizontal(t):this.resizeContentHorizontal(t)},e.Scrollbar.prototype.resizeViewHorizontal=function(t){var n=t.viewWidth-2*this.margin_;this.pair_&&(n-=e.Scrollbar.scrollbarThickness),this.setScrollbarLength_(Math.max(0,n)),n=t.absoluteLeft+this.margin_,this.pair_&&this.workspace_.RTL&&(n+=e.Scrollbar.scrollbarThickness),this.setPosition(n,t.absoluteTop+t.viewHeight-e.Scrollbar.scrollbarThickness-this.margin_),this.resizeContentHorizontal(t)},e.Scrollbar.prototype.resizeContentHorizontal=function(t){if(t.viewWidth>=t.scrollWidth)this.setHandleLength_(this.scrollbarLength_),this.setHandlePosition(0),this.pair_||this.setVisible(!1);else{this.pair_||this.setVisible(!0);var n=this.scrollbarLength_*t.viewWidth/t.scrollWidth;n=this.constrainHandleLength_(n),this.setHandleLength_(n);var r=this.scrollbarLength_-this.handleLength_;t=this.constrainHandlePosition_(t=(t.viewLeft-t.scrollLeft)/(n=t.scrollWidth-t.viewWidth)*r),this.setHandlePosition(t),this.ratio=r/n}},e.Scrollbar.prototype.resizeVertical_=function(t){this.requiresViewResize_(t)?this.resizeViewVertical(t):this.resizeContentVertical(t)},e.Scrollbar.prototype.resizeViewVertical=function(t){var n=t.viewHeight-2*this.margin_;this.pair_&&(n-=e.Scrollbar.scrollbarThickness),this.setScrollbarLength_(Math.max(0,n)),this.setPosition(this.workspace_.RTL?t.absoluteLeft+this.margin_:t.absoluteLeft+t.viewWidth-e.Scrollbar.scrollbarThickness-this.margin_,t.absoluteTop+this.margin_),this.resizeContentVertical(t)},e.Scrollbar.prototype.resizeContentVertical=function(t){if(t.viewHeight>=t.scrollHeight)this.setHandleLength_(this.scrollbarLength_),this.setHandlePosition(0),this.pair_||this.setVisible(!1);else{this.pair_||this.setVisible(!0);var n=this.scrollbarLength_*t.viewHeight/t.scrollHeight;n=this.constrainHandleLength_(n),this.setHandleLength_(n);var r=this.scrollbarLength_-this.handleLength_;t=this.constrainHandlePosition_(t=(t.viewTop-t.scrollTop)/(n=t.scrollHeight-t.viewHeight)*r),this.setHandlePosition(t),this.ratio=r/n}},e.Scrollbar.prototype.createDom_=function(t){var n="blocklyScrollbar"+(this.horizontal_?"Horizontal":"Vertical");t&&(n+=" "+t),this.outerSvg_=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{class:n},null),this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},this.outerSvg_),this.svgBackground_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyScrollbarBackground"},this.svgGroup_),t=Math.floor((e.Scrollbar.scrollbarThickness-5)/2),this.svgHandle_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyScrollbarHandle",rx:t,ry:t},this.svgGroup_),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarOpacity","fill-opacity"),e.utils.dom.insertAfter(this.outerSvg_,this.workspace_.getParentSvg())},e.Scrollbar.prototype.isVisible=function(){return this.isVisible_},e.Scrollbar.prototype.setContainerVisible=function(t){var n=t!=this.containerVisible_;this.containerVisible_=t,n&&this.updateDisplay_()},e.Scrollbar.prototype.setVisible=function(t){var n=t!=this.isVisible();if(this.pair_)throw Error("Unable to toggle visibility of paired scrollbars.");this.isVisible_=t,n&&this.updateDisplay_()},e.Scrollbar.prototype.updateDisplay_=function(){this.containerVisible_&&this.isVisible()?this.outerSvg_.setAttribute("display","block"):this.outerSvg_.setAttribute("display","none")},e.Scrollbar.prototype.onMouseDownBar_=function(t){if(this.workspace_.markFocused(),e.Touch.clearTouchIdentifier(),this.cleanUp_(),e.utils.isRightButton(t))t.stopPropagation();else{var n=e.utils.mouseToSvg(t,this.workspace_.getParentSvg(),this.workspace_.getInverseScreenCTM());n=this.horizontal_?n.x:n.y;var r=e.utils.getInjectionDivXY_(this.svgHandle_),s=this.handlePosition_,u=.95*this.handleLength_;n<=(r=this.horizontal_?r.x:r.y)?s-=u:n>=r+this.handleLength_&&(s+=u),this.setHandlePosition(this.constrainHandlePosition_(s)),this.updateMetrics_(),t.stopPropagation(),t.preventDefault()}},e.Scrollbar.prototype.onMouseDownHandle_=function(t){this.workspace_.markFocused(),this.cleanUp_(),e.utils.isRightButton(t)?t.stopPropagation():(this.startDragHandle=this.handlePosition_,this.workspace_.setupDragSurface(),this.startDragMouse_=this.horizontal_?t.clientX:t.clientY,e.Scrollbar.onMouseUpWrapper_=e.browserEvents.conditionalBind(document,"mouseup",this,this.onMouseUpHandle_),e.Scrollbar.onMouseMoveWrapper_=e.browserEvents.conditionalBind(document,"mousemove",this,this.onMouseMoveHandle_),t.stopPropagation(),t.preventDefault())},e.Scrollbar.prototype.onMouseMoveHandle_=function(t){this.setHandlePosition(this.constrainHandlePosition_(this.startDragHandle+((this.horizontal_?t.clientX:t.clientY)-this.startDragMouse_))),this.updateMetrics_()},e.Scrollbar.prototype.onMouseUpHandle_=function(){this.workspace_.resetDragSurface(),e.Touch.clearTouchIdentifier(),this.cleanUp_()},e.Scrollbar.prototype.cleanUp_=function(){e.hideChaff(!0),e.Scrollbar.onMouseUpWrapper_&&(e.browserEvents.unbind(e.Scrollbar.onMouseUpWrapper_),e.Scrollbar.onMouseUpWrapper_=null),e.Scrollbar.onMouseMoveWrapper_&&(e.browserEvents.unbind(e.Scrollbar.onMouseMoveWrapper_),e.Scrollbar.onMouseMoveWrapper_=null)},e.Scrollbar.prototype.getRatio_=function(){var t=this.handlePosition_/(this.scrollbarLength_-this.handleLength_);return isNaN(t)&&(t=0),t},e.Scrollbar.prototype.updateMetrics_=function(){var t=this.getRatio_(),n={};this.horizontal_?n.x=t:n.y=t,this.workspace_.setMetrics(n)},e.Scrollbar.prototype.set=function(t,n){this.setHandlePosition(this.constrainHandlePosition_(t*this.ratio)),(n||void 0===n)&&this.updateMetrics_()},e.Scrollbar.prototype.setOrigin=function(t,n){this.origin_=new e.utils.Coordinate(t,n)},e.Tooltip={},e.Tooltip.visible=!1,e.Tooltip.blocked_=!1,e.Tooltip.LIMIT=50,e.Tooltip.mouseOutPid_=0,e.Tooltip.showPid_=0,e.Tooltip.lastX_=0,e.Tooltip.lastY_=0,e.Tooltip.element_=null,e.Tooltip.poisonedElement_=null,e.Tooltip.OFFSET_X=0,e.Tooltip.OFFSET_Y=10,e.Tooltip.RADIUS_OK=10,e.Tooltip.HOVER_MS=750,e.Tooltip.MARGINS=5,e.Tooltip.DIV=null,e.Tooltip.getTooltipOfObject=function(t){if(t=e.Tooltip.getTargetObject_(t)){for(t=t.tooltip;"function"==typeof t;)t=t();if("string"!=typeof t)throw Error("Tooltip function must return a string.");return t}return""},e.Tooltip.getTargetObject_=function(t){for(;t&&t.tooltip;){if("string"==typeof t.tooltip||"function"==typeof t.tooltip)return t;t=t.tooltip}return null},e.Tooltip.createDom=function(){e.Tooltip.DIV||(e.Tooltip.DIV=document.createElement("div"),e.Tooltip.DIV.className="blocklyTooltipDiv",(e.parentContainer||document.body).appendChild(e.Tooltip.DIV))},e.Tooltip.bindMouseEvents=function(t){t.mouseOverWrapper_=e.browserEvents.bind(t,"mouseover",null,e.Tooltip.onMouseOver_),t.mouseOutWrapper_=e.browserEvents.bind(t,"mouseout",null,e.Tooltip.onMouseOut_),t.addEventListener("mousemove",e.Tooltip.onMouseMove_,!1)},e.Tooltip.unbindMouseEvents=function(t){t&&(e.browserEvents.unbind(t.mouseOverWrapper_),e.browserEvents.unbind(t.mouseOutWrapper_),t.removeEventListener("mousemove",e.Tooltip.onMouseMove_))},e.Tooltip.onMouseOver_=function(t){e.Tooltip.blocked_||(t=e.Tooltip.getTargetObject_(t.currentTarget),e.Tooltip.element_!=t&&(e.Tooltip.hide(),e.Tooltip.poisonedElement_=null,e.Tooltip.element_=t),clearTimeout(e.Tooltip.mouseOutPid_))},e.Tooltip.onMouseOut_=function(t){e.Tooltip.blocked_||(e.Tooltip.mouseOutPid_=setTimeout(function(){e.Tooltip.element_=null,e.Tooltip.poisonedElement_=null,e.Tooltip.hide()},1),clearTimeout(e.Tooltip.showPid_))},e.Tooltip.onMouseMove_=function(t){if(e.Tooltip.element_&&e.Tooltip.element_.tooltip&&!e.Tooltip.blocked_)if(e.Tooltip.visible){var n=e.Tooltip.lastX_-t.pageX;t=e.Tooltip.lastY_-t.pageY,Math.sqrt(n*n+t*t)>e.Tooltip.RADIUS_OK&&e.Tooltip.hide()}else e.Tooltip.poisonedElement_!=e.Tooltip.element_&&(clearTimeout(e.Tooltip.showPid_),e.Tooltip.lastX_=t.pageX,e.Tooltip.lastY_=t.pageY,e.Tooltip.showPid_=setTimeout(e.Tooltip.show_,e.Tooltip.HOVER_MS))},e.Tooltip.dispose=function(){e.Tooltip.element_=null,e.Tooltip.poisonedElement_=null,e.Tooltip.hide()},e.Tooltip.hide=function(){e.Tooltip.visible&&(e.Tooltip.visible=!1,e.Tooltip.DIV&&(e.Tooltip.DIV.style.display="none")),e.Tooltip.showPid_&&clearTimeout(e.Tooltip.showPid_)},e.Tooltip.block=function(){e.Tooltip.hide(),e.Tooltip.blocked_=!0},e.Tooltip.unblock=function(){e.Tooltip.blocked_=!1},e.Tooltip.show_=function(){if(!e.Tooltip.blocked_&&(e.Tooltip.poisonedElement_=e.Tooltip.element_,e.Tooltip.DIV)){e.Tooltip.DIV.textContent="";var t=e.Tooltip.getTooltipOfObject(e.Tooltip.element_);t=(t=e.utils.string.wrap(t,e.Tooltip.LIMIT)).split("\n");for(var n=0;n<t.length;n++){var r=document.createElement("div");r.appendChild(document.createTextNode(t[n])),e.Tooltip.DIV.appendChild(r)}t=e.Tooltip.element_.RTL,n=document.documentElement.clientWidth,r=document.documentElement.clientHeight,e.Tooltip.DIV.style.direction=t?"rtl":"ltr",e.Tooltip.DIV.style.display="block",e.Tooltip.visible=!0;var s=e.Tooltip.lastX_;s=t?s-(e.Tooltip.OFFSET_X+e.Tooltip.DIV.offsetWidth):s+e.Tooltip.OFFSET_X;var u=e.Tooltip.lastY_+e.Tooltip.OFFSET_Y;u+e.Tooltip.DIV.offsetHeight>r+window.scrollY&&(u-=e.Tooltip.DIV.offsetHeight+2*e.Tooltip.OFFSET_Y),t?s=Math.max(e.Tooltip.MARGINS-window.scrollX,s):s+e.Tooltip.DIV.offsetWidth>n+window.scrollX-2*e.Tooltip.MARGINS&&(s=n-e.Tooltip.DIV.offsetWidth-2*e.Tooltip.MARGINS),e.Tooltip.DIV.style.top=u+"px",e.Tooltip.DIV.style.left=s+"px"}},e.utils.aria={},e.utils.aria.ARIA_PREFIX_="aria-",e.utils.aria.ROLE_ATTRIBUTE_="role",e.utils.aria.Role={GRID:"grid",GRIDCELL:"gridcell",GROUP:"group",LISTBOX:"listbox",MENU:"menu",MENUITEM:"menuitem",MENUITEMCHECKBOX:"menuitemcheckbox",OPTION:"option",PRESENTATION:"presentation",ROW:"row",TREE:"tree",TREEITEM:"treeitem"},e.utils.aria.State={ACTIVEDESCENDANT:"activedescendant",COLCOUNT:"colcount",DISABLED:"disabled",EXPANDED:"expanded",INVALID:"invalid",LABEL:"label",LABELLEDBY:"labelledby",LEVEL:"level",ORIENTATION:"orientation",POSINSET:"posinset",ROWCOUNT:"rowcount",SELECTED:"selected",SETSIZE:"setsize",VALUEMAX:"valuemax",VALUEMIN:"valuemin"},e.utils.aria.setRole=function(t,n){t.setAttribute(e.utils.aria.ROLE_ATTRIBUTE_,n)},e.utils.aria.setState=function(t,n,r){Array.isArray(r)&&(r=r.join(" ")),t.setAttribute(e.utils.aria.ARIA_PREFIX_+n,r)},e.IASTNodeLocation=function(){},e.IASTNodeLocationSvg=function(){},e.IASTNodeLocationWithBlock=function(){},e.IKeyboardAccessible=function(){},e.utils.deprecation={},e.utils.deprecation.warn=function(t,n,r,s){t=t+" was deprecated on "+n+" and will be deleted on "+r+".",s&&(t+="\nUse "+s+" instead."),console.warn(t)},e.Connection=function(t,n){this.sourceBlock_=t,this.type=n},e.Connection.CAN_CONNECT=0,e.Connection.REASON_SELF_CONNECTION=1,e.Connection.REASON_WRONG_TYPE=2,e.Connection.REASON_TARGET_NULL=3,e.Connection.REASON_CHECKS_FAILED=4,e.Connection.REASON_DIFFERENT_WORKSPACES=5,e.Connection.REASON_SHADOW_PARENT=6,e.Connection.REASON_DRAG_CHECKS_FAILED=7,e.Connection.prototype.targetConnection=null,e.Connection.prototype.disposed=!1,e.Connection.prototype.check_=null,e.Connection.prototype.shadowDom_=null,e.Connection.prototype.x=0,e.Connection.prototype.y=0,e.Connection.prototype.connect_=function(t){var B,n=e.connectionTypes.INPUT_VALUE,r=this.getSourceBlock(),s=t.getSourceBlock();if(t.isConnected()&&t.disconnect(),this.isConnected()){var u=this.getShadowDom(!0);this.shadowDom_=null;var b=this.targetBlock();if(b.isShadow())b.dispose(!1);else{this.disconnect();var x=b}this.shadowDom_=u}e.Events.isEnabled()&&(B=new(e.Events.get(e.Events.BLOCK_MOVE))(s)),e.Connection.connectReciprocally_(this,t),s.setParent(r),B&&(B.recordNew(),e.Events.fire(B)),x&&((s=e.Connection.getConnectionForOrphanedConnection(s,t=this.type===n?x.outputConnection:x.previousConnection))?t.connect(s):t.onFailedConnect(this))},e.Connection.prototype.dispose=function(){if(this.isConnected()){this.setShadowDom(null);var t=this.targetBlock();t&&t.unplug()}this.disposed=!0},e.Connection.prototype.getSourceBlock=function(){return this.sourceBlock_},e.Connection.prototype.isSuperior=function(){return this.type==e.connectionTypes.INPUT_VALUE||this.type==e.connectionTypes.NEXT_STATEMENT},e.Connection.prototype.isConnected=function(){return!!this.targetConnection},e.Connection.prototype.canConnectWithReason=function(t){return e.utils.deprecation.warn("Connection.prototype.canConnectWithReason","July 2020","July 2021","the workspace's connection checker"),this.getConnectionChecker().canConnectWithReason(this,t,!1)},e.Connection.prototype.checkConnection=function(t){e.utils.deprecation.warn("Connection.prototype.checkConnection","July 2020","July 2021","the workspace's connection checker");var n=this.getConnectionChecker(),r=n.canConnectWithReason(this,t,!1);if(r!=e.Connection.CAN_CONNECT)throw Error(n.getErrorMessage(r,this,t))},e.Connection.prototype.getConnectionChecker=function(){return this.sourceBlock_.workspace.connectionChecker},e.Connection.prototype.isConnectionAllowed=function(t){return e.utils.deprecation.warn("Connection.prototype.isConnectionAllowed","July 2020","July 2021","the workspace's connection checker"),this.getConnectionChecker().canConnect(this,t,!0)},e.Connection.prototype.onFailedConnect=function(t){},e.Connection.prototype.connect=function(t){if(this.targetConnection!=t&&this.getConnectionChecker().canConnect(this,t,!1)){var n=e.Events.getGroup();n||e.Events.setGroup(!0),this.isSuperior()?this.connect_(t):t.connect_(this),n||e.Events.setGroup(!1)}},e.Connection.connectReciprocally_=function(t,n){if(!t||!n)throw Error("Cannot connect null connections.");t.targetConnection=n,n.targetConnection=t},e.Connection.getSingleConnection_=function(t,n){for(var b,r=null,s=(n=n.outputConnection).getConnectionChecker(),u=0;b=t.inputList[u];u++)if((b=b.connection)&&s.canConnect(n,b,!1)){if(r)return null;r=b}return r},e.Connection.getConnectionForOrphanedOutput_=function(t,n){for(var r;r=e.Connection.getSingleConnection_(t,n);)if(!(t=r.targetBlock())||t.isShadow())return r;return null},e.Connection.getConnectionForOrphanedConnection=function(t,n){if(n.type===e.connectionTypes.OUTPUT_VALUE)return e.Connection.getConnectionForOrphanedOutput_(t,n.getSourceBlock());t=t.lastConnectionInStack(!0);var r=n.getConnectionChecker();return t&&r.canConnect(n,t,!1)?t:null},e.Connection.prototype.disconnect=function(){var t=this.targetConnection;if(!t)throw Error("Source connection not connected.");if(t.targetConnection!=this)throw Error("Target connection not connected to source connection.");if(this.isSuperior()){var n=this.sourceBlock_,r=t.getSourceBlock();t=this}else n=t.getSourceBlock(),r=this.sourceBlock_;var s=e.Events.getGroup();s||e.Events.setGroup(!0),this.disconnectInternal_(n,r),r.isShadow()||t.respawnShadow_(),s||e.Events.setGroup(!1)},e.Connection.prototype.disconnectInternal_=function(t,n){var r;e.Events.isEnabled()&&(r=new(e.Events.get(e.Events.BLOCK_MOVE))(n)),this.targetConnection=this.targetConnection.targetConnection=null,n.setParent(null),r&&(r.recordNew(),e.Events.fire(r))},e.Connection.prototype.respawnShadow_=function(){var t=this.getSourceBlock(),n=this.getShadowDom();if(t.workspace&&n)if((t=e.Xml.domToBlock(n,t.workspace)).outputConnection)this.connect(t.outputConnection);else{if(!t.previousConnection)throw Error("Child block does not have output or previous statement.");this.connect(t.previousConnection)}},e.Connection.prototype.targetBlock=function(){return this.isConnected()?this.targetConnection.getSourceBlock():null},e.Connection.prototype.checkType=function(t){return e.utils.deprecation.warn("Connection.prototype.checkType","October 2019","January 2021","the workspace's connection checker"),this.getConnectionChecker().canConnect(this,t,!1)},e.Connection.prototype.checkType_=function(t){return e.utils.deprecation.warn("Connection.prototype.checkType_","October 2019","January 2021","the workspace's connection checker"),this.checkType(t)},e.Connection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()},e.Connection.prototype.setCheck=function(t){return t?(Array.isArray(t)||(t=[t]),this.check_=t,this.onCheckChanged_()):this.check_=null,this},e.Connection.prototype.getCheck=function(){return this.check_},e.Connection.prototype.setShadowDom=function(t){this.shadowDom_=t,(t=this.targetBlock())?t.isShadow()&&(t.dispose(!1),this.respawnShadow_()):this.respawnShadow_()},e.Connection.prototype.getShadowDom=function(t){return t&&this.targetBlock().isShadow()?e.Xml.blockToDom(this.targetBlock()):this.shadowDom_},e.Connection.prototype.neighbours=function(t){return[]},e.Connection.prototype.getParentInput=function(){for(var t=null,n=this.sourceBlock_.inputList,r=0;r<n.length;r++)if(n[r].connection===this){t=n[r];break}return t},e.Connection.prototype.toString=function(){var t=this.sourceBlock_;if(!t)return"Orphan Connection";if(t.outputConnection==this)var n="Output Connection of ";else if(t.previousConnection==this)n="Previous Connection of ";else if(t.nextConnection==this)n="Next Connection of ";else{n=null;for(var s,r=0;s=t.inputList[r];r++)if(s.connection==this){n=s;break}if(!n)return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection";n='Input "'+n.name+'" connection on '}return n+t.toDevString()},e.IConnectionChecker=function(){},e.ConnectionChecker=function(){},e.ConnectionChecker.prototype.canConnect=function(t,n,r,s){return this.canConnectWithReason(t,n,r,s)==e.Connection.CAN_CONNECT},e.ConnectionChecker.prototype.canConnectWithReason=function(t,n,r,s){var u=this.doSafetyChecks(t,n);return u!=e.Connection.CAN_CONNECT?u:this.doTypeChecks(t,n)?r&&!this.doDragChecks(t,n,s||0)?e.Connection.REASON_DRAG_CHECKS_FAILED:e.Connection.CAN_CONNECT:e.Connection.REASON_CHECKS_FAILED},e.ConnectionChecker.prototype.getErrorMessage=function(t,n,r){switch(t){case e.Connection.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case e.Connection.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case e.Connection.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case e.Connection.REASON_TARGET_NULL:return"Target connection is null.";case e.Connection.REASON_CHECKS_FAILED:return"Connection checks failed. "+n+" expected "+n.getCheck()+", found "+r.getCheck();case e.Connection.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case e.Connection.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";default:return"Unknown connection failure: this should never happen!"}},e.ConnectionChecker.prototype.doSafetyChecks=function(t,n){if(!t||!n)return e.Connection.REASON_TARGET_NULL;if(t.isSuperior())var r=t.getSourceBlock(),s=n.getSourceBlock();else s=t.getSourceBlock(),r=n.getSourceBlock();return r==s?e.Connection.REASON_SELF_CONNECTION:n.type!=e.OPPOSITE_TYPE[t.type]?e.Connection.REASON_WRONG_TYPE:r.workspace!==s.workspace?e.Connection.REASON_DIFFERENT_WORKSPACES:r.isShadow()&&!s.isShadow()?e.Connection.REASON_SHADOW_PARENT:e.Connection.CAN_CONNECT},e.ConnectionChecker.prototype.doTypeChecks=function(t,n){if(t=t.getCheck(),n=n.getCheck(),!t||!n)return!0;for(var r=0;r<t.length;r++)if(-1!=n.indexOf(t[r]))return!0;return!1},e.ConnectionChecker.prototype.doDragChecks=function(t,n,r){if(t.distanceFrom(n)>r||n.getSourceBlock().isInsertionMarker())return!1;switch(n.type){case e.connectionTypes.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(t,n);case e.connectionTypes.OUTPUT_VALUE:if(n.isConnected()&&!n.targetBlock().isInsertionMarker()||t.isConnected())return!1;break;case e.connectionTypes.INPUT_VALUE:if(n.isConnected()&&!n.targetBlock().isMovable()&&!n.targetBlock().isShadow())return!1;break;case e.connectionTypes.NEXT_STATEMENT:if(n.isConnected()&&!t.getSourceBlock().nextConnection&&!n.targetBlock().isShadow()&&n.targetBlock().nextConnection)return!1;break;default:return!1}return-1==e.draggingConnections.indexOf(n)},e.ConnectionChecker.prototype.canConnectToPrevious_=function(t,n){return!(t.targetConnection||-1!=e.draggingConnections.indexOf(n)||n.targetConnection&&(!(t=n.targetBlock()).isInsertionMarker()||t.getPreviousBlock()))},e.registry.register(e.registry.Type.CONNECTION_CHECKER,e.registry.DEFAULT,e.ConnectionChecker),e.VariableMap=function(t){this.variableMap_=Object.create(null),this.workspace=t},e.VariableMap.prototype.clear=function(){this.variableMap_=Object.create(null)},e.VariableMap.prototype.renameVariable=function(t,n){var r=this.getVariable(n,t.type),s=this.workspace.getAllBlocks(!1);e.Events.setGroup(!0);try{r&&r.getId()!=t.getId()?this.renameVariableWithConflict_(t,n,r,s):this.renameVariableAndUses_(t,n,s)}finally{e.Events.setGroup(!1)}},e.VariableMap.prototype.renameVariableById=function(t,n){var r=this.getVariableById(t);if(!r)throw Error("Tried to rename a variable that didn't exist. ID: "+t);this.renameVariable(r,n)},e.VariableMap.prototype.renameVariableAndUses_=function(t,n,r){for(e.Events.fire(new(e.Events.get(e.Events.VAR_RENAME))(t,n)),t.name=n,n=0;n<r.length;n++)r[n].updateVarName(t)},e.VariableMap.prototype.renameVariableWithConflict_=function(t,n,r,s){var u=t.type;for(n!=r.name&&this.renameVariableAndUses_(r,n,s),n=0;n<s.length;n++)s[n].renameVarById(t.getId(),r.getId());e.Events.fire(new(e.Events.get(e.Events.VAR_DELETE))(t)),t=this.getVariablesOfType(u).indexOf(t),this.variableMap_[u].splice(t,1)},e.VariableMap.prototype.createVariable=function(t,n,r){var s=this.getVariable(t,n);if(s){if(r&&s.getId()!=r)throw Error('Variable "'+t+'" is already in use and its id is "'+s.getId()+'" which conflicts with the passed in id, "'+r+'".');return s}if(r&&this.getVariableById(r))throw Error('Variable id, "'+r+'", is already in use.');return s=r||e.utils.genUid(),s=new e.VariableModel(this.workspace,t,n=n||"",s),(t=this.variableMap_[n]||[]).push(s),delete this.variableMap_[n],this.variableMap_[n]=t,s},e.VariableMap.prototype.deleteVariable=function(t){for(var s,n=this.variableMap_[t.type],r=0;s=n[r];r++)if(s.getId()==t.getId()){n.splice(r,1),e.Events.fire(new(e.Events.get(e.Events.VAR_DELETE))(t));break}},e.VariableMap.prototype.deleteVariableById=function(t){var n=this.getVariableById(t);if(n){var u,r=n.name,s=this.getVariableUsesById(t);for(t=0;u=s[t];t++)if("procedures_defnoreturn"==u.type||"procedures_defreturn"==u.type)return t=u.getFieldValue("NAME"),r=e.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",r).replace("%2",t),void e.alert(r);var b=this;1<s.length?(r=e.Msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(s.length)).replace("%2",r),e.confirm(r,function(x){x&&n&&b.deleteVariableInternal(n,s)})):b.deleteVariableInternal(n,s)}else console.warn("Can't delete non-existent variable: "+t)},e.VariableMap.prototype.deleteVariableInternal=function(t,n){var r=e.Events.getGroup();r||e.Events.setGroup(!0);try{for(var s=0;s<n.length;s++)n[s].dispose(!0);this.deleteVariable(t)}finally{r||e.Events.setGroup(!1)}},e.VariableMap.prototype.getVariable=function(t,n){if(n=this.variableMap_[n||""])for(var s,r=0;s=n[r];r++)if(e.Names.equals(s.name,t))return s;return null},e.VariableMap.prototype.getVariableById=function(t){for(var n=Object.keys(this.variableMap_),r=0;r<n.length;r++)for(var b,s=n[r],u=0;b=this.variableMap_[s][u];u++)if(b.getId()==t)return b;return null},e.VariableMap.prototype.getVariablesOfType=function(t){return(t=this.variableMap_[t||""])?t.slice():[]},e.VariableMap.prototype.getVariableTypes=function(t){var n={};e.utils.object.mixin(n,this.variableMap_),t&&t.getPotentialVariableMap()&&e.utils.object.mixin(n,t.getPotentialVariableMap().variableMap_),t=Object.keys(n),n=!1;for(var r=0;r<t.length;r++)""==t[r]&&(n=!0);return n||t.push(""),t},e.VariableMap.prototype.getAllVariables=function(){var n,t=[];for(n in this.variableMap_)t=t.concat(this.variableMap_[n]);return t},e.VariableMap.prototype.getAllVariableNames=function(){var n,t=[];for(n in this.variableMap_)for(var u,r=this.variableMap_[n],s=0;u=r[s];s++)t.push(u.name);return t},e.VariableMap.prototype.getVariableUsesById=function(t){for(var n=[],r=this.workspace.getAllBlocks(!1),s=0;s<r.length;s++){var u=r[s].getVarModels();if(u)for(var b=0;b<u.length;b++)u[b].getId()==t&&n.push(r[s])}return n},e.Workspace=function(t){this.id=e.utils.genUid(),e.Workspace.WorkspaceDB_[this.id]=this,this.options=t||new e.Options({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(e.registry.getClassFromOptions(e.registry.Type.CONNECTION_CHECKER,this.options,!0))(this),this.topBlocks_=[],this.topComments_=[],this.commentDB_=Object.create(null),this.listeners_=[],this.undoStack_=[],this.redoStack_=[],this.blockDB_=Object.create(null),this.typedBlocksDB_=Object.create(null),this.variableMap_=new e.VariableMap(this),this.potentialVariableMap_=null},e.Workspace.prototype.rendered=!1,e.Workspace.prototype.isClearing=!1,e.Workspace.prototype.MAX_UNDO=1024,e.Workspace.prototype.connectionDBList=null,e.Workspace.prototype.dispose=function(){this.listeners_.length=0,this.clear(),delete e.Workspace.WorkspaceDB_[this.id]},e.Workspace.SCAN_ANGLE=3,e.Workspace.prototype.sortObjects_=function(t,n){return t=t.getRelativeToSurfaceXY(),n=n.getRelativeToSurfaceXY(),t.y+e.Workspace.prototype.sortObjects_.offset*t.x-(n.y+e.Workspace.prototype.sortObjects_.offset*n.x)},e.Workspace.prototype.addTopBlock=function(t){this.topBlocks_.push(t)},e.Workspace.prototype.removeTopBlock=function(t){if(!e.utils.arrayRemove(this.topBlocks_,t))throw Error("Block not present in workspace's list of top-most blocks.")},e.Workspace.prototype.getTopBlocks=function(t){var n=[].concat(this.topBlocks_);return t&&1<n.length&&(this.sortObjects_.offset=Math.sin(e.utils.math.toRadians(e.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),n.sort(this.sortObjects_)),n},e.Workspace.prototype.addTypedBlock=function(t){this.typedBlocksDB_[t.type]||(this.typedBlocksDB_[t.type]=[]),this.typedBlocksDB_[t.type].push(t)},e.Workspace.prototype.removeTypedBlock=function(t){this.typedBlocksDB_[t.type].splice(this.typedBlocksDB_[t.type].indexOf(t),1),this.typedBlocksDB_[t.type].length||delete this.typedBlocksDB_[t.type]},e.Workspace.prototype.getBlocksByType=function(t,n){return this.typedBlocksDB_[t]?(t=this.typedBlocksDB_[t].slice(0),n&&1<t.length&&(this.sortObjects_.offset=Math.sin(e.utils.math.toRadians(e.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),t.sort(this.sortObjects_)),t):[]},e.Workspace.prototype.addTopComment=function(t){this.topComments_.push(t),this.commentDB_[t.id]&&console.warn('Overriding an existing comment on this workspace, with id "'+t.id+'"'),this.commentDB_[t.id]=t},e.Workspace.prototype.removeTopComment=function(t){if(!e.utils.arrayRemove(this.topComments_,t))throw Error("Comment not present in workspace's list of top-most comments.");delete this.commentDB_[t.id]},e.Workspace.prototype.getTopComments=function(t){var n=[].concat(this.topComments_);return t&&1<n.length&&(this.sortObjects_.offset=Math.sin(e.utils.math.toRadians(e.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),n.sort(this.sortObjects_)),n},e.Workspace.prototype.getAllBlocks=function(t){if(t){t=this.getTopBlocks(!0);for(var n=[],r=0;r<t.length;r++)n.push.apply(n,t[r].getDescendants(!0))}else for(n=this.getTopBlocks(!1),r=0;r<n.length;r++)n.push.apply(n,n[r].getChildren(!1));return n.filter(function(s){return!s.isInsertionMarker()})},e.Workspace.prototype.clear=function(){this.isClearing=!0;try{var t=e.Events.getGroup();for(t||e.Events.setGroup(!0);this.topBlocks_.length;)this.topBlocks_[0].dispose(!1);for(;this.topComments_.length;)this.topComments_[this.topComments_.length-1].dispose(!1);t||e.Events.setGroup(!1),this.variableMap_.clear(),this.potentialVariableMap_&&this.potentialVariableMap_.clear()}finally{this.isClearing=!1}},e.Workspace.prototype.renameVariableById=function(t,n){this.variableMap_.renameVariableById(t,n)},e.Workspace.prototype.createVariable=function(t,n,r){return this.variableMap_.createVariable(t,n,r)},e.Workspace.prototype.getVariableUsesById=function(t){return this.variableMap_.getVariableUsesById(t)},e.Workspace.prototype.deleteVariableById=function(t){this.variableMap_.deleteVariableById(t)},e.Workspace.prototype.getVariable=function(t,n){return this.variableMap_.getVariable(t,n)},e.Workspace.prototype.getVariableById=function(t){return this.variableMap_.getVariableById(t)},e.Workspace.prototype.getVariablesOfType=function(t){return this.variableMap_.getVariablesOfType(t)},e.Workspace.prototype.getVariableTypes=function(){return this.variableMap_.getVariableTypes(this)},e.Workspace.prototype.getAllVariables=function(){return this.variableMap_.getAllVariables()},e.Workspace.prototype.getAllVariableNames=function(){return this.variableMap_.getAllVariableNames()},e.Workspace.prototype.getWidth=function(){return 0},e.Workspace.prototype.newBlock=function(t,n){return new e.Block(this,t,n)},e.Workspace.prototype.remainingCapacity=function(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length},e.Workspace.prototype.remainingCapacityOfType=function(t){return this.options.maxInstances?(void 0!==this.options.maxInstances[t]?this.options.maxInstances[t]:1/0)-this.getBlocksByType(t,!1).length:1/0},e.Workspace.prototype.isCapacityAvailable=function(t){if(!this.hasBlockLimits())return!0;var r,n=0;for(r in t){if(t[r]>this.remainingCapacityOfType(r))return!1;n+=t[r]}return!(n>this.remainingCapacity())},e.Workspace.prototype.hasBlockLimits=function(){return this.options.maxBlocks!=1/0||!!this.options.maxInstances},e.Workspace.prototype.getUndoStack=function(){return this.undoStack_},e.Workspace.prototype.getRedoStack=function(){return this.redoStack_},e.Workspace.prototype.undo=function(t){var n=t?this.redoStack_:this.undoStack_,r=t?this.undoStack_:this.redoStack_,s=n.pop();if(s){for(var u=[s];n.length&&s.group&&s.group==n[n.length-1].group;)u.push(n.pop());for(n=0;s=u[n];n++)r.push(s);u=e.Events.filter(u,t),e.Events.recordUndo=!1;try{for(n=0;s=u[n];n++)s.run(t)}finally{e.Events.recordUndo=!0}}},e.Workspace.prototype.clearUndo=function(){this.undoStack_.length=0,this.redoStack_.length=0,e.Events.clearPendingUndo()},e.Workspace.prototype.addChangeListener=function(t){return this.listeners_.push(t),t},e.Workspace.prototype.removeChangeListener=function(t){e.utils.arrayRemove(this.listeners_,t)},e.Workspace.prototype.fireChangeListener=function(t){if(t.recordUndo)for(this.undoStack_.push(t),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(var r,n=0;r=this.listeners_[n];n++)r(t)},e.Workspace.prototype.getBlockById=function(t){return this.blockDB_[t]||null},e.Workspace.prototype.setBlockById=function(t,n){this.blockDB_[t]=n},e.Workspace.prototype.removeBlockById=function(t){delete this.blockDB_[t]},e.Workspace.prototype.getCommentById=function(t){return this.commentDB_[t]||null},e.Workspace.prototype.allInputsFilled=function(t){for(var s,n=this.getTopBlocks(!1),r=0;s=n[r];r++)if(!s.allInputsFilled(t))return!1;return!0},e.Workspace.prototype.getPotentialVariableMap=function(){return this.potentialVariableMap_},e.Workspace.prototype.createPotentialVariableMap=function(){this.potentialVariableMap_=new e.VariableMap(this)},e.Workspace.prototype.getVariableMap=function(){return this.variableMap_},e.Workspace.prototype.setVariableMap=function(t){this.variableMap_=t},e.Workspace.WorkspaceDB_=Object.create(null),e.Workspace.getById=function(t){return e.Workspace.WorkspaceDB_[t]||null},e.Workspace.getAll=function(){var n,t=[];for(n in e.Workspace.WorkspaceDB_)t.push(e.Workspace.WorkspaceDB_[n]);return t},e.WorkspaceDragSurfaceSvg=function(t){this.container_=t,this.createDom()},e.WorkspaceDragSurfaceSvg.prototype.SVG_=null,e.WorkspaceDragSurfaceSvg.prototype.container_=null,e.WorkspaceDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{xmlns:e.utils.dom.SVG_NS,"xmlns:html":e.utils.dom.HTML_NS,"xmlns:xlink":e.utils.dom.XLINK_NS,version:"1.1",class:"blocklyWsDragSurface blocklyOverflowVisible"},null),this.container_.appendChild(this.SVG_))},e.WorkspaceDragSurfaceSvg.prototype.translateSurface=function(t,n){t=t.toFixed(0),n=n.toFixed(0),this.SVG_.style.display="block",e.utils.dom.setCssTransform(this.SVG_,"translate3d("+t+"px, "+n+"px, 0px)")},e.WorkspaceDragSurfaceSvg.prototype.getSurfaceTranslation=function(){return e.utils.getRelativeXY(this.SVG_)},e.WorkspaceDragSurfaceSvg.prototype.clearAndHide=function(t){if(!t)throw Error("Couldn't clear and hide the drag surface: missing new surface.");var n=this.SVG_.childNodes[0],r=this.SVG_.childNodes[1];if(!(n&&r&&e.utils.dom.hasClass(n,"blocklyBlockCanvas")&&e.utils.dom.hasClass(r,"blocklyBubbleCanvas")))throw Error("Couldn't clear and hide the drag surface. A node was missing.");if(null!=this.previousSibling_?e.utils.dom.insertAfter(n,this.previousSibling_):t.insertBefore(n,t.firstChild),e.utils.dom.insertAfter(r,n),this.SVG_.style.display="none",this.SVG_.childNodes.length)throw Error("Drag surface was not cleared.");e.utils.dom.setCssTransform(this.SVG_,""),this.previousSibling_=null},e.WorkspaceDragSurfaceSvg.prototype.setContentsAndShow=function(t,n,r,s,u,b){if(this.SVG_.childNodes.length)throw Error("Already dragging a block.");this.previousSibling_=r,t.setAttribute("transform","translate(0, 0) scale("+b+")"),n.setAttribute("transform","translate(0, 0) scale("+b+")"),this.SVG_.setAttribute("width",s),this.SVG_.setAttribute("height",u),this.SVG_.appendChild(t),this.SVG_.appendChild(n),this.SVG_.style.display="block"},e.blockRendering={},e.blockRendering.useDebugger=!1,e.blockRendering.register=function(t,n){e.registry.register(e.registry.Type.RENDERER,t,n)},e.blockRendering.unregister=function(t){e.registry.unregister(e.registry.Type.RENDERER,t)},e.blockRendering.startDebugger=function(){e.blockRendering.useDebugger=!0},e.blockRendering.stopDebugger=function(){e.blockRendering.useDebugger=!1},e.blockRendering.init=function(t,n,r){return(t=new(e.registry.getClass(e.registry.Type.RENDERER,t))(t)).init(n,r),t},e.ASTNode=function(t,n,r){if(!n)throw Error("Cannot create a node without a location.");this.type_=t,this.isConnection_=e.ASTNode.isConnectionType_(t),this.location_=n,this.wsCoordinate_=null,this.processParams_(r||null)},e.ASTNode.types={FIELD:"field",BLOCK:"block",INPUT:"input",OUTPUT:"output",NEXT:"next",PREVIOUS:"previous",STACK:"stack",WORKSPACE:"workspace"},e.ASTNode.NAVIGATE_ALL_FIELDS=!1,e.ASTNode.DEFAULT_OFFSET_Y=-20,e.ASTNode.isConnectionType_=function(t){switch(t){case e.ASTNode.types.PREVIOUS:case e.ASTNode.types.NEXT:case e.ASTNode.types.INPUT:case e.ASTNode.types.OUTPUT:return!0}return!1},e.ASTNode.createFieldNode=function(t){return t?new e.ASTNode(e.ASTNode.types.FIELD,t):null},e.ASTNode.createConnectionNode=function(t){if(!t)return null;var n=t.type;return n==e.connectionTypes.INPUT_VALUE||n==e.connectionTypes.NEXT_STATEMENT&&t.getParentInput()?e.ASTNode.createInputNode(t.getParentInput()):n==e.connectionTypes.NEXT_STATEMENT?new e.ASTNode(e.ASTNode.types.NEXT,t):n==e.connectionTypes.OUTPUT_VALUE?new e.ASTNode(e.ASTNode.types.OUTPUT,t):n==e.connectionTypes.PREVIOUS_STATEMENT?new e.ASTNode(e.ASTNode.types.PREVIOUS,t):null},e.ASTNode.createInputNode=function(t){return t&&t.connection?new e.ASTNode(e.ASTNode.types.INPUT,t.connection):null},e.ASTNode.createBlockNode=function(t){return t?new e.ASTNode(e.ASTNode.types.BLOCK,t):null},e.ASTNode.createStackNode=function(t){return t?new e.ASTNode(e.ASTNode.types.STACK,t):null},e.ASTNode.createWorkspaceNode=function(t,n){return n&&t?new e.ASTNode(e.ASTNode.types.WORKSPACE,t,{wsCoordinate:n}):null},e.ASTNode.createTopNode=function(t){var n=t.previousConnection||t.outputConnection;return n?e.ASTNode.createConnectionNode(n):e.ASTNode.createBlockNode(t)},e.ASTNode.prototype.processParams_=function(t){t&&t.wsCoordinate&&(this.wsCoordinate_=t.wsCoordinate)},e.ASTNode.prototype.getLocation=function(){return this.location_},e.ASTNode.prototype.getType=function(){return this.type_},e.ASTNode.prototype.getWsCoordinate=function(){return this.wsCoordinate_},e.ASTNode.prototype.isConnection=function(){return this.isConnection_},e.ASTNode.prototype.findNextForInput_=function(){var r,t=this.location_.getParentInput(),n=t.getSourceBlock();for(t=n.inputList.indexOf(t)+1;r=n.inputList[t];t++){for(var b,s=r.fieldRow,u=0;b=s[u];u++)if(b.isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(b);if(r.connection)return e.ASTNode.createInputNode(r)}return null},e.ASTNode.prototype.findNextForField_=function(){var t=this.location_,n=t.getParentInput(),r=t.getSourceBlock(),s=r.inputList.indexOf(n);for(t=n.fieldRow.indexOf(t)+1;n=r.inputList[s];s++){for(var u=n.fieldRow;t<u.length;){if(u[t].isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(u[t]);t++}if(t=0,n.connection)return e.ASTNode.createInputNode(n)}return null},e.ASTNode.prototype.findPrevForInput_=function(){for(var s,t=this.location_.getParentInput(),n=t.getSourceBlock(),r=n.inputList.indexOf(t);s=n.inputList[r];r--){if(s.connection&&s!==t)return e.ASTNode.createInputNode(s);for(var b,u=(s=s.fieldRow).length-1;b=s[u];u--)if(b.isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(b)}return null},e.ASTNode.prototype.findPrevForField_=function(){var u,t=this.location_,n=t.getParentInput(),r=t.getSourceBlock(),s=r.inputList.indexOf(n);for(t=n.fieldRow.indexOf(t)-1;u=r.inputList[s];s--){if(u.connection&&u!==n)return e.ASTNode.createInputNode(u);for(u=u.fieldRow;-1<t;){if(u[t].isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(u[t]);t--}0<=s-1&&(t=r.inputList[s-1].fieldRow.length-1)}return null},e.ASTNode.prototype.navigateBetweenStacks_=function(t){var n=this.getLocation();if(n instanceof e.Block||(n=n.getSourceBlock()),!n||!n.workspace)return null;var r=n.getRootBlock();n=r.workspace.getTopBlocks(!0);for(var u,s=0;u=n[s];s++)if(r.id==u.id)return-1==(t=s+(t?1:-1))||t==n.length?null:e.ASTNode.createStackNode(n[t]);throw Error("Couldn't find "+(t?"next":"previous")+" stack?!")},e.ASTNode.prototype.findTopASTNodeForBlock_=function(t){var n=t.previousConnection||t.outputConnection;return n?e.ASTNode.createConnectionNode(n):e.ASTNode.createBlockNode(t)},e.ASTNode.prototype.getOutAstNodeForBlock_=function(t){if(!t)return null;var n=(t=t.getTopStackBlock()).previousConnection||t.outputConnection;return n&&n.targetConnection&&n.targetConnection.getParentInput()?e.ASTNode.createInputNode(n.targetConnection.getParentInput()):e.ASTNode.createStackNode(t)},e.ASTNode.prototype.findFirstFieldOrInput_=function(t){t=t.inputList;for(var r,n=0;r=t[n];n++){for(var b,s=r.fieldRow,u=0;b=s[u];u++)if(b.isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(b);if(r.connection)return e.ASTNode.createInputNode(r)}return null},e.ASTNode.prototype.getSourceBlock=function(){return this.getType()===e.ASTNode.types.BLOCK||this.getType()===e.ASTNode.types.STACK?this.getLocation():this.getType()===e.ASTNode.types.WORKSPACE?null:this.getLocation().getSourceBlock()},e.ASTNode.prototype.next=function(){switch(this.type_){case e.ASTNode.types.STACK:return this.navigateBetweenStacks_(!0);case e.ASTNode.types.OUTPUT:var t=this.location_;return e.ASTNode.createBlockNode(t.getSourceBlock());case e.ASTNode.types.FIELD:return this.findNextForField_();case e.ASTNode.types.INPUT:return this.findNextForInput_();case e.ASTNode.types.BLOCK:return e.ASTNode.createConnectionNode(this.location_.nextConnection);case e.ASTNode.types.PREVIOUS:return e.ASTNode.createBlockNode((t=this.location_).getSourceBlock());case e.ASTNode.types.NEXT:return e.ASTNode.createConnectionNode((t=this.location_).targetConnection)}return null},e.ASTNode.prototype.in=function(){switch(this.type_){case e.ASTNode.types.WORKSPACE:var t=this.location_.getTopBlocks(!0);if(0<t.length)return e.ASTNode.createStackNode(t[0]);break;case e.ASTNode.types.STACK:return this.findTopASTNodeForBlock_(t=this.location_);case e.ASTNode.types.BLOCK:return this.findFirstFieldOrInput_(t=this.location_);case e.ASTNode.types.INPUT:return e.ASTNode.createConnectionNode(this.location_.targetConnection)}return null},e.ASTNode.prototype.prev=function(){switch(this.type_){case e.ASTNode.types.STACK:return this.navigateBetweenStacks_(!1);case e.ASTNode.types.FIELD:return this.findPrevForField_();case e.ASTNode.types.INPUT:return this.findPrevForInput_();case e.ASTNode.types.BLOCK:var t=this.location_;return e.ASTNode.createConnectionNode(t.previousConnection||t.outputConnection);case e.ASTNode.types.PREVIOUS:if((t=(t=this.location_).targetConnection)&&!t.getParentInput())return e.ASTNode.createConnectionNode(t);break;case e.ASTNode.types.NEXT:return e.ASTNode.createBlockNode((t=this.location_).getSourceBlock())}return null},e.ASTNode.prototype.out=function(){switch(this.type_){case e.ASTNode.types.STACK:var t=this.location_,n=t.getRelativeToSurfaceXY();return n=new e.utils.Coordinate(n.x,n.y+e.ASTNode.DEFAULT_OFFSET_Y),e.ASTNode.createWorkspaceNode(t.workspace,n);case e.ASTNode.types.OUTPUT:return(n=(t=this.location_).targetConnection)?e.ASTNode.createConnectionNode(n):e.ASTNode.createStackNode(t.getSourceBlock());case e.ASTNode.types.FIELD:return e.ASTNode.createBlockNode(this.location_.getSourceBlock());case e.ASTNode.types.INPUT:return e.ASTNode.createBlockNode((t=this.location_).getSourceBlock());case e.ASTNode.types.BLOCK:return this.getOutAstNodeForBlock_(t=this.location_);case e.ASTNode.types.PREVIOUS:case e.ASTNode.types.NEXT:return this.getOutAstNodeForBlock_((t=this.location_).getSourceBlock())}return null},e.Blocks=Object.create(null),e.Extensions={},e.Extensions.ALL_=Object.create(null),e.Extensions.register=function(t,n){if("string"!=typeof t||""==t.trim())throw Error('Error: Invalid extension name "'+t+'"');if(e.Extensions.ALL_[t])throw Error('Error: Extension "'+t+'" is already registered.');if("function"!=typeof n)throw Error('Error: Extension "'+t+'" must be a function');e.Extensions.ALL_[t]=n},e.Extensions.registerMixin=function(t,n){if(!n||"object"!=typeof n)throw Error('Error: Mixin "'+t+'" must be a object');e.Extensions.register(t,function(){this.mixin(n)})},e.Extensions.registerMutator=function(t,n,r,s){var u='Error when registering mutator "'+t+'": ';e.Extensions.checkHasFunction_(u,n.domToMutation,"domToMutation"),e.Extensions.checkHasFunction_(u,n.mutationToDom,"mutationToDom");var b=e.Extensions.checkMutatorDialog_(n,u);if(r&&"function"!=typeof r)throw Error('Extension "'+t+'" is not a function');e.Extensions.register(t,function(){if(b){if(!e.Mutator)throw Error(u+"Missing require for Blockly.Mutator");this.setMutator(new e.Mutator(s||[]))}this.mixin(n),r&&r.apply(this)})},e.Extensions.unregister=function(t){e.Extensions.ALL_[t]?delete e.Extensions.ALL_[t]:console.warn('No extension mapping for name "'+t+'" found to unregister')},e.Extensions.apply=function(t,n,r){var s=e.Extensions.ALL_[t];if("function"!=typeof s)throw Error('Error: Extension "'+t+'" not found.');if(r)e.Extensions.checkNoMutatorProperties_(t,n);else var u=e.Extensions.getMutatorProperties_(n);if(s.apply(n),r)e.Extensions.checkBlockHasMutatorProperties_('Error after applying mutator "'+t+'": ',n);else if(!e.Extensions.mutatorPropertiesMatch_(u,n))throw Error('Error when applying extension "'+t+'": mutation properties changed when applying a non-mutator extension.')},e.Extensions.checkHasFunction_=function(t,n,r){if(!n)throw Error(t+'missing required property "'+r+'"');if("function"!=typeof n)throw Error(t+'" required property "'+r+'" must be a function')},e.Extensions.checkNoMutatorProperties_=function(t,n){if(e.Extensions.getMutatorProperties_(n).length)throw Error('Error: tried to apply mutation "'+t+'" to a block that already has mutator functions.  Block id: '+n.id)},e.Extensions.checkMutatorDialog_=function(t,n){var r=void 0!==t.compose,s=void 0!==t.decompose;if(r&&s){if("function"!=typeof t.compose)throw Error(n+"compose must be a function.");if("function"!=typeof t.decompose)throw Error(n+"decompose must be a function.");return!0}if(!r&&!s)return!1;throw Error(n+'Must have both or neither of "compose" and "decompose"')},e.Extensions.checkBlockHasMutatorProperties_=function(t,n){if("function"!=typeof n.domToMutation)throw Error(t+'Applying a mutator didn\'t add "domToMutation"');if("function"!=typeof n.mutationToDom)throw Error(t+'Applying a mutator didn\'t add "mutationToDom"');e.Extensions.checkMutatorDialog_(n,t)},e.Extensions.getMutatorProperties_=function(t){var n=[];return void 0!==t.domToMutation&&n.push(t.domToMutation),void 0!==t.mutationToDom&&n.push(t.mutationToDom),void 0!==t.compose&&n.push(t.compose),void 0!==t.decompose&&n.push(t.decompose),n},e.Extensions.mutatorPropertiesMatch_=function(t,n){if((n=e.Extensions.getMutatorProperties_(n)).length!=t.length)return!1;for(var r=0;r<n.length;r++)if(t[r]!=n[r])return!1;return!0},e.Extensions.buildTooltipForDropdown=function(t,n){var r=[];return"object"==typeof document&&e.utils.runAfterPageLoad(function(){for(var s in n)e.utils.checkMessageReferences(n[s])}),function(){this.type&&-1==r.indexOf(this.type)&&(e.Extensions.checkDropdownOptionsInTable_(this,t,n),r.push(this.type)),this.setTooltip(function(){var s=String(this.getFieldValue(t)),u=n[s];return null==u?-1==r.indexOf(this.type)&&(s="No tooltip mapping for value "+s+" of field "+t,null!=this.type&&(s+=" of block type "+this.type),console.warn(s+".")):u=e.utils.replaceMessageReferences(u),u}.bind(this))}},e.Extensions.checkDropdownOptionsInTable_=function(t,n,r){var s=t.getField(n);if(!s.isOptionListDynamic()){s=s.getOptions();for(var u=0;u<s.length;++u){var b=s[u][1];null==r[b]&&console.warn("No tooltip mapping for value "+b+" of field "+n+" of block type "+t.type)}}},e.Extensions.buildTooltipWithFieldText=function(t,n){return"object"==typeof document&&e.utils.runAfterPageLoad(function(){e.utils.checkMessageReferences(t)}),function(){this.setTooltip(function(){var r=this.getField(n);return e.utils.replaceMessageReferences(t).replace("%1",r?r.getText():"")}.bind(this))}},e.Extensions.extensionParentTooltip_=function(){this.tooltipWhenNotConnected_=this.tooltip,this.setTooltip(function(){var t=this.getParent();return t&&t.getInputsInline()&&t.tooltip||this.tooltipWhenNotConnected_}.bind(this))},e.Extensions.register("parent_tooltip_when_inline",e.Extensions.extensionParentTooltip_),e.fieldRegistry={},e.fieldRegistry.register=function(t,n){e.registry.register(e.registry.Type.FIELD,t,n)},e.fieldRegistry.unregister=function(t){e.registry.unregister(e.registry.Type.FIELD,t)},e.fieldRegistry.fromJson=function(t){var n=e.registry.getObject(e.registry.Type.FIELD,t.type);return n?n.fromJson(t):(console.warn("Blockly could not create a field of type "+t.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null)},e.IDeletable=function(){},e.blockAnimations={},e.blockAnimations.disconnectPid_=0,e.blockAnimations.disconnectGroup_=null,e.blockAnimations.disposeUiEffect=function(t){var n=t.workspace,r=t.getSvgRoot();n.getAudioManager().play("delete"),t=n.getSvgXY(r),(r=r.cloneNode(!0)).translateX_=t.x,r.translateY_=t.y,r.setAttribute("transform","translate("+t.x+","+t.y+")"),n.getParentSvg().appendChild(r),r.bBox_=r.getBBox(),e.blockAnimations.disposeUiStep_(r,n.RTL,new Date,n.scale)},e.blockAnimations.disposeUiStep_=function(t,n,r,s){var u=(new Date-r)/150;1<u?e.utils.dom.removeNode(t):(t.setAttribute("transform","translate("+(t.translateX_+(n?-1:1)*t.bBox_.width*s/2*u)+","+(t.translateY_+t.bBox_.height*s*u)+") scale("+(1-u)*s+")"),setTimeout(e.blockAnimations.disposeUiStep_,10,t,n,r,s))},e.blockAnimations.connectionUiEffect=function(t){var n=t.workspace,r=n.scale;if(n.getAudioManager().play("click"),!(1>r)){var s=n.getSvgXY(t.getSvgRoot());t.outputConnection?(s.x+=(t.RTL?3:-3)*r,s.y+=13*r):t.previousConnection&&(s.x+=(t.RTL?-23:23)*r,s.y+=3*r),t=e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{cx:s.x,cy:s.y,r:0,fill:"none",stroke:"#888","stroke-width":10},n.getParentSvg()),e.blockAnimations.connectionUiStep_(t,new Date,r)}},e.blockAnimations.connectionUiStep_=function(t,n,r){var s=(new Date-n)/150;1<s?e.utils.dom.removeNode(t):(t.setAttribute("r",25*s*r),t.style.opacity=1-s,e.blockAnimations.disconnectPid_=setTimeout(e.blockAnimations.connectionUiStep_,10,t,n,r))},e.blockAnimations.disconnectUiEffect=function(t){if(t.workspace.getAudioManager().play("disconnect"),!(1>t.workspace.scale)){var n=t.getHeightWidth().height;n=Math.atan(10/n)/Math.PI*180,t.RTL||(n*=-1),e.blockAnimations.disconnectUiStep_(t.getSvgRoot(),n,new Date)}},e.blockAnimations.disconnectUiStep_=function(t,n,r){var s=(new Date-r)/200;1<s?t.skew_="":(t.skew_="skewX("+Math.round(Math.sin(s*Math.PI*3)*(1-s)*n)+")",e.blockAnimations.disconnectGroup_=t,e.blockAnimations.disconnectPid_=setTimeout(e.blockAnimations.disconnectUiStep_,10,t,n,r)),t.setAttribute("transform",t.translate_+t.skew_)},e.blockAnimations.disconnectUiStop=function(){if(e.blockAnimations.disconnectGroup_){clearTimeout(e.blockAnimations.disconnectPid_);var t=e.blockAnimations.disconnectGroup_;t.skew_="",t.setAttribute("transform",t.translate_),e.blockAnimations.disconnectGroup_=null}},e.Events.BlockDrag=function(t,n,r){e.Events.BlockDrag.superClass_.constructor.call(this,t?t.workspace.id:void 0),this.blockId=t?t.id:null,this.isStart=n,this.blocks=r},e.utils.object.inherits(e.Events.BlockDrag,e.Events.UiBase),e.Events.BlockDrag.prototype.type=e.Events.BLOCK_DRAG,e.Events.BlockDrag.prototype.toJson=function(){var t=e.Events.BlockDrag.superClass_.toJson.call(this);return t.isStart=this.isStart,t.blockId=this.blockId,t.blocks=this.blocks,t},e.Events.BlockDrag.prototype.fromJson=function(t){e.Events.BlockDrag.superClass_.fromJson.call(this,t),this.isStart=t.isStart,this.blockId=t.blockId,this.blocks=t.blocks},e.registry.register(e.registry.Type.EVENT,e.Events.BLOCK_DRAG,e.Events.BlockDrag),e.IBlockDragger=function(){},e.InsertionMarkerManager=function(t){this.topBlock_=e.selected=t,this.workspace_=t.workspace,this.lastMarker_=this.lastOnStack_=null,this.firstMarker_=this.createMarkerBlock_(this.topBlock_),this.localConnection_=this.closestConnection_=null,this.wouldDeleteBlock_=!1,this.fadedBlock_=this.highlightedBlock_=this.markerConnection_=null,this.availableConnections_=this.initAvailableConnections_()},e.InsertionMarkerManager.PREVIEW_TYPE={INSERTION_MARKER:0,INPUT_OUTLINE:1,REPLACEMENT_FADE:2},e.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR="The insertion marker manager tried to create a marker but the result is missing %1. If you are using a mutator, make sure your domToMutation method is properly defined.",e.InsertionMarkerManager.prototype.dispose=function(){this.availableConnections_.length=0,e.Events.disable();try{this.firstMarker_&&this.firstMarker_.dispose(),this.lastMarker_&&this.lastMarker_.dispose()}finally{e.Events.enable()}},e.InsertionMarkerManager.prototype.updateAvailableConnections=function(){this.availableConnections_=this.initAvailableConnections_()},e.InsertionMarkerManager.prototype.wouldDeleteBlock=function(){return this.wouldDeleteBlock_},e.InsertionMarkerManager.prototype.wouldConnectBlock=function(){return!!this.closestConnection_},e.InsertionMarkerManager.prototype.applyConnections=function(){if(this.closestConnection_&&(e.Events.disable(),this.hidePreview_(),e.Events.enable(),this.localConnection_.connect(this.closestConnection_),this.topBlock_.rendered)){var t=this.localConnection_.isSuperior()?this.closestConnection_:this.localConnection_;e.blockAnimations.connectionUiEffect(t.getSourceBlock()),this.topBlock_.getRootBlock().bringToFront()}},e.InsertionMarkerManager.prototype.update=function(t,n){var r=this.getCandidate_(t);((this.wouldDeleteBlock_=this.shouldDelete_(r,n))||this.shouldUpdatePreviews_(r,t))&&(e.Events.disable(),this.maybeHidePreview_(r),this.maybeShowPreview_(r),e.Events.enable())},e.InsertionMarkerManager.prototype.createMarkerBlock_=function(t){var n=t.type;e.Events.disable();try{var r=this.workspace_.newBlock(n);if(r.setInsertionMarker(!0),t.mutationToDom){var s=t.mutationToDom();s&&r.domToMutation(s)}for(n=0;n<t.inputList.length;n++){var u=t.inputList[n];if(u.name!=e.constants.COLLAPSED_INPUT_NAME){var b=r.inputList[n];if(!b)throw Error(e.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR.replace("%1","an input"));for(s=0;s<u.fieldRow.length;s++){var x=u.fieldRow[s],B=b.fieldRow[s];if(!B)throw Error(e.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR.replace("%1","a field"));B.setValue(x.getValue())}}}r.setCollapsed(t.isCollapsed()),r.setInputsInline(t.getInputsInline()),r.initSvg(),r.getSvgRoot().setAttribute("visibility","hidden")}finally{e.Events.enable()}return r},e.InsertionMarkerManager.prototype.initAvailableConnections_=function(){var t=this.topBlock_.getConnections_(!1),n=this.topBlock_.lastConnectionInStack(!0);if(n&&n!=this.topBlock_.nextConnection){if(t.push(n),this.lastOnStack_=n,this.lastMarker_){e.Events.disable();try{this.lastMarker_.dispose()}finally{e.Events.enable()}}this.lastMarker_=this.createMarkerBlock_(n.getSourceBlock())}return t},e.InsertionMarkerManager.prototype.shouldUpdatePreviews_=function(t,n){var r=t.local,s=t.closest;return t=t.radius,r&&s?this.localConnection_&&this.closestConnection_?!(this.closestConnection_==s&&this.localConnection_==r||(r=this.localConnection_.x+n.x-this.closestConnection_.x,n=this.localConnection_.y+n.y-this.closestConnection_.y,n=Math.sqrt(r*r+n*n),s&&t>n-e.CURRENT_CONNECTION_PREFERENCE)):!this.localConnection_&&!this.closestConnection_||(console.error("Only one of localConnection_ and closestConnection_ was set."),console.error("Returning true from shouldUpdatePreviews, but it's not clear why."),!0):!(!this.localConnection_||!this.closestConnection_)},e.InsertionMarkerManager.prototype.getCandidate_=function(t){for(var n=this.getStartRadius_(),r=null,s=null,u=0;u<this.availableConnections_.length;u++){var b=this.availableConnections_[u],x=b.closest(n,t);x.connection&&(r=x.connection,s=b,n=x.radius)}return{closest:r,local:s,radius:n}},e.InsertionMarkerManager.prototype.getStartRadius_=function(){return this.closestConnection_&&this.localConnection_?e.CONNECTING_SNAP_RADIUS:e.SNAP_RADIUS},e.InsertionMarkerManager.prototype.shouldDelete_=function(t,n){return!(!n||!this.workspace_.getComponentManager().hasCapability(n.id,e.ComponentManager.Capability.DELETE_AREA))&&n.wouldDelete(this.topBlock_,t&&!!t.closest)},e.InsertionMarkerManager.prototype.maybeShowPreview_=function(t){if(!this.wouldDeleteBlock_){var n=t.closest;t=t.local,n&&(n==this.closestConnection_||n.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.closestConnection_=n,this.localConnection_=t,this.showPreview_()))}},e.InsertionMarkerManager.prototype.showPreview_=function(){var t=this.closestConnection_,n=this.workspace_.getRenderer();switch(n.getConnectionPreviewMethod(t,this.localConnection_,this.topBlock_)){case e.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline_();break;case e.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker_();break;case e.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade_()}t&&n.shouldHighlightConnection(t)&&t.highlight()},e.InsertionMarkerManager.prototype.maybeHidePreview_=function(t){if(t.closest){var n=this.closestConnection_!=t.closest;t=this.localConnection_!=t.local,this.closestConnection_&&this.localConnection_&&(n||t||this.wouldDeleteBlock_)&&this.hidePreview_()}else this.hidePreview_();this.localConnection_=this.closestConnection_=this.markerConnection_=null},e.InsertionMarkerManager.prototype.hidePreview_=function(){this.closestConnection_&&this.closestConnection_.targetBlock()&&this.workspace_.getRenderer().shouldHighlightConnection(this.closestConnection_)&&this.closestConnection_.unhighlight(),this.fadedBlock_?this.hideReplacementFade_():this.highlightedBlock_?this.hideInsertionInputOutline_():this.markerConnection_&&this.hideInsertionMarker_()},e.InsertionMarkerManager.prototype.showInsertionMarker_=function(){var t=this.localConnection_,n=this.closestConnection_,r=this.lastOnStack_&&t==this.lastOnStack_?this.lastMarker_:this.firstMarker_;if((t=r.getMatchingConnection(t.getSourceBlock(),t))==this.markerConnection_)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");r.render(),r.rendered=!0,r.getSvgRoot().setAttribute("visibility","visible"),t&&n&&r.positionNearConnection(t,n),n&&t.connect(n),this.markerConnection_=t},e.InsertionMarkerManager.prototype.hideInsertionMarker_=function(){if(this.markerConnection_){var t=this.markerConnection_,n=t.getSourceBlock(),r=n.nextConnection,s=n.previousConnection,u=n.outputConnection;if(u=t.type==e.connectionTypes.INPUT_VALUE&&!(u&&u.targetConnection),!(t!=r||s&&s.targetConnection)||u?t.targetBlock().unplug(!1):t.type==e.connectionTypes.NEXT_STATEMENT&&t!=r?((r=t.targetConnection).getSourceBlock().unplug(!1),s=s?s.targetConnection:null,n.unplug(!0),s&&s.connect(r)):n.unplug(!0),t.targetConnection)throw Error("markerConnection_ still connected at the end of disconnectInsertionMarker");this.markerConnection_=null,(t=n.getSvgRoot())&&t.setAttribute("visibility","hidden")}else console.log("No insertion marker connection to disconnect")},e.InsertionMarkerManager.prototype.showInsertionInputOutline_=function(){var t=this.closestConnection_;this.highlightedBlock_=t.getSourceBlock(),this.highlightedBlock_.highlightShapeForInput(t,!0)},e.InsertionMarkerManager.prototype.hideInsertionInputOutline_=function(){this.highlightedBlock_.highlightShapeForInput(this.closestConnection_,!1),this.highlightedBlock_=null},e.InsertionMarkerManager.prototype.showReplacementFade_=function(){this.fadedBlock_=this.closestConnection_.targetBlock(),this.fadedBlock_.fadeForReplacement(!0)},e.InsertionMarkerManager.prototype.hideReplacementFade_=function(){this.fadedBlock_.fadeForReplacement(!1),this.fadedBlock_=null},e.InsertionMarkerManager.prototype.getInsertionMarkers=function(){var t=[];return this.firstMarker_&&t.push(this.firstMarker_),this.lastMarker_&&t.push(this.lastMarker_),t},e.BlockDragger=function(t,n){this.draggingBlock_=t,this.workspace_=n,this.draggedConnectionManager_=new e.InsertionMarkerManager(this.draggingBlock_),this.dragTarget_=null,this.wouldDeleteBlock_=!1,this.startXY_=this.draggingBlock_.getRelativeToSurfaceXY(),this.dragIconData_=e.BlockDragger.initIconData_(t)},e.BlockDragger.prototype.dispose=function(){this.dragIconData_.length=0,this.draggedConnectionManager_&&this.draggedConnectionManager_.dispose()},e.BlockDragger.initIconData_=function(t){var n=[];t=t.getDescendants(!1);for(var s,r=0;s=t[r];r++){s=s.getIcons();for(var u=0;u<s.length;u++){var b={location:s[u].getIconLocation(),icon:s[u]};n.push(b)}}return n},e.BlockDragger.prototype.startDrag=function(t,n){e.Events.getGroup()||e.Events.setGroup(!0),this.fireDragStartEvent_(),this.workspace_.isMutator&&this.draggingBlock_.bringToFront(),e.utils.dom.startTextWidthCache(),this.workspace_.setResizesEnabled(!1),e.blockAnimations.disconnectUiStop(),this.shouldDisconnect_(n)&&this.disconnectBlock_(n,t),this.draggingBlock_.setDragging(!0),this.draggingBlock_.moveToDragSurface()},e.BlockDragger.prototype.shouldDisconnect_=function(t){return!!(this.draggingBlock_.getParent()||t&&this.draggingBlock_.nextConnection&&this.draggingBlock_.nextConnection.targetBlock())},e.BlockDragger.prototype.disconnectBlock_=function(t,n){this.draggingBlock_.unplug(t),t=this.pixelsToWorkspaceUnits_(n),t=e.utils.Coordinate.sum(this.startXY_,t),this.draggingBlock_.translate(t.x,t.y),e.blockAnimations.disconnectUiEffect(this.draggingBlock_),this.draggedConnectionManager_.updateAvailableConnections()},e.BlockDragger.prototype.fireDragStartEvent_=function(){var t=new(e.Events.get(e.Events.BLOCK_DRAG))(this.draggingBlock_,!0,this.draggingBlock_.getDescendants(!1));e.Events.fire(t)},e.BlockDragger.prototype.drag=function(t,n){n=this.pixelsToWorkspaceUnits_(n);var r=e.utils.Coordinate.sum(this.startXY_,n);this.draggingBlock_.moveDuringDrag(r),this.dragIcons_(n),r=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(t),this.draggedConnectionManager_.update(n,this.dragTarget_),t=this.wouldDeleteBlock_,this.wouldDeleteBlock_=this.draggedConnectionManager_.wouldDeleteBlock(),t!=this.wouldDeleteBlock_&&this.updateCursorDuringBlockDrag_(),this.dragTarget_!==r&&(r&&r.onDragExit(this.draggingBlock_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBlock_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBlock_)},e.BlockDragger.prototype.endDrag=function(t,n){if(this.drag(t,n),this.dragIconData_=[],this.fireDragEndEvent_(),e.utils.dom.stopTextWidthCache(),e.blockAnimations.disconnectUiStop(),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBlock_))t=this.startXY_;else{var r=(t=this.getNewLocationAfterDrag_(n)).delta;t=t.newLocation}this.draggingBlock_.moveOffDragSurface(t),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBlock_),this.maybeDeleteBlock_()||(this.draggingBlock_.setDragging(!1),r?this.updateBlockAfterMove_(r):e.bumpObjectIntoBounds_(this.draggingBlock_.workspace,this.workspace_.getMetricsManager().getScrollMetrics(!0),this.draggingBlock_)),this.workspace_.setResizesEnabled(!0),e.Events.setGroup(!1)},e.BlockDragger.prototype.getNewLocationAfterDrag_=function(t){var n={};return n.delta=this.pixelsToWorkspaceUnits_(t),n.newLocation=e.utils.Coordinate.sum(this.startXY_,n.delta),n},e.BlockDragger.prototype.maybeDeleteBlock_=function(){return!!this.wouldDeleteBlock_&&(this.fireMoveEvent_(),this.draggingBlock_.dispose(!1,!0),e.draggingConnections=[],!0)},e.BlockDragger.prototype.updateBlockAfterMove_=function(t){this.draggingBlock_.moveConnections(t.x,t.y),this.fireMoveEvent_(),this.draggedConnectionManager_.wouldConnectBlock()?this.draggedConnectionManager_.applyConnections():this.draggingBlock_.render(),this.draggingBlock_.scheduleSnapAndBump()},e.BlockDragger.prototype.fireDragEndEvent_=function(){var t=new(e.Events.get(e.Events.BLOCK_DRAG))(this.draggingBlock_,!1,this.draggingBlock_.getDescendants(!1));e.Events.fire(t)},e.BlockDragger.prototype.updateToolboxStyle_=function(t){var n=this.workspace_.getToolbox();if(n){var r=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab";t&&"function"==typeof n.removeStyle?n.removeStyle(r):t||"function"!=typeof n.addStyle||n.addStyle(r)}},e.BlockDragger.prototype.fireMoveEvent_=function(){var t=new(e.Events.get(e.Events.BLOCK_MOVE))(this.draggingBlock_);t.oldCoordinate=this.startXY_,t.recordNew(),e.Events.fire(t)},e.BlockDragger.prototype.updateCursorDuringBlockDrag_=function(){this.draggingBlock_.setDeleteStyle(this.wouldDeleteBlock_)},e.BlockDragger.prototype.pixelsToWorkspaceUnits_=function(t){return t=new e.utils.Coordinate(t.x/this.workspace_.scale,t.y/this.workspace_.scale),this.workspace_.isMutator&&t.scale(1/this.workspace_.options.parentWorkspace.scale),t},e.BlockDragger.prototype.dragIcons_=function(t){for(var n=0;n<this.dragIconData_.length;n++){var r=this.dragIconData_[n];r.icon.setIconLocation(e.utils.Coordinate.sum(r.location,t))}},e.BlockDragger.prototype.getInsertionMarkers=function(){return this.draggedConnectionManager_&&this.draggedConnectionManager_.getInsertionMarkers?this.draggedConnectionManager_.getInsertionMarkers():[]},e.registry.register(e.registry.Type.BLOCK_DRAGGER,e.registry.DEFAULT,e.BlockDragger),e.IContextMenu=function(){},e.IDraggable=function(){},e.IBubble=function(){},e.Bubble=function(t,n,r,s,u,b){this.workspace_=t,this.content_=n,this.shape_=r,this.onMouseDownResizeWrapper_=this.onMouseDownBubbleWrapper_=this.moveCallback_=this.resizeCallback_=null,this.disposed=!1,r=e.Bubble.ARROW_ANGLE,this.workspace_.RTL&&(r=-r),this.arrow_radians_=e.utils.math.toRadians(r),t.getBubbleCanvas().appendChild(this.createDom_(n,!(!u||!b))),this.setAnchorLocation(s),u&&b||(u=(t=this.content_.getBBox()).width+2*e.Bubble.BORDER_WIDTH,b=t.height+2*e.Bubble.BORDER_WIDTH),this.setBubbleSize(u,b),this.positionBubble_(),this.renderArrow_(),this.rendered_=!0},e.Bubble.BORDER_WIDTH=6,e.Bubble.ARROW_THICKNESS=5,e.Bubble.ARROW_ANGLE=20,e.Bubble.ARROW_BEND=4,e.Bubble.ANCHOR_RADIUS=8,e.Bubble.onMouseUpWrapper_=null,e.Bubble.onMouseMoveWrapper_=null,e.Bubble.unbindDragEvents_=function(){e.Bubble.onMouseUpWrapper_&&(e.browserEvents.unbind(e.Bubble.onMouseUpWrapper_),e.Bubble.onMouseUpWrapper_=null),e.Bubble.onMouseMoveWrapper_&&(e.browserEvents.unbind(e.Bubble.onMouseMoveWrapper_),e.Bubble.onMouseMoveWrapper_=null)},e.Bubble.bubbleMouseUp_=function(t){e.Touch.clearTouchIdentifier(),e.Bubble.unbindDragEvents_()},e.Bubble.prototype.rendered_=!1,e.Bubble.prototype.anchorXY_=null,e.Bubble.prototype.relativeLeft_=0,e.Bubble.prototype.relativeTop_=0,e.Bubble.prototype.width_=0,e.Bubble.prototype.height_=0,e.Bubble.prototype.autoLayout_=!0,e.Bubble.prototype.createDom_=function(t,n){this.bubbleGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},null);var r={filter:"url(#"+this.workspace_.getRenderer().getConstants().embossFilterId+")"};return e.utils.userAgent.JAVA_FX&&(r={}),r=e.utils.dom.createSvgElement(e.utils.Svg.G,r,this.bubbleGroup_),this.bubbleArrow_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{},r),this.bubbleBack_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyDraggable",x:0,y:0,rx:e.Bubble.BORDER_WIDTH,ry:e.Bubble.BORDER_WIDTH},r),n?(this.resizeGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:this.workspace_.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.bubbleGroup_),e.utils.dom.createSvgElement(e.utils.Svg.POLYGON,{points:"0,x x,x x,0".replace(/x/g,(n=2*e.Bubble.BORDER_WIDTH).toString())},this.resizeGroup_),e.utils.dom.createSvgElement(e.utils.Svg.LINE,{class:"blocklyResizeLine",x1:n/3,y1:n-1,x2:n-1,y2:n/3},this.resizeGroup_),e.utils.dom.createSvgElement(e.utils.Svg.LINE,{class:"blocklyResizeLine",x1:2*n/3,y1:n-1,x2:n-1,y2:2*n/3},this.resizeGroup_)):this.resizeGroup_=null,this.workspace_.options.readOnly||(this.onMouseDownBubbleWrapper_=e.browserEvents.conditionalBind(this.bubbleBack_,"mousedown",this,this.bubbleMouseDown_),this.resizeGroup_&&(this.onMouseDownResizeWrapper_=e.browserEvents.conditionalBind(this.resizeGroup_,"mousedown",this,this.resizeMouseDown_))),this.bubbleGroup_.appendChild(t),this.bubbleGroup_},e.Bubble.prototype.getSvgRoot=function(){return this.bubbleGroup_},e.Bubble.prototype.setSvgId=function(t){this.bubbleGroup_.dataset&&(this.bubbleGroup_.dataset.blockId=t)},e.Bubble.prototype.bubbleMouseDown_=function(t){var n=this.workspace_.getGesture(t);n&&n.handleBubbleStart(t,this)},e.Bubble.prototype.showContextMenu=function(t){},e.Bubble.prototype.isDeletable=function(){return!1},e.Bubble.prototype.setDeleteStyle=function(t){},e.Bubble.prototype.resizeMouseDown_=function(t){this.promote(),e.Bubble.unbindDragEvents_(),e.utils.isRightButton(t)||(this.workspace_.startDrag(t,new e.utils.Coordinate(this.workspace_.RTL?-this.width_:this.width_,this.height_)),e.Bubble.onMouseUpWrapper_=e.browserEvents.conditionalBind(document,"mouseup",this,e.Bubble.bubbleMouseUp_),e.Bubble.onMouseMoveWrapper_=e.browserEvents.conditionalBind(document,"mousemove",this,this.resizeMouseMove_),e.hideChaff()),t.stopPropagation()},e.Bubble.prototype.resizeMouseMove_=function(t){this.autoLayout_=!1,t=this.workspace_.moveDrag(t),this.setBubbleSize(this.workspace_.RTL?-t.x:t.x,t.y),this.workspace_.RTL&&this.positionBubble_()},e.Bubble.prototype.registerResizeEvent=function(t){this.resizeCallback_=t},e.Bubble.prototype.registerMoveEvent=function(t){this.moveCallback_=t},e.Bubble.prototype.promote=function(){var t=this.bubbleGroup_.parentNode;return t.lastChild!==this.bubbleGroup_&&(t.appendChild(this.bubbleGroup_),!0)},e.Bubble.prototype.setAnchorLocation=function(t){this.anchorXY_=t,this.rendered_&&this.positionBubble_()},e.Bubble.prototype.layoutBubble_=function(){var t=this.workspace_.getMetricsManager().getViewMetrics(!0),n=this.getOptimalRelativeLeft_(t),r=this.getOptimalRelativeTop_(t),s=this.shape_.getBBox(),u={x:n,y:-this.height_-this.workspace_.getRenderer().getConstants().MIN_BLOCK_HEIGHT},b={x:-this.width_-30,y:r};r={x:s.width,y:r};var x={x:n,y:s.height};n=s.width<s.height?r:x,s=s.width<s.height?x:r,r=this.getOverlap_(u,t),x=this.getOverlap_(b,t);var B=this.getOverlap_(n,t);t=this.getOverlap_(s,t),r==(t=Math.max(r,x,B,t))?(this.relativeLeft_=u.x,this.relativeTop_=u.y):x==t?(this.relativeLeft_=b.x,this.relativeTop_=b.y):B==t?(this.relativeLeft_=n.x,this.relativeTop_=n.y):(this.relativeLeft_=s.x,this.relativeTop_=s.y)},e.Bubble.prototype.getOverlap_=function(t,n){var r=this.workspace_.RTL?this.anchorXY_.x-t.x-this.width_:t.x+this.anchorXY_.x;return t=t.y+this.anchorXY_.y,Math.max(0,Math.min(1,(Math.min(r+this.width_,n.left+n.width)-Math.max(r,n.left))*(Math.min(t+this.height_,n.top+n.height)-Math.max(t,n.top))/(this.width_*this.height_)))},e.Bubble.prototype.getOptimalRelativeLeft_=function(t){var n=-this.width_/4;if(this.width_>t.width)return n;if(this.workspace_.RTL)var r=this.anchorXY_.x-n,s=r-this.width_,u=t.left+t.width,b=t.left+e.Scrollbar.scrollbarThickness/this.workspace_.scale;else r=(s=n+this.anchorXY_.x)+this.width_,b=t.left,u=t.left+t.width-e.Scrollbar.scrollbarThickness/this.workspace_.scale;return this.workspace_.RTL?s<b?n=-(b-this.anchorXY_.x+this.width_):r>u&&(n=-(u-this.anchorXY_.x)):s<b?n=b-this.anchorXY_.x:r>u&&(n=u-this.anchorXY_.x-this.width_),n},e.Bubble.prototype.getOptimalRelativeTop_=function(t){var n=-this.height_/4;if(this.height_>t.height)return n;var r=this.anchorXY_.y+n,u=t.top;t=t.top+t.height-e.Scrollbar.scrollbarThickness/this.workspace_.scale;var b=this.anchorXY_.y;return r<u?n=u-b:r+this.height_>t&&(n=t-b-this.height_),n},e.Bubble.prototype.positionBubble_=function(){var t=this.anchorXY_.x;this.moveTo(t=this.workspace_.RTL?t-(this.relativeLeft_+this.width_):t+this.relativeLeft_,this.relativeTop_+this.anchorXY_.y)},e.Bubble.prototype.moveTo=function(t,n){this.bubbleGroup_.setAttribute("transform","translate("+t+","+n+")")},e.Bubble.prototype.setDragging=function(t){!t&&this.moveCallback_&&this.moveCallback_()},e.Bubble.prototype.getBubbleSize=function(){return new e.utils.Size(this.width_,this.height_)},e.Bubble.prototype.setBubbleSize=function(t,n){var r=2*e.Bubble.BORDER_WIDTH;t=Math.max(t,r+45),n=Math.max(n,r+20),this.width_=t,this.height_=n,this.bubbleBack_.setAttribute("width",t),this.bubbleBack_.setAttribute("height",n),this.resizeGroup_&&this.resizeGroup_.setAttribute("transform",this.workspace_.RTL?"translate("+2*e.Bubble.BORDER_WIDTH+","+(n-r)+") scale(-1 1)":"translate("+(t-r)+","+(n-r)+")"),this.autoLayout_&&this.layoutBubble_(),this.positionBubble_(),this.renderArrow_(),this.resizeCallback_&&this.resizeCallback_()},e.Bubble.prototype.renderArrow_=function(){var t=[],n=this.width_/2,r=this.height_/2,s=-this.relativeLeft_,u=-this.relativeTop_;if(n==s&&r==u)t.push("M "+n+","+r);else{u-=r,s-=n,this.workspace_.RTL&&(s*=-1);var b=Math.sqrt(u*u+s*s),x=Math.acos(s/b);0>u&&(x=2*Math.PI-x);var B=x+Math.PI/2;B>2*Math.PI&&(B-=2*Math.PI);var Z=Math.sin(B),ot=Math.cos(B),et=this.getBubbleSize();B=(et.width+et.height)/e.Bubble.ARROW_THICKNESS,B=Math.min(B,et.width,et.height)/4,s=n+(et=1-e.Bubble.ANCHOR_RADIUS/b)*s,u=r+et*u,et=n+B*ot;var Tt=r+B*Z;n-=B*ot,r-=B*Z,(Z=x+this.arrow_radians_)>2*Math.PI&&(Z-=2*Math.PI),x=Math.sin(Z)*b/e.Bubble.ARROW_BEND,b=Math.cos(Z)*b/e.Bubble.ARROW_BEND,t.push("M"+et+","+Tt),t.push("C"+(et+b)+","+(Tt+x)+" "+s+","+u+" "+s+","+u),t.push("C"+s+","+u+" "+(n+b)+","+(r+x)+" "+n+","+r)}t.push("z"),this.bubbleArrow_.setAttribute("d",t.join(" "))},e.Bubble.prototype.setColour=function(t){this.bubbleBack_.setAttribute("fill",t),this.bubbleArrow_.setAttribute("fill",t)},e.Bubble.prototype.dispose=function(){this.onMouseDownBubbleWrapper_&&e.browserEvents.unbind(this.onMouseDownBubbleWrapper_),this.onMouseDownResizeWrapper_&&e.browserEvents.unbind(this.onMouseDownResizeWrapper_),e.Bubble.unbindDragEvents_(),e.utils.dom.removeNode(this.bubbleGroup_),this.disposed=!0},e.Bubble.prototype.moveDuringDrag=function(t,n){t?t.translateSurface(n.x,n.y):this.moveTo(n.x,n.y),this.relativeLeft_=this.workspace_.RTL?this.anchorXY_.x-n.x-this.width_:n.x-this.anchorXY_.x,this.relativeTop_=n.y-this.anchorXY_.y,this.renderArrow_()},e.Bubble.prototype.getRelativeToSurfaceXY=function(){return new e.utils.Coordinate(this.workspace_.RTL?-this.relativeLeft_+this.anchorXY_.x-this.width_:this.anchorXY_.x+this.relativeLeft_,this.anchorXY_.y+this.relativeTop_)},e.Bubble.prototype.setAutoLayout=function(t){this.autoLayout_=t},e.Bubble.textToDom=function(t){var n=e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:e.Bubble.BORDER_WIDTH},null);t=t.split("\n");for(var r=0;r<t.length;r++){var s=e.utils.dom.createSvgElement(e.utils.Svg.TSPAN,{dy:"1em",x:e.Bubble.BORDER_WIDTH},n),u=document.createTextNode(t[r]);s.appendChild(u)}return n},e.Bubble.createNonEditableBubble=function(t,n,r){if((r=new e.Bubble(n.workspace,t,n.pathObject.svgPath,r,null,null)).setSvgId(n.id),n.RTL){n=t.getBBox().width;for(var u,s=0;u=t.childNodes[s];s++)u.setAttribute("text-anchor","end"),u.setAttribute("x",n+e.Bubble.BORDER_WIDTH)}return r},e.Events.CommentBase=function(t){this.commentId=(this.isBlank=void 0===t)?"":t.id,this.workspaceId=this.isBlank?"":t.workspace.id,this.group=e.Events.getGroup(),this.recordUndo=e.Events.recordUndo},e.utils.object.inherits(e.Events.CommentBase,e.Events.Abstract),e.Events.CommentBase.prototype.toJson=function(){var t=e.Events.CommentBase.superClass_.toJson.call(this);return this.commentId&&(t.commentId=this.commentId),t},e.Events.CommentBase.prototype.fromJson=function(t){e.Events.CommentBase.superClass_.fromJson.call(this,t),this.commentId=t.commentId},e.Events.CommentChange=function(t,n,r){e.Events.CommentChange.superClass_.constructor.call(this,t),t&&(this.oldContents_=void 0===n?"":n,this.newContents_=void 0===r?"":r)},e.utils.object.inherits(e.Events.CommentChange,e.Events.CommentBase),e.Events.CommentChange.prototype.type=e.Events.COMMENT_CHANGE,e.Events.CommentChange.prototype.toJson=function(){var t=e.Events.CommentChange.superClass_.toJson.call(this);return t.oldContents=this.oldContents_,t.newContents=this.newContents_,t},e.Events.CommentChange.prototype.fromJson=function(t){e.Events.CommentChange.superClass_.fromJson.call(this,t),this.oldContents_=t.oldContents,this.newContents_=t.newContents},e.Events.CommentChange.prototype.isNull=function(){return this.oldContents_==this.newContents_},e.Events.CommentChange.prototype.run=function(t){var n=this.getEventWorkspace_().getCommentById(this.commentId);n?n.setContent(t?this.newContents_:this.oldContents_):console.warn("Can't change non-existent comment: "+this.commentId)},e.Events.CommentCreate=function(t){e.Events.CommentCreate.superClass_.constructor.call(this,t),t&&(this.xml=t.toXmlWithXY())},e.utils.object.inherits(e.Events.CommentCreate,e.Events.CommentBase),e.Events.CommentCreate.prototype.type=e.Events.COMMENT_CREATE,e.Events.CommentCreate.prototype.toJson=function(){var t=e.Events.CommentCreate.superClass_.toJson.call(this);return t.xml=e.Xml.domToText(this.xml),t},e.Events.CommentCreate.prototype.fromJson=function(t){e.Events.CommentCreate.superClass_.fromJson.call(this,t),this.xml=e.Xml.textToDom(t.xml)},e.Events.CommentCreate.prototype.run=function(t){e.Events.CommentCreateDeleteHelper(this,t)},e.Events.CommentCreateDeleteHelper=function(t,n){var r=t.getEventWorkspace_();n?((n=e.utils.xml.createElement("xml")).appendChild(t.xml),e.Xml.domToWorkspace(n,r)):(r=r.getCommentById(t.commentId))?r.dispose(!1,!1):console.warn("Can't uncreate non-existent comment: "+t.commentId)},e.Events.CommentDelete=function(t){e.Events.CommentDelete.superClass_.constructor.call(this,t),t&&(this.xml=t.toXmlWithXY())},e.utils.object.inherits(e.Events.CommentDelete,e.Events.CommentBase),e.Events.CommentDelete.prototype.type=e.Events.COMMENT_DELETE,e.Events.CommentDelete.prototype.toJson=function(){return e.Events.CommentDelete.superClass_.toJson.call(this)},e.Events.CommentDelete.prototype.fromJson=function(t){e.Events.CommentDelete.superClass_.fromJson.call(this,t)},e.Events.CommentDelete.prototype.run=function(t){e.Events.CommentCreateDeleteHelper(this,!t)},e.Events.CommentMove=function(t){e.Events.CommentMove.superClass_.constructor.call(this,t),t&&(this.comment_=t,this.oldCoordinate_=t.getXY(),this.newCoordinate_=null)},e.utils.object.inherits(e.Events.CommentMove,e.Events.CommentBase),e.Events.CommentMove.prototype.recordNew=function(){if(!this.comment_)throw Error("Tried to record the new position of a comment on the same event twice.");this.newCoordinate_=this.comment_.getXY(),this.comment_=null},e.Events.CommentMove.prototype.type=e.Events.COMMENT_MOVE,e.Events.CommentMove.prototype.setOldCoordinate=function(t){this.oldCoordinate_=t},e.Events.CommentMove.prototype.toJson=function(){var t=e.Events.CommentMove.superClass_.toJson.call(this);return this.oldCoordinate_&&(t.oldCoordinate=Math.round(this.oldCoordinate_.x)+","+Math.round(this.oldCoordinate_.y)),this.newCoordinate_&&(t.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y)),t},e.Events.CommentMove.prototype.fromJson=function(t){if(e.Events.CommentMove.superClass_.fromJson.call(this,t),t.oldCoordinate){var n=t.oldCoordinate.split(",");this.oldCoordinate_=new e.utils.Coordinate(Number(n[0]),Number(n[1]))}t.newCoordinate&&(n=t.newCoordinate.split(","),this.newCoordinate_=new e.utils.Coordinate(Number(n[0]),Number(n[1])))},e.Events.CommentMove.prototype.isNull=function(){return e.utils.Coordinate.equals(this.oldCoordinate_,this.newCoordinate_)},e.Events.CommentMove.prototype.run=function(t){var n=this.getEventWorkspace_().getCommentById(this.commentId);if(n){t=t?this.newCoordinate_:this.oldCoordinate_;var r=n.getXY();n.moveBy(t.x-r.x,t.y-r.y)}else console.warn("Can't move non-existent comment: "+this.commentId)},e.registry.register(e.registry.Type.EVENT,e.Events.COMMENT_CREATE,e.Events.CommentCreate),e.registry.register(e.registry.Type.EVENT,e.Events.COMMENT_CHANGE,e.Events.CommentChange),e.registry.register(e.registry.Type.EVENT,e.Events.COMMENT_MOVE,e.Events.CommentMove),e.registry.register(e.registry.Type.EVENT,e.Events.COMMENT_DELETE,e.Events.CommentDelete),e.BubbleDragger=function(t,n){this.draggingBubble_=t,this.workspace_=n,this.dragTarget_=null,this.wouldDeleteBubble_=!1,this.startXY_=this.draggingBubble_.getRelativeToSurfaceXY(),this.dragSurface_=e.utils.is3dSupported()&&n.getBlockDragSurface()?n.getBlockDragSurface():null},e.BubbleDragger.prototype.dispose=function(){this.dragSurface_=this.workspace_=this.draggingBubble_=null},e.BubbleDragger.prototype.startBubbleDrag=function(){e.Events.getGroup()||e.Events.setGroup(!0),this.workspace_.setResizesEnabled(!1),this.draggingBubble_.setAutoLayout(!1),this.dragSurface_&&this.moveToDragSurface_(),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!0)},e.BubbleDragger.prototype.dragBubble=function(t,n){n=this.pixelsToWorkspaceUnits_(n),n=e.utils.Coordinate.sum(this.startXY_,n),this.draggingBubble_.moveDuringDrag(this.dragSurface_,n),n=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(t),t=this.wouldDeleteBubble_,this.wouldDeleteBubble_=this.shouldDelete_(this.dragTarget_),t!=this.wouldDeleteBubble_&&this.updateCursorDuringBubbleDrag_(),this.dragTarget_!==n&&(n&&n.onDragExit(this.draggingBubble_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBubble_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBubble_)},e.BubbleDragger.prototype.shouldDelete_=function(t){return!(!t||!this.workspace_.getComponentManager().hasCapability(t.id,e.ComponentManager.Capability.DELETE_AREA))&&t.wouldDelete(this.draggingBubble_,!1)},e.BubbleDragger.prototype.updateCursorDuringBubbleDrag_=function(){this.draggingBubble_.setDeleteStyle(this.wouldDeleteBubble_)},e.BubbleDragger.prototype.endBubbleDrag=function(t,n){this.dragBubble(t,n),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBubble_)?t=this.startXY_:(t=this.pixelsToWorkspaceUnits_(n),t=e.utils.Coordinate.sum(this.startXY_,t)),this.draggingBubble_.moveTo(t.x,t.y),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBubble_),this.wouldDeleteBubble_?(this.fireMoveEvent_(),this.draggingBubble_.dispose(!1,!0)):(this.dragSurface_&&this.dragSurface_.clearAndHide(this.workspace_.getBubbleCanvas()),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!1),this.fireMoveEvent_()),this.workspace_.setResizesEnabled(!0),e.Events.setGroup(!1)},e.BubbleDragger.prototype.fireMoveEvent_=function(){if(this.draggingBubble_.isComment){var t=new(e.Events.get(e.Events.COMMENT_MOVE))(this.draggingBubble_);t.setOldCoordinate(this.startXY_),t.recordNew(),e.Events.fire(t)}},e.BubbleDragger.prototype.pixelsToWorkspaceUnits_=function(t){return t=new e.utils.Coordinate(t.x/this.workspace_.scale,t.y/this.workspace_.scale),this.workspace_.isMutator&&t.scale(1/this.workspace_.options.parentWorkspace.scale),t},e.BubbleDragger.prototype.moveToDragSurface_=function(){this.draggingBubble_.moveTo(0,0),this.dragSurface_.translateSurface(this.startXY_.x,this.startXY_.y),this.dragSurface_.setBlocksAndShow(this.draggingBubble_.getSvgRoot())},e.Events.Click=function(t,n,r){e.Events.Click.superClass_.constructor.call(this,t?t.workspace.id:n),this.blockId=t?t.id:null,this.targetType=r},e.utils.object.inherits(e.Events.Click,e.Events.UiBase),e.Events.Click.prototype.type=e.Events.CLICK,e.Events.Click.prototype.toJson=function(){var t=e.Events.Click.superClass_.toJson.call(this);return t.targetType=this.targetType,this.blockId&&(t.blockId=this.blockId),t},e.Events.Click.prototype.fromJson=function(t){e.Events.Click.superClass_.fromJson.call(this,t),this.targetType=t.targetType,this.blockId=t.blockId},e.registry.register(e.registry.Type.EVENT,e.Events.CLICK,e.Events.Click),e.WorkspaceDragger=function(t){this.workspace_=t,this.horizontalScrollEnabled_=this.workspace_.isMovableHorizontally(),this.verticalScrollEnabled_=this.workspace_.isMovableVertically(),this.startScrollXY_=new e.utils.Coordinate(t.scrollX,t.scrollY)},e.WorkspaceDragger.prototype.dispose=function(){this.workspace_=null},e.WorkspaceDragger.prototype.startDrag=function(){e.selected&&e.selected.unselect(),this.workspace_.setupDragSurface()},e.WorkspaceDragger.prototype.endDrag=function(t){this.drag(t),this.workspace_.resetDragSurface()},e.WorkspaceDragger.prototype.drag=function(t){if(t=e.utils.Coordinate.sum(this.startScrollXY_,t),this.horizontalScrollEnabled_&&this.verticalScrollEnabled_)this.workspace_.scroll(t.x,t.y);else if(this.horizontalScrollEnabled_)this.workspace_.scroll(t.x,this.workspace_.scrollY);else{if(!this.verticalScrollEnabled_)throw new TypeError("Invalid state.");this.workspace_.scroll(this.workspace_.scrollX,t.y)}},e.Gesture=function(t,n){this.mouseDownXY_=null,this.currentDragDeltaXY_=new e.utils.Coordinate(0,0),this.startWorkspace_=this.targetBlock_=this.startBlock_=this.startField_=this.startBubble_=null,this.creatorWorkspace_=n,this.isDraggingBubble_=this.isDraggingBlock_=this.isDraggingWorkspace_=this.hasExceededDragRadius_=!1,this.mostRecentEvent_=t,this.flyout_=this.workspaceDragger_=this.blockDragger_=this.bubbleDragger_=this.onUpWrapper_=this.onMoveWrapper_=null,this.isEnding_=this.hasStarted_=this.calledUpdateIsDragging_=!1,this.healStack_=!e.DRAG_STACK},e.Gesture.prototype.dispose=function(){e.Touch.clearTouchIdentifier(),e.Tooltip.unblock(),this.creatorWorkspace_.clearGesture(),this.onMoveWrapper_&&e.browserEvents.unbind(this.onMoveWrapper_),this.onUpWrapper_&&e.browserEvents.unbind(this.onUpWrapper_),this.blockDragger_&&this.blockDragger_.dispose(),this.workspaceDragger_&&this.workspaceDragger_.dispose(),this.bubbleDragger_&&this.bubbleDragger_.dispose()},e.Gesture.prototype.updateFromEvent_=function(t){var n=new e.utils.Coordinate(t.clientX,t.clientY);this.updateDragDelta_(n)&&(this.updateIsDragging_(),e.longStop_()),this.mostRecentEvent_=t},e.Gesture.prototype.updateDragDelta_=function(t){return this.currentDragDeltaXY_=e.utils.Coordinate.difference(t,this.mouseDownXY_),!this.hasExceededDragRadius_&&(this.hasExceededDragRadius_=e.utils.Coordinate.magnitude(this.currentDragDeltaXY_)>(this.flyout_?e.FLYOUT_DRAG_RADIUS:e.DRAG_RADIUS))},e.Gesture.prototype.updateIsDraggingFromFlyout_=function(){return!(!this.targetBlock_||!this.flyout_.isBlockCreatable_(this.targetBlock_)||this.flyout_.isScrollable()&&!this.flyout_.isDragTowardWorkspace(this.currentDragDeltaXY_)||(this.startWorkspace_=this.flyout_.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),e.Events.getGroup()||e.Events.setGroup(!0),this.startBlock_=null,this.targetBlock_=this.flyout_.createBlock(this.targetBlock_),this.targetBlock_.select(),0))},e.Gesture.prototype.updateIsDraggingBubble_=function(){return!!this.startBubble_&&(this.isDraggingBubble_=!0,this.startDraggingBubble_(),!0)},e.Gesture.prototype.updateIsDraggingBlock_=function(){return!!this.targetBlock_&&(this.flyout_?this.isDraggingBlock_=this.updateIsDraggingFromFlyout_():this.targetBlock_.isMovable()&&(this.isDraggingBlock_=!0),!!this.isDraggingBlock_&&(this.startDraggingBlock_(),!0))},e.Gesture.prototype.updateIsDraggingWorkspace_=function(){(this.flyout_?this.flyout_.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.workspaceDragger_=new e.WorkspaceDragger(this.startWorkspace_),this.isDraggingWorkspace_=!0,this.workspaceDragger_.startDrag())},e.Gesture.prototype.updateIsDragging_=function(){if(this.calledUpdateIsDragging_)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging_=!0,this.updateIsDraggingBubble_()||this.updateIsDraggingBlock_()||this.updateIsDraggingWorkspace_()},e.Gesture.prototype.startDraggingBlock_=function(){this.blockDragger_=new(e.registry.getClassFromOptions(e.registry.Type.BLOCK_DRAGGER,this.creatorWorkspace_.options,!0))(this.targetBlock_,this.startWorkspace_),this.blockDragger_.startDrag(this.currentDragDeltaXY_,this.healStack_),this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_)},e.Gesture.prototype.startDraggingBubble_=function(){this.bubbleDragger_=new e.BubbleDragger(this.startBubble_,this.startWorkspace_),this.bubbleDragger_.startBubbleDrag(),this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_)},e.Gesture.prototype.doStart=function(t){e.utils.isTargetInput(t)?this.cancel():(this.hasStarted_=!0,e.blockAnimations.disconnectUiStop(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),e.hideChaff(!!this.flyout_),this.startWorkspace_.markFocused(),this.mostRecentEvent_=t,e.Tooltip.block(),this.targetBlock_&&this.targetBlock_.select(),e.utils.isRightButton(t)?this.handleRightClick(t):("touchstart"!=t.type.toLowerCase()&&"pointerdown"!=t.type.toLowerCase()||"mouse"==t.pointerType||e.longStart(t,this),this.mouseDownXY_=new e.utils.Coordinate(t.clientX,t.clientY),this.healStack_=t.altKey||t.ctrlKey||t.metaKey,this.bindMouseEvents(t)))},e.Gesture.prototype.bindMouseEvents=function(t){this.onMoveWrapper_=e.browserEvents.conditionalBind(document,"mousemove",null,this.handleMove.bind(this)),this.onUpWrapper_=e.browserEvents.conditionalBind(document,"mouseup",null,this.handleUp.bind(this)),t.preventDefault(),t.stopPropagation()},e.Gesture.prototype.handleMove=function(t){this.updateFromEvent_(t),this.isDraggingWorkspace_?this.workspaceDragger_.drag(this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBubble_&&this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_),t.preventDefault(),t.stopPropagation()},e.Gesture.prototype.handleUp=function(t){this.updateFromEvent_(t),e.longStop_(),this.isEnding_?console.log("Trying to end a gesture recursively."):(this.isEnding_=!0,this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(t,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endDrag(t,this.currentDragDeltaXY_):this.isDraggingWorkspace_?this.workspaceDragger_.endDrag(this.currentDragDeltaXY_):this.isBubbleClick_()?this.doBubbleClick_():this.isFieldClick_()?this.doFieldClick_():this.isBlockClick_()?this.doBlockClick_():this.isWorkspaceClick_()&&this.doWorkspaceClick_(t),t.preventDefault(),t.stopPropagation(),this.dispose())},e.Gesture.prototype.cancel=function(){this.isEnding_||(e.longStop_(),this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingWorkspace_&&this.workspaceDragger_.endDrag(this.currentDragDeltaXY_),this.dispose())},e.Gesture.prototype.handleRightClick=function(t){this.targetBlock_?(this.bringBlockToFront_(),e.hideChaff(!!this.flyout_),this.targetBlock_.showContextMenu(t)):this.startBubble_?this.startBubble_.showContextMenu(t):this.startWorkspace_&&!this.flyout_&&(e.hideChaff(),this.startWorkspace_.showContextMenu(t)),t.preventDefault(),t.stopPropagation(),this.dispose()},e.Gesture.prototype.handleWsStart=function(t,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace_(n),this.mostRecentEvent_=t,this.doStart(t)},e.Gesture.prototype.fireWorkspaceClick_=function(t){e.Events.fire(new(e.Events.get(e.Events.CLICK))(null,t.id,"workspace"))},e.Gesture.prototype.handleFlyoutStart=function(t,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout_(n),this.handleWsStart(t,n.getWorkspace())},e.Gesture.prototype.handleBlockStart=function(t,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(n),this.mostRecentEvent_=t},e.Gesture.prototype.handleBubbleStart=function(t,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(n),this.mostRecentEvent_=t},e.Gesture.prototype.doBubbleClick_=function(){this.startBubble_.setFocus&&this.startBubble_.setFocus(),this.startBubble_.select&&this.startBubble_.select()},e.Gesture.prototype.doFieldClick_=function(){this.startField_.showEditor(this.mostRecentEvent_),this.bringBlockToFront_()},e.Gesture.prototype.doBlockClick_=function(){if(this.flyout_&&this.flyout_.autoClose)this.targetBlock_.isEnabled()&&(e.Events.getGroup()||e.Events.setGroup(!0),this.flyout_.createBlock(this.targetBlock_).scheduleSnapAndBump());else{var t=new(e.Events.get(e.Events.CLICK))(this.startBlock_,this.startWorkspace_.id,"block");e.Events.fire(t)}this.bringBlockToFront_(),e.Events.setGroup(!1)},e.Gesture.prototype.doWorkspaceClick_=function(t){t=this.creatorWorkspace_,e.selected&&e.selected.unselect(),this.fireWorkspaceClick_(this.startWorkspace_||t)},e.Gesture.prototype.bringBlockToFront_=function(){this.targetBlock_&&!this.flyout_&&this.targetBlock_.bringToFront()},e.Gesture.prototype.setStartField=function(t){if(this.hasStarted_)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField_||(this.startField_=t)},e.Gesture.prototype.setStartBubble=function(t){this.startBubble_||(this.startBubble_=t)},e.Gesture.prototype.setStartBlock=function(t){this.startBlock_||this.startBubble_||(this.startBlock_=t,t.isInFlyout&&t!=t.getRootBlock()?this.setTargetBlock_(t.getRootBlock()):this.setTargetBlock_(t))},e.Gesture.prototype.setTargetBlock_=function(t){t.isShadow()?this.setTargetBlock_(t.getParent()):this.targetBlock_=t},e.Gesture.prototype.setStartWorkspace_=function(t){this.startWorkspace_||(this.startWorkspace_=t)},e.Gesture.prototype.setStartFlyout_=function(t){this.flyout_||(this.flyout_=t)},e.Gesture.prototype.isBubbleClick_=function(){return!!this.startBubble_&&!this.hasExceededDragRadius_},e.Gesture.prototype.isBlockClick_=function(){return!!this.startBlock_&&!this.hasExceededDragRadius_&&!this.isFieldClick_()},e.Gesture.prototype.isFieldClick_=function(){return!!this.startField_&&this.startField_.isClickable()&&!this.hasExceededDragRadius_&&(!this.flyout_||!this.flyout_.autoClose)},e.Gesture.prototype.isWorkspaceClick_=function(){return!(this.startBlock_||this.startBubble_||this.startField_||this.hasExceededDragRadius_)},e.Gesture.prototype.isDragging=function(){return this.isDraggingWorkspace_||this.isDraggingBlock_||this.isDraggingBubble_},e.Gesture.prototype.hasStarted=function(){return this.hasStarted_},e.Gesture.prototype.getInsertionMarkers=function(){return this.blockDragger_?this.blockDragger_.getInsertionMarkers():[]},e.Gesture.prototype.getCurrentDragger=function(){return this.isDraggingBlock_?this.blockDragger_:this.isDraggingWorkspace_?this.workspaceDragger_:this.isDraggingBubble_?this.bubbleDragger_:null},e.Gesture.inProgress=function(){for(var r,t=e.Workspace.getAll(),n=0;r=t[n];n++)if(r.currentGesture_)return!0;return!1},e.IRegistrable=function(){},e.Marker=function(){this.drawer_=this.curNode_=this.colour=null,this.type="marker"},e.Marker.prototype.setDrawer=function(t){this.drawer_=t},e.Marker.prototype.getDrawer=function(){return this.drawer_},e.Marker.prototype.getCurNode=function(){return this.curNode_},e.Marker.prototype.setCurNode=function(t){var n=this.curNode_;this.curNode_=t,this.drawer_&&this.drawer_.draw(n,this.curNode_)},e.Marker.prototype.draw=function(){this.drawer_&&this.drawer_.draw(this.curNode_,this.curNode_)},e.Marker.prototype.hide=function(){this.drawer_&&this.drawer_.hide()},e.Marker.prototype.dispose=function(){this.getDrawer()&&this.getDrawer().dispose()},e.Cursor=function(){e.Cursor.superClass_.constructor.call(this),this.type="cursor"},e.utils.object.inherits(e.Cursor,e.Marker),e.Cursor.prototype.next=function(){var t=this.getCurNode();if(!t)return null;for(t=t.next();t&&t.next()&&(t.getType()==e.ASTNode.types.NEXT||t.getType()==e.ASTNode.types.BLOCK);)t=t.next();return t&&this.setCurNode(t),t},e.Cursor.prototype.in=function(){var t=this.getCurNode();return t?((t.getType()==e.ASTNode.types.PREVIOUS||t.getType()==e.ASTNode.types.OUTPUT)&&(t=t.next()),(t=t.in())&&this.setCurNode(t),t):null},e.Cursor.prototype.prev=function(){var t=this.getCurNode();if(!t)return null;for(t=t.prev();t&&t.prev()&&(t.getType()==e.ASTNode.types.NEXT||t.getType()==e.ASTNode.types.BLOCK);)t=t.prev();return t&&this.setCurNode(t),t},e.Cursor.prototype.out=function(){var t=this.getCurNode();return t?((t=t.out())&&t.getType()==e.ASTNode.types.BLOCK&&(t=t.prev()||t),t&&this.setCurNode(t),t):null},e.registry.register(e.registry.Type.CURSOR,e.registry.DEFAULT,e.Cursor),e.MarkerManager=function(t){this.cursorSvg_=this.cursor_=null,this.markers_=Object.create(null),this.workspace_=t},e.MarkerManager.LOCAL_MARKER="local_marker_1",e.MarkerManager.prototype.registerMarker=function(t,n){this.markers_[t]&&this.unregisterMarker(t),n.setDrawer(this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,n)),this.setMarkerSvg(n.getDrawer().createDom()),this.markers_[t]=n},e.MarkerManager.prototype.unregisterMarker=function(t){var n=this.markers_[t];if(!n)throw Error("Marker with ID "+t+" does not exist. Can only unregister markers that exist.");n.dispose(),delete this.markers_[t]},e.MarkerManager.prototype.getCursor=function(){return this.cursor_},e.MarkerManager.prototype.getMarker=function(t){return this.markers_[t]||null},e.MarkerManager.prototype.setCursor=function(t){this.cursor_&&this.cursor_.getDrawer()&&this.cursor_.getDrawer().dispose(),(this.cursor_=t)&&(t=this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,this.cursor_),this.cursor_.setDrawer(t),this.setCursorSvg(this.cursor_.getDrawer().createDom()))},e.MarkerManager.prototype.setCursorSvg=function(t){t?(this.workspace_.getBlockCanvas().appendChild(t),this.cursorSvg_=t):this.cursorSvg_=null},e.MarkerManager.prototype.setMarkerSvg=function(t){t?this.workspace_.getBlockCanvas()&&(this.cursorSvg_?this.workspace_.getBlockCanvas().insertBefore(t,this.cursorSvg_):this.workspace_.getBlockCanvas().appendChild(t)):this.markerSvg_=null},e.MarkerManager.prototype.updateMarkers=function(){this.workspace_.keyboardAccessibilityMode&&this.cursorSvg_&&this.workspace_.getCursor().draw()},e.MarkerManager.prototype.dispose=function(){for(var r,t=Object.keys(this.markers_),n=0;r=t[n];n++)this.unregisterMarker(r);this.markers_=null,this.cursor_&&(this.cursor_.dispose(),this.cursor_=null)},e.WidgetDiv={},e.WidgetDiv.owner_=null,e.WidgetDiv.dispose_=null,e.WidgetDiv.rendererClassName_="",e.WidgetDiv.themeClassName_="",e.WidgetDiv.createDom=function(){e.WidgetDiv.DIV||(e.WidgetDiv.DIV=document.createElement("div"),e.WidgetDiv.DIV.className="blocklyWidgetDiv",(e.parentContainer||document.body).appendChild(e.WidgetDiv.DIV))},e.WidgetDiv.show=function(t,n,r){e.WidgetDiv.hide(),e.WidgetDiv.owner_=t,e.WidgetDiv.dispose_=r,(t=e.WidgetDiv.DIV).style.direction=n?"rtl":"ltr",t.style.display="block",n=e.getMainWorkspace(),e.WidgetDiv.rendererClassName_=n.getRenderer().getClassName(),e.WidgetDiv.themeClassName_=n.getTheme().getClassName(),e.utils.dom.addClass(t,e.WidgetDiv.rendererClassName_),e.utils.dom.addClass(t,e.WidgetDiv.themeClassName_)},e.WidgetDiv.hide=function(){if(e.WidgetDiv.isVisible()){e.WidgetDiv.owner_=null;var t=e.WidgetDiv.DIV;t.style.display="none",t.style.left="",t.style.top="",e.WidgetDiv.dispose_&&e.WidgetDiv.dispose_(),e.WidgetDiv.dispose_=null,t.textContent="",e.WidgetDiv.rendererClassName_&&(e.utils.dom.removeClass(t,e.WidgetDiv.rendererClassName_),e.WidgetDiv.rendererClassName_=""),e.WidgetDiv.themeClassName_&&(e.utils.dom.removeClass(t,e.WidgetDiv.themeClassName_),e.WidgetDiv.themeClassName_=""),e.getMainWorkspace().markFocused()}},e.WidgetDiv.isVisible=function(){return!!e.WidgetDiv.owner_},e.WidgetDiv.hideIfOwner=function(t){e.WidgetDiv.owner_==t&&e.WidgetDiv.hide()},e.WidgetDiv.positionInternal_=function(t,n,r){e.WidgetDiv.DIV.style.left=t+"px",e.WidgetDiv.DIV.style.top=n+"px",e.WidgetDiv.DIV.style.height=r+"px"},e.WidgetDiv.positionWithAnchor=function(t,n,r,s){var u=e.WidgetDiv.calculateY_(t,n,r);t=e.WidgetDiv.calculateX_(t,n,r,s),0>u?e.WidgetDiv.positionInternal_(t,0,r.height+u):e.WidgetDiv.positionInternal_(t,u,r.height)},e.WidgetDiv.calculateX_=function(t,n,r,s){return s?(n=Math.max(n.right-r.width,t.left),Math.min(n,t.right-r.width)):(n=Math.min(n.left,t.right-r.width),Math.max(n,t.left))},e.WidgetDiv.calculateY_=function(t,n,r){return n.bottom+r.height>=t.bottom?n.top-r.height:n.bottom},e.Field=function(t,n,r){this.value_=this.DEFAULT_VALUE,this.tooltip_=this.validator_=null,this.size_=new e.utils.Size(0,0),this.constants_=this.mouseDownWrapper_=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg_=this.cursorSvg_=null,r&&this.configure_(r),this.setValue(t),n&&this.setValidator(n)},e.Field.prototype.DEFAULT_VALUE=null,e.Field.prototype.name=void 0,e.Field.prototype.disposed=!1,e.Field.prototype.maxDisplayLength=50,e.Field.prototype.sourceBlock_=null,e.Field.prototype.isDirty_=!0,e.Field.prototype.visible_=!0,e.Field.prototype.clickTarget_=null,e.Field.NBSP="\xa0",e.Field.prototype.EDITABLE=!0,e.Field.prototype.SERIALIZABLE=!1,e.Field.prototype.configure_=function(t){var n=t.tooltip;"string"==typeof n&&(n=e.utils.replaceMessageReferences(t.tooltip)),n&&this.setTooltip(n)},e.Field.prototype.setSourceBlock=function(t){if(this.sourceBlock_)throw Error("Field already bound to a block.");this.sourceBlock_=t},e.Field.prototype.getConstants=function(){return!this.constants_&&this.sourceBlock_&&this.sourceBlock_.workspace&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_},e.Field.prototype.getSourceBlock=function(){return this.sourceBlock_},e.Field.prototype.init=function(){this.fieldGroup_||(this.fieldGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},null),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip_),this.bindEvents_(),this.initModel())},e.Field.prototype.initView=function(){this.createBorderRect_(),this.createTextElement_()},e.Field.prototype.initModel=function(){},e.Field.prototype.createBorderRect_=function(){this.borderRect_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)},e.Field.prototype.createTextElement_=function(){this.textElement_=e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)},e.Field.prototype.bindEvents_=function(){e.Tooltip.bindMouseEvents(this.getClickTarget_()),this.mouseDownWrapper_=e.browserEvents.conditionalBind(this.getClickTarget_(),"mousedown",this,this.onMouseDown_)},e.Field.prototype.fromXml=function(t){this.setValue(t.textContent)},e.Field.prototype.toXml=function(t){return t.textContent=this.getValue(),t},e.Field.prototype.dispose=function(){e.DropDownDiv.hideIfOwner(this),e.WidgetDiv.hideIfOwner(this),e.Tooltip.unbindMouseEvents(this.getClickTarget_()),this.mouseDownWrapper_&&e.browserEvents.unbind(this.mouseDownWrapper_),e.utils.dom.removeNode(this.fieldGroup_),this.disposed=!0},e.Field.prototype.updateEditable=function(){var t=this.fieldGroup_;this.EDITABLE&&t&&(this.sourceBlock_.isEditable()?(e.utils.dom.addClass(t,"blocklyEditableText"),e.utils.dom.removeClass(t,"blocklyNonEditableText"),t.style.cursor=this.CURSOR):(e.utils.dom.addClass(t,"blocklyNonEditableText"),e.utils.dom.removeClass(t,"blocklyEditableText"),t.style.cursor=""))},e.Field.prototype.isClickable=function(){return!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&!!this.showEditor_&&"function"==typeof this.showEditor_},e.Field.prototype.isCurrentlyEditable=function(){return this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()},e.Field.prototype.isSerializable=function(){var t=!1;return this.name&&(this.SERIALIZABLE?t=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),t=!0)),t},e.Field.prototype.isVisible=function(){return this.visible_},e.Field.prototype.setVisible=function(t){if(this.visible_!=t){this.visible_=t;var n=this.getSvgRoot();n&&(n.style.display=t?"block":"none")}},e.Field.prototype.setValidator=function(t){this.validator_=t},e.Field.prototype.getValidator=function(){return this.validator_},e.Field.prototype.getSvgRoot=function(){return this.fieldGroup_},e.Field.prototype.applyColour=function(){},e.Field.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()},e.Field.prototype.showEditor=function(t){this.isClickable()&&this.showEditor_(t)},e.Field.prototype.updateSize_=function(t){var n=this.getConstants(),r=2*(t=null!=t?t:this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0),s=n.FIELD_TEXT_HEIGHT,u=0;this.textElement_&&(r+=u=e.utils.dom.getFastTextWidth(this.textElement_,n.FIELD_TEXT_FONTSIZE,n.FIELD_TEXT_FONTWEIGHT,n.FIELD_TEXT_FONTFAMILY)),this.borderRect_&&(s=Math.max(s,n.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=s,this.size_.width=r,this.positionTextElement_(t,u),this.positionBorderRect_()},e.Field.prototype.positionTextElement_=function(t,n){if(this.textElement_){var r=this.getConstants(),s=this.size_.height/2;this.textElement_.setAttribute("x",this.sourceBlock_.RTL?this.size_.width-n-t:t),this.textElement_.setAttribute("y",r.FIELD_TEXT_BASELINE_CENTER?s:s-r.FIELD_TEXT_HEIGHT/2+r.FIELD_TEXT_BASELINE)}},e.Field.prototype.positionBorderRect_=function(){this.borderRect_&&(this.borderRect_.setAttribute("width",this.size_.width),this.borderRect_.setAttribute("height",this.size_.height),this.borderRect_.setAttribute("rx",this.getConstants().FIELD_BORDER_RECT_RADIUS),this.borderRect_.setAttribute("ry",this.getConstants().FIELD_BORDER_RECT_RADIUS))},e.Field.prototype.getSize=function(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&0==this.size_.width&&(console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead."),this.render_()),this.size_):new e.utils.Size(0,0)},e.Field.prototype.getScaledBBox=function(){if(this.borderRect_)t=this.borderRect_.getBoundingClientRect(),r=e.utils.style.getPageOffset(this.borderRect_),s=t.width,t=t.height;else{var t=this.sourceBlock_.getHeightWidth(),n=this.sourceBlock_.workspace.scale,r=this.getAbsoluteXY_(),s=t.width*n;t=t.height*n,e.utils.userAgent.GECKO?(r.x+=1.5*n,r.y+=1.5*n):e.utils.userAgent.EDGE||e.utils.userAgent.IE||(r.x-=.5*n,r.y-=.5*n),s+=1*n,t+=1*n}return new e.utils.Rect(r.y,r.y+t,r.x,r.x+s)},e.Field.prototype.getDisplayText_=function(){var t=this.getText();return t?(t.length>this.maxDisplayLength&&(t=t.substring(0,this.maxDisplayLength-2)+"\u2026"),t=t.replace(/\s/g,e.Field.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(t+="\u200f"),t):e.Field.NBSP},e.Field.prototype.getText=function(){if(this.getText_){var t=this.getText_.call(this);if(null!==t)return String(t)}return String(this.getValue())},e.Field.prototype.markDirty=function(){this.isDirty_=!0,this.constants_=null},e.Field.prototype.forceRerender=function(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours(),this.updateMarkers_())},e.Field.prototype.setValue=function(t){if(null!==t){var n=this.doClassValidation_(t);if(!((t=this.processValidation_(t,n))instanceof Error)){if((n=this.getValidator())&&(n=n.call(this,t),(t=this.processValidation_(t,n))instanceof Error))return;if(!(n=this.sourceBlock_)||!n.disposed){var r=this.getValue();r===t?this.doValueUpdate_(t):(n&&e.Events.isEnabled()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(n,"field",this.name||null,r,t)),this.doValueUpdate_(t),this.isDirty_&&this.forceRerender())}}}},e.Field.prototype.processValidation_=function(t,n){return null===n?(this.doValueInvalid_(t),this.isDirty_&&this.forceRerender(),Error()):(void 0!==n&&(t=n),t)},e.Field.prototype.getValue=function(){return this.value_},e.Field.prototype.doClassValidation_=function(t){return null==t?null:t},e.Field.prototype.doValueUpdate_=function(t){this.value_=t,this.isDirty_=!0},e.Field.prototype.doValueInvalid_=function(t){},e.Field.prototype.onMouseDown_=function(t){this.sourceBlock_&&this.sourceBlock_.workspace&&(t=this.sourceBlock_.workspace.getGesture(t))&&t.setStartField(this)},e.Field.prototype.setTooltip=function(t){t||""===t||(t=this.sourceBlock_);var n=this.getClickTarget_();n?n.tooltip=t:this.tooltip_=t},e.Field.prototype.getTooltip=function(){var t=this.getClickTarget_();return e.Tooltip.getTooltipOfObject(t||{tooltip:this.tooltip_})},e.Field.prototype.getClickTarget_=function(){return this.clickTarget_||this.getSvgRoot()},e.Field.prototype.getAbsoluteXY_=function(){return e.utils.style.getPageOffset(this.getClickTarget_())},e.Field.prototype.referencesVariables=function(){return!1},e.Field.prototype.getParentInput=function(){for(var t=null,n=this.sourceBlock_,r=n.inputList,s=0;s<n.inputList.length;s++)for(var u=r[s],b=u.fieldRow,x=0;x<b.length;x++)if(b[x]===this){t=u;break}return t},e.Field.prototype.getFlipRtl=function(){return!1},e.Field.prototype.isTabNavigable=function(){return!1},e.Field.prototype.onShortcut=function(t){return!1},e.Field.prototype.setCursorSvg=function(t){t?(this.fieldGroup_.appendChild(t),this.cursorSvg_=t):this.cursorSvg_=null},e.Field.prototype.setMarkerSvg=function(t){t?(this.fieldGroup_.appendChild(t),this.markerSvg_=t):this.markerSvg_=null},e.Field.prototype.updateMarkers_=function(){var t=this.sourceBlock_.workspace;t.keyboardAccessibilityMode&&this.cursorSvg_&&t.getCursor().draw(),t.keyboardAccessibilityMode&&this.markerSvg_&&t.getMarker(e.MarkerManager.LOCAL_MARKER).draw()},e.FieldLabel=function(t,n,r){this.class_=null,e.FieldLabel.superClass_.constructor.call(this,t,null,r),r||(this.class_=n||null)},e.utils.object.inherits(e.FieldLabel,e.Field),e.FieldLabel.prototype.DEFAULT_VALUE="",e.FieldLabel.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.text);return new e.FieldLabel(n,void 0,t)},e.FieldLabel.prototype.EDITABLE=!1,e.FieldLabel.prototype.configure_=function(t){e.FieldLabel.superClass_.configure_.call(this,t),this.class_=t.class},e.FieldLabel.prototype.initView=function(){this.createTextElement_(),this.class_&&e.utils.dom.addClass(this.textElement_,this.class_)},e.FieldLabel.prototype.doClassValidation_=function(t){return null==t?null:String(t)},e.FieldLabel.prototype.setClass=function(t){this.textElement_&&(this.class_&&e.utils.dom.removeClass(this.textElement_,this.class_),t&&e.utils.dom.addClass(this.textElement_,t)),this.class_=t},e.fieldRegistry.register("field_label",e.FieldLabel),e.Input=function(t,n,r,s){if(t!=e.inputTypes.DUMMY&&!n)throw Error("Value inputs and statement inputs must have non-empty name.");this.type=t,this.name=n,this.sourceBlock_=r,this.connection=s,this.fieldRow=[]},e.Input.prototype.align=e.constants.ALIGN.LEFT,e.Input.prototype.visible_=!0,e.Input.prototype.getSourceBlock=function(){return this.sourceBlock_},e.Input.prototype.appendField=function(t,n){return this.insertFieldAt(this.fieldRow.length,t,n),this},e.Input.prototype.insertFieldAt=function(t,n,r){if(0>t||t>this.fieldRow.length)throw Error("index "+t+" out of bounds.");return(n||""==n&&r)&&("string"==typeof n&&(n=e.fieldRegistry.fromJson({type:"field_label",text:n})),n.setSourceBlock(this.sourceBlock_),this.sourceBlock_.rendered&&(n.init(),n.applyColour()),n.name=r,n.setVisible(this.isVisible()),n.prefixField&&(t=this.insertFieldAt(t,n.prefixField)),this.fieldRow.splice(t,0,n),++t,n.suffixField&&(t=this.insertFieldAt(t,n.suffixField)),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours())),t},e.Input.prototype.removeField=function(t,n){for(var s,r=0;s=this.fieldRow[r];r++)if(s.name===t)return s.dispose(),this.fieldRow.splice(r,1),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours()),!0;if(n)return!1;throw Error('Field "'+t+'" not found.')},e.Input.prototype.isVisible=function(){return this.visible_},e.Input.prototype.setVisible=function(t){var n=[];if(this.visible_==t)return n;this.visible_=t;for(var s,r=0;s=this.fieldRow[r];r++)s.setVisible(t);return this.connection&&(this.connection=this.connection,t?n=this.connection.startTrackingAll():this.connection.stopTrackingAll(),r=this.connection.targetBlock())&&(r.getSvgRoot().style.display=t?"block":"none"),n},e.Input.prototype.markDirty=function(){for(var n,t=0;n=this.fieldRow[t];t++)n.markDirty()},e.Input.prototype.setCheck=function(t){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(t),this},e.Input.prototype.setAlign=function(t){return this.align=t,this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render()),this},e.Input.prototype.setShadowDom=function(t){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(t),this},e.Input.prototype.getShadowDom=function(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()},e.Input.prototype.init=function(){if(this.sourceBlock_.workspace.rendered)for(var t=0;t<this.fieldRow.length;t++)this.fieldRow[t].init()},e.Input.prototype.dispose=function(){for(var n,t=0;n=this.fieldRow[t];t++)n.dispose();this.connection&&this.connection.dispose(),this.sourceBlock_=null},e.Block=function(t,n,r){if(e.Generator&&void 0!==e.Generator.prototype[n])throw Error('Block prototypeName "'+n+'" conflicts with Blockly.Generator members.');if(this.id=r&&!t.getBlockById(r)?r:e.utils.genUid(),t.setBlockById(this.id,this),this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.inputsInline=void 0,this.disabled=!1,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable_=this.movable_=this.deletable_=!0,this.collapsed_=this.isShadow_=!1,this.comment=this.outputShape_=null,this.commentModel={text:null,pinned:!1,size:new e.utils.Size(160,80)},this.xy_=new e.utils.Coordinate(0,0),this.workspace=t,this.isInFlyout=t.isFlyout,this.isInMutator=t.isMutator,this.RTL=t.RTL,this.isInsertionMarker_=!1,this.hat=void 0,this.rendered=null,this.statementInputCount=0,n){if(this.type=n,!(r=e.Blocks[n])||"object"!=typeof r)throw TypeError("Unknown block type: "+n);e.utils.object.mixin(this,r)}t.addTopBlock(this),t.addTypedBlock(this),(t=e.Events.getGroup())||e.Events.setGroup(!0),n=e.Events.recordUndo;try{"function"==typeof this.init&&(e.Events.recordUndo=!1,this.init(),e.Events.recordUndo=n),e.Events.isEnabled()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CREATE))(this))}finally{t||e.Events.setGroup(!1),e.Events.recordUndo=n}this.inputsInlineDefault=this.inputsInline,"function"==typeof this.onchange&&this.setOnChange(this.onchange)},e.Block.COLLAPSED_INPUT_NAME=e.constants.COLLAPSED_INPUT_NAME,e.Block.COLLAPSED_FIELD_NAME=e.constants.COLLAPSED_FIELD_NAME,e.Block.prototype.data=null,e.Block.prototype.disposed=!1,e.Block.prototype.hue_=null,e.Block.prototype.colour_="#000000",e.Block.prototype.styleName_="",e.Block.prototype.dispose=function(t){if(this.workspace){this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.unplug(t),e.Events.isEnabled()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_DELETE))(this)),e.Events.disable();try{this.workspace&&(this.workspace.removeTopBlock(this),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),this.workspace=null),e.selected==this&&(e.selected=null);for(var n=this.childBlocks_.length-1;0<=n;n--)this.childBlocks_[n].dispose(!1);n=0;for(var r;r=this.inputList[n];n++)r.dispose();this.inputList.length=0;var u,s=this.getConnections_(!0);for(n=0;u=s[n];n++)u.dispose()}finally{e.Events.enable(),this.disposed=!0}}},e.Block.prototype.initModel=function(){for(var n,t=0;n=this.inputList[t];t++)for(var s,r=0;s=n.fieldRow[r];r++)s.initModel&&s.initModel()},e.Block.prototype.unplug=function(t){this.outputConnection?this.unplugFromRow_(t):this.previousConnection&&this.unplugFromStack_(t)},e.Block.prototype.unplugFromRow_=function(t){var n=null;this.outputConnection.isConnected()&&(n=this.outputConnection.targetConnection,this.outputConnection.disconnect()),n&&t&&(t=this.getOnlyValueConnection_())&&t.isConnected()&&!t.targetBlock().isShadow()&&((t=t.targetConnection).disconnect(),this.workspace.connectionChecker.canConnect(t,n,!1)?n.connect(t):t.onFailedConnect(n))},e.Block.prototype.getOnlyValueConnection_=function(){for(var t=null,n=0;n<this.inputList.length;n++){var r=this.inputList[n].connection;if(r&&r.type==e.connectionTypes.INPUT_VALUE&&r.targetConnection){if(t)return null;t=r}}return t},e.Block.prototype.unplugFromStack_=function(t){var n=null;this.previousConnection.isConnected()&&(n=this.previousConnection.targetConnection,this.previousConnection.disconnect());var r=this.getNextBlock();t&&r&&!r.isShadow()&&((t=this.nextConnection.targetConnection).disconnect(),n&&this.workspace.connectionChecker.canConnect(n,t,!1)&&n.connect(t))},e.Block.prototype.getConnections_=function(t){t=[],this.outputConnection&&t.push(this.outputConnection),this.previousConnection&&t.push(this.previousConnection),this.nextConnection&&t.push(this.nextConnection);for(var r,n=0;r=this.inputList[n];n++)r.connection&&t.push(r.connection);return t},e.Block.prototype.lastConnectionInStack=function(t){for(var n=this.nextConnection;n;){var r=n.targetBlock();if(!r||t&&r.isShadow())return n;n=r.nextConnection}return null},e.Block.prototype.bumpNeighbours=function(){},e.Block.prototype.getParent=function(){return this.parentBlock_},e.Block.prototype.getInputWithBlock=function(t){for(var r,n=0;r=this.inputList[n];n++)if(r.connection&&r.connection.targetBlock()==t)return r;return null},e.Block.prototype.getSurroundParent=function(){var t=this;do{var n=t;if(!(t=t.getParent()))return null}while(t.getNextBlock()==n);return t},e.Block.prototype.getNextBlock=function(){return this.nextConnection&&this.nextConnection.targetBlock()},e.Block.prototype.getPreviousBlock=function(){return this.previousConnection&&this.previousConnection.targetBlock()},e.Block.prototype.getFirstStatementConnection=function(){for(var n,t=0;n=this.inputList[t];t++)if(n.connection&&n.connection.type==e.connectionTypes.NEXT_STATEMENT)return n.connection;return null},e.Block.prototype.getRootBlock=function(){var t=this;do{var n=t;t=n.parentBlock_}while(t);return n},e.Block.prototype.getTopStackBlock=function(){var t=this;do{var n=t.getPreviousBlock()}while(n&&n.getNextBlock()==t&&(t=n));return t},e.Block.prototype.getChildren=function(t){if(!t)return this.childBlocks_;t=[];for(var r,n=0;r=this.inputList[n];n++)r.connection&&(r=r.connection.targetBlock())&&t.push(r);return(n=this.getNextBlock())&&t.push(n),t},e.Block.prototype.setParent=function(t){if(t!=this.parentBlock_){if(this.parentBlock_){if(e.utils.arrayRemove(this.parentBlock_.childBlocks_,this),this.previousConnection&&this.previousConnection.isConnected())throw Error("Still connected to previous block.");if(this.outputConnection&&this.outputConnection.isConnected())throw Error("Still connected to parent block.");this.parentBlock_=null}else this.workspace.removeTopBlock(this);(this.parentBlock_=t)?t.childBlocks_.push(this):this.workspace.addTopBlock(this)}},e.Block.prototype.getDescendants=function(t){for(var s,n=[this],r=this.getChildren(t),u=0;s=r[u];u++)n.push.apply(n,s.getDescendants(t));return n},e.Block.prototype.isDeletable=function(){return this.deletable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},e.Block.prototype.setDeletable=function(t){this.deletable_=t},e.Block.prototype.isMovable=function(){return this.movable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},e.Block.prototype.setMovable=function(t){this.movable_=t},e.Block.prototype.isDuplicatable=function(){return!this.workspace.hasBlockLimits()||this.workspace.isCapacityAvailable(e.utils.getBlockTypeCounts(this,!0))},e.Block.prototype.isShadow=function(){return this.isShadow_},e.Block.prototype.setShadow=function(t){this.isShadow_=t},e.Block.prototype.isInsertionMarker=function(){return this.isInsertionMarker_},e.Block.prototype.setInsertionMarker=function(t){this.isInsertionMarker_=t},e.Block.prototype.isEditable=function(){return this.editable_&&!(this.workspace&&this.workspace.options.readOnly)},e.Block.prototype.setEditable=function(t){this.editable_=t,t=0;for(var n;n=this.inputList[t];t++)for(var s,r=0;s=n.fieldRow[r];r++)s.updateEditable()},e.Block.prototype.isDisposed=function(){return this.disposed},e.Block.prototype.getMatchingConnection=function(t,n){var r=this.getConnections_(!0);if(t=t.getConnections_(!0),r.length!=t.length)throw Error("Connection lists did not match in length.");for(var s=0;s<t.length;s++)if(t[s]==n)return r[s];return null},e.Block.prototype.setHelpUrl=function(t){this.helpUrl=t},e.Block.prototype.setTooltip=function(t){this.tooltip=t},e.Block.prototype.getTooltip=function(){return e.Tooltip.getTooltipOfObject(this)},e.Block.prototype.getColour=function(){return this.colour_},e.Block.prototype.getStyleName=function(){return this.styleName_},e.Block.prototype.getHue=function(){return this.hue_},e.Block.prototype.setColour=function(t){t=e.utils.parseBlockColour(t),this.hue_=t.hue,this.colour_=t.hex},e.Block.prototype.setStyle=function(t){this.styleName_=t},e.Block.prototype.setOnChange=function(t){if(t&&"function"!=typeof t)throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),(this.onchange=t)&&(this.onchangeWrapper_=t.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_))},e.Block.prototype.getField=function(t){if("string"!=typeof t)throw TypeError("Blockly.Block.prototype.getField expects a string with the field name but received "+(void 0===t?"nothing":t+" of type "+typeof t)+" instead");for(var r,n=0;r=this.inputList[n];n++)for(var u,s=0;u=r.fieldRow[s];s++)if(u.name===t)return u;return null},e.Block.prototype.getVars=function(){for(var r,t=[],n=0;r=this.inputList[n];n++)for(var u,s=0;u=r.fieldRow[s];s++)u.referencesVariables()&&t.push(u.getValue());return t},e.Block.prototype.getVarModels=function(){for(var r,t=[],n=0;r=this.inputList[n];n++)for(var u,s=0;u=r.fieldRow[s];s++)u.referencesVariables()&&(u=this.workspace.getVariableById(u.getValue()))&&t.push(u);return t},e.Block.prototype.updateVarName=function(t){for(var r,n=0;r=this.inputList[n];n++)for(var u,s=0;u=r.fieldRow[s];s++)u.referencesVariables()&&t.getId()==u.getValue()&&u.refreshVariableName()},e.Block.prototype.renameVarById=function(t,n){for(var s,r=0;s=this.inputList[r];r++)for(var b,u=0;b=s.fieldRow[u];u++)b.referencesVariables()&&t==b.getValue()&&b.setValue(n)},e.Block.prototype.getFieldValue=function(t){return(t=this.getField(t))?t.getValue():null},e.Block.prototype.setFieldValue=function(t,n){var r=this.getField(n);if(!r)throw Error('Field "'+n+'" not found.');r.setValue(t)},e.Block.prototype.setPreviousStatement=function(t,n){if(t){if(void 0===n&&(n=null),!this.previousConnection){if(this.outputConnection)throw Error("Remove output connection prior to adding previous connection.");this.previousConnection=this.makeConnection_(e.connectionTypes.PREVIOUS_STATEMENT)}this.previousConnection.setCheck(n)}else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}},e.Block.prototype.setNextStatement=function(t,n){if(t)void 0===n&&(n=null),this.nextConnection||(this.nextConnection=this.makeConnection_(e.connectionTypes.NEXT_STATEMENT)),this.nextConnection.setCheck(n);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}},e.Block.prototype.setOutput=function(t,n){if(t){if(void 0===n&&(n=null),!this.outputConnection){if(this.previousConnection)throw Error("Remove previous connection prior to adding output connection.");this.outputConnection=this.makeConnection_(e.connectionTypes.OUTPUT_VALUE)}this.outputConnection.setCheck(n)}else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}},e.Block.prototype.setInputsInline=function(t){this.inputsInline!=t&&(e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this,"inline",null,this.inputsInline,t)),this.inputsInline=t)},e.Block.prototype.getInputsInline=function(){if(null!=this.inputsInline)return this.inputsInline;for(var t=1;t<this.inputList.length;t++)if(this.inputList[t-1].type==e.inputTypes.DUMMY&&this.inputList[t].type==e.inputTypes.DUMMY)return!1;for(t=1;t<this.inputList.length;t++)if(this.inputList[t-1].type==e.inputTypes.VALUE&&this.inputList[t].type==e.inputTypes.DUMMY)return!0;return!1},e.Block.prototype.setOutputShape=function(t){this.outputShape_=t},e.Block.prototype.getOutputShape=function(){return this.outputShape_},e.Block.prototype.isEnabled=function(){return!this.disabled},e.Block.prototype.setEnabled=function(t){this.isEnabled()!=t&&(e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this,"disabled",null,this.disabled,!t)),this.disabled=!t)},e.Block.prototype.getInheritedDisabled=function(){for(var t=this.getSurroundParent();t;){if(t.disabled)return!0;t=t.getSurroundParent()}return!1},e.Block.prototype.isCollapsed=function(){return this.collapsed_},e.Block.prototype.setCollapsed=function(t){this.collapsed_!=t&&(e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this,"collapsed",null,this.collapsed_,t)),this.collapsed_=t)},e.Block.prototype.toString=function(t,n){function r(ot){var et=ot.getCheck();return!et&&ot.targetConnection&&(et=ot.targetConnection.getCheck()),!!et&&(-1!=et.indexOf("Boolean")||-1!=et.indexOf("Number"))}function s(){x&&x.getType()==B.getType()&&x.getLocation()==B.getLocation()&&(x=null)}var u=[];n=n||"?";var b=e.ASTNode.NAVIGATE_ALL_FIELDS;e.ASTNode.NAVIGATE_ALL_FIELDS=!0;for(var x=e.ASTNode.createBlockNode(this),B=x;x;){switch(x.getType()){case e.ASTNode.types.INPUT:var Z=x.getLocation();x.in()?r(Z)&&u.push("("):u.push(n);break;case e.ASTNode.types.FIELD:(Z=x.getLocation()).name!=e.constants.COLLAPSED_FIELD_NAME&&u.push(Z.getText())}if(!(x=(Z=x).in()||Z.next())){for(x=Z.out(),s();x&&!x.next();)x=x.out(),s(),x&&x.getType()==e.ASTNode.types.INPUT&&r(x.getLocation())&&u.push(")");x&&(x=x.next())}}for(e.ASTNode.NAVIGATE_ALL_FIELDS=b,n=2;n<u.length;n++)"("==u[n-2]&&")"==u[n]&&(u[n-2]=u[n-1],u.splice(n-1,2));return u=(u=u.reduce(function(ot,et){return ot+("("==ot.substr(-1)||")"==et?"":" ")+et},"")).trim()||"???",t&&u.length>t&&(u=u.substring(0,t-3)+"..."),u},e.Block.prototype.appendValueInput=function(t){return this.appendInput_(e.inputTypes.VALUE,t)},e.Block.prototype.appendStatementInput=function(t){return this.appendInput_(e.inputTypes.STATEMENT,t)},e.Block.prototype.appendDummyInput=function(t){return this.appendInput_(e.inputTypes.DUMMY,t||"")},e.Block.prototype.jsonInit=function(t){var n=t.type?'Block "'+t.type+'": ':"";if(t.output&&t.previousStatement)throw Error(n+"Must not have both an output and a previousStatement.");if(t.style&&t.style.hat&&(this.hat=t.style.hat,t.style=null),t.style&&t.colour)throw Error(n+"Must not have both a colour and a style.");t.style?this.jsonInitStyle_(t,n):this.jsonInitColour_(t,n);for(var r=0;void 0!==t["message"+r];)this.interpolate_(t["message"+r],t["args"+r]||[],t["lastDummyAlign"+r],n),r++;if(void 0!==t.inputsInline&&this.setInputsInline(t.inputsInline),void 0!==t.output&&this.setOutput(!0,t.output),void 0!==t.outputShape&&this.setOutputShape(t.outputShape),void 0!==t.previousStatement&&this.setPreviousStatement(!0,t.previousStatement),void 0!==t.nextStatement&&this.setNextStatement(!0,t.nextStatement),void 0!==t.tooltip&&(r=e.utils.replaceMessageReferences(r=t.tooltip),this.setTooltip(r)),void 0!==t.enableContextMenu&&(this.contextMenu=!!(r=t.enableContextMenu)),void 0!==t.helpUrl&&(r=e.utils.replaceMessageReferences(r=t.helpUrl),this.setHelpUrl(r)),"string"==typeof t.extensions&&(console.warn(n+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+t.type+"' block."),t.extensions=[t.extensions]),void 0!==t.mutator&&e.Extensions.apply(t.mutator,this,!0),t=t.extensions,Array.isArray(t))for(n=0;n<t.length;++n)e.Extensions.apply(t[n],this,!1)},e.Block.prototype.jsonInitColour_=function(t,n){if("colour"in t)if(void 0===t.colour)console.warn(n+"Undefined colour value.");else{t=t.colour;try{this.setColour(t)}catch(r){console.warn(n+"Illegal colour value: ",t)}}},e.Block.prototype.jsonInitStyle_=function(t,n){t=t.style;try{this.setStyle(t)}catch(r){console.warn(n+"Style does not exist: ",t)}},e.Block.prototype.mixin=function(t,n){if(void 0!==n&&"boolean"!=typeof n)throw Error("opt_disableCheck must be a boolean if provided");if(!n){for(var r in n=[],t)void 0!==this[r]&&n.push(r);if(n.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(n))}e.utils.object.mixin(this,t)},e.Block.prototype.interpolate_=function(t,n,r,s){t=e.utils.tokenizeInterpolation(t),this.validateTokens_(t,n.length),n=this.interpolateArguments_(t,n,r),r=[],t=0;for(var u;u=n[t];t++)if(this.isInputKeyword_(u.type)){if(u=this.inputFromJson_(u,s)){for(var x,b=0;x=r[b];b++)u.appendField(x[0],x[1]);r.length=0}}else(b=this.fieldFromJson_(u))&&r.push([b,u.name])},e.Block.prototype.validateTokens_=function(t,n){for(var r=[],s=0,u=0;u<t.length;u++){var b=t[u];if("number"==typeof b){if(1>b||b>n)throw Error('Block "'+this.type+'": Message index %'+b+" out of range.");if(r[b])throw Error('Block "'+this.type+'": Message index %'+b+" duplicated.");r[b]=!0,s++}}if(s!=n)throw Error('Block "'+this.type+'": Message does not reference all '+n+" arg(s).")},e.Block.prototype.interpolateArguments_=function(t,n,r){for(var s=[],u=0;u<t.length;u++){var b=t[u];"number"==typeof b&&(b=n[b-1]),("string"!=typeof b||(b=this.stringToFieldJson_(b)))&&s.push(b)}return(t=s.length)&&!this.isInputKeyword_(s[t-1].type)&&(t={type:"input_dummy"},r&&(t.align=r),s.push(t)),s},e.Block.prototype.fieldFromJson_=function(t){var n=e.fieldRegistry.fromJson(t);return!n&&t.alt?"string"==typeof t.alt?(t=this.stringToFieldJson_(t.alt))?this.fieldFromJson_(t):null:this.fieldFromJson_(t.alt):n},e.Block.prototype.inputFromJson_=function(t,n){var r={LEFT:e.constants.ALIGN.LEFT,RIGHT:e.constants.ALIGN.RIGHT,CENTRE:e.constants.ALIGN.CENTRE,CENTER:e.constants.ALIGN.CENTRE},s=null;switch(t.type){case"input_value":s=this.appendValueInput(t.name);break;case"input_statement":s=this.appendStatementInput(t.name);break;case"input_dummy":s=this.appendDummyInput(t.name)}return s?(t.check&&s.setCheck(t.check),t.align&&(void 0===(r=r[t.align.toUpperCase()])?console.warn(n+"Illegal align value: ",t.align):s.setAlign(r)),s):null},e.Block.prototype.isInputKeyword_=function(t){return"input_value"==t||"input_statement"==t||"input_dummy"==t},e.Block.prototype.stringToFieldJson_=function(t){return(t=t.trim())?{type:"field_label",text:t}:null},e.Block.prototype.appendInput_=function(t,n){var r=null;return(t==e.inputTypes.VALUE||t==e.inputTypes.STATEMENT)&&(r=this.makeConnection_(t)),t==e.inputTypes.STATEMENT&&this.statementInputCount++,t=new e.Input(t,n,this,r),this.inputList.push(t),t},e.Block.prototype.moveInputBefore=function(t,n){if(t!=n){for(var b,r=-1,s=n?-1:this.inputList.length,u=0;b=this.inputList[u];u++)if(b.name==t){if(r=u,-1!=s)break}else if(n&&b.name==n&&(s=u,-1!=r))break;if(-1==r)throw Error('Named input "'+t+'" not found.');if(-1==s)throw Error('Reference input "'+n+'" not found.');this.moveNumberedInputBefore(r,s)}},e.Block.prototype.moveNumberedInputBefore=function(t,n){if(t==n)throw Error("Can't move input to itself.");if(t>=this.inputList.length)throw RangeError("Input index "+t+" out of bounds.");if(n>this.inputList.length)throw RangeError("Reference input "+n+" out of bounds.");var r=this.inputList[t];this.inputList.splice(t,1),t<n&&n--,this.inputList.splice(n,0,r)},e.Block.prototype.removeInput=function(t,n){for(var s,r=0;s=this.inputList[r];r++)if(s.name==t)return s.type==e.inputTypes.STATEMENT&&this.statementInputCount--,s.dispose(),this.inputList.splice(r,1),!0;if(n)return!1;throw Error("Input not found: "+t)},e.Block.prototype.getInput=function(t){for(var r,n=0;r=this.inputList[n];n++)if(r.name==t)return r;return null},e.Block.prototype.getInputTargetBlock=function(t){return(t=this.getInput(t))&&t.connection&&t.connection.targetBlock()},e.Block.prototype.getCommentText=function(){return this.commentModel.text},e.Block.prototype.setCommentText=function(t){this.commentModel.text!=t&&(e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this,"comment",null,this.commentModel.text,t)),this.comment=this.commentModel.text=t)},e.Block.prototype.setWarningText=function(t,n){},e.Block.prototype.setMutator=function(t){},e.Block.prototype.getRelativeToSurfaceXY=function(){return this.xy_},e.Block.prototype.moveBy=function(t,n){if(this.parentBlock_)throw Error("Block has parent.");var r=new(e.Events.get(e.Events.BLOCK_MOVE))(this);this.xy_.translate(t,n),r.recordNew(),e.Events.fire(r)},e.Block.prototype.makeConnection_=function(t){return new e.Connection(this,t)},e.Block.prototype.allInputsFilled=function(t){if(void 0===t&&(t=!0),!t&&this.isShadow())return!1;for(var r,n=0;r=this.inputList[n];n++)if(r.connection&&(!(r=r.connection.targetBlock())||!r.allInputsFilled(t)))return!1;return!(n=this.getNextBlock())||n.allInputsFilled(t)},e.Block.prototype.toDevString=function(){var t=this.type?'"'+this.type+'" block':"Block";return this.id&&(t+=' (id="'+this.id+'")'),t},e.blockRendering.IPathObject=function(t,n){},e.utils.KeyCodes={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PLUS_SIGN:43,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,FF_DASH:173,FF_HASH:163,QUESTION_MARK:63,AT_SIGN:64,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,MAC_WK_CMD_LEFT:91,MAC_WK_CMD_RIGHT:93,WIN_IME:229,VK_NONAME:252,PHANTOM:255},e.Menu=function(){this.menuItems_=[],this.roleName_=this.element_=this.onKeyDownHandler_=this.mouseLeaveHandler_=this.mouseEnterHandler_=this.clickHandler_=this.mouseOverHandler_=this.highlightedItem_=this.openingCoords=null},e.Menu.prototype.addChild=function(t){this.menuItems_.push(t)},e.Menu.prototype.render=function(t){var n=document.createElement("div");n.className="blocklyMenu goog-menu blocklyNonSelectable",n.tabIndex=0,this.roleName_&&e.utils.aria.setRole(n,this.roleName_),this.element_=n;for(var s,r=0;s=this.menuItems_[r];r++)n.appendChild(s.createDom());this.mouseOverHandler_=e.browserEvents.conditionalBind(n,"mouseover",this,this.handleMouseOver_,!0),this.clickHandler_=e.browserEvents.conditionalBind(n,"click",this,this.handleClick_,!0),this.mouseEnterHandler_=e.browserEvents.conditionalBind(n,"mouseenter",this,this.handleMouseEnter_,!0),this.mouseLeaveHandler_=e.browserEvents.conditionalBind(n,"mouseleave",this,this.handleMouseLeave_,!0),this.onKeyDownHandler_=e.browserEvents.conditionalBind(n,"keydown",this,this.handleKeyEvent_),t.appendChild(n)},e.Menu.prototype.getElement=function(){return this.element_},e.Menu.prototype.focus=function(){var t=this.getElement();t&&(t.focus({preventScroll:!0}),e.utils.dom.addClass(t,"blocklyFocused"))},e.Menu.prototype.blur_=function(){var t=this.getElement();t&&(t.blur(),e.utils.dom.removeClass(t,"blocklyFocused"))},e.Menu.prototype.setRole=function(t){this.roleName_=t},e.Menu.prototype.dispose=function(){this.mouseOverHandler_&&(e.browserEvents.unbind(this.mouseOverHandler_),this.mouseOverHandler_=null),this.clickHandler_&&(e.browserEvents.unbind(this.clickHandler_),this.clickHandler_=null),this.mouseEnterHandler_&&(e.browserEvents.unbind(this.mouseEnterHandler_),this.mouseEnterHandler_=null),this.mouseLeaveHandler_&&(e.browserEvents.unbind(this.mouseLeaveHandler_),this.mouseLeaveHandler_=null),this.onKeyDownHandler_&&(e.browserEvents.unbind(this.onKeyDownHandler_),this.onKeyDownHandler_=null);for(var n,t=0;n=this.menuItems_[t];t++)n.dispose();this.element_=null},e.Menu.prototype.getMenuItem_=function(t){for(var n=this.getElement();t&&t!=n;){if(e.utils.dom.hasClass(t,"blocklyMenuItem"))for(var s,r=0;s=this.menuItems_[r];r++)if(s.getElement()==t)return s;t=t.parentElement}return null},e.Menu.prototype.setHighlighted=function(t){var n=this.highlightedItem_;n&&(n.setHighlighted(!1),this.highlightedItem_=null),t&&(t.setHighlighted(!0),this.highlightedItem_=t,n=this.getElement(),e.utils.style.scrollIntoContainerView(t.getElement(),n),e.utils.aria.setState(n,e.utils.aria.State.ACTIVEDESCENDANT,t.getId()))},e.Menu.prototype.highlightNext=function(){var t=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(t,1)},e.Menu.prototype.highlightPrevious=function(){var t=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(0>t?this.menuItems_.length:t,-1)},e.Menu.prototype.highlightFirst_=function(){this.highlightHelper_(-1,1)},e.Menu.prototype.highlightLast_=function(){this.highlightHelper_(this.menuItems_.length,-1)},e.Menu.prototype.highlightHelper_=function(t,n){t+=n;for(var r;r=this.menuItems_[t];){if(r.isEnabled()){this.setHighlighted(r);break}t+=n}},e.Menu.prototype.handleMouseOver_=function(t){(t=this.getMenuItem_(t.target))&&(t.isEnabled()?this.highlightedItem_!=t&&this.setHighlighted(t):this.setHighlighted(null))},e.Menu.prototype.handleClick_=function(t){var n=this.openingCoords;if(this.openingCoords=null,n&&"number"==typeof t.clientX){var r=new e.utils.Coordinate(t.clientX,t.clientY);if(1>e.utils.Coordinate.distance(n,r))return}(t=this.getMenuItem_(t.target))&&t.performAction()},e.Menu.prototype.handleMouseEnter_=function(t){this.focus()},e.Menu.prototype.handleMouseLeave_=function(t){this.getElement()&&(this.blur_(),this.setHighlighted(null))},e.Menu.prototype.handleKeyEvent_=function(t){if(this.menuItems_.length&&!(t.shiftKey||t.ctrlKey||t.metaKey||t.altKey)){var n=this.highlightedItem_;switch(t.keyCode){case e.utils.KeyCodes.ENTER:case e.utils.KeyCodes.SPACE:n&&n.performAction();break;case e.utils.KeyCodes.UP:this.highlightPrevious();break;case e.utils.KeyCodes.DOWN:this.highlightNext();break;case e.utils.KeyCodes.PAGE_UP:case e.utils.KeyCodes.HOME:this.highlightFirst_();break;case e.utils.KeyCodes.PAGE_DOWN:case e.utils.KeyCodes.END:this.highlightLast_();break;default:return}t.preventDefault(),t.stopPropagation()}},e.Menu.prototype.getSize=function(){var t=this.getElement(),n=e.utils.style.getSize(t);return n.height=t.scrollHeight,n},e.MenuItem=function(t,n){this.content_=t,this.value_=n,this.enabled_=!0,this.element_=null,this.rightToLeft_=!1,this.roleName_=null,this.highlight_=this.checked_=this.checkable_=!1,this.actionHandler_=null},e.MenuItem.prototype.createDom=function(){var t=document.createElement("div");t.id=e.utils.IdGenerator.getNextUniqueId(),this.element_=t,t.className="blocklyMenuItem goog-menuitem "+(this.enabled_?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked_?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight_?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft_?"blocklyMenuItemRtl goog-menuitem-rtl ":"");var n=document.createElement("div");if(n.className="blocklyMenuItemContent goog-menuitem-content",this.checkable_){var r=document.createElement("div");r.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",n.appendChild(r)}return r=this.content_,"string"==typeof this.content_&&(r=document.createTextNode(this.content_)),n.appendChild(r),t.appendChild(n),this.roleName_&&e.utils.aria.setRole(t,this.roleName_),e.utils.aria.setState(t,e.utils.aria.State.SELECTED,this.checkable_&&this.checked_||!1),e.utils.aria.setState(t,e.utils.aria.State.DISABLED,!this.enabled_),t},e.MenuItem.prototype.dispose=function(){this.element_=null},e.MenuItem.prototype.getElement=function(){return this.element_},e.MenuItem.prototype.getId=function(){return this.element_.id},e.MenuItem.prototype.getValue=function(){return this.value_},e.MenuItem.prototype.setRightToLeft=function(t){this.rightToLeft_=t},e.MenuItem.prototype.setRole=function(t){this.roleName_=t},e.MenuItem.prototype.setCheckable=function(t){this.checkable_=t},e.MenuItem.prototype.setChecked=function(t){this.checked_=t},e.MenuItem.prototype.setHighlighted=function(t){this.highlight_=t;var n=this.getElement();n&&this.isEnabled()&&(t?(e.utils.dom.addClass(n,"blocklyMenuItemHighlight"),e.utils.dom.addClass(n,"goog-menuitem-highlight")):(e.utils.dom.removeClass(n,"blocklyMenuItemHighlight"),e.utils.dom.removeClass(n,"goog-menuitem-highlight")))},e.MenuItem.prototype.isEnabled=function(){return this.enabled_},e.MenuItem.prototype.setEnabled=function(t){this.enabled_=t},e.MenuItem.prototype.performAction=function(){this.isEnabled()&&this.actionHandler_&&this.actionHandler_(this)},e.MenuItem.prototype.onAction=function(t,n){this.actionHandler_=t.bind(n)},e.ContextMenu={},e.ContextMenu.currentBlock=null,e.ContextMenu.menu_=null,e.ContextMenu.show=function(t,n,r){if(e.WidgetDiv.show(e.ContextMenu,r,e.ContextMenu.dispose),n.length){var s=e.ContextMenu.populate_(n,r);e.ContextMenu.menu_=s,e.ContextMenu.position_(s,t,r),setTimeout(function(){s.focus()},1),e.ContextMenu.currentBlock=null}else e.ContextMenu.hide()},e.ContextMenu.populate_=function(t,n){var r=new e.Menu;r.setRole(e.utils.aria.Role.MENU);for(var u,s=0;u=t[s];s++){var b=new e.MenuItem(u.text);b.setRightToLeft(n),b.setRole(e.utils.aria.Role.MENUITEM),r.addChild(b),b.setEnabled(u.enabled),u.enabled&&b.onAction(function(x){e.ContextMenu.hide(),this.callback(this.scope)},u)}return r},e.ContextMenu.position_=function(t,n,r){var s=e.utils.getViewportBBox();n=new e.utils.Rect(n.clientY+s.top,n.clientY+s.top,n.clientX+s.left,n.clientX+s.left),e.ContextMenu.createWidget_(t);var u=t.getSize();r&&(n.left+=u.width,n.right+=u.width,s.left+=u.width,s.right+=u.width),e.WidgetDiv.positionWithAnchor(s,n,u,r),t.focus()},e.ContextMenu.createWidget_=function(t){t.render(e.WidgetDiv.DIV);var n=t.getElement();e.utils.dom.addClass(n,"blocklyContextMenu"),e.browserEvents.conditionalBind(n,"contextmenu",null,e.utils.noEvent),t.focus()},e.ContextMenu.hide=function(){e.WidgetDiv.hideIfOwner(e.ContextMenu),e.ContextMenu.currentBlock=null},e.ContextMenu.dispose=function(){e.ContextMenu.menu_&&(e.ContextMenu.menu_.dispose(),e.ContextMenu.menu_=null)},e.ContextMenu.callbackFactory=function(t,n){return function(){e.Events.disable();try{var r=e.Xml.domToBlock(n,t.workspace),s=t.getRelativeToSurfaceXY();s.x=t.RTL?s.x-e.SNAP_RADIUS:s.x+e.SNAP_RADIUS,s.y+=2*e.SNAP_RADIUS,r.moveBy(s.x,s.y)}finally{e.Events.enable()}e.Events.isEnabled()&&!r.isShadow()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CREATE))(r)),r.select()}},e.ContextMenu.commentDeleteOption=function(t){return{text:e.Msg.REMOVE_COMMENT,enabled:!0,callback:function(){e.Events.setGroup(!0),t.dispose(!0,!0),e.Events.setGroup(!1)}}},e.ContextMenu.commentDuplicateOption=function(t){return{text:e.Msg.DUPLICATE_COMMENT,enabled:!0,callback:function(){e.duplicate(t)}}},e.ContextMenu.workspaceCommentOption=function(t,n){if(!e.WorkspaceCommentSvg)throw Error("Missing require for Blockly.WorkspaceCommentSvg");var r={enabled:!e.utils.userAgent.IE};return r.text=e.Msg.ADD_COMMENT,r.callback=function(){var s=new e.WorkspaceCommentSvg(t,e.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT,e.WorkspaceCommentSvg.DEFAULT_SIZE,e.WorkspaceCommentSvg.DEFAULT_SIZE),u=t.getInjectionDiv().getBoundingClientRect();u=new e.utils.Coordinate(n.clientX-u.left,n.clientY-u.top);var b=t.getOriginOffsetInPixels();(u=e.utils.Coordinate.difference(u,b)).scale(1/t.scale),s.moveBy(u.x,u.y),t.rendered&&(s.initSvg(),s.render(),s.select())},r},e.ContextMenuRegistry=function(){e.ContextMenuRegistry.registry=this,this.registry_=Object.create(null)},e.ContextMenuRegistry.ScopeType={BLOCK:"block",WORKSPACE:"workspace"},e.ContextMenuRegistry.registry=null,e.ContextMenuRegistry.prototype.register=function(t){if(this.registry_[t.id])throw Error('Menu item with ID "'+t.id+'" is already registered.');this.registry_[t.id]=t},e.ContextMenuRegistry.prototype.unregister=function(t){if(!this.registry_[t])throw Error('Menu item with ID "'+t+'" not found.');delete this.registry_[t]},e.ContextMenuRegistry.prototype.getItem=function(t){return this.registry_[t]||null},e.ContextMenuRegistry.prototype.getContextMenuOptions=function(t,n){var r=[],s=this.registry_;return Object.keys(s).forEach(function(u){if(t==(u=s[u]).scopeType){var b=u.preconditionFn(n);"hidden"!=b&&(u={text:"function"==typeof u.displayText?u.displayText(n):u.displayText,enabled:"enabled"==b,callback:u.callback,scope:n,weight:u.weight},r.push(u))}}),r.sort(function(u,b){return u.weight-b.weight}),r},new e.ContextMenuRegistry,e.Events.Selected=function(t,n,r){e.Events.Selected.superClass_.constructor.call(this,r),this.oldElementId=t,this.newElementId=n},e.utils.object.inherits(e.Events.Selected,e.Events.UiBase),e.Events.Selected.prototype.type=e.Events.SELECTED,e.Events.Selected.prototype.toJson=function(){var t=e.Events.Selected.superClass_.toJson.call(this);return t.oldElementId=this.oldElementId,t.newElementId=this.newElementId,t},e.Events.Selected.prototype.fromJson=function(t){e.Events.Selected.superClass_.fromJson.call(this,t),this.oldElementId=t.oldElementId,this.newElementId=t.newElementId},e.registry.register(e.registry.Type.EVENT,e.Events.SELECTED,e.Events.Selected),e.IBoundedElement=function(){},e.ICopyable=function(){},e.RenderedConnection=function(t,n){e.RenderedConnection.superClass_.constructor.call(this,t,n),this.db_=t.workspace.connectionDBList[n],this.dbOpposite_=t.workspace.connectionDBList[e.OPPOSITE_TYPE[n]],this.offsetInBlock_=new e.utils.Coordinate(0,0),this.trackedState_=e.RenderedConnection.TrackedState.WILL_TRACK,this.targetConnection=null},e.utils.object.inherits(e.RenderedConnection,e.Connection),e.RenderedConnection.TrackedState={WILL_TRACK:-1,UNTRACKED:0,TRACKED:1},e.RenderedConnection.prototype.dispose=function(){e.RenderedConnection.superClass_.dispose.call(this),this.trackedState_==e.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y)},e.RenderedConnection.prototype.getSourceBlock=function(){return e.RenderedConnection.superClass_.getSourceBlock.call(this)},e.RenderedConnection.prototype.targetBlock=function(){return e.RenderedConnection.superClass_.targetBlock.call(this)},e.RenderedConnection.prototype.distanceFrom=function(t){var n=this.x-t.x;return t=this.y-t.y,Math.sqrt(n*n+t*t)},e.RenderedConnection.prototype.bumpAwayFrom=function(t){if(!this.sourceBlock_.workspace.isDragging()){var n=this.sourceBlock_.getRootBlock();if(!n.isInFlyout){var r=!1;if(!n.isMovable()){if(!(n=t.getSourceBlock().getRootBlock()).isMovable())return;t=this,r=!0}var s=e.selected==n;s||n.addSelect();var u=t.x+e.SNAP_RADIUS+Math.floor(Math.random()*e.BUMP_RANDOMNESS)-this.x,b=t.y+e.SNAP_RADIUS+Math.floor(Math.random()*e.BUMP_RANDOMNESS)-this.y;r&&(b=-b),n.RTL&&(u=t.x-e.SNAP_RADIUS-Math.floor(Math.random()*e.BUMP_RANDOMNESS)-this.x),n.moveBy(u,b),s||n.removeSelect()}}},e.RenderedConnection.prototype.moveTo=function(t,n){this.trackedState_==e.RenderedConnection.TrackedState.WILL_TRACK?(this.db_.addConnection(this,n),this.trackedState_=e.RenderedConnection.TrackedState.TRACKED):this.trackedState_==e.RenderedConnection.TrackedState.TRACKED&&(this.db_.removeConnection(this,this.y),this.db_.addConnection(this,n)),this.x=t,this.y=n},e.RenderedConnection.prototype.moveBy=function(t,n){this.moveTo(this.x+t,this.y+n)},e.RenderedConnection.prototype.moveToOffset=function(t){this.moveTo(t.x+this.offsetInBlock_.x,t.y+this.offsetInBlock_.y)},e.RenderedConnection.prototype.setOffsetInBlock=function(t,n){this.offsetInBlock_.x=t,this.offsetInBlock_.y=n},e.RenderedConnection.prototype.getOffsetInBlock=function(){return this.offsetInBlock_},e.RenderedConnection.prototype.tighten=function(){var t=this.targetConnection.x-this.x,n=this.targetConnection.y-this.y;if(0!=t||0!=n){var r=this.targetBlock(),s=r.getSvgRoot();if(!s)throw Error("block is not rendered.");s=e.utils.getRelativeXY(s),r.getSvgRoot().setAttribute("transform","translate("+(s.x-t)+","+(s.y-n)+")"),r.moveConnections(-t,-n)}},e.RenderedConnection.prototype.closest=function(t,n){return this.dbOpposite_.searchForClosest(this,t,n)},e.RenderedConnection.prototype.highlight=function(){var t=this.sourceBlock_.workspace.getRenderer().getConstants(),n=t.shapeFor(this);n=this.type==e.connectionTypes.INPUT_VALUE||this.type==e.connectionTypes.OUTPUT_VALUE?e.utils.svgPaths.moveBy(0,-(t=t.TAB_OFFSET_FROM_TOP))+e.utils.svgPaths.lineOnAxis("v",t)+n.pathDown+e.utils.svgPaths.lineOnAxis("v",t):e.utils.svgPaths.moveBy(-(t=t.NOTCH_OFFSET_LEFT-t.CORNER_RADIUS),0)+e.utils.svgPaths.lineOnAxis("h",t)+n.pathLeft+e.utils.svgPaths.lineOnAxis("h",t),t=this.sourceBlock_.getRelativeToSurfaceXY(),e.Connection.highlightedPath_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyHighlightedConnectionPath",d:n,transform:"translate("+(this.x-t.x)+","+(this.y-t.y)+")"+(this.sourceBlock_.RTL?" scale(-1 1)":"")},this.sourceBlock_.getSvgRoot())},e.RenderedConnection.prototype.unhighlight=function(){e.utils.dom.removeNode(e.Connection.highlightedPath_),delete e.Connection.highlightedPath_},e.RenderedConnection.prototype.setTracking=function(t){t&&this.trackedState_==e.RenderedConnection.TrackedState.TRACKED||!t&&this.trackedState_==e.RenderedConnection.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(t?(this.db_.addConnection(this,this.y),this.trackedState_=e.RenderedConnection.TrackedState.TRACKED):(this.trackedState_==e.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y),this.trackedState_=e.RenderedConnection.TrackedState.UNTRACKED))},e.RenderedConnection.prototype.stopTrackingAll=function(){if(this.setTracking(!1),this.targetConnection)for(var t=this.targetBlock().getDescendants(!1),n=0;n<t.length;n++){for(var r=t[n],s=r.getConnections_(!0),u=0;u<s.length;u++)s[u].setTracking(!1);for(r=r.getIcons(),u=0;u<r.length;u++)r[u].setVisible(!1)}},e.RenderedConnection.prototype.startTrackingAll=function(){this.setTracking(!0);var t=[];if(this.type!=e.connectionTypes.INPUT_VALUE&&this.type!=e.connectionTypes.NEXT_STATEMENT)return t;var n=this.targetBlock();if(n){if(n.isCollapsed()){var r=[];n.outputConnection&&r.push(n.outputConnection),n.nextConnection&&r.push(n.nextConnection),n.previousConnection&&r.push(n.previousConnection)}else r=n.getConnections_(!0);for(var s=0;s<r.length;s++)t.push.apply(t,r[s].startTrackingAll());t.length||(t[0]=n)}return t},e.RenderedConnection.prototype.isConnectionAllowed=function(t,n){return e.utils.deprecation.warn("RenderedConnection.prototype.isConnectionAllowed","July 2020","July 2021","Blockly.Workspace.prototype.getConnectionChecker().canConnect"),!(this.distanceFrom(t)>n)&&e.RenderedConnection.superClass_.isConnectionAllowed.call(this,t)},e.RenderedConnection.prototype.onFailedConnect=function(t){var n=this.getSourceBlock();if(e.Events.recordUndo){var r=e.Events.getGroup();setTimeout(function(){n.isDisposed()||n.getParent()||(e.Events.setGroup(r),this.bumpAwayFrom(t),e.Events.setGroup(!1))}.bind(this),e.BUMP_DELAY)}},e.RenderedConnection.prototype.disconnectInternal_=function(t,n){e.RenderedConnection.superClass_.disconnectInternal_.call(this,t,n),t.rendered&&t.render(),n.rendered&&(n.updateDisabled(),n.render(),n.getSvgRoot().style.display="block")},e.RenderedConnection.prototype.respawnShadow_=function(){e.RenderedConnection.superClass_.respawnShadow_.call(this);var t=this.targetBlock();t&&(t.initSvg(),t.render(!1),(t=this.getSourceBlock()).rendered&&t.render())},e.RenderedConnection.prototype.neighbours=function(t){return this.dbOpposite_.getNeighbours(this,t)},e.RenderedConnection.prototype.connect_=function(t){e.RenderedConnection.superClass_.connect_.call(this,t);var n=this.getSourceBlock();t=t.getSourceBlock();var r=n.rendered,s=t.rendered;r&&n.updateDisabled(),s&&t.updateDisabled(),r&&s&&(this.type==e.connectionTypes.NEXT_STATEMENT||this.type==e.connectionTypes.PREVIOUS_STATEMENT?t.render():n.render()),(n=n.getInputWithBlock(t))&&(n=n.isVisible(),t.getSvgRoot().style.display=n?"block":"none")},e.RenderedConnection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||((this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug(),this.sourceBlock_.bumpNeighbours())},e.BasicCursor=function(){e.BasicCursor.superClass_.constructor.call(this)},e.utils.object.inherits(e.BasicCursor,e.Cursor),e.BasicCursor.registrationName="basicCursor",e.BasicCursor.prototype.next=function(){var t=this.getCurNode();return t?((t=this.getNextNode_(t,this.validNode_))&&this.setCurNode(t),t):null},e.BasicCursor.prototype.in=function(){return this.next()},e.BasicCursor.prototype.prev=function(){var t=this.getCurNode();return t?((t=this.getPreviousNode_(t,this.validNode_))&&this.setCurNode(t),t):null},e.BasicCursor.prototype.out=function(){return this.prev()},e.BasicCursor.prototype.getNextNode_=function(t,n){if(!t)return null;var r=t.in()||t.next();return n(r)?r:r?this.getNextNode_(r,n):n(t=this.findSiblingOrParent_(t.out()))?t:t?this.getNextNode_(t,n):null},e.BasicCursor.prototype.getPreviousNode_=function(t,n){if(!t)return null;var r=t.prev();return n(r=r?this.getRightMostChild_(r):t.out())?r:r?this.getPreviousNode_(r,n):null},e.BasicCursor.prototype.validNode_=function(t){var n=!1;return((t=t&&t.getType())==e.ASTNode.types.OUTPUT||t==e.ASTNode.types.INPUT||t==e.ASTNode.types.FIELD||t==e.ASTNode.types.NEXT||t==e.ASTNode.types.PREVIOUS||t==e.ASTNode.types.WORKSPACE)&&(n=!0),n},e.BasicCursor.prototype.findSiblingOrParent_=function(t){return t?t.next()||this.findSiblingOrParent_(t.out()):null},e.BasicCursor.prototype.getRightMostChild_=function(t){if(!t.in())return t;for(t=t.in();t.next();)t=t.next();return this.getRightMostChild_(t)},e.registry.register(e.registry.Type.CURSOR,e.BasicCursor.registrationName,e.BasicCursor),e.TabNavigateCursor=function(){e.TabNavigateCursor.superClass_.constructor.call(this)},e.utils.object.inherits(e.TabNavigateCursor,e.BasicCursor),e.TabNavigateCursor.prototype.validNode_=function(t){var n=!1,r=t&&t.getType();return t&&(t=t.getLocation(),r==e.ASTNode.types.FIELD&&t&&t.isTabNavigable()&&t.isClickable()&&(n=!0)),n},e.BlockSvg=function(t,n,r){this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},null),this.svgGroup_.translate_="",this.style=t.getRenderer().getConstants().getBlockStyle(null),this.pathObject=t.getRenderer().makePathObject(this.svgGroup_,this.style),this.renderIsInProgress_=this.rendered=!1,this.workspace=t,this.previousConnection=this.nextConnection=this.outputConnection=null,this.useDragSurface_=e.utils.is3dSupported()&&!!t.getBlockDragSurface();var s=this.pathObject.svgPath;s.tooltip=this,e.Tooltip.bindMouseEvents(s),e.BlockSvg.superClass_.constructor.call(this,t,n,r),this.svgGroup_.dataset?this.svgGroup_.dataset.id=this.id:e.utils.userAgent.IE&&this.svgGroup_.setAttribute("data-id",this.id)},e.utils.object.inherits(e.BlockSvg,e.Block),e.BlockSvg.prototype.height=0,e.BlockSvg.prototype.width=0,e.BlockSvg.prototype.warningTextDb_=null,e.BlockSvg.INLINE=-1,e.BlockSvg.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_",e.BlockSvg.prototype.initSvg=function(){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");for(var n,t=0;n=this.inputList[t];t++)n.init();for(n=this.getIcons(),t=0;t<n.length;t++)n[t].createIcon();this.applyColour(),this.pathObject.updateMovable(this.isMovable()),t=this.getSvgRoot(),this.workspace.options.readOnly||this.eventsInit_||!t||e.browserEvents.conditionalBind(t,"mousedown",this,this.onMouseDown_),this.eventsInit_=!0,t.parentNode||this.workspace.getCanvas().appendChild(t)},e.BlockSvg.prototype.getColourSecondary=function(){return this.style.colourSecondary},e.BlockSvg.prototype.getColourTertiary=function(){return this.style.colourTertiary},e.BlockSvg.prototype.getColourShadow=function(){return e.utils.deprecation.warn("BlockSvg.prototype.getColourShadow","January 2020","January 2021","style.colourSecondary"),this.getColourSecondary()},e.BlockSvg.prototype.getColourBorder=function(){return e.utils.deprecation.warn("BlockSvg.prototype.getColourBorder","January 2020","January 2021","style.colourTertiary"),{colourBorder:this.getColourTertiary(),colourLight:null,colourDark:null}},e.BlockSvg.prototype.select=function(){if(this.isShadow()&&this.getParent())this.getParent().select();else if(e.selected!=this){var t=null;if(e.selected){t=e.selected.id,e.Events.disable();try{e.selected.unselect()}finally{e.Events.enable()}}t=new(e.Events.get(e.Events.SELECTED))(t,this.id,this.workspace.id),e.Events.fire(t),e.selected=this,this.addSelect()}},e.BlockSvg.prototype.unselect=function(){if(e.selected==this){var t=new(e.Events.get(e.Events.SELECTED))(this.id,null,this.workspace.id);t.workspaceId=this.workspace.id,e.Events.fire(t),e.selected=null,this.removeSelect()}},e.BlockSvg.prototype.mutator=null,e.BlockSvg.prototype.comment=null,e.BlockSvg.prototype.commentIcon_=null,e.BlockSvg.prototype.warning=null,e.BlockSvg.prototype.getIcons=function(){var t=[];return this.mutator&&t.push(this.mutator),this.commentIcon_&&t.push(this.commentIcon_),this.warning&&t.push(this.warning),t},e.BlockSvg.prototype.setParent=function(t){var n=this.parentBlock_;if(t!=n){e.utils.dom.startTextWidthCache(),e.BlockSvg.superClass_.setParent.call(this,t),e.utils.dom.stopTextWidthCache();var r=this.getSvgRoot();if(!this.workspace.isClearing&&r){var s=this.getRelativeToSurfaceXY();t?(t.getSvgRoot().appendChild(r),t=this.getRelativeToSurfaceXY(),this.moveConnections(t.x-s.x,t.y-s.y)):n&&(this.workspace.getCanvas().appendChild(r),this.translate(s.x,s.y)),this.applyColour()}}},e.BlockSvg.prototype.getRelativeToSurfaceXY=function(){var t=0,n=0,r=this.useDragSurface_?this.workspace.getBlockDragSurface().getGroup():null,s=this.getSvgRoot();if(s)do{var u=e.utils.getRelativeXY(s);t+=u.x,n+=u.y,this.useDragSurface_&&this.workspace.getBlockDragSurface().getCurrentBlock()==s&&(t+=(u=this.workspace.getBlockDragSurface().getSurfaceTranslation()).x,n+=u.y),s=s.parentNode}while(s&&s!=this.workspace.getCanvas()&&s!=r);return new e.utils.Coordinate(t,n)},e.BlockSvg.prototype.moveBy=function(t,n){if(this.parentBlock_)throw Error("Block has parent.");var r=e.Events.isEnabled();if(r)var s=new(e.Events.get(e.Events.BLOCK_MOVE))(this);var u=this.getRelativeToSurfaceXY();this.translate(u.x+t,u.y+n),this.moveConnections(t,n),r&&(s.recordNew(),e.Events.fire(s)),this.workspace.resizeContents()},e.BlockSvg.prototype.translate=function(t,n){this.getSvgRoot().setAttribute("transform","translate("+t+","+n+")")},e.BlockSvg.prototype.moveToDragSurface=function(){if(this.useDragSurface_){var t=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.getBlockDragSurface().translateSurface(t.x,t.y),(t=this.getSvgRoot())&&this.workspace.getBlockDragSurface().setBlocksAndShow(t)}},e.BlockSvg.prototype.moveTo=function(t){var n=this.getRelativeToSurfaceXY();this.moveBy(t.x-n.x,t.y-n.y)},e.BlockSvg.prototype.moveOffDragSurface=function(t){this.useDragSurface_&&(this.translate(t.x,t.y),this.workspace.getBlockDragSurface().clearAndHide(this.workspace.getCanvas()))},e.BlockSvg.prototype.moveDuringDrag=function(t){this.useDragSurface_?this.workspace.getBlockDragSurface().translateSurface(t.x,t.y):(this.svgGroup_.translate_="translate("+t.x+","+t.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))},e.BlockSvg.prototype.clearTransformAttributes_=function(){this.getSvgRoot().removeAttribute("transform")},e.BlockSvg.prototype.snapToGrid=function(){if(this.workspace&&!this.workspace.isDragging()&&!this.getParent()&&!this.isInFlyout){var t=this.workspace.getGrid();if(t&&t.shouldSnap()){var n=t.getSpacing(),r=n/2,s=this.getRelativeToSurfaceXY();t=Math.round((s.x-r)/n)*n+r-s.x,n=Math.round((s.y-r)/n)*n+r-s.y,t=Math.round(t),n=Math.round(n),0==t&&0==n||this.moveBy(t,n)}}},e.BlockSvg.prototype.getBoundingRectangle=function(){var t=this.getRelativeToSurfaceXY(),n=this.getHeightWidth();if(this.RTL)var r=t.x-n.width,s=t.x;else r=t.x,s=t.x+n.width;return new e.utils.Rect(t.y,t.y+n.height,r,s)},e.BlockSvg.prototype.markDirty=function(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(var n,t=0;n=this.inputList[t];t++)n.markDirty()},e.BlockSvg.prototype.setCollapsed=function(t){this.collapsed_!=t&&(e.BlockSvg.superClass_.setCollapsed.call(this,t),t?this.rendered&&this.render():this.updateCollapsed_())},e.BlockSvg.prototype.updateCollapsed_=function(){for(var u,t=this.isCollapsed(),n=e.constants.COLLAPSED_INPUT_NAME,r=e.constants.COLLAPSED_FIELD_NAME,s=0;u=this.inputList[s];s++)u.name!=n&&u.setVisible(!t);if(t){for(u=this.getIcons(),s=0;t=u[s];s++)t.setVisible(!1);s=this.toString(e.COLLAPSE_CHARS),(u=this.getField(r))?u.setValue(s):(u=this.getInput(n)||this.appendDummyInput(n)).appendField(new e.FieldLabel(s),r)}else this.updateDisabled(),this.removeInput(n)},e.BlockSvg.prototype.tab=function(t,n){var r=new e.TabNavigateCursor;r.setCurNode(e.ASTNode.createFieldNode(t)),t=r.getCurNode(),n?r.next():r.prev(),(n=r.getCurNode())&&n!==t&&(n.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(n))},e.BlockSvg.prototype.onMouseDown_=function(t){var n=this.workspace&&this.workspace.getGesture(t);n&&n.handleBlockStart(t,this)},e.BlockSvg.prototype.showHelp=function(){var t="function"==typeof this.helpUrl?this.helpUrl():this.helpUrl;t&&window.open(t)},e.BlockSvg.prototype.generateContextMenu=function(){if(this.workspace.options.readOnly||!this.contextMenu)return null;var t=e.ContextMenuRegistry.registry.getContextMenuOptions(e.ContextMenuRegistry.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(t),t},e.BlockSvg.prototype.showContextMenu=function(t){var n=this.generateContextMenu();n&&n.length&&(e.ContextMenu.show(t,n,this.RTL),e.ContextMenu.currentBlock=this)},e.BlockSvg.prototype.moveConnections=function(t,n){if(this.rendered){for(var r=this.getConnections_(!1),s=0;s<r.length;s++)r[s].moveBy(t,n);for(r=this.getIcons(),s=0;s<r.length;s++)r[s].computeIconLocation();for(s=0;s<this.childBlocks_.length;s++)this.childBlocks_[s].moveConnections(t,n)}},e.BlockSvg.prototype.setDragging=function(t){if(t){var n=this.getSvgRoot();n.translate_="",n.skew_="",e.draggingConnections=e.draggingConnections.concat(this.getConnections_(!0)),e.utils.dom.addClass(this.svgGroup_,"blocklyDragging")}else e.draggingConnections=[],e.utils.dom.removeClass(this.svgGroup_,"blocklyDragging");for(n=0;n<this.childBlocks_.length;n++)this.childBlocks_[n].setDragging(t)},e.BlockSvg.prototype.setMovable=function(t){e.BlockSvg.superClass_.setMovable.call(this,t),this.pathObject.updateMovable(t)},e.BlockSvg.prototype.setEditable=function(t){e.BlockSvg.superClass_.setEditable.call(this,t),t=this.getIcons();for(var n=0;n<t.length;n++)t[n].updateEditable()},e.BlockSvg.prototype.setShadow=function(t){e.BlockSvg.superClass_.setShadow.call(this,t),this.applyColour()},e.BlockSvg.prototype.setInsertionMarker=function(t){this.isInsertionMarker_!=t&&(this.isInsertionMarker_=t)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))},e.BlockSvg.prototype.getSvgRoot=function(){return this.svgGroup_},e.BlockSvg.prototype.dispose=function(t,n){if(this.workspace){e.Tooltip.dispose(),e.Tooltip.unbindMouseEvents(this.pathObject.svgPath),e.utils.dom.startTextWidthCache();var r=this.workspace;if(e.selected==this&&(this.unselect(),this.workspace.cancelCurrentGesture()),e.ContextMenu.currentBlock==this&&e.ContextMenu.hide(),n&&this.rendered&&(this.unplug(t),e.blockAnimations.disposeUiEffect(this)),this.rendered=!1,this.warningTextDb_){for(var s in this.warningTextDb_)clearTimeout(this.warningTextDb_[s]);this.warningTextDb_=null}for(n=this.getIcons(),s=0;s<n.length;s++)n[s].dispose();e.BlockSvg.superClass_.dispose.call(this,!!t),e.utils.dom.removeNode(this.svgGroup_),r.resizeContents(),this.svgGroup_=null,e.utils.dom.stopTextWidthCache()}},e.BlockSvg.prototype.toCopyData=function(){if(this.isInsertionMarker_)return null;var t=e.Xml.blockToDom(this,!0);e.Xml.deleteNext(t);var n=this.getRelativeToSurfaceXY();return t.setAttribute("x",this.RTL?-n.x:n.x),t.setAttribute("y",n.y),{xml:t,source:this.workspace,typeCounts:e.utils.getBlockTypeCounts(this,!0)}},e.BlockSvg.prototype.applyColour=function(){this.pathObject.applyColour(this);for(var t=this.getIcons(),n=0;n<t.length;n++)t[n].applyColour();for(t=0;n=this.inputList[t];t++)for(var s,r=0;s=n.fieldRow[r];r++)s.applyColour()},e.BlockSvg.prototype.updateDisabled=function(){var t=this.getChildren(!1);if(this.applyColour(),!this.isCollapsed())for(var r,n=0;r=t[n];n++)r.rendered&&r.updateDisabled()},e.BlockSvg.prototype.getCommentIcon=function(){return this.commentIcon_},e.BlockSvg.prototype.setCommentText=function(t){if(!e.Comment)throw Error("Missing require for Blockly.Comment");this.commentModel.text!=t&&(e.BlockSvg.superClass_.setCommentText.call(this,t),!!this.commentIcon_==(t=null!=t)?this.commentIcon_.updateText():(t?this.comment=this.commentIcon_=new e.Comment(this):(this.commentIcon_.dispose(),this.comment=this.commentIcon_=null),this.rendered&&(this.render(),this.bumpNeighbours())))},e.BlockSvg.prototype.setWarningText=function(t,n){if(!e.Warning)throw Error("Missing require for Blockly.Warning");this.warningTextDb_||(this.warningTextDb_=Object.create(null));var r=n||"";if(r)this.warningTextDb_[r]&&(clearTimeout(this.warningTextDb_[r]),delete this.warningTextDb_[r]);else for(var s in this.warningTextDb_)clearTimeout(this.warningTextDb_[s]),delete this.warningTextDb_[s];if(this.workspace.isDragging()){var u=this;this.warningTextDb_[r]=setTimeout(function(){u.workspace&&(delete u.warningTextDb_[r],u.setWarningText(t,r))},100)}else{if(this.isInFlyout&&(t=null),n=!1,"string"==typeof t){s=this.getSurroundParent();for(var b=null;s;)s.isCollapsed()&&(b=s),s=s.getSurroundParent();b&&b.setWarningText(e.Msg.COLLAPSED_WARNINGS_WARNING,e.BlockSvg.COLLAPSED_WARNING_ID),this.warning||(this.warning=new e.Warning(this),n=!0),this.warning.setText(t,r)}else this.warning&&!r?(this.warning.dispose(),n=!0):this.warning&&(n=this.warning.getText(),this.warning.setText("",r),(s=this.warning.getText())||this.warning.dispose(),n=n!=s);n&&this.rendered&&(this.render(),this.bumpNeighbours())}},e.BlockSvg.prototype.setMutator=function(t){this.mutator&&this.mutator!==t&&this.mutator.dispose(),t&&(t.setBlock(this),this.mutator=t,t.createIcon()),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.setEnabled=function(t){this.isEnabled()!=t&&(e.BlockSvg.superClass_.setEnabled.call(this,t),this.rendered&&!this.getInheritedDisabled()&&this.updateDisabled())},e.BlockSvg.prototype.setHighlighted=function(t){this.rendered&&this.pathObject.updateHighlighted(t)},e.BlockSvg.prototype.addSelect=function(){this.pathObject.updateSelected(!0)},e.BlockSvg.prototype.removeSelect=function(){this.pathObject.updateSelected(!1)},e.BlockSvg.prototype.setDeleteStyle=function(t){this.pathObject.updateDraggingDelete(t)},e.BlockSvg.prototype.getColour=function(){return this.style.colourPrimary},e.BlockSvg.prototype.setColour=function(t){e.BlockSvg.superClass_.setColour.call(this,t),t=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(t.style),this.style=t.style,this.styleName_=t.name,this.applyColour()},e.BlockSvg.prototype.setStyle=function(t){var n=this.workspace.getRenderer().getConstants().getBlockStyle(t);if(this.styleName_=t,!n)throw Error("Invalid style name: "+t);this.hat=n.hat,this.pathObject.setStyle(n),this.colour_=n.colourPrimary,this.style=n,this.applyColour()},e.BlockSvg.prototype.bringToFront=function(){var t=this;do{var n=t.getSvgRoot(),r=n.parentNode,s=r.childNodes;s[s.length-1]!==n&&r.appendChild(n),t=t.getParent()}while(t)},e.BlockSvg.prototype.setPreviousStatement=function(t,n){e.BlockSvg.superClass_.setPreviousStatement.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.setNextStatement=function(t,n){e.BlockSvg.superClass_.setNextStatement.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.setOutput=function(t,n){e.BlockSvg.superClass_.setOutput.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.setInputsInline=function(t){e.BlockSvg.superClass_.setInputsInline.call(this,t),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.removeInput=function(t,n){return t=e.BlockSvg.superClass_.removeInput.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours()),t},e.BlockSvg.prototype.moveNumberedInputBefore=function(t,n){e.BlockSvg.superClass_.moveNumberedInputBefore.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.appendInput_=function(t,n){return t=e.BlockSvg.superClass_.appendInput_.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours()),t},e.BlockSvg.prototype.setConnectionTracking=function(t){if(this.previousConnection&&this.previousConnection.setTracking(t),this.outputConnection&&this.outputConnection.setTracking(t),this.nextConnection){this.nextConnection.setTracking(t);var n=this.nextConnection.targetBlock();n&&n.setConnectionTracking(t)}if(!this.collapsed_)for(n=0;n<this.inputList.length;n++){var r=this.inputList[n].connection;r&&(r.setTracking(t),(r=r.targetBlock())&&r.setConnectionTracking(t))}},e.BlockSvg.prototype.getConnections_=function(t){var n=[];if((t||this.rendered)&&(this.outputConnection&&n.push(this.outputConnection),this.previousConnection&&n.push(this.previousConnection),this.nextConnection&&n.push(this.nextConnection),t||!this.collapsed_)){t=0;for(var r;r=this.inputList[t];t++)r.connection&&n.push(r.connection)}return n},e.BlockSvg.prototype.lastConnectionInStack=function(t){return e.BlockSvg.superClass_.lastConnectionInStack.call(this,t)},e.BlockSvg.prototype.getMatchingConnection=function(t,n){return e.BlockSvg.superClass_.getMatchingConnection.call(this,t,n)},e.BlockSvg.prototype.makeConnection_=function(t){return new e.RenderedConnection(this,t)},e.BlockSvg.prototype.bumpNeighbours=function(){if(this.workspace&&!this.workspace.isDragging()){var t=this.getRootBlock();if(!t.isInFlyout)for(var s,n=this.getConnections_(!1),r=0;s=n[r];r++){s.isConnected()&&s.isSuperior()&&s.targetBlock().bumpNeighbours();for(var x,u=s.neighbours(e.SNAP_RADIUS),b=0;x=u[b];b++)s.isConnected()&&x.isConnected()||x.getSourceBlock().getRootBlock()!=t&&(s.isSuperior()?x.bumpAwayFrom(s):s.bumpAwayFrom(x))}}},e.BlockSvg.prototype.scheduleSnapAndBump=function(){var t=this,n=e.Events.getGroup();setTimeout(function(){e.Events.setGroup(n),t.snapToGrid(),e.Events.setGroup(!1)},e.BUMP_DELAY/2),setTimeout(function(){e.Events.setGroup(n),t.bumpNeighbours(),e.Events.setGroup(!1)},e.BUMP_DELAY)},e.BlockSvg.prototype.positionNearConnection=function(t,n){t.type!=e.connectionTypes.NEXT_STATEMENT&&t.type!=e.connectionTypes.INPUT_VALUE||this.moveBy(n.x-t.x,n.y-t.y)},e.BlockSvg.prototype.getParent=function(){return e.BlockSvg.superClass_.getParent.call(this)},e.BlockSvg.prototype.getRootBlock=function(){return e.BlockSvg.superClass_.getRootBlock.call(this)},e.BlockSvg.prototype.render=function(t){if(!this.renderIsInProgress_){this.renderIsInProgress_=!0;try{if(this.rendered=!0,e.utils.dom.startTextWidthCache(),this.isCollapsed()&&this.updateCollapsed_(),this.workspace.getRenderer().render(this),this.updateConnectionLocations_(),!1!==t){var n=this.getParent();n?n.render(!0):this.workspace.resizeContents()}e.utils.dom.stopTextWidthCache(),this.updateMarkers_()}finally{this.renderIsInProgress_=!1}}},e.BlockSvg.prototype.updateMarkers_=function(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(e.MarkerManager.LOCAL_MARKER).draw()},e.BlockSvg.prototype.updateConnectionLocations_=function(){var t=this.getRelativeToSurfaceXY();this.previousConnection&&this.previousConnection.moveToOffset(t),this.outputConnection&&this.outputConnection.moveToOffset(t);for(var n=0;n<this.inputList.length;n++){var r=this.inputList[n].connection;r&&(r.moveToOffset(t),r.isConnected()&&r.tighten())}this.nextConnection&&(this.nextConnection.moveToOffset(t),this.nextConnection.isConnected()&&this.nextConnection.tighten())},e.BlockSvg.prototype.setCursorSvg=function(t){this.pathObject.setCursorSvg(t)},e.BlockSvg.prototype.setMarkerSvg=function(t){this.pathObject.setMarkerSvg(t)},e.BlockSvg.prototype.getHeightWidth=function(){var t=this.height,n=this.width,r=this.getNextBlock();if(r){r=r.getHeightWidth();var s=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;t+=r.height-s,n=Math.max(n,r.width)}return{height:t,width:n}},e.BlockSvg.prototype.fadeForReplacement=function(t){this.pathObject.updateReplacementFade(t)},e.BlockSvg.prototype.highlightShapeForInput=function(t,n){this.pathObject.updateShapeForInputHighlight(t,n)},e.ConnectionDB=function(t){this.connections_=[],this.connectionChecker_=t},e.ConnectionDB.prototype.addConnection=function(t,n){n=this.calculateIndexForYPos_(n),this.connections_.splice(n,0,t)},e.ConnectionDB.prototype.findIndexOfConnection_=function(t,n){if(!this.connections_.length)return-1;var r=this.calculateIndexForYPos_(n);if(r>=this.connections_.length)return-1;n=t.y;for(var s=r;0<=s&&this.connections_[s].y==n;){if(this.connections_[s]==t)return s;s--}for(s=r;s<this.connections_.length&&this.connections_[s].y==n;){if(this.connections_[s]==t)return s;s++}return-1},e.ConnectionDB.prototype.calculateIndexForYPos_=function(t){if(!this.connections_.length)return 0;for(var n=0,r=this.connections_.length;n<r;){var s=Math.floor((n+r)/2);if(this.connections_[s].y<t)n=s+1;else{if(!(this.connections_[s].y>t)){n=s;break}r=s}}return n},e.ConnectionDB.prototype.removeConnection=function(t,n){if(-1==(t=this.findIndexOfConnection_(t,n)))throw Error("Unable to find connection in connectionDB.");this.connections_.splice(t,1)},e.ConnectionDB.prototype.getNeighbours=function(t,n){function r(ot){var et=u-s[ot].x,Tt=b-s[ot].y;return Math.sqrt(et*et+Tt*Tt)<=n&&Z.push(s[ot]),Tt<n}var s=this.connections_,u=t.x,b=t.y;t=0;for(var x=s.length-2,B=x;t<B;)s[B].y<b?t=B:x=B,B=Math.floor((t+x)/2);var Z=[];if(x=t=B,s.length){for(;0<=t&&r(t);)t--;do{x++}while(x<s.length&&r(x))}return Z},e.ConnectionDB.prototype.isInYRange_=function(t,n,r){return Math.abs(this.connections_[t].y-n)<=r},e.ConnectionDB.prototype.searchForClosest=function(t,n,r){if(!this.connections_.length)return{connection:null,radius:n};var s=t.y,u=t.x;t.x=u+r.x,t.y=s+r.y;var b=this.calculateIndexForYPos_(t.y);r=null;for(var B,x=n,Z=b-1;0<=Z&&this.isInYRange_(Z,t.y,n);)this.connectionChecker_.canConnect(t,B=this.connections_[Z],!0,x)&&(r=B,x=B.distanceFrom(t)),Z--;for(;b<this.connections_.length&&this.isInYRange_(b,t.y,n);)this.connectionChecker_.canConnect(t,B=this.connections_[b],!0,x)&&(r=B,x=B.distanceFrom(t)),b++;return t.x=u,t.y=s,{connection:r,radius:x}},e.ConnectionDB.init=function(t){var n=[];return n[e.connectionTypes.INPUT_VALUE]=new e.ConnectionDB(t),n[e.connectionTypes.OUTPUT_VALUE]=new e.ConnectionDB(t),n[e.connectionTypes.NEXT_STATEMENT]=new e.ConnectionDB(t),n[e.connectionTypes.PREVIOUS_STATEMENT]=new e.ConnectionDB(t),n},e.Events.ThemeChange=function(t,n){e.Events.ThemeChange.superClass_.constructor.call(this,n),this.themeName=t},e.utils.object.inherits(e.Events.ThemeChange,e.Events.UiBase),e.Events.ThemeChange.prototype.type=e.Events.THEME_CHANGE,e.Events.ThemeChange.prototype.toJson=function(){var t=e.Events.ThemeChange.superClass_.toJson.call(this);return t.themeName=this.themeName,t},e.Events.ThemeChange.prototype.fromJson=function(t){e.Events.ThemeChange.superClass_.fromJson.call(this,t),this.themeName=t.themeName},e.registry.register(e.registry.Type.EVENT,e.Events.THEME_CHANGE,e.Events.ThemeChange),e.Events.ViewportChange=function(t,n,r,s,u){e.Events.ViewportChange.superClass_.constructor.call(this,s),this.viewTop=t,this.viewLeft=n,this.scale=r,this.oldScale=u},e.utils.object.inherits(e.Events.ViewportChange,e.Events.UiBase),e.Events.ViewportChange.prototype.type=e.Events.VIEWPORT_CHANGE,e.Events.ViewportChange.prototype.toJson=function(){var t=e.Events.ViewportChange.superClass_.toJson.call(this);return t.viewTop=this.viewTop,t.viewLeft=this.viewLeft,t.scale=this.scale,t.oldScale=this.oldScale,t},e.Events.ViewportChange.prototype.fromJson=function(t){e.Events.ViewportChange.superClass_.fromJson.call(this,t),this.viewTop=t.viewTop,this.viewLeft=t.viewLeft,this.scale=t.scale,this.oldScale=t.oldScale},e.registry.register(e.registry.Type.EVENT,e.Events.VIEWPORT_CHANGE,e.Events.ViewportChange),e.IMetricsManager=function(){},e.MetricsManager=function(t){this.workspace_=t},e.MetricsManager.prototype.getDimensionsPx_=function(t){var n=0,r=0;return t&&(n=t.getWidth(),r=t.getHeight()),new e.utils.Size(n,r)},e.MetricsManager.prototype.getFlyoutMetrics=function(t){return{width:(t=this.getDimensionsPx_(this.workspace_.getFlyout(t))).width,height:t.height,position:this.workspace_.toolboxPosition}},e.MetricsManager.prototype.getToolboxMetrics=function(){var t=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:t.width,height:t.height,position:this.workspace_.toolboxPosition}},e.MetricsManager.prototype.getSvgMetrics=function(){return this.workspace_.getCachedParentSvgSize()},e.MetricsManager.prototype.getAbsoluteMetrics=function(){var t=0,n=this.getToolboxMetrics(),r=this.getFlyoutMetrics(!0),s=!!this.workspace_.getToolbox(),u=!!this.workspace_.getFlyout(!0),b=s?n.position:r.position,x=b==e.utils.toolbox.Position.LEFT;return b=b==e.utils.toolbox.Position.TOP,s&&x?t=n.width:u&&x&&(t=r.width),x=0,s&&b?x=n.height:u&&b&&(x=r.height),{top:x,left:t}},e.MetricsManager.prototype.getViewMetrics=function(t){t=t?this.workspace_.scale:1;var n=this.getSvgMetrics(),r=this.getToolboxMetrics(),s=this.getFlyoutMetrics(!0),u=this.workspace_.getToolbox()?r.position:s.position;return this.workspace_.getToolbox()?u==e.utils.toolbox.Position.TOP||u==e.utils.toolbox.Position.BOTTOM?n.height-=r.height:(u==e.utils.toolbox.Position.LEFT||u==e.utils.toolbox.Position.RIGHT)&&(n.width-=r.width):this.workspace_.getFlyout(!0)&&(u==e.utils.toolbox.Position.TOP||u==e.utils.toolbox.Position.BOTTOM?n.height-=s.height:(u==e.utils.toolbox.Position.LEFT||u==e.utils.toolbox.Position.RIGHT)&&(n.width-=s.width)),{height:n.height/t,width:n.width/t,top:-this.workspace_.scrollY/t,left:-this.workspace_.scrollX/t}},e.MetricsManager.prototype.getContentMetrics=function(t){t=t?1:this.workspace_.scale;var n=this.workspace_.getBlocksBoundingBox();return{height:(n.bottom-n.top)*t,width:(n.right-n.left)*t,top:n.top*t,left:n.left*t}},e.MetricsManager.prototype.hasFixedEdges=function(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()},e.MetricsManager.prototype.getComputedFixedEdges_=function(t){if(!this.hasFixedEdges())return{};var n=this.workspace_.isMovableHorizontally(),r=this.workspace_.isMovableVertically();t=t||this.getViewMetrics(!1);var s={};return r||(s.top=t.top,s.bottom=t.top+t.height),n||(s.left=t.left,s.right=t.left+t.width),s},e.MetricsManager.prototype.getPaddedContent_=function(t,n){var r=n.top+n.height,s=n.left+n.width,u=t.width,b=u/2,x=(t=t.height)/2;return{top:Math.min(n.top-x,r-t),bottom:Math.max(r+x,n.top+t),left:Math.min(n.left-b,s-u),right:Math.max(s+b,n.left+u)}},e.MetricsManager.prototype.getScrollMetrics=function(t,n,r){t=t?this.workspace_.scale:1,n=n||this.getViewMetrics(!1);var s=r||this.getContentMetrics();r=this.getComputedFixedEdges_(n),n=this.getPaddedContent_(n,s);var u=void 0!==r.left?r.left:n.left;return{top:(s=void 0!==r.top?r.top:n.top)/t,left:u/t,width:((void 0!==r.right?r.right:n.right)-u)/t,height:((void 0!==r.bottom?r.bottom:n.bottom)-s)/t}},e.MetricsManager.prototype.getUiMetrics=function(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}},e.MetricsManager.prototype.getMetrics=function(){var t=this.getToolboxMetrics(),n=this.getFlyoutMetrics(!0),r=this.getSvgMetrics(),s=this.getAbsoluteMetrics(),u=this.getViewMetrics(),b=this.getContentMetrics(),x=this.getScrollMetrics(!1,u,b);return{contentHeight:b.height,contentWidth:b.width,contentTop:b.top,contentLeft:b.left,scrollHeight:x.height,scrollWidth:x.width,scrollTop:x.top,scrollLeft:x.left,viewHeight:u.height,viewWidth:u.width,viewTop:u.top,viewLeft:u.left,absoluteTop:s.top,absoluteLeft:s.left,svgHeight:r.height,svgWidth:r.width,toolboxWidth:t.width,toolboxHeight:t.height,toolboxPosition:t.position,flyoutWidth:n.width,flyoutHeight:n.height}},e.registry.register(e.registry.Type.METRICS_MANAGER,e.registry.DEFAULT,e.MetricsManager),e.FlyoutMetricsManager=function(t,n){this.flyout_=n,e.FlyoutMetricsManager.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.FlyoutMetricsManager,e.MetricsManager),e.FlyoutMetricsManager.prototype.getBoundingBox_=function(){try{var t=this.workspace_.getCanvas().getBBox()}catch(n){t={height:0,y:0,width:0,x:0}}return t},e.FlyoutMetricsManager.prototype.getContentMetrics=function(t){var n=this.getBoundingBox_();return{height:n.height*(t=t?1:this.workspace_.scale),width:n.width*t,top:n.y*t,left:n.x*t}},e.FlyoutMetricsManager.prototype.getScrollMetrics=function(t,n,r){return{height:((n=r||this.getContentMetrics()).height+2*(r=this.flyout_.MARGIN*this.workspace_.scale))/(t=t?this.workspace_.scale:1),width:(n.width+n.left+r)/t,top:0,left:0}},e.ThemeManager=function(t,n){this.workspace_=t,this.theme_=n,this.subscribedWorkspaces_=[],this.componentDB_=Object.create(null)},e.ThemeManager.prototype.getTheme=function(){return this.theme_},e.ThemeManager.prototype.setTheme=function(t){var r,n=this.theme_;for(this.theme_=t,(t=this.workspace_.getInjectionDiv())&&(n&&e.utils.dom.removeClass(t,n.getClassName()),e.utils.dom.addClass(t,this.theme_.getClassName())),n=0;t=this.subscribedWorkspaces_[n];n++)t.refreshTheme();for(n=0,t=Object.keys(this.componentDB_);r=t[n];n++)for(var u,s=0;u=this.componentDB_[r][s];s++){var b=u.element;u=u.propertyName;var x=this.theme_&&this.theme_.getComponentStyle(r);b.style[u]=x||""}e.hideChaff()},e.ThemeManager.prototype.subscribeWorkspace=function(t){this.subscribedWorkspaces_.push(t)},e.ThemeManager.prototype.unsubscribeWorkspace=function(t){if(0>(t=this.subscribedWorkspaces_.indexOf(t)))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.");this.subscribedWorkspaces_.splice(t,1)},e.ThemeManager.prototype.subscribe=function(t,n,r){this.componentDB_[n]||(this.componentDB_[n]=[]),this.componentDB_[n].push({element:t,propertyName:r}),n=this.theme_&&this.theme_.getComponentStyle(n),t.style[r]=n||""},e.ThemeManager.prototype.unsubscribe=function(t){if(t)for(var s,n=Object.keys(this.componentDB_),r=0;s=n[r];r++){for(var u=this.componentDB_[s],b=u.length-1;0<=b;b--)u[b].element===t&&u.splice(b,1);this.componentDB_[s].length||delete this.componentDB_[s]}},e.ThemeManager.prototype.dispose=function(){this.componentDB_=this.subscribedWorkspaces_=this.theme_=this.owner_=null},e.TouchGesture=function(t,n){e.TouchGesture.superClass_.constructor.call(this,t,n),this.isMultiTouch_=!1,this.cachedPoints_=Object.create(null),this.startDistance_=this.previousScale_=0,this.isPinchZoomEnabled_=this.onStartWrapper_=null},e.utils.object.inherits(e.TouchGesture,e.Gesture),e.TouchGesture.ZOOM_IN_MULTIPLIER=5,e.TouchGesture.ZOOM_OUT_MULTIPLIER=6,e.TouchGesture.prototype.doStart=function(t){this.isPinchZoomEnabled_=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,e.TouchGesture.superClass_.doStart.call(this,t),!this.isEnding_&&e.Touch.isTouchEvent(t)&&this.handleTouchStart(t)},e.TouchGesture.prototype.bindMouseEvents=function(t){this.onStartWrapper_=e.browserEvents.conditionalBind(document,"mousedown",null,this.handleStart.bind(this),!0),this.onMoveWrapper_=e.browserEvents.conditionalBind(document,"mousemove",null,this.handleMove.bind(this),!0),this.onUpWrapper_=e.browserEvents.conditionalBind(document,"mouseup",null,this.handleUp.bind(this),!0),t.preventDefault(),t.stopPropagation()},e.TouchGesture.prototype.handleStart=function(t){!this.isDragging()&&e.Touch.isTouchEvent(t)&&(this.handleTouchStart(t),this.isMultiTouch()&&e.longStop_())},e.TouchGesture.prototype.handleMove=function(t){this.isDragging()?e.Touch.shouldHandleEvent(t)&&e.TouchGesture.superClass_.handleMove.call(this,t):this.isMultiTouch()?(e.Touch.isTouchEvent(t)&&this.handleTouchMove(t),e.longStop_()):e.TouchGesture.superClass_.handleMove.call(this,t)},e.TouchGesture.prototype.handleUp=function(t){e.Touch.isTouchEvent(t)&&!this.isDragging()&&this.handleTouchEnd(t),!this.isMultiTouch()||this.isDragging()?e.Touch.shouldHandleEvent(t)&&e.TouchGesture.superClass_.handleUp.call(this,t):(t.preventDefault(),t.stopPropagation(),this.dispose())},e.TouchGesture.prototype.isMultiTouch=function(){return this.isMultiTouch_},e.TouchGesture.prototype.dispose=function(){e.TouchGesture.superClass_.dispose.call(this),this.onStartWrapper_&&e.browserEvents.unbind(this.onStartWrapper_)},e.TouchGesture.prototype.handleTouchStart=function(t){var n=e.Touch.getTouchIdentifierFromEvent(t);this.cachedPoints_[n]=this.getTouchPoint(t),2==(n=Object.keys(this.cachedPoints_)).length&&(this.startDistance_=e.utils.Coordinate.distance(this.cachedPoints_[n[0]],this.cachedPoints_[n[1]]),this.isMultiTouch_=!0,t.preventDefault())},e.TouchGesture.prototype.handleTouchMove=function(t){var n=e.Touch.getTouchIdentifierFromEvent(t);this.cachedPoints_[n]=this.getTouchPoint(t),n=Object.keys(this.cachedPoints_),this.isPinchZoomEnabled_&&2===n.length?this.handlePinch_(t):e.TouchGesture.superClass_.handleMove.call(this,t)},e.TouchGesture.prototype.handlePinch_=function(t){var n=Object.keys(this.cachedPoints_);if(n=e.utils.Coordinate.distance(this.cachedPoints_[n[0]],this.cachedPoints_[n[1]])/this.startDistance_,0<this.previousScale_&&1/0>this.previousScale_){var r=n-this.previousScale_;r=0<r?r*e.TouchGesture.ZOOM_IN_MULTIPLIER:r*e.TouchGesture.ZOOM_OUT_MULTIPLIER;var s=this.startWorkspace_,u=e.utils.mouseToSvg(t,s.getParentSvg(),s.getInverseScreenCTM());s.zoom(u.x,u.y,r)}this.previousScale_=n,t.preventDefault()},e.TouchGesture.prototype.handleTouchEnd=function(t){t=e.Touch.getTouchIdentifierFromEvent(t),this.cachedPoints_[t]&&delete this.cachedPoints_[t],2>Object.keys(this.cachedPoints_).length&&(this.cachedPoints_=Object.create(null),this.previousScale_=0)},e.TouchGesture.prototype.getTouchPoint=function(t){return this.startWorkspace_?new e.utils.Coordinate(t.pageX?t.pageX:t.changedTouches[0].pageX,t.pageY?t.pageY:t.changedTouches[0].pageY):null},e.WorkspaceAudio=function(t){this.parentWorkspace_=t,this.SOUNDS_=Object.create(null)},e.WorkspaceAudio.prototype.lastSound_=null,e.WorkspaceAudio.prototype.dispose=function(){this.SOUNDS_=this.parentWorkspace_=null},e.WorkspaceAudio.prototype.load=function(t,n){if(t.length){try{var r=new e.utils.global.Audio}catch(B){return}for(var s,u=0;u<t.length;u++){var b=t[u],x=b.match(/\.(\w+)$/);if(x&&r.canPlayType("audio/"+x[1])){s=new e.utils.global.Audio(b);break}}s&&s.play&&(this.SOUNDS_[n]=s)}},e.WorkspaceAudio.prototype.preload=function(){for(var t in this.SOUNDS_){var n=this.SOUNDS_[t];n.volume=.01;var r=n.play();if(void 0!==r?r.then(n.pause).catch(function(){}):n.pause(),e.utils.userAgent.IPAD||e.utils.userAgent.IPHONE)break}},e.WorkspaceAudio.prototype.play=function(t,n){var r=this.SOUNDS_[t];r?(t=new Date,null!=this.lastSound_&&t-this.lastSound_<e.SOUND_LIMIT||(this.lastSound_=t,(r=e.utils.userAgent.IPAD||e.utils.userAgent.ANDROID?r:r.cloneNode()).volume=void 0===n?1:n,r.play())):this.parentWorkspace_&&this.parentWorkspace_.getAudioManager().play(t,n)},e.WorkspaceSvg=function(t,n,r){e.WorkspaceSvg.superClass_.constructor.call(this,t),this.metricsManager_=new(e.registry.getClassFromOptions(e.registry.Type.METRICS_MANAGER,t,!0))(this),this.getMetrics=t.getMetrics||this.metricsManager_.getMetrics.bind(this.metricsManager_),this.setMetrics=t.setMetrics||e.WorkspaceSvg.setTopLevelWorkspaceMetrics_,this.componentManager_=new e.ComponentManager,this.connectionDBList=e.ConnectionDB.init(this.connectionChecker),n&&(this.blockDragSurface_=n),r&&(this.workspaceDragSurface_=r),this.useWorkspaceDragSurface_=!!this.workspaceDragSurface_&&e.utils.is3dSupported(),this.highlightedBlocks_=[],this.audioManager_=new e.WorkspaceAudio(t.parentWorkspace),this.grid_=this.options.gridPattern?new e.Grid(this.options.gridPattern,t.gridOptions):null,this.markerManager_=new e.MarkerManager(this),this.toolboxCategoryCallbacks_=Object.create(null),this.flyoutButtonCallbacks_=Object.create(null),e.Variables&&e.Variables.flyoutCategory&&this.registerToolboxCategoryCallback(e.VARIABLE_CATEGORY_NAME,e.Variables.flyoutCategory),e.VariablesDynamic&&e.VariablesDynamic.flyoutCategory&&this.registerToolboxCategoryCallback(e.VARIABLE_DYNAMIC_CATEGORY_NAME,e.VariablesDynamic.flyoutCategory),e.Procedures&&e.Procedures.flyoutCategory&&(this.registerToolboxCategoryCallback(e.PROCEDURE_CATEGORY_NAME,e.Procedures.flyoutCategory),this.addChangeListener(e.Procedures.mutatorOpenListener)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new e.ThemeManager(this,this.options.theme||e.Themes.Classic),this.themeManager_.subscribeWorkspace(this),this.renderer_=e.blockRendering.init(this.options.renderer||"geras",this.getTheme(),this.options.rendererOverrides),this.cachedParentSvg_=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements_=[],this.dragTargetAreas_=[],this.cachedParentSvgSize_=new e.utils.Size(0,0)},e.utils.object.inherits(e.WorkspaceSvg,e.Workspace),e.WorkspaceSvg.prototype.resizeHandlerWrapper_=null,e.WorkspaceSvg.prototype.rendered=!0,e.WorkspaceSvg.prototype.isVisible_=!0,e.WorkspaceSvg.prototype.isFlyout=!1,e.WorkspaceSvg.prototype.isMutator=!1,e.WorkspaceSvg.prototype.resizesEnabled_=!0,e.WorkspaceSvg.prototype.scrollX=0,e.WorkspaceSvg.prototype.scrollY=0,e.WorkspaceSvg.prototype.startScrollX=0,e.WorkspaceSvg.prototype.startScrollY=0,e.WorkspaceSvg.prototype.dragDeltaXY_=null,e.WorkspaceSvg.prototype.scale=1,e.WorkspaceSvg.prototype.oldScale_=1,e.WorkspaceSvg.prototype.oldTop_=0,e.WorkspaceSvg.prototype.oldLeft_=0,e.WorkspaceSvg.prototype.trashcan=null,e.WorkspaceSvg.prototype.scrollbar=null,e.WorkspaceSvg.prototype.flyout_=null,e.WorkspaceSvg.prototype.toolbox_=null,e.WorkspaceSvg.prototype.currentGesture_=null,e.WorkspaceSvg.prototype.blockDragSurface_=null,e.WorkspaceSvg.prototype.workspaceDragSurface_=null,e.WorkspaceSvg.prototype.useWorkspaceDragSurface_=!1,e.WorkspaceSvg.prototype.isDragSurfaceActive_=!1,e.WorkspaceSvg.prototype.injectionDiv_=null,e.WorkspaceSvg.prototype.lastRecordedPageScroll_=null,e.WorkspaceSvg.prototype.targetWorkspace=null,e.WorkspaceSvg.prototype.inverseScreenCTM_=null,e.WorkspaceSvg.prototype.inverseScreenCTMDirty_=!0,e.WorkspaceSvg.prototype.getMarkerManager=function(){return this.markerManager_},e.WorkspaceSvg.prototype.getMetricsManager=function(){return this.metricsManager_},e.WorkspaceSvg.prototype.setMetricsManager=function(t){this.metricsManager_=t,this.getMetrics=this.metricsManager_.getMetrics.bind(this.metricsManager_)},e.WorkspaceSvg.prototype.getComponentManager=function(){return this.componentManager_},e.WorkspaceSvg.prototype.setCursorSvg=function(t){this.markerManager_.setCursorSvg(t)},e.WorkspaceSvg.prototype.setMarkerSvg=function(t){this.markerManager_.setMarkerSvg(t)},e.WorkspaceSvg.prototype.getMarker=function(t){return this.markerManager_?this.markerManager_.getMarker(t):null},e.WorkspaceSvg.prototype.getCursor=function(){return this.markerManager_?this.markerManager_.getCursor():null},e.WorkspaceSvg.prototype.getRenderer=function(){return this.renderer_},e.WorkspaceSvg.prototype.getThemeManager=function(){return this.themeManager_},e.WorkspaceSvg.prototype.getTheme=function(){return this.themeManager_.getTheme()},e.WorkspaceSvg.prototype.setTheme=function(t){t||(t=e.Themes.Classic),this.themeManager_.setTheme(t)},e.WorkspaceSvg.prototype.refreshTheme=function(){this.svgGroup_&&this.renderer_.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles_(this.getAllBlocks(!1).filter(function(n){return!!n.getStyleName()})),this.refreshToolboxSelection(),this.toolbox_&&this.toolbox_.refreshTheme(),this.isVisible()&&this.setVisible(!0);var t=new(e.Events.get(e.Events.THEME_CHANGE))(this.getTheme().name,this.id);e.Events.fire(t)},e.WorkspaceSvg.prototype.updateBlockStyles_=function(t){for(var r,n=0;r=t[n];n++){var s=r.getStyleName();s&&(r.setStyle(s),r.mutator&&r.mutator.updateBlockStyle())}},e.WorkspaceSvg.prototype.getInverseScreenCTM=function(){if(this.inverseScreenCTMDirty_){var t=this.getParentSvg().getScreenCTM();t&&(this.inverseScreenCTM_=t.inverse(),this.inverseScreenCTMDirty_=!1)}return this.inverseScreenCTM_},e.WorkspaceSvg.prototype.updateInverseScreenCTM=function(){this.inverseScreenCTMDirty_=!0},e.WorkspaceSvg.prototype.isVisible=function(){return this.isVisible_},e.WorkspaceSvg.prototype.getSvgXY=function(t){var n=0,r=0,s=1;(e.utils.dom.containsNode(this.getCanvas(),t)||e.utils.dom.containsNode(this.getBubbleCanvas(),t))&&(s=this.scale);do{var u=e.utils.getRelativeXY(t);(t==this.getCanvas()||t==this.getBubbleCanvas())&&(s=1),n+=u.x*s,r+=u.y*s,t=t.parentNode}while(t&&t!=this.getParentSvg());return new e.utils.Coordinate(n,r)},e.WorkspaceSvg.prototype.getCachedParentSvgSize=function(){var t=this.cachedParentSvgSize_;return new e.utils.Size(t.width,t.height)},e.WorkspaceSvg.prototype.getOriginOffsetInPixels=function(){return e.utils.getInjectionDivXY_(this.getCanvas())},e.WorkspaceSvg.prototype.getInjectionDiv=function(){if(!this.injectionDiv_)for(var t=this.svgGroup_;t;){if(-1!=(" "+(t.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")){this.injectionDiv_=t;break}t=t.parentNode}return this.injectionDiv_},e.WorkspaceSvg.prototype.getBlockCanvas=function(){return this.svgBlockCanvas_},e.WorkspaceSvg.prototype.setResizeHandlerWrapper=function(t){this.resizeHandlerWrapper_=t},e.WorkspaceSvg.prototype.createDom=function(t){return this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyWorkspace"},null),t&&(this.svgBackground_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{height:"100%",width:"100%",class:t},this.svgGroup_),"blocklyMainBackground"==t&&this.grid_?this.svgBackground_.style.fill="url(#"+this.grid_.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.svgBlockCanvas_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyBlockCanvas"},this.svgGroup_),this.svgBubbleCanvas_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyBubbleCanvas"},this.svgGroup_),this.isFlyout||(e.browserEvents.conditionalBind(this.svgGroup_,"mousedown",this,this.onMouseDown_,!1,!0),e.browserEvents.conditionalBind(this.svgGroup_,"wheel",this,this.onMouseWheel_)),this.options.hasCategories&&(this.toolbox_=new(e.registry.getClassFromOptions(e.registry.Type.TOOLBOX,this.options,!0))(this)),this.grid_&&this.grid_.update(this.scale),this.recordDragTargets(),(t=e.registry.getClassFromOptions(e.registry.Type.CURSOR,this.options))&&this.markerManager_.setCursor(new t),this.renderer_.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_},e.WorkspaceSvg.prototype.dispose=function(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&(e.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.svgBubbleCanvas_=this.svgBlockCanvas_=null,this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null),this.flyout_&&(this.flyout_.dispose(),this.flyout_=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&(this.zoomControls_.dispose(),this.zoomControls_=null),this.audioManager_&&(this.audioManager_.dispose(),this.audioManager_=null),this.grid_&&(this.grid_.dispose(),this.grid_=null),this.renderer_.dispose(),this.markerManager_&&(this.markerManager_.dispose(),this.markerManager_=null),e.WorkspaceSvg.superClass_.dispose.call(this),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||(this.themeManager_.dispose(),this.themeManager_=null)),this.flyoutButtonCallbacks_=this.toolboxCategoryCallbacks_=this.connectionDBList=null,!this.options.parentWorkspace){var t=this.getParentSvg();t&&t.parentNode&&e.utils.dom.removeNode(t.parentNode)}this.resizeHandlerWrapper_&&(e.browserEvents.unbind(this.resizeHandlerWrapper_),this.resizeHandlerWrapper_=null)},e.WorkspaceSvg.prototype.newBlock=function(t,n){return new e.BlockSvg(this,t,n)},e.WorkspaceSvg.prototype.addTrashcan=function(){if(!e.Trashcan)throw Error("Missing require for Blockly.Trashcan");this.trashcan=new e.Trashcan(this);var t=this.trashcan.createDom();this.svgGroup_.insertBefore(t,this.svgBlockCanvas_)},e.WorkspaceSvg.prototype.addZoomControls=function(){if(!e.ZoomControls)throw Error("Missing require for Blockly.ZoomControls");this.zoomControls_=new e.ZoomControls(this);var t=this.zoomControls_.createDom();this.svgGroup_.appendChild(t)},e.WorkspaceSvg.prototype.addFlyout=function(t){var n=new e.Options({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,move:{scrollbars:!0}});return n.toolboxPosition=this.options.toolboxPosition,this.flyout_=this.horizontalLayout?new(e.registry.getClassFromOptions(e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(n):new(e.registry.getClassFromOptions(e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(n),this.flyout_.autoClose=!1,this.flyout_.getWorkspace().setVisible(!0),this.flyout_.createDom(t)},e.WorkspaceSvg.prototype.getFlyout=function(t){return this.flyout_||t?this.flyout_:this.toolbox_?this.toolbox_.getFlyout():null},e.WorkspaceSvg.prototype.getToolbox=function(){return this.toolbox_},e.WorkspaceSvg.prototype.updateScreenCalculations_=function(){this.updateInverseScreenCTM(),this.recordDragTargets()},e.WorkspaceSvg.prototype.resizeContents=function(){this.resizesEnabled_&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())},e.WorkspaceSvg.prototype.resize=function(){this.toolbox_&&this.toolbox_.position(),this.flyout_&&this.flyout_.position();for(var u,t=this.componentManager_.getComponents(e.ComponentManager.Capability.POSITIONABLE,!0),n=this.getMetricsManager().getUiMetrics(),r=[],s=0;u=t[s];s++)u.position(n,r),(u=u.getBoundingRectangle())&&r.push(u);this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations_()},e.WorkspaceSvg.prototype.updateScreenCalculationsIfScrolled=function(){var t=e.utils.getDocumentScroll();e.utils.Coordinate.equals(this.lastRecordedPageScroll_,t)||(this.lastRecordedPageScroll_=t,this.updateScreenCalculations_())},e.WorkspaceSvg.prototype.getCanvas=function(){return this.svgBlockCanvas_},e.WorkspaceSvg.prototype.setCachedParentSvgSize=function(t,n){var r=this.getParentSvg();t&&(this.cachedParentSvgSize_.width=t,r.cachedWidth_=t),n&&(this.cachedParentSvgSize_.height=n,r.cachedHeight_=n)},e.WorkspaceSvg.prototype.getBubbleCanvas=function(){return this.svgBubbleCanvas_},e.WorkspaceSvg.prototype.getParentSvg=function(){if(!this.cachedParentSvg_)for(var t=this.svgGroup_;t;){if("svg"==t.tagName){this.cachedParentSvg_=t;break}t=t.parentNode}return this.cachedParentSvg_},e.WorkspaceSvg.prototype.maybeFireViewportChangeEvent=function(){if(e.Events.isEnabled()){var t=this.scale,n=-this.scrollY,r=-this.scrollX;if(!(t==this.oldScale_&&1>Math.abs(n-this.oldTop_)&&1>Math.abs(r-this.oldLeft_))){var s=new(e.Events.get(e.Events.VIEWPORT_CHANGE))(n,r,t,this.id,this.oldScale_);this.oldScale_=t,this.oldTop_=n,this.oldLeft_=r,e.Events.fire(s)}}},e.WorkspaceSvg.prototype.translate=function(t,n){if(this.useWorkspaceDragSurface_&&this.isDragSurfaceActive_)this.workspaceDragSurface_.translateSurface(t,n);else{var r="translate("+t+","+n+") scale("+this.scale+")";this.svgBlockCanvas_.setAttribute("transform",r),this.svgBubbleCanvas_.setAttribute("transform",r)}this.blockDragSurface_&&this.blockDragSurface_.translateAndScaleGroup(t,n,this.scale),this.grid_&&this.grid_.moveTo(t,n),this.maybeFireViewportChangeEvent()},e.WorkspaceSvg.prototype.resetDragSurface=function(){if(this.useWorkspaceDragSurface_){this.isDragSurfaceActive_=!1;var t=this.workspaceDragSurface_.getSurfaceTranslation();this.workspaceDragSurface_.clearAndHide(this.svgGroup_),this.svgBlockCanvas_.setAttribute("transform",t="translate("+t.x+","+t.y+") scale("+this.scale+")"),this.svgBubbleCanvas_.setAttribute("transform",t)}},e.WorkspaceSvg.prototype.setupDragSurface=function(){if(this.useWorkspaceDragSurface_&&!this.isDragSurfaceActive_){this.isDragSurfaceActive_=!0;var t=this.svgBlockCanvas_.previousSibling,n=parseInt(this.getParentSvg().getAttribute("width"),10),r=parseInt(this.getParentSvg().getAttribute("height"),10),s=e.utils.getRelativeXY(this.getCanvas());this.workspaceDragSurface_.setContentsAndShow(this.getCanvas(),this.getBubbleCanvas(),t,n,r,this.scale),this.workspaceDragSurface_.translateSurface(s.x,s.y)}},e.WorkspaceSvg.prototype.getBlockDragSurface=function(){return this.blockDragSurface_},e.WorkspaceSvg.prototype.getWidth=function(){var t=this.getMetrics();return t?t.viewWidth/this.scale:0},e.WorkspaceSvg.prototype.setVisible=function(t){if(this.isVisible_=t,this.svgGroup_)if(this.scrollbar&&this.scrollbar.setContainerVisible(t),this.getFlyout()&&this.getFlyout().setContainerVisible(t),this.getParentSvg().style.display=t?"block":"none",this.toolbox_&&this.toolbox_.setVisible(t),t){for(var n=(t=this.getAllBlocks(!1)).length-1;0<=n;n--)t[n].markDirty();this.render(),this.toolbox_&&this.toolbox_.position()}else e.hideChaff(!0)},e.WorkspaceSvg.prototype.render=function(){for(var t=this.getAllBlocks(!1),n=t.length-1;0<=n;n--)t[n].render(!1);if(this.currentGesture_)for(t=this.currentGesture_.getInsertionMarkers(),n=0;n<t.length;n++)t[n].render(!1);this.markerManager_.updateMarkers()},e.WorkspaceSvg.prototype.highlightBlock=function(t,n){if(void 0===n){for(var s,r=0;s=this.highlightedBlocks_[r];r++)s.setHighlighted(!1);this.highlightedBlocks_.length=0}(s=t?this.getBlockById(t):null)&&((t=void 0===n||n)?-1==this.highlightedBlocks_.indexOf(s)&&this.highlightedBlocks_.push(s):e.utils.arrayRemove(this.highlightedBlocks_,s),s.setHighlighted(t))},e.WorkspaceSvg.prototype.paste=function(t){!this.rendered||!t.tagName||t.getElementsByTagName("block").length>=this.remainingCapacity()||(this.currentGesture_&&this.currentGesture_.cancel(),"comment"==t.tagName.toLowerCase()?this.pasteWorkspaceComment_(t):this.pasteBlock_(t))},e.WorkspaceSvg.prototype.pasteBlock_=function(t){e.Events.disable();try{var n=e.Xml.domToBlock(t,this),r=parseInt(t.getAttribute("x"),10),s=parseInt(t.getAttribute("y"),10);if(!isNaN(r)&&!isNaN(s)){this.RTL&&(r=-r);do{t=!1;for(var x,u=this.getAllBlocks(!1),b=0;x=u[b];b++){var B=x.getRelativeToSurfaceXY();if(1>=Math.abs(r-B.x)&&1>=Math.abs(s-B.y)){t=!0;break}}if(!t){var ot,Z=n.getConnections_(!1);for(b=0;ot=Z[b];b++)if(ot.closest(e.SNAP_RADIUS,new e.utils.Coordinate(r,s)).connection){t=!0;break}}t&&(r=this.RTL?r-e.SNAP_RADIUS:r+e.SNAP_RADIUS,s+=2*e.SNAP_RADIUS)}while(t);n.moveBy(r,s)}}finally{e.Events.enable()}e.Events.isEnabled()&&!n.isShadow()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CREATE))(n)),n.select()},e.WorkspaceSvg.prototype.pasteWorkspaceComment_=function(t){e.Events.disable();try{var n=e.WorkspaceCommentSvg.fromXml(t,this),r=parseInt(t.getAttribute("x"),10),s=parseInt(t.getAttribute("y"),10);isNaN(r)||isNaN(s)||(this.RTL&&(r=-r),n.moveBy(r+50,s+50))}finally{e.Events.enable()}e.Events.isEnabled()&&e.WorkspaceComment.fireCreateEvent(n),n.select()},e.WorkspaceSvg.prototype.refreshToolboxSelection=function(){var t=this.isFlyout?this.targetWorkspace:this;t&&!t.currentGesture_&&t.toolbox_&&t.toolbox_.getFlyout()&&t.toolbox_.refreshSelection()},e.WorkspaceSvg.prototype.renameVariableById=function(t,n){e.WorkspaceSvg.superClass_.renameVariableById.call(this,t,n),this.refreshToolboxSelection()},e.WorkspaceSvg.prototype.deleteVariableById=function(t){e.WorkspaceSvg.superClass_.deleteVariableById.call(this,t),this.refreshToolboxSelection()},e.WorkspaceSvg.prototype.createVariable=function(t,n,r){return t=e.WorkspaceSvg.superClass_.createVariable.call(this,t,n,r),this.refreshToolboxSelection(),t},e.WorkspaceSvg.prototype.recordDeleteAreas=function(){e.utils.deprecation.warn("WorkspaceSvg.prototype.recordDeleteAreas","June 2021","June 2022","WorkspaceSvg.prototype.recordDragTargets"),this.recordDragTargets()},e.WorkspaceSvg.prototype.recordDragTargets=function(){var t=this.componentManager_.getComponents(e.ComponentManager.Capability.DRAG_TARGET,!0);this.dragTargetAreas_=[];for(var r,n=0;r=t[n];n++){var s=r.getClientRect();s&&this.dragTargetAreas_.push({component:r,clientRect:s})}},e.WorkspaceSvg.prototype.getDragTarget=function(t){for(var r,n=0;r=this.dragTargetAreas_[n];n++)if(r.clientRect.contains(t.clientX,t.clientY))return r.component;return null},e.WorkspaceSvg.prototype.onMouseDown_=function(t){var n=this.getGesture(t);n&&n.handleWsStart(t,this)},e.WorkspaceSvg.prototype.startDrag=function(t,n){(t=e.utils.mouseToSvg(t,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,t.y/=this.scale,this.dragDeltaXY_=e.utils.Coordinate.difference(n,t)},e.WorkspaceSvg.prototype.moveDrag=function(t){return(t=e.utils.mouseToSvg(t,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,t.y/=this.scale,e.utils.Coordinate.sum(this.dragDeltaXY_,t)},e.WorkspaceSvg.prototype.isDragging=function(){return null!=this.currentGesture_&&this.currentGesture_.isDragging()},e.WorkspaceSvg.prototype.isDraggable=function(){return this.options.moveOptions&&this.options.moveOptions.drag},e.WorkspaceSvg.prototype.isMovable=function(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch},e.WorkspaceSvg.prototype.isMovableHorizontally=function(){var t=!!this.scrollbar;return this.isMovable()&&(!t||t&&this.scrollbar.canScrollHorizontally())},e.WorkspaceSvg.prototype.isMovableVertically=function(){var t=!!this.scrollbar;return this.isMovable()&&(!t||t&&this.scrollbar.canScrollVertically())},e.WorkspaceSvg.prototype.onMouseWheel_=function(t){if(e.Gesture.inProgress())t.preventDefault(),t.stopPropagation();else{var n=this.options.zoomOptions&&this.options.zoomOptions.wheel,r=this.options.moveOptions&&this.options.moveOptions.wheel;if(n||r){var s=e.utils.getScrollDeltaPixels(t);!n||!t.ctrlKey&&r?(n=this.scrollX-s.x,r=this.scrollY-s.y,t.shiftKey&&!s.x&&(n=this.scrollX-s.y,r=this.scrollY),this.scroll(n,r)):(s=-s.y/50,n=e.utils.mouseToSvg(t,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(n.x,n.y,s)),t.preventDefault()}}},e.WorkspaceSvg.prototype.getBlocksBoundingBox=function(){var t=this.getTopBoundedElements();if(!t.length)return new e.utils.Rect(0,0,0,0);for(var n=t[0].getBoundingRectangle(),r=1;r<t.length;r++){var s=t[r];s.isInsertionMarker&&s.isInsertionMarker()||((s=s.getBoundingRectangle()).top<n.top&&(n.top=s.top),s.bottom>n.bottom&&(n.bottom=s.bottom),s.left<n.left&&(n.left=s.left),s.right>n.right&&(n.right=s.right))}return n},e.WorkspaceSvg.prototype.cleanUp=function(){this.setResizesEnabled(!1),e.Events.setGroup(!0);for(var s,t=this.getTopBlocks(!0),n=0,r=0;s=t[r];r++)if(s.isMovable()){var u=s.getRelativeToSurfaceXY();s.moveBy(-u.x,n-u.y),s.snapToGrid(),n=s.getRelativeToSurfaceXY().y+s.getHeightWidth().height+this.renderer_.getConstants().MIN_BLOCK_HEIGHT}e.Events.setGroup(!1),this.setResizesEnabled(!0)},e.WorkspaceSvg.prototype.showContextMenu=function(t){if(!this.options.readOnly&&!this.isFlyout){var n=e.ContextMenuRegistry.registry.getContextMenuOptions(e.ContextMenuRegistry.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(n,t),e.ContextMenu.show(t,n,this.RTL)}},e.WorkspaceSvg.prototype.updateToolbox=function(t){if(t=e.utils.toolbox.convertToolboxDefToJson(t)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(e.utils.toolbox.hasCategories(t)){if(!this.toolbox_)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=t,this.toolbox_.render(t)}else{if(!this.flyout_)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=t,this.flyout_.show(t)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")},e.WorkspaceSvg.prototype.markFocused=function(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(e.mainWorkspace=this,this.setBrowserFocus())},e.WorkspaceSvg.prototype.setBrowserFocus=function(){document.activeElement&&document.activeElement.blur&&document.activeElement.blur();try{this.getParentSvg().focus({preventScroll:!0})}catch(t){try{this.getParentSvg().parentNode.setActive()}catch(n){this.getParentSvg().parentNode.focus({preventScroll:!0})}}},e.WorkspaceSvg.prototype.zoom=function(t,n,r){r=Math.pow(this.options.zoomOptions.scaleSpeed,r);var s=this.scale*r;if(this.scale!=s){s>this.options.zoomOptions.maxScale?r=this.options.zoomOptions.maxScale/this.scale:s<this.options.zoomOptions.minScale&&(r=this.options.zoomOptions.minScale/this.scale);var u=this.getCanvas().getCTM(),b=this.getParentSvg().createSVGPoint();b.x=t,b.y=n,b=b.matrixTransform(u.inverse()),u=u.translate((t=b.x)*(1-r),(n=b.y)*(1-r)).scale(r),this.scrollX=u.e,this.scrollY=u.f,this.setScale(s)}},e.WorkspaceSvg.prototype.zoomCenter=function(t){var n=this.getMetrics();if(this.flyout_){var r=n.svgWidth?n.svgWidth/2:0;n=n.svgHeight?n.svgHeight/2:0}else r=n.viewWidth/2+n.absoluteLeft,n=n.viewHeight/2+n.absoluteTop;this.zoom(r,n,t)},e.WorkspaceSvg.prototype.zoomToFit=function(){if(this.isMovable()){var t=this.getMetrics(),n=t.viewWidth;t=t.viewHeight;var r=this.getBlocksBoundingBox(),s=r.right-r.left;if(r=r.bottom-r.top,s){this.flyout_&&(this.horizontalLayout?(t+=this.flyout_.getHeight(),r+=this.flyout_.getHeight()/this.scale):(n+=this.flyout_.getWidth(),s+=this.flyout_.getWidth()/this.scale)),n/=s,t/=r,e.Events.disable();try{this.setScale(Math.min(n,t)),this.scrollCenter()}finally{e.Events.enable()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},e.WorkspaceSvg.prototype.beginCanvasTransition=function(){e.utils.dom.addClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),e.utils.dom.addClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},e.WorkspaceSvg.prototype.endCanvasTransition=function(){e.utils.dom.removeClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),e.utils.dom.removeClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},e.WorkspaceSvg.prototype.scrollCenter=function(){if(this.isMovable()){var t=this.getMetrics(),n=(t.scrollWidth-t.viewWidth)/2,r=(t.scrollHeight-t.viewHeight)/2;this.scroll(n=-n-t.scrollLeft,r=-r-t.scrollTop)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},e.WorkspaceSvg.prototype.centerOnBlock=function(t){if(this.isMovable()){if(t=t?this.getBlockById(t):null){var n=t.getRelativeToSurfaceXY(),r=t.getHeightWidth(),s=this.scale;t=(n.x+(this.RTL?-1:1)*r.width/2)*s,n=(n.y+r.height/2)*s,r=this.getMetrics(),this.scroll(-(t-r.viewWidth/2),-(n-r.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},e.WorkspaceSvg.prototype.setScale=function(t){this.options.zoomOptions.maxScale&&t>this.options.zoomOptions.maxScale?t=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&t<this.options.zoomOptions.minScale&&(t=this.options.zoomOptions.minScale),this.scale=t,e.hideChaff(!1),this.flyout_&&(this.flyout_.reflow(),this.recordDragTargets()),this.grid_&&this.grid_.update(this.scale),t=this.getMetrics(),this.scrollX-=t.absoluteLeft,this.scrollY-=t.absoluteTop,t.viewLeft+=t.absoluteLeft,t.viewTop+=t.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout_?this.scrollbar.resizeView(t):this.scrollbar.resizeContent(t))},e.WorkspaceSvg.prototype.getScale=function(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale},e.WorkspaceSvg.prototype.scroll=function(t,n){e.hideChaff(!0);var r=this.getMetrics();t=Math.min(t,-r.scrollLeft),n=Math.min(n,-r.scrollTop);var s=r.scrollTop+Math.max(0,r.scrollHeight-r.viewHeight);t=Math.max(t,-(r.scrollLeft+Math.max(0,r.scrollWidth-r.viewWidth))),n=Math.max(n,-s),this.scrollX=t,this.scrollY=n,this.scrollbar&&this.scrollbar.set(-(t+r.scrollLeft),-(n+r.scrollTop),!1),this.translate(t+=r.absoluteLeft,n+=r.absoluteTop)},e.WorkspaceSvg.setTopLevelWorkspaceMetrics_=function(t){var n=this.getMetrics();"number"==typeof t.x&&(this.scrollX=-(n.scrollLeft+(n.scrollWidth-n.viewWidth)*t.x)),"number"==typeof t.y&&(this.scrollY=-(n.scrollTop+(n.scrollHeight-n.viewHeight)*t.y)),this.translate(this.scrollX+n.absoluteLeft,this.scrollY+n.absoluteTop)},e.WorkspaceSvg.prototype.getBlockById=function(t){return e.WorkspaceSvg.superClass_.getBlockById.call(this,t)},e.WorkspaceSvg.prototype.getTopBlocks=function(t){return e.WorkspaceSvg.superClass_.getTopBlocks.call(this,t)},e.WorkspaceSvg.prototype.addTopBlock=function(t){this.addTopBoundedElement(t),e.WorkspaceSvg.superClass_.addTopBlock.call(this,t)},e.WorkspaceSvg.prototype.removeTopBlock=function(t){this.removeTopBoundedElement(t),e.WorkspaceSvg.superClass_.removeTopBlock.call(this,t)},e.WorkspaceSvg.prototype.addTopComment=function(t){this.addTopBoundedElement(t),e.WorkspaceSvg.superClass_.addTopComment.call(this,t)},e.WorkspaceSvg.prototype.removeTopComment=function(t){this.removeTopBoundedElement(t),e.WorkspaceSvg.superClass_.removeTopComment.call(this,t)},e.WorkspaceSvg.prototype.addTopBoundedElement=function(t){this.topBoundedElements_.push(t)},e.WorkspaceSvg.prototype.removeTopBoundedElement=function(t){e.utils.arrayRemove(this.topBoundedElements_,t)},e.WorkspaceSvg.prototype.getTopBoundedElements=function(){return[].concat(this.topBoundedElements_)},e.WorkspaceSvg.prototype.setResizesEnabled=function(t){var n=!this.resizesEnabled_&&t;this.resizesEnabled_=t,n&&this.resizeContents()},e.WorkspaceSvg.prototype.clear=function(){this.setResizesEnabled(!1),e.WorkspaceSvg.superClass_.clear.call(this),this.topBoundedElements_=[],this.setResizesEnabled(!0)},e.WorkspaceSvg.prototype.registerButtonCallback=function(t,n){if("function"!=typeof n)throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks_[t]=n},e.WorkspaceSvg.prototype.getButtonCallback=function(t){return(t=this.flyoutButtonCallbacks_[t])?t:null},e.WorkspaceSvg.prototype.removeButtonCallback=function(t){this.flyoutButtonCallbacks_[t]=null},e.WorkspaceSvg.prototype.registerToolboxCategoryCallback=function(t,n){if("function"!=typeof n)throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks_[t]=n},e.WorkspaceSvg.prototype.getToolboxCategoryCallback=function(t){return this.toolboxCategoryCallbacks_[t]||null},e.WorkspaceSvg.prototype.removeToolboxCategoryCallback=function(t){this.toolboxCategoryCallbacks_[t]=null},e.WorkspaceSvg.prototype.getGesture=function(t){var n="mousedown"==t.type||"touchstart"==t.type||"pointerdown"==t.type,r=this.currentGesture_;return r?n&&r.hasStarted()?(console.warn("Tried to start the same gesture twice."),r.cancel(),null):r:n?this.currentGesture_=new e.TouchGesture(t,this):null},e.WorkspaceSvg.prototype.clearGesture=function(){this.currentGesture_=null},e.WorkspaceSvg.prototype.cancelCurrentGesture=function(){this.currentGesture_&&this.currentGesture_.cancel()},e.WorkspaceSvg.prototype.getAudioManager=function(){return this.audioManager_},e.WorkspaceSvg.prototype.getGrid=function(){return this.grid_},e.inject=function(t,n){if(e.checkBlockColourConstants(),"string"==typeof t&&(t=document.getElementById(t)||document.querySelector(t)),!t||!e.utils.dom.containsNode(document,t))throw Error("Error: container is not in current document.");n=new e.Options(n||{});var r=document.createElement("div");r.className="injectionDiv",r.tabIndex=0,e.utils.aria.setState(r,e.utils.aria.State.LABEL,e.Msg.WORKSPACE_ARIA_LABEL),t.appendChild(r),t=e.createDom_(r,n);var s=new e.BlockDragSurfaceSvg(r),u=new e.WorkspaceDragSurfaceSvg(r),b=e.createMainWorkspace_(t,n,s,u);return e.init_(b),e.mainWorkspace=b,e.svgResize(b),r.addEventListener("focusin",function(){e.mainWorkspace=b}),b},e.createDom_=function(t,n){t.setAttribute("dir","LTR"),e.Css.inject(n.hasCss,n.pathToMedia),t=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{xmlns:e.utils.dom.SVG_NS,"xmlns:html":e.utils.dom.HTML_NS,"xmlns:xlink":e.utils.dom.XLINK_NS,version:"1.1",class:"blocklySvg",tabindex:"0"},t);var r=e.utils.dom.createSvgElement(e.utils.Svg.DEFS,{},t),s=String(Math.random()).substring(2);return n.gridPattern=e.Grid.createDom(s,n.gridOptions,r),t},e.createMainWorkspace_=function(t,n,r,s){return n.parentWorkspace=null,(n=new e.WorkspaceSvg(n,r,s)).scale=(r=n.options).zoomOptions.startScale,t.appendChild(n.createDom("blocklyMainBackground")),e.utils.dom.addClass(n.getInjectionDiv(),n.getRenderer().getClassName()),e.utils.dom.addClass(n.getInjectionDiv(),n.getTheme().getClassName()),!r.hasCategories&&r.languageTree&&(s=n.addFlyout(e.utils.Svg.SVG),e.utils.dom.insertAfter(s,t)),r.hasTrashcan&&n.addTrashcan(),r.zoomOptions&&r.zoomOptions.controls&&n.addZoomControls(),n.getThemeManager().subscribe(t,"workspaceBackgroundColour","background-color"),n.translate(0,0),n.addChangeListener(e.bumpIntoBoundsHandler_(n)),e.svgResize(n),e.WidgetDiv.createDom(),e.DropDownDiv.createDom(),e.Tooltip.createDom(),n},e.extractObjectFromEvent_=function(t,n){var r=null;switch(n.type){case e.Events.BLOCK_CREATE:case e.Events.BLOCK_MOVE:(r=t.getBlockById(n.blockId))&&(r=r.getRootBlock());break;case e.Events.COMMENT_CREATE:case e.Events.COMMENT_MOVE:r=t.getCommentById(n.commentId)}return r},e.bumpTopObjectsIntoBounds_=function(t){var n=t.getMetricsManager();if(n.hasFixedEdges()&&!t.isDragging()){n=n.getScrollMetrics(!0);for(var u,r=t.getTopBoundedElements(),s=0;u=r[s];s++)e.bumpObjectIntoBounds_(t,n,u)}},e.bumpIntoBoundsHandler_=function(t){return function(n){var r=t.getMetricsManager();if(r.hasFixedEdges()&&!t.isDragging())if(-1!==e.Events.BUMP_EVENTS.indexOf(n.type)){r=r.getScrollMetrics(!0);var s=e.extractObjectFromEvent_(t,n);if(s){var u=e.Events.getGroup();e.Events.setGroup(n.group),e.bumpObjectIntoBounds_(t,r,s)&&!n.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),null!==u&&e.Events.setGroup(u)}}else n.type===e.Events.VIEWPORT_CHANGE&&n.scale>n.oldScale&&e.bumpTopObjectsIntoBounds_(t)}},e.bumpObjectIntoBounds_=function(t,n,r){var s=r.getBoundingRectangle(),u=s.right-s.left,b=e.utils.math.clamp(n.top,s.top,n.top+n.height-(s.bottom-s.top))-s.top,x=n.left;return n=n.left+n.width-u,t.RTL?x=Math.min(n,x):n=Math.max(x,n),!(!(t=e.utils.math.clamp(x,s.left,n)-s.left)&&!b||(r.moveBy(t,b),0))},e.init_=function(t){var n=t.options,r=t.getParentSvg();if(e.browserEvents.conditionalBind(r.parentNode,"contextmenu",null,function(u){e.utils.isTargetInput(u)||u.preventDefault()}),r=e.browserEvents.conditionalBind(window,"resize",null,function(){e.hideChaff(!0),e.svgResize(t),e.bumpTopObjectsIntoBounds_(t)}),t.setResizeHandlerWrapper(r),e.inject.bindDocumentEvents_(),n.languageTree){r=t.getToolbox();var s=t.getFlyout(!0);r?r.init():s&&(s.init(t),s.show(n.languageTree),"function"==typeof s.scrollToStart&&s.scrollToStart())}n.hasTrashcan&&t.trashcan.init(),n.zoomOptions&&n.zoomOptions.controls&&t.zoomControls_.init(),n.moveOptions&&n.moveOptions.scrollbars?(t.scrollbar=new e.ScrollbarPair(t,!0===n.moveOptions.scrollbars||!!n.moveOptions.scrollbars.horizontal,!0===n.moveOptions.scrollbars||!!n.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),t.scrollbar.resize()):t.setMetrics({x:.5,y:.5}),n.hasSounds&&e.inject.loadSounds_(n.pathToMedia,t)},e.inject.bindDocumentEvents_=function(){e.documentEventsBound_||(e.browserEvents.conditionalBind(document,"scroll",null,function(){for(var r,t=e.Workspace.getAll(),n=0;r=t[n];n++)r.updateInverseScreenCTM&&r.updateInverseScreenCTM()}),e.browserEvents.conditionalBind(document,"keydown",null,e.onKeyDown),e.browserEvents.bind(document,"touchend",null,e.longStop_),e.browserEvents.bind(document,"touchcancel",null,e.longStop_),e.utils.userAgent.IPAD&&e.browserEvents.conditionalBind(window,"orientationchange",document,function(){e.svgResize(e.getMainWorkspace())})),e.documentEventsBound_=!0},e.inject.loadSounds_=function(t,n){var r=n.getAudioManager();r.load([t+"click.mp3",t+"click.wav",t+"click.ogg"],"click"),r.load([t+"disconnect.wav",t+"disconnect.mp3",t+"disconnect.ogg"],"disconnect"),r.load([t+"delete.mp3",t+"delete.ogg",t+"delete.wav"],"delete");var s=[];t=function(){for(;s.length;)e.browserEvents.unbind(s.pop());r.preload()},s.push(e.browserEvents.conditionalBind(document,"mousemove",null,t,!0)),s.push(e.browserEvents.conditionalBind(document,"touchstart",null,t,!0))},e.Names=function(t,n){if(this.variablePrefix_=n||"",this.reservedDict_=Object.create(null),t)for(t=t.split(","),n=0;n<t.length;n++)this.reservedDict_[t[n]]=!0;this.reset()},e.Names.DEVELOPER_VARIABLE_TYPE="DEVELOPER_VARIABLE",e.Names.prototype.reset=function(){this.db_=Object.create(null),this.dbReverse_=Object.create(null),this.variableMap_=null},e.Names.prototype.setVariableMap=function(t){this.variableMap_=t},e.Names.prototype.getNameForUserVariable_=function(t){return this.variableMap_?(t=this.variableMap_.getVariableById(t))?t.name:null:(console.warn("Deprecated call to Blockly.Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:\nBlockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());"),null)},e.Names.prototype.populateVariables=function(t){t=e.Variables.allUsedVarModels(t);for(var n=0;n<t.length;n++)this.getName(t[n].getId(),e.VARIABLE_CATEGORY_NAME)},e.Names.prototype.populateProcedures=function(t){t=(t=e.Procedures.allProcedures(t))[0].concat(t[1]);for(var n=0;n<t.length;n++)this.getName(t[n][0],e.PROCEDURE_CATEGORY_NAME)},e.Names.prototype.getName=function(t,n){var r=t;n==e.VARIABLE_CATEGORY_NAME&&(t=this.getNameForUserVariable_(t))&&(r=t),t=r.toLowerCase();var s=n==e.VARIABLE_CATEGORY_NAME||n==e.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"";n in this.db_||(this.db_[n]=Object.create(null));var u=this.db_[n];return t in u?s+u[t]:(n=this.getDistinctName(r,n),u[t]=n.substr(s.length),n)},e.Names.prototype.getUserNames=function(t){return Object.keys(this.db_[t]||{})},e.Names.prototype.getDistinctName=function(t,n){t=this.safeName_(t);for(var r="";this.dbReverse_[t+r]||t+r in this.reservedDict_;)r=r?r+1:2;return this.dbReverse_[t+=r]=!0,(n==e.VARIABLE_CATEGORY_NAME||n==e.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"")+t},e.Names.prototype.safeName_=function(t){return t?(t=encodeURI(t.replace(/ /g,"_")).replace(/[^\w]/g,"_"),-1!="0123456789".indexOf(t[0])&&(t="my_"+t)):t=e.Msg.UNNAMED_KEY||"unnamed",t},e.Names.equals=function(t,n){return t.toLowerCase()==n.toLowerCase()},e.Procedures={},e.Procedures.NAME_TYPE=e.PROCEDURE_CATEGORY_NAME,e.Procedures.DEFAULT_ARG="x",e.Procedures.allProcedures=function(t){var n=t.getBlocksByType("procedures_defnoreturn",!1).map(function(r){return r.getProcedureDef()});return t=t.getBlocksByType("procedures_defreturn",!1).map(function(r){return r.getProcedureDef()}),n.sort(e.Procedures.procTupleComparator_),t.sort(e.Procedures.procTupleComparator_),[n,t]},e.Procedures.procTupleComparator_=function(t,n){return t[0].localeCompare(n[0],void 0,{sensitivity:"base"})},e.Procedures.findLegalName=function(t,n){if(n.isInFlyout)return t;for(t=t||e.Msg.UNNAMED_KEY||"unnamed";!e.Procedures.isLegalName_(t,n.workspace,n);){var r=t.match(/^(.*?)(\d+)$/);t=r?r[1]+(parseInt(r[2],10)+1):t+"2"}return t},e.Procedures.isLegalName_=function(t,n,r){return!e.Procedures.isNameUsed(t,n,r)},e.Procedures.isNameUsed=function(t,n,r){n=n.getAllBlocks(!1);for(var s=0;s<n.length;s++)if(n[s]!=r&&n[s].getProcedureDef){var u=n[s].getProcedureDef();if(e.Names.equals(u[0],t))return!0}return!1},e.Procedures.rename=function(t){t=t.trim();var n=e.Procedures.findLegalName(t,this.getSourceBlock()),r=this.getValue();if(r!=t&&r!=n){t=this.getSourceBlock().workspace.getAllBlocks(!1);for(var s=0;s<t.length;s++)t[s].renameProcedure&&t[s].renameProcedure(r,n)}return n},e.Procedures.flyoutCategory=function(t){function n(b,x){for(var B=0;B<b.length;B++){var Z=b[B][0],ot=b[B][1],et=e.utils.xml.createElement("block");et.setAttribute("type",x),et.setAttribute("gap",16);var Tt=e.utils.xml.createElement("mutation");for(Tt.setAttribute("name",Z),et.appendChild(Tt),Z=0;Z<ot.length;Z++){var Pt=e.utils.xml.createElement("arg");Pt.setAttribute("name",ot[Z]),Tt.appendChild(Pt)}r.push(et)}}var r=[];if(e.Blocks.procedures_defnoreturn){var s=e.utils.xml.createElement("block");s.setAttribute("type","procedures_defnoreturn"),s.setAttribute("gap",16);var u=e.utils.xml.createElement("field");u.setAttribute("name","NAME"),u.appendChild(e.utils.xml.createTextNode(e.Msg.PROCEDURES_DEFNORETURN_PROCEDURE)),s.appendChild(u),r.push(s)}return e.Blocks.procedures_defreturn&&((s=e.utils.xml.createElement("block")).setAttribute("type","procedures_defreturn"),s.setAttribute("gap",16),(u=e.utils.xml.createElement("field")).setAttribute("name","NAME"),u.appendChild(e.utils.xml.createTextNode(e.Msg.PROCEDURES_DEFRETURN_PROCEDURE)),s.appendChild(u),r.push(s)),e.Blocks.procedures_ifreturn&&((s=e.utils.xml.createElement("block")).setAttribute("type","procedures_ifreturn"),s.setAttribute("gap",16),r.push(s)),r.length&&r[r.length-1].setAttribute("gap",24),n((t=e.Procedures.allProcedures(t))[0],"procedures_callnoreturn"),n(t[1],"procedures_callreturn"),r},e.Procedures.updateMutatorFlyout_=function(t){for(var u,n=[],r=t.getBlocksByType("procedures_mutatorarg",!1),s=0;u=r[s];s++)n.push(u.getFieldValue("NAME"));r=e.utils.xml.createElement("xml"),(s=e.utils.xml.createElement("block")).setAttribute("type","procedures_mutatorarg"),(u=e.utils.xml.createElement("field")).setAttribute("name","NAME"),n=e.Variables.generateUniqueNameFromOptions(e.Procedures.DEFAULT_ARG,n),n=e.utils.xml.createTextNode(n),u.appendChild(n),s.appendChild(u),r.appendChild(s),t.updateToolbox(r)},e.Procedures.mutatorOpenListener=function(t){if(t.type==e.Events.BUBBLE_OPEN&&"mutator"===t.bubbleType&&t.isOpen){var n=(t=e.Workspace.getById(t.workspaceId).getBlockById(t.blockId)).type;("procedures_defnoreturn"==n||"procedures_defreturn"==n)&&(t=t.mutator.getWorkspace(),e.Procedures.updateMutatorFlyout_(t),t.addChangeListener(e.Procedures.mutatorChangeListener_))}},e.Procedures.mutatorChangeListener_=function(t){(t.type==e.Events.BLOCK_CREATE||t.type==e.Events.BLOCK_DELETE||t.type==e.Events.BLOCK_CHANGE)&&(t=e.Workspace.getById(t.workspaceId),e.Procedures.updateMutatorFlyout_(t))},e.Procedures.getCallers=function(t,n){var r=[];n=n.getAllBlocks(!1);for(var s=0;s<n.length;s++)if(n[s].getProcedureCall){var u=n[s].getProcedureCall();u&&e.Names.equals(u,t)&&r.push(n[s])}return r},e.Procedures.mutateCallers=function(t){var u,n=e.Events.recordUndo,r=t.getProcedureDef()[0],s=t.mutationToDom(!0);for(t=e.Procedures.getCallers(r,t.workspace),r=0;u=t[r];r++){var b=u.mutationToDom();b=b&&e.Xml.domToText(b),u.domToMutation(s);var x=u.mutationToDom();b!=(x=x&&e.Xml.domToText(x))&&(e.Events.recordUndo=!1,e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(u,"mutation",null,b,x)),e.Events.recordUndo=n)}},e.Procedures.getDefinition=function(t,n){n=n.getAllBlocks(!1);for(var r=0;r<n.length;r++)if(n[r].getProcedureDef){var s=n[r].getProcedureDef();if(s&&e.Names.equals(s[0],t))return n[r]}return null},e.ShortcutRegistry=function(){e.ShortcutRegistry.registry=this,this.registry_=Object.create(null),this.keyMap_=Object.create(null)},e.ShortcutRegistry.modifierKeys={Shift:e.utils.KeyCodes.SHIFT,Control:e.utils.KeyCodes.CTRL,Alt:e.utils.KeyCodes.ALT,Meta:e.utils.KeyCodes.META},e.ShortcutRegistry.prototype.register=function(t,n){if(this.registry_[t.name]&&!n)throw Error('Shortcut with name "'+t.name+'" already exists.');this.registry_[t.name]=t},e.ShortcutRegistry.prototype.unregister=function(t){return this.registry_[t]?(this.removeAllKeyMappings(t),delete this.registry_[t],!0):(console.warn('Keyboard shortcut with name "'+t+'" not found.'),!1)},e.ShortcutRegistry.prototype.addKeyMapping=function(t,n,r){t=String(t);var s=this.keyMap_[t];if(s&&!r)throw Error('Shortcut with name "'+n+'" collides with shortcuts '+s.toString());s&&r?s.unshift(n):this.keyMap_[t]=[n]},e.ShortcutRegistry.prototype.removeKeyMapping=function(t,n,r){var s=this.keyMap_[t];if(!s&&!r)return console.warn('No keyboard shortcut with name "'+n+'" registered with key code "'+t+'"'),!1;var u=s.indexOf(n);return-1<u?(s.splice(u,1),0==s.length&&delete this.keyMap_[t],!0):(r||console.warn('No keyboard shortcut with name "'+n+'" registered with key code "'+t+'"'),!1)},e.ShortcutRegistry.prototype.removeAllKeyMappings=function(t){for(var n in this.keyMap_)this.removeKeyMapping(n,t,!0)},e.ShortcutRegistry.prototype.setKeyMap=function(t){this.keyMap_=t},e.ShortcutRegistry.prototype.getKeyMap=function(){return e.utils.object.deepMerge(Object.create(null),this.keyMap_)},e.ShortcutRegistry.prototype.getRegistry=function(){return e.utils.object.deepMerge(Object.create(null),this.registry_)},e.ShortcutRegistry.prototype.onKeyDown=function(t,n){var r=this.serializeKeyEvent_(n);if(!(r=this.getShortcutNamesByKeyCode(r)))return!1;for(var u,s=0;u=r[s];s++)if((!(u=this.registry_[u]).preconditionFn||u.preconditionFn(t))&&u.callback&&u.callback(t,n,u))return!0;return!1},e.ShortcutRegistry.prototype.getShortcutNamesByKeyCode=function(t){return this.keyMap_[t]||[]},e.ShortcutRegistry.prototype.getKeyCodesByShortcutName=function(t){var r,n=[];for(r in this.keyMap_)-1<this.keyMap_[r].indexOf(t)&&n.push(r);return n},e.ShortcutRegistry.prototype.serializeKeyEvent_=function(t){var r,n="";for(r in e.ShortcutRegistry.modifierKeys)t.getModifierState(r)&&(""!=n&&(n+="+"),n+=r);return""!=n&&t.keyCode?n=n+"+"+t.keyCode:t.keyCode&&(n=t.keyCode.toString()),n},e.ShortcutRegistry.prototype.checkModifiers_=function(t){for(var s,n=e.utils.object.values(e.ShortcutRegistry.modifierKeys),r=0;s=t[r];r++)if(0>n.indexOf(s))throw Error(s+" is not a valid modifier key.")},e.ShortcutRegistry.prototype.createSerializedKey=function(t,n){var r="";if(n)for(var s in this.checkModifiers_(n),e.ShortcutRegistry.modifierKeys)-1<n.indexOf(e.ShortcutRegistry.modifierKeys[s])&&(""!=r&&(r+="+"),r+=s);return""!=r&&t?r=r+"+"+t:t&&(r=t.toString()),r},new e.ShortcutRegistry,e.VariableModel=function(t,n,r,s){this.workspace=t,this.name=n,this.type=r||"",this.id_=s||e.utils.genUid(),e.Events.fire(new(e.Events.get(e.Events.VAR_CREATE))(this))},e.VariableModel.prototype.getId=function(){return this.id_},e.VariableModel.compareByName=function(t,n){return t.name.localeCompare(n.name,void 0,{sensitivity:"base"})},e.Variables={},e.Variables.NAME_TYPE=e.VARIABLE_CATEGORY_NAME,e.Variables.allUsedVarModels=function(t){var n=t.getAllBlocks(!1);t=Object.create(null);for(var r=0;r<n.length;r++){var s=n[r].getVarModels();if(s)for(var u=0;u<s.length;u++){var b=s[u],x=b.getId();x&&(t[x]=b)}}for(x in n=[],t)n.push(t[x]);return n},e.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_={},e.Variables.allDeveloperVariables=function(t){t=t.getAllBlocks(!1);for(var s,n=Object.create(null),r=0;s=t[r];r++){var u=s.getDeveloperVariables;if(!u&&s.getDeveloperVars&&(u=s.getDeveloperVars,e.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[s.type]||(console.warn("Function getDeveloperVars() deprecated. Use getDeveloperVariables() (block type '"+s.type+"')"),e.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[s.type]=!0)),u)for(s=u(),u=0;u<s.length;u++)n[s[u]]=!0}return Object.keys(n)},e.Variables.flyoutCategory=function(t){var n=[],r=document.createElement("button");return r.setAttribute("text","%{BKY_NEW_VARIABLE}"),r.setAttribute("callbackKey","CREATE_VARIABLE"),t.registerButtonCallback("CREATE_VARIABLE",function(s){e.Variables.createVariableButtonHandler(s.getTargetWorkspace())}),n.push(r),t=e.Variables.flyoutCategoryBlocks(t),n.concat(t)},e.Variables.flyoutCategoryBlocks=function(t){var n=[];if(0<(t=t.getVariablesOfType("")).length){var r=t[t.length-1];if(e.Blocks.variables_set){var s=e.utils.xml.createElement("block");s.setAttribute("type","variables_set"),s.setAttribute("gap",e.Blocks.math_change?8:24),s.appendChild(e.Variables.generateVariableFieldDom(r)),n.push(s)}if(e.Blocks.math_change&&((s=e.utils.xml.createElement("block")).setAttribute("type","math_change"),s.setAttribute("gap",e.Blocks.variables_get?20:8),s.appendChild(e.Variables.generateVariableFieldDom(r)),r=e.Xml.textToDom('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),s.appendChild(r),n.push(s)),e.Blocks.variables_get){t.sort(e.VariableModel.compareByName),r=0;for(var u;u=t[r];r++)(s=e.utils.xml.createElement("block")).setAttribute("type","variables_get"),s.setAttribute("gap",8),s.appendChild(e.Variables.generateVariableFieldDom(u)),n.push(s)}}return n},e.Variables.VAR_LETTER_OPTIONS="ijkmnopqrstuvwxyzabcdefgh",e.Variables.generateUniqueName=function(t){return e.Variables.generateUniqueNameFromOptions(e.Variables.VAR_LETTER_OPTIONS.charAt(0),t.getAllVariableNames())},e.Variables.generateUniqueNameFromOptions=function(t,n){if(!n.length)return t;for(var r=e.Variables.VAR_LETTER_OPTIONS,s="",u=r.indexOf(t);;){for(var b=!1,x=0;x<n.length;x++)if(n[x].toLowerCase()==t){b=!0;break}if(!b)return t;++u==r.length&&(u=0,s=Number(s)+1),t=r.charAt(u)+s}},e.Variables.createVariableButtonHandler=function(t,n,r){var s=r||"",u=function(b){e.Variables.promptName(e.Msg.NEW_VARIABLE_TITLE,b,function(x){if(x){var B=e.Variables.nameUsedWithAnyType(x,t);if(B){if(B.type==s)var Z=e.Msg.VARIABLE_ALREADY_EXISTS.replace("%1",B.name);else Z=(Z=e.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE).replace("%1",B.name).replace("%2",B.type);e.alert(Z,function(){u(x)})}else t.createVariable(x,s),n&&n(x)}else n&&n(null)})};u("")},e.Variables.createVariable=e.Variables.createVariableButtonHandler,e.Variables.renameVariable=function(t,n,r){var s=function(u){var b=e.Msg.RENAME_VARIABLE_TITLE.replace("%1",n.name);e.Variables.promptName(b,u,function(x){if(x){var B=e.Variables.nameUsedWithOtherType_(x,n.type,t);B?(B=e.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",B.name).replace("%2",B.type),e.alert(B,function(){s(x)})):(t.renameVariableById(n.getId(),x),r&&r(x))}else r&&r(null)})};s("")},e.Variables.promptName=function(t,n,r){e.prompt(t,n,function(s){s&&((s=s.replace(/[\s\xa0]+/g," ").trim())==e.Msg.RENAME_VARIABLE||s==e.Msg.NEW_VARIABLE)&&(s=null),r(s)})},e.Variables.nameUsedWithOtherType_=function(t,n,r){r=r.getVariableMap().getAllVariables(),t=t.toLowerCase();for(var u,s=0;u=r[s];s++)if(u.name.toLowerCase()==t&&u.type!=n)return u;return null},e.Variables.nameUsedWithAnyType=function(t,n){n=n.getVariableMap().getAllVariables(),t=t.toLowerCase();for(var s,r=0;s=n[r];r++)if(s.name.toLowerCase()==t)return s;return null},e.Variables.generateVariableFieldDom=function(t){var n=e.utils.xml.createElement("field");return n.setAttribute("name","VAR"),n.setAttribute("id",t.getId()),n.setAttribute("variabletype",t.type),t=e.utils.xml.createTextNode(t.name),n.appendChild(t),n},e.Variables.getOrCreateVariablePackage=function(t,n,r,s){var u=e.Variables.getVariable(t,n,r,s);return u||(u=e.Variables.createVariable_(t,n,r,s)),u},e.Variables.getVariable=function(t,n,r,s){var u=t.getPotentialVariableMap(),b=null;if(n&&(!(b=t.getVariableById(n))&&u&&(b=u.getVariableById(n)),b))return b;if(r){if(null==s)throw Error("Tried to look up a variable by name without a type");!(b=t.getVariable(r,s))&&u&&(b=u.getVariable(r,s))}return b},e.Variables.createVariable_=function(t,n,r,s){var u=t.getPotentialVariableMap();return r||(r=e.Variables.generateUniqueName(t.isFlyout?t.targetWorkspace:t)),u?u.createVariable(r,s,n):t.createVariable(r,s,n)},e.Variables.getAddedVariables=function(t,n){t=t.getAllVariables();var r=[];if(n.length!=t.length)for(var s=0;s<t.length;s++){var u=t[s];-1==n.indexOf(u)&&r.push(u)}return r},e.VERSION="6.20210701.0",e.mainWorkspace=null,e.selected=null,e.draggingConnections=[],e.clipboardXml_=null,e.clipboardSource_=null,e.clipboardTypeCounts_=null,e.cache3dSupported_=null,e.parentContainer=null,e.svgSize=function(t){return e.utils.deprecation.warn("Blockly.svgSize","March 2021","March 2022","workspace.getCachedParentSvgSize"),new e.utils.Size(t.cachedWidth_,t.cachedHeight_)},e.resizeSvgContents=function(t){t.resizeContents()},e.svgResize=function(t){for(;t.options.parentWorkspace;)t=t.options.parentWorkspace;var n=t.getParentSvg(),r=t.getCachedParentSvgSize(),s=n.parentNode;if(s){var u=s.offsetWidth;s=s.offsetHeight,r.width!=u&&(n.setAttribute("width",u+"px"),t.setCachedParentSvgSize(u,null)),r.height!=s&&(n.setAttribute("height",s+"px"),t.setCachedParentSvgSize(null,s)),t.resize()}},e.onKeyDown=function(t){var n=e.mainWorkspace;n&&!(e.utils.isTargetInput(t)||n.rendered&&!n.isVisible())&&e.ShortcutRegistry.registry.onKeyDown(n,t)},e.deleteBlock=function(t){t.workspace.isFlyout||(e.Events.setGroup(!0),e.hideChaff(),t.dispose(!t.outputConnection,!0),e.Events.setGroup(!1))},e.copy=function(t){(t=t.toCopyData())&&(e.clipboardXml_=t.xml,e.clipboardSource_=t.source,e.clipboardTypeCounts_=t.typeCounts)},e.paste=function(){if(!e.clipboardXml_)return!1;var t=e.clipboardSource_;return t.isFlyout&&(t=t.targetWorkspace),!(!e.clipboardTypeCounts_||!t.isCapacityAvailable(e.clipboardTypeCounts_)||(e.Events.setGroup(!0),t.paste(e.clipboardXml_),e.Events.setGroup(!1),0))},e.duplicate=function(t){var n=e.clipboardXml_,r=e.clipboardSource_;e.copy(t),t.workspace.paste(e.clipboardXml_),e.clipboardXml_=n,e.clipboardSource_=r},e.onContextMenu_=function(t){e.utils.isTargetInput(t)||t.preventDefault()},e.hideChaff=function(t){e.Tooltip.hide(),e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation();var n=!!t;e.getMainWorkspace().getComponentManager().getComponents(e.ComponentManager.Capability.AUTOHIDEABLE,!0).forEach(function(r){r.autoHide(n)})},e.getMainWorkspace=function(){return e.mainWorkspace},e.alert=function(t,n){alert(t),n&&n()},e.confirm=function(t,n){n(confirm(t))},e.prompt=function(t,n,r){r(prompt(t,n))},e.jsonInitFactory_=function(t){return function(){this.jsonInit(t)}},e.defineBlocksWithJsonArray=function(t){for(var n=0;n<t.length;n++){var r=t[n];if(r){var s=r.type;null==s||""===s?console.warn("Block definition #"+n+" in JSON array is missing a type attribute. Skipping."):(e.Blocks[s]&&console.warn("Block definition #"+n+' in JSON array overwrites prior definition of "'+s+'".'),e.Blocks[s]={init:e.jsonInitFactory_(r)})}else console.warn("Block definition #"+n+" in JSON array is "+r+". Skipping.")}},e.isNumber=function(t){return/^\s*-?\d+(\.\d+)?\s*$/.test(t)},e.hueToHex=function(t){return e.utils.colour.hsvToHex(t,e.HSV_SATURATION,255*e.HSV_VALUE)},e.checkBlockColourConstants=function(){e.checkBlockColourConstant_("LOGIC_HUE",["Blocks","logic","HUE"],void 0),e.checkBlockColourConstant_("LOGIC_HUE",["Constants","Logic","HUE"],210),e.checkBlockColourConstant_("LOOPS_HUE",["Blocks","loops","HUE"],void 0),e.checkBlockColourConstant_("LOOPS_HUE",["Constants","Loops","HUE"],120),e.checkBlockColourConstant_("MATH_HUE",["Blocks","math","HUE"],void 0),e.checkBlockColourConstant_("MATH_HUE",["Constants","Math","HUE"],230),e.checkBlockColourConstant_("TEXTS_HUE",["Blocks","texts","HUE"],void 0),e.checkBlockColourConstant_("TEXTS_HUE",["Constants","Text","HUE"],160),e.checkBlockColourConstant_("LISTS_HUE",["Blocks","lists","HUE"],void 0),e.checkBlockColourConstant_("LISTS_HUE",["Constants","Lists","HUE"],260),e.checkBlockColourConstant_("COLOUR_HUE",["Blocks","colour","HUE"],void 0),e.checkBlockColourConstant_("COLOUR_HUE",["Constants","Colour","HUE"],20),e.checkBlockColourConstant_("VARIABLES_HUE",["Blocks","variables","HUE"],void 0),e.checkBlockColourConstant_("VARIABLES_HUE",["Constants","Variables","HUE"],330),e.checkBlockColourConstant_("VARIABLES_DYNAMIC_HUE",["Constants","VariablesDynamic","HUE"],310),e.checkBlockColourConstant_("PROCEDURES_HUE",["Blocks","procedures","HUE"],void 0)},e.checkBlockColourConstant_=function(t,n,r){for(var s="Blockly",u=e,b=0;b<n.length;++b)s+="."+n[b],u&&(u=u[n[b]]);u&&u!==r&&(t=(void 0===r?'%1 has been removed. Use Blockly.Msg["%2"].':'%1 is deprecated and unused. Override Blockly.Msg["%2"].').replace("%1",s).replace("%2",t),console.warn(t))},e.setParentContainer=function(t){e.parentContainer=t},e.bindEvent_=e.browserEvents.bind,e.unbindEvent_=e.browserEvents.unbind,e.bindEventWithChecks_=e.browserEvents.conditionalBind,e.ALIGN_LEFT=e.constants.ALIGN.LEFT,e.ALIGN_CENTRE=e.constants.ALIGN.CENTRE,e.ALIGN_RIGHT=e.constants.ALIGN.RIGHT,e.INPUT_VALUE=e.connectionTypes.INPUT_VALUE,e.OUTPUT_VALUE=e.connectionTypes.OUTPUT_VALUE,e.NEXT_STATEMENT=e.connectionTypes.NEXT_STATEMENT,e.PREVIOUS_STATEMENT=e.connectionTypes.PREVIOUS_STATEMENT,e.DUMMY_INPUT=e.inputTypes.DUMMY,e.TOOLBOX_AT_TOP=e.utils.toolbox.Position.TOP,e.TOOLBOX_AT_BOTTOM=e.utils.toolbox.Position.BOTTOM,e.TOOLBOX_AT_LEFT=e.utils.toolbox.Position.LEFT,e.TOOLBOX_AT_RIGHT=e.utils.toolbox.Position.RIGHT,e.Events.BubbleOpen=function(t,n,r){e.Events.BubbleOpen.superClass_.constructor.call(this,t?t.workspace.id:void 0),this.blockId=t?t.id:null,this.isOpen=n,this.bubbleType=r},e.utils.object.inherits(e.Events.BubbleOpen,e.Events.UiBase),e.Events.BubbleOpen.prototype.type=e.Events.BUBBLE_OPEN,e.Events.BubbleOpen.prototype.toJson=function(){var t=e.Events.BubbleOpen.superClass_.toJson.call(this);return t.isOpen=this.isOpen,t.bubbleType=this.bubbleType,t.blockId=this.blockId,t},e.Events.BubbleOpen.prototype.fromJson=function(t){e.Events.BubbleOpen.superClass_.fromJson.call(this,t),this.isOpen=t.isOpen,this.bubbleType=t.bubbleType,this.blockId=t.blockId},e.registry.register(e.registry.Type.EVENT,e.Events.BUBBLE_OPEN,e.Events.BubbleOpen),e.Icon=function(t){this.block_=t,this.iconGroup_=null},e.Icon.prototype.collapseHidden=!0,e.Icon.prototype.SIZE=17,e.Icon.prototype.bubble_=null,e.Icon.prototype.iconXY_=null,e.Icon.prototype.createIcon=function(){this.iconGroup_||(this.iconGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyIconGroup"},null),this.block_.isInFlyout&&e.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly"),this.drawIcon_(this.iconGroup_),this.block_.getSvgRoot().appendChild(this.iconGroup_),e.browserEvents.conditionalBind(this.iconGroup_,"mouseup",this,this.iconClick_),this.updateEditable())},e.Icon.prototype.dispose=function(){e.utils.dom.removeNode(this.iconGroup_),this.iconGroup_=null,this.setVisible(!1),this.block_=null},e.Icon.prototype.updateEditable=function(){},e.Icon.prototype.isVisible=function(){return!!this.bubble_},e.Icon.prototype.iconClick_=function(t){this.block_.workspace.isDragging()||this.block_.isInFlyout||e.utils.isRightButton(t)||this.setVisible(!this.isVisible())},e.Icon.prototype.applyColour=function(){this.isVisible()&&this.bubble_.setColour(this.block_.style.colourPrimary)},e.Icon.prototype.setIconLocation=function(t){this.iconXY_=t,this.isVisible()&&this.bubble_.setAnchorLocation(t)},e.Icon.prototype.computeIconLocation=function(){var t=this.block_.getRelativeToSurfaceXY(),n=e.utils.getRelativeXY(this.iconGroup_);t=new e.utils.Coordinate(t.x+n.x+this.SIZE/2,t.y+n.y+this.SIZE/2),e.utils.Coordinate.equals(this.getIconLocation(),t)||this.setIconLocation(t)},e.Icon.prototype.getIconLocation=function(){return this.iconXY_},e.Icon.prototype.getCorrectedSize=function(){return new e.utils.Size(e.Icon.prototype.SIZE,e.Icon.prototype.SIZE-2)},e.Warning=function(t){e.Warning.superClass_.constructor.call(this,t),this.createIcon(),this.text_=Object.create(null)},e.utils.object.inherits(e.Warning,e.Icon),e.Warning.prototype.collapseHidden=!1,e.Warning.prototype.drawIcon_=function(t){e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},t),e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},t),e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},t)},e.Warning.prototype.setVisible=function(t){t!=this.isVisible()&&(e.Events.fire(new(e.Events.get(e.Events.BUBBLE_OPEN))(this.block_,t,"warning")),t?this.createBubble_():this.disposeBubble_())},e.Warning.prototype.createBubble_=function(){this.paragraphElement_=e.Bubble.textToDom(this.getText()),this.bubble_=e.Bubble.createNonEditableBubble(this.paragraphElement_,this.block_,this.iconXY_),this.applyColour()},e.Warning.prototype.disposeBubble_=function(){this.bubble_.dispose(),this.paragraphElement_=this.bubble_=null},e.Warning.prototype.setText=function(t,n){this.text_[n]!=t&&(t?this.text_[n]=t:delete this.text_[n],this.isVisible()&&(this.setVisible(!1),this.setVisible(!0)))},e.Warning.prototype.getText=function(){var n,t=[];for(n in this.text_)t.push(this.text_[n]);return t.join("\n")},e.Warning.prototype.dispose=function(){this.block_.warning=null,e.Icon.prototype.dispose.call(this)},e.Comment=function(t){e.Comment.superClass_.constructor.call(this,t),this.model_=t.commentModel,this.model_.text=this.model_.text||"",this.cachedText_="",this.onInputWrapper_=this.onChangeWrapper_=this.onWheelWrapper_=this.onMouseUpWrapper_=null,this.createIcon()},e.utils.object.inherits(e.Comment,e.Icon),e.Comment.prototype.drawIcon_=function(t){e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},t),e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},t),e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},t)},e.Comment.prototype.createEditor_=function(){this.foreignObject_=e.utils.dom.createSvgElement(e.utils.Svg.FOREIGNOBJECT,{x:e.Bubble.BORDER_WIDTH,y:e.Bubble.BORDER_WIDTH},null);var t=document.createElementNS(e.utils.dom.HTML_NS,"body");t.setAttribute("xmlns",e.utils.dom.HTML_NS),t.className="blocklyMinimalBody";var n=this.textarea_=document.createElementNS(e.utils.dom.HTML_NS,"textarea");return n.className="blocklyCommentTextarea",n.setAttribute("dir",this.block_.RTL?"RTL":"LTR"),n.value=this.model_.text,this.resizeTextarea_(),t.appendChild(n),this.foreignObject_.appendChild(t),this.onMouseUpWrapper_=e.browserEvents.conditionalBind(n,"mouseup",this,this.startEdit_,!0,!0),this.onWheelWrapper_=e.browserEvents.conditionalBind(n,"wheel",this,function(r){r.stopPropagation()}),this.onChangeWrapper_=e.browserEvents.conditionalBind(n,"change",this,function(r){this.cachedText_!=this.model_.text&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this.block_,"comment",null,this.cachedText_,this.model_.text))}),this.onInputWrapper_=e.browserEvents.conditionalBind(n,"input",this,function(r){this.model_.text=n.value}),setTimeout(n.focus.bind(n),0),this.foreignObject_},e.Comment.prototype.updateEditable=function(){e.Comment.superClass_.updateEditable.call(this),this.isVisible()&&(this.disposeBubble_(),this.createBubble_())},e.Comment.prototype.onBubbleResize_=function(){this.isVisible()&&(this.model_.size=this.bubble_.getBubbleSize(),this.resizeTextarea_())},e.Comment.prototype.resizeTextarea_=function(){var t=this.model_.size,n=2*e.Bubble.BORDER_WIDTH,r=t.width-n;t=t.height-n,this.foreignObject_.setAttribute("width",r),this.foreignObject_.setAttribute("height",t),this.textarea_.style.width=r-4+"px",this.textarea_.style.height=t-4+"px"},e.Comment.prototype.setVisible=function(t){t!=this.isVisible()&&(e.Events.fire(new(e.Events.get(e.Events.BUBBLE_OPEN))(this.block_,t,"comment")),(this.model_.pinned=t)?this.createBubble_():this.disposeBubble_())},e.Comment.prototype.createBubble_=function(){!this.block_.isEditable()||e.utils.userAgent.IE?this.createNonEditableBubble_():this.createEditableBubble_()},e.Comment.prototype.createEditableBubble_=function(){this.bubble_=new e.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,this.model_.size.width,this.model_.size.height),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerResizeEvent(this.onBubbleResize_.bind(this)),this.applyColour()},e.Comment.prototype.createNonEditableBubble_=function(){this.paragraphElement_=e.Bubble.textToDom(this.block_.getCommentText()),this.bubble_=e.Bubble.createNonEditableBubble(this.paragraphElement_,this.block_,this.iconXY_),this.applyColour()},e.Comment.prototype.disposeBubble_=function(){this.onMouseUpWrapper_&&(e.browserEvents.unbind(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onWheelWrapper_&&(e.browserEvents.unbind(this.onWheelWrapper_),this.onWheelWrapper_=null),this.onChangeWrapper_&&(e.browserEvents.unbind(this.onChangeWrapper_),this.onChangeWrapper_=null),this.onInputWrapper_&&(e.browserEvents.unbind(this.onInputWrapper_),this.onInputWrapper_=null),this.bubble_.dispose(),this.paragraphElement_=this.foreignObject_=this.textarea_=this.bubble_=null},e.Comment.prototype.startEdit_=function(t){this.bubble_.promote()&&this.textarea_.focus(),this.cachedText_=this.model_.text},e.Comment.prototype.getBubbleSize=function(){return this.model_.size},e.Comment.prototype.setBubbleSize=function(t,n){this.bubble_?this.bubble_.setBubbleSize(t,n):(this.model_.size.width=t,this.model_.size.height=n)},e.Comment.prototype.updateText=function(){this.textarea_?this.textarea_.value=this.model_.text:this.paragraphElement_&&(this.paragraphElement_.firstChild.textContent=this.model_.text)},e.Comment.prototype.dispose=function(){this.block_.comment=null,e.Icon.prototype.dispose.call(this)},e.Css.register(".blocklyCommentTextarea {,background-color: #fef49c;,border: 0;,outline: 0;,margin: 0;,padding: 3px;,resize: none;,display: block;,text-overflow: hidden;,}".split(",")),e.IComponent=function(){},e.IDragTarget=function(){},e.DragTarget=function(){},e.DragTarget.prototype.onDragEnter=function(t){},e.DragTarget.prototype.onDragOver=function(t){},e.DragTarget.prototype.onDragExit=function(t){},e.DragTarget.prototype.onDrop=function(t){},e.DragTarget.prototype.shouldPreventMove=function(t){return!1},e.IDeleteArea=function(){},e.DeleteArea=function(){e.DeleteArea.superClass_.constructor.call(this),this.wouldDelete_=!1},e.utils.object.inherits(e.DeleteArea,e.DragTarget),e.DeleteArea.prototype.wouldDelete=function(t,n){return t instanceof e.BlockSvg?(t=!t.getParent()&&t.isDeletable(),this.updateWouldDelete_(t&&!n)):this.updateWouldDelete_(t.isDeletable()),this.wouldDelete_},e.DeleteArea.prototype.updateWouldDelete_=function(t){this.wouldDelete_=t},e.IFlyout=function(){},e.Flyout=function(t){e.Flyout.superClass_.constructor.call(this),t.setMetrics=this.setMetrics_.bind(this),this.workspace_=new e.WorkspaceSvg(t),this.workspace_.setMetricsManager(new e.FlyoutMetricsManager(this.workspace_,this)),this.workspace_.isFlyout=!0,this.workspace_.setVisible(this.isVisible_),this.id=e.utils.genUid(),this.RTL=!!t.RTL,this.horizontalLayout=!1,this.toolboxPosition_=t.toolboxPosition,this.eventWrappers_=[],this.mats_=[],this.buttons_=[],this.listeners_=[],this.permanentlyDisabled_=[],this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.targetWorkspace=null},e.utils.object.inherits(e.Flyout,e.DeleteArea),e.Flyout.prototype.autoClose=!0,e.Flyout.prototype.isVisible_=!1,e.Flyout.prototype.containerVisible_=!0,e.Flyout.prototype.CORNER_RADIUS=8,e.Flyout.prototype.MARGIN=e.Flyout.prototype.CORNER_RADIUS,e.Flyout.prototype.GAP_X=3*e.Flyout.prototype.MARGIN,e.Flyout.prototype.GAP_Y=3*e.Flyout.prototype.MARGIN,e.Flyout.prototype.SCROLLBAR_MARGIN=2.5,e.Flyout.prototype.width_=0,e.Flyout.prototype.height_=0,e.Flyout.prototype.dragAngleRange_=70,e.Flyout.prototype.createDom=function(t){return this.svgGroup_=e.utils.dom.createSvgElement(t,{class:"blocklyFlyout",style:"display: none"},null),this.svgBackground_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_},e.Flyout.prototype.init=function(t){this.targetWorkspace=t,this.workspace_.targetWorkspace=t,this.workspace_.scrollbar=new e.ScrollbarPair(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),Array.prototype.push.apply(this.eventWrappers_,e.browserEvents.conditionalBind(this.svgGroup_,"wheel",this,this.wheel_)),this.autoClose||(this.filterWrapper_=this.filterForCapacity_.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper_)),Array.prototype.push.apply(this.eventWrappers_,e.browserEvents.conditionalBind(this.svgBackground_,"mousedown",this,this.onMouseDown_)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),t.getComponentManager().addComponent({component:this,weight:1,capabilities:[e.ComponentManager.Capability.DELETE_AREA,e.ComponentManager.Capability.DRAG_TARGET]})},e.Flyout.prototype.dispose=function(){this.hide(),this.workspace_.getComponentManager().removeComponent(this.id),e.browserEvents.unbind(this.eventWrappers_),this.filterWrapper_&&(this.targetWorkspace.removeChangeListener(this.filterWrapper_),this.filterWrapper_=null),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.targetWorkspace=null,this.workspace_.dispose(),this.workspace_=null),this.svgGroup_&&(e.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.targetWorkspace=this.svgBackground_=null},e.Flyout.prototype.getWidth=function(){return this.width_},e.Flyout.prototype.getHeight=function(){return this.height_},e.Flyout.prototype.getFlyoutScale=function(){return this.targetWorkspace.scale},e.Flyout.prototype.getWorkspace=function(){return this.workspace_},e.Flyout.prototype.isVisible=function(){return this.isVisible_},e.Flyout.prototype.setVisible=function(t){var n=t!=this.isVisible();this.isVisible_=t,n&&(this.autoClose||this.workspace_.recordDragTargets(),this.updateDisplay_())},e.Flyout.prototype.setContainerVisible=function(t){var n=t!=this.containerVisible_;this.containerVisible_=t,n&&this.updateDisplay_()},e.Flyout.prototype.updateDisplay_=function(){var t=!!this.containerVisible_&&this.isVisible();this.svgGroup_.style.display=t?"block":"none",this.workspace_.scrollbar.setContainerVisible(t)},e.Flyout.prototype.positionAt_=function(t,n,r,s){this.svgGroup_.setAttribute("width",t),this.svgGroup_.setAttribute("height",n),this.workspace_.setCachedParentSvgSize(t,n),"svg"==this.svgGroup_.tagName?e.utils.dom.setCssTransform(this.svgGroup_,"translate("+r+"px,"+s+"px)"):this.svgGroup_.setAttribute("transform","translate("+r+","+s+")"),(t=this.workspace_.scrollbar)&&(t.setOrigin(r,s),t.resize(),t.hScroll&&t.hScroll.setPosition(t.hScroll.position.x,t.hScroll.position.y),t.vScroll&&t.vScroll.setPosition(t.vScroll.position.x,t.vScroll.position.y))},e.Flyout.prototype.hide=function(){if(this.isVisible()){this.setVisible(!1);for(var n,t=0;n=this.listeners_[t];t++)e.browserEvents.unbind(n);this.listeners_.length=0,this.reflowWrapper_&&(this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowWrapper_=null)}},e.Flyout.prototype.show=function(t){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks_(),"string"==typeof t&&(t=this.getDynamicCategoryContents_(t)),this.setVisible(!0),t=e.utils.toolbox.convertFlyoutDefToJsonArray(t),t=this.createFlyoutInfo_(t),this.layout_(t.contents,t.gaps),this.listeners_.push(e.browserEvents.conditionalBind(this.svgBackground_,"mouseover",this,function(){for(var s,n=this.workspace_.getTopBlocks(!1),r=0;s=n[r];r++)s.removeSelect()})),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity_(),this.position(),this.reflowWrapper_=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper_)},e.Flyout.prototype.createFlyoutInfo_=function(t){var n=[],r=[];this.permanentlyDisabled_.length=0;for(var b,s=this.horizontalLayout?this.GAP_X:this.GAP_Y,u=0;b=t[u];u++)switch(b.custom&&(b=this.getDynamicCategoryContents_(b.custom),b=e.utils.toolbox.convertFlyoutDefToJsonArray(b),t.splice.apply(t,[u,1].concat(b)),b=t[u]),b.kind.toUpperCase()){case"BLOCK":var x=b,B=this.getBlockXml_(x);b=this.createBlock_(B),x=parseInt(x.gap||B.getAttribute("gap"),10),r.push(isNaN(x)?s:x),n.push({type:"block",block:b});break;case"SEP":this.addSeparatorGap_(b,r,s);break;case"LABEL":b=this.createButton_(b,!0),n.push({type:"button",button:b}),r.push(s);break;case"BUTTON":b=this.createButton_(b,!1),n.push({type:"button",button:b}),r.push(s)}return{contents:n,gaps:r}},e.Flyout.prototype.getDynamicCategoryContents_=function(t){if("function"!=typeof(t=this.workspace_.targetWorkspace.getToolboxCategoryCallback(t)))throw TypeError("Couldn't find a callback function when opening a toolbox category.");if(t=t(this.workspace_.targetWorkspace),!Array.isArray(t))throw new TypeError("Result of toolbox category callback must be an array.");return t},e.Flyout.prototype.createButton_=function(t,n){if(!e.FlyoutButton)throw Error("Missing require for Blockly.FlyoutButton");return new e.FlyoutButton(this.workspace_,this.targetWorkspace,t,n)},e.Flyout.prototype.createBlock_=function(t){return(t=e.Xml.domToBlock(t,this.workspace_)).isEnabled()||this.permanentlyDisabled_.push(t),t},e.Flyout.prototype.getBlockXml_=function(t){var n=null,r=t.blockxml;if(r&&"string"!=typeof r?n=r:r&&"string"==typeof r?(n=e.Xml.textToDom(r),t.blockxml=n):t.type&&((n=e.utils.xml.createElement("xml")).setAttribute("type",t.type),n.setAttribute("disabled",t.disabled),t.blockxml=n),!n)throw Error("Error: Invalid block definition. Block definition must have blockxml or type.");return n},e.Flyout.prototype.addSeparatorGap_=function(t,n,r){t=parseInt(t.gap,10),!isNaN(t)&&0<n.length?n[n.length-1]=t:n.push(r)},e.Flyout.prototype.clearOldBlocks_=function(){for(var r,t=this.workspace_.getTopBlocks(!1),n=0;r=t[n];n++)r.workspace==this.workspace_&&r.dispose(!1,!1);for(n=0;n<this.mats_.length;n++)(t=this.mats_[n])&&(e.Tooltip.unbindMouseEvents(t),e.utils.dom.removeNode(t));for(n=this.mats_.length=0;t=this.buttons_[n];n++)t.dispose();this.buttons_.length=0,this.workspace_.getPotentialVariableMap().clear()},e.Flyout.prototype.addBlockListeners_=function(t,n,r){this.listeners_.push(e.browserEvents.conditionalBind(t,"mousedown",null,this.blockMouseDown_(n))),this.listeners_.push(e.browserEvents.conditionalBind(r,"mousedown",null,this.blockMouseDown_(n))),this.listeners_.push(e.browserEvents.bind(t,"mouseenter",n,n.addSelect)),this.listeners_.push(e.browserEvents.bind(t,"mouseleave",n,n.removeSelect)),this.listeners_.push(e.browserEvents.bind(r,"mouseenter",n,n.addSelect)),this.listeners_.push(e.browserEvents.bind(r,"mouseleave",n,n.removeSelect))},e.Flyout.prototype.blockMouseDown_=function(t){var n=this;return function(r){var s=n.targetWorkspace.getGesture(r);s&&(s.setStartBlock(t),s.handleFlyoutStart(r,n))}},e.Flyout.prototype.onMouseDown_=function(t){var n=this.targetWorkspace.getGesture(t);n&&n.handleFlyoutStart(t,this)},e.Flyout.prototype.isBlockCreatable_=function(t){return t.isEnabled()},e.Flyout.prototype.createBlock=function(t){var n=null;e.Events.disable();var r=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{n=this.placeNewBlock_(t)}finally{e.Events.enable()}if(e.hideChaff(),t=e.Variables.getAddedVariables(this.targetWorkspace,r),e.Events.isEnabled()){for(e.Events.setGroup(!0),r=0;r<t.length;r++){var s=t[r];e.Events.fire(new(e.Events.get(e.Events.VAR_CREATE))(s))}e.Events.fire(new(e.Events.get(e.Events.BLOCK_CREATE))(n))}return this.autoClose?this.hide():this.filterForCapacity_(),n},e.Flyout.prototype.initFlyoutButton_=function(t,n,r){var s=t.createDom();t.moveTo(n,r),t.show(),this.listeners_.push(e.browserEvents.conditionalBind(s,"mousedown",this,this.onMouseDown_)),this.buttons_.push(t)},e.Flyout.prototype.createRect_=function(t,n,r,s,u){return(n=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{"fill-opacity":0,x:n,y:r,height:s.height,width:s.width},null)).tooltip=t,e.Tooltip.bindMouseEvents(n),this.workspace_.getCanvas().insertBefore(n,t.getSvgRoot()),t.flyoutRect_=n,this.mats_[u]=n},e.Flyout.prototype.moveRectToBlock_=function(t,n){var r=n.getHeightWidth();t.setAttribute("width",r.width),t.setAttribute("height",r.height),n=n.getRelativeToSurfaceXY(),t.setAttribute("y",n.y),t.setAttribute("x",this.RTL?n.x-r.width:n.x)},e.Flyout.prototype.filterForCapacity_=function(){for(var r,t=this.workspace_.getTopBlocks(!1),n=0;r=t[n];n++)if(-1==this.permanentlyDisabled_.indexOf(r))for(var s=this.targetWorkspace.isCapacityAvailable(e.utils.getBlockTypeCounts(r));r;)r.setEnabled(s),r=r.getNextBlock()},e.Flyout.prototype.reflow=function(){this.reflowWrapper_&&this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowInternal_(),this.reflowWrapper_&&this.workspace_.addChangeListener(this.reflowWrapper_)},e.Flyout.prototype.isScrollable=function(){return!!this.workspace_.scrollbar&&this.workspace_.scrollbar.isVisible()},e.Flyout.prototype.placeNewBlock_=function(t){var n=this.targetWorkspace;if(!t.getSvgRoot())throw Error("oldBlock is not rendered.");var r=e.Xml.blockToDom(t,!0);if(n.setResizesEnabled(!1),!(r=e.Xml.domToBlock(r,n)).getSvgRoot())throw Error("block is not rendered.");var s=n.getOriginOffsetInPixels(),u=this.workspace_.getOriginOffsetInPixels();return(t=t.getRelativeToSurfaceXY()).scale(this.workspace_.scale),t=e.utils.Coordinate.sum(u,t),(s=e.utils.Coordinate.difference(t,s)).scale(1/n.scale),r.moveBy(s.x,s.y),r},e.HorizontalFlyout=function(t){e.HorizontalFlyout.superClass_.constructor.call(this,t),this.horizontalLayout=!0},e.utils.object.inherits(e.HorizontalFlyout,e.Flyout),e.HorizontalFlyout.prototype.setMetrics_=function(t){if(this.isVisible()){var n=this.workspace_.getMetricsManager(),r=n.getScrollMetrics(),s=n.getViewMetrics();n=n.getAbsoluteMetrics(),"number"==typeof t.x&&(this.workspace_.scrollX=-(r.left+(r.width-s.width)*t.x)),this.workspace_.translate(this.workspace_.scrollX+n.left,this.workspace_.scrollY+n.top)}},e.HorizontalFlyout.prototype.getX=function(){return 0},e.HorizontalFlyout.prototype.getY=function(){if(!this.isVisible())return 0;var t=this.targetWorkspace.getMetricsManager(),n=t.getAbsoluteMetrics(),r=t.getViewMetrics();t=t.getToolboxMetrics();var s=this.toolboxPosition_==e.utils.toolbox.Position.TOP;return this.targetWorkspace.toolboxPosition==this.toolboxPosition_?this.targetWorkspace.getToolbox()?s?t.height:r.height-this.height_:s?0:r.height:s?0:r.height+n.top-this.height_},e.HorizontalFlyout.prototype.position=function(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var t=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=t.width,this.setBackgroundPath_(t.width-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),t=this.getX();var n=this.getY();this.positionAt_(this.width_,this.height_,t,n)}},e.HorizontalFlyout.prototype.setBackgroundPath_=function(t,n){var r=this.toolboxPosition_==e.utils.toolbox.Position.TOP,s=["M 0,"+(r?0:this.CORNER_RADIUS)];r?(s.push("h",t+2*this.CORNER_RADIUS),s.push("v",n),s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),s.push("h",-t),s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),s.push("h",t),s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),s.push("v",n),s.push("h",-t-2*this.CORNER_RADIUS)),s.push("z"),this.svgBackground_.setAttribute("d",s.join(" "))},e.HorizontalFlyout.prototype.scrollToStart=function(){this.workspace_.scrollbar.setX(this.RTL?1/0:0)},e.HorizontalFlyout.prototype.wheel_=function(t){var n=e.utils.getScrollDeltaPixels(t);if(n=n.x||n.y){var r=this.workspace_.getMetricsManager(),s=r.getScrollMetrics();n=r.getViewMetrics().left-s.left+n,this.workspace_.scrollbar.setX(n),e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation()}t.preventDefault(),t.stopPropagation()},e.HorizontalFlyout.prototype.layout_=function(t,n){this.workspace_.scale=this.targetWorkspace.scale;var r=this.MARGIN,s=r+this.tabWidth_;this.RTL&&(t=t.reverse());for(var b,u=0;b=t[u];u++)if("block"==b.type){for(var Z,x=(b=b.block).getDescendants(!1),B=0;Z=x[B];B++)Z.isInFlyout=!0;b.render(),x=b.getSvgRoot(),B=b.getHeightWidth(),Z=b.outputConnection?this.tabWidth_:0,b.moveBy(Z=this.RTL?s+B.width:s-Z,r),Z=this.createRect_(b,Z,r,B,u),s+=B.width+n[u],this.addBlockListeners_(x,b,Z)}else"button"==b.type&&(this.initFlyoutButton_(b.button,s,r),s+=b.button.width+n[u])},e.HorizontalFlyout.prototype.isDragTowardWorkspace=function(t){t=Math.atan2(t.y,t.x)/Math.PI*180;var n=this.dragAngleRange_;return t<90+n&&t>90-n||t>-90-n&&t<-90+n},e.HorizontalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;var t=this.svgGroup_.getBoundingClientRect(),n=t.top;return this.toolboxPosition_==e.utils.toolbox.Position.TOP?new e.utils.Rect(-1e9,n+t.height,-1e9,1e9):new e.utils.Rect(n,1e9,-1e9,1e9)},e.HorizontalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.getFlyoutScale();for(var s,t=0,n=this.workspace_.getTopBlocks(!1),r=0;s=n[r];r++)t=Math.max(t,s.getHeightWidth().height);if(t+=1.5*this.MARGIN,t*=this.workspace_.scale,this.height_!=(t+=e.Scrollbar.scrollbarThickness)){for(r=0;s=n[r];r++)s.flyoutRect_&&this.moveRectToBlock_(s.flyoutRect_,s);this.targetWorkspace.toolboxPosition!=this.toolboxPosition_||this.toolboxPosition_!=e.utils.toolbox.Position.TOP||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+t),this.height_=t,this.position(),this.targetWorkspace.recordDragTargets()}},e.registry.register(e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,e.registry.DEFAULT,e.HorizontalFlyout),e.VerticalFlyout=function(t){e.VerticalFlyout.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.VerticalFlyout,e.Flyout),e.VerticalFlyout.registryName="verticalFlyout",e.VerticalFlyout.prototype.setMetrics_=function(t){if(this.isVisible()){var n=this.workspace_.getMetricsManager(),r=n.getScrollMetrics(),s=n.getViewMetrics();n=n.getAbsoluteMetrics(),"number"==typeof t.y&&(this.workspace_.scrollY=-(r.top+(r.height-s.height)*t.y)),this.workspace_.translate(this.workspace_.scrollX+n.left,this.workspace_.scrollY+n.top)}},e.VerticalFlyout.prototype.getX=function(){if(!this.isVisible())return 0;var t=this.targetWorkspace.getMetricsManager(),n=t.getAbsoluteMetrics(),r=t.getViewMetrics();return t=t.getToolboxMetrics(),this.targetWorkspace.toolboxPosition==this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_==e.utils.toolbox.Position.LEFT?t.width:r.width-this.width_:this.toolboxPosition_==e.utils.toolbox.Position.LEFT?0:r.width:this.toolboxPosition_==e.utils.toolbox.Position.LEFT?0:r.width+n.left-this.width_},e.VerticalFlyout.prototype.getY=function(){return 0},e.VerticalFlyout.prototype.position=function(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var t=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=t.height,this.setBackgroundPath_(this.width_-this.CORNER_RADIUS,t.height-2*this.CORNER_RADIUS),t=this.getX();var n=this.getY();this.positionAt_(this.width_,this.height_,t,n)}},e.VerticalFlyout.prototype.setBackgroundPath_=function(t,n){var r=this.toolboxPosition_==e.utils.toolbox.Position.RIGHT,s=t+this.CORNER_RADIUS;(s=["M "+(r?s:0)+",0"]).push("h",r?-t:t),s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,r?0:1,r?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),s.push("v",Math.max(0,n)),s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,r?0:1,r?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),s.push("h",r?t:-t),s.push("z"),this.svgBackground_.setAttribute("d",s.join(" "))},e.VerticalFlyout.prototype.scrollToStart=function(){this.workspace_.scrollbar.setY(0)},e.VerticalFlyout.prototype.wheel_=function(t){var n=e.utils.getScrollDeltaPixels(t);if(n.y){var r=this.workspace_.getMetricsManager(),s=r.getScrollMetrics();n=r.getViewMetrics().top-s.top+n.y,this.workspace_.scrollbar.setY(n),e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation()}t.preventDefault(),t.stopPropagation()},e.VerticalFlyout.prototype.layout_=function(t,n){this.workspace_.scale=this.targetWorkspace.scale;for(var b,r=this.MARGIN,s=this.RTL?r:r+this.tabWidth_,u=0;b=t[u];u++)if("block"==b.type){for(var Z,x=(b=b.block).getDescendants(!1),B=0;Z=x[B];B++)Z.isInFlyout=!0;b.render(),x=b.getSvgRoot(),B=b.getHeightWidth(),b.moveBy(Z=b.outputConnection?s-this.tabWidth_:s,r),Z=this.createRect_(b,this.RTL?Z-B.width:Z,r,B,u),this.addBlockListeners_(x,b,Z),r+=B.height+n[u]}else"button"==b.type&&(this.initFlyoutButton_(b.button,s,r),r+=b.button.height+n[u])},e.VerticalFlyout.prototype.isDragTowardWorkspace=function(t){t=Math.atan2(t.y,t.x)/Math.PI*180;var n=this.dragAngleRange_;return t<n&&t>-n||t<-180+n||t>180-n},e.VerticalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;var t=this.svgGroup_.getBoundingClientRect(),n=t.left;return this.toolboxPosition_==e.utils.toolbox.Position.LEFT?new e.utils.Rect(-1e9,1e9,-1e9,n+t.width):new e.utils.Rect(-1e9,1e9,n,1e9)},e.VerticalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.getFlyoutScale();for(var s,t=0,n=this.workspace_.getTopBlocks(!1),r=0;s=n[r];r++){var u=s.getHeightWidth().width;s.outputConnection&&(u-=this.tabWidth_),t=Math.max(t,u)}for(r=0;s=this.buttons_[r];r++)t=Math.max(t,s.width);if(t+=1.5*this.MARGIN+this.tabWidth_,t*=this.workspace_.scale,this.width_!=(t+=e.Scrollbar.scrollbarThickness)){for(r=0;s=n[r];r++){if(this.RTL){u=s.getRelativeToSurfaceXY().x;var b=t/this.workspace_.scale-this.MARGIN;s.outputConnection||(b-=this.tabWidth_),s.moveBy(b-u,0)}s.flyoutRect_&&this.moveRectToBlock_(s.flyoutRect_,s)}if(this.RTL)for(r=0;s=this.buttons_[r];r++)n=s.getPosition().y,s.moveTo(t/this.workspace_.scale-s.width-this.MARGIN-this.tabWidth_,n);this.targetWorkspace.toolboxPosition!=this.toolboxPosition_||this.toolboxPosition_!=e.utils.toolbox.Position.LEFT||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX+t,this.targetWorkspace.scrollY),this.width_=t,this.position(),this.targetWorkspace.recordDragTargets()}},e.registry.register(e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,e.registry.DEFAULT,e.VerticalFlyout),e.FlyoutButton=function(t,n,r,s){this.workspace_=t,this.targetWorkspace_=n,this.text_=r.text,this.position_=new e.utils.Coordinate(0,0),this.isLabel_=s,this.callbackKey_=r.callbackKey||r.callbackkey,this.cssClass_=r["web-class"]||null,this.onMouseUpWrapper_=null,this.info=r},e.FlyoutButton.MARGIN_X=5,e.FlyoutButton.MARGIN_Y=2,e.FlyoutButton.prototype.width=0,e.FlyoutButton.prototype.height=0,e.FlyoutButton.prototype.createDom=function(){var t=this.isLabel_?"blocklyFlyoutLabel":"blocklyFlyoutButton";if(this.cssClass_&&(t+=" "+this.cssClass_),this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:t},this.workspace_.getCanvas()),!this.isLabel_)var n=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyFlyoutButtonShadow",rx:4,ry:4,x:1,y:1},this.svgGroup_);t=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:this.isLabel_?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:4,ry:4},this.svgGroup_);var r=e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:this.isLabel_?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup_),s=e.utils.replaceMessageReferences(this.text_);this.workspace_.RTL&&(s+="\u200f"),r.textContent=s,this.isLabel_&&(this.svgText_=r,this.workspace_.getThemeManager().subscribe(this.svgText_,"flyoutForegroundColour","fill"));var u=e.utils.style.getComputedStyle(r,"fontSize"),b=e.utils.style.getComputedStyle(r,"fontWeight"),x=e.utils.style.getComputedStyle(r,"fontFamily");return this.width=e.utils.dom.getFastTextWidthWithSizeString(r,u,b,x),s=e.utils.dom.measureFontMetrics(s,u,b,x),this.height=s.height,this.isLabel_||(this.width+=2*e.FlyoutButton.MARGIN_X,this.height+=2*e.FlyoutButton.MARGIN_Y,n.setAttribute("width",this.width),n.setAttribute("height",this.height)),t.setAttribute("width",this.width),t.setAttribute("height",this.height),r.setAttribute("x",this.width/2),r.setAttribute("y",this.height/2-s.height/2+s.baseline),this.updateTransform_(),this.onMouseUpWrapper_=e.browserEvents.conditionalBind(this.svgGroup_,"mouseup",this,this.onMouseUp_),this.svgGroup_},e.FlyoutButton.prototype.show=function(){this.updateTransform_(),this.svgGroup_.setAttribute("display","block")},e.FlyoutButton.prototype.updateTransform_=function(){this.svgGroup_.setAttribute("transform","translate("+this.position_.x+","+this.position_.y+")")},e.FlyoutButton.prototype.moveTo=function(t,n){this.position_.x=t,this.position_.y=n,this.updateTransform_()},e.FlyoutButton.prototype.isLabel=function(){return this.isLabel_},e.FlyoutButton.prototype.getPosition=function(){return this.position_},e.FlyoutButton.prototype.getButtonText=function(){return this.text_},e.FlyoutButton.prototype.getTargetWorkspace=function(){return this.targetWorkspace_},e.FlyoutButton.prototype.dispose=function(){this.onMouseUpWrapper_&&e.browserEvents.unbind(this.onMouseUpWrapper_),this.svgGroup_&&e.utils.dom.removeNode(this.svgGroup_),this.svgText_&&this.workspace_.getThemeManager().unsubscribe(this.svgText_)},e.FlyoutButton.prototype.onMouseUp_=function(t){(t=this.targetWorkspace_.getGesture(t))&&t.cancel(),this.isLabel_&&this.callbackKey_?console.warn("Labels should not have callbacks. Label text: "+this.text_):this.isLabel_||this.callbackKey_&&this.targetWorkspace_.getButtonCallback(this.callbackKey_)?this.isLabel_||this.targetWorkspace_.getButtonCallback(this.callbackKey_)(this):console.warn("Buttons should have callbacks. Button text: "+this.text_)},e.Css.register(".blocklyFlyoutButton {,fill: #888;,cursor: default;,},.blocklyFlyoutButtonShadow {,fill: #666;,},.blocklyFlyoutButton:hover {,fill: #aaa;,},.blocklyFlyoutLabel {,cursor: default;,},.blocklyFlyoutLabelBackground {,opacity: 0;,}".split(",")),e.Generator=function(t){this.name_=t,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")},e.Generator.prototype.INFINITE_LOOP_TRAP=null,e.Generator.prototype.STATEMENT_PREFIX=null,e.Generator.prototype.STATEMENT_SUFFIX=null,e.Generator.prototype.INDENT="  ",e.Generator.prototype.COMMENT_WRAP=60,e.Generator.prototype.ORDER_OVERRIDES=[],e.Generator.prototype.isInitialized=null,e.Generator.prototype.workspaceToCode=function(t){t||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),t=e.getMainWorkspace());var n=[];this.init(t),t=t.getTopBlocks(!0);for(var s,r=0;s=t[r];r++){var u=this.blockToCode(s);Array.isArray(u)&&(u=u[0]),u&&(s.outputConnection&&(u=this.scrubNakedValue(u),this.STATEMENT_PREFIX&&!s.suppressPrefixSuffix&&(u=this.injectId(this.STATEMENT_PREFIX,s)+u),this.STATEMENT_SUFFIX&&!s.suppressPrefixSuffix&&(u+=this.injectId(this.STATEMENT_SUFFIX,s))),n.push(u))}return n=n.join("\n"),(n=(n=(n=this.finish(n)).replace(/^\s+\n/,"")).replace(/\n\s+$/,"\n")).replace(/[ \t]+\n/g,"\n")},e.Generator.prototype.prefixLines=function(t,n){return n+t.replace(/(?!\n$)\n/g,"\n"+n)},e.Generator.prototype.allNestedComments=function(t){var n=[];t=t.getDescendants(!0);for(var r=0;r<t.length;r++){var s=t[r].getCommentText();s&&n.push(s)}return n.length&&n.push(""),n.join("\n")},e.Generator.prototype.blockToCode=function(t,n){if(!1===this.isInitialized&&console.warn("Generator init was not called before blockToCode was called."),!t)return"";if(!t.isEnabled())return n?"":this.blockToCode(t.getNextBlock());if(t.isInsertionMarker())return n?"":this.blockToCode(t.getChildren(!1)[0]);var r=this[t.type];if("function"!=typeof r)throw Error('Language "'+this.name_+'" does not know how to generate code for block type "'+t.type+'".');if(r=r.call(t,t),Array.isArray(r)){if(!t.outputConnection)throw TypeError("Expecting string from statement block: "+t.type);return[this.scrub_(t,r[0],n),r[1]]}if("string"==typeof r)return this.STATEMENT_PREFIX&&!t.suppressPrefixSuffix&&(r=this.injectId(this.STATEMENT_PREFIX,t)+r),this.STATEMENT_SUFFIX&&!t.suppressPrefixSuffix&&(r+=this.injectId(this.STATEMENT_SUFFIX,t)),this.scrub_(t,r,n);if(null===r)return"";throw SyntaxError("Invalid code generated: "+r)},e.Generator.prototype.valueToCode=function(t,n,r){if(isNaN(r))throw TypeError("Expecting valid order from block: "+t.type);var s=t.getInputTargetBlock(n);if(!s||""===(n=this.blockToCode(s)))return"";if(!Array.isArray(n))throw TypeError("Expecting tuple from value block: "+s.type);if(t=n[0],n=n[1],isNaN(n))throw TypeError("Expecting valid order from value block: "+s.type);if(!t)return"";s=!1;var u=Math.floor(r),b=Math.floor(n);if(u<=b&&(u!=b||0!=u&&99!=u))for(s=!0,u=0;u<this.ORDER_OVERRIDES.length;u++)if(this.ORDER_OVERRIDES[u][0]==r&&this.ORDER_OVERRIDES[u][1]==n){s=!1;break}return s&&(t="("+t+")"),t},e.Generator.prototype.statementToCode=function(t,n){if(t=t.getInputTargetBlock(n),"string"!=typeof(n=this.blockToCode(t)))throw TypeError("Expecting code from statement block: "+(t&&t.type));return n&&(n=this.prefixLines(n,this.INDENT)),n},e.Generator.prototype.addLoopTrap=function(t,n){return this.INFINITE_LOOP_TRAP&&(t=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,n),this.INDENT)+t),this.STATEMENT_SUFFIX&&!n.suppressPrefixSuffix&&(t=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,n),this.INDENT)+t),this.STATEMENT_PREFIX&&!n.suppressPrefixSuffix&&(t+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,n),this.INDENT)),t},e.Generator.prototype.injectId=function(t,n){return n=n.id.replace(/\$/g,"$$$$"),t.replace(/%1/g,"'"+n+"'")},e.Generator.prototype.RESERVED_WORDS_="",e.Generator.prototype.addReservedWords=function(t){this.RESERVED_WORDS_+=t+","},e.Generator.prototype.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",Object.defineProperty(e.Generator.prototype,"variableDB_",{get:function(){return e.utils.deprecation.warn("variableDB_","May 2021","May 2026","nameDB_"),this.nameDB_},set:function(t){e.utils.deprecation.warn("variableDB_","May 2021","May 2026","nameDB_"),this.nameDB_=t}}),e.Generator.prototype.provideFunction_=function(t,n){if(!this.definitions_[t]){var s,r=this.nameDB_.getDistinctName(t,e.PROCEDURE_CATEGORY_NAME);for(this.functionNames_[t]=r,n=n.join("\n").replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,r);s!=n;)s=n,n=n.replace(/^(( {2})*) {2}/gm,"$1\0");n=n.replace(/\0/g,this.INDENT),this.definitions_[t]=n}return this.functionNames_[t]},e.Generator.prototype.init=function(t){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)},e.Generator.prototype.scrub_=function(t,n,r){return n},e.Generator.prototype.finish=function(t){return delete this.definitions_,delete this.functionNames_,t},e.Generator.prototype.scrubNakedValue=function(t){return t},e.IToolboxItem=function(){},e.ISelectableToolboxItem=function(){},e.ICollapsibleToolboxItem=function(){},e.ToolboxItem=function(t,n,r){this.id_=t.toolboxitemid||e.utils.IdGenerator.getNextUniqueId(),this.level_=(this.parent_=r||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=t,this.parentToolbox_=n,this.workspace_=this.parentToolbox_.getWorkspace()},e.ToolboxItem.prototype.init=function(){},e.ToolboxItem.prototype.getDiv=function(){return null},e.ToolboxItem.prototype.getId=function(){return this.id_},e.ToolboxItem.prototype.getParent=function(){return null},e.ToolboxItem.prototype.getLevel=function(){return this.level_},e.ToolboxItem.prototype.isSelectable=function(){return!1},e.ToolboxItem.prototype.isCollapsible=function(){return!1},e.ToolboxItem.prototype.dispose=function(){},e.ToolboxCategory=function(t,n,r){e.ToolboxCategory.superClass_.constructor.call(this,t,n,r),this.name_=e.utils.replaceMessageReferences(t.name),this.colour_=this.getColour_(t),this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.cssConfig_=this.makeDefaultCssConfig_(),e.utils.object.mixin(this.cssConfig_,t.cssconfig||t.cssConfig),this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.parseContents_(t)},e.utils.object.inherits(e.ToolboxCategory,e.ToolboxItem),e.ToolboxCategory.registrationName="category",e.ToolboxCategory.nestedPadding=19,e.ToolboxCategory.borderWidth=8,e.ToolboxCategory.defaultBackgroundColour="#57e",e.ToolboxCategory.prototype.makeDefaultCssConfig_=function(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}},e.ToolboxCategory.prototype.parseContents_=function(t){var n=t.contents;if(t.custom)this.flyoutItems_=t.custom;else if(n){t=0;for(var r;r=n[t];t++)this.flyoutItems_.push(r)}},e.ToolboxCategory.prototype.init=function(){this.createDom_(),"true"==this.toolboxItemDef_.hidden&&this.hide()},e.ToolboxCategory.prototype.createDom_=function(){return this.htmlDiv_=this.createContainer_(),e.utils.aria.setRole(this.htmlDiv_,e.utils.aria.Role.TREEITEM),e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.SELECTED,!1),e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.LEVEL,this.level_),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),e.utils.aria.setRole(this.iconDom_,e.utils.aria.Role.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_),e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.LABELLEDBY,this.labelDom_.getAttribute("id")),this.addColourBorder_(this.colour_),this.htmlDiv_},e.ToolboxCategory.prototype.createContainer_=function(){var t=document.createElement("div");return e.utils.dom.addClass(t,this.cssConfig_.container),t},e.ToolboxCategory.prototype.createRowContainer_=function(){var t=document.createElement("div");e.utils.dom.addClass(t,this.cssConfig_.row);var n=e.ToolboxCategory.nestedPadding*this.getLevel();return n=n.toString()+"px",this.workspace_.RTL?t.style.paddingRight=n:t.style.paddingLeft=n,t},e.ToolboxCategory.prototype.createRowContentsContainer_=function(){var t=document.createElement("div");return e.utils.dom.addClass(t,this.cssConfig_.rowcontentcontainer),t},e.ToolboxCategory.prototype.createIconDom_=function(){var t=document.createElement("span");return this.parentToolbox_.isHorizontal()||e.utils.dom.addClass(t,this.cssConfig_.icon),t.style.display="inline-block",t},e.ToolboxCategory.prototype.createLabelDom_=function(t){var n=document.createElement("span");return n.setAttribute("id",this.getId()+".label"),n.textContent=t,e.utils.dom.addClass(n,this.cssConfig_.label),n},e.ToolboxCategory.prototype.refreshTheme=function(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)},e.ToolboxCategory.prototype.addColourBorder_=function(t){t&&(t=e.ToolboxCategory.borderWidth+"px solid "+(t||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=t:this.rowDiv_.style.borderLeft=t)},e.ToolboxCategory.prototype.getColour_=function(t){var n=t.categorystyle||t.categoryStyle;return(t=t.colour)&&n?(console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour'),""):n?this.getColourfromStyle_(n):this.parseColour_(t)},e.ToolboxCategory.prototype.getColourfromStyle_=function(t){var n=this.workspace_.getTheme();if(t&&n){if((n=n.categoryStyles[t])&&n.colour)return this.parseColour_(n.colour);console.warn('Style "'+t+'" must exist and contain a colour value')}return""},e.ToolboxCategory.prototype.getClickTarget=function(){return this.rowDiv_},e.ToolboxCategory.prototype.parseColour_=function(t){if(null==(t=e.utils.replaceMessageReferences(t))||""===t)return"";var n=Number(t);return isNaN(n)?(n=e.utils.colour.parse(t))?n:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+t),""):e.hueToHex(n)},e.ToolboxCategory.prototype.openIcon_=function(t){t&&(e.utils.dom.removeClasses(t,this.cssConfig_.closedicon),e.utils.dom.addClass(t,this.cssConfig_.openicon))},e.ToolboxCategory.prototype.closeIcon_=function(t){t&&(e.utils.dom.removeClasses(t,this.cssConfig_.openicon),e.utils.dom.addClass(t,this.cssConfig_.closedicon))},e.ToolboxCategory.prototype.setVisible_=function(t){this.htmlDiv_.style.display=t?"block":"none",this.isHidden_=!t,this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()},e.ToolboxCategory.prototype.hide=function(){this.setVisible_(!1)},e.ToolboxCategory.prototype.show=function(){this.setVisible_(!0)},e.ToolboxCategory.prototype.isVisible=function(){return!this.isHidden_&&this.allAncestorsExpanded_()},e.ToolboxCategory.prototype.allAncestorsExpanded_=function(){for(var t=this;t.getParent();)if(!(t=t.getParent()).isExpanded())return!1;return!0},e.ToolboxCategory.prototype.isSelectable=function(){return this.isVisible()&&!this.isDisabled_},e.ToolboxCategory.prototype.onClick=function(t){},e.ToolboxCategory.prototype.setSelected=function(t){if(t){var n=this.parseColour_(e.ToolboxCategory.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||n,e.utils.dom.addClass(this.rowDiv_,this.cssConfig_.selected)}else this.rowDiv_.style.backgroundColor="",e.utils.dom.removeClass(this.rowDiv_,this.cssConfig_.selected);e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.SELECTED,t)},e.ToolboxCategory.prototype.setDisabled=function(t){this.isDisabled_=t,this.getDiv().setAttribute("disabled",t),t?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")},e.ToolboxCategory.prototype.getName=function(){return this.name_},e.ToolboxCategory.prototype.getParent=function(){return this.parent_},e.ToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},e.ToolboxCategory.prototype.getContents=function(){return this.flyoutItems_},e.ToolboxCategory.prototype.updateFlyoutContents=function(t){this.flyoutItems_=[],"string"==typeof t?this.toolboxItemDef_.custom=t:(delete this.toolboxItemDef_.custom,this.toolboxItemDef_.contents=e.utils.toolbox.convertFlyoutDefToJsonArray(t)),this.parseContents_(this.toolboxItemDef_)},e.ToolboxCategory.prototype.dispose=function(){e.utils.dom.removeNode(this.htmlDiv_)},e.Css.register([".blocklyTreeRow:not(.blocklyTreeSelected):hover {","background-color: rgba(255, 255, 255, 0.2);","}",'.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {',"margin: 1px 5px 1px 0;","}",'.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {',"margin: 1px 0 1px 5px;","}",".blocklyTreeRow {","height: 22px;","line-height: 22px;","margin-bottom: 3px;","padding-right: 8px;","white-space: nowrap;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {',"margin-left: 8px;","padding-right: 0px","}",".blocklyTreeIcon {","background-image: url(<<<PATH>>>/sprites.png);","height: 16px;","vertical-align: middle;","visibility: hidden;","width: 16px;","}",".blocklyTreeIconClosed {","background-position: -32px -1px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {',"background-position: 0 -1px;","}",".blocklyTreeSelected>.blocklyTreeIconClosed {","background-position: -32px -17px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {',"background-position: 0 -17px;","}",".blocklyTreeIconOpen {","background-position: -16px -1px;","}",".blocklyTreeSelected>.blocklyTreeIconOpen {","background-position: -16px -17px;","}",".blocklyTreeLabel {","cursor: default;","font: 16px sans-serif;","padding: 0 3px;","vertical-align: middle;","}",".blocklyToolboxDelete .blocklyTreeLabel {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyTreeSelected .blocklyTreeLabel {","color: #fff;","}"]),e.registry.register(e.registry.Type.TOOLBOX_ITEM,e.ToolboxCategory.registrationName,e.ToolboxCategory),e.ToolboxSeparator=function(t,n){e.ToolboxSeparator.superClass_.constructor.call(this,t,n),this.cssConfig_={container:"blocklyTreeSeparator"},e.utils.object.mixin(this.cssConfig_,t.cssconfig||t.cssConfig)},e.utils.object.inherits(e.ToolboxSeparator,e.ToolboxItem),e.ToolboxSeparator.registrationName="sep",e.ToolboxSeparator.prototype.init=function(){this.createDom_()},e.ToolboxSeparator.prototype.createDom_=function(){var t=document.createElement("div");return e.utils.dom.addClass(t,this.cssConfig_.container),this.htmlDiv_=t},e.ToolboxSeparator.prototype.getDiv=function(){return this.htmlDiv_},e.ToolboxSeparator.prototype.dispose=function(){e.utils.dom.removeNode(this.htmlDiv_)},e.Css.register('.blocklyTreeSeparator {,border-bottom: solid #e5e5e5 1px;,height: 0;,margin: 5px 0;,},.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {,border-right: solid #e5e5e5 1px;,border-bottom: none;,height: auto;,margin: 0 5px 0 5px;,padding: 5px 0;,width: 0;,}'.split(",")),e.registry.register(e.registry.Type.TOOLBOX_ITEM,e.ToolboxSeparator.registrationName,e.ToolboxSeparator),e.CollapsibleToolboxCategory=function(t,n,r){this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[],e.CollapsibleToolboxCategory.superClass_.constructor.call(this,t,n,r)},e.utils.object.inherits(e.CollapsibleToolboxCategory,e.ToolboxCategory),e.CollapsibleToolboxCategory.registrationName="collapsibleCategory",e.CollapsibleToolboxCategory.prototype.makeDefaultCssConfig_=function(){var t=e.CollapsibleToolboxCategory.superClass_.makeDefaultCssConfig_.call(this);return t.contents="blocklyToolboxContents",t},e.CollapsibleToolboxCategory.prototype.parseContents_=function(t){var n=t.contents,r=!0;if(t.custom)this.flyoutItems_=t.custom;else if(n){t=0;for(var s;s=n[t];t++)!e.registry.hasItem(e.registry.Type.TOOLBOX_ITEM,s.kind)||s.kind.toLowerCase()==e.ToolboxSeparator.registrationName&&r?(this.flyoutItems_.push(s),r=!0):(this.createToolboxItem_(s),r=!1)}},e.CollapsibleToolboxCategory.prototype.createToolboxItem_=function(t){var n=t.kind;"CATEGORY"==n.toUpperCase()&&e.utils.toolbox.isCategoryCollapsible(t)&&(n=e.CollapsibleToolboxCategory.registrationName),t=new(e.registry.getClass(e.registry.Type.TOOLBOX_ITEM,n))(t,this.parentToolbox_,this),this.toolboxItems_.push(t)},e.CollapsibleToolboxCategory.prototype.init=function(){e.CollapsibleToolboxCategory.superClass_.init.call(this),this.setExpanded("true"==this.toolboxItemDef_.expanded||this.toolboxItemDef_.expanded)},e.CollapsibleToolboxCategory.prototype.createDom_=function(){e.CollapsibleToolboxCategory.superClass_.createDom_.call(this);var t=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(t),e.utils.aria.setRole(this.subcategoriesDiv_,e.utils.aria.Role.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.htmlDiv_},e.CollapsibleToolboxCategory.prototype.createIconDom_=function(){var t=document.createElement("span");return this.parentToolbox_.isHorizontal()||(e.utils.dom.addClass(t,this.cssConfig_.icon),t.style.visibility="visible"),t.style.display="inline-block",t},e.CollapsibleToolboxCategory.prototype.createSubCategoriesDom_=function(t){var n=document.createElement("div");e.utils.dom.addClass(n,this.cssConfig_.contents);for(var r=0;r<t.length;r++){var s=t[r];s.init();var u=s.getDiv();n.appendChild(u),s.getClickTarget&&s.getClickTarget().setAttribute("id",s.getId())}return n},e.CollapsibleToolboxCategory.prototype.setExpanded=function(t){this.expanded_!=t&&((this.expanded_=t)?(this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_)):(this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)),e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.EXPANDED,t),this.parentToolbox_.handleToolboxItemResize())},e.CollapsibleToolboxCategory.prototype.setVisible_=function(t){this.htmlDiv_.style.display=t?"block":"none";for(var r,n=0;r=this.getChildToolboxItems()[n];n++)r.setVisible_(t);this.isHidden_=!t,this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()},e.CollapsibleToolboxCategory.prototype.isExpanded=function(){return this.expanded_},e.CollapsibleToolboxCategory.prototype.isCollapsible=function(){return!0},e.CollapsibleToolboxCategory.prototype.onClick=function(t){this.toggleExpanded()},e.CollapsibleToolboxCategory.prototype.toggleExpanded=function(){this.setExpanded(!this.expanded_)},e.CollapsibleToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},e.CollapsibleToolboxCategory.prototype.getChildToolboxItems=function(){return this.toolboxItems_},e.registry.register(e.registry.Type.TOOLBOX_ITEM,e.CollapsibleToolboxCategory.registrationName,e.CollapsibleToolboxCategory),e.Events.ToolboxItemSelect=function(t,n,r){e.Events.ToolboxItemSelect.superClass_.constructor.call(this,r),this.oldItem=t,this.newItem=n},e.utils.object.inherits(e.Events.ToolboxItemSelect,e.Events.UiBase),e.Events.ToolboxItemSelect.prototype.type=e.Events.TOOLBOX_ITEM_SELECT,e.Events.ToolboxItemSelect.prototype.toJson=function(){var t=e.Events.ToolboxItemSelect.superClass_.toJson.call(this);return t.oldItem=this.oldItem,t.newItem=this.newItem,t},e.Events.ToolboxItemSelect.prototype.fromJson=function(t){e.Events.ToolboxItemSelect.superClass_.fromJson.call(this,t),this.oldItem=t.oldItem,this.newItem=t.newItem},e.registry.register(e.registry.Type.EVENT,e.Events.TOOLBOX_ITEM_SELECT,e.Events.ToolboxItemSelect),e.IAutoHideable=function(){},e.IStyleable=function(){},e.IToolbox=function(){},e.Toolbox=function(t){e.Toolbox.superClass_.constructor.call(this),this.workspace_=t,this.id="toolbox",this.toolboxDef_=t.options.languageTree||{contents:[]},this.horizontalLayout_=t.options.horizontalLayout,this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.contents_=[],this.height_=this.width_=0,this.RTL=t.options.RTL,this.flyout_=null,this.contentMap_=Object.create(null),this.toolboxPosition=t.options.toolboxPosition,this.previouslySelectedItem_=this.selectedItem_=null,this.boundEvents_=[]},e.utils.object.inherits(e.Toolbox,e.DeleteArea),e.Toolbox.prototype.onShortcut=function(t){return!1},e.Toolbox.prototype.init=function(){var t=this.workspace_,n=t.getParentSvg();this.flyout_=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),e.utils.dom.insertAfter(this.flyout_.createDom("svg"),n),this.setVisible(!0),this.flyout_.init(t),this.render(this.toolboxDef_),(t=t.getThemeManager()).subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),t.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[e.ComponentManager.Capability.AUTOHIDEABLE,e.ComponentManager.Capability.DELETE_AREA,e.ComponentManager.Capability.DRAG_TARGET]})},e.Toolbox.prototype.createDom_=function(t){t=t.getParentSvg();var n=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,e.utils.aria.setRole(this.contentsDiv_,e.utils.aria.Role.TREE),n.appendChild(this.contentsDiv_),t.parentNode.insertBefore(n,t),this.attachEvents_(n,this.contentsDiv_),n},e.Toolbox.prototype.createContainer_=function(){var t=document.createElement("div");return t.setAttribute("layout",this.isHorizontal()?"h":"v"),e.utils.dom.addClass(t,"blocklyToolboxDiv"),e.utils.dom.addClass(t,"blocklyNonSelectable"),t.setAttribute("dir",this.RTL?"RTL":"LTR"),t},e.Toolbox.prototype.createContentsContainer_=function(){var t=document.createElement("div");return e.utils.dom.addClass(t,"blocklyToolboxContents"),this.isHorizontal()&&(t.style.flexDirection="row"),t},e.Toolbox.prototype.attachEvents_=function(t,n){t=e.browserEvents.conditionalBind(t,"click",this,this.onClick_,!1,!0),this.boundEvents_.push(t),n=e.browserEvents.conditionalBind(n,"keydown",this,this.onKeyDown_,!1,!0),this.boundEvents_.push(n)},e.Toolbox.prototype.onClick_=function(t){if(e.utils.isRightButton(t)||t.target==this.HtmlDiv)e.hideChaff(!1);else{var n=t.target.getAttribute("id");n&&(n=this.getToolboxItemById(n)).isSelectable()&&(this.setSelectedItem(n),n.onClick(t)),e.hideChaff(!0)}e.Touch.clearTouchIdentifier()},e.Toolbox.prototype.onKeyDown_=function(t){var n=!1;switch(t.keyCode){case e.utils.KeyCodes.DOWN:n=this.selectNext_();break;case e.utils.KeyCodes.UP:n=this.selectPrevious_();break;case e.utils.KeyCodes.LEFT:n=this.selectParent_();break;case e.utils.KeyCodes.RIGHT:n=this.selectChild_();break;case e.utils.KeyCodes.ENTER:case e.utils.KeyCodes.SPACE:this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),n=!0);break;default:n=!1}!n&&this.selectedItem_&&this.selectedItem_.onKeyDown&&(n=this.selectedItem_.onKeyDown(t)),n&&t.preventDefault()},e.Toolbox.prototype.createFlyout_=function(){var t=this.workspace_,n=new e.Options({parentWorkspace:t,rtl:t.RTL,oneBasedIndex:t.options.oneBasedIndex,horizontalLayout:t.horizontalLayout,renderer:t.options.renderer,rendererOverrides:t.options.rendererOverrides,move:{scrollbars:!0}});return n.toolboxPosition=t.options.toolboxPosition,new(e.registry.getClassFromOptions(t.horizontalLayout?e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX:e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,t.options,!0))(n)},e.Toolbox.prototype.render=function(t){this.toolboxDef_=t;for(var n=0;n<this.contents_.length;n++){var r=this.contents_[n];r&&r.dispose()}this.contents_=[],this.contentMap_=Object.create(null),this.renderContents_(t.contents),this.position(),this.handleToolboxItemResize()},e.Toolbox.prototype.renderContents_=function(t){for(var s,n=document.createDocumentFragment(),r=0;s=t[r];r++)this.createToolboxItem_(s,n);this.contentsDiv_.appendChild(n)},e.Toolbox.prototype.createToolboxItem_=function(t,n){var r=t.kind;"CATEGORY"==r.toUpperCase()&&e.utils.toolbox.isCategoryCollapsible(t)&&(r=e.CollapsibleToolboxCategory.registrationName),(r=e.registry.getClass(e.registry.Type.TOOLBOX_ITEM,r.toLowerCase()))&&(t=new r(t,this),this.addToolboxItem_(t),t.init(),(r=t.getDiv())&&n.appendChild(r),t.getClickTarget&&t.getClickTarget().setAttribute("id",t.getId()))},e.Toolbox.prototype.addToolboxItem_=function(t){if(this.contents_.push(t),this.contentMap_[t.getId()]=t,t.isCollapsible())for(var r,n=0;r=t.getChildToolboxItems()[n];n++)this.addToolboxItem_(r)},e.Toolbox.prototype.getToolboxItems=function(){return this.contents_},e.Toolbox.prototype.addStyle=function(t){e.utils.dom.addClass(this.HtmlDiv,t)},e.Toolbox.prototype.removeStyle=function(t){e.utils.dom.removeClass(this.HtmlDiv,t)},e.Toolbox.prototype.getClientRect=function(){if(!this.HtmlDiv||!this.isVisible_)return null;var t=this.HtmlDiv.getBoundingClientRect(),n=t.top,r=n+t.height,s=t.left;return t=s+t.width,this.toolboxPosition==e.utils.toolbox.Position.TOP?new e.utils.Rect(-1e7,r,-1e7,1e7):this.toolboxPosition==e.utils.toolbox.Position.BOTTOM?new e.utils.Rect(n,1e7,-1e7,1e7):this.toolboxPosition==e.utils.toolbox.Position.LEFT?new e.utils.Rect(-1e7,1e7,-1e7,t):new e.utils.Rect(-1e7,1e7,s,1e7)},e.Toolbox.prototype.wouldDelete=function(t,n){return this.updateWouldDelete_(t instanceof e.BlockSvg?!t.getParent()&&t.isDeletable():t.isDeletable()),this.wouldDelete_},e.Toolbox.prototype.onDragEnter=function(t){this.updateCursorDeleteStyle_(!0)},e.Toolbox.prototype.onDragExit=function(t){this.updateCursorDeleteStyle_(!1)},e.Toolbox.prototype.onDrop=function(t){this.updateCursorDeleteStyle_(!1)},e.Toolbox.prototype.updateWouldDelete_=function(t){t!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=t,this.updateCursorDeleteStyle_(!0))},e.Toolbox.prototype.updateCursorDeleteStyle_=function(t){var n=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";t?this.addStyle(n):this.removeStyle(n)},e.Toolbox.prototype.getToolboxItemById=function(t){return this.contentMap_[t]||null},e.Toolbox.prototype.getWidth=function(){return this.width_},e.Toolbox.prototype.getHeight=function(){return this.height_},e.Toolbox.prototype.getFlyout=function(){return this.flyout_},e.Toolbox.prototype.getWorkspace=function(){return this.workspace_},e.Toolbox.prototype.getSelectedItem=function(){return this.selectedItem_},e.Toolbox.prototype.getPreviouslySelectedItem=function(){return this.previouslySelectedItem_},e.Toolbox.prototype.isHorizontal=function(){return this.horizontalLayout_},e.Toolbox.prototype.position=function(){var t=this.workspace_.getMetrics(),n=this.HtmlDiv;n&&(this.horizontalLayout_?(n.style.left="0",n.style.height="auto",n.style.width="100%",this.height_=n.offsetHeight,this.width_=t.viewWidth,this.toolboxPosition==e.utils.toolbox.Position.TOP?n.style.top="0":n.style.bottom="0"):(this.toolboxPosition==e.utils.toolbox.Position.RIGHT?n.style.right="0":n.style.left="0",n.style.height="100%",this.width_=n.offsetWidth,this.height_=t.viewHeight),this.flyout_.position())},e.Toolbox.prototype.handleToolboxItemResize=function(){var t=this.workspace_,n=this.HtmlDiv.getBoundingClientRect();t.translate(this.toolboxPosition==e.utils.toolbox.Position.LEFT?t.scrollX+n.width:t.scrollX,this.toolboxPosition==e.utils.toolbox.Position.TOP?t.scrollY+n.height:t.scrollY),e.svgResize(t)},e.Toolbox.prototype.clearSelection=function(){this.setSelectedItem(null)},e.Toolbox.prototype.refreshTheme=function(){for(var t=0;t<this.contents_.length;t++){var n=this.contents_[t];n.refreshTheme&&n.refreshTheme()}},e.Toolbox.prototype.refreshSelection=function(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout_.show(this.selectedItem_.getContents())},e.Toolbox.prototype.setVisible=function(t){this.isVisible_!==t&&(this.HtmlDiv.style.display=t?"block":"none",this.isVisible_=t,this.workspace_.recordDragTargets())},e.Toolbox.prototype.autoHide=function(t){!t&&this.flyout_&&this.flyout_.autoClose&&this.clearSelection()},e.Toolbox.prototype.setSelectedItem=function(t){var n=this.selectedItem_;!t&&!n||t&&!t.isSelectable()||(this.shouldDeselectItem_(n,t)&&null!=n&&this.deselectItem_(n),this.shouldSelectItem_(n,t)&&null!=t&&this.selectItem_(n,t),this.updateFlyout_(n,t),this.fireSelectEvent_(n,t))},e.Toolbox.prototype.shouldDeselectItem_=function(t,n){return null!=t&&(!t.isCollapsible()||t!=n)},e.Toolbox.prototype.shouldSelectItem_=function(t,n){return null!=n&&n!=t},e.Toolbox.prototype.deselectItem_=function(t){this.selectedItem_=null,this.previouslySelectedItem_=t,t.setSelected(!1),e.utils.aria.setState(this.contentsDiv_,e.utils.aria.State.ACTIVEDESCENDANT,"")},e.Toolbox.prototype.selectItem_=function(t,n){this.selectedItem_=n,this.previouslySelectedItem_=t,n.setSelected(!0),e.utils.aria.setState(this.contentsDiv_,e.utils.aria.State.ACTIVEDESCENDANT,n.getId())},e.Toolbox.prototype.selectItemByPosition=function(t){-1<t&&t<this.contents_.length&&(t=this.contents_[t]).isSelectable()&&this.setSelectedItem(t)},e.Toolbox.prototype.updateFlyout_=function(t,n){(t!=n||n.isCollapsible())&&n&&n.getContents().length?(this.flyout_.show(n.getContents()),this.flyout_.scrollToStart()):this.flyout_.hide()},e.Toolbox.prototype.fireSelectEvent_=function(t,n){var r=t&&t.getName(),s=n&&n.getName();t==n&&(s=null),t=new(e.Events.get(e.Events.TOOLBOX_ITEM_SELECT))(r,s,this.workspace_.id),e.Events.fire(t)},e.Toolbox.prototype.selectParent_=function(){return!(!this.selectedItem_||(this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.setExpanded(!1),0):!this.selectedItem_.getParent()||!this.selectedItem_.getParent().isSelectable()||(this.setSelectedItem(this.selectedItem_.getParent()),0)))},e.Toolbox.prototype.selectChild_=function(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;var t=this.selectedItem_;return t.isExpanded()?this.selectNext_():t.setExpanded(!0),!0},e.Toolbox.prototype.selectNext_=function(){if(!this.selectedItem_)return!1;var t=this.contents_.indexOf(this.selectedItem_)+1;if(-1<t&&t<this.contents_.length){for(var n=this.contents_[t];n&&!n.isSelectable();)n=this.contents_[++t];if(n&&n.isSelectable())return this.setSelectedItem(n),!0}return!1},e.Toolbox.prototype.selectPrevious_=function(){if(!this.selectedItem_)return!1;var t=this.contents_.indexOf(this.selectedItem_)-1;if(-1<t&&t<this.contents_.length){for(var n=this.contents_[t];n&&!n.isSelectable();)n=this.contents_[--t];if(n&&n.isSelectable())return this.setSelectedItem(n),!0}return!1},e.Toolbox.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout_.dispose();for(var t=0;t<this.contents_.length;t++)this.contents_[t].dispose();for(t=0;t<this.boundEvents_.length;t++)e.browserEvents.unbind(this.boundEvents_[t]);this.boundEvents_=[],this.contents_=[],this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),e.utils.dom.removeNode(this.HtmlDiv)},e.Css.register([".blocklyToolboxDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyToolboxGrab {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyToolboxDiv {","background-color: #ddd;","overflow-x: visible;","overflow-y: auto;","padding: 4px 0 4px 0;","position: absolute;","z-index: 70;","-webkit-tap-highlight-color: transparent;","}",".blocklyToolboxContents {","display: flex;","flex-wrap: wrap;","flex-direction: column;","}",".blocklyToolboxContents:focus {","outline: none;","}"]),e.registry.register(e.registry.Type.TOOLBOX,e.registry.DEFAULT,e.Toolbox),e.Events.TrashcanOpen=function(t,n){e.Events.TrashcanOpen.superClass_.constructor.call(this,n),this.isOpen=t},e.utils.object.inherits(e.Events.TrashcanOpen,e.Events.UiBase),e.Events.TrashcanOpen.prototype.type=e.Events.TRASHCAN_OPEN,e.Events.TrashcanOpen.prototype.toJson=function(){var t=e.Events.TrashcanOpen.superClass_.toJson.call(this);return t.isOpen=this.isOpen,t},e.Events.TrashcanOpen.prototype.fromJson=function(t){e.Events.TrashcanOpen.superClass_.fromJson.call(this,t),this.isOpen=t.isOpen},e.registry.register(e.registry.Type.EVENT,e.Events.TRASHCAN_OPEN,e.Events.TrashcanOpen),e.IPositionable=function(){},e.uiPosition={},e.uiPosition.verticalPosition={TOP:0,BOTTOM:1},e.uiPosition.horizontalPosition={LEFT:0,RIGHT:1},e.uiPosition.bumpDirection={UP:0,DOWN:1},e.uiPosition.getStartPositionRect=function(t,n,r,s,u,b){var x=b.scrollbar&&b.scrollbar.canScrollVertically();return t.horizontal===e.uiPosition.horizontalPosition.LEFT?(r=u.absoluteMetrics.left+r,x&&b.RTL&&(r+=e.Scrollbar.scrollbarThickness)):(r=u.absoluteMetrics.left+u.viewMetrics.width-n.width-r,x&&!b.RTL&&(r-=e.Scrollbar.scrollbarThickness)),t.vertical===e.uiPosition.verticalPosition.TOP?t=u.absoluteMetrics.top+s:(t=u.absoluteMetrics.top+u.viewMetrics.height-n.height-s,b.scrollbar&&b.scrollbar.canScrollHorizontally()&&(t-=e.Scrollbar.scrollbarThickness)),new e.utils.Rect(t,t+n.height,r,r+n.width)},e.uiPosition.getCornerOppositeToolbox=function(t,n){return{horizontal:n.toolboxMetrics.position===e.utils.toolbox.Position.LEFT||t.horizontalLayout&&!t.RTL?e.uiPosition.horizontalPosition.RIGHT:e.uiPosition.horizontalPosition.LEFT,vertical:n.toolboxMetrics.position===e.utils.toolbox.Position.BOTTOM?e.uiPosition.verticalPosition.TOP:e.uiPosition.verticalPosition.BOTTOM}},e.uiPosition.bumpPositionRect=function(t,n,r,s){for(var Z,u=t.left,b=t.right-t.left,x=t.bottom-t.top,B=0;Z=s[B];B++)t.intersects(Z)&&(t=new e.utils.Rect(t=r===e.uiPosition.bumpDirection.UP?Z.top-x-n:Z.bottom+n,t+x,u,u+b),B=-1);return t},e.Trashcan=function(t){e.Trashcan.superClass_.constructor.call(this),this.workspace_=t,this.id="trashcan",this.contents_=[],this.flyout=null,0>=this.workspace_.options.maxTrashcanContents||(t=new e.Options({scrollbars:!0,parentWorkspace:this.workspace_,rtl:this.workspace_.RTL,oneBasedIndex:this.workspace_.options.oneBasedIndex,renderer:this.workspace_.options.renderer,rendererOverrides:this.workspace_.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace_.horizontalLayout?(t.toolboxPosition=this.workspace_.toolboxPosition==e.utils.toolbox.Position.TOP?e.utils.toolbox.Position.BOTTOM:e.utils.toolbox.Position.TOP,this.flyout=new(e.registry.getClassFromOptions(e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace_.options,!0))(t)):(t.toolboxPosition=this.workspace_.toolboxPosition==e.utils.toolbox.Position.RIGHT?e.utils.toolbox.Position.LEFT:e.utils.toolbox.Position.RIGHT,this.flyout=new(e.registry.getClassFromOptions(e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,this.workspace_.options,!0))(t)),this.workspace_.addChangeListener(this.onDelete_.bind(this)))},e.utils.object.inherits(e.Trashcan,e.DeleteArea),e.Trashcan.prototype.WIDTH_=47,e.Trashcan.prototype.BODY_HEIGHT_=44,e.Trashcan.prototype.LID_HEIGHT_=16,e.Trashcan.prototype.MARGIN_VERTICAL_=20,e.Trashcan.prototype.MARGIN_HORIZONTAL_=20,e.Trashcan.prototype.MARGIN_HOTSPOT_=10,e.Trashcan.prototype.SPRITE_LEFT_=0,e.Trashcan.prototype.SPRITE_TOP_=32,e.Trashcan.prototype.HAS_BLOCKS_LID_ANGLE_=.1,e.Trashcan.ANIMATION_LENGTH_=80,e.Trashcan.ANIMATION_FRAMES_=4,e.Trashcan.OPACITY_MIN_=.4,e.Trashcan.OPACITY_MAX_=.8,e.Trashcan.MAX_LID_ANGLE_=45,e.Trashcan.prototype.isLidOpen=!1,e.Trashcan.prototype.minOpenness_=0,e.Trashcan.prototype.svgGroup_=null,e.Trashcan.prototype.svgLid_=null,e.Trashcan.prototype.lidTask_=0,e.Trashcan.prototype.lidOpen_=0,e.Trashcan.prototype.left_=0,e.Trashcan.prototype.top_=0,e.Trashcan.prototype.initialized_=!1,e.Trashcan.prototype.createDom=function(){this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyTrash"},null);var t=String(Math.random()).substring(2),n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyTrashBodyClipPath"+t},this.svgGroup_);e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:this.WIDTH_,height:this.BODY_HEIGHT_,y:this.LID_HEIGHT_},n);var r=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,x:-this.SPRITE_LEFT_,height:e.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashBodyClipPath"+t+")"},this.svgGroup_);return r.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyTrashLidClipPath"+t},this.svgGroup_),e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:this.WIDTH_,height:this.LID_HEIGHT_},n),this.svgLid_=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,x:-this.SPRITE_LEFT_,height:e.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashLidClipPath"+t+")"},this.svgGroup_),this.svgLid_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),e.browserEvents.bind(this.svgGroup_,"mousedown",this,this.blockMouseDownWhenOpenable_),e.browserEvents.bind(this.svgGroup_,"mouseup",this,this.click),e.browserEvents.bind(r,"mouseover",this,this.mouseOver_),e.browserEvents.bind(r,"mouseout",this,this.mouseOut_),this.animateLid_(),this.svgGroup_},e.Trashcan.prototype.init=function(){0<this.workspace_.options.maxTrashcanContents&&(e.utils.dom.insertAfter(this.flyout.createDom(e.utils.Svg.SVG),this.workspace_.getParentSvg()),this.flyout.init(this.workspace_)),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[e.ComponentManager.Capability.AUTOHIDEABLE,e.ComponentManager.Capability.DELETE_AREA,e.ComponentManager.Capability.DRAG_TARGET,e.ComponentManager.Capability.POSITIONABLE]}),this.initialized_=!0,this.setLidOpen(!1)},e.Trashcan.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("trashcan"),this.svgGroup_&&(e.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.workspace_=this.svgLid_=null,clearTimeout(this.lidTask_)},e.Trashcan.prototype.hasContents_=function(){return!!this.contents_.length},e.Trashcan.prototype.contentsIsOpen=function(){return this.flyout.isVisible()},e.Trashcan.prototype.openFlyout=function(){if(!this.contentsIsOpen()){var t=this.contents_.map(e.Xml.textToDom);this.flyout.show(t),this.fireUiEvent_(!0)}},e.Trashcan.prototype.closeFlyout=function(){this.contentsIsOpen()&&(this.flyout.hide(),this.fireUiEvent_(!1))},e.Trashcan.prototype.autoHide=function(t){!t&&this.flyout&&this.closeFlyout()},e.Trashcan.prototype.emptyContents=function(){this.hasContents_()&&(this.contents_.length=0,this.setMinOpenness_(0),this.closeFlyout())},e.Trashcan.prototype.position=function(t,n){if(this.initialized_){var r=e.uiPosition.getCornerOppositeToolbox(this.workspace_,t);t=e.uiPosition.getStartPositionRect(r,new e.utils.Size(this.WIDTH_,this.BODY_HEIGHT_+this.LID_HEIGHT_),this.MARGIN_HORIZONTAL_,this.MARGIN_VERTICAL_,t,this.workspace_),n=e.uiPosition.bumpPositionRect(t,this.MARGIN_VERTICAL_,r.vertical===e.uiPosition.verticalPosition.TOP?e.uiPosition.bumpDirection.DOWN:e.uiPosition.bumpDirection.UP,n),this.top_=n.top,this.left_=n.left,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}},e.Trashcan.prototype.getBoundingRectangle=function(){return new e.utils.Rect(this.top_,this.top_+this.BODY_HEIGHT_+this.LID_HEIGHT_,this.left_,this.left_+this.WIDTH_)},e.Trashcan.prototype.getClientRect=function(){if(!this.svgGroup_)return null;var t=this.svgGroup_.getBoundingClientRect(),n=t.top+this.SPRITE_TOP_-this.MARGIN_HOTSPOT_;return new e.utils.Rect(n,n+this.LID_HEIGHT_+this.BODY_HEIGHT_+2*this.MARGIN_HOTSPOT_,t=t.left+this.SPRITE_LEFT_-this.MARGIN_HOTSPOT_,t+this.WIDTH_+2*this.MARGIN_HOTSPOT_)},e.Trashcan.prototype.onDragOver=function(t){this.setLidOpen(this.wouldDelete_)},e.Trashcan.prototype.onDragExit=function(t){this.setLidOpen(!1)},e.Trashcan.prototype.onDrop=function(t){setTimeout(this.setLidOpen.bind(this,!1),100)},e.Trashcan.prototype.setLidOpen=function(t){this.isLidOpen!=t&&(clearTimeout(this.lidTask_),this.isLidOpen=t,this.animateLid_())},e.Trashcan.prototype.animateLid_=function(){var t=e.Trashcan.ANIMATION_FRAMES_,n=1/(t+1);this.lidOpen_+=this.isLidOpen?n:-n,this.lidOpen_=Math.min(Math.max(this.lidOpen_,this.minOpenness_),1),this.setLidAngle_(this.lidOpen_*e.Trashcan.MAX_LID_ANGLE_),this.svgGroup_.style.opacity=(n=e.Trashcan.OPACITY_MIN_)+this.lidOpen_*(e.Trashcan.OPACITY_MAX_-n),this.lidOpen_>this.minOpenness_&&1>this.lidOpen_&&(this.lidTask_=setTimeout(this.animateLid_.bind(this),e.Trashcan.ANIMATION_LENGTH_/t))},e.Trashcan.prototype.setLidAngle_=function(t){var n=this.workspace_.toolboxPosition==e.utils.toolbox.Position.RIGHT||this.workspace_.horizontalLayout&&this.workspace_.RTL;this.svgLid_.setAttribute("transform","rotate("+(n?-t:t)+","+(n?4:this.WIDTH_-4)+","+(this.LID_HEIGHT_-2)+")")},e.Trashcan.prototype.setMinOpenness_=function(t){this.minOpenness_=t,this.isLidOpen||this.setLidAngle_(t*e.Trashcan.MAX_LID_ANGLE_)},e.Trashcan.prototype.closeLid=function(){this.setLidOpen(!1)},e.Trashcan.prototype.click=function(){this.hasContents_()&&this.openFlyout()},e.Trashcan.prototype.fireUiEvent_=function(t){t=new(e.Events.get(e.Events.TRASHCAN_OPEN))(t,this.workspace_.id),e.Events.fire(t)},e.Trashcan.prototype.blockMouseDownWhenOpenable_=function(t){!this.contentsIsOpen()&&this.hasContents_()&&t.stopPropagation()},e.Trashcan.prototype.mouseOver_=function(){this.hasContents_()&&this.setLidOpen(!0)},e.Trashcan.prototype.mouseOut_=function(){this.setLidOpen(!1)},e.Trashcan.prototype.onDelete_=function(t){if(!(0>=this.workspace_.options.maxTrashcanContents)&&t.type==e.Events.BLOCK_DELETE&&t.oldXml.tagName&&"shadow"!=t.oldXml.tagName.toLowerCase()&&(t=this.cleanBlockXML_(t.oldXml),-1==this.contents_.indexOf(t))){for(this.contents_.unshift(t);this.contents_.length>this.workspace_.options.maxTrashcanContents;)this.contents_.pop();this.setMinOpenness_(this.HAS_BLOCKS_LID_ANGLE_)}},e.Trashcan.prototype.cleanBlockXML_=function(t){for(var n=t=t.cloneNode(!0);n;){n.removeAttribute&&(n.removeAttribute("x"),n.removeAttribute("y"),n.removeAttribute("id"),n.removeAttribute("disabled"),"comment"==n.nodeName&&(n.removeAttribute("h"),n.removeAttribute("w"),n.removeAttribute("pinned")));var r=n.firstChild||n.nextSibling;if(!r)for(r=n.parentNode;r;){if(r.nextSibling){r=r.nextSibling;break}r=r.parentNode}n=r}return e.Xml.domToText(t)},e.VariablesDynamic={},e.VariablesDynamic.onCreateVariableButtonClick_String=function(t){e.Variables.createVariableButtonHandler(t.getTargetWorkspace(),void 0,"String")},e.VariablesDynamic.onCreateVariableButtonClick_Number=function(t){e.Variables.createVariableButtonHandler(t.getTargetWorkspace(),void 0,"Number")},e.VariablesDynamic.onCreateVariableButtonClick_Colour=function(t){e.Variables.createVariableButtonHandler(t.getTargetWorkspace(),void 0,"Colour")},e.VariablesDynamic.flyoutCategory=function(t){var n=[],r=document.createElement("button");return r.setAttribute("text",e.Msg.NEW_STRING_VARIABLE),r.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),n.push(r),(r=document.createElement("button")).setAttribute("text",e.Msg.NEW_NUMBER_VARIABLE),r.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),n.push(r),(r=document.createElement("button")).setAttribute("text",e.Msg.NEW_COLOUR_VARIABLE),r.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),n.push(r),t.registerButtonCallback("CREATE_VARIABLE_STRING",e.VariablesDynamic.onCreateVariableButtonClick_String),t.registerButtonCallback("CREATE_VARIABLE_NUMBER",e.VariablesDynamic.onCreateVariableButtonClick_Number),t.registerButtonCallback("CREATE_VARIABLE_COLOUR",e.VariablesDynamic.onCreateVariableButtonClick_Colour),t=e.VariablesDynamic.flyoutCategoryBlocks(t),n.concat(t)},e.VariablesDynamic.flyoutCategoryBlocks=function(t){var n=[];if(0<(t=t.getAllVariables()).length){if(e.Blocks.variables_set_dynamic){var r=t[t.length-1],s=e.utils.xml.createElement("block");s.setAttribute("type","variables_set_dynamic"),s.setAttribute("gap",24),s.appendChild(e.Variables.generateVariableFieldDom(r)),n.push(s)}if(e.Blocks.variables_get_dynamic){t.sort(e.VariableModel.compareByName),r=0;for(var u;u=t[r];r++)(s=e.utils.xml.createElement("block")).setAttribute("type","variables_get_dynamic"),s.setAttribute("gap",8),s.appendChild(e.Variables.generateVariableFieldDom(u)),n.push(s)}}return n},e.ZoomControls=function(t){this.workspace_=t,this.id="zoomControls",this.zoomResetGroup_=this.zoomOutGroup_=this.zoomInGroup_=this.onZoomOutWrapper_=this.onZoomInWrapper_=this.onZoomResetWrapper_=null},e.ZoomControls.prototype.WIDTH_=32,e.ZoomControls.prototype.HEIGHT_=32,e.ZoomControls.prototype.SMALL_SPACING_=2,e.ZoomControls.prototype.LARGE_SPACING_=11,e.ZoomControls.prototype.MARGIN_VERTICAL_=20,e.ZoomControls.prototype.MARGIN_HORIZONTAL_=20,e.ZoomControls.prototype.svgGroup_=null,e.ZoomControls.prototype.left_=0,e.ZoomControls.prototype.top_=0,e.ZoomControls.prototype.initialized_=!1,e.ZoomControls.prototype.createDom=function(){this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},null);var t=String(Math.random()).substring(2);return this.createZoomOutSvg_(t),this.createZoomInSvg_(t),this.workspace_.isMovable()&&this.createZoomResetSvg_(t),this.svgGroup_},e.ZoomControls.prototype.init=function(){this.workspace_.getComponentManager().addComponent({component:this,weight:2,capabilities:[e.ComponentManager.Capability.POSITIONABLE]}),this.initialized_=!0},e.ZoomControls.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("zoomControls"),this.svgGroup_&&e.utils.dom.removeNode(this.svgGroup_),this.onZoomResetWrapper_&&e.browserEvents.unbind(this.onZoomResetWrapper_),this.onZoomInWrapper_&&e.browserEvents.unbind(this.onZoomInWrapper_),this.onZoomOutWrapper_&&e.browserEvents.unbind(this.onZoomOutWrapper_)},e.ZoomControls.prototype.getBoundingRectangle=function(){var t=this.SMALL_SPACING_+2*this.HEIGHT_;return this.zoomResetGroup_&&(t+=this.LARGE_SPACING_+this.HEIGHT_),new e.utils.Rect(this.top_,this.top_+t,this.left_,this.left_+this.WIDTH_)},e.ZoomControls.prototype.position=function(t,n){if(this.initialized_){var r=e.uiPosition.getCornerOppositeToolbox(this.workspace_,t),s=this.SMALL_SPACING_+2*this.HEIGHT_;this.zoomResetGroup_&&(s+=this.LARGE_SPACING_+this.HEIGHT_),t=e.uiPosition.getStartPositionRect(r,new e.utils.Size(this.WIDTH_,s),this.MARGIN_HORIZONTAL_,this.MARGIN_VERTICAL_,t,this.workspace_),n=e.uiPosition.bumpPositionRect(t,this.MARGIN_VERTICAL_,(r=r.vertical)===e.uiPosition.verticalPosition.TOP?e.uiPosition.bumpDirection.DOWN:e.uiPosition.bumpDirection.UP,n),r===e.uiPosition.verticalPosition.TOP?(this.zoomInGroup_.setAttribute("transform","translate(0, "+(r=this.SMALL_SPACING_+this.HEIGHT_)+")"),this.zoomResetGroup_&&this.zoomResetGroup_.setAttribute("transform","translate(0, "+(r+this.LARGE_SPACING_+this.HEIGHT_)+")")):(this.zoomInGroup_.setAttribute("transform","translate(0, "+(r=this.zoomResetGroup_?this.LARGE_SPACING_+this.HEIGHT_:0)+")"),this.zoomOutGroup_.setAttribute("transform","translate(0, "+(r+this.SMALL_SPACING_+this.HEIGHT_)+")")),this.top_=n.top,this.left_=n.left,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}},e.ZoomControls.prototype.createZoomOutSvg_=function(t){this.zoomOutGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyZoomoutClipPath"+t},this.zoomOutGroup_);e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:32,height:32},n),e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,height:e.SPRITE.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+t+")"},this.zoomOutGroup_).setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),this.onZoomOutWrapper_=e.browserEvents.conditionalBind(this.zoomOutGroup_,"mousedown",null,this.zoom_.bind(this,-1))},e.ZoomControls.prototype.createZoomInSvg_=function(t){this.zoomInGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyZoominClipPath"+t},this.zoomInGroup_);e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:32,height:32},n),e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,height:e.SPRITE.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+t+")"},this.zoomInGroup_).setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),this.onZoomInWrapper_=e.browserEvents.conditionalBind(this.zoomInGroup_,"mousedown",null,this.zoom_.bind(this,1))},e.ZoomControls.prototype.zoom_=function(t,n){this.workspace_.markFocused(),this.workspace_.zoomCenter(t),this.fireZoomEvent_(),e.Touch.clearTouchIdentifier(),n.stopPropagation(),n.preventDefault()},e.ZoomControls.prototype.createZoomResetSvg_=function(t){this.zoomResetGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyZoomresetClipPath"+t},this.zoomResetGroup_);e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:32,height:32},n),e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,height:e.SPRITE.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+t+")"},this.zoomResetGroup_).setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),this.onZoomResetWrapper_=e.browserEvents.conditionalBind(this.zoomResetGroup_,"mousedown",null,this.resetZoom_.bind(this))},e.ZoomControls.prototype.resetZoom_=function(t){this.workspace_.markFocused();var n=Math.log(this.workspace_.options.zoomOptions.startScale/this.workspace_.scale)/Math.log(this.workspace_.options.zoomOptions.scaleSpeed);this.workspace_.beginCanvasTransition(),this.workspace_.zoomCenter(n),this.workspace_.scrollCenter(),setTimeout(this.workspace_.endCanvasTransition.bind(this.workspace_),500),this.fireZoomEvent_(),e.Touch.clearTouchIdentifier(),t.stopPropagation(),t.preventDefault()},e.ZoomControls.prototype.fireZoomEvent_=function(){var t=new(e.Events.get(e.Events.CLICK))(null,this.workspace_.id,"zoom_controls");e.Events.fire(t)},e.Css.register([".blocklyZoom>image, .blocklyZoom>svg>image {","opacity: .4;","}",".blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {","opacity: .6;","}",".blocklyZoom>image:active, .blocklyZoom>svg>image:active {","opacity: .8;","}"]),e.ShortcutItems={},e.ShortcutItems.names={ESCAPE:"escape",DELETE:"delete",COPY:"copy",CUT:"cut",PASTE:"paste",UNDO:"undo",REDO:"redo"},e.ShortcutItems.registerEscape=function(){var t={name:e.ShortcutItems.names.ESCAPE,preconditionFn:function(n){return!n.options.readOnly},callback:function(){return e.hideChaff(),!0}};e.ShortcutRegistry.registry.register(t),e.ShortcutRegistry.registry.addKeyMapping(e.utils.KeyCodes.ESC,t.name)},e.ShortcutItems.registerDelete=function(){var t={name:e.ShortcutItems.names.DELETE,preconditionFn:function(n){return!n.options.readOnly&&e.selected&&e.selected.isDeletable()},callback:function(n,r){return r.preventDefault(),!e.Gesture.inProgress()&&(e.deleteBlock(e.selected),!0)}};e.ShortcutRegistry.registry.register(t),e.ShortcutRegistry.registry.addKeyMapping(e.utils.KeyCodes.DELETE,t.name),e.ShortcutRegistry.registry.addKeyMapping(e.utils.KeyCodes.BACKSPACE,t.name)},e.ShortcutItems.registerCopy=function(){var t={name:e.ShortcutItems.names.COPY,preconditionFn:function(r){return!r.options.readOnly&&!e.Gesture.inProgress()&&e.selected&&e.selected.isDeletable()&&e.selected.isMovable()},callback:function(r,s){return s.preventDefault(),e.hideChaff(),e.copy(e.selected),!0}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.C,[e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.C,[e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.C,[e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerCut=function(){var t={name:e.ShortcutItems.names.CUT,preconditionFn:function(r){return!r.options.readOnly&&!e.Gesture.inProgress()&&e.selected&&e.selected.isDeletable()&&e.selected.isMovable()&&!e.selected.workspace.isFlyout},callback:function(){return e.copy(e.selected),e.deleteBlock(e.selected),!0}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.X,[e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.X,[e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.X,[e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerPaste=function(){var t={name:e.ShortcutItems.names.PASTE,preconditionFn:function(r){return!r.options.readOnly&&!e.Gesture.inProgress()},callback:function(){return e.paste()}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.V,[e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.V,[e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.V,[e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerUndo=function(){var t={name:e.ShortcutItems.names.UNDO,preconditionFn:function(r){return!r.options.readOnly&&!e.Gesture.inProgress()},callback:function(r){return e.hideChaff(),r.undo(!1),!0}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerRedo=function(){var t={name:e.ShortcutItems.names.REDO,preconditionFn:function(r){return!e.Gesture.inProgress()&&!r.options.readOnly},callback:function(r){return e.hideChaff(),r.undo(!0),!0}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.SHIFT,e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.SHIFT,e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.SHIFT,e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Y,[e.utils.KeyCodes.CTRL]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerDefaultShortcuts=function(){e.ShortcutItems.registerEscape(),e.ShortcutItems.registerDelete(),e.ShortcutItems.registerCopy(),e.ShortcutItems.registerCut(),e.ShortcutItems.registerPaste(),e.ShortcutItems.registerUndo(),e.ShortcutItems.registerRedo()},e.ShortcutItems.registerDefaultShortcuts(),e.ContextMenuItems={},e.ContextMenuItems.registerUndo=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.UNDO},preconditionFn:function(t){return 0<t.workspace.getUndoStack().length?"enabled":"disabled"},callback:function(t){t.workspace.undo(!1)},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},e.ContextMenuItems.registerRedo=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.REDO},preconditionFn:function(t){return 0<t.workspace.getRedoStack().length?"enabled":"disabled"},callback:function(t){t.workspace.undo(!0)},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},e.ContextMenuItems.registerCleanup=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.CLEAN_UP},preconditionFn:function(t){return t.workspace.isMovable()?1<t.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden"},callback:function(t){t.workspace.cleanUp()},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},e.ContextMenuItems.toggleOption_=function(t,n){for(var r=0,s=0;s<n.length;s++)for(var u=n[s];u;)setTimeout(u.setCollapsed.bind(u,t),r),u=u.getNextBlock(),r+=10},e.ContextMenuItems.registerCollapse=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.COLLAPSE_ALL},preconditionFn:function(t){if(t.workspace.options.collapse){t=t.workspace.getTopBlocks(!1);for(var n=0;n<t.length;n++)for(var r=t[n];r;){if(!r.isCollapsed())return"enabled";r=r.getNextBlock()}return"disabled"}return"hidden"},callback:function(t){e.ContextMenuItems.toggleOption_(!0,t.workspace.getTopBlocks(!0))},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},e.ContextMenuItems.registerExpand=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.EXPAND_ALL},preconditionFn:function(t){if(t.workspace.options.collapse){t=t.workspace.getTopBlocks(!1);for(var n=0;n<t.length;n++)for(var r=t[n];r;){if(r.isCollapsed())return"enabled";r=r.getNextBlock()}return"disabled"}return"hidden"},callback:function(t){e.ContextMenuItems.toggleOption_(!1,t.workspace.getTopBlocks(!0))},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},e.ContextMenuItems.addDeletableBlocks_=function(t,n){if(t.isDeletable())Array.prototype.push.apply(n,t.getDescendants(!1));else{t=t.getChildren(!1);for(var r=0;r<t.length;r++)e.ContextMenuItems.addDeletableBlocks_(t[r],n)}},e.ContextMenuItems.getDeletableBlocks_=function(t){var n=[];t=t.getTopBlocks(!0);for(var r=0;r<t.length;r++)e.ContextMenuItems.addDeletableBlocks_(t[r],n);return n},e.ContextMenuItems.deleteNext_=function(t,n){e.Events.setGroup(n);var r=t.shift();r&&(r.workspace?(r.dispose(!1,!0),setTimeout(e.ContextMenuItems.deleteNext_,10,t,n)):e.ContextMenuItems.deleteNext_(t,n)),e.Events.setGroup(!1)},e.ContextMenuItems.registerDeleteAll=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){if(t.workspace)return 1==(t=e.ContextMenuItems.getDeletableBlocks_(t.workspace).length)?e.Msg.DELETE_BLOCK:e.Msg.DELETE_X_BLOCKS.replace("%1",String(t))},preconditionFn:function(t){if(t.workspace)return 0<e.ContextMenuItems.getDeletableBlocks_(t.workspace).length?"enabled":"disabled"},callback:function(t){if(t.workspace){t.workspace.cancelCurrentGesture();var n=e.ContextMenuItems.getDeletableBlocks_(t.workspace),r=e.utils.genUid();2>n.length?e.ContextMenuItems.deleteNext_(n,r):e.confirm(e.Msg.DELETE_ALL_BLOCKS.replace("%1",n.length),function(s){s&&e.ContextMenuItems.deleteNext_(n,r)})}},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},e.ContextMenuItems.registerWorkspaceOptions_=function(){e.ContextMenuItems.registerUndo(),e.ContextMenuItems.registerRedo(),e.ContextMenuItems.registerCleanup(),e.ContextMenuItems.registerCollapse(),e.ContextMenuItems.registerExpand(),e.ContextMenuItems.registerDeleteAll()},e.ContextMenuItems.registerDuplicate=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.DUPLICATE_BLOCK},preconditionFn:function(t){return!(t=t.block).isInFlyout&&t.isDeletable()&&t.isMovable()?t.isDuplicatable()?"enabled":"disabled":"hidden"},callback:function(t){t.block&&e.duplicate(t.block)},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},e.ContextMenuItems.registerComment=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.getCommentIcon()?e.Msg.REMOVE_COMMENT:e.Msg.ADD_COMMENT},preconditionFn:function(t){return t=t.block,e.utils.userAgent.IE||t.isInFlyout||!t.workspace.options.comments||t.isCollapsed()||!t.isEditable()?"hidden":"enabled"},callback:function(t){(t=t.block).getCommentIcon()?t.setCommentText(null):t.setCommentText("")},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockComment",weight:2})},e.ContextMenuItems.registerInline=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.getInputsInline()?e.Msg.EXTERNAL_INPUTS:e.Msg.INLINE_INPUTS},preconditionFn:function(t){if(!(t=t.block).isInFlyout&&t.isMovable()&&!t.isCollapsed())for(var n=1;n<t.inputList.length;n++)if(t.inputList[n-1].type!=e.inputTypes.STATEMENT&&t.inputList[n].type!=e.inputTypes.STATEMENT)return"enabled";return"hidden"},callback:function(t){t.block.setInputsInline(!t.block.getInputsInline())},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockInline",weight:3})},e.ContextMenuItems.registerCollapseExpandBlock=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.isCollapsed()?e.Msg.EXPAND_BLOCK:e.Msg.COLLAPSE_BLOCK},preconditionFn:function(t){return!(t=t.block).isInFlyout&&t.isMovable()&&t.workspace.options.collapse?"enabled":"hidden"},callback:function(t){t.block.setCollapsed(!t.block.isCollapsed())},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},e.ContextMenuItems.registerDisable=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.isEnabled()?e.Msg.DISABLE_BLOCK:e.Msg.ENABLE_BLOCK},preconditionFn:function(t){return!(t=t.block).isInFlyout&&t.workspace.options.disable&&t.isEditable()?t.getInheritedDisabled()?"disabled":"enabled":"hidden"},callback:function(t){t=t.block;var n=e.Events.getGroup();n||e.Events.setGroup(!0),t.setEnabled(!t.isEnabled()),n||e.Events.setGroup(!1)},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDisable",weight:5})},e.ContextMenuItems.registerDelete=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){var n=t.block;return t=n.getDescendants(!1).length,(n=n.getNextBlock())&&(t-=n.getDescendants(!1).length),1==t?e.Msg.DELETE_BLOCK:e.Msg.DELETE_X_BLOCKS.replace("%1",String(t))},preconditionFn:function(t){return!t.block.isInFlyout&&t.block.isDeletable()?"enabled":"hidden"},callback:function(t){e.Events.setGroup(!0),t.block&&e.deleteBlock(t.block),e.Events.setGroup(!1)},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDelete",weight:6})},e.ContextMenuItems.registerHelp=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.HELP},preconditionFn:function(t){return("function"==typeof(t=t.block).helpUrl?t.helpUrl():t.helpUrl)?"enabled":"hidden"},callback:function(t){t.block.showHelp()},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockHelp",weight:7})},e.ContextMenuItems.registerBlockOptions_=function(){e.ContextMenuItems.registerDuplicate(),e.ContextMenuItems.registerComment(),e.ContextMenuItems.registerInline(),e.ContextMenuItems.registerCollapseExpandBlock(),e.ContextMenuItems.registerDisable(),e.ContextMenuItems.registerDelete(),e.ContextMenuItems.registerHelp()},e.ContextMenuItems.registerDefaultOptions=function(){e.ContextMenuItems.registerWorkspaceOptions_(),e.ContextMenuItems.registerBlockOptions_()},e.ContextMenuItems.registerDefaultOptions(),e.Mutator=function(t){e.Mutator.superClass_.constructor.call(this,null),this.quarkNames_=t},e.utils.object.inherits(e.Mutator,e.Icon),e.Mutator.prototype.workspace_=null,e.Mutator.prototype.workspaceWidth_=0,e.Mutator.prototype.workspaceHeight_=0,e.Mutator.prototype.setBlock=function(t){this.block_=t},e.Mutator.prototype.getWorkspace=function(){return this.workspace_},e.Mutator.prototype.drawIcon_=function(t){e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},t),e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},t),e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},t)},e.Mutator.prototype.iconClick_=function(t){this.block_.isEditable()&&e.Icon.prototype.iconClick_.call(this,t)},e.Mutator.prototype.createEditor_=function(){if(this.svgDialog_=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{x:e.Bubble.BORDER_WIDTH,y:e.Bubble.BORDER_WIDTH},null),this.quarkNames_.length)for(var r,t=e.utils.xml.createElement("xml"),n=0;r=this.quarkNames_[n];n++){var s=e.utils.xml.createElement("block");s.setAttribute("type",r),t.appendChild(s)}else t=null;return(n=new e.Options({disable:!1,parentWorkspace:this.block_.workspace,media:this.block_.workspace.options.pathToMedia,rtl:this.block_.RTL,horizontalLayout:!1,renderer:this.block_.workspace.options.renderer,rendererOverrides:this.block_.workspace.options.rendererOverrides})).toolboxPosition=this.block_.RTL?e.utils.toolbox.Position.RIGHT:e.utils.toolbox.Position.LEFT,(r=!!t)&&(n.languageTree=e.utils.toolbox.convertToolboxDefToJson(t)),this.workspace_=new e.WorkspaceSvg(n),this.workspace_.isMutator=!0,this.workspace_.addChangeListener(e.Events.disableOrphans),t=r?this.workspace_.addFlyout(e.utils.Svg.G):null,n=this.workspace_.createDom("blocklyMutatorBackground"),t&&n.insertBefore(t,this.workspace_.svgBlockCanvas_),this.svgDialog_.appendChild(n),this.svgDialog_},e.Mutator.prototype.updateEditable=function(){e.Mutator.superClass_.updateEditable.call(this),this.block_.isInFlyout||(this.block_.isEditable()?this.iconGroup_&&e.utils.dom.removeClass(this.iconGroup_,"blocklyIconGroupReadonly"):(this.setVisible(!1),this.iconGroup_&&e.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly")))},e.Mutator.prototype.resizeBubble_=function(){var t=2*e.Bubble.BORDER_WIDTH,n=this.workspace_.getCanvas().getBBox(),r=n.width+n.x,s=n.height+3*t,u=this.workspace_.getFlyout();if(u){var b=u.getWorkspace().getMetricsManager().getScrollMetrics();s=Math.max(s,b.height+20),r+=u.getWidth()}this.block_.RTL&&(r=-n.x),r+=3*t,(Math.abs(this.workspaceWidth_-r)>t||Math.abs(this.workspaceHeight_-s)>t)&&(this.workspaceWidth_=r,this.workspaceHeight_=s,this.bubble_.setBubbleSize(r+t,s+t),this.svgDialog_.setAttribute("width",this.workspaceWidth_),this.svgDialog_.setAttribute("height",this.workspaceHeight_),this.workspace_.setCachedParentSvgSize(this.workspaceWidth_,this.workspaceHeight_)),this.block_.RTL&&(t="translate("+this.workspaceWidth_+",0)",this.workspace_.getCanvas().setAttribute("transform",t)),this.workspace_.resize()},e.Mutator.prototype.onBubbleMove_=function(){this.workspace_&&this.workspace_.recordDragTargets()},e.Mutator.prototype.setVisible=function(t){if(t!=this.isVisible())if(e.Events.fire(new(e.Events.get(e.Events.BUBBLE_OPEN))(this.block_,t,"mutator")),t){this.bubble_=new e.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,null,null),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerMoveEvent(this.onBubbleMove_.bind(this));var n=this.workspace_.options.languageTree;t=this.workspace_.getFlyout(),n&&(t.init(this.workspace_),t.show(n)),this.rootBlock_=this.block_.decompose(this.workspace_),n=this.rootBlock_.getDescendants(!1);for(var s,r=0;s=n[r];r++)s.render();if(this.rootBlock_.setMovable(!1),this.rootBlock_.setDeletable(!1),t?(n=2*t.CORNER_RADIUS,t=this.rootBlock_.RTL?t.getWidth()+n:n):t=n=16,this.block_.RTL&&(t=-t),this.rootBlock_.moveBy(t,n),this.block_.saveConnections){var u=this,b=this.block_;b.saveConnections(this.rootBlock_),this.sourceListener_=function(){b.saveConnections(u.rootBlock_)},this.block_.workspace.addChangeListener(this.sourceListener_)}this.resizeBubble_(),this.workspace_.addChangeListener(this.workspaceChanged_.bind(this)),this.applyColour()}else this.svgDialog_=null,this.workspace_.dispose(),this.rootBlock_=this.workspace_=null,this.bubble_.dispose(),this.bubble_=null,this.workspaceHeight_=this.workspaceWidth_=0,this.sourceListener_&&(this.block_.workspace.removeChangeListener(this.sourceListener_),this.sourceListener_=null)},e.Mutator.prototype.workspaceChanged_=function(t){if(!(t.isUiEvent||t.type==e.Events.CHANGE&&"disabled"==t.element)){if(!this.workspace_.isDragging()){t=this.workspace_.getTopBlocks(!1);for(var r,n=0;r=t[n];n++){var s=r.getRelativeToSurfaceXY();if(20>s.y&&r.moveBy(0,20-s.y),r.RTL){var u=-20,b=this.workspace_.getFlyout();b&&(u-=b.getWidth()),s.x>u&&r.moveBy(u-s.x,0)}else 20>s.x&&r.moveBy(20-s.x,0)}}if(this.rootBlock_.workspace==this.workspace_){if(e.Events.setGroup(!0),t=(t=(r=this.block_).mutationToDom())&&e.Xml.domToText(t),n=r.rendered,r.rendered=!1,r.compose(this.rootBlock_),r.rendered=n,r.initSvg(),r.rendered&&r.render(),t!=(n=(n=r.mutationToDom())&&e.Xml.domToText(n))){e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(r,"mutation",null,t,n));var x=e.Events.getGroup();setTimeout(function(){e.Events.setGroup(x),r.bumpNeighbours(),e.Events.setGroup(!1)},e.BUMP_DELAY)}this.workspace_.isDragging()||this.resizeBubble_(),e.Events.setGroup(!1)}}},e.Mutator.prototype.dispose=function(){this.block_.mutator=null,e.Icon.prototype.dispose.call(this)},e.Mutator.prototype.updateBlockStyle=function(){var t=this.workspace_;if(t&&t.getAllBlocks(!1)){for(var s,n=t.getAllBlocks(!1),r=0;s=n[r];r++)s.setStyle(s.getStyleName());if(r=t.getFlyout())for(t=r.workspace_.getAllBlocks(!1),r=0;s=t[r];r++)s.setStyle(s.getStyleName())}},e.Mutator.reconnect=function(t,n,r){if(!t||!t.getSourceBlock().workspace)return!1;r=n.getInput(r).connection;var s=t.targetBlock();return!(s&&s!=n||r.targetConnection==t||(r.isConnected()&&r.disconnect(),r.connect(t),0))},e.Mutator.findParentWs=function(t){var n=null;if(t&&t.options){var r=t.options.parentWorkspace;t.isFlyout?r&&r.options&&(n=r.options.parentWorkspace):r&&(n=r)}return n},e.FieldTextInput=function(t,n,r){this.spellcheck_=!0,e.FieldTextInput.superClass_.constructor.call(this,t,n,r),this.onKeyInputWrapper_=this.onKeyDownWrapper_=this.htmlInput_=null,this.fullBlockClickTarget_=!1,this.workspace_=null},e.utils.object.inherits(e.FieldTextInput,e.Field),e.FieldTextInput.prototype.DEFAULT_VALUE="",e.FieldTextInput.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.text);return new e.FieldTextInput(n,void 0,t)},e.FieldTextInput.prototype.SERIALIZABLE=!0,e.FieldTextInput.BORDERRADIUS=4,e.FieldTextInput.prototype.CURSOR="text",e.FieldTextInput.prototype.configure_=function(t){e.FieldTextInput.superClass_.configure_.call(this,t),"boolean"==typeof t.spellcheck&&(this.spellcheck_=t.spellcheck)},e.FieldTextInput.prototype.initView=function(){if(this.getConstants().FULL_BLOCK_FIELDS){for(var s,t=0,n=0,r=0;s=this.sourceBlock_.inputList[r];r++){for(var u=0;s.fieldRow[u];u++)t++;s.connection&&n++}this.fullBlockClickTarget_=1>=t&&this.sourceBlock_.outputConnection&&!n}else this.fullBlockClickTarget_=!1;this.fullBlockClickTarget_?this.clickTarget_=this.sourceBlock_.getSvgRoot():this.createBorderRect_(),this.createTextElement_()},e.FieldTextInput.prototype.doClassValidation_=function(t){return null==t?null:String(t)},e.FieldTextInput.prototype.doValueInvalid_=function(t){this.isBeingEdited_&&(this.isTextValid_=!1,t=this.value_,this.value_=this.htmlInput_.untypedDefaultValue_,this.sourceBlock_&&e.Events.isEnabled()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this.sourceBlock_,"field",this.name||null,t,this.value_)))},e.FieldTextInput.prototype.doValueUpdate_=function(t){this.isTextValid_=!0,this.value_=t,this.isBeingEdited_||(this.isDirty_=!0)},e.FieldTextInput.prototype.applyColour=function(){this.sourceBlock_&&this.getConstants().FULL_BLOCK_FIELDS&&(this.borderRect_?this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary):this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR))},e.FieldTextInput.prototype.render_=function(){if(e.FieldTextInput.superClass_.render_.call(this),this.isBeingEdited_){this.resizeEditor_();var t=this.htmlInput_;this.isTextValid_?(e.utils.dom.removeClass(t,"blocklyInvalidInput"),e.utils.aria.setState(t,e.utils.aria.State.INVALID,!1)):(e.utils.dom.addClass(t,"blocklyInvalidInput"),e.utils.aria.setState(t,e.utils.aria.State.INVALID,!0))}},e.FieldTextInput.prototype.setSpellcheck=function(t){t!=this.spellcheck_&&(this.spellcheck_=t,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))},e.FieldTextInput.prototype.showEditor_=function(t,n){this.workspace_=this.sourceBlock_.workspace,!(t=n||!1)&&(e.utils.userAgent.MOBILE||e.utils.userAgent.ANDROID||e.utils.userAgent.IPAD)?this.showPromptEditor_():this.showInlineEditor_(t)},e.FieldTextInput.prototype.showPromptEditor_=function(){e.prompt(e.Msg.CHANGE_VALUE_TITLE,this.getText(),function(t){this.setValue(this.getValueFromEditorText_(t))}.bind(this))},e.FieldTextInput.prototype.showInlineEditor_=function(t){e.WidgetDiv.show(this,this.sourceBlock_.RTL,this.widgetDispose_.bind(this)),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,t||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())},e.FieldTextInput.prototype.widgetCreate_=function(){var t=e.WidgetDiv.DIV;e.utils.dom.addClass(this.getClickTarget_(),"editing");var n=document.createElement("input");n.className="blocklyHtmlInput",n.setAttribute("spellcheck",this.spellcheck_);var r=this.workspace_.getScale(),s=this.getConstants().FIELD_TEXT_FONTSIZE*r+"pt";if(t.style.fontSize=s,n.style.fontSize=s,s=e.FieldTextInput.BORDERRADIUS*r+"px",this.fullBlockClickTarget_){s=((s=this.getScaledBBox()).bottom-s.top)/2+"px";var u=this.sourceBlock_.getParent()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;n.style.border=1*r+"px solid "+u,t.style.borderRadius=s,t.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(t.style.boxShadow="rgba(255, 255, 255, 0.3) 0px 0px 0px "+4*r+"px")}return n.style.borderRadius=s,t.appendChild(n),n.value=n.defaultValue=this.getEditorText_(this.value_),n.untypedDefaultValue_=this.value_,n.oldValue_=null,this.resizeEditor_(),this.bindInputEvents_(n),n},e.FieldTextInput.prototype.widgetDispose_=function(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_&&this.onFinishEditing_(this.value_),this.unbindInputEvents_();var t=e.WidgetDiv.DIV.style;t.width="auto",t.height="auto",t.fontSize="",t.transition="",t.boxShadow="",this.htmlInput_=null,e.utils.dom.removeClass(this.getClickTarget_(),"editing")},e.FieldTextInput.prototype.bindInputEvents_=function(t){this.onKeyDownWrapper_=e.browserEvents.conditionalBind(t,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper_=e.browserEvents.conditionalBind(t,"input",this,this.onHtmlInputChange_)},e.FieldTextInput.prototype.unbindInputEvents_=function(){this.onKeyDownWrapper_&&(e.browserEvents.unbind(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.onKeyInputWrapper_&&(e.browserEvents.unbind(this.onKeyInputWrapper_),this.onKeyInputWrapper_=null)},e.FieldTextInput.prototype.onHtmlInputKeyDown_=function(t){t.keyCode==e.utils.KeyCodes.ENTER?(e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation()):t.keyCode==e.utils.KeyCodes.ESC?(this.setValue(this.htmlInput_.untypedDefaultValue_),e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation()):t.keyCode==e.utils.KeyCodes.TAB&&(e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation(),this.sourceBlock_.tab(this,!t.shiftKey),t.preventDefault())},e.FieldTextInput.prototype.onHtmlInputChange_=function(t){(t=this.htmlInput_.value)!==this.htmlInput_.oldValue_&&(this.htmlInput_.oldValue_=t,e.Events.setGroup(!0),t=this.getValueFromEditorText_(t),this.setValue(t),this.forceRerender(),this.resizeEditor_(),e.Events.setGroup(!1))},e.FieldTextInput.prototype.setEditorValue_=function(t){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(t)),this.setValue(t)},e.FieldTextInput.prototype.resizeEditor_=function(){var t=e.WidgetDiv.DIV,n=this.getScaledBBox();t.style.width=n.right-n.left+"px",t.style.height=n.bottom-n.top+"px",n=new e.utils.Coordinate(this.sourceBlock_.RTL?n.right-t.offsetWidth:n.left,n.top),t.style.left=n.x+"px",t.style.top=n.y+"px"},e.FieldTextInput.prototype.isTabNavigable=function(){return!0},e.FieldTextInput.prototype.getText_=function(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null},e.FieldTextInput.prototype.getEditorText_=function(t){return String(t)},e.FieldTextInput.prototype.getValueFromEditorText_=function(t){return t},e.fieldRegistry.register("field_input",e.FieldTextInput),e.FieldAngle=function(t,n,r){this.clockwise_=e.FieldAngle.CLOCKWISE,this.offset_=e.FieldAngle.OFFSET,this.wrap_=e.FieldAngle.WRAP,this.round_=e.FieldAngle.ROUND,e.FieldAngle.superClass_.constructor.call(this,t,n,r),this.moveSurfaceWrapper_=this.clickSurfaceWrapper_=this.clickWrapper_=this.line_=this.gauge_=this.editor_=null},e.utils.object.inherits(e.FieldAngle,e.FieldTextInput),e.FieldAngle.prototype.DEFAULT_VALUE=0,e.FieldAngle.fromJson=function(t){return new e.FieldAngle(t.angle,void 0,t)},e.FieldAngle.prototype.SERIALIZABLE=!0,e.FieldAngle.ROUND=15,e.FieldAngle.HALF=50,e.FieldAngle.CLOCKWISE=!1,e.FieldAngle.OFFSET=0,e.FieldAngle.WRAP=360,e.FieldAngle.RADIUS=e.FieldAngle.HALF-1,e.FieldAngle.prototype.configure_=function(t){switch(e.FieldAngle.superClass_.configure_.call(this,t),t.mode){case"compass":this.clockwise_=!0,this.offset_=90;break;case"protractor":this.clockwise_=!1,this.offset_=0}var n=t.clockwise;"boolean"==typeof n&&(this.clockwise_=n),null!=(n=t.offset)&&(n=Number(n),isNaN(n)||(this.offset_=n)),null!=(n=t.wrap)&&(n=Number(n),isNaN(n)||(this.wrap_=n)),null!=(t=t.round)&&(t=Number(t),isNaN(t)||(this.round_=t))},e.FieldAngle.prototype.initView=function(){e.FieldAngle.superClass_.initView.call(this),this.symbol_=e.utils.dom.createSvgElement(e.utils.Svg.TSPAN,{},null),this.symbol_.appendChild(document.createTextNode("\xb0")),this.textElement_.appendChild(this.symbol_)},e.FieldAngle.prototype.render_=function(){e.FieldAngle.superClass_.render_.call(this),this.updateGraph_()},e.FieldAngle.prototype.showEditor_=function(t){e.FieldAngle.superClass_.showEditor_.call(this,t,e.utils.userAgent.MOBILE||e.utils.userAgent.ANDROID||e.utils.userAgent.IPAD),this.dropdownCreate_(),e.DropDownDiv.getContentDiv().appendChild(this.editor_),e.DropDownDiv.setColour(this.sourceBlock_.style.colourPrimary,this.sourceBlock_.style.colourTertiary),e.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.updateGraph_()},e.FieldAngle.prototype.dropdownCreate_=function(){var t=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{xmlns:e.utils.dom.SVG_NS,"xmlns:html":e.utils.dom.HTML_NS,"xmlns:xlink":e.utils.dom.XLINK_NS,version:"1.1",height:2*e.FieldAngle.HALF+"px",width:2*e.FieldAngle.HALF+"px",style:"touch-action: none"},null),n=e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{cx:e.FieldAngle.HALF,cy:e.FieldAngle.HALF,r:e.FieldAngle.RADIUS,class:"blocklyAngleCircle"},t);this.gauge_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyAngleGauge"},t),this.line_=e.utils.dom.createSvgElement(e.utils.Svg.LINE,{x1:e.FieldAngle.HALF,y1:e.FieldAngle.HALF,class:"blocklyAngleLine"},t);for(var r=0;360>r;r+=15)e.utils.dom.createSvgElement(e.utils.Svg.LINE,{x1:e.FieldAngle.HALF+e.FieldAngle.RADIUS,y1:e.FieldAngle.HALF,x2:e.FieldAngle.HALF+e.FieldAngle.RADIUS-(r%45==0?10:5),y2:e.FieldAngle.HALF,class:"blocklyAngleMarks",transform:"rotate("+r+","+e.FieldAngle.HALF+","+e.FieldAngle.HALF+")"},t);this.clickWrapper_=e.browserEvents.conditionalBind(t,"click",this,this.hide_),this.clickSurfaceWrapper_=e.browserEvents.conditionalBind(n,"click",this,this.onMouseMove_,!0,!0),this.moveSurfaceWrapper_=e.browserEvents.conditionalBind(n,"mousemove",this,this.onMouseMove_,!0,!0),this.editor_=t},e.FieldAngle.prototype.dropdownDispose_=function(){this.clickWrapper_&&(e.browserEvents.unbind(this.clickWrapper_),this.clickWrapper_=null),this.clickSurfaceWrapper_&&(e.browserEvents.unbind(this.clickSurfaceWrapper_),this.clickSurfaceWrapper_=null),this.moveSurfaceWrapper_&&(e.browserEvents.unbind(this.moveSurfaceWrapper_),this.moveSurfaceWrapper_=null),this.line_=this.gauge_=null},e.FieldAngle.prototype.hide_=function(){e.DropDownDiv.hideIfOwner(this),e.WidgetDiv.hide()},e.FieldAngle.prototype.onMouseMove_=function(t){var n=this.gauge_.ownerSVGElement.getBoundingClientRect(),r=t.clientX-n.left-e.FieldAngle.HALF;t=t.clientY-n.top-e.FieldAngle.HALF,n=Math.atan(-t/r),isNaN(n)||(n=e.utils.math.toDegrees(n),0>r?n+=180:0<t&&(n+=360),this.displayMouseOrKeyboardValue_(n=this.clockwise_?this.offset_+360-n:360-(this.offset_-n)))},e.FieldAngle.prototype.displayMouseOrKeyboardValue_=function(t){this.round_&&(t=Math.round(t/this.round_)*this.round_),(t=this.wrapValue_(t))!=this.value_&&this.setEditorValue_(t)},e.FieldAngle.prototype.updateGraph_=function(){if(this.gauge_){var t=Number(this.getText())+this.offset_,n=e.utils.math.toRadians(t%360);t=["M ",e.FieldAngle.HALF,",",e.FieldAngle.HALF];var r=e.FieldAngle.HALF,s=e.FieldAngle.HALF;if(!isNaN(n)){var u=Number(this.clockwise_),b=e.utils.math.toRadians(this.offset_),x=Math.cos(b)*e.FieldAngle.RADIUS,B=Math.sin(b)*-e.FieldAngle.RADIUS;u&&(n=2*b-n),r+=Math.cos(n)*e.FieldAngle.RADIUS,s-=Math.sin(n)*e.FieldAngle.RADIUS,n=Math.abs(Math.floor((n-b)/Math.PI)%2),u&&(n=1-n),t.push(" l ",x,",",B," A ",e.FieldAngle.RADIUS,",",e.FieldAngle.RADIUS," 0 ",n," ",u," ",r,",",s," z")}this.gauge_.setAttribute("d",t.join("")),this.line_.setAttribute("x2",r),this.line_.setAttribute("y2",s)}},e.FieldAngle.prototype.onHtmlInputKeyDown_=function(t){var n;if(e.FieldAngle.superClass_.onHtmlInputKeyDown_.call(this,t),t.keyCode===e.utils.KeyCodes.LEFT?n=this.sourceBlock_.RTL?1:-1:t.keyCode===e.utils.KeyCodes.RIGHT?n=this.sourceBlock_.RTL?-1:1:t.keyCode===e.utils.KeyCodes.DOWN?n=-1:t.keyCode===e.utils.KeyCodes.UP&&(n=1),n){var r=this.getValue();this.displayMouseOrKeyboardValue_(r+n*this.round_),t.preventDefault(),t.stopPropagation()}},e.FieldAngle.prototype.doClassValidation_=function(t){return t=Number(t),isNaN(t)||!isFinite(t)?null:this.wrapValue_(t)},e.FieldAngle.prototype.wrapValue_=function(t){return 0>(t%=360)&&(t+=360),t>this.wrap_&&(t-=360),t},e.Css.register(".blocklyAngleCircle {,stroke: #444;,stroke-width: 1;,fill: #ddd;,fill-opacity: .8;,},.blocklyAngleMarks {,stroke: #444;,stroke-width: 1;,},.blocklyAngleGauge {,fill: #f88;,fill-opacity: .8;,pointer-events: none;,},.blocklyAngleLine {,stroke: #f00;,stroke-width: 2;,stroke-linecap: round;,pointer-events: none;,}".split(",")),e.fieldRegistry.register("field_angle",e.FieldAngle),e.FieldCheckbox=function(t,n,r){this.checkChar_=null,e.FieldCheckbox.superClass_.constructor.call(this,t,n,r)},e.utils.object.inherits(e.FieldCheckbox,e.Field),e.FieldCheckbox.prototype.DEFAULT_VALUE=!1,e.FieldCheckbox.fromJson=function(t){return new e.FieldCheckbox(t.checked,void 0,t)},e.FieldCheckbox.CHECK_CHAR="\u2713",e.FieldCheckbox.prototype.SERIALIZABLE=!0,e.FieldCheckbox.prototype.CURSOR="default",e.FieldCheckbox.prototype.configure_=function(t){e.FieldCheckbox.superClass_.configure_.call(this,t),t.checkCharacter&&(this.checkChar_=t.checkCharacter)},e.FieldCheckbox.prototype.initView=function(){e.FieldCheckbox.superClass_.initView.call(this),e.utils.dom.addClass(this.textElement_,"blocklyCheckbox"),this.textElement_.style.display=this.value_?"block":"none"},e.FieldCheckbox.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)},e.FieldCheckbox.prototype.getDisplayText_=function(){return this.checkChar_||e.FieldCheckbox.CHECK_CHAR},e.FieldCheckbox.prototype.setCheckCharacter=function(t){this.checkChar_=t,this.forceRerender()},e.FieldCheckbox.prototype.showEditor_=function(){this.setValue(!this.value_)},e.FieldCheckbox.prototype.doClassValidation_=function(t){return!0===t||"TRUE"===t?"TRUE":!1===t||"FALSE"===t?"FALSE":null},e.FieldCheckbox.prototype.doValueUpdate_=function(t){this.value_=this.convertValueToBool_(t),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")},e.FieldCheckbox.prototype.getValue=function(){return this.value_?"TRUE":"FALSE"},e.FieldCheckbox.prototype.getValueBoolean=function(){return this.value_},e.FieldCheckbox.prototype.getText=function(){return String(this.convertValueToBool_(this.value_))},e.FieldCheckbox.prototype.convertValueToBool_=function(t){return"string"==typeof t?"TRUE"==t:!!t},e.fieldRegistry.register("field_checkbox",e.FieldCheckbox),e.FieldColour=function(t,n,r){e.FieldColour.superClass_.constructor.call(this,t,n,r),this.onKeyDownWrapper_=this.onMouseLeaveWrapper_=this.onMouseEnterWrapper_=this.onMouseMoveWrapper_=this.onClickWrapper_=this.highlightedIndex_=this.picker_=null},e.utils.object.inherits(e.FieldColour,e.Field),e.FieldColour.fromJson=function(t){return new e.FieldColour(t.colour,void 0,t)},e.FieldColour.prototype.SERIALIZABLE=!0,e.FieldColour.prototype.CURSOR="default",e.FieldColour.prototype.isDirty_=!1,e.FieldColour.prototype.colours_=null,e.FieldColour.prototype.titles_=null,e.FieldColour.prototype.columns_=0,e.FieldColour.prototype.configure_=function(t){e.FieldColour.superClass_.configure_.call(this,t),t.colourOptions&&(this.colours_=t.colourOptions,this.titles_=t.colourTitles),t.columns&&(this.columns_=t.columns)},e.FieldColour.prototype.initView=function(){this.size_=new e.utils.Size(this.getConstants().FIELD_COLOUR_DEFAULT_WIDTH,this.getConstants().FIELD_COLOUR_DEFAULT_HEIGHT),this.getConstants().FIELD_COLOUR_FULL_BLOCK?this.clickTarget_=this.sourceBlock_.getSvgRoot():(this.createBorderRect_(),this.borderRect_.style.fillOpacity="1")},e.FieldColour.prototype.applyColour=function(){this.getConstants().FIELD_COLOUR_FULL_BLOCK?(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getValue()),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff")):this.borderRect_&&(this.borderRect_.style.fill=this.getValue())},e.FieldColour.prototype.doClassValidation_=function(t){return"string"!=typeof t?null:e.utils.colour.parse(t)},e.FieldColour.prototype.doValueUpdate_=function(t){this.value_=t,this.borderRect_?this.borderRect_.style.fill=t:this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",t),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff"))},e.FieldColour.prototype.getText=function(){var t=this.value_;return/^#(.)\1(.)\2(.)\3$/.test(t)&&(t="#"+t[1]+t[3]+t[5]),t},e.FieldColour.COLOURS="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" "),e.FieldColour.prototype.DEFAULT_VALUE=e.FieldColour.COLOURS[0],e.FieldColour.TITLES=[],e.FieldColour.COLUMNS=7,e.FieldColour.prototype.setColours=function(t,n){return this.colours_=t,n&&(this.titles_=n),this},e.FieldColour.prototype.setColumns=function(t){return this.columns_=t,this},e.FieldColour.prototype.showEditor_=function(){this.dropdownCreate_(),e.DropDownDiv.getContentDiv().appendChild(this.picker_),e.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.picker_.focus({preventScroll:!0})},e.FieldColour.prototype.onClick_=function(t){null!==(t=(t=t.target)&&t.label)&&(this.setValue(t),e.DropDownDiv.hideIfOwner(this))},e.FieldColour.prototype.onKeyDown_=function(t){var n=!1;t.keyCode===e.utils.KeyCodes.UP?(this.moveHighlightBy_(0,-1),n=!0):t.keyCode===e.utils.KeyCodes.DOWN?(this.moveHighlightBy_(0,1),n=!0):t.keyCode===e.utils.KeyCodes.LEFT?(this.moveHighlightBy_(-1,0),n=!0):t.keyCode===e.utils.KeyCodes.RIGHT?(this.moveHighlightBy_(1,0),n=!0):t.keyCode===e.utils.KeyCodes.ENTER&&((n=this.getHighlighted_())&&null!==(n=n&&n.label)&&this.setValue(n),e.DropDownDiv.hideWithoutAnimation(),n=!0),n&&t.stopPropagation()},e.FieldColour.prototype.moveHighlightBy_=function(t,n){var r=this.colours_||e.FieldColour.COLOURS,s=this.columns_||e.FieldColour.COLUMNS,u=this.highlightedIndex_%s,b=Math.floor(this.highlightedIndex_/s);u+=t,b+=n,0>t?0>u&&0<b?(u=s-1,b--):0>u&&(u=0):0<t?u>s-1&&b<Math.floor(r.length/s)-1?(u=0,b++):u>s-1&&u--:0>n?0>b&&(b=0):0<n&&b>Math.floor(r.length/s)-1&&(b=Math.floor(r.length/s)-1),this.setHighlightedCell_(this.picker_.childNodes[b].childNodes[u],b*s+u)},e.FieldColour.prototype.onMouseMove_=function(t){var n=(t=t.target)&&Number(t.getAttribute("data-index"));null!==n&&n!==this.highlightedIndex_&&this.setHighlightedCell_(t,n)},e.FieldColour.prototype.onMouseEnter_=function(){this.picker_.focus({preventScroll:!0})},e.FieldColour.prototype.onMouseLeave_=function(){this.picker_.blur();var t=this.getHighlighted_();t&&e.utils.dom.removeClass(t,"blocklyColourHighlighted")},e.FieldColour.prototype.getHighlighted_=function(){var t=this.columns_||e.FieldColour.COLUMNS,n=this.picker_.childNodes[Math.floor(this.highlightedIndex_/t)];return n?n.childNodes[this.highlightedIndex_%t]:null},e.FieldColour.prototype.setHighlightedCell_=function(t,n){var r=this.getHighlighted_();r&&e.utils.dom.removeClass(r,"blocklyColourHighlighted"),e.utils.dom.addClass(t,"blocklyColourHighlighted"),this.highlightedIndex_=n,e.utils.aria.setState(this.picker_,e.utils.aria.State.ACTIVEDESCENDANT,t.getAttribute("id"))},e.FieldColour.prototype.dropdownCreate_=function(){var t=this.columns_||e.FieldColour.COLUMNS,n=this.colours_||e.FieldColour.COLOURS,r=this.titles_||e.FieldColour.TITLES,s=this.getValue(),u=document.createElement("table");u.className="blocklyColourTable",u.tabIndex=0,u.dir="ltr",e.utils.aria.setRole(u,e.utils.aria.Role.GRID),e.utils.aria.setState(u,e.utils.aria.State.EXPANDED,!0),e.utils.aria.setState(u,e.utils.aria.State.ROWCOUNT,Math.floor(n.length/t)),e.utils.aria.setState(u,e.utils.aria.State.COLCOUNT,t);for(var b,x=0;x<n.length;x++){x%t==0&&(b=document.createElement("tr"),e.utils.aria.setRole(b,e.utils.aria.Role.ROW),u.appendChild(b));var B=document.createElement("td");b.appendChild(B),B.label=n[x],B.title=r[x]||n[x],B.id=e.utils.IdGenerator.getNextUniqueId(),B.setAttribute("data-index",x),e.utils.aria.setRole(B,e.utils.aria.Role.GRIDCELL),e.utils.aria.setState(B,e.utils.aria.State.LABEL,n[x]),e.utils.aria.setState(B,e.utils.aria.State.SELECTED,n[x]==s),B.style.backgroundColor=n[x],n[x]==s&&(B.className="blocklyColourSelected",this.highlightedIndex_=x)}this.onClickWrapper_=e.browserEvents.conditionalBind(u,"click",this,this.onClick_,!0),this.onMouseMoveWrapper_=e.browserEvents.conditionalBind(u,"mousemove",this,this.onMouseMove_,!0),this.onMouseEnterWrapper_=e.browserEvents.conditionalBind(u,"mouseenter",this,this.onMouseEnter_,!0),this.onMouseLeaveWrapper_=e.browserEvents.conditionalBind(u,"mouseleave",this,this.onMouseLeave_,!0),this.onKeyDownWrapper_=e.browserEvents.conditionalBind(u,"keydown",this,this.onKeyDown_),this.picker_=u},e.FieldColour.prototype.dropdownDispose_=function(){this.onClickWrapper_&&(e.browserEvents.unbind(this.onClickWrapper_),this.onClickWrapper_=null),this.onMouseMoveWrapper_&&(e.browserEvents.unbind(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null),this.onMouseEnterWrapper_&&(e.browserEvents.unbind(this.onMouseEnterWrapper_),this.onMouseEnterWrapper_=null),this.onMouseLeaveWrapper_&&(e.browserEvents.unbind(this.onMouseLeaveWrapper_),this.onMouseLeaveWrapper_=null),this.onKeyDownWrapper_&&(e.browserEvents.unbind(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.highlightedIndex_=this.picker_=null},e.Css.register([".blocklyColourTable {","border-collapse: collapse;","display: block;","outline: none;","padding: 1px;","}",".blocklyColourTable>tr>td {","border: .5px solid #888;","box-sizing: border-box;","cursor: pointer;","display: inline-block;","height: 20px;","padding: 0;","width: 20px;","}",".blocklyColourTable>tr>td.blocklyColourHighlighted {","border-color: #eee;","box-shadow: 2px 2px 7px 2px rgba(0,0,0,.3);","position: relative;","}",".blocklyColourSelected, .blocklyColourSelected:hover {","border-color: #eee !important;","outline: 1px solid #333;","position: relative;","}"]),e.fieldRegistry.register("field_colour",e.FieldColour),e.FieldDropdown=function(t,n,r){"function"!=typeof t&&e.FieldDropdown.validateOptions_(t),this.menuGenerator_=t,this.suffixField=this.prefixField=this.generatedOptions_=null,this.trimOptions_(),this.selectedOption_=this.getOptions(!1)[0],e.FieldDropdown.superClass_.constructor.call(this,this.selectedOption_[1],n,r),this.svgArrow_=this.arrow_=this.imageElement_=this.menu_=this.selectedMenuItem_=null},e.utils.object.inherits(e.FieldDropdown,e.Field),e.FieldDropdown.fromJson=function(t){return new e.FieldDropdown(t.options,void 0,t)},e.FieldDropdown.prototype.fromXml=function(t){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(t.textContent)},e.FieldDropdown.prototype.SERIALIZABLE=!0,e.FieldDropdown.CHECKMARK_OVERHANG=25,e.FieldDropdown.MAX_MENU_HEIGHT_VH=.45,e.FieldDropdown.IMAGE_Y_OFFSET=5,e.FieldDropdown.IMAGE_Y_PADDING=2*e.FieldDropdown.IMAGE_Y_OFFSET,e.FieldDropdown.ARROW_CHAR=e.utils.userAgent.ANDROID?"\u25bc":"\u25be",e.FieldDropdown.prototype.CURSOR="default",e.FieldDropdown.prototype.initView=function(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement_=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&e.utils.dom.addClass(this.borderRect_,"blocklyDropdownRect")},e.FieldDropdown.prototype.shouldAddBorderRect_=function(){return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!this.sourceBlock_.isShadow()},e.FieldDropdown.prototype.createTextArrow_=function(){this.arrow_=e.utils.dom.createSvgElement(e.utils.Svg.TSPAN,{},this.textElement_),this.arrow_.appendChild(document.createTextNode(this.sourceBlock_.RTL?e.FieldDropdown.ARROW_CHAR+" ":" "+e.FieldDropdown.ARROW_CHAR)),this.sourceBlock_.RTL?this.textElement_.insertBefore(this.arrow_,this.textContent_):this.textElement_.appendChild(this.arrow_)},e.FieldDropdown.prototype.createSVGArrow_=function(){this.svgArrow_=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)},e.FieldDropdown.prototype.showEditor_=function(t){if(this.dropdownCreate_(),this.menu_.openingCoords=t&&"number"==typeof t.clientX?new e.utils.Coordinate(t.clientX,t.clientY):null,this.menu_.render(e.DropDownDiv.getContentDiv()),t=this.menu_.getElement(),e.utils.dom.addClass(t,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV){t=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().getColour():this.sourceBlock_.getColour();var n=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;e.DropDownDiv.setColour(t,n)}e.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem_&&this.menu_.setHighlighted(this.selectedMenuItem_),this.applyColour()},e.FieldDropdown.prototype.dropdownCreate_=function(){var t=new e.Menu;t.setRole(e.utils.aria.Role.LISTBOX),this.menu_=t;var n=this.getOptions(!1);this.selectedMenuItem_=null;for(var r=0;r<n.length;r++){var s=n[r][0],u=n[r][1];if("object"==typeof s){var b=new Image(s.width,s.height);b.src=s.src,b.alt=s.alt||"",s=b}(s=new e.MenuItem(s,u)).setRole(e.utils.aria.Role.OPTION),s.setRightToLeft(this.sourceBlock_.RTL),s.setCheckable(!0),t.addChild(s),s.setChecked(u==this.value_),u==this.value_&&(this.selectedMenuItem_=s),s.onAction(this.handleMenuActionEvent_,this)}},e.FieldDropdown.prototype.dropdownDispose_=function(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem_=this.menu_=null,this.applyColour()},e.FieldDropdown.prototype.handleMenuActionEvent_=function(t){e.DropDownDiv.hideIfOwner(this,!0),this.onItemSelected_(this.menu_,t)},e.FieldDropdown.prototype.onItemSelected_=function(t,n){this.setValue(n.getValue())},e.FieldDropdown.prototype.trimOptions_=function(){var t=this.menuGenerator_;if(Array.isArray(t)){for(var n=!1,r=0;r<t.length;r++){var s=t[r][0];"string"==typeof s?t[r][0]=e.utils.replaceMessageReferences(s):(null!=s.alt&&(t[r][0].alt=e.utils.replaceMessageReferences(s.alt)),n=!0)}if(!(n||2>t.length)){for(n=[],r=0;r<t.length;r++)n.push(t[r][0]);r=e.utils.string.shortestStringLength(n),s=e.utils.string.commonWordPrefix(n,r);var u=e.utils.string.commonWordSuffix(n,r);!s&&!u||r<=s+u||(s&&(this.prefixField=n[0].substring(0,s-1)),u&&(this.suffixField=n[0].substr(1-u)),this.menuGenerator_=e.FieldDropdown.applyTrim_(t,s,u))}}},e.FieldDropdown.applyTrim_=function(t,n,r){for(var s=[],u=0;u<t.length;u++){var b=t[u][0],x=t[u][1];b=b.substring(n,b.length-r),s[u]=[b,x]}return s},e.FieldDropdown.prototype.isOptionListDynamic=function(){return"function"==typeof this.menuGenerator_},e.FieldDropdown.prototype.getOptions=function(t){return this.isOptionListDynamic()?(this.generatedOptions_&&t||(this.generatedOptions_=this.menuGenerator_.call(this),e.FieldDropdown.validateOptions_(this.generatedOptions_)),this.generatedOptions_):this.menuGenerator_},e.FieldDropdown.prototype.doClassValidation_=function(t){for(var u,n=!1,r=this.getOptions(!0),s=0;u=r[s];s++)if(u[1]==t){n=!0;break}return n?t:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+t),null)},e.FieldDropdown.prototype.doValueUpdate_=function(t){e.FieldDropdown.superClass_.doValueUpdate_.call(this,t),t=this.getOptions(!0);for(var r,n=0;r=t[n];n++)r[1]==this.value_&&(this.selectedOption_=r)},e.FieldDropdown.prototype.applyColour=function(){this.borderRect_&&(this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary),this.borderRect_.setAttribute("fill",this.menu_?this.sourceBlock_.style.colourTertiary:"transparent")),this.sourceBlock_&&this.arrow_&&(this.arrow_.style.fill=this.sourceBlock_.isShadow()?this.sourceBlock_.style.colourSecondary:this.sourceBlock_.style.colourPrimary)},e.FieldDropdown.prototype.render_=function(){this.textContent_.nodeValue="",this.imageElement_.style.display="none";var t=this.selectedOption_&&this.selectedOption_[0];t&&"object"==typeof t?this.renderSelectedImage_(t):this.renderSelectedText_(),this.positionBorderRect_()},e.FieldDropdown.prototype.renderSelectedImage_=function(t){this.imageElement_.style.display="",this.imageElement_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",t.src),this.imageElement_.setAttribute("height",t.height),this.imageElement_.setAttribute("width",t.width);var n=Number(t.height);t=Number(t.width);var r=!!this.borderRect_,s=Math.max(r?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,n+e.FieldDropdown.IMAGE_Y_PADDING);r=r?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var u=this.svgArrow_?this.positionSVGArrow_(t+r,s/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):e.utils.dom.getFastTextWidth(this.arrow_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);this.size_.width=t+u+2*r,this.size_.height=s;var b=0;this.sourceBlock_.RTL?this.imageElement_.setAttribute("x",r+u):(b=t+u,this.textElement_.setAttribute("text-anchor","end"),this.imageElement_.setAttribute("x",r)),this.imageElement_.setAttribute("y",s/2-n/2),this.positionTextElement_(b+r,t+u)},e.FieldDropdown.prototype.renderSelectedText_=function(){this.textContent_.nodeValue=this.getDisplayText_(),e.utils.dom.addClass(this.textElement_,"blocklyDropdownText"),this.textElement_.setAttribute("text-anchor","start");var t=!!this.borderRect_,n=Math.max(t?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT),r=e.utils.dom.getFastTextWidth(this.textElement_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);t=t?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var s=0;this.svgArrow_&&(s=this.positionSVGArrow_(r+t,n/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=r+s+2*t,this.size_.height=n,this.positionTextElement_(t,r)},e.FieldDropdown.prototype.positionSVGArrow_=function(t,n){if(!this.svgArrow_)return 0;var r=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,s=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,u=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow_.setAttribute("transform","translate("+(this.sourceBlock_.RTL?r:t+s)+","+n+")"),u+s},e.FieldDropdown.prototype.getText_=function(){if(!this.selectedOption_)return null;var t=this.selectedOption_[0];return"object"==typeof t?t.alt:t},e.FieldDropdown.validateOptions_=function(t){if(!Array.isArray(t))throw TypeError("FieldDropdown options must be an array.");if(!t.length)throw TypeError("FieldDropdown options must not be an empty array.");for(var n=!1,r=0;r<t.length;++r){var s=t[r];Array.isArray(s)?"string"!=typeof s[1]?(n=!0,console.error("Invalid option["+r+"]: Each FieldDropdown option id must be a string. Found "+s[1]+" in: ",s)):s[0]&&"string"!=typeof s[0]&&"string"!=typeof s[0].src&&(n=!0,console.error("Invalid option["+r+"]: Each FieldDropdown option must have a string label or image description. Found"+s[0]+" in: ",s)):(n=!0,console.error("Invalid option["+r+"]: Each FieldDropdown option must be an array. Found: ",s))}if(n)throw TypeError("Found invalid FieldDropdown options.")},e.fieldRegistry.register("field_dropdown",e.FieldDropdown),e.FieldLabelSerializable=function(t,n,r){e.FieldLabelSerializable.superClass_.constructor.call(this,t,n,r)},e.utils.object.inherits(e.FieldLabelSerializable,e.FieldLabel),e.FieldLabelSerializable.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.text);return new e.FieldLabelSerializable(n,void 0,t)},e.FieldLabelSerializable.prototype.EDITABLE=!1,e.FieldLabelSerializable.prototype.SERIALIZABLE=!0,e.fieldRegistry.register("field_label_serializable",e.FieldLabelSerializable),e.FieldImage=function(t,n,r,s,u,b,x){if(!t)throw Error("Src value of an image field is required");if(t=e.utils.replaceMessageReferences(t),r=Number(e.utils.replaceMessageReferences(r)),n=Number(e.utils.replaceMessageReferences(n)),isNaN(r)||isNaN(n))throw Error("Height and width values of an image field must cast to numbers.");if(0>=r||0>=n)throw Error("Height and width values of an image field must be greater than 0.");this.flipRtl_=!1,this.altText_="",e.FieldImage.superClass_.constructor.call(this,t,null,x),x||(this.flipRtl_=!!b,this.altText_=e.utils.replaceMessageReferences(s)||""),this.size_=new e.utils.Size(n,r+e.FieldImage.Y_PADDING),this.imageHeight_=r,this.clickHandler_=null,"function"==typeof u&&(this.clickHandler_=u),this.imageElement_=null},e.utils.object.inherits(e.FieldImage,e.Field),e.FieldImage.prototype.DEFAULT_VALUE="",e.FieldImage.fromJson=function(t){return new e.FieldImage(t.src,t.width,t.height,void 0,void 0,void 0,t)},e.FieldImage.Y_PADDING=1,e.FieldImage.prototype.EDITABLE=!1,e.FieldImage.prototype.isDirty_=!1,e.FieldImage.prototype.configure_=function(t){e.FieldImage.superClass_.configure_.call(this,t),this.flipRtl_=!!t.flipRtl,this.altText_=e.utils.replaceMessageReferences(t.alt)||""},e.FieldImage.prototype.initView=function(){this.imageElement_=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{height:this.imageHeight_+"px",width:this.size_.width+"px",alt:this.altText_},this.fieldGroup_),this.imageElement_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.value_),this.clickHandler_&&(this.imageElement_.style.cursor="pointer")},e.FieldImage.prototype.updateSize_=function(){},e.FieldImage.prototype.doClassValidation_=function(t){return"string"!=typeof t?null:t},e.FieldImage.prototype.doValueUpdate_=function(t){this.value_=t,this.imageElement_&&this.imageElement_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",String(this.value_))},e.FieldImage.prototype.getFlipRtl=function(){return this.flipRtl_},e.FieldImage.prototype.setAlt=function(t){t!=this.altText_&&(this.altText_=t||"",this.imageElement_&&this.imageElement_.setAttribute("alt",this.altText_))},e.FieldImage.prototype.showEditor_=function(){this.clickHandler_&&this.clickHandler_(this)},e.FieldImage.prototype.setOnClickHandler=function(t){this.clickHandler_=t},e.FieldImage.prototype.getText_=function(){return this.altText_},e.fieldRegistry.register("field_image",e.FieldImage),e.FieldMultilineInput=function(t,n,r){e.FieldMultilineInput.superClass_.constructor.call(this,t,n,r),this.textGroup_=null,this.maxLines_=1/0,this.isOverflowedY_=!1},e.utils.object.inherits(e.FieldMultilineInput,e.FieldTextInput),e.FieldMultilineInput.prototype.configure_=function(t){e.FieldMultilineInput.superClass_.configure_.call(this,t),t.maxLines&&this.setMaxLines(t.maxLines)},e.FieldMultilineInput.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.text);return new e.FieldMultilineInput(n,void 0,t)},e.FieldMultilineInput.prototype.toXml=function(t){return t.textContent=this.getValue().replace(/\n/g,"&#10;"),t},e.FieldMultilineInput.prototype.fromXml=function(t){this.setValue(t.textContent.replace(/&#10;/g,"\n"))},e.FieldMultilineInput.prototype.initView=function(){this.createBorderRect_(),this.textGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyEditableText"},this.fieldGroup_)},e.FieldMultilineInput.prototype.getDisplayText_=function(){var t=this.getText();if(!t)return e.Field.NBSP;var n=t.split("\n");t="";for(var r=this.isOverflowedY_?this.maxLines_:n.length,s=0;s<r;s++){var u=n[s];u.length>this.maxDisplayLength?u=u.substring(0,this.maxDisplayLength-4)+"...":this.isOverflowedY_&&s===r-1&&(u=u.substring(0,u.length-3)+"..."),t+=u=u.replace(/\s/g,e.Field.NBSP),s!==r-1&&(t+="\n")}return this.sourceBlock_.RTL&&(t+="\u200f"),t},e.FieldMultilineInput.prototype.doValueUpdate_=function(t){e.FieldMultilineInput.superClass_.doValueUpdate_.call(this,t),this.isOverflowedY_=this.value_.split("\n").length>this.maxLines_},e.FieldMultilineInput.prototype.render_=function(){for(var t;t=this.textGroup_.firstChild;)this.textGroup_.removeChild(t);t=this.getDisplayText_().split("\n");for(var n=0,r=0;r<t.length;r++){var s=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING;e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:"blocklyText blocklyMultilineText",x:this.getConstants().FIELD_BORDER_RECT_X_PADDING,y:n+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,dy:this.getConstants().FIELD_TEXT_BASELINE},this.textGroup_).appendChild(document.createTextNode(t[r])),n+=s}this.isBeingEdited_&&(t=this.htmlInput_,this.isOverflowedY_?e.utils.dom.addClass(t,"blocklyHtmlTextAreaInputOverflowedY"):e.utils.dom.removeClass(t,"blocklyHtmlTextAreaInputOverflowedY")),this.updateSize_(),this.isBeingEdited_&&(this.sourceBlock_.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),t=this.htmlInput_,this.isTextValid_?(e.utils.dom.removeClass(t,"blocklyInvalidInput"),e.utils.aria.setState(t,e.utils.aria.State.INVALID,!1)):(e.utils.dom.addClass(t,"blocklyInvalidInput"),e.utils.aria.setState(t,e.utils.aria.State.INVALID,!0)))},e.FieldMultilineInput.prototype.updateSize_=function(){for(var t=this.textGroup_.childNodes,n=0,r=0,s=0;s<t.length;s++){var u=e.utils.dom.getTextWidth(t[s]);u>n&&(n=u),r+=this.getConstants().FIELD_TEXT_HEIGHT+(0<s?this.getConstants().FIELD_BORDER_RECT_Y_PADDING:0)}if(this.isBeingEdited_){t=this.value_.split("\n"),u=e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:"blocklyText blocklyMultilineText"});var b=this.getConstants().FIELD_TEXT_FONTSIZE,x=this.getConstants().FIELD_TEXT_FONTWEIGHT,B=this.getConstants().FIELD_TEXT_FONTFAMILY;for(s=0;s<t.length;s++){t[s].length>this.maxDisplayLength&&(t[s]=t[s].substring(0,this.maxDisplayLength)),u.textContent=t[s];var Z=e.utils.dom.getFastTextWidth(u,b,x,B);Z>n&&(n=Z)}n+=this.htmlInput_.offsetWidth-this.htmlInput_.clientWidth}this.borderRect_&&(r+=2*this.getConstants().FIELD_BORDER_RECT_Y_PADDING,n+=2*this.getConstants().FIELD_BORDER_RECT_X_PADDING,this.borderRect_.setAttribute("width",n),this.borderRect_.setAttribute("height",r)),this.size_.width=n,this.size_.height=r,this.positionBorderRect_()},e.FieldMultilineInput.prototype.showEditor_=function(t,n){e.FieldMultilineInput.superClass_.showEditor_.call(this,t,n),this.forceRerender()},e.FieldMultilineInput.prototype.widgetCreate_=function(){var t=e.WidgetDiv.DIV,n=this.workspace_.getScale(),r=document.createElement("textarea");r.className="blocklyHtmlInput blocklyHtmlTextAreaInput",r.setAttribute("spellcheck",this.spellcheck_);var s=this.getConstants().FIELD_TEXT_FONTSIZE*n+"pt";t.style.fontSize=s,r.style.fontSize=s,r.style.borderRadius=e.FieldTextInput.BORDERRADIUS*n+"px",s=this.getConstants().FIELD_BORDER_RECT_X_PADDING*n;var u=this.getConstants().FIELD_BORDER_RECT_Y_PADDING*n/2;return r.style.padding=u+"px "+s+"px "+u+"px "+s+"px",s=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,r.style.lineHeight=s*n+"px",t.appendChild(r),r.value=r.defaultValue=this.getEditorText_(this.value_),r.untypedDefaultValue_=this.value_,r.oldValue_=null,e.utils.userAgent.GECKO?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.bindInputEvents_(r),r},e.FieldMultilineInput.prototype.setMaxLines=function(t){"number"==typeof t&&0<t&&t!==this.maxLines_&&(this.maxLines_=t,this.forceRerender())},e.FieldMultilineInput.prototype.getMaxLines=function(){return this.maxLines_},e.FieldMultilineInput.prototype.onHtmlInputKeyDown_=function(t){t.keyCode!==e.utils.KeyCodes.ENTER&&e.FieldMultilineInput.superClass_.onHtmlInputKeyDown_.call(this,t)},e.Css.register(".blocklyHtmlTextAreaInput {,font-family: monospace;,resize: none;,overflow: hidden;,height: 100%;,text-align: left;,},.blocklyHtmlTextAreaInputOverflowedY {,overflow-y: scroll;,}".split(",")),e.fieldRegistry.register("field_multilinetext",e.FieldMultilineInput),e.FieldNumber=function(t,n,r,s,u,b){this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces_=null,e.FieldNumber.superClass_.constructor.call(this,t,u,b),b||this.setConstraints(n,r,s)},e.utils.object.inherits(e.FieldNumber,e.FieldTextInput),e.FieldNumber.prototype.DEFAULT_VALUE=0,e.FieldNumber.fromJson=function(t){return new e.FieldNumber(t.value,void 0,void 0,void 0,void 0,t)},e.FieldNumber.prototype.SERIALIZABLE=!0,e.FieldNumber.prototype.configure_=function(t){e.FieldNumber.superClass_.configure_.call(this,t),this.setMinInternal_(t.min),this.setMaxInternal_(t.max),this.setPrecisionInternal_(t.precision)},e.FieldNumber.prototype.setConstraints=function(t,n,r){this.setMinInternal_(t),this.setMaxInternal_(n),this.setPrecisionInternal_(r),this.setValue(this.getValue())},e.FieldNumber.prototype.setMin=function(t){this.setMinInternal_(t),this.setValue(this.getValue())},e.FieldNumber.prototype.setMinInternal_=function(t){null==t?this.min_=-1/0:(t=Number(t),isNaN(t)||(this.min_=t))},e.FieldNumber.prototype.getMin=function(){return this.min_},e.FieldNumber.prototype.setMax=function(t){this.setMaxInternal_(t),this.setValue(this.getValue())},e.FieldNumber.prototype.setMaxInternal_=function(t){null==t?this.max_=1/0:(t=Number(t),isNaN(t)||(this.max_=t))},e.FieldNumber.prototype.getMax=function(){return this.max_},e.FieldNumber.prototype.setPrecision=function(t){this.setPrecisionInternal_(t),this.setValue(this.getValue())},e.FieldNumber.prototype.setPrecisionInternal_=function(t){this.precision_=Number(t)||0;var n=String(this.precision_);-1!=n.indexOf("e")&&(n=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));var r=n.indexOf(".");this.decimalPlaces_=-1==r?t?0:null:n.length-r-1},e.FieldNumber.prototype.getPrecision=function(){return this.precision_},e.FieldNumber.prototype.doClassValidation_=function(t){return null===t||(t=(t=(t=(t=String(t)).replace(/O/gi,"0")).replace(/,/g,"")).replace(/infinity/i,"Infinity"),t=Number(t||0),isNaN(t))?null:(t=Math.min(Math.max(t,this.min_),this.max_),this.precision_&&isFinite(t)&&(t=Math.round(t/this.precision_)*this.precision_),null!=this.decimalPlaces_&&(t=Number(t.toFixed(this.decimalPlaces_))),t)},e.FieldNumber.prototype.widgetCreate_=function(){var t=e.FieldNumber.superClass_.widgetCreate_.call(this);return-1/0<this.min_&&e.utils.aria.setState(t,e.utils.aria.State.VALUEMIN,this.min_),1/0>this.max_&&e.utils.aria.setState(t,e.utils.aria.State.VALUEMAX,this.max_),t},e.fieldRegistry.register("field_number",e.FieldNumber),e.FieldVariable=function(t,n,r,s,u){this.menuGenerator_=e.FieldVariable.dropdownCreate,this.defaultVariableName="string"==typeof t?t:"",this.size_=new e.utils.Size(0,0),u&&this.configure_(u),n&&this.setValidator(n),u||this.setTypes_(r,s)},e.utils.object.inherits(e.FieldVariable,e.FieldDropdown),e.FieldVariable.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.variable);return new e.FieldVariable(n,void 0,void 0,void 0,t)},e.FieldVariable.prototype.SERIALIZABLE=!0,e.FieldVariable.prototype.configure_=function(t){e.FieldVariable.superClass_.configure_.call(this,t),this.setTypes_(t.variableTypes,t.defaultType)},e.FieldVariable.prototype.initModel=function(){if(!this.variable_){var t=e.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,null,this.defaultVariableName,this.defaultType_);this.doValueUpdate_(t.getId())}},e.FieldVariable.prototype.shouldAddBorderRect_=function(){return e.FieldVariable.superClass_.shouldAddBorderRect_.call(this)&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||"variables_get"!=this.sourceBlock_.type)},e.FieldVariable.prototype.fromXml=function(t){var n=t.getAttribute("id"),r=t.textContent,s=t.getAttribute("variabletype")||t.getAttribute("variableType")||"";if(n=e.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,n,r,s),null!=s&&s!==n.type)throw Error("Serialized variable type with id '"+n.getId()+"' had type "+n.type+", and does not match variable field that references it: "+e.Xml.domToText(t)+".");this.setValue(n.getId())},e.FieldVariable.prototype.toXml=function(t){return this.initModel(),t.id=this.variable_.getId(),t.textContent=this.variable_.name,this.variable_.type&&t.setAttribute("variabletype",this.variable_.type),t},e.FieldVariable.prototype.setSourceBlock=function(t){if(t.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");e.FieldVariable.superClass_.setSourceBlock.call(this,t)},e.FieldVariable.prototype.getValue=function(){return this.variable_?this.variable_.getId():null},e.FieldVariable.prototype.getText=function(){return this.variable_?this.variable_.name:""},e.FieldVariable.prototype.getVariable=function(){return this.variable_},e.FieldVariable.prototype.getValidator=function(){return this.variable_?this.validator_:null},e.FieldVariable.prototype.doClassValidation_=function(t){if(null===t)return null;var n=e.Variables.getVariable(this.sourceBlock_.workspace,t);return n?this.typeIsAllowed_(n=n.type)?t:(console.warn("Variable type doesn't match this field!  Type was "+n),null):(console.warn("Variable id doesn't point to a real variable! ID was "+t),null)},e.FieldVariable.prototype.doValueUpdate_=function(t){this.variable_=e.Variables.getVariable(this.sourceBlock_.workspace,t),e.FieldVariable.superClass_.doValueUpdate_.call(this,t)},e.FieldVariable.prototype.typeIsAllowed_=function(t){var n=this.getVariableTypes_();if(!n)return!0;for(var r=0;r<n.length;r++)if(t==n[r])return!0;return!1},e.FieldVariable.prototype.getVariableTypes_=function(){var t=this.variableTypes;if(null===t&&this.sourceBlock_&&this.sourceBlock_.workspace)return this.sourceBlock_.workspace.getVariableTypes();if(0==(t=t||[""]).length)throw t=this.getText(),Error("'variableTypes' of field variable "+t+" was an empty list");return t},e.FieldVariable.prototype.setTypes_=function(t,n){if(n=n||"",null==t||null==t)t=null;else{if(!Array.isArray(t))throw Error("'variableTypes' was not an array in the definition of a FieldVariable");for(var r=!1,s=0;s<t.length;s++)t[s]==n&&(r=!0);if(!r)throw Error("Invalid default type '"+n+"' in the definition of a FieldVariable")}this.defaultType_=n,this.variableTypes=t},e.FieldVariable.prototype.refreshVariableName=function(){this.forceRerender()},e.FieldVariable.dropdownCreate=function(){if(!this.variable_)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");var t=this.getText(),n=[];if(this.sourceBlock_&&this.sourceBlock_.workspace)for(var r=this.getVariableTypes_(),s=0;s<r.length;s++){var u=this.sourceBlock_.workspace.getVariablesOfType(r[s]);n=n.concat(u)}for(n.sort(e.VariableModel.compareByName),r=[],s=0;s<n.length;s++)r[s]=[n[s].name,n[s].getId()];return r.push([e.Msg.RENAME_VARIABLE,e.RENAME_VARIABLE_ID]),e.Msg.DELETE_VARIABLE&&r.push([e.Msg.DELETE_VARIABLE.replace("%1",t),e.DELETE_VARIABLE_ID]),r},e.FieldVariable.prototype.onItemSelected_=function(t,n){if(t=n.getValue(),this.sourceBlock_&&this.sourceBlock_.workspace){if(t==e.RENAME_VARIABLE_ID)return void e.Variables.renameVariable(this.sourceBlock_.workspace,this.variable_);if(t==e.DELETE_VARIABLE_ID)return void this.sourceBlock_.workspace.deleteVariableById(this.variable_.getId())}this.setValue(t)},e.FieldVariable.prototype.referencesVariables=function(){return!0},e.fieldRegistry.register("field_variable",e.FieldVariable),e.utils.svgPaths={},e.utils.svgPaths.point=function(t,n){return" "+t+","+n+" "},e.utils.svgPaths.curve=function(t,n){return" "+t+n.join("")},e.utils.svgPaths.moveTo=function(t,n){return" M "+t+","+n+" "},e.utils.svgPaths.moveBy=function(t,n){return" m "+t+","+n+" "},e.utils.svgPaths.lineTo=function(t,n){return" l "+t+","+n+" "},e.utils.svgPaths.line=function(t){return" l"+t.join("")},e.utils.svgPaths.lineOnAxis=function(t,n){return" "+t+" "+n+" "},e.utils.svgPaths.arc=function(t,n,r,s){return t+" "+r+" "+r+" "+n+s},e.blockRendering.ConstantProvider=function(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.CORNER_RADIUS=8,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=e.utils.svgPaths.moveBy(0,0),this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_TEXT_BASELINE_CENTER=!e.utils.userAgent.IE&&!e.utils.userAgent.EDGE,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2),this.embossFilterId="",this.embossFilter_=null,this.disabledPatternId="",this.disabledPattern_=null,this.debugFilterId="",this.cssNode_=this.debugFilter_=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2}},e.blockRendering.ConstantProvider.prototype.init=function(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()},e.blockRendering.ConstantProvider.prototype.setTheme=function(t){this.blockStyles=Object.create(null);var r,n=t.blockStyles;for(r in n)this.blockStyles[r]=this.validatedBlockStyle_(n[r]);this.setDynamicProperties_(t)},e.blockRendering.ConstantProvider.prototype.setDynamicProperties_=function(t){this.setFontConstants_(t),this.setComponentConstants_(t),this.ADD_START_HATS=null!=t.startHats?t.startHats:this.ADD_START_HATS},e.blockRendering.ConstantProvider.prototype.setFontConstants_=function(t){this.FIELD_TEXT_FONTFAMILY=t.fontStyle&&null!=t.fontStyle.family?t.fontStyle.family:this.FIELD_TEXT_FONTFAMILY,this.FIELD_TEXT_FONTWEIGHT=t.fontStyle&&null!=t.fontStyle.weight?t.fontStyle.weight:this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTSIZE=t.fontStyle&&null!=t.fontStyle.size?t.fontStyle.size:this.FIELD_TEXT_FONTSIZE,t=e.utils.dom.measureFontMetrics("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=t.height,this.FIELD_TEXT_BASELINE=t.baseline},e.blockRendering.ConstantProvider.prototype.setComponentConstants_=function(t){this.CURSOR_COLOUR=t.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=t.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=t.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(t.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY},e.blockRendering.ConstantProvider.prototype.getBlockStyleForColour=function(t){var n="auto_"+t;return this.blockStyles[n]||(this.blockStyles[n]=this.createBlockStyle_(t)),{style:this.blockStyles[n],name:n}},e.blockRendering.ConstantProvider.prototype.getBlockStyle=function(t){return this.blockStyles[t||""]||(t&&0==t.indexOf("auto_")?this.getBlockStyleForColour(t.substring(5)).style:this.createBlockStyle_("#000000"))},e.blockRendering.ConstantProvider.prototype.createBlockStyle_=function(t){return this.validatedBlockStyle_({colourPrimary:t})},e.blockRendering.ConstantProvider.prototype.validatedBlockStyle_=function(t){var n={};return t&&e.utils.object.mixin(n,t),t=e.utils.parseBlockColour(n.colourPrimary||"#000"),n.colourPrimary=t.hex,n.colourSecondary=n.colourSecondary?e.utils.parseBlockColour(n.colourSecondary).hex:this.generateSecondaryColour_(n.colourPrimary),n.colourTertiary=n.colourTertiary?e.utils.parseBlockColour(n.colourTertiary).hex:this.generateTertiaryColour_(n.colourPrimary),n.hat=n.hat||"",n},e.blockRendering.ConstantProvider.prototype.generateSecondaryColour_=function(t){return e.utils.colour.blend("#fff",t,.6)||t},e.blockRendering.ConstantProvider.prototype.generateTertiaryColour_=function(t){return e.utils.colour.blend("#fff",t,.3)||t},e.blockRendering.ConstantProvider.prototype.dispose=function(){this.embossFilter_&&e.utils.dom.removeNode(this.embossFilter_),this.disabledPattern_&&e.utils.dom.removeNode(this.disabledPattern_),this.debugFilter_&&e.utils.dom.removeNode(this.debugFilter_),this.cssNode_=null},e.blockRendering.ConstantProvider.prototype.makeJaggedTeeth=function(){var t=this.JAGGED_TEETH_HEIGHT,n=this.JAGGED_TEETH_WIDTH;return{height:t,width:n,path:e.utils.svgPaths.line([e.utils.svgPaths.point(n,t/4),e.utils.svgPaths.point(2*-n,t/2),e.utils.svgPaths.point(n,t/4)])}},e.blockRendering.ConstantProvider.prototype.makeStartHat=function(){var t=this.START_HAT_HEIGHT,n=this.START_HAT_WIDTH;return{height:t,width:n,path:e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(30,-t),e.utils.svgPaths.point(70,-t),e.utils.svgPaths.point(n,0)])}},e.blockRendering.ConstantProvider.prototype.makePuzzleTab=function(){function t(b){var x=-(b=b?-1:1),B=r/2,Z=B+2.5,ot=B+.5,et=e.utils.svgPaths.point(-n,b*B);return B=e.utils.svgPaths.point(n,b*B),e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(0,b*Z),e.utils.svgPaths.point(-n,x*ot),et])+e.utils.svgPaths.curve("s",[e.utils.svgPaths.point(n,2.5*x),B])}var n=this.TAB_WIDTH,r=this.TAB_HEIGHT,s=t(!0),u=t(!1);return{type:this.SHAPES.PUZZLE,width:n,height:r,pathDown:u,pathUp:s}},e.blockRendering.ConstantProvider.prototype.makeNotch=function(){function t(x){return e.utils.svgPaths.line([e.utils.svgPaths.point(x*s,r),e.utils.svgPaths.point(3*x,0),e.utils.svgPaths.point(x*s,-r)])}var n=this.NOTCH_WIDTH,r=this.NOTCH_HEIGHT,s=(n-3)/2,u=t(1),b=t(-1);return{type:this.SHAPES.NOTCH,width:n,height:r,pathLeft:u,pathRight:b}},e.blockRendering.ConstantProvider.prototype.makeInsideCorners=function(){var t=this.CORNER_RADIUS;return{width:t,height:t,pathTop:e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(-t,t)),pathBottom:e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(t,t))}},e.blockRendering.ConstantProvider.prototype.makeOutsideCorners=function(){var t=this.CORNER_RADIUS,n=e.utils.svgPaths.moveBy(0,t)+e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(t,-t)),r=e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(t,t)),s=e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(-t,-t));return{topLeft:n,topRight:r,bottomRight:e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(-t,t)),bottomLeft:s,rightHeight:t}},e.blockRendering.ConstantProvider.prototype.shapeFor=function(t){switch(t.type){case e.connectionTypes.INPUT_VALUE:case e.connectionTypes.OUTPUT_VALUE:return this.PUZZLE_TAB;case e.connectionTypes.PREVIOUS_STATEMENT:case e.connectionTypes.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}},e.blockRendering.ConstantProvider.prototype.createDom=function(t,n,r){this.injectCSS_(n,r),t=e.utils.dom.createSvgElement(e.utils.Svg.DEFS,{},t),n=e.utils.dom.createSvgElement(e.utils.Svg.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},t),e.utils.dom.createSvgElement(e.utils.Svg.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},n),r=e.utils.dom.createSvgElement(e.utils.Svg.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},n),e.utils.dom.createSvgElement(e.utils.Svg.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},r),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},n),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},n),this.embossFilterId=n.id,this.embossFilter_=n,n=e.utils.dom.createSvgElement(e.utils.Svg.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},t),e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:10,height:10,fill:"#aaa"},n),e.utils.dom.createSvgElement(e.utils.Svg.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},n),this.disabledPatternId=n.id,this.disabledPattern_=n,e.blockRendering.Debug&&(t=e.utils.dom.createSvgElement(e.utils.Svg.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},t),n=e.utils.dom.createSvgElement(e.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},t),e.utils.dom.createSvgElement(e.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),e.utils.dom.createSvgElement(e.utils.Svg.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},t),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},t),this.debugFilterId=t.id,this.debugFilter_=t)},e.blockRendering.ConstantProvider.prototype.injectCSS_=function(t,n){n=this.getCSS_(n),t="blockly-renderer-style-"+t,this.cssNode_=document.getElementById(t);var r=n.join("\n");this.cssNode_?this.cssNode_.firstChild.textContent=r:((n=document.createElement("style")).id=t,t=document.createTextNode(r),n.appendChild(t),document.head.insertBefore(n,document.head.firstChild),this.cssNode_=n)},e.blockRendering.ConstantProvider.prototype.getCSS_=function(t){return[t+" .blocklyText, ",t+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",t+" .blocklyText {","fill: #fff;","}",t+" .blocklyNonEditableText>rect,",t+" .blocklyEditableText>rect {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","fill-opacity: .6;","stroke: none;","}",t+" .blocklyNonEditableText>text,",t+" .blocklyEditableText>text {","fill: #000;","}",t+" .blocklyFlyoutLabelText {","fill: #000;","}",t+" .blocklyText.blocklyBubbleText {","fill: #000;","}",t+" .blocklyEditableText:not(.editing):hover>rect {","stroke: #fff;","stroke-width: 2;","}",t+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","}",t+" .blocklySelected>.blocklyPath {","stroke: #fc3;","stroke-width: 3px;","}",t+" .blocklyHighlightedConnectionPath {","stroke: #fc3;","}",t+" .blocklyReplaceable .blocklyPath {","fill-opacity: .5;","}",t+" .blocklyReplaceable .blocklyPathLight,",t+" .blocklyReplaceable .blocklyPathDark {","display: none;","}",t+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]},e.blockRendering.Types={NONE:0,FIELD:1,HAT:2,ICON:4,SPACER:8,BETWEEN_ROW_SPACER:16,IN_ROW_SPACER:32,EXTERNAL_VALUE_INPUT:64,INPUT:128,INLINE_INPUT:256,STATEMENT_INPUT:512,CONNECTION:1024,PREVIOUS_CONNECTION:2048,NEXT_CONNECTION:4096,OUTPUT_CONNECTION:8192,CORNER:16384,LEFT_SQUARE_CORNER:32768,LEFT_ROUND_CORNER:65536,RIGHT_SQUARE_CORNER:131072,RIGHT_ROUND_CORNER:262144,JAGGED_EDGE:524288,ROW:1048576,TOP_ROW:2097152,BOTTOM_ROW:4194304,INPUT_ROW:8388608},e.blockRendering.Types.LEFT_CORNER=e.blockRendering.Types.LEFT_SQUARE_CORNER|e.blockRendering.Types.LEFT_ROUND_CORNER,e.blockRendering.Types.RIGHT_CORNER=e.blockRendering.Types.RIGHT_SQUARE_CORNER|e.blockRendering.Types.RIGHT_ROUND_CORNER,e.blockRendering.Types.nextTypeValue_=16777216,e.blockRendering.Types.getType=function(t){return Object.prototype.hasOwnProperty.call(e.blockRendering.Types,t)||(e.blockRendering.Types[t]=e.blockRendering.Types.nextTypeValue_,e.blockRendering.Types.nextTypeValue_<<=1),e.blockRendering.Types[t]},e.blockRendering.Types.isField=function(t){return t.type&e.blockRendering.Types.FIELD},e.blockRendering.Types.isHat=function(t){return t.type&e.blockRendering.Types.HAT},e.blockRendering.Types.isIcon=function(t){return t.type&e.blockRendering.Types.ICON},e.blockRendering.Types.isSpacer=function(t){return t.type&e.blockRendering.Types.SPACER},e.blockRendering.Types.isInRowSpacer=function(t){return t.type&e.blockRendering.Types.IN_ROW_SPACER},e.blockRendering.Types.isInput=function(t){return t.type&e.blockRendering.Types.INPUT},e.blockRendering.Types.isExternalInput=function(t){return t.type&e.blockRendering.Types.EXTERNAL_VALUE_INPUT},e.blockRendering.Types.isInlineInput=function(t){return t.type&e.blockRendering.Types.INLINE_INPUT},e.blockRendering.Types.isStatementInput=function(t){return t.type&e.blockRendering.Types.STATEMENT_INPUT},e.blockRendering.Types.isPreviousConnection=function(t){return t.type&e.blockRendering.Types.PREVIOUS_CONNECTION},e.blockRendering.Types.isNextConnection=function(t){return t.type&e.blockRendering.Types.NEXT_CONNECTION},e.blockRendering.Types.isPreviousOrNextConnection=function(t){return t.type&(e.blockRendering.Types.PREVIOUS_CONNECTION|e.blockRendering.Types.NEXT_CONNECTION)},e.blockRendering.Types.isLeftRoundedCorner=function(t){return t.type&e.blockRendering.Types.LEFT_ROUND_CORNER},e.blockRendering.Types.isRightRoundedCorner=function(t){return t.type&e.blockRendering.Types.RIGHT_ROUND_CORNER},e.blockRendering.Types.isLeftSquareCorner=function(t){return t.type&e.blockRendering.Types.LEFT_SQUARE_CORNER},e.blockRendering.Types.isRightSquareCorner=function(t){return t.type&e.blockRendering.Types.RIGHT_SQUARE_CORNER},e.blockRendering.Types.isCorner=function(t){return t.type&e.blockRendering.Types.CORNER},e.blockRendering.Types.isJaggedEdge=function(t){return t.type&e.blockRendering.Types.JAGGED_EDGE},e.blockRendering.Types.isRow=function(t){return t.type&e.blockRendering.Types.ROW},e.blockRendering.Types.isBetweenRowSpacer=function(t){return t.type&e.blockRendering.Types.BETWEEN_ROW_SPACER},e.blockRendering.Types.isTopRow=function(t){return t.type&e.blockRendering.Types.TOP_ROW},e.blockRendering.Types.isBottomRow=function(t){return t.type&e.blockRendering.Types.BOTTOM_ROW},e.blockRendering.Types.isTopOrBottomRow=function(t){return t.type&(e.blockRendering.Types.TOP_ROW|e.blockRendering.Types.BOTTOM_ROW)},e.blockRendering.Types.isInputRow=function(t){return t.type&e.blockRendering.Types.INPUT_ROW},e.blockRendering.Measurable=function(t){this.height=this.width=0,this.type=e.blockRendering.Types.NONE,this.centerline=this.xPos=0,this.constants_=t,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT},e.blockRendering.Connection=function(t,n){e.blockRendering.Connection.superClass_.constructor.call(this,t),this.connectionModel=n,this.shape=this.constants_.shapeFor(n),this.isDynamicShape=!!this.shape.isDynamic,this.type|=e.blockRendering.Types.CONNECTION},e.utils.object.inherits(e.blockRendering.Connection,e.blockRendering.Measurable),e.blockRendering.OutputConnection=function(t,n){e.blockRendering.OutputConnection.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=0},e.utils.object.inherits(e.blockRendering.OutputConnection,e.blockRendering.Connection),e.blockRendering.PreviousConnection=function(t,n){e.blockRendering.PreviousConnection.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},e.utils.object.inherits(e.blockRendering.PreviousConnection,e.blockRendering.Connection),e.blockRendering.NextConnection=function(t,n){e.blockRendering.NextConnection.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},e.utils.object.inherits(e.blockRendering.NextConnection,e.blockRendering.Connection),e.blockRendering.InputConnection=function(t,n){e.blockRendering.InputConnection.superClass_.constructor.call(this,t,n.connection),this.type|=e.blockRendering.Types.INPUT,this.input=n,this.align=n.align,(this.connectedBlock=n.connection&&n.connection.targetBlock()?n.connection.targetBlock():null)?(t=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=t.width,this.connectedBlockHeight=t.height):this.connectedBlockHeight=this.connectedBlockWidth=0,this.connectionOffsetY=this.connectionOffsetX=0},e.utils.object.inherits(e.blockRendering.InputConnection,e.blockRendering.Connection),e.blockRendering.InlineInput=function(t,n){e.blockRendering.InlineInput.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY=this.isDynamicShape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=this.isDynamicShape?this.shape.connectionOffsetX(this.connectionWidth):0},e.utils.object.inherits(e.blockRendering.InlineInput,e.blockRendering.InputConnection),e.blockRendering.StatementInput=function(t,n){e.blockRendering.StatementInput.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width},e.utils.object.inherits(e.blockRendering.StatementInput,e.blockRendering.InputConnection),e.blockRendering.ExternalValueInput=function(t,n){e.blockRendering.ExternalValueInput.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width},e.utils.object.inherits(e.blockRendering.ExternalValueInput,e.blockRendering.InputConnection),e.blockRendering.Icon=function(t,n){e.blockRendering.Icon.superClass_.constructor.call(this,t),this.icon=n,this.isVisible=n.isVisible(),this.type|=e.blockRendering.Types.ICON,t=n.getCorrectedSize(),this.height=t.height,this.width=t.width},e.utils.object.inherits(e.blockRendering.Icon,e.blockRendering.Measurable),e.blockRendering.JaggedEdge=function(t){e.blockRendering.JaggedEdge.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width},e.utils.object.inherits(e.blockRendering.JaggedEdge,e.blockRendering.Measurable),e.blockRendering.Field=function(t,n,r){e.blockRendering.Field.superClass_.constructor.call(this,t),this.field=n,this.isEditable=n.EDITABLE,this.flipRtl=n.getFlipRtl(),this.type|=e.blockRendering.Types.FIELD,t=this.field.getSize(),this.height=t.height,this.width=t.width,this.parentInput=r},e.utils.object.inherits(e.blockRendering.Field,e.blockRendering.Measurable),e.blockRendering.Hat=function(t){e.blockRendering.Hat.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height},e.utils.object.inherits(e.blockRendering.Hat,e.blockRendering.Measurable),e.blockRendering.SquareCorner=function(t,n){e.blockRendering.SquareCorner.superClass_.constructor.call(this,t),this.type=(n&&"left"!=n?e.blockRendering.Types.RIGHT_SQUARE_CORNER:e.blockRendering.Types.LEFT_SQUARE_CORNER)|e.blockRendering.Types.CORNER,this.width=this.height=this.constants_.NO_PADDING},e.utils.object.inherits(e.blockRendering.SquareCorner,e.blockRendering.Measurable),e.blockRendering.RoundCorner=function(t,n){e.blockRendering.RoundCorner.superClass_.constructor.call(this,t),this.type=(n&&"left"!=n?e.blockRendering.Types.RIGHT_ROUND_CORNER:e.blockRendering.Types.LEFT_ROUND_CORNER)|e.blockRendering.Types.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2},e.utils.object.inherits(e.blockRendering.RoundCorner,e.blockRendering.Measurable),e.blockRendering.InRowSpacer=function(t,n){e.blockRendering.InRowSpacer.superClass_.constructor.call(this,t),this.type=this.type|e.blockRendering.Types.SPACER|e.blockRendering.Types.IN_ROW_SPACER,this.width=n,this.height=this.constants_.SPACER_DEFAULT_HEIGHT},e.utils.object.inherits(e.blockRendering.InRowSpacer,e.blockRendering.Measurable),e.blockRendering.Row=function(t){this.type=e.blockRendering.Types.ROW,this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=this.hasStatement=this.hasExternalInput=!1,this.constants_=t,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT,this.align=null},e.blockRendering.Row.prototype.measure=function(){throw Error("Unexpected attempt to measure a base Row.")},e.blockRendering.Row.prototype.getLastInput=function(){for(var n,t=this.elements.length-1;n=this.elements[t];t--)if(e.blockRendering.Types.isInput(n))return n;return null},e.blockRendering.Row.prototype.startsWithElemSpacer=function(){return!0},e.blockRendering.Row.prototype.endsWithElemSpacer=function(){return!0},e.blockRendering.Row.prototype.getFirstSpacer=function(){for(var n,t=0;n=this.elements[t];t++)if(e.blockRendering.Types.isSpacer(n))return n;return null},e.blockRendering.Row.prototype.getLastSpacer=function(){for(var n,t=this.elements.length-1;n=this.elements[t];t--)if(e.blockRendering.Types.isSpacer(n))return n;return null},e.blockRendering.TopRow=function(t){e.blockRendering.TopRow.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.TOP_ROW,this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null},e.utils.object.inherits(e.blockRendering.TopRow,e.blockRendering.Row),e.blockRendering.TopRow.prototype.hasLeftSquareCorner=function(t){var n=(t.hat?"cap"===t.hat:this.constants_.ADD_START_HATS)&&!t.outputConnection&&!t.previousConnection,r=t.getPreviousBlock();return!!t.outputConnection||n||!!r&&r.getNextBlock()==t},e.blockRendering.TopRow.prototype.hasRightSquareCorner=function(t){return!0},e.blockRendering.TopRow.prototype.measure=function(){for(var u,t=0,n=0,r=0,s=0;u=this.elements[s];s++)n+=u.width,e.blockRendering.Types.isSpacer(u)||(e.blockRendering.Types.isHat(u)?r=Math.max(r,u.ascenderHeight):t=Math.max(t,u.height));this.width=Math.max(this.minWidth,n),this.height=Math.max(this.minHeight,t)+r,this.capline=this.ascenderHeight=r,this.widthWithConnectedBlocks=this.width},e.blockRendering.TopRow.prototype.startsWithElemSpacer=function(){return!1},e.blockRendering.TopRow.prototype.endsWithElemSpacer=function(){return!1},e.blockRendering.BottomRow=function(t){e.blockRendering.BottomRow.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.BOTTOM_ROW,this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0},e.utils.object.inherits(e.blockRendering.BottomRow,e.blockRendering.Row),e.blockRendering.BottomRow.prototype.hasLeftSquareCorner=function(t){return!!t.outputConnection||!!t.getNextBlock()},e.blockRendering.BottomRow.prototype.hasRightSquareCorner=function(t){return!0},e.blockRendering.BottomRow.prototype.measure=function(){for(var u,t=0,n=0,r=0,s=0;u=this.elements[s];s++)n+=u.width,e.blockRendering.Types.isSpacer(u)||(e.blockRendering.Types.isNextConnection(u)?r=Math.max(r,u.height):t=Math.max(t,u.height));this.width=Math.max(this.minWidth,n),this.height=Math.max(this.minHeight,t)+r,this.descenderHeight=r,this.widthWithConnectedBlocks=this.width},e.blockRendering.BottomRow.prototype.startsWithElemSpacer=function(){return!1},e.blockRendering.BottomRow.prototype.endsWithElemSpacer=function(){return!1},e.blockRendering.SpacerRow=function(t,n,r){e.blockRendering.SpacerRow.superClass_.constructor.call(this,t),this.type=this.type|e.blockRendering.Types.SPACER|e.blockRendering.Types.BETWEEN_ROW_SPACER,this.width=r,this.height=n,this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.elements=[new e.blockRendering.InRowSpacer(this.constants_,r)]},e.utils.object.inherits(e.blockRendering.SpacerRow,e.blockRendering.Row),e.blockRendering.SpacerRow.prototype.measure=function(){},e.blockRendering.InputRow=function(t){e.blockRendering.InputRow.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.INPUT_ROW,this.connectedBlockWidths=0},e.utils.object.inherits(e.blockRendering.InputRow,e.blockRendering.Row),e.blockRendering.InputRow.prototype.measure=function(){this.width=this.minWidth,this.height=this.minHeight;for(var r,t=0,n=0;r=this.elements[n];n++)this.width+=r.width,e.blockRendering.Types.isInput(r)&&(e.blockRendering.Types.isStatementInput(r)?t+=r.connectedBlockWidth:e.blockRendering.Types.isExternalInput(r)&&0!=r.connectedBlockWidth&&(t+=r.connectedBlockWidth-r.connectionWidth)),e.blockRendering.Types.isSpacer(r)||(this.height=Math.max(this.height,r.height));this.connectedBlockWidths=t,this.widthWithConnectedBlocks=this.width+t},e.blockRendering.InputRow.prototype.endsWithElemSpacer=function(){return!this.hasExternalInput&&!this.hasStatement},e.blockRendering.RenderInfo=function(t,n){this.block_=n,this.renderer_=t,this.constants_=this.renderer_.getConstants(),this.outputConnection=n.outputConnection?new e.blockRendering.OutputConnection(this.constants_,n.outputConnection):null,this.isInline=n.getInputsInline()&&!n.isCollapsed(),this.isCollapsed=n.isCollapsed(),this.isInsertionMarker=n.isInsertionMarker(),this.RTL=n.RTL,this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.hiddenIcons=[],this.topRow=new e.blockRendering.TopRow(this.constants_),this.bottomRow=new e.blockRendering.BottomRow(this.constants_),this.startY=this.startX=0},e.blockRendering.RenderInfo.prototype.getRenderer=function(){return this.renderer_},e.blockRendering.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},e.blockRendering.RenderInfo.prototype.createRows_=function(){this.populateTopRow_(),this.rows.push(this.topRow);var t=new e.blockRendering.InputRow(this.constants_);this.inputRows.push(t);for(var s,n=this.block_.getIcons(),r=0;s=n[r];r++){var u=new e.blockRendering.Icon(this.constants_,s);this.isCollapsed&&s.collapseHidden?this.hiddenIcons.push(u):t.elements.push(u)}for(s=null,r=0;n=this.block_.inputList[r];r++)if(n.isVisible()){for(this.shouldStartNewRow_(n,s)&&(this.rows.push(t),t=new e.blockRendering.InputRow(this.constants_),this.inputRows.push(t)),s=0;u=n.fieldRow[s];s++)t.elements.push(new e.blockRendering.Field(this.constants_,u,n));this.addInput_(n,t),s=n}this.isCollapsed&&(t.hasJaggedEdge=!0,t.elements.push(new e.blockRendering.JaggedEdge(this.constants_))),(t.elements.length||t.hasDummyInput)&&this.rows.push(t),this.populateBottomRow_(),this.rows.push(this.bottomRow)},e.blockRendering.RenderInfo.prototype.populateTopRow_=function(){var t=!!this.block_.previousConnection,n=(this.block_.hat?"cap"===this.block_.hat:this.constants_.ADD_START_HATS)&&!this.outputConnection&&!t,r=this.topRow.hasLeftSquareCorner(this.block_)?e.blockRendering.SquareCorner:e.blockRendering.RoundCorner;this.topRow.elements.push(new r(this.constants_)),n?(t=new e.blockRendering.Hat(this.constants_),this.topRow.elements.push(t),this.topRow.capline=t.ascenderHeight):t&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new e.blockRendering.PreviousConnection(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.topRow.minHeight=this.block_.inputList.length&&this.block_.inputList[0].type==e.inputTypes.STATEMENT&&!this.block_.isCollapsed()?this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.constants_.TOP_ROW_MIN_HEIGHT,r=this.topRow.hasRightSquareCorner(this.block_)?e.blockRendering.SquareCorner:e.blockRendering.RoundCorner,this.topRow.elements.push(new r(this.constants_,"right"))},e.blockRendering.RenderInfo.prototype.populateBottomRow_=function(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==e.inputTypes.STATEMENT?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new e.blockRendering.SquareCorner(this.constants_)):this.bottomRow.elements.push(new e.blockRendering.RoundCorner(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new e.blockRendering.NextConnection(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new e.blockRendering.SquareCorner(this.constants_,"right")):this.bottomRow.elements.push(new e.blockRendering.RoundCorner(this.constants_,"right"))},e.blockRendering.RenderInfo.prototype.addInput_=function(t,n){this.isInline&&t.type==e.inputTypes.VALUE?(n.elements.push(new e.blockRendering.InlineInput(this.constants_,t)),n.hasInlineInput=!0):t.type==e.inputTypes.STATEMENT?(n.elements.push(new e.blockRendering.StatementInput(this.constants_,t)),n.hasStatement=!0):t.type==e.inputTypes.VALUE?(n.elements.push(new e.blockRendering.ExternalValueInput(this.constants_,t)),n.hasExternalInput=!0):t.type==e.inputTypes.DUMMY&&(n.minHeight=Math.max(n.minHeight,t.getSourceBlock()&&t.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),n.hasDummyInput=!0),null==n.align&&(n.align=t.align)},e.blockRendering.RenderInfo.prototype.shouldStartNewRow_=function(t,n){return!(!n||t.type!=e.inputTypes.STATEMENT&&n.type!=e.inputTypes.STATEMENT&&(t.type!=e.inputTypes.VALUE&&t.type!=e.inputTypes.DUMMY||this.isInline))},e.blockRendering.RenderInfo.prototype.addElemSpacing_=function(){for(var n,t=0;n=this.rows[t];t++){var r=n.elements;if(n.elements=[],n.startsWithElemSpacer()&&n.elements.push(new e.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,r[0]))),r.length){for(var s=0;s<r.length-1;s++){n.elements.push(r[s]);var u=this.getInRowSpacing_(r[s],r[s+1]);n.elements.push(new e.blockRendering.InRowSpacer(this.constants_,u))}n.elements.push(r[r.length-1]),n.endsWithElemSpacer()&&n.elements.push(new e.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(r[r.length-1],null)))}}},e.blockRendering.RenderInfo.prototype.getInRowSpacing_=function(t,n){if(!t&&n&&e.blockRendering.Types.isStatementInput(n))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(t&&e.blockRendering.Types.isInput(t)&&!n){if(e.blockRendering.Types.isExternalInput(t))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isInlineInput(t))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(t))return this.constants_.NO_PADDING}return t&&e.blockRendering.Types.isLeftSquareCorner(t)&&n&&(e.blockRendering.Types.isPreviousConnection(n)||e.blockRendering.Types.isNextConnection(n))?n.notchOffset:t&&e.blockRendering.Types.isLeftRoundedCorner(t)&&n&&(e.blockRendering.Types.isPreviousConnection(n)||e.blockRendering.Types.isNextConnection(n))?n.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},e.blockRendering.RenderInfo.prototype.computeBounds_=function(){for(var u,t=0,n=0,r=0,s=0;u=this.rows[s];s++){if(u.measure(),n=Math.max(n,u.width),u.hasStatement){var b=u.getLastInput();t=Math.max(t,u.width-b.width)}r=Math.max(r,u.widthWithConnectedBlocks)}for(this.statementEdge=t,this.width=n,s=0;u=this.rows[s];s++)u.hasStatement&&(u.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(n,r),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)},e.blockRendering.RenderInfo.prototype.alignRowElements_=function(){for(var n,t=0;n=this.rows[t];t++)if(n.hasStatement)this.alignStatementRow_(n);else{var r=n.width;0<(r=this.getDesiredRowWidth_(n)-r)&&this.addAlignmentPadding_(n,r),e.blockRendering.Types.isTopOrBottomRow(n)&&(n.widthWithConnectedBlocks=n.width)}},e.blockRendering.RenderInfo.prototype.getDesiredRowWidth_=function(t){return this.width-this.startX},e.blockRendering.RenderInfo.prototype.addAlignmentPadding_=function(t,n){var r=t.getFirstSpacer(),s=t.getLastSpacer();(t.hasExternalInput||t.hasStatement)&&(t.widthWithConnectedBlocks+=n),t.align==e.constants.ALIGN.LEFT?s.width+=n:t.align==e.constants.ALIGN.CENTRE?(r.width+=n/2,s.width+=n/2):t.align==e.constants.ALIGN.RIGHT?r.width+=n:s.width+=n,t.width+=n},e.blockRendering.RenderInfo.prototype.alignStatementRow_=function(t){var n=t.getLastInput(),r=t.width-n.width,s=this.statementEdge;0<(r=s-r)&&this.addAlignmentPadding_(t,r),r=t.width,s=this.getDesiredRowWidth_(t),n.width+=s-r,n.height=Math.max(n.height,t.height),t.width+=s-r,t.widthWithConnectedBlocks=Math.max(t.width,this.statementEdge+t.connectedBlockWidths)},e.blockRendering.RenderInfo.prototype.addRowSpacing_=function(){var t=this.rows;this.rows=[];for(var n=0;n<t.length;n++)this.rows.push(t[n]),n!=t.length-1&&this.rows.push(this.makeSpacerRow_(t[n],t[n+1]))},e.blockRendering.RenderInfo.prototype.makeSpacerRow_=function(t,n){var r=this.getSpacerRowHeight_(t,n),s=this.getSpacerRowWidth_(t,n);return r=new e.blockRendering.SpacerRow(this.constants_,r,s),t.hasStatement&&(r.followsStatement=!0),n.hasStatement&&(r.precedesStatement=!0),r},e.blockRendering.RenderInfo.prototype.getSpacerRowWidth_=function(t,n){return this.width-this.startX},e.blockRendering.RenderInfo.prototype.getSpacerRowHeight_=function(t,n){return this.constants_.MEDIUM_PADDING},e.blockRendering.RenderInfo.prototype.getElemCenterline_=function(t,n){return e.blockRendering.Types.isSpacer(n)?t.yPos+n.height/2:e.blockRendering.Types.isBottomRow(t)?(t=t.yPos+t.height-t.descenderHeight,e.blockRendering.Types.isNextConnection(n)?t+n.height/2:t-n.height/2):e.blockRendering.Types.isTopRow(t)?e.blockRendering.Types.isHat(n)?t.capline-n.height/2:t.capline+n.height/2:t.yPos+t.height/2},e.blockRendering.RenderInfo.prototype.recordElemPositions_=function(t){for(var s,n=t.xPos,r=0;s=t.elements[r];r++)e.blockRendering.Types.isSpacer(s)&&(s.height=t.height),s.xPos=n,s.centerline=this.getElemCenterline_(t,s),n+=s.width},e.blockRendering.RenderInfo.prototype.finalize_=function(){for(var s,t=0,n=0,r=0;s=this.rows[r];r++)s.yPos=n,s.xPos=this.startX,n+=s.height,t=Math.max(t,s.widthWithConnectedBlocks),this.recordElemPositions_(s);this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(t=Math.max(t,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.widthWithChildren=t+this.startX,this.height=n,this.startY=this.topRow.capline,this.bottomRow.baseline=n-this.bottomRow.descenderHeight},e.blockRendering.Debug=function(t){this.debugElements_=[],this.svgRoot_=null,this.constants_=t},e.blockRendering.Debug.config={rowSpacers:!0,elemSpacers:!0,rows:!0,elems:!0,connections:!0,blockBounds:!0,connectedBlockBounds:!0,render:!0},e.blockRendering.Debug.prototype.clearElems=function(){for(var n,t=0;n=this.debugElements_[t];t++)e.utils.dom.removeNode(n);this.debugElements_=[]},e.blockRendering.Debug.prototype.drawSpacerRow=function(t,n,r){if(e.blockRendering.Debug.config.rowSpacers){var s=Math.abs(t.height),u=0>t.height;u&&(n-=s),this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"rowSpacerRect blockRenderDebug",x:r?-(t.xPos+t.width):t.xPos,y:n,width:t.width,height:s,stroke:u?"black":"blue",fill:"blue","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}},e.blockRendering.Debug.prototype.drawSpacerElem=function(t,n,r){if(e.blockRendering.Debug.config.elemSpacers){n=Math.abs(t.width);var s=0>t.width,u=s?t.xPos-n:t.xPos;r&&(u=-(u+n)),this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"elemSpacerRect blockRenderDebug",x:u,y:t.centerline-t.height/2,width:n,height:t.height,stroke:"pink",fill:s?"black":"pink","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}},e.blockRendering.Debug.prototype.drawRenderedElem=function(t,n){if(e.blockRendering.Debug.config.elems){var r=t.xPos;n&&(r=-(r+t.width)),this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"rowRenderingRect blockRenderDebug",x:r,y:n=t.centerline-t.height/2,width:t.width,height:t.height,stroke:"black",fill:"none","stroke-width":"1px"},this.svgRoot_)),e.blockRendering.Types.isField(t)&&t.field instanceof e.FieldLabel&&this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"rowRenderingRect blockRenderDebug",x:r,y:n+this.constants_.FIELD_TEXT_BASELINE,width:t.width,height:"0.1px",stroke:"red",fill:"none","stroke-width":"0.5px"},this.svgRoot_))}e.blockRendering.Types.isInput(t)&&e.blockRendering.Debug.config.connections&&this.drawConnection(t.connectionModel)},e.blockRendering.Debug.prototype.drawConnection=function(t){if(e.blockRendering.Debug.config.connections){if(t.type==e.connectionTypes.INPUT_VALUE)var n=4,r="magenta",s="none";else t.type==e.connectionTypes.OUTPUT_VALUE?(n=2,s=r="magenta"):t.type==e.connectionTypes.NEXT_STATEMENT?(n=4,r="goldenrod",s="none"):t.type==e.connectionTypes.PREVIOUS_STATEMENT&&(n=2,s=r="goldenrod");this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{class:"blockRenderDebug",cx:t.offsetInBlock_.x,cy:t.offsetInBlock_.y,r:n,fill:s,stroke:r},this.svgRoot_))}},e.blockRendering.Debug.prototype.drawRenderedRow=function(t,n,r){e.blockRendering.Debug.config.rows&&(this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"elemRenderingRect blockRenderDebug",x:r?-(t.xPos+t.width):t.xPos,y:t.yPos,width:t.width,height:t.height,stroke:"red",fill:"none","stroke-width":"1px"},this.svgRoot_)),e.blockRendering.Types.isTopOrBottomRow(t)||e.blockRendering.Debug.config.connectedBlockBounds&&this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"connectedBlockWidth blockRenderDebug",x:r?-(t.xPos+t.widthWithConnectedBlocks):t.xPos,y:t.yPos,width:t.widthWithConnectedBlocks,height:t.height,stroke:this.randomColour_,fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_)))},e.blockRendering.Debug.prototype.drawRowWithElements=function(t,n,r){for(var s=0,u=t.elements.length;s<u;s++){var b=t.elements[s];b?e.blockRendering.Types.isSpacer(b)?this.drawSpacerElem(b,t.height,r):this.drawRenderedElem(b,r):console.warn("A row has an undefined or null element.",t,b)}this.drawRenderedRow(t,n,r)},e.blockRendering.Debug.prototype.drawBoundingBox=function(t){if(e.blockRendering.Debug.config.blockBounds){var n=t.RTL?-t.width:0;this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blockBoundingBox blockRenderDebug",x:n,y:0,width:t.width,height:t.height,stroke:"black",fill:"none","stroke-width":"1px","stroke-dasharray":"5,5"},this.svgRoot_)),e.blockRendering.Debug.config.connectedBlockBounds&&this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blockRenderDebug",x:n=t.RTL?-t.widthWithChildren:0,y:0,width:t.widthWithChildren,height:t.height,stroke:"#DF57BC",fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_))}},e.blockRendering.Debug.prototype.drawDebug=function(t,n){this.clearElems(),this.svgRoot_=t.getSvgRoot(),this.randomColour_="#"+Math.floor(16777215*Math.random()).toString(16);for(var u,r=0,s=0;u=n.rows[s];s++)e.blockRendering.Types.isBetweenRowSpacer(u)?this.drawSpacerRow(u,r,n.RTL):this.drawRowWithElements(u,r,n.RTL),r+=u.height;t.previousConnection&&this.drawConnection(t.previousConnection),t.nextConnection&&this.drawConnection(t.nextConnection),t.outputConnection&&this.drawConnection(t.outputConnection),n.rightSide&&this.drawRenderedElem(n.rightSide,n.RTL),this.drawBoundingBox(n),this.drawRender(t.pathObject.svgPath)},e.blockRendering.Debug.prototype.drawRender=function(t){e.blockRendering.Debug.config.render&&(t.setAttribute("filter","url(#"+this.constants_.debugFilterId+")"),setTimeout(function(){t.setAttribute("filter","")},100))},e.blockRendering.Drawer=function(t,n){this.block_=t,this.info_=n,this.topLeft_=t.getRelativeToSurfaceXY(),this.inlinePath_=this.outlinePath_="",this.constants_=n.getRenderer().getConstants()},e.blockRendering.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),this.block_.pathObject.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),e.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},e.blockRendering.Drawer.prototype.recordSizeOnBlock_=function(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren},e.blockRendering.Drawer.prototype.hideHiddenIcons_=function(){for(var n,t=0;n=this.info_.hiddenIcons[t];t++)n.icon.iconGroup_.setAttribute("display","none")},e.blockRendering.Drawer.prototype.drawOutline_=function(){this.drawTop_();for(var t=1;t<this.info_.rows.length-1;t++){var n=this.info_.rows[t];n.hasJaggedEdge?this.drawJaggedEdge_(n):n.hasStatement?this.drawStatementInput_(n):n.hasExternalInput?this.drawValueInput_(n):this.drawRightSideRow_(n)}this.drawBottom_(),this.drawLeft_()},e.blockRendering.Drawer.prototype.drawTop_=function(){var t=this.info_.topRow,n=t.elements;this.positionPreviousConnection_(),this.outlinePath_+=e.utils.svgPaths.moveBy(t.xPos,this.info_.startY);for(var s,r=0;s=n[r];r++)e.blockRendering.Types.isLeftRoundedCorner(s)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:e.blockRendering.Types.isRightRoundedCorner(s)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:e.blockRendering.Types.isPreviousConnection(s)?this.outlinePath_+=s.shape.pathLeft:e.blockRendering.Types.isHat(s)?this.outlinePath_+=this.constants_.START_HAT.path:e.blockRendering.Types.isSpacer(s)&&(this.outlinePath_+=e.utils.svgPaths.lineOnAxis("h",s.width));this.outlinePath_+=e.utils.svgPaths.lineOnAxis("v",t.height)},e.blockRendering.Drawer.prototype.drawJaggedEdge_=function(t){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+e.utils.svgPaths.lineOnAxis("v",t.height-this.constants_.JAGGED_TEETH.height)},e.blockRendering.Drawer.prototype.drawValueInput_=function(t){var n=t.getLastInput();this.positionExternalValueConnection_(t);var r="function"==typeof n.shape.pathDown?n.shape.pathDown(n.height):n.shape.pathDown;this.outlinePath_+=e.utils.svgPaths.lineOnAxis("H",n.xPos+n.width)+r+e.utils.svgPaths.lineOnAxis("v",t.height-n.connectionHeight)},e.blockRendering.Drawer.prototype.drawStatementInput_=function(t){var n=t.getLastInput(),r=n.xPos+n.notchOffset+n.shape.width;n=n.shape.pathRight+e.utils.svgPaths.lineOnAxis("h",-(n.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var s=t.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=e.utils.svgPaths.lineOnAxis("H",r)+n+e.utils.svgPaths.lineOnAxis("v",s)+this.constants_.INSIDE_CORNERS.pathBottom+e.utils.svgPaths.lineOnAxis("H",t.xPos+t.width),this.positionStatementInputConnection_(t)},e.blockRendering.Drawer.prototype.drawRightSideRow_=function(t){this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",t.yPos+t.height)},e.blockRendering.Drawer.prototype.drawBottom_=function(){var t=this.info_.bottomRow,n=t.elements;this.positionNextConnection_();for(var b,r=0,s="",u=n.length-1;b=n[u];u--)e.blockRendering.Types.isNextConnection(b)?s+=b.shape.pathRight:e.blockRendering.Types.isLeftSquareCorner(b)?s+=e.utils.svgPaths.lineOnAxis("H",t.xPos):e.blockRendering.Types.isLeftRoundedCorner(b)?s+=this.constants_.OUTSIDE_CORNERS.bottomLeft:e.blockRendering.Types.isRightRoundedCorner(b)?(s+=this.constants_.OUTSIDE_CORNERS.bottomRight,r=this.constants_.OUTSIDE_CORNERS.rightHeight):e.blockRendering.Types.isSpacer(b)&&(s+=e.utils.svgPaths.lineOnAxis("h",-1*b.width));this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",t.baseline-r),this.outlinePath_+=s},e.blockRendering.Drawer.prototype.drawLeft_=function(){var t=this.info_.outputConnection;if(this.positionOutputConnection_(),t){var n=t.connectionOffsetY+t.height;t="function"==typeof t.shape.pathUp?t.shape.pathUp(t.height):t.shape.pathUp,this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",n)+t}this.outlinePath_+="z"},e.blockRendering.Drawer.prototype.drawInternals_=function(){for(var n,t=0;n=this.info_.rows[t];t++)for(var s,r=0;s=n.elements[r];r++)e.blockRendering.Types.isInlineInput(s)?this.drawInlineInput_(s):(e.blockRendering.Types.isIcon(s)||e.blockRendering.Types.isField(s))&&this.layoutField_(s)},e.blockRendering.Drawer.prototype.layoutField_=function(t){if(e.blockRendering.Types.isField(t))var n=t.field.getSvgRoot();else e.blockRendering.Types.isIcon(t)&&(n=t.icon.iconGroup_);var r=t.centerline-t.height/2,s=t.xPos,u="";this.info_.RTL&&(s=-(s+t.width),t.flipRtl&&(s+=t.width,u="scale(-1 1)")),e.blockRendering.Types.isIcon(t)?(n.setAttribute("display","block"),n.setAttribute("transform","translate("+s+","+r+")"),t.icon.computeIconLocation()):n.setAttribute("transform","translate("+s+","+r+")"+u),this.info_.isInsertionMarker&&n.setAttribute("display","none")},e.blockRendering.Drawer.prototype.drawInlineInput_=function(t){var n=t.width,r=t.height,s=t.connectionOffsetY,u=t.connectionHeight+s;this.inlinePath_+=e.utils.svgPaths.moveTo(t.xPos+t.connectionWidth,t.centerline-r/2)+e.utils.svgPaths.lineOnAxis("v",s)+t.shape.pathDown+e.utils.svgPaths.lineOnAxis("v",r-u)+e.utils.svgPaths.lineOnAxis("h",n-t.connectionWidth)+e.utils.svgPaths.lineOnAxis("v",-r)+"z",this.positionInlineInputConnection_(t)},e.blockRendering.Drawer.prototype.positionInlineInputConnection_=function(t){if(t.connectionModel){var r=t.xPos+t.connectionWidth+t.connectionOffsetX;this.info_.RTL&&(r*=-1),t.connectionModel.setOffsetInBlock(r,t.centerline-t.height/2+t.connectionOffsetY)}},e.blockRendering.Drawer.prototype.positionStatementInputConnection_=function(t){var n=t.getLastInput();if(n.connectionModel){var r=t.xPos+t.statementEdge+n.notchOffset;this.info_.RTL&&(r*=-1),n.connectionModel.setOffsetInBlock(r,t.yPos)}},e.blockRendering.Drawer.prototype.positionExternalValueConnection_=function(t){var n=t.getLastInput();if(n.connectionModel){var r=t.xPos+t.width;this.info_.RTL&&(r*=-1),n.connectionModel.setOffsetInBlock(r,t.yPos)}},e.blockRendering.Drawer.prototype.positionPreviousConnection_=function(){var t=this.info_.topRow;if(t.connection){var n=t.xPos+t.notchOffset;t.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-n:n,0)}},e.blockRendering.Drawer.prototype.positionNextConnection_=function(){var t=this.info_.bottomRow;if(t.connection){var n=t.connection,r=n.xPos;n.connectionModel.setOffsetInBlock(this.info_.RTL?-r:r,t.baseline)}},e.blockRendering.Drawer.prototype.positionOutputConnection_=function(){if(this.info_.outputConnection){var t=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-t:t,this.info_.outputConnection.connectionOffsetY)}},e.Events.MarkerMove=function(t,n,r,s){var u=t?t.workspace.id:void 0;s&&s.getType()==e.ASTNode.types.WORKSPACE&&(u=s.getLocation().id),e.Events.MarkerMove.superClass_.constructor.call(this,u),this.blockId=t?t.id:null,this.oldNode=r,this.newNode=s,this.isCursor=n},e.utils.object.inherits(e.Events.MarkerMove,e.Events.UiBase),e.Events.MarkerMove.prototype.type=e.Events.MARKER_MOVE,e.Events.MarkerMove.prototype.toJson=function(){var t=e.Events.MarkerMove.superClass_.toJson.call(this);return t.isCursor=this.isCursor,t.blockId=this.blockId,t.oldNode=this.oldNode,t.newNode=this.newNode,t},e.Events.MarkerMove.prototype.fromJson=function(t){e.Events.MarkerMove.superClass_.fromJson.call(this,t),this.isCursor=t.isCursor,this.blockId=t.blockId,this.oldNode=t.oldNode,this.newNode=t.newNode},e.registry.register(e.registry.Type.EVENT,e.Events.MARKER_MOVE,e.Events.MarkerMove),e.blockRendering.MarkerSvg=function(t,n,r){this.workspace_=t,this.marker_=r,this.parent_=null,this.constants_=n,this.currentMarkerSvg=null,t=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=r.colour||t},e.blockRendering.MarkerSvg.CURSOR_CLASS="blocklyCursor",e.blockRendering.MarkerSvg.MARKER_CLASS="blocklyMarker",e.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER=.75,e.blockRendering.MarkerSvg.prototype.getSvgRoot=function(){return this.svgGroup_},e.blockRendering.MarkerSvg.prototype.getMarker=function(){return this.marker_},e.blockRendering.MarkerSvg.prototype.isCursor=function(){return"cursor"==this.marker_.type},e.blockRendering.MarkerSvg.prototype.createDom=function(){var t=this.isCursor()?e.blockRendering.MarkerSvg.CURSOR_CLASS:e.blockRendering.MarkerSvg.MARKER_CLASS;return this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:t},null),this.createDomInternal_(),this.svgGroup_},e.blockRendering.MarkerSvg.prototype.setParent_=function(t){this.isCursor()?(this.parent_&&this.parent_.setCursorSvg(null),t.setCursorSvg(this.getSvgRoot())):(this.parent_&&this.parent_.setMarkerSvg(null),t.setMarkerSvg(this.getSvgRoot())),this.parent_=t},e.blockRendering.MarkerSvg.prototype.draw=function(t,n){if(n){this.constants_=this.workspace_.getRenderer().getConstants();var r=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker_.colour||r,this.applyColour_(n),this.showAtLocation_(n),this.fireMarkerEvent_(t,n),void 0!==(t=this.currentMarkerSvg.childNodes[0])&&t.beginElement&&t.beginElement()}else this.hide()},e.blockRendering.MarkerSvg.prototype.showAtLocation_=function(t){var n=t.getLocation().type;t.getType()==e.ASTNode.types.BLOCK?this.showWithBlock_(t):t.getType()==e.ASTNode.types.OUTPUT?this.showWithOutput_(t):n==e.connectionTypes.INPUT_VALUE?this.showWithInput_(t):n==e.connectionTypes.NEXT_STATEMENT?this.showWithNext_(t):t.getType()==e.ASTNode.types.PREVIOUS?this.showWithPrevious_(t):t.getType()==e.ASTNode.types.FIELD?this.showWithField_(t):t.getType()==e.ASTNode.types.WORKSPACE?this.showWithCoordinates_(t):t.getType()==e.ASTNode.types.STACK&&this.showWithStack_(t)},e.blockRendering.MarkerSvg.prototype.showWithBlockPrevOutput_=function(t){var n=(t=t.getSourceBlock()).width,r=t.height,s=r*e.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER,u=this.constants_.CURSOR_BLOCK_PADDING;if(t.previousConnection){var b=this.constants_.shapeFor(t.previousConnection);this.positionPrevious_(n,u,s,b)}else t.outputConnection?(b=this.constants_.shapeFor(t.outputConnection),this.positionOutput_(n,r,b)):this.positionBlock_(n,u,s);this.setParent_(t),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithBlock_=function(t){this.showWithBlockPrevOutput_(t)},e.blockRendering.MarkerSvg.prototype.showWithPrevious_=function(t){this.showWithBlockPrevOutput_(t)},e.blockRendering.MarkerSvg.prototype.showWithOutput_=function(t){this.showWithBlockPrevOutput_(t)},e.blockRendering.MarkerSvg.prototype.showWithCoordinates_=function(t){var n=t.getWsCoordinate();t=n.x,this.workspace_.RTL&&(t-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(t,n=n.y,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace_),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithField_=function(t){var n=(t=t.getLocation()).getSize().width,r=t.getSize().height;this.positionRect_(0,0,n,r),this.setParent_(t),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithInput_=function(t){var n=(t=t.getLocation()).getSourceBlock();this.positionInput_(t),this.setParent_(n),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithNext_=function(t){var n=t.getLocation();t=n.getSourceBlock();var r=0;n=n.getOffsetInBlock().y;var s=t.getHeightWidth().width;this.workspace_.RTL&&(r=-s),this.positionLine_(r,n,s),this.setParent_(t),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithStack_=function(t){var n=(t=t.getLocation()).getHeightWidth(),r=n.width+this.constants_.CURSOR_STACK_PADDING,s=-this.constants_.CURSOR_STACK_PADDING/2,b=s;this.workspace_.RTL&&(b=-(r+s)),this.positionRect_(b,-this.constants_.CURSOR_STACK_PADDING/2,r,n=n.height+this.constants_.CURSOR_STACK_PADDING),this.setParent_(t),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showCurrent_=function(){this.hide(),this.currentMarkerSvg.style.display=""},e.blockRendering.MarkerSvg.prototype.positionBlock_=function(t,n,r){t=e.utils.svgPaths.moveBy(-n,r)+e.utils.svgPaths.lineOnAxis("V",-n)+e.utils.svgPaths.lineOnAxis("H",t+2*n)+e.utils.svgPaths.lineOnAxis("V",r),this.markerBlock_.setAttribute("d",t),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},e.blockRendering.MarkerSvg.prototype.positionInput_=function(t){var n=t.getOffsetInBlock().x,r=t.getOffsetInBlock().y;t=e.utils.svgPaths.moveTo(0,0)+this.constants_.shapeFor(t).pathDown,this.markerInput_.setAttribute("d",t),this.markerInput_.setAttribute("transform","translate("+n+","+r+")"+(this.workspace_.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_},e.blockRendering.MarkerSvg.prototype.positionLine_=function(t,n,r){this.markerSvgLine_.setAttribute("x",t),this.markerSvgLine_.setAttribute("y",n),this.markerSvgLine_.setAttribute("width",r),this.currentMarkerSvg=this.markerSvgLine_},e.blockRendering.MarkerSvg.prototype.positionOutput_=function(t,n,r){t=e.utils.svgPaths.moveBy(t,0)+e.utils.svgPaths.lineOnAxis("h",-(t-r.width))+e.utils.svgPaths.lineOnAxis("v",this.constants_.TAB_OFFSET_FROM_TOP)+r.pathDown+e.utils.svgPaths.lineOnAxis("V",n)+e.utils.svgPaths.lineOnAxis("H",t),this.markerBlock_.setAttribute("d",t),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},e.blockRendering.MarkerSvg.prototype.positionPrevious_=function(t,n,r,s){t=e.utils.svgPaths.moveBy(-n,r)+e.utils.svgPaths.lineOnAxis("V",-n)+e.utils.svgPaths.lineOnAxis("H",this.constants_.NOTCH_OFFSET_LEFT)+s.pathLeft+e.utils.svgPaths.lineOnAxis("H",t+2*n)+e.utils.svgPaths.lineOnAxis("V",r),this.markerBlock_.setAttribute("d",t),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},e.blockRendering.MarkerSvg.prototype.positionRect_=function(t,n,r,s){this.markerSvgRect_.setAttribute("x",t),this.markerSvgRect_.setAttribute("y",n),this.markerSvgRect_.setAttribute("width",r),this.markerSvgRect_.setAttribute("height",s),this.currentMarkerSvg=this.markerSvgRect_},e.blockRendering.MarkerSvg.prototype.flipRtl_=function(t){t.setAttribute("transform","scale(-1 1)")},e.blockRendering.MarkerSvg.prototype.hide=function(){this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"},e.blockRendering.MarkerSvg.prototype.fireMarkerEvent_=function(t,n){var r=n.getSourceBlock();t=new(e.Events.get(e.Events.MARKER_MOVE))(r,this.isCursor(),t,n),e.Events.fire(t)},e.blockRendering.MarkerSvg.prototype.getBlinkProperties_=function(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}},e.blockRendering.MarkerSvg.prototype.createDomInternal_=function(){if(this.markerSvg_=e.utils.dom.createSvgElement(e.utils.Svg.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT,style:"display: none"},this.markerSvg_),this.markerSvgRect_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10,style:"display: none"},this.markerSvg_),this.markerInput_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{transform:"",style:"display: none"},this.markerSvg_),this.markerBlock_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{transform:"",style:"display: none",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var t=this.getBlinkProperties_();e.utils.dom.createSvgElement(e.utils.Svg.ANIMATE,t,this.markerSvgLine_),e.utils.dom.createSvgElement(e.utils.Svg.ANIMATE,t,this.markerInput_),t.attributeName="stroke",e.utils.dom.createSvgElement(e.utils.Svg.ANIMATE,t,this.markerBlock_)}return this.markerSvg_},e.blockRendering.MarkerSvg.prototype.applyColour_=function(t){this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(this.markerSvgLine_.firstChild.setAttribute("values",t=this.colour_+";transparent;transparent;"),this.markerInput_.firstChild.setAttribute("values",t),this.markerBlock_.firstChild.setAttribute("values",t))},e.blockRendering.MarkerSvg.prototype.dispose=function(){this.svgGroup_&&e.utils.dom.removeNode(this.svgGroup_)},e.blockRendering.PathObject=function(t,n,r){this.constants=r,this.svgRoot=t,this.svgPath=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.style=n,this.markerSvg=this.cursorSvg=null},e.blockRendering.PathObject.prototype.setPath=function(t){this.svgPath.setAttribute("d",t)},e.blockRendering.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)")},e.blockRendering.PathObject.prototype.setCursorSvg=function(t){t?(this.svgRoot.appendChild(t),this.cursorSvg=t):this.cursorSvg=null},e.blockRendering.PathObject.prototype.setMarkerSvg=function(t){t?(this.cursorSvg?this.svgRoot.insertBefore(t,this.cursorSvg):this.svgRoot.appendChild(t),this.markerSvg=t):this.markerSvg=null},e.blockRendering.PathObject.prototype.applyColour=function(t){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(t.isShadow()),this.updateDisabled_(!t.isEnabled()||t.getInheritedDisabled())},e.blockRendering.PathObject.prototype.setStyle=function(t){this.style=t},e.blockRendering.PathObject.prototype.setClass_=function(t,n){n?e.utils.dom.addClass(this.svgRoot,t):e.utils.dom.removeClass(this.svgRoot,t)},e.blockRendering.PathObject.prototype.updateHighlighted=function(t){this.svgPath.setAttribute("filter",t?"url(#"+this.constants.embossFilterId+")":"none")},e.blockRendering.PathObject.prototype.updateShadow_=function(t){t&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},e.blockRendering.PathObject.prototype.updateDisabled_=function(t){this.setClass_("blocklyDisabled",t),t&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")},e.blockRendering.PathObject.prototype.updateSelected=function(t){this.setClass_("blocklySelected",t)},e.blockRendering.PathObject.prototype.updateDraggingDelete=function(t){this.setClass_("blocklyDraggingDelete",t)},e.blockRendering.PathObject.prototype.updateInsertionMarker=function(t){this.setClass_("blocklyInsertionMarker",t)},e.blockRendering.PathObject.prototype.updateMovable=function(t){this.setClass_("blocklyDraggable",t)},e.blockRendering.PathObject.prototype.updateReplacementFade=function(t){this.setClass_("blocklyReplaceable",t)},e.blockRendering.PathObject.prototype.updateShapeForInputHighlight=function(t,n){},e.blockRendering.Renderer=function(t){this.name=t,this.overrides=this.constants_=null},e.blockRendering.Renderer.prototype.getClassName=function(){return this.name+"-renderer"},e.blockRendering.Renderer.prototype.init=function(t,n){this.constants_=this.makeConstants_(),n&&(this.overrides=n,e.utils.object.mixin(this.constants_,n)),this.constants_.setTheme(t),this.constants_.init()},e.blockRendering.Renderer.prototype.createDom=function(t,n){this.constants_.createDom(t,this.name+"-"+n.name,"."+this.getClassName()+"."+n.getClassName())},e.blockRendering.Renderer.prototype.refreshDom=function(t,n){var r=this.getConstants();r.dispose(),this.constants_=this.makeConstants_(),this.overrides&&e.utils.object.mixin(this.constants_,this.overrides),this.constants_.randomIdentifier=r.randomIdentifier,this.constants_.setTheme(n),this.constants_.init(),this.createDom(t,n)},e.blockRendering.Renderer.prototype.dispose=function(){this.constants_&&this.constants_.dispose()},e.blockRendering.Renderer.prototype.makeConstants_=function(){return new e.blockRendering.ConstantProvider},e.blockRendering.Renderer.prototype.makeRenderInfo_=function(t){return new e.blockRendering.RenderInfo(this,t)},e.blockRendering.Renderer.prototype.makeDrawer_=function(t,n){return new e.blockRendering.Drawer(t,n)},e.blockRendering.Renderer.prototype.makeDebugger_=function(){if(!e.blockRendering.Debug)throw Error("Missing require for Blockly.blockRendering.Debug");return new e.blockRendering.Debug(this.getConstants())},e.blockRendering.Renderer.prototype.makeMarkerDrawer=function(t,n){return new e.blockRendering.MarkerSvg(t,this.getConstants(),n)},e.blockRendering.Renderer.prototype.makePathObject=function(t,n){return new e.blockRendering.PathObject(t,n,this.constants_)},e.blockRendering.Renderer.prototype.getConstants=function(){return this.constants_},e.blockRendering.Renderer.prototype.shouldHighlightConnection=function(t){return!0},e.blockRendering.Renderer.prototype.orphanCanConnectAtEnd=function(t,n,r){return!!e.Connection.getConnectionForOrphanedConnection(t,r===e.connectionTypes.OUTPUT_VALUE?n.outputConnection:n.previousConnection)},e.blockRendering.Renderer.prototype.getConnectionPreviewMethod=function(t,n,r){return n.type==e.connectionTypes.OUTPUT_VALUE||n.type==e.connectionTypes.PREVIOUS_STATEMENT?!t.isConnected()||this.orphanCanConnectAtEnd(r,t.targetBlock(),n.type)?e.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:e.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:e.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER},e.blockRendering.Renderer.prototype.render=function(t){e.blockRendering.useDebugger&&!t.renderingDebugger&&(t.renderingDebugger=this.makeDebugger_());var n=this.makeRenderInfo_(t);n.measure(),this.makeDrawer_(t,n).draw()},e.geras={},e.geras.ConstantProvider=function(){e.geras.ConstantProvider.superClass_.constructor.call(this),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2},e.utils.object.inherits(e.geras.ConstantProvider,e.blockRendering.ConstantProvider),e.geras.ConstantProvider.prototype.getCSS_=function(t){return e.geras.ConstantProvider.superClass_.getCSS_.call(this,t).concat([t+" .blocklyInsertionMarker>.blocklyPathLight,",t+" .blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"])},e.geras.Highlighter=function(t){this.info_=t,this.inlineSteps_=this.steps_="",this.RTL_=this.info_.RTL,t=t.getRenderer(),this.constants_=t.getConstants(),this.highlightConstants_=t.getHighlightConstants(),this.highlightOffset_=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH},e.geras.Highlighter.prototype.getPath=function(){return this.steps_+"\n"+this.inlineSteps_},e.geras.Highlighter.prototype.drawTopCorner=function(t){this.steps_+=e.utils.svgPaths.moveBy(t.xPos,this.info_.startY);for(var r,n=0;r=t.elements[n];n++)e.blockRendering.Types.isLeftSquareCorner(r)?this.steps_+=this.highlightConstants_.START_POINT:e.blockRendering.Types.isLeftRoundedCorner(r)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):e.blockRendering.Types.isPreviousConnection(r)?this.steps_+=this.notchPaths_.pathLeft:e.blockRendering.Types.isHat(r)?this.steps_+=this.startPaths_.path(this.RTL_):e.blockRendering.Types.isSpacer(r)&&0!=r.width&&(this.steps_+=e.utils.svgPaths.lineOnAxis("H",r.xPos+r.width-this.highlightOffset_));this.steps_+=e.utils.svgPaths.lineOnAxis("H",t.xPos+t.width-this.highlightOffset_)},e.geras.Highlighter.prototype.drawJaggedEdge_=function(t){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+e.utils.svgPaths.lineOnAxis("v",t.height-this.jaggedTeethPaths_.height-this.highlightOffset_))},e.geras.Highlighter.prototype.drawValueInput=function(t){var n=t.getLastInput();if(this.RTL_){var r=t.height-n.connectionHeight;this.steps_+=e.utils.svgPaths.moveTo(n.xPos+n.width-this.highlightOffset_,t.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+e.utils.svgPaths.lineOnAxis("v",r)}else this.steps_+=e.utils.svgPaths.moveTo(n.xPos+n.width,t.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)},e.geras.Highlighter.prototype.drawStatementInput=function(t){var n=t.getLastInput();if(this.RTL_){var r=t.height-2*this.insideCornerPaths_.height;this.steps_+=e.utils.svgPaths.moveTo(n.xPos,t.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+e.utils.svgPaths.lineOnAxis("v",r)+this.insideCornerPaths_.pathBottom(this.RTL_)+e.utils.svgPaths.lineTo(t.width-n.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=e.utils.svgPaths.moveTo(n.xPos,t.yPos+t.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+e.utils.svgPaths.lineTo(t.width-n.xPos-this.insideCornerPaths_.width,0)},e.geras.Highlighter.prototype.drawRightSideRow=function(t){var n=t.xPos+t.width-this.highlightOffset_;t.followsStatement&&(this.steps_+=e.utils.svgPaths.lineOnAxis("H",n)),this.RTL_&&(this.steps_+=e.utils.svgPaths.lineOnAxis("H",n),t.height>this.highlightOffset_&&(this.steps_+=e.utils.svgPaths.lineOnAxis("V",t.yPos+t.height-this.highlightOffset_)))},e.geras.Highlighter.prototype.drawBottomRow=function(t){if(this.RTL_)this.steps_+=e.utils.svgPaths.lineOnAxis("V",t.baseline-this.highlightOffset_);else{var n=this.info_.bottomRow.elements[0];e.blockRendering.Types.isLeftSquareCorner(n)?this.steps_+=e.utils.svgPaths.moveTo(t.xPos+this.highlightOffset_,t.baseline-this.highlightOffset_):e.blockRendering.Types.isLeftRoundedCorner(n)&&(this.steps_+=e.utils.svgPaths.moveTo(t.xPos,t.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}},e.geras.Highlighter.prototype.drawLeft=function(){var t=this.info_.outputConnection;t&&(t=t.connectionOffsetY+t.height,this.RTL_?this.steps_+=e.utils.svgPaths.moveTo(this.info_.startX,t):(this.steps_+=e.utils.svgPaths.moveTo(this.info_.startX+this.highlightOffset_,this.info_.bottomRow.baseline-this.highlightOffset_),this.steps_+=e.utils.svgPaths.lineOnAxis("V",t)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(e.blockRendering.Types.isLeftRoundedCorner((t=this.info_.topRow).elements[0])?this.steps_+=e.utils.svgPaths.lineOnAxis("V",this.outsideCornerPaths_.height):this.steps_+=e.utils.svgPaths.lineOnAxis("V",t.capline+this.highlightOffset_))},e.geras.Highlighter.prototype.drawInlineInput=function(t){var n=this.highlightOffset_,r=t.xPos+t.connectionWidth,s=t.centerline-t.height/2,u=t.width-t.connectionWidth,b=s+n;this.RTL_?(s=t.connectionOffsetY-n,t=t.height-(t.connectionOffsetY+t.connectionHeight)+n,this.inlineSteps_+=e.utils.svgPaths.moveTo(r-n,b)+e.utils.svgPaths.lineOnAxis("v",s)+this.puzzleTabPaths_.pathDown(this.RTL_)+e.utils.svgPaths.lineOnAxis("v",t)+e.utils.svgPaths.lineOnAxis("h",u)):this.inlineSteps_+=e.utils.svgPaths.moveTo(t.xPos+t.width+n,b)+e.utils.svgPaths.lineOnAxis("v",t.height)+e.utils.svgPaths.lineOnAxis("h",-u)+e.utils.svgPaths.moveTo(r,s+t.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)},e.geras.InlineInput=function(t,n){e.geras.InlineInput.superClass_.constructor.call(this,t,n),this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)},e.utils.object.inherits(e.geras.InlineInput,e.blockRendering.InlineInput),e.geras.StatementInput=function(t,n){e.geras.StatementInput.superClass_.constructor.call(this,t,n),this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)},e.utils.object.inherits(e.geras.StatementInput,e.blockRendering.StatementInput),e.geras.RenderInfo=function(t,n){e.geras.RenderInfo.superClass_.constructor.call(this,t,n)},e.utils.object.inherits(e.geras.RenderInfo,e.blockRendering.RenderInfo),e.geras.RenderInfo.prototype.getRenderer=function(){return this.renderer_},e.geras.RenderInfo.prototype.populateBottomRow_=function(){e.geras.RenderInfo.superClass_.populateBottomRow_.call(this),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==e.inputTypes.STATEMENT||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)},e.geras.RenderInfo.prototype.addInput_=function(t,n){this.isInline&&t.type==e.inputTypes.VALUE?(n.elements.push(new e.geras.InlineInput(this.constants_,t)),n.hasInlineInput=!0):t.type==e.inputTypes.STATEMENT?(n.elements.push(new e.geras.StatementInput(this.constants_,t)),n.hasStatement=!0):t.type==e.inputTypes.VALUE?(n.elements.push(new e.blockRendering.ExternalValueInput(this.constants_,t)),n.hasExternalInput=!0):t.type==e.inputTypes.DUMMY&&(n.minHeight=Math.max(n.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),n.hasDummyInput=!0),this.isInline||null!=n.align||(n.align=t.align)},e.geras.RenderInfo.prototype.addElemSpacing_=function(){for(var r,t=!1,n=0;r=this.rows[n];n++)r.hasExternalInput&&(t=!0);for(n=0;r=this.rows[n];n++){var s=r.elements;if(r.elements=[],r.startsWithElemSpacer()&&r.elements.push(new e.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,s[0]))),s.length){for(var u=0;u<s.length-1;u++){r.elements.push(s[u]);var b=this.getInRowSpacing_(s[u],s[u+1]);r.elements.push(new e.blockRendering.InRowSpacer(this.constants_,b))}r.elements.push(s[s.length-1]),r.endsWithElemSpacer()&&(b=this.getInRowSpacing_(s[s.length-1],null),t&&r.hasDummyInput&&(b+=this.constants_.TAB_WIDTH),r.elements.push(new e.blockRendering.InRowSpacer(this.constants_,b)))}}},e.geras.RenderInfo.prototype.getInRowSpacing_=function(t,n){if(!t)return n&&e.blockRendering.Types.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:n&&e.blockRendering.Types.isInlineInput(n)?this.constants_.MEDIUM_LARGE_PADDING:n&&e.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!e.blockRendering.Types.isInput(t)&&(!n||e.blockRendering.Types.isStatementInput(n)))return e.blockRendering.Types.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:e.blockRendering.Types.isIcon(t)?2*this.constants_.LARGE_PADDING+1:e.blockRendering.Types.isHat(t)?this.constants_.NO_PADDING:e.blockRendering.Types.isPreviousOrNextConnection(t)?this.constants_.LARGE_PADDING:e.blockRendering.Types.isLeftRoundedCorner(t)?this.constants_.MIN_BLOCK_WIDTH:e.blockRendering.Types.isJaggedEdge(t)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isInput(t)&&!n){if(e.blockRendering.Types.isExternalInput(t))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isInlineInput(t))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(t))return this.constants_.NO_PADDING}if(!e.blockRendering.Types.isInput(t)&&n&&e.blockRendering.Types.isInput(n)){if(e.blockRendering.Types.isField(t)&&t.isEditable){if(e.blockRendering.Types.isInlineInput(n)||e.blockRendering.Types.isExternalInput(n))return this.constants_.SMALL_PADDING}else{if(e.blockRendering.Types.isInlineInput(n)||e.blockRendering.Types.isExternalInput(n))return this.constants_.MEDIUM_LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(n))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(e.blockRendering.Types.isIcon(t)&&n&&!e.blockRendering.Types.isInput(n))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isInlineInput(t)&&n&&e.blockRendering.Types.isField(n))return n.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isLeftSquareCorner(t)&&n){if(e.blockRendering.Types.isHat(n))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isPreviousConnection(n))return n.notchOffset;if(e.blockRendering.Types.isNextConnection(n))return n.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(e.blockRendering.Types.isLeftRoundedCorner(t)&&n){if(e.blockRendering.Types.isPreviousConnection(n))return n.notchOffset-this.constants_.CORNER_RADIUS;if(e.blockRendering.Types.isNextConnection(n))return n.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return e.blockRendering.Types.isField(t)&&n&&e.blockRendering.Types.isField(n)&&t.isEditable==n.isEditable||n&&e.blockRendering.Types.isJaggedEdge(n)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},e.geras.RenderInfo.prototype.getSpacerRowHeight_=function(t,n){return e.blockRendering.Types.isTopRow(t)&&e.blockRendering.Types.isBottomRow(n)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:e.blockRendering.Types.isTopRow(t)||e.blockRendering.Types.isBottomRow(n)?this.constants_.NO_PADDING:t.hasExternalInput&&n.hasExternalInput?this.constants_.LARGE_PADDING:!t.hasStatement&&n.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:t.hasStatement&&n.hasStatement||!t.hasStatement&&n.hasDummyInput||t.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},e.geras.RenderInfo.prototype.getElemCenterline_=function(t,n){if(e.blockRendering.Types.isSpacer(n))return t.yPos+n.height/2;if(e.blockRendering.Types.isBottomRow(t))return t=t.yPos+t.height-t.descenderHeight,e.blockRendering.Types.isNextConnection(n)?t+n.height/2:t-n.height/2;if(e.blockRendering.Types.isTopRow(t))return e.blockRendering.Types.isHat(n)?t.capline-n.height/2:t.capline+n.height/2;var r=t.yPos;return e.blockRendering.Types.isField(n)||e.blockRendering.Types.isIcon(n)?(r+=n.height/2,(t.hasInlineInput||t.hasStatement)&&n.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=t.height&&(r+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):r=e.blockRendering.Types.isInlineInput(n)?r+n.height/2:r+t.height/2,r},e.geras.RenderInfo.prototype.alignRowElements_=function(){if(this.isInline){for(var s,t=0,n=null,r=this.rows.length-1;s=this.rows[r];r--)s.nextRightEdge=t,e.blockRendering.Types.isInputRow(s)&&(s.hasStatement&&this.alignStatementRow_(s),n&&n.hasStatement&&s.width<n.width?s.nextRightEdge=n.width:t=s.width,n=s);for(r=t=0;s=this.rows[r];r++)s.hasStatement?t=this.getDesiredRowWidth_(s):e.blockRendering.Types.isSpacer(s)?s.width=Math.max(t,s.nextRightEdge):(0<(t=Math.max(t,s.nextRightEdge)-s.width)&&this.addAlignmentPadding_(s,t),t=s.width)}else e.geras.RenderInfo.superClass_.alignRowElements_.call(this)},e.geras.RenderInfo.prototype.getDesiredRowWidth_=function(t){return this.isInline&&t.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:e.geras.RenderInfo.superClass_.getDesiredRowWidth_.call(this,t)},e.geras.RenderInfo.prototype.finalize_=function(){for(var s,t=0,n=0,r=0;s=this.rows[r];r++){s.yPos=n,s.xPos=this.startX,n+=s.height,t=Math.max(t,s.widthWithConnectedBlocks);var u=n-this.topRow.ascenderHeight;s==this.bottomRow&&u<this.constants_.MIN_BLOCK_HEIGHT&&(this.bottomRow.height+=u=this.constants_.MIN_BLOCK_HEIGHT-u,n+=u),this.recordElemPositions_(s)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(t=Math.max(t,this.block_.nextConnection.targetBlock().getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=n-this.bottomRow.descenderHeight,this.widthWithChildren=t+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=n+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline},e.geras.Drawer=function(t,n){e.geras.Drawer.superClass_.constructor.call(this,t,n),this.highlighter_=new e.geras.Highlighter(n)},e.utils.object.inherits(e.geras.Drawer,e.blockRendering.Drawer),e.geras.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_();var t=this.block_.pathObject;t.setPath(this.outlinePath_+"\n"+this.inlinePath_),t.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&t.flipRTL(),e.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},e.geras.Drawer.prototype.drawTop_=function(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),e.geras.Drawer.superClass_.drawTop_.call(this)},e.geras.Drawer.prototype.drawJaggedEdge_=function(t){this.highlighter_.drawJaggedEdge_(t),e.geras.Drawer.superClass_.drawJaggedEdge_.call(this,t)},e.geras.Drawer.prototype.drawValueInput_=function(t){this.highlighter_.drawValueInput(t),e.geras.Drawer.superClass_.drawValueInput_.call(this,t)},e.geras.Drawer.prototype.drawStatementInput_=function(t){this.highlighter_.drawStatementInput(t),e.geras.Drawer.superClass_.drawStatementInput_.call(this,t)},e.geras.Drawer.prototype.drawRightSideRow_=function(t){this.highlighter_.drawRightSideRow(t),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("H",t.xPos+t.width)+e.utils.svgPaths.lineOnAxis("V",t.yPos+t.height)},e.geras.Drawer.prototype.drawBottom_=function(){this.highlighter_.drawBottomRow(this.info_.bottomRow),e.geras.Drawer.superClass_.drawBottom_.call(this)},e.geras.Drawer.prototype.drawLeft_=function(){this.highlighter_.drawLeft(),e.geras.Drawer.superClass_.drawLeft_.call(this)},e.geras.Drawer.prototype.drawInlineInput_=function(t){this.highlighter_.drawInlineInput(t),e.geras.Drawer.superClass_.drawInlineInput_.call(this,t)},e.geras.Drawer.prototype.positionInlineInputConnection_=function(t){if(t.connectionModel){var r=t.xPos+t.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(r*=-1),t.connectionModel.setOffsetInBlock(r,t.centerline-t.height/2+t.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}},e.geras.Drawer.prototype.positionStatementInputConnection_=function(t){var n=t.getLastInput();if(n.connectionModel){var r=t.xPos+t.statementEdge+n.notchOffset;n.connectionModel.setOffsetInBlock(r=this.info_.RTL?-1*r:r+this.constants_.DARK_PATH_OFFSET,t.yPos+this.constants_.DARK_PATH_OFFSET)}},e.geras.Drawer.prototype.positionExternalValueConnection_=function(t){var n=t.getLastInput();if(n.connectionModel){var r=t.xPos+t.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(r*=-1),n.connectionModel.setOffsetInBlock(r,t.yPos)}},e.geras.Drawer.prototype.positionNextConnection_=function(){var t=this.info_.bottomRow;if(t.connection){var n=t.connection,r=n.xPos;n.connectionModel.setOffsetInBlock((this.info_.RTL?-r:r)+this.constants_.DARK_PATH_OFFSET/2,t.baseline+this.constants_.DARK_PATH_OFFSET)}},e.geras.HighlightConstantProvider=function(t){this.constantProvider=t,this.OFFSET=.5,this.START_POINT=e.utils.svgPaths.moveBy(this.OFFSET,this.OFFSET)},e.geras.HighlightConstantProvider.prototype.init=function(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()},e.geras.HighlightConstantProvider.prototype.makeInsideCorner=function(){var t=this.constantProvider.CORNER_RADIUS,n=this.OFFSET,r=(1-Math.SQRT1_2)*(t+n)-n,s=e.utils.svgPaths.moveBy(r,r)+e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(-r-n,t-r)),u=e.utils.svgPaths.arc("a","0 0,0",t+n,e.utils.svgPaths.point(t+n,t+n)),b=e.utils.svgPaths.moveBy(r,-r)+e.utils.svgPaths.arc("a","0 0,0",t+n,e.utils.svgPaths.point(t-r,r+n));return{width:t+n,height:t,pathTop:function(x){return x?s:""},pathBottom:function(x){return x?u:b}}},e.geras.HighlightConstantProvider.prototype.makeOutsideCorner=function(){var t=this.constantProvider.CORNER_RADIUS,n=this.OFFSET,r=(1-Math.SQRT1_2)*(t-n)+n,s=e.utils.svgPaths.moveBy(r,r)+e.utils.svgPaths.arc("a","0 0,1",t-n,e.utils.svgPaths.point(t-r,-r+n)),u=e.utils.svgPaths.moveBy(n,t)+e.utils.svgPaths.arc("a","0 0,1",t-n,e.utils.svgPaths.point(t,-t+n)),b=-r,x=e.utils.svgPaths.moveBy(r,b)+e.utils.svgPaths.arc("a","0 0,1",t-n,e.utils.svgPaths.point(-r+n,-b-t));return{height:t,topLeft:function(B){return B?s:u},bottomLeft:function(){return x}}},e.geras.HighlightConstantProvider.prototype.makePuzzleTab=function(){var t=this.constantProvider.TAB_WIDTH,n=this.constantProvider.TAB_HEIGHT,r=e.utils.svgPaths.moveBy(-2,3.4-n)+e.utils.svgPaths.lineTo(-.45*t,-2.1),s=e.utils.svgPaths.lineOnAxis("v",2.5)+e.utils.svgPaths.moveBy(.97*-t,2.5)+e.utils.svgPaths.curve("q",[e.utils.svgPaths.point(.05*-t,10),e.utils.svgPaths.point(.3*t,9.5)])+e.utils.svgPaths.moveBy(.67*t,-1.9)+e.utils.svgPaths.lineOnAxis("v",2.5),u=e.utils.svgPaths.lineOnAxis("v",-1.5)+e.utils.svgPaths.moveBy(-.92*t,-.5)+e.utils.svgPaths.curve("q",[e.utils.svgPaths.point(-.19*t,-5.5),e.utils.svgPaths.point(0,-11)])+e.utils.svgPaths.moveBy(.92*t,1),b=e.utils.svgPaths.moveBy(-5,n-.7)+e.utils.svgPaths.lineTo(.46*t,-2.1);return{width:t,height:n,pathUp:function(x){return x?r:u},pathDown:function(x){return x?s:b}}},e.geras.HighlightConstantProvider.prototype.makeNotch=function(){return{pathLeft:e.utils.svgPaths.lineOnAxis("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}},e.geras.HighlightConstantProvider.prototype.makeJaggedTeeth=function(){return{pathLeft:e.utils.svgPaths.lineTo(5.1,2.6)+e.utils.svgPaths.moveBy(-10.2,6.8)+e.utils.svgPaths.lineTo(5.1,2.6),height:12,width:10.2}},e.geras.HighlightConstantProvider.prototype.makeStartHat=function(){var t=this.constantProvider.START_HAT.height,n=e.utils.svgPaths.moveBy(25,-8.7)+e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(29.7,-6.2),e.utils.svgPaths.point(57.2,-.5),e.utils.svgPaths.point(75,8.7)]),r=e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(17.8,-9.2),e.utils.svgPaths.point(45.3,-14.9),e.utils.svgPaths.point(75,-8.7)])+e.utils.svgPaths.moveTo(100.5,t+.5);return{path:function(s){return s?n:r}}},e.geras.PathObject=function(t,n,r){this.constants=r,this.svgRoot=t,this.svgPathDark=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"},this.svgRoot),this.svgPath=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.svgPathLight=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyPathLight"},this.svgRoot),this.colourDark="#000000",this.style=n},e.utils.object.inherits(e.geras.PathObject,e.blockRendering.PathObject),e.geras.PathObject.prototype.setPath=function(t){this.svgPath.setAttribute("d",t),this.svgPathDark.setAttribute("d",t)},e.geras.PathObject.prototype.setHighlightPath=function(t){this.svgPathLight.setAttribute("d",t)},e.geras.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")},e.geras.PathObject.prototype.applyColour=function(t){this.svgPathLight.style.display="",this.svgPathDark.style.display="",this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),e.geras.PathObject.superClass_.applyColour.call(this,t),this.svgPath.setAttribute("stroke","none")},e.geras.PathObject.prototype.setStyle=function(t){this.style=t,this.colourDark=e.utils.colour.blend("#000",this.style.colourPrimary,.2)||this.colourDark},e.geras.PathObject.prototype.updateHighlighted=function(t){t?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")},e.geras.PathObject.prototype.updateShadow_=function(t){t&&(this.svgPathLight.style.display="none",this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},e.geras.PathObject.prototype.updateDisabled_=function(t){e.geras.PathObject.superClass_.updateDisabled_.call(this,t),t&&this.svgPath.setAttribute("stroke","none")},e.geras.Renderer=function(t){e.geras.Renderer.superClass_.constructor.call(this,t),this.highlightConstants_=null},e.utils.object.inherits(e.geras.Renderer,e.blockRendering.Renderer),e.geras.Renderer.prototype.init=function(t,n){e.geras.Renderer.superClass_.init.call(this,t,n),this.highlightConstants_=this.makeHighlightConstants_(),this.highlightConstants_.init()},e.geras.Renderer.prototype.refreshDom=function(t,n){e.geras.Renderer.superClass_.refreshDom.call(this,t,n),this.getHighlightConstants().init()},e.geras.Renderer.prototype.makeConstants_=function(){return new e.geras.ConstantProvider},e.geras.Renderer.prototype.makeRenderInfo_=function(t){return new e.geras.RenderInfo(this,t)},e.geras.Renderer.prototype.makeDrawer_=function(t,n){return new e.geras.Drawer(t,n)},e.geras.Renderer.prototype.makePathObject=function(t,n){return new e.geras.PathObject(t,n,this.getConstants())},e.geras.Renderer.prototype.makeHighlightConstants_=function(){return new e.geras.HighlightConstantProvider(this.getConstants())},e.geras.Renderer.prototype.getHighlightConstants=function(){return this.highlightConstants_},e.blockRendering.register("geras",e.geras.Renderer),e.thrasos={},e.thrasos.RenderInfo=function(t,n){e.thrasos.RenderInfo.superClass_.constructor.call(this,t,n)},e.utils.object.inherits(e.thrasos.RenderInfo,e.blockRendering.RenderInfo),e.thrasos.RenderInfo.prototype.getRenderer=function(){return this.renderer_},e.thrasos.RenderInfo.prototype.addElemSpacing_=function(){for(var r,t=!1,n=0;r=this.rows[n];n++)r.hasExternalInput&&(t=!0);for(n=0;r=this.rows[n];n++){var s=r.elements;r.elements=[],r.startsWithElemSpacer()&&r.elements.push(new e.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,s[0])));for(var u=0;u<s.length-1;u++){r.elements.push(s[u]);var b=this.getInRowSpacing_(s[u],s[u+1]);r.elements.push(new e.blockRendering.InRowSpacer(this.constants_,b))}r.elements.push(s[s.length-1]),r.endsWithElemSpacer()&&(b=this.getInRowSpacing_(s[s.length-1],null),t&&r.hasDummyInput&&(b+=this.constants_.TAB_WIDTH),r.elements.push(new e.blockRendering.InRowSpacer(this.constants_,b)))}},e.thrasos.RenderInfo.prototype.getInRowSpacing_=function(t,n){if(!t)return n&&e.blockRendering.Types.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:n&&e.blockRendering.Types.isInlineInput(n)?this.constants_.MEDIUM_LARGE_PADDING:n&&e.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!e.blockRendering.Types.isInput(t)&&!n)return e.blockRendering.Types.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:e.blockRendering.Types.isIcon(t)?2*this.constants_.LARGE_PADDING+1:e.blockRendering.Types.isHat(t)?this.constants_.NO_PADDING:e.blockRendering.Types.isPreviousOrNextConnection(t)?this.constants_.LARGE_PADDING:e.blockRendering.Types.isLeftRoundedCorner(t)?this.constants_.MIN_BLOCK_WIDTH:e.blockRendering.Types.isJaggedEdge(t)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isInput(t)&&!n){if(e.blockRendering.Types.isExternalInput(t))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isInlineInput(t))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(t))return this.constants_.NO_PADDING}if(!e.blockRendering.Types.isInput(t)&&n&&e.blockRendering.Types.isInput(n)){if(e.blockRendering.Types.isField(t)&&t.isEditable){if(e.blockRendering.Types.isInlineInput(n)||e.blockRendering.Types.isExternalInput(n))return this.constants_.SMALL_PADDING}else{if(e.blockRendering.Types.isInlineInput(n)||e.blockRendering.Types.isExternalInput(n))return this.constants_.MEDIUM_LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(n))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(e.blockRendering.Types.isIcon(t)&&n&&!e.blockRendering.Types.isInput(n))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isInlineInput(t)&&n&&e.blockRendering.Types.isField(n))return n.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isLeftSquareCorner(t)&&n){if(e.blockRendering.Types.isHat(n))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isPreviousConnection(n)||e.blockRendering.Types.isNextConnection(n))return n.notchOffset}return e.blockRendering.Types.isLeftRoundedCorner(t)&&n?n.notchOffset-this.constants_.CORNER_RADIUS:e.blockRendering.Types.isField(t)&&n&&e.blockRendering.Types.isField(n)&&t.isEditable==n.isEditable||n&&e.blockRendering.Types.isJaggedEdge(n)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},e.thrasos.RenderInfo.prototype.getSpacerRowHeight_=function(t,n){return e.blockRendering.Types.isTopRow(t)&&e.blockRendering.Types.isBottomRow(n)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:e.blockRendering.Types.isTopRow(t)||e.blockRendering.Types.isBottomRow(n)?this.constants_.NO_PADDING:t.hasExternalInput&&n.hasExternalInput?this.constants_.LARGE_PADDING:!t.hasStatement&&n.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:t.hasStatement&&n.hasStatement||t.hasDummyInput||n.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},e.thrasos.RenderInfo.prototype.getElemCenterline_=function(t,n){if(e.blockRendering.Types.isSpacer(n))return t.yPos+n.height/2;if(e.blockRendering.Types.isBottomRow(t))return t=t.yPos+t.height-t.descenderHeight,e.blockRendering.Types.isNextConnection(n)?t+n.height/2:t-n.height/2;if(e.blockRendering.Types.isTopRow(t))return e.blockRendering.Types.isHat(n)?t.capline-n.height/2:t.capline+n.height/2;var r=t.yPos;return e.blockRendering.Types.isField(n)&&t.hasStatement?r+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+n.height/2):r+t.height/2},e.thrasos.RenderInfo.prototype.finalize_=function(){for(var s,t=0,n=0,r=0;s=this.rows[r];r++){s.yPos=n,s.xPos=this.startX,n+=s.height,t=Math.max(t,s.widthWithConnectedBlocks);var u=n-this.topRow.ascenderHeight;s==this.bottomRow&&u<this.constants_.MIN_BLOCK_HEIGHT&&(this.bottomRow.height+=u=this.constants_.MIN_BLOCK_HEIGHT-u,n+=u),this.recordElemPositions_(s)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(t=Math.max(t,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.bottomRow.baseline=n-this.bottomRow.descenderHeight,this.widthWithChildren=t+this.startX,this.height=n,this.startY=this.topRow.capline},e.thrasos.Renderer=function(t){e.thrasos.Renderer.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.thrasos.Renderer,e.blockRendering.Renderer),e.thrasos.Renderer.prototype.makeRenderInfo_=function(t){return new e.thrasos.RenderInfo(this,t)},e.blockRendering.register("thrasos",e.thrasos.Renderer),e.zelos={},e.zelos.ConstantProvider=function(){e.zelos.ConstantProvider.superClass_.constructor.call(this),this.SMALL_PADDING=this.GRID_UNIT=4,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TAB_OFFSET_FROM_TOP=0,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!0,this.FIELD_COLOUR_DEFAULT_WIDTH=2*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=4*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter_=null,this.replacementGlowFilterId="",this.replacementGlowFilter_=null},e.utils.object.inherits(e.zelos.ConstantProvider,e.blockRendering.ConstantProvider),e.zelos.ConstantProvider.prototype.setFontConstants_=function(t){e.zelos.ConstantProvider.superClass_.setFontConstants_.call(this,t),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING},e.zelos.ConstantProvider.prototype.init=function(){e.zelos.ConstantProvider.superClass_.init.call(this),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth},e.zelos.ConstantProvider.prototype.setDynamicProperties_=function(t){e.zelos.ConstantProvider.superClass_.setDynamicProperties_.call(this,t),this.SELECTED_GLOW_COLOUR=t.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;var n=Number(t.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=n&&!isNaN(n)?n:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=t.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(t=Number(t.getComponentStyle("replacementGlowSize")))&&!isNaN(t)?t:this.REPLACEMENT_GLOW_SIZE},e.zelos.ConstantProvider.prototype.dispose=function(){e.zelos.ConstantProvider.superClass_.dispose.call(this),this.selectedGlowFilter_&&e.utils.dom.removeNode(this.selectedGlowFilter_),this.replacementGlowFilter_&&e.utils.dom.removeNode(this.replacementGlowFilter_)},e.zelos.ConstantProvider.prototype.makeStartHat=function(){var t=this.START_HAT_HEIGHT,n=this.START_HAT_WIDTH;return{height:t,width:n,path:e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(25,-t),e.utils.svgPaths.point(71,-t),e.utils.svgPaths.point(n,0)])}},e.zelos.ConstantProvider.prototype.makeHexagonal=function(){function t(r,s,u){var b=r/2;return e.utils.svgPaths.lineTo(-(u=u?-1:1)*(b=b>n?n:b),r=(s?-1:1)*r/2)+e.utils.svgPaths.lineTo(u*b,r)}var n=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width:function(r){return(r/=2)>n?n:r},height:function(r){return r},connectionOffsetY:function(r){return r/2},connectionOffsetX:function(r){return-r},pathDown:function(r){return t(r,!1,!1)},pathUp:function(r){return t(r,!0,!1)},pathRightDown:function(r){return t(r,!1,!0)},pathRightUp:function(r){return t(r,!1,!0)}}},e.zelos.ConstantProvider.prototype.makeRounded=function(){function t(s,u,b){var x=s>r?s-r:0;return e.utils.svgPaths.arc("a","0 0,1",s=(s>r?r:s)/2,e.utils.svgPaths.point((u?-1:1)*s,(u?-1:1)*s))+e.utils.svgPaths.lineOnAxis("v",(b?1:-1)*x)+e.utils.svgPaths.arc("a","0 0,1",s,e.utils.svgPaths.point((u?1:-1)*s,(u?-1:1)*s))}var n=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,r=2*n;return{type:this.SHAPES.ROUND,isDynamic:!0,width:function(s){return(s/=2)>n?n:s},height:function(s){return s},connectionOffsetY:function(s){return s/2},connectionOffsetX:function(s){return-s},pathDown:function(s){return t(s,!1,!1)},pathUp:function(s){return t(s,!0,!1)},pathRightDown:function(s){return t(s,!1,!0)},pathRightUp:function(s){return t(s,!1,!0)}}},e.zelos.ConstantProvider.prototype.makeSquared=function(){function t(r,s,u){return r-=2*n,e.utils.svgPaths.arc("a","0 0,1",n,e.utils.svgPaths.point((s?-1:1)*n,(s?-1:1)*n))+e.utils.svgPaths.lineOnAxis("v",(u?1:-1)*r)+e.utils.svgPaths.arc("a","0 0,1",n,e.utils.svgPaths.point((s?1:-1)*n,(s?-1:1)*n))}var n=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width:function(r){return n},height:function(r){return r},connectionOffsetY:function(r){return r/2},connectionOffsetX:function(r){return-r},pathDown:function(r){return t(r,!1,!1)},pathUp:function(r){return t(r,!0,!1)},pathRightDown:function(r){return t(r,!1,!0)},pathRightUp:function(r){return t(r,!1,!0)}}},e.zelos.ConstantProvider.prototype.shapeFor=function(t){var n=t.getCheck();switch(!n&&t.targetConnection&&(n=t.targetConnection.getCheck()),t.type){case e.connectionTypes.INPUT_VALUE:case e.connectionTypes.OUTPUT_VALUE:if(null!=(t=t.getSourceBlock().getOutputShape()))switch(t){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return n&&-1!=n.indexOf("Boolean")?this.HEXAGONAL:(n&&-1!=n.indexOf("Number")||n&&n.indexOf("String"),this.ROUNDED);case e.connectionTypes.PREVIOUS_STATEMENT:case e.connectionTypes.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}},e.zelos.ConstantProvider.prototype.makeNotch=function(){function t(ot){return e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(ot*u/2,0),e.utils.svgPaths.point(ot*u*3/4,x/2),e.utils.svgPaths.point(ot*u,x)])+e.utils.svgPaths.line([e.utils.svgPaths.point(ot*u,b)])+e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(ot*u/4,x/2),e.utils.svgPaths.point(ot*u/2,x),e.utils.svgPaths.point(ot*u,x)])+e.utils.svgPaths.lineOnAxis("h",ot*s)+e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(ot*u/2,0),e.utils.svgPaths.point(ot*u*3/4,-x/2),e.utils.svgPaths.point(ot*u,-x)])+e.utils.svgPaths.line([e.utils.svgPaths.point(ot*u,-b)])+e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(ot*u/4,-x/2),e.utils.svgPaths.point(ot*u/2,-x),e.utils.svgPaths.point(ot*u,-x)])}var n=this.NOTCH_WIDTH,r=this.NOTCH_HEIGHT,s=n/3,u=s/3,b=r/2,x=b/2,B=t(1),Z=t(-1);return{type:this.SHAPES.NOTCH,width:n,height:r,pathLeft:B,pathRight:Z}},e.zelos.ConstantProvider.prototype.makeInsideCorners=function(){var t=this.CORNER_RADIUS,n=e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(-t,t)),r=e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(-t,t));return{width:t,height:t,pathTop:n,pathBottom:e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(t,t)),rightWidth:t,rightHeight:t,pathTopRight:r,pathBottomRight:e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(t,t))}},e.zelos.ConstantProvider.prototype.generateSecondaryColour_=function(t){return e.utils.colour.blend("#000",t,.15)||t},e.zelos.ConstantProvider.prototype.generateTertiaryColour_=function(t){return e.utils.colour.blend("#000",t,.25)||t},e.zelos.ConstantProvider.prototype.createDom=function(t,n,r){e.zelos.ConstantProvider.superClass_.createDom.call(this,t,n,r),t=e.utils.dom.createSvgElement(e.utils.Svg.DEFS,{},t),n=e.utils.dom.createSvgElement(e.utils.Svg.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},t),e.utils.dom.createSvgElement(e.utils.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},n),r=e.utils.dom.createSvgElement(e.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},n),e.utils.dom.createSvgElement(e.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},r),e.utils.dom.createSvgElement(e.utils.Svg.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},n),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},n),this.selectedGlowFilterId=n.id,this.selectedGlowFilter_=n,t=e.utils.dom.createSvgElement(e.utils.Svg.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},t),e.utils.dom.createSvgElement(e.utils.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},t),n=e.utils.dom.createSvgElement(e.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},t),e.utils.dom.createSvgElement(e.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),e.utils.dom.createSvgElement(e.utils.Svg.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},t),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},t),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},t),this.replacementGlowFilterId=t.id,this.replacementGlowFilter_=t},e.zelos.ConstantProvider.prototype.getCSS_=function(t){return[t+" .blocklyText,",t+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",t+" .blocklyText {","fill: #fff;","}",t+" .blocklyNonEditableText>rect:not(.blocklyDropdownRect),",t+" .blocklyEditableText>rect:not(.blocklyDropdownRect) {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","}",t+" .blocklyNonEditableText>text,",t+" .blocklyEditableText>text,",t+" .blocklyNonEditableText>g>text,",t+" .blocklyEditableText>g>text {","fill: #575E75;","}",t+" .blocklyFlyoutLabelText {","fill: #575E75;","}",t+" .blocklyText.blocklyBubbleText {","fill: #575E75;","}",t+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>rect,",t+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",t+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","color: #575E75;","}",t+" .blocklyDropdownText {","fill: #fff !important;","}",t+".blocklyWidgetDiv .goog-menuitem,",t+".blocklyDropDownDiv .goog-menuitem {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","}",t+".blocklyDropDownDiv .goog-menuitem-content {","color: #fff;","}",t+" .blocklyHighlightedConnectionPath {","stroke: "+this.SELECTED_GLOW_COLOUR+";","}",t+" .blocklyDisabled > .blocklyOutlinePath {","fill: url(#blocklyDisabledPattern"+this.randomIdentifier+")","}",t+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]},e.zelos.TopRow=function(t){e.zelos.TopRow.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.zelos.TopRow,e.blockRendering.TopRow),e.zelos.TopRow.prototype.endsWithElemSpacer=function(){return!1},e.zelos.TopRow.prototype.hasLeftSquareCorner=function(t){return!!t.outputConnection||(t.hat?"cap"===t.hat:this.constants_.ADD_START_HATS)&&!t.outputConnection&&!t.previousConnection},e.zelos.TopRow.prototype.hasRightSquareCorner=function(t){return!!t.outputConnection&&!t.statementInputCount&&!t.nextConnection},e.zelos.BottomRow=function(t){e.zelos.BottomRow.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.zelos.BottomRow,e.blockRendering.BottomRow),e.zelos.BottomRow.prototype.endsWithElemSpacer=function(){return!1},e.zelos.BottomRow.prototype.hasLeftSquareCorner=function(t){return!!t.outputConnection},e.zelos.BottomRow.prototype.hasRightSquareCorner=function(t){return!!t.outputConnection&&!t.statementInputCount&&!t.nextConnection},e.zelos.RightConnectionShape=function(t){e.zelos.RightConnectionShape.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.getType("RIGHT_CONNECTION"),this.width=this.height=0},e.utils.object.inherits(e.zelos.RightConnectionShape,e.blockRendering.Measurable),e.zelos.RenderInfo=function(t,n){e.zelos.RenderInfo.superClass_.constructor.call(this,t,n),this.topRow=new e.zelos.TopRow(this.constants_),this.bottomRow=new e.zelos.BottomRow(this.constants_),this.isInline=!0,this.isMultiRow=!n.getInputsInline()||n.isCollapsed(),this.hasStatementInput=0<n.statementInputCount,this.rightSide=this.outputConnection?new e.zelos.RightConnectionShape(this.constants_):null},e.utils.object.inherits(e.zelos.RenderInfo,e.blockRendering.RenderInfo),e.zelos.RenderInfo.prototype.getRenderer=function(){return this.renderer_},e.zelos.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},e.zelos.RenderInfo.prototype.shouldStartNewRow_=function(t,n){return!!n&&(t.type==e.inputTypes.STATEMENT||n.type==e.inputTypes.STATEMENT||(t.type==e.inputTypes.VALUE||t.type==e.inputTypes.DUMMY)&&(!this.isInline||this.isMultiRow))},e.zelos.RenderInfo.prototype.getDesiredRowWidth_=function(t){return t.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):e.zelos.RenderInfo.superClass_.getDesiredRowWidth_.call(this,t)},e.zelos.RenderInfo.prototype.getInRowSpacing_=function(t,n){return t&&n||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!t&&n&&e.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:t&&e.blockRendering.Types.isLeftRoundedCorner(t)&&n&&(e.blockRendering.Types.isPreviousConnection(n)||e.blockRendering.Types.isNextConnection(n))?n.notchOffset-this.constants_.CORNER_RADIUS:t&&e.blockRendering.Types.isLeftSquareCorner(t)&&n&&e.blockRendering.Types.isHat(n)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING},e.zelos.RenderInfo.prototype.getSpacerRowHeight_=function(t,n){if(e.blockRendering.Types.isTopRow(t)&&e.blockRendering.Types.isBottomRow(n))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;var r=e.blockRendering.Types.isInputRow(t)&&t.hasStatement,s=e.blockRendering.Types.isInputRow(n)&&n.hasStatement;return s||r?(t=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),s&&r?Math.max(t,this.constants_.DUMMY_INPUT_MIN_HEIGHT):t):e.blockRendering.Types.isTopRow(t)?t.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):e.blockRendering.Types.isBottomRow(n)?this.outputConnection?!n.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},e.zelos.RenderInfo.prototype.getSpacerRowWidth_=function(t,n){var r=this.width-this.startX;return e.blockRendering.Types.isInputRow(t)&&t.hasStatement||e.blockRendering.Types.isInputRow(n)&&n.hasStatement?Math.max(r,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):r},e.zelos.RenderInfo.prototype.getElemCenterline_=function(t,n){if(t.hasStatement&&!e.blockRendering.Types.isSpacer(n)&&!e.blockRendering.Types.isStatementInput(n))return t.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(e.blockRendering.Types.isInlineInput(n)){var r=n.connectedBlock;if(r&&r.outputConnection&&r.nextConnection)return t.yPos+r.height/2}return e.zelos.RenderInfo.superClass_.getElemCenterline_.call(this,t,n)},e.zelos.RenderInfo.prototype.addInput_=function(t,n){t.type==e.inputTypes.DUMMY&&n.hasDummyInput&&n.align==e.constants.ALIGN.LEFT&&t.align==e.constants.ALIGN.RIGHT&&(n.rightAlignedDummyInput=t),e.zelos.RenderInfo.superClass_.addInput_.call(this,t,n)},e.zelos.RenderInfo.prototype.addAlignmentPadding_=function(t,n){if(t.rightAlignedDummyInput){for(var r,u,s=0;(u=t.elements[s])&&(e.blockRendering.Types.isSpacer(u)&&(r=u),!e.blockRendering.Types.isField(u)||u.parentInput!=t.rightAlignedDummyInput);s++);if(r)return r.width+=n,void(t.width+=n)}e.zelos.RenderInfo.superClass_.addAlignmentPadding_.call(this,t,n)},e.zelos.RenderInfo.prototype.adjustXPosition_=function(){for(var t=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH,n=t,r=2;r<this.rows.length-1;r+=2){var s=this.rows[r-1],u=this.rows[r],b=this.rows[r+1];if(s=2==r?!!this.topRow.hasPreviousConnection:!!s.followsStatement,b=r+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!b.precedesStatement,e.blockRendering.Types.isInputRow(u)&&u.hasStatement)u.measure(),n=u.width-u.getLastInput().width+t;else if(s&&(2==r||b)&&e.blockRendering.Types.isInputRow(u)&&!u.hasStatement){b=u.xPos,s=null;for(var B,x=0;B=u.elements[x];x++)e.blockRendering.Types.isSpacer(B)&&(s=B),!(s&&(e.blockRendering.Types.isField(B)||e.blockRendering.Types.isInput(B))&&b<n)||e.blockRendering.Types.isField(B)&&(B.field instanceof e.FieldLabel||B.field instanceof e.FieldImage)||(s.width+=n-b),b+=B.width}}},e.zelos.RenderInfo.prototype.finalizeOutputConnection_=function(){if(this.outputConnection&&this.outputConnection.isDynamicShape){for(var r,t=0,n=0;r=this.rows[n];n++)r.yPos=t,t+=r.height;this.height=t,t=this.outputConnection.shape.height(n=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height),n=this.outputConnection.shape.width(n),this.outputConnection.height=t,this.outputConnection.width=n,this.outputConnection.startX=n,this.outputConnection.connectionOffsetY=this.outputConnection.shape.connectionOffsetY(t),this.outputConnection.connectionOffsetX=this.outputConnection.shape.connectionOffsetX(n),r=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(r=n,this.rightSide.height=t,this.rightSide.width=r,this.rightSide.centerline=t/2,this.rightSide.xPos=this.width+r),this.startX=n,this.width+=n+r,this.widthWithChildren+=n+r}},e.zelos.RenderInfo.prototype.finalizeHorizontalAlignment_=function(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var r,t=0,n=0;r=this.rows[n];n++)if(e.blockRendering.Types.isInputRow(r)){t=r.elements[r.elements.length-2];var s=this.getNegativeSpacing_(r.elements[1]),u=this.getNegativeSpacing_(t),b=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-(t=s+u)<b&&(s=(t=this.width-b)/2,u=t/2),r.elements.unshift(new e.blockRendering.InRowSpacer(this.constants_,-s)),r.elements.push(new e.blockRendering.InRowSpacer(this.constants_,-u))}if(t)for(this.width-=t,this.widthWithChildren-=t,this.rightSide.xPos-=t,n=0;r=this.rows[n];n++)e.blockRendering.Types.isTopOrBottomRow(r)&&(r.elements[1].width-=t,r.elements[1].widthWithConnectedBlocks-=t),r.width-=t,r.widthWithConnectedBlocks-=t}},e.zelos.RenderInfo.prototype.getNegativeSpacing_=function(t){if(!t)return 0;var n=this.outputConnection.width,r=this.outputConnection.shape.type,s=this.constants_;if(this.isMultiRow&&1<this.inputRows.length)return r===s.SHAPES.ROUND?n-(r=this.height/2>(r=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH)?r:this.height/2)*(1-Math.sin(Math.acos((r-this.constants_.SMALL_PADDING)/r))):0;if(e.blockRendering.Types.isInlineInput(t)){var u=t.connectedBlock;return t=u?u.pathObject.outputShapeType:t.shape.type,u&&u.outputConnection&&(u.statementInputCount||u.nextConnection)||r==s.SHAPES.HEXAGONAL&&r!=t?0:n-this.constants_.SHAPE_IN_SHAPE_PADDING[r][t]}return e.blockRendering.Types.isField(t)?r==s.SHAPES.ROUND&&t.field instanceof e.FieldTextInput?n-2.75*s.GRID_UNIT:n-this.constants_.SHAPE_IN_SHAPE_PADDING[r][0]:e.blockRendering.Types.isIcon(t)?this.constants_.SMALL_PADDING:0},e.zelos.RenderInfo.prototype.finalizeVerticalAlignment_=function(){if(!this.outputConnection)for(var t=2;t<this.rows.length-1;t+=2){var n=this.rows[t-1],r=this.rows[t],s=this.rows[t+1],u=2==t,b=t+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!s.precedesStatement;if(u?this.topRow.hasPreviousConnection:n.followsStatement){var x=3==r.elements.length&&(r.elements[1].field instanceof e.FieldLabel||r.elements[1].field instanceof e.FieldImage);if(!u&&x)n.height-=this.constants_.SMALL_PADDING,s.height-=this.constants_.SMALL_PADDING,r.height-=this.constants_.MEDIUM_PADDING;else if(u||b){if(b){for(u=!1,b=0;x=r.elements[b];b++)if(e.blockRendering.Types.isInlineInput(x)&&x.connectedBlock&&!x.connectedBlock.isShadow()&&40<=x.connectedBlock.getHeightWidth().height){u=!0;break}u&&(n.height-=this.constants_.SMALL_PADDING,s.height-=this.constants_.SMALL_PADDING)}}else n.height+=this.constants_.SMALL_PADDING}}},e.zelos.RenderInfo.prototype.finalize_=function(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),e.zelos.RenderInfo.superClass_.finalize_.call(this),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)},e.zelos.Drawer=function(t,n){e.zelos.Drawer.superClass_.constructor.call(this,t,n)},e.utils.object.inherits(e.zelos.Drawer,e.blockRendering.Drawer),e.zelos.Drawer.prototype.draw=function(){var t=this.block_.pathObject;t.beginDrawing(),this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),t.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&t.flipRTL(),e.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_(),this.info_.outputConnection&&(t.outputShapeType=this.info_.outputConnection.shape.type),t.endDrawing()},e.zelos.Drawer.prototype.drawOutline_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):e.zelos.Drawer.superClass_.drawOutline_.call(this)},e.zelos.Drawer.prototype.drawLeft_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():e.zelos.Drawer.superClass_.drawLeft_.call(this)},e.zelos.Drawer.prototype.drawRightSideRow_=function(t){if(!(0>=t.height))if(t.precedesStatement||t.followsStatement){var n=this.constants_.INSIDE_CORNERS.rightHeight;this.outlinePath_+=(t.followsStatement?this.constants_.INSIDE_CORNERS.pathBottomRight:"")+(0<(n=t.height-(t.precedesStatement?n:0))?e.utils.svgPaths.lineOnAxis("V",t.yPos+n):"")+(t.precedesStatement?this.constants_.INSIDE_CORNERS.pathTopRight:"")}else this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",t.yPos+t.height)},e.zelos.Drawer.prototype.drawRightDynamicConnection_=function(){this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)},e.zelos.Drawer.prototype.drawLeftDynamicConnection_=function(){this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"},e.zelos.Drawer.prototype.drawFlatTop_=function(){var t=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=e.utils.svgPaths.moveBy(t.xPos,this.info_.startY),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("h",t.width)},e.zelos.Drawer.prototype.drawFlatBottom_=function(){var t=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",t.baseline),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("h",-t.width)},e.zelos.Drawer.prototype.drawInlineInput_=function(t){this.positionInlineInputConnection_(t);var n=t.input.name;if(!t.connectedBlock&&!this.info_.isInsertionMarker){var r=t.width-2*t.connectionWidth;t=e.utils.svgPaths.moveTo(t.xPos+t.connectionWidth,t.centerline-t.height/2)+e.utils.svgPaths.lineOnAxis("h",r)+t.shape.pathRightDown(t.height)+e.utils.svgPaths.lineOnAxis("h",-r)+t.shape.pathUp(t.height)+"z",this.block_.pathObject.setOutlinePath(n,t)}},e.zelos.Drawer.prototype.drawStatementInput_=function(t){var n=t.getLastInput(),r=n.xPos+n.notchOffset+n.shape.width,s=n.shape.pathRight+e.utils.svgPaths.lineOnAxis("h",-(n.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop,u=t.height-2*this.constants_.INSIDE_CORNERS.height;n=this.constants_.INSIDE_CORNERS.pathBottom+e.utils.svgPaths.lineOnAxis("h",n.notchOffset-this.constants_.INSIDE_CORNERS.width)+(n.connectedBottomNextConnection?"":n.shape.pathLeft),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("H",r)+s+e.utils.svgPaths.lineOnAxis("v",u)+n+e.utils.svgPaths.lineOnAxis("H",t.xPos+t.width),this.positionStatementInputConnection_(t)},e.zelos.MarkerSvg=function(t,n,r){e.zelos.MarkerSvg.superClass_.constructor.call(this,t,n,r)},e.utils.object.inherits(e.zelos.MarkerSvg,e.blockRendering.MarkerSvg),e.zelos.MarkerSvg.prototype.showWithInputOutput_=function(t){var n=t.getSourceBlock();t=t.getLocation().getOffsetInBlock(),this.positionCircle_(t.x,t.y),this.setParent_(n),this.showCurrent_()},e.zelos.MarkerSvg.prototype.showWithOutput_=function(t){this.showWithInputOutput_(t)},e.zelos.MarkerSvg.prototype.showWithInput_=function(t){this.showWithInputOutput_(t)},e.zelos.MarkerSvg.prototype.showWithBlock_=function(t){var n=(t=t.getLocation()).getHeightWidth();this.positionRect_(0,0,n.width,n.height),this.setParent_(t),this.showCurrent_()},e.zelos.MarkerSvg.prototype.positionCircle_=function(t,n){this.markerCircle_.setAttribute("cx",t),this.markerCircle_.setAttribute("cy",n),this.currentMarkerSvg=this.markerCircle_},e.zelos.MarkerSvg.prototype.hide=function(){e.zelos.MarkerSvg.superClass_.hide.call(this),this.markerCircle_.style.display="none"},e.zelos.MarkerSvg.prototype.createDomInternal_=function(){if(e.zelos.MarkerSvg.superClass_.createDomInternal_.call(this),this.markerCircle_=e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{r:this.constants_.CURSOR_RADIUS,style:"display: none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var t=this.getBlinkProperties_();e.utils.dom.createSvgElement(e.utils.Svg.ANIMATE,t,this.markerCircle_)}return this.markerSvg_},e.zelos.MarkerSvg.prototype.applyColour_=function(t){e.zelos.MarkerSvg.superClass_.applyColour_.call(this,t),this.markerCircle_.setAttribute("fill",this.colour_),this.markerCircle_.setAttribute("stroke",this.colour_),this.isCursor()&&this.markerCircle_.firstChild.setAttribute("values",this.colour_+";transparent;transparent;")},e.zelos.PathObject=function(t,n,r){e.zelos.PathObject.superClass_.constructor.call(this,t,n,r),this.constants=r,this.svgPathSelected_=null,this.outlines_=Object.create(null),this.outputShapeType=this.remainingOutlines_=null},e.utils.object.inherits(e.zelos.PathObject,e.blockRendering.PathObject),e.zelos.PathObject.prototype.setPath=function(t){e.zelos.PathObject.superClass_.setPath.call(this,t),this.svgPathSelected_&&this.svgPathSelected_.setAttribute("d",t)},e.zelos.PathObject.prototype.applyColour=function(t){for(var n in e.zelos.PathObject.superClass_.applyColour.call(this,t),t.isShadow()&&t.getParent()&&this.svgPath.setAttribute("stroke",t.getParent().style.colourTertiary),this.outlines_)this.outlines_[n].setAttribute("fill",this.style.colourTertiary)},e.zelos.PathObject.prototype.flipRTL=function(){for(var t in e.zelos.PathObject.superClass_.flipRTL.call(this),this.outlines_)this.outlines_[t].setAttribute("transform","scale(-1 1)")},e.zelos.PathObject.prototype.updateSelected=function(t){this.setClass_("blocklySelected",t),t?this.svgPathSelected_||(this.svgPathSelected_=this.svgPath.cloneNode(!0),this.svgPathSelected_.setAttribute("fill","none"),this.svgPathSelected_.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected_)):this.svgPathSelected_&&(this.svgRoot.removeChild(this.svgPathSelected_),this.svgPathSelected_=null)},e.zelos.PathObject.prototype.updateReplacementFade=function(t){this.setClass_("blocklyReplaceable",t),t?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")},e.zelos.PathObject.prototype.updateShapeForInputHighlight=function(t,n){t=t.getParentInput().name,(t=this.getOutlinePath_(t))&&(n?t.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):t.removeAttribute("filter"))},e.zelos.PathObject.prototype.beginDrawing=function(){for(var t in this.remainingOutlines_=Object.create(null),this.outlines_)this.remainingOutlines_[t]=1},e.zelos.PathObject.prototype.endDrawing=function(){if(this.remainingOutlines_)for(var t in this.remainingOutlines_)this.removeOutlinePath_(t);this.remainingOutlines_=null},e.zelos.PathObject.prototype.setOutlinePath=function(t,n){(t=this.getOutlinePath_(t)).setAttribute("d",n),t.setAttribute("fill",this.style.colourTertiary)},e.zelos.PathObject.prototype.getOutlinePath_=function(t){return this.outlines_[t]||(this.outlines_[t]=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines_&&delete this.remainingOutlines_[t],this.outlines_[t]},e.zelos.PathObject.prototype.removeOutlinePath_=function(t){this.outlines_[t].parentNode.removeChild(this.outlines_[t]),delete this.outlines_[t]},e.zelos.Renderer=function(t){e.zelos.Renderer.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.zelos.Renderer,e.blockRendering.Renderer),e.zelos.Renderer.prototype.makeConstants_=function(){return new e.zelos.ConstantProvider},e.zelos.Renderer.prototype.makeRenderInfo_=function(t){return new e.zelos.RenderInfo(this,t)},e.zelos.Renderer.prototype.makeDrawer_=function(t,n){return new e.zelos.Drawer(t,n)},e.zelos.Renderer.prototype.makeMarkerDrawer=function(t,n){return new e.zelos.MarkerSvg(t,this.getConstants(),n)},e.zelos.Renderer.prototype.makePathObject=function(t,n){return new e.zelos.PathObject(t,n,this.getConstants())},e.zelos.Renderer.prototype.shouldHighlightConnection=function(t){return t.type!=e.connectionTypes.INPUT_VALUE&&t.type!==e.connectionTypes.OUTPUT_VALUE},e.zelos.Renderer.prototype.getConnectionPreviewMethod=function(t,n,r){return n.type==e.connectionTypes.OUTPUT_VALUE?t.isConnected()?e.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:e.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:e.zelos.Renderer.superClass_.getConnectionPreviewMethod(t,n,r)},e.blockRendering.register("zelos",e.zelos.Renderer),e.Themes.Dark=e.Theme.defineTheme("dark",{base:e.Themes.Classic,componentStyles:{workspaceBackgroundColour:"#1e1e1e",toolboxBackgroundColour:"blackBackground",toolboxForegroundColour:"#fff",flyoutBackgroundColour:"#252526",flyoutForegroundColour:"#ccc",flyoutOpacity:1,scrollbarColour:"#797979",insertionMarkerColour:"#fff",insertionMarkerOpacity:.3,scrollbarOpacity:.4,cursorColour:"#d0d0d0",blackBackground:"#333"}}),e.Themes.Deuteranopia={},e.Themes.Deuteranopia.defaultBlockStyles={colour_blocks:{colourPrimary:"#f2a72c",colourSecondary:"#f1c172",colourTertiary:"#da921c"},list_blocks:{colourPrimary:"#7d65ab",colourSecondary:"#a88be0",colourTertiary:"#66518e"},logic_blocks:{colourPrimary:"#9fd2f1",colourSecondary:"#c0e0f4",colourTertiary:"#74bae5"},loop_blocks:{colourPrimary:"#795a07",colourSecondary:"#ac8726",colourTertiary:"#c4a03f"},math_blocks:{colourPrimary:"#e6da39",colourSecondary:"#f3ec8e",colourTertiary:"#f2eeb7"},procedure_blocks:{colourPrimary:"#590721",colourSecondary:"#8c475d",colourTertiary:"#885464"},text_blocks:{colourPrimary:"#058863",colourSecondary:"#5ecfaf",colourTertiary:"#04684c"},variable_blocks:{colourPrimary:"#47025a",colourSecondary:"#820fa1",colourTertiary:"#8e579d"},variable_dynamic_blocks:{colourPrimary:"#47025a",colourSecondary:"#820fa1",colourTertiary:"#8e579d"}},e.Themes.Deuteranopia.categoryStyles={colour_category:{colour:"#f2a72c"},list_category:{colour:"#7d65ab"},logic_category:{colour:"#9fd2f1"},loop_category:{colour:"#795a07"},math_category:{colour:"#e6da39"},procedure_category:{colour:"#590721"},text_category:{colour:"#058863"},variable_category:{colour:"#47025a"},variable_dynamic_category:{colour:"#47025a"}},e.Themes.Deuteranopia=new e.Theme("deuteranopia",e.Themes.Deuteranopia.defaultBlockStyles,e.Themes.Deuteranopia.categoryStyles),e.Themes.HighContrast={},e.Themes.HighContrast.defaultBlockStyles={colour_blocks:{colourPrimary:"#a52714",colourSecondary:"#FB9B8C",colourTertiary:"#FBE1DD"},list_blocks:{colourPrimary:"#4a148c",colourSecondary:"#AD7BE9",colourTertiary:"#CDB6E9"},logic_blocks:{colourPrimary:"#01579b",colourSecondary:"#64C7FF",colourTertiary:"#C5EAFF"},loop_blocks:{colourPrimary:"#33691e",colourSecondary:"#9AFF78",colourTertiary:"#E1FFD7"},math_blocks:{colourPrimary:"#1a237e",colourSecondary:"#8A9EFF",colourTertiary:"#DCE2FF"},procedure_blocks:{colourPrimary:"#006064",colourSecondary:"#77E6EE",colourTertiary:"#CFECEE"},text_blocks:{colourPrimary:"#004d40",colourSecondary:"#5ae27c",colourTertiary:"#D2FFDD"},variable_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},variable_dynamic_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},hat_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB",hat:"cap"}},e.Themes.HighContrast.categoryStyles={colour_category:{colour:"#a52714"},list_category:{colour:"#4a148c"},logic_category:{colour:"#01579b"},loop_category:{colour:"#33691e"},math_category:{colour:"#1a237e"},procedure_category:{colour:"#006064"},text_category:{colour:"#004d40"},variable_category:{colour:"#880e4f"},variable_dynamic_category:{colour:"#880e4f"}},e.Themes.HighContrast=new e.Theme("highcontrast",e.Themes.HighContrast.defaultBlockStyles,e.Themes.HighContrast.categoryStyles),e.Themes.HighContrast.setComponentStyle("selectedGlowColour","#000000"),e.Themes.HighContrast.setComponentStyle("selectedGlowSize",1),e.Themes.HighContrast.setComponentStyle("replacementGlowColour","#000000"),e.Themes.HighContrast.setFontStyle({family:null,weight:null,size:16}),e.Themes.Tritanopia={},e.Themes.Tritanopia.defaultBlockStyles={colour_blocks:{colourPrimary:"#05427f",colourSecondary:"#2974c0",colourTertiary:"#2d74bb"},list_blocks:{colourPrimary:"#b69ce8",colourSecondary:"#ccbaef",colourTertiary:"#9176c5"},logic_blocks:{colourPrimary:"#9fd2f1",colourSecondary:"#c0e0f4",colourTertiary:"#74bae5"},loop_blocks:{colourPrimary:"#aa1846",colourSecondary:"#d36185",colourTertiary:"#7c1636"},math_blocks:{colourPrimary:"#e6da39",colourSecondary:"#f3ec8e",colourTertiary:"#f2eeb7"},procedure_blocks:{colourPrimary:"#590721",colourSecondary:"#8c475d",colourTertiary:"#885464"},text_blocks:{colourPrimary:"#058863",colourSecondary:"#5ecfaf",colourTertiary:"#04684c"},variable_blocks:{colourPrimary:"#4b2d84",colourSecondary:"#816ea7",colourTertiary:"#83759e"},variable_dynamic_blocks:{colourPrimary:"#4b2d84",colourSecondary:"#816ea7",colourTertiary:"#83759e"}},e.Themes.Tritanopia.categoryStyles={colour_category:{colour:"#05427f"},list_category:{colour:"#b69ce8"},logic_category:{colour:"#9fd2f1"},loop_category:{colour:"#aa1846"},math_category:{colour:"#e6da39"},procedure_category:{colour:"#590721"},text_category:{colour:"#058863"},variable_category:{colour:"#4b2d84"},variable_dynamic_category:{colour:"#4b2d84"}},e.Themes.Tritanopia=new e.Theme("tritanopia",e.Themes.Tritanopia.defaultBlockStyles,e.Themes.Tritanopia.categoryStyles),e.requires={},e}.apply($,[]))&&(U.exports=_)},18783:function(U,$,m){var _,e;_=[m(55484)],void 0!==(e=function(t){"use strict";return t.Blocks={},t.Blocks}.apply($,_))&&(U.exports=e)},55484:function(U,$,m){var _,e;_=[m(81069)],void 0!==(e=function(t){"use strict";return t.Blocks.colour={},t.Constants={},t.Constants.Colour={},t.Constants.Colour.HUE=20,t.defineBlocksWithJsonArray([{type:"colour_picker",message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"colour_random",message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"},{type:"colour_rgb",message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"RIGHT"},{type:"input_value",name:"GREEN",check:"Number",align:"RIGHT"},{type:"input_value",name:"BLUE",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"},{type:"colour_blend",message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"RIGHT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"RIGHT"},{type:"input_value",name:"RATIO",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"}]),t.Constants.Lists={},t.Constants.Lists.HUE=260,t.defineBlocksWithJsonArray([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),t.Blocks.lists_create_with={init:function(){this.setHelpUrl(t.Msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new t.Mutator(["lists_create_with_item"])),this.setTooltip(t.Msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("items",this.itemCount_),n},domToMutation:function(n){this.itemCount_=parseInt(n.getAttribute("items"),10),this.updateShape_()},decompose:function(n){var r=n.newBlock("lists_create_with_container");r.initSvg();for(var s=r.getInput("STACK").connection,u=0;u<this.itemCount_;u++){var b=n.newBlock("lists_create_with_item");b.initSvg(),s.connect(b.previousConnection),s=b.nextConnection}return r},compose:function(n){var r=n.getInputTargetBlock("STACK");for(n=[];r&&!r.isInsertionMarker();)n.push(r.valueConnection_),r=r.nextConnection&&r.nextConnection.targetBlock();for(r=0;r<this.itemCount_;r++){var s=this.getInput("ADD"+r).connection.targetConnection;s&&-1==n.indexOf(s)&&s.disconnect()}for(this.itemCount_=n.length,this.updateShape_(),r=0;r<this.itemCount_;r++)t.Mutator.reconnect(n[r],this,"ADD"+r)},saveConnections:function(n){n=n.getInputTargetBlock("STACK");for(var r=0;n;){var s=this.getInput("ADD"+r);n.valueConnection_=s&&s.connection.targetConnection,r++,n=n.nextConnection&&n.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(t.Msg.LISTS_CREATE_EMPTY_TITLE);for(var n=0;n<this.itemCount_;n++)if(!this.getInput("ADD"+n)){var r=this.appendValueInput("ADD"+n).setAlign(t.ALIGN_RIGHT);0==n&&r.appendField(t.Msg.LISTS_CREATE_WITH_INPUT_WITH)}for(;this.getInput("ADD"+n);)this.removeInput("ADD"+n),n++}},t.Blocks.lists_create_with_container={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(t.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(t.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}},t.Blocks.lists_create_with_item={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(t.Msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(t.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}},t.Blocks.lists_indexOf={init:function(){var n=[[t.Msg.LISTS_INDEX_OF_FIRST,"FIRST"],[t.Msg.LISTS_INDEX_OF_LAST,"LAST"]];this.setHelpUrl(t.Msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(t.Msg.LISTS_INDEX_OF_INPUT_IN_LIST),this.appendValueInput("FIND").appendField(new t.FieldDropdown(n),"END"),this.setInputsInline(!0);var r=this;this.setTooltip(function(){return t.Msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",r.workspace.options.oneBasedIndex?"0":"-1")})}},t.Blocks.lists_getIndex={init:function(){var n=[[t.Msg.LISTS_GET_INDEX_GET,"GET"],[t.Msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[t.Msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[t.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[t.Msg.LISTS_GET_INDEX_LAST,"LAST"],[t.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(t.Msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),n=new t.FieldDropdown(n,function(s){s="REMOVE"==s,this.getSourceBlock().updateStatement_(s)}),this.appendValueInput("VALUE").setCheck("Array").appendField(t.Msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(n,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),t.Msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(t.Msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0);var r=this;this.setTooltip(function(){var s=r.getFieldValue("MODE"),u=r.getFieldValue("WHERE"),b="";switch(s+" "+u){case"GET FROM_START":case"GET FROM_END":b=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":b=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":b=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":b=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":b=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":b=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":b=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":b=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":b=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":b=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":b=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":b=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return("FROM_START"==u||"FROM_END"==u)&&(b+="  "+("FROM_START"==u?t.Msg.LISTS_INDEX_FROM_START_TOOLTIP:t.Msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",r.workspace.options.oneBasedIndex?"#1":"#0")),b})},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");n.setAttribute("statement",!this.outputConnection);var r=this.getInput("AT").type==t.INPUT_VALUE;return n.setAttribute("at",r),n},domToMutation:function(n){var r="true"==n.getAttribute("statement");this.updateStatement_(r),n="false"!=n.getAttribute("at"),this.updateAt_(n)},updateStatement_:function(n){n!=!this.outputConnection&&(this.unplug(!0,!0),n?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(n){this.removeInput("AT"),this.removeInput("ORDINAL",!0),n?(this.appendValueInput("AT").setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var r=new t.FieldDropdown(this.WHERE_OPTIONS,function(s){var u="FROM_START"==s||"FROM_END"==s;if(u!=n){var b=this.getSourceBlock();return b.updateAt_(u),b.setFieldValue(s,"WHERE"),null}});this.getInput("AT").appendField(r,"WHERE"),t.Msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}},t.Blocks.lists_setIndex={init:function(){var n=[[t.Msg.LISTS_SET_INDEX_SET,"SET"],[t.Msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[t.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[t.Msg.LISTS_GET_INDEX_LAST,"LAST"],[t.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(t.Msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(t.Msg.LISTS_SET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(new t.FieldDropdown(n),"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(t.Msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(t.Msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0);var r=this;this.setTooltip(function(){var s=r.getFieldValue("MODE"),u=r.getFieldValue("WHERE"),b="";switch(s+" "+u){case"SET FROM_START":case"SET FROM_END":b=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":b=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":b=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":b=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":b=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":b=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":b=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":b=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return("FROM_START"==u||"FROM_END"==u)&&(b+="  "+t.Msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",r.workspace.options.oneBasedIndex?"#1":"#0")),b})},mutationToDom:function(){var n=t.utils.xml.createElement("mutation"),r=this.getInput("AT").type==t.INPUT_VALUE;return n.setAttribute("at",r),n},domToMutation:function(n){n="false"!=n.getAttribute("at"),this.updateAt_(n)},updateAt_:function(n){this.removeInput("AT"),this.removeInput("ORDINAL",!0),n?(this.appendValueInput("AT").setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var r=new t.FieldDropdown(this.WHERE_OPTIONS,function(s){var u="FROM_START"==s||"FROM_END"==s;if(u!=n){var b=this.getSourceBlock();return b.updateAt_(u),b.setFieldValue(s,"WHERE"),null}});this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO"),this.getInput("AT").appendField(r,"WHERE")}},t.Blocks.lists_getSublist={init:function(){this.WHERE_OPTIONS_1=[[t.Msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[t.Msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(t.Msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(t.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),t.Msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(t.Msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(t.Msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){var n=t.utils.xml.createElement("mutation"),r=this.getInput("AT1").type==t.INPUT_VALUE;return n.setAttribute("at1",r),r=this.getInput("AT2").type==t.INPUT_VALUE,n.setAttribute("at2",r),n},domToMutation:function(n){var r="true"==n.getAttribute("at1");n="true"==n.getAttribute("at2"),this.updateAt_(1,r),this.updateAt_(2,n)},updateAt_:function(n,r){this.removeInput("AT"+n),this.removeInput("ORDINAL"+n,!0),r?(this.appendValueInput("AT"+n).setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+n).appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+n);var s=new t.FieldDropdown(this["WHERE_OPTIONS_"+n],function(u){var b="FROM_START"==u||"FROM_END"==u;if(b!=r){var x=this.getSourceBlock();return x.updateAt_(n,b),x.setFieldValue(u,"WHERE"+n),null}});this.getInput("AT"+n).appendField(s,"WHERE"+n),1==n&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2")),t.Msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}},t.Blocks.lists_sort={init:function(){this.jsonInit({message0:t.Msg.LISTS_SORT_TITLE,args0:[{type:"field_dropdown",name:"TYPE",options:[[t.Msg.LISTS_SORT_TYPE_NUMERIC,"NUMERIC"],[t.Msg.LISTS_SORT_TYPE_TEXT,"TEXT"],[t.Msg.LISTS_SORT_TYPE_IGNORECASE,"IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[[t.Msg.LISTS_SORT_ORDER_ASCENDING,"1"],[t.Msg.LISTS_SORT_ORDER_DESCENDING,"-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:t.Msg.LISTS_SORT_TOOLTIP,helpUrl:t.Msg.LISTS_SORT_HELPURL})}},t.Blocks.lists_split={init:function(){var n=this,r=new t.FieldDropdown([[t.Msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[t.Msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]],function(s){n.updateType_(s)});this.setHelpUrl(t.Msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(r,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(t.Msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(function(){var s=n.getFieldValue("MODE");if("SPLIT"==s)return t.Msg.LISTS_SPLIT_TOOLTIP_SPLIT;if("JOIN"==s)return t.Msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+s)})},updateType_:function(n){if(this.getFieldValue("MODE")!=n){var r=this.getInput("INPUT").connection;r.setShadowDom(null);var s=r.targetBlock();s&&(r.disconnect(),s.isShadow()?s.dispose():this.bumpNeighbours())}"SPLIT"==n?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("mode",this.getFieldValue("MODE")),n},domToMutation:function(n){this.updateType_(n.getAttribute("mode"))}},t.Blocks.logic={},t.Constants.Logic={},t.Constants.Logic.HUE=210,t.defineBlocksWithJsonArray([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["\u2260","NEQ"],["\u200f<","LT"],["\u200f\u2264","LTE"],["\u200f>","GT"],["\u200f\u2265","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]}]),t.defineBlocksWithJsonArray([{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]),t.Constants.Logic.TOOLTIPS_BY_OP={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"},t.Extensions.register("logic_op_tooltip",t.Extensions.buildTooltipForDropdown("OP",t.Constants.Logic.TOOLTIPS_BY_OP)),t.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN={elseifCount_:0,elseCount_:0,suppressPrefixSuffix:!0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;var n=t.utils.xml.createElement("mutation");return this.elseifCount_&&n.setAttribute("elseif",this.elseifCount_),this.elseCount_&&n.setAttribute("else",1),n},domToMutation:function(n){this.elseifCount_=parseInt(n.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(n.getAttribute("else"),10)||0,this.rebuildShape_()},decompose:function(n){var r=n.newBlock("controls_if_if");r.initSvg();for(var s=r.nextConnection,u=1;u<=this.elseifCount_;u++){var b=n.newBlock("controls_if_elseif");b.initSvg(),s.connect(b.previousConnection),s=b.nextConnection}return this.elseCount_&&((n=n.newBlock("controls_if_else")).initSvg(),s.connect(n.previousConnection)),r},compose:function(n){n=n.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;for(var r=[null],s=[null],u=null;n&&!n.isInsertionMarker();){switch(n.type){case"controls_if_elseif":this.elseifCount_++,r.push(n.valueConnection_),s.push(n.statementConnection_);break;case"controls_if_else":this.elseCount_++,u=n.statementConnection_;break;default:throw TypeError("Unknown block type: "+n.type)}n=n.nextConnection&&n.nextConnection.targetBlock()}this.updateShape_(),this.reconnectChildBlocks_(r,s,u)},saveConnections:function(n){n=n.nextConnection.targetBlock();for(var r=1;n;){switch(n.type){case"controls_if_elseif":var s=this.getInput("IF"+r),u=this.getInput("DO"+r);n.valueConnection_=s&&s.connection.targetConnection,n.statementConnection_=u&&u.connection.targetConnection,r++;break;case"controls_if_else":u=this.getInput("ELSE"),n.statementConnection_=u&&u.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+n.type)}n=n.nextConnection&&n.nextConnection.targetBlock()}},rebuildShape_:function(){var n=[null],r=[null],s=null;this.getInput("ELSE")&&(s=this.getInput("ELSE").connection.targetConnection);for(var u=1;this.getInput("IF"+u);){var b=this.getInput("IF"+u),x=this.getInput("DO"+u);n.push(b.connection.targetConnection),r.push(x.connection.targetConnection),u++}this.updateShape_(),this.reconnectChildBlocks_(n,r,s)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var n=1;this.getInput("IF"+n);)this.removeInput("IF"+n),this.removeInput("DO"+n),n++;for(n=1;n<=this.elseifCount_;n++)this.appendValueInput("IF"+n).setCheck("Boolean").appendField(t.Msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+n).appendField(t.Msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(t.Msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(n,r,s){for(var u=1;u<=this.elseifCount_;u++)t.Mutator.reconnect(n[u],this,"IF"+u),t.Mutator.reconnect(r[u],this,"DO"+u);t.Mutator.reconnect(s,this,"ELSE")}},t.Extensions.registerMutator("controls_if_mutator",t.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN,null,["controls_if_elseif","controls_if_else"]),t.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION=function(){this.setTooltip(function(){return this.elseifCount_||this.elseCount_?!this.elseifCount_&&this.elseCount_?t.Msg.CONTROLS_IF_TOOLTIP_2:this.elseifCount_&&!this.elseCount_?t.Msg.CONTROLS_IF_TOOLTIP_3:this.elseifCount_&&this.elseCount_?t.Msg.CONTROLS_IF_TOOLTIP_4:"":t.Msg.CONTROLS_IF_TOOLTIP_1}.bind(this))},t.Extensions.register("controls_if_tooltip",t.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION),t.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN={onchange:function(n){this.prevBlocks_||(this.prevBlocks_=[null,null]);var r=this.getInputTargetBlock("A"),s=this.getInputTargetBlock("B");r&&s&&!this.workspace.connectionChecker.doTypeChecks(r.outputConnection,s.outputConnection)&&(t.Events.setGroup(n.group),(n=this.prevBlocks_[0])!==r&&(r.unplug(),!n||n.isDisposed()||n.isShadow()||this.getInput("A").connection.connect(n.outputConnection)),(r=this.prevBlocks_[1])!==s&&(s.unplug(),!r||r.isDisposed()||r.isShadow()||this.getInput("B").connection.connect(r.outputConnection)),this.bumpNeighbours(),t.Events.setGroup(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},t.Constants.Logic.LOGIC_COMPARE_EXTENSION=function(){this.mixin(t.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN)},t.Extensions.register("logic_compare",t.Constants.Logic.LOGIC_COMPARE_EXTENSION),t.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN={prevParentConnection_:null,onchange:function(n){var r=this.getInputTargetBlock("THEN"),s=this.getInputTargetBlock("ELSE"),u=this.outputConnection.targetConnection;if((r||s)&&u)for(var b=0;2>b;b++){var x=1==b?r:s;x&&!x.workspace.connectionChecker.doTypeChecks(x.outputConnection,u)&&(t.Events.setGroup(n.group),u===this.prevParentConnection_?(this.unplug(),u.getSourceBlock().bumpNeighbours()):(x.unplug(),x.bumpNeighbours()),t.Events.setGroup(!1))}this.prevParentConnection_=u}},t.Extensions.registerMixin("logic_ternary",t.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN),t.Blocks.loops={},t.Constants.Loops={},t.Constants.Loops.HUE=120,t.defineBlocksWithJsonArray([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]),t.Constants.Loops.WHILE_UNTIL_TOOLTIPS={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"},t.Extensions.register("controls_whileUntil_tooltip",t.Extensions.buildTooltipForDropdown("MODE",t.Constants.Loops.WHILE_UNTIL_TOOLTIPS)),t.Constants.Loops.BREAK_CONTINUE_TOOLTIPS={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"},t.Extensions.register("controls_flow_tooltip",t.Extensions.buildTooltipForDropdown("FLOW",t.Constants.Loops.BREAK_CONTINUE_TOOLTIPS)),t.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN={customContextMenu:function(n){if(!this.isInFlyout){var r=this.getField("VAR").getVariable(),s=r.name;if(!this.isCollapsed()&&null!=s){var u={enabled:!0};u.text=t.Msg.VARIABLES_SET_CREATE_GET.replace("%1",s),r=t.Variables.generateVariableFieldDom(r),(s=t.utils.xml.createElement("block")).setAttribute("type","variables_get"),s.appendChild(r),u.callback=t.ContextMenu.callbackFactory(this,s),n.push(u)}}}},t.Extensions.registerMixin("contextMenu_newGetVariableBlock",t.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN),t.Extensions.register("controls_for_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),t.Extensions.register("controls_forEach_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR")),t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN={LOOP_TYPES:["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"],suppressPrefixSuffix:!0,getSurroundLoop:function(n){do{if(-1!=t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.LOOP_TYPES.indexOf(n.type))return n;n=n.getSurroundParent()}while(n);return null},onchange:function(n){if(this.workspace.isDragging&&!this.workspace.isDragging()&&n.type==t.Events.BLOCK_MOVE){var r=t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(this);if(this.setWarningText(r?null:t.Msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout){var s=t.Events.getGroup();t.Events.setGroup(n.group),this.setEnabled(r),t.Events.setGroup(s)}}}},t.Extensions.registerMixin("controls_flow_in_loop_check",t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN),t.Blocks.math={},t.Constants.Math={},t.Constants.Math.HUE=230,t.defineBlocksWithJsonArray([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["\u03c0","PI"],["e","E"],["\u03c6","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(\xbd)","SQRT1_2"],["\u221e","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]),t.Constants.Math.TOOLTIPS_BY_OP={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"},t.Extensions.register("math_op_tooltip",t.Extensions.buildTooltipForDropdown("OP",t.Constants.Math.TOOLTIPS_BY_OP)),t.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN={mutationToDom:function(){var n=t.utils.xml.createElement("mutation"),r="DIVISIBLE_BY"==this.getFieldValue("PROPERTY");return n.setAttribute("divisor_input",r),n},domToMutation:function(n){n="true"==n.getAttribute("divisor_input"),this.updateShape_(n)},updateShape_:function(n){var r=this.getInput("DIVISOR");n?r||this.appendValueInput("DIVISOR").setCheck("Number"):r&&this.removeInput("DIVISOR")}},t.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION=function(){this.getField("PROPERTY").setValidator(function(n){n="DIVISIBLE_BY"==n,this.getSourceBlock().updateShape_(n)})},t.Extensions.registerMutator("math_is_divisibleby_mutator",t.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN,t.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION),t.Extensions.register("math_change_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_MATH_CHANGE_TOOLTIP}","VAR")),t.Constants.Math.LIST_MODES_MUTATOR_MIXIN={updateType_:function(n){this.outputConnection.setCheck("MODE"==n?"Array":"Number")},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("op",this.getFieldValue("OP")),n},domToMutation:function(n){this.updateType_(n.getAttribute("op"))}},t.Constants.Math.LIST_MODES_MUTATOR_EXTENSION=function(){this.getField("OP").setValidator(function(n){this.updateType_(n)}.bind(this))},t.Extensions.registerMutator("math_modes_of_list_mutator",t.Constants.Math.LIST_MODES_MUTATOR_MIXIN,t.Constants.Math.LIST_MODES_MUTATOR_EXTENSION),t.Blocks.procedures={},t.Blocks.procedures_defnoreturn={init:function(){var n=t.Procedures.findLegalName("",this);(n=new t.FieldTextInput(n,t.Procedures.rename)).setSpellcheck(!1),this.appendDummyInput().appendField(t.Msg.PROCEDURES_DEFNORETURN_TITLE).appendField(n,"NAME").appendField("","PARAMS"),this.setMutator(new t.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&t.Msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(t.Msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(t.Msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:function(n){this.hasStatements_!==n&&(n?(this.appendStatementInput("STACK").appendField(t.Msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=n)},updateParams_:function(){var n="";this.arguments_.length&&(n=t.Msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),t.Events.disable();try{this.setFieldValue(n,"PARAMS")}finally{t.Events.enable()}},mutationToDom:function(n){var r=t.utils.xml.createElement("mutation");n&&r.setAttribute("name",this.getFieldValue("NAME"));for(var s=0;s<this.argumentVarModels_.length;s++){var u=t.utils.xml.createElement("arg"),b=this.argumentVarModels_[s];u.setAttribute("name",b.name),u.setAttribute("varid",b.getId()),n&&this.paramIds_&&u.setAttribute("paramId",this.paramIds_[s]),r.appendChild(u)}return this.hasStatements_||r.setAttribute("statements","false"),r},domToMutation:function(n){this.arguments_=[],this.argumentVarModels_=[];for(var s,r=0;s=n.childNodes[r];r++)if("arg"==s.nodeName.toLowerCase()){var u=s.getAttribute("name");s=s.getAttribute("varid")||s.getAttribute("varId"),this.arguments_.push(u),null!=(s=t.Variables.getOrCreateVariablePackage(this.workspace,s,u,""))?this.argumentVarModels_.push(s):console.log("Failed to create a variable with name "+u+", ignoring.")}this.updateParams_(),t.Procedures.mutateCallers(this),this.setStatements_("false"!==n.getAttribute("statements"))},decompose:function(n){var r=t.utils.xml.createElement("block");r.setAttribute("type","procedures_mutatorcontainer");var s=t.utils.xml.createElement("statement");s.setAttribute("name","STACK"),r.appendChild(s);for(var u=0;u<this.arguments_.length;u++){var b=t.utils.xml.createElement("block");b.setAttribute("type","procedures_mutatorarg");var x=t.utils.xml.createElement("field");x.setAttribute("name","NAME");var B=t.utils.xml.createTextNode(this.arguments_[u]);x.appendChild(B),b.appendChild(x),x=t.utils.xml.createElement("next"),b.appendChild(x),s.appendChild(b),s=x}return n=t.Xml.domToBlock(r,n),"procedures_defreturn"==this.type?n.setFieldValue(this.hasStatements_,"STATEMENTS"):n.removeInput("STATEMENT_INPUT"),t.Procedures.mutateCallers(this),n},compose:function(n){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];for(var r=n.getInputTargetBlock("STACK");r&&!r.isInsertionMarker();){var s=r.getFieldValue("NAME");this.arguments_.push(s),s=this.workspace.getVariable(s,""),this.argumentVarModels_.push(s),this.paramIds_.push(r.id),r=r.nextConnection&&r.nextConnection.targetBlock()}this.updateParams_(),t.Procedures.mutateCallers(this),null!==(n=n.getFieldValue("STATEMENTS"))&&this.hasStatements_!=(n="TRUE"==n)&&(n?(this.setStatements_(!0),t.Mutator.reconnect(this.statementConnection_,this,"STACK"),this.statementConnection_=null):(n=this.getInput("STACK").connection,(this.statementConnection_=n.targetConnection)&&((n=n.targetBlock()).unplug(),n.bumpNeighbours()),this.setStatements_(!1)))},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(n,r){var s=this.workspace.getVariableById(n);if(""==s.type){s=s.name,r=this.workspace.getVariableById(r);for(var u=!1,b=0;b<this.argumentVarModels_.length;b++)this.argumentVarModels_[b].getId()==n&&(this.arguments_[b]=r.name,this.argumentVarModels_[b]=r,u=!0);u&&(this.displayRenamedVar_(s,r.name),t.Procedures.mutateCallers(this))}},updateVarName:function(n){for(var r=n.name,s=!1,u=0;u<this.argumentVarModels_.length;u++)if(this.argumentVarModels_[u].getId()==n.getId()){var b=this.arguments_[u];this.arguments_[u]=r,s=!0}s&&(this.displayRenamedVar_(b,r),t.Procedures.mutateCallers(this))},displayRenamedVar_:function(n,r){if(this.updateParams_(),this.mutator&&this.mutator.isVisible())for(var b,s=this.mutator.workspace_.getAllBlocks(!1),u=0;b=s[u];u++)"procedures_mutatorarg"==b.type&&t.Names.equals(n,b.getFieldValue("NAME"))&&b.setFieldValue(r,"NAME")},customContextMenu:function(n){if(!this.isInFlyout){var r={enabled:!0},s=this.getFieldValue("NAME");r.text=t.Msg.PROCEDURES_CREATE_DO.replace("%1",s);var u=t.utils.xml.createElement("mutation");for(u.setAttribute("name",s),s=0;s<this.arguments_.length;s++){var b=t.utils.xml.createElement("arg");b.setAttribute("name",this.arguments_[s]),u.appendChild(b)}if((s=t.utils.xml.createElement("block")).setAttribute("type",this.callType_),s.appendChild(u),r.callback=t.ContextMenu.callbackFactory(this,s),n.push(r),!this.isCollapsed())for(s=0;s<this.argumentVarModels_.length;s++)(r={enabled:!0}).text=t.Msg.VARIABLES_SET_CREATE_GET.replace("%1",(u=this.argumentVarModels_[s]).name),u=t.Variables.generateVariableFieldDom(u),(b=t.utils.xml.createElement("block")).setAttribute("type","variables_get"),b.appendChild(u),r.callback=t.ContextMenu.callbackFactory(this,b),n.push(r)}},callType_:"procedures_callnoreturn"},t.Blocks.procedures_defreturn={init:function(){var n=t.Procedures.findLegalName("",this);(n=new t.FieldTextInput(n,t.Procedures.rename)).setSpellcheck(!1),this.appendDummyInput().appendField(t.Msg.PROCEDURES_DEFRETURN_TITLE).appendField(n,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(t.ALIGN_RIGHT).appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new t.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&t.Msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(t.Msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(t.Msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:t.Blocks.procedures_defnoreturn.setStatements_,updateParams_:t.Blocks.procedures_defnoreturn.updateParams_,mutationToDom:t.Blocks.procedures_defnoreturn.mutationToDom,domToMutation:t.Blocks.procedures_defnoreturn.domToMutation,decompose:t.Blocks.procedures_defnoreturn.decompose,compose:t.Blocks.procedures_defnoreturn.compose,getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},getVars:t.Blocks.procedures_defnoreturn.getVars,getVarModels:t.Blocks.procedures_defnoreturn.getVarModels,renameVarById:t.Blocks.procedures_defnoreturn.renameVarById,updateVarName:t.Blocks.procedures_defnoreturn.updateVarName,displayRenamedVar_:t.Blocks.procedures_defnoreturn.displayRenamedVar_,customContextMenu:t.Blocks.procedures_defnoreturn.customContextMenu,callType_:"procedures_callreturn"},t.Blocks.procedures_mutatorcontainer={init:function(){this.appendDummyInput().appendField(t.Msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(t.Msg.PROCEDURES_ALLOW_STATEMENTS).appendField(new t.FieldCheckbox("TRUE"),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}},t.Blocks.procedures_mutatorarg={init:function(){var n=new t.FieldTextInput(t.Procedures.DEFAULT_ARG,this.validator_);n.oldShowEditorFn_=n.showEditor_,n.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(t.Msg.PROCEDURES_MUTATORARG_TITLE).appendField(n,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,n.onFinishEditing_=this.deleteIntermediateVars_,n.createdVariables_=[],n.onFinishEditing_("x")},validator_:function(n){var r=this.getSourceBlock(),s=t.Mutator.findParentWs(r.workspace);if(!(n=n.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,"")))return null;for(var u=(r.workspace.targetWorkspace||r.workspace).getAllBlocks(!1),b=n.toLowerCase(),x=0;x<u.length;x++)if(u[x].id!=this.getSourceBlock().id){var B=u[x].getFieldValue("NAME");if(B&&B.toLowerCase()==b)return null}return r.isInFlyout||((r=s.getVariable(n,""))&&r.name!=n&&s.renameVariableById(r.getId(),n),r||(r=s.createVariable(n,""))&&this.createdVariables_&&this.createdVariables_.push(r)),n},deleteIntermediateVars_:function(n){var r=t.Mutator.findParentWs(this.getSourceBlock().workspace);if(r)for(var s=0;s<this.createdVariables_.length;s++){var u=this.createdVariables_[s];u.name!=n&&r.deleteVariableById(u.getId())}}},t.Blocks.procedures_callnoreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(t.Msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(n,r){t.Names.equals(n,this.getProcedureCall())&&(this.setFieldValue(r,"NAME"),this.setTooltip((this.outputConnection?t.Msg.PROCEDURES_CALLRETURN_TOOLTIP:t.Msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",r)))},setProcedureParameters_:function(n,r){var s=t.Procedures.getDefinition(this.getProcedureCall(),this.workspace),u=s&&s.mutator&&s.mutator.isVisible();if(u||(this.quarkConnections_={},this.quarkIds_=null),r)if(n.join("\n")==this.arguments_.join("\n"))this.quarkIds_=r;else{if(r.length!=n.length)throw RangeError("paramNames and paramIds must be the same length.");this.setCollapsed(!1),this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]),s=this.rendered,this.rendered=!1;for(var b=0;b<this.arguments_.length;b++){var x=this.getInput("ARG"+b);x&&(this.quarkConnections_[this.quarkIds_[b]]=x=x.connection.targetConnection,u&&x&&-1==r.indexOf(this.quarkIds_[b])&&(x.disconnect(),x.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(n),this.argumentVarModels_=[],b=0;b<this.arguments_.length;b++)n=t.Variables.getOrCreateVariablePackage(this.workspace,null,this.arguments_[b],""),this.argumentVarModels_.push(n);if(this.updateShape_(),this.quarkIds_=r)for(b=0;b<this.arguments_.length;b++)(r=this.quarkIds_[b])in this.quarkConnections_&&(t.Mutator.reconnect(x=this.quarkConnections_[r],this,"ARG"+b)||delete this.quarkConnections_[r]);(this.rendered=s)&&this.render()}},updateShape_:function(){for(var n=0;n<this.arguments_.length;n++){var r=this.getField("ARGNAME"+n);if(r){t.Events.disable();try{r.setValue(this.arguments_[n])}finally{t.Events.enable()}}else r=new t.FieldLabel(this.arguments_[n]),this.appendValueInput("ARG"+n).setAlign(t.ALIGN_RIGHT).appendField(r,"ARGNAME"+n).init()}for(;this.getInput("ARG"+n);)this.removeInput("ARG"+n),n++;(n=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||(n.appendField(t.Msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),n.init()):this.getField("WITH")&&n.removeField("WITH"))},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");n.setAttribute("name",this.getProcedureCall());for(var r=0;r<this.arguments_.length;r++){var s=t.utils.xml.createElement("arg");s.setAttribute("name",this.arguments_[r]),n.appendChild(s)}return n},domToMutation:function(n){var r=n.getAttribute("name");this.renameProcedure(this.getProcedureCall(),r),r=[];for(var b,s=[],u=0;b=n.childNodes[u];u++)"arg"==b.nodeName.toLowerCase()&&(r.push(b.getAttribute("name")),s.push(b.getAttribute("paramId")));this.setProcedureParameters_(r,s)},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(n){if(this.workspace&&!this.workspace.isFlyout&&n.recordUndo)if(n.type==t.Events.BLOCK_CREATE&&-1!=n.ids.indexOf(this.id)){var r=this.getProcedureCall();if(!(r=t.Procedures.getDefinition(r,this.workspace))||r.type==this.defType_&&JSON.stringify(r.getVars())==JSON.stringify(this.arguments_)||(r=null),!r){t.Events.setGroup(n.group),n=t.utils.xml.createElement("xml"),(r=t.utils.xml.createElement("block")).setAttribute("type",this.defType_);var s=this.getRelativeToSurfaceXY(),u=s.y+2*t.SNAP_RADIUS;r.setAttribute("x",s.x+t.SNAP_RADIUS*(this.RTL?-1:1)),r.setAttribute("y",u),s=this.mutationToDom(),r.appendChild(s),(s=t.utils.xml.createElement("field")).setAttribute("name","NAME"),(u=this.getProcedureCall())||(u=t.Procedures.findLegalName("",this),this.renameProcedure("",u)),s.appendChild(t.utils.xml.createTextNode(u)),r.appendChild(s),n.appendChild(r),t.Xml.domToWorkspace(n,this.workspace),t.Events.setGroup(!1)}}else n.type==t.Events.BLOCK_DELETE?(r=this.getProcedureCall(),(r=t.Procedures.getDefinition(r,this.workspace))||(t.Events.setGroup(n.group),this.dispose(!0),t.Events.setGroup(!1))):n.type==t.Events.CHANGE&&"disabled"==n.element&&(r=this.getProcedureCall(),(r=t.Procedures.getDefinition(r,this.workspace))&&r.id==n.blockId&&((r=t.Events.getGroup())&&console.log("Saw an existing group while responding to a definition change"),t.Events.setGroup(n.group),n.newValue?(this.previousEnabledState_=this.isEnabled(),this.setEnabled(!1)):this.setEnabled(this.previousEnabledState_),t.Events.setGroup(r)))},customContextMenu:function(n){if(this.workspace.isMovable()){var r={enabled:!0};r.text=t.Msg.PROCEDURES_HIGHLIGHT_DEF;var s=this.getProcedureCall(),u=this.workspace;r.callback=function(){var b=t.Procedures.getDefinition(s,u);b&&(u.centerOnBlock(b.id),b.select())},n.push(r)}},defType_:"procedures_defnoreturn"},t.Blocks.procedures_callreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(t.Msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},getProcedureCall:t.Blocks.procedures_callnoreturn.getProcedureCall,renameProcedure:t.Blocks.procedures_callnoreturn.renameProcedure,setProcedureParameters_:t.Blocks.procedures_callnoreturn.setProcedureParameters_,updateShape_:t.Blocks.procedures_callnoreturn.updateShape_,mutationToDom:t.Blocks.procedures_callnoreturn.mutationToDom,domToMutation:t.Blocks.procedures_callnoreturn.domToMutation,getVars:t.Blocks.procedures_callnoreturn.getVars,getVarModels:t.Blocks.procedures_callnoreturn.getVarModels,onchange:t.Blocks.procedures_callnoreturn.onchange,customContextMenu:t.Blocks.procedures_callnoreturn.customContextMenu,defType_:"procedures_defreturn"},t.Blocks.procedures_ifreturn={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(t.Msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(t.Msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("value",Number(this.hasReturnValue_)),n},domToMutation:function(n){this.hasReturnValue_=1==n.getAttribute("value"),this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(n){if(this.workspace.isDragging&&!this.workspace.isDragging()){n=!1;var r=this;do{if(-1!=this.FUNCTION_TYPES.indexOf(r.type)){n=!0;break}r=r.getSurroundParent()}while(r);n?("procedures_defnoreturn"==r.type&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):"procedures_defreturn"!=r.type||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null),this.isInFlyout||this.setEnabled(!0)):(this.setWarningText(t.Msg.PROCEDURES_IFRETURN_WARNING),this.isInFlyout||this.getInheritedDisabled()||this.setEnabled(!1))}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]},t.Blocks.texts={},t.Constants.Text={},t.Constants.Text.HUE=160,t.defineBlocksWithJsonArray([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_multiline",message0:"%1 %2",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=",width:12,height:17,alt:"\xb6"},{type:"field_multilinetext",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),t.Blocks.text_getSubstring={init:function(){this.WHERE_OPTIONS_1=[[t.Msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[t.Msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[t.Msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[t.Msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[t.Msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[t.Msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(t.Msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(t.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),t.Msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(t.Msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(t.Msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){var n=t.utils.xml.createElement("mutation"),r=this.getInput("AT1").type==t.INPUT_VALUE;return n.setAttribute("at1",r),r=this.getInput("AT2").type==t.INPUT_VALUE,n.setAttribute("at2",r),n},domToMutation:function(n){var r="true"==n.getAttribute("at1");n="true"==n.getAttribute("at2"),this.updateAt_(1,r),this.updateAt_(2,n)},updateAt_:function(n,r){this.removeInput("AT"+n),this.removeInput("ORDINAL"+n,!0),r?(this.appendValueInput("AT"+n).setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+n).appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+n),2==n&&t.Msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(t.Msg.TEXT_GET_SUBSTRING_TAIL));var s=new t.FieldDropdown(this["WHERE_OPTIONS_"+n],function(u){var b="FROM_START"==u||"FROM_END"==u;if(b!=r){var x=this.getSourceBlock();return x.updateAt_(n,b),x.setFieldValue(u,"WHERE"+n),null}});this.getInput("AT"+n).appendField(s,"WHERE"+n),1==n&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"))}},t.Blocks.text_changeCase={init:function(){var n=[[t.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[t.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[t.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(t.Msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new t.FieldDropdown(n),"CASE"),this.setOutput(!0,"String"),this.setTooltip(t.Msg.TEXT_CHANGECASE_TOOLTIP)}},t.Blocks.text_trim={init:function(){var n=[[t.Msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[t.Msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[t.Msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(t.Msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new t.FieldDropdown(n),"MODE"),this.setOutput(!0,"String"),this.setTooltip(t.Msg.TEXT_TRIM_TOOLTIP)}},t.Blocks.text_print={init:function(){this.jsonInit({message0:t.Msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:t.Msg.TEXT_PRINT_TOOLTIP,helpUrl:t.Msg.TEXT_PRINT_HELPURL})}},t.Blocks.text_prompt_ext={init:function(){var n=[[t.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[t.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(t.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks");var r=this;n=new t.FieldDropdown(n,function(s){r.updateType_(s)}),this.appendValueInput("TEXT").appendField(n,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(function(){return"TEXT"==r.getFieldValue("TYPE")?t.Msg.TEXT_PROMPT_TOOLTIP_TEXT:t.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},updateType_:function(n){this.outputConnection.setCheck("NUMBER"==n?"Number":"String")},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("type",this.getFieldValue("TYPE")),n},domToMutation:function(n){this.updateType_(n.getAttribute("type"))}},t.Blocks.text_prompt={init:function(){this.mixin(t.Constants.Text.QUOTE_IMAGE_MIXIN);var n=[[t.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[t.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]],r=this;this.setHelpUrl(t.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),n=new t.FieldDropdown(n,function(s){r.updateType_(s)}),this.appendDummyInput().appendField(n,"TYPE").appendField(this.newQuote_(!0)).appendField(new t.FieldTextInput(""),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(function(){return"TEXT"==r.getFieldValue("TYPE")?t.Msg.TEXT_PROMPT_TOOLTIP_TEXT:t.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},updateType_:t.Blocks.text_prompt_ext.updateType_,mutationToDom:t.Blocks.text_prompt_ext.mutationToDom,domToMutation:t.Blocks.text_prompt_ext.domToMutation},t.Blocks.text_count={init:function(){this.jsonInit({message0:t.Msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:t.Msg.TEXT_COUNT_TOOLTIP,helpUrl:t.Msg.TEXT_COUNT_HELPURL})}},t.Blocks.text_replace={init:function(){this.jsonInit({message0:t.Msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:t.Msg.TEXT_REPLACE_TOOLTIP,helpUrl:t.Msg.TEXT_REPLACE_HELPURL})}},t.Blocks.text_reverse={init:function(){this.jsonInit({message0:t.Msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:t.Msg.TEXT_REVERSE_TOOLTIP,helpUrl:t.Msg.TEXT_REVERSE_HELPURL})}},t.Constants.Text.QUOTE_IMAGE_MIXIN={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(n){for(var s,r=0;s=this.inputList[r];r++)for(var b,u=0;b=s.fieldRow[u];u++)if(n==b.name)return s.insertFieldAt(u,this.newQuote_(!0)),void s.insertFieldAt(u+2,this.newQuote_(!1));console.warn('field named "'+n+'" not found in '+this.toDevString())},newQuote_:function(n){return new t.FieldImage((n=this.RTL?!n:n)?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,this.QUOTE_IMAGE_WIDTH,this.QUOTE_IMAGE_HEIGHT,n?"\u201c":"\u201d")}},t.Constants.Text.TEXT_QUOTES_EXTENSION=function(){this.mixin(t.Constants.Text.QUOTE_IMAGE_MIXIN),this.quoteField_("TEXT")},t.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN={mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("items",this.itemCount_),n},domToMutation:function(n){this.itemCount_=parseInt(n.getAttribute("items"),10),this.updateShape_()},decompose:function(n){var r=n.newBlock("text_create_join_container");r.initSvg();for(var s=r.getInput("STACK").connection,u=0;u<this.itemCount_;u++){var b=n.newBlock("text_create_join_item");b.initSvg(),s.connect(b.previousConnection),s=b.nextConnection}return r},compose:function(n){var r=n.getInputTargetBlock("STACK");for(n=[];r&&!r.isInsertionMarker();)n.push(r.valueConnection_),r=r.nextConnection&&r.nextConnection.targetBlock();for(r=0;r<this.itemCount_;r++){var s=this.getInput("ADD"+r).connection.targetConnection;s&&-1==n.indexOf(s)&&s.disconnect()}for(this.itemCount_=n.length,this.updateShape_(),r=0;r<this.itemCount_;r++)t.Mutator.reconnect(n[r],this,"ADD"+r)},saveConnections:function(n){n=n.getInputTargetBlock("STACK");for(var r=0;n;){var s=this.getInput("ADD"+r);n.valueConnection_=s&&s.connection.targetConnection,r++,n=n.nextConnection&&n.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var n=0;n<this.itemCount_;n++)if(!this.getInput("ADD"+n)){var r=this.appendValueInput("ADD"+n).setAlign(t.ALIGN_RIGHT);0==n&&r.appendField(t.Msg.TEXT_JOIN_TITLE_CREATEWITH)}for(;this.getInput("ADD"+n);)this.removeInput("ADD"+n),n++}},t.Constants.Text.TEXT_JOIN_EXTENSION=function(){this.mixin(t.Constants.Text.QUOTE_IMAGE_MIXIN),this.itemCount_=2,this.updateShape_(),this.setMutator(new t.Mutator(["text_create_join_item"]))},t.Extensions.register("text_append_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_TEXT_APPEND_TOOLTIP}","VAR")),t.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION=function(){var n=this;this.setTooltip(function(){return t.Msg.TEXT_INDEXOF_TOOLTIP.replace("%1",n.workspace.options.oneBasedIndex?"0":"-1")})},t.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN={mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("at",!!this.isAt_),n},domToMutation:function(n){n="false"!=n.getAttribute("at"),this.updateAt_(n)},updateAt_:function(n){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),n&&(this.appendValueInput("AT").setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)),t.Msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(t.Msg.TEXT_CHARAT_TAIL)),this.isAt_=n}},t.Constants.Text.TEXT_CHARAT_EXTENSION=function(){this.getField("WHERE").setValidator(function(r){(r="FROM_START"==r||"FROM_END"==r)!=this.isAt_&&this.getSourceBlock().updateAt_(r)}),this.updateAt_(!0);var n=this;this.setTooltip(function(){var r=n.getFieldValue("WHERE"),s=t.Msg.TEXT_CHARAT_TOOLTIP;return("FROM_START"==r||"FROM_END"==r)&&(r="FROM_START"==r?t.Msg.LISTS_INDEX_FROM_START_TOOLTIP:t.Msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(s+="  "+r.replace("%1",n.workspace.options.oneBasedIndex?"#1":"#0")),s})},t.Extensions.register("text_indexOf_tooltip",t.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION),t.Extensions.register("text_quotes",t.Constants.Text.TEXT_QUOTES_EXTENSION),t.Extensions.registerMutator("text_join_mutator",t.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN,t.Constants.Text.TEXT_JOIN_EXTENSION),t.Extensions.registerMutator("text_charAt_mutator",t.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN,t.Constants.Text.TEXT_CHARAT_EXTENSION),t.Blocks.variables={},t.Constants.Variables={},t.Constants.Variables.HUE=330,t.defineBlocksWithJsonArray([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]),t.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(n){if(this.isInFlyout)("variables_get"==this.type||"variables_get_reporter"==this.type)&&(r={text:t.Msg.RENAME_VARIABLE,enabled:!0,callback:t.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},b=this.getField("VAR").getText(),u={text:t.Msg.DELETE_VARIABLE.replace("%1",b),enabled:!0,callback:t.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},n.unshift(r),n.unshift(u));else{if("variables_get"==this.type)var r="variables_set",s=t.Msg.VARIABLES_GET_CREATE_SET;else r="variables_get",s=t.Msg.VARIABLES_SET_CREATE_GET;var u={enabled:0<this.workspace.remainingCapacity()},b=this.getField("VAR").getText();u.text=s.replace("%1",b),(s=t.utils.xml.createElement("field")).setAttribute("name","VAR"),s.appendChild(t.utils.xml.createTextNode(b)),(b=t.utils.xml.createElement("block")).setAttribute("type",r),b.appendChild(s),u.callback=t.ContextMenu.callbackFactory(this,b),n.push(u)}}},t.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY=function(n){return function(){var r=n.workspace,s=n.getField("VAR").getVariable();t.Variables.renameVariable(r,s)}},t.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY=function(n){return function(){var r=n.workspace,s=n.getField("VAR").getVariable();r.deleteVariableById(s.getId()),r.refreshToolboxSelection()}},t.Extensions.registerMixin("contextMenu_variableSetterGetter",t.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),t.Constants.VariablesDynamic={},t.Constants.VariablesDynamic.HUE=310,t.defineBlocksWithJsonArray([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]),t.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(n){if(this.isInFlyout)("variables_get_dynamic"==this.type||"variables_get_reporter_dynamic"==this.type)&&(r={text:t.Msg.RENAME_VARIABLE,enabled:!0,callback:t.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},x=this.getField("VAR").getText(),b={text:t.Msg.DELETE_VARIABLE.replace("%1",x),enabled:!0,callback:t.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},n.unshift(r),n.unshift(b));else{var r=this.getFieldValue("VAR"),s=this.workspace.getVariableById(r).type;if("variables_get_dynamic"==this.type){r="variables_set_dynamic";var u=t.Msg.VARIABLES_GET_CREATE_SET}else r="variables_get_dynamic",u=t.Msg.VARIABLES_SET_CREATE_GET;var b={enabled:0<this.workspace.remainingCapacity()},x=this.getField("VAR").getText();b.text=u.replace("%1",x),(u=t.utils.xml.createElement("field")).setAttribute("name","VAR"),u.setAttribute("variabletype",s),u.appendChild(t.utils.xml.createTextNode(x)),(x=t.utils.xml.createElement("block")).setAttribute("type",r),x.appendChild(u),b.callback=t.ContextMenu.callbackFactory(this,x),n.push(b)}},onchange:function(n){n=this.getFieldValue("VAR"),n=t.Variables.getVariable(this.workspace,n),"variables_get_dynamic"==this.type?this.outputConnection.setCheck(n.type):this.getInput("VALUE").connection.setCheck(n.type)}},t.Constants.VariablesDynamic.RENAME_OPTION_CALLBACK_FACTORY=function(n){return function(){var r=n.workspace,s=n.getField("VAR").getVariable();t.Variables.renameVariable(r,s)}},t.Constants.VariablesDynamic.DELETE_OPTION_CALLBACK_FACTORY=function(n){return function(){var r=n.workspace,s=n.getField("VAR").getVariable();r.deleteVariableById(s.getId()),r.refreshToolboxSelection()}},t.Extensions.registerMixin("contextMenu_variableDynamicSetterGetter",t.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),t.Blocks}.apply($,_))&&(U.exports=e)},25552:function(U,$,m){var _,e;_=[m(68210),m(63266),m(18783),m(30069)],void 0!==(e=function(t,n,r,s){"use strict";return t.setLocale(n),t.Blocks=t.Blocks||{},Object.keys(r).forEach(function(u){t.Blocks[u]=r[u]}),t.JavaScript=s,t}.apply($,_))&&(U.exports=e)},68210:function(U,$,m){var _,e;_=[m(86931)],void 0!==(e=function(t){"use strict";return t.setLocale=function(n){t.Msg=t.Msg||{},Object.keys(n).forEach(function(r){t.Msg[r]=n[r]})},t}.apply($,_))&&(U.exports=e)},76279:function(U,$,m){var _,e;_=[m(25552)],void 0!==(e=function(t){"use strict";return t}.apply($,_))&&(U.exports=e)},30069:function(U,$,m){var _,e;_=[m(68210),m(69957)],void 0!==(e=function(t,n){"use strict";return t.JavaScript=n,n}.apply($,_))&&(U.exports=e)},69957:function(U,$,m){var _,e;_=[m(81069)],void 0!==(e=function(t){"use strict";return t.JavaScript=new t.Generator("JavaScript"),t.JavaScript.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(t.utils.global).join(",")),t.JavaScript.ORDER_ATOMIC=0,t.JavaScript.ORDER_NEW=1.1,t.JavaScript.ORDER_MEMBER=1.2,t.JavaScript.ORDER_FUNCTION_CALL=2,t.JavaScript.ORDER_INCREMENT=3,t.JavaScript.ORDER_DECREMENT=3,t.JavaScript.ORDER_BITWISE_NOT=4.1,t.JavaScript.ORDER_UNARY_PLUS=4.2,t.JavaScript.ORDER_UNARY_NEGATION=4.3,t.JavaScript.ORDER_LOGICAL_NOT=4.4,t.JavaScript.ORDER_TYPEOF=4.5,t.JavaScript.ORDER_VOID=4.6,t.JavaScript.ORDER_DELETE=4.7,t.JavaScript.ORDER_AWAIT=4.8,t.JavaScript.ORDER_EXPONENTIATION=5,t.JavaScript.ORDER_MULTIPLICATION=5.1,t.JavaScript.ORDER_DIVISION=5.2,t.JavaScript.ORDER_MODULUS=5.3,t.JavaScript.ORDER_SUBTRACTION=6.1,t.JavaScript.ORDER_ADDITION=6.2,t.JavaScript.ORDER_BITWISE_SHIFT=7,t.JavaScript.ORDER_RELATIONAL=8,t.JavaScript.ORDER_IN=8,t.JavaScript.ORDER_INSTANCEOF=8,t.JavaScript.ORDER_EQUALITY=9,t.JavaScript.ORDER_BITWISE_AND=10,t.JavaScript.ORDER_BITWISE_XOR=11,t.JavaScript.ORDER_BITWISE_OR=12,t.JavaScript.ORDER_LOGICAL_AND=13,t.JavaScript.ORDER_LOGICAL_OR=14,t.JavaScript.ORDER_CONDITIONAL=15,t.JavaScript.ORDER_ASSIGNMENT=16,t.JavaScript.ORDER_YIELD=17,t.JavaScript.ORDER_COMMA=18,t.JavaScript.ORDER_NONE=99,t.JavaScript.ORDER_OVERRIDES=[[t.JavaScript.ORDER_FUNCTION_CALL,t.JavaScript.ORDER_MEMBER],[t.JavaScript.ORDER_FUNCTION_CALL,t.JavaScript.ORDER_FUNCTION_CALL],[t.JavaScript.ORDER_MEMBER,t.JavaScript.ORDER_MEMBER],[t.JavaScript.ORDER_MEMBER,t.JavaScript.ORDER_FUNCTION_CALL],[t.JavaScript.ORDER_LOGICAL_NOT,t.JavaScript.ORDER_LOGICAL_NOT],[t.JavaScript.ORDER_MULTIPLICATION,t.JavaScript.ORDER_MULTIPLICATION],[t.JavaScript.ORDER_ADDITION,t.JavaScript.ORDER_ADDITION],[t.JavaScript.ORDER_LOGICAL_AND,t.JavaScript.ORDER_LOGICAL_AND],[t.JavaScript.ORDER_LOGICAL_OR,t.JavaScript.ORDER_LOGICAL_OR]],t.JavaScript.isInitialized=!1,t.JavaScript.init=function(n){Object.getPrototypeOf(this).init.call(this),this.nameDB_?this.nameDB_.reset():this.nameDB_=new t.Names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(n.getVariableMap()),this.nameDB_.populateVariables(n),this.nameDB_.populateProcedures(n);for(var r=[],s=t.Variables.allDeveloperVariables(n),u=0;u<s.length;u++)r.push(this.nameDB_.getName(s[u],t.Names.DEVELOPER_VARIABLE_TYPE));for(n=t.Variables.allUsedVarModels(n),u=0;u<n.length;u++)r.push(this.nameDB_.getName(n[u].getId(),t.VARIABLE_CATEGORY_NAME));r.length&&(this.definitions_.variables="var "+r.join(", ")+";"),this.isInitialized=!0},t.JavaScript.finish=function(n){var r=t.utils.object.values(this.definitions_);return n=Object.getPrototypeOf(this).finish.call(this,n),this.isInitialized=!1,this.nameDB_.reset(),r.join("\n\n")+"\n\n\n"+n},t.JavaScript.scrubNakedValue=function(n){return n+";\n"},t.JavaScript.quote_=function(n){return"'"+(n=n.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/'/g,"\\'"))+"'"},t.JavaScript.multiline_quote_=function(n){return n.split(/\n/g).map(this.quote_).join(" + '\\n' +\n")},t.JavaScript.scrub_=function(n,r,s){var u="";if(!n.outputConnection||!n.outputConnection.targetConnection){var b=n.getCommentText();b&&(b=t.utils.string.wrap(b,this.COMMENT_WRAP-3),u+=this.prefixLines(b+"\n","// "));for(var x=0;x<n.inputList.length;x++)n.inputList[x].type==t.inputTypes.VALUE&&(b=n.inputList[x].connection.targetBlock())&&(b=this.allNestedComments(b))&&(u+=this.prefixLines(b,"// "))}return n=n.nextConnection&&n.nextConnection.targetBlock(),u+r+(s?"":this.blockToCode(n))},t.JavaScript.getAdjusted=function(n,r,s,u,b){s=s||0,b=b||this.ORDER_NONE,n.workspace.options.oneBasedIndex&&s--;var x=n.workspace.options.oneBasedIndex?"1":"0";if(n=0<s?this.valueToCode(n,r,this.ORDER_ADDITION)||x:0>s?this.valueToCode(n,r,this.ORDER_SUBTRACTION)||x:u?this.valueToCode(n,r,this.ORDER_UNARY_NEGATION)||x:this.valueToCode(n,r,b)||x,t.isNumber(n))n=Number(n)+s,u&&(n=-n);else{if(0<s){n=n+" + "+s;var B=this.ORDER_ADDITION}else 0>s&&(n=n+" - "+-s,B=this.ORDER_SUBTRACTION);u&&(n=s?"-("+n+")":"-"+n,B=this.ORDER_UNARY_NEGATION),B=Math.floor(B),b=Math.floor(b),B&&b>=B&&(n="("+n+")")}return n},t.JavaScript.colour={},t.JavaScript.colour_picker=function(n){return[t.JavaScript.quote_(n.getFieldValue("COLOUR")),t.JavaScript.ORDER_ATOMIC]},t.JavaScript.colour_random=function(n){return[t.JavaScript.provideFunction_("colourRandom",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"() {","  var num = Math.floor(Math.random() * Math.pow(2, 24));","  return '#' + ('00000' + num.toString(16)).substr(-6);","}"])+"()",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.colour_rgb=function(n){var r=t.JavaScript.valueToCode(n,"RED",t.JavaScript.ORDER_NONE)||0,s=t.JavaScript.valueToCode(n,"GREEN",t.JavaScript.ORDER_NONE)||0;return n=t.JavaScript.valueToCode(n,"BLUE",t.JavaScript.ORDER_NONE)||0,[t.JavaScript.provideFunction_("colourRgb",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(r, g, b) {","  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;","  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;","  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;","  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);","  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);","  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+r+", "+s+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.colour_blend=function(n){var r=t.JavaScript.valueToCode(n,"COLOUR1",t.JavaScript.ORDER_NONE)||"'#000000'",s=t.JavaScript.valueToCode(n,"COLOUR2",t.JavaScript.ORDER_NONE)||"'#000000'";return n=t.JavaScript.valueToCode(n,"RATIO",t.JavaScript.ORDER_NONE)||.5,[t.JavaScript.provideFunction_("colourBlend",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(c1, c2, ratio) {","  ratio = Math.max(Math.min(Number(ratio), 1), 0);","  var r1 = parseInt(c1.substring(1, 3), 16);","  var g1 = parseInt(c1.substring(3, 5), 16);","  var b1 = parseInt(c1.substring(5, 7), 16);","  var r2 = parseInt(c2.substring(1, 3), 16);","  var g2 = parseInt(c2.substring(3, 5), 16);","  var b2 = parseInt(c2.substring(5, 7), 16);","  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);","  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);","  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);","  r = ('0' + (r || 0).toString(16)).slice(-2);","  g = ('0' + (g || 0).toString(16)).slice(-2);","  b = ('0' + (b || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+r+", "+s+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists={},t.JavaScript.lists_create_empty=function(n){return["[]",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.lists_create_with=function(n){for(var r=Array(n.itemCount_),s=0;s<n.itemCount_;s++)r[s]=t.JavaScript.valueToCode(n,"ADD"+s,t.JavaScript.ORDER_NONE)||"null";return["["+r.join(", ")+"]",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.lists_repeat=function(n){return[t.JavaScript.provideFunction_("listsRepeat",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(value, n) {","  var array = [];","  for (var i = 0; i < n; i++) {","    array[i] = value;","  }","  return array;","}"])+"("+(t.JavaScript.valueToCode(n,"ITEM",t.JavaScript.ORDER_NONE)||"null")+", "+(n=t.JavaScript.valueToCode(n,"NUM",t.JavaScript.ORDER_NONE)||"0")+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_length=function(n){return[(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"[]")+".length",t.JavaScript.ORDER_MEMBER]},t.JavaScript.lists_isEmpty=function(n){return["!"+(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"[]")+".length",t.JavaScript.ORDER_LOGICAL_NOT]},t.JavaScript.lists_indexOf=function(n){var r="FIRST"==n.getFieldValue("END")?"indexOf":"lastIndexOf",s=t.JavaScript.valueToCode(n,"FIND",t.JavaScript.ORDER_NONE)||"''";return r=(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"[]")+"."+r+"("+s+")",n.workspace.options.oneBasedIndex?[r+" + 1",t.JavaScript.ORDER_ADDITION]:[r,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_getIndex=function(n){var r=n.getFieldValue("MODE")||"GET",s=n.getFieldValue("WHERE")||"FROM_START",u=t.JavaScript.valueToCode(n,"VALUE","RANDOM"==s?t.JavaScript.ORDER_NONE:t.JavaScript.ORDER_MEMBER)||"[]";switch(s){case"FIRST":if("GET"==r)return[u+"[0]",t.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==r)return[u+".shift()",t.JavaScript.ORDER_MEMBER];if("REMOVE"==r)return u+".shift();\n";break;case"LAST":if("GET"==r)return[u+".slice(-1)[0]",t.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==r)return[u+".pop()",t.JavaScript.ORDER_MEMBER];if("REMOVE"==r)return u+".pop();\n";break;case"FROM_START":if(n=t.JavaScript.getAdjusted(n,"AT"),"GET"==r)return[u+"["+n+"]",t.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==r)return[u+".splice("+n+", 1)[0]",t.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==r)return u+".splice("+n+", 1);\n";break;case"FROM_END":if(n=t.JavaScript.getAdjusted(n,"AT",1,!0),"GET"==r)return[u+".slice("+n+")[0]",t.JavaScript.ORDER_FUNCTION_CALL];if("GET_REMOVE"==r)return[u+".splice("+n+", 1)[0]",t.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==r)return u+".splice("+n+", 1);";break;case"RANDOM":if(u=t.JavaScript.provideFunction_("listsGetRandomItem",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list, remove) {","  var x = Math.floor(Math.random() * list.length);","  if (remove) {","    return list.splice(x, 1)[0];","  } else {","    return list[x];","  }","}"])+"("+u+", "+("GET"!=r)+")","GET"==r||"GET_REMOVE"==r)return[u,t.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==r)return u+";\n"}throw Error("Unhandled combination (lists_getIndex).")},t.JavaScript.lists_setIndex=function(n){function r(){if(s.match(/^\w+$/))return"";var B=t.JavaScript.nameDB_.getDistinctName("tmpList",t.VARIABLE_CATEGORY_NAME),Z="var "+B+" = "+s+";\n";return s=B,Z}var s=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_MEMBER)||"[]",u=n.getFieldValue("MODE")||"GET",b=n.getFieldValue("WHERE")||"FROM_START",x=t.JavaScript.valueToCode(n,"TO",t.JavaScript.ORDER_ASSIGNMENT)||"null";switch(b){case"FIRST":if("SET"==u)return s+"[0] = "+x+";\n";if("INSERT"==u)return s+".unshift("+x+");\n";break;case"LAST":if("SET"==u)return(n=r())+(s+"[")+s+".length - 1] = "+x+";\n";if("INSERT"==u)return s+".push("+x+");\n";break;case"FROM_START":if(b=t.JavaScript.getAdjusted(n,"AT"),"SET"==u)return s+"["+b+"] = "+x+";\n";if("INSERT"==u)return s+".splice("+b+", 0, "+x+");\n";break;case"FROM_END":if(b=t.JavaScript.getAdjusted(n,"AT",1,!1,t.JavaScript.ORDER_SUBTRACTION),n=r(),"SET"==u)return n+(s+"[")+s+".length - "+b+"] = "+x+";\n";if("INSERT"==u)return n+(s+".splice(")+s+".length - "+b+", 0, "+x+");\n";break;case"RANDOM":if(n=r(),n+="var "+(b=t.JavaScript.nameDB_.getDistinctName("tmpX",t.VARIABLE_CATEGORY_NAME))+" = Math.floor(Math.random() * "+s+".length);\n","SET"==u)return n+(s+"[")+b+"] = "+x+";\n";if("INSERT"==u)return n+(s+".splice(")+b+", 0, "+x+");\n"}throw Error("Unhandled combination (lists_setIndex).")},t.JavaScript.lists.getIndex_=function(n,r,s){return"FIRST"==r?"0":"FROM_END"==r?n+".length - 1 - "+s:"LAST"==r?n+".length - 1":s},t.JavaScript.lists_getSublist=function(n){var r=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_MEMBER)||"[]",s=n.getFieldValue("WHERE1"),u=n.getFieldValue("WHERE2");if("FIRST"==s&&"LAST"==u)r+=".slice(0)";else if(r.match(/^\w+$/)||"FROM_END"!=s&&"FROM_START"==u){switch(s){case"FROM_START":var b=t.JavaScript.getAdjusted(n,"AT1");break;case"FROM_END":b=r+".length - "+(b=t.JavaScript.getAdjusted(n,"AT1",1,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"FIRST":b="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(u){case"FROM_START":n=t.JavaScript.getAdjusted(n,"AT2",1);break;case"FROM_END":n=r+".length - "+(n=t.JavaScript.getAdjusted(n,"AT2",0,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"LAST":n=r+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}r=r+".slice("+b+", "+n+")"}else{b=t.JavaScript.getAdjusted(n,"AT1"),n=t.JavaScript.getAdjusted(n,"AT2");var x=t.JavaScript.lists.getIndex_,B={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};r=t.JavaScript.provideFunction_("subsequence"+B[s]+B[u],["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+("FROM_END"==s||"FROM_START"==s?", at1":"")+("FROM_END"==u||"FROM_START"==u?", at2":"")+") {","  var start = "+x("sequence",s,"at1")+";","  var end = "+x("sequence",u,"at2")+" + 1;","  return sequence.slice(start, end);","}"])+"("+r+("FROM_END"==s||"FROM_START"==s?", "+b:"")+("FROM_END"==u||"FROM_START"==u?", "+n:"")+")"}return[r,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_sort=function(n){var r=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_FUNCTION_CALL)||"[]",s="1"===n.getFieldValue("DIRECTION")?1:-1;return n=n.getFieldValue("TYPE"),[r+".slice().sort("+t.JavaScript.provideFunction_("listsGetSortCompare",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(type, direction) {","  var compareFuncs = {",'    "NUMERIC": function(a, b) {',"        return Number(a) - Number(b); },",'    "TEXT": function(a, b) {',"        return a.toString() > b.toString() ? 1 : -1; },",'    "IGNORE_CASE": function(a, b) {',"        return a.toString().toLowerCase() > b.toString().toLowerCase() ? 1 : -1; },","  };","  var compare = compareFuncs[type];","  return function(a, b) { return compare(a, b) * direction; }","}"])+'("'+n+'", '+s+"))",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_split=function(n){var r=t.JavaScript.valueToCode(n,"INPUT",t.JavaScript.ORDER_MEMBER),s=t.JavaScript.valueToCode(n,"DELIM",t.JavaScript.ORDER_NONE)||"''";if("SPLIT"==(n=n.getFieldValue("MODE")))r||(r="''"),n="split";else{if("JOIN"!=n)throw Error("Unknown mode: "+n);r||(r="[]"),n="join"}return[r+"."+n+"("+s+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_reverse=function(n){return[(t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_FUNCTION_CALL)||"[]")+".slice().reverse()",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.logic={},t.JavaScript.controls_if=function(n){var r=0,s="";t.JavaScript.STATEMENT_PREFIX&&(s+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,n));do{var u=t.JavaScript.valueToCode(n,"IF"+r,t.JavaScript.ORDER_NONE)||"false",b=t.JavaScript.statementToCode(n,"DO"+r);t.JavaScript.STATEMENT_SUFFIX&&(b=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n),t.JavaScript.INDENT)+b),s+=(0<r?" else ":"")+"if ("+u+") {\n"+b+"}",++r}while(n.getInput("IF"+r));return(n.getInput("ELSE")||t.JavaScript.STATEMENT_SUFFIX)&&(b=t.JavaScript.statementToCode(n,"ELSE"),t.JavaScript.STATEMENT_SUFFIX&&(b=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n),t.JavaScript.INDENT)+b),s+=" else {\n"+b+"}"),s+"\n"},t.JavaScript.controls_ifelse=t.JavaScript.controls_if,t.JavaScript.logic_compare=function(n){var r={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[n.getFieldValue("OP")],s="=="==r||"!="==r?t.JavaScript.ORDER_EQUALITY:t.JavaScript.ORDER_RELATIONAL;return[(t.JavaScript.valueToCode(n,"A",s)||"0")+" "+r+" "+(n=t.JavaScript.valueToCode(n,"B",s)||"0"),s]},t.JavaScript.logic_operation=function(n){var r="AND"==n.getFieldValue("OP")?"&&":"||",s="&&"==r?t.JavaScript.ORDER_LOGICAL_AND:t.JavaScript.ORDER_LOGICAL_OR,u=t.JavaScript.valueToCode(n,"A",s);if(n=t.JavaScript.valueToCode(n,"B",s),u||n){var b="&&"==r?"true":"false";u||(u=b),n||(n=b)}else n=u="false";return[u+" "+r+" "+n,s]},t.JavaScript.logic_negate=function(n){var r=t.JavaScript.ORDER_LOGICAL_NOT;return["!"+(t.JavaScript.valueToCode(n,"BOOL",r)||"true"),r]},t.JavaScript.logic_boolean=function(n){return["TRUE"==n.getFieldValue("BOOL")?"true":"false",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.logic_null=function(n){return["null",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.logic_ternary=function(n){return[(t.JavaScript.valueToCode(n,"IF",t.JavaScript.ORDER_CONDITIONAL)||"false")+" ? "+(t.JavaScript.valueToCode(n,"THEN",t.JavaScript.ORDER_CONDITIONAL)||"null")+" : "+(n=t.JavaScript.valueToCode(n,"ELSE",t.JavaScript.ORDER_CONDITIONAL)||"null"),t.JavaScript.ORDER_CONDITIONAL]},t.JavaScript.loops={},t.JavaScript.controls_repeat_ext=function(n){var r=n.getField("TIMES")?String(Number(n.getFieldValue("TIMES"))):t.JavaScript.valueToCode(n,"TIMES",t.JavaScript.ORDER_ASSIGNMENT)||"0",s=t.JavaScript.statementToCode(n,"DO");s=t.JavaScript.addLoopTrap(s,n),n="";var u=t.JavaScript.nameDB_.getDistinctName("count",t.VARIABLE_CATEGORY_NAME),b=r;return r.match(/^\w+$/)||t.isNumber(r)||(n+="var "+(b=t.JavaScript.nameDB_.getDistinctName("repeat_end",t.VARIABLE_CATEGORY_NAME))+" = "+r+";\n"),n+"for (var "+u+" = 0; "+u+" < "+b+"; "+u+"++) {\n"+s+"}\n"},t.JavaScript.controls_repeat=t.JavaScript.controls_repeat_ext,t.JavaScript.controls_whileUntil=function(n){var r="UNTIL"==n.getFieldValue("MODE"),s=t.JavaScript.valueToCode(n,"BOOL",r?t.JavaScript.ORDER_LOGICAL_NOT:t.JavaScript.ORDER_NONE)||"false",u=t.JavaScript.statementToCode(n,"DO");return r&&(s="!"+s),"while ("+s+") {\n"+(u=t.JavaScript.addLoopTrap(u,n))+"}\n"},t.JavaScript.controls_for=function(n){var r=t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME),s=t.JavaScript.valueToCode(n,"FROM",t.JavaScript.ORDER_ASSIGNMENT)||"0",u=t.JavaScript.valueToCode(n,"TO",t.JavaScript.ORDER_ASSIGNMENT)||"0",b=t.JavaScript.valueToCode(n,"BY",t.JavaScript.ORDER_ASSIGNMENT)||"1",x=t.JavaScript.statementToCode(n,"DO");if(x=t.JavaScript.addLoopTrap(x,n),t.isNumber(s)&&t.isNumber(u)&&t.isNumber(b)){var B=Number(s)<=Number(u);n="for ("+r+" = "+s+"; "+r+(B?" <= ":" >= ")+u+"; "+r,n=(1==(r=Math.abs(Number(b)))?n+(B?"++":"--"):n+(B?" += ":" -= ")+r)+") {\n"+x+"}\n"}else n="",B=s,s.match(/^\w+$/)||t.isNumber(s)||(n+="var "+(B=t.JavaScript.nameDB_.getDistinctName(r+"_start",t.VARIABLE_CATEGORY_NAME))+" = "+s+";\n"),s=u,u.match(/^\w+$/)||t.isNumber(u)||(n+="var "+(s=t.JavaScript.nameDB_.getDistinctName(r+"_end",t.VARIABLE_CATEGORY_NAME))+" = "+u+";\n"),n+="var "+(u=t.JavaScript.nameDB_.getDistinctName(r+"_inc",t.VARIABLE_CATEGORY_NAME))+" = ",n=(n=t.isNumber(b)?n+(Math.abs(b)+";\n"):n+"Math.abs("+b+");\n")+"if ("+B+" > "+s+") {\n"+(t.JavaScript.INDENT+u)+" = -"+u+";\n",n+="}\n",n+="for ("+r+" = "+B+"; "+u+" >= 0 ? "+r+" <= "+s+" : "+r+" >= "+s+"; "+r+" += "+u+") {\n"+x+"}\n";return n},t.JavaScript.controls_forEach=function(n){var r=t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME),s=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_ASSIGNMENT)||"[]",u=t.JavaScript.statementToCode(n,"DO");u=t.JavaScript.addLoopTrap(u,n),n="";var b=s;return s.match(/^\w+$/)||(n+="var "+(b=t.JavaScript.nameDB_.getDistinctName(r+"_list",t.VARIABLE_CATEGORY_NAME))+" = "+s+";\n"),n+"for (var "+(s=t.JavaScript.nameDB_.getDistinctName(r+"_index",t.VARIABLE_CATEGORY_NAME))+" in "+b+") {\n"+(u=t.JavaScript.INDENT+r+" = "+b+"["+s+"];\n"+u)+"}\n"},t.JavaScript.controls_flow_statements=function(n){var r="";if(t.JavaScript.STATEMENT_PREFIX&&(r+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,n)),t.JavaScript.STATEMENT_SUFFIX&&(r+=t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n)),t.JavaScript.STATEMENT_PREFIX){var s=t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(n);s&&!s.suppressPrefixSuffix&&(r+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,s))}switch(n.getFieldValue("FLOW")){case"BREAK":return r+"break;\n";case"CONTINUE":return r+"continue;\n"}throw Error("Unknown flow statement.")},t.JavaScript.math={},t.JavaScript.math_number=function(n){return[n=Number(n.getFieldValue("NUM")),0<=n?t.JavaScript.ORDER_ATOMIC:t.JavaScript.ORDER_UNARY_NEGATION]},t.JavaScript.math_arithmetic=function(n){var r={ADD:[" + ",t.JavaScript.ORDER_ADDITION],MINUS:[" - ",t.JavaScript.ORDER_SUBTRACTION],MULTIPLY:[" * ",t.JavaScript.ORDER_MULTIPLICATION],DIVIDE:[" / ",t.JavaScript.ORDER_DIVISION],POWER:[null,t.JavaScript.ORDER_NONE]}[n.getFieldValue("OP")],s=r[0],u=t.JavaScript.valueToCode(n,"A",r=r[1])||"0";return n=t.JavaScript.valueToCode(n,"B",r)||"0",s?[u+s+n,r]:["Math.pow("+u+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_single=function(n){var r=n.getFieldValue("OP");if("NEG"==r)return"-"==(n=t.JavaScript.valueToCode(n,"NUM",t.JavaScript.ORDER_UNARY_NEGATION)||"0")[0]&&(n=" "+n),["-"+n,t.JavaScript.ORDER_UNARY_NEGATION];switch(n="SIN"==r||"COS"==r||"TAN"==r?t.JavaScript.valueToCode(n,"NUM",t.JavaScript.ORDER_DIVISION)||"0":t.JavaScript.valueToCode(n,"NUM",t.JavaScript.ORDER_NONE)||"0",r){case"ABS":var s="Math.abs("+n+")";break;case"ROOT":s="Math.sqrt("+n+")";break;case"LN":s="Math.log("+n+")";break;case"EXP":s="Math.exp("+n+")";break;case"POW10":s="Math.pow(10,"+n+")";break;case"ROUND":s="Math.round("+n+")";break;case"ROUNDUP":s="Math.ceil("+n+")";break;case"ROUNDDOWN":s="Math.floor("+n+")";break;case"SIN":s="Math.sin("+n+" / 180 * Math.PI)";break;case"COS":s="Math.cos("+n+" / 180 * Math.PI)";break;case"TAN":s="Math.tan("+n+" / 180 * Math.PI)"}if(s)return[s,t.JavaScript.ORDER_FUNCTION_CALL];switch(r){case"LOG10":s="Math.log("+n+") / Math.log(10)";break;case"ASIN":s="Math.asin("+n+") / Math.PI * 180";break;case"ACOS":s="Math.acos("+n+") / Math.PI * 180";break;case"ATAN":s="Math.atan("+n+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+r)}return[s,t.JavaScript.ORDER_DIVISION]},t.JavaScript.math_constant=function(n){return{PI:["Math.PI",t.JavaScript.ORDER_MEMBER],E:["Math.E",t.JavaScript.ORDER_MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",t.JavaScript.ORDER_DIVISION],SQRT2:["Math.SQRT2",t.JavaScript.ORDER_MEMBER],SQRT1_2:["Math.SQRT1_2",t.JavaScript.ORDER_MEMBER],INFINITY:["Infinity",t.JavaScript.ORDER_ATOMIC]}[n.getFieldValue("CONSTANT")]},t.JavaScript.math_number_property=function(n){var r=t.JavaScript.valueToCode(n,"NUMBER_TO_CHECK",t.JavaScript.ORDER_MODULUS)||"0",s=n.getFieldValue("PROPERTY");if("PRIME"==s)return[t.JavaScript.provideFunction_("mathIsPrime",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(n) {","  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods","  if (n == 2 || n == 3) {","    return true;","  }","  // False if n is NaN, negative, is 1, or not whole.","  // And false if n is divisible by 2 or 3.","  if (isNaN(n) || n <= 1 || n % 1 != 0 || n % 2 == 0 || n % 3 == 0) {","    return false;","  }","  // Check all the numbers of form 6k +/- 1, up to sqrt(n).","  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {","    if (n % (x - 1) == 0 || n % (x + 1) == 0) {","      return false;","    }","  }","  return true;","}"])+"("+r+")",t.JavaScript.ORDER_FUNCTION_CALL];switch(s){case"EVEN":var u=r+" % 2 == 0";break;case"ODD":u=r+" % 2 == 1";break;case"WHOLE":u=r+" % 1 == 0";break;case"POSITIVE":u=r+" > 0";break;case"NEGATIVE":u=r+" < 0";break;case"DIVISIBLE_BY":u=r+" % "+(n=t.JavaScript.valueToCode(n,"DIVISOR",t.JavaScript.ORDER_MODULUS)||"0")+" == 0"}return[u,t.JavaScript.ORDER_EQUALITY]},t.JavaScript.math_change=function(n){var r=t.JavaScript.valueToCode(n,"DELTA",t.JavaScript.ORDER_ADDITION)||"0";return(n=t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME))+" = (typeof "+n+" == 'number' ? "+n+" : 0) + "+r+";\n"},t.JavaScript.math_round=t.JavaScript.math_single,t.JavaScript.math_trig=t.JavaScript.math_single,t.JavaScript.math_on_list=function(n){var r=n.getFieldValue("OP");switch(r){case"SUM":n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_MEMBER)||"[]",n+=".reduce(function(x, y) {return x + y;})";break;case"MIN":n="Math.min.apply(null, "+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"MAX":n="Math.max.apply(null, "+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"AVERAGE":n=(r=t.JavaScript.provideFunction_("mathMean",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {","  return myList.reduce(function(x, y) {return x + y;}) / myList.length;","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"MEDIAN":n=(r=t.JavaScript.provideFunction_("mathMedian",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {","  var localList = myList.filter(function (x) {return typeof x == 'number';});","  if (!localList.length) return null;","  localList.sort(function(a, b) {return b - a;});","  if (localList.length % 2 == 0) {","    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;","  } else {","    return localList[(localList.length - 1) / 2];","  }","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"MODE":n=(r=t.JavaScript.provideFunction_("mathModes",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(values) {","  var modes = [];","  var counts = [];","  var maxCount = 0;","  for (var i = 0; i < values.length; i++) {","    var value = values[i];","    var found = false;","    var thisCount;","    for (var j = 0; j < counts.length; j++) {","      if (counts[j][0] === value) {","        thisCount = ++counts[j][1];","        found = true;","        break;","      }","    }","    if (!found) {","      counts.push([value, 1]);","      thisCount = 1;","    }","    maxCount = Math.max(thisCount, maxCount);","  }","  for (var j = 0; j < counts.length; j++) {","    if (counts[j][1] == maxCount) {","        modes.push(counts[j][0]);","    }","  }","  return modes;","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"STD_DEV":n=(r=t.JavaScript.provideFunction_("mathStandardDeviation",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(numbers) {","  var n = numbers.length;","  if (!n) return null;","  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;","  var variance = 0;","  for (var j = 0; j < n; j++) {","    variance += Math.pow(numbers[j] - mean, 2);","  }","  variance = variance / n;","  return Math.sqrt(variance);","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"RANDOM":n=(r=t.JavaScript.provideFunction_("mathRandomList",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list) {","  var x = Math.floor(Math.random() * list.length);","  return list[x];","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;default:throw Error("Unknown operator: "+r)}return[n,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_modulo=function(n){return[(t.JavaScript.valueToCode(n,"DIVIDEND",t.JavaScript.ORDER_MODULUS)||"0")+" % "+(n=t.JavaScript.valueToCode(n,"DIVISOR",t.JavaScript.ORDER_MODULUS)||"0"),t.JavaScript.ORDER_MODULUS]},t.JavaScript.math_constrain=function(n){return["Math.min(Math.max("+(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_NONE)||"0")+", "+(t.JavaScript.valueToCode(n,"LOW",t.JavaScript.ORDER_NONE)||"0")+"), "+(n=t.JavaScript.valueToCode(n,"HIGH",t.JavaScript.ORDER_NONE)||"Infinity")+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_random_int=function(n){var r=t.JavaScript.valueToCode(n,"FROM",t.JavaScript.ORDER_NONE)||"0";return n=t.JavaScript.valueToCode(n,"TO",t.JavaScript.ORDER_NONE)||"0",[t.JavaScript.provideFunction_("mathRandomInt",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(a, b) {","  if (a > b) {","    // Swap a and b to ensure a is smaller.","    var c = a;","    a = b;","    b = c;","  }","  return Math.floor(Math.random() * (b - a + 1) + a);","}"])+"("+r+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_random_float=function(n){return["Math.random()",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_atan2=function(n){var r=t.JavaScript.valueToCode(n,"X",t.JavaScript.ORDER_NONE)||"0";return["Math.atan2("+(t.JavaScript.valueToCode(n,"Y",t.JavaScript.ORDER_NONE)||"0")+", "+r+") / Math.PI * 180",t.JavaScript.ORDER_DIVISION]},t.JavaScript.procedures={},t.JavaScript.procedures_defreturn=function(n){var r=t.JavaScript.nameDB_.getName(n.getFieldValue("NAME"),t.PROCEDURE_CATEGORY_NAME),s="";t.JavaScript.STATEMENT_PREFIX&&(s+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,n)),t.JavaScript.STATEMENT_SUFFIX&&(s+=t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n)),s&&(s=t.JavaScript.prefixLines(s,t.JavaScript.INDENT));var u="";t.JavaScript.INFINITE_LOOP_TRAP&&(u=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.INFINITE_LOOP_TRAP,n),t.JavaScript.INDENT));var b=t.JavaScript.statementToCode(n,"STACK"),x=t.JavaScript.valueToCode(n,"RETURN",t.JavaScript.ORDER_NONE)||"",B="";b&&x&&(B=s),x&&(x=t.JavaScript.INDENT+"return "+x+";\n");for(var Z=[],ot=n.getVars(),et=0;et<ot.length;et++)Z[et]=t.JavaScript.nameDB_.getName(ot[et],t.VARIABLE_CATEGORY_NAME);return s="function "+r+"("+Z.join(", ")+") {\n"+s+u+b+B+x+"}",s=t.JavaScript.scrub_(n,s),t.JavaScript.definitions_["%"+r]=s,null},t.JavaScript.procedures_defnoreturn=t.JavaScript.procedures_defreturn,t.JavaScript.procedures_callreturn=function(n){for(var r=t.JavaScript.nameDB_.getName(n.getFieldValue("NAME"),t.PROCEDURE_CATEGORY_NAME),s=[],u=n.getVars(),b=0;b<u.length;b++)s[b]=t.JavaScript.valueToCode(n,"ARG"+b,t.JavaScript.ORDER_NONE)||"null";return[r+"("+s.join(", ")+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.procedures_callnoreturn=function(n){return t.JavaScript.procedures_callreturn(n)[0]+";\n"},t.JavaScript.procedures_ifreturn=function(n){var r="if ("+(t.JavaScript.valueToCode(n,"CONDITION",t.JavaScript.ORDER_NONE)||"false")+") {\n";return t.JavaScript.STATEMENT_SUFFIX&&(r+=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n),t.JavaScript.INDENT)),n.hasReturnValue_?(n=t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_NONE)||"null",r+=t.JavaScript.INDENT+"return "+n+";\n"):r+=t.JavaScript.INDENT+"return;\n",r+"}\n"},t.JavaScript.texts={},t.JavaScript.text=function(n){return[t.JavaScript.quote_(n.getFieldValue("TEXT")),t.JavaScript.ORDER_ATOMIC]},t.JavaScript.text_multiline=function(n){var r=-1!=(n=t.JavaScript.multiline_quote_(n.getFieldValue("TEXT"))).indexOf("+")?t.JavaScript.ORDER_ADDITION:t.JavaScript.ORDER_ATOMIC;return[n,r]},t.JavaScript.text.forceString_=function(n){return t.JavaScript.text.forceString_.strRegExp.test(n)?[n,t.JavaScript.ORDER_ATOMIC]:["String("+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text.forceString_.strRegExp=/^\s*'([^']|\\')*'\s*$/,t.JavaScript.text_join=function(n){switch(n.itemCount_){case 0:return["''",t.JavaScript.ORDER_ATOMIC];case 1:return n=t.JavaScript.valueToCode(n,"ADD0",t.JavaScript.ORDER_NONE)||"''",t.JavaScript.text.forceString_(n);case 2:var r=t.JavaScript.valueToCode(n,"ADD0",t.JavaScript.ORDER_NONE)||"''";return n=t.JavaScript.valueToCode(n,"ADD1",t.JavaScript.ORDER_NONE)||"''",[n=t.JavaScript.text.forceString_(r)[0]+" + "+t.JavaScript.text.forceString_(n)[0],t.JavaScript.ORDER_ADDITION];default:r=Array(n.itemCount_);for(var s=0;s<n.itemCount_;s++)r[s]=t.JavaScript.valueToCode(n,"ADD"+s,t.JavaScript.ORDER_NONE)||"''";return[n="["+r.join(",")+"].join('')",t.JavaScript.ORDER_FUNCTION_CALL]}},t.JavaScript.text_append=function(n){var r=t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME);return n=t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''",r+" += "+t.JavaScript.text.forceString_(n)[0]+";\n"},t.JavaScript.text_length=function(n){return[(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"''")+".length",t.JavaScript.ORDER_MEMBER]},t.JavaScript.text_isEmpty=function(n){return["!"+(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"''")+".length",t.JavaScript.ORDER_LOGICAL_NOT]},t.JavaScript.text_indexOf=function(n){var r="FIRST"==n.getFieldValue("END")?"indexOf":"lastIndexOf",s=t.JavaScript.valueToCode(n,"FIND",t.JavaScript.ORDER_NONE)||"''";return r=(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"''")+"."+r+"("+s+")",n.workspace.options.oneBasedIndex?[r+" + 1",t.JavaScript.ORDER_ADDITION]:[r,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_charAt=function(n){var r=n.getFieldValue("WHERE")||"FROM_START",s=t.JavaScript.valueToCode(n,"VALUE","RANDOM"==r?t.JavaScript.ORDER_NONE:t.JavaScript.ORDER_MEMBER)||"''";switch(r){case"FIRST":return[s+".charAt(0)",t.JavaScript.ORDER_FUNCTION_CALL];case"LAST":return[s+".slice(-1)",t.JavaScript.ORDER_FUNCTION_CALL];case"FROM_START":return[s+".charAt("+(n=t.JavaScript.getAdjusted(n,"AT"))+")",t.JavaScript.ORDER_FUNCTION_CALL];case"FROM_END":return[s+".slice("+(n=t.JavaScript.getAdjusted(n,"AT",1,!0))+").charAt(0)",t.JavaScript.ORDER_FUNCTION_CALL];case"RANDOM":return[t.JavaScript.provideFunction_("textRandomLetter",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(text) {","  var x = Math.floor(Math.random() * text.length);","  return text[x];","}"])+"("+s+")",t.JavaScript.ORDER_FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},t.JavaScript.text.getIndex_=function(n,r,s){return"FIRST"==r?"0":"FROM_END"==r?n+".length - 1 - "+s:"LAST"==r?n+".length - 1":s},t.JavaScript.text_getSubstring=function(n){var r=n.getFieldValue("WHERE1"),s=n.getFieldValue("WHERE2"),u="FROM_END"!=r&&"LAST"!=r&&"FROM_END"!=s&&"LAST"!=s,b=t.JavaScript.valueToCode(n,"STRING",u?t.JavaScript.ORDER_MEMBER:t.JavaScript.ORDER_NONE)||"''";if("FIRST"==r&&"LAST"==s)return[b,t.JavaScript.ORDER_NONE];if(b.match(/^'?\w+'?$/)||u){switch(r){case"FROM_START":u=t.JavaScript.getAdjusted(n,"AT1");break;case"FROM_END":u=b+".length - "+(u=t.JavaScript.getAdjusted(n,"AT1",1,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"FIRST":u="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(s){case"FROM_START":n=t.JavaScript.getAdjusted(n,"AT2",1);break;case"FROM_END":n=b+".length - "+(n=t.JavaScript.getAdjusted(n,"AT2",0,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"LAST":n=b+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}r=b+".slice("+u+", "+n+")"}else{u=t.JavaScript.getAdjusted(n,"AT1"),n=t.JavaScript.getAdjusted(n,"AT2");var x=t.JavaScript.text.getIndex_,B={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};r=t.JavaScript.provideFunction_("subsequence"+B[r]+B[s],["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+("FROM_END"==r||"FROM_START"==r?", at1":"")+("FROM_END"==s||"FROM_START"==s?", at2":"")+") {","  var start = "+x("sequence",r,"at1")+";","  var end = "+x("sequence",s,"at2")+" + 1;","  return sequence.slice(start, end);","}"])+"("+b+("FROM_END"==r||"FROM_START"==r?", "+u:"")+("FROM_END"==s||"FROM_START"==s?", "+n:"")+")"}return[r,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_changeCase=function(n){var r={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[n.getFieldValue("CASE")];return n=t.JavaScript.valueToCode(n,"TEXT",r?t.JavaScript.ORDER_MEMBER:t.JavaScript.ORDER_NONE)||"''",[r?n+r:t.JavaScript.provideFunction_("textToTitleCase",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(str) {","  return str.replace(/\\S+/g,","      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});","}"])+"("+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_trim=function(n){var r={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[n.getFieldValue("MODE")];return[(t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_MEMBER)||"''")+r,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_print=function(n){return"window.alert("+(t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''")+");\n"},t.JavaScript.text_prompt_ext=function(n){var r="window.prompt("+(n.getField("TEXT")?t.JavaScript.quote_(n.getFieldValue("TEXT")):t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''")+")";return"NUMBER"==n.getFieldValue("TYPE")&&(r="Number("+r+")"),[r,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_prompt=t.JavaScript.text_prompt_ext,t.JavaScript.text_count=function(n){var r=t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''";return n=t.JavaScript.valueToCode(n,"SUB",t.JavaScript.ORDER_NONE)||"''",[t.JavaScript.provideFunction_("textCount",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle) {","  if (needle.length === 0) {","    return haystack.length + 1;","  } else {","    return haystack.split(needle).length - 1;","  }","}"])+"("+r+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_replace=function(n){var r=t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''",s=t.JavaScript.valueToCode(n,"FROM",t.JavaScript.ORDER_NONE)||"''";return n=t.JavaScript.valueToCode(n,"TO",t.JavaScript.ORDER_NONE)||"''",[t.JavaScript.provideFunction_("textReplace",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle, replacement) {",'  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g,"\\\\$1")','                 .replace(/\\x08/g,"\\\\x08");',"  return haystack.replace(new RegExp(needle, 'g'), replacement);","}"])+"("+r+", "+s+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_reverse=function(n){return[(t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_MEMBER)||"''")+".split('').reverse().join('')",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.variables={},t.JavaScript.variables_get=function(n){return[t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME),t.JavaScript.ORDER_ATOMIC]},t.JavaScript.variables_set=function(n){var r=t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_ASSIGNMENT)||"0";return t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME)+" = "+r+";\n"},t.JavaScript.variablesDynamic={},t.JavaScript.variables_get_dynamic=t.JavaScript.variables_get,t.JavaScript.variables_set_dynamic=t.JavaScript.variables_set,t.JavaScript}.apply($,_))&&(U.exports=e)},63266:function(U,$,m){var _,e;_=[m(68210)],void 0!==(e=function(t){return(t={Msg:{}}).Msg.ADD_COMMENT="Add Comment",t.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",t.Msg.CHANGE_VALUE_TITLE="Change value:",t.Msg.CLEAN_UP="Clean up Blocks",t.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",t.Msg.COLLAPSE_ALL="Collapse Blocks",t.Msg.COLLAPSE_BLOCK="Collapse Block",t.Msg.COLOUR_BLEND_COLOUR1="colour 1",t.Msg.COLOUR_BLEND_COLOUR2="colour 2",t.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",t.Msg.COLOUR_BLEND_RATIO="ratio",t.Msg.COLOUR_BLEND_TITLE="blend",t.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",t.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",t.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",t.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",t.Msg.COLOUR_RANDOM_TITLE="random colour",t.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",t.Msg.COLOUR_RGB_BLUE="blue",t.Msg.COLOUR_RGB_GREEN="green",t.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",t.Msg.COLOUR_RGB_RED="red",t.Msg.COLOUR_RGB_TITLE="colour with",t.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",t.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",t.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",t.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",t.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",t.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",t.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",t.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",t.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",t.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",t.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",t.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",t.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",t.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",t.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",t.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",t.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",t.Msg.CONTROLS_IF_MSG_ELSE="else",t.Msg.CONTROLS_IF_MSG_ELSEIF="else if",t.Msg.CONTROLS_IF_MSG_IF="if",t.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",t.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",t.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",t.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",t.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",t.Msg.CONTROLS_REPEAT_INPUT_DO="do",t.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",t.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",t.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",t.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",t.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",t.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",t.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",t.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",t.Msg.DELETE_BLOCK="Delete Block",t.Msg.DELETE_VARIABLE="Delete the '%1' variable",t.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",t.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",t.Msg.DISABLE_BLOCK="Disable Block",t.Msg.DUPLICATE_BLOCK="Duplicate",t.Msg.DUPLICATE_COMMENT="Duplicate Comment",t.Msg.ENABLE_BLOCK="Enable Block",t.Msg.EXPAND_ALL="Expand Blocks",t.Msg.EXPAND_BLOCK="Expand Block",t.Msg.EXTERNAL_INPUTS="External Inputs",t.Msg.HELP="Help",t.Msg.INLINE_INPUTS="Inline Inputs",t.Msg.IOS_CANCEL="Cancel",t.Msg.IOS_ERROR="Error",t.Msg.IOS_OK="OK",t.Msg.IOS_PROCEDURES_ADD_INPUT="+ Add Input",t.Msg.IOS_PROCEDURES_ALLOW_STATEMENTS="Allow statements",t.Msg.IOS_PROCEDURES_DUPLICATE_INPUTS_ERROR="This function has duplicate inputs.",t.Msg.IOS_PROCEDURES_INPUTS="INPUTS",t.Msg.IOS_VARIABLES_ADD_BUTTON="Add",t.Msg.IOS_VARIABLES_ADD_VARIABLE="+ Add Variable",t.Msg.IOS_VARIABLES_DELETE_BUTTON="Delete",t.Msg.IOS_VARIABLES_EMPTY_NAME_ERROR="You can't use an empty variable name.",t.Msg.IOS_VARIABLES_RENAME_BUTTON="Rename",t.Msg.IOS_VARIABLES_VARIABLE_NAME="Variable name",t.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",t.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",t.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",t.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",t.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",t.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",t.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",t.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",t.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",t.Msg.LISTS_GET_INDEX_FIRST="first",t.Msg.LISTS_GET_INDEX_FROM_END="# from end",t.Msg.LISTS_GET_INDEX_FROM_START="#",t.Msg.LISTS_GET_INDEX_GET="get",t.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",t.Msg.LISTS_GET_INDEX_LAST="last",t.Msg.LISTS_GET_INDEX_RANDOM="random",t.Msg.LISTS_GET_INDEX_REMOVE="remove",t.Msg.LISTS_GET_INDEX_TAIL="",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",t.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",t.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",t.Msg.LISTS_GET_SUBLIST_END_LAST="to last",t.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",t.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",t.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",t.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",t.Msg.LISTS_GET_SUBLIST_TAIL="",t.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",t.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",t.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",t.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",t.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",t.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",t.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",t.Msg.LISTS_INLIST="in list",t.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",t.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",t.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",t.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",t.Msg.LISTS_LENGTH_TITLE="length of %1",t.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",t.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",t.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",t.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",t.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",t.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",t.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",t.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",t.Msg.LISTS_SET_INDEX_INPUT_TO="as",t.Msg.LISTS_SET_INDEX_INSERT="insert at",t.Msg.LISTS_SET_INDEX_SET="set",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",t.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",t.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",t.Msg.LISTS_SORT_ORDER_DESCENDING="descending",t.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",t.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",t.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",t.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",t.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",t.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",t.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",t.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",t.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",t.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",t.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",t.Msg.LOGIC_BOOLEAN_FALSE="false",t.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",t.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",t.Msg.LOGIC_BOOLEAN_TRUE="true",t.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",t.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",t.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",t.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",t.Msg.LOGIC_NEGATE_TITLE="not %1",t.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",t.Msg.LOGIC_NULL="null",t.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",t.Msg.LOGIC_NULL_TOOLTIP="Returns null.",t.Msg.LOGIC_OPERATION_AND="and",t.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",t.Msg.LOGIC_OPERATION_OR="or",t.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",t.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",t.Msg.LOGIC_TERNARY_CONDITION="test",t.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",t.Msg.LOGIC_TERNARY_IF_FALSE="if false",t.Msg.LOGIC_TERNARY_IF_TRUE="if true",t.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",t.Msg.MATH_ADDITION_SYMBOL="+",t.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",t.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",t.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",t.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",t.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",t.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",t.Msg.MATH_CHANGE_TITLE="change %1 by %2",t.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",t.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",t.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants: \u03c0 (3.141\u2026), e (2.718\u2026), \u03c6 (1.618\u2026), sqrt(2) (1.414\u2026), sqrt(\xbd) (0.707\u2026), or \u221e (infinity).",t.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",t.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",t.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",t.Msg.MATH_DIVISION_SYMBOL="\xf7",t.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",t.Msg.MATH_IS_EVEN="is even",t.Msg.MATH_IS_NEGATIVE="is negative",t.Msg.MATH_IS_ODD="is odd",t.Msg.MATH_IS_POSITIVE="is positive",t.Msg.MATH_IS_PRIME="is prime",t.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",t.Msg.MATH_IS_WHOLE="is whole",t.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",t.Msg.MATH_MODULO_TITLE="remainder of %1 \xf7 %2",t.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",t.Msg.MATH_MULTIPLICATION_SYMBOL="\xd7",t.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",t.Msg.MATH_NUMBER_TOOLTIP="A number.",t.Msg.MATH_ONLIST_HELPURL="",t.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",t.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",t.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",t.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",t.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",t.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",t.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",t.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",t.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",t.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",t.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",t.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",t.Msg.MATH_POWER_SYMBOL="^",t.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",t.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",t.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",t.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",t.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",t.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",t.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",t.Msg.MATH_ROUND_OPERATOR_ROUND="round",t.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",t.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",t.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",t.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",t.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",t.Msg.MATH_SINGLE_OP_ROOT="square root",t.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",t.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",t.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",t.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",t.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",t.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",t.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",t.Msg.MATH_SUBTRACTION_SYMBOL="-",t.Msg.MATH_TRIG_ACOS="acos",t.Msg.MATH_TRIG_ASIN="asin",t.Msg.MATH_TRIG_ATAN="atan",t.Msg.MATH_TRIG_COS="cos",t.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",t.Msg.MATH_TRIG_SIN="sin",t.Msg.MATH_TRIG_TAN="tan",t.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",t.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",t.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",t.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",t.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",t.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",t.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",t.Msg.NEW_NUMBER_VARIABLE="Create number variable...",t.Msg.NEW_STRING_VARIABLE="Create string variable...",t.Msg.NEW_VARIABLE="Create variable...",t.Msg.NEW_VARIABLE_TITLE="New variable name:",t.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",t.Msg.ORDINAL_NUMBER_SUFFIX="",t.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",t.Msg.PROCEDURES_BEFORE_PARAMS="with:",t.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",t.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",t.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",t.Msg.PROCEDURES_CREATE_DO="Create '%1'",t.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",t.Msg.PROCEDURES_DEFNORETURN_DO="",t.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",t.Msg.PROCEDURES_DEFNORETURN_TITLE="to",t.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",t.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_DEFRETURN_RETURN="return",t.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",t.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",t.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",t.Msg.PROCEDURES_IFRETURN_HELPURL="http://c2.com/cgi/wiki?GuardClause",t.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",t.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",t.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",t.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",t.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",t.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",t.Msg.REDO="Redo",t.Msg.REMOVE_COMMENT="Remove Comment",t.Msg.RENAME_VARIABLE="Rename variable...",t.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",t.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",t.Msg.TEXT_APPEND_TITLE="to %1 append text %2",t.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",t.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",t.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",t.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",t.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",t.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",t.Msg.TEXT_CHARAT_FIRST="get first letter",t.Msg.TEXT_CHARAT_FROM_END="get letter # from end",t.Msg.TEXT_CHARAT_FROM_START="get letter #",t.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",t.Msg.TEXT_CHARAT_LAST="get last letter",t.Msg.TEXT_CHARAT_RANDOM="get random letter",t.Msg.TEXT_CHARAT_TAIL="",t.Msg.TEXT_CHARAT_TITLE="in text %1 %2",t.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",t.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",t.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",t.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",t.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",t.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",t.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",t.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",t.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",t.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",t.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",t.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",t.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",t.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",t.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",t.Msg.TEXT_GET_SUBSTRING_TAIL="",t.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",t.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",t.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",t.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",t.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",t.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",t.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",t.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",t.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",t.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",t.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",t.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",t.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",t.Msg.TEXT_LENGTH_TITLE="length of %1",t.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",t.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",t.Msg.TEXT_PRINT_TITLE="print %1",t.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",t.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",t.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",t.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",t.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",t.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",t.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",t.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",t.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",t.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",t.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",t.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",t.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",t.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",t.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",t.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",t.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",t.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",t.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",t.Msg.TODAY="Today",t.Msg.UNDO="Undo",t.Msg.UNNAMED_KEY="unnamed",t.Msg.VARIABLES_DEFAULT_NAME="item",t.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",t.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",t.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",t.Msg.VARIABLES_SET="set %1 to %2",t.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",t.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",t.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",t.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",t.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",t.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",t.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",t.Msg.CONTROLS_FOREACH_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_FOR_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=t.Msg.CONTROLS_IF_MSG_ELSEIF,t.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=t.Msg.CONTROLS_IF_MSG_ELSE,t.Msg.CONTROLS_IF_IF_TITLE_IF=t.Msg.CONTROLS_IF_MSG_IF,t.Msg.CONTROLS_IF_MSG_THEN=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.LISTS_CREATE_WITH_ITEM_TITLE=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.LISTS_GET_INDEX_HELPURL=t.Msg.LISTS_INDEX_OF_HELPURL,t.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.MATH_CHANGE_TITLE_ITEM=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.PROCEDURES_DEFRETURN_COMMENT=t.Msg.PROCEDURES_DEFNORETURN_COMMENT,t.Msg.PROCEDURES_DEFRETURN_DO=t.Msg.PROCEDURES_DEFNORETURN_DO,t.Msg.PROCEDURES_DEFRETURN_PROCEDURE=t.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,t.Msg.PROCEDURES_DEFRETURN_TITLE=t.Msg.PROCEDURES_DEFNORETURN_TITLE,t.Msg.TEXT_APPEND_VARIABLE=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.MATH_HUE="230",t.Msg.LOOPS_HUE="120",t.Msg.LISTS_HUE="260",t.Msg.LOGIC_HUE="210",t.Msg.VARIABLES_HUE="330",t.Msg.TEXTS_HUE="160",t.Msg.PROCEDURES_HUE="290",t.Msg.COLOUR_HUE="20",t.Msg.VARIABLES_DYNAMIC_HUE="310",t.Msg}.apply($,_))&&(U.exports=e)},68266:function(U){U.exports=function(){"use strict";var $=navigator.userAgent,m=navigator.platform,T=/gecko\/\d/i.test($),_=/MSIE \d/.test($),e=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec($),t=/Edge\/(\d+)/.exec($),n=_||e||t,r=n&&(_?document.documentMode||6:+(t||e)[1]),s=!t&&/WebKit\//.test($),u=s&&/Qt\/\d+\.\d+/.test($),b=!t&&/Chrome\//.test($),x=/Opera\//.test($),B=/Apple Computer/.test(navigator.vendor),Z=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test($),ot=/PhantomJS/.test($),et=B&&(/Mobile\/\w+/.test($)||navigator.maxTouchPoints>2),Tt=/Android/.test($),Pt=et||Tt||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test($),pt=et||/Mac/.test(m),It=/\bCrOS\b/.test($),Ht=/win/i.test(m),Jt=x&&$.match(/Version\/(\d*\.\d*)/);Jt&&(Jt=Number(Jt[1])),Jt&&Jt>=15&&(x=!1,s=!0);var Ct=pt&&(u||x&&(null==Jt||Jt<12.11)),bt=T||n&&r>=9;function st(p){return new RegExp("(^|\\s)"+p+"(?:$|\\s)\\s*")}var ut,gt=function(p,C){var I=p.className,D=st(C).exec(I);if(D){var L=I.slice(D.index+D[0].length);p.className=I.slice(0,D.index)+(L?D[1]+L:"")}};function lt(p){for(var C=p.childNodes.length;C>0;--C)p.removeChild(p.firstChild);return p}function Bt(p,C){return lt(p).appendChild(C)}function Dt(p,C,I,D){var L=document.createElement(p);if(I&&(L.className=I),D&&(L.style.cssText=D),"string"==typeof C)L.appendChild(document.createTextNode(C));else if(C)for(var Y=0;Y<C.length;++Y)L.appendChild(C[Y]);return L}function Et(p,C,I,D){var L=Dt(p,C,I,D);return L.setAttribute("role","presentation"),L}function rt(p,C){if(3==C.nodeType&&(C=C.parentNode),p.contains)return p.contains(C);do{if(11==C.nodeType&&(C=C.host),C==p)return!0}while(C=C.parentNode)}function fe(){var p;try{p=document.activeElement}catch(C){p=document.body||null}for(;p&&p.shadowRoot&&p.shadowRoot.activeElement;)p=p.shadowRoot.activeElement;return p}function Mt(p,C){var I=p.className;st(C).test(I)||(p.className+=(I?" ":"")+C)}function Nt(p,C){for(var I=p.split(" "),D=0;D<I.length;D++)I[D]&&!st(I[D]).test(C)&&(C+=" "+I[D]);return C}ut=document.createRange?function(p,C,I,D){var L=document.createRange();return L.setEnd(D||p,I),L.setStart(p,C),L}:function(p,C,I){var D=document.body.createTextRange();try{D.moveToElementText(p.parentNode)}catch(L){return D}return D.collapse(!0),D.moveEnd("character",I),D.moveStart("character",C),D};var ge=function(p){p.select()};function ve(p){var C=Array.prototype.slice.call(arguments,1);return function(){return p.apply(null,C)}}function pe(p,C,I){for(var D in C||(C={}),p)p.hasOwnProperty(D)&&(!1!==I||!C.hasOwnProperty(D))&&(C[D]=p[D]);return C}function He(p,C,I,D,L){null==C&&-1==(C=p.search(/[^\s\u00a0]/))&&(C=p.length);for(var Y=D||0,ht=L||0;;){var wt=p.indexOf("\t",Y);if(wt<0||wt>=C)return ht+(C-Y);ht+=wt-Y,ht+=I-ht%I,Y=wt+1}}et?ge=function(p){p.selectionStart=0,p.selectionEnd=p.value.length}:n&&(ge=function(p){try{p.select()}catch(C){}});var ke=function(){this.id=null,this.f=null,this.time=0,this.handler=ve(this.onTimeout,this)};function Ze(p,C){for(var I=0;I<p.length;++I)if(p[I]==C)return I;return-1}ke.prototype.onTimeout=function(p){p.id=0,p.time<=+new Date?p.f():setTimeout(p.handler,p.time-+new Date)},ke.prototype.set=function(p,C){this.f=C;var I=+new Date+p;(!this.id||I<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,p),this.time=I)};var $e={toString:function(){return"CodeMirror.Pass"}},Le={scroll:!1},pi={origin:"*mouse"},Gt={origin:"+move"};function Se(p,C,I){for(var D=0,L=0;;){var Y=p.indexOf("\t",D);-1==Y&&(Y=p.length);var ht=Y-D;if(Y==p.length||L+ht>=C)return D+Math.min(ht,C-L);if(L+=Y-D,D=Y+1,(L+=I-L%I)>=C)return D}}var Zt=[""];function ie(p){for(;Zt.length<=p;)Zt.push(St(Zt)+" ");return Zt[p]}function St(p){return p[p.length-1]}function jt(p,C){for(var I=[],D=0;D<p.length;D++)I[D]=C(p[D],D);return I}function ri(){}function Te(p,C){var I;return Object.create?I=Object.create(p):(ri.prototype=p,I=new ri),C&&pe(C,I),I}var te=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function ne(p){return/\w/.test(p)||p>"\x80"&&(p.toUpperCase()!=p.toLowerCase()||te.test(p))}function Oe(p,C){return C?!!(C.source.indexOf("\\w")>-1&&ne(p))||C.test(p):ne(p)}function re(p){for(var C in p)if(p.hasOwnProperty(C)&&p[C])return!1;return!0}var me=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function ye(p){return p.charCodeAt(0)>=768&&me.test(p)}function Qt(p,C,I){for(;(I<0?C>0:C<p.length)&&ye(p.charAt(C));)C+=I;return C}function de(p,C,I){for(var D=C>I?-1:1;;){if(C==I)return C;var L=(C+I)/2,Y=D<0?Math.ceil(L):Math.floor(L);if(Y==C)return p(Y)?C:I;p(Y)?I=Y:C=Y+D}}var ni=null;function Pi(p,C,I){var D;ni=null;for(var L=0;L<p.length;++L){var Y=p[L];if(Y.from<C&&Y.to>C)return L;Y.to==C&&(Y.from!=Y.to&&"before"==I?D=L:ni=L),Y.from==C&&(Y.from!=Y.to&&"before"!=I?D=L:ni=L)}return null!=D?D:ni}var wi=function(){function I($t){return $t<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt($t):1424<=$t&&$t<=1524?"R":1536<=$t&&$t<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt($t-1536):1774<=$t&&$t<=2220?"r":8192<=$t&&$t<=8203?"w":8204==$t?"b":"L"}var D=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,L=/[stwN]/,Y=/[LRr]/,ht=/[Lb1n]/,wt=/[1n]/;function Vt($t,Ie,Ye){this.level=$t,this.from=Ie,this.to=Ye}return function($t,Ie){var Ye="ltr"==Ie?"L":"R";if(0==$t.length||"ltr"==Ie&&!D.test($t))return!1;for(var gi=$t.length,ui=[],Ni=0;Ni<gi;++Ni)ui.push(I($t.charCodeAt(Ni)));for(var Xi=0,tn=Ye;Xi<gi;++Xi){var gn=ui[Xi];"m"==gn?ui[Xi]=tn:tn=gn}for(var Tn=0,cn=Ye;Tn<gi;++Tn){var En=ui[Tn];"1"==En&&"r"==cn?ui[Tn]="n":Y.test(En)&&(cn=En,"r"==En&&(ui[Tn]="R"))}for(var Vn=1,jn=ui[0];Vn<gi-1;++Vn){var fr=ui[Vn];"+"==fr&&"1"==jn&&"1"==ui[Vn+1]?ui[Vn]="1":","==fr&&jn==ui[Vn+1]&&("1"==jn||"n"==jn)&&(ui[Vn]=jn),jn=fr}for(var io=0;io<gi;++io){var ss=ui[io];if(","==ss)ui[io]="N";else if("%"==ss){var zo=void 0;for(zo=io+1;zo<gi&&"%"==ui[zo];++zo);for(var ja=io&&"!"==ui[io-1]||zo<gi&&"1"==ui[zo]?"1":"N",Ya=io;Ya<zo;++Ya)ui[Ya]=ja;io=zo-1}}for(var As=0,Kr=Ye;As<gi;++As){var zs=ui[As];"L"==Kr&&"1"==zs?ui[As]="L":Y.test(zs)&&(Kr=zs)}for(var Os=0;Os<gi;++Os)if(L.test(ui[Os])){var S=void 0;for(S=Os+1;S<gi&&L.test(ui[S]);++S);for(var H="L"==(Os?ui[Os-1]:Ye),it=H==("L"==(S<gi?ui[S]:Ye))?H?"L":"R":Ye,mt=Os;mt<S;++mt)ui[mt]=it;Os=S-1}for(var Yt,Xt=[],le=0;le<gi;)if(ht.test(ui[le])){var we=le;for(++le;le<gi&&ht.test(ui[le]);++le);Xt.push(new Vt(0,we,le))}else{var Me=le,oi=Xt.length,ai="rtl"==Ie?1:0;for(++le;le<gi&&"L"!=ui[le];++le);for(var di=Me;di<le;)if(wt.test(ui[di])){Me<di&&(Xt.splice(oi,0,new Vt(1,Me,di)),oi+=ai);var Ri=di;for(++di;di<le&&wt.test(ui[di]);++di);Xt.splice(oi,0,new Vt(2,Ri,di)),oi+=ai,Me=di}else++di;Me<le&&Xt.splice(oi,0,new Vt(1,Me,le))}return"ltr"==Ie&&(1==Xt[0].level&&(Yt=$t.match(/^\s+/))&&(Xt[0].from=Yt[0].length,Xt.unshift(new Vt(0,0,Yt[0].length))),1==St(Xt).level&&(Yt=$t.match(/\s+$/))&&(St(Xt).to-=Yt[0].length,Xt.push(new Vt(0,gi-Yt[0].length,gi)))),"rtl"==Ie?Xt.reverse():Xt}}();function yi(p,C){var I=p.order;return null==I&&(I=p.order=wi(p.text,C)),I}var dn=[],mi=function(p,C,I){if(p.addEventListener)p.addEventListener(C,I,!1);else if(p.attachEvent)p.attachEvent("on"+C,I);else{var D=p._handlers||(p._handlers={});D[C]=(D[C]||dn).concat(I)}};function Zi(p,C){return p._handlers&&p._handlers[C]||dn}function Re(p,C,I){if(p.removeEventListener)p.removeEventListener(C,I,!1);else if(p.detachEvent)p.detachEvent("on"+C,I);else{var D=p._handlers,L=D&&D[C];if(L){var Y=Ze(L,I);Y>-1&&(D[C]=L.slice(0,Y).concat(L.slice(Y+1)))}}}function xe(p,C){var I=Zi(p,C);if(I.length)for(var D=Array.prototype.slice.call(arguments,2),L=0;L<I.length;++L)I[L].apply(null,D)}function Ci(p,C,I){return"string"==typeof C&&(C={type:C,preventDefault:function(){this.defaultPrevented=!0}}),xe(p,I||C.type,p,C),ue(C)||C.codemirrorIgnore}function je(p){var C=p._handlers&&p._handlers.cursorActivity;if(C)for(var I=p.curOp.cursorActivityHandlers||(p.curOp.cursorActivityHandlers=[]),D=0;D<C.length;++D)-1==Ze(I,C[D])&&I.push(C[D])}function Ii(p,C){return Zi(p,C).length>0}function _i(p){p.prototype.on=function(C,I){mi(this,C,I)},p.prototype.off=function(C,I){Re(this,C,I)}}function Hi(p){p.preventDefault?p.preventDefault():p.returnValue=!1}function Je(p){p.stopPropagation?p.stopPropagation():p.cancelBubble=!0}function ue(p){return null!=p.defaultPrevented?p.defaultPrevented:0==p.returnValue}function kt(p){Hi(p),Je(p)}function ct(p){return p.target||p.srcElement}function Lt(p){var C=p.which;return null==C&&(1&p.button?C=1:2&p.button?C=3:4&p.button&&(C=2)),pt&&p.ctrlKey&&1==C&&(C=3),C}var Ne,qi,ce=function(){if(n&&r<9)return!1;var p=Dt("div");return"draggable"in p||"dragDrop"in p}();function Wi(p){if(null==Ne){var C=Dt("span","\u200b");Bt(p,Dt("span",[C,document.createTextNode("x")])),0!=p.firstChild.offsetHeight&&(Ne=C.offsetWidth<=1&&C.offsetHeight>2&&!(n&&r<8))}var I=Ne?Dt("span","\u200b"):Dt("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px");return I.setAttribute("cm-text",""),I}function Sn(p){if(null!=qi)return qi;var C=Bt(p,document.createTextNode("A\u062eA")),I=ut(C,0,1).getBoundingClientRect(),D=ut(C,1,2).getBoundingClientRect();return lt(p),!(!I||I.left==I.right)&&(qi=D.right-I.right<3)}var p,ir=3!="\n\nb".split(/\n/).length?function(p){for(var C=0,I=[],D=p.length;C<=D;){var L=p.indexOf("\n",C);-1==L&&(L=p.length);var Y=p.slice(C,"\r"==p.charAt(L-1)?L-1:L),ht=Y.indexOf("\r");-1!=ht?(I.push(Y.slice(0,ht)),C+=ht+1):(I.push(Y),C=L+1)}return I}:function(p){return p.split(/\r\n?|\n/)},ci=window.getSelection?function(p){try{return p.selectionStart!=p.selectionEnd}catch(C){return!1}}:function(p){var C;try{C=p.ownerDocument.selection.createRange()}catch(I){}return!(!C||C.parentElement()!=p)&&0!=C.compareEndPoints("StartToEnd",C)},Ke="oncopy"in(p=Dt("div"))||(p.setAttribute("oncopy","return;"),"function"==typeof p.oncopy),Pe=null;var xi={},fn={};function In(p,C){arguments.length>2&&(C.dependencies=Array.prototype.slice.call(arguments,2)),xi[p]=C}function Cr(p){if("string"==typeof p&&fn.hasOwnProperty(p))p=fn[p];else if(p&&"string"==typeof p.name&&fn.hasOwnProperty(p.name)){var C=fn[p.name];"string"==typeof C&&(C={name:C}),(p=Te(C,p)).name=C.name}else{if("string"==typeof p&&/^[\w\-]+\/[\w\-]+\+xml$/.test(p))return Cr("application/xml");if("string"==typeof p&&/^[\w\-]+\/[\w\-]+\+json$/.test(p))return Cr("application/json")}return"string"==typeof p?{name:p}:p||{name:"null"}}function to(p,C){C=Cr(C);var I=xi[C.name];if(!I)return to(p,"text/plain");var D=I(p,C);if(no.hasOwnProperty(C.name)){var L=no[C.name];for(var Y in L)!L.hasOwnProperty(Y)||(D.hasOwnProperty(Y)&&(D["_"+Y]=D[Y]),D[Y]=L[Y])}if(D.name=C.name,C.helperType&&(D.helperType=C.helperType),C.modeProps)for(var ht in C.modeProps)D[ht]=C.modeProps[ht];return D}var no={};function fo(p,C){pe(C,no.hasOwnProperty(p)?no[p]:no[p]={})}function kr(p,C){if(!0===C)return C;if(p.copyState)return p.copyState(C);var I={};for(var D in C){var L=C[D];L instanceof Array&&(L=L.concat([])),I[D]=L}return I}function ar(p,C){for(var I;p.innerMode&&(I=p.innerMode(C))&&I.mode!=p;)C=I.state,p=I.mode;return I||{mode:p,state:C}}function Oo(p,C,I){return!p.startState||p.startState(C,I)}var nr=function(p,C,I){this.pos=this.start=0,this.string=p,this.tabSize=C||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=I};function Mi(p,C){if((C-=p.first)<0||C>=p.size)throw new Error("There is no line "+(C+p.first)+" in the document.");for(var I=p;!I.lines;)for(var D=0;;++D){var L=I.children[D],Y=L.chunkSize();if(C<Y){I=L;break}C-=Y}return I.lines[C]}function Fn(p,C,I){var D=[],L=C.line;return p.iter(C.line,I.line+1,function(Y){var ht=Y.text;L==I.line&&(ht=ht.slice(0,I.ch)),L==C.line&&(ht=ht.slice(C.ch)),D.push(ht),++L}),D}function hr(p,C,I){var D=[];return p.iter(C,I,function(L){D.push(L.text)}),D}function Pr(p,C){var I=C-p.height;if(I)for(var D=p;D;D=D.parent)D.height+=I}function pr(p){if(null==p.parent)return null;for(var C=p.parent,I=Ze(C.lines,p),D=C.parent;D;C=D,D=D.parent)for(var L=0;D.children[L]!=C;++L)I+=D.children[L].chunkSize();return I+C.first}function Sr(p,C){var I=p.first;t:do{for(var D=0;D<p.children.length;++D){var L=p.children[D],Y=L.height;if(C<Y){p=L;continue t}C-=Y,I+=L.chunkSize()}return I}while(!p.lines);for(var ht=0;ht<p.lines.length;++ht){var Vt=p.lines[ht].height;if(C<Vt)break;C-=Vt}return I+ht}function Zr(p,C){return C>=p.first&&C<p.first+p.size}function Rr(p,C){return String(p.lineNumberFormatter(C+p.firstLineNumber))}function Vi(p,C,I){if(void 0===I&&(I=null),!(this instanceof Vi))return new Vi(p,C,I);this.line=p,this.ch=C,this.sticky=I}function On(p,C){return p.line-C.line||p.ch-C.ch}function Gn(p,C){return p.sticky==C.sticky&&0==On(p,C)}function ae(p){return Vi(p.line,p.ch)}function Ue(p,C){return On(p,C)<0?C:p}function Oi(p,C){return On(p,C)<0?p:C}function Ji(p,C){return Math.max(p.first,Math.min(C,p.first+p.size-1))}function Yi(p,C){if(C.line<p.first)return Vi(p.first,0);var I=p.first+p.size-1;return C.line>I?Vi(I,Mi(p,I).text.length):function(p,C){var I=p.ch;return null==I||I>C?Vi(p.line,C):I<0?Vi(p.line,0):p}(C,Mi(p,C.line).text.length)}function zn(p,C){for(var I=[],D=0;D<C.length;D++)I[D]=Yi(p,C[D]);return I}nr.prototype.eol=function(){return this.pos>=this.string.length},nr.prototype.sol=function(){return this.pos==this.lineStart},nr.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},nr.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},nr.prototype.eat=function(p){var C=this.string.charAt(this.pos);if("string"==typeof p?C==p:C&&(p.test?p.test(C):p(C)))return++this.pos,C},nr.prototype.eatWhile=function(p){for(var C=this.pos;this.eat(p););return this.pos>C},nr.prototype.eatSpace=function(){for(var p=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>p},nr.prototype.skipToEnd=function(){this.pos=this.string.length},nr.prototype.skipTo=function(p){var C=this.string.indexOf(p,this.pos);if(C>-1)return this.pos=C,!0},nr.prototype.backUp=function(p){this.pos-=p},nr.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=He(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?He(this.string,this.lineStart,this.tabSize):0)},nr.prototype.indentation=function(){return He(this.string,null,this.tabSize)-(this.lineStart?He(this.string,this.lineStart,this.tabSize):0)},nr.prototype.match=function(p,C,I){if("string"!=typeof p){var Y=this.string.slice(this.pos).match(p);return Y&&Y.index>0?null:(Y&&!1!==C&&(this.pos+=Y[0].length),Y)}var D=function(ht){return I?ht.toLowerCase():ht};if(D(this.string.substr(this.pos,p.length))==D(p))return!1!==C&&(this.pos+=p.length),!0},nr.prototype.current=function(){return this.string.slice(this.start,this.pos)},nr.prototype.hideFirstChars=function(p,C){this.lineStart+=p;try{return C()}finally{this.lineStart-=p}},nr.prototype.lookAhead=function(p){var C=this.lineOracle;return C&&C.lookAhead(p)},nr.prototype.baseToken=function(){var p=this.lineOracle;return p&&p.baseToken(this.pos)};var Yn=function(p,C){this.state=p,this.lookAhead=C},kn=function(p,C,I,D){this.state=C,this.doc=p,this.line=I,this.maxLookAhead=D||0,this.baseTokens=null,this.baseTokenPos=1};function xo(p,C,I,D){var L=[p.state.modeGen],Y={};Ls(p,C.text,p.doc.mode,I,function($t,Ie){return L.push($t,Ie)},Y,D);for(var ht=I.state,wt=function($t){I.baseTokens=L;var Ie=p.state.overlays[$t],Ye=1,gi=0;I.state=!0,Ls(p,C.text,Ie.mode,I,function(ui,Ni){for(var Xi=Ye;gi<ui;){var tn=L[Ye];tn>ui&&L.splice(Ye,1,ui,L[Ye+1],tn),Ye+=2,gi=Math.min(ui,tn)}if(Ni)if(Ie.opaque)L.splice(Xi,Ye-Xi,ui,"overlay "+Ni),Ye=Xi+2;else for(;Xi<Ye;Xi+=2){var gn=L[Xi+1];L[Xi+1]=(gn?gn+" ":"")+"overlay "+Ni}},Y),I.state=ht,I.baseTokens=null,I.baseTokenPos=1},Vt=0;Vt<p.state.overlays.length;++Vt)wt(Vt);return{styles:L,classes:Y.bgClass||Y.textClass?Y:null}}function $o(p,C,I){if(!C.styles||C.styles[0]!=p.state.modeGen){var D=so(p,pr(C)),L=C.text.length>p.options.maxHighlightLength&&kr(p.doc.mode,D.state),Y=xo(p,C,D);L&&(D.state=L),C.stateAfter=D.save(!L),C.styles=Y.styles,Y.classes?C.styleClasses=Y.classes:C.styleClasses&&(C.styleClasses=null),I===p.doc.highlightFrontier&&(p.doc.modeFrontier=Math.max(p.doc.modeFrontier,++p.doc.highlightFrontier))}return C.styles}function so(p,C,I){var D=p.doc,L=p.display;if(!D.mode.startState)return new kn(D,!0,C);var Y=function(p,C,I){for(var D,L,Y=p.doc,ht=I?-1:C-(p.doc.mode.innerMode?1e3:100),wt=C;wt>ht;--wt){if(wt<=Y.first)return Y.first;var Vt=Mi(Y,wt-1),$t=Vt.stateAfter;if($t&&(!I||wt+($t instanceof Yn?$t.lookAhead:0)<=Y.modeFrontier))return wt;var Ie=He(Vt.text,null,p.options.tabSize);(null==L||D>Ie)&&(L=wt-1,D=Ie)}return L}(p,C,I),ht=Y>D.first&&Mi(D,Y-1).stateAfter,wt=ht?kn.fromSaved(D,ht,Y):new kn(D,Oo(D.mode),Y);return D.iter(Y,C,function(Vt){go(p,Vt.text,wt);var $t=wt.line;Vt.stateAfter=$t==C-1||$t%5==0||$t>=L.viewFrom&&$t<L.viewTo?wt.save():null,wt.nextLine()}),I&&(D.modeFrontier=wt.line),wt}function go(p,C,I,D){var L=p.doc.mode,Y=new nr(C,p.options.tabSize,I);for(Y.start=Y.pos=D||0,""==C&&oa(L,I.state);!Y.eol();)lr(L,Y,I.state),Y.start=Y.pos}function oa(p,C){if(p.blankLine)return p.blankLine(C);if(p.innerMode){var I=ar(p,C);if(I.mode.blankLine)return I.mode.blankLine(I.state)}}function lr(p,C,I,D){for(var L=0;L<10;L++){D&&(D[0]=ar(p,I).mode);var Y=p.token(C,I);if(C.pos>C.start)return Y}throw new Error("Mode "+p.name+" failed to advance stream.")}kn.prototype.lookAhead=function(p){var C=this.doc.getLine(this.line+p);return null!=C&&p>this.maxLookAhead&&(this.maxLookAhead=p),C},kn.prototype.baseToken=function(p){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=p;)this.baseTokenPos+=2;var C=this.baseTokens[this.baseTokenPos+1];return{type:C&&C.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-p}},kn.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},kn.fromSaved=function(p,C,I){return C instanceof Yn?new kn(p,kr(p.mode,C.state),I,C.lookAhead):new kn(p,kr(p.mode,C),I)},kn.prototype.save=function(p){var C=!1!==p?kr(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Yn(C,this.maxLookAhead):C};var ts=function(p,C,I){this.start=p.start,this.end=p.pos,this.string=p.current(),this.type=C||null,this.state=I};function eo(p,C,I,D){var ht,Ie,L=p.doc,Y=L.mode,wt=Mi(L,(C=Yi(L,C)).line),Vt=so(p,C.line,I),$t=new nr(wt.text,p.options.tabSize,Vt);for(D&&(Ie=[]);(D||$t.pos<C.ch)&&!$t.eol();)$t.start=$t.pos,ht=lr(Y,$t,Vt.state),D&&Ie.push(new ts($t,ht,kr(L.mode,Vt.state)));return D?Ie:new ts($t,ht,Vt.state)}function ks(p,C){if(p)for(;;){var I=p.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!I)break;p=p.slice(0,I.index)+p.slice(I.index+I[0].length);var D=I[1]?"bgClass":"textClass";null==C[D]?C[D]=I[2]:new RegExp("(?:^|\\s)"+I[2]+"(?:$|\\s)").test(C[D])||(C[D]+=" "+I[2])}return p}function Ls(p,C,I,D,L,Y,ht){var wt=I.flattenSpans;null==wt&&(wt=p.options.flattenSpans);var Ye,Vt=0,$t=null,Ie=new nr(C,p.options.tabSize,D),gi=p.options.addModeClass&&[null];for(""==C&&ks(oa(I,D.state),Y);!Ie.eol();){if(Ie.pos>p.options.maxHighlightLength?(wt=!1,ht&&go(p,C,D,Ie.pos),Ie.pos=C.length,Ye=null):Ye=ks(lr(I,Ie,D.state,gi),Y),gi){var ui=gi[0].name;ui&&(Ye="m-"+(Ye?ui+" "+Ye:ui))}if(!wt||$t!=Ye){for(;Vt<Ie.start;)L(Vt=Math.min(Ie.start,Vt+5e3),$t);$t=Ye}Ie.start=Ie.pos}for(;Vt<Ie.pos;){var Ni=Math.min(Ie.pos,Vt+5e3);L(Ni,$t),Vt=Ni}}var jo=!1,Io=!1;function Ca(p,C,I){this.marker=p,this.from=C,this.to=I}function Zo(p,C){if(p)for(var I=0;I<p.length;++I){var D=p[I];if(D.marker==C)return D}}function sa(p,C){for(var I,D=0;D<p.length;++D)p[D]!=C&&(I||(I=[])).push(p[D]);return I}function Ks(p,C){if(C.full)return null;var I=Zr(p,C.from.line)&&Mi(p,C.from.line).markedSpans,D=Zr(p,C.to.line)&&Mi(p,C.to.line).markedSpans;if(!I&&!D)return null;var L=C.from.ch,Y=C.to.ch,ht=0==On(C.from,C.to),wt=function(p,C,I){var D;if(p)for(var L=0;L<p.length;++L){var Y=p[L],ht=Y.marker;null!=Y.from&&!(ht.inclusiveLeft?Y.from<=C:Y.from<C)&&(Y.from!=C||"bookmark"!=ht.type||I&&Y.marker.insertLeft)||(D||(D=[])).push(new Ca(ht,Y.from,null==Y.to||(ht.inclusiveRight?Y.to>=C:Y.to>C)?null:Y.to))}return D}(I,L,ht),Vt=function(p,C,I){var D;if(p)for(var L=0;L<p.length;++L){var Y=p[L],ht=Y.marker;(null==Y.to||(ht.inclusiveRight?Y.to>=C:Y.to>C)||Y.from==C&&"bookmark"==ht.type&&(!I||Y.marker.insertLeft))&&(D||(D=[])).push(new Ca(ht,null==Y.from||(ht.inclusiveLeft?Y.from<=C:Y.from<C)?null:Y.from-C,null==Y.to?null:Y.to-C))}return D}(D,Y,ht),$t=1==C.text.length,Ie=St(C.text).length+($t?L:0);if(wt)for(var Ye=0;Ye<wt.length;++Ye){var gi=wt[Ye];if(null==gi.to){var ui=Zo(Vt,gi.marker);ui?$t&&(gi.to=null==ui.to?null:ui.to+Ie):gi.to=L}}if(Vt)for(var Ni=0;Ni<Vt.length;++Ni){var Xi=Vt[Ni];null!=Xi.to&&(Xi.to+=Ie),null==Xi.from?Zo(wt,Xi.marker)||(Xi.from=Ie,$t&&(wt||(wt=[])).push(Xi)):(Xi.from+=Ie,$t&&(wt||(wt=[])).push(Xi))}wt&&(wt=Cs(wt)),Vt&&Vt!=wt&&(Vt=Cs(Vt));var gn=[wt];if(!$t){var cn,Tn=C.text.length-2;if(Tn>0&&wt)for(var En=0;En<wt.length;++En)null==wt[En].to&&(cn||(cn=[])).push(new Ca(wt[En].marker,null,null));for(var Vn=0;Vn<Tn;++Vn)gn.push(cn);gn.push(Vt)}return gn}function Cs(p){for(var C=0;C<p.length;++C){var I=p[C];null!=I.from&&I.from==I.to&&!1!==I.marker.clearWhenEmpty&&p.splice(C--,1)}return p.length?p:null}function Sa(p){var C=p.markedSpans;if(C){for(var I=0;I<C.length;++I)C[I].marker.detachLine(p);p.markedSpans=null}}function la(p,C){if(C){for(var I=0;I<C.length;++I)C[I].marker.attachLine(p);p.markedSpans=C}}function ko(p){return p.inclusiveLeft?-1:0}function jr(p){return p.inclusiveRight?1:0}function ho(p,C){var I=p.lines.length-C.lines.length;if(0!=I)return I;var D=p.find(),L=C.find(),Y=On(D.from,L.from)||ko(p)-ko(C);return Y?-Y:On(D.to,L.to)||jr(p)-jr(C)||C.id-p.id}function To(p,C){var D,I=Io&&p.markedSpans;if(I)for(var L=void 0,Y=0;Y<I.length;++Y)(L=I[Y]).marker.collapsed&&null==(C?L.from:L.to)&&(!D||ho(D,L.marker)<0)&&(D=L.marker);return D}function Ns(p){return To(p,!0)}function Yo(p){return To(p,!1)}function Ss(p,C){var D,I=Io&&p.markedSpans;if(I)for(var L=0;L<I.length;++L){var Y=I[L];Y.marker.collapsed&&(null==Y.from||Y.from<C)&&(null==Y.to||Y.to>C)&&(!D||ho(D,Y.marker)<0)&&(D=Y.marker)}return D}function Bo(p,C,I,D,L){var Y=Mi(p,C),ht=Io&&Y.markedSpans;if(ht)for(var wt=0;wt<ht.length;++wt){var Vt=ht[wt];if(Vt.marker.collapsed){var $t=Vt.marker.find(0),Ie=On($t.from,I)||ko(Vt.marker)-ko(L),Ye=On($t.to,D)||jr(Vt.marker)-jr(L);if(!(Ie>=0&&Ye<=0||Ie<=0&&Ye>=0)&&(Ie<=0&&(Vt.marker.inclusiveRight&&L.inclusiveLeft?On($t.to,I)>=0:On($t.to,I)>0)||Ie>=0&&(Vt.marker.inclusiveRight&&L.inclusiveLeft?On($t.from,D)<=0:On($t.from,D)<0)))return!0}}}function Lo(p){for(var C;C=Ns(p);)p=C.find(-1,!0).line;return p}function ao(p,C){var I=Mi(p,C),D=Lo(I);return I==D?C:pr(D)}function fs(p,C){if(C>p.lastLine())return C;var D,I=Mi(p,C);if(!Lr(p,I))return C;for(;D=Yo(I);)I=D.find(1,!0).line;return pr(I)+1}function Lr(p,C){var I=Io&&C.markedSpans;if(I)for(var D=void 0,L=0;L<I.length;++L)if((D=I[L]).marker.collapsed){if(null==D.from)return!0;if(!D.marker.widgetNode&&0==D.from&&D.marker.inclusiveLeft&&Js(p,C,D))return!0}}function Js(p,C,I){if(null==I.to){var D=I.marker.find(1,!0);return Js(p,D.line,Zo(D.line.markedSpans,I.marker))}if(I.marker.inclusiveRight&&I.to==C.text.length)return!0;for(var L=void 0,Y=0;Y<C.markedSpans.length;++Y)if((L=C.markedSpans[Y]).marker.collapsed&&!L.marker.widgetNode&&L.from==I.to&&(null==L.to||L.to!=I.from)&&(L.marker.inclusiveLeft||I.marker.inclusiveRight)&&Js(p,C,L))return!0}function Ar(p){for(var C=0,I=(p=Lo(p)).parent,D=0;D<I.lines.length;++D){var L=I.lines[D];if(L==p)break;C+=L.height}for(var Y=I.parent;Y;Y=(I=Y).parent)for(var ht=0;ht<Y.children.length;++ht){var wt=Y.children[ht];if(wt==I)break;C+=wt.height}return C}function $s(p){if(0==p.height)return 0;for(var I,C=p.text.length,D=p;I=Ns(D);){var L=I.find(0,!0);D=L.from.line,C+=L.from.ch-L.to.ch}for(D=p;I=Yo(D);){var Y=I.find(0,!0);C-=D.text.length-Y.from.ch,C+=(D=Y.to.line).text.length-Y.to.ch}return C}function ol(p){var C=p.display,I=p.doc;C.maxLine=Mi(I,I.first),C.maxLineLength=$s(C.maxLine),C.maxLineChanged=!0,I.iter(function(D){var L=$s(D);L>C.maxLineLength&&(C.maxLineLength=L,C.maxLine=D)})}var is=function(p,C,I){this.text=p,la(this,C),this.height=I?I(this):1};function cs(p){p.parent=null,Sa(p)}is.prototype.lineNo=function(){return pr(this)},_i(is);var Cl={},Nr={};function Ln(p,C){if(!p||/^\s*$/.test(p))return null;var I=C.addModeClass?Nr:Cl;return I[p]||(I[p]=p.replace(/\S+/g,"cm-$&"))}function ma(p,C){var I=Et("span",null,null,s?"padding-right: .1px":null),D={pre:Et("pre",[I],"CodeMirror-line"),content:I,col:0,pos:0,cm:p,trailingSpace:!1,splitSpaces:p.getOption("lineWrapping")};C.measure={};for(var L=0;L<=(C.rest?C.rest.length:0);L++){var Y=L?C.rest[L-1]:C.line,ht=void 0;D.pos=0,D.addToken=Q,Sn(p.display.measure)&&(ht=yi(Y,p.doc.direction))&&(D.addToken=W(D.addToken,ht)),D.map=[],Be(Y,D,$o(p,Y,C!=p.display.externalMeasured&&pr(Y))),Y.styleClasses&&(Y.styleClasses.bgClass&&(D.bgClass=Nt(Y.styleClasses.bgClass,D.bgClass||"")),Y.styleClasses.textClass&&(D.textClass=Nt(Y.styleClasses.textClass,D.textClass||""))),0==D.map.length&&D.map.push(0,0,D.content.appendChild(Wi(p.display.measure))),0==L?(C.measure.map=D.map,C.measure.cache={}):((C.measure.maps||(C.measure.maps=[])).push(D.map),(C.measure.caches||(C.measure.caches=[])).push({}))}if(s){var Vt=D.content.lastChild;(/\bcm-tab\b/.test(Vt.className)||Vt.querySelector&&Vt.querySelector(".cm-tab"))&&(D.content.className="cm-tab-wrap-hack")}return xe(p,"renderLine",p,C.line,D.pre),D.pre.className&&(D.textClass=Nt(D.pre.className,D.textClass||"")),D}function xt(p){var C=Dt("span","\u2022","cm-invalidchar");return C.title="\\u"+p.charCodeAt(0).toString(16),C.setAttribute("aria-label",C.title),C}function Q(p,C,I,D,L,Y,ht){if(C){var Ie,wt=p.splitSpaces?function(p,C){if(p.length>1&&!/  /.test(p))return p;for(var I=C,D="",L=0;L<p.length;L++){var Y=p.charAt(L);" "==Y&&I&&(L==p.length-1||32==p.charCodeAt(L+1))&&(Y="\xa0"),D+=Y,I=" "==Y}return D}(C,p.trailingSpace):C,Vt=p.cm.state.specialChars,$t=!1;if(Vt.test(C)){Ie=document.createDocumentFragment();for(var Ye=0;;){Vt.lastIndex=Ye;var gi=Vt.exec(C),ui=gi?gi.index-Ye:C.length-Ye;if(ui){var Ni=document.createTextNode(wt.slice(Ye,Ye+ui));Ie.appendChild(n&&r<9?Dt("span",[Ni]):Ni),p.map.push(p.pos,p.pos+ui,Ni),p.col+=ui,p.pos+=ui}if(!gi)break;Ye+=ui+1;var Xi=void 0;if("\t"==gi[0]){var tn=p.cm.options.tabSize,gn=tn-p.col%tn;(Xi=Ie.appendChild(Dt("span",ie(gn),"cm-tab"))).setAttribute("role","presentation"),Xi.setAttribute("cm-text","\t"),p.col+=gn}else"\r"==gi[0]||"\n"==gi[0]?((Xi=Ie.appendChild(Dt("span","\r"==gi[0]?"\u240d":"\u2424","cm-invalidchar"))).setAttribute("cm-text",gi[0]),p.col+=1):((Xi=p.cm.options.specialCharPlaceholder(gi[0])).setAttribute("cm-text",gi[0]),Ie.appendChild(n&&r<9?Dt("span",[Xi]):Xi),p.col+=1);p.map.push(p.pos,p.pos+1,Xi),p.pos++}}else p.col+=C.length,Ie=document.createTextNode(wt),p.map.push(p.pos,p.pos+C.length,Ie),n&&r<9&&($t=!0),p.pos+=C.length;if(p.trailingSpace=32==wt.charCodeAt(C.length-1),I||D||L||$t||Y||ht){var Tn=I||"";D&&(Tn+=D),L&&(Tn+=L);var cn=Dt("span",[Ie],Tn,Y);if(ht)for(var En in ht)ht.hasOwnProperty(En)&&"style"!=En&&"class"!=En&&cn.setAttribute(En,ht[En]);return p.content.appendChild(cn)}p.content.appendChild(Ie)}}function W(p,C){return function(I,D,L,Y,ht,wt,Vt){L=L?L+" cm-force-border":"cm-force-border";for(var $t=I.pos,Ie=$t+D.length;;){for(var Ye=void 0,gi=0;gi<C.length&&!((Ye=C[gi]).to>$t&&Ye.from<=$t);gi++);if(Ye.to>=Ie)return p(I,D,L,Y,ht,wt,Vt);p(I,D.slice(0,Ye.to-$t),L,Y,null,wt,Vt),Y=null,D=D.slice(Ye.to-$t),$t=Ye.to}}}function At(p,C,I,D){var L=!D&&I.widgetNode;L&&p.map.push(p.pos,p.pos+C,L),!D&&p.cm.display.input.needsContentAttribute&&(L||(L=p.content.appendChild(document.createElement("span"))),L.setAttribute("cm-marker",I.id)),L&&(p.cm.display.input.setUneditable(L),p.content.appendChild(L)),p.pos+=C,p.trailingSpace=!1}function Be(p,C,I){var D=p.markedSpans,L=p.text,Y=0;if(D)for(var Ye,gi,Ni,Xi,tn,gn,Tn,wt=L.length,Vt=0,$t=1,Ie="",ui=0;;){if(ui==Vt){Ni=Xi=tn=gi="",Tn=null,gn=null,ui=1/0;for(var cn=[],En=void 0,Vn=0;Vn<D.length;++Vn){var jn=D[Vn],fr=jn.marker;if("bookmark"==fr.type&&jn.from==Vt&&fr.widgetNode)cn.push(fr);else if(jn.from<=Vt&&(null==jn.to||jn.to>Vt||fr.collapsed&&jn.to==Vt&&jn.from==Vt)){if(null!=jn.to&&jn.to!=Vt&&ui>jn.to&&(ui=jn.to,Xi=""),fr.className&&(Ni+=" "+fr.className),fr.css&&(gi=(gi?gi+";":"")+fr.css),fr.startStyle&&jn.from==Vt&&(tn+=" "+fr.startStyle),fr.endStyle&&jn.to==ui&&(En||(En=[])).push(fr.endStyle,jn.to),fr.title&&((Tn||(Tn={})).title=fr.title),fr.attributes)for(var io in fr.attributes)(Tn||(Tn={}))[io]=fr.attributes[io];fr.collapsed&&(!gn||ho(gn.marker,fr)<0)&&(gn=jn)}else jn.from>Vt&&ui>jn.from&&(ui=jn.from)}if(En)for(var ss=0;ss<En.length;ss+=2)En[ss+1]==ui&&(Xi+=" "+En[ss]);if(!gn||gn.from==Vt)for(var zo=0;zo<cn.length;++zo)At(C,0,cn[zo]);if(gn&&(gn.from||0)==Vt){if(At(C,(null==gn.to?wt+1:gn.to)-Vt,gn.marker,null==gn.from),null==gn.to)return;gn.to==Vt&&(gn=!1)}}if(Vt>=wt)break;for(var ja=Math.min(wt,ui);;){if(Ie){var Ya=Vt+Ie.length;if(!gn){var As=Ya>ja?Ie.slice(0,ja-Vt):Ie;C.addToken(C,As,Ye?Ye+Ni:Ni,tn,Vt+As.length==ui?Xi:"",gi,Tn)}if(Ya>=ja){Ie=Ie.slice(ja-Vt),Vt=ja;break}Vt=Ya,tn=""}Ie=L.slice(Y,Y=I[$t++]),Ye=Ln(I[$t++],C.cm.options)}}else for(var ht=1;ht<I.length;ht+=2)C.addToken(C,L.slice(Y,Y=I[ht]),Ln(I[ht+1],C.cm.options))}function vi(p,C,I){this.line=C,this.rest=function(p){for(var C,I;C=Yo(p);)p=C.find(1,!0).line,(I||(I=[])).push(p);return I}(C),this.size=this.rest?pr(St(this.rest))-I+1:1,this.node=this.text=null,this.hidden=Lr(p,C)}function ln(p,C,I){for(var L,D=[],Y=C;Y<I;Y=L){var ht=new vi(p.doc,Mi(p.doc,Y),Y);L=Y+ht.size,D.push(ht)}return D}var Xn=null;var Qr=null;function cr(p,C){var I=Zi(p,C);if(I.length){var L,D=Array.prototype.slice.call(arguments,2);Xn?L=Xn.delayedCallbacks:Qr?L=Qr:(L=Qr=[],setTimeout(Xo,0));for(var Y=function(wt){L.push(function(){return I[wt].apply(null,D)})},ht=0;ht<I.length;++ht)Y(ht)}}function Xo(){var p=Qr;Qr=null;for(var C=0;C<p.length;++C)p[C]()}function Hn(p,C,I,D){for(var L=0;L<C.changes.length;L++){var Y=C.changes[L];"text"==Y?$a(p,C):"gutter"==Y?Ps(p,C,I,D):"class"==Y?Rs(p,C):"widget"==Y&&wc(p,C,D)}C.changes=null}function us(p){return p.node==p.text&&(p.node=Dt("div",null,null,"position: relative"),p.text.parentNode&&p.text.parentNode.replaceChild(p.node,p.text),p.node.appendChild(p.text),n&&r<8&&(p.node.style.zIndex=2)),p.node}function Uo(p,C){var I=p.display.externalMeasured;return I&&I.line==C.line?(p.display.externalMeasured=null,C.measure=I.measure,I.built):ma(p,C)}function $a(p,C){var I=C.text.className,D=Uo(p,C);C.text==C.node&&(C.node=D.pre),C.text.parentNode.replaceChild(D.pre,C.text),C.text=D.pre,D.bgClass!=C.bgClass||D.textClass!=C.textClass?(C.bgClass=D.bgClass,C.textClass=D.textClass,Rs(p,C)):I&&(C.text.className=I)}function Rs(p,C){(function(p,C){var I=C.bgClass?C.bgClass+" "+(C.line.bgClass||""):C.line.bgClass;if(I&&(I+=" CodeMirror-linebackground"),C.background)I?C.background.className=I:(C.background.parentNode.removeChild(C.background),C.background=null);else if(I){var D=us(C);C.background=D.insertBefore(Dt("div",null,I),D.firstChild),p.display.input.setUneditable(C.background)}})(p,C),C.line.wrapClass?us(C).className=C.line.wrapClass:C.node!=C.text&&(C.node.className=""),C.text.className=(C.textClass?C.textClass+" "+(C.line.textClass||""):C.line.textClass)||""}function Ps(p,C,I,D){if(C.gutter&&(C.node.removeChild(C.gutter),C.gutter=null),C.gutterBackground&&(C.node.removeChild(C.gutterBackground),C.gutterBackground=null),C.line.gutterClass){var L=us(C);C.gutterBackground=Dt("div",null,"CodeMirror-gutter-background "+C.line.gutterClass,"left: "+(p.options.fixedGutter?D.fixedPos:-D.gutterTotalWidth)+"px; width: "+D.gutterTotalWidth+"px"),p.display.input.setUneditable(C.gutterBackground),L.insertBefore(C.gutterBackground,C.text)}var Y=C.line.gutterMarkers;if(p.options.lineNumbers||Y){var ht=us(C),wt=C.gutter=Dt("div",null,"CodeMirror-gutter-wrapper","left: "+(p.options.fixedGutter?D.fixedPos:-D.gutterTotalWidth)+"px");if(wt.setAttribute("aria-hidden","true"),p.display.input.setUneditable(wt),ht.insertBefore(wt,C.text),C.line.gutterClass&&(wt.className+=" "+C.line.gutterClass),p.options.lineNumbers&&(!Y||!Y["CodeMirror-linenumbers"])&&(C.lineNumber=wt.appendChild(Dt("div",Rr(p.options,I),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+D.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+p.display.lineNumInnerWidth+"px"))),Y)for(var Vt=0;Vt<p.display.gutterSpecs.length;++Vt){var $t=p.display.gutterSpecs[Vt].className,Ie=Y.hasOwnProperty($t)&&Y[$t];Ie&&wt.appendChild(Dt("div",[Ie],"CodeMirror-gutter-elt","left: "+D.gutterLeft[$t]+"px; width: "+D.gutterWidth[$t]+"px"))}}}function wc(p,C,I){C.alignable&&(C.alignable=null);for(var D=st("CodeMirror-linewidget"),L=C.node.firstChild,Y=void 0;L;L=Y)Y=L.nextSibling,D.test(L.className)&&C.node.removeChild(L);G(p,C,I)}function Wt(p,C,I,D){var L=Uo(p,C);return C.text=C.node=L.pre,L.bgClass&&(C.bgClass=L.bgClass),L.textClass&&(C.textClass=L.textClass),Rs(p,C),Ps(p,C,I,D),G(p,C,D),C.node}function G(p,C,I){if(K(p,C.line,C,I,!0),C.rest)for(var D=0;D<C.rest.length;D++)K(p,C.rest[D],C,I,!1)}function K(p,C,I,D,L){if(C.widgets)for(var Y=us(I),ht=0,wt=C.widgets;ht<wt.length;++ht){var Vt=wt[ht],$t=Dt("div",[Vt.node],"CodeMirror-linewidget"+(Vt.className?" "+Vt.className:""));Vt.handleMouseEvents||$t.setAttribute("cm-ignore-events","true"),_t(Vt,$t,I,D),p.display.input.setUneditable($t),L&&Vt.above?Y.insertBefore($t,I.gutter||I.text):Y.appendChild($t),cr(Vt,"redraw")}}function _t(p,C,I,D){if(p.noHScroll){(I.alignable||(I.alignable=[])).push(C);var L=D.wrapperWidth;C.style.left=D.fixedPos+"px",p.coverGutter||(L-=D.gutterTotalWidth,C.style.paddingLeft=D.gutterTotalWidth+"px"),C.style.width=L+"px"}p.coverGutter&&(C.style.zIndex=5,C.style.position="relative",p.noHScroll||(C.style.marginLeft=-D.gutterTotalWidth+"px"))}function ee(p){if(null!=p.height)return p.height;var C=p.doc.cm;if(!C)return 0;if(!rt(document.body,p.node)){var I="position: relative;";p.coverGutter&&(I+="margin-left: -"+C.display.gutters.offsetWidth+"px;"),p.noHScroll&&(I+="width: "+C.display.wrapper.clientWidth+"px;"),Bt(C.display.measure,Dt("div",[p.node],null,I))}return p.height=p.node.parentNode.offsetHeight}function be(p,C){for(var I=ct(C);I!=p.wrapper;I=I.parentNode)if(!I||1==I.nodeType&&"true"==I.getAttribute("cm-ignore-events")||I.parentNode==p.sizer&&I!=p.mover)return!0}function Xe(p){return p.lineSpace.offsetTop}function qe(p){return p.mover.offsetHeight-p.lineSpace.offsetHeight}function bi(p){if(p.cachedPaddingH)return p.cachedPaddingH;var C=Bt(p.measure,Dt("pre","x","CodeMirror-line-like")),I=window.getComputedStyle?window.getComputedStyle(C):C.currentStyle,D={left:parseInt(I.paddingLeft),right:parseInt(I.paddingRight)};return!isNaN(D.left)&&!isNaN(D.right)&&(p.cachedPaddingH=D),D}function Ui(p){return 50-p.display.nativeBarWidth}function hn(p){return p.display.scroller.clientWidth-Ui(p)-p.display.barWidth}function Cn(p){return p.display.scroller.clientHeight-Ui(p)-p.display.barHeight}function Qn(p,C,I){if(p.line==C)return{map:p.measure.map,cache:p.measure.cache};if(p.rest){for(var D=0;D<p.rest.length;D++)if(p.rest[D]==C)return{map:p.measure.maps[D],cache:p.measure.caches[D]};for(var L=0;L<p.rest.length;L++)if(pr(p.rest[L])>I)return{map:p.measure.maps[L],cache:p.measure.caches[L],before:!0}}}function tr(p,C,I,D){return Yr(p,wr(p,C),I,D)}function er(p,C){if(C>=p.display.viewFrom&&C<p.display.viewTo)return p.display.view[vs(p,C)];var I=p.display.externalMeasured;return I&&C>=I.lineN&&C<I.lineN+I.size?I:void 0}function wr(p,C){var I=pr(C),D=er(p,I);D&&!D.text?D=null:D&&D.changes&&(Hn(p,D,I,Hs(p)),p.curOp.forceUpdate=!0),D||(D=function(p,C){var I=pr(C=Lo(C)),D=p.display.externalMeasured=new vi(p.doc,C,I);D.lineN=I;var L=D.built=ma(p,D);return D.text=L.pre,Bt(p.display.lineMeasure,L.pre),D}(p,C));var L=Qn(D,C,I);return{line:C,view:D,rect:null,map:L.map,cache:L.cache,before:L.before,hasHeights:!1}}function Yr(p,C,I,D,L){C.before&&(I=-1);var ht,Y=I+(D||"");return C.cache.hasOwnProperty(Y)?ht=C.cache[Y]:(C.rect||(C.rect=C.view.text.getBoundingClientRect()),C.hasHeights||(function(p,C,I){var D=p.options.lineWrapping,L=D&&hn(p);if(!C.measure.heights||D&&C.measure.width!=L){var Y=C.measure.heights=[];if(D){C.measure.width=L;for(var ht=C.text.firstChild.getClientRects(),wt=0;wt<ht.length-1;wt++){var Vt=ht[wt],$t=ht[wt+1];Math.abs(Vt.bottom-$t.bottom)>2&&Y.push((Vt.bottom+$t.top)/2-I.top)}}Y.push(I.bottom-I.top)}}(p,C.view,C.rect),C.hasHeights=!0),(ht=function(p,C,I,D){var $t,L=Vo(C.map,I,D),Y=L.node,ht=L.start,wt=L.end,Vt=L.collapse;if(3==Y.nodeType){for(var Ie=0;Ie<4;Ie++){for(;ht&&ye(C.line.text.charAt(L.coverStart+ht));)--ht;for(;L.coverStart+wt<L.coverEnd&&ye(C.line.text.charAt(L.coverStart+wt));)++wt;if(($t=n&&r<9&&0==ht&&wt==L.coverEnd-L.coverStart?Y.parentNode.getBoundingClientRect():La(ut(Y,ht,wt).getClientRects(),D)).left||$t.right||0==ht)break;wt=ht,ht-=1,Vt="right"}n&&r<11&&($t=function(p,C){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(p){if(null!=Pe)return Pe;var C=Bt(p,Dt("span","x")),I=C.getBoundingClientRect(),D=ut(C,0,1).getBoundingClientRect();return Pe=Math.abs(I.left-D.left)>1}(p))return C;var I=screen.logicalXDPI/screen.deviceXDPI,D=screen.logicalYDPI/screen.deviceYDPI;return{left:C.left*I,right:C.right*I,top:C.top*D,bottom:C.bottom*D}}(p.display.measure,$t))}else{var Ye;ht>0&&(Vt=D="right"),$t=p.options.lineWrapping&&(Ye=Y.getClientRects()).length>1?Ye["right"==D?Ye.length-1:0]:Y.getBoundingClientRect()}if(n&&r<9&&!ht&&(!$t||!$t.left&&!$t.right)){var gi=Y.parentNode.getClientRects()[0];$t=gi?{left:gi.left,right:gi.left+_s(p.display),top:gi.top,bottom:gi.bottom}:ro}for(var ui=$t.top-C.rect.top,Ni=$t.bottom-C.rect.top,Xi=(ui+Ni)/2,tn=C.view.measure.heights,gn=0;gn<tn.length-1&&!(Xi<tn[gn]);gn++);var En={left:("right"==Vt?$t.right:$t.left)-C.rect.left,right:("left"==Vt?$t.left:$t.right)-C.rect.left,top:gn?tn[gn-1]:0,bottom:tn[gn]};return!$t.left&&!$t.right&&(En.bogus=!0),p.options.singleCursorHeightPerLine||(En.rtop=ui,En.rbottom=Ni),En}(p,C,I,D)).bogus||(C.cache[Y]=ht)),{left:ht.left,right:ht.right,top:L?ht.rtop:ht.top,bottom:L?ht.rbottom:ht.bottom}}var Fr,ro={left:0,right:0,top:0,bottom:0};function Vo(p,C,I){for(var D,L,Y,ht,wt,Vt,$t=0;$t<p.length;$t+=3)if(Vt=p[$t+1],C<(wt=p[$t])?(L=0,Y=1,ht="left"):C<Vt?Y=1+(L=C-wt):($t==p.length-3||C==Vt&&p[$t+3]>C)&&(L=(Y=Vt-wt)-1,C>=Vt&&(ht="right")),null!=L){if(D=p[$t+2],wt==Vt&&I==(D.insertLeft?"left":"right")&&(ht=I),"left"==I&&0==L)for(;$t&&p[$t-2]==p[$t-3]&&p[$t-1].insertLeft;)D=p[2+($t-=3)],ht="left";if("right"==I&&L==Vt-wt)for(;$t<p.length-3&&p[$t+3]==p[$t+4]&&!p[$t+5].insertLeft;)D=p[($t+=3)+2],ht="right";break}return{node:D,start:L,end:Y,collapse:ht,coverStart:wt,coverEnd:Vt}}function La(p,C){var I=ro;if("left"==C)for(var D=0;D<p.length&&(I=p[D]).left==I.right;D++);else for(var L=p.length-1;L>=0&&(I=p[L]).left==I.right;L--);return I}function Zs(p){if(p.measure&&(p.measure.cache={},p.measure.heights=null,p.rest))for(var C=0;C<p.rest.length;C++)p.measure.caches[C]={}}function gs(p){p.display.externalMeasure=null,lt(p.display.lineMeasure);for(var C=0;C<p.display.view.length;C++)Zs(p.display.view[C])}function Bs(p){gs(p),p.display.cachedCharWidth=p.display.cachedTextHeight=p.display.cachedPaddingH=null,p.options.lineWrapping||(p.display.maxLineChanged=!0),p.display.lineNumChars=null}function sl(){return b&&Tt?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Na(){return b&&Tt?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Qs(p){var C=0;if(p.widgets)for(var I=0;I<p.widgets.length;++I)p.widgets[I].above&&(C+=ee(p.widgets[I]));return C}function mo(p,C,I,D,L){if(!L){var Y=Qs(C);I.top+=Y,I.bottom+=Y}if("line"==D)return I;D||(D="local");var ht=Ar(C);if("local"==D?ht+=Xe(p.display):ht-=p.display.viewOffset,"page"==D||"window"==D){var wt=p.display.lineSpace.getBoundingClientRect();ht+=wt.top+("window"==D?0:Na());var Vt=wt.left+("window"==D?0:sl());I.left+=Vt,I.right+=Vt}return I.top+=ht,I.bottom+=ht,I}function Pa(p,C,I){if("div"==I)return C;var D=C.left,L=C.top;if("page"==I)D-=sl(),L-=Na();else if("local"==I||!I){var Y=p.display.sizer.getBoundingClientRect();D+=Y.left,L+=Y.top}var ht=p.display.lineSpace.getBoundingClientRect();return{left:D-ht.left,top:L-ht.top}}function Dn(p,C,I,D,L){return D||(D=Mi(p.doc,C.line)),mo(p,D,tr(p,D,C.ch,L),I)}function An(p,C,I,D,L,Y){function ht(Ni,Xi){var tn=Yr(p,L,Ni,Xi?"right":"left",Y);return Xi?tn.left=tn.right:tn.right=tn.left,mo(p,D,tn,I)}D=D||Mi(p.doc,C.line),L||(L=wr(p,D));var wt=yi(D,p.doc.direction),Vt=C.ch,$t=C.sticky;if(Vt>=D.text.length?(Vt=D.text.length,$t="before"):Vt<=0&&(Vt=0,$t="after"),!wt)return ht("before"==$t?Vt-1:Vt,"before"==$t);function Ie(Ni,Xi,tn){return ht(tn?Ni-1:Ni,1==wt[Xi].level!=tn)}var Ye=Pi(wt,Vt,$t),gi=ni,ui=Ie(Vt,Ye,"before"==$t);return null!=gi&&(ui.other=Ie(Vt,gi,"before"!=$t)),ui}function rr(p,C){var I=0;C=Yi(p.doc,C),p.options.lineWrapping||(I=_s(p.display)*C.ch);var D=Mi(p.doc,C.line),L=Ar(D)+Xe(p.display);return{left:I,right:I,top:L,bottom:L+D.height}}function ur(p,C,I,D,L){var Y=Vi(p,C,I);return Y.xRel=L,D&&(Y.outside=D),Y}function Er(p,C,I){var D=p.doc;if((I+=p.display.viewOffset)<0)return ur(D.first,0,null,-1,-1);var L=Sr(D,I),Y=D.first+D.size-1;if(L>Y)return ur(D.first+D.size-1,Mi(D,Y).text.length,null,1,1);C<0&&(C=0);for(var ht=Mi(D,L);;){var wt=_o(p,ht,L,C,I),Vt=Ss(ht,wt.ch+(wt.xRel>0||wt.outside>0?1:0));if(!Vt)return wt;var $t=Vt.find(1);if($t.line==L)return $t;ht=Mi(D,L=$t.line)}}function ns(p,C,I,D){D-=Qs(C);var L=C.text.length,Y=de(function(ht){return Yr(p,I,ht-1).bottom<=D},L,0);return{begin:Y,end:L=de(function(ht){return Yr(p,I,ht).top>D},Y,L)}}function Ir(p,C,I,D){return I||(I=wr(p,C)),ns(p,C,I,mo(p,C,Yr(p,I,D),"line").top)}function ms(p,C,I,D){return!(p.bottom<=I)&&(p.top>I||(D?p.left:p.right)>C)}function _o(p,C,I,D,L){L-=Ar(C);var Y=wr(p,C),ht=Qs(C),wt=0,Vt=C.text.length,$t=!0,Ie=yi(C,p.doc.direction);if(Ie){var Ye=(p.options.lineWrapping?Za:al)(p,C,I,Y,Ie,D,L);wt=($t=1!=Ye.level)?Ye.from:Ye.to-1,Vt=$t?Ye.to:Ye.from-1}var Xi,tn,gi=null,ui=null,Ni=de(function(Vn){var jn=Yr(p,Y,Vn);return jn.top+=ht,jn.bottom+=ht,!!ms(jn,D,L,!1)&&(jn.top<=L&&jn.left<=D&&(gi=Vn,ui=jn),!0)},wt,Vt),gn=!1;if(ui){var Tn=D-ui.left<ui.right-D,cn=Tn==$t;Ni=gi+(cn?0:1),tn=cn?"after":"before",Xi=Tn?ui.left:ui.right}else{!$t&&(Ni==Vt||Ni==wt)&&Ni++,tn=0==Ni?"after":Ni==C.text.length?"before":Yr(p,Y,Ni-($t?1:0)).bottom+ht<=L==$t?"after":"before";var En=An(p,Vi(I,Ni,tn),"line",C,Y);Xi=En.left,gn=L<En.top?-1:L>=En.bottom?1:0}return ur(I,Ni=Qt(C.text,Ni,1),tn,gn,D-Xi)}function al(p,C,I,D,L,Y,ht){var wt=de(function(Ye){var gi=L[Ye],ui=1!=gi.level;return ms(An(p,Vi(I,ui?gi.to:gi.from,ui?"before":"after"),"line",C,D),Y,ht,!0)},0,L.length-1),Vt=L[wt];if(wt>0){var $t=1!=Vt.level,Ie=An(p,Vi(I,$t?Vt.from:Vt.to,$t?"after":"before"),"line",C,D);ms(Ie,Y,ht,!0)&&Ie.top>ht&&(Vt=L[wt-1])}return Vt}function Za(p,C,I,D,L,Y,ht){var wt=ns(p,C,D,ht),Vt=wt.begin,$t=wt.end;/\s/.test(C.text.charAt($t-1))&&$t--;for(var Ie=null,Ye=null,gi=0;gi<L.length;gi++){var ui=L[gi];if(!(ui.from>=$t||ui.to<=Vt)){var Xi=Yr(p,D,1!=ui.level?Math.min($t,ui.to)-1:Math.max(Vt,ui.from)).right,tn=Xi<Y?Y-Xi+1e9:Xi-Y;(!Ie||Ye>tn)&&(Ie=ui,Ye=tn)}}return Ie||(Ie=L[L.length-1]),Ie.from<Vt&&(Ie={from:Vt,to:Ie.to,level:Ie.level}),Ie.to>$t&&(Ie={from:Ie.from,to:$t,level:Ie.level}),Ie}function ca(p){if(null!=p.cachedTextHeight)return p.cachedTextHeight;if(null==Fr){Fr=Dt("pre",null,"CodeMirror-line-like");for(var C=0;C<49;++C)Fr.appendChild(document.createTextNode("x")),Fr.appendChild(Dt("br"));Fr.appendChild(document.createTextNode("x"))}Bt(p.measure,Fr);var I=Fr.offsetHeight/50;return I>3&&(p.cachedTextHeight=I),lt(p.measure),I||1}function _s(p){if(null!=p.cachedCharWidth)return p.cachedCharWidth;var C=Dt("span","xxxxxxxxxx"),I=Dt("pre",[C],"CodeMirror-line-like");Bt(p.measure,I);var D=C.getBoundingClientRect(),L=(D.right-D.left)/10;return L>2&&(p.cachedCharWidth=L),L||10}function Hs(p){for(var C=p.display,I={},D={},L=C.gutters.clientLeft,Y=C.gutters.firstChild,ht=0;Y;Y=Y.nextSibling,++ht){var wt=p.display.gutterSpecs[ht].className;I[wt]=Y.offsetLeft+Y.clientLeft+L,D[wt]=Y.clientWidth}return{fixedPos:Ds(C),gutterTotalWidth:C.gutters.offsetWidth,gutterLeft:I,gutterWidth:D,wrapperWidth:C.wrapper.clientWidth}}function Ds(p){return p.scroller.getBoundingClientRect().left-p.sizer.getBoundingClientRect().left}function _a(p){var C=ca(p.display),I=p.options.lineWrapping,D=I&&Math.max(5,p.display.scroller.clientWidth/_s(p.display)-3);return function(L){if(Lr(p.doc,L))return 0;var Y=0;if(L.widgets)for(var ht=0;ht<L.widgets.length;ht++)L.widgets[ht].height&&(Y+=L.widgets[ht].height);return I?Y+(Math.ceil(L.text.length/D)||1)*C:Y+C}}function Ol(p){var C=p.doc,I=_a(p);C.iter(function(D){var L=I(D);L!=D.height&&Pr(D,L)})}function ll(p,C,I,D){var L=p.display;if(!I&&"true"==ct(C).getAttribute("cm-not-content"))return null;var Y,ht,wt=L.lineSpace.getBoundingClientRect();try{Y=C.clientX-wt.left,ht=C.clientY-wt.top}catch(Ye){return null}var $t,Vt=Er(p,Y,ht);if(D&&Vt.xRel>0&&($t=Mi(p.doc,Vt.line).text).length==Vt.ch){var Ie=He($t,$t.length,p.options.tabSize)-$t.length;Vt=Vi(Vt.line,Math.max(0,Math.round((Y-bi(p.display).left)/_s(p.display))-Ie))}return Vt}function vs(p,C){if(C>=p.display.viewTo||(C-=p.display.viewFrom)<0)return null;for(var I=p.display.view,D=0;D<I.length;D++)if((C-=I[D].size)<0)return D}function Qo(p,C,I,D){null==C&&(C=p.doc.first),null==I&&(I=p.doc.first+p.doc.size),D||(D=0);var L=p.display;if(D&&I<L.viewTo&&(null==L.updateLineNumbers||L.updateLineNumbers>C)&&(L.updateLineNumbers=C),p.curOp.viewChanged=!0,C>=L.viewTo)Io&&ao(p.doc,C)<L.viewTo&&Fa(p);else if(I<=L.viewFrom)Io&&fs(p.doc,I+D)>L.viewFrom?Fa(p):(L.viewFrom+=D,L.viewTo+=D);else if(C<=L.viewFrom&&I>=L.viewTo)Fa(p);else if(C<=L.viewFrom){var Y=qs(p,I,I+D,1);Y?(L.view=L.view.slice(Y.index),L.viewFrom=Y.lineN,L.viewTo+=D):Fa(p)}else if(I>=L.viewTo){var ht=qs(p,C,C,-1);ht?(L.view=L.view.slice(0,ht.index),L.viewTo=ht.lineN):Fa(p)}else{var wt=qs(p,C,C,-1),Vt=qs(p,I,I+D,1);wt&&Vt?(L.view=L.view.slice(0,wt.index).concat(ln(p,wt.lineN,Vt.lineN)).concat(L.view.slice(Vt.index)),L.viewTo+=D):Fa(p)}var $t=L.externalMeasured;$t&&(I<$t.lineN?$t.lineN+=D:C<$t.lineN+$t.size&&(L.externalMeasured=null))}function ua(p,C,I){p.curOp.viewChanged=!0;var D=p.display,L=p.display.externalMeasured;if(L&&C>=L.lineN&&C<L.lineN+L.size&&(D.externalMeasured=null),!(C<D.viewFrom||C>=D.viewTo)){var Y=D.view[vs(p,C)];if(null!=Y.node){var ht=Y.changes||(Y.changes=[]);-1==Ze(ht,I)&&ht.push(I)}}}function Fa(p){p.display.viewFrom=p.display.viewTo=p.doc.first,p.display.view=[],p.display.viewOffset=0}function qs(p,C,I,D){var Y,L=vs(p,C),ht=p.display.view;if(!Io||I==p.doc.first+p.doc.size)return{index:L,lineN:I};for(var wt=p.display.viewFrom,Vt=0;Vt<L;Vt++)wt+=ht[Vt].size;if(wt!=C){if(D>0){if(L==ht.length-1)return null;Y=wt+ht[L].size-C,L++}else Y=wt-C;C+=Y,I+=Y}for(;ao(p.doc,I)!=I;){if(L==(D<0?0:ht.length-1))return null;I+=D*ht[L-(D<0?1:0)].size,L+=D}return{index:L,lineN:I}}function Ba(p){for(var C=p.display.view,I=0,D=0;D<C.length;D++){var L=C[D];!L.hidden&&(!L.node||L.changes)&&++I}return I}function Vl(p){p.display.input.showSelection(p.display.input.prepareSelection())}function xl(p,C){void 0===C&&(C=!0);var I=p.doc,D={},L=D.cursors=document.createDocumentFragment(),Y=D.selection=document.createDocumentFragment(),ht=p.options.$customCursor;ht&&(C=!0);for(var wt=0;wt<I.sel.ranges.length;wt++)if(C||wt!=I.sel.primIndex){var Vt=I.sel.ranges[wt];if(!(Vt.from().line>=p.display.viewTo||Vt.to().line<p.display.viewFrom)){var $t=Vt.empty();if(ht){var Ie=ht(p,Vt);Ie&&Ra(p,Ie,L)}else($t||p.options.showCursorWhenSelecting)&&Ra(p,Vt.head,L);$t||Rc(p,Vt,Y)}}return D}function Ra(p,C,I){var D=An(p,C,"div",null,null,!p.options.singleCursorHeightPerLine),L=I.appendChild(Dt("div","\xa0","CodeMirror-cursor"));if(L.style.left=D.left+"px",L.style.top=D.top+"px",L.style.height=Math.max(0,D.bottom-D.top)*p.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(p.getWrapperElement().className)){var Y=Dn(p,C,"div",null,null),ht=Y.right-Y.left;L.style.width=(ht>0?ht:p.defaultCharWidth())+"px"}if(D.other){var wt=I.appendChild(Dt("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));wt.style.display="",wt.style.left=D.other.left+"px",wt.style.top=D.other.top+"px",wt.style.height=.85*(D.other.bottom-D.other.top)+"px"}}function Qa(p,C){return p.top-C.top||p.left-C.left}function Rc(p,C,I){var D=p.display,L=p.doc,Y=document.createDocumentFragment(),ht=bi(p.display),wt=ht.left,Vt=Math.max(D.sizerWidth,hn(p)-D.sizer.offsetLeft)-ht.right,$t="ltr"==L.direction;function Ie(cn,En,Vn,jn){En<0&&(En=0),En=Math.round(En),jn=Math.round(jn),Y.appendChild(Dt("div",null,"CodeMirror-selected","position: absolute; left: "+cn+"px;\n                             top: "+En+"px; width: "+(null==Vn?Vt-cn:Vn)+"px;\n                             height: "+(jn-En)+"px"))}function Ye(cn,En,Vn){var io,ss,jn=Mi(L,cn),fr=jn.text.length;function zo(As,Kr){return Dn(p,Vi(cn,As),"div",jn,Kr)}function ja(As,Kr,zs){var Os=Ir(p,jn,null,As),S="ltr"==Kr==("after"==zs)?"left":"right";return zo("after"==zs?Os.begin:Os.end-(/\s/.test(jn.text.charAt(Os.end-1))?2:1),S)[S]}var Ya=yi(jn,L.direction);return function(p,C,I,D){if(!p)return D(C,I,"ltr",0);for(var L=!1,Y=0;Y<p.length;++Y){var ht=p[Y];(ht.from<I&&ht.to>C||C==I&&ht.to==C)&&(D(Math.max(ht.from,C),Math.min(ht.to,I),1==ht.level?"rtl":"ltr",Y),L=!0)}L||D(C,I,"ltr")}(Ya,En||0,null==Vn?fr:Vn,function(As,Kr,zs,Os){var S="ltr"==zs,H=zo(As,S?"left":"right"),j=zo(Kr-1,S?"right":"left"),it=null==En&&0==As,mt=null==Vn&&Kr==fr,Xt=0==Os,Yt=!Ya||Os==Ya.length-1;if(j.top-H.top<=3){var Me=($t?it:mt)&&Xt?wt:(S?H:j).left;Ie(Me,H.top,(($t?mt:it)&&Yt?Vt:(S?j:H).right)-Me,H.bottom)}else{var ai,di,Ri,ji;S?(ai=$t&&it&&Xt?wt:H.left,di=$t?Vt:ja(As,zs,"before"),Ri=$t?wt:ja(Kr,zs,"after"),ji=$t&&mt&&Yt?Vt:j.right):(ai=$t?ja(As,zs,"before"):wt,di=!$t&&it&&Xt?Vt:H.right,Ri=!$t&&mt&&Yt?wt:j.left,ji=$t?ja(Kr,zs,"after"):Vt),Ie(ai,H.top,di-ai,H.bottom),H.bottom<j.top&&Ie(wt,H.bottom,null,j.top),Ie(Ri,j.top,ji-Ri,j.bottom)}(!io||Qa(H,io)<0)&&(io=H),Qa(j,io)<0&&(io=j),(!ss||Qa(H,ss)<0)&&(ss=H),Qa(j,ss)<0&&(ss=j)}),{start:io,end:ss}}var gi=C.from(),ui=C.to();if(gi.line==ui.line)Ye(gi.line,gi.ch,ui.ch);else{var Ni=Mi(L,gi.line),Xi=Mi(L,ui.line),tn=Lo(Ni)==Lo(Xi),gn=Ye(gi.line,gi.ch,tn?Ni.text.length+1:null).end,Tn=Ye(ui.line,tn?0:null,ui.ch).start;tn&&(gn.top<Tn.top-2?(Ie(gn.right,gn.top,null,gn.bottom),Ie(wt,Tn.top,Tn.left,Tn.bottom)):Ie(gn.right,gn.top,Tn.left-gn.right,gn.bottom)),gn.bottom<Tn.top&&Ie(wt,gn.bottom,null,Tn.top)}I.appendChild(Y)}function Gl(p){if(p.state.focused){var C=p.display;clearInterval(C.blinker);var I=!0;C.cursorDiv.style.visibility="",p.options.cursorBlinkRate>0?C.blinker=setInterval(function(){p.hasFocus()||Ua(p),C.cursorDiv.style.visibility=(I=!I)?"":"hidden"},p.options.cursorBlinkRate):p.options.cursorBlinkRate<0&&(C.cursorDiv.style.visibility="hidden")}}function va(p){p.hasFocus()||(p.display.input.focus(),p.state.focused||Us(p))}function Ha(p){p.state.delayingBlurEvent=!0,setTimeout(function(){p.state.delayingBlurEvent&&(p.state.delayingBlurEvent=!1,p.state.focused&&Ua(p))},100)}function Us(p,C){p.state.delayingBlurEvent&&!p.state.draggingText&&(p.state.delayingBlurEvent=!1),"nocursor"!=p.options.readOnly&&(p.state.focused||(xe(p,"focus",p,C),p.state.focused=!0,Mt(p.display.wrapper,"CodeMirror-focused"),!p.curOp&&p.display.selForContextMenu!=p.doc.sel&&(p.display.input.reset(),s&&setTimeout(function(){return p.display.input.reset(!0)},20)),p.display.input.receivedFocus()),Gl(p))}function Ua(p,C){p.state.delayingBlurEvent||(p.state.focused&&(xe(p,"blur",p,C),p.state.focused=!1,gt(p.display.wrapper,"CodeMirror-focused")),clearInterval(p.display.blinker),setTimeout(function(){p.state.focused||(p.display.shift=!1)},150))}function ta(p){for(var C=p.display,I=C.lineDiv.offsetTop,D=Math.max(0,C.scroller.getBoundingClientRect().top),L=C.lineDiv.getBoundingClientRect().top,Y=0,ht=0;ht<C.view.length;ht++){var wt=C.view[ht],Vt=p.options.lineWrapping,$t=void 0,Ie=0;if(!wt.hidden){if(L+=wt.line.height,n&&r<8){var Ye=wt.node.offsetTop+wt.node.offsetHeight;$t=Ye-I,I=Ye}else{var gi=wt.node.getBoundingClientRect();$t=gi.bottom-gi.top,!Vt&&wt.text.firstChild&&(Ie=wt.text.firstChild.getBoundingClientRect().right-gi.left-1)}var ui=wt.line.height-$t;if((ui>.005||ui<-.005)&&(L<D&&(Y-=ui),Pr(wt.line,$t),Va(wt.line),wt.rest))for(var Ni=0;Ni<wt.rest.length;Ni++)Va(wt.rest[Ni]);if(Ie>p.display.sizerWidth){var Xi=Math.ceil(Ie/_s(p.display));Xi>p.display.maxLineLength&&(p.display.maxLineLength=Xi,p.display.maxLine=wt.line,p.display.maxLineChanged=!0)}}}Math.abs(Y)>2&&(C.scroller.scrollTop+=Y)}function Va(p){if(p.widgets)for(var C=0;C<p.widgets.length;++C){var I=p.widgets[C],D=I.node.parentNode;D&&(I.height=D.offsetHeight)}}function kl(p,C,I){var D=I&&null!=I.top?Math.max(0,I.top):p.scroller.scrollTop;D=Math.floor(D-Xe(p));var L=I&&null!=I.bottom?I.bottom:D+p.wrapper.clientHeight,Y=Sr(C,D),ht=Sr(C,L);if(I&&I.ensure){var wt=I.ensure.from.line,Vt=I.ensure.to.line;wt<Y?(Y=wt,ht=Sr(C,Ar(Mi(C,wt))+p.wrapper.clientHeight)):Math.min(Vt,C.lastLine())>=ht&&(Y=Sr(C,Ar(Mi(C,Vt))-p.wrapper.clientHeight),ht=Vt)}return{from:Y,to:Math.max(ht,Y+1)}}function Wc(p,C){var I=p.display,D=ca(p.display);C.top<0&&(C.top=0);var L=p.curOp&&null!=p.curOp.scrollTop?p.curOp.scrollTop:I.scroller.scrollTop,Y=Cn(p),ht={};C.bottom-C.top>Y&&(C.bottom=C.top+Y);var wt=p.doc.height+qe(I),$t=C.bottom>wt-D;if(C.top<L)ht.scrollTop=C.top<D?0:C.top;else if(C.bottom>L+Y){var Ie=Math.min(C.top,($t?wt:C.bottom)-Y);Ie!=L&&(ht.scrollTop=Ie)}var Ye=p.options.fixedGutter?0:I.gutters.offsetWidth,gi=p.curOp&&null!=p.curOp.scrollLeft?p.curOp.scrollLeft:I.scroller.scrollLeft-Ye,ui=hn(p)-I.gutters.offsetWidth,Ni=C.right-C.left>ui;return Ni&&(C.right=C.left+ui),C.left<10?ht.scrollLeft=0:C.left<gi?ht.scrollLeft=Math.max(0,C.left+Ye-(Ni?0:10)):C.right>ui+gi-3&&(ht.scrollLeft=C.right+(Ni?0:10)-ui),ht}function ft(p,C){null!=C&&(zt(p),p.curOp.scrollTop=(null==p.curOp.scrollTop?p.doc.scrollTop:p.curOp.scrollTop)+C)}function nt(p){zt(p);var C=p.getCursor();p.curOp.scrollToPos={from:C,to:C,margin:p.options.cursorScrollMargin}}function q(p,C,I){(null!=C||null!=I)&&zt(p),null!=C&&(p.curOp.scrollLeft=C),null!=I&&(p.curOp.scrollTop=I)}function zt(p){var C=p.curOp.scrollToPos;C&&(p.curOp.scrollToPos=null,_e(p,rr(p,C.from),rr(p,C.to),C.margin))}function _e(p,C,I,D){var L=Wc(p,{left:Math.min(C.left,I.left),top:Math.min(C.top,I.top)-D,right:Math.max(C.right,I.right),bottom:Math.max(C.bottom,I.bottom)+D});q(p,L.scrollLeft,L.scrollTop)}function Ge(p,C){Math.abs(p.doc.scrollTop-C)<2||(T||Ou(p,{top:C}),ei(p,C,!0),T&&Ou(p),sc(p,100))}function ei(p,C,I){C=Math.max(0,Math.min(p.display.scroller.scrollHeight-p.display.scroller.clientHeight,C)),(p.display.scroller.scrollTop!=C||I)&&(p.doc.scrollTop=C,p.display.scrollbars.setScrollTop(C),p.display.scroller.scrollTop!=C&&(p.display.scroller.scrollTop=C))}function ki(p,C,I,D){C=Math.max(0,Math.min(C,p.display.scroller.scrollWidth-p.display.scroller.clientWidth)),(!(I?C==p.doc.scrollLeft:Math.abs(p.doc.scrollLeft-C)<2)||D)&&(p.doc.scrollLeft=C,rs(p),p.display.scroller.scrollLeft!=C&&(p.display.scroller.scrollLeft=C),p.display.scrollbars.setScrollLeft(C))}function _n(p){var C=p.display,I=C.gutters.offsetWidth,D=Math.round(p.doc.height+qe(p.display));return{clientHeight:C.scroller.clientHeight,viewHeight:C.wrapper.clientHeight,scrollWidth:C.scroller.scrollWidth,clientWidth:C.scroller.clientWidth,viewWidth:C.wrapper.clientWidth,barLeft:p.options.fixedGutter?I:0,docHeight:D,scrollHeight:D+Ui(p)+C.barHeight,nativeBarWidth:C.nativeBarWidth,gutterWidth:I}}var mr=function(p,C,I){this.cm=I;var D=this.vert=Dt("div",[Dt("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),L=this.horiz=Dt("div",[Dt("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");D.tabIndex=L.tabIndex=-1,p(D),p(L),mi(D,"scroll",function(){D.clientHeight&&C(D.scrollTop,"vertical")}),mi(L,"scroll",function(){L.clientWidth&&C(L.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,n&&r<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};mr.prototype.update=function(p){var C=p.scrollWidth>p.clientWidth+1,I=p.scrollHeight>p.clientHeight+1,D=p.nativeBarWidth;return I?(this.vert.style.display="block",this.vert.style.bottom=C?D+"px":"0",this.vert.firstChild.style.height=Math.max(0,p.scrollHeight-p.clientHeight+(p.viewHeight-(C?D:0)))+"px"):(this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0"),C?(this.horiz.style.display="block",this.horiz.style.right=I?D+"px":"0",this.horiz.style.left=p.barLeft+"px",this.horiz.firstChild.style.width=Math.max(0,p.scrollWidth-p.clientWidth+(p.viewWidth-p.barLeft-(I?D:0)))+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0"),!this.checkedZeroWidth&&p.clientHeight>0&&(0==D&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:I?D:0,bottom:C?D:0}},mr.prototype.setScrollLeft=function(p){this.horiz.scrollLeft!=p&&(this.horiz.scrollLeft=p),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},mr.prototype.setScrollTop=function(p){this.vert.scrollTop!=p&&(this.vert.scrollTop=p),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},mr.prototype.zeroWidthHack=function(){this.horiz.style.height=this.vert.style.width=pt&&!Z?"12px":"18px",this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new ke,this.disableVert=new ke},mr.prototype.enableZeroWidthBar=function(p,C,I){p.style.pointerEvents="auto",C.set(1e3,function D(){var L=p.getBoundingClientRect();("vert"==I?document.elementFromPoint(L.right-1,(L.top+L.bottom)/2):document.elementFromPoint((L.right+L.left)/2,L.bottom-1))!=p?p.style.pointerEvents="none":C.set(1e3,D)})},mr.prototype.clear=function(){var p=this.horiz.parentNode;p.removeChild(this.horiz),p.removeChild(this.vert)};var Wn=function(){};function Ur(p,C){C||(C=_n(p));var I=p.display.barWidth,D=p.display.barHeight;lo(p,C);for(var L=0;L<4&&I!=p.display.barWidth||D!=p.display.barHeight;L++)I!=p.display.barWidth&&p.options.lineWrapping&&ta(p),lo(p,_n(p)),I=p.display.barWidth,D=p.display.barHeight}function lo(p,C){var I=p.display,D=I.scrollbars.update(C);I.sizer.style.paddingRight=(I.barWidth=D.right)+"px",I.sizer.style.paddingBottom=(I.barHeight=D.bottom)+"px",I.heightForcer.style.borderBottom=D.bottom+"px solid transparent",D.right&&D.bottom?(I.scrollbarFiller.style.display="block",I.scrollbarFiller.style.height=D.bottom+"px",I.scrollbarFiller.style.width=D.right+"px"):I.scrollbarFiller.style.display="",D.bottom&&p.options.coverGutterNextToScrollbar&&p.options.fixedGutter?(I.gutterFiller.style.display="block",I.gutterFiller.style.height=D.bottom+"px",I.gutterFiller.style.width=C.gutterWidth+"px"):I.gutterFiller.style.display=""}Wn.prototype.update=function(){return{bottom:0,right:0}},Wn.prototype.setScrollLeft=function(){},Wn.prototype.setScrollTop=function(){},Wn.prototype.clear=function(){};var cl={native:mr,null:Wn};function Vs(p){p.display.scrollbars&&(p.display.scrollbars.clear(),p.display.scrollbars.addClass&&gt(p.display.wrapper,p.display.scrollbars.addClass)),p.display.scrollbars=new cl[p.options.scrollbarStyle](function(C){p.display.wrapper.insertBefore(C,p.display.scrollbarFiller),mi(C,"mousedown",function(){p.state.focused&&setTimeout(function(){return p.display.input.focus()},0)}),C.setAttribute("cm-not-content","true")},function(C,I){"horizontal"==I?ki(p,C):Ge(p,C)},p),p.display.scrollbars.addClass&&Mt(p.display.wrapper,p.display.scrollbars.addClass)}var ha=0;function Go(p){p.curOp={cm:p,viewChanged:!1,startHeight:p.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++ha,markArrays:null},function(p){Xn?Xn.ops.push(p):p.ownsGroup=Xn={ops:[p],delayedCallbacks:[]}}(p.curOp)}function Ga(p){var C=p.curOp;C&&function(p,C){var I=p.ownsGroup;if(I)try{!function(p){var C=p.delayedCallbacks,I=0;do{for(;I<C.length;I++)C[I].call(null);for(var D=0;D<p.ops.length;D++){var L=p.ops[D];if(L.cursorActivityHandlers)for(;L.cursorActivityCalled<L.cursorActivityHandlers.length;)L.cursorActivityHandlers[L.cursorActivityCalled++].call(null,L.cm)}}while(I<C.length)}(I)}finally{Xn=null,C(I)}}(C,function(I){for(var D=0;D<I.ops.length;D++)I.ops[D].cm.curOp=null;!function(p){for(var C=p.ops,I=0;I<C.length;I++)Da(C[I]);for(var D=0;D<C.length;D++)qa(C[D]);for(var L=0;L<C.length;L++)rc(C[L]);for(var Y=0;Y<C.length;Y++)Ws(C[Y]);for(var ht=0;ht<C.length;ht++)oc(C[ht])}(I)})}function Da(p){var C=p.cm,I=C.display;(function(p){var C=p.display;!C.scrollbarsClipped&&C.scroller.offsetWidth&&(C.nativeBarWidth=C.scroller.offsetWidth-C.scroller.clientWidth,C.heightForcer.style.height=Ui(p)+"px",C.sizer.style.marginBottom=-C.nativeBarWidth+"px",C.sizer.style.borderRightWidth=Ui(p)+"px",C.scrollbarsClipped=!0)})(C),p.updateMaxLine&&ol(C),p.mustUpdate=p.viewChanged||p.forceUpdate||null!=p.scrollTop||p.scrollToPos&&(p.scrollToPos.from.line<I.viewFrom||p.scrollToPos.to.line>=I.viewTo)||I.maxLineChanged&&C.options.lineWrapping,p.update=p.mustUpdate&&new No(C,p.mustUpdate&&{top:p.scrollTop,ensure:p.scrollToPos},p.forceUpdate)}function qa(p){p.updatedDisplay=p.mustUpdate&&Ic(p.cm,p.update)}function rc(p){var C=p.cm,I=C.display;p.updatedDisplay&&ta(C),p.barMeasure=_n(C),I.maxLineChanged&&!C.options.lineWrapping&&(p.adjustWidthTo=tr(C,I.maxLine,I.maxLine.text.length).left+3,C.display.sizerWidth=p.adjustWidthTo,p.barMeasure.scrollWidth=Math.max(I.scroller.clientWidth,I.sizer.offsetLeft+p.adjustWidthTo+Ui(C)+C.display.barWidth),p.maxScrollLeft=Math.max(0,I.sizer.offsetLeft+p.adjustWidthTo-hn(C))),(p.updatedDisplay||p.selectionChanged)&&(p.preparedSelection=I.input.prepareSelection())}function Ws(p){var C=p.cm;null!=p.adjustWidthTo&&(C.display.sizer.style.minWidth=p.adjustWidthTo+"px",p.maxScrollLeft<C.doc.scrollLeft&&ki(C,Math.min(C.display.scroller.scrollLeft,p.maxScrollLeft),!0),C.display.maxLineChanged=!1);var I=p.focus&&p.focus==fe();p.preparedSelection&&C.display.input.showSelection(p.preparedSelection,I),(p.updatedDisplay||p.startHeight!=C.doc.height)&&Ur(C,p.barMeasure),p.updatedDisplay&&au(C,p.barMeasure),p.selectionChanged&&Gl(C),C.state.focused&&p.updateInput&&C.display.input.reset(p.typing),I&&va(p.cm)}function oc(p){var C=p.cm,I=C.display,D=C.doc;p.updatedDisplay&&Zu(C,p.update),null!=I.wheelStartX&&(null!=p.scrollTop||null!=p.scrollLeft||p.scrollToPos)&&(I.wheelStartX=I.wheelStartY=null),null!=p.scrollTop&&ei(C,p.scrollTop,p.forceScroll),null!=p.scrollLeft&&ki(C,p.scrollLeft,!0,!0),p.scrollToPos&&function(p,C){if(!Ci(p,"scrollCursorIntoView")){var I=p.display,D=I.sizer.getBoundingClientRect(),L=null;if(C.top+D.top<0?L=!0:C.bottom+D.top>(window.innerHeight||document.documentElement.clientHeight)&&(L=!1),null!=L&&!ot){var Y=Dt("div","\u200b",null,"position: absolute;\n                         top: "+(C.top-I.viewOffset-Xe(p.display))+"px;\n                         height: "+(C.bottom-C.top+Ui(p)+I.barHeight)+"px;\n                         left: "+C.left+"px; width: "+Math.max(2,C.right-C.left)+"px;");p.display.lineSpace.appendChild(Y),Y.scrollIntoView(L),p.display.lineSpace.removeChild(Y)}}}(C,function(p,C,I,D){var L;null==D&&(D=0),!p.options.lineWrapping&&C==I&&(I="before"==C.sticky?Vi(C.line,C.ch+1,"before"):C,C=C.ch?Vi(C.line,"before"==C.sticky?C.ch-1:C.ch,"after"):C);for(var Y=0;Y<5;Y++){var ht=!1,wt=An(p,C),Vt=I&&I!=C?An(p,I):wt,$t=Wc(p,L={left:Math.min(wt.left,Vt.left),top:Math.min(wt.top,Vt.top)-D,right:Math.max(wt.left,Vt.left),bottom:Math.max(wt.bottom,Vt.bottom)+D}),Ie=p.doc.scrollTop,Ye=p.doc.scrollLeft;if(null!=$t.scrollTop&&(Ge(p,$t.scrollTop),Math.abs(p.doc.scrollTop-Ie)>1&&(ht=!0)),null!=$t.scrollLeft&&(ki(p,$t.scrollLeft),Math.abs(p.doc.scrollLeft-Ye)>1&&(ht=!0)),!ht)break}return L}(C,Yi(D,p.scrollToPos.from),Yi(D,p.scrollToPos.to),p.scrollToPos.margin));var Y=p.maybeHiddenMarkers,ht=p.maybeUnhiddenMarkers;if(Y)for(var wt=0;wt<Y.length;++wt)Y[wt].lines.length||xe(Y[wt],"hide");if(ht)for(var Vt=0;Vt<ht.length;++Vt)ht[Vt].lines.length&&xe(ht[Vt],"unhide");I.wrapper.offsetHeight&&(D.scrollTop=C.display.scroller.scrollTop),p.changeObjs&&xe(C,"changes",C,p.changeObjs),p.update&&p.update.finish()}function hs(p,C){if(p.curOp)return C();Go(p);try{return C()}finally{Ga(p)}}function Ao(p,C){return function(){if(p.curOp)return C.apply(p,arguments);Go(p);try{return C.apply(p,arguments)}finally{Ga(p)}}}function vo(p){return function(){if(this.curOp)return p.apply(this,arguments);Go(this);try{return p.apply(this,arguments)}finally{Ga(this)}}}function Xr(p){return function(){var C=this.cm;if(!C||C.curOp)return p.apply(this,arguments);Go(C);try{return p.apply(this,arguments)}finally{Ga(C)}}}function sc(p,C){p.doc.highlightFrontier<p.display.viewTo&&p.state.highlight.set(C,ve(su,p))}function su(p){var C=p.doc;if(!(C.highlightFrontier>=p.display.viewTo)){var I=+new Date+p.options.workTime,D=so(p,C.highlightFrontier),L=[];C.iter(D.line,Math.min(C.first+C.size,p.display.viewTo+500),function(Y){if(D.line>=p.display.viewFrom){var ht=Y.styles,wt=Y.text.length>p.options.maxHighlightLength?kr(C.mode,D.state):null,Vt=xo(p,Y,D,!0);wt&&(D.state=wt),Y.styles=Vt.styles;var $t=Y.styleClasses,Ie=Vt.classes;Ie?Y.styleClasses=Ie:$t&&(Y.styleClasses=null);for(var Ye=!ht||ht.length!=Y.styles.length||$t!=Ie&&(!$t||!Ie||$t.bgClass!=Ie.bgClass||$t.textClass!=Ie.textClass),gi=0;!Ye&&gi<ht.length;++gi)Ye=ht[gi]!=Y.styles[gi];Ye&&L.push(D.line),Y.stateAfter=D.save(),D.nextLine()}else Y.text.length<=p.options.maxHighlightLength&&go(p,Y.text,D),Y.stateAfter=D.line%5==0?D.save():null,D.nextLine();if(+new Date>I)return sc(p,p.options.workDelay),!0}),C.highlightFrontier=D.line,C.modeFrontier=Math.max(C.modeFrontier,D.line),L.length&&hs(p,function(){for(var Y=0;Y<L.length;Y++)ua(p,L[Y],"text")})}}var No=function(p,C,I){var D=p.display;this.viewport=C,this.visible=kl(D,p.doc,C),this.editorIsHidden=!D.wrapper.offsetWidth,this.wrapperHeight=D.wrapper.clientHeight,this.wrapperWidth=D.wrapper.clientWidth,this.oldDisplayWidth=hn(p),this.force=I,this.dims=Hs(p),this.events=[]};function Ic(p,C){var I=p.display,D=p.doc;if(C.editorIsHidden)return Fa(p),!1;if(!C.force&&C.visible.from>=I.viewFrom&&C.visible.to<=I.viewTo&&(null==I.updateLineNumbers||I.updateLineNumbers>=I.viewTo)&&I.renderedView==I.view&&0==Ba(p))return!1;Mc(p)&&(Fa(p),C.dims=Hs(p));var L=D.first+D.size,Y=Math.max(C.visible.from-p.options.viewportMargin,D.first),ht=Math.min(L,C.visible.to+p.options.viewportMargin);I.viewFrom<Y&&Y-I.viewFrom<20&&(Y=Math.max(D.first,I.viewFrom)),I.viewTo>ht&&I.viewTo-ht<20&&(ht=Math.min(L,I.viewTo)),Io&&(Y=ao(p.doc,Y),ht=fs(p.doc,ht));var wt=Y!=I.viewFrom||ht!=I.viewTo||I.lastWrapHeight!=C.wrapperHeight||I.lastWrapWidth!=C.wrapperWidth;(function(p,C,I){var D=p.display;0==D.view.length||C>=D.viewTo||I<=D.viewFrom?(D.view=ln(p,C,I),D.viewFrom=C):(D.viewFrom>C?D.view=ln(p,C,D.viewFrom).concat(D.view):D.viewFrom<C&&(D.view=D.view.slice(vs(p,C))),D.viewFrom=C,D.viewTo<I?D.view=D.view.concat(ln(p,D.viewTo,I)):D.viewTo>I&&(D.view=D.view.slice(0,vs(p,I)))),D.viewTo=I})(p,Y,ht),I.viewOffset=Ar(Mi(p.doc,I.viewFrom)),p.display.mover.style.top=I.viewOffset+"px";var Vt=Ba(p);if(!wt&&0==Vt&&!C.force&&I.renderedView==I.view&&(null==I.updateLineNumbers||I.updateLineNumbers>=I.viewTo))return!1;var $t=function(p){if(p.hasFocus())return null;var C=fe();if(!C||!rt(p.display.lineDiv,C))return null;var I={activeElt:C};if(window.getSelection){var D=window.getSelection();D.anchorNode&&D.extend&&rt(p.display.lineDiv,D.anchorNode)&&(I.anchorNode=D.anchorNode,I.anchorOffset=D.anchorOffset,I.focusNode=D.focusNode,I.focusOffset=D.focusOffset)}return I}(p);return Vt>4&&(I.lineDiv.style.display="none"),function(p,C,I){var D=p.display,L=p.options.lineNumbers,Y=D.lineDiv,ht=Y.firstChild;function wt(Ni){var Xi=Ni.nextSibling;return s&&pt&&p.display.currentWheelTarget==Ni?Ni.style.display="none":Ni.parentNode.removeChild(Ni),Xi}for(var Vt=D.view,$t=D.viewFrom,Ie=0;Ie<Vt.length;Ie++){var Ye=Vt[Ie];if(!Ye.hidden)if(Ye.node&&Ye.node.parentNode==Y){for(;ht!=Ye.node;)ht=wt(ht);var ui=L&&null!=C&&C<=$t&&Ye.lineNumber;Ye.changes&&(Ze(Ye.changes,"gutter")>-1&&(ui=!1),Hn(p,Ye,$t,I)),ui&&(lt(Ye.lineNumber),Ye.lineNumber.appendChild(document.createTextNode(Rr(p.options,$t)))),ht=Ye.node.nextSibling}else{var gi=Wt(p,Ye,$t,I);Y.insertBefore(gi,ht)}$t+=Ye.size}for(;ht;)ht=wt(ht)}(p,I.updateLineNumbers,C.dims),Vt>4&&(I.lineDiv.style.display=""),I.renderedView=I.view,function(p){if(p&&p.activeElt&&p.activeElt!=fe()&&(p.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(p.activeElt.nodeName)&&p.anchorNode&&rt(document.body,p.anchorNode)&&rt(document.body,p.focusNode))){var C=window.getSelection(),I=document.createRange();I.setEnd(p.anchorNode,p.anchorOffset),I.collapse(!1),C.removeAllRanges(),C.addRange(I),C.extend(p.focusNode,p.focusOffset)}}($t),lt(I.cursorDiv),lt(I.selectionDiv),I.gutters.style.height=I.sizer.style.minHeight=0,wt&&(I.lastWrapHeight=C.wrapperHeight,I.lastWrapWidth=C.wrapperWidth,sc(p,400)),I.updateLineNumbers=null,!0}function Zu(p,C){for(var I=C.viewport,D=!0;;D=!1){if(D&&p.options.lineWrapping&&C.oldDisplayWidth!=hn(p))D&&(C.visible=kl(p.display,p.doc,I));else if(I&&null!=I.top&&(I={top:Math.min(p.doc.height+qe(p.display)-Cn(p),I.top)}),C.visible=kl(p.display,p.doc,I),C.visible.from>=p.display.viewFrom&&C.visible.to<=p.display.viewTo)break;if(!Ic(p,C))break;ta(p);var L=_n(p);Vl(p),Ur(p,L),au(p,L),C.force=!1}C.signal(p,"update",p),(p.display.viewFrom!=p.display.reportedViewFrom||p.display.viewTo!=p.display.reportedViewTo)&&(C.signal(p,"viewportChange",p,p.display.viewFrom,p.display.viewTo),p.display.reportedViewFrom=p.display.viewFrom,p.display.reportedViewTo=p.display.viewTo)}function Ou(p,C){var I=new No(p,C);if(Ic(p,I)){ta(p),Zu(p,I);var D=_n(p);Vl(p),Ur(p,D),au(p,D),I.finish()}}function zl(p){p.sizer.style.marginLeft=p.gutters.offsetWidth+"px",cr(p,"gutterChanged",p)}function au(p,C){p.display.sizer.style.minHeight=C.docHeight+"px",p.display.heightForcer.style.top=C.docHeight+"px",p.display.gutters.style.height=C.docHeight+p.display.barHeight+Ui(p)+"px"}function rs(p){var C=p.display,I=C.view;if(C.alignWidgets||C.gutters.firstChild&&p.options.fixedGutter){for(var D=Ds(C)-C.scroller.scrollLeft+p.doc.scrollLeft,L=C.gutters.offsetWidth,Y=D+"px",ht=0;ht<I.length;ht++)if(!I[ht].hidden){p.options.fixedGutter&&(I[ht].gutter&&(I[ht].gutter.style.left=Y),I[ht].gutterBackground&&(I[ht].gutterBackground.style.left=Y));var wt=I[ht].alignable;if(wt)for(var Vt=0;Vt<wt.length;Vt++)wt[Vt].style.left=Y}p.options.fixedGutter&&(C.gutters.style.left=D+L+"px")}}function Mc(p){if(!p.options.lineNumbers)return!1;var C=p.doc,I=Rr(p.options,C.first+C.size-1),D=p.display;if(I.length!=D.lineNumChars){var L=D.measure.appendChild(Dt("div",[Dt("div",I)],"CodeMirror-linenumber CodeMirror-gutter-elt")),Y=L.firstChild.offsetWidth,ht=L.offsetWidth-Y;return D.lineGutter.style.width="",D.lineNumInnerWidth=Math.max(Y,D.lineGutter.offsetWidth-ht)+1,D.lineNumWidth=D.lineNumInnerWidth+ht,D.lineNumChars=D.lineNumInnerWidth?I.length:-1,D.lineGutter.style.width=D.lineNumWidth+"px",zl(p.display),!0}return!1}function ul(p,C){for(var I=[],D=!1,L=0;L<p.length;L++){var Y=p[L],ht=null;if("string"!=typeof Y&&(ht=Y.style,Y=Y.className),"CodeMirror-linenumbers"==Y){if(!C)continue;D=!0}I.push({className:Y,style:ht})}return C&&!D&&I.push({className:"CodeMirror-linenumbers",style:null}),I}function Ac(p){var C=p.gutters,I=p.gutterSpecs;lt(C),p.lineGutter=null;for(var D=0;D<I.length;++D){var L=I[D],Y=L.className,ht=L.style,wt=C.appendChild(Dt("div",null,"CodeMirror-gutter "+Y));ht&&(wt.style.cssText=ht),"CodeMirror-linenumbers"==Y&&(p.lineGutter=wt,wt.style.width=(p.lineNumWidth||1)+"px")}C.style.display=I.length?"":"none",zl(p)}function Sl(p){Ac(p.display),Qo(p),rs(p)}function da(p,C,I,D){var L=this;this.input=I,L.scrollbarFiller=Dt("div",null,"CodeMirror-scrollbar-filler"),L.scrollbarFiller.setAttribute("cm-not-content","true"),L.gutterFiller=Dt("div",null,"CodeMirror-gutter-filler"),L.gutterFiller.setAttribute("cm-not-content","true"),L.lineDiv=Et("div",null,"CodeMirror-code"),L.selectionDiv=Dt("div",null,null,"position: relative; z-index: 1"),L.cursorDiv=Dt("div",null,"CodeMirror-cursors"),L.measure=Dt("div",null,"CodeMirror-measure"),L.lineMeasure=Dt("div",null,"CodeMirror-measure"),L.lineSpace=Et("div",[L.measure,L.lineMeasure,L.selectionDiv,L.cursorDiv,L.lineDiv],null,"position: relative; outline: none");var Y=Et("div",[L.lineSpace],"CodeMirror-lines");L.mover=Dt("div",[Y],null,"position: relative"),L.sizer=Dt("div",[L.mover],"CodeMirror-sizer"),L.sizerWidth=null,L.heightForcer=Dt("div",null,null,"position: absolute; height: 50px; width: 1px;"),L.gutters=Dt("div",null,"CodeMirror-gutters"),L.lineGutter=null,L.scroller=Dt("div",[L.sizer,L.heightForcer,L.gutters],"CodeMirror-scroll"),L.scroller.setAttribute("tabIndex","-1"),L.wrapper=Dt("div",[L.scrollbarFiller,L.gutterFiller,L.scroller],"CodeMirror"),L.wrapper.setAttribute("translate","no"),n&&r<8&&(L.gutters.style.zIndex=-1,L.scroller.style.paddingRight=0),!s&&!(T&&Pt)&&(L.scroller.draggable=!0),p&&(p.appendChild?p.appendChild(L.wrapper):p(L.wrapper)),L.viewFrom=L.viewTo=C.first,L.reportedViewFrom=L.reportedViewTo=C.first,L.view=[],L.renderedView=null,L.externalMeasured=null,L.viewOffset=0,L.lastWrapHeight=L.lastWrapWidth=0,L.updateLineNumbers=null,L.nativeBarWidth=L.barHeight=L.barWidth=0,L.scrollbarsClipped=!1,L.lineNumWidth=L.lineNumInnerWidth=L.lineNumChars=null,L.alignWidgets=!1,L.cachedCharWidth=L.cachedTextHeight=L.cachedPaddingH=null,L.maxLine=null,L.maxLineLength=0,L.maxLineChanged=!1,L.wheelDX=L.wheelDY=L.wheelStartX=L.wheelStartY=null,L.shift=!1,L.selForContextMenu=null,L.activeTouch=null,L.gutterSpecs=ul(D.gutters,D.lineNumbers),Ac(L),I.init(L)}No.prototype.signal=function(p,C){Ii(p,C)&&this.events.push(arguments)},No.prototype.finish=function(){for(var p=0;p<this.events.length;p++)xe.apply(null,this.events[p])};var bo=0,ba=null;function Wa(p){var C=p.wheelDeltaX,I=p.wheelDeltaY;return null==C&&p.detail&&p.axis==p.HORIZONTAL_AXIS&&(C=p.detail),null==I&&p.detail&&p.axis==p.VERTICAL_AXIS?I=p.detail:null==I&&(I=p.wheelDelta),{x:C,y:I}}function jl(p){var C=Wa(p);return C.x*=ba,C.y*=ba,C}function lu(p,C){var I=Wa(C),D=I.x,L=I.y,Y=ba;0===C.deltaMode&&(D=C.deltaX,L=C.deltaY,Y=1);var ht=p.display,wt=ht.scroller,$t=wt.scrollHeight>wt.clientHeight;if(D&&wt.scrollWidth>wt.clientWidth||L&&$t){if(L&&pt&&s)t:for(var Ie=C.target,Ye=ht.view;Ie!=wt;Ie=Ie.parentNode)for(var gi=0;gi<Ye.length;gi++)if(Ye[gi].node==Ie){p.display.currentWheelTarget=Ie;break t}if(D&&!T&&!x&&null!=Y)return L&&$t&&Ge(p,Math.max(0,wt.scrollTop+L*Y)),ki(p,Math.max(0,wt.scrollLeft+D*Y)),(!L||L&&$t)&&Hi(C),void(ht.wheelStartX=null);if(L&&null!=Y){var ui=L*Y,Ni=p.doc.scrollTop,Xi=Ni+ht.wrapper.clientHeight;ui<0?Ni=Math.max(0,Ni+ui-50):Xi=Math.min(p.doc.height,Xi+ui+50),Ou(p,{top:Ni,bottom:Xi})}bo<20&&0!==C.deltaMode&&(null==ht.wheelStartX?(ht.wheelStartX=wt.scrollLeft,ht.wheelStartY=wt.scrollTop,ht.wheelDX=D,ht.wheelDY=L,setTimeout(function(){if(null!=ht.wheelStartX){var tn=wt.scrollLeft-ht.wheelStartX,gn=wt.scrollTop-ht.wheelStartY,Tn=gn&&ht.wheelDY&&gn/ht.wheelDY||tn&&ht.wheelDX&&tn/ht.wheelDX;ht.wheelStartX=ht.wheelStartY=null,Tn&&(ba=(ba*bo+Tn)/(bo+1),++bo)}},200)):(ht.wheelDX+=D,ht.wheelDY+=L))}}n?ba=-.53:T?ba=15:b?ba=-.7:B&&(ba=-1/3);var ya=function(p,C){this.ranges=p,this.primIndex=C};ya.prototype.primary=function(){return this.ranges[this.primIndex]},ya.prototype.equals=function(p){if(p==this)return!0;if(p.primIndex!=this.primIndex||p.ranges.length!=this.ranges.length)return!1;for(var C=0;C<this.ranges.length;C++){var I=this.ranges[C],D=p.ranges[C];if(!Gn(I.anchor,D.anchor)||!Gn(I.head,D.head))return!1}return!0},ya.prototype.deepCopy=function(){for(var p=[],C=0;C<this.ranges.length;C++)p[C]=new Vr(ae(this.ranges[C].anchor),ae(this.ranges[C].head));return new ya(p,this.primIndex)},ya.prototype.somethingSelected=function(){for(var p=0;p<this.ranges.length;p++)if(!this.ranges[p].empty())return!0;return!1},ya.prototype.contains=function(p,C){C||(C=p);for(var I=0;I<this.ranges.length;I++){var D=this.ranges[I];if(On(C,D.from())>=0&&On(p,D.to())<=0)return I}return-1};var Vr=function(p,C){this.anchor=p,this.head=C};function Ia(p,C,I){var D=p&&p.options.selectionsMayTouch,L=C[I];C.sort(function(gi,ui){return On(gi.from(),ui.from())}),I=Ze(C,L);for(var Y=1;Y<C.length;Y++){var ht=C[Y],wt=C[Y-1],Vt=On(wt.to(),ht.from());if(D&&!ht.empty()?Vt>0:Vt>=0){var $t=Oi(wt.from(),ht.from()),Ie=Ue(wt.to(),ht.to()),Ye=wt.empty()?ht.from()==ht.head:wt.from()==wt.head;Y<=I&&--I,C.splice(--Y,2,new Vr(Ye?Ie:$t,Ye?$t:Ie))}}return new ya(C,I)}function lc(p,C){return new ya([new Vr(p,C||p)],0)}function Ll(p){return p.text?Vi(p.from.line+p.text.length-1,St(p.text).length+(1==p.text.length?p.from.ch:0)):p.to}function bs(p,C){if(On(p,C.from)<0)return p;if(On(p,C.to)<=0)return Ll(C);var I=p.line+C.text.length-(C.to.line-C.from.line)-1,D=p.ch;return p.line==C.to.line&&(D+=Ll(C).ch-C.to.ch),Vi(I,D)}function Yl(p,C){for(var I=[],D=0;D<p.sel.ranges.length;D++){var L=p.sel.ranges[D];I.push(new Vr(bs(L.anchor,C),bs(L.head,C)))}return Ia(p.cm,I,p.sel.primIndex)}function cc(p,C,I){return p.line==C.line?Vi(I.line,p.ch-C.ch+I.ch):Vi(I.line+(p.line-C.line),p.ch)}function Ma(p){p.doc.mode=to(p.options,p.doc.modeOption),wl(p)}function wl(p){p.doc.iter(function(C){C.stateAfter&&(C.stateAfter=null),C.styles&&(C.styles=null)}),p.doc.modeFrontier=p.doc.highlightFrontier=p.doc.first,sc(p,100),p.state.modeGen++,p.curOp&&Qo(p)}function Oc(p,C){return 0==C.from.ch&&0==C.to.ch&&""==St(C.text)&&(!p.cm||p.cm.options.wholeLineUpdateBefore)}function Is(p,C,I,D){function L(Tn){return I?I[Tn]:null}function Y(Tn,cn,En){(function(p,C,I,D){p.text=C,p.stateAfter&&(p.stateAfter=null),p.styles&&(p.styles=null),null!=p.order&&(p.order=null),Sa(p),la(p,I);var L=D?D(p):1;L!=p.height&&Pr(p,L)})(Tn,cn,En,D),cr(Tn,"change",Tn,C)}function ht(Tn,cn){for(var En=[],Vn=Tn;Vn<cn;++Vn)En.push(new is($t[Vn],L(Vn),D));return En}var wt=C.from,Vt=C.to,$t=C.text,Ie=Mi(p,wt.line),Ye=Mi(p,Vt.line),gi=St($t),ui=L($t.length-1),Ni=Vt.line-wt.line;if(C.full)p.insert(0,ht(0,$t.length)),p.remove($t.length,p.size-$t.length);else if(Oc(p,C)){var Xi=ht(0,$t.length-1);Y(Ye,Ye.text,ui),Ni&&p.remove(wt.line,Ni),Xi.length&&p.insert(wt.line,Xi)}else if(Ie==Ye)if(1==$t.length)Y(Ie,Ie.text.slice(0,wt.ch)+gi+Ie.text.slice(Vt.ch),ui);else{var tn=ht(1,$t.length-1);tn.push(new is(gi+Ie.text.slice(Vt.ch),ui,D)),Y(Ie,Ie.text.slice(0,wt.ch)+$t[0],L(0)),p.insert(wt.line+1,tn)}else if(1==$t.length)Y(Ie,Ie.text.slice(0,wt.ch)+$t[0]+Ye.text.slice(Vt.ch),L(0)),p.remove(wt.line+1,Ni);else{Y(Ie,Ie.text.slice(0,wt.ch)+$t[0],L(0)),Y(Ye,gi+Ye.text.slice(Vt.ch),ui);var gn=ht(1,$t.length-1);Ni>1&&p.remove(wt.line+1,Ni-1),p.insert(wt.line+1,gn)}cr(p,"change",p,C)}function hl(p,C,I){!function D(L,Y,ht){if(L.linked)for(var wt=0;wt<L.linked.length;++wt){var Vt=L.linked[wt];if(Vt.doc!=Y){var $t=ht&&Vt.sharedHist;I&&!$t||(C(Vt.doc,$t),D(Vt.doc,L,$t))}}}(p,null,!0)}function Mr(p,C){if(C.cm)throw new Error("This document is already in use.");p.doc=C,C.cm=p,Ol(p),Ma(p),uc(p),p.options.direction=C.direction,p.options.lineWrapping||ol(p),p.options.mode=C.modeOption,Qo(p)}function uc(p){("rtl"==p.doc.direction?Mt:gt)(p.display.lineDiv,"CodeMirror-rtl")}function hc(p){this.done=[],this.undone=[],this.undoDepth=p?p.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=p?p.maxGeneration:1}function jc(p,C){var I={from:ae(C.from),to:Ll(C),text:Fn(p,C.from,C.to)};return pc(p,I,C.from.line,C.to.line+1),hl(p,function(D){return pc(D,I,C.from.line,C.to.line+1)},!0),I}function ea(p){for(;p.length&&St(p).ranges;)p.pop()}function Po(p,C,I,D){var L=p.history;L.undone.length=0;var ht,wt,Y=+new Date;if((L.lastOp==D||L.lastOrigin==C.origin&&C.origin&&("+"==C.origin.charAt(0)&&L.lastModTime>Y-(p.cm?p.cm.options.historyEventDelay:500)||"*"==C.origin.charAt(0)))&&(ht=function(p,C){return C?(ea(p.done),St(p.done)):p.done.length&&!St(p.done).ranges?St(p.done):p.done.length>1&&!p.done[p.done.length-2].ranges?(p.done.pop(),St(p.done)):void 0}(L,L.lastOp==D)))wt=St(ht.changes),0==On(C.from,C.to)&&0==On(C.from,wt.to)?wt.to=Ll(C):ht.changes.push(jc(p,C));else{var Vt=St(L.done);for((!Vt||!Vt.ranges)&&cu(p.sel,L.done),ht={changes:[jc(p,C)],generation:L.generation},L.done.push(ht);L.done.length>L.undoDepth;)L.done.shift(),L.done[0].ranges||L.done.shift()}L.done.push(I),L.generation=++L.maxGeneration,L.lastModTime=L.lastSelTime=Y,L.lastOp=L.lastSelOp=D,L.lastOrigin=L.lastSelOrigin=C.origin,wt||xe(p,"historyAdded")}function dc(p,C,I,D){var L=p.history,Y=D&&D.origin;I==L.lastSelOp||Y&&L.lastSelOrigin==Y&&(L.lastModTime==L.lastSelTime&&L.lastOrigin==Y||function(p,C,I,D){var L=C.charAt(0);return"*"==L||"+"==L&&I.ranges.length==D.ranges.length&&I.somethingSelected()==D.somethingSelected()&&new Date-p.history.lastSelTime<=(p.cm?p.cm.options.historyEventDelay:500)}(p,Y,St(L.done),C))?L.done[L.done.length-1]=C:cu(C,L.done),L.lastSelTime=+new Date,L.lastSelOrigin=Y,L.lastSelOp=I,D&&!1!==D.clearRedo&&ea(L.undone)}function cu(p,C){var I=St(C);I&&I.ranges&&I.equals(p)||C.push(p)}function pc(p,C,I,D){var L=C["spans_"+p.id],Y=0;p.iter(Math.max(p.first,I),Math.min(p.first+p.size,D),function(ht){ht.markedSpans&&((L||(L=C["spans_"+p.id]={}))[Y]=ht.markedSpans),++Y})}function za(p){if(!p)return null;for(var C,I=0;I<p.length;++I)p[I].marker.explicitlyCleared?C||(C=p.slice(0,I)):C&&C.push(p[I]);return C?C.length?C:null:p}function Kl(p,C){var I=function(p,C){var I=C["spans_"+p.id];if(!I)return null;for(var D=[],L=0;L<C.text.length;++L)D.push(za(I[L]));return D}(p,C),D=Ks(p,C);if(!I)return D;if(!D)return I;for(var L=0;L<I.length;++L){var Y=I[L],ht=D[L];if(Y&&ht)t:for(var wt=0;wt<ht.length;++wt){for(var Vt=ht[wt],$t=0;$t<Y.length;++$t)if(Y[$t].marker==Vt.marker)continue t;Y.push(Vt)}else ht&&(I[L]=ht)}return I}function Rl(p,C,I){for(var D=[],L=0;L<p.length;++L){var Y=p[L];if(Y.ranges)D.push(I?ya.prototype.deepCopy.call(Y):Y);else{var ht=Y.changes,wt=[];D.push({changes:wt});for(var Vt=0;Vt<ht.length;++Vt){var $t=ht[Vt],Ie=void 0;if(wt.push({from:$t.from,to:$t.to,text:$t.text}),C)for(var Ye in $t)(Ie=Ye.match(/^spans_(\d+)$/))&&Ze(C,Number(Ie[1]))>-1&&(St(wt)[Ye]=$t[Ye],delete $t[Ye])}}}return D}function qo(p,C,I,D){if(D){var L=p.anchor;if(I){var Y=On(C,L)<0;Y!=On(I,L)<0?(L=C,C=I):Y!=On(C,I)<0&&(C=I)}return new Vr(L,C)}return new Vr(I||C,C)}function Dl(p,C,I,D,L){null==L&&(L=p.cm&&(p.cm.display.shift||p.extend)),ia(p,new ya([qo(p.sel.primary(),C,I,L)],0),D)}function Il(p,C,I){for(var D=[],L=p.cm&&(p.cm.display.shift||p.extend),Y=0;Y<p.sel.ranges.length;Y++)D[Y]=qo(p.sel.ranges[Y],C[Y],null,L);ia(p,Ia(p.cm,D,p.sel.primIndex),I)}function Jl(p,C,I,D){var L=p.sel.ranges.slice(0);L[C]=I,ia(p,Ia(p.cm,L,p.sel.primIndex),D)}function fc(p,C,I,D){ia(p,lc(C,I),D)}function Jc(p,C,I){var D=p.history.done,L=St(D);L&&L.ranges?(D[D.length-1]=C,Nl(p,C,I)):ia(p,C,I)}function ia(p,C,I){Nl(p,C,I),dc(p,p.sel,p.cm?p.cm.curOp.id:NaN,I)}function Nl(p,C,I){(Ii(p,"beforeSelectionChange")||p.cm&&Ii(p.cm,"beforeSelectionChange"))&&(C=function(p,C,I){var D={ranges:C.ranges,update:function(L){this.ranges=[];for(var Y=0;Y<L.length;Y++)this.ranges[Y]=new Vr(Yi(p,L[Y].anchor),Yi(p,L[Y].head))},origin:I&&I.origin};return xe(p,"beforeSelectionChange",p,D),p.cm&&xe(p.cm,"beforeSelectionChange",p.cm,D),D.ranges!=C.ranges?Ia(p.cm,D.ranges,D.ranges.length-1):C}(p,C,I));var D=I&&I.bias||(On(C.primary().head,p.sel.primary().head)<0?-1:1);$l(p,pa(p,C,D,!0)),(!I||!1!==I.scroll)&&p.cm&&"nocursor"!=p.cm.getOption("readOnly")&&nt(p.cm)}function $l(p,C){C.equals(p.sel)||(p.sel=C,p.cm&&(p.cm.curOp.updateInput=1,p.cm.curOp.selectionChanged=!0,je(p.cm)),cr(p,"cursorActivity",p))}function xc(p){$l(p,pa(p,p.sel,null,!1))}function pa(p,C,I,D){for(var L,Y=0;Y<C.ranges.length;Y++){var ht=C.ranges[Y],wt=C.ranges.length==p.sel.ranges.length&&p.sel.ranges[Y],Vt=gc(p,ht.anchor,wt&&wt.anchor,I,D),$t=gc(p,ht.head,wt&&wt.head,I,D);(L||Vt!=ht.anchor||$t!=ht.head)&&(L||(L=C.ranges.slice(0,Y)),L[Y]=new Vr(Vt,$t))}return L?Ia(p.cm,L,C.primIndex):C}function tl(p,C,I,D,L){var Y=Mi(p,C.line);if(Y.markedSpans)for(var ht=0;ht<Y.markedSpans.length;++ht){var wt=Y.markedSpans[ht],Vt=wt.marker,$t="selectLeft"in Vt?!Vt.selectLeft:Vt.inclusiveLeft,Ie="selectRight"in Vt?!Vt.selectRight:Vt.inclusiveRight;if((null==wt.from||($t?wt.from<=C.ch:wt.from<C.ch))&&(null==wt.to||(Ie?wt.to>=C.ch:wt.to>C.ch))){if(L&&(xe(Vt,"beforeCursorEnter"),Vt.explicitlyCleared)){if(Y.markedSpans){--ht;continue}break}if(!Vt.atomic)continue;if(I){var Ye=Vt.find(D<0?1:-1),gi=void 0;if((D<0?Ie:$t)&&(Ye=mc(p,Ye,-D,Ye&&Ye.line==C.line?Y:null)),Ye&&Ye.line==C.line&&(gi=On(Ye,I))&&(D<0?gi<0:gi>0))return tl(p,Ye,C,D,L)}var ui=Vt.find(D<0?-1:1);return(D<0?$t:Ie)&&(ui=mc(p,ui,D,ui.line==C.line?Y:null)),ui?tl(p,ui,C,D,L):null}}return C}function gc(p,C,I,D,L){var Y=D||1;return tl(p,C,I,Y,L)||!L&&tl(p,C,I,Y,!0)||tl(p,C,I,-Y,L)||!L&&tl(p,C,I,-Y,!0)||(p.cantEdit=!0,Vi(p.first,0))}function mc(p,C,I,D){return I<0&&0==C.ch?C.line>p.first?Yi(p,Vi(C.line-1)):null:I>0&&C.ch==(D||Mi(p,C.line)).text.length?C.line<p.first+p.size-1?Vi(C.line+1,0):null:new Vi(C.line,C.ch+I)}function kc(p){p.setSelection(Vi(p.firstLine(),0),Vi(p.lastLine()),Le)}function $c(p,C,I){var D={canceled:!1,from:C.from,to:C.to,text:C.text,origin:C.origin,cancel:function(){return D.canceled=!0}};return I&&(D.update=function(L,Y,ht,wt){L&&(D.from=Yi(p,L)),Y&&(D.to=Yi(p,Y)),ht&&(D.text=ht),void 0!==wt&&(D.origin=wt)}),xe(p,"beforeChange",p,D),p.cm&&xe(p.cm,"beforeChange",p.cm,D),D.canceled?(p.cm&&(p.cm.curOp.updateInput=2),null):{from:D.from,to:D.to,text:D.text,origin:D.origin}}function Oa(p,C,I){if(p.cm){if(!p.cm.curOp)return Ao(p.cm,Oa)(p,C,I);if(p.cm.state.suppressEdits)return}if(!(Ii(p,"beforeChange")||p.cm&&Ii(p.cm,"beforeChange"))||(C=$c(p,C,!0))){var D=jo&&!I&&function(p,C,I){var D=null;if(p.iter(C.line,I.line+1,function(ui){if(ui.markedSpans)for(var Ni=0;Ni<ui.markedSpans.length;++Ni){var Xi=ui.markedSpans[Ni].marker;Xi.readOnly&&(!D||-1==Ze(D,Xi))&&(D||(D=[])).push(Xi)}}),!D)return null;for(var L=[{from:C,to:I}],Y=0;Y<D.length;++Y)for(var ht=D[Y],wt=ht.find(0),Vt=0;Vt<L.length;++Vt){var $t=L[Vt];if(!(On($t.to,wt.from)<0||On($t.from,wt.to)>0)){var Ie=[Vt,1],Ye=On($t.from,wt.from),gi=On($t.to,wt.to);(Ye<0||!ht.inclusiveLeft&&!Ye)&&Ie.push({from:$t.from,to:wt.from}),(gi>0||!ht.inclusiveRight&&!gi)&&Ie.push({from:wt.to,to:$t.to}),L.splice.apply(L,Ie),Vt+=Ie.length-3}}return L}(p,C.from,C.to);if(D)for(var L=D.length-1;L>=0;--L)co(p,{from:D[L].from,to:D[L].to,text:L?[""]:C.text,origin:C.origin});else co(p,C)}}function co(p,C){if(1!=C.text.length||""!=C.text[0]||0!=On(C.from,C.to)){var I=Yl(p,C);Po(p,C,I,p.cm?p.cm.curOp.id:NaN),_c(p,C,I,Ks(p,C));var D=[];hl(p,function(L,Y){!Y&&-1==Ze(D,L.history)&&(Lu(L.history,C),D.push(L.history)),_c(L,C,null,Ks(L,C))})}}function Pl(p,C,I){var D=p.cm&&p.cm.state.suppressEdits;if(!D||I){for(var Y,L=p.history,ht=p.sel,wt="undo"==C?L.done:L.undone,Vt="undo"==C?L.undone:L.done,$t=0;$t<wt.length&&(Y=wt[$t],!(I?Y.ranges&&!Y.equals(p.sel):!Y.ranges));$t++);if($t!=wt.length){for(L.lastOrigin=L.lastSelOrigin=null;;){if(!(Y=wt.pop()).ranges){if(D)return void wt.push(Y);break}if(cu(Y,Vt),I&&!Y.equals(p.sel))return void ia(p,Y,{clearRedo:!1});ht=Y}var Ie=[];cu(ht,Vt),Vt.push({changes:Ie,generation:L.generation}),L.generation=Y.generation||++L.maxGeneration;for(var Ye=Ii(p,"beforeChange")||p.cm&&Ii(p.cm,"beforeChange"),gi=function(Xi){var tn=Y.changes[Xi];if(tn.origin=C,Ye&&!$c(p,tn,!1))return wt.length=0,{};Ie.push(jc(p,tn));var gn=Xi?Yl(p,tn):St(wt);_c(p,tn,gn,Kl(p,tn)),!Xi&&p.cm&&p.cm.scrollIntoView({from:tn.from,to:Ll(tn)});var Tn=[];hl(p,function(cn,En){!En&&-1==Ze(Tn,cn.history)&&(Lu(cn.history,tn),Tn.push(cn.history)),_c(cn,tn,null,Kl(cn,tn))})},ui=Y.changes.length-1;ui>=0;--ui){var Ni=gi(ui);if(Ni)return Ni.v}}}}function Zl(p,C){if(0!=C&&(p.first+=C,p.sel=new ya(jt(p.sel.ranges,function(L){return new Vr(Vi(L.anchor.line+C,L.anchor.ch),Vi(L.head.line+C,L.head.ch))}),p.sel.primIndex),p.cm)){Qo(p.cm,p.first,p.first-C,C);for(var I=p.cm.display,D=I.viewFrom;D<I.viewTo;D++)ua(p.cm,D,"gutter")}}function _c(p,C,I,D){if(p.cm&&!p.cm.curOp)return Ao(p.cm,_c)(p,C,I,D);if(C.to.line<p.first)Zl(p,C.text.length-1-(C.to.line-C.from.line));else if(!(C.from.line>p.lastLine())){if(C.from.line<p.first){var L=C.text.length-1-(p.first-C.from.line);Zl(p,L),C={from:Vi(p.first,0),to:Vi(C.to.line+L,C.to.ch),text:[St(C.text)],origin:C.origin}}var Y=p.lastLine();C.to.line>Y&&(C={from:C.from,to:Vi(Y,Mi(p,Y).text.length),text:[C.text[0]],origin:C.origin}),C.removed=Fn(p,C.from,C.to),I||(I=Yl(p,C)),p.cm?function(p,C,I){var D=p.doc,L=p.display,Y=C.from,ht=C.to,wt=!1,Vt=Y.line;p.options.lineWrapping||(Vt=pr(Lo(Mi(D,Y.line))),D.iter(Vt,ht.line+1,function(ui){if(ui==L.maxLine)return wt=!0,!0})),D.sel.contains(C.from,C.to)>-1&&je(p),Is(D,C,I,_a(p)),p.options.lineWrapping||(D.iter(Vt,Y.line+C.text.length,function(ui){var Ni=$s(ui);Ni>L.maxLineLength&&(L.maxLine=ui,L.maxLineLength=Ni,L.maxLineChanged=!0,wt=!1)}),wt&&(p.curOp.updateMaxLine=!0)),function(p,C){if(p.modeFrontier=Math.min(p.modeFrontier,C),!(p.highlightFrontier<C-10)){for(var I=p.first,D=C-1;D>I;D--){var L=Mi(p,D).stateAfter;if(L&&(!(L instanceof Yn)||D+L.lookAhead<C)){I=D+1;break}}p.highlightFrontier=Math.min(p.highlightFrontier,I)}}(D,Y.line),sc(p,400);var $t=C.text.length-(ht.line-Y.line)-1;C.full?Qo(p):Y.line!=ht.line||1!=C.text.length||Oc(p.doc,C)?Qo(p,Y.line,ht.line+1,$t):ua(p,Y.line,"text");var Ie=Ii(p,"changes"),Ye=Ii(p,"change");if(Ye||Ie){var gi={from:Y,to:ht,text:C.text,removed:C.removed,origin:C.origin};Ye&&cr(p,"change",p,gi),Ie&&(p.curOp.changeObjs||(p.curOp.changeObjs=[])).push(gi)}p.display.selForContextMenu=null}(p.cm,C,D):Is(p,C,D),Nl(p,I,Le),p.cantEdit&&gc(p,Vi(p.firstLine(),0))&&(p.cantEdit=!1)}}function dl(p,C,I,D,L){var Y;D||(D=I),On(D,I)<0&&(I=(Y=[D,I])[0],D=Y[1]),"string"==typeof C&&(C=p.splitLines(C)),Oa(p,{from:I,to:D,text:C,origin:L})}function ku(p,C,I,D){I<p.line?p.line+=D:C<p.line&&(p.line=C,p.ch=0)}function Fl(p,C,I,D){for(var L=0;L<p.length;++L){var Y=p[L],ht=!0;if(Y.ranges){Y.copied||((Y=p[L]=Y.deepCopy()).copied=!0);for(var wt=0;wt<Y.ranges.length;wt++)ku(Y.ranges[wt].anchor,C,I,D),ku(Y.ranges[wt].head,C,I,D)}else{for(var Vt=0;Vt<Y.changes.length;++Vt){var $t=Y.changes[Vt];if(I<$t.from.line)$t.from=Vi($t.from.line+D,$t.from.ch),$t.to=Vi($t.to.line+D,$t.to.ch);else if(C<=$t.to.line){ht=!1;break}}ht||(p.splice(0,L+1),L=0)}}}function Lu(p,C){var I=C.from.line,D=C.to.line,L=C.text.length-(D-I)-1;Fl(p.done,I,D,L),Fl(p.undone,I,D,L)}function vc(p,C,I,D){var L=C,Y=C;return"number"==typeof C?Y=Mi(p,Ji(p,C)):L=pr(C),null==L?null:(D(Y,L)&&p.cm&&ua(p.cm,L,I),Y)}function Zc(p){this.lines=p,this.parent=null;for(var C=0,I=0;I<p.length;++I)p[I].parent=this,C+=p[I].height;this.height=C}function Ml(p){this.children=p;for(var C=0,I=0,D=0;D<p.length;++D){var L=p[D];C+=L.chunkSize(),I+=L.height,L.parent=this}this.size=C,this.height=I,this.parent=null}Vr.prototype.from=function(){return Oi(this.anchor,this.head)},Vr.prototype.to=function(){return Ue(this.anchor,this.head)},Vr.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},Zc.prototype={chunkSize:function(){return this.lines.length},removeInner:function(p,C){for(var I=p,D=p+C;I<D;++I){var L=this.lines[I];this.height-=L.height,cs(L),cr(L,"delete")}this.lines.splice(p,C)},collapse:function(p){p.push.apply(p,this.lines)},insertInner:function(p,C,I){this.height+=I,this.lines=this.lines.slice(0,p).concat(C).concat(this.lines.slice(p));for(var D=0;D<C.length;++D)C[D].parent=this},iterN:function(p,C,I){for(var D=p+C;p<D;++p)if(I(this.lines[p]))return!0}},Ml.prototype={chunkSize:function(){return this.size},removeInner:function(p,C){this.size-=C;for(var I=0;I<this.children.length;++I){var D=this.children[I],L=D.chunkSize();if(p<L){var Y=Math.min(C,L-p),ht=D.height;if(D.removeInner(p,Y),this.height-=ht-D.height,L==Y&&(this.children.splice(I--,1),D.parent=null),0==(C-=Y))break;p=0}else p-=L}if(this.size-C<25&&(this.children.length>1||!(this.children[0]instanceof Zc))){var wt=[];this.collapse(wt),this.children=[new Zc(wt)],this.children[0].parent=this}},collapse:function(p){for(var C=0;C<this.children.length;++C)this.children[C].collapse(p)},insertInner:function(p,C,I){this.size+=C.length,this.height+=I;for(var D=0;D<this.children.length;++D){var L=this.children[D],Y=L.chunkSize();if(p<=Y){if(L.insertInner(p,C,I),L.lines&&L.lines.length>50){for(var ht=L.lines.length%25+25,wt=ht;wt<L.lines.length;){var Vt=new Zc(L.lines.slice(wt,wt+=25));L.height-=Vt.height,this.children.splice(++D,0,Vt),Vt.parent=this}L.lines=L.lines.slice(0,ht),this.maybeSpill()}break}p-=Y}},maybeSpill:function(){if(!(this.children.length<=10)){var p=this;do{var I=new Ml(p.children.splice(p.children.length-5,5));if(p.parent){p.size-=I.size,p.height-=I.height;var L=Ze(p.parent.children,p);p.parent.children.splice(L+1,0,I)}else{var D=new Ml(p.children);D.parent=p,p.children=[D,I],p=D}I.parent=p.parent}while(p.children.length>10);p.parent.maybeSpill()}},iterN:function(p,C,I){for(var D=0;D<this.children.length;++D){var L=this.children[D],Y=L.chunkSize();if(p<Y){var ht=Math.min(C,Y-p);if(L.iterN(p,ht,I))return!0;if(0==(C-=ht))break;p=0}else p-=Y}}};var el=function(p,C,I){if(I)for(var D in I)I.hasOwnProperty(D)&&(this[D]=I[D]);this.doc=p,this.node=C};function pl(p,C,I){Ar(C)<(p.curOp&&p.curOp.scrollTop||p.doc.scrollTop)&&ft(p,I)}el.prototype.clear=function(){var p=this.doc.cm,C=this.line.widgets,I=this.line,D=pr(I);if(null!=D&&C){for(var L=0;L<C.length;++L)C[L]==this&&C.splice(L--,1);C.length||(I.widgets=null);var Y=ee(this);Pr(I,Math.max(0,I.height-Y)),p&&(hs(p,function(){pl(p,I,-Y),ua(p,D,"widget")}),cr(p,"lineWidgetCleared",p,this,D))}},el.prototype.changed=function(){var p=this,C=this.height,I=this.doc.cm,D=this.line;this.height=null;var L=ee(this)-C;!L||(Lr(this.doc,D)||Pr(D,D.height+L),I&&hs(I,function(){I.curOp.forceUpdate=!0,pl(I,D,L),cr(I,"lineWidgetChanged",I,p,pr(D))}))},_i(el);var uu=0,fl=function(p,C){this.lines=[],this.type=C,this.doc=p,this.id=++uu};function Ea(p,C,I,D,L){if(D&&D.shared)return function(p,C,I,D,L){(D=pe(D)).shared=!1;var Y=[Ea(p,C,I,D,L)],ht=Y[0],wt=D.widgetNode;return hl(p,function(Vt){wt&&(D.widgetNode=wt.cloneNode(!0)),Y.push(Ea(Vt,Yi(Vt,C),Yi(Vt,I),D,L));for(var $t=0;$t<Vt.linked.length;++$t)if(Vt.linked[$t].isParent)return;ht=St(Y)}),new il(Y,ht)}(p,C,I,D,L);if(p.cm&&!p.cm.curOp)return Ao(p.cm,Ea)(p,C,I,D,L);var Y=new fl(p,L),ht=On(C,I);if(D&&pe(D,Y,!1),ht>0||0==ht&&!1!==Y.clearWhenEmpty)return Y;if(Y.replacedWith&&(Y.collapsed=!0,Y.widgetNode=Et("span",[Y.replacedWith],"CodeMirror-widget"),D.handleMouseEvents||Y.widgetNode.setAttribute("cm-ignore-events","true"),D.insertLeft&&(Y.widgetNode.insertLeft=!0)),Y.collapsed){if(Bo(p,C.line,C,I,Y)||C.line!=I.line&&Bo(p,I.line,C,I,Y))throw new Error("Inserting collapsed marker partially overlapping an existing one");Io=!0}Y.addToHistory&&Po(p,{from:C,to:I,origin:"markText"},p.sel,NaN);var $t,wt=C.line,Vt=p.cm;if(p.iter(wt,I.line+1,function(Ye){Vt&&Y.collapsed&&!Vt.options.lineWrapping&&Lo(Ye)==Vt.display.maxLine&&($t=!0),Y.collapsed&&wt!=C.line&&Pr(Ye,0),function(p,C,I){var D=I&&window.WeakSet&&(I.markedSpans||(I.markedSpans=new WeakSet));D&&D.has(p.markedSpans)?p.markedSpans.push(C):(p.markedSpans=p.markedSpans?p.markedSpans.concat([C]):[C],D&&D.add(p.markedSpans)),C.marker.attachLine(p)}(Ye,new Ca(Y,wt==C.line?C.ch:null,wt==I.line?I.ch:null),p.cm&&p.cm.curOp),++wt}),Y.collapsed&&p.iter(C.line,I.line+1,function(Ye){Lr(p,Ye)&&Pr(Ye,0)}),Y.clearOnEnter&&mi(Y,"beforeCursorEnter",function(){return Y.clear()}),Y.readOnly&&(jo=!0,(p.history.done.length||p.history.undone.length)&&p.clearHistory()),Y.collapsed&&(Y.id=++uu,Y.atomic=!0),Vt){if($t&&(Vt.curOp.updateMaxLine=!0),Y.collapsed)Qo(Vt,C.line,I.line+1);else if(Y.className||Y.startStyle||Y.endStyle||Y.css||Y.attributes||Y.title)for(var Ie=C.line;Ie<=I.line;Ie++)ua(Vt,Ie,"text");Y.atomic&&xc(Vt.doc),cr(Vt,"markerAdded",Vt,Y)}return Y}fl.prototype.clear=function(){if(!this.explicitlyCleared){var p=this.doc.cm,C=p&&!p.curOp;if(C&&Go(p),Ii(this,"clear")){var I=this.find();I&&cr(this,"clear",I.from,I.to)}for(var D=null,L=null,Y=0;Y<this.lines.length;++Y){var ht=this.lines[Y],wt=Zo(ht.markedSpans,this);p&&!this.collapsed?ua(p,pr(ht),"text"):p&&(null!=wt.to&&(L=pr(ht)),null!=wt.from&&(D=pr(ht))),ht.markedSpans=sa(ht.markedSpans,wt),null==wt.from&&this.collapsed&&!Lr(this.doc,ht)&&p&&Pr(ht,ca(p.display))}if(p&&this.collapsed&&!p.options.lineWrapping)for(var Vt=0;Vt<this.lines.length;++Vt){var $t=Lo(this.lines[Vt]),Ie=$s($t);Ie>p.display.maxLineLength&&(p.display.maxLine=$t,p.display.maxLineLength=Ie,p.display.maxLineChanged=!0)}null!=D&&p&&this.collapsed&&Qo(p,D,L+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,p&&xc(p.doc)),p&&cr(p,"markerCleared",p,this,D,L),C&&Ga(p),this.parent&&this.parent.clear()}},fl.prototype.find=function(p,C){null==p&&"bookmark"==this.type&&(p=1);for(var I,D,L=0;L<this.lines.length;++L){var Y=this.lines[L],ht=Zo(Y.markedSpans,this);if(null!=ht.from&&(I=Vi(C?Y:pr(Y),ht.from),-1==p))return I;if(null!=ht.to&&(D=Vi(C?Y:pr(Y),ht.to),1==p))return D}return I&&{from:I,to:D}},fl.prototype.changed=function(){var p=this,C=this.find(-1,!0),I=this,D=this.doc.cm;!C||!D||hs(D,function(){var L=C.line,Y=pr(C.line),ht=er(D,Y);if(ht&&(Zs(ht),D.curOp.selectionChanged=D.curOp.forceUpdate=!0),D.curOp.updateMaxLine=!0,!Lr(I.doc,L)&&null!=I.height){var wt=I.height;I.height=null;var Vt=ee(I)-wt;Vt&&Pr(L,L.height+Vt)}cr(D,"markerChanged",D,p)})},fl.prototype.attachLine=function(p){if(!this.lines.length&&this.doc.cm){var C=this.doc.cm.curOp;(!C.maybeHiddenMarkers||-1==Ze(C.maybeHiddenMarkers,this))&&(C.maybeUnhiddenMarkers||(C.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(p)},fl.prototype.detachLine=function(p){if(this.lines.splice(Ze(this.lines,p),1),!this.lines.length&&this.doc.cm){var C=this.doc.cm.curOp;(C.maybeHiddenMarkers||(C.maybeHiddenMarkers=[])).push(this)}},_i(fl);var il=function(p,C){this.markers=p,this.primary=C;for(var I=0;I<p.length;++I)p[I].parent=this};function na(p){return p.findMarks(Vi(p.first,0),p.clipPos(Vi(p.lastLine())),function(C){return C.parent})}function Ql(p){for(var C=function(D){var L=p[D],Y=[L.primary.doc];hl(L.primary.doc,function(Vt){return Y.push(Vt)});for(var ht=0;ht<L.markers.length;ht++){var wt=L.markers[ht];-1==Ze(Y,wt.doc)&&(wt.parent=null,L.markers.splice(ht--,1))}},I=0;I<p.length;I++)C(I)}il.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var p=0;p<this.markers.length;++p)this.markers[p].clear();cr(this,"clear")}},il.prototype.find=function(p,C){return this.primary.find(p,C)},_i(il);var fh=0,ds=function(p,C,I,D,L){if(!(this instanceof ds))return new ds(p,C,I,D,L);null==I&&(I=0),Ml.call(this,[new Zc([new is("",null)])]),this.first=I,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=I;var Y=Vi(I,0);this.sel=lc(Y),this.history=new hc(null),this.id=++fh,this.modeOption=C,this.lineSep=D,this.direction="rtl"==L?"rtl":"ltr",this.extend=!1,"string"==typeof p&&(p=this.splitLines(p)),Is(this,{from:Y,to:Y,text:p}),ia(this,lc(Y),Le)};ds.prototype=Te(Ml.prototype,{constructor:ds,iter:function(p,C,I){I?this.iterN(p-this.first,C-p,I):this.iterN(this.first,this.first+this.size,p)},insert:function(p,C){for(var I=0,D=0;D<C.length;++D)I+=C[D].height;this.insertInner(p-this.first,C,I)},remove:function(p,C){this.removeInner(p-this.first,C)},getValue:function(p){var C=hr(this,this.first,this.first+this.size);return!1===p?C:C.join(p||this.lineSeparator())},setValue:Xr(function(p){var C=Vi(this.first,0),I=this.first+this.size-1;Oa(this,{from:C,to:Vi(I,Mi(this,I).text.length),text:this.splitLines(p),origin:"setValue",full:!0},!0),this.cm&&q(this.cm,0,0),ia(this,lc(C),Le)}),replaceRange:function(p,C,I,D){dl(this,p,C=Yi(this,C),I=I?Yi(this,I):C,D)},getRange:function(p,C,I){var D=Fn(this,Yi(this,p),Yi(this,C));return!1===I?D:D.join(""===I?"":I||this.lineSeparator())},getLine:function(p){var C=this.getLineHandle(p);return C&&C.text},getLineHandle:function(p){if(Zr(this,p))return Mi(this,p)},getLineNumber:function(p){return pr(p)},getLineHandleVisualStart:function(p){return"number"==typeof p&&(p=Mi(this,p)),Lo(p)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(p){return Yi(this,p)},getCursor:function(p){var C=this.sel.primary();return null==p||"head"==p?C.head:"anchor"==p?C.anchor:"end"==p||"to"==p||!1===p?C.to():C.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Xr(function(p,C,I){fc(this,Yi(this,"number"==typeof p?Vi(p,C||0):p),null,I)}),setSelection:Xr(function(p,C,I){fc(this,Yi(this,p),Yi(this,C||p),I)}),extendSelection:Xr(function(p,C,I){Dl(this,Yi(this,p),C&&Yi(this,C),I)}),extendSelections:Xr(function(p,C){Il(this,zn(this,p),C)}),extendSelectionsBy:Xr(function(p,C){Il(this,zn(this,jt(this.sel.ranges,p)),C)}),setSelections:Xr(function(p,C,I){if(p.length){for(var D=[],L=0;L<p.length;L++)D[L]=new Vr(Yi(this,p[L].anchor),Yi(this,p[L].head||p[L].anchor));null==C&&(C=Math.min(p.length-1,this.sel.primIndex)),ia(this,Ia(this.cm,D,C),I)}}),addSelection:Xr(function(p,C,I){var D=this.sel.ranges.slice(0);D.push(new Vr(Yi(this,p),Yi(this,C||p))),ia(this,Ia(this.cm,D,D.length-1),I)}),getSelection:function(p){for(var I,C=this.sel.ranges,D=0;D<C.length;D++){var L=Fn(this,C[D].from(),C[D].to());I=I?I.concat(L):L}return!1===p?I:I.join(p||this.lineSeparator())},getSelections:function(p){for(var C=[],I=this.sel.ranges,D=0;D<I.length;D++){var L=Fn(this,I[D].from(),I[D].to());!1!==p&&(L=L.join(p||this.lineSeparator())),C[D]=L}return C},replaceSelection:function(p,C,I){for(var D=[],L=0;L<this.sel.ranges.length;L++)D[L]=p;this.replaceSelections(D,C,I||"+input")},replaceSelections:Xr(function(p,C,I){for(var D=[],L=this.sel,Y=0;Y<L.ranges.length;Y++){var ht=L.ranges[Y];D[Y]={from:ht.from(),to:ht.to(),text:this.splitLines(p[Y]),origin:I}}for(var wt=C&&"end"!=C&&function(p,C,I){for(var D=[],L=Vi(p.first,0),Y=L,ht=0;ht<C.length;ht++){var wt=C[ht],Vt=cc(wt.from,L,Y),$t=cc(Ll(wt),L,Y);if(L=wt.to,Y=$t,"around"==I){var Ie=p.sel.ranges[ht],Ye=On(Ie.head,Ie.anchor)<0;D[ht]=new Vr(Ye?$t:Vt,Ye?Vt:$t)}else D[ht]=new Vr(Vt,Vt)}return new ya(D,p.sel.primIndex)}(this,D,C),Vt=D.length-1;Vt>=0;Vt--)Oa(this,D[Vt]);wt?Jc(this,wt):this.cm&&nt(this.cm)}),undo:Xr(function(){Pl(this,"undo")}),redo:Xr(function(){Pl(this,"redo")}),undoSelection:Xr(function(){Pl(this,"undo",!0)}),redoSelection:Xr(function(){Pl(this,"redo",!0)}),setExtending:function(p){this.extend=p},getExtending:function(){return this.extend},historySize:function(){for(var p=this.history,C=0,I=0,D=0;D<p.done.length;D++)p.done[D].ranges||++C;for(var L=0;L<p.undone.length;L++)p.undone[L].ranges||++I;return{undo:C,redo:I}},clearHistory:function(){var p=this;this.history=new hc(this.history),hl(this,function(C){return C.history=p.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(p){return p&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(p){return this.history.generation==(p||this.cleanGeneration)},getHistory:function(){return{done:Rl(this.history.done),undone:Rl(this.history.undone)}},setHistory:function(p){var C=this.history=new hc(this.history);C.done=Rl(p.done.slice(0),null,!0),C.undone=Rl(p.undone.slice(0),null,!0)},setGutterMarker:Xr(function(p,C,I){return vc(this,p,"gutter",function(D){var L=D.gutterMarkers||(D.gutterMarkers={});return L[C]=I,!I&&re(L)&&(D.gutterMarkers=null),!0})}),clearGutter:Xr(function(p){var C=this;this.iter(function(I){I.gutterMarkers&&I.gutterMarkers[p]&&vc(C,I,"gutter",function(){return I.gutterMarkers[p]=null,re(I.gutterMarkers)&&(I.gutterMarkers=null),!0})})}),lineInfo:function(p){var C;if("number"==typeof p){if(!(Zr(this,p)&&(C=p,p=Mi(this,p))))return null}else if(null==(C=pr(p)))return null;return{line:C,handle:p,text:p.text,gutterMarkers:p.gutterMarkers,textClass:p.textClass,bgClass:p.bgClass,wrapClass:p.wrapClass,widgets:p.widgets}},addLineClass:Xr(function(p,C,I){return vc(this,p,"gutter"==C?"gutter":"class",function(D){var L="text"==C?"textClass":"background"==C?"bgClass":"gutter"==C?"gutterClass":"wrapClass";if(D[L]){if(st(I).test(D[L]))return!1;D[L]+=" "+I}else D[L]=I;return!0})}),removeLineClass:Xr(function(p,C,I){return vc(this,p,"gutter"==C?"gutter":"class",function(D){var L="text"==C?"textClass":"background"==C?"bgClass":"gutter"==C?"gutterClass":"wrapClass",Y=D[L];if(!Y)return!1;if(null==I)D[L]=null;else{var ht=Y.match(st(I));if(!ht)return!1;var wt=ht.index+ht[0].length;D[L]=Y.slice(0,ht.index)+(ht.index&&wt!=Y.length?" ":"")+Y.slice(wt)||null}return!0})}),addLineWidget:Xr(function(p,C,I){return function(p,C,I,D){var L=new el(p,I,D),Y=p.cm;return Y&&L.noHScroll&&(Y.display.alignWidgets=!0),vc(p,C,"widget",function(ht){var wt=ht.widgets||(ht.widgets=[]);if(null==L.insertAt?wt.push(L):wt.splice(Math.min(wt.length,Math.max(0,L.insertAt)),0,L),L.line=ht,Y&&!Lr(p,ht)){var Vt=Ar(ht)<p.scrollTop;Pr(ht,ht.height+ee(L)),Vt&&ft(Y,L.height),Y.curOp.forceUpdate=!0}return!0}),Y&&cr(Y,"lineWidgetAdded",Y,L,"number"==typeof C?C:pr(C)),L}(this,p,C,I)}),removeLineWidget:function(p){p.clear()},markText:function(p,C,I){return Ea(this,Yi(this,p),Yi(this,C),I,I&&I.type||"range")},setBookmark:function(p,C){var I={replacedWith:C&&(null==C.nodeType?C.widget:C),insertLeft:C&&C.insertLeft,clearWhenEmpty:!1,shared:C&&C.shared,handleMouseEvents:C&&C.handleMouseEvents};return Ea(this,p=Yi(this,p),p,I,"bookmark")},findMarksAt:function(p){var C=[],I=Mi(this,(p=Yi(this,p)).line).markedSpans;if(I)for(var D=0;D<I.length;++D){var L=I[D];(null==L.from||L.from<=p.ch)&&(null==L.to||L.to>=p.ch)&&C.push(L.marker.parent||L.marker)}return C},findMarks:function(p,C,I){p=Yi(this,p),C=Yi(this,C);var D=[],L=p.line;return this.iter(p.line,C.line+1,function(Y){var ht=Y.markedSpans;if(ht)for(var wt=0;wt<ht.length;wt++){var Vt=ht[wt];!(null!=Vt.to&&L==p.line&&p.ch>=Vt.to||null==Vt.from&&L!=p.line||null!=Vt.from&&L==C.line&&Vt.from>=C.ch)&&(!I||I(Vt.marker))&&D.push(Vt.marker.parent||Vt.marker)}++L}),D},getAllMarks:function(){var p=[];return this.iter(function(C){var I=C.markedSpans;if(I)for(var D=0;D<I.length;++D)null!=I[D].from&&p.push(I[D].marker)}),p},posFromIndex:function(p){var C,I=this.first,D=this.lineSeparator().length;return this.iter(function(L){var Y=L.text.length+D;if(Y>p)return C=p,!0;p-=Y,++I}),Yi(this,Vi(I,C))},indexFromPos:function(p){var C=(p=Yi(this,p)).ch;if(p.line<this.first||p.ch<0)return 0;var I=this.lineSeparator().length;return this.iter(this.first,p.line,function(D){C+=D.text.length+I}),C},copy:function(p){var C=new ds(hr(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return C.scrollTop=this.scrollTop,C.scrollLeft=this.scrollLeft,C.sel=this.sel,C.extend=!1,p&&(C.history.undoDepth=this.history.undoDepth,C.setHistory(this.getHistory())),C},linkedDoc:function(p){p||(p={});var C=this.first,I=this.first+this.size;null!=p.from&&p.from>C&&(C=p.from),null!=p.to&&p.to<I&&(I=p.to);var D=new ds(hr(this,C,I),p.mode||this.modeOption,C,this.lineSep,this.direction);return p.sharedHist&&(D.history=this.history),(this.linked||(this.linked=[])).push({doc:D,sharedHist:p.sharedHist}),D.linked=[{doc:this,isParent:!0,sharedHist:p.sharedHist}],function(p,C){for(var I=0;I<C.length;I++){var D=C[I],L=D.find(),Y=p.clipPos(L.from),ht=p.clipPos(L.to);if(On(Y,ht)){var wt=Ea(p,Y,ht,D.primary,D.primary.type);D.markers.push(wt),wt.parent=D}}}(D,na(this)),D},unlinkDoc:function(p){if(p instanceof Wo&&(p=p.doc),this.linked)for(var C=0;C<this.linked.length;++C)if(this.linked[C].doc==p){this.linked.splice(C,1),p.unlinkDoc(this),Ql(na(this));break}if(p.history==this.history){var D=[p.id];hl(p,function(L){return D.push(L.id)},!0),p.history=new hc(null),p.history.done=Rl(this.history.done,D),p.history.undone=Rl(this.history.undone,D)}},iterLinkedDocs:function(p){hl(this,p)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(p){return this.lineSep?p.split(this.lineSep):ir(p)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Xr(function(p){"rtl"!=p&&(p="ltr"),p!=this.direction&&(this.direction=p,this.iter(function(C){return C.order=null}),this.cm&&function(p){hs(p,function(){uc(p),Qo(p)})}(this.cm))})}),ds.prototype.eachLine=ds.prototype.iter;var Lc=0;function vt(p){var C=this;if(De(C),!Ci(C,p)&&!be(C.display,p)){Hi(p),n&&(Lc=+new Date);var I=ll(C,p,!0),D=p.dataTransfer.files;if(I&&!C.isReadOnly())if(D&&D.length&&window.FileReader&&window.File)for(var L=D.length,Y=Array(L),ht=0,wt=function(){++ht==L&&Ao(C,function(){var ui={from:I=Yi(C.doc,I),to:I,text:C.doc.splitLines(Y.filter(function(Ni){return null!=Ni}).join(C.doc.lineSeparator())),origin:"paste"};Oa(C.doc,ui),Jc(C.doc,lc(Yi(C.doc,I),Yi(C.doc,Ll(ui))))})()},Vt=function(ui,Ni){if(C.options.allowDropFileTypes&&-1==Ze(C.options.allowDropFileTypes,ui.type))wt();else{var Xi=new FileReader;Xi.onerror=function(){return wt()},Xi.onload=function(){var tn=Xi.result;/[\x00-\x08\x0e-\x1f]{2}/.test(tn)||(Y[Ni]=tn),wt()},Xi.readAsText(ui)}},$t=0;$t<D.length;$t++)Vt(D[$t],$t);else{if(C.state.draggingText&&C.doc.sel.contains(I)>-1)return C.state.draggingText(p),void setTimeout(function(){return C.display.input.focus()},20);try{var Ie=p.dataTransfer.getData("Text");if(Ie){var Ye;if(C.state.draggingText&&!C.state.draggingText.copy&&(Ye=C.listSelections()),Nl(C.doc,lc(I,I)),Ye)for(var gi=0;gi<Ye.length;++gi)dl(C.doc,"",Ye[gi].anchor,Ye[gi].head,"drag");C.replaceSelection(Ie,"around","paste"),C.display.input.focus()}}catch(ui){}}}}function De(p){p.display.dragCursor&&(p.display.lineSpace.removeChild(p.display.dragCursor),p.display.dragCursor=null)}function Ve(p){if(document.getElementsByClassName){for(var C=document.getElementsByClassName("CodeMirror"),I=[],D=0;D<C.length;D++){var L=C[D].CodeMirror;L&&I.push(L)}I.length&&I[0].operation(function(){for(var Y=0;Y<I.length;Y++)p(I[Y])})}}var fi=!1;function Qe(){fi||(function(){var p;mi(window,"resize",function(){null==p&&(p=setTimeout(function(){p=null,Ve(Li)},100))}),mi(window,"blur",function(){return Ve(Ua)})}(),fi=!0)}function Li(p){var C=p.display;C.cachedCharWidth=C.cachedTextHeight=C.cachedPaddingH=null,C.scrollbarsClipped=!1,p.setSize()}for(var Ai={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},zi=0;zi<10;zi++)Ai[zi+48]=Ai[zi+96]=String(zi);for(var Kn=65;Kn<=90;Kn++)Ai[Kn]=String.fromCharCode(Kn);for(var Un=1;Un<=12;Un++)Ai[Un+111]=Ai[Un+63235]="F"+Un;var $n={};function Ko(p){var C=p.split(/-(?!$)/);p=C[C.length-1];for(var I,D,L,Y,ht=0;ht<C.length-1;ht++){var wt=C[ht];if(/^(cmd|meta|m)$/i.test(wt))Y=!0;else if(/^a(lt)?$/i.test(wt))I=!0;else if(/^(c|ctrl|control)$/i.test(wt))D=!0;else{if(!/^s(hift)?$/i.test(wt))throw new Error("Unrecognized modifier name: "+wt);L=!0}}return I&&(p="Alt-"+p),D&&(p="Ctrl-"+p),Y&&(p="Cmd-"+p),L&&(p="Shift-"+p),p}function Co(p){var C={};for(var I in p)if(p.hasOwnProperty(I)){var D=p[I];if(/^(name|fallthrough|(de|at)tach)$/.test(I))continue;if("..."==D){delete p[I];continue}for(var L=jt(I.split(" "),Ko),Y=0;Y<L.length;Y++){var ht=void 0,wt=void 0;Y==L.length-1?(wt=L.join(" "),ht=D):(wt=L.slice(0,Y+1).join(" "),ht="...");var Vt=C[wt];if(Vt){if(Vt!=ht)throw new Error("Inconsistent bindings for "+wt)}else C[wt]=ht}delete p[I]}for(var $t in C)p[$t]=C[$t];return p}function Gr(p,C,I,D){var L=(C=Ms(C)).call?C.call(p,D):C[p];if(!1===L)return"nothing";if("..."===L)return"multi";if(null!=L&&I(L))return"handled";if(C.fallthrough){if("[object Array]"!=Object.prototype.toString.call(C.fallthrough))return Gr(p,C.fallthrough,I,D);for(var Y=0;Y<C.fallthrough.length;Y++){var ht=Gr(p,C.fallthrough[Y],I,D);if(ht)return ht}}}function uo(p){var C="string"==typeof p?p:Ai[p.keyCode];return"Ctrl"==C||"Alt"==C||"Shift"==C||"Mod"==C}function So(p,C,I){var D=p;return C.altKey&&"Alt"!=D&&(p="Alt-"+p),(Ct?C.metaKey:C.ctrlKey)&&"Ctrl"!=D&&(p="Ctrl-"+p),(Ct?C.ctrlKey:C.metaKey)&&"Mod"!=D&&(p="Cmd-"+p),!I&&C.shiftKey&&"Shift"!=D&&(p="Shift-"+p),p}function oo(p,C){if(x&&34==p.keyCode&&p.char)return!1;var I=Ai[p.keyCode];return null!=I&&!p.altGraphKey&&(3==p.keyCode&&p.code&&(I=p.code),So(I,p,C))}function Ms(p){return"string"==typeof p?$n[p]:p}function os(p,C){for(var I=p.doc.sel.ranges,D=[],L=0;L<I.length;L++){for(var Y=C(I[L]);D.length&&On(Y.from,St(D).to)<=0;){var ht=D.pop();if(On(ht.from,Y.from)<0){Y.from=ht.from;break}}D.push(Y)}hs(p,function(){for(var wt=D.length-1;wt>=0;wt--)dl(p.doc,"",D[wt].from,D[wt].to,"+delete");nt(p)})}function ys(p,C,I){var D=Qt(p.text,C+I,I);return D<0||D>p.text.length?null:D}function ml(p,C,I){var D=ys(p,C.ch,I);return null==D?null:new Vi(C.line,D,I<0?"after":"before")}function hu(p,C,I,D,L){if(p){"rtl"==C.doc.direction&&(L=-L);var Y=yi(I,C.doc.direction);if(Y){var $t,ht=L<0?St(Y):Y[0],Vt=L<0==(1==ht.level)?"after":"before";if(ht.level>0||"rtl"==C.doc.direction){var Ie=wr(C,I),Ye=Yr(C,Ie,$t=L<0?I.text.length-1:0).top;$t=de(function(gi){return Yr(C,Ie,gi).top==Ye},L<0==(1==ht.level)?ht.from:ht.to-1,$t),"before"==Vt&&($t=ys(I,$t,1))}else $t=L<0?ht.to:ht.from;return new Vi(D,$t,Vt)}}return new Vi(D,L<0?I.text.length:0,L<0?"before":"after")}$n.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},$n.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},$n.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},$n.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},$n.default=pt?$n.macDefault:$n.pcDefault;var Fu={selectAll:kc,singleSelection:function(p){return p.setSelection(p.getCursor("anchor"),p.getCursor("head"),Le)},killLine:function(p){return os(p,function(C){if(C.empty()){var I=Mi(p.doc,C.head.line).text.length;return C.head.ch==I&&C.head.line<p.lastLine()?{from:C.head,to:Vi(C.head.line+1,0)}:{from:C.head,to:Vi(C.head.line,I)}}return{from:C.from(),to:C.to()}})},deleteLine:function(p){return os(p,function(C){return{from:Vi(C.from().line,0),to:Yi(p.doc,Vi(C.to().line+1,0))}})},delLineLeft:function(p){return os(p,function(C){return{from:Vi(C.from().line,0),to:C.from()}})},delWrappedLineLeft:function(p){return os(p,function(C){var I=p.charCoords(C.head,"div").top+5;return{from:p.coordsChar({left:0,top:I},"div"),to:C.from()}})},delWrappedLineRight:function(p){return os(p,function(C){var I=p.charCoords(C.head,"div").top+5,D=p.coordsChar({left:p.display.lineDiv.offsetWidth+100,top:I},"div");return{from:C.from(),to:D}})},undo:function(p){return p.undo()},redo:function(p){return p.redo()},undoSelection:function(p){return p.undoSelection()},redoSelection:function(p){return p.redoSelection()},goDocStart:function(p){return p.extendSelection(Vi(p.firstLine(),0))},goDocEnd:function(p){return p.extendSelection(Vi(p.lastLine()))},goLineStart:function(p){return p.extendSelectionsBy(function(C){return du(p,C.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(p){return p.extendSelectionsBy(function(C){return pu(p,C.head)},{origin:"+move",bias:1})},goLineEnd:function(p){return p.extendSelectionsBy(function(C){return function(p,C){var I=Mi(p.doc,C),D=function(p){for(var C;C=Yo(p);)p=C.find(1,!0).line;return p}(I);return D!=I&&(C=pr(D)),hu(!0,p,I,C,-1)}(p,C.head.line)},{origin:"+move",bias:-1})},goLineRight:function(p){return p.extendSelectionsBy(function(C){var I=p.cursorCoords(C.head,"div").top+5;return p.coordsChar({left:p.display.lineDiv.offsetWidth+100,top:I},"div")},Gt)},goLineLeft:function(p){return p.extendSelectionsBy(function(C){var I=p.cursorCoords(C.head,"div").top+5;return p.coordsChar({left:0,top:I},"div")},Gt)},goLineLeftSmart:function(p){return p.extendSelectionsBy(function(C){var I=p.cursorCoords(C.head,"div").top+5,D=p.coordsChar({left:0,top:I},"div");return D.ch<p.getLine(D.line).search(/\S/)?pu(p,C.head):D},Gt)},goLineUp:function(p){return p.moveV(-1,"line")},goLineDown:function(p){return p.moveV(1,"line")},goPageUp:function(p){return p.moveV(-1,"page")},goPageDown:function(p){return p.moveV(1,"page")},goCharLeft:function(p){return p.moveH(-1,"char")},goCharRight:function(p){return p.moveH(1,"char")},goColumnLeft:function(p){return p.moveH(-1,"column")},goColumnRight:function(p){return p.moveH(1,"column")},goWordLeft:function(p){return p.moveH(-1,"word")},goGroupRight:function(p){return p.moveH(1,"group")},goGroupLeft:function(p){return p.moveH(-1,"group")},goWordRight:function(p){return p.moveH(1,"word")},delCharBefore:function(p){return p.deleteH(-1,"codepoint")},delCharAfter:function(p){return p.deleteH(1,"char")},delWordBefore:function(p){return p.deleteH(-1,"word")},delWordAfter:function(p){return p.deleteH(1,"word")},delGroupBefore:function(p){return p.deleteH(-1,"group")},delGroupAfter:function(p){return p.deleteH(1,"group")},indentAuto:function(p){return p.indentSelection("smart")},indentMore:function(p){return p.indentSelection("add")},indentLess:function(p){return p.indentSelection("subtract")},insertTab:function(p){return p.replaceSelection("\t")},insertSoftTab:function(p){for(var C=[],I=p.listSelections(),D=p.options.tabSize,L=0;L<I.length;L++){var Y=I[L].from(),ht=He(p.getLine(Y.line),Y.ch,D);C.push(ie(D-ht%D))}p.replaceSelections(C)},defaultTab:function(p){p.somethingSelected()?p.indentSelection("add"):p.execCommand("insertTab")},transposeChars:function(p){return hs(p,function(){for(var C=p.listSelections(),I=[],D=0;D<C.length;D++)if(C[D].empty()){var L=C[D].head,Y=Mi(p.doc,L.line).text;if(Y)if(L.ch==Y.length&&(L=new Vi(L.line,L.ch-1)),L.ch>0)L=new Vi(L.line,L.ch+1),p.replaceRange(Y.charAt(L.ch-1)+Y.charAt(L.ch-2),Vi(L.line,L.ch-2),L,"+transpose");else if(L.line>p.doc.first){var ht=Mi(p.doc,L.line-1).text;ht&&(L=new Vi(L.line,1),p.replaceRange(Y.charAt(0)+p.doc.lineSeparator()+ht.charAt(ht.length-1),Vi(L.line-1,ht.length-1),L,"+transpose"))}I.push(new Vr(L,L))}p.setSelections(I)})},newlineAndIndent:function(p){return hs(p,function(){for(var C=p.listSelections(),I=C.length-1;I>=0;I--)p.replaceRange(p.doc.lineSeparator(),C[I].anchor,C[I].head,"+input");C=p.listSelections();for(var D=0;D<C.length;D++)p.indentLine(C[D].from().line,null,!0);nt(p)})},openLine:function(p){return p.replaceSelection("\n","start")},toggleOverwrite:function(p){return p.toggleOverwrite()}};function du(p,C){var I=Mi(p.doc,C),D=Lo(I);return D!=I&&(C=pr(D)),hu(!0,p,D,C,1)}function pu(p,C){var I=du(p,C.line),D=Mi(p.doc,I.line),L=yi(D,p.doc.direction);if(!L||0==L[0].level){var Y=Math.max(I.ch,D.text.search(/\S/));return Vi(I.line,C.line==I.line&&C.ch<=Y&&C.ch?0:Y,I.sticky)}return I}function Ta(p,C,I){if("string"==typeof C&&!(C=Fu[C]))return!1;p.display.input.ensurePolled();var D=p.display.shift,L=!1;try{p.isReadOnly()&&(p.state.suppressEdits=!0),I&&(p.display.shift=!1),L=C(p)!=$e}finally{p.display.shift=D,p.state.suppressEdits=!1}return L}var Hu=new ke;function fu(p,C,I,D){var L=p.state.keySeq;if(L){if(uo(C))return"handled";if(/\'$/.test(C)?p.state.keySeq=null:Hu.set(50,function(){p.state.keySeq==L&&(p.state.keySeq=null,p.display.input.reset())}),Uu(p,L+" "+C,I,D))return!0}return Uu(p,C,I,D)}function Uu(p,C,I,D){var L=function(p,C,I){for(var D=0;D<p.state.keyMaps.length;D++){var L=Gr(C,p.state.keyMaps[D],I,p);if(L)return L}return p.options.extraKeys&&Gr(C,p.options.extraKeys,I,p)||Gr(C,p.options.keyMap,I,p)}(p,C,D);return"multi"==L&&(p.state.keySeq=C),"handled"==L&&cr(p,"keyHandled",p,C,I),("handled"==L||"multi"==L)&&(Hi(I),Gl(p)),!!L}function ql(p,C){var I=oo(C,!0);return!!I&&(C.shiftKey&&!p.state.keySeq?fu(p,"Shift-"+I,C,function(D){return Ta(p,D,!0)})||fu(p,I,C,function(D){if("string"==typeof D?/^go[A-Z]/.test(D):D.motion)return Ta(p,D)}):fu(p,I,C,function(D){return Ta(p,D)}))}var Qc=null;function qc(p){var C=this;if(!(p.target&&p.target!=C.display.input.getField()||(C.curOp.focus=fe(),Ci(C,p)))){n&&r<11&&27==p.keyCode&&(p.returnValue=!1);var I=p.keyCode;C.display.shift=16==I||p.shiftKey;var D=ql(C,p);x&&(Qc=D?I:null,!D&&88==I&&!Ke&&(pt?p.metaKey:p.ctrlKey)&&C.replaceSelection("",null,"cut")),T&&!pt&&!D&&46==I&&p.shiftKey&&!p.ctrlKey&&document.execCommand&&document.execCommand("cut"),18==I&&!/\bCodeMirror-crosshair\b/.test(C.display.lineDiv.className)&&function(p){var C=p.display.lineDiv;function I(D){(18==D.keyCode||!D.altKey)&&(gt(C,"CodeMirror-crosshair"),Re(document,"keyup",I),Re(document,"mouseover",I))}Mt(C,"CodeMirror-crosshair"),mi(document,"keyup",I),mi(document,"mouseover",I)}(C)}}function gu(p){16==p.keyCode&&(this.doc.sel.shift=!1),Ci(this,p)}function Vu(p){var C=this;if(!(p.target&&p.target!=C.display.input.getField()||be(C.display,p)||Ci(C,p)||p.ctrlKey&&!p.altKey||pt&&p.metaKey)){var I=p.keyCode,D=p.charCode;if(x&&I==Qc)return Qc=null,void Hi(p);if(!x||p.which&&!(p.which<10)||!ql(C,p)){var L=String.fromCharCode(null==D?I:D);"\b"!=L&&(function(p,C,I){return fu(p,"'"+I+"'",C,function(D){return Ta(p,D,!0)})}(C,p,L)||C.display.input.onKeyPress(p))}}}var mu,Pc,Nc=function(p,C,I){this.time=p,this.pos=C,this.button=I};function eh(p){var C=this,I=C.display;if(!(Ci(C,p)||I.activeTouch&&I.input.supportsTouch())){if(I.input.ensurePolled(),I.shift=p.shiftKey,be(I,p))return void(s||(I.scroller.draggable=!1,setTimeout(function(){return I.scroller.draggable=!0},100)));if(!_u(C,p)){var D=ll(C,p),L=Lt(p),Y=D?function(p,C){var I=+new Date;return Pc&&Pc.compare(I,p,C)?(mu=Pc=null,"triple"):mu&&mu.compare(I,p,C)?(Pc=new Nc(I,p,C),mu=null,"double"):(mu=new Nc(I,p,C),Pc=null,"single")}(D,L):"single";window.focus(),1==L&&C.state.selectingText&&C.state.selectingText(p),(!D||!function(p,C,I,D,L){var Y="Click";return"double"==D?Y="Double"+Y:"triple"==D&&(Y="Triple"+Y),fu(p,So(Y=(1==C?"Left":2==C?"Middle":"Right")+Y,L),L,function(ht){if("string"==typeof ht&&(ht=Fu[ht]),!ht)return!1;var wt=!1;try{p.isReadOnly()&&(p.state.suppressEdits=!0),wt=ht(p,I)!=$e}finally{p.state.suppressEdits=!1}return wt})}(C,L,D,Y,p))&&(1==L?D?function(p,C,I,D){n?setTimeout(ve(va,p),0):p.curOp.focus=fe();var ht,L=function(p,C,I){var D=p.getOption("configureMouse"),L=D?D(p,C,I):{};return null==L.unit&&(L.unit=(It?I.shiftKey&&I.metaKey:I.altKey)?"rectangle":"single"==C?"char":"double"==C?"word":"line"),(null==L.extend||p.doc.extend)&&(L.extend=p.doc.extend||I.shiftKey),null==L.addNew&&(L.addNew=pt?I.metaKey:I.ctrlKey),null==L.moveOnDrag&&(L.moveOnDrag=!(pt?I.altKey:I.ctrlKey)),L}(p,I,D),Y=p.doc.sel;p.options.dragDrop&&ce&&!p.isReadOnly()&&"single"==I&&(ht=Y.contains(C))>-1&&(On((ht=Y.ranges[ht]).from(),C)<0||C.xRel>0)&&(On(ht.to(),C)>0||C.xRel<0)?function(p,C,I,D){var L=p.display,Y=!1,ht=Ao(p,function($t){s&&(L.scroller.draggable=!1),p.state.draggingText=!1,p.state.delayingBlurEvent&&(p.hasFocus()?p.state.delayingBlurEvent=!1:Ha(p)),Re(L.wrapper.ownerDocument,"mouseup",ht),Re(L.wrapper.ownerDocument,"mousemove",wt),Re(L.scroller,"dragstart",Vt),Re(L.scroller,"drop",ht),Y||(Hi($t),D.addNew||Dl(p.doc,I,null,null,D.extend),s&&!B||n&&9==r?setTimeout(function(){L.wrapper.ownerDocument.body.focus({preventScroll:!0}),L.input.focus()},20):L.input.focus())}),wt=function($t){Y=Y||Math.abs(C.clientX-$t.clientX)+Math.abs(C.clientY-$t.clientY)>=10},Vt=function(){return Y=!0};s&&(L.scroller.draggable=!0),p.state.draggingText=ht,ht.copy=!D.moveOnDrag,mi(L.wrapper.ownerDocument,"mouseup",ht),mi(L.wrapper.ownerDocument,"mousemove",wt),mi(L.scroller,"dragstart",Vt),mi(L.scroller,"drop",ht),p.state.delayingBlurEvent=!0,setTimeout(function(){return L.input.focus()},20),L.scroller.dragDrop&&L.scroller.dragDrop()}(p,D,C,L):function(p,C,I,D){n&&Ha(p);var L=p.display,Y=p.doc;Hi(C);var ht,wt,Vt=Y.sel,$t=Vt.ranges;if(D.addNew&&!D.extend?(wt=Y.sel.contains(I),ht=wt>-1?$t[wt]:new Vr(I,I)):(ht=Y.sel.primary(),wt=Y.sel.primIndex),"rectangle"==D.unit)D.addNew||(ht=new Vr(I,I)),I=ll(p,C,!0,!0),wt=-1;else{var Ie=Gu(p,I,D.unit);ht=D.extend?qo(ht,Ie.anchor,Ie.head,D.extend):Ie}D.addNew?-1==wt?(wt=$t.length,ia(Y,Ia(p,$t.concat([ht]),wt),{scroll:!1,origin:"*mouse"})):$t.length>1&&$t[wt].empty()&&"char"==D.unit&&!D.extend?(ia(Y,Ia(p,$t.slice(0,wt).concat($t.slice(wt+1)),0),{scroll:!1,origin:"*mouse"}),Vt=Y.sel):Jl(Y,wt,ht,pi):(wt=0,ia(Y,new ya([ht],0),pi),Vt=Y.sel);var Ye=I;function gi(cn){if(0!=On(Ye,cn))if(Ye=cn,"rectangle"==D.unit){for(var En=[],Vn=p.options.tabSize,jn=He(Mi(Y,I.line).text,I.ch,Vn),fr=He(Mi(Y,cn.line).text,cn.ch,Vn),io=Math.min(jn,fr),ss=Math.max(jn,fr),zo=Math.min(I.line,cn.line),ja=Math.min(p.lastLine(),Math.max(I.line,cn.line));zo<=ja;zo++){var Ya=Mi(Y,zo).text,As=Se(Ya,io,Vn);io==ss?En.push(new Vr(Vi(zo,As),Vi(zo,As))):Ya.length>As&&En.push(new Vr(Vi(zo,As),Vi(zo,Se(Ya,ss,Vn))))}En.length||En.push(new Vr(I,I)),ia(Y,Ia(p,Vt.ranges.slice(0,wt).concat(En),wt),{origin:"*mouse",scroll:!1}),p.scrollIntoView(cn)}else{var S,Kr=ht,zs=Gu(p,cn,D.unit),Os=Kr.anchor;On(zs.anchor,Os)>0?(S=zs.head,Os=Oi(Kr.from(),zs.anchor)):(S=zs.anchor,Os=Ue(Kr.to(),zs.head));var H=Vt.ranges.slice(0);H[wt]=function(p,C){var I=C.anchor,D=C.head,L=Mi(p.doc,I.line);if(0==On(I,D)&&I.sticky==D.sticky)return C;var Y=yi(L);if(!Y)return C;var ht=Pi(Y,I.ch,I.sticky),wt=Y[ht];if(wt.from!=I.ch&&wt.to!=I.ch)return C;var $t,Vt=ht+(wt.from==I.ch==(1!=wt.level)?0:1);if(0==Vt||Vt==Y.length)return C;if(D.line!=I.line)$t=(D.line-I.line)*("ltr"==p.doc.direction?1:-1)>0;else{var Ie=Pi(Y,D.ch,D.sticky),Ye=Ie-ht||(D.ch-I.ch)*(1==wt.level?-1:1);$t=Ie==Vt-1||Ie==Vt?Ye<0:Ye>0}var gi=Y[Vt+($t?-1:0)],ui=$t==(1==gi.level),Ni=ui?gi.from:gi.to,Xi=ui?"after":"before";return I.ch==Ni&&I.sticky==Xi?C:new Vr(new Vi(I.line,Ni,Xi),D)}(p,new Vr(Yi(Y,Os),S)),ia(Y,Ia(p,H,wt),pi)}}var ui=L.wrapper.getBoundingClientRect(),Ni=0;function Xi(cn){var En=++Ni,Vn=ll(p,cn,!0,"rectangle"==D.unit);if(Vn)if(0!=On(Vn,Ye)){p.curOp.focus=fe(),gi(Vn);var jn=kl(L,Y);(Vn.line>=jn.to||Vn.line<jn.from)&&setTimeout(Ao(p,function(){Ni==En&&Xi(cn)}),150)}else{var fr=cn.clientY<ui.top?-20:cn.clientY>ui.bottom?20:0;fr&&setTimeout(Ao(p,function(){Ni==En&&(L.scroller.scrollTop+=fr,Xi(cn))}),50)}}function tn(cn){p.state.selectingText=!1,Ni=1/0,cn&&(Hi(cn),L.input.focus()),Re(L.wrapper.ownerDocument,"mousemove",gn),Re(L.wrapper.ownerDocument,"mouseup",Tn),Y.history.lastSelOrigin=null}var gn=Ao(p,function(cn){0!==cn.buttons&&Lt(cn)?Xi(cn):tn(cn)}),Tn=Ao(p,tn);p.state.selectingText=Tn,mi(L.wrapper.ownerDocument,"mousemove",gn),mi(L.wrapper.ownerDocument,"mouseup",Tn)}(p,D,C,L)}(C,D,Y,p):ct(p)==I.scroller&&Hi(p):2==L?(D&&Dl(C.doc,D),setTimeout(function(){return I.input.focus()},20)):3==L&&(bt?C.display.input.onContextMenu(p):Ha(C)))}}}function Gu(p,C,I){if("char"==I)return new Vr(C,C);if("word"==I)return p.findWordAt(C);if("line"==I)return new Vr(Vi(C.line,0),Yi(p.doc,Vi(C.line+1,0)));var D=I(p,C);return new Vr(D.from,D.to)}function fa(p,C,I,D){var L,Y;if(C.touches)L=C.touches[0].clientX,Y=C.touches[0].clientY;else try{L=C.clientX,Y=C.clientY}catch(gi){return!1}if(L>=Math.floor(p.display.gutters.getBoundingClientRect().right))return!1;D&&Hi(C);var ht=p.display,wt=ht.lineDiv.getBoundingClientRect();if(Y>wt.bottom||!Ii(p,I))return ue(C);Y-=wt.top-ht.viewOffset;for(var Vt=0;Vt<p.display.gutterSpecs.length;++Vt){var $t=ht.gutters.childNodes[Vt];if($t&&$t.getBoundingClientRect().right>=L)return xe(p,I,p,Sr(p.doc,Y),p.display.gutterSpecs[Vt].className,C),ue(C)}}function _u(p,C){return fa(p,C,"gutterClick",!0)}function Bl(p,C){be(p.display,C)||function(p,C){return!!Ii(p,"gutterContextMenu")&&fa(p,C,"gutterContextMenu",!1)}(p,C)||Ci(p,C,"contextmenu")||bt||p.display.input.onContextMenu(C)}function ra(p){p.display.wrapper.className=p.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+p.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Bs(p)}Nc.prototype.compare=function(p,C,I){return this.time+400>p&&0==On(C,this.pos)&&I==this.button};var Hl={toString:function(){return"CodeMirror.Init"}},Wu={},zu={};function ju(p,C,I){if(!C!=!(I&&I!=Hl)){var L=p.display.dragFunctions,Y=C?mi:Re;Y(p.display.scroller,"dragstart",L.start),Y(p.display.scroller,"dragenter",L.enter),Y(p.display.scroller,"dragover",L.over),Y(p.display.scroller,"dragleave",L.leave),Y(p.display.scroller,"drop",L.drop)}}function Dh(p){p.options.lineWrapping?(Mt(p.display.wrapper,"CodeMirror-wrap"),p.display.sizer.style.minWidth="",p.display.sizerWidth=null):(gt(p.display.wrapper,"CodeMirror-wrap"),ol(p)),Ol(p),Qo(p),Bs(p),setTimeout(function(){return Ur(p)},100)}function Wo(p,C){var I=this;if(!(this instanceof Wo))return new Wo(p,C);this.options=C=C?pe(C):{},pe(Wu,C,!1);var D=C.value;"string"==typeof D?D=new ds(D,C.mode,null,C.lineSeparator,C.direction):C.mode&&(D.modeOption=C.mode),this.doc=D;var L=new Wo.inputStyles[C.inputStyle](this),Y=this.display=new da(p,D,L,C);for(var ht in Y.wrapper.CodeMirror=this,ra(this),C.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Vs(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new ke,keySeq:null,specialChars:null},C.autofocus&&!Pt&&Y.input.focus(),n&&r<11&&setTimeout(function(){return I.display.input.reset(!0)},20),function(p){var C=p.display;mi(C.scroller,"mousedown",Ao(p,eh)),mi(C.scroller,"dblclick",n&&r<11?Ao(p,function(Vt){if(!Ci(p,Vt)){var $t=ll(p,Vt);if($t&&!_u(p,Vt)&&!be(p.display,Vt)){Hi(Vt);var Ie=p.findWordAt($t);Dl(p.doc,Ie.anchor,Ie.head)}}}):function(Vt){return Ci(p,Vt)||Hi(Vt)}),mi(C.scroller,"contextmenu",function(Vt){return Bl(p,Vt)}),mi(C.input.getField(),"contextmenu",function(Vt){C.scroller.contains(Vt.target)||Bl(p,Vt)});var I,D={end:0};function L(){C.activeTouch&&(I=setTimeout(function(){return C.activeTouch=null},1e3),(D=C.activeTouch).end=+new Date)}function Y(Vt){if(1!=Vt.touches.length)return!1;var $t=Vt.touches[0];return $t.radiusX<=1&&$t.radiusY<=1}function ht(Vt,$t){if(null==$t.left)return!0;var Ie=$t.left-Vt.left,Ye=$t.top-Vt.top;return Ie*Ie+Ye*Ye>400}mi(C.scroller,"touchstart",function(Vt){if(!Ci(p,Vt)&&!Y(Vt)&&!_u(p,Vt)){C.input.ensurePolled(),clearTimeout(I);var $t=+new Date;C.activeTouch={start:$t,moved:!1,prev:$t-D.end<=300?D:null},1==Vt.touches.length&&(C.activeTouch.left=Vt.touches[0].pageX,C.activeTouch.top=Vt.touches[0].pageY)}}),mi(C.scroller,"touchmove",function(){C.activeTouch&&(C.activeTouch.moved=!0)}),mi(C.scroller,"touchend",function(Vt){var $t=C.activeTouch;if($t&&!be(C,Vt)&&null!=$t.left&&!$t.moved&&new Date-$t.start<300){var Ye,Ie=p.coordsChar(C.activeTouch,"page");Ye=!$t.prev||ht($t,$t.prev)?new Vr(Ie,Ie):!$t.prev.prev||ht($t,$t.prev.prev)?p.findWordAt(Ie):new Vr(Vi(Ie.line,0),Yi(p.doc,Vi(Ie.line+1,0))),p.setSelection(Ye.anchor,Ye.head),p.focus(),Hi(Vt)}L()}),mi(C.scroller,"touchcancel",L),mi(C.scroller,"scroll",function(){C.scroller.clientHeight&&(Ge(p,C.scroller.scrollTop),ki(p,C.scroller.scrollLeft,!0),xe(p,"scroll",p))}),mi(C.scroller,"mousewheel",function(Vt){return lu(p,Vt)}),mi(C.scroller,"DOMMouseScroll",function(Vt){return lu(p,Vt)}),mi(C.wrapper,"scroll",function(){return C.wrapper.scrollTop=C.wrapper.scrollLeft=0}),C.dragFunctions={enter:function(Vt){Ci(p,Vt)||kt(Vt)},over:function(Vt){Ci(p,Vt)||(function(p,C){var I=ll(p,C);if(I){var D=document.createDocumentFragment();Ra(p,I,D),p.display.dragCursor||(p.display.dragCursor=Dt("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),p.display.lineSpace.insertBefore(p.display.dragCursor,p.display.cursorDiv)),Bt(p.display.dragCursor,D)}}(p,Vt),kt(Vt))},start:function(Vt){return function(p,C){if(n&&(!p.state.draggingText||+new Date-Lc<100))kt(C);else if(!Ci(p,C)&&!be(p.display,C)&&(C.dataTransfer.setData("Text",p.getSelection()),C.dataTransfer.effectAllowed="copyMove",C.dataTransfer.setDragImage&&!B)){var I=Dt("img",null,null,"position: fixed; left: 0; top: 0;");I.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",x&&(I.width=I.height=1,p.display.wrapper.appendChild(I),I._top=I.offsetTop),C.dataTransfer.setDragImage(I,0,0),x&&I.parentNode.removeChild(I)}}(p,Vt)},drop:Ao(p,vt),leave:function(Vt){Ci(p,Vt)||De(p)}};var wt=C.input.getField();mi(wt,"keyup",function(Vt){return gu.call(p,Vt)}),mi(wt,"keydown",Ao(p,qc)),mi(wt,"keypress",Ao(p,Vu)),mi(wt,"focus",function(Vt){return Us(p,Vt)}),mi(wt,"blur",function(Vt){return Ua(p,Vt)})}(this),Qe(),Go(this),this.curOp.forceUpdate=!0,Mr(this,D),C.autofocus&&!Pt||this.hasFocus()?setTimeout(function(){I.hasFocus()&&!I.state.focused&&Us(I)},20):Ua(this),zu)zu.hasOwnProperty(ht)&&zu[ht](this,C[ht],Hl);Mc(this),C.finishInit&&C.finishInit(this);for(var wt=0;wt<vu.length;++wt)vu[wt](this);Ga(this),s&&C.lineWrapping&&"optimizelegibility"==getComputedStyle(Y.lineDiv).textRendering&&(Y.lineDiv.style.textRendering="auto")}Wo.defaults=Wu,Wo.optionHandlers=zu;var vu=[];function ec(p,C,I,D){var Y,L=p.doc;null==I&&(I="add"),"smart"==I&&(L.mode.indent?Y=so(p,C).state:I="prev");var ht=p.options.tabSize,wt=Mi(L,C),Vt=He(wt.text,null,ht);wt.stateAfter&&(wt.stateAfter=null);var Ie,$t=wt.text.match(/^\s*/)[0];if(D||/\S/.test(wt.text)){if("smart"==I&&((Ie=L.mode.indent(Y,wt.text.slice($t.length),wt.text))==$e||Ie>150)){if(!D)return;I="prev"}}else Ie=0,I="not";"prev"==I?Ie=C>L.first?He(Mi(L,C-1).text,null,ht):0:"add"==I?Ie=Vt+p.options.indentUnit:"subtract"==I?Ie=Vt-p.options.indentUnit:"number"==typeof I&&(Ie=Vt+I),Ie=Math.max(0,Ie);var Ye="",gi=0;if(p.options.indentWithTabs)for(var ui=Math.floor(Ie/ht);ui;--ui)gi+=ht,Ye+="\t";if(gi<Ie&&(Ye+=ie(Ie-gi)),Ye!=$t)return dl(L,Ye,Vi(C,0),Vi(C,$t.length),"+input"),wt.stateAfter=null,!0;for(var Ni=0;Ni<L.sel.ranges.length;Ni++){var Xi=L.sel.ranges[Ni];if(Xi.head.line==C&&Xi.head.ch<$t.length){var tn=Vi(C,$t.length);Jl(L,Ni,new Vr(tn,tn));break}}}Wo.defineInitHook=function(p){return vu.push(p)};var _l=null;function bu(p){_l=p}function yu(p,C,I,D,L){var Y=p.doc;p.display.shift=!1,D||(D=Y.sel);var ht=+new Date-200,wt="paste"==L||p.state.pasteIncoming>ht,Vt=ir(C),$t=null;if(wt&&D.ranges.length>1)if(_l&&_l.text.join("\n")==C){if(D.ranges.length%_l.text.length==0){$t=[];for(var Ie=0;Ie<_l.text.length;Ie++)$t.push(Y.splitLines(_l.text[Ie]))}}else Vt.length==D.ranges.length&&p.options.pasteLinesPerSelection&&($t=jt(Vt,function(gn){return[gn]}));for(var Ye=p.curOp.updateInput,gi=D.ranges.length-1;gi>=0;gi--){var ui=D.ranges[gi],Ni=ui.from(),Xi=ui.to();ui.empty()&&(I&&I>0?Ni=Vi(Ni.line,Ni.ch-I):p.state.overwrite&&!wt?Xi=Vi(Xi.line,Math.min(Mi(Y,Xi.line).text.length,Xi.ch+St(Vt).length)):wt&&_l&&_l.lineWise&&_l.text.join("\n")==Vt.join("\n")&&(Ni=Xi=Vi(Ni.line,0)));var tn={from:Ni,to:Xi,text:$t?$t[gi%$t.length]:Vt,origin:L||(wt?"paste":p.state.cutIncoming>ht?"cut":"+input")};Oa(p.doc,tn),cr(p,"inputRead",p,tn)}C&&!wt&&Mh(p,C),nt(p),p.curOp.updateInput<2&&(p.curOp.updateInput=Ye),p.curOp.typing=!0,p.state.pasteIncoming=p.state.cutIncoming=-1}function rh(p,C){var I=p.clipboardData&&p.clipboardData.getData("Text");if(I)return p.preventDefault(),!C.isReadOnly()&&!C.options.disableInput&&hs(C,function(){return yu(C,I,0,null,"paste")}),!0}function Mh(p,C){if(p.options.electricChars&&p.options.smartIndent)for(var I=p.doc.sel,D=I.ranges.length-1;D>=0;D--){var L=I.ranges[D];if(!(L.head.ch>100||D&&I.ranges[D-1].head.line==L.head.line)){var Y=p.getModeAt(L.head),ht=!1;if(Y.electricChars){for(var wt=0;wt<Y.electricChars.length;wt++)if(C.indexOf(Y.electricChars.charAt(wt))>-1){ht=ec(p,L.head.line,"smart");break}}else Y.electricInput&&Y.electricInput.test(Mi(p.doc,L.head.line).text.slice(0,L.head.ch))&&(ht=ec(p,L.head.line,"smart"));ht&&cr(p,"electricInput",p,L.head.line)}}}function eu(p){for(var C=[],I=[],D=0;D<p.doc.sel.ranges.length;D++){var L=p.doc.sel.ranges[D].head.line,Y={anchor:Vi(L,0),head:Vi(L+1,0)};I.push(Y),C.push(p.getRange(Y.anchor,Y.head))}return{text:C,ranges:I}}function oh(p,C,I,D){p.setAttribute("autocorrect",I?"":"off"),p.setAttribute("autocapitalize",D?"":"off"),p.setAttribute("spellcheck",!!C)}function Yu(){var p=Dt("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),C=Dt("div",[p],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return s?p.style.width="1000px":p.setAttribute("wrap","off"),et&&(p.style.border="1px solid black"),oh(p),C}function bc(p,C,I,D,L){var Y=C,ht=I,wt=Mi(p,C.line),Vt=L&&"rtl"==p.direction?-I:I;function Ie(Tn){var cn;if("codepoint"==D){var En=wt.text.charCodeAt(C.ch+(I>0?0:-1));cn=isNaN(En)?null:new Vi(C.line,Math.max(0,Math.min(wt.text.length,C.ch+I*((I>0?En>=55296&&En<56320:En>=56320&&En<57343)?2:1))),-I)}else cn=L?function(p,C,I,D){var L=yi(C,p.doc.direction);if(!L)return ml(C,I,D);I.ch>=C.text.length?(I.ch=C.text.length,I.sticky="before"):I.ch<=0&&(I.ch=0,I.sticky="after");var Y=Pi(L,I.ch,I.sticky),ht=L[Y];if("ltr"==p.doc.direction&&ht.level%2==0&&(D>0?ht.to>I.ch:ht.from<I.ch))return ml(C,I,D);var Vt,wt=function(gn,Tn){return ys(C,gn instanceof Vi?gn.ch:gn,Tn)},$t=function(gn){return p.options.lineWrapping?(Vt=Vt||wr(p,C),Ir(p,C,Vt,gn)):{begin:0,end:C.text.length}},Ie=$t("before"==I.sticky?wt(I,-1):I.ch);if("rtl"==p.doc.direction||1==ht.level){var Ye=1==ht.level==D<0,gi=wt(I,Ye?1:-1);if(null!=gi&&(Ye?gi<=ht.to&&gi<=Ie.end:gi>=ht.from&&gi>=Ie.begin))return new Vi(I.line,gi,Ye?"before":"after")}var Ni=function(gn,Tn,cn){for(;gn>=0&&gn<L.length;gn+=Tn){var Vn=L[gn],jn=Tn>0==(1!=Vn.level),fr=jn?cn.begin:wt(cn.end,-1);if(Vn.from<=fr&&fr<Vn.to||(fr=jn?Vn.from:wt(Vn.to,-1),cn.begin<=fr&&fr<cn.end))return io=fr,jn?new Vi(I.line,wt(io,1),"before"):new Vi(I.line,io,"after")}var io},Xi=Ni(Y+D,D,Ie);if(Xi)return Xi;var tn=D>0?Ie.end:wt(Ie.begin,-1);return null==tn||D>0&&tn==C.text.length||!(Xi=Ni(D>0?0:L.length-1,D,$t(tn)))?null:Xi}(p.cm,wt,C,I):ml(wt,C,I);if(null==cn){if(Tn||!function(){var Tn=C.line+Vt;return!(Tn<p.first||Tn>=p.first+p.size)&&(C=new Vi(Tn,C.ch,C.sticky),wt=Mi(p,Tn))}())return!1;C=hu(L,p.cm,wt,C.line,Vt)}else C=cn;return!0}if("char"==D||"codepoint"==D)Ie();else if("column"==D)Ie(!0);else if("word"==D||"group"==D)for(var Ye=null,gi="group"==D,ui=p.cm&&p.cm.getHelper(C,"wordChars"),Ni=!0;!(I<0)||Ie(!Ni);Ni=!1){var Xi=wt.text.charAt(C.ch)||"\n",tn=Oe(Xi,ui)?"w":gi&&"\n"==Xi?"n":!gi||/\s/.test(Xi)?null:"p";if(gi&&!Ni&&!tn&&(tn="s"),Ye&&Ye!=tn){I<0&&(I=1,Ie(),C.sticky="after");break}if(tn&&(Ye=tn),I>0&&!Ie(!Ni))break}var gn=gc(p,C,Y,ht,!0);return Gn(Y,gn)&&(gn.hitSide=!0),gn}function iu(p,C,I,D){var ht,$t,L=p.doc,Y=C.left;if("page"==D){var wt=Math.min(p.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),Vt=Math.max(wt-.5*ca(p.display),3);ht=(I>0?C.bottom:C.top)+I*Vt}else"line"==D&&(ht=I>0?C.bottom+3:C.top-3);for(;($t=Er(p,Y,ht)).outside;){if(I<0?ht<=0:ht>=L.height){$t.hitSide=!0;break}ht+=5*I}return $t}var yo=function(p){this.cm=p,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new ke,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Xu(p,C){var I=er(p,C.line);if(!I||I.hidden)return null;var D=Mi(p.doc,C.line),L=Qn(I,D,C.line),Y=yi(D,p.doc.direction),ht="left";Y&&(ht=Pi(Y,C.ch)%2?"right":"left");var Vt=Vo(L.map,C.ch,ht);return Vt.offset="right"==Vt.collapse?Vt.end:Vt.start,Vt}function yc(p,C){return C&&(p.bad=!0),p}function Ku(p,C,I){var D;if(C==p.display.lineDiv){if(!(D=p.display.lineDiv.childNodes[I]))return yc(p.clipPos(Vi(p.display.viewTo-1)),!0);C=null,I=0}else for(D=C;;D=D.parentNode){if(!D||D==p.display.lineDiv)return null;if(D.parentNode&&D.parentNode==p.display.lineDiv)break}for(var L=0;L<p.display.view.length;L++){var Y=p.display.view[L];if(Y.node==D)return Eu(Y,C,I)}}function Eu(p,C,I){var D=p.text.firstChild,L=!1;if(!C||!rt(D,C))return yc(Vi(pr(p.line),0),!0);if(C==D&&(L=!0,C=D.childNodes[I],I=0,!C)){var Y=p.rest?St(p.rest):p.line;return yc(Vi(pr(Y),Y.text.length),L)}var ht=3==C.nodeType?C:null,wt=C;for(!ht&&1==C.childNodes.length&&3==C.firstChild.nodeType&&(ht=C.firstChild,I&&(I=ht.nodeValue.length));wt.parentNode!=D;)wt=wt.parentNode;var Vt=p.measure,$t=Vt.maps;function Ie(tn,gn,Tn){for(var cn=-1;cn<($t?$t.length:0);cn++)for(var En=cn<0?Vt.map:$t[cn],Vn=0;Vn<En.length;Vn+=3){var jn=En[Vn+2];if(jn==tn||jn==gn){var fr=pr(cn<0?p.line:p.rest[cn]),io=En[Vn]+Tn;return(Tn<0||jn!=tn)&&(io=En[Vn+(Tn?1:0)]),Vi(fr,io)}}}var Ye=Ie(ht,wt,I);if(Ye)return yc(Ye,L);for(var gi=wt.nextSibling,ui=ht?ht.nodeValue.length-I:0;gi;gi=gi.nextSibling){if(Ye=Ie(gi,gi.firstChild,0))return yc(Vi(Ye.line,Ye.ch-ui),L);ui+=gi.textContent.length}for(var Ni=wt.previousSibling,Xi=I;Ni;Ni=Ni.previousSibling){if(Ye=Ie(Ni,Ni.firstChild,-1))return yc(Vi(Ye.line,Ye.ch+Xi),L);Xi+=Ni.textContent.length}}yo.prototype.init=function(p){var C=this,I=this,D=I.cm,L=I.div=p.lineDiv;function Y(wt){for(var Vt=wt.target;Vt;Vt=Vt.parentNode){if(Vt==L)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(Vt.className))break}return!1}function ht(wt){if(Y(wt)&&!Ci(D,wt)){if(D.somethingSelected())bu({lineWise:!1,text:D.getSelections()}),"cut"==wt.type&&D.replaceSelection("",null,"cut");else{if(!D.options.lineWiseCopyCut)return;var Vt=eu(D);bu({lineWise:!0,text:Vt.text}),"cut"==wt.type&&D.operation(function(){D.setSelections(Vt.ranges,0,Le),D.replaceSelection("",null,"cut")})}if(wt.clipboardData){wt.clipboardData.clearData();var $t=_l.text.join("\n");if(wt.clipboardData.setData("Text",$t),wt.clipboardData.getData("Text")==$t)return void wt.preventDefault()}var Ie=Yu(),Ye=Ie.firstChild;D.display.lineSpace.insertBefore(Ie,D.display.lineSpace.firstChild),Ye.value=_l.text.join("\n");var gi=fe();ge(Ye),setTimeout(function(){D.display.lineSpace.removeChild(Ie),gi.focus(),gi==L&&I.showPrimarySelection()},50)}}L.contentEditable=!0,oh(L,D.options.spellcheck,D.options.autocorrect,D.options.autocapitalize),mi(L,"paste",function(wt){!Y(wt)||Ci(D,wt)||rh(wt,D)||r<=11&&setTimeout(Ao(D,function(){return C.updateFromDOM()}),20)}),mi(L,"compositionstart",function(wt){C.composing={data:wt.data,done:!1}}),mi(L,"compositionupdate",function(wt){C.composing||(C.composing={data:wt.data,done:!1})}),mi(L,"compositionend",function(wt){C.composing&&(wt.data!=C.composing.data&&C.readFromDOMSoon(),C.composing.done=!0)}),mi(L,"touchstart",function(){return I.forceCompositionEnd()}),mi(L,"input",function(){C.composing||C.readFromDOMSoon()}),mi(L,"copy",ht),mi(L,"cut",ht)},yo.prototype.screenReaderLabelChanged=function(p){p?this.div.setAttribute("aria-label",p):this.div.removeAttribute("aria-label")},yo.prototype.prepareSelection=function(){var p=xl(this.cm,!1);return p.focus=fe()==this.div,p},yo.prototype.showSelection=function(p,C){!p||!this.cm.display.view.length||((p.focus||C)&&this.showPrimarySelection(),this.showMultipleSelections(p))},yo.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},yo.prototype.showPrimarySelection=function(){var p=this.getSelection(),C=this.cm,I=C.doc.sel.primary(),D=I.from(),L=I.to();if(C.display.viewTo==C.display.viewFrom||D.line>=C.display.viewTo||L.line<C.display.viewFrom)p.removeAllRanges();else{var Y=Ku(C,p.anchorNode,p.anchorOffset),ht=Ku(C,p.focusNode,p.focusOffset);if(!Y||Y.bad||!ht||ht.bad||0!=On(Oi(Y,ht),D)||0!=On(Ue(Y,ht),L)){var wt=C.display.view,Vt=D.line>=C.display.viewFrom&&Xu(C,D)||{node:wt[0].measure.map[2],offset:0},$t=L.line<C.display.viewTo&&Xu(C,L);if(!$t){var Ie=wt[wt.length-1].measure,Ye=Ie.maps?Ie.maps[Ie.maps.length-1]:Ie.map;$t={node:Ye[Ye.length-1],offset:Ye[Ye.length-2]-Ye[Ye.length-3]}}if(!Vt||!$t)return void p.removeAllRanges();var ui,gi=p.rangeCount&&p.getRangeAt(0);try{ui=ut(Vt.node,Vt.offset,$t.offset,$t.node)}catch(Ni){}ui&&(!T&&C.state.focused?(p.collapse(Vt.node,Vt.offset),ui.collapsed||(p.removeAllRanges(),p.addRange(ui))):(p.removeAllRanges(),p.addRange(ui)),gi&&null==p.anchorNode?p.addRange(gi):T&&this.startGracePeriod()),this.rememberSelection()}}},yo.prototype.startGracePeriod=function(){var p=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){p.gracePeriod=!1,p.selectionChanged()&&p.cm.operation(function(){return p.cm.curOp.selectionChanged=!0})},20)},yo.prototype.showMultipleSelections=function(p){Bt(this.cm.display.cursorDiv,p.cursors),Bt(this.cm.display.selectionDiv,p.selection)},yo.prototype.rememberSelection=function(){var p=this.getSelection();this.lastAnchorNode=p.anchorNode,this.lastAnchorOffset=p.anchorOffset,this.lastFocusNode=p.focusNode,this.lastFocusOffset=p.focusOffset},yo.prototype.selectionInEditor=function(){var p=this.getSelection();if(!p.rangeCount)return!1;var C=p.getRangeAt(0).commonAncestorContainer;return rt(this.div,C)},yo.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&((!this.selectionInEditor()||fe()!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},yo.prototype.blur=function(){this.div.blur()},yo.prototype.getField=function(){return this.div},yo.prototype.supportsTouch=function(){return!0},yo.prototype.receivedFocus=function(){var p=this,C=this;this.selectionInEditor()?setTimeout(function(){return p.pollSelection()},20):hs(this.cm,function(){return C.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function I(){C.cm.state.focused&&(C.pollSelection(),C.polling.set(C.cm.options.pollInterval,I))})},yo.prototype.selectionChanged=function(){var p=this.getSelection();return p.anchorNode!=this.lastAnchorNode||p.anchorOffset!=this.lastAnchorOffset||p.focusNode!=this.lastFocusNode||p.focusOffset!=this.lastFocusOffset},yo.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var p=this.getSelection(),C=this.cm;if(Tt&&b&&this.cm.display.gutterSpecs.length&&function(p){for(var C=p;C;C=C.parentNode)if(/CodeMirror-gutter-wrapper/.test(C.className))return!0;return!1}(p.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var I=Ku(C,p.anchorNode,p.anchorOffset),D=Ku(C,p.focusNode,p.focusOffset);I&&D&&hs(C,function(){ia(C.doc,lc(I,D),Le),(I.bad||D.bad)&&(C.curOp.selectionChanged=!0)})}}},yo.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var Y,ht,wt,p=this.cm,C=p.display,I=p.doc.sel.primary(),D=I.from(),L=I.to();if(0==D.ch&&D.line>p.firstLine()&&(D=Vi(D.line-1,Mi(p.doc,D.line-1).length)),L.ch==Mi(p.doc,L.line).text.length&&L.line<p.lastLine()&&(L=Vi(L.line+1,0)),D.line<C.viewFrom||L.line>C.viewTo-1)return!1;D.line==C.viewFrom||0==(Y=vs(p,D.line))?(ht=pr(C.view[0].line),wt=C.view[0].node):(ht=pr(C.view[Y].line),wt=C.view[Y-1].node.nextSibling);var $t,Ie,Vt=vs(p,L.line);if(Vt==C.view.length-1?($t=C.viewTo-1,Ie=C.lineDiv.lastChild):($t=pr(C.view[Vt+1].line)-1,Ie=C.view[Vt+1].node.previousSibling),!wt)return!1;for(var Ye=p.doc.splitLines(function(p,C,I,D,L){var Y="",ht=!1,wt=p.doc.lineSeparator(),Vt=!1;function Ie(){ht&&(Y+=wt,Vt&&(Y+=wt),ht=Vt=!1)}function Ye(ui){ui&&(Ie(),Y+=ui)}function gi(ui){if(1==ui.nodeType){var Ni=ui.getAttribute("cm-text");if(Ni)return void Ye(Ni);var tn,Xi=ui.getAttribute("cm-marker");if(Xi){var gn=p.findMarks(Vi(D,0),Vi(L+1,0),function(ui){return function(Ni){return Ni.id==ui}}(+Xi));return void(gn.length&&(tn=gn[0].find(0))&&Ye(Fn(p.doc,tn.from,tn.to).join(wt)))}if("false"==ui.getAttribute("contenteditable"))return;var Tn=/^(pre|div|p|li|table|br)$/i.test(ui.nodeName);if(!/^br$/i.test(ui.nodeName)&&0==ui.textContent.length)return;Tn&&Ie();for(var cn=0;cn<ui.childNodes.length;cn++)gi(ui.childNodes[cn]);/^(pre|p)$/i.test(ui.nodeName)&&(Vt=!0),Tn&&(ht=!0)}else 3==ui.nodeType&&Ye(ui.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;gi(C),C!=I;)C=C.nextSibling,Vt=!1;return Y}(p,wt,Ie,ht,$t)),gi=Fn(p.doc,Vi(ht,0),Vi($t,Mi(p.doc,$t).text.length));Ye.length>1&&gi.length>1;)if(St(Ye)==St(gi))Ye.pop(),gi.pop(),$t--;else{if(Ye[0]!=gi[0])break;Ye.shift(),gi.shift(),ht++}for(var ui=0,Ni=0,Xi=Ye[0],tn=gi[0],gn=Math.min(Xi.length,tn.length);ui<gn&&Xi.charCodeAt(ui)==tn.charCodeAt(ui);)++ui;for(var Tn=St(Ye),cn=St(gi),En=Math.min(Tn.length-(1==Ye.length?ui:0),cn.length-(1==gi.length?ui:0));Ni<En&&Tn.charCodeAt(Tn.length-Ni-1)==cn.charCodeAt(cn.length-Ni-1);)++Ni;if(1==Ye.length&&1==gi.length&&ht==D.line)for(;ui&&ui>D.ch&&Tn.charCodeAt(Tn.length-Ni-1)==cn.charCodeAt(cn.length-Ni-1);)ui--,Ni++;Ye[Ye.length-1]=Tn.slice(0,Tn.length-Ni).replace(/^\u200b+/,""),Ye[0]=Ye[0].slice(ui).replace(/\u200b+$/,"");var Vn=Vi(ht,ui),jn=Vi($t,gi.length?St(gi).length-Ni:0);return Ye.length>1||Ye[0]||On(Vn,jn)?(dl(p.doc,Ye,Vn,jn,"+input"),!0):void 0},yo.prototype.ensurePolled=function(){this.forceCompositionEnd()},yo.prototype.reset=function(){this.forceCompositionEnd()},yo.prototype.forceCompositionEnd=function(){!this.composing||(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},yo.prototype.readFromDOMSoon=function(){var p=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(p.readDOMTimeout=null,p.composing){if(!p.composing.done)return;p.composing=null}p.updateFromDOM()},80))},yo.prototype.updateFromDOM=function(){var p=this;(this.cm.isReadOnly()||!this.pollContent())&&hs(this.cm,function(){return Qo(p.cm)})},yo.prototype.setUneditable=function(p){p.contentEditable="false"},yo.prototype.onKeyPress=function(p){0==p.charCode||this.composing||(p.preventDefault(),this.cm.isReadOnly()||Ao(this.cm,yu)(this.cm,String.fromCharCode(null==p.charCode?p.keyCode:p.charCode),0))},yo.prototype.readOnlyChanged=function(p){this.div.contentEditable=String("nocursor"!=p)},yo.prototype.onContextMenu=function(){},yo.prototype.resetPosition=function(){},yo.prototype.needsContentAttribute=!0;var po=function(p){this.cm=p,this.prevInput="",this.pollingFast=!1,this.polling=new ke,this.hasSelection=!1,this.composing=null};po.prototype.init=function(p){var C=this,I=this,D=this.cm;this.createField(p);var L=this.textarea;function Y(ht){if(!Ci(D,ht)){if(D.somethingSelected())bu({lineWise:!1,text:D.getSelections()});else{if(!D.options.lineWiseCopyCut)return;var wt=eu(D);bu({lineWise:!0,text:wt.text}),"cut"==ht.type?D.setSelections(wt.ranges,null,Le):(I.prevInput="",L.value=wt.text.join("\n"),ge(L))}"cut"==ht.type&&(D.state.cutIncoming=+new Date)}}p.wrapper.insertBefore(this.wrapper,p.wrapper.firstChild),et&&(L.style.width="0px"),mi(L,"input",function(){n&&r>=9&&C.hasSelection&&(C.hasSelection=null),I.poll()}),mi(L,"paste",function(ht){Ci(D,ht)||rh(ht,D)||(D.state.pasteIncoming=+new Date,I.fastPoll())}),mi(L,"cut",Y),mi(L,"copy",Y),mi(p.scroller,"paste",function(ht){if(!be(p,ht)&&!Ci(D,ht)){if(!L.dispatchEvent)return D.state.pasteIncoming=+new Date,void I.focus();var wt=new Event("paste");wt.clipboardData=ht.clipboardData,L.dispatchEvent(wt)}}),mi(p.lineSpace,"selectstart",function(ht){be(p,ht)||Hi(ht)}),mi(L,"compositionstart",function(){var ht=D.getCursor("from");I.composing&&I.composing.range.clear(),I.composing={start:ht,range:D.markText(ht,D.getCursor("to"),{className:"CodeMirror-composing"})}}),mi(L,"compositionend",function(){I.composing&&(I.poll(),I.composing.range.clear(),I.composing=null)})},po.prototype.createField=function(p){this.wrapper=Yu(),this.textarea=this.wrapper.firstChild},po.prototype.screenReaderLabelChanged=function(p){p?this.textarea.setAttribute("aria-label",p):this.textarea.removeAttribute("aria-label")},po.prototype.prepareSelection=function(){var p=this.cm,C=p.display,I=p.doc,D=xl(p);if(p.options.moveInputWithCursor){var L=An(p,I.sel.primary().head,"div"),Y=C.wrapper.getBoundingClientRect(),ht=C.lineDiv.getBoundingClientRect();D.teTop=Math.max(0,Math.min(C.wrapper.clientHeight-10,L.top+ht.top-Y.top)),D.teLeft=Math.max(0,Math.min(C.wrapper.clientWidth-10,L.left+ht.left-Y.left))}return D},po.prototype.showSelection=function(p){var I=this.cm.display;Bt(I.cursorDiv,p.cursors),Bt(I.selectionDiv,p.selection),null!=p.teTop&&(this.wrapper.style.top=p.teTop+"px",this.wrapper.style.left=p.teLeft+"px")},po.prototype.reset=function(p){if(!this.contextMenuPending&&!this.composing){var C=this.cm;if(C.somethingSelected()){this.prevInput="";var I=C.getSelection();this.textarea.value=I,C.state.focused&&ge(this.textarea),n&&r>=9&&(this.hasSelection=I)}else p||(this.prevInput=this.textarea.value="",n&&r>=9&&(this.hasSelection=null))}},po.prototype.getField=function(){return this.textarea},po.prototype.supportsTouch=function(){return!1},po.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!Pt||fe()!=this.textarea))try{this.textarea.focus()}catch(p){}},po.prototype.blur=function(){this.textarea.blur()},po.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},po.prototype.receivedFocus=function(){this.slowPoll()},po.prototype.slowPoll=function(){var p=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){p.poll(),p.cm.state.focused&&p.slowPoll()})},po.prototype.fastPoll=function(){var p=!1,C=this;C.pollingFast=!0,C.polling.set(20,function I(){C.poll()||p?(C.pollingFast=!1,C.slowPoll()):(p=!0,C.polling.set(60,I))})},po.prototype.poll=function(){var p=this,C=this.cm,I=this.textarea,D=this.prevInput;if(this.contextMenuPending||!C.state.focused||ci(I)&&!D&&!this.composing||C.isReadOnly()||C.options.disableInput||C.state.keySeq)return!1;var L=I.value;if(L==D&&!C.somethingSelected())return!1;if(n&&r>=9&&this.hasSelection===L||pt&&/[\uf700-\uf7ff]/.test(L))return C.display.input.reset(),!1;if(C.doc.sel==C.display.selForContextMenu){var Y=L.charCodeAt(0);if(8203==Y&&!D&&(D="\u200b"),8666==Y)return this.reset(),this.cm.execCommand("undo")}for(var ht=0,wt=Math.min(D.length,L.length);ht<wt&&D.charCodeAt(ht)==L.charCodeAt(ht);)++ht;return hs(C,function(){yu(C,L.slice(ht),D.length-ht,null,p.composing?"*compose":null),L.length>1e3||L.indexOf("\n")>-1?I.value=p.prevInput="":p.prevInput=L,p.composing&&(p.composing.range.clear(),p.composing.range=C.markText(p.composing.start,C.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},po.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},po.prototype.onKeyPress=function(){n&&r>=9&&(this.hasSelection=null),this.fastPoll()},po.prototype.onContextMenu=function(p){var C=this,I=C.cm,D=I.display,L=C.textarea;C.contextMenuPending&&C.contextMenuPending();var Y=ll(I,p),ht=D.scroller.scrollTop;if(Y&&!x){I.options.resetSelectionOnContextMenu&&-1==I.doc.sel.contains(Y)&&Ao(I,ia)(I.doc,lc(Y),Le);var Ye,Vt=L.style.cssText,$t=C.wrapper.style.cssText,Ie=C.wrapper.offsetParent.getBoundingClientRect();if(C.wrapper.style.cssText="position: static",L.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(p.clientY-Ie.top-5)+"px; left: "+(p.clientX-Ie.left-5)+"px;\n      z-index: 1000; background: "+(n?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",s&&(Ye=window.scrollY),D.input.focus(),s&&window.scrollTo(null,Ye),D.input.reset(),I.somethingSelected()||(L.value=C.prevInput=" "),C.contextMenuPending=ui,D.selForContextMenu=I.doc.sel,clearTimeout(D.detectingSelectAll),n&&r>=9&&gi(),bt){kt(p);var Ni=function(){Re(window,"mouseup",Ni),setTimeout(ui,20)};mi(window,"mouseup",Ni)}else setTimeout(ui,50)}function gi(){if(null!=L.selectionStart){var Xi=I.somethingSelected(),tn="\u200b"+(Xi?L.value:"");L.value="\u21da",L.value=tn,C.prevInput=Xi?"":"\u200b",L.selectionStart=1,L.selectionEnd=tn.length,D.selForContextMenu=I.doc.sel}}function ui(){if(C.contextMenuPending==ui&&(C.contextMenuPending=!1,C.wrapper.style.cssText=$t,L.style.cssText=Vt,n&&r<9&&D.scrollbars.setScrollTop(D.scroller.scrollTop=ht),null!=L.selectionStart)){(!n||n&&r<9)&&gi();var Xi=0,tn=function(){D.selForContextMenu==I.doc.sel&&0==L.selectionStart&&L.selectionEnd>0&&"\u200b"==C.prevInput?Ao(I,kc)(I):Xi++<10?D.detectingSelectAll=setTimeout(tn,500):(D.selForContextMenu=null,D.input.reset())};D.detectingSelectAll=setTimeout(tn,200)}}},po.prototype.readOnlyChanged=function(p){p||this.reset(),this.textarea.disabled="nocursor"==p,this.textarea.readOnly=!!p},po.prototype.setUneditable=function(){},po.prototype.needsContentAttribute=!1,function(p){var C=p.optionHandlers;function I(D,L,Y,ht){p.defaults[D]=L,Y&&(C[D]=ht?function(wt,Vt,$t){$t!=Hl&&Y(wt,Vt,$t)}:Y)}p.defineOption=I,p.Init=Hl,I("value","",function(D,L){return D.setValue(L)},!0),I("mode",null,function(D,L){D.doc.modeOption=L,Ma(D)},!0),I("indentUnit",2,Ma,!0),I("indentWithTabs",!1),I("smartIndent",!0),I("tabSize",4,function(D){wl(D),Bs(D),Qo(D)},!0),I("lineSeparator",null,function(D,L){if(D.doc.lineSep=L,L){var Y=[],ht=D.doc.first;D.doc.iter(function(Vt){for(var $t=0;;){var Ie=Vt.text.indexOf(L,$t);if(-1==Ie)break;$t=Ie+L.length,Y.push(Vi(ht,Ie))}ht++});for(var wt=Y.length-1;wt>=0;wt--)dl(D.doc,L,Y[wt],Vi(Y[wt].line,Y[wt].ch+L.length))}}),I("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(D,L,Y){D.state.specialChars=new RegExp(L.source+(L.test("\t")?"":"|\t"),"g"),Y!=Hl&&D.refresh()}),I("specialCharPlaceholder",xt,function(D){return D.refresh()},!0),I("electricChars",!0),I("inputStyle",Pt?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),I("spellcheck",!1,function(D,L){return D.getInputField().spellcheck=L},!0),I("autocorrect",!1,function(D,L){return D.getInputField().autocorrect=L},!0),I("autocapitalize",!1,function(D,L){return D.getInputField().autocapitalize=L},!0),I("rtlMoveVisually",!Ht),I("wholeLineUpdateBefore",!0),I("theme","default",function(D){ra(D),Sl(D)},!0),I("keyMap","default",function(D,L,Y){var ht=Ms(L),wt=Y!=Hl&&Ms(Y);wt&&wt.detach&&wt.detach(D,ht),ht.attach&&ht.attach(D,wt||null)}),I("extraKeys",null),I("configureMouse",null),I("lineWrapping",!1,Dh,!0),I("gutters",[],function(D,L){D.display.gutterSpecs=ul(L,D.options.lineNumbers),Sl(D)},!0),I("fixedGutter",!0,function(D,L){D.display.gutters.style.left=L?Ds(D.display)+"px":"0",D.refresh()},!0),I("coverGutterNextToScrollbar",!1,function(D){return Ur(D)},!0),I("scrollbarStyle","native",function(D){Vs(D),Ur(D),D.display.scrollbars.setScrollTop(D.doc.scrollTop),D.display.scrollbars.setScrollLeft(D.doc.scrollLeft)},!0),I("lineNumbers",!1,function(D,L){D.display.gutterSpecs=ul(D.options.gutters,L),Sl(D)},!0),I("firstLineNumber",1,Sl,!0),I("lineNumberFormatter",function(D){return D},Sl,!0),I("showCursorWhenSelecting",!1,Vl,!0),I("resetSelectionOnContextMenu",!0),I("lineWiseCopyCut",!0),I("pasteLinesPerSelection",!0),I("selectionsMayTouch",!1),I("readOnly",!1,function(D,L){"nocursor"==L&&(Ua(D),D.display.input.blur()),D.display.input.readOnlyChanged(L)}),I("screenReaderLabel",null,function(D,L){D.display.input.screenReaderLabelChanged(L=""===L?null:L)}),I("disableInput",!1,function(D,L){L||D.display.input.reset()},!0),I("dragDrop",!0,ju),I("allowDropFileTypes",null),I("cursorBlinkRate",530),I("cursorScrollMargin",0),I("cursorHeight",1,Vl,!0),I("singleCursorHeightPerLine",!0,Vl,!0),I("workTime",100),I("workDelay",100),I("flattenSpans",!0,wl,!0),I("addModeClass",!1,wl,!0),I("pollInterval",100),I("undoDepth",200,function(D,L){return D.doc.history.undoDepth=L}),I("historyEventDelay",1250),I("viewportMargin",10,function(D){return D.refresh()},!0),I("maxHighlightLength",1e4,wl,!0),I("moveInputWithCursor",!0,function(D,L){L||D.display.input.resetPosition()}),I("tabindex",null,function(D,L){return D.display.input.getField().tabIndex=L||""}),I("autofocus",null),I("direction","ltr",function(D,L){return D.doc.setDirection(L)},!0),I("phrases",null)}(Wo),function(p){var C=p.optionHandlers,I=p.helpers={};p.prototype={constructor:p,focus:function(){window.focus(),this.display.input.focus()},setOption:function(D,L){var Y=this.options,ht=Y[D];Y[D]==L&&"mode"!=D||(Y[D]=L,C.hasOwnProperty(D)&&Ao(this,C[D])(this,L,ht),xe(this,"optionChange",this,D))},getOption:function(D){return this.options[D]},getDoc:function(){return this.doc},addKeyMap:function(D,L){this.state.keyMaps[L?"push":"unshift"](Ms(D))},removeKeyMap:function(D){for(var L=this.state.keyMaps,Y=0;Y<L.length;++Y)if(L[Y]==D||L[Y].name==D)return L.splice(Y,1),!0},addOverlay:vo(function(D,L){var Y=D.token?D:p.getMode(this.options,D);if(Y.startState)throw new Error("Overlays may not be stateful.");(function(p,C,I){for(var D=0,L=I(C);D<p.length&&I(p[D])<=L;)D++;p.splice(D,0,C)})(this.state.overlays,{mode:Y,modeSpec:D,opaque:L&&L.opaque,priority:L&&L.priority||0},function(ht){return ht.priority}),this.state.modeGen++,Qo(this)}),removeOverlay:vo(function(D){for(var L=this.state.overlays,Y=0;Y<L.length;++Y){var ht=L[Y].modeSpec;if(ht==D||"string"==typeof D&&ht.name==D)return L.splice(Y,1),this.state.modeGen++,void Qo(this)}}),indentLine:vo(function(D,L,Y){"string"!=typeof L&&"number"!=typeof L&&(L=null==L?this.options.smartIndent?"smart":"prev":L?"add":"subtract"),Zr(this.doc,D)&&ec(this,D,L,Y)}),indentSelection:vo(function(D){for(var L=this.doc.sel.ranges,Y=-1,ht=0;ht<L.length;ht++){var wt=L[ht];if(wt.empty())wt.head.line>Y&&(ec(this,wt.head.line,D,!0),Y=wt.head.line,ht==this.doc.sel.primIndex&&nt(this));else{var Vt=wt.from(),$t=wt.to(),Ie=Math.max(Y,Vt.line);Y=Math.min(this.lastLine(),$t.line-($t.ch?0:1))+1;for(var Ye=Ie;Ye<Y;++Ye)ec(this,Ye,D);var gi=this.doc.sel.ranges;0==Vt.ch&&L.length==gi.length&&gi[ht].from().ch>0&&Jl(this.doc,ht,new Vr(Vt,gi[ht].to()),Le)}}}),getTokenAt:function(D,L){return eo(this,D,L)},getLineTokens:function(D,L){return eo(this,Vi(D),L,!0)},getTokenTypeAt:function(D){D=Yi(this.doc,D);var Vt,L=$o(this,Mi(this.doc,D.line)),Y=0,ht=(L.length-1)/2,wt=D.ch;if(0==wt)Vt=L[2];else for(;;){var $t=Y+ht>>1;if(($t?L[2*$t-1]:0)>=wt)ht=$t;else{if(!(L[2*$t+1]<wt)){Vt=L[2*$t+2];break}Y=$t+1}}var Ie=Vt?Vt.indexOf("overlay "):-1;return Ie<0?Vt:0==Ie?null:Vt.slice(0,Ie-1)},getModeAt:function(D){var L=this.doc.mode;return L.innerMode?p.innerMode(L,this.getTokenAt(D).state).mode:L},getHelper:function(D,L){return this.getHelpers(D,L)[0]},getHelpers:function(D,L){var Y=[];if(!I.hasOwnProperty(L))return Y;var ht=I[L],wt=this.getModeAt(D);if("string"==typeof wt[L])ht[wt[L]]&&Y.push(ht[wt[L]]);else if(wt[L])for(var Vt=0;Vt<wt[L].length;Vt++){var $t=ht[wt[L][Vt]];$t&&Y.push($t)}else wt.helperType&&ht[wt.helperType]?Y.push(ht[wt.helperType]):ht[wt.name]&&Y.push(ht[wt.name]);for(var Ie=0;Ie<ht._global.length;Ie++){var Ye=ht._global[Ie];Ye.pred(wt,this)&&-1==Ze(Y,Ye.val)&&Y.push(Ye.val)}return Y},getStateAfter:function(D,L){var Y=this.doc;return so(this,(D=Ji(Y,null==D?Y.first+Y.size-1:D))+1,L).state},cursorCoords:function(D,L){var ht=this.doc.sel.primary();return An(this,null==D?ht.head:"object"==typeof D?Yi(this.doc,D):D?ht.from():ht.to(),L||"page")},charCoords:function(D,L){return Dn(this,Yi(this.doc,D),L||"page")},coordsChar:function(D,L){return Er(this,(D=Pa(this,D,L||"page")).left,D.top)},lineAtHeight:function(D,L){return D=Pa(this,{top:D,left:0},L||"page").top,Sr(this.doc,D+this.display.viewOffset)},heightAtLine:function(D,L,Y){var wt,ht=!1;if("number"==typeof D){var Vt=this.doc.first+this.doc.size-1;D<this.doc.first?D=this.doc.first:D>Vt&&(D=Vt,ht=!0),wt=Mi(this.doc,D)}else wt=D;return mo(this,wt,{top:0,left:0},L||"page",Y||ht).top+(ht?this.doc.height-Ar(wt):0)},defaultTextHeight:function(){return ca(this.display)},defaultCharWidth:function(){return _s(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(D,L,Y,ht,wt){var Vt=this.display,$t=(D=An(this,Yi(this.doc,D))).bottom,Ie=D.left;if(L.style.position="absolute",L.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(L),Vt.sizer.appendChild(L),"over"==ht)$t=D.top;else if("above"==ht||"near"==ht){var Ye=Math.max(Vt.wrapper.clientHeight,this.doc.height),gi=Math.max(Vt.sizer.clientWidth,Vt.lineSpace.clientWidth);("above"==ht||D.bottom+L.offsetHeight>Ye)&&D.top>L.offsetHeight?$t=D.top-L.offsetHeight:D.bottom+L.offsetHeight<=Ye&&($t=D.bottom),Ie+L.offsetWidth>gi&&(Ie=gi-L.offsetWidth)}L.style.top=$t+"px",L.style.left=L.style.right="","right"==wt?(Ie=Vt.sizer.clientWidth-L.offsetWidth,L.style.right="0px"):("left"==wt?Ie=0:"middle"==wt&&(Ie=(Vt.sizer.clientWidth-L.offsetWidth)/2),L.style.left=Ie+"px"),Y&&function(p,C){var I=Wc(p,C);null!=I.scrollTop&&Ge(p,I.scrollTop),null!=I.scrollLeft&&ki(p,I.scrollLeft)}(this,{left:Ie,top:$t,right:Ie+L.offsetWidth,bottom:$t+L.offsetHeight})},triggerOnKeyDown:vo(qc),triggerOnKeyPress:vo(Vu),triggerOnKeyUp:gu,triggerOnMouseDown:vo(eh),execCommand:function(D){if(Fu.hasOwnProperty(D))return Fu[D].call(null,this)},triggerElectric:vo(function(D){Mh(this,D)}),findPosH:function(D,L,Y,ht){var wt=1;L<0&&(wt=-1,L=-L);for(var Vt=Yi(this.doc,D),$t=0;$t<L&&!(Vt=bc(this.doc,Vt,wt,Y,ht)).hitSide;++$t);return Vt},moveH:vo(function(D,L){var Y=this;this.extendSelectionsBy(function(ht){return Y.display.shift||Y.doc.extend||ht.empty()?bc(Y.doc,ht.head,D,L,Y.options.rtlMoveVisually):D<0?ht.from():ht.to()},Gt)}),deleteH:vo(function(D,L){var ht=this.doc;this.doc.sel.somethingSelected()?ht.replaceSelection("",null,"+delete"):os(this,function(wt){var Vt=bc(ht,wt.head,D,L,!1);return D<0?{from:Vt,to:wt.head}:{from:wt.head,to:Vt}})}),findPosV:function(D,L,Y,ht){var wt=1,Vt=ht;L<0&&(wt=-1,L=-L);for(var $t=Yi(this.doc,D),Ie=0;Ie<L;++Ie){var Ye=An(this,$t,"div");if(null==Vt?Vt=Ye.left:Ye.left=Vt,($t=iu(this,Ye,wt,Y)).hitSide)break}return $t},moveV:vo(function(D,L){var Y=this,ht=this.doc,wt=[],Vt=!this.display.shift&&!ht.extend&&ht.sel.somethingSelected();if(ht.extendSelectionsBy(function(Ie){if(Vt)return D<0?Ie.from():Ie.to();var Ye=An(Y,Ie.head,"div");null!=Ie.goalColumn&&(Ye.left=Ie.goalColumn),wt.push(Ye.left);var gi=iu(Y,Ye,D,L);return"page"==L&&Ie==ht.sel.primary()&&ft(Y,Dn(Y,gi,"div").top-Ye.top),gi},Gt),wt.length)for(var $t=0;$t<ht.sel.ranges.length;$t++)ht.sel.ranges[$t].goalColumn=wt[$t]}),findWordAt:function(D){var Y=Mi(this.doc,D.line).text,ht=D.ch,wt=D.ch;if(Y){var Vt=this.getHelper(D,"wordChars");"before"!=D.sticky&&wt!=Y.length||!ht?++wt:--ht;for(var $t=Y.charAt(ht),Ie=Oe($t,Vt)?function(Ye){return Oe(Ye,Vt)}:/\s/.test($t)?function(Ye){return/\s/.test(Ye)}:function(Ye){return!/\s/.test(Ye)&&!Oe(Ye)};ht>0&&Ie(Y.charAt(ht-1));)--ht;for(;wt<Y.length&&Ie(Y.charAt(wt));)++wt}return new Vr(Vi(D.line,ht),Vi(D.line,wt))},toggleOverwrite:function(D){null!=D&&D==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?Mt(this.display.cursorDiv,"CodeMirror-overwrite"):gt(this.display.cursorDiv,"CodeMirror-overwrite"),xe(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==fe()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:vo(function(D,L){q(this,D,L)}),getScrollInfo:function(){var D=this.display.scroller;return{left:D.scrollLeft,top:D.scrollTop,height:D.scrollHeight-Ui(this)-this.display.barHeight,width:D.scrollWidth-Ui(this)-this.display.barWidth,clientHeight:Cn(this),clientWidth:hn(this)}},scrollIntoView:vo(function(D,L){null==D?(D={from:this.doc.sel.primary().head,to:null},null==L&&(L=this.options.cursorScrollMargin)):"number"==typeof D?D={from:Vi(D,0),to:null}:null==D.from&&(D={from:D,to:null}),D.to||(D.to=D.from),D.margin=L||0,null!=D.from.line?function(p,C){zt(p),p.curOp.scrollToPos=C}(this,D):_e(this,D.from,D.to,D.margin)}),setSize:vo(function(D,L){var Y=this,ht=function(Vt){return"number"==typeof Vt||/^\d+$/.test(String(Vt))?Vt+"px":Vt};null!=D&&(this.display.wrapper.style.width=ht(D)),null!=L&&(this.display.wrapper.style.height=ht(L)),this.options.lineWrapping&&gs(this);var wt=this.display.viewFrom;this.doc.iter(wt,this.display.viewTo,function(Vt){if(Vt.widgets)for(var $t=0;$t<Vt.widgets.length;$t++)if(Vt.widgets[$t].noHScroll){ua(Y,wt,"widget");break}++wt}),this.curOp.forceUpdate=!0,xe(this,"refresh",this)}),operation:function(D){return hs(this,D)},startOperation:function(){return Go(this)},endOperation:function(){return Ga(this)},refresh:vo(function(){var D=this.display.cachedTextHeight;Qo(this),this.curOp.forceUpdate=!0,Bs(this),q(this,this.doc.scrollLeft,this.doc.scrollTop),zl(this.display),(null==D||Math.abs(D-ca(this.display))>.5||this.options.lineWrapping)&&Ol(this),xe(this,"refresh",this)}),swapDoc:vo(function(D){var L=this.doc;return L.cm=null,this.state.selectingText&&this.state.selectingText(),Mr(this,D),Bs(this),this.display.input.reset(),q(this,D.scrollLeft,D.scrollTop),this.curOp.forceScroll=!0,cr(this,"swapDoc",this,L),L}),phrase:function(D){var L=this.options.phrases;return L&&Object.prototype.hasOwnProperty.call(L,D)?L[D]:D},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},_i(p),p.registerHelper=function(D,L,Y){I.hasOwnProperty(D)||(I[D]=p[D]={_global:[]}),I[D][L]=Y},p.registerGlobalHelper=function(D,L,Y,ht){p.registerHelper(D,L,ht),I[D]._global.push({pred:Y,val:ht})}}(Wo);var vh="iter insert remove copy getEditor constructor".split(" ");for(var ic in ds.prototype)ds.prototype.hasOwnProperty(ic)&&Ze(vh,ic)<0&&(Wo.prototype[ic]=function(p){return function(){return p.apply(this.doc,arguments)}}(ds.prototype[ic]));return _i(ds),Wo.inputStyles={textarea:po,contenteditable:yo},Wo.defineMode=function(p){!Wo.defaults.mode&&"null"!=p&&(Wo.defaults.mode=p),In.apply(this,arguments)},Wo.defineMIME=function(p,C){fn[p]=C},Wo.defineMode("null",function(){return{token:function(p){return p.skipToEnd()}}}),Wo.defineMIME("text/plain","null"),Wo.defineExtension=function(p,C){Wo.prototype[p]=C},Wo.defineDocExtension=function(p,C){ds.prototype[p]=C},Wo.fromTextArea=function(p,C){if((C=C?pe(C):{}).value=p.value,!C.tabindex&&p.tabIndex&&(C.tabindex=p.tabIndex),!C.placeholder&&p.placeholder&&(C.placeholder=p.placeholder),null==C.autofocus){var I=fe();C.autofocus=I==p||null!=p.getAttribute("autofocus")&&I==document.body}function D(){p.value=wt.getValue()}var L;if(p.form&&(mi(p.form,"submit",D),!C.leaveSubmitMethodAlone)){var Y=p.form;L=Y.submit;try{var ht=Y.submit=function(){D(),Y.submit=L,Y.submit(),Y.submit=ht}}catch(Vt){}}C.finishInit=function(Vt){Vt.save=D,Vt.getTextArea=function(){return p},Vt.toTextArea=function(){Vt.toTextArea=isNaN,D(),p.parentNode.removeChild(Vt.getWrapperElement()),p.style.display="",p.form&&(Re(p.form,"submit",D),!C.leaveSubmitMethodAlone&&"function"==typeof p.form.submit&&(p.form.submit=L))}},p.style.display="none";var wt=Wo(function(Vt){return p.parentNode.insertBefore(Vt,p.nextSibling)},C);return wt},function(p){p.off=Re,p.on=mi,p.wheelEventPixels=jl,p.Doc=ds,p.splitLines=ir,p.countColumn=He,p.findColumn=Se,p.isWordChar=ne,p.Pass=$e,p.signal=xe,p.Line=is,p.changeEnd=Ll,p.scrollbarModel=cl,p.Pos=Vi,p.cmpPos=On,p.modes=xi,p.mimeModes=fn,p.resolveMode=Cr,p.getMode=to,p.modeExtensions=no,p.extendMode=fo,p.copyState=kr,p.startState=Oo,p.innerMode=ar,p.commands=Fu,p.keyMap=$n,p.keyName=oo,p.isModifierKey=uo,p.lookupKey=Gr,p.normalizeKeyMap=Co,p.StringStream=nr,p.SharedTextMarker=il,p.TextMarker=fl,p.LineWidget=el,p.e_preventDefault=Hi,p.e_stopPropagation=Je,p.e_stop=kt,p.addClass=Mt,p.contains=rt,p.rmClass=gt,p.keyNames=Ai}(Wo),Wo.version="5.65.0",Wo}()},64166:(U,$,m)=>{!function(T){"use strict";T.defineMode("javascript",function(_,e){var Tt,Pt,t=_.indentUnit,n=e.statementIndent,r=e.jsonld,s=e.json||r,u=!1!==e.trackScope,b=e.typescript,x=e.wordCharacters||/[\w$\xa1-\uffff]/,B=function(){function ae(Yn){return{type:Yn,style:"keyword"}}var Ue=ae("keyword a"),Oi=ae("keyword b"),Ji=ae("keyword c"),Yi=ae("keyword d"),sr=ae("operator"),zn={type:"atom",style:"atom"};return{if:ae("if"),while:Ue,with:Ue,else:Oi,do:Oi,try:Oi,finally:Oi,return:Yi,break:Yi,continue:Yi,new:ae("new"),delete:Ji,void:Ji,throw:Ji,debugger:ae("debugger"),var:ae("var"),const:ae("var"),let:ae("var"),function:ae("function"),catch:ae("catch"),for:ae("for"),switch:ae("switch"),case:ae("case"),default:ae("default"),in:sr,typeof:sr,instanceof:sr,true:zn,false:zn,null:zn,undefined:zn,NaN:zn,Infinity:zn,this:ae("this"),class:ae("class"),super:ae("atom"),yield:Ji,export:ae("export"),import:ae("import"),extends:Ji,await:Ji}}(),Z=/[+\-*&%=<>!?|~^@]/,ot=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function pt(ae,Ue,Oi){return Tt=ae,Pt=Oi,Ue}function It(ae,Ue){var Oi=ae.next();if('"'==Oi||"'"==Oi)return Ue.tokenize=function(ae){return function(Ue,Oi){var Yi,Ji=!1;if(r&&"@"==Ue.peek()&&Ue.match(ot))return Oi.tokenize=It,pt("jsonld-keyword","meta");for(;null!=(Yi=Ue.next())&&(Yi!=ae||Ji);)Ji=!Ji&&"\\"==Yi;return Ji||(Oi.tokenize=It),pt("string","string")}}(Oi),Ue.tokenize(ae,Ue);if("."==Oi&&ae.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return pt("number","number");if("."==Oi&&ae.match(".."))return pt("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(Oi))return pt(Oi);if("="==Oi&&ae.eat(">"))return pt("=>","operator");if("0"==Oi&&ae.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return pt("number","number");if(/\d/.test(Oi))return ae.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),pt("number","number");if("/"==Oi)return ae.eat("*")?(Ue.tokenize=Jt,Jt(ae,Ue)):ae.eat("/")?(ae.skipToEnd(),pt("comment","comment")):Gn(ae,Ue,1)?(function(ae){for(var Oi,Ue=!1,Ji=!1;null!=(Oi=ae.next());){if(!Ue){if("/"==Oi&&!Ji)return;"["==Oi?Ji=!0:Ji&&"]"==Oi&&(Ji=!1)}Ue=!Ue&&"\\"==Oi}}(ae),ae.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),pt("regexp","string-2")):(ae.eat("="),pt("operator","operator",ae.current()));if("`"==Oi)return Ue.tokenize=Ct,Ct(ae,Ue);if("#"==Oi&&"!"==ae.peek())return ae.skipToEnd(),pt("meta","meta");if("#"==Oi&&ae.eatWhile(x))return pt("variable","property");if("<"==Oi&&ae.match("!--")||"-"==Oi&&ae.match("->")&&!/\S/.test(ae.string.slice(0,ae.start)))return ae.skipToEnd(),pt("comment","comment");if(Z.test(Oi))return(">"!=Oi||!Ue.lexical||">"!=Ue.lexical.type)&&(ae.eat("=")?("!"==Oi||"="==Oi)&&ae.eat("="):/[<>*+\-|&?]/.test(Oi)&&(ae.eat(Oi),">"==Oi&&ae.eat(Oi))),"?"==Oi&&ae.eat(".")?pt("."):pt("operator","operator",ae.current());if(x.test(Oi)){ae.eatWhile(x);var Ji=ae.current();if("."!=Ue.lastType){if(B.propertyIsEnumerable(Ji)){var Yi=B[Ji];return pt(Yi.type,Yi.style,Ji)}if("async"==Ji&&ae.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return pt("async","keyword",Ji)}return pt("variable","variable",Ji)}}function Jt(ae,Ue){for(var Ji,Oi=!1;Ji=ae.next();){if("/"==Ji&&Oi){Ue.tokenize=It;break}Oi="*"==Ji}return pt("comment","comment")}function Ct(ae,Ue){for(var Ji,Oi=!1;null!=(Ji=ae.next());){if(!Oi&&("`"==Ji||"$"==Ji&&ae.eat("{"))){Ue.tokenize=It;break}Oi=!Oi&&"\\"==Ji}return pt("quasi","string-2",ae.current())}function st(ae,Ue){Ue.fatArrowAt&&(Ue.fatArrowAt=null);var Oi=ae.string.indexOf("=>",ae.start);if(!(Oi<0)){if(b){var Ji=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(ae.string.slice(ae.start,Oi));Ji&&(Oi=Ji.index)}for(var Yi=0,sr=!1,zn=Oi-1;zn>=0;--zn){var Yn=ae.string.charAt(zn),kn="([{}])".indexOf(Yn);if(kn>=0&&kn<3){if(!Yi){++zn;break}if(0==--Yi){"("==Yn&&(sr=!0);break}}else if(kn>=3&&kn<6)++Yi;else if(x.test(Yn))sr=!0;else if(/["'\/`]/.test(Yn))for(;;--zn){if(0==zn)return;if(ae.string.charAt(zn-1)==Yn&&"\\"!=ae.string.charAt(zn-2)){zn--;break}}else if(sr&&!Yi){++zn;break}}sr&&!Yi&&(Ue.fatArrowAt=zn)}}var gt={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function lt(ae,Ue,Oi,Ji,Yi,sr){this.indented=ae,this.column=Ue,this.type=Oi,this.prev=Yi,this.info=sr,null!=Ji&&(this.align=Ji)}function Bt(ae,Ue){if(!u)return!1;for(var Oi=ae.localVars;Oi;Oi=Oi.next)if(Oi.name==Ue)return!0;for(var Ji=ae.context;Ji;Ji=Ji.prev)for(Oi=Ji.vars;Oi;Oi=Oi.next)if(Oi.name==Ue)return!0}function Dt(ae,Ue,Oi,Ji,Yi){var sr=ae.cc;for(Et.state=ae,Et.stream=Yi,Et.marked=null,Et.cc=sr,Et.style=Ue,ae.lexical.hasOwnProperty("align")||(ae.lexical.align=!0);;)if((sr.length?sr.pop():s?Zt:Gt)(Oi,Ji)){for(;sr.length&&sr[sr.length-1].lex;)sr.pop()();return Et.marked?Et.marked:"variable"==Oi&&Bt(ae,Ji)?"variable-2":Ue}}var Et={state:null,column:null,marked:null,cc:null};function ut(){for(var ae=arguments.length-1;ae>=0;ae--)Et.cc.push(arguments[ae])}function rt(){return ut.apply(null,arguments),!0}function fe(ae,Ue){for(var Oi=Ue;Oi;Oi=Oi.next)if(Oi.name==ae)return!0;return!1}function Mt(ae){var Ue=Et.state;if(Et.marked="def",u){if(Ue.context)if("var"==Ue.lexical.info&&Ue.context&&Ue.context.block){var Oi=Nt(ae,Ue.context);if(null!=Oi)return void(Ue.context=Oi)}else if(!fe(ae,Ue.localVars))return void(Ue.localVars=new pe(ae,Ue.localVars));e.globalVars&&!fe(ae,Ue.globalVars)&&(Ue.globalVars=new pe(ae,Ue.globalVars))}}function Nt(ae,Ue){if(Ue){if(Ue.block){var Oi=Nt(ae,Ue.prev);return Oi?Oi==Ue.prev?Ue:new ve(Oi,Ue.vars,!0):null}return fe(ae,Ue.vars)?Ue:new ve(Ue.prev,new pe(ae,Ue.vars),!1)}return null}function ge(ae){return"public"==ae||"private"==ae||"protected"==ae||"abstract"==ae||"readonly"==ae}function ve(ae,Ue,Oi){this.prev=ae,this.vars=Ue,this.block=Oi}function pe(ae,Ue){this.name=ae,this.next=Ue}var He=new pe("this",new pe("arguments",null));function ke(){Et.state.context=new ve(Et.state.context,Et.state.localVars,!1),Et.state.localVars=He}function Ze(){Et.state.context=new ve(Et.state.context,Et.state.localVars,!0),Et.state.localVars=null}function Di(){Et.state.localVars=Et.state.context.vars,Et.state.context=Et.state.context.prev}function $e(ae,Ue){var Oi=function(){var Ji=Et.state,Yi=Ji.indented;if("stat"==Ji.lexical.type)Yi=Ji.lexical.indented;else for(var sr=Ji.lexical;sr&&")"==sr.type&&sr.align;sr=sr.prev)Yi=sr.indented;Ji.lexical=new lt(Yi,Et.stream.column(),ae,null,Ji.lexical,Ue)};return Oi.lex=!0,Oi}function Le(){var ae=Et.state;ae.lexical.prev&&(")"==ae.lexical.type&&(ae.indented=ae.lexical.indented),ae.lexical=ae.lexical.prev)}function pi(ae){return function Ue(Oi){return Oi==ae?rt():";"==ae||"}"==Oi||")"==Oi||"]"==Oi?ut():rt(Ue)}}function Gt(ae,Ue){return"var"==ae?rt($e("vardef",Ue),Wi,pi(";"),Le):"keyword a"==ae?rt($e("form"),St,Gt,Le):"keyword b"==ae?rt($e("form"),Gt,Le):"keyword d"==ae?Et.stream.match(/^\s*$/,!1)?rt():rt($e("stat"),Ce,pi(";"),Le):"debugger"==ae?rt(pi(";")):"{"==ae?rt($e("}"),Ze,mi,Le,Di):";"==ae?rt():"if"==ae?("else"==Et.state.lexical.info&&Et.state.cc[Et.state.cc.length-1]==Le&&Et.state.cc.pop()(),rt($e("form"),St,Gt,Le,Pe)):"function"==ae?rt(In):"for"==ae?rt($e("form"),Ze,hi,Gt,Di,Le):"class"==ae||b&&"interface"==Ue?(Et.marked="keyword",rt($e("form","class"==ae?ae:Ue),fo,Le)):"variable"==ae?b&&"declare"==Ue?(Et.marked="keyword",rt(Gt)):b&&("module"==Ue||"enum"==Ue||"type"==Ue)&&Et.stream.match(/^\s*\w/,!1)?(Et.marked="keyword","enum"==Ue?rt(Rr):"type"==Ue?rt(Cr,pi("operator"),je,pi(";")):rt($e("form"),qi,pi("{"),$e("}"),mi,Le,Le)):b&&"namespace"==Ue?(Et.marked="keyword",rt($e("form"),Zt,Gt,Le)):b&&"abstract"==Ue?(Et.marked="keyword",rt(Gt)):rt($e("stat"),de):"switch"==ae?rt($e("form"),St,pi("{"),$e("}","switch"),Ze,mi,Le,Le,Di):"case"==ae?rt(Zt,pi(":")):"default"==ae?rt(pi(":")):"catch"==ae?rt($e("form"),ke,Se,Gt,Le,Di):"export"==ae?rt($e("stat"),nr,Le):"import"==ae?rt($e("stat"),Fn,Le):"async"==ae?rt(Gt):"@"==Ue?rt(Zt,Gt):ut($e("stat"),Zt,pi(";"),Le)}function Se(ae){if("("==ae)return rt(to,pi(")"))}function Zt(ae,Ue){return jt(ae,Ue,!1)}function ie(ae,Ue){return jt(ae,Ue,!0)}function St(ae){return"("!=ae?ut():rt($e(")"),Ce,pi(")"),Le)}function jt(ae,Ue,Oi){if(Et.state.fatArrowAt==Et.stream.start){var Ji=Oi?re:Oe;if("("==ae)return rt(ke,$e(")"),yi(to,")"),Le,pi("=>"),Ji,Di);if("variable"==ae)return ut(ke,qi,pi("=>"),Ji,Di)}var Yi=Oi?Te:ri;return gt.hasOwnProperty(ae)?rt(Yi):"function"==ae?rt(In,Yi):"class"==ae||b&&"interface"==Ue?(Et.marked="keyword",rt($e("form"),no,Le)):"keyword c"==ae||"async"==ae?rt(Oi?ie:Zt):"("==ae?rt($e(")"),Ce,pi(")"),Le,Yi):"operator"==ae||"spread"==ae?rt(Oi?ie:Zt):"["==ae?rt($e("]"),Zr,Le,Yi):"{"==ae?dn(ni,"}",null,Yi):"quasi"==ae?ut(te,Yi):"new"==ae?rt(function(ae){return function(Ue){return"."==Ue?rt(ae?Qt:ye):"variable"==Ue&&b?rt(Lt,ae?Te:ri):ut(ae?ie:Zt)}}(Oi)):rt()}function Ce(ae){return ae.match(/[;\}\)\],]/)?ut():ut(Zt)}function ri(ae,Ue){return","==ae?rt(Ce):Te(ae,Ue,!1)}function Te(ae,Ue,Oi){var Ji=0==Oi?ri:Te,Yi=0==Oi?Zt:ie;if("=>"==ae)return rt(ke,Oi?re:Oe,Di);if("operator"==ae)return/\+\+|--/.test(Ue)||b&&"!"==Ue?rt(Ji):b&&"<"==Ue&&Et.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?rt($e(">"),yi(je,">"),Le,Ji):"?"==Ue?rt(Zt,pi(":"),Yi):rt(Yi);if("quasi"==ae)return ut(te,Ji);if(";"!=ae){if("("==ae)return dn(ie,")","call",Ji);if("."==ae)return rt(ti,Ji);if("["==ae)return rt($e("]"),Ce,pi("]"),Le,Ji);if(b&&"as"==Ue)return Et.marked="keyword",rt(je,Ji);if("regexp"==ae)return Et.state.lastType=Et.marked="operator",Et.stream.backUp(Et.stream.pos-Et.stream.start-1),rt(Yi)}}function te(ae,Ue){return"quasi"!=ae?ut():"${"!=Ue.slice(Ue.length-2)?rt(te):rt(Ce,ne)}function ne(ae){if("}"==ae)return Et.marked="string-2",Et.state.tokenize=Ct,rt(te)}function Oe(ae){return st(Et.stream,Et.state),ut("{"==ae?Gt:Zt)}function re(ae){return st(Et.stream,Et.state),ut("{"==ae?Gt:ie)}function ye(ae,Ue){if("target"==Ue)return Et.marked="keyword",rt(ri)}function Qt(ae,Ue){if("target"==Ue)return Et.marked="keyword",rt(Te)}function de(ae){return":"==ae?rt(Le,Gt):ut(ri,pi(";"),Le)}function ti(ae){if("variable"==ae)return Et.marked="property",rt()}function ni(ae,Ue){return"async"==ae?(Et.marked="property",rt(ni)):"variable"==ae||"keyword"==Et.style?(Et.marked="property","get"==Ue||"set"==Ue?rt(Pi):(b&&Et.state.fatArrowAt==Et.stream.start&&(Oi=Et.stream.match(/^\s*:\s*/,!1))&&(Et.state.fatArrowAt=Et.stream.pos+Oi[0].length),rt(wi))):"number"==ae||"string"==ae?(Et.marked=r?"property":Et.style+" property",rt(wi)):"jsonld-keyword"==ae?rt(wi):b&&ge(Ue)?(Et.marked="keyword",rt(ni)):"["==ae?rt(Zt,Zi,pi("]"),wi):"spread"==ae?rt(ie,wi):"*"==Ue?(Et.marked="keyword",rt(ni)):":"==ae?ut(wi):void 0;var Oi}function Pi(ae){return"variable"!=ae?ut(wi):(Et.marked="property",rt(In))}function wi(ae){return":"==ae?rt(ie):"("==ae?ut(In):void 0}function yi(ae,Ue,Oi){function Ji(Yi,sr){if(Oi?Oi.indexOf(Yi)>-1:","==Yi){var zn=Et.state.lexical;return"call"==zn.info&&(zn.pos=(zn.pos||0)+1),rt(function(Yn,kn){return Yn==Ue||kn==Ue?ut():ut(ae)},Ji)}return Yi==Ue||sr==Ue?rt():Oi&&Oi.indexOf(";")>-1?ut(ae):rt(pi(Ue))}return function(Yi,sr){return Yi==Ue||sr==Ue?rt():ut(ae,Ji)}}function dn(ae,Ue,Oi){for(var Ji=3;Ji<arguments.length;Ji++)Et.cc.push(arguments[Ji]);return rt($e(Ue,Oi),yi(ae,Ue),Le)}function mi(ae){return"}"==ae?rt():ut(Gt,mi)}function Zi(ae,Ue){if(b){if(":"==ae)return rt(je);if("?"==Ue)return rt(Zi)}}function Re(ae,Ue){if(b&&(":"==ae||"in"==Ue))return rt(je)}function xe(ae){if(b&&":"==ae)return Et.stream.match(/^\s*\w+\s+is\b/,!1)?rt(Zt,Ci,je):rt(je)}function Ci(ae,Ue){if("is"==Ue)return Et.marked="keyword",rt()}function je(ae,Ue){return"keyof"==Ue||"typeof"==Ue||"infer"==Ue||"readonly"==Ue?(Et.marked="keyword",rt("typeof"==Ue?ie:je)):"variable"==ae||"void"==Ue?(Et.marked="type",rt(ct)):"|"==Ue||"&"==Ue?rt(je):"string"==ae||"number"==ae||"atom"==ae?rt(ct):"["==ae?rt($e("]"),yi(je,"]",","),Le,ct):"{"==ae?rt($e("}"),_i,Le,ct):"("==ae?rt(yi(kt,")"),Ii,ct):"<"==ae?rt(yi(je,">"),je):"quasi"==ae?ut(Je,ct):void 0}function Ii(ae){if("=>"==ae)return rt(je)}function _i(ae){return ae.match(/[\}\)\]]/)?rt():","==ae||";"==ae?rt(_i):ut(Hi,_i)}function Hi(ae,Ue){return"variable"==ae||"keyword"==Et.style?(Et.marked="property",rt(Hi)):"?"==Ue||"number"==ae||"string"==ae?rt(Hi):":"==ae?rt(je):"["==ae?rt(pi("variable"),Re,pi("]"),Hi):"("==ae?ut(or,Hi):ae.match(/[;\}\)\],]/)?void 0:rt()}function Je(ae,Ue){return"quasi"!=ae?ut():"${"!=Ue.slice(Ue.length-2)?rt(Je):rt(je,ue)}function ue(ae){if("}"==ae)return Et.marked="string-2",Et.state.tokenize=Ct,rt(Je)}function kt(ae,Ue){return"variable"==ae&&Et.stream.match(/^\s*[?:]/,!1)||"?"==Ue?rt(kt):":"==ae?rt(je):"spread"==ae?rt(kt):ut(je)}function ct(ae,Ue){return"<"==Ue?rt($e(">"),yi(je,">"),Le,ct):"|"==Ue||"."==ae||"&"==Ue?rt(je):"["==ae?rt(je,pi("]"),ct):"extends"==Ue||"implements"==Ue?(Et.marked="keyword",rt(je)):"?"==Ue?rt(je,pi(":"),je):void 0}function Lt(ae,Ue){if("<"==Ue)return rt($e(">"),yi(je,">"),Le,ct)}function ce(){return ut(je,Ne)}function Ne(ae,Ue){if("="==Ue)return rt(je)}function Wi(ae,Ue){return"enum"==Ue?(Et.marked="keyword",rt(Rr)):ut(qi,Zi,ci,Ke)}function qi(ae,Ue){return b&&ge(Ue)?(Et.marked="keyword",rt(qi)):"variable"==ae?(Mt(Ue),rt()):"spread"==ae?rt(qi):"["==ae?dn(ir,"]"):"{"==ae?dn(Sn,"}"):void 0}function Sn(ae,Ue){return"variable"!=ae||Et.stream.match(/^\s*:/,!1)?("variable"==ae&&(Et.marked="property"),"spread"==ae?rt(qi):"}"==ae?ut():"["==ae?rt(Zt,pi("]"),pi(":"),Sn):rt(pi(":"),qi,ci)):(Mt(Ue),rt(ci))}function ir(){return ut(qi,ci)}function ci(ae,Ue){if("="==Ue)return rt(ie)}function Ke(ae){if(","==ae)return rt(Wi)}function Pe(ae,Ue){if("keyword b"==ae&&"else"==Ue)return rt($e("form","else"),Gt,Le)}function hi(ae,Ue){return"await"==Ue?rt(hi):"("==ae?rt($e(")"),xi,Le):void 0}function xi(ae){return"var"==ae?rt(Wi,fn):"variable"==ae?rt(fn):ut(fn)}function fn(ae,Ue){return")"==ae?rt():";"==ae?rt(fn):"in"==Ue||"of"==Ue?(Et.marked="keyword",rt(Zt,fn)):ut(Zt,fn)}function In(ae,Ue){return"*"==Ue?(Et.marked="keyword",rt(In)):"variable"==ae?(Mt(Ue),rt(In)):"("==ae?rt(ke,$e(")"),yi(to,")"),Le,xe,Gt,Di):b&&"<"==Ue?rt($e(">"),yi(ce,">"),Le,In):void 0}function or(ae,Ue){return"*"==Ue?(Et.marked="keyword",rt(or)):"variable"==ae?(Mt(Ue),rt(or)):"("==ae?rt(ke,$e(")"),yi(to,")"),Le,xe,Di):b&&"<"==Ue?rt($e(">"),yi(ce,">"),Le,or):void 0}function Cr(ae,Ue){return"keyword"==ae||"variable"==ae?(Et.marked="type",rt(Cr)):"<"==Ue?rt($e(">"),yi(ce,">"),Le):void 0}function to(ae,Ue){return"@"==Ue&&rt(Zt,to),"spread"==ae?rt(to):b&&ge(Ue)?(Et.marked="keyword",rt(to)):b&&"this"==ae?rt(Zi,ci):ut(qi,Zi,ci)}function no(ae,Ue){return"variable"==ae?fo(ae,Ue):kr(ae,Ue)}function fo(ae,Ue){if("variable"==ae)return Mt(Ue),rt(kr)}function kr(ae,Ue){return"<"==Ue?rt($e(">"),yi(ce,">"),Le,kr):"extends"==Ue||"implements"==Ue||b&&","==ae?("implements"==Ue&&(Et.marked="keyword"),rt(b?je:Zt,kr)):"{"==ae?rt($e("}"),ar,Le):void 0}function ar(ae,Ue){return"async"==ae||"variable"==ae&&("static"==Ue||"get"==Ue||"set"==Ue||b&&ge(Ue))&&Et.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(Et.marked="keyword",rt(ar)):"variable"==ae||"keyword"==Et.style?(Et.marked="property",rt(Oo,ar)):"number"==ae||"string"==ae?rt(Oo,ar):"["==ae?rt(Zt,Zi,pi("]"),Oo,ar):"*"==Ue?(Et.marked="keyword",rt(ar)):b&&"("==ae?ut(or,ar):";"==ae||","==ae?rt(ar):"}"==ae?rt():"@"==Ue?rt(Zt,ar):void 0}function Oo(ae,Ue){if("!"==Ue||"?"==Ue)return rt(Oo);if(":"==ae)return rt(je,ci);if("="==Ue)return rt(ie);var Oi=Et.state.lexical.prev;return ut(Oi&&"interface"==Oi.info?or:In)}function nr(ae,Ue){return"*"==Ue?(Et.marked="keyword",rt(Sr,pi(";"))):"default"==Ue?(Et.marked="keyword",rt(Zt,pi(";"))):"{"==ae?rt(yi(Mi,"}"),Sr,pi(";")):ut(Gt)}function Mi(ae,Ue){return"as"==Ue?(Et.marked="keyword",rt(pi("variable"))):"variable"==ae?ut(ie,Mi):void 0}function Fn(ae){return"string"==ae?rt():"("==ae?ut(Zt):"."==ae?ut(ri):ut(hr,Pr,Sr)}function hr(ae,Ue){return"{"==ae?dn(hr,"}"):("variable"==ae&&Mt(Ue),"*"==Ue&&(Et.marked="keyword"),rt(pr))}function Pr(ae){if(","==ae)return rt(hr,Pr)}function pr(ae,Ue){if("as"==Ue)return Et.marked="keyword",rt(hr)}function Sr(ae,Ue){if("from"==Ue)return Et.marked="keyword",rt(Zt)}function Zr(ae){return"]"==ae?rt():ut(yi(ie,"]"))}function Rr(){return ut($e("form"),qi,pi("{"),$e("}"),yi(Vi,"}"),Le,Le)}function Vi(){return ut(qi,ci)}function Gn(ae,Ue,Oi){return Ue.tokenize==It&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(Ue.lastType)||"quasi"==Ue.lastType&&/\{\s*$/.test(ae.string.slice(0,ae.pos-(Oi||0)))}return Di.lex=!0,Le.lex=!0,{startState:function(ae){var Ue={tokenize:It,lastType:"sof",cc:[],lexical:new lt((ae||0)-t,0,"block",!1),localVars:e.localVars,context:e.localVars&&new ve(null,null,!1),indented:ae||0};return e.globalVars&&"object"==typeof e.globalVars&&(Ue.globalVars=e.globalVars),Ue},token:function(ae,Ue){if(ae.sol()&&(Ue.lexical.hasOwnProperty("align")||(Ue.lexical.align=!1),Ue.indented=ae.indentation(),st(ae,Ue)),Ue.tokenize!=Jt&&ae.eatSpace())return null;var Oi=Ue.tokenize(ae,Ue);return"comment"==Tt?Oi:(Ue.lastType="operator"!=Tt||"++"!=Pt&&"--"!=Pt?Tt:"incdec",Dt(Ue,Oi,Tt,Pt,ae))},indent:function(ae,Ue){if(ae.tokenize==Jt||ae.tokenize==Ct)return T.Pass;if(ae.tokenize!=It)return 0;var Yi,Oi=Ue&&Ue.charAt(0),Ji=ae.lexical;if(!/^\s*else\b/.test(Ue))for(var sr=ae.cc.length-1;sr>=0;--sr){var zn=ae.cc[sr];if(zn==Le)Ji=Ji.prev;else if(zn!=Pe&&zn!=Di)break}for(;("stat"==Ji.type||"form"==Ji.type)&&("}"==Oi||(Yi=ae.cc[ae.cc.length-1])&&(Yi==ri||Yi==Te)&&!/^[,\.=+\-*:?[\(]/.test(Ue));)Ji=Ji.prev;n&&")"==Ji.type&&"stat"==Ji.prev.type&&(Ji=Ji.prev);var Yn=Ji.type,kn=Oi==Yn;return"vardef"==Yn?Ji.indented+("operator"==ae.lastType||","==ae.lastType?Ji.info.length+1:0):"form"==Yn&&"{"==Oi?Ji.indented:"form"==Yn?Ji.indented+t:"stat"==Yn?Ji.indented+(function(ae,Ue){return"operator"==ae.lastType||","==ae.lastType||Z.test(Ue.charAt(0))||/[,.]/.test(Ue.charAt(0))}(ae,Ue)?n||t:0):"switch"!=Ji.info||kn||0==e.doubleIndentSwitch?Ji.align?Ji.column+(kn?0:1):Ji.indented+(kn?0:t):Ji.indented+(/^(?:case|default)\b/.test(Ue)?t:2*t)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:s?null:"/*",blockCommentEnd:s?null:"*/",blockCommentContinue:s?null:" * ",lineComment:s?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:s?"json":"javascript",jsonldMode:r,jsonMode:s,expressionAllowed:Gn,skipExpression:function(ae){Dt(ae,"atom","atom","true",new T.StringStream("",2,null))}}}),T.registerHelper("wordChars","javascript",/[\w$]/),T.defineMIME("text/javascript","javascript"),T.defineMIME("text/ecmascript","javascript"),T.defineMIME("application/javascript","javascript"),T.defineMIME("application/x-javascript","javascript"),T.defineMIME("application/ecmascript","javascript"),T.defineMIME("application/json",{name:"javascript",json:!0}),T.defineMIME("application/x-json",{name:"javascript",json:!0}),T.defineMIME("application/manifest+json",{name:"javascript",json:!0}),T.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),T.defineMIME("text/typescript",{name:"javascript",typescript:!0}),T.defineMIME("application/typescript",{name:"javascript",typescript:!0})}(m(68266))},70697:function(U){U.exports=function(){"use strict";function $(vt){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Rt){return typeof Rt}:function(Rt){return Rt&&"function"==typeof Symbol&&Rt.constructor===Symbol&&Rt!==Symbol.prototype?"symbol":typeof Rt})(vt)}var vt,T=(vt={},function(se){var De=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"introjs-stamp";return vt[De]=vt[De]||0,void 0===se[De]&&(se[De]=vt[De]++),se[De]});function _(vt,Rt,se){if(vt)for(var De=0,Ve=vt.length;De<Ve;De++)Rt(vt[De],De);"function"==typeof se&&se()}var e=new function(){var Rt="introjs_event";this._id=function(se,De,Ve,fi){return De+T(Ve)+(fi?"_".concat(T(fi)):"")},this.on=function(se,De,Ve,fi,Qe){var li=this._id.apply(this,arguments),Li=function(zi){return Ve.call(fi||se,zi||window.event)};"addEventListener"in se?se.addEventListener(De,Li,Qe):"attachEvent"in se&&se.attachEvent("on".concat(De),Li),se[Rt]=se[Rt]||{},se[Rt][li]=Li},this.off=function(se,De,Ve,fi,Qe){var li=this._id.apply(this,arguments),Li=se[Rt]&&se[Rt][li];!Li||("removeEventListener"in se?se.removeEventListener(De,Li,Qe):"detachEvent"in se&&se.detachEvent("on".concat(De),Li),se[Rt][li]=null)}},t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(vt,Rt){return vt(Rt={exports:{}},Rt.exports),Rt.exports}var Le,pi,r=function(vt){return vt&&vt.Math==Math&&vt},s=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof t&&t)||function(){return this}()||Function("return this")(),u=function(vt){try{return!!vt()}catch(Rt){return!0}},b=!u(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),x=Function.prototype.call,B=x.bind?x.bind(x):function(){return x.apply(x,arguments)},Z={}.propertyIsEnumerable,ot=Object.getOwnPropertyDescriptor,Pt={f:ot&&!Z.call({1:2},1)?function(Rt){var se=ot(this,Rt);return!!se&&se.enumerable}:Z},pt=function(vt,Rt){return{enumerable:!(1&vt),configurable:!(2&vt),writable:!(4&vt),value:Rt}},It=Function.prototype,Ht=It.bind,Jt=It.call,Ct=Ht&&Ht.bind(Jt),bt=Ht?function(vt){return vt&&Ct(Jt,vt)}:function(vt){return vt&&function(){return Jt.apply(vt,arguments)}},st=bt({}.toString),gt=bt("".slice),lt=function(vt){return gt(st(vt),8,-1)},Bt=s.Object,Dt=bt("".split),Et=u(function(){return!Bt("z").propertyIsEnumerable(0)})?function(vt){return"String"==lt(vt)?Dt(vt,""):Bt(vt)}:Bt,ut=s.TypeError,rt=function(vt){if(null==vt)throw ut("Can't call method on "+vt);return vt},fe=function(vt){return Et(rt(vt))},Mt=function(vt){return"function"==typeof vt},Nt=function(vt){return"object"==typeof vt?null!==vt:Mt(vt)},ge=function(vt){return Mt(vt)?vt:void 0},ve=function(vt,Rt){return arguments.length<2?ge(s[vt]):s[vt]&&s[vt][Rt]},pe=bt({}.isPrototypeOf),He=ve("navigator","userAgent")||"",ke=s.process,Ze=s.Deno,Di=ke&&ke.versions||Ze&&Ze.version,$e=Di&&Di.v8;$e&&(pi=(Le=$e.split("."))[0]>0&&Le[0]<4?1:+(Le[0]+Le[1])),!pi&&He&&(!(Le=He.match(/Edge\/(\d+)/))||Le[1]>=74)&&(Le=He.match(/Chrome\/(\d+)/))&&(pi=+Le[1]);var Gt=pi,Se=!!Object.getOwnPropertySymbols&&!u(function(){var vt=Symbol();return!String(vt)||!(Object(vt)instanceof Symbol)||!Symbol.sham&&Gt&&Gt<41}),Zt=Se&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,ie=s.Object,St=Zt?function(vt){return"symbol"==typeof vt}:function(vt){var Rt=ve("Symbol");return Mt(Rt)&&pe(Rt.prototype,ie(vt))},jt=s.String,Ce=function(vt){try{return jt(vt)}catch(Rt){return"Object"}},ri=s.TypeError,Te=function(vt){if(Mt(vt))return vt;throw ri(Ce(vt)+" is not a function")},te=function(vt,Rt){var se=vt[Rt];return null==se?void 0:Te(se)},ne=s.TypeError,re=Object.defineProperty,me=function(vt,Rt){try{re(s,vt,{value:Rt,configurable:!0,writable:!0})}catch(se){s[vt]=Rt}return Rt},ye="__core-js_shared__",de=s[ye]||me(ye,{}),ti=n(function(vt){(vt.exports=function(Rt,se){return de[Rt]||(de[Rt]=void 0!==se?se:{})})("versions",[]).push({version:"3.19.1",mode:"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})}),ni=s.Object,Pi=function(vt){return ni(rt(vt))},wi=bt({}.hasOwnProperty),yi=Object.hasOwn||function(Rt,se){return wi(Pi(Rt),se)},dn=0,mi=Math.random(),Zi=bt(1..toString),Re=function(vt){return"Symbol("+(void 0===vt?"":vt)+")_"+Zi(++dn+mi,36)},xe=ti("wks"),Ci=s.Symbol,je=Ci&&Ci.for,Ii=Zt?Ci:Ci&&Ci.withoutSetter||Re,_i=function(vt){if(!yi(xe,vt)||!Se&&"string"!=typeof xe[vt]){var Rt="Symbol."+vt;xe[vt]=Se&&yi(Ci,vt)?Ci[vt]:Zt&&je?je(Rt):Ii(Rt)}return xe[vt]},Hi=s.TypeError,Je=_i("toPrimitive"),ue=function(vt,Rt){if(!Nt(vt)||St(vt))return vt;var De,se=te(vt,Je);if(se){if(void 0===Rt&&(Rt="default"),De=B(se,vt,Rt),!Nt(De)||St(De))return De;throw Hi("Can't convert object to primitive value")}return void 0===Rt&&(Rt="number"),function(vt,Rt){var se,De;if("string"===Rt&&Mt(se=vt.toString)&&!Nt(De=B(se,vt))||Mt(se=vt.valueOf)&&!Nt(De=B(se,vt))||"string"!==Rt&&Mt(se=vt.toString)&&!Nt(De=B(se,vt)))return De;throw ne("Can't convert object to primitive value")}(vt,Rt)},kt=function(vt){var Rt=ue(vt,"string");return St(Rt)?Rt:Rt+""},ct=s.document,Lt=Nt(ct)&&Nt(ct.createElement),ce=function(vt){return Lt?ct.createElement(vt):{}},Ne=!b&&!u(function(){return 7!=Object.defineProperty(ce("div"),"a",{get:function(){return 7}}).a}),Wi=Object.getOwnPropertyDescriptor,Sn={f:b?Wi:function(Rt,se){if(Rt=fe(Rt),se=kt(se),Ne)try{return Wi(Rt,se)}catch(De){}if(yi(Rt,se))return pt(!B(Pt.f,Rt,se),Rt[se])}},ir=s.String,ci=s.TypeError,Ke=function(vt){if(Nt(vt))return vt;throw ci(ir(vt)+" is not an object")},Pe=s.TypeError,hi=Object.defineProperty,fn={f:b?hi:function(Rt,se,De){if(Ke(Rt),se=kt(se),Ke(De),Ne)try{return hi(Rt,se,De)}catch(Ve){}if("get"in De||"set"in De)throw Pe("Accessors not supported");return"value"in De&&(Rt[se]=De.value),Rt}},In=b?function(vt,Rt,se){return fn.f(vt,Rt,pt(1,se))}:function(vt,Rt,se){return vt[Rt]=se,vt},or=bt(Function.toString);Mt(de.inspectSource)||(de.inspectSource=function(vt){return or(vt)});var Fn,hr,Pr,Cr=de.inspectSource,to=s.WeakMap,no=Mt(to)&&/native code/.test(Cr(to)),fo=ti("keys"),kr=function(vt){return fo[vt]||(fo[vt]=Re(vt))},ar={},Oo="Object already initialized",nr=s.TypeError;if(no||de.state){var Zr=de.state||(de.state=new(0,s.WeakMap)),Rr=bt(Zr.get),Vi=bt(Zr.has),On=bt(Zr.set);Fn=function(vt,Rt){if(Vi(Zr,vt))throw new nr(Oo);return Rt.facade=vt,On(Zr,vt,Rt),Rt},hr=function(vt){return Rr(Zr,vt)||{}},Pr=function(vt){return Vi(Zr,vt)}}else{var Gn=kr("state");ar[Gn]=!0,Fn=function(vt,Rt){if(yi(vt,Gn))throw new nr(Oo);return Rt.facade=vt,In(vt,Gn,Rt),Rt},hr=function(vt){return yi(vt,Gn)?vt[Gn]:{}},Pr=function(vt){return yi(vt,Gn)}}var ae={set:Fn,get:hr,has:Pr,enforce:function(vt){return Pr(vt)?hr(vt):Fn(vt,{})},getterFor:function(vt){return function(Rt){var se;if(!Nt(Rt)||(se=hr(Rt)).type!==vt)throw nr("Incompatible receiver, "+vt+" required");return se}}},Ue=Function.prototype,Oi=b&&Object.getOwnPropertyDescriptor,Ji=yi(Ue,"name"),zn={EXISTS:Ji,PROPER:Ji&&"something"===function(){}.name,CONFIGURABLE:Ji&&(!b||b&&Oi(Ue,"name").configurable)},Yn=n(function(vt){var Rt=zn.CONFIGURABLE,se=ae.get,De=ae.enforce,Ve=String(String).split("String");(vt.exports=function(fi,Qe,li,Li){var $n,Ai=!!Li&&!!Li.unsafe,zi=!!Li&&!!Li.enumerable,Kn=!!Li&&!!Li.noTargetGet,Un=Li&&void 0!==Li.name?Li.name:Qe;Mt(li)&&("Symbol("===String(Un).slice(0,7)&&(Un="["+String(Un).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!yi(li,"name")||Rt&&li.name!==Un)&&In(li,"name",Un),($n=De(li)).source||($n.source=Ve.join("string"==typeof Un?Un:""))),fi!==s?(Ai?!Kn&&fi[Qe]&&(zi=!0):delete fi[Qe],zi?fi[Qe]=li:In(fi,Qe,li)):zi?fi[Qe]=li:me(Qe,li)})(Function.prototype,"toString",function(){return Mt(this)&&se(this).source||Cr(this)})}),kn=Math.ceil,xo=Math.floor,$o=function(vt){var Rt=+vt;return Rt!=Rt||0===Rt?0:(Rt>0?xo:kn)(Rt)},so=Math.max,go=Math.min,oa=function(vt,Rt){var se=$o(vt);return se<0?so(se+Rt,0):go(se,Rt)},lr=Math.min,ts=function(vt){return vt>0?lr($o(vt),9007199254740991):0},eo=function(vt){return ts(vt.length)},ks=function(vt){return function(Rt,se,De){var li,Ve=fe(Rt),fi=eo(Ve),Qe=oa(De,fi);if(vt&&se!=se){for(;fi>Qe;)if((li=Ve[Qe++])!=li)return!0}else for(;fi>Qe;Qe++)if((vt||Qe in Ve)&&Ve[Qe]===se)return vt||Qe||0;return!vt&&-1}},Ls={includes:ks(!0),indexOf:ks(!1)},Fo=Ls.indexOf,Do=bt([].push),jo=function(vt,Rt){var fi,se=fe(vt),De=0,Ve=[];for(fi in se)!yi(ar,fi)&&yi(se,fi)&&Do(Ve,fi);for(;Rt.length>De;)yi(se,fi=Rt[De++])&&(~Fo(Ve,fi)||Do(Ve,fi));return Ve},Io=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Ka=Io.concat("length","prototype"),Ca={f:Object.getOwnPropertyNames||function(Rt){return jo(Rt,Ka)}},sa={f:Object.getOwnPropertySymbols},El=bt([].concat),aa=ve("Reflect","ownKeys")||function(Rt){var se=Ca.f(Ke(Rt)),De=sa.f;return De?El(se,De(Rt)):se},Ja=function(vt,Rt){for(var se=aa(Rt),De=fn.f,Ve=Sn.f,fi=0;fi<se.length;fi++){var Qe=se[fi];yi(vt,Qe)||De(vt,Qe,Ve(Rt,Qe))}},Ks=/#|\.prototype\./,Cs=function(vt,Rt){var se=Sa[Tl(vt)];return se==ko||se!=la&&(Mt(Rt)?u(Rt):!!Rt)},Tl=Cs.normalize=function(vt){return String(vt).replace(Ks,".").toLowerCase()},Sa=Cs.data={},la=Cs.NATIVE="N",ko=Cs.POLYFILL="P",jr=Cs,ho=Sn.f,To=function(vt,Rt){var Qe,li,Li,Ai,zi,se=vt.target,De=vt.global,Ve=vt.stat;if(Qe=De?s:Ve?s[se]||me(se,{}):(s[se]||{}).prototype)for(li in Rt){if(Ai=Rt[li],Li=vt.noTargetGet?(zi=ho(Qe,li))&&zi.value:Qe[li],!jr(De?li:se+(Ve?".":"#")+li,vt.forced)&&void 0!==Li){if(typeof Ai==typeof Li)continue;Ja(Ai,Li)}(vt.sham||Li&&Li.sham)&&In(Ai,"sham",!0),Yn(Qe,li,Ai,vt)}},Yo={};Yo[_i("toStringTag")]="z";var vi,Ss="[object z]"===String(Yo),Bo=_i("toStringTag"),Lo=s.Object,es="Arguments"==lt(function(){return arguments}()),ao=Ss?lt:function(vt){var Rt,se,De;return void 0===vt?"Undefined":null===vt?"Null":"string"==typeof(se=function(vt,Rt){try{return vt[Rt]}catch(se){}}(Rt=Lo(vt),Bo))?se:es?lt(Rt):"Object"==(De=lt(Rt))&&Mt(Rt.callee)?"Arguments":De},fs=s.String,Lr=function(vt){if("Symbol"===ao(vt))throw TypeError("Cannot convert a Symbol value to a string");return fs(vt)},Js=function(){var vt=Ke(this),Rt="";return vt.global&&(Rt+="g"),vt.ignoreCase&&(Rt+="i"),vt.multiline&&(Rt+="m"),vt.dotAll&&(Rt+="s"),vt.unicode&&(Rt+="u"),vt.sticky&&(Rt+="y"),Rt},Ar=s.RegExp,$s=u(function(){var vt=Ar("a","y");return vt.lastIndex=2,null!=vt.exec("abcd")}),ol=u(function(){var vt=Ar("^r","gy");return vt.lastIndex=2,null!=vt.exec("str")}),is={UNSUPPORTED_Y:$s,BROKEN_CARET:ol},Ho=Object.keys||function(Rt){return jo(Rt,Io)},cs=b?Object.defineProperties:function(Rt,se){Ke(Rt);for(var li,De=fe(se),Ve=Ho(se),fi=Ve.length,Qe=0;fi>Qe;)fn.f(Rt,li=Ve[Qe++],De[li]);return Rt},Cl=ve("document","documentElement"),ma="prototype",xt="script",Q=kr("IE_PROTO"),V=function(){},W=function(vt){return"<script>"+vt+"</"+xt+">"},At=function(vt){vt.write(W("")),vt.close();var Rt=vt.parentWindow.Object;return vt=null,Rt},ln=function(){try{vi=new ActiveXObject("htmlfile")}catch(Rt){}ln="undefined"!=typeof document?document.domain&&vi?At(vi):function(){var se,vt=ce("iframe");return vt.style.display="none",Cl.appendChild(vt),vt.src=String("javascript:"),(se=vt.contentWindow.document).open(),se.write(W("document.F=Object")),se.close(),se.F}():At(vi);for(var vt=Io.length;vt--;)delete ln[ma][Io[vt]];return ln()};ar[Q]=!0;var Xn=Object.create||function(Rt,se){var De;return null!==Rt?(V[ma]=Ke(Rt),De=new V,V[ma]=null,De[Q]=Rt):De=ln(),void 0===se?De:cs(De,se)},yr=s.RegExp,Or=u(function(){var vt=yr(".","s");return!(vt.dotAll&&vt.exec("\n")&&"s"===vt.flags)}),Dr=s.RegExp,Qr=u(function(){var vt=Dr("(?<a>b)","g");return"b"!==vt.exec("b").groups.a||"bc"!=="b".replace(vt,"$<a>c")}),cr=ae.get,Xo=ti("native-string-replace",String.prototype.replace),Hn=RegExp.prototype.exec,us=Hn,wa=bt("".charAt),Uo=bt("".indexOf),$a=bt("".replace),Rs=bt("".slice),Ps=function(){var vt=/a/,Rt=/b*/g;return B(Hn,vt,"a"),B(Hn,Rt,"a"),0!==vt.lastIndex||0!==Rt.lastIndex}(),wc=is.UNSUPPORTED_Y||is.BROKEN_CARET,Wt=void 0!==/()??/.exec("")[1];(Ps||Wt||wc||Or||Qr)&&(us=function(Rt){var Qe,li,Li,Ai,zi,Kn,Un,se=this,De=cr(se),Ve=Lr(Rt),fi=De.raw;if(fi)return fi.lastIndex=se.lastIndex,Qe=B(us,fi,Ve),se.lastIndex=fi.lastIndex,Qe;var $n=De.groups,Ko=wc&&se.sticky,Co=B(Js,se),Gr=se.source,uo=0,So=Ve;if(Ko&&(Co=$a(Co,"y",""),-1===Uo(Co,"g")&&(Co+="g"),So=Rs(Ve,se.lastIndex),se.lastIndex>0&&(!se.multiline||se.multiline&&"\n"!==wa(Ve,se.lastIndex-1))&&(Gr="(?: "+Gr+")",So=" "+So,uo++),li=new RegExp("^(?:"+Gr+")",Co)),Wt&&(li=new RegExp("^"+Gr+"$(?!\\s)",Co)),Ps&&(Li=se.lastIndex),Ai=B(Hn,Ko?li:se,So),Ko?Ai?(Ai.input=Rs(Ai.input,uo),Ai[0]=Rs(Ai[0],uo),Ai.index=se.lastIndex,se.lastIndex+=Ai[0].length):se.lastIndex=0:Ps&&Ai&&(se.lastIndex=se.global?Ai.index+Ai[0].length:Li),Wt&&Ai&&Ai.length>1&&B(Xo,Ai[0],li,function(){for(zi=1;zi<arguments.length-2;zi++)void 0===arguments[zi]&&(Ai[zi]=void 0)}),Ai&&$n)for(Ai.groups=Kn=Xn(null),zi=0;zi<$n.length;zi++)Kn[(Un=$n[zi])[0]]=Ai[Un[1]];return Ai});var K=us;To({target:"RegExp",proto:!0,forced:/./.exec!==K},{exec:K});var _t=_i("species"),ee=RegExp.prototype,be=function(vt,Rt,se,De){var Ve=_i(vt),fi=!u(function(){var Ai={};return Ai[Ve]=function(){return 7},7!=""[vt](Ai)}),Qe=fi&&!u(function(){var Ai=!1,zi=/a/;return"split"===vt&&((zi={}).constructor={},zi.constructor[_t]=function(){return zi},zi.flags="",zi[Ve]=/./[Ve]),zi.exec=function(){return Ai=!0,null},zi[Ve](""),!Ai});if(!fi||!Qe||se){var li=bt(/./[Ve]),Li=Rt(Ve,""[vt],function(Ai,zi,Kn,Un,$n){var Ko=bt(Ai),Co=zi.exec;return Co===K||Co===ee.exec?fi&&!$n?{done:!0,value:li(zi,Kn,Un)}:{done:!0,value:Ko(Kn,zi,Un)}:{done:!1}});Yn(String.prototype,vt,Li[0]),Yn(ee,Ve,Li[1])}De&&In(ee[Ve],"sham",!0)},Xe=bt("".charAt),qe=bt("".charCodeAt),bi=bt("".slice),Ui=function(vt){return function(Rt,se){var Qe,li,De=Lr(rt(Rt)),Ve=$o(se),fi=De.length;return Ve<0||Ve>=fi?vt?"":void 0:(Qe=qe(De,Ve))<55296||Qe>56319||Ve+1===fi||(li=qe(De,Ve+1))<56320||li>57343?vt?Xe(De,Ve):Qe:vt?bi(De,Ve,Ve+2):li-56320+(Qe-55296<<10)+65536}},Cn=(Ui(!1),Ui(!0)),Zn=function(vt,Rt,se){return Rt+(se?Cn(vt,Rt).length:1)},Qn=s.TypeError,Nn=function(vt,Rt){var se=vt.exec;if(Mt(se)){var De=B(se,vt,Rt);return null!==De&&Ke(De),De}if("RegExp"===lt(vt))return B(K,vt,Rt);throw Qn("RegExp#exec called on incompatible receiver")};be("match",function(vt,Rt,se){return[function(Ve){var fi=rt(this),Qe=null==Ve?void 0:te(Ve,vt);return Qe?B(Qe,Ve,fi):new RegExp(Ve)[vt](Lr(fi))},function(De){var Ve=Ke(this),fi=Lr(De),Qe=se(Rt,Ve,fi);if(Qe.done)return Qe.value;if(!Ve.global)return Nn(Ve,fi);var li=Ve.unicode;Ve.lastIndex=0;for(var zi,Li=[],Ai=0;null!==(zi=Nn(Ve,fi));){var Kn=Lr(zi[0]);Li[Ai]=Kn,""===Kn&&(Ve.lastIndex=Zn(fi,ts(Ve.lastIndex),li)),Ai++}return 0===Ai?null:Li}]});var tr=Array.isArray||function(Rt){return"Array"==lt(Rt)},er=function(vt,Rt,se){var De=kt(Rt);De in vt?fn.f(vt,De,pt(0,se)):vt[De]=se},wr=function(){},Yr=[],ro=ve("Reflect","construct"),Vo=/^\s*(?:class|function)\b/,La=bt(Vo.exec),Fs=!Vo.exec(wr),Mo=function(vt){if(!Mt(vt))return!1;try{return ro(wr,Yr,vt),!0}catch(Rt){return!1}},gs=!ro||u(function(){var vt;return Mo(Mo.call)||!Mo(Object)||!Mo(function(){vt=!0})||vt})?function(vt){if(!Mt(vt))return!1;switch(ao(vt)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return Fs||!!La(Vo,Cr(vt))}:Mo,Bs=_i("species"),sl=s.Array,Qs=function(vt,Rt){return new(function(vt){var Rt;return tr(vt)&&(gs(Rt=vt.constructor)&&(Rt===sl||tr(Rt.prototype))||Nt(Rt)&&null===(Rt=Rt[Bs]))&&(Rt=void 0),void 0===Rt?sl:Rt}(vt))(0===Rt?0:Rt)},mo=_i("species"),Pa=function(vt){return Gt>=51||!u(function(){var Rt=[];return(Rt.constructor={})[mo]=function(){return{foo:1}},1!==Rt[vt](Boolean).foo})},Dn=_i("isConcatSpreadable"),An=9007199254740991,rr="Maximum allowed index exceeded",ur=s.TypeError,Er=Gt>=51||!u(function(){var vt=[];return vt[Dn]=!1,vt.concat()[0]!==vt}),ns=Pa("concat"),Ir=function(vt){if(!Nt(vt))return!1;var Rt=vt[Dn];return void 0!==Rt?!!Rt:tr(vt)};To({target:"Array",proto:!0,forced:!Er||!ns},{concat:function(Rt){var fi,Qe,li,Li,Ai,se=Pi(this),De=Qs(se,0),Ve=0;for(fi=-1,li=arguments.length;fi<li;fi++)if(Ir(Ai=-1===fi?se:arguments[fi])){if(Ve+(Li=eo(Ai))>An)throw ur(rr);for(Qe=0;Qe<Li;Qe++,Ve++)Qe in Ai&&er(De,Ve,Ai[Qe])}else{if(Ve>=An)throw ur(rr);er(De,Ve++,Ai)}return De.length=Ve,De}}),Ss||Yn(Object.prototype,"toString",Ss?{}.toString:function(){return"[object "+ao(this)+"]"},{unsafe:!0});var al=zn.PROPER,Za="toString",Fr=RegExp.prototype,ca=Fr[Za],_s=bt(Js);(u(function(){return"/a/b"!=ca.call({source:"a",flags:"b"})})||al&&ca.name!=Za)&&Yn(RegExp.prototype,Za,function(){var Rt=Ke(this),se=Lr(Rt.source),De=Rt.flags;return"/"+se+"/"+Lr(void 0===De&&pe(Fr,Rt)&&!("flags"in Fr)?_s(Rt):De)},{unsafe:!0});var _a=Function.prototype,Ol=_a.apply,vs=_a.call,Qo="object"==typeof Reflect&&Reflect.apply||(_a.bind?vs.bind(Ol):function(){return vs.apply(Ol,arguments)}),ua=_i("match"),Fa=function(vt){var Rt;return Nt(vt)&&(void 0!==(Rt=vt[ua])?!!Rt:"RegExp"==lt(vt))},qs=s.TypeError,Ba=_i("species"),Vl=function(vt,Rt){var De,se=Ke(vt).constructor;return void 0===se||null==(De=Ke(se)[Ba])?Rt:function(vt){if(gs(vt))return vt;throw qs(Ce(vt)+" is not a constructor")}(De)},xl=bt([].slice),Ra=is.UNSUPPORTED_Y,Qa=4294967295,Rc=Math.min,Gl=[].push,va=bt(/./.exec),Ha=bt(Gl),Us=bt("".slice),Ua=!u(function(){var vt=/(?:)/,Rt=vt.exec;vt.exec=function(){return Rt.apply(this,arguments)};var se="ab".split(vt);return 2!==se.length||"a"!==se[0]||"b"!==se[1]});function ta(vt,Rt){if(vt instanceof SVGElement){var se=vt.getAttribute("class")||"";se.match(Rt)||vt.setAttribute("class","".concat(se," ").concat(Rt))}else void 0!==vt.classList?_(Rt.split(" "),function(Ve){vt.classList.add(Ve)}):vt.className.match(Rt)||(vt.className+=" ".concat(Rt))}function Va(vt,Rt){var se="";return vt.currentStyle?se=vt.currentStyle[Rt]:document.defaultView&&document.defaultView.getComputedStyle&&(se=document.defaultView.getComputedStyle(vt,null).getPropertyValue(Rt)),se&&se.toLowerCase?se.toLowerCase():se}function Wl(vt){var Rt=vt.element;if(this._options.scrollToElement){var se=function(vt){var Rt=window.getComputedStyle(vt),se="absolute"===Rt.position,De=/(auto|scroll)/;if("fixed"===Rt.position)return document.body;for(var Ve=vt;Ve=Ve.parentElement;)if(Rt=window.getComputedStyle(Ve),(!se||"static"!==Rt.position)&&De.test(Rt.overflow+Rt.overflowY+Rt.overflowX))return Ve;return document.body}(Rt);se!==document.body&&(se.scrollTop=Rt.offsetTop-se.offsetTop)}}function Dc(){if(void 0!==window.innerWidth)return{width:window.innerWidth,height:window.innerHeight};var vt=document.documentElement;return{width:vt.clientWidth,height:vt.clientHeight}}function ft(vt,Rt,se){var Ve,De=Rt.element;if("off"!==vt&&this._options.scrollToElement&&(Ve="tooltip"===vt?se.getBoundingClientRect():De.getBoundingClientRect(),!function(vt){var Rt=vt.getBoundingClientRect();return Rt.top>=0&&Rt.left>=0&&Rt.bottom+80<=window.innerHeight&&Rt.right<=window.innerWidth}(De))){var fi=Dc().height;Ve.bottom-(Ve.bottom-Ve.top)<0||De.clientHeight>fi?window.scrollBy(0,Ve.top-(fi/2-Ve.height/2)-this._options.scrollPadding):window.scrollBy(0,Ve.top-(fi/2-Ve.height/2)+this._options.scrollPadding)}}function nt(vt){vt.setAttribute("role","button"),vt.tabIndex=0}be("split",function(vt,Rt,se){var De;return De="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(Ve,fi){var Qe=Lr(rt(this)),li=void 0===fi?Qa:fi>>>0;if(0===li)return[];if(void 0===Ve)return[Qe];if(!Fa(Ve))return B(Rt,Qe,Ve,li);for(var Un,$n,Ko,Li=[],zi=0,Kn=new RegExp(Ve.source,(Ve.ignoreCase?"i":"")+(Ve.multiline?"m":"")+(Ve.unicode?"u":"")+(Ve.sticky?"y":"")+"g");(Un=B(K,Kn,Qe))&&!(($n=Kn.lastIndex)>zi&&(Ha(Li,Us(Qe,zi,Un.index)),Un.length>1&&Un.index<Qe.length&&Qo(Gl,Li,xl(Un,1)),Ko=Un[0].length,zi=$n,Li.length>=li));)Kn.lastIndex===Un.index&&Kn.lastIndex++;return zi===Qe.length?(Ko||!va(Kn,""))&&Ha(Li,""):Ha(Li,Us(Qe,zi)),Li.length>li?xl(Li,0,li):Li}:"0".split(void 0,0).length?function(Ve,fi){return void 0===Ve&&0===fi?[]:B(Rt,this,Ve,fi)}:Rt,[function(fi,Qe){var li=rt(this),Li=null==fi?void 0:te(fi,vt);return Li?B(Li,fi,li,Qe):B(De,Lr(li),fi,Qe)},function(Ve,fi){var Qe=Ke(this),li=Lr(Ve),Li=se(De,Qe,li,fi,De!==Rt);if(Li.done)return Li.value;var Ai=Vl(Qe,RegExp),zi=Qe.unicode,Un=new Ai(Ra?"^(?:"+Qe.source+")":Qe,(Qe.ignoreCase?"i":"")+(Qe.multiline?"m":"")+(Qe.unicode?"u":"")+(Ra?"g":"y")),$n=void 0===fi?Qa:fi>>>0;if(0===$n)return[];if(0===li.length)return null===Nn(Un,li)?[li]:[];for(var Ko=0,Co=0,Gr=[];Co<li.length;){Un.lastIndex=Ra?0:Co;var So,uo=Nn(Un,Ra?Us(li,Co):li);if(null===uo||(So=Rc(ts(Un.lastIndex+(Ra?Co:0)),li.length))===Ko)Co=Zn(li,Co,zi);else{if(Ha(Gr,Us(li,Ko,Co)),Gr.length===$n)return Gr;for(var oo=1;oo<=uo.length-1;oo++)if(Ha(Gr,uo[oo]),Gr.length===$n)return Gr;Co=Ko=So}}return Ha(Gr,Us(li,Ko)),Gr}]},!Ua,Ra);var q=Object.assign,Ot=Object.defineProperty,zt=bt([].concat),_e=!q||u(function(){if(b&&1!==q({b:1},q(Ot({},"a",{enumerable:!0,get:function(){Ot(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var vt={},Rt={},se=Symbol(),De="abcdefghijklmnopqrst";return vt[se]=7,De.split("").forEach(function(Ve){Rt[Ve]=Ve}),7!=q({},vt)[se]||Ho(q({},Rt)).join("")!=De})?function(Rt,se){for(var De=Pi(Rt),Ve=arguments.length,fi=1,Qe=sa.f,li=Pt.f;Ve>fi;)for(var Un,Li=Et(arguments[fi++]),Ai=Qe?zt(Ho(Li),Qe(Li)):Ho(Li),zi=Ai.length,Kn=0;zi>Kn;)Un=Ai[Kn++],(!b||B(li,Li,Un))&&(De[Un]=Li[Un]);return De}:q;function Ge(vt){var Rt=vt.parentNode;return!(!Rt||"HTML"===Rt.nodeName)&&("fixed"===Va(vt,"position")||Ge(Rt))}function ei(vt,Rt){var se=document.body,De=document.documentElement,Ve=window.pageYOffset||De.scrollTop||se.scrollTop,fi=window.pageXOffset||De.scrollLeft||se.scrollLeft;Rt=Rt||se;var Qe=vt.getBoundingClientRect(),li=Rt.getBoundingClientRect(),Li=Va(Rt,"position"),Ai={width:Qe.width,height:Qe.height};return"body"!==Rt.tagName.toLowerCase()&&"relative"===Li||"sticky"===Li?Object.assign(Ai,{top:Qe.top-li.top,left:Qe.left-li.left}):Ge(vt)?Object.assign(Ai,{top:Qe.top,left:Qe.left}):Object.assign(Ai,{top:Qe.top+Ve,left:Qe.left+fi})}To({target:"Object",stat:!0,forced:Object.assign!==_e},{assign:_e});var ki=Math.floor,_n=bt("".charAt),mr=bt("".replace),Wn=bt("".slice),Ur=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,lo=/\$([$&'`]|\d{1,2})/g,cl=function(vt,Rt,se,De,Ve,fi){var Qe=se+vt.length,li=De.length,Li=lo;return void 0!==Ve&&(Ve=Pi(Ve),Li=Ur),mr(fi,Li,function(Ai,zi){var Kn;switch(_n(zi,0)){case"$":return"$";case"&":return vt;case"`":return Wn(Rt,0,se);case"'":return Wn(Rt,Qe);case"<":Kn=Ve[Wn(zi,1,-1)];break;default:var Un=+zi;if(0===Un)return Ai;if(Un>li){var $n=ki(Un/10);return 0===$n?Ai:$n<=li?void 0===De[$n-1]?_n(zi,1):De[$n-1]+_n(zi,1):Ai}Kn=De[Un-1]}return void 0===Kn?"":Kn})},Vs=_i("replace"),ha=Math.max,Go=Math.min,Ga=bt([].concat),Gs=bt([].push),Da=bt("".indexOf),qa=bt("".slice),rc=function(vt){return void 0===vt?vt:String(vt)},Ws="$0"==="a".replace(/./,"$0"),oc=!!/./[Vs]&&""===/./[Vs]("a","$0"),hs=!u(function(){var vt=/./;return vt.exec=function(){var Rt=[];return Rt.groups={a:"7"},Rt},"7"!=="".replace(vt,"$<a>")});function Ao(vt,Rt){if(vt instanceof SVGElement){var se=vt.getAttribute("class")||"";vt.setAttribute("class",se.replace(Rt,"").replace(/^\s+|\s+$/g,""))}else vt.className=vt.className.replace(Rt,"").replace(/^\s+|\s+$/g,"")}function vo(vt,Rt){var se="";if(vt.style.cssText&&(se+=vt.style.cssText),"string"==typeof Rt)se+=Rt;else for(var De in Rt)se+="".concat(De,":").concat(Rt[De],";");vt.style.cssText=se}function Xr(vt){if(vt){if(!this._introItems[this._currentStep])return;var Rt=this._introItems[this._currentStep],se=ei(Rt.element,this._targetElement),De=this._options.helperElementPadding;Ge(Rt.element)?ta(vt,"introjs-fixedTooltip"):Ao(vt,"introjs-fixedTooltip"),"floating"===Rt.position&&(De=0),vo(vt,{width:"".concat(se.width+De,"px"),height:"".concat(se.height+De,"px"),top:"".concat(se.top-De/2,"px"),left:"".concat(se.left-De/2,"px")})}}be("replace",function(vt,Rt,se){var De=oc?"$":"$0";return[function(fi,Qe){var li=rt(this),Li=null==fi?void 0:te(fi,Vs);return Li?B(Li,fi,li,Qe):B(Rt,Lr(li),fi,Qe)},function(Ve,fi){var Qe=Ke(this),li=Lr(Ve);if("string"==typeof fi&&-1===Da(fi,De)&&-1===Da(fi,"$<")){var Li=se(Rt,Qe,li,fi);if(Li.done)return Li.value}var Ai=Mt(fi);Ai||(fi=Lr(fi));var zi=Qe.global;if(zi){var Kn=Qe.unicode;Qe.lastIndex=0}for(var Un=[];;){var $n=Nn(Qe,li);if(null===$n||(Gs(Un,$n),!zi))break;""===Lr($n[0])&&(Qe.lastIndex=Zn(li,ts(Qe.lastIndex),Kn))}for(var Co="",Gr=0,uo=0;uo<Un.length;uo++){for(var So=Lr(($n=Un[uo])[0]),oo=ha(Go($o($n.index),li.length),0),Ms=[],os=1;os<$n.length;os++)Gs(Ms,rc($n[os]));var ys=$n.groups;if(Ai){var ml=Ga([So],Ms,oo,li);void 0!==ys&&Gs(ml,ys);var hu=Lr(Qo(fi,void 0,ml))}else hu=cl(So,li,oo,Ms,ys,fi);oo>=Gr&&(Co+=qa(li,Gr,oo)+hu,Gr=oo+So.length)}return Co+qa(li,Gr)}]},!hs||!Ws||oc);var sc=_i("unscopables"),su=Array.prototype;null==su[sc]&&fn.f(su,sc,{configurable:!0,value:Xn(null)});var zc=Ls.includes;To({target:"Array",proto:!0},{includes:function(Rt){return zc(this,Rt,arguments.length>1?arguments[1]:void 0)}}),function(vt){su[sc][vt]=!0}("includes");var Au=Pa("slice"),ac=_i("species"),Ic=s.Array,Zu=Math.max;To({target:"Array",proto:!0,forced:!Au},{slice:function(Rt,se){var li,Li,Ai,De=fe(this),Ve=eo(De),fi=oa(Rt,Ve),Qe=oa(void 0===se?Ve:se,Ve);if(tr(De)&&((gs(li=De.constructor)&&(li===Ic||tr(li.prototype))||Nt(li)&&null===(li=li[ac]))&&(li=void 0),li===Ic||void 0===li))return xl(De,fi,Qe);for(Li=new(void 0===li?Ic:li)(Zu(Qe-fi,0)),Ai=0;fi<Qe;fi++,Ai++)fi in De&&er(Li,Ai,De[fi]);return Li.length=Ai,Li}});var Ou=s.TypeError,Qu=function(vt){if(Fa(vt))throw Ou("The method doesn't accept regular expressions");return vt},zl=_i("match"),rs=bt("".indexOf);To({target:"String",proto:!0,forced:!function(vt){var Rt=/./;try{"/./"[vt](Rt)}catch(se){try{return Rt[zl]=!1,"/./"[vt](Rt)}catch(De){}}return!1}("includes")},{includes:function(Rt){return!!~rs(Lr(rt(this)),Lr(Qu(Rt)),arguments.length>1?arguments[1]:void 0)}});var Mc=function(vt,Rt){var se=[][vt];return!!se&&u(function(){se.call(null,Rt||function(){throw 1},1)})},ul=bt([].join),Ac=Et!=Object,Sl=Mc("join",",");To({target:"Array",proto:!0,forced:Ac||!Sl},{join:function(Rt){return ul(fe(this),void 0===Rt?",":Rt)}});var da=bt(bt.bind),ba=bt([].push),Wa=function(vt){var Rt=1==vt,se=2==vt,De=3==vt,Ve=4==vt,fi=6==vt,Qe=7==vt,li=5==vt||fi;return function(Li,Ai,zi,Kn){for(var oo,Ms,Un=Pi(Li),$n=Et(Un),Ko=function(vt,Rt){return Te(vt),void 0===Rt?vt:da?da(vt,Rt):function(){return vt.apply(Rt,arguments)}}(Ai,zi),Co=eo($n),Gr=0,uo=Kn||Qs,So=Rt?uo(Li,Co):se||Qe?uo(Li,0):void 0;Co>Gr;Gr++)if((li||Gr in $n)&&(Ms=Ko(oo=$n[Gr],Gr,Un),vt))if(Rt)So[Gr]=Ms;else if(Ms)switch(vt){case 3:return!0;case 5:return oo;case 6:return Gr;case 2:ba(So,oo)}else switch(vt){case 4:return!1;case 7:ba(So,oo)}return fi?-1:De||Ve?Ve:So}},lu=[Wa(0),Wa(1),Wa(2),Wa(3),Wa(4),Wa(5),Wa(6),Wa(7)][2];function Vr(vt,Rt,se,De,Ve){return vt.left+Rt+se.width>De.width?(Ve.style.left="".concat(De.width-se.width-vt.left,"px"),!1):(Ve.style.left="".concat(Rt,"px"),!0)}function Ia(vt,Rt,se,De){return vt.left+vt.width-Rt-se.width<0?(De.style.left="".concat(-vt.left,"px"),!1):(De.style.right="".concat(Rt,"px"),!0)}To({target:"Array",proto:!0,forced:!Pa("filter")},{filter:function(Rt){return lu(this,Rt,arguments.length>1?arguments[1]:void 0)}});var lc=Pa("splice"),Ll=s.TypeError,bs=Math.max,Yl=Math.min,cc=9007199254740991,Ch="Maximum allowed length exceeded";function Ma(vt,Rt){vt.includes(Rt)&&vt.splice(vt.indexOf(Rt),1)}function Oc(vt,Rt,se){var De=this._options.positionPrecedence.slice(),Ve=Dc(),fi=ei(Rt).height+10,Qe=ei(Rt).width+20,li=vt.getBoundingClientRect(),Li="floating";li.bottom+fi>Ve.height&&Ma(De,"bottom"),li.top-fi<0&&Ma(De,"top"),li.right+Qe>Ve.width&&Ma(De,"right"),li.left-Qe<0&&Ma(De,"left");var zi,Kn,Ai=-1!==(Kn=(zi=se||"").indexOf("-"))?zi.substr(Kn):"";return se&&(se=se.split("-")[0]),De.length&&(Li=De.includes(se)?se:De[0]),["top","bottom"].includes(Li)&&(Li+=function(vt,Rt,se,De){var fi=Rt/2,Qe=Math.min(se.width,window.screen.width),li=["-left-aligned","-middle-aligned","-right-aligned"];return Qe-vt<Rt&&Ma(li,"-left-aligned"),(vt<fi||Qe-vt<fi)&&Ma(li,"-middle-aligned"),vt<Rt&&Ma(li,"-right-aligned"),li.length?li.includes(De)?De:li[0]:"-middle-aligned"}(li.left,Qe,Ve,Ai)),Li}function Is(vt,Rt,se,De){var fi,Qe,li,Li,Ai;if(De=De||!1,Rt.style.top=null,Rt.style.right=null,Rt.style.bottom=null,Rt.style.left=null,Rt.style.marginLeft=null,Rt.style.marginTop=null,se.style.display="inherit",this._introItems[this._currentStep])switch(Rt.className=["introjs-tooltip","string"==typeof(fi=this._introItems[this._currentStep]).tooltipClass?fi.tooltipClass:this._options.tooltipClass].filter(Boolean).join(" "),Rt.setAttribute("role","dialog"),"floating"!==(Ai=this._introItems[this._currentStep].position)&&this._options.autoPosition&&(Ai=Oc.call(this,vt,Rt,Ai)),li=ei(vt),Qe=ei(Rt),Li=Dc(),ta(Rt,"introjs-".concat(Ai)),Ai){case"top-right-aligned":se.className="introjs-arrow bottom-right";var Kn=0;Ia(li,Kn,Qe,Rt),Rt.style.bottom="".concat(li.height+20,"px");break;case"top-middle-aligned":se.className="introjs-arrow bottom-middle";var Un=li.width/2-Qe.width/2;De&&(Un+=5),Ia(li,Un,Qe,Rt)&&(Rt.style.right=null,Vr(li,Un,Qe,Li,Rt)),Rt.style.bottom="".concat(li.height+20,"px");break;case"top-left-aligned":case"top":se.className="introjs-arrow bottom",Vr(li,De?0:15,Qe,Li,Rt),Rt.style.bottom="".concat(li.height+20,"px");break;case"right":Rt.style.left="".concat(li.width+20,"px"),li.top+Qe.height>Li.height?(se.className="introjs-arrow left-bottom",Rt.style.top="-".concat(Qe.height-li.height-20,"px")):se.className="introjs-arrow left";break;case"left":!De&&!0===this._options.showStepNumbers&&(Rt.style.top="15px"),li.top+Qe.height>Li.height?(Rt.style.top="-".concat(Qe.height-li.height-20,"px"),se.className="introjs-arrow right-bottom"):se.className="introjs-arrow right",Rt.style.right="".concat(li.width+20,"px");break;case"floating":se.style.display="none",Rt.style.left="50%",Rt.style.top="50%",Rt.style.marginLeft="-".concat(Qe.width/2,"px"),Rt.style.marginTop="-".concat(Qe.height/2,"px");break;case"bottom-right-aligned":se.className="introjs-arrow top-right",Ia(li,Kn=0,Qe,Rt),Rt.style.top="".concat(li.height+20,"px");break;case"bottom-middle-aligned":se.className="introjs-arrow top-middle",Un=li.width/2-Qe.width/2,De&&(Un+=5),Ia(li,Un,Qe,Rt)&&(Rt.style.right=null,Vr(li,Un,Qe,Li,Rt)),Rt.style.top="".concat(li.height+20,"px");break;default:se.className="introjs-arrow top",Vr(li,0,Qe,Li,Rt),Rt.style.top="".concat(li.height+20,"px")}}function hl(){_(document.querySelectorAll(".introjs-showElement"),function(Rt){Ao(Rt,/introjs-[a-zA-Z]+/g)})}function Mr(vt,Rt){var se=document.createElement(vt);Rt=Rt||{};var De=/^(?:role|data-|aria-)/;for(var Ve in Rt){var fi=Rt[Ve];"style"===Ve?vo(se,fi):Ve.match(De)?se.setAttribute(Ve,fi):se[Ve]=fi}return se}function uc(vt,Rt,se){if(se){var De=Rt.style.opacity||"1";vo(Rt,{opacity:"0"}),window.setTimeout(function(){vo(Rt,{opacity:De})},10)}vt.appendChild(Rt)}function Xl(){return parseInt(this._currentStep+1,10)/this._introItems.length*100}function hc(){var vt=document.querySelector(".introjs-disableInteraction");null===vt&&(vt=Mr("div",{className:"introjs-disableInteraction"}),this._targetElement.appendChild(vt)),Xr.call(this,vt)}function jc(vt){var Rt=this,se=Mr("div",{className:"introjs-bullets"});!1===this._options.showBullets&&(se.style.display="none");var De=Mr("ul");De.setAttribute("role","tablist");var Ve=function(){Rt.goToStep(this.getAttribute("data-stepnumber"))};return _(this._introItems,function(fi,Qe){var li=fi.step,Li=Mr("li"),Ai=Mr("a");Li.setAttribute("role","presentation"),Ai.setAttribute("role","tab"),Ai.onclick=Ve,Qe===vt.step-1&&(Ai.className="active"),nt(Ai),Ai.innerHTML="&nbsp;",Ai.setAttribute("data-stepnumber",li),Li.appendChild(Ai),De.appendChild(Li)}),se.appendChild(De),se}function ea(vt,Rt){if(this._options.showBullets){var se=document.querySelector(".introjs-bullets");se.parentNode.replaceChild(jc.call(this,Rt),se)}}function Yc(vt,Rt){this._options.showBullets&&(vt.querySelector(".introjs-bullets li > a.active").className="",vt.querySelector('.introjs-bullets li > a[data-stepnumber="'.concat(Rt.step,'"]')).className="active")}function Po(){var vt=Mr("div");vt.className="introjs-progress",!1===this._options.showProgress&&(vt.style.display="none");var Rt=Mr("div",{className:"introjs-progressbar"});return this._options.progressBarAdditionalClass&&(Rt.className+=" "+this._options.progressBarAdditionalClass),Rt.setAttribute("role","progress"),Rt.setAttribute("aria-valuemin",0),Rt.setAttribute("aria-valuemax",100),Rt.setAttribute("aria-valuenow",Xl.call(this)),Rt.style.cssText="width:".concat(Xl.call(this),"%;"),vt.appendChild(Rt),vt}function Xc(vt){vt.querySelector(".introjs-progress .introjs-progressbar").style.cssText="width:".concat(Xl.call(this),"%;"),vt.querySelector(".introjs-progress .introjs-progressbar").setAttribute("aria-valuenow",Xl.call(this))}function dc(vt){var Rt=this;void 0!==this._introChangeCallback&&this._introChangeCallback.call(this,vt.element);var Qe,li,Li,se=this,De=document.querySelector(".introjs-helperLayer"),Ve=document.querySelector(".introjs-tooltipReferenceLayer"),fi="introjs-helperLayer";if("string"==typeof vt.highlightClass&&(fi+=" ".concat(vt.highlightClass)),"string"==typeof this._options.highlightClass&&(fi+=" ".concat(this._options.highlightClass)),null!==De&&null!==Ve){var Ai=Ve.querySelector(".introjs-helperNumberLayer"),zi=Ve.querySelector(".introjs-tooltiptext"),Kn=Ve.querySelector(".introjs-tooltip-title"),Un=Ve.querySelector(".introjs-arrow"),$n=Ve.querySelector(".introjs-tooltip");Li=Ve.querySelector(".introjs-skipbutton"),li=Ve.querySelector(".introjs-prevbutton"),Qe=Ve.querySelector(".introjs-nextbutton"),De.className=fi,$n.style.opacity=0,$n.style.display="none",Wl.call(se,vt),Xr.call(se,De),Xr.call(se,Ve),hl(),se._lastShowElementTimer&&window.clearTimeout(se._lastShowElementTimer),se._lastShowElementTimer=window.setTimeout(function(){null!==Ai&&(Ai.innerHTML="".concat(vt.step," of ").concat(Rt._introItems.length)),zi.innerHTML=vt.intro,Kn.innerHTML=vt.title,$n.style.display="block",Is.call(se,vt.element,$n,Un),Yc.call(se,Ve,vt),Xc.call(se,Ve),$n.style.opacity=1,(null!=Qe&&/introjs-donebutton/gi.test(Qe.className)||null!=Qe)&&Qe.focus(),ft.call(se,vt.scrollTo,vt,zi)},350)}else{var Ko=Mr("div",{className:fi}),Co=Mr("div",{className:"introjs-tooltipReferenceLayer"}),Gr=Mr("div",{className:"introjs-arrow"}),uo=Mr("div",{className:"introjs-tooltip"}),So=Mr("div",{className:"introjs-tooltiptext"}),oo=Mr("div",{className:"introjs-tooltip-header"}),Ms=Mr("h1",{className:"introjs-tooltip-title"}),os=Mr("div");vo(Ko,{"box-shadow":"0 0 1px 2px rgba(33, 33, 33, 0.8), rgba(33, 33, 33, ".concat(se._options.overlayOpacity.toString(),") 0 0 0 5000px")}),Wl.call(se,vt),Xr.call(se,Ko),Xr.call(se,Co),uc(this._targetElement,Ko,!0),uc(this._targetElement,Co),So.innerHTML=vt.intro,Ms.innerHTML=vt.title,os.className="introjs-tooltipbuttons",!1===this._options.showButtons&&(os.style.display="none"),oo.appendChild(Ms),uo.appendChild(oo),uo.appendChild(So),uo.appendChild(jc.call(this,vt)),uo.appendChild(Po.call(this));var ys=Mr("div");!0===this._options.showStepNumbers&&(ys.className="introjs-helperNumberLayer",ys.innerHTML="".concat(vt.step," of ").concat(this._introItems.length),uo.appendChild(ys)),uo.appendChild(Gr),Co.appendChild(uo),(Qe=Mr("a")).onclick=function(){se._introItems.length-1!==se._currentStep?za.call(se):/introjs-donebutton/gi.test(Qe.className)&&("function"==typeof se._introCompleteCallback&&se._introCompleteCallback.call(se,se._currentStep,"done"),na.call(se,se._targetElement))},nt(Qe),Qe.innerHTML=this._options.nextLabel,(li=Mr("a")).onclick=function(){0!==se._currentStep&&Aa.call(se)},nt(li),li.innerHTML=this._options.prevLabel,nt(Li=Mr("a",{className:"introjs-skipbutton"})),Li.innerHTML=this._options.skipLabel,Li.onclick=function(){se._introItems.length-1===se._currentStep&&"function"==typeof se._introCompleteCallback&&se._introCompleteCallback.call(se,se._currentStep,"skip"),"function"==typeof se._introSkipCallback&&se._introSkipCallback.call(se),na.call(se,se._targetElement)},oo.appendChild(Li),this._introItems.length>1&&os.appendChild(li),os.appendChild(Qe),uo.appendChild(os),Is.call(se,vt.element,uo,Gr),ft.call(this,vt.scrollTo,vt,uo)}var ml=se._targetElement.querySelector(".introjs-disableInteraction");ml&&ml.parentNode.removeChild(ml),vt.disableInteraction&&hc.call(se),0===this._currentStep&&this._introItems.length>1?(null!=Qe&&(Qe.className="".concat(this._options.buttonClass," introjs-nextbutton"),Qe.innerHTML=this._options.nextLabel),!0===this._options.hidePrev?(null!=li&&(li.className="".concat(this._options.buttonClass," introjs-prevbutton introjs-hidden")),null!=Qe&&ta(Qe,"introjs-fullbutton")):null!=li&&(li.className="".concat(this._options.buttonClass," introjs-prevbutton introjs-disabled"))):this._introItems.length-1===this._currentStep||1===this._introItems.length?(null!=li&&(li.className="".concat(this._options.buttonClass," introjs-prevbutton")),!0===this._options.hideNext?(null!=Qe&&(Qe.className="".concat(this._options.buttonClass," introjs-nextbutton introjs-hidden")),null!=li&&ta(li,"introjs-fullbutton")):null!=Qe&&(!0===this._options.nextToDone?(Qe.innerHTML=this._options.doneLabel,ta(Qe,"".concat(this._options.buttonClass," introjs-nextbutton introjs-donebutton"))):Qe.className="".concat(this._options.buttonClass," introjs-nextbutton introjs-disabled"))):(null!=li&&(li.className="".concat(this._options.buttonClass," introjs-prevbutton")),null!=Qe&&(Qe.className="".concat(this._options.buttonClass," introjs-nextbutton"),Qe.innerHTML=this._options.nextLabel)),null!=li&&li.setAttribute("role","button"),null!=Qe&&Qe.setAttribute("role","button"),null!=Li&&Li.setAttribute("role","button"),null!=Qe&&Qe.focus(),function(vt){var Rt=vt.element;ta(Rt,"introjs-showElement");var se=Va(Rt,"position");"absolute"!==se&&"relative"!==se&&"sticky"!==se&&"fixed"!==se&&ta(Rt,"introjs-relativePosition")}(vt),void 0!==this._introAfterChangeCallback&&this._introAfterChangeCallback.call(this,vt.element)}function cu(vt){this._currentStep=vt-2,void 0!==this._introItems&&za.call(this)}function pc(vt){this._currentStepNumber=vt,void 0!==this._introItems&&za.call(this)}function za(){var vt=this;this._direction="forward",void 0!==this._currentStepNumber&&_(this._introItems,function(De,Ve){De.step===vt._currentStepNumber&&(vt._currentStep=Ve-1,vt._currentStepNumber=void 0)}),void 0===this._currentStep?this._currentStep=0:++this._currentStep;var Rt=this._introItems[this._currentStep],se=!0;return void 0!==this._introBeforeChangeCallback&&(se=this._introBeforeChangeCallback.call(this,Rt&&Rt.element)),!1===se?(--this._currentStep,!1):this._introItems.length<=this._currentStep?("function"==typeof this._introCompleteCallback&&this._introCompleteCallback.call(this,this._currentStep,"end"),void na.call(this,this._targetElement)):void dc.call(this,Rt)}function Aa(){if(this._direction="backward",0===this._currentStep)return!1;--this._currentStep;var vt=this._introItems[this._currentStep],Rt=!0;if(void 0!==this._introBeforeChangeCallback&&(Rt=this._introBeforeChangeCallback.call(this,vt&&vt.element)),!1===Rt)return++this._currentStep,!1;dc.call(this,vt)}function Kl(){return this._currentStep}function Rl(vt){var Rt=void 0===vt.code?vt.which:vt.code;if(null===Rt&&(Rt=null===vt.charCode?vt.keyCode:vt.charCode),"Escape"!==Rt&&27!==Rt||!0!==this._options.exitOnEsc){if("ArrowLeft"===Rt||37===Rt)Aa.call(this);else if("ArrowRight"===Rt||39===Rt)za.call(this);else if("Enter"===Rt||"NumpadEnter"===Rt||13===Rt){var se=vt.target||vt.srcElement;se&&se.className.match("introjs-prevbutton")?Aa.call(this):se&&se.className.match("introjs-skipbutton")?(this._introItems.length-1===this._currentStep&&"function"==typeof this._introCompleteCallback&&this._introCompleteCallback.call(this,this._currentStep,"skip"),na.call(this,this._targetElement)):se&&se.getAttribute("data-stepnumber")?se.click():za.call(this),vt.preventDefault?vt.preventDefault():vt.returnValue=!1}}else na.call(this,this._targetElement)}function qo(vt){if(null===vt||"object"!==$(vt)||void 0!==vt.nodeType)return vt;var Rt={};for(var se in vt)Rt[se]=void 0!==window.jQuery&&vt[se]instanceof window.jQuery?vt[se]:qo(vt[se]);return Rt}function Il(vt){var Rt=document.querySelector(".introjs-hints");return Rt?Rt.querySelectorAll(vt):[]}function Jl(vt){var Rt=Il('.introjs-hint[data-step="'.concat(vt,'"]'))[0];tl.call(this),Rt&&ta(Rt,"introjs-hidehint"),void 0!==this._hintCloseCallback&&this._hintCloseCallback.call(this,vt)}function fc(){var vt=this;_(Il(".introjs-hint"),function(se){Jl.call(vt,se.getAttribute("data-step"))})}function Kc(){var vt=this,Rt=Il(".introjs-hint");Rt&&Rt.length?_(Rt,function(se){Jc.call(vt,se.getAttribute("data-step"))}):gc.call(this,this._targetElement)}function Jc(vt){var Rt=Il('.introjs-hint[data-step="'.concat(vt,'"]'))[0];Rt&&Ao(Rt,/introjs-hidehint/g)}function ia(){var vt=this;_(Il(".introjs-hint"),function(se){Nl.call(vt,se.getAttribute("data-step"))}),e.off(document,"click",tl,this,!1),e.off(window,"resize",mc,this,!0),this._hintsAutoRefreshFunction&&e.off(window,"scroll",this._hintsAutoRefreshFunction,this,!0)}function Nl(vt){var Rt=Il('.introjs-hint[data-step="'.concat(vt,'"]'))[0];Rt&&Rt.parentNode.removeChild(Rt)}function $l(){var vt=this,Rt=this,se=document.querySelector(".introjs-hints");null===se&&(se=Mr("div",{className:"introjs-hints"}));_(this._introItems,function(Ve,fi){if(!document.querySelector('.introjs-hint[data-step="'.concat(fi,'"]'))){var Qe=Mr("a",{className:"introjs-hint"});nt(Qe),Qe.onclick=function(fi){return function(Qe){var li=Qe||window.event;li.stopPropagation&&li.stopPropagation(),null!==li.cancelBubble&&(li.cancelBubble=!0),pa.call(Rt,fi)}}(fi),Ve.hintAnimation||ta(Qe,"introjs-hint-no-anim"),Ge(Ve.element)&&ta(Qe,"introjs-fixedhint");var li=Mr("div",{className:"introjs-hint-dot"}),Li=Mr("div",{className:"introjs-hint-pulse"});Qe.appendChild(li),Qe.appendChild(Li),Qe.setAttribute("data-step",fi),Ve.targetElement=Ve.element,Ve.element=Qe,xc.call(vt,Ve.hintPosition,Qe,Ve.targetElement),se.appendChild(Qe)}}),document.body.appendChild(se),void 0!==this._hintsAddedCallback&&this._hintsAddedCallback.call(this),this._options.hintAutoRefreshInterval>=0&&(this._hintsAutoRefreshFunction=function(vt,Rt){var De,se=this;return function(){for(var Ve=arguments.length,fi=new Array(Ve),Qe=0;Qe<Ve;Qe++)fi[Qe]=arguments[Qe];clearTimeout(De),De=setTimeout(function(){vt.apply(se,fi)},Rt)}}(function(){return mc.call(vt)},this._options.hintAutoRefreshInterval),e.on(window,"scroll",this._hintsAutoRefreshFunction,this,!0))}function xc(vt,Rt,se){var De=Rt.style,Ve=ei.call(this,se);switch(vt){default:case"top-left":De.left="".concat(Ve.left,"px"),De.top="".concat(Ve.top,"px");break;case"top-right":De.left="".concat(Ve.left+Ve.width-20,"px"),De.top="".concat(Ve.top,"px");break;case"bottom-left":De.left="".concat(Ve.left,"px"),De.top="".concat(Ve.top+Ve.height-20,"px");break;case"bottom-right":De.left="".concat(Ve.left+Ve.width-20,"px"),De.top="".concat(Ve.top+Ve.height-20,"px");break;case"middle-left":De.left="".concat(Ve.left,"px"),De.top="".concat(Ve.top+(Ve.height-20)/2,"px");break;case"middle-right":De.left="".concat(Ve.left+Ve.width-20,"px"),De.top="".concat(Ve.top+(Ve.height-20)/2,"px");break;case"middle-middle":De.left="".concat(Ve.left+(Ve.width-20)/2,"px"),De.top="".concat(Ve.top+(Ve.height-20)/2,"px");break;case"bottom-middle":De.left="".concat(Ve.left+(Ve.width-20)/2,"px"),De.top="".concat(Ve.top+Ve.height-20,"px");break;case"top-middle":De.left="".concat(Ve.left+(Ve.width-20)/2,"px"),De.top="".concat(Ve.top,"px")}}function pa(vt){var Rt=document.querySelector('.introjs-hint[data-step="'.concat(vt,'"]')),se=this._introItems[vt];void 0!==this._hintClickCallback&&this._hintClickCallback.call(this,Rt,se,vt);var De=tl.call(this);if(parseInt(De,10)!==vt){var Ve=Mr("div",{className:"introjs-tooltip"}),fi=Mr("div"),Qe=Mr("div"),li=Mr("div");Ve.onclick=function(zi){zi.stopPropagation?zi.stopPropagation():zi.cancelBubble=!0},fi.className="introjs-tooltiptext";var Li=Mr("p");if(Li.innerHTML=se.hint,fi.appendChild(Li),this._options.hintShowButton){var Ai=Mr("a");Ai.className=this._options.buttonClass,Ai.setAttribute("role","button"),Ai.innerHTML=this._options.hintButtonLabel,Ai.onclick=Jl.bind(this,vt),fi.appendChild(Ai)}Qe.className="introjs-arrow",Ve.appendChild(Qe),Ve.appendChild(fi),this._currentStep=Rt.getAttribute("data-step"),li.className="introjs-tooltipReferenceLayer introjs-hintReference",li.setAttribute("data-step",Rt.getAttribute("data-step")),Xr.call(this,li),li.appendChild(Ve),document.body.appendChild(li),Is.call(this,Rt,Ve,Qe,!0)}}function tl(){var vt=document.querySelector(".introjs-hintReference");if(vt){var Rt=vt.getAttribute("data-step");return vt.parentNode.removeChild(vt),Rt}}function gc(vt){var Rt=this;if(this._introItems=[],this._options.hints)_(this._options.hints,function(De){var Ve=qo(De);"string"==typeof Ve.element&&(Ve.element=document.querySelector(Ve.element)),Ve.hintPosition=Ve.hintPosition||Rt._options.hintPosition,Ve.hintAnimation=Ve.hintAnimation||Rt._options.hintAnimation,null!==Ve.element&&Rt._introItems.push(Ve)});else{var se=vt.querySelectorAll("*[data-hint]");if(!se||!se.length)return!1;_(se,function(De){var Ve=De.getAttribute("data-hintanimation");Ve=Ve?"true"===Ve:Rt._options.hintAnimation,Rt._introItems.push({element:De,hint:De.getAttribute("data-hint"),hintPosition:De.getAttribute("data-hintposition")||Rt._options.hintPosition,hintAnimation:Ve,tooltipClass:De.getAttribute("data-tooltipclass"),position:De.getAttribute("data-position")||Rt._options.tooltipPosition})})}$l.call(this),e.on(document,"click",tl,this,!1),e.on(window,"resize",mc,this,!0)}function mc(){var vt=this;_(this._introItems,function(Rt){var se=Rt.targetElement;void 0!==se&&xc.call(vt,Rt.hintPosition,Rt.element,se)})}To({target:"Array",proto:!0,forced:!lc},{splice:function(Rt,se){var li,Li,Ai,zi,Kn,Un,De=Pi(this),Ve=eo(De),fi=oa(Rt,Ve),Qe=arguments.length;if(0===Qe?li=Li=0:1===Qe?(li=0,Li=Ve-fi):(li=Qe-2,Li=Yl(bs($o(se),0),Ve-fi)),Ve+li-Li>cc)throw Ll(Ch);for(Ai=Qs(De,Li),zi=0;zi<Li;zi++)(Kn=fi+zi)in De&&er(Ai,zi,De[Kn]);if(Ai.length=Li,li<Li){for(zi=fi;zi<Ve-Li;zi++)Un=zi+li,(Kn=zi+Li)in De?De[Un]=De[Kn]:delete De[Un];for(zi=Ve;zi>Ve-Li+li;zi--)delete De[zi-1]}else if(li>Li)for(zi=Ve-Li;zi>fi;zi--)Un=zi+li-1,(Kn=zi+Li-1)in De?De[Un]=De[Kn]:delete De[Un];for(zi=0;zi<li;zi++)De[zi+fi]=arguments[zi+2];return De.length=Ve-Li+li,Ai}});var kc=Math.floor,$c=function(vt,Rt){var se=vt.length,De=kc(se/2);return se<8?Oa(vt,Rt):co(vt,$c(xl(vt,0,De),Rt),$c(xl(vt,De),Rt),Rt)},Oa=function(vt,Rt){for(var Ve,fi,se=vt.length,De=1;De<se;){for(fi=De,Ve=vt[De];fi&&Rt(vt[fi-1],Ve)>0;)vt[fi]=vt[--fi];fi!==De++&&(vt[fi]=Ve)}return vt},co=function(vt,Rt,se,De){for(var Ve=Rt.length,fi=se.length,Qe=0,li=0;Qe<Ve||li<fi;)vt[Qe+li]=Qe<Ve&&li<fi?De(Rt[Qe],se[li])<=0?Rt[Qe++]:se[li++]:Qe<Ve?Rt[Qe++]:se[li++];return vt},Pl=$c,Zl=He.match(/firefox\/(\d+)/i),_c=!!Zl&&+Zl[1],xu=/MSIE|Trident/.test(He),dl=He.match(/AppleWebKit\/(\d+)\./),ku=!!dl&&+dl[1],Fl=[],Lu=bt(Fl.sort),vc=bt(Fl.push),Zc=u(function(){Fl.sort(void 0)}),Ml=u(function(){Fl.sort(null)}),el=Mc("sort"),pl=!u(function(){if(Gt)return Gt<70;if(!(_c&&_c>3)){if(xu)return!0;if(ku)return ku<603;var Rt,se,De,Ve,vt="";for(Rt=65;Rt<76;Rt++){switch(se=String.fromCharCode(Rt),Rt){case 66:case 69:case 70:case 72:De=3;break;case 68:case 71:De=4;break;default:De=2}for(Ve=0;Ve<47;Ve++)Fl.push({k:se+Ve,v:De})}for(Fl.sort(function(fi,Qe){return Qe.v-fi.v}),Ve=0;Ve<Fl.length;Ve++)se=Fl[Ve].k.charAt(0),vt.charAt(vt.length-1)!==se&&(vt+=se);return"DGBEFHACIJK"!==vt}});function fl(vt){var Rt=this,se=vt.querySelectorAll("*[data-intro]"),De=[];if(this._options.steps)_(this._options.steps,function(Ai){var zi=qo(Ai);if(zi.step=De.length+1,zi.title=zi.title||"","string"==typeof zi.element&&(zi.element=document.querySelector(zi.element)),null==zi.element){var Kn=document.querySelector(".introjsFloatingElement");null===Kn&&(Kn=Mr("div",{className:"introjsFloatingElement"}),document.body.appendChild(Kn)),zi.element=Kn,zi.position="floating"}zi.position=zi.position||Rt._options.tooltipPosition,zi.scrollTo=zi.scrollTo||Rt._options.scrollTo,void 0===zi.disableInteraction&&(zi.disableInteraction=Rt._options.disableInteraction),null!==zi.element&&De.push(zi)});else{var fi;if(se.length<1)return[];_(se,function(Ai){if((!Rt._options.group||Ai.getAttribute("data-intro-group")===Rt._options.group)&&"none"!==Ai.style.display){var zi=parseInt(Ai.getAttribute("data-step"),10);fi=Ai.hasAttribute("data-disable-interaction")?!!Ai.getAttribute("data-disable-interaction"):Rt._options.disableInteraction,zi>0&&(De[zi-1]={element:Ai,title:Ai.getAttribute("data-title")||"",intro:Ai.getAttribute("data-intro"),step:parseInt(Ai.getAttribute("data-step"),10),tooltipClass:Ai.getAttribute("data-tooltipclass"),highlightClass:Ai.getAttribute("data-highlightclass"),position:Ai.getAttribute("data-position")||Rt._options.tooltipPosition,scrollTo:Ai.getAttribute("data-scrollto")||Rt._options.scrollTo,disableInteraction:fi})}});var Qe=0;_(se,function(Ai){if((!Rt._options.group||Ai.getAttribute("data-intro-group")===Rt._options.group)&&null===Ai.getAttribute("data-step")){for(;void 0!==De[Qe];)Qe++;fi=Ai.hasAttribute("data-disable-interaction")?!!Ai.getAttribute("data-disable-interaction"):Rt._options.disableInteraction,De[Qe]={element:Ai,title:Ai.getAttribute("data-title")||"",intro:Ai.getAttribute("data-intro"),step:Qe+1,tooltipClass:Ai.getAttribute("data-tooltipclass"),highlightClass:Ai.getAttribute("data-highlightclass"),position:Ai.getAttribute("data-position")||Rt._options.tooltipPosition,scrollTo:Ai.getAttribute("data-scrollto")||Rt._options.scrollTo,disableInteraction:fi}}})}for(var li=[],Li=0;Li<De.length;Li++)De[Li]&&li.push(De[Li]);return(De=li).sort(function(Ai,zi){return Ai.step-zi.step}),De}function Ea(vt){var Rt=document.querySelector(".introjs-tooltipReferenceLayer"),se=document.querySelector(".introjs-helperLayer"),De=document.querySelector(".introjs-disableInteraction");if(Xr.call(this,se),Xr.call(this,Rt),Xr.call(this,De),vt&&(this._introItems=fl.call(this,this._targetElement),ea.call(this,Rt,this._introItems[this._currentStep]),Xc.call(this,Rt)),null!=this._currentStep){var Ve=document.querySelector(".introjs-arrow"),fi=document.querySelector(".introjs-tooltip");fi&&Ve&&Is.call(this,this._introItems[this._currentStep].element,fi,Ve)}return mc.call(this),this}function il(){Ea.call(this)}function gl(vt,Rt){if(vt&&vt.parentElement){var se=vt.parentElement;Rt?(vo(vt,{opacity:"0"}),window.setTimeout(function(){try{se.removeChild(vt)}catch(De){}},500)):se.removeChild(vt)}}function na(vt,Rt){var se=!0;if(void 0!==this._introBeforeExitCallback&&(se=this._introBeforeExitCallback.call(this)),Rt||!1!==se){var De=vt.querySelectorAll(".introjs-overlay");De&&De.length&&_(De,function(Li){return gl(Li)}),gl(vt.querySelector(".introjs-helperLayer"),!0),gl(vt.querySelector(".introjs-tooltipReferenceLayer")),gl(vt.querySelector(".introjs-disableInteraction")),gl(document.querySelector(".introjsFloatingElement")),hl(),e.off(window,"keydown",Rl,this,!0),e.off(window,"resize",il,this,!0),void 0!==this._introExitCallback&&this._introExitCallback.call(this),this._currentStep=void 0}}function Pu(vt){var Rt=this,se=Mr("div",{className:"introjs-overlay"});return vo(se,{top:0,bottom:0,left:0,right:0,position:"fixed"}),vt.appendChild(se),!0===this._options.exitOnOverlayClick&&(vo(se,{cursor:"pointer"}),se.onclick=function(){na.call(Rt,vt)}),!0}function Ql(vt){void 0!==this._introStartCallback&&this._introStartCallback.call(this,vt);var Rt=fl.call(this,vt);return 0===Rt.length||(this._introItems=Rt,Pu.call(this,vt)&&(za.call(this),this._options.keyboardNavigation&&e.on(window,"keydown",Rl,this,!0),e.on(window,"resize",il,this,!0))),!1}function ds(vt){this._targetElement=vt,this._introItems=[],this._options={nextLabel:"Next",prevLabel:"Back",skipLabel:"\xd7",doneLabel:"Done",hidePrev:!1,hideNext:!1,nextToDone:!0,tooltipPosition:"bottom",tooltipClass:"",group:"",highlightClass:"",exitOnEsc:!0,exitOnOverlayClick:!0,showStepNumbers:!1,keyboardNavigation:!0,showButtons:!0,showBullets:!0,showProgress:!1,scrollToElement:!0,scrollTo:"element",scrollPadding:30,overlayOpacity:.5,autoPosition:!0,positionPrecedence:["bottom","top","right","left"],disableInteraction:!1,helperElementPadding:10,hintPosition:"top-middle",hintButtonLabel:"Got it",hintShowButton:!0,hintAutoRefreshInterval:10,hintAnimation:!0,buttonClass:"introjs-button",progressBarAdditionalClass:!1}}To({target:"Array",proto:!0,forced:Zc||!Ml||!el||!pl},{sort:function(Rt){void 0!==Rt&&Te(Rt);var se=Pi(this);if(pl)return void 0===Rt?Lu(se):Lu(se,Rt);var fi,Qe,De=[],Ve=eo(se);for(Qe=0;Qe<Ve;Qe++)Qe in se&&vc(De,se[Qe]);for(Pl(De,function(vt){return function(Rt,se){return void 0===se?-1:void 0===Rt?1:void 0!==vt?+vt(Rt,se)||0:Lr(Rt)>Lr(se)?1:-1}}(Rt)),fi=De.length,Qe=0;Qe<fi;)se[Qe]=De[Qe++];for(;Qe<Ve;)delete se[Qe++];return se}});var Lc=function vt(Rt){var se;if("object"===$(Rt))se=new ds(Rt);else if("string"==typeof Rt){var De=document.querySelector(Rt);if(!De)throw new Error("There is no element with given selector.");se=new ds(De)}else se=new ds(document.body);return vt.instances[T(se,"introjs-instance")]=se,se};return Lc.version="4.3.0",Lc.instances={},Lc.fn=ds.prototype={clone:function(){return new ds(this)},setOption:function(Rt,se){return this._options[Rt]=se,this},setOptions:function(Rt){return this._options=function(vt,Rt){var De,se={};for(De in vt)se[De]=vt[De];for(De in Rt)se[De]=Rt[De];return se}(this._options,Rt),this},start:function(){return Ql.call(this,this._targetElement),this},goToStep:function(Rt){return cu.call(this,Rt),this},addStep:function(Rt){return this._options.steps||(this._options.steps=[]),this._options.steps.push(Rt),this},addSteps:function(Rt){if(Rt.length){for(var se=0;se<Rt.length;se++)this.addStep(Rt[se]);return this}},goToStepNumber:function(Rt){return pc.call(this,Rt),this},nextStep:function(){return za.call(this),this},previousStep:function(){return Aa.call(this),this},currentStep:function(){return Kl.call(this)},exit:function(Rt){return na.call(this,this._targetElement,Rt),this},refresh:function(Rt){return Ea.call(this,Rt),this},onbeforechange:function(Rt){if("function"!=typeof Rt)throw new Error("Provided callback for onbeforechange was not a function");return this._introBeforeChangeCallback=Rt,this},onchange:function(Rt){if("function"!=typeof Rt)throw new Error("Provided callback for onchange was not a function.");return this._introChangeCallback=Rt,this},onafterchange:function(Rt){if("function"!=typeof Rt)throw new Error("Provided callback for onafterchange was not a function");return this._introAfterChangeCallback=Rt,this},oncomplete:function(Rt){if("function"!=typeof Rt)throw new Error("Provided callback for oncomplete was not a function.");return this._introCompleteCallback=Rt,this},onhintsadded:function(Rt){if("function"!=typeof Rt)throw new Error("Provided callback for onhintsadded was not a function.");return this._hintsAddedCallback=Rt,this},onhintclick:function(Rt){if("function"!=typeof Rt)throw new Error("Provided callback for onhintclick was not a function.");return this._hintClickCallback=Rt,this},onhintclose:function(Rt){if("function"!=typeof Rt)throw new Error("Provided callback for onhintclose was not a function.");return this._hintCloseCallback=Rt,this},onstart:function(Rt){if("function"!=typeof Rt)throw new Error("Provided callback for onstart was not a function.");return this._introStartCallback=Rt,this},onexit:function(Rt){if("function"!=typeof Rt)throw new Error("Provided callback for onexit was not a function.");return this._introExitCallback=Rt,this},onskip:function(Rt){if("function"!=typeof Rt)throw new Error("Provided callback for onskip was not a function.");return this._introSkipCallback=Rt,this},onbeforeexit:function(Rt){if("function"!=typeof Rt)throw new Error("Provided callback for onbeforeexit was not a function.");return this._introBeforeExitCallback=Rt,this},addHints:function(){return gc.call(this,this._targetElement),this},hideHint:function(Rt){return Jl.call(this,Rt),this},hideHints:function(){return fc.call(this),this},showHint:function(Rt){return Jc.call(this,Rt),this},showHints:function(){return Kc.call(this),this},removeHints:function(){return ia.call(this),this},removeHint:function(Rt){return Nl().call(this,Rt),this},showHintDialog:function(Rt){return pa.call(this,Rt),this}},Lc}()},61135:(U,$,m)=>{"use strict";m.d($,{X:()=>_});var T=m(77579);class _ extends T.x{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){const{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}}},68306:(U,$,m)=>{"use strict";m.d($,{y:()=>x});var T=m(70930),_=m(50727),e=m(48822),t=m(44671);var s=m(42416),u=m(30576),b=m(72806);let x=(()=>{class et{constructor(Pt){Pt&&(this._subscribe=Pt)}lift(Pt){const pt=new et;return pt.source=this,pt.operator=Pt,pt}subscribe(Pt,pt,It){const Ht=function(et){return et&&et instanceof T.Lv||function(et){return et&&(0,u.m)(et.next)&&(0,u.m)(et.error)&&(0,u.m)(et.complete)}(et)&&(0,_.Nn)(et)}(Pt)?Pt:new T.Hp(Pt,pt,It);return(0,b.x)(()=>{const{operator:Jt,source:Ct}=this;Ht.add(Jt?Jt.call(Ht,Ct):Ct?this._subscribe(Ht):this._trySubscribe(Ht))}),Ht}_trySubscribe(Pt){try{return this._subscribe(Pt)}catch(pt){Pt.error(pt)}}forEach(Pt,pt){return new(pt=B(pt))((It,Ht)=>{let Jt;Jt=this.subscribe(Ct=>{try{Pt(Ct)}catch(bt){Ht(bt),null==Jt||Jt.unsubscribe()}},Ht,It)})}_subscribe(Pt){var pt;return null===(pt=this.source)||void 0===pt?void 0:pt.subscribe(Pt)}[e.L](){return this}pipe(...Pt){return function(et){return 0===et.length?t.y:1===et.length?et[0]:function(Pt){return et.reduce((pt,It)=>It(pt),Pt)}}(Pt)(this)}toPromise(Pt){return new(Pt=B(Pt))((pt,It)=>{let Ht;this.subscribe(Jt=>Ht=Jt,Jt=>It(Jt),()=>pt(Ht))})}}return et.create=Tt=>new et(Tt),et})();function B(et){var Tt;return null!==(Tt=null!=et?et:s.v.Promise)&&void 0!==Tt?Tt:Promise}},77579:(U,$,m)=>{"use strict";m.d($,{x:()=>s});var T=m(68306),_=m(50727);const t=(0,m(83888).d)(b=>function(){b(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var n=m(38737),r=m(72806);let s=(()=>{class b extends T.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(B){const Z=new u(this,this);return Z.operator=B,Z}_throwIfClosed(){if(this.closed)throw new t}next(B){(0,r.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const Z=this.observers.slice();for(const ot of Z)ot.next(B)}})}error(B){(0,r.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=B;const{observers:Z}=this;for(;Z.length;)Z.shift().error(B)}})}complete(){(0,r.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:B}=this;for(;B.length;)B.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var B;return(null===(B=this.observers)||void 0===B?void 0:B.length)>0}_trySubscribe(B){return this._throwIfClosed(),super._trySubscribe(B)}_subscribe(B){return this._throwIfClosed(),this._checkFinalizedStatuses(B),this._innerSubscribe(B)}_innerSubscribe(B){const{hasError:Z,isStopped:ot,observers:et}=this;return Z||ot?_.Lc:(et.push(B),new _.w0(()=>(0,n.P)(et,B)))}_checkFinalizedStatuses(B){const{hasError:Z,thrownError:ot,isStopped:et}=this;Z?B.error(ot):et&&B.complete()}asObservable(){const B=new T.y;return B.source=this,B}}return b.create=(x,B)=>new u(x,B),b})();class u extends s{constructor(x,B){super(),this.destination=x,this.source=B}next(x){var B,Z;null===(Z=null===(B=this.destination)||void 0===B?void 0:B.next)||void 0===Z||Z.call(B,x)}error(x){var B,Z;null===(Z=null===(B=this.destination)||void 0===B?void 0:B.error)||void 0===Z||Z.call(B,x)}complete(){var x,B;null===(B=null===(x=this.destination)||void 0===x?void 0:x.complete)||void 0===B||B.call(x)}_subscribe(x){var B,Z;return null!==(Z=null===(B=this.source)||void 0===B?void 0:B.subscribe(x))&&void 0!==Z?Z:_.Lc}}},70930:(U,$,m)=>{"use strict";m.d($,{Hp:()=>ot,Lv:()=>Z});var T=m(30576),_=m(50727),e=m(42416),t=m(87849),n=m(25032);const r=b("C",void 0,void 0);function b(It,Ht,Jt){return{kind:It,value:Ht,error:Jt}}var x=m(43410),B=m(72806);class Z extends _.w0{constructor(Ht){super(),this.isStopped=!1,Ht?(this.destination=Ht,(0,_.Nn)(Ht)&&Ht.add(this)):this.destination=pt}static create(Ht,Jt,Ct){return new ot(Ht,Jt,Ct)}next(Ht){this.isStopped?Pt(b("N",Ht,void 0),this):this._next(Ht)}error(Ht){this.isStopped?Pt(b("E",void 0,Ht),this):(this.isStopped=!0,this._error(Ht))}complete(){this.isStopped?Pt(r,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ht){this.destination.next(Ht)}_error(Ht){try{this.destination.error(Ht)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class ot extends Z{constructor(Ht,Jt,Ct){let bt;if(super(),(0,T.m)(Ht))bt=Ht;else if(Ht){let st;({next:bt,error:Jt,complete:Ct}=Ht),this&&e.v.useDeprecatedNextContext?(st=Object.create(Ht),st.unsubscribe=()=>this.unsubscribe()):st=Ht,bt=null==bt?void 0:bt.bind(st),Jt=null==Jt?void 0:Jt.bind(st),Ct=null==Ct?void 0:Ct.bind(st)}this.destination={next:bt?et(bt):n.Z,error:et(null!=Jt?Jt:Tt),complete:Ct?et(Ct):n.Z}}}function et(It,Ht){return(...Jt)=>{try{It(...Jt)}catch(Ct){e.v.useDeprecatedSynchronousErrorHandling?(0,B.O)(Ct):(0,t.h)(Ct)}}}function Tt(It){throw It}function Pt(It,Ht){const{onStoppedNotification:Jt}=e.v;Jt&&x.z.setTimeout(()=>Jt(It,Ht))}const pt={closed:!0,next:n.Z,error:Tt,complete:n.Z}},50727:(U,$,m)=>{"use strict";m.d($,{Lc:()=>r,w0:()=>n,Nn:()=>s});var T=m(30576);const e=(0,m(83888).d)(b=>function(B){b(this),this.message=B?`${B.length} errors occurred during unsubscription:\n${B.map((Z,ot)=>`${ot+1}) ${Z.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=B});var t=m(38737);class n{constructor(x){this.initialTeardown=x,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let x;if(!this.closed){this.closed=!0;const{_parentage:B}=this;if(B)if(this._parentage=null,Array.isArray(B))for(const et of B)et.remove(this);else B.remove(this);const{initialTeardown:Z}=this;if((0,T.m)(Z))try{Z()}catch(et){x=et instanceof e?et.errors:[et]}const{_teardowns:ot}=this;if(ot){this._teardowns=null;for(const et of ot)try{u(et)}catch(Tt){x=null!=x?x:[],Tt instanceof e?x=[...x,...Tt.errors]:x.push(Tt)}}if(x)throw new e(x)}}add(x){var B;if(x&&x!==this)if(this.closed)u(x);else{if(x instanceof n){if(x.closed||x._hasParent(this))return;x._addParent(this)}(this._teardowns=null!==(B=this._teardowns)&&void 0!==B?B:[]).push(x)}}_hasParent(x){const{_parentage:B}=this;return B===x||Array.isArray(B)&&B.includes(x)}_addParent(x){const{_parentage:B}=this;this._parentage=Array.isArray(B)?(B.push(x),B):B?[B,x]:x}_removeParent(x){const{_parentage:B}=this;B===x?this._parentage=null:Array.isArray(B)&&(0,t.P)(B,x)}remove(x){const{_teardowns:B}=this;B&&(0,t.P)(B,x),x instanceof n&&x._removeParent(this)}}n.EMPTY=(()=>{const b=new n;return b.closed=!0,b})();const r=n.EMPTY;function s(b){return b instanceof n||b&&"closed"in b&&(0,T.m)(b.remove)&&(0,T.m)(b.add)&&(0,T.m)(b.unsubscribe)}function u(b){(0,T.m)(b)?b():b.unsubscribe()}},42416:(U,$,m)=>{"use strict";m.d($,{v:()=>T});const T={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},39841:(U,$,m)=>{"use strict";m.d($,{a:()=>x});var T=m(68306),_=m(54742),e=m(32076),t=m(44671),n=m(83268),r=m(63269),s=m(31810),u=m(25403),b=m(39672);function x(...ot){const et=(0,r.yG)(ot),Tt=(0,r.jO)(ot),{args:Pt,keys:pt}=(0,_.D)(ot);if(0===Pt.length)return(0,e.D)([],et);const It=new T.y(function(ot,et,Tt=t.y){return Pt=>{Z(et,()=>{const{length:pt}=ot,It=new Array(pt);let Ht=pt,Jt=pt;for(let Ct=0;Ct<pt;Ct++)Z(et,()=>{const bt=(0,e.D)(ot[Ct],et);let st=!1;bt.subscribe(new u.Q(Pt,gt=>{It[Ct]=gt,st||(st=!0,Jt--),Jt||Pt.next(Tt(It.slice()))},()=>{--Ht||Pt.complete()}))},Pt)},Pt)}}(Pt,et,pt?Ht=>(0,s.n)(pt,Ht):t.y));return Tt?It.pipe((0,n.Z)(Tt)):It}function Z(ot,et,Tt){ot?(0,b.f)(Tt,ot,et):et()}},97272:(U,$,m)=>{"use strict";m.d($,{z:()=>n});var T=m(8189),e=m(63269),t=m(32076);function n(...r){return(0,T.J)(1)((0,t.D)(r,(0,e.yG)(r)))}},49770:(U,$,m)=>{"use strict";m.d($,{P:()=>e});var T=m(68306),_=m(38421);function e(t){return new T.y(n=>{(0,_.Xf)(t()).subscribe(n)})}},60515:(U,$,m)=>{"use strict";m.d($,{E:()=>_});const _=new(m(68306).y)(n=>n.complete())},4128:(U,$,m)=>{"use strict";m.d($,{D:()=>u});var T=m(68306),_=m(54742),e=m(38421),t=m(63269),n=m(25403),r=m(83268),s=m(31810);function u(...b){const x=(0,t.jO)(b),{args:B,keys:Z}=(0,_.D)(b),ot=new T.y(et=>{const{length:Tt}=B;if(!Tt)return void et.complete();const Pt=new Array(Tt);let pt=Tt,It=Tt;for(let Ht=0;Ht<Tt;Ht++){let Jt=!1;(0,e.Xf)(B[Ht]).subscribe(new n.Q(et,Ct=>{Jt||(Jt=!0,It--),Pt[Ht]=Ct},()=>pt--,void 0,()=>{(!pt||!Jt)&&(It||et.next(Z?(0,s.n)(Z,Pt):Pt),et.complete())}))}});return x?ot.pipe((0,r.Z)(x)):ot}},32076:(U,$,m)=>{"use strict";m.d($,{D:()=>gt});var T=m(38421),_=m(39672),e=m(54482),t=m(25403);function n(lt,Bt=0){return(0,e.e)((Dt,Et)=>{Dt.subscribe(new t.Q(Et,ut=>(0,_.f)(Et,lt,()=>Et.next(ut),Bt),()=>(0,_.f)(Et,lt,()=>Et.complete(),Bt),ut=>(0,_.f)(Et,lt,()=>Et.error(ut),Bt)))})}function r(lt,Bt=0){return(0,e.e)((Dt,Et)=>{Et.add(lt.schedule(()=>Dt.subscribe(Et),Bt))})}var b=m(68306),B=m(2202),Z=m(30576);function et(lt,Bt){if(!lt)throw new Error("Iterable cannot be null");return new b.y(Dt=>{(0,_.f)(Dt,Bt,()=>{const Et=lt[Symbol.asyncIterator]();(0,_.f)(Dt,Bt,()=>{Et.next().then(ut=>{ut.done?Dt.complete():Dt.next(ut.value)})},0,!0)})})}var Tt=m(93670),Pt=m(28239),pt=m(81144),It=m(26495),Ht=m(12206),Jt=m(44532),Ct=m(53260);function gt(lt,Bt){return Bt?function(lt,Bt){if(null!=lt){if((0,Tt.c)(lt))return function(lt,Bt){return(0,T.Xf)(lt).pipe(r(Bt),n(Bt))}(lt,Bt);if((0,pt.z)(lt))return function(lt,Bt){return new b.y(Dt=>{let Et=0;return Bt.schedule(function(){Et===lt.length?Dt.complete():(Dt.next(lt[Et++]),Dt.closed||this.schedule())})})}(lt,Bt);if((0,Pt.t)(lt))return function(lt,Bt){return(0,T.Xf)(lt).pipe(r(Bt),n(Bt))}(lt,Bt);if((0,Ht.D)(lt))return et(lt,Bt);if((0,It.T)(lt))return function(lt,Bt){return new b.y(Dt=>{let Et;return(0,_.f)(Dt,Bt,()=>{Et=lt[B.h](),(0,_.f)(Dt,Bt,()=>{let ut,rt;try{({value:ut,done:rt}=Et.next())}catch(fe){return void Dt.error(fe)}rt?Dt.complete():Dt.next(ut)},0,!0)}),()=>(0,Z.m)(null==Et?void 0:Et.return)&&Et.return()})}(lt,Bt);if((0,Ct.L)(lt))return function(lt,Bt){return et((0,Ct.Q)(lt),Bt)}(lt,Bt)}throw(0,Jt.z)(lt)}(lt,Bt):(0,T.Xf)(lt)}},54968:(U,$,m)=>{"use strict";m.d($,{R:()=>x});var T=m(38421),_=m(68306),e=m(95577),t=m(81144),n=m(30576),r=m(83268);const s=["addListener","removeListener"],u=["addEventListener","removeEventListener"],b=["on","off"];function x(Tt,Pt,pt,It){if((0,n.m)(pt)&&(It=pt,pt=void 0),It)return x(Tt,Pt,pt).pipe((0,r.Z)(It));const[Ht,Jt]=function(Tt){return(0,n.m)(Tt.addEventListener)&&(0,n.m)(Tt.removeEventListener)}(Tt)?u.map(Ct=>bt=>Tt[Ct](Pt,bt,pt)):function(Tt){return(0,n.m)(Tt.addListener)&&(0,n.m)(Tt.removeListener)}(Tt)?s.map(B(Tt,Pt)):function(Tt){return(0,n.m)(Tt.on)&&(0,n.m)(Tt.off)}(Tt)?b.map(B(Tt,Pt)):[];if(!Ht&&(0,t.z)(Tt))return(0,e.z)(Ct=>x(Ct,Pt,pt))((0,T.Xf)(Tt));if(!Ht)throw new TypeError("Invalid event target");return new _.y(Ct=>{const bt=(...st)=>Ct.next(1<st.length?st:st[0]);return Ht(bt),()=>Jt(bt)})}function B(Tt,Pt){return pt=>It=>Tt[pt](Pt,It)}},38421:(U,$,m)=>{"use strict";m.d($,{Xf:()=>ot});var T=m(35987),_=m(81144),e=m(28239),t=m(68306),n=m(93670),r=m(12206),s=m(44532),u=m(26495),b=m(53260),x=m(30576),B=m(87849),Z=m(48822);function ot(Ct){if(Ct instanceof t.y)return Ct;if(null!=Ct){if((0,n.c)(Ct))return function(Ct){return new t.y(bt=>{const st=Ct[Z.L]();if((0,x.m)(st.subscribe))return st.subscribe(bt);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ct);if((0,_.z)(Ct))return function(Ct){return new t.y(bt=>{for(let st=0;st<Ct.length&&!bt.closed;st++)bt.next(Ct[st]);bt.complete()})}(Ct);if((0,e.t)(Ct))return function(Ct){return new t.y(bt=>{Ct.then(st=>{bt.closed||(bt.next(st),bt.complete())},st=>bt.error(st)).then(null,B.h)})}(Ct);if((0,r.D)(Ct))return It(Ct);if((0,u.T)(Ct))return function(Ct){return new t.y(bt=>{for(const st of Ct)if(bt.next(st),bt.closed)return;bt.complete()})}(Ct);if((0,b.L)(Ct))return function(Ct){return It((0,b.Q)(Ct))}(Ct)}throw(0,s.z)(Ct)}function It(Ct){return new t.y(bt=>{(function(Ct,bt){var st,gt,lt,Bt;return(0,T.mG)(this,void 0,void 0,function*(){try{for(st=(0,T.KL)(Ct);!(gt=yield st.next()).done;)if(bt.next(gt.value),bt.closed)return}catch(Dt){lt={error:Dt}}finally{try{gt&&!gt.done&&(Bt=st.return)&&(yield Bt.call(st))}finally{if(lt)throw lt.error}}bt.complete()})})(Ct,bt).catch(st=>bt.error(st))})}},56451:(U,$,m)=>{"use strict";m.d($,{T:()=>r});var T=m(8189),_=m(38421),e=m(60515),t=m(63269),n=m(32076);function r(...s){const u=(0,t.yG)(s),b=(0,t._6)(s,1/0),x=s;return x.length?1===x.length?(0,_.Xf)(x[0]):(0,T.J)(b)((0,n.D)(x,u)):e.E}},39646:(U,$,m)=>{"use strict";m.d($,{of:()=>e});var T=m(63269),_=m(32076);function e(...t){const n=(0,T.yG)(t);return(0,_.D)(t,n)}},5963:(U,$,m)=>{"use strict";m.d($,{H:()=>n});var T=m(68306),_=m(34986),e=m(93532);function n(r=0,s,u=_.P){let b=-1;return null!=s&&((0,e.K)(s)?u=s:b=s),new T.y(x=>{let B=function(r){return r instanceof Date&&!isNaN(r)}(r)?+r-u.now():r;B<0&&(B=0);let Z=0;return u.schedule(function(){x.closed||(x.next(Z++),0<=b?this.schedule(void 0,b):x.complete())},B)})}},25403:(U,$,m)=>{"use strict";m.d($,{Q:()=>_});var T=m(70930);class _ extends T.Lv{constructor(t,n,r,s,u){super(t),this.onFinalize=u,this._next=n?function(b){try{n(b)}catch(x){t.error(x)}}:super._next,this._error=s?function(b){try{s(b)}catch(x){t.error(x)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(b){t.error(b)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;const{closed:n}=this;super.unsubscribe(),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}},70262:(U,$,m)=>{"use strict";m.d($,{K:()=>t});var T=m(38421),_=m(25403),e=m(54482);function t(n){return(0,e.e)((r,s)=>{let x,u=null,b=!1;u=r.subscribe(new _.Q(s,void 0,void 0,B=>{x=(0,T.Xf)(n(B,t(n)(r))),u?(u.unsubscribe(),u=null,x.subscribe(s)):b=!0})),b&&(u.unsubscribe(),u=null,x.subscribe(s))})}},24351:(U,$,m)=>{"use strict";m.d($,{b:()=>e});var T=m(95577),_=m(30576);function e(t,n){return(0,_.m)(n)?(0,T.z)(t,n,1):(0,T.z)(t,1)}},78372:(U,$,m)=>{"use strict";m.d($,{b:()=>t});var T=m(34986),_=m(54482),e=m(25403);function t(n,r=T.z){return(0,_.e)((s,u)=>{let b=null,x=null,B=null;const Z=()=>{if(b){b.unsubscribe(),b=null;const et=x;x=null,u.next(et)}};function ot(){const et=B+n,Tt=r.now();if(Tt<et)return b=this.schedule(void 0,et-Tt),void u.add(b);Z()}s.subscribe(new e.Q(u,et=>{x=et,B=r.now(),b||(b=r.schedule(ot,n),u.add(b))},()=>{Z(),u.complete()},void 0,()=>{x=b=null}))})}},91005:(U,$,m)=>{"use strict";m.d($,{g:()=>Z});var T=m(34986),_=m(97272),e=m(95698),t=m(54482),n=m(25403),r=m(25032),u=m(69718),b=m(95577);function x(ot,et){return et?Tt=>(0,_.z)(et.pipe((0,e.q)(1),(0,t.e)((ot,et)=>{ot.subscribe(new n.Q(et,r.Z))})),Tt.pipe(x(ot))):(0,b.z)((Tt,Pt)=>ot(Tt,Pt).pipe((0,e.q)(1),(0,u.h)(Tt)))}var B=m(5963);function Z(ot,et=T.z){const Tt=(0,B.H)(ot,et);return x(()=>Tt)}},71884:(U,$,m)=>{"use strict";m.d($,{x:()=>t});var T=m(44671),_=m(54482),e=m(25403);function t(r,s=T.y){return r=null!=r?r:n,(0,_.e)((u,b)=>{let x,B=!0;u.subscribe(new e.Q(b,Z=>{const ot=s(Z);(B||!r(x,ot))&&(B=!1,x=ot,b.next(Z))}))})}function n(r,s){return r===s}},39300:(U,$,m)=>{"use strict";m.d($,{h:()=>e});var T=m(54482),_=m(25403);function e(t,n){return(0,T.e)((r,s)=>{let u=0;r.subscribe(new _.Q(s,b=>t.call(n,b,u++)&&s.next(b)))})}},28746:(U,$,m)=>{"use strict";m.d($,{x:()=>_});var T=m(54482);function _(e){return(0,T.e)((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}},54004:(U,$,m)=>{"use strict";m.d($,{U:()=>e});var T=m(54482),_=m(25403);function e(t,n){return(0,T.e)((r,s)=>{let u=0;r.subscribe(new _.Q(s,b=>{s.next(t.call(n,b,u++))}))})}},69718:(U,$,m)=>{"use strict";m.d($,{h:()=>_});var T=m(54004);function _(e){return(0,T.U)(()=>e)}},8189:(U,$,m)=>{"use strict";m.d($,{J:()=>e});var T=m(95577),_=m(44671);function e(t=1/0){return(0,T.z)(_.y,t)}},95577:(U,$,m)=>{"use strict";m.d($,{z:()=>u});var T=m(54004),_=m(38421),e=m(54482),n=(m(39672),m(25403)),s=m(30576);function u(b,x,B=1/0){return(0,s.m)(x)?u((Z,ot)=>(0,T.U)((et,Tt)=>x(Z,et,ot,Tt))((0,_.Xf)(b(Z,ot))),B):("number"==typeof x&&(B=x),(0,e.e)((Z,ot)=>function(b,x,B,Z,ot,et,Tt,Pt){const pt=[];let It=0,Ht=0,Jt=!1;const Ct=()=>{Jt&&!pt.length&&!It&&x.complete()},bt=gt=>It<Z?st(gt):pt.push(gt),st=gt=>{It++;let lt=!1;(0,_.Xf)(B(gt,Ht++)).subscribe(new n.Q(x,Bt=>{x.next(Bt)},()=>{lt=!0},void 0,()=>{if(lt)try{for(It--;pt.length&&It<Z;){const Bt=pt.shift();st(Bt)}Ct()}catch(Bt){x.error(Bt)}}))};return b.subscribe(new n.Q(x,bt,()=>{Jt=!0,Ct()})),()=>{}}(Z,ot,b,B)))}},13099:(U,$,m)=>{"use strict";m.d($,{B:()=>r});var T=m(32076),_=m(95698),e=m(77579),t=m(70930),n=m(54482);function r(u={}){const{connector:b=(()=>new e.x),resetOnError:x=!0,resetOnComplete:B=!0,resetOnRefCountZero:Z=!0}=u;return ot=>{let et=null,Tt=null,Pt=null,pt=0,It=!1,Ht=!1;const Jt=()=>{null==Tt||Tt.unsubscribe(),Tt=null},Ct=()=>{Jt(),et=Pt=null,It=Ht=!1},bt=()=>{const st=et;Ct(),null==st||st.unsubscribe()};return(0,n.e)((st,gt)=>{pt++,!Ht&&!It&&Jt();const lt=Pt=null!=Pt?Pt:b();gt.add(()=>{pt--,0===pt&&!Ht&&!It&&(Tt=s(bt,Z))}),lt.subscribe(gt),et||(et=new t.Hp({next:Bt=>lt.next(Bt),error:Bt=>{Ht=!0,Jt(),Tt=s(Ct,x,Bt),lt.error(Bt)},complete:()=>{It=!0,Jt(),Tt=s(Ct,B),lt.complete()}}),(0,T.D)(st).subscribe(et))})(ot)}}function s(u,b,...x){return!0===b?(u(),null):!1===b?null:b(...x).pipe((0,_.q)(1)).subscribe(()=>u())}},35684:(U,$,m)=>{"use strict";m.d($,{T:()=>_});var T=m(39300);function _(e){return(0,T.h)((t,n)=>e<=n)}},68675:(U,$,m)=>{"use strict";m.d($,{O:()=>t});var T=m(97272),_=m(63269),e=m(54482);function t(...n){const r=(0,_.yG)(n);return(0,e.e)((s,u)=>{(r?(0,T.z)(n,s,r):(0,T.z)(n,s)).subscribe(u)})}},63900:(U,$,m)=>{"use strict";m.d($,{w:()=>t});var T=m(38421),_=m(54482),e=m(25403);function t(n,r){return(0,_.e)((s,u)=>{let b=null,x=0,B=!1;const Z=()=>B&&!b&&u.complete();s.subscribe(new e.Q(u,ot=>{null==b||b.unsubscribe();let et=0;const Tt=x++;(0,T.Xf)(n(ot,Tt)).subscribe(b=new e.Q(u,Pt=>u.next(r?r(ot,Pt,Tt,et++):Pt),()=>{b=null,Z()}))},()=>{B=!0,Z()}))})}},95698:(U,$,m)=>{"use strict";m.d($,{q:()=>t});var T=m(60515),_=m(54482),e=m(25403);function t(n){return n<=0?()=>T.E:(0,_.e)((r,s)=>{let u=0;r.subscribe(new e.Q(s,b=>{++u<=n&&(s.next(b),n<=u&&s.complete())}))})}},82722:(U,$,m)=>{"use strict";m.d($,{R:()=>n});var T=m(54482),_=m(25403),e=m(38421),t=m(25032);function n(r){return(0,T.e)((s,u)=>{(0,e.Xf)(r).subscribe(new _.Q(u,()=>u.complete(),t.Z)),!u.closed&&s.subscribe(u)})}},18505:(U,$,m)=>{"use strict";m.d($,{b:()=>n});var T=m(30576),_=m(54482),e=m(25403),t=m(44671);function n(r,s,u){const b=(0,T.m)(r)||s||u?{next:r,error:s,complete:u}:r;return b?(0,_.e)((x,B)=>{var Z;null===(Z=b.subscribe)||void 0===Z||Z.call(b);let ot=!0;x.subscribe(new e.Q(B,et=>{var Tt;null===(Tt=b.next)||void 0===Tt||Tt.call(b,et),B.next(et)},()=>{var et;ot=!1,null===(et=b.complete)||void 0===et||et.call(b),B.complete()},et=>{var Tt;ot=!1,null===(Tt=b.error)||void 0===Tt||Tt.call(b,et),B.error(et)},()=>{var et,Tt;ot&&(null===(et=b.unsubscribe)||void 0===et||et.call(b)),null===(Tt=b.finalize)||void 0===Tt||Tt.call(b)}))}):t.y}},84408:(U,$,m)=>{"use strict";m.d($,{o:()=>n});var T=m(50727);class _ extends T.w0{constructor(s,u){super()}schedule(s,u=0){return this}}const e={setInterval(...r){const{delegate:s}=e;return((null==s?void 0:s.setInterval)||setInterval)(...r)},clearInterval(r){const{delegate:s}=e;return((null==s?void 0:s.clearInterval)||clearInterval)(r)},delegate:void 0};var t=m(38737);class n extends _{constructor(s,u){super(s,u),this.scheduler=s,this.work=u,this.pending=!1}schedule(s,u=0){if(this.closed)return this;this.state=s;const b=this.id,x=this.scheduler;return null!=b&&(this.id=this.recycleAsyncId(x,b,u)),this.pending=!0,this.delay=u,this.id=this.id||this.requestAsyncId(x,this.id,u),this}requestAsyncId(s,u,b=0){return e.setInterval(s.flush.bind(s,this),b)}recycleAsyncId(s,u,b=0){if(null!=b&&this.delay===b&&!1===this.pending)return u;e.clearInterval(u)}execute(s,u){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const b=this._execute(s,u);if(b)return b;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(s,u){let x,b=!1;try{this.work(s)}catch(B){b=!0,x=B||new Error("Scheduled action threw falsy error")}if(b)return this.unsubscribe(),x}unsubscribe(){if(!this.closed){const{id:s,scheduler:u}=this,{actions:b}=u;this.work=this.state=this.scheduler=null,this.pending=!1,(0,t.P)(b,this),null!=s&&(this.id=this.recycleAsyncId(u,s,null)),this.delay=null,super.unsubscribe()}}}},97565:(U,$,m)=>{"use strict";m.d($,{v:()=>e});var T=m(26063);class _{constructor(n,r=_.now){this.schedulerActionCtor=n,this.now=r}schedule(n,r=0,s){return new this.schedulerActionCtor(this,n).schedule(s,r)}}_.now=T.l.now;class e extends _{constructor(n,r=_.now){super(n,r),this.actions=[],this._active=!1,this._scheduled=void 0}flush(n){const{actions:r}=this;if(this._active)return void r.push(n);let s;this._active=!0;do{if(s=n.execute(n.state,n.delay))break}while(n=r.shift());if(this._active=!1,s){for(;n=r.shift();)n.unsubscribe();throw s}}}},53101:(U,$,m)=>{"use strict";m.d($,{E:()=>et});var T=m(84408);let e,_=1;const t={};function n(Pt){return Pt in t&&(delete t[Pt],!0)}const r={setImmediate(Pt){const pt=_++;return t[pt]=!0,e||(e=Promise.resolve()),e.then(()=>n(pt)&&Pt()),pt},clearImmediate(Pt){n(Pt)}},{setImmediate:u,clearImmediate:b}=r,x={setImmediate(...Pt){const{delegate:pt}=x;return((null==pt?void 0:pt.setImmediate)||u)(...Pt)},clearImmediate(Pt){const{delegate:pt}=x;return((null==pt?void 0:pt.clearImmediate)||b)(Pt)},delegate:void 0};var Z=m(97565);const et=new class extends Z.v{flush(pt){this._active=!0,this._scheduled=void 0;const{actions:It}=this;let Ht,Jt=-1;pt=pt||It.shift();const Ct=It.length;do{if(Ht=pt.execute(pt.state,pt.delay))break}while(++Jt<Ct&&(pt=It.shift()));if(this._active=!1,Ht){for(;++Jt<Ct&&(pt=It.shift());)pt.unsubscribe();throw Ht}}}(class extends T.o{constructor(pt,It){super(pt,It),this.scheduler=pt,this.work=It}requestAsyncId(pt,It,Ht=0){return null!==Ht&&Ht>0?super.requestAsyncId(pt,It,Ht):(pt.actions.push(this),pt._scheduled||(pt._scheduled=x.setImmediate(pt.flush.bind(pt,void 0))))}recycleAsyncId(pt,It,Ht=0){if(null!=Ht&&Ht>0||null==Ht&&this.delay>0)return super.recycleAsyncId(pt,It,Ht);0===pt.actions.length&&(x.clearImmediate(It),pt._scheduled=void 0)}})},34986:(U,$,m)=>{"use strict";m.d($,{z:()=>e,P:()=>t});var T=m(84408);const e=new(m(97565).v)(T.o),t=e},26063:(U,$,m)=>{"use strict";m.d($,{l:()=>T});const T={now:()=>(T.delegate||Date).now(),delegate:void 0}},43410:(U,$,m)=>{"use strict";m.d($,{z:()=>T});const T={setTimeout(..._){const{delegate:e}=T;return((null==e?void 0:e.setTimeout)||setTimeout)(..._)},clearTimeout(_){const{delegate:e}=T;return((null==e?void 0:e.clearTimeout)||clearTimeout)(_)},delegate:void 0}},2202:(U,$,m)=>{"use strict";m.d($,{h:()=>_});const _="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},48822:(U,$,m)=>{"use strict";m.d($,{L:()=>T});const T="function"==typeof Symbol&&Symbol.observable||"@@observable"},63269:(U,$,m)=>{"use strict";m.d($,{jO:()=>t,yG:()=>n,_6:()=>r});var T=m(30576),_=m(93532);function e(s){return s[s.length-1]}function t(s){return(0,T.m)(e(s))?s.pop():void 0}function n(s){return(0,_.K)(e(s))?s.pop():void 0}function r(s,u){return"number"==typeof e(s)?s.pop():u}},54742:(U,$,m)=>{"use strict";m.d($,{D:()=>n});const{isArray:T}=Array,{getPrototypeOf:_,prototype:e,keys:t}=Object;function n(s){if(1===s.length){const u=s[0];if(T(u))return{args:u,keys:null};if(function(s){return s&&"object"==typeof s&&_(s)===e}(u)){const b=t(u);return{args:b.map(x=>u[x]),keys:b}}}return{args:s,keys:null}}},38737:(U,$,m)=>{"use strict";function T(_,e){if(_){const t=_.indexOf(e);0<=t&&_.splice(t,1)}}m.d($,{P:()=>T})},83888:(U,$,m)=>{"use strict";function T(_){const t=_(n=>{Error.call(n),n.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}m.d($,{d:()=>T})},31810:(U,$,m)=>{"use strict";function T(_,e){return _.reduce((t,n,r)=>(t[n]=e[r],t),{})}m.d($,{n:()=>T})},72806:(U,$,m)=>{"use strict";m.d($,{x:()=>e,O:()=>t});var T=m(42416);let _=null;function e(n){if(T.v.useDeprecatedSynchronousErrorHandling){const r=!_;if(r&&(_={errorThrown:!1,error:null}),n(),r){const{errorThrown:s,error:u}=_;if(_=null,s)throw u}}else n()}function t(n){T.v.useDeprecatedSynchronousErrorHandling&&_&&(_.errorThrown=!0,_.error=n)}},39672:(U,$,m)=>{"use strict";function T(_,e,t,n=0,r=!1){const s=e.schedule(function(){t(),r?_.add(this.schedule(null,n)):this.unsubscribe()},n);if(_.add(s),!r)return s}m.d($,{f:()=>T})},44671:(U,$,m)=>{"use strict";function T(_){return _}m.d($,{y:()=>T})},81144:(U,$,m)=>{"use strict";m.d($,{z:()=>T});const T=_=>_&&"number"==typeof _.length&&"function"!=typeof _},12206:(U,$,m)=>{"use strict";m.d($,{D:()=>_});var T=m(30576);function _(e){return Symbol.asyncIterator&&(0,T.m)(null==e?void 0:e[Symbol.asyncIterator])}},30576:(U,$,m)=>{"use strict";function T(_){return"function"==typeof _}m.d($,{m:()=>T})},93670:(U,$,m)=>{"use strict";m.d($,{c:()=>e});var T=m(48822),_=m(30576);function e(t){return(0,_.m)(t[T.L])}},26495:(U,$,m)=>{"use strict";m.d($,{T:()=>e});var T=m(2202),_=m(30576);function e(t){return(0,_.m)(null==t?void 0:t[T.h])}},28239:(U,$,m)=>{"use strict";m.d($,{t:()=>_});var T=m(30576);function _(e){return(0,T.m)(null==e?void 0:e.then)}},53260:(U,$,m)=>{"use strict";m.d($,{Q:()=>e,L:()=>t});var T=m(35987),_=m(30576);function e(n){return(0,T.FC)(this,arguments,function*(){const s=n.getReader();try{for(;;){const{value:u,done:b}=yield(0,T.qq)(s.read());if(b)return yield(0,T.qq)(void 0);yield yield(0,T.qq)(u)}}finally{s.releaseLock()}})}function t(n){return(0,_.m)(null==n?void 0:n.getReader)}},93532:(U,$,m)=>{"use strict";m.d($,{K:()=>_});var T=m(30576);function _(e){return e&&(0,T.m)(e.schedule)}},54482:(U,$,m)=>{"use strict";m.d($,{A:()=>_,e:()=>e});var T=m(30576);function _(t){return(0,T.m)(null==t?void 0:t.lift)}function e(t){return n=>{if(_(n))return n.lift(function(r){try{return t(r,this)}catch(s){this.error(s)}});throw new TypeError("Unable to lift unknown Observable type")}}},83268:(U,$,m)=>{"use strict";m.d($,{Z:()=>t});var T=m(54004);const{isArray:_}=Array;function t(n){return(0,T.U)(r=>function(n,r){return _(r)?n(...r):n(r)}(n,r))}},25032:(U,$,m)=>{"use strict";function T(){}m.d($,{Z:()=>T})},87849:(U,$,m)=>{"use strict";m.d($,{h:()=>e});var T=m(42416),_=m(43410);function e(t){_.z.setTimeout(()=>{const{onUnhandledError:n}=T.v;if(!n)throw t;n(t)})}},44532:(U,$,m)=>{"use strict";function T(_){return new TypeError(`You provided ${null!==_&&"object"==typeof _?"an invalid object":`'${_}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}m.d($,{z:()=>T})},82734:function(U,$){var _;void 0!==(_=function(){"use strict";function t(x,B,Z){var ot=new XMLHttpRequest;ot.open("GET",x),ot.responseType="blob",ot.onload=function(){b(ot.response,B,Z)},ot.onerror=function(){console.error("could not download file")},ot.send()}function n(x){var B=new XMLHttpRequest;B.open("HEAD",x,!1);try{B.send()}catch(Z){}return 200<=B.status&&299>=B.status}function r(x){try{x.dispatchEvent(new MouseEvent("click"))}catch(Z){var B=document.createEvent("MouseEvents");B.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),x.dispatchEvent(B)}}var s="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,u=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),b=s.saveAs||("object"!=typeof window||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!u?function(x,B,Z){var ot=s.URL||s.webkitURL,et=document.createElement("a");et.download=B=B||x.name||"download",et.rel="noopener","string"==typeof x?(et.href=x,et.origin===location.origin?r(et):n(et.href)?t(x,B,Z):r(et,et.target="_blank")):(et.href=ot.createObjectURL(x),setTimeout(function(){ot.revokeObjectURL(et.href)},4e4),setTimeout(function(){r(et)},0))}:"msSaveOrOpenBlob"in navigator?function(x,B,Z){if(B=B||x.name||"download","string"!=typeof x)navigator.msSaveOrOpenBlob(function(x,B){return void 0===B?B={autoBom:!1}:"object"!=typeof B&&(console.warn("Deprecated: Expected third argument to be a object"),B={autoBom:!B}),B.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(x.type)?new Blob(["\ufeff",x],{type:x.type}):x}(x,Z),B);else if(n(x))t(x,B,Z);else{var ot=document.createElement("a");ot.href=x,ot.target="_blank",setTimeout(function(){r(ot)})}}:function(x,B,Z,ot){if((ot=ot||open("","_blank"))&&(ot.document.title=ot.document.body.innerText="downloading..."),"string"==typeof x)return t(x,B,Z);var et="application/octet-stream"===x.type,Tt=/constructor/i.test(s.HTMLElement)||s.safari,Pt=/CriOS\/[\d]+/.test(navigator.userAgent);if((Pt||et&&Tt||u)&&"undefined"!=typeof FileReader){var pt=new FileReader;pt.onloadend=function(){var Jt=pt.result;Jt=Pt?Jt:Jt.replace(/^data:[^;]*;/,"data:attachment/file;"),ot?ot.location.href=Jt:location=Jt,ot=null},pt.readAsDataURL(x)}else{var It=s.URL||s.webkitURL,Ht=It.createObjectURL(x);ot?ot.location=Ht:location.href=Ht,ot=null,setTimeout(function(){It.revokeObjectURL(Ht)},4e4)}});s.saveAs=b.saveAs=b,U.exports=b}.apply($,[]))&&(U.exports=_)},86942:(U,$,m)=>{"use strict";var T,_,e;m.r($),m.d($,{Synth:()=>T}),function(){var t=window.URL||window.webkitURL,n=window.Blob;if(!t||!n)throw new Error("This browser does not support AudioSynth");var r=!1,s=null,u=function(ot,et){return[new Uint8Array([et,et>>8]),new Uint8Array([et,et>>8,et>>16,et>>24])][ot]},b=function(ot,et,Tt,Pt){Object.defineProperty(this,ot,{value:et,writable:!!Tt,enumerable:!!Pt})},x=function(ot,et,Tt){b.call(this,ot,et,Tt,!0)};e=function(){this.__init__.apply(this,arguments)};var B=b.bind(e.prototype),Z=x.bind(e.prototype);B("__init__",function(ot,et,Tt){if(!r)throw new Error("AudioSynthInstrument can only be instantiated from the createInstrument method of the AudioSynth object.");b.call(this,"_parent",ot),x.call(this,"name",et),b.call(this,"_soundID",Tt)}),Z("play",function(ot,et,Tt){return this._parent.play(this._soundID,ot,et,Tt)}),Z("generate",function(ot,et,Tt){return this._parent.generate(this._soundID,ot,et,Tt)}),B=b.bind((_=function ot(){return s instanceof ot?s:(this.__init__(),this)}).prototype),Z=x.bind(_.prototype),B("_debug",!1,!0),B("_bitsPerSample",16),B("_channels",1),B("_sampleRate",44100,!0),Z("setSampleRate",function(ot){return this._sampleRate=Math.max(Math.min(0|ot,44100),4e3),this._clearCache(),this._sampleRate}),Z("getSampleRate",function(){return this._sampleRate}),B("_volume",32768,!0),Z("setVolume",function(ot){return ot=parseFloat(ot),isNaN(ot)&&(ot=0),ot=Math.round(32768*ot),this._volume=Math.max(Math.min(0|ot,32768),0),this._clearCache(),this._volume}),Z("getVolume",function(){return Math.round(this._volume/32768*1e4)/1e4}),B("_notes",{C:261.63,"C#":277.18,D:293.66,"D#":311.13,E:329.63,F:349.23,"F#":369.99,G:392,"G#":415.3,A:440,"A#":466.16,B:493.88}),B("_fileCache",[],!0),B("_temp",{},!0),B("_sounds",[],!0),B("_mod",[function(ot,et,Tt,Pt){return Math.sin(2*Math.PI*(ot/et)*Tt+Pt)}]),B("_resizeCache",function(){for(var ot=this._fileCache,et=this._sounds.length;ot.length<et;){for(var Tt=[],Pt=0;Pt<8;Pt++){var pt={};for(var It in this._notes)pt[It]={};Tt.push(pt)}ot.push(Tt)}}),B("_clearCache",function(){this._fileCache=[],this._resizeCache()}),Z("generate",function(ot,et,Tt,Pt){var pt=this._sounds[ot];if(!pt)for(var It=0;It<this._sounds.length;It++)if(this._sounds[It].name==ot){pt=this._sounds[It],ot=It;break}if(!pt)throw new Error("Invalid sound or sound ID: "+ot);var Ht=(new Date).valueOf();this._temp={},Tt|=0,Tt=Math.min(8,Math.max(1,Tt));var Jt=Pt?parseFloat(Pt):2;if(void 0===this._notes[et])throw new Error(et+" is not a valid note.");if(void 0!==this._fileCache[ot][Tt-1][et][Jt])return this._debug&&console.log((new Date).valueOf()-Ht,"ms to retrieve (cached)"),this._fileCache[ot][Tt-1][et][Jt];var Ct=this._notes[et]*Math.pow(2,Tt-4),bt=this._sampleRate,st=this._volume,gt=this._channels,lt=this._bitsPerSample,Bt=pt.attack(bt,Ct,st),Dt=pt.dampen(bt,Ct,st),Et=pt.wave,ut={modulate:this._mod,vars:this._temp},rt=0,Mt=new Uint8Array(new ArrayBuffer(Math.ceil(bt*Jt*2))),Nt=bt*Bt|0,ge=bt*Jt|0;for(It=0;It!==Nt;It++)rt=st*(It/(bt*Bt))*Et.call(ut,It,bt,Ct,st),Mt[It<<1]=rt,Mt[1+(It<<1)]=rt>>8;for(;It!==ge;It++)rt=st*Math.pow(1-(It-bt*Bt)/(bt*(Jt-Bt)),Dt)*Et.call(ut,It,bt,Ct,st),Mt[It<<1]=rt,Mt[1+(It<<1)]=rt>>8;var ve=["RIFF",u(1,52),"WAVE","fmt ",u(1,16),u(0,1),u(0,gt),u(1,bt),u(1,bt*gt*lt/8),u(0,gt*lt/8),u(0,lt),"data",u(1,Mt.length*gt*lt/8),Mt],pe=new n(ve,{type:"audio/wav"}),He=t.createObjectURL(pe);return this._fileCache[ot][Tt-1][et][Jt]=He,this._debug&&console.log((new Date).valueOf()-Ht,"ms to generate"),He}),Z("play",function(ot,et,Tt,Pt){var pt=this.generate(ot,et,Tt,Pt);return new Audio(pt).play(),!0}),Z("debug",function(){this._debug=!0}),Z("createInstrument",function(ot){var et=0,Tt=!1;if("string"==typeof ot){for(var Pt=0;Pt<this._sounds.length;Pt++)if(this._sounds[Pt].name==ot){Tt=!0,et=Pt;break}}else this._sounds[ot]&&(ot=this._sounds[et=ot].name,Tt=!0);if(!Tt)throw new Error("Invalid sound or sound ID: "+ot);r=!0;var pt=new e(this,ot,et);return r=!1,pt}),Z("listSounds",function(){for(var ot=[],et=0;et<this._sounds.length;et++)ot.push(this._sounds[et].name);return ot}),B("__init__",function(){this._resizeCache()}),Z("loadSoundProfile",function(){for(var ot=0,et=arguments.length;ot<et;ot++){var Tt=arguments[ot];if(!(Tt instanceof Object))throw new Error("Invalid sound profile.");this._sounds.push(Tt)}return this._resizeCache(),!0}),Z("loadModulationFunction",function(){for(var ot=0,et=arguments.length;ot<et;ot++){var Tt=arguments[ot];if("function"!=typeof Tt)throw new Error("Invalid modulation function.");this._mod.push(Tt)}return!0}),s=new _,T=s}(),T.loadModulationFunction(function(t,n,r,s){return 1*Math.sin(2*Math.PI*(t/n*r)+s)},function(t,n,r,s){return 1*Math.sin(4*Math.PI*(t/n*r)+s)},function(t,n,r,s){return 1*Math.sin(8*Math.PI*(t/n*r)+s)},function(t,n,r,s){return 1*Math.sin(.5*Math.PI*(t/n*r)+s)},function(t,n,r,s){return 1*Math.sin(.25*Math.PI*(t/n*r)+s)},function(t,n,r,s){return.5*Math.sin(2*Math.PI*(t/n*r)+s)},function(t,n,r,s){return.5*Math.sin(4*Math.PI*(t/n*r)+s)},function(t,n,r,s){return.5*Math.sin(8*Math.PI*(t/n*r)+s)},function(t,n,r,s){return.5*Math.sin(.5*Math.PI*(t/n*r)+s)},function(t,n,r,s){return.5*Math.sin(.25*Math.PI*(t/n*r)+s)}),T.loadSoundProfile({name:"piano",attack:function(){return.002},dampen:function(t,n,r){return Math.pow(.5*Math.log(n*r/t),2)},wave:function(t,n,r,s){var u=this.modulate[0];return this.modulate[1](t,n,r,Math.pow(u(t,n,r,0),2)+.75*u(t,n,r,.25)+.1*u(t,n,r,.5))}},{name:"organ",attack:function(){return.3},dampen:function(t,n){return 1+.01*n},wave:function(t,n,r){var s=this.modulate[0];return this.modulate[1](t,n,r,s(t,n,r,0)+.5*s(t,n,r,.25)+.25*s(t,n,r,.5))}},{name:"acoustic",attack:function(){return.002},dampen:function(){return 1},wave:function(t,n,r){var s=this.vars;s.valueTable=s.valueTable?s.valueTable:[],void 0===s.playVal&&(s.playVal=0),void 0===s.periodCount&&(s.periodCount=0);var u=s.valueTable,b=s.playVal,x=s.periodCount,B=n/r,Z=Math.floor(100*(B-Math.floor(B))),ot=!1;if(u.length<=Math.ceil(B))return u.push(2*Math.round(Math.random())-1),u[u.length-1];u[b]=.5*(u[b>=u.length-1?0:b+1]+u[b]),b>=Math.floor(B)&&(b<Math.ceil(B)?x%100>=Z&&(ot=!0,u[b+1]=.5*(u[0]+u[b+1]),s.periodCount++):ot=!0);var et=u[b];return ot?s.playVal=0:s.playVal++,et}},{name:"edm",attack:function(){return.002},dampen:function(){return 1},wave:function(t,n,r){var s=this.modulate[0],u=this.modulate.slice(1);return u[0](t,n,r,u[9](t,n,r,u[2](t,n,r,Math.pow(s(t,n,r,0),3)+Math.pow(s(t,n,r,.5),5)+Math.pow(s(t,n,r,1),7)))+u[8](t,n,r,s(t,n,r,1.75)))}})},54364:function(U,$,m){var _,e;_=[m(46251)],void 0!==(e=function(t){"use strict";return t}.apply($,_))&&(U.exports=e)},46251:function(U,$){var _;void 0!==(_=function(){"use strict";var e={connectionTypes:{INPUT_VALUE:1,OUTPUT_VALUE:2,NEXT_STATEMENT:3,PREVIOUS_STATEMENT:4},constants:{},LINE_MODE_MULTIPLIER:40,PAGE_MODE_MULTIPLIER:125,DRAG_RADIUS:5,FLYOUT_DRAG_RADIUS:10,SNAP_RADIUS:28};return e.CONNECTING_SNAP_RADIUS=e.SNAP_RADIUS,e.CURRENT_CONNECTION_PREFERENCE=8,e.BUMP_DELAY=250,e.BUMP_RANDOMNESS=10,e.COLLAPSE_CHARS=30,e.LONGPRESS=750,e.SOUND_LIMIT=100,e.DRAG_STACK=!0,e.HSV_SATURATION=.45,e.HSV_VALUE=.65,e.SPRITE={width:96,height:124,url:"sprites.png"},e.constants.ALIGN={LEFT:-1,CENTRE:0,RIGHT:1},e.DRAG_NONE=0,e.DRAG_STICKY=1,e.DRAG_BEGIN=1,e.DRAG_FREE=2,e.OPPOSITE_TYPE=[],e.OPPOSITE_TYPE[e.connectionTypes.INPUT_VALUE]=e.connectionTypes.OUTPUT_VALUE,e.OPPOSITE_TYPE[e.connectionTypes.OUTPUT_VALUE]=e.connectionTypes.INPUT_VALUE,e.OPPOSITE_TYPE[e.connectionTypes.NEXT_STATEMENT]=e.connectionTypes.PREVIOUS_STATEMENT,e.OPPOSITE_TYPE[e.connectionTypes.PREVIOUS_STATEMENT]=e.connectionTypes.NEXT_STATEMENT,e.VARIABLE_CATEGORY_NAME="VARIABLE",e.VARIABLE_DYNAMIC_CATEGORY_NAME="VARIABLE_DYNAMIC",e.PROCEDURE_CATEGORY_NAME="PROCEDURE",e.RENAME_VARIABLE_ID="RENAME_VARIABLE_ID",e.DELETE_VARIABLE_ID="DELETE_VARIABLE_ID",e.constants.COLLAPSED_INPUT_NAME="_TEMP_COLLAPSED_INPUT",e.constants.COLLAPSED_FIELD_NAME="_TEMP_COLLAPSED_FIELD",e.utils={},e.utils.global=function(){return"object"==typeof self?self:"object"==typeof window?window:"object"==typeof global?global:this}(),e.Msg={},e.utils.global.Blockly||(e.utils.global.Blockly={}),e.utils.global.Blockly.Msg||(e.utils.global.Blockly.Msg=e.Msg),e.utils.colour={},e.utils.colour.parse=function(t){t=String(t).toLowerCase().trim();var n=e.utils.colour.names[t];if(n||(n="0x"==t.substring(0,2)?"#"+t.substring(2):t,/^#[0-9a-f]{6}$/.test(n="#"==n[0]?n:"#"+n)))return n;if(/^#[0-9a-f]{3}$/.test(n))return["#",n[1],n[1],n[2],n[2],n[3],n[3]].join("");var r=t.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return r&&(t=Number(r[1]),n=Number(r[2]),r=Number(r[3]),0<=t&&256>t&&0<=n&&256>n&&0<=r&&256>r)?e.utils.colour.rgbToHex(t,n,r):null},e.utils.colour.rgbToHex=function(t,n,r){return n=t<<16|n<<8|r,16>t?"#"+(16777216|n).toString(16).substr(1):"#"+n.toString(16)},e.utils.colour.hexToRgb=function(t){return(t=e.utils.colour.parse(t))?[(t=parseInt(t.substr(1),16))>>16,t>>8&255,255&t]:[0,0,0]},e.utils.colour.hsvToHex=function(t,n,r){var s=0,u=0,b=0;if(0==n)b=u=s=r;else{var x=Math.floor(t/60),B=t/60-x;t=r*(1-n);var Z=r*(1-n*B);switch(n=r*(1-n*(1-B)),x){case 1:s=Z,u=r,b=t;break;case 2:s=t,u=r,b=n;break;case 3:s=t,u=Z,b=r;break;case 4:s=n,u=t,b=r;break;case 5:s=r,u=t,b=Z;break;case 6:case 0:s=r,u=n,b=t}}return e.utils.colour.rgbToHex(Math.floor(s),Math.floor(u),Math.floor(b))},e.utils.colour.blend=function(t,n,r){return(t=e.utils.colour.parse(t))&&(n=e.utils.colour.parse(n))?(t=e.utils.colour.hexToRgb(t),n=e.utils.colour.hexToRgb(n),e.utils.colour.rgbToHex(Math.round(n[0]+r*(t[0]-n[0])),Math.round(n[1]+r*(t[1]-n[1])),Math.round(n[2]+r*(t[2]-n[2])))):null},e.utils.colour.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},e.utils.Coordinate=function(t,n){this.x=t,this.y=n},e.utils.Coordinate.equals=function(t,n){return t==n||!(!t||!n)&&t.x==n.x&&t.y==n.y},e.utils.Coordinate.distance=function(t,n){var r=t.x-n.x;return t=t.y-n.y,Math.sqrt(r*r+t*t)},e.utils.Coordinate.magnitude=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},e.utils.Coordinate.difference=function(t,n){return new e.utils.Coordinate(t.x-n.x,t.y-n.y)},e.utils.Coordinate.sum=function(t,n){return new e.utils.Coordinate(t.x+n.x,t.y+n.y)},e.utils.Coordinate.prototype.clone=function(){return new e.utils.Coordinate(this.x,this.y)},e.utils.Coordinate.prototype.scale=function(t){return this.x*=t,this.y*=t,this},e.utils.Coordinate.prototype.translate=function(t,n){return this.x+=t,this.y+=n,this},e.utils.Rect=function(t,n,r,s){this.top=t,this.bottom=n,this.left=r,this.right=s},e.utils.Rect.prototype.contains=function(t,n){return t>=this.left&&t<=this.right&&n>=this.top&&n<=this.bottom},e.utils.Rect.prototype.intersects=function(t){return!(this.left>t.right||this.right<t.left||this.top>t.bottom||this.bottom<t.top)},e.utils.string={},e.utils.string.startsWith=function(t,n){return 0==t.lastIndexOf(n,0)},e.utils.string.shortestStringLength=function(t){return t.length?t.reduce(function(n,r){return n.length<r.length?n:r}).length:0},e.utils.string.commonWordPrefix=function(t,n){if(!t.length)return 0;if(1==t.length)return t[0].length;var r=0;n=n||e.utils.string.shortestStringLength(t);for(var s=0;s<n;s++){for(var u=t[0][s],b=1;b<t.length;b++)if(u!=t[b][s])return r;" "==u&&(r=s+1)}for(b=1;b<t.length;b++)if((u=t[b][s])&&" "!=u)return r;return n},e.utils.string.commonWordSuffix=function(t,n){if(!t.length)return 0;if(1==t.length)return t[0].length;var r=0;n=n||e.utils.string.shortestStringLength(t);for(var s=0;s<n;s++){for(var u=t[0].substr(-s-1,1),b=1;b<t.length;b++)if(u!=t[b].substr(-s-1,1))return r;" "==u&&(r=s+1)}for(b=1;b<t.length;b++)if((u=t[b].charAt(t[b].length-s-1))&&" "!=u)return r;return n},e.utils.string.wrap=function(t,n){t=t.split("\n");for(var r=0;r<t.length;r++)t[r]=e.utils.string.wrapLine_(t[r],n);return t.join("\n")},e.utils.string.wrapLine_=function(t,n){if(t.length<=n)return t;for(var r=t.trim().split(/\s+/),s=0;s<r.length;s++)r[s].length>n&&(n=r[s].length);s=-1/0;var u=1;do{var b=s,x=t;t=[];var B=r.length/u,Z=1;for(s=0;s<r.length-1;s++)Z<(s+1.5)/B?(Z++,t[s]=!0):t[s]=!1;t=e.utils.string.wrapMutate_(r,t,n),s=e.utils.string.wrapScore_(r,t,n),t=e.utils.string.wrapToText_(r,t),u++}while(s>b);return x},e.utils.string.wrapScore_=function(t,n,r){for(var s=[0],u=[],b=0;b<t.length;b++)s[s.length-1]+=t[b].length,!0===n[b]?(s.push(0),u.push(t[b].charAt(t[b].length-1))):!1===n[b]&&s[s.length-1]++;for(t=Math.max.apply(Math,s),b=n=0;b<s.length;b++)n-=2*Math.pow(Math.abs(r-s[b]),1.5),n-=Math.pow(t-s[b],1.5),-1!=".?!".indexOf(u[b])?n+=r/3:-1!=",;)]}".indexOf(u[b])&&(n+=r/4);return 1<s.length&&s[s.length-1]<=s[s.length-2]&&(n+=.5),n},e.utils.string.wrapMutate_=function(t,n,r){for(var u,s=e.utils.string.wrapScore_(t,n,r),b=0;b<n.length-1;b++)if(n[b]!=n[b+1]){var x=[].concat(n);x[b]=!x[b],x[b+1]=!x[b+1];var B=e.utils.string.wrapScore_(t,x,r);B>s&&(s=B,u=x)}return u?e.utils.string.wrapMutate_(t,u,r):n},e.utils.string.wrapToText_=function(t,n){for(var r=[],s=0;s<t.length;s++)r.push(t[s]),void 0!==n[s]&&r.push(n[s]?"\n":" ");return r.join("")},e.utils.Size=function(t,n){this.width=t,this.height=n},e.utils.Size.equals=function(t,n){return t==n||!(!t||!n)&&t.width==n.width&&t.height==n.height},e.utils.style={},e.utils.style.getSize=function(t){if("none"!=e.utils.style.getStyle_(t,"display"))return e.utils.style.getSizeWithDisplay_(t);var n=t.style,r=n.display,s=n.visibility,u=n.position;n.visibility="hidden",n.position="absolute",n.display="inline";var b=t.offsetWidth;return t=t.offsetHeight,n.display=r,n.position=u,n.visibility=s,new e.utils.Size(b,t)},e.utils.style.getSizeWithDisplay_=function(t){return new e.utils.Size(t.offsetWidth,t.offsetHeight)},e.utils.style.getStyle_=function(t,n){return e.utils.style.getComputedStyle(t,n)||e.utils.style.getCascadedStyle(t,n)||t.style&&t.style[n]},e.utils.style.getComputedStyle=function(t,n){return document.defaultView&&document.defaultView.getComputedStyle&&(t=document.defaultView.getComputedStyle(t,null))&&(t[n]||t.getPropertyValue(n))||""},e.utils.style.getCascadedStyle=function(t,n){return t.currentStyle?t.currentStyle[n]:null},e.utils.style.getPageOffset=function(t){var n=new e.utils.Coordinate(0,0);t=t.getBoundingClientRect();var r=document.documentElement;return r=new e.utils.Coordinate(window.pageXOffset||r.scrollLeft,window.pageYOffset||r.scrollTop),n.x=t.left+r.x,n.y=t.top+r.y,n},e.utils.style.getViewportPageOffset=function(){var t=document.body,n=document.documentElement;return new e.utils.Coordinate(t.scrollLeft||n.scrollLeft,t.scrollTop||n.scrollTop)},e.utils.style.setElementShown=function(t,n){t.style.display=n?"":"none"},e.utils.style.isRightToLeft=function(t){return"rtl"==e.utils.style.getStyle_(t,"direction")},e.utils.style.getBorderBox=function(t){var n=e.utils.style.getComputedStyle(t,"borderLeftWidth"),r=e.utils.style.getComputedStyle(t,"borderRightWidth"),s=e.utils.style.getComputedStyle(t,"borderTopWidth");return t=e.utils.style.getComputedStyle(t,"borderBottomWidth"),{top:parseFloat(s),right:parseFloat(r),bottom:parseFloat(t),left:parseFloat(n)}},e.utils.style.scrollIntoContainerView=function(t,n,r){t=e.utils.style.getContainerOffsetToScrollInto(t,n,r),n.scrollLeft=t.x,n.scrollTop=t.y},e.utils.style.getContainerOffsetToScrollInto=function(t,n,r){var s=e.utils.style.getPageOffset(t),u=e.utils.style.getPageOffset(n),b=e.utils.style.getBorderBox(n),x=s.x-u.x-b.left;return s=s.y-u.y-b.top,u=e.utils.style.getSizeWithDisplay_(t),t=n.clientWidth-u.width,u=n.clientHeight-u.height,b=n.scrollLeft,n=n.scrollTop,r?(b+=x-t/2,n+=s-u/2):(b+=Math.min(x,Math.max(x-t,0)),n+=Math.min(s,Math.max(s-u,0))),new e.utils.Coordinate(b,n)},e.utils.userAgent={},function(t){function n(s){return-1!=r.indexOf(s.toUpperCase())}e.utils.userAgent.raw=t;var r=e.utils.userAgent.raw.toUpperCase();e.utils.userAgent.IE=n("Trident")||n("MSIE"),e.utils.userAgent.EDGE=n("Edge"),e.utils.userAgent.JAVA_FX=n("JavaFX"),e.utils.userAgent.CHROME=(n("Chrome")||n("CriOS"))&&!e.utils.userAgent.EDGE,e.utils.userAgent.WEBKIT=n("WebKit")&&!e.utils.userAgent.EDGE,e.utils.userAgent.GECKO=n("Gecko")&&!e.utils.userAgent.WEBKIT&&!e.utils.userAgent.IE&&!e.utils.userAgent.EDGE,e.utils.userAgent.ANDROID=n("Android"),t=e.utils.global.navigator&&e.utils.global.navigator.maxTouchPoints,e.utils.userAgent.IPAD=n("iPad")||n("Macintosh")&&0<t,e.utils.userAgent.IPOD=n("iPod"),e.utils.userAgent.IPHONE=n("iPhone")&&!e.utils.userAgent.IPAD&&!e.utils.userAgent.IPOD,e.utils.userAgent.MAC=n("Macintosh"),e.utils.userAgent.TABLET=e.utils.userAgent.IPAD||e.utils.userAgent.ANDROID&&!n("Mobile")||n("Silk"),e.utils.userAgent.MOBILE=!e.utils.userAgent.TABLET&&(e.utils.userAgent.IPOD||e.utils.userAgent.IPHONE||e.utils.userAgent.ANDROID||n("IEMobile"))}(e.utils.global.navigator&&e.utils.global.navigator.userAgent||""),e.utils.noEvent=function(t){t.preventDefault(),t.stopPropagation()},e.utils.isTargetInput=function(t){return"textarea"==t.target.type||"text"==t.target.type||"number"==t.target.type||"email"==t.target.type||"password"==t.target.type||"search"==t.target.type||"tel"==t.target.type||"url"==t.target.type||t.target.isContentEditable||t.target.dataset&&"true"==t.target.dataset.isTextInput},e.utils.getRelativeXY=function(t){var n=new e.utils.Coordinate(0,0),r=t.getAttribute("x");return r&&(n.x=parseInt(r,10)),(r=t.getAttribute("y"))&&(n.y=parseInt(r,10)),(r=(r=t.getAttribute("transform"))&&r.match(e.utils.getRelativeXY.XY_REGEX_))&&(n.x+=Number(r[1]),r[3]&&(n.y+=Number(r[3]))),(t=t.getAttribute("style"))&&-1<t.indexOf("translate")&&(t=t.match(e.utils.getRelativeXY.XY_STYLE_REGEX_))&&(n.x+=Number(t[1]),t[3]&&(n.y+=Number(t[3]))),n},e.utils.getInjectionDivXY_=function(t){for(var n=0,r=0;t;){var s=e.utils.getRelativeXY(t);if(n+=s.x,r+=s.y,-1!=(" "+(t.getAttribute("class")||"")+" ").indexOf(" injectionDiv "))break;t=t.parentNode}return new e.utils.Coordinate(n,r)},e.utils.getRelativeXY.XY_REGEX_=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,e.utils.getRelativeXY.XY_STYLE_REGEX_=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,e.utils.isRightButton=function(t){return!(!t.ctrlKey||!e.utils.userAgent.MAC)||2==t.button},e.utils.mouseToSvg=function(t,n,r){var s=n.createSVGPoint();return s.x=t.clientX,s.y=t.clientY,r||(r=n.getScreenCTM().inverse()),s.matrixTransform(r)},e.utils.getScrollDeltaPixels=function(t){switch(t.deltaMode){default:return{x:t.deltaX,y:t.deltaY};case 1:return{x:t.deltaX*e.LINE_MODE_MULTIPLIER,y:t.deltaY*e.LINE_MODE_MULTIPLIER};case 2:return{x:t.deltaX*e.PAGE_MODE_MULTIPLIER,y:t.deltaY*e.PAGE_MODE_MULTIPLIER}}},e.utils.tokenizeInterpolation=function(t){return e.utils.tokenizeInterpolation_(t,!0)},e.utils.replaceMessageReferences=function(t){return"string"!=typeof t?t:(t=e.utils.tokenizeInterpolation_(t,!1)).length?String(t[0]):""},e.utils.checkMessageReferences=function(t){for(var n=!0,r=e.Msg,s=t.match(/%{BKY_[A-Z]\w*}/gi),u=0;u<s.length;u++)null==r[s[u].toUpperCase().slice(6,-1)]&&(console.warn("No message string for "+s[u]+" in "+t),n=!1);return n},e.utils.tokenizeInterpolation_=function(t,n){var r=[],s=t.split("");s.push("");var u=0;t=[];for(var b=null,x=0;x<s.length;x++){var B=s[x];0==u?"%"==B?((B=t.join(""))&&r.push(B),t.length=0,u=1):t.push(B):1==u?"%"==B?(t.push(B),u=0):n&&"0"<=B&&"9">=B?(u=2,b=B,(B=t.join(""))&&r.push(B),t.length=0):"{"==B?u=3:(t.push("%",B),u=0):2==u?"0"<=B&&"9">=B?b+=B:(r.push(parseInt(b,10)),x--,u=0):3==u&&(""==B?(t.splice(0,0,"%{"),x--,u=0):"}"!=B?t.push(B):(u=t.join(""),/[A-Z]\w*/i.test(u)?(B=u.toUpperCase(),(B=e.utils.string.startsWith(B,"BKY_")?B.substring(4):null)&&B in e.Msg?"string"==typeof(u=e.Msg[B])?Array.prototype.push.apply(r,e.utils.tokenizeInterpolation_(u,n)):r.push(n?String(u):u):r.push("%{"+u+"}")):r.push("%{"+u+"}"),u=t.length=0))}for((B=t.join(""))&&r.push(B),n=[],x=t.length=0;x<r.length;++x)"string"==typeof r[x]?t.push(r[x]):((B=t.join(""))&&n.push(B),t.length=0,n.push(r[x]));return(B=t.join(""))&&n.push(B),t.length=0,n},e.utils.genUid=function(){for(var t=e.utils.genUid.soup_.length,n=[],r=0;20>r;r++)n[r]=e.utils.genUid.soup_.charAt(Math.random()*t);return n.join("")},e.utils.genUid.soup_="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e.utils.is3dSupported=function(){if(void 0!==e.utils.is3dSupported.cached_)return e.utils.is3dSupported.cached_;if(!e.utils.global.getComputedStyle)return!1;var t=document.createElement("p"),n="none",r={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};for(var s in document.body.insertBefore(t,null),r)if(void 0!==t.style[s]){if(t.style[s]="translate3d(1px,1px,1px)",!(n=e.utils.global.getComputedStyle(t)))return document.body.removeChild(t),!1;n=n.getPropertyValue(r[s])}return document.body.removeChild(t),e.utils.is3dSupported.cached_="none"!==n,e.utils.is3dSupported.cached_},e.utils.runAfterPageLoad=function(t){if("object"!=typeof document)throw Error("Blockly.utils.runAfterPageLoad() requires browser document.");if("complete"==document.readyState)t();else var n=setInterval(function(){"complete"==document.readyState&&(clearInterval(n),t())},10)},e.utils.getViewportBBox=function(){var t=e.utils.style.getViewportPageOffset();return new e.utils.Rect(t.y,document.documentElement.clientHeight+t.y,t.x,document.documentElement.clientWidth+t.x)},e.utils.arrayRemove=function(t,n){return-1!=(n=t.indexOf(n))&&(t.splice(n,1),!0)},e.utils.getDocumentScroll=function(){var t=document.documentElement,n=window;return e.utils.userAgent.IE&&n.pageYOffset!=t.scrollTop?new e.utils.Coordinate(t.scrollLeft,t.scrollTop):new e.utils.Coordinate(n.pageXOffset||t.scrollLeft,n.pageYOffset||t.scrollTop)},e.utils.getBlockTypeCounts=function(t,n){var r=Object.create(null),s=t.getDescendants(!0);for(n&&(t=t.getNextBlock())&&(t=s.indexOf(t),s.splice(t,s.length-t)),t=0;n=s[t];t++)r[n.type]?r[n.type]++:r[n.type]=1;return r},e.utils.screenToWsCoordinates=function(t,n){var r=n.x;n=n.y;var s=t.getInjectionDiv().getBoundingClientRect();return r=new e.utils.Coordinate(r-s.left,n-s.top),n=t.getOriginOffsetInPixels(),e.utils.Coordinate.difference(r,n).scale(1/t.scale)},e.utils.parseBlockColour=function(t){var n="string"==typeof t?e.utils.replaceMessageReferences(t):t,r=Number(n);if(!isNaN(r)&&0<=r&&360>=r)return{hue:r,hex:e.utils.colour.hsvToHex(r,e.HSV_SATURATION,255*e.HSV_VALUE)};if(r=e.utils.colour.parse(n))return{hue:null,hex:r};throw r='Invalid colour: "'+n+'"',t!=n&&(r+=' (from "'+t+'")'),Error(r)},e.Touch={},e.Touch.TOUCH_ENABLED="ontouchstart"in e.utils.global||!!(e.utils.global.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!e.utils.global.navigator||!e.utils.global.navigator.maxTouchPoints&&!e.utils.global.navigator.msMaxTouchPoints),e.Touch.touchIdentifier_=null,e.Touch.TOUCH_MAP={},e.utils.global.PointerEvent?e.Touch.TOUCH_MAP={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]}:e.Touch.TOUCH_ENABLED&&(e.Touch.TOUCH_MAP={mousedown:["touchstart"],mousemove:["touchmove"],mouseup:["touchend","touchcancel"]}),e.longPid_=0,e.longStart=function(t,n){e.longStop_(),t.changedTouches&&1!=t.changedTouches.length||(e.longPid_=setTimeout(function(){t.changedTouches&&(t.button=2,t.clientX=t.changedTouches[0].clientX,t.clientY=t.changedTouches[0].clientY),n&&n.handleRightClick(t)},e.LONGPRESS))},e.longStop_=function(){e.longPid_&&(clearTimeout(e.longPid_),e.longPid_=0)},e.Touch.clearTouchIdentifier=function(){e.Touch.touchIdentifier_=null},e.Touch.shouldHandleEvent=function(t){return!e.Touch.isMouseOrTouchEvent(t)||e.Touch.checkTouchIdentifier(t)},e.Touch.getTouchIdentifierFromEvent=function(t){return null!=t.pointerId?t.pointerId:t.changedTouches&&t.changedTouches[0]&&null!=t.changedTouches[0].identifier?t.changedTouches[0].identifier:"mouse"},e.Touch.checkTouchIdentifier=function(t){var n=e.Touch.getTouchIdentifierFromEvent(t);return null!=e.Touch.touchIdentifier_?e.Touch.touchIdentifier_==n:("mousedown"==t.type||"touchstart"==t.type||"pointerdown"==t.type)&&(e.Touch.touchIdentifier_=n,!0)},e.Touch.setClientFromTouch=function(t){if(e.utils.string.startsWith(t.type,"touch")){var n=t.changedTouches[0];t.clientX=n.clientX,t.clientY=n.clientY}},e.Touch.isMouseOrTouchEvent=function(t){return e.utils.string.startsWith(t.type,"touch")||e.utils.string.startsWith(t.type,"mouse")||e.utils.string.startsWith(t.type,"pointer")},e.Touch.isTouchEvent=function(t){return e.utils.string.startsWith(t.type,"touch")||e.utils.string.startsWith(t.type,"pointer")},e.Touch.splitEventByTouches=function(t){var n=[];if(t.changedTouches)for(var r=0;r<t.changedTouches.length;r++)n[r]={type:t.type,changedTouches:[t.changedTouches[r]],target:t.target,stopPropagation:function(){t.stopPropagation()},preventDefault:function(){t.preventDefault()}};else n.push(t);return n},e.browserEvents={},e.browserEvents.conditionalBind=function(t,n,r,s,u,b){var x=!1,B=function(Pt){var pt=!u;Pt=e.Touch.splitEventByTouches(Pt);for(var Ht,It=0;Ht=Pt[It];It++)(!pt||e.Touch.shouldHandleEvent(Ht))&&(e.Touch.setClientFromTouch(Ht),r?s.call(r,Ht):s(Ht),x=!0)},Z=[];if(e.utils.global.PointerEvent&&n in e.Touch.TOUCH_MAP)for(var et,ot=0;et=e.Touch.TOUCH_MAP[n][ot];ot++)t.addEventListener(et,B,!1),Z.push([t,et,B]);else if(t.addEventListener(n,B,!1),Z.push([t,n,B]),n in e.Touch.TOUCH_MAP){var Tt=function(Pt){B(Pt),x&&!b&&Pt.preventDefault()};for(ot=0;et=e.Touch.TOUCH_MAP[n][ot];ot++)t.addEventListener(et,Tt,!1),Z.push([t,et,Tt])}return Z},e.browserEvents.bind=function(t,n,r,s){var u=function(ot){r?s.call(r,ot):s(ot)},b=[];if(e.utils.global.PointerEvent&&n in e.Touch.TOUCH_MAP)for(var B,x=0;B=e.Touch.TOUCH_MAP[n][x];x++)t.addEventListener(B,u,!1),b.push([t,B,u]);else if(t.addEventListener(n,u,!1),b.push([t,n,u]),n in e.Touch.TOUCH_MAP){var Z=function(ot){if(ot.changedTouches&&1==ot.changedTouches.length){var et=ot.changedTouches[0];ot.clientX=et.clientX,ot.clientY=et.clientY}u(ot),ot.preventDefault()};for(x=0;B=e.Touch.TOUCH_MAP[n][x];x++)t.addEventListener(B,Z,!1),b.push([t,B,Z])}return b},e.browserEvents.unbind=function(t){for(;t.length;){var n=t.pop(),r=n[2];n[0].removeEventListener(n[1],r,!1)}return r},e.ComponentManager=function(){this.componentData_=Object.create(null),this.capabilityToComponentIds_=Object.create(null)},e.ComponentManager.prototype.addComponent=function(t,n){var r=t.component.id;if(!n&&this.componentData_[r])throw Error('Plugin "'+r+'" with capabilities "'+this.componentData_[r].capabilities+'" already added.');this.componentData_[r]=t,n=[];for(var s=0;s<t.capabilities.length;s++){var u=String(t.capabilities[s]).toLowerCase();n.push(u),void 0===this.capabilityToComponentIds_[u]?this.capabilityToComponentIds_[u]=[r]:this.capabilityToComponentIds_[u].push(r)}this.componentData_[r].capabilities=n},e.ComponentManager.prototype.removeComponent=function(t){var n=this.componentData_[t];if(n){for(var r=0;r<n.capabilities.length;r++){var s=String(n.capabilities[r]).toLowerCase();this.capabilityToComponentIds_[s].splice(this.capabilityToComponentIds_[s].indexOf(t),1)}delete this.componentData_[t]}},e.ComponentManager.prototype.addCapability=function(t,n){if(!this.getComponent(t))throw Error('Cannot add capability, "'+n+'". Plugin "'+t+'" has not been added to the ComponentManager');this.hasCapability(t,n)?console.warn('Plugin "'+t+'already has capability "'+n+'"'):(n=String(n).toLowerCase(),this.componentData_[t].capabilities.push(n),this.capabilityToComponentIds_[n].push(t))},e.ComponentManager.prototype.removeCapability=function(t,n){if(!this.getComponent(t))throw Error('Cannot remove capability, "'+n+'". Plugin "'+t+'" has not been added to the ComponentManager');this.hasCapability(t,n)?(n=String(n).toLowerCase(),this.componentData_[t].capabilities.splice(this.componentData_[t].capabilities.indexOf(n),1),this.capabilityToComponentIds_[n].splice(this.capabilityToComponentIds_[n].indexOf(t),1)):console.warn('Plugin "'+t+"doesn't have capability \""+n+'" to remove')},e.ComponentManager.prototype.hasCapability=function(t,n){return n=String(n).toLowerCase(),-1!==this.componentData_[t].capabilities.indexOf(n)},e.ComponentManager.prototype.getComponent=function(t){return this.componentData_[t]&&this.componentData_[t].component},e.ComponentManager.prototype.getComponents=function(t,n){if(t=String(t).toLowerCase(),!(t=this.capabilityToComponentIds_[t]))return[];var r=[];if(n){var s=[],u=this.componentData_;t.forEach(function(b){s.push(u[b])}),s.sort(function(b,x){return b.weight-x.weight}),s.forEach(function(b){r.push(b.component)})}else u=this.componentData_,t.forEach(function(b){r.push(u[b].component)});return r},e.ComponentManager.Capability=function(t){this.name_=t},e.ComponentManager.Capability.prototype.toString=function(){return this.name_},e.ComponentManager.Capability.POSITIONABLE=new e.ComponentManager.Capability("positionable"),e.ComponentManager.Capability.DRAG_TARGET=new e.ComponentManager.Capability("drag_target"),e.ComponentManager.Capability.DELETE_AREA=new e.ComponentManager.Capability("delete_area"),e.ComponentManager.Capability.AUTOHIDEABLE=new e.ComponentManager.Capability("autohideable"),e.utils.Svg=function(t){this.tagName_=t},e.utils.Svg.prototype.toString=function(){return this.tagName_},e.utils.Svg.ANIMATE=new e.utils.Svg("animate"),e.utils.Svg.CIRCLE=new e.utils.Svg("circle"),e.utils.Svg.CLIPPATH=new e.utils.Svg("clipPath"),e.utils.Svg.DEFS=new e.utils.Svg("defs"),e.utils.Svg.FECOMPOSITE=new e.utils.Svg("feComposite"),e.utils.Svg.FECOMPONENTTRANSFER=new e.utils.Svg("feComponentTransfer"),e.utils.Svg.FEFLOOD=new e.utils.Svg("feFlood"),e.utils.Svg.FEFUNCA=new e.utils.Svg("feFuncA"),e.utils.Svg.FEGAUSSIANBLUR=new e.utils.Svg("feGaussianBlur"),e.utils.Svg.FEPOINTLIGHT=new e.utils.Svg("fePointLight"),e.utils.Svg.FESPECULARLIGHTING=new e.utils.Svg("feSpecularLighting"),e.utils.Svg.FILTER=new e.utils.Svg("filter"),e.utils.Svg.FOREIGNOBJECT=new e.utils.Svg("foreignObject"),e.utils.Svg.G=new e.utils.Svg("g"),e.utils.Svg.IMAGE=new e.utils.Svg("image"),e.utils.Svg.LINE=new e.utils.Svg("line"),e.utils.Svg.PATH=new e.utils.Svg("path"),e.utils.Svg.PATTERN=new e.utils.Svg("pattern"),e.utils.Svg.POLYGON=new e.utils.Svg("polygon"),e.utils.Svg.RECT=new e.utils.Svg("rect"),e.utils.Svg.SVG=new e.utils.Svg("svg"),e.utils.Svg.TEXT=new e.utils.Svg("text"),e.utils.Svg.TSPAN=new e.utils.Svg("tspan"),e.utils.dom={},e.utils.dom.SVG_NS="http://www.w3.org/2000/svg",e.utils.dom.HTML_NS="http://www.w3.org/1999/xhtml",e.utils.dom.XLINK_NS="http://www.w3.org/1999/xlink",e.utils.dom.NodeType={ELEMENT_NODE:1,TEXT_NODE:3,COMMENT_NODE:8,DOCUMENT_POSITION_CONTAINED_BY:16},e.utils.dom.cacheWidths_=null,e.utils.dom.cacheReference_=0,e.utils.dom.canvasContext_=null,e.utils.dom.createSvgElement=function(t,n,r){for(var s in t=document.createElementNS(e.utils.dom.SVG_NS,String(t)),n)t.setAttribute(s,n[s]);return document.body.runtimeStyle&&(t.runtimeStyle=t.currentStyle=t.style),r&&r.appendChild(t),t},e.utils.dom.addClass=function(t,n){var r=t.getAttribute("class")||"";return-1==(" "+r+" ").indexOf(" "+n+" ")&&(r&&(r+=" "),t.setAttribute("class",r+n),!0)},e.utils.dom.removeClasses=function(t,n){n=n.split(" ");for(var r=0;r<n.length;r++)e.utils.dom.removeClass(t,n[r])},e.utils.dom.removeClass=function(t,n){var r=t.getAttribute("class");if(-1==(" "+r+" ").indexOf(" "+n+" "))return!1;r=r.split(/\s+/);for(var s=0;s<r.length;s++)r[s]&&r[s]!=n||(r.splice(s,1),s--);return r.length?t.setAttribute("class",r.join(" ")):t.removeAttribute("class"),!0},e.utils.dom.hasClass=function(t,n){return-1!=(" "+t.getAttribute("class")+" ").indexOf(" "+n+" ")},e.utils.dom.removeNode=function(t){return t&&t.parentNode?t.parentNode.removeChild(t):null},e.utils.dom.insertAfter=function(t,n){var r=n.nextSibling;if(!(n=n.parentNode))throw Error("Reference node has no parent.");r?n.insertBefore(t,r):n.appendChild(t)},e.utils.dom.containsNode=function(t,n){return!!(t.compareDocumentPosition(n)&e.utils.dom.NodeType.DOCUMENT_POSITION_CONTAINED_BY)},e.utils.dom.setCssTransform=function(t,n){t.style.transform=n,t.style["-webkit-transform"]=n},e.utils.dom.startTextWidthCache=function(){e.utils.dom.cacheReference_++,e.utils.dom.cacheWidths_||(e.utils.dom.cacheWidths_=Object.create(null))},e.utils.dom.stopTextWidthCache=function(){e.utils.dom.cacheReference_--,e.utils.dom.cacheReference_||(e.utils.dom.cacheWidths_=null)},e.utils.dom.getTextWidth=function(t){var r,n=t.textContent+"\n"+t.className.baseVal;if(e.utils.dom.cacheWidths_&&(r=e.utils.dom.cacheWidths_[n]))return r;try{r=e.utils.userAgent.IE||e.utils.userAgent.EDGE?t.getBBox().width:t.getComputedTextLength()}catch(s){return 8*t.textContent.length}return e.utils.dom.cacheWidths_&&(e.utils.dom.cacheWidths_[n]=r),r},e.utils.dom.getFastTextWidth=function(t,n,r,s){return e.utils.dom.getFastTextWidthWithSizeString(t,n+"pt",r,s)},e.utils.dom.getFastTextWidthWithSizeString=function(t,n,r,s){var b,u=t.textContent;return t=u+"\n"+t.className.baseVal,e.utils.dom.cacheWidths_&&(b=e.utils.dom.cacheWidths_[t])||(e.utils.dom.canvasContext_||((b=document.createElement("canvas")).className="blocklyComputeCanvas",document.body.appendChild(b),e.utils.dom.canvasContext_=b.getContext("2d")),e.utils.dom.canvasContext_.font=r+" "+n+" "+s,b=e.utils.dom.canvasContext_.measureText(u).width,e.utils.dom.cacheWidths_&&(e.utils.dom.cacheWidths_[t]=b)),b},e.utils.dom.measureFontMetrics=function(t,n,r,s){var u=document.createElement("span");u.style.font=r+" "+n+" "+s,u.textContent=t,(t=document.createElement("div")).style.width="1px",t.style.height="0px",(n=document.createElement("div")).setAttribute("style","position: fixed; top: 0; left: 0; display: flex;"),n.appendChild(u),n.appendChild(t),document.body.appendChild(n);try{r={},n.style.alignItems="baseline",r.baseline=t.offsetTop-u.offsetTop,n.style.alignItems="flex-end",r.height=t.offsetTop-u.offsetTop}finally{document.body.removeChild(n)}return r},e.utils.math={},e.utils.math.toRadians=function(t){return t*Math.PI/180},e.utils.math.toDegrees=function(t){return 180*t/Math.PI},e.utils.math.clamp=function(t,n,r){if(r<t){var s=r;r=t,t=s}return Math.max(t,Math.min(n,r))},e.DropDownDiv=function(){},e.DropDownDiv.boundsElement_=null,e.DropDownDiv.owner_=null,e.DropDownDiv.positionToField_=null,e.DropDownDiv.ARROW_SIZE=16,e.DropDownDiv.BORDER_SIZE=1,e.DropDownDiv.ARROW_HORIZONTAL_PADDING=12,e.DropDownDiv.PADDING_Y=16,e.DropDownDiv.ANIMATION_TIME=.25,e.DropDownDiv.animateOutTimer_=null,e.DropDownDiv.onHide_=null,e.DropDownDiv.rendererClassName_="",e.DropDownDiv.themeClassName_="",e.DropDownDiv.createDom=function(){if(!e.DropDownDiv.DIV_){var t=document.createElement("div");t.className="blocklyDropDownDiv",(e.parentContainer||document.body).appendChild(t),e.DropDownDiv.DIV_=t;var n=document.createElement("div");n.className="blocklyDropDownContent",t.appendChild(n),e.DropDownDiv.content_=n,(n=document.createElement("div")).className="blocklyDropDownArrow",t.appendChild(n),e.DropDownDiv.arrow_=n,e.DropDownDiv.DIV_.style.opacity=0,e.DropDownDiv.DIV_.style.transition="transform "+e.DropDownDiv.ANIMATION_TIME+"s, opacity "+e.DropDownDiv.ANIMATION_TIME+"s",t.addEventListener("focusin",function(){e.utils.dom.addClass(t,"blocklyFocused")}),t.addEventListener("focusout",function(){e.utils.dom.removeClass(t,"blocklyFocused")})}},e.DropDownDiv.setBoundsElement=function(t){e.DropDownDiv.boundsElement_=t},e.DropDownDiv.getContentDiv=function(){return e.DropDownDiv.content_},e.DropDownDiv.clearContent=function(){e.DropDownDiv.content_.textContent="",e.DropDownDiv.content_.style.width=""},e.DropDownDiv.setColour=function(t,n){e.DropDownDiv.DIV_.style.backgroundColor=t,e.DropDownDiv.DIV_.style.borderColor=n},e.DropDownDiv.showPositionedByBlock=function(t,n,r,s){return e.DropDownDiv.showPositionedByRect_(e.DropDownDiv.getScaledBboxOfBlock_(n),t,r,s)},e.DropDownDiv.showPositionedByField=function(t,n,r){return e.DropDownDiv.positionToField_=!0,e.DropDownDiv.showPositionedByRect_(e.DropDownDiv.getScaledBboxOfField_(t),t,n,r)},e.DropDownDiv.getScaledBboxOfBlock_=function(t){var n=t.getSvgRoot(),r=n.getBBox(),s=t.workspace.scale;return t=r.height*s,r=r.width*s,n=e.utils.style.getPageOffset(n),new e.utils.Rect(n.y,n.y+t,n.x,n.x+r)},e.DropDownDiv.getScaledBboxOfField_=function(t){return t=t.getScaledBBox(),new e.utils.Rect(t.top,t.bottom,t.left,t.right)},e.DropDownDiv.showPositionedByRect_=function(t,n,r,s){var u=t.left+(t.right-t.left)/2,b=t.bottom;t=t.top,s&&(t+=s);for(var x=(s=n.getSourceBlock()).workspace;x.options.parentWorkspace;)x=x.options.parentWorkspace;return e.DropDownDiv.setBoundsElement(x.getParentSvg().parentNode),e.DropDownDiv.show(n,s.RTL,u,b,u,t,r)},e.DropDownDiv.show=function(t,n,r,s,u,b,x){return e.DropDownDiv.owner_=t,e.DropDownDiv.onHide_=x||null,(t=e.DropDownDiv.DIV_).style.direction=n?"rtl":"ltr",n=e.getMainWorkspace(),e.DropDownDiv.rendererClassName_=n.getRenderer().getClassName(),e.DropDownDiv.themeClassName_=n.getTheme().getClassName(),e.utils.dom.addClass(t,e.DropDownDiv.rendererClassName_),e.utils.dom.addClass(t,e.DropDownDiv.themeClassName_),e.DropDownDiv.positionInternal_(r,s,u,b)},e.DropDownDiv.getBoundsInfo_=function(){var t=e.utils.style.getPageOffset(e.DropDownDiv.boundsElement_),n=e.utils.style.getSize(e.DropDownDiv.boundsElement_);return{left:t.x,right:t.x+n.width,top:t.y,bottom:t.y+n.height,width:n.width,height:n.height}},e.DropDownDiv.getPositionMetrics_=function(t,n,r,s){var u=e.DropDownDiv.getBoundsInfo_(),b=e.utils.style.getSize(e.DropDownDiv.DIV_);return n+b.height<u.bottom?e.DropDownDiv.getPositionBelowMetrics_(t,n,u,b):s-b.height>u.top?e.DropDownDiv.getPositionAboveMetrics_(r,s,u,b):n+b.height<document.documentElement.clientHeight?e.DropDownDiv.getPositionBelowMetrics_(t,n,u,b):s-b.height>document.documentElement.clientTop?e.DropDownDiv.getPositionAboveMetrics_(r,s,u,b):e.DropDownDiv.getPositionTopOfPageMetrics_(t,u,b)},e.DropDownDiv.getPositionBelowMetrics_=function(t,n,r,s){return{initialX:(t=e.DropDownDiv.getPositionX(t,r.left,r.right,s.width)).divX,initialY:n,finalX:t.divX,finalY:n+e.DropDownDiv.PADDING_Y,arrowX:t.arrowX,arrowY:-(e.DropDownDiv.ARROW_SIZE/2+e.DropDownDiv.BORDER_SIZE),arrowAtTop:!0,arrowVisible:!0}},e.DropDownDiv.getPositionAboveMetrics_=function(t,n,r,s){return{initialX:(t=e.DropDownDiv.getPositionX(t,r.left,r.right,s.width)).divX,initialY:n-s.height,finalX:t.divX,finalY:n-s.height-e.DropDownDiv.PADDING_Y,arrowX:t.arrowX,arrowY:s.height-2*e.DropDownDiv.BORDER_SIZE-e.DropDownDiv.ARROW_SIZE/2,arrowAtTop:!1,arrowVisible:!0}},e.DropDownDiv.getPositionTopOfPageMetrics_=function(t,n,r){return{initialX:(t=e.DropDownDiv.getPositionX(t,n.left,n.right,r.width)).divX,initialY:0,finalX:t.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},e.DropDownDiv.getPositionX=function(t,n,r,s){var u=t;return t=e.utils.math.clamp(n,t-s/2,r-s),{arrowX:s=e.utils.math.clamp(n=e.DropDownDiv.ARROW_HORIZONTAL_PADDING,(u-=e.DropDownDiv.ARROW_SIZE/2)-t,s-n-e.DropDownDiv.ARROW_SIZE),divX:t}},e.DropDownDiv.isVisible=function(){return!!e.DropDownDiv.owner_},e.DropDownDiv.hideIfOwner=function(t,n){return e.DropDownDiv.owner_===t&&(n?e.DropDownDiv.hideWithoutAnimation():e.DropDownDiv.hide(),!0)},e.DropDownDiv.hide=function(){var t=e.DropDownDiv.DIV_;t.style.transform="translate(0, 0)",t.style.opacity=0,e.DropDownDiv.animateOutTimer_=setTimeout(function(){e.DropDownDiv.hideWithoutAnimation()},1e3*e.DropDownDiv.ANIMATION_TIME),e.DropDownDiv.onHide_&&(e.DropDownDiv.onHide_(),e.DropDownDiv.onHide_=null)},e.DropDownDiv.hideWithoutAnimation=function(){if(e.DropDownDiv.isVisible()){e.DropDownDiv.animateOutTimer_&&clearTimeout(e.DropDownDiv.animateOutTimer_);var t=e.DropDownDiv.DIV_;t.style.transform="",t.style.left="",t.style.top="",t.style.opacity=0,t.style.display="none",t.style.backgroundColor="",t.style.borderColor="",e.DropDownDiv.onHide_&&(e.DropDownDiv.onHide_(),e.DropDownDiv.onHide_=null),e.DropDownDiv.clearContent(),e.DropDownDiv.owner_=null,e.DropDownDiv.rendererClassName_&&(e.utils.dom.removeClass(t,e.DropDownDiv.rendererClassName_),e.DropDownDiv.rendererClassName_=""),e.DropDownDiv.themeClassName_&&(e.utils.dom.removeClass(t,e.DropDownDiv.themeClassName_),e.DropDownDiv.themeClassName_=""),e.getMainWorkspace().markFocused()}},e.DropDownDiv.positionInternal_=function(t,n,r,s){(t=e.DropDownDiv.getPositionMetrics_(t,n,r,s)).arrowVisible?(e.DropDownDiv.arrow_.style.display="",e.DropDownDiv.arrow_.style.transform="translate("+t.arrowX+"px,"+t.arrowY+"px) rotate(45deg)",e.DropDownDiv.arrow_.setAttribute("class",t.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):e.DropDownDiv.arrow_.style.display="none",n=Math.floor(t.initialX),r=Math.floor(t.initialY),s=Math.floor(t.finalX);var u=Math.floor(t.finalY),b=e.DropDownDiv.DIV_;return b.style.left=n+"px",b.style.top=r+"px",b.style.display="block",b.style.opacity=1,b.style.transform="translate("+(s-n)+"px,"+(u-r)+"px)",!!t.arrowAtTop},e.DropDownDiv.repositionForWindowResize=function(){if(e.DropDownDiv.owner_){var t=e.DropDownDiv.owner_,n=t.getSourceBlock();t=e.DropDownDiv.positionToField_?e.DropDownDiv.getScaledBboxOfField_(t):e.DropDownDiv.getScaledBboxOfBlock_(n),e.DropDownDiv.positionInternal_(n=t.left+(t.right-t.left)/2,t.bottom,n,t.top)}else e.DropDownDiv.hide()},e.registry={},e.registry.typeMap_=Object.create(null),e.registry.DEFAULT="default",e.registry.Type=function(t){this.name_=t},e.registry.Type.prototype.toString=function(){return this.name_},e.registry.Type.CONNECTION_CHECKER=new e.registry.Type("connectionChecker"),e.registry.Type.CURSOR=new e.registry.Type("cursor"),e.registry.Type.EVENT=new e.registry.Type("event"),e.registry.Type.FIELD=new e.registry.Type("field"),e.registry.Type.RENDERER=new e.registry.Type("renderer"),e.registry.Type.TOOLBOX=new e.registry.Type("toolbox"),e.registry.Type.THEME=new e.registry.Type("theme"),e.registry.Type.TOOLBOX_ITEM=new e.registry.Type("toolboxItem"),e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX=new e.registry.Type("flyoutsVerticalToolbox"),e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX=new e.registry.Type("flyoutsHorizontalToolbox"),e.registry.Type.METRICS_MANAGER=new e.registry.Type("metricsManager"),e.registry.Type.BLOCK_DRAGGER=new e.registry.Type("blockDragger"),e.registry.register=function(t,n,r,s){if(!(t instanceof e.registry.Type)&&"string"!=typeof t||""==String(t).trim())throw Error('Invalid type "'+t+'". The type must be a non-empty string or a Blockly.registry.Type.');if(t=String(t).toLowerCase(),"string"!=typeof n||""==n.trim())throw Error('Invalid name "'+n+'". The name must be a non-empty string.');if(n=n.toLowerCase(),!r)throw Error("Can not register a null value");var u=e.registry.typeMap_[t];if(u||(u=e.registry.typeMap_[t]=Object.create(null)),e.registry.validate_(t,r),!s&&u[n])throw Error('Name "'+n+'" with type "'+t+'" already registered.');u[n]=r},e.registry.validate_=function(t,n){if(t===String(e.registry.Type.FIELD)&&"function"!=typeof n.fromJson)throw Error('Type "'+t+'" must have a fromJson function')},e.registry.unregister=function(t,n){t=String(t).toLowerCase(),n=n.toLowerCase();var r=e.registry.typeMap_[t];r&&r[n]?delete e.registry.typeMap_[t][n]:console.warn("Unable to unregister ["+n+"]["+t+"] from the registry.")},e.registry.getItem_=function(t,n,r){t=String(t).toLowerCase(),n=n.toLowerCase();var s=e.registry.typeMap_[t];if(!s||!s[n]){if(n="Unable to find ["+n+"]["+t+"] in the registry.",r)throw Error(n+" You must require or register a "+t+" plugin.");return console.warn(n),null}return s[n]},e.registry.hasItem=function(t,n){return t=String(t).toLowerCase(),n=n.toLowerCase(),!!(t=e.registry.typeMap_[t])&&!!t[n]},e.registry.getClass=function(t,n,r){return e.registry.getItem_(t,n,r)},e.registry.getObject=function(t,n,r){return e.registry.getItem_(t,n,r)},e.registry.getClassFromOptions=function(t,n,r){return"function"==typeof(n=n.plugins[t.toString()]||e.registry.DEFAULT)?n:e.registry.getClass(t,n,r)},e.Events={},e.Events.group_="",e.Events.recordUndo=!0,e.Events.disabled_=0,e.Events.CREATE="create",e.Events.BLOCK_CREATE=e.Events.CREATE,e.Events.DELETE="delete",e.Events.BLOCK_DELETE=e.Events.DELETE,e.Events.CHANGE="change",e.Events.BLOCK_CHANGE=e.Events.CHANGE,e.Events.MOVE="move",e.Events.BLOCK_MOVE=e.Events.MOVE,e.Events.VAR_CREATE="var_create",e.Events.VAR_DELETE="var_delete",e.Events.VAR_RENAME="var_rename",e.Events.UI="ui",e.Events.BLOCK_DRAG="drag",e.Events.SELECTED="selected",e.Events.CLICK="click",e.Events.MARKER_MOVE="marker_move",e.Events.BUBBLE_OPEN="bubble_open",e.Events.TRASHCAN_OPEN="trashcan_open",e.Events.TOOLBOX_ITEM_SELECT="toolbox_item_select",e.Events.THEME_CHANGE="theme_change",e.Events.VIEWPORT_CHANGE="viewport_change",e.Events.COMMENT_CREATE="comment_create",e.Events.COMMENT_DELETE="comment_delete",e.Events.COMMENT_CHANGE="comment_change",e.Events.COMMENT_MOVE="comment_move",e.Events.FINISHED_LOADING="finished_loading",e.Events.BUMP_EVENTS=[e.Events.BLOCK_CREATE,e.Events.BLOCK_MOVE,e.Events.COMMENT_CREATE,e.Events.COMMENT_MOVE],e.Events.FIRE_QUEUE_=[],e.Events.fire=function(t){e.Events.isEnabled()&&(e.Events.FIRE_QUEUE_.length||setTimeout(e.Events.fireNow_,0),e.Events.FIRE_QUEUE_.push(t))},e.Events.fireNow_=function(){for(var r,t=e.Events.filter(e.Events.FIRE_QUEUE_,!0),n=e.Events.FIRE_QUEUE_.length=0;r=t[n];n++)if(r.workspaceId){var s=e.Workspace.getById(r.workspaceId);s&&s.fireChangeListener(r)}},e.Events.filter=function(t,n){t=t.slice(),n||t.reverse();for(var b,r=[],s=Object.create(null),u=0;b=t[u];u++)if(!b.isNull()){var x=[b.isUiEvent?e.Events.UI:b.type,b.blockId,b.workspaceId].join(" "),B=s[x],Z=B?B.event:null;B?b.type==e.Events.MOVE&&B.index==u-1?(Z.newParentId=b.newParentId,Z.newInputName=b.newInputName,Z.newCoordinate=b.newCoordinate,B.index=u):b.type==e.Events.CHANGE&&b.element==Z.element&&b.name==Z.name?Z.newValue=b.newValue:b.type==e.Events.VIEWPORT_CHANGE?(Z.viewTop=b.viewTop,Z.viewLeft=b.viewLeft,Z.scale=b.scale,Z.oldScale=b.oldScale):(b.type!=e.Events.CLICK||Z.type!=e.Events.BUBBLE_OPEN)&&(s[x]={event:b,index:u},r.push(b)):(s[x]={event:b,index:u},r.push(b))}for(t=r.filter(function(ot){return!ot.isNull()}),n||t.reverse(),u=1;b=t[u];u++)b.type==e.Events.CHANGE&&"mutation"==b.element&&t.unshift(t.splice(u,1)[0]);return t},e.Events.clearPendingUndo=function(){for(var n,t=0;n=e.Events.FIRE_QUEUE_[t];t++)n.recordUndo=!1},e.Events.disable=function(){e.Events.disabled_++},e.Events.enable=function(){e.Events.disabled_--},e.Events.isEnabled=function(){return 0==e.Events.disabled_},e.Events.getGroup=function(){return e.Events.group_},e.Events.setGroup=function(t){e.Events.group_="boolean"==typeof t?t?e.utils.genUid():"":t},e.Events.getDescendantIds=function(t){var n=[];t=t.getDescendants(!1);for(var s,r=0;s=t[r];r++)n[r]=s.id;return n},e.Events.fromJson=function(t,n){var r=e.Events.get(t.type);if(!r)throw Error("Unknown event type.");return(r=new r).fromJson(t),r.workspaceId=n.id,r},e.Events.get=function(t){return e.registry.getClass(e.registry.Type.EVENT,t)},e.Events.disableOrphans=function(t){if((t.type==e.Events.MOVE||t.type==e.Events.CREATE)&&t.workspaceId){var n=e.Workspace.getById(t.workspaceId),r=n.getBlockById(t.blockId);if(r){t=e.Events.recordUndo;try{e.Events.recordUndo=!1;var s=r.getParent();if(s&&s.isEnabled()){var b,u=r.getDescendants(!1);for(n=0;b=u[n];n++)b.setEnabled(!0)}else if((r.outputConnection||r.previousConnection)&&!n.isDragging())do{r.setEnabled(!1),r=r.getNextBlock()}while(r)}finally{e.Events.recordUndo=t}}}},e.Events.Abstract=function(){this.isBlank=null,this.workspaceId=void 0,this.group=e.Events.getGroup(),this.recordUndo=e.Events.recordUndo},e.Events.Abstract.prototype.isUiEvent=!1,e.Events.Abstract.prototype.toJson=function(){var t={type:this.type};return this.group&&(t.group=this.group),t},e.Events.Abstract.prototype.fromJson=function(t){this.isBlank=!1,this.group=t.group},e.Events.Abstract.prototype.isNull=function(){return!1},e.Events.Abstract.prototype.run=function(t){},e.Events.Abstract.prototype.getEventWorkspace_=function(){if(this.workspaceId)var t=e.Workspace.getById(this.workspaceId);if(!t)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return t},e.utils.object={},e.utils.object.inherits=function(t,n){t.superClass_=n.prototype,t.prototype=Object.create(n.prototype),t.prototype.constructor=t},e.utils.object.mixin=function(t,n){for(var r in n)t[r]=n[r]},e.utils.object.deepMerge=function(t,n){for(var r in n)t[r]=null!=n[r]&&"object"==typeof n[r]?e.utils.object.deepMerge(t[r]||Object.create(null),n[r]):n[r];return t},e.utils.object.values=function(t){return Object.values?Object.values(t):Object.keys(t).map(function(n){return t[n]})},e.utils.xml={},e.utils.xml.NAME_SPACE="https://developers.google.com/blockly/xml",e.utils.xml.document=function(){return document},e.utils.xml.createElement=function(t){return e.utils.xml.document().createElementNS(e.utils.xml.NAME_SPACE,t)},e.utils.xml.createTextNode=function(t){return e.utils.xml.document().createTextNode(t)},e.utils.xml.textToDomDocument=function(t){return(new DOMParser).parseFromString(t,"text/xml")},e.utils.xml.domToText=function(t){return(new XMLSerializer).serializeToString(t)},e.inputTypes={VALUE:e.connectionTypes.INPUT_VALUE,STATEMENT:e.connectionTypes.NEXT_STATEMENT,DUMMY:5},e.Xml={},e.Xml.workspaceToDom=function(t,n){var r=e.utils.xml.createElement("xml"),s=e.Xml.variablesToDom(e.Variables.allUsedVarModels(t));s.hasChildNodes()&&r.appendChild(s);var b,u=t.getTopComments(!0);for(s=0;b=u[s];s++)r.appendChild(b.toXmlWithXY(n));for(t=t.getTopBlocks(!0),s=0;u=t[s];s++)r.appendChild(e.Xml.blockToDomWithXY(u,n));return r},e.Xml.variablesToDom=function(t){for(var s,n=e.utils.xml.createElement("variables"),r=0;s=t[r];r++){var u=e.utils.xml.createElement("variable");u.appendChild(e.utils.xml.createTextNode(s.name)),s.type&&u.setAttribute("type",s.type),u.id=s.getId(),n.appendChild(u)}return n},e.Xml.blockToDomWithXY=function(t,n){if(t.isInsertionMarker()&&!(t=t.getChildren(!1)[0]))return new DocumentFragment;var r;t.workspace.RTL&&(r=t.workspace.getWidth()),n=e.Xml.blockToDom(t,n);var s=t.getRelativeToSurfaceXY();return n.setAttribute("x",Math.round(t.workspace.RTL?r-s.x:s.x)),n.setAttribute("y",Math.round(s.y)),n},e.Xml.fieldToDom_=function(t){if(t.isSerializable()){var n=e.utils.xml.createElement("field");return n.setAttribute("name",t.name||""),t.toXml(n)}return null},e.Xml.allFieldsToDom_=function(t,n){for(var s,r=0;s=t.inputList[r];r++)for(var b,u=0;b=s.fieldRow[u];u++)(b=e.Xml.fieldToDom_(b))&&n.appendChild(b)},e.Xml.blockToDom=function(t,n){if(t.isInsertionMarker())return(t=t.getChildren(!1)[0])?e.Xml.blockToDom(t):new DocumentFragment;var r=e.utils.xml.createElement(t.isShadow()?"shadow":"block");if(r.setAttribute("type",t.type),n||r.setAttribute("id",t.id),t.mutationToDom){var s=t.mutationToDom();s&&(s.hasChildNodes()||s.hasAttributes())&&r.appendChild(s)}if(e.Xml.allFieldsToDom_(t,r),s=t.getCommentText()){var u=t.commentModel.size,b=t.commentModel.pinned,x=e.utils.xml.createElement("comment");x.appendChild(e.utils.xml.createTextNode(s)),x.setAttribute("pinned",b),x.setAttribute("h",u.height),x.setAttribute("w",u.width),r.appendChild(x)}for(t.data&&((s=e.utils.xml.createElement("data")).appendChild(e.utils.xml.createTextNode(t.data)),r.appendChild(s)),s=0;u=t.inputList[s];s++){var B;if(b=!0,u.type!=e.inputTypes.DUMMY){var Z=u.connection.targetBlock();u.type==e.inputTypes.VALUE?B=e.utils.xml.createElement("value"):u.type==e.inputTypes.STATEMENT&&(B=e.utils.xml.createElement("statement")),!(x=u.connection.getShadowDom())||Z&&Z.isShadow()||B.appendChild(e.Xml.cloneShadow_(x,n)),Z&&(x=e.Xml.blockToDom(Z,n)).nodeType==e.utils.dom.NodeType.ELEMENT_NODE&&(B.appendChild(x),b=!1),B.setAttribute("name",u.name),b||r.appendChild(B)}}return null!=t.inputsInline&&t.inputsInline!=t.inputsInlineDefault&&r.setAttribute("inline",t.inputsInline),t.isCollapsed()&&r.setAttribute("collapsed",!0),t.isEnabled()||r.setAttribute("disabled",!0),t.isDeletable()||t.isShadow()||r.setAttribute("deletable",!1),t.isMovable()||t.isShadow()||r.setAttribute("movable",!1),t.isEditable()||r.setAttribute("editable",!1),(s=t.getNextBlock())&&(x=e.Xml.blockToDom(s,n)).nodeType==e.utils.dom.NodeType.ELEMENT_NODE&&((B=e.utils.xml.createElement("next")).appendChild(x),r.appendChild(B)),!(x=t.nextConnection&&t.nextConnection.getShadowDom())||s&&s.isShadow()||B.appendChild(e.Xml.cloneShadow_(x,n)),r},e.Xml.cloneShadow_=function(t,n){for(var s,r=t=t.cloneNode(!0);r;)if(n&&"shadow"==r.nodeName&&r.removeAttribute("id"),r.firstChild)r=r.firstChild;else{for(;r&&!r.nextSibling;)s=r,r=r.parentNode,s.nodeType==e.utils.dom.NodeType.TEXT_NODE&&""==s.data.trim()&&r.firstChild!=s&&e.utils.dom.removeNode(s);r&&(s=r,r=r.nextSibling,s.nodeType==e.utils.dom.NodeType.TEXT_NODE&&""==s.data.trim()&&e.utils.dom.removeNode(s))}return t},e.Xml.domToText=function(t){return e.utils.xml.domToText(t).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},e.Xml.domToPrettyText=function(t){t=e.Xml.domToText(t).split("<");for(var n="",r=1;r<t.length;r++){var s=t[r];"/"==s[0]&&(n=n.substring(2)),t[r]=n+"<"+s,"/"!=s[0]&&"/>"!=s.slice(-2)&&(n+="  ")}return(t=(t=t.join("\n")).replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>")).replace(/^\n/,"")},e.Xml.textToDom=function(t){var n=e.utils.xml.textToDomDocument(t);if(!n||!n.documentElement||n.getElementsByTagName("parsererror").length)throw Error("textToDom was unable to parse: "+t);return n.documentElement},e.Xml.clearWorkspaceAndLoadFromXml=function(t,n){return n.setResizesEnabled(!1),n.clear(),t=e.Xml.domToWorkspace(t,n),n.setResizesEnabled(!0),t},e.Xml.domToWorkspace=function(t,n){if(t instanceof e.Workspace){var r=t;t=n,n=r,console.warn("Deprecated call to Blockly.Xml.domToWorkspace, swap the arguments.")}var s;n.RTL&&(s=n.getWidth()),r=[],e.utils.dom.startTextWidthCache();var u=e.Events.getGroup();u||e.Events.setGroup(!0),n.setResizesEnabled&&n.setResizesEnabled(!1);var b=!0;try{for(var B,x=0;B=t.childNodes[x];x++){var Z=B.nodeName.toLowerCase(),ot=B;if("block"==Z||"shadow"==Z&&!e.Events.recordUndo){var et=e.Xml.domToBlock(ot,n);r.push(et.id);var Tt=ot.hasAttribute("x")?parseInt(ot.getAttribute("x"),10):10,Pt=ot.hasAttribute("y")?parseInt(ot.getAttribute("y"),10):10;isNaN(Tt)||isNaN(Pt)||et.moveBy(n.RTL?s-Tt:Tt,Pt),b=!1}else{if("shadow"==Z)throw TypeError("Shadow block cannot be a top-level block.");if("comment"==Z)n.rendered?e.WorkspaceCommentSvg?e.WorkspaceCommentSvg.fromXml(ot,n,s):console.warn("Missing require for Blockly.WorkspaceCommentSvg, ignoring workspace comment."):e.WorkspaceComment?e.WorkspaceComment.fromXml(ot,n):console.warn("Missing require for Blockly.WorkspaceComment, ignoring workspace comment.");else if("variables"==Z){if(!b)throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");e.Xml.domToVariables(ot,n),b=!1}}}}finally{u||e.Events.setGroup(!1),e.utils.dom.stopTextWidthCache()}return n.setResizesEnabled&&n.setResizesEnabled(!0),e.Events.fire(new(e.Events.get(e.Events.FINISHED_LOADING))(n)),r},e.Xml.appendDomToWorkspace=function(t,n){var r;if(Object.prototype.hasOwnProperty.call(n,"scale")&&(r=n.getBlocksBoundingBox()),t=e.Xml.domToWorkspace(t,n),r&&r.top!=r.bottom){var s=r.bottom,u=n.RTL?r.right:r.left,b=1/0,x=-1/0,B=1/0;for(r=0;r<t.length;r++){var Z=n.getBlockById(t[r]).getRelativeToSurfaceXY();Z.y<B&&(B=Z.y),Z.x<b&&(b=Z.x),Z.x>x&&(x=Z.x)}for(s=s-B+10,u=n.RTL?u-x:u-b,r=0;r<t.length;r++)n.getBlockById(t[r]).moveBy(u,s)}return t},e.Xml.domToBlock=function(t,n){if(t instanceof e.Workspace){var r=t;t=n,n=r,console.warn("Deprecated call to Blockly.Xml.domToBlock, swap the arguments.")}e.Events.disable(),r=n.getAllVariables();try{var s=e.Xml.domToBlockHeadless_(t,n),u=s.getDescendants(!1);if(n.rendered){s.setConnectionTracking(!1);for(var b=u.length-1;0<=b;b--)u[b].initSvg();for(b=u.length-1;0<=b;b--)u[b].render(!1);setTimeout(function(){s.disposed||s.setConnectionTracking(!0)},1),s.updateDisabled(),n.resizeContents()}else for(b=u.length-1;0<=b;b--)u[b].initModel()}finally{e.Events.enable()}if(e.Events.isEnabled()){for(t=e.Variables.getAddedVariables(n,r),b=0;b<t.length;b++)n=t[b],e.Events.fire(new(e.Events.get(e.Events.VAR_CREATE))(n));e.Events.fire(new(e.Events.get(e.Events.CREATE))(s))}return s},e.Xml.domToVariables=function(t,n){for(var s,r=0;s=t.childNodes[r];r++)if(s.nodeType==e.utils.dom.NodeType.ELEMENT_NODE){var u=s.getAttribute("type"),b=s.getAttribute("id");n.createVariable(s.textContent,u,b)}},e.Xml.mapSupportedXmlTags_=function(t){for(var s,n={mutation:[],comment:[],data:[],field:[],input:[],next:[]},r=0;s=t.childNodes[r];r++)if(s.nodeType!=e.utils.dom.NodeType.TEXT_NODE)switch(s.nodeName.toLowerCase()){case"mutation":n.mutation.push(s);break;case"comment":if(!e.Comment){console.warn("Missing require for Blockly.Comment, ignoring block comment.");break}n.comment.push(s);break;case"data":n.data.push(s);break;case"title":case"field":n.field.push(s);break;case"value":case"statement":n.input.push(s);break;case"next":n.next.push(s);break;default:console.warn("Ignoring unknown tag: "+s.nodeName)}return n},e.Xml.applyMutationTagNodes_=function(t,n){for(var u,r=!1,s=0;u=t[s];s++)n.domToMutation&&(n.domToMutation(u),n.initSvg&&(r=!0));return r},e.Xml.applyCommentTagNodes_=function(t,n){for(var s,r=0;s=t[r];r++){var u=s.textContent,b="true"==s.getAttribute("pinned"),x=parseInt(s.getAttribute("w"),10);s=parseInt(s.getAttribute("h"),10),n.setCommentText(u),n.commentModel.pinned=b,isNaN(x)||isNaN(s)||(n.commentModel.size=new e.utils.Size(x,s)),b&&n.getCommentIcon&&!n.isInFlyout&&setTimeout(function(){n.getCommentIcon().setVisible(!0)},1)}},e.Xml.applyDataTagNodes_=function(t,n){for(var s,r=0;s=t[r];r++)n.data=s.textContent},e.Xml.applyFieldTagNodes_=function(t,n){for(var s,r=0;s=t[r];r++){var u=s.getAttribute("name");e.Xml.domToField_(n,u,s)}},e.Xml.findChildBlocks_=function(t){for(var s,n={childBlockElement:null,childShadowElement:null},r=0;s=t.childNodes[r];r++)s.nodeType==e.utils.dom.NodeType.ELEMENT_NODE&&("block"==s.nodeName.toLowerCase()?n.childBlockElement=s:"shadow"==s.nodeName.toLowerCase()&&(n.childShadowElement=s));return n},e.Xml.applyInputTagNodes_=function(t,n,r,s){for(var b,u=0;b=t[u];u++){var x=b.getAttribute("name"),B=r.getInput(x);if(!B){console.warn("Ignoring non-existent input "+x+" in block "+s);break}if((b=e.Xml.findChildBlocks_(b)).childBlockElement){if(!B.connection)throw TypeError("Input connection does not exist.");e.Xml.domToBlockHeadless_(b.childBlockElement,n,B.connection,!1)}b.childShadowElement&&B.connection.setShadowDom(b.childShadowElement)}},e.Xml.applyNextTagNodes_=function(t,n,r){for(var u,s=0;u=t[s];s++){if((u=e.Xml.findChildBlocks_(u)).childBlockElement){if(!r.nextConnection)throw TypeError("Next statement does not exist.");if(r.nextConnection.isConnected())throw TypeError("Next statement is already connected.");e.Xml.domToBlockHeadless_(u.childBlockElement,n,r.nextConnection,!0)}u.childShadowElement&&r.nextConnection&&r.nextConnection.setShadowDom(u.childShadowElement)}},e.Xml.domToBlockHeadless_=function(t,n,r,s){var u=t.getAttribute("type");if(!u)throw TypeError("Block type unspecified: "+t.outerHTML);var b=t.getAttribute("id");b=n.newBlock(u,b);var x=e.Xml.mapSupportedXmlTags_(t),B=e.Xml.applyMutationTagNodes_(x.mutation,b);if(e.Xml.applyCommentTagNodes_(x.comment,b),e.Xml.applyDataTagNodes_(x.data,b),r)if(s){if(!b.previousConnection)throw TypeError("Next block does not have previous statement.");r.connect(b.previousConnection)}else if(b.outputConnection)r.connect(b.outputConnection);else{if(!b.previousConnection)throw TypeError("Child block does not have output or previous statement.");r.connect(b.previousConnection)}if(e.Xml.applyFieldTagNodes_(x.field,b),e.Xml.applyInputTagNodes_(x.input,n,b,u),e.Xml.applyNextTagNodes_(x.next,n,b),B&&b.initSvg(),(n=t.getAttribute("inline"))&&b.setInputsInline("true"==n),(n=t.getAttribute("disabled"))&&b.setEnabled("true"!=n&&"disabled"!=n),(n=t.getAttribute("deletable"))&&b.setDeletable("true"==n),(n=t.getAttribute("movable"))&&b.setMovable("true"==n),(n=t.getAttribute("editable"))&&b.setEditable("true"==n),(n=t.getAttribute("collapsed"))&&b.setCollapsed("true"==n),"shadow"==t.nodeName.toLowerCase()){for(t=b.getChildren(!1),n=0;r=t[n];n++)if(!r.isShadow())throw TypeError("Shadow block not allowed non-shadow child.");if(b.getVarModels().length)throw TypeError("Shadow blocks cannot have variable references.");b.setShadow(!0)}return b},e.Xml.domToField_=function(t,n,r){var s=t.getField(n);s?s.fromXml(r):console.warn("Ignoring non-existent field "+n+" in block "+t.type)},e.Xml.deleteNext=function(t){for(var r,n=0;r=t.childNodes[n];n++)if("next"==r.nodeName.toLowerCase()){t.removeChild(r);break}},e.Events.BlockBase=function(t){e.Events.BlockBase.superClass_.constructor.call(this),this.blockId=(this.isBlank=void 0===t)?"":t.id,this.workspaceId=this.isBlank?"":t.workspace.id},e.utils.object.inherits(e.Events.BlockBase,e.Events.Abstract),e.Events.BlockBase.prototype.toJson=function(){var t=e.Events.BlockBase.superClass_.toJson.call(this);return t.blockId=this.blockId,t},e.Events.BlockBase.prototype.fromJson=function(t){e.Events.BlockBase.superClass_.fromJson.call(this,t),this.blockId=t.blockId},e.Events.BlockChange=function(t,n,r,s,u){e.Events.Change.superClass_.constructor.call(this,t),t&&(this.element=void 0===n?"":n,this.name=void 0===r?"":r,this.oldValue=void 0===s?"":s,this.newValue=void 0===u?"":u)},e.utils.object.inherits(e.Events.BlockChange,e.Events.BlockBase),e.Events.Change=e.Events.BlockChange,e.Events.BlockChange.prototype.type=e.Events.CHANGE,e.Events.BlockChange.prototype.toJson=function(){var t=e.Events.BlockChange.superClass_.toJson.call(this);return t.element=this.element,this.name&&(t.name=this.name),t.oldValue=this.oldValue,t.newValue=this.newValue,t},e.Events.BlockChange.prototype.fromJson=function(t){e.Events.BlockChange.superClass_.fromJson.call(this,t),this.element=t.element,this.name=t.name,this.oldValue=t.oldValue,this.newValue=t.newValue},e.Events.BlockChange.prototype.isNull=function(){return this.oldValue==this.newValue},e.Events.BlockChange.prototype.run=function(t){var n=this.getEventWorkspace_().getBlockById(this.blockId);if(n)switch(n.mutator&&n.mutator.setVisible(!1),t=t?this.newValue:this.oldValue,this.element){case"field":(n=n.getField(this.name))?n.setValue(t):console.warn("Can't set non-existent field: "+this.name);break;case"comment":n.setCommentText(t||null);break;case"collapsed":n.setCollapsed(!!t);break;case"disabled":n.setEnabled(!t);break;case"inline":n.setInputsInline(!!t);break;case"mutation":var r="";if(n.mutationToDom&&(r=(r=n.mutationToDom())&&e.Xml.domToText(r)),n.domToMutation){var s=e.Xml.textToDom(t||"<mutation/>");n.domToMutation(s)}e.Events.fire(new e.Events.BlockChange(n,"mutation",null,r,t));break;default:console.warn("Unknown change type: "+this.element)}else console.warn("Can't change non-existent block: "+this.blockId)},e.Events.Create=function(t){e.Events.Create.superClass_.constructor.call(this,t),t&&(t.isShadow()&&(this.recordUndo=!1),this.xml=t.workspace.rendered?e.Xml.blockToDomWithXY(t):e.Xml.blockToDom(t),this.ids=e.Events.getDescendantIds(t))},e.utils.object.inherits(e.Events.Create,e.Events.BlockBase),e.Events.BlockCreate=e.Events.Create,e.Events.Create.prototype.type=e.Events.CREATE,e.Events.Create.prototype.toJson=function(){var t=e.Events.Create.superClass_.toJson.call(this);return t.xml=e.Xml.domToText(this.xml),t.ids=this.ids,this.recordUndo||(t.recordUndo=this.recordUndo),t},e.Events.Create.prototype.fromJson=function(t){e.Events.Create.superClass_.fromJson.call(this,t),this.xml=e.Xml.textToDom(t.xml),this.ids=t.ids,void 0!==t.recordUndo&&(this.recordUndo=t.recordUndo)},e.Events.Create.prototype.run=function(t){var n=this.getEventWorkspace_();if(t)(t=e.utils.xml.createElement("xml")).appendChild(this.xml),e.Xml.domToWorkspace(t,n);else{t=0;for(var r;r=this.ids[t];t++){var s=n.getBlockById(r);s?s.dispose(!1):r==this.blockId&&console.warn("Can't uncreate non-existent block: "+r)}}},e.Events.Delete=function(t){if(e.Events.Delete.superClass_.constructor.call(this,t),t){if(t.getParent())throw Error("Connected blocks cannot be deleted.");t.isShadow()&&(this.recordUndo=!1),this.oldXml=t.workspace.rendered?e.Xml.blockToDomWithXY(t):e.Xml.blockToDom(t),this.ids=e.Events.getDescendantIds(t)}},e.utils.object.inherits(e.Events.Delete,e.Events.BlockBase),e.Events.BlockDelete=e.Events.Delete,e.Events.Delete.prototype.type=e.Events.DELETE,e.Events.Delete.prototype.toJson=function(){var t=e.Events.Delete.superClass_.toJson.call(this);return t.oldXml=e.Xml.domToText(this.oldXml),t.ids=this.ids,this.recordUndo||(t.recordUndo=this.recordUndo),t},e.Events.Delete.prototype.fromJson=function(t){e.Events.Delete.superClass_.fromJson.call(this,t),this.oldXml=e.Xml.textToDom(t.oldXml),this.ids=t.ids,void 0!==t.recordUndo&&(this.recordUndo=t.recordUndo)},e.Events.Delete.prototype.run=function(t){var n=this.getEventWorkspace_();if(t){t=0;for(var r;r=this.ids[t];t++){var s=n.getBlockById(r);s?s.dispose(!1):r==this.blockId&&console.warn("Can't delete non-existent block: "+r)}}else(t=e.utils.xml.createElement("xml")).appendChild(this.oldXml),e.Xml.domToWorkspace(t,n)},e.Events.Move=function(t){e.Events.Move.superClass_.constructor.call(this,t),t&&(t.isShadow()&&(this.recordUndo=!1),t=this.currentLocation_(),this.oldParentId=t.parentId,this.oldInputName=t.inputName,this.oldCoordinate=t.coordinate)},e.utils.object.inherits(e.Events.Move,e.Events.BlockBase),e.Events.BlockMove=e.Events.Move,e.Events.Move.prototype.type=e.Events.MOVE,e.Events.Move.prototype.toJson=function(){var t=e.Events.Move.superClass_.toJson.call(this);return this.newParentId&&(t.newParentId=this.newParentId),this.newInputName&&(t.newInputName=this.newInputName),this.newCoordinate&&(t.newCoordinate=Math.round(this.newCoordinate.x)+","+Math.round(this.newCoordinate.y)),this.recordUndo||(t.recordUndo=this.recordUndo),t},e.Events.Move.prototype.fromJson=function(t){if(e.Events.Move.superClass_.fromJson.call(this,t),this.newParentId=t.newParentId,this.newInputName=t.newInputName,t.newCoordinate){var n=t.newCoordinate.split(",");this.newCoordinate=new e.utils.Coordinate(Number(n[0]),Number(n[1]))}void 0!==t.recordUndo&&(this.recordUndo=t.recordUndo)},e.Events.Move.prototype.recordNew=function(){var t=this.currentLocation_();this.newParentId=t.parentId,this.newInputName=t.inputName,this.newCoordinate=t.coordinate},e.Events.Move.prototype.currentLocation_=function(){var t=this.getEventWorkspace_().getBlockById(this.blockId),n={},r=t.getParent();return r?(n.parentId=r.id,(t=r.getInputWithBlock(t))&&(n.inputName=t.name)):n.coordinate=t.getRelativeToSurfaceXY(),n},e.Events.Move.prototype.isNull=function(){return this.oldParentId==this.newParentId&&this.oldInputName==this.newInputName&&e.utils.Coordinate.equals(this.oldCoordinate,this.newCoordinate)},e.Events.Move.prototype.run=function(t){var n=this.getEventWorkspace_(),r=n.getBlockById(this.blockId);if(r){var s=t?this.newParentId:this.oldParentId,u=t?this.newInputName:this.oldInputName,b=t?this.newCoordinate:this.oldCoordinate;if(t=null,s&&!(t=n.getBlockById(s)))return void console.warn("Can't connect to non-existent block: "+s);if(r.getParent()&&r.unplug(),b)u=r.getRelativeToSurfaceXY(),r.moveBy(b.x-u.x,b.y-u.y);else{if(n=(r=r.outputConnection||r.previousConnection).type,u){if(t=t.getInput(u))var x=t.connection}else n==e.connectionTypes.PREVIOUS_STATEMENT&&(x=t.nextConnection);x?r.connect(x):console.warn("Can't connect to non-existent input: "+u)}}else console.warn("Can't move non-existent block: "+this.blockId)},e.registry.register(e.registry.Type.EVENT,e.Events.CREATE,e.Events.Create),e.registry.register(e.registry.Type.EVENT,e.Events.DELETE,e.Events.Delete),e.registry.register(e.registry.Type.EVENT,e.Events.CHANGE,e.Events.BlockChange),e.registry.register(e.registry.Type.EVENT,e.Events.MOVE,e.Events.Move),e.Events.FinishedLoading=function(t){this.isBlank=void 0===t,this.workspaceId=t?t.id:"",this.group=e.Events.getGroup(),this.recordUndo=!1},e.utils.object.inherits(e.Events.FinishedLoading,e.Events.Abstract),e.Events.FinishedLoading.prototype.type=e.Events.FINISHED_LOADING,e.Events.FinishedLoading.prototype.toJson=function(){var t={type:this.type};return this.group&&(t.group=this.group),this.workspaceId&&(t.workspaceId=this.workspaceId),t},e.Events.FinishedLoading.prototype.fromJson=function(t){this.isBlank=!1,this.workspaceId=t.workspaceId,this.group=t.group},e.registry.register(e.registry.Type.EVENT,e.Events.FINISHED_LOADING,e.Events.FinishedLoading),e.Events.UiBase=function(t){e.Events.UiBase.superClass_.constructor.call(this),this.isBlank=void 0===t,this.workspaceId=t||"",this.recordUndo=!1},e.utils.object.inherits(e.Events.UiBase,e.Events.Abstract),e.Events.UiBase.prototype.isUiEvent=!0,e.Events.Ui=function(t,n,r,s){e.Events.Ui.superClass_.constructor.call(this,t?t.workspace.id:void 0),this.blockId=t?t.id:null,this.element=void 0===n?"":n,this.oldValue=void 0===r?"":r,this.newValue=void 0===s?"":s},e.utils.object.inherits(e.Events.Ui,e.Events.UiBase),e.Events.Ui.prototype.type=e.Events.UI,e.Events.Ui.prototype.toJson=function(){var t=e.Events.Ui.superClass_.toJson.call(this);return t.element=this.element,void 0!==this.newValue&&(t.newValue=this.newValue),this.blockId&&(t.blockId=this.blockId),t},e.Events.Ui.prototype.fromJson=function(t){e.Events.Ui.superClass_.fromJson.call(this,t),this.element=t.element,this.newValue=t.newValue,this.blockId=t.blockId},e.registry.register(e.registry.Type.EVENT,e.Events.UI,e.Events.Ui),e.Events.VarBase=function(t){e.Events.VarBase.superClass_.constructor.call(this),this.varId=(this.isBlank=void 0===t)?"":t.getId(),this.workspaceId=this.isBlank?"":t.workspace.id},e.utils.object.inherits(e.Events.VarBase,e.Events.Abstract),e.Events.VarBase.prototype.toJson=function(){var t=e.Events.VarBase.superClass_.toJson.call(this);return t.varId=this.varId,t},e.Events.VarBase.prototype.fromJson=function(t){e.Events.VarBase.superClass_.toJson.call(this),this.varId=t.varId},e.Events.VarCreate=function(t){e.Events.VarCreate.superClass_.constructor.call(this,t),t&&(this.varType=t.type,this.varName=t.name)},e.utils.object.inherits(e.Events.VarCreate,e.Events.VarBase),e.Events.VarCreate.prototype.type=e.Events.VAR_CREATE,e.Events.VarCreate.prototype.toJson=function(){var t=e.Events.VarCreate.superClass_.toJson.call(this);return t.varType=this.varType,t.varName=this.varName,t},e.Events.VarCreate.prototype.fromJson=function(t){e.Events.VarCreate.superClass_.fromJson.call(this,t),this.varType=t.varType,this.varName=t.varName},e.Events.VarCreate.prototype.run=function(t){var n=this.getEventWorkspace_();t?n.createVariable(this.varName,this.varType,this.varId):n.deleteVariableById(this.varId)},e.Events.VarDelete=function(t){e.Events.VarDelete.superClass_.constructor.call(this,t),t&&(this.varType=t.type,this.varName=t.name)},e.utils.object.inherits(e.Events.VarDelete,e.Events.VarBase),e.Events.VarDelete.prototype.type=e.Events.VAR_DELETE,e.Events.VarDelete.prototype.toJson=function(){var t=e.Events.VarDelete.superClass_.toJson.call(this);return t.varType=this.varType,t.varName=this.varName,t},e.Events.VarDelete.prototype.fromJson=function(t){e.Events.VarDelete.superClass_.fromJson.call(this,t),this.varType=t.varType,this.varName=t.varName},e.Events.VarDelete.prototype.run=function(t){var n=this.getEventWorkspace_();t?n.deleteVariableById(this.varId):n.createVariable(this.varName,this.varType,this.varId)},e.Events.VarRename=function(t,n){e.Events.VarRename.superClass_.constructor.call(this,t),t&&(this.oldName=t.name,this.newName=void 0===n?"":n)},e.utils.object.inherits(e.Events.VarRename,e.Events.VarBase),e.Events.VarRename.prototype.type=e.Events.VAR_RENAME,e.Events.VarRename.prototype.toJson=function(){var t=e.Events.VarRename.superClass_.toJson.call(this);return t.oldName=this.oldName,t.newName=this.newName,t},e.Events.VarRename.prototype.fromJson=function(t){e.Events.VarRename.superClass_.fromJson.call(this,t),this.oldName=t.oldName,this.newName=t.newName},e.Events.VarRename.prototype.run=function(t){this.getEventWorkspace_().renameVariableById(this.varId,t?this.newName:this.oldName)},e.registry.register(e.registry.Type.EVENT,e.Events.VAR_CREATE,e.Events.VarCreate),e.registry.register(e.registry.Type.EVENT,e.Events.VAR_DELETE,e.Events.VarDelete),e.registry.register(e.registry.Type.EVENT,e.Events.VAR_RENAME,e.Events.VarRename),e.BlockDragSurfaceSvg=function(t){this.container_=t,this.createDom()},e.BlockDragSurfaceSvg.prototype.SVG_=null,e.BlockDragSurfaceSvg.prototype.dragGroup_=null,e.BlockDragSurfaceSvg.prototype.container_=null,e.BlockDragSurfaceSvg.prototype.scale_=1,e.BlockDragSurfaceSvg.prototype.surfaceXY_=null,e.BlockDragSurfaceSvg.prototype.childSurfaceXY_=new e.utils.Coordinate(0,0),e.BlockDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{xmlns:e.utils.dom.SVG_NS,"xmlns:html":e.utils.dom.HTML_NS,"xmlns:xlink":e.utils.dom.XLINK_NS,version:"1.1",class:"blocklyBlockDragSurface"},this.container_),this.dragGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},this.SVG_))},e.BlockDragSurfaceSvg.prototype.setBlocksAndShow=function(t){if(this.dragGroup_.childNodes.length)throw Error("Already dragging a block.");this.dragGroup_.appendChild(t),this.SVG_.style.display="block",this.surfaceXY_=new e.utils.Coordinate(0,0)},e.BlockDragSurfaceSvg.prototype.translateAndScaleGroup=function(t,n,r){this.scale_=r,t=t.toFixed(0),n=n.toFixed(0),this.childSurfaceXY_.x=parseInt(t,10),this.childSurfaceXY_.y=parseInt(n,10),this.dragGroup_.setAttribute("transform","translate("+t+","+n+") scale("+r+")")},e.BlockDragSurfaceSvg.prototype.translateSurfaceInternal_=function(){var t=this.surfaceXY_.x,n=this.surfaceXY_.y;t=t.toFixed(0),n=n.toFixed(0),this.SVG_.style.display="block",e.utils.dom.setCssTransform(this.SVG_,"translate3d("+t+"px, "+n+"px, 0px)")},e.BlockDragSurfaceSvg.prototype.translateBy=function(t,n){this.surfaceXY_=new e.utils.Coordinate(this.surfaceXY_.x+t,this.surfaceXY_.y+n),this.translateSurfaceInternal_()},e.BlockDragSurfaceSvg.prototype.translateSurface=function(t,n){this.surfaceXY_=new e.utils.Coordinate(t*this.scale_,n*this.scale_),this.translateSurfaceInternal_()},e.BlockDragSurfaceSvg.prototype.getSurfaceTranslation=function(){var t=e.utils.getRelativeXY(this.SVG_);return new e.utils.Coordinate(t.x/this.scale_,t.y/this.scale_)},e.BlockDragSurfaceSvg.prototype.getGroup=function(){return this.dragGroup_},e.BlockDragSurfaceSvg.prototype.getSvgRoot=function(){return this.SVG_},e.BlockDragSurfaceSvg.prototype.getCurrentBlock=function(){return this.dragGroup_.firstChild},e.BlockDragSurfaceSvg.prototype.getWsTranslation=function(){return this.childSurfaceXY_.clone()},e.BlockDragSurfaceSvg.prototype.clearAndHide=function(t){if(t?t.appendChild(this.getCurrentBlock()):this.dragGroup_.removeChild(this.getCurrentBlock()),this.SVG_.style.display="none",this.dragGroup_.childNodes.length)throw Error("Drag group was not cleared.");this.surfaceXY_=null},e.Css={},e.Css.injected_=!1,e.Css.register=function(t){if(e.Css.injected_)throw Error("CSS already injected");Array.prototype.push.apply(e.Css.CONTENT,t),t.length=0},e.Css.inject=function(t,n){if(!e.Css.injected_){e.Css.injected_=!0;var r=e.Css.CONTENT.join("\n");e.Css.CONTENT.length=0,t&&(t=n.replace(/[\\/]$/,""),r=r.replace(/<<<PATH>>>/g,t),(t=document.createElement("style")).id="blockly-common-style",r=document.createTextNode(r),t.appendChild(r),document.head.insertBefore(t,document.head.firstChild))}},e.Css.CONTENT=[".blocklySvg {","background-color: #fff;","outline: none;","overflow: hidden;","position: absolute;","display: block;","}",".blocklyWidgetDiv {","display: none;","position: absolute;","z-index: 99999;","}",".injectionDiv {","height: 100%;","position: relative;","overflow: hidden;","touch-action: none;","}",".blocklyNonSelectable {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","}",".blocklyWsDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","}",".blocklyWsDragSurface.blocklyOverflowVisible {","overflow: visible;","}",".blocklyBlockDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","right: 0;","bottom: 0;","overflow: visible !important;","z-index: 50;","}",".blocklyBlockCanvas.blocklyCanvasTransitioning,",".blocklyBubbleCanvas.blocklyCanvasTransitioning {","transition: transform .5s;","}",".blocklyTooltipDiv {","background-color: #ffffc7;","border: 1px solid #ddc;","box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);","color: #000;","display: none;","font: 9pt sans-serif;","opacity: .9;","padding: 2px;","position: absolute;","z-index: 100000;","}",".blocklyDropDownDiv {","position: absolute;","left: 0;","top: 0;","z-index: 1000;","display: none;","border: 1px solid;","border-color: #dadce0;","background-color: #fff;","border-radius: 2px;","padding: 4px;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownContent {","max-height: 300px;","overflow: auto;","overflow-x: hidden;","position: relative;","}",".blocklyDropDownArrow {","position: absolute;","left: 0;","top: 0;","width: 16px;","height: 16px;","z-index: -1;","background-color: inherit;","border-color: inherit;","}",".blocklyDropDownButton {","display: inline-block;","float: left;","padding: 0;","margin: 4px;","border-radius: 4px;","outline: none;","border: 1px solid;","transition: box-shadow .1s;","cursor: pointer;","}",".blocklyArrowTop {","border-top: 1px solid;","border-left: 1px solid;","border-top-left-radius: 4px;","border-color: inherit;","}",".blocklyArrowBottom {","border-bottom: 1px solid;","border-right: 1px solid;","border-bottom-right-radius: 4px;","border-color: inherit;","}",".blocklyResizeSE {","cursor: se-resize;","fill: #aaa;","}",".blocklyResizeSW {","cursor: sw-resize;","fill: #aaa;","}",".blocklyResizeLine {","stroke: #515A5A;","stroke-width: 1;","}",".blocklyHighlightedConnectionPath {","fill: none;","stroke: #fc3;","stroke-width: 4px;","}",".blocklyPathLight {","fill: none;","stroke-linecap: round;","stroke-width: 1;","}",".blocklySelected>.blocklyPathLight {","display: none;","}",".blocklyDraggable {",'cursor: url("<<<PATH>>>/handopen.cur"), auto;',"cursor: grab;","cursor: -webkit-grab;","}",".blocklyDragging {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDraggable:active {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyBlockDragSurface .blocklyDraggable {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDragging.blocklyDraggingDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyDragging>.blocklyPath,",".blocklyDragging>.blocklyPathLight {","fill-opacity: .8;","stroke-opacity: .8;","}",".blocklyDragging>.blocklyPathDark {","display: none;","}",".blocklyDisabled>.blocklyPath {","fill-opacity: .5;","stroke-opacity: .5;","}",".blocklyDisabled>.blocklyPathLight,",".blocklyDisabled>.blocklyPathDark {","display: none;","}",".blocklyInsertionMarker>.blocklyPath,",".blocklyInsertionMarker>.blocklyPathLight,",".blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: .2;","stroke: none;","}",".blocklyMultilineText {","font-family: monospace;","}",".blocklyNonEditableText>text {","pointer-events: none;","}",".blocklyFlyout {","position: absolute;","z-index: 20;","}",".blocklyText text {","cursor: default;","}",".blocklySvg text,",".blocklyBlockDragSurface text {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","cursor: inherit;","}",".blocklyHidden {","display: none;","}",".blocklyFieldDropdown:not(.blocklyHidden) {","display: block;","}",".blocklyIconGroup {","cursor: default;","}",".blocklyIconGroup:not(:hover),",".blocklyIconGroupReadonly {","opacity: .6;","}",".blocklyIconShape {","fill: #00f;","stroke: #fff;","stroke-width: 1px;","}",".blocklyIconSymbol {","fill: #fff;","}",".blocklyMinimalBody {","margin: 0;","padding: 0;","}",".blocklyHtmlInput {","border: none;","border-radius: 4px;","height: 100%;","margin: 0;","outline: none;","padding: 0;","width: 100%;","text-align: center;","display: block;","box-sizing: border-box;","}",".blocklyHtmlInput::-ms-clear {","display: none;","}",".blocklyMainBackground {","stroke-width: 1;","stroke: #c6c6c6;","}",".blocklyMutatorBackground {","fill: #fff;","stroke: #ddd;","stroke-width: 1;","}",".blocklyFlyoutBackground {","fill: #ddd;","fill-opacity: .8;","}",".blocklyMainWorkspaceScrollbar {","z-index: 20;","}",".blocklyFlyoutScrollbar {","z-index: 30;","}",".blocklyScrollbarHorizontal,",".blocklyScrollbarVertical {","position: absolute;","outline: none;","}",".blocklyScrollbarBackground {","opacity: 0;","}",".blocklyScrollbarHandle {","fill: #ccc;","}",".blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyScrollbarHandle:hover {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarHandle {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyFlyout .blocklyScrollbarHandle:hover {","fill: #aaa;","}",".blocklyInvalidInput {","background: #faa;","}",".blocklyVerticalMarker {","stroke-width: 3px;","fill: rgba(255,255,255,.5);","pointer-events: none;","}",".blocklyComputeCanvas {","position: absolute;","width: 0;","height: 0;","}",".blocklyNoPointerEvents {","pointer-events: none;","}",".blocklyContextMenu {","border-radius: 4px;","max-height: 100%;","}",".blocklyDropdownMenu {","border-radius: 2px;","padding: 0 !important;","}",".blocklyDropdownMenu .blocklyMenuItem {","padding-left: 28px;","}",".blocklyDropdownMenu .blocklyMenuItemRtl {","padding-left: 5px;","padding-right: 28px;","}",".blocklyWidgetDiv .blocklyMenu {","background: #fff;","border: 1px solid transparent;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","font: normal 13px Arial, sans-serif;","margin: 0;","outline: none;","padding: 4px 0;","position: absolute;","overflow-y: auto;","overflow-x: hidden;","max-height: 100%;","z-index: 20000;","}",".blocklyWidgetDiv .blocklyMenu.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv .blocklyMenu {","background: inherit;","border: inherit;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"outline: none;","position: relative;","z-index: 20000;","}",".blocklyMenuItem {","border: none;","color: #000;","cursor: pointer;","list-style: none;","margin: 0;","min-width: 7em;","padding: 6px 15px;","white-space: nowrap;","}",".blocklyMenuItemDisabled {","color: #ccc;","cursor: inherit;","}",".blocklyMenuItemHighlight {","background-color: rgba(0,0,0,.1);","}",".blocklyMenuItemCheckbox {","height: 16px;","position: absolute;","width: 16px;","}",".blocklyMenuItemSelected .blocklyMenuItemCheckbox {","background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;","float: left;","margin-left: -24px;","position: static;","}",".blocklyMenuItemRtl .blocklyMenuItemCheckbox {","float: right;","margin-right: -24px;","}"],e.Grid=function(t,n){this.gridPattern_=t,this.spacing_=n.spacing,this.length_=n.length,this.line2_=(this.line1_=t.firstChild)&&this.line1_.nextSibling,this.snapToGrid_=n.snap},e.Grid.prototype.scale_=1,e.Grid.prototype.dispose=function(){this.gridPattern_=null},e.Grid.prototype.shouldSnap=function(){return this.snapToGrid_},e.Grid.prototype.getSpacing=function(){return this.spacing_},e.Grid.prototype.getPatternId=function(){return this.gridPattern_.id},e.Grid.prototype.update=function(t){this.scale_=t;var n=this.spacing_*t||100;this.gridPattern_.setAttribute("width",n),this.gridPattern_.setAttribute("height",n);var r=(n=Math.floor(this.spacing_/2)+.5)-this.length_/2,s=n+this.length_/2;this.setLineAttributes_(this.line1_,t,r*=t,s*=t,n*=t,n),this.setLineAttributes_(this.line2_,t,n,n,r,s)},e.Grid.prototype.setLineAttributes_=function(t,n,r,s,u,b){t&&(t.setAttribute("stroke-width",n),t.setAttribute("x1",r),t.setAttribute("y1",u),t.setAttribute("x2",s),t.setAttribute("y2",b))},e.Grid.prototype.moveTo=function(t,n){this.gridPattern_.setAttribute("x",t),this.gridPattern_.setAttribute("y",n),(e.utils.userAgent.IE||e.utils.userAgent.EDGE)&&this.update(this.scale_)},e.Grid.createDom=function(t,n,r){return t=e.utils.dom.createSvgElement(e.utils.Svg.PATTERN,{id:"blocklyGridPattern"+t,patternUnits:"userSpaceOnUse"},r),0<n.length&&0<n.spacing?(e.utils.dom.createSvgElement(e.utils.Svg.LINE,{stroke:n.colour},t),1<n.length&&e.utils.dom.createSvgElement(e.utils.Svg.LINE,{stroke:n.colour},t)):e.utils.dom.createSvgElement(e.utils.Svg.LINE,{},t),t},e.Theme=function(t,n,r,s){this.name=t,this.blockStyles=n||Object.create(null),this.categoryStyles=r||Object.create(null),this.componentStyles=s||Object.create(null),this.fontStyle=Object.create(null),this.startHats=null,e.registry.register(e.registry.Type.THEME,t,this)},e.Theme.prototype.getClassName=function(){return this.name+"-theme"},e.Theme.prototype.setBlockStyle=function(t,n){this.blockStyles[t]=n},e.Theme.prototype.setCategoryStyle=function(t,n){this.categoryStyles[t]=n},e.Theme.prototype.getComponentStyle=function(t){return(t=this.componentStyles[t])&&"string"==typeof t&&this.getComponentStyle(t)?this.getComponentStyle(t):t?String(t):null},e.Theme.prototype.setComponentStyle=function(t,n){this.componentStyles[t]=n},e.Theme.prototype.setFontStyle=function(t){this.fontStyle=t},e.Theme.prototype.setStartHats=function(t){this.startHats=t},e.Theme.defineTheme=function(t,n){var r=new e.Theme(t),s=n.base;return s&&("string"==typeof s&&(s=e.registry.getObject(e.registry.Type.THEME,s)),s instanceof e.Theme&&(e.utils.object.deepMerge(r,s),r.name=t)),e.utils.object.deepMerge(r.blockStyles,n.blockStyles),e.utils.object.deepMerge(r.categoryStyles,n.categoryStyles),e.utils.object.deepMerge(r.componentStyles,n.componentStyles),e.utils.object.deepMerge(r.fontStyle,n.fontStyle),null!=n.startHats&&(r.startHats=n.startHats),r},e.Themes={},e.Themes.Classic={},e.Themes.Classic.defaultBlockStyles={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},e.Themes.Classic.categoryStyles={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},e.Themes.Classic=new e.Theme("classic",e.Themes.Classic.defaultBlockStyles,e.Themes.Classic.categoryStyles),e.utils.IdGenerator={},e.utils.IdGenerator.nextId_=0,e.utils.IdGenerator.getNextUniqueId=function(){return"blockly-"+(e.utils.IdGenerator.nextId_++).toString(36)},e.utils.Metrics=function(){},e.utils.toolbox={},e.utils.toolbox.CATEGORY_TOOLBOX_KIND="categoryToolbox",e.utils.toolbox.FLYOUT_TOOLBOX_KIND="flyoutToolbox",e.utils.toolbox.Position={TOP:0,BOTTOM:1,LEFT:2,RIGHT:3},e.utils.toolbox.convertToolboxDefToJson=function(t){return t?((t instanceof Element||"string"==typeof t)&&(t=e.utils.toolbox.parseToolboxTree(t),t=e.utils.toolbox.convertToToolboxJson_(t)),e.utils.toolbox.validateToolbox_(t),t):null},e.utils.toolbox.validateToolbox_=function(t){var n=t.kind;if(t=t.contents,n&&n!=e.utils.toolbox.FLYOUT_TOOLBOX_KIND&&n!=e.utils.toolbox.CATEGORY_TOOLBOX_KIND)throw Error("Invalid toolbox kind "+n+". Please supply either "+e.utils.toolbox.FLYOUT_TOOLBOX_KIND+" or "+e.utils.toolbox.CATEGORY_TOOLBOX_KIND);if(!t)throw Error("Toolbox must have a contents attribute.")},e.utils.toolbox.convertFlyoutDefToJsonArray=function(t){return t?t.contents?t.contents:Array.isArray(t)&&0<t.length&&!t[0].nodeType?t:e.utils.toolbox.xmlToJsonArray_(t):[]},e.utils.toolbox.hasCategories=function(t){if(!t)return!1;var n=t.kind;return n?n==e.utils.toolbox.CATEGORY_TOOLBOX_KIND:!!t.contents.filter(function(r){return"CATEGORY"==r.kind.toUpperCase()}).length},e.utils.toolbox.isCategoryCollapsible=function(t){return!(!t||!t.contents||!t.contents.filter(function(n){return"CATEGORY"==n.kind.toUpperCase()}).length)},e.utils.toolbox.convertToToolboxJson_=function(t){var n={contents:e.utils.toolbox.xmlToJsonArray_(t)};return t instanceof Node&&e.utils.toolbox.addAttributes_(t,n),n},e.utils.toolbox.xmlToJsonArray_=function(t){var s,n=[],r=t.childNodes;for(r||(r=t),t=0;s=r[t];t++)if(s.tagName){var u={},b=s.tagName.toUpperCase();u.kind=b,"BLOCK"==b?u.blockxml=s:s.childNodes&&0<s.childNodes.length&&(u.contents=e.utils.toolbox.xmlToJsonArray_(s)),e.utils.toolbox.addAttributes_(s,u),n.push(u)}return n},e.utils.toolbox.addAttributes_=function(t,n){for(var r=0;r<t.attributes.length;r++){var s=t.attributes[r];-1<s.nodeName.indexOf("css-")?(n.cssconfig=n.cssconfig||{},n.cssconfig[s.nodeName.replace("css-","")]=s.value):n[s.nodeName]=s.value}},e.utils.toolbox.parseToolboxTree=function(t){if(t){if("string"!=typeof t&&(e.utils.userAgent.IE&&t.outerHTML?t=t.outerHTML:t instanceof Element||(t=null)),"string"==typeof t&&"xml"!=(t=e.Xml.textToDom(t)).nodeName.toLowerCase())throw TypeError("Toolbox should be an <xml> document.")}else t=null;return t},e.Options=function(t){var n=!!t.readOnly;if(n)var r=null,s=!1,u=!1,b=!1,x=!1,B=!1,Z=!1;else{r=e.utils.toolbox.convertToolboxDefToJson(t.toolbox),s=e.utils.toolbox.hasCategories(r),void 0===(u=t.trashcan)&&(u=s);var ot=t.maxTrashcanContents;u?void 0===ot&&(ot=32):ot=0,void 0===(b=t.collapse)&&(b=s),void 0===(x=t.comments)&&(x=s),void 0===(B=t.disable)&&(B=s),void 0===(Z=t.sounds)&&(Z=!0)}var et=!!t.rtl,Tt=t.horizontalLayout;void 0===Tt&&(Tt=!1);var Pt=t.toolboxPosition;Pt="end"!==Pt,Pt=Tt?Pt?e.utils.toolbox.Position.TOP:e.utils.toolbox.Position.BOTTOM:Pt==et?e.utils.toolbox.Position.RIGHT:e.utils.toolbox.Position.LEFT;var pt=t.css;void 0===pt&&(pt=!0);var It="https://blockly-demo.appspot.com/static/media/";t.media?It=t.media:t.path&&(It=t.path+"media/");var Ht=void 0===t.oneBasedIndex||!!t.oneBasedIndex,Jt=t.renderer||"geras",Ct=t.plugins||{};this.RTL=et,this.oneBasedIndex=Ht,this.collapse=b,this.comments=x,this.disable=B,this.readOnly=n,this.maxBlocks=t.maxBlocks||1/0,this.maxInstances=t.maxInstances,this.pathToMedia=It,this.hasCategories=s,this.moveOptions=e.Options.parseMoveOptions_(t,s),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=u,this.maxTrashcanContents=ot,this.hasSounds=Z,this.hasCss=pt,this.horizontalLayout=Tt,this.languageTree=r,this.gridOptions=e.Options.parseGridOptions_(t),this.zoomOptions=e.Options.parseZoomOptions_(t),this.toolboxPosition=Pt,this.theme=e.Options.parseThemeOptions_(t),this.renderer=Jt,this.rendererOverrides=t.rendererOverrides,this.gridPattern=null,this.parentWorkspace=t.parentWorkspace,this.plugins=Ct},e.BlocklyOptions=function(){},e.Options.parseMoveOptions_=function(t,n){var r=t.move||{},s={};return void 0===r.scrollbars&&void 0===t.scrollbars?s.scrollbars=n:"object"==typeof r.scrollbars?(s.scrollbars={},s.scrollbars.horizontal=!!r.scrollbars.horizontal,s.scrollbars.vertical=!!r.scrollbars.vertical,s.scrollbars.horizontal&&s.scrollbars.vertical?s.scrollbars=!0:s.scrollbars.horizontal||s.scrollbars.vertical||(s.scrollbars=!1)):s.scrollbars=!!r.scrollbars||!!t.scrollbars,s.wheel=s.scrollbars&&void 0!==r.wheel?!!r.wheel:"object"==typeof s.scrollbars,s.drag=!(!s.scrollbars||void 0!==r.drag&&!r.drag),s},e.Options.parseZoomOptions_=function(t){var n={};return n.controls=void 0!==(t=t.zoom||{}).controls&&!!t.controls,n.wheel=void 0!==t.wheel&&!!t.wheel,n.startScale=void 0===t.startScale?1:Number(t.startScale),n.maxScale=void 0===t.maxScale?3:Number(t.maxScale),n.minScale=void 0===t.minScale?.3:Number(t.minScale),n.scaleSpeed=void 0===t.scaleSpeed?1.2:Number(t.scaleSpeed),n.pinch=void 0===t.pinch?n.wheel||n.controls:!!t.pinch,n},e.Options.parseGridOptions_=function(t){t=t.grid||{};var n={};return n.spacing=Number(t.spacing)||0,n.colour=t.colour||"#888",n.length=void 0===t.length?1:Number(t.length),n.snap=0<n.spacing&&!!t.snap,n},e.Options.parseThemeOptions_=function(t){return"string"==typeof(t=t.theme||e.Themes.Classic)?e.registry.getObject(e.registry.Type.THEME,t):t instanceof e.Theme?t:e.Theme.defineTheme(t.name||"builtin"+e.utils.IdGenerator.getNextUniqueId(),t)},e.Options.parseToolboxTree=function(t){return e.utils.deprecation.warn("Blockly.Options.parseToolboxTree","September 2020","September 2021","Blockly.utils.toolbox.parseToolboxTree"),e.utils.toolbox.parseToolboxTree(t)},e.ScrollbarPair=function(t,n,r,s,u){this.workspace_=t,r=void 0===r||r;var b=(n=void 0===n||n)&&r;n&&(this.hScroll=new e.Scrollbar(t,!0,b,s,u)),r&&(this.vScroll=new e.Scrollbar(t,!1,b,s,u)),b&&(this.corner_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{height:e.Scrollbar.scrollbarThickness,width:e.Scrollbar.scrollbarThickness,class:"blocklyScrollbarBackground"},null),e.utils.dom.insertAfter(this.corner_,t.getBubbleCanvas())),this.oldHostMetrics_=null},e.ScrollbarPair.prototype.dispose=function(){e.utils.dom.removeNode(this.corner_),this.oldHostMetrics_=this.workspace_=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)},e.ScrollbarPair.prototype.resize=function(){var t=this.workspace_.getMetrics();if(t){var n=!1,r=!1;if(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==t.viewWidth&&this.oldHostMetrics_.viewHeight==t.viewHeight&&this.oldHostMetrics_.absoluteTop==t.absoluteTop&&this.oldHostMetrics_.absoluteLeft==t.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.scrollWidth==t.scrollWidth&&this.oldHostMetrics_.viewLeft==t.viewLeft&&this.oldHostMetrics_.scrollLeft==t.scrollLeft||(n=!0),this.oldHostMetrics_&&this.oldHostMetrics_.scrollHeight==t.scrollHeight&&this.oldHostMetrics_.viewTop==t.viewTop&&this.oldHostMetrics_.scrollTop==t.scrollTop||(r=!0)):r=n=!0,n||r){try{e.Events.disable(),this.hScroll&&n&&this.hScroll.resize(t),this.vScroll&&r&&this.vScroll.resize(t)}finally{e.Events.enable()}this.workspace_.maybeFireViewportChangeEvent()}this.hScroll&&this.vScroll&&(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==t.viewWidth&&this.oldHostMetrics_.absoluteLeft==t.absoluteLeft||this.corner_.setAttribute("x",this.vScroll.position.x),this.oldHostMetrics_&&this.oldHostMetrics_.viewHeight==t.viewHeight&&this.oldHostMetrics_.absoluteTop==t.absoluteTop||this.corner_.setAttribute("y",this.hScroll.position.y)),this.oldHostMetrics_=t}},e.ScrollbarPair.prototype.canScrollHorizontally=function(){return!!this.hScroll},e.ScrollbarPair.prototype.canScrollVertically=function(){return!!this.vScroll},e.ScrollbarPair.prototype.setOrigin=function(t,n){this.hScroll&&this.hScroll.setOrigin(t,n),this.vScroll&&this.vScroll.setOrigin(t,n)},e.ScrollbarPair.prototype.set=function(t,n,r){this.hScroll&&this.hScroll.set(t,!1),this.vScroll&&this.vScroll.set(n,!1),(r||void 0===r)&&(t={},this.hScroll&&(t.x=this.hScroll.getRatio_()),this.vScroll&&(t.y=this.vScroll.getRatio_()),this.workspace_.setMetrics(t))},e.ScrollbarPair.prototype.setX=function(t){this.hScroll&&this.hScroll.set(t,!0)},e.ScrollbarPair.prototype.setY=function(t){this.vScroll&&this.vScroll.set(t,!0)},e.ScrollbarPair.prototype.setContainerVisible=function(t){this.hScroll&&this.hScroll.setContainerVisible(t),this.vScroll&&this.vScroll.setContainerVisible(t)},e.ScrollbarPair.prototype.isVisible=function(){var t=!1;return this.hScroll&&(t=this.hScroll.isVisible()),this.vScroll&&(t=t||this.vScroll.isVisible()),t},e.ScrollbarPair.prototype.resizeContent=function(t){this.hScroll&&this.hScroll.resizeContentHorizontal(t),this.vScroll&&this.vScroll.resizeContentVertical(t)},e.ScrollbarPair.prototype.resizeView=function(t){this.hScroll&&this.hScroll.resizeViewHorizontal(t),this.vScroll&&this.vScroll.resizeViewVertical(t)},e.Scrollbar=function(t,n,r,s,u){this.workspace_=t,this.pair_=r||!1,this.horizontal_=n,this.margin_=void 0!==u?u:e.Scrollbar.DEFAULT_SCROLLBAR_MARGIN,this.ratio=this.oldHostMetrics_=null,this.createDom_(s),this.position=new e.utils.Coordinate(0,0),t=e.Scrollbar.scrollbarThickness,n?(this.svgBackground_.setAttribute("height",t),this.outerSvg_.setAttribute("height",t),this.svgHandle_.setAttribute("height",t-5),this.svgHandle_.setAttribute("y",2.5),this.lengthAttribute_="width",this.positionAttribute_="x"):(this.svgBackground_.setAttribute("width",t),this.outerSvg_.setAttribute("width",t),this.svgHandle_.setAttribute("width",t-5),this.svgHandle_.setAttribute("x",2.5),this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=e.browserEvents.conditionalBind(this.svgBackground_,"mousedown",this,this.onMouseDownBar_),this.onMouseDownHandleWrapper_=e.browserEvents.conditionalBind(this.svgHandle_,"mousedown",this,this.onMouseDownHandle_)},e.Scrollbar.prototype.origin_=new e.utils.Coordinate(0,0),e.Scrollbar.prototype.startDragMouse_=0,e.Scrollbar.prototype.scrollbarLength_=0,e.Scrollbar.prototype.handleLength_=0,e.Scrollbar.prototype.handlePosition_=0,e.Scrollbar.prototype.isVisible_=!0,e.Scrollbar.prototype.containerVisible_=!0,e.Scrollbar.scrollbarThickness=15,e.Touch.TOUCH_ENABLED&&(e.Scrollbar.scrollbarThickness=25),e.Scrollbar.DEFAULT_SCROLLBAR_MARGIN=.5,e.Scrollbar.metricsAreEquivalent_=function(t,n){return t.viewWidth==n.viewWidth&&t.viewHeight==n.viewHeight&&t.viewLeft==n.viewLeft&&t.viewTop==n.viewTop&&t.absoluteTop==n.absoluteTop&&t.absoluteLeft==n.absoluteLeft&&t.scrollWidth==n.scrollWidth&&t.scrollHeight==n.scrollHeight&&t.scrollLeft==n.scrollLeft&&t.scrollTop==n.scrollTop},e.Scrollbar.prototype.dispose=function(){this.cleanUp_(),e.browserEvents.unbind(this.onMouseDownBarWrapper_),this.onMouseDownBarWrapper_=null,e.browserEvents.unbind(this.onMouseDownHandleWrapper_),this.onMouseDownHandleWrapper_=null,e.utils.dom.removeNode(this.outerSvg_),this.svgBackground_=this.svgGroup_=this.outerSvg_=null,this.svgHandle_&&(this.workspace_.getThemeManager().unsubscribe(this.svgHandle_),this.svgHandle_=null),this.workspace_=null},e.Scrollbar.prototype.constrainHandleLength_=function(t){return 0>=t||isNaN(t)?0:Math.min(t,this.scrollbarLength_)},e.Scrollbar.prototype.setHandleLength_=function(t){this.handleLength_=t,this.svgHandle_.setAttribute(this.lengthAttribute_,this.handleLength_)},e.Scrollbar.prototype.constrainHandlePosition_=function(t){return 0>=t||isNaN(t)?0:Math.min(t,this.scrollbarLength_-this.handleLength_)},e.Scrollbar.prototype.setHandlePosition=function(t){this.handlePosition_=t,this.svgHandle_.setAttribute(this.positionAttribute_,this.handlePosition_)},e.Scrollbar.prototype.setScrollbarLength_=function(t){this.scrollbarLength_=t,this.outerSvg_.setAttribute(this.lengthAttribute_,this.scrollbarLength_),this.svgBackground_.setAttribute(this.lengthAttribute_,this.scrollbarLength_)},e.Scrollbar.prototype.setPosition=function(t,n){this.position.x=t,this.position.y=n,e.utils.dom.setCssTransform(this.outerSvg_,"translate("+(this.position.x+this.origin_.x)+"px,"+(this.position.y+this.origin_.y)+"px)")},e.Scrollbar.prototype.resize=function(t){!t&&!(t=this.workspace_.getMetrics())||this.oldHostMetrics_&&e.Scrollbar.metricsAreEquivalent_(t,this.oldHostMetrics_)||(this.horizontal_?this.resizeHorizontal_(t):this.resizeVertical_(t),this.oldHostMetrics_=t,this.updateMetrics_())},e.Scrollbar.prototype.requiresViewResize_=function(t){return!this.oldHostMetrics_||this.oldHostMetrics_.viewWidth!==t.viewWidth||this.oldHostMetrics_.viewHeight!==t.viewHeight||this.oldHostMetrics_.absoluteLeft!==t.absoluteLeft||this.oldHostMetrics_.absoluteTop!==t.absoluteTop},e.Scrollbar.prototype.resizeHorizontal_=function(t){this.requiresViewResize_(t)?this.resizeViewHorizontal(t):this.resizeContentHorizontal(t)},e.Scrollbar.prototype.resizeViewHorizontal=function(t){var n=t.viewWidth-2*this.margin_;this.pair_&&(n-=e.Scrollbar.scrollbarThickness),this.setScrollbarLength_(Math.max(0,n)),n=t.absoluteLeft+this.margin_,this.pair_&&this.workspace_.RTL&&(n+=e.Scrollbar.scrollbarThickness),this.setPosition(n,t.absoluteTop+t.viewHeight-e.Scrollbar.scrollbarThickness-this.margin_),this.resizeContentHorizontal(t)},e.Scrollbar.prototype.resizeContentHorizontal=function(t){if(t.viewWidth>=t.scrollWidth)this.setHandleLength_(this.scrollbarLength_),this.setHandlePosition(0),this.pair_||this.setVisible(!1);else{this.pair_||this.setVisible(!0);var n=this.scrollbarLength_*t.viewWidth/t.scrollWidth;n=this.constrainHandleLength_(n),this.setHandleLength_(n);var r=this.scrollbarLength_-this.handleLength_;t=this.constrainHandlePosition_(t=(t.viewLeft-t.scrollLeft)/(n=t.scrollWidth-t.viewWidth)*r),this.setHandlePosition(t),this.ratio=r/n}},e.Scrollbar.prototype.resizeVertical_=function(t){this.requiresViewResize_(t)?this.resizeViewVertical(t):this.resizeContentVertical(t)},e.Scrollbar.prototype.resizeViewVertical=function(t){var n=t.viewHeight-2*this.margin_;this.pair_&&(n-=e.Scrollbar.scrollbarThickness),this.setScrollbarLength_(Math.max(0,n)),this.setPosition(this.workspace_.RTL?t.absoluteLeft+this.margin_:t.absoluteLeft+t.viewWidth-e.Scrollbar.scrollbarThickness-this.margin_,t.absoluteTop+this.margin_),this.resizeContentVertical(t)},e.Scrollbar.prototype.resizeContentVertical=function(t){if(t.viewHeight>=t.scrollHeight)this.setHandleLength_(this.scrollbarLength_),this.setHandlePosition(0),this.pair_||this.setVisible(!1);else{this.pair_||this.setVisible(!0);var n=this.scrollbarLength_*t.viewHeight/t.scrollHeight;n=this.constrainHandleLength_(n),this.setHandleLength_(n);var r=this.scrollbarLength_-this.handleLength_;t=this.constrainHandlePosition_(t=(t.viewTop-t.scrollTop)/(n=t.scrollHeight-t.viewHeight)*r),this.setHandlePosition(t),this.ratio=r/n}},e.Scrollbar.prototype.createDom_=function(t){var n="blocklyScrollbar"+(this.horizontal_?"Horizontal":"Vertical");t&&(n+=" "+t),this.outerSvg_=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{class:n},null),this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},this.outerSvg_),this.svgBackground_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyScrollbarBackground"},this.svgGroup_),t=Math.floor((e.Scrollbar.scrollbarThickness-5)/2),this.svgHandle_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyScrollbarHandle",rx:t,ry:t},this.svgGroup_),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarOpacity","fill-opacity"),e.utils.dom.insertAfter(this.outerSvg_,this.workspace_.getParentSvg())},e.Scrollbar.prototype.isVisible=function(){return this.isVisible_},e.Scrollbar.prototype.setContainerVisible=function(t){var n=t!=this.containerVisible_;this.containerVisible_=t,n&&this.updateDisplay_()},e.Scrollbar.prototype.setVisible=function(t){var n=t!=this.isVisible();if(this.pair_)throw Error("Unable to toggle visibility of paired scrollbars.");this.isVisible_=t,n&&this.updateDisplay_()},e.Scrollbar.prototype.updateDisplay_=function(){this.containerVisible_&&this.isVisible()?this.outerSvg_.setAttribute("display","block"):this.outerSvg_.setAttribute("display","none")},e.Scrollbar.prototype.onMouseDownBar_=function(t){if(this.workspace_.markFocused(),e.Touch.clearTouchIdentifier(),this.cleanUp_(),e.utils.isRightButton(t))t.stopPropagation();else{var n=e.utils.mouseToSvg(t,this.workspace_.getParentSvg(),this.workspace_.getInverseScreenCTM());n=this.horizontal_?n.x:n.y;var r=e.utils.getInjectionDivXY_(this.svgHandle_),s=this.handlePosition_,u=.95*this.handleLength_;n<=(r=this.horizontal_?r.x:r.y)?s-=u:n>=r+this.handleLength_&&(s+=u),this.setHandlePosition(this.constrainHandlePosition_(s)),this.updateMetrics_(),t.stopPropagation(),t.preventDefault()}},e.Scrollbar.prototype.onMouseDownHandle_=function(t){this.workspace_.markFocused(),this.cleanUp_(),e.utils.isRightButton(t)?t.stopPropagation():(this.startDragHandle=this.handlePosition_,this.workspace_.setupDragSurface(),this.startDragMouse_=this.horizontal_?t.clientX:t.clientY,e.Scrollbar.onMouseUpWrapper_=e.browserEvents.conditionalBind(document,"mouseup",this,this.onMouseUpHandle_),e.Scrollbar.onMouseMoveWrapper_=e.browserEvents.conditionalBind(document,"mousemove",this,this.onMouseMoveHandle_),t.stopPropagation(),t.preventDefault())},e.Scrollbar.prototype.onMouseMoveHandle_=function(t){this.setHandlePosition(this.constrainHandlePosition_(this.startDragHandle+((this.horizontal_?t.clientX:t.clientY)-this.startDragMouse_))),this.updateMetrics_()},e.Scrollbar.prototype.onMouseUpHandle_=function(){this.workspace_.resetDragSurface(),e.Touch.clearTouchIdentifier(),this.cleanUp_()},e.Scrollbar.prototype.cleanUp_=function(){e.hideChaff(!0),e.Scrollbar.onMouseUpWrapper_&&(e.browserEvents.unbind(e.Scrollbar.onMouseUpWrapper_),e.Scrollbar.onMouseUpWrapper_=null),e.Scrollbar.onMouseMoveWrapper_&&(e.browserEvents.unbind(e.Scrollbar.onMouseMoveWrapper_),e.Scrollbar.onMouseMoveWrapper_=null)},e.Scrollbar.prototype.getRatio_=function(){var t=this.handlePosition_/(this.scrollbarLength_-this.handleLength_);return isNaN(t)&&(t=0),t},e.Scrollbar.prototype.updateMetrics_=function(){var t=this.getRatio_(),n={};this.horizontal_?n.x=t:n.y=t,this.workspace_.setMetrics(n)},e.Scrollbar.prototype.set=function(t,n){this.setHandlePosition(this.constrainHandlePosition_(t*this.ratio)),(n||void 0===n)&&this.updateMetrics_()},e.Scrollbar.prototype.setOrigin=function(t,n){this.origin_=new e.utils.Coordinate(t,n)},e.Tooltip={},e.Tooltip.visible=!1,e.Tooltip.blocked_=!1,e.Tooltip.LIMIT=50,e.Tooltip.mouseOutPid_=0,e.Tooltip.showPid_=0,e.Tooltip.lastX_=0,e.Tooltip.lastY_=0,e.Tooltip.element_=null,e.Tooltip.poisonedElement_=null,e.Tooltip.OFFSET_X=0,e.Tooltip.OFFSET_Y=10,e.Tooltip.RADIUS_OK=10,e.Tooltip.HOVER_MS=750,e.Tooltip.MARGINS=5,e.Tooltip.DIV=null,e.Tooltip.getTooltipOfObject=function(t){if(t=e.Tooltip.getTargetObject_(t)){for(t=t.tooltip;"function"==typeof t;)t=t();if("string"!=typeof t)throw Error("Tooltip function must return a string.");return t}return""},e.Tooltip.getTargetObject_=function(t){for(;t&&t.tooltip;){if("string"==typeof t.tooltip||"function"==typeof t.tooltip)return t;t=t.tooltip}return null},e.Tooltip.createDom=function(){e.Tooltip.DIV||(e.Tooltip.DIV=document.createElement("div"),e.Tooltip.DIV.className="blocklyTooltipDiv",(e.parentContainer||document.body).appendChild(e.Tooltip.DIV))},e.Tooltip.bindMouseEvents=function(t){t.mouseOverWrapper_=e.browserEvents.bind(t,"mouseover",null,e.Tooltip.onMouseOver_),t.mouseOutWrapper_=e.browserEvents.bind(t,"mouseout",null,e.Tooltip.onMouseOut_),t.addEventListener("mousemove",e.Tooltip.onMouseMove_,!1)},e.Tooltip.unbindMouseEvents=function(t){t&&(e.browserEvents.unbind(t.mouseOverWrapper_),e.browserEvents.unbind(t.mouseOutWrapper_),t.removeEventListener("mousemove",e.Tooltip.onMouseMove_))},e.Tooltip.onMouseOver_=function(t){e.Tooltip.blocked_||(t=e.Tooltip.getTargetObject_(t.currentTarget),e.Tooltip.element_!=t&&(e.Tooltip.hide(),e.Tooltip.poisonedElement_=null,e.Tooltip.element_=t),clearTimeout(e.Tooltip.mouseOutPid_))},e.Tooltip.onMouseOut_=function(t){e.Tooltip.blocked_||(e.Tooltip.mouseOutPid_=setTimeout(function(){e.Tooltip.element_=null,e.Tooltip.poisonedElement_=null,e.Tooltip.hide()},1),clearTimeout(e.Tooltip.showPid_))},e.Tooltip.onMouseMove_=function(t){if(e.Tooltip.element_&&e.Tooltip.element_.tooltip&&!e.Tooltip.blocked_)if(e.Tooltip.visible){var n=e.Tooltip.lastX_-t.pageX;t=e.Tooltip.lastY_-t.pageY,Math.sqrt(n*n+t*t)>e.Tooltip.RADIUS_OK&&e.Tooltip.hide()}else e.Tooltip.poisonedElement_!=e.Tooltip.element_&&(clearTimeout(e.Tooltip.showPid_),e.Tooltip.lastX_=t.pageX,e.Tooltip.lastY_=t.pageY,e.Tooltip.showPid_=setTimeout(e.Tooltip.show_,e.Tooltip.HOVER_MS))},e.Tooltip.dispose=function(){e.Tooltip.element_=null,e.Tooltip.poisonedElement_=null,e.Tooltip.hide()},e.Tooltip.hide=function(){e.Tooltip.visible&&(e.Tooltip.visible=!1,e.Tooltip.DIV&&(e.Tooltip.DIV.style.display="none")),e.Tooltip.showPid_&&clearTimeout(e.Tooltip.showPid_)},e.Tooltip.block=function(){e.Tooltip.hide(),e.Tooltip.blocked_=!0},e.Tooltip.unblock=function(){e.Tooltip.blocked_=!1},e.Tooltip.show_=function(){if(!e.Tooltip.blocked_&&(e.Tooltip.poisonedElement_=e.Tooltip.element_,e.Tooltip.DIV)){e.Tooltip.DIV.textContent="";var t=e.Tooltip.getTooltipOfObject(e.Tooltip.element_);t=(t=e.utils.string.wrap(t,e.Tooltip.LIMIT)).split("\n");for(var n=0;n<t.length;n++){var r=document.createElement("div");r.appendChild(document.createTextNode(t[n])),e.Tooltip.DIV.appendChild(r)}t=e.Tooltip.element_.RTL,n=document.documentElement.clientWidth,r=document.documentElement.clientHeight,e.Tooltip.DIV.style.direction=t?"rtl":"ltr",e.Tooltip.DIV.style.display="block",e.Tooltip.visible=!0;var s=e.Tooltip.lastX_;s=t?s-(e.Tooltip.OFFSET_X+e.Tooltip.DIV.offsetWidth):s+e.Tooltip.OFFSET_X;var u=e.Tooltip.lastY_+e.Tooltip.OFFSET_Y;u+e.Tooltip.DIV.offsetHeight>r+window.scrollY&&(u-=e.Tooltip.DIV.offsetHeight+2*e.Tooltip.OFFSET_Y),t?s=Math.max(e.Tooltip.MARGINS-window.scrollX,s):s+e.Tooltip.DIV.offsetWidth>n+window.scrollX-2*e.Tooltip.MARGINS&&(s=n-e.Tooltip.DIV.offsetWidth-2*e.Tooltip.MARGINS),e.Tooltip.DIV.style.top=u+"px",e.Tooltip.DIV.style.left=s+"px"}},e.utils.aria={},e.utils.aria.ARIA_PREFIX_="aria-",e.utils.aria.ROLE_ATTRIBUTE_="role",e.utils.aria.Role={GRID:"grid",GRIDCELL:"gridcell",GROUP:"group",LISTBOX:"listbox",MENU:"menu",MENUITEM:"menuitem",MENUITEMCHECKBOX:"menuitemcheckbox",OPTION:"option",PRESENTATION:"presentation",ROW:"row",TREE:"tree",TREEITEM:"treeitem"},e.utils.aria.State={ACTIVEDESCENDANT:"activedescendant",COLCOUNT:"colcount",DISABLED:"disabled",EXPANDED:"expanded",INVALID:"invalid",LABEL:"label",LABELLEDBY:"labelledby",LEVEL:"level",ORIENTATION:"orientation",POSINSET:"posinset",ROWCOUNT:"rowcount",SELECTED:"selected",SETSIZE:"setsize",VALUEMAX:"valuemax",VALUEMIN:"valuemin"},e.utils.aria.setRole=function(t,n){t.setAttribute(e.utils.aria.ROLE_ATTRIBUTE_,n)},e.utils.aria.setState=function(t,n,r){Array.isArray(r)&&(r=r.join(" ")),t.setAttribute(e.utils.aria.ARIA_PREFIX_+n,r)},e.IASTNodeLocation=function(){},e.IASTNodeLocationSvg=function(){},e.IASTNodeLocationWithBlock=function(){},e.IKeyboardAccessible=function(){},e.utils.deprecation={},e.utils.deprecation.warn=function(t,n,r,s){t=t+" was deprecated on "+n+" and will be deleted on "+r+".",s&&(t+="\nUse "+s+" instead."),console.warn(t)},e.Connection=function(t,n){this.sourceBlock_=t,this.type=n},e.Connection.CAN_CONNECT=0,e.Connection.REASON_SELF_CONNECTION=1,e.Connection.REASON_WRONG_TYPE=2,e.Connection.REASON_TARGET_NULL=3,e.Connection.REASON_CHECKS_FAILED=4,e.Connection.REASON_DIFFERENT_WORKSPACES=5,e.Connection.REASON_SHADOW_PARENT=6,e.Connection.REASON_DRAG_CHECKS_FAILED=7,e.Connection.prototype.targetConnection=null,e.Connection.prototype.disposed=!1,e.Connection.prototype.check_=null,e.Connection.prototype.shadowDom_=null,e.Connection.prototype.x=0,e.Connection.prototype.y=0,e.Connection.prototype.connect_=function(t){var B,n=e.connectionTypes.INPUT_VALUE,r=this.getSourceBlock(),s=t.getSourceBlock();if(t.isConnected()&&t.disconnect(),this.isConnected()){var u=this.getShadowDom(!0);this.shadowDom_=null;var b=this.targetBlock();if(b.isShadow())b.dispose(!1);else{this.disconnect();var x=b}this.shadowDom_=u}e.Events.isEnabled()&&(B=new(e.Events.get(e.Events.BLOCK_MOVE))(s)),e.Connection.connectReciprocally_(this,t),s.setParent(r),B&&(B.recordNew(),e.Events.fire(B)),x&&((s=e.Connection.getConnectionForOrphanedConnection(s,t=this.type===n?x.outputConnection:x.previousConnection))?t.connect(s):t.onFailedConnect(this))},e.Connection.prototype.dispose=function(){if(this.isConnected()){this.setShadowDom(null);var t=this.targetBlock();t&&t.unplug()}this.disposed=!0},e.Connection.prototype.getSourceBlock=function(){return this.sourceBlock_},e.Connection.prototype.isSuperior=function(){return this.type==e.connectionTypes.INPUT_VALUE||this.type==e.connectionTypes.NEXT_STATEMENT},e.Connection.prototype.isConnected=function(){return!!this.targetConnection},e.Connection.prototype.canConnectWithReason=function(t){return e.utils.deprecation.warn("Connection.prototype.canConnectWithReason","July 2020","July 2021","the workspace's connection checker"),this.getConnectionChecker().canConnectWithReason(this,t,!1)},e.Connection.prototype.checkConnection=function(t){e.utils.deprecation.warn("Connection.prototype.checkConnection","July 2020","July 2021","the workspace's connection checker");var n=this.getConnectionChecker(),r=n.canConnectWithReason(this,t,!1);if(r!=e.Connection.CAN_CONNECT)throw Error(n.getErrorMessage(r,this,t))},e.Connection.prototype.getConnectionChecker=function(){return this.sourceBlock_.workspace.connectionChecker},e.Connection.prototype.isConnectionAllowed=function(t){return e.utils.deprecation.warn("Connection.prototype.isConnectionAllowed","July 2020","July 2021","the workspace's connection checker"),this.getConnectionChecker().canConnect(this,t,!0)},e.Connection.prototype.onFailedConnect=function(t){},e.Connection.prototype.connect=function(t){if(this.targetConnection!=t&&this.getConnectionChecker().canConnect(this,t,!1)){var n=e.Events.getGroup();n||e.Events.setGroup(!0),this.isSuperior()?this.connect_(t):t.connect_(this),n||e.Events.setGroup(!1)}},e.Connection.connectReciprocally_=function(t,n){if(!t||!n)throw Error("Cannot connect null connections.");t.targetConnection=n,n.targetConnection=t},e.Connection.getSingleConnection_=function(t,n){for(var b,r=null,s=(n=n.outputConnection).getConnectionChecker(),u=0;b=t.inputList[u];u++)if((b=b.connection)&&s.canConnect(n,b,!1)){if(r)return null;r=b}return r},e.Connection.getConnectionForOrphanedOutput_=function(t,n){for(var r;r=e.Connection.getSingleConnection_(t,n);)if(!(t=r.targetBlock())||t.isShadow())return r;return null},e.Connection.getConnectionForOrphanedConnection=function(t,n){if(n.type===e.connectionTypes.OUTPUT_VALUE)return e.Connection.getConnectionForOrphanedOutput_(t,n.getSourceBlock());t=t.lastConnectionInStack(!0);var r=n.getConnectionChecker();return t&&r.canConnect(n,t,!1)?t:null},e.Connection.prototype.disconnect=function(){var t=this.targetConnection;if(!t)throw Error("Source connection not connected.");if(t.targetConnection!=this)throw Error("Target connection not connected to source connection.");if(this.isSuperior()){var n=this.sourceBlock_,r=t.getSourceBlock();t=this}else n=t.getSourceBlock(),r=this.sourceBlock_;var s=e.Events.getGroup();s||e.Events.setGroup(!0),this.disconnectInternal_(n,r),r.isShadow()||t.respawnShadow_(),s||e.Events.setGroup(!1)},e.Connection.prototype.disconnectInternal_=function(t,n){var r;e.Events.isEnabled()&&(r=new(e.Events.get(e.Events.BLOCK_MOVE))(n)),this.targetConnection=this.targetConnection.targetConnection=null,n.setParent(null),r&&(r.recordNew(),e.Events.fire(r))},e.Connection.prototype.respawnShadow_=function(){var t=this.getSourceBlock(),n=this.getShadowDom();if(t.workspace&&n)if((t=e.Xml.domToBlock(n,t.workspace)).outputConnection)this.connect(t.outputConnection);else{if(!t.previousConnection)throw Error("Child block does not have output or previous statement.");this.connect(t.previousConnection)}},e.Connection.prototype.targetBlock=function(){return this.isConnected()?this.targetConnection.getSourceBlock():null},e.Connection.prototype.checkType=function(t){return e.utils.deprecation.warn("Connection.prototype.checkType","October 2019","January 2021","the workspace's connection checker"),this.getConnectionChecker().canConnect(this,t,!1)},e.Connection.prototype.checkType_=function(t){return e.utils.deprecation.warn("Connection.prototype.checkType_","October 2019","January 2021","the workspace's connection checker"),this.checkType(t)},e.Connection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()},e.Connection.prototype.setCheck=function(t){return t?(Array.isArray(t)||(t=[t]),this.check_=t,this.onCheckChanged_()):this.check_=null,this},e.Connection.prototype.getCheck=function(){return this.check_},e.Connection.prototype.setShadowDom=function(t){this.shadowDom_=t,(t=this.targetBlock())?t.isShadow()&&(t.dispose(!1),this.respawnShadow_()):this.respawnShadow_()},e.Connection.prototype.getShadowDom=function(t){return t&&this.targetBlock().isShadow()?e.Xml.blockToDom(this.targetBlock()):this.shadowDom_},e.Connection.prototype.neighbours=function(t){return[]},e.Connection.prototype.getParentInput=function(){for(var t=null,n=this.sourceBlock_.inputList,r=0;r<n.length;r++)if(n[r].connection===this){t=n[r];break}return t},e.Connection.prototype.toString=function(){var t=this.sourceBlock_;if(!t)return"Orphan Connection";if(t.outputConnection==this)var n="Output Connection of ";else if(t.previousConnection==this)n="Previous Connection of ";else if(t.nextConnection==this)n="Next Connection of ";else{n=null;for(var s,r=0;s=t.inputList[r];r++)if(s.connection==this){n=s;break}if(!n)return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection";n='Input "'+n.name+'" connection on '}return n+t.toDevString()},e.IConnectionChecker=function(){},e.ConnectionChecker=function(){},e.ConnectionChecker.prototype.canConnect=function(t,n,r,s){return this.canConnectWithReason(t,n,r,s)==e.Connection.CAN_CONNECT},e.ConnectionChecker.prototype.canConnectWithReason=function(t,n,r,s){var u=this.doSafetyChecks(t,n);return u!=e.Connection.CAN_CONNECT?u:this.doTypeChecks(t,n)?r&&!this.doDragChecks(t,n,s||0)?e.Connection.REASON_DRAG_CHECKS_FAILED:e.Connection.CAN_CONNECT:e.Connection.REASON_CHECKS_FAILED},e.ConnectionChecker.prototype.getErrorMessage=function(t,n,r){switch(t){case e.Connection.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case e.Connection.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case e.Connection.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case e.Connection.REASON_TARGET_NULL:return"Target connection is null.";case e.Connection.REASON_CHECKS_FAILED:return"Connection checks failed. "+n+" expected "+n.getCheck()+", found "+r.getCheck();case e.Connection.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case e.Connection.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";default:return"Unknown connection failure: this should never happen!"}},e.ConnectionChecker.prototype.doSafetyChecks=function(t,n){if(!t||!n)return e.Connection.REASON_TARGET_NULL;if(t.isSuperior())var r=t.getSourceBlock(),s=n.getSourceBlock();else s=t.getSourceBlock(),r=n.getSourceBlock();return r==s?e.Connection.REASON_SELF_CONNECTION:n.type!=e.OPPOSITE_TYPE[t.type]?e.Connection.REASON_WRONG_TYPE:r.workspace!==s.workspace?e.Connection.REASON_DIFFERENT_WORKSPACES:r.isShadow()&&!s.isShadow()?e.Connection.REASON_SHADOW_PARENT:e.Connection.CAN_CONNECT},e.ConnectionChecker.prototype.doTypeChecks=function(t,n){if(t=t.getCheck(),n=n.getCheck(),!t||!n)return!0;for(var r=0;r<t.length;r++)if(-1!=n.indexOf(t[r]))return!0;return!1},e.ConnectionChecker.prototype.doDragChecks=function(t,n,r){if(t.distanceFrom(n)>r||n.getSourceBlock().isInsertionMarker())return!1;switch(n.type){case e.connectionTypes.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(t,n);case e.connectionTypes.OUTPUT_VALUE:if(n.isConnected()&&!n.targetBlock().isInsertionMarker()||t.isConnected())return!1;break;case e.connectionTypes.INPUT_VALUE:if(n.isConnected()&&!n.targetBlock().isMovable()&&!n.targetBlock().isShadow())return!1;break;case e.connectionTypes.NEXT_STATEMENT:if(n.isConnected()&&!t.getSourceBlock().nextConnection&&!n.targetBlock().isShadow()&&n.targetBlock().nextConnection)return!1;break;default:return!1}return-1==e.draggingConnections.indexOf(n)},e.ConnectionChecker.prototype.canConnectToPrevious_=function(t,n){return!(t.targetConnection||-1!=e.draggingConnections.indexOf(n)||n.targetConnection&&(!(t=n.targetBlock()).isInsertionMarker()||t.getPreviousBlock()))},e.registry.register(e.registry.Type.CONNECTION_CHECKER,e.registry.DEFAULT,e.ConnectionChecker),e.VariableMap=function(t){this.variableMap_=Object.create(null),this.workspace=t},e.VariableMap.prototype.clear=function(){this.variableMap_=Object.create(null)},e.VariableMap.prototype.renameVariable=function(t,n){var r=this.getVariable(n,t.type),s=this.workspace.getAllBlocks(!1);e.Events.setGroup(!0);try{r&&r.getId()!=t.getId()?this.renameVariableWithConflict_(t,n,r,s):this.renameVariableAndUses_(t,n,s)}finally{e.Events.setGroup(!1)}},e.VariableMap.prototype.renameVariableById=function(t,n){var r=this.getVariableById(t);if(!r)throw Error("Tried to rename a variable that didn't exist. ID: "+t);this.renameVariable(r,n)},e.VariableMap.prototype.renameVariableAndUses_=function(t,n,r){for(e.Events.fire(new(e.Events.get(e.Events.VAR_RENAME))(t,n)),t.name=n,n=0;n<r.length;n++)r[n].updateVarName(t)},e.VariableMap.prototype.renameVariableWithConflict_=function(t,n,r,s){var u=t.type;for(n!=r.name&&this.renameVariableAndUses_(r,n,s),n=0;n<s.length;n++)s[n].renameVarById(t.getId(),r.getId());e.Events.fire(new(e.Events.get(e.Events.VAR_DELETE))(t)),t=this.getVariablesOfType(u).indexOf(t),this.variableMap_[u].splice(t,1)},e.VariableMap.prototype.createVariable=function(t,n,r){var s=this.getVariable(t,n);if(s){if(r&&s.getId()!=r)throw Error('Variable "'+t+'" is already in use and its id is "'+s.getId()+'" which conflicts with the passed in id, "'+r+'".');return s}if(r&&this.getVariableById(r))throw Error('Variable id, "'+r+'", is already in use.');return s=r||e.utils.genUid(),s=new e.VariableModel(this.workspace,t,n=n||"",s),(t=this.variableMap_[n]||[]).push(s),delete this.variableMap_[n],this.variableMap_[n]=t,s},e.VariableMap.prototype.deleteVariable=function(t){for(var s,n=this.variableMap_[t.type],r=0;s=n[r];r++)if(s.getId()==t.getId()){n.splice(r,1),e.Events.fire(new(e.Events.get(e.Events.VAR_DELETE))(t));break}},e.VariableMap.prototype.deleteVariableById=function(t){var n=this.getVariableById(t);if(n){var u,r=n.name,s=this.getVariableUsesById(t);for(t=0;u=s[t];t++)if("procedures_defnoreturn"==u.type||"procedures_defreturn"==u.type)return t=u.getFieldValue("NAME"),r=e.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",r).replace("%2",t),void e.alert(r);var b=this;1<s.length?(r=e.Msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(s.length)).replace("%2",r),e.confirm(r,function(x){x&&n&&b.deleteVariableInternal(n,s)})):b.deleteVariableInternal(n,s)}else console.warn("Can't delete non-existent variable: "+t)},e.VariableMap.prototype.deleteVariableInternal=function(t,n){var r=e.Events.getGroup();r||e.Events.setGroup(!0);try{for(var s=0;s<n.length;s++)n[s].dispose(!0);this.deleteVariable(t)}finally{r||e.Events.setGroup(!1)}},e.VariableMap.prototype.getVariable=function(t,n){if(n=this.variableMap_[n||""])for(var s,r=0;s=n[r];r++)if(e.Names.equals(s.name,t))return s;return null},e.VariableMap.prototype.getVariableById=function(t){for(var n=Object.keys(this.variableMap_),r=0;r<n.length;r++)for(var b,s=n[r],u=0;b=this.variableMap_[s][u];u++)if(b.getId()==t)return b;return null},e.VariableMap.prototype.getVariablesOfType=function(t){return(t=this.variableMap_[t||""])?t.slice():[]},e.VariableMap.prototype.getVariableTypes=function(t){var n={};e.utils.object.mixin(n,this.variableMap_),t&&t.getPotentialVariableMap()&&e.utils.object.mixin(n,t.getPotentialVariableMap().variableMap_),t=Object.keys(n),n=!1;for(var r=0;r<t.length;r++)""==t[r]&&(n=!0);return n||t.push(""),t},e.VariableMap.prototype.getAllVariables=function(){var n,t=[];for(n in this.variableMap_)t=t.concat(this.variableMap_[n]);return t},e.VariableMap.prototype.getAllVariableNames=function(){var n,t=[];for(n in this.variableMap_)for(var u,r=this.variableMap_[n],s=0;u=r[s];s++)t.push(u.name);return t},e.VariableMap.prototype.getVariableUsesById=function(t){for(var n=[],r=this.workspace.getAllBlocks(!1),s=0;s<r.length;s++){var u=r[s].getVarModels();if(u)for(var b=0;b<u.length;b++)u[b].getId()==t&&n.push(r[s])}return n},e.Workspace=function(t){this.id=e.utils.genUid(),e.Workspace.WorkspaceDB_[this.id]=this,this.options=t||new e.Options({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(e.registry.getClassFromOptions(e.registry.Type.CONNECTION_CHECKER,this.options,!0))(this),this.topBlocks_=[],this.topComments_=[],this.commentDB_=Object.create(null),this.listeners_=[],this.undoStack_=[],this.redoStack_=[],this.blockDB_=Object.create(null),this.typedBlocksDB_=Object.create(null),this.variableMap_=new e.VariableMap(this),this.potentialVariableMap_=null},e.Workspace.prototype.rendered=!1,e.Workspace.prototype.isClearing=!1,e.Workspace.prototype.MAX_UNDO=1024,e.Workspace.prototype.connectionDBList=null,e.Workspace.prototype.dispose=function(){this.listeners_.length=0,this.clear(),delete e.Workspace.WorkspaceDB_[this.id]},e.Workspace.SCAN_ANGLE=3,e.Workspace.prototype.sortObjects_=function(t,n){return t=t.getRelativeToSurfaceXY(),n=n.getRelativeToSurfaceXY(),t.y+e.Workspace.prototype.sortObjects_.offset*t.x-(n.y+e.Workspace.prototype.sortObjects_.offset*n.x)},e.Workspace.prototype.addTopBlock=function(t){this.topBlocks_.push(t)},e.Workspace.prototype.removeTopBlock=function(t){if(!e.utils.arrayRemove(this.topBlocks_,t))throw Error("Block not present in workspace's list of top-most blocks.")},e.Workspace.prototype.getTopBlocks=function(t){var n=[].concat(this.topBlocks_);return t&&1<n.length&&(this.sortObjects_.offset=Math.sin(e.utils.math.toRadians(e.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),n.sort(this.sortObjects_)),n},e.Workspace.prototype.addTypedBlock=function(t){this.typedBlocksDB_[t.type]||(this.typedBlocksDB_[t.type]=[]),this.typedBlocksDB_[t.type].push(t)},e.Workspace.prototype.removeTypedBlock=function(t){this.typedBlocksDB_[t.type].splice(this.typedBlocksDB_[t.type].indexOf(t),1),this.typedBlocksDB_[t.type].length||delete this.typedBlocksDB_[t.type]},e.Workspace.prototype.getBlocksByType=function(t,n){return this.typedBlocksDB_[t]?(t=this.typedBlocksDB_[t].slice(0),n&&1<t.length&&(this.sortObjects_.offset=Math.sin(e.utils.math.toRadians(e.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),t.sort(this.sortObjects_)),t):[]},e.Workspace.prototype.addTopComment=function(t){this.topComments_.push(t),this.commentDB_[t.id]&&console.warn('Overriding an existing comment on this workspace, with id "'+t.id+'"'),this.commentDB_[t.id]=t},e.Workspace.prototype.removeTopComment=function(t){if(!e.utils.arrayRemove(this.topComments_,t))throw Error("Comment not present in workspace's list of top-most comments.");delete this.commentDB_[t.id]},e.Workspace.prototype.getTopComments=function(t){var n=[].concat(this.topComments_);return t&&1<n.length&&(this.sortObjects_.offset=Math.sin(e.utils.math.toRadians(e.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),n.sort(this.sortObjects_)),n},e.Workspace.prototype.getAllBlocks=function(t){if(t){t=this.getTopBlocks(!0);for(var n=[],r=0;r<t.length;r++)n.push.apply(n,t[r].getDescendants(!0))}else for(n=this.getTopBlocks(!1),r=0;r<n.length;r++)n.push.apply(n,n[r].getChildren(!1));return n.filter(function(s){return!s.isInsertionMarker()})},e.Workspace.prototype.clear=function(){this.isClearing=!0;try{var t=e.Events.getGroup();for(t||e.Events.setGroup(!0);this.topBlocks_.length;)this.topBlocks_[0].dispose(!1);for(;this.topComments_.length;)this.topComments_[this.topComments_.length-1].dispose(!1);t||e.Events.setGroup(!1),this.variableMap_.clear(),this.potentialVariableMap_&&this.potentialVariableMap_.clear()}finally{this.isClearing=!1}},e.Workspace.prototype.renameVariableById=function(t,n){this.variableMap_.renameVariableById(t,n)},e.Workspace.prototype.createVariable=function(t,n,r){return this.variableMap_.createVariable(t,n,r)},e.Workspace.prototype.getVariableUsesById=function(t){return this.variableMap_.getVariableUsesById(t)},e.Workspace.prototype.deleteVariableById=function(t){this.variableMap_.deleteVariableById(t)},e.Workspace.prototype.getVariable=function(t,n){return this.variableMap_.getVariable(t,n)},e.Workspace.prototype.getVariableById=function(t){return this.variableMap_.getVariableById(t)},e.Workspace.prototype.getVariablesOfType=function(t){return this.variableMap_.getVariablesOfType(t)},e.Workspace.prototype.getVariableTypes=function(){return this.variableMap_.getVariableTypes(this)},e.Workspace.prototype.getAllVariables=function(){return this.variableMap_.getAllVariables()},e.Workspace.prototype.getAllVariableNames=function(){return this.variableMap_.getAllVariableNames()},e.Workspace.prototype.getWidth=function(){return 0},e.Workspace.prototype.newBlock=function(t,n){return new e.Block(this,t,n)},e.Workspace.prototype.remainingCapacity=function(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length},e.Workspace.prototype.remainingCapacityOfType=function(t){return this.options.maxInstances?(void 0!==this.options.maxInstances[t]?this.options.maxInstances[t]:1/0)-this.getBlocksByType(t,!1).length:1/0},e.Workspace.prototype.isCapacityAvailable=function(t){if(!this.hasBlockLimits())return!0;var r,n=0;for(r in t){if(t[r]>this.remainingCapacityOfType(r))return!1;n+=t[r]}return!(n>this.remainingCapacity())},e.Workspace.prototype.hasBlockLimits=function(){return this.options.maxBlocks!=1/0||!!this.options.maxInstances},e.Workspace.prototype.getUndoStack=function(){return this.undoStack_},e.Workspace.prototype.getRedoStack=function(){return this.redoStack_},e.Workspace.prototype.undo=function(t){var n=t?this.redoStack_:this.undoStack_,r=t?this.undoStack_:this.redoStack_,s=n.pop();if(s){for(var u=[s];n.length&&s.group&&s.group==n[n.length-1].group;)u.push(n.pop());for(n=0;s=u[n];n++)r.push(s);u=e.Events.filter(u,t),e.Events.recordUndo=!1;try{for(n=0;s=u[n];n++)s.run(t)}finally{e.Events.recordUndo=!0}}},e.Workspace.prototype.clearUndo=function(){this.undoStack_.length=0,this.redoStack_.length=0,e.Events.clearPendingUndo()},e.Workspace.prototype.addChangeListener=function(t){return this.listeners_.push(t),t},e.Workspace.prototype.removeChangeListener=function(t){e.utils.arrayRemove(this.listeners_,t)},e.Workspace.prototype.fireChangeListener=function(t){if(t.recordUndo)for(this.undoStack_.push(t),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(var r,n=0;r=this.listeners_[n];n++)r(t)},e.Workspace.prototype.getBlockById=function(t){return this.blockDB_[t]||null},e.Workspace.prototype.setBlockById=function(t,n){this.blockDB_[t]=n},e.Workspace.prototype.removeBlockById=function(t){delete this.blockDB_[t]},e.Workspace.prototype.getCommentById=function(t){return this.commentDB_[t]||null},e.Workspace.prototype.allInputsFilled=function(t){for(var s,n=this.getTopBlocks(!1),r=0;s=n[r];r++)if(!s.allInputsFilled(t))return!1;return!0},e.Workspace.prototype.getPotentialVariableMap=function(){return this.potentialVariableMap_},e.Workspace.prototype.createPotentialVariableMap=function(){this.potentialVariableMap_=new e.VariableMap(this)},e.Workspace.prototype.getVariableMap=function(){return this.variableMap_},e.Workspace.prototype.setVariableMap=function(t){this.variableMap_=t},e.Workspace.WorkspaceDB_=Object.create(null),e.Workspace.getById=function(t){return e.Workspace.WorkspaceDB_[t]||null},e.Workspace.getAll=function(){var n,t=[];for(n in e.Workspace.WorkspaceDB_)t.push(e.Workspace.WorkspaceDB_[n]);return t},e.WorkspaceDragSurfaceSvg=function(t){this.container_=t,this.createDom()},e.WorkspaceDragSurfaceSvg.prototype.SVG_=null,e.WorkspaceDragSurfaceSvg.prototype.container_=null,e.WorkspaceDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{xmlns:e.utils.dom.SVG_NS,"xmlns:html":e.utils.dom.HTML_NS,"xmlns:xlink":e.utils.dom.XLINK_NS,version:"1.1",class:"blocklyWsDragSurface blocklyOverflowVisible"},null),this.container_.appendChild(this.SVG_))},e.WorkspaceDragSurfaceSvg.prototype.translateSurface=function(t,n){t=t.toFixed(0),n=n.toFixed(0),this.SVG_.style.display="block",e.utils.dom.setCssTransform(this.SVG_,"translate3d("+t+"px, "+n+"px, 0px)")},e.WorkspaceDragSurfaceSvg.prototype.getSurfaceTranslation=function(){return e.utils.getRelativeXY(this.SVG_)},e.WorkspaceDragSurfaceSvg.prototype.clearAndHide=function(t){if(!t)throw Error("Couldn't clear and hide the drag surface: missing new surface.");var n=this.SVG_.childNodes[0],r=this.SVG_.childNodes[1];if(!(n&&r&&e.utils.dom.hasClass(n,"blocklyBlockCanvas")&&e.utils.dom.hasClass(r,"blocklyBubbleCanvas")))throw Error("Couldn't clear and hide the drag surface. A node was missing.");if(null!=this.previousSibling_?e.utils.dom.insertAfter(n,this.previousSibling_):t.insertBefore(n,t.firstChild),e.utils.dom.insertAfter(r,n),this.SVG_.style.display="none",this.SVG_.childNodes.length)throw Error("Drag surface was not cleared.");e.utils.dom.setCssTransform(this.SVG_,""),this.previousSibling_=null},e.WorkspaceDragSurfaceSvg.prototype.setContentsAndShow=function(t,n,r,s,u,b){if(this.SVG_.childNodes.length)throw Error("Already dragging a block.");this.previousSibling_=r,t.setAttribute("transform","translate(0, 0) scale("+b+")"),n.setAttribute("transform","translate(0, 0) scale("+b+")"),this.SVG_.setAttribute("width",s),this.SVG_.setAttribute("height",u),this.SVG_.appendChild(t),this.SVG_.appendChild(n),this.SVG_.style.display="block"},e.blockRendering={},e.blockRendering.useDebugger=!1,e.blockRendering.register=function(t,n){e.registry.register(e.registry.Type.RENDERER,t,n)},e.blockRendering.unregister=function(t){e.registry.unregister(e.registry.Type.RENDERER,t)},e.blockRendering.startDebugger=function(){e.blockRendering.useDebugger=!0},e.blockRendering.stopDebugger=function(){e.blockRendering.useDebugger=!1},e.blockRendering.init=function(t,n,r){return(t=new(e.registry.getClass(e.registry.Type.RENDERER,t))(t)).init(n,r),t},e.ASTNode=function(t,n,r){if(!n)throw Error("Cannot create a node without a location.");this.type_=t,this.isConnection_=e.ASTNode.isConnectionType_(t),this.location_=n,this.wsCoordinate_=null,this.processParams_(r||null)},e.ASTNode.types={FIELD:"field",BLOCK:"block",INPUT:"input",OUTPUT:"output",NEXT:"next",PREVIOUS:"previous",STACK:"stack",WORKSPACE:"workspace"},e.ASTNode.NAVIGATE_ALL_FIELDS=!1,e.ASTNode.DEFAULT_OFFSET_Y=-20,e.ASTNode.isConnectionType_=function(t){switch(t){case e.ASTNode.types.PREVIOUS:case e.ASTNode.types.NEXT:case e.ASTNode.types.INPUT:case e.ASTNode.types.OUTPUT:return!0}return!1},e.ASTNode.createFieldNode=function(t){return t?new e.ASTNode(e.ASTNode.types.FIELD,t):null},e.ASTNode.createConnectionNode=function(t){if(!t)return null;var n=t.type;return n==e.connectionTypes.INPUT_VALUE||n==e.connectionTypes.NEXT_STATEMENT&&t.getParentInput()?e.ASTNode.createInputNode(t.getParentInput()):n==e.connectionTypes.NEXT_STATEMENT?new e.ASTNode(e.ASTNode.types.NEXT,t):n==e.connectionTypes.OUTPUT_VALUE?new e.ASTNode(e.ASTNode.types.OUTPUT,t):n==e.connectionTypes.PREVIOUS_STATEMENT?new e.ASTNode(e.ASTNode.types.PREVIOUS,t):null},e.ASTNode.createInputNode=function(t){return t&&t.connection?new e.ASTNode(e.ASTNode.types.INPUT,t.connection):null},e.ASTNode.createBlockNode=function(t){return t?new e.ASTNode(e.ASTNode.types.BLOCK,t):null},e.ASTNode.createStackNode=function(t){return t?new e.ASTNode(e.ASTNode.types.STACK,t):null},e.ASTNode.createWorkspaceNode=function(t,n){return n&&t?new e.ASTNode(e.ASTNode.types.WORKSPACE,t,{wsCoordinate:n}):null},e.ASTNode.createTopNode=function(t){var n=t.previousConnection||t.outputConnection;return n?e.ASTNode.createConnectionNode(n):e.ASTNode.createBlockNode(t)},e.ASTNode.prototype.processParams_=function(t){t&&t.wsCoordinate&&(this.wsCoordinate_=t.wsCoordinate)},e.ASTNode.prototype.getLocation=function(){return this.location_},e.ASTNode.prototype.getType=function(){return this.type_},e.ASTNode.prototype.getWsCoordinate=function(){return this.wsCoordinate_},e.ASTNode.prototype.isConnection=function(){return this.isConnection_},e.ASTNode.prototype.findNextForInput_=function(){var r,t=this.location_.getParentInput(),n=t.getSourceBlock();for(t=n.inputList.indexOf(t)+1;r=n.inputList[t];t++){for(var b,s=r.fieldRow,u=0;b=s[u];u++)if(b.isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(b);if(r.connection)return e.ASTNode.createInputNode(r)}return null},e.ASTNode.prototype.findNextForField_=function(){var t=this.location_,n=t.getParentInput(),r=t.getSourceBlock(),s=r.inputList.indexOf(n);for(t=n.fieldRow.indexOf(t)+1;n=r.inputList[s];s++){for(var u=n.fieldRow;t<u.length;){if(u[t].isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(u[t]);t++}if(t=0,n.connection)return e.ASTNode.createInputNode(n)}return null},e.ASTNode.prototype.findPrevForInput_=function(){for(var s,t=this.location_.getParentInput(),n=t.getSourceBlock(),r=n.inputList.indexOf(t);s=n.inputList[r];r--){if(s.connection&&s!==t)return e.ASTNode.createInputNode(s);for(var b,u=(s=s.fieldRow).length-1;b=s[u];u--)if(b.isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(b)}return null},e.ASTNode.prototype.findPrevForField_=function(){var u,t=this.location_,n=t.getParentInput(),r=t.getSourceBlock(),s=r.inputList.indexOf(n);for(t=n.fieldRow.indexOf(t)-1;u=r.inputList[s];s--){if(u.connection&&u!==n)return e.ASTNode.createInputNode(u);for(u=u.fieldRow;-1<t;){if(u[t].isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(u[t]);t--}0<=s-1&&(t=r.inputList[s-1].fieldRow.length-1)}return null},e.ASTNode.prototype.navigateBetweenStacks_=function(t){var n=this.getLocation();if(n instanceof e.Block||(n=n.getSourceBlock()),!n||!n.workspace)return null;var r=n.getRootBlock();n=r.workspace.getTopBlocks(!0);for(var u,s=0;u=n[s];s++)if(r.id==u.id)return-1==(t=s+(t?1:-1))||t==n.length?null:e.ASTNode.createStackNode(n[t]);throw Error("Couldn't find "+(t?"next":"previous")+" stack?!")},e.ASTNode.prototype.findTopASTNodeForBlock_=function(t){var n=t.previousConnection||t.outputConnection;return n?e.ASTNode.createConnectionNode(n):e.ASTNode.createBlockNode(t)},e.ASTNode.prototype.getOutAstNodeForBlock_=function(t){if(!t)return null;var n=(t=t.getTopStackBlock()).previousConnection||t.outputConnection;return n&&n.targetConnection&&n.targetConnection.getParentInput()?e.ASTNode.createInputNode(n.targetConnection.getParentInput()):e.ASTNode.createStackNode(t)},e.ASTNode.prototype.findFirstFieldOrInput_=function(t){t=t.inputList;for(var r,n=0;r=t[n];n++){for(var b,s=r.fieldRow,u=0;b=s[u];u++)if(b.isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(b);if(r.connection)return e.ASTNode.createInputNode(r)}return null},e.ASTNode.prototype.getSourceBlock=function(){return this.getType()===e.ASTNode.types.BLOCK||this.getType()===e.ASTNode.types.STACK?this.getLocation():this.getType()===e.ASTNode.types.WORKSPACE?null:this.getLocation().getSourceBlock()},e.ASTNode.prototype.next=function(){switch(this.type_){case e.ASTNode.types.STACK:return this.navigateBetweenStacks_(!0);case e.ASTNode.types.OUTPUT:var t=this.location_;return e.ASTNode.createBlockNode(t.getSourceBlock());case e.ASTNode.types.FIELD:return this.findNextForField_();case e.ASTNode.types.INPUT:return this.findNextForInput_();case e.ASTNode.types.BLOCK:return e.ASTNode.createConnectionNode(this.location_.nextConnection);case e.ASTNode.types.PREVIOUS:return e.ASTNode.createBlockNode((t=this.location_).getSourceBlock());case e.ASTNode.types.NEXT:return e.ASTNode.createConnectionNode((t=this.location_).targetConnection)}return null},e.ASTNode.prototype.in=function(){switch(this.type_){case e.ASTNode.types.WORKSPACE:var t=this.location_.getTopBlocks(!0);if(0<t.length)return e.ASTNode.createStackNode(t[0]);break;case e.ASTNode.types.STACK:return this.findTopASTNodeForBlock_(t=this.location_);case e.ASTNode.types.BLOCK:return this.findFirstFieldOrInput_(t=this.location_);case e.ASTNode.types.INPUT:return e.ASTNode.createConnectionNode(this.location_.targetConnection)}return null},e.ASTNode.prototype.prev=function(){switch(this.type_){case e.ASTNode.types.STACK:return this.navigateBetweenStacks_(!1);case e.ASTNode.types.FIELD:return this.findPrevForField_();case e.ASTNode.types.INPUT:return this.findPrevForInput_();case e.ASTNode.types.BLOCK:var t=this.location_;return e.ASTNode.createConnectionNode(t.previousConnection||t.outputConnection);case e.ASTNode.types.PREVIOUS:if((t=(t=this.location_).targetConnection)&&!t.getParentInput())return e.ASTNode.createConnectionNode(t);break;case e.ASTNode.types.NEXT:return e.ASTNode.createBlockNode((t=this.location_).getSourceBlock())}return null},e.ASTNode.prototype.out=function(){switch(this.type_){case e.ASTNode.types.STACK:var t=this.location_,n=t.getRelativeToSurfaceXY();return n=new e.utils.Coordinate(n.x,n.y+e.ASTNode.DEFAULT_OFFSET_Y),e.ASTNode.createWorkspaceNode(t.workspace,n);case e.ASTNode.types.OUTPUT:return(n=(t=this.location_).targetConnection)?e.ASTNode.createConnectionNode(n):e.ASTNode.createStackNode(t.getSourceBlock());case e.ASTNode.types.FIELD:return e.ASTNode.createBlockNode(this.location_.getSourceBlock());case e.ASTNode.types.INPUT:return e.ASTNode.createBlockNode((t=this.location_).getSourceBlock());case e.ASTNode.types.BLOCK:return this.getOutAstNodeForBlock_(t=this.location_);case e.ASTNode.types.PREVIOUS:case e.ASTNode.types.NEXT:return this.getOutAstNodeForBlock_((t=this.location_).getSourceBlock())}return null},e.Blocks=Object.create(null),e.Extensions={},e.Extensions.ALL_=Object.create(null),e.Extensions.register=function(t,n){if("string"!=typeof t||""==t.trim())throw Error('Error: Invalid extension name "'+t+'"');if(e.Extensions.ALL_[t])throw Error('Error: Extension "'+t+'" is already registered.');if("function"!=typeof n)throw Error('Error: Extension "'+t+'" must be a function');e.Extensions.ALL_[t]=n},e.Extensions.registerMixin=function(t,n){if(!n||"object"!=typeof n)throw Error('Error: Mixin "'+t+'" must be a object');e.Extensions.register(t,function(){this.mixin(n)})},e.Extensions.registerMutator=function(t,n,r,s){var u='Error when registering mutator "'+t+'": ';e.Extensions.checkHasFunction_(u,n.domToMutation,"domToMutation"),e.Extensions.checkHasFunction_(u,n.mutationToDom,"mutationToDom");var b=e.Extensions.checkMutatorDialog_(n,u);if(r&&"function"!=typeof r)throw Error('Extension "'+t+'" is not a function');e.Extensions.register(t,function(){if(b){if(!e.Mutator)throw Error(u+"Missing require for Blockly.Mutator");this.setMutator(new e.Mutator(s||[]))}this.mixin(n),r&&r.apply(this)})},e.Extensions.unregister=function(t){e.Extensions.ALL_[t]?delete e.Extensions.ALL_[t]:console.warn('No extension mapping for name "'+t+'" found to unregister')},e.Extensions.apply=function(t,n,r){var s=e.Extensions.ALL_[t];if("function"!=typeof s)throw Error('Error: Extension "'+t+'" not found.');if(r)e.Extensions.checkNoMutatorProperties_(t,n);else var u=e.Extensions.getMutatorProperties_(n);if(s.apply(n),r)e.Extensions.checkBlockHasMutatorProperties_('Error after applying mutator "'+t+'": ',n);else if(!e.Extensions.mutatorPropertiesMatch_(u,n))throw Error('Error when applying extension "'+t+'": mutation properties changed when applying a non-mutator extension.')},e.Extensions.checkHasFunction_=function(t,n,r){if(!n)throw Error(t+'missing required property "'+r+'"');if("function"!=typeof n)throw Error(t+'" required property "'+r+'" must be a function')},e.Extensions.checkNoMutatorProperties_=function(t,n){if(e.Extensions.getMutatorProperties_(n).length)throw Error('Error: tried to apply mutation "'+t+'" to a block that already has mutator functions.  Block id: '+n.id)},e.Extensions.checkMutatorDialog_=function(t,n){var r=void 0!==t.compose,s=void 0!==t.decompose;if(r&&s){if("function"!=typeof t.compose)throw Error(n+"compose must be a function.");if("function"!=typeof t.decompose)throw Error(n+"decompose must be a function.");return!0}if(!r&&!s)return!1;throw Error(n+'Must have both or neither of "compose" and "decompose"')},e.Extensions.checkBlockHasMutatorProperties_=function(t,n){if("function"!=typeof n.domToMutation)throw Error(t+'Applying a mutator didn\'t add "domToMutation"');if("function"!=typeof n.mutationToDom)throw Error(t+'Applying a mutator didn\'t add "mutationToDom"');e.Extensions.checkMutatorDialog_(n,t)},e.Extensions.getMutatorProperties_=function(t){var n=[];return void 0!==t.domToMutation&&n.push(t.domToMutation),void 0!==t.mutationToDom&&n.push(t.mutationToDom),void 0!==t.compose&&n.push(t.compose),void 0!==t.decompose&&n.push(t.decompose),n},e.Extensions.mutatorPropertiesMatch_=function(t,n){if((n=e.Extensions.getMutatorProperties_(n)).length!=t.length)return!1;for(var r=0;r<n.length;r++)if(t[r]!=n[r])return!1;return!0},e.Extensions.buildTooltipForDropdown=function(t,n){var r=[];return"object"==typeof document&&e.utils.runAfterPageLoad(function(){for(var s in n)e.utils.checkMessageReferences(n[s])}),function(){this.type&&-1==r.indexOf(this.type)&&(e.Extensions.checkDropdownOptionsInTable_(this,t,n),r.push(this.type)),this.setTooltip(function(){var s=String(this.getFieldValue(t)),u=n[s];return null==u?-1==r.indexOf(this.type)&&(s="No tooltip mapping for value "+s+" of field "+t,null!=this.type&&(s+=" of block type "+this.type),console.warn(s+".")):u=e.utils.replaceMessageReferences(u),u}.bind(this))}},e.Extensions.checkDropdownOptionsInTable_=function(t,n,r){var s=t.getField(n);if(!s.isOptionListDynamic()){s=s.getOptions();for(var u=0;u<s.length;++u){var b=s[u][1];null==r[b]&&console.warn("No tooltip mapping for value "+b+" of field "+n+" of block type "+t.type)}}},e.Extensions.buildTooltipWithFieldText=function(t,n){return"object"==typeof document&&e.utils.runAfterPageLoad(function(){e.utils.checkMessageReferences(t)}),function(){this.setTooltip(function(){var r=this.getField(n);return e.utils.replaceMessageReferences(t).replace("%1",r?r.getText():"")}.bind(this))}},e.Extensions.extensionParentTooltip_=function(){this.tooltipWhenNotConnected_=this.tooltip,this.setTooltip(function(){var t=this.getParent();return t&&t.getInputsInline()&&t.tooltip||this.tooltipWhenNotConnected_}.bind(this))},e.Extensions.register("parent_tooltip_when_inline",e.Extensions.extensionParentTooltip_),e.fieldRegistry={},e.fieldRegistry.register=function(t,n){e.registry.register(e.registry.Type.FIELD,t,n)},e.fieldRegistry.unregister=function(t){e.registry.unregister(e.registry.Type.FIELD,t)},e.fieldRegistry.fromJson=function(t){var n=e.registry.getObject(e.registry.Type.FIELD,t.type);return n?n.fromJson(t):(console.warn("Blockly could not create a field of type "+t.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null)},e.IDeletable=function(){},e.blockAnimations={},e.blockAnimations.disconnectPid_=0,e.blockAnimations.disconnectGroup_=null,e.blockAnimations.disposeUiEffect=function(t){var n=t.workspace,r=t.getSvgRoot();n.getAudioManager().play("delete"),t=n.getSvgXY(r),(r=r.cloneNode(!0)).translateX_=t.x,r.translateY_=t.y,r.setAttribute("transform","translate("+t.x+","+t.y+")"),n.getParentSvg().appendChild(r),r.bBox_=r.getBBox(),e.blockAnimations.disposeUiStep_(r,n.RTL,new Date,n.scale)},e.blockAnimations.disposeUiStep_=function(t,n,r,s){var u=(new Date-r)/150;1<u?e.utils.dom.removeNode(t):(t.setAttribute("transform","translate("+(t.translateX_+(n?-1:1)*t.bBox_.width*s/2*u)+","+(t.translateY_+t.bBox_.height*s*u)+") scale("+(1-u)*s+")"),setTimeout(e.blockAnimations.disposeUiStep_,10,t,n,r,s))},e.blockAnimations.connectionUiEffect=function(t){var n=t.workspace,r=n.scale;if(n.getAudioManager().play("click"),!(1>r)){var s=n.getSvgXY(t.getSvgRoot());t.outputConnection?(s.x+=(t.RTL?3:-3)*r,s.y+=13*r):t.previousConnection&&(s.x+=(t.RTL?-23:23)*r,s.y+=3*r),t=e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{cx:s.x,cy:s.y,r:0,fill:"none",stroke:"#888","stroke-width":10},n.getParentSvg()),e.blockAnimations.connectionUiStep_(t,new Date,r)}},e.blockAnimations.connectionUiStep_=function(t,n,r){var s=(new Date-n)/150;1<s?e.utils.dom.removeNode(t):(t.setAttribute("r",25*s*r),t.style.opacity=1-s,e.blockAnimations.disconnectPid_=setTimeout(e.blockAnimations.connectionUiStep_,10,t,n,r))},e.blockAnimations.disconnectUiEffect=function(t){if(t.workspace.getAudioManager().play("disconnect"),!(1>t.workspace.scale)){var n=t.getHeightWidth().height;n=Math.atan(10/n)/Math.PI*180,t.RTL||(n*=-1),e.blockAnimations.disconnectUiStep_(t.getSvgRoot(),n,new Date)}},e.blockAnimations.disconnectUiStep_=function(t,n,r){var s=(new Date-r)/200;1<s?t.skew_="":(t.skew_="skewX("+Math.round(Math.sin(s*Math.PI*3)*(1-s)*n)+")",e.blockAnimations.disconnectGroup_=t,e.blockAnimations.disconnectPid_=setTimeout(e.blockAnimations.disconnectUiStep_,10,t,n,r)),t.setAttribute("transform",t.translate_+t.skew_)},e.blockAnimations.disconnectUiStop=function(){if(e.blockAnimations.disconnectGroup_){clearTimeout(e.blockAnimations.disconnectPid_);var t=e.blockAnimations.disconnectGroup_;t.skew_="",t.setAttribute("transform",t.translate_),e.blockAnimations.disconnectGroup_=null}},e.Events.BlockDrag=function(t,n,r){e.Events.BlockDrag.superClass_.constructor.call(this,t?t.workspace.id:void 0),this.blockId=t?t.id:null,this.isStart=n,this.blocks=r},e.utils.object.inherits(e.Events.BlockDrag,e.Events.UiBase),e.Events.BlockDrag.prototype.type=e.Events.BLOCK_DRAG,e.Events.BlockDrag.prototype.toJson=function(){var t=e.Events.BlockDrag.superClass_.toJson.call(this);return t.isStart=this.isStart,t.blockId=this.blockId,t.blocks=this.blocks,t},e.Events.BlockDrag.prototype.fromJson=function(t){e.Events.BlockDrag.superClass_.fromJson.call(this,t),this.isStart=t.isStart,this.blockId=t.blockId,this.blocks=t.blocks},e.registry.register(e.registry.Type.EVENT,e.Events.BLOCK_DRAG,e.Events.BlockDrag),e.IBlockDragger=function(){},e.InsertionMarkerManager=function(t){this.topBlock_=e.selected=t,this.workspace_=t.workspace,this.lastMarker_=this.lastOnStack_=null,this.firstMarker_=this.createMarkerBlock_(this.topBlock_),this.localConnection_=this.closestConnection_=null,this.wouldDeleteBlock_=!1,this.fadedBlock_=this.highlightedBlock_=this.markerConnection_=null,this.availableConnections_=this.initAvailableConnections_()},e.InsertionMarkerManager.PREVIEW_TYPE={INSERTION_MARKER:0,INPUT_OUTLINE:1,REPLACEMENT_FADE:2},e.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR="The insertion marker manager tried to create a marker but the result is missing %1. If you are using a mutator, make sure your domToMutation method is properly defined.",e.InsertionMarkerManager.prototype.dispose=function(){this.availableConnections_.length=0,e.Events.disable();try{this.firstMarker_&&this.firstMarker_.dispose(),this.lastMarker_&&this.lastMarker_.dispose()}finally{e.Events.enable()}},e.InsertionMarkerManager.prototype.updateAvailableConnections=function(){this.availableConnections_=this.initAvailableConnections_()},e.InsertionMarkerManager.prototype.wouldDeleteBlock=function(){return this.wouldDeleteBlock_},e.InsertionMarkerManager.prototype.wouldConnectBlock=function(){return!!this.closestConnection_},e.InsertionMarkerManager.prototype.applyConnections=function(){if(this.closestConnection_&&(e.Events.disable(),this.hidePreview_(),e.Events.enable(),this.localConnection_.connect(this.closestConnection_),this.topBlock_.rendered)){var t=this.localConnection_.isSuperior()?this.closestConnection_:this.localConnection_;e.blockAnimations.connectionUiEffect(t.getSourceBlock()),this.topBlock_.getRootBlock().bringToFront()}},e.InsertionMarkerManager.prototype.update=function(t,n){var r=this.getCandidate_(t);((this.wouldDeleteBlock_=this.shouldDelete_(r,n))||this.shouldUpdatePreviews_(r,t))&&(e.Events.disable(),this.maybeHidePreview_(r),this.maybeShowPreview_(r),e.Events.enable())},e.InsertionMarkerManager.prototype.createMarkerBlock_=function(t){var n=t.type;e.Events.disable();try{var r=this.workspace_.newBlock(n);if(r.setInsertionMarker(!0),t.mutationToDom){var s=t.mutationToDom();s&&r.domToMutation(s)}for(n=0;n<t.inputList.length;n++){var u=t.inputList[n];if(u.name!=e.constants.COLLAPSED_INPUT_NAME){var b=r.inputList[n];if(!b)throw Error(e.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR.replace("%1","an input"));for(s=0;s<u.fieldRow.length;s++){var x=u.fieldRow[s],B=b.fieldRow[s];if(!B)throw Error(e.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR.replace("%1","a field"));B.setValue(x.getValue())}}}r.setCollapsed(t.isCollapsed()),r.setInputsInline(t.getInputsInline()),r.initSvg(),r.getSvgRoot().setAttribute("visibility","hidden")}finally{e.Events.enable()}return r},e.InsertionMarkerManager.prototype.initAvailableConnections_=function(){var t=this.topBlock_.getConnections_(!1),n=this.topBlock_.lastConnectionInStack(!0);if(n&&n!=this.topBlock_.nextConnection){if(t.push(n),this.lastOnStack_=n,this.lastMarker_){e.Events.disable();try{this.lastMarker_.dispose()}finally{e.Events.enable()}}this.lastMarker_=this.createMarkerBlock_(n.getSourceBlock())}return t},e.InsertionMarkerManager.prototype.shouldUpdatePreviews_=function(t,n){var r=t.local,s=t.closest;return t=t.radius,r&&s?this.localConnection_&&this.closestConnection_?!(this.closestConnection_==s&&this.localConnection_==r||(r=this.localConnection_.x+n.x-this.closestConnection_.x,n=this.localConnection_.y+n.y-this.closestConnection_.y,n=Math.sqrt(r*r+n*n),s&&t>n-e.CURRENT_CONNECTION_PREFERENCE)):!this.localConnection_&&!this.closestConnection_||(console.error("Only one of localConnection_ and closestConnection_ was set."),console.error("Returning true from shouldUpdatePreviews, but it's not clear why."),!0):!(!this.localConnection_||!this.closestConnection_)},e.InsertionMarkerManager.prototype.getCandidate_=function(t){for(var n=this.getStartRadius_(),r=null,s=null,u=0;u<this.availableConnections_.length;u++){var b=this.availableConnections_[u],x=b.closest(n,t);x.connection&&(r=x.connection,s=b,n=x.radius)}return{closest:r,local:s,radius:n}},e.InsertionMarkerManager.prototype.getStartRadius_=function(){return this.closestConnection_&&this.localConnection_?e.CONNECTING_SNAP_RADIUS:e.SNAP_RADIUS},e.InsertionMarkerManager.prototype.shouldDelete_=function(t,n){return!(!n||!this.workspace_.getComponentManager().hasCapability(n.id,e.ComponentManager.Capability.DELETE_AREA))&&n.wouldDelete(this.topBlock_,t&&!!t.closest)},e.InsertionMarkerManager.prototype.maybeShowPreview_=function(t){if(!this.wouldDeleteBlock_){var n=t.closest;t=t.local,n&&(n==this.closestConnection_||n.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.closestConnection_=n,this.localConnection_=t,this.showPreview_()))}},e.InsertionMarkerManager.prototype.showPreview_=function(){var t=this.closestConnection_,n=this.workspace_.getRenderer();switch(n.getConnectionPreviewMethod(t,this.localConnection_,this.topBlock_)){case e.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline_();break;case e.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker_();break;case e.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade_()}t&&n.shouldHighlightConnection(t)&&t.highlight()},e.InsertionMarkerManager.prototype.maybeHidePreview_=function(t){if(t.closest){var n=this.closestConnection_!=t.closest;t=this.localConnection_!=t.local,this.closestConnection_&&this.localConnection_&&(n||t||this.wouldDeleteBlock_)&&this.hidePreview_()}else this.hidePreview_();this.localConnection_=this.closestConnection_=this.markerConnection_=null},e.InsertionMarkerManager.prototype.hidePreview_=function(){this.closestConnection_&&this.closestConnection_.targetBlock()&&this.workspace_.getRenderer().shouldHighlightConnection(this.closestConnection_)&&this.closestConnection_.unhighlight(),this.fadedBlock_?this.hideReplacementFade_():this.highlightedBlock_?this.hideInsertionInputOutline_():this.markerConnection_&&this.hideInsertionMarker_()},e.InsertionMarkerManager.prototype.showInsertionMarker_=function(){var t=this.localConnection_,n=this.closestConnection_,r=this.lastOnStack_&&t==this.lastOnStack_?this.lastMarker_:this.firstMarker_;if((t=r.getMatchingConnection(t.getSourceBlock(),t))==this.markerConnection_)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");r.render(),r.rendered=!0,r.getSvgRoot().setAttribute("visibility","visible"),t&&n&&r.positionNearConnection(t,n),n&&t.connect(n),this.markerConnection_=t},e.InsertionMarkerManager.prototype.hideInsertionMarker_=function(){if(this.markerConnection_){var t=this.markerConnection_,n=t.getSourceBlock(),r=n.nextConnection,s=n.previousConnection,u=n.outputConnection;if(u=t.type==e.connectionTypes.INPUT_VALUE&&!(u&&u.targetConnection),!(t!=r||s&&s.targetConnection)||u?t.targetBlock().unplug(!1):t.type==e.connectionTypes.NEXT_STATEMENT&&t!=r?((r=t.targetConnection).getSourceBlock().unplug(!1),s=s?s.targetConnection:null,n.unplug(!0),s&&s.connect(r)):n.unplug(!0),t.targetConnection)throw Error("markerConnection_ still connected at the end of disconnectInsertionMarker");this.markerConnection_=null,(t=n.getSvgRoot())&&t.setAttribute("visibility","hidden")}else console.log("No insertion marker connection to disconnect")},e.InsertionMarkerManager.prototype.showInsertionInputOutline_=function(){var t=this.closestConnection_;this.highlightedBlock_=t.getSourceBlock(),this.highlightedBlock_.highlightShapeForInput(t,!0)},e.InsertionMarkerManager.prototype.hideInsertionInputOutline_=function(){this.highlightedBlock_.highlightShapeForInput(this.closestConnection_,!1),this.highlightedBlock_=null},e.InsertionMarkerManager.prototype.showReplacementFade_=function(){this.fadedBlock_=this.closestConnection_.targetBlock(),this.fadedBlock_.fadeForReplacement(!0)},e.InsertionMarkerManager.prototype.hideReplacementFade_=function(){this.fadedBlock_.fadeForReplacement(!1),this.fadedBlock_=null},e.InsertionMarkerManager.prototype.getInsertionMarkers=function(){var t=[];return this.firstMarker_&&t.push(this.firstMarker_),this.lastMarker_&&t.push(this.lastMarker_),t},e.BlockDragger=function(t,n){this.draggingBlock_=t,this.workspace_=n,this.draggedConnectionManager_=new e.InsertionMarkerManager(this.draggingBlock_),this.dragTarget_=null,this.wouldDeleteBlock_=!1,this.startXY_=this.draggingBlock_.getRelativeToSurfaceXY(),this.dragIconData_=e.BlockDragger.initIconData_(t)},e.BlockDragger.prototype.dispose=function(){this.dragIconData_.length=0,this.draggedConnectionManager_&&this.draggedConnectionManager_.dispose()},e.BlockDragger.initIconData_=function(t){var n=[];t=t.getDescendants(!1);for(var s,r=0;s=t[r];r++){s=s.getIcons();for(var u=0;u<s.length;u++){var b={location:s[u].getIconLocation(),icon:s[u]};n.push(b)}}return n},e.BlockDragger.prototype.startDrag=function(t,n){e.Events.getGroup()||e.Events.setGroup(!0),this.fireDragStartEvent_(),this.workspace_.isMutator&&this.draggingBlock_.bringToFront(),e.utils.dom.startTextWidthCache(),this.workspace_.setResizesEnabled(!1),e.blockAnimations.disconnectUiStop(),this.shouldDisconnect_(n)&&this.disconnectBlock_(n,t),this.draggingBlock_.setDragging(!0),this.draggingBlock_.moveToDragSurface()},e.BlockDragger.prototype.shouldDisconnect_=function(t){return!!(this.draggingBlock_.getParent()||t&&this.draggingBlock_.nextConnection&&this.draggingBlock_.nextConnection.targetBlock())},e.BlockDragger.prototype.disconnectBlock_=function(t,n){this.draggingBlock_.unplug(t),t=this.pixelsToWorkspaceUnits_(n),t=e.utils.Coordinate.sum(this.startXY_,t),this.draggingBlock_.translate(t.x,t.y),e.blockAnimations.disconnectUiEffect(this.draggingBlock_),this.draggedConnectionManager_.updateAvailableConnections()},e.BlockDragger.prototype.fireDragStartEvent_=function(){var t=new(e.Events.get(e.Events.BLOCK_DRAG))(this.draggingBlock_,!0,this.draggingBlock_.getDescendants(!1));e.Events.fire(t)},e.BlockDragger.prototype.drag=function(t,n){n=this.pixelsToWorkspaceUnits_(n);var r=e.utils.Coordinate.sum(this.startXY_,n);this.draggingBlock_.moveDuringDrag(r),this.dragIcons_(n),r=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(t),this.draggedConnectionManager_.update(n,this.dragTarget_),t=this.wouldDeleteBlock_,this.wouldDeleteBlock_=this.draggedConnectionManager_.wouldDeleteBlock(),t!=this.wouldDeleteBlock_&&this.updateCursorDuringBlockDrag_(),this.dragTarget_!==r&&(r&&r.onDragExit(this.draggingBlock_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBlock_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBlock_)},e.BlockDragger.prototype.endDrag=function(t,n){if(this.drag(t,n),this.dragIconData_=[],this.fireDragEndEvent_(),e.utils.dom.stopTextWidthCache(),e.blockAnimations.disconnectUiStop(),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBlock_))t=this.startXY_;else{var r=(t=this.getNewLocationAfterDrag_(n)).delta;t=t.newLocation}this.draggingBlock_.moveOffDragSurface(t),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBlock_),this.maybeDeleteBlock_()||(this.draggingBlock_.setDragging(!1),r?this.updateBlockAfterMove_(r):e.bumpObjectIntoBounds_(this.draggingBlock_.workspace,this.workspace_.getMetricsManager().getScrollMetrics(!0),this.draggingBlock_)),this.workspace_.setResizesEnabled(!0),e.Events.setGroup(!1)},e.BlockDragger.prototype.getNewLocationAfterDrag_=function(t){var n={};return n.delta=this.pixelsToWorkspaceUnits_(t),n.newLocation=e.utils.Coordinate.sum(this.startXY_,n.delta),n},e.BlockDragger.prototype.maybeDeleteBlock_=function(){return!!this.wouldDeleteBlock_&&(this.fireMoveEvent_(),this.draggingBlock_.dispose(!1,!0),e.draggingConnections=[],!0)},e.BlockDragger.prototype.updateBlockAfterMove_=function(t){this.draggingBlock_.moveConnections(t.x,t.y),this.fireMoveEvent_(),this.draggedConnectionManager_.wouldConnectBlock()?this.draggedConnectionManager_.applyConnections():this.draggingBlock_.render(),this.draggingBlock_.scheduleSnapAndBump()},e.BlockDragger.prototype.fireDragEndEvent_=function(){var t=new(e.Events.get(e.Events.BLOCK_DRAG))(this.draggingBlock_,!1,this.draggingBlock_.getDescendants(!1));e.Events.fire(t)},e.BlockDragger.prototype.updateToolboxStyle_=function(t){var n=this.workspace_.getToolbox();if(n){var r=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab";t&&"function"==typeof n.removeStyle?n.removeStyle(r):t||"function"!=typeof n.addStyle||n.addStyle(r)}},e.BlockDragger.prototype.fireMoveEvent_=function(){var t=new(e.Events.get(e.Events.BLOCK_MOVE))(this.draggingBlock_);t.oldCoordinate=this.startXY_,t.recordNew(),e.Events.fire(t)},e.BlockDragger.prototype.updateCursorDuringBlockDrag_=function(){this.draggingBlock_.setDeleteStyle(this.wouldDeleteBlock_)},e.BlockDragger.prototype.pixelsToWorkspaceUnits_=function(t){return t=new e.utils.Coordinate(t.x/this.workspace_.scale,t.y/this.workspace_.scale),this.workspace_.isMutator&&t.scale(1/this.workspace_.options.parentWorkspace.scale),t},e.BlockDragger.prototype.dragIcons_=function(t){for(var n=0;n<this.dragIconData_.length;n++){var r=this.dragIconData_[n];r.icon.setIconLocation(e.utils.Coordinate.sum(r.location,t))}},e.BlockDragger.prototype.getInsertionMarkers=function(){return this.draggedConnectionManager_&&this.draggedConnectionManager_.getInsertionMarkers?this.draggedConnectionManager_.getInsertionMarkers():[]},e.registry.register(e.registry.Type.BLOCK_DRAGGER,e.registry.DEFAULT,e.BlockDragger),e.IContextMenu=function(){},e.IDraggable=function(){},e.IBubble=function(){},e.Bubble=function(t,n,r,s,u,b){this.workspace_=t,this.content_=n,this.shape_=r,this.onMouseDownResizeWrapper_=this.onMouseDownBubbleWrapper_=this.moveCallback_=this.resizeCallback_=null,this.disposed=!1,r=e.Bubble.ARROW_ANGLE,this.workspace_.RTL&&(r=-r),this.arrow_radians_=e.utils.math.toRadians(r),t.getBubbleCanvas().appendChild(this.createDom_(n,!(!u||!b))),this.setAnchorLocation(s),u&&b||(u=(t=this.content_.getBBox()).width+2*e.Bubble.BORDER_WIDTH,b=t.height+2*e.Bubble.BORDER_WIDTH),this.setBubbleSize(u,b),this.positionBubble_(),this.renderArrow_(),this.rendered_=!0},e.Bubble.BORDER_WIDTH=6,e.Bubble.ARROW_THICKNESS=5,e.Bubble.ARROW_ANGLE=20,e.Bubble.ARROW_BEND=4,e.Bubble.ANCHOR_RADIUS=8,e.Bubble.onMouseUpWrapper_=null,e.Bubble.onMouseMoveWrapper_=null,e.Bubble.unbindDragEvents_=function(){e.Bubble.onMouseUpWrapper_&&(e.browserEvents.unbind(e.Bubble.onMouseUpWrapper_),e.Bubble.onMouseUpWrapper_=null),e.Bubble.onMouseMoveWrapper_&&(e.browserEvents.unbind(e.Bubble.onMouseMoveWrapper_),e.Bubble.onMouseMoveWrapper_=null)},e.Bubble.bubbleMouseUp_=function(t){e.Touch.clearTouchIdentifier(),e.Bubble.unbindDragEvents_()},e.Bubble.prototype.rendered_=!1,e.Bubble.prototype.anchorXY_=null,e.Bubble.prototype.relativeLeft_=0,e.Bubble.prototype.relativeTop_=0,e.Bubble.prototype.width_=0,e.Bubble.prototype.height_=0,e.Bubble.prototype.autoLayout_=!0,e.Bubble.prototype.createDom_=function(t,n){this.bubbleGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},null);var r={filter:"url(#"+this.workspace_.getRenderer().getConstants().embossFilterId+")"};return e.utils.userAgent.JAVA_FX&&(r={}),r=e.utils.dom.createSvgElement(e.utils.Svg.G,r,this.bubbleGroup_),this.bubbleArrow_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{},r),this.bubbleBack_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyDraggable",x:0,y:0,rx:e.Bubble.BORDER_WIDTH,ry:e.Bubble.BORDER_WIDTH},r),n?(this.resizeGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:this.workspace_.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.bubbleGroup_),e.utils.dom.createSvgElement(e.utils.Svg.POLYGON,{points:"0,x x,x x,0".replace(/x/g,(n=2*e.Bubble.BORDER_WIDTH).toString())},this.resizeGroup_),e.utils.dom.createSvgElement(e.utils.Svg.LINE,{class:"blocklyResizeLine",x1:n/3,y1:n-1,x2:n-1,y2:n/3},this.resizeGroup_),e.utils.dom.createSvgElement(e.utils.Svg.LINE,{class:"blocklyResizeLine",x1:2*n/3,y1:n-1,x2:n-1,y2:2*n/3},this.resizeGroup_)):this.resizeGroup_=null,this.workspace_.options.readOnly||(this.onMouseDownBubbleWrapper_=e.browserEvents.conditionalBind(this.bubbleBack_,"mousedown",this,this.bubbleMouseDown_),this.resizeGroup_&&(this.onMouseDownResizeWrapper_=e.browserEvents.conditionalBind(this.resizeGroup_,"mousedown",this,this.resizeMouseDown_))),this.bubbleGroup_.appendChild(t),this.bubbleGroup_},e.Bubble.prototype.getSvgRoot=function(){return this.bubbleGroup_},e.Bubble.prototype.setSvgId=function(t){this.bubbleGroup_.dataset&&(this.bubbleGroup_.dataset.blockId=t)},e.Bubble.prototype.bubbleMouseDown_=function(t){var n=this.workspace_.getGesture(t);n&&n.handleBubbleStart(t,this)},e.Bubble.prototype.showContextMenu=function(t){},e.Bubble.prototype.isDeletable=function(){return!1},e.Bubble.prototype.setDeleteStyle=function(t){},e.Bubble.prototype.resizeMouseDown_=function(t){this.promote(),e.Bubble.unbindDragEvents_(),e.utils.isRightButton(t)||(this.workspace_.startDrag(t,new e.utils.Coordinate(this.workspace_.RTL?-this.width_:this.width_,this.height_)),e.Bubble.onMouseUpWrapper_=e.browserEvents.conditionalBind(document,"mouseup",this,e.Bubble.bubbleMouseUp_),e.Bubble.onMouseMoveWrapper_=e.browserEvents.conditionalBind(document,"mousemove",this,this.resizeMouseMove_),e.hideChaff()),t.stopPropagation()},e.Bubble.prototype.resizeMouseMove_=function(t){this.autoLayout_=!1,t=this.workspace_.moveDrag(t),this.setBubbleSize(this.workspace_.RTL?-t.x:t.x,t.y),this.workspace_.RTL&&this.positionBubble_()},e.Bubble.prototype.registerResizeEvent=function(t){this.resizeCallback_=t},e.Bubble.prototype.registerMoveEvent=function(t){this.moveCallback_=t},e.Bubble.prototype.promote=function(){var t=this.bubbleGroup_.parentNode;return t.lastChild!==this.bubbleGroup_&&(t.appendChild(this.bubbleGroup_),!0)},e.Bubble.prototype.setAnchorLocation=function(t){this.anchorXY_=t,this.rendered_&&this.positionBubble_()},e.Bubble.prototype.layoutBubble_=function(){var t=this.workspace_.getMetricsManager().getViewMetrics(!0),n=this.getOptimalRelativeLeft_(t),r=this.getOptimalRelativeTop_(t),s=this.shape_.getBBox(),u={x:n,y:-this.height_-this.workspace_.getRenderer().getConstants().MIN_BLOCK_HEIGHT},b={x:-this.width_-30,y:r};r={x:s.width,y:r};var x={x:n,y:s.height};n=s.width<s.height?r:x,s=s.width<s.height?x:r,r=this.getOverlap_(u,t),x=this.getOverlap_(b,t);var B=this.getOverlap_(n,t);t=this.getOverlap_(s,t),r==(t=Math.max(r,x,B,t))?(this.relativeLeft_=u.x,this.relativeTop_=u.y):x==t?(this.relativeLeft_=b.x,this.relativeTop_=b.y):B==t?(this.relativeLeft_=n.x,this.relativeTop_=n.y):(this.relativeLeft_=s.x,this.relativeTop_=s.y)},e.Bubble.prototype.getOverlap_=function(t,n){var r=this.workspace_.RTL?this.anchorXY_.x-t.x-this.width_:t.x+this.anchorXY_.x;return t=t.y+this.anchorXY_.y,Math.max(0,Math.min(1,(Math.min(r+this.width_,n.left+n.width)-Math.max(r,n.left))*(Math.min(t+this.height_,n.top+n.height)-Math.max(t,n.top))/(this.width_*this.height_)))},e.Bubble.prototype.getOptimalRelativeLeft_=function(t){var n=-this.width_/4;if(this.width_>t.width)return n;if(this.workspace_.RTL)var r=this.anchorXY_.x-n,s=r-this.width_,u=t.left+t.width,b=t.left+e.Scrollbar.scrollbarThickness/this.workspace_.scale;else r=(s=n+this.anchorXY_.x)+this.width_,b=t.left,u=t.left+t.width-e.Scrollbar.scrollbarThickness/this.workspace_.scale;return this.workspace_.RTL?s<b?n=-(b-this.anchorXY_.x+this.width_):r>u&&(n=-(u-this.anchorXY_.x)):s<b?n=b-this.anchorXY_.x:r>u&&(n=u-this.anchorXY_.x-this.width_),n},e.Bubble.prototype.getOptimalRelativeTop_=function(t){var n=-this.height_/4;if(this.height_>t.height)return n;var r=this.anchorXY_.y+n,u=t.top;t=t.top+t.height-e.Scrollbar.scrollbarThickness/this.workspace_.scale;var b=this.anchorXY_.y;return r<u?n=u-b:r+this.height_>t&&(n=t-b-this.height_),n},e.Bubble.prototype.positionBubble_=function(){var t=this.anchorXY_.x;this.moveTo(t=this.workspace_.RTL?t-(this.relativeLeft_+this.width_):t+this.relativeLeft_,this.relativeTop_+this.anchorXY_.y)},e.Bubble.prototype.moveTo=function(t,n){this.bubbleGroup_.setAttribute("transform","translate("+t+","+n+")")},e.Bubble.prototype.setDragging=function(t){!t&&this.moveCallback_&&this.moveCallback_()},e.Bubble.prototype.getBubbleSize=function(){return new e.utils.Size(this.width_,this.height_)},e.Bubble.prototype.setBubbleSize=function(t,n){var r=2*e.Bubble.BORDER_WIDTH;t=Math.max(t,r+45),n=Math.max(n,r+20),this.width_=t,this.height_=n,this.bubbleBack_.setAttribute("width",t),this.bubbleBack_.setAttribute("height",n),this.resizeGroup_&&this.resizeGroup_.setAttribute("transform",this.workspace_.RTL?"translate("+2*e.Bubble.BORDER_WIDTH+","+(n-r)+") scale(-1 1)":"translate("+(t-r)+","+(n-r)+")"),this.autoLayout_&&this.layoutBubble_(),this.positionBubble_(),this.renderArrow_(),this.resizeCallback_&&this.resizeCallback_()},e.Bubble.prototype.renderArrow_=function(){var t=[],n=this.width_/2,r=this.height_/2,s=-this.relativeLeft_,u=-this.relativeTop_;if(n==s&&r==u)t.push("M "+n+","+r);else{u-=r,s-=n,this.workspace_.RTL&&(s*=-1);var b=Math.sqrt(u*u+s*s),x=Math.acos(s/b);0>u&&(x=2*Math.PI-x);var B=x+Math.PI/2;B>2*Math.PI&&(B-=2*Math.PI);var Z=Math.sin(B),ot=Math.cos(B),et=this.getBubbleSize();B=(et.width+et.height)/e.Bubble.ARROW_THICKNESS,B=Math.min(B,et.width,et.height)/4,s=n+(et=1-e.Bubble.ANCHOR_RADIUS/b)*s,u=r+et*u,et=n+B*ot;var Tt=r+B*Z;n-=B*ot,r-=B*Z,(Z=x+this.arrow_radians_)>2*Math.PI&&(Z-=2*Math.PI),x=Math.sin(Z)*b/e.Bubble.ARROW_BEND,b=Math.cos(Z)*b/e.Bubble.ARROW_BEND,t.push("M"+et+","+Tt),t.push("C"+(et+b)+","+(Tt+x)+" "+s+","+u+" "+s+","+u),t.push("C"+s+","+u+" "+(n+b)+","+(r+x)+" "+n+","+r)}t.push("z"),this.bubbleArrow_.setAttribute("d",t.join(" "))},e.Bubble.prototype.setColour=function(t){this.bubbleBack_.setAttribute("fill",t),this.bubbleArrow_.setAttribute("fill",t)},e.Bubble.prototype.dispose=function(){this.onMouseDownBubbleWrapper_&&e.browserEvents.unbind(this.onMouseDownBubbleWrapper_),this.onMouseDownResizeWrapper_&&e.browserEvents.unbind(this.onMouseDownResizeWrapper_),e.Bubble.unbindDragEvents_(),e.utils.dom.removeNode(this.bubbleGroup_),this.disposed=!0},e.Bubble.prototype.moveDuringDrag=function(t,n){t?t.translateSurface(n.x,n.y):this.moveTo(n.x,n.y),this.relativeLeft_=this.workspace_.RTL?this.anchorXY_.x-n.x-this.width_:n.x-this.anchorXY_.x,this.relativeTop_=n.y-this.anchorXY_.y,this.renderArrow_()},e.Bubble.prototype.getRelativeToSurfaceXY=function(){return new e.utils.Coordinate(this.workspace_.RTL?-this.relativeLeft_+this.anchorXY_.x-this.width_:this.anchorXY_.x+this.relativeLeft_,this.anchorXY_.y+this.relativeTop_)},e.Bubble.prototype.setAutoLayout=function(t){this.autoLayout_=t},e.Bubble.textToDom=function(t){var n=e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:e.Bubble.BORDER_WIDTH},null);t=t.split("\n");for(var r=0;r<t.length;r++){var s=e.utils.dom.createSvgElement(e.utils.Svg.TSPAN,{dy:"1em",x:e.Bubble.BORDER_WIDTH},n),u=document.createTextNode(t[r]);s.appendChild(u)}return n},e.Bubble.createNonEditableBubble=function(t,n,r){if((r=new e.Bubble(n.workspace,t,n.pathObject.svgPath,r,null,null)).setSvgId(n.id),n.RTL){n=t.getBBox().width;for(var u,s=0;u=t.childNodes[s];s++)u.setAttribute("text-anchor","end"),u.setAttribute("x",n+e.Bubble.BORDER_WIDTH)}return r},e.Events.CommentBase=function(t){this.commentId=(this.isBlank=void 0===t)?"":t.id,this.workspaceId=this.isBlank?"":t.workspace.id,this.group=e.Events.getGroup(),this.recordUndo=e.Events.recordUndo},e.utils.object.inherits(e.Events.CommentBase,e.Events.Abstract),e.Events.CommentBase.prototype.toJson=function(){var t=e.Events.CommentBase.superClass_.toJson.call(this);return this.commentId&&(t.commentId=this.commentId),t},e.Events.CommentBase.prototype.fromJson=function(t){e.Events.CommentBase.superClass_.fromJson.call(this,t),this.commentId=t.commentId},e.Events.CommentChange=function(t,n,r){e.Events.CommentChange.superClass_.constructor.call(this,t),t&&(this.oldContents_=void 0===n?"":n,this.newContents_=void 0===r?"":r)},e.utils.object.inherits(e.Events.CommentChange,e.Events.CommentBase),e.Events.CommentChange.prototype.type=e.Events.COMMENT_CHANGE,e.Events.CommentChange.prototype.toJson=function(){var t=e.Events.CommentChange.superClass_.toJson.call(this);return t.oldContents=this.oldContents_,t.newContents=this.newContents_,t},e.Events.CommentChange.prototype.fromJson=function(t){e.Events.CommentChange.superClass_.fromJson.call(this,t),this.oldContents_=t.oldContents,this.newContents_=t.newContents},e.Events.CommentChange.prototype.isNull=function(){return this.oldContents_==this.newContents_},e.Events.CommentChange.prototype.run=function(t){var n=this.getEventWorkspace_().getCommentById(this.commentId);n?n.setContent(t?this.newContents_:this.oldContents_):console.warn("Can't change non-existent comment: "+this.commentId)},e.Events.CommentCreate=function(t){e.Events.CommentCreate.superClass_.constructor.call(this,t),t&&(this.xml=t.toXmlWithXY())},e.utils.object.inherits(e.Events.CommentCreate,e.Events.CommentBase),e.Events.CommentCreate.prototype.type=e.Events.COMMENT_CREATE,e.Events.CommentCreate.prototype.toJson=function(){var t=e.Events.CommentCreate.superClass_.toJson.call(this);return t.xml=e.Xml.domToText(this.xml),t},e.Events.CommentCreate.prototype.fromJson=function(t){e.Events.CommentCreate.superClass_.fromJson.call(this,t),this.xml=e.Xml.textToDom(t.xml)},e.Events.CommentCreate.prototype.run=function(t){e.Events.CommentCreateDeleteHelper(this,t)},e.Events.CommentCreateDeleteHelper=function(t,n){var r=t.getEventWorkspace_();n?((n=e.utils.xml.createElement("xml")).appendChild(t.xml),e.Xml.domToWorkspace(n,r)):(r=r.getCommentById(t.commentId))?r.dispose(!1,!1):console.warn("Can't uncreate non-existent comment: "+t.commentId)},e.Events.CommentDelete=function(t){e.Events.CommentDelete.superClass_.constructor.call(this,t),t&&(this.xml=t.toXmlWithXY())},e.utils.object.inherits(e.Events.CommentDelete,e.Events.CommentBase),e.Events.CommentDelete.prototype.type=e.Events.COMMENT_DELETE,e.Events.CommentDelete.prototype.toJson=function(){return e.Events.CommentDelete.superClass_.toJson.call(this)},e.Events.CommentDelete.prototype.fromJson=function(t){e.Events.CommentDelete.superClass_.fromJson.call(this,t)},e.Events.CommentDelete.prototype.run=function(t){e.Events.CommentCreateDeleteHelper(this,!t)},e.Events.CommentMove=function(t){e.Events.CommentMove.superClass_.constructor.call(this,t),t&&(this.comment_=t,this.oldCoordinate_=t.getXY(),this.newCoordinate_=null)},e.utils.object.inherits(e.Events.CommentMove,e.Events.CommentBase),e.Events.CommentMove.prototype.recordNew=function(){if(!this.comment_)throw Error("Tried to record the new position of a comment on the same event twice.");this.newCoordinate_=this.comment_.getXY(),this.comment_=null},e.Events.CommentMove.prototype.type=e.Events.COMMENT_MOVE,e.Events.CommentMove.prototype.setOldCoordinate=function(t){this.oldCoordinate_=t},e.Events.CommentMove.prototype.toJson=function(){var t=e.Events.CommentMove.superClass_.toJson.call(this);return this.oldCoordinate_&&(t.oldCoordinate=Math.round(this.oldCoordinate_.x)+","+Math.round(this.oldCoordinate_.y)),this.newCoordinate_&&(t.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y)),t},e.Events.CommentMove.prototype.fromJson=function(t){if(e.Events.CommentMove.superClass_.fromJson.call(this,t),t.oldCoordinate){var n=t.oldCoordinate.split(",");this.oldCoordinate_=new e.utils.Coordinate(Number(n[0]),Number(n[1]))}t.newCoordinate&&(n=t.newCoordinate.split(","),this.newCoordinate_=new e.utils.Coordinate(Number(n[0]),Number(n[1])))},e.Events.CommentMove.prototype.isNull=function(){return e.utils.Coordinate.equals(this.oldCoordinate_,this.newCoordinate_)},e.Events.CommentMove.prototype.run=function(t){var n=this.getEventWorkspace_().getCommentById(this.commentId);if(n){t=t?this.newCoordinate_:this.oldCoordinate_;var r=n.getXY();n.moveBy(t.x-r.x,t.y-r.y)}else console.warn("Can't move non-existent comment: "+this.commentId)},e.registry.register(e.registry.Type.EVENT,e.Events.COMMENT_CREATE,e.Events.CommentCreate),e.registry.register(e.registry.Type.EVENT,e.Events.COMMENT_CHANGE,e.Events.CommentChange),e.registry.register(e.registry.Type.EVENT,e.Events.COMMENT_MOVE,e.Events.CommentMove),e.registry.register(e.registry.Type.EVENT,e.Events.COMMENT_DELETE,e.Events.CommentDelete),e.BubbleDragger=function(t,n){this.draggingBubble_=t,this.workspace_=n,this.dragTarget_=null,this.wouldDeleteBubble_=!1,this.startXY_=this.draggingBubble_.getRelativeToSurfaceXY(),this.dragSurface_=e.utils.is3dSupported()&&n.getBlockDragSurface()?n.getBlockDragSurface():null},e.BubbleDragger.prototype.dispose=function(){this.dragSurface_=this.workspace_=this.draggingBubble_=null},e.BubbleDragger.prototype.startBubbleDrag=function(){e.Events.getGroup()||e.Events.setGroup(!0),this.workspace_.setResizesEnabled(!1),this.draggingBubble_.setAutoLayout(!1),this.dragSurface_&&this.moveToDragSurface_(),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!0)},e.BubbleDragger.prototype.dragBubble=function(t,n){n=this.pixelsToWorkspaceUnits_(n),n=e.utils.Coordinate.sum(this.startXY_,n),this.draggingBubble_.moveDuringDrag(this.dragSurface_,n),n=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(t),t=this.wouldDeleteBubble_,this.wouldDeleteBubble_=this.shouldDelete_(this.dragTarget_),t!=this.wouldDeleteBubble_&&this.updateCursorDuringBubbleDrag_(),this.dragTarget_!==n&&(n&&n.onDragExit(this.draggingBubble_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBubble_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBubble_)},e.BubbleDragger.prototype.shouldDelete_=function(t){return!(!t||!this.workspace_.getComponentManager().hasCapability(t.id,e.ComponentManager.Capability.DELETE_AREA))&&t.wouldDelete(this.draggingBubble_,!1)},e.BubbleDragger.prototype.updateCursorDuringBubbleDrag_=function(){this.draggingBubble_.setDeleteStyle(this.wouldDeleteBubble_)},e.BubbleDragger.prototype.endBubbleDrag=function(t,n){this.dragBubble(t,n),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBubble_)?t=this.startXY_:(t=this.pixelsToWorkspaceUnits_(n),t=e.utils.Coordinate.sum(this.startXY_,t)),this.draggingBubble_.moveTo(t.x,t.y),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBubble_),this.wouldDeleteBubble_?(this.fireMoveEvent_(),this.draggingBubble_.dispose(!1,!0)):(this.dragSurface_&&this.dragSurface_.clearAndHide(this.workspace_.getBubbleCanvas()),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!1),this.fireMoveEvent_()),this.workspace_.setResizesEnabled(!0),e.Events.setGroup(!1)},e.BubbleDragger.prototype.fireMoveEvent_=function(){if(this.draggingBubble_.isComment){var t=new(e.Events.get(e.Events.COMMENT_MOVE))(this.draggingBubble_);t.setOldCoordinate(this.startXY_),t.recordNew(),e.Events.fire(t)}},e.BubbleDragger.prototype.pixelsToWorkspaceUnits_=function(t){return t=new e.utils.Coordinate(t.x/this.workspace_.scale,t.y/this.workspace_.scale),this.workspace_.isMutator&&t.scale(1/this.workspace_.options.parentWorkspace.scale),t},e.BubbleDragger.prototype.moveToDragSurface_=function(){this.draggingBubble_.moveTo(0,0),this.dragSurface_.translateSurface(this.startXY_.x,this.startXY_.y),this.dragSurface_.setBlocksAndShow(this.draggingBubble_.getSvgRoot())},e.Events.Click=function(t,n,r){e.Events.Click.superClass_.constructor.call(this,t?t.workspace.id:n),this.blockId=t?t.id:null,this.targetType=r},e.utils.object.inherits(e.Events.Click,e.Events.UiBase),e.Events.Click.prototype.type=e.Events.CLICK,e.Events.Click.prototype.toJson=function(){var t=e.Events.Click.superClass_.toJson.call(this);return t.targetType=this.targetType,this.blockId&&(t.blockId=this.blockId),t},e.Events.Click.prototype.fromJson=function(t){e.Events.Click.superClass_.fromJson.call(this,t),this.targetType=t.targetType,this.blockId=t.blockId},e.registry.register(e.registry.Type.EVENT,e.Events.CLICK,e.Events.Click),e.WorkspaceDragger=function(t){this.workspace_=t,this.horizontalScrollEnabled_=this.workspace_.isMovableHorizontally(),this.verticalScrollEnabled_=this.workspace_.isMovableVertically(),this.startScrollXY_=new e.utils.Coordinate(t.scrollX,t.scrollY)},e.WorkspaceDragger.prototype.dispose=function(){this.workspace_=null},e.WorkspaceDragger.prototype.startDrag=function(){e.selected&&e.selected.unselect(),this.workspace_.setupDragSurface()},e.WorkspaceDragger.prototype.endDrag=function(t){this.drag(t),this.workspace_.resetDragSurface()},e.WorkspaceDragger.prototype.drag=function(t){if(t=e.utils.Coordinate.sum(this.startScrollXY_,t),this.horizontalScrollEnabled_&&this.verticalScrollEnabled_)this.workspace_.scroll(t.x,t.y);else if(this.horizontalScrollEnabled_)this.workspace_.scroll(t.x,this.workspace_.scrollY);else{if(!this.verticalScrollEnabled_)throw new TypeError("Invalid state.");this.workspace_.scroll(this.workspace_.scrollX,t.y)}},e.Gesture=function(t,n){this.mouseDownXY_=null,this.currentDragDeltaXY_=new e.utils.Coordinate(0,0),this.startWorkspace_=this.targetBlock_=this.startBlock_=this.startField_=this.startBubble_=null,this.creatorWorkspace_=n,this.isDraggingBubble_=this.isDraggingBlock_=this.isDraggingWorkspace_=this.hasExceededDragRadius_=!1,this.mostRecentEvent_=t,this.flyout_=this.workspaceDragger_=this.blockDragger_=this.bubbleDragger_=this.onUpWrapper_=this.onMoveWrapper_=null,this.isEnding_=this.hasStarted_=this.calledUpdateIsDragging_=!1,this.healStack_=!e.DRAG_STACK},e.Gesture.prototype.dispose=function(){e.Touch.clearTouchIdentifier(),e.Tooltip.unblock(),this.creatorWorkspace_.clearGesture(),this.onMoveWrapper_&&e.browserEvents.unbind(this.onMoveWrapper_),this.onUpWrapper_&&e.browserEvents.unbind(this.onUpWrapper_),this.blockDragger_&&this.blockDragger_.dispose(),this.workspaceDragger_&&this.workspaceDragger_.dispose(),this.bubbleDragger_&&this.bubbleDragger_.dispose()},e.Gesture.prototype.updateFromEvent_=function(t){var n=new e.utils.Coordinate(t.clientX,t.clientY);this.updateDragDelta_(n)&&(this.updateIsDragging_(),e.longStop_()),this.mostRecentEvent_=t},e.Gesture.prototype.updateDragDelta_=function(t){return this.currentDragDeltaXY_=e.utils.Coordinate.difference(t,this.mouseDownXY_),!this.hasExceededDragRadius_&&(this.hasExceededDragRadius_=e.utils.Coordinate.magnitude(this.currentDragDeltaXY_)>(this.flyout_?e.FLYOUT_DRAG_RADIUS:e.DRAG_RADIUS))},e.Gesture.prototype.updateIsDraggingFromFlyout_=function(){return!(!this.targetBlock_||!this.flyout_.isBlockCreatable_(this.targetBlock_)||this.flyout_.isScrollable()&&!this.flyout_.isDragTowardWorkspace(this.currentDragDeltaXY_)||(this.startWorkspace_=this.flyout_.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),e.Events.getGroup()||e.Events.setGroup(!0),this.startBlock_=null,this.targetBlock_=this.flyout_.createBlock(this.targetBlock_),this.targetBlock_.select(),0))},e.Gesture.prototype.updateIsDraggingBubble_=function(){return!!this.startBubble_&&(this.isDraggingBubble_=!0,this.startDraggingBubble_(),!0)},e.Gesture.prototype.updateIsDraggingBlock_=function(){return!!this.targetBlock_&&(this.flyout_?this.isDraggingBlock_=this.updateIsDraggingFromFlyout_():this.targetBlock_.isMovable()&&(this.isDraggingBlock_=!0),!!this.isDraggingBlock_&&(this.startDraggingBlock_(),!0))},e.Gesture.prototype.updateIsDraggingWorkspace_=function(){(this.flyout_?this.flyout_.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.workspaceDragger_=new e.WorkspaceDragger(this.startWorkspace_),this.isDraggingWorkspace_=!0,this.workspaceDragger_.startDrag())},e.Gesture.prototype.updateIsDragging_=function(){if(this.calledUpdateIsDragging_)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging_=!0,this.updateIsDraggingBubble_()||this.updateIsDraggingBlock_()||this.updateIsDraggingWorkspace_()},e.Gesture.prototype.startDraggingBlock_=function(){this.blockDragger_=new(e.registry.getClassFromOptions(e.registry.Type.BLOCK_DRAGGER,this.creatorWorkspace_.options,!0))(this.targetBlock_,this.startWorkspace_),this.blockDragger_.startDrag(this.currentDragDeltaXY_,this.healStack_),this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_)},e.Gesture.prototype.startDraggingBubble_=function(){this.bubbleDragger_=new e.BubbleDragger(this.startBubble_,this.startWorkspace_),this.bubbleDragger_.startBubbleDrag(),this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_)},e.Gesture.prototype.doStart=function(t){e.utils.isTargetInput(t)?this.cancel():(this.hasStarted_=!0,e.blockAnimations.disconnectUiStop(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),e.hideChaff(!!this.flyout_),this.startWorkspace_.markFocused(),this.mostRecentEvent_=t,e.Tooltip.block(),this.targetBlock_&&this.targetBlock_.select(),e.utils.isRightButton(t)?this.handleRightClick(t):("touchstart"!=t.type.toLowerCase()&&"pointerdown"!=t.type.toLowerCase()||"mouse"==t.pointerType||e.longStart(t,this),this.mouseDownXY_=new e.utils.Coordinate(t.clientX,t.clientY),this.healStack_=t.altKey||t.ctrlKey||t.metaKey,this.bindMouseEvents(t)))},e.Gesture.prototype.bindMouseEvents=function(t){this.onMoveWrapper_=e.browserEvents.conditionalBind(document,"mousemove",null,this.handleMove.bind(this)),this.onUpWrapper_=e.browserEvents.conditionalBind(document,"mouseup",null,this.handleUp.bind(this)),t.preventDefault(),t.stopPropagation()},e.Gesture.prototype.handleMove=function(t){this.updateFromEvent_(t),this.isDraggingWorkspace_?this.workspaceDragger_.drag(this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBubble_&&this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_),t.preventDefault(),t.stopPropagation()},e.Gesture.prototype.handleUp=function(t){this.updateFromEvent_(t),e.longStop_(),this.isEnding_?console.log("Trying to end a gesture recursively."):(this.isEnding_=!0,this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(t,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endDrag(t,this.currentDragDeltaXY_):this.isDraggingWorkspace_?this.workspaceDragger_.endDrag(this.currentDragDeltaXY_):this.isBubbleClick_()?this.doBubbleClick_():this.isFieldClick_()?this.doFieldClick_():this.isBlockClick_()?this.doBlockClick_():this.isWorkspaceClick_()&&this.doWorkspaceClick_(t),t.preventDefault(),t.stopPropagation(),this.dispose())},e.Gesture.prototype.cancel=function(){this.isEnding_||(e.longStop_(),this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingWorkspace_&&this.workspaceDragger_.endDrag(this.currentDragDeltaXY_),this.dispose())},e.Gesture.prototype.handleRightClick=function(t){this.targetBlock_?(this.bringBlockToFront_(),e.hideChaff(!!this.flyout_),this.targetBlock_.showContextMenu(t)):this.startBubble_?this.startBubble_.showContextMenu(t):this.startWorkspace_&&!this.flyout_&&(e.hideChaff(),this.startWorkspace_.showContextMenu(t)),t.preventDefault(),t.stopPropagation(),this.dispose()},e.Gesture.prototype.handleWsStart=function(t,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace_(n),this.mostRecentEvent_=t,this.doStart(t)},e.Gesture.prototype.fireWorkspaceClick_=function(t){e.Events.fire(new(e.Events.get(e.Events.CLICK))(null,t.id,"workspace"))},e.Gesture.prototype.handleFlyoutStart=function(t,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout_(n),this.handleWsStart(t,n.getWorkspace())},e.Gesture.prototype.handleBlockStart=function(t,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(n),this.mostRecentEvent_=t},e.Gesture.prototype.handleBubbleStart=function(t,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(n),this.mostRecentEvent_=t},e.Gesture.prototype.doBubbleClick_=function(){this.startBubble_.setFocus&&this.startBubble_.setFocus(),this.startBubble_.select&&this.startBubble_.select()},e.Gesture.prototype.doFieldClick_=function(){this.startField_.showEditor(this.mostRecentEvent_),this.bringBlockToFront_()},e.Gesture.prototype.doBlockClick_=function(){if(this.flyout_&&this.flyout_.autoClose)this.targetBlock_.isEnabled()&&(e.Events.getGroup()||e.Events.setGroup(!0),this.flyout_.createBlock(this.targetBlock_).scheduleSnapAndBump());else{var t=new(e.Events.get(e.Events.CLICK))(this.startBlock_,this.startWorkspace_.id,"block");e.Events.fire(t)}this.bringBlockToFront_(),e.Events.setGroup(!1)},e.Gesture.prototype.doWorkspaceClick_=function(t){t=this.creatorWorkspace_,e.selected&&e.selected.unselect(),this.fireWorkspaceClick_(this.startWorkspace_||t)},e.Gesture.prototype.bringBlockToFront_=function(){this.targetBlock_&&!this.flyout_&&this.targetBlock_.bringToFront()},e.Gesture.prototype.setStartField=function(t){if(this.hasStarted_)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField_||(this.startField_=t)},e.Gesture.prototype.setStartBubble=function(t){this.startBubble_||(this.startBubble_=t)},e.Gesture.prototype.setStartBlock=function(t){this.startBlock_||this.startBubble_||(this.startBlock_=t,t.isInFlyout&&t!=t.getRootBlock()?this.setTargetBlock_(t.getRootBlock()):this.setTargetBlock_(t))},e.Gesture.prototype.setTargetBlock_=function(t){t.isShadow()?this.setTargetBlock_(t.getParent()):this.targetBlock_=t},e.Gesture.prototype.setStartWorkspace_=function(t){this.startWorkspace_||(this.startWorkspace_=t)},e.Gesture.prototype.setStartFlyout_=function(t){this.flyout_||(this.flyout_=t)},e.Gesture.prototype.isBubbleClick_=function(){return!!this.startBubble_&&!this.hasExceededDragRadius_},e.Gesture.prototype.isBlockClick_=function(){return!!this.startBlock_&&!this.hasExceededDragRadius_&&!this.isFieldClick_()},e.Gesture.prototype.isFieldClick_=function(){return!!this.startField_&&this.startField_.isClickable()&&!this.hasExceededDragRadius_&&(!this.flyout_||!this.flyout_.autoClose)},e.Gesture.prototype.isWorkspaceClick_=function(){return!(this.startBlock_||this.startBubble_||this.startField_||this.hasExceededDragRadius_)},e.Gesture.prototype.isDragging=function(){return this.isDraggingWorkspace_||this.isDraggingBlock_||this.isDraggingBubble_},e.Gesture.prototype.hasStarted=function(){return this.hasStarted_},e.Gesture.prototype.getInsertionMarkers=function(){return this.blockDragger_?this.blockDragger_.getInsertionMarkers():[]},e.Gesture.prototype.getCurrentDragger=function(){return this.isDraggingBlock_?this.blockDragger_:this.isDraggingWorkspace_?this.workspaceDragger_:this.isDraggingBubble_?this.bubbleDragger_:null},e.Gesture.inProgress=function(){for(var r,t=e.Workspace.getAll(),n=0;r=t[n];n++)if(r.currentGesture_)return!0;return!1},e.IRegistrable=function(){},e.Marker=function(){this.drawer_=this.curNode_=this.colour=null,this.type="marker"},e.Marker.prototype.setDrawer=function(t){this.drawer_=t},e.Marker.prototype.getDrawer=function(){return this.drawer_},e.Marker.prototype.getCurNode=function(){return this.curNode_},e.Marker.prototype.setCurNode=function(t){var n=this.curNode_;this.curNode_=t,this.drawer_&&this.drawer_.draw(n,this.curNode_)},e.Marker.prototype.draw=function(){this.drawer_&&this.drawer_.draw(this.curNode_,this.curNode_)},e.Marker.prototype.hide=function(){this.drawer_&&this.drawer_.hide()},e.Marker.prototype.dispose=function(){this.getDrawer()&&this.getDrawer().dispose()},e.Cursor=function(){e.Cursor.superClass_.constructor.call(this),this.type="cursor"},e.utils.object.inherits(e.Cursor,e.Marker),e.Cursor.prototype.next=function(){var t=this.getCurNode();if(!t)return null;for(t=t.next();t&&t.next()&&(t.getType()==e.ASTNode.types.NEXT||t.getType()==e.ASTNode.types.BLOCK);)t=t.next();return t&&this.setCurNode(t),t},e.Cursor.prototype.in=function(){var t=this.getCurNode();return t?((t.getType()==e.ASTNode.types.PREVIOUS||t.getType()==e.ASTNode.types.OUTPUT)&&(t=t.next()),(t=t.in())&&this.setCurNode(t),t):null},e.Cursor.prototype.prev=function(){var t=this.getCurNode();if(!t)return null;for(t=t.prev();t&&t.prev()&&(t.getType()==e.ASTNode.types.NEXT||t.getType()==e.ASTNode.types.BLOCK);)t=t.prev();return t&&this.setCurNode(t),t},e.Cursor.prototype.out=function(){var t=this.getCurNode();return t?((t=t.out())&&t.getType()==e.ASTNode.types.BLOCK&&(t=t.prev()||t),t&&this.setCurNode(t),t):null},e.registry.register(e.registry.Type.CURSOR,e.registry.DEFAULT,e.Cursor),e.MarkerManager=function(t){this.cursorSvg_=this.cursor_=null,this.markers_=Object.create(null),this.workspace_=t},e.MarkerManager.LOCAL_MARKER="local_marker_1",e.MarkerManager.prototype.registerMarker=function(t,n){this.markers_[t]&&this.unregisterMarker(t),n.setDrawer(this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,n)),this.setMarkerSvg(n.getDrawer().createDom()),this.markers_[t]=n},e.MarkerManager.prototype.unregisterMarker=function(t){var n=this.markers_[t];if(!n)throw Error("Marker with ID "+t+" does not exist. Can only unregister markers that exist.");n.dispose(),delete this.markers_[t]},e.MarkerManager.prototype.getCursor=function(){return this.cursor_},e.MarkerManager.prototype.getMarker=function(t){return this.markers_[t]||null},e.MarkerManager.prototype.setCursor=function(t){this.cursor_&&this.cursor_.getDrawer()&&this.cursor_.getDrawer().dispose(),(this.cursor_=t)&&(t=this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,this.cursor_),this.cursor_.setDrawer(t),this.setCursorSvg(this.cursor_.getDrawer().createDom()))},e.MarkerManager.prototype.setCursorSvg=function(t){t?(this.workspace_.getBlockCanvas().appendChild(t),this.cursorSvg_=t):this.cursorSvg_=null},e.MarkerManager.prototype.setMarkerSvg=function(t){t?this.workspace_.getBlockCanvas()&&(this.cursorSvg_?this.workspace_.getBlockCanvas().insertBefore(t,this.cursorSvg_):this.workspace_.getBlockCanvas().appendChild(t)):this.markerSvg_=null},e.MarkerManager.prototype.updateMarkers=function(){this.workspace_.keyboardAccessibilityMode&&this.cursorSvg_&&this.workspace_.getCursor().draw()},e.MarkerManager.prototype.dispose=function(){for(var r,t=Object.keys(this.markers_),n=0;r=t[n];n++)this.unregisterMarker(r);this.markers_=null,this.cursor_&&(this.cursor_.dispose(),this.cursor_=null)},e.WidgetDiv={},e.WidgetDiv.owner_=null,e.WidgetDiv.dispose_=null,e.WidgetDiv.rendererClassName_="",e.WidgetDiv.themeClassName_="",e.WidgetDiv.createDom=function(){e.WidgetDiv.DIV||(e.WidgetDiv.DIV=document.createElement("div"),e.WidgetDiv.DIV.className="blocklyWidgetDiv",(e.parentContainer||document.body).appendChild(e.WidgetDiv.DIV))},e.WidgetDiv.show=function(t,n,r){e.WidgetDiv.hide(),e.WidgetDiv.owner_=t,e.WidgetDiv.dispose_=r,(t=e.WidgetDiv.DIV).style.direction=n?"rtl":"ltr",t.style.display="block",n=e.getMainWorkspace(),e.WidgetDiv.rendererClassName_=n.getRenderer().getClassName(),e.WidgetDiv.themeClassName_=n.getTheme().getClassName(),e.utils.dom.addClass(t,e.WidgetDiv.rendererClassName_),e.utils.dom.addClass(t,e.WidgetDiv.themeClassName_)},e.WidgetDiv.hide=function(){if(e.WidgetDiv.isVisible()){e.WidgetDiv.owner_=null;var t=e.WidgetDiv.DIV;t.style.display="none",t.style.left="",t.style.top="",e.WidgetDiv.dispose_&&e.WidgetDiv.dispose_(),e.WidgetDiv.dispose_=null,t.textContent="",e.WidgetDiv.rendererClassName_&&(e.utils.dom.removeClass(t,e.WidgetDiv.rendererClassName_),e.WidgetDiv.rendererClassName_=""),e.WidgetDiv.themeClassName_&&(e.utils.dom.removeClass(t,e.WidgetDiv.themeClassName_),e.WidgetDiv.themeClassName_=""),e.getMainWorkspace().markFocused()}},e.WidgetDiv.isVisible=function(){return!!e.WidgetDiv.owner_},e.WidgetDiv.hideIfOwner=function(t){e.WidgetDiv.owner_==t&&e.WidgetDiv.hide()},e.WidgetDiv.positionInternal_=function(t,n,r){e.WidgetDiv.DIV.style.left=t+"px",e.WidgetDiv.DIV.style.top=n+"px",e.WidgetDiv.DIV.style.height=r+"px"},e.WidgetDiv.positionWithAnchor=function(t,n,r,s){var u=e.WidgetDiv.calculateY_(t,n,r);t=e.WidgetDiv.calculateX_(t,n,r,s),0>u?e.WidgetDiv.positionInternal_(t,0,r.height+u):e.WidgetDiv.positionInternal_(t,u,r.height)},e.WidgetDiv.calculateX_=function(t,n,r,s){return s?(n=Math.max(n.right-r.width,t.left),Math.min(n,t.right-r.width)):(n=Math.min(n.left,t.right-r.width),Math.max(n,t.left))},e.WidgetDiv.calculateY_=function(t,n,r){return n.bottom+r.height>=t.bottom?n.top-r.height:n.bottom},e.Field=function(t,n,r){this.value_=this.DEFAULT_VALUE,this.tooltip_=this.validator_=null,this.size_=new e.utils.Size(0,0),this.constants_=this.mouseDownWrapper_=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg_=this.cursorSvg_=null,r&&this.configure_(r),this.setValue(t),n&&this.setValidator(n)},e.Field.prototype.DEFAULT_VALUE=null,e.Field.prototype.name=void 0,e.Field.prototype.disposed=!1,e.Field.prototype.maxDisplayLength=50,e.Field.prototype.sourceBlock_=null,e.Field.prototype.isDirty_=!0,e.Field.prototype.visible_=!0,e.Field.prototype.clickTarget_=null,e.Field.NBSP="\xa0",e.Field.prototype.EDITABLE=!0,e.Field.prototype.SERIALIZABLE=!1,e.Field.prototype.configure_=function(t){var n=t.tooltip;"string"==typeof n&&(n=e.utils.replaceMessageReferences(t.tooltip)),n&&this.setTooltip(n)},e.Field.prototype.setSourceBlock=function(t){if(this.sourceBlock_)throw Error("Field already bound to a block.");this.sourceBlock_=t},e.Field.prototype.getConstants=function(){return!this.constants_&&this.sourceBlock_&&this.sourceBlock_.workspace&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_},e.Field.prototype.getSourceBlock=function(){return this.sourceBlock_},e.Field.prototype.init=function(){this.fieldGroup_||(this.fieldGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},null),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip_),this.bindEvents_(),this.initModel())},e.Field.prototype.initView=function(){this.createBorderRect_(),this.createTextElement_()},e.Field.prototype.initModel=function(){},e.Field.prototype.createBorderRect_=function(){this.borderRect_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)},e.Field.prototype.createTextElement_=function(){this.textElement_=e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)},e.Field.prototype.bindEvents_=function(){e.Tooltip.bindMouseEvents(this.getClickTarget_()),this.mouseDownWrapper_=e.browserEvents.conditionalBind(this.getClickTarget_(),"mousedown",this,this.onMouseDown_)},e.Field.prototype.fromXml=function(t){this.setValue(t.textContent)},e.Field.prototype.toXml=function(t){return t.textContent=this.getValue(),t},e.Field.prototype.dispose=function(){e.DropDownDiv.hideIfOwner(this),e.WidgetDiv.hideIfOwner(this),e.Tooltip.unbindMouseEvents(this.getClickTarget_()),this.mouseDownWrapper_&&e.browserEvents.unbind(this.mouseDownWrapper_),e.utils.dom.removeNode(this.fieldGroup_),this.disposed=!0},e.Field.prototype.updateEditable=function(){var t=this.fieldGroup_;this.EDITABLE&&t&&(this.sourceBlock_.isEditable()?(e.utils.dom.addClass(t,"blocklyEditableText"),e.utils.dom.removeClass(t,"blocklyNonEditableText"),t.style.cursor=this.CURSOR):(e.utils.dom.addClass(t,"blocklyNonEditableText"),e.utils.dom.removeClass(t,"blocklyEditableText"),t.style.cursor=""))},e.Field.prototype.isClickable=function(){return!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&!!this.showEditor_&&"function"==typeof this.showEditor_},e.Field.prototype.isCurrentlyEditable=function(){return this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()},e.Field.prototype.isSerializable=function(){var t=!1;return this.name&&(this.SERIALIZABLE?t=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),t=!0)),t},e.Field.prototype.isVisible=function(){return this.visible_},e.Field.prototype.setVisible=function(t){if(this.visible_!=t){this.visible_=t;var n=this.getSvgRoot();n&&(n.style.display=t?"block":"none")}},e.Field.prototype.setValidator=function(t){this.validator_=t},e.Field.prototype.getValidator=function(){return this.validator_},e.Field.prototype.getSvgRoot=function(){return this.fieldGroup_},e.Field.prototype.applyColour=function(){},e.Field.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()},e.Field.prototype.showEditor=function(t){this.isClickable()&&this.showEditor_(t)},e.Field.prototype.updateSize_=function(t){var n=this.getConstants(),r=2*(t=null!=t?t:this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0),s=n.FIELD_TEXT_HEIGHT,u=0;this.textElement_&&(r+=u=e.utils.dom.getFastTextWidth(this.textElement_,n.FIELD_TEXT_FONTSIZE,n.FIELD_TEXT_FONTWEIGHT,n.FIELD_TEXT_FONTFAMILY)),this.borderRect_&&(s=Math.max(s,n.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=s,this.size_.width=r,this.positionTextElement_(t,u),this.positionBorderRect_()},e.Field.prototype.positionTextElement_=function(t,n){if(this.textElement_){var r=this.getConstants(),s=this.size_.height/2;this.textElement_.setAttribute("x",this.sourceBlock_.RTL?this.size_.width-n-t:t),this.textElement_.setAttribute("y",r.FIELD_TEXT_BASELINE_CENTER?s:s-r.FIELD_TEXT_HEIGHT/2+r.FIELD_TEXT_BASELINE)}},e.Field.prototype.positionBorderRect_=function(){this.borderRect_&&(this.borderRect_.setAttribute("width",this.size_.width),this.borderRect_.setAttribute("height",this.size_.height),this.borderRect_.setAttribute("rx",this.getConstants().FIELD_BORDER_RECT_RADIUS),this.borderRect_.setAttribute("ry",this.getConstants().FIELD_BORDER_RECT_RADIUS))},e.Field.prototype.getSize=function(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&0==this.size_.width&&(console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead."),this.render_()),this.size_):new e.utils.Size(0,0)},e.Field.prototype.getScaledBBox=function(){if(this.borderRect_)t=this.borderRect_.getBoundingClientRect(),r=e.utils.style.getPageOffset(this.borderRect_),s=t.width,t=t.height;else{var t=this.sourceBlock_.getHeightWidth(),n=this.sourceBlock_.workspace.scale,r=this.getAbsoluteXY_(),s=t.width*n;t=t.height*n,e.utils.userAgent.GECKO?(r.x+=1.5*n,r.y+=1.5*n):e.utils.userAgent.EDGE||e.utils.userAgent.IE||(r.x-=.5*n,r.y-=.5*n),s+=1*n,t+=1*n}return new e.utils.Rect(r.y,r.y+t,r.x,r.x+s)},e.Field.prototype.getDisplayText_=function(){var t=this.getText();return t?(t.length>this.maxDisplayLength&&(t=t.substring(0,this.maxDisplayLength-2)+"\u2026"),t=t.replace(/\s/g,e.Field.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(t+="\u200f"),t):e.Field.NBSP},e.Field.prototype.getText=function(){if(this.getText_){var t=this.getText_.call(this);if(null!==t)return String(t)}return String(this.getValue())},e.Field.prototype.markDirty=function(){this.isDirty_=!0,this.constants_=null},e.Field.prototype.forceRerender=function(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours(),this.updateMarkers_())},e.Field.prototype.setValue=function(t){if(null!==t){var n=this.doClassValidation_(t);if(!((t=this.processValidation_(t,n))instanceof Error)){if((n=this.getValidator())&&(n=n.call(this,t),(t=this.processValidation_(t,n))instanceof Error))return;if(!(n=this.sourceBlock_)||!n.disposed){var r=this.getValue();r===t?this.doValueUpdate_(t):(n&&e.Events.isEnabled()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(n,"field",this.name||null,r,t)),this.doValueUpdate_(t),this.isDirty_&&this.forceRerender())}}}},e.Field.prototype.processValidation_=function(t,n){return null===n?(this.doValueInvalid_(t),this.isDirty_&&this.forceRerender(),Error()):(void 0!==n&&(t=n),t)},e.Field.prototype.getValue=function(){return this.value_},e.Field.prototype.doClassValidation_=function(t){return null==t?null:t},e.Field.prototype.doValueUpdate_=function(t){this.value_=t,this.isDirty_=!0},e.Field.prototype.doValueInvalid_=function(t){},e.Field.prototype.onMouseDown_=function(t){this.sourceBlock_&&this.sourceBlock_.workspace&&(t=this.sourceBlock_.workspace.getGesture(t))&&t.setStartField(this)},e.Field.prototype.setTooltip=function(t){t||""===t||(t=this.sourceBlock_);var n=this.getClickTarget_();n?n.tooltip=t:this.tooltip_=t},e.Field.prototype.getTooltip=function(){var t=this.getClickTarget_();return e.Tooltip.getTooltipOfObject(t||{tooltip:this.tooltip_})},e.Field.prototype.getClickTarget_=function(){return this.clickTarget_||this.getSvgRoot()},e.Field.prototype.getAbsoluteXY_=function(){return e.utils.style.getPageOffset(this.getClickTarget_())},e.Field.prototype.referencesVariables=function(){return!1},e.Field.prototype.getParentInput=function(){for(var t=null,n=this.sourceBlock_,r=n.inputList,s=0;s<n.inputList.length;s++)for(var u=r[s],b=u.fieldRow,x=0;x<b.length;x++)if(b[x]===this){t=u;break}return t},e.Field.prototype.getFlipRtl=function(){return!1},e.Field.prototype.isTabNavigable=function(){return!1},e.Field.prototype.onShortcut=function(t){return!1},e.Field.prototype.setCursorSvg=function(t){t?(this.fieldGroup_.appendChild(t),this.cursorSvg_=t):this.cursorSvg_=null},e.Field.prototype.setMarkerSvg=function(t){t?(this.fieldGroup_.appendChild(t),this.markerSvg_=t):this.markerSvg_=null},e.Field.prototype.updateMarkers_=function(){var t=this.sourceBlock_.workspace;t.keyboardAccessibilityMode&&this.cursorSvg_&&t.getCursor().draw(),t.keyboardAccessibilityMode&&this.markerSvg_&&t.getMarker(e.MarkerManager.LOCAL_MARKER).draw()},e.FieldLabel=function(t,n,r){this.class_=null,e.FieldLabel.superClass_.constructor.call(this,t,null,r),r||(this.class_=n||null)},e.utils.object.inherits(e.FieldLabel,e.Field),e.FieldLabel.prototype.DEFAULT_VALUE="",e.FieldLabel.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.text);return new e.FieldLabel(n,void 0,t)},e.FieldLabel.prototype.EDITABLE=!1,e.FieldLabel.prototype.configure_=function(t){e.FieldLabel.superClass_.configure_.call(this,t),this.class_=t.class},e.FieldLabel.prototype.initView=function(){this.createTextElement_(),this.class_&&e.utils.dom.addClass(this.textElement_,this.class_)},e.FieldLabel.prototype.doClassValidation_=function(t){return null==t?null:String(t)},e.FieldLabel.prototype.setClass=function(t){this.textElement_&&(this.class_&&e.utils.dom.removeClass(this.textElement_,this.class_),t&&e.utils.dom.addClass(this.textElement_,t)),this.class_=t},e.fieldRegistry.register("field_label",e.FieldLabel),e.Input=function(t,n,r,s){if(t!=e.inputTypes.DUMMY&&!n)throw Error("Value inputs and statement inputs must have non-empty name.");this.type=t,this.name=n,this.sourceBlock_=r,this.connection=s,this.fieldRow=[]},e.Input.prototype.align=e.constants.ALIGN.LEFT,e.Input.prototype.visible_=!0,e.Input.prototype.getSourceBlock=function(){return this.sourceBlock_},e.Input.prototype.appendField=function(t,n){return this.insertFieldAt(this.fieldRow.length,t,n),this},e.Input.prototype.insertFieldAt=function(t,n,r){if(0>t||t>this.fieldRow.length)throw Error("index "+t+" out of bounds.");return(n||""==n&&r)&&("string"==typeof n&&(n=e.fieldRegistry.fromJson({type:"field_label",text:n})),n.setSourceBlock(this.sourceBlock_),this.sourceBlock_.rendered&&(n.init(),n.applyColour()),n.name=r,n.setVisible(this.isVisible()),n.prefixField&&(t=this.insertFieldAt(t,n.prefixField)),this.fieldRow.splice(t,0,n),++t,n.suffixField&&(t=this.insertFieldAt(t,n.suffixField)),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours())),t},e.Input.prototype.removeField=function(t,n){for(var s,r=0;s=this.fieldRow[r];r++)if(s.name===t)return s.dispose(),this.fieldRow.splice(r,1),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours()),!0;if(n)return!1;throw Error('Field "'+t+'" not found.')},e.Input.prototype.isVisible=function(){return this.visible_},e.Input.prototype.setVisible=function(t){var n=[];if(this.visible_==t)return n;this.visible_=t;for(var s,r=0;s=this.fieldRow[r];r++)s.setVisible(t);return this.connection&&(this.connection=this.connection,t?n=this.connection.startTrackingAll():this.connection.stopTrackingAll(),r=this.connection.targetBlock())&&(r.getSvgRoot().style.display=t?"block":"none"),n},e.Input.prototype.markDirty=function(){for(var n,t=0;n=this.fieldRow[t];t++)n.markDirty()},e.Input.prototype.setCheck=function(t){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(t),this},e.Input.prototype.setAlign=function(t){return this.align=t,this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render()),this},e.Input.prototype.setShadowDom=function(t){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(t),this},e.Input.prototype.getShadowDom=function(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()},e.Input.prototype.init=function(){if(this.sourceBlock_.workspace.rendered)for(var t=0;t<this.fieldRow.length;t++)this.fieldRow[t].init()},e.Input.prototype.dispose=function(){for(var n,t=0;n=this.fieldRow[t];t++)n.dispose();this.connection&&this.connection.dispose(),this.sourceBlock_=null},e.Block=function(t,n,r){if(e.Generator&&void 0!==e.Generator.prototype[n])throw Error('Block prototypeName "'+n+'" conflicts with Blockly.Generator members.');if(this.id=r&&!t.getBlockById(r)?r:e.utils.genUid(),t.setBlockById(this.id,this),this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.inputsInline=void 0,this.disabled=!1,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable_=this.movable_=this.deletable_=!0,this.collapsed_=this.isShadow_=!1,this.comment=this.outputShape_=null,this.commentModel={text:null,pinned:!1,size:new e.utils.Size(160,80)},this.xy_=new e.utils.Coordinate(0,0),this.workspace=t,this.isInFlyout=t.isFlyout,this.isInMutator=t.isMutator,this.RTL=t.RTL,this.isInsertionMarker_=!1,this.hat=void 0,this.rendered=null,this.statementInputCount=0,n){if(this.type=n,!(r=e.Blocks[n])||"object"!=typeof r)throw TypeError("Unknown block type: "+n);e.utils.object.mixin(this,r)}t.addTopBlock(this),t.addTypedBlock(this),(t=e.Events.getGroup())||e.Events.setGroup(!0),n=e.Events.recordUndo;try{"function"==typeof this.init&&(e.Events.recordUndo=!1,this.init(),e.Events.recordUndo=n),e.Events.isEnabled()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CREATE))(this))}finally{t||e.Events.setGroup(!1),e.Events.recordUndo=n}this.inputsInlineDefault=this.inputsInline,"function"==typeof this.onchange&&this.setOnChange(this.onchange)},e.Block.COLLAPSED_INPUT_NAME=e.constants.COLLAPSED_INPUT_NAME,e.Block.COLLAPSED_FIELD_NAME=e.constants.COLLAPSED_FIELD_NAME,e.Block.prototype.data=null,e.Block.prototype.disposed=!1,e.Block.prototype.hue_=null,e.Block.prototype.colour_="#000000",e.Block.prototype.styleName_="",e.Block.prototype.dispose=function(t){if(this.workspace){this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.unplug(t),e.Events.isEnabled()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_DELETE))(this)),e.Events.disable();try{this.workspace&&(this.workspace.removeTopBlock(this),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),this.workspace=null),e.selected==this&&(e.selected=null);for(var n=this.childBlocks_.length-1;0<=n;n--)this.childBlocks_[n].dispose(!1);n=0;for(var r;r=this.inputList[n];n++)r.dispose();this.inputList.length=0;var u,s=this.getConnections_(!0);for(n=0;u=s[n];n++)u.dispose()}finally{e.Events.enable(),this.disposed=!0}}},e.Block.prototype.initModel=function(){for(var n,t=0;n=this.inputList[t];t++)for(var s,r=0;s=n.fieldRow[r];r++)s.initModel&&s.initModel()},e.Block.prototype.unplug=function(t){this.outputConnection?this.unplugFromRow_(t):this.previousConnection&&this.unplugFromStack_(t)},e.Block.prototype.unplugFromRow_=function(t){var n=null;this.outputConnection.isConnected()&&(n=this.outputConnection.targetConnection,this.outputConnection.disconnect()),n&&t&&(t=this.getOnlyValueConnection_())&&t.isConnected()&&!t.targetBlock().isShadow()&&((t=t.targetConnection).disconnect(),this.workspace.connectionChecker.canConnect(t,n,!1)?n.connect(t):t.onFailedConnect(n))},e.Block.prototype.getOnlyValueConnection_=function(){for(var t=null,n=0;n<this.inputList.length;n++){var r=this.inputList[n].connection;if(r&&r.type==e.connectionTypes.INPUT_VALUE&&r.targetConnection){if(t)return null;t=r}}return t},e.Block.prototype.unplugFromStack_=function(t){var n=null;this.previousConnection.isConnected()&&(n=this.previousConnection.targetConnection,this.previousConnection.disconnect());var r=this.getNextBlock();t&&r&&!r.isShadow()&&((t=this.nextConnection.targetConnection).disconnect(),n&&this.workspace.connectionChecker.canConnect(n,t,!1)&&n.connect(t))},e.Block.prototype.getConnections_=function(t){t=[],this.outputConnection&&t.push(this.outputConnection),this.previousConnection&&t.push(this.previousConnection),this.nextConnection&&t.push(this.nextConnection);for(var r,n=0;r=this.inputList[n];n++)r.connection&&t.push(r.connection);return t},e.Block.prototype.lastConnectionInStack=function(t){for(var n=this.nextConnection;n;){var r=n.targetBlock();if(!r||t&&r.isShadow())return n;n=r.nextConnection}return null},e.Block.prototype.bumpNeighbours=function(){},e.Block.prototype.getParent=function(){return this.parentBlock_},e.Block.prototype.getInputWithBlock=function(t){for(var r,n=0;r=this.inputList[n];n++)if(r.connection&&r.connection.targetBlock()==t)return r;return null},e.Block.prototype.getSurroundParent=function(){var t=this;do{var n=t;if(!(t=t.getParent()))return null}while(t.getNextBlock()==n);return t},e.Block.prototype.getNextBlock=function(){return this.nextConnection&&this.nextConnection.targetBlock()},e.Block.prototype.getPreviousBlock=function(){return this.previousConnection&&this.previousConnection.targetBlock()},e.Block.prototype.getFirstStatementConnection=function(){for(var n,t=0;n=this.inputList[t];t++)if(n.connection&&n.connection.type==e.connectionTypes.NEXT_STATEMENT)return n.connection;return null},e.Block.prototype.getRootBlock=function(){var t=this;do{var n=t;t=n.parentBlock_}while(t);return n},e.Block.prototype.getTopStackBlock=function(){var t=this;do{var n=t.getPreviousBlock()}while(n&&n.getNextBlock()==t&&(t=n));return t},e.Block.prototype.getChildren=function(t){if(!t)return this.childBlocks_;t=[];for(var r,n=0;r=this.inputList[n];n++)r.connection&&(r=r.connection.targetBlock())&&t.push(r);return(n=this.getNextBlock())&&t.push(n),t},e.Block.prototype.setParent=function(t){if(t!=this.parentBlock_){if(this.parentBlock_){if(e.utils.arrayRemove(this.parentBlock_.childBlocks_,this),this.previousConnection&&this.previousConnection.isConnected())throw Error("Still connected to previous block.");if(this.outputConnection&&this.outputConnection.isConnected())throw Error("Still connected to parent block.");this.parentBlock_=null}else this.workspace.removeTopBlock(this);(this.parentBlock_=t)?t.childBlocks_.push(this):this.workspace.addTopBlock(this)}},e.Block.prototype.getDescendants=function(t){for(var s,n=[this],r=this.getChildren(t),u=0;s=r[u];u++)n.push.apply(n,s.getDescendants(t));return n},e.Block.prototype.isDeletable=function(){return this.deletable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},e.Block.prototype.setDeletable=function(t){this.deletable_=t},e.Block.prototype.isMovable=function(){return this.movable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},e.Block.prototype.setMovable=function(t){this.movable_=t},e.Block.prototype.isDuplicatable=function(){return!this.workspace.hasBlockLimits()||this.workspace.isCapacityAvailable(e.utils.getBlockTypeCounts(this,!0))},e.Block.prototype.isShadow=function(){return this.isShadow_},e.Block.prototype.setShadow=function(t){this.isShadow_=t},e.Block.prototype.isInsertionMarker=function(){return this.isInsertionMarker_},e.Block.prototype.setInsertionMarker=function(t){this.isInsertionMarker_=t},e.Block.prototype.isEditable=function(){return this.editable_&&!(this.workspace&&this.workspace.options.readOnly)},e.Block.prototype.setEditable=function(t){this.editable_=t,t=0;for(var n;n=this.inputList[t];t++)for(var s,r=0;s=n.fieldRow[r];r++)s.updateEditable()},e.Block.prototype.isDisposed=function(){return this.disposed},e.Block.prototype.getMatchingConnection=function(t,n){var r=this.getConnections_(!0);if(t=t.getConnections_(!0),r.length!=t.length)throw Error("Connection lists did not match in length.");for(var s=0;s<t.length;s++)if(t[s]==n)return r[s];return null},e.Block.prototype.setHelpUrl=function(t){this.helpUrl=t},e.Block.prototype.setTooltip=function(t){this.tooltip=t},e.Block.prototype.getTooltip=function(){return e.Tooltip.getTooltipOfObject(this)},e.Block.prototype.getColour=function(){return this.colour_},e.Block.prototype.getStyleName=function(){return this.styleName_},e.Block.prototype.getHue=function(){return this.hue_},e.Block.prototype.setColour=function(t){t=e.utils.parseBlockColour(t),this.hue_=t.hue,this.colour_=t.hex},e.Block.prototype.setStyle=function(t){this.styleName_=t},e.Block.prototype.setOnChange=function(t){if(t&&"function"!=typeof t)throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),(this.onchange=t)&&(this.onchangeWrapper_=t.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_))},e.Block.prototype.getField=function(t){if("string"!=typeof t)throw TypeError("Blockly.Block.prototype.getField expects a string with the field name but received "+(void 0===t?"nothing":t+" of type "+typeof t)+" instead");for(var r,n=0;r=this.inputList[n];n++)for(var u,s=0;u=r.fieldRow[s];s++)if(u.name===t)return u;return null},e.Block.prototype.getVars=function(){for(var r,t=[],n=0;r=this.inputList[n];n++)for(var u,s=0;u=r.fieldRow[s];s++)u.referencesVariables()&&t.push(u.getValue());return t},e.Block.prototype.getVarModels=function(){for(var r,t=[],n=0;r=this.inputList[n];n++)for(var u,s=0;u=r.fieldRow[s];s++)u.referencesVariables()&&(u=this.workspace.getVariableById(u.getValue()))&&t.push(u);return t},e.Block.prototype.updateVarName=function(t){for(var r,n=0;r=this.inputList[n];n++)for(var u,s=0;u=r.fieldRow[s];s++)u.referencesVariables()&&t.getId()==u.getValue()&&u.refreshVariableName()},e.Block.prototype.renameVarById=function(t,n){for(var s,r=0;s=this.inputList[r];r++)for(var b,u=0;b=s.fieldRow[u];u++)b.referencesVariables()&&t==b.getValue()&&b.setValue(n)},e.Block.prototype.getFieldValue=function(t){return(t=this.getField(t))?t.getValue():null},e.Block.prototype.setFieldValue=function(t,n){var r=this.getField(n);if(!r)throw Error('Field "'+n+'" not found.');r.setValue(t)},e.Block.prototype.setPreviousStatement=function(t,n){if(t){if(void 0===n&&(n=null),!this.previousConnection){if(this.outputConnection)throw Error("Remove output connection prior to adding previous connection.");this.previousConnection=this.makeConnection_(e.connectionTypes.PREVIOUS_STATEMENT)}this.previousConnection.setCheck(n)}else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}},e.Block.prototype.setNextStatement=function(t,n){if(t)void 0===n&&(n=null),this.nextConnection||(this.nextConnection=this.makeConnection_(e.connectionTypes.NEXT_STATEMENT)),this.nextConnection.setCheck(n);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}},e.Block.prototype.setOutput=function(t,n){if(t){if(void 0===n&&(n=null),!this.outputConnection){if(this.previousConnection)throw Error("Remove previous connection prior to adding output connection.");this.outputConnection=this.makeConnection_(e.connectionTypes.OUTPUT_VALUE)}this.outputConnection.setCheck(n)}else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}},e.Block.prototype.setInputsInline=function(t){this.inputsInline!=t&&(e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this,"inline",null,this.inputsInline,t)),this.inputsInline=t)},e.Block.prototype.getInputsInline=function(){if(null!=this.inputsInline)return this.inputsInline;for(var t=1;t<this.inputList.length;t++)if(this.inputList[t-1].type==e.inputTypes.DUMMY&&this.inputList[t].type==e.inputTypes.DUMMY)return!1;for(t=1;t<this.inputList.length;t++)if(this.inputList[t-1].type==e.inputTypes.VALUE&&this.inputList[t].type==e.inputTypes.DUMMY)return!0;return!1},e.Block.prototype.setOutputShape=function(t){this.outputShape_=t},e.Block.prototype.getOutputShape=function(){return this.outputShape_},e.Block.prototype.isEnabled=function(){return!this.disabled},e.Block.prototype.setEnabled=function(t){this.isEnabled()!=t&&(e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this,"disabled",null,this.disabled,!t)),this.disabled=!t)},e.Block.prototype.getInheritedDisabled=function(){for(var t=this.getSurroundParent();t;){if(t.disabled)return!0;t=t.getSurroundParent()}return!1},e.Block.prototype.isCollapsed=function(){return this.collapsed_},e.Block.prototype.setCollapsed=function(t){this.collapsed_!=t&&(e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this,"collapsed",null,this.collapsed_,t)),this.collapsed_=t)},e.Block.prototype.toString=function(t,n){function r(ot){var et=ot.getCheck();return!et&&ot.targetConnection&&(et=ot.targetConnection.getCheck()),!!et&&(-1!=et.indexOf("Boolean")||-1!=et.indexOf("Number"))}function s(){x&&x.getType()==B.getType()&&x.getLocation()==B.getLocation()&&(x=null)}var u=[];n=n||"?";var b=e.ASTNode.NAVIGATE_ALL_FIELDS;e.ASTNode.NAVIGATE_ALL_FIELDS=!0;for(var x=e.ASTNode.createBlockNode(this),B=x;x;){switch(x.getType()){case e.ASTNode.types.INPUT:var Z=x.getLocation();x.in()?r(Z)&&u.push("("):u.push(n);break;case e.ASTNode.types.FIELD:(Z=x.getLocation()).name!=e.constants.COLLAPSED_FIELD_NAME&&u.push(Z.getText())}if(!(x=(Z=x).in()||Z.next())){for(x=Z.out(),s();x&&!x.next();)x=x.out(),s(),x&&x.getType()==e.ASTNode.types.INPUT&&r(x.getLocation())&&u.push(")");x&&(x=x.next())}}for(e.ASTNode.NAVIGATE_ALL_FIELDS=b,n=2;n<u.length;n++)"("==u[n-2]&&")"==u[n]&&(u[n-2]=u[n-1],u.splice(n-1,2));return u=(u=u.reduce(function(ot,et){return ot+("("==ot.substr(-1)||")"==et?"":" ")+et},"")).trim()||"???",t&&u.length>t&&(u=u.substring(0,t-3)+"..."),u},e.Block.prototype.appendValueInput=function(t){return this.appendInput_(e.inputTypes.VALUE,t)},e.Block.prototype.appendStatementInput=function(t){return this.appendInput_(e.inputTypes.STATEMENT,t)},e.Block.prototype.appendDummyInput=function(t){return this.appendInput_(e.inputTypes.DUMMY,t||"")},e.Block.prototype.jsonInit=function(t){var n=t.type?'Block "'+t.type+'": ':"";if(t.output&&t.previousStatement)throw Error(n+"Must not have both an output and a previousStatement.");if(t.style&&t.style.hat&&(this.hat=t.style.hat,t.style=null),t.style&&t.colour)throw Error(n+"Must not have both a colour and a style.");t.style?this.jsonInitStyle_(t,n):this.jsonInitColour_(t,n);for(var r=0;void 0!==t["message"+r];)this.interpolate_(t["message"+r],t["args"+r]||[],t["lastDummyAlign"+r],n),r++;if(void 0!==t.inputsInline&&this.setInputsInline(t.inputsInline),void 0!==t.output&&this.setOutput(!0,t.output),void 0!==t.outputShape&&this.setOutputShape(t.outputShape),void 0!==t.previousStatement&&this.setPreviousStatement(!0,t.previousStatement),void 0!==t.nextStatement&&this.setNextStatement(!0,t.nextStatement),void 0!==t.tooltip&&(r=e.utils.replaceMessageReferences(r=t.tooltip),this.setTooltip(r)),void 0!==t.enableContextMenu&&(this.contextMenu=!!(r=t.enableContextMenu)),void 0!==t.helpUrl&&(r=e.utils.replaceMessageReferences(r=t.helpUrl),this.setHelpUrl(r)),"string"==typeof t.extensions&&(console.warn(n+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+t.type+"' block."),t.extensions=[t.extensions]),void 0!==t.mutator&&e.Extensions.apply(t.mutator,this,!0),t=t.extensions,Array.isArray(t))for(n=0;n<t.length;++n)e.Extensions.apply(t[n],this,!1)},e.Block.prototype.jsonInitColour_=function(t,n){if("colour"in t)if(void 0===t.colour)console.warn(n+"Undefined colour value.");else{t=t.colour;try{this.setColour(t)}catch(r){console.warn(n+"Illegal colour value: ",t)}}},e.Block.prototype.jsonInitStyle_=function(t,n){t=t.style;try{this.setStyle(t)}catch(r){console.warn(n+"Style does not exist: ",t)}},e.Block.prototype.mixin=function(t,n){if(void 0!==n&&"boolean"!=typeof n)throw Error("opt_disableCheck must be a boolean if provided");if(!n){for(var r in n=[],t)void 0!==this[r]&&n.push(r);if(n.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(n))}e.utils.object.mixin(this,t)},e.Block.prototype.interpolate_=function(t,n,r,s){t=e.utils.tokenizeInterpolation(t),this.validateTokens_(t,n.length),n=this.interpolateArguments_(t,n,r),r=[],t=0;for(var u;u=n[t];t++)if(this.isInputKeyword_(u.type)){if(u=this.inputFromJson_(u,s)){for(var x,b=0;x=r[b];b++)u.appendField(x[0],x[1]);r.length=0}}else(b=this.fieldFromJson_(u))&&r.push([b,u.name])},e.Block.prototype.validateTokens_=function(t,n){for(var r=[],s=0,u=0;u<t.length;u++){var b=t[u];if("number"==typeof b){if(1>b||b>n)throw Error('Block "'+this.type+'": Message index %'+b+" out of range.");if(r[b])throw Error('Block "'+this.type+'": Message index %'+b+" duplicated.");r[b]=!0,s++}}if(s!=n)throw Error('Block "'+this.type+'": Message does not reference all '+n+" arg(s).")},e.Block.prototype.interpolateArguments_=function(t,n,r){for(var s=[],u=0;u<t.length;u++){var b=t[u];"number"==typeof b&&(b=n[b-1]),("string"!=typeof b||(b=this.stringToFieldJson_(b)))&&s.push(b)}return(t=s.length)&&!this.isInputKeyword_(s[t-1].type)&&(t={type:"input_dummy"},r&&(t.align=r),s.push(t)),s},e.Block.prototype.fieldFromJson_=function(t){var n=e.fieldRegistry.fromJson(t);return!n&&t.alt?"string"==typeof t.alt?(t=this.stringToFieldJson_(t.alt))?this.fieldFromJson_(t):null:this.fieldFromJson_(t.alt):n},e.Block.prototype.inputFromJson_=function(t,n){var r={LEFT:e.constants.ALIGN.LEFT,RIGHT:e.constants.ALIGN.RIGHT,CENTRE:e.constants.ALIGN.CENTRE,CENTER:e.constants.ALIGN.CENTRE},s=null;switch(t.type){case"input_value":s=this.appendValueInput(t.name);break;case"input_statement":s=this.appendStatementInput(t.name);break;case"input_dummy":s=this.appendDummyInput(t.name)}return s?(t.check&&s.setCheck(t.check),t.align&&(void 0===(r=r[t.align.toUpperCase()])?console.warn(n+"Illegal align value: ",t.align):s.setAlign(r)),s):null},e.Block.prototype.isInputKeyword_=function(t){return"input_value"==t||"input_statement"==t||"input_dummy"==t},e.Block.prototype.stringToFieldJson_=function(t){return(t=t.trim())?{type:"field_label",text:t}:null},e.Block.prototype.appendInput_=function(t,n){var r=null;return(t==e.inputTypes.VALUE||t==e.inputTypes.STATEMENT)&&(r=this.makeConnection_(t)),t==e.inputTypes.STATEMENT&&this.statementInputCount++,t=new e.Input(t,n,this,r),this.inputList.push(t),t},e.Block.prototype.moveInputBefore=function(t,n){if(t!=n){for(var b,r=-1,s=n?-1:this.inputList.length,u=0;b=this.inputList[u];u++)if(b.name==t){if(r=u,-1!=s)break}else if(n&&b.name==n&&(s=u,-1!=r))break;if(-1==r)throw Error('Named input "'+t+'" not found.');if(-1==s)throw Error('Reference input "'+n+'" not found.');this.moveNumberedInputBefore(r,s)}},e.Block.prototype.moveNumberedInputBefore=function(t,n){if(t==n)throw Error("Can't move input to itself.");if(t>=this.inputList.length)throw RangeError("Input index "+t+" out of bounds.");if(n>this.inputList.length)throw RangeError("Reference input "+n+" out of bounds.");var r=this.inputList[t];this.inputList.splice(t,1),t<n&&n--,this.inputList.splice(n,0,r)},e.Block.prototype.removeInput=function(t,n){for(var s,r=0;s=this.inputList[r];r++)if(s.name==t)return s.type==e.inputTypes.STATEMENT&&this.statementInputCount--,s.dispose(),this.inputList.splice(r,1),!0;if(n)return!1;throw Error("Input not found: "+t)},e.Block.prototype.getInput=function(t){for(var r,n=0;r=this.inputList[n];n++)if(r.name==t)return r;return null},e.Block.prototype.getInputTargetBlock=function(t){return(t=this.getInput(t))&&t.connection&&t.connection.targetBlock()},e.Block.prototype.getCommentText=function(){return this.commentModel.text},e.Block.prototype.setCommentText=function(t){this.commentModel.text!=t&&(e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this,"comment",null,this.commentModel.text,t)),this.comment=this.commentModel.text=t)},e.Block.prototype.setWarningText=function(t,n){},e.Block.prototype.setMutator=function(t){},e.Block.prototype.getRelativeToSurfaceXY=function(){return this.xy_},e.Block.prototype.moveBy=function(t,n){if(this.parentBlock_)throw Error("Block has parent.");var r=new(e.Events.get(e.Events.BLOCK_MOVE))(this);this.xy_.translate(t,n),r.recordNew(),e.Events.fire(r)},e.Block.prototype.makeConnection_=function(t){return new e.Connection(this,t)},e.Block.prototype.allInputsFilled=function(t){if(void 0===t&&(t=!0),!t&&this.isShadow())return!1;for(var r,n=0;r=this.inputList[n];n++)if(r.connection&&(!(r=r.connection.targetBlock())||!r.allInputsFilled(t)))return!1;return!(n=this.getNextBlock())||n.allInputsFilled(t)},e.Block.prototype.toDevString=function(){var t=this.type?'"'+this.type+'" block':"Block";return this.id&&(t+=' (id="'+this.id+'")'),t},e.blockRendering.IPathObject=function(t,n){},e.utils.KeyCodes={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PLUS_SIGN:43,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,FF_DASH:173,FF_HASH:163,QUESTION_MARK:63,AT_SIGN:64,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,MAC_WK_CMD_LEFT:91,MAC_WK_CMD_RIGHT:93,WIN_IME:229,VK_NONAME:252,PHANTOM:255},e.Menu=function(){this.menuItems_=[],this.roleName_=this.element_=this.onKeyDownHandler_=this.mouseLeaveHandler_=this.mouseEnterHandler_=this.clickHandler_=this.mouseOverHandler_=this.highlightedItem_=this.openingCoords=null},e.Menu.prototype.addChild=function(t){this.menuItems_.push(t)},e.Menu.prototype.render=function(t){var n=document.createElement("div");n.className="blocklyMenu goog-menu blocklyNonSelectable",n.tabIndex=0,this.roleName_&&e.utils.aria.setRole(n,this.roleName_),this.element_=n;for(var s,r=0;s=this.menuItems_[r];r++)n.appendChild(s.createDom());this.mouseOverHandler_=e.browserEvents.conditionalBind(n,"mouseover",this,this.handleMouseOver_,!0),this.clickHandler_=e.browserEvents.conditionalBind(n,"click",this,this.handleClick_,!0),this.mouseEnterHandler_=e.browserEvents.conditionalBind(n,"mouseenter",this,this.handleMouseEnter_,!0),this.mouseLeaveHandler_=e.browserEvents.conditionalBind(n,"mouseleave",this,this.handleMouseLeave_,!0),this.onKeyDownHandler_=e.browserEvents.conditionalBind(n,"keydown",this,this.handleKeyEvent_),t.appendChild(n)},e.Menu.prototype.getElement=function(){return this.element_},e.Menu.prototype.focus=function(){var t=this.getElement();t&&(t.focus({preventScroll:!0}),e.utils.dom.addClass(t,"blocklyFocused"))},e.Menu.prototype.blur_=function(){var t=this.getElement();t&&(t.blur(),e.utils.dom.removeClass(t,"blocklyFocused"))},e.Menu.prototype.setRole=function(t){this.roleName_=t},e.Menu.prototype.dispose=function(){this.mouseOverHandler_&&(e.browserEvents.unbind(this.mouseOverHandler_),this.mouseOverHandler_=null),this.clickHandler_&&(e.browserEvents.unbind(this.clickHandler_),this.clickHandler_=null),this.mouseEnterHandler_&&(e.browserEvents.unbind(this.mouseEnterHandler_),this.mouseEnterHandler_=null),this.mouseLeaveHandler_&&(e.browserEvents.unbind(this.mouseLeaveHandler_),this.mouseLeaveHandler_=null),this.onKeyDownHandler_&&(e.browserEvents.unbind(this.onKeyDownHandler_),this.onKeyDownHandler_=null);for(var n,t=0;n=this.menuItems_[t];t++)n.dispose();this.element_=null},e.Menu.prototype.getMenuItem_=function(t){for(var n=this.getElement();t&&t!=n;){if(e.utils.dom.hasClass(t,"blocklyMenuItem"))for(var s,r=0;s=this.menuItems_[r];r++)if(s.getElement()==t)return s;t=t.parentElement}return null},e.Menu.prototype.setHighlighted=function(t){var n=this.highlightedItem_;n&&(n.setHighlighted(!1),this.highlightedItem_=null),t&&(t.setHighlighted(!0),this.highlightedItem_=t,n=this.getElement(),e.utils.style.scrollIntoContainerView(t.getElement(),n),e.utils.aria.setState(n,e.utils.aria.State.ACTIVEDESCENDANT,t.getId()))},e.Menu.prototype.highlightNext=function(){var t=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(t,1)},e.Menu.prototype.highlightPrevious=function(){var t=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(0>t?this.menuItems_.length:t,-1)},e.Menu.prototype.highlightFirst_=function(){this.highlightHelper_(-1,1)},e.Menu.prototype.highlightLast_=function(){this.highlightHelper_(this.menuItems_.length,-1)},e.Menu.prototype.highlightHelper_=function(t,n){t+=n;for(var r;r=this.menuItems_[t];){if(r.isEnabled()){this.setHighlighted(r);break}t+=n}},e.Menu.prototype.handleMouseOver_=function(t){(t=this.getMenuItem_(t.target))&&(t.isEnabled()?this.highlightedItem_!=t&&this.setHighlighted(t):this.setHighlighted(null))},e.Menu.prototype.handleClick_=function(t){var n=this.openingCoords;if(this.openingCoords=null,n&&"number"==typeof t.clientX){var r=new e.utils.Coordinate(t.clientX,t.clientY);if(1>e.utils.Coordinate.distance(n,r))return}(t=this.getMenuItem_(t.target))&&t.performAction()},e.Menu.prototype.handleMouseEnter_=function(t){this.focus()},e.Menu.prototype.handleMouseLeave_=function(t){this.getElement()&&(this.blur_(),this.setHighlighted(null))},e.Menu.prototype.handleKeyEvent_=function(t){if(this.menuItems_.length&&!(t.shiftKey||t.ctrlKey||t.metaKey||t.altKey)){var n=this.highlightedItem_;switch(t.keyCode){case e.utils.KeyCodes.ENTER:case e.utils.KeyCodes.SPACE:n&&n.performAction();break;case e.utils.KeyCodes.UP:this.highlightPrevious();break;case e.utils.KeyCodes.DOWN:this.highlightNext();break;case e.utils.KeyCodes.PAGE_UP:case e.utils.KeyCodes.HOME:this.highlightFirst_();break;case e.utils.KeyCodes.PAGE_DOWN:case e.utils.KeyCodes.END:this.highlightLast_();break;default:return}t.preventDefault(),t.stopPropagation()}},e.Menu.prototype.getSize=function(){var t=this.getElement(),n=e.utils.style.getSize(t);return n.height=t.scrollHeight,n},e.MenuItem=function(t,n){this.content_=t,this.value_=n,this.enabled_=!0,this.element_=null,this.rightToLeft_=!1,this.roleName_=null,this.highlight_=this.checked_=this.checkable_=!1,this.actionHandler_=null},e.MenuItem.prototype.createDom=function(){var t=document.createElement("div");t.id=e.utils.IdGenerator.getNextUniqueId(),this.element_=t,t.className="blocklyMenuItem goog-menuitem "+(this.enabled_?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked_?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight_?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft_?"blocklyMenuItemRtl goog-menuitem-rtl ":"");var n=document.createElement("div");if(n.className="blocklyMenuItemContent goog-menuitem-content",this.checkable_){var r=document.createElement("div");r.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",n.appendChild(r)}return r=this.content_,"string"==typeof this.content_&&(r=document.createTextNode(this.content_)),n.appendChild(r),t.appendChild(n),this.roleName_&&e.utils.aria.setRole(t,this.roleName_),e.utils.aria.setState(t,e.utils.aria.State.SELECTED,this.checkable_&&this.checked_||!1),e.utils.aria.setState(t,e.utils.aria.State.DISABLED,!this.enabled_),t},e.MenuItem.prototype.dispose=function(){this.element_=null},e.MenuItem.prototype.getElement=function(){return this.element_},e.MenuItem.prototype.getId=function(){return this.element_.id},e.MenuItem.prototype.getValue=function(){return this.value_},e.MenuItem.prototype.setRightToLeft=function(t){this.rightToLeft_=t},e.MenuItem.prototype.setRole=function(t){this.roleName_=t},e.MenuItem.prototype.setCheckable=function(t){this.checkable_=t},e.MenuItem.prototype.setChecked=function(t){this.checked_=t},e.MenuItem.prototype.setHighlighted=function(t){this.highlight_=t;var n=this.getElement();n&&this.isEnabled()&&(t?(e.utils.dom.addClass(n,"blocklyMenuItemHighlight"),e.utils.dom.addClass(n,"goog-menuitem-highlight")):(e.utils.dom.removeClass(n,"blocklyMenuItemHighlight"),e.utils.dom.removeClass(n,"goog-menuitem-highlight")))},e.MenuItem.prototype.isEnabled=function(){return this.enabled_},e.MenuItem.prototype.setEnabled=function(t){this.enabled_=t},e.MenuItem.prototype.performAction=function(){this.isEnabled()&&this.actionHandler_&&this.actionHandler_(this)},e.MenuItem.prototype.onAction=function(t,n){this.actionHandler_=t.bind(n)},e.ContextMenu={},e.ContextMenu.currentBlock=null,e.ContextMenu.menu_=null,e.ContextMenu.show=function(t,n,r){if(e.WidgetDiv.show(e.ContextMenu,r,e.ContextMenu.dispose),n.length){var s=e.ContextMenu.populate_(n,r);e.ContextMenu.menu_=s,e.ContextMenu.position_(s,t,r),setTimeout(function(){s.focus()},1),e.ContextMenu.currentBlock=null}else e.ContextMenu.hide()},e.ContextMenu.populate_=function(t,n){var r=new e.Menu;r.setRole(e.utils.aria.Role.MENU);for(var u,s=0;u=t[s];s++){var b=new e.MenuItem(u.text);b.setRightToLeft(n),b.setRole(e.utils.aria.Role.MENUITEM),r.addChild(b),b.setEnabled(u.enabled),u.enabled&&b.onAction(function(x){e.ContextMenu.hide(),this.callback(this.scope)},u)}return r},e.ContextMenu.position_=function(t,n,r){var s=e.utils.getViewportBBox();n=new e.utils.Rect(n.clientY+s.top,n.clientY+s.top,n.clientX+s.left,n.clientX+s.left),e.ContextMenu.createWidget_(t);var u=t.getSize();r&&(n.left+=u.width,n.right+=u.width,s.left+=u.width,s.right+=u.width),e.WidgetDiv.positionWithAnchor(s,n,u,r),t.focus()},e.ContextMenu.createWidget_=function(t){t.render(e.WidgetDiv.DIV);var n=t.getElement();e.utils.dom.addClass(n,"blocklyContextMenu"),e.browserEvents.conditionalBind(n,"contextmenu",null,e.utils.noEvent),t.focus()},e.ContextMenu.hide=function(){e.WidgetDiv.hideIfOwner(e.ContextMenu),e.ContextMenu.currentBlock=null},e.ContextMenu.dispose=function(){e.ContextMenu.menu_&&(e.ContextMenu.menu_.dispose(),e.ContextMenu.menu_=null)},e.ContextMenu.callbackFactory=function(t,n){return function(){e.Events.disable();try{var r=e.Xml.domToBlock(n,t.workspace),s=t.getRelativeToSurfaceXY();s.x=t.RTL?s.x-e.SNAP_RADIUS:s.x+e.SNAP_RADIUS,s.y+=2*e.SNAP_RADIUS,r.moveBy(s.x,s.y)}finally{e.Events.enable()}e.Events.isEnabled()&&!r.isShadow()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CREATE))(r)),r.select()}},e.ContextMenu.commentDeleteOption=function(t){return{text:e.Msg.REMOVE_COMMENT,enabled:!0,callback:function(){e.Events.setGroup(!0),t.dispose(!0,!0),e.Events.setGroup(!1)}}},e.ContextMenu.commentDuplicateOption=function(t){return{text:e.Msg.DUPLICATE_COMMENT,enabled:!0,callback:function(){e.duplicate(t)}}},e.ContextMenu.workspaceCommentOption=function(t,n){if(!e.WorkspaceCommentSvg)throw Error("Missing require for Blockly.WorkspaceCommentSvg");var r={enabled:!e.utils.userAgent.IE};return r.text=e.Msg.ADD_COMMENT,r.callback=function(){var s=new e.WorkspaceCommentSvg(t,e.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT,e.WorkspaceCommentSvg.DEFAULT_SIZE,e.WorkspaceCommentSvg.DEFAULT_SIZE),u=t.getInjectionDiv().getBoundingClientRect();u=new e.utils.Coordinate(n.clientX-u.left,n.clientY-u.top);var b=t.getOriginOffsetInPixels();(u=e.utils.Coordinate.difference(u,b)).scale(1/t.scale),s.moveBy(u.x,u.y),t.rendered&&(s.initSvg(),s.render(),s.select())},r},e.ContextMenuRegistry=function(){e.ContextMenuRegistry.registry=this,this.registry_=Object.create(null)},e.ContextMenuRegistry.ScopeType={BLOCK:"block",WORKSPACE:"workspace"},e.ContextMenuRegistry.registry=null,e.ContextMenuRegistry.prototype.register=function(t){if(this.registry_[t.id])throw Error('Menu item with ID "'+t.id+'" is already registered.');this.registry_[t.id]=t},e.ContextMenuRegistry.prototype.unregister=function(t){if(!this.registry_[t])throw Error('Menu item with ID "'+t+'" not found.');delete this.registry_[t]},e.ContextMenuRegistry.prototype.getItem=function(t){return this.registry_[t]||null},e.ContextMenuRegistry.prototype.getContextMenuOptions=function(t,n){var r=[],s=this.registry_;return Object.keys(s).forEach(function(u){if(t==(u=s[u]).scopeType){var b=u.preconditionFn(n);"hidden"!=b&&(u={text:"function"==typeof u.displayText?u.displayText(n):u.displayText,enabled:"enabled"==b,callback:u.callback,scope:n,weight:u.weight},r.push(u))}}),r.sort(function(u,b){return u.weight-b.weight}),r},new e.ContextMenuRegistry,e.Events.Selected=function(t,n,r){e.Events.Selected.superClass_.constructor.call(this,r),this.oldElementId=t,this.newElementId=n},e.utils.object.inherits(e.Events.Selected,e.Events.UiBase),e.Events.Selected.prototype.type=e.Events.SELECTED,e.Events.Selected.prototype.toJson=function(){var t=e.Events.Selected.superClass_.toJson.call(this);return t.oldElementId=this.oldElementId,t.newElementId=this.newElementId,t},e.Events.Selected.prototype.fromJson=function(t){e.Events.Selected.superClass_.fromJson.call(this,t),this.oldElementId=t.oldElementId,this.newElementId=t.newElementId},e.registry.register(e.registry.Type.EVENT,e.Events.SELECTED,e.Events.Selected),e.IBoundedElement=function(){},e.ICopyable=function(){},e.RenderedConnection=function(t,n){e.RenderedConnection.superClass_.constructor.call(this,t,n),this.db_=t.workspace.connectionDBList[n],this.dbOpposite_=t.workspace.connectionDBList[e.OPPOSITE_TYPE[n]],this.offsetInBlock_=new e.utils.Coordinate(0,0),this.trackedState_=e.RenderedConnection.TrackedState.WILL_TRACK,this.targetConnection=null},e.utils.object.inherits(e.RenderedConnection,e.Connection),e.RenderedConnection.TrackedState={WILL_TRACK:-1,UNTRACKED:0,TRACKED:1},e.RenderedConnection.prototype.dispose=function(){e.RenderedConnection.superClass_.dispose.call(this),this.trackedState_==e.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y)},e.RenderedConnection.prototype.getSourceBlock=function(){return e.RenderedConnection.superClass_.getSourceBlock.call(this)},e.RenderedConnection.prototype.targetBlock=function(){return e.RenderedConnection.superClass_.targetBlock.call(this)},e.RenderedConnection.prototype.distanceFrom=function(t){var n=this.x-t.x;return t=this.y-t.y,Math.sqrt(n*n+t*t)},e.RenderedConnection.prototype.bumpAwayFrom=function(t){if(!this.sourceBlock_.workspace.isDragging()){var n=this.sourceBlock_.getRootBlock();if(!n.isInFlyout){var r=!1;if(!n.isMovable()){if(!(n=t.getSourceBlock().getRootBlock()).isMovable())return;t=this,r=!0}var s=e.selected==n;s||n.addSelect();var u=t.x+e.SNAP_RADIUS+Math.floor(Math.random()*e.BUMP_RANDOMNESS)-this.x,b=t.y+e.SNAP_RADIUS+Math.floor(Math.random()*e.BUMP_RANDOMNESS)-this.y;r&&(b=-b),n.RTL&&(u=t.x-e.SNAP_RADIUS-Math.floor(Math.random()*e.BUMP_RANDOMNESS)-this.x),n.moveBy(u,b),s||n.removeSelect()}}},e.RenderedConnection.prototype.moveTo=function(t,n){this.trackedState_==e.RenderedConnection.TrackedState.WILL_TRACK?(this.db_.addConnection(this,n),this.trackedState_=e.RenderedConnection.TrackedState.TRACKED):this.trackedState_==e.RenderedConnection.TrackedState.TRACKED&&(this.db_.removeConnection(this,this.y),this.db_.addConnection(this,n)),this.x=t,this.y=n},e.RenderedConnection.prototype.moveBy=function(t,n){this.moveTo(this.x+t,this.y+n)},e.RenderedConnection.prototype.moveToOffset=function(t){this.moveTo(t.x+this.offsetInBlock_.x,t.y+this.offsetInBlock_.y)},e.RenderedConnection.prototype.setOffsetInBlock=function(t,n){this.offsetInBlock_.x=t,this.offsetInBlock_.y=n},e.RenderedConnection.prototype.getOffsetInBlock=function(){return this.offsetInBlock_},e.RenderedConnection.prototype.tighten=function(){var t=this.targetConnection.x-this.x,n=this.targetConnection.y-this.y;if(0!=t||0!=n){var r=this.targetBlock(),s=r.getSvgRoot();if(!s)throw Error("block is not rendered.");s=e.utils.getRelativeXY(s),r.getSvgRoot().setAttribute("transform","translate("+(s.x-t)+","+(s.y-n)+")"),r.moveConnections(-t,-n)}},e.RenderedConnection.prototype.closest=function(t,n){return this.dbOpposite_.searchForClosest(this,t,n)},e.RenderedConnection.prototype.highlight=function(){var t=this.sourceBlock_.workspace.getRenderer().getConstants(),n=t.shapeFor(this);n=this.type==e.connectionTypes.INPUT_VALUE||this.type==e.connectionTypes.OUTPUT_VALUE?e.utils.svgPaths.moveBy(0,-(t=t.TAB_OFFSET_FROM_TOP))+e.utils.svgPaths.lineOnAxis("v",t)+n.pathDown+e.utils.svgPaths.lineOnAxis("v",t):e.utils.svgPaths.moveBy(-(t=t.NOTCH_OFFSET_LEFT-t.CORNER_RADIUS),0)+e.utils.svgPaths.lineOnAxis("h",t)+n.pathLeft+e.utils.svgPaths.lineOnAxis("h",t),t=this.sourceBlock_.getRelativeToSurfaceXY(),e.Connection.highlightedPath_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyHighlightedConnectionPath",d:n,transform:"translate("+(this.x-t.x)+","+(this.y-t.y)+")"+(this.sourceBlock_.RTL?" scale(-1 1)":"")},this.sourceBlock_.getSvgRoot())},e.RenderedConnection.prototype.unhighlight=function(){e.utils.dom.removeNode(e.Connection.highlightedPath_),delete e.Connection.highlightedPath_},e.RenderedConnection.prototype.setTracking=function(t){t&&this.trackedState_==e.RenderedConnection.TrackedState.TRACKED||!t&&this.trackedState_==e.RenderedConnection.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(t?(this.db_.addConnection(this,this.y),this.trackedState_=e.RenderedConnection.TrackedState.TRACKED):(this.trackedState_==e.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y),this.trackedState_=e.RenderedConnection.TrackedState.UNTRACKED))},e.RenderedConnection.prototype.stopTrackingAll=function(){if(this.setTracking(!1),this.targetConnection)for(var t=this.targetBlock().getDescendants(!1),n=0;n<t.length;n++){for(var r=t[n],s=r.getConnections_(!0),u=0;u<s.length;u++)s[u].setTracking(!1);for(r=r.getIcons(),u=0;u<r.length;u++)r[u].setVisible(!1)}},e.RenderedConnection.prototype.startTrackingAll=function(){this.setTracking(!0);var t=[];if(this.type!=e.connectionTypes.INPUT_VALUE&&this.type!=e.connectionTypes.NEXT_STATEMENT)return t;var n=this.targetBlock();if(n){if(n.isCollapsed()){var r=[];n.outputConnection&&r.push(n.outputConnection),n.nextConnection&&r.push(n.nextConnection),n.previousConnection&&r.push(n.previousConnection)}else r=n.getConnections_(!0);for(var s=0;s<r.length;s++)t.push.apply(t,r[s].startTrackingAll());t.length||(t[0]=n)}return t},e.RenderedConnection.prototype.isConnectionAllowed=function(t,n){return e.utils.deprecation.warn("RenderedConnection.prototype.isConnectionAllowed","July 2020","July 2021","Blockly.Workspace.prototype.getConnectionChecker().canConnect"),!(this.distanceFrom(t)>n)&&e.RenderedConnection.superClass_.isConnectionAllowed.call(this,t)},e.RenderedConnection.prototype.onFailedConnect=function(t){var n=this.getSourceBlock();if(e.Events.recordUndo){var r=e.Events.getGroup();setTimeout(function(){n.isDisposed()||n.getParent()||(e.Events.setGroup(r),this.bumpAwayFrom(t),e.Events.setGroup(!1))}.bind(this),e.BUMP_DELAY)}},e.RenderedConnection.prototype.disconnectInternal_=function(t,n){e.RenderedConnection.superClass_.disconnectInternal_.call(this,t,n),t.rendered&&t.render(),n.rendered&&(n.updateDisabled(),n.render(),n.getSvgRoot().style.display="block")},e.RenderedConnection.prototype.respawnShadow_=function(){e.RenderedConnection.superClass_.respawnShadow_.call(this);var t=this.targetBlock();t&&(t.initSvg(),t.render(!1),(t=this.getSourceBlock()).rendered&&t.render())},e.RenderedConnection.prototype.neighbours=function(t){return this.dbOpposite_.getNeighbours(this,t)},e.RenderedConnection.prototype.connect_=function(t){e.RenderedConnection.superClass_.connect_.call(this,t);var n=this.getSourceBlock();t=t.getSourceBlock();var r=n.rendered,s=t.rendered;r&&n.updateDisabled(),s&&t.updateDisabled(),r&&s&&(this.type==e.connectionTypes.NEXT_STATEMENT||this.type==e.connectionTypes.PREVIOUS_STATEMENT?t.render():n.render()),(n=n.getInputWithBlock(t))&&(n=n.isVisible(),t.getSvgRoot().style.display=n?"block":"none")},e.RenderedConnection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||((this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug(),this.sourceBlock_.bumpNeighbours())},e.BasicCursor=function(){e.BasicCursor.superClass_.constructor.call(this)},e.utils.object.inherits(e.BasicCursor,e.Cursor),e.BasicCursor.registrationName="basicCursor",e.BasicCursor.prototype.next=function(){var t=this.getCurNode();return t?((t=this.getNextNode_(t,this.validNode_))&&this.setCurNode(t),t):null},e.BasicCursor.prototype.in=function(){return this.next()},e.BasicCursor.prototype.prev=function(){var t=this.getCurNode();return t?((t=this.getPreviousNode_(t,this.validNode_))&&this.setCurNode(t),t):null},e.BasicCursor.prototype.out=function(){return this.prev()},e.BasicCursor.prototype.getNextNode_=function(t,n){if(!t)return null;var r=t.in()||t.next();return n(r)?r:r?this.getNextNode_(r,n):n(t=this.findSiblingOrParent_(t.out()))?t:t?this.getNextNode_(t,n):null},e.BasicCursor.prototype.getPreviousNode_=function(t,n){if(!t)return null;var r=t.prev();return n(r=r?this.getRightMostChild_(r):t.out())?r:r?this.getPreviousNode_(r,n):null},e.BasicCursor.prototype.validNode_=function(t){var n=!1;return((t=t&&t.getType())==e.ASTNode.types.OUTPUT||t==e.ASTNode.types.INPUT||t==e.ASTNode.types.FIELD||t==e.ASTNode.types.NEXT||t==e.ASTNode.types.PREVIOUS||t==e.ASTNode.types.WORKSPACE)&&(n=!0),n},e.BasicCursor.prototype.findSiblingOrParent_=function(t){return t?t.next()||this.findSiblingOrParent_(t.out()):null},e.BasicCursor.prototype.getRightMostChild_=function(t){if(!t.in())return t;for(t=t.in();t.next();)t=t.next();return this.getRightMostChild_(t)},e.registry.register(e.registry.Type.CURSOR,e.BasicCursor.registrationName,e.BasicCursor),e.TabNavigateCursor=function(){e.TabNavigateCursor.superClass_.constructor.call(this)},e.utils.object.inherits(e.TabNavigateCursor,e.BasicCursor),e.TabNavigateCursor.prototype.validNode_=function(t){var n=!1,r=t&&t.getType();return t&&(t=t.getLocation(),r==e.ASTNode.types.FIELD&&t&&t.isTabNavigable()&&t.isClickable()&&(n=!0)),n},e.BlockSvg=function(t,n,r){this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},null),this.svgGroup_.translate_="",this.style=t.getRenderer().getConstants().getBlockStyle(null),this.pathObject=t.getRenderer().makePathObject(this.svgGroup_,this.style),this.renderIsInProgress_=this.rendered=!1,this.workspace=t,this.previousConnection=this.nextConnection=this.outputConnection=null,this.useDragSurface_=e.utils.is3dSupported()&&!!t.getBlockDragSurface();var s=this.pathObject.svgPath;s.tooltip=this,e.Tooltip.bindMouseEvents(s),e.BlockSvg.superClass_.constructor.call(this,t,n,r),this.svgGroup_.dataset?this.svgGroup_.dataset.id=this.id:e.utils.userAgent.IE&&this.svgGroup_.setAttribute("data-id",this.id)},e.utils.object.inherits(e.BlockSvg,e.Block),e.BlockSvg.prototype.height=0,e.BlockSvg.prototype.width=0,e.BlockSvg.prototype.warningTextDb_=null,e.BlockSvg.INLINE=-1,e.BlockSvg.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_",e.BlockSvg.prototype.initSvg=function(){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");for(var n,t=0;n=this.inputList[t];t++)n.init();for(n=this.getIcons(),t=0;t<n.length;t++)n[t].createIcon();this.applyColour(),this.pathObject.updateMovable(this.isMovable()),t=this.getSvgRoot(),this.workspace.options.readOnly||this.eventsInit_||!t||e.browserEvents.conditionalBind(t,"mousedown",this,this.onMouseDown_),this.eventsInit_=!0,t.parentNode||this.workspace.getCanvas().appendChild(t)},e.BlockSvg.prototype.getColourSecondary=function(){return this.style.colourSecondary},e.BlockSvg.prototype.getColourTertiary=function(){return this.style.colourTertiary},e.BlockSvg.prototype.getColourShadow=function(){return e.utils.deprecation.warn("BlockSvg.prototype.getColourShadow","January 2020","January 2021","style.colourSecondary"),this.getColourSecondary()},e.BlockSvg.prototype.getColourBorder=function(){return e.utils.deprecation.warn("BlockSvg.prototype.getColourBorder","January 2020","January 2021","style.colourTertiary"),{colourBorder:this.getColourTertiary(),colourLight:null,colourDark:null}},e.BlockSvg.prototype.select=function(){if(this.isShadow()&&this.getParent())this.getParent().select();else if(e.selected!=this){var t=null;if(e.selected){t=e.selected.id,e.Events.disable();try{e.selected.unselect()}finally{e.Events.enable()}}t=new(e.Events.get(e.Events.SELECTED))(t,this.id,this.workspace.id),e.Events.fire(t),e.selected=this,this.addSelect()}},e.BlockSvg.prototype.unselect=function(){if(e.selected==this){var t=new(e.Events.get(e.Events.SELECTED))(this.id,null,this.workspace.id);t.workspaceId=this.workspace.id,e.Events.fire(t),e.selected=null,this.removeSelect()}},e.BlockSvg.prototype.mutator=null,e.BlockSvg.prototype.comment=null,e.BlockSvg.prototype.commentIcon_=null,e.BlockSvg.prototype.warning=null,e.BlockSvg.prototype.getIcons=function(){var t=[];return this.mutator&&t.push(this.mutator),this.commentIcon_&&t.push(this.commentIcon_),this.warning&&t.push(this.warning),t},e.BlockSvg.prototype.setParent=function(t){var n=this.parentBlock_;if(t!=n){e.utils.dom.startTextWidthCache(),e.BlockSvg.superClass_.setParent.call(this,t),e.utils.dom.stopTextWidthCache();var r=this.getSvgRoot();if(!this.workspace.isClearing&&r){var s=this.getRelativeToSurfaceXY();t?(t.getSvgRoot().appendChild(r),t=this.getRelativeToSurfaceXY(),this.moveConnections(t.x-s.x,t.y-s.y)):n&&(this.workspace.getCanvas().appendChild(r),this.translate(s.x,s.y)),this.applyColour()}}},e.BlockSvg.prototype.getRelativeToSurfaceXY=function(){var t=0,n=0,r=this.useDragSurface_?this.workspace.getBlockDragSurface().getGroup():null,s=this.getSvgRoot();if(s)do{var u=e.utils.getRelativeXY(s);t+=u.x,n+=u.y,this.useDragSurface_&&this.workspace.getBlockDragSurface().getCurrentBlock()==s&&(t+=(u=this.workspace.getBlockDragSurface().getSurfaceTranslation()).x,n+=u.y),s=s.parentNode}while(s&&s!=this.workspace.getCanvas()&&s!=r);return new e.utils.Coordinate(t,n)},e.BlockSvg.prototype.moveBy=function(t,n){if(this.parentBlock_)throw Error("Block has parent.");var r=e.Events.isEnabled();if(r)var s=new(e.Events.get(e.Events.BLOCK_MOVE))(this);var u=this.getRelativeToSurfaceXY();this.translate(u.x+t,u.y+n),this.moveConnections(t,n),r&&(s.recordNew(),e.Events.fire(s)),this.workspace.resizeContents()},e.BlockSvg.prototype.translate=function(t,n){this.getSvgRoot().setAttribute("transform","translate("+t+","+n+")")},e.BlockSvg.prototype.moveToDragSurface=function(){if(this.useDragSurface_){var t=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.getBlockDragSurface().translateSurface(t.x,t.y),(t=this.getSvgRoot())&&this.workspace.getBlockDragSurface().setBlocksAndShow(t)}},e.BlockSvg.prototype.moveTo=function(t){var n=this.getRelativeToSurfaceXY();this.moveBy(t.x-n.x,t.y-n.y)},e.BlockSvg.prototype.moveOffDragSurface=function(t){this.useDragSurface_&&(this.translate(t.x,t.y),this.workspace.getBlockDragSurface().clearAndHide(this.workspace.getCanvas()))},e.BlockSvg.prototype.moveDuringDrag=function(t){this.useDragSurface_?this.workspace.getBlockDragSurface().translateSurface(t.x,t.y):(this.svgGroup_.translate_="translate("+t.x+","+t.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))},e.BlockSvg.prototype.clearTransformAttributes_=function(){this.getSvgRoot().removeAttribute("transform")},e.BlockSvg.prototype.snapToGrid=function(){if(this.workspace&&!this.workspace.isDragging()&&!this.getParent()&&!this.isInFlyout){var t=this.workspace.getGrid();if(t&&t.shouldSnap()){var n=t.getSpacing(),r=n/2,s=this.getRelativeToSurfaceXY();t=Math.round((s.x-r)/n)*n+r-s.x,n=Math.round((s.y-r)/n)*n+r-s.y,t=Math.round(t),n=Math.round(n),0==t&&0==n||this.moveBy(t,n)}}},e.BlockSvg.prototype.getBoundingRectangle=function(){var t=this.getRelativeToSurfaceXY(),n=this.getHeightWidth();if(this.RTL)var r=t.x-n.width,s=t.x;else r=t.x,s=t.x+n.width;return new e.utils.Rect(t.y,t.y+n.height,r,s)},e.BlockSvg.prototype.markDirty=function(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(var n,t=0;n=this.inputList[t];t++)n.markDirty()},e.BlockSvg.prototype.setCollapsed=function(t){this.collapsed_!=t&&(e.BlockSvg.superClass_.setCollapsed.call(this,t),t?this.rendered&&this.render():this.updateCollapsed_())},e.BlockSvg.prototype.updateCollapsed_=function(){for(var u,t=this.isCollapsed(),n=e.constants.COLLAPSED_INPUT_NAME,r=e.constants.COLLAPSED_FIELD_NAME,s=0;u=this.inputList[s];s++)u.name!=n&&u.setVisible(!t);if(t){for(u=this.getIcons(),s=0;t=u[s];s++)t.setVisible(!1);s=this.toString(e.COLLAPSE_CHARS),(u=this.getField(r))?u.setValue(s):(u=this.getInput(n)||this.appendDummyInput(n)).appendField(new e.FieldLabel(s),r)}else this.updateDisabled(),this.removeInput(n)},e.BlockSvg.prototype.tab=function(t,n){var r=new e.TabNavigateCursor;r.setCurNode(e.ASTNode.createFieldNode(t)),t=r.getCurNode(),n?r.next():r.prev(),(n=r.getCurNode())&&n!==t&&(n.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(n))},e.BlockSvg.prototype.onMouseDown_=function(t){var n=this.workspace&&this.workspace.getGesture(t);n&&n.handleBlockStart(t,this)},e.BlockSvg.prototype.showHelp=function(){var t="function"==typeof this.helpUrl?this.helpUrl():this.helpUrl;t&&window.open(t)},e.BlockSvg.prototype.generateContextMenu=function(){if(this.workspace.options.readOnly||!this.contextMenu)return null;var t=e.ContextMenuRegistry.registry.getContextMenuOptions(e.ContextMenuRegistry.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(t),t},e.BlockSvg.prototype.showContextMenu=function(t){var n=this.generateContextMenu();n&&n.length&&(e.ContextMenu.show(t,n,this.RTL),e.ContextMenu.currentBlock=this)},e.BlockSvg.prototype.moveConnections=function(t,n){if(this.rendered){for(var r=this.getConnections_(!1),s=0;s<r.length;s++)r[s].moveBy(t,n);for(r=this.getIcons(),s=0;s<r.length;s++)r[s].computeIconLocation();for(s=0;s<this.childBlocks_.length;s++)this.childBlocks_[s].moveConnections(t,n)}},e.BlockSvg.prototype.setDragging=function(t){if(t){var n=this.getSvgRoot();n.translate_="",n.skew_="",e.draggingConnections=e.draggingConnections.concat(this.getConnections_(!0)),e.utils.dom.addClass(this.svgGroup_,"blocklyDragging")}else e.draggingConnections=[],e.utils.dom.removeClass(this.svgGroup_,"blocklyDragging");for(n=0;n<this.childBlocks_.length;n++)this.childBlocks_[n].setDragging(t)},e.BlockSvg.prototype.setMovable=function(t){e.BlockSvg.superClass_.setMovable.call(this,t),this.pathObject.updateMovable(t)},e.BlockSvg.prototype.setEditable=function(t){e.BlockSvg.superClass_.setEditable.call(this,t),t=this.getIcons();for(var n=0;n<t.length;n++)t[n].updateEditable()},e.BlockSvg.prototype.setShadow=function(t){e.BlockSvg.superClass_.setShadow.call(this,t),this.applyColour()},e.BlockSvg.prototype.setInsertionMarker=function(t){this.isInsertionMarker_!=t&&(this.isInsertionMarker_=t)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))},e.BlockSvg.prototype.getSvgRoot=function(){return this.svgGroup_},e.BlockSvg.prototype.dispose=function(t,n){if(this.workspace){e.Tooltip.dispose(),e.Tooltip.unbindMouseEvents(this.pathObject.svgPath),e.utils.dom.startTextWidthCache();var r=this.workspace;if(e.selected==this&&(this.unselect(),this.workspace.cancelCurrentGesture()),e.ContextMenu.currentBlock==this&&e.ContextMenu.hide(),n&&this.rendered&&(this.unplug(t),e.blockAnimations.disposeUiEffect(this)),this.rendered=!1,this.warningTextDb_){for(var s in this.warningTextDb_)clearTimeout(this.warningTextDb_[s]);this.warningTextDb_=null}for(n=this.getIcons(),s=0;s<n.length;s++)n[s].dispose();e.BlockSvg.superClass_.dispose.call(this,!!t),e.utils.dom.removeNode(this.svgGroup_),r.resizeContents(),this.svgGroup_=null,e.utils.dom.stopTextWidthCache()}},e.BlockSvg.prototype.toCopyData=function(){if(this.isInsertionMarker_)return null;var t=e.Xml.blockToDom(this,!0);e.Xml.deleteNext(t);var n=this.getRelativeToSurfaceXY();return t.setAttribute("x",this.RTL?-n.x:n.x),t.setAttribute("y",n.y),{xml:t,source:this.workspace,typeCounts:e.utils.getBlockTypeCounts(this,!0)}},e.BlockSvg.prototype.applyColour=function(){this.pathObject.applyColour(this);for(var t=this.getIcons(),n=0;n<t.length;n++)t[n].applyColour();for(t=0;n=this.inputList[t];t++)for(var s,r=0;s=n.fieldRow[r];r++)s.applyColour()},e.BlockSvg.prototype.updateDisabled=function(){var t=this.getChildren(!1);if(this.applyColour(),!this.isCollapsed())for(var r,n=0;r=t[n];n++)r.rendered&&r.updateDisabled()},e.BlockSvg.prototype.getCommentIcon=function(){return this.commentIcon_},e.BlockSvg.prototype.setCommentText=function(t){if(!e.Comment)throw Error("Missing require for Blockly.Comment");this.commentModel.text!=t&&(e.BlockSvg.superClass_.setCommentText.call(this,t),!!this.commentIcon_==(t=null!=t)?this.commentIcon_.updateText():(t?this.comment=this.commentIcon_=new e.Comment(this):(this.commentIcon_.dispose(),this.comment=this.commentIcon_=null),this.rendered&&(this.render(),this.bumpNeighbours())))},e.BlockSvg.prototype.setWarningText=function(t,n){if(!e.Warning)throw Error("Missing require for Blockly.Warning");this.warningTextDb_||(this.warningTextDb_=Object.create(null));var r=n||"";if(r)this.warningTextDb_[r]&&(clearTimeout(this.warningTextDb_[r]),delete this.warningTextDb_[r]);else for(var s in this.warningTextDb_)clearTimeout(this.warningTextDb_[s]),delete this.warningTextDb_[s];if(this.workspace.isDragging()){var u=this;this.warningTextDb_[r]=setTimeout(function(){u.workspace&&(delete u.warningTextDb_[r],u.setWarningText(t,r))},100)}else{if(this.isInFlyout&&(t=null),n=!1,"string"==typeof t){s=this.getSurroundParent();for(var b=null;s;)s.isCollapsed()&&(b=s),s=s.getSurroundParent();b&&b.setWarningText(e.Msg.COLLAPSED_WARNINGS_WARNING,e.BlockSvg.COLLAPSED_WARNING_ID),this.warning||(this.warning=new e.Warning(this),n=!0),this.warning.setText(t,r)}else this.warning&&!r?(this.warning.dispose(),n=!0):this.warning&&(n=this.warning.getText(),this.warning.setText("",r),(s=this.warning.getText())||this.warning.dispose(),n=n!=s);n&&this.rendered&&(this.render(),this.bumpNeighbours())}},e.BlockSvg.prototype.setMutator=function(t){this.mutator&&this.mutator!==t&&this.mutator.dispose(),t&&(t.setBlock(this),this.mutator=t,t.createIcon()),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.setEnabled=function(t){this.isEnabled()!=t&&(e.BlockSvg.superClass_.setEnabled.call(this,t),this.rendered&&!this.getInheritedDisabled()&&this.updateDisabled())},e.BlockSvg.prototype.setHighlighted=function(t){this.rendered&&this.pathObject.updateHighlighted(t)},e.BlockSvg.prototype.addSelect=function(){this.pathObject.updateSelected(!0)},e.BlockSvg.prototype.removeSelect=function(){this.pathObject.updateSelected(!1)},e.BlockSvg.prototype.setDeleteStyle=function(t){this.pathObject.updateDraggingDelete(t)},e.BlockSvg.prototype.getColour=function(){return this.style.colourPrimary},e.BlockSvg.prototype.setColour=function(t){e.BlockSvg.superClass_.setColour.call(this,t),t=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(t.style),this.style=t.style,this.styleName_=t.name,this.applyColour()},e.BlockSvg.prototype.setStyle=function(t){var n=this.workspace.getRenderer().getConstants().getBlockStyle(t);if(this.styleName_=t,!n)throw Error("Invalid style name: "+t);this.hat=n.hat,this.pathObject.setStyle(n),this.colour_=n.colourPrimary,this.style=n,this.applyColour()},e.BlockSvg.prototype.bringToFront=function(){var t=this;do{var n=t.getSvgRoot(),r=n.parentNode,s=r.childNodes;s[s.length-1]!==n&&r.appendChild(n),t=t.getParent()}while(t)},e.BlockSvg.prototype.setPreviousStatement=function(t,n){e.BlockSvg.superClass_.setPreviousStatement.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.setNextStatement=function(t,n){e.BlockSvg.superClass_.setNextStatement.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.setOutput=function(t,n){e.BlockSvg.superClass_.setOutput.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.setInputsInline=function(t){e.BlockSvg.superClass_.setInputsInline.call(this,t),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.removeInput=function(t,n){return t=e.BlockSvg.superClass_.removeInput.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours()),t},e.BlockSvg.prototype.moveNumberedInputBefore=function(t,n){e.BlockSvg.superClass_.moveNumberedInputBefore.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.appendInput_=function(t,n){return t=e.BlockSvg.superClass_.appendInput_.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours()),t},e.BlockSvg.prototype.setConnectionTracking=function(t){if(this.previousConnection&&this.previousConnection.setTracking(t),this.outputConnection&&this.outputConnection.setTracking(t),this.nextConnection){this.nextConnection.setTracking(t);var n=this.nextConnection.targetBlock();n&&n.setConnectionTracking(t)}if(!this.collapsed_)for(n=0;n<this.inputList.length;n++){var r=this.inputList[n].connection;r&&(r.setTracking(t),(r=r.targetBlock())&&r.setConnectionTracking(t))}},e.BlockSvg.prototype.getConnections_=function(t){var n=[];if((t||this.rendered)&&(this.outputConnection&&n.push(this.outputConnection),this.previousConnection&&n.push(this.previousConnection),this.nextConnection&&n.push(this.nextConnection),t||!this.collapsed_)){t=0;for(var r;r=this.inputList[t];t++)r.connection&&n.push(r.connection)}return n},e.BlockSvg.prototype.lastConnectionInStack=function(t){return e.BlockSvg.superClass_.lastConnectionInStack.call(this,t)},e.BlockSvg.prototype.getMatchingConnection=function(t,n){return e.BlockSvg.superClass_.getMatchingConnection.call(this,t,n)},e.BlockSvg.prototype.makeConnection_=function(t){return new e.RenderedConnection(this,t)},e.BlockSvg.prototype.bumpNeighbours=function(){if(this.workspace&&!this.workspace.isDragging()){var t=this.getRootBlock();if(!t.isInFlyout)for(var s,n=this.getConnections_(!1),r=0;s=n[r];r++){s.isConnected()&&s.isSuperior()&&s.targetBlock().bumpNeighbours();for(var x,u=s.neighbours(e.SNAP_RADIUS),b=0;x=u[b];b++)s.isConnected()&&x.isConnected()||x.getSourceBlock().getRootBlock()!=t&&(s.isSuperior()?x.bumpAwayFrom(s):s.bumpAwayFrom(x))}}},e.BlockSvg.prototype.scheduleSnapAndBump=function(){var t=this,n=e.Events.getGroup();setTimeout(function(){e.Events.setGroup(n),t.snapToGrid(),e.Events.setGroup(!1)},e.BUMP_DELAY/2),setTimeout(function(){e.Events.setGroup(n),t.bumpNeighbours(),e.Events.setGroup(!1)},e.BUMP_DELAY)},e.BlockSvg.prototype.positionNearConnection=function(t,n){t.type!=e.connectionTypes.NEXT_STATEMENT&&t.type!=e.connectionTypes.INPUT_VALUE||this.moveBy(n.x-t.x,n.y-t.y)},e.BlockSvg.prototype.getParent=function(){return e.BlockSvg.superClass_.getParent.call(this)},e.BlockSvg.prototype.getRootBlock=function(){return e.BlockSvg.superClass_.getRootBlock.call(this)},e.BlockSvg.prototype.render=function(t){if(!this.renderIsInProgress_){this.renderIsInProgress_=!0;try{if(this.rendered=!0,e.utils.dom.startTextWidthCache(),this.isCollapsed()&&this.updateCollapsed_(),this.workspace.getRenderer().render(this),this.updateConnectionLocations_(),!1!==t){var n=this.getParent();n?n.render(!0):this.workspace.resizeContents()}e.utils.dom.stopTextWidthCache(),this.updateMarkers_()}finally{this.renderIsInProgress_=!1}}},e.BlockSvg.prototype.updateMarkers_=function(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(e.MarkerManager.LOCAL_MARKER).draw()},e.BlockSvg.prototype.updateConnectionLocations_=function(){var t=this.getRelativeToSurfaceXY();this.previousConnection&&this.previousConnection.moveToOffset(t),this.outputConnection&&this.outputConnection.moveToOffset(t);for(var n=0;n<this.inputList.length;n++){var r=this.inputList[n].connection;r&&(r.moveToOffset(t),r.isConnected()&&r.tighten())}this.nextConnection&&(this.nextConnection.moveToOffset(t),this.nextConnection.isConnected()&&this.nextConnection.tighten())},e.BlockSvg.prototype.setCursorSvg=function(t){this.pathObject.setCursorSvg(t)},e.BlockSvg.prototype.setMarkerSvg=function(t){this.pathObject.setMarkerSvg(t)},e.BlockSvg.prototype.getHeightWidth=function(){var t=this.height,n=this.width,r=this.getNextBlock();if(r){r=r.getHeightWidth();var s=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;t+=r.height-s,n=Math.max(n,r.width)}return{height:t,width:n}},e.BlockSvg.prototype.fadeForReplacement=function(t){this.pathObject.updateReplacementFade(t)},e.BlockSvg.prototype.highlightShapeForInput=function(t,n){this.pathObject.updateShapeForInputHighlight(t,n)},e.ConnectionDB=function(t){this.connections_=[],this.connectionChecker_=t},e.ConnectionDB.prototype.addConnection=function(t,n){n=this.calculateIndexForYPos_(n),this.connections_.splice(n,0,t)},e.ConnectionDB.prototype.findIndexOfConnection_=function(t,n){if(!this.connections_.length)return-1;var r=this.calculateIndexForYPos_(n);if(r>=this.connections_.length)return-1;n=t.y;for(var s=r;0<=s&&this.connections_[s].y==n;){if(this.connections_[s]==t)return s;s--}for(s=r;s<this.connections_.length&&this.connections_[s].y==n;){if(this.connections_[s]==t)return s;s++}return-1},e.ConnectionDB.prototype.calculateIndexForYPos_=function(t){if(!this.connections_.length)return 0;for(var n=0,r=this.connections_.length;n<r;){var s=Math.floor((n+r)/2);if(this.connections_[s].y<t)n=s+1;else{if(!(this.connections_[s].y>t)){n=s;break}r=s}}return n},e.ConnectionDB.prototype.removeConnection=function(t,n){if(-1==(t=this.findIndexOfConnection_(t,n)))throw Error("Unable to find connection in connectionDB.");this.connections_.splice(t,1)},e.ConnectionDB.prototype.getNeighbours=function(t,n){function r(ot){var et=u-s[ot].x,Tt=b-s[ot].y;return Math.sqrt(et*et+Tt*Tt)<=n&&Z.push(s[ot]),Tt<n}var s=this.connections_,u=t.x,b=t.y;t=0;for(var x=s.length-2,B=x;t<B;)s[B].y<b?t=B:x=B,B=Math.floor((t+x)/2);var Z=[];if(x=t=B,s.length){for(;0<=t&&r(t);)t--;do{x++}while(x<s.length&&r(x))}return Z},e.ConnectionDB.prototype.isInYRange_=function(t,n,r){return Math.abs(this.connections_[t].y-n)<=r},e.ConnectionDB.prototype.searchForClosest=function(t,n,r){if(!this.connections_.length)return{connection:null,radius:n};var s=t.y,u=t.x;t.x=u+r.x,t.y=s+r.y;var b=this.calculateIndexForYPos_(t.y);r=null;for(var B,x=n,Z=b-1;0<=Z&&this.isInYRange_(Z,t.y,n);)this.connectionChecker_.canConnect(t,B=this.connections_[Z],!0,x)&&(r=B,x=B.distanceFrom(t)),Z--;for(;b<this.connections_.length&&this.isInYRange_(b,t.y,n);)this.connectionChecker_.canConnect(t,B=this.connections_[b],!0,x)&&(r=B,x=B.distanceFrom(t)),b++;return t.x=u,t.y=s,{connection:r,radius:x}},e.ConnectionDB.init=function(t){var n=[];return n[e.connectionTypes.INPUT_VALUE]=new e.ConnectionDB(t),n[e.connectionTypes.OUTPUT_VALUE]=new e.ConnectionDB(t),n[e.connectionTypes.NEXT_STATEMENT]=new e.ConnectionDB(t),n[e.connectionTypes.PREVIOUS_STATEMENT]=new e.ConnectionDB(t),n},e.Events.ThemeChange=function(t,n){e.Events.ThemeChange.superClass_.constructor.call(this,n),this.themeName=t},e.utils.object.inherits(e.Events.ThemeChange,e.Events.UiBase),e.Events.ThemeChange.prototype.type=e.Events.THEME_CHANGE,e.Events.ThemeChange.prototype.toJson=function(){var t=e.Events.ThemeChange.superClass_.toJson.call(this);return t.themeName=this.themeName,t},e.Events.ThemeChange.prototype.fromJson=function(t){e.Events.ThemeChange.superClass_.fromJson.call(this,t),this.themeName=t.themeName},e.registry.register(e.registry.Type.EVENT,e.Events.THEME_CHANGE,e.Events.ThemeChange),e.Events.ViewportChange=function(t,n,r,s,u){e.Events.ViewportChange.superClass_.constructor.call(this,s),this.viewTop=t,this.viewLeft=n,this.scale=r,this.oldScale=u},e.utils.object.inherits(e.Events.ViewportChange,e.Events.UiBase),e.Events.ViewportChange.prototype.type=e.Events.VIEWPORT_CHANGE,e.Events.ViewportChange.prototype.toJson=function(){var t=e.Events.ViewportChange.superClass_.toJson.call(this);return t.viewTop=this.viewTop,t.viewLeft=this.viewLeft,t.scale=this.scale,t.oldScale=this.oldScale,t},e.Events.ViewportChange.prototype.fromJson=function(t){e.Events.ViewportChange.superClass_.fromJson.call(this,t),this.viewTop=t.viewTop,this.viewLeft=t.viewLeft,this.scale=t.scale,this.oldScale=t.oldScale},e.registry.register(e.registry.Type.EVENT,e.Events.VIEWPORT_CHANGE,e.Events.ViewportChange),e.IMetricsManager=function(){},e.MetricsManager=function(t){this.workspace_=t},e.MetricsManager.prototype.getDimensionsPx_=function(t){var n=0,r=0;return t&&(n=t.getWidth(),r=t.getHeight()),new e.utils.Size(n,r)},e.MetricsManager.prototype.getFlyoutMetrics=function(t){return{width:(t=this.getDimensionsPx_(this.workspace_.getFlyout(t))).width,height:t.height,position:this.workspace_.toolboxPosition}},e.MetricsManager.prototype.getToolboxMetrics=function(){var t=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:t.width,height:t.height,position:this.workspace_.toolboxPosition}},e.MetricsManager.prototype.getSvgMetrics=function(){return this.workspace_.getCachedParentSvgSize()},e.MetricsManager.prototype.getAbsoluteMetrics=function(){var t=0,n=this.getToolboxMetrics(),r=this.getFlyoutMetrics(!0),s=!!this.workspace_.getToolbox(),u=!!this.workspace_.getFlyout(!0),b=s?n.position:r.position,x=b==e.utils.toolbox.Position.LEFT;return b=b==e.utils.toolbox.Position.TOP,s&&x?t=n.width:u&&x&&(t=r.width),x=0,s&&b?x=n.height:u&&b&&(x=r.height),{top:x,left:t}},e.MetricsManager.prototype.getViewMetrics=function(t){t=t?this.workspace_.scale:1;var n=this.getSvgMetrics(),r=this.getToolboxMetrics(),s=this.getFlyoutMetrics(!0),u=this.workspace_.getToolbox()?r.position:s.position;return this.workspace_.getToolbox()?u==e.utils.toolbox.Position.TOP||u==e.utils.toolbox.Position.BOTTOM?n.height-=r.height:(u==e.utils.toolbox.Position.LEFT||u==e.utils.toolbox.Position.RIGHT)&&(n.width-=r.width):this.workspace_.getFlyout(!0)&&(u==e.utils.toolbox.Position.TOP||u==e.utils.toolbox.Position.BOTTOM?n.height-=s.height:(u==e.utils.toolbox.Position.LEFT||u==e.utils.toolbox.Position.RIGHT)&&(n.width-=s.width)),{height:n.height/t,width:n.width/t,top:-this.workspace_.scrollY/t,left:-this.workspace_.scrollX/t}},e.MetricsManager.prototype.getContentMetrics=function(t){t=t?1:this.workspace_.scale;var n=this.workspace_.getBlocksBoundingBox();return{height:(n.bottom-n.top)*t,width:(n.right-n.left)*t,top:n.top*t,left:n.left*t}},e.MetricsManager.prototype.hasFixedEdges=function(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()},e.MetricsManager.prototype.getComputedFixedEdges_=function(t){if(!this.hasFixedEdges())return{};var n=this.workspace_.isMovableHorizontally(),r=this.workspace_.isMovableVertically();t=t||this.getViewMetrics(!1);var s={};return r||(s.top=t.top,s.bottom=t.top+t.height),n||(s.left=t.left,s.right=t.left+t.width),s},e.MetricsManager.prototype.getPaddedContent_=function(t,n){var r=n.top+n.height,s=n.left+n.width,u=t.width,b=u/2,x=(t=t.height)/2;return{top:Math.min(n.top-x,r-t),bottom:Math.max(r+x,n.top+t),left:Math.min(n.left-b,s-u),right:Math.max(s+b,n.left+u)}},e.MetricsManager.prototype.getScrollMetrics=function(t,n,r){t=t?this.workspace_.scale:1,n=n||this.getViewMetrics(!1);var s=r||this.getContentMetrics();r=this.getComputedFixedEdges_(n),n=this.getPaddedContent_(n,s);var u=void 0!==r.left?r.left:n.left;return{top:(s=void 0!==r.top?r.top:n.top)/t,left:u/t,width:((void 0!==r.right?r.right:n.right)-u)/t,height:((void 0!==r.bottom?r.bottom:n.bottom)-s)/t}},e.MetricsManager.prototype.getUiMetrics=function(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}},e.MetricsManager.prototype.getMetrics=function(){var t=this.getToolboxMetrics(),n=this.getFlyoutMetrics(!0),r=this.getSvgMetrics(),s=this.getAbsoluteMetrics(),u=this.getViewMetrics(),b=this.getContentMetrics(),x=this.getScrollMetrics(!1,u,b);return{contentHeight:b.height,contentWidth:b.width,contentTop:b.top,contentLeft:b.left,scrollHeight:x.height,scrollWidth:x.width,scrollTop:x.top,scrollLeft:x.left,viewHeight:u.height,viewWidth:u.width,viewTop:u.top,viewLeft:u.left,absoluteTop:s.top,absoluteLeft:s.left,svgHeight:r.height,svgWidth:r.width,toolboxWidth:t.width,toolboxHeight:t.height,toolboxPosition:t.position,flyoutWidth:n.width,flyoutHeight:n.height}},e.registry.register(e.registry.Type.METRICS_MANAGER,e.registry.DEFAULT,e.MetricsManager),e.FlyoutMetricsManager=function(t,n){this.flyout_=n,e.FlyoutMetricsManager.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.FlyoutMetricsManager,e.MetricsManager),e.FlyoutMetricsManager.prototype.getBoundingBox_=function(){try{var t=this.workspace_.getCanvas().getBBox()}catch(n){t={height:0,y:0,width:0,x:0}}return t},e.FlyoutMetricsManager.prototype.getContentMetrics=function(t){var n=this.getBoundingBox_();return{height:n.height*(t=t?1:this.workspace_.scale),width:n.width*t,top:n.y*t,left:n.x*t}},e.FlyoutMetricsManager.prototype.getScrollMetrics=function(t,n,r){return{height:((n=r||this.getContentMetrics()).height+2*(r=this.flyout_.MARGIN*this.workspace_.scale))/(t=t?this.workspace_.scale:1),width:(n.width+n.left+r)/t,top:0,left:0}},e.ThemeManager=function(t,n){this.workspace_=t,this.theme_=n,this.subscribedWorkspaces_=[],this.componentDB_=Object.create(null)},e.ThemeManager.prototype.getTheme=function(){return this.theme_},e.ThemeManager.prototype.setTheme=function(t){var r,n=this.theme_;for(this.theme_=t,(t=this.workspace_.getInjectionDiv())&&(n&&e.utils.dom.removeClass(t,n.getClassName()),e.utils.dom.addClass(t,this.theme_.getClassName())),n=0;t=this.subscribedWorkspaces_[n];n++)t.refreshTheme();for(n=0,t=Object.keys(this.componentDB_);r=t[n];n++)for(var u,s=0;u=this.componentDB_[r][s];s++){var b=u.element;u=u.propertyName;var x=this.theme_&&this.theme_.getComponentStyle(r);b.style[u]=x||""}e.hideChaff()},e.ThemeManager.prototype.subscribeWorkspace=function(t){this.subscribedWorkspaces_.push(t)},e.ThemeManager.prototype.unsubscribeWorkspace=function(t){if(0>(t=this.subscribedWorkspaces_.indexOf(t)))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.");this.subscribedWorkspaces_.splice(t,1)},e.ThemeManager.prototype.subscribe=function(t,n,r){this.componentDB_[n]||(this.componentDB_[n]=[]),this.componentDB_[n].push({element:t,propertyName:r}),n=this.theme_&&this.theme_.getComponentStyle(n),t.style[r]=n||""},e.ThemeManager.prototype.unsubscribe=function(t){if(t)for(var s,n=Object.keys(this.componentDB_),r=0;s=n[r];r++){for(var u=this.componentDB_[s],b=u.length-1;0<=b;b--)u[b].element===t&&u.splice(b,1);this.componentDB_[s].length||delete this.componentDB_[s]}},e.ThemeManager.prototype.dispose=function(){this.componentDB_=this.subscribedWorkspaces_=this.theme_=this.owner_=null},e.TouchGesture=function(t,n){e.TouchGesture.superClass_.constructor.call(this,t,n),this.isMultiTouch_=!1,this.cachedPoints_=Object.create(null),this.startDistance_=this.previousScale_=0,this.isPinchZoomEnabled_=this.onStartWrapper_=null},e.utils.object.inherits(e.TouchGesture,e.Gesture),e.TouchGesture.ZOOM_IN_MULTIPLIER=5,e.TouchGesture.ZOOM_OUT_MULTIPLIER=6,e.TouchGesture.prototype.doStart=function(t){this.isPinchZoomEnabled_=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,e.TouchGesture.superClass_.doStart.call(this,t),!this.isEnding_&&e.Touch.isTouchEvent(t)&&this.handleTouchStart(t)},e.TouchGesture.prototype.bindMouseEvents=function(t){this.onStartWrapper_=e.browserEvents.conditionalBind(document,"mousedown",null,this.handleStart.bind(this),!0),this.onMoveWrapper_=e.browserEvents.conditionalBind(document,"mousemove",null,this.handleMove.bind(this),!0),this.onUpWrapper_=e.browserEvents.conditionalBind(document,"mouseup",null,this.handleUp.bind(this),!0),t.preventDefault(),t.stopPropagation()},e.TouchGesture.prototype.handleStart=function(t){!this.isDragging()&&e.Touch.isTouchEvent(t)&&(this.handleTouchStart(t),this.isMultiTouch()&&e.longStop_())},e.TouchGesture.prototype.handleMove=function(t){this.isDragging()?e.Touch.shouldHandleEvent(t)&&e.TouchGesture.superClass_.handleMove.call(this,t):this.isMultiTouch()?(e.Touch.isTouchEvent(t)&&this.handleTouchMove(t),e.longStop_()):e.TouchGesture.superClass_.handleMove.call(this,t)},e.TouchGesture.prototype.handleUp=function(t){e.Touch.isTouchEvent(t)&&!this.isDragging()&&this.handleTouchEnd(t),!this.isMultiTouch()||this.isDragging()?e.Touch.shouldHandleEvent(t)&&e.TouchGesture.superClass_.handleUp.call(this,t):(t.preventDefault(),t.stopPropagation(),this.dispose())},e.TouchGesture.prototype.isMultiTouch=function(){return this.isMultiTouch_},e.TouchGesture.prototype.dispose=function(){e.TouchGesture.superClass_.dispose.call(this),this.onStartWrapper_&&e.browserEvents.unbind(this.onStartWrapper_)},e.TouchGesture.prototype.handleTouchStart=function(t){var n=e.Touch.getTouchIdentifierFromEvent(t);this.cachedPoints_[n]=this.getTouchPoint(t),2==(n=Object.keys(this.cachedPoints_)).length&&(this.startDistance_=e.utils.Coordinate.distance(this.cachedPoints_[n[0]],this.cachedPoints_[n[1]]),this.isMultiTouch_=!0,t.preventDefault())},e.TouchGesture.prototype.handleTouchMove=function(t){var n=e.Touch.getTouchIdentifierFromEvent(t);this.cachedPoints_[n]=this.getTouchPoint(t),n=Object.keys(this.cachedPoints_),this.isPinchZoomEnabled_&&2===n.length?this.handlePinch_(t):e.TouchGesture.superClass_.handleMove.call(this,t)},e.TouchGesture.prototype.handlePinch_=function(t){var n=Object.keys(this.cachedPoints_);if(n=e.utils.Coordinate.distance(this.cachedPoints_[n[0]],this.cachedPoints_[n[1]])/this.startDistance_,0<this.previousScale_&&1/0>this.previousScale_){var r=n-this.previousScale_;r=0<r?r*e.TouchGesture.ZOOM_IN_MULTIPLIER:r*e.TouchGesture.ZOOM_OUT_MULTIPLIER;var s=this.startWorkspace_,u=e.utils.mouseToSvg(t,s.getParentSvg(),s.getInverseScreenCTM());s.zoom(u.x,u.y,r)}this.previousScale_=n,t.preventDefault()},e.TouchGesture.prototype.handleTouchEnd=function(t){t=e.Touch.getTouchIdentifierFromEvent(t),this.cachedPoints_[t]&&delete this.cachedPoints_[t],2>Object.keys(this.cachedPoints_).length&&(this.cachedPoints_=Object.create(null),this.previousScale_=0)},e.TouchGesture.prototype.getTouchPoint=function(t){return this.startWorkspace_?new e.utils.Coordinate(t.pageX?t.pageX:t.changedTouches[0].pageX,t.pageY?t.pageY:t.changedTouches[0].pageY):null},e.WorkspaceAudio=function(t){this.parentWorkspace_=t,this.SOUNDS_=Object.create(null)},e.WorkspaceAudio.prototype.lastSound_=null,e.WorkspaceAudio.prototype.dispose=function(){this.SOUNDS_=this.parentWorkspace_=null},e.WorkspaceAudio.prototype.load=function(t,n){if(t.length){try{var r=new e.utils.global.Audio}catch(B){return}for(var s,u=0;u<t.length;u++){var b=t[u],x=b.match(/\.(\w+)$/);if(x&&r.canPlayType("audio/"+x[1])){s=new e.utils.global.Audio(b);break}}s&&s.play&&(this.SOUNDS_[n]=s)}},e.WorkspaceAudio.prototype.preload=function(){for(var t in this.SOUNDS_){var n=this.SOUNDS_[t];n.volume=.01;var r=n.play();if(void 0!==r?r.then(n.pause).catch(function(){}):n.pause(),e.utils.userAgent.IPAD||e.utils.userAgent.IPHONE)break}},e.WorkspaceAudio.prototype.play=function(t,n){var r=this.SOUNDS_[t];r?(t=new Date,null!=this.lastSound_&&t-this.lastSound_<e.SOUND_LIMIT||(this.lastSound_=t,(r=e.utils.userAgent.IPAD||e.utils.userAgent.ANDROID?r:r.cloneNode()).volume=void 0===n?1:n,r.play())):this.parentWorkspace_&&this.parentWorkspace_.getAudioManager().play(t,n)},e.WorkspaceSvg=function(t,n,r){e.WorkspaceSvg.superClass_.constructor.call(this,t),this.metricsManager_=new(e.registry.getClassFromOptions(e.registry.Type.METRICS_MANAGER,t,!0))(this),this.getMetrics=t.getMetrics||this.metricsManager_.getMetrics.bind(this.metricsManager_),this.setMetrics=t.setMetrics||e.WorkspaceSvg.setTopLevelWorkspaceMetrics_,this.componentManager_=new e.ComponentManager,this.connectionDBList=e.ConnectionDB.init(this.connectionChecker),n&&(this.blockDragSurface_=n),r&&(this.workspaceDragSurface_=r),this.useWorkspaceDragSurface_=!!this.workspaceDragSurface_&&e.utils.is3dSupported(),this.highlightedBlocks_=[],this.audioManager_=new e.WorkspaceAudio(t.parentWorkspace),this.grid_=this.options.gridPattern?new e.Grid(this.options.gridPattern,t.gridOptions):null,this.markerManager_=new e.MarkerManager(this),this.toolboxCategoryCallbacks_=Object.create(null),this.flyoutButtonCallbacks_=Object.create(null),e.Variables&&e.Variables.flyoutCategory&&this.registerToolboxCategoryCallback(e.VARIABLE_CATEGORY_NAME,e.Variables.flyoutCategory),e.VariablesDynamic&&e.VariablesDynamic.flyoutCategory&&this.registerToolboxCategoryCallback(e.VARIABLE_DYNAMIC_CATEGORY_NAME,e.VariablesDynamic.flyoutCategory),e.Procedures&&e.Procedures.flyoutCategory&&(this.registerToolboxCategoryCallback(e.PROCEDURE_CATEGORY_NAME,e.Procedures.flyoutCategory),this.addChangeListener(e.Procedures.mutatorOpenListener)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new e.ThemeManager(this,this.options.theme||e.Themes.Classic),this.themeManager_.subscribeWorkspace(this),this.renderer_=e.blockRendering.init(this.options.renderer||"geras",this.getTheme(),this.options.rendererOverrides),this.cachedParentSvg_=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements_=[],this.dragTargetAreas_=[],this.cachedParentSvgSize_=new e.utils.Size(0,0)},e.utils.object.inherits(e.WorkspaceSvg,e.Workspace),e.WorkspaceSvg.prototype.resizeHandlerWrapper_=null,e.WorkspaceSvg.prototype.rendered=!0,e.WorkspaceSvg.prototype.isVisible_=!0,e.WorkspaceSvg.prototype.isFlyout=!1,e.WorkspaceSvg.prototype.isMutator=!1,e.WorkspaceSvg.prototype.resizesEnabled_=!0,e.WorkspaceSvg.prototype.scrollX=0,e.WorkspaceSvg.prototype.scrollY=0,e.WorkspaceSvg.prototype.startScrollX=0,e.WorkspaceSvg.prototype.startScrollY=0,e.WorkspaceSvg.prototype.dragDeltaXY_=null,e.WorkspaceSvg.prototype.scale=1,e.WorkspaceSvg.prototype.oldScale_=1,e.WorkspaceSvg.prototype.oldTop_=0,e.WorkspaceSvg.prototype.oldLeft_=0,e.WorkspaceSvg.prototype.trashcan=null,e.WorkspaceSvg.prototype.scrollbar=null,e.WorkspaceSvg.prototype.flyout_=null,e.WorkspaceSvg.prototype.toolbox_=null,e.WorkspaceSvg.prototype.currentGesture_=null,e.WorkspaceSvg.prototype.blockDragSurface_=null,e.WorkspaceSvg.prototype.workspaceDragSurface_=null,e.WorkspaceSvg.prototype.useWorkspaceDragSurface_=!1,e.WorkspaceSvg.prototype.isDragSurfaceActive_=!1,e.WorkspaceSvg.prototype.injectionDiv_=null,e.WorkspaceSvg.prototype.lastRecordedPageScroll_=null,e.WorkspaceSvg.prototype.targetWorkspace=null,e.WorkspaceSvg.prototype.inverseScreenCTM_=null,e.WorkspaceSvg.prototype.inverseScreenCTMDirty_=!0,e.WorkspaceSvg.prototype.getMarkerManager=function(){return this.markerManager_},e.WorkspaceSvg.prototype.getMetricsManager=function(){return this.metricsManager_},e.WorkspaceSvg.prototype.setMetricsManager=function(t){this.metricsManager_=t,this.getMetrics=this.metricsManager_.getMetrics.bind(this.metricsManager_)},e.WorkspaceSvg.prototype.getComponentManager=function(){return this.componentManager_},e.WorkspaceSvg.prototype.setCursorSvg=function(t){this.markerManager_.setCursorSvg(t)},e.WorkspaceSvg.prototype.setMarkerSvg=function(t){this.markerManager_.setMarkerSvg(t)},e.WorkspaceSvg.prototype.getMarker=function(t){return this.markerManager_?this.markerManager_.getMarker(t):null},e.WorkspaceSvg.prototype.getCursor=function(){return this.markerManager_?this.markerManager_.getCursor():null},e.WorkspaceSvg.prototype.getRenderer=function(){return this.renderer_},e.WorkspaceSvg.prototype.getThemeManager=function(){return this.themeManager_},e.WorkspaceSvg.prototype.getTheme=function(){return this.themeManager_.getTheme()},e.WorkspaceSvg.prototype.setTheme=function(t){t||(t=e.Themes.Classic),this.themeManager_.setTheme(t)},e.WorkspaceSvg.prototype.refreshTheme=function(){this.svgGroup_&&this.renderer_.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles_(this.getAllBlocks(!1).filter(function(n){return!!n.getStyleName()})),this.refreshToolboxSelection(),this.toolbox_&&this.toolbox_.refreshTheme(),this.isVisible()&&this.setVisible(!0);var t=new(e.Events.get(e.Events.THEME_CHANGE))(this.getTheme().name,this.id);e.Events.fire(t)},e.WorkspaceSvg.prototype.updateBlockStyles_=function(t){for(var r,n=0;r=t[n];n++){var s=r.getStyleName();s&&(r.setStyle(s),r.mutator&&r.mutator.updateBlockStyle())}},e.WorkspaceSvg.prototype.getInverseScreenCTM=function(){if(this.inverseScreenCTMDirty_){var t=this.getParentSvg().getScreenCTM();t&&(this.inverseScreenCTM_=t.inverse(),this.inverseScreenCTMDirty_=!1)}return this.inverseScreenCTM_},e.WorkspaceSvg.prototype.updateInverseScreenCTM=function(){this.inverseScreenCTMDirty_=!0},e.WorkspaceSvg.prototype.isVisible=function(){return this.isVisible_},e.WorkspaceSvg.prototype.getSvgXY=function(t){var n=0,r=0,s=1;(e.utils.dom.containsNode(this.getCanvas(),t)||e.utils.dom.containsNode(this.getBubbleCanvas(),t))&&(s=this.scale);do{var u=e.utils.getRelativeXY(t);(t==this.getCanvas()||t==this.getBubbleCanvas())&&(s=1),n+=u.x*s,r+=u.y*s,t=t.parentNode}while(t&&t!=this.getParentSvg());return new e.utils.Coordinate(n,r)},e.WorkspaceSvg.prototype.getCachedParentSvgSize=function(){var t=this.cachedParentSvgSize_;return new e.utils.Size(t.width,t.height)},e.WorkspaceSvg.prototype.getOriginOffsetInPixels=function(){return e.utils.getInjectionDivXY_(this.getCanvas())},e.WorkspaceSvg.prototype.getInjectionDiv=function(){if(!this.injectionDiv_)for(var t=this.svgGroup_;t;){if(-1!=(" "+(t.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")){this.injectionDiv_=t;break}t=t.parentNode}return this.injectionDiv_},e.WorkspaceSvg.prototype.getBlockCanvas=function(){return this.svgBlockCanvas_},e.WorkspaceSvg.prototype.setResizeHandlerWrapper=function(t){this.resizeHandlerWrapper_=t},e.WorkspaceSvg.prototype.createDom=function(t){return this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyWorkspace"},null),t&&(this.svgBackground_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{height:"100%",width:"100%",class:t},this.svgGroup_),"blocklyMainBackground"==t&&this.grid_?this.svgBackground_.style.fill="url(#"+this.grid_.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.svgBlockCanvas_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyBlockCanvas"},this.svgGroup_),this.svgBubbleCanvas_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyBubbleCanvas"},this.svgGroup_),this.isFlyout||(e.browserEvents.conditionalBind(this.svgGroup_,"mousedown",this,this.onMouseDown_,!1,!0),e.browserEvents.conditionalBind(this.svgGroup_,"wheel",this,this.onMouseWheel_)),this.options.hasCategories&&(this.toolbox_=new(e.registry.getClassFromOptions(e.registry.Type.TOOLBOX,this.options,!0))(this)),this.grid_&&this.grid_.update(this.scale),this.recordDragTargets(),(t=e.registry.getClassFromOptions(e.registry.Type.CURSOR,this.options))&&this.markerManager_.setCursor(new t),this.renderer_.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_},e.WorkspaceSvg.prototype.dispose=function(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&(e.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.svgBubbleCanvas_=this.svgBlockCanvas_=null,this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null),this.flyout_&&(this.flyout_.dispose(),this.flyout_=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&(this.zoomControls_.dispose(),this.zoomControls_=null),this.audioManager_&&(this.audioManager_.dispose(),this.audioManager_=null),this.grid_&&(this.grid_.dispose(),this.grid_=null),this.renderer_.dispose(),this.markerManager_&&(this.markerManager_.dispose(),this.markerManager_=null),e.WorkspaceSvg.superClass_.dispose.call(this),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||(this.themeManager_.dispose(),this.themeManager_=null)),this.flyoutButtonCallbacks_=this.toolboxCategoryCallbacks_=this.connectionDBList=null,!this.options.parentWorkspace){var t=this.getParentSvg();t&&t.parentNode&&e.utils.dom.removeNode(t.parentNode)}this.resizeHandlerWrapper_&&(e.browserEvents.unbind(this.resizeHandlerWrapper_),this.resizeHandlerWrapper_=null)},e.WorkspaceSvg.prototype.newBlock=function(t,n){return new e.BlockSvg(this,t,n)},e.WorkspaceSvg.prototype.addTrashcan=function(){if(!e.Trashcan)throw Error("Missing require for Blockly.Trashcan");this.trashcan=new e.Trashcan(this);var t=this.trashcan.createDom();this.svgGroup_.insertBefore(t,this.svgBlockCanvas_)},e.WorkspaceSvg.prototype.addZoomControls=function(){if(!e.ZoomControls)throw Error("Missing require for Blockly.ZoomControls");this.zoomControls_=new e.ZoomControls(this);var t=this.zoomControls_.createDom();this.svgGroup_.appendChild(t)},e.WorkspaceSvg.prototype.addFlyout=function(t){var n=new e.Options({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,move:{scrollbars:!0}});return n.toolboxPosition=this.options.toolboxPosition,this.flyout_=this.horizontalLayout?new(e.registry.getClassFromOptions(e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(n):new(e.registry.getClassFromOptions(e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(n),this.flyout_.autoClose=!1,this.flyout_.getWorkspace().setVisible(!0),this.flyout_.createDom(t)},e.WorkspaceSvg.prototype.getFlyout=function(t){return this.flyout_||t?this.flyout_:this.toolbox_?this.toolbox_.getFlyout():null},e.WorkspaceSvg.prototype.getToolbox=function(){return this.toolbox_},e.WorkspaceSvg.prototype.updateScreenCalculations_=function(){this.updateInverseScreenCTM(),this.recordDragTargets()},e.WorkspaceSvg.prototype.resizeContents=function(){this.resizesEnabled_&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())},e.WorkspaceSvg.prototype.resize=function(){this.toolbox_&&this.toolbox_.position(),this.flyout_&&this.flyout_.position();for(var u,t=this.componentManager_.getComponents(e.ComponentManager.Capability.POSITIONABLE,!0),n=this.getMetricsManager().getUiMetrics(),r=[],s=0;u=t[s];s++)u.position(n,r),(u=u.getBoundingRectangle())&&r.push(u);this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations_()},e.WorkspaceSvg.prototype.updateScreenCalculationsIfScrolled=function(){var t=e.utils.getDocumentScroll();e.utils.Coordinate.equals(this.lastRecordedPageScroll_,t)||(this.lastRecordedPageScroll_=t,this.updateScreenCalculations_())},e.WorkspaceSvg.prototype.getCanvas=function(){return this.svgBlockCanvas_},e.WorkspaceSvg.prototype.setCachedParentSvgSize=function(t,n){var r=this.getParentSvg();t&&(this.cachedParentSvgSize_.width=t,r.cachedWidth_=t),n&&(this.cachedParentSvgSize_.height=n,r.cachedHeight_=n)},e.WorkspaceSvg.prototype.getBubbleCanvas=function(){return this.svgBubbleCanvas_},e.WorkspaceSvg.prototype.getParentSvg=function(){if(!this.cachedParentSvg_)for(var t=this.svgGroup_;t;){if("svg"==t.tagName){this.cachedParentSvg_=t;break}t=t.parentNode}return this.cachedParentSvg_},e.WorkspaceSvg.prototype.maybeFireViewportChangeEvent=function(){if(e.Events.isEnabled()){var t=this.scale,n=-this.scrollY,r=-this.scrollX;if(!(t==this.oldScale_&&1>Math.abs(n-this.oldTop_)&&1>Math.abs(r-this.oldLeft_))){var s=new(e.Events.get(e.Events.VIEWPORT_CHANGE))(n,r,t,this.id,this.oldScale_);this.oldScale_=t,this.oldTop_=n,this.oldLeft_=r,e.Events.fire(s)}}},e.WorkspaceSvg.prototype.translate=function(t,n){if(this.useWorkspaceDragSurface_&&this.isDragSurfaceActive_)this.workspaceDragSurface_.translateSurface(t,n);else{var r="translate("+t+","+n+") scale("+this.scale+")";this.svgBlockCanvas_.setAttribute("transform",r),this.svgBubbleCanvas_.setAttribute("transform",r)}this.blockDragSurface_&&this.blockDragSurface_.translateAndScaleGroup(t,n,this.scale),this.grid_&&this.grid_.moveTo(t,n),this.maybeFireViewportChangeEvent()},e.WorkspaceSvg.prototype.resetDragSurface=function(){if(this.useWorkspaceDragSurface_){this.isDragSurfaceActive_=!1;var t=this.workspaceDragSurface_.getSurfaceTranslation();this.workspaceDragSurface_.clearAndHide(this.svgGroup_),this.svgBlockCanvas_.setAttribute("transform",t="translate("+t.x+","+t.y+") scale("+this.scale+")"),this.svgBubbleCanvas_.setAttribute("transform",t)}},e.WorkspaceSvg.prototype.setupDragSurface=function(){if(this.useWorkspaceDragSurface_&&!this.isDragSurfaceActive_){this.isDragSurfaceActive_=!0;var t=this.svgBlockCanvas_.previousSibling,n=parseInt(this.getParentSvg().getAttribute("width"),10),r=parseInt(this.getParentSvg().getAttribute("height"),10),s=e.utils.getRelativeXY(this.getCanvas());this.workspaceDragSurface_.setContentsAndShow(this.getCanvas(),this.getBubbleCanvas(),t,n,r,this.scale),this.workspaceDragSurface_.translateSurface(s.x,s.y)}},e.WorkspaceSvg.prototype.getBlockDragSurface=function(){return this.blockDragSurface_},e.WorkspaceSvg.prototype.getWidth=function(){var t=this.getMetrics();return t?t.viewWidth/this.scale:0},e.WorkspaceSvg.prototype.setVisible=function(t){if(this.isVisible_=t,this.svgGroup_)if(this.scrollbar&&this.scrollbar.setContainerVisible(t),this.getFlyout()&&this.getFlyout().setContainerVisible(t),this.getParentSvg().style.display=t?"block":"none",this.toolbox_&&this.toolbox_.setVisible(t),t){for(var n=(t=this.getAllBlocks(!1)).length-1;0<=n;n--)t[n].markDirty();this.render(),this.toolbox_&&this.toolbox_.position()}else e.hideChaff(!0)},e.WorkspaceSvg.prototype.render=function(){for(var t=this.getAllBlocks(!1),n=t.length-1;0<=n;n--)t[n].render(!1);if(this.currentGesture_)for(t=this.currentGesture_.getInsertionMarkers(),n=0;n<t.length;n++)t[n].render(!1);this.markerManager_.updateMarkers()},e.WorkspaceSvg.prototype.highlightBlock=function(t,n){if(void 0===n){for(var s,r=0;s=this.highlightedBlocks_[r];r++)s.setHighlighted(!1);this.highlightedBlocks_.length=0}(s=t?this.getBlockById(t):null)&&((t=void 0===n||n)?-1==this.highlightedBlocks_.indexOf(s)&&this.highlightedBlocks_.push(s):e.utils.arrayRemove(this.highlightedBlocks_,s),s.setHighlighted(t))},e.WorkspaceSvg.prototype.paste=function(t){!this.rendered||!t.tagName||t.getElementsByTagName("block").length>=this.remainingCapacity()||(this.currentGesture_&&this.currentGesture_.cancel(),"comment"==t.tagName.toLowerCase()?this.pasteWorkspaceComment_(t):this.pasteBlock_(t))},e.WorkspaceSvg.prototype.pasteBlock_=function(t){e.Events.disable();try{var n=e.Xml.domToBlock(t,this),r=parseInt(t.getAttribute("x"),10),s=parseInt(t.getAttribute("y"),10);if(!isNaN(r)&&!isNaN(s)){this.RTL&&(r=-r);do{t=!1;for(var x,u=this.getAllBlocks(!1),b=0;x=u[b];b++){var B=x.getRelativeToSurfaceXY();if(1>=Math.abs(r-B.x)&&1>=Math.abs(s-B.y)){t=!0;break}}if(!t){var ot,Z=n.getConnections_(!1);for(b=0;ot=Z[b];b++)if(ot.closest(e.SNAP_RADIUS,new e.utils.Coordinate(r,s)).connection){t=!0;break}}t&&(r=this.RTL?r-e.SNAP_RADIUS:r+e.SNAP_RADIUS,s+=2*e.SNAP_RADIUS)}while(t);n.moveBy(r,s)}}finally{e.Events.enable()}e.Events.isEnabled()&&!n.isShadow()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CREATE))(n)),n.select()},e.WorkspaceSvg.prototype.pasteWorkspaceComment_=function(t){e.Events.disable();try{var n=e.WorkspaceCommentSvg.fromXml(t,this),r=parseInt(t.getAttribute("x"),10),s=parseInt(t.getAttribute("y"),10);isNaN(r)||isNaN(s)||(this.RTL&&(r=-r),n.moveBy(r+50,s+50))}finally{e.Events.enable()}e.Events.isEnabled()&&e.WorkspaceComment.fireCreateEvent(n),n.select()},e.WorkspaceSvg.prototype.refreshToolboxSelection=function(){var t=this.isFlyout?this.targetWorkspace:this;t&&!t.currentGesture_&&t.toolbox_&&t.toolbox_.getFlyout()&&t.toolbox_.refreshSelection()},e.WorkspaceSvg.prototype.renameVariableById=function(t,n){e.WorkspaceSvg.superClass_.renameVariableById.call(this,t,n),this.refreshToolboxSelection()},e.WorkspaceSvg.prototype.deleteVariableById=function(t){e.WorkspaceSvg.superClass_.deleteVariableById.call(this,t),this.refreshToolboxSelection()},e.WorkspaceSvg.prototype.createVariable=function(t,n,r){return t=e.WorkspaceSvg.superClass_.createVariable.call(this,t,n,r),this.refreshToolboxSelection(),t},e.WorkspaceSvg.prototype.recordDeleteAreas=function(){e.utils.deprecation.warn("WorkspaceSvg.prototype.recordDeleteAreas","June 2021","June 2022","WorkspaceSvg.prototype.recordDragTargets"),this.recordDragTargets()},e.WorkspaceSvg.prototype.recordDragTargets=function(){var t=this.componentManager_.getComponents(e.ComponentManager.Capability.DRAG_TARGET,!0);this.dragTargetAreas_=[];for(var r,n=0;r=t[n];n++){var s=r.getClientRect();s&&this.dragTargetAreas_.push({component:r,clientRect:s})}},e.WorkspaceSvg.prototype.getDragTarget=function(t){for(var r,n=0;r=this.dragTargetAreas_[n];n++)if(r.clientRect.contains(t.clientX,t.clientY))return r.component;return null},e.WorkspaceSvg.prototype.onMouseDown_=function(t){var n=this.getGesture(t);n&&n.handleWsStart(t,this)},e.WorkspaceSvg.prototype.startDrag=function(t,n){(t=e.utils.mouseToSvg(t,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,t.y/=this.scale,this.dragDeltaXY_=e.utils.Coordinate.difference(n,t)},e.WorkspaceSvg.prototype.moveDrag=function(t){return(t=e.utils.mouseToSvg(t,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,t.y/=this.scale,e.utils.Coordinate.sum(this.dragDeltaXY_,t)},e.WorkspaceSvg.prototype.isDragging=function(){return null!=this.currentGesture_&&this.currentGesture_.isDragging()},e.WorkspaceSvg.prototype.isDraggable=function(){return this.options.moveOptions&&this.options.moveOptions.drag},e.WorkspaceSvg.prototype.isMovable=function(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch},e.WorkspaceSvg.prototype.isMovableHorizontally=function(){var t=!!this.scrollbar;return this.isMovable()&&(!t||t&&this.scrollbar.canScrollHorizontally())},e.WorkspaceSvg.prototype.isMovableVertically=function(){var t=!!this.scrollbar;return this.isMovable()&&(!t||t&&this.scrollbar.canScrollVertically())},e.WorkspaceSvg.prototype.onMouseWheel_=function(t){if(e.Gesture.inProgress())t.preventDefault(),t.stopPropagation();else{var n=this.options.zoomOptions&&this.options.zoomOptions.wheel,r=this.options.moveOptions&&this.options.moveOptions.wheel;if(n||r){var s=e.utils.getScrollDeltaPixels(t);!n||!t.ctrlKey&&r?(n=this.scrollX-s.x,r=this.scrollY-s.y,t.shiftKey&&!s.x&&(n=this.scrollX-s.y,r=this.scrollY),this.scroll(n,r)):(s=-s.y/50,n=e.utils.mouseToSvg(t,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(n.x,n.y,s)),t.preventDefault()}}},e.WorkspaceSvg.prototype.getBlocksBoundingBox=function(){var t=this.getTopBoundedElements();if(!t.length)return new e.utils.Rect(0,0,0,0);for(var n=t[0].getBoundingRectangle(),r=1;r<t.length;r++){var s=t[r];s.isInsertionMarker&&s.isInsertionMarker()||((s=s.getBoundingRectangle()).top<n.top&&(n.top=s.top),s.bottom>n.bottom&&(n.bottom=s.bottom),s.left<n.left&&(n.left=s.left),s.right>n.right&&(n.right=s.right))}return n},e.WorkspaceSvg.prototype.cleanUp=function(){this.setResizesEnabled(!1),e.Events.setGroup(!0);for(var s,t=this.getTopBlocks(!0),n=0,r=0;s=t[r];r++)if(s.isMovable()){var u=s.getRelativeToSurfaceXY();s.moveBy(-u.x,n-u.y),s.snapToGrid(),n=s.getRelativeToSurfaceXY().y+s.getHeightWidth().height+this.renderer_.getConstants().MIN_BLOCK_HEIGHT}e.Events.setGroup(!1),this.setResizesEnabled(!0)},e.WorkspaceSvg.prototype.showContextMenu=function(t){if(!this.options.readOnly&&!this.isFlyout){var n=e.ContextMenuRegistry.registry.getContextMenuOptions(e.ContextMenuRegistry.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(n,t),e.ContextMenu.show(t,n,this.RTL)}},e.WorkspaceSvg.prototype.updateToolbox=function(t){if(t=e.utils.toolbox.convertToolboxDefToJson(t)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(e.utils.toolbox.hasCategories(t)){if(!this.toolbox_)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=t,this.toolbox_.render(t)}else{if(!this.flyout_)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=t,this.flyout_.show(t)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")},e.WorkspaceSvg.prototype.markFocused=function(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(e.mainWorkspace=this,this.setBrowserFocus())},e.WorkspaceSvg.prototype.setBrowserFocus=function(){document.activeElement&&document.activeElement.blur&&document.activeElement.blur();try{this.getParentSvg().focus({preventScroll:!0})}catch(t){try{this.getParentSvg().parentNode.setActive()}catch(n){this.getParentSvg().parentNode.focus({preventScroll:!0})}}},e.WorkspaceSvg.prototype.zoom=function(t,n,r){r=Math.pow(this.options.zoomOptions.scaleSpeed,r);var s=this.scale*r;if(this.scale!=s){s>this.options.zoomOptions.maxScale?r=this.options.zoomOptions.maxScale/this.scale:s<this.options.zoomOptions.minScale&&(r=this.options.zoomOptions.minScale/this.scale);var u=this.getCanvas().getCTM(),b=this.getParentSvg().createSVGPoint();b.x=t,b.y=n,b=b.matrixTransform(u.inverse()),u=u.translate((t=b.x)*(1-r),(n=b.y)*(1-r)).scale(r),this.scrollX=u.e,this.scrollY=u.f,this.setScale(s)}},e.WorkspaceSvg.prototype.zoomCenter=function(t){var n=this.getMetrics();if(this.flyout_){var r=n.svgWidth?n.svgWidth/2:0;n=n.svgHeight?n.svgHeight/2:0}else r=n.viewWidth/2+n.absoluteLeft,n=n.viewHeight/2+n.absoluteTop;this.zoom(r,n,t)},e.WorkspaceSvg.prototype.zoomToFit=function(){if(this.isMovable()){var t=this.getMetrics(),n=t.viewWidth;t=t.viewHeight;var r=this.getBlocksBoundingBox(),s=r.right-r.left;if(r=r.bottom-r.top,s){this.flyout_&&(this.horizontalLayout?(t+=this.flyout_.getHeight(),r+=this.flyout_.getHeight()/this.scale):(n+=this.flyout_.getWidth(),s+=this.flyout_.getWidth()/this.scale)),n/=s,t/=r,e.Events.disable();try{this.setScale(Math.min(n,t)),this.scrollCenter()}finally{e.Events.enable()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},e.WorkspaceSvg.prototype.beginCanvasTransition=function(){e.utils.dom.addClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),e.utils.dom.addClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},e.WorkspaceSvg.prototype.endCanvasTransition=function(){e.utils.dom.removeClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),e.utils.dom.removeClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},e.WorkspaceSvg.prototype.scrollCenter=function(){if(this.isMovable()){var t=this.getMetrics(),n=(t.scrollWidth-t.viewWidth)/2,r=(t.scrollHeight-t.viewHeight)/2;this.scroll(n=-n-t.scrollLeft,r=-r-t.scrollTop)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},e.WorkspaceSvg.prototype.centerOnBlock=function(t){if(this.isMovable()){if(t=t?this.getBlockById(t):null){var n=t.getRelativeToSurfaceXY(),r=t.getHeightWidth(),s=this.scale;t=(n.x+(this.RTL?-1:1)*r.width/2)*s,n=(n.y+r.height/2)*s,r=this.getMetrics(),this.scroll(-(t-r.viewWidth/2),-(n-r.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},e.WorkspaceSvg.prototype.setScale=function(t){this.options.zoomOptions.maxScale&&t>this.options.zoomOptions.maxScale?t=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&t<this.options.zoomOptions.minScale&&(t=this.options.zoomOptions.minScale),this.scale=t,e.hideChaff(!1),this.flyout_&&(this.flyout_.reflow(),this.recordDragTargets()),this.grid_&&this.grid_.update(this.scale),t=this.getMetrics(),this.scrollX-=t.absoluteLeft,this.scrollY-=t.absoluteTop,t.viewLeft+=t.absoluteLeft,t.viewTop+=t.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout_?this.scrollbar.resizeView(t):this.scrollbar.resizeContent(t))},e.WorkspaceSvg.prototype.getScale=function(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale},e.WorkspaceSvg.prototype.scroll=function(t,n){e.hideChaff(!0);var r=this.getMetrics();t=Math.min(t,-r.scrollLeft),n=Math.min(n,-r.scrollTop);var s=r.scrollTop+Math.max(0,r.scrollHeight-r.viewHeight);t=Math.max(t,-(r.scrollLeft+Math.max(0,r.scrollWidth-r.viewWidth))),n=Math.max(n,-s),this.scrollX=t,this.scrollY=n,this.scrollbar&&this.scrollbar.set(-(t+r.scrollLeft),-(n+r.scrollTop),!1),this.translate(t+=r.absoluteLeft,n+=r.absoluteTop)},e.WorkspaceSvg.setTopLevelWorkspaceMetrics_=function(t){var n=this.getMetrics();"number"==typeof t.x&&(this.scrollX=-(n.scrollLeft+(n.scrollWidth-n.viewWidth)*t.x)),"number"==typeof t.y&&(this.scrollY=-(n.scrollTop+(n.scrollHeight-n.viewHeight)*t.y)),this.translate(this.scrollX+n.absoluteLeft,this.scrollY+n.absoluteTop)},e.WorkspaceSvg.prototype.getBlockById=function(t){return e.WorkspaceSvg.superClass_.getBlockById.call(this,t)},e.WorkspaceSvg.prototype.getTopBlocks=function(t){return e.WorkspaceSvg.superClass_.getTopBlocks.call(this,t)},e.WorkspaceSvg.prototype.addTopBlock=function(t){this.addTopBoundedElement(t),e.WorkspaceSvg.superClass_.addTopBlock.call(this,t)},e.WorkspaceSvg.prototype.removeTopBlock=function(t){this.removeTopBoundedElement(t),e.WorkspaceSvg.superClass_.removeTopBlock.call(this,t)},e.WorkspaceSvg.prototype.addTopComment=function(t){this.addTopBoundedElement(t),e.WorkspaceSvg.superClass_.addTopComment.call(this,t)},e.WorkspaceSvg.prototype.removeTopComment=function(t){this.removeTopBoundedElement(t),e.WorkspaceSvg.superClass_.removeTopComment.call(this,t)},e.WorkspaceSvg.prototype.addTopBoundedElement=function(t){this.topBoundedElements_.push(t)},e.WorkspaceSvg.prototype.removeTopBoundedElement=function(t){e.utils.arrayRemove(this.topBoundedElements_,t)},e.WorkspaceSvg.prototype.getTopBoundedElements=function(){return[].concat(this.topBoundedElements_)},e.WorkspaceSvg.prototype.setResizesEnabled=function(t){var n=!this.resizesEnabled_&&t;this.resizesEnabled_=t,n&&this.resizeContents()},e.WorkspaceSvg.prototype.clear=function(){this.setResizesEnabled(!1),e.WorkspaceSvg.superClass_.clear.call(this),this.topBoundedElements_=[],this.setResizesEnabled(!0)},e.WorkspaceSvg.prototype.registerButtonCallback=function(t,n){if("function"!=typeof n)throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks_[t]=n},e.WorkspaceSvg.prototype.getButtonCallback=function(t){return(t=this.flyoutButtonCallbacks_[t])?t:null},e.WorkspaceSvg.prototype.removeButtonCallback=function(t){this.flyoutButtonCallbacks_[t]=null},e.WorkspaceSvg.prototype.registerToolboxCategoryCallback=function(t,n){if("function"!=typeof n)throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks_[t]=n},e.WorkspaceSvg.prototype.getToolboxCategoryCallback=function(t){return this.toolboxCategoryCallbacks_[t]||null},e.WorkspaceSvg.prototype.removeToolboxCategoryCallback=function(t){this.toolboxCategoryCallbacks_[t]=null},e.WorkspaceSvg.prototype.getGesture=function(t){var n="mousedown"==t.type||"touchstart"==t.type||"pointerdown"==t.type,r=this.currentGesture_;return r?n&&r.hasStarted()?(console.warn("Tried to start the same gesture twice."),r.cancel(),null):r:n?this.currentGesture_=new e.TouchGesture(t,this):null},e.WorkspaceSvg.prototype.clearGesture=function(){this.currentGesture_=null},e.WorkspaceSvg.prototype.cancelCurrentGesture=function(){this.currentGesture_&&this.currentGesture_.cancel()},e.WorkspaceSvg.prototype.getAudioManager=function(){return this.audioManager_},e.WorkspaceSvg.prototype.getGrid=function(){return this.grid_},e.inject=function(t,n){if(e.checkBlockColourConstants(),"string"==typeof t&&(t=document.getElementById(t)||document.querySelector(t)),!t||!e.utils.dom.containsNode(document,t))throw Error("Error: container is not in current document.");n=new e.Options(n||{});var r=document.createElement("div");r.className="injectionDiv",r.tabIndex=0,e.utils.aria.setState(r,e.utils.aria.State.LABEL,e.Msg.WORKSPACE_ARIA_LABEL),t.appendChild(r),t=e.createDom_(r,n);var s=new e.BlockDragSurfaceSvg(r),u=new e.WorkspaceDragSurfaceSvg(r),b=e.createMainWorkspace_(t,n,s,u);return e.init_(b),e.mainWorkspace=b,e.svgResize(b),r.addEventListener("focusin",function(){e.mainWorkspace=b}),b},e.createDom_=function(t,n){t.setAttribute("dir","LTR"),e.Css.inject(n.hasCss,n.pathToMedia),t=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{xmlns:e.utils.dom.SVG_NS,"xmlns:html":e.utils.dom.HTML_NS,"xmlns:xlink":e.utils.dom.XLINK_NS,version:"1.1",class:"blocklySvg",tabindex:"0"},t);var r=e.utils.dom.createSvgElement(e.utils.Svg.DEFS,{},t),s=String(Math.random()).substring(2);return n.gridPattern=e.Grid.createDom(s,n.gridOptions,r),t},e.createMainWorkspace_=function(t,n,r,s){return n.parentWorkspace=null,(n=new e.WorkspaceSvg(n,r,s)).scale=(r=n.options).zoomOptions.startScale,t.appendChild(n.createDom("blocklyMainBackground")),e.utils.dom.addClass(n.getInjectionDiv(),n.getRenderer().getClassName()),e.utils.dom.addClass(n.getInjectionDiv(),n.getTheme().getClassName()),!r.hasCategories&&r.languageTree&&(s=n.addFlyout(e.utils.Svg.SVG),e.utils.dom.insertAfter(s,t)),r.hasTrashcan&&n.addTrashcan(),r.zoomOptions&&r.zoomOptions.controls&&n.addZoomControls(),n.getThemeManager().subscribe(t,"workspaceBackgroundColour","background-color"),n.translate(0,0),n.addChangeListener(e.bumpIntoBoundsHandler_(n)),e.svgResize(n),e.WidgetDiv.createDom(),e.DropDownDiv.createDom(),e.Tooltip.createDom(),n},e.extractObjectFromEvent_=function(t,n){var r=null;switch(n.type){case e.Events.BLOCK_CREATE:case e.Events.BLOCK_MOVE:(r=t.getBlockById(n.blockId))&&(r=r.getRootBlock());break;case e.Events.COMMENT_CREATE:case e.Events.COMMENT_MOVE:r=t.getCommentById(n.commentId)}return r},e.bumpTopObjectsIntoBounds_=function(t){var n=t.getMetricsManager();if(n.hasFixedEdges()&&!t.isDragging()){n=n.getScrollMetrics(!0);for(var u,r=t.getTopBoundedElements(),s=0;u=r[s];s++)e.bumpObjectIntoBounds_(t,n,u)}},e.bumpIntoBoundsHandler_=function(t){return function(n){var r=t.getMetricsManager();if(r.hasFixedEdges()&&!t.isDragging())if(-1!==e.Events.BUMP_EVENTS.indexOf(n.type)){r=r.getScrollMetrics(!0);var s=e.extractObjectFromEvent_(t,n);if(s){var u=e.Events.getGroup();e.Events.setGroup(n.group),e.bumpObjectIntoBounds_(t,r,s)&&!n.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),null!==u&&e.Events.setGroup(u)}}else n.type===e.Events.VIEWPORT_CHANGE&&n.scale>n.oldScale&&e.bumpTopObjectsIntoBounds_(t)}},e.bumpObjectIntoBounds_=function(t,n,r){var s=r.getBoundingRectangle(),u=s.right-s.left,b=e.utils.math.clamp(n.top,s.top,n.top+n.height-(s.bottom-s.top))-s.top,x=n.left;return n=n.left+n.width-u,t.RTL?x=Math.min(n,x):n=Math.max(x,n),!(!(t=e.utils.math.clamp(x,s.left,n)-s.left)&&!b||(r.moveBy(t,b),0))},e.init_=function(t){var n=t.options,r=t.getParentSvg();if(e.browserEvents.conditionalBind(r.parentNode,"contextmenu",null,function(u){e.utils.isTargetInput(u)||u.preventDefault()}),r=e.browserEvents.conditionalBind(window,"resize",null,function(){e.hideChaff(!0),e.svgResize(t),e.bumpTopObjectsIntoBounds_(t)}),t.setResizeHandlerWrapper(r),e.inject.bindDocumentEvents_(),n.languageTree){r=t.getToolbox();var s=t.getFlyout(!0);r?r.init():s&&(s.init(t),s.show(n.languageTree),"function"==typeof s.scrollToStart&&s.scrollToStart())}n.hasTrashcan&&t.trashcan.init(),n.zoomOptions&&n.zoomOptions.controls&&t.zoomControls_.init(),n.moveOptions&&n.moveOptions.scrollbars?(t.scrollbar=new e.ScrollbarPair(t,!0===n.moveOptions.scrollbars||!!n.moveOptions.scrollbars.horizontal,!0===n.moveOptions.scrollbars||!!n.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),t.scrollbar.resize()):t.setMetrics({x:.5,y:.5}),n.hasSounds&&e.inject.loadSounds_(n.pathToMedia,t)},e.inject.bindDocumentEvents_=function(){e.documentEventsBound_||(e.browserEvents.conditionalBind(document,"scroll",null,function(){for(var r,t=e.Workspace.getAll(),n=0;r=t[n];n++)r.updateInverseScreenCTM&&r.updateInverseScreenCTM()}),e.browserEvents.conditionalBind(document,"keydown",null,e.onKeyDown),e.browserEvents.bind(document,"touchend",null,e.longStop_),e.browserEvents.bind(document,"touchcancel",null,e.longStop_),e.utils.userAgent.IPAD&&e.browserEvents.conditionalBind(window,"orientationchange",document,function(){e.svgResize(e.getMainWorkspace())})),e.documentEventsBound_=!0},e.inject.loadSounds_=function(t,n){var r=n.getAudioManager();r.load([t+"click.mp3",t+"click.wav",t+"click.ogg"],"click"),r.load([t+"disconnect.wav",t+"disconnect.mp3",t+"disconnect.ogg"],"disconnect"),r.load([t+"delete.mp3",t+"delete.ogg",t+"delete.wav"],"delete");var s=[];t=function(){for(;s.length;)e.browserEvents.unbind(s.pop());r.preload()},s.push(e.browserEvents.conditionalBind(document,"mousemove",null,t,!0)),s.push(e.browserEvents.conditionalBind(document,"touchstart",null,t,!0))},e.Names=function(t,n){if(this.variablePrefix_=n||"",this.reservedDict_=Object.create(null),t)for(t=t.split(","),n=0;n<t.length;n++)this.reservedDict_[t[n]]=!0;this.reset()},e.Names.DEVELOPER_VARIABLE_TYPE="DEVELOPER_VARIABLE",e.Names.prototype.reset=function(){this.db_=Object.create(null),this.dbReverse_=Object.create(null),this.variableMap_=null},e.Names.prototype.setVariableMap=function(t){this.variableMap_=t},e.Names.prototype.getNameForUserVariable_=function(t){return this.variableMap_?(t=this.variableMap_.getVariableById(t))?t.name:null:(console.warn("Deprecated call to Blockly.Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:\nBlockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());"),null)},e.Names.prototype.populateVariables=function(t){t=e.Variables.allUsedVarModels(t);for(var n=0;n<t.length;n++)this.getName(t[n].getId(),e.VARIABLE_CATEGORY_NAME)},e.Names.prototype.populateProcedures=function(t){t=(t=e.Procedures.allProcedures(t))[0].concat(t[1]);for(var n=0;n<t.length;n++)this.getName(t[n][0],e.PROCEDURE_CATEGORY_NAME)},e.Names.prototype.getName=function(t,n){var r=t;n==e.VARIABLE_CATEGORY_NAME&&(t=this.getNameForUserVariable_(t))&&(r=t),t=r.toLowerCase();var s=n==e.VARIABLE_CATEGORY_NAME||n==e.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"";n in this.db_||(this.db_[n]=Object.create(null));var u=this.db_[n];return t in u?s+u[t]:(n=this.getDistinctName(r,n),u[t]=n.substr(s.length),n)},e.Names.prototype.getUserNames=function(t){return Object.keys(this.db_[t]||{})},e.Names.prototype.getDistinctName=function(t,n){t=this.safeName_(t);for(var r="";this.dbReverse_[t+r]||t+r in this.reservedDict_;)r=r?r+1:2;return this.dbReverse_[t+=r]=!0,(n==e.VARIABLE_CATEGORY_NAME||n==e.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"")+t},e.Names.prototype.safeName_=function(t){return t?(t=encodeURI(t.replace(/ /g,"_")).replace(/[^\w]/g,"_"),-1!="0123456789".indexOf(t[0])&&(t="my_"+t)):t=e.Msg.UNNAMED_KEY||"unnamed",t},e.Names.equals=function(t,n){return t.toLowerCase()==n.toLowerCase()},e.Procedures={},e.Procedures.NAME_TYPE=e.PROCEDURE_CATEGORY_NAME,e.Procedures.DEFAULT_ARG="x",e.Procedures.allProcedures=function(t){var n=t.getBlocksByType("procedures_defnoreturn",!1).map(function(r){return r.getProcedureDef()});return t=t.getBlocksByType("procedures_defreturn",!1).map(function(r){return r.getProcedureDef()}),n.sort(e.Procedures.procTupleComparator_),t.sort(e.Procedures.procTupleComparator_),[n,t]},e.Procedures.procTupleComparator_=function(t,n){return t[0].localeCompare(n[0],void 0,{sensitivity:"base"})},e.Procedures.findLegalName=function(t,n){if(n.isInFlyout)return t;for(t=t||e.Msg.UNNAMED_KEY||"unnamed";!e.Procedures.isLegalName_(t,n.workspace,n);){var r=t.match(/^(.*?)(\d+)$/);t=r?r[1]+(parseInt(r[2],10)+1):t+"2"}return t},e.Procedures.isLegalName_=function(t,n,r){return!e.Procedures.isNameUsed(t,n,r)},e.Procedures.isNameUsed=function(t,n,r){n=n.getAllBlocks(!1);for(var s=0;s<n.length;s++)if(n[s]!=r&&n[s].getProcedureDef){var u=n[s].getProcedureDef();if(e.Names.equals(u[0],t))return!0}return!1},e.Procedures.rename=function(t){t=t.trim();var n=e.Procedures.findLegalName(t,this.getSourceBlock()),r=this.getValue();if(r!=t&&r!=n){t=this.getSourceBlock().workspace.getAllBlocks(!1);for(var s=0;s<t.length;s++)t[s].renameProcedure&&t[s].renameProcedure(r,n)}return n},e.Procedures.flyoutCategory=function(t){function n(b,x){for(var B=0;B<b.length;B++){var Z=b[B][0],ot=b[B][1],et=e.utils.xml.createElement("block");et.setAttribute("type",x),et.setAttribute("gap",16);var Tt=e.utils.xml.createElement("mutation");for(Tt.setAttribute("name",Z),et.appendChild(Tt),Z=0;Z<ot.length;Z++){var Pt=e.utils.xml.createElement("arg");Pt.setAttribute("name",ot[Z]),Tt.appendChild(Pt)}r.push(et)}}var r=[];if(e.Blocks.procedures_defnoreturn){var s=e.utils.xml.createElement("block");s.setAttribute("type","procedures_defnoreturn"),s.setAttribute("gap",16);var u=e.utils.xml.createElement("field");u.setAttribute("name","NAME"),u.appendChild(e.utils.xml.createTextNode(e.Msg.PROCEDURES_DEFNORETURN_PROCEDURE)),s.appendChild(u),r.push(s)}return e.Blocks.procedures_defreturn&&((s=e.utils.xml.createElement("block")).setAttribute("type","procedures_defreturn"),s.setAttribute("gap",16),(u=e.utils.xml.createElement("field")).setAttribute("name","NAME"),u.appendChild(e.utils.xml.createTextNode(e.Msg.PROCEDURES_DEFRETURN_PROCEDURE)),s.appendChild(u),r.push(s)),e.Blocks.procedures_ifreturn&&((s=e.utils.xml.createElement("block")).setAttribute("type","procedures_ifreturn"),s.setAttribute("gap",16),r.push(s)),r.length&&r[r.length-1].setAttribute("gap",24),n((t=e.Procedures.allProcedures(t))[0],"procedures_callnoreturn"),n(t[1],"procedures_callreturn"),r},e.Procedures.updateMutatorFlyout_=function(t){for(var u,n=[],r=t.getBlocksByType("procedures_mutatorarg",!1),s=0;u=r[s];s++)n.push(u.getFieldValue("NAME"));r=e.utils.xml.createElement("xml"),(s=e.utils.xml.createElement("block")).setAttribute("type","procedures_mutatorarg"),(u=e.utils.xml.createElement("field")).setAttribute("name","NAME"),n=e.Variables.generateUniqueNameFromOptions(e.Procedures.DEFAULT_ARG,n),n=e.utils.xml.createTextNode(n),u.appendChild(n),s.appendChild(u),r.appendChild(s),t.updateToolbox(r)},e.Procedures.mutatorOpenListener=function(t){if(t.type==e.Events.BUBBLE_OPEN&&"mutator"===t.bubbleType&&t.isOpen){var n=(t=e.Workspace.getById(t.workspaceId).getBlockById(t.blockId)).type;("procedures_defnoreturn"==n||"procedures_defreturn"==n)&&(t=t.mutator.getWorkspace(),e.Procedures.updateMutatorFlyout_(t),t.addChangeListener(e.Procedures.mutatorChangeListener_))}},e.Procedures.mutatorChangeListener_=function(t){(t.type==e.Events.BLOCK_CREATE||t.type==e.Events.BLOCK_DELETE||t.type==e.Events.BLOCK_CHANGE)&&(t=e.Workspace.getById(t.workspaceId),e.Procedures.updateMutatorFlyout_(t))},e.Procedures.getCallers=function(t,n){var r=[];n=n.getAllBlocks(!1);for(var s=0;s<n.length;s++)if(n[s].getProcedureCall){var u=n[s].getProcedureCall();u&&e.Names.equals(u,t)&&r.push(n[s])}return r},e.Procedures.mutateCallers=function(t){var u,n=e.Events.recordUndo,r=t.getProcedureDef()[0],s=t.mutationToDom(!0);for(t=e.Procedures.getCallers(r,t.workspace),r=0;u=t[r];r++){var b=u.mutationToDom();b=b&&e.Xml.domToText(b),u.domToMutation(s);var x=u.mutationToDom();b!=(x=x&&e.Xml.domToText(x))&&(e.Events.recordUndo=!1,e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(u,"mutation",null,b,x)),e.Events.recordUndo=n)}},e.Procedures.getDefinition=function(t,n){n=n.getAllBlocks(!1);for(var r=0;r<n.length;r++)if(n[r].getProcedureDef){var s=n[r].getProcedureDef();if(s&&e.Names.equals(s[0],t))return n[r]}return null},e.ShortcutRegistry=function(){e.ShortcutRegistry.registry=this,this.registry_=Object.create(null),this.keyMap_=Object.create(null)},e.ShortcutRegistry.modifierKeys={Shift:e.utils.KeyCodes.SHIFT,Control:e.utils.KeyCodes.CTRL,Alt:e.utils.KeyCodes.ALT,Meta:e.utils.KeyCodes.META},e.ShortcutRegistry.prototype.register=function(t,n){if(this.registry_[t.name]&&!n)throw Error('Shortcut with name "'+t.name+'" already exists.');this.registry_[t.name]=t},e.ShortcutRegistry.prototype.unregister=function(t){return this.registry_[t]?(this.removeAllKeyMappings(t),delete this.registry_[t],!0):(console.warn('Keyboard shortcut with name "'+t+'" not found.'),!1)},e.ShortcutRegistry.prototype.addKeyMapping=function(t,n,r){t=String(t);var s=this.keyMap_[t];if(s&&!r)throw Error('Shortcut with name "'+n+'" collides with shortcuts '+s.toString());s&&r?s.unshift(n):this.keyMap_[t]=[n]},e.ShortcutRegistry.prototype.removeKeyMapping=function(t,n,r){var s=this.keyMap_[t];if(!s&&!r)return console.warn('No keyboard shortcut with name "'+n+'" registered with key code "'+t+'"'),!1;var u=s.indexOf(n);return-1<u?(s.splice(u,1),0==s.length&&delete this.keyMap_[t],!0):(r||console.warn('No keyboard shortcut with name "'+n+'" registered with key code "'+t+'"'),!1)},e.ShortcutRegistry.prototype.removeAllKeyMappings=function(t){for(var n in this.keyMap_)this.removeKeyMapping(n,t,!0)},e.ShortcutRegistry.prototype.setKeyMap=function(t){this.keyMap_=t},e.ShortcutRegistry.prototype.getKeyMap=function(){return e.utils.object.deepMerge(Object.create(null),this.keyMap_)},e.ShortcutRegistry.prototype.getRegistry=function(){return e.utils.object.deepMerge(Object.create(null),this.registry_)},e.ShortcutRegistry.prototype.onKeyDown=function(t,n){var r=this.serializeKeyEvent_(n);if(!(r=this.getShortcutNamesByKeyCode(r)))return!1;for(var u,s=0;u=r[s];s++)if((!(u=this.registry_[u]).preconditionFn||u.preconditionFn(t))&&u.callback&&u.callback(t,n,u))return!0;return!1},e.ShortcutRegistry.prototype.getShortcutNamesByKeyCode=function(t){return this.keyMap_[t]||[]},e.ShortcutRegistry.prototype.getKeyCodesByShortcutName=function(t){var r,n=[];for(r in this.keyMap_)-1<this.keyMap_[r].indexOf(t)&&n.push(r);return n},e.ShortcutRegistry.prototype.serializeKeyEvent_=function(t){var r,n="";for(r in e.ShortcutRegistry.modifierKeys)t.getModifierState(r)&&(""!=n&&(n+="+"),n+=r);return""!=n&&t.keyCode?n=n+"+"+t.keyCode:t.keyCode&&(n=t.keyCode.toString()),n},e.ShortcutRegistry.prototype.checkModifiers_=function(t){for(var s,n=e.utils.object.values(e.ShortcutRegistry.modifierKeys),r=0;s=t[r];r++)if(0>n.indexOf(s))throw Error(s+" is not a valid modifier key.")},e.ShortcutRegistry.prototype.createSerializedKey=function(t,n){var r="";if(n)for(var s in this.checkModifiers_(n),e.ShortcutRegistry.modifierKeys)-1<n.indexOf(e.ShortcutRegistry.modifierKeys[s])&&(""!=r&&(r+="+"),r+=s);return""!=r&&t?r=r+"+"+t:t&&(r=t.toString()),r},new e.ShortcutRegistry,e.VariableModel=function(t,n,r,s){this.workspace=t,this.name=n,this.type=r||"",this.id_=s||e.utils.genUid(),e.Events.fire(new(e.Events.get(e.Events.VAR_CREATE))(this))},e.VariableModel.prototype.getId=function(){return this.id_},e.VariableModel.compareByName=function(t,n){return t.name.localeCompare(n.name,void 0,{sensitivity:"base"})},e.Variables={},e.Variables.NAME_TYPE=e.VARIABLE_CATEGORY_NAME,e.Variables.allUsedVarModels=function(t){var n=t.getAllBlocks(!1);t=Object.create(null);for(var r=0;r<n.length;r++){var s=n[r].getVarModels();if(s)for(var u=0;u<s.length;u++){var b=s[u],x=b.getId();x&&(t[x]=b)}}for(x in n=[],t)n.push(t[x]);return n},e.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_={},e.Variables.allDeveloperVariables=function(t){t=t.getAllBlocks(!1);for(var s,n=Object.create(null),r=0;s=t[r];r++){var u=s.getDeveloperVariables;if(!u&&s.getDeveloperVars&&(u=s.getDeveloperVars,e.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[s.type]||(console.warn("Function getDeveloperVars() deprecated. Use getDeveloperVariables() (block type '"+s.type+"')"),e.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[s.type]=!0)),u)for(s=u(),u=0;u<s.length;u++)n[s[u]]=!0}return Object.keys(n)},e.Variables.flyoutCategory=function(t){var n=[],r=document.createElement("button");return r.setAttribute("text","%{BKY_NEW_VARIABLE}"),r.setAttribute("callbackKey","CREATE_VARIABLE"),t.registerButtonCallback("CREATE_VARIABLE",function(s){e.Variables.createVariableButtonHandler(s.getTargetWorkspace())}),n.push(r),t=e.Variables.flyoutCategoryBlocks(t),n.concat(t)},e.Variables.flyoutCategoryBlocks=function(t){var n=[];if(0<(t=t.getVariablesOfType("")).length){var r=t[t.length-1];if(e.Blocks.variables_set){var s=e.utils.xml.createElement("block");s.setAttribute("type","variables_set"),s.setAttribute("gap",e.Blocks.math_change?8:24),s.appendChild(e.Variables.generateVariableFieldDom(r)),n.push(s)}if(e.Blocks.math_change&&((s=e.utils.xml.createElement("block")).setAttribute("type","math_change"),s.setAttribute("gap",e.Blocks.variables_get?20:8),s.appendChild(e.Variables.generateVariableFieldDom(r)),r=e.Xml.textToDom('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),s.appendChild(r),n.push(s)),e.Blocks.variables_get){t.sort(e.VariableModel.compareByName),r=0;for(var u;u=t[r];r++)(s=e.utils.xml.createElement("block")).setAttribute("type","variables_get"),s.setAttribute("gap",8),s.appendChild(e.Variables.generateVariableFieldDom(u)),n.push(s)}}return n},e.Variables.VAR_LETTER_OPTIONS="ijkmnopqrstuvwxyzabcdefgh",e.Variables.generateUniqueName=function(t){return e.Variables.generateUniqueNameFromOptions(e.Variables.VAR_LETTER_OPTIONS.charAt(0),t.getAllVariableNames())},e.Variables.generateUniqueNameFromOptions=function(t,n){if(!n.length)return t;for(var r=e.Variables.VAR_LETTER_OPTIONS,s="",u=r.indexOf(t);;){for(var b=!1,x=0;x<n.length;x++)if(n[x].toLowerCase()==t){b=!0;break}if(!b)return t;++u==r.length&&(u=0,s=Number(s)+1),t=r.charAt(u)+s}},e.Variables.createVariableButtonHandler=function(t,n,r){var s=r||"",u=function(b){e.Variables.promptName(e.Msg.NEW_VARIABLE_TITLE,b,function(x){if(x){var B=e.Variables.nameUsedWithAnyType(x,t);if(B){if(B.type==s)var Z=e.Msg.VARIABLE_ALREADY_EXISTS.replace("%1",B.name);else Z=(Z=e.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE).replace("%1",B.name).replace("%2",B.type);e.alert(Z,function(){u(x)})}else t.createVariable(x,s),n&&n(x)}else n&&n(null)})};u("")},e.Variables.createVariable=e.Variables.createVariableButtonHandler,e.Variables.renameVariable=function(t,n,r){var s=function(u){var b=e.Msg.RENAME_VARIABLE_TITLE.replace("%1",n.name);e.Variables.promptName(b,u,function(x){if(x){var B=e.Variables.nameUsedWithOtherType_(x,n.type,t);B?(B=e.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",B.name).replace("%2",B.type),e.alert(B,function(){s(x)})):(t.renameVariableById(n.getId(),x),r&&r(x))}else r&&r(null)})};s("")},e.Variables.promptName=function(t,n,r){e.prompt(t,n,function(s){s&&((s=s.replace(/[\s\xa0]+/g," ").trim())==e.Msg.RENAME_VARIABLE||s==e.Msg.NEW_VARIABLE)&&(s=null),r(s)})},e.Variables.nameUsedWithOtherType_=function(t,n,r){r=r.getVariableMap().getAllVariables(),t=t.toLowerCase();for(var u,s=0;u=r[s];s++)if(u.name.toLowerCase()==t&&u.type!=n)return u;return null},e.Variables.nameUsedWithAnyType=function(t,n){n=n.getVariableMap().getAllVariables(),t=t.toLowerCase();for(var s,r=0;s=n[r];r++)if(s.name.toLowerCase()==t)return s;return null},e.Variables.generateVariableFieldDom=function(t){var n=e.utils.xml.createElement("field");return n.setAttribute("name","VAR"),n.setAttribute("id",t.getId()),n.setAttribute("variabletype",t.type),t=e.utils.xml.createTextNode(t.name),n.appendChild(t),n},e.Variables.getOrCreateVariablePackage=function(t,n,r,s){var u=e.Variables.getVariable(t,n,r,s);return u||(u=e.Variables.createVariable_(t,n,r,s)),u},e.Variables.getVariable=function(t,n,r,s){var u=t.getPotentialVariableMap(),b=null;if(n&&(!(b=t.getVariableById(n))&&u&&(b=u.getVariableById(n)),b))return b;if(r){if(null==s)throw Error("Tried to look up a variable by name without a type");!(b=t.getVariable(r,s))&&u&&(b=u.getVariable(r,s))}return b},e.Variables.createVariable_=function(t,n,r,s){var u=t.getPotentialVariableMap();return r||(r=e.Variables.generateUniqueName(t.isFlyout?t.targetWorkspace:t)),u?u.createVariable(r,s,n):t.createVariable(r,s,n)},e.Variables.getAddedVariables=function(t,n){t=t.getAllVariables();var r=[];if(n.length!=t.length)for(var s=0;s<t.length;s++){var u=t[s];-1==n.indexOf(u)&&r.push(u)}return r},e.VERSION="6.20210701.0",e.mainWorkspace=null,e.selected=null,e.draggingConnections=[],e.clipboardXml_=null,e.clipboardSource_=null,e.clipboardTypeCounts_=null,e.cache3dSupported_=null,e.parentContainer=null,e.svgSize=function(t){return e.utils.deprecation.warn("Blockly.svgSize","March 2021","March 2022","workspace.getCachedParentSvgSize"),new e.utils.Size(t.cachedWidth_,t.cachedHeight_)},e.resizeSvgContents=function(t){t.resizeContents()},e.svgResize=function(t){for(;t.options.parentWorkspace;)t=t.options.parentWorkspace;var n=t.getParentSvg(),r=t.getCachedParentSvgSize(),s=n.parentNode;if(s){var u=s.offsetWidth;s=s.offsetHeight,r.width!=u&&(n.setAttribute("width",u+"px"),t.setCachedParentSvgSize(u,null)),r.height!=s&&(n.setAttribute("height",s+"px"),t.setCachedParentSvgSize(null,s)),t.resize()}},e.onKeyDown=function(t){var n=e.mainWorkspace;n&&!(e.utils.isTargetInput(t)||n.rendered&&!n.isVisible())&&e.ShortcutRegistry.registry.onKeyDown(n,t)},e.deleteBlock=function(t){t.workspace.isFlyout||(e.Events.setGroup(!0),e.hideChaff(),t.dispose(!t.outputConnection,!0),e.Events.setGroup(!1))},e.copy=function(t){(t=t.toCopyData())&&(e.clipboardXml_=t.xml,e.clipboardSource_=t.source,e.clipboardTypeCounts_=t.typeCounts)},e.paste=function(){if(!e.clipboardXml_)return!1;var t=e.clipboardSource_;return t.isFlyout&&(t=t.targetWorkspace),!(!e.clipboardTypeCounts_||!t.isCapacityAvailable(e.clipboardTypeCounts_)||(e.Events.setGroup(!0),t.paste(e.clipboardXml_),e.Events.setGroup(!1),0))},e.duplicate=function(t){var n=e.clipboardXml_,r=e.clipboardSource_;e.copy(t),t.workspace.paste(e.clipboardXml_),e.clipboardXml_=n,e.clipboardSource_=r},e.onContextMenu_=function(t){e.utils.isTargetInput(t)||t.preventDefault()},e.hideChaff=function(t){e.Tooltip.hide(),e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation();var n=!!t;e.getMainWorkspace().getComponentManager().getComponents(e.ComponentManager.Capability.AUTOHIDEABLE,!0).forEach(function(r){r.autoHide(n)})},e.getMainWorkspace=function(){return e.mainWorkspace},e.alert=function(t,n){alert(t),n&&n()},e.confirm=function(t,n){n(confirm(t))},e.prompt=function(t,n,r){r(prompt(t,n))},e.jsonInitFactory_=function(t){return function(){this.jsonInit(t)}},e.defineBlocksWithJsonArray=function(t){for(var n=0;n<t.length;n++){var r=t[n];if(r){var s=r.type;null==s||""===s?console.warn("Block definition #"+n+" in JSON array is missing a type attribute. Skipping."):(e.Blocks[s]&&console.warn("Block definition #"+n+' in JSON array overwrites prior definition of "'+s+'".'),e.Blocks[s]={init:e.jsonInitFactory_(r)})}else console.warn("Block definition #"+n+" in JSON array is "+r+". Skipping.")}},e.isNumber=function(t){return/^\s*-?\d+(\.\d+)?\s*$/.test(t)},e.hueToHex=function(t){return e.utils.colour.hsvToHex(t,e.HSV_SATURATION,255*e.HSV_VALUE)},e.checkBlockColourConstants=function(){e.checkBlockColourConstant_("LOGIC_HUE",["Blocks","logic","HUE"],void 0),e.checkBlockColourConstant_("LOGIC_HUE",["Constants","Logic","HUE"],210),e.checkBlockColourConstant_("LOOPS_HUE",["Blocks","loops","HUE"],void 0),e.checkBlockColourConstant_("LOOPS_HUE",["Constants","Loops","HUE"],120),e.checkBlockColourConstant_("MATH_HUE",["Blocks","math","HUE"],void 0),e.checkBlockColourConstant_("MATH_HUE",["Constants","Math","HUE"],230),e.checkBlockColourConstant_("TEXTS_HUE",["Blocks","texts","HUE"],void 0),e.checkBlockColourConstant_("TEXTS_HUE",["Constants","Text","HUE"],160),e.checkBlockColourConstant_("LISTS_HUE",["Blocks","lists","HUE"],void 0),e.checkBlockColourConstant_("LISTS_HUE",["Constants","Lists","HUE"],260),e.checkBlockColourConstant_("COLOUR_HUE",["Blocks","colour","HUE"],void 0),e.checkBlockColourConstant_("COLOUR_HUE",["Constants","Colour","HUE"],20),e.checkBlockColourConstant_("VARIABLES_HUE",["Blocks","variables","HUE"],void 0),e.checkBlockColourConstant_("VARIABLES_HUE",["Constants","Variables","HUE"],330),e.checkBlockColourConstant_("VARIABLES_DYNAMIC_HUE",["Constants","VariablesDynamic","HUE"],310),e.checkBlockColourConstant_("PROCEDURES_HUE",["Blocks","procedures","HUE"],void 0)},e.checkBlockColourConstant_=function(t,n,r){for(var s="Blockly",u=e,b=0;b<n.length;++b)s+="."+n[b],u&&(u=u[n[b]]);u&&u!==r&&(t=(void 0===r?'%1 has been removed. Use Blockly.Msg["%2"].':'%1 is deprecated and unused. Override Blockly.Msg["%2"].').replace("%1",s).replace("%2",t),console.warn(t))},e.setParentContainer=function(t){e.parentContainer=t},e.bindEvent_=e.browserEvents.bind,e.unbindEvent_=e.browserEvents.unbind,e.bindEventWithChecks_=e.browserEvents.conditionalBind,e.ALIGN_LEFT=e.constants.ALIGN.LEFT,e.ALIGN_CENTRE=e.constants.ALIGN.CENTRE,e.ALIGN_RIGHT=e.constants.ALIGN.RIGHT,e.INPUT_VALUE=e.connectionTypes.INPUT_VALUE,e.OUTPUT_VALUE=e.connectionTypes.OUTPUT_VALUE,e.NEXT_STATEMENT=e.connectionTypes.NEXT_STATEMENT,e.PREVIOUS_STATEMENT=e.connectionTypes.PREVIOUS_STATEMENT,e.DUMMY_INPUT=e.inputTypes.DUMMY,e.TOOLBOX_AT_TOP=e.utils.toolbox.Position.TOP,e.TOOLBOX_AT_BOTTOM=e.utils.toolbox.Position.BOTTOM,e.TOOLBOX_AT_LEFT=e.utils.toolbox.Position.LEFT,e.TOOLBOX_AT_RIGHT=e.utils.toolbox.Position.RIGHT,e.Events.BubbleOpen=function(t,n,r){e.Events.BubbleOpen.superClass_.constructor.call(this,t?t.workspace.id:void 0),this.blockId=t?t.id:null,this.isOpen=n,this.bubbleType=r},e.utils.object.inherits(e.Events.BubbleOpen,e.Events.UiBase),e.Events.BubbleOpen.prototype.type=e.Events.BUBBLE_OPEN,e.Events.BubbleOpen.prototype.toJson=function(){var t=e.Events.BubbleOpen.superClass_.toJson.call(this);return t.isOpen=this.isOpen,t.bubbleType=this.bubbleType,t.blockId=this.blockId,t},e.Events.BubbleOpen.prototype.fromJson=function(t){e.Events.BubbleOpen.superClass_.fromJson.call(this,t),this.isOpen=t.isOpen,this.bubbleType=t.bubbleType,this.blockId=t.blockId},e.registry.register(e.registry.Type.EVENT,e.Events.BUBBLE_OPEN,e.Events.BubbleOpen),e.Icon=function(t){this.block_=t,this.iconGroup_=null},e.Icon.prototype.collapseHidden=!0,e.Icon.prototype.SIZE=17,e.Icon.prototype.bubble_=null,e.Icon.prototype.iconXY_=null,e.Icon.prototype.createIcon=function(){this.iconGroup_||(this.iconGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyIconGroup"},null),this.block_.isInFlyout&&e.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly"),this.drawIcon_(this.iconGroup_),this.block_.getSvgRoot().appendChild(this.iconGroup_),e.browserEvents.conditionalBind(this.iconGroup_,"mouseup",this,this.iconClick_),this.updateEditable())},e.Icon.prototype.dispose=function(){e.utils.dom.removeNode(this.iconGroup_),this.iconGroup_=null,this.setVisible(!1),this.block_=null},e.Icon.prototype.updateEditable=function(){},e.Icon.prototype.isVisible=function(){return!!this.bubble_},e.Icon.prototype.iconClick_=function(t){this.block_.workspace.isDragging()||this.block_.isInFlyout||e.utils.isRightButton(t)||this.setVisible(!this.isVisible())},e.Icon.prototype.applyColour=function(){this.isVisible()&&this.bubble_.setColour(this.block_.style.colourPrimary)},e.Icon.prototype.setIconLocation=function(t){this.iconXY_=t,this.isVisible()&&this.bubble_.setAnchorLocation(t)},e.Icon.prototype.computeIconLocation=function(){var t=this.block_.getRelativeToSurfaceXY(),n=e.utils.getRelativeXY(this.iconGroup_);t=new e.utils.Coordinate(t.x+n.x+this.SIZE/2,t.y+n.y+this.SIZE/2),e.utils.Coordinate.equals(this.getIconLocation(),t)||this.setIconLocation(t)},e.Icon.prototype.getIconLocation=function(){return this.iconXY_},e.Icon.prototype.getCorrectedSize=function(){return new e.utils.Size(e.Icon.prototype.SIZE,e.Icon.prototype.SIZE-2)},e.Warning=function(t){e.Warning.superClass_.constructor.call(this,t),this.createIcon(),this.text_=Object.create(null)},e.utils.object.inherits(e.Warning,e.Icon),e.Warning.prototype.collapseHidden=!1,e.Warning.prototype.drawIcon_=function(t){e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},t),e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},t),e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},t)},e.Warning.prototype.setVisible=function(t){t!=this.isVisible()&&(e.Events.fire(new(e.Events.get(e.Events.BUBBLE_OPEN))(this.block_,t,"warning")),t?this.createBubble_():this.disposeBubble_())},e.Warning.prototype.createBubble_=function(){this.paragraphElement_=e.Bubble.textToDom(this.getText()),this.bubble_=e.Bubble.createNonEditableBubble(this.paragraphElement_,this.block_,this.iconXY_),this.applyColour()},e.Warning.prototype.disposeBubble_=function(){this.bubble_.dispose(),this.paragraphElement_=this.bubble_=null},e.Warning.prototype.setText=function(t,n){this.text_[n]!=t&&(t?this.text_[n]=t:delete this.text_[n],this.isVisible()&&(this.setVisible(!1),this.setVisible(!0)))},e.Warning.prototype.getText=function(){var n,t=[];for(n in this.text_)t.push(this.text_[n]);return t.join("\n")},e.Warning.prototype.dispose=function(){this.block_.warning=null,e.Icon.prototype.dispose.call(this)},e.Comment=function(t){e.Comment.superClass_.constructor.call(this,t),this.model_=t.commentModel,this.model_.text=this.model_.text||"",this.cachedText_="",this.onInputWrapper_=this.onChangeWrapper_=this.onWheelWrapper_=this.onMouseUpWrapper_=null,this.createIcon()},e.utils.object.inherits(e.Comment,e.Icon),e.Comment.prototype.drawIcon_=function(t){e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},t),e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},t),e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},t)},e.Comment.prototype.createEditor_=function(){this.foreignObject_=e.utils.dom.createSvgElement(e.utils.Svg.FOREIGNOBJECT,{x:e.Bubble.BORDER_WIDTH,y:e.Bubble.BORDER_WIDTH},null);var t=document.createElementNS(e.utils.dom.HTML_NS,"body");t.setAttribute("xmlns",e.utils.dom.HTML_NS),t.className="blocklyMinimalBody";var n=this.textarea_=document.createElementNS(e.utils.dom.HTML_NS,"textarea");return n.className="blocklyCommentTextarea",n.setAttribute("dir",this.block_.RTL?"RTL":"LTR"),n.value=this.model_.text,this.resizeTextarea_(),t.appendChild(n),this.foreignObject_.appendChild(t),this.onMouseUpWrapper_=e.browserEvents.conditionalBind(n,"mouseup",this,this.startEdit_,!0,!0),this.onWheelWrapper_=e.browserEvents.conditionalBind(n,"wheel",this,function(r){r.stopPropagation()}),this.onChangeWrapper_=e.browserEvents.conditionalBind(n,"change",this,function(r){this.cachedText_!=this.model_.text&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this.block_,"comment",null,this.cachedText_,this.model_.text))}),this.onInputWrapper_=e.browserEvents.conditionalBind(n,"input",this,function(r){this.model_.text=n.value}),setTimeout(n.focus.bind(n),0),this.foreignObject_},e.Comment.prototype.updateEditable=function(){e.Comment.superClass_.updateEditable.call(this),this.isVisible()&&(this.disposeBubble_(),this.createBubble_())},e.Comment.prototype.onBubbleResize_=function(){this.isVisible()&&(this.model_.size=this.bubble_.getBubbleSize(),this.resizeTextarea_())},e.Comment.prototype.resizeTextarea_=function(){var t=this.model_.size,n=2*e.Bubble.BORDER_WIDTH,r=t.width-n;t=t.height-n,this.foreignObject_.setAttribute("width",r),this.foreignObject_.setAttribute("height",t),this.textarea_.style.width=r-4+"px",this.textarea_.style.height=t-4+"px"},e.Comment.prototype.setVisible=function(t){t!=this.isVisible()&&(e.Events.fire(new(e.Events.get(e.Events.BUBBLE_OPEN))(this.block_,t,"comment")),(this.model_.pinned=t)?this.createBubble_():this.disposeBubble_())},e.Comment.prototype.createBubble_=function(){!this.block_.isEditable()||e.utils.userAgent.IE?this.createNonEditableBubble_():this.createEditableBubble_()},e.Comment.prototype.createEditableBubble_=function(){this.bubble_=new e.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,this.model_.size.width,this.model_.size.height),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerResizeEvent(this.onBubbleResize_.bind(this)),this.applyColour()},e.Comment.prototype.createNonEditableBubble_=function(){this.paragraphElement_=e.Bubble.textToDom(this.block_.getCommentText()),this.bubble_=e.Bubble.createNonEditableBubble(this.paragraphElement_,this.block_,this.iconXY_),this.applyColour()},e.Comment.prototype.disposeBubble_=function(){this.onMouseUpWrapper_&&(e.browserEvents.unbind(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onWheelWrapper_&&(e.browserEvents.unbind(this.onWheelWrapper_),this.onWheelWrapper_=null),this.onChangeWrapper_&&(e.browserEvents.unbind(this.onChangeWrapper_),this.onChangeWrapper_=null),this.onInputWrapper_&&(e.browserEvents.unbind(this.onInputWrapper_),this.onInputWrapper_=null),this.bubble_.dispose(),this.paragraphElement_=this.foreignObject_=this.textarea_=this.bubble_=null},e.Comment.prototype.startEdit_=function(t){this.bubble_.promote()&&this.textarea_.focus(),this.cachedText_=this.model_.text},e.Comment.prototype.getBubbleSize=function(){return this.model_.size},e.Comment.prototype.setBubbleSize=function(t,n){this.bubble_?this.bubble_.setBubbleSize(t,n):(this.model_.size.width=t,this.model_.size.height=n)},e.Comment.prototype.updateText=function(){this.textarea_?this.textarea_.value=this.model_.text:this.paragraphElement_&&(this.paragraphElement_.firstChild.textContent=this.model_.text)},e.Comment.prototype.dispose=function(){this.block_.comment=null,e.Icon.prototype.dispose.call(this)},e.Css.register(".blocklyCommentTextarea {,background-color: #fef49c;,border: 0;,outline: 0;,margin: 0;,padding: 3px;,resize: none;,display: block;,text-overflow: hidden;,}".split(",")),e.IComponent=function(){},e.IDragTarget=function(){},e.DragTarget=function(){},e.DragTarget.prototype.onDragEnter=function(t){},e.DragTarget.prototype.onDragOver=function(t){},e.DragTarget.prototype.onDragExit=function(t){},e.DragTarget.prototype.onDrop=function(t){},e.DragTarget.prototype.shouldPreventMove=function(t){return!1},e.IDeleteArea=function(){},e.DeleteArea=function(){e.DeleteArea.superClass_.constructor.call(this),this.wouldDelete_=!1},e.utils.object.inherits(e.DeleteArea,e.DragTarget),e.DeleteArea.prototype.wouldDelete=function(t,n){return t instanceof e.BlockSvg?(t=!t.getParent()&&t.isDeletable(),this.updateWouldDelete_(t&&!n)):this.updateWouldDelete_(t.isDeletable()),this.wouldDelete_},e.DeleteArea.prototype.updateWouldDelete_=function(t){this.wouldDelete_=t},e.IFlyout=function(){},e.Flyout=function(t){e.Flyout.superClass_.constructor.call(this),t.setMetrics=this.setMetrics_.bind(this),this.workspace_=new e.WorkspaceSvg(t),this.workspace_.setMetricsManager(new e.FlyoutMetricsManager(this.workspace_,this)),this.workspace_.isFlyout=!0,this.workspace_.setVisible(this.isVisible_),this.id=e.utils.genUid(),this.RTL=!!t.RTL,this.horizontalLayout=!1,this.toolboxPosition_=t.toolboxPosition,this.eventWrappers_=[],this.mats_=[],this.buttons_=[],this.listeners_=[],this.permanentlyDisabled_=[],this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.targetWorkspace=null},e.utils.object.inherits(e.Flyout,e.DeleteArea),e.Flyout.prototype.autoClose=!0,e.Flyout.prototype.isVisible_=!1,e.Flyout.prototype.containerVisible_=!0,e.Flyout.prototype.CORNER_RADIUS=8,e.Flyout.prototype.MARGIN=e.Flyout.prototype.CORNER_RADIUS,e.Flyout.prototype.GAP_X=3*e.Flyout.prototype.MARGIN,e.Flyout.prototype.GAP_Y=3*e.Flyout.prototype.MARGIN,e.Flyout.prototype.SCROLLBAR_MARGIN=2.5,e.Flyout.prototype.width_=0,e.Flyout.prototype.height_=0,e.Flyout.prototype.dragAngleRange_=70,e.Flyout.prototype.createDom=function(t){return this.svgGroup_=e.utils.dom.createSvgElement(t,{class:"blocklyFlyout",style:"display: none"},null),this.svgBackground_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_},e.Flyout.prototype.init=function(t){this.targetWorkspace=t,this.workspace_.targetWorkspace=t,this.workspace_.scrollbar=new e.ScrollbarPair(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),Array.prototype.push.apply(this.eventWrappers_,e.browserEvents.conditionalBind(this.svgGroup_,"wheel",this,this.wheel_)),this.autoClose||(this.filterWrapper_=this.filterForCapacity_.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper_)),Array.prototype.push.apply(this.eventWrappers_,e.browserEvents.conditionalBind(this.svgBackground_,"mousedown",this,this.onMouseDown_)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),t.getComponentManager().addComponent({component:this,weight:1,capabilities:[e.ComponentManager.Capability.DELETE_AREA,e.ComponentManager.Capability.DRAG_TARGET]})},e.Flyout.prototype.dispose=function(){this.hide(),this.workspace_.getComponentManager().removeComponent(this.id),e.browserEvents.unbind(this.eventWrappers_),this.filterWrapper_&&(this.targetWorkspace.removeChangeListener(this.filterWrapper_),this.filterWrapper_=null),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.targetWorkspace=null,this.workspace_.dispose(),this.workspace_=null),this.svgGroup_&&(e.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.targetWorkspace=this.svgBackground_=null},e.Flyout.prototype.getWidth=function(){return this.width_},e.Flyout.prototype.getHeight=function(){return this.height_},e.Flyout.prototype.getFlyoutScale=function(){return this.targetWorkspace.scale},e.Flyout.prototype.getWorkspace=function(){return this.workspace_},e.Flyout.prototype.isVisible=function(){return this.isVisible_},e.Flyout.prototype.setVisible=function(t){var n=t!=this.isVisible();this.isVisible_=t,n&&(this.autoClose||this.workspace_.recordDragTargets(),this.updateDisplay_())},e.Flyout.prototype.setContainerVisible=function(t){var n=t!=this.containerVisible_;this.containerVisible_=t,n&&this.updateDisplay_()},e.Flyout.prototype.updateDisplay_=function(){var t=!!this.containerVisible_&&this.isVisible();this.svgGroup_.style.display=t?"block":"none",this.workspace_.scrollbar.setContainerVisible(t)},e.Flyout.prototype.positionAt_=function(t,n,r,s){this.svgGroup_.setAttribute("width",t),this.svgGroup_.setAttribute("height",n),this.workspace_.setCachedParentSvgSize(t,n),"svg"==this.svgGroup_.tagName?e.utils.dom.setCssTransform(this.svgGroup_,"translate("+r+"px,"+s+"px)"):this.svgGroup_.setAttribute("transform","translate("+r+","+s+")"),(t=this.workspace_.scrollbar)&&(t.setOrigin(r,s),t.resize(),t.hScroll&&t.hScroll.setPosition(t.hScroll.position.x,t.hScroll.position.y),t.vScroll&&t.vScroll.setPosition(t.vScroll.position.x,t.vScroll.position.y))},e.Flyout.prototype.hide=function(){if(this.isVisible()){this.setVisible(!1);for(var n,t=0;n=this.listeners_[t];t++)e.browserEvents.unbind(n);this.listeners_.length=0,this.reflowWrapper_&&(this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowWrapper_=null)}},e.Flyout.prototype.show=function(t){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks_(),"string"==typeof t&&(t=this.getDynamicCategoryContents_(t)),this.setVisible(!0),t=e.utils.toolbox.convertFlyoutDefToJsonArray(t),t=this.createFlyoutInfo_(t),this.layout_(t.contents,t.gaps),this.listeners_.push(e.browserEvents.conditionalBind(this.svgBackground_,"mouseover",this,function(){for(var s,n=this.workspace_.getTopBlocks(!1),r=0;s=n[r];r++)s.removeSelect()})),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity_(),this.position(),this.reflowWrapper_=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper_)},e.Flyout.prototype.createFlyoutInfo_=function(t){var n=[],r=[];this.permanentlyDisabled_.length=0;for(var b,s=this.horizontalLayout?this.GAP_X:this.GAP_Y,u=0;b=t[u];u++)switch(b.custom&&(b=this.getDynamicCategoryContents_(b.custom),b=e.utils.toolbox.convertFlyoutDefToJsonArray(b),t.splice.apply(t,[u,1].concat(b)),b=t[u]),b.kind.toUpperCase()){case"BLOCK":var x=b,B=this.getBlockXml_(x);b=this.createBlock_(B),x=parseInt(x.gap||B.getAttribute("gap"),10),r.push(isNaN(x)?s:x),n.push({type:"block",block:b});break;case"SEP":this.addSeparatorGap_(b,r,s);break;case"LABEL":b=this.createButton_(b,!0),n.push({type:"button",button:b}),r.push(s);break;case"BUTTON":b=this.createButton_(b,!1),n.push({type:"button",button:b}),r.push(s)}return{contents:n,gaps:r}},e.Flyout.prototype.getDynamicCategoryContents_=function(t){if("function"!=typeof(t=this.workspace_.targetWorkspace.getToolboxCategoryCallback(t)))throw TypeError("Couldn't find a callback function when opening a toolbox category.");if(t=t(this.workspace_.targetWorkspace),!Array.isArray(t))throw new TypeError("Result of toolbox category callback must be an array.");return t},e.Flyout.prototype.createButton_=function(t,n){if(!e.FlyoutButton)throw Error("Missing require for Blockly.FlyoutButton");return new e.FlyoutButton(this.workspace_,this.targetWorkspace,t,n)},e.Flyout.prototype.createBlock_=function(t){return(t=e.Xml.domToBlock(t,this.workspace_)).isEnabled()||this.permanentlyDisabled_.push(t),t},e.Flyout.prototype.getBlockXml_=function(t){var n=null,r=t.blockxml;if(r&&"string"!=typeof r?n=r:r&&"string"==typeof r?(n=e.Xml.textToDom(r),t.blockxml=n):t.type&&((n=e.utils.xml.createElement("xml")).setAttribute("type",t.type),n.setAttribute("disabled",t.disabled),t.blockxml=n),!n)throw Error("Error: Invalid block definition. Block definition must have blockxml or type.");return n},e.Flyout.prototype.addSeparatorGap_=function(t,n,r){t=parseInt(t.gap,10),!isNaN(t)&&0<n.length?n[n.length-1]=t:n.push(r)},e.Flyout.prototype.clearOldBlocks_=function(){for(var r,t=this.workspace_.getTopBlocks(!1),n=0;r=t[n];n++)r.workspace==this.workspace_&&r.dispose(!1,!1);for(n=0;n<this.mats_.length;n++)(t=this.mats_[n])&&(e.Tooltip.unbindMouseEvents(t),e.utils.dom.removeNode(t));for(n=this.mats_.length=0;t=this.buttons_[n];n++)t.dispose();this.buttons_.length=0,this.workspace_.getPotentialVariableMap().clear()},e.Flyout.prototype.addBlockListeners_=function(t,n,r){this.listeners_.push(e.browserEvents.conditionalBind(t,"mousedown",null,this.blockMouseDown_(n))),this.listeners_.push(e.browserEvents.conditionalBind(r,"mousedown",null,this.blockMouseDown_(n))),this.listeners_.push(e.browserEvents.bind(t,"mouseenter",n,n.addSelect)),this.listeners_.push(e.browserEvents.bind(t,"mouseleave",n,n.removeSelect)),this.listeners_.push(e.browserEvents.bind(r,"mouseenter",n,n.addSelect)),this.listeners_.push(e.browserEvents.bind(r,"mouseleave",n,n.removeSelect))},e.Flyout.prototype.blockMouseDown_=function(t){var n=this;return function(r){var s=n.targetWorkspace.getGesture(r);s&&(s.setStartBlock(t),s.handleFlyoutStart(r,n))}},e.Flyout.prototype.onMouseDown_=function(t){var n=this.targetWorkspace.getGesture(t);n&&n.handleFlyoutStart(t,this)},e.Flyout.prototype.isBlockCreatable_=function(t){return t.isEnabled()},e.Flyout.prototype.createBlock=function(t){var n=null;e.Events.disable();var r=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{n=this.placeNewBlock_(t)}finally{e.Events.enable()}if(e.hideChaff(),t=e.Variables.getAddedVariables(this.targetWorkspace,r),e.Events.isEnabled()){for(e.Events.setGroup(!0),r=0;r<t.length;r++){var s=t[r];e.Events.fire(new(e.Events.get(e.Events.VAR_CREATE))(s))}e.Events.fire(new(e.Events.get(e.Events.BLOCK_CREATE))(n))}return this.autoClose?this.hide():this.filterForCapacity_(),n},e.Flyout.prototype.initFlyoutButton_=function(t,n,r){var s=t.createDom();t.moveTo(n,r),t.show(),this.listeners_.push(e.browserEvents.conditionalBind(s,"mousedown",this,this.onMouseDown_)),this.buttons_.push(t)},e.Flyout.prototype.createRect_=function(t,n,r,s,u){return(n=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{"fill-opacity":0,x:n,y:r,height:s.height,width:s.width},null)).tooltip=t,e.Tooltip.bindMouseEvents(n),this.workspace_.getCanvas().insertBefore(n,t.getSvgRoot()),t.flyoutRect_=n,this.mats_[u]=n},e.Flyout.prototype.moveRectToBlock_=function(t,n){var r=n.getHeightWidth();t.setAttribute("width",r.width),t.setAttribute("height",r.height),n=n.getRelativeToSurfaceXY(),t.setAttribute("y",n.y),t.setAttribute("x",this.RTL?n.x-r.width:n.x)},e.Flyout.prototype.filterForCapacity_=function(){for(var r,t=this.workspace_.getTopBlocks(!1),n=0;r=t[n];n++)if(-1==this.permanentlyDisabled_.indexOf(r))for(var s=this.targetWorkspace.isCapacityAvailable(e.utils.getBlockTypeCounts(r));r;)r.setEnabled(s),r=r.getNextBlock()},e.Flyout.prototype.reflow=function(){this.reflowWrapper_&&this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowInternal_(),this.reflowWrapper_&&this.workspace_.addChangeListener(this.reflowWrapper_)},e.Flyout.prototype.isScrollable=function(){return!!this.workspace_.scrollbar&&this.workspace_.scrollbar.isVisible()},e.Flyout.prototype.placeNewBlock_=function(t){var n=this.targetWorkspace;if(!t.getSvgRoot())throw Error("oldBlock is not rendered.");var r=e.Xml.blockToDom(t,!0);if(n.setResizesEnabled(!1),!(r=e.Xml.domToBlock(r,n)).getSvgRoot())throw Error("block is not rendered.");var s=n.getOriginOffsetInPixels(),u=this.workspace_.getOriginOffsetInPixels();return(t=t.getRelativeToSurfaceXY()).scale(this.workspace_.scale),t=e.utils.Coordinate.sum(u,t),(s=e.utils.Coordinate.difference(t,s)).scale(1/n.scale),r.moveBy(s.x,s.y),r},e.HorizontalFlyout=function(t){e.HorizontalFlyout.superClass_.constructor.call(this,t),this.horizontalLayout=!0},e.utils.object.inherits(e.HorizontalFlyout,e.Flyout),e.HorizontalFlyout.prototype.setMetrics_=function(t){if(this.isVisible()){var n=this.workspace_.getMetricsManager(),r=n.getScrollMetrics(),s=n.getViewMetrics();n=n.getAbsoluteMetrics(),"number"==typeof t.x&&(this.workspace_.scrollX=-(r.left+(r.width-s.width)*t.x)),this.workspace_.translate(this.workspace_.scrollX+n.left,this.workspace_.scrollY+n.top)}},e.HorizontalFlyout.prototype.getX=function(){return 0},e.HorizontalFlyout.prototype.getY=function(){if(!this.isVisible())return 0;var t=this.targetWorkspace.getMetricsManager(),n=t.getAbsoluteMetrics(),r=t.getViewMetrics();t=t.getToolboxMetrics();var s=this.toolboxPosition_==e.utils.toolbox.Position.TOP;return this.targetWorkspace.toolboxPosition==this.toolboxPosition_?this.targetWorkspace.getToolbox()?s?t.height:r.height-this.height_:s?0:r.height:s?0:r.height+n.top-this.height_},e.HorizontalFlyout.prototype.position=function(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var t=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=t.width,this.setBackgroundPath_(t.width-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),t=this.getX();var n=this.getY();this.positionAt_(this.width_,this.height_,t,n)}},e.HorizontalFlyout.prototype.setBackgroundPath_=function(t,n){var r=this.toolboxPosition_==e.utils.toolbox.Position.TOP,s=["M 0,"+(r?0:this.CORNER_RADIUS)];r?(s.push("h",t+2*this.CORNER_RADIUS),s.push("v",n),s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),s.push("h",-t),s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),s.push("h",t),s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),s.push("v",n),s.push("h",-t-2*this.CORNER_RADIUS)),s.push("z"),this.svgBackground_.setAttribute("d",s.join(" "))},e.HorizontalFlyout.prototype.scrollToStart=function(){this.workspace_.scrollbar.setX(this.RTL?1/0:0)},e.HorizontalFlyout.prototype.wheel_=function(t){var n=e.utils.getScrollDeltaPixels(t);if(n=n.x||n.y){var r=this.workspace_.getMetricsManager(),s=r.getScrollMetrics();n=r.getViewMetrics().left-s.left+n,this.workspace_.scrollbar.setX(n),e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation()}t.preventDefault(),t.stopPropagation()},e.HorizontalFlyout.prototype.layout_=function(t,n){this.workspace_.scale=this.targetWorkspace.scale;var r=this.MARGIN,s=r+this.tabWidth_;this.RTL&&(t=t.reverse());for(var b,u=0;b=t[u];u++)if("block"==b.type){for(var Z,x=(b=b.block).getDescendants(!1),B=0;Z=x[B];B++)Z.isInFlyout=!0;b.render(),x=b.getSvgRoot(),B=b.getHeightWidth(),Z=b.outputConnection?this.tabWidth_:0,b.moveBy(Z=this.RTL?s+B.width:s-Z,r),Z=this.createRect_(b,Z,r,B,u),s+=B.width+n[u],this.addBlockListeners_(x,b,Z)}else"button"==b.type&&(this.initFlyoutButton_(b.button,s,r),s+=b.button.width+n[u])},e.HorizontalFlyout.prototype.isDragTowardWorkspace=function(t){t=Math.atan2(t.y,t.x)/Math.PI*180;var n=this.dragAngleRange_;return t<90+n&&t>90-n||t>-90-n&&t<-90+n},e.HorizontalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;var t=this.svgGroup_.getBoundingClientRect(),n=t.top;return this.toolboxPosition_==e.utils.toolbox.Position.TOP?new e.utils.Rect(-1e9,n+t.height,-1e9,1e9):new e.utils.Rect(n,1e9,-1e9,1e9)},e.HorizontalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.getFlyoutScale();for(var s,t=0,n=this.workspace_.getTopBlocks(!1),r=0;s=n[r];r++)t=Math.max(t,s.getHeightWidth().height);if(t+=1.5*this.MARGIN,t*=this.workspace_.scale,this.height_!=(t+=e.Scrollbar.scrollbarThickness)){for(r=0;s=n[r];r++)s.flyoutRect_&&this.moveRectToBlock_(s.flyoutRect_,s);this.targetWorkspace.toolboxPosition!=this.toolboxPosition_||this.toolboxPosition_!=e.utils.toolbox.Position.TOP||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+t),this.height_=t,this.position(),this.targetWorkspace.recordDragTargets()}},e.registry.register(e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,e.registry.DEFAULT,e.HorizontalFlyout),e.VerticalFlyout=function(t){e.VerticalFlyout.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.VerticalFlyout,e.Flyout),e.VerticalFlyout.registryName="verticalFlyout",e.VerticalFlyout.prototype.setMetrics_=function(t){if(this.isVisible()){var n=this.workspace_.getMetricsManager(),r=n.getScrollMetrics(),s=n.getViewMetrics();n=n.getAbsoluteMetrics(),"number"==typeof t.y&&(this.workspace_.scrollY=-(r.top+(r.height-s.height)*t.y)),this.workspace_.translate(this.workspace_.scrollX+n.left,this.workspace_.scrollY+n.top)}},e.VerticalFlyout.prototype.getX=function(){if(!this.isVisible())return 0;var t=this.targetWorkspace.getMetricsManager(),n=t.getAbsoluteMetrics(),r=t.getViewMetrics();return t=t.getToolboxMetrics(),this.targetWorkspace.toolboxPosition==this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_==e.utils.toolbox.Position.LEFT?t.width:r.width-this.width_:this.toolboxPosition_==e.utils.toolbox.Position.LEFT?0:r.width:this.toolboxPosition_==e.utils.toolbox.Position.LEFT?0:r.width+n.left-this.width_},e.VerticalFlyout.prototype.getY=function(){return 0},e.VerticalFlyout.prototype.position=function(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var t=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=t.height,this.setBackgroundPath_(this.width_-this.CORNER_RADIUS,t.height-2*this.CORNER_RADIUS),t=this.getX();var n=this.getY();this.positionAt_(this.width_,this.height_,t,n)}},e.VerticalFlyout.prototype.setBackgroundPath_=function(t,n){var r=this.toolboxPosition_==e.utils.toolbox.Position.RIGHT,s=t+this.CORNER_RADIUS;(s=["M "+(r?s:0)+",0"]).push("h",r?-t:t),s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,r?0:1,r?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),s.push("v",Math.max(0,n)),s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,r?0:1,r?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),s.push("h",r?t:-t),s.push("z"),this.svgBackground_.setAttribute("d",s.join(" "))},e.VerticalFlyout.prototype.scrollToStart=function(){this.workspace_.scrollbar.setY(0)},e.VerticalFlyout.prototype.wheel_=function(t){var n=e.utils.getScrollDeltaPixels(t);if(n.y){var r=this.workspace_.getMetricsManager(),s=r.getScrollMetrics();n=r.getViewMetrics().top-s.top+n.y,this.workspace_.scrollbar.setY(n),e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation()}t.preventDefault(),t.stopPropagation()},e.VerticalFlyout.prototype.layout_=function(t,n){this.workspace_.scale=this.targetWorkspace.scale;for(var b,r=this.MARGIN,s=this.RTL?r:r+this.tabWidth_,u=0;b=t[u];u++)if("block"==b.type){for(var Z,x=(b=b.block).getDescendants(!1),B=0;Z=x[B];B++)Z.isInFlyout=!0;b.render(),x=b.getSvgRoot(),B=b.getHeightWidth(),b.moveBy(Z=b.outputConnection?s-this.tabWidth_:s,r),Z=this.createRect_(b,this.RTL?Z-B.width:Z,r,B,u),this.addBlockListeners_(x,b,Z),r+=B.height+n[u]}else"button"==b.type&&(this.initFlyoutButton_(b.button,s,r),r+=b.button.height+n[u])},e.VerticalFlyout.prototype.isDragTowardWorkspace=function(t){t=Math.atan2(t.y,t.x)/Math.PI*180;var n=this.dragAngleRange_;return t<n&&t>-n||t<-180+n||t>180-n},e.VerticalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;var t=this.svgGroup_.getBoundingClientRect(),n=t.left;return this.toolboxPosition_==e.utils.toolbox.Position.LEFT?new e.utils.Rect(-1e9,1e9,-1e9,n+t.width):new e.utils.Rect(-1e9,1e9,n,1e9)},e.VerticalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.getFlyoutScale();for(var s,t=0,n=this.workspace_.getTopBlocks(!1),r=0;s=n[r];r++){var u=s.getHeightWidth().width;s.outputConnection&&(u-=this.tabWidth_),t=Math.max(t,u)}for(r=0;s=this.buttons_[r];r++)t=Math.max(t,s.width);if(t+=1.5*this.MARGIN+this.tabWidth_,t*=this.workspace_.scale,this.width_!=(t+=e.Scrollbar.scrollbarThickness)){for(r=0;s=n[r];r++){if(this.RTL){u=s.getRelativeToSurfaceXY().x;var b=t/this.workspace_.scale-this.MARGIN;s.outputConnection||(b-=this.tabWidth_),s.moveBy(b-u,0)}s.flyoutRect_&&this.moveRectToBlock_(s.flyoutRect_,s)}if(this.RTL)for(r=0;s=this.buttons_[r];r++)n=s.getPosition().y,s.moveTo(t/this.workspace_.scale-s.width-this.MARGIN-this.tabWidth_,n);this.targetWorkspace.toolboxPosition!=this.toolboxPosition_||this.toolboxPosition_!=e.utils.toolbox.Position.LEFT||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX+t,this.targetWorkspace.scrollY),this.width_=t,this.position(),this.targetWorkspace.recordDragTargets()}},e.registry.register(e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,e.registry.DEFAULT,e.VerticalFlyout),e.FlyoutButton=function(t,n,r,s){this.workspace_=t,this.targetWorkspace_=n,this.text_=r.text,this.position_=new e.utils.Coordinate(0,0),this.isLabel_=s,this.callbackKey_=r.callbackKey||r.callbackkey,this.cssClass_=r["web-class"]||null,this.onMouseUpWrapper_=null,this.info=r},e.FlyoutButton.MARGIN_X=5,e.FlyoutButton.MARGIN_Y=2,e.FlyoutButton.prototype.width=0,e.FlyoutButton.prototype.height=0,e.FlyoutButton.prototype.createDom=function(){var t=this.isLabel_?"blocklyFlyoutLabel":"blocklyFlyoutButton";if(this.cssClass_&&(t+=" "+this.cssClass_),this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:t},this.workspace_.getCanvas()),!this.isLabel_)var n=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyFlyoutButtonShadow",rx:4,ry:4,x:1,y:1},this.svgGroup_);t=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:this.isLabel_?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:4,ry:4},this.svgGroup_);var r=e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:this.isLabel_?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup_),s=e.utils.replaceMessageReferences(this.text_);this.workspace_.RTL&&(s+="\u200f"),r.textContent=s,this.isLabel_&&(this.svgText_=r,this.workspace_.getThemeManager().subscribe(this.svgText_,"flyoutForegroundColour","fill"));var u=e.utils.style.getComputedStyle(r,"fontSize"),b=e.utils.style.getComputedStyle(r,"fontWeight"),x=e.utils.style.getComputedStyle(r,"fontFamily");return this.width=e.utils.dom.getFastTextWidthWithSizeString(r,u,b,x),s=e.utils.dom.measureFontMetrics(s,u,b,x),this.height=s.height,this.isLabel_||(this.width+=2*e.FlyoutButton.MARGIN_X,this.height+=2*e.FlyoutButton.MARGIN_Y,n.setAttribute("width",this.width),n.setAttribute("height",this.height)),t.setAttribute("width",this.width),t.setAttribute("height",this.height),r.setAttribute("x",this.width/2),r.setAttribute("y",this.height/2-s.height/2+s.baseline),this.updateTransform_(),this.onMouseUpWrapper_=e.browserEvents.conditionalBind(this.svgGroup_,"mouseup",this,this.onMouseUp_),this.svgGroup_},e.FlyoutButton.prototype.show=function(){this.updateTransform_(),this.svgGroup_.setAttribute("display","block")},e.FlyoutButton.prototype.updateTransform_=function(){this.svgGroup_.setAttribute("transform","translate("+this.position_.x+","+this.position_.y+")")},e.FlyoutButton.prototype.moveTo=function(t,n){this.position_.x=t,this.position_.y=n,this.updateTransform_()},e.FlyoutButton.prototype.isLabel=function(){return this.isLabel_},e.FlyoutButton.prototype.getPosition=function(){return this.position_},e.FlyoutButton.prototype.getButtonText=function(){return this.text_},e.FlyoutButton.prototype.getTargetWorkspace=function(){return this.targetWorkspace_},e.FlyoutButton.prototype.dispose=function(){this.onMouseUpWrapper_&&e.browserEvents.unbind(this.onMouseUpWrapper_),this.svgGroup_&&e.utils.dom.removeNode(this.svgGroup_),this.svgText_&&this.workspace_.getThemeManager().unsubscribe(this.svgText_)},e.FlyoutButton.prototype.onMouseUp_=function(t){(t=this.targetWorkspace_.getGesture(t))&&t.cancel(),this.isLabel_&&this.callbackKey_?console.warn("Labels should not have callbacks. Label text: "+this.text_):this.isLabel_||this.callbackKey_&&this.targetWorkspace_.getButtonCallback(this.callbackKey_)?this.isLabel_||this.targetWorkspace_.getButtonCallback(this.callbackKey_)(this):console.warn("Buttons should have callbacks. Button text: "+this.text_)},e.Css.register(".blocklyFlyoutButton {,fill: #888;,cursor: default;,},.blocklyFlyoutButtonShadow {,fill: #666;,},.blocklyFlyoutButton:hover {,fill: #aaa;,},.blocklyFlyoutLabel {,cursor: default;,},.blocklyFlyoutLabelBackground {,opacity: 0;,}".split(",")),e.Generator=function(t){this.name_=t,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")},e.Generator.prototype.INFINITE_LOOP_TRAP=null,e.Generator.prototype.STATEMENT_PREFIX=null,e.Generator.prototype.STATEMENT_SUFFIX=null,e.Generator.prototype.INDENT="  ",e.Generator.prototype.COMMENT_WRAP=60,e.Generator.prototype.ORDER_OVERRIDES=[],e.Generator.prototype.isInitialized=null,e.Generator.prototype.workspaceToCode=function(t){t||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),t=e.getMainWorkspace());var n=[];this.init(t),t=t.getTopBlocks(!0);for(var s,r=0;s=t[r];r++){var u=this.blockToCode(s);Array.isArray(u)&&(u=u[0]),u&&(s.outputConnection&&(u=this.scrubNakedValue(u),this.STATEMENT_PREFIX&&!s.suppressPrefixSuffix&&(u=this.injectId(this.STATEMENT_PREFIX,s)+u),this.STATEMENT_SUFFIX&&!s.suppressPrefixSuffix&&(u+=this.injectId(this.STATEMENT_SUFFIX,s))),n.push(u))}return n=n.join("\n"),(n=(n=(n=this.finish(n)).replace(/^\s+\n/,"")).replace(/\n\s+$/,"\n")).replace(/[ \t]+\n/g,"\n")},e.Generator.prototype.prefixLines=function(t,n){return n+t.replace(/(?!\n$)\n/g,"\n"+n)},e.Generator.prototype.allNestedComments=function(t){var n=[];t=t.getDescendants(!0);for(var r=0;r<t.length;r++){var s=t[r].getCommentText();s&&n.push(s)}return n.length&&n.push(""),n.join("\n")},e.Generator.prototype.blockToCode=function(t,n){if(!1===this.isInitialized&&console.warn("Generator init was not called before blockToCode was called."),!t)return"";if(!t.isEnabled())return n?"":this.blockToCode(t.getNextBlock());if(t.isInsertionMarker())return n?"":this.blockToCode(t.getChildren(!1)[0]);var r=this[t.type];if("function"!=typeof r)throw Error('Language "'+this.name_+'" does not know how to generate code for block type "'+t.type+'".');if(r=r.call(t,t),Array.isArray(r)){if(!t.outputConnection)throw TypeError("Expecting string from statement block: "+t.type);return[this.scrub_(t,r[0],n),r[1]]}if("string"==typeof r)return this.STATEMENT_PREFIX&&!t.suppressPrefixSuffix&&(r=this.injectId(this.STATEMENT_PREFIX,t)+r),this.STATEMENT_SUFFIX&&!t.suppressPrefixSuffix&&(r+=this.injectId(this.STATEMENT_SUFFIX,t)),this.scrub_(t,r,n);if(null===r)return"";throw SyntaxError("Invalid code generated: "+r)},e.Generator.prototype.valueToCode=function(t,n,r){if(isNaN(r))throw TypeError("Expecting valid order from block: "+t.type);var s=t.getInputTargetBlock(n);if(!s||""===(n=this.blockToCode(s)))return"";if(!Array.isArray(n))throw TypeError("Expecting tuple from value block: "+s.type);if(t=n[0],n=n[1],isNaN(n))throw TypeError("Expecting valid order from value block: "+s.type);if(!t)return"";s=!1;var u=Math.floor(r),b=Math.floor(n);if(u<=b&&(u!=b||0!=u&&99!=u))for(s=!0,u=0;u<this.ORDER_OVERRIDES.length;u++)if(this.ORDER_OVERRIDES[u][0]==r&&this.ORDER_OVERRIDES[u][1]==n){s=!1;break}return s&&(t="("+t+")"),t},e.Generator.prototype.statementToCode=function(t,n){if(t=t.getInputTargetBlock(n),"string"!=typeof(n=this.blockToCode(t)))throw TypeError("Expecting code from statement block: "+(t&&t.type));return n&&(n=this.prefixLines(n,this.INDENT)),n},e.Generator.prototype.addLoopTrap=function(t,n){return this.INFINITE_LOOP_TRAP&&(t=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,n),this.INDENT)+t),this.STATEMENT_SUFFIX&&!n.suppressPrefixSuffix&&(t=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,n),this.INDENT)+t),this.STATEMENT_PREFIX&&!n.suppressPrefixSuffix&&(t+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,n),this.INDENT)),t},e.Generator.prototype.injectId=function(t,n){return n=n.id.replace(/\$/g,"$$$$"),t.replace(/%1/g,"'"+n+"'")},e.Generator.prototype.RESERVED_WORDS_="",e.Generator.prototype.addReservedWords=function(t){this.RESERVED_WORDS_+=t+","},e.Generator.prototype.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",Object.defineProperty(e.Generator.prototype,"variableDB_",{get:function(){return e.utils.deprecation.warn("variableDB_","May 2021","May 2026","nameDB_"),this.nameDB_},set:function(t){e.utils.deprecation.warn("variableDB_","May 2021","May 2026","nameDB_"),this.nameDB_=t}}),e.Generator.prototype.provideFunction_=function(t,n){if(!this.definitions_[t]){var s,r=this.nameDB_.getDistinctName(t,e.PROCEDURE_CATEGORY_NAME);for(this.functionNames_[t]=r,n=n.join("\n").replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,r);s!=n;)s=n,n=n.replace(/^(( {2})*) {2}/gm,"$1\0");n=n.replace(/\0/g,this.INDENT),this.definitions_[t]=n}return this.functionNames_[t]},e.Generator.prototype.init=function(t){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)},e.Generator.prototype.scrub_=function(t,n,r){return n},e.Generator.prototype.finish=function(t){return delete this.definitions_,delete this.functionNames_,t},e.Generator.prototype.scrubNakedValue=function(t){return t},e.IToolboxItem=function(){},e.ISelectableToolboxItem=function(){},e.ICollapsibleToolboxItem=function(){},e.ToolboxItem=function(t,n,r){this.id_=t.toolboxitemid||e.utils.IdGenerator.getNextUniqueId(),this.level_=(this.parent_=r||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=t,this.parentToolbox_=n,this.workspace_=this.parentToolbox_.getWorkspace()},e.ToolboxItem.prototype.init=function(){},e.ToolboxItem.prototype.getDiv=function(){return null},e.ToolboxItem.prototype.getId=function(){return this.id_},e.ToolboxItem.prototype.getParent=function(){return null},e.ToolboxItem.prototype.getLevel=function(){return this.level_},e.ToolboxItem.prototype.isSelectable=function(){return!1},e.ToolboxItem.prototype.isCollapsible=function(){return!1},e.ToolboxItem.prototype.dispose=function(){},e.ToolboxCategory=function(t,n,r){e.ToolboxCategory.superClass_.constructor.call(this,t,n,r),this.name_=e.utils.replaceMessageReferences(t.name),this.colour_=this.getColour_(t),this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.cssConfig_=this.makeDefaultCssConfig_(),e.utils.object.mixin(this.cssConfig_,t.cssconfig||t.cssConfig),this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.parseContents_(t)},e.utils.object.inherits(e.ToolboxCategory,e.ToolboxItem),e.ToolboxCategory.registrationName="category",e.ToolboxCategory.nestedPadding=19,e.ToolboxCategory.borderWidth=8,e.ToolboxCategory.defaultBackgroundColour="#57e",e.ToolboxCategory.prototype.makeDefaultCssConfig_=function(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}},e.ToolboxCategory.prototype.parseContents_=function(t){var n=t.contents;if(t.custom)this.flyoutItems_=t.custom;else if(n){t=0;for(var r;r=n[t];t++)this.flyoutItems_.push(r)}},e.ToolboxCategory.prototype.init=function(){this.createDom_(),"true"==this.toolboxItemDef_.hidden&&this.hide()},e.ToolboxCategory.prototype.createDom_=function(){return this.htmlDiv_=this.createContainer_(),e.utils.aria.setRole(this.htmlDiv_,e.utils.aria.Role.TREEITEM),e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.SELECTED,!1),e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.LEVEL,this.level_),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),e.utils.aria.setRole(this.iconDom_,e.utils.aria.Role.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_),e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.LABELLEDBY,this.labelDom_.getAttribute("id")),this.addColourBorder_(this.colour_),this.htmlDiv_},e.ToolboxCategory.prototype.createContainer_=function(){var t=document.createElement("div");return e.utils.dom.addClass(t,this.cssConfig_.container),t},e.ToolboxCategory.prototype.createRowContainer_=function(){var t=document.createElement("div");e.utils.dom.addClass(t,this.cssConfig_.row);var n=e.ToolboxCategory.nestedPadding*this.getLevel();return n=n.toString()+"px",this.workspace_.RTL?t.style.paddingRight=n:t.style.paddingLeft=n,t},e.ToolboxCategory.prototype.createRowContentsContainer_=function(){var t=document.createElement("div");return e.utils.dom.addClass(t,this.cssConfig_.rowcontentcontainer),t},e.ToolboxCategory.prototype.createIconDom_=function(){var t=document.createElement("span");return this.parentToolbox_.isHorizontal()||e.utils.dom.addClass(t,this.cssConfig_.icon),t.style.display="inline-block",t},e.ToolboxCategory.prototype.createLabelDom_=function(t){var n=document.createElement("span");return n.setAttribute("id",this.getId()+".label"),n.textContent=t,e.utils.dom.addClass(n,this.cssConfig_.label),n},e.ToolboxCategory.prototype.refreshTheme=function(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)},e.ToolboxCategory.prototype.addColourBorder_=function(t){t&&(t=e.ToolboxCategory.borderWidth+"px solid "+(t||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=t:this.rowDiv_.style.borderLeft=t)},e.ToolboxCategory.prototype.getColour_=function(t){var n=t.categorystyle||t.categoryStyle;return(t=t.colour)&&n?(console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour'),""):n?this.getColourfromStyle_(n):this.parseColour_(t)},e.ToolboxCategory.prototype.getColourfromStyle_=function(t){var n=this.workspace_.getTheme();if(t&&n){if((n=n.categoryStyles[t])&&n.colour)return this.parseColour_(n.colour);console.warn('Style "'+t+'" must exist and contain a colour value')}return""},e.ToolboxCategory.prototype.getClickTarget=function(){return this.rowDiv_},e.ToolboxCategory.prototype.parseColour_=function(t){if(null==(t=e.utils.replaceMessageReferences(t))||""===t)return"";var n=Number(t);return isNaN(n)?(n=e.utils.colour.parse(t))?n:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+t),""):e.hueToHex(n)},e.ToolboxCategory.prototype.openIcon_=function(t){t&&(e.utils.dom.removeClasses(t,this.cssConfig_.closedicon),e.utils.dom.addClass(t,this.cssConfig_.openicon))},e.ToolboxCategory.prototype.closeIcon_=function(t){t&&(e.utils.dom.removeClasses(t,this.cssConfig_.openicon),e.utils.dom.addClass(t,this.cssConfig_.closedicon))},e.ToolboxCategory.prototype.setVisible_=function(t){this.htmlDiv_.style.display=t?"block":"none",this.isHidden_=!t,this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()},e.ToolboxCategory.prototype.hide=function(){this.setVisible_(!1)},e.ToolboxCategory.prototype.show=function(){this.setVisible_(!0)},e.ToolboxCategory.prototype.isVisible=function(){return!this.isHidden_&&this.allAncestorsExpanded_()},e.ToolboxCategory.prototype.allAncestorsExpanded_=function(){for(var t=this;t.getParent();)if(!(t=t.getParent()).isExpanded())return!1;return!0},e.ToolboxCategory.prototype.isSelectable=function(){return this.isVisible()&&!this.isDisabled_},e.ToolboxCategory.prototype.onClick=function(t){},e.ToolboxCategory.prototype.setSelected=function(t){if(t){var n=this.parseColour_(e.ToolboxCategory.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||n,e.utils.dom.addClass(this.rowDiv_,this.cssConfig_.selected)}else this.rowDiv_.style.backgroundColor="",e.utils.dom.removeClass(this.rowDiv_,this.cssConfig_.selected);e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.SELECTED,t)},e.ToolboxCategory.prototype.setDisabled=function(t){this.isDisabled_=t,this.getDiv().setAttribute("disabled",t),t?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")},e.ToolboxCategory.prototype.getName=function(){return this.name_},e.ToolboxCategory.prototype.getParent=function(){return this.parent_},e.ToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},e.ToolboxCategory.prototype.getContents=function(){return this.flyoutItems_},e.ToolboxCategory.prototype.updateFlyoutContents=function(t){this.flyoutItems_=[],"string"==typeof t?this.toolboxItemDef_.custom=t:(delete this.toolboxItemDef_.custom,this.toolboxItemDef_.contents=e.utils.toolbox.convertFlyoutDefToJsonArray(t)),this.parseContents_(this.toolboxItemDef_)},e.ToolboxCategory.prototype.dispose=function(){e.utils.dom.removeNode(this.htmlDiv_)},e.Css.register([".blocklyTreeRow:not(.blocklyTreeSelected):hover {","background-color: rgba(255, 255, 255, 0.2);","}",'.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {',"margin: 1px 5px 1px 0;","}",'.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {',"margin: 1px 0 1px 5px;","}",".blocklyTreeRow {","height: 22px;","line-height: 22px;","margin-bottom: 3px;","padding-right: 8px;","white-space: nowrap;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {',"margin-left: 8px;","padding-right: 0px","}",".blocklyTreeIcon {","background-image: url(<<<PATH>>>/sprites.png);","height: 16px;","vertical-align: middle;","visibility: hidden;","width: 16px;","}",".blocklyTreeIconClosed {","background-position: -32px -1px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {',"background-position: 0 -1px;","}",".blocklyTreeSelected>.blocklyTreeIconClosed {","background-position: -32px -17px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {',"background-position: 0 -17px;","}",".blocklyTreeIconOpen {","background-position: -16px -1px;","}",".blocklyTreeSelected>.blocklyTreeIconOpen {","background-position: -16px -17px;","}",".blocklyTreeLabel {","cursor: default;","font: 16px sans-serif;","padding: 0 3px;","vertical-align: middle;","}",".blocklyToolboxDelete .blocklyTreeLabel {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyTreeSelected .blocklyTreeLabel {","color: #fff;","}"]),e.registry.register(e.registry.Type.TOOLBOX_ITEM,e.ToolboxCategory.registrationName,e.ToolboxCategory),e.ToolboxSeparator=function(t,n){e.ToolboxSeparator.superClass_.constructor.call(this,t,n),this.cssConfig_={container:"blocklyTreeSeparator"},e.utils.object.mixin(this.cssConfig_,t.cssconfig||t.cssConfig)},e.utils.object.inherits(e.ToolboxSeparator,e.ToolboxItem),e.ToolboxSeparator.registrationName="sep",e.ToolboxSeparator.prototype.init=function(){this.createDom_()},e.ToolboxSeparator.prototype.createDom_=function(){var t=document.createElement("div");return e.utils.dom.addClass(t,this.cssConfig_.container),this.htmlDiv_=t},e.ToolboxSeparator.prototype.getDiv=function(){return this.htmlDiv_},e.ToolboxSeparator.prototype.dispose=function(){e.utils.dom.removeNode(this.htmlDiv_)},e.Css.register('.blocklyTreeSeparator {,border-bottom: solid #e5e5e5 1px;,height: 0;,margin: 5px 0;,},.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {,border-right: solid #e5e5e5 1px;,border-bottom: none;,height: auto;,margin: 0 5px 0 5px;,padding: 5px 0;,width: 0;,}'.split(",")),e.registry.register(e.registry.Type.TOOLBOX_ITEM,e.ToolboxSeparator.registrationName,e.ToolboxSeparator),e.CollapsibleToolboxCategory=function(t,n,r){this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[],e.CollapsibleToolboxCategory.superClass_.constructor.call(this,t,n,r)},e.utils.object.inherits(e.CollapsibleToolboxCategory,e.ToolboxCategory),e.CollapsibleToolboxCategory.registrationName="collapsibleCategory",e.CollapsibleToolboxCategory.prototype.makeDefaultCssConfig_=function(){var t=e.CollapsibleToolboxCategory.superClass_.makeDefaultCssConfig_.call(this);return t.contents="blocklyToolboxContents",t},e.CollapsibleToolboxCategory.prototype.parseContents_=function(t){var n=t.contents,r=!0;if(t.custom)this.flyoutItems_=t.custom;else if(n){t=0;for(var s;s=n[t];t++)!e.registry.hasItem(e.registry.Type.TOOLBOX_ITEM,s.kind)||s.kind.toLowerCase()==e.ToolboxSeparator.registrationName&&r?(this.flyoutItems_.push(s),r=!0):(this.createToolboxItem_(s),r=!1)}},e.CollapsibleToolboxCategory.prototype.createToolboxItem_=function(t){var n=t.kind;"CATEGORY"==n.toUpperCase()&&e.utils.toolbox.isCategoryCollapsible(t)&&(n=e.CollapsibleToolboxCategory.registrationName),t=new(e.registry.getClass(e.registry.Type.TOOLBOX_ITEM,n))(t,this.parentToolbox_,this),this.toolboxItems_.push(t)},e.CollapsibleToolboxCategory.prototype.init=function(){e.CollapsibleToolboxCategory.superClass_.init.call(this),this.setExpanded("true"==this.toolboxItemDef_.expanded||this.toolboxItemDef_.expanded)},e.CollapsibleToolboxCategory.prototype.createDom_=function(){e.CollapsibleToolboxCategory.superClass_.createDom_.call(this);var t=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(t),e.utils.aria.setRole(this.subcategoriesDiv_,e.utils.aria.Role.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.htmlDiv_},e.CollapsibleToolboxCategory.prototype.createIconDom_=function(){var t=document.createElement("span");return this.parentToolbox_.isHorizontal()||(e.utils.dom.addClass(t,this.cssConfig_.icon),t.style.visibility="visible"),t.style.display="inline-block",t},e.CollapsibleToolboxCategory.prototype.createSubCategoriesDom_=function(t){var n=document.createElement("div");e.utils.dom.addClass(n,this.cssConfig_.contents);for(var r=0;r<t.length;r++){var s=t[r];s.init();var u=s.getDiv();n.appendChild(u),s.getClickTarget&&s.getClickTarget().setAttribute("id",s.getId())}return n},e.CollapsibleToolboxCategory.prototype.setExpanded=function(t){this.expanded_!=t&&((this.expanded_=t)?(this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_)):(this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)),e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.EXPANDED,t),this.parentToolbox_.handleToolboxItemResize())},e.CollapsibleToolboxCategory.prototype.setVisible_=function(t){this.htmlDiv_.style.display=t?"block":"none";for(var r,n=0;r=this.getChildToolboxItems()[n];n++)r.setVisible_(t);this.isHidden_=!t,this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()},e.CollapsibleToolboxCategory.prototype.isExpanded=function(){return this.expanded_},e.CollapsibleToolboxCategory.prototype.isCollapsible=function(){return!0},e.CollapsibleToolboxCategory.prototype.onClick=function(t){this.toggleExpanded()},e.CollapsibleToolboxCategory.prototype.toggleExpanded=function(){this.setExpanded(!this.expanded_)},e.CollapsibleToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},e.CollapsibleToolboxCategory.prototype.getChildToolboxItems=function(){return this.toolboxItems_},e.registry.register(e.registry.Type.TOOLBOX_ITEM,e.CollapsibleToolboxCategory.registrationName,e.CollapsibleToolboxCategory),e.Events.ToolboxItemSelect=function(t,n,r){e.Events.ToolboxItemSelect.superClass_.constructor.call(this,r),this.oldItem=t,this.newItem=n},e.utils.object.inherits(e.Events.ToolboxItemSelect,e.Events.UiBase),e.Events.ToolboxItemSelect.prototype.type=e.Events.TOOLBOX_ITEM_SELECT,e.Events.ToolboxItemSelect.prototype.toJson=function(){var t=e.Events.ToolboxItemSelect.superClass_.toJson.call(this);return t.oldItem=this.oldItem,t.newItem=this.newItem,t},e.Events.ToolboxItemSelect.prototype.fromJson=function(t){e.Events.ToolboxItemSelect.superClass_.fromJson.call(this,t),this.oldItem=t.oldItem,this.newItem=t.newItem},e.registry.register(e.registry.Type.EVENT,e.Events.TOOLBOX_ITEM_SELECT,e.Events.ToolboxItemSelect),e.IAutoHideable=function(){},e.IStyleable=function(){},e.IToolbox=function(){},e.Toolbox=function(t){e.Toolbox.superClass_.constructor.call(this),this.workspace_=t,this.id="toolbox",this.toolboxDef_=t.options.languageTree||{contents:[]},this.horizontalLayout_=t.options.horizontalLayout,this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.contents_=[],this.height_=this.width_=0,this.RTL=t.options.RTL,this.flyout_=null,this.contentMap_=Object.create(null),this.toolboxPosition=t.options.toolboxPosition,this.previouslySelectedItem_=this.selectedItem_=null,this.boundEvents_=[]},e.utils.object.inherits(e.Toolbox,e.DeleteArea),e.Toolbox.prototype.onShortcut=function(t){return!1},e.Toolbox.prototype.init=function(){var t=this.workspace_,n=t.getParentSvg();this.flyout_=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),e.utils.dom.insertAfter(this.flyout_.createDom("svg"),n),this.setVisible(!0),this.flyout_.init(t),this.render(this.toolboxDef_),(t=t.getThemeManager()).subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),t.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[e.ComponentManager.Capability.AUTOHIDEABLE,e.ComponentManager.Capability.DELETE_AREA,e.ComponentManager.Capability.DRAG_TARGET]})},e.Toolbox.prototype.createDom_=function(t){t=t.getParentSvg();var n=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,e.utils.aria.setRole(this.contentsDiv_,e.utils.aria.Role.TREE),n.appendChild(this.contentsDiv_),t.parentNode.insertBefore(n,t),this.attachEvents_(n,this.contentsDiv_),n},e.Toolbox.prototype.createContainer_=function(){var t=document.createElement("div");return t.setAttribute("layout",this.isHorizontal()?"h":"v"),e.utils.dom.addClass(t,"blocklyToolboxDiv"),e.utils.dom.addClass(t,"blocklyNonSelectable"),t.setAttribute("dir",this.RTL?"RTL":"LTR"),t},e.Toolbox.prototype.createContentsContainer_=function(){var t=document.createElement("div");return e.utils.dom.addClass(t,"blocklyToolboxContents"),this.isHorizontal()&&(t.style.flexDirection="row"),t},e.Toolbox.prototype.attachEvents_=function(t,n){t=e.browserEvents.conditionalBind(t,"click",this,this.onClick_,!1,!0),this.boundEvents_.push(t),n=e.browserEvents.conditionalBind(n,"keydown",this,this.onKeyDown_,!1,!0),this.boundEvents_.push(n)},e.Toolbox.prototype.onClick_=function(t){if(e.utils.isRightButton(t)||t.target==this.HtmlDiv)e.hideChaff(!1);else{var n=t.target.getAttribute("id");n&&(n=this.getToolboxItemById(n)).isSelectable()&&(this.setSelectedItem(n),n.onClick(t)),e.hideChaff(!0)}e.Touch.clearTouchIdentifier()},e.Toolbox.prototype.onKeyDown_=function(t){var n=!1;switch(t.keyCode){case e.utils.KeyCodes.DOWN:n=this.selectNext_();break;case e.utils.KeyCodes.UP:n=this.selectPrevious_();break;case e.utils.KeyCodes.LEFT:n=this.selectParent_();break;case e.utils.KeyCodes.RIGHT:n=this.selectChild_();break;case e.utils.KeyCodes.ENTER:case e.utils.KeyCodes.SPACE:this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),n=!0);break;default:n=!1}!n&&this.selectedItem_&&this.selectedItem_.onKeyDown&&(n=this.selectedItem_.onKeyDown(t)),n&&t.preventDefault()},e.Toolbox.prototype.createFlyout_=function(){var t=this.workspace_,n=new e.Options({parentWorkspace:t,rtl:t.RTL,oneBasedIndex:t.options.oneBasedIndex,horizontalLayout:t.horizontalLayout,renderer:t.options.renderer,rendererOverrides:t.options.rendererOverrides,move:{scrollbars:!0}});return n.toolboxPosition=t.options.toolboxPosition,new(e.registry.getClassFromOptions(t.horizontalLayout?e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX:e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,t.options,!0))(n)},e.Toolbox.prototype.render=function(t){this.toolboxDef_=t;for(var n=0;n<this.contents_.length;n++){var r=this.contents_[n];r&&r.dispose()}this.contents_=[],this.contentMap_=Object.create(null),this.renderContents_(t.contents),this.position(),this.handleToolboxItemResize()},e.Toolbox.prototype.renderContents_=function(t){for(var s,n=document.createDocumentFragment(),r=0;s=t[r];r++)this.createToolboxItem_(s,n);this.contentsDiv_.appendChild(n)},e.Toolbox.prototype.createToolboxItem_=function(t,n){var r=t.kind;"CATEGORY"==r.toUpperCase()&&e.utils.toolbox.isCategoryCollapsible(t)&&(r=e.CollapsibleToolboxCategory.registrationName),(r=e.registry.getClass(e.registry.Type.TOOLBOX_ITEM,r.toLowerCase()))&&(t=new r(t,this),this.addToolboxItem_(t),t.init(),(r=t.getDiv())&&n.appendChild(r),t.getClickTarget&&t.getClickTarget().setAttribute("id",t.getId()))},e.Toolbox.prototype.addToolboxItem_=function(t){if(this.contents_.push(t),this.contentMap_[t.getId()]=t,t.isCollapsible())for(var r,n=0;r=t.getChildToolboxItems()[n];n++)this.addToolboxItem_(r)},e.Toolbox.prototype.getToolboxItems=function(){return this.contents_},e.Toolbox.prototype.addStyle=function(t){e.utils.dom.addClass(this.HtmlDiv,t)},e.Toolbox.prototype.removeStyle=function(t){e.utils.dom.removeClass(this.HtmlDiv,t)},e.Toolbox.prototype.getClientRect=function(){if(!this.HtmlDiv||!this.isVisible_)return null;var t=this.HtmlDiv.getBoundingClientRect(),n=t.top,r=n+t.height,s=t.left;return t=s+t.width,this.toolboxPosition==e.utils.toolbox.Position.TOP?new e.utils.Rect(-1e7,r,-1e7,1e7):this.toolboxPosition==e.utils.toolbox.Position.BOTTOM?new e.utils.Rect(n,1e7,-1e7,1e7):this.toolboxPosition==e.utils.toolbox.Position.LEFT?new e.utils.Rect(-1e7,1e7,-1e7,t):new e.utils.Rect(-1e7,1e7,s,1e7)},e.Toolbox.prototype.wouldDelete=function(t,n){return this.updateWouldDelete_(t instanceof e.BlockSvg?!t.getParent()&&t.isDeletable():t.isDeletable()),this.wouldDelete_},e.Toolbox.prototype.onDragEnter=function(t){this.updateCursorDeleteStyle_(!0)},e.Toolbox.prototype.onDragExit=function(t){this.updateCursorDeleteStyle_(!1)},e.Toolbox.prototype.onDrop=function(t){this.updateCursorDeleteStyle_(!1)},e.Toolbox.prototype.updateWouldDelete_=function(t){t!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=t,this.updateCursorDeleteStyle_(!0))},e.Toolbox.prototype.updateCursorDeleteStyle_=function(t){var n=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";t?this.addStyle(n):this.removeStyle(n)},e.Toolbox.prototype.getToolboxItemById=function(t){return this.contentMap_[t]||null},e.Toolbox.prototype.getWidth=function(){return this.width_},e.Toolbox.prototype.getHeight=function(){return this.height_},e.Toolbox.prototype.getFlyout=function(){return this.flyout_},e.Toolbox.prototype.getWorkspace=function(){return this.workspace_},e.Toolbox.prototype.getSelectedItem=function(){return this.selectedItem_},e.Toolbox.prototype.getPreviouslySelectedItem=function(){return this.previouslySelectedItem_},e.Toolbox.prototype.isHorizontal=function(){return this.horizontalLayout_},e.Toolbox.prototype.position=function(){var t=this.workspace_.getMetrics(),n=this.HtmlDiv;n&&(this.horizontalLayout_?(n.style.left="0",n.style.height="auto",n.style.width="100%",this.height_=n.offsetHeight,this.width_=t.viewWidth,this.toolboxPosition==e.utils.toolbox.Position.TOP?n.style.top="0":n.style.bottom="0"):(this.toolboxPosition==e.utils.toolbox.Position.RIGHT?n.style.right="0":n.style.left="0",n.style.height="100%",this.width_=n.offsetWidth,this.height_=t.viewHeight),this.flyout_.position())},e.Toolbox.prototype.handleToolboxItemResize=function(){var t=this.workspace_,n=this.HtmlDiv.getBoundingClientRect();t.translate(this.toolboxPosition==e.utils.toolbox.Position.LEFT?t.scrollX+n.width:t.scrollX,this.toolboxPosition==e.utils.toolbox.Position.TOP?t.scrollY+n.height:t.scrollY),e.svgResize(t)},e.Toolbox.prototype.clearSelection=function(){this.setSelectedItem(null)},e.Toolbox.prototype.refreshTheme=function(){for(var t=0;t<this.contents_.length;t++){var n=this.contents_[t];n.refreshTheme&&n.refreshTheme()}},e.Toolbox.prototype.refreshSelection=function(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout_.show(this.selectedItem_.getContents())},e.Toolbox.prototype.setVisible=function(t){this.isVisible_!==t&&(this.HtmlDiv.style.display=t?"block":"none",this.isVisible_=t,this.workspace_.recordDragTargets())},e.Toolbox.prototype.autoHide=function(t){!t&&this.flyout_&&this.flyout_.autoClose&&this.clearSelection()},e.Toolbox.prototype.setSelectedItem=function(t){var n=this.selectedItem_;!t&&!n||t&&!t.isSelectable()||(this.shouldDeselectItem_(n,t)&&null!=n&&this.deselectItem_(n),this.shouldSelectItem_(n,t)&&null!=t&&this.selectItem_(n,t),this.updateFlyout_(n,t),this.fireSelectEvent_(n,t))},e.Toolbox.prototype.shouldDeselectItem_=function(t,n){return null!=t&&(!t.isCollapsible()||t!=n)},e.Toolbox.prototype.shouldSelectItem_=function(t,n){return null!=n&&n!=t},e.Toolbox.prototype.deselectItem_=function(t){this.selectedItem_=null,this.previouslySelectedItem_=t,t.setSelected(!1),e.utils.aria.setState(this.contentsDiv_,e.utils.aria.State.ACTIVEDESCENDANT,"")},e.Toolbox.prototype.selectItem_=function(t,n){this.selectedItem_=n,this.previouslySelectedItem_=t,n.setSelected(!0),e.utils.aria.setState(this.contentsDiv_,e.utils.aria.State.ACTIVEDESCENDANT,n.getId())},e.Toolbox.prototype.selectItemByPosition=function(t){-1<t&&t<this.contents_.length&&(t=this.contents_[t]).isSelectable()&&this.setSelectedItem(t)},e.Toolbox.prototype.updateFlyout_=function(t,n){(t!=n||n.isCollapsible())&&n&&n.getContents().length?(this.flyout_.show(n.getContents()),this.flyout_.scrollToStart()):this.flyout_.hide()},e.Toolbox.prototype.fireSelectEvent_=function(t,n){var r=t&&t.getName(),s=n&&n.getName();t==n&&(s=null),t=new(e.Events.get(e.Events.TOOLBOX_ITEM_SELECT))(r,s,this.workspace_.id),e.Events.fire(t)},e.Toolbox.prototype.selectParent_=function(){return!(!this.selectedItem_||(this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.setExpanded(!1),0):!this.selectedItem_.getParent()||!this.selectedItem_.getParent().isSelectable()||(this.setSelectedItem(this.selectedItem_.getParent()),0)))},e.Toolbox.prototype.selectChild_=function(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;var t=this.selectedItem_;return t.isExpanded()?this.selectNext_():t.setExpanded(!0),!0},e.Toolbox.prototype.selectNext_=function(){if(!this.selectedItem_)return!1;var t=this.contents_.indexOf(this.selectedItem_)+1;if(-1<t&&t<this.contents_.length){for(var n=this.contents_[t];n&&!n.isSelectable();)n=this.contents_[++t];if(n&&n.isSelectable())return this.setSelectedItem(n),!0}return!1},e.Toolbox.prototype.selectPrevious_=function(){if(!this.selectedItem_)return!1;var t=this.contents_.indexOf(this.selectedItem_)-1;if(-1<t&&t<this.contents_.length){for(var n=this.contents_[t];n&&!n.isSelectable();)n=this.contents_[--t];if(n&&n.isSelectable())return this.setSelectedItem(n),!0}return!1},e.Toolbox.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout_.dispose();for(var t=0;t<this.contents_.length;t++)this.contents_[t].dispose();for(t=0;t<this.boundEvents_.length;t++)e.browserEvents.unbind(this.boundEvents_[t]);this.boundEvents_=[],this.contents_=[],this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),e.utils.dom.removeNode(this.HtmlDiv)},e.Css.register([".blocklyToolboxDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyToolboxGrab {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyToolboxDiv {","background-color: #ddd;","overflow-x: visible;","overflow-y: auto;","padding: 4px 0 4px 0;","position: absolute;","z-index: 70;","-webkit-tap-highlight-color: transparent;","}",".blocklyToolboxContents {","display: flex;","flex-wrap: wrap;","flex-direction: column;","}",".blocklyToolboxContents:focus {","outline: none;","}"]),e.registry.register(e.registry.Type.TOOLBOX,e.registry.DEFAULT,e.Toolbox),e.Events.TrashcanOpen=function(t,n){e.Events.TrashcanOpen.superClass_.constructor.call(this,n),this.isOpen=t},e.utils.object.inherits(e.Events.TrashcanOpen,e.Events.UiBase),e.Events.TrashcanOpen.prototype.type=e.Events.TRASHCAN_OPEN,e.Events.TrashcanOpen.prototype.toJson=function(){var t=e.Events.TrashcanOpen.superClass_.toJson.call(this);return t.isOpen=this.isOpen,t},e.Events.TrashcanOpen.prototype.fromJson=function(t){e.Events.TrashcanOpen.superClass_.fromJson.call(this,t),this.isOpen=t.isOpen},e.registry.register(e.registry.Type.EVENT,e.Events.TRASHCAN_OPEN,e.Events.TrashcanOpen),e.IPositionable=function(){},e.uiPosition={},e.uiPosition.verticalPosition={TOP:0,BOTTOM:1},e.uiPosition.horizontalPosition={LEFT:0,RIGHT:1},e.uiPosition.bumpDirection={UP:0,DOWN:1},e.uiPosition.getStartPositionRect=function(t,n,r,s,u,b){var x=b.scrollbar&&b.scrollbar.canScrollVertically();return t.horizontal===e.uiPosition.horizontalPosition.LEFT?(r=u.absoluteMetrics.left+r,x&&b.RTL&&(r+=e.Scrollbar.scrollbarThickness)):(r=u.absoluteMetrics.left+u.viewMetrics.width-n.width-r,x&&!b.RTL&&(r-=e.Scrollbar.scrollbarThickness)),t.vertical===e.uiPosition.verticalPosition.TOP?t=u.absoluteMetrics.top+s:(t=u.absoluteMetrics.top+u.viewMetrics.height-n.height-s,b.scrollbar&&b.scrollbar.canScrollHorizontally()&&(t-=e.Scrollbar.scrollbarThickness)),new e.utils.Rect(t,t+n.height,r,r+n.width)},e.uiPosition.getCornerOppositeToolbox=function(t,n){return{horizontal:n.toolboxMetrics.position===e.utils.toolbox.Position.LEFT||t.horizontalLayout&&!t.RTL?e.uiPosition.horizontalPosition.RIGHT:e.uiPosition.horizontalPosition.LEFT,vertical:n.toolboxMetrics.position===e.utils.toolbox.Position.BOTTOM?e.uiPosition.verticalPosition.TOP:e.uiPosition.verticalPosition.BOTTOM}},e.uiPosition.bumpPositionRect=function(t,n,r,s){for(var Z,u=t.left,b=t.right-t.left,x=t.bottom-t.top,B=0;Z=s[B];B++)t.intersects(Z)&&(t=new e.utils.Rect(t=r===e.uiPosition.bumpDirection.UP?Z.top-x-n:Z.bottom+n,t+x,u,u+b),B=-1);return t},e.Trashcan=function(t){e.Trashcan.superClass_.constructor.call(this),this.workspace_=t,this.id="trashcan",this.contents_=[],this.flyout=null,0>=this.workspace_.options.maxTrashcanContents||(t=new e.Options({scrollbars:!0,parentWorkspace:this.workspace_,rtl:this.workspace_.RTL,oneBasedIndex:this.workspace_.options.oneBasedIndex,renderer:this.workspace_.options.renderer,rendererOverrides:this.workspace_.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace_.horizontalLayout?(t.toolboxPosition=this.workspace_.toolboxPosition==e.utils.toolbox.Position.TOP?e.utils.toolbox.Position.BOTTOM:e.utils.toolbox.Position.TOP,this.flyout=new(e.registry.getClassFromOptions(e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace_.options,!0))(t)):(t.toolboxPosition=this.workspace_.toolboxPosition==e.utils.toolbox.Position.RIGHT?e.utils.toolbox.Position.LEFT:e.utils.toolbox.Position.RIGHT,this.flyout=new(e.registry.getClassFromOptions(e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,this.workspace_.options,!0))(t)),this.workspace_.addChangeListener(this.onDelete_.bind(this)))},e.utils.object.inherits(e.Trashcan,e.DeleteArea),e.Trashcan.prototype.WIDTH_=47,e.Trashcan.prototype.BODY_HEIGHT_=44,e.Trashcan.prototype.LID_HEIGHT_=16,e.Trashcan.prototype.MARGIN_VERTICAL_=20,e.Trashcan.prototype.MARGIN_HORIZONTAL_=20,e.Trashcan.prototype.MARGIN_HOTSPOT_=10,e.Trashcan.prototype.SPRITE_LEFT_=0,e.Trashcan.prototype.SPRITE_TOP_=32,e.Trashcan.prototype.HAS_BLOCKS_LID_ANGLE_=.1,e.Trashcan.ANIMATION_LENGTH_=80,e.Trashcan.ANIMATION_FRAMES_=4,e.Trashcan.OPACITY_MIN_=.4,e.Trashcan.OPACITY_MAX_=.8,e.Trashcan.MAX_LID_ANGLE_=45,e.Trashcan.prototype.isLidOpen=!1,e.Trashcan.prototype.minOpenness_=0,e.Trashcan.prototype.svgGroup_=null,e.Trashcan.prototype.svgLid_=null,e.Trashcan.prototype.lidTask_=0,e.Trashcan.prototype.lidOpen_=0,e.Trashcan.prototype.left_=0,e.Trashcan.prototype.top_=0,e.Trashcan.prototype.initialized_=!1,e.Trashcan.prototype.createDom=function(){this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyTrash"},null);var t=String(Math.random()).substring(2),n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyTrashBodyClipPath"+t},this.svgGroup_);e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:this.WIDTH_,height:this.BODY_HEIGHT_,y:this.LID_HEIGHT_},n);var r=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,x:-this.SPRITE_LEFT_,height:e.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashBodyClipPath"+t+")"},this.svgGroup_);return r.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyTrashLidClipPath"+t},this.svgGroup_),e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:this.WIDTH_,height:this.LID_HEIGHT_},n),this.svgLid_=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,x:-this.SPRITE_LEFT_,height:e.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashLidClipPath"+t+")"},this.svgGroup_),this.svgLid_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),e.browserEvents.bind(this.svgGroup_,"mousedown",this,this.blockMouseDownWhenOpenable_),e.browserEvents.bind(this.svgGroup_,"mouseup",this,this.click),e.browserEvents.bind(r,"mouseover",this,this.mouseOver_),e.browserEvents.bind(r,"mouseout",this,this.mouseOut_),this.animateLid_(),this.svgGroup_},e.Trashcan.prototype.init=function(){0<this.workspace_.options.maxTrashcanContents&&(e.utils.dom.insertAfter(this.flyout.createDom(e.utils.Svg.SVG),this.workspace_.getParentSvg()),this.flyout.init(this.workspace_)),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[e.ComponentManager.Capability.AUTOHIDEABLE,e.ComponentManager.Capability.DELETE_AREA,e.ComponentManager.Capability.DRAG_TARGET,e.ComponentManager.Capability.POSITIONABLE]}),this.initialized_=!0,this.setLidOpen(!1)},e.Trashcan.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("trashcan"),this.svgGroup_&&(e.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.workspace_=this.svgLid_=null,clearTimeout(this.lidTask_)},e.Trashcan.prototype.hasContents_=function(){return!!this.contents_.length},e.Trashcan.prototype.contentsIsOpen=function(){return this.flyout.isVisible()},e.Trashcan.prototype.openFlyout=function(){if(!this.contentsIsOpen()){var t=this.contents_.map(e.Xml.textToDom);this.flyout.show(t),this.fireUiEvent_(!0)}},e.Trashcan.prototype.closeFlyout=function(){this.contentsIsOpen()&&(this.flyout.hide(),this.fireUiEvent_(!1))},e.Trashcan.prototype.autoHide=function(t){!t&&this.flyout&&this.closeFlyout()},e.Trashcan.prototype.emptyContents=function(){this.hasContents_()&&(this.contents_.length=0,this.setMinOpenness_(0),this.closeFlyout())},e.Trashcan.prototype.position=function(t,n){if(this.initialized_){var r=e.uiPosition.getCornerOppositeToolbox(this.workspace_,t);t=e.uiPosition.getStartPositionRect(r,new e.utils.Size(this.WIDTH_,this.BODY_HEIGHT_+this.LID_HEIGHT_),this.MARGIN_HORIZONTAL_,this.MARGIN_VERTICAL_,t,this.workspace_),n=e.uiPosition.bumpPositionRect(t,this.MARGIN_VERTICAL_,r.vertical===e.uiPosition.verticalPosition.TOP?e.uiPosition.bumpDirection.DOWN:e.uiPosition.bumpDirection.UP,n),this.top_=n.top,this.left_=n.left,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}},e.Trashcan.prototype.getBoundingRectangle=function(){return new e.utils.Rect(this.top_,this.top_+this.BODY_HEIGHT_+this.LID_HEIGHT_,this.left_,this.left_+this.WIDTH_)},e.Trashcan.prototype.getClientRect=function(){if(!this.svgGroup_)return null;var t=this.svgGroup_.getBoundingClientRect(),n=t.top+this.SPRITE_TOP_-this.MARGIN_HOTSPOT_;return new e.utils.Rect(n,n+this.LID_HEIGHT_+this.BODY_HEIGHT_+2*this.MARGIN_HOTSPOT_,t=t.left+this.SPRITE_LEFT_-this.MARGIN_HOTSPOT_,t+this.WIDTH_+2*this.MARGIN_HOTSPOT_)},e.Trashcan.prototype.onDragOver=function(t){this.setLidOpen(this.wouldDelete_)},e.Trashcan.prototype.onDragExit=function(t){this.setLidOpen(!1)},e.Trashcan.prototype.onDrop=function(t){setTimeout(this.setLidOpen.bind(this,!1),100)},e.Trashcan.prototype.setLidOpen=function(t){this.isLidOpen!=t&&(clearTimeout(this.lidTask_),this.isLidOpen=t,this.animateLid_())},e.Trashcan.prototype.animateLid_=function(){var t=e.Trashcan.ANIMATION_FRAMES_,n=1/(t+1);this.lidOpen_+=this.isLidOpen?n:-n,this.lidOpen_=Math.min(Math.max(this.lidOpen_,this.minOpenness_),1),this.setLidAngle_(this.lidOpen_*e.Trashcan.MAX_LID_ANGLE_),this.svgGroup_.style.opacity=(n=e.Trashcan.OPACITY_MIN_)+this.lidOpen_*(e.Trashcan.OPACITY_MAX_-n),this.lidOpen_>this.minOpenness_&&1>this.lidOpen_&&(this.lidTask_=setTimeout(this.animateLid_.bind(this),e.Trashcan.ANIMATION_LENGTH_/t))},e.Trashcan.prototype.setLidAngle_=function(t){var n=this.workspace_.toolboxPosition==e.utils.toolbox.Position.RIGHT||this.workspace_.horizontalLayout&&this.workspace_.RTL;this.svgLid_.setAttribute("transform","rotate("+(n?-t:t)+","+(n?4:this.WIDTH_-4)+","+(this.LID_HEIGHT_-2)+")")},e.Trashcan.prototype.setMinOpenness_=function(t){this.minOpenness_=t,this.isLidOpen||this.setLidAngle_(t*e.Trashcan.MAX_LID_ANGLE_)},e.Trashcan.prototype.closeLid=function(){this.setLidOpen(!1)},e.Trashcan.prototype.click=function(){this.hasContents_()&&this.openFlyout()},e.Trashcan.prototype.fireUiEvent_=function(t){t=new(e.Events.get(e.Events.TRASHCAN_OPEN))(t,this.workspace_.id),e.Events.fire(t)},e.Trashcan.prototype.blockMouseDownWhenOpenable_=function(t){!this.contentsIsOpen()&&this.hasContents_()&&t.stopPropagation()},e.Trashcan.prototype.mouseOver_=function(){this.hasContents_()&&this.setLidOpen(!0)},e.Trashcan.prototype.mouseOut_=function(){this.setLidOpen(!1)},e.Trashcan.prototype.onDelete_=function(t){if(!(0>=this.workspace_.options.maxTrashcanContents)&&t.type==e.Events.BLOCK_DELETE&&t.oldXml.tagName&&"shadow"!=t.oldXml.tagName.toLowerCase()&&(t=this.cleanBlockXML_(t.oldXml),-1==this.contents_.indexOf(t))){for(this.contents_.unshift(t);this.contents_.length>this.workspace_.options.maxTrashcanContents;)this.contents_.pop();this.setMinOpenness_(this.HAS_BLOCKS_LID_ANGLE_)}},e.Trashcan.prototype.cleanBlockXML_=function(t){for(var n=t=t.cloneNode(!0);n;){n.removeAttribute&&(n.removeAttribute("x"),n.removeAttribute("y"),n.removeAttribute("id"),n.removeAttribute("disabled"),"comment"==n.nodeName&&(n.removeAttribute("h"),n.removeAttribute("w"),n.removeAttribute("pinned")));var r=n.firstChild||n.nextSibling;if(!r)for(r=n.parentNode;r;){if(r.nextSibling){r=r.nextSibling;break}r=r.parentNode}n=r}return e.Xml.domToText(t)},e.VariablesDynamic={},e.VariablesDynamic.onCreateVariableButtonClick_String=function(t){e.Variables.createVariableButtonHandler(t.getTargetWorkspace(),void 0,"String")},e.VariablesDynamic.onCreateVariableButtonClick_Number=function(t){e.Variables.createVariableButtonHandler(t.getTargetWorkspace(),void 0,"Number")},e.VariablesDynamic.onCreateVariableButtonClick_Colour=function(t){e.Variables.createVariableButtonHandler(t.getTargetWorkspace(),void 0,"Colour")},e.VariablesDynamic.flyoutCategory=function(t){var n=[],r=document.createElement("button");return r.setAttribute("text",e.Msg.NEW_STRING_VARIABLE),r.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),n.push(r),(r=document.createElement("button")).setAttribute("text",e.Msg.NEW_NUMBER_VARIABLE),r.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),n.push(r),(r=document.createElement("button")).setAttribute("text",e.Msg.NEW_COLOUR_VARIABLE),r.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),n.push(r),t.registerButtonCallback("CREATE_VARIABLE_STRING",e.VariablesDynamic.onCreateVariableButtonClick_String),t.registerButtonCallback("CREATE_VARIABLE_NUMBER",e.VariablesDynamic.onCreateVariableButtonClick_Number),t.registerButtonCallback("CREATE_VARIABLE_COLOUR",e.VariablesDynamic.onCreateVariableButtonClick_Colour),t=e.VariablesDynamic.flyoutCategoryBlocks(t),n.concat(t)},e.VariablesDynamic.flyoutCategoryBlocks=function(t){var n=[];if(0<(t=t.getAllVariables()).length){if(e.Blocks.variables_set_dynamic){var r=t[t.length-1],s=e.utils.xml.createElement("block");s.setAttribute("type","variables_set_dynamic"),s.setAttribute("gap",24),s.appendChild(e.Variables.generateVariableFieldDom(r)),n.push(s)}if(e.Blocks.variables_get_dynamic){t.sort(e.VariableModel.compareByName),r=0;for(var u;u=t[r];r++)(s=e.utils.xml.createElement("block")).setAttribute("type","variables_get_dynamic"),s.setAttribute("gap",8),s.appendChild(e.Variables.generateVariableFieldDom(u)),n.push(s)}}return n},e.ZoomControls=function(t){this.workspace_=t,this.id="zoomControls",this.zoomResetGroup_=this.zoomOutGroup_=this.zoomInGroup_=this.onZoomOutWrapper_=this.onZoomInWrapper_=this.onZoomResetWrapper_=null},e.ZoomControls.prototype.WIDTH_=32,e.ZoomControls.prototype.HEIGHT_=32,e.ZoomControls.prototype.SMALL_SPACING_=2,e.ZoomControls.prototype.LARGE_SPACING_=11,e.ZoomControls.prototype.MARGIN_VERTICAL_=20,e.ZoomControls.prototype.MARGIN_HORIZONTAL_=20,e.ZoomControls.prototype.svgGroup_=null,e.ZoomControls.prototype.left_=0,e.ZoomControls.prototype.top_=0,e.ZoomControls.prototype.initialized_=!1,e.ZoomControls.prototype.createDom=function(){this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},null);var t=String(Math.random()).substring(2);return this.createZoomOutSvg_(t),this.createZoomInSvg_(t),this.workspace_.isMovable()&&this.createZoomResetSvg_(t),this.svgGroup_},e.ZoomControls.prototype.init=function(){this.workspace_.getComponentManager().addComponent({component:this,weight:2,capabilities:[e.ComponentManager.Capability.POSITIONABLE]}),this.initialized_=!0},e.ZoomControls.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("zoomControls"),this.svgGroup_&&e.utils.dom.removeNode(this.svgGroup_),this.onZoomResetWrapper_&&e.browserEvents.unbind(this.onZoomResetWrapper_),this.onZoomInWrapper_&&e.browserEvents.unbind(this.onZoomInWrapper_),this.onZoomOutWrapper_&&e.browserEvents.unbind(this.onZoomOutWrapper_)},e.ZoomControls.prototype.getBoundingRectangle=function(){var t=this.SMALL_SPACING_+2*this.HEIGHT_;return this.zoomResetGroup_&&(t+=this.LARGE_SPACING_+this.HEIGHT_),new e.utils.Rect(this.top_,this.top_+t,this.left_,this.left_+this.WIDTH_)},e.ZoomControls.prototype.position=function(t,n){if(this.initialized_){var r=e.uiPosition.getCornerOppositeToolbox(this.workspace_,t),s=this.SMALL_SPACING_+2*this.HEIGHT_;this.zoomResetGroup_&&(s+=this.LARGE_SPACING_+this.HEIGHT_),t=e.uiPosition.getStartPositionRect(r,new e.utils.Size(this.WIDTH_,s),this.MARGIN_HORIZONTAL_,this.MARGIN_VERTICAL_,t,this.workspace_),n=e.uiPosition.bumpPositionRect(t,this.MARGIN_VERTICAL_,(r=r.vertical)===e.uiPosition.verticalPosition.TOP?e.uiPosition.bumpDirection.DOWN:e.uiPosition.bumpDirection.UP,n),r===e.uiPosition.verticalPosition.TOP?(this.zoomInGroup_.setAttribute("transform","translate(0, "+(r=this.SMALL_SPACING_+this.HEIGHT_)+")"),this.zoomResetGroup_&&this.zoomResetGroup_.setAttribute("transform","translate(0, "+(r+this.LARGE_SPACING_+this.HEIGHT_)+")")):(this.zoomInGroup_.setAttribute("transform","translate(0, "+(r=this.zoomResetGroup_?this.LARGE_SPACING_+this.HEIGHT_:0)+")"),this.zoomOutGroup_.setAttribute("transform","translate(0, "+(r+this.SMALL_SPACING_+this.HEIGHT_)+")")),this.top_=n.top,this.left_=n.left,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}},e.ZoomControls.prototype.createZoomOutSvg_=function(t){this.zoomOutGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyZoomoutClipPath"+t},this.zoomOutGroup_);e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:32,height:32},n),e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,height:e.SPRITE.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+t+")"},this.zoomOutGroup_).setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),this.onZoomOutWrapper_=e.browserEvents.conditionalBind(this.zoomOutGroup_,"mousedown",null,this.zoom_.bind(this,-1))},e.ZoomControls.prototype.createZoomInSvg_=function(t){this.zoomInGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyZoominClipPath"+t},this.zoomInGroup_);e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:32,height:32},n),e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,height:e.SPRITE.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+t+")"},this.zoomInGroup_).setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),this.onZoomInWrapper_=e.browserEvents.conditionalBind(this.zoomInGroup_,"mousedown",null,this.zoom_.bind(this,1))},e.ZoomControls.prototype.zoom_=function(t,n){this.workspace_.markFocused(),this.workspace_.zoomCenter(t),this.fireZoomEvent_(),e.Touch.clearTouchIdentifier(),n.stopPropagation(),n.preventDefault()},e.ZoomControls.prototype.createZoomResetSvg_=function(t){this.zoomResetGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyZoomresetClipPath"+t},this.zoomResetGroup_);e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:32,height:32},n),e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,height:e.SPRITE.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+t+")"},this.zoomResetGroup_).setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),this.onZoomResetWrapper_=e.browserEvents.conditionalBind(this.zoomResetGroup_,"mousedown",null,this.resetZoom_.bind(this))},e.ZoomControls.prototype.resetZoom_=function(t){this.workspace_.markFocused();var n=Math.log(this.workspace_.options.zoomOptions.startScale/this.workspace_.scale)/Math.log(this.workspace_.options.zoomOptions.scaleSpeed);this.workspace_.beginCanvasTransition(),this.workspace_.zoomCenter(n),this.workspace_.scrollCenter(),setTimeout(this.workspace_.endCanvasTransition.bind(this.workspace_),500),this.fireZoomEvent_(),e.Touch.clearTouchIdentifier(),t.stopPropagation(),t.preventDefault()},e.ZoomControls.prototype.fireZoomEvent_=function(){var t=new(e.Events.get(e.Events.CLICK))(null,this.workspace_.id,"zoom_controls");e.Events.fire(t)},e.Css.register([".blocklyZoom>image, .blocklyZoom>svg>image {","opacity: .4;","}",".blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {","opacity: .6;","}",".blocklyZoom>image:active, .blocklyZoom>svg>image:active {","opacity: .8;","}"]),e.ShortcutItems={},e.ShortcutItems.names={ESCAPE:"escape",DELETE:"delete",COPY:"copy",CUT:"cut",PASTE:"paste",UNDO:"undo",REDO:"redo"},e.ShortcutItems.registerEscape=function(){var t={name:e.ShortcutItems.names.ESCAPE,preconditionFn:function(n){return!n.options.readOnly},callback:function(){return e.hideChaff(),!0}};e.ShortcutRegistry.registry.register(t),e.ShortcutRegistry.registry.addKeyMapping(e.utils.KeyCodes.ESC,t.name)},e.ShortcutItems.registerDelete=function(){var t={name:e.ShortcutItems.names.DELETE,preconditionFn:function(n){return!n.options.readOnly&&e.selected&&e.selected.isDeletable()},callback:function(n,r){return r.preventDefault(),!e.Gesture.inProgress()&&(e.deleteBlock(e.selected),!0)}};e.ShortcutRegistry.registry.register(t),e.ShortcutRegistry.registry.addKeyMapping(e.utils.KeyCodes.DELETE,t.name),e.ShortcutRegistry.registry.addKeyMapping(e.utils.KeyCodes.BACKSPACE,t.name)},e.ShortcutItems.registerCopy=function(){var t={name:e.ShortcutItems.names.COPY,preconditionFn:function(r){return!r.options.readOnly&&!e.Gesture.inProgress()&&e.selected&&e.selected.isDeletable()&&e.selected.isMovable()},callback:function(r,s){return s.preventDefault(),e.hideChaff(),e.copy(e.selected),!0}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.C,[e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.C,[e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.C,[e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerCut=function(){var t={name:e.ShortcutItems.names.CUT,preconditionFn:function(r){return!r.options.readOnly&&!e.Gesture.inProgress()&&e.selected&&e.selected.isDeletable()&&e.selected.isMovable()&&!e.selected.workspace.isFlyout},callback:function(){return e.copy(e.selected),e.deleteBlock(e.selected),!0}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.X,[e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.X,[e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.X,[e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerPaste=function(){var t={name:e.ShortcutItems.names.PASTE,preconditionFn:function(r){return!r.options.readOnly&&!e.Gesture.inProgress()},callback:function(){return e.paste()}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.V,[e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.V,[e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.V,[e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerUndo=function(){var t={name:e.ShortcutItems.names.UNDO,preconditionFn:function(r){return!r.options.readOnly&&!e.Gesture.inProgress()},callback:function(r){return e.hideChaff(),r.undo(!1),!0}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerRedo=function(){var t={name:e.ShortcutItems.names.REDO,preconditionFn:function(r){return!e.Gesture.inProgress()&&!r.options.readOnly},callback:function(r){return e.hideChaff(),r.undo(!0),!0}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.SHIFT,e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.SHIFT,e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.SHIFT,e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Y,[e.utils.KeyCodes.CTRL]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerDefaultShortcuts=function(){e.ShortcutItems.registerEscape(),e.ShortcutItems.registerDelete(),e.ShortcutItems.registerCopy(),e.ShortcutItems.registerCut(),e.ShortcutItems.registerPaste(),e.ShortcutItems.registerUndo(),e.ShortcutItems.registerRedo()},e.ShortcutItems.registerDefaultShortcuts(),e.ContextMenuItems={},e.ContextMenuItems.registerUndo=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.UNDO},preconditionFn:function(t){return 0<t.workspace.getUndoStack().length?"enabled":"disabled"},callback:function(t){t.workspace.undo(!1)},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},e.ContextMenuItems.registerRedo=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.REDO},preconditionFn:function(t){return 0<t.workspace.getRedoStack().length?"enabled":"disabled"},callback:function(t){t.workspace.undo(!0)},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},e.ContextMenuItems.registerCleanup=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.CLEAN_UP},preconditionFn:function(t){return t.workspace.isMovable()?1<t.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden"},callback:function(t){t.workspace.cleanUp()},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},e.ContextMenuItems.toggleOption_=function(t,n){for(var r=0,s=0;s<n.length;s++)for(var u=n[s];u;)setTimeout(u.setCollapsed.bind(u,t),r),u=u.getNextBlock(),r+=10},e.ContextMenuItems.registerCollapse=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.COLLAPSE_ALL},preconditionFn:function(t){if(t.workspace.options.collapse){t=t.workspace.getTopBlocks(!1);for(var n=0;n<t.length;n++)for(var r=t[n];r;){if(!r.isCollapsed())return"enabled";r=r.getNextBlock()}return"disabled"}return"hidden"},callback:function(t){e.ContextMenuItems.toggleOption_(!0,t.workspace.getTopBlocks(!0))},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},e.ContextMenuItems.registerExpand=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.EXPAND_ALL},preconditionFn:function(t){if(t.workspace.options.collapse){t=t.workspace.getTopBlocks(!1);for(var n=0;n<t.length;n++)for(var r=t[n];r;){if(r.isCollapsed())return"enabled";r=r.getNextBlock()}return"disabled"}return"hidden"},callback:function(t){e.ContextMenuItems.toggleOption_(!1,t.workspace.getTopBlocks(!0))},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},e.ContextMenuItems.addDeletableBlocks_=function(t,n){if(t.isDeletable())Array.prototype.push.apply(n,t.getDescendants(!1));else{t=t.getChildren(!1);for(var r=0;r<t.length;r++)e.ContextMenuItems.addDeletableBlocks_(t[r],n)}},e.ContextMenuItems.getDeletableBlocks_=function(t){var n=[];t=t.getTopBlocks(!0);for(var r=0;r<t.length;r++)e.ContextMenuItems.addDeletableBlocks_(t[r],n);return n},e.ContextMenuItems.deleteNext_=function(t,n){e.Events.setGroup(n);var r=t.shift();r&&(r.workspace?(r.dispose(!1,!0),setTimeout(e.ContextMenuItems.deleteNext_,10,t,n)):e.ContextMenuItems.deleteNext_(t,n)),e.Events.setGroup(!1)},e.ContextMenuItems.registerDeleteAll=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){if(t.workspace)return 1==(t=e.ContextMenuItems.getDeletableBlocks_(t.workspace).length)?e.Msg.DELETE_BLOCK:e.Msg.DELETE_X_BLOCKS.replace("%1",String(t))},preconditionFn:function(t){if(t.workspace)return 0<e.ContextMenuItems.getDeletableBlocks_(t.workspace).length?"enabled":"disabled"},callback:function(t){if(t.workspace){t.workspace.cancelCurrentGesture();var n=e.ContextMenuItems.getDeletableBlocks_(t.workspace),r=e.utils.genUid();2>n.length?e.ContextMenuItems.deleteNext_(n,r):e.confirm(e.Msg.DELETE_ALL_BLOCKS.replace("%1",n.length),function(s){s&&e.ContextMenuItems.deleteNext_(n,r)})}},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},e.ContextMenuItems.registerWorkspaceOptions_=function(){e.ContextMenuItems.registerUndo(),e.ContextMenuItems.registerRedo(),e.ContextMenuItems.registerCleanup(),e.ContextMenuItems.registerCollapse(),e.ContextMenuItems.registerExpand(),e.ContextMenuItems.registerDeleteAll()},e.ContextMenuItems.registerDuplicate=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.DUPLICATE_BLOCK},preconditionFn:function(t){return!(t=t.block).isInFlyout&&t.isDeletable()&&t.isMovable()?t.isDuplicatable()?"enabled":"disabled":"hidden"},callback:function(t){t.block&&e.duplicate(t.block)},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},e.ContextMenuItems.registerComment=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.getCommentIcon()?e.Msg.REMOVE_COMMENT:e.Msg.ADD_COMMENT},preconditionFn:function(t){return t=t.block,e.utils.userAgent.IE||t.isInFlyout||!t.workspace.options.comments||t.isCollapsed()||!t.isEditable()?"hidden":"enabled"},callback:function(t){(t=t.block).getCommentIcon()?t.setCommentText(null):t.setCommentText("")},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockComment",weight:2})},e.ContextMenuItems.registerInline=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.getInputsInline()?e.Msg.EXTERNAL_INPUTS:e.Msg.INLINE_INPUTS},preconditionFn:function(t){if(!(t=t.block).isInFlyout&&t.isMovable()&&!t.isCollapsed())for(var n=1;n<t.inputList.length;n++)if(t.inputList[n-1].type!=e.inputTypes.STATEMENT&&t.inputList[n].type!=e.inputTypes.STATEMENT)return"enabled";return"hidden"},callback:function(t){t.block.setInputsInline(!t.block.getInputsInline())},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockInline",weight:3})},e.ContextMenuItems.registerCollapseExpandBlock=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.isCollapsed()?e.Msg.EXPAND_BLOCK:e.Msg.COLLAPSE_BLOCK},preconditionFn:function(t){return!(t=t.block).isInFlyout&&t.isMovable()&&t.workspace.options.collapse?"enabled":"hidden"},callback:function(t){t.block.setCollapsed(!t.block.isCollapsed())},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},e.ContextMenuItems.registerDisable=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.isEnabled()?e.Msg.DISABLE_BLOCK:e.Msg.ENABLE_BLOCK},preconditionFn:function(t){return!(t=t.block).isInFlyout&&t.workspace.options.disable&&t.isEditable()?t.getInheritedDisabled()?"disabled":"enabled":"hidden"},callback:function(t){t=t.block;var n=e.Events.getGroup();n||e.Events.setGroup(!0),t.setEnabled(!t.isEnabled()),n||e.Events.setGroup(!1)},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDisable",weight:5})},e.ContextMenuItems.registerDelete=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){var n=t.block;return t=n.getDescendants(!1).length,(n=n.getNextBlock())&&(t-=n.getDescendants(!1).length),1==t?e.Msg.DELETE_BLOCK:e.Msg.DELETE_X_BLOCKS.replace("%1",String(t))},preconditionFn:function(t){return!t.block.isInFlyout&&t.block.isDeletable()?"enabled":"hidden"},callback:function(t){e.Events.setGroup(!0),t.block&&e.deleteBlock(t.block),e.Events.setGroup(!1)},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDelete",weight:6})},e.ContextMenuItems.registerHelp=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.HELP},preconditionFn:function(t){return("function"==typeof(t=t.block).helpUrl?t.helpUrl():t.helpUrl)?"enabled":"hidden"},callback:function(t){t.block.showHelp()},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockHelp",weight:7})},e.ContextMenuItems.registerBlockOptions_=function(){e.ContextMenuItems.registerDuplicate(),e.ContextMenuItems.registerComment(),e.ContextMenuItems.registerInline(),e.ContextMenuItems.registerCollapseExpandBlock(),e.ContextMenuItems.registerDisable(),e.ContextMenuItems.registerDelete(),e.ContextMenuItems.registerHelp()},e.ContextMenuItems.registerDefaultOptions=function(){e.ContextMenuItems.registerWorkspaceOptions_(),e.ContextMenuItems.registerBlockOptions_()},e.ContextMenuItems.registerDefaultOptions(),e.Mutator=function(t){e.Mutator.superClass_.constructor.call(this,null),this.quarkNames_=t},e.utils.object.inherits(e.Mutator,e.Icon),e.Mutator.prototype.workspace_=null,e.Mutator.prototype.workspaceWidth_=0,e.Mutator.prototype.workspaceHeight_=0,e.Mutator.prototype.setBlock=function(t){this.block_=t},e.Mutator.prototype.getWorkspace=function(){return this.workspace_},e.Mutator.prototype.drawIcon_=function(t){e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},t),e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},t),e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},t)},e.Mutator.prototype.iconClick_=function(t){this.block_.isEditable()&&e.Icon.prototype.iconClick_.call(this,t)},e.Mutator.prototype.createEditor_=function(){if(this.svgDialog_=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{x:e.Bubble.BORDER_WIDTH,y:e.Bubble.BORDER_WIDTH},null),this.quarkNames_.length)for(var r,t=e.utils.xml.createElement("xml"),n=0;r=this.quarkNames_[n];n++){var s=e.utils.xml.createElement("block");s.setAttribute("type",r),t.appendChild(s)}else t=null;return(n=new e.Options({disable:!1,parentWorkspace:this.block_.workspace,media:this.block_.workspace.options.pathToMedia,rtl:this.block_.RTL,horizontalLayout:!1,renderer:this.block_.workspace.options.renderer,rendererOverrides:this.block_.workspace.options.rendererOverrides})).toolboxPosition=this.block_.RTL?e.utils.toolbox.Position.RIGHT:e.utils.toolbox.Position.LEFT,(r=!!t)&&(n.languageTree=e.utils.toolbox.convertToolboxDefToJson(t)),this.workspace_=new e.WorkspaceSvg(n),this.workspace_.isMutator=!0,this.workspace_.addChangeListener(e.Events.disableOrphans),t=r?this.workspace_.addFlyout(e.utils.Svg.G):null,n=this.workspace_.createDom("blocklyMutatorBackground"),t&&n.insertBefore(t,this.workspace_.svgBlockCanvas_),this.svgDialog_.appendChild(n),this.svgDialog_},e.Mutator.prototype.updateEditable=function(){e.Mutator.superClass_.updateEditable.call(this),this.block_.isInFlyout||(this.block_.isEditable()?this.iconGroup_&&e.utils.dom.removeClass(this.iconGroup_,"blocklyIconGroupReadonly"):(this.setVisible(!1),this.iconGroup_&&e.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly")))},e.Mutator.prototype.resizeBubble_=function(){var t=2*e.Bubble.BORDER_WIDTH,n=this.workspace_.getCanvas().getBBox(),r=n.width+n.x,s=n.height+3*t,u=this.workspace_.getFlyout();if(u){var b=u.getWorkspace().getMetricsManager().getScrollMetrics();s=Math.max(s,b.height+20),r+=u.getWidth()}this.block_.RTL&&(r=-n.x),r+=3*t,(Math.abs(this.workspaceWidth_-r)>t||Math.abs(this.workspaceHeight_-s)>t)&&(this.workspaceWidth_=r,this.workspaceHeight_=s,this.bubble_.setBubbleSize(r+t,s+t),this.svgDialog_.setAttribute("width",this.workspaceWidth_),this.svgDialog_.setAttribute("height",this.workspaceHeight_),this.workspace_.setCachedParentSvgSize(this.workspaceWidth_,this.workspaceHeight_)),this.block_.RTL&&(t="translate("+this.workspaceWidth_+",0)",this.workspace_.getCanvas().setAttribute("transform",t)),this.workspace_.resize()},e.Mutator.prototype.onBubbleMove_=function(){this.workspace_&&this.workspace_.recordDragTargets()},e.Mutator.prototype.setVisible=function(t){if(t!=this.isVisible())if(e.Events.fire(new(e.Events.get(e.Events.BUBBLE_OPEN))(this.block_,t,"mutator")),t){this.bubble_=new e.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,null,null),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerMoveEvent(this.onBubbleMove_.bind(this));var n=this.workspace_.options.languageTree;t=this.workspace_.getFlyout(),n&&(t.init(this.workspace_),t.show(n)),this.rootBlock_=this.block_.decompose(this.workspace_),n=this.rootBlock_.getDescendants(!1);for(var s,r=0;s=n[r];r++)s.render();if(this.rootBlock_.setMovable(!1),this.rootBlock_.setDeletable(!1),t?(n=2*t.CORNER_RADIUS,t=this.rootBlock_.RTL?t.getWidth()+n:n):t=n=16,this.block_.RTL&&(t=-t),this.rootBlock_.moveBy(t,n),this.block_.saveConnections){var u=this,b=this.block_;b.saveConnections(this.rootBlock_),this.sourceListener_=function(){b.saveConnections(u.rootBlock_)},this.block_.workspace.addChangeListener(this.sourceListener_)}this.resizeBubble_(),this.workspace_.addChangeListener(this.workspaceChanged_.bind(this)),this.applyColour()}else this.svgDialog_=null,this.workspace_.dispose(),this.rootBlock_=this.workspace_=null,this.bubble_.dispose(),this.bubble_=null,this.workspaceHeight_=this.workspaceWidth_=0,this.sourceListener_&&(this.block_.workspace.removeChangeListener(this.sourceListener_),this.sourceListener_=null)},e.Mutator.prototype.workspaceChanged_=function(t){if(!(t.isUiEvent||t.type==e.Events.CHANGE&&"disabled"==t.element)){if(!this.workspace_.isDragging()){t=this.workspace_.getTopBlocks(!1);for(var r,n=0;r=t[n];n++){var s=r.getRelativeToSurfaceXY();if(20>s.y&&r.moveBy(0,20-s.y),r.RTL){var u=-20,b=this.workspace_.getFlyout();b&&(u-=b.getWidth()),s.x>u&&r.moveBy(u-s.x,0)}else 20>s.x&&r.moveBy(20-s.x,0)}}if(this.rootBlock_.workspace==this.workspace_){if(e.Events.setGroup(!0),t=(t=(r=this.block_).mutationToDom())&&e.Xml.domToText(t),n=r.rendered,r.rendered=!1,r.compose(this.rootBlock_),r.rendered=n,r.initSvg(),r.rendered&&r.render(),t!=(n=(n=r.mutationToDom())&&e.Xml.domToText(n))){e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(r,"mutation",null,t,n));var x=e.Events.getGroup();setTimeout(function(){e.Events.setGroup(x),r.bumpNeighbours(),e.Events.setGroup(!1)},e.BUMP_DELAY)}this.workspace_.isDragging()||this.resizeBubble_(),e.Events.setGroup(!1)}}},e.Mutator.prototype.dispose=function(){this.block_.mutator=null,e.Icon.prototype.dispose.call(this)},e.Mutator.prototype.updateBlockStyle=function(){var t=this.workspace_;if(t&&t.getAllBlocks(!1)){for(var s,n=t.getAllBlocks(!1),r=0;s=n[r];r++)s.setStyle(s.getStyleName());if(r=t.getFlyout())for(t=r.workspace_.getAllBlocks(!1),r=0;s=t[r];r++)s.setStyle(s.getStyleName())}},e.Mutator.reconnect=function(t,n,r){if(!t||!t.getSourceBlock().workspace)return!1;r=n.getInput(r).connection;var s=t.targetBlock();return!(s&&s!=n||r.targetConnection==t||(r.isConnected()&&r.disconnect(),r.connect(t),0))},e.Mutator.findParentWs=function(t){var n=null;if(t&&t.options){var r=t.options.parentWorkspace;t.isFlyout?r&&r.options&&(n=r.options.parentWorkspace):r&&(n=r)}return n},e.FieldTextInput=function(t,n,r){this.spellcheck_=!0,e.FieldTextInput.superClass_.constructor.call(this,t,n,r),this.onKeyInputWrapper_=this.onKeyDownWrapper_=this.htmlInput_=null,this.fullBlockClickTarget_=!1,this.workspace_=null},e.utils.object.inherits(e.FieldTextInput,e.Field),e.FieldTextInput.prototype.DEFAULT_VALUE="",e.FieldTextInput.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.text);return new e.FieldTextInput(n,void 0,t)},e.FieldTextInput.prototype.SERIALIZABLE=!0,e.FieldTextInput.BORDERRADIUS=4,e.FieldTextInput.prototype.CURSOR="text",e.FieldTextInput.prototype.configure_=function(t){e.FieldTextInput.superClass_.configure_.call(this,t),"boolean"==typeof t.spellcheck&&(this.spellcheck_=t.spellcheck)},e.FieldTextInput.prototype.initView=function(){if(this.getConstants().FULL_BLOCK_FIELDS){for(var s,t=0,n=0,r=0;s=this.sourceBlock_.inputList[r];r++){for(var u=0;s.fieldRow[u];u++)t++;s.connection&&n++}this.fullBlockClickTarget_=1>=t&&this.sourceBlock_.outputConnection&&!n}else this.fullBlockClickTarget_=!1;this.fullBlockClickTarget_?this.clickTarget_=this.sourceBlock_.getSvgRoot():this.createBorderRect_(),this.createTextElement_()},e.FieldTextInput.prototype.doClassValidation_=function(t){return null==t?null:String(t)},e.FieldTextInput.prototype.doValueInvalid_=function(t){this.isBeingEdited_&&(this.isTextValid_=!1,t=this.value_,this.value_=this.htmlInput_.untypedDefaultValue_,this.sourceBlock_&&e.Events.isEnabled()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this.sourceBlock_,"field",this.name||null,t,this.value_)))},e.FieldTextInput.prototype.doValueUpdate_=function(t){this.isTextValid_=!0,this.value_=t,this.isBeingEdited_||(this.isDirty_=!0)},e.FieldTextInput.prototype.applyColour=function(){this.sourceBlock_&&this.getConstants().FULL_BLOCK_FIELDS&&(this.borderRect_?this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary):this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR))},e.FieldTextInput.prototype.render_=function(){if(e.FieldTextInput.superClass_.render_.call(this),this.isBeingEdited_){this.resizeEditor_();var t=this.htmlInput_;this.isTextValid_?(e.utils.dom.removeClass(t,"blocklyInvalidInput"),e.utils.aria.setState(t,e.utils.aria.State.INVALID,!1)):(e.utils.dom.addClass(t,"blocklyInvalidInput"),e.utils.aria.setState(t,e.utils.aria.State.INVALID,!0))}},e.FieldTextInput.prototype.setSpellcheck=function(t){t!=this.spellcheck_&&(this.spellcheck_=t,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))},e.FieldTextInput.prototype.showEditor_=function(t,n){this.workspace_=this.sourceBlock_.workspace,!(t=n||!1)&&(e.utils.userAgent.MOBILE||e.utils.userAgent.ANDROID||e.utils.userAgent.IPAD)?this.showPromptEditor_():this.showInlineEditor_(t)},e.FieldTextInput.prototype.showPromptEditor_=function(){e.prompt(e.Msg.CHANGE_VALUE_TITLE,this.getText(),function(t){this.setValue(this.getValueFromEditorText_(t))}.bind(this))},e.FieldTextInput.prototype.showInlineEditor_=function(t){e.WidgetDiv.show(this,this.sourceBlock_.RTL,this.widgetDispose_.bind(this)),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,t||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())},e.FieldTextInput.prototype.widgetCreate_=function(){var t=e.WidgetDiv.DIV;e.utils.dom.addClass(this.getClickTarget_(),"editing");var n=document.createElement("input");n.className="blocklyHtmlInput",n.setAttribute("spellcheck",this.spellcheck_);var r=this.workspace_.getScale(),s=this.getConstants().FIELD_TEXT_FONTSIZE*r+"pt";if(t.style.fontSize=s,n.style.fontSize=s,s=e.FieldTextInput.BORDERRADIUS*r+"px",this.fullBlockClickTarget_){s=((s=this.getScaledBBox()).bottom-s.top)/2+"px";var u=this.sourceBlock_.getParent()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;n.style.border=1*r+"px solid "+u,t.style.borderRadius=s,t.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(t.style.boxShadow="rgba(255, 255, 255, 0.3) 0px 0px 0px "+4*r+"px")}return n.style.borderRadius=s,t.appendChild(n),n.value=n.defaultValue=this.getEditorText_(this.value_),n.untypedDefaultValue_=this.value_,n.oldValue_=null,this.resizeEditor_(),this.bindInputEvents_(n),n},e.FieldTextInput.prototype.widgetDispose_=function(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_&&this.onFinishEditing_(this.value_),this.unbindInputEvents_();var t=e.WidgetDiv.DIV.style;t.width="auto",t.height="auto",t.fontSize="",t.transition="",t.boxShadow="",this.htmlInput_=null,e.utils.dom.removeClass(this.getClickTarget_(),"editing")},e.FieldTextInput.prototype.bindInputEvents_=function(t){this.onKeyDownWrapper_=e.browserEvents.conditionalBind(t,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper_=e.browserEvents.conditionalBind(t,"input",this,this.onHtmlInputChange_)},e.FieldTextInput.prototype.unbindInputEvents_=function(){this.onKeyDownWrapper_&&(e.browserEvents.unbind(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.onKeyInputWrapper_&&(e.browserEvents.unbind(this.onKeyInputWrapper_),this.onKeyInputWrapper_=null)},e.FieldTextInput.prototype.onHtmlInputKeyDown_=function(t){t.keyCode==e.utils.KeyCodes.ENTER?(e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation()):t.keyCode==e.utils.KeyCodes.ESC?(this.setValue(this.htmlInput_.untypedDefaultValue_),e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation()):t.keyCode==e.utils.KeyCodes.TAB&&(e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation(),this.sourceBlock_.tab(this,!t.shiftKey),t.preventDefault())},e.FieldTextInput.prototype.onHtmlInputChange_=function(t){(t=this.htmlInput_.value)!==this.htmlInput_.oldValue_&&(this.htmlInput_.oldValue_=t,e.Events.setGroup(!0),t=this.getValueFromEditorText_(t),this.setValue(t),this.forceRerender(),this.resizeEditor_(),e.Events.setGroup(!1))},e.FieldTextInput.prototype.setEditorValue_=function(t){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(t)),this.setValue(t)},e.FieldTextInput.prototype.resizeEditor_=function(){var t=e.WidgetDiv.DIV,n=this.getScaledBBox();t.style.width=n.right-n.left+"px",t.style.height=n.bottom-n.top+"px",n=new e.utils.Coordinate(this.sourceBlock_.RTL?n.right-t.offsetWidth:n.left,n.top),t.style.left=n.x+"px",t.style.top=n.y+"px"},e.FieldTextInput.prototype.isTabNavigable=function(){return!0},e.FieldTextInput.prototype.getText_=function(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null},e.FieldTextInput.prototype.getEditorText_=function(t){return String(t)},e.FieldTextInput.prototype.getValueFromEditorText_=function(t){return t},e.fieldRegistry.register("field_input",e.FieldTextInput),e.FieldAngle=function(t,n,r){this.clockwise_=e.FieldAngle.CLOCKWISE,this.offset_=e.FieldAngle.OFFSET,this.wrap_=e.FieldAngle.WRAP,this.round_=e.FieldAngle.ROUND,e.FieldAngle.superClass_.constructor.call(this,t,n,r),this.moveSurfaceWrapper_=this.clickSurfaceWrapper_=this.clickWrapper_=this.line_=this.gauge_=this.editor_=null},e.utils.object.inherits(e.FieldAngle,e.FieldTextInput),e.FieldAngle.prototype.DEFAULT_VALUE=0,e.FieldAngle.fromJson=function(t){return new e.FieldAngle(t.angle,void 0,t)},e.FieldAngle.prototype.SERIALIZABLE=!0,e.FieldAngle.ROUND=15,e.FieldAngle.HALF=50,e.FieldAngle.CLOCKWISE=!1,e.FieldAngle.OFFSET=0,e.FieldAngle.WRAP=360,e.FieldAngle.RADIUS=e.FieldAngle.HALF-1,e.FieldAngle.prototype.configure_=function(t){switch(e.FieldAngle.superClass_.configure_.call(this,t),t.mode){case"compass":this.clockwise_=!0,this.offset_=90;break;case"protractor":this.clockwise_=!1,this.offset_=0}var n=t.clockwise;"boolean"==typeof n&&(this.clockwise_=n),null!=(n=t.offset)&&(n=Number(n),isNaN(n)||(this.offset_=n)),null!=(n=t.wrap)&&(n=Number(n),isNaN(n)||(this.wrap_=n)),null!=(t=t.round)&&(t=Number(t),isNaN(t)||(this.round_=t))},e.FieldAngle.prototype.initView=function(){e.FieldAngle.superClass_.initView.call(this),this.symbol_=e.utils.dom.createSvgElement(e.utils.Svg.TSPAN,{},null),this.symbol_.appendChild(document.createTextNode("\xb0")),this.textElement_.appendChild(this.symbol_)},e.FieldAngle.prototype.render_=function(){e.FieldAngle.superClass_.render_.call(this),this.updateGraph_()},e.FieldAngle.prototype.showEditor_=function(t){e.FieldAngle.superClass_.showEditor_.call(this,t,e.utils.userAgent.MOBILE||e.utils.userAgent.ANDROID||e.utils.userAgent.IPAD),this.dropdownCreate_(),e.DropDownDiv.getContentDiv().appendChild(this.editor_),e.DropDownDiv.setColour(this.sourceBlock_.style.colourPrimary,this.sourceBlock_.style.colourTertiary),e.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.updateGraph_()},e.FieldAngle.prototype.dropdownCreate_=function(){var t=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{xmlns:e.utils.dom.SVG_NS,"xmlns:html":e.utils.dom.HTML_NS,"xmlns:xlink":e.utils.dom.XLINK_NS,version:"1.1",height:2*e.FieldAngle.HALF+"px",width:2*e.FieldAngle.HALF+"px",style:"touch-action: none"},null),n=e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{cx:e.FieldAngle.HALF,cy:e.FieldAngle.HALF,r:e.FieldAngle.RADIUS,class:"blocklyAngleCircle"},t);this.gauge_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyAngleGauge"},t),this.line_=e.utils.dom.createSvgElement(e.utils.Svg.LINE,{x1:e.FieldAngle.HALF,y1:e.FieldAngle.HALF,class:"blocklyAngleLine"},t);for(var r=0;360>r;r+=15)e.utils.dom.createSvgElement(e.utils.Svg.LINE,{x1:e.FieldAngle.HALF+e.FieldAngle.RADIUS,y1:e.FieldAngle.HALF,x2:e.FieldAngle.HALF+e.FieldAngle.RADIUS-(r%45==0?10:5),y2:e.FieldAngle.HALF,class:"blocklyAngleMarks",transform:"rotate("+r+","+e.FieldAngle.HALF+","+e.FieldAngle.HALF+")"},t);this.clickWrapper_=e.browserEvents.conditionalBind(t,"click",this,this.hide_),this.clickSurfaceWrapper_=e.browserEvents.conditionalBind(n,"click",this,this.onMouseMove_,!0,!0),this.moveSurfaceWrapper_=e.browserEvents.conditionalBind(n,"mousemove",this,this.onMouseMove_,!0,!0),this.editor_=t},e.FieldAngle.prototype.dropdownDispose_=function(){this.clickWrapper_&&(e.browserEvents.unbind(this.clickWrapper_),this.clickWrapper_=null),this.clickSurfaceWrapper_&&(e.browserEvents.unbind(this.clickSurfaceWrapper_),this.clickSurfaceWrapper_=null),this.moveSurfaceWrapper_&&(e.browserEvents.unbind(this.moveSurfaceWrapper_),this.moveSurfaceWrapper_=null),this.line_=this.gauge_=null},e.FieldAngle.prototype.hide_=function(){e.DropDownDiv.hideIfOwner(this),e.WidgetDiv.hide()},e.FieldAngle.prototype.onMouseMove_=function(t){var n=this.gauge_.ownerSVGElement.getBoundingClientRect(),r=t.clientX-n.left-e.FieldAngle.HALF;t=t.clientY-n.top-e.FieldAngle.HALF,n=Math.atan(-t/r),isNaN(n)||(n=e.utils.math.toDegrees(n),0>r?n+=180:0<t&&(n+=360),this.displayMouseOrKeyboardValue_(n=this.clockwise_?this.offset_+360-n:360-(this.offset_-n)))},e.FieldAngle.prototype.displayMouseOrKeyboardValue_=function(t){this.round_&&(t=Math.round(t/this.round_)*this.round_),(t=this.wrapValue_(t))!=this.value_&&this.setEditorValue_(t)},e.FieldAngle.prototype.updateGraph_=function(){if(this.gauge_){var t=Number(this.getText())+this.offset_,n=e.utils.math.toRadians(t%360);t=["M ",e.FieldAngle.HALF,",",e.FieldAngle.HALF];var r=e.FieldAngle.HALF,s=e.FieldAngle.HALF;if(!isNaN(n)){var u=Number(this.clockwise_),b=e.utils.math.toRadians(this.offset_),x=Math.cos(b)*e.FieldAngle.RADIUS,B=Math.sin(b)*-e.FieldAngle.RADIUS;u&&(n=2*b-n),r+=Math.cos(n)*e.FieldAngle.RADIUS,s-=Math.sin(n)*e.FieldAngle.RADIUS,n=Math.abs(Math.floor((n-b)/Math.PI)%2),u&&(n=1-n),t.push(" l ",x,",",B," A ",e.FieldAngle.RADIUS,",",e.FieldAngle.RADIUS," 0 ",n," ",u," ",r,",",s," z")}this.gauge_.setAttribute("d",t.join("")),this.line_.setAttribute("x2",r),this.line_.setAttribute("y2",s)}},e.FieldAngle.prototype.onHtmlInputKeyDown_=function(t){var n;if(e.FieldAngle.superClass_.onHtmlInputKeyDown_.call(this,t),t.keyCode===e.utils.KeyCodes.LEFT?n=this.sourceBlock_.RTL?1:-1:t.keyCode===e.utils.KeyCodes.RIGHT?n=this.sourceBlock_.RTL?-1:1:t.keyCode===e.utils.KeyCodes.DOWN?n=-1:t.keyCode===e.utils.KeyCodes.UP&&(n=1),n){var r=this.getValue();this.displayMouseOrKeyboardValue_(r+n*this.round_),t.preventDefault(),t.stopPropagation()}},e.FieldAngle.prototype.doClassValidation_=function(t){return t=Number(t),isNaN(t)||!isFinite(t)?null:this.wrapValue_(t)},e.FieldAngle.prototype.wrapValue_=function(t){return 0>(t%=360)&&(t+=360),t>this.wrap_&&(t-=360),t},e.Css.register(".blocklyAngleCircle {,stroke: #444;,stroke-width: 1;,fill: #ddd;,fill-opacity: .8;,},.blocklyAngleMarks {,stroke: #444;,stroke-width: 1;,},.blocklyAngleGauge {,fill: #f88;,fill-opacity: .8;,pointer-events: none;,},.blocklyAngleLine {,stroke: #f00;,stroke-width: 2;,stroke-linecap: round;,pointer-events: none;,}".split(",")),e.fieldRegistry.register("field_angle",e.FieldAngle),e.FieldCheckbox=function(t,n,r){this.checkChar_=null,e.FieldCheckbox.superClass_.constructor.call(this,t,n,r)},e.utils.object.inherits(e.FieldCheckbox,e.Field),e.FieldCheckbox.prototype.DEFAULT_VALUE=!1,e.FieldCheckbox.fromJson=function(t){return new e.FieldCheckbox(t.checked,void 0,t)},e.FieldCheckbox.CHECK_CHAR="\u2713",e.FieldCheckbox.prototype.SERIALIZABLE=!0,e.FieldCheckbox.prototype.CURSOR="default",e.FieldCheckbox.prototype.configure_=function(t){e.FieldCheckbox.superClass_.configure_.call(this,t),t.checkCharacter&&(this.checkChar_=t.checkCharacter)},e.FieldCheckbox.prototype.initView=function(){e.FieldCheckbox.superClass_.initView.call(this),e.utils.dom.addClass(this.textElement_,"blocklyCheckbox"),this.textElement_.style.display=this.value_?"block":"none"},e.FieldCheckbox.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)},e.FieldCheckbox.prototype.getDisplayText_=function(){return this.checkChar_||e.FieldCheckbox.CHECK_CHAR},e.FieldCheckbox.prototype.setCheckCharacter=function(t){this.checkChar_=t,this.forceRerender()},e.FieldCheckbox.prototype.showEditor_=function(){this.setValue(!this.value_)},e.FieldCheckbox.prototype.doClassValidation_=function(t){return!0===t||"TRUE"===t?"TRUE":!1===t||"FALSE"===t?"FALSE":null},e.FieldCheckbox.prototype.doValueUpdate_=function(t){this.value_=this.convertValueToBool_(t),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")},e.FieldCheckbox.prototype.getValue=function(){return this.value_?"TRUE":"FALSE"},e.FieldCheckbox.prototype.getValueBoolean=function(){return this.value_},e.FieldCheckbox.prototype.getText=function(){return String(this.convertValueToBool_(this.value_))},e.FieldCheckbox.prototype.convertValueToBool_=function(t){return"string"==typeof t?"TRUE"==t:!!t},e.fieldRegistry.register("field_checkbox",e.FieldCheckbox),e.FieldColour=function(t,n,r){e.FieldColour.superClass_.constructor.call(this,t,n,r),this.onKeyDownWrapper_=this.onMouseLeaveWrapper_=this.onMouseEnterWrapper_=this.onMouseMoveWrapper_=this.onClickWrapper_=this.highlightedIndex_=this.picker_=null},e.utils.object.inherits(e.FieldColour,e.Field),e.FieldColour.fromJson=function(t){return new e.FieldColour(t.colour,void 0,t)},e.FieldColour.prototype.SERIALIZABLE=!0,e.FieldColour.prototype.CURSOR="default",e.FieldColour.prototype.isDirty_=!1,e.FieldColour.prototype.colours_=null,e.FieldColour.prototype.titles_=null,e.FieldColour.prototype.columns_=0,e.FieldColour.prototype.configure_=function(t){e.FieldColour.superClass_.configure_.call(this,t),t.colourOptions&&(this.colours_=t.colourOptions,this.titles_=t.colourTitles),t.columns&&(this.columns_=t.columns)},e.FieldColour.prototype.initView=function(){this.size_=new e.utils.Size(this.getConstants().FIELD_COLOUR_DEFAULT_WIDTH,this.getConstants().FIELD_COLOUR_DEFAULT_HEIGHT),this.getConstants().FIELD_COLOUR_FULL_BLOCK?this.clickTarget_=this.sourceBlock_.getSvgRoot():(this.createBorderRect_(),this.borderRect_.style.fillOpacity="1")},e.FieldColour.prototype.applyColour=function(){this.getConstants().FIELD_COLOUR_FULL_BLOCK?(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getValue()),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff")):this.borderRect_&&(this.borderRect_.style.fill=this.getValue())},e.FieldColour.prototype.doClassValidation_=function(t){return"string"!=typeof t?null:e.utils.colour.parse(t)},e.FieldColour.prototype.doValueUpdate_=function(t){this.value_=t,this.borderRect_?this.borderRect_.style.fill=t:this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",t),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff"))},e.FieldColour.prototype.getText=function(){var t=this.value_;return/^#(.)\1(.)\2(.)\3$/.test(t)&&(t="#"+t[1]+t[3]+t[5]),t},e.FieldColour.COLOURS="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" "),e.FieldColour.prototype.DEFAULT_VALUE=e.FieldColour.COLOURS[0],e.FieldColour.TITLES=[],e.FieldColour.COLUMNS=7,e.FieldColour.prototype.setColours=function(t,n){return this.colours_=t,n&&(this.titles_=n),this},e.FieldColour.prototype.setColumns=function(t){return this.columns_=t,this},e.FieldColour.prototype.showEditor_=function(){this.dropdownCreate_(),e.DropDownDiv.getContentDiv().appendChild(this.picker_),e.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.picker_.focus({preventScroll:!0})},e.FieldColour.prototype.onClick_=function(t){null!==(t=(t=t.target)&&t.label)&&(this.setValue(t),e.DropDownDiv.hideIfOwner(this))},e.FieldColour.prototype.onKeyDown_=function(t){var n=!1;t.keyCode===e.utils.KeyCodes.UP?(this.moveHighlightBy_(0,-1),n=!0):t.keyCode===e.utils.KeyCodes.DOWN?(this.moveHighlightBy_(0,1),n=!0):t.keyCode===e.utils.KeyCodes.LEFT?(this.moveHighlightBy_(-1,0),n=!0):t.keyCode===e.utils.KeyCodes.RIGHT?(this.moveHighlightBy_(1,0),n=!0):t.keyCode===e.utils.KeyCodes.ENTER&&((n=this.getHighlighted_())&&null!==(n=n&&n.label)&&this.setValue(n),e.DropDownDiv.hideWithoutAnimation(),n=!0),n&&t.stopPropagation()},e.FieldColour.prototype.moveHighlightBy_=function(t,n){var r=this.colours_||e.FieldColour.COLOURS,s=this.columns_||e.FieldColour.COLUMNS,u=this.highlightedIndex_%s,b=Math.floor(this.highlightedIndex_/s);u+=t,b+=n,0>t?0>u&&0<b?(u=s-1,b--):0>u&&(u=0):0<t?u>s-1&&b<Math.floor(r.length/s)-1?(u=0,b++):u>s-1&&u--:0>n?0>b&&(b=0):0<n&&b>Math.floor(r.length/s)-1&&(b=Math.floor(r.length/s)-1),this.setHighlightedCell_(this.picker_.childNodes[b].childNodes[u],b*s+u)},e.FieldColour.prototype.onMouseMove_=function(t){var n=(t=t.target)&&Number(t.getAttribute("data-index"));null!==n&&n!==this.highlightedIndex_&&this.setHighlightedCell_(t,n)},e.FieldColour.prototype.onMouseEnter_=function(){this.picker_.focus({preventScroll:!0})},e.FieldColour.prototype.onMouseLeave_=function(){this.picker_.blur();var t=this.getHighlighted_();t&&e.utils.dom.removeClass(t,"blocklyColourHighlighted")},e.FieldColour.prototype.getHighlighted_=function(){var t=this.columns_||e.FieldColour.COLUMNS,n=this.picker_.childNodes[Math.floor(this.highlightedIndex_/t)];return n?n.childNodes[this.highlightedIndex_%t]:null},e.FieldColour.prototype.setHighlightedCell_=function(t,n){var r=this.getHighlighted_();r&&e.utils.dom.removeClass(r,"blocklyColourHighlighted"),e.utils.dom.addClass(t,"blocklyColourHighlighted"),this.highlightedIndex_=n,e.utils.aria.setState(this.picker_,e.utils.aria.State.ACTIVEDESCENDANT,t.getAttribute("id"))},e.FieldColour.prototype.dropdownCreate_=function(){var t=this.columns_||e.FieldColour.COLUMNS,n=this.colours_||e.FieldColour.COLOURS,r=this.titles_||e.FieldColour.TITLES,s=this.getValue(),u=document.createElement("table");u.className="blocklyColourTable",u.tabIndex=0,u.dir="ltr",e.utils.aria.setRole(u,e.utils.aria.Role.GRID),e.utils.aria.setState(u,e.utils.aria.State.EXPANDED,!0),e.utils.aria.setState(u,e.utils.aria.State.ROWCOUNT,Math.floor(n.length/t)),e.utils.aria.setState(u,e.utils.aria.State.COLCOUNT,t);for(var b,x=0;x<n.length;x++){x%t==0&&(b=document.createElement("tr"),e.utils.aria.setRole(b,e.utils.aria.Role.ROW),u.appendChild(b));var B=document.createElement("td");b.appendChild(B),B.label=n[x],B.title=r[x]||n[x],B.id=e.utils.IdGenerator.getNextUniqueId(),B.setAttribute("data-index",x),e.utils.aria.setRole(B,e.utils.aria.Role.GRIDCELL),e.utils.aria.setState(B,e.utils.aria.State.LABEL,n[x]),e.utils.aria.setState(B,e.utils.aria.State.SELECTED,n[x]==s),B.style.backgroundColor=n[x],n[x]==s&&(B.className="blocklyColourSelected",this.highlightedIndex_=x)}this.onClickWrapper_=e.browserEvents.conditionalBind(u,"click",this,this.onClick_,!0),this.onMouseMoveWrapper_=e.browserEvents.conditionalBind(u,"mousemove",this,this.onMouseMove_,!0),this.onMouseEnterWrapper_=e.browserEvents.conditionalBind(u,"mouseenter",this,this.onMouseEnter_,!0),this.onMouseLeaveWrapper_=e.browserEvents.conditionalBind(u,"mouseleave",this,this.onMouseLeave_,!0),this.onKeyDownWrapper_=e.browserEvents.conditionalBind(u,"keydown",this,this.onKeyDown_),this.picker_=u},e.FieldColour.prototype.dropdownDispose_=function(){this.onClickWrapper_&&(e.browserEvents.unbind(this.onClickWrapper_),this.onClickWrapper_=null),this.onMouseMoveWrapper_&&(e.browserEvents.unbind(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null),this.onMouseEnterWrapper_&&(e.browserEvents.unbind(this.onMouseEnterWrapper_),this.onMouseEnterWrapper_=null),this.onMouseLeaveWrapper_&&(e.browserEvents.unbind(this.onMouseLeaveWrapper_),this.onMouseLeaveWrapper_=null),this.onKeyDownWrapper_&&(e.browserEvents.unbind(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.highlightedIndex_=this.picker_=null},e.Css.register([".blocklyColourTable {","border-collapse: collapse;","display: block;","outline: none;","padding: 1px;","}",".blocklyColourTable>tr>td {","border: .5px solid #888;","box-sizing: border-box;","cursor: pointer;","display: inline-block;","height: 20px;","padding: 0;","width: 20px;","}",".blocklyColourTable>tr>td.blocklyColourHighlighted {","border-color: #eee;","box-shadow: 2px 2px 7px 2px rgba(0,0,0,.3);","position: relative;","}",".blocklyColourSelected, .blocklyColourSelected:hover {","border-color: #eee !important;","outline: 1px solid #333;","position: relative;","}"]),e.fieldRegistry.register("field_colour",e.FieldColour),e.FieldDropdown=function(t,n,r){"function"!=typeof t&&e.FieldDropdown.validateOptions_(t),this.menuGenerator_=t,this.suffixField=this.prefixField=this.generatedOptions_=null,this.trimOptions_(),this.selectedOption_=this.getOptions(!1)[0],e.FieldDropdown.superClass_.constructor.call(this,this.selectedOption_[1],n,r),this.svgArrow_=this.arrow_=this.imageElement_=this.menu_=this.selectedMenuItem_=null},e.utils.object.inherits(e.FieldDropdown,e.Field),e.FieldDropdown.fromJson=function(t){return new e.FieldDropdown(t.options,void 0,t)},e.FieldDropdown.prototype.fromXml=function(t){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(t.textContent)},e.FieldDropdown.prototype.SERIALIZABLE=!0,e.FieldDropdown.CHECKMARK_OVERHANG=25,e.FieldDropdown.MAX_MENU_HEIGHT_VH=.45,e.FieldDropdown.IMAGE_Y_OFFSET=5,e.FieldDropdown.IMAGE_Y_PADDING=2*e.FieldDropdown.IMAGE_Y_OFFSET,e.FieldDropdown.ARROW_CHAR=e.utils.userAgent.ANDROID?"\u25bc":"\u25be",e.FieldDropdown.prototype.CURSOR="default",e.FieldDropdown.prototype.initView=function(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement_=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&e.utils.dom.addClass(this.borderRect_,"blocklyDropdownRect")},e.FieldDropdown.prototype.shouldAddBorderRect_=function(){return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!this.sourceBlock_.isShadow()},e.FieldDropdown.prototype.createTextArrow_=function(){this.arrow_=e.utils.dom.createSvgElement(e.utils.Svg.TSPAN,{},this.textElement_),this.arrow_.appendChild(document.createTextNode(this.sourceBlock_.RTL?e.FieldDropdown.ARROW_CHAR+" ":" "+e.FieldDropdown.ARROW_CHAR)),this.sourceBlock_.RTL?this.textElement_.insertBefore(this.arrow_,this.textContent_):this.textElement_.appendChild(this.arrow_)},e.FieldDropdown.prototype.createSVGArrow_=function(){this.svgArrow_=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)},e.FieldDropdown.prototype.showEditor_=function(t){if(this.dropdownCreate_(),this.menu_.openingCoords=t&&"number"==typeof t.clientX?new e.utils.Coordinate(t.clientX,t.clientY):null,this.menu_.render(e.DropDownDiv.getContentDiv()),t=this.menu_.getElement(),e.utils.dom.addClass(t,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV){t=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().getColour():this.sourceBlock_.getColour();var n=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;e.DropDownDiv.setColour(t,n)}e.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem_&&this.menu_.setHighlighted(this.selectedMenuItem_),this.applyColour()},e.FieldDropdown.prototype.dropdownCreate_=function(){var t=new e.Menu;t.setRole(e.utils.aria.Role.LISTBOX),this.menu_=t;var n=this.getOptions(!1);this.selectedMenuItem_=null;for(var r=0;r<n.length;r++){var s=n[r][0],u=n[r][1];if("object"==typeof s){var b=new Image(s.width,s.height);b.src=s.src,b.alt=s.alt||"",s=b}(s=new e.MenuItem(s,u)).setRole(e.utils.aria.Role.OPTION),s.setRightToLeft(this.sourceBlock_.RTL),s.setCheckable(!0),t.addChild(s),s.setChecked(u==this.value_),u==this.value_&&(this.selectedMenuItem_=s),s.onAction(this.handleMenuActionEvent_,this)}},e.FieldDropdown.prototype.dropdownDispose_=function(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem_=this.menu_=null,this.applyColour()},e.FieldDropdown.prototype.handleMenuActionEvent_=function(t){e.DropDownDiv.hideIfOwner(this,!0),this.onItemSelected_(this.menu_,t)},e.FieldDropdown.prototype.onItemSelected_=function(t,n){this.setValue(n.getValue())},e.FieldDropdown.prototype.trimOptions_=function(){var t=this.menuGenerator_;if(Array.isArray(t)){for(var n=!1,r=0;r<t.length;r++){var s=t[r][0];"string"==typeof s?t[r][0]=e.utils.replaceMessageReferences(s):(null!=s.alt&&(t[r][0].alt=e.utils.replaceMessageReferences(s.alt)),n=!0)}if(!(n||2>t.length)){for(n=[],r=0;r<t.length;r++)n.push(t[r][0]);r=e.utils.string.shortestStringLength(n),s=e.utils.string.commonWordPrefix(n,r);var u=e.utils.string.commonWordSuffix(n,r);!s&&!u||r<=s+u||(s&&(this.prefixField=n[0].substring(0,s-1)),u&&(this.suffixField=n[0].substr(1-u)),this.menuGenerator_=e.FieldDropdown.applyTrim_(t,s,u))}}},e.FieldDropdown.applyTrim_=function(t,n,r){for(var s=[],u=0;u<t.length;u++){var b=t[u][0],x=t[u][1];b=b.substring(n,b.length-r),s[u]=[b,x]}return s},e.FieldDropdown.prototype.isOptionListDynamic=function(){return"function"==typeof this.menuGenerator_},e.FieldDropdown.prototype.getOptions=function(t){return this.isOptionListDynamic()?(this.generatedOptions_&&t||(this.generatedOptions_=this.menuGenerator_.call(this),e.FieldDropdown.validateOptions_(this.generatedOptions_)),this.generatedOptions_):this.menuGenerator_},e.FieldDropdown.prototype.doClassValidation_=function(t){for(var u,n=!1,r=this.getOptions(!0),s=0;u=r[s];s++)if(u[1]==t){n=!0;break}return n?t:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+t),null)},e.FieldDropdown.prototype.doValueUpdate_=function(t){e.FieldDropdown.superClass_.doValueUpdate_.call(this,t),t=this.getOptions(!0);for(var r,n=0;r=t[n];n++)r[1]==this.value_&&(this.selectedOption_=r)},e.FieldDropdown.prototype.applyColour=function(){this.borderRect_&&(this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary),this.borderRect_.setAttribute("fill",this.menu_?this.sourceBlock_.style.colourTertiary:"transparent")),this.sourceBlock_&&this.arrow_&&(this.arrow_.style.fill=this.sourceBlock_.isShadow()?this.sourceBlock_.style.colourSecondary:this.sourceBlock_.style.colourPrimary)},e.FieldDropdown.prototype.render_=function(){this.textContent_.nodeValue="",this.imageElement_.style.display="none";var t=this.selectedOption_&&this.selectedOption_[0];t&&"object"==typeof t?this.renderSelectedImage_(t):this.renderSelectedText_(),this.positionBorderRect_()},e.FieldDropdown.prototype.renderSelectedImage_=function(t){this.imageElement_.style.display="",this.imageElement_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",t.src),this.imageElement_.setAttribute("height",t.height),this.imageElement_.setAttribute("width",t.width);var n=Number(t.height);t=Number(t.width);var r=!!this.borderRect_,s=Math.max(r?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,n+e.FieldDropdown.IMAGE_Y_PADDING);r=r?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var u=this.svgArrow_?this.positionSVGArrow_(t+r,s/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):e.utils.dom.getFastTextWidth(this.arrow_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);this.size_.width=t+u+2*r,this.size_.height=s;var b=0;this.sourceBlock_.RTL?this.imageElement_.setAttribute("x",r+u):(b=t+u,this.textElement_.setAttribute("text-anchor","end"),this.imageElement_.setAttribute("x",r)),this.imageElement_.setAttribute("y",s/2-n/2),this.positionTextElement_(b+r,t+u)},e.FieldDropdown.prototype.renderSelectedText_=function(){this.textContent_.nodeValue=this.getDisplayText_(),e.utils.dom.addClass(this.textElement_,"blocklyDropdownText"),this.textElement_.setAttribute("text-anchor","start");var t=!!this.borderRect_,n=Math.max(t?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT),r=e.utils.dom.getFastTextWidth(this.textElement_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);t=t?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var s=0;this.svgArrow_&&(s=this.positionSVGArrow_(r+t,n/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=r+s+2*t,this.size_.height=n,this.positionTextElement_(t,r)},e.FieldDropdown.prototype.positionSVGArrow_=function(t,n){if(!this.svgArrow_)return 0;var r=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,s=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,u=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow_.setAttribute("transform","translate("+(this.sourceBlock_.RTL?r:t+s)+","+n+")"),u+s},e.FieldDropdown.prototype.getText_=function(){if(!this.selectedOption_)return null;var t=this.selectedOption_[0];return"object"==typeof t?t.alt:t},e.FieldDropdown.validateOptions_=function(t){if(!Array.isArray(t))throw TypeError("FieldDropdown options must be an array.");if(!t.length)throw TypeError("FieldDropdown options must not be an empty array.");for(var n=!1,r=0;r<t.length;++r){var s=t[r];Array.isArray(s)?"string"!=typeof s[1]?(n=!0,console.error("Invalid option["+r+"]: Each FieldDropdown option id must be a string. Found "+s[1]+" in: ",s)):s[0]&&"string"!=typeof s[0]&&"string"!=typeof s[0].src&&(n=!0,console.error("Invalid option["+r+"]: Each FieldDropdown option must have a string label or image description. Found"+s[0]+" in: ",s)):(n=!0,console.error("Invalid option["+r+"]: Each FieldDropdown option must be an array. Found: ",s))}if(n)throw TypeError("Found invalid FieldDropdown options.")},e.fieldRegistry.register("field_dropdown",e.FieldDropdown),e.FieldLabelSerializable=function(t,n,r){e.FieldLabelSerializable.superClass_.constructor.call(this,t,n,r)},e.utils.object.inherits(e.FieldLabelSerializable,e.FieldLabel),e.FieldLabelSerializable.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.text);return new e.FieldLabelSerializable(n,void 0,t)},e.FieldLabelSerializable.prototype.EDITABLE=!1,e.FieldLabelSerializable.prototype.SERIALIZABLE=!0,e.fieldRegistry.register("field_label_serializable",e.FieldLabelSerializable),e.FieldImage=function(t,n,r,s,u,b,x){if(!t)throw Error("Src value of an image field is required");if(t=e.utils.replaceMessageReferences(t),r=Number(e.utils.replaceMessageReferences(r)),n=Number(e.utils.replaceMessageReferences(n)),isNaN(r)||isNaN(n))throw Error("Height and width values of an image field must cast to numbers.");if(0>=r||0>=n)throw Error("Height and width values of an image field must be greater than 0.");this.flipRtl_=!1,this.altText_="",e.FieldImage.superClass_.constructor.call(this,t,null,x),x||(this.flipRtl_=!!b,this.altText_=e.utils.replaceMessageReferences(s)||""),this.size_=new e.utils.Size(n,r+e.FieldImage.Y_PADDING),this.imageHeight_=r,this.clickHandler_=null,"function"==typeof u&&(this.clickHandler_=u),this.imageElement_=null},e.utils.object.inherits(e.FieldImage,e.Field),e.FieldImage.prototype.DEFAULT_VALUE="",e.FieldImage.fromJson=function(t){return new e.FieldImage(t.src,t.width,t.height,void 0,void 0,void 0,t)},e.FieldImage.Y_PADDING=1,e.FieldImage.prototype.EDITABLE=!1,e.FieldImage.prototype.isDirty_=!1,e.FieldImage.prototype.configure_=function(t){e.FieldImage.superClass_.configure_.call(this,t),this.flipRtl_=!!t.flipRtl,this.altText_=e.utils.replaceMessageReferences(t.alt)||""},e.FieldImage.prototype.initView=function(){this.imageElement_=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{height:this.imageHeight_+"px",width:this.size_.width+"px",alt:this.altText_},this.fieldGroup_),this.imageElement_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.value_),this.clickHandler_&&(this.imageElement_.style.cursor="pointer")},e.FieldImage.prototype.updateSize_=function(){},e.FieldImage.prototype.doClassValidation_=function(t){return"string"!=typeof t?null:t},e.FieldImage.prototype.doValueUpdate_=function(t){this.value_=t,this.imageElement_&&this.imageElement_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",String(this.value_))},e.FieldImage.prototype.getFlipRtl=function(){return this.flipRtl_},e.FieldImage.prototype.setAlt=function(t){t!=this.altText_&&(this.altText_=t||"",this.imageElement_&&this.imageElement_.setAttribute("alt",this.altText_))},e.FieldImage.prototype.showEditor_=function(){this.clickHandler_&&this.clickHandler_(this)},e.FieldImage.prototype.setOnClickHandler=function(t){this.clickHandler_=t},e.FieldImage.prototype.getText_=function(){return this.altText_},e.fieldRegistry.register("field_image",e.FieldImage),e.FieldMultilineInput=function(t,n,r){e.FieldMultilineInput.superClass_.constructor.call(this,t,n,r),this.textGroup_=null,this.maxLines_=1/0,this.isOverflowedY_=!1},e.utils.object.inherits(e.FieldMultilineInput,e.FieldTextInput),e.FieldMultilineInput.prototype.configure_=function(t){e.FieldMultilineInput.superClass_.configure_.call(this,t),t.maxLines&&this.setMaxLines(t.maxLines)},e.FieldMultilineInput.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.text);return new e.FieldMultilineInput(n,void 0,t)},e.FieldMultilineInput.prototype.toXml=function(t){return t.textContent=this.getValue().replace(/\n/g,"&#10;"),t},e.FieldMultilineInput.prototype.fromXml=function(t){this.setValue(t.textContent.replace(/&#10;/g,"\n"))},e.FieldMultilineInput.prototype.initView=function(){this.createBorderRect_(),this.textGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyEditableText"},this.fieldGroup_)},e.FieldMultilineInput.prototype.getDisplayText_=function(){var t=this.getText();if(!t)return e.Field.NBSP;var n=t.split("\n");t="";for(var r=this.isOverflowedY_?this.maxLines_:n.length,s=0;s<r;s++){var u=n[s];u.length>this.maxDisplayLength?u=u.substring(0,this.maxDisplayLength-4)+"...":this.isOverflowedY_&&s===r-1&&(u=u.substring(0,u.length-3)+"..."),t+=u=u.replace(/\s/g,e.Field.NBSP),s!==r-1&&(t+="\n")}return this.sourceBlock_.RTL&&(t+="\u200f"),t},e.FieldMultilineInput.prototype.doValueUpdate_=function(t){e.FieldMultilineInput.superClass_.doValueUpdate_.call(this,t),this.isOverflowedY_=this.value_.split("\n").length>this.maxLines_},e.FieldMultilineInput.prototype.render_=function(){for(var t;t=this.textGroup_.firstChild;)this.textGroup_.removeChild(t);t=this.getDisplayText_().split("\n");for(var n=0,r=0;r<t.length;r++){var s=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING;e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:"blocklyText blocklyMultilineText",x:this.getConstants().FIELD_BORDER_RECT_X_PADDING,y:n+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,dy:this.getConstants().FIELD_TEXT_BASELINE},this.textGroup_).appendChild(document.createTextNode(t[r])),n+=s}this.isBeingEdited_&&(t=this.htmlInput_,this.isOverflowedY_?e.utils.dom.addClass(t,"blocklyHtmlTextAreaInputOverflowedY"):e.utils.dom.removeClass(t,"blocklyHtmlTextAreaInputOverflowedY")),this.updateSize_(),this.isBeingEdited_&&(this.sourceBlock_.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),t=this.htmlInput_,this.isTextValid_?(e.utils.dom.removeClass(t,"blocklyInvalidInput"),e.utils.aria.setState(t,e.utils.aria.State.INVALID,!1)):(e.utils.dom.addClass(t,"blocklyInvalidInput"),e.utils.aria.setState(t,e.utils.aria.State.INVALID,!0)))},e.FieldMultilineInput.prototype.updateSize_=function(){for(var t=this.textGroup_.childNodes,n=0,r=0,s=0;s<t.length;s++){var u=e.utils.dom.getTextWidth(t[s]);u>n&&(n=u),r+=this.getConstants().FIELD_TEXT_HEIGHT+(0<s?this.getConstants().FIELD_BORDER_RECT_Y_PADDING:0)}if(this.isBeingEdited_){t=this.value_.split("\n"),u=e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:"blocklyText blocklyMultilineText"});var b=this.getConstants().FIELD_TEXT_FONTSIZE,x=this.getConstants().FIELD_TEXT_FONTWEIGHT,B=this.getConstants().FIELD_TEXT_FONTFAMILY;for(s=0;s<t.length;s++){t[s].length>this.maxDisplayLength&&(t[s]=t[s].substring(0,this.maxDisplayLength)),u.textContent=t[s];var Z=e.utils.dom.getFastTextWidth(u,b,x,B);Z>n&&(n=Z)}n+=this.htmlInput_.offsetWidth-this.htmlInput_.clientWidth}this.borderRect_&&(r+=2*this.getConstants().FIELD_BORDER_RECT_Y_PADDING,n+=2*this.getConstants().FIELD_BORDER_RECT_X_PADDING,this.borderRect_.setAttribute("width",n),this.borderRect_.setAttribute("height",r)),this.size_.width=n,this.size_.height=r,this.positionBorderRect_()},e.FieldMultilineInput.prototype.showEditor_=function(t,n){e.FieldMultilineInput.superClass_.showEditor_.call(this,t,n),this.forceRerender()},e.FieldMultilineInput.prototype.widgetCreate_=function(){var t=e.WidgetDiv.DIV,n=this.workspace_.getScale(),r=document.createElement("textarea");r.className="blocklyHtmlInput blocklyHtmlTextAreaInput",r.setAttribute("spellcheck",this.spellcheck_);var s=this.getConstants().FIELD_TEXT_FONTSIZE*n+"pt";t.style.fontSize=s,r.style.fontSize=s,r.style.borderRadius=e.FieldTextInput.BORDERRADIUS*n+"px",s=this.getConstants().FIELD_BORDER_RECT_X_PADDING*n;var u=this.getConstants().FIELD_BORDER_RECT_Y_PADDING*n/2;return r.style.padding=u+"px "+s+"px "+u+"px "+s+"px",s=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,r.style.lineHeight=s*n+"px",t.appendChild(r),r.value=r.defaultValue=this.getEditorText_(this.value_),r.untypedDefaultValue_=this.value_,r.oldValue_=null,e.utils.userAgent.GECKO?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.bindInputEvents_(r),r},e.FieldMultilineInput.prototype.setMaxLines=function(t){"number"==typeof t&&0<t&&t!==this.maxLines_&&(this.maxLines_=t,this.forceRerender())},e.FieldMultilineInput.prototype.getMaxLines=function(){return this.maxLines_},e.FieldMultilineInput.prototype.onHtmlInputKeyDown_=function(t){t.keyCode!==e.utils.KeyCodes.ENTER&&e.FieldMultilineInput.superClass_.onHtmlInputKeyDown_.call(this,t)},e.Css.register(".blocklyHtmlTextAreaInput {,font-family: monospace;,resize: none;,overflow: hidden;,height: 100%;,text-align: left;,},.blocklyHtmlTextAreaInputOverflowedY {,overflow-y: scroll;,}".split(",")),e.fieldRegistry.register("field_multilinetext",e.FieldMultilineInput),e.FieldNumber=function(t,n,r,s,u,b){this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces_=null,e.FieldNumber.superClass_.constructor.call(this,t,u,b),b||this.setConstraints(n,r,s)},e.utils.object.inherits(e.FieldNumber,e.FieldTextInput),e.FieldNumber.prototype.DEFAULT_VALUE=0,e.FieldNumber.fromJson=function(t){return new e.FieldNumber(t.value,void 0,void 0,void 0,void 0,t)},e.FieldNumber.prototype.SERIALIZABLE=!0,e.FieldNumber.prototype.configure_=function(t){e.FieldNumber.superClass_.configure_.call(this,t),this.setMinInternal_(t.min),this.setMaxInternal_(t.max),this.setPrecisionInternal_(t.precision)},e.FieldNumber.prototype.setConstraints=function(t,n,r){this.setMinInternal_(t),this.setMaxInternal_(n),this.setPrecisionInternal_(r),this.setValue(this.getValue())},e.FieldNumber.prototype.setMin=function(t){this.setMinInternal_(t),this.setValue(this.getValue())},e.FieldNumber.prototype.setMinInternal_=function(t){null==t?this.min_=-1/0:(t=Number(t),isNaN(t)||(this.min_=t))},e.FieldNumber.prototype.getMin=function(){return this.min_},e.FieldNumber.prototype.setMax=function(t){this.setMaxInternal_(t),this.setValue(this.getValue())},e.FieldNumber.prototype.setMaxInternal_=function(t){null==t?this.max_=1/0:(t=Number(t),isNaN(t)||(this.max_=t))},e.FieldNumber.prototype.getMax=function(){return this.max_},e.FieldNumber.prototype.setPrecision=function(t){this.setPrecisionInternal_(t),this.setValue(this.getValue())},e.FieldNumber.prototype.setPrecisionInternal_=function(t){this.precision_=Number(t)||0;var n=String(this.precision_);-1!=n.indexOf("e")&&(n=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));var r=n.indexOf(".");this.decimalPlaces_=-1==r?t?0:null:n.length-r-1},e.FieldNumber.prototype.getPrecision=function(){return this.precision_},e.FieldNumber.prototype.doClassValidation_=function(t){return null===t||(t=(t=(t=(t=String(t)).replace(/O/gi,"0")).replace(/,/g,"")).replace(/infinity/i,"Infinity"),t=Number(t||0),isNaN(t))?null:(t=Math.min(Math.max(t,this.min_),this.max_),this.precision_&&isFinite(t)&&(t=Math.round(t/this.precision_)*this.precision_),null!=this.decimalPlaces_&&(t=Number(t.toFixed(this.decimalPlaces_))),t)},e.FieldNumber.prototype.widgetCreate_=function(){var t=e.FieldNumber.superClass_.widgetCreate_.call(this);return-1/0<this.min_&&e.utils.aria.setState(t,e.utils.aria.State.VALUEMIN,this.min_),1/0>this.max_&&e.utils.aria.setState(t,e.utils.aria.State.VALUEMAX,this.max_),t},e.fieldRegistry.register("field_number",e.FieldNumber),e.FieldVariable=function(t,n,r,s,u){this.menuGenerator_=e.FieldVariable.dropdownCreate,this.defaultVariableName="string"==typeof t?t:"",this.size_=new e.utils.Size(0,0),u&&this.configure_(u),n&&this.setValidator(n),u||this.setTypes_(r,s)},e.utils.object.inherits(e.FieldVariable,e.FieldDropdown),e.FieldVariable.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.variable);return new e.FieldVariable(n,void 0,void 0,void 0,t)},e.FieldVariable.prototype.SERIALIZABLE=!0,e.FieldVariable.prototype.configure_=function(t){e.FieldVariable.superClass_.configure_.call(this,t),this.setTypes_(t.variableTypes,t.defaultType)},e.FieldVariable.prototype.initModel=function(){if(!this.variable_){var t=e.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,null,this.defaultVariableName,this.defaultType_);this.doValueUpdate_(t.getId())}},e.FieldVariable.prototype.shouldAddBorderRect_=function(){return e.FieldVariable.superClass_.shouldAddBorderRect_.call(this)&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||"variables_get"!=this.sourceBlock_.type)},e.FieldVariable.prototype.fromXml=function(t){var n=t.getAttribute("id"),r=t.textContent,s=t.getAttribute("variabletype")||t.getAttribute("variableType")||"";if(n=e.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,n,r,s),null!=s&&s!==n.type)throw Error("Serialized variable type with id '"+n.getId()+"' had type "+n.type+", and does not match variable field that references it: "+e.Xml.domToText(t)+".");this.setValue(n.getId())},e.FieldVariable.prototype.toXml=function(t){return this.initModel(),t.id=this.variable_.getId(),t.textContent=this.variable_.name,this.variable_.type&&t.setAttribute("variabletype",this.variable_.type),t},e.FieldVariable.prototype.setSourceBlock=function(t){if(t.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");e.FieldVariable.superClass_.setSourceBlock.call(this,t)},e.FieldVariable.prototype.getValue=function(){return this.variable_?this.variable_.getId():null},e.FieldVariable.prototype.getText=function(){return this.variable_?this.variable_.name:""},e.FieldVariable.prototype.getVariable=function(){return this.variable_},e.FieldVariable.prototype.getValidator=function(){return this.variable_?this.validator_:null},e.FieldVariable.prototype.doClassValidation_=function(t){if(null===t)return null;var n=e.Variables.getVariable(this.sourceBlock_.workspace,t);return n?this.typeIsAllowed_(n=n.type)?t:(console.warn("Variable type doesn't match this field!  Type was "+n),null):(console.warn("Variable id doesn't point to a real variable! ID was "+t),null)},e.FieldVariable.prototype.doValueUpdate_=function(t){this.variable_=e.Variables.getVariable(this.sourceBlock_.workspace,t),e.FieldVariable.superClass_.doValueUpdate_.call(this,t)},e.FieldVariable.prototype.typeIsAllowed_=function(t){var n=this.getVariableTypes_();if(!n)return!0;for(var r=0;r<n.length;r++)if(t==n[r])return!0;return!1},e.FieldVariable.prototype.getVariableTypes_=function(){var t=this.variableTypes;if(null===t&&this.sourceBlock_&&this.sourceBlock_.workspace)return this.sourceBlock_.workspace.getVariableTypes();if(0==(t=t||[""]).length)throw t=this.getText(),Error("'variableTypes' of field variable "+t+" was an empty list");return t},e.FieldVariable.prototype.setTypes_=function(t,n){if(n=n||"",null==t||null==t)t=null;else{if(!Array.isArray(t))throw Error("'variableTypes' was not an array in the definition of a FieldVariable");for(var r=!1,s=0;s<t.length;s++)t[s]==n&&(r=!0);if(!r)throw Error("Invalid default type '"+n+"' in the definition of a FieldVariable")}this.defaultType_=n,this.variableTypes=t},e.FieldVariable.prototype.refreshVariableName=function(){this.forceRerender()},e.FieldVariable.dropdownCreate=function(){if(!this.variable_)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");var t=this.getText(),n=[];if(this.sourceBlock_&&this.sourceBlock_.workspace)for(var r=this.getVariableTypes_(),s=0;s<r.length;s++){var u=this.sourceBlock_.workspace.getVariablesOfType(r[s]);n=n.concat(u)}for(n.sort(e.VariableModel.compareByName),r=[],s=0;s<n.length;s++)r[s]=[n[s].name,n[s].getId()];return r.push([e.Msg.RENAME_VARIABLE,e.RENAME_VARIABLE_ID]),e.Msg.DELETE_VARIABLE&&r.push([e.Msg.DELETE_VARIABLE.replace("%1",t),e.DELETE_VARIABLE_ID]),r},e.FieldVariable.prototype.onItemSelected_=function(t,n){if(t=n.getValue(),this.sourceBlock_&&this.sourceBlock_.workspace){if(t==e.RENAME_VARIABLE_ID)return void e.Variables.renameVariable(this.sourceBlock_.workspace,this.variable_);if(t==e.DELETE_VARIABLE_ID)return void this.sourceBlock_.workspace.deleteVariableById(this.variable_.getId())}this.setValue(t)},e.FieldVariable.prototype.referencesVariables=function(){return!0},e.fieldRegistry.register("field_variable",e.FieldVariable),e.utils.svgPaths={},e.utils.svgPaths.point=function(t,n){return" "+t+","+n+" "},e.utils.svgPaths.curve=function(t,n){return" "+t+n.join("")},e.utils.svgPaths.moveTo=function(t,n){return" M "+t+","+n+" "},e.utils.svgPaths.moveBy=function(t,n){return" m "+t+","+n+" "},e.utils.svgPaths.lineTo=function(t,n){return" l "+t+","+n+" "},e.utils.svgPaths.line=function(t){return" l"+t.join("")},e.utils.svgPaths.lineOnAxis=function(t,n){return" "+t+" "+n+" "},e.utils.svgPaths.arc=function(t,n,r,s){return t+" "+r+" "+r+" "+n+s},e.blockRendering.ConstantProvider=function(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.CORNER_RADIUS=8,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=e.utils.svgPaths.moveBy(0,0),this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_TEXT_BASELINE_CENTER=!e.utils.userAgent.IE&&!e.utils.userAgent.EDGE,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2),this.embossFilterId="",this.embossFilter_=null,this.disabledPatternId="",this.disabledPattern_=null,this.debugFilterId="",this.cssNode_=this.debugFilter_=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2}},e.blockRendering.ConstantProvider.prototype.init=function(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()},e.blockRendering.ConstantProvider.prototype.setTheme=function(t){this.blockStyles=Object.create(null);var r,n=t.blockStyles;for(r in n)this.blockStyles[r]=this.validatedBlockStyle_(n[r]);this.setDynamicProperties_(t)},e.blockRendering.ConstantProvider.prototype.setDynamicProperties_=function(t){this.setFontConstants_(t),this.setComponentConstants_(t),this.ADD_START_HATS=null!=t.startHats?t.startHats:this.ADD_START_HATS},e.blockRendering.ConstantProvider.prototype.setFontConstants_=function(t){this.FIELD_TEXT_FONTFAMILY=t.fontStyle&&null!=t.fontStyle.family?t.fontStyle.family:this.FIELD_TEXT_FONTFAMILY,this.FIELD_TEXT_FONTWEIGHT=t.fontStyle&&null!=t.fontStyle.weight?t.fontStyle.weight:this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTSIZE=t.fontStyle&&null!=t.fontStyle.size?t.fontStyle.size:this.FIELD_TEXT_FONTSIZE,t=e.utils.dom.measureFontMetrics("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=t.height,this.FIELD_TEXT_BASELINE=t.baseline},e.blockRendering.ConstantProvider.prototype.setComponentConstants_=function(t){this.CURSOR_COLOUR=t.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=t.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=t.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(t.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY},e.blockRendering.ConstantProvider.prototype.getBlockStyleForColour=function(t){var n="auto_"+t;return this.blockStyles[n]||(this.blockStyles[n]=this.createBlockStyle_(t)),{style:this.blockStyles[n],name:n}},e.blockRendering.ConstantProvider.prototype.getBlockStyle=function(t){return this.blockStyles[t||""]||(t&&0==t.indexOf("auto_")?this.getBlockStyleForColour(t.substring(5)).style:this.createBlockStyle_("#000000"))},e.blockRendering.ConstantProvider.prototype.createBlockStyle_=function(t){return this.validatedBlockStyle_({colourPrimary:t})},e.blockRendering.ConstantProvider.prototype.validatedBlockStyle_=function(t){var n={};return t&&e.utils.object.mixin(n,t),t=e.utils.parseBlockColour(n.colourPrimary||"#000"),n.colourPrimary=t.hex,n.colourSecondary=n.colourSecondary?e.utils.parseBlockColour(n.colourSecondary).hex:this.generateSecondaryColour_(n.colourPrimary),n.colourTertiary=n.colourTertiary?e.utils.parseBlockColour(n.colourTertiary).hex:this.generateTertiaryColour_(n.colourPrimary),n.hat=n.hat||"",n},e.blockRendering.ConstantProvider.prototype.generateSecondaryColour_=function(t){return e.utils.colour.blend("#fff",t,.6)||t},e.blockRendering.ConstantProvider.prototype.generateTertiaryColour_=function(t){return e.utils.colour.blend("#fff",t,.3)||t},e.blockRendering.ConstantProvider.prototype.dispose=function(){this.embossFilter_&&e.utils.dom.removeNode(this.embossFilter_),this.disabledPattern_&&e.utils.dom.removeNode(this.disabledPattern_),this.debugFilter_&&e.utils.dom.removeNode(this.debugFilter_),this.cssNode_=null},e.blockRendering.ConstantProvider.prototype.makeJaggedTeeth=function(){var t=this.JAGGED_TEETH_HEIGHT,n=this.JAGGED_TEETH_WIDTH;return{height:t,width:n,path:e.utils.svgPaths.line([e.utils.svgPaths.point(n,t/4),e.utils.svgPaths.point(2*-n,t/2),e.utils.svgPaths.point(n,t/4)])}},e.blockRendering.ConstantProvider.prototype.makeStartHat=function(){var t=this.START_HAT_HEIGHT,n=this.START_HAT_WIDTH;return{height:t,width:n,path:e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(30,-t),e.utils.svgPaths.point(70,-t),e.utils.svgPaths.point(n,0)])}},e.blockRendering.ConstantProvider.prototype.makePuzzleTab=function(){function t(b){var x=-(b=b?-1:1),B=r/2,Z=B+2.5,ot=B+.5,et=e.utils.svgPaths.point(-n,b*B);return B=e.utils.svgPaths.point(n,b*B),e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(0,b*Z),e.utils.svgPaths.point(-n,x*ot),et])+e.utils.svgPaths.curve("s",[e.utils.svgPaths.point(n,2.5*x),B])}var n=this.TAB_WIDTH,r=this.TAB_HEIGHT,s=t(!0),u=t(!1);return{type:this.SHAPES.PUZZLE,width:n,height:r,pathDown:u,pathUp:s}},e.blockRendering.ConstantProvider.prototype.makeNotch=function(){function t(x){return e.utils.svgPaths.line([e.utils.svgPaths.point(x*s,r),e.utils.svgPaths.point(3*x,0),e.utils.svgPaths.point(x*s,-r)])}var n=this.NOTCH_WIDTH,r=this.NOTCH_HEIGHT,s=(n-3)/2,u=t(1),b=t(-1);return{type:this.SHAPES.NOTCH,width:n,height:r,pathLeft:u,pathRight:b}},e.blockRendering.ConstantProvider.prototype.makeInsideCorners=function(){var t=this.CORNER_RADIUS;return{width:t,height:t,pathTop:e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(-t,t)),pathBottom:e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(t,t))}},e.blockRendering.ConstantProvider.prototype.makeOutsideCorners=function(){var t=this.CORNER_RADIUS,n=e.utils.svgPaths.moveBy(0,t)+e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(t,-t)),r=e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(t,t)),s=e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(-t,-t));return{topLeft:n,topRight:r,bottomRight:e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(-t,t)),bottomLeft:s,rightHeight:t}},e.blockRendering.ConstantProvider.prototype.shapeFor=function(t){switch(t.type){case e.connectionTypes.INPUT_VALUE:case e.connectionTypes.OUTPUT_VALUE:return this.PUZZLE_TAB;case e.connectionTypes.PREVIOUS_STATEMENT:case e.connectionTypes.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}},e.blockRendering.ConstantProvider.prototype.createDom=function(t,n,r){this.injectCSS_(n,r),t=e.utils.dom.createSvgElement(e.utils.Svg.DEFS,{},t),n=e.utils.dom.createSvgElement(e.utils.Svg.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},t),e.utils.dom.createSvgElement(e.utils.Svg.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},n),r=e.utils.dom.createSvgElement(e.utils.Svg.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},n),e.utils.dom.createSvgElement(e.utils.Svg.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},r),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},n),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},n),this.embossFilterId=n.id,this.embossFilter_=n,n=e.utils.dom.createSvgElement(e.utils.Svg.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},t),e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:10,height:10,fill:"#aaa"},n),e.utils.dom.createSvgElement(e.utils.Svg.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},n),this.disabledPatternId=n.id,this.disabledPattern_=n,e.blockRendering.Debug&&(t=e.utils.dom.createSvgElement(e.utils.Svg.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},t),n=e.utils.dom.createSvgElement(e.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},t),e.utils.dom.createSvgElement(e.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),e.utils.dom.createSvgElement(e.utils.Svg.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},t),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},t),this.debugFilterId=t.id,this.debugFilter_=t)},e.blockRendering.ConstantProvider.prototype.injectCSS_=function(t,n){n=this.getCSS_(n),t="blockly-renderer-style-"+t,this.cssNode_=document.getElementById(t);var r=n.join("\n");this.cssNode_?this.cssNode_.firstChild.textContent=r:((n=document.createElement("style")).id=t,t=document.createTextNode(r),n.appendChild(t),document.head.insertBefore(n,document.head.firstChild),this.cssNode_=n)},e.blockRendering.ConstantProvider.prototype.getCSS_=function(t){return[t+" .blocklyText, ",t+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",t+" .blocklyText {","fill: #fff;","}",t+" .blocklyNonEditableText>rect,",t+" .blocklyEditableText>rect {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","fill-opacity: .6;","stroke: none;","}",t+" .blocklyNonEditableText>text,",t+" .blocklyEditableText>text {","fill: #000;","}",t+" .blocklyFlyoutLabelText {","fill: #000;","}",t+" .blocklyText.blocklyBubbleText {","fill: #000;","}",t+" .blocklyEditableText:not(.editing):hover>rect {","stroke: #fff;","stroke-width: 2;","}",t+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","}",t+" .blocklySelected>.blocklyPath {","stroke: #fc3;","stroke-width: 3px;","}",t+" .blocklyHighlightedConnectionPath {","stroke: #fc3;","}",t+" .blocklyReplaceable .blocklyPath {","fill-opacity: .5;","}",t+" .blocklyReplaceable .blocklyPathLight,",t+" .blocklyReplaceable .blocklyPathDark {","display: none;","}",t+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]},e.blockRendering.Types={NONE:0,FIELD:1,HAT:2,ICON:4,SPACER:8,BETWEEN_ROW_SPACER:16,IN_ROW_SPACER:32,EXTERNAL_VALUE_INPUT:64,INPUT:128,INLINE_INPUT:256,STATEMENT_INPUT:512,CONNECTION:1024,PREVIOUS_CONNECTION:2048,NEXT_CONNECTION:4096,OUTPUT_CONNECTION:8192,CORNER:16384,LEFT_SQUARE_CORNER:32768,LEFT_ROUND_CORNER:65536,RIGHT_SQUARE_CORNER:131072,RIGHT_ROUND_CORNER:262144,JAGGED_EDGE:524288,ROW:1048576,TOP_ROW:2097152,BOTTOM_ROW:4194304,INPUT_ROW:8388608},e.blockRendering.Types.LEFT_CORNER=e.blockRendering.Types.LEFT_SQUARE_CORNER|e.blockRendering.Types.LEFT_ROUND_CORNER,e.blockRendering.Types.RIGHT_CORNER=e.blockRendering.Types.RIGHT_SQUARE_CORNER|e.blockRendering.Types.RIGHT_ROUND_CORNER,e.blockRendering.Types.nextTypeValue_=16777216,e.blockRendering.Types.getType=function(t){return Object.prototype.hasOwnProperty.call(e.blockRendering.Types,t)||(e.blockRendering.Types[t]=e.blockRendering.Types.nextTypeValue_,e.blockRendering.Types.nextTypeValue_<<=1),e.blockRendering.Types[t]},e.blockRendering.Types.isField=function(t){return t.type&e.blockRendering.Types.FIELD},e.blockRendering.Types.isHat=function(t){return t.type&e.blockRendering.Types.HAT},e.blockRendering.Types.isIcon=function(t){return t.type&e.blockRendering.Types.ICON},e.blockRendering.Types.isSpacer=function(t){return t.type&e.blockRendering.Types.SPACER},e.blockRendering.Types.isInRowSpacer=function(t){return t.type&e.blockRendering.Types.IN_ROW_SPACER},e.blockRendering.Types.isInput=function(t){return t.type&e.blockRendering.Types.INPUT},e.blockRendering.Types.isExternalInput=function(t){return t.type&e.blockRendering.Types.EXTERNAL_VALUE_INPUT},e.blockRendering.Types.isInlineInput=function(t){return t.type&e.blockRendering.Types.INLINE_INPUT},e.blockRendering.Types.isStatementInput=function(t){return t.type&e.blockRendering.Types.STATEMENT_INPUT},e.blockRendering.Types.isPreviousConnection=function(t){return t.type&e.blockRendering.Types.PREVIOUS_CONNECTION},e.blockRendering.Types.isNextConnection=function(t){return t.type&e.blockRendering.Types.NEXT_CONNECTION},e.blockRendering.Types.isPreviousOrNextConnection=function(t){return t.type&(e.blockRendering.Types.PREVIOUS_CONNECTION|e.blockRendering.Types.NEXT_CONNECTION)},e.blockRendering.Types.isLeftRoundedCorner=function(t){return t.type&e.blockRendering.Types.LEFT_ROUND_CORNER},e.blockRendering.Types.isRightRoundedCorner=function(t){return t.type&e.blockRendering.Types.RIGHT_ROUND_CORNER},e.blockRendering.Types.isLeftSquareCorner=function(t){return t.type&e.blockRendering.Types.LEFT_SQUARE_CORNER},e.blockRendering.Types.isRightSquareCorner=function(t){return t.type&e.blockRendering.Types.RIGHT_SQUARE_CORNER},e.blockRendering.Types.isCorner=function(t){return t.type&e.blockRendering.Types.CORNER},e.blockRendering.Types.isJaggedEdge=function(t){return t.type&e.blockRendering.Types.JAGGED_EDGE},e.blockRendering.Types.isRow=function(t){return t.type&e.blockRendering.Types.ROW},e.blockRendering.Types.isBetweenRowSpacer=function(t){return t.type&e.blockRendering.Types.BETWEEN_ROW_SPACER},e.blockRendering.Types.isTopRow=function(t){return t.type&e.blockRendering.Types.TOP_ROW},e.blockRendering.Types.isBottomRow=function(t){return t.type&e.blockRendering.Types.BOTTOM_ROW},e.blockRendering.Types.isTopOrBottomRow=function(t){return t.type&(e.blockRendering.Types.TOP_ROW|e.blockRendering.Types.BOTTOM_ROW)},e.blockRendering.Types.isInputRow=function(t){return t.type&e.blockRendering.Types.INPUT_ROW},e.blockRendering.Measurable=function(t){this.height=this.width=0,this.type=e.blockRendering.Types.NONE,this.centerline=this.xPos=0,this.constants_=t,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT},e.blockRendering.Connection=function(t,n){e.blockRendering.Connection.superClass_.constructor.call(this,t),this.connectionModel=n,this.shape=this.constants_.shapeFor(n),this.isDynamicShape=!!this.shape.isDynamic,this.type|=e.blockRendering.Types.CONNECTION},e.utils.object.inherits(e.blockRendering.Connection,e.blockRendering.Measurable),e.blockRendering.OutputConnection=function(t,n){e.blockRendering.OutputConnection.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=0},e.utils.object.inherits(e.blockRendering.OutputConnection,e.blockRendering.Connection),e.blockRendering.PreviousConnection=function(t,n){e.blockRendering.PreviousConnection.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},e.utils.object.inherits(e.blockRendering.PreviousConnection,e.blockRendering.Connection),e.blockRendering.NextConnection=function(t,n){e.blockRendering.NextConnection.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},e.utils.object.inherits(e.blockRendering.NextConnection,e.blockRendering.Connection),e.blockRendering.InputConnection=function(t,n){e.blockRendering.InputConnection.superClass_.constructor.call(this,t,n.connection),this.type|=e.blockRendering.Types.INPUT,this.input=n,this.align=n.align,(this.connectedBlock=n.connection&&n.connection.targetBlock()?n.connection.targetBlock():null)?(t=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=t.width,this.connectedBlockHeight=t.height):this.connectedBlockHeight=this.connectedBlockWidth=0,this.connectionOffsetY=this.connectionOffsetX=0},e.utils.object.inherits(e.blockRendering.InputConnection,e.blockRendering.Connection),e.blockRendering.InlineInput=function(t,n){e.blockRendering.InlineInput.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY=this.isDynamicShape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=this.isDynamicShape?this.shape.connectionOffsetX(this.connectionWidth):0},e.utils.object.inherits(e.blockRendering.InlineInput,e.blockRendering.InputConnection),e.blockRendering.StatementInput=function(t,n){e.blockRendering.StatementInput.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width},e.utils.object.inherits(e.blockRendering.StatementInput,e.blockRendering.InputConnection),e.blockRendering.ExternalValueInput=function(t,n){e.blockRendering.ExternalValueInput.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width},e.utils.object.inherits(e.blockRendering.ExternalValueInput,e.blockRendering.InputConnection),e.blockRendering.Icon=function(t,n){e.blockRendering.Icon.superClass_.constructor.call(this,t),this.icon=n,this.isVisible=n.isVisible(),this.type|=e.blockRendering.Types.ICON,t=n.getCorrectedSize(),this.height=t.height,this.width=t.width},e.utils.object.inherits(e.blockRendering.Icon,e.blockRendering.Measurable),e.blockRendering.JaggedEdge=function(t){e.blockRendering.JaggedEdge.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width},e.utils.object.inherits(e.blockRendering.JaggedEdge,e.blockRendering.Measurable),e.blockRendering.Field=function(t,n,r){e.blockRendering.Field.superClass_.constructor.call(this,t),this.field=n,this.isEditable=n.EDITABLE,this.flipRtl=n.getFlipRtl(),this.type|=e.blockRendering.Types.FIELD,t=this.field.getSize(),this.height=t.height,this.width=t.width,this.parentInput=r},e.utils.object.inherits(e.blockRendering.Field,e.blockRendering.Measurable),e.blockRendering.Hat=function(t){e.blockRendering.Hat.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height},e.utils.object.inherits(e.blockRendering.Hat,e.blockRendering.Measurable),e.blockRendering.SquareCorner=function(t,n){e.blockRendering.SquareCorner.superClass_.constructor.call(this,t),this.type=(n&&"left"!=n?e.blockRendering.Types.RIGHT_SQUARE_CORNER:e.blockRendering.Types.LEFT_SQUARE_CORNER)|e.blockRendering.Types.CORNER,this.width=this.height=this.constants_.NO_PADDING},e.utils.object.inherits(e.blockRendering.SquareCorner,e.blockRendering.Measurable),e.blockRendering.RoundCorner=function(t,n){e.blockRendering.RoundCorner.superClass_.constructor.call(this,t),this.type=(n&&"left"!=n?e.blockRendering.Types.RIGHT_ROUND_CORNER:e.blockRendering.Types.LEFT_ROUND_CORNER)|e.blockRendering.Types.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2},e.utils.object.inherits(e.blockRendering.RoundCorner,e.blockRendering.Measurable),e.blockRendering.InRowSpacer=function(t,n){e.blockRendering.InRowSpacer.superClass_.constructor.call(this,t),this.type=this.type|e.blockRendering.Types.SPACER|e.blockRendering.Types.IN_ROW_SPACER,this.width=n,this.height=this.constants_.SPACER_DEFAULT_HEIGHT},e.utils.object.inherits(e.blockRendering.InRowSpacer,e.blockRendering.Measurable),e.blockRendering.Row=function(t){this.type=e.blockRendering.Types.ROW,this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=this.hasStatement=this.hasExternalInput=!1,this.constants_=t,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT,this.align=null},e.blockRendering.Row.prototype.measure=function(){throw Error("Unexpected attempt to measure a base Row.")},e.blockRendering.Row.prototype.getLastInput=function(){for(var n,t=this.elements.length-1;n=this.elements[t];t--)if(e.blockRendering.Types.isInput(n))return n;return null},e.blockRendering.Row.prototype.startsWithElemSpacer=function(){return!0},e.blockRendering.Row.prototype.endsWithElemSpacer=function(){return!0},e.blockRendering.Row.prototype.getFirstSpacer=function(){for(var n,t=0;n=this.elements[t];t++)if(e.blockRendering.Types.isSpacer(n))return n;return null},e.blockRendering.Row.prototype.getLastSpacer=function(){for(var n,t=this.elements.length-1;n=this.elements[t];t--)if(e.blockRendering.Types.isSpacer(n))return n;return null},e.blockRendering.TopRow=function(t){e.blockRendering.TopRow.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.TOP_ROW,this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null},e.utils.object.inherits(e.blockRendering.TopRow,e.blockRendering.Row),e.blockRendering.TopRow.prototype.hasLeftSquareCorner=function(t){var n=(t.hat?"cap"===t.hat:this.constants_.ADD_START_HATS)&&!t.outputConnection&&!t.previousConnection,r=t.getPreviousBlock();return!!t.outputConnection||n||!!r&&r.getNextBlock()==t},e.blockRendering.TopRow.prototype.hasRightSquareCorner=function(t){return!0},e.blockRendering.TopRow.prototype.measure=function(){for(var u,t=0,n=0,r=0,s=0;u=this.elements[s];s++)n+=u.width,e.blockRendering.Types.isSpacer(u)||(e.blockRendering.Types.isHat(u)?r=Math.max(r,u.ascenderHeight):t=Math.max(t,u.height));this.width=Math.max(this.minWidth,n),this.height=Math.max(this.minHeight,t)+r,this.capline=this.ascenderHeight=r,this.widthWithConnectedBlocks=this.width},e.blockRendering.TopRow.prototype.startsWithElemSpacer=function(){return!1},e.blockRendering.TopRow.prototype.endsWithElemSpacer=function(){return!1},e.blockRendering.BottomRow=function(t){e.blockRendering.BottomRow.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.BOTTOM_ROW,this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0},e.utils.object.inherits(e.blockRendering.BottomRow,e.blockRendering.Row),e.blockRendering.BottomRow.prototype.hasLeftSquareCorner=function(t){return!!t.outputConnection||!!t.getNextBlock()},e.blockRendering.BottomRow.prototype.hasRightSquareCorner=function(t){return!0},e.blockRendering.BottomRow.prototype.measure=function(){for(var u,t=0,n=0,r=0,s=0;u=this.elements[s];s++)n+=u.width,e.blockRendering.Types.isSpacer(u)||(e.blockRendering.Types.isNextConnection(u)?r=Math.max(r,u.height):t=Math.max(t,u.height));this.width=Math.max(this.minWidth,n),this.height=Math.max(this.minHeight,t)+r,this.descenderHeight=r,this.widthWithConnectedBlocks=this.width},e.blockRendering.BottomRow.prototype.startsWithElemSpacer=function(){return!1},e.blockRendering.BottomRow.prototype.endsWithElemSpacer=function(){return!1},e.blockRendering.SpacerRow=function(t,n,r){e.blockRendering.SpacerRow.superClass_.constructor.call(this,t),this.type=this.type|e.blockRendering.Types.SPACER|e.blockRendering.Types.BETWEEN_ROW_SPACER,this.width=r,this.height=n,this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.elements=[new e.blockRendering.InRowSpacer(this.constants_,r)]},e.utils.object.inherits(e.blockRendering.SpacerRow,e.blockRendering.Row),e.blockRendering.SpacerRow.prototype.measure=function(){},e.blockRendering.InputRow=function(t){e.blockRendering.InputRow.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.INPUT_ROW,this.connectedBlockWidths=0},e.utils.object.inherits(e.blockRendering.InputRow,e.blockRendering.Row),e.blockRendering.InputRow.prototype.measure=function(){this.width=this.minWidth,this.height=this.minHeight;for(var r,t=0,n=0;r=this.elements[n];n++)this.width+=r.width,e.blockRendering.Types.isInput(r)&&(e.blockRendering.Types.isStatementInput(r)?t+=r.connectedBlockWidth:e.blockRendering.Types.isExternalInput(r)&&0!=r.connectedBlockWidth&&(t+=r.connectedBlockWidth-r.connectionWidth)),e.blockRendering.Types.isSpacer(r)||(this.height=Math.max(this.height,r.height));this.connectedBlockWidths=t,this.widthWithConnectedBlocks=this.width+t},e.blockRendering.InputRow.prototype.endsWithElemSpacer=function(){return!this.hasExternalInput&&!this.hasStatement},e.blockRendering.RenderInfo=function(t,n){this.block_=n,this.renderer_=t,this.constants_=this.renderer_.getConstants(),this.outputConnection=n.outputConnection?new e.blockRendering.OutputConnection(this.constants_,n.outputConnection):null,this.isInline=n.getInputsInline()&&!n.isCollapsed(),this.isCollapsed=n.isCollapsed(),this.isInsertionMarker=n.isInsertionMarker(),this.RTL=n.RTL,this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.hiddenIcons=[],this.topRow=new e.blockRendering.TopRow(this.constants_),this.bottomRow=new e.blockRendering.BottomRow(this.constants_),this.startY=this.startX=0},e.blockRendering.RenderInfo.prototype.getRenderer=function(){return this.renderer_},e.blockRendering.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},e.blockRendering.RenderInfo.prototype.createRows_=function(){this.populateTopRow_(),this.rows.push(this.topRow);var t=new e.blockRendering.InputRow(this.constants_);this.inputRows.push(t);for(var s,n=this.block_.getIcons(),r=0;s=n[r];r++){var u=new e.blockRendering.Icon(this.constants_,s);this.isCollapsed&&s.collapseHidden?this.hiddenIcons.push(u):t.elements.push(u)}for(s=null,r=0;n=this.block_.inputList[r];r++)if(n.isVisible()){for(this.shouldStartNewRow_(n,s)&&(this.rows.push(t),t=new e.blockRendering.InputRow(this.constants_),this.inputRows.push(t)),s=0;u=n.fieldRow[s];s++)t.elements.push(new e.blockRendering.Field(this.constants_,u,n));this.addInput_(n,t),s=n}this.isCollapsed&&(t.hasJaggedEdge=!0,t.elements.push(new e.blockRendering.JaggedEdge(this.constants_))),(t.elements.length||t.hasDummyInput)&&this.rows.push(t),this.populateBottomRow_(),this.rows.push(this.bottomRow)},e.blockRendering.RenderInfo.prototype.populateTopRow_=function(){var t=!!this.block_.previousConnection,n=(this.block_.hat?"cap"===this.block_.hat:this.constants_.ADD_START_HATS)&&!this.outputConnection&&!t,r=this.topRow.hasLeftSquareCorner(this.block_)?e.blockRendering.SquareCorner:e.blockRendering.RoundCorner;this.topRow.elements.push(new r(this.constants_)),n?(t=new e.blockRendering.Hat(this.constants_),this.topRow.elements.push(t),this.topRow.capline=t.ascenderHeight):t&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new e.blockRendering.PreviousConnection(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.topRow.minHeight=this.block_.inputList.length&&this.block_.inputList[0].type==e.inputTypes.STATEMENT&&!this.block_.isCollapsed()?this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.constants_.TOP_ROW_MIN_HEIGHT,r=this.topRow.hasRightSquareCorner(this.block_)?e.blockRendering.SquareCorner:e.blockRendering.RoundCorner,this.topRow.elements.push(new r(this.constants_,"right"))},e.blockRendering.RenderInfo.prototype.populateBottomRow_=function(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==e.inputTypes.STATEMENT?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new e.blockRendering.SquareCorner(this.constants_)):this.bottomRow.elements.push(new e.blockRendering.RoundCorner(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new e.blockRendering.NextConnection(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new e.blockRendering.SquareCorner(this.constants_,"right")):this.bottomRow.elements.push(new e.blockRendering.RoundCorner(this.constants_,"right"))},e.blockRendering.RenderInfo.prototype.addInput_=function(t,n){this.isInline&&t.type==e.inputTypes.VALUE?(n.elements.push(new e.blockRendering.InlineInput(this.constants_,t)),n.hasInlineInput=!0):t.type==e.inputTypes.STATEMENT?(n.elements.push(new e.blockRendering.StatementInput(this.constants_,t)),n.hasStatement=!0):t.type==e.inputTypes.VALUE?(n.elements.push(new e.blockRendering.ExternalValueInput(this.constants_,t)),n.hasExternalInput=!0):t.type==e.inputTypes.DUMMY&&(n.minHeight=Math.max(n.minHeight,t.getSourceBlock()&&t.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),n.hasDummyInput=!0),null==n.align&&(n.align=t.align)},e.blockRendering.RenderInfo.prototype.shouldStartNewRow_=function(t,n){return!(!n||t.type!=e.inputTypes.STATEMENT&&n.type!=e.inputTypes.STATEMENT&&(t.type!=e.inputTypes.VALUE&&t.type!=e.inputTypes.DUMMY||this.isInline))},e.blockRendering.RenderInfo.prototype.addElemSpacing_=function(){for(var n,t=0;n=this.rows[t];t++){var r=n.elements;if(n.elements=[],n.startsWithElemSpacer()&&n.elements.push(new e.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,r[0]))),r.length){for(var s=0;s<r.length-1;s++){n.elements.push(r[s]);var u=this.getInRowSpacing_(r[s],r[s+1]);n.elements.push(new e.blockRendering.InRowSpacer(this.constants_,u))}n.elements.push(r[r.length-1]),n.endsWithElemSpacer()&&n.elements.push(new e.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(r[r.length-1],null)))}}},e.blockRendering.RenderInfo.prototype.getInRowSpacing_=function(t,n){if(!t&&n&&e.blockRendering.Types.isStatementInput(n))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(t&&e.blockRendering.Types.isInput(t)&&!n){if(e.blockRendering.Types.isExternalInput(t))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isInlineInput(t))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(t))return this.constants_.NO_PADDING}return t&&e.blockRendering.Types.isLeftSquareCorner(t)&&n&&(e.blockRendering.Types.isPreviousConnection(n)||e.blockRendering.Types.isNextConnection(n))?n.notchOffset:t&&e.blockRendering.Types.isLeftRoundedCorner(t)&&n&&(e.blockRendering.Types.isPreviousConnection(n)||e.blockRendering.Types.isNextConnection(n))?n.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},e.blockRendering.RenderInfo.prototype.computeBounds_=function(){for(var u,t=0,n=0,r=0,s=0;u=this.rows[s];s++){if(u.measure(),n=Math.max(n,u.width),u.hasStatement){var b=u.getLastInput();t=Math.max(t,u.width-b.width)}r=Math.max(r,u.widthWithConnectedBlocks)}for(this.statementEdge=t,this.width=n,s=0;u=this.rows[s];s++)u.hasStatement&&(u.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(n,r),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)},e.blockRendering.RenderInfo.prototype.alignRowElements_=function(){for(var n,t=0;n=this.rows[t];t++)if(n.hasStatement)this.alignStatementRow_(n);else{var r=n.width;0<(r=this.getDesiredRowWidth_(n)-r)&&this.addAlignmentPadding_(n,r),e.blockRendering.Types.isTopOrBottomRow(n)&&(n.widthWithConnectedBlocks=n.width)}},e.blockRendering.RenderInfo.prototype.getDesiredRowWidth_=function(t){return this.width-this.startX},e.blockRendering.RenderInfo.prototype.addAlignmentPadding_=function(t,n){var r=t.getFirstSpacer(),s=t.getLastSpacer();(t.hasExternalInput||t.hasStatement)&&(t.widthWithConnectedBlocks+=n),t.align==e.constants.ALIGN.LEFT?s.width+=n:t.align==e.constants.ALIGN.CENTRE?(r.width+=n/2,s.width+=n/2):t.align==e.constants.ALIGN.RIGHT?r.width+=n:s.width+=n,t.width+=n},e.blockRendering.RenderInfo.prototype.alignStatementRow_=function(t){var n=t.getLastInput(),r=t.width-n.width,s=this.statementEdge;0<(r=s-r)&&this.addAlignmentPadding_(t,r),r=t.width,s=this.getDesiredRowWidth_(t),n.width+=s-r,n.height=Math.max(n.height,t.height),t.width+=s-r,t.widthWithConnectedBlocks=Math.max(t.width,this.statementEdge+t.connectedBlockWidths)},e.blockRendering.RenderInfo.prototype.addRowSpacing_=function(){var t=this.rows;this.rows=[];for(var n=0;n<t.length;n++)this.rows.push(t[n]),n!=t.length-1&&this.rows.push(this.makeSpacerRow_(t[n],t[n+1]))},e.blockRendering.RenderInfo.prototype.makeSpacerRow_=function(t,n){var r=this.getSpacerRowHeight_(t,n),s=this.getSpacerRowWidth_(t,n);return r=new e.blockRendering.SpacerRow(this.constants_,r,s),t.hasStatement&&(r.followsStatement=!0),n.hasStatement&&(r.precedesStatement=!0),r},e.blockRendering.RenderInfo.prototype.getSpacerRowWidth_=function(t,n){return this.width-this.startX},e.blockRendering.RenderInfo.prototype.getSpacerRowHeight_=function(t,n){return this.constants_.MEDIUM_PADDING},e.blockRendering.RenderInfo.prototype.getElemCenterline_=function(t,n){return e.blockRendering.Types.isSpacer(n)?t.yPos+n.height/2:e.blockRendering.Types.isBottomRow(t)?(t=t.yPos+t.height-t.descenderHeight,e.blockRendering.Types.isNextConnection(n)?t+n.height/2:t-n.height/2):e.blockRendering.Types.isTopRow(t)?e.blockRendering.Types.isHat(n)?t.capline-n.height/2:t.capline+n.height/2:t.yPos+t.height/2},e.blockRendering.RenderInfo.prototype.recordElemPositions_=function(t){for(var s,n=t.xPos,r=0;s=t.elements[r];r++)e.blockRendering.Types.isSpacer(s)&&(s.height=t.height),s.xPos=n,s.centerline=this.getElemCenterline_(t,s),n+=s.width},e.blockRendering.RenderInfo.prototype.finalize_=function(){for(var s,t=0,n=0,r=0;s=this.rows[r];r++)s.yPos=n,s.xPos=this.startX,n+=s.height,t=Math.max(t,s.widthWithConnectedBlocks),this.recordElemPositions_(s);this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(t=Math.max(t,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.widthWithChildren=t+this.startX,this.height=n,this.startY=this.topRow.capline,this.bottomRow.baseline=n-this.bottomRow.descenderHeight},e.blockRendering.Debug=function(t){this.debugElements_=[],this.svgRoot_=null,this.constants_=t},e.blockRendering.Debug.config={rowSpacers:!0,elemSpacers:!0,rows:!0,elems:!0,connections:!0,blockBounds:!0,connectedBlockBounds:!0,render:!0},e.blockRendering.Debug.prototype.clearElems=function(){for(var n,t=0;n=this.debugElements_[t];t++)e.utils.dom.removeNode(n);this.debugElements_=[]},e.blockRendering.Debug.prototype.drawSpacerRow=function(t,n,r){if(e.blockRendering.Debug.config.rowSpacers){var s=Math.abs(t.height),u=0>t.height;u&&(n-=s),this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"rowSpacerRect blockRenderDebug",x:r?-(t.xPos+t.width):t.xPos,y:n,width:t.width,height:s,stroke:u?"black":"blue",fill:"blue","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}},e.blockRendering.Debug.prototype.drawSpacerElem=function(t,n,r){if(e.blockRendering.Debug.config.elemSpacers){n=Math.abs(t.width);var s=0>t.width,u=s?t.xPos-n:t.xPos;r&&(u=-(u+n)),this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"elemSpacerRect blockRenderDebug",x:u,y:t.centerline-t.height/2,width:n,height:t.height,stroke:"pink",fill:s?"black":"pink","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}},e.blockRendering.Debug.prototype.drawRenderedElem=function(t,n){if(e.blockRendering.Debug.config.elems){var r=t.xPos;n&&(r=-(r+t.width)),this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"rowRenderingRect blockRenderDebug",x:r,y:n=t.centerline-t.height/2,width:t.width,height:t.height,stroke:"black",fill:"none","stroke-width":"1px"},this.svgRoot_)),e.blockRendering.Types.isField(t)&&t.field instanceof e.FieldLabel&&this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"rowRenderingRect blockRenderDebug",x:r,y:n+this.constants_.FIELD_TEXT_BASELINE,width:t.width,height:"0.1px",stroke:"red",fill:"none","stroke-width":"0.5px"},this.svgRoot_))}e.blockRendering.Types.isInput(t)&&e.blockRendering.Debug.config.connections&&this.drawConnection(t.connectionModel)},e.blockRendering.Debug.prototype.drawConnection=function(t){if(e.blockRendering.Debug.config.connections){if(t.type==e.connectionTypes.INPUT_VALUE)var n=4,r="magenta",s="none";else t.type==e.connectionTypes.OUTPUT_VALUE?(n=2,s=r="magenta"):t.type==e.connectionTypes.NEXT_STATEMENT?(n=4,r="goldenrod",s="none"):t.type==e.connectionTypes.PREVIOUS_STATEMENT&&(n=2,s=r="goldenrod");this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{class:"blockRenderDebug",cx:t.offsetInBlock_.x,cy:t.offsetInBlock_.y,r:n,fill:s,stroke:r},this.svgRoot_))}},e.blockRendering.Debug.prototype.drawRenderedRow=function(t,n,r){e.blockRendering.Debug.config.rows&&(this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"elemRenderingRect blockRenderDebug",x:r?-(t.xPos+t.width):t.xPos,y:t.yPos,width:t.width,height:t.height,stroke:"red",fill:"none","stroke-width":"1px"},this.svgRoot_)),e.blockRendering.Types.isTopOrBottomRow(t)||e.blockRendering.Debug.config.connectedBlockBounds&&this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"connectedBlockWidth blockRenderDebug",x:r?-(t.xPos+t.widthWithConnectedBlocks):t.xPos,y:t.yPos,width:t.widthWithConnectedBlocks,height:t.height,stroke:this.randomColour_,fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_)))},e.blockRendering.Debug.prototype.drawRowWithElements=function(t,n,r){for(var s=0,u=t.elements.length;s<u;s++){var b=t.elements[s];b?e.blockRendering.Types.isSpacer(b)?this.drawSpacerElem(b,t.height,r):this.drawRenderedElem(b,r):console.warn("A row has an undefined or null element.",t,b)}this.drawRenderedRow(t,n,r)},e.blockRendering.Debug.prototype.drawBoundingBox=function(t){if(e.blockRendering.Debug.config.blockBounds){var n=t.RTL?-t.width:0;this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blockBoundingBox blockRenderDebug",x:n,y:0,width:t.width,height:t.height,stroke:"black",fill:"none","stroke-width":"1px","stroke-dasharray":"5,5"},this.svgRoot_)),e.blockRendering.Debug.config.connectedBlockBounds&&this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blockRenderDebug",x:n=t.RTL?-t.widthWithChildren:0,y:0,width:t.widthWithChildren,height:t.height,stroke:"#DF57BC",fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_))}},e.blockRendering.Debug.prototype.drawDebug=function(t,n){this.clearElems(),this.svgRoot_=t.getSvgRoot(),this.randomColour_="#"+Math.floor(16777215*Math.random()).toString(16);for(var u,r=0,s=0;u=n.rows[s];s++)e.blockRendering.Types.isBetweenRowSpacer(u)?this.drawSpacerRow(u,r,n.RTL):this.drawRowWithElements(u,r,n.RTL),r+=u.height;t.previousConnection&&this.drawConnection(t.previousConnection),t.nextConnection&&this.drawConnection(t.nextConnection),t.outputConnection&&this.drawConnection(t.outputConnection),n.rightSide&&this.drawRenderedElem(n.rightSide,n.RTL),this.drawBoundingBox(n),this.drawRender(t.pathObject.svgPath)},e.blockRendering.Debug.prototype.drawRender=function(t){e.blockRendering.Debug.config.render&&(t.setAttribute("filter","url(#"+this.constants_.debugFilterId+")"),setTimeout(function(){t.setAttribute("filter","")},100))},e.blockRendering.Drawer=function(t,n){this.block_=t,this.info_=n,this.topLeft_=t.getRelativeToSurfaceXY(),this.inlinePath_=this.outlinePath_="",this.constants_=n.getRenderer().getConstants()},e.blockRendering.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),this.block_.pathObject.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),e.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},e.blockRendering.Drawer.prototype.recordSizeOnBlock_=function(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren},e.blockRendering.Drawer.prototype.hideHiddenIcons_=function(){for(var n,t=0;n=this.info_.hiddenIcons[t];t++)n.icon.iconGroup_.setAttribute("display","none")},e.blockRendering.Drawer.prototype.drawOutline_=function(){this.drawTop_();for(var t=1;t<this.info_.rows.length-1;t++){var n=this.info_.rows[t];n.hasJaggedEdge?this.drawJaggedEdge_(n):n.hasStatement?this.drawStatementInput_(n):n.hasExternalInput?this.drawValueInput_(n):this.drawRightSideRow_(n)}this.drawBottom_(),this.drawLeft_()},e.blockRendering.Drawer.prototype.drawTop_=function(){var t=this.info_.topRow,n=t.elements;this.positionPreviousConnection_(),this.outlinePath_+=e.utils.svgPaths.moveBy(t.xPos,this.info_.startY);for(var s,r=0;s=n[r];r++)e.blockRendering.Types.isLeftRoundedCorner(s)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:e.blockRendering.Types.isRightRoundedCorner(s)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:e.blockRendering.Types.isPreviousConnection(s)?this.outlinePath_+=s.shape.pathLeft:e.blockRendering.Types.isHat(s)?this.outlinePath_+=this.constants_.START_HAT.path:e.blockRendering.Types.isSpacer(s)&&(this.outlinePath_+=e.utils.svgPaths.lineOnAxis("h",s.width));this.outlinePath_+=e.utils.svgPaths.lineOnAxis("v",t.height)},e.blockRendering.Drawer.prototype.drawJaggedEdge_=function(t){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+e.utils.svgPaths.lineOnAxis("v",t.height-this.constants_.JAGGED_TEETH.height)},e.blockRendering.Drawer.prototype.drawValueInput_=function(t){var n=t.getLastInput();this.positionExternalValueConnection_(t);var r="function"==typeof n.shape.pathDown?n.shape.pathDown(n.height):n.shape.pathDown;this.outlinePath_+=e.utils.svgPaths.lineOnAxis("H",n.xPos+n.width)+r+e.utils.svgPaths.lineOnAxis("v",t.height-n.connectionHeight)},e.blockRendering.Drawer.prototype.drawStatementInput_=function(t){var n=t.getLastInput(),r=n.xPos+n.notchOffset+n.shape.width;n=n.shape.pathRight+e.utils.svgPaths.lineOnAxis("h",-(n.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var s=t.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=e.utils.svgPaths.lineOnAxis("H",r)+n+e.utils.svgPaths.lineOnAxis("v",s)+this.constants_.INSIDE_CORNERS.pathBottom+e.utils.svgPaths.lineOnAxis("H",t.xPos+t.width),this.positionStatementInputConnection_(t)},e.blockRendering.Drawer.prototype.drawRightSideRow_=function(t){this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",t.yPos+t.height)},e.blockRendering.Drawer.prototype.drawBottom_=function(){var t=this.info_.bottomRow,n=t.elements;this.positionNextConnection_();for(var b,r=0,s="",u=n.length-1;b=n[u];u--)e.blockRendering.Types.isNextConnection(b)?s+=b.shape.pathRight:e.blockRendering.Types.isLeftSquareCorner(b)?s+=e.utils.svgPaths.lineOnAxis("H",t.xPos):e.blockRendering.Types.isLeftRoundedCorner(b)?s+=this.constants_.OUTSIDE_CORNERS.bottomLeft:e.blockRendering.Types.isRightRoundedCorner(b)?(s+=this.constants_.OUTSIDE_CORNERS.bottomRight,r=this.constants_.OUTSIDE_CORNERS.rightHeight):e.blockRendering.Types.isSpacer(b)&&(s+=e.utils.svgPaths.lineOnAxis("h",-1*b.width));this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",t.baseline-r),this.outlinePath_+=s},e.blockRendering.Drawer.prototype.drawLeft_=function(){var t=this.info_.outputConnection;if(this.positionOutputConnection_(),t){var n=t.connectionOffsetY+t.height;t="function"==typeof t.shape.pathUp?t.shape.pathUp(t.height):t.shape.pathUp,this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",n)+t}this.outlinePath_+="z"},e.blockRendering.Drawer.prototype.drawInternals_=function(){for(var n,t=0;n=this.info_.rows[t];t++)for(var s,r=0;s=n.elements[r];r++)e.blockRendering.Types.isInlineInput(s)?this.drawInlineInput_(s):(e.blockRendering.Types.isIcon(s)||e.blockRendering.Types.isField(s))&&this.layoutField_(s)},e.blockRendering.Drawer.prototype.layoutField_=function(t){if(e.blockRendering.Types.isField(t))var n=t.field.getSvgRoot();else e.blockRendering.Types.isIcon(t)&&(n=t.icon.iconGroup_);var r=t.centerline-t.height/2,s=t.xPos,u="";this.info_.RTL&&(s=-(s+t.width),t.flipRtl&&(s+=t.width,u="scale(-1 1)")),e.blockRendering.Types.isIcon(t)?(n.setAttribute("display","block"),n.setAttribute("transform","translate("+s+","+r+")"),t.icon.computeIconLocation()):n.setAttribute("transform","translate("+s+","+r+")"+u),this.info_.isInsertionMarker&&n.setAttribute("display","none")},e.blockRendering.Drawer.prototype.drawInlineInput_=function(t){var n=t.width,r=t.height,s=t.connectionOffsetY,u=t.connectionHeight+s;this.inlinePath_+=e.utils.svgPaths.moveTo(t.xPos+t.connectionWidth,t.centerline-r/2)+e.utils.svgPaths.lineOnAxis("v",s)+t.shape.pathDown+e.utils.svgPaths.lineOnAxis("v",r-u)+e.utils.svgPaths.lineOnAxis("h",n-t.connectionWidth)+e.utils.svgPaths.lineOnAxis("v",-r)+"z",this.positionInlineInputConnection_(t)},e.blockRendering.Drawer.prototype.positionInlineInputConnection_=function(t){if(t.connectionModel){var r=t.xPos+t.connectionWidth+t.connectionOffsetX;this.info_.RTL&&(r*=-1),t.connectionModel.setOffsetInBlock(r,t.centerline-t.height/2+t.connectionOffsetY)}},e.blockRendering.Drawer.prototype.positionStatementInputConnection_=function(t){var n=t.getLastInput();if(n.connectionModel){var r=t.xPos+t.statementEdge+n.notchOffset;this.info_.RTL&&(r*=-1),n.connectionModel.setOffsetInBlock(r,t.yPos)}},e.blockRendering.Drawer.prototype.positionExternalValueConnection_=function(t){var n=t.getLastInput();if(n.connectionModel){var r=t.xPos+t.width;this.info_.RTL&&(r*=-1),n.connectionModel.setOffsetInBlock(r,t.yPos)}},e.blockRendering.Drawer.prototype.positionPreviousConnection_=function(){var t=this.info_.topRow;if(t.connection){var n=t.xPos+t.notchOffset;t.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-n:n,0)}},e.blockRendering.Drawer.prototype.positionNextConnection_=function(){var t=this.info_.bottomRow;if(t.connection){var n=t.connection,r=n.xPos;n.connectionModel.setOffsetInBlock(this.info_.RTL?-r:r,t.baseline)}},e.blockRendering.Drawer.prototype.positionOutputConnection_=function(){if(this.info_.outputConnection){var t=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-t:t,this.info_.outputConnection.connectionOffsetY)}},e.Events.MarkerMove=function(t,n,r,s){var u=t?t.workspace.id:void 0;s&&s.getType()==e.ASTNode.types.WORKSPACE&&(u=s.getLocation().id),e.Events.MarkerMove.superClass_.constructor.call(this,u),this.blockId=t?t.id:null,this.oldNode=r,this.newNode=s,this.isCursor=n},e.utils.object.inherits(e.Events.MarkerMove,e.Events.UiBase),e.Events.MarkerMove.prototype.type=e.Events.MARKER_MOVE,e.Events.MarkerMove.prototype.toJson=function(){var t=e.Events.MarkerMove.superClass_.toJson.call(this);return t.isCursor=this.isCursor,t.blockId=this.blockId,t.oldNode=this.oldNode,t.newNode=this.newNode,t},e.Events.MarkerMove.prototype.fromJson=function(t){e.Events.MarkerMove.superClass_.fromJson.call(this,t),this.isCursor=t.isCursor,this.blockId=t.blockId,this.oldNode=t.oldNode,this.newNode=t.newNode},e.registry.register(e.registry.Type.EVENT,e.Events.MARKER_MOVE,e.Events.MarkerMove),e.blockRendering.MarkerSvg=function(t,n,r){this.workspace_=t,this.marker_=r,this.parent_=null,this.constants_=n,this.currentMarkerSvg=null,t=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=r.colour||t},e.blockRendering.MarkerSvg.CURSOR_CLASS="blocklyCursor",e.blockRendering.MarkerSvg.MARKER_CLASS="blocklyMarker",e.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER=.75,e.blockRendering.MarkerSvg.prototype.getSvgRoot=function(){return this.svgGroup_},e.blockRendering.MarkerSvg.prototype.getMarker=function(){return this.marker_},e.blockRendering.MarkerSvg.prototype.isCursor=function(){return"cursor"==this.marker_.type},e.blockRendering.MarkerSvg.prototype.createDom=function(){var t=this.isCursor()?e.blockRendering.MarkerSvg.CURSOR_CLASS:e.blockRendering.MarkerSvg.MARKER_CLASS;return this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:t},null),this.createDomInternal_(),this.svgGroup_},e.blockRendering.MarkerSvg.prototype.setParent_=function(t){this.isCursor()?(this.parent_&&this.parent_.setCursorSvg(null),t.setCursorSvg(this.getSvgRoot())):(this.parent_&&this.parent_.setMarkerSvg(null),t.setMarkerSvg(this.getSvgRoot())),this.parent_=t},e.blockRendering.MarkerSvg.prototype.draw=function(t,n){if(n){this.constants_=this.workspace_.getRenderer().getConstants();var r=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker_.colour||r,this.applyColour_(n),this.showAtLocation_(n),this.fireMarkerEvent_(t,n),void 0!==(t=this.currentMarkerSvg.childNodes[0])&&t.beginElement&&t.beginElement()}else this.hide()},e.blockRendering.MarkerSvg.prototype.showAtLocation_=function(t){var n=t.getLocation().type;t.getType()==e.ASTNode.types.BLOCK?this.showWithBlock_(t):t.getType()==e.ASTNode.types.OUTPUT?this.showWithOutput_(t):n==e.connectionTypes.INPUT_VALUE?this.showWithInput_(t):n==e.connectionTypes.NEXT_STATEMENT?this.showWithNext_(t):t.getType()==e.ASTNode.types.PREVIOUS?this.showWithPrevious_(t):t.getType()==e.ASTNode.types.FIELD?this.showWithField_(t):t.getType()==e.ASTNode.types.WORKSPACE?this.showWithCoordinates_(t):t.getType()==e.ASTNode.types.STACK&&this.showWithStack_(t)},e.blockRendering.MarkerSvg.prototype.showWithBlockPrevOutput_=function(t){var n=(t=t.getSourceBlock()).width,r=t.height,s=r*e.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER,u=this.constants_.CURSOR_BLOCK_PADDING;if(t.previousConnection){var b=this.constants_.shapeFor(t.previousConnection);this.positionPrevious_(n,u,s,b)}else t.outputConnection?(b=this.constants_.shapeFor(t.outputConnection),this.positionOutput_(n,r,b)):this.positionBlock_(n,u,s);this.setParent_(t),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithBlock_=function(t){this.showWithBlockPrevOutput_(t)},e.blockRendering.MarkerSvg.prototype.showWithPrevious_=function(t){this.showWithBlockPrevOutput_(t)},e.blockRendering.MarkerSvg.prototype.showWithOutput_=function(t){this.showWithBlockPrevOutput_(t)},e.blockRendering.MarkerSvg.prototype.showWithCoordinates_=function(t){var n=t.getWsCoordinate();t=n.x,this.workspace_.RTL&&(t-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(t,n=n.y,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace_),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithField_=function(t){var n=(t=t.getLocation()).getSize().width,r=t.getSize().height;this.positionRect_(0,0,n,r),this.setParent_(t),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithInput_=function(t){var n=(t=t.getLocation()).getSourceBlock();this.positionInput_(t),this.setParent_(n),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithNext_=function(t){var n=t.getLocation();t=n.getSourceBlock();var r=0;n=n.getOffsetInBlock().y;var s=t.getHeightWidth().width;this.workspace_.RTL&&(r=-s),this.positionLine_(r,n,s),this.setParent_(t),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithStack_=function(t){var n=(t=t.getLocation()).getHeightWidth(),r=n.width+this.constants_.CURSOR_STACK_PADDING,s=-this.constants_.CURSOR_STACK_PADDING/2,b=s;this.workspace_.RTL&&(b=-(r+s)),this.positionRect_(b,-this.constants_.CURSOR_STACK_PADDING/2,r,n=n.height+this.constants_.CURSOR_STACK_PADDING),this.setParent_(t),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showCurrent_=function(){this.hide(),this.currentMarkerSvg.style.display=""},e.blockRendering.MarkerSvg.prototype.positionBlock_=function(t,n,r){t=e.utils.svgPaths.moveBy(-n,r)+e.utils.svgPaths.lineOnAxis("V",-n)+e.utils.svgPaths.lineOnAxis("H",t+2*n)+e.utils.svgPaths.lineOnAxis("V",r),this.markerBlock_.setAttribute("d",t),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},e.blockRendering.MarkerSvg.prototype.positionInput_=function(t){var n=t.getOffsetInBlock().x,r=t.getOffsetInBlock().y;t=e.utils.svgPaths.moveTo(0,0)+this.constants_.shapeFor(t).pathDown,this.markerInput_.setAttribute("d",t),this.markerInput_.setAttribute("transform","translate("+n+","+r+")"+(this.workspace_.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_},e.blockRendering.MarkerSvg.prototype.positionLine_=function(t,n,r){this.markerSvgLine_.setAttribute("x",t),this.markerSvgLine_.setAttribute("y",n),this.markerSvgLine_.setAttribute("width",r),this.currentMarkerSvg=this.markerSvgLine_},e.blockRendering.MarkerSvg.prototype.positionOutput_=function(t,n,r){t=e.utils.svgPaths.moveBy(t,0)+e.utils.svgPaths.lineOnAxis("h",-(t-r.width))+e.utils.svgPaths.lineOnAxis("v",this.constants_.TAB_OFFSET_FROM_TOP)+r.pathDown+e.utils.svgPaths.lineOnAxis("V",n)+e.utils.svgPaths.lineOnAxis("H",t),this.markerBlock_.setAttribute("d",t),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},e.blockRendering.MarkerSvg.prototype.positionPrevious_=function(t,n,r,s){t=e.utils.svgPaths.moveBy(-n,r)+e.utils.svgPaths.lineOnAxis("V",-n)+e.utils.svgPaths.lineOnAxis("H",this.constants_.NOTCH_OFFSET_LEFT)+s.pathLeft+e.utils.svgPaths.lineOnAxis("H",t+2*n)+e.utils.svgPaths.lineOnAxis("V",r),this.markerBlock_.setAttribute("d",t),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},e.blockRendering.MarkerSvg.prototype.positionRect_=function(t,n,r,s){this.markerSvgRect_.setAttribute("x",t),this.markerSvgRect_.setAttribute("y",n),this.markerSvgRect_.setAttribute("width",r),this.markerSvgRect_.setAttribute("height",s),this.currentMarkerSvg=this.markerSvgRect_},e.blockRendering.MarkerSvg.prototype.flipRtl_=function(t){t.setAttribute("transform","scale(-1 1)")},e.blockRendering.MarkerSvg.prototype.hide=function(){this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"},e.blockRendering.MarkerSvg.prototype.fireMarkerEvent_=function(t,n){var r=n.getSourceBlock();t=new(e.Events.get(e.Events.MARKER_MOVE))(r,this.isCursor(),t,n),e.Events.fire(t)},e.blockRendering.MarkerSvg.prototype.getBlinkProperties_=function(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}},e.blockRendering.MarkerSvg.prototype.createDomInternal_=function(){if(this.markerSvg_=e.utils.dom.createSvgElement(e.utils.Svg.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT,style:"display: none"},this.markerSvg_),this.markerSvgRect_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10,style:"display: none"},this.markerSvg_),this.markerInput_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{transform:"",style:"display: none"},this.markerSvg_),this.markerBlock_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{transform:"",style:"display: none",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var t=this.getBlinkProperties_();e.utils.dom.createSvgElement(e.utils.Svg.ANIMATE,t,this.markerSvgLine_),e.utils.dom.createSvgElement(e.utils.Svg.ANIMATE,t,this.markerInput_),t.attributeName="stroke",e.utils.dom.createSvgElement(e.utils.Svg.ANIMATE,t,this.markerBlock_)}return this.markerSvg_},e.blockRendering.MarkerSvg.prototype.applyColour_=function(t){this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(this.markerSvgLine_.firstChild.setAttribute("values",t=this.colour_+";transparent;transparent;"),this.markerInput_.firstChild.setAttribute("values",t),this.markerBlock_.firstChild.setAttribute("values",t))},e.blockRendering.MarkerSvg.prototype.dispose=function(){this.svgGroup_&&e.utils.dom.removeNode(this.svgGroup_)},e.blockRendering.PathObject=function(t,n,r){this.constants=r,this.svgRoot=t,this.svgPath=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.style=n,this.markerSvg=this.cursorSvg=null},e.blockRendering.PathObject.prototype.setPath=function(t){this.svgPath.setAttribute("d",t)},e.blockRendering.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)")},e.blockRendering.PathObject.prototype.setCursorSvg=function(t){t?(this.svgRoot.appendChild(t),this.cursorSvg=t):this.cursorSvg=null},e.blockRendering.PathObject.prototype.setMarkerSvg=function(t){t?(this.cursorSvg?this.svgRoot.insertBefore(t,this.cursorSvg):this.svgRoot.appendChild(t),this.markerSvg=t):this.markerSvg=null},e.blockRendering.PathObject.prototype.applyColour=function(t){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(t.isShadow()),this.updateDisabled_(!t.isEnabled()||t.getInheritedDisabled())},e.blockRendering.PathObject.prototype.setStyle=function(t){this.style=t},e.blockRendering.PathObject.prototype.setClass_=function(t,n){n?e.utils.dom.addClass(this.svgRoot,t):e.utils.dom.removeClass(this.svgRoot,t)},e.blockRendering.PathObject.prototype.updateHighlighted=function(t){this.svgPath.setAttribute("filter",t?"url(#"+this.constants.embossFilterId+")":"none")},e.blockRendering.PathObject.prototype.updateShadow_=function(t){t&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},e.blockRendering.PathObject.prototype.updateDisabled_=function(t){this.setClass_("blocklyDisabled",t),t&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")},e.blockRendering.PathObject.prototype.updateSelected=function(t){this.setClass_("blocklySelected",t)},e.blockRendering.PathObject.prototype.updateDraggingDelete=function(t){this.setClass_("blocklyDraggingDelete",t)},e.blockRendering.PathObject.prototype.updateInsertionMarker=function(t){this.setClass_("blocklyInsertionMarker",t)},e.blockRendering.PathObject.prototype.updateMovable=function(t){this.setClass_("blocklyDraggable",t)},e.blockRendering.PathObject.prototype.updateReplacementFade=function(t){this.setClass_("blocklyReplaceable",t)},e.blockRendering.PathObject.prototype.updateShapeForInputHighlight=function(t,n){},e.blockRendering.Renderer=function(t){this.name=t,this.overrides=this.constants_=null},e.blockRendering.Renderer.prototype.getClassName=function(){return this.name+"-renderer"},e.blockRendering.Renderer.prototype.init=function(t,n){this.constants_=this.makeConstants_(),n&&(this.overrides=n,e.utils.object.mixin(this.constants_,n)),this.constants_.setTheme(t),this.constants_.init()},e.blockRendering.Renderer.prototype.createDom=function(t,n){this.constants_.createDom(t,this.name+"-"+n.name,"."+this.getClassName()+"."+n.getClassName())},e.blockRendering.Renderer.prototype.refreshDom=function(t,n){var r=this.getConstants();r.dispose(),this.constants_=this.makeConstants_(),this.overrides&&e.utils.object.mixin(this.constants_,this.overrides),this.constants_.randomIdentifier=r.randomIdentifier,this.constants_.setTheme(n),this.constants_.init(),this.createDom(t,n)},e.blockRendering.Renderer.prototype.dispose=function(){this.constants_&&this.constants_.dispose()},e.blockRendering.Renderer.prototype.makeConstants_=function(){return new e.blockRendering.ConstantProvider},e.blockRendering.Renderer.prototype.makeRenderInfo_=function(t){return new e.blockRendering.RenderInfo(this,t)},e.blockRendering.Renderer.prototype.makeDrawer_=function(t,n){return new e.blockRendering.Drawer(t,n)},e.blockRendering.Renderer.prototype.makeDebugger_=function(){if(!e.blockRendering.Debug)throw Error("Missing require for Blockly.blockRendering.Debug");return new e.blockRendering.Debug(this.getConstants())},e.blockRendering.Renderer.prototype.makeMarkerDrawer=function(t,n){return new e.blockRendering.MarkerSvg(t,this.getConstants(),n)},e.blockRendering.Renderer.prototype.makePathObject=function(t,n){return new e.blockRendering.PathObject(t,n,this.constants_)},e.blockRendering.Renderer.prototype.getConstants=function(){return this.constants_},e.blockRendering.Renderer.prototype.shouldHighlightConnection=function(t){return!0},e.blockRendering.Renderer.prototype.orphanCanConnectAtEnd=function(t,n,r){return!!e.Connection.getConnectionForOrphanedConnection(t,r===e.connectionTypes.OUTPUT_VALUE?n.outputConnection:n.previousConnection)},e.blockRendering.Renderer.prototype.getConnectionPreviewMethod=function(t,n,r){return n.type==e.connectionTypes.OUTPUT_VALUE||n.type==e.connectionTypes.PREVIOUS_STATEMENT?!t.isConnected()||this.orphanCanConnectAtEnd(r,t.targetBlock(),n.type)?e.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:e.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:e.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER},e.blockRendering.Renderer.prototype.render=function(t){e.blockRendering.useDebugger&&!t.renderingDebugger&&(t.renderingDebugger=this.makeDebugger_());var n=this.makeRenderInfo_(t);n.measure(),this.makeDrawer_(t,n).draw()},e.geras={},e.geras.ConstantProvider=function(){e.geras.ConstantProvider.superClass_.constructor.call(this),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2},e.utils.object.inherits(e.geras.ConstantProvider,e.blockRendering.ConstantProvider),e.geras.ConstantProvider.prototype.getCSS_=function(t){return e.geras.ConstantProvider.superClass_.getCSS_.call(this,t).concat([t+" .blocklyInsertionMarker>.blocklyPathLight,",t+" .blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"])},e.geras.Highlighter=function(t){this.info_=t,this.inlineSteps_=this.steps_="",this.RTL_=this.info_.RTL,t=t.getRenderer(),this.constants_=t.getConstants(),this.highlightConstants_=t.getHighlightConstants(),this.highlightOffset_=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH},e.geras.Highlighter.prototype.getPath=function(){return this.steps_+"\n"+this.inlineSteps_},e.geras.Highlighter.prototype.drawTopCorner=function(t){this.steps_+=e.utils.svgPaths.moveBy(t.xPos,this.info_.startY);for(var r,n=0;r=t.elements[n];n++)e.blockRendering.Types.isLeftSquareCorner(r)?this.steps_+=this.highlightConstants_.START_POINT:e.blockRendering.Types.isLeftRoundedCorner(r)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):e.blockRendering.Types.isPreviousConnection(r)?this.steps_+=this.notchPaths_.pathLeft:e.blockRendering.Types.isHat(r)?this.steps_+=this.startPaths_.path(this.RTL_):e.blockRendering.Types.isSpacer(r)&&0!=r.width&&(this.steps_+=e.utils.svgPaths.lineOnAxis("H",r.xPos+r.width-this.highlightOffset_));this.steps_+=e.utils.svgPaths.lineOnAxis("H",t.xPos+t.width-this.highlightOffset_)},e.geras.Highlighter.prototype.drawJaggedEdge_=function(t){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+e.utils.svgPaths.lineOnAxis("v",t.height-this.jaggedTeethPaths_.height-this.highlightOffset_))},e.geras.Highlighter.prototype.drawValueInput=function(t){var n=t.getLastInput();if(this.RTL_){var r=t.height-n.connectionHeight;this.steps_+=e.utils.svgPaths.moveTo(n.xPos+n.width-this.highlightOffset_,t.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+e.utils.svgPaths.lineOnAxis("v",r)}else this.steps_+=e.utils.svgPaths.moveTo(n.xPos+n.width,t.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)},e.geras.Highlighter.prototype.drawStatementInput=function(t){var n=t.getLastInput();if(this.RTL_){var r=t.height-2*this.insideCornerPaths_.height;this.steps_+=e.utils.svgPaths.moveTo(n.xPos,t.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+e.utils.svgPaths.lineOnAxis("v",r)+this.insideCornerPaths_.pathBottom(this.RTL_)+e.utils.svgPaths.lineTo(t.width-n.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=e.utils.svgPaths.moveTo(n.xPos,t.yPos+t.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+e.utils.svgPaths.lineTo(t.width-n.xPos-this.insideCornerPaths_.width,0)},e.geras.Highlighter.prototype.drawRightSideRow=function(t){var n=t.xPos+t.width-this.highlightOffset_;t.followsStatement&&(this.steps_+=e.utils.svgPaths.lineOnAxis("H",n)),this.RTL_&&(this.steps_+=e.utils.svgPaths.lineOnAxis("H",n),t.height>this.highlightOffset_&&(this.steps_+=e.utils.svgPaths.lineOnAxis("V",t.yPos+t.height-this.highlightOffset_)))},e.geras.Highlighter.prototype.drawBottomRow=function(t){if(this.RTL_)this.steps_+=e.utils.svgPaths.lineOnAxis("V",t.baseline-this.highlightOffset_);else{var n=this.info_.bottomRow.elements[0];e.blockRendering.Types.isLeftSquareCorner(n)?this.steps_+=e.utils.svgPaths.moveTo(t.xPos+this.highlightOffset_,t.baseline-this.highlightOffset_):e.blockRendering.Types.isLeftRoundedCorner(n)&&(this.steps_+=e.utils.svgPaths.moveTo(t.xPos,t.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}},e.geras.Highlighter.prototype.drawLeft=function(){var t=this.info_.outputConnection;t&&(t=t.connectionOffsetY+t.height,this.RTL_?this.steps_+=e.utils.svgPaths.moveTo(this.info_.startX,t):(this.steps_+=e.utils.svgPaths.moveTo(this.info_.startX+this.highlightOffset_,this.info_.bottomRow.baseline-this.highlightOffset_),this.steps_+=e.utils.svgPaths.lineOnAxis("V",t)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(e.blockRendering.Types.isLeftRoundedCorner((t=this.info_.topRow).elements[0])?this.steps_+=e.utils.svgPaths.lineOnAxis("V",this.outsideCornerPaths_.height):this.steps_+=e.utils.svgPaths.lineOnAxis("V",t.capline+this.highlightOffset_))},e.geras.Highlighter.prototype.drawInlineInput=function(t){var n=this.highlightOffset_,r=t.xPos+t.connectionWidth,s=t.centerline-t.height/2,u=t.width-t.connectionWidth,b=s+n;this.RTL_?(s=t.connectionOffsetY-n,t=t.height-(t.connectionOffsetY+t.connectionHeight)+n,this.inlineSteps_+=e.utils.svgPaths.moveTo(r-n,b)+e.utils.svgPaths.lineOnAxis("v",s)+this.puzzleTabPaths_.pathDown(this.RTL_)+e.utils.svgPaths.lineOnAxis("v",t)+e.utils.svgPaths.lineOnAxis("h",u)):this.inlineSteps_+=e.utils.svgPaths.moveTo(t.xPos+t.width+n,b)+e.utils.svgPaths.lineOnAxis("v",t.height)+e.utils.svgPaths.lineOnAxis("h",-u)+e.utils.svgPaths.moveTo(r,s+t.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)},e.geras.InlineInput=function(t,n){e.geras.InlineInput.superClass_.constructor.call(this,t,n),this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)},e.utils.object.inherits(e.geras.InlineInput,e.blockRendering.InlineInput),e.geras.StatementInput=function(t,n){e.geras.StatementInput.superClass_.constructor.call(this,t,n),this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)},e.utils.object.inherits(e.geras.StatementInput,e.blockRendering.StatementInput),e.geras.RenderInfo=function(t,n){e.geras.RenderInfo.superClass_.constructor.call(this,t,n)},e.utils.object.inherits(e.geras.RenderInfo,e.blockRendering.RenderInfo),e.geras.RenderInfo.prototype.getRenderer=function(){return this.renderer_},e.geras.RenderInfo.prototype.populateBottomRow_=function(){e.geras.RenderInfo.superClass_.populateBottomRow_.call(this),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==e.inputTypes.STATEMENT||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)},e.geras.RenderInfo.prototype.addInput_=function(t,n){this.isInline&&t.type==e.inputTypes.VALUE?(n.elements.push(new e.geras.InlineInput(this.constants_,t)),n.hasInlineInput=!0):t.type==e.inputTypes.STATEMENT?(n.elements.push(new e.geras.StatementInput(this.constants_,t)),n.hasStatement=!0):t.type==e.inputTypes.VALUE?(n.elements.push(new e.blockRendering.ExternalValueInput(this.constants_,t)),n.hasExternalInput=!0):t.type==e.inputTypes.DUMMY&&(n.minHeight=Math.max(n.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),n.hasDummyInput=!0),this.isInline||null!=n.align||(n.align=t.align)},e.geras.RenderInfo.prototype.addElemSpacing_=function(){for(var r,t=!1,n=0;r=this.rows[n];n++)r.hasExternalInput&&(t=!0);for(n=0;r=this.rows[n];n++){var s=r.elements;if(r.elements=[],r.startsWithElemSpacer()&&r.elements.push(new e.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,s[0]))),s.length){for(var u=0;u<s.length-1;u++){r.elements.push(s[u]);var b=this.getInRowSpacing_(s[u],s[u+1]);r.elements.push(new e.blockRendering.InRowSpacer(this.constants_,b))}r.elements.push(s[s.length-1]),r.endsWithElemSpacer()&&(b=this.getInRowSpacing_(s[s.length-1],null),t&&r.hasDummyInput&&(b+=this.constants_.TAB_WIDTH),r.elements.push(new e.blockRendering.InRowSpacer(this.constants_,b)))}}},e.geras.RenderInfo.prototype.getInRowSpacing_=function(t,n){if(!t)return n&&e.blockRendering.Types.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:n&&e.blockRendering.Types.isInlineInput(n)?this.constants_.MEDIUM_LARGE_PADDING:n&&e.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!e.blockRendering.Types.isInput(t)&&(!n||e.blockRendering.Types.isStatementInput(n)))return e.blockRendering.Types.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:e.blockRendering.Types.isIcon(t)?2*this.constants_.LARGE_PADDING+1:e.blockRendering.Types.isHat(t)?this.constants_.NO_PADDING:e.blockRendering.Types.isPreviousOrNextConnection(t)?this.constants_.LARGE_PADDING:e.blockRendering.Types.isLeftRoundedCorner(t)?this.constants_.MIN_BLOCK_WIDTH:e.blockRendering.Types.isJaggedEdge(t)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isInput(t)&&!n){if(e.blockRendering.Types.isExternalInput(t))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isInlineInput(t))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(t))return this.constants_.NO_PADDING}if(!e.blockRendering.Types.isInput(t)&&n&&e.blockRendering.Types.isInput(n)){if(e.blockRendering.Types.isField(t)&&t.isEditable){if(e.blockRendering.Types.isInlineInput(n)||e.blockRendering.Types.isExternalInput(n))return this.constants_.SMALL_PADDING}else{if(e.blockRendering.Types.isInlineInput(n)||e.blockRendering.Types.isExternalInput(n))return this.constants_.MEDIUM_LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(n))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(e.blockRendering.Types.isIcon(t)&&n&&!e.blockRendering.Types.isInput(n))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isInlineInput(t)&&n&&e.blockRendering.Types.isField(n))return n.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isLeftSquareCorner(t)&&n){if(e.blockRendering.Types.isHat(n))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isPreviousConnection(n))return n.notchOffset;if(e.blockRendering.Types.isNextConnection(n))return n.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(e.blockRendering.Types.isLeftRoundedCorner(t)&&n){if(e.blockRendering.Types.isPreviousConnection(n))return n.notchOffset-this.constants_.CORNER_RADIUS;if(e.blockRendering.Types.isNextConnection(n))return n.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return e.blockRendering.Types.isField(t)&&n&&e.blockRendering.Types.isField(n)&&t.isEditable==n.isEditable||n&&e.blockRendering.Types.isJaggedEdge(n)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},e.geras.RenderInfo.prototype.getSpacerRowHeight_=function(t,n){return e.blockRendering.Types.isTopRow(t)&&e.blockRendering.Types.isBottomRow(n)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:e.blockRendering.Types.isTopRow(t)||e.blockRendering.Types.isBottomRow(n)?this.constants_.NO_PADDING:t.hasExternalInput&&n.hasExternalInput?this.constants_.LARGE_PADDING:!t.hasStatement&&n.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:t.hasStatement&&n.hasStatement||!t.hasStatement&&n.hasDummyInput||t.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},e.geras.RenderInfo.prototype.getElemCenterline_=function(t,n){if(e.blockRendering.Types.isSpacer(n))return t.yPos+n.height/2;if(e.blockRendering.Types.isBottomRow(t))return t=t.yPos+t.height-t.descenderHeight,e.blockRendering.Types.isNextConnection(n)?t+n.height/2:t-n.height/2;if(e.blockRendering.Types.isTopRow(t))return e.blockRendering.Types.isHat(n)?t.capline-n.height/2:t.capline+n.height/2;var r=t.yPos;return e.blockRendering.Types.isField(n)||e.blockRendering.Types.isIcon(n)?(r+=n.height/2,(t.hasInlineInput||t.hasStatement)&&n.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=t.height&&(r+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):r=e.blockRendering.Types.isInlineInput(n)?r+n.height/2:r+t.height/2,r},e.geras.RenderInfo.prototype.alignRowElements_=function(){if(this.isInline){for(var s,t=0,n=null,r=this.rows.length-1;s=this.rows[r];r--)s.nextRightEdge=t,e.blockRendering.Types.isInputRow(s)&&(s.hasStatement&&this.alignStatementRow_(s),n&&n.hasStatement&&s.width<n.width?s.nextRightEdge=n.width:t=s.width,n=s);for(r=t=0;s=this.rows[r];r++)s.hasStatement?t=this.getDesiredRowWidth_(s):e.blockRendering.Types.isSpacer(s)?s.width=Math.max(t,s.nextRightEdge):(0<(t=Math.max(t,s.nextRightEdge)-s.width)&&this.addAlignmentPadding_(s,t),t=s.width)}else e.geras.RenderInfo.superClass_.alignRowElements_.call(this)},e.geras.RenderInfo.prototype.getDesiredRowWidth_=function(t){return this.isInline&&t.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:e.geras.RenderInfo.superClass_.getDesiredRowWidth_.call(this,t)},e.geras.RenderInfo.prototype.finalize_=function(){for(var s,t=0,n=0,r=0;s=this.rows[r];r++){s.yPos=n,s.xPos=this.startX,n+=s.height,t=Math.max(t,s.widthWithConnectedBlocks);var u=n-this.topRow.ascenderHeight;s==this.bottomRow&&u<this.constants_.MIN_BLOCK_HEIGHT&&(this.bottomRow.height+=u=this.constants_.MIN_BLOCK_HEIGHT-u,n+=u),this.recordElemPositions_(s)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(t=Math.max(t,this.block_.nextConnection.targetBlock().getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=n-this.bottomRow.descenderHeight,this.widthWithChildren=t+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=n+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline},e.geras.Drawer=function(t,n){e.geras.Drawer.superClass_.constructor.call(this,t,n),this.highlighter_=new e.geras.Highlighter(n)},e.utils.object.inherits(e.geras.Drawer,e.blockRendering.Drawer),e.geras.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_();var t=this.block_.pathObject;t.setPath(this.outlinePath_+"\n"+this.inlinePath_),t.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&t.flipRTL(),e.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},e.geras.Drawer.prototype.drawTop_=function(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),e.geras.Drawer.superClass_.drawTop_.call(this)},e.geras.Drawer.prototype.drawJaggedEdge_=function(t){this.highlighter_.drawJaggedEdge_(t),e.geras.Drawer.superClass_.drawJaggedEdge_.call(this,t)},e.geras.Drawer.prototype.drawValueInput_=function(t){this.highlighter_.drawValueInput(t),e.geras.Drawer.superClass_.drawValueInput_.call(this,t)},e.geras.Drawer.prototype.drawStatementInput_=function(t){this.highlighter_.drawStatementInput(t),e.geras.Drawer.superClass_.drawStatementInput_.call(this,t)},e.geras.Drawer.prototype.drawRightSideRow_=function(t){this.highlighter_.drawRightSideRow(t),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("H",t.xPos+t.width)+e.utils.svgPaths.lineOnAxis("V",t.yPos+t.height)},e.geras.Drawer.prototype.drawBottom_=function(){this.highlighter_.drawBottomRow(this.info_.bottomRow),e.geras.Drawer.superClass_.drawBottom_.call(this)},e.geras.Drawer.prototype.drawLeft_=function(){this.highlighter_.drawLeft(),e.geras.Drawer.superClass_.drawLeft_.call(this)},e.geras.Drawer.prototype.drawInlineInput_=function(t){this.highlighter_.drawInlineInput(t),e.geras.Drawer.superClass_.drawInlineInput_.call(this,t)},e.geras.Drawer.prototype.positionInlineInputConnection_=function(t){if(t.connectionModel){var r=t.xPos+t.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(r*=-1),t.connectionModel.setOffsetInBlock(r,t.centerline-t.height/2+t.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}},e.geras.Drawer.prototype.positionStatementInputConnection_=function(t){var n=t.getLastInput();if(n.connectionModel){var r=t.xPos+t.statementEdge+n.notchOffset;n.connectionModel.setOffsetInBlock(r=this.info_.RTL?-1*r:r+this.constants_.DARK_PATH_OFFSET,t.yPos+this.constants_.DARK_PATH_OFFSET)}},e.geras.Drawer.prototype.positionExternalValueConnection_=function(t){var n=t.getLastInput();if(n.connectionModel){var r=t.xPos+t.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(r*=-1),n.connectionModel.setOffsetInBlock(r,t.yPos)}},e.geras.Drawer.prototype.positionNextConnection_=function(){var t=this.info_.bottomRow;if(t.connection){var n=t.connection,r=n.xPos;n.connectionModel.setOffsetInBlock((this.info_.RTL?-r:r)+this.constants_.DARK_PATH_OFFSET/2,t.baseline+this.constants_.DARK_PATH_OFFSET)}},e.geras.HighlightConstantProvider=function(t){this.constantProvider=t,this.OFFSET=.5,this.START_POINT=e.utils.svgPaths.moveBy(this.OFFSET,this.OFFSET)},e.geras.HighlightConstantProvider.prototype.init=function(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()},e.geras.HighlightConstantProvider.prototype.makeInsideCorner=function(){var t=this.constantProvider.CORNER_RADIUS,n=this.OFFSET,r=(1-Math.SQRT1_2)*(t+n)-n,s=e.utils.svgPaths.moveBy(r,r)+e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(-r-n,t-r)),u=e.utils.svgPaths.arc("a","0 0,0",t+n,e.utils.svgPaths.point(t+n,t+n)),b=e.utils.svgPaths.moveBy(r,-r)+e.utils.svgPaths.arc("a","0 0,0",t+n,e.utils.svgPaths.point(t-r,r+n));return{width:t+n,height:t,pathTop:function(x){return x?s:""},pathBottom:function(x){return x?u:b}}},e.geras.HighlightConstantProvider.prototype.makeOutsideCorner=function(){var t=this.constantProvider.CORNER_RADIUS,n=this.OFFSET,r=(1-Math.SQRT1_2)*(t-n)+n,s=e.utils.svgPaths.moveBy(r,r)+e.utils.svgPaths.arc("a","0 0,1",t-n,e.utils.svgPaths.point(t-r,-r+n)),u=e.utils.svgPaths.moveBy(n,t)+e.utils.svgPaths.arc("a","0 0,1",t-n,e.utils.svgPaths.point(t,-t+n)),b=-r,x=e.utils.svgPaths.moveBy(r,b)+e.utils.svgPaths.arc("a","0 0,1",t-n,e.utils.svgPaths.point(-r+n,-b-t));return{height:t,topLeft:function(B){return B?s:u},bottomLeft:function(){return x}}},e.geras.HighlightConstantProvider.prototype.makePuzzleTab=function(){var t=this.constantProvider.TAB_WIDTH,n=this.constantProvider.TAB_HEIGHT,r=e.utils.svgPaths.moveBy(-2,3.4-n)+e.utils.svgPaths.lineTo(-.45*t,-2.1),s=e.utils.svgPaths.lineOnAxis("v",2.5)+e.utils.svgPaths.moveBy(.97*-t,2.5)+e.utils.svgPaths.curve("q",[e.utils.svgPaths.point(.05*-t,10),e.utils.svgPaths.point(.3*t,9.5)])+e.utils.svgPaths.moveBy(.67*t,-1.9)+e.utils.svgPaths.lineOnAxis("v",2.5),u=e.utils.svgPaths.lineOnAxis("v",-1.5)+e.utils.svgPaths.moveBy(-.92*t,-.5)+e.utils.svgPaths.curve("q",[e.utils.svgPaths.point(-.19*t,-5.5),e.utils.svgPaths.point(0,-11)])+e.utils.svgPaths.moveBy(.92*t,1),b=e.utils.svgPaths.moveBy(-5,n-.7)+e.utils.svgPaths.lineTo(.46*t,-2.1);return{width:t,height:n,pathUp:function(x){return x?r:u},pathDown:function(x){return x?s:b}}},e.geras.HighlightConstantProvider.prototype.makeNotch=function(){return{pathLeft:e.utils.svgPaths.lineOnAxis("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}},e.geras.HighlightConstantProvider.prototype.makeJaggedTeeth=function(){return{pathLeft:e.utils.svgPaths.lineTo(5.1,2.6)+e.utils.svgPaths.moveBy(-10.2,6.8)+e.utils.svgPaths.lineTo(5.1,2.6),height:12,width:10.2}},e.geras.HighlightConstantProvider.prototype.makeStartHat=function(){var t=this.constantProvider.START_HAT.height,n=e.utils.svgPaths.moveBy(25,-8.7)+e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(29.7,-6.2),e.utils.svgPaths.point(57.2,-.5),e.utils.svgPaths.point(75,8.7)]),r=e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(17.8,-9.2),e.utils.svgPaths.point(45.3,-14.9),e.utils.svgPaths.point(75,-8.7)])+e.utils.svgPaths.moveTo(100.5,t+.5);return{path:function(s){return s?n:r}}},e.geras.PathObject=function(t,n,r){this.constants=r,this.svgRoot=t,this.svgPathDark=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"},this.svgRoot),this.svgPath=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.svgPathLight=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyPathLight"},this.svgRoot),this.colourDark="#000000",this.style=n},e.utils.object.inherits(e.geras.PathObject,e.blockRendering.PathObject),e.geras.PathObject.prototype.setPath=function(t){this.svgPath.setAttribute("d",t),this.svgPathDark.setAttribute("d",t)},e.geras.PathObject.prototype.setHighlightPath=function(t){this.svgPathLight.setAttribute("d",t)},e.geras.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")},e.geras.PathObject.prototype.applyColour=function(t){this.svgPathLight.style.display="",this.svgPathDark.style.display="",this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),e.geras.PathObject.superClass_.applyColour.call(this,t),this.svgPath.setAttribute("stroke","none")},e.geras.PathObject.prototype.setStyle=function(t){this.style=t,this.colourDark=e.utils.colour.blend("#000",this.style.colourPrimary,.2)||this.colourDark},e.geras.PathObject.prototype.updateHighlighted=function(t){t?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")},e.geras.PathObject.prototype.updateShadow_=function(t){t&&(this.svgPathLight.style.display="none",this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},e.geras.PathObject.prototype.updateDisabled_=function(t){e.geras.PathObject.superClass_.updateDisabled_.call(this,t),t&&this.svgPath.setAttribute("stroke","none")},e.geras.Renderer=function(t){e.geras.Renderer.superClass_.constructor.call(this,t),this.highlightConstants_=null},e.utils.object.inherits(e.geras.Renderer,e.blockRendering.Renderer),e.geras.Renderer.prototype.init=function(t,n){e.geras.Renderer.superClass_.init.call(this,t,n),this.highlightConstants_=this.makeHighlightConstants_(),this.highlightConstants_.init()},e.geras.Renderer.prototype.refreshDom=function(t,n){e.geras.Renderer.superClass_.refreshDom.call(this,t,n),this.getHighlightConstants().init()},e.geras.Renderer.prototype.makeConstants_=function(){return new e.geras.ConstantProvider},e.geras.Renderer.prototype.makeRenderInfo_=function(t){return new e.geras.RenderInfo(this,t)},e.geras.Renderer.prototype.makeDrawer_=function(t,n){return new e.geras.Drawer(t,n)},e.geras.Renderer.prototype.makePathObject=function(t,n){return new e.geras.PathObject(t,n,this.getConstants())},e.geras.Renderer.prototype.makeHighlightConstants_=function(){return new e.geras.HighlightConstantProvider(this.getConstants())},e.geras.Renderer.prototype.getHighlightConstants=function(){return this.highlightConstants_},e.blockRendering.register("geras",e.geras.Renderer),e.thrasos={},e.thrasos.RenderInfo=function(t,n){e.thrasos.RenderInfo.superClass_.constructor.call(this,t,n)},e.utils.object.inherits(e.thrasos.RenderInfo,e.blockRendering.RenderInfo),e.thrasos.RenderInfo.prototype.getRenderer=function(){return this.renderer_},e.thrasos.RenderInfo.prototype.addElemSpacing_=function(){for(var r,t=!1,n=0;r=this.rows[n];n++)r.hasExternalInput&&(t=!0);for(n=0;r=this.rows[n];n++){var s=r.elements;r.elements=[],r.startsWithElemSpacer()&&r.elements.push(new e.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,s[0])));for(var u=0;u<s.length-1;u++){r.elements.push(s[u]);var b=this.getInRowSpacing_(s[u],s[u+1]);r.elements.push(new e.blockRendering.InRowSpacer(this.constants_,b))}r.elements.push(s[s.length-1]),r.endsWithElemSpacer()&&(b=this.getInRowSpacing_(s[s.length-1],null),t&&r.hasDummyInput&&(b+=this.constants_.TAB_WIDTH),r.elements.push(new e.blockRendering.InRowSpacer(this.constants_,b)))}},e.thrasos.RenderInfo.prototype.getInRowSpacing_=function(t,n){if(!t)return n&&e.blockRendering.Types.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:n&&e.blockRendering.Types.isInlineInput(n)?this.constants_.MEDIUM_LARGE_PADDING:n&&e.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!e.blockRendering.Types.isInput(t)&&!n)return e.blockRendering.Types.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:e.blockRendering.Types.isIcon(t)?2*this.constants_.LARGE_PADDING+1:e.blockRendering.Types.isHat(t)?this.constants_.NO_PADDING:e.blockRendering.Types.isPreviousOrNextConnection(t)?this.constants_.LARGE_PADDING:e.blockRendering.Types.isLeftRoundedCorner(t)?this.constants_.MIN_BLOCK_WIDTH:e.blockRendering.Types.isJaggedEdge(t)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isInput(t)&&!n){if(e.blockRendering.Types.isExternalInput(t))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isInlineInput(t))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(t))return this.constants_.NO_PADDING}if(!e.blockRendering.Types.isInput(t)&&n&&e.blockRendering.Types.isInput(n)){if(e.blockRendering.Types.isField(t)&&t.isEditable){if(e.blockRendering.Types.isInlineInput(n)||e.blockRendering.Types.isExternalInput(n))return this.constants_.SMALL_PADDING}else{if(e.blockRendering.Types.isInlineInput(n)||e.blockRendering.Types.isExternalInput(n))return this.constants_.MEDIUM_LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(n))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(e.blockRendering.Types.isIcon(t)&&n&&!e.blockRendering.Types.isInput(n))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isInlineInput(t)&&n&&e.blockRendering.Types.isField(n))return n.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isLeftSquareCorner(t)&&n){if(e.blockRendering.Types.isHat(n))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isPreviousConnection(n)||e.blockRendering.Types.isNextConnection(n))return n.notchOffset}return e.blockRendering.Types.isLeftRoundedCorner(t)&&n?n.notchOffset-this.constants_.CORNER_RADIUS:e.blockRendering.Types.isField(t)&&n&&e.blockRendering.Types.isField(n)&&t.isEditable==n.isEditable||n&&e.blockRendering.Types.isJaggedEdge(n)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},e.thrasos.RenderInfo.prototype.getSpacerRowHeight_=function(t,n){return e.blockRendering.Types.isTopRow(t)&&e.blockRendering.Types.isBottomRow(n)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:e.blockRendering.Types.isTopRow(t)||e.blockRendering.Types.isBottomRow(n)?this.constants_.NO_PADDING:t.hasExternalInput&&n.hasExternalInput?this.constants_.LARGE_PADDING:!t.hasStatement&&n.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:t.hasStatement&&n.hasStatement||t.hasDummyInput||n.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},e.thrasos.RenderInfo.prototype.getElemCenterline_=function(t,n){if(e.blockRendering.Types.isSpacer(n))return t.yPos+n.height/2;if(e.blockRendering.Types.isBottomRow(t))return t=t.yPos+t.height-t.descenderHeight,e.blockRendering.Types.isNextConnection(n)?t+n.height/2:t-n.height/2;if(e.blockRendering.Types.isTopRow(t))return e.blockRendering.Types.isHat(n)?t.capline-n.height/2:t.capline+n.height/2;var r=t.yPos;return e.blockRendering.Types.isField(n)&&t.hasStatement?r+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+n.height/2):r+t.height/2},e.thrasos.RenderInfo.prototype.finalize_=function(){for(var s,t=0,n=0,r=0;s=this.rows[r];r++){s.yPos=n,s.xPos=this.startX,n+=s.height,t=Math.max(t,s.widthWithConnectedBlocks);var u=n-this.topRow.ascenderHeight;s==this.bottomRow&&u<this.constants_.MIN_BLOCK_HEIGHT&&(this.bottomRow.height+=u=this.constants_.MIN_BLOCK_HEIGHT-u,n+=u),this.recordElemPositions_(s)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(t=Math.max(t,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.bottomRow.baseline=n-this.bottomRow.descenderHeight,this.widthWithChildren=t+this.startX,this.height=n,this.startY=this.topRow.capline},e.thrasos.Renderer=function(t){e.thrasos.Renderer.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.thrasos.Renderer,e.blockRendering.Renderer),e.thrasos.Renderer.prototype.makeRenderInfo_=function(t){return new e.thrasos.RenderInfo(this,t)},e.blockRendering.register("thrasos",e.thrasos.Renderer),e.zelos={},e.zelos.ConstantProvider=function(){e.zelos.ConstantProvider.superClass_.constructor.call(this),this.SMALL_PADDING=this.GRID_UNIT=4,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TAB_OFFSET_FROM_TOP=0,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!0,this.FIELD_COLOUR_DEFAULT_WIDTH=2*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=4*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter_=null,this.replacementGlowFilterId="",this.replacementGlowFilter_=null},e.utils.object.inherits(e.zelos.ConstantProvider,e.blockRendering.ConstantProvider),e.zelos.ConstantProvider.prototype.setFontConstants_=function(t){e.zelos.ConstantProvider.superClass_.setFontConstants_.call(this,t),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING},e.zelos.ConstantProvider.prototype.init=function(){e.zelos.ConstantProvider.superClass_.init.call(this),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth},e.zelos.ConstantProvider.prototype.setDynamicProperties_=function(t){e.zelos.ConstantProvider.superClass_.setDynamicProperties_.call(this,t),this.SELECTED_GLOW_COLOUR=t.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;var n=Number(t.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=n&&!isNaN(n)?n:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=t.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(t=Number(t.getComponentStyle("replacementGlowSize")))&&!isNaN(t)?t:this.REPLACEMENT_GLOW_SIZE},e.zelos.ConstantProvider.prototype.dispose=function(){e.zelos.ConstantProvider.superClass_.dispose.call(this),this.selectedGlowFilter_&&e.utils.dom.removeNode(this.selectedGlowFilter_),this.replacementGlowFilter_&&e.utils.dom.removeNode(this.replacementGlowFilter_)},e.zelos.ConstantProvider.prototype.makeStartHat=function(){var t=this.START_HAT_HEIGHT,n=this.START_HAT_WIDTH;return{height:t,width:n,path:e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(25,-t),e.utils.svgPaths.point(71,-t),e.utils.svgPaths.point(n,0)])}},e.zelos.ConstantProvider.prototype.makeHexagonal=function(){function t(r,s,u){var b=r/2;return e.utils.svgPaths.lineTo(-(u=u?-1:1)*(b=b>n?n:b),r=(s?-1:1)*r/2)+e.utils.svgPaths.lineTo(u*b,r)}var n=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width:function(r){return(r/=2)>n?n:r},height:function(r){return r},connectionOffsetY:function(r){return r/2},connectionOffsetX:function(r){return-r},pathDown:function(r){return t(r,!1,!1)},pathUp:function(r){return t(r,!0,!1)},pathRightDown:function(r){return t(r,!1,!0)},pathRightUp:function(r){return t(r,!1,!0)}}},e.zelos.ConstantProvider.prototype.makeRounded=function(){function t(s,u,b){var x=s>r?s-r:0;return e.utils.svgPaths.arc("a","0 0,1",s=(s>r?r:s)/2,e.utils.svgPaths.point((u?-1:1)*s,(u?-1:1)*s))+e.utils.svgPaths.lineOnAxis("v",(b?1:-1)*x)+e.utils.svgPaths.arc("a","0 0,1",s,e.utils.svgPaths.point((u?1:-1)*s,(u?-1:1)*s))}var n=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,r=2*n;return{type:this.SHAPES.ROUND,isDynamic:!0,width:function(s){return(s/=2)>n?n:s},height:function(s){return s},connectionOffsetY:function(s){return s/2},connectionOffsetX:function(s){return-s},pathDown:function(s){return t(s,!1,!1)},pathUp:function(s){return t(s,!0,!1)},pathRightDown:function(s){return t(s,!1,!0)},pathRightUp:function(s){return t(s,!1,!0)}}},e.zelos.ConstantProvider.prototype.makeSquared=function(){function t(r,s,u){return r-=2*n,e.utils.svgPaths.arc("a","0 0,1",n,e.utils.svgPaths.point((s?-1:1)*n,(s?-1:1)*n))+e.utils.svgPaths.lineOnAxis("v",(u?1:-1)*r)+e.utils.svgPaths.arc("a","0 0,1",n,e.utils.svgPaths.point((s?1:-1)*n,(s?-1:1)*n))}var n=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width:function(r){return n},height:function(r){return r},connectionOffsetY:function(r){return r/2},connectionOffsetX:function(r){return-r},pathDown:function(r){return t(r,!1,!1)},pathUp:function(r){return t(r,!0,!1)},pathRightDown:function(r){return t(r,!1,!0)},pathRightUp:function(r){return t(r,!1,!0)}}},e.zelos.ConstantProvider.prototype.shapeFor=function(t){var n=t.getCheck();switch(!n&&t.targetConnection&&(n=t.targetConnection.getCheck()),t.type){case e.connectionTypes.INPUT_VALUE:case e.connectionTypes.OUTPUT_VALUE:if(null!=(t=t.getSourceBlock().getOutputShape()))switch(t){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return n&&-1!=n.indexOf("Boolean")?this.HEXAGONAL:(n&&-1!=n.indexOf("Number")||n&&n.indexOf("String"),this.ROUNDED);case e.connectionTypes.PREVIOUS_STATEMENT:case e.connectionTypes.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}},e.zelos.ConstantProvider.prototype.makeNotch=function(){function t(ot){return e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(ot*u/2,0),e.utils.svgPaths.point(ot*u*3/4,x/2),e.utils.svgPaths.point(ot*u,x)])+e.utils.svgPaths.line([e.utils.svgPaths.point(ot*u,b)])+e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(ot*u/4,x/2),e.utils.svgPaths.point(ot*u/2,x),e.utils.svgPaths.point(ot*u,x)])+e.utils.svgPaths.lineOnAxis("h",ot*s)+e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(ot*u/2,0),e.utils.svgPaths.point(ot*u*3/4,-x/2),e.utils.svgPaths.point(ot*u,-x)])+e.utils.svgPaths.line([e.utils.svgPaths.point(ot*u,-b)])+e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(ot*u/4,-x/2),e.utils.svgPaths.point(ot*u/2,-x),e.utils.svgPaths.point(ot*u,-x)])}var n=this.NOTCH_WIDTH,r=this.NOTCH_HEIGHT,s=n/3,u=s/3,b=r/2,x=b/2,B=t(1),Z=t(-1);return{type:this.SHAPES.NOTCH,width:n,height:r,pathLeft:B,pathRight:Z}},e.zelos.ConstantProvider.prototype.makeInsideCorners=function(){var t=this.CORNER_RADIUS,n=e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(-t,t)),r=e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(-t,t));return{width:t,height:t,pathTop:n,pathBottom:e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(t,t)),rightWidth:t,rightHeight:t,pathTopRight:r,pathBottomRight:e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(t,t))}},e.zelos.ConstantProvider.prototype.generateSecondaryColour_=function(t){return e.utils.colour.blend("#000",t,.15)||t},e.zelos.ConstantProvider.prototype.generateTertiaryColour_=function(t){return e.utils.colour.blend("#000",t,.25)||t},e.zelos.ConstantProvider.prototype.createDom=function(t,n,r){e.zelos.ConstantProvider.superClass_.createDom.call(this,t,n,r),t=e.utils.dom.createSvgElement(e.utils.Svg.DEFS,{},t),n=e.utils.dom.createSvgElement(e.utils.Svg.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},t),e.utils.dom.createSvgElement(e.utils.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},n),r=e.utils.dom.createSvgElement(e.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},n),e.utils.dom.createSvgElement(e.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},r),e.utils.dom.createSvgElement(e.utils.Svg.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},n),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},n),this.selectedGlowFilterId=n.id,this.selectedGlowFilter_=n,t=e.utils.dom.createSvgElement(e.utils.Svg.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},t),e.utils.dom.createSvgElement(e.utils.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},t),n=e.utils.dom.createSvgElement(e.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},t),e.utils.dom.createSvgElement(e.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),e.utils.dom.createSvgElement(e.utils.Svg.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},t),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},t),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},t),this.replacementGlowFilterId=t.id,this.replacementGlowFilter_=t},e.zelos.ConstantProvider.prototype.getCSS_=function(t){return[t+" .blocklyText,",t+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",t+" .blocklyText {","fill: #fff;","}",t+" .blocklyNonEditableText>rect:not(.blocklyDropdownRect),",t+" .blocklyEditableText>rect:not(.blocklyDropdownRect) {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","}",t+" .blocklyNonEditableText>text,",t+" .blocklyEditableText>text,",t+" .blocklyNonEditableText>g>text,",t+" .blocklyEditableText>g>text {","fill: #575E75;","}",t+" .blocklyFlyoutLabelText {","fill: #575E75;","}",t+" .blocklyText.blocklyBubbleText {","fill: #575E75;","}",t+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>rect,",t+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",t+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","color: #575E75;","}",t+" .blocklyDropdownText {","fill: #fff !important;","}",t+".blocklyWidgetDiv .goog-menuitem,",t+".blocklyDropDownDiv .goog-menuitem {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","}",t+".blocklyDropDownDiv .goog-menuitem-content {","color: #fff;","}",t+" .blocklyHighlightedConnectionPath {","stroke: "+this.SELECTED_GLOW_COLOUR+";","}",t+" .blocklyDisabled > .blocklyOutlinePath {","fill: url(#blocklyDisabledPattern"+this.randomIdentifier+")","}",t+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]},e.zelos.TopRow=function(t){e.zelos.TopRow.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.zelos.TopRow,e.blockRendering.TopRow),e.zelos.TopRow.prototype.endsWithElemSpacer=function(){return!1},e.zelos.TopRow.prototype.hasLeftSquareCorner=function(t){return!!t.outputConnection||(t.hat?"cap"===t.hat:this.constants_.ADD_START_HATS)&&!t.outputConnection&&!t.previousConnection},e.zelos.TopRow.prototype.hasRightSquareCorner=function(t){return!!t.outputConnection&&!t.statementInputCount&&!t.nextConnection},e.zelos.BottomRow=function(t){e.zelos.BottomRow.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.zelos.BottomRow,e.blockRendering.BottomRow),e.zelos.BottomRow.prototype.endsWithElemSpacer=function(){return!1},e.zelos.BottomRow.prototype.hasLeftSquareCorner=function(t){return!!t.outputConnection},e.zelos.BottomRow.prototype.hasRightSquareCorner=function(t){return!!t.outputConnection&&!t.statementInputCount&&!t.nextConnection},e.zelos.RightConnectionShape=function(t){e.zelos.RightConnectionShape.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.getType("RIGHT_CONNECTION"),this.width=this.height=0},e.utils.object.inherits(e.zelos.RightConnectionShape,e.blockRendering.Measurable),e.zelos.RenderInfo=function(t,n){e.zelos.RenderInfo.superClass_.constructor.call(this,t,n),this.topRow=new e.zelos.TopRow(this.constants_),this.bottomRow=new e.zelos.BottomRow(this.constants_),this.isInline=!0,this.isMultiRow=!n.getInputsInline()||n.isCollapsed(),this.hasStatementInput=0<n.statementInputCount,this.rightSide=this.outputConnection?new e.zelos.RightConnectionShape(this.constants_):null},e.utils.object.inherits(e.zelos.RenderInfo,e.blockRendering.RenderInfo),e.zelos.RenderInfo.prototype.getRenderer=function(){return this.renderer_},e.zelos.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},e.zelos.RenderInfo.prototype.shouldStartNewRow_=function(t,n){return!!n&&(t.type==e.inputTypes.STATEMENT||n.type==e.inputTypes.STATEMENT||(t.type==e.inputTypes.VALUE||t.type==e.inputTypes.DUMMY)&&(!this.isInline||this.isMultiRow))},e.zelos.RenderInfo.prototype.getDesiredRowWidth_=function(t){return t.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):e.zelos.RenderInfo.superClass_.getDesiredRowWidth_.call(this,t)},e.zelos.RenderInfo.prototype.getInRowSpacing_=function(t,n){return t&&n||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!t&&n&&e.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:t&&e.blockRendering.Types.isLeftRoundedCorner(t)&&n&&(e.blockRendering.Types.isPreviousConnection(n)||e.blockRendering.Types.isNextConnection(n))?n.notchOffset-this.constants_.CORNER_RADIUS:t&&e.blockRendering.Types.isLeftSquareCorner(t)&&n&&e.blockRendering.Types.isHat(n)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING},e.zelos.RenderInfo.prototype.getSpacerRowHeight_=function(t,n){if(e.blockRendering.Types.isTopRow(t)&&e.blockRendering.Types.isBottomRow(n))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;var r=e.blockRendering.Types.isInputRow(t)&&t.hasStatement,s=e.blockRendering.Types.isInputRow(n)&&n.hasStatement;return s||r?(t=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),s&&r?Math.max(t,this.constants_.DUMMY_INPUT_MIN_HEIGHT):t):e.blockRendering.Types.isTopRow(t)?t.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):e.blockRendering.Types.isBottomRow(n)?this.outputConnection?!n.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},e.zelos.RenderInfo.prototype.getSpacerRowWidth_=function(t,n){var r=this.width-this.startX;return e.blockRendering.Types.isInputRow(t)&&t.hasStatement||e.blockRendering.Types.isInputRow(n)&&n.hasStatement?Math.max(r,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):r},e.zelos.RenderInfo.prototype.getElemCenterline_=function(t,n){if(t.hasStatement&&!e.blockRendering.Types.isSpacer(n)&&!e.blockRendering.Types.isStatementInput(n))return t.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(e.blockRendering.Types.isInlineInput(n)){var r=n.connectedBlock;if(r&&r.outputConnection&&r.nextConnection)return t.yPos+r.height/2}return e.zelos.RenderInfo.superClass_.getElemCenterline_.call(this,t,n)},e.zelos.RenderInfo.prototype.addInput_=function(t,n){t.type==e.inputTypes.DUMMY&&n.hasDummyInput&&n.align==e.constants.ALIGN.LEFT&&t.align==e.constants.ALIGN.RIGHT&&(n.rightAlignedDummyInput=t),e.zelos.RenderInfo.superClass_.addInput_.call(this,t,n)},e.zelos.RenderInfo.prototype.addAlignmentPadding_=function(t,n){if(t.rightAlignedDummyInput){for(var r,u,s=0;(u=t.elements[s])&&(e.blockRendering.Types.isSpacer(u)&&(r=u),!e.blockRendering.Types.isField(u)||u.parentInput!=t.rightAlignedDummyInput);s++);if(r)return r.width+=n,void(t.width+=n)}e.zelos.RenderInfo.superClass_.addAlignmentPadding_.call(this,t,n)},e.zelos.RenderInfo.prototype.adjustXPosition_=function(){for(var t=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH,n=t,r=2;r<this.rows.length-1;r+=2){var s=this.rows[r-1],u=this.rows[r],b=this.rows[r+1];if(s=2==r?!!this.topRow.hasPreviousConnection:!!s.followsStatement,b=r+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!b.precedesStatement,e.blockRendering.Types.isInputRow(u)&&u.hasStatement)u.measure(),n=u.width-u.getLastInput().width+t;else if(s&&(2==r||b)&&e.blockRendering.Types.isInputRow(u)&&!u.hasStatement){b=u.xPos,s=null;for(var B,x=0;B=u.elements[x];x++)e.blockRendering.Types.isSpacer(B)&&(s=B),!(s&&(e.blockRendering.Types.isField(B)||e.blockRendering.Types.isInput(B))&&b<n)||e.blockRendering.Types.isField(B)&&(B.field instanceof e.FieldLabel||B.field instanceof e.FieldImage)||(s.width+=n-b),b+=B.width}}},e.zelos.RenderInfo.prototype.finalizeOutputConnection_=function(){if(this.outputConnection&&this.outputConnection.isDynamicShape){for(var r,t=0,n=0;r=this.rows[n];n++)r.yPos=t,t+=r.height;this.height=t,t=this.outputConnection.shape.height(n=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height),n=this.outputConnection.shape.width(n),this.outputConnection.height=t,this.outputConnection.width=n,this.outputConnection.startX=n,this.outputConnection.connectionOffsetY=this.outputConnection.shape.connectionOffsetY(t),this.outputConnection.connectionOffsetX=this.outputConnection.shape.connectionOffsetX(n),r=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(r=n,this.rightSide.height=t,this.rightSide.width=r,this.rightSide.centerline=t/2,this.rightSide.xPos=this.width+r),this.startX=n,this.width+=n+r,this.widthWithChildren+=n+r}},e.zelos.RenderInfo.prototype.finalizeHorizontalAlignment_=function(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var r,t=0,n=0;r=this.rows[n];n++)if(e.blockRendering.Types.isInputRow(r)){t=r.elements[r.elements.length-2];var s=this.getNegativeSpacing_(r.elements[1]),u=this.getNegativeSpacing_(t),b=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-(t=s+u)<b&&(s=(t=this.width-b)/2,u=t/2),r.elements.unshift(new e.blockRendering.InRowSpacer(this.constants_,-s)),r.elements.push(new e.blockRendering.InRowSpacer(this.constants_,-u))}if(t)for(this.width-=t,this.widthWithChildren-=t,this.rightSide.xPos-=t,n=0;r=this.rows[n];n++)e.blockRendering.Types.isTopOrBottomRow(r)&&(r.elements[1].width-=t,r.elements[1].widthWithConnectedBlocks-=t),r.width-=t,r.widthWithConnectedBlocks-=t}},e.zelos.RenderInfo.prototype.getNegativeSpacing_=function(t){if(!t)return 0;var n=this.outputConnection.width,r=this.outputConnection.shape.type,s=this.constants_;if(this.isMultiRow&&1<this.inputRows.length)return r===s.SHAPES.ROUND?n-(r=this.height/2>(r=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH)?r:this.height/2)*(1-Math.sin(Math.acos((r-this.constants_.SMALL_PADDING)/r))):0;if(e.blockRendering.Types.isInlineInput(t)){var u=t.connectedBlock;return t=u?u.pathObject.outputShapeType:t.shape.type,u&&u.outputConnection&&(u.statementInputCount||u.nextConnection)||r==s.SHAPES.HEXAGONAL&&r!=t?0:n-this.constants_.SHAPE_IN_SHAPE_PADDING[r][t]}return e.blockRendering.Types.isField(t)?r==s.SHAPES.ROUND&&t.field instanceof e.FieldTextInput?n-2.75*s.GRID_UNIT:n-this.constants_.SHAPE_IN_SHAPE_PADDING[r][0]:e.blockRendering.Types.isIcon(t)?this.constants_.SMALL_PADDING:0},e.zelos.RenderInfo.prototype.finalizeVerticalAlignment_=function(){if(!this.outputConnection)for(var t=2;t<this.rows.length-1;t+=2){var n=this.rows[t-1],r=this.rows[t],s=this.rows[t+1],u=2==t,b=t+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!s.precedesStatement;if(u?this.topRow.hasPreviousConnection:n.followsStatement){var x=3==r.elements.length&&(r.elements[1].field instanceof e.FieldLabel||r.elements[1].field instanceof e.FieldImage);if(!u&&x)n.height-=this.constants_.SMALL_PADDING,s.height-=this.constants_.SMALL_PADDING,r.height-=this.constants_.MEDIUM_PADDING;else if(u||b){if(b){for(u=!1,b=0;x=r.elements[b];b++)if(e.blockRendering.Types.isInlineInput(x)&&x.connectedBlock&&!x.connectedBlock.isShadow()&&40<=x.connectedBlock.getHeightWidth().height){u=!0;break}u&&(n.height-=this.constants_.SMALL_PADDING,s.height-=this.constants_.SMALL_PADDING)}}else n.height+=this.constants_.SMALL_PADDING}}},e.zelos.RenderInfo.prototype.finalize_=function(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),e.zelos.RenderInfo.superClass_.finalize_.call(this),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)},e.zelos.Drawer=function(t,n){e.zelos.Drawer.superClass_.constructor.call(this,t,n)},e.utils.object.inherits(e.zelos.Drawer,e.blockRendering.Drawer),e.zelos.Drawer.prototype.draw=function(){var t=this.block_.pathObject;t.beginDrawing(),this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),t.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&t.flipRTL(),e.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_(),this.info_.outputConnection&&(t.outputShapeType=this.info_.outputConnection.shape.type),t.endDrawing()},e.zelos.Drawer.prototype.drawOutline_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):e.zelos.Drawer.superClass_.drawOutline_.call(this)},e.zelos.Drawer.prototype.drawLeft_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():e.zelos.Drawer.superClass_.drawLeft_.call(this)},e.zelos.Drawer.prototype.drawRightSideRow_=function(t){if(!(0>=t.height))if(t.precedesStatement||t.followsStatement){var n=this.constants_.INSIDE_CORNERS.rightHeight;this.outlinePath_+=(t.followsStatement?this.constants_.INSIDE_CORNERS.pathBottomRight:"")+(0<(n=t.height-(t.precedesStatement?n:0))?e.utils.svgPaths.lineOnAxis("V",t.yPos+n):"")+(t.precedesStatement?this.constants_.INSIDE_CORNERS.pathTopRight:"")}else this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",t.yPos+t.height)},e.zelos.Drawer.prototype.drawRightDynamicConnection_=function(){this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)},e.zelos.Drawer.prototype.drawLeftDynamicConnection_=function(){this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"},e.zelos.Drawer.prototype.drawFlatTop_=function(){var t=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=e.utils.svgPaths.moveBy(t.xPos,this.info_.startY),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("h",t.width)},e.zelos.Drawer.prototype.drawFlatBottom_=function(){var t=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",t.baseline),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("h",-t.width)},e.zelos.Drawer.prototype.drawInlineInput_=function(t){this.positionInlineInputConnection_(t);var n=t.input.name;if(!t.connectedBlock&&!this.info_.isInsertionMarker){var r=t.width-2*t.connectionWidth;t=e.utils.svgPaths.moveTo(t.xPos+t.connectionWidth,t.centerline-t.height/2)+e.utils.svgPaths.lineOnAxis("h",r)+t.shape.pathRightDown(t.height)+e.utils.svgPaths.lineOnAxis("h",-r)+t.shape.pathUp(t.height)+"z",this.block_.pathObject.setOutlinePath(n,t)}},e.zelos.Drawer.prototype.drawStatementInput_=function(t){var n=t.getLastInput(),r=n.xPos+n.notchOffset+n.shape.width,s=n.shape.pathRight+e.utils.svgPaths.lineOnAxis("h",-(n.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop,u=t.height-2*this.constants_.INSIDE_CORNERS.height;n=this.constants_.INSIDE_CORNERS.pathBottom+e.utils.svgPaths.lineOnAxis("h",n.notchOffset-this.constants_.INSIDE_CORNERS.width)+(n.connectedBottomNextConnection?"":n.shape.pathLeft),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("H",r)+s+e.utils.svgPaths.lineOnAxis("v",u)+n+e.utils.svgPaths.lineOnAxis("H",t.xPos+t.width),this.positionStatementInputConnection_(t)},e.zelos.MarkerSvg=function(t,n,r){e.zelos.MarkerSvg.superClass_.constructor.call(this,t,n,r)},e.utils.object.inherits(e.zelos.MarkerSvg,e.blockRendering.MarkerSvg),e.zelos.MarkerSvg.prototype.showWithInputOutput_=function(t){var n=t.getSourceBlock();t=t.getLocation().getOffsetInBlock(),this.positionCircle_(t.x,t.y),this.setParent_(n),this.showCurrent_()},e.zelos.MarkerSvg.prototype.showWithOutput_=function(t){this.showWithInputOutput_(t)},e.zelos.MarkerSvg.prototype.showWithInput_=function(t){this.showWithInputOutput_(t)},e.zelos.MarkerSvg.prototype.showWithBlock_=function(t){var n=(t=t.getLocation()).getHeightWidth();this.positionRect_(0,0,n.width,n.height),this.setParent_(t),this.showCurrent_()},e.zelos.MarkerSvg.prototype.positionCircle_=function(t,n){this.markerCircle_.setAttribute("cx",t),this.markerCircle_.setAttribute("cy",n),this.currentMarkerSvg=this.markerCircle_},e.zelos.MarkerSvg.prototype.hide=function(){e.zelos.MarkerSvg.superClass_.hide.call(this),this.markerCircle_.style.display="none"},e.zelos.MarkerSvg.prototype.createDomInternal_=function(){if(e.zelos.MarkerSvg.superClass_.createDomInternal_.call(this),this.markerCircle_=e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{r:this.constants_.CURSOR_RADIUS,style:"display: none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var t=this.getBlinkProperties_();e.utils.dom.createSvgElement(e.utils.Svg.ANIMATE,t,this.markerCircle_)}return this.markerSvg_},e.zelos.MarkerSvg.prototype.applyColour_=function(t){e.zelos.MarkerSvg.superClass_.applyColour_.call(this,t),this.markerCircle_.setAttribute("fill",this.colour_),this.markerCircle_.setAttribute("stroke",this.colour_),this.isCursor()&&this.markerCircle_.firstChild.setAttribute("values",this.colour_+";transparent;transparent;")},e.zelos.PathObject=function(t,n,r){e.zelos.PathObject.superClass_.constructor.call(this,t,n,r),this.constants=r,this.svgPathSelected_=null,this.outlines_=Object.create(null),this.outputShapeType=this.remainingOutlines_=null},e.utils.object.inherits(e.zelos.PathObject,e.blockRendering.PathObject),e.zelos.PathObject.prototype.setPath=function(t){e.zelos.PathObject.superClass_.setPath.call(this,t),this.svgPathSelected_&&this.svgPathSelected_.setAttribute("d",t)},e.zelos.PathObject.prototype.applyColour=function(t){for(var n in e.zelos.PathObject.superClass_.applyColour.call(this,t),t.isShadow()&&t.getParent()&&this.svgPath.setAttribute("stroke",t.getParent().style.colourTertiary),this.outlines_)this.outlines_[n].setAttribute("fill",this.style.colourTertiary)},e.zelos.PathObject.prototype.flipRTL=function(){for(var t in e.zelos.PathObject.superClass_.flipRTL.call(this),this.outlines_)this.outlines_[t].setAttribute("transform","scale(-1 1)")},e.zelos.PathObject.prototype.updateSelected=function(t){this.setClass_("blocklySelected",t),t?this.svgPathSelected_||(this.svgPathSelected_=this.svgPath.cloneNode(!0),this.svgPathSelected_.setAttribute("fill","none"),this.svgPathSelected_.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected_)):this.svgPathSelected_&&(this.svgRoot.removeChild(this.svgPathSelected_),this.svgPathSelected_=null)},e.zelos.PathObject.prototype.updateReplacementFade=function(t){this.setClass_("blocklyReplaceable",t),t?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")},e.zelos.PathObject.prototype.updateShapeForInputHighlight=function(t,n){t=t.getParentInput().name,(t=this.getOutlinePath_(t))&&(n?t.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):t.removeAttribute("filter"))},e.zelos.PathObject.prototype.beginDrawing=function(){for(var t in this.remainingOutlines_=Object.create(null),this.outlines_)this.remainingOutlines_[t]=1},e.zelos.PathObject.prototype.endDrawing=function(){if(this.remainingOutlines_)for(var t in this.remainingOutlines_)this.removeOutlinePath_(t);this.remainingOutlines_=null},e.zelos.PathObject.prototype.setOutlinePath=function(t,n){(t=this.getOutlinePath_(t)).setAttribute("d",n),t.setAttribute("fill",this.style.colourTertiary)},e.zelos.PathObject.prototype.getOutlinePath_=function(t){return this.outlines_[t]||(this.outlines_[t]=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines_&&delete this.remainingOutlines_[t],this.outlines_[t]},e.zelos.PathObject.prototype.removeOutlinePath_=function(t){this.outlines_[t].parentNode.removeChild(this.outlines_[t]),delete this.outlines_[t]},e.zelos.Renderer=function(t){e.zelos.Renderer.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.zelos.Renderer,e.blockRendering.Renderer),e.zelos.Renderer.prototype.makeConstants_=function(){return new e.zelos.ConstantProvider},e.zelos.Renderer.prototype.makeRenderInfo_=function(t){return new e.zelos.RenderInfo(this,t)},e.zelos.Renderer.prototype.makeDrawer_=function(t,n){return new e.zelos.Drawer(t,n)},e.zelos.Renderer.prototype.makeMarkerDrawer=function(t,n){return new e.zelos.MarkerSvg(t,this.getConstants(),n)},e.zelos.Renderer.prototype.makePathObject=function(t,n){return new e.zelos.PathObject(t,n,this.getConstants())},e.zelos.Renderer.prototype.shouldHighlightConnection=function(t){return t.type!=e.connectionTypes.INPUT_VALUE&&t.type!==e.connectionTypes.OUTPUT_VALUE},e.zelos.Renderer.prototype.getConnectionPreviewMethod=function(t,n,r){return n.type==e.connectionTypes.OUTPUT_VALUE?t.isConnected()?e.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:e.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:e.zelos.Renderer.superClass_.getConnectionPreviewMethod(t,n,r)},e.blockRendering.register("zelos",e.zelos.Renderer),e.Themes.Dark=e.Theme.defineTheme("dark",{base:e.Themes.Classic,componentStyles:{workspaceBackgroundColour:"#1e1e1e",toolboxBackgroundColour:"blackBackground",toolboxForegroundColour:"#fff",flyoutBackgroundColour:"#252526",flyoutForegroundColour:"#ccc",flyoutOpacity:1,scrollbarColour:"#797979",insertionMarkerColour:"#fff",insertionMarkerOpacity:.3,scrollbarOpacity:.4,cursorColour:"#d0d0d0",blackBackground:"#333"}}),e.Themes.Deuteranopia={},e.Themes.Deuteranopia.defaultBlockStyles={colour_blocks:{colourPrimary:"#f2a72c",colourSecondary:"#f1c172",colourTertiary:"#da921c"},list_blocks:{colourPrimary:"#7d65ab",colourSecondary:"#a88be0",colourTertiary:"#66518e"},logic_blocks:{colourPrimary:"#9fd2f1",colourSecondary:"#c0e0f4",colourTertiary:"#74bae5"},loop_blocks:{colourPrimary:"#795a07",colourSecondary:"#ac8726",colourTertiary:"#c4a03f"},math_blocks:{colourPrimary:"#e6da39",colourSecondary:"#f3ec8e",colourTertiary:"#f2eeb7"},procedure_blocks:{colourPrimary:"#590721",colourSecondary:"#8c475d",colourTertiary:"#885464"},text_blocks:{colourPrimary:"#058863",colourSecondary:"#5ecfaf",colourTertiary:"#04684c"},variable_blocks:{colourPrimary:"#47025a",colourSecondary:"#820fa1",colourTertiary:"#8e579d"},variable_dynamic_blocks:{colourPrimary:"#47025a",colourSecondary:"#820fa1",colourTertiary:"#8e579d"}},e.Themes.Deuteranopia.categoryStyles={colour_category:{colour:"#f2a72c"},list_category:{colour:"#7d65ab"},logic_category:{colour:"#9fd2f1"},loop_category:{colour:"#795a07"},math_category:{colour:"#e6da39"},procedure_category:{colour:"#590721"},text_category:{colour:"#058863"},variable_category:{colour:"#47025a"},variable_dynamic_category:{colour:"#47025a"}},e.Themes.Deuteranopia=new e.Theme("deuteranopia",e.Themes.Deuteranopia.defaultBlockStyles,e.Themes.Deuteranopia.categoryStyles),e.Themes.HighContrast={},e.Themes.HighContrast.defaultBlockStyles={colour_blocks:{colourPrimary:"#a52714",colourSecondary:"#FB9B8C",colourTertiary:"#FBE1DD"},list_blocks:{colourPrimary:"#4a148c",colourSecondary:"#AD7BE9",colourTertiary:"#CDB6E9"},logic_blocks:{colourPrimary:"#01579b",colourSecondary:"#64C7FF",colourTertiary:"#C5EAFF"},loop_blocks:{colourPrimary:"#33691e",colourSecondary:"#9AFF78",colourTertiary:"#E1FFD7"},math_blocks:{colourPrimary:"#1a237e",colourSecondary:"#8A9EFF",colourTertiary:"#DCE2FF"},procedure_blocks:{colourPrimary:"#006064",colourSecondary:"#77E6EE",colourTertiary:"#CFECEE"},text_blocks:{colourPrimary:"#004d40",colourSecondary:"#5ae27c",colourTertiary:"#D2FFDD"},variable_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},variable_dynamic_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},hat_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB",hat:"cap"}},e.Themes.HighContrast.categoryStyles={colour_category:{colour:"#a52714"},list_category:{colour:"#4a148c"},logic_category:{colour:"#01579b"},loop_category:{colour:"#33691e"},math_category:{colour:"#1a237e"},procedure_category:{colour:"#006064"},text_category:{colour:"#004d40"},variable_category:{colour:"#880e4f"},variable_dynamic_category:{colour:"#880e4f"}},e.Themes.HighContrast=new e.Theme("highcontrast",e.Themes.HighContrast.defaultBlockStyles,e.Themes.HighContrast.categoryStyles),e.Themes.HighContrast.setComponentStyle("selectedGlowColour","#000000"),e.Themes.HighContrast.setComponentStyle("selectedGlowSize",1),e.Themes.HighContrast.setComponentStyle("replacementGlowColour","#000000"),e.Themes.HighContrast.setFontStyle({family:null,weight:null,size:16}),e.Themes.Tritanopia={},e.Themes.Tritanopia.defaultBlockStyles={colour_blocks:{colourPrimary:"#05427f",colourSecondary:"#2974c0",colourTertiary:"#2d74bb"},list_blocks:{colourPrimary:"#b69ce8",colourSecondary:"#ccbaef",colourTertiary:"#9176c5"},logic_blocks:{colourPrimary:"#9fd2f1",colourSecondary:"#c0e0f4",colourTertiary:"#74bae5"},loop_blocks:{colourPrimary:"#aa1846",colourSecondary:"#d36185",colourTertiary:"#7c1636"},math_blocks:{colourPrimary:"#e6da39",colourSecondary:"#f3ec8e",colourTertiary:"#f2eeb7"},procedure_blocks:{colourPrimary:"#590721",colourSecondary:"#8c475d",colourTertiary:"#885464"},text_blocks:{colourPrimary:"#058863",colourSecondary:"#5ecfaf",colourTertiary:"#04684c"},variable_blocks:{colourPrimary:"#4b2d84",colourSecondary:"#816ea7",colourTertiary:"#83759e"},variable_dynamic_blocks:{colourPrimary:"#4b2d84",colourSecondary:"#816ea7",colourTertiary:"#83759e"}},e.Themes.Tritanopia.categoryStyles={colour_category:{colour:"#05427f"},list_category:{colour:"#b69ce8"},logic_category:{colour:"#9fd2f1"},loop_category:{colour:"#aa1846"},math_category:{colour:"#e6da39"},procedure_category:{colour:"#590721"},text_category:{colour:"#058863"},variable_category:{colour:"#4b2d84"},variable_dynamic_category:{colour:"#4b2d84"}},e.Themes.Tritanopia=new e.Theme("tritanopia",e.Themes.Tritanopia.defaultBlockStyles,e.Themes.Tritanopia.categoryStyles),e.requires={},e}.apply($,[]))&&(U.exports=_)},24773:function(U,$,m){var _,e;_=[m(93677)],void 0!==(e=function(t){"use strict";return t.Blocks={},t.Blocks}.apply($,_))&&(U.exports=e)},93677:function(U,$,m){var _,e;_=[m(46251)],void 0!==(e=function(t){"use strict";return t.Blocks.colour={},t.Constants={},t.Constants.Colour={},t.Constants.Colour.HUE=20,t.defineBlocksWithJsonArray([{type:"colour_picker",message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"colour_random",message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"},{type:"colour_rgb",message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"RIGHT"},{type:"input_value",name:"GREEN",check:"Number",align:"RIGHT"},{type:"input_value",name:"BLUE",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"},{type:"colour_blend",message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"RIGHT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"RIGHT"},{type:"input_value",name:"RATIO",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"}]),t.Constants.Lists={},t.Constants.Lists.HUE=260,t.defineBlocksWithJsonArray([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),t.Blocks.lists_create_with={init:function(){this.setHelpUrl(t.Msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new t.Mutator(["lists_create_with_item"])),this.setTooltip(t.Msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("items",this.itemCount_),n},domToMutation:function(n){this.itemCount_=parseInt(n.getAttribute("items"),10),this.updateShape_()},decompose:function(n){var r=n.newBlock("lists_create_with_container");r.initSvg();for(var s=r.getInput("STACK").connection,u=0;u<this.itemCount_;u++){var b=n.newBlock("lists_create_with_item");b.initSvg(),s.connect(b.previousConnection),s=b.nextConnection}return r},compose:function(n){var r=n.getInputTargetBlock("STACK");for(n=[];r&&!r.isInsertionMarker();)n.push(r.valueConnection_),r=r.nextConnection&&r.nextConnection.targetBlock();for(r=0;r<this.itemCount_;r++){var s=this.getInput("ADD"+r).connection.targetConnection;s&&-1==n.indexOf(s)&&s.disconnect()}for(this.itemCount_=n.length,this.updateShape_(),r=0;r<this.itemCount_;r++)t.Mutator.reconnect(n[r],this,"ADD"+r)},saveConnections:function(n){n=n.getInputTargetBlock("STACK");for(var r=0;n;){var s=this.getInput("ADD"+r);n.valueConnection_=s&&s.connection.targetConnection,r++,n=n.nextConnection&&n.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(t.Msg.LISTS_CREATE_EMPTY_TITLE);for(var n=0;n<this.itemCount_;n++)if(!this.getInput("ADD"+n)){var r=this.appendValueInput("ADD"+n).setAlign(t.ALIGN_RIGHT);0==n&&r.appendField(t.Msg.LISTS_CREATE_WITH_INPUT_WITH)}for(;this.getInput("ADD"+n);)this.removeInput("ADD"+n),n++}},t.Blocks.lists_create_with_container={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(t.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(t.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}},t.Blocks.lists_create_with_item={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(t.Msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(t.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}},t.Blocks.lists_indexOf={init:function(){var n=[[t.Msg.LISTS_INDEX_OF_FIRST,"FIRST"],[t.Msg.LISTS_INDEX_OF_LAST,"LAST"]];this.setHelpUrl(t.Msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(t.Msg.LISTS_INDEX_OF_INPUT_IN_LIST),this.appendValueInput("FIND").appendField(new t.FieldDropdown(n),"END"),this.setInputsInline(!0);var r=this;this.setTooltip(function(){return t.Msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",r.workspace.options.oneBasedIndex?"0":"-1")})}},t.Blocks.lists_getIndex={init:function(){var n=[[t.Msg.LISTS_GET_INDEX_GET,"GET"],[t.Msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[t.Msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[t.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[t.Msg.LISTS_GET_INDEX_LAST,"LAST"],[t.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(t.Msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),n=new t.FieldDropdown(n,function(s){s="REMOVE"==s,this.getSourceBlock().updateStatement_(s)}),this.appendValueInput("VALUE").setCheck("Array").appendField(t.Msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(n,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),t.Msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(t.Msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0);var r=this;this.setTooltip(function(){var s=r.getFieldValue("MODE"),u=r.getFieldValue("WHERE"),b="";switch(s+" "+u){case"GET FROM_START":case"GET FROM_END":b=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":b=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":b=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":b=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":b=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":b=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":b=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":b=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":b=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":b=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":b=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":b=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return("FROM_START"==u||"FROM_END"==u)&&(b+="  "+("FROM_START"==u?t.Msg.LISTS_INDEX_FROM_START_TOOLTIP:t.Msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",r.workspace.options.oneBasedIndex?"#1":"#0")),b})},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");n.setAttribute("statement",!this.outputConnection);var r=this.getInput("AT").type==t.INPUT_VALUE;return n.setAttribute("at",r),n},domToMutation:function(n){var r="true"==n.getAttribute("statement");this.updateStatement_(r),n="false"!=n.getAttribute("at"),this.updateAt_(n)},updateStatement_:function(n){n!=!this.outputConnection&&(this.unplug(!0,!0),n?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(n){this.removeInput("AT"),this.removeInput("ORDINAL",!0),n?(this.appendValueInput("AT").setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var r=new t.FieldDropdown(this.WHERE_OPTIONS,function(s){var u="FROM_START"==s||"FROM_END"==s;if(u!=n){var b=this.getSourceBlock();return b.updateAt_(u),b.setFieldValue(s,"WHERE"),null}});this.getInput("AT").appendField(r,"WHERE"),t.Msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}},t.Blocks.lists_setIndex={init:function(){var n=[[t.Msg.LISTS_SET_INDEX_SET,"SET"],[t.Msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[t.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[t.Msg.LISTS_GET_INDEX_LAST,"LAST"],[t.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(t.Msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(t.Msg.LISTS_SET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(new t.FieldDropdown(n),"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(t.Msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(t.Msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0);var r=this;this.setTooltip(function(){var s=r.getFieldValue("MODE"),u=r.getFieldValue("WHERE"),b="";switch(s+" "+u){case"SET FROM_START":case"SET FROM_END":b=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":b=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":b=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":b=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":b=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":b=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":b=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":b=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return("FROM_START"==u||"FROM_END"==u)&&(b+="  "+t.Msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",r.workspace.options.oneBasedIndex?"#1":"#0")),b})},mutationToDom:function(){var n=t.utils.xml.createElement("mutation"),r=this.getInput("AT").type==t.INPUT_VALUE;return n.setAttribute("at",r),n},domToMutation:function(n){n="false"!=n.getAttribute("at"),this.updateAt_(n)},updateAt_:function(n){this.removeInput("AT"),this.removeInput("ORDINAL",!0),n?(this.appendValueInput("AT").setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var r=new t.FieldDropdown(this.WHERE_OPTIONS,function(s){var u="FROM_START"==s||"FROM_END"==s;if(u!=n){var b=this.getSourceBlock();return b.updateAt_(u),b.setFieldValue(s,"WHERE"),null}});this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO"),this.getInput("AT").appendField(r,"WHERE")}},t.Blocks.lists_getSublist={init:function(){this.WHERE_OPTIONS_1=[[t.Msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[t.Msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(t.Msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(t.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),t.Msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(t.Msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(t.Msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){var n=t.utils.xml.createElement("mutation"),r=this.getInput("AT1").type==t.INPUT_VALUE;return n.setAttribute("at1",r),r=this.getInput("AT2").type==t.INPUT_VALUE,n.setAttribute("at2",r),n},domToMutation:function(n){var r="true"==n.getAttribute("at1");n="true"==n.getAttribute("at2"),this.updateAt_(1,r),this.updateAt_(2,n)},updateAt_:function(n,r){this.removeInput("AT"+n),this.removeInput("ORDINAL"+n,!0),r?(this.appendValueInput("AT"+n).setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+n).appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+n);var s=new t.FieldDropdown(this["WHERE_OPTIONS_"+n],function(u){var b="FROM_START"==u||"FROM_END"==u;if(b!=r){var x=this.getSourceBlock();return x.updateAt_(n,b),x.setFieldValue(u,"WHERE"+n),null}});this.getInput("AT"+n).appendField(s,"WHERE"+n),1==n&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2")),t.Msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}},t.Blocks.lists_sort={init:function(){this.jsonInit({message0:t.Msg.LISTS_SORT_TITLE,args0:[{type:"field_dropdown",name:"TYPE",options:[[t.Msg.LISTS_SORT_TYPE_NUMERIC,"NUMERIC"],[t.Msg.LISTS_SORT_TYPE_TEXT,"TEXT"],[t.Msg.LISTS_SORT_TYPE_IGNORECASE,"IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[[t.Msg.LISTS_SORT_ORDER_ASCENDING,"1"],[t.Msg.LISTS_SORT_ORDER_DESCENDING,"-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:t.Msg.LISTS_SORT_TOOLTIP,helpUrl:t.Msg.LISTS_SORT_HELPURL})}},t.Blocks.lists_split={init:function(){var n=this,r=new t.FieldDropdown([[t.Msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[t.Msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]],function(s){n.updateType_(s)});this.setHelpUrl(t.Msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(r,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(t.Msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(function(){var s=n.getFieldValue("MODE");if("SPLIT"==s)return t.Msg.LISTS_SPLIT_TOOLTIP_SPLIT;if("JOIN"==s)return t.Msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+s)})},updateType_:function(n){if(this.getFieldValue("MODE")!=n){var r=this.getInput("INPUT").connection;r.setShadowDom(null);var s=r.targetBlock();s&&(r.disconnect(),s.isShadow()?s.dispose():this.bumpNeighbours())}"SPLIT"==n?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("mode",this.getFieldValue("MODE")),n},domToMutation:function(n){this.updateType_(n.getAttribute("mode"))}},t.Blocks.logic={},t.Constants.Logic={},t.Constants.Logic.HUE=210,t.defineBlocksWithJsonArray([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["\u2260","NEQ"],["\u200f<","LT"],["\u200f\u2264","LTE"],["\u200f>","GT"],["\u200f\u2265","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]}]),t.defineBlocksWithJsonArray([{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]),t.Constants.Logic.TOOLTIPS_BY_OP={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"},t.Extensions.register("logic_op_tooltip",t.Extensions.buildTooltipForDropdown("OP",t.Constants.Logic.TOOLTIPS_BY_OP)),t.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN={elseifCount_:0,elseCount_:0,suppressPrefixSuffix:!0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;var n=t.utils.xml.createElement("mutation");return this.elseifCount_&&n.setAttribute("elseif",this.elseifCount_),this.elseCount_&&n.setAttribute("else",1),n},domToMutation:function(n){this.elseifCount_=parseInt(n.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(n.getAttribute("else"),10)||0,this.rebuildShape_()},decompose:function(n){var r=n.newBlock("controls_if_if");r.initSvg();for(var s=r.nextConnection,u=1;u<=this.elseifCount_;u++){var b=n.newBlock("controls_if_elseif");b.initSvg(),s.connect(b.previousConnection),s=b.nextConnection}return this.elseCount_&&((n=n.newBlock("controls_if_else")).initSvg(),s.connect(n.previousConnection)),r},compose:function(n){n=n.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;for(var r=[null],s=[null],u=null;n&&!n.isInsertionMarker();){switch(n.type){case"controls_if_elseif":this.elseifCount_++,r.push(n.valueConnection_),s.push(n.statementConnection_);break;case"controls_if_else":this.elseCount_++,u=n.statementConnection_;break;default:throw TypeError("Unknown block type: "+n.type)}n=n.nextConnection&&n.nextConnection.targetBlock()}this.updateShape_(),this.reconnectChildBlocks_(r,s,u)},saveConnections:function(n){n=n.nextConnection.targetBlock();for(var r=1;n;){switch(n.type){case"controls_if_elseif":var s=this.getInput("IF"+r),u=this.getInput("DO"+r);n.valueConnection_=s&&s.connection.targetConnection,n.statementConnection_=u&&u.connection.targetConnection,r++;break;case"controls_if_else":u=this.getInput("ELSE"),n.statementConnection_=u&&u.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+n.type)}n=n.nextConnection&&n.nextConnection.targetBlock()}},rebuildShape_:function(){var n=[null],r=[null],s=null;this.getInput("ELSE")&&(s=this.getInput("ELSE").connection.targetConnection);for(var u=1;this.getInput("IF"+u);){var b=this.getInput("IF"+u),x=this.getInput("DO"+u);n.push(b.connection.targetConnection),r.push(x.connection.targetConnection),u++}this.updateShape_(),this.reconnectChildBlocks_(n,r,s)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var n=1;this.getInput("IF"+n);)this.removeInput("IF"+n),this.removeInput("DO"+n),n++;for(n=1;n<=this.elseifCount_;n++)this.appendValueInput("IF"+n).setCheck("Boolean").appendField(t.Msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+n).appendField(t.Msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(t.Msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(n,r,s){for(var u=1;u<=this.elseifCount_;u++)t.Mutator.reconnect(n[u],this,"IF"+u),t.Mutator.reconnect(r[u],this,"DO"+u);t.Mutator.reconnect(s,this,"ELSE")}},t.Extensions.registerMutator("controls_if_mutator",t.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN,null,["controls_if_elseif","controls_if_else"]),t.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION=function(){this.setTooltip(function(){return this.elseifCount_||this.elseCount_?!this.elseifCount_&&this.elseCount_?t.Msg.CONTROLS_IF_TOOLTIP_2:this.elseifCount_&&!this.elseCount_?t.Msg.CONTROLS_IF_TOOLTIP_3:this.elseifCount_&&this.elseCount_?t.Msg.CONTROLS_IF_TOOLTIP_4:"":t.Msg.CONTROLS_IF_TOOLTIP_1}.bind(this))},t.Extensions.register("controls_if_tooltip",t.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION),t.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN={onchange:function(n){this.prevBlocks_||(this.prevBlocks_=[null,null]);var r=this.getInputTargetBlock("A"),s=this.getInputTargetBlock("B");r&&s&&!this.workspace.connectionChecker.doTypeChecks(r.outputConnection,s.outputConnection)&&(t.Events.setGroup(n.group),(n=this.prevBlocks_[0])!==r&&(r.unplug(),!n||n.isDisposed()||n.isShadow()||this.getInput("A").connection.connect(n.outputConnection)),(r=this.prevBlocks_[1])!==s&&(s.unplug(),!r||r.isDisposed()||r.isShadow()||this.getInput("B").connection.connect(r.outputConnection)),this.bumpNeighbours(),t.Events.setGroup(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},t.Constants.Logic.LOGIC_COMPARE_EXTENSION=function(){this.mixin(t.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN)},t.Extensions.register("logic_compare",t.Constants.Logic.LOGIC_COMPARE_EXTENSION),t.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN={prevParentConnection_:null,onchange:function(n){var r=this.getInputTargetBlock("THEN"),s=this.getInputTargetBlock("ELSE"),u=this.outputConnection.targetConnection;if((r||s)&&u)for(var b=0;2>b;b++){var x=1==b?r:s;x&&!x.workspace.connectionChecker.doTypeChecks(x.outputConnection,u)&&(t.Events.setGroup(n.group),u===this.prevParentConnection_?(this.unplug(),u.getSourceBlock().bumpNeighbours()):(x.unplug(),x.bumpNeighbours()),t.Events.setGroup(!1))}this.prevParentConnection_=u}},t.Extensions.registerMixin("logic_ternary",t.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN),t.Blocks.loops={},t.Constants.Loops={},t.Constants.Loops.HUE=120,t.defineBlocksWithJsonArray([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]),t.Constants.Loops.WHILE_UNTIL_TOOLTIPS={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"},t.Extensions.register("controls_whileUntil_tooltip",t.Extensions.buildTooltipForDropdown("MODE",t.Constants.Loops.WHILE_UNTIL_TOOLTIPS)),t.Constants.Loops.BREAK_CONTINUE_TOOLTIPS={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"},t.Extensions.register("controls_flow_tooltip",t.Extensions.buildTooltipForDropdown("FLOW",t.Constants.Loops.BREAK_CONTINUE_TOOLTIPS)),t.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN={customContextMenu:function(n){if(!this.isInFlyout){var r=this.getField("VAR").getVariable(),s=r.name;if(!this.isCollapsed()&&null!=s){var u={enabled:!0};u.text=t.Msg.VARIABLES_SET_CREATE_GET.replace("%1",s),r=t.Variables.generateVariableFieldDom(r),(s=t.utils.xml.createElement("block")).setAttribute("type","variables_get"),s.appendChild(r),u.callback=t.ContextMenu.callbackFactory(this,s),n.push(u)}}}},t.Extensions.registerMixin("contextMenu_newGetVariableBlock",t.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN),t.Extensions.register("controls_for_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),t.Extensions.register("controls_forEach_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR")),t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN={LOOP_TYPES:["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"],suppressPrefixSuffix:!0,getSurroundLoop:function(n){do{if(-1!=t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.LOOP_TYPES.indexOf(n.type))return n;n=n.getSurroundParent()}while(n);return null},onchange:function(n){if(this.workspace.isDragging&&!this.workspace.isDragging()&&n.type==t.Events.BLOCK_MOVE){var r=t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(this);if(this.setWarningText(r?null:t.Msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout){var s=t.Events.getGroup();t.Events.setGroup(n.group),this.setEnabled(r),t.Events.setGroup(s)}}}},t.Extensions.registerMixin("controls_flow_in_loop_check",t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN),t.Blocks.math={},t.Constants.Math={},t.Constants.Math.HUE=230,t.defineBlocksWithJsonArray([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["\u03c0","PI"],["e","E"],["\u03c6","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(\xbd)","SQRT1_2"],["\u221e","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]),t.Constants.Math.TOOLTIPS_BY_OP={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"},t.Extensions.register("math_op_tooltip",t.Extensions.buildTooltipForDropdown("OP",t.Constants.Math.TOOLTIPS_BY_OP)),t.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN={mutationToDom:function(){var n=t.utils.xml.createElement("mutation"),r="DIVISIBLE_BY"==this.getFieldValue("PROPERTY");return n.setAttribute("divisor_input",r),n},domToMutation:function(n){n="true"==n.getAttribute("divisor_input"),this.updateShape_(n)},updateShape_:function(n){var r=this.getInput("DIVISOR");n?r||this.appendValueInput("DIVISOR").setCheck("Number"):r&&this.removeInput("DIVISOR")}},t.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION=function(){this.getField("PROPERTY").setValidator(function(n){n="DIVISIBLE_BY"==n,this.getSourceBlock().updateShape_(n)})},t.Extensions.registerMutator("math_is_divisibleby_mutator",t.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN,t.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION),t.Extensions.register("math_change_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_MATH_CHANGE_TOOLTIP}","VAR")),t.Constants.Math.LIST_MODES_MUTATOR_MIXIN={updateType_:function(n){this.outputConnection.setCheck("MODE"==n?"Array":"Number")},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("op",this.getFieldValue("OP")),n},domToMutation:function(n){this.updateType_(n.getAttribute("op"))}},t.Constants.Math.LIST_MODES_MUTATOR_EXTENSION=function(){this.getField("OP").setValidator(function(n){this.updateType_(n)}.bind(this))},t.Extensions.registerMutator("math_modes_of_list_mutator",t.Constants.Math.LIST_MODES_MUTATOR_MIXIN,t.Constants.Math.LIST_MODES_MUTATOR_EXTENSION),t.Blocks.procedures={},t.Blocks.procedures_defnoreturn={init:function(){var n=t.Procedures.findLegalName("",this);(n=new t.FieldTextInput(n,t.Procedures.rename)).setSpellcheck(!1),this.appendDummyInput().appendField(t.Msg.PROCEDURES_DEFNORETURN_TITLE).appendField(n,"NAME").appendField("","PARAMS"),this.setMutator(new t.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&t.Msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(t.Msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(t.Msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:function(n){this.hasStatements_!==n&&(n?(this.appendStatementInput("STACK").appendField(t.Msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=n)},updateParams_:function(){var n="";this.arguments_.length&&(n=t.Msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),t.Events.disable();try{this.setFieldValue(n,"PARAMS")}finally{t.Events.enable()}},mutationToDom:function(n){var r=t.utils.xml.createElement("mutation");n&&r.setAttribute("name",this.getFieldValue("NAME"));for(var s=0;s<this.argumentVarModels_.length;s++){var u=t.utils.xml.createElement("arg"),b=this.argumentVarModels_[s];u.setAttribute("name",b.name),u.setAttribute("varid",b.getId()),n&&this.paramIds_&&u.setAttribute("paramId",this.paramIds_[s]),r.appendChild(u)}return this.hasStatements_||r.setAttribute("statements","false"),r},domToMutation:function(n){this.arguments_=[],this.argumentVarModels_=[];for(var s,r=0;s=n.childNodes[r];r++)if("arg"==s.nodeName.toLowerCase()){var u=s.getAttribute("name");s=s.getAttribute("varid")||s.getAttribute("varId"),this.arguments_.push(u),null!=(s=t.Variables.getOrCreateVariablePackage(this.workspace,s,u,""))?this.argumentVarModels_.push(s):console.log("Failed to create a variable with name "+u+", ignoring.")}this.updateParams_(),t.Procedures.mutateCallers(this),this.setStatements_("false"!==n.getAttribute("statements"))},decompose:function(n){var r=t.utils.xml.createElement("block");r.setAttribute("type","procedures_mutatorcontainer");var s=t.utils.xml.createElement("statement");s.setAttribute("name","STACK"),r.appendChild(s);for(var u=0;u<this.arguments_.length;u++){var b=t.utils.xml.createElement("block");b.setAttribute("type","procedures_mutatorarg");var x=t.utils.xml.createElement("field");x.setAttribute("name","NAME");var B=t.utils.xml.createTextNode(this.arguments_[u]);x.appendChild(B),b.appendChild(x),x=t.utils.xml.createElement("next"),b.appendChild(x),s.appendChild(b),s=x}return n=t.Xml.domToBlock(r,n),"procedures_defreturn"==this.type?n.setFieldValue(this.hasStatements_,"STATEMENTS"):n.removeInput("STATEMENT_INPUT"),t.Procedures.mutateCallers(this),n},compose:function(n){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];for(var r=n.getInputTargetBlock("STACK");r&&!r.isInsertionMarker();){var s=r.getFieldValue("NAME");this.arguments_.push(s),s=this.workspace.getVariable(s,""),this.argumentVarModels_.push(s),this.paramIds_.push(r.id),r=r.nextConnection&&r.nextConnection.targetBlock()}this.updateParams_(),t.Procedures.mutateCallers(this),null!==(n=n.getFieldValue("STATEMENTS"))&&this.hasStatements_!=(n="TRUE"==n)&&(n?(this.setStatements_(!0),t.Mutator.reconnect(this.statementConnection_,this,"STACK"),this.statementConnection_=null):(n=this.getInput("STACK").connection,(this.statementConnection_=n.targetConnection)&&((n=n.targetBlock()).unplug(),n.bumpNeighbours()),this.setStatements_(!1)))},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(n,r){var s=this.workspace.getVariableById(n);if(""==s.type){s=s.name,r=this.workspace.getVariableById(r);for(var u=!1,b=0;b<this.argumentVarModels_.length;b++)this.argumentVarModels_[b].getId()==n&&(this.arguments_[b]=r.name,this.argumentVarModels_[b]=r,u=!0);u&&(this.displayRenamedVar_(s,r.name),t.Procedures.mutateCallers(this))}},updateVarName:function(n){for(var r=n.name,s=!1,u=0;u<this.argumentVarModels_.length;u++)if(this.argumentVarModels_[u].getId()==n.getId()){var b=this.arguments_[u];this.arguments_[u]=r,s=!0}s&&(this.displayRenamedVar_(b,r),t.Procedures.mutateCallers(this))},displayRenamedVar_:function(n,r){if(this.updateParams_(),this.mutator&&this.mutator.isVisible())for(var b,s=this.mutator.workspace_.getAllBlocks(!1),u=0;b=s[u];u++)"procedures_mutatorarg"==b.type&&t.Names.equals(n,b.getFieldValue("NAME"))&&b.setFieldValue(r,"NAME")},customContextMenu:function(n){if(!this.isInFlyout){var r={enabled:!0},s=this.getFieldValue("NAME");r.text=t.Msg.PROCEDURES_CREATE_DO.replace("%1",s);var u=t.utils.xml.createElement("mutation");for(u.setAttribute("name",s),s=0;s<this.arguments_.length;s++){var b=t.utils.xml.createElement("arg");b.setAttribute("name",this.arguments_[s]),u.appendChild(b)}if((s=t.utils.xml.createElement("block")).setAttribute("type",this.callType_),s.appendChild(u),r.callback=t.ContextMenu.callbackFactory(this,s),n.push(r),!this.isCollapsed())for(s=0;s<this.argumentVarModels_.length;s++)(r={enabled:!0}).text=t.Msg.VARIABLES_SET_CREATE_GET.replace("%1",(u=this.argumentVarModels_[s]).name),u=t.Variables.generateVariableFieldDom(u),(b=t.utils.xml.createElement("block")).setAttribute("type","variables_get"),b.appendChild(u),r.callback=t.ContextMenu.callbackFactory(this,b),n.push(r)}},callType_:"procedures_callnoreturn"},t.Blocks.procedures_defreturn={init:function(){var n=t.Procedures.findLegalName("",this);(n=new t.FieldTextInput(n,t.Procedures.rename)).setSpellcheck(!1),this.appendDummyInput().appendField(t.Msg.PROCEDURES_DEFRETURN_TITLE).appendField(n,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(t.ALIGN_RIGHT).appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new t.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&t.Msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(t.Msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(t.Msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:t.Blocks.procedures_defnoreturn.setStatements_,updateParams_:t.Blocks.procedures_defnoreturn.updateParams_,mutationToDom:t.Blocks.procedures_defnoreturn.mutationToDom,domToMutation:t.Blocks.procedures_defnoreturn.domToMutation,decompose:t.Blocks.procedures_defnoreturn.decompose,compose:t.Blocks.procedures_defnoreturn.compose,getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},getVars:t.Blocks.procedures_defnoreturn.getVars,getVarModels:t.Blocks.procedures_defnoreturn.getVarModels,renameVarById:t.Blocks.procedures_defnoreturn.renameVarById,updateVarName:t.Blocks.procedures_defnoreturn.updateVarName,displayRenamedVar_:t.Blocks.procedures_defnoreturn.displayRenamedVar_,customContextMenu:t.Blocks.procedures_defnoreturn.customContextMenu,callType_:"procedures_callreturn"},t.Blocks.procedures_mutatorcontainer={init:function(){this.appendDummyInput().appendField(t.Msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(t.Msg.PROCEDURES_ALLOW_STATEMENTS).appendField(new t.FieldCheckbox("TRUE"),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}},t.Blocks.procedures_mutatorarg={init:function(){var n=new t.FieldTextInput(t.Procedures.DEFAULT_ARG,this.validator_);n.oldShowEditorFn_=n.showEditor_,n.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(t.Msg.PROCEDURES_MUTATORARG_TITLE).appendField(n,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,n.onFinishEditing_=this.deleteIntermediateVars_,n.createdVariables_=[],n.onFinishEditing_("x")},validator_:function(n){var r=this.getSourceBlock(),s=t.Mutator.findParentWs(r.workspace);if(!(n=n.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,"")))return null;for(var u=(r.workspace.targetWorkspace||r.workspace).getAllBlocks(!1),b=n.toLowerCase(),x=0;x<u.length;x++)if(u[x].id!=this.getSourceBlock().id){var B=u[x].getFieldValue("NAME");if(B&&B.toLowerCase()==b)return null}return r.isInFlyout||((r=s.getVariable(n,""))&&r.name!=n&&s.renameVariableById(r.getId(),n),r||(r=s.createVariable(n,""))&&this.createdVariables_&&this.createdVariables_.push(r)),n},deleteIntermediateVars_:function(n){var r=t.Mutator.findParentWs(this.getSourceBlock().workspace);if(r)for(var s=0;s<this.createdVariables_.length;s++){var u=this.createdVariables_[s];u.name!=n&&r.deleteVariableById(u.getId())}}},t.Blocks.procedures_callnoreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(t.Msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(n,r){t.Names.equals(n,this.getProcedureCall())&&(this.setFieldValue(r,"NAME"),this.setTooltip((this.outputConnection?t.Msg.PROCEDURES_CALLRETURN_TOOLTIP:t.Msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",r)))},setProcedureParameters_:function(n,r){var s=t.Procedures.getDefinition(this.getProcedureCall(),this.workspace),u=s&&s.mutator&&s.mutator.isVisible();if(u||(this.quarkConnections_={},this.quarkIds_=null),r)if(n.join("\n")==this.arguments_.join("\n"))this.quarkIds_=r;else{if(r.length!=n.length)throw RangeError("paramNames and paramIds must be the same length.");this.setCollapsed(!1),this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]),s=this.rendered,this.rendered=!1;for(var b=0;b<this.arguments_.length;b++){var x=this.getInput("ARG"+b);x&&(this.quarkConnections_[this.quarkIds_[b]]=x=x.connection.targetConnection,u&&x&&-1==r.indexOf(this.quarkIds_[b])&&(x.disconnect(),x.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(n),this.argumentVarModels_=[],b=0;b<this.arguments_.length;b++)n=t.Variables.getOrCreateVariablePackage(this.workspace,null,this.arguments_[b],""),this.argumentVarModels_.push(n);if(this.updateShape_(),this.quarkIds_=r)for(b=0;b<this.arguments_.length;b++)(r=this.quarkIds_[b])in this.quarkConnections_&&(t.Mutator.reconnect(x=this.quarkConnections_[r],this,"ARG"+b)||delete this.quarkConnections_[r]);(this.rendered=s)&&this.render()}},updateShape_:function(){for(var n=0;n<this.arguments_.length;n++){var r=this.getField("ARGNAME"+n);if(r){t.Events.disable();try{r.setValue(this.arguments_[n])}finally{t.Events.enable()}}else r=new t.FieldLabel(this.arguments_[n]),this.appendValueInput("ARG"+n).setAlign(t.ALIGN_RIGHT).appendField(r,"ARGNAME"+n).init()}for(;this.getInput("ARG"+n);)this.removeInput("ARG"+n),n++;(n=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||(n.appendField(t.Msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),n.init()):this.getField("WITH")&&n.removeField("WITH"))},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");n.setAttribute("name",this.getProcedureCall());for(var r=0;r<this.arguments_.length;r++){var s=t.utils.xml.createElement("arg");s.setAttribute("name",this.arguments_[r]),n.appendChild(s)}return n},domToMutation:function(n){var r=n.getAttribute("name");this.renameProcedure(this.getProcedureCall(),r),r=[];for(var b,s=[],u=0;b=n.childNodes[u];u++)"arg"==b.nodeName.toLowerCase()&&(r.push(b.getAttribute("name")),s.push(b.getAttribute("paramId")));this.setProcedureParameters_(r,s)},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(n){if(this.workspace&&!this.workspace.isFlyout&&n.recordUndo)if(n.type==t.Events.BLOCK_CREATE&&-1!=n.ids.indexOf(this.id)){var r=this.getProcedureCall();if(!(r=t.Procedures.getDefinition(r,this.workspace))||r.type==this.defType_&&JSON.stringify(r.getVars())==JSON.stringify(this.arguments_)||(r=null),!r){t.Events.setGroup(n.group),n=t.utils.xml.createElement("xml"),(r=t.utils.xml.createElement("block")).setAttribute("type",this.defType_);var s=this.getRelativeToSurfaceXY(),u=s.y+2*t.SNAP_RADIUS;r.setAttribute("x",s.x+t.SNAP_RADIUS*(this.RTL?-1:1)),r.setAttribute("y",u),s=this.mutationToDom(),r.appendChild(s),(s=t.utils.xml.createElement("field")).setAttribute("name","NAME"),(u=this.getProcedureCall())||(u=t.Procedures.findLegalName("",this),this.renameProcedure("",u)),s.appendChild(t.utils.xml.createTextNode(u)),r.appendChild(s),n.appendChild(r),t.Xml.domToWorkspace(n,this.workspace),t.Events.setGroup(!1)}}else n.type==t.Events.BLOCK_DELETE?(r=this.getProcedureCall(),(r=t.Procedures.getDefinition(r,this.workspace))||(t.Events.setGroup(n.group),this.dispose(!0),t.Events.setGroup(!1))):n.type==t.Events.CHANGE&&"disabled"==n.element&&(r=this.getProcedureCall(),(r=t.Procedures.getDefinition(r,this.workspace))&&r.id==n.blockId&&((r=t.Events.getGroup())&&console.log("Saw an existing group while responding to a definition change"),t.Events.setGroup(n.group),n.newValue?(this.previousEnabledState_=this.isEnabled(),this.setEnabled(!1)):this.setEnabled(this.previousEnabledState_),t.Events.setGroup(r)))},customContextMenu:function(n){if(this.workspace.isMovable()){var r={enabled:!0};r.text=t.Msg.PROCEDURES_HIGHLIGHT_DEF;var s=this.getProcedureCall(),u=this.workspace;r.callback=function(){var b=t.Procedures.getDefinition(s,u);b&&(u.centerOnBlock(b.id),b.select())},n.push(r)}},defType_:"procedures_defnoreturn"},t.Blocks.procedures_callreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(t.Msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},getProcedureCall:t.Blocks.procedures_callnoreturn.getProcedureCall,renameProcedure:t.Blocks.procedures_callnoreturn.renameProcedure,setProcedureParameters_:t.Blocks.procedures_callnoreturn.setProcedureParameters_,updateShape_:t.Blocks.procedures_callnoreturn.updateShape_,mutationToDom:t.Blocks.procedures_callnoreturn.mutationToDom,domToMutation:t.Blocks.procedures_callnoreturn.domToMutation,getVars:t.Blocks.procedures_callnoreturn.getVars,getVarModels:t.Blocks.procedures_callnoreturn.getVarModels,onchange:t.Blocks.procedures_callnoreturn.onchange,customContextMenu:t.Blocks.procedures_callnoreturn.customContextMenu,defType_:"procedures_defreturn"},t.Blocks.procedures_ifreturn={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(t.Msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(t.Msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("value",Number(this.hasReturnValue_)),n},domToMutation:function(n){this.hasReturnValue_=1==n.getAttribute("value"),this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(n){if(this.workspace.isDragging&&!this.workspace.isDragging()){n=!1;var r=this;do{if(-1!=this.FUNCTION_TYPES.indexOf(r.type)){n=!0;break}r=r.getSurroundParent()}while(r);n?("procedures_defnoreturn"==r.type&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):"procedures_defreturn"!=r.type||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null),this.isInFlyout||this.setEnabled(!0)):(this.setWarningText(t.Msg.PROCEDURES_IFRETURN_WARNING),this.isInFlyout||this.getInheritedDisabled()||this.setEnabled(!1))}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]},t.Blocks.texts={},t.Constants.Text={},t.Constants.Text.HUE=160,t.defineBlocksWithJsonArray([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_multiline",message0:"%1 %2",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=",width:12,height:17,alt:"\xb6"},{type:"field_multilinetext",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),t.Blocks.text_getSubstring={init:function(){this.WHERE_OPTIONS_1=[[t.Msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[t.Msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[t.Msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[t.Msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[t.Msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[t.Msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(t.Msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(t.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),t.Msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(t.Msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(t.Msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){var n=t.utils.xml.createElement("mutation"),r=this.getInput("AT1").type==t.INPUT_VALUE;return n.setAttribute("at1",r),r=this.getInput("AT2").type==t.INPUT_VALUE,n.setAttribute("at2",r),n},domToMutation:function(n){var r="true"==n.getAttribute("at1");n="true"==n.getAttribute("at2"),this.updateAt_(1,r),this.updateAt_(2,n)},updateAt_:function(n,r){this.removeInput("AT"+n),this.removeInput("ORDINAL"+n,!0),r?(this.appendValueInput("AT"+n).setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+n).appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+n),2==n&&t.Msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(t.Msg.TEXT_GET_SUBSTRING_TAIL));var s=new t.FieldDropdown(this["WHERE_OPTIONS_"+n],function(u){var b="FROM_START"==u||"FROM_END"==u;if(b!=r){var x=this.getSourceBlock();return x.updateAt_(n,b),x.setFieldValue(u,"WHERE"+n),null}});this.getInput("AT"+n).appendField(s,"WHERE"+n),1==n&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"))}},t.Blocks.text_changeCase={init:function(){var n=[[t.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[t.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[t.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(t.Msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new t.FieldDropdown(n),"CASE"),this.setOutput(!0,"String"),this.setTooltip(t.Msg.TEXT_CHANGECASE_TOOLTIP)}},t.Blocks.text_trim={init:function(){var n=[[t.Msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[t.Msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[t.Msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(t.Msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new t.FieldDropdown(n),"MODE"),this.setOutput(!0,"String"),this.setTooltip(t.Msg.TEXT_TRIM_TOOLTIP)}},t.Blocks.text_print={init:function(){this.jsonInit({message0:t.Msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:t.Msg.TEXT_PRINT_TOOLTIP,helpUrl:t.Msg.TEXT_PRINT_HELPURL})}},t.Blocks.text_prompt_ext={init:function(){var n=[[t.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[t.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(t.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks");var r=this;n=new t.FieldDropdown(n,function(s){r.updateType_(s)}),this.appendValueInput("TEXT").appendField(n,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(function(){return"TEXT"==r.getFieldValue("TYPE")?t.Msg.TEXT_PROMPT_TOOLTIP_TEXT:t.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},updateType_:function(n){this.outputConnection.setCheck("NUMBER"==n?"Number":"String")},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("type",this.getFieldValue("TYPE")),n},domToMutation:function(n){this.updateType_(n.getAttribute("type"))}},t.Blocks.text_prompt={init:function(){this.mixin(t.Constants.Text.QUOTE_IMAGE_MIXIN);var n=[[t.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[t.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]],r=this;this.setHelpUrl(t.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),n=new t.FieldDropdown(n,function(s){r.updateType_(s)}),this.appendDummyInput().appendField(n,"TYPE").appendField(this.newQuote_(!0)).appendField(new t.FieldTextInput(""),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(function(){return"TEXT"==r.getFieldValue("TYPE")?t.Msg.TEXT_PROMPT_TOOLTIP_TEXT:t.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},updateType_:t.Blocks.text_prompt_ext.updateType_,mutationToDom:t.Blocks.text_prompt_ext.mutationToDom,domToMutation:t.Blocks.text_prompt_ext.domToMutation},t.Blocks.text_count={init:function(){this.jsonInit({message0:t.Msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:t.Msg.TEXT_COUNT_TOOLTIP,helpUrl:t.Msg.TEXT_COUNT_HELPURL})}},t.Blocks.text_replace={init:function(){this.jsonInit({message0:t.Msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:t.Msg.TEXT_REPLACE_TOOLTIP,helpUrl:t.Msg.TEXT_REPLACE_HELPURL})}},t.Blocks.text_reverse={init:function(){this.jsonInit({message0:t.Msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:t.Msg.TEXT_REVERSE_TOOLTIP,helpUrl:t.Msg.TEXT_REVERSE_HELPURL})}},t.Constants.Text.QUOTE_IMAGE_MIXIN={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(n){for(var s,r=0;s=this.inputList[r];r++)for(var b,u=0;b=s.fieldRow[u];u++)if(n==b.name)return s.insertFieldAt(u,this.newQuote_(!0)),void s.insertFieldAt(u+2,this.newQuote_(!1));console.warn('field named "'+n+'" not found in '+this.toDevString())},newQuote_:function(n){return new t.FieldImage((n=this.RTL?!n:n)?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,this.QUOTE_IMAGE_WIDTH,this.QUOTE_IMAGE_HEIGHT,n?"\u201c":"\u201d")}},t.Constants.Text.TEXT_QUOTES_EXTENSION=function(){this.mixin(t.Constants.Text.QUOTE_IMAGE_MIXIN),this.quoteField_("TEXT")},t.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN={mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("items",this.itemCount_),n},domToMutation:function(n){this.itemCount_=parseInt(n.getAttribute("items"),10),this.updateShape_()},decompose:function(n){var r=n.newBlock("text_create_join_container");r.initSvg();for(var s=r.getInput("STACK").connection,u=0;u<this.itemCount_;u++){var b=n.newBlock("text_create_join_item");b.initSvg(),s.connect(b.previousConnection),s=b.nextConnection}return r},compose:function(n){var r=n.getInputTargetBlock("STACK");for(n=[];r&&!r.isInsertionMarker();)n.push(r.valueConnection_),r=r.nextConnection&&r.nextConnection.targetBlock();for(r=0;r<this.itemCount_;r++){var s=this.getInput("ADD"+r).connection.targetConnection;s&&-1==n.indexOf(s)&&s.disconnect()}for(this.itemCount_=n.length,this.updateShape_(),r=0;r<this.itemCount_;r++)t.Mutator.reconnect(n[r],this,"ADD"+r)},saveConnections:function(n){n=n.getInputTargetBlock("STACK");for(var r=0;n;){var s=this.getInput("ADD"+r);n.valueConnection_=s&&s.connection.targetConnection,r++,n=n.nextConnection&&n.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var n=0;n<this.itemCount_;n++)if(!this.getInput("ADD"+n)){var r=this.appendValueInput("ADD"+n).setAlign(t.ALIGN_RIGHT);0==n&&r.appendField(t.Msg.TEXT_JOIN_TITLE_CREATEWITH)}for(;this.getInput("ADD"+n);)this.removeInput("ADD"+n),n++}},t.Constants.Text.TEXT_JOIN_EXTENSION=function(){this.mixin(t.Constants.Text.QUOTE_IMAGE_MIXIN),this.itemCount_=2,this.updateShape_(),this.setMutator(new t.Mutator(["text_create_join_item"]))},t.Extensions.register("text_append_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_TEXT_APPEND_TOOLTIP}","VAR")),t.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION=function(){var n=this;this.setTooltip(function(){return t.Msg.TEXT_INDEXOF_TOOLTIP.replace("%1",n.workspace.options.oneBasedIndex?"0":"-1")})},t.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN={mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("at",!!this.isAt_),n},domToMutation:function(n){n="false"!=n.getAttribute("at"),this.updateAt_(n)},updateAt_:function(n){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),n&&(this.appendValueInput("AT").setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)),t.Msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(t.Msg.TEXT_CHARAT_TAIL)),this.isAt_=n}},t.Constants.Text.TEXT_CHARAT_EXTENSION=function(){this.getField("WHERE").setValidator(function(r){(r="FROM_START"==r||"FROM_END"==r)!=this.isAt_&&this.getSourceBlock().updateAt_(r)}),this.updateAt_(!0);var n=this;this.setTooltip(function(){var r=n.getFieldValue("WHERE"),s=t.Msg.TEXT_CHARAT_TOOLTIP;return("FROM_START"==r||"FROM_END"==r)&&(r="FROM_START"==r?t.Msg.LISTS_INDEX_FROM_START_TOOLTIP:t.Msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(s+="  "+r.replace("%1",n.workspace.options.oneBasedIndex?"#1":"#0")),s})},t.Extensions.register("text_indexOf_tooltip",t.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION),t.Extensions.register("text_quotes",t.Constants.Text.TEXT_QUOTES_EXTENSION),t.Extensions.registerMutator("text_join_mutator",t.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN,t.Constants.Text.TEXT_JOIN_EXTENSION),t.Extensions.registerMutator("text_charAt_mutator",t.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN,t.Constants.Text.TEXT_CHARAT_EXTENSION),t.Blocks.variables={},t.Constants.Variables={},t.Constants.Variables.HUE=330,t.defineBlocksWithJsonArray([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]),t.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(n){if(this.isInFlyout)("variables_get"==this.type||"variables_get_reporter"==this.type)&&(r={text:t.Msg.RENAME_VARIABLE,enabled:!0,callback:t.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},b=this.getField("VAR").getText(),u={text:t.Msg.DELETE_VARIABLE.replace("%1",b),enabled:!0,callback:t.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},n.unshift(r),n.unshift(u));else{if("variables_get"==this.type)var r="variables_set",s=t.Msg.VARIABLES_GET_CREATE_SET;else r="variables_get",s=t.Msg.VARIABLES_SET_CREATE_GET;var u={enabled:0<this.workspace.remainingCapacity()},b=this.getField("VAR").getText();u.text=s.replace("%1",b),(s=t.utils.xml.createElement("field")).setAttribute("name","VAR"),s.appendChild(t.utils.xml.createTextNode(b)),(b=t.utils.xml.createElement("block")).setAttribute("type",r),b.appendChild(s),u.callback=t.ContextMenu.callbackFactory(this,b),n.push(u)}}},t.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY=function(n){return function(){var r=n.workspace,s=n.getField("VAR").getVariable();t.Variables.renameVariable(r,s)}},t.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY=function(n){return function(){var r=n.workspace,s=n.getField("VAR").getVariable();r.deleteVariableById(s.getId()),r.refreshToolboxSelection()}},t.Extensions.registerMixin("contextMenu_variableSetterGetter",t.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),t.Constants.VariablesDynamic={},t.Constants.VariablesDynamic.HUE=310,t.defineBlocksWithJsonArray([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]),t.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(n){if(this.isInFlyout)("variables_get_dynamic"==this.type||"variables_get_reporter_dynamic"==this.type)&&(r={text:t.Msg.RENAME_VARIABLE,enabled:!0,callback:t.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},x=this.getField("VAR").getText(),b={text:t.Msg.DELETE_VARIABLE.replace("%1",x),enabled:!0,callback:t.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},n.unshift(r),n.unshift(b));else{var r=this.getFieldValue("VAR"),s=this.workspace.getVariableById(r).type;if("variables_get_dynamic"==this.type){r="variables_set_dynamic";var u=t.Msg.VARIABLES_GET_CREATE_SET}else r="variables_get_dynamic",u=t.Msg.VARIABLES_SET_CREATE_GET;var b={enabled:0<this.workspace.remainingCapacity()},x=this.getField("VAR").getText();b.text=u.replace("%1",x),(u=t.utils.xml.createElement("field")).setAttribute("name","VAR"),u.setAttribute("variabletype",s),u.appendChild(t.utils.xml.createTextNode(x)),(x=t.utils.xml.createElement("block")).setAttribute("type",r),x.appendChild(u),b.callback=t.ContextMenu.callbackFactory(this,x),n.push(b)}},onchange:function(n){n=this.getFieldValue("VAR"),n=t.Variables.getVariable(this.workspace,n),"variables_get_dynamic"==this.type?this.outputConnection.setCheck(n.type):this.getInput("VALUE").connection.setCheck(n.type)}},t.Constants.VariablesDynamic.RENAME_OPTION_CALLBACK_FACTORY=function(n){return function(){var r=n.workspace,s=n.getField("VAR").getVariable();t.Variables.renameVariable(r,s)}},t.Constants.VariablesDynamic.DELETE_OPTION_CALLBACK_FACTORY=function(n){return function(){var r=n.workspace,s=n.getField("VAR").getVariable();r.deleteVariableById(s.getId()),r.refreshToolboxSelection()}},t.Extensions.registerMixin("contextMenu_variableDynamicSetterGetter",t.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),t.Blocks}.apply($,_))&&(U.exports=e)},5962:function(U,$,m){var _,e;_=[m(68207),m(39809),m(24773),m(20147)],void 0!==(e=function(t,n,r,s){"use strict";return t.setLocale(n),t.Blocks=t.Blocks||{},Object.keys(r).forEach(function(u){t.Blocks[u]=r[u]}),t.JavaScript=s,t}.apply($,_))&&(U.exports=e)},68207:function(U,$,m){var _,e;_=[m(54364)],void 0!==(e=function(t){"use strict";return t.setLocale=function(n){t.Msg=t.Msg||{},Object.keys(n).forEach(function(r){t.Msg[r]=n[r]})},t}.apply($,_))&&(U.exports=e)},68699:function(U,$,m){var _,e;_=[m(5962)],void 0!==(e=function(t){"use strict";return t}.apply($,_))&&(U.exports=e)},20147:function(U,$,m){var _,e;_=[m(68207),m(19242)],void 0!==(e=function(t,n){"use strict";return t.JavaScript=n,n}.apply($,_))&&(U.exports=e)},19242:function(U,$,m){var _,e;_=[m(46251)],void 0!==(e=function(t){"use strict";return t.JavaScript=new t.Generator("JavaScript"),t.JavaScript.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(t.utils.global).join(",")),t.JavaScript.ORDER_ATOMIC=0,t.JavaScript.ORDER_NEW=1.1,t.JavaScript.ORDER_MEMBER=1.2,t.JavaScript.ORDER_FUNCTION_CALL=2,t.JavaScript.ORDER_INCREMENT=3,t.JavaScript.ORDER_DECREMENT=3,t.JavaScript.ORDER_BITWISE_NOT=4.1,t.JavaScript.ORDER_UNARY_PLUS=4.2,t.JavaScript.ORDER_UNARY_NEGATION=4.3,t.JavaScript.ORDER_LOGICAL_NOT=4.4,t.JavaScript.ORDER_TYPEOF=4.5,t.JavaScript.ORDER_VOID=4.6,t.JavaScript.ORDER_DELETE=4.7,t.JavaScript.ORDER_AWAIT=4.8,t.JavaScript.ORDER_EXPONENTIATION=5,t.JavaScript.ORDER_MULTIPLICATION=5.1,t.JavaScript.ORDER_DIVISION=5.2,t.JavaScript.ORDER_MODULUS=5.3,t.JavaScript.ORDER_SUBTRACTION=6.1,t.JavaScript.ORDER_ADDITION=6.2,t.JavaScript.ORDER_BITWISE_SHIFT=7,t.JavaScript.ORDER_RELATIONAL=8,t.JavaScript.ORDER_IN=8,t.JavaScript.ORDER_INSTANCEOF=8,t.JavaScript.ORDER_EQUALITY=9,t.JavaScript.ORDER_BITWISE_AND=10,t.JavaScript.ORDER_BITWISE_XOR=11,t.JavaScript.ORDER_BITWISE_OR=12,t.JavaScript.ORDER_LOGICAL_AND=13,t.JavaScript.ORDER_LOGICAL_OR=14,t.JavaScript.ORDER_CONDITIONAL=15,t.JavaScript.ORDER_ASSIGNMENT=16,t.JavaScript.ORDER_YIELD=17,t.JavaScript.ORDER_COMMA=18,t.JavaScript.ORDER_NONE=99,t.JavaScript.ORDER_OVERRIDES=[[t.JavaScript.ORDER_FUNCTION_CALL,t.JavaScript.ORDER_MEMBER],[t.JavaScript.ORDER_FUNCTION_CALL,t.JavaScript.ORDER_FUNCTION_CALL],[t.JavaScript.ORDER_MEMBER,t.JavaScript.ORDER_MEMBER],[t.JavaScript.ORDER_MEMBER,t.JavaScript.ORDER_FUNCTION_CALL],[t.JavaScript.ORDER_LOGICAL_NOT,t.JavaScript.ORDER_LOGICAL_NOT],[t.JavaScript.ORDER_MULTIPLICATION,t.JavaScript.ORDER_MULTIPLICATION],[t.JavaScript.ORDER_ADDITION,t.JavaScript.ORDER_ADDITION],[t.JavaScript.ORDER_LOGICAL_AND,t.JavaScript.ORDER_LOGICAL_AND],[t.JavaScript.ORDER_LOGICAL_OR,t.JavaScript.ORDER_LOGICAL_OR]],t.JavaScript.isInitialized=!1,t.JavaScript.init=function(n){Object.getPrototypeOf(this).init.call(this),this.nameDB_?this.nameDB_.reset():this.nameDB_=new t.Names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(n.getVariableMap()),this.nameDB_.populateVariables(n),this.nameDB_.populateProcedures(n);for(var r=[],s=t.Variables.allDeveloperVariables(n),u=0;u<s.length;u++)r.push(this.nameDB_.getName(s[u],t.Names.DEVELOPER_VARIABLE_TYPE));for(n=t.Variables.allUsedVarModels(n),u=0;u<n.length;u++)r.push(this.nameDB_.getName(n[u].getId(),t.VARIABLE_CATEGORY_NAME));r.length&&(this.definitions_.variables="var "+r.join(", ")+";"),this.isInitialized=!0},t.JavaScript.finish=function(n){var r=t.utils.object.values(this.definitions_);return n=Object.getPrototypeOf(this).finish.call(this,n),this.isInitialized=!1,this.nameDB_.reset(),r.join("\n\n")+"\n\n\n"+n},t.JavaScript.scrubNakedValue=function(n){return n+";\n"},t.JavaScript.quote_=function(n){return"'"+(n=n.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/'/g,"\\'"))+"'"},t.JavaScript.multiline_quote_=function(n){return n.split(/\n/g).map(this.quote_).join(" + '\\n' +\n")},t.JavaScript.scrub_=function(n,r,s){var u="";if(!n.outputConnection||!n.outputConnection.targetConnection){var b=n.getCommentText();b&&(b=t.utils.string.wrap(b,this.COMMENT_WRAP-3),u+=this.prefixLines(b+"\n","// "));for(var x=0;x<n.inputList.length;x++)n.inputList[x].type==t.inputTypes.VALUE&&(b=n.inputList[x].connection.targetBlock())&&(b=this.allNestedComments(b))&&(u+=this.prefixLines(b,"// "))}return n=n.nextConnection&&n.nextConnection.targetBlock(),u+r+(s?"":this.blockToCode(n))},t.JavaScript.getAdjusted=function(n,r,s,u,b){s=s||0,b=b||this.ORDER_NONE,n.workspace.options.oneBasedIndex&&s--;var x=n.workspace.options.oneBasedIndex?"1":"0";if(n=0<s?this.valueToCode(n,r,this.ORDER_ADDITION)||x:0>s?this.valueToCode(n,r,this.ORDER_SUBTRACTION)||x:u?this.valueToCode(n,r,this.ORDER_UNARY_NEGATION)||x:this.valueToCode(n,r,b)||x,t.isNumber(n))n=Number(n)+s,u&&(n=-n);else{if(0<s){n=n+" + "+s;var B=this.ORDER_ADDITION}else 0>s&&(n=n+" - "+-s,B=this.ORDER_SUBTRACTION);u&&(n=s?"-("+n+")":"-"+n,B=this.ORDER_UNARY_NEGATION),B=Math.floor(B),b=Math.floor(b),B&&b>=B&&(n="("+n+")")}return n},t.JavaScript.colour={},t.JavaScript.colour_picker=function(n){return[t.JavaScript.quote_(n.getFieldValue("COLOUR")),t.JavaScript.ORDER_ATOMIC]},t.JavaScript.colour_random=function(n){return[t.JavaScript.provideFunction_("colourRandom",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"() {","  var num = Math.floor(Math.random() * Math.pow(2, 24));","  return '#' + ('00000' + num.toString(16)).substr(-6);","}"])+"()",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.colour_rgb=function(n){var r=t.JavaScript.valueToCode(n,"RED",t.JavaScript.ORDER_NONE)||0,s=t.JavaScript.valueToCode(n,"GREEN",t.JavaScript.ORDER_NONE)||0;return n=t.JavaScript.valueToCode(n,"BLUE",t.JavaScript.ORDER_NONE)||0,[t.JavaScript.provideFunction_("colourRgb",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(r, g, b) {","  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;","  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;","  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;","  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);","  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);","  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+r+", "+s+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.colour_blend=function(n){var r=t.JavaScript.valueToCode(n,"COLOUR1",t.JavaScript.ORDER_NONE)||"'#000000'",s=t.JavaScript.valueToCode(n,"COLOUR2",t.JavaScript.ORDER_NONE)||"'#000000'";return n=t.JavaScript.valueToCode(n,"RATIO",t.JavaScript.ORDER_NONE)||.5,[t.JavaScript.provideFunction_("colourBlend",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(c1, c2, ratio) {","  ratio = Math.max(Math.min(Number(ratio), 1), 0);","  var r1 = parseInt(c1.substring(1, 3), 16);","  var g1 = parseInt(c1.substring(3, 5), 16);","  var b1 = parseInt(c1.substring(5, 7), 16);","  var r2 = parseInt(c2.substring(1, 3), 16);","  var g2 = parseInt(c2.substring(3, 5), 16);","  var b2 = parseInt(c2.substring(5, 7), 16);","  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);","  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);","  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);","  r = ('0' + (r || 0).toString(16)).slice(-2);","  g = ('0' + (g || 0).toString(16)).slice(-2);","  b = ('0' + (b || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+r+", "+s+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists={},t.JavaScript.lists_create_empty=function(n){return["[]",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.lists_create_with=function(n){for(var r=Array(n.itemCount_),s=0;s<n.itemCount_;s++)r[s]=t.JavaScript.valueToCode(n,"ADD"+s,t.JavaScript.ORDER_NONE)||"null";return["["+r.join(", ")+"]",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.lists_repeat=function(n){return[t.JavaScript.provideFunction_("listsRepeat",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(value, n) {","  var array = [];","  for (var i = 0; i < n; i++) {","    array[i] = value;","  }","  return array;","}"])+"("+(t.JavaScript.valueToCode(n,"ITEM",t.JavaScript.ORDER_NONE)||"null")+", "+(n=t.JavaScript.valueToCode(n,"NUM",t.JavaScript.ORDER_NONE)||"0")+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_length=function(n){return[(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"[]")+".length",t.JavaScript.ORDER_MEMBER]},t.JavaScript.lists_isEmpty=function(n){return["!"+(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"[]")+".length",t.JavaScript.ORDER_LOGICAL_NOT]},t.JavaScript.lists_indexOf=function(n){var r="FIRST"==n.getFieldValue("END")?"indexOf":"lastIndexOf",s=t.JavaScript.valueToCode(n,"FIND",t.JavaScript.ORDER_NONE)||"''";return r=(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"[]")+"."+r+"("+s+")",n.workspace.options.oneBasedIndex?[r+" + 1",t.JavaScript.ORDER_ADDITION]:[r,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_getIndex=function(n){var r=n.getFieldValue("MODE")||"GET",s=n.getFieldValue("WHERE")||"FROM_START",u=t.JavaScript.valueToCode(n,"VALUE","RANDOM"==s?t.JavaScript.ORDER_NONE:t.JavaScript.ORDER_MEMBER)||"[]";switch(s){case"FIRST":if("GET"==r)return[u+"[0]",t.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==r)return[u+".shift()",t.JavaScript.ORDER_MEMBER];if("REMOVE"==r)return u+".shift();\n";break;case"LAST":if("GET"==r)return[u+".slice(-1)[0]",t.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==r)return[u+".pop()",t.JavaScript.ORDER_MEMBER];if("REMOVE"==r)return u+".pop();\n";break;case"FROM_START":if(n=t.JavaScript.getAdjusted(n,"AT"),"GET"==r)return[u+"["+n+"]",t.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==r)return[u+".splice("+n+", 1)[0]",t.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==r)return u+".splice("+n+", 1);\n";break;case"FROM_END":if(n=t.JavaScript.getAdjusted(n,"AT",1,!0),"GET"==r)return[u+".slice("+n+")[0]",t.JavaScript.ORDER_FUNCTION_CALL];if("GET_REMOVE"==r)return[u+".splice("+n+", 1)[0]",t.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==r)return u+".splice("+n+", 1);";break;case"RANDOM":if(u=t.JavaScript.provideFunction_("listsGetRandomItem",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list, remove) {","  var x = Math.floor(Math.random() * list.length);","  if (remove) {","    return list.splice(x, 1)[0];","  } else {","    return list[x];","  }","}"])+"("+u+", "+("GET"!=r)+")","GET"==r||"GET_REMOVE"==r)return[u,t.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==r)return u+";\n"}throw Error("Unhandled combination (lists_getIndex).")},t.JavaScript.lists_setIndex=function(n){function r(){if(s.match(/^\w+$/))return"";var B=t.JavaScript.nameDB_.getDistinctName("tmpList",t.VARIABLE_CATEGORY_NAME),Z="var "+B+" = "+s+";\n";return s=B,Z}var s=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_MEMBER)||"[]",u=n.getFieldValue("MODE")||"GET",b=n.getFieldValue("WHERE")||"FROM_START",x=t.JavaScript.valueToCode(n,"TO",t.JavaScript.ORDER_ASSIGNMENT)||"null";switch(b){case"FIRST":if("SET"==u)return s+"[0] = "+x+";\n";if("INSERT"==u)return s+".unshift("+x+");\n";break;case"LAST":if("SET"==u)return(n=r())+(s+"[")+s+".length - 1] = "+x+";\n";if("INSERT"==u)return s+".push("+x+");\n";break;case"FROM_START":if(b=t.JavaScript.getAdjusted(n,"AT"),"SET"==u)return s+"["+b+"] = "+x+";\n";if("INSERT"==u)return s+".splice("+b+", 0, "+x+");\n";break;case"FROM_END":if(b=t.JavaScript.getAdjusted(n,"AT",1,!1,t.JavaScript.ORDER_SUBTRACTION),n=r(),"SET"==u)return n+(s+"[")+s+".length - "+b+"] = "+x+";\n";if("INSERT"==u)return n+(s+".splice(")+s+".length - "+b+", 0, "+x+");\n";break;case"RANDOM":if(n=r(),n+="var "+(b=t.JavaScript.nameDB_.getDistinctName("tmpX",t.VARIABLE_CATEGORY_NAME))+" = Math.floor(Math.random() * "+s+".length);\n","SET"==u)return n+(s+"[")+b+"] = "+x+";\n";if("INSERT"==u)return n+(s+".splice(")+b+", 0, "+x+");\n"}throw Error("Unhandled combination (lists_setIndex).")},t.JavaScript.lists.getIndex_=function(n,r,s){return"FIRST"==r?"0":"FROM_END"==r?n+".length - 1 - "+s:"LAST"==r?n+".length - 1":s},t.JavaScript.lists_getSublist=function(n){var r=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_MEMBER)||"[]",s=n.getFieldValue("WHERE1"),u=n.getFieldValue("WHERE2");if("FIRST"==s&&"LAST"==u)r+=".slice(0)";else if(r.match(/^\w+$/)||"FROM_END"!=s&&"FROM_START"==u){switch(s){case"FROM_START":var b=t.JavaScript.getAdjusted(n,"AT1");break;case"FROM_END":b=r+".length - "+(b=t.JavaScript.getAdjusted(n,"AT1",1,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"FIRST":b="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(u){case"FROM_START":n=t.JavaScript.getAdjusted(n,"AT2",1);break;case"FROM_END":n=r+".length - "+(n=t.JavaScript.getAdjusted(n,"AT2",0,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"LAST":n=r+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}r=r+".slice("+b+", "+n+")"}else{b=t.JavaScript.getAdjusted(n,"AT1"),n=t.JavaScript.getAdjusted(n,"AT2");var x=t.JavaScript.lists.getIndex_,B={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};r=t.JavaScript.provideFunction_("subsequence"+B[s]+B[u],["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+("FROM_END"==s||"FROM_START"==s?", at1":"")+("FROM_END"==u||"FROM_START"==u?", at2":"")+") {","  var start = "+x("sequence",s,"at1")+";","  var end = "+x("sequence",u,"at2")+" + 1;","  return sequence.slice(start, end);","}"])+"("+r+("FROM_END"==s||"FROM_START"==s?", "+b:"")+("FROM_END"==u||"FROM_START"==u?", "+n:"")+")"}return[r,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_sort=function(n){var r=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_FUNCTION_CALL)||"[]",s="1"===n.getFieldValue("DIRECTION")?1:-1;return n=n.getFieldValue("TYPE"),[r+".slice().sort("+t.JavaScript.provideFunction_("listsGetSortCompare",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(type, direction) {","  var compareFuncs = {",'    "NUMERIC": function(a, b) {',"        return Number(a) - Number(b); },",'    "TEXT": function(a, b) {',"        return a.toString() > b.toString() ? 1 : -1; },",'    "IGNORE_CASE": function(a, b) {',"        return a.toString().toLowerCase() > b.toString().toLowerCase() ? 1 : -1; },","  };","  var compare = compareFuncs[type];","  return function(a, b) { return compare(a, b) * direction; }","}"])+'("'+n+'", '+s+"))",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_split=function(n){var r=t.JavaScript.valueToCode(n,"INPUT",t.JavaScript.ORDER_MEMBER),s=t.JavaScript.valueToCode(n,"DELIM",t.JavaScript.ORDER_NONE)||"''";if("SPLIT"==(n=n.getFieldValue("MODE")))r||(r="''"),n="split";else{if("JOIN"!=n)throw Error("Unknown mode: "+n);r||(r="[]"),n="join"}return[r+"."+n+"("+s+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_reverse=function(n){return[(t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_FUNCTION_CALL)||"[]")+".slice().reverse()",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.logic={},t.JavaScript.controls_if=function(n){var r=0,s="";t.JavaScript.STATEMENT_PREFIX&&(s+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,n));do{var u=t.JavaScript.valueToCode(n,"IF"+r,t.JavaScript.ORDER_NONE)||"false",b=t.JavaScript.statementToCode(n,"DO"+r);t.JavaScript.STATEMENT_SUFFIX&&(b=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n),t.JavaScript.INDENT)+b),s+=(0<r?" else ":"")+"if ("+u+") {\n"+b+"}",++r}while(n.getInput("IF"+r));return(n.getInput("ELSE")||t.JavaScript.STATEMENT_SUFFIX)&&(b=t.JavaScript.statementToCode(n,"ELSE"),t.JavaScript.STATEMENT_SUFFIX&&(b=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n),t.JavaScript.INDENT)+b),s+=" else {\n"+b+"}"),s+"\n"},t.JavaScript.controls_ifelse=t.JavaScript.controls_if,t.JavaScript.logic_compare=function(n){var r={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[n.getFieldValue("OP")],s="=="==r||"!="==r?t.JavaScript.ORDER_EQUALITY:t.JavaScript.ORDER_RELATIONAL;return[(t.JavaScript.valueToCode(n,"A",s)||"0")+" "+r+" "+(n=t.JavaScript.valueToCode(n,"B",s)||"0"),s]},t.JavaScript.logic_operation=function(n){var r="AND"==n.getFieldValue("OP")?"&&":"||",s="&&"==r?t.JavaScript.ORDER_LOGICAL_AND:t.JavaScript.ORDER_LOGICAL_OR,u=t.JavaScript.valueToCode(n,"A",s);if(n=t.JavaScript.valueToCode(n,"B",s),u||n){var b="&&"==r?"true":"false";u||(u=b),n||(n=b)}else n=u="false";return[u+" "+r+" "+n,s]},t.JavaScript.logic_negate=function(n){var r=t.JavaScript.ORDER_LOGICAL_NOT;return["!"+(t.JavaScript.valueToCode(n,"BOOL",r)||"true"),r]},t.JavaScript.logic_boolean=function(n){return["TRUE"==n.getFieldValue("BOOL")?"true":"false",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.logic_null=function(n){return["null",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.logic_ternary=function(n){return[(t.JavaScript.valueToCode(n,"IF",t.JavaScript.ORDER_CONDITIONAL)||"false")+" ? "+(t.JavaScript.valueToCode(n,"THEN",t.JavaScript.ORDER_CONDITIONAL)||"null")+" : "+(n=t.JavaScript.valueToCode(n,"ELSE",t.JavaScript.ORDER_CONDITIONAL)||"null"),t.JavaScript.ORDER_CONDITIONAL]},t.JavaScript.loops={},t.JavaScript.controls_repeat_ext=function(n){var r=n.getField("TIMES")?String(Number(n.getFieldValue("TIMES"))):t.JavaScript.valueToCode(n,"TIMES",t.JavaScript.ORDER_ASSIGNMENT)||"0",s=t.JavaScript.statementToCode(n,"DO");s=t.JavaScript.addLoopTrap(s,n),n="";var u=t.JavaScript.nameDB_.getDistinctName("count",t.VARIABLE_CATEGORY_NAME),b=r;return r.match(/^\w+$/)||t.isNumber(r)||(n+="var "+(b=t.JavaScript.nameDB_.getDistinctName("repeat_end",t.VARIABLE_CATEGORY_NAME))+" = "+r+";\n"),n+"for (var "+u+" = 0; "+u+" < "+b+"; "+u+"++) {\n"+s+"}\n"},t.JavaScript.controls_repeat=t.JavaScript.controls_repeat_ext,t.JavaScript.controls_whileUntil=function(n){var r="UNTIL"==n.getFieldValue("MODE"),s=t.JavaScript.valueToCode(n,"BOOL",r?t.JavaScript.ORDER_LOGICAL_NOT:t.JavaScript.ORDER_NONE)||"false",u=t.JavaScript.statementToCode(n,"DO");return r&&(s="!"+s),"while ("+s+") {\n"+(u=t.JavaScript.addLoopTrap(u,n))+"}\n"},t.JavaScript.controls_for=function(n){var r=t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME),s=t.JavaScript.valueToCode(n,"FROM",t.JavaScript.ORDER_ASSIGNMENT)||"0",u=t.JavaScript.valueToCode(n,"TO",t.JavaScript.ORDER_ASSIGNMENT)||"0",b=t.JavaScript.valueToCode(n,"BY",t.JavaScript.ORDER_ASSIGNMENT)||"1",x=t.JavaScript.statementToCode(n,"DO");if(x=t.JavaScript.addLoopTrap(x,n),t.isNumber(s)&&t.isNumber(u)&&t.isNumber(b)){var B=Number(s)<=Number(u);n="for ("+r+" = "+s+"; "+r+(B?" <= ":" >= ")+u+"; "+r,n=(1==(r=Math.abs(Number(b)))?n+(B?"++":"--"):n+(B?" += ":" -= ")+r)+") {\n"+x+"}\n"}else n="",B=s,s.match(/^\w+$/)||t.isNumber(s)||(n+="var "+(B=t.JavaScript.nameDB_.getDistinctName(r+"_start",t.VARIABLE_CATEGORY_NAME))+" = "+s+";\n"),s=u,u.match(/^\w+$/)||t.isNumber(u)||(n+="var "+(s=t.JavaScript.nameDB_.getDistinctName(r+"_end",t.VARIABLE_CATEGORY_NAME))+" = "+u+";\n"),n+="var "+(u=t.JavaScript.nameDB_.getDistinctName(r+"_inc",t.VARIABLE_CATEGORY_NAME))+" = ",n=(n=t.isNumber(b)?n+(Math.abs(b)+";\n"):n+"Math.abs("+b+");\n")+"if ("+B+" > "+s+") {\n"+(t.JavaScript.INDENT+u)+" = -"+u+";\n",n+="}\n",n+="for ("+r+" = "+B+"; "+u+" >= 0 ? "+r+" <= "+s+" : "+r+" >= "+s+"; "+r+" += "+u+") {\n"+x+"}\n";return n},t.JavaScript.controls_forEach=function(n){var r=t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME),s=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_ASSIGNMENT)||"[]",u=t.JavaScript.statementToCode(n,"DO");u=t.JavaScript.addLoopTrap(u,n),n="";var b=s;return s.match(/^\w+$/)||(n+="var "+(b=t.JavaScript.nameDB_.getDistinctName(r+"_list",t.VARIABLE_CATEGORY_NAME))+" = "+s+";\n"),n+"for (var "+(s=t.JavaScript.nameDB_.getDistinctName(r+"_index",t.VARIABLE_CATEGORY_NAME))+" in "+b+") {\n"+(u=t.JavaScript.INDENT+r+" = "+b+"["+s+"];\n"+u)+"}\n"},t.JavaScript.controls_flow_statements=function(n){var r="";if(t.JavaScript.STATEMENT_PREFIX&&(r+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,n)),t.JavaScript.STATEMENT_SUFFIX&&(r+=t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n)),t.JavaScript.STATEMENT_PREFIX){var s=t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(n);s&&!s.suppressPrefixSuffix&&(r+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,s))}switch(n.getFieldValue("FLOW")){case"BREAK":return r+"break;\n";case"CONTINUE":return r+"continue;\n"}throw Error("Unknown flow statement.")},t.JavaScript.math={},t.JavaScript.math_number=function(n){return[n=Number(n.getFieldValue("NUM")),0<=n?t.JavaScript.ORDER_ATOMIC:t.JavaScript.ORDER_UNARY_NEGATION]},t.JavaScript.math_arithmetic=function(n){var r={ADD:[" + ",t.JavaScript.ORDER_ADDITION],MINUS:[" - ",t.JavaScript.ORDER_SUBTRACTION],MULTIPLY:[" * ",t.JavaScript.ORDER_MULTIPLICATION],DIVIDE:[" / ",t.JavaScript.ORDER_DIVISION],POWER:[null,t.JavaScript.ORDER_NONE]}[n.getFieldValue("OP")],s=r[0],u=t.JavaScript.valueToCode(n,"A",r=r[1])||"0";return n=t.JavaScript.valueToCode(n,"B",r)||"0",s?[u+s+n,r]:["Math.pow("+u+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_single=function(n){var r=n.getFieldValue("OP");if("NEG"==r)return"-"==(n=t.JavaScript.valueToCode(n,"NUM",t.JavaScript.ORDER_UNARY_NEGATION)||"0")[0]&&(n=" "+n),["-"+n,t.JavaScript.ORDER_UNARY_NEGATION];switch(n="SIN"==r||"COS"==r||"TAN"==r?t.JavaScript.valueToCode(n,"NUM",t.JavaScript.ORDER_DIVISION)||"0":t.JavaScript.valueToCode(n,"NUM",t.JavaScript.ORDER_NONE)||"0",r){case"ABS":var s="Math.abs("+n+")";break;case"ROOT":s="Math.sqrt("+n+")";break;case"LN":s="Math.log("+n+")";break;case"EXP":s="Math.exp("+n+")";break;case"POW10":s="Math.pow(10,"+n+")";break;case"ROUND":s="Math.round("+n+")";break;case"ROUNDUP":s="Math.ceil("+n+")";break;case"ROUNDDOWN":s="Math.floor("+n+")";break;case"SIN":s="Math.sin("+n+" / 180 * Math.PI)";break;case"COS":s="Math.cos("+n+" / 180 * Math.PI)";break;case"TAN":s="Math.tan("+n+" / 180 * Math.PI)"}if(s)return[s,t.JavaScript.ORDER_FUNCTION_CALL];switch(r){case"LOG10":s="Math.log("+n+") / Math.log(10)";break;case"ASIN":s="Math.asin("+n+") / Math.PI * 180";break;case"ACOS":s="Math.acos("+n+") / Math.PI * 180";break;case"ATAN":s="Math.atan("+n+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+r)}return[s,t.JavaScript.ORDER_DIVISION]},t.JavaScript.math_constant=function(n){return{PI:["Math.PI",t.JavaScript.ORDER_MEMBER],E:["Math.E",t.JavaScript.ORDER_MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",t.JavaScript.ORDER_DIVISION],SQRT2:["Math.SQRT2",t.JavaScript.ORDER_MEMBER],SQRT1_2:["Math.SQRT1_2",t.JavaScript.ORDER_MEMBER],INFINITY:["Infinity",t.JavaScript.ORDER_ATOMIC]}[n.getFieldValue("CONSTANT")]},t.JavaScript.math_number_property=function(n){var r=t.JavaScript.valueToCode(n,"NUMBER_TO_CHECK",t.JavaScript.ORDER_MODULUS)||"0",s=n.getFieldValue("PROPERTY");if("PRIME"==s)return[t.JavaScript.provideFunction_("mathIsPrime",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(n) {","  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods","  if (n == 2 || n == 3) {","    return true;","  }","  // False if n is NaN, negative, is 1, or not whole.","  // And false if n is divisible by 2 or 3.","  if (isNaN(n) || n <= 1 || n % 1 != 0 || n % 2 == 0 || n % 3 == 0) {","    return false;","  }","  // Check all the numbers of form 6k +/- 1, up to sqrt(n).","  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {","    if (n % (x - 1) == 0 || n % (x + 1) == 0) {","      return false;","    }","  }","  return true;","}"])+"("+r+")",t.JavaScript.ORDER_FUNCTION_CALL];switch(s){case"EVEN":var u=r+" % 2 == 0";break;case"ODD":u=r+" % 2 == 1";break;case"WHOLE":u=r+" % 1 == 0";break;case"POSITIVE":u=r+" > 0";break;case"NEGATIVE":u=r+" < 0";break;case"DIVISIBLE_BY":u=r+" % "+(n=t.JavaScript.valueToCode(n,"DIVISOR",t.JavaScript.ORDER_MODULUS)||"0")+" == 0"}return[u,t.JavaScript.ORDER_EQUALITY]},t.JavaScript.math_change=function(n){var r=t.JavaScript.valueToCode(n,"DELTA",t.JavaScript.ORDER_ADDITION)||"0";return(n=t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME))+" = (typeof "+n+" == 'number' ? "+n+" : 0) + "+r+";\n"},t.JavaScript.math_round=t.JavaScript.math_single,t.JavaScript.math_trig=t.JavaScript.math_single,t.JavaScript.math_on_list=function(n){var r=n.getFieldValue("OP");switch(r){case"SUM":n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_MEMBER)||"[]",n+=".reduce(function(x, y) {return x + y;})";break;case"MIN":n="Math.min.apply(null, "+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"MAX":n="Math.max.apply(null, "+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"AVERAGE":n=(r=t.JavaScript.provideFunction_("mathMean",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {","  return myList.reduce(function(x, y) {return x + y;}) / myList.length;","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"MEDIAN":n=(r=t.JavaScript.provideFunction_("mathMedian",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {","  var localList = myList.filter(function (x) {return typeof x == 'number';});","  if (!localList.length) return null;","  localList.sort(function(a, b) {return b - a;});","  if (localList.length % 2 == 0) {","    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;","  } else {","    return localList[(localList.length - 1) / 2];","  }","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"MODE":n=(r=t.JavaScript.provideFunction_("mathModes",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(values) {","  var modes = [];","  var counts = [];","  var maxCount = 0;","  for (var i = 0; i < values.length; i++) {","    var value = values[i];","    var found = false;","    var thisCount;","    for (var j = 0; j < counts.length; j++) {","      if (counts[j][0] === value) {","        thisCount = ++counts[j][1];","        found = true;","        break;","      }","    }","    if (!found) {","      counts.push([value, 1]);","      thisCount = 1;","    }","    maxCount = Math.max(thisCount, maxCount);","  }","  for (var j = 0; j < counts.length; j++) {","    if (counts[j][1] == maxCount) {","        modes.push(counts[j][0]);","    }","  }","  return modes;","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"STD_DEV":n=(r=t.JavaScript.provideFunction_("mathStandardDeviation",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(numbers) {","  var n = numbers.length;","  if (!n) return null;","  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;","  var variance = 0;","  for (var j = 0; j < n; j++) {","    variance += Math.pow(numbers[j] - mean, 2);","  }","  variance = variance / n;","  return Math.sqrt(variance);","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"RANDOM":n=(r=t.JavaScript.provideFunction_("mathRandomList",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list) {","  var x = Math.floor(Math.random() * list.length);","  return list[x];","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;default:throw Error("Unknown operator: "+r)}return[n,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_modulo=function(n){return[(t.JavaScript.valueToCode(n,"DIVIDEND",t.JavaScript.ORDER_MODULUS)||"0")+" % "+(n=t.JavaScript.valueToCode(n,"DIVISOR",t.JavaScript.ORDER_MODULUS)||"0"),t.JavaScript.ORDER_MODULUS]},t.JavaScript.math_constrain=function(n){return["Math.min(Math.max("+(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_NONE)||"0")+", "+(t.JavaScript.valueToCode(n,"LOW",t.JavaScript.ORDER_NONE)||"0")+"), "+(n=t.JavaScript.valueToCode(n,"HIGH",t.JavaScript.ORDER_NONE)||"Infinity")+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_random_int=function(n){var r=t.JavaScript.valueToCode(n,"FROM",t.JavaScript.ORDER_NONE)||"0";return n=t.JavaScript.valueToCode(n,"TO",t.JavaScript.ORDER_NONE)||"0",[t.JavaScript.provideFunction_("mathRandomInt",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(a, b) {","  if (a > b) {","    // Swap a and b to ensure a is smaller.","    var c = a;","    a = b;","    b = c;","  }","  return Math.floor(Math.random() * (b - a + 1) + a);","}"])+"("+r+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_random_float=function(n){return["Math.random()",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_atan2=function(n){var r=t.JavaScript.valueToCode(n,"X",t.JavaScript.ORDER_NONE)||"0";return["Math.atan2("+(t.JavaScript.valueToCode(n,"Y",t.JavaScript.ORDER_NONE)||"0")+", "+r+") / Math.PI * 180",t.JavaScript.ORDER_DIVISION]},t.JavaScript.procedures={},t.JavaScript.procedures_defreturn=function(n){var r=t.JavaScript.nameDB_.getName(n.getFieldValue("NAME"),t.PROCEDURE_CATEGORY_NAME),s="";t.JavaScript.STATEMENT_PREFIX&&(s+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,n)),t.JavaScript.STATEMENT_SUFFIX&&(s+=t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n)),s&&(s=t.JavaScript.prefixLines(s,t.JavaScript.INDENT));var u="";t.JavaScript.INFINITE_LOOP_TRAP&&(u=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.INFINITE_LOOP_TRAP,n),t.JavaScript.INDENT));var b=t.JavaScript.statementToCode(n,"STACK"),x=t.JavaScript.valueToCode(n,"RETURN",t.JavaScript.ORDER_NONE)||"",B="";b&&x&&(B=s),x&&(x=t.JavaScript.INDENT+"return "+x+";\n");for(var Z=[],ot=n.getVars(),et=0;et<ot.length;et++)Z[et]=t.JavaScript.nameDB_.getName(ot[et],t.VARIABLE_CATEGORY_NAME);return s="function "+r+"("+Z.join(", ")+") {\n"+s+u+b+B+x+"}",s=t.JavaScript.scrub_(n,s),t.JavaScript.definitions_["%"+r]=s,null},t.JavaScript.procedures_defnoreturn=t.JavaScript.procedures_defreturn,t.JavaScript.procedures_callreturn=function(n){for(var r=t.JavaScript.nameDB_.getName(n.getFieldValue("NAME"),t.PROCEDURE_CATEGORY_NAME),s=[],u=n.getVars(),b=0;b<u.length;b++)s[b]=t.JavaScript.valueToCode(n,"ARG"+b,t.JavaScript.ORDER_NONE)||"null";return[r+"("+s.join(", ")+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.procedures_callnoreturn=function(n){return t.JavaScript.procedures_callreturn(n)[0]+";\n"},t.JavaScript.procedures_ifreturn=function(n){var r="if ("+(t.JavaScript.valueToCode(n,"CONDITION",t.JavaScript.ORDER_NONE)||"false")+") {\n";return t.JavaScript.STATEMENT_SUFFIX&&(r+=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n),t.JavaScript.INDENT)),n.hasReturnValue_?(n=t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_NONE)||"null",r+=t.JavaScript.INDENT+"return "+n+";\n"):r+=t.JavaScript.INDENT+"return;\n",r+"}\n"},t.JavaScript.texts={},t.JavaScript.text=function(n){return[t.JavaScript.quote_(n.getFieldValue("TEXT")),t.JavaScript.ORDER_ATOMIC]},t.JavaScript.text_multiline=function(n){var r=-1!=(n=t.JavaScript.multiline_quote_(n.getFieldValue("TEXT"))).indexOf("+")?t.JavaScript.ORDER_ADDITION:t.JavaScript.ORDER_ATOMIC;return[n,r]},t.JavaScript.text.forceString_=function(n){return t.JavaScript.text.forceString_.strRegExp.test(n)?[n,t.JavaScript.ORDER_ATOMIC]:["String("+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text.forceString_.strRegExp=/^\s*'([^']|\\')*'\s*$/,t.JavaScript.text_join=function(n){switch(n.itemCount_){case 0:return["''",t.JavaScript.ORDER_ATOMIC];case 1:return n=t.JavaScript.valueToCode(n,"ADD0",t.JavaScript.ORDER_NONE)||"''",t.JavaScript.text.forceString_(n);case 2:var r=t.JavaScript.valueToCode(n,"ADD0",t.JavaScript.ORDER_NONE)||"''";return n=t.JavaScript.valueToCode(n,"ADD1",t.JavaScript.ORDER_NONE)||"''",[n=t.JavaScript.text.forceString_(r)[0]+" + "+t.JavaScript.text.forceString_(n)[0],t.JavaScript.ORDER_ADDITION];default:r=Array(n.itemCount_);for(var s=0;s<n.itemCount_;s++)r[s]=t.JavaScript.valueToCode(n,"ADD"+s,t.JavaScript.ORDER_NONE)||"''";return[n="["+r.join(",")+"].join('')",t.JavaScript.ORDER_FUNCTION_CALL]}},t.JavaScript.text_append=function(n){var r=t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME);return n=t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''",r+" += "+t.JavaScript.text.forceString_(n)[0]+";\n"},t.JavaScript.text_length=function(n){return[(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"''")+".length",t.JavaScript.ORDER_MEMBER]},t.JavaScript.text_isEmpty=function(n){return["!"+(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"''")+".length",t.JavaScript.ORDER_LOGICAL_NOT]},t.JavaScript.text_indexOf=function(n){var r="FIRST"==n.getFieldValue("END")?"indexOf":"lastIndexOf",s=t.JavaScript.valueToCode(n,"FIND",t.JavaScript.ORDER_NONE)||"''";return r=(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"''")+"."+r+"("+s+")",n.workspace.options.oneBasedIndex?[r+" + 1",t.JavaScript.ORDER_ADDITION]:[r,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_charAt=function(n){var r=n.getFieldValue("WHERE")||"FROM_START",s=t.JavaScript.valueToCode(n,"VALUE","RANDOM"==r?t.JavaScript.ORDER_NONE:t.JavaScript.ORDER_MEMBER)||"''";switch(r){case"FIRST":return[s+".charAt(0)",t.JavaScript.ORDER_FUNCTION_CALL];case"LAST":return[s+".slice(-1)",t.JavaScript.ORDER_FUNCTION_CALL];case"FROM_START":return[s+".charAt("+(n=t.JavaScript.getAdjusted(n,"AT"))+")",t.JavaScript.ORDER_FUNCTION_CALL];case"FROM_END":return[s+".slice("+(n=t.JavaScript.getAdjusted(n,"AT",1,!0))+").charAt(0)",t.JavaScript.ORDER_FUNCTION_CALL];case"RANDOM":return[t.JavaScript.provideFunction_("textRandomLetter",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(text) {","  var x = Math.floor(Math.random() * text.length);","  return text[x];","}"])+"("+s+")",t.JavaScript.ORDER_FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},t.JavaScript.text.getIndex_=function(n,r,s){return"FIRST"==r?"0":"FROM_END"==r?n+".length - 1 - "+s:"LAST"==r?n+".length - 1":s},t.JavaScript.text_getSubstring=function(n){var r=n.getFieldValue("WHERE1"),s=n.getFieldValue("WHERE2"),u="FROM_END"!=r&&"LAST"!=r&&"FROM_END"!=s&&"LAST"!=s,b=t.JavaScript.valueToCode(n,"STRING",u?t.JavaScript.ORDER_MEMBER:t.JavaScript.ORDER_NONE)||"''";if("FIRST"==r&&"LAST"==s)return[b,t.JavaScript.ORDER_NONE];if(b.match(/^'?\w+'?$/)||u){switch(r){case"FROM_START":u=t.JavaScript.getAdjusted(n,"AT1");break;case"FROM_END":u=b+".length - "+(u=t.JavaScript.getAdjusted(n,"AT1",1,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"FIRST":u="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(s){case"FROM_START":n=t.JavaScript.getAdjusted(n,"AT2",1);break;case"FROM_END":n=b+".length - "+(n=t.JavaScript.getAdjusted(n,"AT2",0,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"LAST":n=b+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}r=b+".slice("+u+", "+n+")"}else{u=t.JavaScript.getAdjusted(n,"AT1"),n=t.JavaScript.getAdjusted(n,"AT2");var x=t.JavaScript.text.getIndex_,B={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};r=t.JavaScript.provideFunction_("subsequence"+B[r]+B[s],["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+("FROM_END"==r||"FROM_START"==r?", at1":"")+("FROM_END"==s||"FROM_START"==s?", at2":"")+") {","  var start = "+x("sequence",r,"at1")+";","  var end = "+x("sequence",s,"at2")+" + 1;","  return sequence.slice(start, end);","}"])+"("+b+("FROM_END"==r||"FROM_START"==r?", "+u:"")+("FROM_END"==s||"FROM_START"==s?", "+n:"")+")"}return[r,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_changeCase=function(n){var r={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[n.getFieldValue("CASE")];return n=t.JavaScript.valueToCode(n,"TEXT",r?t.JavaScript.ORDER_MEMBER:t.JavaScript.ORDER_NONE)||"''",[r?n+r:t.JavaScript.provideFunction_("textToTitleCase",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(str) {","  return str.replace(/\\S+/g,","      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});","}"])+"("+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_trim=function(n){var r={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[n.getFieldValue("MODE")];return[(t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_MEMBER)||"''")+r,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_print=function(n){return"window.alert("+(t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''")+");\n"},t.JavaScript.text_prompt_ext=function(n){var r="window.prompt("+(n.getField("TEXT")?t.JavaScript.quote_(n.getFieldValue("TEXT")):t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''")+")";return"NUMBER"==n.getFieldValue("TYPE")&&(r="Number("+r+")"),[r,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_prompt=t.JavaScript.text_prompt_ext,t.JavaScript.text_count=function(n){var r=t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''";return n=t.JavaScript.valueToCode(n,"SUB",t.JavaScript.ORDER_NONE)||"''",[t.JavaScript.provideFunction_("textCount",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle) {","  if (needle.length === 0) {","    return haystack.length + 1;","  } else {","    return haystack.split(needle).length - 1;","  }","}"])+"("+r+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_replace=function(n){var r=t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''",s=t.JavaScript.valueToCode(n,"FROM",t.JavaScript.ORDER_NONE)||"''";return n=t.JavaScript.valueToCode(n,"TO",t.JavaScript.ORDER_NONE)||"''",[t.JavaScript.provideFunction_("textReplace",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle, replacement) {",'  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g,"\\\\$1")','                 .replace(/\\x08/g,"\\\\x08");',"  return haystack.replace(new RegExp(needle, 'g'), replacement);","}"])+"("+r+", "+s+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_reverse=function(n){return[(t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_MEMBER)||"''")+".split('').reverse().join('')",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.variables={},t.JavaScript.variables_get=function(n){return[t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME),t.JavaScript.ORDER_ATOMIC]},t.JavaScript.variables_set=function(n){var r=t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_ASSIGNMENT)||"0";return t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME)+" = "+r+";\n"},t.JavaScript.variablesDynamic={},t.JavaScript.variables_get_dynamic=t.JavaScript.variables_get,t.JavaScript.variables_set_dynamic=t.JavaScript.variables_set,t.JavaScript}.apply($,_))&&(U.exports=e)},39809:function(U,$,m){var _,e;_=[m(68207)],void 0!==(e=function(t){return(t={Msg:{}}).Msg.ADD_COMMENT="Add Comment",t.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",t.Msg.CHANGE_VALUE_TITLE="Change value:",t.Msg.CLEAN_UP="Clean up Blocks",t.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",t.Msg.COLLAPSE_ALL="Collapse Blocks",t.Msg.COLLAPSE_BLOCK="Collapse Block",t.Msg.COLOUR_BLEND_COLOUR1="colour 1",t.Msg.COLOUR_BLEND_COLOUR2="colour 2",t.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",t.Msg.COLOUR_BLEND_RATIO="ratio",t.Msg.COLOUR_BLEND_TITLE="blend",t.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",t.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",t.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",t.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",t.Msg.COLOUR_RANDOM_TITLE="random colour",t.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",t.Msg.COLOUR_RGB_BLUE="blue",t.Msg.COLOUR_RGB_GREEN="green",t.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",t.Msg.COLOUR_RGB_RED="red",t.Msg.COLOUR_RGB_TITLE="colour with",t.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",t.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",t.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",t.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",t.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",t.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",t.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",t.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",t.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",t.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",t.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",t.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",t.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",t.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",t.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",t.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",t.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",t.Msg.CONTROLS_IF_MSG_ELSE="else",t.Msg.CONTROLS_IF_MSG_ELSEIF="else if",t.Msg.CONTROLS_IF_MSG_IF="if",t.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",t.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",t.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",t.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",t.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",t.Msg.CONTROLS_REPEAT_INPUT_DO="do",t.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",t.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",t.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",t.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",t.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",t.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",t.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",t.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",t.Msg.DELETE_BLOCK="Delete Block",t.Msg.DELETE_VARIABLE="Delete the '%1' variable",t.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",t.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",t.Msg.DISABLE_BLOCK="Disable Block",t.Msg.DUPLICATE_BLOCK="Duplicate",t.Msg.DUPLICATE_COMMENT="Duplicate Comment",t.Msg.ENABLE_BLOCK="Enable Block",t.Msg.EXPAND_ALL="Expand Blocks",t.Msg.EXPAND_BLOCK="Expand Block",t.Msg.EXTERNAL_INPUTS="External Inputs",t.Msg.HELP="Help",t.Msg.INLINE_INPUTS="Inline Inputs",t.Msg.IOS_CANCEL="Cancel",t.Msg.IOS_ERROR="Error",t.Msg.IOS_OK="OK",t.Msg.IOS_PROCEDURES_ADD_INPUT="+ Add Input",t.Msg.IOS_PROCEDURES_ALLOW_STATEMENTS="Allow statements",t.Msg.IOS_PROCEDURES_DUPLICATE_INPUTS_ERROR="This function has duplicate inputs.",t.Msg.IOS_PROCEDURES_INPUTS="INPUTS",t.Msg.IOS_VARIABLES_ADD_BUTTON="Add",t.Msg.IOS_VARIABLES_ADD_VARIABLE="+ Add Variable",t.Msg.IOS_VARIABLES_DELETE_BUTTON="Delete",t.Msg.IOS_VARIABLES_EMPTY_NAME_ERROR="You can't use an empty variable name.",t.Msg.IOS_VARIABLES_RENAME_BUTTON="Rename",t.Msg.IOS_VARIABLES_VARIABLE_NAME="Variable name",t.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",t.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",t.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",t.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",t.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",t.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",t.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",t.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",t.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",t.Msg.LISTS_GET_INDEX_FIRST="first",t.Msg.LISTS_GET_INDEX_FROM_END="# from end",t.Msg.LISTS_GET_INDEX_FROM_START="#",t.Msg.LISTS_GET_INDEX_GET="get",t.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",t.Msg.LISTS_GET_INDEX_LAST="last",t.Msg.LISTS_GET_INDEX_RANDOM="random",t.Msg.LISTS_GET_INDEX_REMOVE="remove",t.Msg.LISTS_GET_INDEX_TAIL="",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",t.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",t.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",t.Msg.LISTS_GET_SUBLIST_END_LAST="to last",t.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",t.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",t.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",t.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",t.Msg.LISTS_GET_SUBLIST_TAIL="",t.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",t.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",t.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",t.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",t.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",t.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",t.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",t.Msg.LISTS_INLIST="in list",t.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",t.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",t.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",t.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",t.Msg.LISTS_LENGTH_TITLE="length of %1",t.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",t.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",t.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",t.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",t.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",t.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",t.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",t.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",t.Msg.LISTS_SET_INDEX_INPUT_TO="as",t.Msg.LISTS_SET_INDEX_INSERT="insert at",t.Msg.LISTS_SET_INDEX_SET="set",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",t.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",t.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",t.Msg.LISTS_SORT_ORDER_DESCENDING="descending",t.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",t.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",t.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",t.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",t.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",t.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",t.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",t.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",t.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",t.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",t.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",t.Msg.LOGIC_BOOLEAN_FALSE="false",t.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",t.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",t.Msg.LOGIC_BOOLEAN_TRUE="true",t.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",t.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",t.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",t.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",t.Msg.LOGIC_NEGATE_TITLE="not %1",t.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",t.Msg.LOGIC_NULL="null",t.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",t.Msg.LOGIC_NULL_TOOLTIP="Returns null.",t.Msg.LOGIC_OPERATION_AND="and",t.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",t.Msg.LOGIC_OPERATION_OR="or",t.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",t.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",t.Msg.LOGIC_TERNARY_CONDITION="test",t.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",t.Msg.LOGIC_TERNARY_IF_FALSE="if false",t.Msg.LOGIC_TERNARY_IF_TRUE="if true",t.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",t.Msg.MATH_ADDITION_SYMBOL="+",t.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",t.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",t.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",t.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",t.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",t.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",t.Msg.MATH_CHANGE_TITLE="change %1 by %2",t.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",t.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",t.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants: \u03c0 (3.141\u2026), e (2.718\u2026), \u03c6 (1.618\u2026), sqrt(2) (1.414\u2026), sqrt(\xbd) (0.707\u2026), or \u221e (infinity).",t.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",t.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",t.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",t.Msg.MATH_DIVISION_SYMBOL="\xf7",t.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",t.Msg.MATH_IS_EVEN="is even",t.Msg.MATH_IS_NEGATIVE="is negative",t.Msg.MATH_IS_ODD="is odd",t.Msg.MATH_IS_POSITIVE="is positive",t.Msg.MATH_IS_PRIME="is prime",t.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",t.Msg.MATH_IS_WHOLE="is whole",t.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",t.Msg.MATH_MODULO_TITLE="remainder of %1 \xf7 %2",t.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",t.Msg.MATH_MULTIPLICATION_SYMBOL="\xd7",t.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",t.Msg.MATH_NUMBER_TOOLTIP="A number.",t.Msg.MATH_ONLIST_HELPURL="",t.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",t.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",t.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",t.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",t.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",t.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",t.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",t.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",t.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",t.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",t.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",t.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",t.Msg.MATH_POWER_SYMBOL="^",t.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",t.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",t.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",t.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",t.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",t.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",t.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",t.Msg.MATH_ROUND_OPERATOR_ROUND="round",t.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",t.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",t.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",t.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",t.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",t.Msg.MATH_SINGLE_OP_ROOT="square root",t.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",t.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",t.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",t.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",t.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",t.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",t.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",t.Msg.MATH_SUBTRACTION_SYMBOL="-",t.Msg.MATH_TRIG_ACOS="acos",t.Msg.MATH_TRIG_ASIN="asin",t.Msg.MATH_TRIG_ATAN="atan",t.Msg.MATH_TRIG_COS="cos",t.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",t.Msg.MATH_TRIG_SIN="sin",t.Msg.MATH_TRIG_TAN="tan",t.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",t.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",t.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",t.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",t.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",t.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",t.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",t.Msg.NEW_NUMBER_VARIABLE="Create number variable...",t.Msg.NEW_STRING_VARIABLE="Create string variable...",t.Msg.NEW_VARIABLE="Create variable...",t.Msg.NEW_VARIABLE_TITLE="New variable name:",t.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",t.Msg.ORDINAL_NUMBER_SUFFIX="",t.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",t.Msg.PROCEDURES_BEFORE_PARAMS="with:",t.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",t.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",t.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",t.Msg.PROCEDURES_CREATE_DO="Create '%1'",t.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",t.Msg.PROCEDURES_DEFNORETURN_DO="",t.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",t.Msg.PROCEDURES_DEFNORETURN_TITLE="to",t.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",t.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_DEFRETURN_RETURN="return",t.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",t.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",t.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",t.Msg.PROCEDURES_IFRETURN_HELPURL="http://c2.com/cgi/wiki?GuardClause",t.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",t.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",t.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",t.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",t.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",t.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",t.Msg.REDO="Redo",t.Msg.REMOVE_COMMENT="Remove Comment",t.Msg.RENAME_VARIABLE="Rename variable...",t.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",t.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",t.Msg.TEXT_APPEND_TITLE="to %1 append text %2",t.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",t.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",t.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",t.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",t.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",t.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",t.Msg.TEXT_CHARAT_FIRST="get first letter",t.Msg.TEXT_CHARAT_FROM_END="get letter # from end",t.Msg.TEXT_CHARAT_FROM_START="get letter #",t.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",t.Msg.TEXT_CHARAT_LAST="get last letter",t.Msg.TEXT_CHARAT_RANDOM="get random letter",t.Msg.TEXT_CHARAT_TAIL="",t.Msg.TEXT_CHARAT_TITLE="in text %1 %2",t.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",t.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",t.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",t.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",t.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",t.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",t.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",t.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",t.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",t.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",t.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",t.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",t.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",t.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",t.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",t.Msg.TEXT_GET_SUBSTRING_TAIL="",t.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",t.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",t.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",t.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",t.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",t.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",t.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",t.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",t.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",t.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",t.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",t.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",t.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",t.Msg.TEXT_LENGTH_TITLE="length of %1",t.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",t.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",t.Msg.TEXT_PRINT_TITLE="print %1",t.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",t.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",t.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",t.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",t.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",t.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",t.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",t.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",t.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",t.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",t.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",t.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",t.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",t.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",t.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",t.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",t.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",t.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",t.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",t.Msg.TODAY="Today",t.Msg.UNDO="Undo",t.Msg.UNNAMED_KEY="unnamed",t.Msg.VARIABLES_DEFAULT_NAME="item",t.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",t.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",t.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",t.Msg.VARIABLES_SET="set %1 to %2",t.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",t.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",t.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",t.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",t.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",t.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",t.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",t.Msg.CONTROLS_FOREACH_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_FOR_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=t.Msg.CONTROLS_IF_MSG_ELSEIF,t.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=t.Msg.CONTROLS_IF_MSG_ELSE,t.Msg.CONTROLS_IF_IF_TITLE_IF=t.Msg.CONTROLS_IF_MSG_IF,t.Msg.CONTROLS_IF_MSG_THEN=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.LISTS_CREATE_WITH_ITEM_TITLE=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.LISTS_GET_INDEX_HELPURL=t.Msg.LISTS_INDEX_OF_HELPURL,t.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.MATH_CHANGE_TITLE_ITEM=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.PROCEDURES_DEFRETURN_COMMENT=t.Msg.PROCEDURES_DEFNORETURN_COMMENT,t.Msg.PROCEDURES_DEFRETURN_DO=t.Msg.PROCEDURES_DEFNORETURN_DO,t.Msg.PROCEDURES_DEFRETURN_PROCEDURE=t.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,t.Msg.PROCEDURES_DEFRETURN_TITLE=t.Msg.PROCEDURES_DEFNORETURN_TITLE,t.Msg.TEXT_APPEND_VARIABLE=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.MATH_HUE="230",t.Msg.LOOPS_HUE="120",t.Msg.LISTS_HUE="260",t.Msg.LOGIC_HUE="210",t.Msg.VARIABLES_HUE="330",t.Msg.TEXTS_HUE="160",t.Msg.PROCEDURES_HUE="290",t.Msg.COLOUR_HUE="20",t.Msg.VARIABLES_DYNAMIC_HUE="310",t.Msg}.apply($,_))&&(U.exports=e)},34686:U=>{!function(){"use strict";U.exports=function(m){return(m instanceof Buffer?m:Buffer.from(m.toString(),"binary")).toString("base64")}}()},72167:(U,$,m)=>{"use strict";var T=m(23141),_=m(74141),e=_(T("String.prototype.indexOf"));U.exports=function(n,r){var s=T(n,!!r);return"function"==typeof s&&e(n,".prototype.")>-1?_(s):s}},74141:(U,$,m)=>{"use strict";var T=m(37341),_=m(23141),e=_("%Function.prototype.apply%"),t=_("%Function.prototype.call%"),n=_("%Reflect.apply%",!0)||T.call(t,e),r=_("%Object.getOwnPropertyDescriptor%",!0),s=_("%Object.defineProperty%",!0),u=_("%Math.max%");if(s)try{s({},"a",{value:1})}catch(x){s=null}U.exports=function(B){var Z=n(T,t,arguments);if(r&&s){var ot=r(Z,"length");ot.configurable&&s(Z,"length",{value:1+u(0,B.length-(arguments.length-1))})}return Z};var b=function(){return n(T,e,arguments)};s?s(U.exports,"apply",{value:b}):U.exports.apply=b},88941:(U,$)=>{"use strict";$.parse=function(s,u){if("string"!=typeof s)throw new TypeError("argument str must be a string");for(var b={},x=u||{},B=s.split(_),Z=x.decode||m,ot=0;ot<B.length;ot++){var et=B[ot],Tt=et.indexOf("=");if(!(Tt<0)){var Pt=et.substr(0,Tt).trim(),pt=et.substr(++Tt,et.length).trim();'"'==pt[0]&&(pt=pt.slice(1,-1)),null==b[Pt]&&(b[Pt]=r(pt,Z))}}return b},$.serialize=function(s,u,b){var x=b||{},B=x.encode||T;if("function"!=typeof B)throw new TypeError("option encode is invalid");if(!e.test(s))throw new TypeError("argument name is invalid");var Z=B(u);if(Z&&!e.test(Z))throw new TypeError("argument val is invalid");var ot=s+"="+Z;if(null!=x.maxAge){var et=x.maxAge-0;if(isNaN(et)||!isFinite(et))throw new TypeError("option maxAge is invalid");ot+="; Max-Age="+Math.floor(et)}if(x.domain){if(!e.test(x.domain))throw new TypeError("option domain is invalid");ot+="; Domain="+x.domain}if(x.path){if(!e.test(x.path))throw new TypeError("option path is invalid");ot+="; Path="+x.path}if(x.expires){if("function"!=typeof x.expires.toUTCString)throw new TypeError("option expires is invalid");ot+="; Expires="+x.expires.toUTCString()}if(x.httpOnly&&(ot+="; HttpOnly"),x.secure&&(ot+="; Secure"),x.sameSite)switch("string"==typeof x.sameSite?x.sameSite.toLowerCase():x.sameSite){case!0:ot+="; SameSite=Strict";break;case"lax":ot+="; SameSite=Lax";break;case"strict":ot+="; SameSite=Strict";break;case"none":ot+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return ot};var m=decodeURIComponent,T=encodeURIComponent,_=/; */,e=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function r(s,u){try{return u(s)}catch(b){return s}}},25491:(U,$,m)=>{var T=m(47471);U.exports=T},73223:(U,$,m)=>{var T=m(37722);U.exports=T},14053:(U,$,m)=>{var T=m(91081);U.exports=T},23997:(U,$,m)=>{var T=m(3352);U.exports=T},38806:(U,$,m)=>{var T=m(35558);U.exports=T},62347:(U,$,m)=>{var T=m(49127);U.exports=T},69803:(U,$,m)=>{var T=m(46726);U.exports=T},52944:(U,$,m)=>{var T=m(87968);U.exports=T},11072:(U,$,m)=>{var T=m(81040);U.exports=T},78562:(U,$,m)=>{var T=m(18047);U.exports=T},84120:(U,$,m)=>{var T=m(16521);U.exports=T},84377:(U,$,m)=>{var T=m(32825);U.exports=T},54012:(U,$,m)=>{var T=m(70977);U.exports=T},2687:(U,$,m)=>{var T=m(35019);U.exports=T},49949:(U,$,m)=>{var T=m(11830);U.exports=T},15525:(U,$,m)=>{var T=m(61453);U.exports=T},75426:(U,$,m)=>{m(80651),m(48161);var T=m(35060);U.exports=T.Array.from},11529:(U,$,m)=>{m(71006);var T=m(35060);U.exports=T.Array.isArray},73534:(U,$,m)=>{m(56874);var T=m(15547);U.exports=T("Array").concat},66213:(U,$,m)=>{m(71420),m(42271);var T=m(15547);U.exports=T("Array").entries},60212:(U,$,m)=>{m(7100);var T=m(15547);U.exports=T("Array").filter},67373:(U,$,m)=>{m(96648);var T=m(15547);U.exports=T("Array").find},88191:(U,$,m)=>{m(58665);var T=m(15547);U.exports=T("Array").forEach},41581:(U,$,m)=>{m(85124);var T=m(15547);U.exports=T("Array").includes},91855:(U,$,m)=>{m(89815);var T=m(15547);U.exports=T("Array").indexOf},77466:(U,$,m)=>{m(81171);var T=m(15547);U.exports=T("Array").map},68097:(U,$,m)=>{m(21311);var T=m(15547);U.exports=T("Array").slice},70747:(U,$,m)=>{m(19314);var T=m(15547);U.exports=T("Array").splice},45347:(U,$,m)=>{m(71420),m(80651);var T=m(56958);U.exports=T},36022:(U,$,m)=>{var T=m(76185),_=m(73534),e=Array.prototype;U.exports=function(t){var n=t.concat;return t===e||T(e,t)&&n===e.concat?_:n}},73301:(U,$,m)=>{var T=m(76185),_=m(60212),e=Array.prototype;U.exports=function(t){var n=t.filter;return t===e||T(e,t)&&n===e.filter?_:n}},38387:(U,$,m)=>{var T=m(76185),_=m(67373),e=Array.prototype;U.exports=function(t){var n=t.find;return t===e||T(e,t)&&n===e.find?_:n}},1629:(U,$,m)=>{var T=m(76185),_=m(41581),e=m(73459),t=Array.prototype,n=String.prototype;U.exports=function(r){var s=r.includes;return r===t||T(t,r)&&s===t.includes?_:"string"==typeof r||r===n||T(n,r)&&s===n.includes?e:s}},66338:(U,$,m)=>{var T=m(76185),_=m(91855),e=Array.prototype;U.exports=function(t){var n=t.indexOf;return t===e||T(e,t)&&n===e.indexOf?_:n}},57378:(U,$,m)=>{var T=m(76185),_=m(77466),e=Array.prototype;U.exports=function(t){var n=t.map;return t===e||T(e,t)&&n===e.map?_:n}},70093:(U,$,m)=>{var T=m(76185),_=m(68097),e=Array.prototype;U.exports=function(t){var n=t.slice;return t===e||T(e,t)&&n===e.slice?_:n}},16172:(U,$,m)=>{var T=m(76185),_=m(70747),e=Array.prototype;U.exports=function(t){var n=t.splice;return t===e||T(e,t)&&n===e.splice?_:n}},7706:(U,$,m)=>{var T=m(76185),_=m(9464),e=String.prototype;U.exports=function(t){var n=t.startsWith;return"string"==typeof t||t===e||T(e,t)&&n===e.startsWith?_:n}},22730:(U,$,m)=>{m(86061);var T=m(35060),_=m(30547);T.JSON||(T.JSON={stringify:JSON.stringify}),U.exports=function(t,n,r){return _(T.JSON.stringify,null,arguments)}},66619:(U,$,m)=>{m(7923);var T=m(35060);U.exports=T.Object.assign},4040:(U,$,m)=>{m(13227);var _=m(35060).Object,e=U.exports=function(n,r){return _.defineProperties(n,r)};_.defineProperties.sham&&(e.sham=!0)},7420:(U,$,m)=>{m(24526);var _=m(35060).Object,e=U.exports=function(n,r,s){return _.defineProperty(n,r,s)};_.defineProperty.sham&&(e.sham=!0)},2011:(U,$,m)=>{m(50042);var T=m(35060);U.exports=T.Object.entries},95595:(U,$,m)=>{m(49711);var _=m(35060).Object,e=U.exports=function(n,r){return _.getOwnPropertyDescriptor(n,r)};_.getOwnPropertyDescriptor.sham&&(e.sham=!0)},42093:(U,$,m)=>{m(10130);var T=m(35060);U.exports=T.Object.getOwnPropertyDescriptors},93296:(U,$,m)=>{m(83136);var T=m(35060);U.exports=T.Object.getOwnPropertySymbols},31159:(U,$,m)=>{m(68126);var T=m(35060);U.exports=T.Object.keys},9850:(U,$,m)=>{m(84722),m(71420),m(42271),m(17569),m(52568),m(64111),m(1395),m(80651);var T=m(35060);U.exports=T.Promise},73459:(U,$,m)=>{m(11568);var T=m(15547);U.exports=T("String").includes},9464:(U,$,m)=>{m(72068);var T=m(15547);U.exports=T("String").startsWith},18297:(U,$,m)=>{m(56874),m(42271),m(83136),m(9266),m(87189),m(94898),m(57133),m(3766),m(49342),m(84765),m(83606),m(25909),m(42383),m(98547),m(73418),m(82266),m(30797),m(85504),m(15551),m(61897);var T=m(35060);U.exports=T.Symbol},5933:(U,$,m)=>{m(71420),m(42271),m(80651),m(3766);var T=m(14525);U.exports=T.f("iterator")},70238:(U,$,m)=>{m(71420),m(42271),m(29960);var T=m(35060);U.exports=T.WeakMap},4517:(U,$,m)=>{var T=m(25491);U.exports=T},31584:(U,$,m)=>{var T=m(73223);U.exports=T},46025:(U,$,m)=>{var T=m(14053);U.exports=T},81613:(U,$,m)=>{var T=m(23997);U.exports=T},19775:(U,$,m)=>{var T=m(38806);U.exports=T},9483:(U,$,m)=>{var T=m(62347);U.exports=T},60061:(U,$,m)=>{var T=m(69803);U.exports=T},27254:(U,$,m)=>{var T=m(52944);U.exports=T},62691:(U,$,m)=>{var T=m(11072);U.exports=T},98244:(U,$,m)=>{var T=m(78562);U.exports=T},79668:(U,$,m)=>{var T=m(84120);U.exports=T},5797:(U,$,m)=>{var T=m(84377);U.exports=T},35248:(U,$,m)=>{var T=m(54012);U.exports=T},58316:(U,$,m)=>{var T=m(2687);m(38669),m(33483),m(65193),m(30389),U.exports=T},51479:(U,$,m)=>{var T=m(49949);m(59108),m(98488),m(65802),m(38772),m(96398),m(79699),m(86669),U.exports=T},35392:(U,$,m)=>{var T=m(15525);U.exports=T},80866:(U,$,m)=>{var T=m(22743),_=m(24732),e=m(99727),t=T.TypeError;U.exports=function(n){if(_(n))return n;throw t(e(n)+" is not a function")}},77498:(U,$,m)=>{var T=m(22743),_=m(67459),e=m(99727),t=T.TypeError;U.exports=function(n){if(_(n))return n;throw t(e(n)+" is not a constructor")}},58995:(U,$,m)=>{var T=m(22743),_=m(24732),e=T.String,t=T.TypeError;U.exports=function(n){if("object"==typeof n||_(n))return n;throw t("Can't set "+e(n)+" as a prototype")}},70677:U=>{U.exports=function(){}},43017:(U,$,m)=>{var T=m(22743),_=m(76185),e=T.TypeError;U.exports=function(t,n){if(_(n,t))return t;throw e("Incorrect invocation")}},10157:(U,$,m)=>{var T=m(22743),_=m(78103),e=T.String,t=T.TypeError;U.exports=function(n){if(_(n))return n;throw t(e(n)+" is not an object")}},35877:(U,$,m)=>{var T=m(31469);U.exports=T(function(){if("function"==typeof ArrayBuffer){var _=new ArrayBuffer(8);Object.isExtensible(_)&&Object.defineProperty(_,"a",{value:8})}})},19875:(U,$,m)=>{"use strict";var T=m(53877).forEach,e=m(52995)("forEach");U.exports=e?[].forEach:function(n){return T(this,n,arguments.length>1?arguments[1]:void 0)}},96397:(U,$,m)=>{"use strict";var T=m(22743),_=m(21137),e=m(85246),t=m(49402),n=m(3570),r=m(83672),s=m(67459),u=m(33706),b=m(3115),x=m(74471),B=m(56958),Z=T.Array;U.exports=function(et){var Tt=t(et),Pt=s(this),pt=arguments.length,It=pt>1?arguments[1]:void 0,Ht=void 0!==It;Ht&&(It=_(It,pt>2?arguments[2]:void 0));var bt,st,gt,lt,Bt,Dt,Jt=B(Tt),Ct=0;if(!Jt||this==Z&&r(Jt))for(bt=u(Tt),st=Pt?new this(bt):Z(bt);bt>Ct;Ct++)Dt=Ht?It(Tt[Ct],Ct):Tt[Ct],b(st,Ct,Dt);else for(Bt=(lt=x(Tt,Jt)).next,st=Pt?new this:[];!(gt=e(Bt,lt)).done;Ct++)Dt=Ht?n(lt,It,[gt.value,Ct],!0):gt.value,b(st,Ct,Dt);return st.length=Ct,st}},68047:(U,$,m)=>{var T=m(35197),_=m(83889),e=m(33706),t=function(n){return function(r,s,u){var Z,b=T(r),x=e(b),B=_(u,x);if(n&&s!=s){for(;x>B;)if((Z=b[B++])!=Z)return!0}else for(;x>B;B++)if((n||B in b)&&b[B]===s)return n||B||0;return!n&&-1}};U.exports={includes:t(!0),indexOf:t(!1)}},53877:(U,$,m)=>{var T=m(21137),_=m(31588),e=m(23767),t=m(49402),n=m(33706),r=m(4414),s=_([].push),u=function(b){var x=1==b,B=2==b,Z=3==b,ot=4==b,et=6==b,Tt=7==b,Pt=5==b||et;return function(pt,It,Ht,Jt){for(var Et,ut,Ct=t(pt),bt=e(Ct),st=T(It,Ht),gt=n(bt),lt=0,Bt=Jt||r,Dt=x?Bt(pt,gt):B||Tt?Bt(pt,0):void 0;gt>lt;lt++)if((Pt||lt in bt)&&(ut=st(Et=bt[lt],lt,Ct),b))if(x)Dt[lt]=ut;else if(ut)switch(b){case 3:return!0;case 5:return Et;case 6:return lt;case 2:s(Dt,Et)}else switch(b){case 4:return!1;case 7:s(Dt,Et)}return et?-1:Z||ot?ot:Dt}};U.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterReject:u(7)}},85367:(U,$,m)=>{var T=m(31469),_=m(7084),e=m(10322),t=_("species");U.exports=function(n){return e>=51||!T(function(){var r=[];return(r.constructor={})[t]=function(){return{foo:1}},1!==r[n](Boolean).foo})}},52995:(U,$,m)=>{"use strict";var T=m(31469);U.exports=function(_,e){var t=[][_];return!!t&&T(function(){t.call(null,e||function(){throw 1},1)})}},11566:(U,$,m)=>{var T=m(22743),_=m(83889),e=m(33706),t=m(3115),n=T.Array,r=Math.max;U.exports=function(s,u,b){for(var x=e(s),B=_(u,x),Z=_(void 0===b?x:b,x),ot=n(r(Z-B,0)),et=0;B<Z;B++,et++)t(ot,et,s[B]);return ot.length=et,ot}},90840:(U,$,m)=>{var T=m(31588);U.exports=T([].slice)},69274:(U,$,m)=>{var T=m(11566),_=Math.floor,e=function(r,s){var u=r.length,b=_(u/2);return u<8?t(r,s):n(r,e(T(r,0,b),s),e(T(r,b),s),s)},t=function(r,s){for(var x,B,u=r.length,b=1;b<u;){for(B=b,x=r[b];B&&s(r[B-1],x)>0;)r[B]=r[--B];B!==b++&&(r[B]=x)}return r},n=function(r,s,u,b){for(var x=s.length,B=u.length,Z=0,ot=0;Z<x||ot<B;)r[Z+ot]=Z<x&&ot<B?b(s[Z],u[ot])<=0?s[Z++]:u[ot++]:Z<x?s[Z++]:u[ot++];return r};U.exports=e},68921:(U,$,m)=>{var T=m(22743),_=m(10371),e=m(67459),t=m(78103),r=m(7084)("species"),s=T.Array;U.exports=function(u){var b;return _(u)&&(e(b=u.constructor)&&(b===s||_(b.prototype))||t(b)&&null===(b=b[r]))&&(b=void 0),void 0===b?s:b}},4414:(U,$,m)=>{var T=m(68921);U.exports=function(_,e){return new(T(_))(0===e?0:e)}},3570:(U,$,m)=>{var T=m(10157),_=m(14964);U.exports=function(e,t,n,r){try{return r?t(T(n)[0],n[1]):t(n)}catch(s){_(e,"throw",s)}}},4402:(U,$,m)=>{var _=m(7084)("iterator"),e=!1;try{var t=0,n={next:function(){return{done:!!t++}},return:function(){e=!0}};n[_]=function(){return this},Array.from(n,function(){throw 2})}catch(r){}U.exports=function(r,s){if(!s&&!e)return!1;var u=!1;try{var b={};b[_]=function(){return{next:function(){return{done:u=!0}}}},r(b)}catch(x){}return u}},50181:(U,$,m)=>{var T=m(31588),_=T({}.toString),e=T("".slice);U.exports=function(t){return e(_(t),8,-1)}},80063:(U,$,m)=>{var T=m(22743),_=m(57575),e=m(24732),t=m(50181),r=m(7084)("toStringTag"),s=T.Object,u="Arguments"==t(function(){return arguments}());U.exports=_?t:function(x){var B,Z,ot;return void 0===x?"Undefined":null===x?"Null":"string"==typeof(Z=function(x,B){try{return x[B]}catch(Z){}}(B=s(x),r))?Z:u?t(B):"Object"==(ot=t(B))&&e(B.callee)?"Arguments":ot}},79087:(U,$,m)=>{var _=m(31588)("".replace),e=String(Error("zxcasd").stack),t=/\n\s*at [^:]*:[^\n]*/,n=t.test(e);U.exports=function(r,s){if(n&&"string"==typeof r)for(;s--;)r=_(r,t,"");return r}},75925:(U,$,m)=>{"use strict";var T=m(31588),_=m(70658),e=m(33613).getWeakData,t=m(10157),n=m(78103),r=m(43017),s=m(99883),u=m(53877),b=m(44030),x=m(34520),B=x.set,Z=x.getterFor,ot=u.find,et=u.findIndex,Tt=T([].splice),Pt=0,pt=function(Jt){return Jt.frozen||(Jt.frozen=new It)},It=function(){this.entries=[]},Ht=function(Jt,Ct){return ot(Jt.entries,function(bt){return bt[0]===Ct})};It.prototype={get:function(Jt){var Ct=Ht(this,Jt);if(Ct)return Ct[1]},has:function(Jt){return!!Ht(this,Jt)},set:function(Jt,Ct){var bt=Ht(this,Jt);bt?bt[1]=Ct:this.entries.push([Jt,Ct])},delete:function(Jt){var Ct=et(this.entries,function(bt){return bt[0]===Jt});return~Ct&&Tt(this.entries,Ct,1),!!~Ct}},U.exports={getConstructor:function(Jt,Ct,bt,st){var gt=Jt(function(Et,ut){r(Et,lt),B(Et,{type:Ct,id:Pt++,frozen:void 0}),null!=ut&&s(ut,Et[st],{that:Et,AS_ENTRIES:bt})}),lt=gt.prototype,Bt=Z(Ct),Dt=function(Et,ut,rt){var fe=Bt(Et),Mt=e(t(ut),!0);return!0===Mt?pt(fe).set(ut,rt):Mt[fe.id]=rt,Et};return _(lt,{delete:function(Et){var ut=Bt(this);if(!n(Et))return!1;var rt=e(Et);return!0===rt?pt(ut).delete(Et):rt&&b(rt,ut.id)&&delete rt[ut.id]},has:function(ut){var rt=Bt(this);if(!n(ut))return!1;var fe=e(ut);return!0===fe?pt(rt).has(ut):fe&&b(fe,rt.id)}}),_(lt,bt?{get:function(ut){var rt=Bt(this);if(n(ut)){var fe=e(ut);return!0===fe?pt(rt).get(ut):fe?fe[rt.id]:void 0}},set:function(ut,rt){return Dt(this,ut,rt)}}:{add:function(ut){return Dt(this,ut,!0)}}),gt}}},66657:(U,$,m)=>{"use strict";var T=m(70147),_=m(22743),e=m(33613),t=m(31469),n=m(78204),r=m(99883),s=m(43017),u=m(24732),b=m(78103),x=m(63598),B=m(13528).f,Z=m(53877).forEach,ot=m(25847),et=m(34520),Tt=et.set,Pt=et.getterFor;U.exports=function(pt,It,Ht){var Bt,Jt=-1!==pt.indexOf("Map"),Ct=-1!==pt.indexOf("Weak"),bt=Jt?"set":"add",st=_[pt],gt=st&&st.prototype,lt={};if(ot&&u(st)&&(Ct||gt.forEach&&!t(function(){(new st).entries().next()}))){var Dt=(Bt=It(function(ut,rt){Tt(s(ut,Dt),{type:pt,collection:new st}),null!=rt&&r(rt,ut[bt],{that:ut,AS_ENTRIES:Jt})})).prototype,Et=Pt(pt);Z(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(ut){var rt="add"==ut||"set"==ut;ut in gt&&(!Ct||"clear"!=ut)&&n(Dt,ut,function(fe,Mt){var Nt=Et(this).collection;if(!rt&&Ct&&!b(fe))return"get"==ut&&void 0;var ge=Nt[ut](0===fe?0:fe,Mt);return rt?this:ge})}),Ct||B(Dt,"size",{configurable:!0,get:function(){return Et(this).collection.size}})}else Bt=Ht.getConstructor(It,pt,Jt,bt),e.enable();return x(Bt,pt,!1,!0),lt[pt]=Bt,T({global:!0,forced:!0},lt),Ct||Ht.setStrong(Bt,pt,Jt),Bt}},47902:(U,$,m)=>{var T=m(44030),_=m(68566),e=m(26552),t=m(13528);U.exports=function(n,r,s){for(var u=_(r),b=t.f,x=e.f,B=0;B<u.length;B++){var Z=u[B];!T(n,Z)&&(!s||!T(s,Z))&&b(n,Z,x(r,Z))}}},15268:(U,$,m)=>{var _=m(7084)("match");U.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[_]=!1,"/./"[e](t)}catch(r){}}return!1}},87275:(U,$,m)=>{var T=m(31469);U.exports=!T(function(){function _(){}return _.prototype.constructor=null,Object.getPrototypeOf(new _)!==_.prototype})},690:(U,$,m)=>{"use strict";var T=m(39336).IteratorPrototype,_=m(80332),e=m(41137),t=m(63598),n=m(44362),r=function(){return this};U.exports=function(s,u,b,x){var B=u+" Iterator";return s.prototype=_(T,{next:e(+!x,b)}),t(s,B,!1,!0),n[B]=r,s}},78204:(U,$,m)=>{var T=m(25847),_=m(13528),e=m(41137);U.exports=T?function(t,n,r){return _.f(t,n,e(1,r))}:function(t,n,r){return t[n]=r,t}},41137:U=>{U.exports=function($,m){return{enumerable:!(1&$),configurable:!(2&$),writable:!(4&$),value:m}}},3115:(U,$,m)=>{"use strict";var T=m(73540),_=m(13528),e=m(41137);U.exports=function(t,n,r){var s=T(n);s in t?_.f(t,s,e(0,r)):t[s]=r}},52928:(U,$,m)=>{"use strict";var T=m(70147),_=m(85246),e=m(92838),t=m(56089),n=m(24732),r=m(690),s=m(84361),u=m(91100),b=m(63598),x=m(78204),B=m(51121),Z=m(7084),ot=m(44362),et=m(39336),Tt=t.PROPER,Pt=t.CONFIGURABLE,pt=et.IteratorPrototype,It=et.BUGGY_SAFARI_ITERATORS,Ht=Z("iterator"),Ct="values",bt="entries",st=function(){return this};U.exports=function(gt,lt,Bt,Dt,Et,ut,rt){r(Bt,lt,Dt);var ke,Ze,Di,fe=function($e){if($e===Et&&pe)return pe;if(!It&&$e in ge)return ge[$e];switch($e){case"keys":case Ct:case bt:return function(){return new Bt(this,$e)}}return function(){return new Bt(this)}},Mt=lt+" Iterator",Nt=!1,ge=gt.prototype,ve=ge[Ht]||ge["@@iterator"]||Et&&ge[Et],pe=!It&&ve||fe(Et),He="Array"==lt&&ge.entries||ve;if(He&&(ke=s(He.call(new gt)))!==Object.prototype&&ke.next&&(!e&&s(ke)!==pt&&(u?u(ke,pt):n(ke[Ht])||B(ke,Ht,st)),b(ke,Mt,!0,!0),e&&(ot[Mt]=st)),Tt&&Et==Ct&&ve&&ve.name!==Ct&&(!e&&Pt?x(ge,"name",Ct):(Nt=!0,pe=function(){return _(ve,this)})),Et)if(Ze={values:fe(Ct),keys:ut?pe:fe("keys"),entries:fe(bt)},rt)for(Di in Ze)(It||Nt||!(Di in ge))&&B(ge,Di,Ze[Di]);else T({target:lt,proto:!0,forced:It||Nt},Ze);return(!e||rt)&&ge[Ht]!==pe&&B(ge,Ht,pe,{name:Et}),ot[lt]=pe,Ze}},59478:(U,$,m)=>{var T=m(35060),_=m(44030),e=m(14525),t=m(13528).f;U.exports=function(n){var r=T.Symbol||(T.Symbol={});_(r,n)||t(r,n,{value:e.f(n)})}},25847:(U,$,m)=>{var T=m(31469);U.exports=!T(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},97947:(U,$,m)=>{var T=m(22743),_=m(78103),e=T.document,t=_(e)&&_(e.createElement);U.exports=function(n){return t?e.createElement(n):{}}},9113:U=>{U.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},28150:U=>{U.exports="object"==typeof window},93221:(U,$,m)=>{var T=m(91339),_=m(22743);U.exports=/ipad|iphone|ipod/i.test(T)&&void 0!==_.Pebble},49612:(U,$,m)=>{var T=m(91339);U.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(T)},70751:(U,$,m)=>{var T=m(50181),_=m(22743);U.exports="process"==T(_.process)},25330:(U,$,m)=>{var T=m(91339);U.exports=/web0s(?!.*chrome)/i.test(T)},91339:(U,$,m)=>{var T=m(85697);U.exports=T("navigator","userAgent")||""},10322:(U,$,m)=>{var s,u,T=m(22743),_=m(91339),e=T.process,t=T.Deno,n=e&&e.versions||t&&t.version,r=n&&n.v8;r&&(u=(s=r.split("."))[0]>0&&s[0]<4?1:+(s[0]+s[1])),!u&&_&&(!(s=_.match(/Edge\/(\d+)/))||s[1]>=74)&&(s=_.match(/Chrome\/(\d+)/))&&(u=+s[1]),U.exports=u},15547:(U,$,m)=>{var T=m(35060);U.exports=function(_){return T[_+"Prototype"]}},44169:U=>{U.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},92335:(U,$,m)=>{var T=m(31469),_=m(41137);U.exports=!T(function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",_(1,7)),7!==e.stack)})},70147:(U,$,m)=>{"use strict";var T=m(22743),_=m(30547),e=m(31588),t=m(24732),n=m(26552).f,r=m(35059),s=m(35060),u=m(21137),b=m(78204),x=m(44030),B=function(Z){var ot=function(et,Tt,Pt){if(this instanceof ot){switch(arguments.length){case 0:return new Z;case 1:return new Z(et);case 2:return new Z(et,Tt)}return new Z(et,Tt,Pt)}return _(Z,this,arguments)};return ot.prototype=Z.prototype,ot};U.exports=function(Z,ot){var bt,st,gt,lt,Bt,Dt,Et,ut,et=Z.target,Tt=Z.global,Pt=Z.stat,pt=Z.proto,It=Tt?T:Pt?T[et]:(T[et]||{}).prototype,Ht=Tt?s:s[et]||b(s,et,{})[et],Jt=Ht.prototype;for(gt in ot)bt=!r(Tt?gt:et+(Pt?".":"#")+gt,Z.forced)&&It&&x(It,gt),Bt=Ht[gt],bt&&(Dt=Z.noTargetGet?(ut=n(It,gt))&&ut.value:It[gt]),lt=bt&&Dt?Dt:ot[gt],(!bt||typeof Bt!=typeof lt)&&(Et=Z.bind&&bt?u(lt,T):Z.wrap&&bt?B(lt):pt&&t(lt)?e(lt):lt,(Z.sham||lt&&lt.sham||Bt&&Bt.sham)&&b(Et,"sham",!0),b(Ht,gt,Et),pt&&(x(s,st=et+"Prototype")||b(s,st,{}),b(s[st],gt,lt),Z.real&&Jt&&!Jt[gt]&&b(Jt,gt,lt)))}},31469:U=>{U.exports=function($){try{return!!$()}catch(m){return!0}}},23216:(U,$,m)=>{var T=m(31469);U.exports=!T(function(){return Object.isExtensible(Object.preventExtensions({}))})},30547:U=>{var $=Function.prototype,m=$.apply,_=$.call;U.exports="object"==typeof Reflect&&Reflect.apply||($.bind?_.bind(m):function(){return _.apply(m,arguments)})},21137:(U,$,m)=>{var T=m(31588),_=m(80866),e=T(T.bind);U.exports=function(t,n){return _(t),void 0===n?t:e?e(t,n):function(){return t.apply(n,arguments)}}},85246:U=>{var $=Function.prototype.call;U.exports=$.bind?$.bind($):function(){return $.apply($,arguments)}},56089:(U,$,m)=>{var T=m(25847),_=m(44030),e=Function.prototype,t=T&&Object.getOwnPropertyDescriptor,n=_(e,"name"),r=n&&"something"===function(){}.name,s=n&&(!T||T&&t(e,"name").configurable);U.exports={EXISTS:n,PROPER:r,CONFIGURABLE:s}},31588:U=>{var $=Function.prototype,m=$.bind,T=$.call,_=m&&m.bind(T);U.exports=m?function(e){return e&&_(T,e)}:function(e){return e&&function(){return T.apply(e,arguments)}}},85697:(U,$,m)=>{var T=m(35060),_=m(22743),e=m(24732),t=function(n){return e(n)?n:void 0};U.exports=function(n,r){return arguments.length<2?t(T[n])||t(_[n]):T[n]&&T[n][r]||_[n]&&_[n][r]}},56958:(U,$,m)=>{var T=m(80063),_=m(30047),e=m(44362),n=m(7084)("iterator");U.exports=function(r){if(null!=r)return _(r,n)||_(r,"@@iterator")||e[T(r)]}},74471:(U,$,m)=>{var T=m(22743),_=m(85246),e=m(80866),t=m(10157),n=m(99727),r=m(56958),s=T.TypeError;U.exports=function(u,b){var x=arguments.length<2?r(u):b;if(e(x))return t(_(x,u));throw s(n(u)+" is not iterable")}},30047:(U,$,m)=>{var T=m(80866);U.exports=function(_,e){var t=_[e];return null==t?void 0:T(t)}},22743:U=>{var $=function(m){return m&&m.Math==Math&&m};U.exports=$("object"==typeof globalThis&&globalThis)||$("object"==typeof window&&window)||$("object"==typeof self&&self)||$("object"==typeof global&&global)||function(){return this}()||Function("return this")()},44030:(U,$,m)=>{var T=m(31588),_=m(49402),e=T({}.hasOwnProperty);U.exports=Object.hasOwn||function(n,r){return e(_(n),r)}},89675:U=>{U.exports={}},18819:(U,$,m)=>{var T=m(22743);U.exports=function(_,e){var t=T.console;t&&t.error&&(1==arguments.length?t.error(_):t.error(_,e))}},93074:(U,$,m)=>{var T=m(85697);U.exports=T("document","documentElement")},5223:(U,$,m)=>{var T=m(25847),_=m(31469),e=m(97947);U.exports=!T&&!_(function(){return 7!=Object.defineProperty(e("div"),"a",{get:function(){return 7}}).a})},23767:(U,$,m)=>{var T=m(22743),_=m(31588),e=m(31469),t=m(50181),n=T.Object,r=_("".split);U.exports=e(function(){return!n("z").propertyIsEnumerable(0)})?function(s){return"String"==t(s)?r(s,""):n(s)}:n},13271:(U,$,m)=>{var T=m(31588),_=m(24732),e=m(65732),t=T(Function.toString);_(e.inspectSource)||(e.inspectSource=function(n){return t(n)}),U.exports=e.inspectSource},42783:(U,$,m)=>{var T=m(78103),_=m(78204);U.exports=function(e,t){T(t)&&"cause"in t&&_(e,"cause",t.cause)}},33613:(U,$,m)=>{var T=m(70147),_=m(31588),e=m(89675),t=m(78103),n=m(44030),r=m(13528).f,s=m(42769),u=m(24281),b=m(19086),x=m(7226),B=m(23216),Z=!1,ot=x("meta"),et=0,Tt=function(Ct){r(Ct,ot,{value:{objectID:"O"+et++,weakData:{}}})},Jt=U.exports={enable:function(){Jt.enable=function(){},Z=!0;var Ct=s.f,bt=_([].splice),st={};st[ot]=1,Ct(st).length&&(s.f=function(gt){for(var lt=Ct(gt),Bt=0,Dt=lt.length;Bt<Dt;Bt++)if(lt[Bt]===ot){bt(lt,Bt,1);break}return lt},T({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:u.f}))},fastKey:function(Ct,bt){if(!t(Ct))return"symbol"==typeof Ct?Ct:("string"==typeof Ct?"S":"P")+Ct;if(!n(Ct,ot)){if(!b(Ct))return"F";if(!bt)return"E";Tt(Ct)}return Ct[ot].objectID},getWeakData:function(Ct,bt){if(!n(Ct,ot)){if(!b(Ct))return!0;if(!bt)return!1;Tt(Ct)}return Ct[ot].weakData},onFreeze:function(Ct){return B&&Z&&b(Ct)&&!n(Ct,ot)&&Tt(Ct),Ct}};e[ot]=!0},34520:(U,$,m)=>{var ot,et,Tt,T=m(63185),_=m(22743),e=m(31588),t=m(78103),n=m(78204),r=m(44030),s=m(65732),u=m(35027),b=m(89675),x="Object already initialized",B=_.TypeError;if(T||s.state){var It=s.state||(s.state=new(0,_.WeakMap)),Ht=e(It.get),Jt=e(It.has),Ct=e(It.set);ot=function(st,gt){if(Jt(It,st))throw new B(x);return gt.facade=st,Ct(It,st,gt),gt},et=function(st){return Ht(It,st)||{}},Tt=function(st){return Jt(It,st)}}else{var bt=u("state");b[bt]=!0,ot=function(st,gt){if(r(st,bt))throw new B(x);return gt.facade=st,n(st,bt,gt),gt},et=function(st){return r(st,bt)?st[bt]:{}},Tt=function(st){return r(st,bt)}}U.exports={set:ot,get:et,has:Tt,enforce:function(st){return Tt(st)?et(st):ot(st,{})},getterFor:function(st){return function(gt){var lt;if(!t(gt)||(lt=et(gt)).type!==st)throw B("Incompatible receiver, "+st+" required");return lt}}}},83672:(U,$,m)=>{var T=m(7084),_=m(44362),e=T("iterator"),t=Array.prototype;U.exports=function(n){return void 0!==n&&(_.Array===n||t[e]===n)}},10371:(U,$,m)=>{var T=m(50181);U.exports=Array.isArray||function(e){return"Array"==T(e)}},24732:U=>{U.exports=function($){return"function"==typeof $}},67459:(U,$,m)=>{var T=m(31588),_=m(31469),e=m(24732),t=m(80063),n=m(85697),r=m(13271),s=function(){},u=[],b=n("Reflect","construct"),x=/^\s*(?:class|function)\b/,B=T(x.exec),Z=!x.exec(s),ot=function(Pt){if(!e(Pt))return!1;try{return b(s,u,Pt),!0}catch(pt){return!1}},et=function(Pt){if(!e(Pt))return!1;switch(t(Pt)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Z||!!B(x,r(Pt))}catch(pt){return!0}};et.sham=!0,U.exports=!b||_(function(){var Tt;return ot(ot.call)||!ot(Object)||!ot(function(){Tt=!0})||Tt})?et:ot},35059:(U,$,m)=>{var T=m(31469),_=m(24732),e=/#|\.prototype\./,t=function(b,x){var B=r[n(b)];return B==u||B!=s&&(_(x)?T(x):!!x)},n=t.normalize=function(b){return String(b).replace(e,".").toLowerCase()},r=t.data={},s=t.NATIVE="N",u=t.POLYFILL="P";U.exports=t},78103:(U,$,m)=>{var T=m(24732);U.exports=function(_){return"object"==typeof _?null!==_:T(_)}},92838:U=>{U.exports=!0},82888:(U,$,m)=>{var T=m(78103),_=m(50181),t=m(7084)("match");U.exports=function(n){var r;return T(n)&&(void 0!==(r=n[t])?!!r:"RegExp"==_(n))}},90094:(U,$,m)=>{var T=m(22743),_=m(85697),e=m(24732),t=m(76185),n=m(43587),r=T.Object;U.exports=n?function(s){return"symbol"==typeof s}:function(s){var u=_("Symbol");return e(u)&&t(u.prototype,r(s))}},99883:(U,$,m)=>{var T=m(22743),_=m(21137),e=m(85246),t=m(10157),n=m(99727),r=m(83672),s=m(33706),u=m(76185),b=m(74471),x=m(56958),B=m(14964),Z=T.TypeError,ot=function(Tt,Pt){this.stopped=Tt,this.result=Pt},et=ot.prototype;U.exports=function(Tt,Pt,pt){var st,gt,lt,Bt,Dt,Et,ut,Ht=!(!pt||!pt.AS_ENTRIES),Jt=!(!pt||!pt.IS_ITERATOR),Ct=!(!pt||!pt.INTERRUPTED),bt=_(Pt,pt&&pt.that),rt=function(Mt){return st&&B(st,"normal",Mt),new ot(!0,Mt)},fe=function(Mt){return Ht?(t(Mt),Ct?bt(Mt[0],Mt[1],rt):bt(Mt[0],Mt[1])):Ct?bt(Mt,rt):bt(Mt)};if(Jt)st=Tt;else{if(!(gt=x(Tt)))throw Z(n(Tt)+" is not iterable");if(r(gt)){for(lt=0,Bt=s(Tt);Bt>lt;lt++)if((Dt=fe(Tt[lt]))&&u(et,Dt))return Dt;return new ot(!1)}st=b(Tt,gt)}for(Et=st.next;!(ut=e(Et,st)).done;){try{Dt=fe(ut.value)}catch(Mt){B(st,"throw",Mt)}if("object"==typeof Dt&&Dt&&u(et,Dt))return Dt}return new ot(!1)}},14964:(U,$,m)=>{var T=m(85246),_=m(10157),e=m(30047);U.exports=function(t,n,r){var s,u;_(t);try{if(!(s=e(t,"return"))){if("throw"===n)throw r;return r}s=T(s,t)}catch(b){u=!0,s=b}if("throw"===n)throw r;if(u)throw s;return _(s),r}},39336:(U,$,m)=>{"use strict";var x,B,Z,T=m(31469),_=m(24732),e=m(80332),t=m(84361),n=m(51121),r=m(7084),s=m(92838),u=r("iterator"),b=!1;[].keys&&("next"in(Z=[].keys())?(B=t(t(Z)))!==Object.prototype&&(x=B):b=!0),null==x||T(function(){var et={};return x[u].call(et)!==et})?x={}:s&&(x=e(x)),_(x[u])||n(x,u,function(){return this}),U.exports={IteratorPrototype:x,BUGGY_SAFARI_ITERATORS:b}},44362:U=>{U.exports={}},33706:(U,$,m)=>{var T=m(61468);U.exports=function(_){return T(_.length)}},72845:(U,$,m)=>{var Tt,Pt,pt,It,Ht,Jt,Ct,bt,T=m(22743),_=m(21137),e=m(26552).f,t=m(76401).set,n=m(49612),r=m(93221),s=m(25330),u=m(70751),b=T.MutationObserver||T.WebKitMutationObserver,x=T.document,B=T.process,Z=T.Promise,ot=e(T,"queueMicrotask"),et=ot&&ot.value;et||(Tt=function(){var st,gt;for(u&&(st=B.domain)&&st.exit();Pt;){gt=Pt.fn,Pt=Pt.next;try{gt()}catch(lt){throw Pt?It():pt=void 0,lt}}pt=void 0,st&&st.enter()},n||u||s||!b||!x?!r&&Z&&Z.resolve?((Ct=Z.resolve(void 0)).constructor=Z,bt=_(Ct.then,Ct),It=function(){bt(Tt)}):u?It=function(){B.nextTick(Tt)}:(t=_(t,T),It=function(){t(Tt)}):(Ht=!0,Jt=x.createTextNode(""),new b(Tt).observe(Jt,{characterData:!0}),It=function(){Jt.data=Ht=!Ht})),U.exports=et||function(st){var gt={fn:st,next:void 0};pt&&(pt.next=gt),Pt||(Pt=gt,It()),pt=gt}},38977:(U,$,m)=>{var T=m(22743);U.exports=T.Promise},62581:(U,$,m)=>{var T=m(10322),_=m(31469);U.exports=!!Object.getOwnPropertySymbols&&!_(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&T&&T<41})},2049:(U,$,m)=>{var T=m(31469),_=m(7084),e=m(92838),t=_("iterator");U.exports=!T(function(){var n=new URL("b?a=1&b=2&c=3","http://a"),r=n.searchParams,s="";return n.pathname="c%20d",r.forEach(function(u,b){r.delete("b"),s+=b+u}),e&&!n.toJSON||!r.sort||"http://a/c%20d?a=1&c=3"!==n.href||"3"!==r.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!r[t]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==s||"x"!==new URL("http://x",void 0).host})},63185:(U,$,m)=>{var T=m(22743),_=m(24732),e=m(13271),t=T.WeakMap;U.exports=_(t)&&/native code/.test(e(t))},39802:(U,$,m)=>{"use strict";var T=m(80866),_=function(e){var t,n;this.promise=new e(function(r,s){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=r,n=s}),this.resolve=T(t),this.reject=T(n)};U.exports.f=function(e){return new _(e)}},58823:(U,$,m)=>{var T=m(94506);U.exports=function(_,e){return void 0===_?arguments.length<2?"":e:T(_)}},43353:(U,$,m)=>{var T=m(22743),_=m(82888),e=T.TypeError;U.exports=function(t){if(_(t))throw e("The method doesn't accept regular expressions");return t}},94347:(U,$,m)=>{"use strict";var T=m(25847),_=m(31588),e=m(85246),t=m(31469),n=m(77978),r=m(30233),s=m(19664),u=m(49402),b=m(23767),x=Object.assign,B=Object.defineProperty,Z=_([].concat);U.exports=!x||t(function(){if(T&&1!==x({b:1},x(B({},"a",{enumerable:!0,get:function(){B(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var ot={},et={},Tt=Symbol(),Pt="abcdefghijklmnopqrst";return ot[Tt]=7,Pt.split("").forEach(function(pt){et[pt]=pt}),7!=x({},ot)[Tt]||n(x({},et)).join("")!=Pt})?function(et,Tt){for(var Pt=u(et),pt=arguments.length,It=1,Ht=r.f,Jt=s.f;pt>It;)for(var lt,Ct=b(arguments[It++]),bt=Ht?Z(n(Ct),Ht(Ct)):n(Ct),st=bt.length,gt=0;st>gt;)lt=bt[gt++],(!T||e(Jt,Ct,lt))&&(Pt[lt]=Ct[lt]);return Pt}:x},80332:(U,$,m)=>{var pt,T=m(10157),_=m(68453),e=m(44169),t=m(89675),n=m(93074),r=m(97947),s=m(35027),x="prototype",B="script",Z=s("IE_PROTO"),ot=function(){},et=function(Ht){return"<"+B+">"+Ht+"</"+B+">"},Tt=function(Ht){Ht.write(et("")),Ht.close();var Jt=Ht.parentWindow.Object;return Ht=null,Jt},It=function(){try{pt=new ActiveXObject("htmlfile")}catch(Jt){}It="undefined"!=typeof document?document.domain&&pt?Tt(pt):function(){var Ct,Ht=r("iframe");return Ht.style.display="none",n.appendChild(Ht),Ht.src=String("javascript:"),(Ct=Ht.contentWindow.document).open(),Ct.write(et("document.F=Object")),Ct.close(),Ct.F}():Tt(pt);for(var Ht=e.length;Ht--;)delete It[x][e[Ht]];return It()};t[Z]=!0,U.exports=Object.create||function(Jt,Ct){var bt;return null!==Jt?(ot[x]=T(Jt),bt=new ot,ot[x]=null,bt[Z]=Jt):bt=It(),void 0===Ct?bt:_(bt,Ct)}},68453:(U,$,m)=>{var T=m(25847),_=m(13528),e=m(10157),t=m(35197),n=m(77978);U.exports=T?Object.defineProperties:function(s,u){e(s);for(var ot,b=t(u),x=n(u),B=x.length,Z=0;B>Z;)_.f(s,ot=x[Z++],b[ot]);return s}},13528:(U,$,m)=>{var T=m(22743),_=m(25847),e=m(5223),t=m(10157),n=m(73540),r=T.TypeError,s=Object.defineProperty;$.f=_?s:function(b,x,B){if(t(b),x=n(x),t(B),e)try{return s(b,x,B)}catch(Z){}if("get"in B||"set"in B)throw r("Accessors not supported");return"value"in B&&(b[x]=B.value),b}},26552:(U,$,m)=>{var T=m(25847),_=m(85246),e=m(19664),t=m(41137),n=m(35197),r=m(73540),s=m(44030),u=m(5223),b=Object.getOwnPropertyDescriptor;$.f=T?b:function(B,Z){if(B=n(B),Z=r(Z),u)try{return b(B,Z)}catch(ot){}if(s(B,Z))return t(!_(e.f,B,Z),B[Z])}},24281:(U,$,m)=>{var T=m(50181),_=m(35197),e=m(42769).f,t=m(11566),n="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];U.exports.f=function(u){return n&&"Window"==T(u)?function(s){try{return e(s)}catch(u){return t(n)}}(u):e(_(u))}},42769:(U,$,m)=>{var T=m(1991),e=m(44169).concat("length","prototype");$.f=Object.getOwnPropertyNames||function(n){return T(n,e)}},30233:(U,$)=>{$.f=Object.getOwnPropertySymbols},84361:(U,$,m)=>{var T=m(22743),_=m(44030),e=m(24732),t=m(49402),n=m(35027),r=m(87275),s=n("IE_PROTO"),u=T.Object,b=u.prototype;U.exports=r?u.getPrototypeOf:function(x){var B=t(x);if(_(B,s))return B[s];var Z=B.constructor;return e(Z)&&B instanceof Z?Z.prototype:B instanceof u?b:null}},19086:(U,$,m)=>{var T=m(31469),_=m(78103),e=m(50181),t=m(35877),n=Object.isExtensible,r=T(function(){n(1)});U.exports=r||t?function(u){return!(!_(u)||t&&"ArrayBuffer"==e(u))&&(!n||n(u))}:n},76185:(U,$,m)=>{var T=m(31588);U.exports=T({}.isPrototypeOf)},1991:(U,$,m)=>{var T=m(31588),_=m(44030),e=m(35197),t=m(68047).indexOf,n=m(89675),r=T([].push);U.exports=function(s,u){var Z,b=e(s),x=0,B=[];for(Z in b)!_(n,Z)&&_(b,Z)&&r(B,Z);for(;u.length>x;)_(b,Z=u[x++])&&(~t(B,Z)||r(B,Z));return B}},77978:(U,$,m)=>{var T=m(1991),_=m(44169);U.exports=Object.keys||function(t){return T(t,_)}},19664:(U,$)=>{"use strict";var m={}.propertyIsEnumerable,T=Object.getOwnPropertyDescriptor,_=T&&!m.call({1:2},1);$.f=_?function(t){var n=T(this,t);return!!n&&n.enumerable}:m},91100:(U,$,m)=>{var T=m(31588),_=m(10157),e=m(58995);U.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var r,t=!1,n={};try{(r=T(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(s){}return function(u,b){return _(u),e(b),t?r(u,b):u.__proto__=b,u}}():void 0)},6936:(U,$,m)=>{var T=m(25847),_=m(31588),e=m(77978),t=m(35197),r=_(m(19664).f),s=_([].push),u=function(b){return function(x){for(var Pt,B=t(x),Z=e(B),ot=Z.length,et=0,Tt=[];ot>et;)Pt=Z[et++],(!T||r(B,Pt))&&s(Tt,b?[Pt,B[Pt]]:B[Pt]);return Tt}};U.exports={entries:u(!0),values:u(!1)}},93005:(U,$,m)=>{"use strict";var T=m(57575),_=m(80063);U.exports=T?{}.toString:function(){return"[object "+_(this)+"]"}},75671:(U,$,m)=>{var T=m(22743),_=m(85246),e=m(24732),t=m(78103),n=T.TypeError;U.exports=function(r,s){var u,b;if("string"===s&&e(u=r.toString)&&!t(b=_(u,r))||e(u=r.valueOf)&&!t(b=_(u,r))||"string"!==s&&e(u=r.toString)&&!t(b=_(u,r)))return b;throw n("Can't convert object to primitive value")}},68566:(U,$,m)=>{var T=m(85697),_=m(31588),e=m(42769),t=m(30233),n=m(10157),r=_([].concat);U.exports=T("Reflect","ownKeys")||function(u){var b=e.f(n(u)),x=t.f;return x?r(b,x(u)):b}},35060:U=>{U.exports={}},50819:U=>{U.exports=function($){try{return{error:!1,value:$()}}catch(m){return{error:!0,value:m}}}},92273:(U,$,m)=>{var T=m(10157),_=m(78103),e=m(39802);U.exports=function(t,n){if(T(t),_(n)&&n.constructor===t)return n;var r=e.f(t);return(0,r.resolve)(n),r.promise}},75893:U=>{var $=function(){this.head=null,this.tail=null};$.prototype={add:function(m){var T={item:m,next:null};this.head?this.tail.next=T:this.head=T,this.tail=T},get:function(){var m=this.head;if(m)return this.head=m.next,this.tail===m&&(this.tail=null),m.item}},U.exports=$},70658:(U,$,m)=>{var T=m(51121);U.exports=function(_,e,t){for(var n in e)t&&t.unsafe&&_[n]?_[n]=e[n]:T(_,n,e[n],t);return _}},51121:(U,$,m)=>{var T=m(78204);U.exports=function(_,e,t,n){n&&n.enumerable?_[e]=t:T(_,e,t)}},86213:(U,$,m)=>{var _=m(22743).TypeError;U.exports=function(e){if(null==e)throw _("Can't call method on "+e);return e}},41728:(U,$,m)=>{var T=m(22743),_=Object.defineProperty;U.exports=function(e,t){try{_(T,e,{value:t,configurable:!0,writable:!0})}catch(n){T[e]=t}return t}},13961:(U,$,m)=>{"use strict";var T=m(85697),_=m(13528),e=m(7084),t=m(25847),n=e("species");U.exports=function(r){var s=T(r);t&&s&&!s[n]&&(0,_.f)(s,n,{configurable:!0,get:function(){return this}})}},63598:(U,$,m)=>{var T=m(57575),_=m(13528).f,e=m(78204),t=m(44030),n=m(93005),s=m(7084)("toStringTag");U.exports=function(u,b,x,B){if(u){var Z=x?u:u.prototype;t(Z,s)||_(Z,s,{configurable:!0,value:b}),B&&!T&&e(Z,"toString",n)}}},35027:(U,$,m)=>{var T=m(843),_=m(7226),e=T("keys");U.exports=function(t){return e[t]||(e[t]=_(t))}},65732:(U,$,m)=>{var T=m(22743),_=m(41728),e="__core-js_shared__",t=T[e]||_(e,{});U.exports=t},843:(U,$,m)=>{var T=m(92838),_=m(65732);(U.exports=function(e,t){return _[e]||(_[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.20.1",mode:T?"pure":"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})},85972:(U,$,m)=>{var T=m(10157),_=m(77498),t=m(7084)("species");U.exports=function(n,r){var u,s=T(n).constructor;return void 0===s||null==(u=T(s)[t])?r:_(u)}},93071:(U,$,m)=>{var T=m(31588),_=m(21524),e=m(94506),t=m(86213),n=T("".charAt),r=T("".charCodeAt),s=T("".slice),u=function(b){return function(x,B){var Tt,Pt,Z=e(t(x)),ot=_(B),et=Z.length;return ot<0||ot>=et?b?"":void 0:(Tt=r(Z,ot))<55296||Tt>56319||ot+1===et||(Pt=r(Z,ot+1))<56320||Pt>57343?b?n(Z,ot):Tt:b?s(Z,ot,ot+2):Pt-56320+(Tt-55296<<10)+65536}};U.exports={codeAt:u(!1),charAt:u(!0)}},76401:(U,$,m)=>{var bt,st,gt,lt,T=m(22743),_=m(30547),e=m(21137),t=m(24732),n=m(44030),r=m(31469),s=m(93074),u=m(90840),b=m(97947),x=m(49612),B=m(70751),Z=T.setImmediate,ot=T.clearImmediate,et=T.process,Tt=T.Dispatch,Pt=T.Function,pt=T.MessageChannel,It=T.String,Ht=0,Jt={},Ct="onreadystatechange";try{bt=T.location}catch(rt){}var Bt=function(rt){if(n(Jt,rt)){var fe=Jt[rt];delete Jt[rt],fe()}},Dt=function(rt){return function(){Bt(rt)}},Et=function(rt){Bt(rt.data)},ut=function(rt){T.postMessage(It(rt),bt.protocol+"//"+bt.host)};(!Z||!ot)&&(Z=function(fe){var Mt=u(arguments,1);return Jt[++Ht]=function(){_(t(fe)?fe:Pt(fe),void 0,Mt)},st(Ht),Ht},ot=function(fe){delete Jt[fe]},B?st=function(rt){et.nextTick(Dt(rt))}:Tt&&Tt.now?st=function(rt){Tt.now(Dt(rt))}:pt&&!x?(lt=(gt=new pt).port2,gt.port1.onmessage=Et,st=e(lt.postMessage,lt)):T.addEventListener&&t(T.postMessage)&&!T.importScripts&&bt&&"file:"!==bt.protocol&&!r(ut)?(st=ut,T.addEventListener("message",Et,!1)):st=Ct in b("script")?function(rt){s.appendChild(b("script"))[Ct]=function(){s.removeChild(this),Bt(rt)}}:function(rt){setTimeout(Dt(rt),0)}),U.exports={set:Z,clear:ot}},83889:(U,$,m)=>{var T=m(21524),_=Math.max,e=Math.min;U.exports=function(t,n){var r=T(t);return r<0?_(r+n,0):e(r,n)}},35197:(U,$,m)=>{var T=m(23767),_=m(86213);U.exports=function(e){return T(_(e))}},21524:U=>{var $=Math.ceil,m=Math.floor;U.exports=function(T){var _=+T;return _!=_||0===_?0:(_>0?m:$)(_)}},61468:(U,$,m)=>{var T=m(21524),_=Math.min;U.exports=function(e){return e>0?_(T(e),9007199254740991):0}},49402:(U,$,m)=>{var T=m(22743),_=m(86213),e=T.Object;U.exports=function(t){return e(_(t))}},25696:(U,$,m)=>{var T=m(22743),_=m(85246),e=m(78103),t=m(90094),n=m(30047),r=m(75671),s=m(7084),u=T.TypeError,b=s("toPrimitive");U.exports=function(x,B){if(!e(x)||t(x))return x;var ot,Z=n(x,b);if(Z){if(void 0===B&&(B="default"),ot=_(Z,x,B),!e(ot)||t(ot))return ot;throw u("Can't convert object to primitive value")}return void 0===B&&(B="number"),r(x,B)}},73540:(U,$,m)=>{var T=m(25696),_=m(90094);U.exports=function(e){var t=T(e,"string");return _(t)?t:t+""}},57575:(U,$,m)=>{var e={};e[m(7084)("toStringTag")]="z",U.exports="[object z]"===String(e)},94506:(U,$,m)=>{var T=m(22743),_=m(80063),e=T.String;U.exports=function(t){if("Symbol"===_(t))throw TypeError("Cannot convert a Symbol value to a string");return e(t)}},99727:(U,$,m)=>{var _=m(22743).String;U.exports=function(e){try{return _(e)}catch(t){return"Object"}}},7226:(U,$,m)=>{var T=m(31588),_=0,e=Math.random(),t=T(1..toString);U.exports=function(n){return"Symbol("+(void 0===n?"":n)+")_"+t(++_+e,36)}},43587:(U,$,m)=>{var T=m(62581);U.exports=T&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},14525:(U,$,m)=>{var T=m(7084);$.f=T},7084:(U,$,m)=>{var T=m(22743),_=m(843),e=m(44030),t=m(7226),n=m(62581),r=m(43587),s=_("wks"),u=T.Symbol,b=u&&u.for,x=r?u:u&&u.withoutSetter||t;U.exports=function(B){if(!e(s,B)||!n&&"string"!=typeof s[B]){var Z="Symbol."+B;s[B]=n&&e(u,B)?u[B]:r&&b?b(Z):x(Z)}return s[B]}},84722:(U,$,m)=>{"use strict";var T=m(70147),_=m(22743),e=m(76185),t=m(84361),n=m(91100),r=m(47902),s=m(80332),u=m(78204),b=m(41137),x=m(79087),B=m(42783),Z=m(99883),ot=m(58823),et=m(7084),Tt=m(92335),Pt=et("toStringTag"),pt=_.Error,It=[].push,Ht=function(bt,st){var Bt,gt=arguments.length>2?arguments[2]:void 0,lt=e(Jt,this);n?Bt=n(new pt,lt?t(this):Jt):(Bt=lt?this:s(Jt),u(Bt,Pt,"Error")),void 0!==st&&u(Bt,"message",ot(st)),Tt&&u(Bt,"stack",x(Bt.stack,1)),B(Bt,gt);var Dt=[];return Z(bt,It,{that:Dt}),u(Bt,"errors",Dt),Bt};n?n(Ht,pt):r(Ht,pt,{name:!0});var Jt=Ht.prototype=s(pt.prototype,{constructor:b(1,Ht),message:b(1,""),name:b(1,"AggregateError")});T({global:!0},{AggregateError:Ht})},56874:(U,$,m)=>{"use strict";var T=m(70147),_=m(22743),e=m(31469),t=m(10371),n=m(78103),r=m(49402),s=m(33706),u=m(3115),b=m(4414),x=m(85367),B=m(7084),Z=m(10322),ot=B("isConcatSpreadable"),et=9007199254740991,Tt="Maximum allowed index exceeded",Pt=_.TypeError,pt=Z>=51||!e(function(){var Ct=[];return Ct[ot]=!1,Ct.concat()[0]!==Ct}),It=x("concat"),Ht=function(Ct){if(!n(Ct))return!1;var bt=Ct[ot];return void 0!==bt?!!bt:t(Ct)};T({target:"Array",proto:!0,forced:!pt||!It},{concat:function(bt){var Bt,Dt,Et,ut,rt,st=r(this),gt=b(st,0),lt=0;for(Bt=-1,Et=arguments.length;Bt<Et;Bt++)if(Ht(rt=-1===Bt?st:arguments[Bt])){if(lt+(ut=s(rt))>et)throw Pt(Tt);for(Dt=0;Dt<ut;Dt++,lt++)Dt in rt&&u(gt,lt,rt[Dt])}else{if(lt>=et)throw Pt(Tt);u(gt,lt++,rt)}return gt.length=lt,gt}})},7100:(U,$,m)=>{"use strict";var T=m(70147),_=m(53877).filter;T({target:"Array",proto:!0,forced:!m(85367)("filter")},{filter:function(r){return _(this,r,arguments.length>1?arguments[1]:void 0)}})},96648:(U,$,m)=>{"use strict";var T=m(70147),_=m(53877).find,e=m(70677),t="find",n=!0;t in[]&&Array(1)[t](function(){n=!1}),T({target:"Array",proto:!0,forced:n},{find:function(s){return _(this,s,arguments.length>1?arguments[1]:void 0)}}),e(t)},58665:(U,$,m)=>{"use strict";var T=m(70147),_=m(19875);T({target:"Array",proto:!0,forced:[].forEach!=_},{forEach:_})},48161:(U,$,m)=>{var T=m(70147),_=m(96397);T({target:"Array",stat:!0,forced:!m(4402)(function(n){Array.from(n)})},{from:_})},85124:(U,$,m)=>{"use strict";var T=m(70147),_=m(68047).includes,e=m(70677);T({target:"Array",proto:!0},{includes:function(n){return _(this,n,arguments.length>1?arguments[1]:void 0)}}),e("includes")},89815:(U,$,m)=>{"use strict";var T=m(70147),_=m(31588),e=m(68047).indexOf,t=m(52995),n=_([].indexOf),r=!!n&&1/n([1],1,-0)<0,s=t("indexOf");T({target:"Array",proto:!0,forced:r||!s},{indexOf:function(b){var x=arguments.length>1?arguments[1]:void 0;return r?n(this,b,x)||0:e(this,b,x)}})},71006:(U,$,m)=>{m(70147)({target:"Array",stat:!0},{isArray:m(10371)})},71420:(U,$,m)=>{"use strict";var T=m(35197),_=m(70677),e=m(44362),t=m(34520),n=m(13528).f,r=m(52928),s=m(92838),u=m(25847),b="Array Iterator",x=t.set,B=t.getterFor(b);U.exports=r(Array,"Array",function(ot,et){x(this,{type:b,target:T(ot),index:0,kind:et})},function(){var ot=B(this),et=ot.target,Tt=ot.kind,Pt=ot.index++;return!et||Pt>=et.length?(ot.target=void 0,{value:void 0,done:!0}):"keys"==Tt?{value:Pt,done:!1}:"values"==Tt?{value:et[Pt],done:!1}:{value:[Pt,et[Pt]],done:!1}},"values");var Z=e.Arguments=e.Array;if(_("keys"),_("values"),_("entries"),!s&&u&&"values"!==Z.name)try{n(Z,"name",{value:"values"})}catch(ot){}},81171:(U,$,m)=>{"use strict";var T=m(70147),_=m(53877).map;T({target:"Array",proto:!0,forced:!m(85367)("map")},{map:function(r){return _(this,r,arguments.length>1?arguments[1]:void 0)}})},21311:(U,$,m)=>{"use strict";var T=m(70147),_=m(22743),e=m(10371),t=m(67459),n=m(78103),r=m(83889),s=m(33706),u=m(35197),b=m(3115),x=m(7084),B=m(85367),Z=m(90840),ot=B("slice"),et=x("species"),Tt=_.Array,Pt=Math.max;T({target:"Array",proto:!0,forced:!ot},{slice:function(It,Ht){var gt,lt,Bt,Jt=u(this),Ct=s(Jt),bt=r(It,Ct),st=r(void 0===Ht?Ct:Ht,Ct);if(e(Jt)&&((t(gt=Jt.constructor)&&(gt===Tt||e(gt.prototype))||n(gt)&&null===(gt=gt[et]))&&(gt=void 0),gt===Tt||void 0===gt))return Z(Jt,bt,st);for(lt=new(void 0===gt?Tt:gt)(Pt(st-bt,0)),Bt=0;bt<st;bt++,Bt++)bt in Jt&&b(lt,Bt,Jt[bt]);return lt.length=Bt,lt}})},19314:(U,$,m)=>{"use strict";var T=m(70147),_=m(22743),e=m(83889),t=m(21524),n=m(33706),r=m(49402),s=m(4414),u=m(3115),x=m(85367)("splice"),B=_.TypeError,Z=Math.max,ot=Math.min,et=9007199254740991,Tt="Maximum allowed length exceeded";T({target:"Array",proto:!0,forced:!x},{splice:function(pt,It){var st,gt,lt,Bt,Dt,Et,Ht=r(this),Jt=n(Ht),Ct=e(pt,Jt),bt=arguments.length;if(0===bt?st=gt=0:1===bt?(st=0,gt=Jt-Ct):(st=bt-2,gt=ot(Z(t(It),0),Jt-Ct)),Jt+st-gt>et)throw B(Tt);for(lt=s(Ht,gt),Bt=0;Bt<gt;Bt++)(Dt=Ct+Bt)in Ht&&u(lt,Bt,Ht[Dt]);if(lt.length=gt,st<gt){for(Bt=Ct;Bt<Jt-gt;Bt++)Et=Bt+st,(Dt=Bt+gt)in Ht?Ht[Et]=Ht[Dt]:delete Ht[Et];for(Bt=Jt;Bt>Jt-gt+st;Bt--)delete Ht[Bt-1]}else if(st>gt)for(Bt=Jt-gt;Bt>Ct;Bt--)Et=Bt+st-1,(Dt=Bt+gt-1)in Ht?Ht[Et]=Ht[Dt]:delete Ht[Et];for(Bt=0;Bt<st;Bt++)Ht[Bt+Ct]=arguments[Bt+2];return Ht.length=Jt-gt+st,lt}})},86061:(U,$,m)=>{var T=m(70147),_=m(22743),e=m(85697),t=m(30547),n=m(31588),r=m(31469),s=_.Array,u=e("JSON","stringify"),b=n(/./.exec),x=n("".charAt),B=n("".charCodeAt),Z=n("".replace),ot=n(1..toString),et=/[\uD800-\uDFFF]/g,Tt=/^[\uD800-\uDBFF]$/,Pt=/^[\uDC00-\uDFFF]$/,pt=function(Ht,Jt,Ct){var bt=x(Ct,Jt-1),st=x(Ct,Jt+1);return b(Tt,Ht)&&!b(Pt,st)||b(Pt,Ht)&&!b(Tt,bt)?"\\u"+ot(B(Ht,0),16):Ht},It=r(function(){return'"\\udf06\\ud834"'!==u("\udf06\ud834")||'"\\udead"'!==u("\udead")});u&&T({target:"JSON",stat:!0,forced:It},{stringify:function(Jt,Ct,bt){for(var st=0,gt=arguments.length,lt=s(gt);st<gt;st++)lt[st]=arguments[st];var Bt=t(u,null,lt);return"string"==typeof Bt?Z(Bt,et,pt):Bt}})},85504:(U,$,m)=>{var T=m(22743);m(63598)(T.JSON,"JSON",!0)},15551:()=>{},7923:(U,$,m)=>{var T=m(70147),_=m(94347);T({target:"Object",stat:!0,forced:Object.assign!==_},{assign:_})},13227:(U,$,m)=>{var T=m(70147),_=m(25847);T({target:"Object",stat:!0,forced:!_,sham:!_},{defineProperties:m(68453)})},24526:(U,$,m)=>{var T=m(70147),_=m(25847);T({target:"Object",stat:!0,forced:!_,sham:!_},{defineProperty:m(13528).f})},50042:(U,$,m)=>{var T=m(70147),_=m(6936).entries;T({target:"Object",stat:!0},{entries:function(t){return _(t)}})},49711:(U,$,m)=>{var T=m(70147),_=m(31469),e=m(35197),t=m(26552).f,n=m(25847),r=_(function(){t(1)});T({target:"Object",stat:!0,forced:!n||r,sham:!n},{getOwnPropertyDescriptor:function(b,x){return t(e(b),x)}})},10130:(U,$,m)=>{var T=m(70147),_=m(25847),e=m(68566),t=m(35197),n=m(26552),r=m(3115);T({target:"Object",stat:!0,sham:!_},{getOwnPropertyDescriptors:function(u){for(var et,Tt,b=t(u),x=n.f,B=e(b),Z={},ot=0;B.length>ot;)void 0!==(Tt=x(b,et=B[ot++]))&&r(Z,et,Tt);return Z}})},68126:(U,$,m)=>{var T=m(70147),_=m(49402),e=m(77978);T({target:"Object",stat:!0,forced:m(31469)(function(){e(1)})},{keys:function(s){return e(_(s))}})},42271:()=>{},52568:(U,$,m)=>{"use strict";var T=m(70147),_=m(85246),e=m(80866),t=m(39802),n=m(50819),r=m(99883);T({target:"Promise",stat:!0},{allSettled:function(u){var b=this,x=t.f(b),B=x.resolve,Z=x.reject,ot=n(function(){var et=e(b.resolve),Tt=[],Pt=0,pt=1;r(u,function(It){var Ht=Pt++,Jt=!1;pt++,_(et,b,It).then(function(Ct){Jt||(Jt=!0,Tt[Ht]={status:"fulfilled",value:Ct},--pt||B(Tt))},function(Ct){Jt||(Jt=!0,Tt[Ht]={status:"rejected",reason:Ct},--pt||B(Tt))})}),--pt||B(Tt)});return ot.error&&Z(ot.value),x.promise}})},64111:(U,$,m)=>{"use strict";var T=m(70147),_=m(80866),e=m(85697),t=m(85246),n=m(39802),r=m(50819),s=m(99883),u="No one promise resolved";T({target:"Promise",stat:!0},{any:function(x){var B=this,Z=e("AggregateError"),ot=n.f(B),et=ot.resolve,Tt=ot.reject,Pt=r(function(){var pt=_(B.resolve),It=[],Ht=0,Jt=1,Ct=!1;s(x,function(bt){var st=Ht++,gt=!1;Jt++,t(pt,B,bt).then(function(lt){gt||Ct||(Ct=!0,et(lt))},function(lt){gt||Ct||(gt=!0,It[st]=lt,--Jt||Tt(new Z(It,u)))})}),--Jt||Tt(new Z(It,u))});return Pt.error&&Tt(Pt.value),ot.promise}})},1395:(U,$,m)=>{"use strict";var T=m(70147),_=m(92838),e=m(38977),t=m(31469),n=m(85697),r=m(24732),s=m(85972),u=m(92273),b=m(51121);if(T({target:"Promise",proto:!0,real:!0,forced:!!e&&t(function(){e.prototype.finally.call({then:function(){}},function(){})})},{finally:function(Z){var ot=s(this,n("Promise")),et=r(Z);return this.then(et?function(Tt){return u(ot,Z()).then(function(){return Tt})}:Z,et?function(Tt){return u(ot,Z()).then(function(){throw Tt})}:Z)}}),!_&&r(e)){var B=n("Promise").prototype.finally;e.prototype.finally!==B&&b(e.prototype,"finally",B,{unsafe:!0})}},17569:(U,$,m)=>{"use strict";var re,me,ye,Qt,T=m(70147),_=m(92838),e=m(22743),t=m(85697),n=m(85246),r=m(38977),s=m(51121),u=m(70658),b=m(91100),x=m(63598),B=m(13961),Z=m(80866),ot=m(24732),et=m(78103),Tt=m(43017),Pt=m(13271),pt=m(99883),It=m(4402),Ht=m(85972),Jt=m(76401).set,Ct=m(72845),bt=m(92273),st=m(18819),gt=m(39802),lt=m(50819),Bt=m(75893),Dt=m(34520),Et=m(35059),ut=m(7084),rt=m(28150),fe=m(70751),Mt=m(10322),Nt=ut("species"),ge="Promise",ve=Dt.getterFor(ge),pe=Dt.set,He=Dt.getterFor(ge),ke=r&&r.prototype,Ze=r,Di=ke,$e=e.TypeError,Le=e.document,pi=e.process,Gt=gt.f,Se=Gt,Zt=!!(Le&&Le.createEvent&&e.dispatchEvent),ie=ot(e.PromiseRejectionEvent),St="unhandledrejection",Oe=!1,de=Et(ge,function(){var je=Pt(Ze),Ii=je!==String(Ze);if(!Ii&&66===Mt||_&&!Di.finally)return!0;if(Mt>=51&&/native code/.test(je))return!1;var _i=new Ze(function(ue){ue(1)}),Hi=function(ue){ue(function(){},function(){})};return(_i.constructor={})[Nt]=Hi,!(Oe=_i.then(function(){})instanceof Hi)||!Ii&&rt&&!ie}),ti=de||!It(function(je){Ze.all(je).catch(function(){})}),ni=function(je){var Ii;return!(!et(je)||!ot(Ii=je.then))&&Ii},Pi=function(je,Ii){var Lt,ce,Ne,_i=Ii.value,Hi=1==Ii.state,Je=Hi?je.ok:je.fail,ue=je.resolve,kt=je.reject,ct=je.domain;try{Je?(Hi||(2===Ii.rejection&&Zi(Ii),Ii.rejection=1),!0===Je?Lt=_i:(ct&&ct.enter(),Lt=Je(_i),ct&&(ct.exit(),Ne=!0)),Lt===je.promise?kt($e("Promise-chain cycle")):(ce=ni(Lt))?n(ce,Lt,ue,kt):ue(Lt)):kt(_i)}catch(Wi){ct&&!Ne&&ct.exit(),kt(Wi)}},wi=function(je,Ii){je.notified||(je.notified=!0,Ct(function(){for(var Hi,_i=je.reactions;Hi=_i.get();)Pi(Hi,je);je.notified=!1,Ii&&!je.rejection&&dn(je)}))},yi=function(je,Ii,_i){var Hi,Je;Zt?((Hi=Le.createEvent("Event")).promise=Ii,Hi.reason=_i,Hi.initEvent(je,!1,!0),e.dispatchEvent(Hi)):Hi={promise:Ii,reason:_i},!ie&&(Je=e["on"+je])?Je(Hi):je===St&&st("Unhandled promise rejection",_i)},dn=function(je){n(Jt,e,function(){var Je,Ii=je.facade,_i=je.value;if(mi(je)&&(Je=lt(function(){fe?pi.emit("unhandledRejection",_i,Ii):yi(St,Ii,_i)}),je.rejection=fe||mi(je)?2:1,Je.error))throw Je.value})},mi=function(je){return 1!==je.rejection&&!je.parent},Zi=function(je){n(Jt,e,function(){var Ii=je.facade;fe?pi.emit("rejectionHandled",Ii):yi("rejectionhandled",Ii,je.value)})},Re=function(je,Ii,_i){return function(Hi){je(Ii,Hi,_i)}},xe=function(je,Ii,_i){je.done||(je.done=!0,_i&&(je=_i),je.value=Ii,je.state=2,wi(je,!0))},Ci=function(je,Ii,_i){if(!je.done){je.done=!0,_i&&(je=_i);try{if(je.facade===Ii)throw $e("Promise can't be resolved itself");var Hi=ni(Ii);Hi?Ct(function(){var Je={done:!1};try{n(Hi,Ii,Re(Ci,Je,je),Re(xe,Je,je))}catch(ue){xe(Je,ue,je)}}):(je.value=Ii,je.state=1,wi(je,!1))}catch(Je){xe({done:!1},Je,je)}}};if(de&&(Ze=function(Ii){Tt(this,Di),Z(Ii),n(re,this);var _i=ve(this);try{Ii(Re(Ci,_i),Re(xe,_i))}catch(Hi){xe(_i,Hi)}},(re=function(Ii){pe(this,{type:ge,done:!1,notified:!1,parent:!1,reactions:new Bt,rejection:!1,state:0,value:void 0})}).prototype=u(Di=Ze.prototype,{then:function(Ii,_i){var Hi=He(this),Je=Gt(Ht(this,Ze));return Hi.parent=!0,Je.ok=!ot(Ii)||Ii,Je.fail=ot(_i)&&_i,Je.domain=fe?pi.domain:void 0,0==Hi.state?Hi.reactions.add(Je):Ct(function(){Pi(Je,Hi)}),Je.promise},catch:function(je){return this.then(void 0,je)}}),me=function(){var je=new re,Ii=ve(je);this.promise=je,this.resolve=Re(Ci,Ii),this.reject=Re(xe,Ii)},gt.f=Gt=function(je){return je===Ze||je===ye?new me(je):Se(je)},!_&&ot(r)&&ke!==Object.prototype)){Qt=ke.then,Oe||(s(ke,"then",function(Ii,_i){var Hi=this;return new Ze(function(Je,ue){n(Qt,Hi,Je,ue)}).then(Ii,_i)},{unsafe:!0}),s(ke,"catch",Di.catch,{unsafe:!0}));try{delete ke.constructor}catch(je){}b&&b(ke,Di)}T({global:!0,wrap:!0,forced:de},{Promise:Ze}),x(Ze,ge,!1,!0),B(ge),ye=t(ge),T({target:ge,stat:!0,forced:de},{reject:function(Ii){var _i=Gt(this);return n(_i.reject,void 0,Ii),_i.promise}}),T({target:ge,stat:!0,forced:_||de},{resolve:function(Ii){return bt(_&&this===ye?Ze:this,Ii)}}),T({target:ge,stat:!0,forced:ti},{all:function(Ii){var _i=this,Hi=Gt(_i),Je=Hi.resolve,ue=Hi.reject,kt=lt(function(){var ct=Z(_i.resolve),Lt=[],ce=0,Ne=1;pt(Ii,function(Wi){var qi=ce++,Sn=!1;Ne++,n(ct,_i,Wi).then(function(ir){Sn||(Sn=!0,Lt[qi]=ir,--Ne||Je(Lt))},ue)}),--Ne||Je(Lt)});return kt.error&&ue(kt.value),Hi.promise},race:function(Ii){var _i=this,Hi=Gt(_i),Je=Hi.reject,ue=lt(function(){var kt=Z(_i.resolve);pt(Ii,function(ct){n(kt,_i,ct).then(Hi.resolve,Je)})});return ue.error&&Je(ue.value),Hi.promise}})},61897:()=>{},11568:(U,$,m)=>{"use strict";var T=m(70147),_=m(31588),e=m(43353),t=m(86213),n=m(94506),r=m(15268),s=_("".indexOf);T({target:"String",proto:!0,forced:!r("includes")},{includes:function(b){return!!~s(n(t(this)),n(e(b)),arguments.length>1?arguments[1]:void 0)}})},80651:(U,$,m)=>{"use strict";var T=m(93071).charAt,_=m(94506),e=m(34520),t=m(52928),n="String Iterator",r=e.set,s=e.getterFor(n);t(String,"String",function(u){r(this,{type:n,string:_(u),index:0})},function(){var Z,b=s(this),x=b.string,B=b.index;return B>=x.length?{value:void 0,done:!0}:(Z=T(x,B),b.index+=Z.length,{value:Z,done:!1})})},72068:(U,$,m)=>{"use strict";var Tt,T=m(70147),_=m(31588),e=m(26552).f,t=m(61468),n=m(94506),r=m(43353),s=m(86213),u=m(15268),b=m(92838),x=_("".startsWith),B=_("".slice),Z=Math.min,ot=u("startsWith");T({target:"String",proto:!0,forced:!(!b&&!ot&&(Tt=e(String.prototype,"startsWith"),Tt&&!Tt.writable)||ot)},{startsWith:function(Pt){var pt=n(s(this));r(Pt);var It=t(Z(arguments.length>1?arguments[1]:void 0,pt.length)),Ht=n(Pt);return x?x(pt,Ht,It):B(pt,It,It+Ht.length)===Ht}})},9266:(U,$,m)=>{m(59478)("asyncIterator")},87189:()=>{},94898:(U,$,m)=>{m(59478)("hasInstance")},57133:(U,$,m)=>{m(59478)("isConcatSpreadable")},3766:(U,$,m)=>{m(59478)("iterator")},83136:(U,$,m)=>{"use strict";var T=m(70147),_=m(22743),e=m(85697),t=m(30547),n=m(85246),r=m(31588),s=m(92838),u=m(25847),b=m(62581),x=m(31469),B=m(44030),Z=m(10371),ot=m(24732),et=m(78103),Tt=m(76185),Pt=m(90094),pt=m(10157),It=m(49402),Ht=m(35197),Jt=m(73540),Ct=m(94506),bt=m(41137),st=m(80332),gt=m(77978),lt=m(42769),Bt=m(24281),Dt=m(30233),Et=m(26552),ut=m(13528),rt=m(19664),fe=m(90840),Mt=m(51121),Nt=m(843),ge=m(35027),ve=m(89675),pe=m(7226),He=m(7084),ke=m(14525),Ze=m(59478),Di=m(63598),$e=m(34520),Le=m(53877).forEach,pi=ge("hidden"),Gt="Symbol",Se="prototype",Zt=He("toPrimitive"),ie=$e.set,St=$e.getterFor(Gt),jt=Object[Se],Ce=_.Symbol,ri=Ce&&Ce[Se],Te=_.TypeError,te=_.QObject,ne=e("JSON","stringify"),Oe=Et.f,re=ut.f,me=Bt.f,ye=rt.f,Qt=r([].push),de=Nt("symbols"),ti=Nt("op-symbols"),ni=Nt("string-to-symbol-registry"),Pi=Nt("symbol-to-string-registry"),wi=Nt("wks"),yi=!te||!te[Se]||!te[Se].findChild,dn=u&&x(function(){return 7!=st(re({},"a",{get:function(){return re(this,"a",{value:7}).a}})).a})?function(ue,kt,ct){var Lt=Oe(jt,kt);Lt&&delete jt[kt],re(ue,kt,ct),Lt&&ue!==jt&&re(jt,kt,Lt)}:re,mi=function(ue,kt){var ct=de[ue]=st(ri);return ie(ct,{type:Gt,tag:ue,description:kt}),u||(ct.description=kt),ct},Zi=function(kt,ct,Lt){kt===jt&&Zi(ti,ct,Lt),pt(kt);var ce=Jt(ct);return pt(Lt),B(de,ce)?(Lt.enumerable?(B(kt,pi)&&kt[pi][ce]&&(kt[pi][ce]=!1),Lt=st(Lt,{enumerable:bt(0,!1)})):(B(kt,pi)||re(kt,pi,bt(1,{})),kt[pi][ce]=!0),dn(kt,ce,Lt)):re(kt,ce,Lt)},Re=function(kt,ct){pt(kt);var Lt=Ht(ct),ce=gt(Lt).concat(_i(Lt));return Le(ce,function(Ne){(!u||n(Ci,Lt,Ne))&&Zi(kt,Ne,Lt[Ne])}),kt},Ci=function(kt){var ct=Jt(kt),Lt=n(ye,this,ct);return!(this===jt&&B(de,ct)&&!B(ti,ct))&&(!(Lt||!B(this,ct)||!B(de,ct)||B(this,pi)&&this[pi][ct])||Lt)},je=function(kt,ct){var Lt=Ht(kt),ce=Jt(ct);if(Lt!==jt||!B(de,ce)||B(ti,ce)){var Ne=Oe(Lt,ce);return Ne&&B(de,ce)&&!(B(Lt,pi)&&Lt[pi][ce])&&(Ne.enumerable=!0),Ne}},Ii=function(kt){var ct=me(Ht(kt)),Lt=[];return Le(ct,function(ce){!B(de,ce)&&!B(ve,ce)&&Qt(Lt,ce)}),Lt},_i=function(kt){var ct=kt===jt,Lt=me(ct?ti:Ht(kt)),ce=[];return Le(Lt,function(Ne){B(de,Ne)&&(!ct||B(jt,Ne))&&Qt(ce,de[Ne])}),ce};if(b||(Mt(ri=(Ce=function(){if(Tt(ri,this))throw Te("Symbol is not a constructor");var kt=arguments.length&&void 0!==arguments[0]?Ct(arguments[0]):void 0,ct=pe(kt),Lt=function(ce){this===jt&&n(Lt,ti,ce),B(this,pi)&&B(this[pi],ct)&&(this[pi][ct]=!1),dn(this,ct,bt(1,ce))};return u&&yi&&dn(jt,ct,{configurable:!0,set:Lt}),mi(ct,kt)})[Se],"toString",function(){return St(this).tag}),Mt(Ce,"withoutSetter",function(ue){return mi(pe(ue),ue)}),rt.f=Ci,ut.f=Zi,Et.f=je,lt.f=Bt.f=Ii,Dt.f=_i,ke.f=function(ue){return mi(He(ue),ue)},u&&(re(ri,"description",{configurable:!0,get:function(){return St(this).description}}),s||Mt(jt,"propertyIsEnumerable",Ci,{unsafe:!0}))),T({global:!0,wrap:!0,forced:!b,sham:!b},{Symbol:Ce}),Le(gt(wi),function(ue){Ze(ue)}),T({target:Gt,stat:!0,forced:!b},{for:function(ue){var kt=Ct(ue);if(B(ni,kt))return ni[kt];var ct=Ce(kt);return ni[kt]=ct,Pi[ct]=kt,ct},keyFor:function(kt){if(!Pt(kt))throw Te(kt+" is not a symbol");if(B(Pi,kt))return Pi[kt]},useSetter:function(){yi=!0},useSimple:function(){yi=!1}}),T({target:"Object",stat:!0,forced:!b,sham:!u},{create:function(kt,ct){return void 0===ct?st(kt):Re(st(kt),ct)},defineProperty:Zi,defineProperties:Re,getOwnPropertyDescriptor:je}),T({target:"Object",stat:!0,forced:!b},{getOwnPropertyNames:Ii,getOwnPropertySymbols:_i}),T({target:"Object",stat:!0,forced:x(function(){Dt.f(1)})},{getOwnPropertySymbols:function(kt){return Dt.f(It(kt))}}),ne&&T({target:"JSON",stat:!0,forced:!b||x(function(){var ue=Ce();return"[null]"!=ne([ue])||"{}"!=ne({a:ue})||"{}"!=ne(Object(ue))})},{stringify:function(kt,ct,Lt){var ce=fe(arguments),Ne=ct;if((et(ct)||void 0!==kt)&&!Pt(kt))return Z(ct)||(ct=function(Wi,qi){if(ot(Ne)&&(qi=n(Ne,this,Wi,qi)),!Pt(qi))return qi}),ce[1]=ct,t(ne,null,ce)}}),!ri[Zt]){var Je=ri.valueOf;Mt(ri,Zt,function(ue){return n(Je,this)})}Di(Ce,Gt),ve[pi]=!0},84765:(U,$,m)=>{m(59478)("matchAll")},49342:(U,$,m)=>{m(59478)("match")},83606:(U,$,m)=>{m(59478)("replace")},25909:(U,$,m)=>{m(59478)("search")},42383:(U,$,m)=>{m(59478)("species")},98547:(U,$,m)=>{m(59478)("split")},73418:(U,$,m)=>{m(59478)("toPrimitive")},82266:(U,$,m)=>{m(59478)("toStringTag")},30797:(U,$,m)=>{m(59478)("unscopables")},29960:(U,$,m)=>{"use strict";var Z,T=m(22743),_=m(31588),e=m(70658),t=m(33613),n=m(66657),r=m(75925),s=m(78103),u=m(19086),b=m(34520).enforce,x=m(63185),B=!T.ActiveXObject&&"ActiveXObject"in T,ot=function(Jt){return function(){return Jt(this,arguments.length?arguments[0]:void 0)}},et=n("WeakMap",ot,r);if(x&&B){Z=r.getConstructor(ot,"WeakMap",!0),t.enable();var Tt=et.prototype,Pt=_(Tt.delete),pt=_(Tt.has),It=_(Tt.get),Ht=_(Tt.set);e(Tt,{delete:function(Jt){if(s(Jt)&&!u(Jt)){var Ct=b(this);return Ct.frozen||(Ct.frozen=new Z),Pt(this,Jt)||Ct.frozen.delete(Jt)}return Pt(this,Jt)},has:function(Ct){if(s(Ct)&&!u(Ct)){var bt=b(this);return bt.frozen||(bt.frozen=new Z),pt(this,Ct)||bt.frozen.has(Ct)}return pt(this,Ct)},get:function(Ct){if(s(Ct)&&!u(Ct)){var bt=b(this);return bt.frozen||(bt.frozen=new Z),pt(this,Ct)?It(this,Ct):bt.frozen.get(Ct)}return It(this,Ct)},set:function(Ct,bt){if(s(Ct)&&!u(Ct)){var st=b(this);st.frozen||(st.frozen=new Z),pt(this,Ct)?Ht(this,Ct,bt):st.frozen.set(Ct,bt)}else Ht(this,Ct,bt);return this}})}},38669:(U,$,m)=>{m(84722)},33483:(U,$,m)=>{m(52568)},30389:(U,$,m)=>{m(64111)},65193:(U,$,m)=>{"use strict";var T=m(70147),_=m(39802),e=m(50819);T({target:"Promise",stat:!0},{try:function(t){var n=_.f(this),r=e(t);return(r.error?n.reject:n.resolve)(r.value),n.promise}})},59108:(U,$,m)=>{m(59478)("asyncDispose")},98488:(U,$,m)=>{m(59478)("dispose")},65802:(U,$,m)=>{m(59478)("matcher")},38772:(U,$,m)=>{m(59478)("metadata")},96398:(U,$,m)=>{m(59478)("observable")},79699:(U,$,m)=>{m(59478)("patternMatch")},86669:(U,$,m)=>{m(59478)("replaceAll")},72760:(U,$,m)=>{m(71420);var T=m(9113),_=m(22743),e=m(80063),t=m(78204),n=m(44362),s=m(7084)("toStringTag");for(var u in T){var b=_[u],x=b&&b.prototype;x&&e(x)!==s&&t(x,s,u),n[u]=n.Array}},17606:(U,$,m)=>{"use strict";m(71420);var T=m(70147),_=m(22743),e=m(85697),t=m(85246),n=m(31588),r=m(2049),s=m(51121),u=m(70658),b=m(63598),x=m(690),B=m(34520),Z=m(43017),ot=m(24732),et=m(44030),Tt=m(21137),Pt=m(80063),pt=m(10157),It=m(78103),Ht=m(94506),Jt=m(80332),Ct=m(41137),bt=m(74471),st=m(56958),gt=m(7084),lt=m(69274),Bt=gt("iterator"),Dt="URLSearchParams",Et=Dt+"Iterator",ut=B.set,rt=B.getterFor(Dt),fe=B.getterFor(Et),Mt=e("fetch"),Nt=e("Request"),ge=e("Headers"),ve=Nt&&Nt.prototype,pe=ge&&ge.prototype,He=_.RegExp,ke=_.TypeError,Ze=_.decodeURIComponent,Di=_.encodeURIComponent,$e=n("".charAt),Le=n([].join),pi=n([].push),Gt=n("".replace),Se=n([].shift),Zt=n([].splice),ie=n("".split),St=n("".slice),jt=/\+/g,Ce=Array(4),ri=function(mi){return Ce[mi-1]||(Ce[mi-1]=He("((?:%[\\da-f]{2}){"+mi+"})","gi"))},Te=function(mi){try{return Ze(mi)}catch(Zi){return mi}},te=function(mi){var Zi=Gt(mi,jt," "),Re=4;try{return Ze(Zi)}catch(xe){for(;Re;)Zi=Gt(Zi,ri(Re--),Te);return Zi}},ne=/[!'()~]|%20/g,Oe={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},re=function(mi){return Oe[mi]},me=function(mi){return Gt(Di(mi),ne,re)},ye=function(mi,Zi){if(mi<Zi)throw ke("Not enough arguments")},Qt=x(function(Zi,Re){ut(this,{type:Et,iterator:bt(rt(Zi).entries),kind:Re})},"Iterator",function(){var Zi=fe(this),Re=Zi.kind,xe=Zi.iterator.next(),Ci=xe.value;return xe.done||(xe.value="keys"===Re?Ci.key:"values"===Re?Ci.value:[Ci.key,Ci.value]),xe},!0),de=function(mi){this.entries=[],this.url=null,void 0!==mi&&(It(mi)?this.parseObject(mi):this.parseQuery("string"==typeof mi?"?"===$e(mi,0)?St(mi,1):mi:Ht(mi)))};de.prototype={type:Dt,bindURL:function(mi){this.url=mi,this.update()},parseObject:function(mi){var Re,xe,Ci,je,Ii,_i,Hi,Zi=st(mi);if(Zi)for(xe=(Re=bt(mi,Zi)).next;!(Ci=t(xe,Re)).done;){if(je=bt(pt(Ci.value)),(_i=t(Ii=je.next,je)).done||(Hi=t(Ii,je)).done||!t(Ii,je).done)throw ke("Expected sequence with length 2");pi(this.entries,{key:Ht(_i.value),value:Ht(Hi.value)})}else for(var Je in mi)et(mi,Je)&&pi(this.entries,{key:Je,value:Ht(mi[Je])})},parseQuery:function(mi){if(mi)for(var xe,Ci,Zi=ie(mi,"&"),Re=0;Re<Zi.length;)(xe=Zi[Re++]).length&&(Ci=ie(xe,"="),pi(this.entries,{key:te(Se(Ci)),value:te(Le(Ci,"="))}))},serialize:function(){for(var xe,mi=this.entries,Zi=[],Re=0;Re<mi.length;)xe=mi[Re++],pi(Zi,me(xe.key)+"="+me(xe.value));return Le(Zi,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var ti=function(){Z(this,ni);var Zi=arguments.length>0?arguments[0]:void 0;ut(this,new de(Zi))},ni=ti.prototype;if(u(ni,{append:function(Zi,Re){ye(arguments.length,2);var xe=rt(this);pi(xe.entries,{key:Ht(Zi),value:Ht(Re)}),xe.updateURL()},delete:function(mi){ye(arguments.length,1);for(var Zi=rt(this),Re=Zi.entries,xe=Ht(mi),Ci=0;Ci<Re.length;)Re[Ci].key===xe?Zt(Re,Ci,1):Ci++;Zi.updateURL()},get:function(Zi){ye(arguments.length,1);for(var Re=rt(this).entries,xe=Ht(Zi),Ci=0;Ci<Re.length;Ci++)if(Re[Ci].key===xe)return Re[Ci].value;return null},getAll:function(Zi){ye(arguments.length,1);for(var Re=rt(this).entries,xe=Ht(Zi),Ci=[],je=0;je<Re.length;je++)Re[je].key===xe&&pi(Ci,Re[je].value);return Ci},has:function(Zi){ye(arguments.length,1);for(var Re=rt(this).entries,xe=Ht(Zi),Ci=0;Ci<Re.length;)if(Re[Ci++].key===xe)return!0;return!1},set:function(Zi,Re){ye(arguments.length,1);for(var Je,xe=rt(this),Ci=xe.entries,je=!1,Ii=Ht(Zi),_i=Ht(Re),Hi=0;Hi<Ci.length;Hi++)(Je=Ci[Hi]).key===Ii&&(je?Zt(Ci,Hi--,1):(je=!0,Je.value=_i));je||pi(Ci,{key:Ii,value:_i}),xe.updateURL()},sort:function(){var Zi=rt(this);lt(Zi.entries,function(Re,xe){return Re.key>xe.key?1:-1}),Zi.updateURL()},forEach:function(Zi){for(var je,Re=rt(this).entries,xe=Tt(Zi,arguments.length>1?arguments[1]:void 0),Ci=0;Ci<Re.length;)xe((je=Re[Ci++]).value,je.key,this)},keys:function(){return new Qt(this,"keys")},values:function(){return new Qt(this,"values")},entries:function(){return new Qt(this,"entries")}},{enumerable:!0}),s(ni,Bt,ni.entries,{name:"entries"}),s(ni,"toString",function(){return rt(this).serialize()},{enumerable:!0}),b(ti,Dt),T({global:!0,forced:!r},{URLSearchParams:ti}),!r&&ot(ge)){var Pi=n(pe.has),wi=n(pe.set),yi=function(mi){if(It(mi)){var Re,Zi=mi.body;if(Pt(Zi)===Dt)return Re=mi.headers?new ge(mi.headers):new ge,Pi(Re,"content-type")||wi(Re,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),Jt(mi,{body:Ct(0,Ht(Zi)),headers:Ct(0,Re)})}return mi};if(ot(Mt)&&T({global:!0,enumerable:!0,forced:!0},{fetch:function(Zi){return Mt(Zi,arguments.length>1?yi(arguments[1]):{})}}),ot(Nt)){var dn=function(Zi){return Z(this,ve),new Nt(Zi,arguments.length>1?yi(arguments[1]):{})};ve.constructor=dn,dn.prototype=ve,T({global:!0,forced:!0},{Request:dn})}}U.exports={URLSearchParams:ti,getState:rt}},47471:(U,$,m)=>{var T=m(75426);U.exports=T},37722:(U,$,m)=>{var T=m(11529);U.exports=T},93049:(U,$,m)=>{var T=m(66213);U.exports=T},34863:(U,$,m)=>{var T=m(88191);U.exports=T},91081:(U,$,m)=>{var T=m(45347);m(72760),U.exports=T},21049:(U,$,m)=>{var T=m(36022);U.exports=T},43175:(U,$,m)=>{m(72760);var T=m(80063),_=m(44030),e=m(76185),t=m(93049),n=Array.prototype,r={DOMTokenList:!0,NodeList:!0};U.exports=function(s){var u=s.entries;return s===n||e(n,s)&&u===n.entries||_(r,T(s))?t:u}},3352:(U,$,m)=>{var T=m(73301);U.exports=T},13566:(U,$,m)=>{var T=m(38387);U.exports=T},35558:(U,$,m)=>{m(72760);var T=m(80063),_=m(44030),e=m(76185),t=m(34863),n=Array.prototype,r={DOMTokenList:!0,NodeList:!0};U.exports=function(s){var u=s.forEach;return s===n||e(n,s)&&u===n.forEach||_(r,T(s))?t:u}},70201:(U,$,m)=>{var T=m(1629);U.exports=T},49127:(U,$,m)=>{var T=m(66338);U.exports=T},21570:(U,$,m)=>{var T=m(57378);U.exports=T},46726:(U,$,m)=>{var T=m(70093);U.exports=T},38366:(U,$,m)=>{var T=m(16172);U.exports=T},63317:(U,$,m)=>{var T=m(7706);U.exports=T},68687:(U,$,m)=>{var T=m(22730);U.exports=T},15256:(U,$,m)=>{var T=m(66619);U.exports=T},87968:(U,$,m)=>{var T=m(4040);U.exports=T},81040:(U,$,m)=>{var T=m(7420);U.exports=T},21929:(U,$,m)=>{var T=m(2011);U.exports=T},18047:(U,$,m)=>{var T=m(95595);U.exports=T},16521:(U,$,m)=>{var T=m(42093);U.exports=T},32825:(U,$,m)=>{var T=m(93296);U.exports=T},70977:(U,$,m)=>{var T=m(31159);U.exports=T},35019:(U,$,m)=>{var T=m(9850);m(72760),U.exports=T},11830:(U,$,m)=>{var T=m(18297);m(72760),U.exports=T},61453:(U,$,m)=>{var T=m(5933);m(72760),U.exports=T},24733:(U,$,m)=>{var T=m(74107);m(72760),U.exports=T},65623:(U,$,m)=>{var T=m(70238);m(72760),U.exports=T},74107:(U,$,m)=>{m(17606);var T=m(35060);U.exports=T.URLSearchParams},76400:function(){var U;U="undefined"!=typeof self?self:this,function(m){var T_searchParams="URLSearchParams"in U,T_iterable="Symbol"in U&&"iterator"in Symbol,T_blob="FileReader"in U&&"Blob"in U&&function(){try{return new Blob,!0}catch(gt){return!1}}(),T_formData="FormData"in U,T_arrayBuffer="ArrayBuffer"in U;if(T_arrayBuffer)var e=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],t=ArrayBuffer.isView||function(gt){return gt&&e.indexOf(Object.prototype.toString.call(gt))>-1};function n(gt){if("string"!=typeof gt&&(gt=String(gt)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(gt))throw new TypeError("Invalid character in header field name");return gt.toLowerCase()}function r(gt){return"string"!=typeof gt&&(gt=String(gt)),gt}function s(gt){var lt={next:function(){var Bt=gt.shift();return{done:void 0===Bt,value:Bt}}};return T_iterable&&(lt[Symbol.iterator]=function(){return lt}),lt}function u(gt){this.map={},gt instanceof u?gt.forEach(function(lt,Bt){this.append(Bt,lt)},this):Array.isArray(gt)?gt.forEach(function(lt){this.append(lt[0],lt[1])},this):gt&&Object.getOwnPropertyNames(gt).forEach(function(lt){this.append(lt,gt[lt])},this)}function b(gt){if(gt.bodyUsed)return Promise.reject(new TypeError("Already read"));gt.bodyUsed=!0}function x(gt){return new Promise(function(lt,Bt){gt.onload=function(){lt(gt.result)},gt.onerror=function(){Bt(gt.error)}})}function B(gt){var lt=new FileReader,Bt=x(lt);return lt.readAsArrayBuffer(gt),Bt}function et(gt){if(gt.slice)return gt.slice(0);var lt=new Uint8Array(gt.byteLength);return lt.set(new Uint8Array(gt)),lt.buffer}function Tt(){return this.bodyUsed=!1,this._initBody=function(gt){this._bodyInit=gt,gt?"string"==typeof gt?this._bodyText=gt:T_blob&&Blob.prototype.isPrototypeOf(gt)?this._bodyBlob=gt:T_formData&&FormData.prototype.isPrototypeOf(gt)?this._bodyFormData=gt:T_searchParams&&URLSearchParams.prototype.isPrototypeOf(gt)?this._bodyText=gt.toString():T_arrayBuffer&&T_blob&&function(gt){return gt&&DataView.prototype.isPrototypeOf(gt)}(gt)?(this._bodyArrayBuffer=et(gt.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):T_arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(gt)||t(gt))?this._bodyArrayBuffer=et(gt):this._bodyText=gt=Object.prototype.toString.call(gt):this._bodyText="",this.headers.get("content-type")||("string"==typeof gt?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):T_searchParams&&URLSearchParams.prototype.isPrototypeOf(gt)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},T_blob&&(this.blob=function(){var gt=b(this);if(gt)return gt;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?b(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(B)}),this.text=function(){var gt=b(this);if(gt)return gt;if(this._bodyBlob)return function(gt){var lt=new FileReader,Bt=x(lt);return lt.readAsText(gt),Bt}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(gt){for(var lt=new Uint8Array(gt),Bt=new Array(lt.length),Dt=0;Dt<lt.length;Dt++)Bt[Dt]=String.fromCharCode(lt[Dt]);return Bt.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},T_formData&&(this.formData=function(){return this.text().then(Ht)}),this.json=function(){return this.text().then(JSON.parse)},this}u.prototype.append=function(gt,lt){gt=n(gt),lt=r(lt);var Bt=this.map[gt];this.map[gt]=Bt?Bt+", "+lt:lt},u.prototype.delete=function(gt){delete this.map[n(gt)]},u.prototype.get=function(gt){return gt=n(gt),this.has(gt)?this.map[gt]:null},u.prototype.has=function(gt){return this.map.hasOwnProperty(n(gt))},u.prototype.set=function(gt,lt){this.map[n(gt)]=r(lt)},u.prototype.forEach=function(gt,lt){for(var Bt in this.map)this.map.hasOwnProperty(Bt)&&gt.call(lt,this.map[Bt],Bt,this)},u.prototype.keys=function(){var gt=[];return this.forEach(function(lt,Bt){gt.push(Bt)}),s(gt)},u.prototype.values=function(){var gt=[];return this.forEach(function(lt){gt.push(lt)}),s(gt)},u.prototype.entries=function(){var gt=[];return this.forEach(function(lt,Bt){gt.push([Bt,lt])}),s(gt)},T_iterable&&(u.prototype[Symbol.iterator]=u.prototype.entries);var Pt=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function It(gt,lt){var Bt=(lt=lt||{}).body;if(gt instanceof It){if(gt.bodyUsed)throw new TypeError("Already read");this.url=gt.url,this.credentials=gt.credentials,lt.headers||(this.headers=new u(gt.headers)),this.method=gt.method,this.mode=gt.mode,this.signal=gt.signal,!Bt&&null!=gt._bodyInit&&(Bt=gt._bodyInit,gt.bodyUsed=!0)}else this.url=String(gt);if(this.credentials=lt.credentials||this.credentials||"same-origin",(lt.headers||!this.headers)&&(this.headers=new u(lt.headers)),this.method=function(gt){var lt=gt.toUpperCase();return Pt.indexOf(lt)>-1?lt:gt}(lt.method||this.method||"GET"),this.mode=lt.mode||this.mode||null,this.signal=lt.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&Bt)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(Bt)}function Ht(gt){var lt=new FormData;return gt.trim().split("&").forEach(function(Bt){if(Bt){var Dt=Bt.split("="),Et=Dt.shift().replace(/\+/g," "),ut=Dt.join("=").replace(/\+/g," ");lt.append(decodeURIComponent(Et),decodeURIComponent(ut))}}),lt}function Jt(gt){var lt=new u;return gt.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(Dt){var Et=Dt.split(":"),ut=Et.shift().trim();if(ut){var rt=Et.join(":").trim();lt.append(ut,rt)}}),lt}function Ct(gt,lt){lt||(lt={}),this.type="default",this.status=void 0===lt.status?200:lt.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in lt?lt.statusText:"OK",this.headers=new u(lt.headers),this.url=lt.url||"",this._initBody(gt)}It.prototype.clone=function(){return new It(this,{body:this._bodyInit})},Tt.call(It.prototype),Tt.call(Ct.prototype),Ct.prototype.clone=function(){return new Ct(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new u(this.headers),url:this.url})},Ct.error=function(){var gt=new Ct(null,{status:0,statusText:""});return gt.type="error",gt};var bt=[301,302,303,307,308];Ct.redirect=function(gt,lt){if(-1===bt.indexOf(lt))throw new RangeError("Invalid status code");return new Ct(null,{status:lt,headers:{location:gt}})},m.DOMException=U.DOMException;try{new m.DOMException}catch(gt){m.DOMException=function(lt,Bt){this.message=lt,this.name=Bt;var Dt=Error(lt);this.stack=Dt.stack},m.DOMException.prototype=Object.create(Error.prototype),m.DOMException.prototype.constructor=m.DOMException}function st(gt,lt){return new Promise(function(Bt,Dt){var Et=new It(gt,lt);if(Et.signal&&Et.signal.aborted)return Dt(new m.DOMException("Aborted","AbortError"));var ut=new XMLHttpRequest;function rt(){ut.abort()}ut.onload=function(){var fe={status:ut.status,statusText:ut.statusText,headers:Jt(ut.getAllResponseHeaders()||"")};fe.url="responseURL"in ut?ut.responseURL:fe.headers.get("X-Request-URL"),Bt(new Ct("response"in ut?ut.response:ut.responseText,fe))},ut.onerror=function(){Dt(new TypeError("Network request failed"))},ut.ontimeout=function(){Dt(new TypeError("Network request failed"))},ut.onabort=function(){Dt(new m.DOMException("Aborted","AbortError"))},ut.open(Et.method,Et.url,!0),"include"===Et.credentials?ut.withCredentials=!0:"omit"===Et.credentials&&(ut.withCredentials=!1),"responseType"in ut&&T_blob&&(ut.responseType="blob"),Et.headers.forEach(function(fe,Mt){ut.setRequestHeader(Mt,fe)}),Et.signal&&(Et.signal.addEventListener("abort",rt),ut.onreadystatechange=function(){4===ut.readyState&&Et.signal.removeEventListener("abort",rt)}),ut.send(void 0===Et._bodyInit?null:Et._bodyInit)})}st.polyfill=!0,U.fetch||(U.fetch=st,U.Headers=u,U.Request=It,U.Response=Ct),m.Headers=u,m.Request=It,m.Response=Ct,m.fetch=st,Object.defineProperty(m,"__esModule",{value:!0})}({})},89986:U=>{"use strict";function $(t){return t instanceof Buffer||t instanceof Date||t instanceof RegExp}function m(t){if(t instanceof Buffer){var n=Buffer.alloc?Buffer.alloc(t.length):new Buffer(t.length);return t.copy(n),n}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return new RegExp(t);throw new Error("Unexpected situation")}function T(t){var n=[];return t.forEach(function(r,s){n[s]="object"==typeof r&&null!==r?Array.isArray(r)?T(r):$(r)?m(r):e({},r):r}),n}function _(t,n){return"__proto__"===n?void 0:t[n]}var e=U.exports=function(){if(arguments.length<1||"object"!=typeof arguments[0])return!1;if(arguments.length<2)return arguments[0];var r,s,t=arguments[0],n=Array.prototype.slice.call(arguments,1);return n.forEach(function(b){"object"!=typeof b||null===b||Array.isArray(b)||Object.keys(b).forEach(function(x){if(s=_(t,x),(r=_(b,x))!==t)return"object"!=typeof r||null===r?void(t[x]=r):Array.isArray(r)?void(t[x]=T(r)):$(r)?void(t[x]=m(r)):"object"!=typeof s||null===s||Array.isArray(s)?void(t[x]=e({},r)):void(t[x]=e(s,r))})}),t}},66939:U=>{"use strict";var $="Function.prototype.bind called on incompatible ",m=Array.prototype.slice,T=Object.prototype.toString,_="[object Function]";U.exports=function(t){var n=this;if("function"!=typeof n||T.call(n)!==_)throw new TypeError($+n);for(var s,r=m.call(arguments,1),u=function(){if(this instanceof s){var ot=n.apply(this,r.concat(m.call(arguments)));return Object(ot)===ot?ot:this}return n.apply(t,r.concat(m.call(arguments)))},b=Math.max(0,n.length-r.length),x=[],B=0;B<b;B++)x.push("$"+B);if(s=Function("binder","return function ("+x.join(",")+"){ return binder.apply(this,arguments); }")(u),n.prototype){var Z=function(){};Z.prototype=n.prototype,s.prototype=new Z,Z.prototype=null}return s}},37341:(U,$,m)=>{"use strict";var T=m(66939);U.exports=Function.prototype.bind||T},23141:(U,$,m)=>{"use strict";var T,_=SyntaxError,e=Function,t=TypeError,n=function(Bt){try{return e('"use strict"; return ('+Bt+").constructor;")()}catch(Dt){}},r=Object.getOwnPropertyDescriptor;if(r)try{r({},"")}catch(Bt){r=null}var s=function(){throw new t},u=r?function(){try{return s}catch(Bt){try{return r(arguments,"callee").get}catch(Dt){return s}}}():s,b=m(73165)(),x=Object.getPrototypeOf||function(Bt){return Bt.__proto__},B={},Z="undefined"==typeof Uint8Array?T:x(Uint8Array),ot={"%AggregateError%":"undefined"==typeof AggregateError?T:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?T:ArrayBuffer,"%ArrayIteratorPrototype%":b?x([][Symbol.iterator]()):T,"%AsyncFromSyncIteratorPrototype%":T,"%AsyncFunction%":B,"%AsyncGenerator%":B,"%AsyncGeneratorFunction%":B,"%AsyncIteratorPrototype%":B,"%Atomics%":"undefined"==typeof Atomics?T:Atomics,"%BigInt%":"undefined"==typeof BigInt?T:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?T:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?T:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?T:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?T:FinalizationRegistry,"%Function%":e,"%GeneratorFunction%":B,"%Int8Array%":"undefined"==typeof Int8Array?T:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?T:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?T:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":b?x(x([][Symbol.iterator]())):T,"%JSON%":"object"==typeof JSON?JSON:T,"%Map%":"undefined"==typeof Map?T:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&b?x((new Map)[Symbol.iterator]()):T,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?T:Promise,"%Proxy%":"undefined"==typeof Proxy?T:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?T:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?T:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&b?x((new Set)[Symbol.iterator]()):T,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?T:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":b?x(""[Symbol.iterator]()):T,"%Symbol%":b?Symbol:T,"%SyntaxError%":_,"%ThrowTypeError%":u,"%TypedArray%":Z,"%TypeError%":t,"%Uint8Array%":"undefined"==typeof Uint8Array?T:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?T:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?T:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?T:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?T:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?T:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?T:WeakSet},et=function Bt(Dt){var Et;if("%AsyncFunction%"===Dt)Et=n("async function () {}");else if("%GeneratorFunction%"===Dt)Et=n("function* () {}");else if("%AsyncGeneratorFunction%"===Dt)Et=n("async function* () {}");else if("%AsyncGenerator%"===Dt){var ut=Bt("%AsyncGeneratorFunction%");ut&&(Et=ut.prototype)}else if("%AsyncIteratorPrototype%"===Dt){var rt=Bt("%AsyncGenerator%");rt&&(Et=x(rt.prototype))}return ot[Dt]=Et,Et},Tt={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Pt=m(37341),pt=m(91279),It=Pt.call(Function.call,Array.prototype.concat),Ht=Pt.call(Function.apply,Array.prototype.splice),Jt=Pt.call(Function.call,String.prototype.replace),Ct=Pt.call(Function.call,String.prototype.slice),bt=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,st=/\\(\\)?/g,gt=function(Dt){var Et=Ct(Dt,0,1),ut=Ct(Dt,-1);if("%"===Et&&"%"!==ut)throw new _("invalid intrinsic syntax, expected closing `%`");if("%"===ut&&"%"!==Et)throw new _("invalid intrinsic syntax, expected opening `%`");var rt=[];return Jt(Dt,bt,function(fe,Mt,Nt,ge){rt[rt.length]=Nt?Jt(ge,st,"$1"):Mt||fe}),rt},lt=function(Dt,Et){var rt,ut=Dt;if(pt(Tt,ut)&&(ut="%"+(rt=Tt[ut])[0]+"%"),pt(ot,ut)){var fe=ot[ut];if(fe===B&&(fe=et(ut)),void 0===fe&&!Et)throw new t("intrinsic "+Dt+" exists, but is not available. Please file an issue!");return{alias:rt,name:ut,value:fe}}throw new _("intrinsic "+Dt+" does not exist!")};U.exports=function(Dt,Et){if("string"!=typeof Dt||0===Dt.length)throw new t("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof Et)throw new t('"allowMissing" argument must be a boolean');var ut=gt(Dt),rt=ut.length>0?ut[0]:"",fe=lt("%"+rt+"%",Et),Mt=fe.name,Nt=fe.value,ge=!1,ve=fe.alias;ve&&(rt=ve[0],Ht(ut,It([0,1],ve)));for(var pe=1,He=!0;pe<ut.length;pe+=1){var ke=ut[pe],Ze=Ct(ke,0,1),Di=Ct(ke,-1);if(('"'===Ze||"'"===Ze||"`"===Ze||'"'===Di||"'"===Di||"`"===Di)&&Ze!==Di)throw new _("property names with quotes must have matching quotes");if(("constructor"===ke||!He)&&(ge=!0),pt(ot,Mt="%"+(rt+="."+ke)+"%"))Nt=ot[Mt];else if(null!=Nt){if(!(ke in Nt)){if(!Et)throw new t("base intrinsic for "+Dt+" exists, but the property is not available.");return}if(r&&pe+1>=ut.length){var $e=r(Nt,ke);Nt=(He=!!$e)&&"get"in $e&&!("originalValue"in $e.get)?$e.get:Nt[ke]}else He=pt(Nt,ke),Nt=Nt[ke];He&&!ge&&(ot[Mt]=Nt)}}return Nt}},73165:(U,$,m)=>{"use strict";var T="undefined"!=typeof Symbol&&Symbol,_=m(43918);U.exports=function(){return"function"==typeof T&&"function"==typeof Symbol&&"symbol"==typeof T("foo")&&"symbol"==typeof Symbol("bar")&&_()}},43918:U=>{"use strict";U.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var m={},T=Symbol("test"),_=Object(T);if("string"==typeof T||"[object Symbol]"!==Object.prototype.toString.call(T)||"[object Symbol]"!==Object.prototype.toString.call(_))return!1;for(T in m[T]=42,m)return!1;if("function"==typeof Object.keys&&0!==Object.keys(m).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(m).length)return!1;var t=Object.getOwnPropertySymbols(m);if(1!==t.length||t[0]!==T||!Object.prototype.propertyIsEnumerable.call(m,T))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var n=Object.getOwnPropertyDescriptor(m,T);if(42!==n.value||!0!==n.enumerable)return!1}return!0}},91279:(U,$,m)=>{"use strict";var T=m(37341);U.exports=T.call(Function.call,Object.prototype.hasOwnProperty)},9976:(U,$,m)=>{var e=m(66463)(m(75719),"DataView");U.exports=e},35705:(U,$,m)=>{var T=m(51089),_=m(2564),e=m(65929),t=m(1422),n=m(24795);function r(s){var u=-1,b=null==s?0:s.length;for(this.clear();++u<b;){var x=s[u];this.set(x[0],x[1])}}r.prototype.clear=T,r.prototype.delete=_,r.prototype.get=e,r.prototype.has=t,r.prototype.set=n,U.exports=r},64616:(U,$,m)=>{var T=m(45909),_=m(62578),e=m(20701),t=m(17438),n=m(60369);function r(s){var u=-1,b=null==s?0:s.length;for(this.clear();++u<b;){var x=s[u];this.set(x[0],x[1])}}r.prototype.clear=T,r.prototype.delete=_,r.prototype.get=e,r.prototype.has=t,r.prototype.set=n,U.exports=r},61805:(U,$,m)=>{var e=m(66463)(m(75719),"Map");U.exports=e},90923:(U,$,m)=>{var T=m(68791),_=m(3805),e=m(9274),t=m(31967),n=m(27537);function r(s){var u=-1,b=null==s?0:s.length;for(this.clear();++u<b;){var x=s[u];this.set(x[0],x[1])}}r.prototype.clear=T,r.prototype.delete=_,r.prototype.get=e,r.prototype.has=t,r.prototype.set=n,U.exports=r},49845:(U,$,m)=>{var e=m(66463)(m(75719),"Promise");U.exports=e},79716:(U,$,m)=>{var e=m(66463)(m(75719),"Set");U.exports=e},3824:(U,$,m)=>{var T=m(64616),_=m(25411),e=m(79582),t=m(26415),n=m(30666),r=m(58669);function s(u){var b=this.__data__=new T(u);this.size=b.size}s.prototype.clear=_,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=n,s.prototype.set=r,U.exports=s},87425:(U,$,m)=>{var T=m(75719);U.exports=T.Symbol},2236:(U,$,m)=>{var T=m(75719);U.exports=T.Uint8Array},65626:(U,$,m)=>{var e=m(66463)(m(75719),"WeakMap");U.exports=e},57990:U=>{U.exports=function(m,T){for(var _=-1,e=null==m?0:m.length;++_<e&&!1!==T(m[_],_,m););return m}},92161:U=>{U.exports=function(m,T){for(var _=-1,e=null==m?0:m.length,t=0,n=[];++_<e;){var r=m[_];T(r,_,m)&&(n[t++]=r)}return n}},75715:(U,$,m)=>{var T=m(93784),_=m(93832),e=m(83684),t=m(18666),n=m(28207),r=m(78558),u=Object.prototype.hasOwnProperty;U.exports=function(x,B){var Z=e(x),ot=!Z&&_(x),et=!Z&&!ot&&t(x),Tt=!Z&&!ot&&!et&&r(x),Pt=Z||ot||et||Tt,pt=Pt?T(x.length,String):[],It=pt.length;for(var Ht in x)(B||u.call(x,Ht))&&(!Pt||!("length"==Ht||et&&("offset"==Ht||"parent"==Ht)||Tt&&("buffer"==Ht||"byteLength"==Ht||"byteOffset"==Ht)||n(Ht,It)))&&pt.push(Ht);return pt}},72437:U=>{U.exports=function(m,T){for(var _=-1,e=null==m?0:m.length,t=Array(e);++_<e;)t[_]=T(m[_],_,m);return t}},85271:U=>{U.exports=function(m,T){for(var _=-1,e=T.length,t=m.length;++_<e;)m[t+_]=T[_];return m}},82407:(U,$,m)=>{var T=m(92034),_=m(79106),t=Object.prototype.hasOwnProperty;U.exports=function(r,s,u){var b=r[s];(!t.call(r,s)||!_(b,u)||void 0===u&&!(s in r))&&T(r,s,u)}},84760:(U,$,m)=>{var T=m(79106);U.exports=function(e,t){for(var n=e.length;n--;)if(T(e[n][0],t))return n;return-1}},54883:(U,$,m)=>{var T=m(21492),_=m(63344);U.exports=function(t,n){return t&&T(n,_(n),t)}},26031:(U,$,m)=>{var T=m(21492),_=m(39479);U.exports=function(t,n){return t&&T(n,_(n),t)}},92034:(U,$,m)=>{var T=m(90086);U.exports=function(e,t,n){"__proto__"==t&&T?T(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},74857:(U,$,m)=>{var T=m(3824),_=m(57990),e=m(82407),t=m(54883),n=m(26031),r=m(20416),s=m(14601),u=m(36377),b=m(54646),x=m(20419),B=m(80553),Z=m(40691),ot=m(49965),et=m(40349),Tt=m(31743),Pt=m(83684),pt=m(18666),It=m(15261),Ht=m(6264),Jt=m(57221),Ct=m(63344),bt=m(39479),Bt="[object Arguments]",fe="[object Function]",ve="[object Object]",Te={};Te[Bt]=Te["[object Array]"]=Te["[object ArrayBuffer]"]=Te["[object DataView]"]=Te["[object Boolean]"]=Te["[object Date]"]=Te["[object Float32Array]"]=Te["[object Float64Array]"]=Te["[object Int8Array]"]=Te["[object Int16Array]"]=Te["[object Int32Array]"]=Te["[object Map]"]=Te["[object Number]"]=Te[ve]=Te["[object RegExp]"]=Te["[object Set]"]=Te["[object String]"]=Te["[object Symbol]"]=Te["[object Uint8Array]"]=Te["[object Uint8ClampedArray]"]=Te["[object Uint16Array]"]=Te["[object Uint32Array]"]=!0,Te["[object Error]"]=Te[fe]=Te["[object WeakMap]"]=!1,U.exports=function te(ne,Oe,re,me,ye,Qt){var de,ti=1&Oe,ni=2&Oe,Pi=4&Oe;if(re&&(de=ye?re(ne,me,ye,Qt):re(ne)),void 0!==de)return de;if(!Ht(ne))return ne;var wi=Pt(ne);if(wi){if(de=ot(ne),!ti)return s(ne,de)}else{var yi=Z(ne),dn=yi==fe||"[object GeneratorFunction]"==yi;if(pt(ne))return r(ne,ti);if(yi==ve||yi==Bt||dn&&!ye){if(de=ni||dn?{}:Tt(ne),!ti)return ni?b(ne,n(de,ne)):u(ne,t(de,ne))}else{if(!Te[yi])return ye?ne:{};de=et(ne,yi,ti)}}Qt||(Qt=new T);var mi=Qt.get(ne);if(mi)return mi;Qt.set(ne,de),Jt(ne)?ne.forEach(function(xe){de.add(te(xe,Oe,re,xe,ne,Qt))}):It(ne)&&ne.forEach(function(xe,Ci){de.set(Ci,te(xe,Oe,re,Ci,ne,Qt))});var Re=wi?void 0:(Pi?ni?B:x:ni?bt:Ct)(ne);return _(Re||ne,function(xe,Ci){Re&&(xe=ne[Ci=xe]),e(de,Ci,te(xe,Oe,re,Ci,ne,Qt))}),de}},85602:(U,$,m)=>{var T=m(6264),_=Object.create,e=function(){function t(){}return function(n){if(!T(n))return{};if(_)return _(n);t.prototype=n;var r=new t;return t.prototype=void 0,r}}();U.exports=e},17046:(U,$,m)=>{var T=m(57783),_=m(97046);U.exports=function(t,n){for(var r=0,s=(n=T(n,t)).length;null!=t&&r<s;)t=t[_(n[r++])];return r&&r==s?t:void 0}},27879:(U,$,m)=>{var T=m(85271),_=m(83684);U.exports=function(t,n,r){var s=n(t);return _(t)?s:T(s,r(t))}},40232:(U,$,m)=>{var T=m(87425),_=m(98329),e=m(78295),r=T?T.toStringTag:void 0;U.exports=function(u){return null==u?void 0===u?"[object Undefined]":"[object Null]":r&&r in Object(u)?_(u):e(u)}},81065:(U,$,m)=>{var T=m(40232),_=m(22308);U.exports=function(n){return _(n)&&"[object Arguments]"==T(n)}},16612:(U,$,m)=>{var T=m(40691),_=m(22308);U.exports=function(n){return _(n)&&"[object Map]"==T(n)}},23796:(U,$,m)=>{var T=m(88066),_=m(98031),e=m(6264),t=m(65295),r=/^\[object .+?Constructor\]$/,B=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");U.exports=function(ot){return!(!e(ot)||_(ot))&&(T(ot)?B:r).test(t(ot))}},26987:(U,$,m)=>{var T=m(40691),_=m(22308);U.exports=function(n){return _(n)&&"[object Set]"==T(n)}},11264:(U,$,m)=>{var T=m(40232),_=m(67818),e=m(22308),Et={};Et["[object Float32Array]"]=Et["[object Float64Array]"]=Et["[object Int8Array]"]=Et["[object Int16Array]"]=Et["[object Int32Array]"]=Et["[object Uint8Array]"]=Et["[object Uint8ClampedArray]"]=Et["[object Uint16Array]"]=Et["[object Uint32Array]"]=!0,Et["[object Arguments]"]=Et["[object Array]"]=Et["[object ArrayBuffer]"]=Et["[object Boolean]"]=Et["[object DataView]"]=Et["[object Date]"]=Et["[object Error]"]=Et["[object Function]"]=Et["[object Map]"]=Et["[object Number]"]=Et["[object Object]"]=Et["[object RegExp]"]=Et["[object Set]"]=Et["[object String]"]=Et["[object WeakMap]"]=!1,U.exports=function(rt){return e(rt)&&_(rt.length)&&!!Et[T(rt)]}},16249:(U,$,m)=>{var T=m(27877),_=m(73595),t=Object.prototype.hasOwnProperty;U.exports=function(r){if(!T(r))return _(r);var s=[];for(var u in Object(r))t.call(r,u)&&"constructor"!=u&&s.push(u);return s}},90374:(U,$,m)=>{var T=m(6264),_=m(27877),e=m(47098),n=Object.prototype.hasOwnProperty;U.exports=function(s){if(!T(s))return e(s);var u=_(s),b=[];for(var x in s)"constructor"==x&&(u||!n.call(s,x))||b.push(x);return b}},93784:U=>{U.exports=function(m,T){for(var _=-1,e=Array(m);++_<m;)e[_]=T(_);return e}},15825:(U,$,m)=>{var T=m(87425),_=m(72437),e=m(83684),t=m(38380),r=T?T.prototype:void 0,s=r?r.toString:void 0;U.exports=function u(b){if("string"==typeof b)return b;if(e(b))return _(b,u)+"";if(t(b))return s?s.call(b):"";var x=b+"";return"0"==x&&1/b==-1/0?"-0":x}},81279:U=>{U.exports=function(m){return function(T){return m(T)}}},57783:(U,$,m)=>{var T=m(83684),_=m(92615),e=m(4113),t=m(30381);U.exports=function(r,s){return T(r)?r:_(r,s)?[r]:e(t(r))}},2050:(U,$,m)=>{var T=m(2236);U.exports=function(e){var t=new e.constructor(e.byteLength);return new T(t).set(new T(e)),t}},20416:(U,$,m)=>{U=m.nmd(U);var T=m(75719),_=$&&!$.nodeType&&$,e=_&&U&&!U.nodeType&&U,n=e&&e.exports===_?T.Buffer:void 0,r=n?n.allocUnsafe:void 0;U.exports=function(u,b){if(b)return u.slice();var x=u.length,B=r?r(x):new u.constructor(x);return u.copy(B),B}},85975:(U,$,m)=>{var T=m(2050);U.exports=function(e,t){var n=t?T(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},57092:U=>{var $=/\w*$/;U.exports=function(T){var _=new T.constructor(T.source,$.exec(T));return _.lastIndex=T.lastIndex,_}},954:(U,$,m)=>{var T=m(87425),_=T?T.prototype:void 0,e=_?_.valueOf:void 0;U.exports=function(n){return e?Object(e.call(n)):{}}},76009:(U,$,m)=>{var T=m(2050);U.exports=function(e,t){var n=t?T(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},14601:U=>{U.exports=function(m,T){var _=-1,e=m.length;for(T||(T=Array(e));++_<e;)T[_]=m[_];return T}},21492:(U,$,m)=>{var T=m(82407),_=m(92034);U.exports=function(t,n,r,s){var u=!r;r||(r={});for(var b=-1,x=n.length;++b<x;){var B=n[b],Z=s?s(r[B],t[B],B,r,t):void 0;void 0===Z&&(Z=t[B]),u?_(r,B,Z):T(r,B,Z)}return r}},36377:(U,$,m)=>{var T=m(21492),_=m(640);U.exports=function(t,n){return T(t,_(t),n)}},54646:(U,$,m)=>{var T=m(21492),_=m(87884);U.exports=function(t,n){return T(t,_(t),n)}},66092:(U,$,m)=>{var T=m(75719);U.exports=T["__core-js_shared__"]},90086:(U,$,m)=>{var T=m(66463),_=function(){try{var e=T(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();U.exports=_},15307:U=>{var $="object"==typeof global&&global&&global.Object===Object&&global;U.exports=$},20419:(U,$,m)=>{var T=m(27879),_=m(640),e=m(63344);U.exports=function(n){return T(n,e,_)}},80553:(U,$,m)=>{var T=m(27879),_=m(87884),e=m(39479);U.exports=function(n){return T(n,e,_)}},90327:(U,$,m)=>{var T=m(40497);U.exports=function(e,t){var n=e.__data__;return T(t)?n["string"==typeof t?"string":"hash"]:n.map}},66463:(U,$,m)=>{var T=m(23796),_=m(47820);U.exports=function(t,n){var r=_(t,n);return T(r)?r:void 0}},566:(U,$,m)=>{var _=m(75854)(Object.getPrototypeOf,Object);U.exports=_},98329:(U,$,m)=>{var T=m(87425),_=Object.prototype,e=_.hasOwnProperty,t=_.toString,n=T?T.toStringTag:void 0;U.exports=function(s){var u=e.call(s,n),b=s[n];try{s[n]=void 0;var x=!0}catch(Z){}var B=t.call(s);return x&&(u?s[n]=b:delete s[n]),B}},640:(U,$,m)=>{var T=m(92161),_=m(35587),t=Object.prototype.propertyIsEnumerable,n=Object.getOwnPropertySymbols;U.exports=n?function(s){return null==s?[]:(s=Object(s),T(n(s),function(u){return t.call(s,u)}))}:_},87884:(U,$,m)=>{var T=m(85271),_=m(566),e=m(640),t=m(35587);U.exports=Object.getOwnPropertySymbols?function(s){for(var u=[];s;)T(u,e(s)),s=_(s);return u}:t},40691:(U,$,m)=>{var T=m(9976),_=m(61805),e=m(49845),t=m(79716),n=m(65626),r=m(40232),s=m(65295),u="[object Map]",x="[object Promise]",B="[object Set]",Z="[object WeakMap]",ot="[object DataView]",et=s(T),Tt=s(_),Pt=s(e),pt=s(t),It=s(n),Ht=r;(T&&Ht(new T(new ArrayBuffer(1)))!=ot||_&&Ht(new _)!=u||e&&Ht(e.resolve())!=x||t&&Ht(new t)!=B||n&&Ht(new n)!=Z)&&(Ht=function(Jt){var Ct=r(Jt),bt="[object Object]"==Ct?Jt.constructor:void 0,st=bt?s(bt):"";if(st)switch(st){case et:return ot;case Tt:return u;case Pt:return x;case pt:return B;case It:return Z}return Ct}),U.exports=Ht},47820:U=>{U.exports=function(m,T){return null==m?void 0:m[T]}},51089:(U,$,m)=>{var T=m(13947);U.exports=function(){this.__data__=T?T(null):{},this.size=0}},2564:U=>{U.exports=function(m){var T=this.has(m)&&delete this.__data__[m];return this.size-=T?1:0,T}},65929:(U,$,m)=>{var T=m(13947),t=Object.prototype.hasOwnProperty;U.exports=function(r){var s=this.__data__;if(T){var u=s[r];return"__lodash_hash_undefined__"===u?void 0:u}return t.call(s,r)?s[r]:void 0}},1422:(U,$,m)=>{var T=m(13947),e=Object.prototype.hasOwnProperty;U.exports=function(n){var r=this.__data__;return T?void 0!==r[n]:e.call(r,n)}},24795:(U,$,m)=>{var T=m(13947);U.exports=function(t,n){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=T&&void 0===n?"__lodash_hash_undefined__":n,this}},49965:U=>{var m=Object.prototype.hasOwnProperty;U.exports=function(_){var e=_.length,t=new _.constructor(e);return e&&"string"==typeof _[0]&&m.call(_,"index")&&(t.index=_.index,t.input=_.input),t}},40349:(U,$,m)=>{var T=m(2050),_=m(85975),e=m(57092),t=m(954),n=m(76009);U.exports=function(Bt,Dt,Et){var ut=Bt.constructor;switch(Dt){case"[object ArrayBuffer]":return T(Bt);case"[object Boolean]":case"[object Date]":return new ut(+Bt);case"[object DataView]":return _(Bt,Et);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return n(Bt,Et);case"[object Map]":case"[object Set]":return new ut;case"[object Number]":case"[object String]":return new ut(Bt);case"[object RegExp]":return e(Bt);case"[object Symbol]":return t(Bt)}}},31743:(U,$,m)=>{var T=m(85602),_=m(566),e=m(27877);U.exports=function(n){return"function"!=typeof n.constructor||e(n)?{}:T(_(n))}},28207:U=>{var m=/^(?:0|[1-9]\d*)$/;U.exports=function(_,e){var t=typeof _;return!!(e=null==e?9007199254740991:e)&&("number"==t||"symbol"!=t&&m.test(_))&&_>-1&&_%1==0&&_<e}},92615:(U,$,m)=>{var T=m(83684),_=m(38380),e=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,t=/^\w*$/;U.exports=function(r,s){if(T(r))return!1;var u=typeof r;return!("number"!=u&&"symbol"!=u&&"boolean"!=u&&null!=r&&!_(r))||t.test(r)||!e.test(r)||null!=s&&r in Object(s)}},40497:U=>{U.exports=function(m){var T=typeof m;return"string"==T||"number"==T||"symbol"==T||"boolean"==T?"__proto__"!==m:null===m}},98031:(U,$,m)=>{var t,T=m(66092),_=(t=/[^.]+$/.exec(T&&T.keys&&T.keys.IE_PROTO||""))?"Symbol(src)_1."+t:"";U.exports=function(t){return!!_&&_ in t}},27877:U=>{var $=Object.prototype;U.exports=function(T){var _=T&&T.constructor;return T===("function"==typeof _&&_.prototype||$)}},45909:U=>{U.exports=function(){this.__data__=[],this.size=0}},62578:(U,$,m)=>{var T=m(84760),e=Array.prototype.splice;U.exports=function(n){var r=this.__data__,s=T(r,n);return!(s<0||(s==r.length-1?r.pop():e.call(r,s,1),--this.size,0))}},20701:(U,$,m)=>{var T=m(84760);U.exports=function(e){var t=this.__data__,n=T(t,e);return n<0?void 0:t[n][1]}},17438:(U,$,m)=>{var T=m(84760);U.exports=function(e){return T(this.__data__,e)>-1}},60369:(U,$,m)=>{var T=m(84760);U.exports=function(e,t){var n=this.__data__,r=T(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}},68791:(U,$,m)=>{var T=m(35705),_=m(64616),e=m(61805);U.exports=function(){this.size=0,this.__data__={hash:new T,map:new(e||_),string:new T}}},3805:(U,$,m)=>{var T=m(90327);U.exports=function(e){var t=T(this,e).delete(e);return this.size-=t?1:0,t}},9274:(U,$,m)=>{var T=m(90327);U.exports=function(e){return T(this,e).get(e)}},31967:(U,$,m)=>{var T=m(90327);U.exports=function(e){return T(this,e).has(e)}},27537:(U,$,m)=>{var T=m(90327);U.exports=function(e,t){var n=T(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}},48815:(U,$,m)=>{var T=m(40917);U.exports=function(t){var n=T(t,function(s){return 500===r.size&&r.clear(),s}),r=n.cache;return n}},13947:(U,$,m)=>{var _=m(66463)(Object,"create");U.exports=_},73595:(U,$,m)=>{var _=m(75854)(Object.keys,Object);U.exports=_},47098:U=>{U.exports=function(m){var T=[];if(null!=m)for(var _ in Object(m))T.push(_);return T}},56520:(U,$,m)=>{U=m.nmd(U);var T=m(15307),_=$&&!$.nodeType&&$,e=_&&U&&!U.nodeType&&U,n=e&&e.exports===_&&T.process,r=function(){try{return e&&e.require&&e.require("util").types||n&&n.binding&&n.binding("util")}catch(u){}}();U.exports=r},78295:U=>{var m=Object.prototype.toString;U.exports=function(_){return m.call(_)}},75854:U=>{U.exports=function(m,T){return function(_){return m(T(_))}}},75719:(U,$,m)=>{var T=m(15307),_="object"==typeof self&&self&&self.Object===Object&&self,e=T||_||Function("return this")();U.exports=e},25411:(U,$,m)=>{var T=m(64616);U.exports=function(){this.__data__=new T,this.size=0}},79582:U=>{U.exports=function(m){var T=this.__data__,_=T.delete(m);return this.size=T.size,_}},26415:U=>{U.exports=function(m){return this.__data__.get(m)}},30666:U=>{U.exports=function(m){return this.__data__.has(m)}},58669:(U,$,m)=>{var T=m(64616),_=m(61805),e=m(90923);U.exports=function(r,s){var u=this.__data__;if(u instanceof T){var b=u.__data__;if(!_||b.length<199)return b.push([r,s]),this.size=++u.size,this;u=this.__data__=new e(b)}return u.set(r,s),this.size=u.size,this}},4113:(U,$,m)=>{var T=m(48815),_=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,e=/\\(\\)?/g,t=T(function(n){var r=[];return 46===n.charCodeAt(0)&&r.push(""),n.replace(_,function(s,u,b,x){r.push(b?x.replace(e,"$1"):u||s)}),r});U.exports=t},97046:(U,$,m)=>{var T=m(38380);U.exports=function(t){if("string"==typeof t||T(t))return t;var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},65295:U=>{var m=Function.prototype.toString;U.exports=function(_){if(null!=_){try{return m.call(_)}catch(e){}try{return _+""}catch(e){}}return""}},69380:(U,$,m)=>{var T=m(74857);U.exports=function(n){return T(n,5)}},79106:U=>{U.exports=function(m,T){return m===T||m!=m&&T!=T}},36817:(U,$,m)=>{var T=m(17046);U.exports=function(e,t,n){var r=null==e?void 0:T(e,t);return void 0===r?n:r}},93832:(U,$,m)=>{var T=m(81065),_=m(22308),e=Object.prototype,t=e.hasOwnProperty,n=e.propertyIsEnumerable,r=T(function(){return arguments}())?T:function(s){return _(s)&&t.call(s,"callee")&&!n.call(s,"callee")};U.exports=r},83684:U=>{U.exports=Array.isArray},49300:(U,$,m)=>{var T=m(88066),_=m(67818);U.exports=function(t){return null!=t&&_(t.length)&&!T(t)}},18666:(U,$,m)=>{U=m.nmd(U);var T=m(75719),_=m(93320),e=$&&!$.nodeType&&$,t=e&&U&&!U.nodeType&&U,r=t&&t.exports===e?T.Buffer:void 0;U.exports=(r?r.isBuffer:void 0)||_},65359:(U,$,m)=>{var T=m(16249),_=m(40691),e=m(93832),t=m(83684),n=m(49300),r=m(18666),s=m(27877),u=m(78558),Z=Object.prototype.hasOwnProperty;U.exports=function(et){if(null==et)return!0;if(n(et)&&(t(et)||"string"==typeof et||"function"==typeof et.splice||r(et)||u(et)||e(et)))return!et.length;var Tt=_(et);if("[object Map]"==Tt||"[object Set]"==Tt)return!et.size;if(s(et))return!T(et).length;for(var Pt in et)if(Z.call(et,Pt))return!1;return!0}},88066:(U,$,m)=>{var T=m(40232),_=m(6264);U.exports=function(u){if(!_(u))return!1;var b=T(u);return"[object Function]"==b||"[object GeneratorFunction]"==b||"[object AsyncFunction]"==b||"[object Proxy]"==b}},67818:U=>{U.exports=function(T){return"number"==typeof T&&T>-1&&T%1==0&&T<=9007199254740991}},15261:(U,$,m)=>{var T=m(16612),_=m(81279),e=m(56520),t=e&&e.isMap,n=t?_(t):T;U.exports=n},6264:U=>{U.exports=function(m){var T=typeof m;return null!=m&&("object"==T||"function"==T)}},22308:U=>{U.exports=function(m){return null!=m&&"object"==typeof m}},27935:(U,$,m)=>{var T=m(40232),_=m(566),e=m(22308),s=Function.prototype.toString,u=Object.prototype.hasOwnProperty,b=s.call(Object);U.exports=function(B){if(!e(B)||"[object Object]"!=T(B))return!1;var Z=_(B);if(null===Z)return!0;var ot=u.call(Z,"constructor")&&Z.constructor;return"function"==typeof ot&&ot instanceof ot&&s.call(ot)==b}},57221:(U,$,m)=>{var T=m(26987),_=m(81279),e=m(56520),t=e&&e.isSet,n=t?_(t):T;U.exports=n},38380:(U,$,m)=>{var T=m(40232),_=m(22308);U.exports=function(n){return"symbol"==typeof n||_(n)&&"[object Symbol]"==T(n)}},78558:(U,$,m)=>{var T=m(11264),_=m(81279),e=m(56520),t=e&&e.isTypedArray,n=t?_(t):T;U.exports=n},63344:(U,$,m)=>{var T=m(75715),_=m(16249),e=m(49300);U.exports=function(n){return e(n)?T(n):_(n)}},39479:(U,$,m)=>{var T=m(75715),_=m(90374),e=m(49300);U.exports=function(n){return e(n)?T(n,!0):_(n)}},40917:(U,$,m)=>{var T=m(90923);function e(t,n){if("function"!=typeof t||null!=n&&"function"!=typeof n)throw new TypeError("Expected a function");var r=function(){var s=arguments,u=n?n.apply(this,s):s[0],b=r.cache;if(b.has(u))return b.get(u);var x=t.apply(this,s);return r.cache=b.set(u,x)||b,x};return r.cache=new(e.Cache||T),r}e.Cache=T,U.exports=e},35587:U=>{U.exports=function(){return[]}},93320:U=>{U.exports=function(){return!1}},30381:(U,$,m)=>{var T=m(15825);U.exports=function(e){return null==e?"":T(e)}},50847:(U,$,m)=>{var T="function"==typeof Map&&Map.prototype,_=Object.getOwnPropertyDescriptor&&T?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,e=T&&_&&"function"==typeof _.get?_.get:null,t=T&&Map.prototype.forEach,n="function"==typeof Set&&Set.prototype,r=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,s=n&&r&&"function"==typeof r.get?r.get:null,u=n&&Set.prototype.forEach,x="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,Z="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,et="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,Tt=Boolean.prototype.valueOf,Pt=Object.prototype.toString,pt=Function.prototype.toString,It=String.prototype.match,Ht=String.prototype.slice,Jt=String.prototype.replace,Ct=String.prototype.toUpperCase,bt=String.prototype.toLowerCase,st=RegExp.prototype.test,gt=Array.prototype.concat,lt=Array.prototype.join,Bt=Array.prototype.slice,Dt=Math.floor,Et="function"==typeof BigInt?BigInt.prototype.valueOf:null,ut=Object.getOwnPropertySymbols,rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,fe="function"==typeof Symbol&&"object"==typeof Symbol.iterator,Mt="function"==typeof Symbol&&Symbol.toStringTag&&(Symbol,1)?Symbol.toStringTag:null,Nt=Object.prototype.propertyIsEnumerable,ge=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(Re){return Re.__proto__}:null);function ve(Re,xe){if(Re===1/0||Re===-1/0||Re!=Re||Re&&Re>-1e3&&Re<1e3||st.call(/e/,xe))return xe;var Ci=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof Re){var je=Re<0?-Dt(-Re):Dt(Re);if(je!==Re){var Ii=String(je),_i=Ht.call(xe,Ii.length+1);return Jt.call(Ii,Ci,"$&_")+"."+Jt.call(Jt.call(_i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Jt.call(xe,Ci,"$&_")}var pe=m(52175).custom,He=pe&&ie(pe)?pe:null;function ke(Re,xe,Ci){var je="double"===(Ci.quoteStyle||xe)?'"':"'";return je+Re+je}function Ze(Re){return Jt.call(String(Re),/"/g,"&quot;")}function Di(Re){return!("[object Array]"!==ri(Re)||Mt&&"object"==typeof Re&&Mt in Re)}function ie(Re){if(fe)return Re&&"object"==typeof Re&&Re instanceof Symbol;if("symbol"==typeof Re)return!0;if(!Re||"object"!=typeof Re||!rt)return!1;try{return rt.call(Re),!0}catch(xe){}return!1}U.exports=function Re(xe,Ci,je,Ii){var _i=Ci||{};if(Ce(_i,"quoteStyle")&&"single"!==_i.quoteStyle&&"double"!==_i.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Ce(_i,"maxStringLength")&&("number"==typeof _i.maxStringLength?_i.maxStringLength<0&&_i.maxStringLength!==1/0:null!==_i.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var Hi=!Ce(_i,"customInspect")||_i.customInspect;if("boolean"!=typeof Hi&&"symbol"!==Hi)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Ce(_i,"indent")&&null!==_i.indent&&"\t"!==_i.indent&&!(parseInt(_i.indent,10)===_i.indent&&_i.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Ce(_i,"numericSeparator")&&"boolean"!=typeof _i.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var Je=_i.numericSeparator;if(void 0===xe)return"undefined";if(null===xe)return"null";if("boolean"==typeof xe)return xe?"true":"false";if("string"==typeof xe)return de(xe,_i);if("number"==typeof xe){if(0===xe)return 1/0/xe>0?"0":"-0";var ue=String(xe);return Je?ve(xe,ue):ue}if("bigint"==typeof xe){var kt=String(xe)+"n";return Je?ve(xe,kt):kt}var ct=void 0===_i.depth?5:_i.depth;if(void 0===je&&(je=0),je>=ct&&ct>0&&"object"==typeof xe)return Di(xe)?"[Array]":"[Object]";var Lt=function(Re,xe){var Ci;if("\t"===Re.indent)Ci="\t";else{if(!("number"==typeof Re.indent&&Re.indent>0))return null;Ci=lt.call(Array(Re.indent+1)," ")}return{base:Ci,prev:lt.call(Array(xe+1),Ci)}}(_i,je);if(void 0===Ii)Ii=[];else if(te(Ii,xe)>=0)return"[Circular]";function ce(fo,kr,ar){if(kr&&(Ii=Bt.call(Ii)).push(kr),ar){var Oo={depth:_i.depth};return Ce(_i,"quoteStyle")&&(Oo.quoteStyle=_i.quoteStyle),Re(fo,Oo,je+1,Ii)}return Re(fo,_i,je+1,Ii)}if("function"==typeof xe){var Ne=function(Re){if(Re.name)return Re.name;var xe=It.call(pt.call(Re),/^function\s*([\w$]+)/);return xe?xe[1]:null}(xe),Wi=Zi(xe,ce);return"[Function"+(Ne?": "+Ne:" (anonymous)")+"]"+(Wi.length>0?" { "+lt.call(Wi,", ")+" }":"")}if(ie(xe)){var qi=fe?Jt.call(String(xe),/^(Symbol\(.*\))_[^)]*$/,"$1"):rt.call(xe);return"object"!=typeof xe||fe?qi:ni(qi)}if(function(Re){return!(!Re||"object"!=typeof Re)&&("undefined"!=typeof HTMLElement&&Re instanceof HTMLElement||"string"==typeof Re.nodeName&&"function"==typeof Re.getAttribute)}(xe)){for(var Sn="<"+bt.call(String(xe.nodeName)),ir=xe.attributes||[],ci=0;ci<ir.length;ci++)Sn+=" "+ir[ci].name+"="+ke(Ze(ir[ci].value),"double",_i);return Sn+=">",xe.childNodes&&xe.childNodes.length&&(Sn+="..."),Sn+"</"+bt.call(String(xe.nodeName))+">"}if(Di(xe)){if(0===xe.length)return"[]";var Ke=Zi(xe,ce);return Lt&&!function(Re){for(var xe=0;xe<Re.length;xe++)if(te(Re[xe],"\n")>=0)return!1;return!0}(Ke)?"["+mi(Ke,Lt)+"]":"[ "+lt.call(Ke,", ")+" ]"}if(function(Re){return!("[object Error]"!==ri(Re)||Mt&&"object"==typeof Re&&Mt in Re)}(xe)){var Pe=Zi(xe,ce);return"cause"in xe&&!Nt.call(xe,"cause")?"{ ["+String(xe)+"] "+lt.call(gt.call("[cause]: "+ce(xe.cause),Pe),", ")+" }":0===Pe.length?"["+String(xe)+"]":"{ ["+String(xe)+"] "+lt.call(Pe,", ")+" }"}if("object"==typeof xe&&Hi){if(He&&"function"==typeof xe[He])return xe[He]();if("symbol"!==Hi&&"function"==typeof xe.inspect)return xe.inspect()}if(function(Re){if(!e||!Re||"object"!=typeof Re)return!1;try{e.call(Re);try{s.call(Re)}catch(xe){return!0}return Re instanceof Map}catch(xe){}return!1}(xe)){var hi=[];return t.call(xe,function(fo,kr){hi.push(ce(kr,xe,!0)+" => "+ce(fo,xe))}),wi("Map",e.call(xe),hi,Lt)}if(function(Re){if(!s||!Re||"object"!=typeof Re)return!1;try{s.call(Re);try{e.call(Re)}catch(xe){return!0}return Re instanceof Set}catch(xe){}return!1}(xe)){var xi=[];return u.call(xe,function(fo){xi.push(ce(fo,xe))}),wi("Set",s.call(xe),xi,Lt)}if(function(Re){if(!x||!Re||"object"!=typeof Re)return!1;try{x.call(Re,x);try{Z.call(Re,Z)}catch(xe){return!0}return Re instanceof WeakMap}catch(xe){}return!1}(xe))return Pi("WeakMap");if(function(Re){if(!Z||!Re||"object"!=typeof Re)return!1;try{Z.call(Re,Z);try{x.call(Re,x)}catch(xe){return!0}return Re instanceof WeakSet}catch(xe){}return!1}(xe))return Pi("WeakSet");if(function(Re){if(!et||!Re||"object"!=typeof Re)return!1;try{return et.call(Re),!0}catch(xe){}return!1}(xe))return Pi("WeakRef");if(function(Re){return!("[object Number]"!==ri(Re)||Mt&&"object"==typeof Re&&Mt in Re)}(xe))return ni(ce(Number(xe)));if(function(Re){if(!Re||"object"!=typeof Re||!Et)return!1;try{return Et.call(Re),!0}catch(xe){}return!1}(xe))return ni(ce(Et.call(xe)));if(function(Re){return!("[object Boolean]"!==ri(Re)||Mt&&"object"==typeof Re&&Mt in Re)}(xe))return ni(Tt.call(xe));if(function(Re){return!("[object String]"!==ri(Re)||Mt&&"object"==typeof Re&&Mt in Re)}(xe))return ni(ce(String(xe)));if(!function(Re){return!("[object Date]"!==ri(Re)||Mt&&"object"==typeof Re&&Mt in Re)}(xe)&&!function(Re){return!("[object RegExp]"!==ri(Re)||Mt&&"object"==typeof Re&&Mt in Re)}(xe)){var fn=Zi(xe,ce),In=ge?ge(xe)===Object.prototype:xe instanceof Object||xe.constructor===Object,or=xe instanceof Object?"":"null prototype",Cr=!In&&Mt&&Object(xe)===xe&&Mt in xe?Ht.call(ri(xe),8,-1):or?"Object":"",no=(In||"function"!=typeof xe.constructor?"":xe.constructor.name?xe.constructor.name+" ":"")+(Cr||or?"["+lt.call(gt.call([],Cr||[],or||[]),": ")+"] ":"");return 0===fn.length?no+"{}":Lt?no+"{"+mi(fn,Lt)+"}":no+"{ "+lt.call(fn,", ")+" }"}return String(xe)};var jt=Object.prototype.hasOwnProperty||function(Re){return Re in this};function Ce(Re,xe){return jt.call(Re,xe)}function ri(Re){return Pt.call(Re)}function te(Re,xe){if(Re.indexOf)return Re.indexOf(xe);for(var Ci=0,je=Re.length;Ci<je;Ci++)if(Re[Ci]===xe)return Ci;return-1}function de(Re,xe){if(Re.length>xe.maxStringLength){var Ci=Re.length-xe.maxStringLength,je="... "+Ci+" more character"+(Ci>1?"s":"");return de(Ht.call(Re,0,xe.maxStringLength),xe)+je}return ke(Jt.call(Jt.call(Re,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,ti),"single",xe)}function ti(Re){var xe=Re.charCodeAt(0),Ci={8:"b",9:"t",10:"n",12:"f",13:"r"}[xe];return Ci?"\\"+Ci:"\\x"+(xe<16?"0":"")+Ct.call(xe.toString(16))}function ni(Re){return"Object("+Re+")"}function Pi(Re){return Re+" { ? }"}function wi(Re,xe,Ci,je){return Re+" ("+xe+") {"+(je?mi(Ci,je):lt.call(Ci,", "))+"}"}function mi(Re,xe){if(0===Re.length)return"";var Ci="\n"+xe.prev+xe.base;return Ci+lt.call(Re,","+Ci)+"\n"+xe.prev}function Zi(Re,xe){var Ci=Di(Re),je=[];if(Ci){je.length=Re.length;for(var Ii=0;Ii<Re.length;Ii++)je[Ii]=Ce(Re,Ii)?xe(Re[Ii],Re):""}var Hi,_i="function"==typeof ut?ut(Re):[];if(fe){Hi={};for(var Je=0;Je<_i.length;Je++)Hi["$"+_i[Je]]=_i[Je]}for(var ue in Re)!Ce(Re,ue)||Ci&&String(Number(ue))===ue&&ue<Re.length||fe&&Hi["$"+ue]instanceof Symbol||(st.call(/[^\w$]/,ue)?je.push(xe(ue,Re)+": "+xe(Re[ue],Re)):je.push(ue+": "+xe(Re[ue],Re)));if("function"==typeof ut)for(var kt=0;kt<_i.length;kt++)Nt.call(Re,_i[kt])&&je.push("["+xe(_i[kt])+"]: "+xe(Re[_i[kt]],Re));return je}},66352:U=>{"use strict";function $(m,T){return Object.prototype.hasOwnProperty.call(m,T)}U.exports=function(m,T,_,e){_=_||"=";var t={};if("string"!=typeof m||0===m.length)return t;var n=/\+/g;m=m.split(T=T||"&");var r=1e3;e&&"number"==typeof e.maxKeys&&(r=e.maxKeys);var s=m.length;r>0&&s>r&&(s=r);for(var u=0;u<s;++u){var B,Z,ot,et,b=m[u].replace(n,"%20"),x=b.indexOf(_);x>=0?(B=b.substr(0,x),Z=b.substr(x+1)):(B=b,Z=""),ot=decodeURIComponent(B),et=decodeURIComponent(Z),$(t,ot)?Array.isArray(t[ot])?t[ot].push(et):t[ot]=[t[ot],et]:t[ot]=et}return t}},17519:U=>{"use strict";var $=function(m){switch(typeof m){case"string":return m;case"boolean":return m?"true":"false";case"number":return isFinite(m)?m:"";default:return""}};U.exports=function(m,T,_,e){return T=T||"&",_=_||"=",null===m&&(m=void 0),"object"==typeof m?Object.keys(m).map(function(t){var n=encodeURIComponent($(t))+_;return Array.isArray(m[t])?m[t].map(function(r){return n+encodeURIComponent($(r))}).join(T):n+encodeURIComponent($(m[t]))}).join(T):e?encodeURIComponent($(e))+_+encodeURIComponent($(m)):""}},10569:(U,$,m)=>{"use strict";$.decode=$.parse=m(66352),$.encode=$.stringify=m(17519)},43510:U=>{var $=function(m){"use strict";var e,T=Object.prototype,_=T.hasOwnProperty,t="function"==typeof Symbol?Symbol:{},n=t.iterator||"@@iterator",r=t.asyncIterator||"@@asyncIterator",s=t.toStringTag||"@@toStringTag";function u(Mt,Nt,ge){return Object.defineProperty(Mt,Nt,{value:ge,enumerable:!0,configurable:!0,writable:!0}),Mt[Nt]}try{u({},"")}catch(Mt){u=function(Nt,ge,ve){return Nt[ge]=ve}}function b(Mt,Nt,ge,ve){var He=Object.create((Nt&&Nt.prototype instanceof Pt?Nt:Pt).prototype),ke=new ut(ve||[]);return He._invoke=function(Mt,Nt,ge){var ve=B;return function(He,ke){if(ve===ot)throw new Error("Generator is already running");if(ve===et){if("throw"===He)throw ke;return fe()}for(ge.method=He,ge.arg=ke;;){var Ze=ge.delegate;if(Ze){var Di=Bt(Ze,ge);if(Di){if(Di===Tt)continue;return Di}}if("next"===ge.method)ge.sent=ge._sent=ge.arg;else if("throw"===ge.method){if(ve===B)throw ve=et,ge.arg;ge.dispatchException(ge.arg)}else"return"===ge.method&&ge.abrupt("return",ge.arg);ve=ot;var $e=x(Mt,Nt,ge);if("normal"===$e.type){if(ve=ge.done?et:Z,$e.arg===Tt)continue;return{value:$e.arg,done:ge.done}}"throw"===$e.type&&(ve=et,ge.method="throw",ge.arg=$e.arg)}}}(Mt,ge,ke),He}function x(Mt,Nt,ge){try{return{type:"normal",arg:Mt.call(Nt,ge)}}catch(ve){return{type:"throw",arg:ve}}}m.wrap=b;var B="suspendedStart",Z="suspendedYield",ot="executing",et="completed",Tt={};function Pt(){}function pt(){}function It(){}var Ht={};u(Ht,n,function(){return this});var Jt=Object.getPrototypeOf,Ct=Jt&&Jt(Jt(rt([])));Ct&&Ct!==T&&_.call(Ct,n)&&(Ht=Ct);var bt=It.prototype=Pt.prototype=Object.create(Ht);function st(Mt){["next","throw","return"].forEach(function(Nt){u(Mt,Nt,function(ge){return this._invoke(Nt,ge)})})}function gt(Mt,Nt){function ge(He,ke,Ze,Di){var $e=x(Mt[He],Mt,ke);if("throw"!==$e.type){var Le=$e.arg,pi=Le.value;return pi&&"object"==typeof pi&&_.call(pi,"__await")?Nt.resolve(pi.__await).then(function(Gt){ge("next",Gt,Ze,Di)},function(Gt){ge("throw",Gt,Ze,Di)}):Nt.resolve(pi).then(function(Gt){Le.value=Gt,Ze(Le)},function(Gt){return ge("throw",Gt,Ze,Di)})}Di($e.arg)}var ve;this._invoke=function(He,ke){function Ze(){return new Nt(function(Di,$e){ge(He,ke,Di,$e)})}return ve=ve?ve.then(Ze,Ze):Ze()}}function Bt(Mt,Nt){var ge=Mt.iterator[Nt.method];if(ge===e){if(Nt.delegate=null,"throw"===Nt.method){if(Mt.iterator.return&&(Nt.method="return",Nt.arg=e,Bt(Mt,Nt),"throw"===Nt.method))return Tt;Nt.method="throw",Nt.arg=new TypeError("The iterator does not provide a 'throw' method")}return Tt}var ve=x(ge,Mt.iterator,Nt.arg);if("throw"===ve.type)return Nt.method="throw",Nt.arg=ve.arg,Nt.delegate=null,Tt;var pe=ve.arg;return pe?pe.done?(Nt[Mt.resultName]=pe.value,Nt.next=Mt.nextLoc,"return"!==Nt.method&&(Nt.method="next",Nt.arg=e),Nt.delegate=null,Tt):pe:(Nt.method="throw",Nt.arg=new TypeError("iterator result is not an object"),Nt.delegate=null,Tt)}function Dt(Mt){var Nt={tryLoc:Mt[0]};1 in Mt&&(Nt.catchLoc=Mt[1]),2 in Mt&&(Nt.finallyLoc=Mt[2],Nt.afterLoc=Mt[3]),this.tryEntries.push(Nt)}function Et(Mt){var Nt=Mt.completion||{};Nt.type="normal",delete Nt.arg,Mt.completion=Nt}function ut(Mt){this.tryEntries=[{tryLoc:"root"}],Mt.forEach(Dt,this),this.reset(!0)}function rt(Mt){if(Mt){var Nt=Mt[n];if(Nt)return Nt.call(Mt);if("function"==typeof Mt.next)return Mt;if(!isNaN(Mt.length)){var ge=-1,ve=function pe(){for(;++ge<Mt.length;)if(_.call(Mt,ge))return pe.value=Mt[ge],pe.done=!1,pe;return pe.value=e,pe.done=!0,pe};return ve.next=ve}}return{next:fe}}function fe(){return{value:e,done:!0}}return pt.prototype=It,u(bt,"constructor",It),u(It,"constructor",pt),pt.displayName=u(It,s,"GeneratorFunction"),m.isGeneratorFunction=function(Mt){var Nt="function"==typeof Mt&&Mt.constructor;return!!Nt&&(Nt===pt||"GeneratorFunction"===(Nt.displayName||Nt.name))},m.mark=function(Mt){return Object.setPrototypeOf?Object.setPrototypeOf(Mt,It):(Mt.__proto__=It,u(Mt,s,"GeneratorFunction")),Mt.prototype=Object.create(bt),Mt},m.awrap=function(Mt){return{__await:Mt}},st(gt.prototype),u(gt.prototype,r,function(){return this}),m.AsyncIterator=gt,m.async=function(Mt,Nt,ge,ve,pe){void 0===pe&&(pe=Promise);var He=new gt(b(Mt,Nt,ge,ve),pe);return m.isGeneratorFunction(Nt)?He:He.next().then(function(ke){return ke.done?ke.value:He.next()})},st(bt),u(bt,s,"Generator"),u(bt,n,function(){return this}),u(bt,"toString",function(){return"[object Generator]"}),m.keys=function(Mt){var Nt=[];for(var ge in Mt)Nt.push(ge);return Nt.reverse(),function ve(){for(;Nt.length;){var pe=Nt.pop();if(pe in Mt)return ve.value=pe,ve.done=!1,ve}return ve.done=!0,ve}},m.values=rt,ut.prototype={constructor:ut,reset:function(Mt){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(Et),!Mt)for(var Nt in this)"t"===Nt.charAt(0)&&_.call(this,Nt)&&!isNaN(+Nt.slice(1))&&(this[Nt]=e)},stop:function(){this.done=!0;var Nt=this.tryEntries[0].completion;if("throw"===Nt.type)throw Nt.arg;return this.rval},dispatchException:function(Mt){if(this.done)throw Mt;var Nt=this;function ge(Di,$e){return He.type="throw",He.arg=Mt,Nt.next=Di,$e&&(Nt.method="next",Nt.arg=e),!!$e}for(var ve=this.tryEntries.length-1;ve>=0;--ve){var pe=this.tryEntries[ve],He=pe.completion;if("root"===pe.tryLoc)return ge("end");if(pe.tryLoc<=this.prev){var ke=_.call(pe,"catchLoc"),Ze=_.call(pe,"finallyLoc");if(ke&&Ze){if(this.prev<pe.catchLoc)return ge(pe.catchLoc,!0);if(this.prev<pe.finallyLoc)return ge(pe.finallyLoc)}else if(ke){if(this.prev<pe.catchLoc)return ge(pe.catchLoc,!0)}else{if(!Ze)throw new Error("try statement without catch or finally");if(this.prev<pe.finallyLoc)return ge(pe.finallyLoc)}}}},abrupt:function(Mt,Nt){for(var ge=this.tryEntries.length-1;ge>=0;--ge){var ve=this.tryEntries[ge];if(ve.tryLoc<=this.prev&&_.call(ve,"finallyLoc")&&this.prev<ve.finallyLoc){var pe=ve;break}}pe&&("break"===Mt||"continue"===Mt)&&pe.tryLoc<=Nt&&Nt<=pe.finallyLoc&&(pe=null);var He=pe?pe.completion:{};return He.type=Mt,He.arg=Nt,pe?(this.method="next",this.next=pe.finallyLoc,Tt):this.complete(He)},complete:function(Mt,Nt){if("throw"===Mt.type)throw Mt.arg;return"break"===Mt.type||"continue"===Mt.type?this.next=Mt.arg:"return"===Mt.type?(this.rval=this.arg=Mt.arg,this.method="return",this.next="end"):"normal"===Mt.type&&Nt&&(this.next=Nt),Tt},finish:function(Mt){for(var Nt=this.tryEntries.length-1;Nt>=0;--Nt){var ge=this.tryEntries[Nt];if(ge.finallyLoc===Mt)return this.complete(ge.completion,ge.afterLoc),Et(ge),Tt}},catch:function(Mt){for(var Nt=this.tryEntries.length-1;Nt>=0;--Nt){var ge=this.tryEntries[Nt];if(ge.tryLoc===Mt){var ve=ge.completion;if("throw"===ve.type){var pe=ve.arg;Et(ge)}return pe}}throw new Error("illegal catch attempt")},delegateYield:function(Mt,Nt,ge){return this.delegate={iterator:rt(Mt),resultName:Nt,nextLoc:ge},"next"===this.method&&(this.arg=e),Tt}},m}(U.exports);try{regeneratorRuntime=$}catch(m){"object"==typeof globalThis?globalThis.regeneratorRuntime=$:Function("r","regeneratorRuntime = r")($)}},83030:(U,$,m)=>{"use strict";var T=m(23141),_=m(72167),e=m(50847),t=T("%TypeError%"),n=T("%WeakMap%",!0),r=T("%Map%",!0),s=_("WeakMap.prototype.get",!0),u=_("WeakMap.prototype.set",!0),b=_("WeakMap.prototype.has",!0),x=_("Map.prototype.get",!0),B=_("Map.prototype.set",!0),Z=_("Map.prototype.has",!0),ot=function(pt,It){for(var Jt,Ht=pt;null!==(Jt=Ht.next);Ht=Jt)if(Jt.key===It)return Ht.next=Jt.next,Jt.next=pt.next,pt.next=Jt,Jt};U.exports=function(){var It,Ht,Jt,Ct={assert:function(bt){if(!Ct.has(bt))throw new t("Side channel does not contain "+e(bt))},get:function(bt){if(n&&bt&&("object"==typeof bt||"function"==typeof bt)){if(It)return s(It,bt)}else if(r){if(Ht)return x(Ht,bt)}else if(Jt)return function(pt,It){var Ht=ot(pt,It);return Ht&&Ht.value}(Jt,bt)},has:function(bt){if(n&&bt&&("object"==typeof bt||"function"==typeof bt)){if(It)return b(It,bt)}else if(r){if(Ht)return Z(Ht,bt)}else if(Jt)return function(pt,It){return!!ot(pt,It)}(Jt,bt);return!1},set:function(bt,st){n&&bt&&("object"==typeof bt||"function"==typeof bt)?(It||(It=new n),u(It,bt,st)):r?(Ht||(Ht=new r),B(Ht,bt,st)):(Jt||(Jt={key:{},next:null}),function(pt,It,Ht){var Jt=ot(pt,It);Jt?Jt.value=Ht:pt.next={key:It,next:pt.next,value:Ht}}(Jt,bt,st))}};return Ct}},10695:(U,$,m)=>{"use strict";m.r($),m.d($,{default:()=>Os,helpers:()=>zs});var T={};m.r(T),m.d(T,{JsonPatchError:()=>Po,_areEquals:()=>Dl,applyOperation:()=>za,applyPatch:()=>Aa,applyReducer:()=>Kl,deepClone:()=>Xc,getValueByPointer:()=>pc,validate:()=>qo,validator:()=>Rl});var _={};m.r(_),m.d(_,{compare:()=>tl,generate:()=>xc,observe:()=>$l,unobserve:()=>Nl});var e={};m.r(e),m.d(e,{cookie:()=>$t,header:()=>Vt,path:()=>Y,query:()=>ht});var t=m(90986),n=m(96915),r=m(40715),s=m(77901),u=m(88577),b=m(95942),x=m(46188),B=m(8797);function Z(S,H,j){return H in S?B(S,H,{value:j,enumerable:!0,configurable:!0,writable:!0}):S[H]=j,S}function ot(S,H){var j=t(S);if(n){var it=n(S);H&&(it=r(it).call(it,function(mt){return s(S,mt).enumerable})),j.push.apply(j,it)}return j}function et(S){for(var H=1;H<arguments.length;H++){var j,it,mt=null!=arguments[H]?arguments[H]:{};H%2?u(j=ot(Object(mt),!0)).call(j,function(Xt){Z(S,Xt,mt[Xt])}):b?x(S,b(mt)):u(it=ot(Object(mt))).call(it,function(Xt){B(S,Xt,s(mt,Xt))})}return S}var Tt=m(12782),Pt=m.n(Tt),pt=m(81836),It=m.n(pt),Ht=m(20434),Jt=m(45698),Ct=m(92909),bt=m(10278),st=m(48735),gt=m(49067);function lt(S,H){(null==H||H>S.length)&&(H=S.length);for(var j=0,it=new Array(H);j<H;j++)it[j]=S[j];return it}function Bt(S,H){var j;if(S){if("string"==typeof S)return lt(S,H);var it=st(j=Object.prototype.toString.call(S)).call(j,8,-1);if("Object"===it&&S.constructor&&(it=S.constructor.name),"Map"===it||"Set"===it)return gt(S);if("Arguments"===it||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(it))return lt(S,H)}}function Dt(S,H){var j=void 0!==Jt&&Ct(S)||S["@@iterator"];if(!j){if(bt(S)||(j=Bt(S))||H&&S&&"number"==typeof S.length){j&&(S=j);var it=0,mt=function(){};return{s:mt,n:function(){return it>=S.length?{done:!0}:{done:!1,value:S[it++]}},e:function(Me){throw Me},f:mt}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var le,Xt=!0,Yt=!1;return{s:function(){j=j.call(S)},n:function(){var Me=j.next();return Xt=Me.done,Me},e:function(Me){Yt=!0,le=Me},f:function(){try{!Xt&&null!=j.return&&j.return()}finally{if(Yt)throw le}}}}var Et=m(48972);function ut(S){return(ut="function"==typeof Jt&&"symbol"==typeof Et?function(H){return typeof H}:function(H){return H&&"function"==typeof Jt&&H.constructor===Jt&&H!==Jt.prototype?"symbol":typeof H})(S)}function Nt(S,H){return function(S){if(bt(S))return S}(S)||function(S,H){var j=null==S?null:void 0!==Jt&&Ct(S)||S["@@iterator"];if(null!=j){var Yt,le,it=[],mt=!0,Xt=!1;try{for(j=j.call(S);!(mt=(Yt=j.next()).done)&&(it.push(Yt.value),!H||it.length!==H);mt=!0);}catch(we){Xt=!0,le=we}finally{try{!mt&&null!=j.return&&j.return()}finally{if(Xt)throw le}}return it}}(S,H)||Bt(S,H)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ge=m(62917);function ve(S,H,j,it,mt,Xt,Yt){try{var le=S[Xt](Yt),we=le.value}catch(Me){return void j(Me)}le.done?H(we):ge.resolve(we).then(it,mt)}function pe(S){return function(){var H=this,j=arguments;return new ge(function(it,mt){var Xt=S.apply(H,j);function Yt(we){ve(Xt,it,mt,Yt,le,"next",we)}function le(we){ve(Xt,it,mt,Yt,le,"throw",we)}Yt(void 0)})}}var He=m(59680),ke=m.n(He),Ze=m(40750),Di=m.n(Ze),$e=m(20036),Le=m.n($e),pi=m(70433),Gt=m.n(pi),Se=m(25710),Zt=m.n(Se),ie=m(55742),St=m.n(ie),jt=m(32472),Ce=m.n(jt),ri=m(82476),Te=m.n(ri),te=m(27733),ne=m.n(te),Oe=m(55672),re=m.n(Oe),ye=(m(76400),m(7029)),Qt=m.n(ye);function de(S){return null==S}var je={isNothing:de,isObject:function(S){return"object"==typeof S&&null!==S},toArray:function(S){return Array.isArray(S)?S:de(S)?[]:[S]},repeat:function(S,H){var it,j="";for(it=0;it<H;it+=1)j+=S;return j},isNegativeZero:function(S){return 0===S&&Number.NEGATIVE_INFINITY===1/S},extend:function(S,H){var j,it,mt,Xt;if(H)for(j=0,it=(Xt=Object.keys(H)).length;j<it;j+=1)S[mt=Xt[j]]=H[mt];return S}};function Ii(S,H){var j="",it=S.reason||"(unknown reason)";return S.mark?(S.mark.name&&(j+='in "'+S.mark.name+'" '),j+="("+(S.mark.line+1)+":"+(S.mark.column+1)+")",!H&&S.mark.snippet&&(j+="\n\n"+S.mark.snippet),it+" "+j):it}function _i(S,H){Error.call(this),this.name="YAMLException",this.reason=S,this.mark=H,this.message=Ii(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}(_i.prototype=Object.create(Error.prototype)).constructor=_i,_i.prototype.toString=function(H){return this.name+": "+Ii(this,H)};var Hi=_i;function Je(S,H,j,it,mt){var Xt="",Yt="",le=Math.floor(mt/2)-1;return it-H>le&&(H=it-le+(Xt=" ... ").length),j-it>le&&(j=it+le-(Yt=" ...").length),{str:Xt+S.slice(H,j).replace(/\t/g,"\u2192")+Yt,pos:it-H+Xt.length}}function ue(S,H){return je.repeat(" ",H-S.length)+S}var Lt=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],ce=["scalar","sequence","mapping"],qi=function(S,H){if(H=H||{},Object.keys(H).forEach(function(j){if(-1===Lt.indexOf(j))throw new Hi('Unknown option "'+j+'" is met in definition of "'+S+'" YAML type.')}),this.options=H,this.tag=S,this.kind=H.kind||null,this.resolve=H.resolve||function(){return!0},this.construct=H.construct||function(j){return j},this.instanceOf=H.instanceOf||null,this.predicate=H.predicate||null,this.represent=H.represent||null,this.representName=H.representName||null,this.defaultStyle=H.defaultStyle||null,this.multi=H.multi||!1,this.styleAliases=function(S){var H={};return null!==S&&Object.keys(S).forEach(function(j){S[j].forEach(function(it){H[String(it)]=j})}),H}(H.styleAliases||null),-1===ce.indexOf(this.kind))throw new Hi('Unknown kind "'+this.kind+'" is specified for "'+S+'" YAML type.')};function Sn(S,H){var j=[];return S[H].forEach(function(it){var mt=j.length;j.forEach(function(Xt,Yt){Xt.tag===it.tag&&Xt.kind===it.kind&&Xt.multi===it.multi&&(mt=Yt)}),j[mt]=it}),j}function ci(S){return this.extend(S)}ci.prototype.extend=function(H){var j=[],it=[];if(H instanceof qi)it.push(H);else if(Array.isArray(H))it=it.concat(H);else{if(!H||!Array.isArray(H.implicit)&&!Array.isArray(H.explicit))throw new Hi("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");H.implicit&&(j=j.concat(H.implicit)),H.explicit&&(it=it.concat(H.explicit))}j.forEach(function(Xt){if(!(Xt instanceof qi))throw new Hi("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(Xt.loadKind&&"scalar"!==Xt.loadKind)throw new Hi("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(Xt.multi)throw new Hi("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),it.forEach(function(Xt){if(!(Xt instanceof qi))throw new Hi("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var mt=Object.create(ci.prototype);return mt.implicit=(this.implicit||[]).concat(j),mt.explicit=(this.explicit||[]).concat(it),mt.compiledImplicit=Sn(mt,"implicit"),mt.compiledExplicit=Sn(mt,"explicit"),mt.compiledTypeMap=function(){var H,j,S={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function it(mt){mt.multi?(S.multi[mt.kind].push(mt),S.multi.fallback.push(mt)):S[mt.kind][mt.tag]=S.fallback[mt.tag]=mt}for(H=0,j=arguments.length;H<j;H+=1)arguments[H].forEach(it);return S}(mt.compiledImplicit,mt.compiledExplicit),mt};var Ke=ci,Pe=new qi("tag:yaml.org,2002:str",{kind:"scalar",construct:function(S){return null!==S?S:""}}),hi=new qi("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(S){return null!==S?S:[]}}),xi=new qi("tag:yaml.org,2002:map",{kind:"mapping",construct:function(S){return null!==S?S:{}}}),fn=new Ke({explicit:[Pe,hi,xi]}),to=new qi("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(S){if(null===S)return!0;var H=S.length;return 1===H&&"~"===S||4===H&&("null"===S||"Null"===S||"NULL"===S)},construct:function(){return null},predicate:function(S){return null===S},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"}),ar=new qi("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(S){if(null===S)return!1;var H=S.length;return 4===H&&("true"===S||"True"===S||"TRUE"===S)||5===H&&("false"===S||"False"===S||"FALSE"===S)},construct:function(S){return"true"===S||"True"===S||"TRUE"===S},predicate:function(S){return"[object Boolean]"===Object.prototype.toString.call(S)},represent:{lowercase:function(S){return S?"true":"false"},uppercase:function(S){return S?"TRUE":"FALSE"},camelcase:function(S){return S?"True":"False"}},defaultStyle:"lowercase"});function Oo(S){return 48<=S&&S<=57||65<=S&&S<=70||97<=S&&S<=102}function nr(S){return 48<=S&&S<=55}function Mi(S){return 48<=S&&S<=57}var pr=new qi("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(S){if(null===S)return!1;var mt,H=S.length,j=0,it=!1;if(!H)return!1;if(("-"===(mt=S[j])||"+"===mt)&&(mt=S[++j]),"0"===mt){if(j+1===H)return!0;if("b"===(mt=S[++j])){for(j++;j<H;j++)if("_"!==(mt=S[j])){if("0"!==mt&&"1"!==mt)return!1;it=!0}return it&&"_"!==mt}if("x"===mt){for(j++;j<H;j++)if("_"!==(mt=S[j])){if(!Oo(S.charCodeAt(j)))return!1;it=!0}return it&&"_"!==mt}if("o"===mt){for(j++;j<H;j++)if("_"!==(mt=S[j])){if(!nr(S.charCodeAt(j)))return!1;it=!0}return it&&"_"!==mt}}if("_"===mt)return!1;for(;j<H;j++)if("_"!==(mt=S[j])){if(!Mi(S.charCodeAt(j)))return!1;it=!0}return!(!it||"_"===mt)},construct:function(S){var it,H=S,j=1;if(-1!==H.indexOf("_")&&(H=H.replace(/_/g,"")),("-"===(it=H[0])||"+"===it)&&("-"===it&&(j=-1),it=(H=H.slice(1))[0]),"0"===H)return 0;if("0"===it){if("b"===H[1])return j*parseInt(H.slice(2),2);if("x"===H[1])return j*parseInt(H.slice(2),16);if("o"===H[1])return j*parseInt(H.slice(2),8)}return j*parseInt(H,10)},predicate:function(S){return"[object Number]"===Object.prototype.toString.call(S)&&S%1==0&&!je.isNegativeZero(S)},represent:{binary:function(S){return S>=0?"0b"+S.toString(2):"-0b"+S.toString(2).slice(1)},octal:function(S){return S>=0?"0o"+S.toString(8):"-0o"+S.toString(8).slice(1)},decimal:function(S){return S.toString(10)},hexadecimal:function(S){return S>=0?"0x"+S.toString(16).toUpperCase():"-0x"+S.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Sr=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),Vi=/^[-+]?[0-9]+e/,ae=new qi("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(S){return!(null===S||!Sr.test(S)||"_"===S[S.length-1])},construct:function(S){var H,j;return j="-"===(H=S.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(H[0])>=0&&(H=H.slice(1)),".inf"===H?1===j?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===H?NaN:j*parseFloat(H,10)},predicate:function(S){return"[object Number]"===Object.prototype.toString.call(S)&&(S%1!=0||je.isNegativeZero(S))},represent:function(S,H){var j;if(isNaN(S))switch(H){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===S)switch(H){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===S)switch(H){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(je.isNegativeZero(S))return"-0.0";return j=S.toString(10),Vi.test(j)?j.replace("e",".e"):j},defaultStyle:"lowercase"}),Ue=fn.extend({implicit:[to,ar,pr,ae]}),Oi=Ue,Ji=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Yi=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$"),kn=new qi("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(S){return null!==S&&(null!==Ji.exec(S)||null!==Yi.exec(S))},construct:function(S){var H,j,it,mt,Xt,Yt,le,di,we=0,Me=null;if(null===(H=Ji.exec(S))&&(H=Yi.exec(S)),null===H)throw new Error("Date resolve error");if(j=+H[1],it=+H[2]-1,mt=+H[3],!H[4])return new Date(Date.UTC(j,it,mt));if(Xt=+H[4],Yt=+H[5],le=+H[6],H[7]){for(we=H[7].slice(0,3);we.length<3;)we+="0";we=+we}return H[9]&&(Me=6e4*(60*+H[10]+ +(H[11]||0)),"-"===H[9]&&(Me=-Me)),di=new Date(Date.UTC(j,it,mt,Xt,Yt,le,we)),Me&&di.setTime(di.getTime()-Me),di},instanceOf:Date,represent:function(S){return S.toISOString()}}),$o=new qi("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(S){return"<<"===S||null===S}}),so="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r",eo=new qi("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(S){if(null===S)return!1;var H,j,it=0,mt=S.length,Xt=so;for(j=0;j<mt;j++)if(!((H=Xt.indexOf(S.charAt(j)))>64)){if(H<0)return!1;it+=6}return it%8==0},construct:function(S){var H,j,it=S.replace(/[\r\n=]/g,""),mt=it.length,Xt=so,Yt=0,le=[];for(H=0;H<mt;H++)H%4==0&&H&&(le.push(Yt>>16&255),le.push(Yt>>8&255),le.push(255&Yt)),Yt=Yt<<6|Xt.indexOf(it.charAt(H));return 0==(j=mt%4*6)?(le.push(Yt>>16&255),le.push(Yt>>8&255),le.push(255&Yt)):18===j?(le.push(Yt>>10&255),le.push(Yt>>2&255)):12===j&&le.push(Yt>>4&255),new Uint8Array(le)},predicate:function(S){return"[object Uint8Array]"===Object.prototype.toString.call(S)},represent:function(S){var it,mt,H="",j=0,Xt=S.length,Yt=so;for(it=0;it<Xt;it++)it%3==0&&it&&(H+=Yt[j>>18&63],H+=Yt[j>>12&63],H+=Yt[j>>6&63],H+=Yt[63&j]),j=(j<<8)+S[it];return 0==(mt=Xt%3)?(H+=Yt[j>>18&63],H+=Yt[j>>12&63],H+=Yt[j>>6&63],H+=Yt[63&j]):2===mt?(H+=Yt[j>>10&63],H+=Yt[j>>4&63],H+=Yt[j<<2&63],H+=Yt[64]):1===mt&&(H+=Yt[j>>2&63],H+=Yt[j<<4&63],H+=Yt[64],H+=Yt[64]),H}}),ks=Object.prototype.hasOwnProperty,Ls=Object.prototype.toString,jo=new qi("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(S){if(null===S)return!0;var j,it,mt,Xt,Yt,H=[],le=S;for(j=0,it=le.length;j<it;j+=1){if(Yt=!1,"[object Object]"!==Ls.call(mt=le[j]))return!1;for(Xt in mt)if(ks.call(mt,Xt)){if(Yt)return!1;Yt=!0}if(!Yt)return!1;if(-1!==H.indexOf(Xt))return!1;H.push(Xt)}return!0},construct:function(S){return null!==S?S:[]}}),Io=Object.prototype.toString,Ca=new qi("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(S){if(null===S)return!0;var H,j,it,mt,Xt,Yt=S;for(Xt=new Array(Yt.length),H=0,j=Yt.length;H<j;H+=1){if("[object Object]"!==Io.call(it=Yt[H])||1!==(mt=Object.keys(it)).length)return!1;Xt[H]=[mt[0],it[mt[0]]]}return!0},construct:function(S){if(null===S)return[];var H,j,it,mt,Xt,Yt=S;for(Xt=new Array(Yt.length),H=0,j=Yt.length;H<j;H+=1)it=Yt[H],mt=Object.keys(it),Xt[H]=[mt[0],it[mt[0]]];return Xt}}),Zo=Object.prototype.hasOwnProperty,aa=new qi("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(S){if(null===S)return!0;var H,j=S;for(H in j)if(Zo.call(j,H)&&null!==j[H])return!1;return!0},construct:function(S){return null!==S?S:{}}}),Ja=Oi.extend({implicit:[kn,$o],explicit:[eo,jo,Ca,aa]}),Ks=Object.prototype.hasOwnProperty,To=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Ns=/[\x85\u2028\u2029]/,Yo=/[,\[\]\{\}]/,Ss=/^(?:!|!!|![a-z\-]+!)$/i,Bo=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Lo(S){return Object.prototype.toString.call(S)}function es(S){return 10===S||13===S}function ws(S){return 9===S||32===S}function ao(S){return 9===S||32===S||10===S||13===S}function fs(S){return 44===S||91===S||93===S||123===S||125===S}function Lr(S){var H;return 48<=S&&S<=57?S-48:97<=(H=32|S)&&H<=102?H-97+10:-1}function Js(S){return 120===S?2:117===S?4:85===S?8:0}function Ar(S){return 48<=S&&S<=57?S-48:-1}function $s(S){return 48===S?"\0":97===S?"\x07":98===S?"\b":116===S||9===S?"\t":110===S?"\n":118===S?"\v":102===S?"\f":114===S?"\r":101===S?"\x1b":32===S?" ":34===S?'"':47===S?"/":92===S?"\\":78===S?"\x85":95===S?"\xa0":76===S?"\u2028":80===S?"\u2029":""}function ol(S){return S<=65535?String.fromCharCode(S):String.fromCharCode(55296+(S-65536>>10),56320+(S-65536&1023))}for(var is=new Array(256),Ho=new Array(256),cs=0;cs<256;cs++)is[cs]=$s(cs)?1:0,Ho[cs]=$s(cs);function Cl(S,H){this.input=S,this.filename=H.filename||null,this.schema=H.schema||Ja,this.onWarning=H.onWarning||null,this.legacy=H.legacy||!1,this.json=H.json||!1,this.listener=H.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=S.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Nr(S,H){var j={name:S.filename,buffer:S.input.slice(0,-1),position:S.position,line:S.line,column:S.position-S.lineStart};return j.snippet=function(S,H){if(H=Object.create(H||null),!S.buffer)return null;H.maxLength||(H.maxLength=79),"number"!=typeof H.indent&&(H.indent=1),"number"!=typeof H.linesBefore&&(H.linesBefore=3),"number"!=typeof H.linesAfter&&(H.linesAfter=2);for(var Xt,j=/\r?\n|\r|\0/g,it=[0],mt=[],Yt=-1;Xt=j.exec(S.buffer);)mt.push(Xt.index),it.push(Xt.index+Xt[0].length),S.position<=Xt.index&&Yt<0&&(Yt=it.length-2);Yt<0&&(Yt=it.length-1);var we,Me,le="",oi=Math.min(S.line+H.linesAfter,mt.length).toString().length,ai=H.maxLength-(H.indent+oi+3);for(we=1;we<=H.linesBefore&&!(Yt-we<0);we++)Me=Je(S.buffer,it[Yt-we],mt[Yt-we],S.position-(it[Yt]-it[Yt-we]),ai),le=je.repeat(" ",H.indent)+ue((S.line-we+1).toString(),oi)+" | "+Me.str+"\n"+le;for(Me=Je(S.buffer,it[Yt],mt[Yt],S.position,ai),le+=je.repeat(" ",H.indent)+ue((S.line+1).toString(),oi)+" | "+Me.str+"\n",le+=je.repeat("-",H.indent+oi+3+Me.pos)+"^\n",we=1;we<=H.linesAfter&&!(Yt+we>=mt.length);we++)Me=Je(S.buffer,it[Yt+we],mt[Yt+we],S.position-(it[Yt]-it[Yt+we]),ai),le+=je.repeat(" ",H.indent)+ue((S.line+we+1).toString(),oi)+" | "+Me.str+"\n";return le.replace(/\n$/,"")}(j),new Hi(H,j)}function Ln(S,H){throw Nr(S,H)}function ma(S,H){S.onWarning&&S.onWarning.call(null,Nr(S,H))}var xt={YAML:function(H,j,it){var mt,Xt,Yt;null!==H.version&&Ln(H,"duplication of %YAML directive"),1!==it.length&&Ln(H,"YAML directive accepts exactly one argument"),null===(mt=/^([0-9]+)\.([0-9]+)$/.exec(it[0]))&&Ln(H,"ill-formed argument of the YAML directive"),Xt=parseInt(mt[1],10),Yt=parseInt(mt[2],10),1!==Xt&&Ln(H,"unacceptable YAML version of the document"),H.version=it[0],H.checkLineBreaks=Yt<2,1!==Yt&&2!==Yt&&ma(H,"unsupported YAML version of the document")},TAG:function(H,j,it){var mt,Xt;2!==it.length&&Ln(H,"TAG directive accepts exactly two arguments"),Xt=it[1],Ss.test(mt=it[0])||Ln(H,"ill-formed tag handle (first argument) of the TAG directive"),Ks.call(H.tagMap,mt)&&Ln(H,'there is a previously declared suffix for "'+mt+'" tag handle'),Bo.test(Xt)||Ln(H,"ill-formed tag prefix (second argument) of the TAG directive");try{Xt=decodeURIComponent(Xt)}catch(Yt){Ln(H,"tag prefix is malformed: "+Xt)}H.tagMap[mt]=Xt}};function Q(S,H,j,it){var mt,Xt,Yt,le;if(H<j){if(le=S.input.slice(H,j),it)for(mt=0,Xt=le.length;mt<Xt;mt+=1)9===(Yt=le.charCodeAt(mt))||32<=Yt&&Yt<=1114111||Ln(S,"expected valid JSON character");else To.test(le)&&Ln(S,"the stream contains non-printable characters");S.result+=le}}function V(S,H,j,it){var mt,Xt,Yt,le;for(je.isObject(j)||Ln(S,"cannot merge mappings; the provided source object is unacceptable"),Yt=0,le=(mt=Object.keys(j)).length;Yt<le;Yt+=1)Ks.call(H,Xt=mt[Yt])||(H[Xt]=j[Xt],it[Xt]=!0)}function W(S,H,j,it,mt,Xt,Yt,le,we){var Me,oi;if(Array.isArray(mt))for(Me=0,oi=(mt=Array.prototype.slice.call(mt)).length;Me<oi;Me+=1)Array.isArray(mt[Me])&&Ln(S,"nested arrays are not supported inside keys"),"object"==typeof mt&&"[object Object]"===Lo(mt[Me])&&(mt[Me]="[object Object]");if("object"==typeof mt&&"[object Object]"===Lo(mt)&&(mt="[object Object]"),mt=String(mt),null===H&&(H={}),"tag:yaml.org,2002:merge"===it)if(Array.isArray(Xt))for(Me=0,oi=Xt.length;Me<oi;Me+=1)V(S,H,Xt[Me],j);else V(S,H,Xt,j);else!S.json&&!Ks.call(j,mt)&&Ks.call(H,mt)&&(S.line=Yt||S.line,S.lineStart=le||S.lineStart,S.position=we||S.position,Ln(S,"duplicated mapping key")),"__proto__"===mt?Object.defineProperty(H,mt,{configurable:!0,enumerable:!0,writable:!0,value:Xt}):H[mt]=Xt,delete j[mt];return H}function At(S){var H;10===(H=S.input.charCodeAt(S.position))?S.position++:13===H?(S.position++,10===S.input.charCodeAt(S.position)&&S.position++):Ln(S,"a line break is expected"),S.line+=1,S.lineStart=S.position,S.firstTabInLine=-1}function Be(S,H,j){for(var it=0,mt=S.input.charCodeAt(S.position);0!==mt;){for(;ws(mt);)9===mt&&-1===S.firstTabInLine&&(S.firstTabInLine=S.position),mt=S.input.charCodeAt(++S.position);if(H&&35===mt)do{mt=S.input.charCodeAt(++S.position)}while(10!==mt&&13!==mt&&0!==mt);if(!es(mt))break;for(At(S),mt=S.input.charCodeAt(S.position),it++,S.lineIndent=0;32===mt;)S.lineIndent++,mt=S.input.charCodeAt(++S.position)}return-1!==j&&0!==it&&S.lineIndent<j&&ma(S,"deficient indentation"),it}function vi(S){var j,H=S.position;return!(45!==(j=S.input.charCodeAt(H))&&46!==j||j!==S.input.charCodeAt(H+1)||j!==S.input.charCodeAt(H+2)||(H+=3,j=S.input.charCodeAt(H),0!==j&&!ao(j)))}function ln(S,H){1===H?S.result+=" ":H>1&&(S.result+=je.repeat("\n",H-1))}function cr(S,H){var j,we,it=S.tag,mt=S.anchor,Xt=[],le=!1;if(-1!==S.firstTabInLine)return!1;for(null!==S.anchor&&(S.anchorMap[S.anchor]=Xt),we=S.input.charCodeAt(S.position);0!==we&&(-1!==S.firstTabInLine&&(S.position=S.firstTabInLine,Ln(S,"tab characters must not be used in indentation")),45===we&&ao(S.input.charCodeAt(S.position+1)));)if(le=!0,S.position++,Be(S,!0,-1)&&S.lineIndent<=H)Xt.push(null),we=S.input.charCodeAt(S.position);else if(j=S.line,Uo(S,H,3,!1,!0),Xt.push(S.result),Be(S,!0,-1),we=S.input.charCodeAt(S.position),(S.line===j||S.lineIndent>H)&&0!==we)Ln(S,"bad indentation of a sequence entry");else if(S.lineIndent<H)break;return!!le&&(S.tag=it,S.anchor=mt,S.kind="sequence",S.result=Xt,!0)}function Hn(S){var H,mt,Xt,Yt,j=!1,it=!1;if(33!==(Yt=S.input.charCodeAt(S.position)))return!1;if(null!==S.tag&&Ln(S,"duplication of a tag property"),60===(Yt=S.input.charCodeAt(++S.position))?(j=!0,Yt=S.input.charCodeAt(++S.position)):33===Yt?(it=!0,mt="!!",Yt=S.input.charCodeAt(++S.position)):mt="!",H=S.position,j){do{Yt=S.input.charCodeAt(++S.position)}while(0!==Yt&&62!==Yt);S.position<S.length?(Xt=S.input.slice(H,S.position),Yt=S.input.charCodeAt(++S.position)):Ln(S,"unexpected end of the stream within a verbatim tag")}else{for(;0!==Yt&&!ao(Yt);)33===Yt&&(it?Ln(S,"tag suffix cannot contain exclamation marks"):(mt=S.input.slice(H-1,S.position+1),Ss.test(mt)||Ln(S,"named tag handle cannot contain such characters"),it=!0,H=S.position+1)),Yt=S.input.charCodeAt(++S.position);Xt=S.input.slice(H,S.position),Yo.test(Xt)&&Ln(S,"tag suffix cannot contain flow indicator characters")}Xt&&!Bo.test(Xt)&&Ln(S,"tag name cannot contain such characters: "+Xt);try{Xt=decodeURIComponent(Xt)}catch(le){Ln(S,"tag name is malformed: "+Xt)}return j?S.tag=Xt:Ks.call(S.tagMap,mt)?S.tag=S.tagMap[mt]+Xt:"!"===mt?S.tag="!"+Xt:"!!"===mt?S.tag="tag:yaml.org,2002:"+Xt:Ln(S,'undeclared tag handle "'+mt+'"'),!0}function us(S){var H,j;if(38!==(j=S.input.charCodeAt(S.position)))return!1;for(null!==S.anchor&&Ln(S,"duplication of an anchor property"),j=S.input.charCodeAt(++S.position),H=S.position;0!==j&&!ao(j)&&!fs(j);)j=S.input.charCodeAt(++S.position);return S.position===H&&Ln(S,"name of an anchor node must contain at least one character"),S.anchor=S.input.slice(H,S.position),!0}function Uo(S,H,j,it,mt){var Xt,Yt,le,ai,di,Ri,ji,en,sn,we=1,Me=!1,oi=!1;if(null!==S.listener&&S.listener("open",S),S.tag=null,S.anchor=null,S.kind=null,S.result=null,Xt=Yt=le=4===j||3===j,it&&Be(S,!0,-1)&&(Me=!0,S.lineIndent>H?we=1:S.lineIndent===H?we=0:S.lineIndent<H&&(we=-1)),1===we)for(;Hn(S)||us(S);)Be(S,!0,-1)?(Me=!0,le=Xt,S.lineIndent>H?we=1:S.lineIndent===H?we=0:S.lineIndent<H&&(we=-1)):le=!1;if(le&&(le=Me||mt),(1===we||4===j)&&(en=1===j||2===j?H:H+1,sn=S.position-S.lineStart,1===we?le&&(cr(S,sn)||function(S,H,j){var it,mt,Xt,Yt,le,we,rn,Me=S.tag,oi=S.anchor,ai={},di=Object.create(null),Ri=null,ji=null,en=null,sn=!1,Mn=!1;if(-1!==S.firstTabInLine)return!1;for(null!==S.anchor&&(S.anchorMap[S.anchor]=ai),rn=S.input.charCodeAt(S.position);0!==rn;){if(!sn&&-1!==S.firstTabInLine&&(S.position=S.firstTabInLine,Ln(S,"tab characters must not be used in indentation")),it=S.input.charCodeAt(S.position+1),Xt=S.line,63!==rn&&58!==rn||!ao(it)){if(Yt=S.line,le=S.lineStart,we=S.position,!Uo(S,j,2,!1,!0))break;if(S.line===Xt){for(rn=S.input.charCodeAt(S.position);ws(rn);)rn=S.input.charCodeAt(++S.position);if(58===rn)ao(rn=S.input.charCodeAt(++S.position))||Ln(S,"a whitespace character is expected after the key-value separator within a block mapping"),sn&&(W(S,ai,di,Ri,ji,null,Yt,le,we),Ri=ji=en=null),Mn=!0,sn=!1,mt=!1,Ri=S.tag,ji=S.result;else{if(!Mn)return S.tag=Me,S.anchor=oi,!0;Ln(S,"can not read an implicit mapping pair; a colon is missed")}}else{if(!Mn)return S.tag=Me,S.anchor=oi,!0;Ln(S,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===rn?(sn&&(W(S,ai,di,Ri,ji,null,Yt,le,we),Ri=ji=en=null),Mn=!0,sn=!0,mt=!0):sn?(sn=!1,mt=!0):Ln(S,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),S.position+=1,rn=it;if((S.line===Xt||S.lineIndent>H)&&(sn&&(Yt=S.line,le=S.lineStart,we=S.position),Uo(S,H,4,!0,mt)&&(sn?ji=S.result:en=S.result),sn||(W(S,ai,di,Ri,ji,en,Yt,le,we),Ri=ji=en=null),Be(S,!0,-1),rn=S.input.charCodeAt(S.position)),(S.line===Xt||S.lineIndent>H)&&0!==rn)Ln(S,"bad indentation of a mapping entry");else if(S.lineIndent<H)break}return sn&&W(S,ai,di,Ri,ji,null,Yt,le,we),Mn&&(S.tag=Me,S.anchor=oi,S.kind="mapping",S.result=ai),Mn}(S,sn,en))||function(S,H){var it,mt,Xt,le,oi,ai,di,Ri,en,sn,Mn,rn,j=!0,Yt=S.tag,we=S.anchor,ji=Object.create(null);if(91===(rn=S.input.charCodeAt(S.position)))oi=93,Ri=!1,le=[];else{if(123!==rn)return!1;oi=125,Ri=!0,le={}}for(null!==S.anchor&&(S.anchorMap[S.anchor]=le),rn=S.input.charCodeAt(++S.position);0!==rn;){if(Be(S,!0,H),(rn=S.input.charCodeAt(S.position))===oi)return S.position++,S.tag=Yt,S.anchor=we,S.kind=Ri?"mapping":"sequence",S.result=le,!0;j?44===rn&&Ln(S,"expected the node content, but found ','"):Ln(S,"missed comma between flow collection entries"),Mn=null,ai=di=!1,63===rn&&ao(S.input.charCodeAt(S.position+1))&&(ai=di=!0,S.position++,Be(S,!0,H)),it=S.line,mt=S.lineStart,Xt=S.position,Uo(S,H,1,!1,!0),sn=S.tag,en=S.result,Be(S,!0,H),rn=S.input.charCodeAt(S.position),(di||S.line===it)&&58===rn&&(ai=!0,rn=S.input.charCodeAt(++S.position),Be(S,!0,H),Uo(S,H,1,!1,!0),Mn=S.result),Ri?W(S,le,ji,sn,en,Mn,it,mt,Xt):le.push(ai?W(S,null,ji,sn,en,Mn,it,mt,Xt):en),Be(S,!0,H),44===(rn=S.input.charCodeAt(S.position))?(j=!0,rn=S.input.charCodeAt(++S.position)):j=!1}Ln(S,"unexpected end of the stream within a flow collection")}(S,en)?oi=!0:(Yt&&function(S,H){var j,it,oi,ai,mt=1,Xt=!1,Yt=!1,le=H,we=0,Me=!1;if(124===(ai=S.input.charCodeAt(S.position)))it=!1;else{if(62!==ai)return!1;it=!0}for(S.kind="scalar",S.result="";0!==ai;)if(43===(ai=S.input.charCodeAt(++S.position))||45===ai)1===mt?mt=43===ai?3:2:Ln(S,"repeat of a chomping mode identifier");else{if(!((oi=Ar(ai))>=0))break;0===oi?Ln(S,"bad explicit indentation width of a block scalar; it cannot be less than one"):Yt?Ln(S,"repeat of an indentation width identifier"):(le=H+oi-1,Yt=!0)}if(ws(ai)){do{ai=S.input.charCodeAt(++S.position)}while(ws(ai));if(35===ai)do{ai=S.input.charCodeAt(++S.position)}while(!es(ai)&&0!==ai)}for(;0!==ai;){for(At(S),S.lineIndent=0,ai=S.input.charCodeAt(S.position);(!Yt||S.lineIndent<le)&&32===ai;)S.lineIndent++,ai=S.input.charCodeAt(++S.position);if(!Yt&&S.lineIndent>le&&(le=S.lineIndent),es(ai))we++;else{if(S.lineIndent<le){3===mt?S.result+=je.repeat("\n",Xt?1+we:we):1===mt&&Xt&&(S.result+="\n");break}for(it?ws(ai)?(Me=!0,S.result+=je.repeat("\n",Xt?1+we:we)):Me?(Me=!1,S.result+=je.repeat("\n",we+1)):0===we?Xt&&(S.result+=" "):S.result+=je.repeat("\n",we):S.result+=je.repeat("\n",Xt?1+we:we),Xt=!0,Yt=!0,we=0,j=S.position;!es(ai)&&0!==ai;)ai=S.input.charCodeAt(++S.position);Q(S,j,S.position,!1)}}return!0}(S,en)||function(S,H){var j,it,mt;if(39!==(j=S.input.charCodeAt(S.position)))return!1;for(S.kind="scalar",S.result="",S.position++,it=mt=S.position;0!==(j=S.input.charCodeAt(S.position));)if(39===j){if(Q(S,it,S.position,!0),39!==(j=S.input.charCodeAt(++S.position)))return!0;it=S.position,S.position++,mt=S.position}else es(j)?(Q(S,it,mt,!0),ln(S,Be(S,!1,H)),it=mt=S.position):S.position===S.lineStart&&vi(S)?Ln(S,"unexpected end of the document within a single quoted scalar"):(S.position++,mt=S.position);Ln(S,"unexpected end of the stream within a single quoted scalar")}(S,en)||function(S,H){var j,it,mt,Xt,Yt,le;if(34!==(le=S.input.charCodeAt(S.position)))return!1;for(S.kind="scalar",S.result="",S.position++,j=it=S.position;0!==(le=S.input.charCodeAt(S.position));){if(34===le)return Q(S,j,S.position,!0),S.position++,!0;if(92===le){if(Q(S,j,S.position,!0),es(le=S.input.charCodeAt(++S.position)))Be(S,!1,H);else if(le<256&&is[le])S.result+=Ho[le],S.position++;else if((Yt=Js(le))>0){for(mt=Yt,Xt=0;mt>0;mt--)(Yt=Lr(le=S.input.charCodeAt(++S.position)))>=0?Xt=(Xt<<4)+Yt:Ln(S,"expected hexadecimal character");S.result+=ol(Xt),S.position++}else Ln(S,"unknown escape sequence");j=it=S.position}else es(le)?(Q(S,j,it,!0),ln(S,Be(S,!1,H)),j=it=S.position):S.position===S.lineStart&&vi(S)?Ln(S,"unexpected end of the document within a double quoted scalar"):(S.position++,it=S.position)}Ln(S,"unexpected end of the stream within a double quoted scalar")}(S,en)?oi=!0:function(S){var H,j,it;if(42!==(it=S.input.charCodeAt(S.position)))return!1;for(it=S.input.charCodeAt(++S.position),H=S.position;0!==it&&!ao(it)&&!fs(it);)it=S.input.charCodeAt(++S.position);return S.position===H&&Ln(S,"name of an alias node must contain at least one character"),j=S.input.slice(H,S.position),Ks.call(S.anchorMap,j)||Ln(S,'unidentified alias "'+j+'"'),S.result=S.anchorMap[j],Be(S,!0,-1),!0}(S)?(oi=!0,(null!==S.tag||null!==S.anchor)&&Ln(S,"alias node should not have any properties")):function(S,H,j){var mt,Xt,Yt,le,we,Me,oi,Ri,ai=S.kind,di=S.result;if(ao(Ri=S.input.charCodeAt(S.position))||fs(Ri)||35===Ri||38===Ri||42===Ri||33===Ri||124===Ri||62===Ri||39===Ri||34===Ri||37===Ri||64===Ri||96===Ri||(63===Ri||45===Ri)&&(ao(mt=S.input.charCodeAt(S.position+1))||j&&fs(mt)))return!1;for(S.kind="scalar",S.result="",Xt=Yt=S.position,le=!1;0!==Ri;){if(58===Ri){if(ao(mt=S.input.charCodeAt(S.position+1))||j&&fs(mt))break}else if(35===Ri){if(ao(S.input.charCodeAt(S.position-1)))break}else{if(S.position===S.lineStart&&vi(S)||j&&fs(Ri))break;if(es(Ri)){if(we=S.line,Me=S.lineStart,oi=S.lineIndent,Be(S,!1,-1),S.lineIndent>=H){le=!0,Ri=S.input.charCodeAt(S.position);continue}S.position=Yt,S.line=we,S.lineStart=Me,S.lineIndent=oi;break}}le&&(Q(S,Xt,Yt,!1),ln(S,S.line-we),Xt=Yt=S.position,le=!1),ws(Ri)||(Yt=S.position+1),Ri=S.input.charCodeAt(++S.position)}return Q(S,Xt,Yt,!1),!!S.result||(S.kind=ai,S.result=di,!1)}(S,en,1===j)&&(oi=!0,null===S.tag&&(S.tag="?")),null!==S.anchor&&(S.anchorMap[S.anchor]=S.result)):0===we&&(oi=le&&cr(S,sn))),null===S.tag)null!==S.anchor&&(S.anchorMap[S.anchor]=S.result);else if("?"===S.tag){for(null!==S.result&&"scalar"!==S.kind&&Ln(S,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+S.kind+'"'),ai=0,di=S.implicitTypes.length;ai<di;ai+=1)if((ji=S.implicitTypes[ai]).resolve(S.result)){S.result=ji.construct(S.result),S.tag=ji.tag,null!==S.anchor&&(S.anchorMap[S.anchor]=S.result);break}}else if("!"!==S.tag){if(Ks.call(S.typeMap[S.kind||"fallback"],S.tag))ji=S.typeMap[S.kind||"fallback"][S.tag];else for(ji=null,ai=0,di=(Ri=S.typeMap.multi[S.kind||"fallback"]).length;ai<di;ai+=1)if(S.tag.slice(0,Ri[ai].tag.length)===Ri[ai].tag){ji=Ri[ai];break}ji||Ln(S,"unknown tag !<"+S.tag+">"),null!==S.result&&ji.kind!==S.kind&&Ln(S,"unacceptable node kind for !<"+S.tag+'> tag; it should be "'+ji.kind+'", not "'+S.kind+'"'),ji.resolve(S.result,S.tag)?(S.result=ji.construct(S.result,S.tag),null!==S.anchor&&(S.anchorMap[S.anchor]=S.result)):Ln(S,"cannot resolve a node with !<"+S.tag+"> explicit tag")}return null!==S.listener&&S.listener("close",S),null!==S.tag||null!==S.anchor||oi}function $a(S){var j,it,mt,Yt,H=S.position,Xt=!1;for(S.version=null,S.checkLineBreaks=S.legacy,S.tagMap=Object.create(null),S.anchorMap=Object.create(null);0!==(Yt=S.input.charCodeAt(S.position))&&(Be(S,!0,-1),Yt=S.input.charCodeAt(S.position),!(S.lineIndent>0||37!==Yt));){for(Xt=!0,Yt=S.input.charCodeAt(++S.position),j=S.position;0!==Yt&&!ao(Yt);)Yt=S.input.charCodeAt(++S.position);for(mt=[],(it=S.input.slice(j,S.position)).length<1&&Ln(S,"directive name must not be less than one character in length");0!==Yt;){for(;ws(Yt);)Yt=S.input.charCodeAt(++S.position);if(35===Yt){do{Yt=S.input.charCodeAt(++S.position)}while(0!==Yt&&!es(Yt));break}if(es(Yt))break;for(j=S.position;0!==Yt&&!ao(Yt);)Yt=S.input.charCodeAt(++S.position);mt.push(S.input.slice(j,S.position))}0!==Yt&&At(S),Ks.call(xt,it)?xt[it](S,it,mt):ma(S,'unknown document directive "'+it+'"')}Be(S,!0,-1),0===S.lineIndent&&45===S.input.charCodeAt(S.position)&&45===S.input.charCodeAt(S.position+1)&&45===S.input.charCodeAt(S.position+2)?(S.position+=3,Be(S,!0,-1)):Xt&&Ln(S,"directives end mark is expected"),Uo(S,S.lineIndent-1,4,!1,!0),Be(S,!0,-1),S.checkLineBreaks&&Ns.test(S.input.slice(H,S.position))&&ma(S,"non-ASCII line breaks are interpreted as content"),S.documents.push(S.result),S.position===S.lineStart&&vi(S)?46===S.input.charCodeAt(S.position)&&(S.position+=3,Be(S,!0,-1)):S.position<S.length-1&&Ln(S,"end of the stream or a document separator is expected")}function Rs(S,H){H=H||{},0!==(S=String(S)).length&&(10!==S.charCodeAt(S.length-1)&&13!==S.charCodeAt(S.length-1)&&(S+="\n"),65279===S.charCodeAt(0)&&(S=S.slice(1)));var j=new Cl(S,H),it=S.indexOf("\0");for(-1!==it&&(j.position=it,Ln(j,"null byte is not allowed in input")),j.input+="\0";32===j.input.charCodeAt(j.position);)j.lineIndent+=1,j.position+=1;for(;j.position<j.length-1;)$a(j);return j.documents}var K={loadAll:function(S,H,j){null!==H&&"object"==typeof H&&void 0===j&&(j=H,H=null);var it=Rs(S,j);if("function"!=typeof H)return it;for(var mt=0,Xt=it.length;mt<Xt;mt+=1)H(it[mt])},load:function(S,H){var j=Rs(S,H);if(0!==j.length){if(1===j.length)return j[0];throw new Hi("expected a single document in the stream, but found more")}}},_t=Object.prototype.toString,ee=Object.prototype.hasOwnProperty,mo={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},Pa=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],Dn=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function rr(S){var H,j,it;if(H=S.toString(16).toUpperCase(),S<=255)j="x",it=2;else if(S<=65535)j="u",it=4;else{if(!(S<=4294967295))throw new Hi("code point within a string may not be greater than 0xFFFFFFFF");j="U",it=8}return"\\"+j+je.repeat("0",it-H.length)+H}function ns(S){this.schema=S.schema||Ja,this.indent=Math.max(1,S.indent||2),this.noArrayIndent=S.noArrayIndent||!1,this.skipInvalid=S.skipInvalid||!1,this.flowLevel=je.isNothing(S.flowLevel)?-1:S.flowLevel,this.styleMap=function(S,H){var j,it,mt,Xt,Yt,le,we;if(null===H)return{};for(j={},mt=0,Xt=(it=Object.keys(H)).length;mt<Xt;mt+=1)Yt=it[mt],le=String(H[Yt]),"!!"===Yt.slice(0,2)&&(Yt="tag:yaml.org,2002:"+Yt.slice(2)),(we=S.compiledTypeMap.fallback[Yt])&&ee.call(we.styleAliases,le)&&(le=we.styleAliases[le]),j[Yt]=le;return j}(this.schema,S.styles||null),this.sortKeys=S.sortKeys||!1,this.lineWidth=S.lineWidth||80,this.noRefs=S.noRefs||!1,this.noCompatMode=S.noCompatMode||!1,this.condenseFlow=S.condenseFlow||!1,this.quotingType='"'===S.quotingType?2:1,this.forceQuotes=S.forceQuotes||!1,this.replacer="function"==typeof S.replacer?S.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Ir(S,H){for(var Yt,j=je.repeat(" ",H),it=0,mt=-1,Xt="",le=S.length;it<le;)-1===(mt=S.indexOf("\n",it))?(Yt=S.slice(it),it=le):(Yt=S.slice(it,mt+1),it=mt+1),Yt.length&&"\n"!==Yt&&(Xt+=j),Xt+=Yt;return Xt}function ms(S,H){return"\n"+je.repeat(" ",S.indent*H)}function al(S){return 32===S||9===S}function Za(S){return 32<=S&&S<=126||161<=S&&S<=55295&&8232!==S&&8233!==S||57344<=S&&S<=65533&&65279!==S||65536<=S&&S<=1114111}function Fr(S){return Za(S)&&65279!==S&&13!==S&&10!==S}function ca(S,H,j){var it=Fr(S),mt=it&&!al(S);return(j?it:it&&44!==S&&91!==S&&93!==S&&123!==S&&125!==S)&&35!==S&&!(58===H&&!mt)||Fr(H)&&!al(H)&&35===S||58===H&&mt}function Ds(S,H){var it,j=S.charCodeAt(H);return j>=55296&&j<=56319&&H+1<S.length&&(it=S.charCodeAt(H+1))>=56320&&it<=57343?1024*(j-55296)+it-56320+65536:j}function _a(S){return/^\n* /.test(S)}function qs(S,H,j,it,mt){S.dump=function(){if(0===H.length)return 2===S.quotingType?'""':"''";if(!S.noCompatMode&&(-1!==Pa.indexOf(H)||Dn.test(H)))return 2===S.quotingType?'"'+H+'"':"'"+H+"'";var Xt=S.indent*Math.max(1,j),Yt=-1===S.lineWidth?-1:Math.max(Math.min(S.lineWidth,40),S.lineWidth-Xt);switch(function(S,H,j,it,mt,Xt,Yt,le){var we,Me=0,oi=null,ai=!1,di=!1,Ri=-1!==it,ji=-1,en=function(S){return Za(S)&&65279!==S&&!al(S)&&45!==S&&63!==S&&58!==S&&44!==S&&91!==S&&93!==S&&123!==S&&125!==S&&35!==S&&38!==S&&42!==S&&33!==S&&124!==S&&61!==S&&62!==S&&39!==S&&34!==S&&37!==S&&64!==S&&96!==S}(Ds(S,0))&&function(S){return!al(S)&&58!==S}(Ds(S,S.length-1));if(H||Yt)for(we=0;we<S.length;Me>=65536?we+=2:we++){if(!Za(Me=Ds(S,we)))return 5;en=en&&ca(Me,oi,le),oi=Me}else{for(we=0;we<S.length;Me>=65536?we+=2:we++){if(10===(Me=Ds(S,we)))ai=!0,Ri&&(di=di||we-ji-1>it&&" "!==S[ji+1],ji=we);else if(!Za(Me))return 5;en=en&&ca(Me,oi,le),oi=Me}di=di||Ri&&we-ji-1>it&&" "!==S[ji+1]}return ai||di?j>9&&_a(S)?5:Yt?2===Xt?5:2:di?4:3:!en||Yt||mt(S)?2===Xt?5:2:1}(H,it||S.flowLevel>-1&&j>=S.flowLevel,S.indent,Yt,function(Me){return function(S,H){var j,it;for(j=0,it=S.implicitTypes.length;j<it;j+=1)if(S.implicitTypes[j].resolve(H))return!0;return!1}(S,Me)},S.quotingType,S.forceQuotes&&!it,mt)){case 1:return H;case 2:return"'"+H.replace(/'/g,"''")+"'";case 3:return"|"+Ul(H,S.indent)+Ba(Ir(H,Xt));case 4:return">"+Ul(H,S.indent)+Ba(Ir(function(S,H){for(var Xt,Yt,j=/(\n+)([^\n]*)/g,it=(Me=void 0,Me=S.indexOf("\n"),j.lastIndex=Me=-1!==Me?Me:S.length,xl(S.slice(0,Me),H)),mt="\n"===S[0]||" "===S[0];Yt=j.exec(S);){var we=Yt[2];Xt=" "===we[0],it+=Yt[1]+(mt||Xt||""===we?"":"\n")+xl(we,H),mt=Xt}var Me;return it}(H,Yt),Xt));case 5:return'"'+function(S){for(var it,H="",j=0,mt=0;mt<S.length;j>=65536?mt+=2:mt++)j=Ds(S,mt),!(it=mo[j])&&Za(j)?(H+=S[mt],j>=65536&&(H+=S[mt+1])):H+=it||rr(j);return H}(H)+'"';default:throw new Hi("impossible error: invalid scalar style")}}()}function Ul(S,H){var j=_a(S)?String(H):"",it="\n"===S[S.length-1];return j+(!it||"\n"!==S[S.length-2]&&"\n"!==S?it?"":"-":"+")+"\n"}function Ba(S){return"\n"===S[S.length-1]?S.slice(0,-1):S}function xl(S,H){if(""===S||" "===S[0])return S;for(var it,Xt,j=/ [^ ]/g,mt=0,Yt=0,le=0,we="";it=j.exec(S);)(le=it.index)-mt>H&&(we+="\n"+S.slice(mt,Xt=Yt>mt?Yt:le),mt=Xt+1),Yt=le;return we+="\n",(we+=S.length-mt>H&&Yt>mt?S.slice(mt,Yt)+"\n"+S.slice(Yt+1):S.slice(mt)).slice(1)}function Ha(S,H,j){var it,mt,Xt,Yt,le,we;for(Xt=0,Yt=(mt=j?S.explicitTypes:S.implicitTypes).length;Xt<Yt;Xt+=1)if(((le=mt[Xt]).instanceOf||le.predicate)&&(!le.instanceOf||"object"==typeof H&&H instanceof le.instanceOf)&&(!le.predicate||le.predicate(H))){if(S.tag=j?le.multi&&le.representName?le.representName(H):le.tag:"?",le.represent){if(we=S.styleMap[le.tag]||le.defaultStyle,"[object Function]"===_t.call(le.represent))it=le.represent(H,we);else{if(!ee.call(le.represent,we))throw new Hi("!<"+le.tag+'> tag resolver accepts not "'+we+'" style');it=le.represent[we](H,we)}S.dump=it}return!0}return!1}function Us(S,H,j,it,mt,Xt,Yt){S.tag=null,S.dump=j,Ha(S,j,!1)||Ha(S,j,!0);var Me,le=_t.call(S.dump),we=it;it&&(it=S.flowLevel<0||S.flowLevel>H);var ai,di,oi="[object Object]"===le||"[object Array]"===le;if(oi&&(di=-1!==(ai=S.duplicates.indexOf(j))),(null!==S.tag&&"?"!==S.tag||di||2!==S.indent&&H>0)&&(mt=!1),di&&S.usedDuplicates[ai])S.dump="*ref_"+ai;else{if(oi&&di&&!S.usedDuplicates[ai]&&(S.usedDuplicates[ai]=!0),"[object Object]"===le)it&&0!==Object.keys(S.dump).length?(function(S,H,j,it){var le,we,Me,oi,ai,di,mt="",Xt=S.tag,Yt=Object.keys(j);if(!0===S.sortKeys)Yt.sort();else if("function"==typeof S.sortKeys)Yt.sort(S.sortKeys);else if(S.sortKeys)throw new Hi("sortKeys must be a boolean or a function");for(le=0,we=Yt.length;le<we;le+=1)di="",(!it||""!==mt)&&(di+=ms(S,H)),oi=j[Me=Yt[le]],S.replacer&&(oi=S.replacer.call(j,Me,oi)),Us(S,H+1,Me,!0,!0,!0)&&((ai=null!==S.tag&&"?"!==S.tag||S.dump&&S.dump.length>1024)&&(S.dump&&10===S.dump.charCodeAt(0)?di+="?":di+="? "),di+=S.dump,ai&&(di+=ms(S,H)),Us(S,H+1,oi,!0,ai)&&(S.dump&&10===S.dump.charCodeAt(0)?di+=":":di+=": ",mt+=di+=S.dump));S.tag=Xt,S.dump=mt||"{}"}(S,H,S.dump,mt),di&&(S.dump="&ref_"+ai+S.dump)):(function(S,H,j){var Yt,le,we,Me,oi,it="",mt=S.tag,Xt=Object.keys(j);for(Yt=0,le=Xt.length;Yt<le;Yt+=1)oi="",""!==it&&(oi+=", "),S.condenseFlow&&(oi+='"'),Me=j[we=Xt[Yt]],S.replacer&&(Me=S.replacer.call(j,we,Me)),Us(S,H,we,!1,!1)&&(S.dump.length>1024&&(oi+="? "),oi+=S.dump+(S.condenseFlow?'"':"")+":"+(S.condenseFlow?"":" "),Us(S,H,Me,!1,!1)&&(it+=oi+=S.dump));S.tag=mt,S.dump="{"+it+"}"}(S,H,S.dump),di&&(S.dump="&ref_"+ai+" "+S.dump));else if("[object Array]"===le)it&&0!==S.dump.length?(function(S,H,j,it){var Yt,le,we,mt="",Xt=S.tag;for(Yt=0,le=j.length;Yt<le;Yt+=1)we=j[Yt],S.replacer&&(we=S.replacer.call(j,String(Yt),we)),(Us(S,H+1,we,!0,!0,!1,!0)||void 0===we&&Us(S,H+1,null,!0,!0,!1,!0))&&((!it||""!==mt)&&(mt+=ms(S,H)),S.dump&&10===S.dump.charCodeAt(0)?mt+="-":mt+="- ",mt+=S.dump);S.tag=Xt,S.dump=mt||"[]"}(S,S.noArrayIndent&&!Yt&&H>0?H-1:H,S.dump,mt),di&&(S.dump="&ref_"+ai+S.dump)):(function(S,H,j){var Xt,Yt,le,it="",mt=S.tag;for(Xt=0,Yt=j.length;Xt<Yt;Xt+=1)le=j[Xt],S.replacer&&(le=S.replacer.call(j,String(Xt),le)),(Us(S,H,le,!1,!1)||void 0===le&&Us(S,H,null,!1,!1))&&(""!==it&&(it+=","+(S.condenseFlow?"":" ")),it+=S.dump);S.tag=mt,S.dump="["+it+"]"}(S,H,S.dump),di&&(S.dump="&ref_"+ai+" "+S.dump));else{if("[object String]"!==le){if("[object Undefined]"===le)return!1;if(S.skipInvalid)return!1;throw new Hi("unacceptable kind of an object to dump "+le)}"?"!==S.tag&&qs(S,S.dump,H,Xt,we)}null!==S.tag&&"?"!==S.tag&&(Me=encodeURI("!"===S.tag[0]?S.tag.slice(1):S.tag).replace(/!/g,"%21"),Me="!"===S.tag[0]?"!"+Me:"tag:yaml.org,2002:"===Me.slice(0,18)?"!!"+Me.slice(18):"!<"+Me+">",S.dump=Me+" "+S.dump)}return!0}function Ua(S,H){var mt,Xt,j=[],it=[];for(ta(S,j,it),mt=0,Xt=it.length;mt<Xt;mt+=1)H.duplicates.push(j[it[mt]]);H.usedDuplicates=new Array(Xt)}function ta(S,H,j){var it,mt,Xt;if(null!==S&&"object"==typeof S)if(-1!==(mt=H.indexOf(S)))-1===j.indexOf(mt)&&j.push(mt);else if(H.push(S),Array.isArray(S))for(mt=0,Xt=S.length;mt<Xt;mt+=1)ta(S[mt],H,j);else for(mt=0,Xt=(it=Object.keys(S)).length;mt<Xt;mt+=1)ta(S[it[mt]],H,j)}function Wl(S,H){return function(){throw new Error("Function yaml."+S+" is removed in js-yaml 4. Use yaml."+H+" instead, which is now safe by default.")}}const lo={Type:qi,Schema:Ke,FAILSAFE_SCHEMA:fn,JSON_SCHEMA:Ue,CORE_SCHEMA:Oi,DEFAULT_SCHEMA:Ja,load:K.load,loadAll:K.loadAll,dump:function(S,H){var j=new ns(H=H||{});j.noRefs||Ua(S,j);var it=S;return j.replacer&&(it=j.replacer.call({"":it},"",it)),Us(j,0,it,!0,!0)?j.dump+"\n":""},YAMLException:Hi,types:{binary:eo,float:ae,map:xi,null:to,pairs:Ca,set:aa,timestamp:kn,bool:ar,int:pr,merge:$o,omap:jo,seq:hi,str:Pe},safeLoad:Wl("safeLoad","load"),safeLoadAll:Wl("safeLoadAll","loadAll"),safeDump:Wl("safeDump","dump")},cl="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:window,{FormData:Vs,Blob:ha,File:Go}=cl;function qa(S){return function(S){if(bt(S))return lt(S)}(S)||function(S){if(void 0!==Jt&&null!=Ct(S)||null!=S["@@iterator"])return gt(S)}(S)||Bt(S)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var rc=m(63759),Ws=m.n(rc),oc=function(H){return":/?#[]@!$&'()*+,;=".indexOf(H)>-1},hs=function(H){return/^[a-z0-9\-._~]+$/i.test(H)};function Ao(S){var H,j=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},it=j.escape,mt=arguments.length>2?arguments[2]:void 0;return"number"==typeof S&&(S=S.toString()),"string"==typeof S&&S.length&&it?mt?JSON.parse(S):St()(H=qa(S)).call(H,function(Xt){var Yt,le;if(hs(Xt)||oc(Xt)&&"unsafe"===it)return Xt;var we=new TextEncoder;return St()(Yt=St()(le=Gt()(we.encode(Xt))).call(le,function(oi){var ai;return Ws()(ai="0".concat(oi.toString(16).toUpperCase())).call(ai,-2)})).call(Yt,function(oi){return"%".concat(oi)}).join("")}).join(""):S}function vo(S){var H=S.value;return Array.isArray(H)?function(S){var H=S.key,j=S.value,it=S.style,mt=S.explode,Xt=S.escape,Yt=function(ai){return Ao(ai,{escape:Xt})};if("simple"===it)return St()(j).call(j,function(oi){return Yt(oi)}).join(",");if("label"===it)return".".concat(St()(j).call(j,function(oi){return Yt(oi)}).join("."));if("matrix"===it)return St()(j).call(j,function(oi){return Yt(oi)}).reduce(function(oi,ai){var di,Ri,ji;return!oi||mt?Te()(Ri=Te()(ji="".concat(oi||"",";")).call(ji,H,"=")).call(Ri,ai):Te()(di="".concat(oi,",")).call(di,ai)},"");if("form"===it){var le=mt?"&".concat(H,"="):",";return St()(j).call(j,function(oi){return Yt(oi)}).join(le)}if("spaceDelimited"===it){var we=mt?"".concat(H,"="):"";return St()(j).call(j,function(oi){return Yt(oi)}).join(" ".concat(we))}if("pipeDelimited"===it){var Me=mt?"".concat(H,"="):"";return St()(j).call(j,function(oi){return Yt(oi)}).join("|".concat(Me))}}(S):"object"===ut(H)?function(S){var H=S.key,j=S.value,it=S.style,mt=S.explode,Xt=S.escape,Yt=function(Me){return Ao(Me,{escape:Xt})},le=Ce()(j);return"simple"===it?le.reduce(function(we,Me){var oi,ai,di,Ri=Yt(j[Me]),ji=mt?"=":",",en=we?"".concat(we,","):"";return Te()(oi=Te()(ai=Te()(di="".concat(en)).call(di,Me)).call(ai,ji)).call(oi,Ri)},""):"label"===it?le.reduce(function(we,Me){var oi,ai,di,Ri=Yt(j[Me]),ji=mt?"=":".",en=we?"".concat(we,"."):".";return Te()(oi=Te()(ai=Te()(di="".concat(en)).call(di,Me)).call(ai,ji)).call(oi,Ri)},""):"matrix"===it&&mt?le.reduce(function(we,Me){var oi,ai,di=Yt(j[Me]),Ri=we?"".concat(we,";"):";";return Te()(oi=Te()(ai="".concat(Ri)).call(ai,Me,"=")).call(oi,di)},""):"matrix"===it?le.reduce(function(we,Me){var oi,ai,di=Yt(j[Me]),Ri=we?"".concat(we,","):";".concat(H,"=");return Te()(oi=Te()(ai="".concat(Ri)).call(ai,Me,",")).call(oi,di)},""):"form"===it?le.reduce(function(we,Me){var oi,ai,di,Ri,ji=Yt(j[Me]),en=we?Te()(oi="".concat(we)).call(oi,mt?"&":","):"",sn=mt?"=":",";return Te()(ai=Te()(di=Te()(Ri="".concat(en)).call(Ri,Me)).call(di,sn)).call(ai,ji)},""):void 0}(S):function(S){var Yt,H=S.key,j=S.value,it=S.style,mt=S.escape,Xt=function(we){return Ao(we,{escape:mt})};return"simple"===it?Xt(j):"label"===it?".".concat(Xt(j)):"matrix"===it?Te()(Yt=";".concat(H,"=")).call(Yt,Xt(j)):"form"===it||"deepObject"===it?Xt(j):void 0}(S)}const zc=function(H,j){j.body=H};var Au={serializeRes:Qu,mergeInQueryOrForm:Wa};function ac(S){return Ic.apply(this,arguments)}function Ic(){return Ic=pe(ke().mark(function S(H){var j,mt,Xt,Yt,le=arguments;return ke().wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:if(j=le.length>1&&void 0!==le[1]?le[1]:{},"object"===ut(H)&&(H=(j=H).url),j.headers=j.headers||{},Au.mergeInQueryOrForm(j),j.headers&&Ce()(j.headers).forEach(function(oi){var ai=j.headers[oi];"string"==typeof ai&&(j.headers[oi]=ai.replace(/\n+/g," "))}),!j.requestInterceptor){Me.next=12;break}return Me.next=8,j.requestInterceptor(j);case 8:if(Me.t0=Me.sent,Me.t0){Me.next=11;break}Me.t0=j;case 11:j=Me.t0;case 12:return/multipart\/form-data/i.test(j.headers["content-type"]||j.headers["Content-Type"])&&j.body instanceof Vs&&(delete j.headers["content-type"],delete j.headers["Content-Type"]),Me.prev=14,Me.next=17,(j.userFetch||fetch)(j.url,j);case 17:return mt=Me.sent,Me.next=20,Au.serializeRes(mt,H,j);case 20:if(mt=Me.sent,!j.responseInterceptor){Me.next=28;break}return Me.next=24,j.responseInterceptor(mt);case 24:if(Me.t1=Me.sent,Me.t1){Me.next=27;break}Me.t1=mt;case 27:mt=Me.t1;case 28:Me.next=39;break;case 30:if(Me.prev=30,Me.t2=Me.catch(14),mt){Me.next=34;break}throw Me.t2;case 34:throw(Xt=new Error(mt.statusText||"response status is ".concat(mt.status))).status=mt.status,Xt.statusCode=mt.status,Xt.responseError=Me.t2,Xt;case 39:if(mt.ok){Me.next=45;break}throw(Yt=new Error(mt.statusText||"response status is ".concat(mt.status))).status=mt.status,Yt.statusCode=mt.status,Yt.response=mt,Yt;case 45:return Me.abrupt("return",mt);case 46:case"end":return Me.stop()}},S,null,[[14,30]])})),Ic.apply(this,arguments)}var Zu=function(){var H=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return/(json|xml|yaml|text)\b/.test(H)};function Ou(S,H){return H&&(0===H.indexOf("application/json")||H.indexOf("+json")>0)?JSON.parse(S):lo.load(S)}function Qu(S,H){var j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},it=j.loadSpec,mt=void 0!==it&&it,Xt={ok:S.ok,url:S.url||H,status:S.status,statusText:S.statusText,headers:au(S.headers)},Yt=Xt.headers["content-type"],le=mt||Zu(Yt),we=le?S.text:S.blob||S.buffer;return we.call(S).then(function(Me){if(Xt.text=Me,Xt.data=Me,le)try{var oi=Ou(Me,Yt);Xt.body=oi,Xt.obj=oi}catch(ai){Xt.parseError=ai}return Xt})}function zl(S){return Di()(S).call(S,", ")?S.split(", "):S}function au(){var S=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"function"!=typeof Le()(S)?{}:Gt()(Le()(S).call(S)).reduce(function(H,j){var it=Nt(j,2);return H[it[0]]=zl(it[1]),H},{})}function rs(S,H){return!H&&"undefined"!=typeof navigator&&(H=navigator),H&&"ReactNative"===H.product?!(!S||"object"!==ut(S)||"string"!=typeof S.uri):!!(void 0!==Go&&S instanceof Go||void 0!==ha&&S instanceof ha||ArrayBuffer.isView(S))||null!==S&&"object"===ut(S)&&"function"==typeof S.pipe}function Mc(S,H){return Array.isArray(S)&&S.some(function(j){return rs(j,H)})}var ul={form:",",spaceDelimited:"%20",pipeDelimited:"|"},Ac={csv:",",ssv:"%20",tsv:"%09",pipes:"|"};function Sl(S,H){var j=arguments.length>2&&void 0!==arguments[2]&&arguments[2],it=H.collectionFormat,mt=H.allowEmptyValue,Xt=H.serializationOption,Yt=H.encoding,le="object"!==ut(H)||Array.isArray(H)?H:H.value,we=j?function(ji){return ji.toString()}:function(ji){return encodeURIComponent(ji)},Me=we(S);if(void 0===le&&mt)return[[Me,""]];if(rs(le)||Mc(le))return[[Me,le]];if(Xt)return da(S,le,j,Xt);if(Yt){if([ut(Yt.style),ut(Yt.explode),ut(Yt.allowReserved)].some(function(ji){return"undefined"!==ji})){var oi=Yt.style,ai=Yt.explode,di=Yt.allowReserved;return da(S,le,j,{style:oi,explode:ai,allowReserved:di})}if(Yt.contentType){if("application/json"===Yt.contentType){var Ri="string"==typeof le?le:Zt()(le);return[[Me,we(Ri)]]}return[[Me,we(le.toString())]]}return"object"!==ut(le)?[[Me,we(le)]]:Array.isArray(le)&&le.every(function(ji){return"object"!==ut(ji)})?[[Me,St()(le).call(le,we).join(",")]]:[[Me,we(Zt()(le))]]}return"object"!==ut(le)?[[Me,we(le)]]:Array.isArray(le)?"multi"===it?[[Me,St()(le).call(le,we)]]:[[Me,St()(le).call(le,we).join(Ac[it||"csv"])]]:[[Me,""]]}function da(S,H,j,it){var mt,oi,ai,Xt=it.style||"form",Yt=void 0===it.explode?"form"===Xt:it.explode,le=!j&&(it&&it.allowReserved?"unsafe":"reserved"),we=function(Ri){return Ao(Ri,{escape:le})},Me=j?function(di){return di}:function(di){return Ao(di,{escape:le})};return"object"!==ut(H)?[[Me(S),we(H)]]:Array.isArray(H)?Yt?[[Me(S),St()(H).call(H,we)]]:[[Me(S),St()(H).call(H,we).join(ul[Xt])]]:"deepObject"===Xt?St()(oi=Ce()(H)).call(oi,function(di){var Ri;return[Me(Te()(Ri="".concat(S,"[")).call(Ri,di,"]")),we(H[di])]}):Yt?St()(ai=Ce()(H)).call(ai,function(di){return[Me(di),we(H[di])]}):[[Me(S),St()(mt=Ce()(H)).call(mt,function(di){var Ri;return[Te()(Ri="".concat(Me(di),",")).call(Ri,we(H[di]))]}).join(",")]]}function bo(S){return ne()(S).reduce(function(H,j){var le,it=Nt(j,2),Yt=Dt(Sl(it[0],it[1],!0));try{for(Yt.s();!(le=Yt.n()).done;){var we=Nt(le.value,2),Me=we[0],oi=we[1];if(Array.isArray(oi)){var di,ai=Dt(oi);try{for(ai.s();!(di=ai.n()).done;){var Ri=di.value;if(ArrayBuffer.isView(Ri)){var ji=new ha([Ri]);H.append(Me,ji)}else H.append(Me,Ri)}}catch(sn){ai.e(sn)}finally{ai.f()}}else if(ArrayBuffer.isView(oi)){var en=new ha([oi]);H.append(Me,en)}else H.append(Me,oi)}}catch(sn){Yt.e(sn)}finally{Yt.f()}return H},new Vs)}function ba(S){var H=Ce()(S).reduce(function(j,it){var Xt,mt=Dt(Sl(it,S[it]));try{for(mt.s();!(Xt=mt.n()).done;){var Yt=Nt(Xt.value,2);j[Yt[0]]=Yt[1]}}catch(Me){mt.e(Me)}finally{mt.f()}return j},{});return Qt().stringify(H,{encode:!1,indices:!1})||""}function Wa(){var S=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},H=S.url,j=void 0===H?"":H,it=S.query,mt=S.form,Xt=function(){for(var rn=arguments.length,Jr=new Array(rn),Wr=0;Wr<rn;Wr++)Jr[Wr]=arguments[Wr];var as=re()(Jr).call(Jr,function(wo){return wo}).join("&");return as?"?".concat(as):""};if(mt){var Yt=Ce()(mt).some(function(Mn){var rn=mt[Mn].value;return rs(rn)||Mc(rn)}),le=S.headers["content-type"]||S.headers["Content-Type"];if(Yt||/multipart\/form-data/i.test(le)){var we=bo(S.form);zc(we,S)}else S.body=ba(mt);delete S.form}if(it){var Me=j.split("?"),oi=Nt(Me,2),ai=oi[0],di=oi[1],Ri="";if(di){var ji=Qt().parse(di),en=Ce()(it);en.forEach(function(Mn){return delete ji[Mn]}),Ri=Qt().stringify(ji,{encode:!0})}var sn=Xt(Ri,ba(it));S.url=ai+sn,delete S.query}return S}function lu(S,H){if(!(S instanceof H))throw new TypeError("Cannot call a class as a function")}function ya(S,H){for(var j=0;j<H.length;j++){var it=H[j];it.enumerable=it.enumerable||!1,it.configurable=!0,"value"in it&&(it.writable=!0),B(S,it.key,it)}}function Vr(S,H,j){return H&&ya(S.prototype,H),j&&ya(S,j),B(S,"prototype",{writable:!1}),S}var S,Ia=m(77464),lc=m.n(Ia),Ll=m(78927),bs=m.n(Ll),Yl=m(67489),cc=m.n(Yl),Ch=(S=function(H,j){return(S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(it,mt){it.__proto__=mt}||function(it,mt){for(var Xt in mt)mt.hasOwnProperty(Xt)&&(it[Xt]=mt[Xt])})(H,j)},function(H,j){function it(){this.constructor=H}S(H,j),H.prototype=null===j?Object.create(j):(it.prototype=j.prototype,new it)}),Ma=Object.prototype.hasOwnProperty;function wl(S,H){return Ma.call(S,H)}function Oc(S){if(Array.isArray(S)){for(var j=new Array(S.length),H=0;H<j.length;H++)j[H]=""+H;return j}if(Object.keys)return Object.keys(S);for(var it in j=[],S)wl(S,it)&&j.push(it);return j}function Is(S){switch(typeof S){case"object":return JSON.parse(JSON.stringify(S));case"undefined":return null;default:return S}}function hl(S){for(var it,H=0,j=S.length;H<j;){if(!((it=S.charCodeAt(H))>=48&&it<=57))return!1;H++}return!0}function Mr(S){return-1===S.indexOf("/")&&-1===S.indexOf("~")?S:S.replace(/~/g,"~0").replace(/\//g,"~1")}function uc(S){return S.replace(/~1/g,"/").replace(/~0/g,"~")}function jc(S){if(void 0===S)return!0;if(S)if(Array.isArray(S)){for(var H=0,j=S.length;H<j;H++)if(jc(S[H]))return!0}else if("object"==typeof S){var it=Oc(S),mt=it.length;for(H=0;H<mt;H++)if(jc(S[it[H]]))return!0}return!1}function ea(S,H){var j=[S];for(var it in H){var mt="object"==typeof H[it]?JSON.stringify(H[it],null,2):H[it];void 0!==mt&&j.push(it+": "+mt)}return j.join("\n")}var Yc=function(S){function H(j,it,mt,Xt,Yt){var le=this.constructor,we=S.call(this,ea(j,{name:it,index:mt,operation:Xt,tree:Yt}))||this;return we.name=it,we.index=mt,we.operation=Xt,we.tree=Yt,Object.setPrototypeOf(we,le.prototype),we.message=ea(j,{name:it,index:mt,operation:Xt,tree:Yt}),we}return Ch(H,S),H}(Error),Po=Yc,Xc=Is,dc={add:function(S,H,j){return S[H]=this.value,{newDocument:j}},remove:function(S,H,j){var it=S[H];return delete S[H],{newDocument:j,removed:it}},replace:function(S,H,j){var it=S[H];return S[H]=this.value,{newDocument:j,removed:it}},move:function(S,H,j){var it=pc(j,this.path);it&&(it=Is(it));var mt=za(j,{op:"remove",path:this.from}).removed;return za(j,{op:"add",path:this.path,value:mt}),{newDocument:j,removed:it}},copy:function(S,H,j){var it=pc(j,this.from);return za(j,{op:"add",path:this.path,value:Is(it)}),{newDocument:j}},test:function(S,H,j){return{newDocument:j,test:Dl(S[H],this.value)}},_get:function(S,H,j){return this.value=S[H],{newDocument:j}}},cu={add:function(S,H,j){return hl(H)?S.splice(H,0,this.value):S[H]=this.value,{newDocument:j,index:H}},remove:function(S,H,j){return{newDocument:j,removed:S.splice(H,1)[0]}},replace:function(S,H,j){var it=S[H];return S[H]=this.value,{newDocument:j,removed:it}},move:dc.move,copy:dc.copy,test:dc.test,_get:dc._get};function pc(S,H){if(""==H)return S;var j={op:"_get",path:H};return za(S,j),j.value}function za(S,H,j,it,mt,Xt){if(void 0===j&&(j=!1),void 0===it&&(it=!0),void 0===mt&&(mt=!0),void 0===Xt&&(Xt=0),j&&("function"==typeof j?j(H,0,S,H.path):Rl(H,0)),""===H.path){var Yt={newDocument:S};if("add"===H.op)return Yt.newDocument=H.value,Yt;if("replace"===H.op)return Yt.newDocument=H.value,Yt.removed=S,Yt;if("move"===H.op||"copy"===H.op)return Yt.newDocument=pc(S,H.from),"move"===H.op&&(Yt.removed=S),Yt;if("test"===H.op){if(Yt.test=Dl(S,H.value),!1===Yt.test)throw new Po("Test operation failed","TEST_OPERATION_FAILED",Xt,H,S);return Yt.newDocument=S,Yt}if("remove"===H.op)return Yt.removed=S,Yt.newDocument=null,Yt;if("_get"===H.op)return H.value=S,Yt;if(j)throw new Po("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",Xt,H,S);return Yt}it||(S=Is(S));var we=(H.path||"").split("/"),Me=S,oi=1,ai=we.length,di=void 0,Ri=void 0,ji=void 0;for(ji="function"==typeof j?j:Rl;;){if((Ri=we[oi])&&-1!=Ri.indexOf("~")&&(Ri=uc(Ri)),mt&&"__proto__"==Ri)throw new TypeError("JSON-Patch: modifying `__proto__` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(j&&void 0===di&&(void 0===Me[Ri]?di=we.slice(0,oi).join("/"):oi==ai-1&&(di=H.path),void 0!==di&&ji(H,0,S,di)),oi++,Array.isArray(Me)){if("-"===Ri)Ri=Me.length;else{if(j&&!hl(Ri))throw new Po("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",Xt,H,S);hl(Ri)&&(Ri=~~Ri)}if(oi>=ai){if(j&&"add"===H.op&&Ri>Me.length)throw new Po("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",Xt,H,S);if(!1===(Yt=cu[H.op].call(H,Me,Ri,S)).test)throw new Po("Test operation failed","TEST_OPERATION_FAILED",Xt,H,S);return Yt}}else if(oi>=ai){if(!1===(Yt=dc[H.op].call(H,Me,Ri,S)).test)throw new Po("Test operation failed","TEST_OPERATION_FAILED",Xt,H,S);return Yt}if(Me=Me[Ri],j&&oi<ai&&(!Me||"object"!=typeof Me))throw new Po("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",Xt,H,S)}}function Aa(S,H,j,it,mt){if(void 0===it&&(it=!0),void 0===mt&&(mt=!0),j&&!Array.isArray(H))throw new Po("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");it||(S=Is(S));for(var Xt=new Array(H.length),Yt=0,le=H.length;Yt<le;Yt++)Xt[Yt]=za(S,H[Yt],j,!0,mt,Yt),S=Xt[Yt].newDocument;return Xt.newDocument=S,Xt}function Kl(S,H,j){var it=za(S,H);if(!1===it.test)throw new Po("Test operation failed","TEST_OPERATION_FAILED",j,H,S);return it.newDocument}function Rl(S,H,j,it){if("object"!=typeof S||null===S||Array.isArray(S))throw new Po("Operation is not an object","OPERATION_NOT_AN_OBJECT",H,S,j);if(!dc[S.op])throw new Po("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",H,S,j);if("string"!=typeof S.path)throw new Po("Operation `path` property is not a string","OPERATION_PATH_INVALID",H,S,j);if(0!==S.path.indexOf("/")&&S.path.length>0)throw new Po('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",H,S,j);if(("move"===S.op||"copy"===S.op)&&"string"!=typeof S.from)throw new Po("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",H,S,j);if(("add"===S.op||"replace"===S.op||"test"===S.op)&&void 0===S.value)throw new Po("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",H,S,j);if(("add"===S.op||"replace"===S.op||"test"===S.op)&&jc(S.value))throw new Po("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",H,S,j);if(j)if("add"==S.op){var mt=S.path.split("/").length,Xt=it.split("/").length;if(mt!==Xt+1&&mt!==Xt)throw new Po("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",H,S,j)}else if("replace"===S.op||"remove"===S.op||"_get"===S.op){if(S.path!==it)throw new Po("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",H,S,j)}else if("move"===S.op||"copy"===S.op){var le=qo([{op:"_get",path:S.from,value:void 0}],j);if(le&&"OPERATION_PATH_UNRESOLVABLE"===le.name)throw new Po("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",H,S,j)}}function qo(S,H,j){try{if(!Array.isArray(S))throw new Po("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(H)Aa(Is(H),Is(S),j||!0);else{j=j||Rl;for(var it=0;it<S.length;it++)j(S[it],it,H,void 0)}}catch(mt){if(mt instanceof Po)return mt;throw mt}}function Dl(S,H){if(S===H)return!0;if(S&&H&&"object"==typeof S&&"object"==typeof H){var mt,Xt,Yt,j=Array.isArray(S),it=Array.isArray(H);if(j&&it){if((Xt=S.length)!=H.length)return!1;for(mt=Xt;0!=mt--;)if(!Dl(S[mt],H[mt]))return!1;return!0}if(j!=it)return!1;var le=Object.keys(S);if((Xt=le.length)!==Object.keys(H).length)return!1;for(mt=Xt;0!=mt--;)if(!H.hasOwnProperty(le[mt]))return!1;for(mt=Xt;0!=mt--;)if(!Dl(S[Yt=le[mt]],H[Yt]))return!1;return!0}return S!=S&&H!=H}var Il=new WeakMap,Jl=function(H){this.observers=new Map,this.obj=H},fc=function(H,j){this.callback=H,this.observer=j};function Nl(S,H){H.unobserve()}function $l(S,H){var it,mt=function(S){return Il.get(S)}(S);if(mt){var Xt=function(S,H){return S.observers.get(H)}(mt,H);it=Xt&&Xt.observer}else mt=new Jl(S),Il.set(S,mt);if(it)return it;if(it={},mt.value=Is(S),H){it.callback=H,it.next=null;var Yt=function(){xc(it)},le=function(){clearTimeout(it.next),it.next=setTimeout(Yt)};"undefined"!=typeof window&&(window.addEventListener("mouseup",le),window.addEventListener("keyup",le),window.addEventListener("mousedown",le),window.addEventListener("keydown",le),window.addEventListener("change",le))}return it.patches=[],it.object=S,it.unobserve=function(){xc(it),clearTimeout(it.next),function(S,H){S.observers.delete(H.callback)}(mt,it),"undefined"!=typeof window&&(window.removeEventListener("mouseup",le),window.removeEventListener("keyup",le),window.removeEventListener("mousedown",le),window.removeEventListener("keydown",le),window.removeEventListener("change",le))},mt.observers.set(H,new fc(H,it)),it}function xc(S,H){void 0===H&&(H=!1);var j=Il.get(S.object);pa(j.value,S.object,S.patches,"",H),S.patches.length&&Aa(j.value,S.patches);var it=S.patches;return it.length>0&&(S.patches=[],S.callback&&S.callback(it)),it}function pa(S,H,j,it,mt){if(H!==S){"function"==typeof H.toJSON&&(H=H.toJSON());for(var Xt=Oc(H),Yt=Oc(S),we=!1,Me=Yt.length-1;Me>=0;Me--){var ai=S[oi=Yt[Me]];if(!wl(H,oi)||void 0===H[oi]&&void 0!==ai&&!1===Array.isArray(H))Array.isArray(S)===Array.isArray(H)?(mt&&j.push({op:"test",path:it+"/"+Mr(oi),value:Is(ai)}),j.push({op:"remove",path:it+"/"+Mr(oi)}),we=!0):(mt&&j.push({op:"test",path:it,value:S}),j.push({op:"replace",path:it,value:H}));else{var di=H[oi];"object"==typeof ai&&null!=ai&&"object"==typeof di&&null!=di&&Array.isArray(ai)===Array.isArray(di)?pa(ai,di,j,it+"/"+Mr(oi),mt):ai!==di&&(mt&&j.push({op:"test",path:it+"/"+Mr(oi),value:Is(ai)}),j.push({op:"replace",path:it+"/"+Mr(oi),value:Is(di)}))}}if(we||Xt.length!=Yt.length)for(Me=0;Me<Xt.length;Me++){var oi;!wl(S,oi=Xt[Me])&&void 0!==H[oi]&&j.push({op:"add",path:it+"/"+Mr(oi),value:Is(H[oi])})}}}function tl(S,H,j){void 0===j&&(j=!1);var it=[];return pa(S,H,it,"",j),it}Object.assign({},T,_,{JsonPatchError:Yc,deepClone:Is,escapePathComponent:Mr,unescapePathComponent:uc});var mc=m(89986),kc=m.n(mc),$c=m(69380),Oa=m.n($c);const co={add:function(S,H){return{op:"add",path:S,value:H}},replace:xu,remove:function(S){return{op:"remove",path:S}},merge:function(S,H){return{type:"mutation",op:"merge",path:S,value:H}},mergeDeep:function(S,H){return{type:"mutation",op:"mergeDeep",path:S,value:H}},context:function(S,H){return{type:"context",path:S,value:H}},getIn:function(S,H){return H.reduce(function(j,it){return void 0!==it&&j?j[it]:j},S)},applyPatch:function(S,H,j){if(j=j||{},"merge"===(H=et(et({},H),{},{path:H.path&&Zl(H.path)})).op){var it=Ve(S,H.path);Pt()(it,H.value),Aa(S,[xu(H.path,it)])}else if("mergeDeep"===H.op){var mt=Ve(S,H.path);for(var Xt in H.value){var Yt=H.value[Xt],le=Array.isArray(Yt);if(le){var we=mt[Xt]||[];mt[Xt]=Te()(we).call(we,Yt)}else if(na(Yt)&&!le){var Me=et({},mt[Xt]);for(var oi in Yt){if(Object.prototype.hasOwnProperty.call(Me,oi)){Me=kc()(Oa()(Me),Yt);break}Pt()(Me,Z({},oi,Yt[oi]))}mt[Xt]=Me}else mt[Xt]=Yt}}else if("add"===H.op&&""===H.path&&na(H.value)){Aa(S,Ce()(H.value).reduce(function(sn,Mn){return sn.push({op:"add",path:"/".concat(Zl(Mn)),value:H.value[Mn]}),sn},[]))}else if("replace"===H.op&&""===H.path){var Ri=H.value;j.allowMetaPatches&&H.meta&&Rt(H)&&(Array.isArray(H.value)||na(H.value))&&(Ri=et(et({},Ri),H.meta)),S=Ri}else if(Aa(S,[H]),j.allowMetaPatches&&H.meta&&Rt(H)&&(Array.isArray(H.value)||na(H.value))){var en=et(et({},Ve(S,H.path)),H.meta);Aa(S,[xu(H.path,en)])}return S},parentPathMatch:function(S,H){if(!Array.isArray(H))return!1;for(var j=0,it=H.length;j<it;j+=1)if(H[j]!==S[j])return!1;return!0},flatten:il,fullyNormalizeArray:function(S){return gl(il(Ea(S)))},normalizeArray:Ea,isPromise:function(S){return na(S)&&Ql(S.then)},forEachNew:function(S,H){try{return Ml(S,pl,H)}catch(j){return j}},forEachNewPrimitive:function(S,H){try{return Ml(S,el,H)}catch(j){return j}},isJsonPatch:ds,isContextPatch:function(S){return De(S)&&"context"===S.type},isPatch:De,isMutation:vt,isAdditiveMutation:Rt,isGenerator:function(S){return"[object GeneratorFunction]"===Object.prototype.toString.call(S)},isFunction:Ql,isObject:na,isError:function(S){return S instanceof Error}};function Zl(S){return Array.isArray(S)?S.length<1?"":"/".concat(St()(S).call(S,function(H){return(H+"").replace(/~/g,"~0").replace(/\//g,"~1")}).join("/")):S}function xu(S,H,j){return{op:"replace",path:S,value:H,meta:j}}function Ml(S,H,j){var it;return gl(il(St()(it=re()(S).call(S,Rt)).call(it,function(le){return H(le.value,j,le.path)})||[]))}function el(S,H,j){return j=j||[],Array.isArray(S)?St()(S).call(S,function(mt,Xt){return el(mt,H,Te()(j).call(j,Xt))}):na(S)?St()(it=Ce()(S)).call(it,function(mt){return el(S[mt],H,Te()(j).call(j,mt))}):H(S,j[j.length-1],j);var it}function pl(S,H,j){var it=[];if((j=j||[]).length>0){var mt=H(S,j[j.length-1],j);mt&&(it=Te()(it).call(it,mt))}if(Array.isArray(S)){var Xt=St()(S).call(S,function(we,Me){return pl(we,H,Te()(j).call(j,Me))});Xt&&(it=Te()(it).call(it,Xt))}else if(na(S)){var Yt,le=St()(Yt=Ce()(S)).call(Yt,function(we){return pl(S[we],H,Te()(j).call(j,we))});le&&(it=Te()(it).call(it,le))}return il(it)}function Ea(S){return Array.isArray(S)?S:[S]}function il(S){var H;return Te()(H=[]).apply(H,qa(St()(S).call(S,function(j){return Array.isArray(j)?il(j):j})))}function gl(S){return re()(S).call(S,function(H){return void 0!==H})}function na(S){return S&&"object"===ut(S)}function Ql(S){return S&&"function"==typeof S}function ds(S){if(De(S)){var H=S.op;return"add"===H||"remove"===H||"replace"===H}return!1}function vt(S){return ds(S)||De(S)&&"mutation"===S.type}function Rt(S){return vt(S)&&("add"===S.op||"replace"===S.op||"merge"===S.op||"mergeDeep"===S.op)}function De(S){return S&&"object"===ut(S)}function Ve(S,H){try{return pc(S,H)}catch(j){return console.error(j),{}}}var fi=m(74580),Qe=m.n(fi),li=m(79921),Li=m.n(li);function Ai(S,H){function j(){Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack;for(var it=arguments.length,mt=new Array(it),Xt=0;Xt<it;Xt++)mt[Xt]=arguments[Xt];this.message=mt[0],H&&H.apply(this,mt)}return(j.prototype=new Error).name=S,j.prototype.constructor=j,j}var zi=m(3394),Kn=m.n(zi),Un=["properties"],$n=["properties"],Ko=["definitions","parameters","responses","securityDefinitions","components/schemas","components/responses","components/parameters","components/securitySchemes"],Co=["schema/example","items/example"];function Gr(S){var H=S[S.length-1],j=S[S.length-2],it=S.join("/");return Un.indexOf(H)>-1&&-1===$n.indexOf(j)||Ko.indexOf(it)>-1||Co.some(function(mt){return it.indexOf(mt)>-1})}function So(S,H){var j,mt=Nt(S.split("#"),2),Yt=mt[1],le=Ht.resolve(mt[0]||"",H||"");return Yt?Te()(j="".concat(le,"#")).call(j,Yt):le}var oo="application/json, application/yaml",Ms=new RegExp("^([a-z]+://|//)","i"),os=Ai("JSONRefError",function(H,j,it){this.originalError=it,Pt()(this,j||{})}),ys={},ml=new(Qe()),hu=[function(S){return"paths"===S[0]&&"responses"===S[3]&&"examples"===S[5]},function(S){return"paths"===S[0]&&"responses"===S[3]&&"content"===S[5]&&"example"===S[7]},function(S){return"paths"===S[0]&&"responses"===S[3]&&"content"===S[5]&&"examples"===S[7]&&"value"===S[9]},function(S){return"paths"===S[0]&&"requestBody"===S[3]&&"content"===S[4]&&"example"===S[6]},function(S){return"paths"===S[0]&&"requestBody"===S[3]&&"content"===S[4]&&"examples"===S[6]&&"value"===S[8]},function(S){return"paths"===S[0]&&"parameters"===S[2]&&"example"===S[4]},function(S){return"paths"===S[0]&&"parameters"===S[3]&&"example"===S[5]},function(S){return"paths"===S[0]&&"parameters"===S[2]&&"examples"===S[4]&&"value"===S[6]},function(S){return"paths"===S[0]&&"parameters"===S[3]&&"examples"===S[5]&&"value"===S[7]},function(S){return"paths"===S[0]&&"parameters"===S[2]&&"content"===S[4]&&"example"===S[6]},function(S){return"paths"===S[0]&&"parameters"===S[2]&&"content"===S[4]&&"examples"===S[6]&&"value"===S[8]},function(S){return"paths"===S[0]&&"parameters"===S[3]&&"content"===S[4]&&"example"===S[7]},function(S){return"paths"===S[0]&&"parameters"===S[3]&&"content"===S[5]&&"examples"===S[7]&&"value"===S[9]}],Fu={key:"$ref",plugin:function(H,j,it,mt){var Xt=mt.getInstance(),Yt=Ws()(it).call(it,0,-1);if(!Gr(Yt)&&!function(H){return hu.some(function(j){return j(H)})}(Yt)){var we=mt.getContext(it).baseDoc;if("string"!=typeof H)return new os("$ref: must be a string (JSON-Ref)",{$ref:H,baseDoc:we,fullPath:it});var di,Ri,ji,Me=Bu(H),oi=Me[0],ai=Me[1]||"";try{di=we||oi?pu(oi,we):null}catch(rn){return Ta(rn,{pointer:ai,$ref:H,basePath:di,fullPath:it})}if(function(S,H,j,it){var mt,Xt,Yt=ml.get(it);Yt||ml.set(it,Yt={});var le=function(S){return 0===S.length?"":"/".concat(St()(S).call(S,tc).join("/"))}(j),we=Te()(mt="".concat(H||"<specmap-base>","#")).call(mt,S),Me=le.replace(/allOf\/\d+\/?/g,"");if(H===it.contextTree.get([]).baseDoc&&Jo(Me,S))return!0;var ai="",di=j.some(function(Ri){var ji;return ai=Te()(ji="".concat(ai,"/")).call(ji,tc(Ri)),Yt[ai]&&Yt[ai].some(function(en){return Jo(en,we)||Jo(we,en)})});if(di)return!0;Yt[Me]=Te()(Xt=Yt[Me]||[]).call(Xt,we)}(ai,di,Yt,mt)&&!Xt.useCircularStructures){var en=So(H,di);return H===en?null:co.replace(it,en)}if(null==di?(ji=Qc(ai),void 0===(Ri=mt.get(ji))&&(Ri=new os("Could not resolve reference: ".concat(H),{pointer:ai,$ref:H,baseDoc:we,fullPath:it}))):Ri=null!=(Ri=Hu(di,ai)).__value?Ri.__value:Ri.catch(function(rn){throw Ta(rn,{pointer:ai,$ref:H,baseDoc:we,fullPath:it})}),Ri instanceof Error)return[co.remove(it),Ri];var sn=So(H,di),Mn=co.replace(Yt,Ri,{$$ref:sn});if(di&&di!==we)return[Mn,co.context(Yt,{baseDoc:di})];try{if(!function(S,H){var j=[S];return H.path.reduce(function(mt,Xt){return j.push(mt[Xt]),mt[Xt]},S),function it(mt){return co.isObject(mt)&&(j.indexOf(mt)>=0||Ce()(mt).some(function(Xt){return it(mt[Xt])}))}(H.value)}(mt.state,Mn)||Xt.useCircularStructures)return Mn}catch(rn){return null}}}},du=Pt()(Fu,{docCache:ys,absoluteify:pu,clearCache:function(S){void 0!==S?delete ys[S]:Ce()(ys).forEach(function(H){delete ys[H]})},JSONRefError:os,wrapError:Ta,getDoc:Uu,split:Bu,extractFromDoc:Hu,fetchJSON:function(S){return fetch(S,{headers:{Accept:oo},loadSpec:!0}).then(function(H){return H.text()}).then(function(H){return lo.load(H)})},extract:th,jsonPointerToArray:Qc,unescapeJsonPointerToken:qc});const qu=du;function pu(S,H){if(!Ms.test(S)){var j;if(!H)throw new os(Te()(j="Tried to resolve a relative URL, without having a basePath. path: '".concat(S,"' basePath: '")).call(j,H,"'"));return Ht.resolve(H,S)}return S}function Ta(S,H){var j,it;return j=S&&S.response&&S.response.body?Te()(it="".concat(S.response.body.code," ")).call(it,S.response.body.message):S.message,new os("Could not resolve reference: ".concat(j),H,S)}function Bu(S){return(S+"").split("#")}function Hu(S,H){var j=ys[S];if(j&&!co.isPromise(j))try{var it=th(H,j);return Pt()(bs().resolve(it),{__value:it})}catch(mt){return bs().reject(mt)}return Uu(S).then(function(mt){return th(H,mt)})}function Uu(S){var H=ys[S];return H?co.isPromise(H)?H:bs().resolve(H):(ys[S]=du.fetchJSON(S).then(function(j){return ys[S]=j,j}),ys[S])}function th(S,H){var j=Qc(S);if(j.length<1)return H;var it=co.getIn(H,j);if(void 0===it)throw new os("Could not resolve pointer: ".concat(S," does not exist in document"),{pointer:S});return it}function Qc(S){var H;if("string"!=typeof S)throw new TypeError("Expected a string, got a ".concat(ut(S)));return"/"===S[0]&&(S=S.substr(1)),""===S?[]:St()(H=S.split("/")).call(H,qc)}function qc(S){return"string"!=typeof S?S:new(Li())("=".concat(S.replace(/~1/g,"/").replace(/~0/g,"~"))).get("")}function tc(S){var H,j=new(Li())([["",S.replace(/~/g,"~0").replace(/\//g,"~1")]]);return Ws()(H=j.toString()).call(H,1)}function Jo(S,H){if(function(H){return!H||"/"===H||"#"===H}(H))return!0;var j=S.charAt(H.length),it=Ws()(H).call(H,-1);return 0===S.indexOf(H)&&(!j||"/"===j||"#"===j)&&"#"!==it}var Pc=m(65359),mh=m.n(Pc);const eh={key:"allOf",plugin:function(H,j,it,mt,Xt){if(!Xt.meta||!Xt.meta.$$ref){var Yt=Ws()(it).call(it,0,-1);if(!Gr(Yt)){if(!Array.isArray(H)){var le=new TypeError("allOf must be an array");return le.fullPath=it,le}var we=!1,Me=Xt.value;if(Yt.forEach(function(di){!Me||(Me=Me[di])}),Me=et({},Me),!mh()(Me)){delete Me.allOf;var ai,oi=[];return oi.push(mt.replace(Yt,{})),H.forEach(function(di,Ri){if(!mt.isObject(di)){if(we)return null;we=!0;var ji=new TypeError("Elements in allOf must be objects");return ji.fullPath=it,oi.push(ji)}oi.push(mt.mergeDeep(Yt,di));var sn=function(S,H){var j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},it=j.specmap,mt=j.getBaseUrlForNodePath,Xt=void 0===mt?function(Me){var oi;return it.getContext(Te()(oi=[]).call(oi,qa(H),qa(Me))).baseDoc}:mt,Yt=j.targetKeys,le=void 0===Yt?["$ref","$$ref"]:Yt,we=[];return Kn()(S).forEach(function(){if(Di()(le).call(le,this.key)&&"string"==typeof this.node){var oi=this.path,ai=Te()(H).call(H,this.path),di=So(this.node,Xt(oi));we.push(it.replace(ai,di))}}),we}(di,Ws()(it).call(it,0,-1),{getBaseUrlForNodePath:function(rn){var Jr;return mt.getContext(Te()(Jr=[]).call(Jr,qa(it),[Ri],qa(rn))).baseDoc},specmap:mt});oi.push.apply(oi,qa(sn))}),oi.push(mt.mergeDeep(Yt,Me)),Me.$$ref||oi.push(mt.remove(Te()(ai=[]).call(ai,Yt,"$$ref"))),oi}}}}},_h={key:"parameters",plugin:function(H,j,it,mt){if(Array.isArray(H)&&H.length){var Xt=Pt()([],H),Yt=Ws()(it).call(it,0,-1),le=et({},co.getIn(mt.spec,Yt));return H.forEach(function(we,Me){try{Xt[Me].default=mt.parameterMacro(le,we)}catch(ai){var oi=new Error(ai);return oi.fullPath=it,oi}}),co.replace(it,Xt)}return co.replace(it,H)}},Sh={key:"properties",plugin:function(H,j,it,mt){var Xt=et({},H);for(var Yt in H)try{Xt[Yt].default=mt.modelPropertyMacro(Xt[Yt])}catch(Me){var le=new Error(Me);return le.fullPath=it,le}return co.replace(it,Xt)}};var wh=function(){function S(H){lu(this,S),this.root=ih(H||{})}return Vr(S,[{key:"set",value:function(j,it){var mt=this.getParent(j,!0);if(mt){var Xt=j[j.length-1],Yt=mt.children;Yt[Xt]?Gu(Yt[Xt],it,mt):Yt[Xt]=ih(it,mt)}else Gu(this.root,it,null)}},{key:"get",value:function(j){if((j=j||[]).length<1)return this.root.value;for(var mt,Xt,it=this.root,Yt=0;Yt<j.length&&(mt=it.children)[Xt=j[Yt]];Yt+=1)it=mt[Xt];return it&&it.protoValue}},{key:"getParent",value:function(j,it){return!j||j.length<1?null:j.length<2?this.root:Ws()(j).call(j,0,-1).reduce(function(mt,Xt){if(!mt)return mt;var Yt=mt.children;return!Yt[Xt]&&it&&(Yt[Xt]=ih(null,mt)),Yt[Xt]},this.root)}}]),S}();function ih(S,H){return Gu({children:{}},S,H)}function Gu(S,H,j){return S.value=H||{},S.protoValue=j?et(et({},j.protoValue),S.value):S.value,Ce()(S.children).forEach(function(it){var mt=S.children[it];S.children[it]=Gu(mt,mt.value,S)}),S}var tu=function(){},fa=function(){function S(H){var it,mt,j=this;lu(this,S),Pt()(this,{spec:"",debugLevel:"info",plugins:[],pluginHistory:{},errors:[],mutations:[],promisedPatches:[],state:{},patches:[],context:{},contextTree:new wh,showDebug:!1,allPatches:[],pluginProp:"specMap",libMethods:Pt()(Object.create(this),co,{getInstance:function(){return j}}),allowMetaPatches:!1},H),this.get=this._get.bind(this),this.getContext=this._getContext.bind(this),this.hasRun=this._hasRun.bind(this),this.wrappedPlugins=re()(it=St()(mt=this.plugins).call(mt,this.wrapPlugin.bind(this))).call(it,co.isFunction),this.patches.push(co.add([],this.spec)),this.patches.push(co.context([],this.context)),this.updatePatches(this.patches)}return Vr(S,[{key:"debug",value:function(j){if(this.debugLevel===j){for(var it,mt=arguments.length,Xt=new Array(mt>1?mt-1:0),Yt=1;Yt<mt;Yt++)Xt[Yt-1]=arguments[Yt];(it=console).log.apply(it,Xt)}}},{key:"verbose",value:function(j){if("verbose"===this.debugLevel){for(var it,mt,Xt=arguments.length,Yt=new Array(Xt>1?Xt-1:0),le=1;le<Xt;le++)Yt[le-1]=arguments[le];(it=console).log.apply(it,Te()(mt=["[".concat(j,"]   ")]).call(mt,Yt))}}},{key:"wrapPlugin",value:function(j,it){var Yt,we,Me,mt=this.pathDiscriminator,Xt=null;return j[this.pluginProp]?(Xt=j,Yt=j[this.pluginProp]):co.isFunction(j)?Yt=j:co.isObject(j)&&(we=j,Me=function(ai,di){return!Array.isArray(ai)||ai.every(function(Ri,ji){return Ri===di[ji]})},Yt=ke().mark(function oi(ai,di){var Ri,ji,en,sn,Mn,rn;return ke().wrap(function(Wr){for(;;)switch(Wr.prev=Wr.next){case 0:rn=function(wo,Br,xs){var xa,js,oe,zr,Ys,ga,Ec,Tc,Tu,Ju,bh,bl,Zh;return ke().wrap(function(nl){for(;;)switch(nl.prev=nl.next){case 0:if(co.isObject(wo)){nl.next=6;break}if(we.key!==Br[Br.length-1]){nl.next=4;break}return nl.next=4,we.plugin(wo,we.key,Br,di);case 4:nl.next=30;break;case 6:js=Br[xa=Br.length-1],oe=Br.indexOf("properties"),zr="properties"===js&&xa===oe,Ys=di.allowMetaPatches&&ji[wo.$$ref],ga=0,Ec=Ce()(wo);case 12:if(!(ga<Ec.length)){nl.next=30;break}if(Tu=wo[Tc=Ec[ga]],Ju=Te()(Br).call(Br,Tc),bh=co.isObject(Tu),bl=wo.$$ref,Ys){nl.next=22;break}if(!bh){nl.next=22;break}return di.allowMetaPatches&&bl&&(ji[bl]=!0),nl.delegateYield(rn(Tu,Ju,xs),"t0",22);case 22:if(zr||Tc!==we.key){nl.next=27;break}if(Zh=Me(mt,Br),mt&&!Zh){nl.next=27;break}return nl.next=27,we.plugin(Tu,Tc,Ju,di,xs);case 27:ga++,nl.next=12;break;case 30:case"end":return nl.stop()}},Ri)},Ri=ke().mark(rn),ji={},en=Dt(re()(ai).call(ai,co.isAdditiveMutation)),Wr.prev=4,en.s();case 6:if((sn=en.n()).done){Wr.next=11;break}return Wr.delegateYield(rn((Mn=sn.value).value,Mn.path,Mn),"t0",9);case 9:Wr.next=6;break;case 11:Wr.next=16;break;case 13:Wr.prev=13,Wr.t1=Wr.catch(4),en.e(Wr.t1);case 16:return Wr.prev=16,en.f(),Wr.finish(16);case 19:case"end":return Wr.stop()}},oi,null,[[4,13,16,19]])})),Pt()(Yt.bind(Xt),{pluginName:j.name||it,isGenerator:co.isGenerator(Yt)})}},{key:"nextPlugin",value:function(){var j,it=this;return lc()(j=this.wrappedPlugins).call(j,function(mt){return it.getMutationsForPlugin(mt).length>0})}},{key:"nextPromisedPatch",value:function(){var j;if(this.promisedPatches.length>0)return bs().race(St()(j=this.promisedPatches).call(j,function(it){return it.value}))}},{key:"getPluginHistory",value:function(j){var it=this.constructor.getPluginName(j);return this.pluginHistory[it]||[]}},{key:"getPluginRunCount",value:function(j){return this.getPluginHistory(j).length}},{key:"getPluginHistoryTip",value:function(j){var it=this.getPluginHistory(j);return it&&it[it.length-1]||{}}},{key:"getPluginMutationIndex",value:function(j){var it=this.getPluginHistoryTip(j).mutationIndex;return"number"!=typeof it?-1:it}},{key:"updatePluginHistory",value:function(j,it){var mt=this.constructor.getPluginName(j);this.pluginHistory[mt]=this.pluginHistory[mt]||[],this.pluginHistory[mt].push(it)}},{key:"updatePatches",value:function(j){var it=this;co.normalizeArray(j).forEach(function(mt){if(mt instanceof Error)it.errors.push(mt);else try{if(!co.isObject(mt))return void it.debug("updatePatches","Got a non-object patch",mt);if(it.showDebug&&it.allPatches.push(mt),co.isPromise(mt.value))return it.promisedPatches.push(mt),void it.promisedPatchThen(mt);if(co.isContextPatch(mt))return void it.setContext(mt.path,mt.value);if(co.isMutation(mt))return void it.updateMutations(mt)}catch(Xt){console.error(Xt),it.errors.push(Xt)}})}},{key:"updateMutations",value:function(j){"object"===ut(j.value)&&!Array.isArray(j.value)&&this.allowMetaPatches&&(j.value=et({},j.value));var it=co.applyPatch(this.state,j,{allowMetaPatches:this.allowMetaPatches});it&&(this.mutations.push(j),this.state=it)}},{key:"removePromisedPatch",value:function(j){var it,mt=this.promisedPatches.indexOf(j);mt<0?this.debug("Tried to remove a promisedPatch that isn't there!"):cc()(it=this.promisedPatches).call(it,mt,1)}},{key:"promisedPatchThen",value:function(j){var it=this;return j.value=j.value.then(function(mt){var Xt=et(et({},j),{},{value:mt});it.removePromisedPatch(j),it.updatePatches(Xt)}).catch(function(mt){it.removePromisedPatch(j),it.updatePatches(mt)}),j.value}},{key:"getMutations",value:function(j,it){var mt;return j=j||0,"number"!=typeof it&&(it=this.mutations.length),Ws()(mt=this.mutations).call(mt,j,it)}},{key:"getCurrentMutations",value:function(){return this.getMutationsForPlugin(this.getCurrentPlugin())}},{key:"getMutationsForPlugin",value:function(j){var it=this.getPluginMutationIndex(j);return this.getMutations(it+1)}},{key:"getCurrentPlugin",value:function(){return this.currentPlugin}},{key:"getLib",value:function(){return this.libMethods}},{key:"_get",value:function(j){return co.getIn(this.state,j)}},{key:"_getContext",value:function(j){return this.contextTree.get(j)}},{key:"setContext",value:function(j,it){return this.contextTree.set(j,it)}},{key:"_hasRun",value:function(j){return this.getPluginRunCount(this.getCurrentPlugin())>(j||0)}},{key:"dispatch",value:function(){var le,j=this,it=this,mt=this.nextPlugin();if(!mt){var Xt=this.nextPromisedPatch();if(Xt)return Xt.then(function(){return j.dispatch()}).catch(function(){return j.dispatch()});var Yt={spec:this.state,errors:this.errors};return this.showDebug&&(Yt.patches=this.allPatches),bs().resolve(Yt)}if(it.pluginCount=it.pluginCount||{},it.pluginCount[mt]=(it.pluginCount[mt]||0)+1,it.pluginCount[mt]>100)return bs().resolve({spec:it.state,errors:Te()(le=it.errors).call(le,new Error("We've reached a hard limit of ".concat(100," plugin runs")))});if(mt!==this.currentPlugin&&this.promisedPatches.length){var we,Me=St()(we=this.promisedPatches).call(we,function(di){return di.value});return bs().all(St()(Me).call(Me,function(di){return di.then(tu,tu)})).then(function(){return j.dispatch()})}return function(){it.currentPlugin=mt;var di=it.getCurrentMutations(),Ri=it.mutations.length-1;try{if(mt.isGenerator){var en,ji=Dt(mt(di,it.getLib()));try{for(ji.s();!(en=ji.n()).done;)ai(en.value)}catch(rn){ji.e(rn)}finally{ji.f()}}else ai(mt(di,it.getLib()))}catch(rn){console.error(rn),ai([Pt()(Object.create(rn),{plugin:mt})])}finally{it.updatePluginHistory(mt,{mutationIndex:Ri})}return it.dispatch()}();function ai(di){di&&(di=co.fullyNormalizeArray(di),it.updatePatches(di,mt))}}}],[{key:"getPluginName",value:function(j){return j.pluginName}},{key:"getPatchesOfType",value:function(j,it){return re()(j).call(j,it)}}]),S}(),Bl={refs:qu,allOf:eh,parameters:_h,properties:Sh},nh=m(6264),ra=m.n(nh),Hl=function(H){return String.prototype.toLowerCase.call(H)},Wu=function(H){return H.replace(/[^\w]/gi,"_")};function zu(S){var H=S.openapi;return!!H&&It()(H).call(H,"3")}function ju(S,H){var j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",it=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},mt=it.v2OperationIdCompatibilityMode;if(!S||"object"!==ut(S))return null;var Xt=(S.operationId||"").replace(/\s/g,"");return Xt.length?Wu(S.operationId):Dh(H,j,{v2OperationIdCompatibilityMode:mt})}function Dh(S,H){var j,it=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},mt=it.v2OperationIdCompatibilityMode;if(mt){var Xt,Yt,le=Te()(Xt="".concat(H.toLowerCase(),"_")).call(Xt,S).replace(/[\s!@#$%^&*()_+=[{\]};:<>|./?,\\'""-]/g,"_");return(le=le||Te()(Yt="".concat(S.substring(1),"_")).call(Yt,H)).replace(/((_){2,})/g,"_").replace(/^(_)*/g,"").replace(/([_])*$/g,"")}return Te()(j="".concat(Hl(H))).call(j,Wu(S))}function Wo(S,H){var j;return Te()(j="".concat(Hl(H),"-")).call(j,S)}function ec(S,H,j){if(!S||"object"!==ut(S)||!S.paths||"object"!==ut(S.paths))return null;var it=S.paths;for(var mt in it)for(var Xt in it[mt])if("PARAMETERS"!==Xt.toUpperCase()){var Yt=it[mt][Xt];if(Yt&&"object"===ut(Yt)){var le={spec:S,pathName:mt,method:Xt.toUpperCase(),operation:Yt},we=H(le);if(j&&we)return le}}}function _l(S){var H=S.spec,j=H.paths,it={};if(!j||H.$$normalized)return S;for(var mt in j){var Xt=j[mt];if(ra()(Xt)){var Yt=Xt.parameters,le=function(ai){var di=Xt[ai];if(!ra()(di))return"continue";var Ri=ju(di,mt,ai);if(Ri){it[Ri]?it[Ri].push(di):it[Ri]=[di];var ji=it[Ri];if(ji.length>1)ji.forEach(function(js,oe){var zr;js.__originalOperationId=js.__originalOperationId||js.operationId,js.operationId=Te()(zr="".concat(Ri)).call(zr,oe+1)});else if(void 0!==di.operationId){var en=ji[0];en.__originalOperationId=en.__originalOperationId||di.operationId,en.operationId=Ri}}if("parameters"!==ai){var sn=[],Mn={};for(var rn in H)("produces"===rn||"consumes"===rn||"security"===rn)&&(Mn[rn]=H[rn],sn.push(Mn));if(Yt&&(Mn.parameters=Yt,sn.push(Mn)),sn.length){var Wr,Jr=Dt(sn);try{for(Jr.s();!(Wr=Jr.n()).done;){var as=Wr.value;for(var wo in as)if(di[wo]){if("parameters"===wo){var xs,Br=Dt(as[wo]);try{var xa=function(){var oe=xs.value;di[wo].some(function(Ys){return Ys.name&&Ys.name===oe.name||Ys.$ref&&Ys.$ref===oe.$ref||Ys.$$ref&&Ys.$$ref===oe.$$ref||Ys===oe})||di[wo].push(oe)};for(Br.s();!(xs=Br.n()).done;)xa()}catch(js){Br.e(js)}finally{Br.f()}}}else di[wo]=as[wo]}}catch(js){Jr.e(js)}finally{Jr.f()}}}};for(var we in Xt)le(we)}}return H.$$normalized=!0,S}function bu(S){var H=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},j=H.requestInterceptor,it=H.responseInterceptor,mt=S.withCredentials?"include":"same-origin";return function(Xt){return S({url:Xt,loadSpec:!0,requestInterceptor:j,responseInterceptor:it,headers:{Accept:oo},credentials:mt}).then(function(Yt){return Yt.body})}}function rh(S){var j=S.spec,mt=S.mode,Xt=S.allowMetaPatches,Yt=void 0===Xt||Xt,le=S.pathDiscriminator,we=S.modelPropertyMacro,Me=S.parameterMacro,oi=S.requestInterceptor,ai=S.responseInterceptor,di=S.skipNormalization,Ri=S.useCircularStructures,ji=S.http,en=S.baseDoc;return en=en||S.url,ji=S.fetch||ji||ac,j?sn(j):bu(ji,{requestInterceptor:oi,responseInterceptor:ai})(en).then(sn);function sn(Mn){en&&(Bl.refs.docCache[en]=Mn),Bl.refs.fetchJSON=bu(ji,{requestInterceptor:oi,responseInterceptor:ai});var rn=[Bl.refs];return"function"==typeof Me&&rn.push(Bl.parameters),"function"==typeof we&&rn.push(Bl.properties),"strict"!==mt&&rn.push(Bl.allOf),function(S){return new fa(S).dispatch()}({spec:Mn,context:{baseDoc:en},plugins:rn,allowMetaPatches:Yt,pathDiscriminator:le,parameterMacro:Me,modelPropertyMacro:we,useCircularStructures:Ri}).then(di?function(){var Jr=pe(ke().mark(function Wr(as){return ke().wrap(function(Br){for(;;)switch(Br.prev=Br.next){case 0:return Br.abrupt("return",as);case 1:case"end":return Br.stop()}},Wr)}));return function(Wr){return Jr.apply(this,arguments)}}():_l)}}var Mh=m(36817),eu=m.n(Mh);function Yu(){return Yu=pe(ke().mark(function S(H,j){var it,mt,ai,di,Ri,ji,en=arguments;return ke().wrap(function(Mn){for(;;)switch(Mn.prev=Mn.next){case 0:return mt=(it=en.length>2&&void 0!==en[2]?en[2]:{}).returnEntireTree,ai={pathDiscriminator:j,baseDoc:it.baseDoc,requestInterceptor:it.requestInterceptor,responseInterceptor:it.responseInterceptor,parameterMacro:it.parameterMacro,modelPropertyMacro:it.modelPropertyMacro,useCircularStructures:it.useCircularStructures},di=_l({spec:H}),Ri=di.spec,Mn.next=6,rh(et(et({},ai),{},{spec:Ri,allowMetaPatches:!0,skipNormalization:!0}));case 6:return ji=Mn.sent,!mt&&Array.isArray(j)&&j.length&&(ji.spec=eu()(ji.spec,j)||null),Mn.abrupt("return",ji);case 9:case"end":return Mn.stop()}},S)})),Yu.apply(this,arguments)}var Ah=function(){return null},iu_mapTagOperations=function(S){var H=S.spec,j=S.cb,it=void 0===j?Ah:j,mt=S.defaultTag,Xt=void 0===mt?"default":mt,Yt=S.v2OperationIdCompatibilityMode,le={},we={};return ec(H,function(Me){var oi=Me.pathName,ai=Me.method,di=Me.operation,Ri=di.tags?function(H){return Array.isArray(H)?H:[H]}(di.tags):[Xt];Ri.forEach(function(ji){if("string"==typeof ji){we[ji]=we[ji]||{};var rn,en=we[ji],sn=ju(di,oi,ai,{v2OperationIdCompatibilityMode:Yt}),Mn=it({spec:H,pathName:oi,method:ai,operation:di,operationId:sn});if(le[sn])le[sn]+=1,en[Te()(rn="".concat(sn)).call(rn,le[sn])]=Mn;else if(void 0!==en[sn]){var Jr,Wr,as=le[sn]||1;le[sn]=as+1,en[Te()(Jr="".concat(sn)).call(Jr,le[sn])]=Mn;var wo=en[sn];delete en[sn],en[Te()(Wr="".concat(sn)).call(Wr,as)]=wo}else en[sn]=Mn}})}),we},iu_makeExecute=function(){var S=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(H){var j=H.pathName,it=H.method,mt=H.operationId;return function(Xt){var Yt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},le=S.requestInterceptor,we=S.responseInterceptor,Me=S.userFetch;return S.execute(et({spec:S.spec,requestInterceptor:le,responseInterceptor:we,userFetch:Me,pathName:j,method:it,parameters:Xt,operationId:mt},Yt))}}},nu=m(25918);var po=m(27935),vl=m.n(po),Bc=m(88941);const vh={body:function(S){S.req.body=S.value},header:function(S){var H=S.req,j=S.parameter,it=S.value;H.headers=H.headers||{},void 0!==it&&(H.headers[j.name]=it)},query:function(S){var H=S.req,j=S.value,it=S.parameter;if(H.query=H.query||{},!1===j&&"boolean"===it.type&&(j="false"),0===j&&["number","integer"].indexOf(it.type)>-1&&(j="0"),j)H.query[it.name]={collectionFormat:it.collectionFormat,value:j};else if(it.allowEmptyValue&&void 0!==j){var mt=it.name;H.query[mt]=H.query[mt]||{},H.query[mt].allowEmptyValue=!0}},path:function(S){var H=S.req,j=S.value;H.url=H.url.split("{".concat(S.parameter.name,"}")).join(encodeURIComponent(j))},formData:function(S){var H=S.req,j=S.value,it=S.parameter;(j||it.allowEmptyValue)&&(H.form=H.form||{},H.form[it.name]={value:j,allowEmptyValue:it.allowEmptyValue,collectionFormat:it.collectionFormat})}};function L(S,H){return Di()(H).call(H,"application/json")?"string"==typeof S?S:Zt()(S):S.toString()}function Y(S){var H=S.req,j=S.value,it=S.parameter,mt=it.name,Xt=it.style,Yt=it.explode,le=it.content;if(le){var we=Ce()(le)[0];H.url=H.url.split("{".concat(mt,"}")).join(Ao(L(j,we),{escape:!0}))}else{var Me=vo({key:it.name,value:j,style:Xt||"simple",explode:Yt||!1,escape:!0});H.url=H.url.split("{".concat(mt,"}")).join(Me)}}function ht(S){var H=S.req,j=S.value,it=S.parameter;if(H.query=H.query||{},it.content){var mt=Ce()(it.content)[0];H.query[it.name]=L(j,mt)}else if(!1===j&&(j="false"),0===j&&(j="0"),j)H.query[it.name]={value:j,serializationOption:{style:it.style,explode:it.explode,allowReserved:it.allowReserved}};else if(it.allowEmptyValue&&void 0!==j){var we=it.name;H.query[we]=H.query[we]||{},H.query[we].allowEmptyValue=!0}}var wt=["accept","authorization","content-type"];function Vt(S){var H=S.req,j=S.parameter,it=S.value;if(H.headers=H.headers||{},!(wt.indexOf(j.name.toLowerCase())>-1)){if(j.content){var mt=Ce()(j.content)[0];return void(H.headers[j.name]=L(it,mt))}void 0!==it&&(H.headers[j.name]=vo({key:j.name,value:it,style:j.style||"simple",explode:void 0!==j.explode&&j.explode,escape:!1}))}}function $t(S){var H=S.req,j=S.parameter,it=S.value;H.headers=H.headers||{};var mt=ut(it);if(j.content){var Xt,Yt=Ce()(j.content)[0];H.headers.Cookie=Te()(Xt="".concat(j.name,"=")).call(Xt,L(it,Yt))}else if("undefined"!==mt){var le="object"===mt&&!Array.isArray(it)&&j.explode?"":"".concat(j.name,"=");H.headers.Cookie=le+vo({key:j.name,value:it,escape:!1,style:j.style||"form",explode:void 0!==j.explode&&j.explode})}}var Ie=m(34686),Ye=m.n(Ie);var tn=["http","fetch","spec","operationId","pathName","method","parameters","securities"],gn=function(H){return Array.isArray(H)?H:[]},Tn=Ai("OperationNotFoundError",function(H,j,it){this.originalError=it,Pt()(this,j||{})}),Vn={buildRequest:fr};function fr(S){var H,j,it=S.spec,mt=S.operationId,Xt=S.responseContentType,Yt=S.scheme,le=S.requestInterceptor,we=S.responseInterceptor,Me=S.contextUrl,oi=S.userFetch,ai=S.server,di=S.serverVariables,Ri=S.http,ji=S.parameters,en=S.parameterBuilders,sn=zu(it);en||(en=sn?e:vh);var rn={url:"",credentials:Ri&&Ri.withCredentials?"include":"same-origin",headers:{},cookies:{}};le&&(rn.requestInterceptor=le),we&&(rn.responseInterceptor=we),oi&&(rn.userFetch=oi);var Jr=function(S,H){return S&&S.paths?function(S,H){return ec(S,H,!0)||null}(S,function(j){var it=j.pathName,mt=j.method,Xt=j.operation;if(!Xt||"object"!==ut(Xt))return!1;var Yt=Xt.operationId;return[ju(Xt,it,mt),Wo(it,mt),Yt].some(function(Me){return Me&&Me===H})}):null}(it,mt);if(!Jr)throw new Tn("Operation ".concat(mt," not found"));var Wr=Jr.operation,as=void 0===Wr?{}:Wr,wo=Jr.method,Br=Jr.pathName;if(rn.url+=ss({spec:it,scheme:Yt,contextUrl:Me,server:ai,serverVariables:di,pathName:Br,method:wo}),!mt)return delete rn.cookies,rn;rn.url+=Br,rn.method="".concat(wo).toUpperCase(),ji=ji||{};var xs=it.paths[Br]||{};Xt&&(rn.headers.accept=Xt);var xa=function(H){var j={};H.forEach(function(mt){j[mt.in]||(j[mt.in]={}),j[mt.in][mt.name]=mt});var it=[];return Ce()(j).forEach(function(mt){Ce()(j[mt]).forEach(function(Xt){it.push(j[mt][Xt])})}),it}(Te()(H=Te()(j=[]).call(j,gn(as.parameters))).call(H,gn(xs.parameters)));xa.forEach(function(zr){var ga,Ec,Ys=en[zr.in];if("body"===zr.in&&zr.schema&&zr.schema.properties&&(ga=ji),void 0===(ga=zr&&zr.name&&ji[zr.name]))ga=zr&&zr.name&&ji[Te()(Ec="".concat(zr.in,".")).call(Ec,zr.name)];else if(function(H,j){return re()(j).call(j,function(it){return it.name===H})}(zr.name,xa).length>1){var Tc;console.warn(Te()(Tc="Parameter '".concat(zr.name,"' is ambiguous because the defined spec has more than one parameter with the name: '")).call(Tc,zr.name,"' and the passed-in parameter values did not define an 'in' value."))}if(null!==ga){if(void 0!==zr.default&&void 0===ga&&(ga=zr.default),void 0===ga&&zr.required&&!zr.allowEmptyValue)throw new Error("Required parameter ".concat(zr.name," is not provided"));if(sn&&zr.schema&&"object"===zr.schema.type&&"string"==typeof ga)try{ga=JSON.parse(ga)}catch(Tu){throw new Error("Could not parse object parameter value string as JSON")}Ys&&Ys({req:rn,parameter:zr,value:ga,operation:as,spec:it})}});var js=et(et({},S),{},{operation:as});if((rn=sn?function(S,H){var j=S.operation,it=S.requestBody,Yt=S.attachContentTypeForEmptyPayload,le=S.requestContentType;H=function(S){var H=S.request,j=S.securities,it=void 0===j?{}:j,mt=S.operation,Xt=void 0===mt?{}:mt,Yt=S.spec,le=et({},H),we=it.authorized,Me=void 0===we?{}:we,oi=Xt.security||Yt.security||[],ai=Me&&!!Ce()(Me).length,di=eu()(Yt,["components","securitySchemes"])||{};return le.headers=le.headers||{},le.query=le.query||{},Ce()(it).length&&ai&&oi&&(!Array.isArray(Xt.security)||Xt.security.length)?(oi.forEach(function(Ri){Ce()(Ri).forEach(function(ji){var en=Me[ji],sn=di[ji];if(en){var Mn=en.value||en,rn=sn.type;if(en)if("apiKey"===rn)"query"===sn.in&&(le.query[sn.name]=Mn),"header"===sn.in&&(le.headers[sn.name]=Mn),"cookie"===sn.in&&(le.cookies[sn.name]=Mn);else if("http"===rn){if(/^basic$/i.test(sn.scheme)){var Jr,Wr=Mn.username||"",as=Mn.password||"",wo=Ye()(Te()(Jr="".concat(Wr,":")).call(Jr,as));le.headers.Authorization="Basic ".concat(wo)}/^bearer$/i.test(sn.scheme)&&(le.headers.Authorization="Bearer ".concat(Mn))}else if("oauth2"===rn||"openIdConnect"===rn){var Br,xs=en.token||{},js=xs[sn["x-tokenName"]||"access_token"],oe=xs.token_type;(!oe||"bearer"===oe.toLowerCase())&&(oe="Bearer"),le.headers.Authorization=Te()(Br="".concat(oe," ")).call(Br,js)}}})}),le):H}({request:H,securities:S.securities,operation:j,spec:S.spec});var we=j.requestBody||{},Me=Ce()(we.content||{}),oi=le&&Me.indexOf(le)>-1;if(it||Yt){if(le&&oi)H.headers["Content-Type"]=le;else if(!le){var ai=Me[0];ai&&(H.headers["Content-Type"]=ai,le=ai)}}else le&&oi&&(H.headers["Content-Type"]=le);if(!S.responseContentType&&j.responses){var di,Ri=re()(di=ne()(j.responses)).call(di,function(en){var sn=Nt(en,2),rn=sn[1],Jr=parseInt(sn[0],10);return Jr>=200&&Jr<300&&vl()(rn.content)}).reduce(function(en,sn){var rn=Nt(sn,2)[1];return Te()(en).call(en,Ce()(rn.content))},[]);Ri.length>0&&(H.headers.accept=Ri.join(", "))}if(it)if(le){if(Me.indexOf(le)>-1)if("application/x-www-form-urlencoded"===le||"multipart/form-data"===le)if("object"===ut(it)){var ji=(we.content[le]||{}).encoding||{};H.form={},Ce()(it).forEach(function(en){H.form[en]={value:it[en],encoding:ji[en]||{}}})}else H.form=it;else H.body=it}else H.body=it;return H}(js,rn):function(S,H){var we,Me,j=S.spec,it=S.operation,Xt=S.requestContentType,Yt=S.responseContentType,le=S.attachContentTypeForEmptyPayload;if(H=function(S){var H=S.request,j=S.securities,it=void 0===j?{}:j,mt=S.operation,Xt=void 0===mt?{}:mt,Yt=S.spec,le=et({},H),we=it.authorized,Me=void 0===we?{}:we,oi=it.specSecurity,di=Xt.security||(void 0===oi?[]:oi),Ri=Me&&!!Ce()(Me).length,ji=Yt.securityDefinitions;return le.headers=le.headers||{},le.query=le.query||{},Ce()(it).length&&Ri&&di&&(!Array.isArray(Xt.security)||Xt.security.length)?(di.forEach(function(en){Ce()(en).forEach(function(sn){var Mn=Me[sn];if(Mn){var rn=Mn.token,Jr=Mn.value||Mn,Wr=ji[sn],as=Wr.type,Br=rn&&rn[Wr["x-tokenName"]||"access_token"],xs=rn&&rn.token_type;if(Mn)if("apiKey"===as){var xa="query"===Wr.in?"query":"headers";le[xa]=le[xa]||{},le[xa][Wr.name]=Jr}else if("basic"===as)if(Jr.header)le.headers.authorization=Jr.header;else{var js,oe=Jr.username||"",zr=Jr.password||"";Jr.base64=Ye()(Te()(js="".concat(oe,":")).call(js,zr)),le.headers.authorization="Basic ".concat(Jr.base64)}else if("oauth2"===as&&Br){var Ys;xs=xs&&"bearer"!==xs.toLowerCase()?xs:"Bearer",le.headers.authorization=Te()(Ys="".concat(xs," ")).call(Ys,Br)}}})}),le):H}({request:H,securities:S.securities,operation:it,spec:j}),H.body||H.form||le)if(Xt)H.headers["Content-Type"]=Xt;else if(Array.isArray(it.consumes)){var oi=Nt(it.consumes,1);H.headers["Content-Type"]=oi[0]}else if(Array.isArray(j.consumes)){var ai=Nt(j.consumes,1);H.headers["Content-Type"]=ai[0]}else it.parameters&&re()(we=it.parameters).call(we,function(sn){return"file"===sn.type}).length?H.headers["Content-Type"]="multipart/form-data":it.parameters&&re()(Me=it.parameters).call(Me,function(sn){return"formData"===sn.in}).length&&(H.headers["Content-Type"]="application/x-www-form-urlencoded");else if(Xt){var di,Ri,ji=it.parameters&&re()(di=it.parameters).call(di,function(sn){return"body"===sn.in}).length>0,en=it.parameters&&re()(Ri=it.parameters).call(Ri,function(sn){return"formData"===sn.in}).length>0;(ji||en)&&(H.headers["Content-Type"]=Xt)}return!Yt&&Array.isArray(it.produces)&&it.produces.length>0&&(H.headers.accept=it.produces.join(", ")),H}(js,rn)).cookies&&Ce()(rn.cookies).length){var oe=Ce()(rn.cookies).reduce(function(zr,Ys){return zr+(zr?"&":"")+Bc.serialize(Ys,rn.cookies[Ys])},"");rn.headers.Cookie=oe}return rn.cookies&&delete rn.cookies,Wa(rn),rn}var io=function(H){return H?H.replace(/\W/g,""):null};function ss(S){return zu(S.spec)?function(S){var H=S.spec,j=S.pathName,it=S.method,mt=S.server,Xt=S.contextUrl,Yt=S.serverVariables,le=void 0===Yt?{}:Yt,we=eu()(H,["paths",j,(it||"").toLowerCase(),"servers"])||eu()(H,["paths",j,"servers"])||eu()(H,["servers"]),Me="",oi=null;if(mt&&we&&we.length){var ai=St()(we).call(we,function(ji){return ji.url});ai.indexOf(mt)>-1&&(Me=mt,oi=we[ai.indexOf(mt)])}if(!Me&&we&&we.length){Me=we[0].url;var di=Nt(we,1);oi=di[0]}if(Me.indexOf("{")>-1){var Ri=function(S){for(var it,H=[],j=/{([^}]+)}/g;it=j.exec(S);)H.push(it[1]);return H}(Me);Ri.forEach(function(ji){if(oi.variables&&oi.variables[ji]){var sn=le[ji]||oi.variables[ji].default,Mn=new RegExp("{".concat(ji,"}"),"g");Me=Me.replace(Mn,sn)}})}return function(){var le,we,S=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",H=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",j=Ht.parse(S&&H?Ht.resolve(H,S):S),it=Ht.parse(H),mt=io(j.protocol)||io(it.protocol)||"",Xt=j.host||it.host,Yt=j.pathname||"";return"/"===(le=mt&&Xt?Te()(we="".concat(mt,"://")).call(we,Xt+Yt):Yt)[le.length-1]?Ws()(le).call(le,0,-1):le}(Me,Xt)}(S):function(S){var oi,ai,H=S.spec,j=S.scheme,it=S.contextUrl,Xt=Ht.parse(void 0===it?"":it),Yt=Array.isArray(H.schemes)?H.schemes[0]:null,le=j||Yt||io(Xt.protocol)||"http",we=H.host||Xt.host||"",Me=H.basePath||"";return"/"===(oi=le&&we?Te()(ai="".concat(le,"://")).call(ai,we+Me):Me)[oi.length-1]?Ws()(oi).call(oi,0,-1):oi}(S)}function Kr(S){var H=this,j=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof S?j.url=S:j=S,!(this instanceof Kr))return new Kr(j);Pt()(this,j);var it=this.resolve().then(function(){return H.disableInterfaces||Pt()(H,Kr.makeApisTagOperation(H)),H});return it.client=this,it}Kr.makeHttp=function(S,H,j){return j=j||function(it){return it},H=H||function(it){return it},function(it){return"string"==typeof it&&(it={url:it}),Au.mergeInQueryOrForm(it),it=H(it),j(S(it))}}.bind(null,Kr.http=ac),Kr.resolve=rh,Kr.resolveSubtree=function(S,H){return Yu.apply(this,arguments)},Kr.execute=function(S){var H=S.http,j=S.fetch,it=S.spec,mt=S.operationId,Xt=S.pathName,Yt=S.method,le=S.parameters,we=S.securities,Me=function(S,H){if(null==S)return{};var it,mt,j=function(S,H){if(null==S)return{};var mt,Xt,j={},it=t(S);for(Xt=0;Xt<it.length;Xt++)mt=it[Xt],!(nu(H).call(H,mt)>=0)&&(j[mt]=S[mt]);return j}(S,H);if(n){var Xt=n(S);for(mt=0;mt<Xt.length;mt++)it=Xt[mt],!(nu(H).call(H,it)>=0)&&(!Object.prototype.propertyIsEnumerable.call(S,it)||(j[it]=S[it]))}return j}(S,tn),oi=H||j||ac;Xt&&Yt&&!mt&&(mt=Wo(Xt,Yt));var ai=Vn.buildRequest(et({spec:it,operationId:mt,parameters:le,securities:we,http:oi},Me));return ai.body&&(vl()(ai.body)||Array.isArray(ai.body))&&(ai.body=Zt()(ai.body)),oi(ai)},Kr.serializeRes=Qu,Kr.serializeHeaders=au,Kr.clearCache=function(){Bl.refs.clearCache()},Kr.makeApisTagOperation=function(){var S=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},H=iu_makeExecute(S);return{apis:iu_mapTagOperations({v2OperationIdCompatibilityMode:S.v2OperationIdCompatibilityMode,spec:S.spec,cb:H})}},Kr.buildRequest=fr,Kr.helpers={opId:ju},Kr.getBaseUrl=ss,(Kr.prototype={http:ac,execute:function(H){return this.applyDefaults(),Kr.execute(et({spec:this.spec,http:this.http,securities:{authorized:this.authorizations},contextUrl:"string"==typeof this.url?this.url:void 0,requestInterceptor:this.requestInterceptor||null,responseInterceptor:this.responseInterceptor||null},H))},resolve:function(){var H=this,j=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Kr.resolve(et({spec:this.spec,url:this.url,http:this.http||this.fetch,allowMetaPatches:this.allowMetaPatches,useCircularStructures:this.useCircularStructures,requestInterceptor:this.requestInterceptor||null,responseInterceptor:this.responseInterceptor||null,skipNormalization:this.skipNormalization||!1},j)).then(function(it){return H.originalSpec=H.spec,H.spec=it.spec,H.errors=it.errors,H})}}).applyDefaults=function(){var H=this.spec,j=this.url;if(j&&It()(j).call(j,"http")){var it=Ht.parse(j);H.host||(H.host=it.host),H.schemes||(H.schemes=[it.protocol.replace(":","")]),H.basePath||(H.basePath="/")}};var zs=Kr.helpers;const Os=Kr},31365:U=>{"use strict";var $=String.prototype.replace,m=/%20/g;U.exports={default:"RFC3986",formatters:{RFC1738:function(_){return $.call(_,m,"+")},RFC3986:function(_){return String(_)}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},7029:(U,$,m)=>{"use strict";var T=m(21333),_=m(62127),e=m(31365);U.exports={formats:e,parse:_,stringify:T}},62127:(U,$,m)=>{"use strict";var T=m(7260),_=Object.prototype.hasOwnProperty,e=Array.isArray,t={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:T.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},r=function(ot,et){return ot&&"string"==typeof ot&&et.comma&&ot.indexOf(",")>-1?ot.split(","):ot},B=function(et,Tt,Pt,pt){if(et){var It=Pt.allowDots?et.replace(/\.([^.[]+)/g,"[$1]"):et,Jt=/(\[[^[\]]*])/g,Ct=Pt.depth>0&&/(\[[^[\]]*])/.exec(It),bt=Ct?It.slice(0,Ct.index):It,st=[];if(bt){if(!Pt.plainObjects&&_.call(Object.prototype,bt)&&!Pt.allowPrototypes)return;st.push(bt)}for(var gt=0;Pt.depth>0&&null!==(Ct=Jt.exec(It))&&gt<Pt.depth;){if(gt+=1,!Pt.plainObjects&&_.call(Object.prototype,Ct[1].slice(1,-1))&&!Pt.allowPrototypes)return;st.push(Ct[1])}return Ct&&st.push("["+It.slice(Ct.index)+"]"),function(ot,et,Tt,Pt){for(var pt=Pt?et:r(et,Tt),It=ot.length-1;It>=0;--It){var Ht,Jt=ot[It];if("[]"===Jt&&Tt.parseArrays)Ht=[].concat(pt);else{Ht=Tt.plainObjects?Object.create(null):{};var Ct="["===Jt.charAt(0)&&"]"===Jt.charAt(Jt.length-1)?Jt.slice(1,-1):Jt,bt=parseInt(Ct,10);Tt.parseArrays||""!==Ct?!isNaN(bt)&&Jt!==Ct&&String(bt)===Ct&&bt>=0&&Tt.parseArrays&&bt<=Tt.arrayLimit?(Ht=[])[bt]=pt:Ht[Ct]=pt:Ht={0:pt}}pt=Ht}return pt}(st,Tt,Pt,pt)}};U.exports=function(ot,et){var Tt=function(et){if(!et)return t;if(null!=et.decoder&&"function"!=typeof et.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==et.charset&&"utf-8"!==et.charset&&"iso-8859-1"!==et.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");return{allowDots:void 0===et.allowDots?t.allowDots:!!et.allowDots,allowPrototypes:"boolean"==typeof et.allowPrototypes?et.allowPrototypes:t.allowPrototypes,allowSparse:"boolean"==typeof et.allowSparse?et.allowSparse:t.allowSparse,arrayLimit:"number"==typeof et.arrayLimit?et.arrayLimit:t.arrayLimit,charset:void 0===et.charset?t.charset:et.charset,charsetSentinel:"boolean"==typeof et.charsetSentinel?et.charsetSentinel:t.charsetSentinel,comma:"boolean"==typeof et.comma?et.comma:t.comma,decoder:"function"==typeof et.decoder?et.decoder:t.decoder,delimiter:"string"==typeof et.delimiter||T.isRegExp(et.delimiter)?et.delimiter:t.delimiter,depth:"number"==typeof et.depth||!1===et.depth?+et.depth:t.depth,ignoreQueryPrefix:!0===et.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof et.interpretNumericEntities?et.interpretNumericEntities:t.interpretNumericEntities,parameterLimit:"number"==typeof et.parameterLimit?et.parameterLimit:t.parameterLimit,parseArrays:!1!==et.parseArrays,plainObjects:"boolean"==typeof et.plainObjects?et.plainObjects:t.plainObjects,strictNullHandling:"boolean"==typeof et.strictNullHandling?et.strictNullHandling:t.strictNullHandling}}(et);if(""===ot||null==ot)return Tt.plainObjects?Object.create(null):{};for(var Pt="string"==typeof ot?function(et,Tt){var Ct,Pt={},Ht=(Tt.ignoreQueryPrefix?et.replace(/^\?/,""):et).split(Tt.delimiter,Tt.parameterLimit===1/0?void 0:Tt.parameterLimit),Jt=-1,bt=Tt.charset;if(Tt.charsetSentinel)for(Ct=0;Ct<Ht.length;++Ct)0===Ht[Ct].indexOf("utf8=")&&("utf8=%E2%9C%93"===Ht[Ct]?bt="utf-8":"utf8=%26%2310003%3B"===Ht[Ct]&&(bt="iso-8859-1"),Jt=Ct,Ct=Ht.length);for(Ct=0;Ct<Ht.length;++Ct)if(Ct!==Jt){var Bt,Dt,st=Ht[Ct],gt=st.indexOf("]="),lt=-1===gt?st.indexOf("="):gt+1;-1===lt?(Bt=Tt.decoder(st,t.decoder,bt,"key"),Dt=Tt.strictNullHandling?null:""):(Bt=Tt.decoder(st.slice(0,lt),t.decoder,bt,"key"),Dt=T.maybeMap(r(st.slice(lt+1),Tt),function(Et){return Tt.decoder(Et,t.decoder,bt,"value")})),Dt&&Tt.interpretNumericEntities&&"iso-8859-1"===bt&&(Dt=Dt.replace(/&#(\d+);/g,function(et,Tt){return String.fromCharCode(parseInt(Tt,10))})),st.indexOf("[]=")>-1&&(Dt=e(Dt)?[Dt]:Dt),Pt[Bt]=_.call(Pt,Bt)?T.combine(Pt[Bt],Dt):Dt}return Pt}(ot,Tt):ot,pt=Tt.plainObjects?Object.create(null):{},It=Object.keys(Pt),Ht=0;Ht<It.length;++Ht){var Jt=It[Ht],Ct=B(Jt,Pt[Jt],Tt,"string"==typeof ot);pt=T.merge(pt,Ct,Tt)}return!0===Tt.allowSparse?pt:T.compact(pt)}},21333:(U,$,m)=>{"use strict";var T=m(83030),_=m(7260),e=m(31365),t=Object.prototype.hasOwnProperty,n={brackets:function(It){return It+"[]"},comma:"comma",indices:function(It,Ht){return It+"["+Ht+"]"},repeat:function(It){return It}},r=Array.isArray,s=String.prototype.split,u=Array.prototype.push,b=function(pt,It){u.apply(pt,r(It)?It:[It])},x=Date.prototype.toISOString,B=e.default,Z={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:_.encode,encodeValuesOnly:!1,format:B,formatter:e.formatters[B],indices:!1,serializeDate:function(It){return x.call(It)},skipNulls:!1,strictNullHandling:!1},et={},Tt=function pt(It,Ht,Jt,Ct,bt,st,gt,lt,Bt,Dt,Et,ut,rt,fe,Mt){for(var Nt=It,ge=Mt,ve=0,pe=!1;void 0!==(ge=ge.get(et))&&!pe;){var He=ge.get(It);if(ve+=1,void 0!==He){if(He===ve)throw new RangeError("Cyclic object value");pe=!0}void 0===ge.get(et)&&(ve=0)}if("function"==typeof gt?Nt=gt(Ht,Nt):Nt instanceof Date?Nt=Dt(Nt):"comma"===Jt&&r(Nt)&&(Nt=_.maybeMap(Nt,function(Ce){return Ce instanceof Date?Dt(Ce):Ce})),null===Nt){if(Ct)return st&&!rt?st(Ht,Z.encoder,fe,"key",Et):Ht;Nt=""}if(function(It){return"string"==typeof It||"number"==typeof It||"boolean"==typeof It||"symbol"==typeof It||"bigint"==typeof It}(Nt)||_.isBuffer(Nt)){if(st){var ke=rt?Ht:st(Ht,Z.encoder,fe,"key",Et);if("comma"===Jt&&rt){for(var Ze=s.call(String(Nt),","),Di="",$e=0;$e<Ze.length;++$e)Di+=(0===$e?"":",")+ut(st(Ze[$e],Z.encoder,fe,"value",Et));return[ut(ke)+"="+Di]}return[ut(ke)+"="+ut(st(Nt,Z.encoder,fe,"value",Et))]}return[ut(Ht)+"="+ut(String(Nt))]}var pi,Le=[];if(void 0===Nt)return Le;if("comma"===Jt&&r(Nt))pi=[{value:Nt.length>0?Nt.join(",")||null:void 0}];else if(r(gt))pi=gt;else{var Gt=Object.keys(Nt);pi=lt?Gt.sort(lt):Gt}for(var Se=0;Se<pi.length;++Se){var Zt=pi[Se],ie="object"==typeof Zt&&void 0!==Zt.value?Zt.value:Nt[Zt];if(!bt||null!==ie){var St=r(Nt)?"function"==typeof Jt?Jt(Ht,Zt):Ht:Ht+(Bt?"."+Zt:"["+Zt+"]");Mt.set(It,ve);var jt=T();jt.set(et,Mt),b(Le,pt(ie,St,Jt,Ct,bt,st,gt,lt,Bt,Dt,Et,ut,rt,fe,jt))}}return Le};U.exports=function(pt,It){var Ct,Ht=pt,Jt=function(It){if(!It)return Z;if(null!=It.encoder&&"function"!=typeof It.encoder)throw new TypeError("Encoder has to be a function.");var Ht=It.charset||Z.charset;if(void 0!==It.charset&&"utf-8"!==It.charset&&"iso-8859-1"!==It.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var Jt=e.default;if(void 0!==It.format){if(!t.call(e.formatters,It.format))throw new TypeError("Unknown format option provided.");Jt=It.format}var Ct=e.formatters[Jt],bt=Z.filter;return("function"==typeof It.filter||r(It.filter))&&(bt=It.filter),{addQueryPrefix:"boolean"==typeof It.addQueryPrefix?It.addQueryPrefix:Z.addQueryPrefix,allowDots:void 0===It.allowDots?Z.allowDots:!!It.allowDots,charset:Ht,charsetSentinel:"boolean"==typeof It.charsetSentinel?It.charsetSentinel:Z.charsetSentinel,delimiter:void 0===It.delimiter?Z.delimiter:It.delimiter,encode:"boolean"==typeof It.encode?It.encode:Z.encode,encoder:"function"==typeof It.encoder?It.encoder:Z.encoder,encodeValuesOnly:"boolean"==typeof It.encodeValuesOnly?It.encodeValuesOnly:Z.encodeValuesOnly,filter:bt,format:Jt,formatter:Ct,serializeDate:"function"==typeof It.serializeDate?It.serializeDate:Z.serializeDate,skipNulls:"boolean"==typeof It.skipNulls?It.skipNulls:Z.skipNulls,sort:"function"==typeof It.sort?It.sort:null,strictNullHandling:"boolean"==typeof It.strictNullHandling?It.strictNullHandling:Z.strictNullHandling}}(It);"function"==typeof Jt.filter?Ht=(0,Jt.filter)("",Ht):r(Jt.filter)&&(Ct=Jt.filter);var st=[];if("object"!=typeof Ht||null===Ht)return"";var lt=n[It&&It.arrayFormat in n?It.arrayFormat:It&&"indices"in It?It.indices?"indices":"repeat":"indices"];Ct||(Ct=Object.keys(Ht)),Jt.sort&&Ct.sort(Jt.sort);for(var Bt=T(),Dt=0;Dt<Ct.length;++Dt){var Et=Ct[Dt];Jt.skipNulls&&null===Ht[Et]||b(st,Tt(Ht[Et],Et,lt,Jt.strictNullHandling,Jt.skipNulls,Jt.encode?Jt.encoder:null,Jt.filter,Jt.sort,Jt.allowDots,Jt.serializeDate,Jt.format,Jt.formatter,Jt.encodeValuesOnly,Jt.charset,Bt))}var ut=st.join(Jt.delimiter),rt=!0===Jt.addQueryPrefix?"?":"";return Jt.charsetSentinel&&(rt+="iso-8859-1"===Jt.charset?"utf8=%26%2310003%3B&":"utf8=%E2%9C%93&"),ut.length>0?rt+ut:""}},7260:(U,$,m)=>{"use strict";var T=m(31365),_=Object.prototype.hasOwnProperty,e=Array.isArray,t=function(){for(var Pt=[],pt=0;pt<256;++pt)Pt.push("%"+((pt<16?"0":"")+pt.toString(16)).toUpperCase());return Pt}(),r=function(pt,It){for(var Ht=It&&It.plainObjects?Object.create(null):{},Jt=0;Jt<pt.length;++Jt)void 0!==pt[Jt]&&(Ht[Jt]=pt[Jt]);return Ht};U.exports={arrayToObject:r,assign:function(pt,It){return Object.keys(It).reduce(function(Ht,Jt){return Ht[Jt]=It[Jt],Ht},pt)},combine:function(pt,It){return[].concat(pt,It)},compact:function(pt){for(var It=[{obj:{o:pt},prop:"o"}],Ht=[],Jt=0;Jt<It.length;++Jt)for(var Ct=It[Jt],bt=Ct.obj[Ct.prop],st=Object.keys(bt),gt=0;gt<st.length;++gt){var lt=st[gt],Bt=bt[lt];"object"==typeof Bt&&null!==Bt&&-1===Ht.indexOf(Bt)&&(It.push({obj:bt,prop:lt}),Ht.push(Bt))}return function(pt){for(;pt.length>1;){var It=pt.pop(),Ht=It.obj[It.prop];if(e(Ht)){for(var Jt=[],Ct=0;Ct<Ht.length;++Ct)void 0!==Ht[Ct]&&Jt.push(Ht[Ct]);It.obj[It.prop]=Jt}}}(It),pt},decode:function(Pt,pt,It){var Ht=Pt.replace(/\+/g," ");if("iso-8859-1"===It)return Ht.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(Ht)}catch(Jt){return Ht}},encode:function(pt,It,Ht,Jt,Ct){if(0===pt.length)return pt;var bt=pt;if("symbol"==typeof pt?bt=Symbol.prototype.toString.call(pt):"string"!=typeof pt&&(bt=String(pt)),"iso-8859-1"===Ht)return escape(bt).replace(/%u[0-9a-f]{4}/gi,function(Bt){return"%26%23"+parseInt(Bt.slice(2),16)+"%3B"});for(var st="",gt=0;gt<bt.length;++gt){var lt=bt.charCodeAt(gt);45===lt||46===lt||95===lt||126===lt||lt>=48&&lt<=57||lt>=65&&lt<=90||lt>=97&&lt<=122||Ct===T.RFC1738&&(40===lt||41===lt)?st+=bt.charAt(gt):lt<128?st+=t[lt]:lt<2048?st+=t[192|lt>>6]+t[128|63&lt]:lt<55296||lt>=57344?st+=t[224|lt>>12]+t[128|lt>>6&63]+t[128|63&lt]:(lt=65536+((1023&lt)<<10|1023&bt.charCodeAt(gt+=1)),st+=t[240|lt>>18]+t[128|lt>>12&63]+t[128|lt>>6&63]+t[128|63&lt])}return st},isBuffer:function(pt){return!(!pt||"object"!=typeof pt||!(pt.constructor&&pt.constructor.isBuffer&&pt.constructor.isBuffer(pt)))},isRegExp:function(pt){return"[object RegExp]"===Object.prototype.toString.call(pt)},maybeMap:function(pt,It){if(e(pt)){for(var Ht=[],Jt=0;Jt<pt.length;Jt+=1)Ht.push(It(pt[Jt]));return Ht}return It(pt)},merge:function Pt(pt,It,Ht){if(!It)return pt;if("object"!=typeof It){if(e(pt))pt.push(It);else{if(!pt||"object"!=typeof pt)return[pt,It];(Ht&&(Ht.plainObjects||Ht.allowPrototypes)||!_.call(Object.prototype,It))&&(pt[It]=!0)}return pt}if(!pt||"object"!=typeof pt)return[pt].concat(It);var Jt=pt;return e(pt)&&!e(It)&&(Jt=r(pt,Ht)),e(pt)&&e(It)?(It.forEach(function(Ct,bt){if(_.call(pt,bt)){var st=pt[bt];st&&"object"==typeof st&&Ct&&"object"==typeof Ct?pt[bt]=Pt(st,Ct,Ht):pt.push(Ct)}else pt[bt]=Ct}),pt):Object.keys(It).reduce(function(Ct,bt){var st=It[bt];return Ct[bt]=_.call(Ct,bt)?Pt(Ct[bt],st,Ht):st,Ct},Jt)}}},3394:U=>{var $=U.exports=function(et){return new m(et)};function m(et){this.value=et}function T(et,Tt,Pt){var pt=[],It=[],Ht=!0;return function Jt(Ct){var bt=Pt?_(Ct):Ct,st={},gt=!0,lt={node:bt,node_:Ct,path:[].concat(pt),parent:It[It.length-1],parents:It,key:pt.slice(-1)[0],isRoot:0===pt.length,level:pt.length,circular:null,update:function(Et,ut){lt.isRoot||(lt.parent.node[lt.key]=Et),lt.node=Et,ut&&(gt=!1)},delete:function(Et){delete lt.parent.node[lt.key],Et&&(gt=!1)},remove:function(Et){B(lt.parent.node)?lt.parent.node.splice(lt.key,1):delete lt.parent.node[lt.key],Et&&(gt=!1)},keys:null,before:function(Et){st.before=Et},after:function(Et){st.after=Et},pre:function(Et){st.pre=Et},post:function(Et){st.post=Et},stop:function(){Ht=!1},block:function(){gt=!1}};if(!Ht)return lt;function Bt(){if("object"==typeof lt.node&&null!==lt.node){(!lt.keys||lt.node_!==lt.node)&&(lt.keys=e(lt.node)),lt.isLeaf=0==lt.keys.length;for(var Et=0;Et<It.length;Et++)if(It[Et].node_===Ct){lt.circular=It[Et];break}}else lt.isLeaf=!0,lt.keys=null;lt.notLeaf=!lt.isLeaf,lt.notRoot=!lt.isRoot}Bt();var Dt=Tt.call(lt,lt.node);return void 0!==Dt&&lt.update&&lt.update(Dt),st.before&&st.before.call(lt,lt.node),gt&&("object"==typeof lt.node&&null!==lt.node&&!lt.circular&&(It.push(lt),Bt(),Z(lt.keys,function(Et,ut){pt.push(Et),st.pre&&st.pre.call(lt,lt.node[Et],Et);var rt=Jt(lt.node[Et]);Pt&&ot.call(lt.node,Et)&&(lt.node[Et]=rt.node),rt.isLast=ut==lt.keys.length-1,rt.isFirst=0==ut,st.post&&st.post.call(lt,rt),pt.pop()}),It.pop()),st.after&&st.after.call(lt,lt.node)),lt}(et).node}function _(et){if("object"==typeof et&&null!==et){var Tt;if(B(et))Tt=[];else if(function(et){return"[object Date]"===t(et)}(et))Tt=new Date(et.getTime?et.getTime():et);else if(function(et){return"[object RegExp]"===t(et)}(et))Tt=new RegExp(et);else if(function(et){return"[object Error]"===t(et)}(et))Tt={message:et.message};else if(function(et){return"[object Boolean]"===t(et)}(et))Tt=new Boolean(et);else if(function(et){return"[object Number]"===t(et)}(et))Tt=new Number(et);else if(function(et){return"[object String]"===t(et)}(et))Tt=new String(et);else if(Object.create&&Object.getPrototypeOf)Tt=Object.create(Object.getPrototypeOf(et));else if(et.constructor===Object)Tt={};else{var pt=function(){};pt.prototype=et.constructor&&et.constructor.prototype||et.__proto__||{},Tt=new pt}return Z(e(et),function(It){Tt[It]=et[It]}),Tt}return et}m.prototype.get=function(et){for(var Tt=this.value,Pt=0;Pt<et.length;Pt++){var pt=et[Pt];if(!Tt||!ot.call(Tt,pt)){Tt=void 0;break}Tt=Tt[pt]}return Tt},m.prototype.has=function(et){for(var Tt=this.value,Pt=0;Pt<et.length;Pt++){var pt=et[Pt];if(!Tt||!ot.call(Tt,pt))return!1;Tt=Tt[pt]}return!0},m.prototype.set=function(et,Tt){for(var Pt=this.value,pt=0;pt<et.length-1;pt++){var It=et[pt];ot.call(Pt,It)||(Pt[It]={}),Pt=Pt[It]}return Pt[et[pt]]=Tt,Tt},m.prototype.map=function(et){return T(this.value,et,!0)},m.prototype.forEach=function(et){return this.value=T(this.value,et,!1),this.value},m.prototype.reduce=function(et,Tt){var Pt=1===arguments.length,pt=Pt?this.value:Tt;return this.forEach(function(It){(!this.isRoot||!Pt)&&(pt=et.call(this,pt,It))}),pt},m.prototype.paths=function(){var et=[];return this.forEach(function(Tt){et.push(this.path)}),et},m.prototype.nodes=function(){var et=[];return this.forEach(function(Tt){et.push(this.node)}),et},m.prototype.clone=function(){var et=[],Tt=[];return function Pt(pt){for(var It=0;It<et.length;It++)if(et[It]===pt)return Tt[It];if("object"==typeof pt&&null!==pt){var Ht=_(pt);return et.push(pt),Tt.push(Ht),Z(e(pt),function(Jt){Ht[Jt]=Pt(pt[Jt])}),et.pop(),Tt.pop(),Ht}return pt}(this.value)};var e=Object.keys||function(Tt){var Pt=[];for(var pt in Tt)Pt.push(pt);return Pt};function t(et){return Object.prototype.toString.call(et)}var B=Array.isArray||function(Tt){return"[object Array]"===Object.prototype.toString.call(Tt)},Z=function(et,Tt){if(et.forEach)return et.forEach(Tt);for(var Pt=0;Pt<et.length;Pt++)Tt(et[Pt],Pt,et)};Z(e(m.prototype),function(et){$[et]=function(Tt){var Pt=[].slice.call(arguments,1),pt=new m(Tt);return pt[et].apply(pt,Pt)}});var ot=Object.hasOwnProperty||function(et,Tt){return Tt in et}},86370:function(U,$,m){var T;U=m.nmd(U),function(_){"object"==typeof global&&global;var r,s=2147483647,u=36,Pt=/^xn--/,pt=/[^\x20-\x7E]/,It=/[\x2E\u3002\uFF0E\uFF61]/g,Ht={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Ct=Math.floor,bt=String.fromCharCode;function gt(pe){throw RangeError(Ht[pe])}function lt(pe,He){for(var ke=pe.length,Ze=[];ke--;)Ze[ke]=He(pe[ke]);return Ze}function Bt(pe,He){var ke=pe.split("@"),Ze="";return ke.length>1&&(Ze=ke[0]+"@",pe=ke[1]),Ze+lt((pe=pe.replace(It,".")).split("."),He).join(".")}function Dt(pe){for(var Di,$e,He=[],ke=0,Ze=pe.length;ke<Ze;)(Di=pe.charCodeAt(ke++))>=55296&&Di<=56319&&ke<Ze?56320==(64512&($e=pe.charCodeAt(ke++)))?He.push(((1023&Di)<<10)+(1023&$e)+65536):(He.push(Di),ke--):He.push(Di);return He}function Et(pe){return lt(pe,function(He){var ke="";return He>65535&&(ke+=bt((He-=65536)>>>10&1023|55296),He=56320|1023&He),ke+bt(He)}).join("")}function ut(pe){return pe-48<10?pe-22:pe-65<26?pe-65:pe-97<26?pe-97:u}function rt(pe,He){return pe+22+75*(pe<26)-((0!=He)<<5)}function fe(pe,He,ke){var Ze=0;for(pe=ke?Ct(pe/700):pe>>1,pe+=Ct(pe/He);pe>455;Ze+=u)pe=Ct(pe/35);return Ct(Ze+36*pe/(pe+38))}function Mt(pe){var Ze,pi,Gt,Se,Zt,ie,St,jt,Ce,ri,He=[],ke=pe.length,Di=0,$e=128,Le=72;for((pi=pe.lastIndexOf("-"))<0&&(pi=0),Gt=0;Gt<pi;++Gt)pe.charCodeAt(Gt)>=128&&gt("not-basic"),He.push(pe.charCodeAt(Gt));for(Se=pi>0?pi+1:0;Se<ke;){for(Zt=Di,ie=1,St=u;Se>=ke&&gt("invalid-input"),((jt=ut(pe.charCodeAt(Se++)))>=u||jt>Ct((s-Di)/ie))&&gt("overflow"),Di+=jt*ie,!(jt<(Ce=St<=Le?1:St>=Le+26?26:St-Le));St+=u)ie>Ct(s/(ri=u-Ce))&&gt("overflow"),ie*=ri;Le=fe(Di-Zt,Ze=He.length+1,0==Zt),Ct(Di/Ze)>s-$e&&gt("overflow"),$e+=Ct(Di/Ze),Di%=Ze,He.splice(Di++,0,$e)}return Et(He)}function Nt(pe){var He,ke,Ze,Di,$e,Le,pi,Gt,Se,Zt,ie,jt,Ce,ri,Te,St=[];for(jt=(pe=Dt(pe)).length,He=128,ke=0,$e=72,Le=0;Le<jt;++Le)(ie=pe[Le])<128&&St.push(bt(ie));for(Ze=Di=St.length,Di&&St.push("-");Ze<jt;){for(pi=s,Le=0;Le<jt;++Le)(ie=pe[Le])>=He&&ie<pi&&(pi=ie);for(pi-He>Ct((s-ke)/(Ce=Ze+1))&&gt("overflow"),ke+=(pi-He)*Ce,He=pi,Le=0;Le<jt;++Le)if((ie=pe[Le])<He&&++ke>s&&gt("overflow"),ie==He){for(Gt=ke,Se=u;!(Gt<(Zt=Se<=$e?1:Se>=$e+26?26:Se-$e));Se+=u)St.push(bt(rt(Zt+(Te=Gt-Zt)%(ri=u-Zt),0))),Gt=Ct(Te/ri);St.push(bt(rt(Gt,0))),$e=fe(ke,Ce,Ze==Di),ke=0,++Ze}++ke,++He}return St.join("")}r={version:"1.3.2",ucs2:{decode:Dt,encode:Et},decode:Mt,encode:Nt,toASCII:function(pe){return Bt(pe,function(He){return pt.test(He)?"xn--"+Nt(He):He})},toUnicode:function(pe){return Bt(pe,function(He){return Pt.test(He)?Mt(He.slice(4).toLowerCase()):He})}},void 0!==(T=function(){return r}.call($,m,$,U))&&(U.exports=T)}()},20434:(U,$,m)=>{"use strict";var T=m(86370),_=m(16906);function e(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}$.parse=Ht,$.resolve=function(st,gt){return Ht(st,!1,!0).resolve(gt)},$.resolveObject=function(st,gt){return st?Ht(st,!1,!0).resolveObject(gt):gt},$.format=function(st){return _.isString(st)&&(st=Ht(st)),st instanceof e?st.format():e.prototype.format.call(st)},$.Url=e;var t=/^([a-z0-9.+-]+:)/i,n=/:[0-9]*$/,r=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,u=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),b=["'"].concat(u),x=["%","/","?",";","#"].concat(b),B=["/","?","#"],ot=/^[+a-z0-9A-Z_-]{0,63}$/,et=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Tt={javascript:!0,"javascript:":!0},Pt={javascript:!0,"javascript:":!0},pt={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},It=m(10569);function Ht(st,gt,lt){if(st&&_.isObject(st)&&st instanceof e)return st;var Bt=new e;return Bt.parse(st,gt,lt),Bt}e.prototype.parse=function(st,gt,lt){if(!_.isString(st))throw new TypeError("Parameter 'url' must be a string, not "+typeof st);var Bt=st.indexOf("?"),Dt=-1!==Bt&&Bt<st.indexOf("#")?"?":"#",Et=st.split(Dt);Et[0]=Et[0].replace(/\\/g,"/");var rt=st=Et.join(Dt);if(rt=rt.trim(),!lt&&1===st.split("#").length){var fe=r.exec(rt);if(fe)return this.path=rt,this.href=rt,this.pathname=fe[1],fe[2]?(this.search=fe[2],this.query=gt?It.parse(this.search.substr(1)):this.search.substr(1)):gt&&(this.search="",this.query={}),this}var Mt=t.exec(rt);if(Mt){var Nt=(Mt=Mt[0]).toLowerCase();this.protocol=Nt,rt=rt.substr(Mt.length)}if(lt||Mt||rt.match(/^\/\/[^@\/]+@[^@\/]+/)){var ge="//"===rt.substr(0,2);ge&&(!Mt||!Pt[Mt])&&(rt=rt.substr(2),this.slashes=!0)}if(!Pt[Mt]&&(ge||Mt&&!pt[Mt])){for(var ve=-1,pe=0;pe<B.length;pe++)-1!==(He=rt.indexOf(B[pe]))&&(-1===ve||He<ve)&&(ve=He);var ke,Ze;for(-1!==(Ze=-1===ve?rt.lastIndexOf("@"):rt.lastIndexOf("@",ve))&&(ke=rt.slice(0,Ze),rt=rt.slice(Ze+1),this.auth=decodeURIComponent(ke)),ve=-1,pe=0;pe<x.length;pe++){var He;-1!==(He=rt.indexOf(x[pe]))&&(-1===ve||He<ve)&&(ve=He)}-1===ve&&(ve=rt.length),this.host=rt.slice(0,ve),rt=rt.slice(ve),this.parseHost(),this.hostname=this.hostname||"";var Di="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!Di)for(var $e=this.hostname.split(/\./),Le=(pe=0,$e.length);pe<Le;pe++){var pi=$e[pe];if(pi&&!pi.match(ot)){for(var Gt="",Se=0,Zt=pi.length;Se<Zt;Se++)pi.charCodeAt(Se)>127?Gt+="x":Gt+=pi[Se];if(!Gt.match(ot)){var ie=$e.slice(0,pe),St=$e.slice(pe+1),jt=pi.match(et);jt&&(ie.push(jt[1]),St.unshift(jt[2])),St.length&&(rt="/"+St.join(".")+rt),this.hostname=ie.join(".");break}}}this.hostname=this.hostname.length>255?"":this.hostname.toLowerCase(),Di||(this.hostname=T.toASCII(this.hostname)),this.host=(this.hostname||"")+(this.port?":"+this.port:""),this.href+=this.host,Di&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==rt[0]&&(rt="/"+rt))}if(!Tt[Nt])for(pe=0,Le=b.length;pe<Le;pe++){var Te=b[pe];if(-1!==rt.indexOf(Te)){var te=encodeURIComponent(Te);te===Te&&(te=escape(Te)),rt=rt.split(Te).join(te)}}var ne=rt.indexOf("#");-1!==ne&&(this.hash=rt.substr(ne),rt=rt.slice(0,ne));var Oe=rt.indexOf("?");return-1!==Oe?(this.search=rt.substr(Oe),this.query=rt.substr(Oe+1),gt&&(this.query=It.parse(this.query)),rt=rt.slice(0,Oe)):gt&&(this.search="",this.query={}),rt&&(this.pathname=rt),pt[Nt]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(this.path=(this.pathname||"")+(this.search||"")),this.href=this.format(),this},e.prototype.format=function(){var st=this.auth||"";st&&(st=(st=encodeURIComponent(st)).replace(/%3A/i,":"),st+="@");var gt=this.protocol||"",lt=this.pathname||"",Bt=this.hash||"",Dt=!1,Et="";this.host?Dt=st+this.host:this.hostname&&(Dt=st+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(Dt+=":"+this.port)),this.query&&_.isObject(this.query)&&Object.keys(this.query).length&&(Et=It.stringify(this.query));var ut=this.search||Et&&"?"+Et||"";return gt&&":"!==gt.substr(-1)&&(gt+=":"),this.slashes||(!gt||pt[gt])&&!1!==Dt?(Dt="//"+(Dt||""),lt&&"/"!==lt.charAt(0)&&(lt="/"+lt)):Dt||(Dt=""),Bt&&"#"!==Bt.charAt(0)&&(Bt="#"+Bt),ut&&"?"!==ut.charAt(0)&&(ut="?"+ut),gt+Dt+(lt=lt.replace(/[?#]/g,function(rt){return encodeURIComponent(rt)}))+(ut=ut.replace("#","%23"))+Bt},e.prototype.resolve=function(st){return this.resolveObject(Ht(st,!1,!0)).format()},e.prototype.resolveObject=function(st){if(_.isString(st)){var gt=new e;gt.parse(st,!1,!0),st=gt}for(var lt=new e,Bt=Object.keys(this),Dt=0;Dt<Bt.length;Dt++){var Et=Bt[Dt];lt[Et]=this[Et]}if(lt.hash=st.hash,""===st.href)return lt.href=lt.format(),lt;if(st.slashes&&!st.protocol){for(var ut=Object.keys(st),rt=0;rt<ut.length;rt++){var fe=ut[rt];"protocol"!==fe&&(lt[fe]=st[fe])}return pt[lt.protocol]&&lt.hostname&&!lt.pathname&&(lt.path=lt.pathname="/"),lt.href=lt.format(),lt}if(st.protocol&&st.protocol!==lt.protocol){if(!pt[st.protocol]){for(var Mt=Object.keys(st),Nt=0;Nt<Mt.length;Nt++){var ge=Mt[Nt];lt[ge]=st[ge]}return lt.href=lt.format(),lt}if(lt.protocol=st.protocol,st.host||Pt[st.protocol])lt.pathname=st.pathname;else{for(var Le=(st.pathname||"").split("/");Le.length&&!(st.host=Le.shift()););st.host||(st.host=""),st.hostname||(st.hostname=""),""!==Le[0]&&Le.unshift(""),Le.length<2&&Le.unshift(""),lt.pathname=Le.join("/")}return lt.search=st.search,lt.query=st.query,lt.host=st.host||"",lt.auth=st.auth,lt.hostname=st.hostname||st.host,lt.port=st.port,(lt.pathname||lt.search)&&(lt.path=(lt.pathname||"")+(lt.search||"")),lt.slashes=lt.slashes||st.slashes,lt.href=lt.format(),lt}var He=lt.pathname&&"/"===lt.pathname.charAt(0),ke=st.host||st.pathname&&"/"===st.pathname.charAt(0),Ze=ke||He||lt.host&&st.pathname,Di=Ze,$e=lt.pathname&&lt.pathname.split("/")||[],pi=(Le=st.pathname&&st.pathname.split("/")||[],lt.protocol&&!pt[lt.protocol]);if(pi&&(lt.hostname="",lt.port=null,lt.host&&(""===$e[0]?$e[0]=lt.host:$e.unshift(lt.host)),lt.host="",st.protocol&&(st.hostname=null,st.port=null,st.host&&(""===Le[0]?Le[0]=st.host:Le.unshift(st.host)),st.host=null),Ze=Ze&&(""===Le[0]||""===$e[0])),ke)lt.host=st.host||""===st.host?st.host:lt.host,lt.hostname=st.hostname||""===st.hostname?st.hostname:lt.hostname,lt.search=st.search,lt.query=st.query,$e=Le;else if(Le.length)$e||($e=[]),$e.pop(),$e=$e.concat(Le),lt.search=st.search,lt.query=st.query;else if(!_.isNullOrUndefined(st.search))return pi&&(lt.hostname=lt.host=$e.shift(),(Gt=!!(lt.host&&lt.host.indexOf("@")>0)&&lt.host.split("@"))&&(lt.auth=Gt.shift(),lt.host=lt.hostname=Gt.shift())),lt.search=st.search,lt.query=st.query,(!_.isNull(lt.pathname)||!_.isNull(lt.search))&&(lt.path=(lt.pathname?lt.pathname:"")+(lt.search?lt.search:"")),lt.href=lt.format(),lt;if(!$e.length)return lt.pathname=null,lt.path=lt.search?"/"+lt.search:null,lt.href=lt.format(),lt;for(var Se=$e.slice(-1)[0],Zt=(lt.host||st.host||$e.length>1)&&("."===Se||".."===Se)||""===Se,ie=0,St=$e.length;St>=0;St--)"."===(Se=$e[St])?$e.splice(St,1):".."===Se?($e.splice(St,1),ie++):ie&&($e.splice(St,1),ie--);if(!Ze&&!Di)for(;ie--;ie)$e.unshift("..");Ze&&""!==$e[0]&&(!$e[0]||"/"!==$e[0].charAt(0))&&$e.unshift(""),Zt&&"/"!==$e.join("/").substr(-1)&&$e.push("");var Gt,jt=""===$e[0]||$e[0]&&"/"===$e[0].charAt(0);return pi&&(lt.hostname=lt.host=jt?"":$e.length?$e.shift():"",(Gt=!!(lt.host&&lt.host.indexOf("@")>0)&&lt.host.split("@"))&&(lt.auth=Gt.shift(),lt.host=lt.hostname=Gt.shift())),(Ze=Ze||lt.host&&$e.length)&&!jt&&$e.unshift(""),$e.length?lt.pathname=$e.join("/"):(lt.pathname=null,lt.path=null),(!_.isNull(lt.pathname)||!_.isNull(lt.search))&&(lt.path=(lt.pathname?lt.pathname:"")+(lt.search?lt.search:"")),lt.auth=st.auth||lt.auth,lt.slashes=lt.slashes||st.slashes,lt.href=lt.format(),lt},e.prototype.parseHost=function(){var st=this.host,gt=n.exec(st);gt&&(":"!==(gt=gt[0])&&(this.port=gt.substr(1)),st=st.substr(0,st.length-gt.length)),st&&(this.hostname=st)}},16906:U=>{"use strict";U.exports={isString:function($){return"string"==typeof $},isObject:function($){return"object"==typeof $&&null!==$},isNull:function($){return null===$},isNullOrUndefined:function($){return null==$}}},35987:(U,$,m)=>{"use strict";function u(Dt,Et,ut,rt){return new(ut||(ut=Promise))(function(Mt,Nt){function ge(He){try{pe(rt.next(He))}catch(ke){Nt(ke)}}function ve(He){try{pe(rt.throw(He))}catch(ke){Nt(ke)}}function pe(He){He.done?Mt(He.value):function(Mt){return Mt instanceof ut?Mt:new ut(function(Nt){Nt(Mt)})}(He.value).then(ge,ve)}pe((rt=rt.apply(Dt,Et||[])).next())})}function pt(Dt){return this instanceof pt?(this.v=Dt,this):new pt(Dt)}function It(Dt,Et,ut){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var fe,rt=ut.apply(Dt,Et||[]),Mt=[];return fe={},Nt("next"),Nt("throw"),Nt("return"),fe[Symbol.asyncIterator]=function(){return this},fe;function Nt(Ze){rt[Ze]&&(fe[Ze]=function(Di){return new Promise(function($e,Le){Mt.push([Ze,Di,$e,Le])>1||ge(Ze,Di)})})}function ge(Ze,Di){try{!function(Ze){Ze.value instanceof pt?Promise.resolve(Ze.value.v).then(pe,He):ke(Mt[0][2],Ze)}(rt[Ze](Di))}catch($e){ke(Mt[0][3],$e)}}function pe(Ze){ge("next",Ze)}function He(Ze){ge("throw",Ze)}function ke(Ze,Di){Ze(Di),Mt.shift(),Mt.length&&ge(Mt[0][0],Mt[0][1])}}function Jt(Dt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ut,Et=Dt[Symbol.asyncIterator];return Et?Et.call(Dt):(Dt=function(Dt){var Et="function"==typeof Symbol&&Symbol.iterator,ut=Et&&Dt[Et],rt=0;if(ut)return ut.call(Dt);if(Dt&&"number"==typeof Dt.length)return{next:function(){return Dt&&rt>=Dt.length&&(Dt=void 0),{value:Dt&&Dt[rt++],done:!Dt}}};throw new TypeError(Et?"Object is not iterable.":"Symbol.iterator is not defined.")}(Dt),ut={},rt("next"),rt("throw"),rt("return"),ut[Symbol.asyncIterator]=function(){return this},ut);function rt(Mt){ut[Mt]=Dt[Mt]&&function(Nt){return new Promise(function(ge,ve){!function(Mt,Nt,ge,ve){Promise.resolve(ve).then(function(pe){Mt({value:pe,done:ge})},Nt)}(ge,ve,(Nt=Dt[Mt](Nt)).done,Nt.value)})}}}m.d($,{mG:()=>u,qq:()=>pt,FC:()=>It,KL:()=>Jt})},70433:(U,$,m)=>{U.exports=m(47471)},82476:(U,$,m)=>{U.exports=m(21049)},20036:(U,$,m)=>{U.exports=m(43175)},55672:(U,$,m)=>{U.exports=m(3352)},77464:(U,$,m)=>{U.exports=m(13566)},40750:(U,$,m)=>{U.exports=m(70201)},55742:(U,$,m)=>{U.exports=m(21570)},63759:(U,$,m)=>{U.exports=m(46726)},67489:(U,$,m)=>{U.exports=m(38366)},81836:(U,$,m)=>{U.exports=m(63317)},25710:(U,$,m)=>{U.exports=m(68687)},12782:(U,$,m)=>{U.exports=m(15256)},27733:(U,$,m)=>{U.exports=m(21929)},32472:(U,$,m)=>{U.exports=m(70977)},78927:(U,$,m)=>{U.exports=m(35019)},79921:(U,$,m)=>{U.exports=m(24733)},74580:(U,$,m)=>{U.exports=m(65623)},49067:(U,$,m)=>{U.exports=m(4517)},10278:(U,$,m)=>{U.exports=m(31584)},92909:(U,$,m)=>{U.exports=m(46025)},40715:(U,$,m)=>{U.exports=m(81613)},88577:(U,$,m)=>{U.exports=m(19775)},25918:(U,$,m)=>{U.exports=m(9483)},48735:(U,$,m)=>{U.exports=m(60061)},46188:(U,$,m)=>{U.exports=m(27254)},8797:(U,$,m)=>{U.exports=m(62691)},77901:(U,$,m)=>{U.exports=m(98244)},95942:(U,$,m)=>{U.exports=m(79668)},96915:(U,$,m)=>{U.exports=m(5797)},90986:(U,$,m)=>{U.exports=m(35248)},62917:(U,$,m)=>{U.exports=m(58316)},45698:(U,$,m)=>{U.exports=m(51479)},48972:(U,$,m)=>{U.exports=m(35392)},59680:(U,$,m)=>{U.exports=m(43510)},52175:()=>{},41777:(U,$,m)=>{"use strict";m.d($,{l3:()=>e,_j:()=>T,LC:()=>_,ZN:()=>It,jt:()=>n,pV:()=>ot,F4:()=>x,IO:()=>Tt,vP:()=>s,SB:()=>b,oB:()=>u,eR:()=>B,X$:()=>t,ZE:()=>Ht,k1:()=>Jt});class T{}class _{}const e="*";function t(Ct,bt){return{type:7,name:Ct,definitions:bt,options:{}}}function n(Ct,bt=null){return{type:4,styles:bt,timings:Ct}}function s(Ct,bt=null){return{type:2,steps:Ct,options:bt}}function u(Ct){return{type:6,styles:Ct,offset:null}}function b(Ct,bt,st){return{type:0,name:Ct,styles:bt,options:st}}function x(Ct){return{type:5,steps:Ct}}function B(Ct,bt,st=null){return{type:1,expr:Ct,animation:bt,options:st}}function ot(Ct=null){return{type:9,options:Ct}}function Tt(Ct,bt,st=null){return{type:11,selector:Ct,animation:bt,options:st}}function pt(Ct){Promise.resolve(null).then(Ct)}class It{constructor(bt=0,st=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=bt+st}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(bt=>bt()),this._onDoneFns=[])}onStart(bt){this._onStartFns.push(bt)}onDone(bt){this._onDoneFns.push(bt)}onDestroy(bt){this._onDestroyFns.push(bt)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){pt(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(bt=>bt()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(bt=>bt()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(bt){this._position=this.totalTime?bt*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(bt){const st="start"==bt?this._onStartFns:this._onDoneFns;st.forEach(gt=>gt()),st.length=0}}class Ht{constructor(bt){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=bt;let st=0,gt=0,lt=0;const Bt=this.players.length;0==Bt?pt(()=>this._onFinish()):this.players.forEach(Dt=>{Dt.onDone(()=>{++st==Bt&&this._onFinish()}),Dt.onDestroy(()=>{++gt==Bt&&this._onDestroy()}),Dt.onStart(()=>{++lt==Bt&&this._onStart()})}),this.totalTime=this.players.reduce((Dt,Et)=>Math.max(Dt,Et.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(bt=>bt()),this._onDoneFns=[])}init(){this.players.forEach(bt=>bt.init())}onStart(bt){this._onStartFns.push(bt)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(bt=>bt()),this._onStartFns=[])}onDone(bt){this._onDoneFns.push(bt)}onDestroy(bt){this._onDestroyFns.push(bt)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(bt=>bt.play())}pause(){this.players.forEach(bt=>bt.pause())}restart(){this.players.forEach(bt=>bt.restart())}finish(){this._onFinish(),this.players.forEach(bt=>bt.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(bt=>bt.destroy()),this._onDestroyFns.forEach(bt=>bt()),this._onDestroyFns=[])}reset(){this.players.forEach(bt=>bt.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(bt){const st=bt*this.totalTime;this.players.forEach(gt=>{const lt=gt.totalTime?Math.min(1,st/gt.totalTime):1;gt.setPosition(lt)})}getPosition(){const bt=this.players.reduce((st,gt)=>null===st||gt.totalTime>st.totalTime?gt:st,null);return null!=bt?bt.getPosition():0}beforeDestroy(){this.players.forEach(bt=>{bt.beforeDestroy&&bt.beforeDestroy()})}triggerCallback(bt){const st="start"==bt?this._onStartFns:this._onDoneFns;st.forEach(gt=>gt()),st.length=0}}const Jt="!"},15664:(U,$,m)=>{"use strict";m.d($,{rt:()=>ue,s1:()=>Nt,kH:()=>je,Em:()=>ge,tE:()=>Ci,qV:()=>Ce,qm:()=>Je,ic:()=>pe,Kd:()=>mi,X6:()=>me,yG:()=>ye});var T=m(69808),_=m(5e3),e=m(77579),t=m(50727),n=m(61135),r=m(39646),s=m(91159),u=m(18505),b=m(78372),x=m(39300),B=m(54004),Z=m(95698),ot=m(35684),et=m(71884),Tt=m(82722),Pt=m(63191),pt=m(70925),It=m(17144);class Mt{constructor(ct){this._items=ct,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new e.x,this._typeaheadSubscription=t.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=Lt=>Lt.disabled,this._pressedLetters=[],this.tabOut=new e.x,this.change=new e.x,ct instanceof _.n_E&&ct.changes.subscribe(Lt=>{if(this._activeItem){const Ne=Lt.toArray().indexOf(this._activeItem);Ne>-1&&Ne!==this._activeItemIndex&&(this._activeItemIndex=Ne)}})}skipPredicate(ct){return this._skipPredicateFn=ct,this}withWrap(ct=!0){return this._wrap=ct,this}withVerticalOrientation(ct=!0){return this._vertical=ct,this}withHorizontalOrientation(ct){return this._horizontal=ct,this}withAllowedModifierKeys(ct){return this._allowedModifierKeys=ct,this}withTypeAhead(ct=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,u.b)(Lt=>this._pressedLetters.push(Lt)),(0,b.b)(ct),(0,x.h)(()=>this._pressedLetters.length>0),(0,B.U)(()=>this._pressedLetters.join(""))).subscribe(Lt=>{const ce=this._getItemsArray();for(let Ne=1;Ne<ce.length+1;Ne++){const Wi=(this._activeItemIndex+Ne)%ce.length,qi=ce[Wi];if(!this._skipPredicateFn(qi)&&0===qi.getLabel().toUpperCase().trim().indexOf(Lt)){this.setActiveItem(Wi);break}}this._pressedLetters=[]}),this}withHomeAndEnd(ct=!0){return this._homeAndEnd=ct,this}setActiveItem(ct){const Lt=this._activeItem;this.updateActiveItem(ct),this._activeItem!==Lt&&this.change.next(this._activeItemIndex)}onKeydown(ct){const Lt=ct.keyCode,Ne=["altKey","ctrlKey","metaKey","shiftKey"].every(Wi=>!ct[Wi]||this._allowedModifierKeys.indexOf(Wi)>-1);switch(Lt){case s.Mf:return void this.tabOut.next();case s.JH:if(this._vertical&&Ne){this.setNextItemActive();break}return;case s.LH:if(this._vertical&&Ne){this.setPreviousItemActive();break}return;case s.SV:if(this._horizontal&&Ne){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case s.oh:if(this._horizontal&&Ne){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case s.Sd:if(this._homeAndEnd&&Ne){this.setFirstItemActive();break}return;case s.uR:if(this._homeAndEnd&&Ne){this.setLastItemActive();break}return;default:return void((Ne||(0,s.Vb)(ct,"shiftKey"))&&(ct.key&&1===ct.key.length?this._letterKeyStream.next(ct.key.toLocaleUpperCase()):(Lt>=s.A&&Lt<=s.Z||Lt>=s.xE&&Lt<=s.aO)&&this._letterKeyStream.next(String.fromCharCode(Lt))))}this._pressedLetters=[],ct.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(ct){const Lt=this._getItemsArray(),ce="number"==typeof ct?ct:Lt.indexOf(ct),Ne=Lt[ce];this._activeItem=null==Ne?null:Ne,this._activeItemIndex=ce}_setActiveItemByDelta(ct){this._wrap?this._setActiveInWrapMode(ct):this._setActiveInDefaultMode(ct)}_setActiveInWrapMode(ct){const Lt=this._getItemsArray();for(let ce=1;ce<=Lt.length;ce++){const Ne=(this._activeItemIndex+ct*ce+Lt.length)%Lt.length;if(!this._skipPredicateFn(Lt[Ne]))return void this.setActiveItem(Ne)}}_setActiveInDefaultMode(ct){this._setActiveItemByIndex(this._activeItemIndex+ct,ct)}_setActiveItemByIndex(ct,Lt){const ce=this._getItemsArray();if(ce[ct]){for(;this._skipPredicateFn(ce[ct]);)if(!ce[ct+=Lt])return;this.setActiveItem(ct)}}_getItemsArray(){return this._items instanceof _.n_E?this._items.toArray():this._items}}class Nt extends Mt{setActiveItem(ct){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(ct),this.activeItem&&this.activeItem.setActiveStyles()}}class ge extends Mt{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(ct){return this._origin=ct,this}setActiveItem(ct){super.setActiveItem(ct),this.activeItem&&this.activeItem.focus(this._origin)}}let pe=(()=>{class kt{constructor(Lt){this._platform=Lt}isDisabled(Lt){return Lt.hasAttribute("disabled")}isVisible(Lt){return function(kt){return!!(kt.offsetWidth||kt.offsetHeight||"function"==typeof kt.getClientRects&&kt.getClientRects().length)}(Lt)&&"visible"===getComputedStyle(Lt).visibility}isTabbable(Lt){if(!this._platform.isBrowser)return!1;const ce=function(kt){try{return kt.frameElement}catch(ct){return null}}(function(kt){return kt.ownerDocument&&kt.ownerDocument.defaultView||window}(Lt));if(ce&&(-1===Se(ce)||!this.isVisible(ce)))return!1;let Ne=Lt.nodeName.toLowerCase(),Wi=Se(Lt);return Lt.hasAttribute("contenteditable")?-1!==Wi:!("iframe"===Ne||"object"===Ne||this._platform.WEBKIT&&this._platform.IOS&&!function(kt){let ct=kt.nodeName.toLowerCase(),Lt="input"===ct&&kt.type;return"text"===Lt||"password"===Lt||"select"===ct||"textarea"===ct}(Lt))&&("audio"===Ne?!!Lt.hasAttribute("controls")&&-1!==Wi:"video"===Ne?-1!==Wi&&(null!==Wi||this._platform.FIREFOX||Lt.hasAttribute("controls")):Lt.tabIndex>=0)}isFocusable(Lt,ce){return function(kt){return!function(kt){return function(kt){return"input"==kt.nodeName.toLowerCase()}(kt)&&"hidden"==kt.type}(kt)&&(function(kt){let ct=kt.nodeName.toLowerCase();return"input"===ct||"select"===ct||"button"===ct||"textarea"===ct}(kt)||function(kt){return function(kt){return"a"==kt.nodeName.toLowerCase()}(kt)&&kt.hasAttribute("href")}(kt)||kt.hasAttribute("contenteditable")||Gt(kt))}(Lt)&&!this.isDisabled(Lt)&&((null==ce?void 0:ce.ignoreVisibility)||this.isVisible(Lt))}}return kt.\u0275fac=function(Lt){return new(Lt||kt)(_.LFG(pt.t4))},kt.\u0275prov=_.Yz7({token:kt,factory:kt.\u0275fac,providedIn:"root"}),kt})();function Gt(kt){if(!kt.hasAttribute("tabindex")||void 0===kt.tabIndex)return!1;let ct=kt.getAttribute("tabindex");return!(!ct||isNaN(parseInt(ct,10)))}function Se(kt){if(!Gt(kt))return null;const ct=parseInt(kt.getAttribute("tabindex")||"",10);return isNaN(ct)?-1:ct}class jt{constructor(ct,Lt,ce,Ne,Wi=!1){this._element=ct,this._checker=Lt,this._ngZone=ce,this._document=Ne,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,Wi||this.attachAnchors()}get enabled(){return this._enabled}set enabled(ct){this._enabled=ct,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(ct,this._startAnchor),this._toggleAnchorTabIndex(ct,this._endAnchor))}destroy(){const ct=this._startAnchor,Lt=this._endAnchor;ct&&(ct.removeEventListener("focus",this.startAnchorListener),ct.remove()),Lt&&(Lt.removeEventListener("focus",this.endAnchorListener),Lt.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(ct){return new Promise(Lt=>{this._executeOnStable(()=>Lt(this.focusInitialElement(ct)))})}focusFirstTabbableElementWhenReady(ct){return new Promise(Lt=>{this._executeOnStable(()=>Lt(this.focusFirstTabbableElement(ct)))})}focusLastTabbableElementWhenReady(ct){return new Promise(Lt=>{this._executeOnStable(()=>Lt(this.focusLastTabbableElement(ct)))})}_getRegionBoundary(ct){const Lt=this._element.querySelectorAll(`[cdk-focus-region-${ct}], [cdkFocusRegion${ct}], [cdk-focus-${ct}]`);return"start"==ct?Lt.length?Lt[0]:this._getFirstTabbableElement(this._element):Lt.length?Lt[Lt.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(ct){const Lt=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(Lt){if(!this._checker.isFocusable(Lt)){const ce=this._getFirstTabbableElement(Lt);return null==ce||ce.focus(ct),!!ce}return Lt.focus(ct),!0}return this.focusFirstTabbableElement(ct)}focusFirstTabbableElement(ct){const Lt=this._getRegionBoundary("start");return Lt&&Lt.focus(ct),!!Lt}focusLastTabbableElement(ct){const Lt=this._getRegionBoundary("end");return Lt&&Lt.focus(ct),!!Lt}hasAttached(){return this._hasAttached}_getFirstTabbableElement(ct){if(this._checker.isFocusable(ct)&&this._checker.isTabbable(ct))return ct;const Lt=ct.children;for(let ce=0;ce<Lt.length;ce++){const Ne=Lt[ce].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(Lt[ce]):null;if(Ne)return Ne}return null}_getLastTabbableElement(ct){if(this._checker.isFocusable(ct)&&this._checker.isTabbable(ct))return ct;const Lt=ct.children;for(let ce=Lt.length-1;ce>=0;ce--){const Ne=Lt[ce].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(Lt[ce]):null;if(Ne)return Ne}return null}_createAnchor(){const ct=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,ct),ct.classList.add("cdk-visually-hidden"),ct.classList.add("cdk-focus-trap-anchor"),ct.setAttribute("aria-hidden","true"),ct}_toggleAnchorTabIndex(ct,Lt){ct?Lt.setAttribute("tabindex","0"):Lt.removeAttribute("tabindex")}toggleAnchors(ct){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(ct,this._startAnchor),this._toggleAnchorTabIndex(ct,this._endAnchor))}_executeOnStable(ct){this._ngZone.isStable?ct():this._ngZone.onStable.pipe((0,Z.q)(1)).subscribe(ct)}}let Ce=(()=>{class kt{constructor(Lt,ce,Ne){this._checker=Lt,this._ngZone=ce,this._document=Ne}create(Lt,ce=!1){return new jt(Lt,this._checker,this._ngZone,this._document,ce)}}return kt.\u0275fac=function(Lt){return new(Lt||kt)(_.LFG(pe),_.LFG(_.R0b),_.LFG(T.K0))},kt.\u0275prov=_.Yz7({token:kt,factory:kt.\u0275fac,providedIn:"root"}),kt})();function me(kt){return 0===kt.offsetX&&0===kt.offsetY}function ye(kt){const ct=kt.touches&&kt.touches[0]||kt.changedTouches&&kt.changedTouches[0];return!(!ct||-1!==ct.identifier||null!=ct.radiusX&&1!==ct.radiusX||null!=ct.radiusY&&1!==ct.radiusY)}const Qt=new _.OlP("cdk-input-modality-detector-options"),de={ignoreKeys:[s.zL,s.jx,s.b2,s.MW,s.JU]},ni=(0,pt.i$)({passive:!0,capture:!0});let Pi=(()=>{class kt{constructor(Lt,ce,Ne,Wi){this._platform=Lt,this._mostRecentTarget=null,this._modality=new n.X(null),this._lastTouchMs=0,this._onKeydown=qi=>{var Sn,ir;(null===(ir=null===(Sn=this._options)||void 0===Sn?void 0:Sn.ignoreKeys)||void 0===ir?void 0:ir.some(ci=>ci===qi.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=(0,pt.sA)(qi))},this._onMousedown=qi=>{Date.now()-this._lastTouchMs<650||(this._modality.next(me(qi)?"keyboard":"mouse"),this._mostRecentTarget=(0,pt.sA)(qi))},this._onTouchstart=qi=>{ye(qi)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=(0,pt.sA)(qi))},this._options=Object.assign(Object.assign({},de),Wi),this.modalityDetected=this._modality.pipe((0,ot.T)(1)),this.modalityChanged=this.modalityDetected.pipe((0,et.x)()),Lt.isBrowser&&ce.runOutsideAngular(()=>{Ne.addEventListener("keydown",this._onKeydown,ni),Ne.addEventListener("mousedown",this._onMousedown,ni),Ne.addEventListener("touchstart",this._onTouchstart,ni)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,ni),document.removeEventListener("mousedown",this._onMousedown,ni),document.removeEventListener("touchstart",this._onTouchstart,ni))}}return kt.\u0275fac=function(Lt){return new(Lt||kt)(_.LFG(pt.t4),_.LFG(_.R0b),_.LFG(T.K0),_.LFG(Qt,8))},kt.\u0275prov=_.Yz7({token:kt,factory:kt.\u0275fac,providedIn:"root"}),kt})();const wi=new _.OlP("liveAnnouncerElement",{providedIn:"root",factory:function(){return null}}),dn=new _.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let mi=(()=>{class kt{constructor(Lt,ce,Ne,Wi){this._ngZone=ce,this._defaultOptions=Wi,this._document=Ne,this._liveElement=Lt||this._createLiveElement()}announce(Lt,...ce){const Ne=this._defaultOptions;let Wi,qi;return 1===ce.length&&"number"==typeof ce[0]?qi=ce[0]:[Wi,qi]=ce,this.clear(),clearTimeout(this._previousTimeout),Wi||(Wi=Ne&&Ne.politeness?Ne.politeness:"polite"),null==qi&&Ne&&(qi=Ne.duration),this._liveElement.setAttribute("aria-live",Wi),this._ngZone.runOutsideAngular(()=>new Promise(Sn=>{clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=Lt,Sn(),"number"==typeof qi&&(this._previousTimeout=setTimeout(()=>this.clear(),qi))},100)}))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){var Lt;clearTimeout(this._previousTimeout),null===(Lt=this._liveElement)||void 0===Lt||Lt.remove(),this._liveElement=null}_createLiveElement(){const Lt="cdk-live-announcer-element",ce=this._document.getElementsByClassName(Lt),Ne=this._document.createElement("div");for(let Wi=0;Wi<ce.length;Wi++)ce[Wi].remove();return Ne.classList.add(Lt),Ne.classList.add("cdk-visually-hidden"),Ne.setAttribute("aria-atomic","true"),Ne.setAttribute("aria-live","polite"),this._document.body.appendChild(Ne),Ne}}return kt.\u0275fac=function(Lt){return new(Lt||kt)(_.LFG(wi,8),_.LFG(_.R0b),_.LFG(T.K0),_.LFG(dn,8))},kt.\u0275prov=_.Yz7({token:kt,factory:kt.\u0275fac,providedIn:"root"}),kt})();const Re=new _.OlP("cdk-focus-monitor-default-options"),xe=(0,pt.i$)({passive:!0,capture:!0});let Ci=(()=>{class kt{constructor(Lt,ce,Ne,Wi,qi){this._ngZone=Lt,this._platform=ce,this._inputModalityDetector=Ne,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new e.x,this._rootNodeFocusAndBlurListener=Sn=>{const ir=(0,pt.sA)(Sn),ci="focus"===Sn.type?this._onFocus:this._onBlur;for(let Ke=ir;Ke;Ke=Ke.parentElement)ci.call(this,Sn,Ke)},this._document=Wi,this._detectionMode=(null==qi?void 0:qi.detectionMode)||0}monitor(Lt,ce=!1){const Ne=(0,Pt.fI)(Lt);if(!this._platform.isBrowser||1!==Ne.nodeType)return(0,r.of)(null);const Wi=(0,pt.kV)(Ne)||this._getDocument(),qi=this._elementInfo.get(Ne);if(qi)return ce&&(qi.checkChildren=!0),qi.subject;const Sn={checkChildren:ce,subject:new e.x,rootNode:Wi};return this._elementInfo.set(Ne,Sn),this._registerGlobalListeners(Sn),Sn.subject}stopMonitoring(Lt){const ce=(0,Pt.fI)(Lt),Ne=this._elementInfo.get(ce);Ne&&(Ne.subject.complete(),this._setClasses(ce),this._elementInfo.delete(ce),this._removeGlobalListeners(Ne))}focusVia(Lt,ce,Ne){const Wi=(0,Pt.fI)(Lt);Wi===this._getDocument().activeElement?this._getClosestElementsInfo(Wi).forEach(([Sn,ir])=>this._originChanged(Sn,ce,ir)):(this._setOrigin(ce),"function"==typeof Wi.focus&&Wi.focus(Ne))}ngOnDestroy(){this._elementInfo.forEach((Lt,ce)=>this.stopMonitoring(ce))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(Lt){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(Lt)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(Lt){return 1===this._detectionMode||!!(null==Lt?void 0:Lt.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(Lt,ce){Lt.classList.toggle("cdk-focused",!!ce),Lt.classList.toggle("cdk-touch-focused","touch"===ce),Lt.classList.toggle("cdk-keyboard-focused","keyboard"===ce),Lt.classList.toggle("cdk-mouse-focused","mouse"===ce),Lt.classList.toggle("cdk-program-focused","program"===ce)}_setOrigin(Lt,ce=!1){this._ngZone.runOutsideAngular(()=>{this._origin=Lt,this._originFromTouchInteraction="touch"===Lt&&ce,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(Lt,ce){const Ne=this._elementInfo.get(ce),Wi=(0,pt.sA)(Lt);!Ne||!Ne.checkChildren&&ce!==Wi||this._originChanged(ce,this._getFocusOrigin(Wi),Ne)}_onBlur(Lt,ce){const Ne=this._elementInfo.get(ce);!Ne||Ne.checkChildren&&Lt.relatedTarget instanceof Node&&ce.contains(Lt.relatedTarget)||(this._setClasses(ce),this._emitOrigin(Ne.subject,null))}_emitOrigin(Lt,ce){this._ngZone.run(()=>Lt.next(ce))}_registerGlobalListeners(Lt){if(!this._platform.isBrowser)return;const ce=Lt.rootNode,Ne=this._rootNodeFocusListenerCount.get(ce)||0;Ne||this._ngZone.runOutsideAngular(()=>{ce.addEventListener("focus",this._rootNodeFocusAndBlurListener,xe),ce.addEventListener("blur",this._rootNodeFocusAndBlurListener,xe)}),this._rootNodeFocusListenerCount.set(ce,Ne+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe((0,Tt.R)(this._stopInputModalityDetector)).subscribe(Wi=>{this._setOrigin(Wi,!0)}))}_removeGlobalListeners(Lt){const ce=Lt.rootNode;if(this._rootNodeFocusListenerCount.has(ce)){const Ne=this._rootNodeFocusListenerCount.get(ce);Ne>1?this._rootNodeFocusListenerCount.set(ce,Ne-1):(ce.removeEventListener("focus",this._rootNodeFocusAndBlurListener,xe),ce.removeEventListener("blur",this._rootNodeFocusAndBlurListener,xe),this._rootNodeFocusListenerCount.delete(ce))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(Lt,ce,Ne){this._setClasses(Lt,ce),this._emitOrigin(Ne.subject,ce),this._lastFocusOrigin=ce}_getClosestElementsInfo(Lt){const ce=[];return this._elementInfo.forEach((Ne,Wi)=>{(Wi===Lt||Ne.checkChildren&&Wi.contains(Lt))&&ce.push([Wi,Ne])}),ce}}return kt.\u0275fac=function(Lt){return new(Lt||kt)(_.LFG(_.R0b),_.LFG(pt.t4),_.LFG(Pi),_.LFG(T.K0,8),_.LFG(Re,8))},kt.\u0275prov=_.Yz7({token:kt,factory:kt.\u0275fac,providedIn:"root"}),kt})(),je=(()=>{class kt{constructor(Lt,ce){this._elementRef=Lt,this._focusMonitor=ce,this.cdkFocusChange=new _.vpe}ngAfterViewInit(){const Lt=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(Lt,1===Lt.nodeType&&Lt.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(ce=>this.cdkFocusChange.emit(ce))}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}}return kt.\u0275fac=function(Lt){return new(Lt||kt)(_.Y36(_.SBq),_.Y36(Ci))},kt.\u0275dir=_.lG2({type:kt,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"}}),kt})();const Ii="cdk-high-contrast-black-on-white",_i="cdk-high-contrast-white-on-black",Hi="cdk-high-contrast-active";let Je=(()=>{class kt{constructor(Lt,ce){this._platform=Lt,this._document=ce}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const Lt=this._document.createElement("div");Lt.style.backgroundColor="rgb(1,2,3)",Lt.style.position="absolute",this._document.body.appendChild(Lt);const ce=this._document.defaultView||window,Ne=ce&&ce.getComputedStyle?ce.getComputedStyle(Lt):null,Wi=(Ne&&Ne.backgroundColor||"").replace(/ /g,"");switch(Lt.remove(),Wi){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const Lt=this._document.body.classList;Lt.remove(Hi),Lt.remove(Ii),Lt.remove(_i),this._hasCheckedHighContrastMode=!0;const ce=this.getHighContrastMode();1===ce?(Lt.add(Hi),Lt.add(Ii)):2===ce&&(Lt.add(Hi),Lt.add(_i))}}}return kt.\u0275fac=function(Lt){return new(Lt||kt)(_.LFG(pt.t4),_.LFG(T.K0))},kt.\u0275prov=_.Yz7({token:kt,factory:kt.\u0275fac,providedIn:"root"}),kt})(),ue=(()=>{class kt{constructor(Lt){Lt._applyBodyHighContrastModeCssClasses()}}return kt.\u0275fac=function(Lt){return new(Lt||kt)(_.LFG(Je))},kt.\u0275mod=_.oAB({type:kt}),kt.\u0275inj=_.cJS({imports:[[pt.ud,It.Q8]]}),kt})()},50226:(U,$,m)=>{"use strict";m.d($,{vT:()=>b,Is:()=>s});var T=m(5e3),_=m(69808);const e=new T.OlP("cdk-dir-doc",{providedIn:"root",factory:function(){return(0,T.f3M)(_.K0)}}),n=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let s=(()=>{class x{constructor(Z){if(this.value="ltr",this.change=new T.vpe,Z){const et=Z.documentElement?Z.documentElement.dir:null;this.value=function(x){const B=(null==x?void 0:x.toLowerCase())||"";return"auto"===B&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?n.test(navigator.language)?"rtl":"ltr":"rtl"===B?"rtl":"ltr"}((Z.body?Z.body.dir:null)||et||"ltr")}}ngOnDestroy(){this.change.complete()}}return x.\u0275fac=function(Z){return new(Z||x)(T.LFG(e,8))},x.\u0275prov=T.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})(),b=(()=>{class x{}return x.\u0275fac=function(Z){return new(Z||x)},x.\u0275mod=T.oAB({type:x}),x.\u0275inj=T.cJS({}),x})()},63191:(U,$,m)=>{"use strict";m.d($,{Eq:()=>n,Ig:()=>_,HM:()=>r,fI:()=>s,su:()=>e,du:()=>u});var T=m(5e3);function _(b){return null!=b&&"false"!=`${b}`}function e(b,x=0){return function(b){return!isNaN(parseFloat(b))&&!isNaN(Number(b))}(b)?Number(b):x}function n(b){return Array.isArray(b)?b:[b]}function r(b){return null==b?"":"string"==typeof b?b:`${b}px`}function s(b){return b instanceof T.SBq?b.nativeElement:b}function u(b,x=/\s+/){const B=[];if(null!=b){const Z=Array.isArray(b)?b:`${b}`.split(x);for(const ot of Z){const et=`${ot}`.trim();et&&B.push(et)}}return B}},20449:(U,$,m)=>{"use strict";m.d($,{Ov:()=>u,A8:()=>x,yy:()=>r,eX:()=>s,k:()=>B,Z9:()=>t});var T=m(77579),_=m(5e3);function t(Z){return Z&&"function"==typeof Z.connect}class r{applyChanges(ot,et,Tt,Pt,pt){ot.forEachOperation((It,Ht,Jt)=>{let Ct,bt;if(null==It.previousIndex){const st=Tt(It,Ht,Jt);Ct=et.createEmbeddedView(st.templateRef,st.context,st.index),bt=1}else null==Jt?(et.remove(Ht),bt=3):(Ct=et.get(Ht),et.move(Ct,Jt),bt=2);pt&&pt({context:null==Ct?void 0:Ct.context,operation:bt,record:It})})}detach(){}}class s{constructor(){this.viewCacheSize=20,this._viewCache=[]}applyChanges(ot,et,Tt,Pt,pt){ot.forEachOperation((It,Ht,Jt)=>{let Ct,bt;null==It.previousIndex?(Ct=this._insertView(()=>Tt(It,Ht,Jt),Jt,et,Pt(It)),bt=Ct?1:0):null==Jt?(this._detachAndCacheView(Ht,et),bt=3):(Ct=this._moveView(Ht,Jt,et,Pt(It)),bt=2),pt&&pt({context:null==Ct?void 0:Ct.context,operation:bt,record:It})})}detach(){for(const ot of this._viewCache)ot.destroy();this._viewCache=[]}_insertView(ot,et,Tt,Pt){const pt=this._insertViewFromCache(et,Tt);if(pt)return void(pt.context.$implicit=Pt);const It=ot();return Tt.createEmbeddedView(It.templateRef,It.context,It.index)}_detachAndCacheView(ot,et){const Tt=et.detach(ot);this._maybeCacheView(Tt,et)}_moveView(ot,et,Tt,Pt){const pt=Tt.get(ot);return Tt.move(pt,et),pt.context.$implicit=Pt,pt}_maybeCacheView(ot,et){if(this._viewCache.length<this.viewCacheSize)this._viewCache.push(ot);else{const Tt=et.indexOf(ot);-1===Tt?ot.destroy():et.remove(Tt)}}_insertViewFromCache(ot,et){const Tt=this._viewCache.pop();return Tt&&et.insert(Tt,ot),Tt||null}}class u{constructor(ot=!1,et,Tt=!0){this._multiple=ot,this._emitChanges=Tt,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new T.x,et&&et.length&&(ot?et.forEach(Pt=>this._markSelected(Pt)):this._markSelected(et[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...ot){this._verifyValueAssignment(ot),ot.forEach(et=>this._markSelected(et)),this._emitChangeEvent()}deselect(...ot){this._verifyValueAssignment(ot),ot.forEach(et=>this._unmarkSelected(et)),this._emitChangeEvent()}toggle(ot){this.isSelected(ot)?this.deselect(ot):this.select(ot)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(ot){return this._selection.has(ot)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(ot){this._multiple&&this.selected&&this._selected.sort(ot)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(ot){this.isSelected(ot)||(this._multiple||this._unmarkAll(),this._selection.add(ot),this._emitChanges&&this._selectedToEmit.push(ot))}_unmarkSelected(ot){this.isSelected(ot)&&(this._selection.delete(ot),this._emitChanges&&this._deselectedToEmit.push(ot))}_unmarkAll(){this.isEmpty()||this._selection.forEach(ot=>this._unmarkSelected(ot))}_verifyValueAssignment(ot){}}let x=(()=>{class Z{constructor(){this._listeners=[]}notify(et,Tt){for(let Pt of this._listeners)Pt(et,Tt)}listen(et){return this._listeners.push(et),()=>{this._listeners=this._listeners.filter(Tt=>et!==Tt)}}ngOnDestroy(){this._listeners=[]}}return Z.\u0275fac=function(et){return new(et||Z)},Z.\u0275prov=_.Yz7({token:Z,factory:Z.\u0275fac,providedIn:"root"}),Z})();const B=new _.OlP("_ViewRepeater")},91159:(U,$,m)=>{"use strict";m.d($,{A:()=>Ze,zL:()=>u,ZH:()=>_,jx:()=>s,yY:()=>gt,JH:()=>Jt,uR:()=>Tt,K5:()=>n,hY:()=>B,Sd:()=>Pt,oh:()=>pt,b2:()=>sr,MW:()=>yi,aO:()=>ge,VM:()=>et,Ku:()=>ot,SV:()=>Ht,JU:()=>r,L_:()=>Z,Mf:()=>e,LH:()=>It,Z:()=>wi,xE:()=>lt,Vb:()=>zn});const _=8,e=9,n=13,r=16,s=17,u=18,B=27,Z=32,ot=33,et=34,Tt=35,Pt=36,pt=37,It=38,Ht=39,Jt=40,gt=46,lt=48,ge=57,Ze=65,wi=90,yi=91,sr=224;function zn(Yn,...kn){return kn.length?kn.some(xo=>Yn[xo]):Yn.altKey||Yn.shiftKey||Yn.ctrlKey||Yn.metaKey}},95113:(U,$,m)=>{"use strict";m.d($,{Yg:()=>Jt,u3:()=>bt});var T=m(5e3),_=m(63191),e=m(77579),t=m(39841),n=m(97272),r=m(68306),s=m(95698),u=m(35684),b=m(78372),x=m(54004),B=m(68675),Z=m(82722),ot=m(70925);const Tt=new Set;let Pt,pt=(()=>{class st{constructor(lt){this._platform=lt,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Ht}matchMedia(lt){return(this._platform.WEBKIT||this._platform.BLINK)&&function(st){if(!Tt.has(st))try{Pt||(Pt=document.createElement("style"),Pt.setAttribute("type","text/css"),document.head.appendChild(Pt)),Pt.sheet&&(Pt.sheet.insertRule(`@media ${st} {body{ }}`,0),Tt.add(st))}catch(gt){console.error(gt)}}(lt),this._matchMedia(lt)}}return st.\u0275fac=function(lt){return new(lt||st)(T.LFG(ot.t4))},st.\u0275prov=T.Yz7({token:st,factory:st.\u0275fac,providedIn:"root"}),st})();function Ht(st){return{matches:"all"===st||""===st,media:st,addListener:()=>{},removeListener:()=>{}}}let Jt=(()=>{class st{constructor(lt,Bt){this._mediaMatcher=lt,this._zone=Bt,this._queries=new Map,this._destroySubject=new e.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(lt){return Ct((0,_.Eq)(lt)).some(Dt=>this._registerQuery(Dt).mql.matches)}observe(lt){const Dt=Ct((0,_.Eq)(lt)).map(ut=>this._registerQuery(ut).observable);let Et=(0,t.a)(Dt);return Et=(0,n.z)(Et.pipe((0,s.q)(1)),Et.pipe((0,u.T)(1),(0,b.b)(0))),Et.pipe((0,x.U)(ut=>{const rt={matches:!1,breakpoints:{}};return ut.forEach(({matches:fe,query:Mt})=>{rt.matches=rt.matches||fe,rt.breakpoints[Mt]=fe}),rt}))}_registerQuery(lt){if(this._queries.has(lt))return this._queries.get(lt);const Bt=this._mediaMatcher.matchMedia(lt),Et={observable:new r.y(ut=>{const rt=fe=>this._zone.run(()=>ut.next(fe));return Bt.addListener(rt),()=>{Bt.removeListener(rt)}}).pipe((0,B.O)(Bt),(0,x.U)(({matches:ut})=>({query:lt,matches:ut})),(0,Z.R)(this._destroySubject)),mql:Bt};return this._queries.set(lt,Et),Et}}return st.\u0275fac=function(lt){return new(lt||st)(T.LFG(pt),T.LFG(T.R0b))},st.\u0275prov=T.Yz7({token:st,factory:st.\u0275fac,providedIn:"root"}),st})();function Ct(st){return st.map(gt=>gt.split(",")).reduce((gt,lt)=>gt.concat(lt)).map(gt=>gt.trim())}const bt={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"}},17144:(U,$,m)=>{"use strict";m.d($,{wD:()=>u,Q8:()=>b});var T=m(63191),_=m(5e3),e=m(68306),t=m(77579),n=m(78372);let r=(()=>{class x{create(Z){return"undefined"==typeof MutationObserver?null:new MutationObserver(Z)}}return x.\u0275fac=function(Z){return new(Z||x)},x.\u0275prov=_.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})(),s=(()=>{class x{constructor(Z){this._mutationObserverFactory=Z,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((Z,ot)=>this._cleanupObserver(ot))}observe(Z){const ot=(0,T.fI)(Z);return new e.y(et=>{const Pt=this._observeElement(ot).subscribe(et);return()=>{Pt.unsubscribe(),this._unobserveElement(ot)}})}_observeElement(Z){if(this._observedElements.has(Z))this._observedElements.get(Z).count++;else{const ot=new t.x,et=this._mutationObserverFactory.create(Tt=>ot.next(Tt));et&&et.observe(Z,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(Z,{observer:et,stream:ot,count:1})}return this._observedElements.get(Z).stream}_unobserveElement(Z){this._observedElements.has(Z)&&(this._observedElements.get(Z).count--,this._observedElements.get(Z).count||this._cleanupObserver(Z))}_cleanupObserver(Z){if(this._observedElements.has(Z)){const{observer:ot,stream:et}=this._observedElements.get(Z);ot&&ot.disconnect(),et.complete(),this._observedElements.delete(Z)}}}return x.\u0275fac=function(Z){return new(Z||x)(_.LFG(r))},x.\u0275prov=_.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})(),u=(()=>{class x{constructor(Z,ot,et){this._contentObserver=Z,this._elementRef=ot,this._ngZone=et,this.event=new _.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(Z){this._disabled=(0,T.Ig)(Z),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(Z){this._debounce=(0,T.su)(Z),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const Z=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?Z.pipe((0,n.b)(this.debounce)):Z).subscribe(this.event)})}_unsubscribe(){var Z;null===(Z=this._currentSubscription)||void 0===Z||Z.unsubscribe()}}return x.\u0275fac=function(Z){return new(Z||x)(_.Y36(s),_.Y36(_.SBq),_.Y36(_.R0b))},x.\u0275dir=_.lG2({type:x,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),x})(),b=(()=>{class x{}return x.\u0275fac=function(Z){return new(Z||x)},x.\u0275mod=_.oAB({type:x}),x.\u0275inj=_.cJS({providers:[r]}),x})()},91314:(U,$,m)=>{"use strict";m.d($,{aV:()=>pi,X_:()=>bt,Xj:()=>ut,U8:()=>Ce});var T=m(30495),_=m(69808),e=m(5e3),t=m(63191),n=m(70925),r=m(50226),s=m(47429),u=m(77579),b=m(50727),x=m(56451),B=m(95698),Z=m(82722);const ot=(0,n.Mq)();class et{constructor(te,ne){this._viewportRuler=te,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=ne}attach(){}enable(){if(this._canBeEnabled()){const te=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=te.style.left||"",this._previousHTMLStyles.top=te.style.top||"",te.style.left=(0,t.HM)(-this._previousScrollPosition.left),te.style.top=(0,t.HM)(-this._previousScrollPosition.top),te.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const te=this._document.documentElement,Oe=te.style,re=this._document.body.style,me=Oe.scrollBehavior||"",ye=re.scrollBehavior||"";this._isEnabled=!1,Oe.left=this._previousHTMLStyles.left,Oe.top=this._previousHTMLStyles.top,te.classList.remove("cdk-global-scrollblock"),ot&&(Oe.scrollBehavior=re.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),ot&&(Oe.scrollBehavior=me,re.scrollBehavior=ye)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const ne=this._document.body,Oe=this._viewportRuler.getViewportSize();return ne.scrollHeight>Oe.height||ne.scrollWidth>Oe.width}}class Pt{constructor(te,ne,Oe,re){this._scrollDispatcher=te,this._ngZone=ne,this._viewportRuler=Oe,this._config=re,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(te){this._overlayRef=te}enable(){if(this._scrollSubscription)return;const te=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=te.subscribe(()=>{const ne=this._viewportRuler.getViewportScrollPosition().top;Math.abs(ne-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=te.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class pt{enable(){}disable(){}attach(){}}function It(Te,te){return te.some(ne=>Te.bottom<ne.top||Te.top>ne.bottom||Te.right<ne.left||Te.left>ne.right)}function Ht(Te,te){return te.some(ne=>Te.top<ne.top||Te.bottom>ne.bottom||Te.left<ne.left||Te.right>ne.right)}class Jt{constructor(te,ne,Oe,re){this._scrollDispatcher=te,this._viewportRuler=ne,this._ngZone=Oe,this._config=re,this._scrollSubscription=null}attach(te){this._overlayRef=te}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const ne=this._overlayRef.overlayElement.getBoundingClientRect(),{width:Oe,height:re}=this._viewportRuler.getViewportSize();It(ne,[{width:Oe,height:re,bottom:re,right:Oe,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Ct=(()=>{class Te{constructor(ne,Oe,re,me){this._scrollDispatcher=ne,this._viewportRuler=Oe,this._ngZone=re,this.noop=()=>new pt,this.close=ye=>new Pt(this._scrollDispatcher,this._ngZone,this._viewportRuler,ye),this.block=()=>new et(this._viewportRuler,this._document),this.reposition=ye=>new Jt(this._scrollDispatcher,this._viewportRuler,this._ngZone,ye),this._document=me}}return Te.\u0275fac=function(ne){return new(ne||Te)(e.LFG(T.mF),e.LFG(T.rL),e.LFG(e.R0b),e.LFG(_.K0))},Te.\u0275prov=e.Yz7({token:Te,factory:Te.\u0275fac,providedIn:"root"}),Te})();class bt{constructor(te){if(this.scrollStrategy=new pt,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,te){const ne=Object.keys(te);for(const Oe of ne)void 0!==te[Oe]&&(this[Oe]=te[Oe])}}}class lt{constructor(te,ne){this.connectionPair=te,this.scrollableViewProperties=ne}}class Et{constructor(te,ne,Oe,re,me,ye,Qt,de,ti){this._portalOutlet=te,this._host=ne,this._pane=Oe,this._config=re,this._ngZone=me,this._keyboardDispatcher=ye,this._document=Qt,this._location=de,this._outsideClickDispatcher=ti,this._backdropElement=null,this._backdropClick=new u.x,this._attachments=new u.x,this._detachments=new u.x,this._locationChanges=b.w0.EMPTY,this._backdropClickHandler=ni=>this._backdropClick.next(ni),this._keydownEvents=new u.x,this._outsidePointerEvents=new u.x,re.scrollStrategy&&(this._scrollStrategy=re.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=re.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(te){let ne=this._portalOutlet.attach(te);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,B.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),ne}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const te=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),te}dispose(){var te;const ne=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null===(te=this._host)||void 0===te||te.remove(),this._previousHostParent=this._pane=this._host=null,ne&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(te){te!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=te,this.hasAttached()&&(te.attach(this),this.updatePosition()))}updateSize(te){this._config=Object.assign(Object.assign({},this._config),te),this._updateElementSize()}setDirection(te){this._config=Object.assign(Object.assign({},this._config),{direction:te}),this._updateElementDirection()}addPanelClass(te){this._pane&&this._toggleClasses(this._pane,te,!0)}removePanelClass(te){this._pane&&this._toggleClasses(this._pane,te,!1)}getDirection(){const te=this._config.direction;return te?"string"==typeof te?te:te.value:"ltr"}updateScrollStrategy(te){te!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=te,this.hasAttached()&&(te.attach(this),te.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const te=this._pane.style;te.width=(0,t.HM)(this._config.width),te.height=(0,t.HM)(this._config.height),te.minWidth=(0,t.HM)(this._config.minWidth),te.minHeight=(0,t.HM)(this._config.minHeight),te.maxWidth=(0,t.HM)(this._config.maxWidth),te.maxHeight=(0,t.HM)(this._config.maxHeight)}_togglePointerEvents(te){this._pane.style.pointerEvents=te?"":"none"}_attachBackdrop(){const te="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(te)})}):this._backdropElement.classList.add(te)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const te=this._backdropElement;if(!te)return;let ne;const Oe=()=>{te&&(te.removeEventListener("click",this._backdropClickHandler),te.removeEventListener("transitionend",Oe),this._disposeBackdrop(te)),this._config.backdropClass&&this._toggleClasses(te,this._config.backdropClass,!1),clearTimeout(ne)};te.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{te.addEventListener("transitionend",Oe)}),te.style.pointerEvents="none",ne=this._ngZone.runOutsideAngular(()=>setTimeout(Oe,500))}_toggleClasses(te,ne,Oe){const re=(0,t.Eq)(ne||[]).filter(me=>!!me);re.length&&(Oe?te.classList.add(...re):te.classList.remove(...re))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const te=this._ngZone.onStable.pipe((0,Z.R)((0,x.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),te.unsubscribe())})})}_disposeScrollStrategy(){const te=this._scrollStrategy;te&&(te.disable(),te.detach&&te.detach())}_disposeBackdrop(te){te&&(te.remove(),this._backdropElement===te&&(this._backdropElement=null))}}let ut=(()=>{class Te{constructor(ne,Oe){this._platform=Oe,this._document=ne}ngOnDestroy(){var ne;null===(ne=this._containerElement)||void 0===ne||ne.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const ne="cdk-overlay-container";if(this._platform.isBrowser||(0,n.Oy)()){const re=this._document.querySelectorAll(`.${ne}[platform="server"], .${ne}[platform="test"]`);for(let me=0;me<re.length;me++)re[me].remove()}const Oe=this._document.createElement("div");Oe.classList.add(ne),(0,n.Oy)()?Oe.setAttribute("platform","test"):this._platform.isBrowser||Oe.setAttribute("platform","server"),this._document.body.appendChild(Oe),this._containerElement=Oe}}return Te.\u0275fac=function(ne){return new(ne||Te)(e.LFG(_.K0),e.LFG(n.t4))},Te.\u0275prov=e.Yz7({token:Te,factory:Te.\u0275fac,providedIn:"root"}),Te})();const rt="cdk-overlay-connected-position-bounding-box",fe=/([A-Za-z%]+)$/;class Mt{constructor(te,ne,Oe,re,me){this._viewportRuler=ne,this._document=Oe,this._platform=re,this._overlayContainer=me,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new u.x,this._resizeSubscription=b.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(te)}get positions(){return this._preferredPositions}attach(te){this._validatePositions(),te.hostElement.classList.add(rt),this._overlayRef=te,this._boundingBox=te.hostElement,this._pane=te.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const te=this._originRect,ne=this._overlayRect,Oe=this._viewportRect,re=[];let me;for(let ye of this._preferredPositions){let Qt=this._getOriginPoint(te,ye),de=this._getOverlayPoint(Qt,ne,ye),ti=this._getOverlayFit(de,ne,Oe,ye);if(ti.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(ye,Qt);this._canFitWithFlexibleDimensions(ti,de,Oe)?re.push({position:ye,origin:Qt,overlayRect:ne,boundingBoxRect:this._calculateBoundingBoxRect(Qt,ye)}):(!me||me.overlayFit.visibleArea<ti.visibleArea)&&(me={overlayFit:ti,overlayPoint:de,originPoint:Qt,position:ye,overlayRect:ne})}if(re.length){let ye=null,Qt=-1;for(const de of re){const ti=de.boundingBoxRect.width*de.boundingBoxRect.height*(de.position.weight||1);ti>Qt&&(Qt=ti,ye=de)}return this._isPushed=!1,void this._applyPosition(ye.position,ye.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(me.position,me.originPoint);this._applyPosition(me.position,me.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Nt(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(rt),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const te=this._lastPosition||this._preferredPositions[0],ne=this._getOriginPoint(this._originRect,te);this._applyPosition(te,ne)}}withScrollableContainers(te){return this._scrollables=te,this}withPositions(te){return this._preferredPositions=te,-1===te.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(te){return this._viewportMargin=te,this}withFlexibleDimensions(te=!0){return this._hasFlexibleDimensions=te,this}withGrowAfterOpen(te=!0){return this._growAfterOpen=te,this}withPush(te=!0){return this._canPush=te,this}withLockedPosition(te=!0){return this._positionLocked=te,this}setOrigin(te){return this._origin=te,this}withDefaultOffsetX(te){return this._offsetX=te,this}withDefaultOffsetY(te){return this._offsetY=te,this}withTransformOriginOn(te){return this._transformOriginSelector=te,this}_getOriginPoint(te,ne){let Oe,re;if("center"==ne.originX)Oe=te.left+te.width/2;else{const me=this._isRtl()?te.right:te.left,ye=this._isRtl()?te.left:te.right;Oe="start"==ne.originX?me:ye}return re="center"==ne.originY?te.top+te.height/2:"top"==ne.originY?te.top:te.bottom,{x:Oe,y:re}}_getOverlayPoint(te,ne,Oe){let re,me;return re="center"==Oe.overlayX?-ne.width/2:"start"===Oe.overlayX?this._isRtl()?-ne.width:0:this._isRtl()?0:-ne.width,me="center"==Oe.overlayY?-ne.height/2:"top"==Oe.overlayY?0:-ne.height,{x:te.x+re,y:te.y+me}}_getOverlayFit(te,ne,Oe,re){const me=ve(ne);let{x:ye,y:Qt}=te,de=this._getOffset(re,"x"),ti=this._getOffset(re,"y");de&&(ye+=de),ti&&(Qt+=ti);let wi=0-Qt,yi=Qt+me.height-Oe.height,dn=this._subtractOverflows(me.width,0-ye,ye+me.width-Oe.width),mi=this._subtractOverflows(me.height,wi,yi),Zi=dn*mi;return{visibleArea:Zi,isCompletelyWithinViewport:me.width*me.height===Zi,fitsInViewportVertically:mi===me.height,fitsInViewportHorizontally:dn==me.width}}_canFitWithFlexibleDimensions(te,ne,Oe){if(this._hasFlexibleDimensions){const re=Oe.bottom-ne.y,me=Oe.right-ne.x,ye=ge(this._overlayRef.getConfig().minHeight),Qt=ge(this._overlayRef.getConfig().minWidth),ti=te.fitsInViewportHorizontally||null!=Qt&&Qt<=me;return(te.fitsInViewportVertically||null!=ye&&ye<=re)&&ti}return!1}_pushOverlayOnScreen(te,ne,Oe){if(this._previousPushAmount&&this._positionLocked)return{x:te.x+this._previousPushAmount.x,y:te.y+this._previousPushAmount.y};const re=ve(ne),me=this._viewportRect,ye=Math.max(te.x+re.width-me.width,0),Qt=Math.max(te.y+re.height-me.height,0),de=Math.max(me.top-Oe.top-te.y,0),ti=Math.max(me.left-Oe.left-te.x,0);let ni=0,Pi=0;return ni=re.width<=me.width?ti||-ye:te.x<this._viewportMargin?me.left-Oe.left-te.x:0,Pi=re.height<=me.height?de||-Qt:te.y<this._viewportMargin?me.top-Oe.top-te.y:0,this._previousPushAmount={x:ni,y:Pi},{x:te.x+ni,y:te.y+Pi}}_applyPosition(te,ne){if(this._setTransformOrigin(te),this._setOverlayElementStyles(ne,te),this._setBoundingBoxStyles(ne,te),te.panelClass&&this._addPanelClasses(te.panelClass),this._lastPosition=te,this._positionChanges.observers.length){const Oe=this._getScrollVisibility(),re=new lt(te,Oe);this._positionChanges.next(re)}this._isInitialRender=!1}_setTransformOrigin(te){if(!this._transformOriginSelector)return;const ne=this._boundingBox.querySelectorAll(this._transformOriginSelector);let Oe,re=te.overlayY;Oe="center"===te.overlayX?"center":this._isRtl()?"start"===te.overlayX?"right":"left":"start"===te.overlayX?"left":"right";for(let me=0;me<ne.length;me++)ne[me].style.transformOrigin=`${Oe} ${re}`}_calculateBoundingBoxRect(te,ne){const Oe=this._viewportRect,re=this._isRtl();let me,ye,Qt,ni,Pi,wi;if("top"===ne.overlayY)ye=te.y,me=Oe.height-ye+this._viewportMargin;else if("bottom"===ne.overlayY)Qt=Oe.height-te.y+2*this._viewportMargin,me=Oe.height-Qt+this._viewportMargin;else{const yi=Math.min(Oe.bottom-te.y+Oe.top,te.y),dn=this._lastBoundingBoxSize.height;me=2*yi,ye=te.y-yi,me>dn&&!this._isInitialRender&&!this._growAfterOpen&&(ye=te.y-dn/2)}if("end"===ne.overlayX&&!re||"start"===ne.overlayX&&re)wi=Oe.width-te.x+this._viewportMargin,ni=te.x-this._viewportMargin;else if("start"===ne.overlayX&&!re||"end"===ne.overlayX&&re)Pi=te.x,ni=Oe.right-te.x;else{const yi=Math.min(Oe.right-te.x+Oe.left,te.x),dn=this._lastBoundingBoxSize.width;ni=2*yi,Pi=te.x-yi,ni>dn&&!this._isInitialRender&&!this._growAfterOpen&&(Pi=te.x-dn/2)}return{top:ye,left:Pi,bottom:Qt,right:wi,width:ni,height:me}}_setBoundingBoxStyles(te,ne){const Oe=this._calculateBoundingBoxRect(te,ne);!this._isInitialRender&&!this._growAfterOpen&&(Oe.height=Math.min(Oe.height,this._lastBoundingBoxSize.height),Oe.width=Math.min(Oe.width,this._lastBoundingBoxSize.width));const re={};if(this._hasExactPosition())re.top=re.left="0",re.bottom=re.right=re.maxHeight=re.maxWidth="",re.width=re.height="100%";else{const me=this._overlayRef.getConfig().maxHeight,ye=this._overlayRef.getConfig().maxWidth;re.height=(0,t.HM)(Oe.height),re.top=(0,t.HM)(Oe.top),re.bottom=(0,t.HM)(Oe.bottom),re.width=(0,t.HM)(Oe.width),re.left=(0,t.HM)(Oe.left),re.right=(0,t.HM)(Oe.right),re.alignItems="center"===ne.overlayX?"center":"end"===ne.overlayX?"flex-end":"flex-start",re.justifyContent="center"===ne.overlayY?"center":"bottom"===ne.overlayY?"flex-end":"flex-start",me&&(re.maxHeight=(0,t.HM)(me)),ye&&(re.maxWidth=(0,t.HM)(ye))}this._lastBoundingBoxSize=Oe,Nt(this._boundingBox.style,re)}_resetBoundingBoxStyles(){Nt(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Nt(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(te,ne){const Oe={},re=this._hasExactPosition(),me=this._hasFlexibleDimensions,ye=this._overlayRef.getConfig();if(re){const ni=this._viewportRuler.getViewportScrollPosition();Nt(Oe,this._getExactOverlayY(ne,te,ni)),Nt(Oe,this._getExactOverlayX(ne,te,ni))}else Oe.position="static";let Qt="",de=this._getOffset(ne,"x"),ti=this._getOffset(ne,"y");de&&(Qt+=`translateX(${de}px) `),ti&&(Qt+=`translateY(${ti}px)`),Oe.transform=Qt.trim(),ye.maxHeight&&(re?Oe.maxHeight=(0,t.HM)(ye.maxHeight):me&&(Oe.maxHeight="")),ye.maxWidth&&(re?Oe.maxWidth=(0,t.HM)(ye.maxWidth):me&&(Oe.maxWidth="")),Nt(this._pane.style,Oe)}_getExactOverlayY(te,ne,Oe){let re={top:"",bottom:""},me=this._getOverlayPoint(ne,this._overlayRect,te);this._isPushed&&(me=this._pushOverlayOnScreen(me,this._overlayRect,Oe));let ye=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return me.y-=ye,"bottom"===te.overlayY?re.bottom=this._document.documentElement.clientHeight-(me.y+this._overlayRect.height)+"px":re.top=(0,t.HM)(me.y),re}_getExactOverlayX(te,ne,Oe){let ye,re={left:"",right:""},me=this._getOverlayPoint(ne,this._overlayRect,te);return this._isPushed&&(me=this._pushOverlayOnScreen(me,this._overlayRect,Oe)),ye=this._isRtl()?"end"===te.overlayX?"left":"right":"end"===te.overlayX?"right":"left","right"===ye?re.right=this._document.documentElement.clientWidth-(me.x+this._overlayRect.width)+"px":re.left=(0,t.HM)(me.x),re}_getScrollVisibility(){const te=this._getOriginRect(),ne=this._pane.getBoundingClientRect(),Oe=this._scrollables.map(re=>re.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Ht(te,Oe),isOriginOutsideView:It(te,Oe),isOverlayClipped:Ht(ne,Oe),isOverlayOutsideView:It(ne,Oe)}}_subtractOverflows(te,...ne){return ne.reduce((Oe,re)=>Oe-Math.max(re,0),te)}_getNarrowedViewportRect(){const te=this._document.documentElement.clientWidth,ne=this._document.documentElement.clientHeight,Oe=this._viewportRuler.getViewportScrollPosition();return{top:Oe.top+this._viewportMargin,left:Oe.left+this._viewportMargin,right:Oe.left+te-this._viewportMargin,bottom:Oe.top+ne-this._viewportMargin,width:te-2*this._viewportMargin,height:ne-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(te,ne){return"x"===ne?null==te.offsetX?this._offsetX:te.offsetX:null==te.offsetY?this._offsetY:te.offsetY}_validatePositions(){}_addPanelClasses(te){this._pane&&(0,t.Eq)(te).forEach(ne=>{""!==ne&&-1===this._appliedPanelClasses.indexOf(ne)&&(this._appliedPanelClasses.push(ne),this._pane.classList.add(ne))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(te=>{this._pane.classList.remove(te)}),this._appliedPanelClasses=[])}_getOriginRect(){const te=this._origin;if(te instanceof e.SBq)return te.nativeElement.getBoundingClientRect();if(te instanceof Element)return te.getBoundingClientRect();const ne=te.width||0,Oe=te.height||0;return{top:te.y,bottom:te.y+Oe,left:te.x,right:te.x+ne,height:Oe,width:ne}}}function Nt(Te,te){for(let ne in te)te.hasOwnProperty(ne)&&(Te[ne]=te[ne]);return Te}function ge(Te){if("number"!=typeof Te&&null!=Te){const[te,ne]=Te.split(fe);return ne&&"px"!==ne?null:parseFloat(te)}return Te||null}function ve(Te){return{top:Math.floor(Te.top),right:Math.floor(Te.right),bottom:Math.floor(Te.bottom),left:Math.floor(Te.left),width:Math.floor(Te.width),height:Math.floor(Te.height)}}const pe="cdk-global-overlay-wrapper";class He{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(te){const ne=te.getConfig();this._overlayRef=te,this._width&&!ne.width&&te.updateSize({width:this._width}),this._height&&!ne.height&&te.updateSize({height:this._height}),te.hostElement.classList.add(pe),this._isDisposed=!1}top(te=""){return this._bottomOffset="",this._topOffset=te,this._alignItems="flex-start",this}left(te=""){return this._rightOffset="",this._leftOffset=te,this._justifyContent="flex-start",this}bottom(te=""){return this._topOffset="",this._bottomOffset=te,this._alignItems="flex-end",this}right(te=""){return this._leftOffset="",this._rightOffset=te,this._justifyContent="flex-end",this}width(te=""){return this._overlayRef?this._overlayRef.updateSize({width:te}):this._width=te,this}height(te=""){return this._overlayRef?this._overlayRef.updateSize({height:te}):this._height=te,this}centerHorizontally(te=""){return this.left(te),this._justifyContent="center",this}centerVertically(te=""){return this.top(te),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const te=this._overlayRef.overlayElement.style,ne=this._overlayRef.hostElement.style,Oe=this._overlayRef.getConfig(),{width:re,height:me,maxWidth:ye,maxHeight:Qt}=Oe,de=!("100%"!==re&&"100vw"!==re||ye&&"100%"!==ye&&"100vw"!==ye),ti=!("100%"!==me&&"100vh"!==me||Qt&&"100%"!==Qt&&"100vh"!==Qt);te.position=this._cssPosition,te.marginLeft=de?"0":this._leftOffset,te.marginTop=ti?"0":this._topOffset,te.marginBottom=this._bottomOffset,te.marginRight=this._rightOffset,de?ne.justifyContent="flex-start":"center"===this._justifyContent?ne.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?ne.justifyContent="flex-end":"flex-end"===this._justifyContent&&(ne.justifyContent="flex-start"):ne.justifyContent=this._justifyContent,ne.alignItems=ti?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const te=this._overlayRef.overlayElement.style,ne=this._overlayRef.hostElement,Oe=ne.style;ne.classList.remove(pe),Oe.justifyContent=Oe.alignItems=te.marginTop=te.marginBottom=te.marginLeft=te.marginRight=te.position="",this._overlayRef=null,this._isDisposed=!0}}let ke=(()=>{class Te{constructor(ne,Oe,re,me){this._viewportRuler=ne,this._document=Oe,this._platform=re,this._overlayContainer=me}global(){return new He}flexibleConnectedTo(ne){return new Mt(ne,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return Te.\u0275fac=function(ne){return new(ne||Te)(e.LFG(T.rL),e.LFG(_.K0),e.LFG(n.t4),e.LFG(ut))},Te.\u0275prov=e.Yz7({token:Te,factory:Te.\u0275fac,providedIn:"root"}),Te})(),Ze=(()=>{class Te{constructor(ne){this._attachedOverlays=[],this._document=ne}ngOnDestroy(){this.detach()}add(ne){this.remove(ne),this._attachedOverlays.push(ne)}remove(ne){const Oe=this._attachedOverlays.indexOf(ne);Oe>-1&&this._attachedOverlays.splice(Oe,1),0===this._attachedOverlays.length&&this.detach()}}return Te.\u0275fac=function(ne){return new(ne||Te)(e.LFG(_.K0))},Te.\u0275prov=e.Yz7({token:Te,factory:Te.\u0275fac,providedIn:"root"}),Te})(),Di=(()=>{class Te extends Ze{constructor(ne){super(ne),this._keydownListener=Oe=>{const re=this._attachedOverlays;for(let me=re.length-1;me>-1;me--)if(re[me]._keydownEvents.observers.length>0){re[me]._keydownEvents.next(Oe);break}}}add(ne){super.add(ne),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return Te.\u0275fac=function(ne){return new(ne||Te)(e.LFG(_.K0))},Te.\u0275prov=e.Yz7({token:Te,factory:Te.\u0275fac,providedIn:"root"}),Te})(),$e=(()=>{class Te extends Ze{constructor(ne,Oe){super(ne),this._platform=Oe,this._cursorStyleIsSet=!1,this._pointerDownListener=re=>{this._pointerDownEventTarget=(0,n.sA)(re)},this._clickListener=re=>{const me=(0,n.sA)(re),ye="click"===re.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:me;this._pointerDownEventTarget=null;const Qt=this._attachedOverlays.slice();for(let de=Qt.length-1;de>-1;de--){const ti=Qt[de];if(!(ti._outsidePointerEvents.observers.length<1)&&ti.hasAttached()){if(ti.overlayElement.contains(me)||ti.overlayElement.contains(ye))break;ti._outsidePointerEvents.next(re)}}}}add(ne){if(super.add(ne),!this._isAttached){const Oe=this._document.body;Oe.addEventListener("pointerdown",this._pointerDownListener,!0),Oe.addEventListener("click",this._clickListener,!0),Oe.addEventListener("auxclick",this._clickListener,!0),Oe.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=Oe.style.cursor,Oe.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const ne=this._document.body;ne.removeEventListener("pointerdown",this._pointerDownListener,!0),ne.removeEventListener("click",this._clickListener,!0),ne.removeEventListener("auxclick",this._clickListener,!0),ne.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(ne.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return Te.\u0275fac=function(ne){return new(ne||Te)(e.LFG(_.K0),e.LFG(n.t4))},Te.\u0275prov=e.Yz7({token:Te,factory:Te.\u0275fac,providedIn:"root"}),Te})(),Le=0,pi=(()=>{class Te{constructor(ne,Oe,re,me,ye,Qt,de,ti,ni,Pi,wi){this.scrollStrategies=ne,this._overlayContainer=Oe,this._componentFactoryResolver=re,this._positionBuilder=me,this._keyboardDispatcher=ye,this._injector=Qt,this._ngZone=de,this._document=ti,this._directionality=ni,this._location=Pi,this._outsideClickDispatcher=wi}create(ne){const Oe=this._createHostElement(),re=this._createPaneElement(Oe),me=this._createPortalOutlet(re),ye=new bt(ne);return ye.direction=ye.direction||this._directionality.value,new Et(me,Oe,re,ye,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(ne){const Oe=this._document.createElement("div");return Oe.id="cdk-overlay-"+Le++,Oe.classList.add("cdk-overlay-pane"),ne.appendChild(Oe),Oe}_createHostElement(){const ne=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(ne),ne}_createPortalOutlet(ne){return this._appRef||(this._appRef=this._injector.get(e.z2F)),new s.u0(ne,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return Te.\u0275fac=function(ne){return new(ne||Te)(e.LFG(Ct),e.LFG(ut),e.LFG(e._Vd),e.LFG(ke),e.LFG(Di),e.LFG(e.zs3),e.LFG(e.R0b),e.LFG(_.K0),e.LFG(r.Is),e.LFG(_.Ye),e.LFG($e))},Te.\u0275prov=e.Yz7({token:Te,factory:Te.\u0275fac}),Te})();const jt={provide:new e.OlP("cdk-connected-overlay-scroll-strategy"),deps:[pi],useFactory:function(Te){return()=>Te.scrollStrategies.reposition()}};let Ce=(()=>{class Te{}return Te.\u0275fac=function(ne){return new(ne||Te)},Te.\u0275mod=e.oAB({type:Te}),Te.\u0275inj=e.cJS({providers:[pi,jt],imports:[[r.vT,s.eL,T.Cl],T.Cl]}),Te})()},70925:(U,$,m)=>{"use strict";m.d($,{t4:()=>t,ud:()=>n,sA:()=>Jt,ht:()=>Ht,kV:()=>It,Oy:()=>Ct,_i:()=>Tt,qK:()=>u,i$:()=>B,Mq:()=>et});var T=m(5e3),_=m(69808);let e;try{e="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(bt){e=!1}let r,t=(()=>{class bt{constructor(gt){this._platformId=gt,this.isBrowser=this._platformId?(0,_.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!e)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return bt.\u0275fac=function(gt){return new(gt||bt)(T.LFG(T.Lbi))},bt.\u0275prov=T.Yz7({token:bt,factory:bt.\u0275fac,providedIn:"root"}),bt})(),n=(()=>{class bt{}return bt.\u0275fac=function(gt){return new(gt||bt)},bt.\u0275mod=T.oAB({type:bt}),bt.\u0275inj=T.cJS({}),bt})();const s=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function u(){if(r)return r;if("object"!=typeof document||!document)return r=new Set(s),r;let bt=document.createElement("input");return r=new Set(s.filter(st=>(bt.setAttribute("type",st),bt.type===st))),r}let b,Z,ot,Pt;function B(bt){return function(){if(null==b&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>b=!0}))}finally{b=b||!1}return b}()?bt:!!bt.capture}function et(){if(null==ot){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return ot=!1,ot;if("scrollBehavior"in document.documentElement.style)ot=!0;else{const bt=Element.prototype.scrollTo;ot=!!bt&&!/\{\s*\[native code\]\s*\}/.test(bt.toString())}}return ot}function Tt(){if("object"!=typeof document||!document)return 0;if(null==Z){const bt=document.createElement("div"),st=bt.style;bt.dir="rtl",st.width="1px",st.overflow="auto",st.visibility="hidden",st.pointerEvents="none",st.position="absolute";const gt=document.createElement("div"),lt=gt.style;lt.width="2px",lt.height="1px",bt.appendChild(gt),document.body.appendChild(bt),Z=0,0===bt.scrollLeft&&(bt.scrollLeft=1,Z=0===bt.scrollLeft?1:2),bt.remove()}return Z}function It(bt){if(function(){if(null==Pt){const bt="undefined"!=typeof document?document.head:null;Pt=!(!bt||!bt.createShadowRoot&&!bt.attachShadow)}return Pt}()){const st=bt.getRootNode?bt.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&st instanceof ShadowRoot)return st}return null}function Ht(){let bt="undefined"!=typeof document&&document?document.activeElement:null;for(;bt&&bt.shadowRoot;){const st=bt.shadowRoot.activeElement;if(st===bt)break;bt=st}return bt}function Jt(bt){return bt.composedPath?bt.composedPath()[0]:bt.target}function Ct(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}},47429:(U,$,m)=>{"use strict";m.d($,{en:()=>ot,ig:()=>pt,Pl:()=>Ht,C5:()=>x,u0:()=>Tt,eL:()=>Ct,UE:()=>B});var T=m(5e3),_=m(69808);class b{attach(gt){return this._attachedHost=gt,gt.attach(this)}detach(){let gt=this._attachedHost;null!=gt&&(this._attachedHost=null,gt.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(gt){this._attachedHost=gt}}class x extends b{constructor(gt,lt,Bt,Dt){super(),this.component=gt,this.viewContainerRef=lt,this.injector=Bt,this.componentFactoryResolver=Dt}}class B extends b{constructor(gt,lt,Bt){super(),this.templateRef=gt,this.viewContainerRef=lt,this.context=Bt}get origin(){return this.templateRef.elementRef}attach(gt,lt=this.context){return this.context=lt,super.attach(gt)}detach(){return this.context=void 0,super.detach()}}class Z extends b{constructor(gt){super(),this.element=gt instanceof T.SBq?gt.nativeElement:gt}}class ot{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(gt){return gt instanceof x?(this._attachedPortal=gt,this.attachComponentPortal(gt)):gt instanceof B?(this._attachedPortal=gt,this.attachTemplatePortal(gt)):this.attachDomPortal&&gt instanceof Z?(this._attachedPortal=gt,this.attachDomPortal(gt)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(gt){this._disposeFn=gt}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class Tt extends ot{constructor(gt,lt,Bt,Dt,Et){super(),this.outletElement=gt,this._componentFactoryResolver=lt,this._appRef=Bt,this._defaultInjector=Dt,this.attachDomPortal=ut=>{const rt=ut.element,fe=this._document.createComment("dom-portal");rt.parentNode.insertBefore(fe,rt),this.outletElement.appendChild(rt),this._attachedPortal=ut,super.setDisposeFn(()=>{fe.parentNode&&fe.parentNode.replaceChild(rt,fe)})},this._document=Et}attachComponentPortal(gt){const Bt=(gt.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(gt.component);let Dt;return gt.viewContainerRef?(Dt=gt.viewContainerRef.createComponent(Bt,gt.viewContainerRef.length,gt.injector||gt.viewContainerRef.injector),this.setDisposeFn(()=>Dt.destroy())):(Dt=Bt.create(gt.injector||this._defaultInjector),this._appRef.attachView(Dt.hostView),this.setDisposeFn(()=>{this._appRef.detachView(Dt.hostView),Dt.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(Dt)),this._attachedPortal=gt,Dt}attachTemplatePortal(gt){let lt=gt.viewContainerRef,Bt=lt.createEmbeddedView(gt.templateRef,gt.context);return Bt.rootNodes.forEach(Dt=>this.outletElement.appendChild(Dt)),Bt.detectChanges(),this.setDisposeFn(()=>{let Dt=lt.indexOf(Bt);-1!==Dt&&lt.remove(Dt)}),this._attachedPortal=gt,Bt}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(gt){return gt.hostView.rootNodes[0]}}let pt=(()=>{class st extends B{constructor(lt,Bt){super(lt,Bt)}}return st.\u0275fac=function(lt){return new(lt||st)(T.Y36(T.Rgc),T.Y36(T.s_b))},st.\u0275dir=T.lG2({type:st,selectors:[["","cdkPortal",""]],exportAs:["cdkPortal"],features:[T.qOj]}),st})(),Ht=(()=>{class st extends ot{constructor(lt,Bt,Dt){super(),this._componentFactoryResolver=lt,this._viewContainerRef=Bt,this._isInitialized=!1,this.attached=new T.vpe,this.attachDomPortal=Et=>{const ut=Et.element,rt=this._document.createComment("dom-portal");Et.setAttachedHost(this),ut.parentNode.insertBefore(rt,ut),this._getRootNode().appendChild(ut),this._attachedPortal=Et,super.setDisposeFn(()=>{rt.parentNode&&rt.parentNode.replaceChild(ut,rt)})},this._document=Dt}get portal(){return this._attachedPortal}set portal(lt){this.hasAttached()&&!lt&&!this._isInitialized||(this.hasAttached()&&super.detach(),lt&&super.attach(lt),this._attachedPortal=lt||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(lt){lt.setAttachedHost(this);const Bt=null!=lt.viewContainerRef?lt.viewContainerRef:this._viewContainerRef,Et=(lt.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(lt.component),ut=Bt.createComponent(Et,Bt.length,lt.injector||Bt.injector);return Bt!==this._viewContainerRef&&this._getRootNode().appendChild(ut.hostView.rootNodes[0]),super.setDisposeFn(()=>ut.destroy()),this._attachedPortal=lt,this._attachedRef=ut,this.attached.emit(ut),ut}attachTemplatePortal(lt){lt.setAttachedHost(this);const Bt=this._viewContainerRef.createEmbeddedView(lt.templateRef,lt.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=lt,this._attachedRef=Bt,this.attached.emit(Bt),Bt}_getRootNode(){const lt=this._viewContainerRef.element.nativeElement;return lt.nodeType===lt.ELEMENT_NODE?lt:lt.parentNode}}return st.\u0275fac=function(lt){return new(lt||st)(T.Y36(T._Vd),T.Y36(T.s_b),T.Y36(_.K0))},st.\u0275dir=T.lG2({type:st,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[T.qOj]}),st})(),Ct=(()=>{class st{}return st.\u0275fac=function(lt){return new(lt||st)},st.\u0275mod=T.oAB({type:st}),st.\u0275inj=T.cJS({}),st})()},30495:(U,$,m)=>{"use strict";m.d($,{PQ:()=>pe,ZD:()=>Gt,mF:()=>ve,Cl:()=>Se,rL:()=>ke});var T=m(63191),_=m(5e3),e=m(84408),t=m(50727);const n={schedule(Zt){let ie=requestAnimationFrame,St=cancelAnimationFrame;const{delegate:jt}=n;jt&&(ie=jt.requestAnimationFrame,St=jt.cancelAnimationFrame);const Ce=ie(ri=>{St=void 0,Zt(ri)});return new t.w0(()=>null==St?void 0:St(Ce))},requestAnimationFrame(...Zt){const{delegate:ie}=n;return((null==ie?void 0:ie.requestAnimationFrame)||requestAnimationFrame)(...Zt)},cancelAnimationFrame(...Zt){const{delegate:ie}=n;return((null==ie?void 0:ie.cancelAnimationFrame)||cancelAnimationFrame)(...Zt)},delegate:void 0};var s=m(97565);new class extends s.v{flush(ie){this._active=!0,this._scheduled=void 0;const{actions:St}=this;let jt,Ce=-1;ie=ie||St.shift();const ri=St.length;do{if(jt=ie.execute(ie.state,ie.delay))break}while(++Ce<ri&&(ie=St.shift()));if(this._active=!1,jt){for(;++Ce<ri&&(ie=St.shift());)ie.unsubscribe();throw jt}}}(class extends e.o{constructor(ie,St){super(ie,St),this.scheduler=ie,this.work=St}requestAsyncId(ie,St,jt=0){return null!==jt&&jt>0?super.requestAsyncId(ie,St,jt):(ie.actions.push(this),ie._scheduled||(ie._scheduled=n.requestAnimationFrame(()=>ie.flush(void 0))))}recycleAsyncId(ie,St,jt=0){if(null!=jt&&jt>0||null==jt&&this.delay>0)return super.recycleAsyncId(ie,St,jt);0===ie.actions.length&&(n.cancelAnimationFrame(St),ie._scheduled=void 0)}});var B=m(77579),Z=m(39646),ot=m(68306),et=m(54968),Pt=(m(53101),m(34986)),pt=m(54482),It=m(38421),Ht=m(25403),Ct=m(5963);function bt(Zt,ie=Pt.P){return function(Zt){return(0,pt.e)((ie,St)=>{let jt=!1,Ce=null,ri=null,Te=!1;const te=()=>{if(null==ri||ri.unsubscribe(),ri=null,jt){jt=!1;const Oe=Ce;Ce=null,St.next(Oe)}Te&&St.complete()},ne=()=>{ri=null,Te&&St.complete()};ie.subscribe(new Ht.Q(St,Oe=>{jt=!0,Ce=Oe,ri||(0,It.Xf)(Zt()).subscribe(ri=new Ht.Q(St,te,ne))},()=>{Te=!0,(!jt||!ri||ri.closed)&&St.complete()}))})}(()=>(0,Ct.H)(Zt,ie))}var st=m(39300),gt=m(82722),lt=m(69808),Bt=m(70925),Dt=m(50226);let ve=(()=>{class Zt{constructor(St,jt,Ce){this._ngZone=St,this._platform=jt,this._scrolled=new B.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=Ce}register(St){this.scrollContainers.has(St)||this.scrollContainers.set(St,St.elementScrolled().subscribe(()=>this._scrolled.next(St)))}deregister(St){const jt=this.scrollContainers.get(St);jt&&(jt.unsubscribe(),this.scrollContainers.delete(St))}scrolled(St=20){return this._platform.isBrowser?new ot.y(jt=>{this._globalSubscription||this._addGlobalListener();const Ce=St>0?this._scrolled.pipe(bt(St)).subscribe(jt):this._scrolled.subscribe(jt);return this._scrolledCount++,()=>{Ce.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,Z.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((St,jt)=>this.deregister(jt)),this._scrolled.complete()}ancestorScrolled(St,jt){const Ce=this.getAncestorScrollContainers(St);return this.scrolled(jt).pipe((0,st.h)(ri=>!ri||Ce.indexOf(ri)>-1))}getAncestorScrollContainers(St){const jt=[];return this.scrollContainers.forEach((Ce,ri)=>{this._scrollableContainsElement(ri,St)&&jt.push(ri)}),jt}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(St,jt){let Ce=(0,T.fI)(jt),ri=St.getElementRef().nativeElement;do{if(Ce==ri)return!0}while(Ce=Ce.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{const St=this._getWindow();return(0,et.R)(St.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return Zt.\u0275fac=function(St){return new(St||Zt)(_.LFG(_.R0b),_.LFG(Bt.t4),_.LFG(lt.K0,8))},Zt.\u0275prov=_.Yz7({token:Zt,factory:Zt.\u0275fac,providedIn:"root"}),Zt})(),pe=(()=>{class Zt{constructor(St,jt,Ce,ri){this.elementRef=St,this.scrollDispatcher=jt,this.ngZone=Ce,this.dir=ri,this._destroyed=new B.x,this._elementScrolled=new ot.y(Te=>this.ngZone.runOutsideAngular(()=>(0,et.R)(this.elementRef.nativeElement,"scroll").pipe((0,gt.R)(this._destroyed)).subscribe(Te)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(St){const jt=this.elementRef.nativeElement,Ce=this.dir&&"rtl"==this.dir.value;null==St.left&&(St.left=Ce?St.end:St.start),null==St.right&&(St.right=Ce?St.start:St.end),null!=St.bottom&&(St.top=jt.scrollHeight-jt.clientHeight-St.bottom),Ce&&0!=(0,Bt._i)()?(null!=St.left&&(St.right=jt.scrollWidth-jt.clientWidth-St.left),2==(0,Bt._i)()?St.left=St.right:1==(0,Bt._i)()&&(St.left=St.right?-St.right:St.right)):null!=St.right&&(St.left=jt.scrollWidth-jt.clientWidth-St.right),this._applyScrollToOptions(St)}_applyScrollToOptions(St){const jt=this.elementRef.nativeElement;(0,Bt.Mq)()?jt.scrollTo(St):(null!=St.top&&(jt.scrollTop=St.top),null!=St.left&&(jt.scrollLeft=St.left))}measureScrollOffset(St){const jt="left",ri=this.elementRef.nativeElement;if("top"==St)return ri.scrollTop;if("bottom"==St)return ri.scrollHeight-ri.clientHeight-ri.scrollTop;const Te=this.dir&&"rtl"==this.dir.value;return"start"==St?St=Te?"right":jt:"end"==St&&(St=Te?jt:"right"),Te&&2==(0,Bt._i)()?St==jt?ri.scrollWidth-ri.clientWidth-ri.scrollLeft:ri.scrollLeft:Te&&1==(0,Bt._i)()?St==jt?ri.scrollLeft+ri.scrollWidth-ri.clientWidth:-ri.scrollLeft:St==jt?ri.scrollLeft:ri.scrollWidth-ri.clientWidth-ri.scrollLeft}}return Zt.\u0275fac=function(St){return new(St||Zt)(_.Y36(_.SBq),_.Y36(ve),_.Y36(_.R0b),_.Y36(Dt.Is,8))},Zt.\u0275dir=_.lG2({type:Zt,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),Zt})(),ke=(()=>{class Zt{constructor(St,jt,Ce){this._platform=St,this._change=new B.x,this._changeListener=ri=>{this._change.next(ri)},this._document=Ce,jt.runOutsideAngular(()=>{if(St.isBrowser){const ri=this._getWindow();ri.addEventListener("resize",this._changeListener),ri.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const St=this._getWindow();St.removeEventListener("resize",this._changeListener),St.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const St={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),St}getViewportRect(){const St=this.getViewportScrollPosition(),{width:jt,height:Ce}=this.getViewportSize();return{top:St.top,left:St.left,bottom:St.top+Ce,right:St.left+jt,height:Ce,width:jt}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const St=this._document,jt=this._getWindow(),Ce=St.documentElement,ri=Ce.getBoundingClientRect();return{top:-ri.top||St.body.scrollTop||jt.scrollY||Ce.scrollTop||0,left:-ri.left||St.body.scrollLeft||jt.scrollX||Ce.scrollLeft||0}}change(St=20){return St>0?this._change.pipe(bt(St)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const St=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:St.innerWidth,height:St.innerHeight}:{width:0,height:0}}}return Zt.\u0275fac=function(St){return new(St||Zt)(_.LFG(Bt.t4),_.LFG(_.R0b),_.LFG(lt.K0,8))},Zt.\u0275prov=_.Yz7({token:Zt,factory:Zt.\u0275fac,providedIn:"root"}),Zt})(),Gt=(()=>{class Zt{}return Zt.\u0275fac=function(St){return new(St||Zt)},Zt.\u0275mod=_.oAB({type:Zt}),Zt.\u0275inj=_.cJS({}),Zt})(),Se=(()=>{class Zt{}return Zt.\u0275fac=function(St){return new(St||Zt)},Zt.\u0275mod=_.oAB({type:Zt}),Zt.\u0275inj=_.cJS({imports:[[Dt.vT,Bt.ud,Gt],Dt.vT,Gt]}),Zt})()},69808:(U,$,m)=>{"use strict";m.d($,{mr:()=>Ht,Ov:()=>ka,ez:()=>es,K0:()=>s,Do:()=>Ct,V_:()=>x,Ye:()=>bt,S$:()=>pt,mk:()=>ae,sg:()=>Ji,O5:()=>zn,PC:()=>eo,RF:()=>$o,n9:()=>so,b0:()=>Jt,lw:()=>u,EM:()=>Ho,JF:()=>ma,NF:()=>Js,w_:()=>r,bD:()=>ws,q:()=>e,Mx:()=>Gn,HT:()=>n});var T=m(5e3);let _=null;function e(){return _}function n(xt){_||(_=xt)}class r{}const s=new T.OlP("DocumentToken");let u=(()=>{class xt{historyGo(V){throw new Error("Not implemented")}}return xt.\u0275fac=function(V){return new(V||xt)},xt.\u0275prov=T.Yz7({token:xt,factory:function(){return(0,T.LFG)(B)},providedIn:"platform"}),xt})();const x=new T.OlP("Location Initialized");let B=(()=>{class xt extends u{constructor(V){super(),this._doc=V,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return e().getBaseHref(this._doc)}onPopState(V){const W=e().getGlobalEventTarget(this._doc,"window");return W.addEventListener("popstate",V,!1),()=>W.removeEventListener("popstate",V)}onHashChange(V){const W=e().getGlobalEventTarget(this._doc,"window");return W.addEventListener("hashchange",V,!1),()=>W.removeEventListener("hashchange",V)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(V){this.location.pathname=V}pushState(V,W,At){Z()?this._history.pushState(V,W,At):this.location.hash=At}replaceState(V,W,At){Z()?this._history.replaceState(V,W,At):this.location.hash=At}forward(){this._history.forward()}back(){this._history.back()}historyGo(V=0){this._history.go(V)}getState(){return this._history.state}}return xt.\u0275fac=function(V){return new(V||xt)(T.LFG(s))},xt.\u0275prov=T.Yz7({token:xt,factory:function(){return new B((0,T.LFG)(s))},providedIn:"platform"}),xt})();function Z(){return!!window.history.pushState}function et(xt,Q){if(0==xt.length)return Q;if(0==Q.length)return xt;let V=0;return xt.endsWith("/")&&V++,Q.startsWith("/")&&V++,2==V?xt+Q.substring(1):1==V?xt+Q:xt+"/"+Q}function Tt(xt){const Q=xt.match(/#|\?|$/),V=Q&&Q.index||xt.length;return xt.slice(0,V-("/"===xt[V-1]?1:0))+xt.slice(V)}function Pt(xt){return xt&&"?"!==xt[0]?"?"+xt:xt}let pt=(()=>{class xt{historyGo(V){throw new Error("Not implemented")}}return xt.\u0275fac=function(V){return new(V||xt)},xt.\u0275prov=T.Yz7({token:xt,factory:function(){return function(xt){const Q=(0,T.LFG)(s).location;return new Jt((0,T.LFG)(u),Q&&Q.origin||"")}()},providedIn:"root"}),xt})();const Ht=new T.OlP("appBaseHref");let Jt=(()=>{class xt extends pt{constructor(V,W){if(super(),this._platformLocation=V,this._removeListenerFns=[],null==W&&(W=this._platformLocation.getBaseHrefFromDOM()),null==W)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=W}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(V){this._removeListenerFns.push(this._platformLocation.onPopState(V),this._platformLocation.onHashChange(V))}getBaseHref(){return this._baseHref}prepareExternalUrl(V){return et(this._baseHref,V)}path(V=!1){const W=this._platformLocation.pathname+Pt(this._platformLocation.search),At=this._platformLocation.hash;return At&&V?`${W}${At}`:W}pushState(V,W,At,Be){const vi=this.prepareExternalUrl(At+Pt(Be));this._platformLocation.pushState(V,W,vi)}replaceState(V,W,At,Be){const vi=this.prepareExternalUrl(At+Pt(Be));this._platformLocation.replaceState(V,W,vi)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(V=0){var W,At;null===(At=(W=this._platformLocation).historyGo)||void 0===At||At.call(W,V)}}return xt.\u0275fac=function(V){return new(V||xt)(T.LFG(u),T.LFG(Ht,8))},xt.\u0275prov=T.Yz7({token:xt,factory:xt.\u0275fac}),xt})(),Ct=(()=>{class xt extends pt{constructor(V,W){super(),this._platformLocation=V,this._baseHref="",this._removeListenerFns=[],null!=W&&(this._baseHref=W)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(V){this._removeListenerFns.push(this._platformLocation.onPopState(V),this._platformLocation.onHashChange(V))}getBaseHref(){return this._baseHref}path(V=!1){let W=this._platformLocation.hash;return null==W&&(W="#"),W.length>0?W.substring(1):W}prepareExternalUrl(V){const W=et(this._baseHref,V);return W.length>0?"#"+W:W}pushState(V,W,At,Be){let vi=this.prepareExternalUrl(At+Pt(Be));0==vi.length&&(vi=this._platformLocation.pathname),this._platformLocation.pushState(V,W,vi)}replaceState(V,W,At,Be){let vi=this.prepareExternalUrl(At+Pt(Be));0==vi.length&&(vi=this._platformLocation.pathname),this._platformLocation.replaceState(V,W,vi)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(V=0){var W,At;null===(At=(W=this._platformLocation).historyGo)||void 0===At||At.call(W,V)}}return xt.\u0275fac=function(V){return new(V||xt)(T.LFG(u),T.LFG(Ht,8))},xt.\u0275prov=T.Yz7({token:xt,factory:xt.\u0275fac}),xt})(),bt=(()=>{class xt{constructor(V,W){this._subject=new T.vpe,this._urlChangeListeners=[],this._platformStrategy=V;const At=this._platformStrategy.getBaseHref();this._platformLocation=W,this._baseHref=Tt(lt(At)),this._platformStrategy.onPopState(Be=>{this._subject.emit({url:this.path(!0),pop:!0,state:Be.state,type:Be.type})})}path(V=!1){return this.normalize(this._platformStrategy.path(V))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(V,W=""){return this.path()==this.normalize(V+Pt(W))}normalize(V){return xt.stripTrailingSlash(function(xt,Q){return xt&&Q.startsWith(xt)?Q.substring(xt.length):Q}(this._baseHref,lt(V)))}prepareExternalUrl(V){return V&&"/"!==V[0]&&(V="/"+V),this._platformStrategy.prepareExternalUrl(V)}go(V,W="",At=null){this._platformStrategy.pushState(At,"",V,W),this._notifyUrlChangeListeners(this.prepareExternalUrl(V+Pt(W)),At)}replaceState(V,W="",At=null){this._platformStrategy.replaceState(At,"",V,W),this._notifyUrlChangeListeners(this.prepareExternalUrl(V+Pt(W)),At)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(V=0){var W,At;null===(At=(W=this._platformStrategy).historyGo)||void 0===At||At.call(W,V)}onUrlChange(V){this._urlChangeListeners.push(V),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(W=>{this._notifyUrlChangeListeners(W.url,W.state)}))}_notifyUrlChangeListeners(V="",W){this._urlChangeListeners.forEach(At=>At(V,W))}subscribe(V,W,At){return this._subject.subscribe({next:V,error:W,complete:At})}}return xt.normalizeQueryParams=Pt,xt.joinWithSlash=et,xt.stripTrailingSlash=Tt,xt.\u0275fac=function(V){return new(V||xt)(T.LFG(pt),T.LFG(u))},xt.\u0275prov=T.Yz7({token:xt,factory:function(){return new bt((0,T.LFG)(pt),(0,T.LFG)(u))},providedIn:"root"}),xt})();function lt(xt){return xt.replace(/\/index.html$/,"")}var Et=(()=>((Et=Et||{})[Et.Zero=0]="Zero",Et[Et.One=1]="One",Et[Et.Two=2]="Two",Et[Et.Few=3]="Few",Et[Et.Many=4]="Many",Et[Et.Other=5]="Other",Et))();const Ce=T.kL8;class Zr{}let Vi=(()=>{class xt extends Zr{constructor(V){super(),this.locale=V}getPluralCategory(V,W){switch(Ce(W||this.locale)(V)){case Et.Zero:return"zero";case Et.One:return"one";case Et.Two:return"two";case Et.Few:return"few";case Et.Many:return"many";default:return"other"}}}return xt.\u0275fac=function(V){return new(V||xt)(T.LFG(T.soG))},xt.\u0275prov=T.Yz7({token:xt,factory:xt.\u0275fac}),xt})();function Gn(xt,Q){Q=encodeURIComponent(Q);for(const V of xt.split(";")){const W=V.indexOf("="),[At,Be]=-1==W?[V,""]:[V.slice(0,W),V.slice(W+1)];if(At.trim()===Q)return decodeURIComponent(Be)}return null}let ae=(()=>{class xt{constructor(V,W,At,Be){this._iterableDiffers=V,this._keyValueDiffers=W,this._ngEl=At,this._renderer=Be,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(V){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof V?V.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(V){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof V?V.split(/\s+/):V,this._rawClass&&((0,T.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const V=this._iterableDiffer.diff(this._rawClass);V&&this._applyIterableChanges(V)}else if(this._keyValueDiffer){const V=this._keyValueDiffer.diff(this._rawClass);V&&this._applyKeyValueChanges(V)}}_applyKeyValueChanges(V){V.forEachAddedItem(W=>this._toggleClass(W.key,W.currentValue)),V.forEachChangedItem(W=>this._toggleClass(W.key,W.currentValue)),V.forEachRemovedItem(W=>{W.previousValue&&this._toggleClass(W.key,!1)})}_applyIterableChanges(V){V.forEachAddedItem(W=>{if("string"!=typeof W.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,T.AaK)(W.item)}`);this._toggleClass(W.item,!0)}),V.forEachRemovedItem(W=>this._toggleClass(W.item,!1))}_applyClasses(V){V&&(Array.isArray(V)||V instanceof Set?V.forEach(W=>this._toggleClass(W,!0)):Object.keys(V).forEach(W=>this._toggleClass(W,!!V[W])))}_removeClasses(V){V&&(Array.isArray(V)||V instanceof Set?V.forEach(W=>this._toggleClass(W,!1)):Object.keys(V).forEach(W=>this._toggleClass(W,!1)))}_toggleClass(V,W){(V=V.trim())&&V.split(/\s+/g).forEach(At=>{W?this._renderer.addClass(this._ngEl.nativeElement,At):this._renderer.removeClass(this._ngEl.nativeElement,At)})}}return xt.\u0275fac=function(V){return new(V||xt)(T.Y36(T.ZZ4),T.Y36(T.aQg),T.Y36(T.SBq),T.Y36(T.Qsj))},xt.\u0275dir=T.lG2({type:xt,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),xt})();class Oi{constructor(Q,V,W,At){this.$implicit=Q,this.ngForOf=V,this.index=W,this.count=At}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ji=(()=>{class xt{constructor(V,W,At){this._viewContainer=V,this._template=W,this._differs=At,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(V){this._ngForOf=V,this._ngForOfDirty=!0}set ngForTrackBy(V){this._trackByFn=V}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(V){V&&(this._template=V)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const V=this._ngForOf;!this._differ&&V&&(this._differ=this._differs.find(V).create(this.ngForTrackBy))}if(this._differ){const V=this._differ.diff(this._ngForOf);V&&this._applyChanges(V)}}_applyChanges(V){const W=this._viewContainer;V.forEachOperation((At,Be,vi)=>{if(null==At.previousIndex)W.createEmbeddedView(this._template,new Oi(At.item,this._ngForOf,-1,-1),null===vi?void 0:vi);else if(null==vi)W.remove(null===Be?void 0:Be);else if(null!==Be){const ln=W.get(Be);W.move(ln,vi),Yi(ln,At)}});for(let At=0,Be=W.length;At<Be;At++){const ln=W.get(At).context;ln.index=At,ln.count=Be,ln.ngForOf=this._ngForOf}V.forEachIdentityChange(At=>{Yi(W.get(At.currentIndex),At)})}static ngTemplateContextGuard(V,W){return!0}}return xt.\u0275fac=function(V){return new(V||xt)(T.Y36(T.s_b),T.Y36(T.Rgc),T.Y36(T.ZZ4))},xt.\u0275dir=T.lG2({type:xt,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),xt})();function Yi(xt,Q){xt.context.$implicit=Q.item}let zn=(()=>{class xt{constructor(V,W){this._viewContainer=V,this._context=new Yn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=W}set ngIf(V){this._context.$implicit=this._context.ngIf=V,this._updateView()}set ngIfThen(V){kn("ngIfThen",V),this._thenTemplateRef=V,this._thenViewRef=null,this._updateView()}set ngIfElse(V){kn("ngIfElse",V),this._elseTemplateRef=V,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(V,W){return!0}}return xt.\u0275fac=function(V){return new(V||xt)(T.Y36(T.s_b),T.Y36(T.Rgc))},xt.\u0275dir=T.lG2({type:xt,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),xt})();class Yn{constructor(){this.$implicit=null,this.ngIf=null}}function kn(xt,Q){if(Q&&!Q.createEmbeddedView)throw new Error(`${xt} must be a TemplateRef, but received '${(0,T.AaK)(Q)}'.`)}class xo{constructor(Q,V){this._viewContainerRef=Q,this._templateRef=V,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(Q){Q&&!this._created?this.create():!Q&&this._created&&this.destroy()}}let $o=(()=>{class xt{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(V){this._ngSwitch=V,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(V){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(V)}_matchCase(V){const W=V==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||W,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),W}_updateDefaultCases(V){if(this._defaultViews&&V!==this._defaultUsed){this._defaultUsed=V;for(let W=0;W<this._defaultViews.length;W++)this._defaultViews[W].enforceState(V)}}}return xt.\u0275fac=function(V){return new(V||xt)},xt.\u0275dir=T.lG2({type:xt,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),xt})(),so=(()=>{class xt{constructor(V,W,At){this.ngSwitch=At,At._addCase(),this._view=new xo(V,W)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return xt.\u0275fac=function(V){return new(V||xt)(T.Y36(T.s_b),T.Y36(T.Rgc),T.Y36($o,9))},xt.\u0275dir=T.lG2({type:xt,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),xt})(),eo=(()=>{class xt{constructor(V,W,At){this._ngEl=V,this._differs=W,this._renderer=At,this._ngStyle=null,this._differ=null}set ngStyle(V){this._ngStyle=V,!this._differ&&V&&(this._differ=this._differs.find(V).create())}ngDoCheck(){if(this._differ){const V=this._differ.diff(this._ngStyle);V&&this._applyChanges(V)}}_setStyle(V,W){const[At,Be]=V.split(".");null!=(W=null!=W&&Be?`${W}${Be}`:W)?this._renderer.setStyle(this._ngEl.nativeElement,At,W):this._renderer.removeStyle(this._ngEl.nativeElement,At)}_applyChanges(V){V.forEachRemovedItem(W=>this._setStyle(W.key,null)),V.forEachAddedItem(W=>this._setStyle(W.key,W.currentValue)),V.forEachChangedItem(W=>this._setStyle(W.key,W.currentValue))}}return xt.\u0275fac=function(V){return new(V||xt)(T.Y36(T.SBq),T.Y36(T.aQg),T.Y36(T.Qsj))},xt.\u0275dir=T.lG2({type:xt,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),xt})();class Do{createSubscription(Q,V){return Q.subscribe({next:V,error:W=>{throw W}})}dispose(Q){Q.unsubscribe()}onDestroy(Q){Q.unsubscribe()}}class jo{createSubscription(Q,V){return Q.then(V,W=>{throw W})}dispose(Q){}onDestroy(Q){}}const Io=new jo,Ka=new Do;let ka=(()=>{class xt{constructor(V){this._ref=V,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(V){return this._obj?V!==this._obj?(this._dispose(),this.transform(V)):this._latestValue:(V&&this._subscribe(V),this._latestValue)}_subscribe(V){this._obj=V,this._strategy=this._selectStrategy(V),this._subscription=this._strategy.createSubscription(V,W=>this._updateLatestValue(V,W))}_selectStrategy(V){if((0,T.QGY)(V))return Io;if((0,T.F4k)(V))return Ka;throw function(xt,Q){return Error(`InvalidPipeArgument: '${Q}' for pipe '${(0,T.AaK)(xt)}'`)}(xt,V)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(V,W){V===this._obj&&(this._latestValue=W,this._ref.markForCheck())}}return xt.\u0275fac=function(V){return new(V||xt)(T.Y36(T.sBO,16))},xt.\u0275pipe=T.Yjl({name:"async",type:xt,pure:!1}),xt})(),es=(()=>{class xt{}return xt.\u0275fac=function(V){return new(V||xt)},xt.\u0275mod=T.oAB({type:xt}),xt.\u0275inj=T.cJS({providers:[{provide:Zr,useClass:Vi}]}),xt})();const ws="browser";function Js(xt){return xt===ws}let Ho=(()=>{class xt{}return xt.\u0275prov=(0,T.Yz7)({token:xt,providedIn:"root",factory:()=>new cs((0,T.LFG)(s),window)}),xt})();class cs{constructor(Q,V){this.document=Q,this.window=V,this.offset=()=>[0,0]}setOffset(Q){this.offset=Array.isArray(Q)?()=>Q:Q}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(Q){this.supportsScrolling()&&this.window.scrollTo(Q[0],Q[1])}scrollToAnchor(Q){if(!this.supportsScrolling())return;const V=function(xt,Q){const V=xt.getElementById(Q)||xt.getElementsByName(Q)[0];if(V)return V;if("function"==typeof xt.createTreeWalker&&xt.body&&(xt.body.createShadowRoot||xt.body.attachShadow)){const W=xt.createTreeWalker(xt.body,NodeFilter.SHOW_ELEMENT);let At=W.currentNode;for(;At;){const Be=At.shadowRoot;if(Be){const vi=Be.getElementById(Q)||Be.querySelector(`[name="${Q}"]`);if(vi)return vi}At=W.nextNode()}}return null}(this.document,Q);V&&(this.scrollToElement(V),this.attemptFocus(V))}setHistoryScrollRestoration(Q){if(this.supportScrollRestoration()){const V=this.window.history;V&&V.scrollRestoration&&(V.scrollRestoration=Q)}}scrollToElement(Q){const V=Q.getBoundingClientRect(),W=V.left+this.window.pageXOffset,At=V.top+this.window.pageYOffset,Be=this.offset();this.window.scrollTo(W-Be[0],At-Be[1])}attemptFocus(Q){return Q.focus(),this.document.activeElement===Q}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const Q=Cl(this.window.history)||Cl(Object.getPrototypeOf(this.window.history));return!(!Q||!Q.writable&&!Q.set)}catch(Q){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(Q){return!1}}}function Cl(xt){return Object.getOwnPropertyDescriptor(xt,"scrollRestoration")}class ma{}},40520:(U,$,m)=>{"use strict";m.d($,{eN:()=>Mt,JF:()=>Oe});var T=m(69808),_=m(5e3),e=m(39646),t=m(68306),n=m(24351),r=m(39300),s=m(54004);class u{}class b{}class x{constructor(Qt){this.normalizedNames=new Map,this.lazyUpdate=null,Qt?this.lazyInit="string"==typeof Qt?()=>{this.headers=new Map,Qt.split("\n").forEach(de=>{const ti=de.indexOf(":");if(ti>0){const ni=de.slice(0,ti),Pi=ni.toLowerCase(),wi=de.slice(ti+1).trim();this.maybeSetNormalizedName(ni,Pi),this.headers.has(Pi)?this.headers.get(Pi).push(wi):this.headers.set(Pi,[wi])}})}:()=>{this.headers=new Map,Object.keys(Qt).forEach(de=>{let ti=Qt[de];const ni=de.toLowerCase();"string"==typeof ti&&(ti=[ti]),ti.length>0&&(this.headers.set(ni,ti),this.maybeSetNormalizedName(de,ni))})}:this.headers=new Map}has(Qt){return this.init(),this.headers.has(Qt.toLowerCase())}get(Qt){this.init();const de=this.headers.get(Qt.toLowerCase());return de&&de.length>0?de[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(Qt){return this.init(),this.headers.get(Qt.toLowerCase())||null}append(Qt,de){return this.clone({name:Qt,value:de,op:"a"})}set(Qt,de){return this.clone({name:Qt,value:de,op:"s"})}delete(Qt,de){return this.clone({name:Qt,value:de,op:"d"})}maybeSetNormalizedName(Qt,de){this.normalizedNames.has(de)||this.normalizedNames.set(de,Qt)}init(){this.lazyInit&&(this.lazyInit instanceof x?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(Qt=>this.applyUpdate(Qt)),this.lazyUpdate=null))}copyFrom(Qt){Qt.init(),Array.from(Qt.headers.keys()).forEach(de=>{this.headers.set(de,Qt.headers.get(de)),this.normalizedNames.set(de,Qt.normalizedNames.get(de))})}clone(Qt){const de=new x;return de.lazyInit=this.lazyInit&&this.lazyInit instanceof x?this.lazyInit:this,de.lazyUpdate=(this.lazyUpdate||[]).concat([Qt]),de}applyUpdate(Qt){const de=Qt.name.toLowerCase();switch(Qt.op){case"a":case"s":let ti=Qt.value;if("string"==typeof ti&&(ti=[ti]),0===ti.length)return;this.maybeSetNormalizedName(Qt.name,de);const ni=("a"===Qt.op?this.headers.get(de):void 0)||[];ni.push(...ti),this.headers.set(de,ni);break;case"d":const Pi=Qt.value;if(Pi){let wi=this.headers.get(de);if(!wi)return;wi=wi.filter(yi=>-1===Pi.indexOf(yi)),0===wi.length?(this.headers.delete(de),this.normalizedNames.delete(de)):this.headers.set(de,wi)}else this.headers.delete(de),this.normalizedNames.delete(de)}}forEach(Qt){this.init(),Array.from(this.normalizedNames.keys()).forEach(de=>Qt(this.normalizedNames.get(de),this.headers.get(de)))}}class B{encodeKey(Qt){return Tt(Qt)}encodeValue(Qt){return Tt(Qt)}decodeKey(Qt){return decodeURIComponent(Qt)}decodeValue(Qt){return decodeURIComponent(Qt)}}const ot=/%(\d[a-f0-9])/gi,et={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function Tt(ye){return encodeURIComponent(ye).replace(ot,(Qt,de)=>{var ti;return null!==(ti=et[de])&&void 0!==ti?ti:Qt})}function Pt(ye){return`${ye}`}class pt{constructor(Qt={}){if(this.updates=null,this.cloneFrom=null,this.encoder=Qt.encoder||new B,Qt.fromString){if(Qt.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(ye,Qt){const de=new Map;return ye.length>0&&ye.replace(/^\?/,"").split("&").forEach(ni=>{const Pi=ni.indexOf("="),[wi,yi]=-1==Pi?[Qt.decodeKey(ni),""]:[Qt.decodeKey(ni.slice(0,Pi)),Qt.decodeValue(ni.slice(Pi+1))],dn=de.get(wi)||[];dn.push(yi),de.set(wi,dn)}),de}(Qt.fromString,this.encoder)}else Qt.fromObject?(this.map=new Map,Object.keys(Qt.fromObject).forEach(de=>{const ti=Qt.fromObject[de];this.map.set(de,Array.isArray(ti)?ti:[ti])})):this.map=null}has(Qt){return this.init(),this.map.has(Qt)}get(Qt){this.init();const de=this.map.get(Qt);return de?de[0]:null}getAll(Qt){return this.init(),this.map.get(Qt)||null}keys(){return this.init(),Array.from(this.map.keys())}append(Qt,de){return this.clone({param:Qt,value:de,op:"a"})}appendAll(Qt){const de=[];return Object.keys(Qt).forEach(ti=>{const ni=Qt[ti];Array.isArray(ni)?ni.forEach(Pi=>{de.push({param:ti,value:Pi,op:"a"})}):de.push({param:ti,value:ni,op:"a"})}),this.clone(de)}set(Qt,de){return this.clone({param:Qt,value:de,op:"s"})}delete(Qt,de){return this.clone({param:Qt,value:de,op:"d"})}toString(){return this.init(),this.keys().map(Qt=>{const de=this.encoder.encodeKey(Qt);return this.map.get(Qt).map(ti=>de+"="+this.encoder.encodeValue(ti)).join("&")}).filter(Qt=>""!==Qt).join("&")}clone(Qt){const de=new pt({encoder:this.encoder});return de.cloneFrom=this.cloneFrom||this,de.updates=(this.updates||[]).concat(Qt),de}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(Qt=>this.map.set(Qt,this.cloneFrom.map.get(Qt))),this.updates.forEach(Qt=>{switch(Qt.op){case"a":case"s":const de=("a"===Qt.op?this.map.get(Qt.param):void 0)||[];de.push(Pt(Qt.value)),this.map.set(Qt.param,de);break;case"d":if(void 0===Qt.value){this.map.delete(Qt.param);break}{let ti=this.map.get(Qt.param)||[];const ni=ti.indexOf(Pt(Qt.value));-1!==ni&&ti.splice(ni,1),ti.length>0?this.map.set(Qt.param,ti):this.map.delete(Qt.param)}}}),this.cloneFrom=this.updates=null)}}class Ht{constructor(){this.map=new Map}set(Qt,de){return this.map.set(Qt,de),this}get(Qt){return this.map.has(Qt)||this.map.set(Qt,Qt.defaultValue()),this.map.get(Qt)}delete(Qt){return this.map.delete(Qt),this}has(Qt){return this.map.has(Qt)}keys(){return this.map.keys()}}function Ct(ye){return"undefined"!=typeof ArrayBuffer&&ye instanceof ArrayBuffer}function bt(ye){return"undefined"!=typeof Blob&&ye instanceof Blob}function st(ye){return"undefined"!=typeof FormData&&ye instanceof FormData}class lt{constructor(Qt,de,ti,ni){let Pi;if(this.url=de,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=Qt.toUpperCase(),function(ye){switch(ye){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||ni?(this.body=void 0!==ti?ti:null,Pi=ni):Pi=ti,Pi&&(this.reportProgress=!!Pi.reportProgress,this.withCredentials=!!Pi.withCredentials,Pi.responseType&&(this.responseType=Pi.responseType),Pi.headers&&(this.headers=Pi.headers),Pi.context&&(this.context=Pi.context),Pi.params&&(this.params=Pi.params)),this.headers||(this.headers=new x),this.context||(this.context=new Ht),this.params){const wi=this.params.toString();if(0===wi.length)this.urlWithParams=de;else{const yi=de.indexOf("?");this.urlWithParams=de+(-1===yi?"?":yi<de.length-1?"&":"")+wi}}else this.params=new pt,this.urlWithParams=de}serializeBody(){return null===this.body?null:Ct(this.body)||bt(this.body)||st(this.body)||"undefined"!=typeof URLSearchParams&&this.body instanceof URLSearchParams||"string"==typeof this.body?this.body:this.body instanceof pt?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||st(this.body)?null:bt(this.body)?this.body.type||null:Ct(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof pt?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(Qt={}){var de;const ti=Qt.method||this.method,ni=Qt.url||this.url,Pi=Qt.responseType||this.responseType,wi=void 0!==Qt.body?Qt.body:this.body,yi=void 0!==Qt.withCredentials?Qt.withCredentials:this.withCredentials,dn=void 0!==Qt.reportProgress?Qt.reportProgress:this.reportProgress;let mi=Qt.headers||this.headers,Zi=Qt.params||this.params;const Re=null!==(de=Qt.context)&&void 0!==de?de:this.context;return void 0!==Qt.setHeaders&&(mi=Object.keys(Qt.setHeaders).reduce((xe,Ci)=>xe.set(Ci,Qt.setHeaders[Ci]),mi)),Qt.setParams&&(Zi=Object.keys(Qt.setParams).reduce((xe,Ci)=>xe.set(Ci,Qt.setParams[Ci]),Zi)),new lt(ti,ni,wi,{params:Zi,headers:mi,context:Re,reportProgress:dn,responseType:Pi,withCredentials:yi})}}var Bt=(()=>((Bt=Bt||{})[Bt.Sent=0]="Sent",Bt[Bt.UploadProgress=1]="UploadProgress",Bt[Bt.ResponseHeader=2]="ResponseHeader",Bt[Bt.DownloadProgress=3]="DownloadProgress",Bt[Bt.Response=4]="Response",Bt[Bt.User=5]="User",Bt))();class Dt{constructor(Qt,de=200,ti="OK"){this.headers=Qt.headers||new x,this.status=void 0!==Qt.status?Qt.status:de,this.statusText=Qt.statusText||ti,this.url=Qt.url||null,this.ok=this.status>=200&&this.status<300}}class Et extends Dt{constructor(Qt={}){super(Qt),this.type=Bt.ResponseHeader}clone(Qt={}){return new Et({headers:Qt.headers||this.headers,status:void 0!==Qt.status?Qt.status:this.status,statusText:Qt.statusText||this.statusText,url:Qt.url||this.url||void 0})}}class ut extends Dt{constructor(Qt={}){super(Qt),this.type=Bt.Response,this.body=void 0!==Qt.body?Qt.body:null}clone(Qt={}){return new ut({body:void 0!==Qt.body?Qt.body:this.body,headers:Qt.headers||this.headers,status:void 0!==Qt.status?Qt.status:this.status,statusText:Qt.statusText||this.statusText,url:Qt.url||this.url||void 0})}}class rt extends Dt{constructor(Qt){super(Qt,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${Qt.url||"(unknown url)"}`:`Http failure response for ${Qt.url||"(unknown url)"}: ${Qt.status} ${Qt.statusText}`,this.error=Qt.error||null}}function fe(ye,Qt){return{body:Qt,headers:ye.headers,context:ye.context,observe:ye.observe,params:ye.params,reportProgress:ye.reportProgress,responseType:ye.responseType,withCredentials:ye.withCredentials}}let Mt=(()=>{class ye{constructor(de){this.handler=de}request(de,ti,ni={}){let Pi;if(de instanceof lt)Pi=de;else{let dn,mi;dn=ni.headers instanceof x?ni.headers:new x(ni.headers),ni.params&&(mi=ni.params instanceof pt?ni.params:new pt({fromObject:ni.params})),Pi=new lt(de,ti,void 0!==ni.body?ni.body:null,{headers:dn,context:ni.context,params:mi,reportProgress:ni.reportProgress,responseType:ni.responseType||"json",withCredentials:ni.withCredentials})}const wi=(0,e.of)(Pi).pipe((0,n.b)(dn=>this.handler.handle(dn)));if(de instanceof lt||"events"===ni.observe)return wi;const yi=wi.pipe((0,r.h)(dn=>dn instanceof ut));switch(ni.observe||"body"){case"body":switch(Pi.responseType){case"arraybuffer":return yi.pipe((0,s.U)(dn=>{if(null!==dn.body&&!(dn.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return dn.body}));case"blob":return yi.pipe((0,s.U)(dn=>{if(null!==dn.body&&!(dn.body instanceof Blob))throw new Error("Response is not a Blob.");return dn.body}));case"text":return yi.pipe((0,s.U)(dn=>{if(null!==dn.body&&"string"!=typeof dn.body)throw new Error("Response is not a string.");return dn.body}));default:return yi.pipe((0,s.U)(dn=>dn.body))}case"response":return yi;default:throw new Error(`Unreachable: unhandled observe type ${ni.observe}}`)}}delete(de,ti={}){return this.request("DELETE",de,ti)}get(de,ti={}){return this.request("GET",de,ti)}head(de,ti={}){return this.request("HEAD",de,ti)}jsonp(de,ti){return this.request("JSONP",de,{params:(new pt).append(ti,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(de,ti={}){return this.request("OPTIONS",de,ti)}patch(de,ti,ni={}){return this.request("PATCH",de,fe(ni,ti))}post(de,ti,ni={}){return this.request("POST",de,fe(ni,ti))}put(de,ti,ni={}){return this.request("PUT",de,fe(ni,ti))}}return ye.\u0275fac=function(de){return new(de||ye)(_.LFG(u))},ye.\u0275prov=_.Yz7({token:ye,factory:ye.\u0275fac}),ye})();class Nt{constructor(Qt,de){this.next=Qt,this.interceptor=de}handle(Qt){return this.interceptor.intercept(Qt,this.next)}}const ge=new _.OlP("HTTP_INTERCEPTORS");let ve=(()=>{class ye{intercept(de,ti){return ti.handle(de)}}return ye.\u0275fac=function(de){return new(de||ye)},ye.\u0275prov=_.Yz7({token:ye,factory:ye.\u0275fac}),ye})();const pi=/^\)\]\}',?\n/;let Se=(()=>{class ye{constructor(de){this.xhrFactory=de}handle(de){if("JSONP"===de.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new t.y(ti=>{const ni=this.xhrFactory.build();if(ni.open(de.method,de.urlWithParams),de.withCredentials&&(ni.withCredentials=!0),de.headers.forEach((Ci,je)=>ni.setRequestHeader(Ci,je.join(","))),de.headers.has("Accept")||ni.setRequestHeader("Accept","application/json, text/plain, */*"),!de.headers.has("Content-Type")){const Ci=de.detectContentTypeHeader();null!==Ci&&ni.setRequestHeader("Content-Type",Ci)}if(de.responseType){const Ci=de.responseType.toLowerCase();ni.responseType="json"!==Ci?Ci:"text"}const Pi=de.serializeBody();let wi=null;const yi=()=>{if(null!==wi)return wi;const Ci=1223===ni.status?204:ni.status,je=ni.statusText||"OK",Ii=new x(ni.getAllResponseHeaders()),_i=function(ye){return"responseURL"in ye&&ye.responseURL?ye.responseURL:/^X-Request-URL:/m.test(ye.getAllResponseHeaders())?ye.getResponseHeader("X-Request-URL"):null}(ni)||de.url;return wi=new Et({headers:Ii,status:Ci,statusText:je,url:_i}),wi},dn=()=>{let{headers:Ci,status:je,statusText:Ii,url:_i}=yi(),Hi=null;204!==je&&(Hi=void 0===ni.response?ni.responseText:ni.response),0===je&&(je=Hi?200:0);let Je=je>=200&&je<300;if("json"===de.responseType&&"string"==typeof Hi){const ue=Hi;Hi=Hi.replace(pi,"");try{Hi=""!==Hi?JSON.parse(Hi):null}catch(kt){Hi=ue,Je&&(Je=!1,Hi={error:kt,text:Hi})}}Je?(ti.next(new ut({body:Hi,headers:Ci,status:je,statusText:Ii,url:_i||void 0})),ti.complete()):ti.error(new rt({error:Hi,headers:Ci,status:je,statusText:Ii,url:_i||void 0}))},mi=Ci=>{const{url:je}=yi(),Ii=new rt({error:Ci,status:ni.status||0,statusText:ni.statusText||"Unknown Error",url:je||void 0});ti.error(Ii)};let Zi=!1;const Re=Ci=>{Zi||(ti.next(yi()),Zi=!0);let je={type:Bt.DownloadProgress,loaded:Ci.loaded};Ci.lengthComputable&&(je.total=Ci.total),"text"===de.responseType&&!!ni.responseText&&(je.partialText=ni.responseText),ti.next(je)},xe=Ci=>{let je={type:Bt.UploadProgress,loaded:Ci.loaded};Ci.lengthComputable&&(je.total=Ci.total),ti.next(je)};return ni.addEventListener("load",dn),ni.addEventListener("error",mi),ni.addEventListener("timeout",mi),ni.addEventListener("abort",mi),de.reportProgress&&(ni.addEventListener("progress",Re),null!==Pi&&ni.upload&&ni.upload.addEventListener("progress",xe)),ni.send(Pi),ti.next({type:Bt.Sent}),()=>{ni.removeEventListener("error",mi),ni.removeEventListener("abort",mi),ni.removeEventListener("load",dn),ni.removeEventListener("timeout",mi),de.reportProgress&&(ni.removeEventListener("progress",Re),null!==Pi&&ni.upload&&ni.upload.removeEventListener("progress",xe)),ni.readyState!==ni.DONE&&ni.abort()}})}}return ye.\u0275fac=function(de){return new(de||ye)(_.LFG(T.JF))},ye.\u0275prov=_.Yz7({token:ye,factory:ye.\u0275fac}),ye})();const Zt=new _.OlP("XSRF_COOKIE_NAME"),ie=new _.OlP("XSRF_HEADER_NAME");class St{}let jt=(()=>{class ye{constructor(de,ti,ni){this.doc=de,this.platform=ti,this.cookieName=ni,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const de=this.doc.cookie||"";return de!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,T.Mx)(de,this.cookieName),this.lastCookieString=de),this.lastToken}}return ye.\u0275fac=function(de){return new(de||ye)(_.LFG(T.K0),_.LFG(_.Lbi),_.LFG(Zt))},ye.\u0275prov=_.Yz7({token:ye,factory:ye.\u0275fac}),ye})(),Ce=(()=>{class ye{constructor(de,ti){this.tokenService=de,this.headerName=ti}intercept(de,ti){const ni=de.url.toLowerCase();if("GET"===de.method||"HEAD"===de.method||ni.startsWith("http://")||ni.startsWith("https://"))return ti.handle(de);const Pi=this.tokenService.getToken();return null!==Pi&&!de.headers.has(this.headerName)&&(de=de.clone({headers:de.headers.set(this.headerName,Pi)})),ti.handle(de)}}return ye.\u0275fac=function(de){return new(de||ye)(_.LFG(St),_.LFG(ie))},ye.\u0275prov=_.Yz7({token:ye,factory:ye.\u0275fac}),ye})(),ri=(()=>{class ye{constructor(de,ti){this.backend=de,this.injector=ti,this.chain=null}handle(de){if(null===this.chain){const ti=this.injector.get(ge,[]);this.chain=ti.reduceRight((ni,Pi)=>new Nt(ni,Pi),this.backend)}return this.chain.handle(de)}}return ye.\u0275fac=function(de){return new(de||ye)(_.LFG(b),_.LFG(_.zs3))},ye.\u0275prov=_.Yz7({token:ye,factory:ye.\u0275fac}),ye})(),ne=(()=>{class ye{static disable(){return{ngModule:ye,providers:[{provide:Ce,useClass:ve}]}}static withOptions(de={}){return{ngModule:ye,providers:[de.cookieName?{provide:Zt,useValue:de.cookieName}:[],de.headerName?{provide:ie,useValue:de.headerName}:[]]}}}return ye.\u0275fac=function(de){return new(de||ye)},ye.\u0275mod=_.oAB({type:ye}),ye.\u0275inj=_.cJS({providers:[Ce,{provide:ge,useExisting:Ce,multi:!0},{provide:St,useClass:jt},{provide:Zt,useValue:"XSRF-TOKEN"},{provide:ie,useValue:"X-XSRF-TOKEN"}]}),ye})(),Oe=(()=>{class ye{}return ye.\u0275fac=function(de){return new(de||ye)},ye.\u0275mod=_.oAB({type:ye}),ye.\u0275inj=_.cJS({providers:[Mt,{provide:u,useClass:ri},Se,{provide:b,useExisting:Se}],imports:[[ne.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),ye})()},5e3:(U,$,m)=>{"use strict";m.d($,{deG:()=>zc,tb:()=>Sb,AFp:()=>Eb,ip1:()=>dm,CZH:()=>Pd,hGG:()=>eS,z2F:()=>_p,sBO:()=>AC,Sil:()=>fm,_Vd:()=>up,EJc:()=>Rb,SBq:()=>hp,qLn:()=>bc,vpe:()=>Th,tBr:()=>Nl,XFs:()=>ne,OlP:()=>No,zs3:()=>ou,ZZ4:()=>Sf,aQg:()=>wf,soG:()=>Tf,YKP:()=>xv,h0i:()=>kd,PXZ:()=>CC,R0b:()=>Iu,FiY:()=>$l,Lbi:()=>Cb,g9A:()=>Tb,n_E:()=>mf,Qsj:()=>sT,FYo:()=>Iv,JOm:()=>wt,q3G:()=>Jo,tp0:()=>pa,Rgc:()=>gp,dDg:()=>Mb,GfV:()=>Mv,s_b:()=>vf,ifc:()=>wi,eFA:()=>xb,G48:()=>MC,Gpc:()=>B,f3M:()=>Il,_c5:()=>KC,VLi:()=>bC,c2e:()=>wb,zSh:()=>zp,wAp:()=>Tr,vHH:()=>Tt,EiD:()=>tc,mCW:()=>uo,qzn:()=>De,JVY:()=>fi,pB0:()=>Ai,eBb:()=>li,L6k:()=>Qe,LAX:()=>Li,cg1:()=>zg,kL8:()=>Q_,yhl:()=>Ve,dqk:()=>Re,sIi:()=>dt,CqO:()=>l_,QGY:()=>Ag,F4k:()=>a_,RDi:()=>Ho,AaK:()=>u,z3N:()=>se,qOj:()=>np,TTD:()=>Ss,_Bn:()=>wv,xp6:()=>xh,uIk:()=>Ki,Gre:()=>G_,ekj:()=>Fg,Suo:()=>qv,Xpm:()=>ce,lG2:()=>Pe,Yz7:()=>Le,cJS:()=>Gt,oAB:()=>ir,Yjl:()=>hi,Y36:()=>rp,_UZ:()=>r_,GkF:()=>o_,BQk:()=>Mg,ynx:()=>Ig,qZA:()=>Dg,TgZ:()=>Rg,EpF:()=>s_,n5z:()=>Da,Ikx:()=>Gg,LFG:()=>qo,$8M:()=>rc,$Z:()=>n_,NdJ:()=>Og,CRH:()=>tb,kcU:()=>al,O4$:()=>ms,oxw:()=>h_,ALo:()=>zv,lcZ:()=>jv,Hsn:()=>p_,F$t:()=>d_,Q6J:()=>Sg,s9C:()=>Lg,DdM:()=>Pv,VKq:()=>Fv,WLB:()=>Bv,iGM:()=>Zv,MAs:()=>ud,CHM:()=>K,LSH:()=>Pc,Udp:()=>Pg,WFA:()=>xg,d8E:()=>Wg,YNc:()=>uh,W1O:()=>rb,_uU:()=>N_,Oqu:()=>Hg,hij:()=>cf,AsE:()=>Ug,lnq:()=>Vg,Gf:()=>Qv});var T=m(77579),_=m(50727),e=m(68306),t=m(56451),n=m(13099);function r(h){for(let d in h)if(h[d]===r)return d;throw Error("Could not find renamed property on target object.")}function s(h,d){for(const v in d)d.hasOwnProperty(v)&&!h.hasOwnProperty(v)&&(h[v]=d[v])}function u(h){if("string"==typeof h)return h;if(Array.isArray(h))return"["+h.map(u).join(", ")+"]";if(null==h)return""+h;if(h.overriddenName)return`${h.overriddenName}`;if(h.name)return`${h.name}`;const d=h.toString();if(null==d)return""+d;const v=d.indexOf("\n");return-1===v?d:d.substring(0,v)}function b(h,d){return null==h||""===h?null===d?"":d:null==d||""===d?h:h+" "+d}const x=r({__forward_ref__:r});function B(h){return h.__forward_ref__=B,h.toString=function(){return u(this())},h}function Z(h){return ot(h)?h():h}function ot(h){return"function"==typeof h&&h.hasOwnProperty(x)&&h.__forward_ref__===B}class Tt extends Error{constructor(d,v){super(function(h,d){return`${h?`NG0${h}: `:""}${d}`}(d,v)),this.code=d}}function It(h){return"string"==typeof h?h:null==h?"":String(h)}function Ht(h){return"function"==typeof h?h.name||h.toString():"object"==typeof h&&null!=h&&"function"==typeof h.type?h.type.name||h.type.toString():It(h)}function st(h,d){const v=d?` in ${d}`:"";throw new Tt("201",`No provider for ${Ht(h)} found${v}`)}function He(h,d){null==h&&function(h,d,v,w){throw new Error(`ASSERTION ERROR: ${h}`+(null==w?"":` [Expected=> ${v} ${w} ${d} <=Actual]`))}(d,h,null,"!=")}function Le(h){return{token:h.token,providedIn:h.providedIn||null,factory:h.factory,value:void 0}}function Gt(h){return{providers:h.providers||[],imports:h.imports||[]}}function Se(h){return Zt(h,Ce)||Zt(h,Te)}function Zt(h,d){return h.hasOwnProperty(d)?h[d]:null}function jt(h){return h&&(h.hasOwnProperty(ri)||h.hasOwnProperty(te))?h[ri]:null}const Ce=r({\u0275prov:r}),ri=r({\u0275inj:r}),Te=r({ngInjectableDef:r}),te=r({ngInjectorDef:r});var ne=(()=>((ne=ne||{})[ne.Default=0]="Default",ne[ne.Host=1]="Host",ne[ne.Self=2]="Self",ne[ne.SkipSelf=4]="SkipSelf",ne[ne.Optional=8]="Optional",ne))();let Oe;function me(h){const d=Oe;return Oe=h,d}function ye(h,d,v){const w=Se(h);return w&&"root"==w.providedIn?void 0===w.value?w.value=w.factory():w.value:v&ne.Optional?null:void 0!==d?d:void st(u(h),"Injector")}function de(h){return{toString:h}.toString()}var ti=(()=>((ti=ti||{})[ti.OnPush=0]="OnPush",ti[ti.Default=1]="Default",ti))(),wi=(()=>{return(h=wi||(wi={}))[h.Emulated=0]="Emulated",h[h.None=2]="None",h[h.ShadowDom=3]="ShadowDom",wi;var h})();const yi="undefined"!=typeof globalThis&&globalThis,dn="undefined"!=typeof window&&window,mi="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Re=yi||"undefined"!=typeof global&&global||dn||mi,je={},Ii=[],_i=r({\u0275cmp:r}),Hi=r({\u0275dir:r}),Je=r({\u0275pipe:r}),ue=r({\u0275mod:r}),kt=r({\u0275fac:r}),ct=r({__NG_ELEMENT_ID__:r});let Lt=0;function ce(h){return de(()=>{const v={},w={type:h.type,providersResolver:null,decls:h.decls,vars:h.vars,factory:null,template:h.template||null,consts:h.consts||null,ngContentSelectors:h.ngContentSelectors,hostBindings:h.hostBindings||null,hostVars:h.hostVars||0,hostAttrs:h.hostAttrs||null,contentQueries:h.contentQueries||null,declaredInputs:v,inputs:null,outputs:null,exportAs:h.exportAs||null,onPush:h.changeDetection===ti.OnPush,directiveDefs:null,pipeDefs:null,selectors:h.selectors||Ii,viewQuery:h.viewQuery||null,features:h.features||null,data:h.data||{},encapsulation:h.encapsulation||wi.Emulated,id:"c",styles:h.styles||Ii,_:null,setInput:null,schemas:h.schemas||null,tView:null},M=h.directives,P=h.features,X=h.pipes;return w.id+=Lt++,w.inputs=Ke(h.inputs,v),w.outputs=Ke(h.outputs),P&&P.forEach(at=>at(w)),w.directiveDefs=M?()=>("function"==typeof M?M():M).map(Wi):null,w.pipeDefs=X?()=>("function"==typeof X?X():X).map(qi):null,w})}function Wi(h){return xi(h)||function(h){return h[Hi]||null}(h)}function qi(h){return function(h){return h[Je]||null}(h)}const Sn={};function ir(h){return de(()=>{const d={type:h.type,bootstrap:h.bootstrap||Ii,declarations:h.declarations||Ii,imports:h.imports||Ii,exports:h.exports||Ii,transitiveCompileScopes:null,schemas:h.schemas||null,id:h.id||null};return null!=h.id&&(Sn[h.id]=h.type),d})}function Ke(h,d){if(null==h)return je;const v={};for(const w in h)if(h.hasOwnProperty(w)){let M=h[w],P=M;Array.isArray(M)&&(P=M[1],M=M[0]),v[M]=w,d&&(d[M]=P)}return v}const Pe=ce;function hi(h){return{type:h.type,name:h.name,factory:null,pure:!1!==h.pure,onDestroy:h.type.prototype.ngOnDestroy||null}}function xi(h){return h[_i]||null}function or(h,d){const v=h[ue]||null;if(!v&&!0===d)throw new Error(`Type ${u(h)} does not have '\u0275mod' property.`);return v}function so(h){return Array.isArray(h)&&"object"==typeof h[1]}function go(h){return Array.isArray(h)&&!0===h[1]}function oa(h){return 0!=(8&h.flags)}function lr(h){return 2==(2&h.flags)}function ts(h){return 1==(1&h.flags)}function eo(h){return null!==h.template}function ks(h){return 0!=(512&h[2])}function Ns(h,d){return h.hasOwnProperty(kt)?h[kt]:null}class Yo{constructor(d,v,w){this.previousValue=d,this.currentValue=v,this.firstChange=w}isFirstChange(){return this.firstChange}}function Ss(){return Bo}function Bo(h){return h.type.prototype.ngOnChanges&&(h.setInput=es),Lo}function Lo(){const h=ao(this),d=null==h?void 0:h.current;if(d){const v=h.previous;if(v===je)h.previous=d;else for(let w in d)v[w]=d[w];h.current=null,this.ngOnChanges(d)}}function es(h,d,v,w){const M=ao(h)||function(h,d){return h[ws]=d}(h,{previous:je,current:null}),P=M.current||(M.current={}),X=M.previous,at=this.declaredInputs[v],yt=X[at];P[at]=new Yo(yt&&yt.currentValue,d,X===je),h[w]=d}Ss.ngInherit=!0;const ws="__ngSimpleChanges__";function ao(h){return h[ws]||null}const $s="http://www.w3.org/2000/svg";let is;function Ho(h){is=h}function Nr(h){return!!h.listen}const Ln={createRenderer:(h,d)=>void 0!==is?is:"undefined"!=typeof document?document:void 0};function xt(h){for(;Array.isArray(h);)h=h[0];return h}function W(h,d){return xt(d[h])}function At(h,d){return xt(d[h.index])}function vi(h,d){return h.data[d]}function ln(h,d){return h[d]}function Xn(h,d){const v=d[h];return so(v)?v:v[0]}function yr(h){return 4==(4&h[2])}function Or(h){return 128==(128&h[2])}function Qr(h,d){return null==d?null:h[d]}function cr(h){h[18]=0}function Xo(h,d){h[5]+=d;let v=h,w=h[3];for(;null!==w&&(1===d&&1===v[5]||-1===d&&0===v[5]);)w[5]+=d,v=w,w=w[3]}const Hn={lFrame:mo(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Rs(){return Hn.bindingsEnabled}function Wt(){return Hn.lFrame.lView}function G(){return Hn.lFrame.tView}function K(h){return Hn.lFrame.contextLView=h,h[8]}function _t(){let h=ee();for(;null!==h&&64===h.type;)h=h.parent;return h}function ee(){return Hn.lFrame.currentTNode}function Xe(h,d){const v=Hn.lFrame;v.currentTNode=h,v.isParent=d}function qe(){return Hn.lFrame.isParent}function bi(){Hn.lFrame.isParent=!1}function Cn(){return Hn.isInCheckNoChangesMode}function Zn(h){Hn.isInCheckNoChangesMode=h}function Qn(){const h=Hn.lFrame;let d=h.bindingRootIndex;return-1===d&&(d=h.bindingRootIndex=h.tView.bindingStartIndex),d}function Nn(){return Hn.lFrame.bindingIndex}function er(){return Hn.lFrame.bindingIndex++}function wr(h){const d=Hn.lFrame,v=d.bindingIndex;return d.bindingIndex=d.bindingIndex+h,v}function Vo(h,d){const v=Hn.lFrame;v.bindingIndex=v.bindingRootIndex=h,Fs(d)}function Fs(h){Hn.lFrame.currentDirectiveIndex=h}function Mo(h){const d=Hn.lFrame.currentDirectiveIndex;return-1===d?null:h[d]}function Zs(){return Hn.lFrame.currentQueryIndex}function gs(h){Hn.lFrame.currentQueryIndex=h}function Bs(h){const d=h[1];return 2===d.type?d.declTNode:1===d.type?h[6]:null}function sl(h,d,v){if(v&ne.SkipSelf){let M=d,P=h;for(;!(M=M.parent,null!==M||v&ne.Host||(M=Bs(P),null===M||(P=P[15],10&M.type))););if(null===M)return!1;d=M,h=P}const w=Hn.lFrame=Qs();return w.currentTNode=d,w.lView=h,!0}function Na(h){const d=Qs(),v=h[1];Hn.lFrame=d,d.currentTNode=v.firstChild,d.lView=h,d.tView=v,d.contextLView=h,d.bindingIndex=v.bindingStartIndex,d.inI18n=!1}function Qs(){const h=Hn.lFrame,d=null===h?null:h.child;return null===d?mo(h):d}function mo(h){const d={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:h,child:null,inI18n:!1};return null!==h&&(h.child=d),d}function Pa(){const h=Hn.lFrame;return Hn.lFrame=h.parent,h.currentTNode=null,h.lView=null,h}const Dn=Pa;function An(){const h=Pa();h.isParent=!0,h.tView=null,h.selectedIndex=-1,h.contextLView=null,h.elementDepthCount=0,h.currentDirectiveIndex=-1,h.currentNamespace=null,h.bindingRootIndex=-1,h.bindingIndex=-1,h.currentQueryIndex=0}function Er(){return Hn.lFrame.selectedIndex}function ns(h){Hn.lFrame.selectedIndex=h}function Ir(){const h=Hn.lFrame;return vi(h.tView,h.selectedIndex)}function ms(){Hn.lFrame.currentNamespace=$s}function al(){Hn.lFrame.currentNamespace=null}function _s(h,d){for(let v=d.directiveStart,w=d.directiveEnd;v<w;v++){const P=h.data[v].type.prototype,{ngAfterContentInit:X,ngAfterContentChecked:at,ngAfterViewInit:yt,ngAfterViewChecked:Kt,ngOnDestroy:he}=P;X&&(h.contentHooks||(h.contentHooks=[])).push(-v,X),at&&((h.contentHooks||(h.contentHooks=[])).push(v,at),(h.contentCheckHooks||(h.contentCheckHooks=[])).push(v,at)),yt&&(h.viewHooks||(h.viewHooks=[])).push(-v,yt),Kt&&((h.viewHooks||(h.viewHooks=[])).push(v,Kt),(h.viewCheckHooks||(h.viewCheckHooks=[])).push(v,Kt)),null!=he&&(h.destroyHooks||(h.destroyHooks=[])).push(v,he)}}function Hs(h,d,v){Ol(h,d,3,v)}function Ds(h,d,v,w){(3&h[2])===v&&Ol(h,d,v,w)}function _a(h,d){let v=h[2];(3&v)===d&&(v&=2047,v+=1,h[2]=v)}function Ol(h,d,v,w){const P=null!=w?w:-1,X=d.length-1;let at=0;for(let yt=void 0!==w?65535&h[18]:0;yt<X;yt++)if("number"==typeof d[yt+1]){if(at=d[yt],null!=w&&at>=w)break}else d[yt]<0&&(h[18]+=65536),(at<P||-1==P)&&(ll(h,v,d,yt),h[18]=(4294901760&h[18])+yt+2),yt++}function ll(h,d,v,w){const M=v[w]<0,P=v[w+1],at=h[M?-v[w]:v[w]];if(M){if(h[2]>>11<h[18]>>16&&(3&h[2])===d){h[2]+=2048;try{P.call(at)}finally{}}}else try{P.call(at)}finally{}}class Qo{constructor(d,v,w){this.factory=d,this.resolving=!1,this.canSeeViewProviders=v,this.injectImpl=w}}function Qa(h,d,v){const w=Nr(h);let M=0;for(;M<v.length;){const P=v[M];if("number"==typeof P){if(0!==P)break;M++;const X=v[M++],at=v[M++],yt=v[M++];w?h.setAttribute(d,at,yt,X):d.setAttributeNS(X,at,yt)}else{const X=P,at=v[++M];Gl(X)?w&&h.setProperty(d,X,at):w?h.setAttribute(d,X,at):d.setAttribute(X,at),M++}}return M}function Rc(h){return 3===h||4===h||6===h}function Gl(h){return 64===h.charCodeAt(0)}function va(h,d){if(null!==d&&0!==d.length)if(null===h||0===h.length)h=d.slice();else{let v=-1;for(let w=0;w<d.length;w++){const M=d[w];"number"==typeof M?v=M:0===v||Ha(h,v,M,null,-1===v||2===v?d[++w]:null)}}return h}function Ha(h,d,v,w,M){let P=0,X=h.length;if(-1===d)X=-1;else for(;P<h.length;){const at=h[P++];if("number"==typeof at){if(at===d){X=-1;break}if(at>d){X=P-1;break}}}for(;P<h.length;){const at=h[P];if("number"==typeof at)break;if(at===v){if(null===w)return void(null!==M&&(h[P+1]=M));if(w===h[P+1])return void(h[P+2]=M)}P++,null!==w&&P++,null!==M&&P++}-1!==X&&(h.splice(X,0,d),P=X+1),h.splice(P++,0,v),null!==w&&h.splice(P++,0,w),null!==M&&h.splice(P++,0,M)}function Us(h){return-1!==h}function Ua(h){return 32767&h}function Va(h,d){let v=function(h){return h>>16}(h),w=d;for(;v>0;)w=w[15],v--;return w}let kl=!0;function nc(h){const d=kl;return kl=h,d}let ft=0;function q(h,d){const v=zt(h,d);if(-1!==v)return v;const w=d[1];w.firstCreatePass&&(h.injectorIndex=d.length,Ot(w.data,h),Ot(d,null),Ot(w.blueprint,null));const M=_e(h,d),P=h.injectorIndex;if(Us(M)){const X=Ua(M),at=Va(M,d),yt=at[1].data;for(let Kt=0;Kt<8;Kt++)d[P+Kt]=at[X+Kt]|yt[X+Kt]}return d[P+8]=M,P}function Ot(h,d){h.push(0,0,0,0,0,0,0,0,d)}function zt(h,d){return-1===h.injectorIndex||h.parent&&h.parent.injectorIndex===h.injectorIndex||null===d[h.injectorIndex+8]?-1:h.injectorIndex}function _e(h,d){if(h.parent&&-1!==h.parent.injectorIndex)return h.parent.injectorIndex;let v=0,w=null,M=d;for(;null!==M;){const P=M[1],X=P.type;if(w=2===X?P.declTNode:1===X?M[6]:null,null===w)return-1;if(v++,M=M[15],-1!==w.injectorIndex)return w.injectorIndex|v<<16}return-1}function Ge(h,d,v){!function(h,d,v){let w;"string"==typeof v?w=v.charCodeAt(0)||0:v.hasOwnProperty(ct)&&(w=v[ct]),null==w&&(w=v[ct]=ft++);const M=255&w;d.data[h+(M>>5)]|=1<<M}(h,d,v)}function ki(h,d,v){if(v&ne.Optional)return h;st(d,"NodeInjector")}function _n(h,d,v,w){if(v&ne.Optional&&void 0===w&&(w=null),0==(v&(ne.Self|ne.Host))){const M=h[9],P=me(void 0);try{return M?M.get(d,w,v&ne.Optional):ye(d,w,v&ne.Optional)}finally{me(P)}}return ki(w,d,v)}function mr(h,d,v,w=ne.Default,M){if(null!==h){const P=function(h){if("string"==typeof h)return h.charCodeAt(0)||0;const d=h.hasOwnProperty(ct)?h[ct]:void 0;return"number"==typeof d?d>=0?255&d:Ur:d}(v);if("function"==typeof P){if(!sl(d,h,w))return w&ne.Host?ki(M,v,w):_n(d,v,w,M);try{const X=P(w);if(null!=X||w&ne.Optional)return X;st(v)}finally{Dn()}}else if("number"==typeof P){let X=null,at=zt(h,d),yt=-1,Kt=w&ne.Host?d[16][6]:null;for((-1===at||w&ne.SkipSelf)&&(yt=-1===at?_e(h,d):d[at+8],-1!==yt&&Ga(w,!1)?(X=d[1],at=Ua(yt),d=Va(yt,d)):at=-1);-1!==at;){const he=d[1];if(Go(P,at,he.data)){const Fe=lo(at,d,v,X,w,Kt);if(Fe!==Wn)return Fe}yt=d[at+8],-1!==yt&&Ga(w,d[1].data[at+8]===Kt)&&Go(P,at,d)?(X=he,at=Ua(yt),d=Va(yt,d)):at=-1}}}return _n(d,v,w,M)}const Wn={};function Ur(){return new Gs(_t(),Wt())}function lo(h,d,v,w,M,P){const X=d[1],at=X.data[h+8],he=cl(at,X,v,null==w?lr(at)&&kl:w!=X&&0!=(3&at.type),M&ne.Host&&P===at);return null!==he?Vs(d,X,he,at):Wn}function cl(h,d,v,w,M){const P=h.providerIndexes,X=d.data,at=1048575&P,yt=h.directiveStart,he=P>>20,si=M?at+he:h.directiveEnd;for(let Ti=w?at:at+he;Ti<si;Ti++){const $i=X[Ti];if(Ti<yt&&v===$i||Ti>=yt&&$i.type===v)return Ti}if(M){const Ti=X[yt];if(Ti&&eo(Ti)&&Ti.type===v)return yt}return null}function Vs(h,d,v,w){let M=h[v];const P=d.data;if(function(h){return h instanceof Qo}(M)){const X=M;X.resolving&&function(h,d){throw new Tt("200",`Circular dependency in DI detected for ${h}`)}(Ht(P[v]));const at=nc(X.canSeeViewProviders);X.resolving=!0;const yt=X.injectImpl?me(X.injectImpl):null;sl(h,w,ne.Default);try{M=h[v]=X.factory(void 0,P,h,w),d.firstCreatePass&&v>=w.directiveStart&&function(h,d,v){const{ngOnChanges:w,ngOnInit:M,ngDoCheck:P}=d.type.prototype;if(w){const X=Bo(d);(v.preOrderHooks||(v.preOrderHooks=[])).push(h,X),(v.preOrderCheckHooks||(v.preOrderCheckHooks=[])).push(h,X)}M&&(v.preOrderHooks||(v.preOrderHooks=[])).push(0-h,M),P&&((v.preOrderHooks||(v.preOrderHooks=[])).push(h,P),(v.preOrderCheckHooks||(v.preOrderCheckHooks=[])).push(h,P))}(v,P[v],d)}finally{null!==yt&&me(yt),nc(at),X.resolving=!1,Dn()}}return M}function Go(h,d,v){return!!(v[d+(h>>5)]&1<<h)}function Ga(h,d){return!(h&ne.Self||h&ne.Host&&d)}class Gs{constructor(d,v){this._tNode=d,this._lView=v}get(d,v,w){return mr(this._tNode,this._lView,d,w,v)}}function Da(h){return de(()=>{const d=h.prototype.constructor,v=d[kt]||qa(d),w=Object.prototype;let M=Object.getPrototypeOf(h.prototype).constructor;for(;M&&M!==w;){const P=M[kt]||qa(M);if(P&&P!==v)return P;M=Object.getPrototypeOf(M)}return P=>new P})}function qa(h){return ot(h)?()=>{const d=qa(Z(h));return d&&d()}:Ns(h)}function rc(h){return function(h,d){if("class"===d)return h.classes;if("style"===d)return h.styles;const v=h.attrs;if(v){const w=v.length;let M=0;for(;M<w;){const P=v[M];if(Rc(P))break;if(0===P)M+=2;else if("number"==typeof P)for(M++;M<w&&"string"==typeof v[M];)M++;else{if(P===d)return v[M+1];M+=2}}}return null}(_t(),h)}const oc="__parameters__";function Xr(h,d,v){return de(()=>{const w=function(h){return function(...v){if(h){const w=h(...v);for(const M in w)this[M]=w[M]}}}(d);function M(...P){if(this instanceof M)return w.apply(this,P),this;const X=new M(...P);return at.annotation=X,at;function at(yt,Kt,he){const Fe=yt.hasOwnProperty(oc)?yt[oc]:Object.defineProperty(yt,oc,{value:[]})[oc];for(;Fe.length<=he;)Fe.push(null);return(Fe[he]=Fe[he]||[]).push(X),yt}}return v&&(M.prototype=Object.create(v.prototype)),M.prototype.ngMetadataName=h,M.annotationCls=M,M})}class No{constructor(d,v){this._desc=d,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof v?this.__NG_ELEMENT_ID__=v:void 0!==v&&(this.\u0275prov=Le({token:this,providedIn:v.providedIn||"root",factory:v.factory}))}toString(){return`InjectionToken ${this._desc}`}}const zc=new No("AnalyzeForEntryComponents");function da(h,d){void 0===d&&(d=h);for(let v=0;v<h.length;v++){let w=h[v];Array.isArray(w)?(d===h&&(d=h.slice(0,v)),da(w,d)):d!==h&&d.push(w)}return d}function bo(h,d){h.forEach(v=>Array.isArray(v)?bo(v,d):d(v))}function ba(h,d,v){d>=h.length?h.push(v):h.splice(d,0,v)}function Wa(h,d){return d>=h.length-1?h.pop():h.splice(d,1)[0]}function jl(h,d){const v=[];for(let w=0;w<h;w++)v.push(d);return v}function bs(h,d,v){let w=cc(h,d);return w>=0?h[1|w]=v:(w=~w,function(h,d,v,w){let M=h.length;if(M==d)h.push(v,w);else if(1===M)h.push(w,h[0]),h[0]=v;else{for(M--,h.push(h[M-1],h[M]);M>d;)h[M]=h[M-2],M--;h[d]=v,h[d+1]=w}}(h,w,d,v)),w}function Yl(h,d){const v=cc(h,d);if(v>=0)return h[1|v]}function cc(h,d){return function(h,d,v){let w=0,M=h.length>>v;for(;M!==w;){const P=w+(M-w>>1),X=h[P<<v];if(d===X)return P<<v;X>d?M=P:w=P+1}return~(M<<v)}(h,d,1)}const ea={},Yc="__NG_DI_FLAG__",Po="ngTempTokenPath",dc=/\n/gm,pc="__source",za=r({provide:String,useValue:r});let Aa;function Kl(h){const d=Aa;return Aa=h,d}function Rl(h,d=ne.Default){if(void 0===Aa)throw new Error("inject() must be called from an injection context");return null===Aa?ye(h,void 0,d):Aa.get(h,d&ne.Optional?null:void 0,d)}function qo(h,d=ne.Default){return(Oe||Rl)(Z(h),d)}const Il=qo;function Jl(h){const d=[];for(let v=0;v<h.length;v++){const w=Z(h[v]);if(Array.isArray(w)){if(0===w.length)throw new Error("Arguments array must have arguments.");let M,P=ne.Default;for(let X=0;X<w.length;X++){const at=w[X],yt=Kc(at);"number"==typeof yt?-1===yt?M=at.token:P|=yt:M=at}d.push(qo(M,P))}else d.push(qo(w))}return d}function fc(h,d){return h[Yc]=d,h.prototype[Yc]=d,h}function Kc(h){return h[Yc]}const Nl=fc(Xr("Inject",h=>({token:h})),-1),$l=fc(Xr("Optional"),8),pa=fc(Xr("SkipSelf"),4);let Ml;function pl(h){var d;return(null===(d=function(){if(void 0===Ml&&(Ml=null,Re.trustedTypes))try{Ml=Re.trustedTypes.createPolicy("angular",{createHTML:h=>h,createScript:h=>h,createScriptURL:h=>h})}catch(h){}return Ml}())||void 0===d?void 0:d.createHTML(h))||h}class Ql{constructor(d){this.changingThisBreaksApplicationSecurity=d}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class fh extends Ql{getTypeName(){return"HTML"}}class ds extends Ql{getTypeName(){return"Style"}}class Lc extends Ql{getTypeName(){return"Script"}}class vt extends Ql{getTypeName(){return"URL"}}class Rt extends Ql{getTypeName(){return"ResourceURL"}}function se(h){return h instanceof Ql?h.changingThisBreaksApplicationSecurity:h}function De(h,d){const v=Ve(h);if(null!=v&&v!==d){if("ResourceURL"===v&&"URL"===d)return!0;throw new Error(`Required a safe ${d}, got a ${v} (see https://g.co/ng/security#xss)`)}return v===d}function Ve(h){return h instanceof Ql&&h.getTypeName()||null}function fi(h){return new fh(h)}function Qe(h){return new ds(h)}function li(h){return new Lc(h)}function Li(h){return new vt(h)}function Ai(h){return new Rt(h)}class Kn{constructor(d){this.inertDocumentHelper=d}getInertBodyElement(d){d="<body><remove></remove>"+d;try{const v=(new window.DOMParser).parseFromString(pl(d),"text/html").body;return null===v?this.inertDocumentHelper.getInertBodyElement(d):(v.removeChild(v.firstChild),v)}catch(v){return null}}}class Un{constructor(d){if(this.defaultDoc=d,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const v=this.inertDocument.createElement("html");this.inertDocument.appendChild(v);const w=this.inertDocument.createElement("body");v.appendChild(w)}}getInertBodyElement(d){const v=this.inertDocument.createElement("template");if("content"in v)return v.innerHTML=pl(d),v;const w=this.inertDocument.createElement("body");return w.innerHTML=pl(d),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(w),w}stripCustomNsAttrs(d){const v=d.attributes;for(let M=v.length-1;0<M;M--){const X=v.item(M).name;("xmlns:ns1"===X||0===X.indexOf("ns1:"))&&d.removeAttribute(X)}let w=d.firstChild;for(;w;)w.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(w),w=w.nextSibling}}const Ko=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Gr=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function uo(h){return(h=String(h)).match(Ko)||h.match(Gr)?h:"unsafe:"+h}function oo(h){const d={};for(const v of h.split(","))d[v]=!0;return d}function Ms(...h){const d={};for(const v of h)for(const w in v)v.hasOwnProperty(w)&&(d[w]=!0);return d}const os=oo("area,br,col,hr,img,wbr"),ys=oo("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ml=oo("rp,rt"),du=Ms(os,Ms(ys,oo("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ms(ml,oo("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ms(ml,ys)),qu=oo("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),pu=oo("srcset"),Hu=Ms(qu,pu,oo("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),oo("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),fu=oo("script,style,template");class Uu{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(d){let v=d.firstChild,w=!0;for(;v;)if(v.nodeType===Node.ELEMENT_NODE?w=this.startElement(v):v.nodeType===Node.TEXT_NODE?this.chars(v.nodeValue):this.sanitizedSomething=!0,w&&v.firstChild)v=v.firstChild;else for(;v;){v.nodeType===Node.ELEMENT_NODE&&this.endElement(v);let M=this.checkClobberedElement(v,v.nextSibling);if(M){v=M;break}v=this.checkClobberedElement(v,v.parentNode)}return this.buf.join("")}startElement(d){const v=d.nodeName.toLowerCase();if(!du.hasOwnProperty(v))return this.sanitizedSomething=!0,!fu.hasOwnProperty(v);this.buf.push("<"),this.buf.push(v);const w=d.attributes;for(let M=0;M<w.length;M++){const P=w.item(M),X=P.name,at=X.toLowerCase();if(!Hu.hasOwnProperty(at)){this.sanitizedSomething=!0;continue}let yt=P.value;qu[at]&&(yt=uo(yt)),pu[at]&&(h=yt,yt=(h=String(h)).split(",").map(d=>uo(d.trim())).join(", ")),this.buf.push(" ",X,'="',Qc(yt),'"')}var h;return this.buf.push(">"),!0}endElement(d){const v=d.nodeName.toLowerCase();du.hasOwnProperty(v)&&!os.hasOwnProperty(v)&&(this.buf.push("</"),this.buf.push(v),this.buf.push(">"))}chars(d){this.buf.push(Qc(d))}checkClobberedElement(d,v){if(v&&(d.compareDocumentPosition(v)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${d.outerHTML}`);return v}}const ql=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,th=/([^\#-~ |!])/g;function Qc(h){return h.replace(/&/g,"&amp;").replace(ql,function(d){return"&#"+(1024*(d.charCodeAt(0)-55296)+(d.charCodeAt(1)-56320)+65536)+";"}).replace(th,function(d){return"&#"+d.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let qc;function tc(h,d){let v=null;try{qc=qc||function(h){const d=new Un(h);return function(){try{return!!(new window.DOMParser).parseFromString(pl(""),"text/html")}catch(h){return!1}}()?new Kn(d):d}(h);let w=d?String(d):"";v=qc.getInertBodyElement(w);let M=5,P=w;do{if(0===M)throw new Error("Failed to sanitize html because the input is unstable");M--,w=P,P=v.innerHTML,v=qc.getInertBodyElement(w)}while(w!==P);return pl((new Uu).sanitizeChildren(gu(v)||v))}finally{if(v){const w=gu(v)||v;for(;w.firstChild;)w.removeChild(w.firstChild)}}}function gu(h){return"content"in h&&function(h){return h.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===h.nodeName}(h)?h.content:null}var Jo=(()=>((Jo=Jo||{})[Jo.NONE=0]="NONE",Jo[Jo.HTML=1]="HTML",Jo[Jo.STYLE=2]="STYLE",Jo[Jo.SCRIPT=3]="SCRIPT",Jo[Jo.URL=4]="URL",Jo[Jo.RESOURCE_URL=5]="RESOURCE_URL",Jo))();function Pc(h){const d=function(){const h=Wt();return h&&h[12]}();return d?d.sanitize(Jo.URL,h)||"":De(h,"URL")?se(h):uo(It(h))}const nh="__ngContext__";function ra(h,d){h[nh]=d}function Wu(h){const d=function(h){return h[nh]||null}(h);return d?Array.isArray(d)?d:d.lView:null}function oh(h){return h.ngOriginalError}function Ah(h,...d){h.error(...d)}class bc{constructor(){this._console=console}handleError(d){const v=this._findOriginalError(d),w=(h=d)&&h.ngErrorLogger||Ah;var h;w(this._console,"ERROR",d),v&&w(this._console,"ORIGINAL ERROR",v)}_findOriginalError(d){let v=d&&oh(d);for(;v&&oh(v);)v=oh(v);return v||null}}const Bc=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Re))();function I(h){return h instanceof Function?h():h}var wt=(()=>((wt=wt||{})[wt.Important=1]="Important",wt[wt.DashCase=2]="DashCase",wt))();function $t(h,d){return undefined(h,d)}function gi(h){const d=h[3];return go(d)?d[3]:d}function Xi(h){return gn(h[13])}function tn(h){return gn(h[4])}function gn(h){for(;null!==h&&!go(h);)h=h[4];return h}function cn(h,d,v,w,M){if(null!=w){let P,X=!1;go(w)?P=w:so(w)&&(X=!0,w=w[0]);const at=xt(w);0===h&&null!==v?null==M?Yt(d,v,at):Xt(d,v,at,M||null,!0):1===h&&null!==v?Xt(d,v,at,M||null,!0):2===h?function(h,d,v){const w=Me(h,d);w&&function(h,d,v,w){Nr(h)?h.removeChild(d,v,w):d.removeChild(v)}(h,w,d,v)}(d,at,X):3===h&&d.destroyNode(at),null!=P&&function(h,d,v,w,M){const P=v[7];P!==xt(v)&&cn(d,h,w,P,M);for(let at=10;at<v.length;at++){const yt=v[at];wo(yt[1],yt,h,d,w,P)}}(d,h,P,v,M)}}function fr(h,d,v){return Nr(h)?h.createElement(d,v):null===v?h.createElement(d):h.createElementNS(v,d)}function Kr(h,d){const v=h[9],w=v.indexOf(d),M=d[3];1024&d[2]&&(d[2]&=-1025,Xo(M,-1)),v.splice(w,1)}function zs(h,d){if(h.length<=10)return;const v=10+d,w=h[v];if(w){const M=w[17];null!==M&&M!==h&&Kr(M,w),d>0&&(h[v-1][4]=w[4]);const P=Wa(h,10+d);!function(h,d){wo(h,d,d[11],2,null,null),d[0]=null,d[6]=null}(w[1],w);const X=P[19];null!==X&&X.detachView(P[1]),w[3]=null,w[4]=null,w[2]&=-129}return w}function Os(h,d){if(!(256&d[2])){const v=d[11];Nr(v)&&v.destroyNode&&wo(h,d,v,3,null,null),function(h){let d=h[13];if(!d)return S(h[1],h);for(;d;){let v=null;if(so(d))v=d[13];else{const w=d[10];w&&(v=w)}if(!v){for(;d&&!d[4]&&d!==h;)so(d)&&S(d[1],d),d=d[3];null===d&&(d=h),so(d)&&S(d[1],d),v=d&&d[4]}d=v}}(d)}}function S(h,d){if(!(256&d[2])){d[2]&=-129,d[2]|=256,function(h,d){let v;if(null!=h&&null!=(v=h.destroyHooks))for(let w=0;w<v.length;w+=2){const M=d[v[w]];if(!(M instanceof Qo)){const P=v[w+1];if(Array.isArray(P))for(let X=0;X<P.length;X+=2){const at=M[P[X]],yt=P[X+1];try{yt.call(at)}finally{}}else try{P.call(M)}finally{}}}}(h,d),function(h,d){const v=h.cleanup,w=d[7];let M=-1;if(null!==v)for(let P=0;P<v.length-1;P+=2)if("string"==typeof v[P]){const X=v[P+1],at="function"==typeof X?X(d):xt(d[X]),yt=w[M=v[P+2]],Kt=v[P+3];"boolean"==typeof Kt?at.removeEventListener(v[P],yt,Kt):Kt>=0?w[M=Kt]():w[M=-Kt].unsubscribe(),P+=2}else{const X=w[M=v[P+1]];v[P].call(X)}if(null!==w){for(let P=M+1;P<w.length;P++)w[P]();d[7]=null}}(h,d),1===d[1].type&&Nr(d[11])&&d[11].destroy();const v=d[17];if(null!==v&&go(d[3])){v!==d[3]&&Kr(v,d);const w=d[19];null!==w&&w.detachView(h)}}}function it(h,d,v){return function(h,d,v){let w=d;for(;null!==w&&40&w.type;)w=(d=w).parent;if(null===w)return v[0];if(2&w.flags){const M=h.data[w.directiveStart].encapsulation;if(M===wi.None||M===wi.Emulated)return null}return At(w,v)}(h,d.parent,v)}function Xt(h,d,v,w,M){Nr(h)?h.insertBefore(d,v,w,M):d.insertBefore(v,w,M)}function Yt(h,d,v){Nr(h)?h.appendChild(d,v):d.appendChild(v)}function le(h,d,v,w,M){null!==w?Xt(h,d,v,w,M):Yt(h,d,v)}function Me(h,d){return Nr(h)?h.parentNode(d):d.parentNode}function ai(h,d,v){return Ri(h,d,v)}let Ri=function(h,d,v){return 40&h.type?At(h,v):null};function sn(h,d,v,w){const M=it(h,w,d),P=d[11],at=ai(w.parent||d[6],w,d);if(null!=M)if(Array.isArray(v))for(let yt=0;yt<v.length;yt++)le(P,M,v[yt],at,!1);else le(P,M,v,at,!1)}function Mn(h,d){if(null!==d){const v=d.type;if(3&v)return At(d,h);if(4&v)return Jr(-1,h[d.index]);if(8&v){const w=d.child;if(null!==w)return Mn(h,w);{const M=h[d.index];return go(M)?Jr(-1,M):xt(M)}}if(32&v)return $t(d,h)()||xt(h[d.index]);{const w=rn(h,d);return null!==w?Array.isArray(w)?w[0]:Mn(gi(h[16]),w):Mn(h,d.next)}}return null}function rn(h,d){return null!==d?h[16][6].projection[d.projection]:null}function Jr(h,d){const v=10+h+1;if(v<d.length){const w=d[v],M=w[1].firstChild;if(null!==M)return Mn(w,M)}return d[7]}function as(h,d,v,w,M,P,X){for(;null!=v;){const at=w[v.index],yt=v.type;if(X&&0===d&&(at&&ra(xt(at),w),v.flags|=4),64!=(64&v.flags))if(8&yt)as(h,d,v.child,w,M,P,!1),cn(d,h,M,at,P);else if(32&yt){const Kt=$t(v,w);let he;for(;he=Kt();)cn(d,h,M,he,P);cn(d,h,M,at,P)}else 16&yt?xs(h,d,w,v,M,P):cn(d,h,M,at,P);v=X?v.projectionNext:v.next}}function wo(h,d,v,w,M,P){as(v,w,h.firstChild,d,M,P,!1)}function xs(h,d,v,w,M,P){const X=v[16],yt=X[6].projection[w.projection];if(Array.isArray(yt))for(let Kt=0;Kt<yt.length;Kt++)cn(d,h,M,yt[Kt],P);else as(h,d,yt,X[3],M,P,!0)}function oe(h,d,v){Nr(h)?h.setAttribute(d,"style",v):d.style.cssText=v}function zr(h,d,v){Nr(h)?""===v?h.removeAttribute(d,"class"):h.setAttribute(d,"class",v):d.className=v}function Ys(h,d,v){let w=h.length;for(;;){const M=h.indexOf(d,v);if(-1===M)return M;if(0===M||h.charCodeAt(M-1)<=32){const P=d.length;if(M+P===w||h.charCodeAt(M+P)<=32)return M}v=M+1}}const Ec="ng-template";function Tc(h,d,v){let w=0;for(;w<h.length;){let M=h[w++];if(v&&"class"===M){if(M=h[w],-1!==Ys(M.toLowerCase(),d,0))return!0}else if(1===M){for(;w<h.length&&"string"==typeof(M=h[w++]);)if(M.toLowerCase()===d)return!0;return!1}}return!1}function Tu(h){return 4===h.type&&h.value!==Ec}function Ju(h,d,v){return d===(4!==h.type||v?h.value:Ec)}function bh(h,d,v){let w=4;const M=h.attrs||[],P=function(h){for(let d=0;d<h.length;d++)if(Rc(h[d]))return d;return h.length}(M);let X=!1;for(let at=0;at<d.length;at++){const yt=d[at];if("number"!=typeof yt){if(!X)if(4&w){if(w=2|1&w,""!==yt&&!Ju(h,yt,v)||""===yt&&1===d.length){if(bl(w))return!1;X=!0}}else{const Kt=8&w?yt:d[++at];if(8&w&&null!==h.attrs){if(!Tc(h.attrs,Kt,v)){if(bl(w))return!1;X=!0}continue}const Fe=Zh(8&w?"class":yt,M,Tu(h),v);if(-1===Fe){if(bl(w))return!1;X=!0;continue}if(""!==Kt){let si;si=Fe>P?"":M[Fe+1].toLowerCase();const Ti=8&w?si:null;if(Ti&&-1!==Ys(Ti,Kt,0)||2&w&&Kt!==si){if(bl(w))return!1;X=!0}}}}else{if(!X&&!bl(w)&&!bl(yt))return!1;if(X&&bl(yt))continue;X=!1,w=yt|1&w}}return bl(w)||X}function bl(h){return 0==(1&h)}function Zh(h,d,v,w){if(null===d)return-1;let M=0;if(w||!v){let P=!1;for(;M<d.length;){const X=d[M];if(X===h)return M;if(3===X||6===X)P=!0;else{if(1===X||2===X){let at=d[++M];for(;"string"==typeof at;)at=d[++M];continue}if(4===X)break;if(0===X){M+=4;continue}}M+=P?1:2}return-1}return function(h,d){let v=h.indexOf(4);if(v>-1)for(v++;v<h.length;){const w=h[v];if("number"==typeof w)return-1;if(w===d)return v;v++}return-1}(d,h)}function Qh(h,d,v=!1){for(let w=0;w<d.length;w++)if(bh(h,d[w],v))return!0;return!1}function yp(h,d){t:for(let v=0;v<d.length;v++){const w=d[v];if(h.length===w.length){for(let M=0;M<h.length;M++)if(h[M]!==w[M])continue t;return!0}}return!1}function Fd(h,d){return h?":not("+d.trim()+")":d}function Ep(h){let d=h[0],v=1,w=2,M="",P=!1;for(;v<h.length;){let X=h[v];if("string"==typeof X)if(2&w){const at=h[++v];M+="["+X+(at.length>0?'="'+at+'"':"")+"]"}else 8&w?M+="."+X:4&w&&(M+=" "+X);else""!==M&&!bl(X)&&(d+=Fd(P,M),M=""),w=X,P=P||!bl(w);v++}return""!==M&&(d+=Fd(P,M)),d}const xr={};function xh(h){Bd(G(),Wt(),Er()+h,Cn())}function Bd(h,d,v,w){if(!w)if(3==(3&d[2])){const P=h.preOrderCheckHooks;null!==P&&Hs(d,P,v)}else{const P=h.preOrderHooks;null!==P&&Ds(d,P,0,v)}ns(v)}function qh(h,d){return h<<17|d<<2}function ru(h){return h>>17&32767}function Cc(h){return 2|h}function Su(h){return(131068&h)>>2}function td(h,d){return-131069&h|d<<2}function ed(h){return 1|h}function zd(h,d){const v=h.contentQueries;if(null!==v)for(let w=0;w<v.length;w+=2){const M=v[w],P=v[w+1];if(-1!==P){const X=h.data[P];gs(M),X.contentQueries(2,d[P],P)}}}function sd(h,d,v,w,M,P,X,at,yt,Kt){const he=d.blueprint.slice();return he[0]=M,he[2]=140|w,cr(he),he[3]=he[15]=h,he[8]=v,he[10]=X||h&&h[10],he[11]=at||h&&h[11],he[12]=yt||h&&h[12]||null,he[9]=Kt||h&&h[9]||null,he[6]=P,he[16]=2==d.type?h[16]:he,he}function zh(h,d,v,w,M){let P=h.data[d];if(null===P)P=function(h,d,v,w,M){const P=ee(),X=qe(),yt=h.data[d]=function(h,d,v,w,M,P){return{type:v,index:w,insertBeforeIndex:null,injectorIndex:d?d.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:M,attrs:P,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:d,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,X?P:P&&P.parent,v,d,w,M);return null===h.firstChild&&(h.firstChild=yt),null!==P&&(X?null==P.child&&null!==yt.parent&&(P.child=yt):null===P.next&&(P.next=yt)),yt}(h,d,v,w,M),Hn.lFrame.inI18n&&(P.flags|=64);else if(64&P.type){P.type=v,P.value=w,P.attrs=M;const X=function(){const h=Hn.lFrame,d=h.currentTNode;return h.isParent?d:d.parent}();P.injectorIndex=null===X?-1:X.injectorIndex}return Xe(P,!0),P}function jh(h,d,v,w){if(0===v)return-1;const M=d.length;for(let P=0;P<v;P++)d.push(w),h.blueprint.push(w),h.data.push(null);return M}function ad(h,d,v){Na(d);try{const w=h.viewQuery;null!==w&&Qd(1,w,v);const M=h.template;null!==M&&Sp(h,d,M,1,v),h.firstCreatePass&&(h.firstCreatePass=!1),h.staticContentQueries&&zd(h,d),h.staticViewQueries&&Qd(2,h.viewQuery,v);const P=h.components;null!==P&&function(h,d){for(let v=0;v<d.length;v++)$f(h,d[v])}(d,P)}catch(w){throw h.firstCreatePass&&(h.incompleteFirstPass=!0,h.firstCreatePass=!1),w}finally{d[2]&=-5,An()}}function Yh(h,d,v,w){const M=d[2];if(256==(256&M))return;Na(d);const P=Cn();try{cr(d),function(h){Hn.lFrame.bindingIndex=h}(h.bindingStartIndex),null!==v&&Sp(h,d,v,2,w);const X=3==(3&M);if(!P)if(X){const Kt=h.preOrderCheckHooks;null!==Kt&&Hs(d,Kt,null)}else{const Kt=h.preOrderHooks;null!==Kt&&Ds(d,Kt,0,null),_a(d,0)}if(function(h){for(let d=Xi(h);null!==d;d=tn(d)){if(!d[2])continue;const v=d[9];for(let w=0;w<v.length;w++){const M=v[w],P=M[3];0==(1024&M[2])&&Xo(P,1),M[2]|=1024}}}(d),function(h){for(let d=Xi(h);null!==d;d=tn(d))for(let v=10;v<d.length;v++){const w=d[v],M=w[1];Or(w)&&Yh(M,w,M.template,w[8])}}(d),null!==h.contentQueries&&zd(h,d),!P)if(X){const Kt=h.contentCheckHooks;null!==Kt&&Hs(d,Kt)}else{const Kt=h.contentHooks;null!==Kt&&Ds(d,Kt,1),_a(d,1)}!function(h,d){const v=h.hostBindingOpCodes;if(null!==v)try{for(let w=0;w<v.length;w++){const M=v[w];if(M<0)ns(~M);else{const P=M,X=v[++w],at=v[++w];Vo(X,P),at(2,d[P])}}}finally{ns(-1)}}(h,d);const at=h.components;null!==at&&function(h,d){for(let v=0;v<d.length;v++)Jf(h,d[v])}(d,at);const yt=h.viewQuery;if(null!==yt&&Qd(2,yt,w),!P)if(X){const Kt=h.viewCheckHooks;null!==Kt&&Hs(d,Kt)}else{const Kt=h.viewHooks;null!==Kt&&Ds(d,Kt,2),_a(d,2)}!0===h.firstUpdatePass&&(h.firstUpdatePass=!1),P||(d[2]&=-73),1024&d[2]&&(d[2]&=-1025,Xo(d[3],-1))}finally{An()}}function Of(h,d,v,w){const M=d[10],P=!Cn(),X=yr(d);try{P&&!X&&M.begin&&M.begin(),X&&ad(h,d,w),Yh(h,d,v,w)}finally{P&&!X&&M.end&&M.end()}}function Sp(h,d,v,w,M){const P=Er(),X=2&w;try{ns(-1),X&&d.length>20&&Bd(h,d,20,Cn()),v(w,M)}finally{ns(P)}}function wp(h,d,v){if(oa(d)){const M=d.directiveEnd;for(let P=d.directiveStart;P<M;P++){const X=h.data[P];X.contentQueries&&X.contentQueries(1,v[P],P)}}}function Yd(h,d,v){!Rs()||(function(h,d,v,w){const M=v.directiveStart,P=v.directiveEnd;h.firstCreatePass||q(v,d),ra(w,d);const X=v.initialInputs;for(let at=M;at<P;at++){const yt=h.data[at],Kt=eo(yt);Kt&&zf(d,v,yt);const he=Vs(d,h,at,v);ra(he,d),null!==X&&jf(0,at-M,he,yt,0,X),Kt&&(Xn(v.index,d)[8]=he)}}(h,d,v,At(v,d)),128==(128&v.flags)&&function(h,d,v){const w=v.directiveStart,M=v.directiveEnd,X=v.index,at=Hn.lFrame.currentDirectiveIndex;try{ns(X);for(let yt=w;yt<M;yt++){const Kt=h.data[yt],he=d[yt];Fs(yt),(null!==Kt.hostBindings||0!==Kt.hostVars||null!==Kt.hostAttrs)&&xp(Kt,he)}}finally{ns(-1),Fs(at)}}(h,d,v))}function bd(h,d,v=At){const w=d.localNames;if(null!==w){let M=d.index+1;for(let P=0;P<w.length;P+=2){const X=w[P+1],at=-1===X?v(d,h):h[X];h[M++]=at}}}function yd(h){const d=h.tView;return null===d||d.incompleteFirstPass?h.tView=Ed(1,null,h.template,h.decls,h.vars,h.directiveDefs,h.pipeDefs,h.viewQuery,h.schemas,h.consts):d}function Ed(h,d,v,w,M,P,X,at,yt,Kt){const he=20+w,Fe=he+M,si=function(h,d){const v=[];for(let w=0;w<d;w++)v.push(w<h?null:xr);return v}(he,Fe),Ti="function"==typeof Kt?Kt():Kt;return si[1]={type:h,blueprint:si,template:v,queries:null,viewQuery:at,declTNode:d,data:si.slice().fill(null,he),bindingStartIndex:he,expandoStartIndex:Fe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof P?P():P,pipeRegistry:"function"==typeof X?X():X,firstChild:null,schemas:yt,consts:Ti,incompleteFirstPass:!1}}function Ip(h,d,v,w){const M=Hp(d);null===v?M.push(w):(M.push(v),h.firstCreatePass&&Up(h).push(w,M.length-1))}function Mp(h,d,v){for(let w in h)if(h.hasOwnProperty(w)){const M=h[w];(v=null===v?{}:v).hasOwnProperty(w)?v[w].push(d,M):v[w]=[d,M]}return v}function Uc(h,d,v,w,M,P,X,at){const yt=At(d,v);let he,Kt=d.inputs;!at&&null!=Kt&&(he=Kt[w])?(Gp(h,v,he,w,M),lr(d)&&function(h,d){const v=Xn(d,h);16&v[2]||(v[2]|=64)}(v,d.index)):3&d.type&&(w=function(h){return"class"===h?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h}(w),M=null!=X?X(M,d.value||"",w):M,Nr(P)?P.setProperty(yt,w,M):Gl(w)||(yt.setProperty?yt.setProperty(w,M):yt[w]=M))}function Xd(h,d,v,w){let M=!1;if(Rs()){const P=function(h,d,v){const w=h.directiveRegistry;let M=null;if(w)for(let P=0;P<w.length;P++){const X=w[P];Qh(v,X.selectors,!1)&&(M||(M=[]),Ge(q(v,d),h,X.type),eo(X)?(Lp(h,v),M.unshift(X)):M.push(X))}return M}(h,d,v),X=null===w?null:{"":-1};if(null!==P){M=!0,kh(v,h.data.length,P.length);for(let he=0;he<P.length;he++){const Fe=P[he];Fe.providersResolver&&Fe.providersResolver(Fe)}let at=!1,yt=!1,Kt=jh(h,d,P.length,null);for(let he=0;he<P.length;he++){const Fe=P[he];v.mergedAttrs=va(v.mergedAttrs,Fe.hostAttrs),Np(h,v,d,Kt,Fe),Wf(Kt,Fe,X),null!==Fe.contentQueries&&(v.flags|=8),(null!==Fe.hostBindings||null!==Fe.hostAttrs||0!==Fe.hostVars)&&(v.flags|=128);const si=Fe.type.prototype;!at&&(si.ngOnChanges||si.ngOnInit||si.ngDoCheck)&&((h.preOrderHooks||(h.preOrderHooks=[])).push(v.index),at=!0),!yt&&(si.ngOnChanges||si.ngDoCheck)&&((h.preOrderCheckHooks||(h.preOrderCheckHooks=[])).push(v.index),yt=!0),Kt++}!function(h,d){const w=d.directiveEnd,M=h.data,P=d.attrs,X=[];let at=null,yt=null;for(let Kt=d.directiveStart;Kt<w;Kt++){const he=M[Kt],Fe=he.inputs,si=null===P||Tu(d)?null:Yf(Fe,P);X.push(si),at=Mp(Fe,Kt,at),yt=Mp(he.outputs,Kt,yt)}null!==at&&(at.hasOwnProperty("class")&&(d.flags|=16),at.hasOwnProperty("style")&&(d.flags|=32)),d.initialInputs=X,d.inputs=at,d.outputs=yt}(h,v)}X&&function(h,d,v){if(d){const w=h.localNames=[];for(let M=0;M<d.length;M+=2){const P=v[d[M+1]];if(null==P)throw new Tt("301",`Export of name '${d[M+1]}' not found!`);w.push(d[M],P)}}}(v,w,X)}return v.mergedAttrs=va(v.mergedAttrs,v.attrs),M}function Op(h,d,v,w,M,P){const X=P.hostBindings;if(X){let at=h.hostBindingOpCodes;null===at&&(at=h.hostBindingOpCodes=[]);const yt=~d.index;(function(h){let d=h.length;for(;d>0;){const v=h[--d];if("number"==typeof v&&v<0)return v}return 0})(at)!=yt&&at.push(yt),at.push(w,M,X)}}function xp(h,d){null!==h.hostBindings&&h.hostBindings(1,d)}function Lp(h,d){d.flags|=2,(h.components||(h.components=[])).push(d.index)}function Wf(h,d,v){if(v){if(d.exportAs)for(let w=0;w<d.exportAs.length;w++)v[d.exportAs[w]]=h;eo(d)&&(v[""]=h)}}function kh(h,d,v){h.flags|=1,h.directiveStart=d,h.directiveEnd=d+v,h.providerIndexes=d}function Np(h,d,v,w,M){h.data[w]=M;const P=M.factory||(M.factory=Ns(M.type)),X=new Qo(P,eo(M),null);h.blueprint[w]=X,v[w]=X,Op(h,d,0,w,jh(h,v,M.hostVars,xr),M)}function zf(h,d,v){const w=At(d,h),M=yd(v),P=h[10],X=Td(h,sd(h,M,null,v.onPush?64:16,w,d,P,P.createRenderer(w,v),null,null));h[d.index]=X}function $u(h,d,v,w,M,P){const X=At(h,d);!function(h,d,v,w,M,P,X){if(null==P)Nr(h)?h.removeAttribute(d,M,v):d.removeAttribute(M);else{const at=null==X?It(P):X(P,w||"",M);Nr(h)?h.setAttribute(d,M,at,v):v?d.setAttributeNS(v,M,at):d.setAttribute(M,at)}}(d[11],X,P,h.value,v,w,M)}function jf(h,d,v,w,M,P){const X=P[d];if(null!==X){const at=w.setInput;for(let yt=0;yt<X.length;){const Kt=X[yt++],he=X[yt++],Fe=X[yt++];null!==at?w.setInput(v,Fe,Kt,he):v[he]=Fe}}}function Yf(h,d){let v=null,w=0;for(;w<d.length;){const M=d[w];if(0!==M)if(5!==M){if("number"==typeof M)break;h.hasOwnProperty(M)&&(null===v&&(v=[]),v.push(M,h[M],d[w+1])),w+=2}else w+=2;else w+=4}return v}function Pp(h,d,v,w){return new Array(h,!0,!1,d,null,0,w,v,null,null)}function Jf(h,d){const v=Xn(d,h);if(Or(v)){const w=v[1];80&v[2]?Yh(w,v,w.template,v[8]):v[5]>0&&Xh(v)}}function Xh(h){for(let w=Xi(h);null!==w;w=tn(w))for(let M=10;M<w.length;M++){const P=w[M];if(1024&P[2]){const X=P[1];Yh(X,P,X.template,P[8])}else P[5]>0&&Xh(P)}const v=h[1].components;if(null!==v)for(let w=0;w<v.length;w++){const M=Xn(v[w],h);Or(M)&&M[5]>0&&Xh(M)}}function $f(h,d){const v=Xn(d,h),w=v[1];(function(h,d){for(let v=d.length;v<h.blueprint.length;v++)d.push(h.blueprint[v])})(w,v),ad(w,v,v[8])}function Td(h,d){return h[13]?h[14][4]=d:h[13]=d,h[14]=d,d}function Jd(h){for(;h;){h[2]|=64;const d=gi(h);if(ks(h)&&!d)return h;h=d}return null}function Zd(h,d,v){const w=d[10];w.begin&&w.begin();try{Yh(h,d,h.template,v)}catch(M){throw Vp(d,M),M}finally{w.end&&w.end()}}function Fp(h){!function(h){for(let d=0;d<h.components.length;d++){const v=h.components[d],w=Wu(v),M=w[1];Of(M,w,M.template,v)}}(h[8])}function Qd(h,d,v){gs(0),d(h,v)}const Bp=(()=>Promise.resolve(null))();function Hp(h){return h[7]||(h[7]=[])}function Up(h){return h.cleanup||(h.cleanup=[])}function Cd(h,d,v){return(null===h||eo(h))&&(v=function(h){for(;Array.isArray(h);){if("object"==typeof h[1])return h;h=h[0]}return null}(v[d.index])),v[11]}function Vp(h,d){const v=h[9],w=v?v.get(bc,null):null;w&&w.handleError(d)}function Gp(h,d,v,w,M){for(let P=0;P<v.length;){const X=v[P++],at=v[P++],yt=d[X],Kt=h.data[X];null!==Kt.setInput?Kt.setInput(yt,M,w,at):yt[at]=M}}function ch(h,d,v){const w=W(d,h);!function(h,d,v){Nr(h)?h.setValue(d,v):d.textContent=v}(h[11],w,v)}function Sd(h,d,v){let w=v?h.styles:null,M=v?h.classes:null,P=0;if(null!==d)for(let X=0;X<d.length;X++){const at=d[X];"number"==typeof at?P=at:1==P?M=b(M,at):2==P&&(w=b(w,at+": "+d[++X]+";"))}v?h.styles=w:h.stylesWithoutHost=w,v?h.classes=M:h.classesWithoutHost=M}const qd=new No("INJECTOR",-1);class Wp{get(d,v=ea){if(v===ea){const w=new Error(`NullInjectorError: No provider for ${u(d)}!`);throw w.name="NullInjectorError",w}return v}}const zp=new No("Set Injector scope."),ld={},ng={};let wd;function cd(){return void 0===wd&&(wd=new Wp),wd}function jp(h,d=null,v=null,w){const M=Yp(h,d,v,w);return M._resolveInjectorDefTypes(),M}function Yp(h,d=null,v=null,w){return new rg(h,v,d||cd(),w)}class rg{constructor(d,v,w,M=null){this.parent=w,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const P=[];v&&bo(v,at=>this.processProvider(at,d,v)),bo([d],at=>this.processInjectorType(at,[],P)),this.records.set(qd,Kh(void 0,this));const X=this.records.get(zp);this.scope=null!=X?X.value:null,this.source=M||("object"==typeof d?null:u(d))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(d=>d.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(d,v=ea,w=ne.Default){this.assertNotDestroyed();const M=Kl(this),P=me(void 0);try{if(!(w&ne.SkipSelf)){let at=this.records.get(d);if(void 0===at){const yt=("function"==typeof(h=d)||"object"==typeof h&&h instanceof No)&&Se(d);at=yt&&this.injectableDefInScope(yt)?Kh(tp(d),ld):null,this.records.set(d,at)}if(null!=at)return this.hydrate(d,at)}return(w&ne.Self?cd():this.parent).get(d,v=w&ne.Optional&&v===ea?null:v)}catch(X){if("NullInjectorError"===X.name){if((X[Po]=X[Po]||[]).unshift(u(d)),M)throw X;return function(h,d,v,w){const M=h[Po];throw d[pc]&&M.unshift(d[pc]),h.message=function(h,d,v,w=null){h=h&&"\n"===h.charAt(0)&&"\u0275"==h.charAt(1)?h.substr(2):h;let M=u(d);if(Array.isArray(d))M=d.map(u).join(" -> ");else if("object"==typeof d){let P=[];for(let X in d)if(d.hasOwnProperty(X)){let at=d[X];P.push(X+":"+("string"==typeof at?JSON.stringify(at):u(at)))}M=`{${P.join(", ")}}`}return`${v}${w?"("+w+")":""}[${M}]: ${h.replace(dc,"\n  ")}`}("\n"+h.message,M,v,w),h.ngTokenPath=M,h[Po]=null,h}(X,d,"R3InjectorError",this.source)}throw X}finally{me(P),Kl(M)}var h}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(d=>this.get(d))}toString(){const d=[];return this.records.forEach((w,M)=>d.push(u(M))),`R3Injector[${d.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(d,v,w){if(!(d=Z(d)))return!1;let M=jt(d);const P=null==M&&d.ngModule||void 0,X=void 0===P?d:P,at=-1!==w.indexOf(X);if(void 0!==P&&(M=jt(P)),null==M)return!1;if(null!=M.imports&&!at){let he;w.push(X);try{bo(M.imports,Fe=>{this.processInjectorType(Fe,v,w)&&(void 0===he&&(he=[]),he.push(Fe))})}finally{}if(void 0!==he)for(let Fe=0;Fe<he.length;Fe++){const{ngModule:si,providers:Ti}=he[Fe];bo(Ti,$i=>this.processProvider($i,si,Ti||Ii))}}this.injectorDefTypes.add(X);const yt=Ns(X)||(()=>new X);this.records.set(X,Kh(yt,ld));const Kt=M.providers;if(null!=Kt&&!at){const he=d;bo(Kt,Fe=>this.processProvider(Fe,he,Kt))}return void 0!==P&&void 0!==d.providers}processProvider(d,v,w){let M=Jh(d=Z(d))?d:Z(d&&d.provide);const P=(h=d,Kp(h)?Kh(void 0,h.useValue):Kh(Xp(h),ld));var h;if(Jh(d)||!0!==d.multi)this.records.get(M);else{let X=this.records.get(M);X||(X=Kh(void 0,ld,!0),X.factory=()=>Jl(X.multi),this.records.set(M,X)),M=d,X.multi.push(d)}this.records.set(M,P)}hydrate(d,v){return v.value===ld&&(v.value=ng,v.value=v.factory()),"object"==typeof v.value&&v.value&&null!==(h=v.value)&&"object"==typeof h&&"function"==typeof h.ngOnDestroy&&this.onDestroy.add(v.value),v.value;var h}injectableDefInScope(d){if(!d.providedIn)return!1;const v=Z(d.providedIn);return"string"==typeof v?"any"===v||v===this.scope:this.injectorDefTypes.has(v)}}function tp(h){const d=Se(h),v=null!==d?d.factory:Ns(h);if(null!==v)return v;if(h instanceof No)throw new Error(`Token ${u(h)} is missing a \u0275prov definition.`);if(h instanceof Function)return function(h){const d=h.length;if(d>0){const w=jl(d,"?");throw new Error(`Can't resolve all parameters for ${u(h)}: (${w.join(", ")}).`)}const v=function(h){const d=h&&(h[Ce]||h[Te]);if(d){const v=function(h){if(h.hasOwnProperty("name"))return h.name;const d=(""+h).match(/^function\s*([^\s(]+)/);return null===d?"":d[1]}(h);return console.warn(`DEPRECATED: DI is instantiating a token "${v}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${v}" class.`),d}return null}(h);return null!==v?()=>v.factory(h):()=>new h}(h);throw new Error("unreachable")}function Xp(h,d,v){let w;if(Jh(h)){const M=Z(h);return Ns(M)||tp(M)}if(Kp(h))w=()=>Z(h.useValue);else if(function(h){return!(!h||!h.useFactory)}(h))w=()=>h.useFactory(...Jl(h.deps||[]));else if(function(h){return!(!h||!h.useExisting)}(h))w=()=>qo(Z(h.useExisting));else{const M=Z(h&&(h.useClass||h.provide));if(!function(h){return!!h.deps}(h))return Ns(M)||tp(M);w=()=>new M(...Jl(h.deps))}return w}function Kh(h,d,v=!1){return{factory:h,value:d,multi:v?[]:void 0}}function Kp(h){return null!==h&&"object"==typeof h&&za in h}function Jh(h){return"function"==typeof h}let ou=(()=>{class h{static create(v,w){var M;if(Array.isArray(v))return jp({name:""},w,v,"");{const P=null!==(M=v.name)&&void 0!==M?M:"";return jp({name:P},v.parent,v.providers,P)}}}return h.THROW_IF_NOT_FOUND=ea,h.NULL=new Wp,h.\u0275prov=Le({token:h,providedIn:"any",factory:()=>qo(qd)}),h.__NG_ELEMENT_ID__=-1,h})();function vg(h,d){_s(Wu(h)[1],_t())}function np(h){let d=function(h){return Object.getPrototypeOf(h.prototype).constructor}(h.type),v=!0;const w=[h];for(;d;){let M;if(eo(h))M=d.\u0275cmp||d.\u0275dir;else{if(d.\u0275cmp)throw new Error("Directives cannot inherit Components");M=d.\u0275dir}if(M){if(v){w.push(M);const X=h;X.inputs=l(h.inputs),X.declaredInputs=l(h.declaredInputs),X.outputs=l(h.outputs);const at=M.hostBindings;at&&c(h,at);const yt=M.viewQuery,Kt=M.contentQueries;if(yt&&o(h,yt),Kt&&a(h,Kt),s(h.inputs,M.inputs),s(h.declaredInputs,M.declaredInputs),s(h.outputs,M.outputs),eo(M)&&M.data.animation){const he=h.data;he.animation=(he.animation||[]).concat(M.data.animation)}}const P=M.features;if(P)for(let X=0;X<P.length;X++){const at=P[X];at&&at.ngInherit&&at(h),at===np&&(v=!1)}}d=Object.getPrototypeOf(d)}!function(h){let d=0,v=null;for(let w=h.length-1;w>=0;w--){const M=h[w];M.hostVars=d+=M.hostVars,M.hostAttrs=va(M.hostAttrs,v=va(v,M.hostAttrs))}}(w)}function l(h){return h===je?{}:h===Ii?[]:h}function o(h,d){const v=h.viewQuery;h.viewQuery=v?(w,M)=>{d(w,M),v(w,M)}:d}function a(h,d){const v=h.contentQueries;h.contentQueries=v?(w,M,P)=>{d(w,M,P),v(w,M,P)}:d}function c(h,d){const v=h.hostBindings;h.hostBindings=v?(w,M)=>{d(w,M),v(w,M)}:d}let O=null;function F(){if(!O){const h=Re.Symbol;if(h&&h.iterator)O=h.iterator;else{const d=Object.getOwnPropertyNames(Map.prototype);for(let v=0;v<d.length;++v){const w=d[v];"entries"!==w&&"size"!==w&&Map.prototype[w]===Map.prototype.entries&&(O=w)}}}return O}function dt(h){return!!Ee(h)&&(Array.isArray(h)||!(h instanceof Map)&&F()in h)}function Ee(h){return null!==h&&("function"==typeof h||"object"==typeof h)}function Ae(h,d,v){return h[d]=v}function ze(h,d,v){return!Object.is(h[d],v)&&(h[d]=v,!0)}function Si(h,d,v,w){const M=ze(h,d,v);return ze(h,d+1,w)||M}function Ki(h,d,v,w){const M=Wt();return ze(M,er(),d)&&(G(),$u(Ir(),M,h,d,v,w)),Ki}function mn(h,d,v,w){return ze(h,er(),v)?d+It(v)+w:xr}function Pn(h,d,v,w,M,P,X,at){const Kt=function(h,d,v,w,M){const P=Si(h,d,v,w);return ze(h,d+2,M)||P}(h,Nn(),v,M,X);return wr(3),Kt?d+It(v)+w+It(M)+P+It(X)+at:xr}function uh(h,d,v,w,M,P,X,at){const yt=Wt(),Kt=G(),he=h+20,Fe=Kt.firstCreatePass?function(h,d,v,w,M,P,X,at,yt){const Kt=d.consts,he=zh(d,h,4,X||null,Qr(Kt,at));Xd(d,v,he,Qr(Kt,yt)),_s(d,he);const Fe=he.tViews=Ed(2,he,w,M,P,d.directiveRegistry,d.pipeRegistry,null,d.schemas,Kt);return null!==d.queries&&(d.queries.template(d,he),Fe.queries=d.queries.embeddedTView(he)),he}(he,Kt,yt,d,v,w,M,P,X):Kt.data[he];Xe(Fe,!1);const si=yt[11].createComment("");sn(Kt,yt,si,Fe),ra(si,yt),Td(yt,yt[he]=Pp(si,yt,si,Fe)),ts(Fe)&&Yd(Kt,yt,Fe),null!=X&&bd(yt,Fe,at)}function ud(h){return ln(Hn.lFrame.contextLView,20+h)}function rp(h,d=ne.Default){const v=Wt();return null===v?qo(h,d):mr(_t(),v,Z(h),d)}function n_(){throw new Error("invalid")}function Sg(h,d,v){const w=Wt();return ze(w,er(),d)&&Uc(G(),Ir(),w,h,d,w[11],v,!1),Sg}function wg(h,d,v,w,M){const X=M?"class":"style";Gp(h,v,d.inputs[X],X,w)}function Rg(h,d,v,w){const M=Wt(),P=G(),X=20+h,at=M[11],yt=M[X]=fr(at,d,Hn.lFrame.currentNamespace),Kt=P.firstCreatePass?function(h,d,v,w,M,P,X){const at=d.consts,Kt=zh(d,h,2,M,Qr(at,P));return Xd(d,v,Kt,Qr(at,X)),null!==Kt.attrs&&Sd(Kt,Kt.attrs,!1),null!==Kt.mergedAttrs&&Sd(Kt,Kt.mergedAttrs,!0),null!==d.queries&&d.queries.elementStart(d,Kt),Kt}(X,P,M,0,d,v,w):P.data[X];Xe(Kt,!0);const he=Kt.mergedAttrs;null!==he&&Qa(at,yt,he);const Fe=Kt.classes;null!==Fe&&zr(at,yt,Fe);const si=Kt.styles;null!==si&&oe(at,yt,si),64!=(64&Kt.flags)&&sn(P,M,yt,Kt),0===Hn.lFrame.elementDepthCount&&ra(yt,M),Hn.lFrame.elementDepthCount++,ts(Kt)&&(Yd(P,M,Kt),wp(P,Kt,M)),null!==w&&bd(M,Kt)}function Dg(){let h=_t();qe()?bi():(h=h.parent,Xe(h,!1));const d=h;Hn.lFrame.elementDepthCount--;const v=G();v.firstCreatePass&&(_s(v,h),oa(h)&&v.queries.elementEnd(h)),null!=d.classesWithoutHost&&function(h){return 0!=(16&h.flags)}(d)&&wg(v,d,Wt(),d.classesWithoutHost,!0),null!=d.stylesWithoutHost&&function(h){return 0!=(32&h.flags)}(d)&&wg(v,d,Wt(),d.stylesWithoutHost,!1)}function r_(h,d,v,w){Rg(h,d,v,w),Dg()}function Ig(h,d,v){const w=Wt(),M=G(),P=h+20,X=M.firstCreatePass?function(h,d,v,w,M){const P=d.consts,X=Qr(P,w),at=zh(d,h,8,"ng-container",X);return null!==X&&Sd(at,X,!0),Xd(d,v,at,Qr(P,M)),null!==d.queries&&d.queries.elementStart(d,at),at}(P,M,w,d,v):M.data[P];Xe(X,!0);const at=w[P]=w[11].createComment("");sn(M,w,at,X),ra(at,w),ts(X)&&(Yd(M,w,X),wp(M,X,w)),null!=v&&bd(w,X)}function Mg(){let h=_t();const d=G();qe()?bi():(h=h.parent,Xe(h,!1)),d.firstCreatePass&&(_s(d,h),oa(h)&&d.queries.elementEnd(h))}function o_(h,d,v){Ig(h,d,v),Mg()}function s_(){return Wt()}function Ag(h){return!!h&&"function"==typeof h.then}function a_(h){return!!h&&"function"==typeof h.subscribe}const l_=a_;function Og(h,d,v,w){const M=Wt(),P=G(),X=_t();return c_(P,M,M[11],X,h,d,!!v,w),Og}function xg(h,d){const v=_t(),w=Wt(),M=G();return c_(M,w,Cd(Mo(M.data),v,w),v,h,d,!1),xg}function c_(h,d,v,w,M,P,X,at){const yt=ts(w),he=h.firstCreatePass&&Up(h),Fe=d[8],si=Hp(d);let Ti=!0;if(3&w.type||at){const xn=At(w,d),Jn=at?at(xn):xn,on=si.length,br=at?Ro=>at(xt(Ro[w.index])):w.index;if(Nr(v)){let Ro=null;if(!at&&yt&&(Ro=function(h,d,v,w){const M=h.cleanup;if(null!=M)for(let P=0;P<M.length-1;P+=2){const X=M[P];if(X===v&&M[P+1]===w){const at=d[7],yt=M[P+2];return at.length>yt?at[yt]:null}"string"==typeof X&&(P+=2)}return null}(h,d,M,w.index)),null!==Ro)(Ro.__ngLastListenerFn__||Ro).__ngNextListenerFn__=P,Ro.__ngLastListenerFn__=P,Ti=!1;else{P=kg(w,d,Fe,P,!1);const ps=v.listen(Jn,M,P);si.push(P,ps),he&&he.push(M,br,on,on+1)}}else P=kg(w,d,Fe,P,!0),Jn.addEventListener(M,P,X),si.push(P),he&&he.push(M,br,on,X)}else P=kg(w,d,Fe,P,!1);const $i=w.outputs;let vn;if(Ti&&null!==$i&&(vn=$i[M])){const xn=vn.length;if(xn)for(let Jn=0;Jn<xn;Jn+=2){const Mu=d[vn[Jn]][vn[Jn+1]].subscribe(P),pd=si.length;si.push(P,Mu),he&&he.push(M,w.index,pd,-(pd+1))}}}function u_(h,d,v,w){try{return!1!==v(w)}catch(M){return Vp(h,M),!1}}function kg(h,d,v,w,M){return function P(X){if(X===Function)return w;const at=2&h.flags?Xn(h.index,d):d;0==(32&d[2])&&Jd(at);let yt=u_(d,0,w,X),Kt=P.__ngNextListenerFn__;for(;Kt;)yt=u_(d,0,Kt,X)&&yt,Kt=Kt.__ngNextListenerFn__;return M&&!1===yt&&(X.preventDefault(),X.returnValue=!1),yt}}function h_(h=1){return function(h){return(Hn.lFrame.contextLView=function(h,d){for(;h>0;)d=d[15],h--;return d}(h,Hn.lFrame.contextLView))[8]}(h)}function vy(h,d){let v=null;const w=function(h){const d=h.attrs;if(null!=d){const v=d.indexOf(5);if(0==(1&v))return d[v+1]}return null}(h);for(let M=0;M<d.length;M++){const P=d[M];if("*"!==P){if(null===w?Qh(h,P,!0):yp(w,P))return M}else v=M}return v}function d_(h){const d=Wt()[16][6];if(!d.projection){const w=d.projection=jl(h?h.length:1,null),M=w.slice();let P=d.child;for(;null!==P;){const X=h?vy(P,h):0;null!==X&&(M[X]?M[X].projectionNext=P:w[X]=P,M[X]=P),P=P.next}}}function p_(h,d=0,v){const w=Wt(),M=G(),P=zh(M,20+h,16,null,v||null);null===P.projection&&(P.projection=d),bi(),64!=(64&P.flags)&&function(h,d,v){xs(d[11],0,d,v,it(h,v,d),ai(v.parent||d[6],v,d))}(M,w,P)}function Lg(h,d,v){return Ng(h,"",d,"",v),Lg}function Ng(h,d,v,w,M){const P=Wt(),X=mn(P,d,v,w);return X!==xr&&Uc(G(),Ir(),P,h,X,P[11],M,!1),Ng}function T_(h,d,v,w,M){const P=h[v+1],X=null===d;let at=w?ru(P):Su(P),yt=!1;for(;0!==at&&(!1===yt||X);){const he=h[at+1];Ey(h[at],d)&&(yt=!0,h[at+1]=w?ed(he):Cc(he)),at=w?ru(he):Su(he)}yt&&(h[v+1]=w?Cc(P):ed(P))}function Ey(h,d){return null===h||null==d||(Array.isArray(h)?h[1]:h)===d||!(!Array.isArray(h)||"string"!=typeof d)&&cc(h,d)>=0}const Al={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function C_(h){return h.substring(Al.key,Al.keyEnd)}function S_(h,d){const v=Al.textEnd;return v===d?-1:(d=Al.keyEnd=function(h,d,v){for(;d<v&&h.charCodeAt(d)>32;)d++;return d}(h,Al.key=d,v),Md(h,d,v))}function Md(h,d,v){for(;d<v&&h.charCodeAt(d)<=32;)d++;return d}function Pg(h,d,v){return hh(h,d,v,!1),Pg}function Fg(h,d){return hh(h,d,null,!0),Fg}function Eh(h,d){for(let v=function(h){return function(h){Al.key=0,Al.keyEnd=0,Al.value=0,Al.valueEnd=0,Al.textEnd=h.length}(h),S_(h,Md(h,0,Al.textEnd))}(d);v>=0;v=S_(d,v))bs(h,C_(d),!0)}function hh(h,d,v,w){const M=Wt(),P=G(),X=wr(2);P.firstUpdatePass&&A_(P,h,X,w),d!==xr&&ze(M,X,d)&&x_(P,P.data[Er()],M,M[11],h,M[X+1]=function(h,d){return null==h||("string"==typeof d?h+=d:"object"==typeof h&&(h=u(se(h)))),h}(d,v),w,X)}function M_(h,d){return d>=h.expandoStartIndex}function A_(h,d,v,w){const M=h.data;if(null===M[v+1]){const P=M[Er()],X=M_(h,v);L_(P,w)&&null===d&&!X&&(d=!1),d=function(h,d,v,w){const M=Mo(h);let P=w?d.residualClasses:d.residualStyles;if(null===M)0===(w?d.classBindings:d.styleBindings)&&(v=op(v=Bg(null,h,d,v,w),d.attrs,w),P=null);else{const X=d.directiveStylingLast;if(-1===X||h[X]!==M)if(v=Bg(M,h,d,v,w),null===P){let yt=function(h,d,v){const w=v?d.classBindings:d.styleBindings;if(0!==Su(w))return h[ru(w)]}(h,d,w);void 0!==yt&&Array.isArray(yt)&&(yt=Bg(null,h,d,yt[1],w),yt=op(yt,d.attrs,w),function(h,d,v,w){h[ru(v?d.classBindings:d.styleBindings)]=w}(h,d,w,yt))}else P=function(h,d,v){let w;const M=d.directiveEnd;for(let P=1+d.directiveStylingLast;P<M;P++)w=op(w,h[P].hostAttrs,v);return op(w,d.attrs,v)}(h,d,w)}return void 0!==P&&(w?d.residualClasses=P:d.residualStyles=P),v}(M,P,d,w),function(h,d,v,w,M,P){let X=P?d.classBindings:d.styleBindings,at=ru(X),yt=Su(X);h[w]=v;let he,Kt=!1;if(Array.isArray(v)){const Fe=v;he=Fe[1],(null===he||cc(Fe,he)>0)&&(Kt=!0)}else he=v;if(M)if(0!==yt){const si=ru(h[at+1]);h[w+1]=qh(si,at),0!==si&&(h[si+1]=td(h[si+1],w)),h[at+1]=function(h,d){return 131071&h|d<<17}(h[at+1],w)}else h[w+1]=qh(at,0),0!==at&&(h[at+1]=td(h[at+1],w)),at=w;else h[w+1]=qh(yt,0),0===at?at=w:h[yt+1]=td(h[yt+1],w),yt=w;Kt&&(h[w+1]=Cc(h[w+1])),T_(h,he,w,!0),T_(h,he,w,!1),function(h,d,v,w,M){const P=M?h.residualClasses:h.residualStyles;null!=P&&"string"==typeof d&&cc(P,d)>=0&&(v[w+1]=ed(v[w+1]))}(d,he,h,w,P),X=qh(at,yt),P?d.classBindings=X:d.styleBindings=X}(M,P,d,v,X,w)}}function Bg(h,d,v,w,M){let P=null;const X=v.directiveEnd;let at=v.directiveStylingLast;for(-1===at?at=v.directiveStart:at++;at<X&&(P=d[at],w=op(w,P.hostAttrs,M),P!==h);)at++;return null!==h&&(v.directiveStylingLast=at),w}function op(h,d,v){const w=v?1:2;let M=-1;if(null!==d)for(let P=0;P<d.length;P++){const X=d[P];"number"==typeof X?M=X:M===w&&(Array.isArray(h)||(h=void 0===h?[]:["",h]),bs(h,X,!!v||d[++P]))}return void 0===h?null:h}function x_(h,d,v,w,M,P,X,at){if(!(3&d.type))return;const yt=h.data,Kt=yt[at+1];lf(function(h){return 1==(1&h)}(Kt)?k_(yt,d,v,M,Su(Kt),X):void 0)||(lf(P)||function(h){return 2==(2&h)}(Kt)&&(P=k_(yt,null,v,M,at,X)),function(h,d,v,w,M){const P=Nr(h);if(d)M?P?h.addClass(v,w):v.classList.add(w):P?h.removeClass(v,w):v.classList.remove(w);else{let X=-1===w.indexOf("-")?void 0:wt.DashCase;if(null==M)P?h.removeStyle(v,w,X):v.style.removeProperty(w);else{const at="string"==typeof M&&M.endsWith("!important");at&&(M=M.slice(0,-10),X|=wt.Important),P?h.setStyle(v,w,M,X):v.style.setProperty(w,M,at?"important":"")}}}(w,X,W(Er(),v),M,P))}function k_(h,d,v,w,M,P){const X=null===d;let at;for(;M>0;){const yt=h[M],Kt=Array.isArray(yt),he=Kt?yt[1]:yt,Fe=null===he;let si=v[M+1];si===xr&&(si=Fe?Ii:void 0);let Ti=Fe?Yl(si,w):he===w?si:void 0;if(Kt&&!lf(Ti)&&(Ti=Yl(yt,w)),lf(Ti)&&(at=Ti,X))return at;const $i=h[M+1];M=X?ru($i):Su($i)}if(null!==d){let yt=P?d.residualClasses:d.residualStyles;null!=yt&&(at=Yl(yt,w))}return at}function lf(h){return void 0!==h}function L_(h,d){return 0!=(h.flags&(d?16:32))}function N_(h,d=""){const v=Wt(),w=G(),M=h+20,P=w.firstCreatePass?zh(w,M,1,d,null):w.data[M],X=v[M]=function(h,d){return Nr(h)?h.createText(d):h.createTextNode(d)}(v[11],d);sn(w,v,X,P),Xe(P,!1)}function Hg(h){return cf("",h,""),Hg}function cf(h,d,v){const w=Wt(),M=mn(w,h,d,v);return M!==xr&&ch(w,Er(),M),cf}function Ug(h,d,v,w,M){const P=Wt(),X=function(h,d,v,w,M,P){const at=Si(h,Nn(),v,M);return wr(2),at?d+It(v)+w+It(M)+P:xr}(P,h,d,v,w,M);return X!==xr&&ch(P,Er(),X),Ug}function Vg(h,d,v,w,M,P,X){const at=Wt(),yt=Pn(at,h,d,v,w,M,P,X);return yt!==xr&&ch(at,Er(),yt),Vg}function G_(h,d,v){!function(h,d,v,w){const M=G(),P=wr(2);M.firstUpdatePass&&A_(M,null,P,w);const X=Wt();if(v!==xr&&ze(X,P,v)){const at=M.data[Er()];if(L_(at,w)&&!M_(M,P)){let yt=w?at.classesWithoutHost:at.stylesWithoutHost;null!==yt&&(v=b(yt,v||"")),wg(M,at,X,v,w)}else!function(h,d,v,w,M,P,X,at){M===xr&&(M=Ii);let yt=0,Kt=0,he=0<M.length?M[0]:null,Fe=0<P.length?P[0]:null;for(;null!==he||null!==Fe;){const si=yt<M.length?M[yt+1]:void 0,Ti=Kt<P.length?P[Kt+1]:void 0;let vn,$i=null;he===Fe?(yt+=2,Kt+=2,si!==Ti&&($i=Fe,vn=Ti)):null===Fe||null!==he&&he<Fe?(yt+=2,$i=he):(Kt+=2,$i=Fe,vn=Ti),null!==$i&&x_(h,d,v,w,$i,vn,X,at),he=yt<M.length?M[yt]:null,Fe=Kt<P.length?P[Kt]:null}}(M,at,X,X[11],X[P+1],X[P+1]=function(h,d,v){if(null==v||""===v)return Ii;const w=[],M=se(v);if(Array.isArray(M))for(let P=0;P<M.length;P++)h(w,M[P],!0);else if("object"==typeof M)for(const P in M)M.hasOwnProperty(P)&&h(w,P,M[P]);else"string"==typeof M&&d(w,M);return w}(h,d,v),w,P)}}(bs,Eh,mn(Wt(),h,d,v),!0)}function Gg(h,d,v){const w=Wt();return ze(w,er(),d)&&Uc(G(),Ir(),w,h,d,w[11],v,!0),Gg}function Wg(h,d,v){const w=Wt();if(ze(w,er(),d)){const P=G(),X=Ir();Uc(P,X,w,h,d,Cd(Mo(P.data),X,w),v,!0)}return Wg}const hd=void 0;var eE=["en",[["a","p"],["AM","PM"],hd],[["AM","PM"],hd,hd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],hd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],hd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",hd,"{1} 'at' {0}",hd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(h){const v=Math.floor(Math.abs(h)),w=h.toString().replace(/^[^.]*\.?/,"").length;return 1===v&&0===w?1:5}];let Ad={};function zg(h){const d=function(h){return h.toLowerCase().replace(/_/g,"-")}(h);let v=q_(d);if(v)return v;const w=d.split("-")[0];if(v=q_(w),v)return v;if("en"===w)return eE;throw new Error(`Missing locale data for the locale "${h}".`)}function Q_(h){return zg(h)[Tr.PluralCase]}function q_(h){return h in Ad||(Ad[h]=Re.ng&&Re.ng.common&&Re.ng.common.locales&&Re.ng.common.locales[h]),Ad[h]}var Tr=(()=>((Tr=Tr||{})[Tr.LocaleId=0]="LocaleId",Tr[Tr.DayPeriodsFormat=1]="DayPeriodsFormat",Tr[Tr.DayPeriodsStandalone=2]="DayPeriodsStandalone",Tr[Tr.DaysFormat=3]="DaysFormat",Tr[Tr.DaysStandalone=4]="DaysStandalone",Tr[Tr.MonthsFormat=5]="MonthsFormat",Tr[Tr.MonthsStandalone=6]="MonthsStandalone",Tr[Tr.Eras=7]="Eras",Tr[Tr.FirstDayOfWeek=8]="FirstDayOfWeek",Tr[Tr.WeekendRange=9]="WeekendRange",Tr[Tr.DateFormat=10]="DateFormat",Tr[Tr.TimeFormat=11]="TimeFormat",Tr[Tr.DateTimeFormat=12]="DateTimeFormat",Tr[Tr.NumberSymbols=13]="NumberSymbols",Tr[Tr.NumberFormats=14]="NumberFormats",Tr[Tr.CurrencyCode=15]="CurrencyCode",Tr[Tr.CurrencySymbol=16]="CurrencySymbol",Tr[Tr.CurrencyName=17]="CurrencyName",Tr[Tr.Currencies=18]="Currencies",Tr[Tr.Directionality=19]="Directionality",Tr[Tr.PluralCase=20]="PluralCase",Tr[Tr.ExtraData=21]="ExtraData",Tr))();const uf="en-US";let tv=uf;function Xg(h,d,v,w,M){if(h=Z(h),Array.isArray(h))for(let P=0;P<h.length;P++)Xg(h[P],d,v,w,M);else{const P=G(),X=Wt();let at=Jh(h)?h:Z(h.provide),yt=Xp(h);const Kt=_t(),he=1048575&Kt.providerIndexes,Fe=Kt.directiveStart,si=Kt.providerIndexes>>20;if(Jh(h)||!h.multi){const Ti=new Qo(yt,M,rp),$i=Jg(at,d,M?he:he+si,Fe);-1===$i?(Ge(q(Kt,X),P,at),Kg(P,h,d.length),d.push(at),Kt.directiveStart++,Kt.directiveEnd++,M&&(Kt.providerIndexes+=1048576),v.push(Ti),X.push(Ti)):(v[$i]=Ti,X[$i]=Ti)}else{const Ti=Jg(at,d,he+si,Fe),$i=Jg(at,d,he,he+si),vn=Ti>=0&&v[Ti],xn=$i>=0&&v[$i];if(M&&!xn||!M&&!vn){Ge(q(Kt,X),P,at);const Jn=function(h,d,v,w,M){const P=new Qo(h,v,rp);return P.multi=[],P.index=d,P.componentProviders=0,Sv(P,M,w&&!v),P}(M?qE:QE,v.length,M,w,yt);!M&&xn&&(v[$i].providerFactory=Jn),Kg(P,h,d.length,0),d.push(at),Kt.directiveStart++,Kt.directiveEnd++,M&&(Kt.providerIndexes+=1048576),v.push(Jn),X.push(Jn)}else Kg(P,h,Ti>-1?Ti:$i,Sv(v[M?$i:Ti],yt,!M&&w));!M&&w&&xn&&v[$i].componentProviders++}}}function Kg(h,d,v,w){const M=Jh(d),P=function(h){return!!h.useClass}(d);if(M||P){const yt=(P?Z(d.useClass):d).prototype.ngOnDestroy;if(yt){const Kt=h.destroyHooks||(h.destroyHooks=[]);if(!M&&d.multi){const he=Kt.indexOf(v);-1===he?Kt.push(v,[w,yt]):Kt[he+1].push(w,yt)}else Kt.push(v,yt)}}}function Sv(h,d,v){return v&&h.componentProviders++,h.multi.push(d)-1}function Jg(h,d,v,w){for(let M=v;M<w;M++)if(d[M]===h)return M;return-1}function QE(h,d,v,w){return $g(this.multi,[])}function qE(h,d,v,w){const M=this.multi;let P;if(this.providerFactory){const X=this.providerFactory.componentProviders,at=Vs(v,v[1],this.providerFactory.index,w);P=at.slice(0,X),$g(M,P);for(let yt=X;yt<at.length;yt++)P.push(at[yt])}else P=[],$g(M,P);return P}function $g(h,d){for(let v=0;v<h.length;v++)d.push((0,h[v])());return d}function wv(h,d=[]){return v=>{v.providersResolver=(w,M)=>function(h,d,v){const w=G();if(w.firstCreatePass){const M=eo(h);Xg(v,w.data,w.blueprint,M,!0),Xg(d,w.data,w.blueprint,M,!1)}}(w,M?M(h):h,d)}}class Rv{}class nT{resolveComponentFactory(d){throw function(h){const d=Error(`No component factory found for ${u(h)}. Did you add it to @NgModule.entryComponents?`);return d.ngComponent=h,d}(d)}}let up=(()=>{class h{}return h.NULL=new nT,h})();function rT(){return xd(_t(),Wt())}function xd(h,d){return new hp(At(h,d))}let hp=(()=>{class h{constructor(v){this.nativeElement=v}}return h.__NG_ELEMENT_ID__=rT,h})();function oT(h){return h instanceof hp?h.nativeElement:h}class Iv{}let sT=(()=>{class h{}return h.__NG_ELEMENT_ID__=()=>function(){const h=Wt(),v=Xn(_t().index,h);return function(h){return h[11]}(so(v)?v:h)}(),h})(),cT=(()=>{class h{}return h.\u0275prov=Le({token:h,providedIn:"root",factory:()=>null}),h})();class Mv{constructor(d){this.full=d,this.major=d.split(".")[0],this.minor=d.split(".")[1],this.patch=d.split(".").slice(2).join(".")}}const uT=new Mv("13.1.1"),Zg={};function gf(h,d,v,w,M=!1){for(;null!==v;){const P=d[v.index];if(null!==P&&w.push(xt(P)),go(P))for(let at=10;at<P.length;at++){const yt=P[at],Kt=yt[1].firstChild;null!==Kt&&gf(yt[1],yt,Kt,w)}const X=v.type;if(8&X)gf(h,d,v.child,w);else if(32&X){const at=$t(v,d);let yt;for(;yt=at();)w.push(yt)}else if(16&X){const at=rn(d,v);if(Array.isArray(at))w.push(...at);else{const yt=gi(d[16]);gf(yt[1],yt,at,w,!0)}}v=M?v.projectionNext:v.next}return w}class dp{constructor(d,v){this._lView=d,this._cdRefInjectingView=v,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const d=this._lView,v=d[1];return gf(v,d,v.firstChild,[])}get context(){return this._lView[8]}set context(d){this._lView[8]=d}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const d=this._lView[3];if(go(d)){const v=d[8],w=v?v.indexOf(this):-1;w>-1&&(zs(d,w),Wa(v,w))}this._attachedToViewContainer=!1}Os(this._lView[1],this._lView)}onDestroy(d){Ip(this._lView[1],this._lView,null,d)}markForCheck(){Jd(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Zd(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(h,d,v){Zn(!0);try{Zd(h,d,v)}finally{Zn(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var d;this._appRef=null,wo(this._lView[1],d=this._lView,d[11],2,null,null)}attachToAppRef(d){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=d}}class hT extends dp{constructor(d){super(d),this._view=d}detectChanges(){Fp(this._view)}checkNoChanges(){!function(h){Zn(!0);try{Fp(h)}finally{Zn(!1)}}(this._view)}get context(){return null}}class Av extends up{constructor(d){super(),this.ngModule=d}resolveComponentFactory(d){const v=xi(d);return new Qg(v,this.ngModule)}}function Ov(h){const d=[];for(let v in h)h.hasOwnProperty(v)&&d.push({propName:h[v],templateName:v});return d}const pT=new No("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Bc});class Qg extends Rv{constructor(d,v){super(),this.componentDef=d,this.ngModule=v,this.componentType=d.type,this.selector=d.selectors.map(Ep).join(","),this.ngContentSelectors=d.ngContentSelectors?d.ngContentSelectors:[],this.isBoundToModule=!!v}get inputs(){return Ov(this.componentDef.inputs)}get outputs(){return Ov(this.componentDef.outputs)}create(d,v,w,M){const P=(M=M||this.ngModule)?function(h,d){return{get:(v,w,M)=>{const P=h.get(v,Zg,M);return P!==Zg||w===Zg?P:d.get(v,w,M)}}}(d,M.injector):d,X=P.get(Iv,Ln),at=P.get(cT,null),yt=X.createRenderer(null,this.componentDef),Kt=this.componentDef.selectors[0][0]||"div",he=w?function(h,d,v){if(Nr(h))return h.selectRootElement(d,v===wi.ShadowDom);let w="string"==typeof d?h.querySelector(d):d;return w.textContent="",w}(yt,w,this.componentDef.encapsulation):fr(X.createRenderer(null,this.componentDef),Kt,function(h){const d=h.toLowerCase();return"svg"===d?$s:"math"===d?"http://www.w3.org/1998/MathML/":null}(Kt)),Fe=this.componentDef.onPush?576:528,si=function(h,d){return{components:[],scheduler:h||Bc,clean:Bp,playerHandler:d||null,flags:0}}(),Ti=Ed(0,null,null,1,0,null,null,null,null,null),$i=sd(null,Ti,si,Fe,null,null,X,yt,at,P);let vn,xn;Na($i);try{const Jn=function(h,d,v,w,M,P){const X=v[1];v[20]=h;const yt=zh(X,20,2,"#host",null),Kt=yt.mergedAttrs=d.hostAttrs;null!==Kt&&(Sd(yt,Kt,!0),null!==h&&(Qa(M,h,Kt),null!==yt.classes&&zr(M,h,yt.classes),null!==yt.styles&&oe(M,h,yt.styles)));const he=w.createRenderer(h,d),Fe=sd(v,yd(d),null,d.onPush?64:16,v[20],yt,w,he,P||null,null);return X.firstCreatePass&&(Ge(q(yt,v),X,d.type),Lp(X,yt),kh(yt,v.length,1)),Td(v,Fe),v[20]=Fe}(he,this.componentDef,$i,X,yt);if(he)if(w)Qa(yt,he,["ng-version",uT.full]);else{const{attrs:on,classes:br}=function(h){const d=[],v=[];let w=1,M=2;for(;w<h.length;){let P=h[w];if("string"==typeof P)2===M?""!==P&&d.push(P,h[++w]):8===M&&v.push(P);else{if(!bl(M))break;M=P}w++}return{attrs:d,classes:v}}(this.componentDef.selectors[0]);on&&Qa(yt,he,on),br&&br.length>0&&zr(yt,he,br.join(" "))}if(xn=vi(Ti,20),void 0!==v){const on=xn.projection=[];for(let br=0;br<this.ngContentSelectors.length;br++){const Ro=v[br];on.push(null!=Ro?Array.from(Ro):null)}}vn=function(h,d,v,w,M){const P=v[1],X=function(h,d,v){const w=_t();h.firstCreatePass&&(v.providersResolver&&v.providersResolver(v),Np(h,w,d,jh(h,d,1,null),v));const M=Vs(d,h,w.directiveStart,w);ra(M,d);const P=At(w,d);return P&&ra(P,d),M}(P,v,d);if(w.components.push(X),h[8]=X,M&&M.forEach(yt=>yt(X,d)),d.contentQueries){const yt=_t();d.contentQueries(1,X,yt.directiveStart)}const at=_t();return!P.firstCreatePass||null===d.hostBindings&&null===d.hostAttrs||(ns(at.index),Op(v[1],at,0,at.directiveStart,at.directiveEnd,d),xp(d,X)),X}(Jn,this.componentDef,$i,si,[vg]),ad(Ti,$i,null)}finally{An()}return new mT(this.componentType,vn,xd(xn,$i),$i,xn)}}class mT extends class{}{constructor(d,v,w,M,P){super(),this.location=w,this._rootLView=M,this._tNode=P,this.instance=v,this.hostView=this.changeDetectorRef=new hT(M),this.componentType=d}get injector(){return new Gs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(d){this.hostView.onDestroy(d)}}class kd{}class xv{}const Ld=new Map;class Nv extends kd{constructor(d,v){super(),this._parent=v,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Av(this);const w=or(d);this._bootstrapComponents=I(w.bootstrap),this._r3Injector=Yp(d,v,[{provide:kd,useValue:this},{provide:up,useValue:this.componentFactoryResolver}],u(d)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(d)}get(d,v=ou.THROW_IF_NOT_FOUND,w=ne.Default){return d===ou||d===kd||d===qd?this:this._r3Injector.get(d,v,w)}destroy(){const d=this._r3Injector;!d.destroyed&&d.destroy(),this.destroyCbs.forEach(v=>v()),this.destroyCbs=null}onDestroy(d){this.destroyCbs.push(d)}}class qg extends xv{constructor(d){super(),this.moduleType=d,null!==or(d)&&function(h){const d=new Set;!function v(w){const M=or(w,!0),P=M.id;null!==P&&(function(h,d,v){if(d&&d!==v)throw new Error(`Duplicate module registered for ${h} - ${u(d)} vs ${u(d.name)}`)}(P,Ld.get(P),w),Ld.set(P,w));const X=I(M.imports);for(const at of X)d.has(at)||(d.add(at),v(at))}(h)}(d)}create(d){return new Nv(this.moduleType,d)}}function Pv(h,d,v){const w=Qn()+h,M=Wt();return M[w]===xr?Ae(M,w,v?d.call(v):d()):function(h,d){return h[d]}(M,w)}function Fv(h,d,v,w){return Hv(Wt(),Qn(),h,d,v,w)}function Bv(h,d,v,w,M){return function(h,d,v,w,M,P,X){const at=d+v;return Si(h,at,M,P)?Ae(h,at+2,X?w.call(X,M,P):w(M,P)):pp(h,at+2)}(Wt(),Qn(),h,d,v,w,M)}function pp(h,d){const v=h[d];return v===xr?void 0:v}function Hv(h,d,v,w,M,P){const X=d+v;return ze(h,X,M)?Ae(h,X+1,P?w.call(P,M):w(M)):pp(h,X+1)}function zv(h,d){const v=G();let w;const M=h+20;v.firstCreatePass?(w=function(h,d){if(d)for(let v=d.length-1;v>=0;v--){const w=d[v];if(h===w.name)return w}}(d,v.pipeRegistry),v.data[M]=w,w.onDestroy&&(v.destroyHooks||(v.destroyHooks=[])).push(M,w.onDestroy)):w=v.data[M];const P=w.factory||(w.factory=Ns(w.type)),X=me(rp);try{const at=nc(!1),yt=P();return nc(at),function(h,d,v,w){v>=h.data.length&&(h.data[v]=null,h.blueprint[v]=null),d[v]=w}(v,Wt(),M,yt),yt}finally{me(X)}}function jv(h,d,v){const w=h+20,M=Wt(),P=ln(M,w);return function(h,d){return h[1].data[d].pure}(M,w)?Hv(M,Qn(),d,P.transform,v,P):P.transform(v)}function tm(h){return d=>{setTimeout(h,void 0,d)}}const Th=class extends T.x{constructor(d=!1){super(),this.__isAsync=d}emit(d){super.next(d)}subscribe(d,v,w){var M,P,X;let at=d,yt=v||(()=>null),Kt=w;if(d&&"object"==typeof d){const Fe=d;at=null===(M=Fe.next)||void 0===M?void 0:M.bind(Fe),yt=null===(P=Fe.error)||void 0===P?void 0:P.bind(Fe),Kt=null===(X=Fe.complete)||void 0===X?void 0:X.bind(Fe)}this.__isAsync&&(yt=tm(yt),at&&(at=tm(at)),Kt&&(Kt=tm(Kt)));const he=super.subscribe({next:at,error:yt,complete:Kt});return d instanceof _.w0&&d.add(he),he}};function xT(){return this._results[F()]()}class mf{constructor(d=!1){this._emitDistinctChangesOnly=d,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const v=F(),w=mf.prototype;w[v]||(w[v]=xT)}get changes(){return this._changes||(this._changes=new Th)}get(d){return this._results[d]}map(d){return this._results.map(d)}filter(d){return this._results.filter(d)}find(d){return this._results.find(d)}reduce(d,v){return this._results.reduce(d,v)}forEach(d){this._results.forEach(d)}some(d){return this._results.some(d)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(d,v){const w=this;w.dirty=!1;const M=da(d);(this._changesDetected=!function(h,d,v){if(h.length!==d.length)return!1;for(let w=0;w<h.length;w++){let M=h[w],P=d[w];if(v&&(M=v(M),P=v(P)),P!==M)return!1}return!0}(w._results,M,v))&&(w._results=M,w.length=M.length,w.last=M[this.length-1],w.first=M[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let gp=(()=>{class h{}return h.__NG_ELEMENT_ID__=NT,h})();const kT=gp,LT=class extends kT{constructor(d,v,w){super(),this._declarationLView=d,this._declarationTContainer=v,this.elementRef=w}createEmbeddedView(d){const v=this._declarationTContainer.tViews,w=sd(this._declarationLView,v,d,16,null,v.declTNode,null,null,null,null);w[17]=this._declarationLView[this._declarationTContainer.index];const P=this._declarationLView[19];return null!==P&&(w[19]=P.createEmbeddedView(v)),ad(v,w,d),new dp(w)}};function NT(){return _f(_t(),Wt())}function _f(h,d){return 4&h.type?new LT(d,h,xd(h,d)):null}let vf=(()=>{class h{}return h.__NG_ELEMENT_ID__=PT,h})();function PT(){return Kv(_t(),Wt())}const FT=vf,Yv=class extends FT{constructor(d,v,w){super(),this._lContainer=d,this._hostTNode=v,this._hostLView=w}get element(){return xd(this._hostTNode,this._hostLView)}get injector(){return new Gs(this._hostTNode,this._hostLView)}get parentInjector(){const d=_e(this._hostTNode,this._hostLView);if(Us(d)){const v=Va(d,this._hostLView),w=Ua(d);return new Gs(v[1].data[w+8],v)}return new Gs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(d){const v=Xv(this._lContainer);return null!==v&&v[d]||null}get length(){return this._lContainer.length-10}createEmbeddedView(d,v,w){const M=d.createEmbeddedView(v||{});return this.insert(M,w),M}createComponent(d,v,w,M,P){const X=d&&!("function"==typeof d);let at;if(X)at=v;else{const Fe=v||{};at=Fe.index,w=Fe.injector,M=Fe.projectableNodes,P=Fe.ngModuleRef}const yt=X?d:new Qg(xi(d)),Kt=w||this.parentInjector;if(!P&&null==yt.ngModule&&Kt){const Fe=Kt.get(kd,null);Fe&&(P=Fe)}const he=yt.create(Kt,M,void 0,P);return this.insert(he.hostView,at),he}insert(d,v){const w=d._lView,M=w[1];if(go(w[3])){const he=this.indexOf(d);if(-1!==he)this.detach(he);else{const Fe=w[3],si=new Yv(Fe,Fe[6],Fe[3]);si.detach(si.indexOf(d))}}const P=this._adjustIndex(v),X=this._lContainer;!function(h,d,v,w){const M=10+w,P=v.length;w>0&&(v[M-1][4]=d),w<P-10?(d[4]=v[M],ba(v,10+w,d)):(v.push(d),d[4]=null),d[3]=v;const X=d[17];null!==X&&v!==X&&function(h,d){const v=h[9];d[16]!==d[3][3][16]&&(h[2]=!0),null===v?h[9]=[d]:v.push(d)}(X,d);const at=d[19];null!==at&&at.insertView(h),d[2]|=128}(M,w,X,P);const at=Jr(P,X),yt=w[11],Kt=Me(yt,X[7]);return null!==Kt&&function(h,d,v,w,M,P){w[0]=M,w[6]=d,wo(h,w,v,1,M,P)}(M,X[6],yt,w,Kt,at),d.attachToViewContainerRef(),ba(em(X),P,d),d}move(d,v){return this.insert(d,v)}indexOf(d){const v=Xv(this._lContainer);return null!==v?v.indexOf(d):-1}remove(d){const v=this._adjustIndex(d,-1),w=zs(this._lContainer,v);w&&(Wa(em(this._lContainer),v),Os(w[1],w))}detach(d){const v=this._adjustIndex(d,-1),w=zs(this._lContainer,v);return w&&null!=Wa(em(this._lContainer),v)?new dp(w):null}_adjustIndex(d,v=0){return null==d?this.length+v:d}};function Xv(h){return h[8]}function em(h){return h[8]||(h[8]=[])}function Kv(h,d){let v;const w=d[h.index];if(go(w))v=w;else{let M;if(8&h.type)M=xt(w);else{const P=d[11];M=P.createComment("");const X=At(h,d);Xt(P,Me(P,X),M,function(h,d){return Nr(h)?h.nextSibling(d):d.nextSibling}(P,X),!1)}d[h.index]=v=Pp(w,d,M,h),Td(d,v)}return new Yv(v,h,d)}class im{constructor(d){this.queryList=d,this.matches=null}clone(){return new im(this.queryList)}setDirty(){this.queryList.setDirty()}}class nm{constructor(d=[]){this.queries=d}createEmbeddedView(d){const v=d.queries;if(null!==v){const w=null!==d.contentQueries?d.contentQueries[0]:v.length,M=[];for(let P=0;P<w;P++){const X=v.getByIndex(P);M.push(this.queries[X.indexInDeclarationView].clone())}return new nm(M)}return null}insertView(d){this.dirtyQueriesWithMatches(d)}detachView(d){this.dirtyQueriesWithMatches(d)}dirtyQueriesWithMatches(d){for(let v=0;v<this.queries.length;v++)null!==nb(d,v).matches&&this.queries[v].setDirty()}}class Jv{constructor(d,v,w=null){this.predicate=d,this.flags=v,this.read=w}}class rm{constructor(d=[]){this.queries=d}elementStart(d,v){for(let w=0;w<this.queries.length;w++)this.queries[w].elementStart(d,v)}elementEnd(d){for(let v=0;v<this.queries.length;v++)this.queries[v].elementEnd(d)}embeddedTView(d){let v=null;for(let w=0;w<this.length;w++){const M=null!==v?v.length:0,P=this.getByIndex(w).embeddedTView(d,M);P&&(P.indexInDeclarationView=w,null!==v?v.push(P):v=[P])}return null!==v?new rm(v):null}template(d,v){for(let w=0;w<this.queries.length;w++)this.queries[w].template(d,v)}getByIndex(d){return this.queries[d]}get length(){return this.queries.length}track(d){this.queries.push(d)}}class om{constructor(d,v=-1){this.metadata=d,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=v}elementStart(d,v){this.isApplyingToNode(v)&&this.matchTNode(d,v)}elementEnd(d){this._declarationNodeIndex===d.index&&(this._appliesToNextNode=!1)}template(d,v){this.elementStart(d,v)}embeddedTView(d,v){return this.isApplyingToNode(d)?(this.crossesNgTemplate=!0,this.addMatch(-d.index,v),new om(this.metadata)):null}isApplyingToNode(d){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const v=this._declarationNodeIndex;let w=d.parent;for(;null!==w&&8&w.type&&w.index!==v;)w=w.parent;return v===(null!==w?w.index:-1)}return this._appliesToNextNode}matchTNode(d,v){const w=this.metadata.predicate;if(Array.isArray(w))for(let M=0;M<w.length;M++){const P=w[M];this.matchTNodeWithReadOption(d,v,UT(v,P)),this.matchTNodeWithReadOption(d,v,cl(v,d,P,!1,!1))}else w===gp?4&v.type&&this.matchTNodeWithReadOption(d,v,-1):this.matchTNodeWithReadOption(d,v,cl(v,d,w,!1,!1))}matchTNodeWithReadOption(d,v,w){if(null!==w){const M=this.metadata.read;if(null!==M)if(M===hp||M===vf||M===gp&&4&v.type)this.addMatch(v.index,-2);else{const P=cl(v,d,M,!1,!1);null!==P&&this.addMatch(v.index,P)}else this.addMatch(v.index,w)}}addMatch(d,v){null===this.matches?this.matches=[d,v]:this.matches.push(d,v)}}function UT(h,d){const v=h.localNames;if(null!==v)for(let w=0;w<v.length;w+=2)if(v[w]===d)return v[w+1];return null}function GT(h,d,v,w){return-1===v?function(h,d){return 11&h.type?xd(h,d):4&h.type?_f(h,d):null}(d,h):-2===v?function(h,d,v){return v===hp?xd(d,h):v===gp?_f(d,h):v===vf?Kv(d,h):void 0}(h,d,w):Vs(h,h[1],v,d)}function $v(h,d,v,w){const M=d[19].queries[w];if(null===M.matches){const P=h.data,X=v.matches,at=[];for(let yt=0;yt<X.length;yt+=2){const Kt=X[yt];at.push(Kt<0?null:GT(d,P[Kt],X[yt+1],v.metadata.read))}M.matches=at}return M.matches}function sm(h,d,v,w){const M=h.queries.getByIndex(v),P=M.matches;if(null!==P){const X=$v(h,d,M,v);for(let at=0;at<P.length;at+=2){const yt=P[at];if(yt>0)w.push(X[at/2]);else{const Kt=P[at+1],he=d[-yt];for(let Fe=10;Fe<he.length;Fe++){const si=he[Fe];si[17]===si[3]&&sm(si[1],si,Kt,w)}if(null!==he[9]){const Fe=he[9];for(let si=0;si<Fe.length;si++){const Ti=Fe[si];sm(Ti[1],Ti,Kt,w)}}}}}return w}function Zv(h){const d=Wt(),v=G(),w=Zs();gs(w+1);const M=nb(v,w);if(h.dirty&&yr(d)===(2==(2&M.metadata.flags))){if(null===M.matches)h.reset([]);else{const P=M.crossesNgTemplate?sm(v,d,w,[]):$v(v,d,M,w);h.reset(P,oT),h.notifyOnChanges()}return!0}return!1}function Qv(h,d,v){const w=G();w.firstCreatePass&&(ib(w,new Jv(h,d,v),-1),2==(2&d)&&(w.staticViewQueries=!0)),eb(w,Wt(),d)}function qv(h,d,v,w){const M=G();if(M.firstCreatePass){const P=_t();ib(M,new Jv(d,v,w),P.index),function(h,d){const v=h.contentQueries||(h.contentQueries=[]);d!==(v.length?v[v.length-1]:-1)&&v.push(h.queries.length-1,d)}(M,h),2==(2&v)&&(M.staticContentQueries=!0)}eb(M,Wt(),v)}function tb(){return h=Wt(),d=Zs(),h[19].queries[d].queryList;var h,d}function eb(h,d,v){const w=new mf(4==(4&v));Ip(h,d,w,w.destroy),null===d[19]&&(d[19]=new nm),d[19].queries.push(new im(w))}function ib(h,d,v){null===h.queries&&(h.queries=new rm),h.queries.track(new om(d,v))}function nb(h,d){return h.queries.getByIndex(d)}function rb(h,d){return _f(h,d)}function Ef(...h){}const dm=new No("Application Initializer");let Pd=(()=>{class h{constructor(v){this.appInits=v,this.resolve=Ef,this.reject=Ef,this.initialized=!1,this.done=!1,this.donePromise=new Promise((w,M)=>{this.resolve=w,this.reject=M})}runInitializers(){if(this.initialized)return;const v=[],w=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let M=0;M<this.appInits.length;M++){const P=this.appInits[M]();if(Ag(P))v.push(P);else if(l_(P)){const X=new Promise((at,yt)=>{P.subscribe({complete:at,error:yt})});v.push(X)}}Promise.all(v).then(()=>{w()}).catch(M=>{this.reject(M)}),0===v.length&&w(),this.initialized=!0}}return h.\u0275fac=function(v){return new(v||h)(qo(dm,8))},h.\u0275prov=Le({token:h,factory:h.\u0275fac}),h})();const Eb=new No("AppId"),cC={provide:Eb,useFactory:function(){return`${pm()}${pm()}${pm()}`},deps:[]};function pm(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Tb=new No("Platform Initializer"),Cb=new No("Platform ID"),Sb=new No("appBootstrapListener");let wb=(()=>{class h{log(v){console.log(v)}warn(v){console.warn(v)}}return h.\u0275fac=function(v){return new(v||h)},h.\u0275prov=Le({token:h,factory:h.\u0275fac}),h})();const Tf=new No("LocaleId"),Rb=new No("DefaultCurrencyCode");class uC{constructor(d,v){this.ngModuleFactory=d,this.componentFactories=v}}let fm=(()=>{class h{compileModuleSync(v){return new qg(v)}compileModuleAsync(v){return Promise.resolve(this.compileModuleSync(v))}compileModuleAndAllComponentsSync(v){const w=this.compileModuleSync(v),P=I(or(v).declarations).reduce((X,at)=>{const yt=xi(at);return yt&&X.push(new Qg(yt)),X},[]);return new uC(w,P)}compileModuleAndAllComponentsAsync(v){return Promise.resolve(this.compileModuleAndAllComponentsSync(v))}clearCache(){}clearCacheFor(v){}getModuleId(v){}}return h.\u0275fac=function(v){return new(v||h)},h.\u0275prov=Le({token:h,factory:h.\u0275fac}),h})();const dC=(()=>Promise.resolve(0))();function gm(h){"undefined"==typeof Zone?dC.then(()=>{h&&h.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",h)}class Iu{constructor({enableLongStackTrace:d=!1,shouldCoalesceEventChangeDetection:v=!1,shouldCoalesceRunChangeDetection:w=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Th(!1),this.onMicrotaskEmpty=new Th(!1),this.onStable=new Th(!1),this.onError=new Th(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const M=this;M._nesting=0,M._outer=M._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(M._inner=M._inner.fork(new Zone.TaskTrackingZoneSpec)),d&&Zone.longStackTraceZoneSpec&&(M._inner=M._inner.fork(Zone.longStackTraceZoneSpec)),M.shouldCoalesceEventChangeDetection=!w&&v,M.shouldCoalesceRunChangeDetection=w,M.lastRequestAnimationFrameId=-1,M.nativeRequestAnimationFrame=function(){let h=Re.requestAnimationFrame,d=Re.cancelAnimationFrame;if("undefined"!=typeof Zone&&h&&d){const v=h[Zone.__symbol__("OriginalDelegate")];v&&(h=v);const w=d[Zone.__symbol__("OriginalDelegate")];w&&(d=w)}return{nativeRequestAnimationFrame:h,nativeCancelAnimationFrame:d}}().nativeRequestAnimationFrame,function(h){const d=()=>{!function(h){h.isCheckStableRunning||-1!==h.lastRequestAnimationFrameId||(h.lastRequestAnimationFrameId=h.nativeRequestAnimationFrame.call(Re,()=>{h.fakeTopEventTask||(h.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{h.lastRequestAnimationFrameId=-1,_m(h),h.isCheckStableRunning=!0,mm(h),h.isCheckStableRunning=!1},void 0,()=>{},()=>{})),h.fakeTopEventTask.invoke()}),_m(h))}(h)};h._inner=h._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(v,w,M,P,X,at)=>{try{return Db(h),v.invokeTask(M,P,X,at)}finally{(h.shouldCoalesceEventChangeDetection&&"eventTask"===P.type||h.shouldCoalesceRunChangeDetection)&&d(),Ib(h)}},onInvoke:(v,w,M,P,X,at,yt)=>{try{return Db(h),v.invoke(M,P,X,at,yt)}finally{h.shouldCoalesceRunChangeDetection&&d(),Ib(h)}},onHasTask:(v,w,M,P)=>{v.hasTask(M,P),w===M&&("microTask"==P.change?(h._hasPendingMicrotasks=P.microTask,_m(h),mm(h)):"macroTask"==P.change&&(h.hasPendingMacrotasks=P.macroTask))},onHandleError:(v,w,M,P)=>(v.handleError(M,P),h.runOutsideAngular(()=>h.onError.emit(P)),!1)})}(M)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Iu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Iu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(d,v,w){return this._inner.run(d,v,w)}runTask(d,v,w,M){const P=this._inner,X=P.scheduleEventTask("NgZoneEvent: "+M,d,fC,Ef,Ef);try{return P.runTask(X,v,w)}finally{P.cancelTask(X)}}runGuarded(d,v,w){return this._inner.runGuarded(d,v,w)}runOutsideAngular(d){return this._outer.run(d)}}const fC={};function mm(h){if(0==h._nesting&&!h.hasPendingMicrotasks&&!h.isStable)try{h._nesting++,h.onMicrotaskEmpty.emit(null)}finally{if(h._nesting--,!h.hasPendingMicrotasks)try{h.runOutsideAngular(()=>h.onStable.emit(null))}finally{h.isStable=!0}}}function _m(h){h.hasPendingMicrotasks=!!(h._hasPendingMicrotasks||(h.shouldCoalesceEventChangeDetection||h.shouldCoalesceRunChangeDetection)&&-1!==h.lastRequestAnimationFrameId)}function Db(h){h._nesting++,h.isStable&&(h.isStable=!1,h.onUnstable.emit(null))}function Ib(h){h._nesting--,mm(h)}class _C{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Th,this.onMicrotaskEmpty=new Th,this.onStable=new Th,this.onError=new Th}run(d,v,w){return d.apply(v,w)}runGuarded(d,v,w){return d.apply(v,w)}runOutsideAngular(d){return d()}runTask(d,v,w,M){return d.apply(v,w)}}let Mb=(()=>{class h{constructor(v){this._ngZone=v,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),v.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Iu.assertNotInAngularZone(),gm(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())gm(()=>{for(;0!==this._callbacks.length;){let v=this._callbacks.pop();clearTimeout(v.timeoutId),v.doneCb(this._didWork)}this._didWork=!1});else{let v=this.getPendingTasks();this._callbacks=this._callbacks.filter(w=>!w.updateCb||!w.updateCb(v)||(clearTimeout(w.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(v=>({source:v.source,creationLocation:v.creationLocation,data:v.data})):[]}addCallback(v,w,M){let P=-1;w&&w>0&&(P=setTimeout(()=>{this._callbacks=this._callbacks.filter(X=>X.timeoutId!==P),v(this._didWork,this.getPendingTasks())},w)),this._callbacks.push({doneCb:v,timeoutId:P,updateCb:M})}whenStable(v,w,M){if(M&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(v,w,M),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(v,w,M){return[]}}return h.\u0275fac=function(v){return new(v||h)(qo(Iu))},h.\u0275prov=Le({token:h,factory:h.\u0275fac}),h})(),Ab=(()=>{class h{constructor(){this._applications=new Map,vm.addToWindow(this)}registerApplication(v,w){this._applications.set(v,w)}unregisterApplication(v){this._applications.delete(v)}unregisterAllApplications(){this._applications.clear()}getTestability(v){return this._applications.get(v)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(v,w=!0){return vm.findTestabilityInTree(this,v,w)}}return h.\u0275fac=function(v){return new(v||h)},h.\u0275prov=Le({token:h,factory:h.\u0275fac}),h})();class vC{addToWindow(d){}findTestabilityInTree(d,v,w){return null}}function bC(h){vm=h}let ph,vm=new vC;const Ob=new No("AllowMultipleToken");class CC{constructor(d,v){this.name=d,this.token=v}}function xb(h,d,v=[]){const w=`Platform: ${d}`,M=new No(w);return(P=[])=>{let X=kb();if(!X||X.injector.get(Ob,!1))if(h)h(v.concat(P).concat({provide:M,useValue:!0}));else{const at=v.concat(P).concat({provide:M,useValue:!0},{provide:zp,useValue:"platform"});!function(h){if(ph&&!ph.destroyed&&!ph.injector.get(Ob,!1))throw new Tt("400","");ph=h.get(Lb);const d=h.get(Tb,null);d&&d.forEach(v=>v())}(ou.create({providers:at,name:w}))}return function(h){const d=kb();if(!d)throw new Tt("401","");return d}()}}function kb(){return ph&&!ph.destroyed?ph:null}let Lb=(()=>{class h{constructor(v){this._injector=v,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(v,w){const at=function(h,d){let v;return v="noop"===h?new _C:("zone.js"===h?void 0:h)||new Iu({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==d?void 0:d.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==d?void 0:d.ngZoneRunCoalescing)}),v}(w?w.ngZone:void 0,{ngZoneEventCoalescing:w&&w.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:w&&w.ngZoneRunCoalescing||!1}),yt=[{provide:Iu,useValue:at}];return at.run(()=>{const Kt=ou.create({providers:yt,parent:this.injector,name:v.moduleType.name}),he=v.create(Kt),Fe=he.injector.get(bc,null);if(!Fe)throw new Tt("402","");return at.runOutsideAngular(()=>{const si=at.onError.subscribe({next:Ti=>{Fe.handleError(Ti)}});he.onDestroy(()=>{bm(this._modules,he),si.unsubscribe()})}),function(h,d,v){try{const w=v();return Ag(w)?w.catch(M=>{throw d.runOutsideAngular(()=>h.handleError(M)),M}):w}catch(w){throw d.runOutsideAngular(()=>h.handleError(w)),w}}(Fe,at,()=>{const si=he.injector.get(Pd);return si.runInitializers(),si.donePromise.then(()=>(function(h){He(h,"Expected localeId to be defined"),"string"==typeof h&&(tv=h.toLowerCase().replace(/_/g,"-"))}(he.injector.get(Tf,uf)||uf),this._moduleDoBootstrap(he),he))})})}bootstrapModule(v,w=[]){const M=Nb({},w);return function(h,d,v){const w=new qg(v);return Promise.resolve(w)}(0,0,v).then(P=>this.bootstrapModuleFactory(P,M))}_moduleDoBootstrap(v){const w=v.injector.get(_p);if(v._bootstrapComponents.length>0)v._bootstrapComponents.forEach(M=>w.bootstrap(M));else{if(!v.instance.ngDoBootstrap)throw new Tt("403","");v.instance.ngDoBootstrap(w)}this._modules.push(v)}onDestroy(v){this._destroyListeners.push(v)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Tt("404","");this._modules.slice().forEach(v=>v.destroy()),this._destroyListeners.forEach(v=>v()),this._destroyed=!0}get destroyed(){return this._destroyed}}return h.\u0275fac=function(v){return new(v||h)(qo(ou))},h.\u0275prov=Le({token:h,factory:h.\u0275fac}),h})();function Nb(h,d){return Array.isArray(d)?d.reduce(Nb,h):Object.assign(Object.assign({},h),d)}let _p=(()=>{class h{constructor(v,w,M,P,X){this._zone=v,this._injector=w,this._exceptionHandler=M,this._componentFactoryResolver=P,this._initStatus=X,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const at=new e.y(Kt=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{Kt.next(this._stable),Kt.complete()})}),yt=new e.y(Kt=>{let he;this._zone.runOutsideAngular(()=>{he=this._zone.onStable.subscribe(()=>{Iu.assertNotInAngularZone(),gm(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,Kt.next(!0))})})});const Fe=this._zone.onUnstable.subscribe(()=>{Iu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{Kt.next(!1)}))});return()=>{he.unsubscribe(),Fe.unsubscribe()}});this.isStable=(0,t.T)(at,yt.pipe((0,n.B)()))}bootstrap(v,w){if(!this._initStatus.done)throw new Tt("405","");let M;M=v instanceof Rv?v:this._componentFactoryResolver.resolveComponentFactory(v),this.componentTypes.push(M.componentType);const P=function(h){return h.isBoundToModule}(M)?void 0:this._injector.get(kd),at=M.create(ou.NULL,[],w||M.selector,P),yt=at.location.nativeElement,Kt=at.injector.get(Mb,null),he=Kt&&at.injector.get(Ab);return Kt&&he&&he.registerApplication(yt,Kt),at.onDestroy(()=>{this.detachView(at.hostView),bm(this.components,at),he&&he.unregisterApplication(yt)}),this._loadComponent(at),at}tick(){if(this._runningTick)throw new Tt("101","");try{this._runningTick=!0;for(let v of this._views)v.detectChanges()}catch(v){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(v))}finally{this._runningTick=!1}}attachView(v){const w=v;this._views.push(w),w.attachToAppRef(this)}detachView(v){const w=v;bm(this._views,w),w.detachFromAppRef()}_loadComponent(v){this.attachView(v.hostView),this.tick(),this.components.push(v),this._injector.get(Sb,[]).concat(this._bootstrapListeners).forEach(M=>M(v))}ngOnDestroy(){this._views.slice().forEach(v=>v.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return h.\u0275fac=function(v){return new(v||h)(qo(Iu),qo(ou),qo(bc),qo(up),qo(Pd))},h.\u0275prov=Le({token:h,factory:h.\u0275fac}),h})();function bm(h,d){const v=h.indexOf(d);v>-1&&h.splice(v,1)}let Fb=!0;function MC(){Fb=!1}let AC=(()=>{class h{}return h.__NG_ELEMENT_ID__=OC,h})();function OC(h){return function(h,d,v){if(lr(h)&&!v){const w=Xn(h.index,d);return new dp(w,w)}return 47&h.type?new dp(d[16],d):null}(_t(),Wt(),16==(16&h))}class zb{constructor(){}supports(d){return dt(d)}create(d){return new BC(d)}}const FC=(h,d)=>d;class BC{constructor(d){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=d||FC}forEachItem(d){let v;for(v=this._itHead;null!==v;v=v._next)d(v)}forEachOperation(d){let v=this._itHead,w=this._removalsHead,M=0,P=null;for(;v||w;){const X=!w||v&&v.currentIndex<Yb(w,M,P)?v:w,at=Yb(X,M,P),yt=X.currentIndex;if(X===w)M--,w=w._nextRemoved;else if(v=v._next,null==X.previousIndex)M++;else{P||(P=[]);const Kt=at-M,he=yt-M;if(Kt!=he){for(let si=0;si<Kt;si++){const Ti=si<P.length?P[si]:P[si]=0,$i=Ti+si;he<=$i&&$i<Kt&&(P[si]=Ti+1)}P[X.previousIndex]=he-Kt}}at!==yt&&d(X,at,yt)}}forEachPreviousItem(d){let v;for(v=this._previousItHead;null!==v;v=v._nextPrevious)d(v)}forEachAddedItem(d){let v;for(v=this._additionsHead;null!==v;v=v._nextAdded)d(v)}forEachMovedItem(d){let v;for(v=this._movesHead;null!==v;v=v._nextMoved)d(v)}forEachRemovedItem(d){let v;for(v=this._removalsHead;null!==v;v=v._nextRemoved)d(v)}forEachIdentityChange(d){let v;for(v=this._identityChangesHead;null!==v;v=v._nextIdentityChange)d(v)}diff(d){if(null==d&&(d=[]),!dt(d))throw new Error(`Error trying to diff '${u(d)}'. Only arrays and iterables are allowed`);return this.check(d)?this:null}onDestroy(){}check(d){this._reset();let M,P,X,v=this._itHead,w=!1;if(Array.isArray(d)){this.length=d.length;for(let at=0;at<this.length;at++)P=d[at],X=this._trackByFn(at,P),null!==v&&Object.is(v.trackById,X)?(w&&(v=this._verifyReinsertion(v,P,X,at)),Object.is(v.item,P)||this._addIdentityChange(v,P)):(v=this._mismatch(v,P,X,at),w=!0),v=v._next}else M=0,function(h,d){if(Array.isArray(h))for(let v=0;v<h.length;v++)d(h[v]);else{const v=h[F()]();let w;for(;!(w=v.next()).done;)d(w.value)}}(d,at=>{X=this._trackByFn(M,at),null!==v&&Object.is(v.trackById,X)?(w&&(v=this._verifyReinsertion(v,at,X,M)),Object.is(v.item,at)||this._addIdentityChange(v,at)):(v=this._mismatch(v,at,X,M),w=!0),v=v._next,M++}),this.length=M;return this._truncate(v),this.collection=d,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let d;for(d=this._previousItHead=this._itHead;null!==d;d=d._next)d._nextPrevious=d._next;for(d=this._additionsHead;null!==d;d=d._nextAdded)d.previousIndex=d.currentIndex;for(this._additionsHead=this._additionsTail=null,d=this._movesHead;null!==d;d=d._nextMoved)d.previousIndex=d.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(d,v,w,M){let P;return null===d?P=this._itTail:(P=d._prev,this._remove(d)),null!==(d=null===this._unlinkedRecords?null:this._unlinkedRecords.get(w,null))?(Object.is(d.item,v)||this._addIdentityChange(d,v),this._reinsertAfter(d,P,M)):null!==(d=null===this._linkedRecords?null:this._linkedRecords.get(w,M))?(Object.is(d.item,v)||this._addIdentityChange(d,v),this._moveAfter(d,P,M)):d=this._addAfter(new HC(v,w),P,M),d}_verifyReinsertion(d,v,w,M){let P=null===this._unlinkedRecords?null:this._unlinkedRecords.get(w,null);return null!==P?d=this._reinsertAfter(P,d._prev,M):d.currentIndex!=M&&(d.currentIndex=M,this._addToMoves(d,M)),d}_truncate(d){for(;null!==d;){const v=d._next;this._addToRemovals(this._unlink(d)),d=v}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(d,v,w){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(d);const M=d._prevRemoved,P=d._nextRemoved;return null===M?this._removalsHead=P:M._nextRemoved=P,null===P?this._removalsTail=M:P._prevRemoved=M,this._insertAfter(d,v,w),this._addToMoves(d,w),d}_moveAfter(d,v,w){return this._unlink(d),this._insertAfter(d,v,w),this._addToMoves(d,w),d}_addAfter(d,v,w){return this._insertAfter(d,v,w),this._additionsTail=null===this._additionsTail?this._additionsHead=d:this._additionsTail._nextAdded=d,d}_insertAfter(d,v,w){const M=null===v?this._itHead:v._next;return d._next=M,d._prev=v,null===M?this._itTail=d:M._prev=d,null===v?this._itHead=d:v._next=d,null===this._linkedRecords&&(this._linkedRecords=new jb),this._linkedRecords.put(d),d.currentIndex=w,d}_remove(d){return this._addToRemovals(this._unlink(d))}_unlink(d){null!==this._linkedRecords&&this._linkedRecords.remove(d);const v=d._prev,w=d._next;return null===v?this._itHead=w:v._next=w,null===w?this._itTail=v:w._prev=v,d}_addToMoves(d,v){return d.previousIndex===v||(this._movesTail=null===this._movesTail?this._movesHead=d:this._movesTail._nextMoved=d),d}_addToRemovals(d){return null===this._unlinkedRecords&&(this._unlinkedRecords=new jb),this._unlinkedRecords.put(d),d.currentIndex=null,d._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=d,d._prevRemoved=null):(d._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=d),d}_addIdentityChange(d,v){return d.item=v,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=d:this._identityChangesTail._nextIdentityChange=d,d}}class HC{constructor(d,v){this.item=d,this.trackById=v,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class UC{constructor(){this._head=null,this._tail=null}add(d){null===this._head?(this._head=this._tail=d,d._nextDup=null,d._prevDup=null):(this._tail._nextDup=d,d._prevDup=this._tail,d._nextDup=null,this._tail=d)}get(d,v){let w;for(w=this._head;null!==w;w=w._nextDup)if((null===v||v<=w.currentIndex)&&Object.is(w.trackById,d))return w;return null}remove(d){const v=d._prevDup,w=d._nextDup;return null===v?this._head=w:v._nextDup=w,null===w?this._tail=v:w._prevDup=v,null===this._head}}class jb{constructor(){this.map=new Map}put(d){const v=d.trackById;let w=this.map.get(v);w||(w=new UC,this.map.set(v,w)),w.add(d)}get(d,v){const M=this.map.get(d);return M?M.get(d,v):null}remove(d){const v=d.trackById;return this.map.get(v).remove(d)&&this.map.delete(v),d}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Yb(h,d,v){const w=h.previousIndex;if(null===w)return w;let M=0;return v&&w<v.length&&(M=v[w]),w+d+M}class Xb{constructor(){}supports(d){return d instanceof Map||Ee(d)}create(){return new VC}}class VC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(d){let v;for(v=this._mapHead;null!==v;v=v._next)d(v)}forEachPreviousItem(d){let v;for(v=this._previousMapHead;null!==v;v=v._nextPrevious)d(v)}forEachChangedItem(d){let v;for(v=this._changesHead;null!==v;v=v._nextChanged)d(v)}forEachAddedItem(d){let v;for(v=this._additionsHead;null!==v;v=v._nextAdded)d(v)}forEachRemovedItem(d){let v;for(v=this._removalsHead;null!==v;v=v._nextRemoved)d(v)}diff(d){if(d){if(!(d instanceof Map||Ee(d)))throw new Error(`Error trying to diff '${u(d)}'. Only maps and objects are allowed`)}else d=new Map;return this.check(d)?this:null}onDestroy(){}check(d){this._reset();let v=this._mapHead;if(this._appendAfter=null,this._forEach(d,(w,M)=>{if(v&&v.key===M)this._maybeAddToChanges(v,w),this._appendAfter=v,v=v._next;else{const P=this._getOrCreateRecordForKey(M,w);v=this._insertBeforeOrAppend(v,P)}}),v){v._prev&&(v._prev._next=null),this._removalsHead=v;for(let w=v;null!==w;w=w._nextRemoved)w===this._mapHead&&(this._mapHead=null),this._records.delete(w.key),w._nextRemoved=w._next,w.previousValue=w.currentValue,w.currentValue=null,w._prev=null,w._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(d,v){if(d){const w=d._prev;return v._next=d,v._prev=w,d._prev=v,w&&(w._next=v),d===this._mapHead&&(this._mapHead=v),this._appendAfter=d,d}return this._appendAfter?(this._appendAfter._next=v,v._prev=this._appendAfter):this._mapHead=v,this._appendAfter=v,null}_getOrCreateRecordForKey(d,v){if(this._records.has(d)){const M=this._records.get(d);this._maybeAddToChanges(M,v);const P=M._prev,X=M._next;return P&&(P._next=X),X&&(X._prev=P),M._next=null,M._prev=null,M}const w=new GC(d);return this._records.set(d,w),w.currentValue=v,this._addToAdditions(w),w}_reset(){if(this.isDirty){let d;for(this._previousMapHead=this._mapHead,d=this._previousMapHead;null!==d;d=d._next)d._nextPrevious=d._next;for(d=this._changesHead;null!==d;d=d._nextChanged)d.previousValue=d.currentValue;for(d=this._additionsHead;null!=d;d=d._nextAdded)d.previousValue=d.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(d,v){Object.is(v,d.currentValue)||(d.previousValue=d.currentValue,d.currentValue=v,this._addToChanges(d))}_addToAdditions(d){null===this._additionsHead?this._additionsHead=this._additionsTail=d:(this._additionsTail._nextAdded=d,this._additionsTail=d)}_addToChanges(d){null===this._changesHead?this._changesHead=this._changesTail=d:(this._changesTail._nextChanged=d,this._changesTail=d)}_forEach(d,v){d instanceof Map?d.forEach(v):Object.keys(d).forEach(w=>v(d[w],w))}}class GC{constructor(d){this.key=d,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Kb(){return new Sf([new zb])}let Sf=(()=>{class h{constructor(v){this.factories=v}static create(v,w){if(null!=w){const M=w.factories.slice();v=v.concat(M)}return new h(v)}static extend(v){return{provide:h,useFactory:w=>h.create(v,w||Kb()),deps:[[h,new pa,new $l]]}}find(v){const w=this.factories.find(M=>M.supports(v));if(null!=w)return w;throw new Error(`Cannot find a differ supporting object '${v}' of type '${function(h){return h.name||typeof h}(v)}'`)}}return h.\u0275prov=Le({token:h,providedIn:"root",factory:Kb}),h})();function Jb(){return new wf([new Xb])}let wf=(()=>{class h{constructor(v){this.factories=v}static create(v,w){if(w){const M=w.factories.slice();v=v.concat(M)}return new h(v)}static extend(v){return{provide:h,useFactory:w=>h.create(v,w||Jb()),deps:[[h,new pa,new $l]]}}find(v){const w=this.factories.find(M=>M.supports(v));if(w)return w;throw new Error(`Cannot find a differ supporting object '${v}'`)}}return h.\u0275prov=Le({token:h,providedIn:"root",factory:Jb}),h})();const zC=[new Xb],YC=new Sf([new zb]),XC=new wf(zC),KC=xb(null,"core",[{provide:Cb,useValue:"unknown"},{provide:Lb,deps:[ou]},{provide:Ab,deps:[]},{provide:wb,deps:[]}]),qC=[{provide:_p,useClass:_p,deps:[Iu,ou,bc,up,Pd]},{provide:pT,deps:[Iu],useFactory:function(h){let d=[];return h.onStable.subscribe(()=>{for(;d.length;)d.pop()()}),function(v){d.push(v)}}},{provide:Pd,useClass:Pd,deps:[[new $l,dm]]},{provide:fm,useClass:fm,deps:[]},cC,{provide:Sf,useFactory:function(){return YC},deps:[]},{provide:wf,useFactory:function(){return XC},deps:[]},{provide:Tf,useFactory:function(h){return h||"undefined"!=typeof $localize&&$localize.locale||uf},deps:[[new Nl(Tf),new $l,new pa]]},{provide:Rb,useValue:"USD"}];let eS=(()=>{class h{constructor(v){}}return h.\u0275fac=function(v){return new(v||h)(qo(_p))},h.\u0275mod=ir({type:h}),h.\u0275inj=Gt({providers:qC}),h})()},93075:(U,$,m)=>{"use strict";m.d($,{Zs:()=>Lo,Fj:()=>et,NI:()=>kr,oH:()=>oa,sg:()=>ts,u5:()=>Cl,Cf:()=>pt,JU:()=>u,a5:()=>St,JJ:()=>te,JL:()=>ne,F:()=>Fn,On:()=>ae,UX:()=>Nr,kI:()=>Jt,_Y:()=>Ue});var T=m(5e3),_=m(69808),e=m(32076),t=m(4128),n=m(54004);let r=(()=>{class Q{constructor(W,At){this._renderer=W,this._elementRef=At,this.onChange=Be=>{},this.onTouched=()=>{}}setProperty(W,At){this._renderer.setProperty(this._elementRef.nativeElement,W,At)}registerOnTouched(W){this.onTouched=W}registerOnChange(W){this.onChange=W}setDisabledState(W){this.setProperty("disabled",W)}}return Q.\u0275fac=function(W){return new(W||Q)(T.Y36(T.Qsj),T.Y36(T.SBq))},Q.\u0275dir=T.lG2({type:Q}),Q})(),s=(()=>{class Q extends r{}return Q.\u0275fac=function(){let V;return function(At){return(V||(V=T.n5z(Q)))(At||Q)}}(),Q.\u0275dir=T.lG2({type:Q,features:[T.qOj]}),Q})();const u=new T.OlP("NgValueAccessor"),B={provide:u,useExisting:(0,T.Gpc)(()=>et),multi:!0},ot=new T.OlP("CompositionEventMode");let et=(()=>{class Q extends r{constructor(W,At,Be){super(W,At),this._compositionMode=Be,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const Q=(0,_.q)()?(0,_.q)().getUserAgent():"";return/android (\d+)/.test(Q.toLowerCase())}())}writeValue(W){this.setProperty("value",null==W?"":W)}_handleInput(W){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(W)}_compositionStart(){this._composing=!0}_compositionEnd(W){this._composing=!1,this._compositionMode&&this.onChange(W)}}return Q.\u0275fac=function(W){return new(W||Q)(T.Y36(T.Qsj),T.Y36(T.SBq),T.Y36(ot,8))},Q.\u0275dir=T.lG2({type:Q,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(W,At){1&W&&T.NdJ("input",function(vi){return At._handleInput(vi.target.value)})("blur",function(){return At.onTouched()})("compositionstart",function(){return At._compositionStart()})("compositionend",function(vi){return At._compositionEnd(vi.target.value)})},features:[T._Bn([B]),T.qOj]}),Q})();function Tt(Q){return null==Q||0===Q.length}function Pt(Q){return null!=Q&&"number"==typeof Q.length}const pt=new T.OlP("NgValidators"),It=new T.OlP("NgAsyncValidators"),Ht=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Jt{static min(V){return Q=V,V=>{if(Tt(V.value)||Tt(Q))return null;const W=parseFloat(V.value);return!isNaN(W)&&W<Q?{min:{min:Q,actual:V.value}}:null};var Q}static max(V){return Q=V,V=>{if(Tt(V.value)||Tt(Q))return null;const W=parseFloat(V.value);return!isNaN(W)&&W>Q?{max:{max:Q,actual:V.value}}:null};var Q}static required(V){return st(V)}static requiredTrue(V){return gt(V)}static email(V){return Tt((Q=V).value)||Ht.test(Q.value)?null:{email:!0};var Q}static minLength(V){return Q=V,V=>Tt(V.value)||!Pt(V.value)?null:V.value.length<Q?{minlength:{requiredLength:Q,actualLength:V.value.length}}:null;var Q}static maxLength(V){return Q=V,V=>Pt(V.value)&&V.value.length>Q?{maxlength:{requiredLength:Q,actualLength:V.value.length}}:null;var Q}static pattern(V){return function(Q){if(!Q)return ut;let V,W;return"string"==typeof Q?(W="","^"!==Q.charAt(0)&&(W+="^"),W+=Q,"$"!==Q.charAt(Q.length-1)&&(W+="$"),V=new RegExp(W)):(W=Q.toString(),V=Q),At=>{if(Tt(At.value))return null;const Be=At.value;return V.test(Be)?null:{pattern:{requiredPattern:W,actualValue:Be}}}}(V)}static nullValidator(V){return null}static compose(V){return pe(V)}static composeAsync(V){return ke(V)}}function st(Q){return Tt(Q.value)?{required:!0}:null}function gt(Q){return!0===Q.value?null:{required:!0}}function ut(Q){return null}function rt(Q){return null!=Q}function fe(Q){const V=(0,T.QGY)(Q)?(0,e.D)(Q):Q;return(0,T.CqO)(V),V}function Mt(Q){let V={};return Q.forEach(W=>{V=null!=W?Object.assign(Object.assign({},V),W):V}),0===Object.keys(V).length?null:V}function Nt(Q,V){return V.map(W=>W(Q))}function ve(Q){return Q.map(V=>function(Q){return!Q.validate}(V)?V:W=>V.validate(W))}function pe(Q){if(!Q)return null;const V=Q.filter(rt);return 0==V.length?null:function(W){return Mt(Nt(W,V))}}function He(Q){return null!=Q?pe(ve(Q)):null}function ke(Q){if(!Q)return null;const V=Q.filter(rt);return 0==V.length?null:function(W){const At=Nt(W,V).map(fe);return(0,t.D)(At).pipe((0,n.U)(Mt))}}function Ze(Q){return null!=Q?ke(ve(Q)):null}function Di(Q,V){return null===Q?[V]:Array.isArray(Q)?[...Q,V]:[Q,V]}function $e(Q){return Q._rawValidators}function Le(Q){return Q._rawAsyncValidators}function pi(Q){return Q?Array.isArray(Q)?Q:[Q]:[]}function Gt(Q,V){return Array.isArray(Q)?Q.includes(V):Q===V}function Se(Q,V){const W=pi(V);return pi(Q).forEach(Be=>{Gt(W,Be)||W.push(Be)}),W}function Zt(Q,V){return pi(V).filter(W=>!Gt(Q,W))}class ie{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(V){this._rawValidators=V||[],this._composedValidatorFn=He(this._rawValidators)}_setAsyncValidators(V){this._rawAsyncValidators=V||[],this._composedAsyncValidatorFn=Ze(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(V){this._onDestroyCallbacks.push(V)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(V=>V()),this._onDestroyCallbacks=[]}reset(V){this.control&&this.control.reset(V)}hasError(V,W){return!!this.control&&this.control.hasError(V,W)}getError(V,W){return this.control?this.control.getError(V,W):null}}class St extends ie{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class jt extends ie{get formDirective(){return null}get path(){return null}}class Ce{constructor(V){this._cd=V}is(V){var W,At,Be;return"submitted"===V?!!(null===(W=this._cd)||void 0===W?void 0:W.submitted):!!(null===(Be=null===(At=this._cd)||void 0===At?void 0:At.control)||void 0===Be?void 0:Be[V])}}let te=(()=>{class Q extends Ce{constructor(W){super(W)}}return Q.\u0275fac=function(W){return new(W||Q)(T.Y36(St,2))},Q.\u0275dir=T.lG2({type:Q,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(W,At){2&W&&T.ekj("ng-untouched",At.is("untouched"))("ng-touched",At.is("touched"))("ng-pristine",At.is("pristine"))("ng-dirty",At.is("dirty"))("ng-valid",At.is("valid"))("ng-invalid",At.is("invalid"))("ng-pending",At.is("pending"))},features:[T.qOj]}),Q})(),ne=(()=>{class Q extends Ce{constructor(W){super(W)}}return Q.\u0275fac=function(W){return new(W||Q)(T.Y36(jt,10))},Q.\u0275dir=T.lG2({type:Q,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(W,At){2&W&&T.ekj("ng-untouched",At.is("untouched"))("ng-touched",At.is("touched"))("ng-pristine",At.is("pristine"))("ng-dirty",At.is("dirty"))("ng-valid",At.is("valid"))("ng-invalid",At.is("invalid"))("ng-pending",At.is("pending"))("ng-submitted",At.is("submitted"))},features:[T.qOj]}),Q})();function Zi(Q,V){je(Q,V),V.valueAccessor.writeValue(Q.value),function(Q,V){V.valueAccessor.registerOnChange(W=>{Q._pendingValue=W,Q._pendingChange=!0,Q._pendingDirty=!0,"change"===Q.updateOn&&Je(Q,V)})}(Q,V),function(Q,V){const W=(At,Be)=>{V.valueAccessor.writeValue(At),Be&&V.viewToModelUpdate(At)};Q.registerOnChange(W),V._registerOnDestroy(()=>{Q._unregisterOnChange(W)})}(Q,V),function(Q,V){V.valueAccessor.registerOnTouched(()=>{Q._pendingTouched=!0,"blur"===Q.updateOn&&Q._pendingChange&&Je(Q,V),"submit"!==Q.updateOn&&Q.markAsTouched()})}(Q,V),function(Q,V){if(V.valueAccessor.setDisabledState){const W=At=>{V.valueAccessor.setDisabledState(At)};Q.registerOnDisabledChange(W),V._registerOnDestroy(()=>{Q._unregisterOnDisabledChange(W)})}}(Q,V)}function Re(Q,V,W=!0){const At=()=>{};V.valueAccessor&&(V.valueAccessor.registerOnChange(At),V.valueAccessor.registerOnTouched(At)),Ii(Q,V),Q&&(V._invokeOnDestroyCallbacks(),Q._registerOnCollectionChange(()=>{}))}function xe(Q,V){Q.forEach(W=>{W.registerOnValidatorChange&&W.registerOnValidatorChange(V)})}function je(Q,V){const W=$e(Q);null!==V.validator?Q.setValidators(Di(W,V.validator)):"function"==typeof W&&Q.setValidators([W]);const At=Le(Q);null!==V.asyncValidator?Q.setAsyncValidators(Di(At,V.asyncValidator)):"function"==typeof At&&Q.setAsyncValidators([At]);const Be=()=>Q.updateValueAndValidity();xe(V._rawValidators,Be),xe(V._rawAsyncValidators,Be)}function Ii(Q,V){let W=!1;if(null!==Q){if(null!==V.validator){const Be=$e(Q);if(Array.isArray(Be)&&Be.length>0){const vi=Be.filter(ln=>ln!==V.validator);vi.length!==Be.length&&(W=!0,Q.setValidators(vi))}}if(null!==V.asyncValidator){const Be=Le(Q);if(Array.isArray(Be)&&Be.length>0){const vi=Be.filter(ln=>ln!==V.asyncValidator);vi.length!==Be.length&&(W=!0,Q.setAsyncValidators(vi))}}}const At=()=>{};return xe(V._rawValidators,At),xe(V._rawAsyncValidators,At),W}function Je(Q,V){Q._pendingDirty&&Q.markAsDirty(),Q.setValue(Q._pendingValue,{emitModelToViewChange:!1}),V.viewToModelUpdate(Q._pendingValue),Q._pendingChange=!1}function kt(Q,V){je(Q,V)}function Ne(Q,V){if(!Q.hasOwnProperty("model"))return!1;const W=Q.model;return!!W.isFirstChange()||!Object.is(V,W.currentValue)}function qi(Q,V){Q._syncPendingControls(),V.forEach(W=>{const At=W.control;"submit"===At.updateOn&&At._pendingChange&&(W.viewToModelUpdate(At._pendingValue),At._pendingChange=!1)})}function Sn(Q,V){if(!V)return null;let W,At,Be;return Array.isArray(V),V.forEach(vi=>{vi.constructor===et?W=vi:function(Q){return Object.getPrototypeOf(Q.constructor)===s}(vi)?At=vi:Be=vi}),Be||At||W||null}function ir(Q,V){const W=Q.indexOf(V);W>-1&&Q.splice(W,1)}const Ke="VALID",Pe="INVALID",hi="PENDING",xi="DISABLED";function In(Q){return(no(Q)?Q.validators:Q)||null}function or(Q){return Array.isArray(Q)?He(Q):Q||null}function Cr(Q,V){return(no(V)?V.asyncValidators:Q)||null}function to(Q){return Array.isArray(Q)?Ze(Q):Q||null}function no(Q){return null!=Q&&!Array.isArray(Q)&&"object"==typeof Q}class fo{constructor(V,W){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=V,this._rawAsyncValidators=W,this._composedValidatorFn=or(this._rawValidators),this._composedAsyncValidatorFn=to(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(V){this._rawValidators=this._composedValidatorFn=V}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(V){this._rawAsyncValidators=this._composedAsyncValidatorFn=V}get parent(){return this._parent}get valid(){return this.status===Ke}get invalid(){return this.status===Pe}get pending(){return this.status==hi}get disabled(){return this.status===xi}get enabled(){return this.status!==xi}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(V){this._rawValidators=V,this._composedValidatorFn=or(V)}setAsyncValidators(V){this._rawAsyncValidators=V,this._composedAsyncValidatorFn=to(V)}addValidators(V){this.setValidators(Se(V,this._rawValidators))}addAsyncValidators(V){this.setAsyncValidators(Se(V,this._rawAsyncValidators))}removeValidators(V){this.setValidators(Zt(V,this._rawValidators))}removeAsyncValidators(V){this.setAsyncValidators(Zt(V,this._rawAsyncValidators))}hasValidator(V){return Gt(this._rawValidators,V)}hasAsyncValidator(V){return Gt(this._rawAsyncValidators,V)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(V={}){this.touched=!0,this._parent&&!V.onlySelf&&this._parent.markAsTouched(V)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(V=>V.markAllAsTouched())}markAsUntouched(V={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(W=>{W.markAsUntouched({onlySelf:!0})}),this._parent&&!V.onlySelf&&this._parent._updateTouched(V)}markAsDirty(V={}){this.pristine=!1,this._parent&&!V.onlySelf&&this._parent.markAsDirty(V)}markAsPristine(V={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(W=>{W.markAsPristine({onlySelf:!0})}),this._parent&&!V.onlySelf&&this._parent._updatePristine(V)}markAsPending(V={}){this.status=hi,!1!==V.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!V.onlySelf&&this._parent.markAsPending(V)}disable(V={}){const W=this._parentMarkedDirty(V.onlySelf);this.status=xi,this.errors=null,this._forEachChild(At=>{At.disable(Object.assign(Object.assign({},V),{onlySelf:!0}))}),this._updateValue(),!1!==V.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},V),{skipPristineCheck:W})),this._onDisabledChange.forEach(At=>At(!0))}enable(V={}){const W=this._parentMarkedDirty(V.onlySelf);this.status=Ke,this._forEachChild(At=>{At.enable(Object.assign(Object.assign({},V),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:V.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},V),{skipPristineCheck:W})),this._onDisabledChange.forEach(At=>At(!1))}_updateAncestors(V){this._parent&&!V.onlySelf&&(this._parent.updateValueAndValidity(V),V.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(V){this._parent=V}updateValueAndValidity(V={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ke||this.status===hi)&&this._runAsyncValidator(V.emitEvent)),!1!==V.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!V.onlySelf&&this._parent.updateValueAndValidity(V)}_updateTreeValidity(V={emitEvent:!0}){this._forEachChild(W=>W._updateTreeValidity(V)),this.updateValueAndValidity({onlySelf:!0,emitEvent:V.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?xi:Ke}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(V){if(this.asyncValidator){this.status=hi,this._hasOwnPendingAsyncValidator=!0;const W=fe(this.asyncValidator(this));this._asyncValidationSubscription=W.subscribe(At=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(At,{emitEvent:V})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(V,W={}){this.errors=V,this._updateControlsErrors(!1!==W.emitEvent)}get(V){return function(Q,V,W){if(null==V||(Array.isArray(V)||(V=V.split(".")),Array.isArray(V)&&0===V.length))return null;let At=Q;return V.forEach(Be=>{At=At instanceof ar?At.controls.hasOwnProperty(Be)?At.controls[Be]:null:At instanceof Oo&&At.at(Be)||null}),At}(this,V)}getError(V,W){const At=W?this.get(W):this;return At&&At.errors?At.errors[V]:null}hasError(V,W){return!!this.getError(V,W)}get root(){let V=this;for(;V._parent;)V=V._parent;return V}_updateControlsErrors(V){this.status=this._calculateStatus(),V&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(V)}_initObservables(){this.valueChanges=new T.vpe,this.statusChanges=new T.vpe}_calculateStatus(){return this._allControlsDisabled()?xi:this.errors?Pe:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(hi)?hi:this._anyControlsHaveStatus(Pe)?Pe:Ke}_anyControlsHaveStatus(V){return this._anyControls(W=>W.status===V)}_anyControlsDirty(){return this._anyControls(V=>V.dirty)}_anyControlsTouched(){return this._anyControls(V=>V.touched)}_updatePristine(V={}){this.pristine=!this._anyControlsDirty(),this._parent&&!V.onlySelf&&this._parent._updatePristine(V)}_updateTouched(V={}){this.touched=this._anyControlsTouched(),this._parent&&!V.onlySelf&&this._parent._updateTouched(V)}_isBoxedValue(V){return"object"==typeof V&&null!==V&&2===Object.keys(V).length&&"value"in V&&"disabled"in V}_registerOnCollectionChange(V){this._onCollectionChange=V}_setUpdateStrategy(V){no(V)&&null!=V.updateOn&&(this._updateOn=V.updateOn)}_parentMarkedDirty(V){return!V&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class kr extends fo{constructor(V=null,W,At){super(In(W),Cr(At,W)),this._onChange=[],this._pendingChange=!1,this._applyFormState(V),this._setUpdateStrategy(W),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(V,W={}){this.value=this._pendingValue=V,this._onChange.length&&!1!==W.emitModelToViewChange&&this._onChange.forEach(At=>At(this.value,!1!==W.emitViewToModelChange)),this.updateValueAndValidity(W)}patchValue(V,W={}){this.setValue(V,W)}reset(V=null,W={}){this._applyFormState(V),this.markAsPristine(W),this.markAsUntouched(W),this.setValue(this.value,W),this._pendingChange=!1}_updateValue(){}_anyControls(V){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(V){this._onChange.push(V)}_unregisterOnChange(V){ir(this._onChange,V)}registerOnDisabledChange(V){this._onDisabledChange.push(V)}_unregisterOnDisabledChange(V){ir(this._onDisabledChange,V)}_forEachChild(V){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(V){this._isBoxedValue(V)?(this.value=this._pendingValue=V.value,V.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=V}}class ar extends fo{constructor(V,W,At){super(In(W),Cr(At,W)),this.controls=V,this._initObservables(),this._setUpdateStrategy(W),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(V,W){return this.controls[V]?this.controls[V]:(this.controls[V]=W,W.setParent(this),W._registerOnCollectionChange(this._onCollectionChange),W)}addControl(V,W,At={}){this.registerControl(V,W),this.updateValueAndValidity({emitEvent:At.emitEvent}),this._onCollectionChange()}removeControl(V,W={}){this.controls[V]&&this.controls[V]._registerOnCollectionChange(()=>{}),delete this.controls[V],this.updateValueAndValidity({emitEvent:W.emitEvent}),this._onCollectionChange()}setControl(V,W,At={}){this.controls[V]&&this.controls[V]._registerOnCollectionChange(()=>{}),delete this.controls[V],W&&this.registerControl(V,W),this.updateValueAndValidity({emitEvent:At.emitEvent}),this._onCollectionChange()}contains(V){return this.controls.hasOwnProperty(V)&&this.controls[V].enabled}setValue(V,W={}){this._checkAllValuesPresent(V),Object.keys(V).forEach(At=>{this._throwIfControlMissing(At),this.controls[At].setValue(V[At],{onlySelf:!0,emitEvent:W.emitEvent})}),this.updateValueAndValidity(W)}patchValue(V,W={}){null!=V&&(Object.keys(V).forEach(At=>{this.controls[At]&&this.controls[At].patchValue(V[At],{onlySelf:!0,emitEvent:W.emitEvent})}),this.updateValueAndValidity(W))}reset(V={},W={}){this._forEachChild((At,Be)=>{At.reset(V[Be],{onlySelf:!0,emitEvent:W.emitEvent})}),this._updatePristine(W),this._updateTouched(W),this.updateValueAndValidity(W)}getRawValue(){return this._reduceChildren({},(V,W,At)=>(V[At]=W instanceof kr?W.value:W.getRawValue(),V))}_syncPendingControls(){let V=this._reduceChildren(!1,(W,At)=>!!At._syncPendingControls()||W);return V&&this.updateValueAndValidity({onlySelf:!0}),V}_throwIfControlMissing(V){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[V])throw new Error(`Cannot find form control with name: ${V}.`)}_forEachChild(V){Object.keys(this.controls).forEach(W=>{const At=this.controls[W];At&&V(At,W)})}_setUpControls(){this._forEachChild(V=>{V.setParent(this),V._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(V){for(const W of Object.keys(this.controls)){const At=this.controls[W];if(this.contains(W)&&V(At))return!0}return!1}_reduceValue(){return this._reduceChildren({},(V,W,At)=>((W.enabled||this.disabled)&&(V[At]=W.value),V))}_reduceChildren(V,W){let At=V;return this._forEachChild((Be,vi)=>{At=W(At,Be,vi)}),At}_allControlsDisabled(){for(const V of Object.keys(this.controls))if(this.controls[V].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(V){this._forEachChild((W,At)=>{if(void 0===V[At])throw new Error(`Must supply a value for form control with name: '${At}'.`)})}}class Oo extends fo{constructor(V,W,At){super(In(W),Cr(At,W)),this.controls=V,this._initObservables(),this._setUpdateStrategy(W),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(V){return this.controls[V]}push(V,W={}){this.controls.push(V),this._registerControl(V),this.updateValueAndValidity({emitEvent:W.emitEvent}),this._onCollectionChange()}insert(V,W,At={}){this.controls.splice(V,0,W),this._registerControl(W),this.updateValueAndValidity({emitEvent:At.emitEvent})}removeAt(V,W={}){this.controls[V]&&this.controls[V]._registerOnCollectionChange(()=>{}),this.controls.splice(V,1),this.updateValueAndValidity({emitEvent:W.emitEvent})}setControl(V,W,At={}){this.controls[V]&&this.controls[V]._registerOnCollectionChange(()=>{}),this.controls.splice(V,1),W&&(this.controls.splice(V,0,W),this._registerControl(W)),this.updateValueAndValidity({emitEvent:At.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(V,W={}){this._checkAllValuesPresent(V),V.forEach((At,Be)=>{this._throwIfControlMissing(Be),this.at(Be).setValue(At,{onlySelf:!0,emitEvent:W.emitEvent})}),this.updateValueAndValidity(W)}patchValue(V,W={}){null!=V&&(V.forEach((At,Be)=>{this.at(Be)&&this.at(Be).patchValue(At,{onlySelf:!0,emitEvent:W.emitEvent})}),this.updateValueAndValidity(W))}reset(V=[],W={}){this._forEachChild((At,Be)=>{At.reset(V[Be],{onlySelf:!0,emitEvent:W.emitEvent})}),this._updatePristine(W),this._updateTouched(W),this.updateValueAndValidity(W)}getRawValue(){return this.controls.map(V=>V instanceof kr?V.value:V.getRawValue())}clear(V={}){this.controls.length<1||(this._forEachChild(W=>W._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:V.emitEvent}))}_syncPendingControls(){let V=this.controls.reduce((W,At)=>!!At._syncPendingControls()||W,!1);return V&&this.updateValueAndValidity({onlySelf:!0}),V}_throwIfControlMissing(V){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(V))throw new Error(`Cannot find form control at index ${V}`)}_forEachChild(V){this.controls.forEach((W,At)=>{V(W,At)})}_updateValue(){this.value=this.controls.filter(V=>V.enabled||this.disabled).map(V=>V.value)}_anyControls(V){return this.controls.some(W=>W.enabled&&V(W))}_setUpControls(){this._forEachChild(V=>this._registerControl(V))}_checkAllValuesPresent(V){this._forEachChild((W,At)=>{if(void 0===V[At])throw new Error(`Must supply a value for form control at index: ${At}.`)})}_allControlsDisabled(){for(const V of this.controls)if(V.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(V){V.setParent(this),V._registerOnCollectionChange(this._onCollectionChange)}}const nr={provide:jt,useExisting:(0,T.Gpc)(()=>Fn)},Mi=(()=>Promise.resolve(null))();let Fn=(()=>{class Q extends jt{constructor(W,At){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new T.vpe,this.form=new ar({},He(W),Ze(At))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(W){Mi.then(()=>{const At=this._findContainer(W.path);W.control=At.registerControl(W.name,W.control),Zi(W.control,W),W.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(W)})}getControl(W){return this.form.get(W.path)}removeControl(W){Mi.then(()=>{const At=this._findContainer(W.path);At&&At.removeControl(W.name),ir(this._directives,W)})}addFormGroup(W){Mi.then(()=>{const At=this._findContainer(W.path),Be=new ar({});kt(Be,W),At.registerControl(W.name,Be),Be.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(W){Mi.then(()=>{const At=this._findContainer(W.path);At&&At.removeControl(W.name)})}getFormGroup(W){return this.form.get(W.path)}updateModel(W,At){Mi.then(()=>{this.form.get(W.path).setValue(At)})}setValue(W){this.control.setValue(W)}onSubmit(W){return this.submitted=!0,qi(this.form,this._directives),this.ngSubmit.emit(W),!1}onReset(){this.resetForm()}resetForm(W){this.form.reset(W),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(W){return W.pop(),W.length?this.form.get(W):this.form}}return Q.\u0275fac=function(W){return new(W||Q)(T.Y36(pt,10),T.Y36(It,10))},Q.\u0275dir=T.lG2({type:Q,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(W,At){1&W&&T.NdJ("submit",function(vi){return At.onSubmit(vi)})("reset",function(){return At.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[T._Bn([nr]),T.qOj]}),Q})();const On={provide:St,useExisting:(0,T.Gpc)(()=>ae)},Gn=(()=>Promise.resolve(null))();let ae=(()=>{class Q extends St{constructor(W,At,Be,vi){super(),this.control=new kr,this._registered=!1,this.update=new T.vpe,this._parent=W,this._setValidators(At),this._setAsyncValidators(Be),this.valueAccessor=Sn(0,vi)}ngOnChanges(W){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in W&&this._updateDisabled(W),Ne(W,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(Q,V){return[...V.path,Q]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(W){this.viewModel=W,this.update.emit(W)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Zi(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(W){Gn.then(()=>{this.control.setValue(W,{emitViewToModelChange:!1})})}_updateDisabled(W){const At=W.isDisabled.currentValue,Be=""===At||At&&"false"!==At;Gn.then(()=>{Be&&!this.control.disabled?this.control.disable():!Be&&this.control.disabled&&this.control.enable()})}}return Q.\u0275fac=function(W){return new(W||Q)(T.Y36(jt,9),T.Y36(pt,10),T.Y36(It,10),T.Y36(u,10))},Q.\u0275dir=T.lG2({type:Q,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[T._Bn([On]),T.qOj,T.TTD]}),Q})(),Ue=(()=>{class Q{}return Q.\u0275fac=function(W){return new(W||Q)},Q.\u0275dir=T.lG2({type:Q,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),Q})(),zn=(()=>{class Q{}return Q.\u0275fac=function(W){return new(W||Q)},Q.\u0275mod=T.oAB({type:Q}),Q.\u0275inj=T.cJS({}),Q})();const so=new T.OlP("NgModelWithFormControlWarning"),go={provide:St,useExisting:(0,T.Gpc)(()=>oa)};let oa=(()=>{class Q extends St{constructor(W,At,Be,vi){super(),this._ngModelWarningConfig=vi,this.update=new T.vpe,this._ngModelWarningSent=!1,this._setValidators(W),this._setAsyncValidators(At),this.valueAccessor=Sn(0,Be)}set isDisabled(W){}ngOnChanges(W){if(this._isControlChanged(W)){const At=W.form.previousValue;At&&Re(At,this,!1),Zi(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})}Ne(W,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&Re(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(W){this.viewModel=W,this.update.emit(W)}_isControlChanged(W){return W.hasOwnProperty("form")}}return Q._ngModelWarningSentOnce=!1,Q.\u0275fac=function(W){return new(W||Q)(T.Y36(pt,10),T.Y36(It,10),T.Y36(u,10),T.Y36(so,8))},Q.\u0275dir=T.lG2({type:Q,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[T._Bn([go]),T.qOj,T.TTD]}),Q})();const lr={provide:jt,useExisting:(0,T.Gpc)(()=>ts)};let ts=(()=>{class Q extends jt{constructor(W,At){super(),this.validators=W,this.asyncValidators=At,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new T.vpe,this._setValidators(W),this._setAsyncValidators(At)}ngOnChanges(W){this._checkFormPresent(),W.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Ii(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(W){const At=this.form.get(W.path);return Zi(At,W),At.updateValueAndValidity({emitEvent:!1}),this.directives.push(W),At}getControl(W){return this.form.get(W.path)}removeControl(W){Re(W.control||null,W,!1),ir(this.directives,W)}addFormGroup(W){this._setUpFormContainer(W)}removeFormGroup(W){this._cleanUpFormContainer(W)}getFormGroup(W){return this.form.get(W.path)}addFormArray(W){this._setUpFormContainer(W)}removeFormArray(W){this._cleanUpFormContainer(W)}getFormArray(W){return this.form.get(W.path)}updateModel(W,At){this.form.get(W.path).setValue(At)}onSubmit(W){return this.submitted=!0,qi(this.form,this.directives),this.ngSubmit.emit(W),!1}onReset(){this.resetForm()}resetForm(W){this.form.reset(W),this.submitted=!1}_updateDomValue(){this.directives.forEach(W=>{const At=W.control,Be=this.form.get(W.path);At!==Be&&(Re(At||null,W),Be instanceof kr&&(Zi(Be,W),W.control=Be))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(W){const At=this.form.get(W.path);kt(At,W),At.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(W){if(this.form){const At=this.form.get(W.path);At&&function(Q,V){return Ii(Q,V)}(At,W)&&At.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){je(this.form,this),this._oldForm&&Ii(this._oldForm,this)}_checkFormPresent(){}}return Q.\u0275fac=function(W){return new(W||Q)(T.Y36(pt,10),T.Y36(It,10))},Q.\u0275dir=T.lG2({type:Q,selectors:[["","formGroup",""]],hostBindings:function(W,At){1&W&&T.NdJ("submit",function(vi){return At.onSubmit(vi)})("reset",function(){return At.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[T._Bn([lr]),T.qOj,T.TTD]}),Q})();const Yo={provide:pt,useExisting:(0,T.Gpc)(()=>Bo),multi:!0},Ss={provide:pt,useExisting:(0,T.Gpc)(()=>Lo),multi:!0};let Bo=(()=>{class Q{constructor(){this._required=!1}get required(){return this._required}set required(W){this._required=null!=W&&!1!==W&&"false"!=`${W}`,this._onChange&&this._onChange()}validate(W){return this.required?st(W):null}registerOnValidatorChange(W){this._onChange=W}}return Q.\u0275fac=function(W){return new(W||Q)},Q.\u0275dir=T.lG2({type:Q,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(W,At){2&W&&T.uIk("required",At.required?"":null)},inputs:{required:"required"},features:[T._Bn([Yo])]}),Q})(),Lo=(()=>{class Q extends Bo{validate(W){return this.required?gt(W):null}}return Q.\u0275fac=function(){let V;return function(At){return(V||(V=T.n5z(Q)))(At||Q)}}(),Q.\u0275dir=T.lG2({type:Q,selectors:[["input","type","checkbox","required","","formControlName",""],["input","type","checkbox","required","","formControl",""],["input","type","checkbox","required","","ngModel",""]],hostVars:1,hostBindings:function(W,At){2&W&&T.uIk("required",At.required?"":null)},features:[T._Bn([Ss]),T.qOj]}),Q})(),cs=(()=>{class Q{}return Q.\u0275fac=function(W){return new(W||Q)},Q.\u0275mod=T.oAB({type:Q}),Q.\u0275inj=T.cJS({imports:[[zn]]}),Q})(),Cl=(()=>{class Q{}return Q.\u0275fac=function(W){return new(W||Q)},Q.\u0275mod=T.oAB({type:Q}),Q.\u0275inj=T.cJS({imports:[cs]}),Q})(),Nr=(()=>{class Q{static withConfig(W){return{ngModule:Q,providers:[{provide:so,useValue:W.warnOnNgModelWithFormControl}]}}}return Q.\u0275fac=function(W){return new(W||Q)},Q.\u0275mod=T.oAB({type:Q}),Q.\u0275inj=T.cJS({imports:[cs]}),Q})()},91079:(U,$,m)=>{"use strict";m.d($,{XC:()=>ve,Bb:()=>Se,ZL:()=>Le});var T=m(15664),_=m(63191),e=m(5e3),t=m(90508),n=m(50727),r=m(77579),s=m(49770),u=m(56451),b=m(39646),x=m(54968),B=m(70925),Z=m(69808),ot=m(91314),et=m(30495),Tt=m(91159),Pt=m(47429),pt=m(93075),It=m(67322),Ht=m(95698),Jt=m(63900),Ct=m(39300),bt=m(54004),st=m(18505),gt=m(91005),lt=m(50226);const Bt=["panel"];function Dt(Zt,ie){if(1&Zt&&(e.TgZ(0,"div",0,1),e.Hsn(2),e.qZA()),2&Zt){const St=ie.id,jt=e.oxw();e.Q6J("id",jt.id)("ngClass",jt._classList),e.uIk("aria-label",jt.ariaLabel||null)("aria-labelledby",jt._getPanelAriaLabelledby(St))}}const Et=["*"];let ut=0;class rt{constructor(ie,St){this.source=ie,this.option=St}}const fe=(0,t.Kr)(class{}),Mt=new e.OlP("mat-autocomplete-default-options",{providedIn:"root",factory:function(){return{autoActiveFirstOption:!1}}});let ge=(()=>{class Zt extends fe{constructor(St,jt,Ce,ri){super(),this._changeDetectorRef=St,this._elementRef=jt,this._activeOptionChanges=n.w0.EMPTY,this.showPanel=!1,this._isOpen=!1,this.displayWith=null,this.optionSelected=new e.vpe,this.opened=new e.vpe,this.closed=new e.vpe,this.optionActivated=new e.vpe,this._classList={},this.id="mat-autocomplete-"+ut++,this.inertGroups=(null==ri?void 0:ri.SAFARI)||!1,this._autoActiveFirstOption=!!Ce.autoActiveFirstOption}get isOpen(){return this._isOpen&&this.showPanel}get autoActiveFirstOption(){return this._autoActiveFirstOption}set autoActiveFirstOption(St){this._autoActiveFirstOption=(0,_.Ig)(St)}set classList(St){this._classList=St&&St.length?(0,_.du)(St).reduce((jt,Ce)=>(jt[Ce]=!0,jt),{}):{},this._setVisibilityClasses(this._classList),this._elementRef.nativeElement.className=""}ngAfterContentInit(){this._keyManager=new T.s1(this.options).withWrap(),this._activeOptionChanges=this._keyManager.change.subscribe(St=>{this.isOpen&&this.optionActivated.emit({source:this,option:this.options.toArray()[St]||null})}),this._setVisibility()}ngOnDestroy(){this._activeOptionChanges.unsubscribe()}_setScrollTop(St){this.panel&&(this.panel.nativeElement.scrollTop=St)}_getScrollTop(){return this.panel?this.panel.nativeElement.scrollTop:0}_setVisibility(){this.showPanel=!!this.options.length,this._setVisibilityClasses(this._classList),this._changeDetectorRef.markForCheck()}_emitSelectEvent(St){const jt=new rt(this,St);this.optionSelected.emit(jt)}_getPanelAriaLabelledby(St){return this.ariaLabel?null:this.ariaLabelledby?(St?St+" ":"")+this.ariaLabelledby:St}_setVisibilityClasses(St){St[this._visibleClass]=this.showPanel,St[this._hiddenClass]=!this.showPanel}}return Zt.\u0275fac=function(St){return new(St||Zt)(e.Y36(e.sBO),e.Y36(e.SBq),e.Y36(Mt),e.Y36(B.t4))},Zt.\u0275dir=e.lG2({type:Zt,viewQuery:function(St,jt){if(1&St&&(e.Gf(e.Rgc,7),e.Gf(Bt,5)),2&St){let Ce;e.iGM(Ce=e.CRH())&&(jt.template=Ce.first),e.iGM(Ce=e.CRH())&&(jt.panel=Ce.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],displayWith:"displayWith",autoActiveFirstOption:"autoActiveFirstOption",panelWidth:"panelWidth",classList:["class","classList"]},outputs:{optionSelected:"optionSelected",opened:"opened",closed:"closed",optionActivated:"optionActivated"},features:[e.qOj]}),Zt})(),ve=(()=>{class Zt extends ge{constructor(){super(...arguments),this._visibleClass="mat-autocomplete-visible",this._hiddenClass="mat-autocomplete-hidden"}}return Zt.\u0275fac=function(){let ie;return function(jt){return(ie||(ie=e.n5z(Zt)))(jt||Zt)}}(),Zt.\u0275cmp=e.Xpm({type:Zt,selectors:[["mat-autocomplete"]],contentQueries:function(St,jt,Ce){if(1&St&&(e.Suo(Ce,t.K7,5),e.Suo(Ce,t.ey,5)),2&St){let ri;e.iGM(ri=e.CRH())&&(jt.optionGroups=ri),e.iGM(ri=e.CRH())&&(jt.options=ri)}},hostAttrs:[1,"mat-autocomplete"],inputs:{disableRipple:"disableRipple"},exportAs:["matAutocomplete"],features:[e._Bn([{provide:t.HF,useExisting:Zt}]),e.qOj],ngContentSelectors:Et,decls:1,vars:0,consts:[["role","listbox",1,"mat-autocomplete-panel",3,"id","ngClass"],["panel",""]],template:function(St,jt){1&St&&(e.F$t(),e.YNc(0,Dt,3,4,"ng-template"))},directives:[Z.mk],styles:[".mat-autocomplete-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;visibility:hidden;max-width:none;max-height:256px;position:relative;width:100%;border-bottom-left-radius:4px;border-bottom-right-radius:4px}.mat-autocomplete-panel.mat-autocomplete-visible{visibility:visible}.mat-autocomplete-panel.mat-autocomplete-hidden{visibility:hidden}.mat-autocomplete-panel-above .mat-autocomplete-panel{border-radius:0;border-top-left-radius:4px;border-top-right-radius:4px}.mat-autocomplete-panel .mat-divider-horizontal{margin-top:-1px}.cdk-high-contrast-active .mat-autocomplete-panel{outline:solid 1px}mat-autocomplete{display:none}\n"],encapsulation:2,changeDetection:0}),Zt})();const pe=new e.OlP("mat-autocomplete-scroll-strategy"),ke={provide:pe,deps:[ot.aV],useFactory:function(Zt){return()=>Zt.scrollStrategies.reposition()}},Ze={provide:pt.JU,useExisting:(0,e.Gpc)(()=>Le),multi:!0};let $e=(()=>{class Zt{constructor(St,jt,Ce,ri,Te,te,ne,Oe,re,me,ye){this._element=St,this._overlay=jt,this._viewContainerRef=Ce,this._zone=ri,this._changeDetectorRef=Te,this._dir=ne,this._formField=Oe,this._document=re,this._viewportRuler=me,this._defaults=ye,this._componentDestroyed=!1,this._autocompleteDisabled=!1,this._manuallyFloatingLabel=!1,this._viewportSubscription=n.w0.EMPTY,this._canOpenOnNextFocus=!0,this._closeKeyEventStream=new r.x,this._windowBlurHandler=()=>{this._canOpenOnNextFocus=this._document.activeElement!==this._element.nativeElement||this.panelOpen},this._onChange=()=>{},this._onTouched=()=>{},this.position="auto",this.autocompleteAttribute="off",this._overlayAttached=!1,this.optionSelections=(0,s.P)(()=>this.autocomplete&&this.autocomplete.options?(0,u.T)(...this.autocomplete.options.map(Qt=>Qt.onSelectionChange)):this._zone.onStable.pipe((0,Ht.q)(1),(0,Jt.w)(()=>this.optionSelections))),this._scrollStrategy=te}get autocompleteDisabled(){return this._autocompleteDisabled}set autocompleteDisabled(St){this._autocompleteDisabled=(0,_.Ig)(St)}ngAfterViewInit(){const St=this._getWindow();void 0!==St&&this._zone.runOutsideAngular(()=>St.addEventListener("blur",this._windowBlurHandler))}ngOnChanges(St){St.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())}ngOnDestroy(){const St=this._getWindow();void 0!==St&&St.removeEventListener("blur",this._windowBlurHandler),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete()}get panelOpen(){return this._overlayAttached&&this.autocomplete.showPanel}openPanel(){this._attachOverlay(),this._floatLabel()}closePanel(){this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this.autocomplete.closed.emit(),this.autocomplete._isOpen=this._overlayAttached=!1,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._componentDestroyed||this._changeDetectorRef.detectChanges())}updatePosition(){this._overlayAttached&&this._overlayRef.updatePosition()}get panelClosingActions(){return(0,u.T)(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe((0,Ct.h)(()=>this._overlayAttached)),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe((0,Ct.h)(()=>this._overlayAttached)):(0,b.of)()).pipe((0,bt.U)(St=>St instanceof t.rN?St:null))}get activeOption(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}_getOutsideClickStream(){return(0,u.T)((0,x.R)(this._document,"click"),(0,x.R)(this._document,"auxclick"),(0,x.R)(this._document,"touchend")).pipe((0,Ct.h)(St=>{const jt=(0,B.sA)(St),Ce=this._formField?this._formField._elementRef.nativeElement:null,ri=this.connectedTo?this.connectedTo.elementRef.nativeElement:null;return this._overlayAttached&&jt!==this._element.nativeElement&&(!Ce||!Ce.contains(jt))&&(!ri||!ri.contains(jt))&&!!this._overlayRef&&!this._overlayRef.overlayElement.contains(jt)}))}writeValue(St){Promise.resolve(null).then(()=>this._setTriggerValue(St))}registerOnChange(St){this._onChange=St}registerOnTouched(St){this._onTouched=St}setDisabledState(St){this._element.nativeElement.disabled=St}_handleKeydown(St){const jt=St.keyCode;if(jt===Tt.hY&&!(0,Tt.Vb)(St)&&St.preventDefault(),this.activeOption&&jt===Tt.K5&&this.panelOpen)this.activeOption._selectViaInteraction(),this._resetActiveItem(),St.preventDefault();else if(this.autocomplete){const Ce=this.autocomplete._keyManager.activeItem,ri=jt===Tt.LH||jt===Tt.JH;this.panelOpen||jt===Tt.Mf?this.autocomplete._keyManager.onKeydown(St):ri&&this._canOpen()&&this.openPanel(),(ri||this.autocomplete._keyManager.activeItem!==Ce)&&this._scrollToOption(this.autocomplete._keyManager.activeItemIndex||0)}}_handleInput(St){let jt=St.target,Ce=jt.value;"number"===jt.type&&(Ce=""==Ce?null:parseFloat(Ce)),this._previousValue!==Ce&&(this._previousValue=Ce,this._onChange(Ce),this._canOpen()&&this._document.activeElement===St.target&&this.openPanel())}_handleFocus(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(),this._floatLabel(!0)):this._canOpenOnNextFocus=!0}_floatLabel(St=!1){this._formField&&"auto"===this._formField.floatLabel&&(St?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)}_resetLabel(){this._manuallyFloatingLabel&&(this._formField.floatLabel="auto",this._manuallyFloatingLabel=!1)}_subscribeToClosingActions(){const St=this._zone.onStable.pipe((0,Ht.q)(1)),jt=this.autocomplete.options.changes.pipe((0,st.b)(()=>this._positionStrategy.reapplyLastPosition()),(0,gt.g)(0));return(0,u.T)(St,jt).pipe((0,Jt.w)(()=>{const Ce=this.panelOpen;return this._resetActiveItem(),this.autocomplete._setVisibility(),this.panelOpen&&(this._overlayRef.updatePosition(),Ce!==this.panelOpen&&this.autocomplete.opened.emit()),this.panelClosingActions}),(0,Ht.q)(1)).subscribe(Ce=>this._setValueAndClose(Ce))}_destroyPanel(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)}_setTriggerValue(St){const jt=this.autocomplete&&this.autocomplete.displayWith?this.autocomplete.displayWith(St):St,Ce=null!=jt?jt:"";this._formField?this._formField._control.value=Ce:this._element.nativeElement.value=Ce,this._previousValue=Ce}_setValueAndClose(St){St&&St.source&&(this._clearPreviousSelectedOption(St.source),this._setTriggerValue(St.source.value),this._onChange(St.source.value),this._element.nativeElement.focus(),this.autocomplete._emitSelectEvent(St.source)),this.closePanel()}_clearPreviousSelectedOption(St){this.autocomplete.options.forEach(jt=>{jt!==St&&jt.selected&&jt.deselect()})}_attachOverlay(){var St;let jt=this._overlayRef;jt?(this._positionStrategy.setOrigin(this._getConnectedElement()),jt.updateSize({width:this._getPanelWidth()})):(this._portal=new Pt.UE(this.autocomplete.template,this._viewContainerRef,{id:null===(St=this._formField)||void 0===St?void 0:St.getLabelId()}),jt=this._overlay.create(this._getOverlayConfig()),this._overlayRef=jt,jt.keydownEvents().subscribe(ri=>{(ri.keyCode===Tt.hY&&!(0,Tt.Vb)(ri)||ri.keyCode===Tt.LH&&(0,Tt.Vb)(ri,"altKey"))&&(this._closeKeyEventStream.next(),this._resetActiveItem(),ri.stopPropagation(),ri.preventDefault())}),this._viewportSubscription=this._viewportRuler.change().subscribe(()=>{this.panelOpen&&jt&&jt.updateSize({width:this._getPanelWidth()})})),jt&&!jt.hasAttached()&&(jt.attach(this._portal),this._closingActionsSubscription=this._subscribeToClosingActions());const Ce=this.panelOpen;this.autocomplete._setVisibility(),this.autocomplete._isOpen=this._overlayAttached=!0,this.panelOpen&&Ce!==this.panelOpen&&this.autocomplete.opened.emit()}_getOverlayConfig(){var St;return new ot.X_({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:this._dir,panelClass:null===(St=this._defaults)||void 0===St?void 0:St.overlayPanelClass})}_getOverlayPosition(){const St=this._overlay.position().flexibleConnectedTo(this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1);return this._setStrategyPositions(St),this._positionStrategy=St,St}_setStrategyPositions(St){const jt=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],Ce=this._aboveClass,ri=[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:Ce},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:Ce}];let Te;Te="above"===this.position?ri:"below"===this.position?jt:[...jt,...ri],St.withPositions(Te)}_getConnectedElement(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element}_getPanelWidth(){return this.autocomplete.panelWidth||this._getHostWidth()}_getHostWidth(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width}_resetActiveItem(){const St=this.autocomplete;St.autoActiveFirstOption?St._keyManager.setFirstItemActive():St._keyManager.setActiveItem(-1)}_canOpen(){const St=this._element.nativeElement;return!St.readOnly&&!St.disabled&&!this._autocompleteDisabled}_getWindow(){var St;return(null===(St=this._document)||void 0===St?void 0:St.defaultView)||window}_scrollToOption(St){const jt=this.autocomplete,Ce=(0,t.CB)(St,jt.options,jt.optionGroups);if(0===St&&1===Ce)jt._setScrollTop(0);else if(jt.panel){const ri=jt.options.toArray()[St];if(ri){const Te=ri._getHostElement(),te=(0,t.jH)(Te.offsetTop,Te.offsetHeight,jt._getScrollTop(),jt.panel.nativeElement.offsetHeight);jt._setScrollTop(te)}}}}return Zt.\u0275fac=function(St){return new(St||Zt)(e.Y36(e.SBq),e.Y36(ot.aV),e.Y36(e.s_b),e.Y36(e.R0b),e.Y36(e.sBO),e.Y36(pe),e.Y36(lt.Is,8),e.Y36(It.G_,9),e.Y36(Z.K0,8),e.Y36(et.rL),e.Y36(Mt,8))},Zt.\u0275dir=e.lG2({type:Zt,inputs:{autocomplete:["matAutocomplete","autocomplete"],position:["matAutocompletePosition","position"],connectedTo:["matAutocompleteConnectedTo","connectedTo"],autocompleteAttribute:["autocomplete","autocompleteAttribute"],autocompleteDisabled:["matAutocompleteDisabled","autocompleteDisabled"]},features:[e.TTD]}),Zt})(),Le=(()=>{class Zt extends $e{constructor(){super(...arguments),this._aboveClass="mat-autocomplete-panel-above"}}return Zt.\u0275fac=function(){let ie;return function(jt){return(ie||(ie=e.n5z(Zt)))(jt||Zt)}}(),Zt.\u0275dir=e.lG2({type:Zt,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-autocomplete-trigger"],hostVars:7,hostBindings:function(St,jt){1&St&&e.NdJ("focusin",function(){return jt._handleFocus()})("blur",function(){return jt._onTouched()})("input",function(ri){return jt._handleInput(ri)})("keydown",function(ri){return jt._handleKeydown(ri)}),2&St&&e.uIk("autocomplete",jt.autocompleteAttribute)("role",jt.autocompleteDisabled?null:"combobox")("aria-autocomplete",jt.autocompleteDisabled?null:"list")("aria-activedescendant",jt.panelOpen&&jt.activeOption?jt.activeOption.id:null)("aria-expanded",jt.autocompleteDisabled?null:jt.panelOpen.toString())("aria-owns",jt.autocompleteDisabled||!jt.panelOpen||null==jt.autocomplete?null:jt.autocomplete.id)("aria-haspopup",!jt.autocompleteDisabled)},exportAs:["matAutocompleteTrigger"],features:[e._Bn([Ze]),e.qOj]}),Zt})(),Se=(()=>{class Zt{}return Zt.\u0275fac=function(St){return new(St||Zt)},Zt.\u0275mod=e.oAB({type:Zt}),Zt.\u0275inj=e.cJS({providers:[ke],imports:[[ot.U8,t.Ng,t.BQ,Z.ez],et.ZD,t.Ng,t.BQ]}),Zt})()},47423:(U,$,m)=>{"use strict";m.d($,{zs:()=>Z,lW:()=>B,ot:()=>ot});var T=m(5e3),_=m(90508),e=m(76360),t=m(15664);const n=["mat-button",""],r=["*"],b=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],x=(0,_.pj)((0,_.Id)((0,_.Kr)(class{constructor(et){this._elementRef=et}})));let B=(()=>{class et extends x{constructor(Pt,pt,It){super(Pt),this._focusMonitor=pt,this._animationMode=It,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const Ht of b)this._hasHostAttributes(Ht)&&this._getHostElement().classList.add(Ht);Pt.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(Pt,pt){Pt?this._focusMonitor.focusVia(this._getHostElement(),Pt,pt):this._getHostElement().focus(pt)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...Pt){return Pt.some(pt=>this._getHostElement().hasAttribute(pt))}}return et.\u0275fac=function(Pt){return new(Pt||et)(T.Y36(T.SBq),T.Y36(t.tE),T.Y36(e.Qb,8))},et.\u0275cmp=T.Xpm({type:et,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(Pt,pt){if(1&Pt&&T.Gf(_.wG,5),2&Pt){let It;T.iGM(It=T.CRH())&&(pt.ripple=It.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(Pt,pt){2&Pt&&(T.uIk("disabled",pt.disabled||null),T.ekj("_mat-animation-noopable","NoopAnimations"===pt._animationMode)("mat-button-disabled",pt.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[T.qOj],attrs:n,ngContentSelectors:r,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(Pt,pt){1&Pt&&(T.F$t(),T.TgZ(0,"span",0),T.Hsn(1),T.qZA(),T._UZ(2,"span",1),T._UZ(3,"span",2)),2&Pt&&(T.xp6(2),T.ekj("mat-button-ripple-round",pt.isRoundButton||pt.isIconButton),T.Q6J("matRippleDisabled",pt._isRippleDisabled())("matRippleCentered",pt.isIconButton)("matRippleTrigger",pt._getHostElement()))},directives:[_.wG],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),et})(),Z=(()=>{class et extends B{constructor(Pt,pt,It){super(pt,Pt,It)}_haltDisabledEvents(Pt){this.disabled&&(Pt.preventDefault(),Pt.stopImmediatePropagation())}}return et.\u0275fac=function(Pt){return new(Pt||et)(T.Y36(t.tE),T.Y36(T.SBq),T.Y36(e.Qb,8))},et.\u0275cmp=T.Xpm({type:et,selectors:[["a","mat-button",""],["a","mat-raised-button",""],["a","mat-icon-button",""],["a","mat-fab",""],["a","mat-mini-fab",""],["a","mat-stroked-button",""],["a","mat-flat-button",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:7,hostBindings:function(Pt,pt){1&Pt&&T.NdJ("click",function(Ht){return pt._haltDisabledEvents(Ht)}),2&Pt&&(T.uIk("tabindex",pt.disabled?-1:pt.tabIndex||0)("disabled",pt.disabled||null)("aria-disabled",pt.disabled.toString()),T.ekj("_mat-animation-noopable","NoopAnimations"===pt._animationMode)("mat-button-disabled",pt.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matButton","matAnchor"],features:[T.qOj],attrs:n,ngContentSelectors:r,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(Pt,pt){1&Pt&&(T.F$t(),T.TgZ(0,"span",0),T.Hsn(1),T.qZA(),T._UZ(2,"span",1),T._UZ(3,"span",2)),2&Pt&&(T.xp6(2),T.ekj("mat-button-ripple-round",pt.isRoundButton||pt.isIconButton),T.Q6J("matRippleDisabled",pt._isRippleDisabled())("matRippleCentered",pt.isIconButton)("matRippleTrigger",pt._getHostElement()))},directives:[_.wG],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),et})(),ot=(()=>{class et{}return et.\u0275fac=function(Pt){return new(Pt||et)},et.\u0275mod=T.oAB({type:et}),et.\u0275inj=T.cJS({imports:[[_.si,_.BQ],_.BQ]}),et})()},90508:(U,$,m)=>{"use strict";m.d($,{yN:()=>It,mZ:()=>Ht,_A:()=>ve,rD:()=>Gt,sG:()=>pe,K7:()=>mi,HF:()=>Pi,Y2:()=>ye,BQ:()=>st,X2:()=>Se,uc:()=>St,XK:()=>Le,ey:()=>je,Ng:()=>Hi,rN:()=>xe,nP:()=>ti,us:()=>ni,wG:()=>Qt,si:()=>de,IR:()=>Oe,CB:()=>Ii,jH:()=>_i,pj:()=>Et,Kr:()=>ut,Id:()=>Dt,FD:()=>fe,sb:()=>rt,E0:()=>Zt});var T=m(5e3),_=m(50226),t=m(69808),n=m(70925),r=m(15664),s=m(63191),u=m(77579),b=m(68675),x=m(76360),B=m(91159);function et(Je,ue){if(1&Je&&T._UZ(0,"mat-pseudo-checkbox",4),2&Je){const kt=T.oxw();T.Q6J("state",kt.selected?"checked":"unchecked")("disabled",kt.disabled)}}function Tt(Je,ue){if(1&Je&&(T.TgZ(0,"span",5),T._uU(1),T.qZA()),2&Je){const kt=T.oxw();T.xp6(1),T.hij("(",kt.group.label,")")}}const Pt=["*"];let It=(()=>{class Je{}return Je.STANDARD_CURVE="cubic-bezier(0.4,0.0,0.2,1)",Je.DECELERATION_CURVE="cubic-bezier(0.0,0.0,0.2,1)",Je.ACCELERATION_CURVE="cubic-bezier(0.4,0.0,1,1)",Je.SHARP_CURVE="cubic-bezier(0.4,0.0,0.6,1)",Je})(),Ht=(()=>{class Je{}return Je.COMPLEX="375ms",Je.ENTERING="225ms",Je.EXITING="195ms",Je})();const bt=new T.OlP("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let st=(()=>{class Je{constructor(kt,ct,Lt){this._sanityChecks=ct,this._document=Lt,this._hasDoneGlobalChecks=!1,kt._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(kt){return!(0,n.Oy)()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[kt])}}return Je.\u0275fac=function(kt){return new(kt||Je)(T.LFG(r.qm),T.LFG(bt,8),T.LFG(t.K0))},Je.\u0275mod=T.oAB({type:Je}),Je.\u0275inj=T.cJS({imports:[[_.vT],_.vT]}),Je})();function Dt(Je){return class extends Je{constructor(...ue){super(...ue),this._disabled=!1}get disabled(){return this._disabled}set disabled(ue){this._disabled=(0,s.Ig)(ue)}}}function Et(Je,ue){return class extends Je{constructor(...kt){super(...kt),this.defaultColor=ue,this.color=ue}get color(){return this._color}set color(kt){const ct=kt||this.defaultColor;ct!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),ct&&this._elementRef.nativeElement.classList.add(`mat-${ct}`),this._color=ct)}}}function ut(Je){return class extends Je{constructor(...ue){super(...ue),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(ue){this._disableRipple=(0,s.Ig)(ue)}}}function rt(Je,ue=0){return class extends Je{constructor(...kt){super(...kt),this._tabIndex=ue,this.defaultTabIndex=ue}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(kt){this._tabIndex=null!=kt?(0,s.su)(kt):this.defaultTabIndex}}}function fe(Je){return class extends Je{constructor(...ue){super(...ue),this.stateChanges=new u.x,this.errorState=!1}updateErrorState(){const ue=this.errorState,ce=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);ce!==ue&&(this.errorState=ce,this.stateChanges.next())}}}const Nt=new T.OlP("MAT_DATE_LOCALE",{providedIn:"root",factory:function(){return(0,T.f3M)(T.soG)}});class ve{constructor(){this._localeChanges=new u.x,this.localeChanges=this._localeChanges}getValidDateOrNull(ue){return this.isDateInstance(ue)&&this.isValid(ue)?ue:null}deserialize(ue){return null==ue||this.isDateInstance(ue)&&this.isValid(ue)?ue:this.invalid()}setLocale(ue){this.locale=ue,this._localeChanges.next()}compareDate(ue,kt){return this.getYear(ue)-this.getYear(kt)||this.getMonth(ue)-this.getMonth(kt)||this.getDate(ue)-this.getDate(kt)}sameDate(ue,kt){if(ue&&kt){let ct=this.isValid(ue),Lt=this.isValid(kt);return ct&&Lt?!this.compareDate(ue,kt):ct==Lt}return ue==kt}clampDate(ue,kt,ct){return kt&&this.compareDate(ue,kt)<0?kt:ct&&this.compareDate(ue,ct)>0?ct:ue}}const pe=new T.OlP("mat-date-formats"),He=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function ke(Je,ue){const kt=Array(Je);for(let ct=0;ct<Je;ct++)kt[ct]=ue(ct);return kt}let Ze=(()=>{class Je extends ve{constructor(kt,ct){super(),this.useUtcForDisplay=!1,super.setLocale(kt)}getYear(kt){return kt.getFullYear()}getMonth(kt){return kt.getMonth()}getDate(kt){return kt.getDate()}getDayOfWeek(kt){return kt.getDay()}getMonthNames(kt){const ct=new Intl.DateTimeFormat(this.locale,{month:kt,timeZone:"utc"});return ke(12,Lt=>this._format(ct,new Date(2017,Lt,1)))}getDateNames(){const kt=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return ke(31,ct=>this._format(kt,new Date(2017,0,ct+1)))}getDayOfWeekNames(kt){const ct=new Intl.DateTimeFormat(this.locale,{weekday:kt,timeZone:"utc"});return ke(7,Lt=>this._format(ct,new Date(2017,0,Lt+1)))}getYearName(kt){const ct=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._format(ct,kt)}getFirstDayOfWeek(){return 0}getNumDaysInMonth(kt){return this.getDate(this._createDateWithOverflow(this.getYear(kt),this.getMonth(kt)+1,0))}clone(kt){return new Date(kt.getTime())}createDate(kt,ct,Lt){let ce=this._createDateWithOverflow(kt,ct,Lt);return ce.getMonth(),ce}today(){return new Date}parse(kt){return"number"==typeof kt?new Date(kt):kt?new Date(Date.parse(kt)):null}format(kt,ct){if(!this.isValid(kt))throw Error("NativeDateAdapter: Cannot format invalid date.");const Lt=new Intl.DateTimeFormat(this.locale,Object.assign(Object.assign({},ct),{timeZone:"utc"}));return this._format(Lt,kt)}addCalendarYears(kt,ct){return this.addCalendarMonths(kt,12*ct)}addCalendarMonths(kt,ct){let Lt=this._createDateWithOverflow(this.getYear(kt),this.getMonth(kt)+ct,this.getDate(kt));return this.getMonth(Lt)!=((this.getMonth(kt)+ct)%12+12)%12&&(Lt=this._createDateWithOverflow(this.getYear(Lt),this.getMonth(Lt),0)),Lt}addCalendarDays(kt,ct){return this._createDateWithOverflow(this.getYear(kt),this.getMonth(kt),this.getDate(kt)+ct)}toIso8601(kt){return[kt.getUTCFullYear(),this._2digit(kt.getUTCMonth()+1),this._2digit(kt.getUTCDate())].join("-")}deserialize(kt){if("string"==typeof kt){if(!kt)return null;if(He.test(kt)){let ct=new Date(kt);if(this.isValid(ct))return ct}}return super.deserialize(kt)}isDateInstance(kt){return kt instanceof Date}isValid(kt){return!isNaN(kt.getTime())}invalid(){return new Date(NaN)}_createDateWithOverflow(kt,ct,Lt){const ce=new Date;return ce.setFullYear(kt,ct,Lt),ce.setHours(0,0,0,0),ce}_2digit(kt){return("00"+kt).slice(-2)}_format(kt,ct){const Lt=new Date;return Lt.setUTCFullYear(ct.getFullYear(),ct.getMonth(),ct.getDate()),Lt.setUTCHours(ct.getHours(),ct.getMinutes(),ct.getSeconds(),ct.getMilliseconds()),kt.format(Lt)}}return Je.\u0275fac=function(kt){return new(kt||Je)(T.LFG(Nt,8),T.LFG(n.t4))},Je.\u0275prov=T.Yz7({token:Je,factory:Je.\u0275fac}),Je})();const Di={parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}};let $e=(()=>{class Je{}return Je.\u0275fac=function(kt){return new(kt||Je)},Je.\u0275mod=T.oAB({type:Je}),Je.\u0275inj=T.cJS({providers:[{provide:ve,useClass:Ze}],imports:[[n.ud]]}),Je})(),Le=(()=>{class Je{}return Je.\u0275fac=function(kt){return new(kt||Je)},Je.\u0275mod=T.oAB({type:Je}),Je.\u0275inj=T.cJS({providers:[{provide:pe,useValue:Di}],imports:[[$e]]}),Je})(),Gt=(()=>{class Je{isErrorState(kt,ct){return!!(kt&&kt.invalid&&(kt.touched||ct&&ct.submitted))}}return Je.\u0275fac=function(kt){return new(kt||Je)},Je.\u0275prov=T.Yz7({token:Je,factory:Je.\u0275fac,providedIn:"root"}),Je})(),Se=(()=>{class Je{}return Je.\u0275fac=function(kt){return new(kt||Je)},Je.\u0275dir=T.lG2({type:Je,selectors:[["","mat-line",""],["","matLine",""]],hostAttrs:[1,"mat-line"]}),Je})();function Zt(Je,ue,kt="mat"){Je.changes.pipe((0,b.O)(Je)).subscribe(({length:ct})=>{ie(ue,`${kt}-2-line`,!1),ie(ue,`${kt}-3-line`,!1),ie(ue,`${kt}-multi-line`,!1),2===ct||3===ct?ie(ue,`${kt}-${ct}-line`,!0):ct>3&&ie(ue,`${kt}-multi-line`,!0)})}function ie(Je,ue,kt){Je.nativeElement.classList.toggle(ue,kt)}let St=(()=>{class Je{}return Je.\u0275fac=function(kt){return new(kt||Je)},Je.\u0275mod=T.oAB({type:Je}),Je.\u0275inj=T.cJS({imports:[[st],st]}),Je})();class jt{constructor(ue,kt,ct){this._renderer=ue,this.element=kt,this.config=ct,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const Ce={enterDuration:225,exitDuration:150},Te=(0,n.i$)({passive:!0}),te=["mousedown","touchstart"],ne=["mouseup","mouseleave","touchend","touchcancel"];class Oe{constructor(ue,kt,ct,Lt){this._target=ue,this._ngZone=kt,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,Lt.isBrowser&&(this._containerElement=(0,s.fI)(ct))}fadeInRipple(ue,kt,ct={}){const Lt=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),ce=Object.assign(Object.assign({},Ce),ct.animation);ct.centered&&(ue=Lt.left+Lt.width/2,kt=Lt.top+Lt.height/2);const Ne=ct.radius||function(Je,ue,kt){const ct=Math.max(Math.abs(Je-kt.left),Math.abs(Je-kt.right)),Lt=Math.max(Math.abs(ue-kt.top),Math.abs(ue-kt.bottom));return Math.sqrt(ct*ct+Lt*Lt)}(ue,kt,Lt),Wi=ue-Lt.left,qi=kt-Lt.top,Sn=ce.enterDuration,ir=document.createElement("div");ir.classList.add("mat-ripple-element"),ir.style.left=Wi-Ne+"px",ir.style.top=qi-Ne+"px",ir.style.height=2*Ne+"px",ir.style.width=2*Ne+"px",null!=ct.color&&(ir.style.backgroundColor=ct.color),ir.style.transitionDuration=`${Sn}ms`,this._containerElement.appendChild(ir),window.getComputedStyle(ir).getPropertyValue("opacity"),ir.style.transform="scale(1)";const ci=new jt(this,ir,ct);return ci.state=0,this._activeRipples.add(ci),ct.persistent||(this._mostRecentTransientRipple=ci),this._runTimeoutOutsideZone(()=>{const Ke=ci===this._mostRecentTransientRipple;ci.state=1,!ct.persistent&&(!Ke||!this._isPointerDown)&&ci.fadeOut()},Sn),ci}fadeOutRipple(ue){const kt=this._activeRipples.delete(ue);if(ue===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!kt)return;const ct=ue.element,Lt=Object.assign(Object.assign({},Ce),ue.config.animation);ct.style.transitionDuration=`${Lt.exitDuration}ms`,ct.style.opacity="0",ue.state=2,this._runTimeoutOutsideZone(()=>{ue.state=3,ct.remove()},Lt.exitDuration)}fadeOutAll(){this._activeRipples.forEach(ue=>ue.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(ue=>{ue.config.persistent||ue.fadeOut()})}setupTriggerEvents(ue){const kt=(0,s.fI)(ue);!kt||kt===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=kt,this._registerEvents(te))}handleEvent(ue){"mousedown"===ue.type?this._onMousedown(ue):"touchstart"===ue.type?this._onTouchStart(ue):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(ne),this._pointerUpEventsRegistered=!0)}_onMousedown(ue){const kt=(0,r.X6)(ue),ct=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!kt&&!ct&&(this._isPointerDown=!0,this.fadeInRipple(ue.clientX,ue.clientY,this._target.rippleConfig))}_onTouchStart(ue){if(!this._target.rippleDisabled&&!(0,r.yG)(ue)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const kt=ue.changedTouches;for(let ct=0;ct<kt.length;ct++)this.fadeInRipple(kt[ct].clientX,kt[ct].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(ue=>{!ue.config.persistent&&(1===ue.state||ue.config.terminateOnPointerUp&&0===ue.state)&&ue.fadeOut()}))}_runTimeoutOutsideZone(ue,kt=0){this._ngZone.runOutsideAngular(()=>setTimeout(ue,kt))}_registerEvents(ue){this._ngZone.runOutsideAngular(()=>{ue.forEach(kt=>{this._triggerElement.addEventListener(kt,this,Te)})})}_removeTriggerEvents(){this._triggerElement&&(te.forEach(ue=>{this._triggerElement.removeEventListener(ue,this,Te)}),this._pointerUpEventsRegistered&&ne.forEach(ue=>{this._triggerElement.removeEventListener(ue,this,Te)}))}}const ye=new T.OlP("mat-ripple-global-options");let Qt=(()=>{class Je{constructor(kt,ct,Lt,ce,Ne){this._elementRef=kt,this._animationMode=Ne,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=ce||{},this._rippleRenderer=new Oe(this,ct,kt,Lt)}get disabled(){return this._disabled}set disabled(kt){kt&&this.fadeOutAllNonPersistent(),this._disabled=kt,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(kt){this._trigger=kt,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(kt,ct=0,Lt){return"number"==typeof kt?this._rippleRenderer.fadeInRipple(kt,ct,Object.assign(Object.assign({},this.rippleConfig),Lt)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),kt))}}return Je.\u0275fac=function(kt){return new(kt||Je)(T.Y36(T.SBq),T.Y36(T.R0b),T.Y36(n.t4),T.Y36(ye,8),T.Y36(x.Qb,8))},Je.\u0275dir=T.lG2({type:Je,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(kt,ct){2&kt&&T.ekj("mat-ripple-unbounded",ct.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),Je})(),de=(()=>{class Je{}return Je.\u0275fac=function(kt){return new(kt||Je)},Je.\u0275mod=T.oAB({type:Je}),Je.\u0275inj=T.cJS({imports:[[st,n.ud],st]}),Je})(),ti=(()=>{class Je{constructor(kt){this._animationMode=kt,this.state="unchecked",this.disabled=!1}}return Je.\u0275fac=function(kt){return new(kt||Je)(T.Y36(x.Qb,8))},Je.\u0275cmp=T.Xpm({type:Je,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(kt,ct){2&kt&&T.ekj("mat-pseudo-checkbox-indeterminate","indeterminate"===ct.state)("mat-pseudo-checkbox-checked","checked"===ct.state)("mat-pseudo-checkbox-disabled",ct.disabled)("_mat-animation-noopable","NoopAnimations"===ct._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(kt,ct){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}\n'],encapsulation:2,changeDetection:0}),Je})(),ni=(()=>{class Je{}return Je.\u0275fac=function(kt){return new(kt||Je)},Je.\u0275mod=T.oAB({type:Je}),Je.\u0275inj=T.cJS({imports:[[st]]}),Je})();const Pi=new T.OlP("MAT_OPTION_PARENT_COMPONENT"),mi=new T.OlP("MatOptgroup");let Re=0;class xe{constructor(ue,kt=!1){this.source=ue,this.isUserInput=kt}}let Ci=(()=>{class Je{constructor(kt,ct,Lt,ce){this._element=kt,this._changeDetectorRef=ct,this._parent=Lt,this.group=ce,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+Re++,this.onSelectionChange=new T.vpe,this._stateChanges=new u.x}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(kt){this._disabled=(0,s.Ig)(kt)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(kt,ct){const Lt=this._getHostElement();"function"==typeof Lt.focus&&Lt.focus(ct)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(kt){(kt.keyCode===B.K5||kt.keyCode===B.L_)&&!(0,B.Vb)(kt)&&(this._selectViaInteraction(),kt.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const kt=this.viewValue;kt!==this._mostRecentViewValue&&(this._mostRecentViewValue=kt,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(kt=!1){this.onSelectionChange.emit(new xe(this,kt))}}return Je.\u0275fac=function(kt){T.$Z()},Je.\u0275dir=T.lG2({type:Je,inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),Je})(),je=(()=>{class Je extends Ci{constructor(kt,ct,Lt,ce){super(kt,ct,Lt,ce)}}return Je.\u0275fac=function(kt){return new(kt||Je)(T.Y36(T.SBq),T.Y36(T.sBO),T.Y36(Pi,8),T.Y36(mi,8))},Je.\u0275cmp=T.Xpm({type:Je,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(kt,ct){1&kt&&T.NdJ("click",function(){return ct._selectViaInteraction()})("keydown",function(ce){return ct._handleKeydown(ce)}),2&kt&&(T.Ikx("id",ct.id),T.uIk("tabindex",ct._getTabIndex())("aria-selected",ct._getAriaSelected())("aria-disabled",ct.disabled.toString()),T.ekj("mat-selected",ct.selected)("mat-option-multiple",ct.multiple)("mat-active",ct.active)("mat-option-disabled",ct.disabled))},exportAs:["matOption"],features:[T.qOj],ngContentSelectors:Pt,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(kt,ct){1&kt&&(T.F$t(),T.YNc(0,et,1,2,"mat-pseudo-checkbox",0),T.TgZ(1,"span",1),T.Hsn(2),T.qZA(),T.YNc(3,Tt,2,1,"span",2),T._UZ(4,"div",3)),2&kt&&(T.Q6J("ngIf",ct.multiple),T.xp6(3),T.Q6J("ngIf",ct.group&&ct.group._inert),T.xp6(1),T.Q6J("matRippleTrigger",ct._getHostElement())("matRippleDisabled",ct.disabled||ct.disableRipple))},directives:[t.O5,Qt,ti],styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:transparent}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.cdk-high-contrast-active .mat-option{margin:0 1px}.cdk-high-contrast-active .mat-option.mat-active{border:solid 1px currentColor;margin:0}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}\n"],encapsulation:2,changeDetection:0}),Je})();function Ii(Je,ue,kt){if(kt.length){let ct=ue.toArray(),Lt=kt.toArray(),ce=0;for(let Ne=0;Ne<Je+1;Ne++)ct[Ne].group&&ct[Ne].group===Lt[ce]&&ce++;return ce}return 0}function _i(Je,ue,kt,ct){return Je<kt?Je:Je+ue>kt+ct?Math.max(0,Je-ct+ue):kt}let Hi=(()=>{class Je{}return Je.\u0275fac=function(kt){return new(kt||Je)},Je.\u0275mod=T.oAB({type:Je}),Je.\u0275inj=T.cJS({imports:[[de,t.ez,st,ni]]}),Je})()},48966:(U,$,m)=>{"use strict";m.d($,{uw:()=>ve,Is:()=>pi,so:()=>Bt});var T=m(91314),_=m(47429),e=m(5e3),t=m(90508),n=m(50226),r=m(77579),s=m(49770),u=m(50727),b=m(39646),x=m(39300),B=m(95698),Z=m(68675),ot=m(70925),et=m(69808),Tt=m(41777),Pt=m(15664),pt=m(91159),It=m(76360);function Ht(Gt,Se){}class Jt{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0}}const Ct={dialogContainer:(0,Tt.X$)("dialogContainer",[(0,Tt.SB)("void, exit",(0,Tt.oB)({opacity:0,transform:"scale(0.7)"})),(0,Tt.SB)("enter",(0,Tt.oB)({transform:"none"})),(0,Tt.eR)("* => enter",(0,Tt.jt)("150ms cubic-bezier(0, 0, 0.2, 1)",(0,Tt.oB)({transform:"none",opacity:1}))),(0,Tt.eR)("* => void, * => exit",(0,Tt.jt)("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",(0,Tt.oB)({opacity:0})))])};let st=(()=>{class Gt extends _.en{constructor(Zt,ie,St,jt,Ce,ri,Te,te){super(),this._elementRef=Zt,this._focusTrapFactory=ie,this._changeDetectorRef=St,this._config=Ce,this._interactivityChecker=ri,this._ngZone=Te,this._focusMonitor=te,this._animationStateChanged=new e.vpe,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=ne=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(ne)),this._ariaLabelledBy=Ce.ariaLabelledBy||null,this._document=jt}_initializeWithAttachedContent(){this._setupFocusTrap(),this._capturePreviouslyFocusedElement()}attachComponentPortal(Zt){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(Zt)}attachTemplatePortal(Zt){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(Zt)}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(Zt,ie){this._interactivityChecker.isFocusable(Zt)||(Zt.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{Zt.addEventListener("blur",()=>Zt.removeAttribute("tabindex")),Zt.addEventListener("mousedown",()=>Zt.removeAttribute("tabindex"))})),Zt.focus(ie)}_focusByCssSelector(Zt,ie){let St=this._elementRef.nativeElement.querySelector(Zt);St&&this._forceFocus(St,ie)}_trapFocus(){const Zt=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||Zt.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(ie=>{ie||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const Zt=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&Zt&&"function"==typeof Zt.focus){const ie=(0,ot.ht)(),St=this._elementRef.nativeElement;(!ie||ie===this._document.body||ie===St||St.contains(ie))&&(this._focusMonitor?(this._focusMonitor.focusVia(Zt,this._closeInteractionType),this._closeInteractionType=null):Zt.focus())}this._focusTrap&&this._focusTrap.destroy()}_setupFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)}_capturePreviouslyFocusedElement(){this._document&&(this._elementFocusedBeforeDialogWasOpened=(0,ot.ht)())}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const Zt=this._elementRef.nativeElement,ie=(0,ot.ht)();return Zt===ie||Zt.contains(ie)}}return Gt.\u0275fac=function(Zt){return new(Zt||Gt)(e.Y36(e.SBq),e.Y36(Pt.qV),e.Y36(e.sBO),e.Y36(et.K0,8),e.Y36(Jt),e.Y36(Pt.ic),e.Y36(e.R0b),e.Y36(Pt.tE))},Gt.\u0275dir=e.lG2({type:Gt,viewQuery:function(Zt,ie){if(1&Zt&&e.Gf(_.Pl,7),2&Zt){let St;e.iGM(St=e.CRH())&&(ie._portalOutlet=St.first)}},features:[e.qOj]}),Gt})(),gt=(()=>{class Gt extends st{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:Zt,totalTime:ie}){"enter"===Zt?(this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:ie})):"exit"===Zt&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:ie}))}_onAnimationStart({toState:Zt,totalTime:ie}){"enter"===Zt?this._animationStateChanged.next({state:"opening",totalTime:ie}):("exit"===Zt||"void"===Zt)&&this._animationStateChanged.next({state:"closing",totalTime:ie})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}}return Gt.\u0275fac=function(){let Se;return function(ie){return(Se||(Se=e.n5z(Gt)))(ie||Gt)}}(),Gt.\u0275cmp=e.Xpm({type:Gt,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(Zt,ie){1&Zt&&e.WFA("@dialogContainer.start",function(jt){return ie._onAnimationStart(jt)})("@dialogContainer.done",function(jt){return ie._onAnimationDone(jt)}),2&Zt&&(e.Ikx("id",ie._id),e.uIk("role",ie._config.role)("aria-labelledby",ie._config.ariaLabel?null:ie._ariaLabelledBy)("aria-label",ie._config.ariaLabel)("aria-describedby",ie._config.ariaDescribedBy||null),e.d8E("@dialogContainer",ie._state))},features:[e.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(Zt,ie){1&Zt&&e.YNc(0,Ht,0,0,"ng-template",0)},directives:[_.Pl],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[Ct.dialogContainer]}}),Gt})(),lt=0;class Bt{constructor(Se,Zt,ie="mat-dialog-"+lt++){this._overlayRef=Se,this._containerInstance=Zt,this.id=ie,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new r.x,this._afterClosed=new r.x,this._beforeClosed=new r.x,this._state=0,Zt._id=ie,Zt._animationStateChanged.pipe((0,x.h)(St=>"opened"===St.state),(0,B.q)(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),Zt._animationStateChanged.pipe((0,x.h)(St=>"closed"===St.state),(0,B.q)(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),Se.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),Se.keydownEvents().pipe((0,x.h)(St=>St.keyCode===pt.hY&&!this.disableClose&&!(0,pt.Vb)(St))).subscribe(St=>{St.preventDefault(),Dt(this,"keyboard")}),Se.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():Dt(this,"mouse")})}close(Se){this._result=Se,this._containerInstance._animationStateChanged.pipe((0,x.h)(Zt=>"closing"===Zt.state),(0,B.q)(1)).subscribe(Zt=>{this._beforeClosed.next(Se),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),Zt.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(Se){let Zt=this._getPositionStrategy();return Se&&(Se.left||Se.right)?Se.left?Zt.left(Se.left):Zt.right(Se.right):Zt.centerHorizontally(),Se&&(Se.top||Se.bottom)?Se.top?Zt.top(Se.top):Zt.bottom(Se.bottom):Zt.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(Se="",Zt=""){return this._overlayRef.updateSize({width:Se,height:Zt}),this._overlayRef.updatePosition(),this}addPanelClass(Se){return this._overlayRef.addPanelClass(Se),this}removePanelClass(Se){return this._overlayRef.removePanelClass(Se),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function Dt(Gt,Se,Zt){return void 0!==Gt._containerInstance&&(Gt._containerInstance._closeInteractionType=Se),Gt.close(Zt)}const Et=new e.OlP("MatDialogData"),ut=new e.OlP("mat-dialog-default-options"),rt=new e.OlP("mat-dialog-scroll-strategy"),Nt={provide:rt,deps:[T.aV],useFactory:function(Gt){return()=>Gt.scrollStrategies.block()}};let ge=(()=>{class Gt{constructor(Zt,ie,St,jt,Ce,ri,Te,te,ne,Oe){this._overlay=Zt,this._injector=ie,this._defaultOptions=St,this._parentDialog=jt,this._overlayContainer=Ce,this._dialogRefConstructor=Te,this._dialogContainerType=te,this._dialogDataToken=ne,this._animationMode=Oe,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new r.x,this._afterOpenedAtThisLevel=new r.x,this._ariaHiddenElements=new Map,this._dialogAnimatingOpen=!1,this.afterAllClosed=(0,s.P)(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe((0,Z.O)(void 0))),this._scrollStrategy=ri}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const Zt=this._parentDialog;return Zt?Zt._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(Zt,ie){if(ie=function(Gt,Se){return Object.assign(Object.assign({},Se),Gt)}(ie,this._defaultOptions||new Jt),ie.id&&this.getDialogById(ie.id),this._dialogAnimatingOpen)return this._lastDialogRef;const St=this._createOverlay(ie),jt=this._attachDialogContainer(St,ie);if("NoopAnimations"!==this._animationMode){const ri=jt._animationStateChanged.subscribe(Te=>{"opening"===Te.state&&(this._dialogAnimatingOpen=!0),"opened"===Te.state&&(this._dialogAnimatingOpen=!1,ri.unsubscribe())});this._animationStateSubscriptions||(this._animationStateSubscriptions=new u.w0),this._animationStateSubscriptions.add(ri)}const Ce=this._attachDialogContent(Zt,jt,St,ie);return this._lastDialogRef=Ce,this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(Ce),Ce.afterClosed().subscribe(()=>this._removeOpenDialog(Ce)),this.afterOpened.next(Ce),jt._initializeWithAttachedContent(),Ce}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(Zt){return this.openDialogs.find(ie=>ie.id===Zt)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._animationStateSubscriptions&&this._animationStateSubscriptions.unsubscribe()}_createOverlay(Zt){const ie=this._getOverlayConfig(Zt);return this._overlay.create(ie)}_getOverlayConfig(Zt){const ie=new T.X_({positionStrategy:this._overlay.position().global(),scrollStrategy:Zt.scrollStrategy||this._scrollStrategy(),panelClass:Zt.panelClass,hasBackdrop:Zt.hasBackdrop,direction:Zt.direction,minWidth:Zt.minWidth,minHeight:Zt.minHeight,maxWidth:Zt.maxWidth,maxHeight:Zt.maxHeight,disposeOnNavigation:Zt.closeOnNavigation});return Zt.backdropClass&&(ie.backdropClass=Zt.backdropClass),ie}_attachDialogContainer(Zt,ie){const jt=e.zs3.create({parent:ie&&ie.viewContainerRef&&ie.viewContainerRef.injector||this._injector,providers:[{provide:Jt,useValue:ie}]}),Ce=new _.C5(this._dialogContainerType,ie.viewContainerRef,jt,ie.componentFactoryResolver);return Zt.attach(Ce).instance}_attachDialogContent(Zt,ie,St,jt){const Ce=new this._dialogRefConstructor(St,ie,jt.id);if(Zt instanceof e.Rgc)ie.attachTemplatePortal(new _.UE(Zt,null,{$implicit:jt.data,dialogRef:Ce}));else{const ri=this._createInjector(jt,Ce,ie),Te=ie.attachComponentPortal(new _.C5(Zt,jt.viewContainerRef,ri));Ce.componentInstance=Te.instance}return Ce.updateSize(jt.width,jt.height).updatePosition(jt.position),Ce}_createInjector(Zt,ie,St){const jt=Zt&&Zt.viewContainerRef&&Zt.viewContainerRef.injector,Ce=[{provide:this._dialogContainerType,useValue:St},{provide:this._dialogDataToken,useValue:Zt.data},{provide:this._dialogRefConstructor,useValue:ie}];return Zt.direction&&(!jt||!jt.get(n.Is,null,e.XFs.Optional))&&Ce.push({provide:n.Is,useValue:{value:Zt.direction,change:(0,b.of)()}}),e.zs3.create({parent:jt||this._injector,providers:Ce})}_removeOpenDialog(Zt){const ie=this.openDialogs.indexOf(Zt);ie>-1&&(this.openDialogs.splice(ie,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((St,jt)=>{St?jt.setAttribute("aria-hidden",St):jt.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const Zt=this._overlayContainer.getContainerElement();if(Zt.parentElement){const ie=Zt.parentElement.children;for(let St=ie.length-1;St>-1;St--){let jt=ie[St];jt!==Zt&&"SCRIPT"!==jt.nodeName&&"STYLE"!==jt.nodeName&&!jt.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(jt,jt.getAttribute("aria-hidden")),jt.setAttribute("aria-hidden","true"))}}}_closeDialogs(Zt){let ie=Zt.length;for(;ie--;)Zt[ie].close()}}return Gt.\u0275fac=function(Zt){e.$Z()},Gt.\u0275dir=e.lG2({type:Gt}),Gt})(),ve=(()=>{class Gt extends ge{constructor(Zt,ie,St,jt,Ce,ri,Te,te){super(Zt,ie,jt,ri,Te,Ce,Bt,gt,Et,te)}}return Gt.\u0275fac=function(Zt){return new(Zt||Gt)(e.LFG(T.aV),e.LFG(e.zs3),e.LFG(et.Ye,8),e.LFG(ut,8),e.LFG(rt),e.LFG(Gt,12),e.LFG(T.Xj),e.LFG(It.Qb,8))},Gt.\u0275prov=e.Yz7({token:Gt,factory:Gt.\u0275fac}),Gt})(),pi=(()=>{class Gt{}return Gt.\u0275fac=function(Zt){return new(Zt||Gt)},Gt.\u0275mod=e.oAB({type:Gt}),Gt.\u0275inj=e.cJS({providers:[ve,Nt],imports:[[T.U8,_.eL,t.BQ],t.BQ]}),Gt})()},4834:(U,$,m)=>{"use strict";m.d($,{d:()=>t,t:()=>n});var T=m(5e3),_=m(63191),e=m(90508);let t=(()=>{class r{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(u){this._vertical=(0,_.Ig)(u)}get inset(){return this._inset}set inset(u){this._inset=(0,_.Ig)(u)}}return r.\u0275fac=function(u){return new(u||r)},r.\u0275cmp=T.Xpm({type:r,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(u,b){2&u&&(T.uIk("aria-orientation",b.vertical?"vertical":"horizontal"),T.ekj("mat-divider-vertical",b.vertical)("mat-divider-horizontal",!b.vertical)("mat-divider-inset",b.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(u,b){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}\n"],encapsulation:2,changeDetection:0}),r})(),n=(()=>{class r{}return r.\u0275fac=function(u){return new(u||r)},r.\u0275mod=T.oAB({type:r}),r.\u0275inj=T.cJS({imports:[[e.BQ],e.BQ]}),r})()},81125:(U,$,m)=>{"use strict";m.d($,{pp:()=>Se,To:()=>Zt,ib:()=>ke,u4:()=>pi,yz:()=>Le,yK:()=>Gt});var T=m(5e3),_=m(63191),e=m(77579),t=m(50727),n=m(20449);let r=0;const s=new T.OlP("CdkAccordion");let u=(()=>{class ie{constructor(){this._stateChanges=new e.x,this._openCloseAllActions=new e.x,this.id="cdk-accordion-"+r++,this._multi=!1}get multi(){return this._multi}set multi(jt){this._multi=(0,_.Ig)(jt)}openAll(){this._multi&&this._openCloseAllActions.next(!0)}closeAll(){this._openCloseAllActions.next(!1)}ngOnChanges(jt){this._stateChanges.next(jt)}ngOnDestroy(){this._stateChanges.complete(),this._openCloseAllActions.complete()}}return ie.\u0275fac=function(jt){return new(jt||ie)},ie.\u0275dir=T.lG2({type:ie,selectors:[["cdk-accordion"],["","cdkAccordion",""]],inputs:{multi:"multi"},exportAs:["cdkAccordion"],features:[T._Bn([{provide:s,useExisting:ie}]),T.TTD]}),ie})(),b=0,x=(()=>{class ie{constructor(jt,Ce,ri){this.accordion=jt,this._changeDetectorRef=Ce,this._expansionDispatcher=ri,this._openCloseAllSubscription=t.w0.EMPTY,this.closed=new T.vpe,this.opened=new T.vpe,this.destroyed=new T.vpe,this.expandedChange=new T.vpe,this.id="cdk-accordion-child-"+b++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=ri.listen((Te,te)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===te&&this.id!==Te&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}get expanded(){return this._expanded}set expanded(jt){jt=(0,_.Ig)(jt),this._expanded!==jt&&(this._expanded=jt,this.expandedChange.emit(jt),jt?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(jt){this._disabled=(0,_.Ig)(jt)}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(jt=>{this.disabled||(this.expanded=jt)})}}return ie.\u0275fac=function(jt){return new(jt||ie)(T.Y36(s,12),T.Y36(T.sBO),T.Y36(n.A8))},ie.\u0275dir=T.lG2({type:ie,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[T._Bn([{provide:s,useValue:void 0}])]}),ie})(),B=(()=>{class ie{}return ie.\u0275fac=function(jt){return new(jt||ie)},ie.\u0275mod=T.oAB({type:ie}),ie.\u0275inj=T.cJS({}),ie})();var Z=m(47429),ot=m(69808),et=m(90508),Tt=m(15664),Pt=m(71884),pt=m(68675),It=m(39300),Ht=m(95698),Jt=m(91159),Ct=m(76360),bt=m(60515),st=m(56451),gt=m(41777);const lt=["body"];function Bt(ie,St){}const Dt=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],Et=["mat-expansion-panel-header","*","mat-action-row"];function ut(ie,St){if(1&ie&&T._UZ(0,"span",2),2&ie){const jt=T.oxw();T.Q6J("@indicatorRotate",jt._getExpandedState())}}const rt=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],fe=["mat-panel-title","mat-panel-description","*"],Mt=new T.OlP("MAT_ACCORDION"),Nt="225ms cubic-bezier(0.4,0.0,0.2,1)",ge={indicatorRotate:(0,gt.X$)("indicatorRotate",[(0,gt.SB)("collapsed, void",(0,gt.oB)({transform:"rotate(0deg)"})),(0,gt.SB)("expanded",(0,gt.oB)({transform:"rotate(180deg)"})),(0,gt.eR)("expanded <=> collapsed, void => collapsed",(0,gt.jt)(Nt))]),bodyExpansion:(0,gt.X$)("bodyExpansion",[(0,gt.SB)("collapsed, void",(0,gt.oB)({height:"0px",visibility:"hidden"})),(0,gt.SB)("expanded",(0,gt.oB)({height:"*",visibility:"visible"})),(0,gt.eR)("expanded <=> collapsed, void => collapsed",(0,gt.jt)(Nt))])};let ve=(()=>{class ie{constructor(jt){this._template=jt}}return ie.\u0275fac=function(jt){return new(jt||ie)(T.Y36(T.Rgc))},ie.\u0275dir=T.lG2({type:ie,selectors:[["ng-template","matExpansionPanelContent",""]]}),ie})(),pe=0;const He=new T.OlP("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let ke=(()=>{class ie extends x{constructor(jt,Ce,ri,Te,te,ne,Oe){super(jt,Ce,ri),this._viewContainerRef=Te,this._animationMode=ne,this._hideToggle=!1,this.afterExpand=new T.vpe,this.afterCollapse=new T.vpe,this._inputChanges=new e.x,this._headerId="mat-expansion-panel-header-"+pe++,this._bodyAnimationDone=new e.x,this.accordion=jt,this._document=te,this._bodyAnimationDone.pipe((0,Pt.x)((re,me)=>re.fromState===me.fromState&&re.toState===me.toState)).subscribe(re=>{"void"!==re.fromState&&("expanded"===re.toState?this.afterExpand.emit():"collapsed"===re.toState&&this.afterCollapse.emit())}),Oe&&(this.hideToggle=Oe.hideToggle)}get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(jt){this._hideToggle=(0,_.Ig)(jt)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(jt){this._togglePosition=jt}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this.opened.pipe((0,pt.O)(null),(0,It.h)(()=>this.expanded&&!this._portal),(0,Ht.q)(1)).subscribe(()=>{this._portal=new Z.UE(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(jt){this._inputChanges.next(jt)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const jt=this._document.activeElement,Ce=this._body.nativeElement;return jt===Ce||Ce.contains(jt)}return!1}}return ie.\u0275fac=function(jt){return new(jt||ie)(T.Y36(Mt,12),T.Y36(T.sBO),T.Y36(n.A8),T.Y36(T.s_b),T.Y36(ot.K0),T.Y36(Ct.Qb,8),T.Y36(He,8))},ie.\u0275cmp=T.Xpm({type:ie,selectors:[["mat-expansion-panel"]],contentQueries:function(jt,Ce,ri){if(1&jt&&T.Suo(ri,ve,5),2&jt){let Te;T.iGM(Te=T.CRH())&&(Ce._lazyContent=Te.first)}},viewQuery:function(jt,Ce){if(1&jt&&T.Gf(lt,5),2&jt){let ri;T.iGM(ri=T.CRH())&&(Ce._body=ri.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(jt,Ce){2&jt&&T.ekj("mat-expanded",Ce.expanded)("_mat-animation-noopable","NoopAnimations"===Ce._animationMode)("mat-expansion-panel-spacing",Ce._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[T._Bn([{provide:Mt,useValue:void 0}]),T.qOj,T.TTD],ngContentSelectors:Et,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(jt,Ce){1&jt&&(T.F$t(Dt),T.Hsn(0),T.TgZ(1,"div",0,1),T.NdJ("@bodyExpansion.done",function(Te){return Ce._bodyAnimationDone.next(Te)}),T.TgZ(3,"div",2),T.Hsn(4,1),T.YNc(5,Bt,0,0,"ng-template",3),T.qZA(),T.Hsn(6,2),T.qZA()),2&jt&&(T.xp6(1),T.Q6J("@bodyExpansion",Ce._getExpandedState())("id",Ce.id),T.uIk("aria-labelledby",Ce._headerId),T.xp6(4),T.Q6J("cdkPortalOutlet",Ce._portal))},directives:[Z.Pl],styles:[".mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row button.mat-button-base,.mat-action-row button.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row button.mat-button-base,[dir=rtl] .mat-action-row button.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[ge.bodyExpansion]},changeDetection:0}),ie})();class Di{}const $e=(0,et.sb)(Di);let Le=(()=>{class ie extends $e{constructor(jt,Ce,ri,Te,te,ne,Oe){super(),this.panel=jt,this._element=Ce,this._focusMonitor=ri,this._changeDetectorRef=Te,this._animationMode=ne,this._parentChangeSubscription=t.w0.EMPTY;const re=jt.accordion?jt.accordion._stateChanges.pipe((0,It.h)(me=>!(!me.hideToggle&&!me.togglePosition))):bt.E;this.tabIndex=parseInt(Oe||"")||0,this._parentChangeSubscription=(0,st.T)(jt.opened,jt.closed,re,jt._inputChanges.pipe((0,It.h)(me=>!!(me.hideToggle||me.disabled||me.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),jt.closed.pipe((0,It.h)(()=>jt._containsFocus())).subscribe(()=>ri.focusVia(Ce,"program")),te&&(this.expandedHeight=te.expandedHeight,this.collapsedHeight=te.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const jt=this._isExpanded();return jt&&this.expandedHeight?this.expandedHeight:!jt&&this.collapsedHeight?this.collapsedHeight:null}_keydown(jt){switch(jt.keyCode){case Jt.L_:case Jt.K5:(0,Jt.Vb)(jt)||(jt.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(jt))}}focus(jt,Ce){jt?this._focusMonitor.focusVia(this._element,jt,Ce):this._element.nativeElement.focus(Ce)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(jt=>{jt&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return ie.\u0275fac=function(jt){return new(jt||ie)(T.Y36(ke,1),T.Y36(T.SBq),T.Y36(Tt.tE),T.Y36(T.sBO),T.Y36(He,8),T.Y36(Ct.Qb,8),T.$8M("tabindex"))},ie.\u0275cmp=T.Xpm({type:ie,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(jt,Ce){1&jt&&T.NdJ("click",function(){return Ce._toggle()})("keydown",function(Te){return Ce._keydown(Te)}),2&jt&&(T.uIk("id",Ce.panel._headerId)("tabindex",Ce.tabIndex)("aria-controls",Ce._getPanelId())("aria-expanded",Ce._isExpanded())("aria-disabled",Ce.panel.disabled),T.Udp("height",Ce._getHeaderHeight()),T.ekj("mat-expanded",Ce._isExpanded())("mat-expansion-toggle-indicator-after","after"===Ce._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===Ce._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===Ce._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[T.qOj],ngContentSelectors:fe,decls:5,vars:1,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(jt,Ce){1&jt&&(T.F$t(rt),T.TgZ(0,"span",0),T.Hsn(1),T.Hsn(2,1),T.Hsn(3,2),T.qZA(),T.YNc(4,ut,1,1,"span",1)),2&jt&&(T.xp6(4),T.Q6J("ngIf",Ce._showToggle()))},directives:[ot.O5],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;margin-right:16px}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-keyboard-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-program-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:hover:not([aria-disabled=true])::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;border:3px solid;border-radius:4px;content:""}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}\n'],encapsulation:2,data:{animation:[ge.indicatorRotate]},changeDetection:0}),ie})(),pi=(()=>{class ie{}return ie.\u0275fac=function(jt){return new(jt||ie)},ie.\u0275dir=T.lG2({type:ie,selectors:[["mat-panel-description"]],hostAttrs:[1,"mat-expansion-panel-header-description"]}),ie})(),Gt=(()=>{class ie{}return ie.\u0275fac=function(jt){return new(jt||ie)},ie.\u0275dir=T.lG2({type:ie,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]}),ie})(),Se=(()=>{class ie extends u{constructor(){super(...arguments),this._ownHeaders=new T.n_E,this._hideToggle=!1,this.displayMode="default",this.togglePosition="after"}get hideToggle(){return this._hideToggle}set hideToggle(jt){this._hideToggle=(0,_.Ig)(jt)}ngAfterContentInit(){this._headers.changes.pipe((0,pt.O)(this._headers)).subscribe(jt=>{this._ownHeaders.reset(jt.filter(Ce=>Ce.panel.accordion===this)),this._ownHeaders.notifyOnChanges()}),this._keyManager=new Tt.Em(this._ownHeaders).withWrap().withHomeAndEnd()}_handleHeaderKeydown(jt){this._keyManager.onKeydown(jt)}_handleHeaderFocus(jt){this._keyManager.updateActiveItem(jt)}ngOnDestroy(){super.ngOnDestroy(),this._ownHeaders.destroy()}}return ie.\u0275fac=function(){let St;return function(Ce){return(St||(St=T.n5z(ie)))(Ce||ie)}}(),ie.\u0275dir=T.lG2({type:ie,selectors:[["mat-accordion"]],contentQueries:function(jt,Ce,ri){if(1&jt&&T.Suo(ri,Le,5),2&jt){let Te;T.iGM(Te=T.CRH())&&(Ce._headers=Te)}},hostAttrs:[1,"mat-accordion"],hostVars:2,hostBindings:function(jt,Ce){2&jt&&T.ekj("mat-accordion-multi",Ce.multi)},inputs:{multi:"multi",hideToggle:"hideToggle",displayMode:"displayMode",togglePosition:"togglePosition"},exportAs:["matAccordion"],features:[T._Bn([{provide:Mt,useExisting:ie}]),T.qOj]}),ie})(),Zt=(()=>{class ie{}return ie.\u0275fac=function(jt){return new(jt||ie)},ie.\u0275mod=T.oAB({type:ie}),ie.\u0275inj=T.cJS({imports:[[ot.ez,et.BQ,B,Z.eL]]}),ie})()},67322:(U,$,m)=>{"use strict";m.d($,{G_:()=>ne,KE:()=>Oe,Eo:()=>pe,lN:()=>re,hX:()=>pi});var T=m(17144),_=m(69808),e=m(5e3),t=m(90508),n=m(63191),r=m(77579),s=m(56451),u=m(54968),b=m(68675),x=m(82722),B=m(95698),Z=m(41777),ot=m(76360),et=m(50226),Tt=m(70925);const Pt=["connectionContainer"],pt=["inputContainer"],It=["label"];function Ht(me,ye){1&me&&(e.ynx(0),e.TgZ(1,"div",14),e._UZ(2,"div",15),e._UZ(3,"div",16),e._UZ(4,"div",17),e.qZA(),e.TgZ(5,"div",18),e._UZ(6,"div",15),e._UZ(7,"div",16),e._UZ(8,"div",17),e.qZA(),e.BQk())}function Jt(me,ye){if(1&me){const Qt=e.EpF();e.TgZ(0,"div",19),e.NdJ("cdkObserveContent",function(){return e.CHM(Qt),e.oxw().updateOutlineGap()}),e.Hsn(1,1),e.qZA()}if(2&me){const Qt=e.oxw();e.Q6J("cdkObserveContentDisabled","outline"!=Qt.appearance)}}function Ct(me,ye){if(1&me&&(e.ynx(0),e.Hsn(1,2),e.TgZ(2,"span"),e._uU(3),e.qZA(),e.BQk()),2&me){const Qt=e.oxw(2);e.xp6(3),e.Oqu(Qt._control.placeholder)}}function bt(me,ye){1&me&&e.Hsn(0,3,["*ngSwitchCase","true"])}function st(me,ye){1&me&&(e.TgZ(0,"span",23),e._uU(1," *"),e.qZA())}function gt(me,ye){if(1&me){const Qt=e.EpF();e.TgZ(0,"label",20,21),e.NdJ("cdkObserveContent",function(){return e.CHM(Qt),e.oxw().updateOutlineGap()}),e.YNc(2,Ct,4,1,"ng-container",12),e.YNc(3,bt,1,0,"ng-content",12),e.YNc(4,st,2,0,"span",22),e.qZA()}if(2&me){const Qt=e.oxw();e.ekj("mat-empty",Qt._control.empty&&!Qt._shouldAlwaysFloat())("mat-form-field-empty",Qt._control.empty&&!Qt._shouldAlwaysFloat())("mat-accent","accent"==Qt.color)("mat-warn","warn"==Qt.color),e.Q6J("cdkObserveContentDisabled","outline"!=Qt.appearance)("id",Qt._labelId)("ngSwitch",Qt._hasLabel()),e.uIk("for",Qt._control.id)("aria-owns",Qt._control.id),e.xp6(2),e.Q6J("ngSwitchCase",!1),e.xp6(1),e.Q6J("ngSwitchCase",!0),e.xp6(1),e.Q6J("ngIf",!Qt.hideRequiredMarker&&Qt._control.required&&!Qt._control.disabled)}}function lt(me,ye){1&me&&(e.TgZ(0,"div",24),e.Hsn(1,4),e.qZA())}function Bt(me,ye){if(1&me&&(e.TgZ(0,"div",25),e._UZ(1,"span",26),e.qZA()),2&me){const Qt=e.oxw();e.xp6(1),e.ekj("mat-accent","accent"==Qt.color)("mat-warn","warn"==Qt.color)}}function Dt(me,ye){if(1&me&&(e.TgZ(0,"div"),e.Hsn(1,5),e.qZA()),2&me){const Qt=e.oxw();e.Q6J("@transitionMessages",Qt._subscriptAnimationState)}}function Et(me,ye){if(1&me&&(e.TgZ(0,"div",30),e._uU(1),e.qZA()),2&me){const Qt=e.oxw(2);e.Q6J("id",Qt._hintLabelId),e.xp6(1),e.Oqu(Qt.hintLabel)}}function ut(me,ye){if(1&me&&(e.TgZ(0,"div",27),e.YNc(1,Et,2,2,"div",28),e.Hsn(2,6),e._UZ(3,"div",29),e.Hsn(4,7),e.qZA()),2&me){const Qt=e.oxw();e.Q6J("@transitionMessages",Qt._subscriptAnimationState),e.xp6(1),e.Q6J("ngIf",Qt.hintLabel)}}const rt=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],fe=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],Nt=new e.OlP("MatError"),ve={transitionMessages:(0,Z.X$)("transitionMessages",[(0,Z.SB)("enter",(0,Z.oB)({opacity:1,transform:"translateY(0%)"})),(0,Z.eR)("void => enter",[(0,Z.oB)({opacity:0,transform:"translateY(-5px)"}),(0,Z.jt)("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let pe=(()=>{class me{}return me.\u0275fac=function(Qt){return new(Qt||me)},me.\u0275dir=e.lG2({type:me}),me})();const $e=new e.OlP("MatHint");let pi=(()=>{class me{}return me.\u0275fac=function(Qt){return new(Qt||me)},me.\u0275dir=e.lG2({type:me,selectors:[["mat-label"]]}),me})(),Gt=(()=>{class me{}return me.\u0275fac=function(Qt){return new(Qt||me)},me.\u0275dir=e.lG2({type:me,selectors:[["mat-placeholder"]]}),me})();const Se=new e.OlP("MatPrefix"),ie=new e.OlP("MatSuffix");let jt=0;const Te=(0,t.pj)(class{constructor(me){this._elementRef=me}},"primary"),te=new e.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),ne=new e.OlP("MatFormField");let Oe=(()=>{class me extends Te{constructor(Qt,de,ti,ni,Pi,wi,yi){super(Qt),this._changeDetectorRef=de,this._dir=ti,this._defaults=ni,this._platform=Pi,this._ngZone=wi,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new r.x,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+jt++,this._labelId="mat-form-field-label-"+jt++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==yi,this.appearance=ni&&ni.appearance?ni.appearance:"legacy",this._hideRequiredMarker=!(!ni||null==ni.hideRequiredMarker)&&ni.hideRequiredMarker}get appearance(){return this._appearance}set appearance(Qt){const de=this._appearance;this._appearance=Qt||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&de!==Qt&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(Qt){this._hideRequiredMarker=(0,n.Ig)(Qt)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(Qt){this._hintLabel=Qt,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(Qt){Qt!==this._floatLabel&&(this._floatLabel=Qt||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(Qt){this._explicitFormFieldControl=Qt}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const Qt=this._control;Qt.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${Qt.controlType}`),Qt.stateChanges.pipe((0,b.O)(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),Qt.ngControl&&Qt.ngControl.valueChanges&&Qt.ngControl.valueChanges.pipe((0,x.R)(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,x.R)(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,s.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe((0,b.O)(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe((0,b.O)(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe((0,x.R)(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(Qt){const de=this._control?this._control.ngControl:null;return de&&de[Qt]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,(0,u.R)(this._label.nativeElement,"transitionend").pipe((0,B.q)(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let Qt=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&Qt.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const de=this._hintChildren?this._hintChildren.find(ni=>"start"===ni.align):null,ti=this._hintChildren?this._hintChildren.find(ni=>"end"===ni.align):null;de?Qt.push(de.id):this._hintLabel&&Qt.push(this._hintLabelId),ti&&Qt.push(ti.id)}else this._errorChildren&&Qt.push(...this._errorChildren.map(de=>de.id));this._control.setDescribedByIds(Qt)}}_validateControlChild(){}updateOutlineGap(){const Qt=this._label?this._label.nativeElement:null;if(!("outline"===this.appearance&&Qt&&Qt.children.length&&Qt.textContent.trim()&&this._platform.isBrowser))return;if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let de=0,ti=0;const ni=this._connectionContainerRef.nativeElement,Pi=ni.querySelectorAll(".mat-form-field-outline-start"),wi=ni.querySelectorAll(".mat-form-field-outline-gap");if(this._label&&this._label.nativeElement.children.length){const yi=ni.getBoundingClientRect();if(0===yi.width&&0===yi.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const dn=this._getStartEnd(yi),mi=Qt.children,Zi=this._getStartEnd(mi[0].getBoundingClientRect());let Re=0;for(let xe=0;xe<mi.length;xe++)Re+=mi[xe].offsetWidth;de=Math.abs(Zi-dn)-5,ti=Re>0?.75*Re+10:0}for(let yi=0;yi<Pi.length;yi++)Pi[yi].style.width=`${de}px`;for(let yi=0;yi<wi.length;yi++)wi[yi].style.width=`${ti}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(Qt){return this._dir&&"rtl"===this._dir.value?Qt.right:Qt.left}_isAttachedToDOM(){const Qt=this._elementRef.nativeElement;if(Qt.getRootNode){const de=Qt.getRootNode();return de&&de!==Qt}return document.documentElement.contains(Qt)}}return me.\u0275fac=function(Qt){return new(Qt||me)(e.Y36(e.SBq),e.Y36(e.sBO),e.Y36(et.Is,8),e.Y36(te,8),e.Y36(Tt.t4),e.Y36(e.R0b),e.Y36(ot.Qb,8))},me.\u0275cmp=e.Xpm({type:me,selectors:[["mat-form-field"]],contentQueries:function(Qt,de,ti){if(1&Qt&&(e.Suo(ti,pe,5),e.Suo(ti,pe,7),e.Suo(ti,pi,5),e.Suo(ti,pi,7),e.Suo(ti,Gt,5),e.Suo(ti,Nt,5),e.Suo(ti,$e,5),e.Suo(ti,Se,5),e.Suo(ti,ie,5)),2&Qt){let ni;e.iGM(ni=e.CRH())&&(de._controlNonStatic=ni.first),e.iGM(ni=e.CRH())&&(de._controlStatic=ni.first),e.iGM(ni=e.CRH())&&(de._labelChildNonStatic=ni.first),e.iGM(ni=e.CRH())&&(de._labelChildStatic=ni.first),e.iGM(ni=e.CRH())&&(de._placeholderChild=ni.first),e.iGM(ni=e.CRH())&&(de._errorChildren=ni),e.iGM(ni=e.CRH())&&(de._hintChildren=ni),e.iGM(ni=e.CRH())&&(de._prefixChildren=ni),e.iGM(ni=e.CRH())&&(de._suffixChildren=ni)}},viewQuery:function(Qt,de){if(1&Qt&&(e.Gf(Pt,7),e.Gf(pt,5),e.Gf(It,5)),2&Qt){let ti;e.iGM(ti=e.CRH())&&(de._connectionContainerRef=ti.first),e.iGM(ti=e.CRH())&&(de._inputContainerRef=ti.first),e.iGM(ti=e.CRH())&&(de._label=ti.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(Qt,de){2&Qt&&e.ekj("mat-form-field-appearance-standard","standard"==de.appearance)("mat-form-field-appearance-fill","fill"==de.appearance)("mat-form-field-appearance-outline","outline"==de.appearance)("mat-form-field-appearance-legacy","legacy"==de.appearance)("mat-form-field-invalid",de._control.errorState)("mat-form-field-can-float",de._canLabelFloat())("mat-form-field-should-float",de._shouldLabelFloat())("mat-form-field-has-label",de._hasFloatingLabel())("mat-form-field-hide-placeholder",de._hideControlPlaceholder())("mat-form-field-disabled",de._control.disabled)("mat-form-field-autofilled",de._control.autofilled)("mat-focused",de._control.focused)("ng-untouched",de._shouldForward("untouched"))("ng-touched",de._shouldForward("touched"))("ng-pristine",de._shouldForward("pristine"))("ng-dirty",de._shouldForward("dirty"))("ng-valid",de._shouldForward("valid"))("ng-invalid",de._shouldForward("invalid"))("ng-pending",de._shouldForward("pending"))("_mat-animation-noopable",!de._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[e._Bn([{provide:ne,useExisting:me}]),e.qOj],ngContentSelectors:fe,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(Qt,de){1&Qt&&(e.F$t(rt),e.TgZ(0,"div",0),e.TgZ(1,"div",1,2),e.NdJ("click",function(ni){return de._control.onContainerClick&&de._control.onContainerClick(ni)}),e.YNc(3,Ht,9,0,"ng-container",3),e.YNc(4,Jt,2,1,"div",4),e.TgZ(5,"div",5,6),e.Hsn(7),e.TgZ(8,"span",7),e.YNc(9,gt,5,16,"label",8),e.qZA(),e.qZA(),e.YNc(10,lt,2,0,"div",9),e.qZA(),e.YNc(11,Bt,2,4,"div",10),e.TgZ(12,"div",11),e.YNc(13,Dt,2,1,"div",12),e.YNc(14,ut,5,2,"div",13),e.qZA(),e.qZA()),2&Qt&&(e.xp6(3),e.Q6J("ngIf","outline"==de.appearance),e.xp6(1),e.Q6J("ngIf",de._prefixChildren.length),e.xp6(5),e.Q6J("ngIf",de._hasFloatingLabel()),e.xp6(1),e.Q6J("ngIf",de._suffixChildren.length),e.xp6(1),e.Q6J("ngIf","outline"!=de.appearance),e.xp6(1),e.Q6J("ngSwitch",de._getDisplayedMessages()),e.xp6(1),e.Q6J("ngSwitchCase","error"),e.xp6(1),e.Q6J("ngSwitchCase","hint"))},directives:[_.O5,_.RF,_.n9,T.wD],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[ve.transitionMessages]},changeDetection:0}),me})(),re=(()=>{class me{}return me.\u0275fac=function(Qt){return new(Qt||me)},me.\u0275mod=e.oAB({type:me}),me.\u0275inj=e.cJS({imports:[[_.ez,t.BQ,T.Q8],t.BQ]}),me})()},43954:(U,$,m)=>{"use strict";m.d($,{Il:()=>lt,N6:()=>Bt,DX:()=>Z,jo:()=>Tt,$H:()=>ot});var T=m(5e3),_=m(90508),e=m(63191),t=m(50226);const n=["*"],r=[[["","mat-grid-avatar",""],["","matGridAvatar",""]],[["","mat-line",""],["","matLine",""]],"*"],s=["[mat-grid-avatar], [matGridAvatar]","[mat-line], [matLine]","*"];class b{constructor(){this.columnIndex=0,this.rowIndex=0}get rowCount(){return this.rowIndex+1}get rowspan(){const ut=Math.max(...this.tracker);return ut>1?this.rowCount+ut-1:this.rowCount}update(ut,rt){this.columnIndex=0,this.rowIndex=0,this.tracker=new Array(ut),this.tracker.fill(0,0,this.tracker.length),this.positions=rt.map(fe=>this._trackTile(fe))}_trackTile(ut){const rt=this._findMatchingGap(ut.colspan);return this._markTilePosition(rt,ut),this.columnIndex=rt+ut.colspan,new x(this.rowIndex,rt)}_findMatchingGap(ut){let rt=-1,fe=-1;do{this.columnIndex+ut>this.tracker.length?(this._nextRow(),rt=this.tracker.indexOf(0,this.columnIndex),fe=this._findGapEndIndex(rt)):(rt=this.tracker.indexOf(0,this.columnIndex),-1!=rt?(fe=this._findGapEndIndex(rt),this.columnIndex=rt+1):(this._nextRow(),rt=this.tracker.indexOf(0,this.columnIndex),fe=this._findGapEndIndex(rt)))}while(fe-rt<ut||0==fe);return Math.max(rt,0)}_nextRow(){this.columnIndex=0,this.rowIndex++;for(let ut=0;ut<this.tracker.length;ut++)this.tracker[ut]=Math.max(0,this.tracker[ut]-1)}_findGapEndIndex(ut){for(let rt=ut+1;rt<this.tracker.length;rt++)if(0!=this.tracker[rt])return rt;return this.tracker.length}_markTilePosition(ut,rt){for(let fe=0;fe<rt.colspan;fe++)this.tracker[ut+fe]=rt.rowspan}}class x{constructor(ut,rt){this.row=ut,this.col=rt}}const B=new T.OlP("MAT_GRID_LIST");let Z=(()=>{class Et{constructor(rt,fe){this._element=rt,this._gridList=fe,this._rowspan=1,this._colspan=1}get rowspan(){return this._rowspan}set rowspan(rt){this._rowspan=Math.round((0,e.su)(rt))}get colspan(){return this._colspan}set colspan(rt){this._colspan=Math.round((0,e.su)(rt))}_setStyle(rt,fe){this._element.nativeElement.style[rt]=fe}}return Et.\u0275fac=function(rt){return new(rt||Et)(T.Y36(T.SBq),T.Y36(B,8))},Et.\u0275cmp=T.Xpm({type:Et,selectors:[["mat-grid-tile"]],hostAttrs:[1,"mat-grid-tile"],hostVars:2,hostBindings:function(rt,fe){2&rt&&T.uIk("rowspan",fe.rowspan)("colspan",fe.colspan)},inputs:{rowspan:"rowspan",colspan:"colspan"},exportAs:["matGridTile"],ngContentSelectors:n,decls:2,vars:0,consts:[[1,"mat-grid-tile-content"]],template:function(rt,fe){1&rt&&(T.F$t(),T.TgZ(0,"div",0),T.Hsn(1),T.qZA())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}\n"],encapsulation:2,changeDetection:0}),Et})(),ot=(()=>{class Et{constructor(rt){this._element=rt}ngAfterContentInit(){(0,_.E0)(this._lines,this._element)}}return Et.\u0275fac=function(rt){return new(rt||Et)(T.Y36(T.SBq))},Et.\u0275cmp=T.Xpm({type:Et,selectors:[["mat-grid-tile-header"],["mat-grid-tile-footer"]],contentQueries:function(rt,fe,Mt){if(1&rt&&T.Suo(Mt,_.X2,5),2&rt){let Nt;T.iGM(Nt=T.CRH())&&(fe._lines=Nt)}},ngContentSelectors:s,decls:4,vars:0,consts:[[1,"mat-grid-list-text"]],template:function(rt,fe){1&rt&&(T.F$t(r),T.Hsn(0),T.TgZ(1,"div",0),T.Hsn(2,1),T.qZA(),T.Hsn(3,2))},encapsulation:2,changeDetection:0}),Et})(),Tt=(()=>{class Et{}return Et.\u0275fac=function(rt){return new(rt||Et)},Et.\u0275dir=T.lG2({type:Et,selectors:[["mat-grid-tile-header"]],hostAttrs:[1,"mat-grid-tile-header"]}),Et})();const pt=/^-?\d+((\.\d+)?[A-Za-z%$]?)+$/;class It{constructor(){this._rows=0,this._rowspan=0}init(ut,rt,fe,Mt){this._gutterSize=st(ut),this._rows=rt.rowCount,this._rowspan=rt.rowspan,this._cols=fe,this._direction=Mt}getBaseTileSize(ut,rt){return`(${ut}% - (${this._gutterSize} * ${rt}))`}getTilePosition(ut,rt){return 0===rt?"0":bt(`(${ut} + ${this._gutterSize}) * ${rt}`)}getTileSize(ut,rt){return`(${ut} * ${rt}) + (${rt-1} * ${this._gutterSize})`}setStyle(ut,rt,fe){let Mt=100/this._cols,Nt=(this._cols-1)/this._cols;this.setColStyles(ut,fe,Mt,Nt),this.setRowStyles(ut,rt,Mt,Nt)}setColStyles(ut,rt,fe,Mt){let Nt=this.getBaseTileSize(fe,Mt);ut._setStyle("rtl"===this._direction?"right":"left",this.getTilePosition(Nt,rt)),ut._setStyle("width",bt(this.getTileSize(Nt,ut.colspan)))}getGutterSpan(){return`${this._gutterSize} * (${this._rowspan} - 1)`}getTileSpan(ut){return`${this._rowspan} * ${this.getTileSize(ut,1)}`}getComputedHeight(){return null}}class Ht extends It{constructor(ut){super(),this.fixedRowHeight=ut}init(ut,rt,fe,Mt){super.init(ut,rt,fe,Mt),this.fixedRowHeight=st(this.fixedRowHeight),pt.test(this.fixedRowHeight)}setRowStyles(ut,rt){ut._setStyle("top",this.getTilePosition(this.fixedRowHeight,rt)),ut._setStyle("height",bt(this.getTileSize(this.fixedRowHeight,ut.rowspan)))}getComputedHeight(){return["height",bt(`${this.getTileSpan(this.fixedRowHeight)} + ${this.getGutterSpan()}`)]}reset(ut){ut._setListStyle(["height",null]),ut._tiles&&ut._tiles.forEach(rt=>{rt._setStyle("top",null),rt._setStyle("height",null)})}}class Jt extends It{constructor(ut){super(),this._parseRatio(ut)}setRowStyles(ut,rt,fe,Mt){this.baseTileHeight=this.getBaseTileSize(fe/this.rowHeightRatio,Mt),ut._setStyle("marginTop",this.getTilePosition(this.baseTileHeight,rt)),ut._setStyle("paddingTop",bt(this.getTileSize(this.baseTileHeight,ut.rowspan)))}getComputedHeight(){return["paddingBottom",bt(`${this.getTileSpan(this.baseTileHeight)} + ${this.getGutterSpan()}`)]}reset(ut){ut._setListStyle(["paddingBottom",null]),ut._tiles.forEach(rt=>{rt._setStyle("marginTop",null),rt._setStyle("paddingTop",null)})}_parseRatio(ut){const rt=ut.split(":");this.rowHeightRatio=parseFloat(rt[0])/parseFloat(rt[1])}}class Ct extends It{setRowStyles(ut,rt){let Nt=this.getBaseTileSize(100/this._rowspan,(this._rows-1)/this._rows);ut._setStyle("top",this.getTilePosition(Nt,rt)),ut._setStyle("height",bt(this.getTileSize(Nt,ut.rowspan)))}reset(ut){ut._tiles&&ut._tiles.forEach(rt=>{rt._setStyle("top",null),rt._setStyle("height",null)})}}function bt(Et){return`calc(${Et})`}function st(Et){return Et.match(/([A-Za-z%]+)$/)?Et:`${Et}px`}let lt=(()=>{class Et{constructor(rt,fe){this._element=rt,this._dir=fe,this._gutter="1px"}get cols(){return this._cols}set cols(rt){this._cols=Math.max(1,Math.round((0,e.su)(rt)))}get gutterSize(){return this._gutter}set gutterSize(rt){this._gutter=`${null==rt?"":rt}`}get rowHeight(){return this._rowHeight}set rowHeight(rt){const fe=`${null==rt?"":rt}`;fe!==this._rowHeight&&(this._rowHeight=fe,this._setTileStyler(this._rowHeight))}ngOnInit(){this._checkCols(),this._checkRowHeight()}ngAfterContentChecked(){this._layoutTiles()}_checkCols(){}_checkRowHeight(){this._rowHeight||this._setTileStyler("1:1")}_setTileStyler(rt){this._tileStyler&&this._tileStyler.reset(this),this._tileStyler="fit"===rt?new Ct:rt&&rt.indexOf(":")>-1?new Jt(rt):new Ht(rt)}_layoutTiles(){this._tileCoordinator||(this._tileCoordinator=new b);const rt=this._tileCoordinator,fe=this._tiles.filter(Nt=>!Nt._gridList||Nt._gridList===this),Mt=this._dir?this._dir.value:"ltr";this._tileCoordinator.update(this.cols,fe),this._tileStyler.init(this.gutterSize,rt,this.cols,Mt),fe.forEach((Nt,ge)=>{const ve=rt.positions[ge];this._tileStyler.setStyle(Nt,ve.row,ve.col)}),this._setListStyle(this._tileStyler.getComputedHeight())}_setListStyle(rt){rt&&(this._element.nativeElement.style[rt[0]]=rt[1])}}return Et.\u0275fac=function(rt){return new(rt||Et)(T.Y36(T.SBq),T.Y36(t.Is,8))},Et.\u0275cmp=T.Xpm({type:Et,selectors:[["mat-grid-list"]],contentQueries:function(rt,fe,Mt){if(1&rt&&T.Suo(Mt,Z,5),2&rt){let Nt;T.iGM(Nt=T.CRH())&&(fe._tiles=Nt)}},hostAttrs:[1,"mat-grid-list"],hostVars:1,hostBindings:function(rt,fe){2&rt&&T.uIk("cols",fe.cols)},inputs:{cols:"cols",gutterSize:"gutterSize",rowHeight:"rowHeight"},exportAs:["matGridList"],features:[T._Bn([{provide:B,useExisting:Et}])],ngContentSelectors:n,decls:2,vars:0,template:function(rt,fe){1&rt&&(T.F$t(),T.TgZ(0,"div"),T.Hsn(1),T.qZA())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}\n"],encapsulation:2,changeDetection:0}),Et})(),Bt=(()=>{class Et{}return Et.\u0275fac=function(rt){return new(rt||Et)},Et.\u0275mod=T.oAB({type:Et}),Et.\u0275inj=T.cJS({imports:[[_.uc,_.BQ],_.uc,_.BQ]}),Et})()},63874:(U,$,m)=>{"use strict";m.d($,{Hw:()=>Di,Ps:()=>$e});var T=m(5e3),_=m(90508),e=m(63191),t=m(69808),n=m(68306),r=m(30576),u=m(39646),b=m(4128),x=m(50727),B=m(18505),Z=m(54004),ot=m(70262),et=m(28746),Tt=m(13099),Pt=m(95698),pt=m(40520),It=m(22313);const Ht=["*"];let Jt;function bt(Le){var pi;return(null===(pi=function(){if(void 0===Jt&&(Jt=null,"undefined"!=typeof window)){const Le=window;void 0!==Le.trustedTypes&&(Jt=Le.trustedTypes.createPolicy("angular#components",{createHTML:pi=>pi}))}return Jt}())||void 0===pi?void 0:pi.createHTML(Le))||Le}function st(Le){return Error(`Unable to find icon with the name "${Le}"`)}function lt(Le){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${Le}".`)}function Bt(Le){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${Le}".`)}class Dt{constructor(pi,Gt,Se){this.url=pi,this.svgText=Gt,this.options=Se}}let Et=(()=>{class Le{constructor(Gt,Se,Zt,ie){this._httpClient=Gt,this._sanitizer=Se,this._errorHandler=ie,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=Zt}addSvgIcon(Gt,Se,Zt){return this.addSvgIconInNamespace("",Gt,Se,Zt)}addSvgIconLiteral(Gt,Se,Zt){return this.addSvgIconLiteralInNamespace("",Gt,Se,Zt)}addSvgIconInNamespace(Gt,Se,Zt,ie){return this._addSvgIconConfig(Gt,Se,new Dt(Zt,null,ie))}addSvgIconResolver(Gt){return this._resolvers.push(Gt),this}addSvgIconLiteralInNamespace(Gt,Se,Zt,ie){const St=this._sanitizer.sanitize(T.q3G.HTML,Zt);if(!St)throw Bt(Zt);const jt=bt(St);return this._addSvgIconConfig(Gt,Se,new Dt("",jt,ie))}addSvgIconSet(Gt,Se){return this.addSvgIconSetInNamespace("",Gt,Se)}addSvgIconSetLiteral(Gt,Se){return this.addSvgIconSetLiteralInNamespace("",Gt,Se)}addSvgIconSetInNamespace(Gt,Se,Zt){return this._addSvgIconSetConfig(Gt,new Dt(Se,null,Zt))}addSvgIconSetLiteralInNamespace(Gt,Se,Zt){const ie=this._sanitizer.sanitize(T.q3G.HTML,Se);if(!ie)throw Bt(Se);const St=bt(ie);return this._addSvgIconSetConfig(Gt,new Dt("",St,Zt))}registerFontClassAlias(Gt,Se=Gt){return this._fontCssClassesByAlias.set(Gt,Se),this}classNameForFontAlias(Gt){return this._fontCssClassesByAlias.get(Gt)||Gt}setDefaultFontSetClass(Gt){return this._defaultFontSetClass=Gt,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(Gt){const Se=this._sanitizer.sanitize(T.q3G.RESOURCE_URL,Gt);if(!Se)throw lt(Gt);const Zt=this._cachedIconsByUrl.get(Se);return Zt?(0,u.of)(fe(Zt)):this._loadSvgIconFromConfig(new Dt(Gt,null)).pipe((0,B.b)(ie=>this._cachedIconsByUrl.set(Se,ie)),(0,Z.U)(ie=>fe(ie)))}getNamedSvgIcon(Gt,Se=""){const Zt=Mt(Se,Gt);let ie=this._svgIconConfigs.get(Zt);if(ie)return this._getSvgFromConfig(ie);if(ie=this._getIconConfigFromResolvers(Se,Gt),ie)return this._svgIconConfigs.set(Zt,ie),this._getSvgFromConfig(ie);const St=this._iconSetConfigs.get(Se);return St?this._getSvgFromIconSetConfigs(Gt,St):function(Le,pi){const Gt=(0,r.m)(Le)?Le:()=>Le,Se=Zt=>Zt.error(Gt());return new n.y(Se)}(st(Zt))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(Gt){return Gt.svgText?(0,u.of)(fe(this._svgElementFromConfig(Gt))):this._loadSvgIconFromConfig(Gt).pipe((0,Z.U)(Se=>fe(Se)))}_getSvgFromIconSetConfigs(Gt,Se){const Zt=this._extractIconWithNameFromAnySet(Gt,Se);if(Zt)return(0,u.of)(Zt);const ie=Se.filter(St=>!St.svgText).map(St=>this._loadSvgIconSetFromConfig(St).pipe((0,ot.K)(jt=>{const ri=`Loading icon set URL: ${this._sanitizer.sanitize(T.q3G.RESOURCE_URL,St.url)} failed: ${jt.message}`;return this._errorHandler.handleError(new Error(ri)),(0,u.of)(null)})));return(0,b.D)(ie).pipe((0,Z.U)(()=>{const St=this._extractIconWithNameFromAnySet(Gt,Se);if(!St)throw st(Gt);return St}))}_extractIconWithNameFromAnySet(Gt,Se){for(let Zt=Se.length-1;Zt>=0;Zt--){const ie=Se[Zt];if(ie.svgText&&ie.svgText.toString().indexOf(Gt)>-1){const St=this._svgElementFromConfig(ie),jt=this._extractSvgIconFromSet(St,Gt,ie.options);if(jt)return jt}}return null}_loadSvgIconFromConfig(Gt){return this._fetchIcon(Gt).pipe((0,B.b)(Se=>Gt.svgText=Se),(0,Z.U)(()=>this._svgElementFromConfig(Gt)))}_loadSvgIconSetFromConfig(Gt){return Gt.svgText?(0,u.of)(null):this._fetchIcon(Gt).pipe((0,B.b)(Se=>Gt.svgText=Se))}_extractSvgIconFromSet(Gt,Se,Zt){const ie=Gt.querySelector(`[id="${Se}"]`);if(!ie)return null;const St=ie.cloneNode(!0);if(St.removeAttribute("id"),"svg"===St.nodeName.toLowerCase())return this._setSvgAttributes(St,Zt);if("symbol"===St.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(St),Zt);const jt=this._svgElementFromString(bt("<svg></svg>"));return jt.appendChild(St),this._setSvgAttributes(jt,Zt)}_svgElementFromString(Gt){const Se=this._document.createElement("DIV");Se.innerHTML=Gt;const Zt=Se.querySelector("svg");if(!Zt)throw Error("<svg> tag not found");return Zt}_toSvgElement(Gt){const Se=this._svgElementFromString(bt("<svg></svg>")),Zt=Gt.attributes;for(let ie=0;ie<Zt.length;ie++){const{name:St,value:jt}=Zt[ie];"id"!==St&&Se.setAttribute(St,jt)}for(let ie=0;ie<Gt.childNodes.length;ie++)Gt.childNodes[ie].nodeType===this._document.ELEMENT_NODE&&Se.appendChild(Gt.childNodes[ie].cloneNode(!0));return Se}_setSvgAttributes(Gt,Se){return Gt.setAttribute("fit",""),Gt.setAttribute("height","100%"),Gt.setAttribute("width","100%"),Gt.setAttribute("preserveAspectRatio","xMidYMid meet"),Gt.setAttribute("focusable","false"),Se&&Se.viewBox&&Gt.setAttribute("viewBox",Se.viewBox),Gt}_fetchIcon(Gt){var Se;const{url:Zt,options:ie}=Gt,St=null!==(Se=null==ie?void 0:ie.withCredentials)&&void 0!==Se&&Se;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==Zt)throw Error(`Cannot fetch icon from URL "${Zt}".`);const jt=this._sanitizer.sanitize(T.q3G.RESOURCE_URL,Zt);if(!jt)throw lt(Zt);const Ce=this._inProgressUrlFetches.get(jt);if(Ce)return Ce;const ri=this._httpClient.get(jt,{responseType:"text",withCredentials:St}).pipe((0,Z.U)(Te=>bt(Te)),(0,et.x)(()=>this._inProgressUrlFetches.delete(jt)),(0,Tt.B)());return this._inProgressUrlFetches.set(jt,ri),ri}_addSvgIconConfig(Gt,Se,Zt){return this._svgIconConfigs.set(Mt(Gt,Se),Zt),this}_addSvgIconSetConfig(Gt,Se){const Zt=this._iconSetConfigs.get(Gt);return Zt?Zt.push(Se):this._iconSetConfigs.set(Gt,[Se]),this}_svgElementFromConfig(Gt){if(!Gt.svgElement){const Se=this._svgElementFromString(Gt.svgText);this._setSvgAttributes(Se,Gt.options),Gt.svgElement=Se}return Gt.svgElement}_getIconConfigFromResolvers(Gt,Se){for(let Zt=0;Zt<this._resolvers.length;Zt++){const ie=this._resolvers[Zt](Se,Gt);if(ie)return Nt(ie)?new Dt(ie.url,null,ie.options):new Dt(ie,null)}}}return Le.\u0275fac=function(Gt){return new(Gt||Le)(T.LFG(pt.eN,8),T.LFG(It.H7),T.LFG(t.K0,8),T.LFG(T.qLn))},Le.\u0275prov=T.Yz7({token:Le,factory:Le.\u0275fac,providedIn:"root"}),Le})();function fe(Le){return Le.cloneNode(!0)}function Mt(Le,pi){return Le+":"+pi}function Nt(Le){return!(!Le.url||!Le.options)}const ge=(0,_.pj)(class{constructor(Le){this._elementRef=Le}}),ve=new T.OlP("mat-icon-location",{providedIn:"root",factory:function(){const Le=(0,T.f3M)(t.K0),pi=Le?Le.location:null;return{getPathname:()=>pi?pi.pathname+pi.search:""}}}),He=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],ke=He.map(Le=>`[${Le}]`).join(", "),Ze=/^url\(['"]?#(.*?)['"]?\)$/;let Di=(()=>{class Le extends ge{constructor(Gt,Se,Zt,ie,St){super(Gt),this._iconRegistry=Se,this._location=ie,this._errorHandler=St,this._inline=!1,this._currentIconFetch=x.w0.EMPTY,Zt||Gt.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(Gt){this._inline=(0,e.Ig)(Gt)}get svgIcon(){return this._svgIcon}set svgIcon(Gt){Gt!==this._svgIcon&&(Gt?this._updateSvgIcon(Gt):this._svgIcon&&this._clearSvgElement(),this._svgIcon=Gt)}get fontSet(){return this._fontSet}set fontSet(Gt){const Se=this._cleanupFontValue(Gt);Se!==this._fontSet&&(this._fontSet=Se,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(Gt){const Se=this._cleanupFontValue(Gt);Se!==this._fontIcon&&(this._fontIcon=Se,this._updateFontIconClasses())}_splitIconName(Gt){if(!Gt)return["",""];const Se=Gt.split(":");switch(Se.length){case 1:return["",Se[0]];case 2:return Se;default:throw Error(`Invalid icon name: "${Gt}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const Gt=this._elementsWithExternalReferences;if(Gt&&Gt.size){const Se=this._location.getPathname();Se!==this._previousPath&&(this._previousPath=Se,this._prependPathToReferences(Se))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(Gt){this._clearSvgElement();const Se=Gt.querySelectorAll("style");for(let ie=0;ie<Se.length;ie++)Se[ie].textContent+=" ";const Zt=this._location.getPathname();this._previousPath=Zt,this._cacheChildrenWithExternalReferences(Gt),this._prependPathToReferences(Zt),this._elementRef.nativeElement.appendChild(Gt)}_clearSvgElement(){const Gt=this._elementRef.nativeElement;let Se=Gt.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();Se--;){const Zt=Gt.childNodes[Se];(1!==Zt.nodeType||"svg"===Zt.nodeName.toLowerCase())&&Zt.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const Gt=this._elementRef.nativeElement,Se=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();Se!=this._previousFontSetClass&&(this._previousFontSetClass&&Gt.classList.remove(this._previousFontSetClass),Se&&Gt.classList.add(Se),this._previousFontSetClass=Se),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&Gt.classList.remove(this._previousFontIconClass),this.fontIcon&&Gt.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(Gt){return"string"==typeof Gt?Gt.trim().split(" ")[0]:Gt}_prependPathToReferences(Gt){const Se=this._elementsWithExternalReferences;Se&&Se.forEach((Zt,ie)=>{Zt.forEach(St=>{ie.setAttribute(St.name,`url('${Gt}#${St.value}')`)})})}_cacheChildrenWithExternalReferences(Gt){const Se=Gt.querySelectorAll(ke),Zt=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let ie=0;ie<Se.length;ie++)He.forEach(St=>{const jt=Se[ie],Ce=jt.getAttribute(St),ri=Ce?Ce.match(Ze):null;if(ri){let Te=Zt.get(jt);Te||(Te=[],Zt.set(jt,Te)),Te.push({name:St,value:ri[1]})}})}_updateSvgIcon(Gt){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),Gt){const[Se,Zt]=this._splitIconName(Gt);Se&&(this._svgNamespace=Se),Zt&&(this._svgName=Zt),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(Zt,Se).pipe((0,Pt.q)(1)).subscribe(ie=>this._setSvgElement(ie),ie=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${Se}:${Zt}! ${ie.message}`))})}}}return Le.\u0275fac=function(Gt){return new(Gt||Le)(T.Y36(T.SBq),T.Y36(Et),T.$8M("aria-hidden"),T.Y36(ve),T.Y36(T.qLn))},Le.\u0275cmp=T.Xpm({type:Le,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(Gt,Se){2&Gt&&(T.uIk("data-mat-icon-type",Se._usingFontIcon()?"font":"svg")("data-mat-icon-name",Se._svgName||Se.fontIcon)("data-mat-icon-namespace",Se._svgNamespace||Se.fontSet),T.ekj("mat-icon-inline",Se.inline)("mat-icon-no-color","primary"!==Se.color&&"accent"!==Se.color&&"warn"!==Se.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[T.qOj],ngContentSelectors:Ht,decls:1,vars:0,template:function(Gt,Se){1&Gt&&(T.F$t(),T.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;-moz-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),Le})(),$e=(()=>{class Le{}return Le.\u0275fac=function(Gt){return new(Gt||Le)},Le.\u0275mod=T.oAB({type:Le}),Le.\u0275inj=T.cJS({imports:[[_.BQ],_.BQ]}),Le})()},77531:(U,$,m)=>{"use strict";m.d($,{Jk:()=>Tt,Nt:()=>Ht,c:()=>Jt});var T=m(63191),_=m(70925),e=m(5e3),t=m(93075),n=m(90508),r=m(67322),s=m(77579),u=m(60515);const b=(0,_.i$)({passive:!0});let x=(()=>{class Ct{constructor(st,gt){this._platform=st,this._ngZone=gt,this._monitoredElements=new Map}monitor(st){if(!this._platform.isBrowser)return u.E;const gt=(0,T.fI)(st),lt=this._monitoredElements.get(gt);if(lt)return lt.subject;const Bt=new s.x,Dt="cdk-text-field-autofilled",Et=ut=>{"cdk-text-field-autofill-start"!==ut.animationName||gt.classList.contains(Dt)?"cdk-text-field-autofill-end"===ut.animationName&&gt.classList.contains(Dt)&&(gt.classList.remove(Dt),this._ngZone.run(()=>Bt.next({target:ut.target,isAutofilled:!1}))):(gt.classList.add(Dt),this._ngZone.run(()=>Bt.next({target:ut.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{gt.addEventListener("animationstart",Et,b),gt.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(gt,{subject:Bt,unlisten:()=>{gt.removeEventListener("animationstart",Et,b)}}),Bt}stopMonitoring(st){const gt=(0,T.fI)(st),lt=this._monitoredElements.get(gt);lt&&(lt.unlisten(),lt.subject.complete(),gt.classList.remove("cdk-text-field-autofill-monitored"),gt.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(gt))}ngOnDestroy(){this._monitoredElements.forEach((st,gt)=>this.stopMonitoring(gt))}}return Ct.\u0275fac=function(st){return new(st||Ct)(e.LFG(_.t4),e.LFG(e.R0b))},Ct.\u0275prov=e.Yz7({token:Ct,factory:Ct.\u0275fac,providedIn:"root"}),Ct})(),ot=(()=>{class Ct{}return Ct.\u0275fac=function(st){return new(st||Ct)},Ct.\u0275mod=e.oAB({type:Ct}),Ct.\u0275inj=e.cJS({imports:[[_.ud]]}),Ct})();const Tt=new e.OlP("MAT_INPUT_VALUE_ACCESSOR"),Pt=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let pt=0;const It=(0,n.FD)(class{constructor(Ct,bt,st,gt){this._defaultErrorStateMatcher=Ct,this._parentForm=bt,this._parentFormGroup=st,this.ngControl=gt}});let Ht=(()=>{class Ct extends It{constructor(st,gt,lt,Bt,Dt,Et,ut,rt,fe,Mt){super(Et,Bt,Dt,lt),this._elementRef=st,this._platform=gt,this._autofillMonitor=rt,this._formField=Mt,this._uid="mat-input-"+pt++,this.focused=!1,this.stateChanges=new s.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(ve=>(0,_.qK)().has(ve));const Nt=this._elementRef.nativeElement,ge=Nt.nodeName.toLowerCase();this._inputValueAccessor=ut||Nt,this._previousNativeValue=this.value,this.id=this.id,gt.IOS&&fe.runOutsideAngular(()=>{st.nativeElement.addEventListener("keyup",ve=>{const pe=ve.target;!pe.value&&0===pe.selectionStart&&0===pe.selectionEnd&&(pe.setSelectionRange(1,1),pe.setSelectionRange(0,0))})}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===ge,this._isTextarea="textarea"===ge,this._isInFormField=!!Mt,this._isNativeSelect&&(this.controlType=Nt.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(st){this._disabled=(0,T.Ig)(st),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(st){this._id=st||this._uid}get required(){var st,gt,lt,Bt;return null!==(Bt=null!==(st=this._required)&&void 0!==st?st:null===(lt=null===(gt=this.ngControl)||void 0===gt?void 0:gt.control)||void 0===lt?void 0:lt.hasValidator(t.kI.required))&&void 0!==Bt&&Bt}set required(st){this._required=(0,T.Ig)(st)}get type(){return this._type}set type(st){this._type=st||"text",this._validateType(),!this._isTextarea&&(0,_.qK)().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(st){st!==this.value&&(this._inputValueAccessor.value=st,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(st){this._readonly=(0,T.Ig)(st)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(st=>{this.autofilled=st.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(st){this._elementRef.nativeElement.focus(st)}_focusChanged(st){st!==this.focused&&(this.focused=st,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var st,gt;const lt=(null===(gt=null===(st=this._formField)||void 0===st?void 0:st._hideControlPlaceholder)||void 0===gt?void 0:gt.call(st))?null:this.placeholder;if(lt!==this._previousPlaceholder){const Bt=this._elementRef.nativeElement;this._previousPlaceholder=lt,lt?Bt.setAttribute("placeholder",lt):Bt.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const st=this._elementRef.nativeElement.value;this._previousNativeValue!==st&&(this._previousNativeValue=st,this.stateChanges.next())}_validateType(){Pt.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let st=this._elementRef.nativeElement.validity;return st&&st.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const st=this._elementRef.nativeElement,gt=st.options[0];return this.focused||st.multiple||!this.empty||!!(st.selectedIndex>-1&&gt&&gt.label)}return this.focused||!this.empty}setDescribedByIds(st){st.length?this._elementRef.nativeElement.setAttribute("aria-describedby",st.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const st=this._elementRef.nativeElement;return this._isNativeSelect&&(st.multiple||st.size>1)}}return Ct.\u0275fac=function(st){return new(st||Ct)(e.Y36(e.SBq),e.Y36(_.t4),e.Y36(t.a5,10),e.Y36(t.F,8),e.Y36(t.sg,8),e.Y36(n.rD),e.Y36(Tt,10),e.Y36(x),e.Y36(e.R0b),e.Y36(r.G_,8))},Ct.\u0275dir=e.lG2({type:Ct,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:11,hostBindings:function(st,gt){1&st&&e.NdJ("focus",function(){return gt._focusChanged(!0)})("blur",function(){return gt._focusChanged(!1)})("input",function(){return gt._onInput()}),2&st&&(e.Ikx("disabled",gt.disabled)("required",gt.required),e.uIk("id",gt.id)("data-placeholder",gt.placeholder)("readonly",gt.readonly&&!gt._isNativeSelect||null)("aria-invalid",gt.empty&&gt.required?null:gt.errorState)("aria-required",gt.required),e.ekj("mat-input-server",gt._isServer)("mat-native-select-inline",gt._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[e._Bn([{provide:r.Eo,useExisting:Ct}]),e.qOj,e.TTD]}),Ct})(),Jt=(()=>{class Ct{}return Ct.\u0275fac=function(st){return new(st||Ct)},Ct.\u0275mod=e.oAB({type:Ct}),Ct.\u0275inj=e.cJS({providers:[n.rD],imports:[[ot,r.lN,n.BQ],ot,r.lN]}),Ct})()},92181:(U,$,m)=>{"use strict";m.d($,{VK:()=>Se,Tx:()=>te,p6:()=>Te});var T=m(15664),_=m(63191),e=m(91159),t=m(5e3),n=m(77579),r=m(50727),s=m(56451),u=m(39646),b=m(53101),x=m(68675),B=m(63900),Z=m(95698),ot=m(39300),et=m(82722),Tt=m(91005),Pt=m(41777),pt=m(47429),It=m(69808),Ht=m(90508),Jt=m(91314),Ct=m(70925),bt=m(50226),st=m(30495);const gt=["mat-menu-item",""];function lt(ne,Oe){1&ne&&(t.O4$(),t.TgZ(0,"svg",2),t._UZ(1,"polygon",3),t.qZA())}const Bt=["*"];function Dt(ne,Oe){if(1&ne){const re=t.EpF();t.TgZ(0,"div",0),t.NdJ("keydown",function(ye){return t.CHM(re),t.oxw()._handleKeydown(ye)})("click",function(){return t.CHM(re),t.oxw().closed.emit("click")})("@transformMenu.start",function(ye){return t.CHM(re),t.oxw()._onAnimationStart(ye)})("@transformMenu.done",function(ye){return t.CHM(re),t.oxw()._onAnimationDone(ye)}),t.TgZ(1,"div",1),t.Hsn(2),t.qZA(),t.qZA()}if(2&ne){const re=t.oxw();t.Q6J("id",re.panelId)("ngClass",re._classList)("@transformMenu",re._panelAnimationState),t.uIk("aria-label",re.ariaLabel||null)("aria-labelledby",re.ariaLabelledby||null)("aria-describedby",re.ariaDescribedby||null)}}const Et={transformMenu:(0,Pt.X$)("transformMenu",[(0,Pt.SB)("void",(0,Pt.oB)({opacity:0,transform:"scale(0.8)"})),(0,Pt.eR)("void => enter",(0,Pt.jt)("120ms cubic-bezier(0, 0, 0.2, 1)",(0,Pt.oB)({opacity:1,transform:"scale(1)"}))),(0,Pt.eR)("* => void",(0,Pt.jt)("100ms 25ms linear",(0,Pt.oB)({opacity:0})))]),fadeInItems:(0,Pt.X$)("fadeInItems",[(0,Pt.SB)("showing",(0,Pt.oB)({opacity:1})),(0,Pt.eR)("void => *",[(0,Pt.oB)({opacity:0}),(0,Pt.jt)("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},fe=new t.OlP("MatMenuContent"),ke=new t.OlP("MAT_MENU_PANEL"),Ze=(0,Ht.Kr)((0,Ht.Id)(class{}));let Di=(()=>{class ne extends Ze{constructor(re,me,ye,Qt,de){super(),this._elementRef=re,this._focusMonitor=ye,this._parentMenu=Qt,this._changeDetectorRef=de,this.role="menuitem",this._hovered=new n.x,this._focused=new n.x,this._highlighted=!1,this._triggersSubmenu=!1,Qt&&Qt.addItem&&Qt.addItem(this)}focus(re,me){this._focusMonitor&&re?this._focusMonitor.focusVia(this._getHostElement(),re,me):this._getHostElement().focus(me),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(re){this.disabled&&(re.preventDefault(),re.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){var re;const me=this._elementRef.nativeElement.cloneNode(!0),ye=me.querySelectorAll("mat-icon, .material-icons");for(let Qt=0;Qt<ye.length;Qt++)ye[Qt].remove();return(null===(re=me.textContent)||void 0===re?void 0:re.trim())||""}_setHighlighted(re){var me;this._highlighted=re,null===(me=this._changeDetectorRef)||void 0===me||me.markForCheck()}}return ne.\u0275fac=function(re){return new(re||ne)(t.Y36(t.SBq),t.Y36(It.K0),t.Y36(T.tE),t.Y36(ke,8),t.Y36(t.sBO))},ne.\u0275cmp=t.Xpm({type:ne,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(re,me){1&re&&t.NdJ("click",function(Qt){return me._checkDisabled(Qt)})("mouseenter",function(){return me._handleMouseEnter()}),2&re&&(t.uIk("role",me.role)("tabindex",me._getTabIndex())("aria-disabled",me.disabled.toString())("disabled",me.disabled||null),t.ekj("mat-menu-item",!0)("mat-menu-item-highlighted",me._highlighted)("mat-menu-item-submenu-trigger",me._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[t.qOj],attrs:gt,ngContentSelectors:Bt,decls:3,vars:3,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(re,me){1&re&&(t.F$t(),t.Hsn(0),t._UZ(1,"div",0),t.YNc(2,lt,2,0,"svg",1)),2&re&&(t.xp6(1),t.Q6J("matRippleDisabled",me.disableRipple||me.disabled)("matRippleTrigger",me._getHostElement()),t.xp6(1),t.Q6J("ngIf",me._triggersSubmenu))},directives:[Ht.wG,It.O5],encapsulation:2,changeDetection:0}),ne})();const $e=new t.OlP("mat-menu-default-options",{providedIn:"root",factory:function(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let pi=0,Gt=(()=>{class ne{constructor(re,me,ye){this._elementRef=re,this._ngZone=me,this._defaultOptions=ye,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new t.n_E,this._tabSubscription=r.w0.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new n.x,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new t.vpe,this.close=this.closed,this.panelId="mat-menu-panel-"+pi++}get xPosition(){return this._xPosition}set xPosition(re){this._xPosition=re,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(re){this._yPosition=re,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(re){this._overlapTrigger=(0,_.Ig)(re)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(re){this._hasBackdrop=(0,_.Ig)(re)}set panelClass(re){const me=this._previousPanelClass;me&&me.length&&me.split(" ").forEach(ye=>{this._classList[ye]=!1}),this._previousPanelClass=re,re&&re.length&&(re.split(" ").forEach(ye=>{this._classList[ye]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(re){this.panelClass=re}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new T.Em(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe((0,x.O)(this._directDescendantItems),(0,B.w)(re=>(0,s.T)(...re.map(me=>me._focused)))).subscribe(re=>this._keyManager.updateActiveItem(re))}ngOnDestroy(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}_hovered(){return this._directDescendantItems.changes.pipe((0,x.O)(this._directDescendantItems),(0,B.w)(me=>(0,s.T)(...me.map(ye=>ye._hovered))))}addItem(re){}removeItem(re){}_handleKeydown(re){const me=re.keyCode,ye=this._keyManager;switch(me){case e.hY:(0,e.Vb)(re)||(re.preventDefault(),this.closed.emit("keydown"));break;case e.oh:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case e.SV:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:(me===e.LH||me===e.JH)&&ye.setFocusOrigin("keyboard"),ye.onKeydown(re)}}focusFirstItem(re="program"){this.lazyContent?this._ngZone.onStable.pipe((0,Z.q)(1)).subscribe(()=>this._focusFirstItem(re)):this._focusFirstItem(re)}_focusFirstItem(re){const me=this._keyManager;if(me.setFocusOrigin(re).setFirstItemActive(),!me.activeItem&&this._directDescendantItems.length){let ye=this._directDescendantItems.first._getHostElement().parentElement;for(;ye;){if("menu"===ye.getAttribute("role")){ye.focus();break}ye=ye.parentElement}}}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(re){const me=Math.min(this._baseElevation+re,24),ye=`${this._elevationPrefix}${me}`,Qt=Object.keys(this._classList).find(de=>de.startsWith(this._elevationPrefix));(!Qt||Qt===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[ye]=!0,this._previousElevation=ye)}setPositionClasses(re=this.xPosition,me=this.yPosition){const ye=this._classList;ye["mat-menu-before"]="before"===re,ye["mat-menu-after"]="after"===re,ye["mat-menu-above"]="above"===me,ye["mat-menu-below"]="below"===me}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(re){this._animationDone.next(re),this._isAnimating=!1}_onAnimationStart(re){this._isAnimating=!0,"enter"===re.toState&&0===this._keyManager.activeItemIndex&&(re.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe((0,x.O)(this._allItems)).subscribe(re=>{this._directDescendantItems.reset(re.filter(me=>me._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return ne.\u0275fac=function(re){return new(re||ne)(t.Y36(t.SBq),t.Y36(t.R0b),t.Y36($e))},ne.\u0275dir=t.lG2({type:ne,contentQueries:function(re,me,ye){if(1&re&&(t.Suo(ye,fe,5),t.Suo(ye,Di,5),t.Suo(ye,Di,4)),2&re){let Qt;t.iGM(Qt=t.CRH())&&(me.lazyContent=Qt.first),t.iGM(Qt=t.CRH())&&(me._allItems=Qt),t.iGM(Qt=t.CRH())&&(me.items=Qt)}},viewQuery:function(re,me){if(1&re&&t.Gf(t.Rgc,5),2&re){let ye;t.iGM(ye=t.CRH())&&(me.templateRef=ye.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}}),ne})(),Se=(()=>{class ne extends Gt{constructor(re,me,ye){super(re,me,ye),this._elevationPrefix="mat-elevation-z",this._baseElevation=4}}return ne.\u0275fac=function(re){return new(re||ne)(t.Y36(t.SBq),t.Y36(t.R0b),t.Y36($e))},ne.\u0275cmp=t.Xpm({type:ne,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(re,me){2&re&&t.uIk("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[t._Bn([{provide:ke,useExisting:ne}]),t.qOj],ngContentSelectors:Bt,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(re,me){1&re&&(t.F$t(),t.YNc(0,Dt,3,6,"ng-template"))},directives:[It.mk],styles:["mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]{pointer-events:none}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.cdk-high-contrast-active .mat-menu-item.cdk-program-focused,.cdk-high-contrast-active .mat-menu-item.cdk-keyboard-focused,.cdk-high-contrast-active .mat-menu-item-highlighted{outline:dotted 1px}.mat-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.mat-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-menu-submenu-icon{fill:CanvasText}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}\n"],encapsulation:2,data:{animation:[Et.transformMenu,Et.fadeInItems]},changeDetection:0}),ne})();const Zt=new t.OlP("mat-menu-scroll-strategy"),St={provide:Zt,deps:[Jt.aV],useFactory:function(ne){return()=>ne.scrollStrategies.reposition()}},Ce=(0,Ct.i$)({passive:!0});let ri=(()=>{class ne{constructor(re,me,ye,Qt,de,ti,ni,Pi){this._overlay=re,this._element=me,this._viewContainerRef=ye,this._menuItemInstance=ti,this._dir=ni,this._focusMonitor=Pi,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=r.w0.EMPTY,this._hoverSubscription=r.w0.EMPTY,this._menuCloseSubscription=r.w0.EMPTY,this._handleTouchStart=wi=>{(0,T.yG)(wi)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new t.vpe,this.onMenuOpen=this.menuOpened,this.menuClosed=new t.vpe,this.onMenuClose=this.menuClosed,this._scrollStrategy=Qt,this._parentMaterialMenu=de instanceof Gt?de:void 0,me.nativeElement.addEventListener("touchstart",this._handleTouchStart,Ce),ti&&(ti._triggersSubmenu=this.triggersSubmenu())}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(re){this.menu=re}get menu(){return this._menu}set menu(re){re!==this._menu&&(this._menu=re,this._menuCloseSubscription.unsubscribe(),re&&(this._menuCloseSubscription=re.close.subscribe(me=>{this._destroyMenu(me),("click"===me||"tab"===me)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(me)})))}ngAfterContentInit(){this._checkMenu(),this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,Ce),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){if(this._menuOpen)return;this._checkMenu();const re=this._createOverlay(),me=re.getConfig();this._setPosition(me.positionStrategy),me.hasBackdrop=null==this.menu.hasBackdrop?!this.triggersSubmenu():this.menu.hasBackdrop,re.attach(this._getPortal()),this.menu.lazyContent&&this.menu.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(),this.menu instanceof Gt&&this.menu._startAnimation()}closeMenu(){this.menu.close.emit()}focus(re,me){this._focusMonitor&&re?this._focusMonitor.focusVia(this._element,re,me):this._element.nativeElement.focus(me)}updatePosition(){var re;null===(re=this._overlayRef)||void 0===re||re.updatePosition()}_destroyMenu(re){if(!this._overlayRef||!this.menuOpen)return;const me=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===re||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,me instanceof Gt?(me._resetAnimation(),me.lazyContent?me._animationDone.pipe((0,ot.h)(ye=>"void"===ye.toState),(0,Z.q)(1),(0,et.R)(me.lazyContent._attached)).subscribe({next:()=>me.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),me.lazyContent&&me.lazyContent.detach())}_initMenu(){this.menu.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,this.menu.direction=this.dir,this._setMenuElevation(),this.menu.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(){if(this.menu.setElevation){let re=0,me=this.menu.parentMenu;for(;me;)re++,me=me.parentMenu;this.menu.setElevation(re)}}_setIsMenuOpen(re){this._menuOpen=re,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(re)}_checkMenu(){}_createOverlay(){if(!this._overlayRef){const re=this._getOverlayConfig();this._subscribeToPositions(re.positionStrategy),this._overlayRef=this._overlay.create(re),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(){return new Jt.X_({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:this.menu.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:this.menu.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(re){this.menu.setPositionClasses&&re.positionChanges.subscribe(me=>{this.menu.setPositionClasses("start"===me.connectionPair.overlayX?"after":"before","top"===me.connectionPair.overlayY?"below":"above")})}_setPosition(re){let[me,ye]="before"===this.menu.xPosition?["end","start"]:["start","end"],[Qt,de]="above"===this.menu.yPosition?["bottom","top"]:["top","bottom"],[ti,ni]=[Qt,de],[Pi,wi]=[me,ye],yi=0;this.triggersSubmenu()?(wi=me="before"===this.menu.xPosition?"start":"end",ye=Pi="end"===me?"start":"end",yi="bottom"===Qt?8:-8):this.menu.overlapTrigger||(ti="top"===Qt?"bottom":"top",ni="top"===de?"bottom":"top"),re.withPositions([{originX:me,originY:ti,overlayX:Pi,overlayY:Qt,offsetY:yi},{originX:ye,originY:ti,overlayX:wi,overlayY:Qt,offsetY:yi},{originX:me,originY:ni,overlayX:Pi,overlayY:de,offsetY:-yi},{originX:ye,originY:ni,overlayX:wi,overlayY:de,offsetY:-yi}])}_menuClosingActions(){const re=this._overlayRef.backdropClick(),me=this._overlayRef.detachments(),ye=this._parentMaterialMenu?this._parentMaterialMenu.closed:(0,u.of)(),Qt=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe((0,ot.h)(de=>de!==this._menuItemInstance),(0,ot.h)(()=>this._menuOpen)):(0,u.of)();return(0,s.T)(re,ye,Qt,me)}_handleMousedown(re){(0,T.X6)(re)||(this._openedBy=0===re.button?"mouse":void 0,this.triggersSubmenu()&&re.preventDefault())}_handleKeydown(re){const me=re.keyCode;(me===e.K5||me===e.L_)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(me===e.SV&&"ltr"===this.dir||me===e.oh&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(re){this.triggersSubmenu()?(re.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe((0,ot.h)(re=>re===this._menuItemInstance&&!re.disabled),(0,Tt.g)(0,b.E)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof Gt&&this.menu._isAnimating?this.menu._animationDone.pipe((0,Z.q)(1),(0,Tt.g)(0,b.E),(0,et.R)(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(){return(!this._portal||this._portal.templateRef!==this.menu.templateRef)&&(this._portal=new pt.UE(this.menu.templateRef,this._viewContainerRef)),this._portal}}return ne.\u0275fac=function(re){return new(re||ne)(t.Y36(Jt.aV),t.Y36(t.SBq),t.Y36(t.s_b),t.Y36(Zt),t.Y36(ke,8),t.Y36(Di,10),t.Y36(bt.Is,8),t.Y36(T.tE))},ne.\u0275dir=t.lG2({type:ne,hostAttrs:["aria-haspopup","true"],hostVars:2,hostBindings:function(re,me){1&re&&t.NdJ("click",function(Qt){return me._handleClick(Qt)})("mousedown",function(Qt){return me._handleMousedown(Qt)})("keydown",function(Qt){return me._handleKeydown(Qt)}),2&re&&t.uIk("aria-expanded",me.menuOpen||null)("aria-controls",me.menuOpen?me.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),ne})(),Te=(()=>{class ne extends ri{}return ne.\u0275fac=function(){let Oe;return function(me){return(Oe||(Oe=t.n5z(ne)))(me||ne)}}(),ne.\u0275dir=t.lG2({type:ne,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-menu-trigger"],exportAs:["matMenuTrigger"],features:[t.qOj]}),ne})(),te=(()=>{class ne{}return ne.\u0275fac=function(re){return new(re||ne)},ne.\u0275mod=t.oAB({type:ne}),ne.\u0275inj=t.cJS({providers:[St],imports:[[It.ez,Ht.BQ,Ht.si,Jt.U8],st.ZD,Ht.BQ]}),ne})()},20773:(U,$,m)=>{"use strict";m.d($,{Cq:()=>Jt,$g:()=>Ht});var T=m(5e3),_=m(69808),e=m(90508),t=m(63191),n=m(70925),r=m(76360);function s(Ct,bt){if(1&Ct&&(T.O4$(),T._UZ(0,"circle",3)),2&Ct){const st=T.oxw();T.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+st._spinnerAnimationLabel)("stroke-dashoffset",st._getStrokeDashOffset(),"px")("stroke-dasharray",st._getStrokeCircumference(),"px")("stroke-width",st._getCircleStrokeWidth(),"%"),T.uIk("r",st._getCircleRadius())}}function u(Ct,bt){if(1&Ct&&(T.O4$(),T._UZ(0,"circle",3)),2&Ct){const st=T.oxw();T.Udp("stroke-dashoffset",st._getStrokeDashOffset(),"px")("stroke-dasharray",st._getStrokeCircumference(),"px")("stroke-width",st._getCircleStrokeWidth(),"%"),T.uIk("r",st._getCircleRadius())}}function b(Ct,bt){if(1&Ct&&(T.O4$(),T._UZ(0,"circle",3)),2&Ct){const st=T.oxw();T.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+st._spinnerAnimationLabel)("stroke-dashoffset",st._getStrokeDashOffset(),"px")("stroke-dasharray",st._getStrokeCircumference(),"px")("stroke-width",st._getCircleStrokeWidth(),"%"),T.uIk("r",st._getCircleRadius())}}function x(Ct,bt){if(1&Ct&&(T.O4$(),T._UZ(0,"circle",3)),2&Ct){const st=T.oxw();T.Udp("stroke-dashoffset",st._getStrokeDashOffset(),"px")("stroke-dasharray",st._getStrokeCircumference(),"px")("stroke-width",st._getCircleStrokeWidth(),"%"),T.uIk("r",st._getCircleRadius())}}const et=(0,e.pj)(class{constructor(Ct){this._elementRef=Ct}},"primary"),Tt=new T.OlP("mat-progress-spinner-default-options",{providedIn:"root",factory:function(){return{diameter:100}}});class It extends et{constructor(bt,st,gt,lt,Bt){super(bt),this._document=gt,this._diameter=100,this._value=0,this.mode="determinate";const Dt=It._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),Dt.has(gt.head)||Dt.set(gt.head,new Set([100])),this._noopAnimations="NoopAnimations"===lt&&!!Bt&&!Bt._forceAnimations,Bt&&(Bt.diameter&&(this.diameter=Bt.diameter),Bt.strokeWidth&&(this.strokeWidth=Bt.strokeWidth))}get diameter(){return this._diameter}set diameter(bt){this._diameter=(0,t.su)(bt),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(bt){this._strokeWidth=(0,t.su)(bt)}get value(){return"determinate"===this.mode?this._value:0}set value(bt){this._value=Math.max(0,Math.min(100,(0,t.su)(bt)))}ngOnInit(){const bt=this._elementRef.nativeElement;this._styleRoot=(0,n.kV)(bt)||this._document.head,this._attachStyleNode(),bt.classList.add("mat-progress-spinner-indeterminate-animation")}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const bt=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${bt} ${bt}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_attachStyleNode(){const bt=this._styleRoot,st=this._diameter,gt=It._diameters;let lt=gt.get(bt);if(!lt||!lt.has(st)){const Bt=this._document.createElement("style");Bt.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),Bt.textContent=this._getAnimationText(),bt.appendChild(Bt),lt||(lt=new Set,gt.set(bt,lt)),lt.add(st)}}_getAnimationText(){const bt=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*bt).replace(/END_VALUE/g,""+.2*bt).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}It._diameters=new WeakMap,It.\u0275fac=function(bt){return new(bt||It)(T.Y36(T.SBq),T.Y36(n.t4),T.Y36(_.K0,8),T.Y36(r.Qb,8),T.Y36(Tt))},It.\u0275cmp=T.Xpm({type:It,selectors:[["mat-progress-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner"],hostVars:10,hostBindings:function(bt,st){2&bt&&(T.uIk("aria-valuemin","determinate"===st.mode?0:null)("aria-valuemax","determinate"===st.mode?100:null)("aria-valuenow","determinate"===st.mode?st.value:null)("mode",st.mode),T.Udp("width",st.diameter,"px")("height",st.diameter,"px"),T.ekj("_mat-animation-noopable",st._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[T.qOj],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(bt,st){1&bt&&(T.O4$(),T.TgZ(0,"svg",0),T.YNc(1,s,1,9,"circle",1),T.YNc(2,u,1,7,"circle",2),T.qZA()),2&bt&&(T.Udp("width",st.diameter,"px")("height",st.diameter,"px"),T.Q6J("ngSwitch","indeterminate"===st.mode),T.uIk("viewBox",st._getViewBox()),T.xp6(1),T.Q6J("ngSwitchCase",!0),T.xp6(1),T.Q6J("ngSwitchCase",!1))},directives:[_.RF,_.n9],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transform-origin:center;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}\n"],encapsulation:2,changeDetection:0});let Ht=(()=>{class Ct extends It{constructor(st,gt,lt,Bt,Dt){super(st,gt,lt,Bt,Dt),this.mode="indeterminate"}}return Ct.\u0275fac=function(st){return new(st||Ct)(T.Y36(T.SBq),T.Y36(n.t4),T.Y36(_.K0,8),T.Y36(r.Qb,8),T.Y36(Tt))},Ct.\u0275cmp=T.Xpm({type:Ct,selectors:[["mat-spinner"]],hostAttrs:["role","progressbar","mode","indeterminate",1,"mat-spinner","mat-progress-spinner"],hostVars:6,hostBindings:function(st,gt){2&st&&(T.Udp("width",gt.diameter,"px")("height",gt.diameter,"px"),T.ekj("_mat-animation-noopable",gt._noopAnimations))},inputs:{color:"color"},features:[T.qOj],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(st,gt){1&st&&(T.O4$(),T.TgZ(0,"svg",0),T.YNc(1,b,1,9,"circle",1),T.YNc(2,x,1,7,"circle",2),T.qZA()),2&st&&(T.Udp("width",gt.diameter,"px")("height",gt.diameter,"px"),T.Q6J("ngSwitch","indeterminate"===gt.mode),T.uIk("viewBox",gt._getViewBox()),T.xp6(1),T.Q6J("ngSwitchCase",!0),T.xp6(1),T.Q6J("ngSwitchCase",!1))},directives:[_.RF,_.n9],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transform-origin:center;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}\n"],encapsulation:2,changeDetection:0}),Ct})(),Jt=(()=>{class Ct{}return Ct.\u0275fac=function(st){return new(st||Ct)},Ct.\u0275mod=T.oAB({type:Ct}),Ct.\u0275inj=T.cJS({imports:[[e.BQ,_.ez],e.BQ]}),Ct})()},57261:(U,$,m)=>{"use strict";m.d($,{ux:()=>Bt,ZX:()=>st});var T=m(91314),_=m(47429),e=m(69808),t=m(5e3),n=m(90508),r=m(47423),s=m(77579),u=m(95698),b=m(82722),x=m(41777),B=m(70925),Z=m(95113),ot=m(15664);function et(Dt,Et){if(1&Dt){const ut=t.EpF();t.TgZ(0,"div",1),t.TgZ(1,"button",2),t.NdJ("click",function(){return t.CHM(ut),t.oxw().action()}),t._uU(2),t.qZA(),t.qZA()}if(2&Dt){const ut=t.oxw();t.xp6(2),t.Oqu(ut.data.action)}}function Tt(Dt,Et){}const Pt=new t.OlP("MatSnackBarData");class pt{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}const It=Math.pow(2,31)-1;class Ht{constructor(Et,ut){this._overlayRef=ut,this._afterDismissed=new s.x,this._afterOpened=new s.x,this._onAction=new s.x,this._dismissedByAction=!1,this.containerInstance=Et,this.onAction().subscribe(()=>this.dismiss()),Et._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(Et){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(Et,It))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}let Jt=(()=>{class Dt{constructor(ut,rt){this.snackBarRef=ut,this.data=rt}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return Dt.\u0275fac=function(ut){return new(ut||Dt)(t.Y36(Ht),t.Y36(Pt))},Dt.\u0275cmp=t.Xpm({type:Dt,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(ut,rt){1&ut&&(t.TgZ(0,"span"),t._uU(1),t.qZA(),t.YNc(2,et,3,1,"div",0)),2&ut&&(t.xp6(1),t.Oqu(rt.data.message),t.xp6(1),t.Q6J("ngIf",rt.hasAction))},directives:[e.O5,r.lW],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}\n"],encapsulation:2,changeDetection:0}),Dt})();const Ct={snackBarState:(0,x.X$)("state",[(0,x.SB)("void, hidden",(0,x.oB)({transform:"scale(0.8)",opacity:0})),(0,x.SB)("visible",(0,x.oB)({transform:"scale(1)",opacity:1})),(0,x.eR)("* => visible",(0,x.jt)("150ms cubic-bezier(0, 0, 0.2, 1)")),(0,x.eR)("* => void, * => hidden",(0,x.jt)("75ms cubic-bezier(0.4, 0.0, 1, 1)",(0,x.oB)({opacity:0})))])};let bt=(()=>{class Dt extends _.en{constructor(ut,rt,fe,Mt,Nt){super(),this._ngZone=ut,this._elementRef=rt,this._changeDetectorRef=fe,this._platform=Mt,this.snackBarConfig=Nt,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new s.x,this._onExit=new s.x,this._onEnter=new s.x,this._animationState="void",this.attachDomPortal=ge=>(this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachDomPortal(ge)),this._live="assertive"!==Nt.politeness||Nt.announcementMessage?"off"===Nt.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(ut){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachComponentPortal(ut)}attachTemplatePortal(ut){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachTemplatePortal(ut)}onAnimationEnd(ut){const{fromState:rt,toState:fe}=ut;if(("void"===fe&&"void"!==rt||"hidden"===fe)&&this._completeExit(),"visible"===fe){const Mt=this._onEnter;this._ngZone.run(()=>{Mt.next(),Mt.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe((0,u.q)(1)).subscribe(()=>{this._onExit.next(),this._onExit.complete()})}_applySnackBarClasses(){const ut=this._elementRef.nativeElement,rt=this.snackBarConfig.panelClass;rt&&(Array.isArray(rt)?rt.forEach(fe=>ut.classList.add(fe)):ut.classList.add(rt)),"center"===this.snackBarConfig.horizontalPosition&&ut.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&ut.classList.add("mat-snack-bar-top")}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const ut=this._elementRef.nativeElement.querySelector("[aria-hidden]"),rt=this._elementRef.nativeElement.querySelector("[aria-live]");if(ut&&rt){let fe=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&ut.contains(document.activeElement)&&(fe=document.activeElement),ut.removeAttribute("aria-hidden"),rt.appendChild(ut),null==fe||fe.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return Dt.\u0275fac=function(ut){return new(ut||Dt)(t.Y36(t.R0b),t.Y36(t.SBq),t.Y36(t.sBO),t.Y36(B.t4),t.Y36(pt))},Dt.\u0275cmp=t.Xpm({type:Dt,selectors:[["snack-bar-container"]],viewQuery:function(ut,rt){if(1&ut&&t.Gf(_.Pl,7),2&ut){let fe;t.iGM(fe=t.CRH())&&(rt._portalOutlet=fe.first)}},hostAttrs:[1,"mat-snack-bar-container"],hostVars:1,hostBindings:function(ut,rt){1&ut&&t.WFA("@state.done",function(Mt){return rt.onAnimationEnd(Mt)}),2&ut&&t.d8E("@state",rt._animationState)},features:[t.qOj],decls:3,vars:2,consts:[["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(ut,rt){1&ut&&(t.TgZ(0,"div",0),t.YNc(1,Tt,0,0,"ng-template",1),t.qZA(),t._UZ(2,"div")),2&ut&&(t.xp6(2),t.uIk("aria-live",rt._live)("role",rt._role))},directives:[_.Pl],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}\n"],encapsulation:2,data:{animation:[Ct.snackBarState]}}),Dt})(),st=(()=>{class Dt{}return Dt.\u0275fac=function(ut){return new(ut||Dt)},Dt.\u0275mod=t.oAB({type:Dt}),Dt.\u0275inj=t.cJS({imports:[[T.U8,_.eL,e.ez,r.ot,n.BQ],n.BQ]}),Dt})();const gt=new t.OlP("mat-snack-bar-default-options",{providedIn:"root",factory:function(){return new pt}});let Bt=(()=>{class Dt{constructor(ut,rt,fe,Mt,Nt,ge){this._overlay=ut,this._live=rt,this._injector=fe,this._breakpointObserver=Mt,this._parentSnackBar=Nt,this._defaultConfig=ge,this._snackBarRefAtThisLevel=null,this.simpleSnackBarComponent=Jt,this.snackBarContainerComponent=bt,this.handsetCssClass="mat-snack-bar-handset"}get _openedSnackBarRef(){const ut=this._parentSnackBar;return ut?ut._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(ut){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=ut:this._snackBarRefAtThisLevel=ut}openFromComponent(ut,rt){return this._attach(ut,rt)}openFromTemplate(ut,rt){return this._attach(ut,rt)}open(ut,rt="",fe){const Mt=Object.assign(Object.assign({},this._defaultConfig),fe);return Mt.data={message:ut,action:rt},Mt.announcementMessage===ut&&(Mt.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,Mt)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(ut,rt){const Mt=t.zs3.create({parent:rt&&rt.viewContainerRef&&rt.viewContainerRef.injector||this._injector,providers:[{provide:pt,useValue:rt}]}),Nt=new _.C5(this.snackBarContainerComponent,rt.viewContainerRef,Mt),ge=ut.attach(Nt);return ge.instance.snackBarConfig=rt,ge.instance}_attach(ut,rt){const fe=Object.assign(Object.assign(Object.assign({},new pt),this._defaultConfig),rt),Mt=this._createOverlay(fe),Nt=this._attachSnackBarContainer(Mt,fe),ge=new Ht(Nt,Mt);if(ut instanceof t.Rgc){const ve=new _.UE(ut,null,{$implicit:fe.data,snackBarRef:ge});ge.instance=Nt.attachTemplatePortal(ve)}else{const ve=this._createInjector(fe,ge),pe=new _.C5(ut,void 0,ve),He=Nt.attachComponentPortal(pe);ge.instance=He.instance}return this._breakpointObserver.observe(Z.u3.HandsetPortrait).pipe((0,b.R)(Mt.detachments())).subscribe(ve=>{Mt.overlayElement.classList.toggle(this.handsetCssClass,ve.matches)}),fe.announcementMessage&&Nt._onAnnounce.subscribe(()=>{this._live.announce(fe.announcementMessage,fe.politeness)}),this._animateSnackBar(ge,fe),this._openedSnackBarRef=ge,this._openedSnackBarRef}_animateSnackBar(ut,rt){ut.afterDismissed().subscribe(()=>{this._openedSnackBarRef==ut&&(this._openedSnackBarRef=null),rt.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{ut.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):ut.containerInstance.enter(),rt.duration&&rt.duration>0&&ut.afterOpened().subscribe(()=>ut._dismissAfter(rt.duration))}_createOverlay(ut){const rt=new T.X_;rt.direction=ut.direction;let fe=this._overlay.position().global();const Mt="rtl"===ut.direction,Nt="left"===ut.horizontalPosition||"start"===ut.horizontalPosition&&!Mt||"end"===ut.horizontalPosition&&Mt,ge=!Nt&&"center"!==ut.horizontalPosition;return Nt?fe.left("0"):ge?fe.right("0"):fe.centerHorizontally(),"top"===ut.verticalPosition?fe.top("0"):fe.bottom("0"),rt.positionStrategy=fe,this._overlay.create(rt)}_createInjector(ut,rt){return t.zs3.create({parent:ut&&ut.viewContainerRef&&ut.viewContainerRef.injector||this._injector,providers:[{provide:Ht,useValue:rt},{provide:Pt,useValue:ut.data}]})}}return Dt.\u0275fac=function(ut){return new(ut||Dt)(t.LFG(T.aV),t.LFG(ot.Kd),t.LFG(t.zs3),t.LFG(Z.Yg),t.LFG(Dt,12),t.LFG(gt))},Dt.\u0275prov=t.Yz7({token:Dt,factory:Dt.\u0275fac,providedIn:st}),Dt})()},53251:(U,$,m)=>{"use strict";m.d($,{uX:()=>ri,SP:()=>xe,uD:()=>St,Nh:()=>Je});var T=m(15664),_=m(17144),e=m(47429),t=m(69808),n=m(5e3),r=m(90508),s=m(76360),u=m(77579),b=m(50727),x=m(54968),B=m(39646),Z=m(56451),ot=m(5963),et=m(41777),Tt=m(68675),Pt=m(71884),pt=m(82722),It=m(50226),Ht=m(63191),Jt=m(91159),Ct=m(70925),bt=m(30495);function st(ue,kt){1&ue&&n.Hsn(0)}const gt=["*"];function lt(ue,kt){}const Bt=function(ue){return{animationDuration:ue}},Dt=function(ue,kt){return{value:ue,params:kt}},Et=["tabListContainer"],ut=["tabList"],rt=["tabListInner"],fe=["nextPaginator"],Mt=["previousPaginator"],Nt=["tabBodyWrapper"],ge=["tabHeader"];function ve(ue,kt){}function pe(ue,kt){if(1&ue&&n.YNc(0,ve,0,0,"ng-template",9),2&ue){const ct=n.oxw().$implicit;n.Q6J("cdkPortalOutlet",ct.templateLabel)}}function He(ue,kt){if(1&ue&&n._uU(0),2&ue){const ct=n.oxw().$implicit;n.Oqu(ct.textLabel)}}function ke(ue,kt){if(1&ue){const ct=n.EpF();n.TgZ(0,"div",6),n.NdJ("click",function(){const ce=n.CHM(ct),Ne=ce.$implicit,Wi=ce.index,qi=n.oxw(),Sn=n.MAs(1);return qi._handleClick(Ne,Sn,Wi)})("cdkFocusChange",function(ce){const Wi=n.CHM(ct).index;return n.oxw()._tabFocusChanged(ce,Wi)}),n.TgZ(1,"div",7),n.YNc(2,pe,1,1,"ng-template",8),n.YNc(3,He,1,1,"ng-template",8),n.qZA(),n.qZA()}if(2&ue){const ct=kt.$implicit,Lt=kt.index,ce=n.oxw();n.ekj("mat-tab-label-active",ce.selectedIndex==Lt),n.Q6J("id",ce._getTabLabelId(Lt))("disabled",ct.disabled)("matRippleDisabled",ct.disabled||ce.disableRipple),n.uIk("tabIndex",ce._getTabIndex(ct,Lt))("aria-posinset",Lt+1)("aria-setsize",ce._tabs.length)("aria-controls",ce._getTabContentId(Lt))("aria-selected",ce.selectedIndex==Lt)("aria-label",ct.ariaLabel||null)("aria-labelledby",!ct.ariaLabel&&ct.ariaLabelledby?ct.ariaLabelledby:null),n.xp6(2),n.Q6J("ngIf",ct.templateLabel),n.xp6(1),n.Q6J("ngIf",!ct.templateLabel)}}function Ze(ue,kt){if(1&ue){const ct=n.EpF();n.TgZ(0,"mat-tab-body",10),n.NdJ("_onCentered",function(){return n.CHM(ct),n.oxw()._removeTabBodyWrapperHeight()})("_onCentering",function(ce){return n.CHM(ct),n.oxw()._setTabBodyWrapperHeight(ce)}),n.qZA()}if(2&ue){const ct=kt.$implicit,Lt=kt.index,ce=n.oxw();n.ekj("mat-tab-body-active",ce.selectedIndex===Lt),n.Q6J("id",ce._getTabContentId(Lt))("content",ct.content)("position",ct.position)("origin",ct.origin)("animationDuration",ce.animationDuration),n.uIk("tabindex",null!=ce.contentTabIndex&&ce.selectedIndex===Lt?ce.contentTabIndex:null)("aria-labelledby",ce._getTabLabelId(Lt))}}const $e=new n.OlP("MatInkBarPositioner",{providedIn:"root",factory:function(){return kt=>({left:kt?(kt.offsetLeft||0)+"px":"0",width:kt?(kt.offsetWidth||0)+"px":"0"})}});let pi=(()=>{class ue{constructor(ct,Lt,ce,Ne){this._elementRef=ct,this._ngZone=Lt,this._inkBarPositioner=ce,this._animationMode=Ne}alignToElement(ct){this.show(),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._setStyles(ct))}):this._setStyles(ct)}show(){this._elementRef.nativeElement.style.visibility="visible"}hide(){this._elementRef.nativeElement.style.visibility="hidden"}_setStyles(ct){const Lt=this._inkBarPositioner(ct),ce=this._elementRef.nativeElement;ce.style.left=Lt.left,ce.style.width=Lt.width}}return ue.\u0275fac=function(ct){return new(ct||ue)(n.Y36(n.SBq),n.Y36(n.R0b),n.Y36($e),n.Y36(s.Qb,8))},ue.\u0275dir=n.lG2({type:ue,selectors:[["mat-ink-bar"]],hostAttrs:[1,"mat-ink-bar"],hostVars:2,hostBindings:function(ct,Lt){2&ct&&n.ekj("_mat-animation-noopable","NoopAnimations"===Lt._animationMode)}}),ue})();const Gt=new n.OlP("MatTabContent"),Zt=new n.OlP("MatTabLabel"),ie=new n.OlP("MAT_TAB");let St=(()=>{class ue extends e.ig{constructor(ct,Lt,ce){super(ct,Lt),this._closestTab=ce}}return ue.\u0275fac=function(ct){return new(ct||ue)(n.Y36(n.Rgc),n.Y36(n.s_b),n.Y36(ie,8))},ue.\u0275dir=n.lG2({type:ue,selectors:[["","mat-tab-label",""],["","matTabLabel",""]],features:[n._Bn([{provide:Zt,useExisting:ue}]),n.qOj]}),ue})();const jt=(0,r.Id)(class{}),Ce=new n.OlP("MAT_TAB_GROUP");let ri=(()=>{class ue extends jt{constructor(ct,Lt){super(),this._viewContainerRef=ct,this._closestTabGroup=Lt,this.textLabel="",this._contentPortal=null,this._stateChanges=new u.x,this.position=null,this.origin=null,this.isActive=!1}get templateLabel(){return this._templateLabel}set templateLabel(ct){this._setTemplateLabelInput(ct)}get content(){return this._contentPortal}ngOnChanges(ct){(ct.hasOwnProperty("textLabel")||ct.hasOwnProperty("disabled"))&&this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}ngOnInit(){this._contentPortal=new e.UE(this._explicitContent||this._implicitContent,this._viewContainerRef)}_setTemplateLabelInput(ct){ct&&ct._closestTab===this&&(this._templateLabel=ct)}}return ue.\u0275fac=function(ct){return new(ct||ue)(n.Y36(n.s_b),n.Y36(Ce,8))},ue.\u0275cmp=n.Xpm({type:ue,selectors:[["mat-tab"]],contentQueries:function(ct,Lt,ce){if(1&ct&&(n.Suo(ce,Zt,5),n.Suo(ce,Gt,7,n.Rgc)),2&ct){let Ne;n.iGM(Ne=n.CRH())&&(Lt.templateLabel=Ne.first),n.iGM(Ne=n.CRH())&&(Lt._explicitContent=Ne.first)}},viewQuery:function(ct,Lt){if(1&ct&&n.Gf(n.Rgc,7),2&ct){let ce;n.iGM(ce=n.CRH())&&(Lt._implicitContent=ce.first)}},inputs:{disabled:"disabled",textLabel:["label","textLabel"],ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"]},exportAs:["matTab"],features:[n._Bn([{provide:ie,useExisting:ue}]),n.qOj,n.TTD],ngContentSelectors:gt,decls:1,vars:0,template:function(ct,Lt){1&ct&&(n.F$t(),n.YNc(0,st,1,0,"ng-template"))},encapsulation:2}),ue})();const Te={translateTab:(0,et.X$)("translateTab",[(0,et.SB)("center, void, left-origin-center, right-origin-center",(0,et.oB)({transform:"none"})),(0,et.SB)("left",(0,et.oB)({transform:"translate3d(-100%, 0, 0)",minHeight:"1px"})),(0,et.SB)("right",(0,et.oB)({transform:"translate3d(100%, 0, 0)",minHeight:"1px"})),(0,et.eR)("* => left, * => right, left => center, right => center",(0,et.jt)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")),(0,et.eR)("void => left-origin-center",[(0,et.oB)({transform:"translate3d(-100%, 0, 0)"}),(0,et.jt)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")]),(0,et.eR)("void => right-origin-center",[(0,et.oB)({transform:"translate3d(100%, 0, 0)"}),(0,et.jt)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")])])};let te=(()=>{class ue extends e.Pl{constructor(ct,Lt,ce,Ne){super(ct,Lt,Ne),this._host=ce,this._centeringSub=b.w0.EMPTY,this._leavingSub=b.w0.EMPTY}ngOnInit(){super.ngOnInit(),this._centeringSub=this._host._beforeCentering.pipe((0,Tt.O)(this._host._isCenterPosition(this._host._position))).subscribe(ct=>{ct&&!this.hasAttached()&&this.attach(this._host._content)}),this._leavingSub=this._host._afterLeavingCenter.subscribe(()=>{this.detach()})}ngOnDestroy(){super.ngOnDestroy(),this._centeringSub.unsubscribe(),this._leavingSub.unsubscribe()}}return ue.\u0275fac=function(ct){return new(ct||ue)(n.Y36(n._Vd),n.Y36(n.s_b),n.Y36((0,n.Gpc)(()=>Oe)),n.Y36(t.K0))},ue.\u0275dir=n.lG2({type:ue,selectors:[["","matTabBodyHost",""]],features:[n.qOj]}),ue})(),ne=(()=>{class ue{constructor(ct,Lt,ce){this._elementRef=ct,this._dir=Lt,this._dirChangeSubscription=b.w0.EMPTY,this._translateTabComplete=new u.x,this._onCentering=new n.vpe,this._beforeCentering=new n.vpe,this._afterLeavingCenter=new n.vpe,this._onCentered=new n.vpe(!0),this.animationDuration="500ms",Lt&&(this._dirChangeSubscription=Lt.change.subscribe(Ne=>{this._computePositionAnimationState(Ne),ce.markForCheck()})),this._translateTabComplete.pipe((0,Pt.x)((Ne,Wi)=>Ne.fromState===Wi.fromState&&Ne.toState===Wi.toState)).subscribe(Ne=>{this._isCenterPosition(Ne.toState)&&this._isCenterPosition(this._position)&&this._onCentered.emit(),this._isCenterPosition(Ne.fromState)&&!this._isCenterPosition(this._position)&&this._afterLeavingCenter.emit()})}set position(ct){this._positionIndex=ct,this._computePositionAnimationState()}ngOnInit(){"center"==this._position&&null!=this.origin&&(this._position=this._computePositionFromOrigin(this.origin))}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._translateTabComplete.complete()}_onTranslateTabStarted(ct){const Lt=this._isCenterPosition(ct.toState);this._beforeCentering.emit(Lt),Lt&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_isCenterPosition(ct){return"center"==ct||"left-origin-center"==ct||"right-origin-center"==ct}_computePositionAnimationState(ct=this._getLayoutDirection()){this._position=this._positionIndex<0?"ltr"==ct?"left":"right":this._positionIndex>0?"ltr"==ct?"right":"left":"center"}_computePositionFromOrigin(ct){const Lt=this._getLayoutDirection();return"ltr"==Lt&&ct<=0||"rtl"==Lt&&ct>0?"left-origin-center":"right-origin-center"}}return ue.\u0275fac=function(ct){return new(ct||ue)(n.Y36(n.SBq),n.Y36(It.Is,8),n.Y36(n.sBO))},ue.\u0275dir=n.lG2({type:ue,inputs:{_content:["content","_content"],origin:"origin",animationDuration:"animationDuration",position:"position"},outputs:{_onCentering:"_onCentering",_beforeCentering:"_beforeCentering",_afterLeavingCenter:"_afterLeavingCenter",_onCentered:"_onCentered"}}),ue})(),Oe=(()=>{class ue extends ne{constructor(ct,Lt,ce){super(ct,Lt,ce)}}return ue.\u0275fac=function(ct){return new(ct||ue)(n.Y36(n.SBq),n.Y36(It.Is,8),n.Y36(n.sBO))},ue.\u0275cmp=n.Xpm({type:ue,selectors:[["mat-tab-body"]],viewQuery:function(ct,Lt){if(1&ct&&n.Gf(e.Pl,5),2&ct){let ce;n.iGM(ce=n.CRH())&&(Lt._portalHost=ce.first)}},hostAttrs:[1,"mat-tab-body"],features:[n.qOj],decls:3,vars:6,consts:[["cdkScrollable","",1,"mat-tab-body-content"],["content",""],["matTabBodyHost",""]],template:function(ct,Lt){1&ct&&(n.TgZ(0,"div",0,1),n.NdJ("@translateTab.start",function(Ne){return Lt._onTranslateTabStarted(Ne)})("@translateTab.done",function(Ne){return Lt._translateTabComplete.next(Ne)}),n.YNc(2,lt,0,0,"ng-template",2),n.qZA()),2&ct&&n.Q6J("@translateTab",n.WLB(3,Dt,Lt._position,n.VKq(1,Bt,Lt.animationDuration)))},directives:[te],styles:[".mat-tab-body-content{height:100%;overflow:auto}.mat-tab-group-dynamic-height .mat-tab-body-content{overflow:hidden}\n"],encapsulation:2,data:{animation:[Te.translateTab]}}),ue})();const re=new n.OlP("MAT_TABS_CONFIG"),me=(0,r.Id)(class{});let ye=(()=>{class ue extends me{constructor(ct){super(),this.elementRef=ct}focus(){this.elementRef.nativeElement.focus()}getOffsetLeft(){return this.elementRef.nativeElement.offsetLeft}getOffsetWidth(){return this.elementRef.nativeElement.offsetWidth}}return ue.\u0275fac=function(ct){return new(ct||ue)(n.Y36(n.SBq))},ue.\u0275dir=n.lG2({type:ue,selectors:[["","matTabLabelWrapper",""]],hostVars:3,hostBindings:function(ct,Lt){2&ct&&(n.uIk("aria-disabled",!!Lt.disabled),n.ekj("mat-tab-disabled",Lt.disabled))},inputs:{disabled:"disabled"},features:[n.qOj]}),ue})();const Qt=(0,Ct.i$)({passive:!0});let Pi=(()=>{class ue{constructor(ct,Lt,ce,Ne,Wi,qi,Sn){this._elementRef=ct,this._changeDetectorRef=Lt,this._viewportRuler=ce,this._dir=Ne,this._ngZone=Wi,this._platform=qi,this._animationMode=Sn,this._scrollDistance=0,this._selectedIndexChanged=!1,this._destroyed=new u.x,this._showPaginationControls=!1,this._disableScrollAfter=!0,this._disableScrollBefore=!0,this._stopScrolling=new u.x,this.disablePagination=!1,this._selectedIndex=0,this.selectFocusedIndex=new n.vpe,this.indexFocused=new n.vpe,Wi.runOutsideAngular(()=>{(0,x.R)(ct.nativeElement,"mouseleave").pipe((0,pt.R)(this._destroyed)).subscribe(()=>{this._stopInterval()})})}get selectedIndex(){return this._selectedIndex}set selectedIndex(ct){ct=(0,Ht.su)(ct),this._selectedIndex!=ct&&(this._selectedIndexChanged=!0,this._selectedIndex=ct,this._keyManager&&this._keyManager.updateActiveItem(ct))}ngAfterViewInit(){(0,x.R)(this._previousPaginator.nativeElement,"touchstart",Qt).pipe((0,pt.R)(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("before")}),(0,x.R)(this._nextPaginator.nativeElement,"touchstart",Qt).pipe((0,pt.R)(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("after")})}ngAfterContentInit(){const ct=this._dir?this._dir.change:(0,B.of)("ltr"),Lt=this._viewportRuler.change(150),ce=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new T.Em(this._items).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap(),this._keyManager.updateActiveItem(this._selectedIndex),"undefined"!=typeof requestAnimationFrame?requestAnimationFrame(ce):ce(),(0,Z.T)(ct,Lt,this._items.changes).pipe((0,pt.R)(this._destroyed)).subscribe(()=>{this._ngZone.run(()=>Promise.resolve().then(ce)),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.pipe((0,pt.R)(this._destroyed)).subscribe(Ne=>{this.indexFocused.emit(Ne),this._setTabFocus(Ne)})}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(ct){if(!(0,Jt.Vb)(ct))switch(ct.keyCode){case Jt.K5:case Jt.L_:this.focusIndex!==this.selectedIndex&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(ct));break;default:this._keyManager.onKeydown(ct)}}_onContentChanges(){const ct=this._elementRef.nativeElement.textContent;ct!==this._currentTextContent&&(this._currentTextContent=ct||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(ct){!this._isValidIndex(ct)||this.focusIndex===ct||!this._keyManager||this._keyManager.setActiveItem(ct)}_isValidIndex(ct){if(!this._items)return!0;const Lt=this._items?this._items.toArray()[ct]:null;return!!Lt&&!Lt.disabled}_setTabFocus(ct){if(this._showPaginationControls&&this._scrollToLabel(ct),this._items&&this._items.length){this._items.toArray()[ct].focus();const Lt=this._tabListContainer.nativeElement;Lt.scrollLeft="ltr"==this._getLayoutDirection()?0:Lt.scrollWidth-Lt.offsetWidth}}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination)return;const ct=this.scrollDistance,Lt="ltr"===this._getLayoutDirection()?-ct:ct;this._tabList.nativeElement.style.transform=`translateX(${Math.round(Lt)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(ct){this._scrollTo(ct)}_scrollHeader(ct){return this._scrollTo(this._scrollDistance+("before"==ct?-1:1)*this._tabListContainer.nativeElement.offsetWidth/3)}_handlePaginatorClick(ct){this._stopInterval(),this._scrollHeader(ct)}_scrollToLabel(ct){if(this.disablePagination)return;const Lt=this._items?this._items.toArray()[ct]:null;if(!Lt)return;const ce=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:Ne,offsetWidth:Wi}=Lt.elementRef.nativeElement;let qi,Sn;"ltr"==this._getLayoutDirection()?(qi=Ne,Sn=qi+Wi):(Sn=this._tabListInner.nativeElement.offsetWidth-Ne,qi=Sn-Wi);const ir=this.scrollDistance,ci=this.scrollDistance+ce;qi<ir?this.scrollDistance-=ir-qi+60:Sn>ci&&(this.scrollDistance+=Sn-ci+60)}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{const ct=this._tabListInner.nativeElement.scrollWidth>this._elementRef.nativeElement.offsetWidth;ct||(this.scrollDistance=0),ct!==this._showPaginationControls&&this._changeDetectorRef.markForCheck(),this._showPaginationControls=ct}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=0==this.scrollDistance,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){return this._tabListInner.nativeElement.scrollWidth-this._tabListContainer.nativeElement.offsetWidth||0}_alignInkBarToSelectedTab(){const ct=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,Lt=ct?ct.elementRef.nativeElement:null;Lt?this._inkBar.alignToElement(Lt):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(ct,Lt){Lt&&null!=Lt.button&&0!==Lt.button||(this._stopInterval(),(0,ot.H)(650,100).pipe((0,pt.R)((0,Z.T)(this._stopScrolling,this._destroyed))).subscribe(()=>{const{maxScrollDistance:ce,distance:Ne}=this._scrollHeader(ct);(0===Ne||Ne>=ce)&&this._stopInterval()}))}_scrollTo(ct){if(this.disablePagination)return{maxScrollDistance:0,distance:0};const Lt=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(Lt,ct)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:Lt,distance:this._scrollDistance}}}return ue.\u0275fac=function(ct){return new(ct||ue)(n.Y36(n.SBq),n.Y36(n.sBO),n.Y36(bt.rL),n.Y36(It.Is,8),n.Y36(n.R0b),n.Y36(Ct.t4),n.Y36(s.Qb,8))},ue.\u0275dir=n.lG2({type:ue,inputs:{disablePagination:"disablePagination"}}),ue})(),wi=(()=>{class ue extends Pi{constructor(ct,Lt,ce,Ne,Wi,qi,Sn){super(ct,Lt,ce,Ne,Wi,qi,Sn),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(ct){this._disableRipple=(0,Ht.Ig)(ct)}_itemSelected(ct){ct.preventDefault()}}return ue.\u0275fac=function(ct){return new(ct||ue)(n.Y36(n.SBq),n.Y36(n.sBO),n.Y36(bt.rL),n.Y36(It.Is,8),n.Y36(n.R0b),n.Y36(Ct.t4),n.Y36(s.Qb,8))},ue.\u0275dir=n.lG2({type:ue,inputs:{disableRipple:"disableRipple"},features:[n.qOj]}),ue})(),yi=(()=>{class ue extends wi{constructor(ct,Lt,ce,Ne,Wi,qi,Sn){super(ct,Lt,ce,Ne,Wi,qi,Sn)}}return ue.\u0275fac=function(ct){return new(ct||ue)(n.Y36(n.SBq),n.Y36(n.sBO),n.Y36(bt.rL),n.Y36(It.Is,8),n.Y36(n.R0b),n.Y36(Ct.t4),n.Y36(s.Qb,8))},ue.\u0275cmp=n.Xpm({type:ue,selectors:[["mat-tab-header"]],contentQueries:function(ct,Lt,ce){if(1&ct&&n.Suo(ce,ye,4),2&ct){let Ne;n.iGM(Ne=n.CRH())&&(Lt._items=Ne)}},viewQuery:function(ct,Lt){if(1&ct&&(n.Gf(pi,7),n.Gf(Et,7),n.Gf(ut,7),n.Gf(rt,7),n.Gf(fe,5),n.Gf(Mt,5)),2&ct){let ce;n.iGM(ce=n.CRH())&&(Lt._inkBar=ce.first),n.iGM(ce=n.CRH())&&(Lt._tabListContainer=ce.first),n.iGM(ce=n.CRH())&&(Lt._tabList=ce.first),n.iGM(ce=n.CRH())&&(Lt._tabListInner=ce.first),n.iGM(ce=n.CRH())&&(Lt._nextPaginator=ce.first),n.iGM(ce=n.CRH())&&(Lt._previousPaginator=ce.first)}},hostAttrs:[1,"mat-tab-header"],hostVars:4,hostBindings:function(ct,Lt){2&ct&&n.ekj("mat-tab-header-pagination-controls-enabled",Lt._showPaginationControls)("mat-tab-header-rtl","rtl"==Lt._getLayoutDirection())},inputs:{selectedIndex:"selectedIndex"},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"},features:[n.qOj],ngContentSelectors:gt,decls:14,vars:8,consts:[["aria-hidden","true","mat-ripple","",1,"mat-tab-header-pagination","mat-tab-header-pagination-before","mat-elevation-z4",3,"matRippleDisabled","click","mousedown","touchend"],["previousPaginator",""],[1,"mat-tab-header-pagination-chevron"],[1,"mat-tab-label-container",3,"keydown"],["tabListContainer",""],["role","tablist",1,"mat-tab-list",3,"cdkObserveContent"],["tabList",""],[1,"mat-tab-labels"],["tabListInner",""],["aria-hidden","true","mat-ripple","",1,"mat-tab-header-pagination","mat-tab-header-pagination-after","mat-elevation-z4",3,"matRippleDisabled","mousedown","click","touchend"],["nextPaginator",""]],template:function(ct,Lt){1&ct&&(n.F$t(),n.TgZ(0,"div",0,1),n.NdJ("click",function(){return Lt._handlePaginatorClick("before")})("mousedown",function(Ne){return Lt._handlePaginatorPress("before",Ne)})("touchend",function(){return Lt._stopInterval()}),n._UZ(2,"div",2),n.qZA(),n.TgZ(3,"div",3,4),n.NdJ("keydown",function(Ne){return Lt._handleKeydown(Ne)}),n.TgZ(5,"div",5,6),n.NdJ("cdkObserveContent",function(){return Lt._onContentChanges()}),n.TgZ(7,"div",7,8),n.Hsn(9),n.qZA(),n._UZ(10,"mat-ink-bar"),n.qZA(),n.qZA(),n.TgZ(11,"div",9,10),n.NdJ("mousedown",function(Ne){return Lt._handlePaginatorPress("after",Ne)})("click",function(){return Lt._handlePaginatorClick("after")})("touchend",function(){return Lt._stopInterval()}),n._UZ(13,"div",2),n.qZA()),2&ct&&(n.ekj("mat-tab-header-pagination-disabled",Lt._disableScrollBefore),n.Q6J("matRippleDisabled",Lt._disableScrollBefore||Lt.disableRipple),n.xp6(5),n.ekj("_mat-animation-noopable","NoopAnimations"===Lt._animationMode),n.xp6(6),n.ekj("mat-tab-header-pagination-disabled",Lt._disableScrollAfter),n.Q6J("matRippleDisabled",Lt._disableScrollAfter||Lt.disableRipple))},directives:[r.wG,_.wD,pi],styles:[".mat-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mat-tab-header-pagination{-webkit-user-select:none;-moz-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:transparent;touch-action:none}.mat-tab-header-pagination-controls-enabled .mat-tab-header-pagination{display:flex}.mat-tab-header-pagination-before,.mat-tab-header-rtl .mat-tab-header-pagination-after{padding-left:4px}.mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-rtl .mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-tab-header-rtl .mat-tab-header-pagination-before,.mat-tab-header-pagination-after{padding-right:4px}.mat-tab-header-rtl .mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;height:8px;width:8px}.mat-tab-header-pagination-disabled{box-shadow:none;cursor:default}.mat-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-ink-bar{position:absolute;bottom:0;height:2px;transition:500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable.mat-ink-bar{transition:none;animation:none}.mat-tab-group-inverted-header .mat-ink-bar{bottom:auto;top:0}.cdk-high-contrast-active .mat-ink-bar{outline:solid 2px;height:0}.mat-tab-labels{display:flex}[mat-align-tabs=center]>.mat-tab-header .mat-tab-labels{justify-content:center}[mat-align-tabs=end]>.mat-tab-header .mat-tab-labels{justify-content:flex-end}.mat-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1}._mat-animation-noopable.mat-tab-list{transition:none;animation:none}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:none}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.cdk-high-contrast-active .mat-tab-label:focus{outline:dotted 2px;outline-offset:-2px}.mat-tab-label.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-label.mat-tab-disabled{opacity:.5}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-label{opacity:1}@media(max-width: 599px){.mat-tab-label{min-width:72px}}\n"],encapsulation:2}),ue})(),dn=0;class mi{}const Zi=(0,r.pj)((0,r.Kr)(class{constructor(ue){this._elementRef=ue}}),"primary");let Re=(()=>{class ue extends Zi{constructor(ct,Lt,ce,Ne){var Wi;super(ct),this._changeDetectorRef=Lt,this._animationMode=Ne,this._tabs=new n.n_E,this._indexToSelect=0,this._tabBodyWrapperHeight=0,this._tabsSubscription=b.w0.EMPTY,this._tabLabelSubscription=b.w0.EMPTY,this._selectedIndex=null,this.headerPosition="above",this.selectedIndexChange=new n.vpe,this.focusChange=new n.vpe,this.animationDone=new n.vpe,this.selectedTabChange=new n.vpe(!0),this._groupId=dn++,this.animationDuration=ce&&ce.animationDuration?ce.animationDuration:"500ms",this.disablePagination=!(!ce||null==ce.disablePagination)&&ce.disablePagination,this.dynamicHeight=!(!ce||null==ce.dynamicHeight)&&ce.dynamicHeight,this.contentTabIndex=null!==(Wi=null==ce?void 0:ce.contentTabIndex)&&void 0!==Wi?Wi:null}get dynamicHeight(){return this._dynamicHeight}set dynamicHeight(ct){this._dynamicHeight=(0,Ht.Ig)(ct)}get selectedIndex(){return this._selectedIndex}set selectedIndex(ct){this._indexToSelect=(0,Ht.su)(ct,null)}get animationDuration(){return this._animationDuration}set animationDuration(ct){this._animationDuration=/^\d+$/.test(ct+"")?ct+"ms":ct}get contentTabIndex(){return this._contentTabIndex}set contentTabIndex(ct){this._contentTabIndex=(0,Ht.su)(ct,null)}get backgroundColor(){return this._backgroundColor}set backgroundColor(ct){const Lt=this._elementRef.nativeElement;Lt.classList.remove(`mat-background-${this.backgroundColor}`),ct&&Lt.classList.add(`mat-background-${ct}`),this._backgroundColor=ct}ngAfterContentChecked(){const ct=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=ct){const Lt=null==this._selectedIndex;if(!Lt){this.selectedTabChange.emit(this._createChangeEvent(ct));const ce=this._tabBodyWrapper.nativeElement;ce.style.minHeight=ce.clientHeight+"px"}Promise.resolve().then(()=>{this._tabs.forEach((ce,Ne)=>ce.isActive=Ne===ct),Lt||(this.selectedIndexChange.emit(ct),this._tabBodyWrapper.nativeElement.style.minHeight="")})}this._tabs.forEach((Lt,ce)=>{Lt.position=ce-ct,null!=this._selectedIndex&&0==Lt.position&&!Lt.origin&&(Lt.origin=ct-this._selectedIndex)}),this._selectedIndex!==ct&&(this._selectedIndex=ct,this._changeDetectorRef.markForCheck())}ngAfterContentInit(){this._subscribeToAllTabChanges(),this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe(()=>{if(this._clampTabIndex(this._indexToSelect)===this._selectedIndex){const Lt=this._tabs.toArray();for(let ce=0;ce<Lt.length;ce++)if(Lt[ce].isActive){this._indexToSelect=this._selectedIndex=ce;break}}this._changeDetectorRef.markForCheck()})}_subscribeToAllTabChanges(){this._allTabs.changes.pipe((0,Tt.O)(this._allTabs)).subscribe(ct=>{this._tabs.reset(ct.filter(Lt=>Lt._closestTabGroup===this||!Lt._closestTabGroup)),this._tabs.notifyOnChanges()})}ngOnDestroy(){this._tabs.destroy(),this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe()}realignInkBar(){this._tabHeader&&this._tabHeader._alignInkBarToSelectedTab()}focusTab(ct){const Lt=this._tabHeader;Lt&&(Lt.focusIndex=ct)}_focusChanged(ct){this.focusChange.emit(this._createChangeEvent(ct))}_createChangeEvent(ct){const Lt=new mi;return Lt.index=ct,this._tabs&&this._tabs.length&&(Lt.tab=this._tabs.toArray()[ct]),Lt}_subscribeToTabLabels(){this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=(0,Z.T)(...this._tabs.map(ct=>ct._stateChanges)).subscribe(()=>this._changeDetectorRef.markForCheck())}_clampTabIndex(ct){return Math.min(this._tabs.length-1,Math.max(ct||0,0))}_getTabLabelId(ct){return`mat-tab-label-${this._groupId}-${ct}`}_getTabContentId(ct){return`mat-tab-content-${this._groupId}-${ct}`}_setTabBodyWrapperHeight(ct){if(!this._dynamicHeight||!this._tabBodyWrapperHeight)return;const Lt=this._tabBodyWrapper.nativeElement;Lt.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(Lt.style.height=ct+"px")}_removeTabBodyWrapperHeight(){const ct=this._tabBodyWrapper.nativeElement;this._tabBodyWrapperHeight=ct.clientHeight,ct.style.height="",this.animationDone.emit()}_handleClick(ct,Lt,ce){ct.disabled||(this.selectedIndex=Lt.focusIndex=ce)}_getTabIndex(ct,Lt){return ct.disabled?null:this.selectedIndex===Lt?0:-1}_tabFocusChanged(ct,Lt){ct&&"mouse"!==ct&&"touch"!==ct&&(this._tabHeader.focusIndex=Lt)}}return ue.\u0275fac=function(ct){return new(ct||ue)(n.Y36(n.SBq),n.Y36(n.sBO),n.Y36(re,8),n.Y36(s.Qb,8))},ue.\u0275dir=n.lG2({type:ue,inputs:{dynamicHeight:"dynamicHeight",selectedIndex:"selectedIndex",headerPosition:"headerPosition",animationDuration:"animationDuration",contentTabIndex:"contentTabIndex",disablePagination:"disablePagination",backgroundColor:"backgroundColor"},outputs:{selectedIndexChange:"selectedIndexChange",focusChange:"focusChange",animationDone:"animationDone",selectedTabChange:"selectedTabChange"},features:[n.qOj]}),ue})(),xe=(()=>{class ue extends Re{constructor(ct,Lt,ce,Ne){super(ct,Lt,ce,Ne)}}return ue.\u0275fac=function(ct){return new(ct||ue)(n.Y36(n.SBq),n.Y36(n.sBO),n.Y36(re,8),n.Y36(s.Qb,8))},ue.\u0275cmp=n.Xpm({type:ue,selectors:[["mat-tab-group"]],contentQueries:function(ct,Lt,ce){if(1&ct&&n.Suo(ce,ri,5),2&ct){let Ne;n.iGM(Ne=n.CRH())&&(Lt._allTabs=Ne)}},viewQuery:function(ct,Lt){if(1&ct&&(n.Gf(Nt,5),n.Gf(ge,5)),2&ct){let ce;n.iGM(ce=n.CRH())&&(Lt._tabBodyWrapper=ce.first),n.iGM(ce=n.CRH())&&(Lt._tabHeader=ce.first)}},hostAttrs:[1,"mat-tab-group"],hostVars:4,hostBindings:function(ct,Lt){2&ct&&n.ekj("mat-tab-group-dynamic-height",Lt.dynamicHeight)("mat-tab-group-inverted-header","below"===Lt.headerPosition)},inputs:{color:"color",disableRipple:"disableRipple"},exportAs:["matTabGroup"],features:[n._Bn([{provide:Ce,useExisting:ue}]),n.qOj],decls:6,vars:7,consts:[[3,"selectedIndex","disableRipple","disablePagination","indexFocused","selectFocusedIndex"],["tabHeader",""],["class","mat-tab-label mat-focus-indicator","role","tab","matTabLabelWrapper","","mat-ripple","","cdkMonitorElementFocus","",3,"id","mat-tab-label-active","disabled","matRippleDisabled","click","cdkFocusChange",4,"ngFor","ngForOf"],[1,"mat-tab-body-wrapper"],["tabBodyWrapper",""],["role","tabpanel",3,"id","mat-tab-body-active","content","position","origin","animationDuration","_onCentered","_onCentering",4,"ngFor","ngForOf"],["role","tab","matTabLabelWrapper","","mat-ripple","","cdkMonitorElementFocus","",1,"mat-tab-label","mat-focus-indicator",3,"id","disabled","matRippleDisabled","click","cdkFocusChange"],[1,"mat-tab-label-content"],[3,"ngIf"],[3,"cdkPortalOutlet"],["role","tabpanel",3,"id","content","position","origin","animationDuration","_onCentered","_onCentering"]],template:function(ct,Lt){1&ct&&(n.TgZ(0,"mat-tab-header",0,1),n.NdJ("indexFocused",function(Ne){return Lt._focusChanged(Ne)})("selectFocusedIndex",function(Ne){return Lt.selectedIndex=Ne}),n.YNc(2,ke,4,14,"div",2),n.qZA(),n.TgZ(3,"div",3,4),n.YNc(5,Ze,1,9,"mat-tab-body",5),n.qZA()),2&ct&&(n.Q6J("selectedIndex",Lt.selectedIndex||0)("disableRipple",Lt.disableRipple)("disablePagination",Lt.disablePagination),n.xp6(2),n.Q6J("ngForOf",Lt._tabs),n.xp6(1),n.ekj("_mat-animation-noopable","NoopAnimations"===Lt._animationMode),n.xp6(2),n.Q6J("ngForOf",Lt._tabs))},directives:[yi,t.sg,ye,r.wG,T.kH,t.O5,e.Pl,Oe],styles:[".mat-tab-group{display:flex;flex-direction:column;max-width:100%}.mat-tab-group.mat-tab-group-inverted-header{flex-direction:column-reverse}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:none}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.cdk-high-contrast-active .mat-tab-label:focus{outline:dotted 2px;outline-offset:-2px}.mat-tab-label.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-label.mat-tab-disabled{opacity:.5}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-label{opacity:1}@media(max-width: 599px){.mat-tab-label{padding:0 12px}}@media(max-width: 959px){.mat-tab-label{padding:0 12px}}.mat-tab-group[mat-stretch-tabs]>.mat-tab-header .mat-tab-label{flex-basis:0;flex-grow:1}.mat-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height 500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable.mat-tab-body-wrapper{transition:none;animation:none}.mat-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden;outline:0;flex-basis:100%}.mat-tab-body.mat-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-tab-group.mat-tab-group-dynamic-height .mat-tab-body.mat-tab-body-active{overflow-y:hidden}\n"],encapsulation:2}),ue})(),Je=(()=>{class ue{}return ue.\u0275fac=function(ct){return new(ct||ue)},ue.\u0275mod=n.oAB({type:ue}),ue.\u0275inj=n.cJS({imports:[[t.ez,r.BQ,e.eL,r.si,_.Q8,T.rt],r.BQ]}),ue})()},76360:(U,$,m)=>{"use strict";m.d($,{Qb:()=>wa,PW:()=>Ps});var T=m(5e3),_=m(22313),e=m(41777);function t(){return"undefined"!=typeof window&&void 0!==window.document}function n(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function r(Wt){switch(Wt.length){case 0:return new e.ZN;case 1:return Wt[0];default:return new e.ZE(Wt)}}function s(Wt,G,K,_t,ee={},be={}){const Xe=[],qe=[];let bi=-1,Ui=null;if(_t.forEach(hn=>{const Cn=hn.offset,Zn=Cn==bi,Qn=Zn&&Ui||{};Object.keys(hn).forEach(Nn=>{let tr=Nn,er=hn[Nn];if("offset"!==Nn)switch(tr=G.normalizePropertyName(tr,Xe),er){case e.k1:er=ee[Nn];break;case e.l3:er=be[Nn];break;default:er=G.normalizeStyleValue(Nn,tr,er,Xe)}Qn[tr]=er}),Zn||qe.push(Qn),Ui=Qn,bi=Cn}),Xe.length){const hn="\n - ";throw new Error(`Unable to animate due to the following errors:${hn}${Xe.join(hn)}`)}return qe}function u(Wt,G,K,_t){switch(G){case"start":Wt.onStart(()=>_t(K&&b(K,"start",Wt)));break;case"done":Wt.onDone(()=>_t(K&&b(K,"done",Wt)));break;case"destroy":Wt.onDestroy(()=>_t(K&&b(K,"destroy",Wt)))}}function b(Wt,G,K){const _t=K.totalTime,be=x(Wt.element,Wt.triggerName,Wt.fromState,Wt.toState,G||Wt.phaseName,null==_t?Wt.totalTime:_t,!!K.disabled),Xe=Wt._data;return null!=Xe&&(be._data=Xe),be}function x(Wt,G,K,_t,ee="",be=0,Xe){return{element:Wt,triggerName:G,fromState:K,toState:_t,phaseName:ee,totalTime:be,disabled:!!Xe}}function B(Wt,G,K){let _t;return Wt instanceof Map?(_t=Wt.get(G),_t||Wt.set(G,_t=K)):(_t=Wt[G],_t||(_t=Wt[G]=K)),_t}function Z(Wt){const G=Wt.indexOf(":");return[Wt.substring(1,G),Wt.substr(G+1)]}let ot=(Wt,G)=>!1,et=(Wt,G,K)=>[];(n()||"undefined"!=typeof Element)&&(ot=t()?(Wt,G)=>{for(;G&&G!==document.documentElement;){if(G===Wt)return!0;G=G.parentNode||G.host}return!1}:(Wt,G)=>Wt.contains(G),et=(Wt,G,K)=>{let _t=[];if(K){const ee=Wt.querySelectorAll(G);for(let be=0;be<ee.length;be++)_t.push(ee[be])}else{const ee=Wt.querySelector(G);ee&&_t.push(ee)}return _t});let pt=null,It=!1;function Ht(Wt){pt||(pt=("undefined"!=typeof document?document.body:null)||{},It=!!pt.style&&"WebkitAppearance"in pt.style);let G=!0;return pt.style&&!function(Wt){return"ebkit"==Wt.substring(1,6)}(Wt)&&(G=Wt in pt.style,!G&&It&&(G="Webkit"+Wt.charAt(0).toUpperCase()+Wt.substr(1)in pt.style)),G}const Ct=ot,bt=et;function st(Wt){const G={};return Object.keys(Wt).forEach(K=>{const _t=K.replace(/([a-z])([A-Z])/g,"$1-$2");G[_t]=Wt[K]}),G}let gt=(()=>{class Wt{validateStyleProperty(K){return Ht(K)}matchesElement(K,_t){return!1}containsElement(K,_t){return Ct(K,_t)}query(K,_t,ee){return bt(K,_t,ee)}computeStyle(K,_t,ee){return ee||""}animate(K,_t,ee,be,Xe,qe=[],bi){return new e.ZN(ee,be)}}return Wt.\u0275fac=function(K){return new(K||Wt)},Wt.\u0275prov=T.Yz7({token:Wt,factory:Wt.\u0275fac}),Wt})(),lt=(()=>{class Wt{}return Wt.NOOP=new gt,Wt})();const ut="ng-enter",rt="ng-leave",fe="ng-trigger",Mt=".ng-trigger",Nt="ng-animating",ge=".ng-animating";function ve(Wt){if("number"==typeof Wt)return Wt;const G=Wt.match(/^(-?[\.\d]+)(m?s)/);return!G||G.length<2?0:pe(parseFloat(G[1]),G[2])}function pe(Wt,G){return"s"===G?1e3*Wt:Wt}function He(Wt,G,K){return Wt.hasOwnProperty("duration")?Wt:function(Wt,G,K){let ee,be=0,Xe="";if("string"==typeof Wt){const qe=Wt.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===qe)return G.push(`The provided timing value "${Wt}" is invalid.`),{duration:0,delay:0,easing:""};ee=pe(parseFloat(qe[1]),qe[2]);const bi=qe[3];null!=bi&&(be=pe(parseFloat(bi),qe[4]));const Ui=qe[5];Ui&&(Xe=Ui)}else ee=Wt;if(!K){let qe=!1,bi=G.length;ee<0&&(G.push("Duration values below 0 are not allowed for this animation step."),qe=!0),be<0&&(G.push("Delay values below 0 are not allowed for this animation step."),qe=!0),qe&&G.splice(bi,0,`The provided timing value "${Wt}" is invalid.`)}return{duration:ee,delay:be,easing:Xe}}(Wt,G,K)}function Ze(Wt,G={}){return Object.keys(Wt).forEach(K=>{G[K]=Wt[K]}),G}function $e(Wt,G,K={}){if(G)for(let _t in Wt)K[_t]=Wt[_t];else Ze(Wt,K);return K}function Le(Wt,G,K){return K?G+":"+K+";":""}function pi(Wt){let G="";for(let K=0;K<Wt.style.length;K++){const _t=Wt.style.item(K);G+=Le(0,_t,Wt.style.getPropertyValue(_t))}for(const K in Wt.style)Wt.style.hasOwnProperty(K)&&!K.startsWith("_")&&(G+=Le(0,ne(K),Wt.style[K]));Wt.setAttribute("style",G)}function Gt(Wt,G,K){Wt.style&&(Object.keys(G).forEach(_t=>{const ee=te(_t);K&&!K.hasOwnProperty(_t)&&(K[_t]=Wt.style[ee]),Wt.style[ee]=G[_t]}),n()&&pi(Wt))}function Se(Wt,G){Wt.style&&(Object.keys(G).forEach(K=>{const _t=te(K);Wt.style[_t]=""}),n()&&pi(Wt))}function Zt(Wt){return Array.isArray(Wt)?1==Wt.length?Wt[0]:(0,e.vP)(Wt):Wt}const St=new RegExp("{{\\s*(.+?)\\s*}}","g");function jt(Wt){let G=[];if("string"==typeof Wt){let K;for(;K=St.exec(Wt);)G.push(K[1]);St.lastIndex=0}return G}function Ce(Wt,G,K){const _t=Wt.toString(),ee=_t.replace(St,(be,Xe)=>{let qe=G[Xe];return G.hasOwnProperty(Xe)||(K.push(`Please provide a value for the animation param ${Xe}`),qe=""),qe.toString()});return ee==_t?Wt:ee}function ri(Wt){const G=[];let K=Wt.next();for(;!K.done;)G.push(K.value),K=Wt.next();return G}const Te=/-+([a-z0-9])/g;function te(Wt){return Wt.replace(Te,(...G)=>G[1].toUpperCase())}function ne(Wt){return Wt.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Oe(Wt,G){return 0===Wt||0===G}function re(Wt,G,K){const _t=Object.keys(K);if(_t.length&&G.length){let be=G[0],Xe=[];if(_t.forEach(qe=>{be.hasOwnProperty(qe)||Xe.push(qe),be[qe]=K[qe]}),Xe.length)for(var ee=1;ee<G.length;ee++){let qe=G[ee];Xe.forEach(function(bi){qe[bi]=ye(Wt,bi)})}}return G}function me(Wt,G,K){switch(G.type){case 7:return Wt.visitTrigger(G,K);case 0:return Wt.visitState(G,K);case 1:return Wt.visitTransition(G,K);case 2:return Wt.visitSequence(G,K);case 3:return Wt.visitGroup(G,K);case 4:return Wt.visitAnimate(G,K);case 5:return Wt.visitKeyframes(G,K);case 6:return Wt.visitStyle(G,K);case 8:return Wt.visitReference(G,K);case 9:return Wt.visitAnimateChild(G,K);case 10:return Wt.visitAnimateRef(G,K);case 11:return Wt.visitQuery(G,K);case 12:return Wt.visitStagger(G,K);default:throw new Error(`Unable to resolve animation metadata node #${G.type}`)}}function ye(Wt,G){return window.getComputedStyle(Wt)[G]}function de(Wt,G){const K=[];return"string"==typeof Wt?Wt.split(/\s*,\s*/).forEach(_t=>function(Wt,G,K){if(":"==Wt[0]){const bi=function(Wt,G){switch(Wt){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(K,_t)=>parseFloat(_t)>parseFloat(K);case":decrement":return(K,_t)=>parseFloat(_t)<parseFloat(K);default:return G.push(`The transition alias value "${Wt}" is not supported`),"* => *"}}(Wt,K);if("function"==typeof bi)return void G.push(bi);Wt=bi}const _t=Wt.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==_t||_t.length<4)return K.push(`The provided transition expression "${Wt}" is not supported`),G;const ee=_t[1],be=_t[2],Xe=_t[3];G.push(yi(ee,Xe));"<"==be[0]&&!("*"==ee&&"*"==Xe)&&G.push(yi(Xe,ee))}(_t,K,G)):K.push(Wt),K}const Pi=new Set(["true","1"]),wi=new Set(["false","0"]);function yi(Wt,G){const K=Pi.has(Wt)||wi.has(Wt),_t=Pi.has(G)||wi.has(G);return(ee,be)=>{let Xe="*"==Wt||Wt==ee,qe="*"==G||G==be;return!Xe&&K&&"boolean"==typeof ee&&(Xe=ee?Pi.has(Wt):wi.has(Wt)),!qe&&_t&&"boolean"==typeof be&&(qe=be?Pi.has(G):wi.has(G)),Xe&&qe}}const mi=new RegExp("s*:selfs*,?","g");function Zi(Wt,G,K){return new xe(Wt).build(G,K)}class xe{constructor(G){this._driver=G}build(G,K){const _t=new Ii(K);return this._resetContextStyleTimingState(_t),me(this,Zt(G),_t)}_resetContextStyleTimingState(G){G.currentQuerySelector="",G.collectedStyles={},G.collectedStyles[""]={},G.currentTime=0}visitTrigger(G,K){let _t=K.queryCount=0,ee=K.depCount=0;const be=[],Xe=[];return"@"==G.name.charAt(0)&&K.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),G.definitions.forEach(qe=>{if(this._resetContextStyleTimingState(K),0==qe.type){const bi=qe,Ui=bi.name;Ui.toString().split(/\s*,\s*/).forEach(hn=>{bi.name=hn,be.push(this.visitState(bi,K))}),bi.name=Ui}else if(1==qe.type){const bi=this.visitTransition(qe,K);_t+=bi.queryCount,ee+=bi.depCount,Xe.push(bi)}else K.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:G.name,states:be,transitions:Xe,queryCount:_t,depCount:ee,options:null}}visitState(G,K){const _t=this.visitStyle(G.styles,K),ee=G.options&&G.options.params||null;if(_t.containsDynamicStyles){const be=new Set,Xe=ee||{};if(_t.styles.forEach(qe=>{if(Hi(qe)){const bi=qe;Object.keys(bi).forEach(Ui=>{jt(bi[Ui]).forEach(hn=>{Xe.hasOwnProperty(hn)||be.add(hn)})})}}),be.size){const qe=ri(be.values());K.errors.push(`state("${G.name}", ...) must define default values for all the following style substitutions: ${qe.join(", ")}`)}}return{type:0,name:G.name,style:_t,options:ee?{params:ee}:null}}visitTransition(G,K){K.queryCount=0,K.depCount=0;const _t=me(this,Zt(G.animation),K);return{type:1,matchers:de(G.expr,K.errors),animation:_t,queryCount:K.queryCount,depCount:K.depCount,options:ue(G.options)}}visitSequence(G,K){return{type:2,steps:G.steps.map(_t=>me(this,_t,K)),options:ue(G.options)}}visitGroup(G,K){const _t=K.currentTime;let ee=0;const be=G.steps.map(Xe=>{K.currentTime=_t;const qe=me(this,Xe,K);return ee=Math.max(ee,K.currentTime),qe});return K.currentTime=ee,{type:3,steps:be,options:ue(G.options)}}visitAnimate(G,K){const _t=function(Wt,G){let K=null;if(Wt.hasOwnProperty("duration"))K=Wt;else if("number"==typeof Wt)return kt(He(Wt,G).duration,0,"");const _t=Wt;if(_t.split(/\s+/).some(be=>"{"==be.charAt(0)&&"{"==be.charAt(1))){const be=kt(0,0,"");return be.dynamic=!0,be.strValue=_t,be}return K=K||He(_t,G),kt(K.duration,K.delay,K.easing)}(G.timings,K.errors);K.currentAnimateTimings=_t;let ee,be=G.styles?G.styles:(0,e.oB)({});if(5==be.type)ee=this.visitKeyframes(be,K);else{let Xe=G.styles,qe=!1;if(!Xe){qe=!0;const Ui={};_t.easing&&(Ui.easing=_t.easing),Xe=(0,e.oB)(Ui)}K.currentTime+=_t.duration+_t.delay;const bi=this.visitStyle(Xe,K);bi.isEmptyStep=qe,ee=bi}return K.currentAnimateTimings=null,{type:4,timings:_t,style:ee,options:null}}visitStyle(G,K){const _t=this._makeStyleAst(G,K);return this._validateStyleAst(_t,K),_t}_makeStyleAst(G,K){const _t=[];Array.isArray(G.styles)?G.styles.forEach(Xe=>{"string"==typeof Xe?Xe==e.l3?_t.push(Xe):K.errors.push(`The provided style string value ${Xe} is not allowed.`):_t.push(Xe)}):_t.push(G.styles);let ee=!1,be=null;return _t.forEach(Xe=>{if(Hi(Xe)){const qe=Xe,bi=qe.easing;if(bi&&(be=bi,delete qe.easing),!ee)for(let Ui in qe)if(qe[Ui].toString().indexOf("{{")>=0){ee=!0;break}}}),{type:6,styles:_t,easing:be,offset:G.offset,containsDynamicStyles:ee,options:null}}_validateStyleAst(G,K){const _t=K.currentAnimateTimings;let ee=K.currentTime,be=K.currentTime;_t&&be>0&&(be-=_t.duration+_t.delay),G.styles.forEach(Xe=>{"string"!=typeof Xe&&Object.keys(Xe).forEach(qe=>{if(!this._driver.validateStyleProperty(qe))return void K.errors.push(`The provided animation property "${qe}" is not a supported CSS property for animations`);const bi=K.collectedStyles[K.currentQuerySelector],Ui=bi[qe];let hn=!0;Ui&&(be!=ee&&be>=Ui.startTime&&ee<=Ui.endTime&&(K.errors.push(`The CSS property "${qe}" that exists between the times of "${Ui.startTime}ms" and "${Ui.endTime}ms" is also being animated in a parallel animation between the times of "${be}ms" and "${ee}ms"`),hn=!1),be=Ui.startTime),hn&&(bi[qe]={startTime:be,endTime:ee}),K.options&&function(Wt,G,K){const _t=G.params||{},ee=jt(Wt);ee.length&&ee.forEach(be=>{_t.hasOwnProperty(be)||K.push(`Unable to resolve the local animation param ${be} in the given list of values`)})}(Xe[qe],K.options,K.errors)})})}visitKeyframes(G,K){const _t={type:5,styles:[],options:null};if(!K.currentAnimateTimings)return K.errors.push("keyframes() must be placed inside of a call to animate()"),_t;let be=0;const Xe=[];let qe=!1,bi=!1,Ui=0;const hn=G.steps.map(wr=>{const Yr=this._makeStyleAst(wr,K);let ro=null!=Yr.offset?Yr.offset:function(Wt){if("string"==typeof Wt)return null;let G=null;if(Array.isArray(Wt))Wt.forEach(K=>{if(Hi(K)&&K.hasOwnProperty("offset")){const _t=K;G=parseFloat(_t.offset),delete _t.offset}});else if(Hi(Wt)&&Wt.hasOwnProperty("offset")){const K=Wt;G=parseFloat(K.offset),delete K.offset}return G}(Yr.styles),Vo=0;return null!=ro&&(be++,Vo=Yr.offset=ro),bi=bi||Vo<0||Vo>1,qe=qe||Vo<Ui,Ui=Vo,Xe.push(Vo),Yr});bi&&K.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),qe&&K.errors.push("Please ensure that all keyframe offsets are in order");const Cn=G.steps.length;let Zn=0;be>0&&be<Cn?K.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==be&&(Zn=1/(Cn-1));const Qn=Cn-1,Nn=K.currentTime,tr=K.currentAnimateTimings,er=tr.duration;return hn.forEach((wr,Yr)=>{const ro=Zn>0?Yr==Qn?1:Zn*Yr:Xe[Yr],Vo=ro*er;K.currentTime=Nn+tr.delay+Vo,tr.duration=Vo,this._validateStyleAst(wr,K),wr.offset=ro,_t.styles.push(wr)}),_t}visitReference(G,K){return{type:8,animation:me(this,Zt(G.animation),K),options:ue(G.options)}}visitAnimateChild(G,K){return K.depCount++,{type:9,options:ue(G.options)}}visitAnimateRef(G,K){return{type:10,animation:this.visitReference(G.animation,K),options:ue(G.options)}}visitQuery(G,K){const _t=K.currentQuerySelector,ee=G.options||{};K.queryCount++,K.currentQuery=G;const[be,Xe]=function(Wt){const G=!!Wt.split(/\s*,\s*/).find(K=>":self"==K);return G&&(Wt=Wt.replace(mi,"")),Wt=Wt.replace(/@\*/g,Mt).replace(/@\w+/g,K=>Mt+"-"+K.substr(1)).replace(/:animating/g,ge),[Wt,G]}(G.selector);K.currentQuerySelector=_t.length?_t+" "+be:be,B(K.collectedStyles,K.currentQuerySelector,{});const qe=me(this,Zt(G.animation),K);return K.currentQuery=null,K.currentQuerySelector=_t,{type:11,selector:be,limit:ee.limit||0,optional:!!ee.optional,includeSelf:Xe,animation:qe,originalSelector:G.selector,options:ue(G.options)}}visitStagger(G,K){K.currentQuery||K.errors.push("stagger() can only be used inside of query()");const _t="full"===G.timings?{duration:0,delay:0,easing:"full"}:He(G.timings,K.errors,!0);return{type:12,animation:me(this,Zt(G.animation),K),timings:_t,options:null}}}class Ii{constructor(G){this.errors=G,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function Hi(Wt){return!Array.isArray(Wt)&&"object"==typeof Wt}function ue(Wt){return Wt?(Wt=Ze(Wt)).params&&(Wt.params=function(Wt){return Wt?Ze(Wt):null}(Wt.params)):Wt={},Wt}function kt(Wt,G,K){return{duration:Wt,delay:G,easing:K}}function ct(Wt,G,K,_t,ee,be,Xe=null,qe=!1){return{type:1,element:Wt,keyframes:G,preStyleProps:K,postStyleProps:_t,duration:ee,delay:be,totalTime:ee+be,easing:Xe,subTimeline:qe}}class Lt{constructor(){this._map=new Map}get(G){return this._map.get(G)||[]}append(G,K){let _t=this._map.get(G);_t||this._map.set(G,_t=[]),_t.push(...K)}has(G){return this._map.has(G)}clear(){this._map.clear()}}const Wi=new RegExp(":enter","g"),Sn=new RegExp(":leave","g");function ir(Wt,G,K,_t,ee,be={},Xe={},qe,bi,Ui=[]){return(new ci).buildKeyframes(Wt,G,K,_t,ee,be,Xe,qe,bi,Ui)}class ci{buildKeyframes(G,K,_t,ee,be,Xe,qe,bi,Ui,hn=[]){Ui=Ui||new Lt;const Cn=new Pe(G,K,Ui,ee,be,hn,[]);Cn.options=bi,Cn.currentTimeline.setStyles([Xe],null,Cn.errors,bi),me(this,_t,Cn);const Zn=Cn.timelines.filter(Qn=>Qn.containsAnimation());if(Zn.length&&Object.keys(qe).length){const Qn=Zn[Zn.length-1];Qn.allowOnlyTimelineStyles()||Qn.setStyles([qe],null,Cn.errors,bi)}return Zn.length?Zn.map(Qn=>Qn.buildKeyframes()):[ct(K,[],[],[],0,0,"",!1)]}visitTrigger(G,K){}visitState(G,K){}visitTransition(G,K){}visitAnimateChild(G,K){const _t=K.subInstructions.get(K.element);if(_t){const ee=K.createSubContext(G.options),be=K.currentTimeline.currentTime,Xe=this._visitSubInstructions(_t,ee,ee.options);be!=Xe&&K.transformIntoNewTimeline(Xe)}K.previousNode=G}visitAnimateRef(G,K){const _t=K.createSubContext(G.options);_t.transformIntoNewTimeline(),this.visitReference(G.animation,_t),K.transformIntoNewTimeline(_t.currentTimeline.currentTime),K.previousNode=G}_visitSubInstructions(G,K,_t){let be=K.currentTimeline.currentTime;const Xe=null!=_t.duration?ve(_t.duration):null,qe=null!=_t.delay?ve(_t.delay):null;return 0!==Xe&&G.forEach(bi=>{const Ui=K.appendInstructionToTimeline(bi,Xe,qe);be=Math.max(be,Ui.duration+Ui.delay)}),be}visitReference(G,K){K.updateOptions(G.options,!0),me(this,G.animation,K),K.previousNode=G}visitSequence(G,K){const _t=K.subContextCount;let ee=K;const be=G.options;if(be&&(be.params||be.delay)&&(ee=K.createSubContext(be),ee.transformIntoNewTimeline(),null!=be.delay)){6==ee.previousNode.type&&(ee.currentTimeline.snapshotCurrentStyles(),ee.previousNode=Ke);const Xe=ve(be.delay);ee.delayNextStep(Xe)}G.steps.length&&(G.steps.forEach(Xe=>me(this,Xe,ee)),ee.currentTimeline.applyStylesToKeyframe(),ee.subContextCount>_t&&ee.transformIntoNewTimeline()),K.previousNode=G}visitGroup(G,K){const _t=[];let ee=K.currentTimeline.currentTime;const be=G.options&&G.options.delay?ve(G.options.delay):0;G.steps.forEach(Xe=>{const qe=K.createSubContext(G.options);be&&qe.delayNextStep(be),me(this,Xe,qe),ee=Math.max(ee,qe.currentTimeline.currentTime),_t.push(qe.currentTimeline)}),_t.forEach(Xe=>K.currentTimeline.mergeTimelineCollectedStyles(Xe)),K.transformIntoNewTimeline(ee),K.previousNode=G}_visitTiming(G,K){if(G.dynamic){const _t=G.strValue;return He(K.params?Ce(_t,K.params,K.errors):_t,K.errors)}return{duration:G.duration,delay:G.delay,easing:G.easing}}visitAnimate(G,K){const _t=K.currentAnimateTimings=this._visitTiming(G.timings,K),ee=K.currentTimeline;_t.delay&&(K.incrementTime(_t.delay),ee.snapshotCurrentStyles());const be=G.style;5==be.type?this.visitKeyframes(be,K):(K.incrementTime(_t.duration),this.visitStyle(be,K),ee.applyStylesToKeyframe()),K.currentAnimateTimings=null,K.previousNode=G}visitStyle(G,K){const _t=K.currentTimeline,ee=K.currentAnimateTimings;!ee&&_t.getCurrentStyleProperties().length&&_t.forwardFrame();const be=ee&&ee.easing||G.easing;G.isEmptyStep?_t.applyEmptyStep(be):_t.setStyles(G.styles,be,K.errors,K.options),K.previousNode=G}visitKeyframes(G,K){const _t=K.currentAnimateTimings,ee=K.currentTimeline.duration,be=_t.duration,qe=K.createSubContext().currentTimeline;qe.easing=_t.easing,G.styles.forEach(bi=>{qe.forwardTime((bi.offset||0)*be),qe.setStyles(bi.styles,bi.easing,K.errors,K.options),qe.applyStylesToKeyframe()}),K.currentTimeline.mergeTimelineCollectedStyles(qe),K.transformIntoNewTimeline(ee+be),K.previousNode=G}visitQuery(G,K){const _t=K.currentTimeline.currentTime,ee=G.options||{},be=ee.delay?ve(ee.delay):0;be&&(6===K.previousNode.type||0==_t&&K.currentTimeline.getCurrentStyleProperties().length)&&(K.currentTimeline.snapshotCurrentStyles(),K.previousNode=Ke);let Xe=_t;const qe=K.invokeQuery(G.selector,G.originalSelector,G.limit,G.includeSelf,!!ee.optional,K.errors);K.currentQueryTotal=qe.length;let bi=null;qe.forEach((Ui,hn)=>{K.currentQueryIndex=hn;const Cn=K.createSubContext(G.options,Ui);be&&Cn.delayNextStep(be),Ui===K.element&&(bi=Cn.currentTimeline),me(this,G.animation,Cn),Cn.currentTimeline.applyStylesToKeyframe(),Xe=Math.max(Xe,Cn.currentTimeline.currentTime)}),K.currentQueryIndex=0,K.currentQueryTotal=0,K.transformIntoNewTimeline(Xe),bi&&(K.currentTimeline.mergeTimelineCollectedStyles(bi),K.currentTimeline.snapshotCurrentStyles()),K.previousNode=G}visitStagger(G,K){const _t=K.parentContext,ee=K.currentTimeline,be=G.timings,Xe=Math.abs(be.duration),qe=Xe*(K.currentQueryTotal-1);let bi=Xe*K.currentQueryIndex;switch(be.duration<0?"reverse":be.easing){case"reverse":bi=qe-bi;break;case"full":bi=_t.currentStaggerTime}const hn=K.currentTimeline;bi&&hn.delayNextStep(bi);const Cn=hn.currentTime;me(this,G.animation,K),K.previousNode=G,_t.currentStaggerTime=ee.currentTime-Cn+(ee.startTime-_t.currentTimeline.startTime)}}const Ke={};class Pe{constructor(G,K,_t,ee,be,Xe,qe,bi){this._driver=G,this.element=K,this.subInstructions=_t,this._enterClassName=ee,this._leaveClassName=be,this.errors=Xe,this.timelines=qe,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Ke,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=bi||new hi(this._driver,K,0),qe.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(G,K){if(!G)return;const _t=G;let ee=this.options;null!=_t.duration&&(ee.duration=ve(_t.duration)),null!=_t.delay&&(ee.delay=ve(_t.delay));const be=_t.params;if(be){let Xe=ee.params;Xe||(Xe=this.options.params={}),Object.keys(be).forEach(qe=>{(!K||!Xe.hasOwnProperty(qe))&&(Xe[qe]=Ce(be[qe],Xe,this.errors))})}}_copyOptions(){const G={};if(this.options){const K=this.options.params;if(K){const _t=G.params={};Object.keys(K).forEach(ee=>{_t[ee]=K[ee]})}}return G}createSubContext(G=null,K,_t){const ee=K||this.element,be=new Pe(this._driver,ee,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(ee,_t||0));return be.previousNode=this.previousNode,be.currentAnimateTimings=this.currentAnimateTimings,be.options=this._copyOptions(),be.updateOptions(G),be.currentQueryIndex=this.currentQueryIndex,be.currentQueryTotal=this.currentQueryTotal,be.parentContext=this,this.subContextCount++,be}transformIntoNewTimeline(G){return this.previousNode=Ke,this.currentTimeline=this.currentTimeline.fork(this.element,G),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(G,K,_t){const ee={duration:null!=K?K:G.duration,delay:this.currentTimeline.currentTime+(null!=_t?_t:0)+G.delay,easing:""},be=new xi(this._driver,G.element,G.keyframes,G.preStyleProps,G.postStyleProps,ee,G.stretchStartingKeyframe);return this.timelines.push(be),ee}incrementTime(G){this.currentTimeline.forwardTime(this.currentTimeline.duration+G)}delayNextStep(G){G>0&&this.currentTimeline.delayNextStep(G)}invokeQuery(G,K,_t,ee,be,Xe){let qe=[];if(ee&&qe.push(this.element),G.length>0){G=(G=G.replace(Wi,"."+this._enterClassName)).replace(Sn,"."+this._leaveClassName);let Ui=this._driver.query(this.element,G,1!=_t);0!==_t&&(Ui=_t<0?Ui.slice(Ui.length+_t,Ui.length):Ui.slice(0,_t)),qe.push(...Ui)}return!be&&0==qe.length&&Xe.push(`\`query("${K}")\` returned zero elements. (Use \`query("${K}", { optional: true })\` if you wish to allow this.)`),qe}}class hi{constructor(G,K,_t,ee){this._driver=G,this.element=K,this.startTime=_t,this._elementTimelineStylesLookup=ee,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(K),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(K,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(G){const K=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||K?(this.forwardTime(this.currentTime+G),K&&this.snapshotCurrentStyles()):this.startTime+=G}fork(G,K){return this.applyStylesToKeyframe(),new hi(this._driver,G,K||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(G){this.applyStylesToKeyframe(),this.duration=G,this._loadKeyframe()}_updateStyle(G,K){this._localTimelineStyles[G]=K,this._globalTimelineStyles[G]=K,this._styleSummary[G]={time:this.currentTime,value:K}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(G){G&&(this._previousKeyframe.easing=G),Object.keys(this._globalTimelineStyles).forEach(K=>{this._backFill[K]=this._globalTimelineStyles[K]||e.l3,this._currentKeyframe[K]=e.l3}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(G,K,_t,ee){K&&(this._previousKeyframe.easing=K);const be=ee&&ee.params||{},Xe=function(Wt,G){const K={};let _t;return Wt.forEach(ee=>{"*"===ee?(_t=_t||Object.keys(G),_t.forEach(be=>{K[be]=e.l3})):$e(ee,!1,K)}),K}(G,this._globalTimelineStyles);Object.keys(Xe).forEach(qe=>{const bi=Ce(Xe[qe],be,_t);this._pendingStyles[qe]=bi,this._localTimelineStyles.hasOwnProperty(qe)||(this._backFill[qe]=this._globalTimelineStyles.hasOwnProperty(qe)?this._globalTimelineStyles[qe]:e.l3),this._updateStyle(qe,bi)})}applyStylesToKeyframe(){const G=this._pendingStyles,K=Object.keys(G);0!=K.length&&(this._pendingStyles={},K.forEach(_t=>{this._currentKeyframe[_t]=G[_t]}),Object.keys(this._localTimelineStyles).forEach(_t=>{this._currentKeyframe.hasOwnProperty(_t)||(this._currentKeyframe[_t]=this._localTimelineStyles[_t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(G=>{const K=this._localTimelineStyles[G];this._pendingStyles[G]=K,this._updateStyle(G,K)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const G=[];for(let K in this._currentKeyframe)G.push(K);return G}mergeTimelineCollectedStyles(G){Object.keys(G._styleSummary).forEach(K=>{const _t=this._styleSummary[K],ee=G._styleSummary[K];(!_t||ee.time>_t.time)&&this._updateStyle(K,ee.value)})}buildKeyframes(){this.applyStylesToKeyframe();const G=new Set,K=new Set,_t=1===this._keyframes.size&&0===this.duration;let ee=[];this._keyframes.forEach((qe,bi)=>{const Ui=$e(qe,!0);Object.keys(Ui).forEach(hn=>{const Cn=Ui[hn];Cn==e.k1?G.add(hn):Cn==e.l3&&K.add(hn)}),_t||(Ui.offset=bi/this.duration),ee.push(Ui)});const be=G.size?ri(G.values()):[],Xe=K.size?ri(K.values()):[];if(_t){const qe=ee[0],bi=Ze(qe);qe.offset=0,bi.offset=1,ee=[qe,bi]}return ct(this.element,ee,be,Xe,this.duration,this.startTime,this.easing,!1)}}class xi extends hi{constructor(G,K,_t,ee,be,Xe,qe=!1){super(G,K,Xe.delay),this.keyframes=_t,this.preStyleProps=ee,this.postStyleProps=be,this._stretchStartingKeyframe=qe,this.timings={duration:Xe.duration,delay:Xe.delay,easing:Xe.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let G=this.keyframes,{delay:K,duration:_t,easing:ee}=this.timings;if(this._stretchStartingKeyframe&&K){const be=[],Xe=_t+K,qe=K/Xe,bi=$e(G[0],!1);bi.offset=0,be.push(bi);const Ui=$e(G[0],!1);Ui.offset=fn(qe),be.push(Ui);const hn=G.length-1;for(let Cn=1;Cn<=hn;Cn++){let Zn=$e(G[Cn],!1);Zn.offset=fn((K+Zn.offset*_t)/Xe),be.push(Zn)}_t=Xe,K=0,ee="",G=be}return ct(this.element,G,this.preStyleProps,this.postStyleProps,_t,K,ee,!0)}}function fn(Wt,G=3){const K=Math.pow(10,G-1);return Math.round(Wt*K)/K}class Cr{}class no extends Cr{normalizePropertyName(G,K){return te(G)}normalizeStyleValue(G,K,_t,ee){let be="";const Xe=_t.toString().trim();if(fo[K]&&0!==_t&&"0"!==_t)if("number"==typeof _t)be="px";else{const qe=_t.match(/^[+-]?[\d\.]+([a-z]*)$/);qe&&0==qe[1].length&&ee.push(`Please provide a CSS unit value for ${G}:${_t}`)}return Xe+be}}const fo=(()=>function(Wt){const G={};return Wt.forEach(K=>G[K]=!0),G}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function ar(Wt,G,K,_t,ee,be,Xe,qe,bi,Ui,hn,Cn,Zn){return{type:0,element:Wt,triggerName:G,isRemovalTransition:ee,fromState:K,fromStyles:be,toState:_t,toStyles:Xe,timelines:qe,queriedElements:bi,preStyleProps:Ui,postStyleProps:hn,totalTime:Cn,errors:Zn}}const Oo={};class nr{constructor(G,K,_t){this._triggerName=G,this.ast=K,this._stateStyles=_t}match(G,K,_t,ee){return function(Wt,G,K,_t,ee){return Wt.some(be=>be(G,K,_t,ee))}(this.ast.matchers,G,K,_t,ee)}buildStyles(G,K,_t){const ee=this._stateStyles["*"],be=this._stateStyles[G],Xe=ee?ee.buildStyles(K,_t):{};return be?be.buildStyles(K,_t):Xe}build(G,K,_t,ee,be,Xe,qe,bi,Ui,hn){const Cn=[],Zn=this.ast.options&&this.ast.options.params||Oo,Nn=this.buildStyles(_t,qe&&qe.params||Oo,Cn),tr=bi&&bi.params||Oo,er=this.buildStyles(ee,tr,Cn),wr=new Set,Yr=new Map,ro=new Map,Vo="void"===ee,La={params:Object.assign(Object.assign({},Zn),tr)},Fs=hn?[]:ir(G,K,this.ast.animation,be,Xe,Nn,er,La,Ui,Cn);let Mo=0;if(Fs.forEach(gs=>{Mo=Math.max(gs.duration+gs.delay,Mo)}),Cn.length)return ar(K,this._triggerName,_t,ee,Vo,Nn,er,[],[],Yr,ro,Mo,Cn);Fs.forEach(gs=>{const Bs=gs.element,sl=B(Yr,Bs,{});gs.preStyleProps.forEach(Qs=>sl[Qs]=!0);const Na=B(ro,Bs,{});gs.postStyleProps.forEach(Qs=>Na[Qs]=!0),Bs!==K&&wr.add(Bs)});const Zs=ri(wr.values());return ar(K,this._triggerName,_t,ee,Vo,Nn,er,Fs,Zs,Yr,ro,Mo)}}class Fn{constructor(G,K,_t){this.styles=G,this.defaultParams=K,this.normalizer=_t}buildStyles(G,K){const _t={},ee=Ze(this.defaultParams);return Object.keys(G).forEach(be=>{const Xe=G[be];null!=Xe&&(ee[be]=Xe)}),this.styles.styles.forEach(be=>{if("string"!=typeof be){const Xe=be;Object.keys(Xe).forEach(qe=>{let bi=Xe[qe];bi.length>1&&(bi=Ce(bi,ee,K));const Ui=this.normalizer.normalizePropertyName(qe,K);bi=this.normalizer.normalizeStyleValue(qe,Ui,bi,K),_t[Ui]=bi})}}),_t}}class Pr{constructor(G,K,_t){this.name=G,this.ast=K,this._normalizer=_t,this.transitionFactories=[],this.states={},K.states.forEach(ee=>{this.states[ee.name]=new Fn(ee.style,ee.options&&ee.options.params||{},_t)}),Sr(this.states,"true","1"),Sr(this.states,"false","0"),K.transitions.forEach(ee=>{this.transitionFactories.push(new nr(G,ee,this.states))}),this.fallbackTransition=function(Wt,G,K){return new nr(Wt,{type:1,animation:{type:2,steps:[],options:null},matchers:[(Xe,qe)=>!0],options:null,queryCount:0,depCount:0},G)}(G,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(G,K,_t,ee){return this.transitionFactories.find(Xe=>Xe.match(G,K,_t,ee))||null}matchStyles(G,K,_t){return this.fallbackTransition.buildStyles(G,K,_t)}}function Sr(Wt,G,K){Wt.hasOwnProperty(G)?Wt.hasOwnProperty(K)||(Wt[K]=Wt[G]):Wt.hasOwnProperty(K)&&(Wt[G]=Wt[K])}const Zr=new Lt;class Rr{constructor(G,K,_t){this.bodyNode=G,this._driver=K,this._normalizer=_t,this._animations={},this._playersById={},this.players=[]}register(G,K){const _t=[],ee=Zi(this._driver,K,_t);if(_t.length)throw new Error(`Unable to build the animation due to the following errors: ${_t.join("\n")}`);this._animations[G]=ee}_buildPlayer(G,K,_t){const ee=G.element,be=s(0,this._normalizer,0,G.keyframes,K,_t);return this._driver.animate(ee,be,G.duration,G.delay,G.easing,[],!0)}create(G,K,_t={}){const ee=[],be=this._animations[G];let Xe;const qe=new Map;if(be?(Xe=ir(this._driver,K,be,ut,rt,{},{},_t,Zr,ee),Xe.forEach(hn=>{const Cn=B(qe,hn.element,{});hn.postStyleProps.forEach(Zn=>Cn[Zn]=null)})):(ee.push("The requested animation doesn't exist or has already been destroyed"),Xe=[]),ee.length)throw new Error(`Unable to create the animation due to the following errors: ${ee.join("\n")}`);qe.forEach((hn,Cn)=>{Object.keys(hn).forEach(Zn=>{hn[Zn]=this._driver.computeStyle(Cn,Zn,e.l3)})});const Ui=r(Xe.map(hn=>{const Cn=qe.get(hn.element);return this._buildPlayer(hn,{},Cn)}));return this._playersById[G]=Ui,Ui.onDestroy(()=>this.destroy(G)),this.players.push(Ui),Ui}destroy(G){const K=this._getPlayer(G);K.destroy(),delete this._playersById[G];const _t=this.players.indexOf(K);_t>=0&&this.players.splice(_t,1)}_getPlayer(G){const K=this._playersById[G];if(!K)throw new Error(`Unable to find the timeline player referenced by ${G}`);return K}listen(G,K,_t,ee){const be=x(K,"","","");return u(this._getPlayer(G),_t,be,ee),()=>{}}command(G,K,_t,ee){if("register"==_t)return void this.register(G,ee[0]);if("create"==_t)return void this.create(G,K,ee[0]||{});const be=this._getPlayer(G);switch(_t){case"play":be.play();break;case"pause":be.pause();break;case"reset":be.reset();break;case"restart":be.restart();break;case"finish":be.finish();break;case"init":be.init();break;case"setPosition":be.setPosition(parseFloat(ee[0]));break;case"destroy":this.destroy(G)}}}const Vi="ng-animate-queued",Gn="ng-animate-disabled",Ji=[],Yi={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},sr={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},zn="__ng_removed";class Yn{constructor(G,K=""){this.namespaceId=K;const _t=G&&G.hasOwnProperty("value");if(this.value=null!=(Wt=_t?G.value:G)?Wt:null,_t){const be=Ze(G);delete be.value,this.options=be}else this.options={};var Wt;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(G){const K=G.params;if(K){const _t=this.options.params;Object.keys(K).forEach(ee=>{null==_t[ee]&&(_t[ee]=K[ee])})}}}const kn="void",xo=new Yn(kn);class $o{constructor(G,K,_t){this.id=G,this.hostElement=K,this._engine=_t,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+G,Do(K,this._hostClassName)}listen(G,K,_t,ee){if(!this._triggers.hasOwnProperty(K))throw new Error(`Unable to listen on the animation trigger event "${_t}" because the animation trigger "${K}" doesn't exist!`);if(null==_t||0==_t.length)throw new Error(`Unable to listen on the animation trigger "${K}" because the provided event is undefined!`);if("start"!=(Wt=_t)&&"done"!=Wt)throw new Error(`The provided animation trigger event "${_t}" for the animation trigger "${K}" is not supported!`);var Wt;const be=B(this._elementListeners,G,[]),Xe={name:K,phase:_t,callback:ee};be.push(Xe);const qe=B(this._engine.statesByElement,G,{});return qe.hasOwnProperty(K)||(Do(G,fe),Do(G,fe+"-"+K),qe[K]=xo),()=>{this._engine.afterFlush(()=>{const bi=be.indexOf(Xe);bi>=0&&be.splice(bi,1),this._triggers[K]||delete qe[K]})}}register(G,K){return!this._triggers[G]&&(this._triggers[G]=K,!0)}_getTrigger(G){const K=this._triggers[G];if(!K)throw new Error(`The provided animation trigger "${G}" has not been registered!`);return K}trigger(G,K,_t,ee=!0){const be=this._getTrigger(K),Xe=new go(this.id,K,G);let qe=this._engine.statesByElement.get(G);qe||(Do(G,fe),Do(G,fe+"-"+K),this._engine.statesByElement.set(G,qe={}));let bi=qe[K];const Ui=new Yn(_t,this.id);if(!(_t&&_t.hasOwnProperty("value"))&&bi&&Ui.absorbOptions(bi.options),qe[K]=Ui,bi||(bi=xo),Ui.value!==kn&&bi.value===Ui.value){if(!function(Wt,G){const K=Object.keys(Wt),_t=Object.keys(G);if(K.length!=_t.length)return!1;for(let ee=0;ee<K.length;ee++){const be=K[ee];if(!G.hasOwnProperty(be)||Wt[be]!==G[be])return!1}return!0}(bi.params,Ui.params)){const tr=[],er=be.matchStyles(bi.value,bi.params,tr),wr=be.matchStyles(Ui.value,Ui.params,tr);tr.length?this._engine.reportError(tr):this._engine.afterFlush(()=>{Se(G,er),Gt(G,wr)})}return}const Zn=B(this._engine.playersByElement,G,[]);Zn.forEach(tr=>{tr.namespaceId==this.id&&tr.triggerName==K&&tr.queued&&tr.destroy()});let Qn=be.matchTransition(bi.value,Ui.value,G,Ui.params),Nn=!1;if(!Qn){if(!ee)return;Qn=be.fallbackTransition,Nn=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:G,triggerName:K,transition:Qn,fromState:bi,toState:Ui,player:Xe,isFallbackTransition:Nn}),Nn||(Do(G,Vi),Xe.onStart(()=>{jo(G,Vi)})),Xe.onDone(()=>{let tr=this.players.indexOf(Xe);tr>=0&&this.players.splice(tr,1);const er=this._engine.playersByElement.get(G);if(er){let wr=er.indexOf(Xe);wr>=0&&er.splice(wr,1)}}),this.players.push(Xe),Zn.push(Xe),Xe}deregister(G){delete this._triggers[G],this._engine.statesByElement.forEach((K,_t)=>{delete K[G]}),this._elementListeners.forEach((K,_t)=>{this._elementListeners.set(_t,K.filter(ee=>ee.name!=G))})}clearElementCache(G){this._engine.statesByElement.delete(G),this._elementListeners.delete(G);const K=this._engine.playersByElement.get(G);K&&(K.forEach(_t=>_t.destroy()),this._engine.playersByElement.delete(G))}_signalRemovalForInnerTriggers(G,K){const _t=this._engine.driver.query(G,Mt,!0);_t.forEach(ee=>{if(ee[zn])return;const be=this._engine.fetchNamespacesByElement(ee);be.size?be.forEach(Xe=>Xe.triggerLeaveAnimation(ee,K,!1,!0)):this.clearElementCache(ee)}),this._engine.afterFlushAnimationsDone(()=>_t.forEach(ee=>this.clearElementCache(ee)))}triggerLeaveAnimation(G,K,_t,ee){const be=this._engine.statesByElement.get(G);if(be){const Xe=[];if(Object.keys(be).forEach(qe=>{if(this._triggers[qe]){const bi=this.trigger(G,qe,kn,ee);bi&&Xe.push(bi)}}),Xe.length)return this._engine.markElementAsRemoved(this.id,G,!0,K),_t&&r(Xe).onDone(()=>this._engine.processLeaveNode(G)),!0}return!1}prepareLeaveAnimationListeners(G){const K=this._elementListeners.get(G),_t=this._engine.statesByElement.get(G);if(K&&_t){const ee=new Set;K.forEach(be=>{const Xe=be.name;if(ee.has(Xe))return;ee.add(Xe);const bi=this._triggers[Xe].fallbackTransition,Ui=_t[Xe]||xo,hn=new Yn(kn),Cn=new go(this.id,Xe,G);this._engine.totalQueuedPlayers++,this._queue.push({element:G,triggerName:Xe,transition:bi,fromState:Ui,toState:hn,player:Cn,isFallbackTransition:!0})})}}removeNode(G,K){const _t=this._engine;if(G.childElementCount&&this._signalRemovalForInnerTriggers(G,K),this.triggerLeaveAnimation(G,K,!0))return;let ee=!1;if(_t.totalAnimations){const be=_t.players.length?_t.playersByQueriedElement.get(G):[];if(be&&be.length)ee=!0;else{let Xe=G;for(;Xe=Xe.parentNode;)if(_t.statesByElement.get(Xe)){ee=!0;break}}}if(this.prepareLeaveAnimationListeners(G),ee)_t.markElementAsRemoved(this.id,G,!1,K);else{const be=G[zn];(!be||be===Yi)&&(_t.afterFlush(()=>this.clearElementCache(G)),_t.destroyInnerAnimations(G),_t._onRemovalComplete(G,K))}}insertNode(G,K){Do(G,this._hostClassName)}drainQueuedTransitions(G){const K=[];return this._queue.forEach(_t=>{const ee=_t.player;if(ee.destroyed)return;const be=_t.element,Xe=this._elementListeners.get(be);Xe&&Xe.forEach(qe=>{if(qe.name==_t.triggerName){const bi=x(be,_t.triggerName,_t.fromState.value,_t.toState.value);bi._data=G,u(_t.player,qe.phase,bi,qe.callback)}}),ee.markedForDestroy?this._engine.afterFlush(()=>{ee.destroy()}):K.push(_t)}),this._queue=[],K.sort((_t,ee)=>{const be=_t.transition.ast.depCount,Xe=ee.transition.ast.depCount;return 0==be||0==Xe?be-Xe:this._engine.driver.containsElement(_t.element,ee.element)?1:-1})}destroy(G){this.players.forEach(K=>K.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,G)}elementContainsData(G){let K=!1;return this._elementListeners.has(G)&&(K=!0),K=!!this._queue.find(_t=>_t.element===G)||K,K}}class so{constructor(G,K,_t){this.bodyNode=G,this.driver=K,this._normalizer=_t,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(ee,be)=>{}}_onRemovalComplete(G,K){this.onRemovalComplete(G,K)}get queuedPlayers(){const G=[];return this._namespaceList.forEach(K=>{K.players.forEach(_t=>{_t.queued&&G.push(_t)})}),G}createNamespace(G,K){const _t=new $o(G,K,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,K)?this._balanceNamespaceList(_t,K):(this.newHostElements.set(K,_t),this.collectEnterElement(K)),this._namespaceLookup[G]=_t}_balanceNamespaceList(G,K){const _t=this._namespaceList.length-1;if(_t>=0){let ee=!1;for(let be=_t;be>=0;be--)if(this.driver.containsElement(this._namespaceList[be].hostElement,K)){this._namespaceList.splice(be+1,0,G),ee=!0;break}ee||this._namespaceList.splice(0,0,G)}else this._namespaceList.push(G);return this.namespacesByHostElement.set(K,G),G}register(G,K){let _t=this._namespaceLookup[G];return _t||(_t=this.createNamespace(G,K)),_t}registerTrigger(G,K,_t){let ee=this._namespaceLookup[G];ee&&ee.register(K,_t)&&this.totalAnimations++}destroy(G,K){if(!G)return;const _t=this._fetchNamespace(G);this.afterFlush(()=>{this.namespacesByHostElement.delete(_t.hostElement),delete this._namespaceLookup[G];const ee=this._namespaceList.indexOf(_t);ee>=0&&this._namespaceList.splice(ee,1)}),this.afterFlushAnimationsDone(()=>_t.destroy(K))}_fetchNamespace(G){return this._namespaceLookup[G]}fetchNamespacesByElement(G){const K=new Set,_t=this.statesByElement.get(G);if(_t){const ee=Object.keys(_t);for(let be=0;be<ee.length;be++){const Xe=_t[ee[be]].namespaceId;if(Xe){const qe=this._fetchNamespace(Xe);qe&&K.add(qe)}}}return K}trigger(G,K,_t,ee){if(ts(K)){const be=this._fetchNamespace(G);if(be)return be.trigger(K,_t,ee),!0}return!1}insertNode(G,K,_t,ee){if(!ts(K))return;const be=K[zn];if(be&&be.setForRemoval){be.setForRemoval=!1,be.setForMove=!0;const Xe=this.collectedLeaveElements.indexOf(K);Xe>=0&&this.collectedLeaveElements.splice(Xe,1)}if(G){const Xe=this._fetchNamespace(G);Xe&&Xe.insertNode(K,_t)}ee&&this.collectEnterElement(K)}collectEnterElement(G){this.collectedEnterElements.push(G)}markElementAsDisabled(G,K){K?this.disabledNodes.has(G)||(this.disabledNodes.add(G),Do(G,Gn)):this.disabledNodes.has(G)&&(this.disabledNodes.delete(G),jo(G,Gn))}removeNode(G,K,_t,ee){if(ts(K)){const be=G?this._fetchNamespace(G):null;if(be?be.removeNode(K,ee):this.markElementAsRemoved(G,K,!1,ee),_t){const Xe=this.namespacesByHostElement.get(K);Xe&&Xe.id!==G&&Xe.removeNode(K,ee)}}else this._onRemovalComplete(K,ee)}markElementAsRemoved(G,K,_t,ee){this.collectedLeaveElements.push(K),K[zn]={namespaceId:G,setForRemoval:ee,hasAnimation:_t,removedBeforeQueried:!1}}listen(G,K,_t,ee,be){return ts(K)?this._fetchNamespace(G).listen(K,_t,ee,be):()=>{}}_buildInstruction(G,K,_t,ee,be){return G.transition.build(this.driver,G.element,G.fromState.value,G.toState.value,_t,ee,G.fromState.options,G.toState.options,K,be)}destroyInnerAnimations(G){let K=this.driver.query(G,Mt,!0);K.forEach(_t=>this.destroyActiveAnimationsForElement(_t)),0!=this.playersByQueriedElement.size&&(K=this.driver.query(G,ge,!0),K.forEach(_t=>this.finishActiveQueriedAnimationOnElement(_t)))}destroyActiveAnimationsForElement(G){const K=this.playersByElement.get(G);K&&K.forEach(_t=>{_t.queued?_t.markedForDestroy=!0:_t.destroy()})}finishActiveQueriedAnimationOnElement(G){const K=this.playersByQueriedElement.get(G);K&&K.forEach(_t=>_t.finish())}whenRenderingDone(){return new Promise(G=>{if(this.players.length)return r(this.players).onDone(()=>G());G()})}processLeaveNode(G){var K;const _t=G[zn];if(_t&&_t.setForRemoval){if(G[zn]=Yi,_t.namespaceId){this.destroyInnerAnimations(G);const ee=this._fetchNamespace(_t.namespaceId);ee&&ee.clearElementCache(G)}this._onRemovalComplete(G,_t.setForRemoval)}(null===(K=G.classList)||void 0===K?void 0:K.contains(Gn))&&this.markElementAsDisabled(G,!1),this.driver.query(G,".ng-animate-disabled",!0).forEach(ee=>{this.markElementAsDisabled(ee,!1)})}flush(G=-1){let K=[];if(this.newHostElements.size&&(this.newHostElements.forEach((_t,ee)=>this._balanceNamespaceList(_t,ee)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let _t=0;_t<this.collectedEnterElements.length;_t++)Do(this.collectedEnterElements[_t],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const _t=[];try{K=this._flushAnimations(_t,G)}finally{for(let ee=0;ee<_t.length;ee++)_t[ee]()}}else for(let _t=0;_t<this.collectedLeaveElements.length;_t++)this.processLeaveNode(this.collectedLeaveElements[_t]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(_t=>_t()),this._flushFns=[],this._whenQuietFns.length){const _t=this._whenQuietFns;this._whenQuietFns=[],K.length?r(K).onDone(()=>{_t.forEach(ee=>ee())}):_t.forEach(ee=>ee())}}reportError(G){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${G.join("\n")}`)}_flushAnimations(G,K){const _t=new Lt,ee=[],be=new Map,Xe=[],qe=new Map,bi=new Map,Ui=new Map,hn=new Set;this.disabledNodes.forEach(Dn=>{hn.add(Dn);const An=this.driver.query(Dn,".ng-animate-queued",!0);for(let rr=0;rr<An.length;rr++)hn.add(An[rr])});const Cn=this.bodyNode,Zn=Array.from(this.statesByElement.keys()),Qn=Fo(Zn,this.collectedEnterElements),Nn=new Map;let tr=0;Qn.forEach((Dn,An)=>{const rr=ut+tr++;Nn.set(An,rr),Dn.forEach(ur=>Do(ur,rr))});const er=[],wr=new Set,Yr=new Set;for(let Dn=0;Dn<this.collectedLeaveElements.length;Dn++){const An=this.collectedLeaveElements[Dn],rr=An[zn];rr&&rr.setForRemoval&&(er.push(An),wr.add(An),rr.hasAnimation?this.driver.query(An,".ng-star-inserted",!0).forEach(ur=>wr.add(ur)):Yr.add(An))}const ro=new Map,Vo=Fo(Zn,Array.from(wr));Vo.forEach((Dn,An)=>{const rr=rt+tr++;ro.set(An,rr),Dn.forEach(ur=>Do(ur,rr))}),G.push(()=>{Qn.forEach((Dn,An)=>{const rr=Nn.get(An);Dn.forEach(ur=>jo(ur,rr))}),Vo.forEach((Dn,An)=>{const rr=ro.get(An);Dn.forEach(ur=>jo(ur,rr))}),er.forEach(Dn=>{this.processLeaveNode(Dn)})});const La=[],Fs=[];for(let Dn=this._namespaceList.length-1;Dn>=0;Dn--)this._namespaceList[Dn].drainQueuedTransitions(K).forEach(rr=>{const ur=rr.player,Er=rr.element;if(La.push(ur),this.collectedEnterElements.length){const Fr=Er[zn];if(Fr&&Fr.setForMove)return void ur.destroy()}const ns=!Cn||!this.driver.containsElement(Cn,Er),Ir=ro.get(Er),ms=Nn.get(Er),_o=this._buildInstruction(rr,_t,ms,Ir,ns);if(_o.errors&&_o.errors.length)return void Fs.push(_o);if(ns)return ur.onStart(()=>Se(Er,_o.fromStyles)),ur.onDestroy(()=>Gt(Er,_o.toStyles)),void ee.push(ur);if(rr.isFallbackTransition)return ur.onStart(()=>Se(Er,_o.fromStyles)),ur.onDestroy(()=>Gt(Er,_o.toStyles)),void ee.push(ur);const al=[];_o.timelines.forEach(Fr=>{Fr.stretchStartingKeyframe=!0,this.disabledNodes.has(Fr.element)||al.push(Fr)}),_o.timelines=al,_t.append(Er,_o.timelines),Xe.push({instruction:_o,player:ur,element:Er}),_o.queriedElements.forEach(Fr=>B(qe,Fr,[]).push(ur)),_o.preStyleProps.forEach((Fr,ca)=>{const _s=Object.keys(Fr);if(_s.length){let Hs=bi.get(ca);Hs||bi.set(ca,Hs=new Set),_s.forEach(Ds=>Hs.add(Ds))}}),_o.postStyleProps.forEach((Fr,ca)=>{const _s=Object.keys(Fr);let Hs=Ui.get(ca);Hs||Ui.set(ca,Hs=new Set),_s.forEach(Ds=>Hs.add(Ds))})});if(Fs.length){const Dn=[];Fs.forEach(An=>{Dn.push(`@${An.triggerName} has failed due to:\n`),An.errors.forEach(rr=>Dn.push(`- ${rr}\n`))}),La.forEach(An=>An.destroy()),this.reportError(Dn)}const Mo=new Map,Zs=new Map;Xe.forEach(Dn=>{const An=Dn.element;_t.has(An)&&(Zs.set(An,An),this._beforeAnimationBuild(Dn.player.namespaceId,Dn.instruction,Mo))}),ee.forEach(Dn=>{const An=Dn.element;this._getPreviousPlayers(An,!1,Dn.namespaceId,Dn.triggerName,null).forEach(ur=>{B(Mo,An,[]).push(ur),ur.destroy()})});const gs=er.filter(Dn=>Zo(Dn,bi,Ui)),Bs=new Map;Ls(Bs,this.driver,Yr,Ui,e.l3).forEach(Dn=>{Zo(Dn,bi,Ui)&&gs.push(Dn)});const Na=new Map;Qn.forEach((Dn,An)=>{Ls(Na,this.driver,new Set(Dn),bi,e.k1)}),gs.forEach(Dn=>{const An=Bs.get(Dn),rr=Na.get(Dn);Bs.set(Dn,Object.assign(Object.assign({},An),rr))});const Qs=[],mo=[],Pa={};Xe.forEach(Dn=>{const{element:An,player:rr,instruction:ur}=Dn;if(_t.has(An)){if(hn.has(An))return rr.onDestroy(()=>Gt(An,ur.toStyles)),rr.disabled=!0,rr.overrideTotalTime(ur.totalTime),void ee.push(rr);let Er=Pa;if(Zs.size>1){let Ir=An;const ms=[];for(;Ir=Ir.parentNode;){const _o=Zs.get(Ir);if(_o){Er=_o;break}ms.push(Ir)}ms.forEach(_o=>Zs.set(_o,Er))}const ns=this._buildAnimation(rr.namespaceId,ur,Mo,be,Na,Bs);if(rr.setRealPlayer(ns),Er===Pa)Qs.push(rr);else{const Ir=this.playersByElement.get(Er);Ir&&Ir.length&&(rr.parentPlayer=r(Ir)),ee.push(rr)}}else Se(An,ur.fromStyles),rr.onDestroy(()=>Gt(An,ur.toStyles)),mo.push(rr),hn.has(An)&&ee.push(rr)}),mo.forEach(Dn=>{const An=be.get(Dn.element);if(An&&An.length){const rr=r(An);Dn.setRealPlayer(rr)}}),ee.forEach(Dn=>{Dn.parentPlayer?Dn.syncPlayerEvents(Dn.parentPlayer):Dn.destroy()});for(let Dn=0;Dn<er.length;Dn++){const An=er[Dn],rr=An[zn];if(jo(An,rt),rr&&rr.hasAnimation)continue;let ur=[];if(qe.size){let ns=qe.get(An);ns&&ns.length&&ur.push(...ns);let Ir=this.driver.query(An,ge,!0);for(let ms=0;ms<Ir.length;ms++){let _o=qe.get(Ir[ms]);_o&&_o.length&&ur.push(..._o)}}const Er=ur.filter(ns=>!ns.destroyed);Er.length?Io(this,An,Er):this.processLeaveNode(An)}return er.length=0,Qs.forEach(Dn=>{this.players.push(Dn),Dn.onDone(()=>{Dn.destroy();const An=this.players.indexOf(Dn);this.players.splice(An,1)}),Dn.play()}),Qs}elementContainsData(G,K){let _t=!1;const ee=K[zn];return ee&&ee.setForRemoval&&(_t=!0),this.playersByElement.has(K)&&(_t=!0),this.playersByQueriedElement.has(K)&&(_t=!0),this.statesByElement.has(K)&&(_t=!0),this._fetchNamespace(G).elementContainsData(K)||_t}afterFlush(G){this._flushFns.push(G)}afterFlushAnimationsDone(G){this._whenQuietFns.push(G)}_getPreviousPlayers(G,K,_t,ee,be){let Xe=[];if(K){const qe=this.playersByQueriedElement.get(G);qe&&(Xe=qe)}else{const qe=this.playersByElement.get(G);if(qe){const bi=!be||be==kn;qe.forEach(Ui=>{Ui.queued||!bi&&Ui.triggerName!=ee||Xe.push(Ui)})}}return(_t||ee)&&(Xe=Xe.filter(qe=>!(_t&&_t!=qe.namespaceId||ee&&ee!=qe.triggerName))),Xe}_beforeAnimationBuild(G,K,_t){const be=K.element,Xe=K.isRemovalTransition?void 0:G,qe=K.isRemovalTransition?void 0:K.triggerName;for(const bi of K.timelines){const Ui=bi.element,hn=Ui!==be,Cn=B(_t,Ui,[]);this._getPreviousPlayers(Ui,hn,Xe,qe,K.toState).forEach(Qn=>{const Nn=Qn.getRealPlayer();Nn.beforeDestroy&&Nn.beforeDestroy(),Qn.destroy(),Cn.push(Qn)})}Se(be,K.fromStyles)}_buildAnimation(G,K,_t,ee,be,Xe){const qe=K.triggerName,bi=K.element,Ui=[],hn=new Set,Cn=new Set,Zn=K.timelines.map(Nn=>{const tr=Nn.element;hn.add(tr);const er=tr[zn];if(er&&er.removedBeforeQueried)return new e.ZN(Nn.duration,Nn.delay);const wr=tr!==bi,Yr=function(Wt){const G=[];return ka(Wt,G),G}((_t.get(tr)||Ji).map(Mo=>Mo.getRealPlayer())).filter(Mo=>!!Mo.element&&Mo.element===tr),ro=be.get(tr),Vo=Xe.get(tr),La=s(0,this._normalizer,0,Nn.keyframes,ro,Vo),Fs=this._buildPlayer(Nn,La,Yr);if(Nn.subTimeline&&ee&&Cn.add(tr),wr){const Mo=new go(G,qe,tr);Mo.setRealPlayer(Fs),Ui.push(Mo)}return Fs});Ui.forEach(Nn=>{B(this.playersByQueriedElement,Nn.element,[]).push(Nn),Nn.onDone(()=>function(Wt,G,K){let _t;if(Wt instanceof Map){if(_t=Wt.get(G),_t){if(_t.length){const ee=_t.indexOf(K);_t.splice(ee,1)}0==_t.length&&Wt.delete(G)}}else if(_t=Wt[G],_t){if(_t.length){const ee=_t.indexOf(K);_t.splice(ee,1)}0==_t.length&&delete Wt[G]}return _t}(this.playersByQueriedElement,Nn.element,Nn))}),hn.forEach(Nn=>Do(Nn,Nt));const Qn=r(Zn);return Qn.onDestroy(()=>{hn.forEach(Nn=>jo(Nn,Nt)),Gt(bi,K.toStyles)}),Cn.forEach(Nn=>{B(ee,Nn,[]).push(Qn)}),Qn}_buildPlayer(G,K,_t){return K.length>0?this.driver.animate(G.element,K,G.duration,G.delay,G.easing,_t):new e.ZN(G.duration,G.delay)}}class go{constructor(G,K,_t){this.namespaceId=G,this.triggerName=K,this.element=_t,this._player=new e.ZN,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(G){this._containsRealPlayer||(this._player=G,Object.keys(this._queuedCallbacks).forEach(K=>{this._queuedCallbacks[K].forEach(_t=>u(G,K,void 0,_t))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(G.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(G){this.totalTime=G}syncPlayerEvents(G){const K=this._player;K.triggerCallback&&G.onStart(()=>K.triggerCallback("start")),G.onDone(()=>this.finish()),G.onDestroy(()=>this.destroy())}_queueEvent(G,K){B(this._queuedCallbacks,G,[]).push(K)}onDone(G){this.queued&&this._queueEvent("done",G),this._player.onDone(G)}onStart(G){this.queued&&this._queueEvent("start",G),this._player.onStart(G)}onDestroy(G){this.queued&&this._queueEvent("destroy",G),this._player.onDestroy(G)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(G){this.queued||this._player.setPosition(G)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(G){const K=this._player;K.triggerCallback&&K.triggerCallback(G)}}function ts(Wt){return Wt&&1===Wt.nodeType}function ks(Wt,G){const K=Wt.style.display;return Wt.style.display=null!=G?G:"none",K}function Ls(Wt,G,K,_t,ee){const be=[];K.forEach(bi=>be.push(ks(bi)));const Xe=[];_t.forEach((bi,Ui)=>{const hn={};bi.forEach(Cn=>{const Zn=hn[Cn]=G.computeStyle(Ui,Cn,ee);(!Zn||0==Zn.length)&&(Ui[zn]=sr,Xe.push(Ui))}),Wt.set(Ui,hn)});let qe=0;return K.forEach(bi=>ks(bi,be[qe++])),Xe}function Fo(Wt,G){const K=new Map;if(Wt.forEach(qe=>K.set(qe,[])),0==G.length)return K;const ee=new Set(G),be=new Map;function Xe(qe){if(!qe)return 1;let bi=be.get(qe);if(bi)return bi;const Ui=qe.parentNode;return bi=K.has(Ui)?Ui:ee.has(Ui)?1:Xe(Ui),be.set(qe,bi),bi}return G.forEach(qe=>{const bi=Xe(qe);1!==bi&&K.get(bi).push(qe)}),K}function Do(Wt,G){var K;null===(K=Wt.classList)||void 0===K||K.add(G)}function jo(Wt,G){var K;null===(K=Wt.classList)||void 0===K||K.remove(G)}function Io(Wt,G,K){r(K).onDone(()=>Wt.processLeaveNode(G))}function ka(Wt,G){for(let K=0;K<Wt.length;K++){const _t=Wt[K];_t instanceof e.ZE?ka(_t.players,G):G.push(_t)}}function Zo(Wt,G,K){const _t=K.get(Wt);if(!_t)return!1;let ee=G.get(Wt);return ee?_t.forEach(be=>ee.add(be)):G.set(Wt,_t),K.delete(Wt),!0}class sa{constructor(G,K,_t){this.bodyNode=G,this._driver=K,this._normalizer=_t,this._triggerCache={},this.onRemovalComplete=(ee,be)=>{},this._transitionEngine=new so(G,K,_t),this._timelineEngine=new Rr(G,K,_t),this._transitionEngine.onRemovalComplete=(ee,be)=>this.onRemovalComplete(ee,be)}registerTrigger(G,K,_t,ee,be){const Xe=G+"-"+ee;let qe=this._triggerCache[Xe];if(!qe){const bi=[],Ui=Zi(this._driver,be,bi);if(bi.length)throw new Error(`The animation trigger "${ee}" has failed to build due to the following errors:\n - ${bi.join("\n - ")}`);qe=function(Wt,G,K){return new Pr(Wt,G,K)}(ee,Ui,this._normalizer),this._triggerCache[Xe]=qe}this._transitionEngine.registerTrigger(K,ee,qe)}register(G,K){this._transitionEngine.register(G,K)}destroy(G,K){this._transitionEngine.destroy(G,K)}onInsert(G,K,_t,ee){this._transitionEngine.insertNode(G,K,_t,ee)}onRemove(G,K,_t,ee){this._transitionEngine.removeNode(G,K,ee||!1,_t)}disableAnimations(G,K){this._transitionEngine.markElementAsDisabled(G,K)}process(G,K,_t,ee){if("@"==_t.charAt(0)){const[be,Xe]=Z(_t);this._timelineEngine.command(be,K,Xe,ee)}else this._transitionEngine.trigger(G,K,_t,ee)}listen(G,K,_t,ee,be){if("@"==_t.charAt(0)){const[Xe,qe]=Z(_t);return this._timelineEngine.listen(Xe,K,qe,be)}return this._transitionEngine.listen(G,K,_t,ee,be)}flush(G=-1){this._transitionEngine.flush(G)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function El(Wt,G){let K=null,_t=null;return Array.isArray(G)&&G.length?(K=Ja(G[0]),G.length>1&&(_t=Ja(G[G.length-1]))):G&&(K=Ja(G)),K||_t?new aa(Wt,K,_t):null}let aa=(()=>{class Wt{constructor(K,_t,ee){this._element=K,this._startStyles=_t,this._endStyles=ee,this._state=0;let be=Wt.initialStylesByElement.get(K);be||Wt.initialStylesByElement.set(K,be={}),this._initialStyles=be}start(){this._state<1&&(this._startStyles&&Gt(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Gt(this._element,this._initialStyles),this._endStyles&&(Gt(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(Wt.initialStylesByElement.delete(this._element),this._startStyles&&(Se(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Se(this._element,this._endStyles),this._endStyles=null),Gt(this._element,this._initialStyles),this._state=3)}}return Wt.initialStylesByElement=new WeakMap,Wt})();function Ja(Wt){let G=null;const K=Object.keys(Wt);for(let _t=0;_t<K.length;_t++){const ee=K[_t];Ks(ee)&&(G=G||{},G[ee]=Wt[ee])}return G}function Ks(Wt){return"display"===Wt||"position"===Wt}const Tl="animation",Sa="animationend";class ko{constructor(G,K,_t,ee,be,Xe,qe){this._element=G,this._name=K,this._duration=_t,this._delay=ee,this._easing=be,this._fillMode=Xe,this._onDoneFn=qe,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=bi=>this._handleCallback(bi)}apply(){(function(Wt,G){const K=Lo(Wt,"").trim();let _t=0;K.length&&(function(Wt,G){let K=0;for(let _t=0;_t<Wt.length;_t++)","===Wt.charAt(_t)&&K++;return K}(K)+1,G=`${K}, ${G}`),Bo(Wt,"",G)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),Ss(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){jr(this._element,this._name,"paused")}resume(){jr(this._element,this._name,"running")}setPosition(G){const K=Ns(this._element,this._name);this._position=G*this._duration,Bo(this._element,"Delay",`-${this._position}ms`,K)}getPosition(){return this._position}_handleCallback(G){const K=G._ngTestManualTimestamp||Date.now(),_t=1e3*parseFloat(G.elapsedTime.toFixed(3));G.animationName==this._name&&Math.max(K-this._startTime,0)>=this._delay&&_t>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),Ss(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(Wt,G){const _t=Lo(Wt,"").split(","),ee=Yo(_t,G);ee>=0&&(_t.splice(ee,1),Bo(Wt,"",_t.join(",")))}(this._element,this._name))}}function jr(Wt,G,K){Bo(Wt,"PlayState",K,Ns(Wt,G))}function Ns(Wt,G){const K=Lo(Wt,"");return K.indexOf(",")>0?Yo(K.split(","),G):Yo([K],G)}function Yo(Wt,G){for(let K=0;K<Wt.length;K++)if(Wt[K].indexOf(G)>=0)return K;return-1}function Ss(Wt,G,K){K?Wt.removeEventListener(Sa,G):Wt.addEventListener(Sa,G)}function Bo(Wt,G,K,_t){const ee=Tl+G;if(null!=_t){const be=Wt.style[ee];if(be.length){const Xe=be.split(",");Xe[_t]=K,K=Xe.join(",")}}Wt.style[ee]=K}function Lo(Wt,G){return Wt.style[Tl+G]||""}class fs{constructor(G,K,_t,ee,be,Xe,qe,bi){this.element=G,this.keyframes=K,this.animationName=_t,this._duration=ee,this._delay=be,this._finalStyles=qe,this._specialStyles=bi,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=Xe||"linear",this.totalTime=ee+be,this._buildStyler()}onStart(G){this._onStartFns.push(G)}onDone(G){this._onDoneFns.push(G)}onDestroy(G){this._onDestroyFns.push(G)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(G=>G()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(G=>G()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(G=>G()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(G){this._styler.setPosition(G)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new ko(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(G){const K="start"==G?this._onStartFns:this._onDoneFns;K.forEach(_t=>_t()),K.length=0}beforeDestroy(){this.init();const G={};if(this.hasStarted()){const K=this._state>=3;Object.keys(this._finalStyles).forEach(_t=>{"offset"!=_t&&(G[_t]=K?this._finalStyles[_t]:ye(this.element,_t))})}this.currentSnapshot=G}}class Lr extends e.ZN{constructor(G,K){super(),this.element=G,this._startingStyles={},this.__initialized=!1,this._styles=st(K)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(G=>{this._startingStyles[G]=this.element.style[G]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(G=>this.element.style.setProperty(G,this._styles[G])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(G=>{const K=this._startingStyles[G];K?this.element.style.setProperty(G,K):this.element.style.removeProperty(G)}),this._startingStyles=null,super.destroy())}}class $s{constructor(){this._count=0}validateStyleProperty(G){return Ht(G)}matchesElement(G,K){return!1}containsElement(G,K){return Ct(G,K)}query(G,K,_t){return bt(G,K,_t)}computeStyle(G,K,_t){return window.getComputedStyle(G)[K]}buildKeyframeElement(G,K,_t){_t=_t.map(qe=>st(qe));let ee=`@keyframes ${K} {\n`,be="";_t.forEach(qe=>{be=" ";const bi=parseFloat(qe.offset);ee+=`${be}${100*bi}% {\n`,be+=" ",Object.keys(qe).forEach(Ui=>{const hn=qe[Ui];switch(Ui){case"offset":return;case"easing":return void(hn&&(ee+=`${be}animation-timing-function: ${hn};\n`));default:return void(ee+=`${be}${Ui}: ${hn};\n`)}}),ee+=`${be}}\n`}),ee+="}\n";const Xe=document.createElement("style");return Xe.textContent=ee,Xe}animate(G,K,_t,ee,be,Xe=[],qe){const bi=Xe.filter(er=>er instanceof fs),Ui={};Oe(_t,ee)&&bi.forEach(er=>{let wr=er.currentSnapshot;Object.keys(wr).forEach(Yr=>Ui[Yr]=wr[Yr])});const hn=function(Wt){let G={};return Wt&&(Array.isArray(Wt)?Wt:[Wt]).forEach(_t=>{Object.keys(_t).forEach(ee=>{"offset"==ee||"easing"==ee||(G[ee]=_t[ee])})}),G}(K=re(G,K,Ui));if(0==_t)return new Lr(G,hn);const Cn="gen_css_kf_"+this._count++,Zn=this.buildKeyframeElement(G,Cn,K);(function(Wt){var G;const K=null===(G=Wt.getRootNode)||void 0===G?void 0:G.call(Wt);return"undefined"!=typeof ShadowRoot&&K instanceof ShadowRoot?K:document.head})(G).appendChild(Zn);const Nn=El(G,K),tr=new fs(G,K,Cn,_t,ee,be,hn,Nn);return tr.onDestroy(()=>{var Wt;(Wt=Zn).parentNode.removeChild(Wt)}),tr}}class Nr{constructor(G,K,_t,ee){this.element=G,this.keyframes=K,this.options=_t,this._specialStyles=ee,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=_t.duration,this._delay=_t.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(G=>G()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const G=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,G,this.options),this._finalKeyframe=G.length?G[G.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(G,K,_t){return G.animate(K,_t)}onStart(G){this._onStartFns.push(G)}onDone(G){this._onDoneFns.push(G)}onDestroy(G){this._onDestroyFns.push(G)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(G=>G()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(G=>G()),this._onDestroyFns=[])}setPosition(G){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=G*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const G={};if(this.hasStarted()){const K=this._finalKeyframe;Object.keys(K).forEach(_t=>{"offset"!=_t&&(G[_t]=this._finished?K[_t]:ye(this.element,_t))})}this.currentSnapshot=G}triggerCallback(G){const K="start"==G?this._onStartFns:this._onDoneFns;K.forEach(_t=>_t()),K.length=0}}class Ln{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(xt().toString()),this._cssKeyframesDriver=new $s}validateStyleProperty(G){return Ht(G)}matchesElement(G,K){return!1}containsElement(G,K){return Ct(G,K)}query(G,K,_t){return bt(G,K,_t)}computeStyle(G,K,_t){return window.getComputedStyle(G)[K]}overrideWebAnimationsSupport(G){this._isNativeImpl=G}animate(G,K,_t,ee,be,Xe=[],qe){if(!qe&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(G,K,_t,ee,be,Xe);const hn={duration:_t,delay:ee,fill:0==ee?"both":"forwards"};be&&(hn.easing=be);const Cn={},Zn=Xe.filter(Nn=>Nn instanceof Nr);Oe(_t,ee)&&Zn.forEach(Nn=>{let tr=Nn.currentSnapshot;Object.keys(tr).forEach(er=>Cn[er]=tr[er])});const Qn=El(G,K=re(G,K=K.map(Nn=>$e(Nn,!1)),Cn));return new Nr(G,K,hn,Qn)}}function xt(){return t()&&Element.prototype.animate||{}}var Q=m(69808);let V=(()=>{class Wt extends e._j{constructor(K,_t){super(),this._nextAnimationId=0,this._renderer=K.createRenderer(_t.body,{id:"0",encapsulation:T.ifc.None,styles:[],data:{animation:[]}})}build(K){const _t=this._nextAnimationId.toString();this._nextAnimationId++;const ee=Array.isArray(K)?(0,e.vP)(K):K;return Be(this._renderer,null,_t,"register",[ee]),new W(_t,this._renderer)}}return Wt.\u0275fac=function(K){return new(K||Wt)(T.LFG(T.FYo),T.LFG(Q.K0))},Wt.\u0275prov=T.Yz7({token:Wt,factory:Wt.\u0275fac}),Wt})();class W extends e.LC{constructor(G,K){super(),this._id=G,this._renderer=K}create(G,K){return new At(this._id,G,K||{},this._renderer)}}class At{constructor(G,K,_t,ee){this.id=G,this.element=K,this._renderer=ee,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",_t)}_listen(G,K){return this._renderer.listen(this.element,`@@${this.id}:${G}`,K)}_command(G,...K){return Be(this._renderer,this.element,this.id,G,K)}onDone(G){this._listen("done",G)}onStart(G){this._listen("start",G)}onDestroy(G){this._listen("destroy",G)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(G){this._command("setPosition",G)}getPosition(){var G,K;return null!==(K=null===(G=this._renderer.engine.players[+this.id])||void 0===G?void 0:G.getPosition())&&void 0!==K?K:0}}function Be(Wt,G,K,_t,ee){return Wt.setProperty(G,`@@${K}:${_t}`,ee)}const ln="@.disabled";let Xn=(()=>{class Wt{constructor(K,_t,ee){this.delegate=K,this.engine=_t,this._zone=ee,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),_t.onRemovalComplete=(be,Xe)=>{const qe=null==Xe?void 0:Xe.parentNode(be);qe&&Xe.removeChild(qe,be)}}createRenderer(K,_t){const be=this.delegate.createRenderer(K,_t);if(!(K&&_t&&_t.data&&_t.data.animation)){let hn=this._rendererCache.get(be);return hn||(hn=new yr("",be,this.engine),this._rendererCache.set(be,hn)),hn}const Xe=_t.id,qe=_t.id+"-"+this._currentId;this._currentId++,this.engine.register(qe,K);const bi=hn=>{Array.isArray(hn)?hn.forEach(bi):this.engine.registerTrigger(Xe,qe,K,hn.name,hn)};return _t.data.animation.forEach(bi),new Or(this,qe,be,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(K,_t,ee){K>=0&&K<this._microtaskId?this._zone.run(()=>_t(ee)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(be=>{const[Xe,qe]=be;Xe(qe)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([_t,ee]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return Wt.\u0275fac=function(K){return new(K||Wt)(T.LFG(T.FYo),T.LFG(sa),T.LFG(T.R0b))},Wt.\u0275prov=T.Yz7({token:Wt,factory:Wt.\u0275fac}),Wt})();class yr{constructor(G,K,_t){this.namespaceId=G,this.delegate=K,this.engine=_t,this.destroyNode=this.delegate.destroyNode?ee=>K.destroyNode(ee):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(G,K){return this.delegate.createElement(G,K)}createComment(G){return this.delegate.createComment(G)}createText(G){return this.delegate.createText(G)}appendChild(G,K){this.delegate.appendChild(G,K),this.engine.onInsert(this.namespaceId,K,G,!1)}insertBefore(G,K,_t,ee=!0){this.delegate.insertBefore(G,K,_t),this.engine.onInsert(this.namespaceId,K,G,ee)}removeChild(G,K,_t){this.engine.onRemove(this.namespaceId,K,this.delegate,_t)}selectRootElement(G,K){return this.delegate.selectRootElement(G,K)}parentNode(G){return this.delegate.parentNode(G)}nextSibling(G){return this.delegate.nextSibling(G)}setAttribute(G,K,_t,ee){this.delegate.setAttribute(G,K,_t,ee)}removeAttribute(G,K,_t){this.delegate.removeAttribute(G,K,_t)}addClass(G,K){this.delegate.addClass(G,K)}removeClass(G,K){this.delegate.removeClass(G,K)}setStyle(G,K,_t,ee){this.delegate.setStyle(G,K,_t,ee)}removeStyle(G,K,_t){this.delegate.removeStyle(G,K,_t)}setProperty(G,K,_t){"@"==K.charAt(0)&&K==ln?this.disableAnimations(G,!!_t):this.delegate.setProperty(G,K,_t)}setValue(G,K){this.delegate.setValue(G,K)}listen(G,K,_t){return this.delegate.listen(G,K,_t)}disableAnimations(G,K){this.engine.disableAnimations(G,K)}}class Or extends yr{constructor(G,K,_t,ee){super(K,_t,ee),this.factory=G,this.namespaceId=K}setProperty(G,K,_t){"@"==K.charAt(0)?"."==K.charAt(1)&&K==ln?this.disableAnimations(G,_t=void 0===_t||!!_t):this.engine.process(this.namespaceId,G,K.substr(1),_t):this.delegate.setProperty(G,K,_t)}listen(G,K,_t){if("@"==K.charAt(0)){const ee=function(Wt){switch(Wt){case"body":return document.body;case"document":return document;case"window":return window;default:return Wt}}(G);let be=K.substr(1),Xe="";return"@"!=be.charAt(0)&&([be,Xe]=function(Wt){const G=Wt.indexOf(".");return[Wt.substring(0,G),Wt.substr(G+1)]}(be)),this.engine.listen(this.namespaceId,ee,be,Xe,qe=>{this.factory.scheduleListenerCallback(qe._data||-1,_t,qe)})}return this.delegate.listen(G,K,_t)}}let cr=(()=>{class Wt extends sa{constructor(K,_t,ee){super(K.body,_t,ee)}ngOnDestroy(){this.flush()}}return Wt.\u0275fac=function(K){return new(K||Wt)(T.LFG(Q.K0),T.LFG(lt),T.LFG(Cr))},Wt.\u0275prov=T.Yz7({token:Wt,factory:Wt.\u0275fac}),Wt})();const wa=new T.OlP("AnimationModuleType"),Uo=[{provide:e._j,useClass:V},{provide:Cr,useFactory:function(){return new no}},{provide:sa,useClass:cr},{provide:T.FYo,useFactory:function(Wt,G,K){return new Xn(Wt,G,K)},deps:[_.se,sa,T.R0b]}],$a=[{provide:lt,useFactory:function(){return"function"==typeof xt()?new Ln:new $s}},{provide:wa,useValue:"BrowserAnimations"},...Uo],Rs=[{provide:lt,useClass:gt},{provide:wa,useValue:"NoopAnimations"},...Uo];let Ps=(()=>{class Wt{static withConfig(K){return{ngModule:Wt,providers:K.disableAnimations?Rs:$a}}}return Wt.\u0275fac=function(K){return new(K||Wt)},Wt.\u0275mod=T.oAB({type:Wt}),Wt.\u0275inj=T.cJS({providers:$a,imports:[_.b2]}),Wt})()},22313:(U,$,m)=>{"use strict";m.d($,{b2:()=>ri,H7:()=>Wi,Dx:()=>re,q6:()=>jt,se:()=>fe});var T=m(69808),_=m(5e3);class e extends T.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class t extends e{static makeCurrent(){(0,T.HT)(new t)}onAndCancel(Ke,Pe,hi){return Ke.addEventListener(Pe,hi,!1),()=>{Ke.removeEventListener(Pe,hi,!1)}}dispatchEvent(Ke,Pe){Ke.dispatchEvent(Pe)}remove(Ke){Ke.parentNode&&Ke.parentNode.removeChild(Ke)}createElement(Ke,Pe){return(Pe=Pe||this.getDefaultDocument()).createElement(Ke)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Ke){return Ke.nodeType===Node.ELEMENT_NODE}isShadowRoot(Ke){return Ke instanceof DocumentFragment}getGlobalEventTarget(Ke,Pe){return"window"===Pe?window:"document"===Pe?Ke:"body"===Pe?Ke.body:null}getBaseHref(Ke){const Pe=(n=n||document.querySelector("base"),n?n.getAttribute("href"):null);return null==Pe?null:function(ci){s=s||document.createElement("a"),s.setAttribute("href",ci);const Ke=s.pathname;return"/"===Ke.charAt(0)?Ke:`/${Ke}`}(Pe)}resetBaseElement(){n=null}getUserAgent(){return window.navigator.userAgent}getCookie(Ke){return(0,T.Mx)(document.cookie,Ke)}}let s,n=null;const b=new _.OlP("TRANSITION_ID"),B=[{provide:_.ip1,useFactory:function(ci,Ke,Pe){return()=>{Pe.get(_.CZH).donePromise.then(()=>{const hi=(0,T.q)(),xi=Ke.querySelectorAll(`style[ng-transition="${ci}"]`);for(let fn=0;fn<xi.length;fn++)hi.remove(xi[fn])})}},deps:[b,T.K0,_.zs3],multi:!0}];class Z{static init(){(0,_.VLi)(new Z)}addToWindow(Ke){_.dqk.getAngularTestability=(hi,xi=!0)=>{const fn=Ke.findTestabilityInTree(hi,xi);if(null==fn)throw new Error("Could not find testability for element.");return fn},_.dqk.getAllAngularTestabilities=()=>Ke.getAllTestabilities(),_.dqk.getAllAngularRootElements=()=>Ke.getAllRootElements(),_.dqk.frameworkStabilizers||(_.dqk.frameworkStabilizers=[]),_.dqk.frameworkStabilizers.push(hi=>{const xi=_.dqk.getAllAngularTestabilities();let fn=xi.length,In=!1;const or=function(Cr){In=In||Cr,fn--,0==fn&&hi(In)};xi.forEach(function(Cr){Cr.whenStable(or)})})}findTestabilityInTree(Ke,Pe,hi){if(null==Pe)return null;const xi=Ke.getTestability(Pe);return null!=xi?xi:hi?(0,T.q)().isShadowRoot(Pe)?this.findTestabilityInTree(Ke,Pe.host,!0):this.findTestabilityInTree(Ke,Pe.parentElement,!0):null}}let ot=(()=>{class ci{build(){return new XMLHttpRequest}}return ci.\u0275fac=function(Pe){return new(Pe||ci)},ci.\u0275prov=_.Yz7({token:ci,factory:ci.\u0275fac}),ci})();const et=new _.OlP("EventManagerPlugins");let Tt=(()=>{class ci{constructor(Pe,hi){this._zone=hi,this._eventNameToPlugin=new Map,Pe.forEach(xi=>xi.manager=this),this._plugins=Pe.slice().reverse()}addEventListener(Pe,hi,xi){return this._findPluginFor(hi).addEventListener(Pe,hi,xi)}addGlobalEventListener(Pe,hi,xi){return this._findPluginFor(hi).addGlobalEventListener(Pe,hi,xi)}getZone(){return this._zone}_findPluginFor(Pe){const hi=this._eventNameToPlugin.get(Pe);if(hi)return hi;const xi=this._plugins;for(let fn=0;fn<xi.length;fn++){const In=xi[fn];if(In.supports(Pe))return this._eventNameToPlugin.set(Pe,In),In}throw new Error(`No event manager plugin found for event ${Pe}`)}}return ci.\u0275fac=function(Pe){return new(Pe||ci)(_.LFG(et),_.LFG(_.R0b))},ci.\u0275prov=_.Yz7({token:ci,factory:ci.\u0275fac}),ci})();class Pt{constructor(Ke){this._doc=Ke}addGlobalEventListener(Ke,Pe,hi){const xi=(0,T.q)().getGlobalEventTarget(this._doc,Ke);if(!xi)throw new Error(`Unsupported event target ${xi} for event ${Pe}`);return this.addEventListener(xi,Pe,hi)}}let pt=(()=>{class ci{constructor(){this._stylesSet=new Set}addStyles(Pe){const hi=new Set;Pe.forEach(xi=>{this._stylesSet.has(xi)||(this._stylesSet.add(xi),hi.add(xi))}),this.onStylesAdded(hi)}onStylesAdded(Pe){}getAllStyles(){return Array.from(this._stylesSet)}}return ci.\u0275fac=function(Pe){return new(Pe||ci)},ci.\u0275prov=_.Yz7({token:ci,factory:ci.\u0275fac}),ci})(),It=(()=>{class ci extends pt{constructor(Pe){super(),this._doc=Pe,this._hostNodes=new Map,this._hostNodes.set(Pe.head,[])}_addStylesToHost(Pe,hi,xi){Pe.forEach(fn=>{const In=this._doc.createElement("style");In.textContent=fn,xi.push(hi.appendChild(In))})}addHost(Pe){const hi=[];this._addStylesToHost(this._stylesSet,Pe,hi),this._hostNodes.set(Pe,hi)}removeHost(Pe){const hi=this._hostNodes.get(Pe);hi&&hi.forEach(Ht),this._hostNodes.delete(Pe)}onStylesAdded(Pe){this._hostNodes.forEach((hi,xi)=>{this._addStylesToHost(Pe,xi,hi)})}ngOnDestroy(){this._hostNodes.forEach(Pe=>Pe.forEach(Ht))}}return ci.\u0275fac=function(Pe){return new(Pe||ci)(_.LFG(T.K0))},ci.\u0275prov=_.Yz7({token:ci,factory:ci.\u0275fac}),ci})();function Ht(ci){(0,T.q)().remove(ci)}const Jt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Ct=/%COMP%/g;function Et(ci,Ke,Pe){for(let hi=0;hi<Ke.length;hi++){let xi=Ke[hi];Array.isArray(xi)?Et(ci,xi,Pe):(xi=xi.replace(Ct,ci),Pe.push(xi))}return Pe}function ut(ci){return Ke=>{if("__ngUnwrap__"===Ke)return ci;!1===ci(Ke)&&(Ke.preventDefault(),Ke.returnValue=!1)}}let fe=(()=>{class ci{constructor(Pe,hi,xi){this.eventManager=Pe,this.sharedStylesHost=hi,this.appId=xi,this.rendererByCompId=new Map,this.defaultRenderer=new Mt(Pe)}createRenderer(Pe,hi){if(!Pe||!hi)return this.defaultRenderer;switch(hi.encapsulation){case _.ifc.Emulated:{let xi=this.rendererByCompId.get(hi.id);return xi||(xi=new ve(this.eventManager,this.sharedStylesHost,hi,this.appId),this.rendererByCompId.set(hi.id,xi)),xi.applyToHost(Pe),xi}case 1:case _.ifc.ShadowDom:return new pe(this.eventManager,this.sharedStylesHost,Pe,hi);default:if(!this.rendererByCompId.has(hi.id)){const xi=Et(hi.id,hi.styles,[]);this.sharedStylesHost.addStyles(xi),this.rendererByCompId.set(hi.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return ci.\u0275fac=function(Pe){return new(Pe||ci)(_.LFG(Tt),_.LFG(It),_.LFG(_.AFp))},ci.\u0275prov=_.Yz7({token:ci,factory:ci.\u0275fac}),ci})();class Mt{constructor(Ke){this.eventManager=Ke,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(Ke,Pe){return Pe?document.createElementNS(Jt[Pe]||Pe,Ke):document.createElement(Ke)}createComment(Ke){return document.createComment(Ke)}createText(Ke){return document.createTextNode(Ke)}appendChild(Ke,Pe){Ke.appendChild(Pe)}insertBefore(Ke,Pe,hi){Ke&&Ke.insertBefore(Pe,hi)}removeChild(Ke,Pe){Ke&&Ke.removeChild(Pe)}selectRootElement(Ke,Pe){let hi="string"==typeof Ke?document.querySelector(Ke):Ke;if(!hi)throw new Error(`The selector "${Ke}" did not match any elements`);return Pe||(hi.textContent=""),hi}parentNode(Ke){return Ke.parentNode}nextSibling(Ke){return Ke.nextSibling}setAttribute(Ke,Pe,hi,xi){if(xi){Pe=xi+":"+Pe;const fn=Jt[xi];fn?Ke.setAttributeNS(fn,Pe,hi):Ke.setAttribute(Pe,hi)}else Ke.setAttribute(Pe,hi)}removeAttribute(Ke,Pe,hi){if(hi){const xi=Jt[hi];xi?Ke.removeAttributeNS(xi,Pe):Ke.removeAttribute(`${hi}:${Pe}`)}else Ke.removeAttribute(Pe)}addClass(Ke,Pe){Ke.classList.add(Pe)}removeClass(Ke,Pe){Ke.classList.remove(Pe)}setStyle(Ke,Pe,hi,xi){xi&(_.JOm.DashCase|_.JOm.Important)?Ke.style.setProperty(Pe,hi,xi&_.JOm.Important?"important":""):Ke.style[Pe]=hi}removeStyle(Ke,Pe,hi){hi&_.JOm.DashCase?Ke.style.removeProperty(Pe):Ke.style[Pe]=""}setProperty(Ke,Pe,hi){Ke[Pe]=hi}setValue(Ke,Pe){Ke.nodeValue=Pe}listen(Ke,Pe,hi){return"string"==typeof Ke?this.eventManager.addGlobalEventListener(Ke,Pe,ut(hi)):this.eventManager.addEventListener(Ke,Pe,ut(hi))}}class ve extends Mt{constructor(Ke,Pe,hi,xi){super(Ke),this.component=hi;const fn=Et(xi+"-"+hi.id,hi.styles,[]);Pe.addStyles(fn),this.contentAttr="_ngcontent-%COMP%".replace(Ct,xi+"-"+hi.id),this.hostAttr="_nghost-%COMP%".replace(Ct,xi+"-"+hi.id)}applyToHost(Ke){super.setAttribute(Ke,this.hostAttr,"")}createElement(Ke,Pe){const hi=super.createElement(Ke,Pe);return super.setAttribute(hi,this.contentAttr,""),hi}}class pe extends Mt{constructor(Ke,Pe,hi,xi){super(Ke),this.sharedStylesHost=Pe,this.hostEl=hi,this.shadowRoot=hi.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const fn=Et(xi.id,xi.styles,[]);for(let In=0;In<fn.length;In++){const or=document.createElement("style");or.textContent=fn[In],this.shadowRoot.appendChild(or)}}nodeOrShadowRoot(Ke){return Ke===this.hostEl?this.shadowRoot:Ke}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(Ke,Pe){return super.appendChild(this.nodeOrShadowRoot(Ke),Pe)}insertBefore(Ke,Pe,hi){return super.insertBefore(this.nodeOrShadowRoot(Ke),Pe,hi)}removeChild(Ke,Pe){return super.removeChild(this.nodeOrShadowRoot(Ke),Pe)}parentNode(Ke){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Ke)))}}let He=(()=>{class ci extends Pt{constructor(Pe){super(Pe)}supports(Pe){return!0}addEventListener(Pe,hi,xi){return Pe.addEventListener(hi,xi,!1),()=>this.removeEventListener(Pe,hi,xi)}removeEventListener(Pe,hi,xi){return Pe.removeEventListener(hi,xi)}}return ci.\u0275fac=function(Pe){return new(Pe||ci)(_.LFG(T.K0))},ci.\u0275prov=_.Yz7({token:ci,factory:ci.\u0275fac}),ci})();const ke=["alt","control","meta","shift"],Di={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},$e={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Le={alt:ci=>ci.altKey,control:ci=>ci.ctrlKey,meta:ci=>ci.metaKey,shift:ci=>ci.shiftKey};let pi=(()=>{class ci extends Pt{constructor(Pe){super(Pe)}supports(Pe){return null!=ci.parseEventName(Pe)}addEventListener(Pe,hi,xi){const fn=ci.parseEventName(hi),In=ci.eventCallback(fn.fullKey,xi,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,T.q)().onAndCancel(Pe,fn.domEventName,In))}static parseEventName(Pe){const hi=Pe.toLowerCase().split("."),xi=hi.shift();if(0===hi.length||"keydown"!==xi&&"keyup"!==xi)return null;const fn=ci._normalizeKey(hi.pop());let In="";if(ke.forEach(Cr=>{const to=hi.indexOf(Cr);to>-1&&(hi.splice(to,1),In+=Cr+".")}),In+=fn,0!=hi.length||0===fn.length)return null;const or={};return or.domEventName=xi,or.fullKey=In,or}static getEventFullKey(Pe){let hi="",xi=function(ci){let Ke=ci.key;if(null==Ke){if(Ke=ci.keyIdentifier,null==Ke)return"Unidentified";Ke.startsWith("U+")&&(Ke=String.fromCharCode(parseInt(Ke.substring(2),16)),3===ci.location&&$e.hasOwnProperty(Ke)&&(Ke=$e[Ke]))}return Di[Ke]||Ke}(Pe);return xi=xi.toLowerCase()," "===xi?xi="space":"."===xi&&(xi="dot"),ke.forEach(fn=>{fn!=xi&&Le[fn](Pe)&&(hi+=fn+".")}),hi+=xi,hi}static eventCallback(Pe,hi,xi){return fn=>{ci.getEventFullKey(fn)===Pe&&xi.runGuarded(()=>hi(fn))}}static _normalizeKey(Pe){return"esc"===Pe?"escape":Pe}}return ci.\u0275fac=function(Pe){return new(Pe||ci)(_.LFG(T.K0))},ci.\u0275prov=_.Yz7({token:ci,factory:ci.\u0275fac}),ci})();const jt=(0,_.eFA)(_._c5,"browser",[{provide:_.Lbi,useValue:T.bD},{provide:_.g9A,useValue:function(){t.makeCurrent(),Z.init()},multi:!0},{provide:T.K0,useFactory:function(){return(0,_.RDi)(document),document},deps:[]}]),Ce=[{provide:_.zSh,useValue:"root"},{provide:_.qLn,useFactory:function(){return new _.qLn},deps:[]},{provide:et,useClass:He,multi:!0,deps:[T.K0,_.R0b,_.Lbi]},{provide:et,useClass:pi,multi:!0,deps:[T.K0]},{provide:fe,useClass:fe,deps:[Tt,It,_.AFp]},{provide:_.FYo,useExisting:fe},{provide:pt,useExisting:It},{provide:It,useClass:It,deps:[T.K0]},{provide:_.dDg,useClass:_.dDg,deps:[_.R0b]},{provide:Tt,useClass:Tt,deps:[et,_.R0b]},{provide:T.JF,useClass:ot,deps:[]}];let ri=(()=>{class ci{constructor(Pe){if(Pe)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(Pe){return{ngModule:ci,providers:[{provide:_.AFp,useValue:Pe.appId},{provide:b,useExisting:_.AFp},B]}}}return ci.\u0275fac=function(Pe){return new(Pe||ci)(_.LFG(ci,12))},ci.\u0275mod=_.oAB({type:ci}),ci.\u0275inj=_.cJS({providers:Ce,imports:[T.ez,_.hGG]}),ci})(),re=(()=>{class ci{constructor(Pe){this._doc=Pe}getTitle(){return this._doc.title}setTitle(Pe){this._doc.title=Pe||""}}return ci.\u0275fac=function(Pe){return new(Pe||ci)(_.LFG(T.K0))},ci.\u0275prov=_.Yz7({token:ci,factory:function(Pe){let hi=null;return hi=Pe?new Pe:new re((0,_.LFG)(T.K0)),hi},providedIn:"root"}),ci})();"undefined"!=typeof window&&window;let Wi=(()=>{class ci{}return ci.\u0275fac=function(Pe){return new(Pe||ci)},ci.\u0275prov=_.Yz7({token:ci,factory:function(Pe){let hi=null;return hi=Pe?new(Pe||ci):_.LFG(Sn),hi},providedIn:"root"}),ci})(),Sn=(()=>{class ci extends Wi{constructor(Pe){super(),this._doc=Pe}sanitize(Pe,hi){if(null==hi)return null;switch(Pe){case _.q3G.NONE:return hi;case _.q3G.HTML:return(0,_.qzn)(hi,"HTML")?(0,_.z3N)(hi):(0,_.EiD)(this._doc,String(hi)).toString();case _.q3G.STYLE:return(0,_.qzn)(hi,"Style")?(0,_.z3N)(hi):hi;case _.q3G.SCRIPT:if((0,_.qzn)(hi,"Script"))return(0,_.z3N)(hi);throw new Error("unsafe value used in a script context");case _.q3G.URL:return(0,_.yhl)(hi),(0,_.qzn)(hi,"URL")?(0,_.z3N)(hi):(0,_.mCW)(String(hi));case _.q3G.RESOURCE_URL:if((0,_.qzn)(hi,"ResourceURL"))return(0,_.z3N)(hi);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${Pe} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(Pe){return(0,_.JVY)(Pe)}bypassSecurityTrustStyle(Pe){return(0,_.L6k)(Pe)}bypassSecurityTrustScript(Pe){return(0,_.eBb)(Pe)}bypassSecurityTrustUrl(Pe){return(0,_.LAX)(Pe)}bypassSecurityTrustResourceUrl(Pe){return(0,_.pB0)(Pe)}}return ci.\u0275fac=function(Pe){return new(Pe||ci)(_.LFG(T.K0))},ci.\u0275prov=_.Yz7({token:ci,factory:function(Pe){let hi=null;return hi=Pe?new Pe:function(ci){return new Sn(ci.get(T.K0))}(_.LFG(_.zs3)),hi},providedIn:"root"}),ci})()},91083:(U,$,m)=>{"use strict";m.d($,{gz:()=>Oi,yS:()=>Ds,Bz:()=>Qa,lC:()=>fs});var T=m(5e3);const e=(0,m(83888).d)(ft=>function(){ft(this),this.name="EmptyError",this.message="no elements in sequence"});var t=m(68306),n=m(50727),r=m(54482),s=m(25403);function u(){return(0,r.e)((ft,nt)=>{let q=null;ft._refCount++;const Ot=new s.Q(nt,void 0,void 0,void 0,()=>{if(!ft||ft._refCount<=0||0<--ft._refCount)return void(q=null);const zt=ft._connection,_e=q;q=null,zt&&(!_e||zt===_e)&&zt.unsubscribe(),nt.unsubscribe()});ft.subscribe(Ot),Ot.closed||(q=ft.connect())})}class b extends t.y{constructor(nt,q){super(),this.source=nt,this.subjectFactory=q,this._subject=null,this._refCount=0,this._connection=null,(0,r.A)(nt)&&(this.lift=nt.lift)}_subscribe(nt){return this.getSubject().subscribe(nt)}getSubject(){const nt=this._subject;return(!nt||nt.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:nt}=this;this._subject=this._connection=null,null==nt||nt.unsubscribe()}connect(){let nt=this._connection;if(!nt){nt=this._connection=new n.w0;const q=this.getSubject();nt.add(this.source.subscribe(new s.Q(q,void 0,()=>{this._teardown(),q.complete()},Ot=>{this._teardown(),q.error(Ot)},()=>this._teardown()))),nt.closed&&(this._connection=null,nt=n.w0.EMPTY)}return nt}refCount(){return u()(this)}}var x=m(32076),B=m(39646),Z=m(61135),ot=m(39841),et=m(97272),Tt=m(49770),Pt=m(60515),pt=m(77579);function It(ft,nt,q,Ot,zt){return(_e,Ge)=>{let ei=q,ki=nt,_n=0;_e.subscribe(new s.Q(Ge,mr=>{const Wn=_n++;ki=ei?ft(ki,mr,Wn):(ei=!0,mr),Ot&&Ge.next(ki)},zt&&(()=>{ei&&Ge.next(ki),Ge.complete()})))}}function Ht(ft,nt){return(0,r.e)(It(ft,nt,arguments.length>=2,!0))}var Jt=m(39300);function Ct(ft){return ft<=0?()=>Pt.E:(0,r.e)((nt,q)=>{let Ot=[];nt.subscribe(new s.Q(q,zt=>{Ot.push(zt),ft<Ot.length&&Ot.shift()},()=>{for(const zt of Ot)q.next(zt);q.complete()},void 0,()=>{Ot=null}))})}function bt(ft=st){return(0,r.e)((nt,q)=>{let Ot=!1;nt.subscribe(new s.Q(q,zt=>{Ot=!0,q.next(zt)},()=>Ot?q.complete():q.error(ft())))})}function st(){return new e}function gt(ft){return(0,r.e)((nt,q)=>{let Ot=!1;nt.subscribe(new s.Q(q,zt=>{Ot=!0,q.next(zt)},()=>{Ot||q.next(ft),q.complete()}))})}var lt=m(44671),Dt=m(95698);function Et(ft,nt){const q=arguments.length>=2;return Ot=>Ot.pipe(ft?(0,Jt.h)((zt,_e)=>ft(zt,_e,Ot)):lt.y,(0,Dt.q)(1),q?gt(nt):bt(()=>new e))}var ut=m(54004),rt=m(63900),fe=m(68675),Mt=m(70262),Nt=m(24351),ge=m(95577),ve=m(18505),pe=m(28746),He=m(8189),ke=m(69808);class Ze{constructor(nt,q){this.id=nt,this.url=q}}class Di extends Ze{constructor(nt,q,Ot="imperative",zt=null){super(nt,q),this.navigationTrigger=Ot,this.restoredState=zt}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class $e extends Ze{constructor(nt,q,Ot){super(nt,q),this.urlAfterRedirects=Ot}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Le extends Ze{constructor(nt,q,Ot){super(nt,q),this.reason=Ot}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class pi extends Ze{constructor(nt,q,Ot){super(nt,q),this.error=Ot}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Gt extends Ze{constructor(nt,q,Ot,zt){super(nt,q),this.urlAfterRedirects=Ot,this.state=zt}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Se extends Ze{constructor(nt,q,Ot,zt){super(nt,q),this.urlAfterRedirects=Ot,this.state=zt}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zt extends Ze{constructor(nt,q,Ot,zt,_e){super(nt,q),this.urlAfterRedirects=Ot,this.state=zt,this.shouldActivate=_e}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ie extends Ze{constructor(nt,q,Ot,zt){super(nt,q),this.urlAfterRedirects=Ot,this.state=zt}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class St extends Ze{constructor(nt,q,Ot,zt){super(nt,q),this.urlAfterRedirects=Ot,this.state=zt}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jt{constructor(nt){this.route=nt}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ce{constructor(nt){this.route=nt}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ri{constructor(nt){this.snapshot=nt}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Te{constructor(nt){this.snapshot=nt}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class te{constructor(nt){this.snapshot=nt}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ne{constructor(nt){this.snapshot=nt}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Oe{constructor(nt,q,Ot){this.routerEvent=nt,this.position=q,this.anchor=Ot}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const re="primary";class me{constructor(nt){this.params=nt||{}}has(nt){return Object.prototype.hasOwnProperty.call(this.params,nt)}get(nt){if(this.has(nt)){const q=this.params[nt];return Array.isArray(q)?q[0]:q}return null}getAll(nt){if(this.has(nt)){const q=this.params[nt];return Array.isArray(q)?q:[q]}return[]}get keys(){return Object.keys(this.params)}}function ye(ft){return new me(ft)}const Qt="ngNavigationCancelingError";function de(ft){const nt=Error("NavigationCancelingError: "+ft);return nt[Qt]=!0,nt}function ni(ft,nt,q){const Ot=q.path.split("/");if(Ot.length>ft.length||"full"===q.pathMatch&&(nt.hasChildren()||Ot.length<ft.length))return null;const zt={};for(let _e=0;_e<Ot.length;_e++){const Ge=Ot[_e],ei=ft[_e];if(Ge.startsWith(":"))zt[Ge.substring(1)]=ei;else if(Ge!==ei.path)return null}return{consumed:ft.slice(0,Ot.length),posParams:zt}}function wi(ft,nt){const q=ft?Object.keys(ft):void 0,Ot=nt?Object.keys(nt):void 0;if(!q||!Ot||q.length!=Ot.length)return!1;let zt;for(let _e=0;_e<q.length;_e++)if(zt=q[_e],!yi(ft[zt],nt[zt]))return!1;return!0}function yi(ft,nt){if(Array.isArray(ft)&&Array.isArray(nt)){if(ft.length!==nt.length)return!1;const q=[...ft].sort(),Ot=[...nt].sort();return q.every((zt,_e)=>Ot[_e]===zt)}return ft===nt}function dn(ft){return Array.prototype.concat.apply([],ft)}function mi(ft){return ft.length>0?ft[ft.length-1]:null}function Re(ft,nt){for(const q in ft)ft.hasOwnProperty(q)&&nt(ft[q],q)}function xe(ft){return(0,T.CqO)(ft)?ft:(0,T.QGY)(ft)?(0,x.D)(Promise.resolve(ft)):(0,B.of)(ft)}const je={exact:function Je(ft,nt,q){if(!Sn(ft.segments,nt.segments)||!Lt(ft.segments,nt.segments,q)||ft.numberOfChildren!==nt.numberOfChildren)return!1;for(const Ot in nt.children)if(!ft.children[Ot]||!Je(ft.children[Ot],nt.children[Ot],q))return!1;return!0},subset:kt},Ii={exact:function(ft,nt){return wi(ft,nt)},subset:function(ft,nt){return Object.keys(nt).length<=Object.keys(ft).length&&Object.keys(nt).every(q=>yi(ft[q],nt[q]))},ignored:()=>!0};function _i(ft,nt,q){return je[q.paths](ft.root,nt.root,q.matrixParams)&&Ii[q.queryParams](ft.queryParams,nt.queryParams)&&!("exact"===q.fragment&&ft.fragment!==nt.fragment)}function kt(ft,nt,q){return ct(ft,nt,nt.segments,q)}function ct(ft,nt,q,Ot){if(ft.segments.length>q.length){const zt=ft.segments.slice(0,q.length);return!(!Sn(zt,q)||nt.hasChildren()||!Lt(zt,q,Ot))}if(ft.segments.length===q.length){if(!Sn(ft.segments,q)||!Lt(ft.segments,q,Ot))return!1;for(const zt in nt.children)if(!ft.children[zt]||!kt(ft.children[zt],nt.children[zt],Ot))return!1;return!0}{const zt=q.slice(0,ft.segments.length),_e=q.slice(ft.segments.length);return!!(Sn(ft.segments,zt)&&Lt(ft.segments,zt,Ot)&&ft.children[re])&&ct(ft.children[re],nt,_e,Ot)}}function Lt(ft,nt,q){return nt.every((Ot,zt)=>Ii[q](ft[zt].parameters,Ot.parameters))}class ce{constructor(nt,q,Ot){this.root=nt,this.queryParams=q,this.fragment=Ot}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ye(this.queryParams)),this._queryParamMap}toString(){return Pe.serialize(this)}}class Ne{constructor(nt,q){this.segments=nt,this.children=q,this.parent=null,Re(q,(Ot,zt)=>Ot.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return hi(this)}}class Wi{constructor(nt,q){this.path=nt,this.parameters=q}get parameterMap(){return this._parameterMap||(this._parameterMap=ye(this.parameters)),this._parameterMap}toString(){return fo(this)}}function Sn(ft,nt){return ft.length===nt.length&&ft.every((q,Ot)=>q.path===nt[Ot].path)}class ci{}class Ke{parse(nt){const q=new pr(nt);return new ce(q.parseRootSegment(),q.parseQueryParams(),q.parseFragment())}serialize(nt){const q=`/${xi(nt.root,!0)}`,Ot=function(ft){const nt=Object.keys(ft).map(q=>{const Ot=ft[q];return Array.isArray(Ot)?Ot.map(zt=>`${In(q)}=${In(zt)}`).join("&"):`${In(q)}=${In(Ot)}`}).filter(q=>!!q);return nt.length?`?${nt.join("&")}`:""}(nt.queryParams);var ft;return`${q}${Ot}${"string"==typeof nt.fragment?`#${ft=nt.fragment,encodeURI(ft)}`:""}`}}const Pe=new Ke;function hi(ft){return ft.segments.map(nt=>fo(nt)).join("/")}function xi(ft,nt){if(!ft.hasChildren())return hi(ft);if(nt){const q=ft.children[re]?xi(ft.children[re],!1):"",Ot=[];return Re(ft.children,(zt,_e)=>{_e!==re&&Ot.push(`${_e}:${xi(zt,!1)}`)}),Ot.length>0?`${q}(${Ot.join("//")})`:q}{const q=function(ft,nt){let q=[];return Re(ft.children,(Ot,zt)=>{zt===re&&(q=q.concat(nt(Ot,zt)))}),Re(ft.children,(Ot,zt)=>{zt!==re&&(q=q.concat(nt(Ot,zt)))}),q}(ft,(Ot,zt)=>zt===re?[xi(ft.children[re],!1)]:[`${zt}:${xi(Ot,!1)}`]);return 1===Object.keys(ft.children).length&&null!=ft.children[re]?`${hi(ft)}/${q[0]}`:`${hi(ft)}/(${q.join("//")})`}}function fn(ft){return encodeURIComponent(ft).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function In(ft){return fn(ft).replace(/%3B/gi,";")}function Cr(ft){return fn(ft).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function to(ft){return decodeURIComponent(ft)}function no(ft){return to(ft.replace(/\+/g,"%20"))}function fo(ft){return`${Cr(ft.path)}${function(ft){return Object.keys(ft).map(nt=>`;${Cr(nt)}=${Cr(ft[nt])}`).join("")}(ft.parameters)}`}const Oo=/^[^\/()?;=#]+/;function nr(ft){const nt=ft.match(Oo);return nt?nt[0]:""}const Mi=/^[^=?&#]+/,hr=/^[^&#]+/;class pr{constructor(nt){this.url=nt,this.remaining=nt}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ne([],{}):new Ne([],this.parseChildren())}parseQueryParams(){const nt={};if(this.consumeOptional("?"))do{this.parseQueryParam(nt)}while(this.consumeOptional("&"));return nt}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const nt=[];for(this.peekStartsWith("(")||nt.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),nt.push(this.parseSegment());let q={};this.peekStartsWith("/(")&&(this.capture("/"),q=this.parseParens(!0));let Ot={};return this.peekStartsWith("(")&&(Ot=this.parseParens(!1)),(nt.length>0||Object.keys(q).length>0)&&(Ot[re]=new Ne(nt,q)),Ot}parseSegment(){const nt=nr(this.remaining);if(""===nt&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(nt),new Wi(to(nt),this.parseMatrixParams())}parseMatrixParams(){const nt={};for(;this.consumeOptional(";");)this.parseParam(nt);return nt}parseParam(nt){const q=nr(this.remaining);if(!q)return;this.capture(q);let Ot="";if(this.consumeOptional("=")){const zt=nr(this.remaining);zt&&(Ot=zt,this.capture(Ot))}nt[to(q)]=to(Ot)}parseQueryParam(nt){const q=function(ft){const nt=ft.match(Mi);return nt?nt[0]:""}(this.remaining);if(!q)return;this.capture(q);let Ot="";if(this.consumeOptional("=")){const Ge=function(ft){const nt=ft.match(hr);return nt?nt[0]:""}(this.remaining);Ge&&(Ot=Ge,this.capture(Ot))}const zt=no(q),_e=no(Ot);if(nt.hasOwnProperty(zt)){let Ge=nt[zt];Array.isArray(Ge)||(Ge=[Ge],nt[zt]=Ge),Ge.push(_e)}else nt[zt]=_e}parseParens(nt){const q={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const Ot=nr(this.remaining),zt=this.remaining[Ot.length];if("/"!==zt&&")"!==zt&&";"!==zt)throw new Error(`Cannot parse url '${this.url}'`);let _e;Ot.indexOf(":")>-1?(_e=Ot.substr(0,Ot.indexOf(":")),this.capture(_e),this.capture(":")):nt&&(_e=re);const Ge=this.parseChildren();q[_e]=1===Object.keys(Ge).length?Ge[re]:new Ne([],Ge),this.consumeOptional("//")}return q}peekStartsWith(nt){return this.remaining.startsWith(nt)}consumeOptional(nt){return!!this.peekStartsWith(nt)&&(this.remaining=this.remaining.substring(nt.length),!0)}capture(nt){if(!this.consumeOptional(nt))throw new Error(`Expected "${nt}".`)}}class Sr{constructor(nt){this._root=nt}get root(){return this._root.value}parent(nt){const q=this.pathFromRoot(nt);return q.length>1?q[q.length-2]:null}children(nt){const q=Zr(nt,this._root);return q?q.children.map(Ot=>Ot.value):[]}firstChild(nt){const q=Zr(nt,this._root);return q&&q.children.length>0?q.children[0].value:null}siblings(nt){const q=Rr(nt,this._root);return q.length<2?[]:q[q.length-2].children.map(zt=>zt.value).filter(zt=>zt!==nt)}pathFromRoot(nt){return Rr(nt,this._root).map(q=>q.value)}}function Zr(ft,nt){if(ft===nt.value)return nt;for(const q of nt.children){const Ot=Zr(ft,q);if(Ot)return Ot}return null}function Rr(ft,nt){if(ft===nt.value)return[nt];for(const q of nt.children){const Ot=Rr(ft,q);if(Ot.length)return Ot.unshift(nt),Ot}return[]}class Vi{constructor(nt,q){this.value=nt,this.children=q}toString(){return`TreeNode(${this.value})`}}function On(ft){const nt={};return ft&&ft.children.forEach(q=>nt[q.value.outlet]=q),nt}class Gn extends Sr{constructor(nt,q){super(nt),this.snapshot=q,Yn(this,nt)}toString(){return this.snapshot.toString()}}function ae(ft,nt){const q=function(ft,nt){const Ge=new sr([],{},{},"",{},re,nt,null,ft.root,-1,{});return new zn("",new Vi(Ge,[]))}(ft,nt),Ot=new Z.X([new Wi("",{})]),zt=new Z.X({}),_e=new Z.X({}),Ge=new Z.X({}),ei=new Z.X(""),ki=new Oi(Ot,zt,Ge,ei,_e,re,nt,q.root);return ki.snapshot=q.root,new Gn(new Vi(ki,[]),q)}class Oi{constructor(nt,q,Ot,zt,_e,Ge,ei,ki){this.url=nt,this.params=q,this.queryParams=Ot,this.fragment=zt,this.data=_e,this.outlet=Ge,this.component=ei,this._futureSnapshot=ki}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ut.U)(nt=>ye(nt)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ut.U)(nt=>ye(nt)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ji(ft,nt="emptyOnly"){const q=ft.pathFromRoot;let Ot=0;if("always"!==nt)for(Ot=q.length-1;Ot>=1;){const zt=q[Ot],_e=q[Ot-1];if(zt.routeConfig&&""===zt.routeConfig.path)Ot--;else{if(_e.component)break;Ot--}}return function(ft){return ft.reduce((nt,q)=>({params:Object.assign(Object.assign({},nt.params),q.params),data:Object.assign(Object.assign({},nt.data),q.data),resolve:Object.assign(Object.assign({},nt.resolve),q._resolvedData)}),{params:{},data:{},resolve:{}})}(q.slice(Ot))}class sr{constructor(nt,q,Ot,zt,_e,Ge,ei,ki,_n,mr,Wn){this.url=nt,this.params=q,this.queryParams=Ot,this.fragment=zt,this.data=_e,this.outlet=Ge,this.component=ei,this.routeConfig=ki,this._urlSegment=_n,this._lastPathIndex=mr,this._resolve=Wn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ye(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ye(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(Ot=>Ot.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class zn extends Sr{constructor(nt,q){super(q),this.url=nt,Yn(this,q)}toString(){return kn(this._root)}}function Yn(ft,nt){nt.value._routerState=ft,nt.children.forEach(q=>Yn(ft,q))}function kn(ft){const nt=ft.children.length>0?` { ${ft.children.map(kn).join(", ")} } `:"";return`${ft.value}${nt}`}function xo(ft){if(ft.snapshot){const nt=ft.snapshot,q=ft._futureSnapshot;ft.snapshot=q,wi(nt.queryParams,q.queryParams)||ft.queryParams.next(q.queryParams),nt.fragment!==q.fragment&&ft.fragment.next(q.fragment),wi(nt.params,q.params)||ft.params.next(q.params),function(ft,nt){if(ft.length!==nt.length)return!1;for(let q=0;q<ft.length;++q)if(!wi(ft[q],nt[q]))return!1;return!0}(nt.url,q.url)||ft.url.next(q.url),wi(nt.data,q.data)||ft.data.next(q.data)}else ft.snapshot=ft._futureSnapshot,ft.data.next(ft._futureSnapshot.data)}function $o(ft,nt){const q=wi(ft.params,nt.params)&&function(ft,nt){return Sn(ft,nt)&&ft.every((q,Ot)=>wi(q.parameters,nt[Ot].parameters))}(ft.url,nt.url);return q&&!(!ft.parent!=!nt.parent)&&(!ft.parent||$o(ft.parent,nt.parent))}function go(ft,nt,q){if(q&&ft.shouldReuseRoute(nt.value,q.value.snapshot)){const Ot=q.value;Ot._futureSnapshot=nt.value;const zt=function(ft,nt,q){return nt.children.map(Ot=>{for(const zt of q.children)if(ft.shouldReuseRoute(Ot.value,zt.value.snapshot))return go(ft,Ot,zt);return go(ft,Ot)})}(ft,nt,q);return new Vi(Ot,zt)}{if(ft.shouldAttach(nt.value)){const _e=ft.retrieve(nt.value);if(null!==_e){const Ge=_e.route;return Ge.value._futureSnapshot=nt.value,Ge.children=nt.children.map(ei=>go(ft,ei)),Ge}}const Ot=function(ft){return new Oi(new Z.X(ft.url),new Z.X(ft.params),new Z.X(ft.queryParams),new Z.X(ft.fragment),new Z.X(ft.data),ft.outlet,ft.component,ft)}(nt.value),zt=nt.children.map(_e=>go(ft,_e));return new Vi(Ot,zt)}}function eo(ft){return"object"==typeof ft&&null!=ft&&!ft.outlets&&!ft.segmentPath}function ks(ft){return"object"==typeof ft&&null!=ft&&ft.outlets}function Ls(ft,nt,q,Ot,zt){let _e={};return Ot&&Re(Ot,(Ge,ei)=>{_e[ei]=Array.isArray(Ge)?Ge.map(ki=>`${ki}`):`${Ge}`}),new ce(q.root===ft?nt:Fo(q.root,ft,nt),_e,zt)}function Fo(ft,nt,q){const Ot={};return Re(ft.children,(zt,_e)=>{Ot[_e]=zt===nt?q:Fo(zt,nt,q)}),new Ne(ft.segments,Ot)}class Do{constructor(nt,q,Ot){if(this.isAbsolute=nt,this.numberOfDoubleDots=q,this.commands=Ot,nt&&Ot.length>0&&eo(Ot[0]))throw new Error("Root segment cannot have matrix parameters");const zt=Ot.find(ks);if(zt&&zt!==mi(Ot))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Io{constructor(nt,q,Ot){this.segmentGroup=nt,this.processChildren=q,this.index=Ot}}function Zo(ft,nt,q){if(ft||(ft=new Ne([],{})),0===ft.segments.length&&ft.hasChildren())return sa(ft,nt,q);const Ot=function(ft,nt,q){let Ot=0,zt=nt;const _e={match:!1,pathIndex:0,commandIndex:0};for(;zt<ft.segments.length;){if(Ot>=q.length)return _e;const Ge=ft.segments[zt],ei=q[Ot];if(ks(ei))break;const ki=`${ei}`,_n=Ot<q.length-1?q[Ot+1]:null;if(zt>0&&void 0===ki)break;if(ki&&_n&&"object"==typeof _n&&void 0===_n.outlets){if(!Cs(ki,_n,Ge))return _e;Ot+=2}else{if(!Cs(ki,{},Ge))return _e;Ot++}zt++}return{match:!0,pathIndex:zt,commandIndex:Ot}}(ft,nt,q),zt=q.slice(Ot.commandIndex);if(Ot.match&&Ot.pathIndex<ft.segments.length){const _e=new Ne(ft.segments.slice(0,Ot.pathIndex),{});return _e.children[re]=new Ne(ft.segments.slice(Ot.pathIndex),ft.children),sa(_e,0,zt)}return Ot.match&&0===zt.length?new Ne(ft.segments,{}):Ot.match&&!ft.hasChildren()?aa(ft,nt,q):Ot.match?sa(ft,0,zt):aa(ft,nt,q)}function sa(ft,nt,q){if(0===q.length)return new Ne(ft.segments,{});{const Ot=function(ft){return ks(ft[0])?ft[0].outlets:{[re]:ft}}(q),zt={};return Re(Ot,(_e,Ge)=>{"string"==typeof _e&&(_e=[_e]),null!==_e&&(zt[Ge]=Zo(ft.children[Ge],nt,_e))}),Re(ft.children,(_e,Ge)=>{void 0===Ot[Ge]&&(zt[Ge]=_e)}),new Ne(ft.segments,zt)}}function aa(ft,nt,q){const Ot=ft.segments.slice(0,nt);let zt=0;for(;zt<q.length;){const _e=q[zt];if(ks(_e)){const ki=Ja(_e.outlets);return new Ne(Ot,ki)}if(0===zt&&eo(q[0])){Ot.push(new Wi(ft.segments[nt].path,Ks(q[0]))),zt++;continue}const Ge=ks(_e)?_e.outlets[re]:`${_e}`,ei=zt<q.length-1?q[zt+1]:null;Ge&&ei&&eo(ei)?(Ot.push(new Wi(Ge,Ks(ei))),zt+=2):(Ot.push(new Wi(Ge,{})),zt++)}return new Ne(Ot,{})}function Ja(ft){const nt={};return Re(ft,(q,Ot)=>{"string"==typeof q&&(q=[q]),null!==q&&(nt[Ot]=aa(new Ne([],{}),0,q))}),nt}function Ks(ft){const nt={};return Re(ft,(q,Ot)=>nt[Ot]=`${q}`),nt}function Cs(ft,nt,q){return ft==q.path&&wi(nt,q.parameters)}class Sa{constructor(nt,q,Ot,zt){this.routeReuseStrategy=nt,this.futureState=q,this.currState=Ot,this.forwardEvent=zt}activate(nt){const q=this.futureState._root,Ot=this.currState?this.currState._root:null;this.deactivateChildRoutes(q,Ot,nt),xo(this.futureState.root),this.activateChildRoutes(q,Ot,nt)}deactivateChildRoutes(nt,q,Ot){const zt=On(q);nt.children.forEach(_e=>{const Ge=_e.value.outlet;this.deactivateRoutes(_e,zt[Ge],Ot),delete zt[Ge]}),Re(zt,(_e,Ge)=>{this.deactivateRouteAndItsChildren(_e,Ot)})}deactivateRoutes(nt,q,Ot){const zt=nt.value,_e=q?q.value:null;if(zt===_e)if(zt.component){const Ge=Ot.getContext(zt.outlet);Ge&&this.deactivateChildRoutes(nt,q,Ge.children)}else this.deactivateChildRoutes(nt,q,Ot);else _e&&this.deactivateRouteAndItsChildren(q,Ot)}deactivateRouteAndItsChildren(nt,q){nt.value.component&&this.routeReuseStrategy.shouldDetach(nt.value.snapshot)?this.detachAndStoreRouteSubtree(nt,q):this.deactivateRouteAndOutlet(nt,q)}detachAndStoreRouteSubtree(nt,q){const Ot=q.getContext(nt.value.outlet),zt=Ot&&nt.value.component?Ot.children:q,_e=On(nt);for(const Ge of Object.keys(_e))this.deactivateRouteAndItsChildren(_e[Ge],zt);if(Ot&&Ot.outlet){const Ge=Ot.outlet.detach(),ei=Ot.children.onOutletDeactivated();this.routeReuseStrategy.store(nt.value.snapshot,{componentRef:Ge,route:nt,contexts:ei})}}deactivateRouteAndOutlet(nt,q){const Ot=q.getContext(nt.value.outlet),zt=Ot&&nt.value.component?Ot.children:q,_e=On(nt);for(const Ge of Object.keys(_e))this.deactivateRouteAndItsChildren(_e[Ge],zt);Ot&&Ot.outlet&&(Ot.outlet.deactivate(),Ot.children.onOutletDeactivated(),Ot.attachRef=null,Ot.resolver=null,Ot.route=null)}activateChildRoutes(nt,q,Ot){const zt=On(q);nt.children.forEach(_e=>{this.activateRoutes(_e,zt[_e.value.outlet],Ot),this.forwardEvent(new ne(_e.value.snapshot))}),nt.children.length&&this.forwardEvent(new Te(nt.value.snapshot))}activateRoutes(nt,q,Ot){const zt=nt.value,_e=q?q.value:null;if(xo(zt),zt===_e)if(zt.component){const Ge=Ot.getOrCreateContext(zt.outlet);this.activateChildRoutes(nt,q,Ge.children)}else this.activateChildRoutes(nt,q,Ot);else if(zt.component){const Ge=Ot.getOrCreateContext(zt.outlet);if(this.routeReuseStrategy.shouldAttach(zt.snapshot)){const ei=this.routeReuseStrategy.retrieve(zt.snapshot);this.routeReuseStrategy.store(zt.snapshot,null),Ge.children.onOutletReAttached(ei.contexts),Ge.attachRef=ei.componentRef,Ge.route=ei.route.value,Ge.outlet&&Ge.outlet.attach(ei.componentRef,ei.route.value),xo(ei.route.value),this.activateChildRoutes(nt,null,Ge.children)}else{const ei=function(ft){for(let nt=ft.parent;nt;nt=nt.parent){const q=nt.routeConfig;if(q&&q._loadedConfig)return q._loadedConfig;if(q&&q.component)return null}return null}(zt.snapshot),ki=ei?ei.module.componentFactoryResolver:null;Ge.attachRef=null,Ge.route=zt,Ge.resolver=ki,Ge.outlet&&Ge.outlet.activateWith(zt,ki),this.activateChildRoutes(nt,null,Ge.children)}}else this.activateChildRoutes(nt,null,Ot)}}class ko{constructor(nt,q){this.routes=nt,this.module=q}}function jr(ft){return"function"==typeof ft}function To(ft){return ft instanceof ce}const Lo=Symbol("INITIAL_VALUE");function es(){return(0,rt.w)(ft=>(0,ot.a)(ft.map(nt=>nt.pipe((0,Dt.q)(1),(0,fe.O)(Lo)))).pipe(Ht((nt,q)=>{let Ot=!1;return q.reduce((zt,_e,Ge)=>zt!==Lo?zt:(_e===Lo&&(Ot=!0),Ot||!1!==_e&&Ge!==q.length-1&&!To(_e)?zt:_e),nt)},Lo),(0,Jt.h)(nt=>nt!==Lo),(0,ut.U)(nt=>To(nt)?nt:!0===nt),(0,Dt.q)(1)))}class ws{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new ao,this.attachRef=null}}class ao{constructor(){this.contexts=new Map}onChildOutletCreated(nt,q){const Ot=this.getOrCreateContext(nt);Ot.outlet=q,this.contexts.set(nt,Ot)}onChildOutletDestroyed(nt){const q=this.getContext(nt);q&&(q.outlet=null,q.attachRef=null)}onOutletDeactivated(){const nt=this.contexts;return this.contexts=new Map,nt}onOutletReAttached(nt){this.contexts=nt}getOrCreateContext(nt){let q=this.getContext(nt);return q||(q=new ws,this.contexts.set(nt,q)),q}getContext(nt){return this.contexts.get(nt)||null}}let fs=(()=>{class ft{constructor(q,Ot,zt,_e,Ge){this.parentContexts=q,this.location=Ot,this.resolver=zt,this.changeDetector=Ge,this.activated=null,this._activatedRoute=null,this.activateEvents=new T.vpe,this.deactivateEvents=new T.vpe,this.attachEvents=new T.vpe,this.detachEvents=new T.vpe,this.name=_e||re,q.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const q=this.parentContexts.getContext(this.name);q&&q.route&&(q.attachRef?this.attach(q.attachRef,q.route):this.activateWith(q.route,q.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const q=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(q.instance),q}attach(q,Ot){this.activated=q,this._activatedRoute=Ot,this.location.insert(q.hostView),this.attachEvents.emit(q.instance)}deactivate(){if(this.activated){const q=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(q)}}activateWith(q,Ot){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=q;const Ge=(Ot=Ot||this.resolver).resolveComponentFactory(q._futureSnapshot.routeConfig.component),ei=this.parentContexts.getOrCreateContext(this.name).children,ki=new Lr(q,ei,this.location.injector);this.activated=this.location.createComponent(Ge,this.location.length,ki),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return ft.\u0275fac=function(q){return new(q||ft)(T.Y36(ao),T.Y36(T.s_b),T.Y36(T._Vd),T.$8M("name"),T.Y36(T.sBO))},ft.\u0275dir=T.lG2({type:ft,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),ft})();class Lr{constructor(nt,q,Ot){this.route=nt,this.childContexts=q,this.parent=Ot}get(nt,q){return nt===Oi?this.route:nt===ao?this.childContexts:this.parent.get(nt,q)}}let Js=(()=>{class ft{}return ft.\u0275fac=function(q){return new(q||ft)},ft.\u0275cmp=T.Xpm({type:ft,selectors:[["ng-component"]],decls:1,vars:0,template:function(q,Ot){1&q&&T._UZ(0,"router-outlet")},directives:[fs],encapsulation:2}),ft})();function Ar(ft,nt=""){for(let q=0;q<ft.length;q++){const Ot=ft[q];$s(Ot,ol(nt,Ot))}}function $s(ft,nt){ft.children&&Ar(ft.children,nt)}function ol(ft,nt){return nt?ft||nt.path?ft&&!nt.path?`${ft}/`:!ft&&nt.path?nt.path:`${ft}/${nt.path}`:"":ft}function is(ft){const nt=ft.children&&ft.children.map(is),q=nt?Object.assign(Object.assign({},ft),{children:nt}):Object.assign({},ft);return!q.component&&(nt||q.loadChildren)&&q.outlet&&q.outlet!==re&&(q.component=Js),q}function Ho(ft){return ft.outlet||re}function cs(ft,nt){const q=ft.filter(Ot=>Ho(Ot)===nt);return q.push(...ft.filter(Ot=>Ho(Ot)!==nt)),q}const Cl={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Nr(ft,nt,q){var Ot;if(""===nt.path)return"full"===nt.pathMatch&&(ft.hasChildren()||q.length>0)?Object.assign({},Cl):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const _e=(nt.matcher||ni)(q,ft,nt);if(!_e)return Object.assign({},Cl);const Ge={};Re(_e.posParams,(ki,_n)=>{Ge[_n]=ki.path});const ei=_e.consumed.length>0?Object.assign(Object.assign({},Ge),_e.consumed[_e.consumed.length-1].parameters):Ge;return{matched:!0,consumedSegments:_e.consumed,lastChild:_e.consumed.length,parameters:ei,positionalParamSegments:null!==(Ot=_e.posParams)&&void 0!==Ot?Ot:{}}}function Ln(ft,nt,q,Ot,zt="corrected"){if(q.length>0&&function(ft,nt,q){return q.some(Ot=>W(ft,nt,Ot)&&Ho(Ot)!==re)}(ft,q,Ot)){const Ge=new Ne(nt,function(ft,nt,q,Ot){const zt={};zt[re]=Ot,Ot._sourceSegment=ft,Ot._segmentIndexShift=nt.length;for(const _e of q)if(""===_e.path&&Ho(_e)!==re){const Ge=new Ne([],{});Ge._sourceSegment=ft,Ge._segmentIndexShift=nt.length,zt[Ho(_e)]=Ge}return zt}(ft,nt,Ot,new Ne(q,ft.children)));return Ge._sourceSegment=ft,Ge._segmentIndexShift=nt.length,{segmentGroup:Ge,slicedSegments:[]}}if(0===q.length&&function(ft,nt,q){return q.some(Ot=>W(ft,nt,Ot))}(ft,q,Ot)){const Ge=new Ne(ft.segments,function(ft,nt,q,Ot,zt,_e){const Ge={};for(const ei of Ot)if(W(ft,q,ei)&&!zt[Ho(ei)]){const ki=new Ne([],{});ki._sourceSegment=ft,ki._segmentIndexShift="legacy"===_e?ft.segments.length:nt.length,Ge[Ho(ei)]=ki}return Object.assign(Object.assign({},zt),Ge)}(ft,nt,q,Ot,ft.children,zt));return Ge._sourceSegment=ft,Ge._segmentIndexShift=nt.length,{segmentGroup:Ge,slicedSegments:q}}const _e=new Ne(ft.segments,ft.children);return _e._sourceSegment=ft,_e._segmentIndexShift=nt.length,{segmentGroup:_e,slicedSegments:q}}function W(ft,nt,q){return(!(ft.hasChildren()||nt.length>0)||"full"!==q.pathMatch)&&""===q.path}function At(ft,nt,q,Ot){return!!(Ho(ft)===Ot||Ot!==re&&W(nt,q,ft))&&("**"===ft.path||Nr(nt,ft,q).matched)}function Be(ft,nt,q){return 0===nt.length&&!ft.children[q]}class vi{constructor(nt){this.segmentGroup=nt||null}}class ln{constructor(nt){this.urlTree=nt}}function Xn(ft){return new t.y(nt=>nt.error(new vi(ft)))}function yr(ft){return new t.y(nt=>nt.error(new ln(ft)))}function Or(ft){return new t.y(nt=>nt.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${ft}'`)))}class cr{constructor(nt,q,Ot,zt,_e){this.configLoader=q,this.urlSerializer=Ot,this.urlTree=zt,this.config=_e,this.allowRedirects=!0,this.ngModule=nt.get(T.h0i)}apply(){const nt=Ln(this.urlTree.root,[],[],this.config).segmentGroup,q=new Ne(nt.segments,nt.children);return this.expandSegmentGroup(this.ngModule,this.config,q,re).pipe((0,ut.U)(_e=>this.createUrlTree(Hn(_e),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,Mt.K)(_e=>{if(_e instanceof ln)return this.allowRedirects=!1,this.match(_e.urlTree);throw _e instanceof vi?this.noMatchError(_e):_e}))}match(nt){return this.expandSegmentGroup(this.ngModule,this.config,nt.root,re).pipe((0,ut.U)(zt=>this.createUrlTree(Hn(zt),nt.queryParams,nt.fragment))).pipe((0,Mt.K)(zt=>{throw zt instanceof vi?this.noMatchError(zt):zt}))}noMatchError(nt){return new Error(`Cannot match any routes. URL Segment: '${nt.segmentGroup}'`)}createUrlTree(nt,q,Ot){const zt=nt.segments.length>0?new Ne([],{[re]:nt}):nt;return new ce(zt,q,Ot)}expandSegmentGroup(nt,q,Ot,zt){return 0===Ot.segments.length&&Ot.hasChildren()?this.expandChildren(nt,q,Ot).pipe((0,ut.U)(_e=>new Ne([],_e))):this.expandSegment(nt,Ot,q,Ot.segments,zt,!0)}expandChildren(nt,q,Ot){const zt=[];for(const _e of Object.keys(Ot.children))"primary"===_e?zt.unshift(_e):zt.push(_e);return(0,x.D)(zt).pipe((0,Nt.b)(_e=>{const Ge=Ot.children[_e],ei=cs(q,_e);return this.expandSegmentGroup(nt,ei,Ge,_e).pipe((0,ut.U)(ki=>({segment:ki,outlet:_e})))}),Ht((_e,Ge)=>(_e[Ge.outlet]=Ge.segment,_e),{}),function(ft,nt){const q=arguments.length>=2;return Ot=>Ot.pipe(ft?(0,Jt.h)((zt,_e)=>ft(zt,_e,Ot)):lt.y,Ct(1),q?gt(nt):bt(()=>new e))}())}expandSegment(nt,q,Ot,zt,_e,Ge){return(0,x.D)(Ot).pipe((0,Nt.b)(ei=>this.expandSegmentAgainstRoute(nt,q,Ot,ei,zt,_e,Ge).pipe((0,Mt.K)(_n=>{if(_n instanceof vi)return(0,B.of)(null);throw _n}))),Et(ei=>!!ei),(0,Mt.K)((ei,ki)=>{if(ei instanceof e||"EmptyError"===ei.name){if(Be(q,zt,_e))return(0,B.of)(new Ne([],{}));throw new vi(q)}throw ei}))}expandSegmentAgainstRoute(nt,q,Ot,zt,_e,Ge,ei){return At(zt,q,_e,Ge)?void 0===zt.redirectTo?this.matchSegmentAgainstRoute(nt,q,zt,_e,Ge):ei&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(nt,q,Ot,zt,_e,Ge):Xn(q):Xn(q)}expandSegmentAgainstRouteUsingRedirect(nt,q,Ot,zt,_e,Ge){return"**"===zt.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(nt,Ot,zt,Ge):this.expandRegularSegmentAgainstRouteUsingRedirect(nt,q,Ot,zt,_e,Ge)}expandWildCardWithParamsAgainstRouteUsingRedirect(nt,q,Ot,zt){const _e=this.applyRedirectCommands([],Ot.redirectTo,{});return Ot.redirectTo.startsWith("/")?yr(_e):this.lineralizeSegments(Ot,_e).pipe((0,ge.z)(Ge=>{const ei=new Ne(Ge,{});return this.expandSegment(nt,ei,q,Ge,zt,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(nt,q,Ot,zt,_e,Ge){const{matched:ei,consumedSegments:ki,lastChild:_n,positionalParamSegments:mr}=Nr(q,zt,_e);if(!ei)return Xn(q);const Wn=this.applyRedirectCommands(ki,zt.redirectTo,mr);return zt.redirectTo.startsWith("/")?yr(Wn):this.lineralizeSegments(zt,Wn).pipe((0,ge.z)(Ur=>this.expandSegment(nt,q,Ot,Ur.concat(_e.slice(_n)),Ge,!1)))}matchSegmentAgainstRoute(nt,q,Ot,zt,_e){if("**"===Ot.path)return Ot.loadChildren?(Ot._loadedConfig?(0,B.of)(Ot._loadedConfig):this.configLoader.load(nt.injector,Ot)).pipe((0,ut.U)(Ur=>(Ot._loadedConfig=Ur,new Ne(zt,{})))):(0,B.of)(new Ne(zt,{}));const{matched:Ge,consumedSegments:ei,lastChild:ki}=Nr(q,Ot,zt);if(!Ge)return Xn(q);const _n=zt.slice(ki);return this.getChildConfig(nt,Ot,zt).pipe((0,ge.z)(Wn=>{const Ur=Wn.module,lo=Wn.routes,{segmentGroup:cl,slicedSegments:Vs}=Ln(q,ei,_n,lo),ha=new Ne(cl.segments,cl.children);if(0===Vs.length&&ha.hasChildren())return this.expandChildren(Ur,lo,ha).pipe((0,ut.U)(Da=>new Ne(ei,Da)));if(0===lo.length&&0===Vs.length)return(0,B.of)(new Ne(ei,{}));const Go=Ho(Ot)===_e;return this.expandSegment(Ur,ha,lo,Vs,Go?re:_e,!0).pipe((0,ut.U)(Gs=>new Ne(ei.concat(Gs.segments),Gs.children)))}))}getChildConfig(nt,q,Ot){return q.children?(0,B.of)(new ko(q.children,nt)):q.loadChildren?void 0!==q._loadedConfig?(0,B.of)(q._loadedConfig):this.runCanLoadGuards(nt.injector,q,Ot).pipe((0,ge.z)(zt=>{return zt?this.configLoader.load(nt.injector,q).pipe((0,ut.U)(_e=>(q._loadedConfig=_e,_e))):(ft=q,new t.y(nt=>nt.error(de(`Cannot load children because the guard of the route "path: '${ft.path}'" returned false`))));var ft})):(0,B.of)(new ko([],nt))}runCanLoadGuards(nt,q,Ot){const zt=q.canLoad;if(!zt||0===zt.length)return(0,B.of)(!0);const _e=zt.map(Ge=>{const ei=nt.get(Ge);let ki;if((ft=ei)&&jr(ft.canLoad))ki=ei.canLoad(q,Ot);else{if(!jr(ei))throw new Error("Invalid CanLoad guard");ki=ei(q,Ot)}var ft;return xe(ki)});return(0,B.of)(_e).pipe(es(),(0,ve.b)(Ge=>{if(!To(Ge))return;const ei=de(`Redirecting to "${this.urlSerializer.serialize(Ge)}"`);throw ei.url=Ge,ei}),(0,ut.U)(Ge=>!0===Ge))}lineralizeSegments(nt,q){let Ot=[],zt=q.root;for(;;){if(Ot=Ot.concat(zt.segments),0===zt.numberOfChildren)return(0,B.of)(Ot);if(zt.numberOfChildren>1||!zt.children[re])return Or(nt.redirectTo);zt=zt.children[re]}}applyRedirectCommands(nt,q,Ot){return this.applyRedirectCreatreUrlTree(q,this.urlSerializer.parse(q),nt,Ot)}applyRedirectCreatreUrlTree(nt,q,Ot,zt){const _e=this.createSegmentGroup(nt,q.root,Ot,zt);return new ce(_e,this.createQueryParams(q.queryParams,this.urlTree.queryParams),q.fragment)}createQueryParams(nt,q){const Ot={};return Re(nt,(zt,_e)=>{if("string"==typeof zt&&zt.startsWith(":")){const ei=zt.substring(1);Ot[_e]=q[ei]}else Ot[_e]=zt}),Ot}createSegmentGroup(nt,q,Ot,zt){const _e=this.createSegments(nt,q.segments,Ot,zt);let Ge={};return Re(q.children,(ei,ki)=>{Ge[ki]=this.createSegmentGroup(nt,ei,Ot,zt)}),new Ne(_e,Ge)}createSegments(nt,q,Ot,zt){return q.map(_e=>_e.path.startsWith(":")?this.findPosParam(nt,_e,zt):this.findOrReturn(_e,Ot))}findPosParam(nt,q,Ot){const zt=Ot[q.path.substring(1)];if(!zt)throw new Error(`Cannot redirect to '${nt}'. Cannot find '${q.path}'.`);return zt}findOrReturn(nt,q){let Ot=0;for(const zt of q){if(zt.path===nt.path)return q.splice(Ot),zt;Ot++}return nt}}function Hn(ft){const nt={};for(const Ot of Object.keys(ft.children)){const _e=Hn(ft.children[Ot]);(_e.segments.length>0||_e.hasChildren())&&(nt[Ot]=_e)}return function(ft){if(1===ft.numberOfChildren&&ft.children[re]){const nt=ft.children[re];return new Ne(ft.segments.concat(nt.segments),nt.children)}return ft}(new Ne(ft.segments,nt))}class wa{constructor(nt){this.path=nt,this.route=this.path[this.path.length-1]}}class Uo{constructor(nt,q){this.component=nt,this.route=q}}function $a(ft,nt,q){const Ot=ft._root;return Wt(Ot,nt?nt._root:null,q,[Ot.value])}function Ps(ft,nt,q){const Ot=function(ft){if(!ft)return null;for(let nt=ft.parent;nt;nt=nt.parent){const q=nt.routeConfig;if(q&&q._loadedConfig)return q._loadedConfig}return null}(nt);return(Ot?Ot.module.injector:q).get(ft)}function Wt(ft,nt,q,Ot,zt={canDeactivateChecks:[],canActivateChecks:[]}){const _e=On(nt);return ft.children.forEach(Ge=>{(function(ft,nt,q,Ot,zt={canDeactivateChecks:[],canActivateChecks:[]}){const _e=ft.value,Ge=nt?nt.value:null,ei=q?q.getContext(ft.value.outlet):null;if(Ge&&_e.routeConfig===Ge.routeConfig){const ki=function(ft,nt,q){if("function"==typeof q)return q(ft,nt);switch(q){case"pathParamsChange":return!Sn(ft.url,nt.url);case"pathParamsOrQueryParamsChange":return!Sn(ft.url,nt.url)||!wi(ft.queryParams,nt.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!$o(ft,nt)||!wi(ft.queryParams,nt.queryParams);default:return!$o(ft,nt)}}(Ge,_e,_e.routeConfig.runGuardsAndResolvers);ki?zt.canActivateChecks.push(new wa(Ot)):(_e.data=Ge.data,_e._resolvedData=Ge._resolvedData),Wt(ft,nt,_e.component?ei?ei.children:null:q,Ot,zt),ki&&ei&&ei.outlet&&ei.outlet.isActivated&&zt.canDeactivateChecks.push(new Uo(ei.outlet.component,Ge))}else Ge&&_t(nt,ei,zt),zt.canActivateChecks.push(new wa(Ot)),Wt(ft,null,_e.component?ei?ei.children:null:q,Ot,zt)})(Ge,_e[Ge.value.outlet],q,Ot.concat([Ge.value]),zt),delete _e[Ge.value.outlet]}),Re(_e,(Ge,ei)=>_t(Ge,q.getContext(ei),zt)),zt}function _t(ft,nt,q){const Ot=On(ft),zt=ft.value;Re(Ot,(_e,Ge)=>{_t(_e,zt.component?nt?nt.children.getContext(Ge):null:nt,q)}),q.canDeactivateChecks.push(new Uo(zt.component&&nt&&nt.outlet&&nt.outlet.isActivated?nt.outlet.component:null,zt))}class Zn{}function Qn(ft){return new t.y(nt=>nt.error(ft))}class tr{constructor(nt,q,Ot,zt,_e,Ge){this.rootComponentType=nt,this.config=q,this.urlTree=Ot,this.url=zt,this.paramsInheritanceStrategy=_e,this.relativeLinkResolution=Ge}recognize(){const nt=Ln(this.urlTree.root,[],[],this.config.filter(Ge=>void 0===Ge.redirectTo),this.relativeLinkResolution).segmentGroup,q=this.processSegmentGroup(this.config,nt,re);if(null===q)return null;const Ot=new sr([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},re,this.rootComponentType,null,this.urlTree.root,-1,{}),zt=new Vi(Ot,q),_e=new zn(this.url,zt);return this.inheritParamsAndData(_e._root),_e}inheritParamsAndData(nt){const q=nt.value,Ot=Ji(q,this.paramsInheritanceStrategy);q.params=Object.freeze(Ot.params),q.data=Object.freeze(Ot.data),nt.children.forEach(zt=>this.inheritParamsAndData(zt))}processSegmentGroup(nt,q,Ot){return 0===q.segments.length&&q.hasChildren()?this.processChildren(nt,q):this.processSegment(nt,q,q.segments,Ot)}processChildren(nt,q){const Ot=[];for(const _e of Object.keys(q.children)){const Ge=q.children[_e],ei=cs(nt,_e),ki=this.processSegmentGroup(ei,Ge,_e);if(null===ki)return null;Ot.push(...ki)}const zt=ro(Ot);return zt.sort((nt,q)=>nt.value.outlet===re?-1:q.value.outlet===re?1:nt.value.outlet.localeCompare(q.value.outlet)),zt}processSegment(nt,q,Ot,zt){for(const _e of nt){const Ge=this.processSegmentAgainstRoute(_e,q,Ot,zt);if(null!==Ge)return Ge}return Be(q,Ot,zt)?[]:null}processSegmentAgainstRoute(nt,q,Ot,zt){if(nt.redirectTo||!At(nt,q,Ot,zt))return null;let _e,Ge=[],ei=[];if("**"===nt.path){const lo=Ot.length>0?mi(Ot).parameters:{};_e=new sr(Ot,lo,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Mo(nt),Ho(nt),nt.component,nt,La(q),Fs(q)+Ot.length,Zs(nt))}else{const lo=Nr(q,nt,Ot);if(!lo.matched)return null;Ge=lo.consumedSegments,ei=Ot.slice(lo.lastChild),_e=new sr(Ge,lo.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Mo(nt),Ho(nt),nt.component,nt,La(q),Fs(q)+Ge.length,Zs(nt))}const ki=(ft=nt).children?ft.children:ft.loadChildren?ft._loadedConfig.routes:[],{segmentGroup:_n,slicedSegments:mr}=Ln(q,Ge,ei,ki.filter(lo=>void 0===lo.redirectTo),this.relativeLinkResolution);var ft;if(0===mr.length&&_n.hasChildren()){const lo=this.processChildren(ki,_n);return null===lo?null:[new Vi(_e,lo)]}if(0===ki.length&&0===mr.length)return[new Vi(_e,[])];const Wn=Ho(nt)===zt,Ur=this.processSegment(ki,_n,mr,Wn?re:zt);return null===Ur?null:[new Vi(_e,Ur)]}}function Yr(ft){const nt=ft.value.routeConfig;return nt&&""===nt.path&&void 0===nt.redirectTo}function ro(ft){const nt=[],q=new Set;for(const Ot of ft){if(!Yr(Ot)){nt.push(Ot);continue}const zt=nt.find(_e=>Ot.value.routeConfig===_e.value.routeConfig);void 0!==zt?(zt.children.push(...Ot.children),q.add(zt)):nt.push(Ot)}for(const Ot of q){const zt=ro(Ot.children);nt.push(new Vi(Ot.value,zt))}return nt.filter(Ot=>!q.has(Ot))}function La(ft){let nt=ft;for(;nt._sourceSegment;)nt=nt._sourceSegment;return nt}function Fs(ft){let nt=ft,q=nt._segmentIndexShift?nt._segmentIndexShift:0;for(;nt._sourceSegment;)nt=nt._sourceSegment,q+=nt._segmentIndexShift?nt._segmentIndexShift:0;return q-1}function Mo(ft){return ft.data||{}}function Zs(ft){return ft.resolve||{}}function mo(ft){return(0,rt.w)(nt=>{const q=ft(nt);return q?(0,x.D)(q).pipe((0,ut.U)(()=>nt)):(0,B.of)(nt)})}class An extends class{shouldDetach(nt){return!1}store(nt,q){}shouldAttach(nt){return!1}retrieve(nt){return null}shouldReuseRoute(nt,q){return nt.routeConfig===q.routeConfig}}{}const rr=new T.OlP("ROUTES");class ur{constructor(nt,q,Ot,zt){this.injector=nt,this.compiler=q,this.onLoadStartListener=Ot,this.onLoadEndListener=zt}load(nt,q){if(q._loader$)return q._loader$;this.onLoadStartListener&&this.onLoadStartListener(q);const zt=this.loadModuleFactory(q.loadChildren).pipe((0,ut.U)(_e=>{this.onLoadEndListener&&this.onLoadEndListener(q);const Ge=_e.create(nt);return new ko(dn(Ge.injector.get(rr,void 0,T.XFs.Self|T.XFs.Optional)).map(is),Ge)}),(0,Mt.K)(_e=>{throw q._loader$=void 0,_e}));return q._loader$=new b(zt,()=>new pt.x).pipe(u()),q._loader$}loadModuleFactory(nt){return xe(nt()).pipe((0,ge.z)(q=>q instanceof T.YKP?(0,B.of)(q):(0,x.D)(this.compiler.compileModuleAsync(q))))}}class ns{shouldProcessUrl(nt){return!0}extract(nt){return nt}merge(nt,q){return nt}}function Ir(ft){throw ft}function ms(ft,nt,q){return nt.parse("/")}function _o(ft,nt){return(0,B.of)(null)}const al={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Za={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Fr=(()=>{class ft{constructor(q,Ot,zt,_e,Ge,ei,ki){this.rootComponentType=q,this.urlSerializer=Ot,this.rootContexts=zt,this.location=_e,this.config=ki,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new pt.x,this.errorHandler=Ir,this.malformedUriErrorHandler=ms,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:_o,afterPreactivation:_o},this.urlHandlingStrategy=new ns,this.routeReuseStrategy=new An,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=Ge.get(T.h0i),this.console=Ge.get(T.c2e);const Wn=Ge.get(T.R0b);this.isNgZoneEnabled=Wn instanceof T.R0b&&T.R0b.isInAngularZone(),this.resetConfig(ki),this.currentUrlTree=new ce(new Ne([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new ur(Ge,ei,Ur=>this.triggerEvent(new jt(Ur)),Ur=>this.triggerEvent(new Ce(Ur))),this.routerState=ae(this.currentUrlTree,this.rootComponentType),this.transitions=new Z.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var q;return null===(q=this.location.getState())||void 0===q?void 0:q.\u0275routerPageId}setupNavigations(q){const Ot=this.events;return q.pipe((0,Jt.h)(zt=>0!==zt.id),(0,ut.U)(zt=>Object.assign(Object.assign({},zt),{extractedUrl:this.urlHandlingStrategy.extract(zt.rawUrl)})),(0,rt.w)(zt=>{let _e=!1,Ge=!1;return(0,B.of)(zt).pipe((0,ve.b)(ei=>{this.currentNavigation={id:ei.id,initialUrl:ei.currentRawUrl,extractedUrl:ei.extractedUrl,trigger:ei.source,extras:ei.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,rt.w)(ei=>{const ki=this.browserUrlTree.toString(),_n=!this.navigated||ei.extractedUrl.toString()!==ki||ki!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||_n)&&this.urlHandlingStrategy.shouldProcessUrl(ei.rawUrl))return _s(ei.source)&&(this.browserUrlTree=ei.extractedUrl),(0,B.of)(ei).pipe((0,rt.w)(Wn=>{const Ur=this.transitions.getValue();return Ot.next(new Di(Wn.id,this.serializeUrl(Wn.extractedUrl),Wn.source,Wn.restoredState)),Ur!==this.transitions.getValue()?Pt.E:Promise.resolve(Wn)}),function(ft,nt,q,Ot){return(0,rt.w)(zt=>function(ft,nt,q,Ot,zt){return new cr(ft,nt,q,Ot,zt).apply()}(ft,nt,q,zt.extractedUrl,Ot).pipe((0,ut.U)(_e=>Object.assign(Object.assign({},zt),{urlAfterRedirects:_e}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,ve.b)(Wn=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:Wn.urlAfterRedirects})}),function(ft,nt,q,Ot,zt){return(0,ge.z)(_e=>function(ft,nt,q,Ot,zt="emptyOnly",_e="legacy"){try{const Ge=new tr(ft,nt,q,Ot,zt,_e).recognize();return null===Ge?Qn(new Zn):(0,B.of)(Ge)}catch(Ge){return Qn(Ge)}}(ft,nt,_e.urlAfterRedirects,q(_e.urlAfterRedirects),Ot,zt).pipe((0,ut.U)(Ge=>Object.assign(Object.assign({},_e),{targetSnapshot:Ge}))))}(this.rootComponentType,this.config,Wn=>this.serializeUrl(Wn),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,ve.b)(Wn=>{if("eager"===this.urlUpdateStrategy){if(!Wn.extras.skipLocationChange){const lo=this.urlHandlingStrategy.merge(Wn.urlAfterRedirects,Wn.rawUrl);this.setBrowserUrl(lo,Wn)}this.browserUrlTree=Wn.urlAfterRedirects}const Ur=new Gt(Wn.id,this.serializeUrl(Wn.extractedUrl),this.serializeUrl(Wn.urlAfterRedirects),Wn.targetSnapshot);Ot.next(Ur)}));if(_n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Ur,extractedUrl:lo,source:cl,restoredState:Vs,extras:ha}=ei,Go=new Di(Ur,this.serializeUrl(lo),cl,Vs);Ot.next(Go);const Ga=ae(lo,this.rootComponentType).snapshot;return(0,B.of)(Object.assign(Object.assign({},ei),{targetSnapshot:Ga,urlAfterRedirects:lo,extras:Object.assign(Object.assign({},ha),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=ei.rawUrl,ei.resolve(null),Pt.E}),mo(ei=>{const{targetSnapshot:ki,id:_n,extractedUrl:mr,rawUrl:Wn,extras:{skipLocationChange:Ur,replaceUrl:lo}}=ei;return this.hooks.beforePreactivation(ki,{navigationId:_n,appliedUrlTree:mr,rawUrlTree:Wn,skipLocationChange:!!Ur,replaceUrl:!!lo})}),(0,ve.b)(ei=>{const ki=new Se(ei.id,this.serializeUrl(ei.extractedUrl),this.serializeUrl(ei.urlAfterRedirects),ei.targetSnapshot);this.triggerEvent(ki)}),(0,ut.U)(ei=>Object.assign(Object.assign({},ei),{guards:$a(ei.targetSnapshot,ei.currentSnapshot,this.rootContexts)})),function(ft,nt){return(0,ge.z)(q=>{const{targetSnapshot:Ot,currentSnapshot:zt,guards:{canActivateChecks:_e,canDeactivateChecks:Ge}}=q;return 0===Ge.length&&0===_e.length?(0,B.of)(Object.assign(Object.assign({},q),{guardsResult:!0})):function(ft,nt,q,Ot){return(0,x.D)(ft).pipe((0,ge.z)(zt=>function(ft,nt,q,Ot,zt){const _e=nt&&nt.routeConfig?nt.routeConfig.canDeactivate:null;if(!_e||0===_e.length)return(0,B.of)(!0);const Ge=_e.map(ei=>{const ki=Ps(ei,nt,zt);let _n;if(function(ft){return ft&&jr(ft.canDeactivate)}(ki))_n=xe(ki.canDeactivate(ft,nt,q,Ot));else{if(!jr(ki))throw new Error("Invalid CanDeactivate guard");_n=xe(ki(ft,nt,q,Ot))}return _n.pipe(Et())});return(0,B.of)(Ge).pipe(es())}(zt.component,zt.route,q,nt,Ot)),Et(zt=>!0!==zt,!0))}(Ge,Ot,zt,ft).pipe((0,ge.z)(ei=>ei&&function(ft){return"boolean"==typeof ft}(ei)?function(ft,nt,q,Ot){return(0,x.D)(nt).pipe((0,Nt.b)(zt=>(0,et.z)(function(ft,nt){return null!==ft&&nt&&nt(new ri(ft)),(0,B.of)(!0)}(zt.route.parent,Ot),function(ft,nt){return null!==ft&&nt&&nt(new te(ft)),(0,B.of)(!0)}(zt.route,Ot),function(ft,nt,q){const Ot=nt[nt.length-1],_e=nt.slice(0,nt.length-1).reverse().map(Ge=>function(ft){const nt=ft.routeConfig?ft.routeConfig.canActivateChild:null;return nt&&0!==nt.length?{node:ft,guards:nt}:null}(Ge)).filter(Ge=>null!==Ge).map(Ge=>(0,Tt.P)(()=>{const ei=Ge.guards.map(ki=>{const _n=Ps(ki,Ge.node,q);let mr;if(function(ft){return ft&&jr(ft.canActivateChild)}(_n))mr=xe(_n.canActivateChild(Ot,ft));else{if(!jr(_n))throw new Error("Invalid CanActivateChild guard");mr=xe(_n(Ot,ft))}return mr.pipe(Et())});return(0,B.of)(ei).pipe(es())}));return(0,B.of)(_e).pipe(es())}(ft,zt.path,q),function(ft,nt,q){const Ot=nt.routeConfig?nt.routeConfig.canActivate:null;if(!Ot||0===Ot.length)return(0,B.of)(!0);const zt=Ot.map(_e=>(0,Tt.P)(()=>{const Ge=Ps(_e,nt,q);let ei;if(function(ft){return ft&&jr(ft.canActivate)}(Ge))ei=xe(Ge.canActivate(nt,ft));else{if(!jr(Ge))throw new Error("Invalid CanActivate guard");ei=xe(Ge(nt,ft))}return ei.pipe(Et())}));return(0,B.of)(zt).pipe(es())}(ft,zt.route,q))),Et(zt=>!0!==zt,!0))}(Ot,_e,ft,nt):(0,B.of)(ei)),(0,ut.U)(ei=>Object.assign(Object.assign({},q),{guardsResult:ei})))})}(this.ngModule.injector,ei=>this.triggerEvent(ei)),(0,ve.b)(ei=>{if(To(ei.guardsResult)){const _n=de(`Redirecting to "${this.serializeUrl(ei.guardsResult)}"`);throw _n.url=ei.guardsResult,_n}const ki=new Zt(ei.id,this.serializeUrl(ei.extractedUrl),this.serializeUrl(ei.urlAfterRedirects),ei.targetSnapshot,!!ei.guardsResult);this.triggerEvent(ki)}),(0,Jt.h)(ei=>!!ei.guardsResult||(this.restoreHistory(ei),this.cancelNavigationTransition(ei,""),!1)),mo(ei=>{if(ei.guards.canActivateChecks.length)return(0,B.of)(ei).pipe((0,ve.b)(ki=>{const _n=new ie(ki.id,this.serializeUrl(ki.extractedUrl),this.serializeUrl(ki.urlAfterRedirects),ki.targetSnapshot);this.triggerEvent(_n)}),(0,rt.w)(ki=>{let _n=!1;return(0,B.of)(ki).pipe(function(ft,nt){return(0,ge.z)(q=>{const{targetSnapshot:Ot,guards:{canActivateChecks:zt}}=q;if(!zt.length)return(0,B.of)(q);let _e=0;return(0,x.D)(zt).pipe((0,Nt.b)(Ge=>function(ft,nt,q,Ot){return function(ft,nt,q,Ot){const zt=Object.keys(ft);if(0===zt.length)return(0,B.of)({});const _e={};return(0,x.D)(zt).pipe((0,ge.z)(Ge=>function(ft,nt,q,Ot){const zt=Ps(ft,nt,Ot);return xe(zt.resolve?zt.resolve(nt,q):zt(nt,q))}(ft[Ge],nt,q,Ot).pipe((0,ve.b)(ei=>{_e[Ge]=ei}))),Ct(1),(0,ge.z)(()=>Object.keys(_e).length===zt.length?(0,B.of)(_e):Pt.E))}(ft._resolve,ft,nt,Ot).pipe((0,ut.U)(_e=>(ft._resolvedData=_e,ft.data=Object.assign(Object.assign({},ft.data),Ji(ft,q).resolve),null)))}(Ge.route,Ot,ft,nt)),(0,ve.b)(()=>_e++),Ct(1),(0,ge.z)(Ge=>_e===zt.length?(0,B.of)(q):Pt.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,ve.b)({next:()=>_n=!0,complete:()=>{_n||(this.restoreHistory(ki),this.cancelNavigationTransition(ki,"At least one route resolver didn't emit any value."))}}))}),(0,ve.b)(ki=>{const _n=new St(ki.id,this.serializeUrl(ki.extractedUrl),this.serializeUrl(ki.urlAfterRedirects),ki.targetSnapshot);this.triggerEvent(_n)}))}),mo(ei=>{const{targetSnapshot:ki,id:_n,extractedUrl:mr,rawUrl:Wn,extras:{skipLocationChange:Ur,replaceUrl:lo}}=ei;return this.hooks.afterPreactivation(ki,{navigationId:_n,appliedUrlTree:mr,rawUrlTree:Wn,skipLocationChange:!!Ur,replaceUrl:!!lo})}),(0,ut.U)(ei=>{const ki=function(ft,nt,q){const Ot=go(ft,nt._root,q?q._root:void 0);return new Gn(Ot,nt)}(this.routeReuseStrategy,ei.targetSnapshot,ei.currentRouterState);return Object.assign(Object.assign({},ei),{targetRouterState:ki})}),(0,ve.b)(ei=>{this.currentUrlTree=ei.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(ei.urlAfterRedirects,ei.rawUrl),this.routerState=ei.targetRouterState,"deferred"===this.urlUpdateStrategy&&(ei.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,ei),this.browserUrlTree=ei.urlAfterRedirects)}),((ft,nt,q)=>(0,ut.U)(Ot=>(new Sa(nt,Ot.targetRouterState,Ot.currentRouterState,q).activate(ft),Ot)))(this.rootContexts,this.routeReuseStrategy,ei=>this.triggerEvent(ei)),(0,ve.b)({next(){_e=!0},complete(){_e=!0}}),(0,pe.x)(()=>{var ei;_e||Ge||this.cancelNavigationTransition(zt,`Navigation ID ${zt.id} is not equal to the current navigation id ${this.navigationId}`),(null===(ei=this.currentNavigation)||void 0===ei?void 0:ei.id)===zt.id&&(this.currentNavigation=null)}),(0,Mt.K)(ei=>{if(Ge=!0,function(ft){return ft&&ft[Qt]}(ei)){const ki=To(ei.url);ki||(this.navigated=!0,this.restoreHistory(zt,!0));const _n=new Le(zt.id,this.serializeUrl(zt.extractedUrl),ei.message);Ot.next(_n),ki?setTimeout(()=>{const mr=this.urlHandlingStrategy.merge(ei.url,this.rawUrlTree),Wn={skipLocationChange:zt.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||_s(zt.source)};this.scheduleNavigation(mr,"imperative",null,Wn,{resolve:zt.resolve,reject:zt.reject,promise:zt.promise})},0):zt.resolve(!1)}else{this.restoreHistory(zt,!0);const ki=new pi(zt.id,this.serializeUrl(zt.extractedUrl),ei);Ot.next(ki);try{zt.resolve(this.errorHandler(ei))}catch(_n){zt.reject(_n)}}return Pt.E}))}))}resetRootComponentType(q){this.rootComponentType=q,this.routerState.root.component=this.rootComponentType}setTransition(q){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),q))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(q=>{const Ot="popstate"===q.type?"popstate":"hashchange";"popstate"===Ot&&setTimeout(()=>{var zt;const _e={replaceUrl:!0},Ge=(null===(zt=q.state)||void 0===zt?void 0:zt.navigationId)?q.state:null;if(Ge){const ki=Object.assign({},Ge);delete ki.navigationId,delete ki.\u0275routerPageId,0!==Object.keys(ki).length&&(_e.state=ki)}const ei=this.parseUrl(q.url);this.scheduleNavigation(ei,Ot,Ge,_e)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(q){this.events.next(q)}resetConfig(q){Ar(q),this.config=q.map(is),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(q,Ot={}){const{relativeTo:zt,queryParams:_e,fragment:Ge,queryParamsHandling:ei,preserveFragment:ki}=Ot,_n=zt||this.routerState.root,mr=ki?this.currentUrlTree.fragment:Ge;let Wn=null;switch(ei){case"merge":Wn=Object.assign(Object.assign({},this.currentUrlTree.queryParams),_e);break;case"preserve":Wn=this.currentUrlTree.queryParams;break;default:Wn=_e||null}return null!==Wn&&(Wn=this.removeEmptyProps(Wn)),function(ft,nt,q,Ot,zt){if(0===q.length)return Ls(nt.root,nt.root,nt,Ot,zt);const _e=function(ft){if("string"==typeof ft[0]&&1===ft.length&&"/"===ft[0])return new Do(!0,0,ft);let nt=0,q=!1;const Ot=ft.reduce((zt,_e,Ge)=>{if("object"==typeof _e&&null!=_e){if(_e.outlets){const ei={};return Re(_e.outlets,(ki,_n)=>{ei[_n]="string"==typeof ki?ki.split("/"):ki}),[...zt,{outlets:ei}]}if(_e.segmentPath)return[...zt,_e.segmentPath]}return"string"!=typeof _e?[...zt,_e]:0===Ge?(_e.split("/").forEach((ei,ki)=>{0==ki&&"."===ei||(0==ki&&""===ei?q=!0:".."===ei?nt++:""!=ei&&zt.push(ei))}),zt):[...zt,_e]},[]);return new Do(q,nt,Ot)}(q);if(_e.toRoot())return Ls(nt.root,new Ne([],{}),nt,Ot,zt);const Ge=function(ft,nt,q){if(ft.isAbsolute)return new Io(nt.root,!0,0);if(-1===q.snapshot._lastPathIndex){const _e=q.snapshot._urlSegment;return new Io(_e,_e===nt.root,0)}const Ot=eo(ft.commands[0])?0:1;return function(ft,nt,q){let Ot=ft,zt=nt,_e=q;for(;_e>zt;){if(_e-=zt,Ot=Ot.parent,!Ot)throw new Error("Invalid number of '../'");zt=Ot.segments.length}return new Io(Ot,!1,zt-_e)}(q.snapshot._urlSegment,q.snapshot._lastPathIndex+Ot,ft.numberOfDoubleDots)}(_e,nt,ft),ei=Ge.processChildren?sa(Ge.segmentGroup,Ge.index,_e.commands):Zo(Ge.segmentGroup,Ge.index,_e.commands);return Ls(Ge.segmentGroup,ei,nt,Ot,zt)}(_n,this.currentUrlTree,q,Wn,null!=mr?mr:null)}navigateByUrl(q,Ot={skipLocationChange:!1}){const zt=To(q)?q:this.parseUrl(q),_e=this.urlHandlingStrategy.merge(zt,this.rawUrlTree);return this.scheduleNavigation(_e,"imperative",null,Ot)}navigate(q,Ot={skipLocationChange:!1}){return function(ft){for(let nt=0;nt<ft.length;nt++){const q=ft[nt];if(null==q)throw new Error(`The requested path contains ${q} segment at index ${nt}`)}}(q),this.navigateByUrl(this.createUrlTree(q,Ot),Ot)}serializeUrl(q){return this.urlSerializer.serialize(q)}parseUrl(q){let Ot;try{Ot=this.urlSerializer.parse(q)}catch(zt){Ot=this.malformedUriErrorHandler(zt,this.urlSerializer,q)}return Ot}isActive(q,Ot){let zt;if(zt=!0===Ot?Object.assign({},al):!1===Ot?Object.assign({},Za):Ot,To(q))return _i(this.currentUrlTree,q,zt);const _e=this.parseUrl(q);return _i(this.currentUrlTree,_e,zt)}removeEmptyProps(q){return Object.keys(q).reduce((Ot,zt)=>{const _e=q[zt];return null!=_e&&(Ot[zt]=_e),Ot},{})}processNavigations(){this.navigations.subscribe(q=>{this.navigated=!0,this.lastSuccessfulId=q.id,this.currentPageId=q.targetPageId,this.events.next(new $e(q.id,this.serializeUrl(q.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,q.resolve(!0)},q=>{this.console.warn(`Unhandled Navigation Error: ${q}`)})}scheduleNavigation(q,Ot,zt,_e,Ge){var ei,ki,_n;if(this.disposed)return Promise.resolve(!1);const mr=this.transitions.value,Wn=_s(Ot)&&mr&&!_s(mr.source),Ur=mr.rawUrl.toString()===q.toString(),lo=mr.id===(null===(ei=this.currentNavigation)||void 0===ei?void 0:ei.id);if(Wn&&Ur&&lo)return Promise.resolve(!0);let Vs,ha,Go;Ge?(Vs=Ge.resolve,ha=Ge.reject,Go=Ge.promise):Go=new Promise((Da,qa)=>{Vs=Da,ha=qa});const Ga=++this.navigationId;let Gs;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(zt=this.location.getState()),Gs=zt&&zt.\u0275routerPageId?zt.\u0275routerPageId:_e.replaceUrl||_e.skipLocationChange?null!==(ki=this.browserPageId)&&void 0!==ki?ki:0:(null!==(_n=this.browserPageId)&&void 0!==_n?_n:0)+1):Gs=0,this.setTransition({id:Ga,targetPageId:Gs,source:Ot,restoredState:zt,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:q,extras:_e,resolve:Vs,reject:ha,promise:Go,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Go.catch(Da=>Promise.reject(Da))}setBrowserUrl(q,Ot){const zt=this.urlSerializer.serialize(q),_e=Object.assign(Object.assign({},Ot.extras.state),this.generateNgRouterState(Ot.id,Ot.targetPageId));this.location.isCurrentPathEqualTo(zt)||Ot.extras.replaceUrl?this.location.replaceState(zt,"",_e):this.location.go(zt,"",_e)}restoreHistory(q,Ot=!1){var zt,_e;if("computed"===this.canceledNavigationResolution){const Ge=this.currentPageId-q.targetPageId;"popstate"!==q.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(zt=this.currentNavigation)||void 0===zt?void 0:zt.finalUrl)||0===Ge?this.currentUrlTree===(null===(_e=this.currentNavigation)||void 0===_e?void 0:_e.finalUrl)&&0===Ge&&(this.resetState(q),this.browserUrlTree=q.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(Ge)}else"replace"===this.canceledNavigationResolution&&(Ot&&this.resetState(q),this.resetUrlToCurrentUrlTree())}resetState(q){this.routerState=q.currentRouterState,this.currentUrlTree=q.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,q.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(q,Ot){const zt=new Le(q.id,this.serializeUrl(q.extractedUrl),Ot);this.triggerEvent(zt),q.resolve(!1)}generateNgRouterState(q,Ot){return"computed"===this.canceledNavigationResolution?{navigationId:q,\u0275routerPageId:Ot}:{navigationId:q}}}return ft.\u0275fac=function(q){T.$Z()},ft.\u0275prov=T.Yz7({token:ft,factory:ft.\u0275fac}),ft})();function _s(ft){return"imperative"!==ft}let Ds=(()=>{class ft{constructor(q,Ot,zt){this.router=q,this.route=Ot,this.locationStrategy=zt,this.commands=null,this.href=null,this.onChanges=new pt.x,this.subscription=q.events.subscribe(_e=>{_e instanceof $e&&this.updateTargetUrlAndHref()})}set routerLink(q){this.commands=null!=q?Array.isArray(q)?q:[q]:null}ngOnChanges(q){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(q,Ot,zt,_e,Ge){if(0!==q||Ot||zt||_e||Ge||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const ei={skipLocationChange:_a(this.skipLocationChange),replaceUrl:_a(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,ei),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:_a(this.preserveFragment)})}}return ft.\u0275fac=function(q){return new(q||ft)(T.Y36(Fr),T.Y36(Oi),T.Y36(ke.S$))},ft.\u0275dir=T.lG2({type:ft,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(q,Ot){1&q&&T.NdJ("click",function(_e){return Ot.onClick(_e.button,_e.ctrlKey,_e.shiftKey,_e.altKey,_e.metaKey)}),2&q&&T.uIk("target",Ot.target)("href",Ot.href,T.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[T.TTD]}),ft})();function _a(ft){return""===ft||!!ft}class vs{}class ua{preload(nt,q){return(0,B.of)(null)}}let Fa=(()=>{class ft{constructor(q,Ot,zt,_e){this.router=q,this.injector=zt,this.preloadingStrategy=_e,this.loader=new ur(zt,Ot,ki=>q.triggerEvent(new jt(ki)),ki=>q.triggerEvent(new Ce(ki)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,Jt.h)(q=>q instanceof $e),(0,Nt.b)(()=>this.preload())).subscribe(()=>{})}preload(){const q=this.injector.get(T.h0i);return this.processRoutes(q,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(q,Ot){const zt=[];for(const _e of Ot)if(_e.loadChildren&&!_e.canLoad&&_e._loadedConfig){const Ge=_e._loadedConfig;zt.push(this.processRoutes(Ge.module,Ge.routes))}else _e.loadChildren&&!_e.canLoad?zt.push(this.preloadConfig(q,_e)):_e.children&&zt.push(this.processRoutes(q,_e.children));return(0,x.D)(zt).pipe((0,He.J)(),(0,ut.U)(_e=>{}))}preloadConfig(q,Ot){return this.preloadingStrategy.preload(Ot,()=>(Ot._loadedConfig?(0,B.of)(Ot._loadedConfig):this.loader.load(q.injector,Ot)).pipe((0,ge.z)(_e=>(Ot._loadedConfig=_e,this.processRoutes(_e.module,_e.routes)))))}}return ft.\u0275fac=function(q){return new(q||ft)(T.LFG(Fr),T.LFG(T.Sil),T.LFG(T.zs3),T.LFG(vs))},ft.\u0275prov=T.Yz7({token:ft,factory:ft.\u0275fac}),ft})(),qs=(()=>{class ft{constructor(q,Ot,zt={}){this.router=q,this.viewportScroller=Ot,this.options=zt,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},zt.scrollPositionRestoration=zt.scrollPositionRestoration||"disabled",zt.anchorScrolling=zt.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(q=>{q instanceof Di?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=q.navigationTrigger,this.restoredId=q.restoredState?q.restoredState.navigationId:0):q instanceof $e&&(this.lastId=q.id,this.scheduleScrollEvent(q,this.router.parseUrl(q.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(q=>{q instanceof Oe&&(q.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(q.position):q.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(q.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(q,Ot){this.router.triggerEvent(new Oe(q,"popstate"===this.lastSource?this.store[this.restoredId]:null,Ot))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return ft.\u0275fac=function(q){T.$Z()},ft.\u0275prov=T.Yz7({token:ft,factory:ft.\u0275fac}),ft})();const Ba=new T.OlP("ROUTER_CONFIGURATION"),Vl=new T.OlP("ROUTER_FORROOT_GUARD"),xl=[ke.Ye,{provide:ci,useClass:Ke},{provide:Fr,useFactory:function(ft,nt,q,Ot,zt,_e,Ge={},ei,ki){const _n=new Fr(null,ft,nt,q,Ot,zt,dn(_e));return ei&&(_n.urlHandlingStrategy=ei),ki&&(_n.routeReuseStrategy=ki),function(ft,nt){ft.errorHandler&&(nt.errorHandler=ft.errorHandler),ft.malformedUriErrorHandler&&(nt.malformedUriErrorHandler=ft.malformedUriErrorHandler),ft.onSameUrlNavigation&&(nt.onSameUrlNavigation=ft.onSameUrlNavigation),ft.paramsInheritanceStrategy&&(nt.paramsInheritanceStrategy=ft.paramsInheritanceStrategy),ft.relativeLinkResolution&&(nt.relativeLinkResolution=ft.relativeLinkResolution),ft.urlUpdateStrategy&&(nt.urlUpdateStrategy=ft.urlUpdateStrategy),ft.canceledNavigationResolution&&(nt.canceledNavigationResolution=ft.canceledNavigationResolution)}(Ge,_n),Ge.enableTracing&&_n.events.subscribe(mr=>{var Wn,Ur;null===(Wn=console.group)||void 0===Wn||Wn.call(console,`Router Event: ${mr.constructor.name}`),console.log(mr.toString()),console.log(mr),null===(Ur=console.groupEnd)||void 0===Ur||Ur.call(console)}),_n},deps:[ci,ao,ke.Ye,T.zs3,T.Sil,rr,Ba,[class{},new T.FiY],[class{},new T.FiY]]},ao,{provide:Oi,useFactory:function(ft){return ft.routerState.root},deps:[Fr]},Fa,ua,class{preload(nt,q){return q().pipe((0,Mt.K)(()=>(0,B.of)(null)))}},{provide:Ba,useValue:{enableTracing:!1}}];function Ra(){return new T.PXZ("Router",Fr)}let Qa=(()=>{class ft{constructor(q,Ot){}static forRoot(q,Ot){return{ngModule:ft,providers:[xl,Ha(q),{provide:Vl,useFactory:va,deps:[[Fr,new T.FiY,new T.tp0]]},{provide:Ba,useValue:Ot||{}},{provide:ke.S$,useFactory:Gl,deps:[ke.lw,[new T.tBr(ke.mr),new T.FiY],Ba]},{provide:qs,useFactory:Rc,deps:[Fr,ke.EM,Ba]},{provide:vs,useExisting:Ot&&Ot.preloadingStrategy?Ot.preloadingStrategy:ua},{provide:T.PXZ,multi:!0,useFactory:Ra},[Va,{provide:T.ip1,multi:!0,useFactory:kl,deps:[Va]},{provide:Wl,useFactory:nc,deps:[Va]},{provide:T.tb,multi:!0,useExisting:Wl}]]}}static forChild(q){return{ngModule:ft,providers:[Ha(q)]}}}return ft.\u0275fac=function(q){return new(q||ft)(T.LFG(Vl,8),T.LFG(Fr,8))},ft.\u0275mod=T.oAB({type:ft}),ft.\u0275inj=T.cJS({}),ft})();function Rc(ft,nt,q){return q.scrollOffset&&nt.setOffset(q.scrollOffset),new qs(ft,nt,q)}function Gl(ft,nt,q={}){return q.useHash?new ke.Do(ft,nt):new ke.b0(ft,nt)}function va(ft){return"guarded"}function Ha(ft){return[{provide:T.deG,multi:!0,useValue:ft},{provide:rr,multi:!0,useValue:ft}]}let Va=(()=>{class ft{constructor(q){this.injector=q,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new pt.x}appInitializer(){return this.injector.get(ke.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let Ot=null;const zt=new Promise(ei=>Ot=ei),_e=this.injector.get(Fr),Ge=this.injector.get(Ba);return"disabled"===Ge.initialNavigation?(_e.setUpLocationChangeListener(),Ot(!0)):"enabled"===Ge.initialNavigation||"enabledBlocking"===Ge.initialNavigation?(_e.hooks.afterPreactivation=()=>this.initNavigation?(0,B.of)(null):(this.initNavigation=!0,Ot(!0),this.resultOfPreactivationDone),_e.initialNavigation()):Ot(!0),zt})}bootstrapListener(q){const Ot=this.injector.get(Ba),zt=this.injector.get(Fa),_e=this.injector.get(qs),Ge=this.injector.get(Fr),ei=this.injector.get(T.z2F);q===ei.components[0]&&(("enabledNonBlocking"===Ot.initialNavigation||void 0===Ot.initialNavigation)&&Ge.initialNavigation(),zt.setUpPreloading(),_e.init(),Ge.resetRootComponentType(ei.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return ft.\u0275fac=function(q){return new(q||ft)(T.LFG(T.zs3))},ft.\u0275prov=T.Yz7({token:ft,factory:ft.\u0275fac}),ft})();function kl(ft){return ft.appInitializer.bind(ft)}function nc(ft){return ft.bootstrapListener.bind(ft)}const Wl=new T.OlP("Router Initializer")},33:(U,$,m)=>{"use strict";m.d($,{C:()=>fe,k:()=>Mt});var Dt=m(5e3),Et=m(93075);const ut=["ref"];function rt(Nt){return Nt&&Nt.replace(/\r\n|\r/g,"\n")}let fe=(()=>{class Nt{constructor(ve,pe){this._differs=ve,this._ngZone=pe,this.className="",this.name="codemirror",this.autoFocus=!1,this.preserveScrollPosition=!1,this.cursorActivity=new Dt.vpe,this.focusChange=new Dt.vpe,this.scroll=new Dt.vpe,this.drop=new Dt.vpe,this.value="",this.disabled=!1,this.isFocused=!1,this.onChange=He=>{},this.onTouched=()=>{}}set options(ve){this._options=ve,!this._differ&&ve&&(this._differ=this._differs.find(ve).create())}get codeMirrorGlobal(){return this._codeMirror||(this._codeMirror="undefined"!=typeof CodeMirror?CodeMirror:Promise.resolve().then(m.t.bind(m,68266,19))),this._codeMirror}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>function(Nt,ge,ve,pe){return new(ve||(ve=Promise))(function(ke,Ze){function Di(pi){try{Le(pe.next(pi))}catch(Gt){Ze(Gt)}}function $e(pi){try{Le(pe.throw(pi))}catch(Gt){Ze(Gt)}}function Le(pi){pi.done?ke(pi.value):function(ke){return ke instanceof ve?ke:new ve(function(Ze){Ze(ke)})}(pi.value).then(Di,$e)}Le((pe=pe.apply(Nt,ge||[])).next())})}(this,void 0,void 0,function*(){const ve=yield this.codeMirrorGlobal;this.codeMirror=((null==ve?void 0:ve.default)?ve.default:ve).fromTextArea(this.ref.nativeElement,this._options),this.codeMirror.on("cursorActivity",He=>this._ngZone.run(()=>this.cursorActive(He))),this.codeMirror.on("scroll",this.scrollChanged.bind(this)),this.codeMirror.on("blur",()=>this._ngZone.run(()=>this.focusChanged(!1))),this.codeMirror.on("focus",()=>this._ngZone.run(()=>this.focusChanged(!0))),this.codeMirror.on("change",(He,ke)=>this._ngZone.run(()=>this.codemirrorValueChanged(He,ke))),this.codeMirror.on("drop",(He,ke)=>{this._ngZone.run(()=>this.dropFiles(He,ke))}),this.codeMirror.setValue(this.value)}))}ngDoCheck(){if(!this._differ)return;const ve=this._differ.diff(this._options);ve&&(ve.forEachChangedItem(pe=>this.setOptionIfChanged(pe.key,pe.currentValue)),ve.forEachAddedItem(pe=>this.setOptionIfChanged(pe.key,pe.currentValue)),ve.forEachRemovedItem(pe=>this.setOptionIfChanged(pe.key,pe.currentValue)))}ngOnDestroy(){this.codeMirror&&this.codeMirror.toTextArea()}codemirrorValueChanged(ve,pe){const He=ve.getValue();this.value!==He&&(this.value=He,this.onChange(this.value))}setOptionIfChanged(ve,pe){!this.codeMirror||this.codeMirror.setOption(ve,pe)}focusChanged(ve){this.onTouched(),this.isFocused=ve,this.focusChange.emit(ve)}scrollChanged(ve){this.scroll.emit(ve.getScrollInfo())}cursorActive(ve){this.cursorActivity.emit(ve)}dropFiles(ve,pe){this.drop.emit([ve,pe])}writeValue(ve){if(null==ve)return;if(!this.codeMirror)return void(this.value=ve);const pe=this.codeMirror.getValue();if(ve!==pe&&rt(pe)!==rt(ve))if(this.value=ve,this.preserveScrollPosition){const He=this.codeMirror.getScrollInfo();this.codeMirror.setValue(this.value),this.codeMirror.scrollTo(He.left,He.top)}else this.codeMirror.setValue(this.value)}registerOnChange(ve){this.onChange=ve}registerOnTouched(ve){this.onTouched=ve}setDisabledState(ve){this.disabled=ve,this.setOptionIfChanged("readOnly",this.disabled)}}return Nt.\u0275fac=function(ve){return new(ve||Nt)(Dt.Y36(Dt.aQg),Dt.Y36(Dt.R0b))},Nt.\u0275cmp=Dt.Xpm({type:Nt,selectors:[["ngx-codemirror"]],viewQuery:function(ve,pe){if(1&ve&&Dt.Gf(ut,5),2&ve){let He;Dt.iGM(He=Dt.CRH())&&(pe.ref=He.first)}},inputs:{className:"className",name:"name",autoFocus:"autoFocus",options:"options",preserveScrollPosition:"preserveScrollPosition"},outputs:{cursorActivity:"cursorActivity",focusChange:"focusChange",scroll:"scroll",drop:"drop"},features:[Dt._Bn([{provide:Et.JU,useExisting:(0,Dt.Gpc)(()=>Nt),multi:!0}])],decls:3,vars:7,consts:[["autocomplete","off",3,"name","autofocus"],["ref",""]],template:function(ve,pe){1&ve&&(Dt.TgZ(0,"textarea",0,1),Dt._uU(2,"    "),Dt.qZA()),2&ve&&(Dt.Gre("ngx-codemirror ",pe.className,""),Dt.ekj("ngx-codemirror--focused",pe.isFocused),Dt.Q6J("name",pe.name)("autofocus",pe.autoFocus))},encapsulation:2,changeDetection:0}),Nt})(),Mt=(()=>{class Nt{}return Nt.\u0275fac=function(ve){return new(ve||Nt)},Nt.\u0275mod=Dt.oAB({type:Nt}),Nt.\u0275inj=Dt.cJS({}),Nt})()},15861:(U,$,m)=>{"use strict";function T(e,t,n,r,s,u,b){try{var x=e[u](b),B=x.value}catch(Z){return void n(Z)}x.done?t(B):Promise.resolve(B).then(r,s)}function _(e){return function(){var t=this,n=arguments;return new Promise(function(r,s){var u=e.apply(t,n);function b(B){T(u,r,s,b,x,"next",B)}function x(B){T(u,r,s,b,x,"throw",B)}b(void 0)})}}m.d($,{Z:()=>_})}},U=>{U(U.s=4255)}]);