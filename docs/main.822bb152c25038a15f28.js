var vM=Object.defineProperty,bM=Object.defineProperties,yM=Object.getOwnPropertyDescriptors,ST=Object.getOwnPropertySymbols,EM=Object.prototype.hasOwnProperty,TM=Object.prototype.propertyIsEnumerable,hv=(B,U,v)=>U in B?vM(B,U,{enumerable:!0,configurable:!0,writable:!0,value:v}):B[U]=v,dv=(B,U)=>{for(var v in U||(U={}))EM.call(U,v)&&hv(B,v,U[v]);if(ST)for(var v of ST(U))TM.call(U,v)&&hv(B,v,U[v]);return B},pv=(B,U)=>bM(B,yM(U)),Vc=(B,U,v)=>(hv(B,"symbol"!=typeof U?U+"":U,v),v);(self.webpackChunkauto_blockly_app=self.webpackChunkauto_blockly_app||[]).push([[179],{98255:B=>{function U(v){return Promise.resolve().then(()=>{var T=new Error("Cannot find module '"+v+"'");throw T.code="MODULE_NOT_FOUND",T})}U.keys=()=>[],U.resolve=U,U.id=98255,B.exports=U},38506:B=>{function U(T,a,e,t,n,o,r){try{var p=T[o](r),b=p.value}catch(I){return void e(I)}p.done?a(b):Promise.resolve(b).then(t,n)}B.exports=function(T){return function(){var a=this,e=arguments;return new Promise(function(t,n){var o=T.apply(a,e);function r(b){U(o,t,n,r,p,"next",b)}function p(b){U(o,t,n,r,p,"throw",b)}r(void 0)})}},B.exports.default=B.exports,B.exports.__esModule=!0},89926:(B,U,v)=>{B.exports=v(96353)},87048:(B,U,v)=>{B.exports=v(85671)},20272:(B,U,v)=>{B.exports=v(60580)},26775:(B,U,v)=>{B.exports=v(26271)},78804:(B,U,v)=>{B.exports=v(82237)},11761:(B,U,v)=>{B.exports=v(26944)},64770:(B,U,v)=>{B.exports=v(3245)},71049:(B,U,v)=>{B.exports=v(34123)},3498:(B,U,v)=>{B.exports=v(43264)},38330:(B,U,v)=>{B.exports=v(75991)},23289:(B,U,v)=>{B.exports=v(65155)},53130:(B,U,v)=>{B.exports=v(80301)},45107:(B,U,v)=>{B.exports=v(81145)},45635:(B,U,v)=>{B.exports=v(158)},96916:(B,U,v)=>{B.exports=v(27620)},58258:(B,U,v)=>{B.exports=v(37254)},14569:(B,U,v)=>{B.exports=v(30770)},97326:(B,U,v)=>{B.exports=v(96883)},57124:(B,U,v)=>{B.exports=v(21244)},57272:(B,U,v)=>{B.exports=v(81548)},66360:(B,U,v)=>{B.exports=v(30206)},71094:(B,U,v)=>{B.exports=v(73915)},93165:(B,U,v)=>{B.exports=v(91391)},19898:(B,U,v)=>{B.exports=v(16557)},84916:(B,U,v)=>{B.exports=v(11944)},31946:(B,U,v)=>{B.exports=v(63780)},18753:(B,U,v)=>{B.exports=v(65332)},90343:(B,U,v)=>{B.exports=v(66203)},12988:(B,U,v)=>{B.exports=v(98836)},23005:(B,U,v)=>{B.exports=v(89857)},26394:(B,U,v)=>{B.exports=v(42658)},93449:(B,U,v)=>{B.exports=v(93585)},3599:(B,U,v)=>{B.exports=v(9207)},39126:(B,U,v)=>{B.exports=v(32518)},2805:(B,U,v)=>{"use strict";v.r(U),v.d(U,{__extends:()=>a,__assign:()=>e,__rest:()=>t,__decorate:()=>n,__param:()=>o,__metadata:()=>r,__awaiter:()=>p,__generator:()=>b,__createBinding:()=>I,__exportStar:()=>x,__values:()=>k,__read:()=>Y,__spread:()=>X,__spreadArrays:()=>it,__spreadArray:()=>rt,__await:()=>ct,__asyncGenerator:()=>wt,__asyncDelegator:()=>At,__asyncValues:()=>Rt,__makeTemplateObject:()=>Dt,__importStar:()=>st,__importDefault:()=>ot,__classPrivateFieldGet:()=>nt,__classPrivateFieldSet:()=>Tt});var T=function(Ct,yt){return(T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(gt,_t){gt.__proto__=_t}||function(gt,_t){for(var Jt in _t)Object.prototype.hasOwnProperty.call(_t,Jt)&&(gt[Jt]=_t[Jt])})(Ct,yt)};function a(Ct,yt){if("function"!=typeof yt&&null!==yt)throw new TypeError("Class extends value "+String(yt)+" is not a constructor or null");function gt(){this.constructor=Ct}T(Ct,yt),Ct.prototype=null===yt?Object.create(yt):(gt.prototype=yt.prototype,new gt)}var e=function(){return(e=Object.assign||function(yt){for(var gt,_t=1,Jt=arguments.length;_t<Jt;_t++)for(var Pt in gt=arguments[_t])Object.prototype.hasOwnProperty.call(gt,Pt)&&(yt[Pt]=gt[Pt]);return yt}).apply(this,arguments)};function t(Ct,yt){var gt={};for(var _t in Ct)Object.prototype.hasOwnProperty.call(Ct,_t)&&yt.indexOf(_t)<0&&(gt[_t]=Ct[_t]);if(null!=Ct&&"function"==typeof Object.getOwnPropertySymbols){var Jt=0;for(_t=Object.getOwnPropertySymbols(Ct);Jt<_t.length;Jt++)yt.indexOf(_t[Jt])<0&&Object.prototype.propertyIsEnumerable.call(Ct,_t[Jt])&&(gt[_t[Jt]]=Ct[_t[Jt]])}return gt}function n(Ct,yt,gt,_t){var oe,Jt=arguments.length,Pt=Jt<3?yt:null===_t?_t=Object.getOwnPropertyDescriptor(yt,gt):_t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Pt=Reflect.decorate(Ct,yt,gt,_t);else for(var Ne=Ct.length-1;Ne>=0;Ne--)(oe=Ct[Ne])&&(Pt=(Jt<3?oe(Pt):Jt>3?oe(yt,gt,Pt):oe(yt,gt))||Pt);return Jt>3&&Pt&&Object.defineProperty(yt,gt,Pt),Pt}function o(Ct,yt){return function(gt,_t){yt(gt,_t,Ct)}}function r(Ct,yt){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(Ct,yt)}function p(Ct,yt,gt,_t){return new(gt||(gt=Promise))(function(Pt,oe){function Ne(Ze){try{Ce(_t.next(Ze))}catch(we){oe(we)}}function Xe(Ze){try{Ce(_t.throw(Ze))}catch(we){oe(we)}}function Ce(Ze){Ze.done?Pt(Ze.value):function(Pt){return Pt instanceof gt?Pt:new gt(function(oe){oe(Pt)})}(Ze.value).then(Ne,Xe)}Ce((_t=_t.apply(Ct,yt||[])).next())})}function b(Ct,yt){var _t,Jt,Pt,oe,gt={label:0,sent:function(){if(1&Pt[0])throw Pt[1];return Pt[1]},trys:[],ops:[]};return oe={next:Ne(0),throw:Ne(1),return:Ne(2)},"function"==typeof Symbol&&(oe[Symbol.iterator]=function(){return this}),oe;function Ne(Ce){return function(Ze){return function(Ce){if(_t)throw new TypeError("Generator is already executing.");for(;gt;)try{if(_t=1,Jt&&(Pt=2&Ce[0]?Jt.return:Ce[0]?Jt.throw||((Pt=Jt.return)&&Pt.call(Jt),0):Jt.next)&&!(Pt=Pt.call(Jt,Ce[1])).done)return Pt;switch(Jt=0,Pt&&(Ce=[2&Ce[0],Pt.value]),Ce[0]){case 0:case 1:Pt=Ce;break;case 4:return gt.label++,{value:Ce[1],done:!1};case 5:gt.label++,Jt=Ce[1],Ce=[0];continue;case 7:Ce=gt.ops.pop(),gt.trys.pop();continue;default:if(!(Pt=(Pt=gt.trys).length>0&&Pt[Pt.length-1])&&(6===Ce[0]||2===Ce[0])){gt=0;continue}if(3===Ce[0]&&(!Pt||Ce[1]>Pt[0]&&Ce[1]<Pt[3])){gt.label=Ce[1];break}if(6===Ce[0]&&gt.label<Pt[1]){gt.label=Pt[1],Pt=Ce;break}if(Pt&&gt.label<Pt[2]){gt.label=Pt[2],gt.ops.push(Ce);break}Pt[2]&&gt.ops.pop(),gt.trys.pop();continue}Ce=yt.call(Ct,gt)}catch(Ze){Ce=[6,Ze],Jt=0}finally{_t=Pt=0}if(5&Ce[0])throw Ce[1];return{value:Ce[0]?Ce[1]:void 0,done:!0}}([Ce,Ze])}}}var I=Object.create?function(Ct,yt,gt,_t){void 0===_t&&(_t=gt),Object.defineProperty(Ct,_t,{enumerable:!0,get:function(){return yt[gt]}})}:function(Ct,yt,gt,_t){void 0===_t&&(_t=gt),Ct[_t]=yt[gt]};function x(Ct,yt){for(var gt in Ct)"default"!==gt&&!Object.prototype.hasOwnProperty.call(yt,gt)&&I(yt,Ct,gt)}function k(Ct){var yt="function"==typeof Symbol&&Symbol.iterator,gt=yt&&Ct[yt],_t=0;if(gt)return gt.call(Ct);if(Ct&&"number"==typeof Ct.length)return{next:function(){return Ct&&_t>=Ct.length&&(Ct=void 0),{value:Ct&&Ct[_t++],done:!Ct}}};throw new TypeError(yt?"Object is not iterable.":"Symbol.iterator is not defined.")}function Y(Ct,yt){var gt="function"==typeof Symbol&&Ct[Symbol.iterator];if(!gt)return Ct;var Jt,oe,_t=gt.call(Ct),Pt=[];try{for(;(void 0===yt||yt-- >0)&&!(Jt=_t.next()).done;)Pt.push(Jt.value)}catch(Ne){oe={error:Ne}}finally{try{Jt&&!Jt.done&&(gt=_t.return)&&gt.call(_t)}finally{if(oe)throw oe.error}}return Pt}function X(){for(var Ct=[],yt=0;yt<arguments.length;yt++)Ct=Ct.concat(Y(arguments[yt]));return Ct}function it(){for(var Ct=0,yt=0,gt=arguments.length;yt<gt;yt++)Ct+=arguments[yt].length;var _t=Array(Ct),Jt=0;for(yt=0;yt<gt;yt++)for(var Pt=arguments[yt],oe=0,Ne=Pt.length;oe<Ne;oe++,Jt++)_t[Jt]=Pt[oe];return _t}function rt(Ct,yt,gt){if(gt||2===arguments.length)for(var Pt,_t=0,Jt=yt.length;_t<Jt;_t++)(Pt||!(_t in yt))&&(Pt||(Pt=Array.prototype.slice.call(yt,0,_t)),Pt[_t]=yt[_t]);return Ct.concat(Pt||yt)}function ct(Ct){return this instanceof ct?(this.v=Ct,this):new ct(Ct)}function wt(Ct,yt,gt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Jt,_t=gt.apply(Ct,yt||[]),Pt=[];return Jt={},oe("next"),oe("throw"),oe("return"),Jt[Symbol.asyncIterator]=function(){return this},Jt;function oe(ai){_t[ai]&&(Jt[ai]=function(re){return new Promise(function(ce,Pe){Pt.push([ai,re,ce,Pe])>1||Ne(ai,re)})})}function Ne(ai,re){try{!function(ai){ai.value instanceof ct?Promise.resolve(ai.value.v).then(Ce,Ze):we(Pt[0][2],ai)}(_t[ai](re))}catch(ce){we(Pt[0][3],ce)}}function Ce(ai){Ne("next",ai)}function Ze(ai){Ne("throw",ai)}function we(ai,re){ai(re),Pt.shift(),Pt.length&&Ne(Pt[0][0],Pt[0][1])}}function At(Ct){var yt,gt;return yt={},_t("next"),_t("throw",function(Jt){throw Jt}),_t("return"),yt[Symbol.iterator]=function(){return this},yt;function _t(Jt,Pt){yt[Jt]=Ct[Jt]?function(oe){return(gt=!gt)?{value:ct(Ct[Jt](oe)),done:"return"===Jt}:Pt?Pt(oe):oe}:Pt}}function Rt(Ct){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var gt,yt=Ct[Symbol.asyncIterator];return yt?yt.call(Ct):(Ct=k(Ct),gt={},_t("next"),_t("throw"),_t("return"),gt[Symbol.asyncIterator]=function(){return this},gt);function _t(Pt){gt[Pt]=Ct[Pt]&&function(oe){return new Promise(function(Ne,Xe){!function(Pt,oe,Ne,Xe){Promise.resolve(Xe).then(function(Ce){Pt({value:Ce,done:Ne})},oe)}(Ne,Xe,(oe=Ct[Pt](oe)).done,oe.value)})}}}function Dt(Ct,yt){return Object.defineProperty?Object.defineProperty(Ct,"raw",{value:yt}):Ct.raw=yt,Ct}var pt=Object.create?function(Ct,yt){Object.defineProperty(Ct,"default",{enumerable:!0,value:yt})}:function(Ct,yt){Ct.default=yt};function st(Ct){if(Ct&&Ct.__esModule)return Ct;var yt={};if(null!=Ct)for(var gt in Ct)"default"!==gt&&Object.prototype.hasOwnProperty.call(Ct,gt)&&I(yt,Ct,gt);return pt(yt,Ct),yt}function ot(Ct){return Ct&&Ct.__esModule?Ct:{default:Ct}}function nt(Ct,yt,gt,_t){if("a"===gt&&!_t)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof yt?Ct!==yt||!_t:!yt.has(Ct))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===gt?_t:"a"===gt?_t.call(Ct):_t?_t.value:yt.get(Ct)}function Tt(Ct,yt,gt,_t,Jt){if("m"===_t)throw new TypeError("Private method is not writable");if("a"===_t&&!Jt)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof yt?Ct!==yt||!Jt:!yt.has(Ct))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===_t?Jt.call(Ct,gt):Jt?Jt.value=gt:yt.set(Ct,gt),gt}},88638:(B,U,v)=>{"use strict";v.d(U,{l3:()=>e,_j:()=>T,LC:()=>a,ZN:()=>wt,jt:()=>n,pV:()=>Y,F4:()=>I,IO:()=>it,vP:()=>r,SB:()=>b,oB:()=>p,eR:()=>x,X$:()=>t,ZE:()=>At,k1:()=>Rt});class T{}class a{}const e="*";function t(Dt,pt){return{type:7,name:Dt,definitions:pt,options:{}}}function n(Dt,pt=null){return{type:4,styles:pt,timings:Dt}}function r(Dt,pt=null){return{type:2,steps:Dt,options:pt}}function p(Dt){return{type:6,styles:Dt,offset:null}}function b(Dt,pt,st){return{type:0,name:Dt,styles:pt,options:st}}function I(Dt){return{type:5,steps:Dt}}function x(Dt,pt,st=null){return{type:1,expr:Dt,animation:pt,options:st}}function Y(Dt=null){return{type:9,options:Dt}}function it(Dt,pt,st=null){return{type:11,selector:Dt,animation:pt,options:st}}function ct(Dt){Promise.resolve(null).then(Dt)}class wt{constructor(pt=0,st=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=pt+st}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(pt=>pt()),this._onDoneFns=[])}onStart(pt){this._onStartFns.push(pt)}onDone(pt){this._onDoneFns.push(pt)}onDestroy(pt){this._onDestroyFns.push(pt)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){ct(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(pt=>pt()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(pt=>pt()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(pt){this._position=this.totalTime?pt*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(pt){const st="start"==pt?this._onStartFns:this._onDoneFns;st.forEach(ot=>ot()),st.length=0}}class At{constructor(pt){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=pt;let st=0,ot=0,nt=0;const Tt=this.players.length;0==Tt?ct(()=>this._onFinish()):this.players.forEach(Ct=>{Ct.onDone(()=>{++st==Tt&&this._onFinish()}),Ct.onDestroy(()=>{++ot==Tt&&this._onDestroy()}),Ct.onStart(()=>{++nt==Tt&&this._onStart()})}),this.totalTime=this.players.reduce((Ct,yt)=>Math.max(Ct,yt.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(pt=>pt()),this._onDoneFns=[])}init(){this.players.forEach(pt=>pt.init())}onStart(pt){this._onStartFns.push(pt)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(pt=>pt()),this._onStartFns=[])}onDone(pt){this._onDoneFns.push(pt)}onDestroy(pt){this._onDestroyFns.push(pt)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(pt=>pt.play())}pause(){this.players.forEach(pt=>pt.pause())}restart(){this.players.forEach(pt=>pt.restart())}finish(){this._onFinish(),this.players.forEach(pt=>pt.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(pt=>pt.destroy()),this._onDestroyFns.forEach(pt=>pt()),this._onDestroyFns=[])}reset(){this.players.forEach(pt=>pt.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(pt){const st=pt*this.totalTime;this.players.forEach(ot=>{const nt=ot.totalTime?Math.min(1,st/ot.totalTime):1;ot.setPosition(nt)})}getPosition(){const pt=this.players.reduce((st,ot)=>null===st||ot.totalTime>st.totalTime?ot:st,null);return null!=pt?pt.getPosition():0}beforeDestroy(){this.players.forEach(pt=>{pt.beforeDestroy&&pt.beforeDestroy()})}triggerCallback(pt){const st="start"==pt?this._onStartFns:this._onDoneFns;st.forEach(ot=>ot()),st.length=0}}const Rt="!"},72882:(B,U,v)=>{"use strict";v.d(U,{rt:()=>Me,s1:()=>oe,$s:()=>gt,Qr:()=>ne,kH:()=>Zi,mK:()=>Ft,Em:()=>Ne,tE:()=>yi,qV:()=>Be,qm:()=>Re,Kd:()=>Ke,X6:()=>zt,yG:()=>Qt});var T=v(16274),a=v(42741),e=v(6006),t=v(39734),n=v(29923),o=v(267),r=v(15911),p=v(96286),b=v(89006),I=v(63305),x=v(88561),k=v(59917),Y=v(8055),X=v(57689),it=v(27194),rt=v(99957),ct=v(66899),wt=v(34529);function pt(kt,Wt){return(kt.getAttribute(Wt)||"").match(/\S+/g)||[]}const st="cdk-describedby-message-container",ot="cdk-describedby-message",nt="cdk-describedby-host";let Tt=0;const Ct=new Map;let yt=null,gt=(()=>{class kt{constructor(Gt){this._document=Gt}describe(Gt,be,Je){if(!this._canBeDescribed(Gt,be))return;const Pi=_t(be,Je);"string"!=typeof be?(Jt(be),Ct.set(Pi,{messageElement:be,referenceCount:0})):Ct.has(Pi)||this._createMessageElement(be,Je),this._isElementDescribedByMessage(Gt,Pi)||this._addMessageReference(Gt,Pi)}removeDescription(Gt,be,Je){if(!be||!this._isElementNode(Gt))return;const Pi=_t(be,Je);if(this._isElementDescribedByMessage(Gt,Pi)&&this._removeMessageReference(Gt,Pi),"string"==typeof be){const Oi=Ct.get(Pi);Oi&&0===Oi.referenceCount&&this._deleteMessageElement(Pi)}yt&&0===yt.childNodes.length&&this._deleteMessagesContainer()}ngOnDestroy(){const Gt=this._document.querySelectorAll(`[${nt}]`);for(let be=0;be<Gt.length;be++)this._removeCdkDescribedByReferenceIds(Gt[be]),Gt[be].removeAttribute(nt);yt&&this._deleteMessagesContainer(),Ct.clear()}_createMessageElement(Gt,be){const Je=this._document.createElement("div");Jt(Je),Je.textContent=Gt,be&&Je.setAttribute("role",be),this._createMessagesContainer(),yt.appendChild(Je),Ct.set(_t(Gt,be),{messageElement:Je,referenceCount:0})}_deleteMessageElement(Gt){const be=Ct.get(Gt),Je=be&&be.messageElement;yt&&Je&&yt.removeChild(Je),Ct.delete(Gt)}_createMessagesContainer(){if(!yt){const Gt=this._document.getElementById(st);Gt&&Gt.parentNode&&Gt.parentNode.removeChild(Gt),yt=this._document.createElement("div"),yt.id=st,yt.style.visibility="hidden",yt.classList.add("cdk-visually-hidden"),this._document.body.appendChild(yt)}}_deleteMessagesContainer(){yt&&yt.parentNode&&(yt.parentNode.removeChild(yt),yt=null)}_removeCdkDescribedByReferenceIds(Gt){const be=pt(Gt,"aria-describedby").filter(Je=>0!=Je.indexOf(ot));Gt.setAttribute("aria-describedby",be.join(" "))}_addMessageReference(Gt,be){const Je=Ct.get(be);(function(kt,Wt,Gt){const be=pt(kt,Wt);be.some(Je=>Je.trim()==Gt.trim())||(be.push(Gt.trim()),kt.setAttribute(Wt,be.join(" ")))})(Gt,"aria-describedby",Je.messageElement.id),Gt.setAttribute(nt,""),Je.referenceCount++}_removeMessageReference(Gt,be){const Je=Ct.get(be);Je.referenceCount--,function(kt,Wt,Gt){const Je=pt(kt,Wt).filter(Pi=>Pi!=Gt.trim());Je.length?kt.setAttribute(Wt,Je.join(" ")):kt.removeAttribute(Wt)}(Gt,"aria-describedby",Je.messageElement.id),Gt.removeAttribute(nt)}_isElementDescribedByMessage(Gt,be){const Je=pt(Gt,"aria-describedby"),Pi=Ct.get(be),Oi=Pi&&Pi.messageElement.id;return!!Oi&&-1!=Je.indexOf(Oi)}_canBeDescribed(Gt,be){if(!this._isElementNode(Gt))return!1;if(be&&"object"==typeof be)return!0;const Je=null==be?"":`${be}`.trim(),Pi=Gt.getAttribute("aria-label");return!(!Je||Pi&&Pi.trim()===Je)}_isElementNode(Gt){return Gt.nodeType===this._document.ELEMENT_NODE}}return kt.\u0275fac=function(Gt){return new(Gt||kt)(a.LFG(T.K0))},kt.\u0275prov=a.Yz7({factory:function(){return new kt(a.LFG(T.K0))},token:kt,providedIn:"root"}),kt})();function _t(kt,Wt){return"string"==typeof kt?`${Wt||""}/${kt}`:kt}function Jt(kt){kt.id||(kt.id=`${ot}-${Tt++}`)}class Pt{constructor(Wt){this._items=Wt,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new e.xQ,this._typeaheadSubscription=t.w.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=Gt=>Gt.disabled,this._pressedLetters=[],this.tabOut=new e.xQ,this.change=new e.xQ,Wt instanceof a.n_E&&Wt.changes.subscribe(Gt=>{if(this._activeItem){const Je=Gt.toArray().indexOf(this._activeItem);Je>-1&&Je!==this._activeItemIndex&&(this._activeItemIndex=Je)}})}skipPredicate(Wt){return this._skipPredicateFn=Wt,this}withWrap(Wt=!0){return this._wrap=Wt,this}withVerticalOrientation(Wt=!0){return this._vertical=Wt,this}withHorizontalOrientation(Wt){return this._horizontal=Wt,this}withAllowedModifierKeys(Wt){return this._allowedModifierKeys=Wt,this}withTypeAhead(Wt=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,p.b)(Gt=>this._pressedLetters.push(Gt)),(0,b.b)(Wt),(0,I.h)(()=>this._pressedLetters.length>0),(0,x.U)(()=>this._pressedLetters.join(""))).subscribe(Gt=>{const be=this._getItemsArray();for(let Je=1;Je<be.length+1;Je++){const Pi=(this._activeItemIndex+Je)%be.length,Oi=be[Pi];if(!this._skipPredicateFn(Oi)&&0===Oi.getLabel().toUpperCase().trim().indexOf(Gt)){this.setActiveItem(Pi);break}}this._pressedLetters=[]}),this}withHomeAndEnd(Wt=!0){return this._homeAndEnd=Wt,this}setActiveItem(Wt){const Gt=this._activeItem;this.updateActiveItem(Wt),this._activeItem!==Gt&&this.change.next(this._activeItemIndex)}onKeydown(Wt){const Gt=Wt.keyCode,Je=["altKey","ctrlKey","metaKey","shiftKey"].every(Pi=>!Wt[Pi]||this._allowedModifierKeys.indexOf(Pi)>-1);switch(Gt){case r.Mf:return void this.tabOut.next();case r.JH:if(this._vertical&&Je){this.setNextItemActive();break}return;case r.LH:if(this._vertical&&Je){this.setPreviousItemActive();break}return;case r.SV:if(this._horizontal&&Je){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case r.oh:if(this._horizontal&&Je){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case r.Sd:if(this._homeAndEnd&&Je){this.setFirstItemActive();break}return;case r.uR:if(this._homeAndEnd&&Je){this.setLastItemActive();break}return;default:return void((Je||(0,r.Vb)(Wt,"shiftKey"))&&(Wt.key&&1===Wt.key.length?this._letterKeyStream.next(Wt.key.toLocaleUpperCase()):(Gt>=r.A&&Gt<=r.Z||Gt>=r.xE&&Gt<=r.aO)&&this._letterKeyStream.next(String.fromCharCode(Gt))))}this._pressedLetters=[],Wt.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(Wt){const Gt=this._getItemsArray(),be="number"==typeof Wt?Wt:Gt.indexOf(Wt),Je=Gt[be];this._activeItem=null==Je?null:Je,this._activeItemIndex=be}_setActiveItemByDelta(Wt){this._wrap?this._setActiveInWrapMode(Wt):this._setActiveInDefaultMode(Wt)}_setActiveInWrapMode(Wt){const Gt=this._getItemsArray();for(let be=1;be<=Gt.length;be++){const Je=(this._activeItemIndex+Wt*be+Gt.length)%Gt.length;if(!this._skipPredicateFn(Gt[Je]))return void this.setActiveItem(Je)}}_setActiveInDefaultMode(Wt){this._setActiveItemByIndex(this._activeItemIndex+Wt,Wt)}_setActiveItemByIndex(Wt,Gt){const be=this._getItemsArray();if(be[Wt]){for(;this._skipPredicateFn(be[Wt]);)if(!be[Wt+=Gt])return;this.setActiveItem(Wt)}}_getItemsArray(){return this._items instanceof a.n_E?this._items.toArray():this._items}}class oe extends Pt{setActiveItem(Wt){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(Wt),this.activeItem&&this.activeItem.setActiveStyles()}}class Ne extends Pt{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(Wt){return this._origin=Wt,this}setActiveItem(Wt){super.setActiveItem(Wt),this.activeItem&&this.activeItem.focus(this._origin)}}let Ce=(()=>{class kt{constructor(Gt){this._platform=Gt}isDisabled(Gt){return Gt.hasAttribute("disabled")}isVisible(Gt){return function(kt){return!!(kt.offsetWidth||kt.offsetHeight||"function"==typeof kt.getClientRects&&kt.getClientRects().length)}(Gt)&&"visible"===getComputedStyle(Gt).visibility}isTabbable(Gt){if(!this._platform.isBrowser)return!1;const be=function(kt){try{return kt.frameElement}catch(Wt){return null}}(function(kt){return kt.ownerDocument&&kt.ownerDocument.defaultView||window}(Gt));if(be&&(-1===wi(be)||!this.isVisible(be)))return!1;let Je=Gt.nodeName.toLowerCase(),Pi=wi(Gt);return Gt.hasAttribute("contenteditable")?-1!==Pi:!("iframe"===Je||"object"===Je||this._platform.WEBKIT&&this._platform.IOS&&!function(kt){let Wt=kt.nodeName.toLowerCase(),Gt="input"===Wt&&kt.type;return"text"===Gt||"password"===Gt||"select"===Wt||"textarea"===Wt}(Gt))&&("audio"===Je?!!Gt.hasAttribute("controls")&&-1!==Pi:"video"===Je?-1!==Pi&&(null!==Pi||this._platform.FIREFOX||Gt.hasAttribute("controls")):Gt.tabIndex>=0)}isFocusable(Gt,be){return function(kt){return!function(kt){return function(kt){return"input"==kt.nodeName.toLowerCase()}(kt)&&"hidden"==kt.type}(kt)&&(function(kt){let Wt=kt.nodeName.toLowerCase();return"input"===Wt||"select"===Wt||"button"===Wt||"textarea"===Wt}(kt)||function(kt){return function(kt){return"a"==kt.nodeName.toLowerCase()}(kt)&&kt.hasAttribute("href")}(kt)||kt.hasAttribute("contenteditable")||oi(kt))}(Gt)&&!this.isDisabled(Gt)&&((null==be?void 0:be.ignoreVisibility)||this.isVisible(Gt))}}return kt.\u0275fac=function(Gt){return new(Gt||kt)(a.LFG(ct.t4))},kt.\u0275prov=a.Yz7({factory:function(){return new kt(a.LFG(ct.t4))},token:kt,providedIn:"root"}),kt})();function oi(kt){if(!kt.hasAttribute("tabindex")||void 0===kt.tabIndex)return!1;let Wt=kt.getAttribute("tabindex");return"-32768"!=Wt&&!(!Wt||isNaN(parseInt(Wt,10)))}function wi(kt){if(!oi(kt))return null;const Wt=parseInt(kt.getAttribute("tabindex")||"",10);return isNaN(Wt)?-1:Wt}class Oe{constructor(Wt,Gt,be,Je,Pi=!1){this._element=Wt,this._checker=Gt,this._ngZone=be,this._document=Je,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,Pi||this.attachAnchors()}get enabled(){return this._enabled}set enabled(Wt){this._enabled=Wt,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(Wt,this._startAnchor),this._toggleAnchorTabIndex(Wt,this._endAnchor))}destroy(){const Wt=this._startAnchor,Gt=this._endAnchor;Wt&&(Wt.removeEventListener("focus",this.startAnchorListener),Wt.parentNode&&Wt.parentNode.removeChild(Wt)),Gt&&(Gt.removeEventListener("focus",this.endAnchorListener),Gt.parentNode&&Gt.parentNode.removeChild(Gt)),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(Wt){return new Promise(Gt=>{this._executeOnStable(()=>Gt(this.focusInitialElement(Wt)))})}focusFirstTabbableElementWhenReady(Wt){return new Promise(Gt=>{this._executeOnStable(()=>Gt(this.focusFirstTabbableElement(Wt)))})}focusLastTabbableElementWhenReady(Wt){return new Promise(Gt=>{this._executeOnStable(()=>Gt(this.focusLastTabbableElement(Wt)))})}_getRegionBoundary(Wt){let Gt=this._element.querySelectorAll(`[cdk-focus-region-${Wt}], [cdkFocusRegion${Wt}], [cdk-focus-${Wt}]`);for(let be=0;be<Gt.length;be++)Gt[be].hasAttribute(`cdk-focus-${Wt}`)?console.warn(`Found use of deprecated attribute 'cdk-focus-${Wt}', use 'cdkFocusRegion${Wt}' instead. The deprecated attribute will be removed in 8.0.0.`,Gt[be]):Gt[be].hasAttribute(`cdk-focus-region-${Wt}`)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${Wt}', use 'cdkFocusRegion${Wt}' instead. The deprecated attribute will be removed in 8.0.0.`,Gt[be]);return"start"==Wt?Gt.length?Gt[0]:this._getFirstTabbableElement(this._element):Gt.length?Gt[Gt.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(Wt){const Gt=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(Gt){if(Gt.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",Gt),!this._checker.isFocusable(Gt)){const be=this._getFirstTabbableElement(Gt);return null==be||be.focus(Wt),!!be}return Gt.focus(Wt),!0}return this.focusFirstTabbableElement(Wt)}focusFirstTabbableElement(Wt){const Gt=this._getRegionBoundary("start");return Gt&&Gt.focus(Wt),!!Gt}focusLastTabbableElement(Wt){const Gt=this._getRegionBoundary("end");return Gt&&Gt.focus(Wt),!!Gt}hasAttached(){return this._hasAttached}_getFirstTabbableElement(Wt){if(this._checker.isFocusable(Wt)&&this._checker.isTabbable(Wt))return Wt;let Gt=Wt.children||Wt.childNodes;for(let be=0;be<Gt.length;be++){let Je=Gt[be].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(Gt[be]):null;if(Je)return Je}return null}_getLastTabbableElement(Wt){if(this._checker.isFocusable(Wt)&&this._checker.isTabbable(Wt))return Wt;let Gt=Wt.children||Wt.childNodes;for(let be=Gt.length-1;be>=0;be--){let Je=Gt[be].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(Gt[be]):null;if(Je)return Je}return null}_createAnchor(){const Wt=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,Wt),Wt.classList.add("cdk-visually-hidden"),Wt.classList.add("cdk-focus-trap-anchor"),Wt.setAttribute("aria-hidden","true"),Wt}_toggleAnchorTabIndex(Wt,Gt){Wt?Gt.setAttribute("tabindex","0"):Gt.removeAttribute("tabindex")}toggleAnchors(Wt){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(Wt,this._startAnchor),this._toggleAnchorTabIndex(Wt,this._endAnchor))}_executeOnStable(Wt){this._ngZone.isStable?Wt():this._ngZone.onStable.pipe((0,k.q)(1)).subscribe(Wt)}}let Be=(()=>{class kt{constructor(Gt,be,Je){this._checker=Gt,this._ngZone=be,this._document=Je}create(Gt,be=!1){return new Oe(Gt,this._checker,this._ngZone,this._document,be)}}return kt.\u0275fac=function(Gt){return new(Gt||kt)(a.LFG(Ce),a.LFG(a.R0b),a.LFG(T.K0))},kt.\u0275prov=a.Yz7({factory:function(){return new kt(a.LFG(Ce),a.LFG(a.R0b),a.LFG(T.K0))},token:kt,providedIn:"root"}),kt})(),Ft=(()=>{class kt{constructor(Gt,be,Je){this._elementRef=Gt,this._focusTrapFactory=be,this._previouslyFocusedElement=null,this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0)}get enabled(){return this.focusTrap.enabled}set enabled(Gt){this.focusTrap.enabled=(0,rt.Ig)(Gt)}get autoCapture(){return this._autoCapture}set autoCapture(Gt){this._autoCapture=(0,rt.Ig)(Gt)}ngOnDestroy(){this.focusTrap.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap.attachAnchors(),this.autoCapture&&this._captureFocus()}ngDoCheck(){this.focusTrap.hasAttached()||this.focusTrap.attachAnchors()}ngOnChanges(Gt){const be=Gt.autoCapture;be&&!be.firstChange&&this.autoCapture&&this.focusTrap.hasAttached()&&this._captureFocus()}_captureFocus(){this._previouslyFocusedElement=(0,ct.ht)(),this.focusTrap.focusInitialElementWhenReady()}}return kt.\u0275fac=function(Gt){return new(Gt||kt)(a.Y36(a.SBq),a.Y36(Be),a.Y36(T.K0))},kt.\u0275dir=a.lG2({type:kt,selectors:[["","cdkTrapFocus",""]],inputs:{enabled:["cdkTrapFocus","enabled"],autoCapture:["cdkTrapFocusAutoCapture","autoCapture"]},exportAs:["cdkTrapFocus"],features:[a.TTD]}),kt})();function zt(kt){return 0===kt.offsetX&&0===kt.offsetY}function Qt(kt){const Wt=kt.touches&&kt.touches[0]||kt.changedTouches&&kt.changedTouches[0];return!(!Wt||-1!==Wt.identifier||null!=Wt.radiusX&&1!==Wt.radiusX||null!=Wt.radiusY&&1!==Wt.radiusY)}"undefined"!=typeof Element&&Element;const ye=new a.OlP("cdk-input-modality-detector-options"),Ee={ignoreKeys:[r.zL,r.jx,r.b2,r.MW,r.JU]},Di=(0,ct.i$)({passive:!0,capture:!0});let Mi=(()=>{class kt{constructor(Gt,be,Je,Pi){this._platform=Gt,this._mostRecentTarget=null,this._modality=new n.X(null),this._lastTouchMs=0,this._onKeydown=Oi=>{var kn,Wn;(null===(Wn=null===(kn=this._options)||void 0===kn?void 0:kn.ignoreKeys)||void 0===Wn?void 0:Wn.some(so=>so===Oi.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=(0,ct.sA)(Oi))},this._onMousedown=Oi=>{Date.now()-this._lastTouchMs<650||(this._modality.next(zt(Oi)?"keyboard":"mouse"),this._mostRecentTarget=(0,ct.sA)(Oi))},this._onTouchstart=Oi=>{Qt(Oi)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=(0,ct.sA)(Oi))},this._options=Object.assign(Object.assign({},Ee),Pi),this.modalityDetected=this._modality.pipe((0,Y.T)(1)),this.modalityChanged=this.modalityDetected.pipe((0,X.x)()),Gt.isBrowser&&be.runOutsideAngular(()=>{Je.addEventListener("keydown",this._onKeydown,Di),Je.addEventListener("mousedown",this._onMousedown,Di),Je.addEventListener("touchstart",this._onTouchstart,Di)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Di),document.removeEventListener("mousedown",this._onMousedown,Di),document.removeEventListener("touchstart",this._onTouchstart,Di))}}return kt.\u0275fac=function(Gt){return new(Gt||kt)(a.LFG(ct.t4),a.LFG(a.R0b),a.LFG(T.K0),a.LFG(ye,8))},kt.\u0275prov=a.Yz7({factory:function(){return new kt(a.LFG(ct.t4),a.LFG(a.R0b),a.LFG(T.K0),a.LFG(ye,8))},token:kt,providedIn:"root"}),kt})();const vi=new a.OlP("liveAnnouncerElement",{providedIn:"root",factory:function(){return null}}),Ue=new a.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let Ke=(()=>{class kt{constructor(Gt,be,Je,Pi){this._ngZone=be,this._defaultOptions=Pi,this._document=Je,this._liveElement=Gt||this._createLiveElement()}announce(Gt,...be){const Je=this._defaultOptions;let Pi,Oi;return 1===be.length&&"number"==typeof be[0]?Oi=be[0]:[Pi,Oi]=be,this.clear(),clearTimeout(this._previousTimeout),Pi||(Pi=Je&&Je.politeness?Je.politeness:"polite"),null==Oi&&Je&&(Oi=Je.duration),this._liveElement.setAttribute("aria-live",Pi),this._ngZone.runOutsideAngular(()=>new Promise(kn=>{clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=Gt,kn(),"number"==typeof Oi&&(this._previousTimeout=setTimeout(()=>this.clear(),Oi))},100)}))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement&&this._liveElement.parentNode&&(this._liveElement.parentNode.removeChild(this._liveElement),this._liveElement=null)}_createLiveElement(){const Gt="cdk-live-announcer-element",be=this._document.getElementsByClassName(Gt),Je=this._document.createElement("div");for(let Pi=0;Pi<be.length;Pi++)be[Pi].parentNode.removeChild(be[Pi]);return Je.classList.add(Gt),Je.classList.add("cdk-visually-hidden"),Je.setAttribute("aria-atomic","true"),Je.setAttribute("aria-live","polite"),this._document.body.appendChild(Je),Je}}return kt.\u0275fac=function(Gt){return new(Gt||kt)(a.LFG(vi,8),a.LFG(a.R0b),a.LFG(T.K0),a.LFG(Ue,8))},kt.\u0275prov=a.Yz7({factory:function(){return new kt(a.LFG(vi,8),a.LFG(a.R0b),a.LFG(T.K0),a.LFG(Ue,8))},token:kt,providedIn:"root"}),kt})(),ne=(()=>{class kt{constructor(Gt,be,Je,Pi){this._elementRef=Gt,this._liveAnnouncer=be,this._contentObserver=Je,this._ngZone=Pi,this._politeness="polite"}get politeness(){return this._politeness}set politeness(Gt){this._politeness="off"===Gt||"assertive"===Gt?Gt:"polite","off"===this._politeness?this._subscription&&(this._subscription.unsubscribe(),this._subscription=null):this._subscription||(this._subscription=this._ngZone.runOutsideAngular(()=>this._contentObserver.observe(this._elementRef).subscribe(()=>{const be=this._elementRef.nativeElement.textContent;be!==this._previousAnnouncedText&&(this._liveAnnouncer.announce(be,this._politeness),this._previousAnnouncedText=be)})))}ngOnDestroy(){this._subscription&&this._subscription.unsubscribe()}}return kt.\u0275fac=function(Gt){return new(Gt||kt)(a.Y36(a.SBq),a.Y36(Ke),a.Y36(wt.yq),a.Y36(a.R0b))},kt.\u0275dir=a.lG2({type:kt,selectors:[["","cdkAriaLive",""]],inputs:{politeness:["cdkAriaLive","politeness"]},exportAs:["cdkAriaLive"]}),kt})();const xe=new a.OlP("cdk-focus-monitor-default-options"),ii=(0,ct.i$)({passive:!0,capture:!0});let yi=(()=>{class kt{constructor(Gt,be,Je,Pi,Oi){this._ngZone=Gt,this._platform=be,this._inputModalityDetector=Je,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new e.xQ,this._rootNodeFocusAndBlurListener=kn=>{const Wn=(0,ct.sA)(kn),so="focus"===kn.type?this._onFocus:this._onBlur;for(let Vn=Wn;Vn;Vn=Vn.parentElement)so.call(this,kn,Vn)},this._document=Pi,this._detectionMode=(null==Oi?void 0:Oi.detectionMode)||0}monitor(Gt,be=!1){const Je=(0,rt.fI)(Gt);if(!this._platform.isBrowser||1!==Je.nodeType)return(0,o.of)(null);const Pi=(0,ct.kV)(Je)||this._getDocument(),Oi=this._elementInfo.get(Je);if(Oi)return be&&(Oi.checkChildren=!0),Oi.subject;const kn={checkChildren:be,subject:new e.xQ,rootNode:Pi};return this._elementInfo.set(Je,kn),this._registerGlobalListeners(kn),kn.subject}stopMonitoring(Gt){const be=(0,rt.fI)(Gt),Je=this._elementInfo.get(be);Je&&(Je.subject.complete(),this._setClasses(be),this._elementInfo.delete(be),this._removeGlobalListeners(Je))}focusVia(Gt,be,Je){const Pi=(0,rt.fI)(Gt);Pi===this._getDocument().activeElement?this._getClosestElementsInfo(Pi).forEach(([kn,Wn])=>this._originChanged(kn,be,Wn)):(this._setOrigin(be),"function"==typeof Pi.focus&&Pi.focus(Je))}ngOnDestroy(){this._elementInfo.forEach((Gt,be)=>this.stopMonitoring(be))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(Gt,be,Je){Je?Gt.classList.add(be):Gt.classList.remove(be)}_getFocusOrigin(Gt){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(Gt)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(Gt){return 1===this._detectionMode||!!(null==Gt?void 0:Gt.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(Gt,be){this._toggleClass(Gt,"cdk-focused",!!be),this._toggleClass(Gt,"cdk-touch-focused","touch"===be),this._toggleClass(Gt,"cdk-keyboard-focused","keyboard"===be),this._toggleClass(Gt,"cdk-mouse-focused","mouse"===be),this._toggleClass(Gt,"cdk-program-focused","program"===be)}_setOrigin(Gt,be=!1){this._ngZone.runOutsideAngular(()=>{this._origin=Gt,this._originFromTouchInteraction="touch"===Gt&&be,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(Gt,be){const Je=this._elementInfo.get(be),Pi=(0,ct.sA)(Gt);!Je||!Je.checkChildren&&be!==Pi||this._originChanged(be,this._getFocusOrigin(Pi),Je)}_onBlur(Gt,be){const Je=this._elementInfo.get(be);!Je||Je.checkChildren&&Gt.relatedTarget instanceof Node&&be.contains(Gt.relatedTarget)||(this._setClasses(be),this._emitOrigin(Je.subject,null))}_emitOrigin(Gt,be){this._ngZone.run(()=>Gt.next(be))}_registerGlobalListeners(Gt){if(!this._platform.isBrowser)return;const be=Gt.rootNode,Je=this._rootNodeFocusListenerCount.get(be)||0;Je||this._ngZone.runOutsideAngular(()=>{be.addEventListener("focus",this._rootNodeFocusAndBlurListener,ii),be.addEventListener("blur",this._rootNodeFocusAndBlurListener,ii)}),this._rootNodeFocusListenerCount.set(be,Je+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe((0,it.R)(this._stopInputModalityDetector)).subscribe(Pi=>{this._setOrigin(Pi,!0)}))}_removeGlobalListeners(Gt){const be=Gt.rootNode;if(this._rootNodeFocusListenerCount.has(be)){const Je=this._rootNodeFocusListenerCount.get(be);Je>1?this._rootNodeFocusListenerCount.set(be,Je-1):(be.removeEventListener("focus",this._rootNodeFocusAndBlurListener,ii),be.removeEventListener("blur",this._rootNodeFocusAndBlurListener,ii),this._rootNodeFocusListenerCount.delete(be))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(Gt,be,Je){this._setClasses(Gt,be),this._emitOrigin(Je.subject,be),this._lastFocusOrigin=be}_getClosestElementsInfo(Gt){const be=[];return this._elementInfo.forEach((Je,Pi)=>{(Pi===Gt||Je.checkChildren&&Pi.contains(Gt))&&be.push([Pi,Je])}),be}}return kt.\u0275fac=function(Gt){return new(Gt||kt)(a.LFG(a.R0b),a.LFG(ct.t4),a.LFG(Mi),a.LFG(T.K0,8),a.LFG(xe,8))},kt.\u0275prov=a.Yz7({factory:function(){return new kt(a.LFG(a.R0b),a.LFG(ct.t4),a.LFG(Mi),a.LFG(T.K0,8),a.LFG(xe,8))},token:kt,providedIn:"root"}),kt})(),Zi=(()=>{class kt{constructor(Gt,be){this._elementRef=Gt,this._focusMonitor=be,this.cdkFocusChange=new a.vpe}ngAfterViewInit(){const Gt=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(Gt,1===Gt.nodeType&&Gt.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(be=>this.cdkFocusChange.emit(be))}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}}return kt.\u0275fac=function(Gt){return new(Gt||kt)(a.Y36(a.SBq),a.Y36(yi))},kt.\u0275dir=a.lG2({type:kt,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"}}),kt})();const ji="cdk-high-contrast-black-on-white",Ui="cdk-high-contrast-white-on-black",Xi="cdk-high-contrast-active";let Re=(()=>{class kt{constructor(Gt,be){this._platform=Gt,this._document=be}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const Gt=this._document.createElement("div");Gt.style.backgroundColor="rgb(1,2,3)",Gt.style.position="absolute",this._document.body.appendChild(Gt);const be=this._document.defaultView||window,Je=be&&be.getComputedStyle?be.getComputedStyle(Gt):null,Pi=(Je&&Je.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(Gt),Pi){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const Gt=this._document.body.classList;Gt.remove(Xi),Gt.remove(ji),Gt.remove(Ui),this._hasCheckedHighContrastMode=!0;const be=this.getHighContrastMode();1===be?(Gt.add(Xi),Gt.add(ji)):2===be&&(Gt.add(Xi),Gt.add(Ui))}}}return kt.\u0275fac=function(Gt){return new(Gt||kt)(a.LFG(ct.t4),a.LFG(T.K0))},kt.\u0275prov=a.Yz7({factory:function(){return new kt(a.LFG(ct.t4),a.LFG(T.K0))},token:kt,providedIn:"root"}),kt})(),Me=(()=>{class kt{constructor(Gt){Gt._applyBodyHighContrastModeCssClasses()}}return kt.\u0275fac=function(Gt){return new(Gt||kt)(a.LFG(Re))},kt.\u0275mod=a.oAB({type:kt}),kt.\u0275inj=a.cJS({imports:[[ct.ud,wt.Q8]]}),kt})()},12281:(B,U,v)=>{"use strict";v.d(U,{vT:()=>r,Is:()=>n});var T=v(42741),a=v(16274);const e=new T.OlP("cdk-dir-doc",{providedIn:"root",factory:function(){return(0,T.f3M)(a.K0)}});let n=(()=>{class p{constructor(I){if(this.value="ltr",this.change=new T.vpe,I){const k=I.documentElement?I.documentElement.dir:null,Y=(I.body?I.body.dir:null)||k;this.value="ltr"===Y||"rtl"===Y?Y:"ltr"}}ngOnDestroy(){this.change.complete()}}return p.\u0275fac=function(I){return new(I||p)(T.LFG(e,8))},p.\u0275prov=T.Yz7({factory:function(){return new p(T.LFG(e,8))},token:p,providedIn:"root"}),p})(),r=(()=>{class p{}return p.\u0275fac=function(I){return new(I||p)},p.\u0275mod=T.oAB({type:p}),p.\u0275inj=T.cJS({}),p})()},98950:(B,U,v)=>{"use strict";v.d(U,{P3:()=>r,Ov:()=>I,A8:()=>k,yy:()=>p,eX:()=>b,k:()=>Y,Z9:()=>o});var T=v(15648),a=v(267),e=v(6006),t=v(42741);function o(X){return X&&"function"==typeof X.connect}class r extends class{}{constructor(it){super(),this._data=it}connect(){return(0,T.b)(this._data)?this._data:(0,a.of)(this._data)}disconnect(){}}class p{applyChanges(it,rt,ct,wt,At){it.forEachOperation((Rt,Dt,pt)=>{let st,ot;if(null==Rt.previousIndex){const nt=ct(Rt,Dt,pt);st=rt.createEmbeddedView(nt.templateRef,nt.context,nt.index),ot=1}else null==pt?(rt.remove(Dt),ot=3):(st=rt.get(Dt),rt.move(st,pt),ot=2);At&&At({context:null==st?void 0:st.context,operation:ot,record:Rt})})}detach(){}}class b{constructor(){this.viewCacheSize=20,this._viewCache=[]}applyChanges(it,rt,ct,wt,At){it.forEachOperation((Rt,Dt,pt)=>{let st,ot;null==Rt.previousIndex?(st=this._insertView(()=>ct(Rt,Dt,pt),pt,rt,wt(Rt)),ot=st?1:0):null==pt?(this._detachAndCacheView(Dt,rt),ot=3):(st=this._moveView(Dt,pt,rt,wt(Rt)),ot=2),At&&At({context:null==st?void 0:st.context,operation:ot,record:Rt})})}detach(){for(const it of this._viewCache)it.destroy();this._viewCache=[]}_insertView(it,rt,ct,wt){const At=this._insertViewFromCache(rt,ct);if(At)return void(At.context.$implicit=wt);const Rt=it();return ct.createEmbeddedView(Rt.templateRef,Rt.context,Rt.index)}_detachAndCacheView(it,rt){const ct=rt.detach(it);this._maybeCacheView(ct,rt)}_moveView(it,rt,ct,wt){const At=ct.get(it);return ct.move(At,rt),At.context.$implicit=wt,At}_maybeCacheView(it,rt){if(this._viewCache.length<this.viewCacheSize)this._viewCache.push(it);else{const ct=rt.indexOf(it);-1===ct?it.destroy():rt.remove(ct)}}_insertViewFromCache(it,rt){const ct=this._viewCache.pop();return ct&&rt.insert(ct,it),ct||null}}class I{constructor(it=!1,rt,ct=!0){this._multiple=it,this._emitChanges=ct,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new e.xQ,rt&&rt.length&&(it?rt.forEach(wt=>this._markSelected(wt)):this._markSelected(rt[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...it){this._verifyValueAssignment(it),it.forEach(rt=>this._markSelected(rt)),this._emitChangeEvent()}deselect(...it){this._verifyValueAssignment(it),it.forEach(rt=>this._unmarkSelected(rt)),this._emitChangeEvent()}toggle(it){this.isSelected(it)?this.deselect(it):this.select(it)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(it){return this._selection.has(it)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(it){this._multiple&&this.selected&&this._selected.sort(it)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(it){this.isSelected(it)||(this._multiple||this._unmarkAll(),this._selection.add(it),this._emitChanges&&this._selectedToEmit.push(it))}_unmarkSelected(it){this.isSelected(it)&&(this._selection.delete(it),this._emitChanges&&this._deselectedToEmit.push(it))}_unmarkAll(){this.isEmpty()||this._selection.forEach(it=>this._unmarkSelected(it))}_verifyValueAssignment(it){}}let k=(()=>{class X{constructor(){this._listeners=[]}notify(rt,ct){for(let wt of this._listeners)wt(rt,ct)}listen(rt){return this._listeners.push(rt),()=>{this._listeners=this._listeners.filter(ct=>rt!==ct)}}ngOnDestroy(){this._listeners=[]}}return X.\u0275fac=function(rt){return new(rt||X)},X.\u0275prov=t.Yz7({factory:function(){return new X},token:X,providedIn:"root"}),X})();const Y=new t.OlP("_ViewRepeater")},15911:(B,U,v)=>{"use strict";v.d(U,{A:()=>ai,zL:()=>p,ZH:()=>a,jx:()=>r,yY:()=>ot,JH:()=>Rt,uR:()=>it,K5:()=>n,hY:()=>x,Sd:()=>rt,oh:()=>ct,b2:()=>gr,MW:()=>ni,aO:()=>Ne,VM:()=>X,Ku:()=>Y,SV:()=>At,JU:()=>o,L_:()=>k,Mf:()=>e,LH:()=>wt,Z:()=>Ee,xE:()=>nt,Vb:()=>ps});const a=8,e=9,n=13,o=16,r=17,p=18,x=27,k=32,Y=33,X=34,it=35,rt=36,ct=37,wt=38,At=39,Rt=40,ot=46,nt=48,Ne=57,ai=65,Ee=90,ni=91,gr=224;function ps(No,...Ao){return Ao.length?Ao.some(rs=>No[rs]):No.altKey||No.shiftKey||No.ctrlKey||No.metaKey}},52514:(B,U,v)=>{"use strict";v.d(U,{Yg:()=>Rt,u3:()=>pt});var T=v(42741),a=v(99957),e=v(6006),t=v(52032),n=v(38895),o=v(93948),r=v(59917),p=v(8055),b=v(89006),I=v(88561),x=v(63543),k=v(27194),Y=v(66899);const it=new Set;let rt,ct=(()=>{class st{constructor(nt){this._platform=nt,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):At}matchMedia(nt){return(this._platform.WEBKIT||this._platform.BLINK)&&function(st){if(!it.has(st))try{rt||(rt=document.createElement("style"),rt.setAttribute("type","text/css"),document.head.appendChild(rt)),rt.sheet&&(rt.sheet.insertRule(`@media ${st} {body{ }}`,0),it.add(st))}catch(ot){console.error(ot)}}(nt),this._matchMedia(nt)}}return st.\u0275fac=function(nt){return new(nt||st)(T.LFG(Y.t4))},st.\u0275prov=T.Yz7({factory:function(){return new st(T.LFG(Y.t4))},token:st,providedIn:"root"}),st})();function At(st){return{matches:"all"===st||""===st,media:st,addListener:()=>{},removeListener:()=>{}}}let Rt=(()=>{class st{constructor(nt,Tt){this._mediaMatcher=nt,this._zone=Tt,this._queries=new Map,this._destroySubject=new e.xQ}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(nt){return Dt((0,a.Eq)(nt)).some(Ct=>this._registerQuery(Ct).mql.matches)}observe(nt){const Ct=Dt((0,a.Eq)(nt)).map(gt=>this._registerQuery(gt).observable);let yt=(0,t.aj)(Ct);return yt=(0,n.z)(yt.pipe((0,r.q)(1)),yt.pipe((0,p.T)(1),(0,b.b)(0))),yt.pipe((0,I.U)(gt=>{const _t={matches:!1,breakpoints:{}};return gt.forEach(({matches:Jt,query:Pt})=>{_t.matches=_t.matches||Jt,_t.breakpoints[Pt]=Jt}),_t}))}_registerQuery(nt){if(this._queries.has(nt))return this._queries.get(nt);const Tt=this._mediaMatcher.matchMedia(nt),yt={observable:new o.y(gt=>{const _t=Jt=>this._zone.run(()=>gt.next(Jt));return Tt.addListener(_t),()=>{Tt.removeListener(_t)}}).pipe((0,x.O)(Tt),(0,I.U)(({matches:gt})=>({query:nt,matches:gt})),(0,k.R)(this._destroySubject)),mql:Tt};return this._queries.set(nt,yt),yt}}return st.\u0275fac=function(nt){return new(nt||st)(T.LFG(ct),T.LFG(T.R0b))},st.\u0275prov=T.Yz7({factory:function(){return new st(T.LFG(ct),T.LFG(T.R0b))},token:st,providedIn:"root"}),st})();function Dt(st){return st.map(ot=>ot.split(",")).reduce((ot,nt)=>ot.concat(nt)).map(ot=>ot.trim())}const pt={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"}},34529:(B,U,v)=>{"use strict";v.d(U,{wD:()=>p,yq:()=>r,Q8:()=>b});var T=v(99957),a=v(42741),e=v(93948),t=v(6006),n=v(89006);let o=(()=>{class I{create(k){return"undefined"==typeof MutationObserver?null:new MutationObserver(k)}}return I.\u0275fac=function(k){return new(k||I)},I.\u0275prov=a.Yz7({factory:function(){return new I},token:I,providedIn:"root"}),I})(),r=(()=>{class I{constructor(k){this._mutationObserverFactory=k,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((k,Y)=>this._cleanupObserver(Y))}observe(k){const Y=(0,T.fI)(k);return new e.y(X=>{const rt=this._observeElement(Y).subscribe(X);return()=>{rt.unsubscribe(),this._unobserveElement(Y)}})}_observeElement(k){if(this._observedElements.has(k))this._observedElements.get(k).count++;else{const Y=new t.xQ,X=this._mutationObserverFactory.create(it=>Y.next(it));X&&X.observe(k,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(k,{observer:X,stream:Y,count:1})}return this._observedElements.get(k).stream}_unobserveElement(k){this._observedElements.has(k)&&(this._observedElements.get(k).count--,this._observedElements.get(k).count||this._cleanupObserver(k))}_cleanupObserver(k){if(this._observedElements.has(k)){const{observer:Y,stream:X}=this._observedElements.get(k);Y&&Y.disconnect(),X.complete(),this._observedElements.delete(k)}}}return I.\u0275fac=function(k){return new(k||I)(a.LFG(o))},I.\u0275prov=a.Yz7({factory:function(){return new I(a.LFG(o))},token:I,providedIn:"root"}),I})(),p=(()=>{class I{constructor(k,Y,X){this._contentObserver=k,this._elementRef=Y,this._ngZone=X,this.event=new a.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(k){this._disabled=(0,T.Ig)(k),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(k){this._debounce=(0,T.su)(k),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const k=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?k.pipe((0,n.b)(this.debounce)):k).subscribe(this.event)})}_unsubscribe(){var k;null===(k=this._currentSubscription)||void 0===k||k.unsubscribe()}}return I.\u0275fac=function(k){return new(k||I)(a.Y36(r),a.Y36(a.SBq),a.Y36(a.R0b))},I.\u0275dir=a.lG2({type:I,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),I})(),b=(()=>{class I{}return I.\u0275fac=function(k){return new(k||I)},I.\u0275mod=a.oAB({type:I}),I.\u0275inj=a.cJS({providers:[o]}),I})()},68101:(B,U,v)=>{"use strict";v.d(U,{pI:()=>hi,xu:()=>ie,_G:()=>re,aV:()=>Oe,X_:()=>Ct,Xj:()=>Ce,U8:()=>ge});var T=v(54847),a=v(42741),e=v(66899),t=v(12281),n=v(16274),o=v(99957),r=v(62718),p=v(6006),b=v(39734),I=v(30636),x=v(28744);class Y{constructor($,at){this.predicate=$,this.inclusive=at}call($,at){return at.subscribe(new X($,this.predicate,this.inclusive))}}class X extends x.L{constructor($,at,zt){super($),this.predicate=at,this.inclusive=zt,this.index=0}_next($){const at=this.destination;let zt;try{zt=this.predicate($,this.index++)}catch(Qt){return void at.error(Qt)}this.nextOrComplete($,zt)}nextOrComplete($,at){const zt=this.destination;Boolean(at)?zt.next($):(this.inclusive&&zt.next($),zt.complete())}}var it=v(59917),rt=v(27194),ct=v(15911);const wt=(0,e.Mq)();class At{constructor($,at){this._viewportRuler=$,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=at}attach(){}enable(){if(this._canBeEnabled()){const $=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=$.style.left||"",this._previousHTMLStyles.top=$.style.top||"",$.style.left=(0,o.HM)(-this._previousScrollPosition.left),$.style.top=(0,o.HM)(-this._previousScrollPosition.top),$.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const $=this._document.documentElement,zt=$.style,Qt=this._document.body.style,ye=zt.scrollBehavior||"",Ee=Qt.scrollBehavior||"";this._isEnabled=!1,zt.left=this._previousHTMLStyles.left,zt.top=this._previousHTMLStyles.top,$.classList.remove("cdk-global-scrollblock"),wt&&(zt.scrollBehavior=Qt.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),wt&&(zt.scrollBehavior=ye,Qt.scrollBehavior=Ee)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const at=this._document.body,zt=this._viewportRuler.getViewportSize();return at.scrollHeight>zt.height||at.scrollWidth>zt.width}}class Dt{constructor($,at,zt,Qt){this._scrollDispatcher=$,this._ngZone=at,this._viewportRuler=zt,this._config=Qt,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach($){this._overlayRef=$}enable(){if(this._scrollSubscription)return;const $=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=$.subscribe(()=>{const at=this._viewportRuler.getViewportScrollPosition().top;Math.abs(at-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=$.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class pt{enable(){}disable(){}attach(){}}function st(Zt,$){return $.some(at=>Zt.bottom<at.top||Zt.top>at.bottom||Zt.right<at.left||Zt.left>at.right)}function ot(Zt,$){return $.some(at=>Zt.top<at.top||Zt.bottom>at.bottom||Zt.left<at.left||Zt.right>at.right)}class nt{constructor($,at,zt,Qt){this._scrollDispatcher=$,this._viewportRuler=at,this._ngZone=zt,this._config=Qt,this._scrollSubscription=null}attach($){this._overlayRef=$}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const at=this._overlayRef.overlayElement.getBoundingClientRect(),{width:zt,height:Qt}=this._viewportRuler.getViewportSize();st(at,[{width:zt,height:Qt,bottom:Qt,right:zt,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Tt=(()=>{class Zt{constructor(at,zt,Qt,ye){this._scrollDispatcher=at,this._viewportRuler=zt,this._ngZone=Qt,this.noop=()=>new pt,this.close=Ee=>new Dt(this._scrollDispatcher,this._ngZone,this._viewportRuler,Ee),this.block=()=>new At(this._viewportRuler,this._document),this.reposition=Ee=>new nt(this._scrollDispatcher,this._viewportRuler,this._ngZone,Ee),this._document=ye}}return Zt.\u0275fac=function(at){return new(at||Zt)(a.LFG(T.mF),a.LFG(T.rL),a.LFG(a.R0b),a.LFG(n.K0))},Zt.\u0275prov=a.Yz7({factory:function(){return new Zt(a.LFG(T.mF),a.LFG(T.rL),a.LFG(a.R0b),a.LFG(n.K0))},token:Zt,providedIn:"root"}),Zt})();class Ct{constructor($){if(this.scrollStrategy=new pt,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,$){const at=Object.keys($);for(const zt of at)void 0!==$[zt]&&(this[zt]=$[zt])}}}class yt{constructor($,at,zt,Qt,ye){this.offsetX=zt,this.offsetY=Qt,this.panelClass=ye,this.originX=$.originX,this.originY=$.originY,this.overlayX=at.overlayX,this.overlayY=at.overlayY}}class _t{constructor($,at){this.connectionPair=$,this.scrollableViewProperties=at}}let oe=(()=>{class Zt{constructor(at){this._attachedOverlays=[],this._document=at}ngOnDestroy(){this.detach()}add(at){this.remove(at),this._attachedOverlays.push(at)}remove(at){const zt=this._attachedOverlays.indexOf(at);zt>-1&&this._attachedOverlays.splice(zt,1),0===this._attachedOverlays.length&&this.detach()}}return Zt.\u0275fac=function(at){return new(at||Zt)(a.LFG(n.K0))},Zt.\u0275prov=a.Yz7({factory:function(){return new Zt(a.LFG(n.K0))},token:Zt,providedIn:"root"}),Zt})(),Ne=(()=>{class Zt extends oe{constructor(at){super(at),this._keydownListener=zt=>{const Qt=this._attachedOverlays;for(let ye=Qt.length-1;ye>-1;ye--)if(Qt[ye]._keydownEvents.observers.length>0){Qt[ye]._keydownEvents.next(zt);break}}}add(at){super.add(at),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return Zt.\u0275fac=function(at){return new(at||Zt)(a.LFG(n.K0))},Zt.\u0275prov=a.Yz7({factory:function(){return new Zt(a.LFG(n.K0))},token:Zt,providedIn:"root"}),Zt})(),Xe=(()=>{class Zt extends oe{constructor(at,zt){super(at),this._platform=zt,this._cursorStyleIsSet=!1,this._pointerDownListener=Qt=>{this._pointerDownEventTarget=(0,e.sA)(Qt)},this._clickListener=Qt=>{const ye=(0,e.sA)(Qt),Ee="click"===Qt.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:ye;this._pointerDownEventTarget=null;const ni=this._attachedOverlays.slice();for(let Di=ni.length-1;Di>-1;Di--){const Mi=ni[Di];if(!(Mi._outsidePointerEvents.observers.length<1)&&Mi.hasAttached()){if(Mi.overlayElement.contains(ye)||Mi.overlayElement.contains(Ee))break;Mi._outsidePointerEvents.next(Qt)}}}}add(at){if(super.add(at),!this._isAttached){const zt=this._document.body;zt.addEventListener("pointerdown",this._pointerDownListener,!0),zt.addEventListener("click",this._clickListener,!0),zt.addEventListener("auxclick",this._clickListener,!0),zt.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=zt.style.cursor,zt.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const at=this._document.body;at.removeEventListener("pointerdown",this._pointerDownListener,!0),at.removeEventListener("click",this._clickListener,!0),at.removeEventListener("auxclick",this._clickListener,!0),at.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(at.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return Zt.\u0275fac=function(at){return new(at||Zt)(a.LFG(n.K0),a.LFG(e.t4))},Zt.\u0275prov=a.Yz7({factory:function(){return new Zt(a.LFG(n.K0),a.LFG(e.t4))},token:Zt,providedIn:"root"}),Zt})(),Ce=(()=>{class Zt{constructor(at,zt){this._platform=zt,this._document=at}ngOnDestroy(){const at=this._containerElement;at&&at.parentNode&&at.parentNode.removeChild(at)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const at="cdk-overlay-container";if(this._platform.isBrowser||(0,e.Oy)()){const Qt=this._document.querySelectorAll(`.${at}[platform="server"], .${at}[platform="test"]`);for(let ye=0;ye<Qt.length;ye++)Qt[ye].parentNode.removeChild(Qt[ye])}const zt=this._document.createElement("div");zt.classList.add(at),(0,e.Oy)()?zt.setAttribute("platform","test"):this._platform.isBrowser||zt.setAttribute("platform","server"),this._document.body.appendChild(zt),this._containerElement=zt}}return Zt.\u0275fac=function(at){return new(at||Zt)(a.LFG(n.K0),a.LFG(e.t4))},Zt.\u0275prov=a.Yz7({factory:function(){return new Zt(a.LFG(n.K0),a.LFG(e.t4))},token:Zt,providedIn:"root"}),Zt})();class Ze{constructor($,at,zt,Qt,ye,Ee,ni,Di,Mi){this._portalOutlet=$,this._host=at,this._pane=zt,this._config=Qt,this._ngZone=ye,this._keyboardDispatcher=Ee,this._document=ni,this._location=Di,this._outsideClickDispatcher=Mi,this._backdropElement=null,this._backdropClick=new p.xQ,this._attachments=new p.xQ,this._detachments=new p.xQ,this._locationChanges=b.w.EMPTY,this._backdropClickHandler=vi=>this._backdropClick.next(vi),this._keydownEvents=new p.xQ,this._outsidePointerEvents=new p.xQ,Qt.scrollStrategy&&(this._scrollStrategy=Qt.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=Qt.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach($){let at=this._portalOutlet.attach($);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,it.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),at}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const $=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),$}dispose(){const $=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,$&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy($){$!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=$,this.hasAttached()&&($.attach(this),this.updatePosition()))}updateSize($){this._config=Object.assign(Object.assign({},this._config),$),this._updateElementSize()}setDirection($){this._config=Object.assign(Object.assign({},this._config),{direction:$}),this._updateElementDirection()}addPanelClass($){this._pane&&this._toggleClasses(this._pane,$,!0)}removePanelClass($){this._pane&&this._toggleClasses(this._pane,$,!1)}getDirection(){const $=this._config.direction;return $?"string"==typeof $?$:$.value:"ltr"}updateScrollStrategy($){$!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=$,this.hasAttached()&&($.attach(this),$.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const $=this._pane.style;$.width=(0,o.HM)(this._config.width),$.height=(0,o.HM)(this._config.height),$.minWidth=(0,o.HM)(this._config.minWidth),$.minHeight=(0,o.HM)(this._config.minHeight),$.maxWidth=(0,o.HM)(this._config.maxWidth),$.maxHeight=(0,o.HM)(this._config.maxHeight)}_togglePointerEvents($){this._pane.style.pointerEvents=$?"":"none"}_attachBackdrop(){const $="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add($)})}):this._backdropElement.classList.add($)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const $=this._backdropElement;if(!$)return;let at;const zt=()=>{$&&($.removeEventListener("click",this._backdropClickHandler),$.removeEventListener("transitionend",zt),this._disposeBackdrop($)),this._config.backdropClass&&this._toggleClasses($,this._config.backdropClass,!1),clearTimeout(at)};$.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{$.addEventListener("transitionend",zt)}),$.style.pointerEvents="none",at=this._ngZone.runOutsideAngular(()=>setTimeout(zt,500))}_toggleClasses($,at,zt){const Qt=$.classList;(0,o.Eq)(at).forEach(ye=>{ye&&(zt?Qt.add(ye):Qt.remove(ye))})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const $=this._ngZone.onStable.pipe((0,rt.R)((0,I.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),$.unsubscribe())})})}_disposeScrollStrategy(){const $=this._scrollStrategy;$&&($.disable(),$.detach&&$.detach())}_disposeBackdrop($){$&&($.parentNode&&$.parentNode.removeChild($),this._backdropElement===$&&(this._backdropElement=null))}}const we="cdk-overlay-connected-position-bounding-box",ai=/([A-Za-z%]+)$/;class re{constructor($,at,zt,Qt,ye){this._viewportRuler=at,this._document=zt,this._platform=Qt,this._overlayContainer=ye,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new p.xQ,this._resizeSubscription=b.w.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin($)}get positions(){return this._preferredPositions}attach($){this._validatePositions(),$.hostElement.classList.add(we),this._overlayRef=$,this._boundingBox=$.hostElement,this._pane=$.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const $=this._originRect,at=this._overlayRect,zt=this._viewportRect,Qt=[];let ye;for(let Ee of this._preferredPositions){let ni=this._getOriginPoint($,Ee),Di=this._getOverlayPoint(ni,at,Ee),Mi=this._getOverlayFit(Di,at,zt,Ee);if(Mi.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(Ee,ni);this._canFitWithFlexibleDimensions(Mi,Di,zt)?Qt.push({position:Ee,origin:ni,overlayRect:at,boundingBoxRect:this._calculateBoundingBoxRect(ni,Ee)}):(!ye||ye.overlayFit.visibleArea<Mi.visibleArea)&&(ye={overlayFit:Mi,overlayPoint:Di,originPoint:ni,position:Ee,overlayRect:at})}if(Qt.length){let Ee=null,ni=-1;for(const Di of Qt){const Mi=Di.boundingBoxRect.width*Di.boundingBoxRect.height*(Di.position.weight||1);Mi>ni&&(ni=Mi,Ee=Di)}return this._isPushed=!1,void this._applyPosition(Ee.position,Ee.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(ye.position,ye.originPoint);this._applyPosition(ye.position,ye.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&ce(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(we),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const $=this._lastPosition||this._preferredPositions[0],at=this._getOriginPoint(this._originRect,$);this._applyPosition($,at)}}withScrollableContainers($){return this._scrollables=$,this}withPositions($){return this._preferredPositions=$,-1===$.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin($){return this._viewportMargin=$,this}withFlexibleDimensions($=!0){return this._hasFlexibleDimensions=$,this}withGrowAfterOpen($=!0){return this._growAfterOpen=$,this}withPush($=!0){return this._canPush=$,this}withLockedPosition($=!0){return this._positionLocked=$,this}setOrigin($){return this._origin=$,this}withDefaultOffsetX($){return this._offsetX=$,this}withDefaultOffsetY($){return this._offsetY=$,this}withTransformOriginOn($){return this._transformOriginSelector=$,this}_getOriginPoint($,at){let zt,Qt;if("center"==at.originX)zt=$.left+$.width/2;else{const ye=this._isRtl()?$.right:$.left,Ee=this._isRtl()?$.left:$.right;zt="start"==at.originX?ye:Ee}return Qt="center"==at.originY?$.top+$.height/2:"top"==at.originY?$.top:$.bottom,{x:zt,y:Qt}}_getOverlayPoint($,at,zt){let Qt,ye;return Qt="center"==zt.overlayX?-at.width/2:"start"===zt.overlayX?this._isRtl()?-at.width:0:this._isRtl()?0:-at.width,ye="center"==zt.overlayY?-at.height/2:"top"==zt.overlayY?0:-at.height,{x:$.x+Qt,y:$.y+ye}}_getOverlayFit($,at,zt,Qt){const ye=qe(at);let{x:Ee,y:ni}=$,Di=this._getOffset(Qt,"x"),Mi=this._getOffset(Qt,"y");Di&&(Ee+=Di),Mi&&(ni+=Mi);let Ue=0-ni,Ke=ni+ye.height-zt.height,ne=this._subtractOverflows(ye.width,0-Ee,Ee+ye.width-zt.width),xe=this._subtractOverflows(ye.height,Ue,Ke),ii=ne*xe;return{visibleArea:ii,isCompletelyWithinViewport:ye.width*ye.height===ii,fitsInViewportVertically:xe===ye.height,fitsInViewportHorizontally:ne==ye.width}}_canFitWithFlexibleDimensions($,at,zt){if(this._hasFlexibleDimensions){const Qt=zt.bottom-at.y,ye=zt.right-at.x,Ee=Pe(this._overlayRef.getConfig().minHeight),ni=Pe(this._overlayRef.getConfig().minWidth),Mi=$.fitsInViewportHorizontally||null!=ni&&ni<=ye;return($.fitsInViewportVertically||null!=Ee&&Ee<=Qt)&&Mi}return!1}_pushOverlayOnScreen($,at,zt){if(this._previousPushAmount&&this._positionLocked)return{x:$.x+this._previousPushAmount.x,y:$.y+this._previousPushAmount.y};const Qt=qe(at),ye=this._viewportRect,Ee=Math.max($.x+Qt.width-ye.width,0),ni=Math.max($.y+Qt.height-ye.height,0),Di=Math.max(ye.top-zt.top-$.y,0),Mi=Math.max(ye.left-zt.left-$.x,0);let vi=0,pi=0;return vi=Qt.width<=ye.width?Mi||-Ee:$.x<this._viewportMargin?ye.left-zt.left-$.x:0,pi=Qt.height<=ye.height?Di||-ni:$.y<this._viewportMargin?ye.top-zt.top-$.y:0,this._previousPushAmount={x:vi,y:pi},{x:$.x+vi,y:$.y+pi}}_applyPosition($,at){if(this._setTransformOrigin($),this._setOverlayElementStyles(at,$),this._setBoundingBoxStyles(at,$),$.panelClass&&this._addPanelClasses($.panelClass),this._lastPosition=$,this._positionChanges.observers.length){const zt=this._getScrollVisibility(),Qt=new _t($,zt);this._positionChanges.next(Qt)}this._isInitialRender=!1}_setTransformOrigin($){if(!this._transformOriginSelector)return;const at=this._boundingBox.querySelectorAll(this._transformOriginSelector);let zt,Qt=$.overlayY;zt="center"===$.overlayX?"center":this._isRtl()?"start"===$.overlayX?"right":"left":"start"===$.overlayX?"left":"right";for(let ye=0;ye<at.length;ye++)at[ye].style.transformOrigin=`${zt} ${Qt}`}_calculateBoundingBoxRect($,at){const zt=this._viewportRect,Qt=this._isRtl();let ye,Ee,ni,vi,pi,Ue;if("top"===at.overlayY)Ee=$.y,ye=zt.height-Ee+this._viewportMargin;else if("bottom"===at.overlayY)ni=zt.height-$.y+2*this._viewportMargin,ye=zt.height-ni+this._viewportMargin;else{const Ke=Math.min(zt.bottom-$.y+zt.top,$.y),ne=this._lastBoundingBoxSize.height;ye=2*Ke,Ee=$.y-Ke,ye>ne&&!this._isInitialRender&&!this._growAfterOpen&&(Ee=$.y-ne/2)}if("end"===at.overlayX&&!Qt||"start"===at.overlayX&&Qt)Ue=zt.width-$.x+this._viewportMargin,vi=$.x-this._viewportMargin;else if("start"===at.overlayX&&!Qt||"end"===at.overlayX&&Qt)pi=$.x,vi=zt.right-$.x;else{const Ke=Math.min(zt.right-$.x+zt.left,$.x),ne=this._lastBoundingBoxSize.width;vi=2*Ke,pi=$.x-Ke,vi>ne&&!this._isInitialRender&&!this._growAfterOpen&&(pi=$.x-ne/2)}return{top:Ee,left:pi,bottom:ni,right:Ue,width:vi,height:ye}}_setBoundingBoxStyles($,at){const zt=this._calculateBoundingBoxRect($,at);!this._isInitialRender&&!this._growAfterOpen&&(zt.height=Math.min(zt.height,this._lastBoundingBoxSize.height),zt.width=Math.min(zt.width,this._lastBoundingBoxSize.width));const Qt={};if(this._hasExactPosition())Qt.top=Qt.left="0",Qt.bottom=Qt.right=Qt.maxHeight=Qt.maxWidth="",Qt.width=Qt.height="100%";else{const ye=this._overlayRef.getConfig().maxHeight,Ee=this._overlayRef.getConfig().maxWidth;Qt.height=(0,o.HM)(zt.height),Qt.top=(0,o.HM)(zt.top),Qt.bottom=(0,o.HM)(zt.bottom),Qt.width=(0,o.HM)(zt.width),Qt.left=(0,o.HM)(zt.left),Qt.right=(0,o.HM)(zt.right),Qt.alignItems="center"===at.overlayX?"center":"end"===at.overlayX?"flex-end":"flex-start",Qt.justifyContent="center"===at.overlayY?"center":"bottom"===at.overlayY?"flex-end":"flex-start",ye&&(Qt.maxHeight=(0,o.HM)(ye)),Ee&&(Qt.maxWidth=(0,o.HM)(Ee))}this._lastBoundingBoxSize=zt,ce(this._boundingBox.style,Qt)}_resetBoundingBoxStyles(){ce(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){ce(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles($,at){const zt={},Qt=this._hasExactPosition(),ye=this._hasFlexibleDimensions,Ee=this._overlayRef.getConfig();if(Qt){const vi=this._viewportRuler.getViewportScrollPosition();ce(zt,this._getExactOverlayY(at,$,vi)),ce(zt,this._getExactOverlayX(at,$,vi))}else zt.position="static";let ni="",Di=this._getOffset(at,"x"),Mi=this._getOffset(at,"y");Di&&(ni+=`translateX(${Di}px) `),Mi&&(ni+=`translateY(${Mi}px)`),zt.transform=ni.trim(),Ee.maxHeight&&(Qt?zt.maxHeight=(0,o.HM)(Ee.maxHeight):ye&&(zt.maxHeight="")),Ee.maxWidth&&(Qt?zt.maxWidth=(0,o.HM)(Ee.maxWidth):ye&&(zt.maxWidth="")),ce(this._pane.style,zt)}_getExactOverlayY($,at,zt){let Qt={top:"",bottom:""},ye=this._getOverlayPoint(at,this._overlayRect,$);this._isPushed&&(ye=this._pushOverlayOnScreen(ye,this._overlayRect,zt));let Ee=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return ye.y-=Ee,"bottom"===$.overlayY?Qt.bottom=this._document.documentElement.clientHeight-(ye.y+this._overlayRect.height)+"px":Qt.top=(0,o.HM)(ye.y),Qt}_getExactOverlayX($,at,zt){let Ee,Qt={left:"",right:""},ye=this._getOverlayPoint(at,this._overlayRect,$);return this._isPushed&&(ye=this._pushOverlayOnScreen(ye,this._overlayRect,zt)),Ee=this._isRtl()?"end"===$.overlayX?"left":"right":"end"===$.overlayX?"right":"left","right"===Ee?Qt.right=this._document.documentElement.clientWidth-(ye.x+this._overlayRect.width)+"px":Qt.left=(0,o.HM)(ye.x),Qt}_getScrollVisibility(){const $=this._getOriginRect(),at=this._pane.getBoundingClientRect(),zt=this._scrollables.map(Qt=>Qt.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:ot($,zt),isOriginOutsideView:st($,zt),isOverlayClipped:ot(at,zt),isOverlayOutsideView:st(at,zt)}}_subtractOverflows($,...at){return at.reduce((zt,Qt)=>zt-Math.max(Qt,0),$)}_getNarrowedViewportRect(){const $=this._document.documentElement.clientWidth,at=this._document.documentElement.clientHeight,zt=this._viewportRuler.getViewportScrollPosition();return{top:zt.top+this._viewportMargin,left:zt.left+this._viewportMargin,right:zt.left+$-this._viewportMargin,bottom:zt.top+at-this._viewportMargin,width:$-2*this._viewportMargin,height:at-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset($,at){return"x"===at?null==$.offsetX?this._offsetX:$.offsetX:null==$.offsetY?this._offsetY:$.offsetY}_validatePositions(){}_addPanelClasses($){this._pane&&(0,o.Eq)($).forEach(at=>{""!==at&&-1===this._appliedPanelClasses.indexOf(at)&&(this._appliedPanelClasses.push(at),this._pane.classList.add(at))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach($=>{this._pane.classList.remove($)}),this._appliedPanelClasses=[])}_getOriginRect(){const $=this._origin;if($ instanceof a.SBq)return $.nativeElement.getBoundingClientRect();if($ instanceof Element)return $.getBoundingClientRect();const at=$.width||0,zt=$.height||0;return{top:$.y,bottom:$.y+zt,left:$.x,right:$.x+at,height:zt,width:at}}}function ce(Zt,$){for(let at in $)$.hasOwnProperty(at)&&(Zt[at]=$[at]);return Zt}function Pe(Zt){if("number"!=typeof Zt&&null!=Zt){const[$,at]=Zt.split(ai);return at&&"px"!==at?null:parseFloat($)}return Zt||null}function qe(Zt){return{top:Math.floor(Zt.top),right:Math.floor(Zt.right),bottom:Math.floor(Zt.bottom),left:Math.floor(Zt.left),width:Math.floor(Zt.width),height:Math.floor(Zt.height)}}class oi{constructor($,at,zt,Qt,ye,Ee,ni){this._preferredPositions=[],this._positionStrategy=new re(zt,Qt,ye,Ee,ni).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition($,at),this.onPositionChange=this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach($){this._overlayRef=$,this._positionStrategy.attach($),this._direction&&($.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers($){this._positionStrategy.withScrollableContainers($)}withFallbackPosition($,at,zt,Qt){const ye=new yt($,at,zt,Qt);return this._preferredPositions.push(ye),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection($){return this._overlayRef?this._overlayRef.setDirection($):this._direction=$,this}withOffsetX($){return this._positionStrategy.withDefaultOffsetX($),this}withOffsetY($){return this._positionStrategy.withDefaultOffsetY($),this}withLockedPosition($){return this._positionStrategy.withLockedPosition($),this}withPositions($){return this._preferredPositions=$.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin($){return this._positionStrategy.setOrigin($),this}}const wi="cdk-global-overlay-wrapper";class Ji{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach($){const at=$.getConfig();this._overlayRef=$,this._width&&!at.width&&$.updateSize({width:this._width}),this._height&&!at.height&&$.updateSize({height:this._height}),$.hostElement.classList.add(wi),this._isDisposed=!1}top($=""){return this._bottomOffset="",this._topOffset=$,this._alignItems="flex-start",this}left($=""){return this._rightOffset="",this._leftOffset=$,this._justifyContent="flex-start",this}bottom($=""){return this._topOffset="",this._bottomOffset=$,this._alignItems="flex-end",this}right($=""){return this._leftOffset="",this._rightOffset=$,this._justifyContent="flex-end",this}width($=""){return this._overlayRef?this._overlayRef.updateSize({width:$}):this._width=$,this}height($=""){return this._overlayRef?this._overlayRef.updateSize({height:$}):this._height=$,this}centerHorizontally($=""){return this.left($),this._justifyContent="center",this}centerVertically($=""){return this.top($),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const $=this._overlayRef.overlayElement.style,at=this._overlayRef.hostElement.style,zt=this._overlayRef.getConfig(),{width:Qt,height:ye,maxWidth:Ee,maxHeight:ni}=zt,Di=!("100%"!==Qt&&"100vw"!==Qt||Ee&&"100%"!==Ee&&"100vw"!==Ee),Mi=!("100%"!==ye&&"100vh"!==ye||ni&&"100%"!==ni&&"100vh"!==ni);$.position=this._cssPosition,$.marginLeft=Di?"0":this._leftOffset,$.marginTop=Mi?"0":this._topOffset,$.marginBottom=this._bottomOffset,$.marginRight=this._rightOffset,Di?at.justifyContent="flex-start":"center"===this._justifyContent?at.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?at.justifyContent="flex-end":"flex-end"===this._justifyContent&&(at.justifyContent="flex-start"):at.justifyContent=this._justifyContent,at.alignItems=Mi?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const $=this._overlayRef.overlayElement.style,at=this._overlayRef.hostElement,zt=at.style;at.classList.remove(wi),zt.justifyContent=zt.alignItems=$.marginTop=$.marginBottom=$.marginLeft=$.marginRight=$.position="",this._overlayRef=null,this._isDisposed=!0}}let Ni=(()=>{class Zt{constructor(at,zt,Qt,ye){this._viewportRuler=at,this._document=zt,this._platform=Qt,this._overlayContainer=ye}global(){return new Ji}connectedTo(at,zt,Qt){return new oi(zt,Qt,at,this._viewportRuler,this._document,this._platform,this._overlayContainer)}flexibleConnectedTo(at){return new re(at,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return Zt.\u0275fac=function(at){return new(at||Zt)(a.LFG(T.rL),a.LFG(n.K0),a.LFG(e.t4),a.LFG(Ce))},Zt.\u0275prov=a.Yz7({factory:function(){return new Zt(a.LFG(T.rL),a.LFG(n.K0),a.LFG(e.t4),a.LFG(Ce))},token:Zt,providedIn:"root"}),Zt})(),ui=0,Oe=(()=>{class Zt{constructor(at,zt,Qt,ye,Ee,ni,Di,Mi,vi,pi,Ue){this.scrollStrategies=at,this._overlayContainer=zt,this._componentFactoryResolver=Qt,this._positionBuilder=ye,this._keyboardDispatcher=Ee,this._injector=ni,this._ngZone=Di,this._document=Mi,this._directionality=vi,this._location=pi,this._outsideClickDispatcher=Ue}create(at){const zt=this._createHostElement(),Qt=this._createPaneElement(zt),ye=this._createPortalOutlet(Qt),Ee=new Ct(at);return Ee.direction=Ee.direction||this._directionality.value,new Ze(ye,zt,Qt,Ee,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(at){const zt=this._document.createElement("div");return zt.id="cdk-overlay-"+ui++,zt.classList.add("cdk-overlay-pane"),at.appendChild(zt),zt}_createHostElement(){const at=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(at),at}_createPortalOutlet(at){return this._appRef||(this._appRef=this._injector.get(a.z2F)),new r.u0(at,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return Zt.\u0275fac=function(at){return new(at||Zt)(a.LFG(Tt),a.LFG(Ce),a.LFG(a._Vd),a.LFG(Ni),a.LFG(Ne),a.LFG(a.zs3),a.LFG(a.R0b),a.LFG(n.K0),a.LFG(t.Is),a.LFG(n.Ye),a.LFG(Xe))},Zt.\u0275prov=a.Yz7({token:Zt,factory:Zt.\u0275fac}),Zt})();const Be=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],Ft=new a.OlP("cdk-connected-overlay-scroll-strategy");let ie=(()=>{class Zt{constructor(at){this.elementRef=at}}return Zt.\u0275fac=function(at){return new(at||Zt)(a.Y36(a.SBq))},Zt.\u0275dir=a.lG2({type:Zt,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),Zt})(),hi=(()=>{class Zt{constructor(at,zt,Qt,ye,Ee){this._overlay=at,this._dir=Ee,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=b.w.EMPTY,this._attachSubscription=b.w.EMPTY,this._detachSubscription=b.w.EMPTY,this._positionSubscription=b.w.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new a.vpe,this.positionChange=new a.vpe,this.attach=new a.vpe,this.detach=new a.vpe,this.overlayKeydown=new a.vpe,this.overlayOutsideClick=new a.vpe,this._templatePortal=new r.UE(zt,Qt),this._scrollStrategyFactory=ye,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(at){this._offsetX=at,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(at){this._offsetY=at,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(at){this._hasBackdrop=(0,o.Ig)(at)}get lockPosition(){return this._lockPosition}set lockPosition(at){this._lockPosition=(0,o.Ig)(at)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(at){this._flexibleDimensions=(0,o.Ig)(at)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(at){this._growAfterOpen=(0,o.Ig)(at)}get push(){return this._push}set push(at){this._push=(0,o.Ig)(at)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(at){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),at.origin&&this.open&&this._position.apply()),at.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=Be);const at=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=at.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=at.detachments().subscribe(()=>this.detach.emit()),at.keydownEvents().subscribe(zt=>{this.overlayKeydown.next(zt),zt.keyCode===ct.hY&&!this.disableClose&&!(0,ct.Vb)(zt)&&(zt.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(zt=>{this.overlayOutsideClick.next(zt)})}_buildConfig(){const at=this._position=this.positionStrategy||this._createPositionStrategy(),zt=new Ct({direction:this._dir,positionStrategy:at,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(zt.width=this.width),(this.height||0===this.height)&&(zt.height=this.height),(this.minWidth||0===this.minWidth)&&(zt.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(zt.minHeight=this.minHeight),this.backdropClass&&(zt.backdropClass=this.backdropClass),this.panelClass&&(zt.panelClass=this.panelClass),zt}_updatePositionStrategy(at){const zt=this.positions.map(Qt=>({originX:Qt.originX,originY:Qt.originY,overlayX:Qt.overlayX,overlayY:Qt.overlayY,offsetX:Qt.offsetX||this.offsetX,offsetY:Qt.offsetY||this.offsetY,panelClass:Qt.panelClass||void 0}));return at.setOrigin(this.origin.elementRef).withPositions(zt).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const at=this._overlay.position().flexibleConnectedTo(this.origin.elementRef);return this._updatePositionStrategy(at),at}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(at=>{this.backdropClick.emit(at)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(function(Zt,$=!1){return at=>at.lift(new Y(Zt,$))}(()=>this.positionChange.observers.length>0)).subscribe(at=>{this.positionChange.emit(at),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return Zt.\u0275fac=function(at){return new(at||Zt)(a.Y36(Oe),a.Y36(a.Rgc),a.Y36(a.s_b),a.Y36(Ft),a.Y36(t.Is,8))},Zt.\u0275dir=a.lG2({type:Zt,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"],positions:["cdkConnectedOverlayPositions","positions"],origin:["cdkConnectedOverlayOrigin","origin"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[a.TTD]}),Zt})();const di={provide:Ft,deps:[Oe],useFactory:function(Zt){return()=>Zt.scrollStrategies.reposition()}};let ge=(()=>{class Zt{}return Zt.\u0275fac=function(at){return new(at||Zt)},Zt.\u0275mod=a.oAB({type:Zt}),Zt.\u0275inj=a.cJS({providers:[Oe,di],imports:[[t.vT,r.eL,T.Cl],T.Cl]}),Zt})()},66899:(B,U,v)=>{"use strict";v.d(U,{t4:()=>t,ud:()=>n,sA:()=>Rt,ht:()=>At,kV:()=>wt,Oy:()=>Dt,_i:()=>it,qK:()=>p,i$:()=>x,Mq:()=>X});var T=v(42741),a=v(16274);let e;try{e="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(pt){e=!1}let o,t=(()=>{class pt{constructor(ot){this._platformId=ot,this.isBrowser=this._platformId?(0,a.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!e)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return pt.\u0275fac=function(ot){return new(ot||pt)(T.LFG(T.Lbi))},pt.\u0275prov=T.Yz7({factory:function(){return new pt(T.LFG(T.Lbi))},token:pt,providedIn:"root"}),pt})(),n=(()=>{class pt{}return pt.\u0275fac=function(ot){return new(ot||pt)},pt.\u0275mod=T.oAB({type:pt}),pt.\u0275inj=T.cJS({}),pt})();const r=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function p(){if(o)return o;if("object"!=typeof document||!document)return o=new Set(r),o;let pt=document.createElement("input");return o=new Set(r.filter(st=>(pt.setAttribute("type",st),pt.type===st))),o}let b,k,Y,rt;function x(pt){return function(){if(null==b&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>b=!0}))}finally{b=b||!1}return b}()?pt:!!pt.capture}function X(){if(null==Y){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Y=!1,Y;if("scrollBehavior"in document.documentElement.style)Y=!0;else{const pt=Element.prototype.scrollTo;Y=!!pt&&!/\{\s*\[native code\]\s*\}/.test(pt.toString())}}return Y}function it(){if("object"!=typeof document||!document)return 0;if(null==k){const pt=document.createElement("div"),st=pt.style;pt.dir="rtl",st.width="1px",st.overflow="auto",st.visibility="hidden",st.pointerEvents="none",st.position="absolute";const ot=document.createElement("div"),nt=ot.style;nt.width="2px",nt.height="1px",pt.appendChild(ot),document.body.appendChild(pt),k=0,0===pt.scrollLeft&&(pt.scrollLeft=1,k=0===pt.scrollLeft?1:2),pt.parentNode.removeChild(pt)}return k}function wt(pt){if(function(){if(null==rt){const pt="undefined"!=typeof document?document.head:null;rt=!(!pt||!pt.createShadowRoot&&!pt.attachShadow)}return rt}()){const st=pt.getRootNode?pt.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&st instanceof ShadowRoot)return st}return null}function At(){let pt="undefined"!=typeof document&&document?document.activeElement:null;for(;pt&&pt.shadowRoot;){const st=pt.shadowRoot.activeElement;if(st===pt)break;pt=st}return pt}function Rt(pt){return pt.composedPath?pt.composedPath()[0]:pt.target}function Dt(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}},62718:(B,U,v)=>{"use strict";v.d(U,{en:()=>Y,ig:()=>ct,Pl:()=>At,C5:()=>I,u0:()=>it,eL:()=>Dt,UE:()=>x});var T=v(42741),a=v(16274);class b{attach(ot){return this._attachedHost=ot,ot.attach(this)}detach(){let ot=this._attachedHost;null!=ot&&(this._attachedHost=null,ot.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(ot){this._attachedHost=ot}}class I extends b{constructor(ot,nt,Tt,Ct){super(),this.component=ot,this.viewContainerRef=nt,this.injector=Tt,this.componentFactoryResolver=Ct}}class x extends b{constructor(ot,nt,Tt){super(),this.templateRef=ot,this.viewContainerRef=nt,this.context=Tt}get origin(){return this.templateRef.elementRef}attach(ot,nt=this.context){return this.context=nt,super.attach(ot)}detach(){return this.context=void 0,super.detach()}}class k extends b{constructor(ot){super(),this.element=ot instanceof T.SBq?ot.nativeElement:ot}}class Y{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(ot){return ot instanceof I?(this._attachedPortal=ot,this.attachComponentPortal(ot)):ot instanceof x?(this._attachedPortal=ot,this.attachTemplatePortal(ot)):this.attachDomPortal&&ot instanceof k?(this._attachedPortal=ot,this.attachDomPortal(ot)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(ot){this._disposeFn=ot}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class it extends Y{constructor(ot,nt,Tt,Ct,yt){super(),this.outletElement=ot,this._componentFactoryResolver=nt,this._appRef=Tt,this._defaultInjector=Ct,this.attachDomPortal=gt=>{const _t=gt.element,Jt=this._document.createComment("dom-portal");_t.parentNode.insertBefore(Jt,_t),this.outletElement.appendChild(_t),this._attachedPortal=gt,super.setDisposeFn(()=>{Jt.parentNode&&Jt.parentNode.replaceChild(_t,Jt)})},this._document=yt}attachComponentPortal(ot){const Tt=(ot.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(ot.component);let Ct;return ot.viewContainerRef?(Ct=ot.viewContainerRef.createComponent(Tt,ot.viewContainerRef.length,ot.injector||ot.viewContainerRef.injector),this.setDisposeFn(()=>Ct.destroy())):(Ct=Tt.create(ot.injector||this._defaultInjector),this._appRef.attachView(Ct.hostView),this.setDisposeFn(()=>{this._appRef.detachView(Ct.hostView),Ct.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(Ct)),this._attachedPortal=ot,Ct}attachTemplatePortal(ot){let nt=ot.viewContainerRef,Tt=nt.createEmbeddedView(ot.templateRef,ot.context);return Tt.rootNodes.forEach(Ct=>this.outletElement.appendChild(Ct)),Tt.detectChanges(),this.setDisposeFn(()=>{let Ct=nt.indexOf(Tt);-1!==Ct&&nt.remove(Ct)}),this._attachedPortal=ot,Tt}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(ot){return ot.hostView.rootNodes[0]}}let ct=(()=>{class st extends x{constructor(nt,Tt){super(nt,Tt)}}return st.\u0275fac=function(nt){return new(nt||st)(T.Y36(T.Rgc),T.Y36(T.s_b))},st.\u0275dir=T.lG2({type:st,selectors:[["","cdkPortal",""]],exportAs:["cdkPortal"],features:[T.qOj]}),st})(),At=(()=>{class st extends Y{constructor(nt,Tt,Ct){super(),this._componentFactoryResolver=nt,this._viewContainerRef=Tt,this._isInitialized=!1,this.attached=new T.vpe,this.attachDomPortal=yt=>{const gt=yt.element,_t=this._document.createComment("dom-portal");yt.setAttachedHost(this),gt.parentNode.insertBefore(_t,gt),this._getRootNode().appendChild(gt),this._attachedPortal=yt,super.setDisposeFn(()=>{_t.parentNode&&_t.parentNode.replaceChild(gt,_t)})},this._document=Ct}get portal(){return this._attachedPortal}set portal(nt){this.hasAttached()&&!nt&&!this._isInitialized||(this.hasAttached()&&super.detach(),nt&&super.attach(nt),this._attachedPortal=nt)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(nt){nt.setAttachedHost(this);const Tt=null!=nt.viewContainerRef?nt.viewContainerRef:this._viewContainerRef,yt=(nt.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(nt.component),gt=Tt.createComponent(yt,Tt.length,nt.injector||Tt.injector);return Tt!==this._viewContainerRef&&this._getRootNode().appendChild(gt.hostView.rootNodes[0]),super.setDisposeFn(()=>gt.destroy()),this._attachedPortal=nt,this._attachedRef=gt,this.attached.emit(gt),gt}attachTemplatePortal(nt){nt.setAttachedHost(this);const Tt=this._viewContainerRef.createEmbeddedView(nt.templateRef,nt.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=nt,this._attachedRef=Tt,this.attached.emit(Tt),Tt}_getRootNode(){const nt=this._viewContainerRef.element.nativeElement;return nt.nodeType===nt.ELEMENT_NODE?nt:nt.parentNode}}return st.\u0275fac=function(nt){return new(nt||st)(T.Y36(T._Vd),T.Y36(T.s_b),T.Y36(a.K0))},st.\u0275dir=T.lG2({type:st,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[T.qOj]}),st})(),Dt=(()=>{class st{}return st.\u0275fac=function(nt){return new(nt||st)},st.\u0275mod=T.oAB({type:st}),st.\u0275inj=T.cJS({}),st})()},54847:(B,U,v)=>{"use strict";v.d(U,{PQ:()=>ai,ZD:()=>Ni,mF:()=>we,Cl:()=>ui,rL:()=>ce});var T=v(99957),a=v(42741),e=v(25464),n=v(20708);new class extends n.v{flush(Be){this.active=!0,this.scheduled=void 0;const{actions:Ft}=this;let ie,hi=-1,fe=Ft.length;Be=Be||Ft.shift();do{if(ie=Be.execute(Be.state,Be.delay))break}while(++hi<fe&&(Be=Ft.shift()));if(this.active=!1,ie){for(;++hi<fe&&(Be=Ft.shift());)Be.unsubscribe();throw ie}}}(class extends e.o{constructor(Be,Ft){super(Be,Ft),this.scheduler=Be,this.work=Ft}requestAsyncId(Be,Ft,ie=0){return null!==ie&&ie>0?super.requestAsyncId(Be,Ft,ie):(Be.actions.push(this),Be.scheduled||(Be.scheduled=requestAnimationFrame(()=>Be.flush(null))))}recycleAsyncId(Be,Ft,ie=0){if(null!==ie&&ie>0||null===ie&&this.delay>0)return super.recycleAsyncId(Be,Ft,ie);0===Be.actions.length&&(cancelAnimationFrame(Ft),Be.scheduled=void 0)}});var b=v(6006),I=v(267),x=v(93948),k=v(54958);v(13438);v(39734),v(15648),v(28744),v(57689);var Dt=v(64337),pt=v(63305),st=v(27194),Ct=(v(63543),v(32812),v(41001),v(66899)),yt=v(16274),gt=v(12281);v(98950);let we=(()=>{class Oe{constructor(Ft,ie,hi){this._ngZone=Ft,this._platform=ie,this._scrolled=new b.xQ,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=hi}register(Ft){this.scrollContainers.has(Ft)||this.scrollContainers.set(Ft,Ft.elementScrolled().subscribe(()=>this._scrolled.next(Ft)))}deregister(Ft){const ie=this.scrollContainers.get(Ft);ie&&(ie.unsubscribe(),this.scrollContainers.delete(Ft))}scrolled(Ft=20){return this._platform.isBrowser?new x.y(ie=>{this._globalSubscription||this._addGlobalListener();const hi=Ft>0?this._scrolled.pipe((0,Dt.e)(Ft)).subscribe(ie):this._scrolled.subscribe(ie);return this._scrolledCount++,()=>{hi.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,I.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((Ft,ie)=>this.deregister(ie)),this._scrolled.complete()}ancestorScrolled(Ft,ie){const hi=this.getAncestorScrollContainers(Ft);return this.scrolled(ie).pipe((0,pt.h)(fe=>!fe||hi.indexOf(fe)>-1))}getAncestorScrollContainers(Ft){const ie=[];return this.scrollContainers.forEach((hi,fe)=>{this._scrollableContainsElement(fe,Ft)&&ie.push(fe)}),ie}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(Ft,ie){let hi=(0,T.fI)(ie),fe=Ft.getElementRef().nativeElement;do{if(hi==fe)return!0}while(hi=hi.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{const Ft=this._getWindow();return(0,k.R)(Ft.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return Oe.\u0275fac=function(Ft){return new(Ft||Oe)(a.LFG(a.R0b),a.LFG(Ct.t4),a.LFG(yt.K0,8))},Oe.\u0275prov=a.Yz7({factory:function(){return new Oe(a.LFG(a.R0b),a.LFG(Ct.t4),a.LFG(yt.K0,8))},token:Oe,providedIn:"root"}),Oe})(),ai=(()=>{class Oe{constructor(Ft,ie,hi,fe){this.elementRef=Ft,this.scrollDispatcher=ie,this.ngZone=hi,this.dir=fe,this._destroyed=new b.xQ,this._elementScrolled=new x.y(di=>this.ngZone.runOutsideAngular(()=>(0,k.R)(this.elementRef.nativeElement,"scroll").pipe((0,st.R)(this._destroyed)).subscribe(di)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(Ft){const ie=this.elementRef.nativeElement,hi=this.dir&&"rtl"==this.dir.value;null==Ft.left&&(Ft.left=hi?Ft.end:Ft.start),null==Ft.right&&(Ft.right=hi?Ft.start:Ft.end),null!=Ft.bottom&&(Ft.top=ie.scrollHeight-ie.clientHeight-Ft.bottom),hi&&0!=(0,Ct._i)()?(null!=Ft.left&&(Ft.right=ie.scrollWidth-ie.clientWidth-Ft.left),2==(0,Ct._i)()?Ft.left=Ft.right:1==(0,Ct._i)()&&(Ft.left=Ft.right?-Ft.right:Ft.right)):null!=Ft.right&&(Ft.left=ie.scrollWidth-ie.clientWidth-Ft.right),this._applyScrollToOptions(Ft)}_applyScrollToOptions(Ft){const ie=this.elementRef.nativeElement;(0,Ct.Mq)()?ie.scrollTo(Ft):(null!=Ft.top&&(ie.scrollTop=Ft.top),null!=Ft.left&&(ie.scrollLeft=Ft.left))}measureScrollOffset(Ft){const ie="left",fe=this.elementRef.nativeElement;if("top"==Ft)return fe.scrollTop;if("bottom"==Ft)return fe.scrollHeight-fe.clientHeight-fe.scrollTop;const di=this.dir&&"rtl"==this.dir.value;return"start"==Ft?Ft=di?"right":ie:"end"==Ft&&(Ft=di?ie:"right"),di&&2==(0,Ct._i)()?Ft==ie?fe.scrollWidth-fe.clientWidth-fe.scrollLeft:fe.scrollLeft:di&&1==(0,Ct._i)()?Ft==ie?fe.scrollLeft+fe.scrollWidth-fe.clientWidth:-fe.scrollLeft:Ft==ie?fe.scrollLeft:fe.scrollWidth-fe.clientWidth-fe.scrollLeft}}return Oe.\u0275fac=function(Ft){return new(Ft||Oe)(a.Y36(a.SBq),a.Y36(we),a.Y36(a.R0b),a.Y36(gt.Is,8))},Oe.\u0275dir=a.lG2({type:Oe,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),Oe})(),ce=(()=>{class Oe{constructor(Ft,ie,hi){this._platform=Ft,this._change=new b.xQ,this._changeListener=fe=>{this._change.next(fe)},this._document=hi,ie.runOutsideAngular(()=>{if(Ft.isBrowser){const fe=this._getWindow();fe.addEventListener("resize",this._changeListener),fe.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const Ft=this._getWindow();Ft.removeEventListener("resize",this._changeListener),Ft.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const Ft={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),Ft}getViewportRect(){const Ft=this.getViewportScrollPosition(),{width:ie,height:hi}=this.getViewportSize();return{top:Ft.top,left:Ft.left,bottom:Ft.top+hi,right:Ft.left+ie,height:hi,width:ie}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const Ft=this._document,ie=this._getWindow(),hi=Ft.documentElement,fe=hi.getBoundingClientRect();return{top:-fe.top||Ft.body.scrollTop||ie.scrollY||hi.scrollTop||0,left:-fe.left||Ft.body.scrollLeft||ie.scrollX||hi.scrollLeft||0}}change(Ft=20){return Ft>0?this._change.pipe((0,Dt.e)(Ft)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const Ft=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:Ft.innerWidth,height:Ft.innerHeight}:{width:0,height:0}}}return Oe.\u0275fac=function(Ft){return new(Ft||Oe)(a.LFG(Ct.t4),a.LFG(a.R0b),a.LFG(yt.K0,8))},Oe.\u0275prov=a.Yz7({factory:function(){return new Oe(a.LFG(Ct.t4),a.LFG(a.R0b),a.LFG(yt.K0,8))},token:Oe,providedIn:"root"}),Oe})(),Ni=(()=>{class Oe{}return Oe.\u0275fac=function(Ft){return new(Ft||Oe)},Oe.\u0275mod=a.oAB({type:Oe}),Oe.\u0275inj=a.cJS({}),Oe})(),ui=(()=>{class Oe{}return Oe.\u0275fac=function(Ft){return new(Ft||Oe)},Oe.\u0275mod=a.oAB({type:Oe}),Oe.\u0275inj=a.cJS({imports:[[gt.vT,Ct.ud,Ni],gt.vT,Ni]}),Oe})()},99957:(B,U,v)=>{"use strict";v.d(U,{Eq:()=>n,Ig:()=>a,HM:()=>o,fI:()=>r,su:()=>e,du:()=>p});var T=v(42741);function a(b){return null!=b&&"false"!=`${b}`}function e(b,I=0){return function(b){return!isNaN(parseFloat(b))&&!isNaN(Number(b))}(b)?Number(b):I}function n(b){return Array.isArray(b)?b:[b]}function o(b){return null==b?"":"string"==typeof b?b:`${b}px`}function r(b){return b instanceof T.SBq?b.nativeElement:b}function p(b,I=/\s+/){const x=[];if(null!=b){const k=Array.isArray(b)?b:`${b}`.split(I);for(const Y of k){const X=`${Y}`.trim();X&&x.push(X)}}return x}},16274:(B,U,v)=>{"use strict";v.d(U,{mr:()=>At,Ov:()=>fs,ez:()=>Us,K0:()=>r,Do:()=>Dt,Nd:()=>Yo,V_:()=>I,Ye:()=>pt,S$:()=>ct,mk:()=>on,sg:()=>cn,O5:()=>ps,PC:()=>Co,RF:()=>Uo,n9:()=>To,ED:()=>On,tP:()=>ws,b0:()=>Rt,lw:()=>p,EM:()=>vr,JF:()=>Vi,NF:()=>Qn,w_:()=>o,bD:()=>xo,q:()=>e,Mx:()=>_i,HT:()=>n});var T=v(42741);let a=null;function e(){return a}function n(bt){a||(a=bt)}class o{}const r=new T.OlP("DocumentToken");let p=(()=>{class bt{historyGo(St){throw new Error("Not implemented")}}return bt.\u0275fac=function(St){return new(St||bt)},bt.\u0275prov=(0,T.Yz7)({factory:b,token:bt,providedIn:"platform"}),bt})();function b(){return(0,T.LFG)(x)}const I=new T.OlP("Location Initialized");let x=(()=>{class bt extends p{constructor(St){super(),this._doc=St,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return e().getBaseHref(this._doc)}onPopState(St){const J=e().getGlobalEventTarget(this._doc,"window");return J.addEventListener("popstate",St,!1),()=>J.removeEventListener("popstate",St)}onHashChange(St){const J=e().getGlobalEventTarget(this._doc,"window");return J.addEventListener("hashchange",St,!1),()=>J.removeEventListener("hashchange",St)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(St){this.location.pathname=St}pushState(St,J,q){k()?this._history.pushState(St,J,q):this.location.hash=q}replaceState(St,J,q){k()?this._history.replaceState(St,J,q):this.location.hash=q}forward(){this._history.forward()}back(){this._history.back()}historyGo(St=0){this._history.go(St)}getState(){return this._history.state}}return bt.\u0275fac=function(St){return new(St||bt)(T.LFG(r))},bt.\u0275prov=(0,T.Yz7)({factory:Y,token:bt,providedIn:"platform"}),bt})();function k(){return!!window.history.pushState}function Y(){return new x((0,T.LFG)(r))}function X(bt,jt){if(0==bt.length)return jt;if(0==jt.length)return bt;let St=0;return bt.endsWith("/")&&St++,jt.startsWith("/")&&St++,2==St?bt+jt.substring(1):1==St?bt+jt:bt+"/"+jt}function it(bt){const jt=bt.match(/#|\?|$/),St=jt&&jt.index||bt.length;return bt.slice(0,St-("/"===bt[St-1]?1:0))+bt.slice(St)}function rt(bt){return bt&&"?"!==bt[0]?"?"+bt:bt}let ct=(()=>{class bt{historyGo(St){throw new Error("Not implemented")}}return bt.\u0275fac=function(St){return new(St||bt)},bt.\u0275prov=(0,T.Yz7)({factory:wt,token:bt,providedIn:"root"}),bt})();function wt(bt){const jt=(0,T.LFG)(r).location;return new Rt((0,T.LFG)(p),jt&&jt.origin||"")}const At=new T.OlP("appBaseHref");let Rt=(()=>{class bt extends ct{constructor(St,J){if(super(),this._platformLocation=St,this._removeListenerFns=[],null==J&&(J=this._platformLocation.getBaseHrefFromDOM()),null==J)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=J}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(St){this._removeListenerFns.push(this._platformLocation.onPopState(St),this._platformLocation.onHashChange(St))}getBaseHref(){return this._baseHref}prepareExternalUrl(St){return X(this._baseHref,St)}path(St=!1){const J=this._platformLocation.pathname+rt(this._platformLocation.search),q=this._platformLocation.hash;return q&&St?`${J}${q}`:J}pushState(St,J,q,et){const xt=this.prepareExternalUrl(q+rt(et));this._platformLocation.pushState(St,J,xt)}replaceState(St,J,q,et){const xt=this.prepareExternalUrl(q+rt(et));this._platformLocation.replaceState(St,J,xt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(St=0){var J,q;null===(q=(J=this._platformLocation).historyGo)||void 0===q||q.call(J,St)}}return bt.\u0275fac=function(St){return new(St||bt)(T.LFG(p),T.LFG(At,8))},bt.\u0275prov=T.Yz7({token:bt,factory:bt.\u0275fac}),bt})(),Dt=(()=>{class bt extends ct{constructor(St,J){super(),this._platformLocation=St,this._baseHref="",this._removeListenerFns=[],null!=J&&(this._baseHref=J)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(St){this._removeListenerFns.push(this._platformLocation.onPopState(St),this._platformLocation.onHashChange(St))}getBaseHref(){return this._baseHref}path(St=!1){let J=this._platformLocation.hash;return null==J&&(J="#"),J.length>0?J.substring(1):J}prepareExternalUrl(St){const J=X(this._baseHref,St);return J.length>0?"#"+J:J}pushState(St,J,q,et){let xt=this.prepareExternalUrl(q+rt(et));0==xt.length&&(xt=this._platformLocation.pathname),this._platformLocation.pushState(St,J,xt)}replaceState(St,J,q,et){let xt=this.prepareExternalUrl(q+rt(et));0==xt.length&&(xt=this._platformLocation.pathname),this._platformLocation.replaceState(St,J,xt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(St=0){var J,q;null===(q=(J=this._platformLocation).historyGo)||void 0===q||q.call(J,St)}}return bt.\u0275fac=function(St){return new(St||bt)(T.LFG(p),T.LFG(At,8))},bt.\u0275prov=T.Yz7({token:bt,factory:bt.\u0275fac}),bt})(),pt=(()=>{class bt{constructor(St,J){this._subject=new T.vpe,this._urlChangeListeners=[],this._platformStrategy=St;const q=this._platformStrategy.getBaseHref();this._platformLocation=J,this._baseHref=it(nt(q)),this._platformStrategy.onPopState(et=>{this._subject.emit({url:this.path(!0),pop:!0,state:et.state,type:et.type})})}path(St=!1){return this.normalize(this._platformStrategy.path(St))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(St,J=""){return this.path()==this.normalize(St+rt(J))}normalize(St){return bt.stripTrailingSlash(function(bt,jt){return bt&&jt.startsWith(bt)?jt.substring(bt.length):jt}(this._baseHref,nt(St)))}prepareExternalUrl(St){return St&&"/"!==St[0]&&(St="/"+St),this._platformStrategy.prepareExternalUrl(St)}go(St,J="",q=null){this._platformStrategy.pushState(q,"",St,J),this._notifyUrlChangeListeners(this.prepareExternalUrl(St+rt(J)),q)}replaceState(St,J="",q=null){this._platformStrategy.replaceState(q,"",St,J),this._notifyUrlChangeListeners(this.prepareExternalUrl(St+rt(J)),q)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(St=0){var J,q;null===(q=(J=this._platformStrategy).historyGo)||void 0===q||q.call(J,St)}onUrlChange(St){this._urlChangeListeners.push(St),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(J=>{this._notifyUrlChangeListeners(J.url,J.state)}))}_notifyUrlChangeListeners(St="",J){this._urlChangeListeners.forEach(q=>q(St,J))}subscribe(St,J,q){return this._subject.subscribe({next:St,error:J,complete:q})}}return bt.\u0275fac=function(St){return new(St||bt)(T.LFG(ct),T.LFG(p))},bt.normalizeQueryParams=rt,bt.joinWithSlash=X,bt.stripTrailingSlash=it,bt.\u0275prov=(0,T.Yz7)({factory:st,token:bt,providedIn:"root"}),bt})();function st(){return new pt((0,T.LFG)(ct),(0,T.LFG)(p))}function nt(bt){return bt.replace(/\/index.html$/,"")}var yt=(()=>((yt=yt||{})[yt.Zero=0]="Zero",yt[yt.One=1]="One",yt[yt.Two=2]="Two",yt[yt.Few=3]="Few",yt[yt.Many=4]="Many",yt[yt.Other=5]="Other",yt))();const Be=T.kL8;class Ge{}let pe=(()=>{class bt extends Ge{constructor(St){super(),this.locale=St}getPluralCategory(St,J){switch(Be(J||this.locale)(St)){case yt.Zero:return"zero";case yt.One:return"one";case yt.Two:return"two";case yt.Few:return"few";case yt.Many:return"many";default:return"other"}}}return bt.\u0275fac=function(St){return new(St||bt)(T.LFG(T.soG))},bt.\u0275prov=T.Yz7({token:bt,factory:bt.\u0275fac}),bt})();function _i(bt,jt){jt=encodeURIComponent(jt);for(const St of bt.split(";")){const J=St.indexOf("="),[q,et]=-1==J?[St,""]:[St.slice(0,J),St.slice(J+1)];if(q.trim()===jt)return decodeURIComponent(et)}return null}let on=(()=>{class bt{constructor(St,J,q,et){this._iterableDiffers=St,this._keyValueDiffers=J,this._ngEl=q,this._renderer=et,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(St){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof St?St.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(St){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof St?St.split(/\s+/):St,this._rawClass&&((0,T.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const St=this._iterableDiffer.diff(this._rawClass);St&&this._applyIterableChanges(St)}else if(this._keyValueDiffer){const St=this._keyValueDiffer.diff(this._rawClass);St&&this._applyKeyValueChanges(St)}}_applyKeyValueChanges(St){St.forEachAddedItem(J=>this._toggleClass(J.key,J.currentValue)),St.forEachChangedItem(J=>this._toggleClass(J.key,J.currentValue)),St.forEachRemovedItem(J=>{J.previousValue&&this._toggleClass(J.key,!1)})}_applyIterableChanges(St){St.forEachAddedItem(J=>{if("string"!=typeof J.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,T.AaK)(J.item)}`);this._toggleClass(J.item,!0)}),St.forEachRemovedItem(J=>this._toggleClass(J.item,!1))}_applyClasses(St){St&&(Array.isArray(St)||St instanceof Set?St.forEach(J=>this._toggleClass(J,!0)):Object.keys(St).forEach(J=>this._toggleClass(J,!!St[J])))}_removeClasses(St){St&&(Array.isArray(St)||St instanceof Set?St.forEach(J=>this._toggleClass(J,!1)):Object.keys(St).forEach(J=>this._toggleClass(J,!1)))}_toggleClass(St,J){(St=St.trim())&&St.split(/\s+/g).forEach(q=>{J?this._renderer.addClass(this._ngEl.nativeElement,q):this._renderer.removeClass(this._ngEl.nativeElement,q)})}}return bt.\u0275fac=function(St){return new(St||bt)(T.Y36(T.ZZ4),T.Y36(T.aQg),T.Y36(T.SBq),T.Y36(T.Qsj))},bt.\u0275dir=T.lG2({type:bt,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),bt})();class An{constructor(jt,St,J,q){this.$implicit=jt,this.ngForOf=St,this.index=J,this.count=q}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let cn=(()=>{class bt{constructor(St,J,q){this._viewContainer=St,this._template=J,this._differs=q,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(St){this._ngForOf=St,this._ngForOfDirty=!0}set ngForTrackBy(St){this._trackByFn=St}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(St){St&&(this._template=St)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const St=this._ngForOf;if(!this._differ&&St)try{this._differ=this._differs.find(St).create(this.ngForTrackBy)}catch(J){throw new Error(`Cannot find a differ supporting object '${St}' of type '${function(bt){return bt.name||typeof bt}(St)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const St=this._differ.diff(this._ngForOf);St&&this._applyChanges(St)}}_applyChanges(St){const J=[];St.forEachOperation((q,et,xt)=>{if(null==q.previousIndex){const ze=this._viewContainer.createEmbeddedView(this._template,new An(null,this._ngForOf,-1,-1),null===xt?void 0:xt),Ii=new ds(q,ze);J.push(Ii)}else if(null==xt)this._viewContainer.remove(null===et?void 0:et);else if(null!==et){const ze=this._viewContainer.get(et);this._viewContainer.move(ze,xt);const Ii=new ds(q,ze);J.push(Ii)}});for(let q=0;q<J.length;q++)this._perViewChange(J[q].view,J[q].record);for(let q=0,et=this._viewContainer.length;q<et;q++){const xt=this._viewContainer.get(q);xt.context.index=q,xt.context.count=et,xt.context.ngForOf=this._ngForOf}St.forEachIdentityChange(q=>{this._viewContainer.get(q.currentIndex).context.$implicit=q.item})}_perViewChange(St,J){St.context.$implicit=J.item}static ngTemplateContextGuard(St,J){return!0}}return bt.\u0275fac=function(St){return new(St||bt)(T.Y36(T.s_b),T.Y36(T.Rgc),T.Y36(T.ZZ4))},bt.\u0275dir=T.lG2({type:bt,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),bt})();class ds{constructor(jt,St){this.record=jt,this.view=St}}let ps=(()=>{class bt{constructor(St,J){this._viewContainer=St,this._context=new No,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=J}set ngIf(St){this._context.$implicit=this._context.ngIf=St,this._updateView()}set ngIfThen(St){Ao("ngIfThen",St),this._thenTemplateRef=St,this._thenViewRef=null,this._updateView()}set ngIfElse(St){Ao("ngIfElse",St),this._elseTemplateRef=St,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(St,J){return!0}}return bt.\u0275fac=function(St){return new(St||bt)(T.Y36(T.s_b),T.Y36(T.Rgc))},bt.\u0275dir=T.lG2({type:bt,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),bt})();class No{constructor(){this.$implicit=null,this.ngIf=null}}function Ao(bt,jt){if(jt&&!jt.createEmbeddedView)throw new Error(`${bt} must be a TemplateRef, but received '${(0,T.AaK)(jt)}'.`)}class rs{constructor(jt,St){this._viewContainerRef=jt,this._templateRef=St,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(jt){jt&&!this._created?this.create():!jt&&this._created&&this.destroy()}}let Uo=(()=>{class bt{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(St){this._ngSwitch=St,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(St){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(St)}_matchCase(St){const J=St==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||J,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),J}_updateDefaultCases(St){if(this._defaultViews&&St!==this._defaultUsed){this._defaultUsed=St;for(let J=0;J<this._defaultViews.length;J++)this._defaultViews[J].enforceState(St)}}}return bt.\u0275fac=function(St){return new(St||bt)},bt.\u0275dir=T.lG2({type:bt,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),bt})(),To=(()=>{class bt{constructor(St,J,q){this.ngSwitch=q,q._addCase(),this._view=new rs(St,J)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return bt.\u0275fac=function(St){return new(St||bt)(T.Y36(T.s_b),T.Y36(T.Rgc),T.Y36(Uo,9))},bt.\u0275dir=T.lG2({type:bt,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),bt})(),On=(()=>{class bt{constructor(St,J,q){q._addDefault(new rs(St,J))}}return bt.\u0275fac=function(St){return new(St||bt)(T.Y36(T.s_b),T.Y36(T.Rgc),T.Y36(Uo,9))},bt.\u0275dir=T.lG2({type:bt,selectors:[["","ngSwitchDefault",""]]}),bt})(),Co=(()=>{class bt{constructor(St,J,q){this._ngEl=St,this._differs=J,this._renderer=q,this._ngStyle=null,this._differ=null}set ngStyle(St){this._ngStyle=St,!this._differ&&St&&(this._differ=this._differs.find(St).create())}ngDoCheck(){if(this._differ){const St=this._differ.diff(this._ngStyle);St&&this._applyChanges(St)}}_setStyle(St,J){const[q,et]=St.split(".");null!=(J=null!=J&&et?`${J}${et}`:J)?this._renderer.setStyle(this._ngEl.nativeElement,q,J):this._renderer.removeStyle(this._ngEl.nativeElement,q)}_applyChanges(St){St.forEachRemovedItem(J=>this._setStyle(J.key,null)),St.forEachAddedItem(J=>this._setStyle(J.key,J.currentValue)),St.forEachChangedItem(J=>this._setStyle(J.key,J.currentValue))}}return bt.\u0275fac=function(St){return new(St||bt)(T.Y36(T.SBq),T.Y36(T.aQg),T.Y36(T.Qsj))},bt.\u0275dir=T.lG2({type:bt,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),bt})(),ws=(()=>{class bt{constructor(St){this._viewContainerRef=St,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(St){if(St.ngTemplateOutlet){const J=this._viewContainerRef;this._viewRef&&J.remove(J.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?J.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&St.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return bt.\u0275fac=function(St){return new(St||bt)(T.Y36(T.s_b))},bt.\u0275dir=T.lG2({type:bt,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[T.TTD]}),bt})();class go{createSubscription(jt,St){return jt.subscribe({next:St,error:J=>{throw J}})}dispose(jt){jt.unsubscribe()}onDestroy(jt){jt.unsubscribe()}}class er{createSubscription(jt,St){return jt.then(St,J=>{throw J})}dispose(jt){}onDestroy(jt){}}const Or=new er,ir=new go;let fs=(()=>{class bt{constructor(St){this._ref=St,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(St){return this._obj?St!==this._obj?(this._dispose(),this.transform(St)):this._latestValue:(St&&this._subscribe(St),this._latestValue)}_subscribe(St){this._obj=St,this._strategy=this._selectStrategy(St),this._subscription=this._strategy.createSubscription(St,J=>this._updateLatestValue(St,J))}_selectStrategy(St){if((0,T.QGY)(St))return Or;if((0,T.F4k)(St))return ir;throw function(bt,jt){return Error(`InvalidPipeArgument: '${jt}' for pipe '${(0,T.AaK)(bt)}'`)}(bt,St)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(St,J){St===this._obj&&(this._latestValue=J,this._ref.markForCheck())}}return bt.\u0275fac=function(St){return new(St||bt)(T.Y36(T.sBO,16))},bt.\u0275pipe=T.Yjl({name:"async",type:bt,pure:!1}),bt})(),Yo=(()=>{class bt{constructor(St){this.differs=St,this.keyValues=[],this.compareFn=bo}transform(St,J=bo){if(!St||!(St instanceof Map)&&"object"!=typeof St)return null;this.differ||(this.differ=this.differs.find(St).create());const q=this.differ.diff(St),et=J!==this.compareFn;return q&&(this.keyValues=[],q.forEachItem(xt=>{this.keyValues.push(function(bt,jt){return{key:bt,value:jt}}(xt.key,xt.currentValue))})),(q||et)&&(this.keyValues.sort(J),this.compareFn=J),this.keyValues}}return bt.\u0275fac=function(St){return new(St||bt)(T.Y36(T.aQg,16))},bt.\u0275pipe=T.Yjl({name:"keyvalue",type:bt,pure:!1}),bt})();function bo(bt,jt){const St=bt.key,J=jt.key;if(St===J)return 0;if(void 0===St)return 1;if(void 0===J)return-1;if(null===St)return 1;if(null===J)return-1;if("string"==typeof St&&"string"==typeof J)return St<J?-1:1;if("number"==typeof St&&"number"==typeof J)return St-J;if("boolean"==typeof St&&"boolean"==typeof J)return St<J?-1:1;const q=String(St),et=String(J);return q==et?0:q<et?-1:1}let Us=(()=>{class bt{}return bt.\u0275fac=function(St){return new(St||bt)},bt.\u0275mod=T.oAB({type:bt}),bt.\u0275inj=T.cJS({providers:[{provide:Ge,useClass:pe}]}),bt})();const xo="browser";function Qn(bt){return bt===xo}let vr=(()=>{class bt{}return bt.\u0275prov=(0,T.Yz7)({token:bt,providedIn:"root",factory:()=>new Nr((0,T.LFG)(r),window)}),bt})();class Nr{constructor(jt,St){this.document=jt,this.window=St,this.offset=()=>[0,0]}setOffset(jt){this.offset=Array.isArray(jt)?()=>jt:jt}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(jt){this.supportsScrolling()&&this.window.scrollTo(jt[0],jt[1])}scrollToAnchor(jt){if(!this.supportsScrolling())return;const St=function(bt,jt){const St=bt.getElementById(jt)||bt.getElementsByName(jt)[0];if(St)return St;if("function"==typeof bt.createTreeWalker&&bt.body&&(bt.body.createShadowRoot||bt.body.attachShadow)){const J=bt.createTreeWalker(bt.body,NodeFilter.SHOW_ELEMENT);let q=J.currentNode;for(;q;){const et=q.shadowRoot;if(et){const xt=et.getElementById(jt)||et.querySelector(`[name="${jt}"]`);if(xt)return xt}q=J.nextNode()}}return null}(this.document,jt);St&&(this.scrollToElement(St),this.attemptFocus(St))}setHistoryScrollRestoration(jt){if(this.supportScrollRestoration()){const St=this.window.history;St&&St.scrollRestoration&&(St.scrollRestoration=jt)}}scrollToElement(jt){const St=jt.getBoundingClientRect(),J=St.left+this.window.pageXOffset,q=St.top+this.window.pageYOffset,et=this.offset();this.window.scrollTo(J-et[0],q-et[1])}attemptFocus(jt){return jt.focus(),this.document.activeElement===jt}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const jt=nr(this.window.history)||nr(Object.getPrototypeOf(this.window.history));return!(!jt||!jt.writable&&!jt.set)}catch(jt){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(jt){return!1}}}function nr(bt){return Object.getOwnPropertyDescriptor(bt,"scrollRestoration")}class Vi{}},31887:(B,U,v)=>{"use strict";v.d(U,{eN:()=>Pt,JF:()=>di});var T=v(16274),a=v(42741),e=v(267),t=v(93948),n=v(23748),o=v(63305),r=v(88561);class p{}class b{}class I{constructor($){this.normalizedNames=new Map,this.lazyUpdate=null,$?this.lazyInit="string"==typeof $?()=>{this.headers=new Map,$.split("\n").forEach(at=>{const zt=at.indexOf(":");if(zt>0){const Qt=at.slice(0,zt),ye=Qt.toLowerCase(),Ee=at.slice(zt+1).trim();this.maybeSetNormalizedName(Qt,ye),this.headers.has(ye)?this.headers.get(ye).push(Ee):this.headers.set(ye,[Ee])}})}:()=>{this.headers=new Map,Object.keys($).forEach(at=>{let zt=$[at];const Qt=at.toLowerCase();"string"==typeof zt&&(zt=[zt]),zt.length>0&&(this.headers.set(Qt,zt),this.maybeSetNormalizedName(at,Qt))})}:this.headers=new Map}has($){return this.init(),this.headers.has($.toLowerCase())}get($){this.init();const at=this.headers.get($.toLowerCase());return at&&at.length>0?at[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll($){return this.init(),this.headers.get($.toLowerCase())||null}append($,at){return this.clone({name:$,value:at,op:"a"})}set($,at){return this.clone({name:$,value:at,op:"s"})}delete($,at){return this.clone({name:$,value:at,op:"d"})}maybeSetNormalizedName($,at){this.normalizedNames.has(at)||this.normalizedNames.set(at,$)}init(){this.lazyInit&&(this.lazyInit instanceof I?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach($=>this.applyUpdate($)),this.lazyUpdate=null))}copyFrom($){$.init(),Array.from($.headers.keys()).forEach(at=>{this.headers.set(at,$.headers.get(at)),this.normalizedNames.set(at,$.normalizedNames.get(at))})}clone($){const at=new I;return at.lazyInit=this.lazyInit&&this.lazyInit instanceof I?this.lazyInit:this,at.lazyUpdate=(this.lazyUpdate||[]).concat([$]),at}applyUpdate($){const at=$.name.toLowerCase();switch($.op){case"a":case"s":let zt=$.value;if("string"==typeof zt&&(zt=[zt]),0===zt.length)return;this.maybeSetNormalizedName($.name,at);const Qt=("a"===$.op?this.headers.get(at):void 0)||[];Qt.push(...zt),this.headers.set(at,Qt);break;case"d":const ye=$.value;if(ye){let Ee=this.headers.get(at);if(!Ee)return;Ee=Ee.filter(ni=>-1===ye.indexOf(ni)),0===Ee.length?(this.headers.delete(at),this.normalizedNames.delete(at)):this.headers.set(at,Ee)}else this.headers.delete(at),this.normalizedNames.delete(at)}}forEach($){this.init(),Array.from(this.normalizedNames.keys()).forEach(at=>$(this.normalizedNames.get(at),this.headers.get(at)))}}class x{encodeKey($){return it($)}encodeValue($){return it($)}decodeKey($){return decodeURIComponent($)}decodeValue($){return decodeURIComponent($)}}const Y=/%(\d[a-f0-9])/gi,X={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function it(Zt){return encodeURIComponent(Zt).replace(Y,($,at)=>{var zt;return null!==(zt=X[at])&&void 0!==zt?zt:$})}function rt(Zt){return`${Zt}`}class ct{constructor($={}){if(this.updates=null,this.cloneFrom=null,this.encoder=$.encoder||new x,$.fromString){if($.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(Zt,$){const at=new Map;return Zt.length>0&&Zt.replace(/^\?/,"").split("&").forEach(Qt=>{const ye=Qt.indexOf("="),[Ee,ni]=-1==ye?[$.decodeKey(Qt),""]:[$.decodeKey(Qt.slice(0,ye)),$.decodeValue(Qt.slice(ye+1))],Di=at.get(Ee)||[];Di.push(ni),at.set(Ee,Di)}),at}($.fromString,this.encoder)}else $.fromObject?(this.map=new Map,Object.keys($.fromObject).forEach(at=>{const zt=$.fromObject[at];this.map.set(at,Array.isArray(zt)?zt:[zt])})):this.map=null}has($){return this.init(),this.map.has($)}get($){this.init();const at=this.map.get($);return at?at[0]:null}getAll($){return this.init(),this.map.get($)||null}keys(){return this.init(),Array.from(this.map.keys())}append($,at){return this.clone({param:$,value:at,op:"a"})}appendAll($){const at=[];return Object.keys($).forEach(zt=>{const Qt=$[zt];Array.isArray(Qt)?Qt.forEach(ye=>{at.push({param:zt,value:ye,op:"a"})}):at.push({param:zt,value:Qt,op:"a"})}),this.clone(at)}set($,at){return this.clone({param:$,value:at,op:"s"})}delete($,at){return this.clone({param:$,value:at,op:"d"})}toString(){return this.init(),this.keys().map($=>{const at=this.encoder.encodeKey($);return this.map.get($).map(zt=>at+"="+this.encoder.encodeValue(zt)).join("&")}).filter($=>""!==$).join("&")}clone($){const at=new ct({encoder:this.encoder});return at.cloneFrom=this.cloneFrom||this,at.updates=(this.updates||[]).concat($),at}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach($=>this.map.set($,this.cloneFrom.map.get($))),this.updates.forEach($=>{switch($.op){case"a":case"s":const at=("a"===$.op?this.map.get($.param):void 0)||[];at.push(rt($.value)),this.map.set($.param,at);break;case"d":if(void 0===$.value){this.map.delete($.param);break}{let zt=this.map.get($.param)||[];const Qt=zt.indexOf(rt($.value));-1!==Qt&&zt.splice(Qt,1),zt.length>0?this.map.set($.param,zt):this.map.delete($.param)}}}),this.cloneFrom=this.updates=null)}}class At{constructor(){this.map=new Map}set($,at){return this.map.set($,at),this}get($){return this.map.has($)||this.map.set($,$.defaultValue()),this.map.get($)}delete($){return this.map.delete($),this}keys(){return this.map.keys()}}function Dt(Zt){return"undefined"!=typeof ArrayBuffer&&Zt instanceof ArrayBuffer}function pt(Zt){return"undefined"!=typeof Blob&&Zt instanceof Blob}function st(Zt){return"undefined"!=typeof FormData&&Zt instanceof FormData}class nt{constructor($,at,zt,Qt){let ye;if(this.url=at,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=$.toUpperCase(),function(Zt){switch(Zt){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||Qt?(this.body=void 0!==zt?zt:null,ye=Qt):ye=zt,ye&&(this.reportProgress=!!ye.reportProgress,this.withCredentials=!!ye.withCredentials,ye.responseType&&(this.responseType=ye.responseType),ye.headers&&(this.headers=ye.headers),ye.context&&(this.context=ye.context),ye.params&&(this.params=ye.params)),this.headers||(this.headers=new I),this.context||(this.context=new At),this.params){const Ee=this.params.toString();if(0===Ee.length)this.urlWithParams=at;else{const ni=at.indexOf("?");this.urlWithParams=at+(-1===ni?"?":ni<at.length-1?"&":"")+Ee}}else this.params=new ct,this.urlWithParams=at}serializeBody(){return null===this.body?null:Dt(this.body)||pt(this.body)||st(this.body)||"undefined"!=typeof URLSearchParams&&this.body instanceof URLSearchParams||"string"==typeof this.body?this.body:this.body instanceof ct?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||st(this.body)?null:pt(this.body)?this.body.type||null:Dt(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ct?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone($={}){var at;const zt=$.method||this.method,Qt=$.url||this.url,ye=$.responseType||this.responseType,Ee=void 0!==$.body?$.body:this.body,ni=void 0!==$.withCredentials?$.withCredentials:this.withCredentials,Di=void 0!==$.reportProgress?$.reportProgress:this.reportProgress;let Mi=$.headers||this.headers,vi=$.params||this.params;const pi=null!==(at=$.context)&&void 0!==at?at:this.context;return void 0!==$.setHeaders&&(Mi=Object.keys($.setHeaders).reduce((Ue,Ke)=>Ue.set(Ke,$.setHeaders[Ke]),Mi)),$.setParams&&(vi=Object.keys($.setParams).reduce((Ue,Ke)=>Ue.set(Ke,$.setParams[Ke]),vi)),new nt(zt,Qt,Ee,{params:vi,headers:Mi,context:pi,reportProgress:Di,responseType:ye,withCredentials:ni})}}var Tt=(()=>((Tt=Tt||{})[Tt.Sent=0]="Sent",Tt[Tt.UploadProgress=1]="UploadProgress",Tt[Tt.ResponseHeader=2]="ResponseHeader",Tt[Tt.DownloadProgress=3]="DownloadProgress",Tt[Tt.Response=4]="Response",Tt[Tt.User=5]="User",Tt))();class Ct{constructor($,at=200,zt="OK"){this.headers=$.headers||new I,this.status=void 0!==$.status?$.status:at,this.statusText=$.statusText||zt,this.url=$.url||null,this.ok=this.status>=200&&this.status<300}}class yt extends Ct{constructor($={}){super($),this.type=Tt.ResponseHeader}clone($={}){return new yt({headers:$.headers||this.headers,status:void 0!==$.status?$.status:this.status,statusText:$.statusText||this.statusText,url:$.url||this.url||void 0})}}class gt extends Ct{constructor($={}){super($),this.type=Tt.Response,this.body=void 0!==$.body?$.body:null}clone($={}){return new gt({body:void 0!==$.body?$.body:this.body,headers:$.headers||this.headers,status:void 0!==$.status?$.status:this.status,statusText:$.statusText||this.statusText,url:$.url||this.url||void 0})}}class _t extends Ct{constructor($){super($,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${$.url||"(unknown url)"}`:`Http failure response for ${$.url||"(unknown url)"}: ${$.status} ${$.statusText}`,this.error=$.error||null}}function Jt(Zt,$){return{body:$,headers:Zt.headers,context:Zt.context,observe:Zt.observe,params:Zt.params,reportProgress:Zt.reportProgress,responseType:Zt.responseType,withCredentials:Zt.withCredentials}}let Pt=(()=>{class Zt{constructor(at){this.handler=at}request(at,zt,Qt={}){let ye;if(at instanceof nt)ye=at;else{let Di,Mi;Di=Qt.headers instanceof I?Qt.headers:new I(Qt.headers),Qt.params&&(Mi=Qt.params instanceof ct?Qt.params:new ct({fromObject:Qt.params})),ye=new nt(at,zt,void 0!==Qt.body?Qt.body:null,{headers:Di,context:Qt.context,params:Mi,reportProgress:Qt.reportProgress,responseType:Qt.responseType||"json",withCredentials:Qt.withCredentials})}const Ee=(0,e.of)(ye).pipe((0,n.b)(Di=>this.handler.handle(Di)));if(at instanceof nt||"events"===Qt.observe)return Ee;const ni=Ee.pipe((0,o.h)(Di=>Di instanceof gt));switch(Qt.observe||"body"){case"body":switch(ye.responseType){case"arraybuffer":return ni.pipe((0,r.U)(Di=>{if(null!==Di.body&&!(Di.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Di.body}));case"blob":return ni.pipe((0,r.U)(Di=>{if(null!==Di.body&&!(Di.body instanceof Blob))throw new Error("Response is not a Blob.");return Di.body}));case"text":return ni.pipe((0,r.U)(Di=>{if(null!==Di.body&&"string"!=typeof Di.body)throw new Error("Response is not a string.");return Di.body}));case"json":default:return ni.pipe((0,r.U)(Di=>Di.body))}case"response":return ni;default:throw new Error(`Unreachable: unhandled observe type ${Qt.observe}}`)}}delete(at,zt={}){return this.request("DELETE",at,zt)}get(at,zt={}){return this.request("GET",at,zt)}head(at,zt={}){return this.request("HEAD",at,zt)}jsonp(at,zt){return this.request("JSONP",at,{params:(new ct).append(zt,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(at,zt={}){return this.request("OPTIONS",at,zt)}patch(at,zt,Qt={}){return this.request("PATCH",at,Jt(Qt,zt))}post(at,zt,Qt={}){return this.request("POST",at,Jt(Qt,zt))}put(at,zt,Qt={}){return this.request("PUT",at,Jt(Qt,zt))}}return Zt.\u0275fac=function(at){return new(at||Zt)(a.LFG(p))},Zt.\u0275prov=a.Yz7({token:Zt,factory:Zt.\u0275fac}),Zt})();class oe{constructor($,at){this.next=$,this.interceptor=at}handle($){return this.interceptor.intercept($,this.next)}}const Ne=new a.OlP("HTTP_INTERCEPTORS");let Xe=(()=>{class Zt{intercept(at,zt){return zt.handle(at)}}return Zt.\u0275fac=function(at){return new(at||Zt)},Zt.\u0275prov=a.Yz7({token:Zt,factory:Zt.\u0275fac}),Zt})();const qe=/^\)\]\}',?\n/;let wi=(()=>{class Zt{constructor(at){this.xhrFactory=at}handle(at){if("JSONP"===at.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new t.y(zt=>{const Qt=this.xhrFactory.build();if(Qt.open(at.method,at.urlWithParams),at.withCredentials&&(Qt.withCredentials=!0),at.headers.forEach((Ke,ne)=>Qt.setRequestHeader(Ke,ne.join(","))),at.headers.has("Accept")||Qt.setRequestHeader("Accept","application/json, text/plain, */*"),!at.headers.has("Content-Type")){const Ke=at.detectContentTypeHeader();null!==Ke&&Qt.setRequestHeader("Content-Type",Ke)}if(at.responseType){const Ke=at.responseType.toLowerCase();Qt.responseType="json"!==Ke?Ke:"text"}const ye=at.serializeBody();let Ee=null;const ni=()=>{if(null!==Ee)return Ee;const Ke=1223===Qt.status?204:Qt.status,ne=Qt.statusText||"OK",xe=new I(Qt.getAllResponseHeaders()),ii=function(Zt){return"responseURL"in Zt&&Zt.responseURL?Zt.responseURL:/^X-Request-URL:/m.test(Zt.getAllResponseHeaders())?Zt.getResponseHeader("X-Request-URL"):null}(Qt)||at.url;return Ee=new yt({headers:xe,status:Ke,statusText:ne,url:ii}),Ee},Di=()=>{let{headers:Ke,status:ne,statusText:xe,url:ii}=ni(),yi=null;204!==ne&&(yi=void 0===Qt.response?Qt.responseText:Qt.response),0===ne&&(ne=yi?200:0);let Zi=ne>=200&&ne<300;if("json"===at.responseType&&"string"==typeof yi){const ji=yi;yi=yi.replace(qe,"");try{yi=""!==yi?JSON.parse(yi):null}catch(Ui){yi=ji,Zi&&(Zi=!1,yi={error:Ui,text:yi})}}Zi?(zt.next(new gt({body:yi,headers:Ke,status:ne,statusText:xe,url:ii||void 0})),zt.complete()):zt.error(new _t({error:yi,headers:Ke,status:ne,statusText:xe,url:ii||void 0}))},Mi=Ke=>{const{url:ne}=ni(),xe=new _t({error:Ke,status:Qt.status||0,statusText:Qt.statusText||"Unknown Error",url:ne||void 0});zt.error(xe)};let vi=!1;const pi=Ke=>{vi||(zt.next(ni()),vi=!0);let ne={type:Tt.DownloadProgress,loaded:Ke.loaded};Ke.lengthComputable&&(ne.total=Ke.total),"text"===at.responseType&&!!Qt.responseText&&(ne.partialText=Qt.responseText),zt.next(ne)},Ue=Ke=>{let ne={type:Tt.UploadProgress,loaded:Ke.loaded};Ke.lengthComputable&&(ne.total=Ke.total),zt.next(ne)};return Qt.addEventListener("load",Di),Qt.addEventListener("error",Mi),Qt.addEventListener("timeout",Mi),Qt.addEventListener("abort",Mi),at.reportProgress&&(Qt.addEventListener("progress",pi),null!==ye&&Qt.upload&&Qt.upload.addEventListener("progress",Ue)),Qt.send(ye),zt.next({type:Tt.Sent}),()=>{Qt.removeEventListener("error",Mi),Qt.removeEventListener("abort",Mi),Qt.removeEventListener("load",Di),Qt.removeEventListener("timeout",Mi),at.reportProgress&&(Qt.removeEventListener("progress",pi),null!==ye&&Qt.upload&&Qt.upload.removeEventListener("progress",Ue)),Qt.readyState!==Qt.DONE&&Qt.abort()}})}}return Zt.\u0275fac=function(at){return new(at||Zt)(a.LFG(T.JF))},Zt.\u0275prov=a.Yz7({token:Zt,factory:Zt.\u0275fac}),Zt})();const Ji=new a.OlP("XSRF_COOKIE_NAME"),Ni=new a.OlP("XSRF_HEADER_NAME");class ui{}let Oe=(()=>{class Zt{constructor(at,zt,Qt){this.doc=at,this.platform=zt,this.cookieName=Qt,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const at=this.doc.cookie||"";return at!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,T.Mx)(at,this.cookieName),this.lastCookieString=at),this.lastToken}}return Zt.\u0275fac=function(at){return new(at||Zt)(a.LFG(T.K0),a.LFG(a.Lbi),a.LFG(Ji))},Zt.\u0275prov=a.Yz7({token:Zt,factory:Zt.\u0275fac}),Zt})(),Be=(()=>{class Zt{constructor(at,zt){this.tokenService=at,this.headerName=zt}intercept(at,zt){const Qt=at.url.toLowerCase();if("GET"===at.method||"HEAD"===at.method||Qt.startsWith("http://")||Qt.startsWith("https://"))return zt.handle(at);const ye=this.tokenService.getToken();return null!==ye&&!at.headers.has(this.headerName)&&(at=at.clone({headers:at.headers.set(this.headerName,ye)})),zt.handle(at)}}return Zt.\u0275fac=function(at){return new(at||Zt)(a.LFG(ui),a.LFG(Ni))},Zt.\u0275prov=a.Yz7({token:Zt,factory:Zt.\u0275fac}),Zt})(),Ft=(()=>{class Zt{constructor(at,zt){this.backend=at,this.injector=zt,this.chain=null}handle(at){if(null===this.chain){const zt=this.injector.get(Ne,[]);this.chain=zt.reduceRight((Qt,ye)=>new oe(Qt,ye),this.backend)}return this.chain.handle(at)}}return Zt.\u0275fac=function(at){return new(at||Zt)(a.LFG(b),a.LFG(a.zs3))},Zt.\u0275prov=a.Yz7({token:Zt,factory:Zt.\u0275fac}),Zt})(),fe=(()=>{class Zt{static disable(){return{ngModule:Zt,providers:[{provide:Be,useClass:Xe}]}}static withOptions(at={}){return{ngModule:Zt,providers:[at.cookieName?{provide:Ji,useValue:at.cookieName}:[],at.headerName?{provide:Ni,useValue:at.headerName}:[]]}}}return Zt.\u0275fac=function(at){return new(at||Zt)},Zt.\u0275mod=a.oAB({type:Zt}),Zt.\u0275inj=a.cJS({providers:[Be,{provide:Ne,useExisting:Be,multi:!0},{provide:ui,useClass:Oe},{provide:Ji,useValue:"XSRF-TOKEN"},{provide:Ni,useValue:"X-XSRF-TOKEN"}]}),Zt})(),di=(()=>{class Zt{}return Zt.\u0275fac=function(at){return new(at||Zt)},Zt.\u0275mod=a.oAB({type:Zt}),Zt.\u0275inj=a.cJS({providers:[Pt,{provide:p,useClass:Ft},wi,{provide:b,useExisting:wi}],imports:[[fe.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),Zt})()},42741:(B,U,v)=>{"use strict";v.d(U,{deG:()=>Gc,tb:()=>PE,AFp:()=>kE,ip1:()=>Fm,CZH:()=>pf,hGG:()=>EI,z2F:()=>fg,sBO:()=>dR,Sil:()=>pg,_Vd:()=>sf,EJc:()=>BE,SBq:()=>oh,qLn:()=>cc,vpe:()=>sh,gxx:()=>f,tBr:()=>Ua,XFs:()=>fe,OlP:()=>ms,zs3:()=>Hi,ZZ4:()=>t_,aQg:()=>e_,soG:()=>h_,YKP:()=>Ty,v3s:()=>tI,h0i:()=>ap,PXZ:()=>KD,R0b:()=>_c,FiY:()=>Ga,Lbi:()=>NE,g9A:()=>LE,n_E:()=>hg,Qsj:()=>ZS,FYo:()=>qg,JOm:()=>ja,Tiy:()=>hm,q3G:()=>ys,tp0:()=>Da,EAV:()=>oI,Rgc:()=>tg,dDg:()=>GE,DyG:()=>ql,GfV:()=>fy,s_b:()=>o_,ifc:()=>Ee,eFA:()=>XE,G48:()=>UD,Gpc:()=>x,f3M:()=>ch,X6Q:()=>zm,_c5:()=>fI,VLi:()=>VD,c2e:()=>FE,zSh:()=>C,wAp:()=>Hn,vHH:()=>it,EiD:()=>Dc,mCW:()=>fr,qzn:()=>Mn,JVY:()=>Qo,pB0:()=>Ur,eBb:()=>As,L6k:()=>us,LAX:()=>_a,cg1:()=>im,Tjo:()=>dI,kL8:()=>Pb,yhl:()=>Jn,dqk:()=>pi,sIi:()=>jf,CqO:()=>G_,QGY:()=>U_,F4k:()=>Yv,RDi:()=>la,AaK:()=>p,z3N:()=>wo,qOj:()=>D_,TTD:()=>Us,_Bn:()=>cy,xp6:()=>Tp,uIk:()=>A_,Gre:()=>wb,ekj:()=>J_,Suo:()=>uE,Xpm:()=>kt,lG2:()=>Wn,Yz7:()=>Pe,cJS:()=>oi,oAB:()=>Pi,Yjl:()=>so,Y36:()=>Xf,_UZ:()=>Wv,GkF:()=>zv,BQk:()=>V_,ynx:()=>H_,qZA:()=>B_,TgZ:()=>F_,EpF:()=>jv,n5z:()=>cs,Ikx:()=>tm,LFG:()=>ss,$8M:()=>cr,NdJ:()=>W_,CRH:()=>hE,kcU:()=>Tn,O4$:()=>tn,oxw:()=>Jv,ALo:()=>oE,lcZ:()=>sE,Hsn:()=>Zv,F$t:()=>$v,Q6J:()=>N_,s9C:()=>Y_,DdM:()=>$y,VKq:()=>Zy,WLB:()=>Qy,iGM:()=>lE,MAs:()=>Ov,CHM:()=>ua,LSH:()=>Oa,kYT:()=>Oi,Udp:()=>K_,WFA:()=>z_,d8E:()=>em,YNc:()=>Av,W1O:()=>gE,_uU:()=>bb,Oqu:()=>Z_,hij:()=>Yg,AsE:()=>Q_,lnq:()=>q_,Gf:()=>cE});var T=v(6006),a=v(39734),e=v(93948),t=v(30636),n=v(82564);function o(l){for(let c in l)if(l[c]===o)return c;throw Error("Could not find renamed property on target object.")}function r(l,c){for(const g in c)c.hasOwnProperty(g)&&!l.hasOwnProperty(g)&&(l[g]=c[g])}function p(l){if("string"==typeof l)return l;if(Array.isArray(l))return"["+l.map(p).join(", ")+"]";if(null==l)return""+l;if(l.overriddenName)return`${l.overriddenName}`;if(l.name)return`${l.name}`;const c=l.toString();if(null==c)return""+c;const g=c.indexOf("\n");return-1===g?c:c.substring(0,g)}function b(l,c){return null==l||""===l?null===c?"":c:null==c||""===c?l:l+" "+c}const I=o({__forward_ref__:o});function x(l){return l.__forward_ref__=x,l.toString=function(){return p(this())},l}function k(l){return Y(l)?l():l}function Y(l){return"function"==typeof l&&l.hasOwnProperty(I)&&l.__forward_ref__===x}class it extends Error{constructor(c,g){super(function(l,c){return`${l?`NG0${l}: `:""}${c}`}(c,g)),this.code=c}}function wt(l){return"string"==typeof l?l:null==l?"":String(l)}function At(l){return"function"==typeof l?l.name||l.toString():"object"==typeof l&&null!=l&&"function"==typeof l.type?l.type.name||l.type.toString():wt(l)}function st(l,c){const g=c?` in ${c}`:"";throw new it("201",`No provider for ${At(l)} found${g}`)}function Ze(l,c){null==l&&function(l,c,g,E){throw new Error(`ASSERTION ERROR: ${l}`+(null==E?"":` [Expected=> ${g} ${E} ${c} <=Actual]`))}(c,l,null,"!=")}function Pe(l){return{token:l.token,providedIn:l.providedIn||null,factory:l.factory,value:void 0}}function oi(l){return{providers:l.providers||[],imports:l.imports||[]}}function wi(l){return Ji(l,Be)||Ji(l,ie)}function Ji(l,c){return l.hasOwnProperty(c)?l[c]:null}function Oe(l){return l&&(l.hasOwnProperty(Ft)||l.hasOwnProperty(hi))?l[Ft]:null}const Be=o({\u0275prov:o}),Ft=o({\u0275inj:o}),ie=o({ngInjectableDef:o}),hi=o({ngInjectorDef:o});var fe=(()=>((fe=fe||{})[fe.Default=0]="Default",fe[fe.Host=1]="Host",fe[fe.Self=2]="Self",fe[fe.SkipSelf=4]="SkipSelf",fe[fe.Optional=8]="Optional",fe))();let di;function Ve(l){const c=di;return di=l,c}function Zt(l,c,g){const E=wi(l);return E&&"root"==E.providedIn?void 0===E.value?E.value=E.factory():E.value:g&fe.Optional?null:void 0!==c?c:void st(p(l),"Injector")}function at(l){return{toString:l}.toString()}var zt=(()=>((zt=zt||{})[zt.OnPush=0]="OnPush",zt[zt.Default=1]="Default",zt))(),Ee=(()=>((Ee=Ee||{})[Ee.Emulated=0]="Emulated",Ee[Ee.None=2]="None",Ee[Ee.ShadowDom=3]="ShadowDom",Ee))();const ni="undefined"!=typeof globalThis&&globalThis,Di="undefined"!=typeof window&&window,Mi="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,pi=ni||"undefined"!=typeof global&&global||Di||Mi,ne={},xe=[],ii=o({\u0275cmp:o}),yi=o({\u0275dir:o}),Zi=o({\u0275pipe:o}),ji=o({\u0275mod:o}),Ui=o({\u0275loc:o}),Xi=o({\u0275fac:o}),Re=o({__NG_ELEMENT_ID__:o});let Me=0;function kt(l){return at(()=>{const g={},E={type:l.type,providersResolver:null,decls:l.decls,vars:l.vars,factory:null,template:l.template||null,consts:l.consts||null,ngContentSelectors:l.ngContentSelectors,hostBindings:l.hostBindings||null,hostVars:l.hostVars||0,hostAttrs:l.hostAttrs||null,contentQueries:l.contentQueries||null,declaredInputs:g,inputs:null,outputs:null,exportAs:l.exportAs||null,onPush:l.changeDetection===zt.OnPush,directiveDefs:null,pipeDefs:null,selectors:l.selectors||xe,viewQuery:l.viewQuery||null,features:l.features||null,data:l.data||{},encapsulation:l.encapsulation||Ee.Emulated,id:"c",styles:l.styles||xe,_:null,setInput:null,schemas:l.schemas||null,tView:null},w=l.directives,M=l.features,L=l.pipes;return E.id+=Me++,E.inputs=kn(l.inputs,g),E.outputs=kn(l.outputs),M&&M.forEach(H=>H(E)),E.directiveDefs=w?()=>("function"==typeof w?w():w).map(Gt):null,E.pipeDefs=L?()=>("function"==typeof L?L():L).map(be):null,E})}function Gt(l){return Vn(l)||function(l){return l[yi]||null}(l)}function be(l){return function(l){return l[Zi]||null}(l)}const Je={};function Pi(l){return at(()=>{const c={type:l.type,bootstrap:l.bootstrap||xe,declarations:l.declarations||xe,imports:l.imports||xe,exports:l.exports||xe,transitiveCompileScopes:null,schemas:l.schemas||null,id:l.id||null};return null!=l.id&&(Je[l.id]=l.type),c})}function Oi(l,c){return at(()=>{const g=Eo(l,!0);g.declarations=c.declarations||xe,g.imports=c.imports||xe,g.exports=c.exports||xe})}function kn(l,c){if(null==l)return ne;const g={};for(const E in l)if(l.hasOwnProperty(E)){let w=l[E],M=w;Array.isArray(w)&&(M=w[1],w=w[0]),g[w]=E,c&&(c[w]=M)}return g}const Wn=kt;function so(l){return{type:l.type,name:l.name,factory:null,pure:!1!==l.pure,onDestroy:l.type.prototype.ngOnDestroy||null}}function Vn(l){return l[ii]||null}function Eo(l,c){const g=l[ji]||null;if(!g&&!0===c)throw new Error(`Type ${p(l)} does not have '\u0275mod' property.`);return g}function is(l){return Array.isArray(l)&&"object"==typeof l[1]}function lo(l){return Array.isArray(l)&&!0===l[1]}function ks(l){return 0!=(8&l.flags)}function Co(l){return 2==(2&l.flags)}function ws(l){return 1==(1&l.flags)}function ns(l){return null!==l.template}function Oo(l){return 0!=(512&l[2])}function Ns(l,c){return l.hasOwnProperty(Xi)?l[Xi]:null}class ra{constructor(c,g,E){this.previousValue=c,this.currentValue=g,this.firstChange=E}isFirstChange(){return this.firstChange}}function Us(){return xo}function xo(l){return l.type.prototype.ngOnChanges&&(l.setInput=ho),Js}function Js(){const l=Qn(this),c=null==l?void 0:l.current;if(c){const g=l.previous;if(g===ne)l.previous=c;else for(let E in c)g[E]=c[E];l.current=null,this.ngOnChanges(c)}}function ho(l,c,g,E){const w=Qn(l)||function(l,c){return l[Is]=c}(l,{previous:ne,current:null}),M=w.current||(w.current={}),L=w.previous,H=this.declaredInputs[g],tt=L[H];M[H]=new ra(tt&&tt.currentValue,c,L===ne),l[E]=c}Us.ngInherit=!0;const Is="__ngSimpleChanges__";function Qn(l){return l[Is]||null}const vr="http://www.w3.org/2000/svg";let nr;function la(l){nr=l}function bt(l){return!!l.listen}const St={createRenderer:(l,c)=>void 0!==nr?nr:"undefined"!=typeof document?document:void 0};function q(l){for(;Array.isArray(l);)l=l[0];return l}function ze(l,c){return q(c[l])}function Ii(l,c){return q(c[l.index])}function Xn(l,c){return l.data[c]}function En(l,c){return l[c]}function ao(l,c){const g=c[l];return is(g)?g:g[0]}function _o(l){return 4==(4&l[2])}function Fo(l){return 128==(128&l[2])}function os(l,c){return null==c?null:l[c]}function Zs(l){l[18]=0}function Gs(l,c){l[5]+=c;let g=l,E=l[3];for(;null!==E&&(1===c&&1===g[5]||-1===c&&0===g[5]);)E[5]+=c,g=E,E=E[3]}const un={lFrame:Io(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function hl(){return un.bindingsEnabled}function ki(){return un.lFrame.lView}function Rn(){return un.lFrame.tView}function ua(l){return un.lFrame.contextLView=l,l[8]}function Xo(){let l=yr();for(;null!==l&&64===l.type;)l=l.parent;return l}function yr(){return un.lFrame.currentTNode}function Ps(l,c){const g=un.lFrame;g.currentTNode=l,g.isParent=c}function Bt(){return un.lFrame.isParent}function V(){un.lFrame.isParent=!1}function Ht(){return un.isInCheckNoChangesMode}function te(l){un.isInCheckNoChangesMode=l}function _e(){const l=un.lFrame;let c=l.bindingRootIndex;return-1===c&&(c=l.bindingRootIndex=l.tView.bindingStartIndex),c}function Se(){return un.lFrame.bindingIndex}function mi(){return un.lFrame.bindingIndex++}function Gi(l){const c=un.lFrame,g=c.bindingIndex;return c.bindingIndex=c.bindingIndex+l,g}function Ln(l,c){const g=un.lFrame;g.bindingIndex=g.bindingRootIndex=l,bn(c)}function bn(l){un.lFrame.currentDirectiveIndex=l}function Gn(l){const c=un.lFrame.currentDirectiveIndex;return-1===c?null:l[c]}function So(){return un.lFrame.currentQueryIndex}function ko(l){un.lFrame.currentQueryIndex=l}function _s(l){const c=l[1];return 2===c.type?c.declTNode:1===c.type?l[6]:null}function qn(l,c,g){if(g&fe.SkipSelf){let w=c,M=l;for(;!(w=w.parent,null!==w||g&fe.Host||(w=_s(M),null===w||(M=M[15],10&w.type))););if(null===w)return!1;c=w,l=M}const E=un.lFrame=Er();return E.currentTNode=c,E.lView=l,!0}function sr(l){const c=Er(),g=l[1];un.lFrame=c,c.currentTNode=g.firstChild,c.lView=l,c.tView=g,c.contextLView=l,c.bindingIndex=g.bindingStartIndex,c.inI18n=!1}function Er(){const l=un.lFrame,c=null===l?null:l.child;return null===c?Io(l):c}function Io(l){const c={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:l,child:null,inI18n:!1};return null!==l&&(l.child=c),c}function Ws(){const l=un.lFrame;return un.lFrame=l.parent,l.currentTNode=null,l.lView=null,l}const Tr=Ws;function Ms(){const l=Ws();l.isParent=!0,l.tView=null,l.selectedIndex=-1,l.contextLView=null,l.elementDepthCount=0,l.currentDirectiveIndex=-1,l.currentNamespace=null,l.bindingRootIndex=-1,l.bindingIndex=-1,l.currentQueryIndex=0}function Bo(){return un.lFrame.selectedIndex}function Br(l){un.lFrame.selectedIndex=l}function co(){const l=un.lFrame;return Xn(l.tView,l.selectedIndex)}function tn(){un.lFrame.currentNamespace=vr}function Tn(){un.lFrame.currentNamespace=null}function ls(l,c){for(let g=c.directiveStart,E=c.directiveEnd;g<E;g++){const M=l.data[g].type.prototype,{ngAfterContentInit:L,ngAfterContentChecked:H,ngAfterViewInit:tt,ngAfterViewChecked:mt,ngOnDestroy:Ot}=M;L&&(l.contentHooks||(l.contentHooks=[])).push(-g,L),H&&((l.contentHooks||(l.contentHooks=[])).push(g,H),(l.contentCheckHooks||(l.contentCheckHooks=[])).push(g,H)),tt&&(l.viewHooks||(l.viewHooks=[])).push(-g,tt),mt&&((l.viewHooks||(l.viewHooks=[])).push(g,mt),(l.viewCheckHooks||(l.viewCheckHooks=[])).push(g,mt)),null!=Ot&&(l.destroyHooks||(l.destroyHooks=[])).push(g,Ot)}}function Mo(l,c,g){zs(l,c,3,g)}function Ro(l,c,g,E){(3&l[2])===g&&zs(l,c,g,E)}function da(l,c){let g=l[2];(3&g)===c&&(g&=2047,g+=1,l[2]=g)}function zs(l,c,g,E){const M=null!=E?E:-1,L=c.length-1;let H=0;for(let tt=void 0!==E?65535&l[18]:0;tt<L;tt++)if("number"==typeof c[tt+1]){if(H=c[tt],null!=E&&H>=E)break}else c[tt]<0&&(l[18]+=65536),(H<M||-1==M)&&(Qs(l,g,c,tt),l[18]=(4294901760&l[18])+tt+2),tt++}function Qs(l,c,g,E){const w=g[E]<0,M=g[E+1],H=l[w?-g[E]:g[E]];if(w){if(l[2]>>11<l[18]>>16&&(3&l[2])===c){l[2]+=2048;try{M.call(H)}finally{}}}else try{M.call(H)}finally{}}class qs{constructor(c,g,E){this.factory=c,this.resolving=!1,this.canSeeViewProviders=g,this.injectImpl=E}}function Xl(l,c,g){const E=bt(l);let w=0;for(;w<g.length;){const M=g[w];if("number"==typeof M){if(0!==M)break;w++;const L=g[w++],H=g[w++],tt=g[w++];E?l.setAttribute(c,H,tt,L):c.setAttributeNS(L,H,tt)}else{const L=M,H=g[++w];js(L)?E&&l.setProperty(c,L,H):E?l.setAttribute(c,L,H):c.setAttribute(L,H),w++}}return w}function rr(l){return 3===l||4===l||6===l}function js(l){return 64===l.charCodeAt(0)}function Al(l,c){if(null!==c&&0!==c.length)if(null===l||0===l.length)l=c.slice();else{let g=-1;for(let E=0;E<c.length;E++){const w=c[E];"number"==typeof w?g=w:0===g||ar(l,g,w,null,-1===g||2===g?c[++E]:null)}}return l}function ar(l,c,g,E,w){let M=0,L=l.length;if(-1===c)L=-1;else for(;M<l.length;){const H=l[M++];if("number"==typeof H){if(H===c){L=-1;break}if(H>c){L=M-1;break}}}for(;M<l.length;){const H=l[M];if("number"==typeof H)break;if(H===g){if(null===E)return void(null!==w&&(l[M+1]=w));if(E===l[M+1])return void(l[M+2]=w)}M++,null!==E&&M++,null!==w&&M++}-1!==L&&(l.splice(L,0,c),M=L+1),l.splice(M++,0,g),null!==E&&l.splice(M++,0,E),null!==w&&l.splice(M++,0,w)}function pl(l){return-1!==l}function Ca(l){return 32767&l}function Sa(l,c){let g=function(l){return l>>16}(l),E=c;for(;g>0;)E=E[15],g--;return E}let Ol=!0;function fl(l){const c=Ol;return Ol=l,c}let Kl=0;function gl(l,c){const g=Ra(l,c);if(-1!==g)return g;const E=c[1];E.firstCreatePass&&(l.injectorIndex=c.length,Fa(E.data,l),Fa(c,null),Fa(E.blueprint,null));const w=mc(l,c),M=l.injectorIndex;if(pl(w)){const L=Ca(w),H=Sa(w,c),tt=H[1].data;for(let mt=0;mt<8;mt++)c[M+mt]=H[L+mt]|tt[L+mt]}return c[M+8]=w,M}function Fa(l,c){l.push(0,0,0,0,0,0,0,0,c)}function Ra(l,c){return-1===l.injectorIndex||l.parent&&l.parent.injectorIndex===l.injectorIndex||null===c[l.injectorIndex+8]?-1:l.injectorIndex}function mc(l,c){if(l.parent&&-1!==l.parent.injectorIndex)return l.parent.injectorIndex;let g=0,E=null,w=c;for(;null!==w;){const M=w[1],L=M.type;if(E=2===L?M.declTNode:1===L?w[6]:null,null===E)return-1;if(g++,w=w[15],-1!==E.injectorIndex)return E.injectorIndex|g<<16}return-1}function lt(l,c,g){!function(l,c,g){let E;"string"==typeof g?E=g.charCodeAt(0)||0:g.hasOwnProperty(Re)&&(E=g[Re]),null==E&&(E=g[Re]=Kl++);const w=255&E;c.data[l+(w>>5)]|=1<<w}(l,c,g)}function j(l,c,g){if(g&fe.Optional)return l;st(c,"NodeInjector")}function Et(l,c,g,E){if(g&fe.Optional&&void 0===E&&(E=null),0==(g&(fe.Self|fe.Host))){const w=l[9],M=Ve(void 0);try{return w?w.get(c,E,g&fe.Optional):Zt(c,E,g&fe.Optional)}finally{Ve(M)}}return j(E,c,g)}function Mt(l,c,g,E=fe.Default,w){if(null!==l){const M=function(l){if("string"==typeof l)return l.charCodeAt(0)||0;const c=l.hasOwnProperty(Re)?l[Re]:void 0;return"number"==typeof c?c>=0?255&c:me:c}(g);if("function"==typeof M){if(!qn(c,l,E))return E&fe.Host?j(w,g,E):Et(c,g,E,w);try{const L=M(E);if(null!=L||E&fe.Optional)return L;st(g)}finally{Tr()}}else if("number"==typeof M){let L=null,H=Ra(l,c),tt=-1,mt=E&fe.Host?c[16][6]:null;for((-1===H||E&fe.SkipSelf)&&(tt=-1===H?mc(l,c):c[H+8],-1!==tt&&io(E,!1)?(L=c[1],H=Ca(tt),c=Sa(tt,c)):H=-1);-1!==H;){const Ot=c[1];if(vn(M,H,Ot.data)){const qt=Le(H,c,g,L,E,mt);if(qt!==$t)return qt}tt=c[H+8],-1!==tt&&io(E,c[1].data[H+8]===mt)&&vn(M,H,c)?(L=Ot,H=Ca(tt),c=Sa(tt,c)):H=-1}}}return Et(c,g,E,w)}const $t={};function me(){return new zn(Xo(),ki())}function Le(l,c,g,E,w,M){const L=c[1],H=L.data[l+8],Ot=bi(H,L,g,null==E?Co(H)&&Ol:E!=L&&0!=(3&H.type),w&fe.Host&&M===H);return null!==Ot?$i(c,L,Ot,H):$t}function bi(l,c,g,E,w){const M=l.providerIndexes,L=c.data,H=1048575&M,tt=l.directiveStart,Ot=M>>20,se=w?H+Ot:l.directiveEnd;for(let Ie=E?H:H+Ot;Ie<se;Ie++){const je=L[Ie];if(Ie<tt&&g===je||Ie>=tt&&je.type===g)return Ie}if(w){const Ie=L[tt];if(Ie&&ns(Ie)&&Ie.type===g)return tt}return null}function $i(l,c,g,E){let w=l[g];const M=c.data;if(function(l){return l instanceof qs}(w)){const L=w;L.resolving&&function(l,c){throw new it("200",`Circular dependency in DI detected for ${l}`)}(At(M[g]));const H=fl(L.canSeeViewProviders);L.resolving=!0;const tt=L.injectImpl?Ve(L.injectImpl):null;qn(l,E,fe.Default);try{w=l[g]=L.factory(void 0,M,l,E),c.firstCreatePass&&g>=E.directiveStart&&function(l,c,g){const{ngOnChanges:E,ngOnInit:w,ngDoCheck:M}=c.type.prototype;if(E){const L=xo(c);(g.preOrderHooks||(g.preOrderHooks=[])).push(l,L),(g.preOrderCheckHooks||(g.preOrderCheckHooks=[])).push(l,L)}w&&(g.preOrderHooks||(g.preOrderHooks=[])).push(0-l,w),M&&((g.preOrderHooks||(g.preOrderHooks=[])).push(l,M),(g.preOrderCheckHooks||(g.preOrderCheckHooks=[])).push(l,M))}(g,M[g],c)}finally{null!==tt&&Ve(tt),fl(H),L.resolving=!1,Tr()}}return w}function vn(l,c,g){return!!(g[c+(l>>5)]&1<<l)}function io(l,c){return!(l&fe.Self||l&fe.Host&&c)}class zn{constructor(c,g){this._tNode=c,this._lView=g}get(c,g,E){return Mt(this._tNode,this._lView,c,E,g)}}function cs(l){return at(()=>{const c=l.prototype.constructor,g=c[Xi]||lr(c),E=Object.prototype;let w=Object.getPrototypeOf(l.prototype).constructor;for(;w&&w!==E;){const M=w[Xi]||lr(w);if(M&&M!==g)return M;w=Object.getPrototypeOf(w)}return M=>new M})}function lr(l){return Y(l)?()=>{const c=lr(k(l));return c&&c()}:Ns(l)}function cr(l){return function(l,c){if("class"===c)return l.classes;if("style"===c)return l.styles;const g=l.attrs;if(g){const E=g.length;let w=0;for(;w<E;){const M=g[w];if(rr(M))break;if(0===M)w+=2;else if("number"==typeof M)for(w++;w<E&&"string"==typeof g[w];)w++;else{if(M===c)return g[w+1];w+=2}}}return null}(Xo(),l)}const Zo="__parameters__";function Qa(l,c,g){return at(()=>{const E=function(l){return function(...g){if(l){const E=l(...g);for(const w in E)this[w]=E[w]}}}(c);function w(...M){if(this instanceof w)return E.apply(this,M),this;const L=new w(...M);return H.annotation=L,H;function H(tt,mt,Ot){const qt=tt.hasOwnProperty(Zo)?tt[Zo]:Object.defineProperty(tt,Zo,{value:[]})[Zo];for(;qt.length<=Ot;)qt.push(null);return(qt[Ot]=qt[Ot]||[]).push(L),tt}}return g&&(w.prototype=Object.create(g.prototype)),w.prototype.ngMetadataName=l,w.annotationCls=w,w})}class ms{constructor(c,g){this._desc=c,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof g?this.__NG_ELEMENT_ID__=g:void 0!==g&&(this.\u0275prov=Pe({token:this,providedIn:g.providedIn||"root",factory:g.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Gc=new ms("AnalyzeForEntryComponents"),ql=Function;function Ys(l,c){void 0===c&&(c=l);for(let g=0;g<l.length;g++){let E=l[g];Array.isArray(E)?(c===l&&(c=l.slice(0,g)),Ys(E,c)):c!==l&&c.push(E)}return c}function vs(l,c){l.forEach(g=>Array.isArray(g)?vs(g,c):c(g))}function tc(l,c,g){c>=l.length?l.push(g):l.splice(c,0,g)}function ml(l,c){return c>=l.length-1?l.pop():l.splice(c,1)[0]}function qa(l,c){const g=[];for(let E=0;E<l;E++)g.push(c);return g}function ur(l,c,g){let E=el(l,c);return E>=0?l[1|E]=g:(E=~E,function(l,c,g,E){let w=l.length;if(w==c)l.push(g,E);else if(1===w)l.push(E,l[0]),l[0]=g;else{for(w--,l.push(l[w-1],l[w]);w>c;)l[w]=l[w-2],w--;l[c]=g,l[c+1]=E}}(l,E,c,g)),E}function vl(l,c){const g=el(l,c);if(g>=0)return l[1|g]}function el(l,c){return function(l,c,g){let E=0,w=l.length>>g;for(;w!==E;){const M=E+(w-E>>1),L=l[M<<g];if(c===L)return M<<g;L>c?w=M:E=M+1}return~(w<<g)}(l,c,1)}const Ha={},qr="__NG_DI_FLAG__",Vr="ngTempTokenPath",Jc=/\n/gm,yc="__source",kl=o({provide:String,useValue:o});let Ll;function Nl(l){const c=Ll;return Ll=l,c}function ec(l,c=fe.Default){if(void 0===Ll)throw new Error("inject() must be called from an injection context");return null===Ll?Zt(l,void 0,c):Ll.get(l,c&fe.Optional?null:void 0,c)}function ss(l,c=fe.Default){return(di||ec)(k(l),c)}const ch=ss;function Va(l){const c=[];for(let g=0;g<l.length;g++){const E=k(l[g]);if(Array.isArray(E)){if(0===E.length)throw new Error("Arguments array must have arguments.");let w,M=fe.Default;for(let L=0;L<E.length;L++){const H=E[L],tt=$c(H);"number"==typeof tt?-1===tt?w=H.token:M|=tt:w=H}c.push(ss(w,M))}else c.push(ss(E))}return c}function Ec(l,c){return l[qr]=c,l.prototype[qr]=c,l}function $c(l){return l[qr]}function Ou(l,c,g,E){const w=l[Vr];throw c[yc]&&w.unshift(c[yc]),l.message=function(l,c,g,E=null){l=l&&"\n"===l.charAt(0)&&"\u0275"==l.charAt(1)?l.substr(2):l;let w=p(c);if(Array.isArray(c))w=c.map(p).join(" -> ");else if("object"==typeof c){let M=[];for(let L in c)if(c.hasOwnProperty(L)){let H=c[L];M.push(L+":"+("string"==typeof H?JSON.stringify(H):p(H)))}w=`{${M.join(", ")}}`}return`${g}${E?"("+E+")":""}[${w}]: ${l.replace(Jc,"\n  ")}`}("\n"+l.message,w,g,E),l.ngTokenPath=w,l[Vr]=null,l}const Ua=Ec(Qa("Inject",l=>({token:l})),-1),Ga=Ec(Qa("Optional"),8),Da=Ec(Qa("SkipSelf"),4);let sc;function Ia(l){var c;return(null===(c=function(){if(void 0===sc&&(sc=null,pi.trustedTypes))try{sc=pi.trustedTypes.createPolicy("angular",{createHTML:l=>l,createScript:l=>l,createScriptURL:l=>l})}catch(l){}return sc}())||void 0===c?void 0:c.createHTML(l))||l}class ci{constructor(c){this.changingThisBreaksApplicationSecurity=c}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class gi extends ci{getTypeName(){return"HTML"}}class Ti extends ci{getTypeName(){return"Style"}}class dn extends ci{getTypeName(){return"Script"}}class an extends ci{getTypeName(){return"URL"}}class Bn extends ci{getTypeName(){return"ResourceURL"}}function wo(l){return l instanceof ci?l.changingThisBreaksApplicationSecurity:l}function Mn(l,c){const g=Jn(l);if(null!=g&&g!==c){if("ResourceURL"===g&&"URL"===c)return!0;throw new Error(`Required a safe ${c}, got a ${g} (see https://g.co/ng/security#xss)`)}return g===c}function Jn(l){return l instanceof ci&&l.getTypeName()||null}function Qo(l){return new gi(l)}function us(l){return new Ti(l)}function As(l){return new dn(l)}function _a(l){return new an(l)}function Ur(l){return new Bn(l)}class Ma{constructor(c){this.inertDocumentHelper=c}getInertBodyElement(c){c="<body><remove></remove>"+c;try{const g=(new window.DOMParser).parseFromString(Ia(c),"text/html").body;return null===g?this.inertDocumentHelper.getInertBodyElement(c):(g.removeChild(g.firstChild),g)}catch(g){return null}}}class rc{constructor(c){if(this.defaultDoc=c,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const g=this.inertDocument.createElement("html");this.inertDocument.appendChild(g);const E=this.inertDocument.createElement("body");g.appendChild(E)}}getInertBodyElement(c){const g=this.inertDocument.createElement("template");if("content"in g)return g.innerHTML=Ia(c),g;const E=this.inertDocument.createElement("body");return E.innerHTML=Ia(c),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(E),E}stripCustomNsAttrs(c){const g=c.attributes;for(let w=g.length-1;0<w;w--){const L=g.item(w).name;("xmlns:ns1"===L||0===L.indexOf("ns1:"))&&c.removeAttribute(L)}let E=c.firstChild;for(;E;)E.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(E),E=E.nextSibling}}const yd=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,bl=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function fr(l){return(l=String(l)).match(yd)||l.match(bl)?l:"unsafe:"+l}function Aa(l){const c={};for(const g of l.split(","))c[g]=!0;return c}function yl(...l){const c={};for(const g of l)for(const E in g)g.hasOwnProperty(E)&&(c[E]=!0);return c}const Sc=Aa("area,br,col,hr,img,wbr"),Pu=Aa("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Fu=Aa("rp,rt"),wc=yl(Sc,yl(Pu,Aa("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),yl(Fu,Aa("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),yl(Fu,Pu)),Qc=Aa("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Bu=Aa("srcset"),Wh=yl(Qc,Bu,Aa("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Aa("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Td=Aa("script,style,template");class Cd{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(c){let g=c.firstChild,E=!0;for(;g;)if(g.nodeType===Node.ELEMENT_NODE?E=this.startElement(g):g.nodeType===Node.TEXT_NODE?this.chars(g.nodeValue):this.sanitizedSomething=!0,E&&g.firstChild)g=g.firstChild;else for(;g;){g.nodeType===Node.ELEMENT_NODE&&this.endElement(g);let w=this.checkClobberedElement(g,g.nextSibling);if(w){g=w;break}g=this.checkClobberedElement(g,g.parentNode)}return this.buf.join("")}startElement(c){const g=c.nodeName.toLowerCase();if(!wc.hasOwnProperty(g))return this.sanitizedSomething=!0,!Td.hasOwnProperty(g);this.buf.push("<"),this.buf.push(g);const E=c.attributes;for(let w=0;w<E.length;w++){const M=E.item(w),L=M.name,H=L.toLowerCase();if(!Wh.hasOwnProperty(H)){this.sanitizedSomething=!0;continue}let tt=M.value;Qc[H]&&(tt=fr(tt)),Bu[H]&&(l=tt,tt=(l=String(l)).split(",").map(c=>fr(c.trim())).join(", ")),this.buf.push(" ",L,'="',qc(tt),'"')}var l;return this.buf.push(">"),!0}endElement(c){const g=c.nodeName.toLowerCase();wc.hasOwnProperty(g)&&!Sc.hasOwnProperty(g)&&(this.buf.push("</"),this.buf.push(g),this.buf.push(">"))}chars(c){this.buf.push(qc(c))}checkClobberedElement(c,g){if(g&&(c.compareDocumentPosition(g)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${c.outerHTML}`);return g}}const ac=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Sd=/([^\#-~ |!])/g;function qc(l){return l.replace(/&/g,"&amp;").replace(ac,function(c){return"&#"+(1024*(c.charCodeAt(0)-55296)+(c.charCodeAt(1)-56320)+65536)+";"}).replace(Sd,function(c){return"&#"+c.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let tu;function Dc(l,c){let g=null;try{tu=tu||function(l){const c=new rc(l);return function(){try{return!!(new window.DOMParser).parseFromString(Ia(""),"text/html")}catch(l){return!1}}()?new Ma(c):c}(l);let E=c?String(c):"";g=tu.getInertBodyElement(E);let w=5,M=E;do{if(0===w)throw new Error("Failed to sanitize html because the input is unstable");w--,E=M,M=g.innerHTML,g=tu.getInertBodyElement(E)}while(E!==M);return Ia((new Cd).sanitizeChildren(Ic(g)||g))}finally{if(g){const E=Ic(g)||g;for(;E.firstChild;)E.removeChild(E.firstChild)}}}function Ic(l){return"content"in l&&function(l){return l.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===l.nodeName}(l)?l.content:null}var ys=(()=>((ys=ys||{})[ys.NONE=0]="NONE",ys[ys.HTML=1]="HTML",ys[ys.STYLE=2]="STYLE",ys[ys.SCRIPT=3]="SCRIPT",ys[ys.URL=4]="URL",ys[ys.RESOURCE_URL=5]="RESOURCE_URL",ys))();function Oa(l){const c=function(){const l=ki();return l&&l[12]}();return c?c.sanitize(ys.URL,l)||"":Mn(l,"URL")?wo(l):fr(wt(l))}const Ac="__ngContext__";function Rr(l,c){l[Ac]=c}function Vu(l){const c=function(l){return l[Ac]||null}(l);return c?Array.isArray(c)?c:c.lView:null}function yh(l){return l.ngOriginalError}function su(l,...c){l.error(...c)}class cc{constructor(){this._console=console}handleError(c){const g=this._findOriginalError(c),E=this._findContext(c),w=(l=c)&&l.ngErrorLogger||su;var l;w(this._console,"ERROR",c),g&&w(this._console,"ORIGINAL ERROR",g),E&&w(this._console,"ERROR CONTEXT",E)}_findContext(c){return c?c.ngDebugContext||this._findContext(yh(c)):null}_findOriginalError(c){let g=c&&yh(c);for(;g&&yh(g);)g=yh(g);return g||null}}const Eh=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(pi))();function rl(l){return l instanceof Function?l():l}var ja=(()=>((ja=ja||{})[ja.Important=1]="Important",ja[ja.DashCase=2]="DashCase",ja))();function ju(l,c){return undefined(l,c)}function Tl(l){const c=l[3];return lo(c)?c[3]:c}function xc(l){return R(l[13])}function wr(l){return R(l[4])}function R(l){for(;null!==l&&!lo(l);)l=l[4];return l}function G(l,c,g,E,w){if(null!=E){let M,L=!1;lo(E)?M=E:is(E)&&(L=!0,E=E[0]);const H=q(E);0===l&&null!==g?null==w?Go(c,g,H):Jo(c,g,H,w||null,!0):1===l&&null!==g?Jo(c,g,H,w||null,!0):2===l?function(l,c,g){const E=Dr(l,c);E&&function(l,c,g,E){bt(l)?l.removeChild(c,g,E):c.removeChild(g)}(l,E,c,g)}(c,H,L):3===l&&c.destroyNode(H),null!=M&&function(l,c,g,E,w){const M=g[7];M!==q(g)&&G(c,l,E,M,w);for(let H=10;H<g.length;H++){const tt=g[H];uu(tt[1],tt,l,c,E,M)}}(c,l,M,g,w)}}function Lt(l,c,g){return bt(l)?l.createElement(c,g):null===g?l.createElement(c):l.createElementNS(g,c)}function li(l,c){const g=l[9],E=g.indexOf(c),w=c[3];1024&c[2]&&(c[2]&=-1025,Gs(w,-1)),g.splice(E,1)}function Ci(l,c){if(l.length<=10)return;const g=10+c,E=l[g];if(E){const w=E[17];null!==w&&w!==l&&li(w,E),c>0&&(l[g-1][4]=E[4]);const M=ml(l,10+c);!function(l,c){uu(l,c,c[11],2,null,null),c[0]=null,c[6]=null}(E[1],E);const L=M[19];null!==L&&L.detachView(M[1]),E[3]=null,E[4]=null,E[2]&=-129}return E}function Xt(l,c){if(!(256&c[2])){const g=c[11];bt(g)&&g.destroyNode&&uu(l,c,g,3,null,null),function(l){let c=l[13];if(!c)return xi(l[1],l);for(;c;){let g=null;if(is(c))g=c[13];else{const E=c[10];E&&(g=E)}if(!g){for(;c&&!c[4]&&c!==l;)is(c)&&xi(c[1],c),c=c[3];null===c&&(c=l),is(c)&&xi(c[1],c),g=c&&c[4]}c=g}}(c)}}function xi(l,c){if(!(256&c[2])){c[2]&=-129,c[2]|=256,function(l,c){let g;if(null!=l&&null!=(g=l.destroyHooks))for(let E=0;E<g.length;E+=2){const w=c[g[E]];if(!(w instanceof qs)){const M=g[E+1];if(Array.isArray(M))for(let L=0;L<M.length;L+=2){const H=w[M[L]],tt=M[L+1];try{tt.call(H)}finally{}}else try{M.call(w)}finally{}}}}(l,c),function(l,c){const g=l.cleanup,E=c[7];let w=-1;if(null!==g)for(let M=0;M<g.length-1;M+=2)if("string"==typeof g[M]){const L=g[M+1],H="function"==typeof L?L(c):q(c[L]),tt=E[w=g[M+2]],mt=g[M+3];"boolean"==typeof mt?H.removeEventListener(g[M],tt,mt):mt>=0?E[w=mt]():E[w=-mt].unsubscribe(),M+=2}else{const L=E[w=g[M+1]];g[M].call(L)}if(null!==E){for(let M=w+1;M<E.length;M++)E[M]();c[7]=null}}(l,c),1===c[1].type&&bt(c[11])&&c[11].destroy();const g=c[17];if(null!==g&&lo(c[3])){g!==c[3]&&li(g,c);const E=c[19];null!==E&&E.detachView(l)}}}function uo(l,c,g){return function(l,c,g){let E=c;for(;null!==E&&40&E.type;)E=(c=E).parent;if(null===E)return g[0];if(2&E.flags){const w=l.data[E.directiveStart].encapsulation;if(w===Ee.None||w===Ee.Emulated)return null}return Ii(E,g)}(l,c.parent,g)}function Jo(l,c,g,E,w){bt(l)?l.insertBefore(c,g,E,w):c.insertBefore(g,E,w)}function Go(l,c,g){bt(l)?l.appendChild(c,g):c.appendChild(g)}function yo(l,c,g,E,w){null!==E?Jo(l,c,g,E,w):Go(l,c,g)}function Dr(l,c){return bt(l)?l.parentNode(c):c.parentNode}function tr(l,c,g){return Xs(l,c,g)}let Xs=function(l,c,g){return 40&l.type?Ii(l,g):null};function ma(l,c,g,E){const w=uo(l,E,c),M=c[11],H=tr(E.parent||c[6],E,c);if(null!=w)if(Array.isArray(g))for(let tt=0;tt<g.length;tt++)yo(M,w,g[tt],H,!1);else yo(M,w,g,H,!1)}function Sl(l,c){if(null!==c){const g=c.type;if(3&g)return Ii(c,l);if(4&g)return cu(-1,l[c.index]);if(8&g){const E=c.child;if(null!==E)return Sl(l,E);{const w=l[c.index];return lo(w)?cu(-1,w):q(w)}}if(32&g)return ju(c,l)()||q(l[c.index]);{const E=hc(l,c);return null!==E?Array.isArray(E)?E[0]:Sl(Tl(l[16]),E):Sl(l,c.next)}}return null}function hc(l,c){return null!==c?l[16][6].projection[c.projection]:null}function cu(l,c){const g=10+l+1;if(g<c.length){const E=c[g],w=E[1].firstChild;if(null!==w)return Sl(E,w)}return c[7]}function Ul(l,c,g,E,w,M,L){for(;null!=g;){const H=E[g.index],tt=g.type;if(L&&0===c&&(H&&Rr(q(H),E),g.flags|=4),64!=(64&g.flags))if(8&tt)Ul(l,c,g.child,E,w,M,!1),G(c,l,w,H,M);else if(32&tt){const mt=ju(g,E);let Ot;for(;Ot=mt();)G(c,l,w,Ot,M);G(c,l,w,H,M)}else 16&tt?_p(l,c,E,g,w,M):G(c,l,w,H,M);g=L?g.projectionNext:g.next}}function uu(l,c,g,E,w,M){Ul(g,E,l.firstChild,c,w,M,!1)}function _p(l,c,g,E,w,M){const L=g[16],tt=L[6].projection[E.projection];if(Array.isArray(tt))for(let mt=0;mt<tt.length;mt++)G(c,l,w,tt[mt],M);else Ul(l,c,tt,L[3],w,M,!0)}function mp(l,c,g){bt(l)?l.setAttribute(c,"style",g):c.style.cssText=g}function Hd(l,c,g){bt(l)?""===g?l.removeAttribute(c,"class"):l.setAttribute(c,"class",g):c.className=g}function vp(l,c,g){let E=l.length;for(;;){const w=l.indexOf(c,g);if(-1===w)return w;if(0===w||l.charCodeAt(w-1)<=32){const M=c.length;if(w+M===E||l.charCodeAt(w+M)<=32)return w}g=w+1}}const Vd="ng-template";function Tf(l,c,g){let E=0;for(;E<l.length;){let w=l[E++];if(g&&"class"===w){if(w=l[E],-1!==vp(w.toLowerCase(),c,0))return!0}else if(1===w){for(;E<l.length&&"string"==typeof(w=l[E++]);)if(w.toLowerCase()===c)return!0;return!1}}return!1}function ed(l){return 4===l.type&&l.value!==Vd}function Th(l,c,g){return c===(4!==l.type||g?l.value:Vd)}function bp(l,c,g){let E=4;const w=l.attrs||[],M=function(l){for(let c=0;c<l.length;c++)if(rr(l[c]))return c;return l.length}(w);let L=!1;for(let H=0;H<c.length;H++){const tt=c[H];if("number"!=typeof tt){if(!L)if(4&E){if(E=2|1&E,""!==tt&&!Th(l,tt,g)||""===tt&&1===c.length){if(Rl(E))return!1;L=!0}}else{const mt=8&E?tt:c[++H];if(8&E&&null!==l.attrs){if(!Tf(l.attrs,mt,g)){if(Rl(E))return!1;L=!0}continue}const qt=Cf(8&E?"class":tt,w,ed(l),g);if(-1===qt){if(Rl(E))return!1;L=!0;continue}if(""!==mt){let se;se=qt>M?"":w[qt+1].toLowerCase();const Ie=8&E?se:null;if(Ie&&-1!==vp(Ie,mt,0)||2&E&&mt!==se){if(Rl(E))return!1;L=!0}}}}else{if(!L&&!Rl(E)&&!Rl(tt))return!1;if(L&&Rl(tt))continue;L=!1,E=tt|1&E}}return Rl(E)||L}function Rl(l){return 0==(1&l)}function Cf(l,c,g,E){if(null===c)return-1;let w=0;if(E||!g){let M=!1;for(;w<c.length;){const L=c[w];if(L===l)return w;if(3===L||6===L)M=!0;else{if(1===L||2===L){let H=c[++w];for(;"string"==typeof H;)H=c[++w];continue}if(4===L)break;if(0===L){w+=4;continue}}w+=M?1:2}return-1}return function(l,c){let g=l.indexOf(4);if(g>-1)for(g++;g<l.length;){const E=l[g];if("number"==typeof E)return-1;if(E===c)return g;g++}return-1}(c,l)}function yp(l,c,g=!1){for(let E=0;E<c.length;E++)if(bp(l,c[E],g))return!0;return!1}function Df(l,c){t:for(let g=0;g<c.length;g++){const E=c[g];if(l.length===E.length){for(let w=0;w<l.length;w++)if(l[w]!==E[w])continue t;return!0}}return!1}function Ya(l,c){return l?":not("+c.trim()+")":c}function If(l){let c=l[0],g=1,E=2,w="",M=!1;for(;g<l.length;){let L=l[g];if("string"==typeof L)if(2&E){const H=l[++g];w+="["+L+(H.length>0?'="'+H+'"':"")+"]"}else 8&E?w+="."+L:4&E&&(w+=" "+L);else""!==w&&!Rl(L)&&(c+=Ya(M,w),w=""),E=L,M=M||!Rl(E);g++}return""!==w&&(c+=Ya(M,w)),c}const Un={};function Tp(l){Cp(Rn(),ki(),Bo()+l,Ht())}function Cp(l,c,g,E){if(!E)if(3==(3&c[2])){const M=l.preOrderCheckHooks;null!==M&&Mo(c,M,g)}else{const M=l.preOrderHooks;null!==M&&Ro(c,M,0,g)}Br(g)}function id(l,c){return l<<17|c<<2}function wl(l){return l>>17&32767}function Ch(l){return 2|l}function dc(l){return(131068&l)>>2}function nd(l,c){return-131069&l|c<<2}function Ud(l){return 1|l}function Kd(l,c){const g=l.contentQueries;if(null!==g)for(let E=0;E<g.length;E+=2){const w=g[E],M=g[E+1];if(-1!==M){const L=l.data[M];ko(w),L.contentQueries(2,c[M],M)}}}function Gl(l,c,g,E,w,M,L,H,tt,mt){const Ot=c.blueprint.slice();return Ot[0]=w,Ot[2]=140|E,Zs(Ot),Ot[3]=Ot[15]=l,Ot[8]=g,Ot[10]=L||l&&l[10],Ot[11]=H||l&&l[11],Ot[12]=tt||l&&l[12]||null,Ot[9]=mt||l&&l[9]||null,Ot[6]=M,Ot[16]=2==c.type?l[16]:Ot,Ot}function Qu(l,c,g,E,w){let M=l.data[c];if(null===M)M=function(l,c,g,E,w){const M=yr(),L=Bt(),tt=l.data[c]=function(l,c,g,E,w,M){return{type:g,index:E,insertBeforeIndex:null,injectorIndex:c?c.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:w,attrs:M,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:c,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,L?M:M&&M.parent,g,c,E,w);return null===l.firstChild&&(l.firstChild=tt),null!==M&&(L?null==M.child&&null!==tt.parent&&(M.child=tt):null===M.next&&(M.next=tt)),tt}(l,c,g,E,w),un.lFrame.inI18n&&(M.flags|=64);else if(64&M.type){M.type=g,M.value=E,M.attrs=w;const L=function(){const l=un.lFrame,c=l.currentTNode;return l.isParent?c:c.parent}();M.injectorIndex=null===L?-1:L.injectorIndex}return Ps(M,!0),M}function ka(l,c,g,E){if(0===g)return-1;const w=c.length;for(let M=0;M<g;M++)c.push(E),l.blueprint.push(E),l.data.push(null);return w}function du(l,c,g){sr(c);try{const E=l.viewQuery;null!==E&&op(1,E,g);const w=l.template;null!==w&&ld(l,c,w,1,g),l.firstCreatePass&&(l.firstCreatePass=!1),l.staticContentQueries&&Kd(l,c),l.staticViewQueries&&op(2,l.viewQuery,g);const M=l.components;null!==M&&function(l,c){for(let g=0;g<c.length;g++)Lh(l,c[g])}(c,M)}catch(E){throw l.firstCreatePass&&(l.incompleteFirstPass=!0,l.firstCreatePass=!1),E}finally{c[2]&=-5,Ms()}}function Nc(l,c,g,E){const w=c[2];if(256==(256&w))return;sr(c);const M=Ht();try{Zs(c),function(l){un.lFrame.bindingIndex=l}(l.bindingStartIndex),null!==g&&ld(l,c,g,2,E);const L=3==(3&w);if(!M)if(L){const mt=l.preOrderCheckHooks;null!==mt&&Mo(c,mt,null)}else{const mt=l.preOrderHooks;null!==mt&&Ro(c,mt,0,null),da(c,0)}if(function(l){for(let c=xc(l);null!==c;c=wr(c)){if(!c[2])continue;const g=c[9];for(let E=0;E<g.length;E++){const w=g[E],M=w[3];0==(1024&w[2])&&Gs(M,1),w[2]|=1024}}}(c),function(l){for(let c=xc(l);null!==c;c=wr(c))for(let g=10;g<c.length;g++){const E=c[g],w=E[1];Fo(E)&&Nc(w,E,w.template,E[8])}}(c),null!==l.contentQueries&&Kd(l,c),!M)if(L){const mt=l.contentCheckHooks;null!==mt&&Mo(c,mt)}else{const mt=l.contentHooks;null!==mt&&Ro(c,mt,1),da(c,1)}!function(l,c){const g=l.hostBindingOpCodes;if(null!==g)try{for(let E=0;E<g.length;E++){const w=g[E];if(w<0)Br(~w);else{const M=w,L=g[++E],H=g[++E];Ln(L,M),H(2,c[M])}}}finally{Br(-1)}}(l,c);const H=l.components;null!==H&&function(l,c){for(let g=0;g<c.length;g++)Hf(l,c[g])}(c,H);const tt=l.viewQuery;if(null!==tt&&op(2,tt,E),!M)if(L){const mt=l.viewCheckHooks;null!==mt&&Mo(c,mt)}else{const mt=l.viewHooks;null!==mt&&Ro(c,mt,2),da(c,2)}!0===l.firstUpdatePass&&(l.firstUpdatePass=!1),M||(c[2]&=-73),1024&c[2]&&(c[2]&=-1025,Gs(c[3],-1))}finally{Ms()}}function xp(l,c,g,E){const w=c[10],M=!Ht(),L=_o(c);try{M&&!L&&w.begin&&w.begin(),L&&du(l,c,E),Nc(l,c,g,E)}finally{M&&!L&&w.end&&w.end()}}function ld(l,c,g,E,w){const M=Bo(),L=2&E;try{Br(-1),L&&c.length>20&&Cp(l,c,20,Ht()),g(E,w)}finally{Br(M)}}function $d(l,c,g){if(ks(c)){const w=c.directiveEnd;for(let M=c.directiveStart;M<w;M++){const L=l.data[M];L.contentQueries&&L.contentQueries(1,g[M],M)}}}function wh(l,c,g){!hl()||(function(l,c,g,E){const w=g.directiveStart,M=g.directiveEnd;l.firstCreatePass||gl(g,c),Rr(E,c);const L=g.initialInputs;for(let H=w;H<M;H++){const tt=l.data[H],mt=ns(tt);mt&&Fg(c,g,tt);const Ot=$i(c,l,H,g);Rr(Ot,c),null!==L&&ep(0,H-w,Ot,tt,0,L),mt&&(ao(g.index,c)[8]=Ot)}}(l,c,g,Ii(g,c)),128==(128&g.flags)&&function(l,c,g){const E=g.directiveStart,w=g.directiveEnd,L=g.index,H=un.lFrame.currentDirectiveIndex;try{Br(L);for(let tt=E;tt<w;tt++){const mt=l.data[tt],Ot=c[tt];bn(tt),(null!==mt.hostBindings||0!==mt.hostVars||null!==mt.hostAttrs)&&tp(mt,Ot)}}finally{Br(-1),bn(H)}}(l,c,g))}function Zd(l,c,g=Ii){const E=c.localNames;if(null!==E){let w=c.index+1;for(let M=0;M<E.length;M+=2){const L=E[M+1],H=-1===L?g(c,l):l[L];l[w++]=H}}}function Nf(l){const c=l.tView;return null===c||c.incompleteFirstPass?l.tView=qu(1,null,l.template,l.decls,l.vars,l.directiveDefs,l.pipeDefs,l.viewQuery,l.schemas,l.consts):c}function qu(l,c,g,E,w,M,L,H,tt,mt){const Ot=20+E,qt=Ot+w,se=function(l,c){const g=[];for(let E=0;E<c;E++)g.push(E<l?null:Un);return g}(Ot,qt),Ie="function"==typeof mt?mt():mt;return se[1]={type:l,blueprint:se,template:g,queries:null,viewQuery:H,declTNode:c,data:se.slice().fill(null,Ot),bindingStartIndex:Ot,expandoStartIndex:qt,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof M?M():M,pipeRegistry:"function"==typeof L?L():L,firstChild:null,schemas:tt,consts:Ie,incompleteFirstPass:!1}}function Np(l,c,g,E){const w=Vp(c);null===g?w.push(E):(w.push(g),l.firstCreatePass&&Up(l).push(E,w.length-1))}function Mh(l,c,g){for(let E in l)if(l.hasOwnProperty(E)){const w=l[E];(g=null===g?{}:g).hasOwnProperty(E)?g[E].push(c,w):g[E]=[c,w]}return g}function va(l,c,g,E,w,M,L,H){const tt=Ii(c,g);let Ot,mt=c.inputs;!H&&null!=mt&&(Ot=mt[E])?(La(l,g,Ot,E,w),Co(c)&&function(l,c){const g=ao(c,l);16&g[2]||(g[2]|=64)}(g,c.index)):3&c.type&&(E=function(l){return"class"===l?"className":"for"===l?"htmlFor":"formaction"===l?"formAction":"innerHtml"===l?"innerHTML":"readonly"===l?"readOnly":"tabindex"===l?"tabIndex":l}(E),w=null!=L?L(w,c.value||"",E):w,bt(M)?M.setProperty(tt,E,w):js(E)||(tt.setProperty?tt.setProperty(E,w):tt[E]=w))}function Pp(l,c,g,E){let w=!1;if(hl()){const M=function(l,c,g){const E=l.directiveRegistry;let w=null;if(E)for(let M=0;M<E.length;M++){const L=E[M];yp(g,L.selectors,!1)&&(w||(w=[]),lt(gl(g,c),l,L.type),ns(L)?(Ah(l,g),w.unshift(L)):w.push(L))}return w}(l,c,g),L=null===E?null:{"":-1};if(null!==M){w=!0,xh(g,l.data.length,M.length);for(let Ot=0;Ot<M.length;Ot++){const qt=M[Ot];qt.providersResolver&&qt.providersResolver(qt)}let H=!1,tt=!1,mt=ka(l,c,M.length,null);for(let Ot=0;Ot<M.length;Ot++){const qt=M[Ot];g.mergedAttrs=Al(g.mergedAttrs,qt.hostAttrs),Pg(l,g,c,mt,qt),Wl(mt,qt,L),null!==qt.contentQueries&&(g.flags|=8),(null!==qt.hostBindings||null!==qt.hostAttrs||0!==qt.hostVars)&&(g.flags|=128);const se=qt.type.prototype;!H&&(se.ngOnChanges||se.ngOnInit||se.ngDoCheck)&&((l.preOrderHooks||(l.preOrderHooks=[])).push(g.index),H=!0),!tt&&(se.ngOnChanges||se.ngDoCheck)&&((l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(g.index),tt=!0),mt++}!function(l,c){const E=c.directiveEnd,w=l.data,M=c.attrs,L=[];let H=null,tt=null;for(let mt=c.directiveStart;mt<E;mt++){const Ot=w[mt],qt=Ot.inputs,se=null===M||ed(c)?null:Bg(qt,M);L.push(se),H=Mh(qt,mt,H),tt=Mh(Ot.outputs,mt,tt)}null!==H&&(H.hasOwnProperty("class")&&(c.flags|=16),H.hasOwnProperty("style")&&(c.flags|=32)),c.initialInputs=L,c.inputs=H,c.outputs=tt}(l,g)}L&&function(l,c,g){if(c){const E=l.localNames=[];for(let w=0;w<c.length;w+=2){const M=g[c[w+1]];if(null==M)throw new it("301",`Export of name '${c[w+1]}' not found!`);E.push(c[w],M)}}}(g,E,L)}return g.mergedAttrs=Al(g.mergedAttrs,g.attrs),w}function Bf(l,c,g,E,w,M){const L=M.hostBindings;if(L){let H=l.hostBindingOpCodes;null===H&&(H=l.hostBindingOpCodes=[]);const tt=~c.index;(function(l){let c=l.length;for(;c>0;){const g=l[--c];if("number"==typeof g&&g<0)return g}return 0})(H)!=tt&&H.push(tt),H.push(E,w,L)}}function tp(l,c){null!==l.hostBindings&&l.hostBindings(1,c)}function Ah(l,c){c.flags|=2,(l.components||(l.components=[])).push(c.index)}function Wl(l,c,g){if(g){if(c.exportAs)for(let E=0;E<c.exportAs.length;E++)g[c.exportAs[E]]=l;ns(c)&&(g[""]=l)}}function xh(l,c,g){l.flags|=1,l.directiveStart=c,l.directiveEnd=c+g,l.providerIndexes=c}function Pg(l,c,g,E,w){l.data[E]=w;const M=w.factory||(w.factory=Ns(w.type)),L=new qs(M,ns(w),null);l.blueprint[E]=L,g[E]=L,Bf(l,c,0,E,ka(l,g,w.hostVars,Un),w)}function Fg(l,c,g){const E=Ii(c,l),w=Nf(g),M=l[10],L=Nh(l,Gl(l,w,null,g.onPush?64:16,E,c,M,M.createRenderer(E,g),null,null));l[c.index]=L}function Xa(l,c,g,E,w,M){const L=Ii(l,c);!function(l,c,g,E,w,M,L){if(null==M)bt(l)?l.removeAttribute(c,w,g):c.removeAttribute(w);else{const H=null==L?wt(M):L(M,E||"",w);bt(l)?l.setAttribute(c,w,H,g):g?c.setAttributeNS(g,w,H):c.setAttribute(w,H)}}(c[11],L,M,l.value,g,E,w)}function ep(l,c,g,E,w,M){const L=M[c];if(null!==L){const H=E.setInput;for(let tt=0;tt<L.length;){const mt=L[tt++],Ot=L[tt++],qt=L[tt++];null!==H?E.setInput(g,qt,mt,Ot):g[Ot]=qt}}}function Bg(l,c){let g=null,E=0;for(;E<c.length;){const w=c[E];if(0!==w)if(5!==w){if("number"==typeof w)break;l.hasOwnProperty(w)&&(null===g&&(g=[]),g.push(w,l[w],c[E+1])),E+=2}else E+=2;else E+=4}return g}function dd(l,c,g,E){return new Array(l,!0,!1,c,null,0,E,g,null,null)}function Hf(l,c){const g=ao(c,l);if(Fo(g)){const E=g[1];80&g[2]?Nc(E,g,E.template,g[8]):g[5]>0&&kh(g)}}function kh(l){for(let E=xc(l);null!==E;E=wr(E))for(let w=10;w<E.length;w++){const M=E[w];if(1024&M[2]){const L=M[1];Nc(L,M,L.template,M[8])}else M[5]>0&&kh(M)}const g=l[1].components;if(null!==g)for(let E=0;E<g.length;E++){const w=ao(g[E],l);Fo(w)&&w[5]>0&&kh(w)}}function Lh(l,c){const g=ao(c,l),E=g[1];(function(l,c){for(let g=c.length;g<l.blueprint.length;g++)c.push(l.blueprint[g])})(E,g),du(E,g,g[8])}function Nh(l,c){return l[13]?l[14][4]=c:l[13]=c,l[14]=c,c}function fd(l){for(;l;){l[2]|=64;const c=Tl(l);if(Oo(l)&&!c)return l;l=c}return null}function ip(l,c,g){const E=c[10];E.begin&&E.begin();try{Nc(l,c,l.template,g)}catch(w){throw Wf(c,w),w}finally{E.end&&E.end()}}function np(l){!function(l){for(let c=0;c<l.components.length;c++){const g=l.components[c],E=Vu(g),w=E[1];xp(w,E,w.template,g)}}(l[8])}function op(l,c,g){ko(0),c(l,g)}const Gf=(()=>Promise.resolve(null))();function Vp(l){return l[7]||(l[7]=[])}function Up(l){return l.cleanup||(l.cleanup=[])}function Gp(l,c,g){return(null===l||ns(l))&&(g=function(l){for(;Array.isArray(l);){if("object"==typeof l[1])return l;l=l[0]}return null}(g[c.index])),g[11]}function Wf(l,c){const g=l[9],E=g?g.get(cc,null):null;E&&E.handleError(c)}function La(l,c,g,E,w){for(let M=0;M<g.length;){const L=g[M++],H=g[M++],tt=c[L],mt=l.data[L];null!==mt.setInput?mt.setInput(tt,w,E,H):tt[H]=w}}function gc(l,c,g){const E=ze(c,l);!function(l,c,g){bt(l)?l.setValue(c,g):c.textContent=g}(l[11],E,g)}function m(l,c,g){let E=g?l.styles:null,w=g?l.classes:null,M=0;if(null!==c)for(let L=0;L<c.length;L++){const H=c[L];"number"==typeof H?M=H:1==M?w=b(w,H):2==M&&(E=b(E,H+": "+c[++L]+";"))}g?l.styles=E:l.stylesWithoutHost=E,g?l.classes=w:l.classesWithoutHost=w}const f=new ms("INJECTOR",-1);class _{get(c,g=Ha){if(g===Ha){const E=new Error(`NullInjectorError: No provider for ${p(c)}!`);throw E.name="NullInjectorError",E}return g}}const C=new ms("Set Injector scope."),D={},A={};let F;function K(){return void 0===F&&(F=new _),F}function It(l,c=null,g=null,E){return new Vt(l,g,c||K(),E)}class Vt{constructor(c,g,E,w=null){this.parent=E,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const M=[];g&&vs(g,H=>this.processProvider(H,c,g)),vs([c],H=>this.processInjectorType(H,[],M)),this.records.set(f,si(void 0,this));const L=this.records.get(C);this.scope=null!=L?L.value:null,this.source=w||("object"==typeof c?null:p(c))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(c=>c.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(c,g=Ha,E=fe.Default){this.assertNotDestroyed();const w=Nl(this),M=Ve(void 0);try{if(!(E&fe.SkipSelf)){let H=this.records.get(c);if(void 0===H){const tt=("function"==typeof(l=c)||"object"==typeof l&&l instanceof ms)&&wi(c);H=tt&&this.injectableDefInScope(tt)?si(ee(c),D):null,this.records.set(c,H)}if(null!=H)return this.hydrate(c,H)}return(E&fe.Self?K():this.parent).get(c,g=E&fe.Optional&&g===Ha?null:g)}catch(L){if("NullInjectorError"===L.name){if((L[Vr]=L[Vr]||[]).unshift(p(c)),w)throw L;return Ou(L,c,"R3InjectorError",this.source)}throw L}finally{Ve(M),Nl(w)}var l}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(c=>this.get(c))}toString(){const c=[];return this.records.forEach((E,w)=>c.push(p(w))),`R3Injector[${c.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(c,g,E){if(!(c=k(c)))return!1;let w=Oe(c);const M=null==w&&c.ngModule||void 0,L=void 0===M?c:M,H=-1!==E.indexOf(L);if(void 0!==M&&(w=Oe(M)),null==w)return!1;if(null!=w.imports&&!H){let Ot;E.push(L);try{vs(w.imports,qt=>{this.processInjectorType(qt,g,E)&&(void 0===Ot&&(Ot=[]),Ot.push(qt))})}finally{}if(void 0!==Ot)for(let qt=0;qt<Ot.length;qt++){const{ngModule:se,providers:Ie}=Ot[qt];vs(Ie,je=>this.processProvider(je,se,Ie||xe))}}this.injectorDefTypes.add(L);const tt=Ns(L)||(()=>new L);this.records.set(L,si(tt,D));const mt=w.providers;if(null!=mt&&!H){const Ot=c;vs(mt,qt=>this.processProvider(qt,Ot,mt))}return void 0!==M&&void 0!==c.providers}processProvider(c,g,E){let w=Ki(c=k(c))?c:k(c&&c.provide);const M=Wi(l=c)?si(void 0,l.useValue):si(De(l),D);var l;if(Ki(c)||!0!==c.multi)this.records.get(w);else{let L=this.records.get(w);L||(L=si(void 0,D,!0),L.factory=()=>Va(L.multi),this.records.set(w,L)),w=c,L.multi.push(c)}this.records.set(w,M)}hydrate(c,g){return g.value===D&&(g.value=A,g.value=g.factory()),"object"==typeof g.value&&g.value&&null!==(l=g.value)&&"object"==typeof l&&"function"==typeof l.ngOnDestroy&&this.onDestroy.add(g.value),g.value;var l}injectableDefInScope(c){if(!c.providedIn)return!1;const g=k(c.providedIn);return"string"==typeof g?"any"===g||g===this.scope:this.injectorDefTypes.has(g)}}function ee(l){const c=wi(l),g=null!==c?c.factory:Ns(l);if(null!==g)return g;if(l instanceof ms)throw new Error(`Token ${p(l)} is missing a \u0275prov definition.`);if(l instanceof Function)return function(l){const c=l.length;if(c>0){const E=qa(c,"?");throw new Error(`Can't resolve all parameters for ${p(l)}: (${E.join(", ")}).`)}const g=function(l){const c=l&&(l[Be]||l[ie]);if(c){const g=function(l){if(l.hasOwnProperty("name"))return l.name;const c=(""+l).match(/^function\s*([^\s(]+)/);return null===c?"":c[1]}(l);return console.warn(`DEPRECATED: DI is instantiating a token "${g}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${g}" class.`),c}return null}(l);return null!==g?()=>g.factory(l):()=>new l}(l);throw new Error("unreachable")}function De(l,c,g){let E;if(Ki(l)){const w=k(l);return Ns(w)||ee(w)}if(Wi(l))E=()=>k(l.useValue);else if(function(l){return!(!l||!l.useFactory)}(l))E=()=>l.useFactory(...Va(l.deps||[]));else if(function(l){return!(!l||!l.useExisting)}(l))E=()=>ss(k(l.useExisting));else{const w=k(l&&(l.useClass||l.provide));if(!function(l){return!!l.deps}(l))return Ns(w)||ee(w);E=()=>new w(...Va(l.deps))}return E}function si(l,c,g=!1){return{factory:l,value:c,multi:g?[]:void 0}}function Wi(l){return null!==l&&"object"==typeof l&&kl in l}function Ki(l){return"function"==typeof l}const Ho=function(l,c,g){return function(l,c=null,g=null,E){const w=It(l,c,g,E);return w._resolveInjectorDefTypes(),w}({name:g},c,l,g)};let Hi=(()=>{class l{static create(g,E){return Array.isArray(g)?Ho(g,E,""):Ho(g.providers,g.parent,g.name||"")}}return l.THROW_IF_NOT_FOUND=Ha,l.NULL=new _,l.\u0275prov=Pe({token:l,providedIn:"any",factory:()=>ss(f)}),l.__NG_ELEMENT_ID__=-1,l})();function wT(l,c){ls(Vu(l)[1],Xo())}function D_(l){let c=function(l){return Object.getPrototypeOf(l.prototype).constructor}(l.type),g=!0;const E=[l];for(;c;){let w;if(ns(l))w=c.\u0275cmp||c.\u0275dir;else{if(c.\u0275cmp)throw new Error("Directives cannot inherit Components");w=c.\u0275dir}if(w){if(g){E.push(w);const L=l;L.inputs=I_(l.inputs),L.declaredInputs=I_(l.declaredInputs),L.outputs=I_(l.outputs);const H=w.hostBindings;H&&AT(l,H);const tt=w.viewQuery,mt=w.contentQueries;if(tt&&IT(l,tt),mt&&MT(l,mt),r(l.inputs,w.inputs),r(l.declaredInputs,w.declaredInputs),r(l.outputs,w.outputs),ns(w)&&w.data.animation){const Ot=l.data;Ot.animation=(Ot.animation||[]).concat(w.data.animation)}}const M=w.features;if(M)for(let L=0;L<M.length;L++){const H=M[L];H&&H.ngInherit&&H(l),H===D_&&(g=!1)}}c=Object.getPrototypeOf(c)}!function(l){let c=0,g=null;for(let E=l.length-1;E>=0;E--){const w=l[E];w.hostVars=c+=w.hostVars,w.hostAttrs=Al(w.hostAttrs,g=Al(g,w.hostAttrs))}}(E)}function I_(l){return l===ne?{}:l===xe?[]:l}function IT(l,c){const g=l.viewQuery;l.viewQuery=g?(E,w)=>{c(E,w),g(E,w)}:c}function MT(l,c){const g=l.contentQueries;l.contentQueries=g?(E,w,M)=>{c(E,w,M),g(E,w,M)}:c}function AT(l,c){const g=l.hostBindings;l.hostBindings=g?(E,w)=>{c(E,w),g(E,w)}:c}let Gg=null;function Wp(){if(!Gg){const l=pi.Symbol;if(l&&l.iterator)Gg=l.iterator;else{const c=Object.getOwnPropertyNames(Map.prototype);for(let g=0;g<c.length;++g){const E=c[g];"entries"!==E&&"size"!==E&&Map.prototype[E]===Map.prototype.entries&&(Gg=E)}}}return Gg}class gu{constructor(c){this.wrapped=c}static wrap(c){return new gu(c)}static unwrap(c){return gu.isWrapped(c)?c.wrapped:c}static isWrapped(c){return c instanceof gu}}function jf(l){return!!M_(l)&&(Array.isArray(l)||!(l instanceof Map)&&Wp()in l)}function M_(l){return null!==l&&("function"==typeof l||"object"==typeof l)}function eh(l,c,g){return l[c]=g}function al(l,c,g){return!Object.is(l[c],g)&&(l[c]=g,!0)}function sp(l,c,g,E){const w=al(l,c,g);return al(l,c+1,E)||w}function A_(l,c,g,E){const w=ki();return al(w,mi(),c)&&(Rn(),Xa(co(),w,l,c,g,E)),A_}function jp(l,c,g,E){return al(l,mi(),g)?c+wt(g)+E:Un}function Xp(l,c,g,E,w,M,L,H){const mt=function(l,c,g,E,w){const M=sp(l,c,g,E);return al(l,c+2,w)||M}(l,Se(),g,w,L);return Gi(3),mt?c+wt(g)+E+wt(w)+M+wt(L)+H:Un}function Av(l,c,g,E,w,M,L,H){const tt=ki(),mt=Rn(),Ot=l+20,qt=mt.firstCreatePass?function(l,c,g,E,w,M,L,H,tt){const mt=c.consts,Ot=Qu(c,l,4,L||null,os(mt,H));Pp(c,g,Ot,os(mt,tt)),ls(c,Ot);const qt=Ot.tViews=qu(2,Ot,E,w,M,c.directiveRegistry,c.pipeRegistry,null,c.schemas,mt);return null!==c.queries&&(c.queries.template(c,Ot),qt.queries=c.queries.embeddedTView(Ot)),Ot}(Ot,mt,tt,c,g,E,w,M,L):mt.data[Ot];Ps(qt,!1);const se=tt[11].createComment("");ma(mt,tt,se,qt),Rr(se,tt),Nh(tt,tt[Ot]=dd(se,tt,se,qt)),ws(qt)&&wh(mt,tt,qt),null!=L&&Zd(tt,qt,H)}function Ov(l){return En(un.lFrame.contextLView,20+l)}function Xf(l,c=fe.Default){const g=ki();return null===g?ss(l,c):Mt(Xo(),g,k(l),c)}function N_(l,c,g){const E=ki();return al(E,mi(),c)&&va(Rn(),co(),E,l,c,E[11],g,!1),N_}function P_(l,c,g,E,w){const L=w?"class":"style";La(l,g,c.inputs[L],L,E)}function F_(l,c,g,E){const w=ki(),M=Rn(),L=20+l,H=w[11],tt=w[L]=Lt(H,c,un.lFrame.currentNamespace),mt=M.firstCreatePass?function(l,c,g,E,w,M,L){const H=c.consts,mt=Qu(c,l,2,w,os(H,M));return Pp(c,g,mt,os(H,L)),null!==mt.attrs&&m(mt,mt.attrs,!1),null!==mt.mergedAttrs&&m(mt,mt.mergedAttrs,!0),null!==c.queries&&c.queries.elementStart(c,mt),mt}(L,M,w,0,c,g,E):M.data[L];Ps(mt,!0);const Ot=mt.mergedAttrs;null!==Ot&&Xl(H,tt,Ot);const qt=mt.classes;null!==qt&&Hd(H,tt,qt);const se=mt.styles;null!==se&&mp(H,tt,se),64!=(64&mt.flags)&&ma(M,w,tt,mt),0===un.lFrame.elementDepthCount&&Rr(tt,w),un.lFrame.elementDepthCount++,ws(mt)&&(wh(M,w,mt),$d(M,mt,w)),null!==E&&Zd(w,mt)}function B_(){let l=Xo();Bt()?V():(l=l.parent,Ps(l,!1));const c=l;un.lFrame.elementDepthCount--;const g=Rn();g.firstCreatePass&&(ls(g,l),ks(l)&&g.queries.elementEnd(l)),null!=c.classesWithoutHost&&function(l){return 0!=(16&l.flags)}(c)&&P_(g,c,ki(),c.classesWithoutHost,!0),null!=c.stylesWithoutHost&&function(l){return 0!=(32&l.flags)}(c)&&P_(g,c,ki(),c.stylesWithoutHost,!1)}function Wv(l,c,g,E){F_(l,c,g,E),B_()}function H_(l,c,g){const E=ki(),w=Rn(),M=l+20,L=w.firstCreatePass?function(l,c,g,E,w){const M=c.consts,L=os(M,E),H=Qu(c,l,8,"ng-container",L);return null!==L&&m(H,L,!0),Pp(c,g,H,os(M,w)),null!==c.queries&&c.queries.elementStart(c,H),H}(M,w,E,c,g):w.data[M];Ps(L,!0);const H=E[M]=E[11].createComment("");ma(w,E,H,L),Rr(H,E),ws(L)&&(wh(w,E,L),$d(w,L,E)),null!=g&&Zd(E,L)}function V_(){let l=Xo();const c=Rn();Bt()?V():(l=l.parent,Ps(l,!1)),c.firstCreatePass&&(ls(c,l),ks(l)&&c.queries.elementEnd(l))}function zv(l,c,g){H_(l,c,g),V_()}function jv(){return ki()}function U_(l){return!!l&&"function"==typeof l.then}function Yv(l){return!!l&&"function"==typeof l.subscribe}const G_=Yv;function W_(l,c,g,E){const w=ki(),M=Rn(),L=Xo();return Xv(M,w,w[11],L,l,c,!!g,E),W_}function z_(l,c){const g=Xo(),E=ki(),w=Rn();return Xv(w,E,Gp(Gn(w.data),g,E),g,l,c,!1),z_}function Xv(l,c,g,E,w,M,L,H){const tt=ws(E),Ot=l.firstCreatePass&&Up(l),qt=c[8],se=Vp(c);let Ie=!0;if(3&E.type||H){const ri=Ii(E,c),Yi=H?H(ri):ri,Ai=se.length,Sn=H?jn=>H(q(jn[E.index])):E.index;if(bt(g)){let jn=null;if(!H&&tt&&(jn=function(l,c,g,E){const w=l.cleanup;if(null!=w)for(let M=0;M<w.length-1;M+=2){const L=w[M];if(L===g&&w[M+1]===E){const H=c[7],tt=w[M+2];return H.length>tt?H[tt]:null}"string"==typeof L&&(M+=2)}return null}(l,c,w,E.index)),null!==jn)(jn.__ngLastListenerFn__||jn).__ngNextListenerFn__=M,jn.__ngLastListenerFn__=M,Ie=!1;else{M=j_(E,c,qt,M,!1);const Lo=g.listen(Yi,w,M);se.push(M,Lo),Ot&&Ot.push(w,Sn,Ai,Ai+1)}}else M=j_(E,c,qt,M,!0),Yi.addEventListener(w,M,L),se.push(M),Ot&&Ot.push(w,Sn,Ai,L)}else M=j_(E,c,qt,M,!1);const je=E.outputs;let fi;if(Ie&&null!==je&&(fi=je[w])){const ri=fi.length;if(ri)for(let Yi=0;Yi<ri;Yi+=2){const ya=c[fi[Yi]][fi[Yi+1]].subscribe(M),Hc=se.length;se.push(M,ya),Ot&&Ot.push(w,E.index,Hc,-(Hc+1))}}}function Kv(l,c,g,E){try{return!1!==g(E)}catch(w){return Wf(l,w),!1}}function j_(l,c,g,E,w){return function M(L){if(L===Function)return E;const H=2&l.flags?ao(l.index,c):c;0==(32&c[2])&&fd(H);let tt=Kv(c,0,E,L),mt=M.__ngNextListenerFn__;for(;mt;)tt=Kv(c,0,mt,L)&&tt,mt=mt.__ngNextListenerFn__;return w&&!1===tt&&(L.preventDefault(),L.returnValue=!1),tt}}function Jv(l=1){return function(l){return(un.lFrame.contextLView=function(l,c){for(;l>0;)c=c[15],l--;return c}(l,un.lFrame.contextLView))[8]}(l)}function uC(l,c){let g=null;const E=function(l){const c=l.attrs;if(null!=c){const g=c.indexOf(5);if(0==(1&g))return c[g+1]}return null}(l);for(let w=0;w<c.length;w++){const M=c[w];if("*"!==M){if(null===E?yp(l,M,!0):Df(E,M))return w}else g=w}return g}function $v(l){const c=ki()[16][6];if(!c.projection){const E=c.projection=qa(l?l.length:1,null),w=E.slice();let M=c.child;for(;null!==M;){const L=l?uC(M,l):0;null!==L&&(w[L]?w[L].projectionNext=M:E[L]=M,w[L]=M),M=M.next}}}function Zv(l,c=0,g){const E=ki(),w=Rn(),M=Qu(w,20+l,16,null,g||null);null===M.projection&&(M.projection=c),V(),64!=(64&M.flags)&&function(l,c,g){_p(c[11],0,c,g,uo(l,g,c),tr(g.parent||c[6],g,c))}(w,E,M)}function Y_(l,c,g){return X_(l,"",c,"",g),Y_}function X_(l,c,g,E,w){const M=ki(),L=jp(M,c,g,E);return L!==Un&&va(Rn(),co(),M,l,L,M[11],w,!1),X_}function rb(l,c,g,E,w){const M=l[g+1],L=null===c;let H=E?wl(M):dc(M),tt=!1;for(;0!==H&&(!1===tt||L);){const Ot=l[H+1];pC(l[H],c)&&(tt=!0,l[H+1]=E?Ud(Ot):Ch(Ot)),H=E?wl(Ot):dc(Ot)}tt&&(l[g+1]=E?Ch(M):Ud(M))}function pC(l,c){return null===l||null==c||(Array.isArray(l)?l[1]:l)===c||!(!Array.isArray(l)||"string"!=typeof c)&&el(l,c)>=0}const ba={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function ab(l){return l.substring(ba.key,ba.keyEnd)}function lb(l,c){const g=ba.textEnd;return g===c?-1:(c=ba.keyEnd=function(l,c,g){for(;c<g&&l.charCodeAt(c)>32;)c++;return c}(l,ba.key=c,g),tf(l,c,g))}function tf(l,c,g){for(;c<g&&l.charCodeAt(c)<=32;)c++;return c}function K_(l,c,g){return _u(l,c,g,!1),K_}function J_(l,c){return _u(l,c,null,!0),J_}function nh(l,c){for(let g=function(l){return function(l){ba.key=0,ba.keyEnd=0,ba.value=0,ba.valueEnd=0,ba.textEnd=l.length}(l),lb(l,tf(l,0,ba.textEnd))}(c);g>=0;g=lb(c,g))ur(l,ab(c),!0)}function _u(l,c,g,E){const w=ki(),M=Rn(),L=Gi(2);M.firstUpdatePass&&fb(M,l,L,E),c!==Un&&al(w,L,c)&&_b(M,M.data[Bo()],w,w[11],l,w[L+1]=function(l,c){return null==l||("string"==typeof c?l+=c:"object"==typeof l&&(l=p(wo(l)))),l}(c,g),E,L)}function pb(l,c){return c>=l.expandoStartIndex}function fb(l,c,g,E){const w=l.data;if(null===w[g+1]){const M=w[Bo()],L=pb(l,g);vb(M,E)&&null===c&&!L&&(c=!1),c=function(l,c,g,E){const w=Gn(l);let M=E?c.residualClasses:c.residualStyles;if(null===w)0===(E?c.classBindings:c.styleBindings)&&(g=Kf(g=$_(null,l,c,g,E),c.attrs,E),M=null);else{const L=c.directiveStylingLast;if(-1===L||l[L]!==w)if(g=$_(w,l,c,g,E),null===M){let tt=function(l,c,g){const E=g?c.classBindings:c.styleBindings;if(0!==dc(E))return l[wl(E)]}(l,c,E);void 0!==tt&&Array.isArray(tt)&&(tt=$_(null,l,c,tt[1],E),tt=Kf(tt,c.attrs,E),function(l,c,g,E){l[wl(g?c.classBindings:c.styleBindings)]=E}(l,c,E,tt))}else M=function(l,c,g){let E;const w=c.directiveEnd;for(let M=1+c.directiveStylingLast;M<w;M++)E=Kf(E,l[M].hostAttrs,g);return Kf(E,c.attrs,g)}(l,c,E)}return void 0!==M&&(E?c.residualClasses=M:c.residualStyles=M),g}(w,M,c,E),function(l,c,g,E,w,M){let L=M?c.classBindings:c.styleBindings,H=wl(L),tt=dc(L);l[E]=g;let Ot,mt=!1;if(Array.isArray(g)){const qt=g;Ot=qt[1],(null===Ot||el(qt,Ot)>0)&&(mt=!0)}else Ot=g;if(w)if(0!==tt){const se=wl(l[H+1]);l[E+1]=id(se,H),0!==se&&(l[se+1]=nd(l[se+1],E)),l[H+1]=function(l,c){return 131071&l|c<<17}(l[H+1],E)}else l[E+1]=id(H,0),0!==H&&(l[H+1]=nd(l[H+1],E)),H=E;else l[E+1]=id(tt,0),0===H?H=E:l[tt+1]=nd(l[tt+1],E),tt=E;mt&&(l[E+1]=Ch(l[E+1])),rb(l,Ot,E,!0),rb(l,Ot,E,!1),function(l,c,g,E,w){const M=w?l.residualClasses:l.residualStyles;null!=M&&"string"==typeof c&&el(M,c)>=0&&(g[E+1]=Ud(g[E+1]))}(c,Ot,l,E,M),L=id(H,tt),M?c.classBindings=L:c.styleBindings=L}(w,M,c,g,L,E)}}function $_(l,c,g,E,w){let M=null;const L=g.directiveEnd;let H=g.directiveStylingLast;for(-1===H?H=g.directiveStart:H++;H<L&&(M=c[H],E=Kf(E,M.hostAttrs,w),M!==l);)H++;return null!==l&&(g.directiveStylingLast=H),E}function Kf(l,c,g){const E=g?1:2;let w=-1;if(null!==c)for(let M=0;M<c.length;M++){const L=c[M];"number"==typeof L?w=L:w===E&&(Array.isArray(l)||(l=void 0===l?[]:["",l]),ur(l,L,!!g||c[++M]))}return void 0===l?null:l}function _b(l,c,g,E,w,M,L,H){if(!(3&c.type))return;const tt=l.data,mt=tt[H+1];jg(function(l){return 1==(1&l)}(mt)?mb(tt,c,g,w,dc(mt),L):void 0)||(jg(M)||function(l){return 2==(2&l)}(mt)&&(M=mb(tt,null,g,w,H,L)),function(l,c,g,E,w){const M=bt(l);if(c)w?M?l.addClass(g,E):g.classList.add(E):M?l.removeClass(g,E):g.classList.remove(E);else{let L=-1===E.indexOf("-")?void 0:ja.DashCase;if(null==w)M?l.removeStyle(g,E,L):g.style.removeProperty(E);else{const H="string"==typeof w&&w.endsWith("!important");H&&(w=w.slice(0,-10),L|=ja.Important),M?l.setStyle(g,E,w,L):g.style.setProperty(E,w,H?"important":"")}}}(E,L,ze(Bo(),g),w,M))}function mb(l,c,g,E,w,M){const L=null===c;let H;for(;w>0;){const tt=l[w],mt=Array.isArray(tt),Ot=mt?tt[1]:tt,qt=null===Ot;let se=g[w+1];se===Un&&(se=qt?xe:void 0);let Ie=qt?vl(se,E):Ot===E?se:void 0;if(mt&&!jg(Ie)&&(Ie=vl(tt,E)),jg(Ie)&&(H=Ie,L))return H;const je=l[w+1];w=L?wl(je):dc(je)}if(null!==c){let tt=M?c.residualClasses:c.residualStyles;null!=tt&&(H=vl(tt,E))}return H}function jg(l){return void 0!==l}function vb(l,c){return 0!=(l.flags&(c?16:32))}function bb(l,c=""){const g=ki(),E=Rn(),w=l+20,M=E.firstCreatePass?Qu(E,w,1,c,null):E.data[w],L=g[w]=function(l,c){return bt(l)?l.createText(c):l.createTextNode(c)}(g[11],c);ma(E,g,L,M),Ps(M,!1)}function Z_(l){return Yg("",l,""),Z_}function Yg(l,c,g){const E=ki(),w=jp(E,l,c,g);return w!==Un&&gc(E,Bo(),w),Yg}function Q_(l,c,g,E,w){const M=ki(),L=function(l,c,g,E,w,M){const H=sp(l,Se(),g,w);return Gi(2),H?c+wt(g)+E+wt(w)+M:Un}(M,l,c,g,E,w);return L!==Un&&gc(M,Bo(),L),Q_}function q_(l,c,g,E,w,M,L){const H=ki(),tt=Xp(H,l,c,g,E,w,M,L);return tt!==Un&&gc(H,Bo(),tt),q_}function wb(l,c,g){!function(l,c,g,E){const w=Rn(),M=Gi(2);w.firstUpdatePass&&fb(w,null,M,E);const L=ki();if(g!==Un&&al(L,M,g)){const H=w.data[Bo()];if(vb(H,E)&&!pb(w,M)){let tt=E?H.classesWithoutHost:H.stylesWithoutHost;null!==tt&&(g=b(tt,g||"")),P_(w,H,L,g,E)}else!function(l,c,g,E,w,M,L,H){w===Un&&(w=xe);let tt=0,mt=0,Ot=0<w.length?w[0]:null,qt=0<M.length?M[0]:null;for(;null!==Ot||null!==qt;){const se=tt<w.length?w[tt+1]:void 0,Ie=mt<M.length?M[mt+1]:void 0;let fi,je=null;Ot===qt?(tt+=2,mt+=2,se!==Ie&&(je=qt,fi=Ie)):null===qt||null!==Ot&&Ot<qt?(tt+=2,je=Ot):(mt+=2,je=qt,fi=Ie),null!==je&&_b(l,c,g,E,je,fi,L,H),Ot=tt<w.length?w[tt]:null,qt=mt<M.length?M[mt]:null}}(w,H,L,L[11],L[M+1],L[M+1]=function(l,c,g){if(null==g||""===g)return xe;const E=[],w=wo(g);if(Array.isArray(w))for(let M=0;M<w.length;M++)l(E,w[M],!0);else if("object"==typeof w)for(const M in w)w.hasOwnProperty(M)&&l(E,M,w[M]);else"string"==typeof w&&c(E,w);return E}(l,c,g),E,M)}}(ur,nh,jp(ki(),l,c,g),!0)}function tm(l,c,g){const E=ki();return al(E,mi(),c)&&va(Rn(),co(),E,l,c,E[11],g,!0),tm}function em(l,c,g){const E=ki();if(al(E,mi(),c)){const M=Rn(),L=co();va(M,L,E,l,c,Gp(Gn(M.data),L,E),g,!0)}return em}const rp=void 0;var XC=["en",[["a","p"],["AM","PM"],rp],[["AM","PM"],rp,rp],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],rp,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],rp,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",rp,"{1} 'at' {0}",rp],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(l){const c=Math.floor(Math.abs(l)),g=l.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===g?1:5}];let ef={};function im(l){const c=function(l){return l.toLowerCase().replace(/_/g,"-")}(l);let g=Fb(c);if(g)return g;const E=c.split("-")[0];if(g=Fb(E),g)return g;if("en"===E)return XC;throw new Error(`Missing locale data for the locale "${l}".`)}function Pb(l){return im(l)[Hn.PluralCase]}function Fb(l){return l in ef||(ef[l]=pi.ng&&pi.ng.common&&pi.ng.common.locales&&pi.ng.common.locales[l]),ef[l]}var Hn=(()=>((Hn=Hn||{})[Hn.LocaleId=0]="LocaleId",Hn[Hn.DayPeriodsFormat=1]="DayPeriodsFormat",Hn[Hn.DayPeriodsStandalone=2]="DayPeriodsStandalone",Hn[Hn.DaysFormat=3]="DaysFormat",Hn[Hn.DaysStandalone=4]="DaysStandalone",Hn[Hn.MonthsFormat=5]="MonthsFormat",Hn[Hn.MonthsStandalone=6]="MonthsStandalone",Hn[Hn.Eras=7]="Eras",Hn[Hn.FirstDayOfWeek=8]="FirstDayOfWeek",Hn[Hn.WeekendRange=9]="WeekendRange",Hn[Hn.DateFormat=10]="DateFormat",Hn[Hn.TimeFormat=11]="TimeFormat",Hn[Hn.DateTimeFormat=12]="DateTimeFormat",Hn[Hn.NumberSymbols=13]="NumberSymbols",Hn[Hn.NumberFormats=14]="NumberFormats",Hn[Hn.CurrencyCode=15]="CurrencyCode",Hn[Hn.CurrencySymbol=16]="CurrencySymbol",Hn[Hn.CurrencyName=17]="CurrencyName",Hn[Hn.Currencies=18]="Currencies",Hn[Hn.Directionality=19]="Directionality",Hn[Hn.PluralCase=20]="PluralCase",Hn[Hn.ExtraData=21]="ExtraData",Hn))();const Xg="en-US";let Bb=Xg;function nm(l){Ze(l,"Expected localeId to be defined"),"string"==typeof l&&(Bb=l.toLowerCase().replace(/_/g,"-"))}function rm(l,c,g,E,w){if(l=k(l),Array.isArray(l))for(let M=0;M<l.length;M++)rm(l[M],c,g,E,w);else{const M=Rn(),L=ki();let H=Ki(l)?l:k(l.provide),tt=De(l);const mt=Xo(),Ot=1048575&mt.providerIndexes,qt=mt.directiveStart,se=mt.providerIndexes>>20;if(Ki(l)||!l.multi){const Ie=new qs(tt,w,Xf),je=lm(H,c,w?Ot:Ot+se,qt);-1===je?(lt(gl(mt,L),M,H),am(M,l,c.length),c.push(H),mt.directiveStart++,mt.directiveEnd++,w&&(mt.providerIndexes+=1048576),g.push(Ie),L.push(Ie)):(g[je]=Ie,L[je]=Ie)}else{const Ie=lm(H,c,Ot+se,qt),je=lm(H,c,Ot,Ot+se),fi=Ie>=0&&g[Ie],ri=je>=0&&g[je];if(w&&!ri||!w&&!fi){lt(gl(mt,L),M,H);const Yi=function(l,c,g,E,w){const M=new qs(l,g,Xf);return M.multi=[],M.index=c,M.componentProviders=0,ly(M,w,E&&!g),M}(w?zS:WS,g.length,w,E,tt);!w&&ri&&(g[je].providerFactory=Yi),am(M,l,c.length,0),c.push(H),mt.directiveStart++,mt.directiveEnd++,w&&(mt.providerIndexes+=1048576),g.push(Yi),L.push(Yi)}else am(M,l,Ie>-1?Ie:je,ly(g[w?je:Ie],tt,!w&&E));!w&&E&&ri&&g[je].componentProviders++}}}function am(l,c,g,E){const w=Ki(c);if(w||function(l){return!!l.useClass}(c)){const L=(c.useClass||c).prototype.ngOnDestroy;if(L){const H=l.destroyHooks||(l.destroyHooks=[]);if(!w&&c.multi){const tt=H.indexOf(g);-1===tt?H.push(g,[E,L]):H[tt+1].push(E,L)}else H.push(g,L)}}}function ly(l,c,g){return g&&l.componentProviders++,l.multi.push(c)-1}function lm(l,c,g,E){for(let w=g;w<E;w++)if(c[w]===l)return w;return-1}function WS(l,c,g,E){return cm(this.multi,[])}function zS(l,c,g,E){const w=this.multi;let M;if(this.providerFactory){const L=this.providerFactory.componentProviders,H=$i(g,g[1],this.providerFactory.index,E);M=H.slice(0,L),cm(w,M);for(let tt=L;tt<H.length;tt++)M.push(H[tt])}else M=[],cm(w,M);return M}function cm(l,c){for(let g=0;g<l.length;g++)c.push((0,l[g])());return c}function cy(l,c=[]){return g=>{g.providersResolver=(E,w)=>function(l,c,g){const E=Rn();if(E.firstCreatePass){const w=ns(l);rm(g,E.data,E.blueprint,w,!0),rm(c,E.data,E.blueprint,w,!1)}}(E,w?w(l):l,c)}}class uy{}const dy="ngComponent";class XS{resolveComponentFactory(c){throw function(l){const c=Error(`No component factory found for ${p(l)}. Did you add it to @NgModule.entryComponents?`);return c[dy]=l,c}(c)}}let sf=(()=>{class l{}return l.NULL=new XS,l})();function Qg(...l){}function rf(l,c){return new oh(Ii(l,c))}const $S=function(){return rf(Xo(),ki())};let oh=(()=>{class l{constructor(g){this.nativeElement=g}}return l.__NG_ELEMENT_ID__=$S,l})();function py(l){return l instanceof oh?l.nativeElement:l}class qg{}let ZS=(()=>{class l{}return l.__NG_ELEMENT_ID__=()=>qS(),l})();const qS=function(){const l=ki(),g=ao(Xo().index,l);return function(l){return l[11]}(is(g)?g:l)};let hm=(()=>{class l{}return l.\u0275prov=Pe({token:l,providedIn:"root",factory:()=>null}),l})();class fy{constructor(c){this.full=c,this.major=c.split(".")[0],this.minor=c.split(".")[1],this.patch=c.split(".").slice(2).join(".")}}const gy=new fy("12.2.13");class _y{constructor(){}supports(c){return jf(c)}create(c){return new nR(c)}}const iR=(l,c)=>c;class nR{constructor(c){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=c||iR}forEachItem(c){let g;for(g=this._itHead;null!==g;g=g._next)c(g)}forEachOperation(c){let g=this._itHead,E=this._removalsHead,w=0,M=null;for(;g||E;){const L=!E||g&&g.currentIndex<vy(E,w,M)?g:E,H=vy(L,w,M),tt=L.currentIndex;if(L===E)w--,E=E._nextRemoved;else if(g=g._next,null==L.previousIndex)w++;else{M||(M=[]);const mt=H-w,Ot=tt-w;if(mt!=Ot){for(let se=0;se<mt;se++){const Ie=se<M.length?M[se]:M[se]=0,je=Ie+se;Ot<=je&&je<mt&&(M[se]=Ie+1)}M[L.previousIndex]=Ot-mt}}H!==tt&&c(L,H,tt)}}forEachPreviousItem(c){let g;for(g=this._previousItHead;null!==g;g=g._nextPrevious)c(g)}forEachAddedItem(c){let g;for(g=this._additionsHead;null!==g;g=g._nextAdded)c(g)}forEachMovedItem(c){let g;for(g=this._movesHead;null!==g;g=g._nextMoved)c(g)}forEachRemovedItem(c){let g;for(g=this._removalsHead;null!==g;g=g._nextRemoved)c(g)}forEachIdentityChange(c){let g;for(g=this._identityChangesHead;null!==g;g=g._nextIdentityChange)c(g)}diff(c){if(null==c&&(c=[]),!jf(c))throw new Error(`Error trying to diff '${p(c)}'. Only arrays and iterables are allowed`);return this.check(c)?this:null}onDestroy(){}check(c){this._reset();let w,M,L,g=this._itHead,E=!1;if(Array.isArray(c)){this.length=c.length;for(let H=0;H<this.length;H++)M=c[H],L=this._trackByFn(H,M),null!==g&&Object.is(g.trackById,L)?(E&&(g=this._verifyReinsertion(g,M,L,H)),Object.is(g.item,M)||this._addIdentityChange(g,M)):(g=this._mismatch(g,M,L,H),E=!0),g=g._next}else w=0,function(l,c){if(Array.isArray(l))for(let g=0;g<l.length;g++)c(l[g]);else{const g=l[Wp()]();let E;for(;!(E=g.next()).done;)c(E.value)}}(c,H=>{L=this._trackByFn(w,H),null!==g&&Object.is(g.trackById,L)?(E&&(g=this._verifyReinsertion(g,H,L,w)),Object.is(g.item,H)||this._addIdentityChange(g,H)):(g=this._mismatch(g,H,L,w),E=!0),g=g._next,w++}),this.length=w;return this._truncate(g),this.collection=c,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let c;for(c=this._previousItHead=this._itHead;null!==c;c=c._next)c._nextPrevious=c._next;for(c=this._additionsHead;null!==c;c=c._nextAdded)c.previousIndex=c.currentIndex;for(this._additionsHead=this._additionsTail=null,c=this._movesHead;null!==c;c=c._nextMoved)c.previousIndex=c.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(c,g,E,w){let M;return null===c?M=this._itTail:(M=c._prev,this._remove(c)),null!==(c=null===this._unlinkedRecords?null:this._unlinkedRecords.get(E,null))?(Object.is(c.item,g)||this._addIdentityChange(c,g),this._reinsertAfter(c,M,w)):null!==(c=null===this._linkedRecords?null:this._linkedRecords.get(E,w))?(Object.is(c.item,g)||this._addIdentityChange(c,g),this._moveAfter(c,M,w)):c=this._addAfter(new oR(g,E),M,w),c}_verifyReinsertion(c,g,E,w){let M=null===this._unlinkedRecords?null:this._unlinkedRecords.get(E,null);return null!==M?c=this._reinsertAfter(M,c._prev,w):c.currentIndex!=w&&(c.currentIndex=w,this._addToMoves(c,w)),c}_truncate(c){for(;null!==c;){const g=c._next;this._addToRemovals(this._unlink(c)),c=g}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(c,g,E){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(c);const w=c._prevRemoved,M=c._nextRemoved;return null===w?this._removalsHead=M:w._nextRemoved=M,null===M?this._removalsTail=w:M._prevRemoved=w,this._insertAfter(c,g,E),this._addToMoves(c,E),c}_moveAfter(c,g,E){return this._unlink(c),this._insertAfter(c,g,E),this._addToMoves(c,E),c}_addAfter(c,g,E){return this._insertAfter(c,g,E),this._additionsTail=null===this._additionsTail?this._additionsHead=c:this._additionsTail._nextAdded=c,c}_insertAfter(c,g,E){const w=null===g?this._itHead:g._next;return c._next=w,c._prev=g,null===w?this._itTail=c:w._prev=c,null===g?this._itHead=c:g._next=c,null===this._linkedRecords&&(this._linkedRecords=new my),this._linkedRecords.put(c),c.currentIndex=E,c}_remove(c){return this._addToRemovals(this._unlink(c))}_unlink(c){null!==this._linkedRecords&&this._linkedRecords.remove(c);const g=c._prev,E=c._next;return null===g?this._itHead=E:g._next=E,null===E?this._itTail=g:E._prev=g,c}_addToMoves(c,g){return c.previousIndex===g||(this._movesTail=null===this._movesTail?this._movesHead=c:this._movesTail._nextMoved=c),c}_addToRemovals(c){return null===this._unlinkedRecords&&(this._unlinkedRecords=new my),this._unlinkedRecords.put(c),c.currentIndex=null,c._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=c,c._prevRemoved=null):(c._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=c),c}_addIdentityChange(c,g){return c.item=g,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=c:this._identityChangesTail._nextIdentityChange=c,c}}class oR{constructor(c,g){this.item=c,this.trackById=g,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class sR{constructor(){this._head=null,this._tail=null}add(c){null===this._head?(this._head=this._tail=c,c._nextDup=null,c._prevDup=null):(this._tail._nextDup=c,c._prevDup=this._tail,c._nextDup=null,this._tail=c)}get(c,g){let E;for(E=this._head;null!==E;E=E._nextDup)if((null===g||g<=E.currentIndex)&&Object.is(E.trackById,c))return E;return null}remove(c){const g=c._prevDup,E=c._nextDup;return null===g?this._head=E:g._nextDup=E,null===E?this._tail=g:E._prevDup=g,null===this._head}}class my{constructor(){this.map=new Map}put(c){const g=c.trackById;let E=this.map.get(g);E||(E=new sR,this.map.set(g,E)),E.add(c)}get(c,g){const w=this.map.get(c);return w?w.get(c,g):null}remove(c){const g=c.trackById;return this.map.get(g).remove(c)&&this.map.delete(g),c}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function vy(l,c,g){const E=l.previousIndex;if(null===E)return E;let w=0;return g&&E<g.length&&(w=g[E]),E+c+w}class by{constructor(){}supports(c){return c instanceof Map||M_(c)}create(){return new rR}}class rR{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(c){let g;for(g=this._mapHead;null!==g;g=g._next)c(g)}forEachPreviousItem(c){let g;for(g=this._previousMapHead;null!==g;g=g._nextPrevious)c(g)}forEachChangedItem(c){let g;for(g=this._changesHead;null!==g;g=g._nextChanged)c(g)}forEachAddedItem(c){let g;for(g=this._additionsHead;null!==g;g=g._nextAdded)c(g)}forEachRemovedItem(c){let g;for(g=this._removalsHead;null!==g;g=g._nextRemoved)c(g)}diff(c){if(c){if(!(c instanceof Map||M_(c)))throw new Error(`Error trying to diff '${p(c)}'. Only maps and objects are allowed`)}else c=new Map;return this.check(c)?this:null}onDestroy(){}check(c){this._reset();let g=this._mapHead;if(this._appendAfter=null,this._forEach(c,(E,w)=>{if(g&&g.key===w)this._maybeAddToChanges(g,E),this._appendAfter=g,g=g._next;else{const M=this._getOrCreateRecordForKey(w,E);g=this._insertBeforeOrAppend(g,M)}}),g){g._prev&&(g._prev._next=null),this._removalsHead=g;for(let E=g;null!==E;E=E._nextRemoved)E===this._mapHead&&(this._mapHead=null),this._records.delete(E.key),E._nextRemoved=E._next,E.previousValue=E.currentValue,E.currentValue=null,E._prev=null,E._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(c,g){if(c){const E=c._prev;return g._next=c,g._prev=E,c._prev=g,E&&(E._next=g),c===this._mapHead&&(this._mapHead=g),this._appendAfter=c,c}return this._appendAfter?(this._appendAfter._next=g,g._prev=this._appendAfter):this._mapHead=g,this._appendAfter=g,null}_getOrCreateRecordForKey(c,g){if(this._records.has(c)){const w=this._records.get(c);this._maybeAddToChanges(w,g);const M=w._prev,L=w._next;return M&&(M._next=L),L&&(L._prev=M),w._next=null,w._prev=null,w}const E=new aR(c);return this._records.set(c,E),E.currentValue=g,this._addToAdditions(E),E}_reset(){if(this.isDirty){let c;for(this._previousMapHead=this._mapHead,c=this._previousMapHead;null!==c;c=c._next)c._nextPrevious=c._next;for(c=this._changesHead;null!==c;c=c._nextChanged)c.previousValue=c.currentValue;for(c=this._additionsHead;null!=c;c=c._nextAdded)c.previousValue=c.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(c,g){Object.is(g,c.currentValue)||(c.previousValue=c.currentValue,c.currentValue=g,this._addToChanges(c))}_addToAdditions(c){null===this._additionsHead?this._additionsHead=this._additionsTail=c:(this._additionsTail._nextAdded=c,this._additionsTail=c)}_addToChanges(c){null===this._changesHead?this._changesHead=this._changesTail=c:(this._changesTail._nextChanged=c,this._changesTail=c)}_forEach(c,g){c instanceof Map?c.forEach(g):Object.keys(c).forEach(E=>g(c[E],E))}}class aR{constructor(c){this.key=c,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function yy(){return new t_([new _y])}let t_=(()=>{class l{constructor(g){this.factories=g}static create(g,E){if(null!=E){const w=E.factories.slice();g=g.concat(w)}return new l(g)}static extend(g){return{provide:l,useFactory:E=>l.create(g,E||yy()),deps:[[l,new Da,new Ga]]}}find(g){const E=this.factories.find(w=>w.supports(g));if(null!=E)return E;throw new Error(`Cannot find a differ supporting object '${g}' of type '${function(l){return l.name||typeof l}(g)}'`)}}return l.\u0275prov=Pe({token:l,providedIn:"root",factory:yy}),l})();function Ey(){return new e_([new by])}let e_=(()=>{class l{constructor(g){this.factories=g}static create(g,E){if(E){const w=E.factories.slice();g=g.concat(w)}return new l(g)}static extend(g){return{provide:l,useFactory:E=>l.create(g,E||Ey()),deps:[[l,new Da,new Ga]]}}find(g){const E=this.factories.find(w=>w.supports(g));if(E)return E;throw new Error(`Cannot find a differ supporting object '${g}'`)}}return l.\u0275prov=Pe({token:l,providedIn:"root",factory:Ey}),l})();function i_(l,c,g,E,w=!1){for(;null!==g;){const M=c[g.index];if(null!==M&&E.push(q(M)),lo(M))for(let H=10;H<M.length;H++){const tt=M[H],mt=tt[1].firstChild;null!==mt&&i_(tt[1],tt,mt,E)}const L=g.type;if(8&L)i_(l,c,g.child,E);else if(32&L){const H=ju(g,c);let tt;for(;tt=H();)E.push(tt)}else if(16&L){const H=hc(c,g);if(Array.isArray(H))E.push(...H);else{const tt=Tl(c[16]);i_(tt[1],tt,H,E,!0)}}g=w?g.projectionNext:g.next}return E}class qf{constructor(c,g){this._lView=c,this._cdRefInjectingView=g,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const c=this._lView,g=c[1];return i_(g,c,g.firstChild,[])}get context(){return this._lView[8]}set context(c){this._lView[8]=c}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const c=this._lView[3];if(lo(c)){const g=c[8],E=g?g.indexOf(this):-1;E>-1&&(Ci(c,E),ml(g,E))}this._attachedToViewContainer=!1}Xt(this._lView[1],this._lView)}onDestroy(c){Np(this._lView[1],this._lView,null,c)}markForCheck(){fd(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){ip(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(l,c,g){te(!0);try{ip(l,c,g)}finally{te(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var c;this._appRef=null,uu(this._lView[1],c=this._lView,c[11],2,null,null)}attachToAppRef(c){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=c}}class cR extends qf{constructor(c){super(c),this._view=c}detectChanges(){np(this._view)}checkNoChanges(){!function(l){te(!0);try{np(l)}finally{te(!1)}}(this._view)}get context(){return null}}const hR=function(l){return function(l,c,g){if(Co(l)&&!g){const E=ao(l.index,c);return new qf(E,E)}return 47&l.type?new qf(c[16],c):null}(Xo(),ki(),16==(16&l))};let dR=(()=>{class l{}return l.__NG_ELEMENT_ID__=hR,l})();const gR=[new by],mR=new t_([new _y]),vR=new e_(gR),yR=function(){return n_(Xo(),ki())};let tg=(()=>{class l{}return l.__NG_ELEMENT_ID__=yR,l})();const ER=tg,TR=class extends ER{constructor(c,g,E){super(),this._declarationLView=c,this._declarationTContainer=g,this.elementRef=E}createEmbeddedView(c){const g=this._declarationTContainer.tViews,E=Gl(this._declarationLView,g,c,16,null,g.declTNode,null,null,null,null);E[17]=this._declarationLView[this._declarationTContainer.index];const M=this._declarationLView[19];return null!==M&&(E[19]=M.createEmbeddedView(g)),du(g,E,c),new qf(E)}};function n_(l,c){return 4&l.type?new TR(c,l,rf(l,c)):null}class ap{}class Ty{}const RR=function(){return Ry(Xo(),ki())};let o_=(()=>{class l{}return l.__NG_ELEMENT_ID__=RR,l})();const DR=o_,Cy=class extends DR{constructor(c,g,E){super(),this._lContainer=c,this._hostTNode=g,this._hostLView=E}get element(){return rf(this._hostTNode,this._hostLView)}get injector(){return new zn(this._hostTNode,this._hostLView)}get parentInjector(){const c=mc(this._hostTNode,this._hostLView);if(pl(c)){const g=Sa(c,this._hostLView),E=Ca(c);return new zn(g[1].data[E+8],g)}return new zn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(c){const g=Sy(this._lContainer);return null!==g&&g[c]||null}get length(){return this._lContainer.length-10}createEmbeddedView(c,g,E){const w=c.createEmbeddedView(g||{});return this.insert(w,E),w}createComponent(c,g,E,w,M){const L=E||this.parentInjector;if(!M&&null==c.ngModule&&L){const tt=L.get(ap,null);tt&&(M=tt)}const H=c.create(L,w,void 0,M);return this.insert(H.hostView,g),H}insert(c,g){const E=c._lView,w=E[1];if(lo(E[3])){const Ot=this.indexOf(c);if(-1!==Ot)this.detach(Ot);else{const qt=E[3],se=new Cy(qt,qt[6],qt[3]);se.detach(se.indexOf(c))}}const M=this._adjustIndex(g),L=this._lContainer;!function(l,c,g,E){const w=10+E,M=g.length;E>0&&(g[w-1][4]=c),E<M-10?(c[4]=g[w],tc(g,10+E,c)):(g.push(c),c[4]=null),c[3]=g;const L=c[17];null!==L&&g!==L&&function(l,c){const g=l[9];c[16]!==c[3][3][16]&&(l[2]=!0),null===g?l[9]=[c]:g.push(c)}(L,c);const H=c[19];null!==H&&H.insertView(l),c[2]|=128}(w,E,L,M);const H=cu(M,L),tt=E[11],mt=Dr(tt,L[7]);return null!==mt&&function(l,c,g,E,w,M){E[0]=w,E[6]=c,uu(l,E,g,1,w,M)}(w,L[6],tt,E,mt,H),c.attachToViewContainerRef(),tc(dm(L),M,c),c}move(c,g){return this.insert(c,g)}indexOf(c){const g=Sy(this._lContainer);return null!==g?g.indexOf(c):-1}remove(c){const g=this._adjustIndex(c,-1),E=Ci(this._lContainer,g);E&&(ml(dm(this._lContainer),g),Xt(E[1],E))}detach(c){const g=this._adjustIndex(c,-1),E=Ci(this._lContainer,g);return E&&null!=ml(dm(this._lContainer),g)?new qf(E):null}_adjustIndex(c,g=0){return null==c?this.length+g:c}};function Sy(l){return l[8]}function dm(l){return l[8]||(l[8]=[])}function Ry(l,c){let g;const E=c[l.index];if(lo(E))g=E;else{let w;if(8&l.type)w=q(E);else{const M=c[11];w=M.createComment("");const L=Ii(l,c);Jo(M,Dr(M,L),w,function(l,c){return bt(l)?l.nextSibling(c):c.nextSibling}(M,L),!1)}c[l.index]=g=dd(E,c,w,l),Nh(c,g)}return new Cy(g,l,c)}const uf={};class jy extends sf{constructor(c){super(),this.ngModule=c}resolveComponentFactory(c){const g=Vn(c);return new Xy(g,this.ngModule)}}function Yy(l){const c=[];for(let g in l)l.hasOwnProperty(g)&&c.push({propName:l[g],templateName:g});return c}const Cw=new ms("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Eh});class Xy extends uy{constructor(c,g){super(),this.componentDef=c,this.ngModule=g,this.componentType=c.type,this.selector=c.selectors.map(If).join(","),this.ngContentSelectors=c.ngContentSelectors?c.ngContentSelectors:[],this.isBoundToModule=!!g}get inputs(){return Yy(this.componentDef.inputs)}get outputs(){return Yy(this.componentDef.outputs)}create(c,g,E,w){const M=(w=w||this.ngModule)?function(l,c){return{get:(g,E,w)=>{const M=l.get(g,uf,w);return M!==uf||E===uf?M:c.get(g,E,w)}}}(c,w.injector):c,L=M.get(qg,St),H=M.get(hm,null),tt=L.createRenderer(null,this.componentDef),mt=this.componentDef.selectors[0][0]||"div",Ot=E?function(l,c,g){if(bt(l))return l.selectRootElement(c,g===Ee.ShadowDom);let E="string"==typeof c?l.querySelector(c):c;return E.textContent="",E}(tt,E,this.componentDef.encapsulation):Lt(L.createRenderer(null,this.componentDef),mt,function(l){const c=l.toLowerCase();return"svg"===c?vr:"math"===c?"http://www.w3.org/1998/MathML/":null}(mt)),qt=this.componentDef.onPush?576:528,se=function(l,c){return{components:[],scheduler:l||Eh,clean:Gf,playerHandler:c||null,flags:0}}(),Ie=qu(0,null,null,1,0,null,null,null,null,null),je=Gl(null,Ie,se,qt,null,null,L,tt,H,M);let fi,ri;sr(je);try{const Yi=function(l,c,g,E,w,M){const L=g[1];g[20]=l;const tt=Qu(L,20,2,"#host",null),mt=tt.mergedAttrs=c.hostAttrs;null!==mt&&(m(tt,mt,!0),null!==l&&(Xl(w,l,mt),null!==tt.classes&&Hd(w,l,tt.classes),null!==tt.styles&&mp(w,l,tt.styles)));const Ot=E.createRenderer(l,c),qt=Gl(g,Nf(c),null,c.onPush?64:16,g[20],tt,E,Ot,M||null,null);return L.firstCreatePass&&(lt(gl(tt,g),L,c.type),Ah(L,tt),xh(tt,g.length,1)),Nh(g,qt),g[20]=qt}(Ot,this.componentDef,je,L,tt);if(Ot)if(E)Xl(tt,Ot,["ng-version",gy.full]);else{const{attrs:Ai,classes:Sn}=function(l){const c=[],g=[];let E=1,w=2;for(;E<l.length;){let M=l[E];if("string"==typeof M)2===w?""!==M&&c.push(M,l[++E]):8===w&&g.push(M);else{if(!Rl(w))break;w=M}E++}return{attrs:c,classes:g}}(this.componentDef.selectors[0]);Ai&&Xl(tt,Ot,Ai),Sn&&Sn.length>0&&Hd(tt,Ot,Sn.join(" "))}if(ri=Xn(Ie,20),void 0!==g){const Ai=ri.projection=[];for(let Sn=0;Sn<this.ngContentSelectors.length;Sn++){const jn=g[Sn];Ai.push(null!=jn?Array.from(jn):null)}}fi=function(l,c,g,E,w){const M=g[1],L=function(l,c,g){const E=Xo();l.firstCreatePass&&(g.providersResolver&&g.providersResolver(g),Pg(l,E,c,ka(l,c,1,null),g));const w=$i(c,l,E.directiveStart,E);Rr(w,c);const M=Ii(E,c);return M&&Rr(M,c),w}(M,g,c);if(E.components.push(L),l[8]=L,w&&w.forEach(tt=>tt(L,c)),c.contentQueries){const tt=Xo();c.contentQueries(1,L,tt.directiveStart)}const H=Xo();return!M.firstCreatePass||null===c.hostBindings&&null===c.hostAttrs||(Br(H.index),Bf(g[1],H,0,H.directiveStart,H.directiveEnd,c),tp(c,L)),L}(Yi,this.componentDef,je,se,[wT]),du(Ie,je,null)}finally{Ms()}return new ww(this.componentType,fi,rf(ri,je),je,ri)}}class ww extends class{}{constructor(c,g,E,w,M){super(),this.location=E,this._rootLView=w,this._tNode=M,this.instance=g,this.hostView=this.changeDetectorRef=new cR(w),this.componentType=c}get injector(){return new zn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(c){this.hostView.onDestroy(c)}}const hf=new Map;class Mw extends ap{constructor(c,g){super(),this._parent=g,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new jy(this);const E=Eo(c),w=c[Ui]||null;w&&nm(w),this._bootstrapComponents=rl(E.bootstrap),this._r3Injector=It(c,g,[{provide:ap,useValue:this},{provide:sf,useValue:this.componentFactoryResolver}],p(c)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(c)}get(c,g=Hi.THROW_IF_NOT_FOUND,E=fe.Default){return c===Hi||c===ap||c===f?this:this._r3Injector.get(c,g,E)}destroy(){const c=this._r3Injector;!c.destroyed&&c.destroy(),this.destroyCbs.forEach(g=>g()),this.destroyCbs=null}onDestroy(c){this.destroyCbs.push(c)}}class Rm extends Ty{constructor(c){super(),this.moduleType=c,null!==Eo(c)&&function(l){const c=new Set;!function g(E){const w=Eo(E,!0),M=w.id;null!==M&&(function(l,c,g){if(c&&c!==g)throw new Error(`Duplicate module registered for ${l} - ${p(c)} vs ${p(c.name)}`)}(M,hf.get(M),E),hf.set(M,E));const L=rl(w.imports);for(const H of L)c.has(H)||(c.add(H),g(H))}(l)}(c)}create(c){return new Mw(this.moduleType,c)}}function $y(l,c,g){const E=_e()+l,w=ki();return w[E]===Un?eh(w,E,g?c.call(g):c()):function(l,c){return l[c]}(w,E)}function Zy(l,c,g,E){return qy(ki(),_e(),l,c,g,E)}function Qy(l,c,g,E,w){return function(l,c,g,E,w,M,L){const H=c+g;return sp(l,H,w,M)?eh(l,H+2,L?E.call(L,w,M):E(w,M)):lg(l,H+2)}(ki(),_e(),l,c,g,E,w)}function lg(l,c){const g=l[c];return g===Un?void 0:g}function qy(l,c,g,E,w,M){const L=c+g;return al(l,L,w)?eh(l,L+1,M?E.call(M,w):E(w)):lg(l,L+1)}function oE(l,c){const g=Rn();let E;const w=l+20;g.firstCreatePass?(E=function(l,c){if(c)for(let g=c.length-1;g>=0;g--){const E=c[g];if(l===E.name)return E}throw new it("302",`The pipe '${l}' could not be found!`)}(c,g.pipeRegistry),g.data[w]=E,E.onDestroy&&(g.destroyHooks||(g.destroyHooks=[])).push(w,E.onDestroy)):E=g.data[w];const M=E.factory||(E.factory=Ns(E.type)),L=Ve(Xf);try{const H=fl(!1),tt=M();return fl(H),function(l,c,g,E){g>=l.data.length&&(l.data[g]=null,l.blueprint[g]=null),c[g]=E}(g,ki(),w,tt),tt}finally{Ve(L)}}function sE(l,c,g){const E=l+20,w=ki(),M=En(w,E);return function(l,c){gu.isWrapped(c)&&(c=gu.unwrap(c),l[Se()]=Un);return c}(w,function(l,c){return l[1].data[c].pure}(w,E)?qy(w,_e(),c,M.transform,g,M):M.transform(g))}function wm(l){return c=>{setTimeout(l,void 0,c)}}const sh=class extends T.xQ{constructor(c=!1){super(),this.__isAsync=c}emit(c){super.next(c)}subscribe(c,g,E){var w,M,L;let H=c,tt=g||(()=>null),mt=E;if(c&&"object"==typeof c){const qt=c;H=null===(w=qt.next)||void 0===w?void 0:w.bind(qt),tt=null===(M=qt.error)||void 0===M?void 0:M.bind(qt),mt=null===(L=qt.complete)||void 0===L?void 0:L.bind(qt)}this.__isAsync&&(tt=wm(tt),H&&(H=wm(H)),mt&&(mt=wm(mt)));const Ot=super.subscribe({next:H,error:tt,complete:mt});return c instanceof a.w&&c.add(Ot),Ot}};function Ww(){return this._results[Wp()]()}class hg{constructor(c=!1){this._emitDistinctChangesOnly=c,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const g=Wp(),E=hg.prototype;E[g]||(E[g]=Ww)}get changes(){return this._changes||(this._changes=new sh)}get(c){return this._results[c]}map(c){return this._results.map(c)}filter(c){return this._results.filter(c)}find(c){return this._results.find(c)}reduce(c,g){return this._results.reduce(c,g)}forEach(c){this._results.forEach(c)}some(c){return this._results.some(c)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(c,g){const E=this;E.dirty=!1;const w=Ys(c);(this._changesDetected=!function(l,c,g){if(l.length!==c.length)return!1;for(let E=0;E<l.length;E++){let w=l[E],M=c[E];if(g&&(w=g(w),M=g(M)),M!==w)return!1}return!0}(E._results,w,g))&&(E._results=w,E.length=w.length,E.last=w[this.length-1],E.first=w[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class Dm{constructor(c){this.queryList=c,this.matches=null}clone(){return new Dm(this.queryList)}setDirty(){this.queryList.setDirty()}}class Im{constructor(c=[]){this.queries=c}createEmbeddedView(c){const g=c.queries;if(null!==g){const E=null!==c.contentQueries?c.contentQueries[0]:g.length,w=[];for(let M=0;M<E;M++){const L=g.getByIndex(M);w.push(this.queries[L.indexInDeclarationView].clone())}return new Im(w)}return null}insertView(c){this.dirtyQueriesWithMatches(c)}detachView(c){this.dirtyQueriesWithMatches(c)}dirtyQueriesWithMatches(c){for(let g=0;g<this.queries.length;g++)null!==fE(c,g).matches&&this.queries[g].setDirty()}}class rE{constructor(c,g,E=null){this.predicate=c,this.flags=g,this.read=E}}class Mm{constructor(c=[]){this.queries=c}elementStart(c,g){for(let E=0;E<this.queries.length;E++)this.queries[E].elementStart(c,g)}elementEnd(c){for(let g=0;g<this.queries.length;g++)this.queries[g].elementEnd(c)}embeddedTView(c){let g=null;for(let E=0;E<this.length;E++){const w=null!==g?g.length:0,M=this.getByIndex(E).embeddedTView(c,w);M&&(M.indexInDeclarationView=E,null!==g?g.push(M):g=[M])}return null!==g?new Mm(g):null}template(c,g){for(let E=0;E<this.queries.length;E++)this.queries[E].template(c,g)}getByIndex(c){return this.queries[c]}get length(){return this.queries.length}track(c){this.queries.push(c)}}class Am{constructor(c,g=-1){this.metadata=c,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=g}elementStart(c,g){this.isApplyingToNode(g)&&this.matchTNode(c,g)}elementEnd(c){this._declarationNodeIndex===c.index&&(this._appliesToNextNode=!1)}template(c,g){this.elementStart(c,g)}embeddedTView(c,g){return this.isApplyingToNode(c)?(this.crossesNgTemplate=!0,this.addMatch(-c.index,g),new Am(this.metadata)):null}isApplyingToNode(c){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const g=this._declarationNodeIndex;let E=c.parent;for(;null!==E&&8&E.type&&E.index!==g;)E=E.parent;return g===(null!==E?E.index:-1)}return this._appliesToNextNode}matchTNode(c,g){const E=this.metadata.predicate;if(Array.isArray(E))for(let w=0;w<E.length;w++){const M=E[w];this.matchTNodeWithReadOption(c,g,Yw(g,M)),this.matchTNodeWithReadOption(c,g,bi(g,c,M,!1,!1))}else E===tg?4&g.type&&this.matchTNodeWithReadOption(c,g,-1):this.matchTNodeWithReadOption(c,g,bi(g,c,E,!1,!1))}matchTNodeWithReadOption(c,g,E){if(null!==E){const w=this.metadata.read;if(null!==w)if(w===oh||w===o_||w===tg&&4&g.type)this.addMatch(g.index,-2);else{const M=bi(g,c,w,!1,!1);null!==M&&this.addMatch(g.index,M)}else this.addMatch(g.index,E)}}addMatch(c,g){null===this.matches?this.matches=[c,g]:this.matches.push(c,g)}}function Yw(l,c){const g=l.localNames;if(null!==g)for(let E=0;E<g.length;E+=2)if(g[E]===c)return g[E+1];return null}function Kw(l,c,g,E){return-1===g?function(l,c){return 11&l.type?rf(l,c):4&l.type?n_(l,c):null}(c,l):-2===g?function(l,c,g){return g===oh?rf(c,l):g===tg?n_(c,l):g===o_?Ry(c,l):void 0}(l,c,E):$i(l,l[1],g,c)}function aE(l,c,g,E){const w=c[19].queries[E];if(null===w.matches){const M=l.data,L=g.matches,H=[];for(let tt=0;tt<L.length;tt+=2){const mt=L[tt];H.push(mt<0?null:Kw(c,M[mt],L[tt+1],g.metadata.read))}w.matches=H}return w.matches}function Om(l,c,g,E){const w=l.queries.getByIndex(g),M=w.matches;if(null!==M){const L=aE(l,c,w,g);for(let H=0;H<M.length;H+=2){const tt=M[H];if(tt>0)E.push(L[H/2]);else{const mt=M[H+1],Ot=c[-tt];for(let qt=10;qt<Ot.length;qt++){const se=Ot[qt];se[17]===se[3]&&Om(se[1],se,mt,E)}if(null!==Ot[9]){const qt=Ot[9];for(let se=0;se<qt.length;se++){const Ie=qt[se];Om(Ie[1],Ie,mt,E)}}}}}return E}function lE(l){const c=ki(),g=Rn(),E=So();ko(E+1);const w=fE(g,E);if(l.dirty&&_o(c)===(2==(2&w.metadata.flags))){if(null===w.matches)l.reset([]);else{const M=w.crossesNgTemplate?Om(g,c,E,[]):aE(g,c,w,E);l.reset(M,py),l.notifyOnChanges()}return!0}return!1}function cE(l,c,g){const E=Rn();E.firstCreatePass&&(pE(E,new rE(l,c,g),-1),2==(2&c)&&(E.staticViewQueries=!0)),dE(E,ki(),c)}function uE(l,c,g,E){const w=Rn();if(w.firstCreatePass){const M=Xo();pE(w,new rE(c,g,E),M.index),function(l,c){const g=l.contentQueries||(l.contentQueries=[]);c!==(g.length?g[g.length-1]:-1)&&g.push(l.queries.length-1,c)}(w,l),2==(2&g)&&(w.staticContentQueries=!0)}dE(w,ki(),g)}function hE(){return l=ki(),c=So(),l[19].queries[c].queryList;var l,c}function dE(l,c,g){const E=new hg(4==(4&g));Np(l,c,E,E.destroy),null===c[19]&&(c[19]=new Im),c[19].queries.push(new Dm(E))}function pE(l,c,g){null===l.queries&&(l.queries=new Mm),l.queries.track(new Am(c,g))}function fE(l,c){return l.queries.getByIndex(c)}function gE(l,c){return n_(l,c)}const Fm=new ms("Application Initializer");let pf=(()=>{class l{constructor(g){this.appInits=g,this.resolve=Qg,this.reject=Qg,this.initialized=!1,this.done=!1,this.donePromise=new Promise((E,w)=>{this.resolve=E,this.reject=w})}runInitializers(){if(this.initialized)return;const g=[],E=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let w=0;w<this.appInits.length;w++){const M=this.appInits[w]();if(U_(M))g.push(M);else if(G_(M)){const L=new Promise((H,tt)=>{M.subscribe({complete:H,error:tt})});g.push(L)}}Promise.all(g).then(()=>{E()}).catch(w=>{this.reject(w)}),0===g.length&&E(),this.initialized=!0}}return l.\u0275fac=function(g){return new(g||l)(ss(Fm,8))},l.\u0275prov=Pe({token:l,factory:l.\u0275fac}),l})();const kE=new ms("AppId"),SD={provide:kE,useFactory:function(){return`${Bm()}${Bm()}${Bm()}`},deps:[]};function Bm(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const LE=new ms("Platform Initializer"),NE=new ms("Platform ID"),PE=new ms("appBootstrapListener");let FE=(()=>{class l{log(g){console.log(g)}warn(g){console.warn(g)}}return l.\u0275fac=function(g){return new(g||l)},l.\u0275prov=Pe({token:l,factory:l.\u0275fac}),l})();const h_=new ms("LocaleId"),BE=new ms("DefaultCurrencyCode");class wD{constructor(c,g){this.ngModuleFactory=c,this.componentFactories=g}}const Hm=function(l){return new Rm(l)},DD=Hm,ID=function(l){return Promise.resolve(Hm(l))},HE=function(l){const c=Hm(l),E=rl(Eo(l).declarations).reduce((w,M)=>{const L=Vn(M);return L&&w.push(new Xy(L)),w},[]);return new wD(c,E)},MD=HE,AD=function(l){return Promise.resolve(HE(l))};let pg=(()=>{class l{constructor(){this.compileModuleSync=DD,this.compileModuleAsync=ID,this.compileModuleAndAllComponentsSync=MD,this.compileModuleAndAllComponentsAsync=AD}clearCache(){}clearCacheFor(g){}getModuleId(g){}}return l.\u0275fac=function(g){return new(g||l)},l.\u0275prov=Pe({token:l,factory:l.\u0275fac}),l})();const kD=(()=>Promise.resolve(0))();function Vm(l){"undefined"==typeof Zone?kD.then(()=>{l&&l.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",l)}class _c{constructor({enableLongStackTrace:c=!1,shouldCoalesceEventChangeDetection:g=!1,shouldCoalesceRunChangeDetection:E=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new sh(!1),this.onMicrotaskEmpty=new sh(!1),this.onStable=new sh(!1),this.onError=new sh(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const w=this;w._nesting=0,w._outer=w._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(w._inner=w._inner.fork(new Zone.TaskTrackingZoneSpec)),c&&Zone.longStackTraceZoneSpec&&(w._inner=w._inner.fork(Zone.longStackTraceZoneSpec)),w.shouldCoalesceEventChangeDetection=!E&&g,w.shouldCoalesceRunChangeDetection=E,w.lastRequestAnimationFrameId=-1,w.nativeRequestAnimationFrame=function(){let l=pi.requestAnimationFrame,c=pi.cancelAnimationFrame;if("undefined"!=typeof Zone&&l&&c){const g=l[Zone.__symbol__("OriginalDelegate")];g&&(l=g);const E=c[Zone.__symbol__("OriginalDelegate")];E&&(c=E)}return{nativeRequestAnimationFrame:l,nativeCancelAnimationFrame:c}}().nativeRequestAnimationFrame,function(l){const c=()=>{!function(l){l.isCheckStableRunning||-1!==l.lastRequestAnimationFrameId||(l.lastRequestAnimationFrameId=l.nativeRequestAnimationFrame.call(pi,()=>{l.fakeTopEventTask||(l.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{l.lastRequestAnimationFrameId=-1,Gm(l),l.isCheckStableRunning=!0,Um(l),l.isCheckStableRunning=!1},void 0,()=>{},()=>{})),l.fakeTopEventTask.invoke()}),Gm(l))}(l)};l._inner=l._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(g,E,w,M,L,H)=>{try{return VE(l),g.invokeTask(w,M,L,H)}finally{(l.shouldCoalesceEventChangeDetection&&"eventTask"===M.type||l.shouldCoalesceRunChangeDetection)&&c(),UE(l)}},onInvoke:(g,E,w,M,L,H,tt)=>{try{return VE(l),g.invoke(w,M,L,H,tt)}finally{l.shouldCoalesceRunChangeDetection&&c(),UE(l)}},onHasTask:(g,E,w,M)=>{g.hasTask(w,M),E===w&&("microTask"==M.change?(l._hasPendingMicrotasks=M.microTask,Gm(l),Um(l)):"macroTask"==M.change&&(l.hasPendingMacrotasks=M.macroTask))},onHandleError:(g,E,w,M)=>(g.handleError(w,M),l.runOutsideAngular(()=>l.onError.emit(M)),!1)})}(w)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!_c.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(_c.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(c,g,E){return this._inner.run(c,g,E)}runTask(c,g,E,w){const M=this._inner,L=M.scheduleEventTask("NgZoneEvent: "+w,c,ND,Qg,Qg);try{return M.runTask(L,g,E)}finally{M.cancelTask(L)}}runGuarded(c,g,E){return this._inner.runGuarded(c,g,E)}runOutsideAngular(c){return this._outer.run(c)}}const ND={};function Um(l){if(0==l._nesting&&!l.hasPendingMicrotasks&&!l.isStable)try{l._nesting++,l.onMicrotaskEmpty.emit(null)}finally{if(l._nesting--,!l.hasPendingMicrotasks)try{l.runOutsideAngular(()=>l.onStable.emit(null))}finally{l.isStable=!0}}}function Gm(l){l.hasPendingMicrotasks=!!(l._hasPendingMicrotasks||(l.shouldCoalesceEventChangeDetection||l.shouldCoalesceRunChangeDetection)&&-1!==l.lastRequestAnimationFrameId)}function VE(l){l._nesting++,l.isStable&&(l.isStable=!1,l.onUnstable.emit(null))}function UE(l){l._nesting--,Um(l)}class BD{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new sh,this.onMicrotaskEmpty=new sh,this.onStable=new sh,this.onError=new sh}run(c,g,E){return c.apply(g,E)}runGuarded(c,g,E){return c.apply(g,E)}runOutsideAngular(c){return c()}runTask(c,g,E,w){return c.apply(g,E)}}let GE=(()=>{class l{constructor(g){this._ngZone=g,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),g.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{_c.assertNotInAngularZone(),Vm(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Vm(()=>{for(;0!==this._callbacks.length;){let g=this._callbacks.pop();clearTimeout(g.timeoutId),g.doneCb(this._didWork)}this._didWork=!1});else{let g=this.getPendingTasks();this._callbacks=this._callbacks.filter(E=>!E.updateCb||!E.updateCb(g)||(clearTimeout(E.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(g=>({source:g.source,creationLocation:g.creationLocation,data:g.data})):[]}addCallback(g,E,w){let M=-1;E&&E>0&&(M=setTimeout(()=>{this._callbacks=this._callbacks.filter(L=>L.timeoutId!==M),g(this._didWork,this.getPendingTasks())},E)),this._callbacks.push({doneCb:g,timeoutId:M,updateCb:w})}whenStable(g,E,w){if(w&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(g,E,w),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(g,E,w){return[]}}return l.\u0275fac=function(g){return new(g||l)(ss(_c))},l.\u0275prov=Pe({token:l,factory:l.\u0275fac}),l})(),WE=(()=>{class l{constructor(){this._applications=new Map,Wm.addToWindow(this)}registerApplication(g,E){this._applications.set(g,E)}unregisterApplication(g){this._applications.delete(g)}unregisterAllApplications(){this._applications.clear()}getTestability(g){return this._applications.get(g)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(g,E=!0){return Wm.findTestabilityInTree(this,g,E)}}return l.\u0275fac=function(g){return new(g||l)},l.\u0275prov=Pe({token:l,factory:l.\u0275fac}),l})();class HD{addToWindow(c){}findTestabilityInTree(c,g,E){return null}}function VD(l){Wm=l}let Wm=new HD,zE=!0,jE=!1;function zm(){return jE=!0,zE}function UD(){if(jE)throw new Error("Cannot enable prod mode after platform setup.");zE=!1}let yu;const YE=new ms("AllowMultipleToken");class KD{constructor(c,g){this.name=c,this.token=g}}function XE(l,c,g=[]){const E=`Platform: ${c}`,w=new ms(E);return(M=[])=>{let L=KE();if(!L||L.injector.get(YE,!1))if(l)l(g.concat(M).concat({provide:w,useValue:!0}));else{const H=g.concat(M).concat({provide:w,useValue:!0},{provide:C,useValue:"platform"});!function(l){if(yu&&!yu.destroyed&&!yu.injector.get(YE,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");yu=l.get(JE);const c=l.get(LE,null);c&&c.forEach(g=>g())}(Hi.create({providers:H,name:E}))}return function(l){const c=KE();if(!c)throw new Error("No platform exists!");if(!c.injector.get(l,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return c}(w)}}function KE(){return yu&&!yu.destroyed?yu:null}let JE=(()=>{class l{constructor(g){this._injector=g,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(g,E){const H=function(l,c){let g;return g="noop"===l?new BD:("zone.js"===l?void 0:l)||new _c({enableLongStackTrace:zm(),shouldCoalesceEventChangeDetection:!!(null==c?void 0:c.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==c?void 0:c.ngZoneRunCoalescing)}),g}(E?E.ngZone:void 0,{ngZoneEventCoalescing:E&&E.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:E&&E.ngZoneRunCoalescing||!1}),tt=[{provide:_c,useValue:H}];return H.run(()=>{const mt=Hi.create({providers:tt,parent:this.injector,name:g.moduleType.name}),Ot=g.create(mt),qt=Ot.injector.get(cc,null);if(!qt)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return H.runOutsideAngular(()=>{const se=H.onError.subscribe({next:Ie=>{qt.handleError(Ie)}});Ot.onDestroy(()=>{jm(this._modules,Ot),se.unsubscribe()})}),function(l,c,g){try{const E=g();return U_(E)?E.catch(w=>{throw c.runOutsideAngular(()=>l.handleError(w)),w}):E}catch(E){throw c.runOutsideAngular(()=>l.handleError(E)),E}}(qt,H,()=>{const se=Ot.injector.get(pf);return se.runInitializers(),se.donePromise.then(()=>(nm(Ot.injector.get(h_,Xg)||Xg),this._moduleDoBootstrap(Ot),Ot))})})}bootstrapModule(g,E=[]){const w=$E({},E);return function(l,c,g){const E=new Rm(g);return Promise.resolve(E)}(0,0,g).then(M=>this.bootstrapModuleFactory(M,w))}_moduleDoBootstrap(g){const E=g.injector.get(fg);if(g._bootstrapComponents.length>0)g._bootstrapComponents.forEach(w=>E.bootstrap(w));else{if(!g.instance.ngDoBootstrap)throw new Error(`The module ${p(g.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);g.instance.ngDoBootstrap(E)}this._modules.push(g)}onDestroy(g){this._destroyListeners.push(g)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(g=>g.destroy()),this._destroyListeners.forEach(g=>g()),this._destroyed=!0}get destroyed(){return this._destroyed}}return l.\u0275fac=function(g){return new(g||l)(ss(Hi))},l.\u0275prov=Pe({token:l,factory:l.\u0275fac}),l})();function $E(l,c){return Array.isArray(c)?c.reduce($E,l):Object.assign(Object.assign({},l),c)}let fg=(()=>{class l{constructor(g,E,w,M,L){this._zone=g,this._injector=E,this._exceptionHandler=w,this._componentFactoryResolver=M,this._initStatus=L,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const H=new e.y(mt=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{mt.next(this._stable),mt.complete()})}),tt=new e.y(mt=>{let Ot;this._zone.runOutsideAngular(()=>{Ot=this._zone.onStable.subscribe(()=>{_c.assertNotInAngularZone(),Vm(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,mt.next(!0))})})});const qt=this._zone.onUnstable.subscribe(()=>{_c.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{mt.next(!1)}))});return()=>{Ot.unsubscribe(),qt.unsubscribe()}});this.isStable=(0,t.T)(H,tt.pipe((0,n.B)()))}bootstrap(g,E){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let w;w=g instanceof uy?g:this._componentFactoryResolver.resolveComponentFactory(g),this.componentTypes.push(w.componentType);const M=function(l){return l.isBoundToModule}(w)?void 0:this._injector.get(ap),H=w.create(Hi.NULL,[],E||w.selector,M),tt=H.location.nativeElement,mt=H.injector.get(GE,null),Ot=mt&&H.injector.get(WE);return mt&&Ot&&Ot.registerApplication(tt,mt),H.onDestroy(()=>{this.detachView(H.hostView),jm(this.components,H),Ot&&Ot.unregisterApplication(tt)}),this._loadComponent(H),H}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let g of this._views)g.detectChanges()}catch(g){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(g))}finally{this._runningTick=!1}}attachView(g){const E=g;this._views.push(E),E.attachToAppRef(this)}detachView(g){const E=g;jm(this._views,E),E.detachFromAppRef()}_loadComponent(g){this.attachView(g.hostView),this.tick(),this.components.push(g),this._injector.get(PE,[]).concat(this._bootstrapListeners).forEach(w=>w(g))}ngOnDestroy(){this._views.slice().forEach(g=>g.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return l.\u0275fac=function(g){return new(g||l)(ss(_c),ss(Hi),ss(cc),ss(sf),ss(pf))},l.\u0275prov=Pe({token:l,factory:l.\u0275fac}),l})();function jm(l,c){const g=l.indexOf(c);g>-1&&l.splice(g,1)}class tI{}class iI{}const nI={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let oI=(()=>{class l{constructor(g,E){this._compiler=g,this._config=E||nI}load(g){return this.loadAndCompile(g)}loadAndCompile(g){let[E,w]=g.split("#");return void 0===w&&(w="default"),v(98255)(E).then(M=>M[w]).then(M=>tT(M,E,w)).then(M=>this._compiler.compileModuleAsync(M))}loadFactory(g){let[E,w]=g.split("#"),M="NgFactory";return void 0===w&&(w="default",M=""),v(98255)(this._config.factoryPathPrefix+E+this._config.factoryPathSuffix).then(L=>L[w+M]).then(L=>tT(L,E,w))}}return l.\u0275fac=function(g){return new(g||l)(ss(pg),ss(iI,8))},l.\u0275prov=Pe({token:l,factory:l.\u0275fac}),l})();function tT(l,c,g){if(!l)throw new Error(`Cannot find '${g}' in '${c}'`);return l}const dI=function(l){return null},fI=XE(null,"core",[{provide:NE,useValue:"unknown"},{provide:JE,deps:[Hi]},{provide:WE,deps:[]},{provide:FE,deps:[]}]),bI=[{provide:fg,useClass:fg,deps:[_c,Hi,cc,sf,pf]},{provide:Cw,deps:[_c],useFactory:function(l){let c=[];return l.onStable.subscribe(()=>{for(;c.length;)c.pop()()}),function(g){c.push(g)}}},{provide:pf,useClass:pf,deps:[[new Ga,Fm]]},{provide:pg,useClass:pg,deps:[]},SD,{provide:t_,useFactory:function(){return mR},deps:[]},{provide:e_,useFactory:function(){return vR},deps:[]},{provide:h_,useFactory:function(l){return nm(l=l||"undefined"!=typeof $localize&&$localize.locale||Xg),l},deps:[[new Ua(h_),new Ga,new Da]]},{provide:BE,useValue:"USD"}];let EI=(()=>{class l{constructor(g){}}return l.\u0275fac=function(g){return new(g||l)(ss(fg))},l.\u0275mod=Pi({type:l}),l.\u0275inj=oi({providers:bI}),l})()},93324:(B,U,v)=>{"use strict";v.d(U,{Zs:()=>xo,gN:()=>ui,sg:()=>ws,u5:()=>$s,Cf:()=>ct,JU:()=>p,a5:()=>Oe,JJ:()=>hi,F:()=>Yn,On:()=>An,kI:()=>Rt});var T=v(42741),a=v(16274),e=v(72850),t=v(90714),n=v(88561);let o=(()=>{class J{constructor(et,xt){this._renderer=et,this._elementRef=xt,this.onChange=ze=>{},this.onTouched=()=>{}}setProperty(et,xt){this._renderer.setProperty(this._elementRef.nativeElement,et,xt)}registerOnTouched(et){this.onTouched=et}registerOnChange(et){this.onChange=et}setDisabledState(et){this.setProperty("disabled",et)}}return J.\u0275fac=function(et){return new(et||J)(T.Y36(T.Qsj),T.Y36(T.SBq))},J.\u0275dir=T.lG2({type:J}),J})(),r=(()=>{class J extends o{}return J.\u0275fac=function(){let q;return function(xt){return(q||(q=T.n5z(J)))(xt||J)}}(),J.\u0275dir=T.lG2({type:J,features:[T.qOj]}),J})();const p=new T.OlP("NgValueAccessor"),x={provide:p,useExisting:(0,T.Gpc)(()=>X),multi:!0},Y=new T.OlP("CompositionEventMode");let X=(()=>{class J extends o{constructor(et,xt,ze){super(et,xt),this._compositionMode=ze,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const J=(0,a.q)()?(0,a.q)().getUserAgent():"";return/android (\d+)/.test(J.toLowerCase())}())}writeValue(et){this.setProperty("value",null==et?"":et)}_handleInput(et){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(et)}_compositionStart(){this._composing=!0}_compositionEnd(et){this._composing=!1,this._compositionMode&&this.onChange(et)}}return J.\u0275fac=function(et){return new(et||J)(T.Y36(T.Qsj),T.Y36(T.SBq),T.Y36(Y,8))},J.\u0275dir=T.lG2({type:J,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(et,xt){1&et&&T.NdJ("input",function(Ii){return xt._handleInput(Ii.target.value)})("blur",function(){return xt.onTouched()})("compositionstart",function(){return xt._compositionStart()})("compositionend",function(Ii){return xt._compositionEnd(Ii.target.value)})},features:[T._Bn([x]),T.qOj]}),J})();function it(J){return null==J||0===J.length}function rt(J){return null!=J&&"number"==typeof J.length}const ct=new T.OlP("NgValidators"),wt=new T.OlP("NgAsyncValidators"),At=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Rt{static min(q){return J=q,q=>{if(it(q.value)||it(J))return null;const et=parseFloat(q.value);return!isNaN(et)&&et<J?{min:{min:J,actual:q.value}}:null};var J}static max(q){return J=q,q=>{if(it(q.value)||it(J))return null;const et=parseFloat(q.value);return!isNaN(et)&&et>J?{max:{max:J,actual:q.value}}:null};var J}static required(q){return st(q)}static requiredTrue(q){return ot(q)}static email(q){return it((J=q).value)||At.test(J.value)?null:{email:!0};var J}static minLength(q){return J=q,q=>it(q.value)||!rt(q.value)?null:q.value.length<J?{minlength:{requiredLength:J,actualLength:q.value.length}}:null;var J}static maxLength(q){return J=q,q=>rt(q.value)&&q.value.length>J?{maxlength:{requiredLength:J,actualLength:q.value.length}}:null;var J}static pattern(q){return function(J){if(!J)return gt;let q,et;return"string"==typeof J?(et="","^"!==J.charAt(0)&&(et+="^"),et+=J,"$"!==J.charAt(J.length-1)&&(et+="$"),q=new RegExp(et)):(et=J.toString(),q=J),xt=>{if(it(xt.value))return null;const ze=xt.value;return q.test(ze)?null:{pattern:{requiredPattern:et,actualValue:ze}}}}(q)}static nullValidator(q){return null}static compose(q){return Ce(q)}static composeAsync(q){return we(q)}}function st(J){return it(J.value)?{required:!0}:null}function ot(J){return!0===J.value?null:{required:!0}}function gt(J){return null}function _t(J){return null!=J}function Jt(J){const q=(0,T.QGY)(J)?(0,e.D)(J):J;return(0,T.CqO)(q),q}function Pt(J){let q={};return J.forEach(et=>{q=null!=et?Object.assign(Object.assign({},q),et):q}),0===Object.keys(q).length?null:q}function oe(J,q){return q.map(et=>et(J))}function Xe(J){return J.map(q=>function(J){return!J.validate}(q)?q:et=>q.validate(et))}function Ce(J){if(!J)return null;const q=J.filter(_t);return 0==q.length?null:function(et){return Pt(oe(et,q))}}function Ze(J){return null!=J?Ce(Xe(J)):null}function we(J){if(!J)return null;const q=J.filter(_t);return 0==q.length?null:function(et){const xt=oe(et,q).map(Jt);return(0,t.D)(xt).pipe((0,n.U)(Pt))}}function ai(J){return null!=J?we(Xe(J)):null}function re(J,q){return null===J?[q]:Array.isArray(J)?[...J,q]:[J,q]}function ce(J){return J._rawValidators}function Pe(J){return J._rawAsyncValidators}function qe(J){return J?Array.isArray(J)?J:[J]:[]}function oi(J,q){return Array.isArray(J)?J.includes(q):J===q}function wi(J,q){const et=qe(q);return qe(J).forEach(ze=>{oi(et,ze)||et.push(ze)}),et}function Ji(J,q){return qe(q).filter(et=>!oi(J,et))}let Ni=(()=>{class J{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(et){this._rawValidators=et||[],this._composedValidatorFn=Ze(this._rawValidators)}_setAsyncValidators(et){this._rawAsyncValidators=et||[],this._composedAsyncValidatorFn=ai(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(et){this._onDestroyCallbacks.push(et)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(et=>et()),this._onDestroyCallbacks=[]}reset(et){this.control&&this.control.reset(et)}hasError(et,xt){return!!this.control&&this.control.hasError(et,xt)}getError(et,xt){return this.control?this.control.getError(et,xt):null}}return J.\u0275fac=function(et){return new(et||J)},J.\u0275dir=T.lG2({type:J}),J})(),ui=(()=>{class J extends Ni{get formDirective(){return null}get path(){return null}}return J.\u0275fac=function(){let q;return function(xt){return(q||(q=T.n5z(J)))(xt||J)}}(),J.\u0275dir=T.lG2({type:J,features:[T.qOj]}),J})();class Oe extends Ni{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let hi=(()=>{class J extends class{constructor(q){this._cd=q}is(q){var et,xt,ze;return"submitted"===q?!!(null===(et=this._cd)||void 0===et?void 0:et.submitted):!!(null===(ze=null===(xt=this._cd)||void 0===xt?void 0:xt.control)||void 0===ze?void 0:ze[q])}}{constructor(et){super(et)}}return J.\u0275fac=function(et){return new(et||J)(T.Y36(Oe,2))},J.\u0275dir=T.lG2({type:J,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(et,xt){2&et&&T.ekj("ng-untouched",xt.is("untouched"))("ng-touched",xt.is("touched"))("ng-pristine",xt.is("pristine"))("ng-dirty",xt.is("dirty"))("ng-valid",xt.is("valid"))("ng-invalid",xt.is("invalid"))("ng-pending",xt.is("pending"))},features:[T.qOj]}),J})();function vi(J,q){ne(J,q),q.valueAccessor.writeValue(J.value),function(J,q){q.valueAccessor.registerOnChange(et=>{J._pendingValue=et,J._pendingChange=!0,J._pendingDirty=!0,"change"===J.updateOn&&Zi(J,q)})}(J,q),function(J,q){const et=(xt,ze)=>{q.valueAccessor.writeValue(xt),ze&&q.viewToModelUpdate(xt)};J.registerOnChange(et),q._registerOnDestroy(()=>{J._unregisterOnChange(et)})}(J,q),function(J,q){q.valueAccessor.registerOnTouched(()=>{J._pendingTouched=!0,"blur"===J.updateOn&&J._pendingChange&&Zi(J,q),"submit"!==J.updateOn&&J.markAsTouched()})}(J,q),function(J,q){if(q.valueAccessor.setDisabledState){const et=xt=>{q.valueAccessor.setDisabledState(xt)};J.registerOnDisabledChange(et),q._registerOnDestroy(()=>{J._unregisterOnDisabledChange(et)})}}(J,q)}function pi(J,q,et=!0){const xt=()=>{};q.valueAccessor&&(q.valueAccessor.registerOnChange(xt),q.valueAccessor.registerOnTouched(xt)),xe(J,q),J&&(q._invokeOnDestroyCallbacks(),J._registerOnCollectionChange(()=>{}))}function Ue(J,q){J.forEach(et=>{et.registerOnValidatorChange&&et.registerOnValidatorChange(q)})}function ne(J,q){const et=ce(J);null!==q.validator?J.setValidators(re(et,q.validator)):"function"==typeof et&&J.setValidators([et]);const xt=Pe(J);null!==q.asyncValidator?J.setAsyncValidators(re(xt,q.asyncValidator)):"function"==typeof xt&&J.setAsyncValidators([xt]);const ze=()=>J.updateValueAndValidity();Ue(q._rawValidators,ze),Ue(q._rawAsyncValidators,ze)}function xe(J,q){let et=!1;if(null!==J){if(null!==q.validator){const ze=ce(J);if(Array.isArray(ze)&&ze.length>0){const Ii=ze.filter(Cn=>Cn!==q.validator);Ii.length!==ze.length&&(et=!0,J.setValidators(Ii))}}if(null!==q.asyncValidator){const ze=Pe(J);if(Array.isArray(ze)&&ze.length>0){const Ii=ze.filter(Cn=>Cn!==q.asyncValidator);Ii.length!==ze.length&&(et=!0,J.setAsyncValidators(Ii))}}}const xt=()=>{};return Ue(q._rawValidators,xt),Ue(q._rawAsyncValidators,xt),et}function Zi(J,q){J._pendingDirty&&J.markAsDirty(),J.setValue(J._pendingValue,{emitModelToViewChange:!1}),q.viewToModelUpdate(J._pendingValue),J._pendingChange=!1}function Ui(J,q){ne(J,q)}function Gt(J,q){J._syncPendingControls(),q.forEach(et=>{const xt=et.control;"submit"===xt.updateOn&&xt._pendingChange&&(et.viewToModelUpdate(xt._pendingValue),xt._pendingChange=!1)})}function Je(J,q){const et=J.indexOf(q);et>-1&&J.splice(et,1)}const Oi="VALID",kn="INVALID",Wn="PENDING",so="DISABLED";function Dn(J){return(ro(J)?J.validators:J)||null}function Do(J){return Array.isArray(J)?Ze(J):J||null}function Eo(J,q){return(ro(q)?q.asyncValidators:J)||null}function hs(J){return Array.isArray(J)?ai(J):J||null}function ro(J){return null!=J&&!Array.isArray(J)&&"object"==typeof J}class Li{constructor(q,et){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=q,this._rawAsyncValidators=et,this._composedValidatorFn=Do(this._rawValidators),this._composedAsyncValidatorFn=hs(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(q){this._rawValidators=this._composedValidatorFn=q}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(q){this._rawAsyncValidators=this._composedAsyncValidatorFn=q}get parent(){return this._parent}get valid(){return this.status===Oi}get invalid(){return this.status===kn}get pending(){return this.status==Wn}get disabled(){return this.status===so}get enabled(){return this.status!==so}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(q){this._rawValidators=q,this._composedValidatorFn=Do(q)}setAsyncValidators(q){this._rawAsyncValidators=q,this._composedAsyncValidatorFn=hs(q)}addValidators(q){this.setValidators(wi(q,this._rawValidators))}addAsyncValidators(q){this.setAsyncValidators(wi(q,this._rawAsyncValidators))}removeValidators(q){this.setValidators(Ji(q,this._rawValidators))}removeAsyncValidators(q){this.setAsyncValidators(Ji(q,this._rawAsyncValidators))}hasValidator(q){return oi(this._rawValidators,q)}hasAsyncValidator(q){return oi(this._rawAsyncValidators,q)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(q={}){this.touched=!0,this._parent&&!q.onlySelf&&this._parent.markAsTouched(q)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(q=>q.markAllAsTouched())}markAsUntouched(q={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(et=>{et.markAsUntouched({onlySelf:!0})}),this._parent&&!q.onlySelf&&this._parent._updateTouched(q)}markAsDirty(q={}){this.pristine=!1,this._parent&&!q.onlySelf&&this._parent.markAsDirty(q)}markAsPristine(q={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(et=>{et.markAsPristine({onlySelf:!0})}),this._parent&&!q.onlySelf&&this._parent._updatePristine(q)}markAsPending(q={}){this.status=Wn,!1!==q.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!q.onlySelf&&this._parent.markAsPending(q)}disable(q={}){const et=this._parentMarkedDirty(q.onlySelf);this.status=so,this.errors=null,this._forEachChild(xt=>{xt.disable(Object.assign(Object.assign({},q),{onlySelf:!0}))}),this._updateValue(),!1!==q.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},q),{skipPristineCheck:et})),this._onDisabledChange.forEach(xt=>xt(!0))}enable(q={}){const et=this._parentMarkedDirty(q.onlySelf);this.status=Oi,this._forEachChild(xt=>{xt.enable(Object.assign(Object.assign({},q),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:q.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},q),{skipPristineCheck:et})),this._onDisabledChange.forEach(xt=>xt(!1))}_updateAncestors(q){this._parent&&!q.onlySelf&&(this._parent.updateValueAndValidity(q),q.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(q){this._parent=q}updateValueAndValidity(q={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Oi||this.status===Wn)&&this._runAsyncValidator(q.emitEvent)),!1!==q.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!q.onlySelf&&this._parent.updateValueAndValidity(q)}_updateTreeValidity(q={emitEvent:!0}){this._forEachChild(et=>et._updateTreeValidity(q)),this.updateValueAndValidity({onlySelf:!0,emitEvent:q.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?so:Oi}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(q){if(this.asyncValidator){this.status=Wn,this._hasOwnPendingAsyncValidator=!0;const et=Jt(this.asyncValidator(this));this._asyncValidationSubscription=et.subscribe(xt=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(xt,{emitEvent:q})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(q,et={}){this.errors=q,this._updateControlsErrors(!1!==et.emitEvent)}get(q){return function(J,q,et){if(null==q||(Array.isArray(q)||(q=q.split(".")),Array.isArray(q)&&0===q.length))return null;let xt=J;return q.forEach(ze=>{xt=xt instanceof Fn?xt.controls.hasOwnProperty(ze)?xt.controls[ze]:null:xt instanceof jo&&xt.at(ze)||null}),xt}(this,q)}getError(q,et){const xt=et?this.get(et):this;return xt&&xt.errors?xt.errors[q]:null}hasError(q,et){return!!this.getError(q,et)}get root(){let q=this;for(;q._parent;)q=q._parent;return q}_updateControlsErrors(q){this.status=this._calculateStatus(),q&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(q)}_initObservables(){this.valueChanges=new T.vpe,this.statusChanges=new T.vpe}_calculateStatus(){return this._allControlsDisabled()?so:this.errors?kn:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Wn)?Wn:this._anyControlsHaveStatus(kn)?kn:Oi}_anyControlsHaveStatus(q){return this._anyControls(et=>et.status===q)}_anyControlsDirty(){return this._anyControls(q=>q.dirty)}_anyControlsTouched(){return this._anyControls(q=>q.touched)}_updatePristine(q={}){this.pristine=!this._anyControlsDirty(),this._parent&&!q.onlySelf&&this._parent._updatePristine(q)}_updateTouched(q={}){this.touched=this._anyControlsTouched(),this._parent&&!q.onlySelf&&this._parent._updateTouched(q)}_isBoxedValue(q){return"object"==typeof q&&null!==q&&2===Object.keys(q).length&&"value"in q&&"disabled"in q}_registerOnCollectionChange(q){this._onCollectionChange=q}_setUpdateStrategy(q){ro(q)&&null!=q.updateOn&&(this._updateOn=q.updateOn)}_parentMarkedDirty(q){return!q&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class pn extends Li{constructor(q=null,et,xt){super(Dn(et),Eo(xt,et)),this._onChange=[],this._applyFormState(q),this._setUpdateStrategy(et),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(q,et={}){this.value=this._pendingValue=q,this._onChange.length&&!1!==et.emitModelToViewChange&&this._onChange.forEach(xt=>xt(this.value,!1!==et.emitViewToModelChange)),this.updateValueAndValidity(et)}patchValue(q,et={}){this.setValue(q,et)}reset(q=null,et={}){this._applyFormState(q),this.markAsPristine(et),this.markAsUntouched(et),this.setValue(this.value,et),this._pendingChange=!1}_updateValue(){}_anyControls(q){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(q){this._onChange.push(q)}_unregisterOnChange(q){Je(this._onChange,q)}registerOnDisabledChange(q){this._onDisabledChange.push(q)}_unregisterOnDisabledChange(q){Je(this._onDisabledChange,q)}_forEachChild(q){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(q){this._isBoxedValue(q)?(this.value=this._pendingValue=q.value,q.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=q}}class Fn extends Li{constructor(q,et,xt){super(Dn(et),Eo(xt,et)),this.controls=q,this._initObservables(),this._setUpdateStrategy(et),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(q,et){return this.controls[q]?this.controls[q]:(this.controls[q]=et,et.setParent(this),et._registerOnCollectionChange(this._onCollectionChange),et)}addControl(q,et,xt={}){this.registerControl(q,et),this.updateValueAndValidity({emitEvent:xt.emitEvent}),this._onCollectionChange()}removeControl(q,et={}){this.controls[q]&&this.controls[q]._registerOnCollectionChange(()=>{}),delete this.controls[q],this.updateValueAndValidity({emitEvent:et.emitEvent}),this._onCollectionChange()}setControl(q,et,xt={}){this.controls[q]&&this.controls[q]._registerOnCollectionChange(()=>{}),delete this.controls[q],et&&this.registerControl(q,et),this.updateValueAndValidity({emitEvent:xt.emitEvent}),this._onCollectionChange()}contains(q){return this.controls.hasOwnProperty(q)&&this.controls[q].enabled}setValue(q,et={}){this._checkAllValuesPresent(q),Object.keys(q).forEach(xt=>{this._throwIfControlMissing(xt),this.controls[xt].setValue(q[xt],{onlySelf:!0,emitEvent:et.emitEvent})}),this.updateValueAndValidity(et)}patchValue(q,et={}){null!=q&&(Object.keys(q).forEach(xt=>{this.controls[xt]&&this.controls[xt].patchValue(q[xt],{onlySelf:!0,emitEvent:et.emitEvent})}),this.updateValueAndValidity(et))}reset(q={},et={}){this._forEachChild((xt,ze)=>{xt.reset(q[ze],{onlySelf:!0,emitEvent:et.emitEvent})}),this._updatePristine(et),this._updateTouched(et),this.updateValueAndValidity(et)}getRawValue(){return this._reduceChildren({},(q,et,xt)=>(q[xt]=et instanceof pn?et.value:et.getRawValue(),q))}_syncPendingControls(){let q=this._reduceChildren(!1,(et,xt)=>!!xt._syncPendingControls()||et);return q&&this.updateValueAndValidity({onlySelf:!0}),q}_throwIfControlMissing(q){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[q])throw new Error(`Cannot find form control with name: ${q}.`)}_forEachChild(q){Object.keys(this.controls).forEach(et=>{const xt=this.controls[et];xt&&q(xt,et)})}_setUpControls(){this._forEachChild(q=>{q.setParent(this),q._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(q){for(const et of Object.keys(this.controls)){const xt=this.controls[et];if(this.contains(et)&&q(xt))return!0}return!1}_reduceValue(){return this._reduceChildren({},(q,et,xt)=>((et.enabled||this.disabled)&&(q[xt]=et.value),q))}_reduceChildren(q,et){let xt=q;return this._forEachChild((ze,Ii)=>{xt=et(xt,ze,Ii)}),xt}_allControlsDisabled(){for(const q of Object.keys(this.controls))if(this.controls[q].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(q){this._forEachChild((et,xt)=>{if(void 0===q[xt])throw new Error(`Must supply a value for form control with name: '${xt}'.`)})}}class jo extends Li{constructor(q,et,xt){super(Dn(et),Eo(xt,et)),this.controls=q,this._initObservables(),this._setUpdateStrategy(et),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(q){return this.controls[q]}push(q,et={}){this.controls.push(q),this._registerControl(q),this.updateValueAndValidity({emitEvent:et.emitEvent}),this._onCollectionChange()}insert(q,et,xt={}){this.controls.splice(q,0,et),this._registerControl(et),this.updateValueAndValidity({emitEvent:xt.emitEvent})}removeAt(q,et={}){this.controls[q]&&this.controls[q]._registerOnCollectionChange(()=>{}),this.controls.splice(q,1),this.updateValueAndValidity({emitEvent:et.emitEvent})}setControl(q,et,xt={}){this.controls[q]&&this.controls[q]._registerOnCollectionChange(()=>{}),this.controls.splice(q,1),et&&(this.controls.splice(q,0,et),this._registerControl(et)),this.updateValueAndValidity({emitEvent:xt.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(q,et={}){this._checkAllValuesPresent(q),q.forEach((xt,ze)=>{this._throwIfControlMissing(ze),this.at(ze).setValue(xt,{onlySelf:!0,emitEvent:et.emitEvent})}),this.updateValueAndValidity(et)}patchValue(q,et={}){null!=q&&(q.forEach((xt,ze)=>{this.at(ze)&&this.at(ze).patchValue(xt,{onlySelf:!0,emitEvent:et.emitEvent})}),this.updateValueAndValidity(et))}reset(q=[],et={}){this._forEachChild((xt,ze)=>{xt.reset(q[ze],{onlySelf:!0,emitEvent:et.emitEvent})}),this._updatePristine(et),this._updateTouched(et),this.updateValueAndValidity(et)}getRawValue(){return this.controls.map(q=>q instanceof pn?q.value:q.getRawValue())}clear(q={}){this.controls.length<1||(this._forEachChild(et=>et._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:q.emitEvent}))}_syncPendingControls(){let q=this.controls.reduce((et,xt)=>!!xt._syncPendingControls()||et,!1);return q&&this.updateValueAndValidity({onlySelf:!0}),q}_throwIfControlMissing(q){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(q))throw new Error(`Cannot find form control at index ${q}`)}_forEachChild(q){this.controls.forEach((et,xt)=>{q(et,xt)})}_updateValue(){this.value=this.controls.filter(q=>q.enabled||this.disabled).map(q=>q.value)}_anyControls(q){return this.controls.some(et=>et.enabled&&q(et))}_setUpControls(){this._forEachChild(q=>this._registerControl(q))}_checkAllValuesPresent(q){this._forEachChild((et,xt)=>{if(void 0===q[xt])throw new Error(`Must supply a value for form control at index: ${xt}.`)})}_allControlsDisabled(){for(const q of this.controls)if(q.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(q){q.setParent(this),q._registerOnCollectionChange(this._onCollectionChange)}}const es={provide:ui,useExisting:(0,T.Gpc)(()=>Yn)},Vo=(()=>Promise.resolve(null))();let Yn=(()=>{class J extends ui{constructor(et,xt){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new T.vpe,this.form=new Fn({},Ze(et),ai(xt))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(et){Vo.then(()=>{const xt=this._findContainer(et.path);et.control=xt.registerControl(et.name,et.control),vi(et.control,et),et.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(et)})}getControl(et){return this.form.get(et.path)}removeControl(et){Vo.then(()=>{const xt=this._findContainer(et.path);xt&&xt.removeControl(et.name),Je(this._directives,et)})}addFormGroup(et){Vo.then(()=>{const xt=this._findContainer(et.path),ze=new Fn({});Ui(ze,et),xt.registerControl(et.name,ze),ze.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(et){Vo.then(()=>{const xt=this._findContainer(et.path);xt&&xt.removeControl(et.name)})}getFormGroup(et){return this.form.get(et.path)}updateModel(et,xt){Vo.then(()=>{this.form.get(et.path).setValue(xt)})}setValue(et){this.control.setValue(et)}onSubmit(et){return this.submitted=!0,Gt(this.form,this._directives),this.ngSubmit.emit(et),!1}onReset(){this.resetForm()}resetForm(et){this.form.reset(et),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(et){return et.pop(),et.length?this.form.get(et):this.form}}return J.\u0275fac=function(et){return new(et||J)(T.Y36(ct,10),T.Y36(wt,10))},J.\u0275dir=T.lG2({type:J,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(et,xt){1&et&&T.NdJ("submit",function(Ii){return xt.onSubmit(Ii)})("reset",function(){return xt.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[T._Bn([es]),T.qOj]}),J})();const _i={provide:Oe,useExisting:(0,T.Gpc)(()=>An)},fn=(()=>Promise.resolve(null))();let An=(()=>{class J extends Oe{constructor(et,xt,ze,Ii){super(),this.control=new pn,this._registered=!1,this.update=new T.vpe,this._parent=et,this._setValidators(xt),this._setAsyncValidators(ze),this.valueAccessor=function(J,q){if(!q)return null;let et,xt,ze;return Array.isArray(q),q.forEach(Ii=>{Ii.constructor===X?et=Ii:function(J){return Object.getPrototypeOf(J.constructor)===r}(Ii)?xt=Ii:ze=Ii}),ze||xt||et||null}(0,Ii)}ngOnChanges(et){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in et&&this._updateDisabled(et),function(J,q){if(!J.hasOwnProperty("model"))return!1;const et=J.model;return!!et.isFirstChange()||!Object.is(q,et.currentValue)}(et,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(J,q){return[...q.path,J]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(et){this.viewModel=et,this.update.emit(et)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){vi(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(et){fn.then(()=>{this.control.setValue(et,{emitViewToModelChange:!1})})}_updateDisabled(et){const xt=et.isDisabled.currentValue,ze=""===xt||xt&&"false"!==xt;fn.then(()=>{ze&&!this.control.disabled?this.control.disable():!ze&&this.control.disabled&&this.control.enable()})}}return J.\u0275fac=function(et){return new(et||J)(T.Y36(ui,9),T.Y36(ct,10),T.Y36(wt,10),T.Y36(p,10))},J.\u0275dir=T.lG2({type:J,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[T._Bn([_i]),T.qOj,T.TTD]}),J})(),Ao=(()=>{class J{}return J.\u0275fac=function(et){return new(et||J)},J.\u0275mod=T.oAB({type:J}),J.\u0275inj=T.cJS({}),J})();const Co={provide:ui,useExisting:(0,T.Gpc)(()=>ws)};let ws=(()=>{class J extends ui{constructor(et,xt){super(),this.validators=et,this.asyncValidators=xt,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new T.vpe,this._setValidators(et),this._setAsyncValidators(xt)}ngOnChanges(et){this._checkFormPresent(),et.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(xe(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(et){const xt=this.form.get(et.path);return vi(xt,et),xt.updateValueAndValidity({emitEvent:!1}),this.directives.push(et),xt}getControl(et){return this.form.get(et.path)}removeControl(et){pi(et.control||null,et,!1),Je(this.directives,et)}addFormGroup(et){this._setUpFormContainer(et)}removeFormGroup(et){this._cleanUpFormContainer(et)}getFormGroup(et){return this.form.get(et.path)}addFormArray(et){this._setUpFormContainer(et)}removeFormArray(et){this._cleanUpFormContainer(et)}getFormArray(et){return this.form.get(et.path)}updateModel(et,xt){this.form.get(et.path).setValue(xt)}onSubmit(et){return this.submitted=!0,Gt(this.form,this.directives),this.ngSubmit.emit(et),!1}onReset(){this.resetForm()}resetForm(et){this.form.reset(et),this.submitted=!1}_updateDomValue(){this.directives.forEach(et=>{const xt=et.control,ze=this.form.get(et.path);xt!==ze&&(pi(xt||null,et),ze instanceof pn&&(vi(ze,et),et.control=ze))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(et){const xt=this.form.get(et.path);Ui(xt,et),xt.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(et){if(this.form){const xt=this.form.get(et.path);xt&&function(J,q){return xe(J,q)}(xt,et)&&xt.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ne(this.form,this),this._oldForm&&xe(this._oldForm,this)}_checkFormPresent(){}}return J.\u0275fac=function(et){return new(et||J)(T.Y36(ct,10),T.Y36(wt,10))},J.\u0275dir=T.lG2({type:J,selectors:[["","formGroup",""]],hostBindings:function(et,xt){1&et&&T.NdJ("submit",function(Ii){return xt.onSubmit(Ii)})("reset",function(){return xt.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[T._Bn([Co]),T.qOj,T.TTD]}),J})();const Ns={provide:ct,useExisting:(0,T.Gpc)(()=>Us),multi:!0},ra={provide:ct,useExisting:(0,T.Gpc)(()=>xo),multi:!0};let Us=(()=>{class J{constructor(){this._required=!1}get required(){return this._required}set required(et){this._required=null!=et&&!1!==et&&"false"!=`${et}`,this._onChange&&this._onChange()}validate(et){return this.required?st(et):null}registerOnValidatorChange(et){this._onChange=et}}return J.\u0275fac=function(et){return new(et||J)},J.\u0275dir=T.lG2({type:J,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(et,xt){2&et&&T.uIk("required",xt.required?"":null)},inputs:{required:"required"},features:[T._Bn([Ns])]}),J})(),xo=(()=>{class J extends Us{validate(et){return this.required?ot(et):null}}return J.\u0275fac=function(){let q;return function(xt){return(q||(q=T.n5z(J)))(xt||J)}}(),J.\u0275dir=T.lG2({type:J,selectors:[["input","type","checkbox","required","","formControlName",""],["input","type","checkbox","required","","formControl",""],["input","type","checkbox","required","","ngModel",""]],hostVars:1,hostBindings:function(et,xt){2&et&&T.uIk("required",xt.required?"":null)},features:[T._Bn([ra]),T.qOj]}),J})(),la=(()=>{class J{}return J.\u0275fac=function(et){return new(et||J)},J.\u0275mod=T.oAB({type:J}),J.\u0275inj=T.cJS({imports:[[Ao]]}),J})(),$s=(()=>{class J{}return J.\u0275fac=function(et){return new(et||J)},J.\u0275mod=T.oAB({type:J}),J.\u0275inj=T.cJS({imports:[la]}),J})()},67617:(B,U,v)=>{"use strict";v.d(U,{zs:()=>k,lW:()=>x,ot:()=>Y});var T=v(40688),a=v(81728),e=v(42741),t=v(72882);const n=["mat-button",""],o=["*"],r=".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n",b=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],I=(0,T.pj)((0,T.Id)((0,T.Kr)(class{constructor(X){this._elementRef=X}})));let x=(()=>{class X extends I{constructor(rt,ct,wt){super(rt),this._focusMonitor=ct,this._animationMode=wt,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const At of b)this._hasHostAttributes(At)&&this._getHostElement().classList.add(At);rt.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(rt,ct){rt?this._focusMonitor.focusVia(this._getHostElement(),rt,ct):this._getHostElement().focus(ct)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...rt){return rt.some(ct=>this._getHostElement().hasAttribute(ct))}}return X.\u0275fac=function(rt){return new(rt||X)(e.Y36(e.SBq),e.Y36(t.tE),e.Y36(a.Qb,8))},X.\u0275cmp=e.Xpm({type:X,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(rt,ct){if(1&rt&&e.Gf(T.wG,5),2&rt){let wt;e.iGM(wt=e.CRH())&&(ct.ripple=wt.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(rt,ct){2&rt&&(e.uIk("disabled",ct.disabled||null),e.ekj("_mat-animation-noopable","NoopAnimations"===ct._animationMode)("mat-button-disabled",ct.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[e.qOj],attrs:n,ngContentSelectors:o,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(rt,ct){1&rt&&(e.F$t(),e.TgZ(0,"span",0),e.Hsn(1),e.qZA(),e._UZ(2,"span",1),e._UZ(3,"span",2)),2&rt&&(e.xp6(2),e.ekj("mat-button-ripple-round",ct.isRoundButton||ct.isIconButton),e.Q6J("matRippleDisabled",ct._isRippleDisabled())("matRippleCentered",ct.isIconButton)("matRippleTrigger",ct._getHostElement()))},directives:[T.wG],styles:[r],encapsulation:2,changeDetection:0}),X})(),k=(()=>{class X extends x{constructor(rt,ct,wt){super(ct,rt,wt)}_haltDisabledEvents(rt){this.disabled&&(rt.preventDefault(),rt.stopImmediatePropagation())}}return X.\u0275fac=function(rt){return new(rt||X)(e.Y36(t.tE),e.Y36(e.SBq),e.Y36(a.Qb,8))},X.\u0275cmp=e.Xpm({type:X,selectors:[["a","mat-button",""],["a","mat-raised-button",""],["a","mat-icon-button",""],["a","mat-fab",""],["a","mat-mini-fab",""],["a","mat-stroked-button",""],["a","mat-flat-button",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:7,hostBindings:function(rt,ct){1&rt&&e.NdJ("click",function(At){return ct._haltDisabledEvents(At)}),2&rt&&(e.uIk("tabindex",ct.disabled?-1:ct.tabIndex||0)("disabled",ct.disabled||null)("aria-disabled",ct.disabled.toString()),e.ekj("_mat-animation-noopable","NoopAnimations"===ct._animationMode)("mat-button-disabled",ct.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matButton","matAnchor"],features:[e.qOj],attrs:n,ngContentSelectors:o,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(rt,ct){1&rt&&(e.F$t(),e.TgZ(0,"span",0),e.Hsn(1),e.qZA(),e._UZ(2,"span",1),e._UZ(3,"span",2)),2&rt&&(e.xp6(2),e.ekj("mat-button-ripple-round",ct.isRoundButton||ct.isIconButton),e.Q6J("matRippleDisabled",ct._isRippleDisabled())("matRippleCentered",ct.isIconButton)("matRippleTrigger",ct._getHostElement()))},directives:[T.wG],styles:[r],encapsulation:2,changeDetection:0}),X})(),Y=(()=>{class X{}return X.\u0275fac=function(rt){return new(rt||X)},X.\u0275mod=e.oAB({type:X}),X.\u0275inj=e.cJS({imports:[[T.si,T.BQ],T.BQ]}),X})()},40688:(B,U,v)=>{"use strict";v.d(U,{yN:()=>At,mZ:()=>Rt,_A:()=>oe,rD:()=>ui,sG:()=>Ne,K7:()=>Ke,HF:()=>Mi,Y2:()=>Qt,BQ:()=>ot,X2:()=>Oe,uc:()=>ie,XK:()=>Ji,ey:()=>Zi,Ng:()=>Xi,rN:()=>ii,nP:()=>ni,us:()=>Di,wG:()=>ye,si:()=>Ee,IR:()=>$,CB:()=>ji,jH:()=>Ui,pj:()=>Tt,Kr:()=>Ct,Id:()=>nt,FD:()=>gt,dB:()=>_t,sb:()=>yt,E0:()=>Be});var T=v(42741),a=v(72882),e=v(12281);const t=new T.GfV("12.2.13");var n=v(16274),o=v(66899),r=v(99957),p=v(6006),b=v(93948),I=v(63543),x=v(81728),k=v(15911);function it(Re,Me){if(1&Re&&T._UZ(0,"mat-pseudo-checkbox",4),2&Re){const kt=T.oxw();T.Q6J("state",kt.selected?"checked":"unchecked")("disabled",kt.disabled)}}function rt(Re,Me){if(1&Re&&(T.TgZ(0,"span",5),T._uU(1),T.qZA()),2&Re){const kt=T.oxw();T.xp6(1),T.hij("(",kt.group.label,")")}}const ct=["*"];let At=(()=>{class Re{}return Re.STANDARD_CURVE="cubic-bezier(0.4,0.0,0.2,1)",Re.DECELERATION_CURVE="cubic-bezier(0.0,0.0,0.2,1)",Re.ACCELERATION_CURVE="cubic-bezier(0.4,0.0,1,1)",Re.SHARP_CURVE="cubic-bezier(0.4,0.0,0.6,1)",Re})(),Rt=(()=>{class Re{}return Re.COMPLEX="375ms",Re.ENTERING="225ms",Re.EXITING="195ms",Re})();const Dt=new T.GfV("12.2.13"),st=new T.OlP("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let ot=(()=>{class Re{constructor(kt,Wt,Gt){this._hasDoneGlobalChecks=!1,this._document=Gt,kt._applyBodyHighContrastModeCssClasses(),this._sanityChecks=Wt,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_checkIsEnabled(kt){return!(!(0,T.X6Q)()||(0,o.Oy)())&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[kt])}_checkDoctypeIsDefined(){this._checkIsEnabled("doctype")&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checkIsEnabled("theme")||!this._document.body||"function"!=typeof getComputedStyle)return;const kt=this._document.createElement("div");kt.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(kt);const Wt=getComputedStyle(kt);Wt&&"none"!==Wt.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(kt)}_checkCdkVersionMatch(){this._checkIsEnabled("version")&&Dt.full!==t.full&&console.warn("The Angular Material version ("+Dt.full+") does not match the Angular CDK version ("+t.full+").\nPlease ensure the versions of these two packages exactly match.")}}return Re.\u0275fac=function(kt){return new(kt||Re)(T.LFG(a.qm),T.LFG(st,8),T.LFG(n.K0))},Re.\u0275mod=T.oAB({type:Re}),Re.\u0275inj=T.cJS({imports:[[e.vT],e.vT]}),Re})();function nt(Re){return class extends Re{constructor(...Me){super(...Me),this._disabled=!1}get disabled(){return this._disabled}set disabled(Me){this._disabled=(0,r.Ig)(Me)}}}function Tt(Re,Me){return class extends Re{constructor(...kt){super(...kt),this.defaultColor=Me,this.color=Me}get color(){return this._color}set color(kt){const Wt=kt||this.defaultColor;Wt!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),Wt&&this._elementRef.nativeElement.classList.add(`mat-${Wt}`),this._color=Wt)}}}function Ct(Re){return class extends Re{constructor(...Me){super(...Me),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(Me){this._disableRipple=(0,r.Ig)(Me)}}}function yt(Re,Me=0){return class extends Re{constructor(...kt){super(...kt),this._tabIndex=Me,this.defaultTabIndex=Me}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(kt){this._tabIndex=null!=kt?(0,r.su)(kt):this.defaultTabIndex}}}function gt(Re){return class extends Re{constructor(...Me){super(...Me),this.stateChanges=new p.xQ,this.errorState=!1}updateErrorState(){const Me=this.errorState,be=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);be!==Me&&(this.errorState=be,this.stateChanges.next())}}}function _t(Re){return class extends Re{constructor(...Me){super(...Me),this._isInitialized=!1,this._pendingSubscribers=[],this.initialized=new b.y(kt=>{this._isInitialized?this._notifySubscriber(kt):this._pendingSubscribers.push(kt)})}_markInitialized(){this._isInitialized=!0,this._pendingSubscribers.forEach(this._notifySubscriber),this._pendingSubscribers=null}_notifySubscriber(Me){Me.next(),Me.complete()}}}const Jt=new T.OlP("MAT_DATE_LOCALE",{providedIn:"root",factory:function(){return(0,T.f3M)(T.soG)}});class oe{constructor(){this._localeChanges=new p.xQ,this.localeChanges=this._localeChanges}getValidDateOrNull(Me){return this.isDateInstance(Me)&&this.isValid(Me)?Me:null}deserialize(Me){return null==Me||this.isDateInstance(Me)&&this.isValid(Me)?Me:this.invalid()}setLocale(Me){this.locale=Me,this._localeChanges.next()}compareDate(Me,kt){return this.getYear(Me)-this.getYear(kt)||this.getMonth(Me)-this.getMonth(kt)||this.getDate(Me)-this.getDate(kt)}sameDate(Me,kt){if(Me&&kt){let Wt=this.isValid(Me),Gt=this.isValid(kt);return Wt&&Gt?!this.compareDate(Me,kt):Wt==Gt}return Me==kt}clampDate(Me,kt,Wt){return kt&&this.compareDate(Me,kt)<0?kt:Wt&&this.compareDate(Me,Wt)>0?Wt:Me}}const Ne=new T.OlP("mat-date-formats");let Xe;try{Xe="undefined"!=typeof Intl}catch(Re){Xe=!1}const Ce={long:["January","February","March","April","May","June","July","August","September","October","November","December"],short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],narrow:["J","F","M","A","M","J","J","A","S","O","N","D"]},we=ce(31,Re=>String(Re+1)),ai={long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],narrow:["S","M","T","W","T","F","S"]},re=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function ce(Re,Me){const kt=Array(Re);for(let Wt=0;Wt<Re;Wt++)kt[Wt]=Me(Wt);return kt}let Pe=(()=>{class Re extends oe{constructor(kt,Wt){super(),this.useUtcForDisplay=!0,super.setLocale(kt),this.useUtcForDisplay=!Wt.TRIDENT,this._clampDate=Wt.TRIDENT||Wt.EDGE}getYear(kt){return kt.getFullYear()}getMonth(kt){return kt.getMonth()}getDate(kt){return kt.getDate()}getDayOfWeek(kt){return kt.getDay()}getMonthNames(kt){if(Xe){const Wt=new Intl.DateTimeFormat(this.locale,{month:kt,timeZone:"utc"});return ce(12,Gt=>this._stripDirectionalityCharacters(this._format(Wt,new Date(2017,Gt,1))))}return Ce[kt]}getDateNames(){if(Xe){const kt=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return ce(31,Wt=>this._stripDirectionalityCharacters(this._format(kt,new Date(2017,0,Wt+1))))}return we}getDayOfWeekNames(kt){if(Xe){const Wt=new Intl.DateTimeFormat(this.locale,{weekday:kt,timeZone:"utc"});return ce(7,Gt=>this._stripDirectionalityCharacters(this._format(Wt,new Date(2017,0,Gt+1))))}return ai[kt]}getYearName(kt){if(Xe){const Wt=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._stripDirectionalityCharacters(this._format(Wt,kt))}return String(this.getYear(kt))}getFirstDayOfWeek(){return 0}getNumDaysInMonth(kt){return this.getDate(this._createDateWithOverflow(this.getYear(kt),this.getMonth(kt)+1,0))}clone(kt){return new Date(kt.getTime())}createDate(kt,Wt,Gt){let be=this._createDateWithOverflow(kt,Wt,Gt);return be.getMonth(),be}today(){return new Date}parse(kt){return"number"==typeof kt?new Date(kt):kt?new Date(Date.parse(kt)):null}format(kt,Wt){if(!this.isValid(kt))throw Error("NativeDateAdapter: Cannot format invalid date.");if(Xe){this._clampDate&&(kt.getFullYear()<1||kt.getFullYear()>9999)&&(kt=this.clone(kt)).setFullYear(Math.max(1,Math.min(9999,kt.getFullYear()))),Wt=Object.assign(Object.assign({},Wt),{timeZone:"utc"});const Gt=new Intl.DateTimeFormat(this.locale,Wt);return this._stripDirectionalityCharacters(this._format(Gt,kt))}return this._stripDirectionalityCharacters(kt.toDateString())}addCalendarYears(kt,Wt){return this.addCalendarMonths(kt,12*Wt)}addCalendarMonths(kt,Wt){let Gt=this._createDateWithOverflow(this.getYear(kt),this.getMonth(kt)+Wt,this.getDate(kt));return this.getMonth(Gt)!=((this.getMonth(kt)+Wt)%12+12)%12&&(Gt=this._createDateWithOverflow(this.getYear(Gt),this.getMonth(Gt),0)),Gt}addCalendarDays(kt,Wt){return this._createDateWithOverflow(this.getYear(kt),this.getMonth(kt),this.getDate(kt)+Wt)}toIso8601(kt){return[kt.getUTCFullYear(),this._2digit(kt.getUTCMonth()+1),this._2digit(kt.getUTCDate())].join("-")}deserialize(kt){if("string"==typeof kt){if(!kt)return null;if(re.test(kt)){let Wt=new Date(kt);if(this.isValid(Wt))return Wt}}return super.deserialize(kt)}isDateInstance(kt){return kt instanceof Date}isValid(kt){return!isNaN(kt.getTime())}invalid(){return new Date(NaN)}_createDateWithOverflow(kt,Wt,Gt){const be=new Date;return be.setFullYear(kt,Wt,Gt),be.setHours(0,0,0,0),be}_2digit(kt){return("00"+kt).slice(-2)}_stripDirectionalityCharacters(kt){return kt.replace(/[\u200e\u200f]/g,"")}_format(kt,Wt){const Gt=new Date;return Gt.setUTCFullYear(Wt.getFullYear(),Wt.getMonth(),Wt.getDate()),Gt.setUTCHours(Wt.getHours(),Wt.getMinutes(),Wt.getSeconds(),Wt.getMilliseconds()),kt.format(Gt)}}return Re.\u0275fac=function(kt){return new(kt||Re)(T.LFG(Jt,8),T.LFG(o.t4))},Re.\u0275prov=T.Yz7({token:Re,factory:Re.\u0275fac}),Re})(),oi=(()=>{class Re{}return Re.\u0275fac=function(kt){return new(kt||Re)},Re.\u0275mod=T.oAB({type:Re}),Re.\u0275inj=T.cJS({providers:[{provide:oe,useClass:Pe}],imports:[[o.ud]]}),Re})();const wi={parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}};let Ji=(()=>{class Re{}return Re.\u0275fac=function(kt){return new(kt||Re)},Re.\u0275mod=T.oAB({type:Re}),Re.\u0275inj=T.cJS({providers:[{provide:Ne,useValue:wi}],imports:[[oi]]}),Re})(),ui=(()=>{class Re{isErrorState(kt,Wt){return!!(kt&&kt.invalid&&(kt.touched||Wt&&Wt.submitted))}}return Re.\u0275fac=function(kt){return new(kt||Re)},Re.\u0275prov=T.Yz7({factory:function(){return new Re},token:Re,providedIn:"root"}),Re})(),Oe=(()=>{class Re{}return Re.\u0275fac=function(kt){return new(kt||Re)},Re.\u0275dir=T.lG2({type:Re,selectors:[["","mat-line",""],["","matLine",""]],hostAttrs:[1,"mat-line"]}),Re})();function Be(Re,Me,kt="mat"){Re.changes.pipe((0,I.O)(Re)).subscribe(({length:Wt})=>{Ft(Me,`${kt}-2-line`,!1),Ft(Me,`${kt}-3-line`,!1),Ft(Me,`${kt}-multi-line`,!1),2===Wt||3===Wt?Ft(Me,`${kt}-${Wt}-line`,!0):Wt>3&&Ft(Me,`${kt}-multi-line`,!0)})}function Ft(Re,Me,kt){const Wt=Re.nativeElement.classList;kt?Wt.add(Me):Wt.remove(Me)}let ie=(()=>{class Re{}return Re.\u0275fac=function(kt){return new(kt||Re)},Re.\u0275mod=T.oAB({type:Re}),Re.\u0275inj=T.cJS({imports:[[ot],ot]}),Re})();class hi{constructor(Me,kt,Wt){this._renderer=Me,this.element=kt,this.config=Wt,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const fe={enterDuration:225,exitDuration:150},ge=(0,o.i$)({passive:!0}),Ve=["mousedown","touchstart"],Zt=["mouseup","mouseleave","touchend","touchcancel"];class ${constructor(Me,kt,Wt,Gt){this._target=Me,this._ngZone=kt,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,Gt.isBrowser&&(this._containerElement=(0,r.fI)(Wt))}fadeInRipple(Me,kt,Wt={}){const Gt=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),be=Object.assign(Object.assign({},fe),Wt.animation);Wt.centered&&(Me=Gt.left+Gt.width/2,kt=Gt.top+Gt.height/2);const Je=Wt.radius||function(Re,Me,kt){const Wt=Math.max(Math.abs(Re-kt.left),Math.abs(Re-kt.right)),Gt=Math.max(Math.abs(Me-kt.top),Math.abs(Me-kt.bottom));return Math.sqrt(Wt*Wt+Gt*Gt)}(Me,kt,Gt),Pi=Me-Gt.left,Oi=kt-Gt.top,kn=be.enterDuration,Wn=document.createElement("div");Wn.classList.add("mat-ripple-element"),Wn.style.left=Pi-Je+"px",Wn.style.top=Oi-Je+"px",Wn.style.height=2*Je+"px",Wn.style.width=2*Je+"px",null!=Wt.color&&(Wn.style.backgroundColor=Wt.color),Wn.style.transitionDuration=`${kn}ms`,this._containerElement.appendChild(Wn),window.getComputedStyle(Wn).getPropertyValue("opacity"),Wn.style.transform="scale(1)";const so=new hi(this,Wn,Wt);return so.state=0,this._activeRipples.add(so),Wt.persistent||(this._mostRecentTransientRipple=so),this._runTimeoutOutsideZone(()=>{const Vn=so===this._mostRecentTransientRipple;so.state=1,!Wt.persistent&&(!Vn||!this._isPointerDown)&&so.fadeOut()},kn),so}fadeOutRipple(Me){const kt=this._activeRipples.delete(Me);if(Me===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!kt)return;const Wt=Me.element,Gt=Object.assign(Object.assign({},fe),Me.config.animation);Wt.style.transitionDuration=`${Gt.exitDuration}ms`,Wt.style.opacity="0",Me.state=2,this._runTimeoutOutsideZone(()=>{Me.state=3,Wt.parentNode.removeChild(Wt)},Gt.exitDuration)}fadeOutAll(){this._activeRipples.forEach(Me=>Me.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(Me=>{Me.config.persistent||Me.fadeOut()})}setupTriggerEvents(Me){const kt=(0,r.fI)(Me);!kt||kt===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=kt,this._registerEvents(Ve))}handleEvent(Me){"mousedown"===Me.type?this._onMousedown(Me):"touchstart"===Me.type?this._onTouchStart(Me):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(Zt),this._pointerUpEventsRegistered=!0)}_onMousedown(Me){const kt=(0,a.X6)(Me),Wt=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!kt&&!Wt&&(this._isPointerDown=!0,this.fadeInRipple(Me.clientX,Me.clientY,this._target.rippleConfig))}_onTouchStart(Me){if(!this._target.rippleDisabled&&!(0,a.yG)(Me)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const kt=Me.changedTouches;for(let Wt=0;Wt<kt.length;Wt++)this.fadeInRipple(kt[Wt].clientX,kt[Wt].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(Me=>{!Me.config.persistent&&(1===Me.state||Me.config.terminateOnPointerUp&&0===Me.state)&&Me.fadeOut()}))}_runTimeoutOutsideZone(Me,kt=0){this._ngZone.runOutsideAngular(()=>setTimeout(Me,kt))}_registerEvents(Me){this._ngZone.runOutsideAngular(()=>{Me.forEach(kt=>{this._triggerElement.addEventListener(kt,this,ge)})})}_removeTriggerEvents(){this._triggerElement&&(Ve.forEach(Me=>{this._triggerElement.removeEventListener(Me,this,ge)}),this._pointerUpEventsRegistered&&Zt.forEach(Me=>{this._triggerElement.removeEventListener(Me,this,ge)}))}}const Qt=new T.OlP("mat-ripple-global-options");let ye=(()=>{class Re{constructor(kt,Wt,Gt,be,Je){this._elementRef=kt,this._animationMode=Je,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=be||{},this._rippleRenderer=new $(this,Wt,kt,Gt)}get disabled(){return this._disabled}set disabled(kt){kt&&this.fadeOutAllNonPersistent(),this._disabled=kt,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(kt){this._trigger=kt,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(kt,Wt=0,Gt){return"number"==typeof kt?this._rippleRenderer.fadeInRipple(kt,Wt,Object.assign(Object.assign({},this.rippleConfig),Gt)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),kt))}}return Re.\u0275fac=function(kt){return new(kt||Re)(T.Y36(T.SBq),T.Y36(T.R0b),T.Y36(o.t4),T.Y36(Qt,8),T.Y36(x.Qb,8))},Re.\u0275dir=T.lG2({type:Re,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(kt,Wt){2&kt&&T.ekj("mat-ripple-unbounded",Wt.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),Re})(),Ee=(()=>{class Re{}return Re.\u0275fac=function(kt){return new(kt||Re)},Re.\u0275mod=T.oAB({type:Re}),Re.\u0275inj=T.cJS({imports:[[ot,o.ud],ot]}),Re})(),ni=(()=>{class Re{constructor(kt){this._animationMode=kt,this.state="unchecked",this.disabled=!1}}return Re.\u0275fac=function(kt){return new(kt||Re)(T.Y36(x.Qb,8))},Re.\u0275cmp=T.Xpm({type:Re,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(kt,Wt){2&kt&&T.ekj("mat-pseudo-checkbox-indeterminate","indeterminate"===Wt.state)("mat-pseudo-checkbox-checked","checked"===Wt.state)("mat-pseudo-checkbox-disabled",Wt.disabled)("_mat-animation-noopable","NoopAnimations"===Wt._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(kt,Wt){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}\n'],encapsulation:2,changeDetection:0}),Re})(),Di=(()=>{class Re{}return Re.\u0275fac=function(kt){return new(kt||Re)},Re.\u0275mod=T.oAB({type:Re}),Re.\u0275inj=T.cJS({imports:[[ot]]}),Re})();const Mi=new T.OlP("MAT_OPTION_PARENT_COMPONENT"),vi=nt(class{});let pi=0,Ue=(()=>{class Re extends vi{constructor(kt){var Wt;super(),this._labelId="mat-optgroup-label-"+pi++,this._inert=null!==(Wt=null==kt?void 0:kt.inertGroups)&&void 0!==Wt&&Wt}}return Re.\u0275fac=function(kt){return new(kt||Re)(T.Y36(Mi,8))},Re.\u0275dir=T.lG2({type:Re,inputs:{label:"label"},features:[T.qOj]}),Re})();const Ke=new T.OlP("MatOptgroup");let xe=0;class ii{constructor(Me,kt=!1){this.source=Me,this.isUserInput=kt}}let yi=(()=>{class Re{constructor(kt,Wt,Gt,be){this._element=kt,this._changeDetectorRef=Wt,this._parent=Gt,this.group=be,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+xe++,this.onSelectionChange=new T.vpe,this._stateChanges=new p.xQ}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(kt){this._disabled=(0,r.Ig)(kt)}get disableRipple(){return this._parent&&this._parent.disableRipple}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(kt,Wt){const Gt=this._getHostElement();"function"==typeof Gt.focus&&Gt.focus(Wt)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(kt){(kt.keyCode===k.K5||kt.keyCode===k.L_)&&!(0,k.Vb)(kt)&&(this._selectViaInteraction(),kt.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const kt=this.viewValue;kt!==this._mostRecentViewValue&&(this._mostRecentViewValue=kt,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(kt=!1){this.onSelectionChange.emit(new ii(this,kt))}}return Re.\u0275fac=function(kt){return new(kt||Re)(T.Y36(T.SBq),T.Y36(T.sBO),T.Y36(void 0),T.Y36(Ue))},Re.\u0275dir=T.lG2({type:Re,inputs:{id:"id",disabled:"disabled",value:"value"},outputs:{onSelectionChange:"onSelectionChange"}}),Re})(),Zi=(()=>{class Re extends yi{constructor(kt,Wt,Gt,be){super(kt,Wt,Gt,be)}}return Re.\u0275fac=function(kt){return new(kt||Re)(T.Y36(T.SBq),T.Y36(T.sBO),T.Y36(Mi,8),T.Y36(Ke,8))},Re.\u0275cmp=T.Xpm({type:Re,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(kt,Wt){1&kt&&T.NdJ("click",function(){return Wt._selectViaInteraction()})("keydown",function(be){return Wt._handleKeydown(be)}),2&kt&&(T.Ikx("id",Wt.id),T.uIk("tabindex",Wt._getTabIndex())("aria-selected",Wt._getAriaSelected())("aria-disabled",Wt.disabled.toString()),T.ekj("mat-selected",Wt.selected)("mat-option-multiple",Wt.multiple)("mat-active",Wt.active)("mat-option-disabled",Wt.disabled))},exportAs:["matOption"],features:[T.qOj],ngContentSelectors:ct,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(kt,Wt){1&kt&&(T.F$t(),T.YNc(0,it,1,2,"mat-pseudo-checkbox",0),T.TgZ(1,"span",1),T.Hsn(2),T.qZA(),T.YNc(3,rt,2,1,"span",2),T._UZ(4,"div",3)),2&kt&&(T.Q6J("ngIf",Wt.multiple),T.xp6(3),T.Q6J("ngIf",Wt.group&&Wt.group._inert),T.xp6(1),T.Q6J("matRippleTrigger",Wt._getHostElement())("matRippleDisabled",Wt.disabled||Wt.disableRipple))},directives:[n.O5,ye,ni],styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:transparent}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.cdk-high-contrast-active .mat-option{margin:0 1px}.cdk-high-contrast-active .mat-option.mat-active{border:solid 1px currentColor;margin:0}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}\n"],encapsulation:2,changeDetection:0}),Re})();function ji(Re,Me,kt){if(kt.length){let Wt=Me.toArray(),Gt=kt.toArray(),be=0;for(let Je=0;Je<Re+1;Je++)Wt[Je].group&&Wt[Je].group===Gt[be]&&be++;return be}return 0}function Ui(Re,Me,kt,Wt){return Re<kt?Re:Re+Me>kt+Wt?Math.max(0,Re-Wt+Me):kt}let Xi=(()=>{class Re{}return Re.\u0275fac=function(kt){return new(kt||Re)},Re.\u0275mod=T.oAB({type:Re}),Re.\u0275inj=T.cJS({imports:[[Ee,n.ez,ot,Di]]}),Re})()},8220:(B,U,v)=>{"use strict";v.d(U,{pp:()=>Ni,To:()=>ui,ib:()=>re,u4:()=>wi,yz:()=>oi,yK:()=>Ji});var T=v(42741),a=v(99957),e=v(6006),t=v(39734),n=v(98950);let o=0;const r=new T.OlP("CdkAccordion");let p=(()=>{class Oe{constructor(){this._stateChanges=new e.xQ,this._openCloseAllActions=new e.xQ,this.id="cdk-accordion-"+o++,this._multi=!1}get multi(){return this._multi}set multi(Ft){this._multi=(0,a.Ig)(Ft)}openAll(){this._multi&&this._openCloseAllActions.next(!0)}closeAll(){this._openCloseAllActions.next(!1)}ngOnChanges(Ft){this._stateChanges.next(Ft)}ngOnDestroy(){this._stateChanges.complete(),this._openCloseAllActions.complete()}}return Oe.\u0275fac=function(Ft){return new(Ft||Oe)},Oe.\u0275dir=T.lG2({type:Oe,selectors:[["cdk-accordion"],["","cdkAccordion",""]],inputs:{multi:"multi"},exportAs:["cdkAccordion"],features:[T._Bn([{provide:r,useExisting:Oe}]),T.TTD]}),Oe})(),b=0,x=(()=>{class Oe{constructor(Ft,ie,hi){this.accordion=Ft,this._changeDetectorRef=ie,this._expansionDispatcher=hi,this._openCloseAllSubscription=t.w.EMPTY,this.closed=new T.vpe,this.opened=new T.vpe,this.destroyed=new T.vpe,this.expandedChange=new T.vpe,this.id="cdk-accordion-child-"+b++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=hi.listen((fe,di)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===di&&this.id!==fe&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}get expanded(){return this._expanded}set expanded(Ft){Ft=(0,a.Ig)(Ft),this._expanded!==Ft&&(this._expanded=Ft,this.expandedChange.emit(Ft),Ft?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(Ft){this._disabled=(0,a.Ig)(Ft)}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(Ft=>{this.disabled||(this.expanded=Ft)})}}return Oe.\u0275fac=function(Ft){return new(Ft||Oe)(T.Y36(r,12),T.Y36(T.sBO),T.Y36(n.A8))},Oe.\u0275dir=T.lG2({type:Oe,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[T._Bn([{provide:r,useValue:void 0}])]}),Oe})(),k=(()=>{class Oe{}return Oe.\u0275fac=function(Ft){return new(Ft||Oe)},Oe.\u0275mod=T.oAB({type:Oe}),Oe.\u0275inj=T.cJS({}),Oe})();var Y=v(62718),X=v(16274),it=v(40688),rt=v(72882),ct=v(57689),wt=v(63543),At=v(63305),Rt=v(59917),Dt=v(15911),pt=v(81728),st=v(23974),ot=v(30636),nt=v(88638);const Tt=["body"];function Ct(Oe,Be){}const yt=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],gt=["mat-expansion-panel-header","*","mat-action-row"];function _t(Oe,Be){if(1&Oe&&T._UZ(0,"span",2),2&Oe){const Ft=T.oxw();T.Q6J("@indicatorRotate",Ft._getExpandedState())}}const Jt=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],Pt=["mat-panel-title","mat-panel-description","*"],oe=new T.OlP("MAT_ACCORDION"),Ne="225ms cubic-bezier(0.4,0.0,0.2,1)",Xe={indicatorRotate:(0,nt.X$)("indicatorRotate",[(0,nt.SB)("collapsed, void",(0,nt.oB)({transform:"rotate(0deg)"})),(0,nt.SB)("expanded",(0,nt.oB)({transform:"rotate(180deg)"})),(0,nt.eR)("expanded <=> collapsed, void => collapsed",(0,nt.jt)(Ne))]),bodyExpansion:(0,nt.X$)("bodyExpansion",[(0,nt.SB)("collapsed, void",(0,nt.oB)({height:"0px",visibility:"hidden"})),(0,nt.SB)("expanded",(0,nt.oB)({height:"*",visibility:"visible"})),(0,nt.eR)("expanded <=> collapsed, void => collapsed",(0,nt.jt)(Ne))])};let Ce=(()=>{class Oe{constructor(Ft){this._template=Ft}}return Oe.\u0275fac=function(Ft){return new(Ft||Oe)(T.Y36(T.Rgc))},Oe.\u0275dir=T.lG2({type:Oe,selectors:[["ng-template","matExpansionPanelContent",""]]}),Oe})(),Ze=0;const we=new T.OlP("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let re=(()=>{class Oe extends x{constructor(Ft,ie,hi,fe,di,ge,Ve){super(Ft,ie,hi),this._viewContainerRef=fe,this._animationMode=ge,this._hideToggle=!1,this.afterExpand=new T.vpe,this.afterCollapse=new T.vpe,this._inputChanges=new e.xQ,this._headerId="mat-expansion-panel-header-"+Ze++,this._bodyAnimationDone=new e.xQ,this.accordion=Ft,this._document=di,this._bodyAnimationDone.pipe((0,ct.x)((Zt,$)=>Zt.fromState===$.fromState&&Zt.toState===$.toState)).subscribe(Zt=>{"void"!==Zt.fromState&&("expanded"===Zt.toState?this.afterExpand.emit():"collapsed"===Zt.toState&&this.afterCollapse.emit())}),Ve&&(this.hideToggle=Ve.hideToggle)}get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(Ft){this._hideToggle=(0,a.Ig)(Ft)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(Ft){this._togglePosition=Ft}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this.opened.pipe((0,wt.O)(null),(0,At.h)(()=>this.expanded&&!this._portal),(0,Rt.q)(1)).subscribe(()=>{this._portal=new Y.UE(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(Ft){this._inputChanges.next(Ft)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const Ft=this._document.activeElement,ie=this._body.nativeElement;return Ft===ie||ie.contains(Ft)}return!1}}return Oe.\u0275fac=function(Ft){return new(Ft||Oe)(T.Y36(oe,12),T.Y36(T.sBO),T.Y36(n.A8),T.Y36(T.s_b),T.Y36(X.K0),T.Y36(pt.Qb,8),T.Y36(we,8))},Oe.\u0275cmp=T.Xpm({type:Oe,selectors:[["mat-expansion-panel"]],contentQueries:function(Ft,ie,hi){if(1&Ft&&T.Suo(hi,Ce,5),2&Ft){let fe;T.iGM(fe=T.CRH())&&(ie._lazyContent=fe.first)}},viewQuery:function(Ft,ie){if(1&Ft&&T.Gf(Tt,5),2&Ft){let hi;T.iGM(hi=T.CRH())&&(ie._body=hi.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(Ft,ie){2&Ft&&T.ekj("mat-expanded",ie.expanded)("_mat-animation-noopable","NoopAnimations"===ie._animationMode)("mat-expansion-panel-spacing",ie._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[T._Bn([{provide:oe,useValue:void 0}]),T.qOj,T.TTD],ngContentSelectors:gt,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(Ft,ie){1&Ft&&(T.F$t(yt),T.Hsn(0),T.TgZ(1,"div",0,1),T.NdJ("@bodyExpansion.done",function(fe){return ie._bodyAnimationDone.next(fe)}),T.TgZ(3,"div",2),T.Hsn(4,1),T.YNc(5,Ct,0,0,"ng-template",3),T.qZA(),T.Hsn(6,2),T.qZA()),2&Ft&&(T.xp6(1),T.Q6J("@bodyExpansion",ie._getExpandedState())("id",ie.id),T.uIk("aria-labelledby",ie._headerId),T.xp6(4),T.Q6J("cdkPortalOutlet",ie._portal))},directives:[Y.Pl],styles:[".mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row button.mat-button-base,.mat-action-row button.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row button.mat-button-base,[dir=rtl] .mat-action-row button.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[Xe.bodyExpansion]},changeDetection:0}),Oe})();class Pe{}const qe=(0,it.sb)(Pe);let oi=(()=>{class Oe extends qe{constructor(Ft,ie,hi,fe,di,ge,Ve){super(),this.panel=Ft,this._element=ie,this._focusMonitor=hi,this._changeDetectorRef=fe,this._animationMode=ge,this._parentChangeSubscription=t.w.EMPTY;const Zt=Ft.accordion?Ft.accordion._stateChanges.pipe((0,At.h)($=>!(!$.hideToggle&&!$.togglePosition))):st.E;this.tabIndex=parseInt(Ve||"")||0,this._parentChangeSubscription=(0,ot.T)(Ft.opened,Ft.closed,Zt,Ft._inputChanges.pipe((0,At.h)($=>!!($.hideToggle||$.disabled||$.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),Ft.closed.pipe((0,At.h)(()=>Ft._containsFocus())).subscribe(()=>hi.focusVia(ie,"program")),di&&(this.expandedHeight=di.expandedHeight,this.collapsedHeight=di.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const Ft=this._isExpanded();return Ft&&this.expandedHeight?this.expandedHeight:!Ft&&this.collapsedHeight?this.collapsedHeight:null}_keydown(Ft){switch(Ft.keyCode){case Dt.L_:case Dt.K5:(0,Dt.Vb)(Ft)||(Ft.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(Ft))}}focus(Ft,ie){Ft?this._focusMonitor.focusVia(this._element,Ft,ie):this._element.nativeElement.focus(ie)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(Ft=>{Ft&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return Oe.\u0275fac=function(Ft){return new(Ft||Oe)(T.Y36(re,1),T.Y36(T.SBq),T.Y36(rt.tE),T.Y36(T.sBO),T.Y36(we,8),T.Y36(pt.Qb,8),T.$8M("tabindex"))},Oe.\u0275cmp=T.Xpm({type:Oe,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(Ft,ie){1&Ft&&T.NdJ("click",function(){return ie._toggle()})("keydown",function(fe){return ie._keydown(fe)}),2&Ft&&(T.uIk("id",ie.panel._headerId)("tabindex",ie.tabIndex)("aria-controls",ie._getPanelId())("aria-expanded",ie._isExpanded())("aria-disabled",ie.panel.disabled),T.Udp("height",ie._getHeaderHeight()),T.ekj("mat-expanded",ie._isExpanded())("mat-expansion-toggle-indicator-after","after"===ie._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===ie._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===ie._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[T.qOj],ngContentSelectors:Pt,decls:5,vars:1,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(Ft,ie){1&Ft&&(T.F$t(Jt),T.TgZ(0,"span",0),T.Hsn(1),T.Hsn(2,1),T.Hsn(3,2),T.qZA(),T.YNc(4,_t,1,1,"span",1)),2&Ft&&(T.xp6(4),T.Q6J("ngIf",ie._showToggle()))},directives:[X.O5],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;margin-right:16px}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-keyboard-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-program-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:hover:not([aria-disabled=true])::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;border:3px solid;border-radius:4px;content:""}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}\n'],encapsulation:2,data:{animation:[Xe.indicatorRotate]},changeDetection:0}),Oe})(),wi=(()=>{class Oe{}return Oe.\u0275fac=function(Ft){return new(Ft||Oe)},Oe.\u0275dir=T.lG2({type:Oe,selectors:[["mat-panel-description"]],hostAttrs:[1,"mat-expansion-panel-header-description"]}),Oe})(),Ji=(()=>{class Oe{}return Oe.\u0275fac=function(Ft){return new(Ft||Oe)},Oe.\u0275dir=T.lG2({type:Oe,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]}),Oe})(),Ni=(()=>{class Oe extends p{constructor(){super(...arguments),this._ownHeaders=new T.n_E,this._hideToggle=!1,this.displayMode="default",this.togglePosition="after"}get hideToggle(){return this._hideToggle}set hideToggle(Ft){this._hideToggle=(0,a.Ig)(Ft)}ngAfterContentInit(){this._headers.changes.pipe((0,wt.O)(this._headers)).subscribe(Ft=>{this._ownHeaders.reset(Ft.filter(ie=>ie.panel.accordion===this)),this._ownHeaders.notifyOnChanges()}),this._keyManager=new rt.Em(this._ownHeaders).withWrap().withHomeAndEnd()}_handleHeaderKeydown(Ft){this._keyManager.onKeydown(Ft)}_handleHeaderFocus(Ft){this._keyManager.updateActiveItem(Ft)}ngOnDestroy(){super.ngOnDestroy(),this._ownHeaders.destroy()}}return Oe.\u0275fac=function(){let Be;return function(ie){return(Be||(Be=T.n5z(Oe)))(ie||Oe)}}(),Oe.\u0275dir=T.lG2({type:Oe,selectors:[["mat-accordion"]],contentQueries:function(Ft,ie,hi){if(1&Ft&&T.Suo(hi,oi,5),2&Ft){let fe;T.iGM(fe=T.CRH())&&(ie._headers=fe)}},hostAttrs:[1,"mat-accordion"],hostVars:2,hostBindings:function(Ft,ie){2&Ft&&T.ekj("mat-accordion-multi",ie.multi)},inputs:{multi:"multi",displayMode:"displayMode",togglePosition:"togglePosition",hideToggle:"hideToggle"},exportAs:["matAccordion"],features:[T._Bn([{provide:oe,useExisting:Oe}]),T.qOj]}),Oe})(),ui=(()=>{class Oe{}return Oe.\u0275fac=function(Ft){return new(Ft||Oe)},Oe.\u0275mod=T.oAB({type:Oe}),Oe.\u0275inj=T.cJS({imports:[[X.ez,it.BQ,k,Y.eL]]}),Oe})()},74026:(B,U,v)=>{"use strict";v.d(U,{Il:()=>nt,N6:()=>Tt,DX:()=>k,jo:()=>it,$H:()=>Y});var T=v(42741),a=v(40688),e=v(99957),t=v(12281);const n=["*"],o=[[["","mat-grid-avatar",""],["","matGridAvatar",""]],[["","mat-line",""],["","matLine",""]],"*"],r=["[mat-grid-avatar], [matGridAvatar]","[mat-line], [matLine]","*"],p=".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}\n";class b{constructor(){this.columnIndex=0,this.rowIndex=0}get rowCount(){return this.rowIndex+1}get rowspan(){const gt=Math.max(...this.tracker);return gt>1?this.rowCount+gt-1:this.rowCount}update(gt,_t){this.columnIndex=0,this.rowIndex=0,this.tracker=new Array(gt),this.tracker.fill(0,0,this.tracker.length),this.positions=_t.map(Jt=>this._trackTile(Jt))}_trackTile(gt){const _t=this._findMatchingGap(gt.colspan);return this._markTilePosition(_t,gt),this.columnIndex=_t+gt.colspan,new I(this.rowIndex,_t)}_findMatchingGap(gt){let _t=-1,Jt=-1;do{this.columnIndex+gt>this.tracker.length?(this._nextRow(),_t=this.tracker.indexOf(0,this.columnIndex),Jt=this._findGapEndIndex(_t)):(_t=this.tracker.indexOf(0,this.columnIndex),-1!=_t?(Jt=this._findGapEndIndex(_t),this.columnIndex=_t+1):(this._nextRow(),_t=this.tracker.indexOf(0,this.columnIndex),Jt=this._findGapEndIndex(_t)))}while(Jt-_t<gt||0==Jt);return Math.max(_t,0)}_nextRow(){this.columnIndex=0,this.rowIndex++;for(let gt=0;gt<this.tracker.length;gt++)this.tracker[gt]=Math.max(0,this.tracker[gt]-1)}_findGapEndIndex(gt){for(let _t=gt+1;_t<this.tracker.length;_t++)if(0!=this.tracker[_t])return _t;return this.tracker.length}_markTilePosition(gt,_t){for(let Jt=0;Jt<_t.colspan;Jt++)this.tracker[gt+Jt]=_t.rowspan}}class I{constructor(gt,_t){this.row=gt,this.col=_t}}const x=new T.OlP("MAT_GRID_LIST");let k=(()=>{class yt{constructor(_t,Jt){this._element=_t,this._gridList=Jt,this._rowspan=1,this._colspan=1}get rowspan(){return this._rowspan}set rowspan(_t){this._rowspan=Math.round((0,e.su)(_t))}get colspan(){return this._colspan}set colspan(_t){this._colspan=Math.round((0,e.su)(_t))}_setStyle(_t,Jt){this._element.nativeElement.style[_t]=Jt}}return yt.\u0275fac=function(_t){return new(_t||yt)(T.Y36(T.SBq),T.Y36(x,8))},yt.\u0275cmp=T.Xpm({type:yt,selectors:[["mat-grid-tile"]],hostAttrs:[1,"mat-grid-tile"],hostVars:2,hostBindings:function(_t,Jt){2&_t&&T.uIk("rowspan",Jt.rowspan)("colspan",Jt.colspan)},inputs:{rowspan:"rowspan",colspan:"colspan"},exportAs:["matGridTile"],ngContentSelectors:n,decls:2,vars:0,consts:[[1,"mat-grid-tile-content"]],template:function(_t,Jt){1&_t&&(T.F$t(),T.TgZ(0,"div",0),T.Hsn(1),T.qZA())},styles:[p],encapsulation:2,changeDetection:0}),yt})(),Y=(()=>{class yt{constructor(_t){this._element=_t}ngAfterContentInit(){(0,a.E0)(this._lines,this._element)}}return yt.\u0275fac=function(_t){return new(_t||yt)(T.Y36(T.SBq))},yt.\u0275cmp=T.Xpm({type:yt,selectors:[["mat-grid-tile-header"],["mat-grid-tile-footer"]],contentQueries:function(_t,Jt,Pt){if(1&_t&&T.Suo(Pt,a.X2,5),2&_t){let oe;T.iGM(oe=T.CRH())&&(Jt._lines=oe)}},ngContentSelectors:r,decls:4,vars:0,consts:[[1,"mat-grid-list-text"]],template:function(_t,Jt){1&_t&&(T.F$t(o),T.Hsn(0),T.TgZ(1,"div",0),T.Hsn(2,1),T.qZA(),T.Hsn(3,2))},encapsulation:2,changeDetection:0}),yt})(),it=(()=>{class yt{}return yt.\u0275fac=function(_t){return new(_t||yt)},yt.\u0275dir=T.lG2({type:yt,selectors:[["mat-grid-tile-header"]],hostAttrs:[1,"mat-grid-tile-header"]}),yt})();const ct=/^-?\d+((\.\d+)?[A-Za-z%$]?)+$/;class wt{constructor(){this._rows=0,this._rowspan=0}init(gt,_t,Jt,Pt){this._gutterSize=st(gt),this._rows=_t.rowCount,this._rowspan=_t.rowspan,this._cols=Jt,this._direction=Pt}getBaseTileSize(gt,_t){return`(${gt}% - (${this._gutterSize} * ${_t}))`}getTilePosition(gt,_t){return 0===_t?"0":pt(`(${gt} + ${this._gutterSize}) * ${_t}`)}getTileSize(gt,_t){return`(${gt} * ${_t}) + (${_t-1} * ${this._gutterSize})`}setStyle(gt,_t,Jt){let Pt=100/this._cols,oe=(this._cols-1)/this._cols;this.setColStyles(gt,Jt,Pt,oe),this.setRowStyles(gt,_t,Pt,oe)}setColStyles(gt,_t,Jt,Pt){let oe=this.getBaseTileSize(Jt,Pt);gt._setStyle("rtl"===this._direction?"right":"left",this.getTilePosition(oe,_t)),gt._setStyle("width",pt(this.getTileSize(oe,gt.colspan)))}getGutterSpan(){return`${this._gutterSize} * (${this._rowspan} - 1)`}getTileSpan(gt){return`${this._rowspan} * ${this.getTileSize(gt,1)}`}getComputedHeight(){return null}}class At extends wt{constructor(gt){super(),this.fixedRowHeight=gt}init(gt,_t,Jt,Pt){super.init(gt,_t,Jt,Pt),this.fixedRowHeight=st(this.fixedRowHeight),ct.test(this.fixedRowHeight)}setRowStyles(gt,_t){gt._setStyle("top",this.getTilePosition(this.fixedRowHeight,_t)),gt._setStyle("height",pt(this.getTileSize(this.fixedRowHeight,gt.rowspan)))}getComputedHeight(){return["height",pt(`${this.getTileSpan(this.fixedRowHeight)} + ${this.getGutterSpan()}`)]}reset(gt){gt._setListStyle(["height",null]),gt._tiles&&gt._tiles.forEach(_t=>{_t._setStyle("top",null),_t._setStyle("height",null)})}}class Rt extends wt{constructor(gt){super(),this._parseRatio(gt)}setRowStyles(gt,_t,Jt,Pt){this.baseTileHeight=this.getBaseTileSize(Jt/this.rowHeightRatio,Pt),gt._setStyle("marginTop",this.getTilePosition(this.baseTileHeight,_t)),gt._setStyle("paddingTop",pt(this.getTileSize(this.baseTileHeight,gt.rowspan)))}getComputedHeight(){return["paddingBottom",pt(`${this.getTileSpan(this.baseTileHeight)} + ${this.getGutterSpan()}`)]}reset(gt){gt._setListStyle(["paddingBottom",null]),gt._tiles.forEach(_t=>{_t._setStyle("marginTop",null),_t._setStyle("paddingTop",null)})}_parseRatio(gt){const _t=gt.split(":");this.rowHeightRatio=parseFloat(_t[0])/parseFloat(_t[1])}}class Dt extends wt{setRowStyles(gt,_t){let oe=this.getBaseTileSize(100/this._rowspan,(this._rows-1)/this._rows);gt._setStyle("top",this.getTilePosition(oe,_t)),gt._setStyle("height",pt(this.getTileSize(oe,gt.rowspan)))}reset(gt){gt._tiles&&gt._tiles.forEach(_t=>{_t._setStyle("top",null),_t._setStyle("height",null)})}}function pt(yt){return`calc(${yt})`}function st(yt){return yt.match(/([A-Za-z%]+)$/)?yt:`${yt}px`}let nt=(()=>{class yt{constructor(_t,Jt){this._element=_t,this._dir=Jt,this._gutter="1px"}get cols(){return this._cols}set cols(_t){this._cols=Math.max(1,Math.round((0,e.su)(_t)))}get gutterSize(){return this._gutter}set gutterSize(_t){this._gutter=`${null==_t?"":_t}`}get rowHeight(){return this._rowHeight}set rowHeight(_t){const Jt=`${null==_t?"":_t}`;Jt!==this._rowHeight&&(this._rowHeight=Jt,this._setTileStyler(this._rowHeight))}ngOnInit(){this._checkCols(),this._checkRowHeight()}ngAfterContentChecked(){this._layoutTiles()}_checkCols(){}_checkRowHeight(){this._rowHeight||this._setTileStyler("1:1")}_setTileStyler(_t){this._tileStyler&&this._tileStyler.reset(this),this._tileStyler="fit"===_t?new Dt:_t&&_t.indexOf(":")>-1?new Rt(_t):new At(_t)}_layoutTiles(){this._tileCoordinator||(this._tileCoordinator=new b);const _t=this._tileCoordinator,Jt=this._tiles.filter(oe=>!oe._gridList||oe._gridList===this),Pt=this._dir?this._dir.value:"ltr";this._tileCoordinator.update(this.cols,Jt),this._tileStyler.init(this.gutterSize,_t,this.cols,Pt),Jt.forEach((oe,Ne)=>{const Xe=_t.positions[Ne];this._tileStyler.setStyle(oe,Xe.row,Xe.col)}),this._setListStyle(this._tileStyler.getComputedHeight())}_setListStyle(_t){_t&&(this._element.nativeElement.style[_t[0]]=_t[1])}}return yt.\u0275fac=function(_t){return new(_t||yt)(T.Y36(T.SBq),T.Y36(t.Is,8))},yt.\u0275cmp=T.Xpm({type:yt,selectors:[["mat-grid-list"]],contentQueries:function(_t,Jt,Pt){if(1&_t&&T.Suo(Pt,k,5),2&_t){let oe;T.iGM(oe=T.CRH())&&(Jt._tiles=oe)}},hostAttrs:[1,"mat-grid-list"],hostVars:1,hostBindings:function(_t,Jt){2&_t&&T.uIk("cols",Jt.cols)},inputs:{cols:"cols",gutterSize:"gutterSize",rowHeight:"rowHeight"},exportAs:["matGridList"],features:[T._Bn([{provide:x,useExisting:yt}])],ngContentSelectors:n,decls:2,vars:0,template:function(_t,Jt){1&_t&&(T.F$t(),T.TgZ(0,"div"),T.Hsn(1),T.qZA())},styles:[p],encapsulation:2,changeDetection:0}),yt})(),Tt=(()=>{class yt{}return yt.\u0275fac=function(_t){return new(_t||yt)},yt.\u0275mod=T.oAB({type:yt}),yt.\u0275inj=T.cJS({imports:[[a.uc,a.BQ],a.uc,a.BQ]}),yt})()},31749:(B,U,v)=>{"use strict";v.d(U,{Hw:()=>Ce,Ps:()=>Ze});var T=v(42741),a=v(40688),e=v(99957),t=v(16274),n=v(267),o=v(7535),r=v(90714),p=v(39734),b=v(96286),I=v(88561),x=v(72072),k=v(27813),Y=v(82564),X=v(59917),it=v(31887),rt=v(93220);const ct=["*"];function wt(we){return Error(`Unable to find icon with the name "${we}"`)}function Rt(we){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${we}".`)}function Dt(we){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${we}".`)}class pt{constructor(ai,re,ce){this.url=ai,this.svgText=re,this.options=ce}}let st=(()=>{class we{constructor(re,ce,Pe,qe){this._httpClient=re,this._sanitizer=ce,this._errorHandler=qe,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=Pe}addSvgIcon(re,ce,Pe){return this.addSvgIconInNamespace("",re,ce,Pe)}addSvgIconLiteral(re,ce,Pe){return this.addSvgIconLiteralInNamespace("",re,ce,Pe)}addSvgIconInNamespace(re,ce,Pe,qe){return this._addSvgIconConfig(re,ce,new pt(Pe,null,qe))}addSvgIconResolver(re){return this._resolvers.push(re),this}addSvgIconLiteralInNamespace(re,ce,Pe,qe){const oi=this._sanitizer.sanitize(T.q3G.HTML,Pe);if(!oi)throw Dt(Pe);return this._addSvgIconConfig(re,ce,new pt("",oi,qe))}addSvgIconSet(re,ce){return this.addSvgIconSetInNamespace("",re,ce)}addSvgIconSetLiteral(re,ce){return this.addSvgIconSetLiteralInNamespace("",re,ce)}addSvgIconSetInNamespace(re,ce,Pe){return this._addSvgIconSetConfig(re,new pt(ce,null,Pe))}addSvgIconSetLiteralInNamespace(re,ce,Pe){const qe=this._sanitizer.sanitize(T.q3G.HTML,ce);if(!qe)throw Dt(ce);return this._addSvgIconSetConfig(re,new pt("",qe,Pe))}registerFontClassAlias(re,ce=re){return this._fontCssClassesByAlias.set(re,ce),this}classNameForFontAlias(re){return this._fontCssClassesByAlias.get(re)||re}setDefaultFontSetClass(re){return this._defaultFontSetClass=re,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(re){const ce=this._sanitizer.sanitize(T.q3G.RESOURCE_URL,re);if(!ce)throw Rt(re);const Pe=this._cachedIconsByUrl.get(ce);return Pe?(0,n.of)(Tt(Pe)):this._loadSvgIconFromConfig(new pt(re,null)).pipe((0,b.b)(qe=>this._cachedIconsByUrl.set(ce,qe)),(0,I.U)(qe=>Tt(qe)))}getNamedSvgIcon(re,ce=""){const Pe=Ct(ce,re);let qe=this._svgIconConfigs.get(Pe);if(qe)return this._getSvgFromConfig(qe);if(qe=this._getIconConfigFromResolvers(ce,re),qe)return this._svgIconConfigs.set(Pe,qe),this._getSvgFromConfig(qe);const oi=this._iconSetConfigs.get(ce);return oi?this._getSvgFromIconSetConfigs(re,oi):(0,o._)(wt(Pe))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(re){return re.svgText?(0,n.of)(Tt(this._svgElementFromConfig(re))):this._loadSvgIconFromConfig(re).pipe((0,I.U)(ce=>Tt(ce)))}_getSvgFromIconSetConfigs(re,ce){const Pe=this._extractIconWithNameFromAnySet(re,ce);if(Pe)return(0,n.of)(Pe);const qe=ce.filter(oi=>!oi.svgText).map(oi=>this._loadSvgIconSetFromConfig(oi).pipe((0,x.K)(wi=>{const Ni=`Loading icon set URL: ${this._sanitizer.sanitize(T.q3G.RESOURCE_URL,oi.url)} failed: ${wi.message}`;return this._errorHandler.handleError(new Error(Ni)),(0,n.of)(null)})));return(0,r.D)(qe).pipe((0,I.U)(()=>{const oi=this._extractIconWithNameFromAnySet(re,ce);if(!oi)throw wt(re);return oi}))}_extractIconWithNameFromAnySet(re,ce){for(let Pe=ce.length-1;Pe>=0;Pe--){const qe=ce[Pe];if(qe.svgText&&qe.svgText.indexOf(re)>-1){const oi=this._svgElementFromConfig(qe),wi=this._extractSvgIconFromSet(oi,re,qe.options);if(wi)return wi}}return null}_loadSvgIconFromConfig(re){return this._fetchIcon(re).pipe((0,b.b)(ce=>re.svgText=ce),(0,I.U)(()=>this._svgElementFromConfig(re)))}_loadSvgIconSetFromConfig(re){return re.svgText?(0,n.of)(null):this._fetchIcon(re).pipe((0,b.b)(ce=>re.svgText=ce))}_extractSvgIconFromSet(re,ce,Pe){const qe=re.querySelector(`[id="${ce}"]`);if(!qe)return null;const oi=qe.cloneNode(!0);if(oi.removeAttribute("id"),"svg"===oi.nodeName.toLowerCase())return this._setSvgAttributes(oi,Pe);if("symbol"===oi.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(oi),Pe);const wi=this._svgElementFromString("<svg></svg>");return wi.appendChild(oi),this._setSvgAttributes(wi,Pe)}_svgElementFromString(re){const ce=this._document.createElement("DIV");ce.innerHTML=re;const Pe=ce.querySelector("svg");if(!Pe)throw Error("<svg> tag not found");return Pe}_toSvgElement(re){const ce=this._svgElementFromString("<svg></svg>"),Pe=re.attributes;for(let qe=0;qe<Pe.length;qe++){const{name:oi,value:wi}=Pe[qe];"id"!==oi&&ce.setAttribute(oi,wi)}for(let qe=0;qe<re.childNodes.length;qe++)re.childNodes[qe].nodeType===this._document.ELEMENT_NODE&&ce.appendChild(re.childNodes[qe].cloneNode(!0));return ce}_setSvgAttributes(re,ce){return re.setAttribute("fit",""),re.setAttribute("height","100%"),re.setAttribute("width","100%"),re.setAttribute("preserveAspectRatio","xMidYMid meet"),re.setAttribute("focusable","false"),ce&&ce.viewBox&&re.setAttribute("viewBox",ce.viewBox),re}_fetchIcon(re){var ce;const{url:Pe,options:qe}=re,oi=null!==(ce=null==qe?void 0:qe.withCredentials)&&void 0!==ce&&ce;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==Pe)throw Error(`Cannot fetch icon from URL "${Pe}".`);const wi=this._sanitizer.sanitize(T.q3G.RESOURCE_URL,Pe);if(!wi)throw Rt(Pe);const Ji=this._inProgressUrlFetches.get(wi);if(Ji)return Ji;const Ni=this._httpClient.get(wi,{responseType:"text",withCredentials:oi}).pipe((0,k.x)(()=>this._inProgressUrlFetches.delete(wi)),(0,Y.B)());return this._inProgressUrlFetches.set(wi,Ni),Ni}_addSvgIconConfig(re,ce,Pe){return this._svgIconConfigs.set(Ct(re,ce),Pe),this}_addSvgIconSetConfig(re,ce){const Pe=this._iconSetConfigs.get(re);return Pe?Pe.push(ce):this._iconSetConfigs.set(re,[ce]),this}_svgElementFromConfig(re){if(!re.svgElement){const ce=this._svgElementFromString(re.svgText);this._setSvgAttributes(ce,re.options),re.svgElement=ce}return re.svgElement}_getIconConfigFromResolvers(re,ce){for(let Pe=0;Pe<this._resolvers.length;Pe++){const qe=this._resolvers[Pe](ce,re);if(qe)return yt(qe)?new pt(qe.url,null,qe.options):new pt(qe,null)}}}return we.\u0275fac=function(re){return new(re||we)(T.LFG(it.eN,8),T.LFG(rt.H7),T.LFG(t.K0,8),T.LFG(T.qLn))},we.\u0275prov=T.Yz7({factory:function(){return new we(T.LFG(it.eN,8),T.LFG(rt.H7),T.LFG(t.K0,8),T.LFG(T.qLn))},token:we,providedIn:"root"}),we})();function Tt(we){return we.cloneNode(!0)}function Ct(we,ai){return we+":"+ai}function yt(we){return!(!we.url||!we.options)}const gt=(0,a.pj)(class{constructor(we){this._elementRef=we}}),_t=new T.OlP("mat-icon-location",{providedIn:"root",factory:function(){const we=(0,T.f3M)(t.K0),ai=we?we.location:null;return{getPathname:()=>ai?ai.pathname+ai.search:""}}}),Pt=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Ne=Pt.map(we=>`[${we}]`).join(", "),Xe=/^url\(['"]?#(.*?)['"]?\)$/;let Ce=(()=>{class we extends gt{constructor(re,ce,Pe,qe,oi){super(re),this._iconRegistry=ce,this._location=qe,this._errorHandler=oi,this._inline=!1,this._currentIconFetch=p.w.EMPTY,Pe||re.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(re){this._inline=(0,e.Ig)(re)}get svgIcon(){return this._svgIcon}set svgIcon(re){re!==this._svgIcon&&(re?this._updateSvgIcon(re):this._svgIcon&&this._clearSvgElement(),this._svgIcon=re)}get fontSet(){return this._fontSet}set fontSet(re){const ce=this._cleanupFontValue(re);ce!==this._fontSet&&(this._fontSet=ce,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(re){const ce=this._cleanupFontValue(re);ce!==this._fontIcon&&(this._fontIcon=ce,this._updateFontIconClasses())}_splitIconName(re){if(!re)return["",""];const ce=re.split(":");switch(ce.length){case 1:return["",ce[0]];case 2:return ce;default:throw Error(`Invalid icon name: "${re}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const re=this._elementsWithExternalReferences;if(re&&re.size){const ce=this._location.getPathname();ce!==this._previousPath&&(this._previousPath=ce,this._prependPathToReferences(ce))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(re){this._clearSvgElement();const ce=re.querySelectorAll("style");for(let qe=0;qe<ce.length;qe++)ce[qe].textContent+=" ";const Pe=this._location.getPathname();this._previousPath=Pe,this._cacheChildrenWithExternalReferences(re),this._prependPathToReferences(Pe),this._elementRef.nativeElement.appendChild(re)}_clearSvgElement(){const re=this._elementRef.nativeElement;let ce=re.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();ce--;){const Pe=re.childNodes[ce];(1!==Pe.nodeType||"svg"===Pe.nodeName.toLowerCase())&&re.removeChild(Pe)}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const re=this._elementRef.nativeElement,ce=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();ce!=this._previousFontSetClass&&(this._previousFontSetClass&&re.classList.remove(this._previousFontSetClass),ce&&re.classList.add(ce),this._previousFontSetClass=ce),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&re.classList.remove(this._previousFontIconClass),this.fontIcon&&re.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(re){return"string"==typeof re?re.trim().split(" ")[0]:re}_prependPathToReferences(re){const ce=this._elementsWithExternalReferences;ce&&ce.forEach((Pe,qe)=>{Pe.forEach(oi=>{qe.setAttribute(oi.name,`url('${re}#${oi.value}')`)})})}_cacheChildrenWithExternalReferences(re){const ce=re.querySelectorAll(Ne),Pe=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let qe=0;qe<ce.length;qe++)Pt.forEach(oi=>{const wi=ce[qe],Ji=wi.getAttribute(oi),Ni=Ji?Ji.match(Xe):null;if(Ni){let ui=Pe.get(wi);ui||(ui=[],Pe.set(wi,ui)),ui.push({name:oi,value:Ni[1]})}})}_updateSvgIcon(re){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),re){const[ce,Pe]=this._splitIconName(re);ce&&(this._svgNamespace=ce),Pe&&(this._svgName=Pe),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(Pe,ce).pipe((0,X.q)(1)).subscribe(qe=>this._setSvgElement(qe),qe=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${ce}:${Pe}! ${qe.message}`))})}}}return we.\u0275fac=function(re){return new(re||we)(T.Y36(T.SBq),T.Y36(st),T.$8M("aria-hidden"),T.Y36(_t),T.Y36(T.qLn))},we.\u0275cmp=T.Xpm({type:we,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(re,ce){2&re&&(T.uIk("data-mat-icon-type",ce._usingFontIcon()?"font":"svg")("data-mat-icon-name",ce._svgName||ce.fontIcon)("data-mat-icon-namespace",ce._svgNamespace||ce.fontSet),T.ekj("mat-icon-inline",ce.inline)("mat-icon-no-color","primary"!==ce.color&&"accent"!==ce.color&&"warn"!==ce.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[T.qOj],ngContentSelectors:ct,decls:1,vars:0,template:function(re,ce){1&re&&(T.F$t(),T.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),we})(),Ze=(()=>{class we{}return we.\u0275fac=function(re){return new(re||we)},we.\u0275mod=T.oAB({type:we}),we.\u0275inj=T.cJS({imports:[[a.BQ],a.BQ]}),we})()},28369:(B,U,v)=>{"use strict";v.d(U,{VK:()=>wi,OP:()=>re,Tx:()=>hi,p6:()=>ie});var T=v(72882),a=v(99957),e=v(15911),t=v(42741),n=v(6006),o=v(39734),r=v(30636),p=v(267),b=v(13438),I=v(63543),x=v(32812),k=v(59917),Y=v(63305),X=v(27194),it=v(62615),rt=v(88638),ct=v(62718),wt=v(16274),At=v(40688),Rt=v(68101),Dt=v(66899),pt=v(54847),st=v(12281);const ot=["mat-menu-item",""];function nt(fe,di){1&fe&&(t.O4$(),t.TgZ(0,"svg",2),t._UZ(1,"polygon",3),t.qZA())}const Tt=["*"];function Ct(fe,di){if(1&fe){const ge=t.EpF();t.TgZ(0,"div",0),t.NdJ("keydown",function(Zt){return t.CHM(ge),t.oxw()._handleKeydown(Zt)})("click",function(){return t.CHM(ge),t.oxw().closed.emit("click")})("@transformMenu.start",function(Zt){return t.CHM(ge),t.oxw()._onAnimationStart(Zt)})("@transformMenu.done",function(Zt){return t.CHM(ge),t.oxw()._onAnimationDone(Zt)}),t.TgZ(1,"div",1),t.Hsn(2),t.qZA(),t.qZA()}if(2&fe){const ge=t.oxw();t.Q6J("id",ge.panelId)("ngClass",ge._classList)("@transformMenu",ge._panelAnimationState),t.uIk("aria-label",ge.ariaLabel||null)("aria-labelledby",ge.ariaLabelledby||null)("aria-describedby",ge.ariaDescribedby||null)}}const yt={transformMenu:(0,rt.X$)("transformMenu",[(0,rt.SB)("void",(0,rt.oB)({opacity:0,transform:"scale(0.8)"})),(0,rt.eR)("void => enter",(0,rt.jt)("120ms cubic-bezier(0, 0, 0.2, 1)",(0,rt.oB)({opacity:1,transform:"scale(1)"}))),(0,rt.eR)("* => void",(0,rt.jt)("100ms 25ms linear",(0,rt.oB)({opacity:0})))]),fadeInItems:(0,rt.X$)("fadeInItems",[(0,rt.SB)("showing",(0,rt.oB)({opacity:1})),(0,rt.eR)("void => *",[(0,rt.oB)({opacity:0}),(0,rt.jt)("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},Jt=new t.OlP("MatMenuContent"),we=new t.OlP("MAT_MENU_PANEL"),ai=(0,At.Kr)((0,At.Id)(class{}));let re=(()=>{class fe extends ai{constructor(ge,Ve,Zt,$,at){super(),this._elementRef=ge,this._focusMonitor=Zt,this._parentMenu=$,this._changeDetectorRef=at,this.role="menuitem",this._hovered=new n.xQ,this._focused=new n.xQ,this._highlighted=!1,this._triggersSubmenu=!1,$&&$.addItem&&$.addItem(this)}focus(ge,Ve){this._focusMonitor&&ge?this._focusMonitor.focusVia(this._getHostElement(),ge,Ve):this._getHostElement().focus(Ve),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(ge){this.disabled&&(ge.preventDefault(),ge.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){var ge,Ve;const Zt=this._elementRef.nativeElement.cloneNode(!0),$=Zt.querySelectorAll("mat-icon, .material-icons");for(let at=0;at<$.length;at++){const zt=$[at];null===(ge=zt.parentNode)||void 0===ge||ge.removeChild(zt)}return(null===(Ve=Zt.textContent)||void 0===Ve?void 0:Ve.trim())||""}_setHighlighted(ge){var Ve;this._highlighted=ge,null===(Ve=this._changeDetectorRef)||void 0===Ve||Ve.markForCheck()}}return fe.\u0275fac=function(ge){return new(ge||fe)(t.Y36(t.SBq),t.Y36(wt.K0),t.Y36(T.tE),t.Y36(we,8),t.Y36(t.sBO))},fe.\u0275cmp=t.Xpm({type:fe,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(ge,Ve){1&ge&&t.NdJ("click",function($){return Ve._checkDisabled($)})("mouseenter",function(){return Ve._handleMouseEnter()}),2&ge&&(t.uIk("role",Ve.role)("tabindex",Ve._getTabIndex())("aria-disabled",Ve.disabled.toString())("disabled",Ve.disabled||null),t.ekj("mat-menu-item",!0)("mat-menu-item-highlighted",Ve._highlighted)("mat-menu-item-submenu-trigger",Ve._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[t.qOj],attrs:ot,ngContentSelectors:Tt,decls:3,vars:3,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(ge,Ve){1&ge&&(t.F$t(),t.Hsn(0),t._UZ(1,"div",0),t.YNc(2,nt,2,0,"svg",1)),2&ge&&(t.xp6(1),t.Q6J("matRippleDisabled",Ve.disableRipple||Ve.disabled)("matRippleTrigger",Ve._getHostElement()),t.xp6(1),t.Q6J("ngIf",Ve._triggersSubmenu))},directives:[At.wG,wt.O5],encapsulation:2,changeDetection:0}),fe})();const ce=new t.OlP("mat-menu-default-options",{providedIn:"root",factory:function(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let qe=0,oi=(()=>{class fe{constructor(ge,Ve,Zt){this._elementRef=ge,this._ngZone=Ve,this._defaultOptions=Zt,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new t.n_E,this._tabSubscription=o.w.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new n.xQ,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new t.vpe,this.close=this.closed,this.panelId="mat-menu-panel-"+qe++}get xPosition(){return this._xPosition}set xPosition(ge){this._xPosition=ge,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(ge){this._yPosition=ge,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(ge){this._overlapTrigger=(0,a.Ig)(ge)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(ge){this._hasBackdrop=(0,a.Ig)(ge)}set panelClass(ge){const Ve=this._previousPanelClass;Ve&&Ve.length&&Ve.split(" ").forEach(Zt=>{this._classList[Zt]=!1}),this._previousPanelClass=ge,ge&&ge.length&&(ge.split(" ").forEach(Zt=>{this._classList[Zt]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(ge){this.panelClass=ge}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new T.Em(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe((0,I.O)(this._directDescendantItems),(0,x.w)(ge=>(0,r.T)(...ge.map(Ve=>Ve._focused)))).subscribe(ge=>this._keyManager.updateActiveItem(ge))}ngOnDestroy(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}_hovered(){return this._directDescendantItems.changes.pipe((0,I.O)(this._directDescendantItems),(0,x.w)(Ve=>(0,r.T)(...Ve.map(Zt=>Zt._hovered))))}addItem(ge){}removeItem(ge){}_handleKeydown(ge){const Ve=ge.keyCode,Zt=this._keyManager;switch(Ve){case e.hY:(0,e.Vb)(ge)||(ge.preventDefault(),this.closed.emit("keydown"));break;case e.oh:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case e.SV:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:(Ve===e.LH||Ve===e.JH)&&Zt.setFocusOrigin("keyboard"),Zt.onKeydown(ge)}}focusFirstItem(ge="program"){this.lazyContent?this._ngZone.onStable.pipe((0,k.q)(1)).subscribe(()=>this._focusFirstItem(ge)):this._focusFirstItem(ge)}_focusFirstItem(ge){const Ve=this._keyManager;if(Ve.setFocusOrigin(ge).setFirstItemActive(),!Ve.activeItem&&this._directDescendantItems.length){let Zt=this._directDescendantItems.first._getHostElement().parentElement;for(;Zt;){if("menu"===Zt.getAttribute("role")){Zt.focus();break}Zt=Zt.parentElement}}}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(ge){const Ve=Math.min(this._baseElevation+ge,24),Zt=`${this._elevationPrefix}${Ve}`,$=Object.keys(this._classList).find(at=>at.startsWith(this._elevationPrefix));(!$||$===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[Zt]=!0,this._previousElevation=Zt)}setPositionClasses(ge=this.xPosition,Ve=this.yPosition){const Zt=this._classList;Zt["mat-menu-before"]="before"===ge,Zt["mat-menu-after"]="after"===ge,Zt["mat-menu-above"]="above"===Ve,Zt["mat-menu-below"]="below"===Ve}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(ge){this._animationDone.next(ge),this._isAnimating=!1}_onAnimationStart(ge){this._isAnimating=!0,"enter"===ge.toState&&0===this._keyManager.activeItemIndex&&(ge.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe((0,I.O)(this._allItems)).subscribe(ge=>{this._directDescendantItems.reset(ge.filter(Ve=>Ve._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return fe.\u0275fac=function(ge){return new(ge||fe)(t.Y36(t.SBq),t.Y36(t.R0b),t.Y36(ce))},fe.\u0275dir=t.lG2({type:fe,contentQueries:function(ge,Ve,Zt){if(1&ge&&(t.Suo(Zt,Jt,5),t.Suo(Zt,re,5),t.Suo(Zt,re,4)),2&ge){let $;t.iGM($=t.CRH())&&(Ve.lazyContent=$.first),t.iGM($=t.CRH())&&(Ve._allItems=$),t.iGM($=t.CRH())&&(Ve.items=$)}},viewQuery:function(ge,Ve){if(1&ge&&t.Gf(t.Rgc,5),2&ge){let Zt;t.iGM(Zt=t.CRH())&&(Ve.templateRef=Zt.first)}},inputs:{backdropClass:"backdropClass",xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"]},outputs:{closed:"closed",close:"close"}}),fe})(),wi=(()=>{class fe extends oi{constructor(ge,Ve,Zt){super(ge,Ve,Zt),this._elevationPrefix="mat-elevation-z",this._baseElevation=4}}return fe.\u0275fac=function(ge){return new(ge||fe)(t.Y36(t.SBq),t.Y36(t.R0b),t.Y36(ce))},fe.\u0275cmp=t.Xpm({type:fe,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(ge,Ve){2&ge&&t.uIk("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[t._Bn([{provide:we,useExisting:fe}]),t.qOj],ngContentSelectors:Tt,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(ge,Ve){1&ge&&(t.F$t(),t.YNc(0,Ct,3,6,"ng-template"))},directives:[wt.mk],styles:["mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]{pointer-events:none}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.cdk-high-contrast-active .mat-menu-item.cdk-program-focused,.cdk-high-contrast-active .mat-menu-item.cdk-keyboard-focused,.cdk-high-contrast-active .mat-menu-item-highlighted{outline:dotted 1px}.mat-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.mat-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-menu-submenu-icon{fill:CanvasText}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}\n"],encapsulation:2,data:{animation:[yt.transformMenu,yt.fadeInItems]},changeDetection:0}),fe})();const Ji=new t.OlP("mat-menu-scroll-strategy"),ui={provide:Ji,deps:[Rt.aV],useFactory:function(fe){return()=>fe.scrollStrategies.reposition()}},Be=(0,Dt.i$)({passive:!0});let Ft=(()=>{class fe{constructor(ge,Ve,Zt,$,at,zt,Qt,ye){this._overlay=ge,this._element=Ve,this._viewContainerRef=Zt,this._menuItemInstance=zt,this._dir=Qt,this._focusMonitor=ye,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=o.w.EMPTY,this._hoverSubscription=o.w.EMPTY,this._menuCloseSubscription=o.w.EMPTY,this._handleTouchStart=Ee=>{(0,T.yG)(Ee)||(this._openedBy="touch")},this._openedBy=void 0,this._ariaHaspopup=!0,this.restoreFocus=!0,this.menuOpened=new t.vpe,this.onMenuOpen=this.menuOpened,this.menuClosed=new t.vpe,this.onMenuClose=this.menuClosed,this._scrollStrategy=$,this._parentMaterialMenu=at instanceof oi?at:void 0,Ve.nativeElement.addEventListener("touchstart",this._handleTouchStart,Be),zt&&(zt._triggersSubmenu=this.triggersSubmenu())}get _ariaExpanded(){return this.menuOpen||null}get _ariaControl(){return this.menuOpen?this.menu.panelId:null}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(ge){this.menu=ge}get menu(){return this._menu}set menu(ge){ge!==this._menu&&(this._menu=ge,this._menuCloseSubscription.unsubscribe(),ge&&(this._menuCloseSubscription=ge.close.subscribe(Ve=>{this._destroyMenu(Ve),("click"===Ve||"tab"===Ve)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(Ve)})))}ngAfterContentInit(){this._checkMenu(),this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,Be),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){if(this._menuOpen)return;this._checkMenu();const ge=this._createOverlay(),Ve=ge.getConfig();this._setPosition(Ve.positionStrategy),Ve.hasBackdrop=null==this.menu.hasBackdrop?!this.triggersSubmenu():this.menu.hasBackdrop,ge.attach(this._getPortal()),this.menu.lazyContent&&this.menu.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(),this.menu instanceof oi&&this.menu._startAnimation()}closeMenu(){this.menu.close.emit()}focus(ge,Ve){this._focusMonitor&&ge?this._focusMonitor.focusVia(this._element,ge,Ve):this._element.nativeElement.focus(Ve)}updatePosition(){var ge;null===(ge=this._overlayRef)||void 0===ge||ge.updatePosition()}_destroyMenu(ge){if(!this._overlayRef||!this.menuOpen)return;const Ve=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===ge||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,Ve instanceof oi?(Ve._resetAnimation(),Ve.lazyContent?Ve._animationDone.pipe((0,Y.h)(Zt=>"void"===Zt.toState),(0,k.q)(1),(0,X.R)(Ve.lazyContent._attached)).subscribe({next:()=>Ve.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),Ve.lazyContent&&Ve.lazyContent.detach())}_initMenu(){this.menu.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,this.menu.direction=this.dir,this._setMenuElevation(),this.menu.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(){if(this.menu.setElevation){let ge=0,Ve=this.menu.parentMenu;for(;Ve;)ge++,Ve=Ve.parentMenu;this.menu.setElevation(ge)}}_setIsMenuOpen(ge){this._menuOpen=ge,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(ge)}_checkMenu(){}_createOverlay(){if(!this._overlayRef){const ge=this._getOverlayConfig();this._subscribeToPositions(ge.positionStrategy),this._overlayRef=this._overlay.create(ge),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(){return new Rt.X_({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:this.menu.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:this.menu.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(ge){this.menu.setPositionClasses&&ge.positionChanges.subscribe(Ve=>{this.menu.setPositionClasses("start"===Ve.connectionPair.overlayX?"after":"before","top"===Ve.connectionPair.overlayY?"below":"above")})}_setPosition(ge){let[Ve,Zt]="before"===this.menu.xPosition?["end","start"]:["start","end"],[$,at]="above"===this.menu.yPosition?["bottom","top"]:["top","bottom"],[zt,Qt]=[$,at],[ye,Ee]=[Ve,Zt],ni=0;this.triggersSubmenu()?(Ee=Ve="before"===this.menu.xPosition?"start":"end",Zt=ye="end"===Ve?"start":"end",ni="bottom"===$?8:-8):this.menu.overlapTrigger||(zt="top"===$?"bottom":"top",Qt="top"===at?"bottom":"top"),ge.withPositions([{originX:Ve,originY:zt,overlayX:ye,overlayY:$,offsetY:ni},{originX:Zt,originY:zt,overlayX:Ee,overlayY:$,offsetY:ni},{originX:Ve,originY:Qt,overlayX:ye,overlayY:at,offsetY:-ni},{originX:Zt,originY:Qt,overlayX:Ee,overlayY:at,offsetY:-ni}])}_menuClosingActions(){const ge=this._overlayRef.backdropClick(),Ve=this._overlayRef.detachments(),Zt=this._parentMaterialMenu?this._parentMaterialMenu.closed:(0,p.of)(),$=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe((0,Y.h)(at=>at!==this._menuItemInstance),(0,Y.h)(()=>this._menuOpen)):(0,p.of)();return(0,r.T)(ge,Zt,$,Ve)}_handleMousedown(ge){(0,T.X6)(ge)||(this._openedBy=0===ge.button?"mouse":void 0,this.triggersSubmenu()&&ge.preventDefault())}_handleKeydown(ge){const Ve=ge.keyCode;(Ve===e.K5||Ve===e.L_)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(Ve===e.SV&&"ltr"===this.dir||Ve===e.oh&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(ge){this.triggersSubmenu()?(ge.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe((0,Y.h)(ge=>ge===this._menuItemInstance&&!ge.disabled),(0,it.g)(0,b.E)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof oi&&this.menu._isAnimating?this.menu._animationDone.pipe((0,k.q)(1),(0,it.g)(0,b.E),(0,X.R)(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(){return(!this._portal||this._portal.templateRef!==this.menu.templateRef)&&(this._portal=new ct.UE(this.menu.templateRef,this._viewContainerRef)),this._portal}}return fe.\u0275fac=function(ge){return new(ge||fe)(t.Y36(Rt.aV),t.Y36(t.SBq),t.Y36(t.s_b),t.Y36(Ji),t.Y36(we,8),t.Y36(re,10),t.Y36(st.Is,8),t.Y36(T.tE))},fe.\u0275dir=t.lG2({type:fe,hostVars:3,hostBindings:function(ge,Ve){1&ge&&t.NdJ("mousedown",function($){return Ve._handleMousedown($)})("keydown",function($){return Ve._handleKeydown($)})("click",function($){return Ve._handleClick($)}),2&ge&&t.uIk("aria-haspopup",Ve._ariaHaspopup)("aria-expanded",Ve._ariaExpanded)("aria-controls",Ve._ariaControl)},inputs:{restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"],_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),fe})(),ie=(()=>{class fe extends Ft{}return fe.\u0275fac=function(){let di;return function(Ve){return(di||(di=t.n5z(fe)))(Ve||fe)}}(),fe.\u0275dir=t.lG2({type:fe,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-menu-trigger"],exportAs:["matMenuTrigger"],features:[t.qOj]}),fe})(),hi=(()=>{class fe{}return fe.\u0275fac=function(ge){return new(ge||fe)},fe.\u0275mod=t.oAB({type:fe}),fe.\u0275inj=t.cJS({providers:[ui],imports:[[wt.ez,At.BQ,At.si,Rt.U8],pt.ZD,At.BQ]}),fe})()},65434:(B,U,v)=>{"use strict";v.d(U,{Cq:()=>Rt,$g:()=>At});var T=v(42741),a=v(16274),e=v(40688),t=v(99957),n=v(66899),o=v(81728);function r(Dt,pt){if(1&Dt&&(T.O4$(),T._UZ(0,"circle",3)),2&Dt){const st=T.oxw();T.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+st._spinnerAnimationLabel)("stroke-dashoffset",st._getStrokeDashOffset(),"px")("stroke-dasharray",st._getStrokeCircumference(),"px")("stroke-width",st._getCircleStrokeWidth(),"%"),T.uIk("r",st._getCircleRadius())}}function p(Dt,pt){if(1&Dt&&(T.O4$(),T._UZ(0,"circle",3)),2&Dt){const st=T.oxw();T.Udp("stroke-dashoffset",st._getStrokeDashOffset(),"px")("stroke-dasharray",st._getStrokeCircumference(),"px")("stroke-width",st._getCircleStrokeWidth(),"%"),T.uIk("r",st._getCircleRadius())}}function b(Dt,pt){if(1&Dt&&(T.O4$(),T._UZ(0,"circle",3)),2&Dt){const st=T.oxw();T.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+st._spinnerAnimationLabel)("stroke-dashoffset",st._getStrokeDashOffset(),"px")("stroke-dasharray",st._getStrokeCircumference(),"px")("stroke-width",st._getCircleStrokeWidth(),"%"),T.uIk("r",st._getCircleRadius())}}function I(Dt,pt){if(1&Dt&&(T.O4$(),T._UZ(0,"circle",3)),2&Dt){const st=T.oxw();T.Udp("stroke-dashoffset",st._getStrokeDashOffset(),"px")("stroke-dasharray",st._getStrokeCircumference(),"px")("stroke-width",st._getCircleStrokeWidth(),"%"),T.uIk("r",st._getCircleRadius())}}const x=".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transform-origin:center;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:currentColor;stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] svg{animation:mat-progress-spinner-stroke-rotate-fallback 10000ms cubic-bezier(0.87, 0.03, 0.33, 1) infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition-property:stroke}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}@keyframes mat-progress-spinner-stroke-rotate-fallback{0%{transform:rotate(0deg)}25%{transform:rotate(1170deg)}50%{transform:rotate(2340deg)}75%{transform:rotate(3510deg)}100%{transform:rotate(4680deg)}}\n",X=(0,e.pj)(class{constructor(Dt){this._elementRef=Dt}},"primary"),it=new T.OlP("mat-progress-spinner-default-options",{providedIn:"root",factory:function(){return{diameter:100}}});class wt extends X{constructor(pt,st,ot,nt,Tt){super(pt),this._document=ot,this._diameter=100,this._value=0,this._fallbackAnimation=!1,this.mode="determinate";const Ct=wt._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),Ct.has(ot.head)||Ct.set(ot.head,new Set([100])),this._fallbackAnimation=st.EDGE||st.TRIDENT,this._noopAnimations="NoopAnimations"===nt&&!!Tt&&!Tt._forceAnimations,Tt&&(Tt.diameter&&(this.diameter=Tt.diameter),Tt.strokeWidth&&(this.strokeWidth=Tt.strokeWidth))}get diameter(){return this._diameter}set diameter(pt){this._diameter=(0,t.su)(pt),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),!this._fallbackAnimation&&this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(pt){this._strokeWidth=(0,t.su)(pt)}get value(){return"determinate"===this.mode?this._value:0}set value(pt){this._value=Math.max(0,Math.min(100,(0,t.su)(pt)))}ngOnInit(){const pt=this._elementRef.nativeElement;this._styleRoot=(0,n.kV)(pt)||this._document.head,this._attachStyleNode(),pt.classList.add(`mat-progress-spinner-indeterminate${this._fallbackAnimation?"-fallback":""}-animation`)}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const pt=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${pt} ${pt}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:this._fallbackAnimation&&"indeterminate"===this.mode?.2*this._getStrokeCircumference():null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_attachStyleNode(){const pt=this._styleRoot,st=this._diameter,ot=wt._diameters;let nt=ot.get(pt);if(!nt||!nt.has(st)){const Tt=this._document.createElement("style");Tt.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),Tt.textContent=this._getAnimationText(),pt.appendChild(Tt),nt||(nt=new Set,ot.set(pt,nt)),nt.add(st)}}_getAnimationText(){const pt=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*pt).replace(/END_VALUE/g,""+.2*pt).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}wt.\u0275fac=function(pt){return new(pt||wt)(T.Y36(T.SBq),T.Y36(n.t4),T.Y36(a.K0,8),T.Y36(o.Qb,8),T.Y36(it))},wt.\u0275cmp=T.Xpm({type:wt,selectors:[["mat-progress-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner"],hostVars:10,hostBindings:function(pt,st){2&pt&&(T.uIk("aria-valuemin","determinate"===st.mode?0:null)("aria-valuemax","determinate"===st.mode?100:null)("aria-valuenow","determinate"===st.mode?st.value:null)("mode",st.mode),T.Udp("width",st.diameter,"px")("height",st.diameter,"px"),T.ekj("_mat-animation-noopable",st._noopAnimations))},inputs:{color:"color",mode:"mode",diameter:"diameter",strokeWidth:"strokeWidth",value:"value"},exportAs:["matProgressSpinner"],features:[T.qOj],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(pt,st){1&pt&&(T.O4$(),T.TgZ(0,"svg",0),T.YNc(1,r,1,9,"circle",1),T.YNc(2,p,1,7,"circle",2),T.qZA()),2&pt&&(T.Udp("width",st.diameter,"px")("height",st.diameter,"px"),T.Q6J("ngSwitch","indeterminate"===st.mode),T.uIk("viewBox",st._getViewBox()),T.xp6(1),T.Q6J("ngSwitchCase",!0),T.xp6(1),T.Q6J("ngSwitchCase",!1))},directives:[a.RF,a.n9],styles:[x],encapsulation:2,changeDetection:0}),wt._diameters=new WeakMap;let At=(()=>{class Dt extends wt{constructor(st,ot,nt,Tt,Ct){super(st,ot,nt,Tt,Ct),this.mode="indeterminate"}}return Dt.\u0275fac=function(st){return new(st||Dt)(T.Y36(T.SBq),T.Y36(n.t4),T.Y36(a.K0,8),T.Y36(o.Qb,8),T.Y36(it))},Dt.\u0275cmp=T.Xpm({type:Dt,selectors:[["mat-spinner"]],hostAttrs:["role","progressbar","mode","indeterminate",1,"mat-spinner","mat-progress-spinner"],hostVars:6,hostBindings:function(st,ot){2&st&&(T.Udp("width",ot.diameter,"px")("height",ot.diameter,"px"),T.ekj("_mat-animation-noopable",ot._noopAnimations))},inputs:{color:"color"},features:[T.qOj],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(st,ot){1&st&&(T.O4$(),T.TgZ(0,"svg",0),T.YNc(1,b,1,9,"circle",1),T.YNc(2,I,1,7,"circle",2),T.qZA()),2&st&&(T.Udp("width",ot.diameter,"px")("height",ot.diameter,"px"),T.Q6J("ngSwitch","indeterminate"===ot.mode),T.uIk("viewBox",ot._getViewBox()),T.xp6(1),T.Q6J("ngSwitchCase",!0),T.xp6(1),T.Q6J("ngSwitchCase",!1))},directives:[a.RF,a.n9],styles:[x],encapsulation:2,changeDetection:0}),Dt})(),Rt=(()=>{class Dt{}return Dt.\u0275fac=function(st){return new(st||Dt)},Dt.\u0275mod=T.oAB({type:Dt}),Dt.\u0275inj=T.cJS({imports:[[e.BQ,a.ez],e.BQ]}),Dt})()},45491:(B,U,v)=>{"use strict";v.d(U,{ux:()=>Tt,ZX:()=>st});var T=v(68101),a=v(62718),e=v(16274),t=v(42741),n=v(40688),o=v(67617),r=v(6006),p=v(59917),b=v(27194),I=v(88638),x=v(72882),k=v(52514),Y=v(66899);function X(Ct,yt){if(1&Ct){const gt=t.EpF();t.TgZ(0,"div",1),t.TgZ(1,"button",2),t.NdJ("click",function(){return t.CHM(gt),t.oxw().action()}),t._uU(2),t.qZA(),t.qZA()}if(2&Ct){const gt=t.oxw();t.xp6(2),t.Oqu(gt.data.action)}}function it(Ct,yt){}const rt=new t.OlP("MatSnackBarData");class ct{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}const wt=Math.pow(2,31)-1;class At{constructor(yt,gt){this._overlayRef=gt,this._afterDismissed=new r.xQ,this._afterOpened=new r.xQ,this._onAction=new r.xQ,this._dismissedByAction=!1,this.containerInstance=yt,this.onAction().subscribe(()=>this.dismiss()),yt._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(yt){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(yt,wt))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}let Rt=(()=>{class Ct{constructor(gt,_t){this.snackBarRef=gt,this.data=_t}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return Ct.\u0275fac=function(gt){return new(gt||Ct)(t.Y36(At),t.Y36(rt))},Ct.\u0275cmp=t.Xpm({type:Ct,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(gt,_t){1&gt&&(t.TgZ(0,"span"),t._uU(1),t.qZA(),t.YNc(2,X,3,1,"div",0)),2&gt&&(t.xp6(1),t.Oqu(_t.data.message),t.xp6(1),t.Q6J("ngIf",_t.hasAction))},directives:[e.O5,o.lW],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}\n"],encapsulation:2,changeDetection:0}),Ct})();const Dt={snackBarState:(0,I.X$)("state",[(0,I.SB)("void, hidden",(0,I.oB)({transform:"scale(0.8)",opacity:0})),(0,I.SB)("visible",(0,I.oB)({transform:"scale(1)",opacity:1})),(0,I.eR)("* => visible",(0,I.jt)("150ms cubic-bezier(0, 0, 0.2, 1)")),(0,I.eR)("* => void, * => hidden",(0,I.jt)("75ms cubic-bezier(0.4, 0.0, 1, 1)",(0,I.oB)({opacity:0})))])};let pt=(()=>{class Ct extends a.en{constructor(gt,_t,Jt,Pt,oe){super(),this._ngZone=gt,this._elementRef=_t,this._changeDetectorRef=Jt,this._platform=Pt,this.snackBarConfig=oe,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new r.xQ,this._onExit=new r.xQ,this._onEnter=new r.xQ,this._animationState="void",this.attachDomPortal=Ne=>(this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachDomPortal(Ne)),this._live="assertive"!==oe.politeness||oe.announcementMessage?"off"===oe.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(gt){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachComponentPortal(gt)}attachTemplatePortal(gt){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachTemplatePortal(gt)}onAnimationEnd(gt){const{fromState:_t,toState:Jt}=gt;if(("void"===Jt&&"void"!==_t||"hidden"===Jt)&&this._completeExit(),"visible"===Jt){const Pt=this._onEnter;this._ngZone.run(()=>{Pt.next(),Pt.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe((0,p.q)(1)).subscribe(()=>{this._onExit.next(),this._onExit.complete()})}_applySnackBarClasses(){const gt=this._elementRef.nativeElement,_t=this.snackBarConfig.panelClass;_t&&(Array.isArray(_t)?_t.forEach(Jt=>gt.classList.add(Jt)):gt.classList.add(_t)),"center"===this.snackBarConfig.horizontalPosition&&gt.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&gt.classList.add("mat-snack-bar-top")}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const gt=this._elementRef.nativeElement.querySelector("[aria-hidden]"),_t=this._elementRef.nativeElement.querySelector("[aria-live]");if(gt&&_t){let Jt=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&gt.contains(document.activeElement)&&(Jt=document.activeElement),gt.removeAttribute("aria-hidden"),_t.appendChild(gt),null==Jt||Jt.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return Ct.\u0275fac=function(gt){return new(gt||Ct)(t.Y36(t.R0b),t.Y36(t.SBq),t.Y36(t.sBO),t.Y36(Y.t4),t.Y36(ct))},Ct.\u0275cmp=t.Xpm({type:Ct,selectors:[["snack-bar-container"]],viewQuery:function(gt,_t){if(1&gt&&t.Gf(a.Pl,7),2&gt){let Jt;t.iGM(Jt=t.CRH())&&(_t._portalOutlet=Jt.first)}},hostAttrs:[1,"mat-snack-bar-container"],hostVars:1,hostBindings:function(gt,_t){1&gt&&t.WFA("@state.done",function(Pt){return _t.onAnimationEnd(Pt)}),2&gt&&t.d8E("@state",_t._animationState)},features:[t.qOj],decls:3,vars:2,consts:[["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(gt,_t){1&gt&&(t.TgZ(0,"div",0),t.YNc(1,it,0,0,"ng-template",1),t.qZA(),t._UZ(2,"div")),2&gt&&(t.xp6(2),t.uIk("aria-live",_t._live)("role",_t._role))},directives:[a.Pl],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}\n"],encapsulation:2,data:{animation:[Dt.snackBarState]}}),Ct})(),st=(()=>{class Ct{}return Ct.\u0275fac=function(gt){return new(gt||Ct)},Ct.\u0275mod=t.oAB({type:Ct}),Ct.\u0275inj=t.cJS({imports:[[T.U8,a.eL,e.ez,o.ot,n.BQ],n.BQ]}),Ct})();const ot=new t.OlP("mat-snack-bar-default-options",{providedIn:"root",factory:function(){return new ct}});let Tt=(()=>{class Ct{constructor(gt,_t,Jt,Pt,oe,Ne){this._overlay=gt,this._live=_t,this._injector=Jt,this._breakpointObserver=Pt,this._parentSnackBar=oe,this._defaultConfig=Ne,this._snackBarRefAtThisLevel=null,this.simpleSnackBarComponent=Rt,this.snackBarContainerComponent=pt,this.handsetCssClass="mat-snack-bar-handset"}get _openedSnackBarRef(){const gt=this._parentSnackBar;return gt?gt._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(gt){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=gt:this._snackBarRefAtThisLevel=gt}openFromComponent(gt,_t){return this._attach(gt,_t)}openFromTemplate(gt,_t){return this._attach(gt,_t)}open(gt,_t="",Jt){const Pt=Object.assign(Object.assign({},this._defaultConfig),Jt);return Pt.data={message:gt,action:_t},Pt.announcementMessage===gt&&(Pt.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,Pt)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(gt,_t){const Pt=t.zs3.create({parent:_t&&_t.viewContainerRef&&_t.viewContainerRef.injector||this._injector,providers:[{provide:ct,useValue:_t}]}),oe=new a.C5(this.snackBarContainerComponent,_t.viewContainerRef,Pt),Ne=gt.attach(oe);return Ne.instance.snackBarConfig=_t,Ne.instance}_attach(gt,_t){const Jt=Object.assign(Object.assign(Object.assign({},new ct),this._defaultConfig),_t),Pt=this._createOverlay(Jt),oe=this._attachSnackBarContainer(Pt,Jt),Ne=new At(oe,Pt);if(gt instanceof t.Rgc){const Xe=new a.UE(gt,null,{$implicit:Jt.data,snackBarRef:Ne});Ne.instance=oe.attachTemplatePortal(Xe)}else{const Xe=this._createInjector(Jt,Ne),Ce=new a.C5(gt,void 0,Xe),Ze=oe.attachComponentPortal(Ce);Ne.instance=Ze.instance}return this._breakpointObserver.observe(k.u3.HandsetPortrait).pipe((0,b.R)(Pt.detachments())).subscribe(Xe=>{const Ce=Pt.overlayElement.classList;Xe.matches?Ce.add(this.handsetCssClass):Ce.remove(this.handsetCssClass)}),Jt.announcementMessage&&oe._onAnnounce.subscribe(()=>{this._live.announce(Jt.announcementMessage,Jt.politeness)}),this._animateSnackBar(Ne,Jt),this._openedSnackBarRef=Ne,this._openedSnackBarRef}_animateSnackBar(gt,_t){gt.afterDismissed().subscribe(()=>{this._openedSnackBarRef==gt&&(this._openedSnackBarRef=null),_t.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{gt.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):gt.containerInstance.enter(),_t.duration&&_t.duration>0&&gt.afterOpened().subscribe(()=>gt._dismissAfter(_t.duration))}_createOverlay(gt){const _t=new T.X_;_t.direction=gt.direction;let Jt=this._overlay.position().global();const Pt="rtl"===gt.direction,oe="left"===gt.horizontalPosition||"start"===gt.horizontalPosition&&!Pt||"end"===gt.horizontalPosition&&Pt,Ne=!oe&&"center"!==gt.horizontalPosition;return oe?Jt.left("0"):Ne?Jt.right("0"):Jt.centerHorizontally(),"top"===gt.verticalPosition?Jt.top("0"):Jt.bottom("0"),_t.positionStrategy=Jt,this._overlay.create(_t)}_createInjector(gt,_t){return t.zs3.create({parent:gt&&gt.viewContainerRef&&gt.viewContainerRef.injector||this._injector,providers:[{provide:At,useValue:_t},{provide:rt,useValue:gt.data}]})}}return Ct.\u0275fac=function(gt){return new(gt||Ct)(t.LFG(T.aV),t.LFG(x.Kd),t.LFG(t.zs3),t.LFG(k.Yg),t.LFG(Ct,12),t.LFG(ot))},Ct.\u0275prov=t.Yz7({factory:function(){return new Ct(t.LFG(T.aV),t.LFG(x.Kd),t.LFG(t.gxx),t.LFG(k.Yg),t.LFG(Ct,12),t.LFG(ot))},token:Ct,providedIn:st}),Ct})()},81728:(B,U,v)=>{"use strict";v.d(U,{Qb:()=>Rn,PW:()=>ha});var T=v(42741),a=v(93220),e=v(88638);function t(){return"undefined"!=typeof window&&void 0!==window.document}function n(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function o(Bt){switch(Bt.length){case 0:return new e.ZN;case 1:return Bt[0];default:return new e.ZE(Bt)}}function r(Bt,V,W,ft,Ht={},te={}){const _e=[],Se=[];let ti=-1,mi=null;if(ft.forEach(Gi=>{const sn=Gi.offset,In=sn==ti,Ln=In&&mi||{};Object.keys(Gi).forEach(_n=>{let bn=_n,Gn=Gi[_n];if("offset"!==_n)switch(bn=V.normalizePropertyName(bn,_e),Gn){case e.k1:Gn=Ht[_n];break;case e.l3:Gn=te[_n];break;default:Gn=V.normalizeStyleValue(_n,bn,Gn,_e)}Ln[bn]=Gn}),In||Se.push(Ln),mi=Ln,ti=sn}),_e.length){const Gi="\n - ";throw new Error(`Unable to animate due to the following errors:${Gi}${_e.join(Gi)}`)}return Se}function p(Bt,V,W,ft){switch(V){case"start":Bt.onStart(()=>ft(W&&b(W,"start",Bt)));break;case"done":Bt.onDone(()=>ft(W&&b(W,"done",Bt)));break;case"destroy":Bt.onDestroy(()=>ft(W&&b(W,"destroy",Bt)))}}function b(Bt,V,W){const ft=W.totalTime,te=I(Bt.element,Bt.triggerName,Bt.fromState,Bt.toState,V||Bt.phaseName,null==ft?Bt.totalTime:ft,!!W.disabled),_e=Bt._data;return null!=_e&&(te._data=_e),te}function I(Bt,V,W,ft,Ht="",te=0,_e){return{element:Bt,triggerName:V,fromState:W,toState:ft,phaseName:Ht,totalTime:te,disabled:!!_e}}function x(Bt,V,W){let ft;return Bt instanceof Map?(ft=Bt.get(V),ft||Bt.set(V,ft=W)):(ft=Bt[V],ft||(ft=Bt[V]=W)),ft}function k(Bt){const V=Bt.indexOf(":");return[Bt.substring(1,V),Bt.substr(V+1)]}let Y=(Bt,V)=>!1,it=(Bt,V)=>!1,ct=(Bt,V,W)=>[];const At=n();(At||"undefined"!=typeof Element)&&(Y=t()?(Bt,V)=>{for(;V&&V!==document.documentElement;){if(V===Bt)return!0;V=V.parentNode||V.host}return!1}:(Bt,V)=>Bt.contains(V),it=(()=>{if(At||Element.prototype.matches)return(Bt,V)=>Bt.matches(V);{const Bt=Element.prototype,V=Bt.matchesSelector||Bt.mozMatchesSelector||Bt.msMatchesSelector||Bt.oMatchesSelector||Bt.webkitMatchesSelector;return V?(W,ft)=>V.apply(W,[ft]):it}})(),ct=(Bt,V,W)=>{let ft=[];if(W){const Ht=Bt.querySelectorAll(V);for(let te=0;te<Ht.length;te++)ft.push(Ht[te])}else{const Ht=Bt.querySelector(V);Ht&&ft.push(Ht)}return ft});let Dt=null,pt=!1;function st(Bt){Dt||(Dt=("undefined"!=typeof document?document.body:null)||{},pt=!!Dt.style&&"WebkitAppearance"in Dt.style);let V=!0;return Dt.style&&!function(Bt){return"ebkit"==Bt.substring(1,6)}(Bt)&&(V=Bt in Dt.style,!V&&pt&&(V="Webkit"+Bt.charAt(0).toUpperCase()+Bt.substr(1)in Dt.style)),V}const nt=it,Tt=Y,Ct=ct;function yt(Bt){const V={};return Object.keys(Bt).forEach(W=>{const ft=W.replace(/([a-z])([A-Z])/g,"$1-$2");V[ft]=Bt[W]}),V}let gt=(()=>{class Bt{validateStyleProperty(W){return st(W)}matchesElement(W,ft){return nt(W,ft)}containsElement(W,ft){return Tt(W,ft)}query(W,ft,Ht){return Ct(W,ft,Ht)}computeStyle(W,ft,Ht){return Ht||""}animate(W,ft,Ht,te,_e,Se=[],ti){return new e.ZN(Ht,te)}}return Bt.\u0275fac=function(W){return new(W||Bt)},Bt.\u0275prov=T.Yz7({token:Bt,factory:Bt.\u0275fac}),Bt})(),_t=(()=>{class Bt{}return Bt.NOOP=new gt,Bt})();const Ne="ng-enter",Xe="ng-leave",we="ng-trigger",ai=".ng-trigger",re="ng-animating",ce=".ng-animating";function Pe(Bt){if("number"==typeof Bt)return Bt;const V=Bt.match(/^(-?[\.\d]+)(m?s)/);return!V||V.length<2?0:qe(parseFloat(V[1]),V[2])}function qe(Bt,V){switch(V){case"s":return 1e3*Bt;default:return Bt}}function oi(Bt,V,W){return Bt.hasOwnProperty("duration")?Bt:function(Bt,V,W){let Ht,te=0,_e="";if("string"==typeof Bt){const Se=Bt.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===Se)return V.push(`The provided timing value "${Bt}" is invalid.`),{duration:0,delay:0,easing:""};Ht=qe(parseFloat(Se[1]),Se[2]);const ti=Se[3];null!=ti&&(te=qe(parseFloat(ti),Se[4]));const mi=Se[5];mi&&(_e=mi)}else Ht=Bt;if(!W){let Se=!1,ti=V.length;Ht<0&&(V.push("Duration values below 0 are not allowed for this animation step."),Se=!0),te<0&&(V.push("Delay values below 0 are not allowed for this animation step."),Se=!0),Se&&V.splice(ti,0,`The provided timing value "${Bt}" is invalid.`)}return{duration:Ht,delay:te,easing:_e}}(Bt,V,W)}function Ji(Bt,V={}){return Object.keys(Bt).forEach(W=>{V[W]=Bt[W]}),V}function ui(Bt,V,W={}){if(V)for(let ft in Bt)W[ft]=Bt[ft];else Ji(Bt,W);return W}function Oe(Bt,V,W){return W?V+":"+W+";":""}function Be(Bt){let V="";for(let W=0;W<Bt.style.length;W++){const ft=Bt.style.item(W);V+=Oe(0,ft,Bt.style.getPropertyValue(ft))}for(const W in Bt.style)Bt.style.hasOwnProperty(W)&&!W.startsWith("_")&&(V+=Oe(0,zt(W),Bt.style[W]));Bt.setAttribute("style",V)}function Ft(Bt,V,W){Bt.style&&(Object.keys(V).forEach(ft=>{const Ht=at(ft);W&&!W.hasOwnProperty(ft)&&(W[ft]=Bt.style[Ht]),Bt.style[Ht]=V[ft]}),n()&&Be(Bt))}function ie(Bt,V){Bt.style&&(Object.keys(V).forEach(W=>{const ft=at(W);Bt.style[ft]=""}),n()&&Be(Bt))}function hi(Bt){return Array.isArray(Bt)?1==Bt.length?Bt[0]:(0,e.vP)(Bt):Bt}const di=new RegExp("{{\\s*(.+?)\\s*}}","g");function ge(Bt){let V=[];if("string"==typeof Bt){let W;for(;W=di.exec(Bt);)V.push(W[1]);di.lastIndex=0}return V}function Ve(Bt,V,W){const ft=Bt.toString(),Ht=ft.replace(di,(te,_e)=>{let Se=V[_e];return V.hasOwnProperty(_e)||(W.push(`Please provide a value for the animation param ${_e}`),Se=""),Se.toString()});return Ht==ft?Bt:Ht}function Zt(Bt){const V=[];let W=Bt.next();for(;!W.done;)V.push(W.value),W=Bt.next();return V}const $=/-+([a-z0-9])/g;function at(Bt){return Bt.replace($,(...V)=>V[1].toUpperCase())}function zt(Bt){return Bt.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Qt(Bt,V){return 0===Bt||0===V}function ye(Bt,V,W){const ft=Object.keys(W);if(ft.length&&V.length){let te=V[0],_e=[];if(ft.forEach(Se=>{te.hasOwnProperty(Se)||_e.push(Se),te[Se]=W[Se]}),_e.length)for(var Ht=1;Ht<V.length;Ht++){let Se=V[Ht];_e.forEach(function(ti){Se[ti]=ni(Bt,ti)})}}return V}function Ee(Bt,V,W){switch(V.type){case 7:return Bt.visitTrigger(V,W);case 0:return Bt.visitState(V,W);case 1:return Bt.visitTransition(V,W);case 2:return Bt.visitSequence(V,W);case 3:return Bt.visitGroup(V,W);case 4:return Bt.visitAnimate(V,W);case 5:return Bt.visitKeyframes(V,W);case 6:return Bt.visitStyle(V,W);case 8:return Bt.visitReference(V,W);case 9:return Bt.visitAnimateChild(V,W);case 10:return Bt.visitAnimateRef(V,W);case 11:return Bt.visitQuery(V,W);case 12:return Bt.visitStagger(V,W);default:throw new Error(`Unable to resolve animation metadata node #${V.type}`)}}function ni(Bt,V){return window.getComputedStyle(Bt)[V]}function Mi(Bt,V){const W=[];return"string"==typeof Bt?Bt.split(/\s*,\s*/).forEach(ft=>function(Bt,V,W){if(":"==Bt[0]){const ti=function(Bt,V){switch(Bt){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(W,ft)=>parseFloat(ft)>parseFloat(W);case":decrement":return(W,ft)=>parseFloat(ft)<parseFloat(W);default:return V.push(`The transition alias value "${Bt}" is not supported`),"* => *"}}(Bt,W);if("function"==typeof ti)return void V.push(ti);Bt=ti}const ft=Bt.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==ft||ft.length<4)return W.push(`The provided transition expression "${Bt}" is not supported`),V;const Ht=ft[1],te=ft[2],_e=ft[3];V.push(ne(Ht,_e));"<"==te[0]&&!("*"==Ht&&"*"==_e)&&V.push(ne(_e,Ht))}(ft,W,V)):W.push(Bt),W}const Ue=new Set(["true","1"]),Ke=new Set(["false","0"]);function ne(Bt,V){const W=Ue.has(Bt)||Ke.has(Bt),ft=Ue.has(V)||Ke.has(V);return(Ht,te)=>{let _e="*"==Bt||Bt==Ht,Se="*"==V||V==te;return!_e&&W&&"boolean"==typeof Ht&&(_e=Ht?Ue.has(Bt):Ke.has(Bt)),!Se&&ft&&"boolean"==typeof te&&(Se=te?Ue.has(V):Ke.has(V)),_e&&Se}}const ii=new RegExp("s*:selfs*,?","g");function yi(Bt,V,W){return new ji(Bt).build(V,W)}class ji{constructor(V){this._driver=V}build(V,W){const ft=new Re(W);return this._resetContextStyleTimingState(ft),Ee(this,hi(V),ft)}_resetContextStyleTimingState(V){V.currentQuerySelector="",V.collectedStyles={},V.collectedStyles[""]={},V.currentTime=0}visitTrigger(V,W){let ft=W.queryCount=0,Ht=W.depCount=0;const te=[],_e=[];return"@"==V.name.charAt(0)&&W.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),V.definitions.forEach(Se=>{if(this._resetContextStyleTimingState(W),0==Se.type){const ti=Se,mi=ti.name;mi.toString().split(/\s*,\s*/).forEach(Gi=>{ti.name=Gi,te.push(this.visitState(ti,W))}),ti.name=mi}else if(1==Se.type){const ti=this.visitTransition(Se,W);ft+=ti.queryCount,Ht+=ti.depCount,_e.push(ti)}else W.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:V.name,states:te,transitions:_e,queryCount:ft,depCount:Ht,options:null}}visitState(V,W){const ft=this.visitStyle(V.styles,W),Ht=V.options&&V.options.params||null;if(ft.containsDynamicStyles){const te=new Set,_e=Ht||{};if(ft.styles.forEach(Se=>{if(kt(Se)){const ti=Se;Object.keys(ti).forEach(mi=>{ge(ti[mi]).forEach(Gi=>{_e.hasOwnProperty(Gi)||te.add(Gi)})})}}),te.size){const Se=Zt(te.values());W.errors.push(`state("${V.name}", ...) must define default values for all the following style substitutions: ${Se.join(", ")}`)}}return{type:0,name:V.name,style:ft,options:Ht?{params:Ht}:null}}visitTransition(V,W){W.queryCount=0,W.depCount=0;const ft=Ee(this,hi(V.animation),W);return{type:1,matchers:Mi(V.expr,W.errors),animation:ft,queryCount:W.queryCount,depCount:W.depCount,options:Gt(V.options)}}visitSequence(V,W){return{type:2,steps:V.steps.map(ft=>Ee(this,ft,W)),options:Gt(V.options)}}visitGroup(V,W){const ft=W.currentTime;let Ht=0;const te=V.steps.map(_e=>{W.currentTime=ft;const Se=Ee(this,_e,W);return Ht=Math.max(Ht,W.currentTime),Se});return W.currentTime=Ht,{type:3,steps:te,options:Gt(V.options)}}visitAnimate(V,W){const ft=function(Bt,V){let W=null;if(Bt.hasOwnProperty("duration"))W=Bt;else if("number"==typeof Bt)return be(oi(Bt,V).duration,0,"");const ft=Bt;if(ft.split(/\s+/).some(te=>"{"==te.charAt(0)&&"{"==te.charAt(1))){const te=be(0,0,"");return te.dynamic=!0,te.strValue=ft,te}return W=W||oi(ft,V),be(W.duration,W.delay,W.easing)}(V.timings,W.errors);W.currentAnimateTimings=ft;let Ht,te=V.styles?V.styles:(0,e.oB)({});if(5==te.type)Ht=this.visitKeyframes(te,W);else{let _e=V.styles,Se=!1;if(!_e){Se=!0;const mi={};ft.easing&&(mi.easing=ft.easing),_e=(0,e.oB)(mi)}W.currentTime+=ft.duration+ft.delay;const ti=this.visitStyle(_e,W);ti.isEmptyStep=Se,Ht=ti}return W.currentAnimateTimings=null,{type:4,timings:ft,style:Ht,options:null}}visitStyle(V,W){const ft=this._makeStyleAst(V,W);return this._validateStyleAst(ft,W),ft}_makeStyleAst(V,W){const ft=[];Array.isArray(V.styles)?V.styles.forEach(_e=>{"string"==typeof _e?_e==e.l3?ft.push(_e):W.errors.push(`The provided style string value ${_e} is not allowed.`):ft.push(_e)}):ft.push(V.styles);let Ht=!1,te=null;return ft.forEach(_e=>{if(kt(_e)){const Se=_e,ti=Se.easing;if(ti&&(te=ti,delete Se.easing),!Ht)for(let mi in Se)if(Se[mi].toString().indexOf("{{")>=0){Ht=!0;break}}}),{type:6,styles:ft,easing:te,offset:V.offset,containsDynamicStyles:Ht,options:null}}_validateStyleAst(V,W){const ft=W.currentAnimateTimings;let Ht=W.currentTime,te=W.currentTime;ft&&te>0&&(te-=ft.duration+ft.delay),V.styles.forEach(_e=>{"string"!=typeof _e&&Object.keys(_e).forEach(Se=>{if(!this._driver.validateStyleProperty(Se))return void W.errors.push(`The provided animation property "${Se}" is not a supported CSS property for animations`);const ti=W.collectedStyles[W.currentQuerySelector],mi=ti[Se];let Gi=!0;mi&&(te!=Ht&&te>=mi.startTime&&Ht<=mi.endTime&&(W.errors.push(`The CSS property "${Se}" that exists between the times of "${mi.startTime}ms" and "${mi.endTime}ms" is also being animated in a parallel animation between the times of "${te}ms" and "${Ht}ms"`),Gi=!1),te=mi.startTime),Gi&&(ti[Se]={startTime:te,endTime:Ht}),W.options&&function(Bt,V,W){const ft=V.params||{},Ht=ge(Bt);Ht.length&&Ht.forEach(te=>{ft.hasOwnProperty(te)||W.push(`Unable to resolve the local animation param ${te} in the given list of values`)})}(_e[Se],W.options,W.errors)})})}visitKeyframes(V,W){const ft={type:5,styles:[],options:null};if(!W.currentAnimateTimings)return W.errors.push("keyframes() must be placed inside of a call to animate()"),ft;let te=0;const _e=[];let Se=!1,ti=!1,mi=0;const Gi=V.steps.map(So=>{const ko=this._makeStyleAst(So,W);let _s=null!=ko.offset?ko.offset:function(Bt){if("string"==typeof Bt)return null;let V=null;if(Array.isArray(Bt))Bt.forEach(W=>{if(kt(W)&&W.hasOwnProperty("offset")){const ft=W;V=parseFloat(ft.offset),delete ft.offset}});else if(kt(Bt)&&Bt.hasOwnProperty("offset")){const W=Bt;V=parseFloat(W.offset),delete W.offset}return V}(ko.styles),qn=0;return null!=_s&&(te++,qn=ko.offset=_s),ti=ti||qn<0||qn>1,Se=Se||qn<mi,mi=qn,_e.push(qn),ko});ti&&W.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),Se&&W.errors.push("Please ensure that all keyframe offsets are in order");const sn=V.steps.length;let In=0;te>0&&te<sn?W.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==te&&(In=1/(sn-1));const Ln=sn-1,_n=W.currentTime,bn=W.currentAnimateTimings,Gn=bn.duration;return Gi.forEach((So,ko)=>{const _s=In>0?ko==Ln?1:In*ko:_e[ko],qn=_s*Gn;W.currentTime=_n+bn.delay+qn,bn.duration=qn,this._validateStyleAst(So,W),So.offset=_s,ft.styles.push(So)}),ft}visitReference(V,W){return{type:8,animation:Ee(this,hi(V.animation),W),options:Gt(V.options)}}visitAnimateChild(V,W){return W.depCount++,{type:9,options:Gt(V.options)}}visitAnimateRef(V,W){return{type:10,animation:this.visitReference(V.animation,W),options:Gt(V.options)}}visitQuery(V,W){const ft=W.currentQuerySelector,Ht=V.options||{};W.queryCount++,W.currentQuery=V;const[te,_e]=function(Bt){const V=!!Bt.split(/\s*,\s*/).find(W=>":self"==W);return V&&(Bt=Bt.replace(ii,"")),[Bt=Bt.replace(/@\*/g,ai).replace(/@\w+/g,W=>ai+"-"+W.substr(1)).replace(/:animating/g,ce),V]}(V.selector);W.currentQuerySelector=ft.length?ft+" "+te:te,x(W.collectedStyles,W.currentQuerySelector,{});const Se=Ee(this,hi(V.animation),W);return W.currentQuery=null,W.currentQuerySelector=ft,{type:11,selector:te,limit:Ht.limit||0,optional:!!Ht.optional,includeSelf:_e,animation:Se,originalSelector:V.selector,options:Gt(V.options)}}visitStagger(V,W){W.currentQuery||W.errors.push("stagger() can only be used inside of query()");const ft="full"===V.timings?{duration:0,delay:0,easing:"full"}:oi(V.timings,W.errors,!0);return{type:12,animation:Ee(this,hi(V.animation),W),timings:ft,options:null}}}class Re{constructor(V){this.errors=V,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function kt(Bt){return!Array.isArray(Bt)&&"object"==typeof Bt}function Gt(Bt){return Bt?(Bt=Ji(Bt)).params&&(Bt.params=function(Bt){return Bt?Ji(Bt):null}(Bt.params)):Bt={},Bt}function be(Bt,V,W){return{duration:Bt,delay:V,easing:W}}function Je(Bt,V,W,ft,Ht,te,_e=null,Se=!1){return{type:1,element:Bt,keyframes:V,preStyleProps:W,postStyleProps:ft,duration:Ht,delay:te,totalTime:Ht+te,easing:_e,subTimeline:Se}}class Pi{constructor(){this._map=new Map}consume(V){let W=this._map.get(V);return W?this._map.delete(V):W=[],W}append(V,W){let ft=this._map.get(V);ft||this._map.set(V,ft=[]),ft.push(...W)}has(V){return this._map.has(V)}clear(){this._map.clear()}}const Wn=new RegExp(":enter","g"),Vn=new RegExp(":leave","g");function Dn(Bt,V,W,ft,Ht,te={},_e={},Se,ti,mi=[]){return(new Do).buildKeyframes(Bt,V,W,ft,Ht,te,_e,Se,ti,mi)}class Do{buildKeyframes(V,W,ft,Ht,te,_e,Se,ti,mi,Gi=[]){mi=mi||new Pi;const sn=new hs(V,W,mi,Ht,te,Gi,[]);sn.options=ti,sn.currentTimeline.setStyles([_e],null,sn.errors,ti),Ee(this,ft,sn);const In=sn.timelines.filter(Ln=>Ln.containsAnimation());if(In.length&&Object.keys(Se).length){const Ln=In[In.length-1];Ln.allowOnlyTimelineStyles()||Ln.setStyles([Se],null,sn.errors,ti)}return In.length?In.map(Ln=>Ln.buildKeyframes()):[Je(W,[],[],[],0,0,"",!1)]}visitTrigger(V,W){}visitState(V,W){}visitTransition(V,W){}visitAnimateChild(V,W){const ft=W.subInstructions.consume(W.element);if(ft){const Ht=W.createSubContext(V.options),te=W.currentTimeline.currentTime,_e=this._visitSubInstructions(ft,Ht,Ht.options);te!=_e&&W.transformIntoNewTimeline(_e)}W.previousNode=V}visitAnimateRef(V,W){const ft=W.createSubContext(V.options);ft.transformIntoNewTimeline(),this.visitReference(V.animation,ft),W.transformIntoNewTimeline(ft.currentTimeline.currentTime),W.previousNode=V}_visitSubInstructions(V,W,ft){let te=W.currentTimeline.currentTime;const _e=null!=ft.duration?Pe(ft.duration):null,Se=null!=ft.delay?Pe(ft.delay):null;return 0!==_e&&V.forEach(ti=>{const mi=W.appendInstructionToTimeline(ti,_e,Se);te=Math.max(te,mi.duration+mi.delay)}),te}visitReference(V,W){W.updateOptions(V.options,!0),Ee(this,V.animation,W),W.previousNode=V}visitSequence(V,W){const ft=W.subContextCount;let Ht=W;const te=V.options;if(te&&(te.params||te.delay)&&(Ht=W.createSubContext(te),Ht.transformIntoNewTimeline(),null!=te.delay)){6==Ht.previousNode.type&&(Ht.currentTimeline.snapshotCurrentStyles(),Ht.previousNode=Eo);const _e=Pe(te.delay);Ht.delayNextStep(_e)}V.steps.length&&(V.steps.forEach(_e=>Ee(this,_e,Ht)),Ht.currentTimeline.applyStylesToKeyframe(),Ht.subContextCount>ft&&Ht.transformIntoNewTimeline()),W.previousNode=V}visitGroup(V,W){const ft=[];let Ht=W.currentTimeline.currentTime;const te=V.options&&V.options.delay?Pe(V.options.delay):0;V.steps.forEach(_e=>{const Se=W.createSubContext(V.options);te&&Se.delayNextStep(te),Ee(this,_e,Se),Ht=Math.max(Ht,Se.currentTimeline.currentTime),ft.push(Se.currentTimeline)}),ft.forEach(_e=>W.currentTimeline.mergeTimelineCollectedStyles(_e)),W.transformIntoNewTimeline(Ht),W.previousNode=V}_visitTiming(V,W){if(V.dynamic){const ft=V.strValue;return oi(W.params?Ve(ft,W.params,W.errors):ft,W.errors)}return{duration:V.duration,delay:V.delay,easing:V.easing}}visitAnimate(V,W){const ft=W.currentAnimateTimings=this._visitTiming(V.timings,W),Ht=W.currentTimeline;ft.delay&&(W.incrementTime(ft.delay),Ht.snapshotCurrentStyles());const te=V.style;5==te.type?this.visitKeyframes(te,W):(W.incrementTime(ft.duration),this.visitStyle(te,W),Ht.applyStylesToKeyframe()),W.currentAnimateTimings=null,W.previousNode=V}visitStyle(V,W){const ft=W.currentTimeline,Ht=W.currentAnimateTimings;!Ht&&ft.getCurrentStyleProperties().length&&ft.forwardFrame();const te=Ht&&Ht.easing||V.easing;V.isEmptyStep?ft.applyEmptyStep(te):ft.setStyles(V.styles,te,W.errors,W.options),W.previousNode=V}visitKeyframes(V,W){const ft=W.currentAnimateTimings,Ht=W.currentTimeline.duration,te=ft.duration,Se=W.createSubContext().currentTimeline;Se.easing=ft.easing,V.styles.forEach(ti=>{Se.forwardTime((ti.offset||0)*te),Se.setStyles(ti.styles,ti.easing,W.errors,W.options),Se.applyStylesToKeyframe()}),W.currentTimeline.mergeTimelineCollectedStyles(Se),W.transformIntoNewTimeline(Ht+te),W.previousNode=V}visitQuery(V,W){const ft=W.currentTimeline.currentTime,Ht=V.options||{},te=Ht.delay?Pe(Ht.delay):0;te&&(6===W.previousNode.type||0==ft&&W.currentTimeline.getCurrentStyleProperties().length)&&(W.currentTimeline.snapshotCurrentStyles(),W.previousNode=Eo);let _e=ft;const Se=W.invokeQuery(V.selector,V.originalSelector,V.limit,V.includeSelf,!!Ht.optional,W.errors);W.currentQueryTotal=Se.length;let ti=null;Se.forEach((mi,Gi)=>{W.currentQueryIndex=Gi;const sn=W.createSubContext(V.options,mi);te&&sn.delayNextStep(te),mi===W.element&&(ti=sn.currentTimeline),Ee(this,V.animation,sn),sn.currentTimeline.applyStylesToKeyframe(),_e=Math.max(_e,sn.currentTimeline.currentTime)}),W.currentQueryIndex=0,W.currentQueryTotal=0,W.transformIntoNewTimeline(_e),ti&&(W.currentTimeline.mergeTimelineCollectedStyles(ti),W.currentTimeline.snapshotCurrentStyles()),W.previousNode=V}visitStagger(V,W){const ft=W.parentContext,Ht=W.currentTimeline,te=V.timings,_e=Math.abs(te.duration),Se=_e*(W.currentQueryTotal-1);let ti=_e*W.currentQueryIndex;switch(te.duration<0?"reverse":te.easing){case"reverse":ti=Se-ti;break;case"full":ti=ft.currentStaggerTime}const Gi=W.currentTimeline;ti&&Gi.delayNextStep(ti);const sn=Gi.currentTime;Ee(this,V.animation,W),W.previousNode=V,ft.currentStaggerTime=Ht.currentTime-sn+(Ht.startTime-ft.currentTimeline.startTime)}}const Eo={};class hs{constructor(V,W,ft,Ht,te,_e,Se,ti){this._driver=V,this.element=W,this.subInstructions=ft,this._enterClassName=Ht,this._leaveClassName=te,this.errors=_e,this.timelines=Se,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Eo,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=ti||new ro(this._driver,W,0),Se.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(V,W){if(!V)return;const ft=V;let Ht=this.options;null!=ft.duration&&(Ht.duration=Pe(ft.duration)),null!=ft.delay&&(Ht.delay=Pe(ft.delay));const te=ft.params;if(te){let _e=Ht.params;_e||(_e=this.options.params={}),Object.keys(te).forEach(Se=>{(!W||!_e.hasOwnProperty(Se))&&(_e[Se]=Ve(te[Se],_e,this.errors))})}}_copyOptions(){const V={};if(this.options){const W=this.options.params;if(W){const ft=V.params={};Object.keys(W).forEach(Ht=>{ft[Ht]=W[Ht]})}}return V}createSubContext(V=null,W,ft){const Ht=W||this.element,te=new hs(this._driver,Ht,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(Ht,ft||0));return te.previousNode=this.previousNode,te.currentAnimateTimings=this.currentAnimateTimings,te.options=this._copyOptions(),te.updateOptions(V),te.currentQueryIndex=this.currentQueryIndex,te.currentQueryTotal=this.currentQueryTotal,te.parentContext=this,this.subContextCount++,te}transformIntoNewTimeline(V){return this.previousNode=Eo,this.currentTimeline=this.currentTimeline.fork(this.element,V),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(V,W,ft){const Ht={duration:null!=W?W:V.duration,delay:this.currentTimeline.currentTime+(null!=ft?ft:0)+V.delay,easing:""},te=new Li(this._driver,V.element,V.keyframes,V.preStyleProps,V.postStyleProps,Ht,V.stretchStartingKeyframe);return this.timelines.push(te),Ht}incrementTime(V){this.currentTimeline.forwardTime(this.currentTimeline.duration+V)}delayNextStep(V){V>0&&this.currentTimeline.delayNextStep(V)}invokeQuery(V,W,ft,Ht,te,_e){let Se=[];if(Ht&&Se.push(this.element),V.length>0){V=(V=V.replace(Wn,"."+this._enterClassName)).replace(Vn,"."+this._leaveClassName);let mi=this._driver.query(this.element,V,1!=ft);0!==ft&&(mi=ft<0?mi.slice(mi.length+ft,mi.length):mi.slice(0,ft)),Se.push(...mi)}return!te&&0==Se.length&&_e.push(`\`query("${W}")\` returned zero elements. (Use \`query("${W}", { optional: true })\` if you wish to allow this.)`),Se}}class ro{constructor(V,W,ft,Ht){this._driver=V,this.element=W,this.startTime=ft,this._elementTimelineStylesLookup=Ht,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(W),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(W,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(V){const W=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||W?(this.forwardTime(this.currentTime+V),W&&this.snapshotCurrentStyles()):this.startTime+=V}fork(V,W){return this.applyStylesToKeyframe(),new ro(this._driver,V,W||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(V){this.applyStylesToKeyframe(),this.duration=V,this._loadKeyframe()}_updateStyle(V,W){this._localTimelineStyles[V]=W,this._globalTimelineStyles[V]=W,this._styleSummary[V]={time:this.currentTime,value:W}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(V){V&&(this._previousKeyframe.easing=V),Object.keys(this._globalTimelineStyles).forEach(W=>{this._backFill[W]=this._globalTimelineStyles[W]||e.l3,this._currentKeyframe[W]=e.l3}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(V,W,ft,Ht){W&&(this._previousKeyframe.easing=W);const te=Ht&&Ht.params||{},_e=function(Bt,V){const W={};let ft;return Bt.forEach(Ht=>{"*"===Ht?(ft=ft||Object.keys(V),ft.forEach(te=>{W[te]=e.l3})):ui(Ht,!1,W)}),W}(V,this._globalTimelineStyles);Object.keys(_e).forEach(Se=>{const ti=Ve(_e[Se],te,ft);this._pendingStyles[Se]=ti,this._localTimelineStyles.hasOwnProperty(Se)||(this._backFill[Se]=this._globalTimelineStyles.hasOwnProperty(Se)?this._globalTimelineStyles[Se]:e.l3),this._updateStyle(Se,ti)})}applyStylesToKeyframe(){const V=this._pendingStyles,W=Object.keys(V);0!=W.length&&(this._pendingStyles={},W.forEach(ft=>{this._currentKeyframe[ft]=V[ft]}),Object.keys(this._localTimelineStyles).forEach(ft=>{this._currentKeyframe.hasOwnProperty(ft)||(this._currentKeyframe[ft]=this._localTimelineStyles[ft])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(V=>{const W=this._localTimelineStyles[V];this._pendingStyles[V]=W,this._updateStyle(V,W)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const V=[];for(let W in this._currentKeyframe)V.push(W);return V}mergeTimelineCollectedStyles(V){Object.keys(V._styleSummary).forEach(W=>{const ft=this._styleSummary[W],Ht=V._styleSummary[W];(!ft||Ht.time>ft.time)&&this._updateStyle(W,Ht.value)})}buildKeyframes(){this.applyStylesToKeyframe();const V=new Set,W=new Set,ft=1===this._keyframes.size&&0===this.duration;let Ht=[];this._keyframes.forEach((Se,ti)=>{const mi=ui(Se,!0);Object.keys(mi).forEach(Gi=>{const sn=mi[Gi];sn==e.k1?V.add(Gi):sn==e.l3&&W.add(Gi)}),ft||(mi.offset=ti/this.duration),Ht.push(mi)});const te=V.size?Zt(V.values()):[],_e=W.size?Zt(W.values()):[];if(ft){const Se=Ht[0],ti=Ji(Se);Se.offset=0,ti.offset=1,Ht=[Se,ti]}return Je(this.element,Ht,te,_e,this.duration,this.startTime,this.easing,!1)}}class Li extends ro{constructor(V,W,ft,Ht,te,_e,Se=!1){super(V,W,_e.delay),this.keyframes=ft,this.preStyleProps=Ht,this.postStyleProps=te,this._stretchStartingKeyframe=Se,this.timings={duration:_e.duration,delay:_e.delay,easing:_e.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let V=this.keyframes,{delay:W,duration:ft,easing:Ht}=this.timings;if(this._stretchStartingKeyframe&&W){const te=[],_e=ft+W,Se=W/_e,ti=ui(V[0],!1);ti.offset=0,te.push(ti);const mi=ui(V[0],!1);mi.offset=pn(Se),te.push(mi);const Gi=V.length-1;for(let sn=1;sn<=Gi;sn++){let In=ui(V[sn],!1);In.offset=pn((W+In.offset*ft)/_e),te.push(In)}ft=_e,W=0,Ht="",V=te}return Je(this.element,V,this.preStyleProps,this.postStyleProps,ft,W,Ht,!0)}}function pn(Bt,V=3){const W=Math.pow(10,V-1);return Math.round(Bt*W)/W}class es{}class Vo extends es{normalizePropertyName(V,W){return at(V)}normalizeStyleValue(V,W,ft,Ht){let te="";const _e=ft.toString().trim();if(xs[W]&&0!==ft&&"0"!==ft)if("number"==typeof ft)te="px";else{const Se=ft.match(/^[+-]?[\d\.]+([a-z]*)$/);Se&&0==Se[1].length&&Ht.push(`Please provide a CSS unit value for ${V}:${ft}`)}return _e+te}}const xs=(()=>function(Bt){const V={};return Bt.forEach(W=>V[W]=!0),V}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function gn(Bt,V,W,ft,Ht,te,_e,Se,ti,mi,Gi,sn,In){return{type:0,element:Bt,triggerName:V,isRemovalTransition:Ht,fromState:W,fromStyles:te,toState:ft,toStyles:_e,timelines:Se,queriedElements:ti,preStyleProps:mi,postStyleProps:Gi,totalTime:sn,errors:In}}const Ge={};class ke{constructor(V,W,ft){this._triggerName=V,this.ast=W,this._stateStyles=ft}match(V,W,ft,Ht){return function(Bt,V,W,ft,Ht){return Bt.some(te=>te(V,W,ft,Ht))}(this.ast.matchers,V,W,ft,Ht)}buildStyles(V,W,ft){const Ht=this._stateStyles["*"],te=this._stateStyles[V],_e=Ht?Ht.buildStyles(W,ft):{};return te?te.buildStyles(W,ft):_e}build(V,W,ft,Ht,te,_e,Se,ti,mi,Gi){const sn=[],In=this.ast.options&&this.ast.options.params||Ge,_n=this.buildStyles(ft,Se&&Se.params||Ge,sn),bn=ti&&ti.params||Ge,Gn=this.buildStyles(Ht,bn,sn),So=new Set,ko=new Map,_s=new Map,qn="void"===Ht,sr={params:Object.assign(Object.assign({},In),bn)},Er=Gi?[]:Dn(V,W,this.ast.animation,te,_e,_n,Gn,sr,mi,sn);let Io=0;if(Er.forEach(Tr=>{Io=Math.max(Tr.duration+Tr.delay,Io)}),sn.length)return gn(W,this._triggerName,ft,Ht,qn,_n,Gn,[],[],ko,_s,Io,sn);Er.forEach(Tr=>{const Ms=Tr.element,jl=x(ko,Ms,{});Tr.preStyleProps.forEach(Bo=>jl[Bo]=!0);const $r=x(_s,Ms,{});Tr.postStyleProps.forEach(Bo=>$r[Bo]=!0),Ms!==W&&So.add(Ms)});const Ws=Zt(So.values());return gn(W,this._triggerName,ft,Ht,qn,_n,Gn,Er,Ws,ko,_s,Io)}}class $e{constructor(V,W,ft){this.styles=V,this.defaultParams=W,this.normalizer=ft}buildStyles(V,W){const ft={},Ht=Ji(this.defaultParams);return Object.keys(V).forEach(te=>{const _e=V[te];null!=_e&&(Ht[te]=_e)}),this.styles.styles.forEach(te=>{if("string"!=typeof te){const _e=te;Object.keys(_e).forEach(Se=>{let ti=_e[Se];ti.length>1&&(ti=Ve(ti,Ht,W));const mi=this.normalizer.normalizePropertyName(Se,W);ti=this.normalizer.normalizeStyleValue(Se,mi,ti,W),ft[mi]=ti})}}),ft}}class on{constructor(V,W,ft){this.name=V,this.ast=W,this._normalizer=ft,this.transitionFactories=[],this.states={},W.states.forEach(Ht=>{this.states[Ht.name]=new $e(Ht.style,Ht.options&&Ht.options.params||{},ft)}),An(this.states,"true","1"),An(this.states,"false","0"),W.transitions.forEach(Ht=>{this.transitionFactories.push(new ke(V,Ht,this.states))}),this.fallbackTransition=function(Bt,V,W){return new ke(Bt,{type:1,animation:{type:2,steps:[],options:null},matchers:[(_e,Se)=>!0],options:null,queryCount:0,depCount:0},V)}(V,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(V,W,ft,Ht){return this.transitionFactories.find(_e=>_e.match(V,W,ft,Ht))||null}matchStyles(V,W,ft){return this.fallbackTransition.buildStyles(V,W,ft)}}function An(Bt,V,W){Bt.hasOwnProperty(V)?Bt.hasOwnProperty(W)||(Bt[W]=Bt[V]):Bt.hasOwnProperty(W)&&(Bt[V]=Bt[W])}const cn=new Pi;class ds{constructor(V,W,ft){this.bodyNode=V,this._driver=W,this._normalizer=ft,this._animations={},this._playersById={},this.players=[]}register(V,W){const ft=[],Ht=yi(this._driver,W,ft);if(ft.length)throw new Error(`Unable to build the animation due to the following errors: ${ft.join("\n")}`);this._animations[V]=Ht}_buildPlayer(V,W,ft){const Ht=V.element,te=r(0,this._normalizer,0,V.keyframes,W,ft);return this._driver.animate(Ht,te,V.duration,V.delay,V.easing,[],!0)}create(V,W,ft={}){const Ht=[],te=this._animations[V];let _e;const Se=new Map;if(te?(_e=Dn(this._driver,W,te,Ne,Xe,{},{},ft,cn,Ht),_e.forEach(Gi=>{const sn=x(Se,Gi.element,{});Gi.postStyleProps.forEach(In=>sn[In]=null)})):(Ht.push("The requested animation doesn't exist or has already been destroyed"),_e=[]),Ht.length)throw new Error(`Unable to create the animation due to the following errors: ${Ht.join("\n")}`);Se.forEach((Gi,sn)=>{Object.keys(Gi).forEach(In=>{Gi[In]=this._driver.computeStyle(sn,In,e.l3)})});const mi=o(_e.map(Gi=>{const sn=Se.get(Gi.element);return this._buildPlayer(Gi,{},sn)}));return this._playersById[V]=mi,mi.onDestroy(()=>this.destroy(V)),this.players.push(mi),mi}destroy(V){const W=this._getPlayer(V);W.destroy(),delete this._playersById[V];const ft=this.players.indexOf(W);ft>=0&&this.players.splice(ft,1)}_getPlayer(V){const W=this._playersById[V];if(!W)throw new Error(`Unable to find the timeline player referenced by ${V}`);return W}listen(V,W,ft,Ht){const te=I(W,"","","");return p(this._getPlayer(V),ft,te,Ht),()=>{}}command(V,W,ft,Ht){if("register"==ft)return void this.register(V,Ht[0]);if("create"==ft)return void this.create(V,W,Ht[0]||{});const te=this._getPlayer(V);switch(ft){case"play":te.play();break;case"pause":te.pause();break;case"reset":te.reset();break;case"restart":te.restart();break;case"finish":te.finish();break;case"init":te.init();break;case"setPosition":te.setPosition(parseFloat(Ht[0]));break;case"destroy":this.destroy(V)}}}const gr="ng-animate-queued",No="ng-animate-disabled",Ao=".ng-animate-disabled",To=[],On={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},is={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},lo="__ng_removed";class ks{constructor(V,W=""){this.namespaceId=W;const ft=V&&V.hasOwnProperty("value");if(this.value=null!=(Bt=ft?V.value:V)?Bt:null,ft){const te=Ji(V);delete te.value,this.options=te}else this.options={};var Bt;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(V){const W=V.params;if(W){const ft=this.options.params;Object.keys(W).forEach(Ht=>{null==ft[Ht]&&(ft[Ht]=W[Ht])})}}}const Co="void",ws=new ks(Co);class ns{constructor(V,W,ft){this.id=V,this.hostElement=W,this._engine=ft,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+V,Ts(W,this._hostClassName)}listen(V,W,ft,Ht){if(!this._triggers.hasOwnProperty(W))throw new Error(`Unable to listen on the animation trigger event "${ft}" because the animation trigger "${W}" doesn't exist!`);if(null==ft||0==ft.length)throw new Error(`Unable to listen on the animation trigger "${W}" because the provided event is undefined!`);if("start"!=(Bt=ft)&&"done"!=Bt)throw new Error(`The provided animation trigger event "${ft}" for the animation trigger "${W}" is not supported!`);var Bt;const te=x(this._elementListeners,V,[]),_e={name:W,phase:ft,callback:Ht};te.push(_e);const Se=x(this._engine.statesByElement,V,{});return Se.hasOwnProperty(W)||(Ts(V,we),Ts(V,we+"-"+W),Se[W]=ws),()=>{this._engine.afterFlush(()=>{const ti=te.indexOf(_e);ti>=0&&te.splice(ti,1),this._triggers[W]||delete Se[W]})}}register(V,W){return!this._triggers[V]&&(this._triggers[V]=W,!0)}_getTrigger(V){const W=this._triggers[V];if(!W)throw new Error(`The provided animation trigger "${V}" has not been registered!`);return W}trigger(V,W,ft,Ht=!0){const te=this._getTrigger(W),_e=new go(this.id,W,V);let Se=this._engine.statesByElement.get(V);Se||(Ts(V,we),Ts(V,we+"-"+W),this._engine.statesByElement.set(V,Se={}));let ti=Se[W];const mi=new ks(ft,this.id);if(!(ft&&ft.hasOwnProperty("value"))&&ti&&mi.absorbOptions(ti.options),Se[W]=mi,ti||(ti=ws),mi.value!==Co&&ti.value===mi.value){if(!function(Bt,V){const W=Object.keys(Bt),ft=Object.keys(V);if(W.length!=ft.length)return!1;for(let Ht=0;Ht<W.length;Ht++){const te=W[Ht];if(!V.hasOwnProperty(te)||Bt[te]!==V[te])return!1}return!0}(ti.params,mi.params)){const bn=[],Gn=te.matchStyles(ti.value,ti.params,bn),So=te.matchStyles(mi.value,mi.params,bn);bn.length?this._engine.reportError(bn):this._engine.afterFlush(()=>{ie(V,Gn),Ft(V,So)})}return}const In=x(this._engine.playersByElement,V,[]);In.forEach(bn=>{bn.namespaceId==this.id&&bn.triggerName==W&&bn.queued&&bn.destroy()});let Ln=te.matchTransition(ti.value,mi.value,V,mi.params),_n=!1;if(!Ln){if(!Ht)return;Ln=te.fallbackTransition,_n=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:V,triggerName:W,transition:Ln,fromState:ti,toState:mi,player:_e,isFallbackTransition:_n}),_n||(Ts(V,gr),_e.onStart(()=>{gs(V,gr)})),_e.onDone(()=>{let bn=this.players.indexOf(_e);bn>=0&&this.players.splice(bn,1);const Gn=this._engine.playersByElement.get(V);if(Gn){let So=Gn.indexOf(_e);So>=0&&Gn.splice(So,1)}}),this.players.push(_e),In.push(_e),_e}deregister(V){delete this._triggers[V],this._engine.statesByElement.forEach((W,ft)=>{delete W[V]}),this._elementListeners.forEach((W,ft)=>{this._elementListeners.set(ft,W.filter(Ht=>Ht.name!=V))})}clearElementCache(V){this._engine.statesByElement.delete(V),this._elementListeners.delete(V);const W=this._engine.playersByElement.get(V);W&&(W.forEach(ft=>ft.destroy()),this._engine.playersByElement.delete(V))}_signalRemovalForInnerTriggers(V,W){const ft=this._engine.driver.query(V,ai,!0);ft.forEach(Ht=>{if(Ht[lo])return;const te=this._engine.fetchNamespacesByElement(Ht);te.size?te.forEach(_e=>_e.triggerLeaveAnimation(Ht,W,!1,!0)):this.clearElementCache(Ht)}),this._engine.afterFlushAnimationsDone(()=>ft.forEach(Ht=>this.clearElementCache(Ht)))}triggerLeaveAnimation(V,W,ft,Ht){const te=this._engine.statesByElement.get(V);if(te){const _e=[];if(Object.keys(te).forEach(Se=>{if(this._triggers[Se]){const ti=this.trigger(V,Se,Co,Ht);ti&&_e.push(ti)}}),_e.length)return this._engine.markElementAsRemoved(this.id,V,!0,W),ft&&o(_e).onDone(()=>this._engine.processLeaveNode(V)),!0}return!1}prepareLeaveAnimationListeners(V){const W=this._elementListeners.get(V),ft=this._engine.statesByElement.get(V);if(W&&ft){const Ht=new Set;W.forEach(te=>{const _e=te.name;if(Ht.has(_e))return;Ht.add(_e);const ti=this._triggers[_e].fallbackTransition,mi=ft[_e]||ws,Gi=new ks(Co),sn=new go(this.id,_e,V);this._engine.totalQueuedPlayers++,this._queue.push({element:V,triggerName:_e,transition:ti,fromState:mi,toState:Gi,player:sn,isFallbackTransition:!0})})}}removeNode(V,W){const ft=this._engine;if(V.childElementCount&&this._signalRemovalForInnerTriggers(V,W),this.triggerLeaveAnimation(V,W,!0))return;let Ht=!1;if(ft.totalAnimations){const te=ft.players.length?ft.playersByQueriedElement.get(V):[];if(te&&te.length)Ht=!0;else{let _e=V;for(;_e=_e.parentNode;)if(ft.statesByElement.get(_e)){Ht=!0;break}}}if(this.prepareLeaveAnimationListeners(V),Ht)ft.markElementAsRemoved(this.id,V,!1,W);else{const te=V[lo];(!te||te===On)&&(ft.afterFlush(()=>this.clearElementCache(V)),ft.destroyInnerAnimations(V),ft._onRemovalComplete(V,W))}}insertNode(V,W){Ts(V,this._hostClassName)}drainQueuedTransitions(V){const W=[];return this._queue.forEach(ft=>{const Ht=ft.player;if(Ht.destroyed)return;const te=ft.element,_e=this._elementListeners.get(te);_e&&_e.forEach(Se=>{if(Se.name==ft.triggerName){const ti=I(te,ft.triggerName,ft.fromState.value,ft.toState.value);ti._data=V,p(ft.player,Se.phase,ti,Se.callback)}}),Ht.markedForDestroy?this._engine.afterFlush(()=>{Ht.destroy()}):W.push(ft)}),this._queue=[],W.sort((ft,Ht)=>{const te=ft.transition.ast.depCount,_e=Ht.transition.ast.depCount;return 0==te||0==_e?te-_e:this._engine.driver.containsElement(ft.element,Ht.element)?1:-1})}destroy(V){this.players.forEach(W=>W.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,V)}elementContainsData(V){let W=!1;return this._elementListeners.has(V)&&(W=!0),W=!!this._queue.find(ft=>ft.element===V)||W,W}}class Oo{constructor(V,W,ft){this.bodyNode=V,this.driver=W,this._normalizer=ft,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(Ht,te)=>{}}_onRemovalComplete(V,W){this.onRemovalComplete(V,W)}get queuedPlayers(){const V=[];return this._namespaceList.forEach(W=>{W.players.forEach(ft=>{ft.queued&&V.push(ft)})}),V}createNamespace(V,W){const ft=new ns(V,W,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,W)?this._balanceNamespaceList(ft,W):(this.newHostElements.set(W,ft),this.collectEnterElement(W)),this._namespaceLookup[V]=ft}_balanceNamespaceList(V,W){const ft=this._namespaceList.length-1;if(ft>=0){let Ht=!1;for(let te=ft;te>=0;te--)if(this.driver.containsElement(this._namespaceList[te].hostElement,W)){this._namespaceList.splice(te+1,0,V),Ht=!0;break}Ht||this._namespaceList.splice(0,0,V)}else this._namespaceList.push(V);return this.namespacesByHostElement.set(W,V),V}register(V,W){let ft=this._namespaceLookup[V];return ft||(ft=this.createNamespace(V,W)),ft}registerTrigger(V,W,ft){let Ht=this._namespaceLookup[V];Ht&&Ht.register(W,ft)&&this.totalAnimations++}destroy(V,W){if(!V)return;const ft=this._fetchNamespace(V);this.afterFlush(()=>{this.namespacesByHostElement.delete(ft.hostElement),delete this._namespaceLookup[V];const Ht=this._namespaceList.indexOf(ft);Ht>=0&&this._namespaceList.splice(Ht,1)}),this.afterFlushAnimationsDone(()=>ft.destroy(W))}_fetchNamespace(V){return this._namespaceLookup[V]}fetchNamespacesByElement(V){const W=new Set,ft=this.statesByElement.get(V);if(ft){const Ht=Object.keys(ft);for(let te=0;te<Ht.length;te++){const _e=ft[Ht[te]].namespaceId;if(_e){const Se=this._fetchNamespace(_e);Se&&W.add(Se)}}}return W}trigger(V,W,ft,Ht){if(ir(W)){const te=this._fetchNamespace(V);if(te)return te.trigger(W,ft,Ht),!0}return!1}insertNode(V,W,ft,Ht){if(!ir(W))return;const te=W[lo];if(te&&te.setForRemoval){te.setForRemoval=!1,te.setForMove=!0;const _e=this.collectedLeaveElements.indexOf(W);_e>=0&&this.collectedLeaveElements.splice(_e,1)}if(V){const _e=this._fetchNamespace(V);_e&&_e.insertNode(W,ft)}Ht&&this.collectEnterElement(W)}collectEnterElement(V){this.collectedEnterElements.push(V)}markElementAsDisabled(V,W){W?this.disabledNodes.has(V)||(this.disabledNodes.add(V),Ts(V,No)):this.disabledNodes.has(V)&&(this.disabledNodes.delete(V),gs(V,No))}removeNode(V,W,ft,Ht){if(ir(W)){const te=V?this._fetchNamespace(V):null;if(te?te.removeNode(W,Ht):this.markElementAsRemoved(V,W,!1,Ht),ft){const _e=this.namespacesByHostElement.get(W);_e&&_e.id!==V&&_e.removeNode(W,Ht)}}else this._onRemovalComplete(W,Ht)}markElementAsRemoved(V,W,ft,Ht){this.collectedLeaveElements.push(W),W[lo]={namespaceId:V,setForRemoval:Ht,hasAnimation:ft,removedBeforeQueried:!1}}listen(V,W,ft,Ht,te){return ir(W)?this._fetchNamespace(V).listen(W,ft,Ht,te):()=>{}}_buildInstruction(V,W,ft,Ht,te){return V.transition.build(this.driver,V.element,V.fromState.value,V.toState.value,ft,Ht,V.fromState.options,V.toState.options,W,te)}destroyInnerAnimations(V){let W=this.driver.query(V,ai,!0);W.forEach(ft=>this.destroyActiveAnimationsForElement(ft)),0!=this.playersByQueriedElement.size&&(W=this.driver.query(V,ce,!0),W.forEach(ft=>this.finishActiveQueriedAnimationOnElement(ft)))}destroyActiveAnimationsForElement(V){const W=this.playersByElement.get(V);W&&W.forEach(ft=>{ft.queued?ft.markedForDestroy=!0:ft.destroy()})}finishActiveQueriedAnimationOnElement(V){const W=this.playersByQueriedElement.get(V);W&&W.forEach(ft=>ft.finish())}whenRenderingDone(){return new Promise(V=>{if(this.players.length)return o(this.players).onDone(()=>V());V()})}processLeaveNode(V){const W=V[lo];if(W&&W.setForRemoval){if(V[lo]=On,W.namespaceId){this.destroyInnerAnimations(V);const ft=this._fetchNamespace(W.namespaceId);ft&&ft.clearElementCache(V)}this._onRemovalComplete(V,W.setForRemoval)}this.driver.matchesElement(V,Ao)&&this.markElementAsDisabled(V,!1),this.driver.query(V,Ao,!0).forEach(ft=>{this.markElementAsDisabled(ft,!1)})}flush(V=-1){let W=[];if(this.newHostElements.size&&(this.newHostElements.forEach((ft,Ht)=>this._balanceNamespaceList(ft,Ht)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let ft=0;ft<this.collectedEnterElements.length;ft++)Ts(this.collectedEnterElements[ft],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const ft=[];try{W=this._flushAnimations(ft,V)}finally{for(let Ht=0;Ht<ft.length;Ht++)ft[Ht]()}}else for(let ft=0;ft<this.collectedLeaveElements.length;ft++)this.processLeaveNode(this.collectedLeaveElements[ft]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(ft=>ft()),this._flushFns=[],this._whenQuietFns.length){const ft=this._whenQuietFns;this._whenQuietFns=[],W.length?o(W).onDone(()=>{ft.forEach(Ht=>Ht())}):ft.forEach(Ht=>Ht())}}reportError(V){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${V.join("\n")}`)}_flushAnimations(V,W){const ft=new Pi,Ht=[],te=new Map,_e=[],Se=new Map,ti=new Map,mi=new Map,Gi=new Set;this.disabledNodes.forEach(tn=>{Gi.add(tn);const hn=this.driver.query(tn,".ng-animate-queued",!0);for(let Tn=0;Tn<hn.length;Tn++)Gi.add(hn[Tn])});const sn=this.bodyNode,In=Array.from(this.statesByElement.keys()),Ln=xr(In,this.collectedEnterElements),_n=new Map;let bn=0;Ln.forEach((tn,hn)=>{const Tn=Ne+bn++;_n.set(hn,Tn),tn.forEach(to=>Ts(to,Tn))});const Gn=[],So=new Set,ko=new Set;for(let tn=0;tn<this.collectedLeaveElements.length;tn++){const hn=this.collectedLeaveElements[tn],Tn=hn[lo];Tn&&Tn.setForRemoval&&(Gn.push(hn),So.add(hn),Tn.hasAnimation?this.driver.query(hn,".ng-star-inserted",!0).forEach(to=>So.add(to)):ko.add(hn))}const _s=new Map,qn=xr(In,Array.from(So));qn.forEach((tn,hn)=>{const Tn=Xe+bn++;_s.set(hn,Tn),tn.forEach(to=>Ts(to,Tn))}),V.push(()=>{Ln.forEach((tn,hn)=>{const Tn=_n.get(hn);tn.forEach(to=>gs(to,Tn))}),qn.forEach((tn,hn)=>{const Tn=_s.get(hn);tn.forEach(to=>gs(to,Tn))}),Gn.forEach(tn=>{this.processLeaveNode(tn)})});const sr=[],Er=[];for(let tn=this._namespaceList.length-1;tn>=0;tn--)this._namespaceList[tn].drainQueuedTransitions(W).forEach(Tn=>{const to=Tn.player,as=Tn.element;if(sr.push(to),this.collectedEnterElements.length){const zs=as[lo];if(zs&&zs.setForMove)return void to.destroy()}const Fs=!sn||!this.driver.containsElement(sn,as),ls=_s.get(as),Mo=_n.get(as),Ro=this._buildInstruction(Tn,ft,Mo,ls,Fs);if(Ro.errors&&Ro.errors.length)Er.push(Ro);else{if(Fs)return to.onStart(()=>ie(as,Ro.fromStyles)),to.onDestroy(()=>Ft(as,Ro.toStyles)),void Ht.push(to);if(Tn.isFallbackTransition)return to.onStart(()=>ie(as,Ro.fromStyles)),to.onDestroy(()=>Ft(as,Ro.toStyles)),void Ht.push(to);Ro.timelines.forEach(zs=>zs.stretchStartingKeyframe=!0),ft.append(as,Ro.timelines),_e.push({instruction:Ro,player:to,element:as}),Ro.queriedElements.forEach(zs=>x(Se,zs,[]).push(to)),Ro.preStyleProps.forEach((zs,Qs)=>{const Ss=Object.keys(zs);if(Ss.length){let qs=ti.get(Qs);qs||ti.set(Qs,qs=new Set),Ss.forEach(Ja=>qs.add(Ja))}}),Ro.postStyleProps.forEach((zs,Qs)=>{const Ss=Object.keys(zs);let qs=mi.get(Qs);qs||mi.set(Qs,qs=new Set),Ss.forEach(Ja=>qs.add(Ja))})}});if(Er.length){const tn=[];Er.forEach(hn=>{tn.push(`@${hn.triggerName} has failed due to:\n`),hn.errors.forEach(Tn=>tn.push(`- ${Tn}\n`))}),sr.forEach(hn=>hn.destroy()),this.reportError(tn)}const Io=new Map,Ws=new Map;_e.forEach(tn=>{const hn=tn.element;ft.has(hn)&&(Ws.set(hn,hn),this._beforeAnimationBuild(tn.player.namespaceId,tn.instruction,Io))}),Ht.forEach(tn=>{const hn=tn.element;this._getPreviousPlayers(hn,!1,tn.namespaceId,tn.triggerName,null).forEach(to=>{x(Io,hn,[]).push(to),to.destroy()})});const Tr=Gn.filter(tn=>bo(tn,ti,mi)),Ms=new Map;oa(Ms,this.driver,ko,mi,e.l3).forEach(tn=>{bo(tn,ti,mi)&&Tr.push(tn)});const $r=new Map;Ln.forEach((tn,hn)=>{oa($r,this.driver,new Set(tn),ti,e.k1)}),Tr.forEach(tn=>{const hn=Ms.get(tn),Tn=$r.get(tn);Ms.set(tn,Object.assign(Object.assign({},hn),Tn))});const Bo=[],Br=[],co={};_e.forEach(tn=>{const{element:hn,player:Tn,instruction:to}=tn;if(ft.has(hn)){if(Gi.has(hn))return Tn.onDestroy(()=>Ft(hn,to.toStyles)),Tn.disabled=!0,Tn.overrideTotalTime(to.totalTime),void Ht.push(Tn);let as=co;if(Ws.size>1){let ls=hn;const Mo=[];for(;ls=ls.parentNode;){const Ro=Ws.get(ls);if(Ro){as=Ro;break}Mo.push(ls)}Mo.forEach(Ro=>Ws.set(Ro,as))}const Fs=this._buildAnimation(Tn.namespaceId,to,Io,te,$r,Ms);if(Tn.setRealPlayer(Fs),as===co)Bo.push(Tn);else{const ls=this.playersByElement.get(as);ls&&ls.length&&(Tn.parentPlayer=o(ls)),Ht.push(Tn)}}else ie(hn,to.fromStyles),Tn.onDestroy(()=>Ft(hn,to.toStyles)),Br.push(Tn),Gi.has(hn)&&Ht.push(Tn)}),Br.forEach(tn=>{const hn=te.get(tn.element);if(hn&&hn.length){const Tn=o(hn);tn.setRealPlayer(Tn)}}),Ht.forEach(tn=>{tn.parentPlayer?tn.syncPlayerEvents(tn.parentPlayer):tn.destroy()});for(let tn=0;tn<Gn.length;tn++){const hn=Gn[tn],Tn=hn[lo];if(gs(hn,Xe),Tn&&Tn.hasAnimation)continue;let to=[];if(Se.size){let Fs=Se.get(hn);Fs&&Fs.length&&to.push(...Fs);let ls=this.driver.query(hn,ce,!0);for(let Mo=0;Mo<ls.length;Mo++){let Ro=Se.get(ls[Mo]);Ro&&Ro.length&&to.push(...Ro)}}const as=to.filter(Fs=>!Fs.destroyed);as.length?Ks(this,hn,as):this.processLeaveNode(hn)}return Gn.length=0,Bo.forEach(tn=>{this.players.push(tn),tn.onDone(()=>{tn.destroy();const hn=this.players.indexOf(tn);this.players.splice(hn,1)}),tn.play()}),Bo}elementContainsData(V,W){let ft=!1;const Ht=W[lo];return Ht&&Ht.setForRemoval&&(ft=!0),this.playersByElement.has(W)&&(ft=!0),this.playersByQueriedElement.has(W)&&(ft=!0),this.statesByElement.has(W)&&(ft=!0),this._fetchNamespace(V).elementContainsData(W)||ft}afterFlush(V){this._flushFns.push(V)}afterFlushAnimationsDone(V){this._whenQuietFns.push(V)}_getPreviousPlayers(V,W,ft,Ht,te){let _e=[];if(W){const Se=this.playersByQueriedElement.get(V);Se&&(_e=Se)}else{const Se=this.playersByElement.get(V);if(Se){const ti=!te||te==Co;Se.forEach(mi=>{mi.queued||!ti&&mi.triggerName!=Ht||_e.push(mi)})}}return(ft||Ht)&&(_e=_e.filter(Se=>!(ft&&ft!=Se.namespaceId||Ht&&Ht!=Se.triggerName))),_e}_beforeAnimationBuild(V,W,ft){const te=W.element,_e=W.isRemovalTransition?void 0:V,Se=W.isRemovalTransition?void 0:W.triggerName;for(const ti of W.timelines){const mi=ti.element,Gi=mi!==te,sn=x(ft,mi,[]);this._getPreviousPlayers(mi,Gi,_e,Se,W.toState).forEach(Ln=>{const _n=Ln.getRealPlayer();_n.beforeDestroy&&_n.beforeDestroy(),Ln.destroy(),sn.push(Ln)})}ie(te,W.fromStyles)}_buildAnimation(V,W,ft,Ht,te,_e){const Se=W.triggerName,ti=W.element,mi=[],Gi=new Set,sn=new Set,In=W.timelines.map(_n=>{const bn=_n.element;Gi.add(bn);const Gn=bn[lo];if(Gn&&Gn.removedBeforeQueried)return new e.ZN(_n.duration,_n.delay);const So=bn!==ti,ko=function(Bt){const V=[];return Cs(Bt,V),V}((ft.get(bn)||To).map(Io=>Io.getRealPlayer())).filter(Io=>!!Io.element&&Io.element===bn),_s=te.get(bn),qn=_e.get(bn),sr=r(0,this._normalizer,0,_n.keyframes,_s,qn),Er=this._buildPlayer(_n,sr,ko);if(_n.subTimeline&&Ht&&sn.add(bn),So){const Io=new go(V,Se,bn);Io.setRealPlayer(Er),mi.push(Io)}return Er});mi.forEach(_n=>{x(this.playersByQueriedElement,_n.element,[]).push(_n),_n.onDone(()=>function(Bt,V,W){let ft;if(Bt instanceof Map){if(ft=Bt.get(V),ft){if(ft.length){const Ht=ft.indexOf(W);ft.splice(Ht,1)}0==ft.length&&Bt.delete(V)}}else if(ft=Bt[V],ft){if(ft.length){const Ht=ft.indexOf(W);ft.splice(Ht,1)}0==ft.length&&delete Bt[V]}return ft}(this.playersByQueriedElement,_n.element,_n))}),Gi.forEach(_n=>Ts(_n,re));const Ln=o(In);return Ln.onDestroy(()=>{Gi.forEach(_n=>gs(_n,re)),Ft(ti,W.toStyles)}),sn.forEach(_n=>{x(Ht,_n,[]).push(Ln)}),Ln}_buildPlayer(V,W,ft){return W.length>0?this.driver.animate(V.element,W,V.duration,V.delay,V.easing,ft):new e.ZN(V.duration,V.delay)}}class go{constructor(V,W,ft){this.namespaceId=V,this.triggerName=W,this.element=ft,this._player=new e.ZN,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(V){this._containsRealPlayer||(this._player=V,Object.keys(this._queuedCallbacks).forEach(W=>{this._queuedCallbacks[W].forEach(ft=>p(V,W,void 0,ft))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(V.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(V){this.totalTime=V}syncPlayerEvents(V){const W=this._player;W.triggerCallback&&V.onStart(()=>W.triggerCallback("start")),V.onDone(()=>this.finish()),V.onDestroy(()=>this.destroy())}_queueEvent(V,W){x(this._queuedCallbacks,V,[]).push(W)}onDone(V){this.queued&&this._queueEvent("done",V),this._player.onDone(V)}onStart(V){this.queued&&this._queueEvent("start",V),this._player.onStart(V)}onDestroy(V){this.queued&&this._queueEvent("destroy",V),this._player.onDestroy(V)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(V){this.queued||this._player.setPosition(V)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(V){const W=this._player;W.triggerCallback&&W.triggerCallback(V)}}function ir(Bt){return Bt&&1===Bt.nodeType}function Jr(Bt,V){const W=Bt.style.display;return Bt.style.display=null!=V?V:"none",W}function oa(Bt,V,W,ft,Ht){const te=[];W.forEach(ti=>te.push(Jr(ti)));const _e=[];ft.forEach((ti,mi)=>{const Gi={};ti.forEach(sn=>{const In=Gi[sn]=V.computeStyle(mi,sn,Ht);(!In||0==In.length)&&(mi[lo]=is,_e.push(mi))}),Bt.set(mi,Gi)});let Se=0;return W.forEach(ti=>Jr(ti,te[Se++])),_e}function xr(Bt,V){const W=new Map;if(Bt.forEach(Se=>W.set(Se,[])),0==V.length)return W;const Ht=new Set(V),te=new Map;function _e(Se){if(!Se)return 1;let ti=te.get(Se);if(ti)return ti;const mi=Se.parentNode;return ti=W.has(mi)?mi:Ht.has(mi)?1:_e(mi),te.set(Se,ti),ti}return V.forEach(Se=>{const ti=_e(Se);1!==ti&&W.get(ti).push(Se)}),W}const zr="$$classes";function Ts(Bt,V){if(Bt.classList)Bt.classList.add(V);else{let W=Bt[zr];W||(W=Bt[zr]={}),W[V]=!0}}function gs(Bt,V){if(Bt.classList)Bt.classList.remove(V);else{let W=Bt[zr];W&&delete W[V]}}function Ks(Bt,V,W){o(W).onDone(()=>Bt.processLeaveNode(V))}function Cs(Bt,V){for(let W=0;W<Bt.length;W++){const ft=Bt[W];ft instanceof e.ZE?Cs(ft.players,V):V.push(ft)}}function bo(Bt,V,W){const ft=W.get(Bt);if(!ft)return!1;let Ht=V.get(Bt);return Ht?ft.forEach(te=>Ht.add(te)):V.set(Bt,ft),W.delete(Bt),!0}class Ls{constructor(V,W,ft){this.bodyNode=V,this._driver=W,this._normalizer=ft,this._triggerCache={},this.onRemovalComplete=(Ht,te)=>{},this._transitionEngine=new Oo(V,W,ft),this._timelineEngine=new ds(V,W,ft),this._transitionEngine.onRemovalComplete=(Ht,te)=>this.onRemovalComplete(Ht,te)}registerTrigger(V,W,ft,Ht,te){const _e=V+"-"+Ht;let Se=this._triggerCache[_e];if(!Se){const ti=[],mi=yi(this._driver,te,ti);if(ti.length)throw new Error(`The animation trigger "${Ht}" has failed to build due to the following errors:\n - ${ti.join("\n - ")}`);Se=function(Bt,V,W){return new on(Bt,V,W)}(Ht,mi,this._normalizer),this._triggerCache[_e]=Se}this._transitionEngine.registerTrigger(W,Ht,Se)}register(V,W){this._transitionEngine.register(V,W)}destroy(V,W){this._transitionEngine.destroy(V,W)}onInsert(V,W,ft,Ht){this._transitionEngine.insertNode(V,W,ft,Ht)}onRemove(V,W,ft,Ht){this._transitionEngine.removeNode(V,W,Ht||!1,ft)}disableAnimations(V,W){this._transitionEngine.markElementAsDisabled(V,W)}process(V,W,ft,Ht){if("@"==ft.charAt(0)){const[te,_e]=k(ft);this._timelineEngine.command(te,W,_e,Ht)}else this._transitionEngine.trigger(V,W,ft,Ht)}listen(V,W,ft,Ht,te){if("@"==ft.charAt(0)){const[_e,Se]=k(ft);return this._timelineEngine.listen(_e,W,Se,te)}return this._transitionEngine.listen(V,W,ft,Ht,te)}flush(V=-1){this._transitionEngine.flush(V)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function _r(Bt,V){let W=null,ft=null;return Array.isArray(V)&&V.length?(W=kr(V[0]),V.length>1&&(ft=kr(V[V.length-1]))):V&&(W=kr(V)),W||ft?new $o(Bt,W,ft):null}let $o=(()=>{class Bt{constructor(W,ft,Ht){this._element=W,this._startStyles=ft,this._endStyles=Ht,this._state=0;let te=Bt.initialStylesByElement.get(W);te||Bt.initialStylesByElement.set(W,te={}),this._initialStyles=te}start(){this._state<1&&(this._startStyles&&Ft(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ft(this._element,this._initialStyles),this._endStyles&&(Ft(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(Bt.initialStylesByElement.delete(this._element),this._startStyles&&(ie(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ie(this._element,this._endStyles),this._endStyles=null),Ft(this._element,this._initialStyles),this._state=3)}}return Bt.initialStylesByElement=new WeakMap,Bt})();function kr(Bt){let V=null;const W=Object.keys(Bt);for(let ft=0;ft<W.length;ft++){const Ht=W[ft];Ds(Ht)&&(V=V||{},V[Ht]=Bt[Ht])}return V}function Ds(Bt){return"display"===Bt||"position"===Bt}const ra="animation",Us="animationend";class Js{constructor(V,W,ft,Ht,te,_e,Se){this._element=V,this._name=W,this._duration=ft,this._delay=Ht,this._easing=te,this._fillMode=_e,this._onDoneFn=Se,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=ti=>this._handleCallback(ti)}apply(){(function(Bt,V){const W=vr(Bt,"").trim();let ft=0;W.length&&(function(Bt,V){let W=0;for(let ft=0;ft<Bt.length;ft++)","===Bt.charAt(ft)&&W++;return W}(W)+1,V=`${W}, ${V}`),Po(Bt,"",V)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),mr(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){ho(this._element,this._name,"paused")}resume(){ho(this._element,this._name,"running")}setPosition(V){const W=aa(this._element,this._name);this._position=V*this._duration,Po(this._element,"Delay",`-${this._position}ms`,W)}getPosition(){return this._position}_handleCallback(V){const W=V._ngTestManualTimestamp||Date.now(),ft=1e3*parseFloat(V.elapsedTime.toFixed(3));V.animationName==this._name&&Math.max(W-this._startTime,0)>=this._delay&&ft>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),mr(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(Bt,V){const ft=vr(Bt,"").split(","),Ht=Lr(ft,V);Ht>=0&&(ft.splice(Ht,1),Po(Bt,"",ft.join(",")))}(this._element,this._name))}}function ho(Bt,V,W){Po(Bt,"PlayState",W,aa(Bt,V))}function aa(Bt,V){const W=vr(Bt,"");return W.indexOf(",")>0?Lr(W.split(","),V):Lr([W],V)}function Lr(Bt,V){for(let W=0;W<Bt.length;W++)if(Bt[W].indexOf(V)>=0)return W;return-1}function mr(Bt,V,W){W?Bt.removeEventListener(Us,V):Bt.addEventListener(Us,V)}function Po(Bt,V,W,ft){const Ht=ra+V;if(null!=ft){const te=Bt.style[Ht];if(te.length){const _e=te.split(",");_e[ft]=W,W=_e.join(",")}}Bt.style[Ht]=W}function vr(Bt,V){return Bt.style[ra+V]||""}class $s{constructor(V,W,ft,Ht,te,_e,Se,ti){this.element=V,this.keyframes=W,this.animationName=ft,this._duration=Ht,this._delay=te,this._finalStyles=Se,this._specialStyles=ti,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=_e||"linear",this.totalTime=Ht+te,this._buildStyler()}onStart(V){this._onStartFns.push(V)}onDone(V){this._onDoneFns.push(V)}onDestroy(V){this._onDestroyFns.push(V)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(V=>V()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(V=>V()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(V=>V()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(V){this._styler.setPosition(V)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new Js(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(V){const W="start"==V?this._onStartFns:this._onDoneFns;W.forEach(ft=>ft()),W.length=0}beforeDestroy(){this.init();const V={};if(this.hasStarted()){const W=this._state>=3;Object.keys(this._finalStyles).forEach(ft=>{"offset"!=ft&&(V[ft]=W?this._finalStyles[ft]:ni(this.element,ft))})}this.currentSnapshot=V}}class Vi extends e.ZN{constructor(V,W){super(),this.element=V,this._startingStyles={},this.__initialized=!1,this._styles=yt(W)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(V=>{this._startingStyles[V]=this.element.style[V]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(V=>this.element.style.setProperty(V,this._styles[V])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(V=>{const W=this._startingStyles[V];W?this.element.style.setProperty(V,W):this.element.style.removeProperty(V)}),this._startingStyles=null,super.destroy())}}class St{constructor(){this._count=0}validateStyleProperty(V){return st(V)}matchesElement(V,W){return nt(V,W)}containsElement(V,W){return Tt(V,W)}query(V,W,ft){return Ct(V,W,ft)}computeStyle(V,W,ft){return window.getComputedStyle(V)[W]}buildKeyframeElement(V,W,ft){ft=ft.map(Se=>yt(Se));let Ht=`@keyframes ${W} {\n`,te="";ft.forEach(Se=>{te=" ";const ti=parseFloat(Se.offset);Ht+=`${te}${100*ti}% {\n`,te+=" ",Object.keys(Se).forEach(mi=>{const Gi=Se[mi];switch(mi){case"offset":return;case"easing":return void(Gi&&(Ht+=`${te}animation-timing-function: ${Gi};\n`));default:return void(Ht+=`${te}${mi}: ${Gi};\n`)}}),Ht+=`${te}}\n`}),Ht+="}\n";const _e=document.createElement("style");return _e.textContent=Ht,_e}animate(V,W,ft,Ht,te,_e=[],Se){const ti=_e.filter(Gn=>Gn instanceof $s),mi={};Qt(ft,Ht)&&ti.forEach(Gn=>{let So=Gn.currentSnapshot;Object.keys(So).forEach(ko=>mi[ko]=So[ko])});const Gi=function(Bt){let V={};return Bt&&(Array.isArray(Bt)?Bt:[Bt]).forEach(ft=>{Object.keys(ft).forEach(Ht=>{"offset"==Ht||"easing"==Ht||(V[Ht]=ft[Ht])})}),V}(W=ye(V,W,mi));if(0==ft)return new Vi(V,Gi);const sn="gen_css_kf_"+this._count++,In=this.buildKeyframeElement(V,sn,W);(function(Bt){var V;const W=null===(V=Bt.getRootNode)||void 0===V?void 0:V.call(Bt);return"undefined"!=typeof ShadowRoot&&W instanceof ShadowRoot?W:document.head})(V).appendChild(In);const _n=_r(V,W),bn=new $s(V,W,sn,ft,Ht,te,Gi,_n);return bn.onDestroy(()=>{var Bt;(Bt=In).parentNode.removeChild(Bt)}),bn}}class Ii{constructor(V,W,ft,Ht){this.element=V,this.keyframes=W,this.options=ft,this._specialStyles=Ht,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=ft.duration,this._delay=ft.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(V=>V()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const V=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,V,this.options),this._finalKeyframe=V.length?V[V.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(V,W,ft){return V.animate(W,ft)}onStart(V){this._onStartFns.push(V)}onDone(V){this._onDoneFns.push(V)}onDestroy(V){this._onDestroyFns.push(V)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(V=>V()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(V=>V()),this._onDestroyFns=[])}setPosition(V){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=V*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const V={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(W=>{"offset"!=W&&(V[W]=this._finished?this._finalKeyframe[W]:ni(this.element,W))}),this.currentSnapshot=V}triggerCallback(V){const W="start"==V?this._onStartFns:this._onDoneFns;W.forEach(ft=>ft()),W.length=0}}class Cn{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(En().toString()),this._cssKeyframesDriver=new St}validateStyleProperty(V){return st(V)}matchesElement(V,W){return nt(V,W)}containsElement(V,W){return Tt(V,W)}query(V,W,ft){return Ct(V,W,ft)}computeStyle(V,W,ft){return window.getComputedStyle(V)[W]}overrideWebAnimationsSupport(V){this._isNativeImpl=V}animate(V,W,ft,Ht,te,_e=[],Se){if(!Se&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(V,W,ft,Ht,te,_e);const Gi={duration:ft,delay:Ht,fill:0==Ht?"both":"forwards"};te&&(Gi.easing=te);const sn={},In=_e.filter(_n=>_n instanceof Ii);Qt(ft,Ht)&&In.forEach(_n=>{let bn=_n.currentSnapshot;Object.keys(bn).forEach(Gn=>sn[Gn]=bn[Gn])});const Ln=_r(V,W=ye(V,W=W.map(_n=>ui(_n,!1)),sn));return new Ii(V,W,Gi,Ln)}}function En(){return t()&&Element.prototype.animate||{}}var ao=v(16274);let _o=(()=>{class Bt extends e._j{constructor(W,ft){super(),this._nextAnimationId=0,this._renderer=W.createRenderer(ft.body,{id:"0",encapsulation:T.ifc.None,styles:[],data:{animation:[]}})}build(W){const ft=this._nextAnimationId.toString();this._nextAnimationId++;const Ht=Array.isArray(W)?(0,e.vP)(W):W;return os(this._renderer,null,ft,"register",[Ht]),new Fo(ft,this._renderer)}}return Bt.\u0275fac=function(W){return new(W||Bt)(T.LFG(T.FYo),T.LFG(ao.K0))},Bt.\u0275prov=T.Yz7({token:Bt,factory:Bt.\u0275fac}),Bt})();class Fo extends e.LC{constructor(V,W){super(),this._id=V,this._renderer=W}create(V,W){return new ca(this._id,V,W||{},this._renderer)}}class ca{constructor(V,W,ft,Ht){this.id=V,this.element=W,this._renderer=Ht,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",ft)}_listen(V,W){return this._renderer.listen(this.element,`@@${this.id}:${V}`,W)}_command(V,...W){return os(this._renderer,this.element,this.id,V,W)}onDone(V){this._listen("done",V)}onStart(V){this._listen("start",V)}onDestroy(V){this._listen("destroy",V)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(V){this._command("setPosition",V)}getPosition(){var V,W;return null!==(W=null===(V=this._renderer.engine.players[+this.id])||void 0===V?void 0:V.getPosition())&&void 0!==W?W:0}}function os(Bt,V,W,ft,Ht){return Bt.setProperty(V,`@@${W}:${ft}`,Ht)}const Gs="@.disabled";let un=(()=>{class Bt{constructor(W,ft,Ht){this.delegate=W,this.engine=ft,this._zone=Ht,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),ft.onRemovalComplete=(te,_e)=>{_e&&_e.parentNode(te)&&_e.removeChild(te.parentNode,te)}}createRenderer(W,ft){const te=this.delegate.createRenderer(W,ft);if(!(W&&ft&&ft.data&&ft.data.animation)){let Gi=this._rendererCache.get(te);return Gi||(Gi=new Pr("",te,this.engine),this._rendererCache.set(te,Gi)),Gi}const _e=ft.id,Se=ft.id+"-"+this._currentId;this._currentId++,this.engine.register(Se,W);const ti=Gi=>{Array.isArray(Gi)?Gi.forEach(ti):this.engine.registerTrigger(_e,Se,W,Gi.name,Gi)};return ft.data.animation.forEach(ti),new or(this,Se,te,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(W,ft,Ht){W>=0&&W<this._microtaskId?this._zone.run(()=>ft(Ht)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(te=>{const[_e,Se]=te;_e(Se)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([ft,Ht]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return Bt.\u0275fac=function(W){return new(W||Bt)(T.LFG(T.FYo),T.LFG(Ls),T.LFG(T.R0b))},Bt.\u0275prov=T.Yz7({token:Bt,factory:Bt.\u0275fac}),Bt})();class Pr{constructor(V,W,ft){this.namespaceId=V,this.delegate=W,this.engine=ft,this.destroyNode=this.delegate.destroyNode?Ht=>W.destroyNode(Ht):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(V,W){return this.delegate.createElement(V,W)}createComment(V){return this.delegate.createComment(V)}createText(V){return this.delegate.createText(V)}appendChild(V,W){this.delegate.appendChild(V,W),this.engine.onInsert(this.namespaceId,W,V,!1)}insertBefore(V,W,ft,Ht=!0){this.delegate.insertBefore(V,W,ft),this.engine.onInsert(this.namespaceId,W,V,Ht)}removeChild(V,W,ft){this.engine.onRemove(this.namespaceId,W,this.delegate,ft)}selectRootElement(V,W){return this.delegate.selectRootElement(V,W)}parentNode(V){return this.delegate.parentNode(V)}nextSibling(V){return this.delegate.nextSibling(V)}setAttribute(V,W,ft,Ht){this.delegate.setAttribute(V,W,ft,Ht)}removeAttribute(V,W,ft){this.delegate.removeAttribute(V,W,ft)}addClass(V,W){this.delegate.addClass(V,W)}removeClass(V,W){this.delegate.removeClass(V,W)}setStyle(V,W,ft,Ht){this.delegate.setStyle(V,W,ft,Ht)}removeStyle(V,W,ft){this.delegate.removeStyle(V,W,ft)}setProperty(V,W,ft){"@"==W.charAt(0)&&W==Gs?this.disableAnimations(V,!!ft):this.delegate.setProperty(V,W,ft)}setValue(V,W){this.delegate.setValue(V,W)}listen(V,W,ft){return this.delegate.listen(V,W,ft)}disableAnimations(V,W){this.engine.disableAnimations(V,W)}}class or extends Pr{constructor(V,W,ft,Ht){super(W,ft,Ht),this.factory=V,this.namespaceId=W}setProperty(V,W,ft){"@"==W.charAt(0)?"."==W.charAt(1)&&W==Gs?this.disableAnimations(V,ft=void 0===ft||!!ft):this.engine.process(this.namespaceId,V,W.substr(1),ft):this.delegate.setProperty(V,W,ft)}listen(V,W,ft){if("@"==W.charAt(0)){const Ht=function(Bt){switch(Bt){case"body":return document.body;case"document":return document;case"window":return window;default:return Bt}}(V);let te=W.substr(1),_e="";return"@"!=te.charAt(0)&&([te,_e]=function(Bt){const V=Bt.indexOf(".");return[Bt.substring(0,V),Bt.substr(V+1)]}(te)),this.engine.listen(this.namespaceId,Ht,te,_e,Se=>{this.factory.scheduleListenerCallback(Se._data||-1,ft,Se)})}return this.delegate.listen(V,W,ft)}}let hl=(()=>{class Bt extends Ls{constructor(W,ft,Ht){super(W.body,ft,Ht)}ngOnDestroy(){this.flush()}}return Bt.\u0275fac=function(W){return new(W||Bt)(T.LFG(ao.K0),T.LFG(_t),T.LFG(es))},Bt.\u0275prov=T.Yz7({token:Bt,factory:Bt.\u0275fac}),Bt})();const Rn=new T.OlP("AnimationModuleType"),ua=[{provide:e._j,useClass:_o},{provide:es,useFactory:function(){return new Vo}},{provide:Ls,useClass:hl},{provide:T.FYo,useFactory:function(Bt,V,W){return new un(Bt,V,W)},deps:[a.se,Ls,T.R0b]}],Xo=[{provide:_t,useFactory:function(){return"function"==typeof En()?new Cn:new St}},{provide:Rn,useValue:"BrowserAnimations"},...ua],yr=[{provide:_t,useClass:gt},{provide:Rn,useValue:"NoopAnimations"},...ua];let ha=(()=>{class Bt{static withConfig(W){return{ngModule:Bt,providers:W.disableAnimations?yr:Xo}}}return Bt.\u0275fac=function(W){return new(W||Bt)},Bt.\u0275mod=T.oAB({type:Bt}),Bt.\u0275inj=T.cJS({providers:Xo,imports:[a.b2]}),Bt})()},93220:(B,U,v)=>{"use strict";v.d(U,{b2:()=>Pi,H7:()=>ii,Dx:()=>Vn,q6:()=>be,se:()=>Ji});var T=v(16274),a=v(42741);class e extends T.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class t extends e{static makeCurrent(){(0,T.HT)(new t)}onAndCancel(ke,pe,$e){return ke.addEventListener(pe,$e,!1),()=>{ke.removeEventListener(pe,$e,!1)}}dispatchEvent(ke,pe){ke.dispatchEvent(pe)}remove(ke){ke.parentNode&&ke.parentNode.removeChild(ke)}createElement(ke,pe){return(pe=pe||this.getDefaultDocument()).createElement(ke)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ke){return ke.nodeType===Node.ELEMENT_NODE}isShadowRoot(ke){return ke instanceof DocumentFragment}getGlobalEventTarget(ke,pe){return"window"===pe?window:"document"===pe?ke:"body"===pe?ke.body:null}getBaseHref(ke){const pe=(n=n||document.querySelector("base"),n?n.getAttribute("href"):null);return null==pe?null:function(Ge){r=r||document.createElement("a"),r.setAttribute("href",Ge);const ke=r.pathname;return"/"===ke.charAt(0)?ke:`/${ke}`}(pe)}resetBaseElement(){n=null}getUserAgent(){return window.navigator.userAgent}getCookie(ke){return(0,T.Mx)(document.cookie,ke)}}let r,n=null;const b=new a.OlP("TRANSITION_ID"),x=[{provide:a.ip1,useFactory:function(Ge,ke,pe){return()=>{pe.get(a.CZH).donePromise.then(()=>{const $e=(0,T.q)(),_i=ke.querySelectorAll(`style[ng-transition="${Ge}"]`);for(let on=0;on<_i.length;on++)$e.remove(_i[on])})}},deps:[b,T.K0,a.zs3],multi:!0}];class k{static init(){(0,a.VLi)(new k)}addToWindow(ke){a.dqk.getAngularTestability=($e,_i=!0)=>{const on=ke.findTestabilityInTree($e,_i);if(null==on)throw new Error("Could not find testability for element.");return on},a.dqk.getAllAngularTestabilities=()=>ke.getAllTestabilities(),a.dqk.getAllAngularRootElements=()=>ke.getAllRootElements(),a.dqk.frameworkStabilizers||(a.dqk.frameworkStabilizers=[]),a.dqk.frameworkStabilizers.push($e=>{const _i=a.dqk.getAllAngularTestabilities();let on=_i.length,fn=!1;const An=function(cn){fn=fn||cn,on--,0==on&&$e(fn)};_i.forEach(function(cn){cn.whenStable(An)})})}findTestabilityInTree(ke,pe,$e){if(null==pe)return null;const _i=ke.getTestability(pe);return null!=_i?_i:$e?(0,T.q)().isShadowRoot(pe)?this.findTestabilityInTree(ke,pe.host,!0):this.findTestabilityInTree(ke,pe.parentElement,!0):null}}let Y=(()=>{class Ge{build(){return new XMLHttpRequest}}return Ge.\u0275fac=function(pe){return new(pe||Ge)},Ge.\u0275prov=a.Yz7({token:Ge,factory:Ge.\u0275fac}),Ge})();const gt=new a.OlP("EventManagerPlugins");let _t=(()=>{class Ge{constructor(pe,$e){this._zone=$e,this._eventNameToPlugin=new Map,pe.forEach(_i=>_i.manager=this),this._plugins=pe.slice().reverse()}addEventListener(pe,$e,_i){return this._findPluginFor($e).addEventListener(pe,$e,_i)}addGlobalEventListener(pe,$e,_i){return this._findPluginFor($e).addGlobalEventListener(pe,$e,_i)}getZone(){return this._zone}_findPluginFor(pe){const $e=this._eventNameToPlugin.get(pe);if($e)return $e;const _i=this._plugins;for(let on=0;on<_i.length;on++){const fn=_i[on];if(fn.supports(pe))return this._eventNameToPlugin.set(pe,fn),fn}throw new Error(`No event manager plugin found for event ${pe}`)}}return Ge.\u0275fac=function(pe){return new(pe||Ge)(a.LFG(gt),a.LFG(a.R0b))},Ge.\u0275prov=a.Yz7({token:Ge,factory:Ge.\u0275fac}),Ge})();class Jt{constructor(ke){this._doc=ke}addGlobalEventListener(ke,pe,$e){const _i=(0,T.q)().getGlobalEventTarget(this._doc,ke);if(!_i)throw new Error(`Unsupported event target ${_i} for event ${pe}`);return this.addEventListener(_i,pe,$e)}}let Pt=(()=>{class Ge{constructor(){this._stylesSet=new Set}addStyles(pe){const $e=new Set;pe.forEach(_i=>{this._stylesSet.has(_i)||(this._stylesSet.add(_i),$e.add(_i))}),this.onStylesAdded($e)}onStylesAdded(pe){}getAllStyles(){return Array.from(this._stylesSet)}}return Ge.\u0275fac=function(pe){return new(pe||Ge)},Ge.\u0275prov=a.Yz7({token:Ge,factory:Ge.\u0275fac}),Ge})(),oe=(()=>{class Ge extends Pt{constructor(pe){super(),this._doc=pe,this._hostNodes=new Map,this._hostNodes.set(pe.head,[])}_addStylesToHost(pe,$e,_i){pe.forEach(on=>{const fn=this._doc.createElement("style");fn.textContent=on,_i.push($e.appendChild(fn))})}addHost(pe){const $e=[];this._addStylesToHost(this._stylesSet,pe,$e),this._hostNodes.set(pe,$e)}removeHost(pe){const $e=this._hostNodes.get(pe);$e&&$e.forEach(Ne),this._hostNodes.delete(pe)}onStylesAdded(pe){this._hostNodes.forEach(($e,_i)=>{this._addStylesToHost(pe,_i,$e)})}ngOnDestroy(){this._hostNodes.forEach(pe=>pe.forEach(Ne))}}return Ge.\u0275fac=function(pe){return new(pe||Ge)(a.LFG(T.K0))},Ge.\u0275prov=a.Yz7({token:Ge,factory:Ge.\u0275fac}),Ge})();function Ne(Ge){(0,T.q)().remove(Ge)}const Xe={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Ce=/%COMP%/g;function qe(Ge,ke,pe){for(let $e=0;$e<ke.length;$e++){let _i=ke[$e];Array.isArray(_i)?qe(Ge,_i,pe):(_i=_i.replace(Ce,Ge),pe.push(_i))}return pe}function oi(Ge){return ke=>{if("__ngUnwrap__"===ke)return Ge;!1===Ge(ke)&&(ke.preventDefault(),ke.returnValue=!1)}}let Ji=(()=>{class Ge{constructor(pe,$e,_i){this.eventManager=pe,this.sharedStylesHost=$e,this.appId=_i,this.rendererByCompId=new Map,this.defaultRenderer=new Ni(pe)}createRenderer(pe,$e){if(!pe||!$e)return this.defaultRenderer;switch($e.encapsulation){case a.ifc.Emulated:{let _i=this.rendererByCompId.get($e.id);return _i||(_i=new Ft(this.eventManager,this.sharedStylesHost,$e,this.appId),this.rendererByCompId.set($e.id,_i)),_i.applyToHost(pe),_i}case 1:case a.ifc.ShadowDom:return new ie(this.eventManager,this.sharedStylesHost,pe,$e);default:if(!this.rendererByCompId.has($e.id)){const _i=qe($e.id,$e.styles,[]);this.sharedStylesHost.addStyles(_i),this.rendererByCompId.set($e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return Ge.\u0275fac=function(pe){return new(pe||Ge)(a.LFG(_t),a.LFG(oe),a.LFG(a.AFp))},Ge.\u0275prov=a.Yz7({token:Ge,factory:Ge.\u0275fac}),Ge})();class Ni{constructor(ke){this.eventManager=ke,this.data=Object.create(null)}destroy(){}createElement(ke,pe){return pe?document.createElementNS(Xe[pe]||pe,ke):document.createElement(ke)}createComment(ke){return document.createComment(ke)}createText(ke){return document.createTextNode(ke)}appendChild(ke,pe){ke.appendChild(pe)}insertBefore(ke,pe,$e){ke&&ke.insertBefore(pe,$e)}removeChild(ke,pe){ke&&ke.removeChild(pe)}selectRootElement(ke,pe){let $e="string"==typeof ke?document.querySelector(ke):ke;if(!$e)throw new Error(`The selector "${ke}" did not match any elements`);return pe||($e.textContent=""),$e}parentNode(ke){return ke.parentNode}nextSibling(ke){return ke.nextSibling}setAttribute(ke,pe,$e,_i){if(_i){pe=_i+":"+pe;const on=Xe[_i];on?ke.setAttributeNS(on,pe,$e):ke.setAttribute(pe,$e)}else ke.setAttribute(pe,$e)}removeAttribute(ke,pe,$e){if($e){const _i=Xe[$e];_i?ke.removeAttributeNS(_i,pe):ke.removeAttribute(`${$e}:${pe}`)}else ke.removeAttribute(pe)}addClass(ke,pe){ke.classList.add(pe)}removeClass(ke,pe){ke.classList.remove(pe)}setStyle(ke,pe,$e,_i){_i&(a.JOm.DashCase|a.JOm.Important)?ke.style.setProperty(pe,$e,_i&a.JOm.Important?"important":""):ke.style[pe]=$e}removeStyle(ke,pe,$e){$e&a.JOm.DashCase?ke.style.removeProperty(pe):ke.style[pe]=""}setProperty(ke,pe,$e){ke[pe]=$e}setValue(ke,pe){ke.nodeValue=pe}listen(ke,pe,$e){return"string"==typeof ke?this.eventManager.addGlobalEventListener(ke,pe,oi($e)):this.eventManager.addEventListener(ke,pe,oi($e))}}class Ft extends Ni{constructor(ke,pe,$e,_i){super(ke),this.component=$e;const on=qe(_i+"-"+$e.id,$e.styles,[]);pe.addStyles(on),this.contentAttr="_ngcontent-%COMP%".replace(Ce,_i+"-"+$e.id),this.hostAttr="_nghost-%COMP%".replace(Ce,_i+"-"+$e.id)}applyToHost(ke){super.setAttribute(ke,this.hostAttr,"")}createElement(ke,pe){const $e=super.createElement(ke,pe);return super.setAttribute($e,this.contentAttr,""),$e}}class ie extends Ni{constructor(ke,pe,$e,_i){super(ke),this.sharedStylesHost=pe,this.hostEl=$e,this.shadowRoot=$e.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const on=qe(_i.id,_i.styles,[]);for(let fn=0;fn<on.length;fn++){const An=document.createElement("style");An.textContent=on[fn],this.shadowRoot.appendChild(An)}}nodeOrShadowRoot(ke){return ke===this.hostEl?this.shadowRoot:ke}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(ke,pe){return super.appendChild(this.nodeOrShadowRoot(ke),pe)}insertBefore(ke,pe,$e){return super.insertBefore(this.nodeOrShadowRoot(ke),pe,$e)}removeChild(ke,pe){return super.removeChild(this.nodeOrShadowRoot(ke),pe)}parentNode(ke){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ke)))}}let hi=(()=>{class Ge extends Jt{constructor(pe){super(pe)}supports(pe){return!0}addEventListener(pe,$e,_i){return pe.addEventListener($e,_i,!1),()=>this.removeEventListener(pe,$e,_i)}removeEventListener(pe,$e,_i){return pe.removeEventListener($e,_i)}}return Ge.\u0275fac=function(pe){return new(pe||Ge)(a.LFG(T.K0))},Ge.\u0275prov=a.Yz7({token:Ge,factory:Ge.\u0275fac}),Ge})();const ye=["alt","control","meta","shift"],ni={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Di={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ke={alt:Ge=>Ge.altKey,control:Ge=>Ge.ctrlKey,meta:Ge=>Ge.metaKey,shift:Ge=>Ge.shiftKey};let ne=(()=>{class Ge extends Jt{constructor(pe){super(pe)}supports(pe){return null!=Ge.parseEventName(pe)}addEventListener(pe,$e,_i){const on=Ge.parseEventName($e),fn=Ge.eventCallback(on.fullKey,_i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,T.q)().onAndCancel(pe,on.domEventName,fn))}static parseEventName(pe){const $e=pe.toLowerCase().split("."),_i=$e.shift();if(0===$e.length||"keydown"!==_i&&"keyup"!==_i)return null;const on=Ge._normalizeKey($e.pop());let fn="";if(ye.forEach(cn=>{const ds=$e.indexOf(cn);ds>-1&&($e.splice(ds,1),fn+=cn+".")}),fn+=on,0!=$e.length||0===on.length)return null;const An={};return An.domEventName=_i,An.fullKey=fn,An}static getEventFullKey(pe){let $e="",_i=function(Ge){let ke=Ge.key;if(null==ke){if(ke=Ge.keyIdentifier,null==ke)return"Unidentified";ke.startsWith("U+")&&(ke=String.fromCharCode(parseInt(ke.substring(2),16)),3===Ge.location&&Di.hasOwnProperty(ke)&&(ke=Di[ke]))}return ni[ke]||ke}(pe);return _i=_i.toLowerCase()," "===_i?_i="space":"."===_i&&(_i="dot"),ye.forEach(on=>{on!=_i&&Ke[on](pe)&&($e+=on+".")}),$e+=_i,$e}static eventCallback(pe,$e,_i){return on=>{Ge.getEventFullKey(on)===pe&&_i.runGuarded(()=>$e(on))}}static _normalizeKey(pe){switch(pe){case"esc":return"escape";default:return pe}}}return Ge.\u0275fac=function(pe){return new(pe||Ge)(a.LFG(T.K0))},Ge.\u0275prov=a.Yz7({token:Ge,factory:Ge.\u0275fac}),Ge})(),ii=(()=>{class Ge{}return Ge.\u0275fac=function(pe){return new(pe||Ge)},Ge.\u0275prov=(0,a.Yz7)({factory:function(){return(0,a.LFG)(Zi)},token:Ge,providedIn:"root"}),Ge})(),Zi=(()=>{class Ge extends ii{constructor(pe){super(),this._doc=pe}sanitize(pe,$e){if(null==$e)return null;switch(pe){case a.q3G.NONE:return $e;case a.q3G.HTML:return(0,a.qzn)($e,"HTML")?(0,a.z3N)($e):(0,a.EiD)(this._doc,String($e)).toString();case a.q3G.STYLE:return(0,a.qzn)($e,"Style")?(0,a.z3N)($e):$e;case a.q3G.SCRIPT:if((0,a.qzn)($e,"Script"))return(0,a.z3N)($e);throw new Error("unsafe value used in a script context");case a.q3G.URL:return(0,a.yhl)($e),(0,a.qzn)($e,"URL")?(0,a.z3N)($e):(0,a.mCW)(String($e));case a.q3G.RESOURCE_URL:if((0,a.qzn)($e,"ResourceURL"))return(0,a.z3N)($e);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${pe} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(pe){return(0,a.JVY)(pe)}bypassSecurityTrustStyle(pe){return(0,a.L6k)(pe)}bypassSecurityTrustScript(pe){return(0,a.eBb)(pe)}bypassSecurityTrustUrl(pe){return(0,a.LAX)(pe)}bypassSecurityTrustResourceUrl(pe){return(0,a.pB0)(pe)}}return Ge.\u0275fac=function(pe){return new(pe||Ge)(a.LFG(T.K0))},Ge.\u0275prov=(0,a.Yz7)({factory:function(){return function(Ge){return new Zi(Ge.get(T.K0))}((0,a.LFG)(a.gxx))},token:Ge,providedIn:"root"}),Ge})();const be=(0,a.eFA)(a._c5,"browser",[{provide:a.Lbi,useValue:T.bD},{provide:a.g9A,useValue:function(){t.makeCurrent(),k.init()},multi:!0},{provide:T.K0,useFactory:function(){return(0,a.RDi)(document),document},deps:[]}]),Je=[[],{provide:a.zSh,useValue:"root"},{provide:a.qLn,useFactory:function(){return new a.qLn},deps:[]},{provide:gt,useClass:hi,multi:!0,deps:[T.K0,a.R0b,a.Lbi]},{provide:gt,useClass:ne,multi:!0,deps:[T.K0]},[],{provide:Ji,useClass:Ji,deps:[_t,oe,a.AFp]},{provide:a.FYo,useExisting:Ji},{provide:Pt,useExisting:oe},{provide:oe,useClass:oe,deps:[T.K0]},{provide:a.dDg,useClass:a.dDg,deps:[a.R0b]},{provide:_t,useClass:_t,deps:[gt,a.R0b]},{provide:T.JF,useClass:Y,deps:[]},[]];let Pi=(()=>{class Ge{constructor(pe){if(pe)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(pe){return{ngModule:Ge,providers:[{provide:a.AFp,useValue:pe.appId},{provide:b,useExisting:a.AFp},x]}}}return Ge.\u0275fac=function(pe){return new(pe||Ge)(a.LFG(Ge,12))},Ge.\u0275mod=a.oAB({type:Ge}),Ge.\u0275inj=a.cJS({providers:Je,imports:[T.ez,a.hGG]}),Ge})();function so(){return new Vn((0,a.LFG)(T.K0))}let Vn=(()=>{class Ge{constructor(pe){this._doc=pe}getTitle(){return this._doc.title}setTitle(pe){this._doc.title=pe||""}}return Ge.\u0275fac=function(pe){return new(pe||Ge)(a.LFG(T.K0))},Ge.\u0275prov=(0,a.Yz7)({factory:so,token:Ge,providedIn:"root"}),Ge})();"undefined"!=typeof window&&window},60805:(B,U,v)=>{"use strict";v.d(U,{gz:()=>Ao,yS:()=>Qs,Bz:()=>Ca,lC:()=>dl});var T=v(16274),a=v(42741);const t=(()=>{function lt(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return lt.prototype=Object.create(Error.prototype),lt})();var n=v(72850),o=v(267),r=v(29923),p=v(52032),b=v(93948),I=v(38895),x=v(59765),k=v(23974),Y=v(30955),X=v(6006),it=v(28744);function rt(lt,Z){let j=!1;return arguments.length>=2&&(j=!0),function(Mt){return Mt.lift(new ct(lt,Z,j))}}class ct{constructor(Z,j,Et=!1){this.accumulator=Z,this.seed=j,this.hasSeed=Et}call(Z,j){return j.subscribe(new wt(Z,this.accumulator,this.seed,this.hasSeed))}}class wt extends it.L{constructor(Z,j,Et,Mt){super(Z),this.accumulator=j,this._seed=Et,this.hasSeed=Mt,this.index=0}get seed(){return this._seed}set seed(Z){this.hasSeed=!0,this._seed=Z}_next(Z){if(this.hasSeed)return this._tryNext(Z);this.seed=Z,this.destination.next(Z)}_tryNext(Z){const j=this.index++;let Et;try{Et=this.accumulator(this.seed,Z,j)}catch(Mt){this.destination.error(Mt)}this.seed=Et,this.destination.next(Et)}}var At=v(63305),Rt=v(49862);function Dt(lt){return function(j){return 0===lt?(0,k.c)():j.lift(new pt(lt))}}class pt{constructor(Z){if(this.total=Z,this.total<0)throw new Rt.W}call(Z,j){return j.subscribe(new st(Z,this.total))}}class st extends it.L{constructor(Z,j){super(Z),this.total=j,this.ring=new Array,this.count=0}_next(Z){const j=this.ring,Et=this.total,Mt=this.count++;j.length<Et?j.push(Z):j[Mt%Et]=Z}_complete(){const Z=this.destination;let j=this.count;if(j>0){const Et=this.count>=this.total?this.total:this.count,Mt=this.ring;for(let $t=0;$t<Et;$t++){const me=j++%Et;Z.next(Mt[me])}}Z.complete()}}function ot(lt=Ct){return Z=>Z.lift(new nt(lt))}class nt{constructor(Z){this.errorFactory=Z}call(Z,j){return j.subscribe(new Tt(Z,this.errorFactory))}}class Tt extends it.L{constructor(Z,j){super(Z),this.errorFactory=j,this.hasValue=!1}_next(Z){this.hasValue=!0,this.destination.next(Z)}_complete(){if(this.hasValue)return this.destination.complete();{let Z;try{Z=this.errorFactory()}catch(j){Z=j}this.destination.error(Z)}}}function Ct(){return new t}function yt(lt=null){return Z=>Z.lift(new gt(lt))}class gt{constructor(Z){this.defaultValue=Z}call(Z,j){return j.subscribe(new _t(Z,this.defaultValue))}}class _t extends it.L{constructor(Z,j){super(Z),this.defaultValue=j,this.isEmpty=!0}_next(Z){this.isEmpty=!1,this.destination.next(Z)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var Jt=v(37846),oe=v(59917);function Ne(lt,Z){const j=arguments.length>=2;return Et=>Et.pipe(lt?(0,At.h)((Mt,$t)=>lt(Mt,$t,Et)):Jt.y,(0,oe.q)(1),j?yt(Z):ot(()=>new t))}var Xe=v(88561),Ce=v(32812),Ze=v(63543),we=v(72072),ai=v(23748),re=v(16513),ce=v(96286),Pe=v(95290),qe=v(27813),oi=v(4540);class wi{constructor(Z,j){this.id=Z,this.url=j}}class Ji extends wi{constructor(Z,j,Et="imperative",Mt=null){super(Z,j),this.navigationTrigger=Et,this.restoredState=Mt}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ni extends wi{constructor(Z,j,Et){super(Z,j),this.urlAfterRedirects=Et}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ui extends wi{constructor(Z,j,Et){super(Z,j),this.reason=Et}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Oe extends wi{constructor(Z,j,Et){super(Z,j),this.error=Et}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Be extends wi{constructor(Z,j,Et,Mt){super(Z,j),this.urlAfterRedirects=Et,this.state=Mt}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ft extends wi{constructor(Z,j,Et,Mt){super(Z,j),this.urlAfterRedirects=Et,this.state=Mt}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ie extends wi{constructor(Z,j,Et,Mt,$t){super(Z,j),this.urlAfterRedirects=Et,this.state=Mt,this.shouldActivate=$t}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class hi extends wi{constructor(Z,j,Et,Mt){super(Z,j),this.urlAfterRedirects=Et,this.state=Mt}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fe extends wi{constructor(Z,j,Et,Mt){super(Z,j),this.urlAfterRedirects=Et,this.state=Mt}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class di{constructor(Z){this.route=Z}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ge{constructor(Z){this.route=Z}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ve{constructor(Z){this.snapshot=Z}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Zt{constructor(Z){this.snapshot=Z}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ${constructor(Z){this.snapshot=Z}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class at{constructor(Z){this.snapshot=Z}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zt{constructor(Z,j,Et){this.routerEvent=Z,this.position=j,this.anchor=Et}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Qt="primary";class ye{constructor(Z){this.params=Z||{}}has(Z){return Object.prototype.hasOwnProperty.call(this.params,Z)}get(Z){if(this.has(Z)){const j=this.params[Z];return Array.isArray(j)?j[0]:j}return null}getAll(Z){if(this.has(Z)){const j=this.params[Z];return Array.isArray(j)?j:[j]}return[]}get keys(){return Object.keys(this.params)}}function Ee(lt){return new ye(lt)}const ni="ngNavigationCancelingError";function Di(lt){const Z=Error("NavigationCancelingError: "+lt);return Z[ni]=!0,Z}function vi(lt,Z,j){const Et=j.path.split("/");if(Et.length>lt.length||"full"===j.pathMatch&&(Z.hasChildren()||Et.length<lt.length))return null;const Mt={};for(let $t=0;$t<Et.length;$t++){const me=Et[$t],Le=lt[$t];if(me.startsWith(":"))Mt[me.substring(1)]=Le;else if(me!==Le.path)return null}return{consumed:lt.slice(0,Et.length),posParams:Mt}}function Ue(lt,Z){const j=lt?Object.keys(lt):void 0,Et=Z?Object.keys(Z):void 0;if(!j||!Et||j.length!=Et.length)return!1;let Mt;for(let $t=0;$t<j.length;$t++)if(Mt=j[$t],!Ke(lt[Mt],Z[Mt]))return!1;return!0}function Ke(lt,Z){if(Array.isArray(lt)&&Array.isArray(Z)){if(lt.length!==Z.length)return!1;const j=[...lt].sort(),Et=[...Z].sort();return j.every((Mt,$t)=>Et[$t]===Mt)}return lt===Z}function ne(lt){return Array.prototype.concat.apply([],lt)}function xe(lt){return lt.length>0?lt[lt.length-1]:null}function yi(lt,Z){for(const j in lt)lt.hasOwnProperty(j)&&Z(lt[j],j)}function Zi(lt){return(0,a.CqO)(lt)?lt:(0,a.QGY)(lt)?(0,n.D)(Promise.resolve(lt)):(0,o.of)(lt)}const Ui={exact:function kt(lt,Z,j){if(!so(lt.segments,Z.segments)||!Je(lt.segments,Z.segments,j)||lt.numberOfChildren!==Z.numberOfChildren)return!1;for(const Et in Z.children)if(!lt.children[Et]||!kt(lt.children[Et],Z.children[Et],j))return!1;return!0},subset:Gt},Xi={exact:function(lt,Z){return Ue(lt,Z)},subset:function(lt,Z){return Object.keys(Z).length<=Object.keys(lt).length&&Object.keys(Z).every(j=>Ke(lt[j],Z[j]))},ignored:()=>!0};function Re(lt,Z,j){return Ui[j.paths](lt.root,Z.root,j.matrixParams)&&Xi[j.queryParams](lt.queryParams,Z.queryParams)&&!("exact"===j.fragment&&lt.fragment!==Z.fragment)}function Gt(lt,Z,j){return be(lt,Z,Z.segments,j)}function be(lt,Z,j,Et){if(lt.segments.length>j.length){const Mt=lt.segments.slice(0,j.length);return!(!so(Mt,j)||Z.hasChildren()||!Je(Mt,j,Et))}if(lt.segments.length===j.length){if(!so(lt.segments,j)||!Je(lt.segments,j,Et))return!1;for(const Mt in Z.children)if(!lt.children[Mt]||!Gt(lt.children[Mt],Z.children[Mt],Et))return!1;return!0}{const Mt=j.slice(0,lt.segments.length),$t=j.slice(lt.segments.length);return!!(so(lt.segments,Mt)&&Je(lt.segments,Mt,Et)&&lt.children[Qt])&&be(lt.children[Qt],Z,$t,Et)}}function Je(lt,Z,j){return Z.every((Et,Mt)=>Xi[j](lt[Mt].parameters,Et.parameters))}class Pi{constructor(Z,j,Et){this.root=Z,this.queryParams=j,this.fragment=Et}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ee(this.queryParams)),this._queryParamMap}toString(){return Eo.serialize(this)}}class Oi{constructor(Z,j){this.segments=Z,this.children=j,this.parent=null,yi(j,(Et,Mt)=>Et.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return hs(this)}}class kn{constructor(Z,j){this.path=Z,this.parameters=j}get parameterMap(){return this._parameterMap||(this._parameterMap=Ee(this.parameters)),this._parameterMap}toString(){return Vo(this)}}function so(lt,Z){return lt.length===Z.length&&lt.every((j,Et)=>j.path===Z[Et].path)}class Dn{}class Do{parse(Z){const j=new _i(Z);return new Pi(j.parseRootSegment(),j.parseQueryParams(),j.parseFragment())}serialize(Z){var lt;return`${`/${ro(Z.root,!0)}`}${function(lt){const Z=Object.keys(lt).map(j=>{const Et=lt[j];return Array.isArray(Et)?Et.map(Mt=>`${pn(j)}=${pn(Mt)}`).join("&"):`${pn(j)}=${pn(Et)}`}).filter(j=>!!j);return Z.length?`?${Z.join("&")}`:""}(Z.queryParams)}${"string"==typeof Z.fragment?`#${lt=Z.fragment,encodeURI(lt)}`:""}`}}const Eo=new Do;function hs(lt){return lt.segments.map(Z=>Vo(Z)).join("/")}function ro(lt,Z){if(!lt.hasChildren())return hs(lt);if(Z){const j=lt.children[Qt]?ro(lt.children[Qt],!1):"",Et=[];return yi(lt.children,(Mt,$t)=>{$t!==Qt&&Et.push(`${$t}:${ro(Mt,!1)}`)}),Et.length>0?`${j}(${Et.join("//")})`:j}{const j=function(lt,Z){let j=[];return yi(lt.children,(Et,Mt)=>{Mt===Qt&&(j=j.concat(Z(Et,Mt)))}),yi(lt.children,(Et,Mt)=>{Mt!==Qt&&(j=j.concat(Z(Et,Mt)))}),j}(lt,(Et,Mt)=>Mt===Qt?[ro(lt.children[Qt],!1)]:[`${Mt}:${ro(Et,!1)}`]);return 1===Object.keys(lt.children).length&&null!=lt.children[Qt]?`${hs(lt)}/${j[0]}`:`${hs(lt)}/(${j.join("//")})`}}function Li(lt){return encodeURIComponent(lt).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function pn(lt){return Li(lt).replace(/%3B/gi,";")}function jo(lt){return Li(lt).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function es(lt){return decodeURIComponent(lt)}function xn(lt){return es(lt.replace(/\+/g,"%20"))}function Vo(lt){return`${jo(lt.path)}${function(lt){return Object.keys(lt).map(Z=>`;${jo(Z)}=${jo(lt[Z])}`).join("")}(lt.parameters)}`}const Vs=/^[^\/()?;=#]+/;function gn(lt){const Z=lt.match(Vs);return Z?Z[0]:""}const Ge=/^[^=?&#]+/,pe=/^[^?&#]+/;class _i{constructor(Z){this.url=Z,this.remaining=Z}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Oi([],{}):new Oi([],this.parseChildren())}parseQueryParams(){const Z={};if(this.consumeOptional("?"))do{this.parseQueryParam(Z)}while(this.consumeOptional("&"));return Z}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const Z=[];for(this.peekStartsWith("(")||Z.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),Z.push(this.parseSegment());let j={};this.peekStartsWith("/(")&&(this.capture("/"),j=this.parseParens(!0));let Et={};return this.peekStartsWith("(")&&(Et=this.parseParens(!1)),(Z.length>0||Object.keys(j).length>0)&&(Et[Qt]=new Oi(Z,j)),Et}parseSegment(){const Z=gn(this.remaining);if(""===Z&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(Z),new kn(es(Z),this.parseMatrixParams())}parseMatrixParams(){const Z={};for(;this.consumeOptional(";");)this.parseParam(Z);return Z}parseParam(Z){const j=gn(this.remaining);if(!j)return;this.capture(j);let Et="";if(this.consumeOptional("=")){const Mt=gn(this.remaining);Mt&&(Et=Mt,this.capture(Et))}Z[es(j)]=es(Et)}parseQueryParam(Z){const j=function(lt){const Z=lt.match(Ge);return Z?Z[0]:""}(this.remaining);if(!j)return;this.capture(j);let Et="";if(this.consumeOptional("=")){const me=function(lt){const Z=lt.match(pe);return Z?Z[0]:""}(this.remaining);me&&(Et=me,this.capture(Et))}const Mt=xn(j),$t=xn(Et);if(Z.hasOwnProperty(Mt)){let me=Z[Mt];Array.isArray(me)||(me=[me],Z[Mt]=me),me.push($t)}else Z[Mt]=$t}parseParens(Z){const j={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const Et=gn(this.remaining),Mt=this.remaining[Et.length];if("/"!==Mt&&")"!==Mt&&";"!==Mt)throw new Error(`Cannot parse url '${this.url}'`);let $t;Et.indexOf(":")>-1?($t=Et.substr(0,Et.indexOf(":")),this.capture($t),this.capture(":")):Z&&($t=Qt);const me=this.parseChildren();j[$t]=1===Object.keys(me).length?me[Qt]:new Oi([],me),this.consumeOptional("//")}return j}peekStartsWith(Z){return this.remaining.startsWith(Z)}consumeOptional(Z){return!!this.peekStartsWith(Z)&&(this.remaining=this.remaining.substring(Z.length),!0)}capture(Z){if(!this.consumeOptional(Z))throw new Error(`Expected "${Z}".`)}}class on{constructor(Z){this._root=Z}get root(){return this._root.value}parent(Z){const j=this.pathFromRoot(Z);return j.length>1?j[j.length-2]:null}children(Z){const j=fn(Z,this._root);return j?j.children.map(Et=>Et.value):[]}firstChild(Z){const j=fn(Z,this._root);return j&&j.children.length>0?j.children[0].value:null}siblings(Z){const j=An(Z,this._root);return j.length<2?[]:j[j.length-2].children.map(Mt=>Mt.value).filter(Mt=>Mt!==Z)}pathFromRoot(Z){return An(Z,this._root).map(j=>j.value)}}function fn(lt,Z){if(lt===Z.value)return Z;for(const j of Z.children){const Et=fn(lt,j);if(Et)return Et}return null}function An(lt,Z){if(lt===Z.value)return[Z];for(const j of Z.children){const Et=An(lt,j);if(Et.length)return Et.unshift(Z),Et}return[]}class cn{constructor(Z,j){this.value=Z,this.children=j}toString(){return`TreeNode(${this.value})`}}function ds(lt){const Z={};return lt&&lt.children.forEach(j=>Z[j.value.outlet]=j),Z}class gr extends on{constructor(Z,j){super(Z),this.snapshot=j,is(this,Z)}toString(){return this.snapshot.toString()}}function ps(lt,Z){const j=function(lt,Z){const me=new To([],{},{},"",{},Qt,Z,null,lt.root,-1,{});return new On("",new cn(me,[]))}(lt,Z),Et=new r.X([new kn("",{})]),Mt=new r.X({}),$t=new r.X({}),me=new r.X({}),Le=new r.X(""),bi=new Ao(Et,Mt,me,Le,$t,Qt,Z,j.root);return bi.snapshot=j.root,new gr(new cn(bi,[]),j)}class Ao{constructor(Z,j,Et,Mt,$t,me,Le,bi){this.url=Z,this.params=j,this.queryParams=Et,this.fragment=Mt,this.data=$t,this.outlet=me,this.component=Le,this._futureSnapshot=bi}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Xe.U)(Z=>Ee(Z)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Xe.U)(Z=>Ee(Z)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function rs(lt,Z="emptyOnly"){const j=lt.pathFromRoot;let Et=0;if("always"!==Z)for(Et=j.length-1;Et>=1;){const Mt=j[Et],$t=j[Et-1];if(Mt.routeConfig&&""===Mt.routeConfig.path)Et--;else{if($t.component)break;Et--}}return function(lt){return lt.reduce((Z,j)=>({params:Object.assign(Object.assign({},Z.params),j.params),data:Object.assign(Object.assign({},Z.data),j.data),resolve:Object.assign(Object.assign({},Z.resolve),j._resolvedData)}),{params:{},data:{},resolve:{}})}(j.slice(Et))}class To{constructor(Z,j,Et,Mt,$t,me,Le,bi,$i,eo,vn){this.url=Z,this.params=j,this.queryParams=Et,this.fragment=Mt,this.data=$t,this.outlet=me,this.component=Le,this.routeConfig=bi,this._urlSegment=$i,this._lastPathIndex=eo,this._resolve=vn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ee(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ee(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(Et=>Et.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class On extends on{constructor(Z,j){super(j),this.url=Z,is(this,j)}toString(){return lo(this._root)}}function is(lt,Z){Z.value._routerState=lt,Z.children.forEach(j=>is(lt,j))}function lo(lt){const Z=lt.children.length>0?` { ${lt.children.map(lo).join(", ")} } `:"";return`${lt.value}${Z}`}function ks(lt){if(lt.snapshot){const Z=lt.snapshot,j=lt._futureSnapshot;lt.snapshot=j,Ue(Z.queryParams,j.queryParams)||lt.queryParams.next(j.queryParams),Z.fragment!==j.fragment&&lt.fragment.next(j.fragment),Ue(Z.params,j.params)||lt.params.next(j.params),function(lt,Z){if(lt.length!==Z.length)return!1;for(let j=0;j<lt.length;++j)if(!Ue(lt[j],Z[j]))return!1;return!0}(Z.url,j.url)||lt.url.next(j.url),Ue(Z.data,j.data)||lt.data.next(j.data)}else lt.snapshot=lt._futureSnapshot,lt.data.next(lt._futureSnapshot.data)}function Co(lt,Z){return Ue(lt.params,Z.params)&&function(lt,Z){return so(lt,Z)&&lt.every((j,Et)=>Ue(j.parameters,Z[Et].parameters))}(lt.url,Z.url)&&!(!lt.parent!=!Z.parent)&&(!lt.parent||Co(lt.parent,Z.parent))}function ns(lt,Z,j){if(j&&lt.shouldReuseRoute(Z.value,j.value.snapshot)){const Et=j.value;Et._futureSnapshot=Z.value;const Mt=function(lt,Z,j){return Z.children.map(Et=>{for(const Mt of j.children)if(lt.shouldReuseRoute(Et.value,Mt.value.snapshot))return ns(lt,Et,Mt);return ns(lt,Et)})}(lt,Z,j);return new cn(Et,Mt)}{if(lt.shouldAttach(Z.value)){const $t=lt.retrieve(Z.value);if(null!==$t){const me=$t.route;return Oo(Z,me),me}}const Et=function(lt){return new Ao(new r.X(lt.url),new r.X(lt.params),new r.X(lt.queryParams),new r.X(lt.fragment),new r.X(lt.data),lt.outlet,lt.component,lt)}(Z.value),Mt=Z.children.map($t=>ns(lt,$t));return new cn(Et,Mt)}}function Oo(lt,Z){if(lt.value.routeConfig!==Z.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(lt.children.length!==Z.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");Z.value._futureSnapshot=lt.value;for(let j=0;j<lt.children.length;++j)Oo(lt.children[j],Z.children[j])}function ir(lt){return"object"==typeof lt&&null!=lt&&!lt.outlets&&!lt.segmentPath}function fs(lt){return"object"==typeof lt&&null!=lt&&lt.outlets}function Jr(lt,Z,j,Et,Mt){let $t={};return Et&&yi(Et,(me,Le)=>{$t[Le]=Array.isArray(me)?me.map(bi=>`${bi}`):`${me}`}),new Pi(j.root===lt?Z:oa(j.root,lt,Z),$t,Mt)}function oa(lt,Z,j){const Et={};return yi(lt.children,(Mt,$t)=>{Et[$t]=Mt===Z?j:oa(Mt,Z,j)}),new Oi(lt.segments,Et)}class xr{constructor(Z,j,Et){if(this.isAbsolute=Z,this.numberOfDoubleDots=j,this.commands=Et,Z&&Et.length>0&&ir(Et[0]))throw new Error("Root segment cannot have matrix parameters");const Mt=Et.find(fs);if(Mt&&Mt!==xe(Et))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ea{constructor(Z,j,Et){this.segmentGroup=Z,this.processChildren=j,this.index=Et}}function sa(lt,Z,j){if(lt||(lt=new Oi([],{})),0===lt.segments.length&&lt.hasChildren())return Cs(lt,Z,j);const Et=function(lt,Z,j){let Et=0,Mt=Z;const $t={match:!1,pathIndex:0,commandIndex:0};for(;Mt<lt.segments.length;){if(Et>=j.length)return $t;const me=lt.segments[Mt],Le=j[Et];if(fs(Le))break;const bi=`${Le}`,$i=Et<j.length-1?j[Et+1]:null;if(Mt>0&&void 0===bi)break;if(bi&&$i&&"object"==typeof $i&&void 0===$i.outlets){if(!$o(bi,$i,me))return $t;Et+=2}else{if(!$o(bi,{},me))return $t;Et++}Mt++}return{match:!0,pathIndex:Mt,commandIndex:Et}}(lt,Z,j),Mt=j.slice(Et.commandIndex);if(Et.match&&Et.pathIndex<lt.segments.length){const $t=new Oi(lt.segments.slice(0,Et.pathIndex),{});return $t.children[Qt]=new Oi(lt.segments.slice(Et.pathIndex),lt.children),Cs($t,0,Mt)}return Et.match&&0===Mt.length?new Oi(lt.segments,{}):Et.match&&!lt.hasChildren()?bo(lt,Z,j):Et.match?Cs(lt,0,Mt):bo(lt,Z,j)}function Cs(lt,Z,j){if(0===j.length)return new Oi(lt.segments,{});{const Et=function(lt){return fs(lt[0])?lt[0].outlets:{[Qt]:lt}}(j),Mt={};return yi(Et,($t,me)=>{"string"==typeof $t&&($t=[$t]),null!==$t&&(Mt[me]=sa(lt.children[me],Z,$t))}),yi(lt.children,($t,me)=>{void 0===Et[me]&&(Mt[me]=$t)}),new Oi(lt.segments,Mt)}}function bo(lt,Z,j){const Et=lt.segments.slice(0,Z);let Mt=0;for(;Mt<j.length;){const $t=j[Mt];if(fs($t)){const bi=Ls($t.outlets);return new Oi(Et,bi)}if(0===Mt&&ir(j[0])){Et.push(new kn(lt.segments[Z].path,_r(j[0]))),Mt++;continue}const me=fs($t)?$t.outlets[Qt]:`${$t}`,Le=Mt<j.length-1?j[Mt+1]:null;me&&Le&&ir(Le)?(Et.push(new kn(me,_r(Le))),Mt+=2):(Et.push(new kn(me,{})),Mt++)}return new Oi(Et,{})}function Ls(lt){const Z={};return yi(lt,(j,Et)=>{"string"==typeof j&&(j=[j]),null!==j&&(Z[Et]=bo(new Oi([],{}),0,j))}),Z}function _r(lt){const Z={};return yi(lt,(j,Et)=>Z[Et]=`${j}`),Z}function $o(lt,Z,j){return lt==j.path&&Ue(Z,j.parameters)}class Ds{constructor(Z,j,Et,Mt){this.routeReuseStrategy=Z,this.futureState=j,this.currState=Et,this.forwardEvent=Mt}activate(Z){const j=this.futureState._root,Et=this.currState?this.currState._root:null;this.deactivateChildRoutes(j,Et,Z),ks(this.futureState.root),this.activateChildRoutes(j,Et,Z)}deactivateChildRoutes(Z,j,Et){const Mt=ds(j);Z.children.forEach($t=>{const me=$t.value.outlet;this.deactivateRoutes($t,Mt[me],Et),delete Mt[me]}),yi(Mt,($t,me)=>{this.deactivateRouteAndItsChildren($t,Et)})}deactivateRoutes(Z,j,Et){const Mt=Z.value,$t=j?j.value:null;if(Mt===$t)if(Mt.component){const me=Et.getContext(Mt.outlet);me&&this.deactivateChildRoutes(Z,j,me.children)}else this.deactivateChildRoutes(Z,j,Et);else $t&&this.deactivateRouteAndItsChildren(j,Et)}deactivateRouteAndItsChildren(Z,j){this.routeReuseStrategy.shouldDetach(Z.value.snapshot)?this.detachAndStoreRouteSubtree(Z,j):this.deactivateRouteAndOutlet(Z,j)}detachAndStoreRouteSubtree(Z,j){const Et=j.getContext(Z.value.outlet);if(Et&&Et.outlet){const Mt=Et.outlet.detach(),$t=Et.children.onOutletDeactivated();this.routeReuseStrategy.store(Z.value.snapshot,{componentRef:Mt,route:Z,contexts:$t})}}deactivateRouteAndOutlet(Z,j){const Et=j.getContext(Z.value.outlet),Mt=Et&&Z.value.component?Et.children:j,$t=ds(Z);for(const me of Object.keys($t))this.deactivateRouteAndItsChildren($t[me],Mt);Et&&Et.outlet&&(Et.outlet.deactivate(),Et.children.onOutletDeactivated(),Et.attachRef=null,Et.resolver=null,Et.route=null)}activateChildRoutes(Z,j,Et){const Mt=ds(j);Z.children.forEach($t=>{this.activateRoutes($t,Mt[$t.value.outlet],Et),this.forwardEvent(new at($t.value.snapshot))}),Z.children.length&&this.forwardEvent(new Zt(Z.value.snapshot))}activateRoutes(Z,j,Et){const Mt=Z.value,$t=j?j.value:null;if(ks(Mt),Mt===$t)if(Mt.component){const me=Et.getOrCreateContext(Mt.outlet);this.activateChildRoutes(Z,j,me.children)}else this.activateChildRoutes(Z,j,Et);else if(Mt.component){const me=Et.getOrCreateContext(Mt.outlet);if(this.routeReuseStrategy.shouldAttach(Mt.snapshot)){const Le=this.routeReuseStrategy.retrieve(Mt.snapshot);this.routeReuseStrategy.store(Mt.snapshot,null),me.children.onOutletReAttached(Le.contexts),me.attachRef=Le.componentRef,me.route=Le.route.value,me.outlet&&me.outlet.attach(Le.componentRef,Le.route.value),Ns(Le.route)}else{const Le=function(lt){for(let Z=lt.parent;Z;Z=Z.parent){const j=Z.routeConfig;if(j&&j._loadedConfig)return j._loadedConfig;if(j&&j.component)return null}return null}(Mt.snapshot),bi=Le?Le.module.componentFactoryResolver:null;me.attachRef=null,me.route=Mt,me.resolver=bi,me.outlet&&me.outlet.activateWith(Mt,bi),this.activateChildRoutes(Z,null,me.children)}}else this.activateChildRoutes(Z,null,Et)}}function Ns(lt){ks(lt.value),lt.children.forEach(Ns)}class Us{constructor(Z,j){this.routes=Z,this.module=j}}function xo(lt){return"function"==typeof lt}function ho(lt){return lt instanceof Pi}const mr=Symbol("INITIAL_VALUE");function Po(){return(0,Ce.w)(lt=>(0,p.aj)(lt.map(Z=>Z.pipe((0,oe.q)(1),(0,Ze.O)(mr)))).pipe(rt((Z,j)=>{let Et=!1;return j.reduce((Mt,$t,me)=>Mt!==mr?Mt:($t===mr&&(Et=!0),Et||!1!==$t&&me!==j.length-1&&!ho($t)?Mt:$t),Z)},mr),(0,At.h)(Z=>Z!==mr),(0,Xe.U)(Z=>ho(Z)?Z:!0===Z),(0,oe.q)(1)))}let vr=(()=>{class lt{}return lt.\u0275fac=function(j){return new(j||lt)},lt.\u0275cmp=a.Xpm({type:lt,selectors:[["ng-component"]],decls:1,vars:0,template:function(j,Et){1&j&&a._UZ(0,"router-outlet")},directives:function(){return[dl]},encapsulation:2}),lt})();function Nr(lt,Z=""){for(let j=0;j<lt.length;j++){const Et=lt[j];nr(Et,la(Z,Et))}}function nr(lt,Z){lt.children&&Nr(lt.children,Z)}function la(lt,Z){return Z?lt||Z.path?lt&&!Z.path?`${lt}/`:!lt&&Z.path?Z.path:`${lt}/${Z.path}`:"":lt}function $s(lt){const Z=lt.children&&lt.children.map($s),j=Z?Object.assign(Object.assign({},lt),{children:Z}):Object.assign({},lt);return!j.component&&(Z||j.loadChildren)&&j.outlet&&j.outlet!==Qt&&(j.component=vr),j}function Vi(lt){return lt.outlet||Qt}function bt(lt,Z){const j=lt.filter(Et=>Vi(Et)===Z);return j.push(...lt.filter(Et=>Vi(Et)!==Z)),j}const jt={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function St(lt,Z,j){var Et;if(""===Z.path)return"full"===Z.pathMatch&&(lt.hasChildren()||j.length>0)?Object.assign({},jt):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const $t=(Z.matcher||vi)(j,lt,Z);if(!$t)return Object.assign({},jt);const me={};yi($t.posParams,(bi,$i)=>{me[$i]=bi.path});const Le=$t.consumed.length>0?Object.assign(Object.assign({},me),$t.consumed[$t.consumed.length-1].parameters):me;return{matched:!0,consumedSegments:$t.consumed,lastChild:$t.consumed.length,parameters:Le,positionalParamSegments:null!==(Et=$t.posParams)&&void 0!==Et?Et:{}}}function J(lt,Z,j,Et,Mt="corrected"){if(j.length>0&&function(lt,Z,j){return j.some(Et=>Ii(lt,Z,Et)&&Vi(Et)!==Qt)}(lt,j,Et)){const me=new Oi(Z,function(lt,Z,j,Et){const Mt={};Mt[Qt]=Et,Et._sourceSegment=lt,Et._segmentIndexShift=Z.length;for(const $t of j)if(""===$t.path&&Vi($t)!==Qt){const me=new Oi([],{});me._sourceSegment=lt,me._segmentIndexShift=Z.length,Mt[Vi($t)]=me}return Mt}(lt,Z,Et,new Oi(j,lt.children)));return me._sourceSegment=lt,me._segmentIndexShift=Z.length,{segmentGroup:me,slicedSegments:[]}}if(0===j.length&&function(lt,Z,j){return j.some(Et=>Ii(lt,Z,Et))}(lt,j,Et)){const me=new Oi(lt.segments,function(lt,Z,j,Et,Mt,$t){const me={};for(const Le of Et)if(Ii(lt,j,Le)&&!Mt[Vi(Le)]){const bi=new Oi([],{});bi._sourceSegment=lt,bi._segmentIndexShift="legacy"===$t?lt.segments.length:Z.length,me[Vi(Le)]=bi}return Object.assign(Object.assign({},Mt),me)}(lt,Z,j,Et,lt.children,Mt));return me._sourceSegment=lt,me._segmentIndexShift=Z.length,{segmentGroup:me,slicedSegments:j}}const $t=new Oi(lt.segments,lt.children);return $t._sourceSegment=lt,$t._segmentIndexShift=Z.length,{segmentGroup:$t,slicedSegments:j}}function Ii(lt,Z,j){return(!(lt.hasChildren()||Z.length>0)||"full"!==j.pathMatch)&&""===j.path}function Cn(lt,Z,j,Et){return!!(Vi(lt)===Et||Et!==Qt&&Ii(Z,j,lt))&&("**"===lt.path||St(Z,lt,j).matched)}function Xn(lt,Z,j){return 0===Z.length&&!lt.children[j]}class En{constructor(Z){this.segmentGroup=Z||null}}class ao{constructor(Z){this.urlTree=Z}}function _o(lt){return new b.y(Z=>Z.error(new En(lt)))}function Fo(lt){return new b.y(Z=>Z.error(new ao(lt)))}function ca(lt){return new b.y(Z=>Z.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${lt}'`)))}class Gs{constructor(Z,j,Et,Mt,$t){this.configLoader=j,this.urlSerializer=Et,this.urlTree=Mt,this.config=$t,this.allowRedirects=!0,this.ngModule=Z.get(a.h0i)}apply(){const Z=J(this.urlTree.root,[],[],this.config).segmentGroup,j=new Oi(Z.segments,Z.children);return this.expandSegmentGroup(this.ngModule,this.config,j,Qt).pipe((0,Xe.U)($t=>this.createUrlTree(Pr($t),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,we.K)($t=>{if($t instanceof ao)return this.allowRedirects=!1,this.match($t.urlTree);throw $t instanceof En?this.noMatchError($t):$t}))}match(Z){return this.expandSegmentGroup(this.ngModule,this.config,Z.root,Qt).pipe((0,Xe.U)(Mt=>this.createUrlTree(Pr(Mt),Z.queryParams,Z.fragment))).pipe((0,we.K)(Mt=>{throw Mt instanceof En?this.noMatchError(Mt):Mt}))}noMatchError(Z){return new Error(`Cannot match any routes. URL Segment: '${Z.segmentGroup}'`)}createUrlTree(Z,j,Et){const Mt=Z.segments.length>0?new Oi([],{[Qt]:Z}):Z;return new Pi(Mt,j,Et)}expandSegmentGroup(Z,j,Et,Mt){return 0===Et.segments.length&&Et.hasChildren()?this.expandChildren(Z,j,Et).pipe((0,Xe.U)($t=>new Oi([],$t))):this.expandSegment(Z,Et,j,Et.segments,Mt,!0)}expandChildren(Z,j,Et){const Mt=[];for(const $t of Object.keys(Et.children))"primary"===$t?Mt.unshift($t):Mt.push($t);return(0,n.D)(Mt).pipe((0,ai.b)($t=>{const me=Et.children[$t],Le=bt(j,$t);return this.expandSegmentGroup(Z,Le,me,$t).pipe((0,Xe.U)(bi=>({segment:bi,outlet:$t})))}),rt(($t,me)=>($t[me.outlet]=me.segment,$t),{}),function(lt,Z){const j=arguments.length>=2;return Et=>Et.pipe(lt?(0,At.h)((Mt,$t)=>lt(Mt,$t,Et)):Jt.y,Dt(1),j?yt(Z):ot(()=>new t))}())}expandSegment(Z,j,Et,Mt,$t,me){return(0,n.D)(Et).pipe((0,ai.b)(Le=>this.expandSegmentAgainstRoute(Z,j,Et,Le,Mt,$t,me).pipe((0,we.K)($i=>{if($i instanceof En)return(0,o.of)(null);throw $i}))),Ne(Le=>!!Le),(0,we.K)((Le,bi)=>{if(Le instanceof t||"EmptyError"===Le.name){if(Xn(j,Mt,$t))return(0,o.of)(new Oi([],{}));throw new En(j)}throw Le}))}expandSegmentAgainstRoute(Z,j,Et,Mt,$t,me,Le){return Cn(Mt,j,$t,me)?void 0===Mt.redirectTo?this.matchSegmentAgainstRoute(Z,j,Mt,$t,me):Le&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(Z,j,Et,Mt,$t,me):_o(j):_o(j)}expandSegmentAgainstRouteUsingRedirect(Z,j,Et,Mt,$t,me){return"**"===Mt.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(Z,Et,Mt,me):this.expandRegularSegmentAgainstRouteUsingRedirect(Z,j,Et,Mt,$t,me)}expandWildCardWithParamsAgainstRouteUsingRedirect(Z,j,Et,Mt){const $t=this.applyRedirectCommands([],Et.redirectTo,{});return Et.redirectTo.startsWith("/")?Fo($t):this.lineralizeSegments(Et,$t).pipe((0,re.zg)(me=>{const Le=new Oi(me,{});return this.expandSegment(Z,Le,j,me,Mt,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(Z,j,Et,Mt,$t,me){const{matched:Le,consumedSegments:bi,lastChild:$i,positionalParamSegments:eo}=St(j,Mt,$t);if(!Le)return _o(j);const vn=this.applyRedirectCommands(bi,Mt.redirectTo,eo);return Mt.redirectTo.startsWith("/")?Fo(vn):this.lineralizeSegments(Mt,vn).pipe((0,re.zg)(io=>this.expandSegment(Z,j,Et,io.concat($t.slice($i)),me,!1)))}matchSegmentAgainstRoute(Z,j,Et,Mt,$t){if("**"===Et.path)return Et.loadChildren?(Et._loadedConfig?(0,o.of)(Et._loadedConfig):this.configLoader.load(Z.injector,Et)).pipe((0,Xe.U)(io=>(Et._loadedConfig=io,new Oi(Mt,{})))):(0,o.of)(new Oi(Mt,{}));const{matched:me,consumedSegments:Le,lastChild:bi}=St(j,Et,Mt);if(!me)return _o(j);const $i=Mt.slice(bi);return this.getChildConfig(Z,Et,Mt).pipe((0,re.zg)(vn=>{const io=vn.module,zn=vn.routes,{segmentGroup:cs,slicedSegments:lr}=J(j,Le,$i,zn),cr=new Oi(cs.segments,cs.children);if(0===lr.length&&cr.hasChildren())return this.expandChildren(io,zn,cr).pipe((0,Xe.U)(Yr=>new Oi(Le,Yr)));if(0===zn.length&&0===lr.length)return(0,o.of)(new Oi(Le,{}));const Bs=Vi(Et)===$t;return this.expandSegment(io,cr,zn,lr,Bs?Qt:$t,!0).pipe((0,Xe.U)(Ko=>new Oi(Le.concat(Ko.segments),Ko.children)))}))}getChildConfig(Z,j,Et){return j.children?(0,o.of)(new Us(j.children,Z)):j.loadChildren?void 0!==j._loadedConfig?(0,o.of)(j._loadedConfig):this.runCanLoadGuards(Z.injector,j,Et).pipe((0,re.zg)(Mt=>{return Mt?this.configLoader.load(Z.injector,j).pipe((0,Xe.U)($t=>(j._loadedConfig=$t,$t))):(lt=j,new b.y(Z=>Z.error(Di(`Cannot load children because the guard of the route "path: '${lt.path}'" returned false`))));var lt})):(0,o.of)(new Us([],Z))}runCanLoadGuards(Z,j,Et){const Mt=j.canLoad;if(!Mt||0===Mt.length)return(0,o.of)(!0);const $t=Mt.map(me=>{const Le=Z.get(me);let bi;if((lt=Le)&&xo(lt.canLoad))bi=Le.canLoad(j,Et);else{if(!xo(Le))throw new Error("Invalid CanLoad guard");bi=Le(j,Et)}var lt;return Zi(bi)});return(0,o.of)($t).pipe(Po(),(0,ce.b)(me=>{if(!ho(me))return;const Le=Di(`Redirecting to "${this.urlSerializer.serialize(me)}"`);throw Le.url=me,Le}),(0,Xe.U)(me=>!0===me))}lineralizeSegments(Z,j){let Et=[],Mt=j.root;for(;;){if(Et=Et.concat(Mt.segments),0===Mt.numberOfChildren)return(0,o.of)(Et);if(Mt.numberOfChildren>1||!Mt.children[Qt])return ca(Z.redirectTo);Mt=Mt.children[Qt]}}applyRedirectCommands(Z,j,Et){return this.applyRedirectCreatreUrlTree(j,this.urlSerializer.parse(j),Z,Et)}applyRedirectCreatreUrlTree(Z,j,Et,Mt){const $t=this.createSegmentGroup(Z,j.root,Et,Mt);return new Pi($t,this.createQueryParams(j.queryParams,this.urlTree.queryParams),j.fragment)}createQueryParams(Z,j){const Et={};return yi(Z,(Mt,$t)=>{if("string"==typeof Mt&&Mt.startsWith(":")){const Le=Mt.substring(1);Et[$t]=j[Le]}else Et[$t]=Mt}),Et}createSegmentGroup(Z,j,Et,Mt){const $t=this.createSegments(Z,j.segments,Et,Mt);let me={};return yi(j.children,(Le,bi)=>{me[bi]=this.createSegmentGroup(Z,Le,Et,Mt)}),new Oi($t,me)}createSegments(Z,j,Et,Mt){return j.map($t=>$t.path.startsWith(":")?this.findPosParam(Z,$t,Mt):this.findOrReturn($t,Et))}findPosParam(Z,j,Et){const Mt=Et[j.path.substring(1)];if(!Mt)throw new Error(`Cannot redirect to '${Z}'. Cannot find '${j.path}'.`);return Mt}findOrReturn(Z,j){let Et=0;for(const Mt of j){if(Mt.path===Z.path)return j.splice(Et),Mt;Et++}return Z}}function Pr(lt){const Z={};for(const Et of Object.keys(lt.children)){const $t=Pr(lt.children[Et]);($t.segments.length>0||$t.hasChildren())&&(Z[Et]=$t)}return function(lt){if(1===lt.numberOfChildren&&lt.children[Qt]){const Z=lt.children[Qt];return new Oi(lt.segments.concat(Z.segments),Z.children)}return lt}(new Oi(lt.segments,Z))}class ul{constructor(Z){this.path=Z,this.route=this.path[this.path.length-1]}}class Fr{constructor(Z,j){this.component=Z,this.route=j}}function hl(lt,Z,j){const Et=lt._root;return Rn(Et,Z?Z._root:null,j,[Et.value])}function br(lt,Z,j){const Et=function(lt){if(!lt)return null;for(let Z=lt.parent;Z;Z=Z.parent){const j=Z.routeConfig;if(j&&j._loadedConfig)return j._loadedConfig}return null}(Z);return(Et?Et.module.injector:j).get(lt)}function Rn(lt,Z,j,Et,Mt={canDeactivateChecks:[],canActivateChecks:[]}){const $t=ds(Z);return lt.children.forEach(me=>{(function(lt,Z,j,Et,Mt={canDeactivateChecks:[],canActivateChecks:[]}){const $t=lt.value,me=Z?Z.value:null,Le=j?j.getContext(lt.value.outlet):null;if(me&&$t.routeConfig===me.routeConfig){const bi=function(lt,Z,j){if("function"==typeof j)return j(lt,Z);switch(j){case"pathParamsChange":return!so(lt.url,Z.url);case"pathParamsOrQueryParamsChange":return!so(lt.url,Z.url)||!Ue(lt.queryParams,Z.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Co(lt,Z)||!Ue(lt.queryParams,Z.queryParams);case"paramsChange":default:return!Co(lt,Z)}}(me,$t,$t.routeConfig.runGuardsAndResolvers);bi?Mt.canActivateChecks.push(new ul(Et)):($t.data=me.data,$t._resolvedData=me._resolvedData),Rn(lt,Z,$t.component?Le?Le.children:null:j,Et,Mt),bi&&Le&&Le.outlet&&Le.outlet.isActivated&&Mt.canDeactivateChecks.push(new Fr(Le.outlet.component,me))}else me&&yr(Z,Le,Mt),Mt.canActivateChecks.push(new ul(Et)),Rn(lt,null,$t.component?Le?Le.children:null:j,Et,Mt)})(me,$t[me.value.outlet],j,Et.concat([me.value]),Mt),delete $t[me.value.outlet]}),yi($t,(me,Le)=>yr(me,j.getContext(Le),Mt)),Mt}function yr(lt,Z,j){const Et=ds(lt),Mt=lt.value;yi(Et,($t,me)=>{yr($t,Mt.component?Z?Z.children.getContext(me):null:Z,j)}),j.canDeactivateChecks.push(new Fr(Mt.component&&Z&&Z.outlet&&Z.outlet.isActivated?Z.outlet.component:null,Mt))}class _e{}function Se(lt){return new b.y(Z=>Z.error(lt))}class mi{constructor(Z,j,Et,Mt,$t,me){this.rootComponentType=Z,this.config=j,this.urlTree=Et,this.url=Mt,this.paramsInheritanceStrategy=$t,this.relativeLinkResolution=me}recognize(){const Z=J(this.urlTree.root,[],[],this.config.filter(me=>void 0===me.redirectTo),this.relativeLinkResolution).segmentGroup,j=this.processSegmentGroup(this.config,Z,Qt);if(null===j)return null;const Et=new To([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Qt,this.rootComponentType,null,this.urlTree.root,-1,{}),Mt=new cn(Et,j),$t=new On(this.url,Mt);return this.inheritParamsAndData($t._root),$t}inheritParamsAndData(Z){const j=Z.value,Et=rs(j,this.paramsInheritanceStrategy);j.params=Object.freeze(Et.params),j.data=Object.freeze(Et.data),Z.children.forEach(Mt=>this.inheritParamsAndData(Mt))}processSegmentGroup(Z,j,Et){return 0===j.segments.length&&j.hasChildren()?this.processChildren(Z,j):this.processSegment(Z,j,j.segments,Et)}processChildren(Z,j){const Et=[];for(const $t of Object.keys(j.children)){const me=j.children[$t],Le=bt(Z,$t),bi=this.processSegmentGroup(Le,me,$t);if(null===bi)return null;Et.push(...bi)}const Mt=Ln(Et);return Mt.sort((Z,j)=>Z.value.outlet===Qt?-1:j.value.outlet===Qt?1:Z.value.outlet.localeCompare(j.value.outlet)),Mt}processSegment(Z,j,Et,Mt){for(const $t of Z){const me=this.processSegmentAgainstRoute($t,j,Et,Mt);if(null!==me)return me}return Xn(j,Et,Mt)?[]:null}processSegmentAgainstRoute(Z,j,Et,Mt){if(Z.redirectTo||!Cn(Z,j,Et,Mt))return null;let $t,me=[],Le=[];if("**"===Z.path){const zn=Et.length>0?xe(Et).parameters:{};$t=new To(Et,zn,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,So(Z),Vi(Z),Z.component,Z,bn(j),Gn(j)+Et.length,ko(Z))}else{const zn=St(j,Z,Et);if(!zn.matched)return null;me=zn.consumedSegments,Le=Et.slice(zn.lastChild),$t=new To(me,zn.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,So(Z),Vi(Z),Z.component,Z,bn(j),Gn(j)+me.length,ko(Z))}const bi=(lt=Z).children?lt.children:lt.loadChildren?lt._loadedConfig.routes:[],{segmentGroup:$i,slicedSegments:eo}=J(j,me,Le,bi.filter(zn=>void 0===zn.redirectTo),this.relativeLinkResolution);var lt;if(0===eo.length&&$i.hasChildren()){const zn=this.processChildren(bi,$i);return null===zn?null:[new cn($t,zn)]}if(0===bi.length&&0===eo.length)return[new cn($t,[])];const vn=Vi(Z)===Mt,io=this.processSegment(bi,$i,eo,vn?Qt:Mt);return null===io?null:[new cn($t,io)]}}function In(lt){const Z=lt.value.routeConfig;return Z&&""===Z.path&&void 0===Z.redirectTo}function Ln(lt){const Z=[],j=new Set;for(const Et of lt){if(!In(Et)){Z.push(Et);continue}const Mt=Z.find($t=>Et.value.routeConfig===$t.value.routeConfig);void 0!==Mt?(Mt.children.push(...Et.children),j.add(Mt)):Z.push(Et)}for(const Et of j){const Mt=Ln(Et.children);Z.push(new cn(Et.value,Mt))}return Z.filter(Et=>!j.has(Et))}function bn(lt){let Z=lt;for(;Z._sourceSegment;)Z=Z._sourceSegment;return Z}function Gn(lt){let Z=lt,j=Z._segmentIndexShift?Z._segmentIndexShift:0;for(;Z._sourceSegment;)Z=Z._sourceSegment,j+=Z._segmentIndexShift?Z._segmentIndexShift:0;return j-1}function So(lt){return lt.data||{}}function ko(lt){return lt.resolve||{}}function Ws(lt){return(0,Ce.w)(Z=>{const j=lt(Z);return j?(0,n.D)(j).pipe((0,Xe.U)(()=>Z)):(0,o.of)(Z)})}class jl extends class{shouldDetach(Z){return!1}store(Z,j){}shouldAttach(Z){return!1}retrieve(Z){return null}shouldReuseRoute(Z,j){return Z.routeConfig===j.routeConfig}}{}const $r=new a.OlP("ROUTES");class Bo{constructor(Z,j,Et,Mt){this.loader=Z,this.compiler=j,this.onLoadStartListener=Et,this.onLoadEndListener=Mt}load(Z,j){if(j._loader$)return j._loader$;this.onLoadStartListener&&this.onLoadStartListener(j);const Mt=this.loadModuleFactory(j.loadChildren).pipe((0,Xe.U)($t=>{this.onLoadEndListener&&this.onLoadEndListener(j);const me=$t.create(Z);return new Us(ne(me.injector.get($r,void 0,a.XFs.Self|a.XFs.Optional)).map($s),me)}),(0,we.K)($t=>{throw j._loader$=void 0,$t}));return j._loader$=new Y.c(Mt,()=>new X.xQ).pipe((0,Pe.x)()),j._loader$}loadModuleFactory(Z){return"string"==typeof Z?(0,n.D)(this.loader.load(Z)):Zi(Z()).pipe((0,re.zg)(j=>j instanceof a.YKP?(0,o.of)(j):(0,n.D)(this.compiler.compileModuleAsync(j))))}}class Br{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new co,this.attachRef=null}}class co{constructor(){this.contexts=new Map}onChildOutletCreated(Z,j){const Et=this.getOrCreateContext(Z);Et.outlet=j,this.contexts.set(Z,Et)}onChildOutletDestroyed(Z){const j=this.getContext(Z);j&&(j.outlet=null,j.attachRef=null)}onOutletDeactivated(){const Z=this.contexts;return this.contexts=new Map,Z}onOutletReAttached(Z){this.contexts=Z}getOrCreateContext(Z){let j=this.getContext(Z);return j||(j=new Br,this.contexts.set(Z,j)),j}getContext(Z){return this.contexts.get(Z)||null}}class hn{shouldProcessUrl(Z){return!0}extract(Z){return Z}merge(Z,j){return Z}}function Tn(lt){throw lt}function to(lt,Z,j){return Z.parse("/")}function as(lt,Z){return(0,o.of)(null)}const Fs={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ls={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Mo=(()=>{class lt{constructor(j,Et,Mt,$t,me,Le,bi,$i){this.rootComponentType=j,this.urlSerializer=Et,this.rootContexts=Mt,this.location=$t,this.config=$i,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new X.xQ,this.errorHandler=Tn,this.malformedUriErrorHandler=to,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:as,afterPreactivation:as},this.urlHandlingStrategy=new hn,this.routeReuseStrategy=new jl,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=me.get(a.h0i),this.console=me.get(a.c2e);const io=me.get(a.R0b);this.isNgZoneEnabled=io instanceof a.R0b&&a.R0b.isInAngularZone(),this.resetConfig($i),this.currentUrlTree=new Pi(new Oi([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Bo(Le,bi,zn=>this.triggerEvent(new di(zn)),zn=>this.triggerEvent(new ge(zn))),this.routerState=ps(this.currentUrlTree,this.rootComponentType),this.transitions=new r.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var j;return null===(j=this.location.getState())||void 0===j?void 0:j.\u0275routerPageId}setupNavigations(j){const Et=this.events;return j.pipe((0,At.h)(Mt=>0!==Mt.id),(0,Xe.U)(Mt=>Object.assign(Object.assign({},Mt),{extractedUrl:this.urlHandlingStrategy.extract(Mt.rawUrl)})),(0,Ce.w)(Mt=>{let $t=!1,me=!1;return(0,o.of)(Mt).pipe((0,ce.b)(Le=>{this.currentNavigation={id:Le.id,initialUrl:Le.currentRawUrl,extractedUrl:Le.extractedUrl,trigger:Le.source,extras:Le.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,Ce.w)(Le=>{const bi=this.browserUrlTree.toString(),$i=!this.navigated||Le.extractedUrl.toString()!==bi||bi!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||$i)&&this.urlHandlingStrategy.shouldProcessUrl(Le.rawUrl))return da(Le.source)&&(this.browserUrlTree=Le.extractedUrl),(0,o.of)(Le).pipe((0,Ce.w)(vn=>{const io=this.transitions.getValue();return Et.next(new Ji(vn.id,this.serializeUrl(vn.extractedUrl),vn.source,vn.restoredState)),io!==this.transitions.getValue()?k.E:Promise.resolve(vn)}),function(lt,Z,j,Et){return(0,Ce.w)(Mt=>function(lt,Z,j,Et,Mt){return new Gs(lt,Z,j,Et,Mt).apply()}(lt,Z,j,Mt.extractedUrl,Et).pipe((0,Xe.U)($t=>Object.assign(Object.assign({},Mt),{urlAfterRedirects:$t}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,ce.b)(vn=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:vn.urlAfterRedirects})}),function(lt,Z,j,Et,Mt){return(0,re.zg)($t=>function(lt,Z,j,Et,Mt="emptyOnly",$t="legacy"){try{const me=new mi(lt,Z,j,Et,Mt,$t).recognize();return null===me?Se(new _e):(0,o.of)(me)}catch(me){return Se(me)}}(lt,Z,$t.urlAfterRedirects,j($t.urlAfterRedirects),Et,Mt).pipe((0,Xe.U)(me=>Object.assign(Object.assign({},$t),{targetSnapshot:me}))))}(this.rootComponentType,this.config,vn=>this.serializeUrl(vn),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,ce.b)(vn=>{"eager"===this.urlUpdateStrategy&&(vn.extras.skipLocationChange||this.setBrowserUrl(vn.urlAfterRedirects,vn),this.browserUrlTree=vn.urlAfterRedirects);const io=new Be(vn.id,this.serializeUrl(vn.extractedUrl),this.serializeUrl(vn.urlAfterRedirects),vn.targetSnapshot);Et.next(io)}));if($i&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:io,extractedUrl:zn,source:cs,restoredState:lr,extras:cr}=Le,Bs=new Ji(io,this.serializeUrl(zn),cs,lr);Et.next(Bs);const Zo=ps(zn,this.rootComponentType).snapshot;return(0,o.of)(Object.assign(Object.assign({},Le),{targetSnapshot:Zo,urlAfterRedirects:zn,extras:Object.assign(Object.assign({},cr),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=Le.rawUrl,this.browserUrlTree=Le.urlAfterRedirects,Le.resolve(null),k.E}),Ws(Le=>{const{targetSnapshot:bi,id:$i,extractedUrl:eo,rawUrl:vn,extras:{skipLocationChange:io,replaceUrl:zn}}=Le;return this.hooks.beforePreactivation(bi,{navigationId:$i,appliedUrlTree:eo,rawUrlTree:vn,skipLocationChange:!!io,replaceUrl:!!zn})}),(0,ce.b)(Le=>{const bi=new Ft(Le.id,this.serializeUrl(Le.extractedUrl),this.serializeUrl(Le.urlAfterRedirects),Le.targetSnapshot);this.triggerEvent(bi)}),(0,Xe.U)(Le=>Object.assign(Object.assign({},Le),{guards:hl(Le.targetSnapshot,Le.currentSnapshot,this.rootContexts)})),function(lt,Z){return(0,re.zg)(j=>{const{targetSnapshot:Et,currentSnapshot:Mt,guards:{canActivateChecks:$t,canDeactivateChecks:me}}=j;return 0===me.length&&0===$t.length?(0,o.of)(Object.assign(Object.assign({},j),{guardsResult:!0})):function(lt,Z,j,Et){return(0,n.D)(lt).pipe((0,re.zg)(Mt=>function(lt,Z,j,Et,Mt){const $t=Z&&Z.routeConfig?Z.routeConfig.canDeactivate:null;if(!$t||0===$t.length)return(0,o.of)(!0);const me=$t.map(Le=>{const bi=br(Le,Z,Mt);let $i;if(function(lt){return lt&&xo(lt.canDeactivate)}(bi))$i=Zi(bi.canDeactivate(lt,Z,j,Et));else{if(!xo(bi))throw new Error("Invalid CanDeactivate guard");$i=Zi(bi(lt,Z,j,Et))}return $i.pipe(Ne())});return(0,o.of)(me).pipe(Po())}(Mt.component,Mt.route,j,Z,Et)),Ne(Mt=>!0!==Mt,!0))}(me,Et,Mt,lt).pipe((0,re.zg)(Le=>Le&&function(lt){return"boolean"==typeof lt}(Le)?function(lt,Z,j,Et){return(0,n.D)(Z).pipe((0,ai.b)(Mt=>(0,I.z)(function(lt,Z){return null!==lt&&Z&&Z(new Ve(lt)),(0,o.of)(!0)}(Mt.route.parent,Et),function(lt,Z){return null!==lt&&Z&&Z(new $(lt)),(0,o.of)(!0)}(Mt.route,Et),function(lt,Z,j){const Et=Z[Z.length-1],$t=Z.slice(0,Z.length-1).reverse().map(me=>function(lt){const Z=lt.routeConfig?lt.routeConfig.canActivateChild:null;return Z&&0!==Z.length?{node:lt,guards:Z}:null}(me)).filter(me=>null!==me).map(me=>(0,x.P)(()=>{const Le=me.guards.map(bi=>{const $i=br(bi,me.node,j);let eo;if(function(lt){return lt&&xo(lt.canActivateChild)}($i))eo=Zi($i.canActivateChild(Et,lt));else{if(!xo($i))throw new Error("Invalid CanActivateChild guard");eo=Zi($i(Et,lt))}return eo.pipe(Ne())});return(0,o.of)(Le).pipe(Po())}));return(0,o.of)($t).pipe(Po())}(lt,Mt.path,j),function(lt,Z,j){const Et=Z.routeConfig?Z.routeConfig.canActivate:null;if(!Et||0===Et.length)return(0,o.of)(!0);const Mt=Et.map($t=>(0,x.P)(()=>{const me=br($t,Z,j);let Le;if(function(lt){return lt&&xo(lt.canActivate)}(me))Le=Zi(me.canActivate(Z,lt));else{if(!xo(me))throw new Error("Invalid CanActivate guard");Le=Zi(me(Z,lt))}return Le.pipe(Ne())}));return(0,o.of)(Mt).pipe(Po())}(lt,Mt.route,j))),Ne(Mt=>!0!==Mt,!0))}(Et,$t,lt,Z):(0,o.of)(Le)),(0,Xe.U)(Le=>Object.assign(Object.assign({},j),{guardsResult:Le})))})}(this.ngModule.injector,Le=>this.triggerEvent(Le)),(0,ce.b)(Le=>{if(ho(Le.guardsResult)){const $i=Di(`Redirecting to "${this.serializeUrl(Le.guardsResult)}"`);throw $i.url=Le.guardsResult,$i}const bi=new ie(Le.id,this.serializeUrl(Le.extractedUrl),this.serializeUrl(Le.urlAfterRedirects),Le.targetSnapshot,!!Le.guardsResult);this.triggerEvent(bi)}),(0,At.h)(Le=>!!Le.guardsResult||(this.restoreHistory(Le),this.cancelNavigationTransition(Le,""),!1)),Ws(Le=>{if(Le.guards.canActivateChecks.length)return(0,o.of)(Le).pipe((0,ce.b)(bi=>{const $i=new hi(bi.id,this.serializeUrl(bi.extractedUrl),this.serializeUrl(bi.urlAfterRedirects),bi.targetSnapshot);this.triggerEvent($i)}),(0,Ce.w)(bi=>{let $i=!1;return(0,o.of)(bi).pipe(function(lt,Z){return(0,re.zg)(j=>{const{targetSnapshot:Et,guards:{canActivateChecks:Mt}}=j;if(!Mt.length)return(0,o.of)(j);let $t=0;return(0,n.D)(Mt).pipe((0,ai.b)(me=>function(lt,Z,j,Et){return function(lt,Z,j,Et){const Mt=Object.keys(lt);if(0===Mt.length)return(0,o.of)({});const $t={};return(0,n.D)(Mt).pipe((0,re.zg)(me=>function(lt,Z,j,Et){const Mt=br(lt,Z,Et);return Zi(Mt.resolve?Mt.resolve(Z,j):Mt(Z,j))}(lt[me],Z,j,Et).pipe((0,ce.b)(Le=>{$t[me]=Le}))),Dt(1),(0,re.zg)(()=>Object.keys($t).length===Mt.length?(0,o.of)($t):k.E))}(lt._resolve,lt,Z,Et).pipe((0,Xe.U)($t=>(lt._resolvedData=$t,lt.data=Object.assign(Object.assign({},lt.data),rs(lt,j).resolve),null)))}(me.route,Et,lt,Z)),(0,ce.b)(()=>$t++),Dt(1),(0,re.zg)(me=>$t===Mt.length?(0,o.of)(j):k.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,ce.b)({next:()=>$i=!0,complete:()=>{$i||(this.restoreHistory(bi),this.cancelNavigationTransition(bi,"At least one route resolver didn't emit any value."))}}))}),(0,ce.b)(bi=>{const $i=new fe(bi.id,this.serializeUrl(bi.extractedUrl),this.serializeUrl(bi.urlAfterRedirects),bi.targetSnapshot);this.triggerEvent($i)}))}),Ws(Le=>{const{targetSnapshot:bi,id:$i,extractedUrl:eo,rawUrl:vn,extras:{skipLocationChange:io,replaceUrl:zn}}=Le;return this.hooks.afterPreactivation(bi,{navigationId:$i,appliedUrlTree:eo,rawUrlTree:vn,skipLocationChange:!!io,replaceUrl:!!zn})}),(0,Xe.U)(Le=>{const bi=function(lt,Z,j){const Et=ns(lt,Z._root,j?j._root:void 0);return new gr(Et,Z)}(this.routeReuseStrategy,Le.targetSnapshot,Le.currentRouterState);return Object.assign(Object.assign({},Le),{targetRouterState:bi})}),(0,ce.b)(Le=>{this.currentUrlTree=Le.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(Le.urlAfterRedirects,Le.rawUrl),this.routerState=Le.targetRouterState,"deferred"===this.urlUpdateStrategy&&(Le.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,Le),this.browserUrlTree=Le.urlAfterRedirects)}),((lt,Z,j)=>(0,Xe.U)(Et=>(new Ds(Z,Et.targetRouterState,Et.currentRouterState,j).activate(lt),Et)))(this.rootContexts,this.routeReuseStrategy,Le=>this.triggerEvent(Le)),(0,ce.b)({next(){$t=!0},complete(){$t=!0}}),(0,qe.x)(()=>{var Le;if(!$t&&!me){const bi=`Navigation ID ${Mt.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(Mt),this.cancelNavigationTransition(Mt,bi)):this.cancelNavigationTransition(Mt,bi)}(null===(Le=this.currentNavigation)||void 0===Le?void 0:Le.id)===Mt.id&&(this.currentNavigation=null)}),(0,we.K)(Le=>{if(me=!0,function(lt){return lt&&lt[ni]}(Le)){const bi=ho(Le.url);bi||(this.navigated=!0,this.restoreHistory(Mt,!0));const $i=new ui(Mt.id,this.serializeUrl(Mt.extractedUrl),Le.message);Et.next($i),bi?setTimeout(()=>{const eo=this.urlHandlingStrategy.merge(Le.url,this.rawUrlTree),vn={skipLocationChange:Mt.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||da(Mt.source)};this.scheduleNavigation(eo,"imperative",null,vn,{resolve:Mt.resolve,reject:Mt.reject,promise:Mt.promise})},0):Mt.resolve(!1)}else{this.restoreHistory(Mt,!0);const bi=new Oe(Mt.id,this.serializeUrl(Mt.extractedUrl),Le);Et.next(bi);try{Mt.resolve(this.errorHandler(Le))}catch($i){Mt.reject($i)}}return k.E}))}))}resetRootComponentType(j){this.rootComponentType=j,this.routerState.root.component=this.rootComponentType}getTransition(){const j=this.transitions.value;return j.urlAfterRedirects=this.browserUrlTree,j}setTransition(j){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),j))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(j=>{const Et=this.extractLocationChangeInfoFromEvent(j);this.shouldScheduleNavigation(this.lastLocationChangeInfo,Et)&&setTimeout(()=>{const{source:Mt,state:$t,urlTree:me}=Et,Le={replaceUrl:!0};if($t){const bi=Object.assign({},$t);delete bi.navigationId,delete bi.\u0275routerPageId,0!==Object.keys(bi).length&&(Le.state=bi)}this.scheduleNavigation(me,Mt,$t,Le)},0),this.lastLocationChangeInfo=Et}))}extractLocationChangeInfoFromEvent(j){var Et;return{source:"popstate"===j.type?"popstate":"hashchange",urlTree:this.parseUrl(j.url),state:(null===(Et=j.state)||void 0===Et?void 0:Et.navigationId)?j.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(j,Et){if(!j)return!0;const Mt=Et.urlTree.toString()===j.urlTree.toString();return Et.transitionId!==j.transitionId||!Mt||!("hashchange"===Et.source&&"popstate"===j.source||"popstate"===Et.source&&"hashchange"===j.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(j){this.events.next(j)}resetConfig(j){Nr(j),this.config=j.map($s),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(j,Et={}){const{relativeTo:Mt,queryParams:$t,fragment:me,queryParamsHandling:Le,preserveFragment:bi}=Et,$i=Mt||this.routerState.root,eo=bi?this.currentUrlTree.fragment:me;let vn=null;switch(Le){case"merge":vn=Object.assign(Object.assign({},this.currentUrlTree.queryParams),$t);break;case"preserve":vn=this.currentUrlTree.queryParams;break;default:vn=$t||null}return null!==vn&&(vn=this.removeEmptyProps(vn)),function(lt,Z,j,Et,Mt){if(0===j.length)return Jr(Z.root,Z.root,Z,Et,Mt);const $t=function(lt){if("string"==typeof lt[0]&&1===lt.length&&"/"===lt[0])return new xr(!0,0,lt);let Z=0,j=!1;const Et=lt.reduce((Mt,$t,me)=>{if("object"==typeof $t&&null!=$t){if($t.outlets){const Le={};return yi($t.outlets,(bi,$i)=>{Le[$i]="string"==typeof bi?bi.split("/"):bi}),[...Mt,{outlets:Le}]}if($t.segmentPath)return[...Mt,$t.segmentPath]}return"string"!=typeof $t?[...Mt,$t]:0===me?($t.split("/").forEach((Le,bi)=>{0==bi&&"."===Le||(0==bi&&""===Le?j=!0:".."===Le?Z++:""!=Le&&Mt.push(Le))}),Mt):[...Mt,$t]},[]);return new xr(j,Z,Et)}(j);if($t.toRoot())return Jr(Z.root,new Oi([],{}),Z,Et,Mt);const me=function(lt,Z,j){if(lt.isAbsolute)return new Ea(Z.root,!0,0);if(-1===j.snapshot._lastPathIndex){const $t=j.snapshot._urlSegment;return new Ea($t,$t===Z.root,0)}const Et=ir(lt.commands[0])?0:1;return function(lt,Z,j){let Et=lt,Mt=Z,$t=j;for(;$t>Mt;){if($t-=Mt,Et=Et.parent,!Et)throw new Error("Invalid number of '../'");Mt=Et.segments.length}return new Ea(Et,!1,Mt-$t)}(j.snapshot._urlSegment,j.snapshot._lastPathIndex+Et,lt.numberOfDoubleDots)}($t,Z,lt),Le=me.processChildren?Cs(me.segmentGroup,me.index,$t.commands):sa(me.segmentGroup,me.index,$t.commands);return Jr(me.segmentGroup,Le,Z,Et,Mt)}($i,this.currentUrlTree,j,vn,null!=eo?eo:null)}navigateByUrl(j,Et={skipLocationChange:!1}){const Mt=ho(j)?j:this.parseUrl(j),$t=this.urlHandlingStrategy.merge(Mt,this.rawUrlTree);return this.scheduleNavigation($t,"imperative",null,Et)}navigate(j,Et={skipLocationChange:!1}){return function(lt){for(let Z=0;Z<lt.length;Z++){const j=lt[Z];if(null==j)throw new Error(`The requested path contains ${j} segment at index ${Z}`)}}(j),this.navigateByUrl(this.createUrlTree(j,Et),Et)}serializeUrl(j){return this.urlSerializer.serialize(j)}parseUrl(j){let Et;try{Et=this.urlSerializer.parse(j)}catch(Mt){Et=this.malformedUriErrorHandler(Mt,this.urlSerializer,j)}return Et}isActive(j,Et){let Mt;if(Mt=!0===Et?Object.assign({},Fs):!1===Et?Object.assign({},ls):Et,ho(j))return Re(this.currentUrlTree,j,Mt);const $t=this.parseUrl(j);return Re(this.currentUrlTree,$t,Mt)}removeEmptyProps(j){return Object.keys(j).reduce((Et,Mt)=>{const $t=j[Mt];return null!=$t&&(Et[Mt]=$t),Et},{})}processNavigations(){this.navigations.subscribe(j=>{this.navigated=!0,this.lastSuccessfulId=j.id,this.currentPageId=j.targetPageId,this.events.next(new Ni(j.id,this.serializeUrl(j.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,j.resolve(!0)},j=>{this.console.warn(`Unhandled Navigation Error: ${j}`)})}scheduleNavigation(j,Et,Mt,$t,me){var Le,bi;if(this.disposed)return Promise.resolve(!1);const $i=this.getTransition(),eo=da(Et)&&$i&&!da($i.source),zn=(this.lastSuccessfulId===$i.id||this.currentNavigation?$i.rawUrl:$i.urlAfterRedirects).toString()===j.toString();if(eo&&zn)return Promise.resolve(!0);let cs,lr,cr;me?(cs=me.resolve,lr=me.reject,cr=me.promise):cr=new Promise((Ko,Yr)=>{cs=Ko,lr=Yr});const Bs=++this.navigationId;let Zo;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(Mt=this.location.getState()),Zo=Mt&&Mt.\u0275routerPageId?Mt.\u0275routerPageId:$t.replaceUrl||$t.skipLocationChange?null!==(Le=this.browserPageId)&&void 0!==Le?Le:0:(null!==(bi=this.browserPageId)&&void 0!==bi?bi:0)+1):Zo=0,this.setTransition({id:Bs,targetPageId:Zo,source:Et,restoredState:Mt,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:j,extras:$t,resolve:cs,reject:lr,promise:cr,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),cr.catch(Ko=>Promise.reject(Ko))}setBrowserUrl(j,Et){const Mt=this.urlSerializer.serialize(j),$t=Object.assign(Object.assign({},Et.extras.state),this.generateNgRouterState(Et.id,Et.targetPageId));this.location.isCurrentPathEqualTo(Mt)||Et.extras.replaceUrl?this.location.replaceState(Mt,"",$t):this.location.go(Mt,"",$t)}restoreHistory(j,Et=!1){var Mt,$t;if("computed"===this.canceledNavigationResolution){const me=this.currentPageId-j.targetPageId;"popstate"!==j.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(Mt=this.currentNavigation)||void 0===Mt?void 0:Mt.finalUrl)||0===me?this.currentUrlTree===(null===($t=this.currentNavigation)||void 0===$t?void 0:$t.finalUrl)&&0===me&&(this.resetState(j),this.browserUrlTree=j.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(me)}else"replace"===this.canceledNavigationResolution&&(Et&&this.resetState(j),this.resetUrlToCurrentUrlTree())}resetState(j){this.routerState=j.currentRouterState,this.currentUrlTree=j.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,j.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(j,Et){const Mt=new ui(j.id,this.serializeUrl(j.extractedUrl),Et);this.triggerEvent(Mt),j.resolve(!1)}generateNgRouterState(j,Et){return"computed"===this.canceledNavigationResolution?{navigationId:j,\u0275routerPageId:Et}:{navigationId:j}}}return lt.\u0275fac=function(j){return new(j||lt)(a.LFG(a.DyG),a.LFG(Dn),a.LFG(co),a.LFG(T.Ye),a.LFG(a.zs3),a.LFG(a.v3s),a.LFG(a.Sil),a.LFG(void 0))},lt.\u0275prov=a.Yz7({token:lt,factory:lt.\u0275fac}),lt})();function da(lt){return"imperative"!==lt}let Qs=(()=>{class lt{constructor(j,Et,Mt){this.router=j,this.route=Et,this.locationStrategy=Mt,this.commands=[],this.onChanges=new X.xQ,this.subscription=j.events.subscribe($t=>{$t instanceof Ni&&this.updateTargetUrlAndHref()})}set routerLink(j){this.commands=null!=j?Array.isArray(j)?j:[j]:[]}ngOnChanges(j){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(j,Et,Mt,$t,me){if(0!==j||Et||Mt||$t||me||"string"==typeof this.target&&"_self"!=this.target)return!0;const Le={skipLocationChange:Ss(this.skipLocationChange),replaceUrl:Ss(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,Le),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ss(this.preserveFragment)})}}return lt.\u0275fac=function(j){return new(j||lt)(a.Y36(Mo),a.Y36(Ao),a.Y36(T.S$))},lt.\u0275dir=a.lG2({type:lt,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(j,Et){1&j&&a.NdJ("click",function($t){return Et.onClick($t.button,$t.ctrlKey,$t.shiftKey,$t.altKey,$t.metaKey)}),2&j&&(a.Ikx("href",Et.href,a.LSH),a.uIk("target",Et.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[a.TTD]}),lt})();function Ss(lt){return""===lt||!!lt}let dl=(()=>{class lt{constructor(j,Et,Mt,$t,me){this.parentContexts=j,this.location=Et,this.resolver=Mt,this.changeDetector=me,this.activated=null,this._activatedRoute=null,this.activateEvents=new a.vpe,this.deactivateEvents=new a.vpe,this.name=$t||Qt,j.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const j=this.parentContexts.getContext(this.name);j&&j.route&&(j.attachRef?this.attach(j.attachRef,j.route):this.activateWith(j.route,j.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const j=this.activated;return this.activated=null,this._activatedRoute=null,j}attach(j,Et){this.activated=j,this._activatedRoute=Et,this.location.insert(j.hostView)}deactivate(){if(this.activated){const j=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(j)}}activateWith(j,Et){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=j;const me=(Et=Et||this.resolver).resolveComponentFactory(j._futureSnapshot.routeConfig.component),Le=this.parentContexts.getOrCreateContext(this.name).children,bi=new Zr(j,Le,this.location.injector);this.activated=this.location.createComponent(me,this.location.length,bi),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return lt.\u0275fac=function(j){return new(j||lt)(a.Y36(co),a.Y36(a.s_b),a.Y36(a._Vd),a.$8M("name"),a.Y36(a.sBO))},lt.\u0275dir=a.lG2({type:lt,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),lt})();class Zr{constructor(Z,j,Et){this.route=Z,this.childContexts=j,this.parent=Et}get(Z,j){return Z===Ao?this.route:Z===co?this.childContexts:this.parent.get(Z,j)}}class jr{}class Ml{preload(Z,j){return(0,o.of)(null)}}let Qr=(()=>{class lt{constructor(j,Et,Mt,$t,me){this.router=j,this.injector=$t,this.preloadingStrategy=me,this.loader=new Bo(Et,Mt,$i=>j.triggerEvent(new di($i)),$i=>j.triggerEvent(new ge($i)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,At.h)(j=>j instanceof Ni),(0,ai.b)(()=>this.preload())).subscribe(()=>{})}preload(){const j=this.injector.get(a.h0i);return this.processRoutes(j,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(j,Et){const Mt=[];for(const $t of Et)if($t.loadChildren&&!$t.canLoad&&$t._loadedConfig){const me=$t._loadedConfig;Mt.push(this.processRoutes(me.module,me.routes))}else $t.loadChildren&&!$t.canLoad?Mt.push(this.preloadConfig(j,$t)):$t.children&&Mt.push(this.processRoutes(j,$t.children));return(0,n.D)(Mt).pipe((0,oi.J)(),(0,Xe.U)($t=>{}))}preloadConfig(j,Et){return this.preloadingStrategy.preload(Et,()=>(Et._loadedConfig?(0,o.of)(Et._loadedConfig):this.loader.load(j.injector,Et)).pipe((0,re.zg)($t=>(Et._loadedConfig=$t,this.processRoutes($t.module,$t.routes)))))}}return lt.\u0275fac=function(j){return new(j||lt)(a.LFG(Mo),a.LFG(a.v3s),a.LFG(a.Sil),a.LFG(a.zs3),a.LFG(jr))},lt.\u0275prov=a.Yz7({token:lt,factory:lt.\u0275fac}),lt})(),Yl=(()=>{class lt{constructor(j,Et,Mt={}){this.router=j,this.viewportScroller=Et,this.options=Mt,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},Mt.scrollPositionRestoration=Mt.scrollPositionRestoration||"disabled",Mt.anchorScrolling=Mt.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(j=>{j instanceof Ji?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=j.navigationTrigger,this.restoredId=j.restoredState?j.restoredState.navigationId:0):j instanceof Ni&&(this.lastId=j.id,this.scheduleScrollEvent(j,this.router.parseUrl(j.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(j=>{j instanceof zt&&(j.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(j.position):j.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(j.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(j,Et){this.router.triggerEvent(new zt(j,"popstate"===this.lastSource?this.store[this.restoredId]:null,Et))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return lt.\u0275fac=function(j){return new(j||lt)(a.LFG(Mo),a.LFG(T.EM),a.LFG(void 0))},lt.\u0275prov=a.Yz7({token:lt,factory:lt.\u0275fac}),lt})();const rr=new a.OlP("ROUTER_CONFIGURATION"),js=new a.OlP("ROUTER_FORROOT_GUARD"),ar=[T.Ye,{provide:Dn,useClass:Do},{provide:Mo,useFactory:function(lt,Z,j,Et,Mt,$t,me,Le={},bi,$i){const eo=new Mo(null,lt,Z,j,Et,Mt,$t,ne(me));return bi&&(eo.urlHandlingStrategy=bi),$i&&(eo.routeReuseStrategy=$i),function(lt,Z){lt.errorHandler&&(Z.errorHandler=lt.errorHandler),lt.malformedUriErrorHandler&&(Z.malformedUriErrorHandler=lt.malformedUriErrorHandler),lt.onSameUrlNavigation&&(Z.onSameUrlNavigation=lt.onSameUrlNavigation),lt.paramsInheritanceStrategy&&(Z.paramsInheritanceStrategy=lt.paramsInheritanceStrategy),lt.relativeLinkResolution&&(Z.relativeLinkResolution=lt.relativeLinkResolution),lt.urlUpdateStrategy&&(Z.urlUpdateStrategy=lt.urlUpdateStrategy)}(Le,eo),Le.enableTracing&&eo.events.subscribe(vn=>{var io,zn;null===(io=console.group)||void 0===io||io.call(console,`Router Event: ${vn.constructor.name}`),console.log(vn.toString()),console.log(vn),null===(zn=console.groupEnd)||void 0===zn||zn.call(console)}),eo},deps:[Dn,co,T.Ye,a.zs3,a.v3s,a.Sil,$r,rr,[class{},new a.FiY],[class{},new a.FiY]]},co,{provide:Ao,useFactory:function(lt){return lt.routerState.root},deps:[Mo]},{provide:a.v3s,useClass:a.EAV},Qr,Ml,class{preload(Z,j){return j().pipe((0,we.K)(()=>(0,o.of)(null)))}},{provide:rr,useValue:{enableTracing:!1}}];function pl(){return new a.PXZ("Router",Mo)}let Ca=(()=>{class lt{constructor(j,Et){}static forRoot(j,Et){return{ngModule:lt,providers:[ar,fl(j),{provide:js,useFactory:Ol,deps:[[Mo,new a.FiY,new a.tp0]]},{provide:rr,useValue:Et||{}},{provide:T.S$,useFactory:Sa,deps:[T.lw,[new a.tBr(T.mr),new a.FiY],rr]},{provide:Yl,useFactory:Uc,deps:[Mo,T.EM,rr]},{provide:jr,useExisting:Et&&Et.preloadingStrategy?Et.preloadingStrategy:Ml},{provide:a.PXZ,multi:!0,useFactory:pl},[Kl,{provide:a.ip1,multi:!0,useFactory:Su,deps:[Kl]},{provide:Fa,useFactory:gl,deps:[Kl]},{provide:a.tb,multi:!0,useExisting:Fa}]]}}static forChild(j){return{ngModule:lt,providers:[fl(j)]}}}return lt.\u0275fac=function(j){return new(j||lt)(a.LFG(js,8),a.LFG(Mo,8))},lt.\u0275mod=a.oAB({type:lt}),lt.\u0275inj=a.cJS({}),lt})();function Uc(lt,Z,j){return j.scrollOffset&&Z.setOffset(j.scrollOffset),new Yl(lt,Z,j)}function Sa(lt,Z,j={}){return j.useHash?new T.Do(lt,Z):new T.b0(lt,Z)}function Ol(lt){return"guarded"}function fl(lt){return[{provide:a.deG,multi:!0,useValue:lt},{provide:$r,multi:!0,useValue:lt}]}let Kl=(()=>{class lt{constructor(j){this.injector=j,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new X.xQ}appInitializer(){return this.injector.get(T.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let Et=null;const Mt=new Promise(Le=>Et=Le),$t=this.injector.get(Mo),me=this.injector.get(rr);return"disabled"===me.initialNavigation?($t.setUpLocationChangeListener(),Et(!0)):"enabled"===me.initialNavigation||"enabledBlocking"===me.initialNavigation?($t.hooks.afterPreactivation=()=>this.initNavigation?(0,o.of)(null):(this.initNavigation=!0,Et(!0),this.resultOfPreactivationDone),$t.initialNavigation()):Et(!0),Mt})}bootstrapListener(j){const Et=this.injector.get(rr),Mt=this.injector.get(Qr),$t=this.injector.get(Yl),me=this.injector.get(Mo),Le=this.injector.get(a.z2F);j===Le.components[0]&&(("enabledNonBlocking"===Et.initialNavigation||void 0===Et.initialNavigation)&&me.initialNavigation(),Mt.setUpPreloading(),$t.init(),me.resetRootComponentType(Le.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return lt.\u0275fac=function(j){return new(j||lt)(a.LFG(a.zs3))},lt.\u0275prov=a.Yz7({token:lt,factory:lt.\u0275fac}),lt})();function Su(lt){return lt.appInitializer.bind(lt)}function gl(lt){return lt.bootstrapListener.bind(lt)}const Fa=new a.OlP("Router Initializer")},72749:function(B,U,v){var T,a,e;a=[v(99240)],void 0!==(e="function"==typeof(T=function(t){"use strict";return t})?T.apply(U,a):T)&&(B.exports=e)},99240:function(B,U){var v,a;void 0!==(a="function"==typeof(v=function(){"use strict";var e={connectionTypes:{INPUT_VALUE:1,OUTPUT_VALUE:2,NEXT_STATEMENT:3,PREVIOUS_STATEMENT:4},constants:{},LINE_MODE_MULTIPLIER:40,PAGE_MODE_MULTIPLIER:125,DRAG_RADIUS:5,FLYOUT_DRAG_RADIUS:10,SNAP_RADIUS:28};return e.CONNECTING_SNAP_RADIUS=e.SNAP_RADIUS,e.CURRENT_CONNECTION_PREFERENCE=8,e.BUMP_DELAY=250,e.BUMP_RANDOMNESS=10,e.COLLAPSE_CHARS=30,e.LONGPRESS=750,e.SOUND_LIMIT=100,e.DRAG_STACK=!0,e.HSV_SATURATION=.45,e.HSV_VALUE=.65,e.SPRITE={width:96,height:124,url:"sprites.png"},e.constants.ALIGN={LEFT:-1,CENTRE:0,RIGHT:1},e.DRAG_NONE=0,e.DRAG_STICKY=1,e.DRAG_BEGIN=1,e.DRAG_FREE=2,e.OPPOSITE_TYPE=[],e.OPPOSITE_TYPE[e.connectionTypes.INPUT_VALUE]=e.connectionTypes.OUTPUT_VALUE,e.OPPOSITE_TYPE[e.connectionTypes.OUTPUT_VALUE]=e.connectionTypes.INPUT_VALUE,e.OPPOSITE_TYPE[e.connectionTypes.NEXT_STATEMENT]=e.connectionTypes.PREVIOUS_STATEMENT,e.OPPOSITE_TYPE[e.connectionTypes.PREVIOUS_STATEMENT]=e.connectionTypes.NEXT_STATEMENT,e.VARIABLE_CATEGORY_NAME="VARIABLE",e.VARIABLE_DYNAMIC_CATEGORY_NAME="VARIABLE_DYNAMIC",e.PROCEDURE_CATEGORY_NAME="PROCEDURE",e.RENAME_VARIABLE_ID="RENAME_VARIABLE_ID",e.DELETE_VARIABLE_ID="DELETE_VARIABLE_ID",e.constants.COLLAPSED_INPUT_NAME="_TEMP_COLLAPSED_INPUT",e.constants.COLLAPSED_FIELD_NAME="_TEMP_COLLAPSED_FIELD",e.utils={},e.utils.global=function(){return"object"==typeof self?self:"object"==typeof window?window:"object"==typeof global?global:this}(),e.Msg={},e.utils.global.Blockly||(e.utils.global.Blockly={}),e.utils.global.Blockly.Msg||(e.utils.global.Blockly.Msg=e.Msg),e.utils.colour={},e.utils.colour.parse=function(t){t=String(t).toLowerCase().trim();var n=e.utils.colour.names[t];if(n||(n="0x"==t.substring(0,2)?"#"+t.substring(2):t,/^#[0-9a-f]{6}$/.test(n="#"==n[0]?n:"#"+n)))return n;if(/^#[0-9a-f]{3}$/.test(n))return["#",n[1],n[1],n[2],n[2],n[3],n[3]].join("");var o=t.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return o&&(t=Number(o[1]),n=Number(o[2]),o=Number(o[3]),0<=t&&256>t&&0<=n&&256>n&&0<=o&&256>o)?e.utils.colour.rgbToHex(t,n,o):null},e.utils.colour.rgbToHex=function(t,n,o){return n=t<<16|n<<8|o,16>t?"#"+(16777216|n).toString(16).substr(1):"#"+n.toString(16)},e.utils.colour.hexToRgb=function(t){return(t=e.utils.colour.parse(t))?[(t=parseInt(t.substr(1),16))>>16,t>>8&255,255&t]:[0,0,0]},e.utils.colour.hsvToHex=function(t,n,o){var r=0,p=0,b=0;if(0==n)b=p=r=o;else{var I=Math.floor(t/60),x=t/60-I;t=o*(1-n);var k=o*(1-n*x);switch(n=o*(1-n*(1-x)),I){case 1:r=k,p=o,b=t;break;case 2:r=t,p=o,b=n;break;case 3:r=t,p=k,b=o;break;case 4:r=n,p=t,b=o;break;case 5:r=o,p=t,b=k;break;case 6:case 0:r=o,p=n,b=t}}return e.utils.colour.rgbToHex(Math.floor(r),Math.floor(p),Math.floor(b))},e.utils.colour.blend=function(t,n,o){return(t=e.utils.colour.parse(t))&&(n=e.utils.colour.parse(n))?(t=e.utils.colour.hexToRgb(t),n=e.utils.colour.hexToRgb(n),e.utils.colour.rgbToHex(Math.round(n[0]+o*(t[0]-n[0])),Math.round(n[1]+o*(t[1]-n[1])),Math.round(n[2]+o*(t[2]-n[2])))):null},e.utils.colour.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},e.utils.Coordinate=function(t,n){this.x=t,this.y=n},e.utils.Coordinate.equals=function(t,n){return t==n||!(!t||!n)&&t.x==n.x&&t.y==n.y},e.utils.Coordinate.distance=function(t,n){var o=t.x-n.x;return t=t.y-n.y,Math.sqrt(o*o+t*t)},e.utils.Coordinate.magnitude=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},e.utils.Coordinate.difference=function(t,n){return new e.utils.Coordinate(t.x-n.x,t.y-n.y)},e.utils.Coordinate.sum=function(t,n){return new e.utils.Coordinate(t.x+n.x,t.y+n.y)},e.utils.Coordinate.prototype.clone=function(){return new e.utils.Coordinate(this.x,this.y)},e.utils.Coordinate.prototype.scale=function(t){return this.x*=t,this.y*=t,this},e.utils.Coordinate.prototype.translate=function(t,n){return this.x+=t,this.y+=n,this},e.utils.Rect=function(t,n,o,r){this.top=t,this.bottom=n,this.left=o,this.right=r},e.utils.Rect.prototype.contains=function(t,n){return t>=this.left&&t<=this.right&&n>=this.top&&n<=this.bottom},e.utils.Rect.prototype.intersects=function(t){return!(this.left>t.right||this.right<t.left||this.top>t.bottom||this.bottom<t.top)},e.utils.string={},e.utils.string.startsWith=function(t,n){return 0==t.lastIndexOf(n,0)},e.utils.string.shortestStringLength=function(t){return t.length?t.reduce(function(n,o){return n.length<o.length?n:o}).length:0},e.utils.string.commonWordPrefix=function(t,n){if(!t.length)return 0;if(1==t.length)return t[0].length;var o=0;n=n||e.utils.string.shortestStringLength(t);for(var r=0;r<n;r++){for(var p=t[0][r],b=1;b<t.length;b++)if(p!=t[b][r])return o;" "==p&&(o=r+1)}for(b=1;b<t.length;b++)if((p=t[b][r])&&" "!=p)return o;return n},e.utils.string.commonWordSuffix=function(t,n){if(!t.length)return 0;if(1==t.length)return t[0].length;var o=0;n=n||e.utils.string.shortestStringLength(t);for(var r=0;r<n;r++){for(var p=t[0].substr(-r-1,1),b=1;b<t.length;b++)if(p!=t[b].substr(-r-1,1))return o;" "==p&&(o=r+1)}for(b=1;b<t.length;b++)if((p=t[b].charAt(t[b].length-r-1))&&" "!=p)return o;return n},e.utils.string.wrap=function(t,n){t=t.split("\n");for(var o=0;o<t.length;o++)t[o]=e.utils.string.wrapLine_(t[o],n);return t.join("\n")},e.utils.string.wrapLine_=function(t,n){if(t.length<=n)return t;for(var o=t.trim().split(/\s+/),r=0;r<o.length;r++)o[r].length>n&&(n=o[r].length);r=-1/0;var p=1;do{var b=r,I=t;t=[];var x=o.length/p,k=1;for(r=0;r<o.length-1;r++)k<(r+1.5)/x?(k++,t[r]=!0):t[r]=!1;t=e.utils.string.wrapMutate_(o,t,n),r=e.utils.string.wrapScore_(o,t,n),t=e.utils.string.wrapToText_(o,t),p++}while(r>b);return I},e.utils.string.wrapScore_=function(t,n,o){for(var r=[0],p=[],b=0;b<t.length;b++)r[r.length-1]+=t[b].length,!0===n[b]?(r.push(0),p.push(t[b].charAt(t[b].length-1))):!1===n[b]&&r[r.length-1]++;for(t=Math.max.apply(Math,r),b=n=0;b<r.length;b++)n-=2*Math.pow(Math.abs(o-r[b]),1.5),n-=Math.pow(t-r[b],1.5),-1!=".?!".indexOf(p[b])?n+=o/3:-1!=",;)]}".indexOf(p[b])&&(n+=o/4);return 1<r.length&&r[r.length-1]<=r[r.length-2]&&(n+=.5),n},e.utils.string.wrapMutate_=function(t,n,o){for(var p,r=e.utils.string.wrapScore_(t,n,o),b=0;b<n.length-1;b++)if(n[b]!=n[b+1]){var I=[].concat(n);I[b]=!I[b],I[b+1]=!I[b+1];var x=e.utils.string.wrapScore_(t,I,o);x>r&&(r=x,p=I)}return p?e.utils.string.wrapMutate_(t,p,o):n},e.utils.string.wrapToText_=function(t,n){for(var o=[],r=0;r<t.length;r++)o.push(t[r]),void 0!==n[r]&&o.push(n[r]?"\n":" ");return o.join("")},e.utils.Size=function(t,n){this.width=t,this.height=n},e.utils.Size.equals=function(t,n){return t==n||!(!t||!n)&&t.width==n.width&&t.height==n.height},e.utils.style={},e.utils.style.getSize=function(t){if("none"!=e.utils.style.getStyle_(t,"display"))return e.utils.style.getSizeWithDisplay_(t);var n=t.style,o=n.display,r=n.visibility,p=n.position;n.visibility="hidden",n.position="absolute",n.display="inline";var b=t.offsetWidth;return t=t.offsetHeight,n.display=o,n.position=p,n.visibility=r,new e.utils.Size(b,t)},e.utils.style.getSizeWithDisplay_=function(t){return new e.utils.Size(t.offsetWidth,t.offsetHeight)},e.utils.style.getStyle_=function(t,n){return e.utils.style.getComputedStyle(t,n)||e.utils.style.getCascadedStyle(t,n)||t.style&&t.style[n]},e.utils.style.getComputedStyle=function(t,n){return document.defaultView&&document.defaultView.getComputedStyle&&(t=document.defaultView.getComputedStyle(t,null))&&(t[n]||t.getPropertyValue(n))||""},e.utils.style.getCascadedStyle=function(t,n){return t.currentStyle?t.currentStyle[n]:null},e.utils.style.getPageOffset=function(t){var n=new e.utils.Coordinate(0,0);t=t.getBoundingClientRect();var o=document.documentElement;return o=new e.utils.Coordinate(window.pageXOffset||o.scrollLeft,window.pageYOffset||o.scrollTop),n.x=t.left+o.x,n.y=t.top+o.y,n},e.utils.style.getViewportPageOffset=function(){var t=document.body,n=document.documentElement;return new e.utils.Coordinate(t.scrollLeft||n.scrollLeft,t.scrollTop||n.scrollTop)},e.utils.style.setElementShown=function(t,n){t.style.display=n?"":"none"},e.utils.style.isRightToLeft=function(t){return"rtl"==e.utils.style.getStyle_(t,"direction")},e.utils.style.getBorderBox=function(t){var n=e.utils.style.getComputedStyle(t,"borderLeftWidth"),o=e.utils.style.getComputedStyle(t,"borderRightWidth"),r=e.utils.style.getComputedStyle(t,"borderTopWidth");return t=e.utils.style.getComputedStyle(t,"borderBottomWidth"),{top:parseFloat(r),right:parseFloat(o),bottom:parseFloat(t),left:parseFloat(n)}},e.utils.style.scrollIntoContainerView=function(t,n,o){t=e.utils.style.getContainerOffsetToScrollInto(t,n,o),n.scrollLeft=t.x,n.scrollTop=t.y},e.utils.style.getContainerOffsetToScrollInto=function(t,n,o){var r=e.utils.style.getPageOffset(t),p=e.utils.style.getPageOffset(n),b=e.utils.style.getBorderBox(n),I=r.x-p.x-b.left;return r=r.y-p.y-b.top,p=e.utils.style.getSizeWithDisplay_(t),t=n.clientWidth-p.width,p=n.clientHeight-p.height,b=n.scrollLeft,n=n.scrollTop,o?(b+=I-t/2,n+=r-p/2):(b+=Math.min(I,Math.max(I-t,0)),n+=Math.min(r,Math.max(r-p,0))),new e.utils.Coordinate(b,n)},e.utils.userAgent={},function(t){function n(r){return-1!=o.indexOf(r.toUpperCase())}e.utils.userAgent.raw=t;var o=e.utils.userAgent.raw.toUpperCase();e.utils.userAgent.IE=n("Trident")||n("MSIE"),e.utils.userAgent.EDGE=n("Edge"),e.utils.userAgent.JAVA_FX=n("JavaFX"),e.utils.userAgent.CHROME=(n("Chrome")||n("CriOS"))&&!e.utils.userAgent.EDGE,e.utils.userAgent.WEBKIT=n("WebKit")&&!e.utils.userAgent.EDGE,e.utils.userAgent.GECKO=n("Gecko")&&!e.utils.userAgent.WEBKIT&&!e.utils.userAgent.IE&&!e.utils.userAgent.EDGE,e.utils.userAgent.ANDROID=n("Android"),t=e.utils.global.navigator&&e.utils.global.navigator.maxTouchPoints,e.utils.userAgent.IPAD=n("iPad")||n("Macintosh")&&0<t,e.utils.userAgent.IPOD=n("iPod"),e.utils.userAgent.IPHONE=n("iPhone")&&!e.utils.userAgent.IPAD&&!e.utils.userAgent.IPOD,e.utils.userAgent.MAC=n("Macintosh"),e.utils.userAgent.TABLET=e.utils.userAgent.IPAD||e.utils.userAgent.ANDROID&&!n("Mobile")||n("Silk"),e.utils.userAgent.MOBILE=!e.utils.userAgent.TABLET&&(e.utils.userAgent.IPOD||e.utils.userAgent.IPHONE||e.utils.userAgent.ANDROID||n("IEMobile"))}(e.utils.global.navigator&&e.utils.global.navigator.userAgent||""),e.utils.noEvent=function(t){t.preventDefault(),t.stopPropagation()},e.utils.isTargetInput=function(t){return"textarea"==t.target.type||"text"==t.target.type||"number"==t.target.type||"email"==t.target.type||"password"==t.target.type||"search"==t.target.type||"tel"==t.target.type||"url"==t.target.type||t.target.isContentEditable||t.target.dataset&&"true"==t.target.dataset.isTextInput},e.utils.getRelativeXY=function(t){var n=new e.utils.Coordinate(0,0),o=t.getAttribute("x");return o&&(n.x=parseInt(o,10)),(o=t.getAttribute("y"))&&(n.y=parseInt(o,10)),(o=(o=t.getAttribute("transform"))&&o.match(e.utils.getRelativeXY.XY_REGEX_))&&(n.x+=Number(o[1]),o[3]&&(n.y+=Number(o[3]))),(t=t.getAttribute("style"))&&-1<t.indexOf("translate")&&(t=t.match(e.utils.getRelativeXY.XY_STYLE_REGEX_))&&(n.x+=Number(t[1]),t[3]&&(n.y+=Number(t[3]))),n},e.utils.getInjectionDivXY_=function(t){for(var n=0,o=0;t;){var r=e.utils.getRelativeXY(t);if(n+=r.x,o+=r.y,-1!=(" "+(t.getAttribute("class")||"")+" ").indexOf(" injectionDiv "))break;t=t.parentNode}return new e.utils.Coordinate(n,o)},e.utils.getRelativeXY.XY_REGEX_=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,e.utils.getRelativeXY.XY_STYLE_REGEX_=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,e.utils.isRightButton=function(t){return!(!t.ctrlKey||!e.utils.userAgent.MAC)||2==t.button},e.utils.mouseToSvg=function(t,n,o){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,o||(o=n.getScreenCTM().inverse()),r.matrixTransform(o)},e.utils.getScrollDeltaPixels=function(t){switch(t.deltaMode){default:return{x:t.deltaX,y:t.deltaY};case 1:return{x:t.deltaX*e.LINE_MODE_MULTIPLIER,y:t.deltaY*e.LINE_MODE_MULTIPLIER};case 2:return{x:t.deltaX*e.PAGE_MODE_MULTIPLIER,y:t.deltaY*e.PAGE_MODE_MULTIPLIER}}},e.utils.tokenizeInterpolation=function(t){return e.utils.tokenizeInterpolation_(t,!0)},e.utils.replaceMessageReferences=function(t){return"string"!=typeof t?t:(t=e.utils.tokenizeInterpolation_(t,!1)).length?String(t[0]):""},e.utils.checkMessageReferences=function(t){for(var n=!0,o=e.Msg,r=t.match(/%{BKY_[A-Z]\w*}/gi),p=0;p<r.length;p++)null==o[r[p].toUpperCase().slice(6,-1)]&&(console.warn("No message string for "+r[p]+" in "+t),n=!1);return n},e.utils.tokenizeInterpolation_=function(t,n){var o=[],r=t.split("");r.push("");var p=0;t=[];for(var b=null,I=0;I<r.length;I++){var x=r[I];0==p?"%"==x?((x=t.join(""))&&o.push(x),t.length=0,p=1):t.push(x):1==p?"%"==x?(t.push(x),p=0):n&&"0"<=x&&"9">=x?(p=2,b=x,(x=t.join(""))&&o.push(x),t.length=0):"{"==x?p=3:(t.push("%",x),p=0):2==p?"0"<=x&&"9">=x?b+=x:(o.push(parseInt(b,10)),I--,p=0):3==p&&(""==x?(t.splice(0,0,"%{"),I--,p=0):"}"!=x?t.push(x):(p=t.join(""),/[A-Z]\w*/i.test(p)?(x=p.toUpperCase(),(x=e.utils.string.startsWith(x,"BKY_")?x.substring(4):null)&&x in e.Msg?"string"==typeof(p=e.Msg[x])?Array.prototype.push.apply(o,e.utils.tokenizeInterpolation_(p,n)):o.push(n?String(p):p):o.push("%{"+p+"}")):o.push("%{"+p+"}"),p=t.length=0))}for((x=t.join(""))&&o.push(x),n=[],I=t.length=0;I<o.length;++I)"string"==typeof o[I]?t.push(o[I]):((x=t.join(""))&&n.push(x),t.length=0,n.push(o[I]));return(x=t.join(""))&&n.push(x),t.length=0,n},e.utils.genUid=function(){for(var t=e.utils.genUid.soup_.length,n=[],o=0;20>o;o++)n[o]=e.utils.genUid.soup_.charAt(Math.random()*t);return n.join("")},e.utils.genUid.soup_="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e.utils.is3dSupported=function(){if(void 0!==e.utils.is3dSupported.cached_)return e.utils.is3dSupported.cached_;if(!e.utils.global.getComputedStyle)return!1;var t=document.createElement("p"),n="none",o={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};for(var r in document.body.insertBefore(t,null),o)if(void 0!==t.style[r]){if(t.style[r]="translate3d(1px,1px,1px)",!(n=e.utils.global.getComputedStyle(t)))return document.body.removeChild(t),!1;n=n.getPropertyValue(o[r])}return document.body.removeChild(t),e.utils.is3dSupported.cached_="none"!==n,e.utils.is3dSupported.cached_},e.utils.runAfterPageLoad=function(t){if("object"!=typeof document)throw Error("Blockly.utils.runAfterPageLoad() requires browser document.");if("complete"==document.readyState)t();else var n=setInterval(function(){"complete"==document.readyState&&(clearInterval(n),t())},10)},e.utils.getViewportBBox=function(){var t=e.utils.style.getViewportPageOffset();return new e.utils.Rect(t.y,document.documentElement.clientHeight+t.y,t.x,document.documentElement.clientWidth+t.x)},e.utils.arrayRemove=function(t,n){return-1!=(n=t.indexOf(n))&&(t.splice(n,1),!0)},e.utils.getDocumentScroll=function(){var t=document.documentElement,n=window;return e.utils.userAgent.IE&&n.pageYOffset!=t.scrollTop?new e.utils.Coordinate(t.scrollLeft,t.scrollTop):new e.utils.Coordinate(n.pageXOffset||t.scrollLeft,n.pageYOffset||t.scrollTop)},e.utils.getBlockTypeCounts=function(t,n){var o=Object.create(null),r=t.getDescendants(!0);for(n&&(t=t.getNextBlock())&&(t=r.indexOf(t),r.splice(t,r.length-t)),t=0;n=r[t];t++)o[n.type]?o[n.type]++:o[n.type]=1;return o},e.utils.screenToWsCoordinates=function(t,n){var o=n.x;n=n.y;var r=t.getInjectionDiv().getBoundingClientRect();return o=new e.utils.Coordinate(o-r.left,n-r.top),n=t.getOriginOffsetInPixels(),e.utils.Coordinate.difference(o,n).scale(1/t.scale)},e.utils.parseBlockColour=function(t){var n="string"==typeof t?e.utils.replaceMessageReferences(t):t,o=Number(n);if(!isNaN(o)&&0<=o&&360>=o)return{hue:o,hex:e.utils.colour.hsvToHex(o,e.HSV_SATURATION,255*e.HSV_VALUE)};if(o=e.utils.colour.parse(n))return{hue:null,hex:o};throw o='Invalid colour: "'+n+'"',t!=n&&(o+=' (from "'+t+'")'),Error(o)},e.Touch={},e.Touch.TOUCH_ENABLED="ontouchstart"in e.utils.global||!!(e.utils.global.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!e.utils.global.navigator||!e.utils.global.navigator.maxTouchPoints&&!e.utils.global.navigator.msMaxTouchPoints),e.Touch.touchIdentifier_=null,e.Touch.TOUCH_MAP={},e.utils.global.PointerEvent?e.Touch.TOUCH_MAP={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]}:e.Touch.TOUCH_ENABLED&&(e.Touch.TOUCH_MAP={mousedown:["touchstart"],mousemove:["touchmove"],mouseup:["touchend","touchcancel"]}),e.longPid_=0,e.longStart=function(t,n){e.longStop_(),t.changedTouches&&1!=t.changedTouches.length||(e.longPid_=setTimeout(function(){t.changedTouches&&(t.button=2,t.clientX=t.changedTouches[0].clientX,t.clientY=t.changedTouches[0].clientY),n&&n.handleRightClick(t)},e.LONGPRESS))},e.longStop_=function(){e.longPid_&&(clearTimeout(e.longPid_),e.longPid_=0)},e.Touch.clearTouchIdentifier=function(){e.Touch.touchIdentifier_=null},e.Touch.shouldHandleEvent=function(t){return!e.Touch.isMouseOrTouchEvent(t)||e.Touch.checkTouchIdentifier(t)},e.Touch.getTouchIdentifierFromEvent=function(t){return null!=t.pointerId?t.pointerId:t.changedTouches&&t.changedTouches[0]&&null!=t.changedTouches[0].identifier?t.changedTouches[0].identifier:"mouse"},e.Touch.checkTouchIdentifier=function(t){var n=e.Touch.getTouchIdentifierFromEvent(t);return null!=e.Touch.touchIdentifier_?e.Touch.touchIdentifier_==n:("mousedown"==t.type||"touchstart"==t.type||"pointerdown"==t.type)&&(e.Touch.touchIdentifier_=n,!0)},e.Touch.setClientFromTouch=function(t){if(e.utils.string.startsWith(t.type,"touch")){var n=t.changedTouches[0];t.clientX=n.clientX,t.clientY=n.clientY}},e.Touch.isMouseOrTouchEvent=function(t){return e.utils.string.startsWith(t.type,"touch")||e.utils.string.startsWith(t.type,"mouse")||e.utils.string.startsWith(t.type,"pointer")},e.Touch.isTouchEvent=function(t){return e.utils.string.startsWith(t.type,"touch")||e.utils.string.startsWith(t.type,"pointer")},e.Touch.splitEventByTouches=function(t){var n=[];if(t.changedTouches)for(var o=0;o<t.changedTouches.length;o++)n[o]={type:t.type,changedTouches:[t.changedTouches[o]],target:t.target,stopPropagation:function(){t.stopPropagation()},preventDefault:function(){t.preventDefault()}};else n.push(t);return n},e.browserEvents={},e.browserEvents.conditionalBind=function(t,n,o,r,p,b){var I=!1,x=function(rt){var ct=!p;rt=e.Touch.splitEventByTouches(rt);for(var At,wt=0;At=rt[wt];wt++)(!ct||e.Touch.shouldHandleEvent(At))&&(e.Touch.setClientFromTouch(At),o?r.call(o,At):r(At),I=!0)},k=[];if(e.utils.global.PointerEvent&&n in e.Touch.TOUCH_MAP)for(var X,Y=0;X=e.Touch.TOUCH_MAP[n][Y];Y++)t.addEventListener(X,x,!1),k.push([t,X,x]);else if(t.addEventListener(n,x,!1),k.push([t,n,x]),n in e.Touch.TOUCH_MAP){var it=function(rt){x(rt),I&&!b&&rt.preventDefault()};for(Y=0;X=e.Touch.TOUCH_MAP[n][Y];Y++)t.addEventListener(X,it,!1),k.push([t,X,it])}return k},e.browserEvents.bind=function(t,n,o,r){var p=function(Y){o?r.call(o,Y):r(Y)},b=[];if(e.utils.global.PointerEvent&&n in e.Touch.TOUCH_MAP)for(var x,I=0;x=e.Touch.TOUCH_MAP[n][I];I++)t.addEventListener(x,p,!1),b.push([t,x,p]);else if(t.addEventListener(n,p,!1),b.push([t,n,p]),n in e.Touch.TOUCH_MAP){var k=function(Y){if(Y.changedTouches&&1==Y.changedTouches.length){var X=Y.changedTouches[0];Y.clientX=X.clientX,Y.clientY=X.clientY}p(Y),Y.preventDefault()};for(I=0;x=e.Touch.TOUCH_MAP[n][I];I++)t.addEventListener(x,k,!1),b.push([t,x,k])}return b},e.browserEvents.unbind=function(t){for(;t.length;){var n=t.pop(),o=n[2];n[0].removeEventListener(n[1],o,!1)}return o},e.ComponentManager=function(){this.componentData_=Object.create(null),this.capabilityToComponentIds_=Object.create(null)},e.ComponentManager.prototype.addComponent=function(t,n){var o=t.component.id;if(!n&&this.componentData_[o])throw Error('Plugin "'+o+'" with capabilities "'+this.componentData_[o].capabilities+'" already added.');this.componentData_[o]=t,n=[];for(var r=0;r<t.capabilities.length;r++){var p=String(t.capabilities[r]).toLowerCase();n.push(p),void 0===this.capabilityToComponentIds_[p]?this.capabilityToComponentIds_[p]=[o]:this.capabilityToComponentIds_[p].push(o)}this.componentData_[o].capabilities=n},e.ComponentManager.prototype.removeComponent=function(t){var n=this.componentData_[t];if(n){for(var o=0;o<n.capabilities.length;o++){var r=String(n.capabilities[o]).toLowerCase();this.capabilityToComponentIds_[r].splice(this.capabilityToComponentIds_[r].indexOf(t),1)}delete this.componentData_[t]}},e.ComponentManager.prototype.addCapability=function(t,n){if(!this.getComponent(t))throw Error('Cannot add capability, "'+n+'". Plugin "'+t+'" has not been added to the ComponentManager');this.hasCapability(t,n)?console.warn('Plugin "'+t+'already has capability "'+n+'"'):(n=String(n).toLowerCase(),this.componentData_[t].capabilities.push(n),this.capabilityToComponentIds_[n].push(t))},e.ComponentManager.prototype.removeCapability=function(t,n){if(!this.getComponent(t))throw Error('Cannot remove capability, "'+n+'". Plugin "'+t+'" has not been added to the ComponentManager');this.hasCapability(t,n)?(n=String(n).toLowerCase(),this.componentData_[t].capabilities.splice(this.componentData_[t].capabilities.indexOf(n),1),this.capabilityToComponentIds_[n].splice(this.capabilityToComponentIds_[n].indexOf(t),1)):console.warn('Plugin "'+t+"doesn't have capability \""+n+'" to remove')},e.ComponentManager.prototype.hasCapability=function(t,n){return n=String(n).toLowerCase(),-1!==this.componentData_[t].capabilities.indexOf(n)},e.ComponentManager.prototype.getComponent=function(t){return this.componentData_[t]&&this.componentData_[t].component},e.ComponentManager.prototype.getComponents=function(t,n){if(t=String(t).toLowerCase(),!(t=this.capabilityToComponentIds_[t]))return[];var o=[];if(n){var r=[],p=this.componentData_;t.forEach(function(b){r.push(p[b])}),r.sort(function(b,I){return b.weight-I.weight}),r.forEach(function(b){o.push(b.component)})}else p=this.componentData_,t.forEach(function(b){o.push(p[b].component)});return o},e.ComponentManager.Capability=function(t){this.name_=t},e.ComponentManager.Capability.prototype.toString=function(){return this.name_},e.ComponentManager.Capability.POSITIONABLE=new e.ComponentManager.Capability("positionable"),e.ComponentManager.Capability.DRAG_TARGET=new e.ComponentManager.Capability("drag_target"),e.ComponentManager.Capability.DELETE_AREA=new e.ComponentManager.Capability("delete_area"),e.ComponentManager.Capability.AUTOHIDEABLE=new e.ComponentManager.Capability("autohideable"),e.utils.Svg=function(t){this.tagName_=t},e.utils.Svg.prototype.toString=function(){return this.tagName_},e.utils.Svg.ANIMATE=new e.utils.Svg("animate"),e.utils.Svg.CIRCLE=new e.utils.Svg("circle"),e.utils.Svg.CLIPPATH=new e.utils.Svg("clipPath"),e.utils.Svg.DEFS=new e.utils.Svg("defs"),e.utils.Svg.FECOMPOSITE=new e.utils.Svg("feComposite"),e.utils.Svg.FECOMPONENTTRANSFER=new e.utils.Svg("feComponentTransfer"),e.utils.Svg.FEFLOOD=new e.utils.Svg("feFlood"),e.utils.Svg.FEFUNCA=new e.utils.Svg("feFuncA"),e.utils.Svg.FEGAUSSIANBLUR=new e.utils.Svg("feGaussianBlur"),e.utils.Svg.FEPOINTLIGHT=new e.utils.Svg("fePointLight"),e.utils.Svg.FESPECULARLIGHTING=new e.utils.Svg("feSpecularLighting"),e.utils.Svg.FILTER=new e.utils.Svg("filter"),e.utils.Svg.FOREIGNOBJECT=new e.utils.Svg("foreignObject"),e.utils.Svg.G=new e.utils.Svg("g"),e.utils.Svg.IMAGE=new e.utils.Svg("image"),e.utils.Svg.LINE=new e.utils.Svg("line"),e.utils.Svg.PATH=new e.utils.Svg("path"),e.utils.Svg.PATTERN=new e.utils.Svg("pattern"),e.utils.Svg.POLYGON=new e.utils.Svg("polygon"),e.utils.Svg.RECT=new e.utils.Svg("rect"),e.utils.Svg.SVG=new e.utils.Svg("svg"),e.utils.Svg.TEXT=new e.utils.Svg("text"),e.utils.Svg.TSPAN=new e.utils.Svg("tspan"),e.utils.dom={},e.utils.dom.SVG_NS="http://www.w3.org/2000/svg",e.utils.dom.HTML_NS="http://www.w3.org/1999/xhtml",e.utils.dom.XLINK_NS="http://www.w3.org/1999/xlink",e.utils.dom.NodeType={ELEMENT_NODE:1,TEXT_NODE:3,COMMENT_NODE:8,DOCUMENT_POSITION_CONTAINED_BY:16},e.utils.dom.cacheWidths_=null,e.utils.dom.cacheReference_=0,e.utils.dom.canvasContext_=null,e.utils.dom.createSvgElement=function(t,n,o){for(var r in t=document.createElementNS(e.utils.dom.SVG_NS,String(t)),n)t.setAttribute(r,n[r]);return document.body.runtimeStyle&&(t.runtimeStyle=t.currentStyle=t.style),o&&o.appendChild(t),t},e.utils.dom.addClass=function(t,n){var o=t.getAttribute("class")||"";return-1==(" "+o+" ").indexOf(" "+n+" ")&&(o&&(o+=" "),t.setAttribute("class",o+n),!0)},e.utils.dom.removeClasses=function(t,n){n=n.split(" ");for(var o=0;o<n.length;o++)e.utils.dom.removeClass(t,n[o])},e.utils.dom.removeClass=function(t,n){var o=t.getAttribute("class");if(-1==(" "+o+" ").indexOf(" "+n+" "))return!1;o=o.split(/\s+/);for(var r=0;r<o.length;r++)o[r]&&o[r]!=n||(o.splice(r,1),r--);return o.length?t.setAttribute("class",o.join(" ")):t.removeAttribute("class"),!0},e.utils.dom.hasClass=function(t,n){return-1!=(" "+t.getAttribute("class")+" ").indexOf(" "+n+" ")},e.utils.dom.removeNode=function(t){return t&&t.parentNode?t.parentNode.removeChild(t):null},e.utils.dom.insertAfter=function(t,n){var o=n.nextSibling;if(!(n=n.parentNode))throw Error("Reference node has no parent.");o?n.insertBefore(t,o):n.appendChild(t)},e.utils.dom.containsNode=function(t,n){return!!(t.compareDocumentPosition(n)&e.utils.dom.NodeType.DOCUMENT_POSITION_CONTAINED_BY)},e.utils.dom.setCssTransform=function(t,n){t.style.transform=n,t.style["-webkit-transform"]=n},e.utils.dom.startTextWidthCache=function(){e.utils.dom.cacheReference_++,e.utils.dom.cacheWidths_||(e.utils.dom.cacheWidths_=Object.create(null))},e.utils.dom.stopTextWidthCache=function(){e.utils.dom.cacheReference_--,e.utils.dom.cacheReference_||(e.utils.dom.cacheWidths_=null)},e.utils.dom.getTextWidth=function(t){var o,n=t.textContent+"\n"+t.className.baseVal;if(e.utils.dom.cacheWidths_&&(o=e.utils.dom.cacheWidths_[n]))return o;try{o=e.utils.userAgent.IE||e.utils.userAgent.EDGE?t.getBBox().width:t.getComputedTextLength()}catch(r){return 8*t.textContent.length}return e.utils.dom.cacheWidths_&&(e.utils.dom.cacheWidths_[n]=o),o},e.utils.dom.getFastTextWidth=function(t,n,o,r){return e.utils.dom.getFastTextWidthWithSizeString(t,n+"pt",o,r)},e.utils.dom.getFastTextWidthWithSizeString=function(t,n,o,r){var b,p=t.textContent;return t=p+"\n"+t.className.baseVal,e.utils.dom.cacheWidths_&&(b=e.utils.dom.cacheWidths_[t])||(e.utils.dom.canvasContext_||((b=document.createElement("canvas")).className="blocklyComputeCanvas",document.body.appendChild(b),e.utils.dom.canvasContext_=b.getContext("2d")),e.utils.dom.canvasContext_.font=o+" "+n+" "+r,b=e.utils.dom.canvasContext_.measureText(p).width,e.utils.dom.cacheWidths_&&(e.utils.dom.cacheWidths_[t]=b)),b},e.utils.dom.measureFontMetrics=function(t,n,o,r){var p=document.createElement("span");p.style.font=o+" "+n+" "+r,p.textContent=t,(t=document.createElement("div")).style.width="1px",t.style.height="0px",(n=document.createElement("div")).setAttribute("style","position: fixed; top: 0; left: 0; display: flex;"),n.appendChild(p),n.appendChild(t),document.body.appendChild(n);try{o={},n.style.alignItems="baseline",o.baseline=t.offsetTop-p.offsetTop,n.style.alignItems="flex-end",o.height=t.offsetTop-p.offsetTop}finally{document.body.removeChild(n)}return o},e.utils.math={},e.utils.math.toRadians=function(t){return t*Math.PI/180},e.utils.math.toDegrees=function(t){return 180*t/Math.PI},e.utils.math.clamp=function(t,n,o){if(o<t){var r=o;o=t,t=r}return Math.max(t,Math.min(n,o))},e.DropDownDiv=function(){},e.DropDownDiv.boundsElement_=null,e.DropDownDiv.owner_=null,e.DropDownDiv.positionToField_=null,e.DropDownDiv.ARROW_SIZE=16,e.DropDownDiv.BORDER_SIZE=1,e.DropDownDiv.ARROW_HORIZONTAL_PADDING=12,e.DropDownDiv.PADDING_Y=16,e.DropDownDiv.ANIMATION_TIME=.25,e.DropDownDiv.animateOutTimer_=null,e.DropDownDiv.onHide_=null,e.DropDownDiv.rendererClassName_="",e.DropDownDiv.themeClassName_="",e.DropDownDiv.createDom=function(){if(!e.DropDownDiv.DIV_){var t=document.createElement("div");t.className="blocklyDropDownDiv",(e.parentContainer||document.body).appendChild(t),e.DropDownDiv.DIV_=t;var n=document.createElement("div");n.className="blocklyDropDownContent",t.appendChild(n),e.DropDownDiv.content_=n,(n=document.createElement("div")).className="blocklyDropDownArrow",t.appendChild(n),e.DropDownDiv.arrow_=n,e.DropDownDiv.DIV_.style.opacity=0,e.DropDownDiv.DIV_.style.transition="transform "+e.DropDownDiv.ANIMATION_TIME+"s, opacity "+e.DropDownDiv.ANIMATION_TIME+"s",t.addEventListener("focusin",function(){e.utils.dom.addClass(t,"blocklyFocused")}),t.addEventListener("focusout",function(){e.utils.dom.removeClass(t,"blocklyFocused")})}},e.DropDownDiv.setBoundsElement=function(t){e.DropDownDiv.boundsElement_=t},e.DropDownDiv.getContentDiv=function(){return e.DropDownDiv.content_},e.DropDownDiv.clearContent=function(){e.DropDownDiv.content_.textContent="",e.DropDownDiv.content_.style.width=""},e.DropDownDiv.setColour=function(t,n){e.DropDownDiv.DIV_.style.backgroundColor=t,e.DropDownDiv.DIV_.style.borderColor=n},e.DropDownDiv.showPositionedByBlock=function(t,n,o,r){return e.DropDownDiv.showPositionedByRect_(e.DropDownDiv.getScaledBboxOfBlock_(n),t,o,r)},e.DropDownDiv.showPositionedByField=function(t,n,o){return e.DropDownDiv.positionToField_=!0,e.DropDownDiv.showPositionedByRect_(e.DropDownDiv.getScaledBboxOfField_(t),t,n,o)},e.DropDownDiv.getScaledBboxOfBlock_=function(t){var n=t.getSvgRoot(),o=n.getBBox(),r=t.workspace.scale;return t=o.height*r,o=o.width*r,n=e.utils.style.getPageOffset(n),new e.utils.Rect(n.y,n.y+t,n.x,n.x+o)},e.DropDownDiv.getScaledBboxOfField_=function(t){return t=t.getScaledBBox(),new e.utils.Rect(t.top,t.bottom,t.left,t.right)},e.DropDownDiv.showPositionedByRect_=function(t,n,o,r){var p=t.left+(t.right-t.left)/2,b=t.bottom;t=t.top,r&&(t+=r);for(var I=(r=n.getSourceBlock()).workspace;I.options.parentWorkspace;)I=I.options.parentWorkspace;return e.DropDownDiv.setBoundsElement(I.getParentSvg().parentNode),e.DropDownDiv.show(n,r.RTL,p,b,p,t,o)},e.DropDownDiv.show=function(t,n,o,r,p,b,I){return e.DropDownDiv.owner_=t,e.DropDownDiv.onHide_=I||null,(t=e.DropDownDiv.DIV_).style.direction=n?"rtl":"ltr",n=e.getMainWorkspace(),e.DropDownDiv.rendererClassName_=n.getRenderer().getClassName(),e.DropDownDiv.themeClassName_=n.getTheme().getClassName(),e.utils.dom.addClass(t,e.DropDownDiv.rendererClassName_),e.utils.dom.addClass(t,e.DropDownDiv.themeClassName_),e.DropDownDiv.positionInternal_(o,r,p,b)},e.DropDownDiv.getBoundsInfo_=function(){var t=e.utils.style.getPageOffset(e.DropDownDiv.boundsElement_),n=e.utils.style.getSize(e.DropDownDiv.boundsElement_);return{left:t.x,right:t.x+n.width,top:t.y,bottom:t.y+n.height,width:n.width,height:n.height}},e.DropDownDiv.getPositionMetrics_=function(t,n,o,r){var p=e.DropDownDiv.getBoundsInfo_(),b=e.utils.style.getSize(e.DropDownDiv.DIV_);return n+b.height<p.bottom?e.DropDownDiv.getPositionBelowMetrics_(t,n,p,b):r-b.height>p.top?e.DropDownDiv.getPositionAboveMetrics_(o,r,p,b):n+b.height<document.documentElement.clientHeight?e.DropDownDiv.getPositionBelowMetrics_(t,n,p,b):r-b.height>document.documentElement.clientTop?e.DropDownDiv.getPositionAboveMetrics_(o,r,p,b):e.DropDownDiv.getPositionTopOfPageMetrics_(t,p,b)},e.DropDownDiv.getPositionBelowMetrics_=function(t,n,o,r){return{initialX:(t=e.DropDownDiv.getPositionX(t,o.left,o.right,r.width)).divX,initialY:n,finalX:t.divX,finalY:n+e.DropDownDiv.PADDING_Y,arrowX:t.arrowX,arrowY:-(e.DropDownDiv.ARROW_SIZE/2+e.DropDownDiv.BORDER_SIZE),arrowAtTop:!0,arrowVisible:!0}},e.DropDownDiv.getPositionAboveMetrics_=function(t,n,o,r){return{initialX:(t=e.DropDownDiv.getPositionX(t,o.left,o.right,r.width)).divX,initialY:n-r.height,finalX:t.divX,finalY:n-r.height-e.DropDownDiv.PADDING_Y,arrowX:t.arrowX,arrowY:r.height-2*e.DropDownDiv.BORDER_SIZE-e.DropDownDiv.ARROW_SIZE/2,arrowAtTop:!1,arrowVisible:!0}},e.DropDownDiv.getPositionTopOfPageMetrics_=function(t,n,o){return{initialX:(t=e.DropDownDiv.getPositionX(t,n.left,n.right,o.width)).divX,initialY:0,finalX:t.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},e.DropDownDiv.getPositionX=function(t,n,o,r){var p=t;return t=e.utils.math.clamp(n,t-r/2,o-r),{arrowX:r=e.utils.math.clamp(n=e.DropDownDiv.ARROW_HORIZONTAL_PADDING,(p-=e.DropDownDiv.ARROW_SIZE/2)-t,r-n-e.DropDownDiv.ARROW_SIZE),divX:t}},e.DropDownDiv.isVisible=function(){return!!e.DropDownDiv.owner_},e.DropDownDiv.hideIfOwner=function(t,n){return e.DropDownDiv.owner_===t&&(n?e.DropDownDiv.hideWithoutAnimation():e.DropDownDiv.hide(),!0)},e.DropDownDiv.hide=function(){var t=e.DropDownDiv.DIV_;t.style.transform="translate(0, 0)",t.style.opacity=0,e.DropDownDiv.animateOutTimer_=setTimeout(function(){e.DropDownDiv.hideWithoutAnimation()},1e3*e.DropDownDiv.ANIMATION_TIME),e.DropDownDiv.onHide_&&(e.DropDownDiv.onHide_(),e.DropDownDiv.onHide_=null)},e.DropDownDiv.hideWithoutAnimation=function(){if(e.DropDownDiv.isVisible()){e.DropDownDiv.animateOutTimer_&&clearTimeout(e.DropDownDiv.animateOutTimer_);var t=e.DropDownDiv.DIV_;t.style.transform="",t.style.left="",t.style.top="",t.style.opacity=0,t.style.display="none",t.style.backgroundColor="",t.style.borderColor="",e.DropDownDiv.onHide_&&(e.DropDownDiv.onHide_(),e.DropDownDiv.onHide_=null),e.DropDownDiv.clearContent(),e.DropDownDiv.owner_=null,e.DropDownDiv.rendererClassName_&&(e.utils.dom.removeClass(t,e.DropDownDiv.rendererClassName_),e.DropDownDiv.rendererClassName_=""),e.DropDownDiv.themeClassName_&&(e.utils.dom.removeClass(t,e.DropDownDiv.themeClassName_),e.DropDownDiv.themeClassName_=""),e.getMainWorkspace().markFocused()}},e.DropDownDiv.positionInternal_=function(t,n,o,r){(t=e.DropDownDiv.getPositionMetrics_(t,n,o,r)).arrowVisible?(e.DropDownDiv.arrow_.style.display="",e.DropDownDiv.arrow_.style.transform="translate("+t.arrowX+"px,"+t.arrowY+"px) rotate(45deg)",e.DropDownDiv.arrow_.setAttribute("class",t.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):e.DropDownDiv.arrow_.style.display="none",n=Math.floor(t.initialX),o=Math.floor(t.initialY),r=Math.floor(t.finalX);var p=Math.floor(t.finalY),b=e.DropDownDiv.DIV_;return b.style.left=n+"px",b.style.top=o+"px",b.style.display="block",b.style.opacity=1,b.style.transform="translate("+(r-n)+"px,"+(p-o)+"px)",!!t.arrowAtTop},e.DropDownDiv.repositionForWindowResize=function(){if(e.DropDownDiv.owner_){var t=e.DropDownDiv.owner_,n=t.getSourceBlock();t=e.DropDownDiv.positionToField_?e.DropDownDiv.getScaledBboxOfField_(t):e.DropDownDiv.getScaledBboxOfBlock_(n),e.DropDownDiv.positionInternal_(n=t.left+(t.right-t.left)/2,t.bottom,n,t.top)}else e.DropDownDiv.hide()},e.registry={},e.registry.typeMap_=Object.create(null),e.registry.DEFAULT="default",e.registry.Type=function(t){this.name_=t},e.registry.Type.prototype.toString=function(){return this.name_},e.registry.Type.CONNECTION_CHECKER=new e.registry.Type("connectionChecker"),e.registry.Type.CURSOR=new e.registry.Type("cursor"),e.registry.Type.EVENT=new e.registry.Type("event"),e.registry.Type.FIELD=new e.registry.Type("field"),e.registry.Type.RENDERER=new e.registry.Type("renderer"),e.registry.Type.TOOLBOX=new e.registry.Type("toolbox"),e.registry.Type.THEME=new e.registry.Type("theme"),e.registry.Type.TOOLBOX_ITEM=new e.registry.Type("toolboxItem"),e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX=new e.registry.Type("flyoutsVerticalToolbox"),e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX=new e.registry.Type("flyoutsHorizontalToolbox"),e.registry.Type.METRICS_MANAGER=new e.registry.Type("metricsManager"),e.registry.Type.BLOCK_DRAGGER=new e.registry.Type("blockDragger"),e.registry.register=function(t,n,o,r){if(!(t instanceof e.registry.Type)&&"string"!=typeof t||""==String(t).trim())throw Error('Invalid type "'+t+'". The type must be a non-empty string or a Blockly.registry.Type.');if(t=String(t).toLowerCase(),"string"!=typeof n||""==n.trim())throw Error('Invalid name "'+n+'". The name must be a non-empty string.');if(n=n.toLowerCase(),!o)throw Error("Can not register a null value");var p=e.registry.typeMap_[t];if(p||(p=e.registry.typeMap_[t]=Object.create(null)),e.registry.validate_(t,o),!r&&p[n])throw Error('Name "'+n+'" with type "'+t+'" already registered.');p[n]=o},e.registry.validate_=function(t,n){switch(t){case String(e.registry.Type.FIELD):if("function"!=typeof n.fromJson)throw Error('Type "'+t+'" must have a fromJson function')}},e.registry.unregister=function(t,n){t=String(t).toLowerCase(),n=n.toLowerCase();var o=e.registry.typeMap_[t];o&&o[n]?delete e.registry.typeMap_[t][n]:console.warn("Unable to unregister ["+n+"]["+t+"] from the registry.")},e.registry.getItem_=function(t,n,o){t=String(t).toLowerCase(),n=n.toLowerCase();var r=e.registry.typeMap_[t];if(!r||!r[n]){if(n="Unable to find ["+n+"]["+t+"] in the registry.",o)throw Error(n+" You must require or register a "+t+" plugin.");return console.warn(n),null}return r[n]},e.registry.hasItem=function(t,n){return t=String(t).toLowerCase(),n=n.toLowerCase(),!!(t=e.registry.typeMap_[t])&&!!t[n]},e.registry.getClass=function(t,n,o){return e.registry.getItem_(t,n,o)},e.registry.getObject=function(t,n,o){return e.registry.getItem_(t,n,o)},e.registry.getClassFromOptions=function(t,n,o){return"function"==typeof(n=n.plugins[t.toString()]||e.registry.DEFAULT)?n:e.registry.getClass(t,n,o)},e.Events={},e.Events.group_="",e.Events.recordUndo=!0,e.Events.disabled_=0,e.Events.CREATE="create",e.Events.BLOCK_CREATE=e.Events.CREATE,e.Events.DELETE="delete",e.Events.BLOCK_DELETE=e.Events.DELETE,e.Events.CHANGE="change",e.Events.BLOCK_CHANGE=e.Events.CHANGE,e.Events.MOVE="move",e.Events.BLOCK_MOVE=e.Events.MOVE,e.Events.VAR_CREATE="var_create",e.Events.VAR_DELETE="var_delete",e.Events.VAR_RENAME="var_rename",e.Events.UI="ui",e.Events.BLOCK_DRAG="drag",e.Events.SELECTED="selected",e.Events.CLICK="click",e.Events.MARKER_MOVE="marker_move",e.Events.BUBBLE_OPEN="bubble_open",e.Events.TRASHCAN_OPEN="trashcan_open",e.Events.TOOLBOX_ITEM_SELECT="toolbox_item_select",e.Events.THEME_CHANGE="theme_change",e.Events.VIEWPORT_CHANGE="viewport_change",e.Events.COMMENT_CREATE="comment_create",e.Events.COMMENT_DELETE="comment_delete",e.Events.COMMENT_CHANGE="comment_change",e.Events.COMMENT_MOVE="comment_move",e.Events.FINISHED_LOADING="finished_loading",e.Events.BUMP_EVENTS=[e.Events.BLOCK_CREATE,e.Events.BLOCK_MOVE,e.Events.COMMENT_CREATE,e.Events.COMMENT_MOVE],e.Events.FIRE_QUEUE_=[],e.Events.fire=function(t){e.Events.isEnabled()&&(e.Events.FIRE_QUEUE_.length||setTimeout(e.Events.fireNow_,0),e.Events.FIRE_QUEUE_.push(t))},e.Events.fireNow_=function(){for(var o,t=e.Events.filter(e.Events.FIRE_QUEUE_,!0),n=e.Events.FIRE_QUEUE_.length=0;o=t[n];n++)if(o.workspaceId){var r=e.Workspace.getById(o.workspaceId);r&&r.fireChangeListener(o)}},e.Events.filter=function(t,n){t=t.slice(),n||t.reverse();for(var b,o=[],r=Object.create(null),p=0;b=t[p];p++)if(!b.isNull()){var I=[b.isUiEvent?e.Events.UI:b.type,b.blockId,b.workspaceId].join(" "),x=r[I],k=x?x.event:null;x?b.type==e.Events.MOVE&&x.index==p-1?(k.newParentId=b.newParentId,k.newInputName=b.newInputName,k.newCoordinate=b.newCoordinate,x.index=p):b.type==e.Events.CHANGE&&b.element==k.element&&b.name==k.name?k.newValue=b.newValue:b.type==e.Events.VIEWPORT_CHANGE?(k.viewTop=b.viewTop,k.viewLeft=b.viewLeft,k.scale=b.scale,k.oldScale=b.oldScale):(b.type!=e.Events.CLICK||k.type!=e.Events.BUBBLE_OPEN)&&(r[I]={event:b,index:p},o.push(b)):(r[I]={event:b,index:p},o.push(b))}for(t=o.filter(function(Y){return!Y.isNull()}),n||t.reverse(),p=1;b=t[p];p++)b.type==e.Events.CHANGE&&"mutation"==b.element&&t.unshift(t.splice(p,1)[0]);return t},e.Events.clearPendingUndo=function(){for(var n,t=0;n=e.Events.FIRE_QUEUE_[t];t++)n.recordUndo=!1},e.Events.disable=function(){e.Events.disabled_++},e.Events.enable=function(){e.Events.disabled_--},e.Events.isEnabled=function(){return 0==e.Events.disabled_},e.Events.getGroup=function(){return e.Events.group_},e.Events.setGroup=function(t){e.Events.group_="boolean"==typeof t?t?e.utils.genUid():"":t},e.Events.getDescendantIds=function(t){var n=[];t=t.getDescendants(!1);for(var r,o=0;r=t[o];o++)n[o]=r.id;return n},e.Events.fromJson=function(t,n){var o=e.Events.get(t.type);if(!o)throw Error("Unknown event type.");return(o=new o).fromJson(t),o.workspaceId=n.id,o},e.Events.get=function(t){return e.registry.getClass(e.registry.Type.EVENT,t)},e.Events.disableOrphans=function(t){if((t.type==e.Events.MOVE||t.type==e.Events.CREATE)&&t.workspaceId){var n=e.Workspace.getById(t.workspaceId),o=n.getBlockById(t.blockId);if(o){t=e.Events.recordUndo;try{e.Events.recordUndo=!1;var r=o.getParent();if(r&&r.isEnabled()){var b,p=o.getDescendants(!1);for(n=0;b=p[n];n++)b.setEnabled(!0)}else if((o.outputConnection||o.previousConnection)&&!n.isDragging())do{o.setEnabled(!1),o=o.getNextBlock()}while(o)}finally{e.Events.recordUndo=t}}}},e.Events.Abstract=function(){this.isBlank=null,this.workspaceId=void 0,this.group=e.Events.getGroup(),this.recordUndo=e.Events.recordUndo},e.Events.Abstract.prototype.isUiEvent=!1,e.Events.Abstract.prototype.toJson=function(){var t={type:this.type};return this.group&&(t.group=this.group),t},e.Events.Abstract.prototype.fromJson=function(t){this.isBlank=!1,this.group=t.group},e.Events.Abstract.prototype.isNull=function(){return!1},e.Events.Abstract.prototype.run=function(t){},e.Events.Abstract.prototype.getEventWorkspace_=function(){if(this.workspaceId)var t=e.Workspace.getById(this.workspaceId);if(!t)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return t},e.utils.object={},e.utils.object.inherits=function(t,n){t.superClass_=n.prototype,t.prototype=Object.create(n.prototype),t.prototype.constructor=t},e.utils.object.mixin=function(t,n){for(var o in n)t[o]=n[o]},e.utils.object.deepMerge=function(t,n){for(var o in n)t[o]=null!=n[o]&&"object"==typeof n[o]?e.utils.object.deepMerge(t[o]||Object.create(null),n[o]):n[o];return t},e.utils.object.values=function(t){return Object.values?Object.values(t):Object.keys(t).map(function(n){return t[n]})},e.utils.xml={},e.utils.xml.NAME_SPACE="https://developers.google.com/blockly/xml",e.utils.xml.document=function(){return document},e.utils.xml.createElement=function(t){return e.utils.xml.document().createElementNS(e.utils.xml.NAME_SPACE,t)},e.utils.xml.createTextNode=function(t){return e.utils.xml.document().createTextNode(t)},e.utils.xml.textToDomDocument=function(t){return(new DOMParser).parseFromString(t,"text/xml")},e.utils.xml.domToText=function(t){return(new XMLSerializer).serializeToString(t)},e.inputTypes={VALUE:e.connectionTypes.INPUT_VALUE,STATEMENT:e.connectionTypes.NEXT_STATEMENT,DUMMY:5},e.Xml={},e.Xml.workspaceToDom=function(t,n){var o=e.utils.xml.createElement("xml"),r=e.Xml.variablesToDom(e.Variables.allUsedVarModels(t));r.hasChildNodes()&&o.appendChild(r);var b,p=t.getTopComments(!0);for(r=0;b=p[r];r++)o.appendChild(b.toXmlWithXY(n));for(t=t.getTopBlocks(!0),r=0;p=t[r];r++)o.appendChild(e.Xml.blockToDomWithXY(p,n));return o},e.Xml.variablesToDom=function(t){for(var r,n=e.utils.xml.createElement("variables"),o=0;r=t[o];o++){var p=e.utils.xml.createElement("variable");p.appendChild(e.utils.xml.createTextNode(r.name)),r.type&&p.setAttribute("type",r.type),p.id=r.getId(),n.appendChild(p)}return n},e.Xml.blockToDomWithXY=function(t,n){if(t.isInsertionMarker()&&!(t=t.getChildren(!1)[0]))return new DocumentFragment;var o;t.workspace.RTL&&(o=t.workspace.getWidth()),n=e.Xml.blockToDom(t,n);var r=t.getRelativeToSurfaceXY();return n.setAttribute("x",Math.round(t.workspace.RTL?o-r.x:r.x)),n.setAttribute("y",Math.round(r.y)),n},e.Xml.fieldToDom_=function(t){if(t.isSerializable()){var n=e.utils.xml.createElement("field");return n.setAttribute("name",t.name||""),t.toXml(n)}return null},e.Xml.allFieldsToDom_=function(t,n){for(var r,o=0;r=t.inputList[o];o++)for(var b,p=0;b=r.fieldRow[p];p++)(b=e.Xml.fieldToDom_(b))&&n.appendChild(b)},e.Xml.blockToDom=function(t,n){if(t.isInsertionMarker())return(t=t.getChildren(!1)[0])?e.Xml.blockToDom(t):new DocumentFragment;var o=e.utils.xml.createElement(t.isShadow()?"shadow":"block");if(o.setAttribute("type",t.type),n||o.setAttribute("id",t.id),t.mutationToDom){var r=t.mutationToDom();r&&(r.hasChildNodes()||r.hasAttributes())&&o.appendChild(r)}if(e.Xml.allFieldsToDom_(t,o),r=t.getCommentText()){var p=t.commentModel.size,b=t.commentModel.pinned,I=e.utils.xml.createElement("comment");I.appendChild(e.utils.xml.createTextNode(r)),I.setAttribute("pinned",b),I.setAttribute("h",p.height),I.setAttribute("w",p.width),o.appendChild(I)}for(t.data&&((r=e.utils.xml.createElement("data")).appendChild(e.utils.xml.createTextNode(t.data)),o.appendChild(r)),r=0;p=t.inputList[r];r++){var x;if(b=!0,p.type!=e.inputTypes.DUMMY){var k=p.connection.targetBlock();p.type==e.inputTypes.VALUE?x=e.utils.xml.createElement("value"):p.type==e.inputTypes.STATEMENT&&(x=e.utils.xml.createElement("statement")),!(I=p.connection.getShadowDom())||k&&k.isShadow()||x.appendChild(e.Xml.cloneShadow_(I,n)),k&&(I=e.Xml.blockToDom(k,n)).nodeType==e.utils.dom.NodeType.ELEMENT_NODE&&(x.appendChild(I),b=!1),x.setAttribute("name",p.name),b||o.appendChild(x)}}return null!=t.inputsInline&&t.inputsInline!=t.inputsInlineDefault&&o.setAttribute("inline",t.inputsInline),t.isCollapsed()&&o.setAttribute("collapsed",!0),t.isEnabled()||o.setAttribute("disabled",!0),t.isDeletable()||t.isShadow()||o.setAttribute("deletable",!1),t.isMovable()||t.isShadow()||o.setAttribute("movable",!1),t.isEditable()||o.setAttribute("editable",!1),(r=t.getNextBlock())&&(I=e.Xml.blockToDom(r,n)).nodeType==e.utils.dom.NodeType.ELEMENT_NODE&&((x=e.utils.xml.createElement("next")).appendChild(I),o.appendChild(x)),!(I=t.nextConnection&&t.nextConnection.getShadowDom())||r&&r.isShadow()||x.appendChild(e.Xml.cloneShadow_(I,n)),o},e.Xml.cloneShadow_=function(t,n){for(var r,o=t=t.cloneNode(!0);o;)if(n&&"shadow"==o.nodeName&&o.removeAttribute("id"),o.firstChild)o=o.firstChild;else{for(;o&&!o.nextSibling;)r=o,o=o.parentNode,r.nodeType==e.utils.dom.NodeType.TEXT_NODE&&""==r.data.trim()&&o.firstChild!=r&&e.utils.dom.removeNode(r);o&&(r=o,o=o.nextSibling,r.nodeType==e.utils.dom.NodeType.TEXT_NODE&&""==r.data.trim()&&e.utils.dom.removeNode(r))}return t},e.Xml.domToText=function(t){return e.utils.xml.domToText(t).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},e.Xml.domToPrettyText=function(t){t=e.Xml.domToText(t).split("<");for(var n="",o=1;o<t.length;o++){var r=t[o];"/"==r[0]&&(n=n.substring(2)),t[o]=n+"<"+r,"/"!=r[0]&&"/>"!=r.slice(-2)&&(n+="  ")}return(t=(t=t.join("\n")).replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>")).replace(/^\n/,"")},e.Xml.textToDom=function(t){var n=e.utils.xml.textToDomDocument(t);if(!n||!n.documentElement||n.getElementsByTagName("parsererror").length)throw Error("textToDom was unable to parse: "+t);return n.documentElement},e.Xml.clearWorkspaceAndLoadFromXml=function(t,n){return n.setResizesEnabled(!1),n.clear(),t=e.Xml.domToWorkspace(t,n),n.setResizesEnabled(!0),t},e.Xml.domToWorkspace=function(t,n){if(t instanceof e.Workspace){var o=t;t=n,n=o,console.warn("Deprecated call to Blockly.Xml.domToWorkspace, swap the arguments.")}var r;n.RTL&&(r=n.getWidth()),o=[],e.utils.dom.startTextWidthCache();var p=e.Events.getGroup();p||e.Events.setGroup(!0),n.setResizesEnabled&&n.setResizesEnabled(!1);var b=!0;try{for(var x,I=0;x=t.childNodes[I];I++){var k=x.nodeName.toLowerCase(),Y=x;if("block"==k||"shadow"==k&&!e.Events.recordUndo){var X=e.Xml.domToBlock(Y,n);o.push(X.id);var it=Y.hasAttribute("x")?parseInt(Y.getAttribute("x"),10):10,rt=Y.hasAttribute("y")?parseInt(Y.getAttribute("y"),10):10;isNaN(it)||isNaN(rt)||X.moveBy(n.RTL?r-it:it,rt),b=!1}else{if("shadow"==k)throw TypeError("Shadow block cannot be a top-level block.");if("comment"==k)n.rendered?e.WorkspaceCommentSvg?e.WorkspaceCommentSvg.fromXml(Y,n,r):console.warn("Missing require for Blockly.WorkspaceCommentSvg, ignoring workspace comment."):e.WorkspaceComment?e.WorkspaceComment.fromXml(Y,n):console.warn("Missing require for Blockly.WorkspaceComment, ignoring workspace comment.");else if("variables"==k){if(!b)throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");e.Xml.domToVariables(Y,n),b=!1}}}}finally{p||e.Events.setGroup(!1),e.utils.dom.stopTextWidthCache()}return n.setResizesEnabled&&n.setResizesEnabled(!0),e.Events.fire(new(e.Events.get(e.Events.FINISHED_LOADING))(n)),o},e.Xml.appendDomToWorkspace=function(t,n){var o;if(Object.prototype.hasOwnProperty.call(n,"scale")&&(o=n.getBlocksBoundingBox()),t=e.Xml.domToWorkspace(t,n),o&&o.top!=o.bottom){var r=o.bottom,p=n.RTL?o.right:o.left,b=1/0,I=-1/0,x=1/0;for(o=0;o<t.length;o++){var k=n.getBlockById(t[o]).getRelativeToSurfaceXY();k.y<x&&(x=k.y),k.x<b&&(b=k.x),k.x>I&&(I=k.x)}for(r=r-x+10,p=n.RTL?p-I:p-b,o=0;o<t.length;o++)n.getBlockById(t[o]).moveBy(p,r)}return t},e.Xml.domToBlock=function(t,n){if(t instanceof e.Workspace){var o=t;t=n,n=o,console.warn("Deprecated call to Blockly.Xml.domToBlock, swap the arguments.")}e.Events.disable(),o=n.getAllVariables();try{var r=e.Xml.domToBlockHeadless_(t,n),p=r.getDescendants(!1);if(n.rendered){r.setConnectionTracking(!1);for(var b=p.length-1;0<=b;b--)p[b].initSvg();for(b=p.length-1;0<=b;b--)p[b].render(!1);setTimeout(function(){r.disposed||r.setConnectionTracking(!0)},1),r.updateDisabled(),n.resizeContents()}else for(b=p.length-1;0<=b;b--)p[b].initModel()}finally{e.Events.enable()}if(e.Events.isEnabled()){for(t=e.Variables.getAddedVariables(n,o),b=0;b<t.length;b++)n=t[b],e.Events.fire(new(e.Events.get(e.Events.VAR_CREATE))(n));e.Events.fire(new(e.Events.get(e.Events.CREATE))(r))}return r},e.Xml.domToVariables=function(t,n){for(var r,o=0;r=t.childNodes[o];o++)if(r.nodeType==e.utils.dom.NodeType.ELEMENT_NODE){var p=r.getAttribute("type"),b=r.getAttribute("id");n.createVariable(r.textContent,p,b)}},e.Xml.mapSupportedXmlTags_=function(t){for(var r,n={mutation:[],comment:[],data:[],field:[],input:[],next:[]},o=0;r=t.childNodes[o];o++)if(r.nodeType!=e.utils.dom.NodeType.TEXT_NODE)switch(r.nodeName.toLowerCase()){case"mutation":n.mutation.push(r);break;case"comment":if(!e.Comment){console.warn("Missing require for Blockly.Comment, ignoring block comment.");break}n.comment.push(r);break;case"data":n.data.push(r);break;case"title":case"field":n.field.push(r);break;case"value":case"statement":n.input.push(r);break;case"next":n.next.push(r);break;default:console.warn("Ignoring unknown tag: "+r.nodeName)}return n},e.Xml.applyMutationTagNodes_=function(t,n){for(var p,o=!1,r=0;p=t[r];r++)n.domToMutation&&(n.domToMutation(p),n.initSvg&&(o=!0));return o},e.Xml.applyCommentTagNodes_=function(t,n){for(var r,o=0;r=t[o];o++){var p=r.textContent,b="true"==r.getAttribute("pinned"),I=parseInt(r.getAttribute("w"),10);r=parseInt(r.getAttribute("h"),10),n.setCommentText(p),n.commentModel.pinned=b,isNaN(I)||isNaN(r)||(n.commentModel.size=new e.utils.Size(I,r)),b&&n.getCommentIcon&&!n.isInFlyout&&setTimeout(function(){n.getCommentIcon().setVisible(!0)},1)}},e.Xml.applyDataTagNodes_=function(t,n){for(var r,o=0;r=t[o];o++)n.data=r.textContent},e.Xml.applyFieldTagNodes_=function(t,n){for(var r,o=0;r=t[o];o++){var p=r.getAttribute("name");e.Xml.domToField_(n,p,r)}},e.Xml.findChildBlocks_=function(t){for(var r,n={childBlockElement:null,childShadowElement:null},o=0;r=t.childNodes[o];o++)r.nodeType==e.utils.dom.NodeType.ELEMENT_NODE&&("block"==r.nodeName.toLowerCase()?n.childBlockElement=r:"shadow"==r.nodeName.toLowerCase()&&(n.childShadowElement=r));return n},e.Xml.applyInputTagNodes_=function(t,n,o,r){for(var b,p=0;b=t[p];p++){var I=b.getAttribute("name"),x=o.getInput(I);if(!x){console.warn("Ignoring non-existent input "+I+" in block "+r);break}if((b=e.Xml.findChildBlocks_(b)).childBlockElement){if(!x.connection)throw TypeError("Input connection does not exist.");e.Xml.domToBlockHeadless_(b.childBlockElement,n,x.connection,!1)}b.childShadowElement&&x.connection.setShadowDom(b.childShadowElement)}},e.Xml.applyNextTagNodes_=function(t,n,o){for(var p,r=0;p=t[r];r++){if((p=e.Xml.findChildBlocks_(p)).childBlockElement){if(!o.nextConnection)throw TypeError("Next statement does not exist.");if(o.nextConnection.isConnected())throw TypeError("Next statement is already connected.");e.Xml.domToBlockHeadless_(p.childBlockElement,n,o.nextConnection,!0)}p.childShadowElement&&o.nextConnection&&o.nextConnection.setShadowDom(p.childShadowElement)}},e.Xml.domToBlockHeadless_=function(t,n,o,r){var p=t.getAttribute("type");if(!p)throw TypeError("Block type unspecified: "+t.outerHTML);var b=t.getAttribute("id");b=n.newBlock(p,b);var I=e.Xml.mapSupportedXmlTags_(t),x=e.Xml.applyMutationTagNodes_(I.mutation,b);if(e.Xml.applyCommentTagNodes_(I.comment,b),e.Xml.applyDataTagNodes_(I.data,b),o)if(r){if(!b.previousConnection)throw TypeError("Next block does not have previous statement.");o.connect(b.previousConnection)}else if(b.outputConnection)o.connect(b.outputConnection);else{if(!b.previousConnection)throw TypeError("Child block does not have output or previous statement.");o.connect(b.previousConnection)}if(e.Xml.applyFieldTagNodes_(I.field,b),e.Xml.applyInputTagNodes_(I.input,n,b,p),e.Xml.applyNextTagNodes_(I.next,n,b),x&&b.initSvg(),(n=t.getAttribute("inline"))&&b.setInputsInline("true"==n),(n=t.getAttribute("disabled"))&&b.setEnabled("true"!=n&&"disabled"!=n),(n=t.getAttribute("deletable"))&&b.setDeletable("true"==n),(n=t.getAttribute("movable"))&&b.setMovable("true"==n),(n=t.getAttribute("editable"))&&b.setEditable("true"==n),(n=t.getAttribute("collapsed"))&&b.setCollapsed("true"==n),"shadow"==t.nodeName.toLowerCase()){for(t=b.getChildren(!1),n=0;o=t[n];n++)if(!o.isShadow())throw TypeError("Shadow block not allowed non-shadow child.");if(b.getVarModels().length)throw TypeError("Shadow blocks cannot have variable references.");b.setShadow(!0)}return b},e.Xml.domToField_=function(t,n,o){var r=t.getField(n);r?r.fromXml(o):console.warn("Ignoring non-existent field "+n+" in block "+t.type)},e.Xml.deleteNext=function(t){for(var o,n=0;o=t.childNodes[n];n++)if("next"==o.nodeName.toLowerCase()){t.removeChild(o);break}},e.Events.BlockBase=function(t){e.Events.BlockBase.superClass_.constructor.call(this),this.blockId=(this.isBlank=void 0===t)?"":t.id,this.workspaceId=this.isBlank?"":t.workspace.id},e.utils.object.inherits(e.Events.BlockBase,e.Events.Abstract),e.Events.BlockBase.prototype.toJson=function(){var t=e.Events.BlockBase.superClass_.toJson.call(this);return t.blockId=this.blockId,t},e.Events.BlockBase.prototype.fromJson=function(t){e.Events.BlockBase.superClass_.fromJson.call(this,t),this.blockId=t.blockId},e.Events.BlockChange=function(t,n,o,r,p){e.Events.Change.superClass_.constructor.call(this,t),t&&(this.element=void 0===n?"":n,this.name=void 0===o?"":o,this.oldValue=void 0===r?"":r,this.newValue=void 0===p?"":p)},e.utils.object.inherits(e.Events.BlockChange,e.Events.BlockBase),e.Events.Change=e.Events.BlockChange,e.Events.BlockChange.prototype.type=e.Events.CHANGE,e.Events.BlockChange.prototype.toJson=function(){var t=e.Events.BlockChange.superClass_.toJson.call(this);return t.element=this.element,this.name&&(t.name=this.name),t.oldValue=this.oldValue,t.newValue=this.newValue,t},e.Events.BlockChange.prototype.fromJson=function(t){e.Events.BlockChange.superClass_.fromJson.call(this,t),this.element=t.element,this.name=t.name,this.oldValue=t.oldValue,this.newValue=t.newValue},e.Events.BlockChange.prototype.isNull=function(){return this.oldValue==this.newValue},e.Events.BlockChange.prototype.run=function(t){var n=this.getEventWorkspace_().getBlockById(this.blockId);if(n)switch(n.mutator&&n.mutator.setVisible(!1),t=t?this.newValue:this.oldValue,this.element){case"field":(n=n.getField(this.name))?n.setValue(t):console.warn("Can't set non-existent field: "+this.name);break;case"comment":n.setCommentText(t||null);break;case"collapsed":n.setCollapsed(!!t);break;case"disabled":n.setEnabled(!t);break;case"inline":n.setInputsInline(!!t);break;case"mutation":var o="";if(n.mutationToDom&&(o=(o=n.mutationToDom())&&e.Xml.domToText(o)),n.domToMutation){var r=e.Xml.textToDom(t||"<mutation/>");n.domToMutation(r)}e.Events.fire(new e.Events.BlockChange(n,"mutation",null,o,t));break;default:console.warn("Unknown change type: "+this.element)}else console.warn("Can't change non-existent block: "+this.blockId)},e.Events.Create=function(t){e.Events.Create.superClass_.constructor.call(this,t),t&&(t.isShadow()&&(this.recordUndo=!1),this.xml=t.workspace.rendered?e.Xml.blockToDomWithXY(t):e.Xml.blockToDom(t),this.ids=e.Events.getDescendantIds(t))},e.utils.object.inherits(e.Events.Create,e.Events.BlockBase),e.Events.BlockCreate=e.Events.Create,e.Events.Create.prototype.type=e.Events.CREATE,e.Events.Create.prototype.toJson=function(){var t=e.Events.Create.superClass_.toJson.call(this);return t.xml=e.Xml.domToText(this.xml),t.ids=this.ids,this.recordUndo||(t.recordUndo=this.recordUndo),t},e.Events.Create.prototype.fromJson=function(t){e.Events.Create.superClass_.fromJson.call(this,t),this.xml=e.Xml.textToDom(t.xml),this.ids=t.ids,void 0!==t.recordUndo&&(this.recordUndo=t.recordUndo)},e.Events.Create.prototype.run=function(t){var n=this.getEventWorkspace_();if(t)(t=e.utils.xml.createElement("xml")).appendChild(this.xml),e.Xml.domToWorkspace(t,n);else{t=0;for(var o;o=this.ids[t];t++){var r=n.getBlockById(o);r?r.dispose(!1):o==this.blockId&&console.warn("Can't uncreate non-existent block: "+o)}}},e.Events.Delete=function(t){if(e.Events.Delete.superClass_.constructor.call(this,t),t){if(t.getParent())throw Error("Connected blocks cannot be deleted.");t.isShadow()&&(this.recordUndo=!1),this.oldXml=t.workspace.rendered?e.Xml.blockToDomWithXY(t):e.Xml.blockToDom(t),this.ids=e.Events.getDescendantIds(t)}},e.utils.object.inherits(e.Events.Delete,e.Events.BlockBase),e.Events.BlockDelete=e.Events.Delete,e.Events.Delete.prototype.type=e.Events.DELETE,e.Events.Delete.prototype.toJson=function(){var t=e.Events.Delete.superClass_.toJson.call(this);return t.oldXml=e.Xml.domToText(this.oldXml),t.ids=this.ids,this.recordUndo||(t.recordUndo=this.recordUndo),t},e.Events.Delete.prototype.fromJson=function(t){e.Events.Delete.superClass_.fromJson.call(this,t),this.oldXml=e.Xml.textToDom(t.oldXml),this.ids=t.ids,void 0!==t.recordUndo&&(this.recordUndo=t.recordUndo)},e.Events.Delete.prototype.run=function(t){var n=this.getEventWorkspace_();if(t){t=0;for(var o;o=this.ids[t];t++){var r=n.getBlockById(o);r?r.dispose(!1):o==this.blockId&&console.warn("Can't delete non-existent block: "+o)}}else(t=e.utils.xml.createElement("xml")).appendChild(this.oldXml),e.Xml.domToWorkspace(t,n)},e.Events.Move=function(t){e.Events.Move.superClass_.constructor.call(this,t),t&&(t.isShadow()&&(this.recordUndo=!1),t=this.currentLocation_(),this.oldParentId=t.parentId,this.oldInputName=t.inputName,this.oldCoordinate=t.coordinate)},e.utils.object.inherits(e.Events.Move,e.Events.BlockBase),e.Events.BlockMove=e.Events.Move,e.Events.Move.prototype.type=e.Events.MOVE,e.Events.Move.prototype.toJson=function(){var t=e.Events.Move.superClass_.toJson.call(this);return this.newParentId&&(t.newParentId=this.newParentId),this.newInputName&&(t.newInputName=this.newInputName),this.newCoordinate&&(t.newCoordinate=Math.round(this.newCoordinate.x)+","+Math.round(this.newCoordinate.y)),this.recordUndo||(t.recordUndo=this.recordUndo),t},e.Events.Move.prototype.fromJson=function(t){if(e.Events.Move.superClass_.fromJson.call(this,t),this.newParentId=t.newParentId,this.newInputName=t.newInputName,t.newCoordinate){var n=t.newCoordinate.split(",");this.newCoordinate=new e.utils.Coordinate(Number(n[0]),Number(n[1]))}void 0!==t.recordUndo&&(this.recordUndo=t.recordUndo)},e.Events.Move.prototype.recordNew=function(){var t=this.currentLocation_();this.newParentId=t.parentId,this.newInputName=t.inputName,this.newCoordinate=t.coordinate},e.Events.Move.prototype.currentLocation_=function(){var t=this.getEventWorkspace_().getBlockById(this.blockId),n={},o=t.getParent();return o?(n.parentId=o.id,(t=o.getInputWithBlock(t))&&(n.inputName=t.name)):n.coordinate=t.getRelativeToSurfaceXY(),n},e.Events.Move.prototype.isNull=function(){return this.oldParentId==this.newParentId&&this.oldInputName==this.newInputName&&e.utils.Coordinate.equals(this.oldCoordinate,this.newCoordinate)},e.Events.Move.prototype.run=function(t){var n=this.getEventWorkspace_(),o=n.getBlockById(this.blockId);if(o){var r=t?this.newParentId:this.oldParentId,p=t?this.newInputName:this.oldInputName,b=t?this.newCoordinate:this.oldCoordinate;if(t=null,r&&!(t=n.getBlockById(r)))return void console.warn("Can't connect to non-existent block: "+r);if(o.getParent()&&o.unplug(),b)p=o.getRelativeToSurfaceXY(),o.moveBy(b.x-p.x,b.y-p.y);else{if(n=(o=o.outputConnection||o.previousConnection).type,p){if(t=t.getInput(p))var I=t.connection}else n==e.connectionTypes.PREVIOUS_STATEMENT&&(I=t.nextConnection);I?o.connect(I):console.warn("Can't connect to non-existent input: "+p)}}else console.warn("Can't move non-existent block: "+this.blockId)},e.registry.register(e.registry.Type.EVENT,e.Events.CREATE,e.Events.Create),e.registry.register(e.registry.Type.EVENT,e.Events.DELETE,e.Events.Delete),e.registry.register(e.registry.Type.EVENT,e.Events.CHANGE,e.Events.BlockChange),e.registry.register(e.registry.Type.EVENT,e.Events.MOVE,e.Events.Move),e.Events.FinishedLoading=function(t){this.isBlank=void 0===t,this.workspaceId=t?t.id:"",this.group=e.Events.getGroup(),this.recordUndo=!1},e.utils.object.inherits(e.Events.FinishedLoading,e.Events.Abstract),e.Events.FinishedLoading.prototype.type=e.Events.FINISHED_LOADING,e.Events.FinishedLoading.prototype.toJson=function(){var t={type:this.type};return this.group&&(t.group=this.group),this.workspaceId&&(t.workspaceId=this.workspaceId),t},e.Events.FinishedLoading.prototype.fromJson=function(t){this.isBlank=!1,this.workspaceId=t.workspaceId,this.group=t.group},e.registry.register(e.registry.Type.EVENT,e.Events.FINISHED_LOADING,e.Events.FinishedLoading),e.Events.UiBase=function(t){e.Events.UiBase.superClass_.constructor.call(this),this.isBlank=void 0===t,this.workspaceId=t||"",this.recordUndo=!1},e.utils.object.inherits(e.Events.UiBase,e.Events.Abstract),e.Events.UiBase.prototype.isUiEvent=!0,e.Events.Ui=function(t,n,o,r){e.Events.Ui.superClass_.constructor.call(this,t?t.workspace.id:void 0),this.blockId=t?t.id:null,this.element=void 0===n?"":n,this.oldValue=void 0===o?"":o,this.newValue=void 0===r?"":r},e.utils.object.inherits(e.Events.Ui,e.Events.UiBase),e.Events.Ui.prototype.type=e.Events.UI,e.Events.Ui.prototype.toJson=function(){var t=e.Events.Ui.superClass_.toJson.call(this);return t.element=this.element,void 0!==this.newValue&&(t.newValue=this.newValue),this.blockId&&(t.blockId=this.blockId),t},e.Events.Ui.prototype.fromJson=function(t){e.Events.Ui.superClass_.fromJson.call(this,t),this.element=t.element,this.newValue=t.newValue,this.blockId=t.blockId},e.registry.register(e.registry.Type.EVENT,e.Events.UI,e.Events.Ui),e.Events.VarBase=function(t){e.Events.VarBase.superClass_.constructor.call(this),this.varId=(this.isBlank=void 0===t)?"":t.getId(),this.workspaceId=this.isBlank?"":t.workspace.id},e.utils.object.inherits(e.Events.VarBase,e.Events.Abstract),e.Events.VarBase.prototype.toJson=function(){var t=e.Events.VarBase.superClass_.toJson.call(this);return t.varId=this.varId,t},e.Events.VarBase.prototype.fromJson=function(t){e.Events.VarBase.superClass_.toJson.call(this),this.varId=t.varId},e.Events.VarCreate=function(t){e.Events.VarCreate.superClass_.constructor.call(this,t),t&&(this.varType=t.type,this.varName=t.name)},e.utils.object.inherits(e.Events.VarCreate,e.Events.VarBase),e.Events.VarCreate.prototype.type=e.Events.VAR_CREATE,e.Events.VarCreate.prototype.toJson=function(){var t=e.Events.VarCreate.superClass_.toJson.call(this);return t.varType=this.varType,t.varName=this.varName,t},e.Events.VarCreate.prototype.fromJson=function(t){e.Events.VarCreate.superClass_.fromJson.call(this,t),this.varType=t.varType,this.varName=t.varName},e.Events.VarCreate.prototype.run=function(t){var n=this.getEventWorkspace_();t?n.createVariable(this.varName,this.varType,this.varId):n.deleteVariableById(this.varId)},e.Events.VarDelete=function(t){e.Events.VarDelete.superClass_.constructor.call(this,t),t&&(this.varType=t.type,this.varName=t.name)},e.utils.object.inherits(e.Events.VarDelete,e.Events.VarBase),e.Events.VarDelete.prototype.type=e.Events.VAR_DELETE,e.Events.VarDelete.prototype.toJson=function(){var t=e.Events.VarDelete.superClass_.toJson.call(this);return t.varType=this.varType,t.varName=this.varName,t},e.Events.VarDelete.prototype.fromJson=function(t){e.Events.VarDelete.superClass_.fromJson.call(this,t),this.varType=t.varType,this.varName=t.varName},e.Events.VarDelete.prototype.run=function(t){var n=this.getEventWorkspace_();t?n.deleteVariableById(this.varId):n.createVariable(this.varName,this.varType,this.varId)},e.Events.VarRename=function(t,n){e.Events.VarRename.superClass_.constructor.call(this,t),t&&(this.oldName=t.name,this.newName=void 0===n?"":n)},e.utils.object.inherits(e.Events.VarRename,e.Events.VarBase),e.Events.VarRename.prototype.type=e.Events.VAR_RENAME,e.Events.VarRename.prototype.toJson=function(){var t=e.Events.VarRename.superClass_.toJson.call(this);return t.oldName=this.oldName,t.newName=this.newName,t},e.Events.VarRename.prototype.fromJson=function(t){e.Events.VarRename.superClass_.fromJson.call(this,t),this.oldName=t.oldName,this.newName=t.newName},e.Events.VarRename.prototype.run=function(t){this.getEventWorkspace_().renameVariableById(this.varId,t?this.newName:this.oldName)},e.registry.register(e.registry.Type.EVENT,e.Events.VAR_CREATE,e.Events.VarCreate),e.registry.register(e.registry.Type.EVENT,e.Events.VAR_DELETE,e.Events.VarDelete),e.registry.register(e.registry.Type.EVENT,e.Events.VAR_RENAME,e.Events.VarRename),e.BlockDragSurfaceSvg=function(t){this.container_=t,this.createDom()},e.BlockDragSurfaceSvg.prototype.SVG_=null,e.BlockDragSurfaceSvg.prototype.dragGroup_=null,e.BlockDragSurfaceSvg.prototype.container_=null,e.BlockDragSurfaceSvg.prototype.scale_=1,e.BlockDragSurfaceSvg.prototype.surfaceXY_=null,e.BlockDragSurfaceSvg.prototype.childSurfaceXY_=new e.utils.Coordinate(0,0),e.BlockDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{xmlns:e.utils.dom.SVG_NS,"xmlns:html":e.utils.dom.HTML_NS,"xmlns:xlink":e.utils.dom.XLINK_NS,version:"1.1",class:"blocklyBlockDragSurface"},this.container_),this.dragGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},this.SVG_))},e.BlockDragSurfaceSvg.prototype.setBlocksAndShow=function(t){if(this.dragGroup_.childNodes.length)throw Error("Already dragging a block.");this.dragGroup_.appendChild(t),this.SVG_.style.display="block",this.surfaceXY_=new e.utils.Coordinate(0,0)},e.BlockDragSurfaceSvg.prototype.translateAndScaleGroup=function(t,n,o){this.scale_=o,t=t.toFixed(0),n=n.toFixed(0),this.childSurfaceXY_.x=parseInt(t,10),this.childSurfaceXY_.y=parseInt(n,10),this.dragGroup_.setAttribute("transform","translate("+t+","+n+") scale("+o+")")},e.BlockDragSurfaceSvg.prototype.translateSurfaceInternal_=function(){var t=this.surfaceXY_.x,n=this.surfaceXY_.y;t=t.toFixed(0),n=n.toFixed(0),this.SVG_.style.display="block",e.utils.dom.setCssTransform(this.SVG_,"translate3d("+t+"px, "+n+"px, 0px)")},e.BlockDragSurfaceSvg.prototype.translateBy=function(t,n){this.surfaceXY_=new e.utils.Coordinate(this.surfaceXY_.x+t,this.surfaceXY_.y+n),this.translateSurfaceInternal_()},e.BlockDragSurfaceSvg.prototype.translateSurface=function(t,n){this.surfaceXY_=new e.utils.Coordinate(t*this.scale_,n*this.scale_),this.translateSurfaceInternal_()},e.BlockDragSurfaceSvg.prototype.getSurfaceTranslation=function(){var t=e.utils.getRelativeXY(this.SVG_);return new e.utils.Coordinate(t.x/this.scale_,t.y/this.scale_)},e.BlockDragSurfaceSvg.prototype.getGroup=function(){return this.dragGroup_},e.BlockDragSurfaceSvg.prototype.getSvgRoot=function(){return this.SVG_},e.BlockDragSurfaceSvg.prototype.getCurrentBlock=function(){return this.dragGroup_.firstChild},e.BlockDragSurfaceSvg.prototype.getWsTranslation=function(){return this.childSurfaceXY_.clone()},e.BlockDragSurfaceSvg.prototype.clearAndHide=function(t){if(t?t.appendChild(this.getCurrentBlock()):this.dragGroup_.removeChild(this.getCurrentBlock()),this.SVG_.style.display="none",this.dragGroup_.childNodes.length)throw Error("Drag group was not cleared.");this.surfaceXY_=null},e.Css={},e.Css.injected_=!1,e.Css.register=function(t){if(e.Css.injected_)throw Error("CSS already injected");Array.prototype.push.apply(e.Css.CONTENT,t),t.length=0},e.Css.inject=function(t,n){if(!e.Css.injected_){e.Css.injected_=!0;var o=e.Css.CONTENT.join("\n");e.Css.CONTENT.length=0,t&&(t=n.replace(/[\\/]$/,""),o=o.replace(/<<<PATH>>>/g,t),(t=document.createElement("style")).id="blockly-common-style",o=document.createTextNode(o),t.appendChild(o),document.head.insertBefore(t,document.head.firstChild))}},e.Css.CONTENT=[".blocklySvg {","background-color: #fff;","outline: none;","overflow: hidden;","position: absolute;","display: block;","}",".blocklyWidgetDiv {","display: none;","position: absolute;","z-index: 99999;","}",".injectionDiv {","height: 100%;","position: relative;","overflow: hidden;","touch-action: none;","}",".blocklyNonSelectable {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","}",".blocklyWsDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","}",".blocklyWsDragSurface.blocklyOverflowVisible {","overflow: visible;","}",".blocklyBlockDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","right: 0;","bottom: 0;","overflow: visible !important;","z-index: 50;","}",".blocklyBlockCanvas.blocklyCanvasTransitioning,",".blocklyBubbleCanvas.blocklyCanvasTransitioning {","transition: transform .5s;","}",".blocklyTooltipDiv {","background-color: #ffffc7;","border: 1px solid #ddc;","box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);","color: #000;","display: none;","font: 9pt sans-serif;","opacity: .9;","padding: 2px;","position: absolute;","z-index: 100000;","}",".blocklyDropDownDiv {","position: absolute;","left: 0;","top: 0;","z-index: 1000;","display: none;","border: 1px solid;","border-color: #dadce0;","background-color: #fff;","border-radius: 2px;","padding: 4px;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownContent {","max-height: 300px;","overflow: auto;","overflow-x: hidden;","position: relative;","}",".blocklyDropDownArrow {","position: absolute;","left: 0;","top: 0;","width: 16px;","height: 16px;","z-index: -1;","background-color: inherit;","border-color: inherit;","}",".blocklyDropDownButton {","display: inline-block;","float: left;","padding: 0;","margin: 4px;","border-radius: 4px;","outline: none;","border: 1px solid;","transition: box-shadow .1s;","cursor: pointer;","}",".blocklyArrowTop {","border-top: 1px solid;","border-left: 1px solid;","border-top-left-radius: 4px;","border-color: inherit;","}",".blocklyArrowBottom {","border-bottom: 1px solid;","border-right: 1px solid;","border-bottom-right-radius: 4px;","border-color: inherit;","}",".blocklyResizeSE {","cursor: se-resize;","fill: #aaa;","}",".blocklyResizeSW {","cursor: sw-resize;","fill: #aaa;","}",".blocklyResizeLine {","stroke: #515A5A;","stroke-width: 1;","}",".blocklyHighlightedConnectionPath {","fill: none;","stroke: #fc3;","stroke-width: 4px;","}",".blocklyPathLight {","fill: none;","stroke-linecap: round;","stroke-width: 1;","}",".blocklySelected>.blocklyPathLight {","display: none;","}",".blocklyDraggable {",'cursor: url("<<<PATH>>>/handopen.cur"), auto;',"cursor: grab;","cursor: -webkit-grab;","}",".blocklyDragging {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDraggable:active {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyBlockDragSurface .blocklyDraggable {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDragging.blocklyDraggingDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyDragging>.blocklyPath,",".blocklyDragging>.blocklyPathLight {","fill-opacity: .8;","stroke-opacity: .8;","}",".blocklyDragging>.blocklyPathDark {","display: none;","}",".blocklyDisabled>.blocklyPath {","fill-opacity: .5;","stroke-opacity: .5;","}",".blocklyDisabled>.blocklyPathLight,",".blocklyDisabled>.blocklyPathDark {","display: none;","}",".blocklyInsertionMarker>.blocklyPath,",".blocklyInsertionMarker>.blocklyPathLight,",".blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: .2;","stroke: none;","}",".blocklyMultilineText {","font-family: monospace;","}",".blocklyNonEditableText>text {","pointer-events: none;","}",".blocklyFlyout {","position: absolute;","z-index: 20;","}",".blocklyText text {","cursor: default;","}",".blocklySvg text,",".blocklyBlockDragSurface text {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","cursor: inherit;","}",".blocklyHidden {","display: none;","}",".blocklyFieldDropdown:not(.blocklyHidden) {","display: block;","}",".blocklyIconGroup {","cursor: default;","}",".blocklyIconGroup:not(:hover),",".blocklyIconGroupReadonly {","opacity: .6;","}",".blocklyIconShape {","fill: #00f;","stroke: #fff;","stroke-width: 1px;","}",".blocklyIconSymbol {","fill: #fff;","}",".blocklyMinimalBody {","margin: 0;","padding: 0;","}",".blocklyHtmlInput {","border: none;","border-radius: 4px;","height: 100%;","margin: 0;","outline: none;","padding: 0;","width: 100%;","text-align: center;","display: block;","box-sizing: border-box;","}",".blocklyHtmlInput::-ms-clear {","display: none;","}",".blocklyMainBackground {","stroke-width: 1;","stroke: #c6c6c6;","}",".blocklyMutatorBackground {","fill: #fff;","stroke: #ddd;","stroke-width: 1;","}",".blocklyFlyoutBackground {","fill: #ddd;","fill-opacity: .8;","}",".blocklyMainWorkspaceScrollbar {","z-index: 20;","}",".blocklyFlyoutScrollbar {","z-index: 30;","}",".blocklyScrollbarHorizontal,",".blocklyScrollbarVertical {","position: absolute;","outline: none;","}",".blocklyScrollbarBackground {","opacity: 0;","}",".blocklyScrollbarHandle {","fill: #ccc;","}",".blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyScrollbarHandle:hover {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarHandle {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyFlyout .blocklyScrollbarHandle:hover {","fill: #aaa;","}",".blocklyInvalidInput {","background: #faa;","}",".blocklyVerticalMarker {","stroke-width: 3px;","fill: rgba(255,255,255,.5);","pointer-events: none;","}",".blocklyComputeCanvas {","position: absolute;","width: 0;","height: 0;","}",".blocklyNoPointerEvents {","pointer-events: none;","}",".blocklyContextMenu {","border-radius: 4px;","max-height: 100%;","}",".blocklyDropdownMenu {","border-radius: 2px;","padding: 0 !important;","}",".blocklyDropdownMenu .blocklyMenuItem {","padding-left: 28px;","}",".blocklyDropdownMenu .blocklyMenuItemRtl {","padding-left: 5px;","padding-right: 28px;","}",".blocklyWidgetDiv .blocklyMenu {","background: #fff;","border: 1px solid transparent;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","font: normal 13px Arial, sans-serif;","margin: 0;","outline: none;","padding: 4px 0;","position: absolute;","overflow-y: auto;","overflow-x: hidden;","max-height: 100%;","z-index: 20000;","}",".blocklyWidgetDiv .blocklyMenu.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv .blocklyMenu {","background: inherit;","border: inherit;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"outline: none;","position: relative;","z-index: 20000;","}",".blocklyMenuItem {","border: none;","color: #000;","cursor: pointer;","list-style: none;","margin: 0;","min-width: 7em;","padding: 6px 15px;","white-space: nowrap;","}",".blocklyMenuItemDisabled {","color: #ccc;","cursor: inherit;","}",".blocklyMenuItemHighlight {","background-color: rgba(0,0,0,.1);","}",".blocklyMenuItemCheckbox {","height: 16px;","position: absolute;","width: 16px;","}",".blocklyMenuItemSelected .blocklyMenuItemCheckbox {","background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;","float: left;","margin-left: -24px;","position: static;","}",".blocklyMenuItemRtl .blocklyMenuItemCheckbox {","float: right;","margin-right: -24px;","}"],e.Grid=function(t,n){this.gridPattern_=t,this.spacing_=n.spacing,this.length_=n.length,this.line2_=(this.line1_=t.firstChild)&&this.line1_.nextSibling,this.snapToGrid_=n.snap},e.Grid.prototype.scale_=1,e.Grid.prototype.dispose=function(){this.gridPattern_=null},e.Grid.prototype.shouldSnap=function(){return this.snapToGrid_},e.Grid.prototype.getSpacing=function(){return this.spacing_},e.Grid.prototype.getPatternId=function(){return this.gridPattern_.id},e.Grid.prototype.update=function(t){this.scale_=t;var n=this.spacing_*t||100;this.gridPattern_.setAttribute("width",n),this.gridPattern_.setAttribute("height",n);var o=(n=Math.floor(this.spacing_/2)+.5)-this.length_/2,r=n+this.length_/2;this.setLineAttributes_(this.line1_,t,o*=t,r*=t,n*=t,n),this.setLineAttributes_(this.line2_,t,n,n,o,r)},e.Grid.prototype.setLineAttributes_=function(t,n,o,r,p,b){t&&(t.setAttribute("stroke-width",n),t.setAttribute("x1",o),t.setAttribute("y1",p),t.setAttribute("x2",r),t.setAttribute("y2",b))},e.Grid.prototype.moveTo=function(t,n){this.gridPattern_.setAttribute("x",t),this.gridPattern_.setAttribute("y",n),(e.utils.userAgent.IE||e.utils.userAgent.EDGE)&&this.update(this.scale_)},e.Grid.createDom=function(t,n,o){return t=e.utils.dom.createSvgElement(e.utils.Svg.PATTERN,{id:"blocklyGridPattern"+t,patternUnits:"userSpaceOnUse"},o),0<n.length&&0<n.spacing?(e.utils.dom.createSvgElement(e.utils.Svg.LINE,{stroke:n.colour},t),1<n.length&&e.utils.dom.createSvgElement(e.utils.Svg.LINE,{stroke:n.colour},t)):e.utils.dom.createSvgElement(e.utils.Svg.LINE,{},t),t},e.Theme=function(t,n,o,r){this.name=t,this.blockStyles=n||Object.create(null),this.categoryStyles=o||Object.create(null),this.componentStyles=r||Object.create(null),this.fontStyle=Object.create(null),this.startHats=null,e.registry.register(e.registry.Type.THEME,t,this)},e.Theme.prototype.getClassName=function(){return this.name+"-theme"},e.Theme.prototype.setBlockStyle=function(t,n){this.blockStyles[t]=n},e.Theme.prototype.setCategoryStyle=function(t,n){this.categoryStyles[t]=n},e.Theme.prototype.getComponentStyle=function(t){return(t=this.componentStyles[t])&&"string"==typeof t&&this.getComponentStyle(t)?this.getComponentStyle(t):t?String(t):null},e.Theme.prototype.setComponentStyle=function(t,n){this.componentStyles[t]=n},e.Theme.prototype.setFontStyle=function(t){this.fontStyle=t},e.Theme.prototype.setStartHats=function(t){this.startHats=t},e.Theme.defineTheme=function(t,n){var o=new e.Theme(t),r=n.base;return r&&("string"==typeof r&&(r=e.registry.getObject(e.registry.Type.THEME,r)),r instanceof e.Theme&&(e.utils.object.deepMerge(o,r),o.name=t)),e.utils.object.deepMerge(o.blockStyles,n.blockStyles),e.utils.object.deepMerge(o.categoryStyles,n.categoryStyles),e.utils.object.deepMerge(o.componentStyles,n.componentStyles),e.utils.object.deepMerge(o.fontStyle,n.fontStyle),null!=n.startHats&&(o.startHats=n.startHats),o},e.Themes={},e.Themes.Classic={},e.Themes.Classic.defaultBlockStyles={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},e.Themes.Classic.categoryStyles={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},e.Themes.Classic=new e.Theme("classic",e.Themes.Classic.defaultBlockStyles,e.Themes.Classic.categoryStyles),e.utils.IdGenerator={},e.utils.IdGenerator.nextId_=0,e.utils.IdGenerator.getNextUniqueId=function(){return"blockly-"+(e.utils.IdGenerator.nextId_++).toString(36)},e.utils.Metrics=function(){},e.utils.toolbox={},e.utils.toolbox.CATEGORY_TOOLBOX_KIND="categoryToolbox",e.utils.toolbox.FLYOUT_TOOLBOX_KIND="flyoutToolbox",e.utils.toolbox.Position={TOP:0,BOTTOM:1,LEFT:2,RIGHT:3},e.utils.toolbox.convertToolboxDefToJson=function(t){return t?((t instanceof Element||"string"==typeof t)&&(t=e.utils.toolbox.parseToolboxTree(t),t=e.utils.toolbox.convertToToolboxJson_(t)),e.utils.toolbox.validateToolbox_(t),t):null},e.utils.toolbox.validateToolbox_=function(t){var n=t.kind;if(t=t.contents,n&&n!=e.utils.toolbox.FLYOUT_TOOLBOX_KIND&&n!=e.utils.toolbox.CATEGORY_TOOLBOX_KIND)throw Error("Invalid toolbox kind "+n+". Please supply either "+e.utils.toolbox.FLYOUT_TOOLBOX_KIND+" or "+e.utils.toolbox.CATEGORY_TOOLBOX_KIND);if(!t)throw Error("Toolbox must have a contents attribute.")},e.utils.toolbox.convertFlyoutDefToJsonArray=function(t){return t?t.contents?t.contents:Array.isArray(t)&&0<t.length&&!t[0].nodeType?t:e.utils.toolbox.xmlToJsonArray_(t):[]},e.utils.toolbox.hasCategories=function(t){if(!t)return!1;var n=t.kind;return n?n==e.utils.toolbox.CATEGORY_TOOLBOX_KIND:!!t.contents.filter(function(o){return"CATEGORY"==o.kind.toUpperCase()}).length},e.utils.toolbox.isCategoryCollapsible=function(t){return!(!t||!t.contents||!t.contents.filter(function(n){return"CATEGORY"==n.kind.toUpperCase()}).length)},e.utils.toolbox.convertToToolboxJson_=function(t){var n={contents:e.utils.toolbox.xmlToJsonArray_(t)};return t instanceof Node&&e.utils.toolbox.addAttributes_(t,n),n},e.utils.toolbox.xmlToJsonArray_=function(t){var r,n=[],o=t.childNodes;for(o||(o=t),t=0;r=o[t];t++)if(r.tagName){var p={},b=r.tagName.toUpperCase();p.kind=b,"BLOCK"==b?p.blockxml=r:r.childNodes&&0<r.childNodes.length&&(p.contents=e.utils.toolbox.xmlToJsonArray_(r)),e.utils.toolbox.addAttributes_(r,p),n.push(p)}return n},e.utils.toolbox.addAttributes_=function(t,n){for(var o=0;o<t.attributes.length;o++){var r=t.attributes[o];-1<r.nodeName.indexOf("css-")?(n.cssconfig=n.cssconfig||{},n.cssconfig[r.nodeName.replace("css-","")]=r.value):n[r.nodeName]=r.value}},e.utils.toolbox.parseToolboxTree=function(t){if(t){if("string"!=typeof t&&(e.utils.userAgent.IE&&t.outerHTML?t=t.outerHTML:t instanceof Element||(t=null)),"string"==typeof t&&"xml"!=(t=e.Xml.textToDom(t)).nodeName.toLowerCase())throw TypeError("Toolbox should be an <xml> document.")}else t=null;return t},e.Options=function(t){var n=!!t.readOnly;if(n)var o=null,r=!1,p=!1,b=!1,I=!1,x=!1,k=!1;else{o=e.utils.toolbox.convertToolboxDefToJson(t.toolbox),r=e.utils.toolbox.hasCategories(o),void 0===(p=t.trashcan)&&(p=r);var Y=t.maxTrashcanContents;p?void 0===Y&&(Y=32):Y=0,void 0===(b=t.collapse)&&(b=r),void 0===(I=t.comments)&&(I=r),void 0===(x=t.disable)&&(x=r),void 0===(k=t.sounds)&&(k=!0)}var X=!!t.rtl,it=t.horizontalLayout;void 0===it&&(it=!1);var rt=t.toolboxPosition;rt="end"!==rt,rt=it?rt?e.utils.toolbox.Position.TOP:e.utils.toolbox.Position.BOTTOM:rt==X?e.utils.toolbox.Position.RIGHT:e.utils.toolbox.Position.LEFT;var ct=t.css;void 0===ct&&(ct=!0);var wt="https://blockly-demo.appspot.com/static/media/";t.media?wt=t.media:t.path&&(wt=t.path+"media/");var At=void 0===t.oneBasedIndex||!!t.oneBasedIndex,Rt=t.renderer||"geras",Dt=t.plugins||{};this.RTL=X,this.oneBasedIndex=At,this.collapse=b,this.comments=I,this.disable=x,this.readOnly=n,this.maxBlocks=t.maxBlocks||1/0,this.maxInstances=t.maxInstances,this.pathToMedia=wt,this.hasCategories=r,this.moveOptions=e.Options.parseMoveOptions_(t,r),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=p,this.maxTrashcanContents=Y,this.hasSounds=k,this.hasCss=ct,this.horizontalLayout=it,this.languageTree=o,this.gridOptions=e.Options.parseGridOptions_(t),this.zoomOptions=e.Options.parseZoomOptions_(t),this.toolboxPosition=rt,this.theme=e.Options.parseThemeOptions_(t),this.renderer=Rt,this.rendererOverrides=t.rendererOverrides,this.gridPattern=null,this.parentWorkspace=t.parentWorkspace,this.plugins=Dt},e.BlocklyOptions=function(){},e.Options.parseMoveOptions_=function(t,n){var o=t.move||{},r={};return void 0===o.scrollbars&&void 0===t.scrollbars?r.scrollbars=n:"object"==typeof o.scrollbars?(r.scrollbars={},r.scrollbars.horizontal=!!o.scrollbars.horizontal,r.scrollbars.vertical=!!o.scrollbars.vertical,r.scrollbars.horizontal&&r.scrollbars.vertical?r.scrollbars=!0:r.scrollbars.horizontal||r.scrollbars.vertical||(r.scrollbars=!1)):r.scrollbars=!!o.scrollbars||!!t.scrollbars,r.wheel=r.scrollbars&&void 0!==o.wheel?!!o.wheel:"object"==typeof r.scrollbars,r.drag=!(!r.scrollbars||void 0!==o.drag&&!o.drag),r},e.Options.parseZoomOptions_=function(t){var n={};return n.controls=void 0!==(t=t.zoom||{}).controls&&!!t.controls,n.wheel=void 0!==t.wheel&&!!t.wheel,n.startScale=void 0===t.startScale?1:Number(t.startScale),n.maxScale=void 0===t.maxScale?3:Number(t.maxScale),n.minScale=void 0===t.minScale?.3:Number(t.minScale),n.scaleSpeed=void 0===t.scaleSpeed?1.2:Number(t.scaleSpeed),n.pinch=void 0===t.pinch?n.wheel||n.controls:!!t.pinch,n},e.Options.parseGridOptions_=function(t){t=t.grid||{};var n={};return n.spacing=Number(t.spacing)||0,n.colour=t.colour||"#888",n.length=void 0===t.length?1:Number(t.length),n.snap=0<n.spacing&&!!t.snap,n},e.Options.parseThemeOptions_=function(t){return"string"==typeof(t=t.theme||e.Themes.Classic)?e.registry.getObject(e.registry.Type.THEME,t):t instanceof e.Theme?t:e.Theme.defineTheme(t.name||"builtin"+e.utils.IdGenerator.getNextUniqueId(),t)},e.Options.parseToolboxTree=function(t){return e.utils.deprecation.warn("Blockly.Options.parseToolboxTree","September 2020","September 2021","Blockly.utils.toolbox.parseToolboxTree"),e.utils.toolbox.parseToolboxTree(t)},e.ScrollbarPair=function(t,n,o,r,p){this.workspace_=t,o=void 0===o||o;var b=(n=void 0===n||n)&&o;n&&(this.hScroll=new e.Scrollbar(t,!0,b,r,p)),o&&(this.vScroll=new e.Scrollbar(t,!1,b,r,p)),b&&(this.corner_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{height:e.Scrollbar.scrollbarThickness,width:e.Scrollbar.scrollbarThickness,class:"blocklyScrollbarBackground"},null),e.utils.dom.insertAfter(this.corner_,t.getBubbleCanvas())),this.oldHostMetrics_=null},e.ScrollbarPair.prototype.dispose=function(){e.utils.dom.removeNode(this.corner_),this.oldHostMetrics_=this.workspace_=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)},e.ScrollbarPair.prototype.resize=function(){var t=this.workspace_.getMetrics();if(t){var n=!1,o=!1;if(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==t.viewWidth&&this.oldHostMetrics_.viewHeight==t.viewHeight&&this.oldHostMetrics_.absoluteTop==t.absoluteTop&&this.oldHostMetrics_.absoluteLeft==t.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.scrollWidth==t.scrollWidth&&this.oldHostMetrics_.viewLeft==t.viewLeft&&this.oldHostMetrics_.scrollLeft==t.scrollLeft||(n=!0),this.oldHostMetrics_&&this.oldHostMetrics_.scrollHeight==t.scrollHeight&&this.oldHostMetrics_.viewTop==t.viewTop&&this.oldHostMetrics_.scrollTop==t.scrollTop||(o=!0)):o=n=!0,n||o){try{e.Events.disable(),this.hScroll&&n&&this.hScroll.resize(t),this.vScroll&&o&&this.vScroll.resize(t)}finally{e.Events.enable()}this.workspace_.maybeFireViewportChangeEvent()}this.hScroll&&this.vScroll&&(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==t.viewWidth&&this.oldHostMetrics_.absoluteLeft==t.absoluteLeft||this.corner_.setAttribute("x",this.vScroll.position.x),this.oldHostMetrics_&&this.oldHostMetrics_.viewHeight==t.viewHeight&&this.oldHostMetrics_.absoluteTop==t.absoluteTop||this.corner_.setAttribute("y",this.hScroll.position.y)),this.oldHostMetrics_=t}},e.ScrollbarPair.prototype.canScrollHorizontally=function(){return!!this.hScroll},e.ScrollbarPair.prototype.canScrollVertically=function(){return!!this.vScroll},e.ScrollbarPair.prototype.setOrigin=function(t,n){this.hScroll&&this.hScroll.setOrigin(t,n),this.vScroll&&this.vScroll.setOrigin(t,n)},e.ScrollbarPair.prototype.set=function(t,n,o){this.hScroll&&this.hScroll.set(t,!1),this.vScroll&&this.vScroll.set(n,!1),(o||void 0===o)&&(t={},this.hScroll&&(t.x=this.hScroll.getRatio_()),this.vScroll&&(t.y=this.vScroll.getRatio_()),this.workspace_.setMetrics(t))},e.ScrollbarPair.prototype.setX=function(t){this.hScroll&&this.hScroll.set(t,!0)},e.ScrollbarPair.prototype.setY=function(t){this.vScroll&&this.vScroll.set(t,!0)},e.ScrollbarPair.prototype.setContainerVisible=function(t){this.hScroll&&this.hScroll.setContainerVisible(t),this.vScroll&&this.vScroll.setContainerVisible(t)},e.ScrollbarPair.prototype.isVisible=function(){var t=!1;return this.hScroll&&(t=this.hScroll.isVisible()),this.vScroll&&(t=t||this.vScroll.isVisible()),t},e.ScrollbarPair.prototype.resizeContent=function(t){this.hScroll&&this.hScroll.resizeContentHorizontal(t),this.vScroll&&this.vScroll.resizeContentVertical(t)},e.ScrollbarPair.prototype.resizeView=function(t){this.hScroll&&this.hScroll.resizeViewHorizontal(t),this.vScroll&&this.vScroll.resizeViewVertical(t)},e.Scrollbar=function(t,n,o,r,p){this.workspace_=t,this.pair_=o||!1,this.horizontal_=n,this.margin_=void 0!==p?p:e.Scrollbar.DEFAULT_SCROLLBAR_MARGIN,this.ratio=this.oldHostMetrics_=null,this.createDom_(r),this.position=new e.utils.Coordinate(0,0),t=e.Scrollbar.scrollbarThickness,n?(this.svgBackground_.setAttribute("height",t),this.outerSvg_.setAttribute("height",t),this.svgHandle_.setAttribute("height",t-5),this.svgHandle_.setAttribute("y",2.5),this.lengthAttribute_="width",this.positionAttribute_="x"):(this.svgBackground_.setAttribute("width",t),this.outerSvg_.setAttribute("width",t),this.svgHandle_.setAttribute("width",t-5),this.svgHandle_.setAttribute("x",2.5),this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=e.browserEvents.conditionalBind(this.svgBackground_,"mousedown",this,this.onMouseDownBar_),this.onMouseDownHandleWrapper_=e.browserEvents.conditionalBind(this.svgHandle_,"mousedown",this,this.onMouseDownHandle_)},e.Scrollbar.prototype.origin_=new e.utils.Coordinate(0,0),e.Scrollbar.prototype.startDragMouse_=0,e.Scrollbar.prototype.scrollbarLength_=0,e.Scrollbar.prototype.handleLength_=0,e.Scrollbar.prototype.handlePosition_=0,e.Scrollbar.prototype.isVisible_=!0,e.Scrollbar.prototype.containerVisible_=!0,e.Scrollbar.scrollbarThickness=15,e.Touch.TOUCH_ENABLED&&(e.Scrollbar.scrollbarThickness=25),e.Scrollbar.DEFAULT_SCROLLBAR_MARGIN=.5,e.Scrollbar.metricsAreEquivalent_=function(t,n){return t.viewWidth==n.viewWidth&&t.viewHeight==n.viewHeight&&t.viewLeft==n.viewLeft&&t.viewTop==n.viewTop&&t.absoluteTop==n.absoluteTop&&t.absoluteLeft==n.absoluteLeft&&t.scrollWidth==n.scrollWidth&&t.scrollHeight==n.scrollHeight&&t.scrollLeft==n.scrollLeft&&t.scrollTop==n.scrollTop},e.Scrollbar.prototype.dispose=function(){this.cleanUp_(),e.browserEvents.unbind(this.onMouseDownBarWrapper_),this.onMouseDownBarWrapper_=null,e.browserEvents.unbind(this.onMouseDownHandleWrapper_),this.onMouseDownHandleWrapper_=null,e.utils.dom.removeNode(this.outerSvg_),this.svgBackground_=this.svgGroup_=this.outerSvg_=null,this.svgHandle_&&(this.workspace_.getThemeManager().unsubscribe(this.svgHandle_),this.svgHandle_=null),this.workspace_=null},e.Scrollbar.prototype.constrainHandleLength_=function(t){return 0>=t||isNaN(t)?0:Math.min(t,this.scrollbarLength_)},e.Scrollbar.prototype.setHandleLength_=function(t){this.handleLength_=t,this.svgHandle_.setAttribute(this.lengthAttribute_,this.handleLength_)},e.Scrollbar.prototype.constrainHandlePosition_=function(t){return 0>=t||isNaN(t)?0:Math.min(t,this.scrollbarLength_-this.handleLength_)},e.Scrollbar.prototype.setHandlePosition=function(t){this.handlePosition_=t,this.svgHandle_.setAttribute(this.positionAttribute_,this.handlePosition_)},e.Scrollbar.prototype.setScrollbarLength_=function(t){this.scrollbarLength_=t,this.outerSvg_.setAttribute(this.lengthAttribute_,this.scrollbarLength_),this.svgBackground_.setAttribute(this.lengthAttribute_,this.scrollbarLength_)},e.Scrollbar.prototype.setPosition=function(t,n){this.position.x=t,this.position.y=n,e.utils.dom.setCssTransform(this.outerSvg_,"translate("+(this.position.x+this.origin_.x)+"px,"+(this.position.y+this.origin_.y)+"px)")},e.Scrollbar.prototype.resize=function(t){!t&&!(t=this.workspace_.getMetrics())||this.oldHostMetrics_&&e.Scrollbar.metricsAreEquivalent_(t,this.oldHostMetrics_)||(this.horizontal_?this.resizeHorizontal_(t):this.resizeVertical_(t),this.oldHostMetrics_=t,this.updateMetrics_())},e.Scrollbar.prototype.requiresViewResize_=function(t){return!this.oldHostMetrics_||this.oldHostMetrics_.viewWidth!==t.viewWidth||this.oldHostMetrics_.viewHeight!==t.viewHeight||this.oldHostMetrics_.absoluteLeft!==t.absoluteLeft||this.oldHostMetrics_.absoluteTop!==t.absoluteTop},e.Scrollbar.prototype.resizeHorizontal_=function(t){this.requiresViewResize_(t)?this.resizeViewHorizontal(t):this.resizeContentHorizontal(t)},e.Scrollbar.prototype.resizeViewHorizontal=function(t){var n=t.viewWidth-2*this.margin_;this.pair_&&(n-=e.Scrollbar.scrollbarThickness),this.setScrollbarLength_(Math.max(0,n)),n=t.absoluteLeft+this.margin_,this.pair_&&this.workspace_.RTL&&(n+=e.Scrollbar.scrollbarThickness),this.setPosition(n,t.absoluteTop+t.viewHeight-e.Scrollbar.scrollbarThickness-this.margin_),this.resizeContentHorizontal(t)},e.Scrollbar.prototype.resizeContentHorizontal=function(t){if(t.viewWidth>=t.scrollWidth)this.setHandleLength_(this.scrollbarLength_),this.setHandlePosition(0),this.pair_||this.setVisible(!1);else{this.pair_||this.setVisible(!0);var n=this.scrollbarLength_*t.viewWidth/t.scrollWidth;n=this.constrainHandleLength_(n),this.setHandleLength_(n);var o=this.scrollbarLength_-this.handleLength_;t=this.constrainHandlePosition_(t=(t.viewLeft-t.scrollLeft)/(n=t.scrollWidth-t.viewWidth)*o),this.setHandlePosition(t),this.ratio=o/n}},e.Scrollbar.prototype.resizeVertical_=function(t){this.requiresViewResize_(t)?this.resizeViewVertical(t):this.resizeContentVertical(t)},e.Scrollbar.prototype.resizeViewVertical=function(t){var n=t.viewHeight-2*this.margin_;this.pair_&&(n-=e.Scrollbar.scrollbarThickness),this.setScrollbarLength_(Math.max(0,n)),this.setPosition(this.workspace_.RTL?t.absoluteLeft+this.margin_:t.absoluteLeft+t.viewWidth-e.Scrollbar.scrollbarThickness-this.margin_,t.absoluteTop+this.margin_),this.resizeContentVertical(t)},e.Scrollbar.prototype.resizeContentVertical=function(t){if(t.viewHeight>=t.scrollHeight)this.setHandleLength_(this.scrollbarLength_),this.setHandlePosition(0),this.pair_||this.setVisible(!1);else{this.pair_||this.setVisible(!0);var n=this.scrollbarLength_*t.viewHeight/t.scrollHeight;n=this.constrainHandleLength_(n),this.setHandleLength_(n);var o=this.scrollbarLength_-this.handleLength_;t=this.constrainHandlePosition_(t=(t.viewTop-t.scrollTop)/(n=t.scrollHeight-t.viewHeight)*o),this.setHandlePosition(t),this.ratio=o/n}},e.Scrollbar.prototype.createDom_=function(t){var n="blocklyScrollbar"+(this.horizontal_?"Horizontal":"Vertical");t&&(n+=" "+t),this.outerSvg_=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{class:n},null),this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},this.outerSvg_),this.svgBackground_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyScrollbarBackground"},this.svgGroup_),t=Math.floor((e.Scrollbar.scrollbarThickness-5)/2),this.svgHandle_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyScrollbarHandle",rx:t,ry:t},this.svgGroup_),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarOpacity","fill-opacity"),e.utils.dom.insertAfter(this.outerSvg_,this.workspace_.getParentSvg())},e.Scrollbar.prototype.isVisible=function(){return this.isVisible_},e.Scrollbar.prototype.setContainerVisible=function(t){var n=t!=this.containerVisible_;this.containerVisible_=t,n&&this.updateDisplay_()},e.Scrollbar.prototype.setVisible=function(t){var n=t!=this.isVisible();if(this.pair_)throw Error("Unable to toggle visibility of paired scrollbars.");this.isVisible_=t,n&&this.updateDisplay_()},e.Scrollbar.prototype.updateDisplay_=function(){this.containerVisible_&&this.isVisible()?this.outerSvg_.setAttribute("display","block"):this.outerSvg_.setAttribute("display","none")},e.Scrollbar.prototype.onMouseDownBar_=function(t){if(this.workspace_.markFocused(),e.Touch.clearTouchIdentifier(),this.cleanUp_(),e.utils.isRightButton(t))t.stopPropagation();else{var n=e.utils.mouseToSvg(t,this.workspace_.getParentSvg(),this.workspace_.getInverseScreenCTM());n=this.horizontal_?n.x:n.y;var o=e.utils.getInjectionDivXY_(this.svgHandle_),r=this.handlePosition_,p=.95*this.handleLength_;n<=(o=this.horizontal_?o.x:o.y)?r-=p:n>=o+this.handleLength_&&(r+=p),this.setHandlePosition(this.constrainHandlePosition_(r)),this.updateMetrics_(),t.stopPropagation(),t.preventDefault()}},e.Scrollbar.prototype.onMouseDownHandle_=function(t){this.workspace_.markFocused(),this.cleanUp_(),e.utils.isRightButton(t)?t.stopPropagation():(this.startDragHandle=this.handlePosition_,this.workspace_.setupDragSurface(),this.startDragMouse_=this.horizontal_?t.clientX:t.clientY,e.Scrollbar.onMouseUpWrapper_=e.browserEvents.conditionalBind(document,"mouseup",this,this.onMouseUpHandle_),e.Scrollbar.onMouseMoveWrapper_=e.browserEvents.conditionalBind(document,"mousemove",this,this.onMouseMoveHandle_),t.stopPropagation(),t.preventDefault())},e.Scrollbar.prototype.onMouseMoveHandle_=function(t){this.setHandlePosition(this.constrainHandlePosition_(this.startDragHandle+((this.horizontal_?t.clientX:t.clientY)-this.startDragMouse_))),this.updateMetrics_()},e.Scrollbar.prototype.onMouseUpHandle_=function(){this.workspace_.resetDragSurface(),e.Touch.clearTouchIdentifier(),this.cleanUp_()},e.Scrollbar.prototype.cleanUp_=function(){e.hideChaff(!0),e.Scrollbar.onMouseUpWrapper_&&(e.browserEvents.unbind(e.Scrollbar.onMouseUpWrapper_),e.Scrollbar.onMouseUpWrapper_=null),e.Scrollbar.onMouseMoveWrapper_&&(e.browserEvents.unbind(e.Scrollbar.onMouseMoveWrapper_),e.Scrollbar.onMouseMoveWrapper_=null)},e.Scrollbar.prototype.getRatio_=function(){var t=this.handlePosition_/(this.scrollbarLength_-this.handleLength_);return isNaN(t)&&(t=0),t},e.Scrollbar.prototype.updateMetrics_=function(){var t=this.getRatio_(),n={};this.horizontal_?n.x=t:n.y=t,this.workspace_.setMetrics(n)},e.Scrollbar.prototype.set=function(t,n){this.setHandlePosition(this.constrainHandlePosition_(t*this.ratio)),(n||void 0===n)&&this.updateMetrics_()},e.Scrollbar.prototype.setOrigin=function(t,n){this.origin_=new e.utils.Coordinate(t,n)},e.Tooltip={},e.Tooltip.visible=!1,e.Tooltip.blocked_=!1,e.Tooltip.LIMIT=50,e.Tooltip.mouseOutPid_=0,e.Tooltip.showPid_=0,e.Tooltip.lastX_=0,e.Tooltip.lastY_=0,e.Tooltip.element_=null,e.Tooltip.poisonedElement_=null,e.Tooltip.OFFSET_X=0,e.Tooltip.OFFSET_Y=10,e.Tooltip.RADIUS_OK=10,e.Tooltip.HOVER_MS=750,e.Tooltip.MARGINS=5,e.Tooltip.DIV=null,e.Tooltip.getTooltipOfObject=function(t){if(t=e.Tooltip.getTargetObject_(t)){for(t=t.tooltip;"function"==typeof t;)t=t();if("string"!=typeof t)throw Error("Tooltip function must return a string.");return t}return""},e.Tooltip.getTargetObject_=function(t){for(;t&&t.tooltip;){if("string"==typeof t.tooltip||"function"==typeof t.tooltip)return t;t=t.tooltip}return null},e.Tooltip.createDom=function(){e.Tooltip.DIV||(e.Tooltip.DIV=document.createElement("div"),e.Tooltip.DIV.className="blocklyTooltipDiv",(e.parentContainer||document.body).appendChild(e.Tooltip.DIV))},e.Tooltip.bindMouseEvents=function(t){t.mouseOverWrapper_=e.browserEvents.bind(t,"mouseover",null,e.Tooltip.onMouseOver_),t.mouseOutWrapper_=e.browserEvents.bind(t,"mouseout",null,e.Tooltip.onMouseOut_),t.addEventListener("mousemove",e.Tooltip.onMouseMove_,!1)},e.Tooltip.unbindMouseEvents=function(t){t&&(e.browserEvents.unbind(t.mouseOverWrapper_),e.browserEvents.unbind(t.mouseOutWrapper_),t.removeEventListener("mousemove",e.Tooltip.onMouseMove_))},e.Tooltip.onMouseOver_=function(t){e.Tooltip.blocked_||(t=e.Tooltip.getTargetObject_(t.currentTarget),e.Tooltip.element_!=t&&(e.Tooltip.hide(),e.Tooltip.poisonedElement_=null,e.Tooltip.element_=t),clearTimeout(e.Tooltip.mouseOutPid_))},e.Tooltip.onMouseOut_=function(t){e.Tooltip.blocked_||(e.Tooltip.mouseOutPid_=setTimeout(function(){e.Tooltip.element_=null,e.Tooltip.poisonedElement_=null,e.Tooltip.hide()},1),clearTimeout(e.Tooltip.showPid_))},e.Tooltip.onMouseMove_=function(t){if(e.Tooltip.element_&&e.Tooltip.element_.tooltip&&!e.Tooltip.blocked_)if(e.Tooltip.visible){var n=e.Tooltip.lastX_-t.pageX;t=e.Tooltip.lastY_-t.pageY,Math.sqrt(n*n+t*t)>e.Tooltip.RADIUS_OK&&e.Tooltip.hide()}else e.Tooltip.poisonedElement_!=e.Tooltip.element_&&(clearTimeout(e.Tooltip.showPid_),e.Tooltip.lastX_=t.pageX,e.Tooltip.lastY_=t.pageY,e.Tooltip.showPid_=setTimeout(e.Tooltip.show_,e.Tooltip.HOVER_MS))},e.Tooltip.dispose=function(){e.Tooltip.element_=null,e.Tooltip.poisonedElement_=null,e.Tooltip.hide()},e.Tooltip.hide=function(){e.Tooltip.visible&&(e.Tooltip.visible=!1,e.Tooltip.DIV&&(e.Tooltip.DIV.style.display="none")),e.Tooltip.showPid_&&clearTimeout(e.Tooltip.showPid_)},e.Tooltip.block=function(){e.Tooltip.hide(),e.Tooltip.blocked_=!0},e.Tooltip.unblock=function(){e.Tooltip.blocked_=!1},e.Tooltip.show_=function(){if(!e.Tooltip.blocked_&&(e.Tooltip.poisonedElement_=e.Tooltip.element_,e.Tooltip.DIV)){e.Tooltip.DIV.textContent="";var t=e.Tooltip.getTooltipOfObject(e.Tooltip.element_);t=(t=e.utils.string.wrap(t,e.Tooltip.LIMIT)).split("\n");for(var n=0;n<t.length;n++){var o=document.createElement("div");o.appendChild(document.createTextNode(t[n])),e.Tooltip.DIV.appendChild(o)}t=e.Tooltip.element_.RTL,n=document.documentElement.clientWidth,o=document.documentElement.clientHeight,e.Tooltip.DIV.style.direction=t?"rtl":"ltr",e.Tooltip.DIV.style.display="block",e.Tooltip.visible=!0;var r=e.Tooltip.lastX_;r=t?r-(e.Tooltip.OFFSET_X+e.Tooltip.DIV.offsetWidth):r+e.Tooltip.OFFSET_X;var p=e.Tooltip.lastY_+e.Tooltip.OFFSET_Y;p+e.Tooltip.DIV.offsetHeight>o+window.scrollY&&(p-=e.Tooltip.DIV.offsetHeight+2*e.Tooltip.OFFSET_Y),t?r=Math.max(e.Tooltip.MARGINS-window.scrollX,r):r+e.Tooltip.DIV.offsetWidth>n+window.scrollX-2*e.Tooltip.MARGINS&&(r=n-e.Tooltip.DIV.offsetWidth-2*e.Tooltip.MARGINS),e.Tooltip.DIV.style.top=p+"px",e.Tooltip.DIV.style.left=r+"px"}},e.utils.aria={},e.utils.aria.ARIA_PREFIX_="aria-",e.utils.aria.ROLE_ATTRIBUTE_="role",e.utils.aria.Role={GRID:"grid",GRIDCELL:"gridcell",GROUP:"group",LISTBOX:"listbox",MENU:"menu",MENUITEM:"menuitem",MENUITEMCHECKBOX:"menuitemcheckbox",OPTION:"option",PRESENTATION:"presentation",ROW:"row",TREE:"tree",TREEITEM:"treeitem"},e.utils.aria.State={ACTIVEDESCENDANT:"activedescendant",COLCOUNT:"colcount",DISABLED:"disabled",EXPANDED:"expanded",INVALID:"invalid",LABEL:"label",LABELLEDBY:"labelledby",LEVEL:"level",ORIENTATION:"orientation",POSINSET:"posinset",ROWCOUNT:"rowcount",SELECTED:"selected",SETSIZE:"setsize",VALUEMAX:"valuemax",VALUEMIN:"valuemin"},e.utils.aria.setRole=function(t,n){t.setAttribute(e.utils.aria.ROLE_ATTRIBUTE_,n)},e.utils.aria.setState=function(t,n,o){Array.isArray(o)&&(o=o.join(" ")),t.setAttribute(e.utils.aria.ARIA_PREFIX_+n,o)},e.IASTNodeLocation=function(){},e.IASTNodeLocationSvg=function(){},e.IASTNodeLocationWithBlock=function(){},e.IKeyboardAccessible=function(){},e.utils.deprecation={},e.utils.deprecation.warn=function(t,n,o,r){t=t+" was deprecated on "+n+" and will be deleted on "+o+".",r&&(t+="\nUse "+r+" instead."),console.warn(t)},e.Connection=function(t,n){this.sourceBlock_=t,this.type=n},e.Connection.CAN_CONNECT=0,e.Connection.REASON_SELF_CONNECTION=1,e.Connection.REASON_WRONG_TYPE=2,e.Connection.REASON_TARGET_NULL=3,e.Connection.REASON_CHECKS_FAILED=4,e.Connection.REASON_DIFFERENT_WORKSPACES=5,e.Connection.REASON_SHADOW_PARENT=6,e.Connection.REASON_DRAG_CHECKS_FAILED=7,e.Connection.prototype.targetConnection=null,e.Connection.prototype.disposed=!1,e.Connection.prototype.check_=null,e.Connection.prototype.shadowDom_=null,e.Connection.prototype.x=0,e.Connection.prototype.y=0,e.Connection.prototype.connect_=function(t){var x,n=e.connectionTypes.INPUT_VALUE,o=this.getSourceBlock(),r=t.getSourceBlock();if(t.isConnected()&&t.disconnect(),this.isConnected()){var p=this.getShadowDom(!0);this.shadowDom_=null;var b=this.targetBlock();if(b.isShadow())b.dispose(!1);else{this.disconnect();var I=b}this.shadowDom_=p}e.Events.isEnabled()&&(x=new(e.Events.get(e.Events.BLOCK_MOVE))(r)),e.Connection.connectReciprocally_(this,t),r.setParent(o),x&&(x.recordNew(),e.Events.fire(x)),I&&((r=e.Connection.getConnectionForOrphanedConnection(r,t=this.type===n?I.outputConnection:I.previousConnection))?t.connect(r):t.onFailedConnect(this))},e.Connection.prototype.dispose=function(){if(this.isConnected()){this.setShadowDom(null);var t=this.targetBlock();t&&t.unplug()}this.disposed=!0},e.Connection.prototype.getSourceBlock=function(){return this.sourceBlock_},e.Connection.prototype.isSuperior=function(){return this.type==e.connectionTypes.INPUT_VALUE||this.type==e.connectionTypes.NEXT_STATEMENT},e.Connection.prototype.isConnected=function(){return!!this.targetConnection},e.Connection.prototype.canConnectWithReason=function(t){return e.utils.deprecation.warn("Connection.prototype.canConnectWithReason","July 2020","July 2021","the workspace's connection checker"),this.getConnectionChecker().canConnectWithReason(this,t,!1)},e.Connection.prototype.checkConnection=function(t){e.utils.deprecation.warn("Connection.prototype.checkConnection","July 2020","July 2021","the workspace's connection checker");var n=this.getConnectionChecker(),o=n.canConnectWithReason(this,t,!1);if(o!=e.Connection.CAN_CONNECT)throw Error(n.getErrorMessage(o,this,t))},e.Connection.prototype.getConnectionChecker=function(){return this.sourceBlock_.workspace.connectionChecker},e.Connection.prototype.isConnectionAllowed=function(t){return e.utils.deprecation.warn("Connection.prototype.isConnectionAllowed","July 2020","July 2021","the workspace's connection checker"),this.getConnectionChecker().canConnect(this,t,!0)},e.Connection.prototype.onFailedConnect=function(t){},e.Connection.prototype.connect=function(t){if(this.targetConnection!=t&&this.getConnectionChecker().canConnect(this,t,!1)){var n=e.Events.getGroup();n||e.Events.setGroup(!0),this.isSuperior()?this.connect_(t):t.connect_(this),n||e.Events.setGroup(!1)}},e.Connection.connectReciprocally_=function(t,n){if(!t||!n)throw Error("Cannot connect null connections.");t.targetConnection=n,n.targetConnection=t},e.Connection.getSingleConnection_=function(t,n){for(var b,o=null,r=(n=n.outputConnection).getConnectionChecker(),p=0;b=t.inputList[p];p++)if((b=b.connection)&&r.canConnect(n,b,!1)){if(o)return null;o=b}return o},e.Connection.getConnectionForOrphanedOutput_=function(t,n){for(var o;o=e.Connection.getSingleConnection_(t,n);)if(!(t=o.targetBlock())||t.isShadow())return o;return null},e.Connection.getConnectionForOrphanedConnection=function(t,n){if(n.type===e.connectionTypes.OUTPUT_VALUE)return e.Connection.getConnectionForOrphanedOutput_(t,n.getSourceBlock());t=t.lastConnectionInStack(!0);var o=n.getConnectionChecker();return t&&o.canConnect(n,t,!1)?t:null},e.Connection.prototype.disconnect=function(){var t=this.targetConnection;if(!t)throw Error("Source connection not connected.");if(t.targetConnection!=this)throw Error("Target connection not connected to source connection.");if(this.isSuperior()){var n=this.sourceBlock_,o=t.getSourceBlock();t=this}else n=t.getSourceBlock(),o=this.sourceBlock_;var r=e.Events.getGroup();r||e.Events.setGroup(!0),this.disconnectInternal_(n,o),o.isShadow()||t.respawnShadow_(),r||e.Events.setGroup(!1)},e.Connection.prototype.disconnectInternal_=function(t,n){var o;e.Events.isEnabled()&&(o=new(e.Events.get(e.Events.BLOCK_MOVE))(n)),this.targetConnection=this.targetConnection.targetConnection=null,n.setParent(null),o&&(o.recordNew(),e.Events.fire(o))},e.Connection.prototype.respawnShadow_=function(){var t=this.getSourceBlock(),n=this.getShadowDom();if(t.workspace&&n)if((t=e.Xml.domToBlock(n,t.workspace)).outputConnection)this.connect(t.outputConnection);else{if(!t.previousConnection)throw Error("Child block does not have output or previous statement.");this.connect(t.previousConnection)}},e.Connection.prototype.targetBlock=function(){return this.isConnected()?this.targetConnection.getSourceBlock():null},e.Connection.prototype.checkType=function(t){return e.utils.deprecation.warn("Connection.prototype.checkType","October 2019","January 2021","the workspace's connection checker"),this.getConnectionChecker().canConnect(this,t,!1)},e.Connection.prototype.checkType_=function(t){return e.utils.deprecation.warn("Connection.prototype.checkType_","October 2019","January 2021","the workspace's connection checker"),this.checkType(t)},e.Connection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()},e.Connection.prototype.setCheck=function(t){return t?(Array.isArray(t)||(t=[t]),this.check_=t,this.onCheckChanged_()):this.check_=null,this},e.Connection.prototype.getCheck=function(){return this.check_},e.Connection.prototype.setShadowDom=function(t){this.shadowDom_=t,(t=this.targetBlock())?t.isShadow()&&(t.dispose(!1),this.respawnShadow_()):this.respawnShadow_()},e.Connection.prototype.getShadowDom=function(t){return t&&this.targetBlock().isShadow()?e.Xml.blockToDom(this.targetBlock()):this.shadowDom_},e.Connection.prototype.neighbours=function(t){return[]},e.Connection.prototype.getParentInput=function(){for(var t=null,n=this.sourceBlock_.inputList,o=0;o<n.length;o++)if(n[o].connection===this){t=n[o];break}return t},e.Connection.prototype.toString=function(){var t=this.sourceBlock_;if(!t)return"Orphan Connection";if(t.outputConnection==this)var n="Output Connection of ";else if(t.previousConnection==this)n="Previous Connection of ";else if(t.nextConnection==this)n="Next Connection of ";else{n=null;for(var r,o=0;r=t.inputList[o];o++)if(r.connection==this){n=r;break}if(!n)return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection";n='Input "'+n.name+'" connection on '}return n+t.toDevString()},e.IConnectionChecker=function(){},e.ConnectionChecker=function(){},e.ConnectionChecker.prototype.canConnect=function(t,n,o,r){return this.canConnectWithReason(t,n,o,r)==e.Connection.CAN_CONNECT},e.ConnectionChecker.prototype.canConnectWithReason=function(t,n,o,r){var p=this.doSafetyChecks(t,n);return p!=e.Connection.CAN_CONNECT?p:this.doTypeChecks(t,n)?o&&!this.doDragChecks(t,n,r||0)?e.Connection.REASON_DRAG_CHECKS_FAILED:e.Connection.CAN_CONNECT:e.Connection.REASON_CHECKS_FAILED},e.ConnectionChecker.prototype.getErrorMessage=function(t,n,o){switch(t){case e.Connection.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case e.Connection.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case e.Connection.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case e.Connection.REASON_TARGET_NULL:return"Target connection is null.";case e.Connection.REASON_CHECKS_FAILED:return"Connection checks failed. "+n+" expected "+n.getCheck()+", found "+o.getCheck();case e.Connection.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case e.Connection.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";default:return"Unknown connection failure: this should never happen!"}},e.ConnectionChecker.prototype.doSafetyChecks=function(t,n){if(!t||!n)return e.Connection.REASON_TARGET_NULL;if(t.isSuperior())var o=t.getSourceBlock(),r=n.getSourceBlock();else r=t.getSourceBlock(),o=n.getSourceBlock();return o==r?e.Connection.REASON_SELF_CONNECTION:n.type!=e.OPPOSITE_TYPE[t.type]?e.Connection.REASON_WRONG_TYPE:o.workspace!==r.workspace?e.Connection.REASON_DIFFERENT_WORKSPACES:o.isShadow()&&!r.isShadow()?e.Connection.REASON_SHADOW_PARENT:e.Connection.CAN_CONNECT},e.ConnectionChecker.prototype.doTypeChecks=function(t,n){if(t=t.getCheck(),n=n.getCheck(),!t||!n)return!0;for(var o=0;o<t.length;o++)if(-1!=n.indexOf(t[o]))return!0;return!1},e.ConnectionChecker.prototype.doDragChecks=function(t,n,o){if(t.distanceFrom(n)>o||n.getSourceBlock().isInsertionMarker())return!1;switch(n.type){case e.connectionTypes.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(t,n);case e.connectionTypes.OUTPUT_VALUE:if(n.isConnected()&&!n.targetBlock().isInsertionMarker()||t.isConnected())return!1;break;case e.connectionTypes.INPUT_VALUE:if(n.isConnected()&&!n.targetBlock().isMovable()&&!n.targetBlock().isShadow())return!1;break;case e.connectionTypes.NEXT_STATEMENT:if(n.isConnected()&&!t.getSourceBlock().nextConnection&&!n.targetBlock().isShadow()&&n.targetBlock().nextConnection)return!1;break;default:return!1}return-1==e.draggingConnections.indexOf(n)},e.ConnectionChecker.prototype.canConnectToPrevious_=function(t,n){return!(t.targetConnection||-1!=e.draggingConnections.indexOf(n)||n.targetConnection&&(!(t=n.targetBlock()).isInsertionMarker()||t.getPreviousBlock()))},e.registry.register(e.registry.Type.CONNECTION_CHECKER,e.registry.DEFAULT,e.ConnectionChecker),e.VariableMap=function(t){this.variableMap_=Object.create(null),this.workspace=t},e.VariableMap.prototype.clear=function(){this.variableMap_=Object.create(null)},e.VariableMap.prototype.renameVariable=function(t,n){var o=this.getVariable(n,t.type),r=this.workspace.getAllBlocks(!1);e.Events.setGroup(!0);try{o&&o.getId()!=t.getId()?this.renameVariableWithConflict_(t,n,o,r):this.renameVariableAndUses_(t,n,r)}finally{e.Events.setGroup(!1)}},e.VariableMap.prototype.renameVariableById=function(t,n){var o=this.getVariableById(t);if(!o)throw Error("Tried to rename a variable that didn't exist. ID: "+t);this.renameVariable(o,n)},e.VariableMap.prototype.renameVariableAndUses_=function(t,n,o){for(e.Events.fire(new(e.Events.get(e.Events.VAR_RENAME))(t,n)),t.name=n,n=0;n<o.length;n++)o[n].updateVarName(t)},e.VariableMap.prototype.renameVariableWithConflict_=function(t,n,o,r){var p=t.type;for(n!=o.name&&this.renameVariableAndUses_(o,n,r),n=0;n<r.length;n++)r[n].renameVarById(t.getId(),o.getId());e.Events.fire(new(e.Events.get(e.Events.VAR_DELETE))(t)),t=this.getVariablesOfType(p).indexOf(t),this.variableMap_[p].splice(t,1)},e.VariableMap.prototype.createVariable=function(t,n,o){var r=this.getVariable(t,n);if(r){if(o&&r.getId()!=o)throw Error('Variable "'+t+'" is already in use and its id is "'+r.getId()+'" which conflicts with the passed in id, "'+o+'".');return r}if(o&&this.getVariableById(o))throw Error('Variable id, "'+o+'", is already in use.');return r=o||e.utils.genUid(),r=new e.VariableModel(this.workspace,t,n=n||"",r),(t=this.variableMap_[n]||[]).push(r),delete this.variableMap_[n],this.variableMap_[n]=t,r},e.VariableMap.prototype.deleteVariable=function(t){for(var r,n=this.variableMap_[t.type],o=0;r=n[o];o++)if(r.getId()==t.getId()){n.splice(o,1),e.Events.fire(new(e.Events.get(e.Events.VAR_DELETE))(t));break}},e.VariableMap.prototype.deleteVariableById=function(t){var n=this.getVariableById(t);if(n){var p,o=n.name,r=this.getVariableUsesById(t);for(t=0;p=r[t];t++)if("procedures_defnoreturn"==p.type||"procedures_defreturn"==p.type)return t=p.getFieldValue("NAME"),o=e.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",o).replace("%2",t),void e.alert(o);var b=this;1<r.length?(o=e.Msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(r.length)).replace("%2",o),e.confirm(o,function(I){I&&n&&b.deleteVariableInternal(n,r)})):b.deleteVariableInternal(n,r)}else console.warn("Can't delete non-existent variable: "+t)},e.VariableMap.prototype.deleteVariableInternal=function(t,n){var o=e.Events.getGroup();o||e.Events.setGroup(!0);try{for(var r=0;r<n.length;r++)n[r].dispose(!0);this.deleteVariable(t)}finally{o||e.Events.setGroup(!1)}},e.VariableMap.prototype.getVariable=function(t,n){if(n=this.variableMap_[n||""])for(var r,o=0;r=n[o];o++)if(e.Names.equals(r.name,t))return r;return null},e.VariableMap.prototype.getVariableById=function(t){for(var n=Object.keys(this.variableMap_),o=0;o<n.length;o++)for(var b,r=n[o],p=0;b=this.variableMap_[r][p];p++)if(b.getId()==t)return b;return null},e.VariableMap.prototype.getVariablesOfType=function(t){return(t=this.variableMap_[t||""])?t.slice():[]},e.VariableMap.prototype.getVariableTypes=function(t){var n={};e.utils.object.mixin(n,this.variableMap_),t&&t.getPotentialVariableMap()&&e.utils.object.mixin(n,t.getPotentialVariableMap().variableMap_),t=Object.keys(n),n=!1;for(var o=0;o<t.length;o++)""==t[o]&&(n=!0);return n||t.push(""),t},e.VariableMap.prototype.getAllVariables=function(){var n,t=[];for(n in this.variableMap_)t=t.concat(this.variableMap_[n]);return t},e.VariableMap.prototype.getAllVariableNames=function(){var n,t=[];for(n in this.variableMap_)for(var p,o=this.variableMap_[n],r=0;p=o[r];r++)t.push(p.name);return t},e.VariableMap.prototype.getVariableUsesById=function(t){for(var n=[],o=this.workspace.getAllBlocks(!1),r=0;r<o.length;r++){var p=o[r].getVarModels();if(p)for(var b=0;b<p.length;b++)p[b].getId()==t&&n.push(o[r])}return n},e.Workspace=function(t){this.id=e.utils.genUid(),e.Workspace.WorkspaceDB_[this.id]=this,this.options=t||new e.Options({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(e.registry.getClassFromOptions(e.registry.Type.CONNECTION_CHECKER,this.options,!0))(this),this.topBlocks_=[],this.topComments_=[],this.commentDB_=Object.create(null),this.listeners_=[],this.undoStack_=[],this.redoStack_=[],this.blockDB_=Object.create(null),this.typedBlocksDB_=Object.create(null),this.variableMap_=new e.VariableMap(this),this.potentialVariableMap_=null},e.Workspace.prototype.rendered=!1,e.Workspace.prototype.isClearing=!1,e.Workspace.prototype.MAX_UNDO=1024,e.Workspace.prototype.connectionDBList=null,e.Workspace.prototype.dispose=function(){this.listeners_.length=0,this.clear(),delete e.Workspace.WorkspaceDB_[this.id]},e.Workspace.SCAN_ANGLE=3,e.Workspace.prototype.sortObjects_=function(t,n){return t=t.getRelativeToSurfaceXY(),n=n.getRelativeToSurfaceXY(),t.y+e.Workspace.prototype.sortObjects_.offset*t.x-(n.y+e.Workspace.prototype.sortObjects_.offset*n.x)},e.Workspace.prototype.addTopBlock=function(t){this.topBlocks_.push(t)},e.Workspace.prototype.removeTopBlock=function(t){if(!e.utils.arrayRemove(this.topBlocks_,t))throw Error("Block not present in workspace's list of top-most blocks.")},e.Workspace.prototype.getTopBlocks=function(t){var n=[].concat(this.topBlocks_);return t&&1<n.length&&(this.sortObjects_.offset=Math.sin(e.utils.math.toRadians(e.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),n.sort(this.sortObjects_)),n},e.Workspace.prototype.addTypedBlock=function(t){this.typedBlocksDB_[t.type]||(this.typedBlocksDB_[t.type]=[]),this.typedBlocksDB_[t.type].push(t)},e.Workspace.prototype.removeTypedBlock=function(t){this.typedBlocksDB_[t.type].splice(this.typedBlocksDB_[t.type].indexOf(t),1),this.typedBlocksDB_[t.type].length||delete this.typedBlocksDB_[t.type]},e.Workspace.prototype.getBlocksByType=function(t,n){return this.typedBlocksDB_[t]?(t=this.typedBlocksDB_[t].slice(0),n&&1<t.length&&(this.sortObjects_.offset=Math.sin(e.utils.math.toRadians(e.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),t.sort(this.sortObjects_)),t):[]},e.Workspace.prototype.addTopComment=function(t){this.topComments_.push(t),this.commentDB_[t.id]&&console.warn('Overriding an existing comment on this workspace, with id "'+t.id+'"'),this.commentDB_[t.id]=t},e.Workspace.prototype.removeTopComment=function(t){if(!e.utils.arrayRemove(this.topComments_,t))throw Error("Comment not present in workspace's list of top-most comments.");delete this.commentDB_[t.id]},e.Workspace.prototype.getTopComments=function(t){var n=[].concat(this.topComments_);return t&&1<n.length&&(this.sortObjects_.offset=Math.sin(e.utils.math.toRadians(e.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),n.sort(this.sortObjects_)),n},e.Workspace.prototype.getAllBlocks=function(t){if(t){t=this.getTopBlocks(!0);for(var n=[],o=0;o<t.length;o++)n.push.apply(n,t[o].getDescendants(!0))}else for(n=this.getTopBlocks(!1),o=0;o<n.length;o++)n.push.apply(n,n[o].getChildren(!1));return n.filter(function(r){return!r.isInsertionMarker()})},e.Workspace.prototype.clear=function(){this.isClearing=!0;try{var t=e.Events.getGroup();for(t||e.Events.setGroup(!0);this.topBlocks_.length;)this.topBlocks_[0].dispose(!1);for(;this.topComments_.length;)this.topComments_[this.topComments_.length-1].dispose(!1);t||e.Events.setGroup(!1),this.variableMap_.clear(),this.potentialVariableMap_&&this.potentialVariableMap_.clear()}finally{this.isClearing=!1}},e.Workspace.prototype.renameVariableById=function(t,n){this.variableMap_.renameVariableById(t,n)},e.Workspace.prototype.createVariable=function(t,n,o){return this.variableMap_.createVariable(t,n,o)},e.Workspace.prototype.getVariableUsesById=function(t){return this.variableMap_.getVariableUsesById(t)},e.Workspace.prototype.deleteVariableById=function(t){this.variableMap_.deleteVariableById(t)},e.Workspace.prototype.getVariable=function(t,n){return this.variableMap_.getVariable(t,n)},e.Workspace.prototype.getVariableById=function(t){return this.variableMap_.getVariableById(t)},e.Workspace.prototype.getVariablesOfType=function(t){return this.variableMap_.getVariablesOfType(t)},e.Workspace.prototype.getVariableTypes=function(){return this.variableMap_.getVariableTypes(this)},e.Workspace.prototype.getAllVariables=function(){return this.variableMap_.getAllVariables()},e.Workspace.prototype.getAllVariableNames=function(){return this.variableMap_.getAllVariableNames()},e.Workspace.prototype.getWidth=function(){return 0},e.Workspace.prototype.newBlock=function(t,n){return new e.Block(this,t,n)},e.Workspace.prototype.remainingCapacity=function(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length},e.Workspace.prototype.remainingCapacityOfType=function(t){return this.options.maxInstances?(void 0!==this.options.maxInstances[t]?this.options.maxInstances[t]:1/0)-this.getBlocksByType(t,!1).length:1/0},e.Workspace.prototype.isCapacityAvailable=function(t){if(!this.hasBlockLimits())return!0;var o,n=0;for(o in t){if(t[o]>this.remainingCapacityOfType(o))return!1;n+=t[o]}return!(n>this.remainingCapacity())},e.Workspace.prototype.hasBlockLimits=function(){return this.options.maxBlocks!=1/0||!!this.options.maxInstances},e.Workspace.prototype.getUndoStack=function(){return this.undoStack_},e.Workspace.prototype.getRedoStack=function(){return this.redoStack_},e.Workspace.prototype.undo=function(t){var n=t?this.redoStack_:this.undoStack_,o=t?this.undoStack_:this.redoStack_,r=n.pop();if(r){for(var p=[r];n.length&&r.group&&r.group==n[n.length-1].group;)p.push(n.pop());for(n=0;r=p[n];n++)o.push(r);p=e.Events.filter(p,t),e.Events.recordUndo=!1;try{for(n=0;r=p[n];n++)r.run(t)}finally{e.Events.recordUndo=!0}}},e.Workspace.prototype.clearUndo=function(){this.undoStack_.length=0,this.redoStack_.length=0,e.Events.clearPendingUndo()},e.Workspace.prototype.addChangeListener=function(t){return this.listeners_.push(t),t},e.Workspace.prototype.removeChangeListener=function(t){e.utils.arrayRemove(this.listeners_,t)},e.Workspace.prototype.fireChangeListener=function(t){if(t.recordUndo)for(this.undoStack_.push(t),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(var o,n=0;o=this.listeners_[n];n++)o(t)},e.Workspace.prototype.getBlockById=function(t){return this.blockDB_[t]||null},e.Workspace.prototype.setBlockById=function(t,n){this.blockDB_[t]=n},e.Workspace.prototype.removeBlockById=function(t){delete this.blockDB_[t]},e.Workspace.prototype.getCommentById=function(t){return this.commentDB_[t]||null},e.Workspace.prototype.allInputsFilled=function(t){for(var r,n=this.getTopBlocks(!1),o=0;r=n[o];o++)if(!r.allInputsFilled(t))return!1;return!0},e.Workspace.prototype.getPotentialVariableMap=function(){return this.potentialVariableMap_},e.Workspace.prototype.createPotentialVariableMap=function(){this.potentialVariableMap_=new e.VariableMap(this)},e.Workspace.prototype.getVariableMap=function(){return this.variableMap_},e.Workspace.prototype.setVariableMap=function(t){this.variableMap_=t},e.Workspace.WorkspaceDB_=Object.create(null),e.Workspace.getById=function(t){return e.Workspace.WorkspaceDB_[t]||null},e.Workspace.getAll=function(){var n,t=[];for(n in e.Workspace.WorkspaceDB_)t.push(e.Workspace.WorkspaceDB_[n]);return t},e.WorkspaceDragSurfaceSvg=function(t){this.container_=t,this.createDom()},e.WorkspaceDragSurfaceSvg.prototype.SVG_=null,e.WorkspaceDragSurfaceSvg.prototype.container_=null,e.WorkspaceDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{xmlns:e.utils.dom.SVG_NS,"xmlns:html":e.utils.dom.HTML_NS,"xmlns:xlink":e.utils.dom.XLINK_NS,version:"1.1",class:"blocklyWsDragSurface blocklyOverflowVisible"},null),this.container_.appendChild(this.SVG_))},e.WorkspaceDragSurfaceSvg.prototype.translateSurface=function(t,n){t=t.toFixed(0),n=n.toFixed(0),this.SVG_.style.display="block",e.utils.dom.setCssTransform(this.SVG_,"translate3d("+t+"px, "+n+"px, 0px)")},e.WorkspaceDragSurfaceSvg.prototype.getSurfaceTranslation=function(){return e.utils.getRelativeXY(this.SVG_)},e.WorkspaceDragSurfaceSvg.prototype.clearAndHide=function(t){if(!t)throw Error("Couldn't clear and hide the drag surface: missing new surface.");var n=this.SVG_.childNodes[0],o=this.SVG_.childNodes[1];if(!(n&&o&&e.utils.dom.hasClass(n,"blocklyBlockCanvas")&&e.utils.dom.hasClass(o,"blocklyBubbleCanvas")))throw Error("Couldn't clear and hide the drag surface. A node was missing.");if(null!=this.previousSibling_?e.utils.dom.insertAfter(n,this.previousSibling_):t.insertBefore(n,t.firstChild),e.utils.dom.insertAfter(o,n),this.SVG_.style.display="none",this.SVG_.childNodes.length)throw Error("Drag surface was not cleared.");e.utils.dom.setCssTransform(this.SVG_,""),this.previousSibling_=null},e.WorkspaceDragSurfaceSvg.prototype.setContentsAndShow=function(t,n,o,r,p,b){if(this.SVG_.childNodes.length)throw Error("Already dragging a block.");this.previousSibling_=o,t.setAttribute("transform","translate(0, 0) scale("+b+")"),n.setAttribute("transform","translate(0, 0) scale("+b+")"),this.SVG_.setAttribute("width",r),this.SVG_.setAttribute("height",p),this.SVG_.appendChild(t),this.SVG_.appendChild(n),this.SVG_.style.display="block"},e.blockRendering={},e.blockRendering.useDebugger=!1,e.blockRendering.register=function(t,n){e.registry.register(e.registry.Type.RENDERER,t,n)},e.blockRendering.unregister=function(t){e.registry.unregister(e.registry.Type.RENDERER,t)},e.blockRendering.startDebugger=function(){e.blockRendering.useDebugger=!0},e.blockRendering.stopDebugger=function(){e.blockRendering.useDebugger=!1},e.blockRendering.init=function(t,n,o){return(t=new(e.registry.getClass(e.registry.Type.RENDERER,t))(t)).init(n,o),t},e.ASTNode=function(t,n,o){if(!n)throw Error("Cannot create a node without a location.");this.type_=t,this.isConnection_=e.ASTNode.isConnectionType_(t),this.location_=n,this.wsCoordinate_=null,this.processParams_(o||null)},e.ASTNode.types={FIELD:"field",BLOCK:"block",INPUT:"input",OUTPUT:"output",NEXT:"next",PREVIOUS:"previous",STACK:"stack",WORKSPACE:"workspace"},e.ASTNode.NAVIGATE_ALL_FIELDS=!1,e.ASTNode.DEFAULT_OFFSET_Y=-20,e.ASTNode.isConnectionType_=function(t){switch(t){case e.ASTNode.types.PREVIOUS:case e.ASTNode.types.NEXT:case e.ASTNode.types.INPUT:case e.ASTNode.types.OUTPUT:return!0}return!1},e.ASTNode.createFieldNode=function(t){return t?new e.ASTNode(e.ASTNode.types.FIELD,t):null},e.ASTNode.createConnectionNode=function(t){if(!t)return null;var n=t.type;return n==e.connectionTypes.INPUT_VALUE||n==e.connectionTypes.NEXT_STATEMENT&&t.getParentInput()?e.ASTNode.createInputNode(t.getParentInput()):n==e.connectionTypes.NEXT_STATEMENT?new e.ASTNode(e.ASTNode.types.NEXT,t):n==e.connectionTypes.OUTPUT_VALUE?new e.ASTNode(e.ASTNode.types.OUTPUT,t):n==e.connectionTypes.PREVIOUS_STATEMENT?new e.ASTNode(e.ASTNode.types.PREVIOUS,t):null},e.ASTNode.createInputNode=function(t){return t&&t.connection?new e.ASTNode(e.ASTNode.types.INPUT,t.connection):null},e.ASTNode.createBlockNode=function(t){return t?new e.ASTNode(e.ASTNode.types.BLOCK,t):null},e.ASTNode.createStackNode=function(t){return t?new e.ASTNode(e.ASTNode.types.STACK,t):null},e.ASTNode.createWorkspaceNode=function(t,n){return n&&t?new e.ASTNode(e.ASTNode.types.WORKSPACE,t,{wsCoordinate:n}):null},e.ASTNode.createTopNode=function(t){var n=t.previousConnection||t.outputConnection;return n?e.ASTNode.createConnectionNode(n):e.ASTNode.createBlockNode(t)},e.ASTNode.prototype.processParams_=function(t){t&&t.wsCoordinate&&(this.wsCoordinate_=t.wsCoordinate)},e.ASTNode.prototype.getLocation=function(){return this.location_},e.ASTNode.prototype.getType=function(){return this.type_},e.ASTNode.prototype.getWsCoordinate=function(){return this.wsCoordinate_},e.ASTNode.prototype.isConnection=function(){return this.isConnection_},e.ASTNode.prototype.findNextForInput_=function(){var o,t=this.location_.getParentInput(),n=t.getSourceBlock();for(t=n.inputList.indexOf(t)+1;o=n.inputList[t];t++){for(var b,r=o.fieldRow,p=0;b=r[p];p++)if(b.isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(b);if(o.connection)return e.ASTNode.createInputNode(o)}return null},e.ASTNode.prototype.findNextForField_=function(){var t=this.location_,n=t.getParentInput(),o=t.getSourceBlock(),r=o.inputList.indexOf(n);for(t=n.fieldRow.indexOf(t)+1;n=o.inputList[r];r++){for(var p=n.fieldRow;t<p.length;){if(p[t].isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(p[t]);t++}if(t=0,n.connection)return e.ASTNode.createInputNode(n)}return null},e.ASTNode.prototype.findPrevForInput_=function(){for(var r,t=this.location_.getParentInput(),n=t.getSourceBlock(),o=n.inputList.indexOf(t);r=n.inputList[o];o--){if(r.connection&&r!==t)return e.ASTNode.createInputNode(r);for(var b,p=(r=r.fieldRow).length-1;b=r[p];p--)if(b.isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(b)}return null},e.ASTNode.prototype.findPrevForField_=function(){var p,t=this.location_,n=t.getParentInput(),o=t.getSourceBlock(),r=o.inputList.indexOf(n);for(t=n.fieldRow.indexOf(t)-1;p=o.inputList[r];r--){if(p.connection&&p!==n)return e.ASTNode.createInputNode(p);for(p=p.fieldRow;-1<t;){if(p[t].isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(p[t]);t--}0<=r-1&&(t=o.inputList[r-1].fieldRow.length-1)}return null},e.ASTNode.prototype.navigateBetweenStacks_=function(t){var n=this.getLocation();if(n instanceof e.Block||(n=n.getSourceBlock()),!n||!n.workspace)return null;var o=n.getRootBlock();n=o.workspace.getTopBlocks(!0);for(var p,r=0;p=n[r];r++)if(o.id==p.id)return-1==(t=r+(t?1:-1))||t==n.length?null:e.ASTNode.createStackNode(n[t]);throw Error("Couldn't find "+(t?"next":"previous")+" stack?!")},e.ASTNode.prototype.findTopASTNodeForBlock_=function(t){var n=t.previousConnection||t.outputConnection;return n?e.ASTNode.createConnectionNode(n):e.ASTNode.createBlockNode(t)},e.ASTNode.prototype.getOutAstNodeForBlock_=function(t){if(!t)return null;var n=(t=t.getTopStackBlock()).previousConnection||t.outputConnection;return n&&n.targetConnection&&n.targetConnection.getParentInput()?e.ASTNode.createInputNode(n.targetConnection.getParentInput()):e.ASTNode.createStackNode(t)},e.ASTNode.prototype.findFirstFieldOrInput_=function(t){t=t.inputList;for(var o,n=0;o=t[n];n++){for(var b,r=o.fieldRow,p=0;b=r[p];p++)if(b.isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(b);if(o.connection)return e.ASTNode.createInputNode(o)}return null},e.ASTNode.prototype.getSourceBlock=function(){return this.getType()===e.ASTNode.types.BLOCK||this.getType()===e.ASTNode.types.STACK?this.getLocation():this.getType()===e.ASTNode.types.WORKSPACE?null:this.getLocation().getSourceBlock()},e.ASTNode.prototype.next=function(){switch(this.type_){case e.ASTNode.types.STACK:return this.navigateBetweenStacks_(!0);case e.ASTNode.types.OUTPUT:var t=this.location_;return e.ASTNode.createBlockNode(t.getSourceBlock());case e.ASTNode.types.FIELD:return this.findNextForField_();case e.ASTNode.types.INPUT:return this.findNextForInput_();case e.ASTNode.types.BLOCK:return e.ASTNode.createConnectionNode(this.location_.nextConnection);case e.ASTNode.types.PREVIOUS:return e.ASTNode.createBlockNode((t=this.location_).getSourceBlock());case e.ASTNode.types.NEXT:return e.ASTNode.createConnectionNode((t=this.location_).targetConnection)}return null},e.ASTNode.prototype.in=function(){switch(this.type_){case e.ASTNode.types.WORKSPACE:var t=this.location_.getTopBlocks(!0);if(0<t.length)return e.ASTNode.createStackNode(t[0]);break;case e.ASTNode.types.STACK:return this.findTopASTNodeForBlock_(t=this.location_);case e.ASTNode.types.BLOCK:return this.findFirstFieldOrInput_(t=this.location_);case e.ASTNode.types.INPUT:return e.ASTNode.createConnectionNode(this.location_.targetConnection)}return null},e.ASTNode.prototype.prev=function(){switch(this.type_){case e.ASTNode.types.STACK:return this.navigateBetweenStacks_(!1);case e.ASTNode.types.FIELD:return this.findPrevForField_();case e.ASTNode.types.INPUT:return this.findPrevForInput_();case e.ASTNode.types.BLOCK:var t=this.location_;return e.ASTNode.createConnectionNode(t.previousConnection||t.outputConnection);case e.ASTNode.types.PREVIOUS:if((t=(t=this.location_).targetConnection)&&!t.getParentInput())return e.ASTNode.createConnectionNode(t);break;case e.ASTNode.types.NEXT:return e.ASTNode.createBlockNode((t=this.location_).getSourceBlock())}return null},e.ASTNode.prototype.out=function(){switch(this.type_){case e.ASTNode.types.STACK:var t=this.location_,n=t.getRelativeToSurfaceXY();return n=new e.utils.Coordinate(n.x,n.y+e.ASTNode.DEFAULT_OFFSET_Y),e.ASTNode.createWorkspaceNode(t.workspace,n);case e.ASTNode.types.OUTPUT:return(n=(t=this.location_).targetConnection)?e.ASTNode.createConnectionNode(n):e.ASTNode.createStackNode(t.getSourceBlock());case e.ASTNode.types.FIELD:return e.ASTNode.createBlockNode(this.location_.getSourceBlock());case e.ASTNode.types.INPUT:return e.ASTNode.createBlockNode((t=this.location_).getSourceBlock());case e.ASTNode.types.BLOCK:return this.getOutAstNodeForBlock_(t=this.location_);case e.ASTNode.types.PREVIOUS:case e.ASTNode.types.NEXT:return this.getOutAstNodeForBlock_((t=this.location_).getSourceBlock())}return null},e.Blocks=Object.create(null),e.Extensions={},e.Extensions.ALL_=Object.create(null),e.Extensions.register=function(t,n){if("string"!=typeof t||""==t.trim())throw Error('Error: Invalid extension name "'+t+'"');if(e.Extensions.ALL_[t])throw Error('Error: Extension "'+t+'" is already registered.');if("function"!=typeof n)throw Error('Error: Extension "'+t+'" must be a function');e.Extensions.ALL_[t]=n},e.Extensions.registerMixin=function(t,n){if(!n||"object"!=typeof n)throw Error('Error: Mixin "'+t+'" must be a object');e.Extensions.register(t,function(){this.mixin(n)})},e.Extensions.registerMutator=function(t,n,o,r){var p='Error when registering mutator "'+t+'": ';e.Extensions.checkHasFunction_(p,n.domToMutation,"domToMutation"),e.Extensions.checkHasFunction_(p,n.mutationToDom,"mutationToDom");var b=e.Extensions.checkMutatorDialog_(n,p);if(o&&"function"!=typeof o)throw Error('Extension "'+t+'" is not a function');e.Extensions.register(t,function(){if(b){if(!e.Mutator)throw Error(p+"Missing require for Blockly.Mutator");this.setMutator(new e.Mutator(r||[]))}this.mixin(n),o&&o.apply(this)})},e.Extensions.unregister=function(t){e.Extensions.ALL_[t]?delete e.Extensions.ALL_[t]:console.warn('No extension mapping for name "'+t+'" found to unregister')},e.Extensions.apply=function(t,n,o){var r=e.Extensions.ALL_[t];if("function"!=typeof r)throw Error('Error: Extension "'+t+'" not found.');if(o)e.Extensions.checkNoMutatorProperties_(t,n);else var p=e.Extensions.getMutatorProperties_(n);if(r.apply(n),o)e.Extensions.checkBlockHasMutatorProperties_('Error after applying mutator "'+t+'": ',n);else if(!e.Extensions.mutatorPropertiesMatch_(p,n))throw Error('Error when applying extension "'+t+'": mutation properties changed when applying a non-mutator extension.')},e.Extensions.checkHasFunction_=function(t,n,o){if(!n)throw Error(t+'missing required property "'+o+'"');if("function"!=typeof n)throw Error(t+'" required property "'+o+'" must be a function')},e.Extensions.checkNoMutatorProperties_=function(t,n){if(e.Extensions.getMutatorProperties_(n).length)throw Error('Error: tried to apply mutation "'+t+'" to a block that already has mutator functions.  Block id: '+n.id)},e.Extensions.checkMutatorDialog_=function(t,n){var o=void 0!==t.compose,r=void 0!==t.decompose;if(o&&r){if("function"!=typeof t.compose)throw Error(n+"compose must be a function.");if("function"!=typeof t.decompose)throw Error(n+"decompose must be a function.");return!0}if(!o&&!r)return!1;throw Error(n+'Must have both or neither of "compose" and "decompose"')},e.Extensions.checkBlockHasMutatorProperties_=function(t,n){if("function"!=typeof n.domToMutation)throw Error(t+'Applying a mutator didn\'t add "domToMutation"');if("function"!=typeof n.mutationToDom)throw Error(t+'Applying a mutator didn\'t add "mutationToDom"');e.Extensions.checkMutatorDialog_(n,t)},e.Extensions.getMutatorProperties_=function(t){var n=[];return void 0!==t.domToMutation&&n.push(t.domToMutation),void 0!==t.mutationToDom&&n.push(t.mutationToDom),void 0!==t.compose&&n.push(t.compose),void 0!==t.decompose&&n.push(t.decompose),n},e.Extensions.mutatorPropertiesMatch_=function(t,n){if((n=e.Extensions.getMutatorProperties_(n)).length!=t.length)return!1;for(var o=0;o<n.length;o++)if(t[o]!=n[o])return!1;return!0},e.Extensions.buildTooltipForDropdown=function(t,n){var o=[];return"object"==typeof document&&e.utils.runAfterPageLoad(function(){for(var r in n)e.utils.checkMessageReferences(n[r])}),function(){this.type&&-1==o.indexOf(this.type)&&(e.Extensions.checkDropdownOptionsInTable_(this,t,n),o.push(this.type)),this.setTooltip(function(){var r=String(this.getFieldValue(t)),p=n[r];return null==p?-1==o.indexOf(this.type)&&(r="No tooltip mapping for value "+r+" of field "+t,null!=this.type&&(r+=" of block type "+this.type),console.warn(r+".")):p=e.utils.replaceMessageReferences(p),p}.bind(this))}},e.Extensions.checkDropdownOptionsInTable_=function(t,n,o){var r=t.getField(n);if(!r.isOptionListDynamic()){r=r.getOptions();for(var p=0;p<r.length;++p){var b=r[p][1];null==o[b]&&console.warn("No tooltip mapping for value "+b+" of field "+n+" of block type "+t.type)}}},e.Extensions.buildTooltipWithFieldText=function(t,n){return"object"==typeof document&&e.utils.runAfterPageLoad(function(){e.utils.checkMessageReferences(t)}),function(){this.setTooltip(function(){var o=this.getField(n);return e.utils.replaceMessageReferences(t).replace("%1",o?o.getText():"")}.bind(this))}},e.Extensions.extensionParentTooltip_=function(){this.tooltipWhenNotConnected_=this.tooltip,this.setTooltip(function(){var t=this.getParent();return t&&t.getInputsInline()&&t.tooltip||this.tooltipWhenNotConnected_}.bind(this))},e.Extensions.register("parent_tooltip_when_inline",e.Extensions.extensionParentTooltip_),e.fieldRegistry={},e.fieldRegistry.register=function(t,n){e.registry.register(e.registry.Type.FIELD,t,n)},e.fieldRegistry.unregister=function(t){e.registry.unregister(e.registry.Type.FIELD,t)},e.fieldRegistry.fromJson=function(t){var n=e.registry.getObject(e.registry.Type.FIELD,t.type);return n?n.fromJson(t):(console.warn("Blockly could not create a field of type "+t.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null)},e.IDeletable=function(){},e.blockAnimations={},e.blockAnimations.disconnectPid_=0,e.blockAnimations.disconnectGroup_=null,e.blockAnimations.disposeUiEffect=function(t){var n=t.workspace,o=t.getSvgRoot();n.getAudioManager().play("delete"),t=n.getSvgXY(o),(o=o.cloneNode(!0)).translateX_=t.x,o.translateY_=t.y,o.setAttribute("transform","translate("+t.x+","+t.y+")"),n.getParentSvg().appendChild(o),o.bBox_=o.getBBox(),e.blockAnimations.disposeUiStep_(o,n.RTL,new Date,n.scale)},e.blockAnimations.disposeUiStep_=function(t,n,o,r){var p=(new Date-o)/150;1<p?e.utils.dom.removeNode(t):(t.setAttribute("transform","translate("+(t.translateX_+(n?-1:1)*t.bBox_.width*r/2*p)+","+(t.translateY_+t.bBox_.height*r*p)+") scale("+(1-p)*r+")"),setTimeout(e.blockAnimations.disposeUiStep_,10,t,n,o,r))},e.blockAnimations.connectionUiEffect=function(t){var n=t.workspace,o=n.scale;if(n.getAudioManager().play("click"),!(1>o)){var r=n.getSvgXY(t.getSvgRoot());t.outputConnection?(r.x+=(t.RTL?3:-3)*o,r.y+=13*o):t.previousConnection&&(r.x+=(t.RTL?-23:23)*o,r.y+=3*o),t=e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{cx:r.x,cy:r.y,r:0,fill:"none",stroke:"#888","stroke-width":10},n.getParentSvg()),e.blockAnimations.connectionUiStep_(t,new Date,o)}},e.blockAnimations.connectionUiStep_=function(t,n,o){var r=(new Date-n)/150;1<r?e.utils.dom.removeNode(t):(t.setAttribute("r",25*r*o),t.style.opacity=1-r,e.blockAnimations.disconnectPid_=setTimeout(e.blockAnimations.connectionUiStep_,10,t,n,o))},e.blockAnimations.disconnectUiEffect=function(t){if(t.workspace.getAudioManager().play("disconnect"),!(1>t.workspace.scale)){var n=t.getHeightWidth().height;n=Math.atan(10/n)/Math.PI*180,t.RTL||(n*=-1),e.blockAnimations.disconnectUiStep_(t.getSvgRoot(),n,new Date)}},e.blockAnimations.disconnectUiStep_=function(t,n,o){var r=(new Date-o)/200;1<r?t.skew_="":(t.skew_="skewX("+Math.round(Math.sin(r*Math.PI*3)*(1-r)*n)+")",e.blockAnimations.disconnectGroup_=t,e.blockAnimations.disconnectPid_=setTimeout(e.blockAnimations.disconnectUiStep_,10,t,n,o)),t.setAttribute("transform",t.translate_+t.skew_)},e.blockAnimations.disconnectUiStop=function(){if(e.blockAnimations.disconnectGroup_){clearTimeout(e.blockAnimations.disconnectPid_);var t=e.blockAnimations.disconnectGroup_;t.skew_="",t.setAttribute("transform",t.translate_),e.blockAnimations.disconnectGroup_=null}},e.Events.BlockDrag=function(t,n,o){e.Events.BlockDrag.superClass_.constructor.call(this,t?t.workspace.id:void 0),this.blockId=t?t.id:null,this.isStart=n,this.blocks=o},e.utils.object.inherits(e.Events.BlockDrag,e.Events.UiBase),e.Events.BlockDrag.prototype.type=e.Events.BLOCK_DRAG,e.Events.BlockDrag.prototype.toJson=function(){var t=e.Events.BlockDrag.superClass_.toJson.call(this);return t.isStart=this.isStart,t.blockId=this.blockId,t.blocks=this.blocks,t},e.Events.BlockDrag.prototype.fromJson=function(t){e.Events.BlockDrag.superClass_.fromJson.call(this,t),this.isStart=t.isStart,this.blockId=t.blockId,this.blocks=t.blocks},e.registry.register(e.registry.Type.EVENT,e.Events.BLOCK_DRAG,e.Events.BlockDrag),e.IBlockDragger=function(){},e.InsertionMarkerManager=function(t){this.topBlock_=e.selected=t,this.workspace_=t.workspace,this.lastMarker_=this.lastOnStack_=null,this.firstMarker_=this.createMarkerBlock_(this.topBlock_),this.localConnection_=this.closestConnection_=null,this.wouldDeleteBlock_=!1,this.fadedBlock_=this.highlightedBlock_=this.markerConnection_=null,this.availableConnections_=this.initAvailableConnections_()},e.InsertionMarkerManager.PREVIEW_TYPE={INSERTION_MARKER:0,INPUT_OUTLINE:1,REPLACEMENT_FADE:2},e.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR="The insertion marker manager tried to create a marker but the result is missing %1. If you are using a mutator, make sure your domToMutation method is properly defined.",e.InsertionMarkerManager.prototype.dispose=function(){this.availableConnections_.length=0,e.Events.disable();try{this.firstMarker_&&this.firstMarker_.dispose(),this.lastMarker_&&this.lastMarker_.dispose()}finally{e.Events.enable()}},e.InsertionMarkerManager.prototype.updateAvailableConnections=function(){this.availableConnections_=this.initAvailableConnections_()},e.InsertionMarkerManager.prototype.wouldDeleteBlock=function(){return this.wouldDeleteBlock_},e.InsertionMarkerManager.prototype.wouldConnectBlock=function(){return!!this.closestConnection_},e.InsertionMarkerManager.prototype.applyConnections=function(){if(this.closestConnection_&&(e.Events.disable(),this.hidePreview_(),e.Events.enable(),this.localConnection_.connect(this.closestConnection_),this.topBlock_.rendered)){var t=this.localConnection_.isSuperior()?this.closestConnection_:this.localConnection_;e.blockAnimations.connectionUiEffect(t.getSourceBlock()),this.topBlock_.getRootBlock().bringToFront()}},e.InsertionMarkerManager.prototype.update=function(t,n){var o=this.getCandidate_(t);((this.wouldDeleteBlock_=this.shouldDelete_(o,n))||this.shouldUpdatePreviews_(o,t))&&(e.Events.disable(),this.maybeHidePreview_(o),this.maybeShowPreview_(o),e.Events.enable())},e.InsertionMarkerManager.prototype.createMarkerBlock_=function(t){var n=t.type;e.Events.disable();try{var o=this.workspace_.newBlock(n);if(o.setInsertionMarker(!0),t.mutationToDom){var r=t.mutationToDom();r&&o.domToMutation(r)}for(n=0;n<t.inputList.length;n++){var p=t.inputList[n];if(p.name!=e.constants.COLLAPSED_INPUT_NAME){var b=o.inputList[n];if(!b)throw Error(e.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR.replace("%1","an input"));for(r=0;r<p.fieldRow.length;r++){var I=p.fieldRow[r],x=b.fieldRow[r];if(!x)throw Error(e.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR.replace("%1","a field"));x.setValue(I.getValue())}}}o.setCollapsed(t.isCollapsed()),o.setInputsInline(t.getInputsInline()),o.initSvg(),o.getSvgRoot().setAttribute("visibility","hidden")}finally{e.Events.enable()}return o},e.InsertionMarkerManager.prototype.initAvailableConnections_=function(){var t=this.topBlock_.getConnections_(!1),n=this.topBlock_.lastConnectionInStack(!0);if(n&&n!=this.topBlock_.nextConnection){if(t.push(n),this.lastOnStack_=n,this.lastMarker_){e.Events.disable();try{this.lastMarker_.dispose()}finally{e.Events.enable()}}this.lastMarker_=this.createMarkerBlock_(n.getSourceBlock())}return t},e.InsertionMarkerManager.prototype.shouldUpdatePreviews_=function(t,n){var o=t.local,r=t.closest;return t=t.radius,o&&r?this.localConnection_&&this.closestConnection_?!(this.closestConnection_==r&&this.localConnection_==o||(o=this.localConnection_.x+n.x-this.closestConnection_.x,n=this.localConnection_.y+n.y-this.closestConnection_.y,n=Math.sqrt(o*o+n*n),r&&t>n-e.CURRENT_CONNECTION_PREFERENCE)):!this.localConnection_&&!this.closestConnection_||(console.error("Only one of localConnection_ and closestConnection_ was set."),console.error("Returning true from shouldUpdatePreviews, but it's not clear why."),!0):!(!this.localConnection_||!this.closestConnection_)},e.InsertionMarkerManager.prototype.getCandidate_=function(t){for(var n=this.getStartRadius_(),o=null,r=null,p=0;p<this.availableConnections_.length;p++){var b=this.availableConnections_[p],I=b.closest(n,t);I.connection&&(o=I.connection,r=b,n=I.radius)}return{closest:o,local:r,radius:n}},e.InsertionMarkerManager.prototype.getStartRadius_=function(){return this.closestConnection_&&this.localConnection_?e.CONNECTING_SNAP_RADIUS:e.SNAP_RADIUS},e.InsertionMarkerManager.prototype.shouldDelete_=function(t,n){return!(!n||!this.workspace_.getComponentManager().hasCapability(n.id,e.ComponentManager.Capability.DELETE_AREA))&&n.wouldDelete(this.topBlock_,t&&!!t.closest)},e.InsertionMarkerManager.prototype.maybeShowPreview_=function(t){if(!this.wouldDeleteBlock_){var n=t.closest;t=t.local,n&&(n==this.closestConnection_||n.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.closestConnection_=n,this.localConnection_=t,this.showPreview_()))}},e.InsertionMarkerManager.prototype.showPreview_=function(){var t=this.closestConnection_,n=this.workspace_.getRenderer();switch(n.getConnectionPreviewMethod(t,this.localConnection_,this.topBlock_)){case e.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline_();break;case e.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker_();break;case e.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade_()}t&&n.shouldHighlightConnection(t)&&t.highlight()},e.InsertionMarkerManager.prototype.maybeHidePreview_=function(t){if(t.closest){var n=this.closestConnection_!=t.closest;t=this.localConnection_!=t.local,this.closestConnection_&&this.localConnection_&&(n||t||this.wouldDeleteBlock_)&&this.hidePreview_()}else this.hidePreview_();this.localConnection_=this.closestConnection_=this.markerConnection_=null},e.InsertionMarkerManager.prototype.hidePreview_=function(){this.closestConnection_&&this.closestConnection_.targetBlock()&&this.workspace_.getRenderer().shouldHighlightConnection(this.closestConnection_)&&this.closestConnection_.unhighlight(),this.fadedBlock_?this.hideReplacementFade_():this.highlightedBlock_?this.hideInsertionInputOutline_():this.markerConnection_&&this.hideInsertionMarker_()},e.InsertionMarkerManager.prototype.showInsertionMarker_=function(){var t=this.localConnection_,n=this.closestConnection_,o=this.lastOnStack_&&t==this.lastOnStack_?this.lastMarker_:this.firstMarker_;if((t=o.getMatchingConnection(t.getSourceBlock(),t))==this.markerConnection_)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");o.render(),o.rendered=!0,o.getSvgRoot().setAttribute("visibility","visible"),t&&n&&o.positionNearConnection(t,n),n&&t.connect(n),this.markerConnection_=t},e.InsertionMarkerManager.prototype.hideInsertionMarker_=function(){if(this.markerConnection_){var t=this.markerConnection_,n=t.getSourceBlock(),o=n.nextConnection,r=n.previousConnection,p=n.outputConnection;if(p=t.type==e.connectionTypes.INPUT_VALUE&&!(p&&p.targetConnection),!(t!=o||r&&r.targetConnection)||p?t.targetBlock().unplug(!1):t.type==e.connectionTypes.NEXT_STATEMENT&&t!=o?((o=t.targetConnection).getSourceBlock().unplug(!1),r=r?r.targetConnection:null,n.unplug(!0),r&&r.connect(o)):n.unplug(!0),t.targetConnection)throw Error("markerConnection_ still connected at the end of disconnectInsertionMarker");this.markerConnection_=null,(t=n.getSvgRoot())&&t.setAttribute("visibility","hidden")}else console.log("No insertion marker connection to disconnect")},e.InsertionMarkerManager.prototype.showInsertionInputOutline_=function(){var t=this.closestConnection_;this.highlightedBlock_=t.getSourceBlock(),this.highlightedBlock_.highlightShapeForInput(t,!0)},e.InsertionMarkerManager.prototype.hideInsertionInputOutline_=function(){this.highlightedBlock_.highlightShapeForInput(this.closestConnection_,!1),this.highlightedBlock_=null},e.InsertionMarkerManager.prototype.showReplacementFade_=function(){this.fadedBlock_=this.closestConnection_.targetBlock(),this.fadedBlock_.fadeForReplacement(!0)},e.InsertionMarkerManager.prototype.hideReplacementFade_=function(){this.fadedBlock_.fadeForReplacement(!1),this.fadedBlock_=null},e.InsertionMarkerManager.prototype.getInsertionMarkers=function(){var t=[];return this.firstMarker_&&t.push(this.firstMarker_),this.lastMarker_&&t.push(this.lastMarker_),t},e.BlockDragger=function(t,n){this.draggingBlock_=t,this.workspace_=n,this.draggedConnectionManager_=new e.InsertionMarkerManager(this.draggingBlock_),this.dragTarget_=null,this.wouldDeleteBlock_=!1,this.startXY_=this.draggingBlock_.getRelativeToSurfaceXY(),this.dragIconData_=e.BlockDragger.initIconData_(t)},e.BlockDragger.prototype.dispose=function(){this.dragIconData_.length=0,this.draggedConnectionManager_&&this.draggedConnectionManager_.dispose()},e.BlockDragger.initIconData_=function(t){var n=[];t=t.getDescendants(!1);for(var r,o=0;r=t[o];o++){r=r.getIcons();for(var p=0;p<r.length;p++){var b={location:r[p].getIconLocation(),icon:r[p]};n.push(b)}}return n},e.BlockDragger.prototype.startDrag=function(t,n){e.Events.getGroup()||e.Events.setGroup(!0),this.fireDragStartEvent_(),this.workspace_.isMutator&&this.draggingBlock_.bringToFront(),e.utils.dom.startTextWidthCache(),this.workspace_.setResizesEnabled(!1),e.blockAnimations.disconnectUiStop(),this.shouldDisconnect_(n)&&this.disconnectBlock_(n,t),this.draggingBlock_.setDragging(!0),this.draggingBlock_.moveToDragSurface()},e.BlockDragger.prototype.shouldDisconnect_=function(t){return!!(this.draggingBlock_.getParent()||t&&this.draggingBlock_.nextConnection&&this.draggingBlock_.nextConnection.targetBlock())},e.BlockDragger.prototype.disconnectBlock_=function(t,n){this.draggingBlock_.unplug(t),t=this.pixelsToWorkspaceUnits_(n),t=e.utils.Coordinate.sum(this.startXY_,t),this.draggingBlock_.translate(t.x,t.y),e.blockAnimations.disconnectUiEffect(this.draggingBlock_),this.draggedConnectionManager_.updateAvailableConnections()},e.BlockDragger.prototype.fireDragStartEvent_=function(){var t=new(e.Events.get(e.Events.BLOCK_DRAG))(this.draggingBlock_,!0,this.draggingBlock_.getDescendants(!1));e.Events.fire(t)},e.BlockDragger.prototype.drag=function(t,n){n=this.pixelsToWorkspaceUnits_(n);var o=e.utils.Coordinate.sum(this.startXY_,n);this.draggingBlock_.moveDuringDrag(o),this.dragIcons_(n),o=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(t),this.draggedConnectionManager_.update(n,this.dragTarget_),t=this.wouldDeleteBlock_,this.wouldDeleteBlock_=this.draggedConnectionManager_.wouldDeleteBlock(),t!=this.wouldDeleteBlock_&&this.updateCursorDuringBlockDrag_(),this.dragTarget_!==o&&(o&&o.onDragExit(this.draggingBlock_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBlock_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBlock_)},e.BlockDragger.prototype.endDrag=function(t,n){if(this.drag(t,n),this.dragIconData_=[],this.fireDragEndEvent_(),e.utils.dom.stopTextWidthCache(),e.blockAnimations.disconnectUiStop(),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBlock_))t=this.startXY_;else{var o=(t=this.getNewLocationAfterDrag_(n)).delta;t=t.newLocation}this.draggingBlock_.moveOffDragSurface(t),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBlock_),this.maybeDeleteBlock_()||(this.draggingBlock_.setDragging(!1),o?this.updateBlockAfterMove_(o):e.bumpObjectIntoBounds_(this.draggingBlock_.workspace,this.workspace_.getMetricsManager().getScrollMetrics(!0),this.draggingBlock_)),this.workspace_.setResizesEnabled(!0),e.Events.setGroup(!1)},e.BlockDragger.prototype.getNewLocationAfterDrag_=function(t){var n={};return n.delta=this.pixelsToWorkspaceUnits_(t),n.newLocation=e.utils.Coordinate.sum(this.startXY_,n.delta),n},e.BlockDragger.prototype.maybeDeleteBlock_=function(){return!!this.wouldDeleteBlock_&&(this.fireMoveEvent_(),this.draggingBlock_.dispose(!1,!0),e.draggingConnections=[],!0)},e.BlockDragger.prototype.updateBlockAfterMove_=function(t){this.draggingBlock_.moveConnections(t.x,t.y),this.fireMoveEvent_(),this.draggedConnectionManager_.wouldConnectBlock()?this.draggedConnectionManager_.applyConnections():this.draggingBlock_.render(),this.draggingBlock_.scheduleSnapAndBump()},e.BlockDragger.prototype.fireDragEndEvent_=function(){var t=new(e.Events.get(e.Events.BLOCK_DRAG))(this.draggingBlock_,!1,this.draggingBlock_.getDescendants(!1));e.Events.fire(t)},e.BlockDragger.prototype.updateToolboxStyle_=function(t){var n=this.workspace_.getToolbox();if(n){var o=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab";t&&"function"==typeof n.removeStyle?n.removeStyle(o):t||"function"!=typeof n.addStyle||n.addStyle(o)}},e.BlockDragger.prototype.fireMoveEvent_=function(){var t=new(e.Events.get(e.Events.BLOCK_MOVE))(this.draggingBlock_);t.oldCoordinate=this.startXY_,t.recordNew(),e.Events.fire(t)},e.BlockDragger.prototype.updateCursorDuringBlockDrag_=function(){this.draggingBlock_.setDeleteStyle(this.wouldDeleteBlock_)},e.BlockDragger.prototype.pixelsToWorkspaceUnits_=function(t){return t=new e.utils.Coordinate(t.x/this.workspace_.scale,t.y/this.workspace_.scale),this.workspace_.isMutator&&t.scale(1/this.workspace_.options.parentWorkspace.scale),t},e.BlockDragger.prototype.dragIcons_=function(t){for(var n=0;n<this.dragIconData_.length;n++){var o=this.dragIconData_[n];o.icon.setIconLocation(e.utils.Coordinate.sum(o.location,t))}},e.BlockDragger.prototype.getInsertionMarkers=function(){return this.draggedConnectionManager_&&this.draggedConnectionManager_.getInsertionMarkers?this.draggedConnectionManager_.getInsertionMarkers():[]},e.registry.register(e.registry.Type.BLOCK_DRAGGER,e.registry.DEFAULT,e.BlockDragger),e.IContextMenu=function(){},e.IDraggable=function(){},e.IBubble=function(){},e.Bubble=function(t,n,o,r,p,b){this.workspace_=t,this.content_=n,this.shape_=o,this.onMouseDownResizeWrapper_=this.onMouseDownBubbleWrapper_=this.moveCallback_=this.resizeCallback_=null,this.disposed=!1,o=e.Bubble.ARROW_ANGLE,this.workspace_.RTL&&(o=-o),this.arrow_radians_=e.utils.math.toRadians(o),t.getBubbleCanvas().appendChild(this.createDom_(n,!(!p||!b))),this.setAnchorLocation(r),p&&b||(p=(t=this.content_.getBBox()).width+2*e.Bubble.BORDER_WIDTH,b=t.height+2*e.Bubble.BORDER_WIDTH),this.setBubbleSize(p,b),this.positionBubble_(),this.renderArrow_(),this.rendered_=!0},e.Bubble.BORDER_WIDTH=6,e.Bubble.ARROW_THICKNESS=5,e.Bubble.ARROW_ANGLE=20,e.Bubble.ARROW_BEND=4,e.Bubble.ANCHOR_RADIUS=8,e.Bubble.onMouseUpWrapper_=null,e.Bubble.onMouseMoveWrapper_=null,e.Bubble.unbindDragEvents_=function(){e.Bubble.onMouseUpWrapper_&&(e.browserEvents.unbind(e.Bubble.onMouseUpWrapper_),e.Bubble.onMouseUpWrapper_=null),e.Bubble.onMouseMoveWrapper_&&(e.browserEvents.unbind(e.Bubble.onMouseMoveWrapper_),e.Bubble.onMouseMoveWrapper_=null)},e.Bubble.bubbleMouseUp_=function(t){e.Touch.clearTouchIdentifier(),e.Bubble.unbindDragEvents_()},e.Bubble.prototype.rendered_=!1,e.Bubble.prototype.anchorXY_=null,e.Bubble.prototype.relativeLeft_=0,e.Bubble.prototype.relativeTop_=0,e.Bubble.prototype.width_=0,e.Bubble.prototype.height_=0,e.Bubble.prototype.autoLayout_=!0,e.Bubble.prototype.createDom_=function(t,n){this.bubbleGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},null);var o={filter:"url(#"+this.workspace_.getRenderer().getConstants().embossFilterId+")"};return e.utils.userAgent.JAVA_FX&&(o={}),o=e.utils.dom.createSvgElement(e.utils.Svg.G,o,this.bubbleGroup_),this.bubbleArrow_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{},o),this.bubbleBack_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyDraggable",x:0,y:0,rx:e.Bubble.BORDER_WIDTH,ry:e.Bubble.BORDER_WIDTH},o),n?(this.resizeGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:this.workspace_.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.bubbleGroup_),e.utils.dom.createSvgElement(e.utils.Svg.POLYGON,{points:"0,x x,x x,0".replace(/x/g,(n=2*e.Bubble.BORDER_WIDTH).toString())},this.resizeGroup_),e.utils.dom.createSvgElement(e.utils.Svg.LINE,{class:"blocklyResizeLine",x1:n/3,y1:n-1,x2:n-1,y2:n/3},this.resizeGroup_),e.utils.dom.createSvgElement(e.utils.Svg.LINE,{class:"blocklyResizeLine",x1:2*n/3,y1:n-1,x2:n-1,y2:2*n/3},this.resizeGroup_)):this.resizeGroup_=null,this.workspace_.options.readOnly||(this.onMouseDownBubbleWrapper_=e.browserEvents.conditionalBind(this.bubbleBack_,"mousedown",this,this.bubbleMouseDown_),this.resizeGroup_&&(this.onMouseDownResizeWrapper_=e.browserEvents.conditionalBind(this.resizeGroup_,"mousedown",this,this.resizeMouseDown_))),this.bubbleGroup_.appendChild(t),this.bubbleGroup_},e.Bubble.prototype.getSvgRoot=function(){return this.bubbleGroup_},e.Bubble.prototype.setSvgId=function(t){this.bubbleGroup_.dataset&&(this.bubbleGroup_.dataset.blockId=t)},e.Bubble.prototype.bubbleMouseDown_=function(t){var n=this.workspace_.getGesture(t);n&&n.handleBubbleStart(t,this)},e.Bubble.prototype.showContextMenu=function(t){},e.Bubble.prototype.isDeletable=function(){return!1},e.Bubble.prototype.setDeleteStyle=function(t){},e.Bubble.prototype.resizeMouseDown_=function(t){this.promote(),e.Bubble.unbindDragEvents_(),e.utils.isRightButton(t)||(this.workspace_.startDrag(t,new e.utils.Coordinate(this.workspace_.RTL?-this.width_:this.width_,this.height_)),e.Bubble.onMouseUpWrapper_=e.browserEvents.conditionalBind(document,"mouseup",this,e.Bubble.bubbleMouseUp_),e.Bubble.onMouseMoveWrapper_=e.browserEvents.conditionalBind(document,"mousemove",this,this.resizeMouseMove_),e.hideChaff()),t.stopPropagation()},e.Bubble.prototype.resizeMouseMove_=function(t){this.autoLayout_=!1,t=this.workspace_.moveDrag(t),this.setBubbleSize(this.workspace_.RTL?-t.x:t.x,t.y),this.workspace_.RTL&&this.positionBubble_()},e.Bubble.prototype.registerResizeEvent=function(t){this.resizeCallback_=t},e.Bubble.prototype.registerMoveEvent=function(t){this.moveCallback_=t},e.Bubble.prototype.promote=function(){var t=this.bubbleGroup_.parentNode;return t.lastChild!==this.bubbleGroup_&&(t.appendChild(this.bubbleGroup_),!0)},e.Bubble.prototype.setAnchorLocation=function(t){this.anchorXY_=t,this.rendered_&&this.positionBubble_()},e.Bubble.prototype.layoutBubble_=function(){var t=this.workspace_.getMetricsManager().getViewMetrics(!0),n=this.getOptimalRelativeLeft_(t),o=this.getOptimalRelativeTop_(t),r=this.shape_.getBBox(),p={x:n,y:-this.height_-this.workspace_.getRenderer().getConstants().MIN_BLOCK_HEIGHT},b={x:-this.width_-30,y:o};o={x:r.width,y:o};var I={x:n,y:r.height};n=r.width<r.height?o:I,r=r.width<r.height?I:o,o=this.getOverlap_(p,t),I=this.getOverlap_(b,t);var x=this.getOverlap_(n,t);t=this.getOverlap_(r,t),o==(t=Math.max(o,I,x,t))?(this.relativeLeft_=p.x,this.relativeTop_=p.y):I==t?(this.relativeLeft_=b.x,this.relativeTop_=b.y):x==t?(this.relativeLeft_=n.x,this.relativeTop_=n.y):(this.relativeLeft_=r.x,this.relativeTop_=r.y)},e.Bubble.prototype.getOverlap_=function(t,n){var o=this.workspace_.RTL?this.anchorXY_.x-t.x-this.width_:t.x+this.anchorXY_.x;return t=t.y+this.anchorXY_.y,Math.max(0,Math.min(1,(Math.min(o+this.width_,n.left+n.width)-Math.max(o,n.left))*(Math.min(t+this.height_,n.top+n.height)-Math.max(t,n.top))/(this.width_*this.height_)))},e.Bubble.prototype.getOptimalRelativeLeft_=function(t){var n=-this.width_/4;if(this.width_>t.width)return n;if(this.workspace_.RTL)var o=this.anchorXY_.x-n,r=o-this.width_,p=t.left+t.width,b=t.left+e.Scrollbar.scrollbarThickness/this.workspace_.scale;else o=(r=n+this.anchorXY_.x)+this.width_,b=t.left,p=t.left+t.width-e.Scrollbar.scrollbarThickness/this.workspace_.scale;return this.workspace_.RTL?r<b?n=-(b-this.anchorXY_.x+this.width_):o>p&&(n=-(p-this.anchorXY_.x)):r<b?n=b-this.anchorXY_.x:o>p&&(n=p-this.anchorXY_.x-this.width_),n},e.Bubble.prototype.getOptimalRelativeTop_=function(t){var n=-this.height_/4;if(this.height_>t.height)return n;var o=this.anchorXY_.y+n,p=t.top;t=t.top+t.height-e.Scrollbar.scrollbarThickness/this.workspace_.scale;var b=this.anchorXY_.y;return o<p?n=p-b:o+this.height_>t&&(n=t-b-this.height_),n},e.Bubble.prototype.positionBubble_=function(){var t=this.anchorXY_.x;this.moveTo(t=this.workspace_.RTL?t-(this.relativeLeft_+this.width_):t+this.relativeLeft_,this.relativeTop_+this.anchorXY_.y)},e.Bubble.prototype.moveTo=function(t,n){this.bubbleGroup_.setAttribute("transform","translate("+t+","+n+")")},e.Bubble.prototype.setDragging=function(t){!t&&this.moveCallback_&&this.moveCallback_()},e.Bubble.prototype.getBubbleSize=function(){return new e.utils.Size(this.width_,this.height_)},e.Bubble.prototype.setBubbleSize=function(t,n){var o=2*e.Bubble.BORDER_WIDTH;t=Math.max(t,o+45),n=Math.max(n,o+20),this.width_=t,this.height_=n,this.bubbleBack_.setAttribute("width",t),this.bubbleBack_.setAttribute("height",n),this.resizeGroup_&&this.resizeGroup_.setAttribute("transform",this.workspace_.RTL?"translate("+2*e.Bubble.BORDER_WIDTH+","+(n-o)+") scale(-1 1)":"translate("+(t-o)+","+(n-o)+")"),this.autoLayout_&&this.layoutBubble_(),this.positionBubble_(),this.renderArrow_(),this.resizeCallback_&&this.resizeCallback_()},e.Bubble.prototype.renderArrow_=function(){var t=[],n=this.width_/2,o=this.height_/2,r=-this.relativeLeft_,p=-this.relativeTop_;if(n==r&&o==p)t.push("M "+n+","+o);else{p-=o,r-=n,this.workspace_.RTL&&(r*=-1);var b=Math.sqrt(p*p+r*r),I=Math.acos(r/b);0>p&&(I=2*Math.PI-I);var x=I+Math.PI/2;x>2*Math.PI&&(x-=2*Math.PI);var k=Math.sin(x),Y=Math.cos(x),X=this.getBubbleSize();x=(X.width+X.height)/e.Bubble.ARROW_THICKNESS,x=Math.min(x,X.width,X.height)/4,r=n+(X=1-e.Bubble.ANCHOR_RADIUS/b)*r,p=o+X*p,X=n+x*Y;var it=o+x*k;n-=x*Y,o-=x*k,(k=I+this.arrow_radians_)>2*Math.PI&&(k-=2*Math.PI),I=Math.sin(k)*b/e.Bubble.ARROW_BEND,b=Math.cos(k)*b/e.Bubble.ARROW_BEND,t.push("M"+X+","+it),t.push("C"+(X+b)+","+(it+I)+" "+r+","+p+" "+r+","+p),t.push("C"+r+","+p+" "+(n+b)+","+(o+I)+" "+n+","+o)}t.push("z"),this.bubbleArrow_.setAttribute("d",t.join(" "))},e.Bubble.prototype.setColour=function(t){this.bubbleBack_.setAttribute("fill",t),this.bubbleArrow_.setAttribute("fill",t)},e.Bubble.prototype.dispose=function(){this.onMouseDownBubbleWrapper_&&e.browserEvents.unbind(this.onMouseDownBubbleWrapper_),this.onMouseDownResizeWrapper_&&e.browserEvents.unbind(this.onMouseDownResizeWrapper_),e.Bubble.unbindDragEvents_(),e.utils.dom.removeNode(this.bubbleGroup_),this.disposed=!0},e.Bubble.prototype.moveDuringDrag=function(t,n){t?t.translateSurface(n.x,n.y):this.moveTo(n.x,n.y),this.relativeLeft_=this.workspace_.RTL?this.anchorXY_.x-n.x-this.width_:n.x-this.anchorXY_.x,this.relativeTop_=n.y-this.anchorXY_.y,this.renderArrow_()},e.Bubble.prototype.getRelativeToSurfaceXY=function(){return new e.utils.Coordinate(this.workspace_.RTL?-this.relativeLeft_+this.anchorXY_.x-this.width_:this.anchorXY_.x+this.relativeLeft_,this.anchorXY_.y+this.relativeTop_)},e.Bubble.prototype.setAutoLayout=function(t){this.autoLayout_=t},e.Bubble.textToDom=function(t){var n=e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:e.Bubble.BORDER_WIDTH},null);t=t.split("\n");for(var o=0;o<t.length;o++){var r=e.utils.dom.createSvgElement(e.utils.Svg.TSPAN,{dy:"1em",x:e.Bubble.BORDER_WIDTH},n),p=document.createTextNode(t[o]);r.appendChild(p)}return n},e.Bubble.createNonEditableBubble=function(t,n,o){if((o=new e.Bubble(n.workspace,t,n.pathObject.svgPath,o,null,null)).setSvgId(n.id),n.RTL){n=t.getBBox().width;for(var p,r=0;p=t.childNodes[r];r++)p.setAttribute("text-anchor","end"),p.setAttribute("x",n+e.Bubble.BORDER_WIDTH)}return o},e.Events.CommentBase=function(t){this.commentId=(this.isBlank=void 0===t)?"":t.id,this.workspaceId=this.isBlank?"":t.workspace.id,this.group=e.Events.getGroup(),this.recordUndo=e.Events.recordUndo},e.utils.object.inherits(e.Events.CommentBase,e.Events.Abstract),e.Events.CommentBase.prototype.toJson=function(){var t=e.Events.CommentBase.superClass_.toJson.call(this);return this.commentId&&(t.commentId=this.commentId),t},e.Events.CommentBase.prototype.fromJson=function(t){e.Events.CommentBase.superClass_.fromJson.call(this,t),this.commentId=t.commentId},e.Events.CommentChange=function(t,n,o){e.Events.CommentChange.superClass_.constructor.call(this,t),t&&(this.oldContents_=void 0===n?"":n,this.newContents_=void 0===o?"":o)},e.utils.object.inherits(e.Events.CommentChange,e.Events.CommentBase),e.Events.CommentChange.prototype.type=e.Events.COMMENT_CHANGE,e.Events.CommentChange.prototype.toJson=function(){var t=e.Events.CommentChange.superClass_.toJson.call(this);return t.oldContents=this.oldContents_,t.newContents=this.newContents_,t},e.Events.CommentChange.prototype.fromJson=function(t){e.Events.CommentChange.superClass_.fromJson.call(this,t),this.oldContents_=t.oldContents,this.newContents_=t.newContents},e.Events.CommentChange.prototype.isNull=function(){return this.oldContents_==this.newContents_},e.Events.CommentChange.prototype.run=function(t){var n=this.getEventWorkspace_().getCommentById(this.commentId);n?n.setContent(t?this.newContents_:this.oldContents_):console.warn("Can't change non-existent comment: "+this.commentId)},e.Events.CommentCreate=function(t){e.Events.CommentCreate.superClass_.constructor.call(this,t),t&&(this.xml=t.toXmlWithXY())},e.utils.object.inherits(e.Events.CommentCreate,e.Events.CommentBase),e.Events.CommentCreate.prototype.type=e.Events.COMMENT_CREATE,e.Events.CommentCreate.prototype.toJson=function(){var t=e.Events.CommentCreate.superClass_.toJson.call(this);return t.xml=e.Xml.domToText(this.xml),t},e.Events.CommentCreate.prototype.fromJson=function(t){e.Events.CommentCreate.superClass_.fromJson.call(this,t),this.xml=e.Xml.textToDom(t.xml)},e.Events.CommentCreate.prototype.run=function(t){e.Events.CommentCreateDeleteHelper(this,t)},e.Events.CommentCreateDeleteHelper=function(t,n){var o=t.getEventWorkspace_();n?((n=e.utils.xml.createElement("xml")).appendChild(t.xml),e.Xml.domToWorkspace(n,o)):(o=o.getCommentById(t.commentId))?o.dispose(!1,!1):console.warn("Can't uncreate non-existent comment: "+t.commentId)},e.Events.CommentDelete=function(t){e.Events.CommentDelete.superClass_.constructor.call(this,t),t&&(this.xml=t.toXmlWithXY())},e.utils.object.inherits(e.Events.CommentDelete,e.Events.CommentBase),e.Events.CommentDelete.prototype.type=e.Events.COMMENT_DELETE,e.Events.CommentDelete.prototype.toJson=function(){return e.Events.CommentDelete.superClass_.toJson.call(this)},e.Events.CommentDelete.prototype.fromJson=function(t){e.Events.CommentDelete.superClass_.fromJson.call(this,t)},e.Events.CommentDelete.prototype.run=function(t){e.Events.CommentCreateDeleteHelper(this,!t)},e.Events.CommentMove=function(t){e.Events.CommentMove.superClass_.constructor.call(this,t),t&&(this.comment_=t,this.oldCoordinate_=t.getXY(),this.newCoordinate_=null)},e.utils.object.inherits(e.Events.CommentMove,e.Events.CommentBase),e.Events.CommentMove.prototype.recordNew=function(){if(!this.comment_)throw Error("Tried to record the new position of a comment on the same event twice.");this.newCoordinate_=this.comment_.getXY(),this.comment_=null},e.Events.CommentMove.prototype.type=e.Events.COMMENT_MOVE,e.Events.CommentMove.prototype.setOldCoordinate=function(t){this.oldCoordinate_=t},e.Events.CommentMove.prototype.toJson=function(){var t=e.Events.CommentMove.superClass_.toJson.call(this);return this.oldCoordinate_&&(t.oldCoordinate=Math.round(this.oldCoordinate_.x)+","+Math.round(this.oldCoordinate_.y)),this.newCoordinate_&&(t.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y)),t},e.Events.CommentMove.prototype.fromJson=function(t){if(e.Events.CommentMove.superClass_.fromJson.call(this,t),t.oldCoordinate){var n=t.oldCoordinate.split(",");this.oldCoordinate_=new e.utils.Coordinate(Number(n[0]),Number(n[1]))}t.newCoordinate&&(n=t.newCoordinate.split(","),this.newCoordinate_=new e.utils.Coordinate(Number(n[0]),Number(n[1])))},e.Events.CommentMove.prototype.isNull=function(){return e.utils.Coordinate.equals(this.oldCoordinate_,this.newCoordinate_)},e.Events.CommentMove.prototype.run=function(t){var n=this.getEventWorkspace_().getCommentById(this.commentId);if(n){t=t?this.newCoordinate_:this.oldCoordinate_;var o=n.getXY();n.moveBy(t.x-o.x,t.y-o.y)}else console.warn("Can't move non-existent comment: "+this.commentId)},e.registry.register(e.registry.Type.EVENT,e.Events.COMMENT_CREATE,e.Events.CommentCreate),e.registry.register(e.registry.Type.EVENT,e.Events.COMMENT_CHANGE,e.Events.CommentChange),e.registry.register(e.registry.Type.EVENT,e.Events.COMMENT_MOVE,e.Events.CommentMove),e.registry.register(e.registry.Type.EVENT,e.Events.COMMENT_DELETE,e.Events.CommentDelete),e.BubbleDragger=function(t,n){this.draggingBubble_=t,this.workspace_=n,this.dragTarget_=null,this.wouldDeleteBubble_=!1,this.startXY_=this.draggingBubble_.getRelativeToSurfaceXY(),this.dragSurface_=e.utils.is3dSupported()&&n.getBlockDragSurface()?n.getBlockDragSurface():null},e.BubbleDragger.prototype.dispose=function(){this.dragSurface_=this.workspace_=this.draggingBubble_=null},e.BubbleDragger.prototype.startBubbleDrag=function(){e.Events.getGroup()||e.Events.setGroup(!0),this.workspace_.setResizesEnabled(!1),this.draggingBubble_.setAutoLayout(!1),this.dragSurface_&&this.moveToDragSurface_(),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!0)},e.BubbleDragger.prototype.dragBubble=function(t,n){n=this.pixelsToWorkspaceUnits_(n),n=e.utils.Coordinate.sum(this.startXY_,n),this.draggingBubble_.moveDuringDrag(this.dragSurface_,n),n=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(t),t=this.wouldDeleteBubble_,this.wouldDeleteBubble_=this.shouldDelete_(this.dragTarget_),t!=this.wouldDeleteBubble_&&this.updateCursorDuringBubbleDrag_(),this.dragTarget_!==n&&(n&&n.onDragExit(this.draggingBubble_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBubble_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBubble_)},e.BubbleDragger.prototype.shouldDelete_=function(t){return!(!t||!this.workspace_.getComponentManager().hasCapability(t.id,e.ComponentManager.Capability.DELETE_AREA))&&t.wouldDelete(this.draggingBubble_,!1)},e.BubbleDragger.prototype.updateCursorDuringBubbleDrag_=function(){this.draggingBubble_.setDeleteStyle(this.wouldDeleteBubble_)},e.BubbleDragger.prototype.endBubbleDrag=function(t,n){this.dragBubble(t,n),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBubble_)?t=this.startXY_:(t=this.pixelsToWorkspaceUnits_(n),t=e.utils.Coordinate.sum(this.startXY_,t)),this.draggingBubble_.moveTo(t.x,t.y),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBubble_),this.wouldDeleteBubble_?(this.fireMoveEvent_(),this.draggingBubble_.dispose(!1,!0)):(this.dragSurface_&&this.dragSurface_.clearAndHide(this.workspace_.getBubbleCanvas()),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!1),this.fireMoveEvent_()),this.workspace_.setResizesEnabled(!0),e.Events.setGroup(!1)},e.BubbleDragger.prototype.fireMoveEvent_=function(){if(this.draggingBubble_.isComment){var t=new(e.Events.get(e.Events.COMMENT_MOVE))(this.draggingBubble_);t.setOldCoordinate(this.startXY_),t.recordNew(),e.Events.fire(t)}},e.BubbleDragger.prototype.pixelsToWorkspaceUnits_=function(t){return t=new e.utils.Coordinate(t.x/this.workspace_.scale,t.y/this.workspace_.scale),this.workspace_.isMutator&&t.scale(1/this.workspace_.options.parentWorkspace.scale),t},e.BubbleDragger.prototype.moveToDragSurface_=function(){this.draggingBubble_.moveTo(0,0),this.dragSurface_.translateSurface(this.startXY_.x,this.startXY_.y),this.dragSurface_.setBlocksAndShow(this.draggingBubble_.getSvgRoot())},e.Events.Click=function(t,n,o){e.Events.Click.superClass_.constructor.call(this,t?t.workspace.id:n),this.blockId=t?t.id:null,this.targetType=o},e.utils.object.inherits(e.Events.Click,e.Events.UiBase),e.Events.Click.prototype.type=e.Events.CLICK,e.Events.Click.prototype.toJson=function(){var t=e.Events.Click.superClass_.toJson.call(this);return t.targetType=this.targetType,this.blockId&&(t.blockId=this.blockId),t},e.Events.Click.prototype.fromJson=function(t){e.Events.Click.superClass_.fromJson.call(this,t),this.targetType=t.targetType,this.blockId=t.blockId},e.registry.register(e.registry.Type.EVENT,e.Events.CLICK,e.Events.Click),e.WorkspaceDragger=function(t){this.workspace_=t,this.horizontalScrollEnabled_=this.workspace_.isMovableHorizontally(),this.verticalScrollEnabled_=this.workspace_.isMovableVertically(),this.startScrollXY_=new e.utils.Coordinate(t.scrollX,t.scrollY)},e.WorkspaceDragger.prototype.dispose=function(){this.workspace_=null},e.WorkspaceDragger.prototype.startDrag=function(){e.selected&&e.selected.unselect(),this.workspace_.setupDragSurface()},e.WorkspaceDragger.prototype.endDrag=function(t){this.drag(t),this.workspace_.resetDragSurface()},e.WorkspaceDragger.prototype.drag=function(t){if(t=e.utils.Coordinate.sum(this.startScrollXY_,t),this.horizontalScrollEnabled_&&this.verticalScrollEnabled_)this.workspace_.scroll(t.x,t.y);else if(this.horizontalScrollEnabled_)this.workspace_.scroll(t.x,this.workspace_.scrollY);else{if(!this.verticalScrollEnabled_)throw new TypeError("Invalid state.");this.workspace_.scroll(this.workspace_.scrollX,t.y)}},e.Gesture=function(t,n){this.mouseDownXY_=null,this.currentDragDeltaXY_=new e.utils.Coordinate(0,0),this.startWorkspace_=this.targetBlock_=this.startBlock_=this.startField_=this.startBubble_=null,this.creatorWorkspace_=n,this.isDraggingBubble_=this.isDraggingBlock_=this.isDraggingWorkspace_=this.hasExceededDragRadius_=!1,this.mostRecentEvent_=t,this.flyout_=this.workspaceDragger_=this.blockDragger_=this.bubbleDragger_=this.onUpWrapper_=this.onMoveWrapper_=null,this.isEnding_=this.hasStarted_=this.calledUpdateIsDragging_=!1,this.healStack_=!e.DRAG_STACK},e.Gesture.prototype.dispose=function(){e.Touch.clearTouchIdentifier(),e.Tooltip.unblock(),this.creatorWorkspace_.clearGesture(),this.onMoveWrapper_&&e.browserEvents.unbind(this.onMoveWrapper_),this.onUpWrapper_&&e.browserEvents.unbind(this.onUpWrapper_),this.blockDragger_&&this.blockDragger_.dispose(),this.workspaceDragger_&&this.workspaceDragger_.dispose(),this.bubbleDragger_&&this.bubbleDragger_.dispose()},e.Gesture.prototype.updateFromEvent_=function(t){var n=new e.utils.Coordinate(t.clientX,t.clientY);this.updateDragDelta_(n)&&(this.updateIsDragging_(),e.longStop_()),this.mostRecentEvent_=t},e.Gesture.prototype.updateDragDelta_=function(t){return this.currentDragDeltaXY_=e.utils.Coordinate.difference(t,this.mouseDownXY_),!this.hasExceededDragRadius_&&(this.hasExceededDragRadius_=e.utils.Coordinate.magnitude(this.currentDragDeltaXY_)>(this.flyout_?e.FLYOUT_DRAG_RADIUS:e.DRAG_RADIUS))},e.Gesture.prototype.updateIsDraggingFromFlyout_=function(){return!(!this.targetBlock_||!this.flyout_.isBlockCreatable_(this.targetBlock_)||this.flyout_.isScrollable()&&!this.flyout_.isDragTowardWorkspace(this.currentDragDeltaXY_)||(this.startWorkspace_=this.flyout_.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),e.Events.getGroup()||e.Events.setGroup(!0),this.startBlock_=null,this.targetBlock_=this.flyout_.createBlock(this.targetBlock_),this.targetBlock_.select(),0))},e.Gesture.prototype.updateIsDraggingBubble_=function(){return!!this.startBubble_&&(this.isDraggingBubble_=!0,this.startDraggingBubble_(),!0)},e.Gesture.prototype.updateIsDraggingBlock_=function(){return!!this.targetBlock_&&(this.flyout_?this.isDraggingBlock_=this.updateIsDraggingFromFlyout_():this.targetBlock_.isMovable()&&(this.isDraggingBlock_=!0),!!this.isDraggingBlock_&&(this.startDraggingBlock_(),!0))},e.Gesture.prototype.updateIsDraggingWorkspace_=function(){(this.flyout_?this.flyout_.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.workspaceDragger_=new e.WorkspaceDragger(this.startWorkspace_),this.isDraggingWorkspace_=!0,this.workspaceDragger_.startDrag())},e.Gesture.prototype.updateIsDragging_=function(){if(this.calledUpdateIsDragging_)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging_=!0,this.updateIsDraggingBubble_()||this.updateIsDraggingBlock_()||this.updateIsDraggingWorkspace_()},e.Gesture.prototype.startDraggingBlock_=function(){this.blockDragger_=new(e.registry.getClassFromOptions(e.registry.Type.BLOCK_DRAGGER,this.creatorWorkspace_.options,!0))(this.targetBlock_,this.startWorkspace_),this.blockDragger_.startDrag(this.currentDragDeltaXY_,this.healStack_),this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_)},e.Gesture.prototype.startDraggingBubble_=function(){this.bubbleDragger_=new e.BubbleDragger(this.startBubble_,this.startWorkspace_),this.bubbleDragger_.startBubbleDrag(),this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_)},e.Gesture.prototype.doStart=function(t){e.utils.isTargetInput(t)?this.cancel():(this.hasStarted_=!0,e.blockAnimations.disconnectUiStop(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),e.hideChaff(!!this.flyout_),this.startWorkspace_.markFocused(),this.mostRecentEvent_=t,e.Tooltip.block(),this.targetBlock_&&this.targetBlock_.select(),e.utils.isRightButton(t)?this.handleRightClick(t):("touchstart"!=t.type.toLowerCase()&&"pointerdown"!=t.type.toLowerCase()||"mouse"==t.pointerType||e.longStart(t,this),this.mouseDownXY_=new e.utils.Coordinate(t.clientX,t.clientY),this.healStack_=t.altKey||t.ctrlKey||t.metaKey,this.bindMouseEvents(t)))},e.Gesture.prototype.bindMouseEvents=function(t){this.onMoveWrapper_=e.browserEvents.conditionalBind(document,"mousemove",null,this.handleMove.bind(this)),this.onUpWrapper_=e.browserEvents.conditionalBind(document,"mouseup",null,this.handleUp.bind(this)),t.preventDefault(),t.stopPropagation()},e.Gesture.prototype.handleMove=function(t){this.updateFromEvent_(t),this.isDraggingWorkspace_?this.workspaceDragger_.drag(this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBubble_&&this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_),t.preventDefault(),t.stopPropagation()},e.Gesture.prototype.handleUp=function(t){this.updateFromEvent_(t),e.longStop_(),this.isEnding_?console.log("Trying to end a gesture recursively."):(this.isEnding_=!0,this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(t,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endDrag(t,this.currentDragDeltaXY_):this.isDraggingWorkspace_?this.workspaceDragger_.endDrag(this.currentDragDeltaXY_):this.isBubbleClick_()?this.doBubbleClick_():this.isFieldClick_()?this.doFieldClick_():this.isBlockClick_()?this.doBlockClick_():this.isWorkspaceClick_()&&this.doWorkspaceClick_(t),t.preventDefault(),t.stopPropagation(),this.dispose())},e.Gesture.prototype.cancel=function(){this.isEnding_||(e.longStop_(),this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingWorkspace_&&this.workspaceDragger_.endDrag(this.currentDragDeltaXY_),this.dispose())},e.Gesture.prototype.handleRightClick=function(t){this.targetBlock_?(this.bringBlockToFront_(),e.hideChaff(!!this.flyout_),this.targetBlock_.showContextMenu(t)):this.startBubble_?this.startBubble_.showContextMenu(t):this.startWorkspace_&&!this.flyout_&&(e.hideChaff(),this.startWorkspace_.showContextMenu(t)),t.preventDefault(),t.stopPropagation(),this.dispose()},e.Gesture.prototype.handleWsStart=function(t,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace_(n),this.mostRecentEvent_=t,this.doStart(t)},e.Gesture.prototype.fireWorkspaceClick_=function(t){e.Events.fire(new(e.Events.get(e.Events.CLICK))(null,t.id,"workspace"))},e.Gesture.prototype.handleFlyoutStart=function(t,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout_(n),this.handleWsStart(t,n.getWorkspace())},e.Gesture.prototype.handleBlockStart=function(t,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(n),this.mostRecentEvent_=t},e.Gesture.prototype.handleBubbleStart=function(t,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(n),this.mostRecentEvent_=t},e.Gesture.prototype.doBubbleClick_=function(){this.startBubble_.setFocus&&this.startBubble_.setFocus(),this.startBubble_.select&&this.startBubble_.select()},e.Gesture.prototype.doFieldClick_=function(){this.startField_.showEditor(this.mostRecentEvent_),this.bringBlockToFront_()},e.Gesture.prototype.doBlockClick_=function(){if(this.flyout_&&this.flyout_.autoClose)this.targetBlock_.isEnabled()&&(e.Events.getGroup()||e.Events.setGroup(!0),this.flyout_.createBlock(this.targetBlock_).scheduleSnapAndBump());else{var t=new(e.Events.get(e.Events.CLICK))(this.startBlock_,this.startWorkspace_.id,"block");e.Events.fire(t)}this.bringBlockToFront_(),e.Events.setGroup(!1)},e.Gesture.prototype.doWorkspaceClick_=function(t){t=this.creatorWorkspace_,e.selected&&e.selected.unselect(),this.fireWorkspaceClick_(this.startWorkspace_||t)},e.Gesture.prototype.bringBlockToFront_=function(){this.targetBlock_&&!this.flyout_&&this.targetBlock_.bringToFront()},e.Gesture.prototype.setStartField=function(t){if(this.hasStarted_)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField_||(this.startField_=t)},e.Gesture.prototype.setStartBubble=function(t){this.startBubble_||(this.startBubble_=t)},e.Gesture.prototype.setStartBlock=function(t){this.startBlock_||this.startBubble_||(this.startBlock_=t,t.isInFlyout&&t!=t.getRootBlock()?this.setTargetBlock_(t.getRootBlock()):this.setTargetBlock_(t))},e.Gesture.prototype.setTargetBlock_=function(t){t.isShadow()?this.setTargetBlock_(t.getParent()):this.targetBlock_=t},e.Gesture.prototype.setStartWorkspace_=function(t){this.startWorkspace_||(this.startWorkspace_=t)},e.Gesture.prototype.setStartFlyout_=function(t){this.flyout_||(this.flyout_=t)},e.Gesture.prototype.isBubbleClick_=function(){return!!this.startBubble_&&!this.hasExceededDragRadius_},e.Gesture.prototype.isBlockClick_=function(){return!!this.startBlock_&&!this.hasExceededDragRadius_&&!this.isFieldClick_()},e.Gesture.prototype.isFieldClick_=function(){return!!this.startField_&&this.startField_.isClickable()&&!this.hasExceededDragRadius_&&(!this.flyout_||!this.flyout_.autoClose)},e.Gesture.prototype.isWorkspaceClick_=function(){return!(this.startBlock_||this.startBubble_||this.startField_||this.hasExceededDragRadius_)},e.Gesture.prototype.isDragging=function(){return this.isDraggingWorkspace_||this.isDraggingBlock_||this.isDraggingBubble_},e.Gesture.prototype.hasStarted=function(){return this.hasStarted_},e.Gesture.prototype.getInsertionMarkers=function(){return this.blockDragger_?this.blockDragger_.getInsertionMarkers():[]},e.Gesture.prototype.getCurrentDragger=function(){return this.isDraggingBlock_?this.blockDragger_:this.isDraggingWorkspace_?this.workspaceDragger_:this.isDraggingBubble_?this.bubbleDragger_:null},e.Gesture.inProgress=function(){for(var o,t=e.Workspace.getAll(),n=0;o=t[n];n++)if(o.currentGesture_)return!0;return!1},e.IRegistrable=function(){},e.Marker=function(){this.drawer_=this.curNode_=this.colour=null,this.type="marker"},e.Marker.prototype.setDrawer=function(t){this.drawer_=t},e.Marker.prototype.getDrawer=function(){return this.drawer_},e.Marker.prototype.getCurNode=function(){return this.curNode_},e.Marker.prototype.setCurNode=function(t){var n=this.curNode_;this.curNode_=t,this.drawer_&&this.drawer_.draw(n,this.curNode_)},e.Marker.prototype.draw=function(){this.drawer_&&this.drawer_.draw(this.curNode_,this.curNode_)},e.Marker.prototype.hide=function(){this.drawer_&&this.drawer_.hide()},e.Marker.prototype.dispose=function(){this.getDrawer()&&this.getDrawer().dispose()},e.Cursor=function(){e.Cursor.superClass_.constructor.call(this),this.type="cursor"},e.utils.object.inherits(e.Cursor,e.Marker),e.Cursor.prototype.next=function(){var t=this.getCurNode();if(!t)return null;for(t=t.next();t&&t.next()&&(t.getType()==e.ASTNode.types.NEXT||t.getType()==e.ASTNode.types.BLOCK);)t=t.next();return t&&this.setCurNode(t),t},e.Cursor.prototype.in=function(){var t=this.getCurNode();return t?((t.getType()==e.ASTNode.types.PREVIOUS||t.getType()==e.ASTNode.types.OUTPUT)&&(t=t.next()),(t=t.in())&&this.setCurNode(t),t):null},e.Cursor.prototype.prev=function(){var t=this.getCurNode();if(!t)return null;for(t=t.prev();t&&t.prev()&&(t.getType()==e.ASTNode.types.NEXT||t.getType()==e.ASTNode.types.BLOCK);)t=t.prev();return t&&this.setCurNode(t),t},e.Cursor.prototype.out=function(){var t=this.getCurNode();return t?((t=t.out())&&t.getType()==e.ASTNode.types.BLOCK&&(t=t.prev()||t),t&&this.setCurNode(t),t):null},e.registry.register(e.registry.Type.CURSOR,e.registry.DEFAULT,e.Cursor),e.MarkerManager=function(t){this.cursorSvg_=this.cursor_=null,this.markers_=Object.create(null),this.workspace_=t},e.MarkerManager.LOCAL_MARKER="local_marker_1",e.MarkerManager.prototype.registerMarker=function(t,n){this.markers_[t]&&this.unregisterMarker(t),n.setDrawer(this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,n)),this.setMarkerSvg(n.getDrawer().createDom()),this.markers_[t]=n},e.MarkerManager.prototype.unregisterMarker=function(t){var n=this.markers_[t];if(!n)throw Error("Marker with ID "+t+" does not exist. Can only unregister markers that exist.");n.dispose(),delete this.markers_[t]},e.MarkerManager.prototype.getCursor=function(){return this.cursor_},e.MarkerManager.prototype.getMarker=function(t){return this.markers_[t]||null},e.MarkerManager.prototype.setCursor=function(t){this.cursor_&&this.cursor_.getDrawer()&&this.cursor_.getDrawer().dispose(),(this.cursor_=t)&&(t=this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,this.cursor_),this.cursor_.setDrawer(t),this.setCursorSvg(this.cursor_.getDrawer().createDom()))},e.MarkerManager.prototype.setCursorSvg=function(t){t?(this.workspace_.getBlockCanvas().appendChild(t),this.cursorSvg_=t):this.cursorSvg_=null},e.MarkerManager.prototype.setMarkerSvg=function(t){t?this.workspace_.getBlockCanvas()&&(this.cursorSvg_?this.workspace_.getBlockCanvas().insertBefore(t,this.cursorSvg_):this.workspace_.getBlockCanvas().appendChild(t)):this.markerSvg_=null},e.MarkerManager.prototype.updateMarkers=function(){this.workspace_.keyboardAccessibilityMode&&this.cursorSvg_&&this.workspace_.getCursor().draw()},e.MarkerManager.prototype.dispose=function(){for(var o,t=Object.keys(this.markers_),n=0;o=t[n];n++)this.unregisterMarker(o);this.markers_=null,this.cursor_&&(this.cursor_.dispose(),this.cursor_=null)},e.WidgetDiv={},e.WidgetDiv.owner_=null,e.WidgetDiv.dispose_=null,e.WidgetDiv.rendererClassName_="",e.WidgetDiv.themeClassName_="",e.WidgetDiv.createDom=function(){e.WidgetDiv.DIV||(e.WidgetDiv.DIV=document.createElement("div"),e.WidgetDiv.DIV.className="blocklyWidgetDiv",(e.parentContainer||document.body).appendChild(e.WidgetDiv.DIV))},e.WidgetDiv.show=function(t,n,o){e.WidgetDiv.hide(),e.WidgetDiv.owner_=t,e.WidgetDiv.dispose_=o,(t=e.WidgetDiv.DIV).style.direction=n?"rtl":"ltr",t.style.display="block",n=e.getMainWorkspace(),e.WidgetDiv.rendererClassName_=n.getRenderer().getClassName(),e.WidgetDiv.themeClassName_=n.getTheme().getClassName(),e.utils.dom.addClass(t,e.WidgetDiv.rendererClassName_),e.utils.dom.addClass(t,e.WidgetDiv.themeClassName_)},e.WidgetDiv.hide=function(){if(e.WidgetDiv.isVisible()){e.WidgetDiv.owner_=null;var t=e.WidgetDiv.DIV;t.style.display="none",t.style.left="",t.style.top="",e.WidgetDiv.dispose_&&e.WidgetDiv.dispose_(),e.WidgetDiv.dispose_=null,t.textContent="",e.WidgetDiv.rendererClassName_&&(e.utils.dom.removeClass(t,e.WidgetDiv.rendererClassName_),e.WidgetDiv.rendererClassName_=""),e.WidgetDiv.themeClassName_&&(e.utils.dom.removeClass(t,e.WidgetDiv.themeClassName_),e.WidgetDiv.themeClassName_=""),e.getMainWorkspace().markFocused()}},e.WidgetDiv.isVisible=function(){return!!e.WidgetDiv.owner_},e.WidgetDiv.hideIfOwner=function(t){e.WidgetDiv.owner_==t&&e.WidgetDiv.hide()},e.WidgetDiv.positionInternal_=function(t,n,o){e.WidgetDiv.DIV.style.left=t+"px",e.WidgetDiv.DIV.style.top=n+"px",e.WidgetDiv.DIV.style.height=o+"px"},e.WidgetDiv.positionWithAnchor=function(t,n,o,r){var p=e.WidgetDiv.calculateY_(t,n,o);t=e.WidgetDiv.calculateX_(t,n,o,r),0>p?e.WidgetDiv.positionInternal_(t,0,o.height+p):e.WidgetDiv.positionInternal_(t,p,o.height)},e.WidgetDiv.calculateX_=function(t,n,o,r){return r?(n=Math.max(n.right-o.width,t.left),Math.min(n,t.right-o.width)):(n=Math.min(n.left,t.right-o.width),Math.max(n,t.left))},e.WidgetDiv.calculateY_=function(t,n,o){return n.bottom+o.height>=t.bottom?n.top-o.height:n.bottom},e.Field=function(t,n,o){this.value_=this.DEFAULT_VALUE,this.tooltip_=this.validator_=null,this.size_=new e.utils.Size(0,0),this.constants_=this.mouseDownWrapper_=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg_=this.cursorSvg_=null,o&&this.configure_(o),this.setValue(t),n&&this.setValidator(n)},e.Field.prototype.DEFAULT_VALUE=null,e.Field.prototype.name=void 0,e.Field.prototype.disposed=!1,e.Field.prototype.maxDisplayLength=50,e.Field.prototype.sourceBlock_=null,e.Field.prototype.isDirty_=!0,e.Field.prototype.visible_=!0,e.Field.prototype.clickTarget_=null,e.Field.NBSP="\xa0",e.Field.prototype.EDITABLE=!0,e.Field.prototype.SERIALIZABLE=!1,e.Field.prototype.configure_=function(t){var n=t.tooltip;"string"==typeof n&&(n=e.utils.replaceMessageReferences(t.tooltip)),n&&this.setTooltip(n)},e.Field.prototype.setSourceBlock=function(t){if(this.sourceBlock_)throw Error("Field already bound to a block.");this.sourceBlock_=t},e.Field.prototype.getConstants=function(){return!this.constants_&&this.sourceBlock_&&this.sourceBlock_.workspace&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_},e.Field.prototype.getSourceBlock=function(){return this.sourceBlock_},e.Field.prototype.init=function(){this.fieldGroup_||(this.fieldGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},null),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip_),this.bindEvents_(),this.initModel())},e.Field.prototype.initView=function(){this.createBorderRect_(),this.createTextElement_()},e.Field.prototype.initModel=function(){},e.Field.prototype.createBorderRect_=function(){this.borderRect_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)},e.Field.prototype.createTextElement_=function(){this.textElement_=e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)},e.Field.prototype.bindEvents_=function(){e.Tooltip.bindMouseEvents(this.getClickTarget_()),this.mouseDownWrapper_=e.browserEvents.conditionalBind(this.getClickTarget_(),"mousedown",this,this.onMouseDown_)},e.Field.prototype.fromXml=function(t){this.setValue(t.textContent)},e.Field.prototype.toXml=function(t){return t.textContent=this.getValue(),t},e.Field.prototype.dispose=function(){e.DropDownDiv.hideIfOwner(this),e.WidgetDiv.hideIfOwner(this),e.Tooltip.unbindMouseEvents(this.getClickTarget_()),this.mouseDownWrapper_&&e.browserEvents.unbind(this.mouseDownWrapper_),e.utils.dom.removeNode(this.fieldGroup_),this.disposed=!0},e.Field.prototype.updateEditable=function(){var t=this.fieldGroup_;this.EDITABLE&&t&&(this.sourceBlock_.isEditable()?(e.utils.dom.addClass(t,"blocklyEditableText"),e.utils.dom.removeClass(t,"blocklyNonEditableText"),t.style.cursor=this.CURSOR):(e.utils.dom.addClass(t,"blocklyNonEditableText"),e.utils.dom.removeClass(t,"blocklyEditableText"),t.style.cursor=""))},e.Field.prototype.isClickable=function(){return!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&!!this.showEditor_&&"function"==typeof this.showEditor_},e.Field.prototype.isCurrentlyEditable=function(){return this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()},e.Field.prototype.isSerializable=function(){var t=!1;return this.name&&(this.SERIALIZABLE?t=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),t=!0)),t},e.Field.prototype.isVisible=function(){return this.visible_},e.Field.prototype.setVisible=function(t){if(this.visible_!=t){this.visible_=t;var n=this.getSvgRoot();n&&(n.style.display=t?"block":"none")}},e.Field.prototype.setValidator=function(t){this.validator_=t},e.Field.prototype.getValidator=function(){return this.validator_},e.Field.prototype.getSvgRoot=function(){return this.fieldGroup_},e.Field.prototype.applyColour=function(){},e.Field.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()},e.Field.prototype.showEditor=function(t){this.isClickable()&&this.showEditor_(t)},e.Field.prototype.updateSize_=function(t){var n=this.getConstants(),o=2*(t=null!=t?t:this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0),r=n.FIELD_TEXT_HEIGHT,p=0;this.textElement_&&(o+=p=e.utils.dom.getFastTextWidth(this.textElement_,n.FIELD_TEXT_FONTSIZE,n.FIELD_TEXT_FONTWEIGHT,n.FIELD_TEXT_FONTFAMILY)),this.borderRect_&&(r=Math.max(r,n.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=r,this.size_.width=o,this.positionTextElement_(t,p),this.positionBorderRect_()},e.Field.prototype.positionTextElement_=function(t,n){if(this.textElement_){var o=this.getConstants(),r=this.size_.height/2;this.textElement_.setAttribute("x",this.sourceBlock_.RTL?this.size_.width-n-t:t),this.textElement_.setAttribute("y",o.FIELD_TEXT_BASELINE_CENTER?r:r-o.FIELD_TEXT_HEIGHT/2+o.FIELD_TEXT_BASELINE)}},e.Field.prototype.positionBorderRect_=function(){this.borderRect_&&(this.borderRect_.setAttribute("width",this.size_.width),this.borderRect_.setAttribute("height",this.size_.height),this.borderRect_.setAttribute("rx",this.getConstants().FIELD_BORDER_RECT_RADIUS),this.borderRect_.setAttribute("ry",this.getConstants().FIELD_BORDER_RECT_RADIUS))},e.Field.prototype.getSize=function(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&0==this.size_.width&&(console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead."),this.render_()),this.size_):new e.utils.Size(0,0)},e.Field.prototype.getScaledBBox=function(){if(this.borderRect_)t=this.borderRect_.getBoundingClientRect(),o=e.utils.style.getPageOffset(this.borderRect_),r=t.width,t=t.height;else{var t=this.sourceBlock_.getHeightWidth(),n=this.sourceBlock_.workspace.scale,o=this.getAbsoluteXY_(),r=t.width*n;t=t.height*n,e.utils.userAgent.GECKO?(o.x+=1.5*n,o.y+=1.5*n):e.utils.userAgent.EDGE||e.utils.userAgent.IE||(o.x-=.5*n,o.y-=.5*n),r+=1*n,t+=1*n}return new e.utils.Rect(o.y,o.y+t,o.x,o.x+r)},e.Field.prototype.getDisplayText_=function(){var t=this.getText();return t?(t.length>this.maxDisplayLength&&(t=t.substring(0,this.maxDisplayLength-2)+"\u2026"),t=t.replace(/\s/g,e.Field.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(t+="\u200f"),t):e.Field.NBSP},e.Field.prototype.getText=function(){if(this.getText_){var t=this.getText_.call(this);if(null!==t)return String(t)}return String(this.getValue())},e.Field.prototype.markDirty=function(){this.isDirty_=!0,this.constants_=null},e.Field.prototype.forceRerender=function(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours(),this.updateMarkers_())},e.Field.prototype.setValue=function(t){if(null!==t){var n=this.doClassValidation_(t);if(!((t=this.processValidation_(t,n))instanceof Error)){if((n=this.getValidator())&&(n=n.call(this,t),(t=this.processValidation_(t,n))instanceof Error))return;if(!(n=this.sourceBlock_)||!n.disposed){var o=this.getValue();o===t?this.doValueUpdate_(t):(n&&e.Events.isEnabled()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(n,"field",this.name||null,o,t)),this.doValueUpdate_(t),this.isDirty_&&this.forceRerender())}}}},e.Field.prototype.processValidation_=function(t,n){return null===n?(this.doValueInvalid_(t),this.isDirty_&&this.forceRerender(),Error()):(void 0!==n&&(t=n),t)},e.Field.prototype.getValue=function(){return this.value_},e.Field.prototype.doClassValidation_=function(t){return null==t?null:t},e.Field.prototype.doValueUpdate_=function(t){this.value_=t,this.isDirty_=!0},e.Field.prototype.doValueInvalid_=function(t){},e.Field.prototype.onMouseDown_=function(t){this.sourceBlock_&&this.sourceBlock_.workspace&&(t=this.sourceBlock_.workspace.getGesture(t))&&t.setStartField(this)},e.Field.prototype.setTooltip=function(t){t||""===t||(t=this.sourceBlock_);var n=this.getClickTarget_();n?n.tooltip=t:this.tooltip_=t},e.Field.prototype.getTooltip=function(){var t=this.getClickTarget_();return e.Tooltip.getTooltipOfObject(t||{tooltip:this.tooltip_})},e.Field.prototype.getClickTarget_=function(){return this.clickTarget_||this.getSvgRoot()},e.Field.prototype.getAbsoluteXY_=function(){return e.utils.style.getPageOffset(this.getClickTarget_())},e.Field.prototype.referencesVariables=function(){return!1},e.Field.prototype.getParentInput=function(){for(var t=null,n=this.sourceBlock_,o=n.inputList,r=0;r<n.inputList.length;r++)for(var p=o[r],b=p.fieldRow,I=0;I<b.length;I++)if(b[I]===this){t=p;break}return t},e.Field.prototype.getFlipRtl=function(){return!1},e.Field.prototype.isTabNavigable=function(){return!1},e.Field.prototype.onShortcut=function(t){return!1},e.Field.prototype.setCursorSvg=function(t){t?(this.fieldGroup_.appendChild(t),this.cursorSvg_=t):this.cursorSvg_=null},e.Field.prototype.setMarkerSvg=function(t){t?(this.fieldGroup_.appendChild(t),this.markerSvg_=t):this.markerSvg_=null},e.Field.prototype.updateMarkers_=function(){var t=this.sourceBlock_.workspace;t.keyboardAccessibilityMode&&this.cursorSvg_&&t.getCursor().draw(),t.keyboardAccessibilityMode&&this.markerSvg_&&t.getMarker(e.MarkerManager.LOCAL_MARKER).draw()},e.FieldLabel=function(t,n,o){this.class_=null,e.FieldLabel.superClass_.constructor.call(this,t,null,o),o||(this.class_=n||null)},e.utils.object.inherits(e.FieldLabel,e.Field),e.FieldLabel.prototype.DEFAULT_VALUE="",e.FieldLabel.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.text);return new e.FieldLabel(n,void 0,t)},e.FieldLabel.prototype.EDITABLE=!1,e.FieldLabel.prototype.configure_=function(t){e.FieldLabel.superClass_.configure_.call(this,t),this.class_=t.class},e.FieldLabel.prototype.initView=function(){this.createTextElement_(),this.class_&&e.utils.dom.addClass(this.textElement_,this.class_)},e.FieldLabel.prototype.doClassValidation_=function(t){return null==t?null:String(t)},e.FieldLabel.prototype.setClass=function(t){this.textElement_&&(this.class_&&e.utils.dom.removeClass(this.textElement_,this.class_),t&&e.utils.dom.addClass(this.textElement_,t)),this.class_=t},e.fieldRegistry.register("field_label",e.FieldLabel),e.Input=function(t,n,o,r){if(t!=e.inputTypes.DUMMY&&!n)throw Error("Value inputs and statement inputs must have non-empty name.");this.type=t,this.name=n,this.sourceBlock_=o,this.connection=r,this.fieldRow=[]},e.Input.prototype.align=e.constants.ALIGN.LEFT,e.Input.prototype.visible_=!0,e.Input.prototype.getSourceBlock=function(){return this.sourceBlock_},e.Input.prototype.appendField=function(t,n){return this.insertFieldAt(this.fieldRow.length,t,n),this},e.Input.prototype.insertFieldAt=function(t,n,o){if(0>t||t>this.fieldRow.length)throw Error("index "+t+" out of bounds.");return(n||""==n&&o)&&("string"==typeof n&&(n=e.fieldRegistry.fromJson({type:"field_label",text:n})),n.setSourceBlock(this.sourceBlock_),this.sourceBlock_.rendered&&(n.init(),n.applyColour()),n.name=o,n.setVisible(this.isVisible()),n.prefixField&&(t=this.insertFieldAt(t,n.prefixField)),this.fieldRow.splice(t,0,n),++t,n.suffixField&&(t=this.insertFieldAt(t,n.suffixField)),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours())),t},e.Input.prototype.removeField=function(t,n){for(var r,o=0;r=this.fieldRow[o];o++)if(r.name===t)return r.dispose(),this.fieldRow.splice(o,1),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours()),!0;if(n)return!1;throw Error('Field "'+t+'" not found.')},e.Input.prototype.isVisible=function(){return this.visible_},e.Input.prototype.setVisible=function(t){var n=[];if(this.visible_==t)return n;this.visible_=t;for(var r,o=0;r=this.fieldRow[o];o++)r.setVisible(t);return this.connection&&(this.connection=this.connection,t?n=this.connection.startTrackingAll():this.connection.stopTrackingAll(),o=this.connection.targetBlock())&&(o.getSvgRoot().style.display=t?"block":"none"),n},e.Input.prototype.markDirty=function(){for(var n,t=0;n=this.fieldRow[t];t++)n.markDirty()},e.Input.prototype.setCheck=function(t){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(t),this},e.Input.prototype.setAlign=function(t){return this.align=t,this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render()),this},e.Input.prototype.setShadowDom=function(t){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(t),this},e.Input.prototype.getShadowDom=function(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()},e.Input.prototype.init=function(){if(this.sourceBlock_.workspace.rendered)for(var t=0;t<this.fieldRow.length;t++)this.fieldRow[t].init()},e.Input.prototype.dispose=function(){for(var n,t=0;n=this.fieldRow[t];t++)n.dispose();this.connection&&this.connection.dispose(),this.sourceBlock_=null},e.Block=function(t,n,o){if(e.Generator&&void 0!==e.Generator.prototype[n])throw Error('Block prototypeName "'+n+'" conflicts with Blockly.Generator members.');if(this.id=o&&!t.getBlockById(o)?o:e.utils.genUid(),t.setBlockById(this.id,this),this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.inputsInline=void 0,this.disabled=!1,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable_=this.movable_=this.deletable_=!0,this.collapsed_=this.isShadow_=!1,this.comment=this.outputShape_=null,this.commentModel={text:null,pinned:!1,size:new e.utils.Size(160,80)},this.xy_=new e.utils.Coordinate(0,0),this.workspace=t,this.isInFlyout=t.isFlyout,this.isInMutator=t.isMutator,this.RTL=t.RTL,this.isInsertionMarker_=!1,this.hat=void 0,this.rendered=null,this.statementInputCount=0,n){if(this.type=n,!(o=e.Blocks[n])||"object"!=typeof o)throw TypeError("Unknown block type: "+n);e.utils.object.mixin(this,o)}t.addTopBlock(this),t.addTypedBlock(this),(t=e.Events.getGroup())||e.Events.setGroup(!0),n=e.Events.recordUndo;try{"function"==typeof this.init&&(e.Events.recordUndo=!1,this.init(),e.Events.recordUndo=n),e.Events.isEnabled()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CREATE))(this))}finally{t||e.Events.setGroup(!1),e.Events.recordUndo=n}this.inputsInlineDefault=this.inputsInline,"function"==typeof this.onchange&&this.setOnChange(this.onchange)},e.Block.COLLAPSED_INPUT_NAME=e.constants.COLLAPSED_INPUT_NAME,e.Block.COLLAPSED_FIELD_NAME=e.constants.COLLAPSED_FIELD_NAME,e.Block.prototype.data=null,e.Block.prototype.disposed=!1,e.Block.prototype.hue_=null,e.Block.prototype.colour_="#000000",e.Block.prototype.styleName_="",e.Block.prototype.dispose=function(t){if(this.workspace){this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.unplug(t),e.Events.isEnabled()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_DELETE))(this)),e.Events.disable();try{this.workspace&&(this.workspace.removeTopBlock(this),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),this.workspace=null),e.selected==this&&(e.selected=null);for(var n=this.childBlocks_.length-1;0<=n;n--)this.childBlocks_[n].dispose(!1);n=0;for(var o;o=this.inputList[n];n++)o.dispose();this.inputList.length=0;var p,r=this.getConnections_(!0);for(n=0;p=r[n];n++)p.dispose()}finally{e.Events.enable(),this.disposed=!0}}},e.Block.prototype.initModel=function(){for(var n,t=0;n=this.inputList[t];t++)for(var r,o=0;r=n.fieldRow[o];o++)r.initModel&&r.initModel()},e.Block.prototype.unplug=function(t){this.outputConnection?this.unplugFromRow_(t):this.previousConnection&&this.unplugFromStack_(t)},e.Block.prototype.unplugFromRow_=function(t){var n=null;this.outputConnection.isConnected()&&(n=this.outputConnection.targetConnection,this.outputConnection.disconnect()),n&&t&&(t=this.getOnlyValueConnection_())&&t.isConnected()&&!t.targetBlock().isShadow()&&((t=t.targetConnection).disconnect(),this.workspace.connectionChecker.canConnect(t,n,!1)?n.connect(t):t.onFailedConnect(n))},e.Block.prototype.getOnlyValueConnection_=function(){for(var t=null,n=0;n<this.inputList.length;n++){var o=this.inputList[n].connection;if(o&&o.type==e.connectionTypes.INPUT_VALUE&&o.targetConnection){if(t)return null;t=o}}return t},e.Block.prototype.unplugFromStack_=function(t){var n=null;this.previousConnection.isConnected()&&(n=this.previousConnection.targetConnection,this.previousConnection.disconnect());var o=this.getNextBlock();t&&o&&!o.isShadow()&&((t=this.nextConnection.targetConnection).disconnect(),n&&this.workspace.connectionChecker.canConnect(n,t,!1)&&n.connect(t))},e.Block.prototype.getConnections_=function(t){t=[],this.outputConnection&&t.push(this.outputConnection),this.previousConnection&&t.push(this.previousConnection),this.nextConnection&&t.push(this.nextConnection);for(var o,n=0;o=this.inputList[n];n++)o.connection&&t.push(o.connection);return t},e.Block.prototype.lastConnectionInStack=function(t){for(var n=this.nextConnection;n;){var o=n.targetBlock();if(!o||t&&o.isShadow())return n;n=o.nextConnection}return null},e.Block.prototype.bumpNeighbours=function(){},e.Block.prototype.getParent=function(){return this.parentBlock_},e.Block.prototype.getInputWithBlock=function(t){for(var o,n=0;o=this.inputList[n];n++)if(o.connection&&o.connection.targetBlock()==t)return o;return null},e.Block.prototype.getSurroundParent=function(){var t=this;do{var n=t;if(!(t=t.getParent()))return null}while(t.getNextBlock()==n);return t},e.Block.prototype.getNextBlock=function(){return this.nextConnection&&this.nextConnection.targetBlock()},e.Block.prototype.getPreviousBlock=function(){return this.previousConnection&&this.previousConnection.targetBlock()},e.Block.prototype.getFirstStatementConnection=function(){for(var n,t=0;n=this.inputList[t];t++)if(n.connection&&n.connection.type==e.connectionTypes.NEXT_STATEMENT)return n.connection;return null},e.Block.prototype.getRootBlock=function(){var t=this;do{var n=t;t=n.parentBlock_}while(t);return n},e.Block.prototype.getTopStackBlock=function(){var t=this;do{var n=t.getPreviousBlock()}while(n&&n.getNextBlock()==t&&(t=n));return t},e.Block.prototype.getChildren=function(t){if(!t)return this.childBlocks_;t=[];for(var o,n=0;o=this.inputList[n];n++)o.connection&&(o=o.connection.targetBlock())&&t.push(o);return(n=this.getNextBlock())&&t.push(n),t},e.Block.prototype.setParent=function(t){if(t!=this.parentBlock_){if(this.parentBlock_){if(e.utils.arrayRemove(this.parentBlock_.childBlocks_,this),this.previousConnection&&this.previousConnection.isConnected())throw Error("Still connected to previous block.");if(this.outputConnection&&this.outputConnection.isConnected())throw Error("Still connected to parent block.");this.parentBlock_=null}else this.workspace.removeTopBlock(this);(this.parentBlock_=t)?t.childBlocks_.push(this):this.workspace.addTopBlock(this)}},e.Block.prototype.getDescendants=function(t){for(var r,n=[this],o=this.getChildren(t),p=0;r=o[p];p++)n.push.apply(n,r.getDescendants(t));return n},e.Block.prototype.isDeletable=function(){return this.deletable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},e.Block.prototype.setDeletable=function(t){this.deletable_=t},e.Block.prototype.isMovable=function(){return this.movable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},e.Block.prototype.setMovable=function(t){this.movable_=t},e.Block.prototype.isDuplicatable=function(){return!this.workspace.hasBlockLimits()||this.workspace.isCapacityAvailable(e.utils.getBlockTypeCounts(this,!0))},e.Block.prototype.isShadow=function(){return this.isShadow_},e.Block.prototype.setShadow=function(t){this.isShadow_=t},e.Block.prototype.isInsertionMarker=function(){return this.isInsertionMarker_},e.Block.prototype.setInsertionMarker=function(t){this.isInsertionMarker_=t},e.Block.prototype.isEditable=function(){return this.editable_&&!(this.workspace&&this.workspace.options.readOnly)},e.Block.prototype.setEditable=function(t){this.editable_=t,t=0;for(var n;n=this.inputList[t];t++)for(var r,o=0;r=n.fieldRow[o];o++)r.updateEditable()},e.Block.prototype.isDisposed=function(){return this.disposed},e.Block.prototype.getMatchingConnection=function(t,n){var o=this.getConnections_(!0);if(t=t.getConnections_(!0),o.length!=t.length)throw Error("Connection lists did not match in length.");for(var r=0;r<t.length;r++)if(t[r]==n)return o[r];return null},e.Block.prototype.setHelpUrl=function(t){this.helpUrl=t},e.Block.prototype.setTooltip=function(t){this.tooltip=t},e.Block.prototype.getTooltip=function(){return e.Tooltip.getTooltipOfObject(this)},e.Block.prototype.getColour=function(){return this.colour_},e.Block.prototype.getStyleName=function(){return this.styleName_},e.Block.prototype.getHue=function(){return this.hue_},e.Block.prototype.setColour=function(t){t=e.utils.parseBlockColour(t),this.hue_=t.hue,this.colour_=t.hex},e.Block.prototype.setStyle=function(t){this.styleName_=t},e.Block.prototype.setOnChange=function(t){if(t&&"function"!=typeof t)throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),(this.onchange=t)&&(this.onchangeWrapper_=t.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_))},e.Block.prototype.getField=function(t){if("string"!=typeof t)throw TypeError("Blockly.Block.prototype.getField expects a string with the field name but received "+(void 0===t?"nothing":t+" of type "+typeof t)+" instead");for(var o,n=0;o=this.inputList[n];n++)for(var p,r=0;p=o.fieldRow[r];r++)if(p.name===t)return p;return null},e.Block.prototype.getVars=function(){for(var o,t=[],n=0;o=this.inputList[n];n++)for(var p,r=0;p=o.fieldRow[r];r++)p.referencesVariables()&&t.push(p.getValue());return t},e.Block.prototype.getVarModels=function(){for(var o,t=[],n=0;o=this.inputList[n];n++)for(var p,r=0;p=o.fieldRow[r];r++)p.referencesVariables()&&(p=this.workspace.getVariableById(p.getValue()))&&t.push(p);return t},e.Block.prototype.updateVarName=function(t){for(var o,n=0;o=this.inputList[n];n++)for(var p,r=0;p=o.fieldRow[r];r++)p.referencesVariables()&&t.getId()==p.getValue()&&p.refreshVariableName()},e.Block.prototype.renameVarById=function(t,n){for(var r,o=0;r=this.inputList[o];o++)for(var b,p=0;b=r.fieldRow[p];p++)b.referencesVariables()&&t==b.getValue()&&b.setValue(n)},e.Block.prototype.getFieldValue=function(t){return(t=this.getField(t))?t.getValue():null},e.Block.prototype.setFieldValue=function(t,n){var o=this.getField(n);if(!o)throw Error('Field "'+n+'" not found.');o.setValue(t)},e.Block.prototype.setPreviousStatement=function(t,n){if(t){if(void 0===n&&(n=null),!this.previousConnection){if(this.outputConnection)throw Error("Remove output connection prior to adding previous connection.");this.previousConnection=this.makeConnection_(e.connectionTypes.PREVIOUS_STATEMENT)}this.previousConnection.setCheck(n)}else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}},e.Block.prototype.setNextStatement=function(t,n){if(t)void 0===n&&(n=null),this.nextConnection||(this.nextConnection=this.makeConnection_(e.connectionTypes.NEXT_STATEMENT)),this.nextConnection.setCheck(n);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}},e.Block.prototype.setOutput=function(t,n){if(t){if(void 0===n&&(n=null),!this.outputConnection){if(this.previousConnection)throw Error("Remove previous connection prior to adding output connection.");this.outputConnection=this.makeConnection_(e.connectionTypes.OUTPUT_VALUE)}this.outputConnection.setCheck(n)}else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}},e.Block.prototype.setInputsInline=function(t){this.inputsInline!=t&&(e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this,"inline",null,this.inputsInline,t)),this.inputsInline=t)},e.Block.prototype.getInputsInline=function(){if(null!=this.inputsInline)return this.inputsInline;for(var t=1;t<this.inputList.length;t++)if(this.inputList[t-1].type==e.inputTypes.DUMMY&&this.inputList[t].type==e.inputTypes.DUMMY)return!1;for(t=1;t<this.inputList.length;t++)if(this.inputList[t-1].type==e.inputTypes.VALUE&&this.inputList[t].type==e.inputTypes.DUMMY)return!0;return!1},e.Block.prototype.setOutputShape=function(t){this.outputShape_=t},e.Block.prototype.getOutputShape=function(){return this.outputShape_},e.Block.prototype.isEnabled=function(){return!this.disabled},e.Block.prototype.setEnabled=function(t){this.isEnabled()!=t&&(e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this,"disabled",null,this.disabled,!t)),this.disabled=!t)},e.Block.prototype.getInheritedDisabled=function(){for(var t=this.getSurroundParent();t;){if(t.disabled)return!0;t=t.getSurroundParent()}return!1},e.Block.prototype.isCollapsed=function(){return this.collapsed_},e.Block.prototype.setCollapsed=function(t){this.collapsed_!=t&&(e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this,"collapsed",null,this.collapsed_,t)),this.collapsed_=t)},e.Block.prototype.toString=function(t,n){function o(Y){var X=Y.getCheck();return!X&&Y.targetConnection&&(X=Y.targetConnection.getCheck()),!!X&&(-1!=X.indexOf("Boolean")||-1!=X.indexOf("Number"))}function r(){I&&I.getType()==x.getType()&&I.getLocation()==x.getLocation()&&(I=null)}var p=[];n=n||"?";var b=e.ASTNode.NAVIGATE_ALL_FIELDS;e.ASTNode.NAVIGATE_ALL_FIELDS=!0;for(var I=e.ASTNode.createBlockNode(this),x=I;I;){switch(I.getType()){case e.ASTNode.types.INPUT:var k=I.getLocation();I.in()?o(k)&&p.push("("):p.push(n);break;case e.ASTNode.types.FIELD:(k=I.getLocation()).name!=e.constants.COLLAPSED_FIELD_NAME&&p.push(k.getText())}if(!(I=(k=I).in()||k.next())){for(I=k.out(),r();I&&!I.next();)I=I.out(),r(),I&&I.getType()==e.ASTNode.types.INPUT&&o(I.getLocation())&&p.push(")");I&&(I=I.next())}}for(e.ASTNode.NAVIGATE_ALL_FIELDS=b,n=2;n<p.length;n++)"("==p[n-2]&&")"==p[n]&&(p[n-2]=p[n-1],p.splice(n-1,2));return p=(p=p.reduce(function(Y,X){return Y+("("==Y.substr(-1)||")"==X?"":" ")+X},"")).trim()||"???",t&&p.length>t&&(p=p.substring(0,t-3)+"..."),p},e.Block.prototype.appendValueInput=function(t){return this.appendInput_(e.inputTypes.VALUE,t)},e.Block.prototype.appendStatementInput=function(t){return this.appendInput_(e.inputTypes.STATEMENT,t)},e.Block.prototype.appendDummyInput=function(t){return this.appendInput_(e.inputTypes.DUMMY,t||"")},e.Block.prototype.jsonInit=function(t){var n=t.type?'Block "'+t.type+'": ':"";if(t.output&&t.previousStatement)throw Error(n+"Must not have both an output and a previousStatement.");if(t.style&&t.style.hat&&(this.hat=t.style.hat,t.style=null),t.style&&t.colour)throw Error(n+"Must not have both a colour and a style.");t.style?this.jsonInitStyle_(t,n):this.jsonInitColour_(t,n);for(var o=0;void 0!==t["message"+o];)this.interpolate_(t["message"+o],t["args"+o]||[],t["lastDummyAlign"+o],n),o++;if(void 0!==t.inputsInline&&this.setInputsInline(t.inputsInline),void 0!==t.output&&this.setOutput(!0,t.output),void 0!==t.outputShape&&this.setOutputShape(t.outputShape),void 0!==t.previousStatement&&this.setPreviousStatement(!0,t.previousStatement),void 0!==t.nextStatement&&this.setNextStatement(!0,t.nextStatement),void 0!==t.tooltip&&(o=e.utils.replaceMessageReferences(o=t.tooltip),this.setTooltip(o)),void 0!==t.enableContextMenu&&(this.contextMenu=!!(o=t.enableContextMenu)),void 0!==t.helpUrl&&(o=e.utils.replaceMessageReferences(o=t.helpUrl),this.setHelpUrl(o)),"string"==typeof t.extensions&&(console.warn(n+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+t.type+"' block."),t.extensions=[t.extensions]),void 0!==t.mutator&&e.Extensions.apply(t.mutator,this,!0),t=t.extensions,Array.isArray(t))for(n=0;n<t.length;++n)e.Extensions.apply(t[n],this,!1)},e.Block.prototype.jsonInitColour_=function(t,n){if("colour"in t)if(void 0===t.colour)console.warn(n+"Undefined colour value.");else{t=t.colour;try{this.setColour(t)}catch(o){console.warn(n+"Illegal colour value: ",t)}}},e.Block.prototype.jsonInitStyle_=function(t,n){t=t.style;try{this.setStyle(t)}catch(o){console.warn(n+"Style does not exist: ",t)}},e.Block.prototype.mixin=function(t,n){if(void 0!==n&&"boolean"!=typeof n)throw Error("opt_disableCheck must be a boolean if provided");if(!n){for(var o in n=[],t)void 0!==this[o]&&n.push(o);if(n.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(n))}e.utils.object.mixin(this,t)},e.Block.prototype.interpolate_=function(t,n,o,r){t=e.utils.tokenizeInterpolation(t),this.validateTokens_(t,n.length),n=this.interpolateArguments_(t,n,o),o=[],t=0;for(var p;p=n[t];t++)if(this.isInputKeyword_(p.type)){if(p=this.inputFromJson_(p,r)){for(var I,b=0;I=o[b];b++)p.appendField(I[0],I[1]);o.length=0}}else(b=this.fieldFromJson_(p))&&o.push([b,p.name])},e.Block.prototype.validateTokens_=function(t,n){for(var o=[],r=0,p=0;p<t.length;p++){var b=t[p];if("number"==typeof b){if(1>b||b>n)throw Error('Block "'+this.type+'": Message index %'+b+" out of range.");if(o[b])throw Error('Block "'+this.type+'": Message index %'+b+" duplicated.");o[b]=!0,r++}}if(r!=n)throw Error('Block "'+this.type+'": Message does not reference all '+n+" arg(s).")},e.Block.prototype.interpolateArguments_=function(t,n,o){for(var r=[],p=0;p<t.length;p++){var b=t[p];"number"==typeof b&&(b=n[b-1]),("string"!=typeof b||(b=this.stringToFieldJson_(b)))&&r.push(b)}return(t=r.length)&&!this.isInputKeyword_(r[t-1].type)&&(t={type:"input_dummy"},o&&(t.align=o),r.push(t)),r},e.Block.prototype.fieldFromJson_=function(t){var n=e.fieldRegistry.fromJson(t);return!n&&t.alt?"string"==typeof t.alt?(t=this.stringToFieldJson_(t.alt))?this.fieldFromJson_(t):null:this.fieldFromJson_(t.alt):n},e.Block.prototype.inputFromJson_=function(t,n){var o={LEFT:e.constants.ALIGN.LEFT,RIGHT:e.constants.ALIGN.RIGHT,CENTRE:e.constants.ALIGN.CENTRE,CENTER:e.constants.ALIGN.CENTRE},r=null;switch(t.type){case"input_value":r=this.appendValueInput(t.name);break;case"input_statement":r=this.appendStatementInput(t.name);break;case"input_dummy":r=this.appendDummyInput(t.name)}return r?(t.check&&r.setCheck(t.check),t.align&&(void 0===(o=o[t.align.toUpperCase()])?console.warn(n+"Illegal align value: ",t.align):r.setAlign(o)),r):null},e.Block.prototype.isInputKeyword_=function(t){return"input_value"==t||"input_statement"==t||"input_dummy"==t},e.Block.prototype.stringToFieldJson_=function(t){return(t=t.trim())?{type:"field_label",text:t}:null},e.Block.prototype.appendInput_=function(t,n){var o=null;return(t==e.inputTypes.VALUE||t==e.inputTypes.STATEMENT)&&(o=this.makeConnection_(t)),t==e.inputTypes.STATEMENT&&this.statementInputCount++,t=new e.Input(t,n,this,o),this.inputList.push(t),t},e.Block.prototype.moveInputBefore=function(t,n){if(t!=n){for(var b,o=-1,r=n?-1:this.inputList.length,p=0;b=this.inputList[p];p++)if(b.name==t){if(o=p,-1!=r)break}else if(n&&b.name==n&&(r=p,-1!=o))break;if(-1==o)throw Error('Named input "'+t+'" not found.');if(-1==r)throw Error('Reference input "'+n+'" not found.');this.moveNumberedInputBefore(o,r)}},e.Block.prototype.moveNumberedInputBefore=function(t,n){if(t==n)throw Error("Can't move input to itself.");if(t>=this.inputList.length)throw RangeError("Input index "+t+" out of bounds.");if(n>this.inputList.length)throw RangeError("Reference input "+n+" out of bounds.");var o=this.inputList[t];this.inputList.splice(t,1),t<n&&n--,this.inputList.splice(n,0,o)},e.Block.prototype.removeInput=function(t,n){for(var r,o=0;r=this.inputList[o];o++)if(r.name==t)return r.type==e.inputTypes.STATEMENT&&this.statementInputCount--,r.dispose(),this.inputList.splice(o,1),!0;if(n)return!1;throw Error("Input not found: "+t)},e.Block.prototype.getInput=function(t){for(var o,n=0;o=this.inputList[n];n++)if(o.name==t)return o;return null},e.Block.prototype.getInputTargetBlock=function(t){return(t=this.getInput(t))&&t.connection&&t.connection.targetBlock()},e.Block.prototype.getCommentText=function(){return this.commentModel.text},e.Block.prototype.setCommentText=function(t){this.commentModel.text!=t&&(e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this,"comment",null,this.commentModel.text,t)),this.comment=this.commentModel.text=t)},e.Block.prototype.setWarningText=function(t,n){},e.Block.prototype.setMutator=function(t){},e.Block.prototype.getRelativeToSurfaceXY=function(){return this.xy_},e.Block.prototype.moveBy=function(t,n){if(this.parentBlock_)throw Error("Block has parent.");var o=new(e.Events.get(e.Events.BLOCK_MOVE))(this);this.xy_.translate(t,n),o.recordNew(),e.Events.fire(o)},e.Block.prototype.makeConnection_=function(t){return new e.Connection(this,t)},e.Block.prototype.allInputsFilled=function(t){if(void 0===t&&(t=!0),!t&&this.isShadow())return!1;for(var o,n=0;o=this.inputList[n];n++)if(o.connection&&(!(o=o.connection.targetBlock())||!o.allInputsFilled(t)))return!1;return!(n=this.getNextBlock())||n.allInputsFilled(t)},e.Block.prototype.toDevString=function(){var t=this.type?'"'+this.type+'" block':"Block";return this.id&&(t+=' (id="'+this.id+'")'),t},e.blockRendering.IPathObject=function(t,n){},e.utils.KeyCodes={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PLUS_SIGN:43,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,FF_DASH:173,FF_HASH:163,QUESTION_MARK:63,AT_SIGN:64,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,MAC_WK_CMD_LEFT:91,MAC_WK_CMD_RIGHT:93,WIN_IME:229,VK_NONAME:252,PHANTOM:255},e.Menu=function(){this.menuItems_=[],this.roleName_=this.element_=this.onKeyDownHandler_=this.mouseLeaveHandler_=this.mouseEnterHandler_=this.clickHandler_=this.mouseOverHandler_=this.highlightedItem_=this.openingCoords=null},e.Menu.prototype.addChild=function(t){this.menuItems_.push(t)},e.Menu.prototype.render=function(t){var n=document.createElement("div");n.className="blocklyMenu goog-menu blocklyNonSelectable",n.tabIndex=0,this.roleName_&&e.utils.aria.setRole(n,this.roleName_),this.element_=n;for(var r,o=0;r=this.menuItems_[o];o++)n.appendChild(r.createDom());this.mouseOverHandler_=e.browserEvents.conditionalBind(n,"mouseover",this,this.handleMouseOver_,!0),this.clickHandler_=e.browserEvents.conditionalBind(n,"click",this,this.handleClick_,!0),this.mouseEnterHandler_=e.browserEvents.conditionalBind(n,"mouseenter",this,this.handleMouseEnter_,!0),this.mouseLeaveHandler_=e.browserEvents.conditionalBind(n,"mouseleave",this,this.handleMouseLeave_,!0),this.onKeyDownHandler_=e.browserEvents.conditionalBind(n,"keydown",this,this.handleKeyEvent_),t.appendChild(n)},e.Menu.prototype.getElement=function(){return this.element_},e.Menu.prototype.focus=function(){var t=this.getElement();t&&(t.focus({preventScroll:!0}),e.utils.dom.addClass(t,"blocklyFocused"))},e.Menu.prototype.blur_=function(){var t=this.getElement();t&&(t.blur(),e.utils.dom.removeClass(t,"blocklyFocused"))},e.Menu.prototype.setRole=function(t){this.roleName_=t},e.Menu.prototype.dispose=function(){this.mouseOverHandler_&&(e.browserEvents.unbind(this.mouseOverHandler_),this.mouseOverHandler_=null),this.clickHandler_&&(e.browserEvents.unbind(this.clickHandler_),this.clickHandler_=null),this.mouseEnterHandler_&&(e.browserEvents.unbind(this.mouseEnterHandler_),this.mouseEnterHandler_=null),this.mouseLeaveHandler_&&(e.browserEvents.unbind(this.mouseLeaveHandler_),this.mouseLeaveHandler_=null),this.onKeyDownHandler_&&(e.browserEvents.unbind(this.onKeyDownHandler_),this.onKeyDownHandler_=null);for(var n,t=0;n=this.menuItems_[t];t++)n.dispose();this.element_=null},e.Menu.prototype.getMenuItem_=function(t){for(var n=this.getElement();t&&t!=n;){if(e.utils.dom.hasClass(t,"blocklyMenuItem"))for(var r,o=0;r=this.menuItems_[o];o++)if(r.getElement()==t)return r;t=t.parentElement}return null},e.Menu.prototype.setHighlighted=function(t){var n=this.highlightedItem_;n&&(n.setHighlighted(!1),this.highlightedItem_=null),t&&(t.setHighlighted(!0),this.highlightedItem_=t,n=this.getElement(),e.utils.style.scrollIntoContainerView(t.getElement(),n),e.utils.aria.setState(n,e.utils.aria.State.ACTIVEDESCENDANT,t.getId()))},e.Menu.prototype.highlightNext=function(){var t=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(t,1)},e.Menu.prototype.highlightPrevious=function(){var t=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(0>t?this.menuItems_.length:t,-1)},e.Menu.prototype.highlightFirst_=function(){this.highlightHelper_(-1,1)},e.Menu.prototype.highlightLast_=function(){this.highlightHelper_(this.menuItems_.length,-1)},e.Menu.prototype.highlightHelper_=function(t,n){t+=n;for(var o;o=this.menuItems_[t];){if(o.isEnabled()){this.setHighlighted(o);break}t+=n}},e.Menu.prototype.handleMouseOver_=function(t){(t=this.getMenuItem_(t.target))&&(t.isEnabled()?this.highlightedItem_!=t&&this.setHighlighted(t):this.setHighlighted(null))},e.Menu.prototype.handleClick_=function(t){var n=this.openingCoords;if(this.openingCoords=null,n&&"number"==typeof t.clientX){var o=new e.utils.Coordinate(t.clientX,t.clientY);if(1>e.utils.Coordinate.distance(n,o))return}(t=this.getMenuItem_(t.target))&&t.performAction()},e.Menu.prototype.handleMouseEnter_=function(t){this.focus()},e.Menu.prototype.handleMouseLeave_=function(t){this.getElement()&&(this.blur_(),this.setHighlighted(null))},e.Menu.prototype.handleKeyEvent_=function(t){if(this.menuItems_.length&&!(t.shiftKey||t.ctrlKey||t.metaKey||t.altKey)){var n=this.highlightedItem_;switch(t.keyCode){case e.utils.KeyCodes.ENTER:case e.utils.KeyCodes.SPACE:n&&n.performAction();break;case e.utils.KeyCodes.UP:this.highlightPrevious();break;case e.utils.KeyCodes.DOWN:this.highlightNext();break;case e.utils.KeyCodes.PAGE_UP:case e.utils.KeyCodes.HOME:this.highlightFirst_();break;case e.utils.KeyCodes.PAGE_DOWN:case e.utils.KeyCodes.END:this.highlightLast_();break;default:return}t.preventDefault(),t.stopPropagation()}},e.Menu.prototype.getSize=function(){var t=this.getElement(),n=e.utils.style.getSize(t);return n.height=t.scrollHeight,n},e.MenuItem=function(t,n){this.content_=t,this.value_=n,this.enabled_=!0,this.element_=null,this.rightToLeft_=!1,this.roleName_=null,this.highlight_=this.checked_=this.checkable_=!1,this.actionHandler_=null},e.MenuItem.prototype.createDom=function(){var t=document.createElement("div");t.id=e.utils.IdGenerator.getNextUniqueId(),this.element_=t,t.className="blocklyMenuItem goog-menuitem "+(this.enabled_?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked_?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight_?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft_?"blocklyMenuItemRtl goog-menuitem-rtl ":"");var n=document.createElement("div");if(n.className="blocklyMenuItemContent goog-menuitem-content",this.checkable_){var o=document.createElement("div");o.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",n.appendChild(o)}return o=this.content_,"string"==typeof this.content_&&(o=document.createTextNode(this.content_)),n.appendChild(o),t.appendChild(n),this.roleName_&&e.utils.aria.setRole(t,this.roleName_),e.utils.aria.setState(t,e.utils.aria.State.SELECTED,this.checkable_&&this.checked_||!1),e.utils.aria.setState(t,e.utils.aria.State.DISABLED,!this.enabled_),t},e.MenuItem.prototype.dispose=function(){this.element_=null},e.MenuItem.prototype.getElement=function(){return this.element_},e.MenuItem.prototype.getId=function(){return this.element_.id},e.MenuItem.prototype.getValue=function(){return this.value_},e.MenuItem.prototype.setRightToLeft=function(t){this.rightToLeft_=t},e.MenuItem.prototype.setRole=function(t){this.roleName_=t},e.MenuItem.prototype.setCheckable=function(t){this.checkable_=t},e.MenuItem.prototype.setChecked=function(t){this.checked_=t},e.MenuItem.prototype.setHighlighted=function(t){this.highlight_=t;var n=this.getElement();n&&this.isEnabled()&&(t?(e.utils.dom.addClass(n,"blocklyMenuItemHighlight"),e.utils.dom.addClass(n,"goog-menuitem-highlight")):(e.utils.dom.removeClass(n,"blocklyMenuItemHighlight"),e.utils.dom.removeClass(n,"goog-menuitem-highlight")))},e.MenuItem.prototype.isEnabled=function(){return this.enabled_},e.MenuItem.prototype.setEnabled=function(t){this.enabled_=t},e.MenuItem.prototype.performAction=function(){this.isEnabled()&&this.actionHandler_&&this.actionHandler_(this)},e.MenuItem.prototype.onAction=function(t,n){this.actionHandler_=t.bind(n)},e.ContextMenu={},e.ContextMenu.currentBlock=null,e.ContextMenu.menu_=null,e.ContextMenu.show=function(t,n,o){if(e.WidgetDiv.show(e.ContextMenu,o,e.ContextMenu.dispose),n.length){var r=e.ContextMenu.populate_(n,o);e.ContextMenu.menu_=r,e.ContextMenu.position_(r,t,o),setTimeout(function(){r.focus()},1),e.ContextMenu.currentBlock=null}else e.ContextMenu.hide()},e.ContextMenu.populate_=function(t,n){var o=new e.Menu;o.setRole(e.utils.aria.Role.MENU);for(var p,r=0;p=t[r];r++){var b=new e.MenuItem(p.text);b.setRightToLeft(n),b.setRole(e.utils.aria.Role.MENUITEM),o.addChild(b),b.setEnabled(p.enabled),p.enabled&&b.onAction(function(I){e.ContextMenu.hide(),this.callback(this.scope)},p)}return o},e.ContextMenu.position_=function(t,n,o){var r=e.utils.getViewportBBox();n=new e.utils.Rect(n.clientY+r.top,n.clientY+r.top,n.clientX+r.left,n.clientX+r.left),e.ContextMenu.createWidget_(t);var p=t.getSize();o&&(n.left+=p.width,n.right+=p.width,r.left+=p.width,r.right+=p.width),e.WidgetDiv.positionWithAnchor(r,n,p,o),t.focus()},e.ContextMenu.createWidget_=function(t){t.render(e.WidgetDiv.DIV);var n=t.getElement();e.utils.dom.addClass(n,"blocklyContextMenu"),e.browserEvents.conditionalBind(n,"contextmenu",null,e.utils.noEvent),t.focus()},e.ContextMenu.hide=function(){e.WidgetDiv.hideIfOwner(e.ContextMenu),e.ContextMenu.currentBlock=null},e.ContextMenu.dispose=function(){e.ContextMenu.menu_&&(e.ContextMenu.menu_.dispose(),e.ContextMenu.menu_=null)},e.ContextMenu.callbackFactory=function(t,n){return function(){e.Events.disable();try{var o=e.Xml.domToBlock(n,t.workspace),r=t.getRelativeToSurfaceXY();r.x=t.RTL?r.x-e.SNAP_RADIUS:r.x+e.SNAP_RADIUS,r.y+=2*e.SNAP_RADIUS,o.moveBy(r.x,r.y)}finally{e.Events.enable()}e.Events.isEnabled()&&!o.isShadow()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CREATE))(o)),o.select()}},e.ContextMenu.commentDeleteOption=function(t){return{text:e.Msg.REMOVE_COMMENT,enabled:!0,callback:function(){e.Events.setGroup(!0),t.dispose(!0,!0),e.Events.setGroup(!1)}}},e.ContextMenu.commentDuplicateOption=function(t){return{text:e.Msg.DUPLICATE_COMMENT,enabled:!0,callback:function(){e.duplicate(t)}}},e.ContextMenu.workspaceCommentOption=function(t,n){if(!e.WorkspaceCommentSvg)throw Error("Missing require for Blockly.WorkspaceCommentSvg");var o={enabled:!e.utils.userAgent.IE};return o.text=e.Msg.ADD_COMMENT,o.callback=function(){var r=new e.WorkspaceCommentSvg(t,e.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT,e.WorkspaceCommentSvg.DEFAULT_SIZE,e.WorkspaceCommentSvg.DEFAULT_SIZE),p=t.getInjectionDiv().getBoundingClientRect();p=new e.utils.Coordinate(n.clientX-p.left,n.clientY-p.top);var b=t.getOriginOffsetInPixels();(p=e.utils.Coordinate.difference(p,b)).scale(1/t.scale),r.moveBy(p.x,p.y),t.rendered&&(r.initSvg(),r.render(),r.select())},o},e.ContextMenuRegistry=function(){e.ContextMenuRegistry.registry=this,this.registry_=Object.create(null)},e.ContextMenuRegistry.ScopeType={BLOCK:"block",WORKSPACE:"workspace"},e.ContextMenuRegistry.registry=null,e.ContextMenuRegistry.prototype.register=function(t){if(this.registry_[t.id])throw Error('Menu item with ID "'+t.id+'" is already registered.');this.registry_[t.id]=t},e.ContextMenuRegistry.prototype.unregister=function(t){if(!this.registry_[t])throw Error('Menu item with ID "'+t+'" not found.');delete this.registry_[t]},e.ContextMenuRegistry.prototype.getItem=function(t){return this.registry_[t]||null},e.ContextMenuRegistry.prototype.getContextMenuOptions=function(t,n){var o=[],r=this.registry_;return Object.keys(r).forEach(function(p){if(t==(p=r[p]).scopeType){var b=p.preconditionFn(n);"hidden"!=b&&(p={text:"function"==typeof p.displayText?p.displayText(n):p.displayText,enabled:"enabled"==b,callback:p.callback,scope:n,weight:p.weight},o.push(p))}}),o.sort(function(p,b){return p.weight-b.weight}),o},new e.ContextMenuRegistry,e.Events.Selected=function(t,n,o){e.Events.Selected.superClass_.constructor.call(this,o),this.oldElementId=t,this.newElementId=n},e.utils.object.inherits(e.Events.Selected,e.Events.UiBase),e.Events.Selected.prototype.type=e.Events.SELECTED,e.Events.Selected.prototype.toJson=function(){var t=e.Events.Selected.superClass_.toJson.call(this);return t.oldElementId=this.oldElementId,t.newElementId=this.newElementId,t},e.Events.Selected.prototype.fromJson=function(t){e.Events.Selected.superClass_.fromJson.call(this,t),this.oldElementId=t.oldElementId,this.newElementId=t.newElementId},e.registry.register(e.registry.Type.EVENT,e.Events.SELECTED,e.Events.Selected),e.IBoundedElement=function(){},e.ICopyable=function(){},e.RenderedConnection=function(t,n){e.RenderedConnection.superClass_.constructor.call(this,t,n),this.db_=t.workspace.connectionDBList[n],this.dbOpposite_=t.workspace.connectionDBList[e.OPPOSITE_TYPE[n]],this.offsetInBlock_=new e.utils.Coordinate(0,0),this.trackedState_=e.RenderedConnection.TrackedState.WILL_TRACK,this.targetConnection=null},e.utils.object.inherits(e.RenderedConnection,e.Connection),e.RenderedConnection.TrackedState={WILL_TRACK:-1,UNTRACKED:0,TRACKED:1},e.RenderedConnection.prototype.dispose=function(){e.RenderedConnection.superClass_.dispose.call(this),this.trackedState_==e.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y)},e.RenderedConnection.prototype.getSourceBlock=function(){return e.RenderedConnection.superClass_.getSourceBlock.call(this)},e.RenderedConnection.prototype.targetBlock=function(){return e.RenderedConnection.superClass_.targetBlock.call(this)},e.RenderedConnection.prototype.distanceFrom=function(t){var n=this.x-t.x;return t=this.y-t.y,Math.sqrt(n*n+t*t)},e.RenderedConnection.prototype.bumpAwayFrom=function(t){if(!this.sourceBlock_.workspace.isDragging()){var n=this.sourceBlock_.getRootBlock();if(!n.isInFlyout){var o=!1;if(!n.isMovable()){if(!(n=t.getSourceBlock().getRootBlock()).isMovable())return;t=this,o=!0}var r=e.selected==n;r||n.addSelect();var p=t.x+e.SNAP_RADIUS+Math.floor(Math.random()*e.BUMP_RANDOMNESS)-this.x,b=t.y+e.SNAP_RADIUS+Math.floor(Math.random()*e.BUMP_RANDOMNESS)-this.y;o&&(b=-b),n.RTL&&(p=t.x-e.SNAP_RADIUS-Math.floor(Math.random()*e.BUMP_RANDOMNESS)-this.x),n.moveBy(p,b),r||n.removeSelect()}}},e.RenderedConnection.prototype.moveTo=function(t,n){this.trackedState_==e.RenderedConnection.TrackedState.WILL_TRACK?(this.db_.addConnection(this,n),this.trackedState_=e.RenderedConnection.TrackedState.TRACKED):this.trackedState_==e.RenderedConnection.TrackedState.TRACKED&&(this.db_.removeConnection(this,this.y),this.db_.addConnection(this,n)),this.x=t,this.y=n},e.RenderedConnection.prototype.moveBy=function(t,n){this.moveTo(this.x+t,this.y+n)},e.RenderedConnection.prototype.moveToOffset=function(t){this.moveTo(t.x+this.offsetInBlock_.x,t.y+this.offsetInBlock_.y)},e.RenderedConnection.prototype.setOffsetInBlock=function(t,n){this.offsetInBlock_.x=t,this.offsetInBlock_.y=n},e.RenderedConnection.prototype.getOffsetInBlock=function(){return this.offsetInBlock_},e.RenderedConnection.prototype.tighten=function(){var t=this.targetConnection.x-this.x,n=this.targetConnection.y-this.y;if(0!=t||0!=n){var o=this.targetBlock(),r=o.getSvgRoot();if(!r)throw Error("block is not rendered.");r=e.utils.getRelativeXY(r),o.getSvgRoot().setAttribute("transform","translate("+(r.x-t)+","+(r.y-n)+")"),o.moveConnections(-t,-n)}},e.RenderedConnection.prototype.closest=function(t,n){return this.dbOpposite_.searchForClosest(this,t,n)},e.RenderedConnection.prototype.highlight=function(){var t=this.sourceBlock_.workspace.getRenderer().getConstants(),n=t.shapeFor(this);n=this.type==e.connectionTypes.INPUT_VALUE||this.type==e.connectionTypes.OUTPUT_VALUE?e.utils.svgPaths.moveBy(0,-(t=t.TAB_OFFSET_FROM_TOP))+e.utils.svgPaths.lineOnAxis("v",t)+n.pathDown+e.utils.svgPaths.lineOnAxis("v",t):e.utils.svgPaths.moveBy(-(t=t.NOTCH_OFFSET_LEFT-t.CORNER_RADIUS),0)+e.utils.svgPaths.lineOnAxis("h",t)+n.pathLeft+e.utils.svgPaths.lineOnAxis("h",t),t=this.sourceBlock_.getRelativeToSurfaceXY(),e.Connection.highlightedPath_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyHighlightedConnectionPath",d:n,transform:"translate("+(this.x-t.x)+","+(this.y-t.y)+")"+(this.sourceBlock_.RTL?" scale(-1 1)":"")},this.sourceBlock_.getSvgRoot())},e.RenderedConnection.prototype.unhighlight=function(){e.utils.dom.removeNode(e.Connection.highlightedPath_),delete e.Connection.highlightedPath_},e.RenderedConnection.prototype.setTracking=function(t){t&&this.trackedState_==e.RenderedConnection.TrackedState.TRACKED||!t&&this.trackedState_==e.RenderedConnection.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(t?(this.db_.addConnection(this,this.y),this.trackedState_=e.RenderedConnection.TrackedState.TRACKED):(this.trackedState_==e.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y),this.trackedState_=e.RenderedConnection.TrackedState.UNTRACKED))},e.RenderedConnection.prototype.stopTrackingAll=function(){if(this.setTracking(!1),this.targetConnection)for(var t=this.targetBlock().getDescendants(!1),n=0;n<t.length;n++){for(var o=t[n],r=o.getConnections_(!0),p=0;p<r.length;p++)r[p].setTracking(!1);for(o=o.getIcons(),p=0;p<o.length;p++)o[p].setVisible(!1)}},e.RenderedConnection.prototype.startTrackingAll=function(){this.setTracking(!0);var t=[];if(this.type!=e.connectionTypes.INPUT_VALUE&&this.type!=e.connectionTypes.NEXT_STATEMENT)return t;var n=this.targetBlock();if(n){if(n.isCollapsed()){var o=[];n.outputConnection&&o.push(n.outputConnection),n.nextConnection&&o.push(n.nextConnection),n.previousConnection&&o.push(n.previousConnection)}else o=n.getConnections_(!0);for(var r=0;r<o.length;r++)t.push.apply(t,o[r].startTrackingAll());t.length||(t[0]=n)}return t},e.RenderedConnection.prototype.isConnectionAllowed=function(t,n){return e.utils.deprecation.warn("RenderedConnection.prototype.isConnectionAllowed","July 2020","July 2021","Blockly.Workspace.prototype.getConnectionChecker().canConnect"),!(this.distanceFrom(t)>n)&&e.RenderedConnection.superClass_.isConnectionAllowed.call(this,t)},e.RenderedConnection.prototype.onFailedConnect=function(t){var n=this.getSourceBlock();if(e.Events.recordUndo){var o=e.Events.getGroup();setTimeout(function(){n.isDisposed()||n.getParent()||(e.Events.setGroup(o),this.bumpAwayFrom(t),e.Events.setGroup(!1))}.bind(this),e.BUMP_DELAY)}},e.RenderedConnection.prototype.disconnectInternal_=function(t,n){e.RenderedConnection.superClass_.disconnectInternal_.call(this,t,n),t.rendered&&t.render(),n.rendered&&(n.updateDisabled(),n.render(),n.getSvgRoot().style.display="block")},e.RenderedConnection.prototype.respawnShadow_=function(){e.RenderedConnection.superClass_.respawnShadow_.call(this);var t=this.targetBlock();t&&(t.initSvg(),t.render(!1),(t=this.getSourceBlock()).rendered&&t.render())},e.RenderedConnection.prototype.neighbours=function(t){return this.dbOpposite_.getNeighbours(this,t)},e.RenderedConnection.prototype.connect_=function(t){e.RenderedConnection.superClass_.connect_.call(this,t);var n=this.getSourceBlock();t=t.getSourceBlock();var o=n.rendered,r=t.rendered;o&&n.updateDisabled(),r&&t.updateDisabled(),o&&r&&(this.type==e.connectionTypes.NEXT_STATEMENT||this.type==e.connectionTypes.PREVIOUS_STATEMENT?t.render():n.render()),(n=n.getInputWithBlock(t))&&(n=n.isVisible(),t.getSvgRoot().style.display=n?"block":"none")},e.RenderedConnection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||((this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug(),this.sourceBlock_.bumpNeighbours())},e.BasicCursor=function(){e.BasicCursor.superClass_.constructor.call(this)},e.utils.object.inherits(e.BasicCursor,e.Cursor),e.BasicCursor.registrationName="basicCursor",e.BasicCursor.prototype.next=function(){var t=this.getCurNode();return t?((t=this.getNextNode_(t,this.validNode_))&&this.setCurNode(t),t):null},e.BasicCursor.prototype.in=function(){return this.next()},e.BasicCursor.prototype.prev=function(){var t=this.getCurNode();return t?((t=this.getPreviousNode_(t,this.validNode_))&&this.setCurNode(t),t):null},e.BasicCursor.prototype.out=function(){return this.prev()},e.BasicCursor.prototype.getNextNode_=function(t,n){if(!t)return null;var o=t.in()||t.next();return n(o)?o:o?this.getNextNode_(o,n):n(t=this.findSiblingOrParent_(t.out()))?t:t?this.getNextNode_(t,n):null},e.BasicCursor.prototype.getPreviousNode_=function(t,n){if(!t)return null;var o=t.prev();return n(o=o?this.getRightMostChild_(o):t.out())?o:o?this.getPreviousNode_(o,n):null},e.BasicCursor.prototype.validNode_=function(t){var n=!1;return((t=t&&t.getType())==e.ASTNode.types.OUTPUT||t==e.ASTNode.types.INPUT||t==e.ASTNode.types.FIELD||t==e.ASTNode.types.NEXT||t==e.ASTNode.types.PREVIOUS||t==e.ASTNode.types.WORKSPACE)&&(n=!0),n},e.BasicCursor.prototype.findSiblingOrParent_=function(t){return t?t.next()||this.findSiblingOrParent_(t.out()):null},e.BasicCursor.prototype.getRightMostChild_=function(t){if(!t.in())return t;for(t=t.in();t.next();)t=t.next();return this.getRightMostChild_(t)},e.registry.register(e.registry.Type.CURSOR,e.BasicCursor.registrationName,e.BasicCursor),e.TabNavigateCursor=function(){e.TabNavigateCursor.superClass_.constructor.call(this)},e.utils.object.inherits(e.TabNavigateCursor,e.BasicCursor),e.TabNavigateCursor.prototype.validNode_=function(t){var n=!1,o=t&&t.getType();return t&&(t=t.getLocation(),o==e.ASTNode.types.FIELD&&t&&t.isTabNavigable()&&t.isClickable()&&(n=!0)),n},e.BlockSvg=function(t,n,o){this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},null),this.svgGroup_.translate_="",this.style=t.getRenderer().getConstants().getBlockStyle(null),this.pathObject=t.getRenderer().makePathObject(this.svgGroup_,this.style),this.renderIsInProgress_=this.rendered=!1,this.workspace=t,this.previousConnection=this.nextConnection=this.outputConnection=null,this.useDragSurface_=e.utils.is3dSupported()&&!!t.getBlockDragSurface();var r=this.pathObject.svgPath;r.tooltip=this,e.Tooltip.bindMouseEvents(r),e.BlockSvg.superClass_.constructor.call(this,t,n,o),this.svgGroup_.dataset?this.svgGroup_.dataset.id=this.id:e.utils.userAgent.IE&&this.svgGroup_.setAttribute("data-id",this.id)},e.utils.object.inherits(e.BlockSvg,e.Block),e.BlockSvg.prototype.height=0,e.BlockSvg.prototype.width=0,e.BlockSvg.prototype.warningTextDb_=null,e.BlockSvg.INLINE=-1,e.BlockSvg.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_",e.BlockSvg.prototype.initSvg=function(){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");for(var n,t=0;n=this.inputList[t];t++)n.init();for(n=this.getIcons(),t=0;t<n.length;t++)n[t].createIcon();this.applyColour(),this.pathObject.updateMovable(this.isMovable()),t=this.getSvgRoot(),this.workspace.options.readOnly||this.eventsInit_||!t||e.browserEvents.conditionalBind(t,"mousedown",this,this.onMouseDown_),this.eventsInit_=!0,t.parentNode||this.workspace.getCanvas().appendChild(t)},e.BlockSvg.prototype.getColourSecondary=function(){return this.style.colourSecondary},e.BlockSvg.prototype.getColourTertiary=function(){return this.style.colourTertiary},e.BlockSvg.prototype.getColourShadow=function(){return e.utils.deprecation.warn("BlockSvg.prototype.getColourShadow","January 2020","January 2021","style.colourSecondary"),this.getColourSecondary()},e.BlockSvg.prototype.getColourBorder=function(){return e.utils.deprecation.warn("BlockSvg.prototype.getColourBorder","January 2020","January 2021","style.colourTertiary"),{colourBorder:this.getColourTertiary(),colourLight:null,colourDark:null}},e.BlockSvg.prototype.select=function(){if(this.isShadow()&&this.getParent())this.getParent().select();else if(e.selected!=this){var t=null;if(e.selected){t=e.selected.id,e.Events.disable();try{e.selected.unselect()}finally{e.Events.enable()}}t=new(e.Events.get(e.Events.SELECTED))(t,this.id,this.workspace.id),e.Events.fire(t),e.selected=this,this.addSelect()}},e.BlockSvg.prototype.unselect=function(){if(e.selected==this){var t=new(e.Events.get(e.Events.SELECTED))(this.id,null,this.workspace.id);t.workspaceId=this.workspace.id,e.Events.fire(t),e.selected=null,this.removeSelect()}},e.BlockSvg.prototype.mutator=null,e.BlockSvg.prototype.comment=null,e.BlockSvg.prototype.commentIcon_=null,e.BlockSvg.prototype.warning=null,e.BlockSvg.prototype.getIcons=function(){var t=[];return this.mutator&&t.push(this.mutator),this.commentIcon_&&t.push(this.commentIcon_),this.warning&&t.push(this.warning),t},e.BlockSvg.prototype.setParent=function(t){var n=this.parentBlock_;if(t!=n){e.utils.dom.startTextWidthCache(),e.BlockSvg.superClass_.setParent.call(this,t),e.utils.dom.stopTextWidthCache();var o=this.getSvgRoot();if(!this.workspace.isClearing&&o){var r=this.getRelativeToSurfaceXY();t?(t.getSvgRoot().appendChild(o),t=this.getRelativeToSurfaceXY(),this.moveConnections(t.x-r.x,t.y-r.y)):n&&(this.workspace.getCanvas().appendChild(o),this.translate(r.x,r.y)),this.applyColour()}}},e.BlockSvg.prototype.getRelativeToSurfaceXY=function(){var t=0,n=0,o=this.useDragSurface_?this.workspace.getBlockDragSurface().getGroup():null,r=this.getSvgRoot();if(r)do{var p=e.utils.getRelativeXY(r);t+=p.x,n+=p.y,this.useDragSurface_&&this.workspace.getBlockDragSurface().getCurrentBlock()==r&&(t+=(p=this.workspace.getBlockDragSurface().getSurfaceTranslation()).x,n+=p.y),r=r.parentNode}while(r&&r!=this.workspace.getCanvas()&&r!=o);return new e.utils.Coordinate(t,n)},e.BlockSvg.prototype.moveBy=function(t,n){if(this.parentBlock_)throw Error("Block has parent.");var o=e.Events.isEnabled();if(o)var r=new(e.Events.get(e.Events.BLOCK_MOVE))(this);var p=this.getRelativeToSurfaceXY();this.translate(p.x+t,p.y+n),this.moveConnections(t,n),o&&(r.recordNew(),e.Events.fire(r)),this.workspace.resizeContents()},e.BlockSvg.prototype.translate=function(t,n){this.getSvgRoot().setAttribute("transform","translate("+t+","+n+")")},e.BlockSvg.prototype.moveToDragSurface=function(){if(this.useDragSurface_){var t=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.getBlockDragSurface().translateSurface(t.x,t.y),(t=this.getSvgRoot())&&this.workspace.getBlockDragSurface().setBlocksAndShow(t)}},e.BlockSvg.prototype.moveTo=function(t){var n=this.getRelativeToSurfaceXY();this.moveBy(t.x-n.x,t.y-n.y)},e.BlockSvg.prototype.moveOffDragSurface=function(t){this.useDragSurface_&&(this.translate(t.x,t.y),this.workspace.getBlockDragSurface().clearAndHide(this.workspace.getCanvas()))},e.BlockSvg.prototype.moveDuringDrag=function(t){this.useDragSurface_?this.workspace.getBlockDragSurface().translateSurface(t.x,t.y):(this.svgGroup_.translate_="translate("+t.x+","+t.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))},e.BlockSvg.prototype.clearTransformAttributes_=function(){this.getSvgRoot().removeAttribute("transform")},e.BlockSvg.prototype.snapToGrid=function(){if(this.workspace&&!this.workspace.isDragging()&&!this.getParent()&&!this.isInFlyout){var t=this.workspace.getGrid();if(t&&t.shouldSnap()){var n=t.getSpacing(),o=n/2,r=this.getRelativeToSurfaceXY();t=Math.round((r.x-o)/n)*n+o-r.x,n=Math.round((r.y-o)/n)*n+o-r.y,t=Math.round(t),n=Math.round(n),0==t&&0==n||this.moveBy(t,n)}}},e.BlockSvg.prototype.getBoundingRectangle=function(){var t=this.getRelativeToSurfaceXY(),n=this.getHeightWidth();if(this.RTL)var o=t.x-n.width,r=t.x;else o=t.x,r=t.x+n.width;return new e.utils.Rect(t.y,t.y+n.height,o,r)},e.BlockSvg.prototype.markDirty=function(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(var n,t=0;n=this.inputList[t];t++)n.markDirty()},e.BlockSvg.prototype.setCollapsed=function(t){this.collapsed_!=t&&(e.BlockSvg.superClass_.setCollapsed.call(this,t),t?this.rendered&&this.render():this.updateCollapsed_())},e.BlockSvg.prototype.updateCollapsed_=function(){for(var p,t=this.isCollapsed(),n=e.constants.COLLAPSED_INPUT_NAME,o=e.constants.COLLAPSED_FIELD_NAME,r=0;p=this.inputList[r];r++)p.name!=n&&p.setVisible(!t);if(t){for(p=this.getIcons(),r=0;t=p[r];r++)t.setVisible(!1);r=this.toString(e.COLLAPSE_CHARS),(p=this.getField(o))?p.setValue(r):(p=this.getInput(n)||this.appendDummyInput(n)).appendField(new e.FieldLabel(r),o)}else this.updateDisabled(),this.removeInput(n)},e.BlockSvg.prototype.tab=function(t,n){var o=new e.TabNavigateCursor;o.setCurNode(e.ASTNode.createFieldNode(t)),t=o.getCurNode(),n?o.next():o.prev(),(n=o.getCurNode())&&n!==t&&(n.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(n))},e.BlockSvg.prototype.onMouseDown_=function(t){var n=this.workspace&&this.workspace.getGesture(t);n&&n.handleBlockStart(t,this)},e.BlockSvg.prototype.showHelp=function(){var t="function"==typeof this.helpUrl?this.helpUrl():this.helpUrl;t&&window.open(t)},e.BlockSvg.prototype.generateContextMenu=function(){if(this.workspace.options.readOnly||!this.contextMenu)return null;var t=e.ContextMenuRegistry.registry.getContextMenuOptions(e.ContextMenuRegistry.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(t),t},e.BlockSvg.prototype.showContextMenu=function(t){var n=this.generateContextMenu();n&&n.length&&(e.ContextMenu.show(t,n,this.RTL),e.ContextMenu.currentBlock=this)},e.BlockSvg.prototype.moveConnections=function(t,n){if(this.rendered){for(var o=this.getConnections_(!1),r=0;r<o.length;r++)o[r].moveBy(t,n);for(o=this.getIcons(),r=0;r<o.length;r++)o[r].computeIconLocation();for(r=0;r<this.childBlocks_.length;r++)this.childBlocks_[r].moveConnections(t,n)}},e.BlockSvg.prototype.setDragging=function(t){if(t){var n=this.getSvgRoot();n.translate_="",n.skew_="",e.draggingConnections=e.draggingConnections.concat(this.getConnections_(!0)),e.utils.dom.addClass(this.svgGroup_,"blocklyDragging")}else e.draggingConnections=[],e.utils.dom.removeClass(this.svgGroup_,"blocklyDragging");for(n=0;n<this.childBlocks_.length;n++)this.childBlocks_[n].setDragging(t)},e.BlockSvg.prototype.setMovable=function(t){e.BlockSvg.superClass_.setMovable.call(this,t),this.pathObject.updateMovable(t)},e.BlockSvg.prototype.setEditable=function(t){e.BlockSvg.superClass_.setEditable.call(this,t),t=this.getIcons();for(var n=0;n<t.length;n++)t[n].updateEditable()},e.BlockSvg.prototype.setShadow=function(t){e.BlockSvg.superClass_.setShadow.call(this,t),this.applyColour()},e.BlockSvg.prototype.setInsertionMarker=function(t){this.isInsertionMarker_!=t&&(this.isInsertionMarker_=t)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))},e.BlockSvg.prototype.getSvgRoot=function(){return this.svgGroup_},e.BlockSvg.prototype.dispose=function(t,n){if(this.workspace){e.Tooltip.dispose(),e.Tooltip.unbindMouseEvents(this.pathObject.svgPath),e.utils.dom.startTextWidthCache();var o=this.workspace;if(e.selected==this&&(this.unselect(),this.workspace.cancelCurrentGesture()),e.ContextMenu.currentBlock==this&&e.ContextMenu.hide(),n&&this.rendered&&(this.unplug(t),e.blockAnimations.disposeUiEffect(this)),this.rendered=!1,this.warningTextDb_){for(var r in this.warningTextDb_)clearTimeout(this.warningTextDb_[r]);this.warningTextDb_=null}for(n=this.getIcons(),r=0;r<n.length;r++)n[r].dispose();e.BlockSvg.superClass_.dispose.call(this,!!t),e.utils.dom.removeNode(this.svgGroup_),o.resizeContents(),this.svgGroup_=null,e.utils.dom.stopTextWidthCache()}},e.BlockSvg.prototype.toCopyData=function(){if(this.isInsertionMarker_)return null;var t=e.Xml.blockToDom(this,!0);e.Xml.deleteNext(t);var n=this.getRelativeToSurfaceXY();return t.setAttribute("x",this.RTL?-n.x:n.x),t.setAttribute("y",n.y),{xml:t,source:this.workspace,typeCounts:e.utils.getBlockTypeCounts(this,!0)}},e.BlockSvg.prototype.applyColour=function(){this.pathObject.applyColour(this);for(var t=this.getIcons(),n=0;n<t.length;n++)t[n].applyColour();for(t=0;n=this.inputList[t];t++)for(var r,o=0;r=n.fieldRow[o];o++)r.applyColour()},e.BlockSvg.prototype.updateDisabled=function(){var t=this.getChildren(!1);if(this.applyColour(),!this.isCollapsed())for(var o,n=0;o=t[n];n++)o.rendered&&o.updateDisabled()},e.BlockSvg.prototype.getCommentIcon=function(){return this.commentIcon_},e.BlockSvg.prototype.setCommentText=function(t){if(!e.Comment)throw Error("Missing require for Blockly.Comment");this.commentModel.text!=t&&(e.BlockSvg.superClass_.setCommentText.call(this,t),!!this.commentIcon_==(t=null!=t)?this.commentIcon_.updateText():(t?this.comment=this.commentIcon_=new e.Comment(this):(this.commentIcon_.dispose(),this.comment=this.commentIcon_=null),this.rendered&&(this.render(),this.bumpNeighbours())))},e.BlockSvg.prototype.setWarningText=function(t,n){if(!e.Warning)throw Error("Missing require for Blockly.Warning");this.warningTextDb_||(this.warningTextDb_=Object.create(null));var o=n||"";if(o)this.warningTextDb_[o]&&(clearTimeout(this.warningTextDb_[o]),delete this.warningTextDb_[o]);else for(var r in this.warningTextDb_)clearTimeout(this.warningTextDb_[r]),delete this.warningTextDb_[r];if(this.workspace.isDragging()){var p=this;this.warningTextDb_[o]=setTimeout(function(){p.workspace&&(delete p.warningTextDb_[o],p.setWarningText(t,o))},100)}else{if(this.isInFlyout&&(t=null),n=!1,"string"==typeof t){r=this.getSurroundParent();for(var b=null;r;)r.isCollapsed()&&(b=r),r=r.getSurroundParent();b&&b.setWarningText(e.Msg.COLLAPSED_WARNINGS_WARNING,e.BlockSvg.COLLAPSED_WARNING_ID),this.warning||(this.warning=new e.Warning(this),n=!0),this.warning.setText(t,o)}else this.warning&&!o?(this.warning.dispose(),n=!0):this.warning&&(n=this.warning.getText(),this.warning.setText("",o),(r=this.warning.getText())||this.warning.dispose(),n=n!=r);n&&this.rendered&&(this.render(),this.bumpNeighbours())}},e.BlockSvg.prototype.setMutator=function(t){this.mutator&&this.mutator!==t&&this.mutator.dispose(),t&&(t.setBlock(this),this.mutator=t,t.createIcon()),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.setEnabled=function(t){this.isEnabled()!=t&&(e.BlockSvg.superClass_.setEnabled.call(this,t),this.rendered&&!this.getInheritedDisabled()&&this.updateDisabled())},e.BlockSvg.prototype.setHighlighted=function(t){this.rendered&&this.pathObject.updateHighlighted(t)},e.BlockSvg.prototype.addSelect=function(){this.pathObject.updateSelected(!0)},e.BlockSvg.prototype.removeSelect=function(){this.pathObject.updateSelected(!1)},e.BlockSvg.prototype.setDeleteStyle=function(t){this.pathObject.updateDraggingDelete(t)},e.BlockSvg.prototype.getColour=function(){return this.style.colourPrimary},e.BlockSvg.prototype.setColour=function(t){e.BlockSvg.superClass_.setColour.call(this,t),t=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(t.style),this.style=t.style,this.styleName_=t.name,this.applyColour()},e.BlockSvg.prototype.setStyle=function(t){var n=this.workspace.getRenderer().getConstants().getBlockStyle(t);if(this.styleName_=t,!n)throw Error("Invalid style name: "+t);this.hat=n.hat,this.pathObject.setStyle(n),this.colour_=n.colourPrimary,this.style=n,this.applyColour()},e.BlockSvg.prototype.bringToFront=function(){var t=this;do{var n=t.getSvgRoot(),o=n.parentNode,r=o.childNodes;r[r.length-1]!==n&&o.appendChild(n),t=t.getParent()}while(t)},e.BlockSvg.prototype.setPreviousStatement=function(t,n){e.BlockSvg.superClass_.setPreviousStatement.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.setNextStatement=function(t,n){e.BlockSvg.superClass_.setNextStatement.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.setOutput=function(t,n){e.BlockSvg.superClass_.setOutput.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.setInputsInline=function(t){e.BlockSvg.superClass_.setInputsInline.call(this,t),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.removeInput=function(t,n){return t=e.BlockSvg.superClass_.removeInput.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours()),t},e.BlockSvg.prototype.moveNumberedInputBefore=function(t,n){e.BlockSvg.superClass_.moveNumberedInputBefore.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.appendInput_=function(t,n){return t=e.BlockSvg.superClass_.appendInput_.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours()),t},e.BlockSvg.prototype.setConnectionTracking=function(t){if(this.previousConnection&&this.previousConnection.setTracking(t),this.outputConnection&&this.outputConnection.setTracking(t),this.nextConnection){this.nextConnection.setTracking(t);var n=this.nextConnection.targetBlock();n&&n.setConnectionTracking(t)}if(!this.collapsed_)for(n=0;n<this.inputList.length;n++){var o=this.inputList[n].connection;o&&(o.setTracking(t),(o=o.targetBlock())&&o.setConnectionTracking(t))}},e.BlockSvg.prototype.getConnections_=function(t){var n=[];if((t||this.rendered)&&(this.outputConnection&&n.push(this.outputConnection),this.previousConnection&&n.push(this.previousConnection),this.nextConnection&&n.push(this.nextConnection),t||!this.collapsed_)){t=0;for(var o;o=this.inputList[t];t++)o.connection&&n.push(o.connection)}return n},e.BlockSvg.prototype.lastConnectionInStack=function(t){return e.BlockSvg.superClass_.lastConnectionInStack.call(this,t)},e.BlockSvg.prototype.getMatchingConnection=function(t,n){return e.BlockSvg.superClass_.getMatchingConnection.call(this,t,n)},e.BlockSvg.prototype.makeConnection_=function(t){return new e.RenderedConnection(this,t)},e.BlockSvg.prototype.bumpNeighbours=function(){if(this.workspace&&!this.workspace.isDragging()){var t=this.getRootBlock();if(!t.isInFlyout)for(var r,n=this.getConnections_(!1),o=0;r=n[o];o++){r.isConnected()&&r.isSuperior()&&r.targetBlock().bumpNeighbours();for(var I,p=r.neighbours(e.SNAP_RADIUS),b=0;I=p[b];b++)r.isConnected()&&I.isConnected()||I.getSourceBlock().getRootBlock()!=t&&(r.isSuperior()?I.bumpAwayFrom(r):r.bumpAwayFrom(I))}}},e.BlockSvg.prototype.scheduleSnapAndBump=function(){var t=this,n=e.Events.getGroup();setTimeout(function(){e.Events.setGroup(n),t.snapToGrid(),e.Events.setGroup(!1)},e.BUMP_DELAY/2),setTimeout(function(){e.Events.setGroup(n),t.bumpNeighbours(),e.Events.setGroup(!1)},e.BUMP_DELAY)},e.BlockSvg.prototype.positionNearConnection=function(t,n){t.type!=e.connectionTypes.NEXT_STATEMENT&&t.type!=e.connectionTypes.INPUT_VALUE||this.moveBy(n.x-t.x,n.y-t.y)},e.BlockSvg.prototype.getParent=function(){return e.BlockSvg.superClass_.getParent.call(this)},e.BlockSvg.prototype.getRootBlock=function(){return e.BlockSvg.superClass_.getRootBlock.call(this)},e.BlockSvg.prototype.render=function(t){if(!this.renderIsInProgress_){this.renderIsInProgress_=!0;try{if(this.rendered=!0,e.utils.dom.startTextWidthCache(),this.isCollapsed()&&this.updateCollapsed_(),this.workspace.getRenderer().render(this),this.updateConnectionLocations_(),!1!==t){var n=this.getParent();n?n.render(!0):this.workspace.resizeContents()}e.utils.dom.stopTextWidthCache(),this.updateMarkers_()}finally{this.renderIsInProgress_=!1}}},e.BlockSvg.prototype.updateMarkers_=function(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(e.MarkerManager.LOCAL_MARKER).draw()},e.BlockSvg.prototype.updateConnectionLocations_=function(){var t=this.getRelativeToSurfaceXY();this.previousConnection&&this.previousConnection.moveToOffset(t),this.outputConnection&&this.outputConnection.moveToOffset(t);for(var n=0;n<this.inputList.length;n++){var o=this.inputList[n].connection;o&&(o.moveToOffset(t),o.isConnected()&&o.tighten())}this.nextConnection&&(this.nextConnection.moveToOffset(t),this.nextConnection.isConnected()&&this.nextConnection.tighten())},e.BlockSvg.prototype.setCursorSvg=function(t){this.pathObject.setCursorSvg(t)},e.BlockSvg.prototype.setMarkerSvg=function(t){this.pathObject.setMarkerSvg(t)},e.BlockSvg.prototype.getHeightWidth=function(){var t=this.height,n=this.width,o=this.getNextBlock();if(o){o=o.getHeightWidth();var r=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;t+=o.height-r,n=Math.max(n,o.width)}return{height:t,width:n}},e.BlockSvg.prototype.fadeForReplacement=function(t){this.pathObject.updateReplacementFade(t)},e.BlockSvg.prototype.highlightShapeForInput=function(t,n){this.pathObject.updateShapeForInputHighlight(t,n)},e.ConnectionDB=function(t){this.connections_=[],this.connectionChecker_=t},e.ConnectionDB.prototype.addConnection=function(t,n){n=this.calculateIndexForYPos_(n),this.connections_.splice(n,0,t)},e.ConnectionDB.prototype.findIndexOfConnection_=function(t,n){if(!this.connections_.length)return-1;var o=this.calculateIndexForYPos_(n);if(o>=this.connections_.length)return-1;n=t.y;for(var r=o;0<=r&&this.connections_[r].y==n;){if(this.connections_[r]==t)return r;r--}for(r=o;r<this.connections_.length&&this.connections_[r].y==n;){if(this.connections_[r]==t)return r;r++}return-1},e.ConnectionDB.prototype.calculateIndexForYPos_=function(t){if(!this.connections_.length)return 0;for(var n=0,o=this.connections_.length;n<o;){var r=Math.floor((n+o)/2);if(this.connections_[r].y<t)n=r+1;else{if(!(this.connections_[r].y>t)){n=r;break}o=r}}return n},e.ConnectionDB.prototype.removeConnection=function(t,n){if(-1==(t=this.findIndexOfConnection_(t,n)))throw Error("Unable to find connection in connectionDB.");this.connections_.splice(t,1)},e.ConnectionDB.prototype.getNeighbours=function(t,n){function o(Y){var X=p-r[Y].x,it=b-r[Y].y;return Math.sqrt(X*X+it*it)<=n&&k.push(r[Y]),it<n}var r=this.connections_,p=t.x,b=t.y;t=0;for(var I=r.length-2,x=I;t<x;)r[x].y<b?t=x:I=x,x=Math.floor((t+I)/2);var k=[];if(I=t=x,r.length){for(;0<=t&&o(t);)t--;do{I++}while(I<r.length&&o(I))}return k},e.ConnectionDB.prototype.isInYRange_=function(t,n,o){return Math.abs(this.connections_[t].y-n)<=o},e.ConnectionDB.prototype.searchForClosest=function(t,n,o){if(!this.connections_.length)return{connection:null,radius:n};var r=t.y,p=t.x;t.x=p+o.x,t.y=r+o.y;var b=this.calculateIndexForYPos_(t.y);o=null;for(var x,I=n,k=b-1;0<=k&&this.isInYRange_(k,t.y,n);)this.connectionChecker_.canConnect(t,x=this.connections_[k],!0,I)&&(o=x,I=x.distanceFrom(t)),k--;for(;b<this.connections_.length&&this.isInYRange_(b,t.y,n);)this.connectionChecker_.canConnect(t,x=this.connections_[b],!0,I)&&(o=x,I=x.distanceFrom(t)),b++;return t.x=p,t.y=r,{connection:o,radius:I}},e.ConnectionDB.init=function(t){var n=[];return n[e.connectionTypes.INPUT_VALUE]=new e.ConnectionDB(t),n[e.connectionTypes.OUTPUT_VALUE]=new e.ConnectionDB(t),n[e.connectionTypes.NEXT_STATEMENT]=new e.ConnectionDB(t),n[e.connectionTypes.PREVIOUS_STATEMENT]=new e.ConnectionDB(t),n},e.Events.ThemeChange=function(t,n){e.Events.ThemeChange.superClass_.constructor.call(this,n),this.themeName=t},e.utils.object.inherits(e.Events.ThemeChange,e.Events.UiBase),e.Events.ThemeChange.prototype.type=e.Events.THEME_CHANGE,e.Events.ThemeChange.prototype.toJson=function(){var t=e.Events.ThemeChange.superClass_.toJson.call(this);return t.themeName=this.themeName,t},e.Events.ThemeChange.prototype.fromJson=function(t){e.Events.ThemeChange.superClass_.fromJson.call(this,t),this.themeName=t.themeName},e.registry.register(e.registry.Type.EVENT,e.Events.THEME_CHANGE,e.Events.ThemeChange),e.Events.ViewportChange=function(t,n,o,r,p){e.Events.ViewportChange.superClass_.constructor.call(this,r),this.viewTop=t,this.viewLeft=n,this.scale=o,this.oldScale=p},e.utils.object.inherits(e.Events.ViewportChange,e.Events.UiBase),e.Events.ViewportChange.prototype.type=e.Events.VIEWPORT_CHANGE,e.Events.ViewportChange.prototype.toJson=function(){var t=e.Events.ViewportChange.superClass_.toJson.call(this);return t.viewTop=this.viewTop,t.viewLeft=this.viewLeft,t.scale=this.scale,t.oldScale=this.oldScale,t},e.Events.ViewportChange.prototype.fromJson=function(t){e.Events.ViewportChange.superClass_.fromJson.call(this,t),this.viewTop=t.viewTop,this.viewLeft=t.viewLeft,this.scale=t.scale,this.oldScale=t.oldScale},e.registry.register(e.registry.Type.EVENT,e.Events.VIEWPORT_CHANGE,e.Events.ViewportChange),e.IMetricsManager=function(){},e.MetricsManager=function(t){this.workspace_=t},e.MetricsManager.prototype.getDimensionsPx_=function(t){var n=0,o=0;return t&&(n=t.getWidth(),o=t.getHeight()),new e.utils.Size(n,o)},e.MetricsManager.prototype.getFlyoutMetrics=function(t){return{width:(t=this.getDimensionsPx_(this.workspace_.getFlyout(t))).width,height:t.height,position:this.workspace_.toolboxPosition}},e.MetricsManager.prototype.getToolboxMetrics=function(){var t=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:t.width,height:t.height,position:this.workspace_.toolboxPosition}},e.MetricsManager.prototype.getSvgMetrics=function(){return this.workspace_.getCachedParentSvgSize()},e.MetricsManager.prototype.getAbsoluteMetrics=function(){var t=0,n=this.getToolboxMetrics(),o=this.getFlyoutMetrics(!0),r=!!this.workspace_.getToolbox(),p=!!this.workspace_.getFlyout(!0),b=r?n.position:o.position,I=b==e.utils.toolbox.Position.LEFT;return b=b==e.utils.toolbox.Position.TOP,r&&I?t=n.width:p&&I&&(t=o.width),I=0,r&&b?I=n.height:p&&b&&(I=o.height),{top:I,left:t}},e.MetricsManager.prototype.getViewMetrics=function(t){t=t?this.workspace_.scale:1;var n=this.getSvgMetrics(),o=this.getToolboxMetrics(),r=this.getFlyoutMetrics(!0),p=this.workspace_.getToolbox()?o.position:r.position;return this.workspace_.getToolbox()?p==e.utils.toolbox.Position.TOP||p==e.utils.toolbox.Position.BOTTOM?n.height-=o.height:(p==e.utils.toolbox.Position.LEFT||p==e.utils.toolbox.Position.RIGHT)&&(n.width-=o.width):this.workspace_.getFlyout(!0)&&(p==e.utils.toolbox.Position.TOP||p==e.utils.toolbox.Position.BOTTOM?n.height-=r.height:(p==e.utils.toolbox.Position.LEFT||p==e.utils.toolbox.Position.RIGHT)&&(n.width-=r.width)),{height:n.height/t,width:n.width/t,top:-this.workspace_.scrollY/t,left:-this.workspace_.scrollX/t}},e.MetricsManager.prototype.getContentMetrics=function(t){t=t?1:this.workspace_.scale;var n=this.workspace_.getBlocksBoundingBox();return{height:(n.bottom-n.top)*t,width:(n.right-n.left)*t,top:n.top*t,left:n.left*t}},e.MetricsManager.prototype.hasFixedEdges=function(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()},e.MetricsManager.prototype.getComputedFixedEdges_=function(t){if(!this.hasFixedEdges())return{};var n=this.workspace_.isMovableHorizontally(),o=this.workspace_.isMovableVertically();t=t||this.getViewMetrics(!1);var r={};return o||(r.top=t.top,r.bottom=t.top+t.height),n||(r.left=t.left,r.right=t.left+t.width),r},e.MetricsManager.prototype.getPaddedContent_=function(t,n){var o=n.top+n.height,r=n.left+n.width,p=t.width,b=p/2,I=(t=t.height)/2;return{top:Math.min(n.top-I,o-t),bottom:Math.max(o+I,n.top+t),left:Math.min(n.left-b,r-p),right:Math.max(r+b,n.left+p)}},e.MetricsManager.prototype.getScrollMetrics=function(t,n,o){t=t?this.workspace_.scale:1,n=n||this.getViewMetrics(!1);var r=o||this.getContentMetrics();o=this.getComputedFixedEdges_(n),n=this.getPaddedContent_(n,r);var p=void 0!==o.left?o.left:n.left;return{top:(r=void 0!==o.top?o.top:n.top)/t,left:p/t,width:((void 0!==o.right?o.right:n.right)-p)/t,height:((void 0!==o.bottom?o.bottom:n.bottom)-r)/t}},e.MetricsManager.prototype.getUiMetrics=function(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}},e.MetricsManager.prototype.getMetrics=function(){var t=this.getToolboxMetrics(),n=this.getFlyoutMetrics(!0),o=this.getSvgMetrics(),r=this.getAbsoluteMetrics(),p=this.getViewMetrics(),b=this.getContentMetrics(),I=this.getScrollMetrics(!1,p,b);return{contentHeight:b.height,contentWidth:b.width,contentTop:b.top,contentLeft:b.left,scrollHeight:I.height,scrollWidth:I.width,scrollTop:I.top,scrollLeft:I.left,viewHeight:p.height,viewWidth:p.width,viewTop:p.top,viewLeft:p.left,absoluteTop:r.top,absoluteLeft:r.left,svgHeight:o.height,svgWidth:o.width,toolboxWidth:t.width,toolboxHeight:t.height,toolboxPosition:t.position,flyoutWidth:n.width,flyoutHeight:n.height}},e.registry.register(e.registry.Type.METRICS_MANAGER,e.registry.DEFAULT,e.MetricsManager),e.FlyoutMetricsManager=function(t,n){this.flyout_=n,e.FlyoutMetricsManager.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.FlyoutMetricsManager,e.MetricsManager),e.FlyoutMetricsManager.prototype.getBoundingBox_=function(){try{var t=this.workspace_.getCanvas().getBBox()}catch(n){t={height:0,y:0,width:0,x:0}}return t},e.FlyoutMetricsManager.prototype.getContentMetrics=function(t){var n=this.getBoundingBox_();return{height:n.height*(t=t?1:this.workspace_.scale),width:n.width*t,top:n.y*t,left:n.x*t}},e.FlyoutMetricsManager.prototype.getScrollMetrics=function(t,n,o){return{height:((n=o||this.getContentMetrics()).height+2*(o=this.flyout_.MARGIN*this.workspace_.scale))/(t=t?this.workspace_.scale:1),width:(n.width+n.left+o)/t,top:0,left:0}},e.ThemeManager=function(t,n){this.workspace_=t,this.theme_=n,this.subscribedWorkspaces_=[],this.componentDB_=Object.create(null)},e.ThemeManager.prototype.getTheme=function(){return this.theme_},e.ThemeManager.prototype.setTheme=function(t){var o,n=this.theme_;for(this.theme_=t,(t=this.workspace_.getInjectionDiv())&&(n&&e.utils.dom.removeClass(t,n.getClassName()),e.utils.dom.addClass(t,this.theme_.getClassName())),n=0;t=this.subscribedWorkspaces_[n];n++)t.refreshTheme();for(n=0,t=Object.keys(this.componentDB_);o=t[n];n++)for(var p,r=0;p=this.componentDB_[o][r];r++){var b=p.element;p=p.propertyName;var I=this.theme_&&this.theme_.getComponentStyle(o);b.style[p]=I||""}e.hideChaff()},e.ThemeManager.prototype.subscribeWorkspace=function(t){this.subscribedWorkspaces_.push(t)},e.ThemeManager.prototype.unsubscribeWorkspace=function(t){if(0>(t=this.subscribedWorkspaces_.indexOf(t)))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.");this.subscribedWorkspaces_.splice(t,1)},e.ThemeManager.prototype.subscribe=function(t,n,o){this.componentDB_[n]||(this.componentDB_[n]=[]),this.componentDB_[n].push({element:t,propertyName:o}),n=this.theme_&&this.theme_.getComponentStyle(n),t.style[o]=n||""},e.ThemeManager.prototype.unsubscribe=function(t){if(t)for(var r,n=Object.keys(this.componentDB_),o=0;r=n[o];o++){for(var p=this.componentDB_[r],b=p.length-1;0<=b;b--)p[b].element===t&&p.splice(b,1);this.componentDB_[r].length||delete this.componentDB_[r]}},e.ThemeManager.prototype.dispose=function(){this.componentDB_=this.subscribedWorkspaces_=this.theme_=this.owner_=null},e.TouchGesture=function(t,n){e.TouchGesture.superClass_.constructor.call(this,t,n),this.isMultiTouch_=!1,this.cachedPoints_=Object.create(null),this.startDistance_=this.previousScale_=0,this.isPinchZoomEnabled_=this.onStartWrapper_=null},e.utils.object.inherits(e.TouchGesture,e.Gesture),e.TouchGesture.ZOOM_IN_MULTIPLIER=5,e.TouchGesture.ZOOM_OUT_MULTIPLIER=6,e.TouchGesture.prototype.doStart=function(t){this.isPinchZoomEnabled_=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,e.TouchGesture.superClass_.doStart.call(this,t),!this.isEnding_&&e.Touch.isTouchEvent(t)&&this.handleTouchStart(t)},e.TouchGesture.prototype.bindMouseEvents=function(t){this.onStartWrapper_=e.browserEvents.conditionalBind(document,"mousedown",null,this.handleStart.bind(this),!0),this.onMoveWrapper_=e.browserEvents.conditionalBind(document,"mousemove",null,this.handleMove.bind(this),!0),this.onUpWrapper_=e.browserEvents.conditionalBind(document,"mouseup",null,this.handleUp.bind(this),!0),t.preventDefault(),t.stopPropagation()},e.TouchGesture.prototype.handleStart=function(t){!this.isDragging()&&e.Touch.isTouchEvent(t)&&(this.handleTouchStart(t),this.isMultiTouch()&&e.longStop_())},e.TouchGesture.prototype.handleMove=function(t){this.isDragging()?e.Touch.shouldHandleEvent(t)&&e.TouchGesture.superClass_.handleMove.call(this,t):this.isMultiTouch()?(e.Touch.isTouchEvent(t)&&this.handleTouchMove(t),e.longStop_()):e.TouchGesture.superClass_.handleMove.call(this,t)},e.TouchGesture.prototype.handleUp=function(t){e.Touch.isTouchEvent(t)&&!this.isDragging()&&this.handleTouchEnd(t),!this.isMultiTouch()||this.isDragging()?e.Touch.shouldHandleEvent(t)&&e.TouchGesture.superClass_.handleUp.call(this,t):(t.preventDefault(),t.stopPropagation(),this.dispose())},e.TouchGesture.prototype.isMultiTouch=function(){return this.isMultiTouch_},e.TouchGesture.prototype.dispose=function(){e.TouchGesture.superClass_.dispose.call(this),this.onStartWrapper_&&e.browserEvents.unbind(this.onStartWrapper_)},e.TouchGesture.prototype.handleTouchStart=function(t){var n=e.Touch.getTouchIdentifierFromEvent(t);this.cachedPoints_[n]=this.getTouchPoint(t),2==(n=Object.keys(this.cachedPoints_)).length&&(this.startDistance_=e.utils.Coordinate.distance(this.cachedPoints_[n[0]],this.cachedPoints_[n[1]]),this.isMultiTouch_=!0,t.preventDefault())},e.TouchGesture.prototype.handleTouchMove=function(t){var n=e.Touch.getTouchIdentifierFromEvent(t);this.cachedPoints_[n]=this.getTouchPoint(t),n=Object.keys(this.cachedPoints_),this.isPinchZoomEnabled_&&2===n.length?this.handlePinch_(t):e.TouchGesture.superClass_.handleMove.call(this,t)},e.TouchGesture.prototype.handlePinch_=function(t){var n=Object.keys(this.cachedPoints_);if(n=e.utils.Coordinate.distance(this.cachedPoints_[n[0]],this.cachedPoints_[n[1]])/this.startDistance_,0<this.previousScale_&&1/0>this.previousScale_){var o=n-this.previousScale_;o=0<o?o*e.TouchGesture.ZOOM_IN_MULTIPLIER:o*e.TouchGesture.ZOOM_OUT_MULTIPLIER;var r=this.startWorkspace_,p=e.utils.mouseToSvg(t,r.getParentSvg(),r.getInverseScreenCTM());r.zoom(p.x,p.y,o)}this.previousScale_=n,t.preventDefault()},e.TouchGesture.prototype.handleTouchEnd=function(t){t=e.Touch.getTouchIdentifierFromEvent(t),this.cachedPoints_[t]&&delete this.cachedPoints_[t],2>Object.keys(this.cachedPoints_).length&&(this.cachedPoints_=Object.create(null),this.previousScale_=0)},e.TouchGesture.prototype.getTouchPoint=function(t){return this.startWorkspace_?new e.utils.Coordinate(t.pageX?t.pageX:t.changedTouches[0].pageX,t.pageY?t.pageY:t.changedTouches[0].pageY):null},e.WorkspaceAudio=function(t){this.parentWorkspace_=t,this.SOUNDS_=Object.create(null)},e.WorkspaceAudio.prototype.lastSound_=null,e.WorkspaceAudio.prototype.dispose=function(){this.SOUNDS_=this.parentWorkspace_=null},e.WorkspaceAudio.prototype.load=function(t,n){if(t.length){try{var o=new e.utils.global.Audio}catch(x){return}for(var r,p=0;p<t.length;p++){var b=t[p],I=b.match(/\.(\w+)$/);if(I&&o.canPlayType("audio/"+I[1])){r=new e.utils.global.Audio(b);break}}r&&r.play&&(this.SOUNDS_[n]=r)}},e.WorkspaceAudio.prototype.preload=function(){for(var t in this.SOUNDS_){var n=this.SOUNDS_[t];n.volume=.01;var o=n.play();if(void 0!==o?o.then(n.pause).catch(function(){}):n.pause(),e.utils.userAgent.IPAD||e.utils.userAgent.IPHONE)break}},e.WorkspaceAudio.prototype.play=function(t,n){var o=this.SOUNDS_[t];o?(t=new Date,null!=this.lastSound_&&t-this.lastSound_<e.SOUND_LIMIT||(this.lastSound_=t,(o=e.utils.userAgent.IPAD||e.utils.userAgent.ANDROID?o:o.cloneNode()).volume=void 0===n?1:n,o.play())):this.parentWorkspace_&&this.parentWorkspace_.getAudioManager().play(t,n)},e.WorkspaceSvg=function(t,n,o){e.WorkspaceSvg.superClass_.constructor.call(this,t),this.metricsManager_=new(e.registry.getClassFromOptions(e.registry.Type.METRICS_MANAGER,t,!0))(this),this.getMetrics=t.getMetrics||this.metricsManager_.getMetrics.bind(this.metricsManager_),this.setMetrics=t.setMetrics||e.WorkspaceSvg.setTopLevelWorkspaceMetrics_,this.componentManager_=new e.ComponentManager,this.connectionDBList=e.ConnectionDB.init(this.connectionChecker),n&&(this.blockDragSurface_=n),o&&(this.workspaceDragSurface_=o),this.useWorkspaceDragSurface_=!!this.workspaceDragSurface_&&e.utils.is3dSupported(),this.highlightedBlocks_=[],this.audioManager_=new e.WorkspaceAudio(t.parentWorkspace),this.grid_=this.options.gridPattern?new e.Grid(this.options.gridPattern,t.gridOptions):null,this.markerManager_=new e.MarkerManager(this),this.toolboxCategoryCallbacks_=Object.create(null),this.flyoutButtonCallbacks_=Object.create(null),e.Variables&&e.Variables.flyoutCategory&&this.registerToolboxCategoryCallback(e.VARIABLE_CATEGORY_NAME,e.Variables.flyoutCategory),e.VariablesDynamic&&e.VariablesDynamic.flyoutCategory&&this.registerToolboxCategoryCallback(e.VARIABLE_DYNAMIC_CATEGORY_NAME,e.VariablesDynamic.flyoutCategory),e.Procedures&&e.Procedures.flyoutCategory&&(this.registerToolboxCategoryCallback(e.PROCEDURE_CATEGORY_NAME,e.Procedures.flyoutCategory),this.addChangeListener(e.Procedures.mutatorOpenListener)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new e.ThemeManager(this,this.options.theme||e.Themes.Classic),this.themeManager_.subscribeWorkspace(this),this.renderer_=e.blockRendering.init(this.options.renderer||"geras",this.getTheme(),this.options.rendererOverrides),this.cachedParentSvg_=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements_=[],this.dragTargetAreas_=[],this.cachedParentSvgSize_=new e.utils.Size(0,0)},e.utils.object.inherits(e.WorkspaceSvg,e.Workspace),e.WorkspaceSvg.prototype.resizeHandlerWrapper_=null,e.WorkspaceSvg.prototype.rendered=!0,e.WorkspaceSvg.prototype.isVisible_=!0,e.WorkspaceSvg.prototype.isFlyout=!1,e.WorkspaceSvg.prototype.isMutator=!1,e.WorkspaceSvg.prototype.resizesEnabled_=!0,e.WorkspaceSvg.prototype.scrollX=0,e.WorkspaceSvg.prototype.scrollY=0,e.WorkspaceSvg.prototype.startScrollX=0,e.WorkspaceSvg.prototype.startScrollY=0,e.WorkspaceSvg.prototype.dragDeltaXY_=null,e.WorkspaceSvg.prototype.scale=1,e.WorkspaceSvg.prototype.oldScale_=1,e.WorkspaceSvg.prototype.oldTop_=0,e.WorkspaceSvg.prototype.oldLeft_=0,e.WorkspaceSvg.prototype.trashcan=null,e.WorkspaceSvg.prototype.scrollbar=null,e.WorkspaceSvg.prototype.flyout_=null,e.WorkspaceSvg.prototype.toolbox_=null,e.WorkspaceSvg.prototype.currentGesture_=null,e.WorkspaceSvg.prototype.blockDragSurface_=null,e.WorkspaceSvg.prototype.workspaceDragSurface_=null,e.WorkspaceSvg.prototype.useWorkspaceDragSurface_=!1,e.WorkspaceSvg.prototype.isDragSurfaceActive_=!1,e.WorkspaceSvg.prototype.injectionDiv_=null,e.WorkspaceSvg.prototype.lastRecordedPageScroll_=null,e.WorkspaceSvg.prototype.targetWorkspace=null,e.WorkspaceSvg.prototype.inverseScreenCTM_=null,e.WorkspaceSvg.prototype.inverseScreenCTMDirty_=!0,e.WorkspaceSvg.prototype.getMarkerManager=function(){return this.markerManager_},e.WorkspaceSvg.prototype.getMetricsManager=function(){return this.metricsManager_},e.WorkspaceSvg.prototype.setMetricsManager=function(t){this.metricsManager_=t,this.getMetrics=this.metricsManager_.getMetrics.bind(this.metricsManager_)},e.WorkspaceSvg.prototype.getComponentManager=function(){return this.componentManager_},e.WorkspaceSvg.prototype.setCursorSvg=function(t){this.markerManager_.setCursorSvg(t)},e.WorkspaceSvg.prototype.setMarkerSvg=function(t){this.markerManager_.setMarkerSvg(t)},e.WorkspaceSvg.prototype.getMarker=function(t){return this.markerManager_?this.markerManager_.getMarker(t):null},e.WorkspaceSvg.prototype.getCursor=function(){return this.markerManager_?this.markerManager_.getCursor():null},e.WorkspaceSvg.prototype.getRenderer=function(){return this.renderer_},e.WorkspaceSvg.prototype.getThemeManager=function(){return this.themeManager_},e.WorkspaceSvg.prototype.getTheme=function(){return this.themeManager_.getTheme()},e.WorkspaceSvg.prototype.setTheme=function(t){t||(t=e.Themes.Classic),this.themeManager_.setTheme(t)},e.WorkspaceSvg.prototype.refreshTheme=function(){this.svgGroup_&&this.renderer_.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles_(this.getAllBlocks(!1).filter(function(n){return!!n.getStyleName()})),this.refreshToolboxSelection(),this.toolbox_&&this.toolbox_.refreshTheme(),this.isVisible()&&this.setVisible(!0);var t=new(e.Events.get(e.Events.THEME_CHANGE))(this.getTheme().name,this.id);e.Events.fire(t)},e.WorkspaceSvg.prototype.updateBlockStyles_=function(t){for(var o,n=0;o=t[n];n++){var r=o.getStyleName();r&&(o.setStyle(r),o.mutator&&o.mutator.updateBlockStyle())}},e.WorkspaceSvg.prototype.getInverseScreenCTM=function(){if(this.inverseScreenCTMDirty_){var t=this.getParentSvg().getScreenCTM();t&&(this.inverseScreenCTM_=t.inverse(),this.inverseScreenCTMDirty_=!1)}return this.inverseScreenCTM_},e.WorkspaceSvg.prototype.updateInverseScreenCTM=function(){this.inverseScreenCTMDirty_=!0},e.WorkspaceSvg.prototype.isVisible=function(){return this.isVisible_},e.WorkspaceSvg.prototype.getSvgXY=function(t){var n=0,o=0,r=1;(e.utils.dom.containsNode(this.getCanvas(),t)||e.utils.dom.containsNode(this.getBubbleCanvas(),t))&&(r=this.scale);do{var p=e.utils.getRelativeXY(t);(t==this.getCanvas()||t==this.getBubbleCanvas())&&(r=1),n+=p.x*r,o+=p.y*r,t=t.parentNode}while(t&&t!=this.getParentSvg());return new e.utils.Coordinate(n,o)},e.WorkspaceSvg.prototype.getCachedParentSvgSize=function(){var t=this.cachedParentSvgSize_;return new e.utils.Size(t.width,t.height)},e.WorkspaceSvg.prototype.getOriginOffsetInPixels=function(){return e.utils.getInjectionDivXY_(this.getCanvas())},e.WorkspaceSvg.prototype.getInjectionDiv=function(){if(!this.injectionDiv_)for(var t=this.svgGroup_;t;){if(-1!=(" "+(t.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")){this.injectionDiv_=t;break}t=t.parentNode}return this.injectionDiv_},e.WorkspaceSvg.prototype.getBlockCanvas=function(){return this.svgBlockCanvas_},e.WorkspaceSvg.prototype.setResizeHandlerWrapper=function(t){this.resizeHandlerWrapper_=t},e.WorkspaceSvg.prototype.createDom=function(t){return this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyWorkspace"},null),t&&(this.svgBackground_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{height:"100%",width:"100%",class:t},this.svgGroup_),"blocklyMainBackground"==t&&this.grid_?this.svgBackground_.style.fill="url(#"+this.grid_.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.svgBlockCanvas_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyBlockCanvas"},this.svgGroup_),this.svgBubbleCanvas_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyBubbleCanvas"},this.svgGroup_),this.isFlyout||(e.browserEvents.conditionalBind(this.svgGroup_,"mousedown",this,this.onMouseDown_,!1,!0),e.browserEvents.conditionalBind(this.svgGroup_,"wheel",this,this.onMouseWheel_)),this.options.hasCategories&&(this.toolbox_=new(e.registry.getClassFromOptions(e.registry.Type.TOOLBOX,this.options,!0))(this)),this.grid_&&this.grid_.update(this.scale),this.recordDragTargets(),(t=e.registry.getClassFromOptions(e.registry.Type.CURSOR,this.options))&&this.markerManager_.setCursor(new t),this.renderer_.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_},e.WorkspaceSvg.prototype.dispose=function(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&(e.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.svgBubbleCanvas_=this.svgBlockCanvas_=null,this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null),this.flyout_&&(this.flyout_.dispose(),this.flyout_=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&(this.zoomControls_.dispose(),this.zoomControls_=null),this.audioManager_&&(this.audioManager_.dispose(),this.audioManager_=null),this.grid_&&(this.grid_.dispose(),this.grid_=null),this.renderer_.dispose(),this.markerManager_&&(this.markerManager_.dispose(),this.markerManager_=null),e.WorkspaceSvg.superClass_.dispose.call(this),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||(this.themeManager_.dispose(),this.themeManager_=null)),this.flyoutButtonCallbacks_=this.toolboxCategoryCallbacks_=this.connectionDBList=null,!this.options.parentWorkspace){var t=this.getParentSvg();t&&t.parentNode&&e.utils.dom.removeNode(t.parentNode)}this.resizeHandlerWrapper_&&(e.browserEvents.unbind(this.resizeHandlerWrapper_),this.resizeHandlerWrapper_=null)},e.WorkspaceSvg.prototype.newBlock=function(t,n){return new e.BlockSvg(this,t,n)},e.WorkspaceSvg.prototype.addTrashcan=function(){if(!e.Trashcan)throw Error("Missing require for Blockly.Trashcan");this.trashcan=new e.Trashcan(this);var t=this.trashcan.createDom();this.svgGroup_.insertBefore(t,this.svgBlockCanvas_)},e.WorkspaceSvg.prototype.addZoomControls=function(){if(!e.ZoomControls)throw Error("Missing require for Blockly.ZoomControls");this.zoomControls_=new e.ZoomControls(this);var t=this.zoomControls_.createDom();this.svgGroup_.appendChild(t)},e.WorkspaceSvg.prototype.addFlyout=function(t){var n=new e.Options({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,move:{scrollbars:!0}});return n.toolboxPosition=this.options.toolboxPosition,this.flyout_=this.horizontalLayout?new(e.registry.getClassFromOptions(e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(n):new(e.registry.getClassFromOptions(e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(n),this.flyout_.autoClose=!1,this.flyout_.getWorkspace().setVisible(!0),this.flyout_.createDom(t)},e.WorkspaceSvg.prototype.getFlyout=function(t){return this.flyout_||t?this.flyout_:this.toolbox_?this.toolbox_.getFlyout():null},e.WorkspaceSvg.prototype.getToolbox=function(){return this.toolbox_},e.WorkspaceSvg.prototype.updateScreenCalculations_=function(){this.updateInverseScreenCTM(),this.recordDragTargets()},e.WorkspaceSvg.prototype.resizeContents=function(){this.resizesEnabled_&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())},e.WorkspaceSvg.prototype.resize=function(){this.toolbox_&&this.toolbox_.position(),this.flyout_&&this.flyout_.position();for(var p,t=this.componentManager_.getComponents(e.ComponentManager.Capability.POSITIONABLE,!0),n=this.getMetricsManager().getUiMetrics(),o=[],r=0;p=t[r];r++)p.position(n,o),(p=p.getBoundingRectangle())&&o.push(p);this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations_()},e.WorkspaceSvg.prototype.updateScreenCalculationsIfScrolled=function(){var t=e.utils.getDocumentScroll();e.utils.Coordinate.equals(this.lastRecordedPageScroll_,t)||(this.lastRecordedPageScroll_=t,this.updateScreenCalculations_())},e.WorkspaceSvg.prototype.getCanvas=function(){return this.svgBlockCanvas_},e.WorkspaceSvg.prototype.setCachedParentSvgSize=function(t,n){var o=this.getParentSvg();t&&(this.cachedParentSvgSize_.width=t,o.cachedWidth_=t),n&&(this.cachedParentSvgSize_.height=n,o.cachedHeight_=n)},e.WorkspaceSvg.prototype.getBubbleCanvas=function(){return this.svgBubbleCanvas_},e.WorkspaceSvg.prototype.getParentSvg=function(){if(!this.cachedParentSvg_)for(var t=this.svgGroup_;t;){if("svg"==t.tagName){this.cachedParentSvg_=t;break}t=t.parentNode}return this.cachedParentSvg_},e.WorkspaceSvg.prototype.maybeFireViewportChangeEvent=function(){if(e.Events.isEnabled()){var t=this.scale,n=-this.scrollY,o=-this.scrollX;if(!(t==this.oldScale_&&1>Math.abs(n-this.oldTop_)&&1>Math.abs(o-this.oldLeft_))){var r=new(e.Events.get(e.Events.VIEWPORT_CHANGE))(n,o,t,this.id,this.oldScale_);this.oldScale_=t,this.oldTop_=n,this.oldLeft_=o,e.Events.fire(r)}}},e.WorkspaceSvg.prototype.translate=function(t,n){if(this.useWorkspaceDragSurface_&&this.isDragSurfaceActive_)this.workspaceDragSurface_.translateSurface(t,n);else{var o="translate("+t+","+n+") scale("+this.scale+")";this.svgBlockCanvas_.setAttribute("transform",o),this.svgBubbleCanvas_.setAttribute("transform",o)}this.blockDragSurface_&&this.blockDragSurface_.translateAndScaleGroup(t,n,this.scale),this.grid_&&this.grid_.moveTo(t,n),this.maybeFireViewportChangeEvent()},e.WorkspaceSvg.prototype.resetDragSurface=function(){if(this.useWorkspaceDragSurface_){this.isDragSurfaceActive_=!1;var t=this.workspaceDragSurface_.getSurfaceTranslation();this.workspaceDragSurface_.clearAndHide(this.svgGroup_),this.svgBlockCanvas_.setAttribute("transform",t="translate("+t.x+","+t.y+") scale("+this.scale+")"),this.svgBubbleCanvas_.setAttribute("transform",t)}},e.WorkspaceSvg.prototype.setupDragSurface=function(){if(this.useWorkspaceDragSurface_&&!this.isDragSurfaceActive_){this.isDragSurfaceActive_=!0;var t=this.svgBlockCanvas_.previousSibling,n=parseInt(this.getParentSvg().getAttribute("width"),10),o=parseInt(this.getParentSvg().getAttribute("height"),10),r=e.utils.getRelativeXY(this.getCanvas());this.workspaceDragSurface_.setContentsAndShow(this.getCanvas(),this.getBubbleCanvas(),t,n,o,this.scale),this.workspaceDragSurface_.translateSurface(r.x,r.y)}},e.WorkspaceSvg.prototype.getBlockDragSurface=function(){return this.blockDragSurface_},e.WorkspaceSvg.prototype.getWidth=function(){var t=this.getMetrics();return t?t.viewWidth/this.scale:0},e.WorkspaceSvg.prototype.setVisible=function(t){if(this.isVisible_=t,this.svgGroup_)if(this.scrollbar&&this.scrollbar.setContainerVisible(t),this.getFlyout()&&this.getFlyout().setContainerVisible(t),this.getParentSvg().style.display=t?"block":"none",this.toolbox_&&this.toolbox_.setVisible(t),t){for(var n=(t=this.getAllBlocks(!1)).length-1;0<=n;n--)t[n].markDirty();this.render(),this.toolbox_&&this.toolbox_.position()}else e.hideChaff(!0)},e.WorkspaceSvg.prototype.render=function(){for(var t=this.getAllBlocks(!1),n=t.length-1;0<=n;n--)t[n].render(!1);if(this.currentGesture_)for(t=this.currentGesture_.getInsertionMarkers(),n=0;n<t.length;n++)t[n].render(!1);this.markerManager_.updateMarkers()},e.WorkspaceSvg.prototype.highlightBlock=function(t,n){if(void 0===n){for(var r,o=0;r=this.highlightedBlocks_[o];o++)r.setHighlighted(!1);this.highlightedBlocks_.length=0}(r=t?this.getBlockById(t):null)&&((t=void 0===n||n)?-1==this.highlightedBlocks_.indexOf(r)&&this.highlightedBlocks_.push(r):e.utils.arrayRemove(this.highlightedBlocks_,r),r.setHighlighted(t))},e.WorkspaceSvg.prototype.paste=function(t){!this.rendered||!t.tagName||t.getElementsByTagName("block").length>=this.remainingCapacity()||(this.currentGesture_&&this.currentGesture_.cancel(),"comment"==t.tagName.toLowerCase()?this.pasteWorkspaceComment_(t):this.pasteBlock_(t))},e.WorkspaceSvg.prototype.pasteBlock_=function(t){e.Events.disable();try{var n=e.Xml.domToBlock(t,this),o=parseInt(t.getAttribute("x"),10),r=parseInt(t.getAttribute("y"),10);if(!isNaN(o)&&!isNaN(r)){this.RTL&&(o=-o);do{t=!1;for(var I,p=this.getAllBlocks(!1),b=0;I=p[b];b++){var x=I.getRelativeToSurfaceXY();if(1>=Math.abs(o-x.x)&&1>=Math.abs(r-x.y)){t=!0;break}}if(!t){var Y,k=n.getConnections_(!1);for(b=0;Y=k[b];b++)if(Y.closest(e.SNAP_RADIUS,new e.utils.Coordinate(o,r)).connection){t=!0;break}}t&&(o=this.RTL?o-e.SNAP_RADIUS:o+e.SNAP_RADIUS,r+=2*e.SNAP_RADIUS)}while(t);n.moveBy(o,r)}}finally{e.Events.enable()}e.Events.isEnabled()&&!n.isShadow()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CREATE))(n)),n.select()},e.WorkspaceSvg.prototype.pasteWorkspaceComment_=function(t){e.Events.disable();try{var n=e.WorkspaceCommentSvg.fromXml(t,this),o=parseInt(t.getAttribute("x"),10),r=parseInt(t.getAttribute("y"),10);isNaN(o)||isNaN(r)||(this.RTL&&(o=-o),n.moveBy(o+50,r+50))}finally{e.Events.enable()}e.Events.isEnabled()&&e.WorkspaceComment.fireCreateEvent(n),n.select()},e.WorkspaceSvg.prototype.refreshToolboxSelection=function(){var t=this.isFlyout?this.targetWorkspace:this;t&&!t.currentGesture_&&t.toolbox_&&t.toolbox_.getFlyout()&&t.toolbox_.refreshSelection()},e.WorkspaceSvg.prototype.renameVariableById=function(t,n){e.WorkspaceSvg.superClass_.renameVariableById.call(this,t,n),this.refreshToolboxSelection()},e.WorkspaceSvg.prototype.deleteVariableById=function(t){e.WorkspaceSvg.superClass_.deleteVariableById.call(this,t),this.refreshToolboxSelection()},e.WorkspaceSvg.prototype.createVariable=function(t,n,o){return t=e.WorkspaceSvg.superClass_.createVariable.call(this,t,n,o),this.refreshToolboxSelection(),t},e.WorkspaceSvg.prototype.recordDeleteAreas=function(){e.utils.deprecation.warn("WorkspaceSvg.prototype.recordDeleteAreas","June 2021","June 2022","WorkspaceSvg.prototype.recordDragTargets"),this.recordDragTargets()},e.WorkspaceSvg.prototype.recordDragTargets=function(){var t=this.componentManager_.getComponents(e.ComponentManager.Capability.DRAG_TARGET,!0);this.dragTargetAreas_=[];for(var o,n=0;o=t[n];n++){var r=o.getClientRect();r&&this.dragTargetAreas_.push({component:o,clientRect:r})}},e.WorkspaceSvg.prototype.getDragTarget=function(t){for(var o,n=0;o=this.dragTargetAreas_[n];n++)if(o.clientRect.contains(t.clientX,t.clientY))return o.component;return null},e.WorkspaceSvg.prototype.onMouseDown_=function(t){var n=this.getGesture(t);n&&n.handleWsStart(t,this)},e.WorkspaceSvg.prototype.startDrag=function(t,n){(t=e.utils.mouseToSvg(t,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,t.y/=this.scale,this.dragDeltaXY_=e.utils.Coordinate.difference(n,t)},e.WorkspaceSvg.prototype.moveDrag=function(t){return(t=e.utils.mouseToSvg(t,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,t.y/=this.scale,e.utils.Coordinate.sum(this.dragDeltaXY_,t)},e.WorkspaceSvg.prototype.isDragging=function(){return null!=this.currentGesture_&&this.currentGesture_.isDragging()},e.WorkspaceSvg.prototype.isDraggable=function(){return this.options.moveOptions&&this.options.moveOptions.drag},e.WorkspaceSvg.prototype.isMovable=function(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch},e.WorkspaceSvg.prototype.isMovableHorizontally=function(){var t=!!this.scrollbar;return this.isMovable()&&(!t||t&&this.scrollbar.canScrollHorizontally())},e.WorkspaceSvg.prototype.isMovableVertically=function(){var t=!!this.scrollbar;return this.isMovable()&&(!t||t&&this.scrollbar.canScrollVertically())},e.WorkspaceSvg.prototype.onMouseWheel_=function(t){if(e.Gesture.inProgress())t.preventDefault(),t.stopPropagation();else{var n=this.options.zoomOptions&&this.options.zoomOptions.wheel,o=this.options.moveOptions&&this.options.moveOptions.wheel;if(n||o){var r=e.utils.getScrollDeltaPixels(t);!n||!t.ctrlKey&&o?(n=this.scrollX-r.x,o=this.scrollY-r.y,t.shiftKey&&!r.x&&(n=this.scrollX-r.y,o=this.scrollY),this.scroll(n,o)):(r=-r.y/50,n=e.utils.mouseToSvg(t,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(n.x,n.y,r)),t.preventDefault()}}},e.WorkspaceSvg.prototype.getBlocksBoundingBox=function(){var t=this.getTopBoundedElements();if(!t.length)return new e.utils.Rect(0,0,0,0);for(var n=t[0].getBoundingRectangle(),o=1;o<t.length;o++){var r=t[o];r.isInsertionMarker&&r.isInsertionMarker()||((r=r.getBoundingRectangle()).top<n.top&&(n.top=r.top),r.bottom>n.bottom&&(n.bottom=r.bottom),r.left<n.left&&(n.left=r.left),r.right>n.right&&(n.right=r.right))}return n},e.WorkspaceSvg.prototype.cleanUp=function(){this.setResizesEnabled(!1),e.Events.setGroup(!0);for(var r,t=this.getTopBlocks(!0),n=0,o=0;r=t[o];o++)if(r.isMovable()){var p=r.getRelativeToSurfaceXY();r.moveBy(-p.x,n-p.y),r.snapToGrid(),n=r.getRelativeToSurfaceXY().y+r.getHeightWidth().height+this.renderer_.getConstants().MIN_BLOCK_HEIGHT}e.Events.setGroup(!1),this.setResizesEnabled(!0)},e.WorkspaceSvg.prototype.showContextMenu=function(t){if(!this.options.readOnly&&!this.isFlyout){var n=e.ContextMenuRegistry.registry.getContextMenuOptions(e.ContextMenuRegistry.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(n,t),e.ContextMenu.show(t,n,this.RTL)}},e.WorkspaceSvg.prototype.updateToolbox=function(t){if(t=e.utils.toolbox.convertToolboxDefToJson(t)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(e.utils.toolbox.hasCategories(t)){if(!this.toolbox_)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=t,this.toolbox_.render(t)}else{if(!this.flyout_)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=t,this.flyout_.show(t)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")},e.WorkspaceSvg.prototype.markFocused=function(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(e.mainWorkspace=this,this.setBrowserFocus())},e.WorkspaceSvg.prototype.setBrowserFocus=function(){document.activeElement&&document.activeElement.blur&&document.activeElement.blur();try{this.getParentSvg().focus({preventScroll:!0})}catch(t){try{this.getParentSvg().parentNode.setActive()}catch(n){this.getParentSvg().parentNode.focus({preventScroll:!0})}}},e.WorkspaceSvg.prototype.zoom=function(t,n,o){o=Math.pow(this.options.zoomOptions.scaleSpeed,o);var r=this.scale*o;if(this.scale!=r){r>this.options.zoomOptions.maxScale?o=this.options.zoomOptions.maxScale/this.scale:r<this.options.zoomOptions.minScale&&(o=this.options.zoomOptions.minScale/this.scale);var p=this.getCanvas().getCTM(),b=this.getParentSvg().createSVGPoint();b.x=t,b.y=n,b=b.matrixTransform(p.inverse()),p=p.translate((t=b.x)*(1-o),(n=b.y)*(1-o)).scale(o),this.scrollX=p.e,this.scrollY=p.f,this.setScale(r)}},e.WorkspaceSvg.prototype.zoomCenter=function(t){var n=this.getMetrics();if(this.flyout_){var o=n.svgWidth?n.svgWidth/2:0;n=n.svgHeight?n.svgHeight/2:0}else o=n.viewWidth/2+n.absoluteLeft,n=n.viewHeight/2+n.absoluteTop;this.zoom(o,n,t)},e.WorkspaceSvg.prototype.zoomToFit=function(){if(this.isMovable()){var t=this.getMetrics(),n=t.viewWidth;t=t.viewHeight;var o=this.getBlocksBoundingBox(),r=o.right-o.left;if(o=o.bottom-o.top,r){this.flyout_&&(this.horizontalLayout?(t+=this.flyout_.getHeight(),o+=this.flyout_.getHeight()/this.scale):(n+=this.flyout_.getWidth(),r+=this.flyout_.getWidth()/this.scale)),n/=r,t/=o,e.Events.disable();try{this.setScale(Math.min(n,t)),this.scrollCenter()}finally{e.Events.enable()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},e.WorkspaceSvg.prototype.beginCanvasTransition=function(){e.utils.dom.addClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),e.utils.dom.addClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},e.WorkspaceSvg.prototype.endCanvasTransition=function(){e.utils.dom.removeClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),e.utils.dom.removeClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},e.WorkspaceSvg.prototype.scrollCenter=function(){if(this.isMovable()){var t=this.getMetrics(),n=(t.scrollWidth-t.viewWidth)/2,o=(t.scrollHeight-t.viewHeight)/2;this.scroll(n=-n-t.scrollLeft,o=-o-t.scrollTop)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},e.WorkspaceSvg.prototype.centerOnBlock=function(t){if(this.isMovable()){if(t=t?this.getBlockById(t):null){var n=t.getRelativeToSurfaceXY(),o=t.getHeightWidth(),r=this.scale;t=(n.x+(this.RTL?-1:1)*o.width/2)*r,n=(n.y+o.height/2)*r,o=this.getMetrics(),this.scroll(-(t-o.viewWidth/2),-(n-o.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},e.WorkspaceSvg.prototype.setScale=function(t){this.options.zoomOptions.maxScale&&t>this.options.zoomOptions.maxScale?t=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&t<this.options.zoomOptions.minScale&&(t=this.options.zoomOptions.minScale),this.scale=t,e.hideChaff(!1),this.flyout_&&(this.flyout_.reflow(),this.recordDragTargets()),this.grid_&&this.grid_.update(this.scale),t=this.getMetrics(),this.scrollX-=t.absoluteLeft,this.scrollY-=t.absoluteTop,t.viewLeft+=t.absoluteLeft,t.viewTop+=t.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout_?this.scrollbar.resizeView(t):this.scrollbar.resizeContent(t))},e.WorkspaceSvg.prototype.getScale=function(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale},e.WorkspaceSvg.prototype.scroll=function(t,n){e.hideChaff(!0);var o=this.getMetrics();t=Math.min(t,-o.scrollLeft),n=Math.min(n,-o.scrollTop);var r=o.scrollTop+Math.max(0,o.scrollHeight-o.viewHeight);t=Math.max(t,-(o.scrollLeft+Math.max(0,o.scrollWidth-o.viewWidth))),n=Math.max(n,-r),this.scrollX=t,this.scrollY=n,this.scrollbar&&this.scrollbar.set(-(t+o.scrollLeft),-(n+o.scrollTop),!1),this.translate(t+=o.absoluteLeft,n+=o.absoluteTop)},e.WorkspaceSvg.setTopLevelWorkspaceMetrics_=function(t){var n=this.getMetrics();"number"==typeof t.x&&(this.scrollX=-(n.scrollLeft+(n.scrollWidth-n.viewWidth)*t.x)),"number"==typeof t.y&&(this.scrollY=-(n.scrollTop+(n.scrollHeight-n.viewHeight)*t.y)),this.translate(this.scrollX+n.absoluteLeft,this.scrollY+n.absoluteTop)},e.WorkspaceSvg.prototype.getBlockById=function(t){return e.WorkspaceSvg.superClass_.getBlockById.call(this,t)},e.WorkspaceSvg.prototype.getTopBlocks=function(t){return e.WorkspaceSvg.superClass_.getTopBlocks.call(this,t)},e.WorkspaceSvg.prototype.addTopBlock=function(t){this.addTopBoundedElement(t),e.WorkspaceSvg.superClass_.addTopBlock.call(this,t)},e.WorkspaceSvg.prototype.removeTopBlock=function(t){this.removeTopBoundedElement(t),e.WorkspaceSvg.superClass_.removeTopBlock.call(this,t)},e.WorkspaceSvg.prototype.addTopComment=function(t){this.addTopBoundedElement(t),e.WorkspaceSvg.superClass_.addTopComment.call(this,t)},e.WorkspaceSvg.prototype.removeTopComment=function(t){this.removeTopBoundedElement(t),e.WorkspaceSvg.superClass_.removeTopComment.call(this,t)},e.WorkspaceSvg.prototype.addTopBoundedElement=function(t){this.topBoundedElements_.push(t)},e.WorkspaceSvg.prototype.removeTopBoundedElement=function(t){e.utils.arrayRemove(this.topBoundedElements_,t)},e.WorkspaceSvg.prototype.getTopBoundedElements=function(){return[].concat(this.topBoundedElements_)},e.WorkspaceSvg.prototype.setResizesEnabled=function(t){var n=!this.resizesEnabled_&&t;this.resizesEnabled_=t,n&&this.resizeContents()},e.WorkspaceSvg.prototype.clear=function(){this.setResizesEnabled(!1),e.WorkspaceSvg.superClass_.clear.call(this),this.topBoundedElements_=[],this.setResizesEnabled(!0)},e.WorkspaceSvg.prototype.registerButtonCallback=function(t,n){if("function"!=typeof n)throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks_[t]=n},e.WorkspaceSvg.prototype.getButtonCallback=function(t){return(t=this.flyoutButtonCallbacks_[t])?t:null},e.WorkspaceSvg.prototype.removeButtonCallback=function(t){this.flyoutButtonCallbacks_[t]=null},e.WorkspaceSvg.prototype.registerToolboxCategoryCallback=function(t,n){if("function"!=typeof n)throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks_[t]=n},e.WorkspaceSvg.prototype.getToolboxCategoryCallback=function(t){return this.toolboxCategoryCallbacks_[t]||null},e.WorkspaceSvg.prototype.removeToolboxCategoryCallback=function(t){this.toolboxCategoryCallbacks_[t]=null},e.WorkspaceSvg.prototype.getGesture=function(t){var n="mousedown"==t.type||"touchstart"==t.type||"pointerdown"==t.type,o=this.currentGesture_;return o?n&&o.hasStarted()?(console.warn("Tried to start the same gesture twice."),o.cancel(),null):o:n?this.currentGesture_=new e.TouchGesture(t,this):null},e.WorkspaceSvg.prototype.clearGesture=function(){this.currentGesture_=null},e.WorkspaceSvg.prototype.cancelCurrentGesture=function(){this.currentGesture_&&this.currentGesture_.cancel()},e.WorkspaceSvg.prototype.getAudioManager=function(){return this.audioManager_},e.WorkspaceSvg.prototype.getGrid=function(){return this.grid_},e.inject=function(t,n){if(e.checkBlockColourConstants(),"string"==typeof t&&(t=document.getElementById(t)||document.querySelector(t)),!t||!e.utils.dom.containsNode(document,t))throw Error("Error: container is not in current document.");n=new e.Options(n||{});var o=document.createElement("div");o.className="injectionDiv",o.tabIndex=0,e.utils.aria.setState(o,e.utils.aria.State.LABEL,e.Msg.WORKSPACE_ARIA_LABEL),t.appendChild(o),t=e.createDom_(o,n);var r=new e.BlockDragSurfaceSvg(o),p=new e.WorkspaceDragSurfaceSvg(o),b=e.createMainWorkspace_(t,n,r,p);return e.init_(b),e.mainWorkspace=b,e.svgResize(b),o.addEventListener("focusin",function(){e.mainWorkspace=b}),b},e.createDom_=function(t,n){t.setAttribute("dir","LTR"),e.Css.inject(n.hasCss,n.pathToMedia),t=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{xmlns:e.utils.dom.SVG_NS,"xmlns:html":e.utils.dom.HTML_NS,"xmlns:xlink":e.utils.dom.XLINK_NS,version:"1.1",class:"blocklySvg",tabindex:"0"},t);var o=e.utils.dom.createSvgElement(e.utils.Svg.DEFS,{},t),r=String(Math.random()).substring(2);return n.gridPattern=e.Grid.createDom(r,n.gridOptions,o),t},e.createMainWorkspace_=function(t,n,o,r){return n.parentWorkspace=null,(n=new e.WorkspaceSvg(n,o,r)).scale=(o=n.options).zoomOptions.startScale,t.appendChild(n.createDom("blocklyMainBackground")),e.utils.dom.addClass(n.getInjectionDiv(),n.getRenderer().getClassName()),e.utils.dom.addClass(n.getInjectionDiv(),n.getTheme().getClassName()),!o.hasCategories&&o.languageTree&&(r=n.addFlyout(e.utils.Svg.SVG),e.utils.dom.insertAfter(r,t)),o.hasTrashcan&&n.addTrashcan(),o.zoomOptions&&o.zoomOptions.controls&&n.addZoomControls(),n.getThemeManager().subscribe(t,"workspaceBackgroundColour","background-color"),n.translate(0,0),n.addChangeListener(e.bumpIntoBoundsHandler_(n)),e.svgResize(n),e.WidgetDiv.createDom(),e.DropDownDiv.createDom(),e.Tooltip.createDom(),n},e.extractObjectFromEvent_=function(t,n){var o=null;switch(n.type){case e.Events.BLOCK_CREATE:case e.Events.BLOCK_MOVE:(o=t.getBlockById(n.blockId))&&(o=o.getRootBlock());break;case e.Events.COMMENT_CREATE:case e.Events.COMMENT_MOVE:o=t.getCommentById(n.commentId)}return o},e.bumpTopObjectsIntoBounds_=function(t){var n=t.getMetricsManager();if(n.hasFixedEdges()&&!t.isDragging()){n=n.getScrollMetrics(!0);for(var p,o=t.getTopBoundedElements(),r=0;p=o[r];r++)e.bumpObjectIntoBounds_(t,n,p)}},e.bumpIntoBoundsHandler_=function(t){return function(n){var o=t.getMetricsManager();if(o.hasFixedEdges()&&!t.isDragging())if(-1!==e.Events.BUMP_EVENTS.indexOf(n.type)){o=o.getScrollMetrics(!0);var r=e.extractObjectFromEvent_(t,n);if(r){var p=e.Events.getGroup();e.Events.setGroup(n.group),e.bumpObjectIntoBounds_(t,o,r)&&!n.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),null!==p&&e.Events.setGroup(p)}}else n.type===e.Events.VIEWPORT_CHANGE&&n.scale>n.oldScale&&e.bumpTopObjectsIntoBounds_(t)}},e.bumpObjectIntoBounds_=function(t,n,o){var r=o.getBoundingRectangle(),p=r.right-r.left,b=e.utils.math.clamp(n.top,r.top,n.top+n.height-(r.bottom-r.top))-r.top,I=n.left;return n=n.left+n.width-p,t.RTL?I=Math.min(n,I):n=Math.max(I,n),!(!(t=e.utils.math.clamp(I,r.left,n)-r.left)&&!b||(o.moveBy(t,b),0))},e.init_=function(t){var n=t.options,o=t.getParentSvg();if(e.browserEvents.conditionalBind(o.parentNode,"contextmenu",null,function(p){e.utils.isTargetInput(p)||p.preventDefault()}),o=e.browserEvents.conditionalBind(window,"resize",null,function(){e.hideChaff(!0),e.svgResize(t),e.bumpTopObjectsIntoBounds_(t)}),t.setResizeHandlerWrapper(o),e.inject.bindDocumentEvents_(),n.languageTree){o=t.getToolbox();var r=t.getFlyout(!0);o?o.init():r&&(r.init(t),r.show(n.languageTree),"function"==typeof r.scrollToStart&&r.scrollToStart())}n.hasTrashcan&&t.trashcan.init(),n.zoomOptions&&n.zoomOptions.controls&&t.zoomControls_.init(),n.moveOptions&&n.moveOptions.scrollbars?(t.scrollbar=new e.ScrollbarPair(t,!0===n.moveOptions.scrollbars||!!n.moveOptions.scrollbars.horizontal,!0===n.moveOptions.scrollbars||!!n.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),t.scrollbar.resize()):t.setMetrics({x:.5,y:.5}),n.hasSounds&&e.inject.loadSounds_(n.pathToMedia,t)},e.inject.bindDocumentEvents_=function(){e.documentEventsBound_||(e.browserEvents.conditionalBind(document,"scroll",null,function(){for(var o,t=e.Workspace.getAll(),n=0;o=t[n];n++)o.updateInverseScreenCTM&&o.updateInverseScreenCTM()}),e.browserEvents.conditionalBind(document,"keydown",null,e.onKeyDown),e.browserEvents.bind(document,"touchend",null,e.longStop_),e.browserEvents.bind(document,"touchcancel",null,e.longStop_),e.utils.userAgent.IPAD&&e.browserEvents.conditionalBind(window,"orientationchange",document,function(){e.svgResize(e.getMainWorkspace())})),e.documentEventsBound_=!0},e.inject.loadSounds_=function(t,n){var o=n.getAudioManager();o.load([t+"click.mp3",t+"click.wav",t+"click.ogg"],"click"),o.load([t+"disconnect.wav",t+"disconnect.mp3",t+"disconnect.ogg"],"disconnect"),o.load([t+"delete.mp3",t+"delete.ogg",t+"delete.wav"],"delete");var r=[];t=function(){for(;r.length;)e.browserEvents.unbind(r.pop());o.preload()},r.push(e.browserEvents.conditionalBind(document,"mousemove",null,t,!0)),r.push(e.browserEvents.conditionalBind(document,"touchstart",null,t,!0))},e.Names=function(t,n){if(this.variablePrefix_=n||"",this.reservedDict_=Object.create(null),t)for(t=t.split(","),n=0;n<t.length;n++)this.reservedDict_[t[n]]=!0;this.reset()},e.Names.DEVELOPER_VARIABLE_TYPE="DEVELOPER_VARIABLE",e.Names.prototype.reset=function(){this.db_=Object.create(null),this.dbReverse_=Object.create(null),this.variableMap_=null},e.Names.prototype.setVariableMap=function(t){this.variableMap_=t},e.Names.prototype.getNameForUserVariable_=function(t){return this.variableMap_?(t=this.variableMap_.getVariableById(t))?t.name:null:(console.warn("Deprecated call to Blockly.Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:\nBlockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());"),null)},e.Names.prototype.populateVariables=function(t){t=e.Variables.allUsedVarModels(t);for(var n=0;n<t.length;n++)this.getName(t[n].getId(),e.VARIABLE_CATEGORY_NAME)},e.Names.prototype.populateProcedures=function(t){t=(t=e.Procedures.allProcedures(t))[0].concat(t[1]);for(var n=0;n<t.length;n++)this.getName(t[n][0],e.PROCEDURE_CATEGORY_NAME)},e.Names.prototype.getName=function(t,n){var o=t;n==e.VARIABLE_CATEGORY_NAME&&(t=this.getNameForUserVariable_(t))&&(o=t),t=o.toLowerCase();var r=n==e.VARIABLE_CATEGORY_NAME||n==e.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"";n in this.db_||(this.db_[n]=Object.create(null));var p=this.db_[n];return t in p?r+p[t]:(n=this.getDistinctName(o,n),p[t]=n.substr(r.length),n)},e.Names.prototype.getUserNames=function(t){return Object.keys(this.db_[t]||{})},e.Names.prototype.getDistinctName=function(t,n){t=this.safeName_(t);for(var o="";this.dbReverse_[t+o]||t+o in this.reservedDict_;)o=o?o+1:2;return this.dbReverse_[t+=o]=!0,(n==e.VARIABLE_CATEGORY_NAME||n==e.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"")+t},e.Names.prototype.safeName_=function(t){return t?(t=encodeURI(t.replace(/ /g,"_")).replace(/[^\w]/g,"_"),-1!="0123456789".indexOf(t[0])&&(t="my_"+t)):t=e.Msg.UNNAMED_KEY||"unnamed",t},e.Names.equals=function(t,n){return t.toLowerCase()==n.toLowerCase()},e.Procedures={},e.Procedures.NAME_TYPE=e.PROCEDURE_CATEGORY_NAME,e.Procedures.DEFAULT_ARG="x",e.Procedures.allProcedures=function(t){var n=t.getBlocksByType("procedures_defnoreturn",!1).map(function(o){return o.getProcedureDef()});return t=t.getBlocksByType("procedures_defreturn",!1).map(function(o){return o.getProcedureDef()}),n.sort(e.Procedures.procTupleComparator_),t.sort(e.Procedures.procTupleComparator_),[n,t]},e.Procedures.procTupleComparator_=function(t,n){return t[0].localeCompare(n[0],void 0,{sensitivity:"base"})},e.Procedures.findLegalName=function(t,n){if(n.isInFlyout)return t;for(t=t||e.Msg.UNNAMED_KEY||"unnamed";!e.Procedures.isLegalName_(t,n.workspace,n);){var o=t.match(/^(.*?)(\d+)$/);t=o?o[1]+(parseInt(o[2],10)+1):t+"2"}return t},e.Procedures.isLegalName_=function(t,n,o){return!e.Procedures.isNameUsed(t,n,o)},e.Procedures.isNameUsed=function(t,n,o){n=n.getAllBlocks(!1);for(var r=0;r<n.length;r++)if(n[r]!=o&&n[r].getProcedureDef){var p=n[r].getProcedureDef();if(e.Names.equals(p[0],t))return!0}return!1},e.Procedures.rename=function(t){t=t.trim();var n=e.Procedures.findLegalName(t,this.getSourceBlock()),o=this.getValue();if(o!=t&&o!=n){t=this.getSourceBlock().workspace.getAllBlocks(!1);for(var r=0;r<t.length;r++)t[r].renameProcedure&&t[r].renameProcedure(o,n)}return n},e.Procedures.flyoutCategory=function(t){function n(b,I){for(var x=0;x<b.length;x++){var k=b[x][0],Y=b[x][1],X=e.utils.xml.createElement("block");X.setAttribute("type",I),X.setAttribute("gap",16);var it=e.utils.xml.createElement("mutation");for(it.setAttribute("name",k),X.appendChild(it),k=0;k<Y.length;k++){var rt=e.utils.xml.createElement("arg");rt.setAttribute("name",Y[k]),it.appendChild(rt)}o.push(X)}}var o=[];if(e.Blocks.procedures_defnoreturn){var r=e.utils.xml.createElement("block");r.setAttribute("type","procedures_defnoreturn"),r.setAttribute("gap",16);var p=e.utils.xml.createElement("field");p.setAttribute("name","NAME"),p.appendChild(e.utils.xml.createTextNode(e.Msg.PROCEDURES_DEFNORETURN_PROCEDURE)),r.appendChild(p),o.push(r)}return e.Blocks.procedures_defreturn&&((r=e.utils.xml.createElement("block")).setAttribute("type","procedures_defreturn"),r.setAttribute("gap",16),(p=e.utils.xml.createElement("field")).setAttribute("name","NAME"),p.appendChild(e.utils.xml.createTextNode(e.Msg.PROCEDURES_DEFRETURN_PROCEDURE)),r.appendChild(p),o.push(r)),e.Blocks.procedures_ifreturn&&((r=e.utils.xml.createElement("block")).setAttribute("type","procedures_ifreturn"),r.setAttribute("gap",16),o.push(r)),o.length&&o[o.length-1].setAttribute("gap",24),n((t=e.Procedures.allProcedures(t))[0],"procedures_callnoreturn"),n(t[1],"procedures_callreturn"),o},e.Procedures.updateMutatorFlyout_=function(t){for(var p,n=[],o=t.getBlocksByType("procedures_mutatorarg",!1),r=0;p=o[r];r++)n.push(p.getFieldValue("NAME"));o=e.utils.xml.createElement("xml"),(r=e.utils.xml.createElement("block")).setAttribute("type","procedures_mutatorarg"),(p=e.utils.xml.createElement("field")).setAttribute("name","NAME"),n=e.Variables.generateUniqueNameFromOptions(e.Procedures.DEFAULT_ARG,n),n=e.utils.xml.createTextNode(n),p.appendChild(n),r.appendChild(p),o.appendChild(r),t.updateToolbox(o)},e.Procedures.mutatorOpenListener=function(t){if(t.type==e.Events.BUBBLE_OPEN&&"mutator"===t.bubbleType&&t.isOpen){var n=(t=e.Workspace.getById(t.workspaceId).getBlockById(t.blockId)).type;("procedures_defnoreturn"==n||"procedures_defreturn"==n)&&(t=t.mutator.getWorkspace(),e.Procedures.updateMutatorFlyout_(t),t.addChangeListener(e.Procedures.mutatorChangeListener_))}},e.Procedures.mutatorChangeListener_=function(t){(t.type==e.Events.BLOCK_CREATE||t.type==e.Events.BLOCK_DELETE||t.type==e.Events.BLOCK_CHANGE)&&(t=e.Workspace.getById(t.workspaceId),e.Procedures.updateMutatorFlyout_(t))},e.Procedures.getCallers=function(t,n){var o=[];n=n.getAllBlocks(!1);for(var r=0;r<n.length;r++)if(n[r].getProcedureCall){var p=n[r].getProcedureCall();p&&e.Names.equals(p,t)&&o.push(n[r])}return o},e.Procedures.mutateCallers=function(t){var p,n=e.Events.recordUndo,o=t.getProcedureDef()[0],r=t.mutationToDom(!0);for(t=e.Procedures.getCallers(o,t.workspace),o=0;p=t[o];o++){var b=p.mutationToDom();b=b&&e.Xml.domToText(b),p.domToMutation(r);var I=p.mutationToDom();b!=(I=I&&e.Xml.domToText(I))&&(e.Events.recordUndo=!1,e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(p,"mutation",null,b,I)),e.Events.recordUndo=n)}},e.Procedures.getDefinition=function(t,n){n=n.getAllBlocks(!1);for(var o=0;o<n.length;o++)if(n[o].getProcedureDef){var r=n[o].getProcedureDef();if(r&&e.Names.equals(r[0],t))return n[o]}return null},e.ShortcutRegistry=function(){e.ShortcutRegistry.registry=this,this.registry_=Object.create(null),this.keyMap_=Object.create(null)},e.ShortcutRegistry.modifierKeys={Shift:e.utils.KeyCodes.SHIFT,Control:e.utils.KeyCodes.CTRL,Alt:e.utils.KeyCodes.ALT,Meta:e.utils.KeyCodes.META},e.ShortcutRegistry.prototype.register=function(t,n){if(this.registry_[t.name]&&!n)throw Error('Shortcut with name "'+t.name+'" already exists.');this.registry_[t.name]=t},e.ShortcutRegistry.prototype.unregister=function(t){return this.registry_[t]?(this.removeAllKeyMappings(t),delete this.registry_[t],!0):(console.warn('Keyboard shortcut with name "'+t+'" not found.'),!1)},e.ShortcutRegistry.prototype.addKeyMapping=function(t,n,o){t=String(t);var r=this.keyMap_[t];if(r&&!o)throw Error('Shortcut with name "'+n+'" collides with shortcuts '+r.toString());r&&o?r.unshift(n):this.keyMap_[t]=[n]},e.ShortcutRegistry.prototype.removeKeyMapping=function(t,n,o){var r=this.keyMap_[t];if(!r&&!o)return console.warn('No keyboard shortcut with name "'+n+'" registered with key code "'+t+'"'),!1;var p=r.indexOf(n);return-1<p?(r.splice(p,1),0==r.length&&delete this.keyMap_[t],!0):(o||console.warn('No keyboard shortcut with name "'+n+'" registered with key code "'+t+'"'),!1)},e.ShortcutRegistry.prototype.removeAllKeyMappings=function(t){for(var n in this.keyMap_)this.removeKeyMapping(n,t,!0)},e.ShortcutRegistry.prototype.setKeyMap=function(t){this.keyMap_=t},e.ShortcutRegistry.prototype.getKeyMap=function(){return e.utils.object.deepMerge(Object.create(null),this.keyMap_)},e.ShortcutRegistry.prototype.getRegistry=function(){return e.utils.object.deepMerge(Object.create(null),this.registry_)},e.ShortcutRegistry.prototype.onKeyDown=function(t,n){var o=this.serializeKeyEvent_(n);if(!(o=this.getShortcutNamesByKeyCode(o)))return!1;for(var p,r=0;p=o[r];r++)if((!(p=this.registry_[p]).preconditionFn||p.preconditionFn(t))&&p.callback&&p.callback(t,n,p))return!0;return!1},e.ShortcutRegistry.prototype.getShortcutNamesByKeyCode=function(t){return this.keyMap_[t]||[]},e.ShortcutRegistry.prototype.getKeyCodesByShortcutName=function(t){var o,n=[];for(o in this.keyMap_)-1<this.keyMap_[o].indexOf(t)&&n.push(o);return n},e.ShortcutRegistry.prototype.serializeKeyEvent_=function(t){var o,n="";for(o in e.ShortcutRegistry.modifierKeys)t.getModifierState(o)&&(""!=n&&(n+="+"),n+=o);return""!=n&&t.keyCode?n=n+"+"+t.keyCode:t.keyCode&&(n=t.keyCode.toString()),n},e.ShortcutRegistry.prototype.checkModifiers_=function(t){for(var r,n=e.utils.object.values(e.ShortcutRegistry.modifierKeys),o=0;r=t[o];o++)if(0>n.indexOf(r))throw Error(r+" is not a valid modifier key.")},e.ShortcutRegistry.prototype.createSerializedKey=function(t,n){var o="";if(n)for(var r in this.checkModifiers_(n),e.ShortcutRegistry.modifierKeys)-1<n.indexOf(e.ShortcutRegistry.modifierKeys[r])&&(""!=o&&(o+="+"),o+=r);return""!=o&&t?o=o+"+"+t:t&&(o=t.toString()),o},new e.ShortcutRegistry,e.VariableModel=function(t,n,o,r){this.workspace=t,this.name=n,this.type=o||"",this.id_=r||e.utils.genUid(),e.Events.fire(new(e.Events.get(e.Events.VAR_CREATE))(this))},e.VariableModel.prototype.getId=function(){return this.id_},e.VariableModel.compareByName=function(t,n){return t.name.localeCompare(n.name,void 0,{sensitivity:"base"})},e.Variables={},e.Variables.NAME_TYPE=e.VARIABLE_CATEGORY_NAME,e.Variables.allUsedVarModels=function(t){var n=t.getAllBlocks(!1);t=Object.create(null);for(var o=0;o<n.length;o++){var r=n[o].getVarModels();if(r)for(var p=0;p<r.length;p++){var b=r[p],I=b.getId();I&&(t[I]=b)}}for(I in n=[],t)n.push(t[I]);return n},e.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_={},e.Variables.allDeveloperVariables=function(t){t=t.getAllBlocks(!1);for(var r,n=Object.create(null),o=0;r=t[o];o++){var p=r.getDeveloperVariables;if(!p&&r.getDeveloperVars&&(p=r.getDeveloperVars,e.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[r.type]||(console.warn("Function getDeveloperVars() deprecated. Use getDeveloperVariables() (block type '"+r.type+"')"),e.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[r.type]=!0)),p)for(r=p(),p=0;p<r.length;p++)n[r[p]]=!0}return Object.keys(n)},e.Variables.flyoutCategory=function(t){var n=[],o=document.createElement("button");return o.setAttribute("text","%{BKY_NEW_VARIABLE}"),o.setAttribute("callbackKey","CREATE_VARIABLE"),t.registerButtonCallback("CREATE_VARIABLE",function(r){e.Variables.createVariableButtonHandler(r.getTargetWorkspace())}),n.push(o),t=e.Variables.flyoutCategoryBlocks(t),n.concat(t)},e.Variables.flyoutCategoryBlocks=function(t){var n=[];if(0<(t=t.getVariablesOfType("")).length){var o=t[t.length-1];if(e.Blocks.variables_set){var r=e.utils.xml.createElement("block");r.setAttribute("type","variables_set"),r.setAttribute("gap",e.Blocks.math_change?8:24),r.appendChild(e.Variables.generateVariableFieldDom(o)),n.push(r)}if(e.Blocks.math_change&&((r=e.utils.xml.createElement("block")).setAttribute("type","math_change"),r.setAttribute("gap",e.Blocks.variables_get?20:8),r.appendChild(e.Variables.generateVariableFieldDom(o)),o=e.Xml.textToDom('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),r.appendChild(o),n.push(r)),e.Blocks.variables_get){t.sort(e.VariableModel.compareByName),o=0;for(var p;p=t[o];o++)(r=e.utils.xml.createElement("block")).setAttribute("type","variables_get"),r.setAttribute("gap",8),r.appendChild(e.Variables.generateVariableFieldDom(p)),n.push(r)}}return n},e.Variables.VAR_LETTER_OPTIONS="ijkmnopqrstuvwxyzabcdefgh",e.Variables.generateUniqueName=function(t){return e.Variables.generateUniqueNameFromOptions(e.Variables.VAR_LETTER_OPTIONS.charAt(0),t.getAllVariableNames())},e.Variables.generateUniqueNameFromOptions=function(t,n){if(!n.length)return t;for(var o=e.Variables.VAR_LETTER_OPTIONS,r="",p=o.indexOf(t);;){for(var b=!1,I=0;I<n.length;I++)if(n[I].toLowerCase()==t){b=!0;break}if(!b)return t;++p==o.length&&(p=0,r=Number(r)+1),t=o.charAt(p)+r}},e.Variables.createVariableButtonHandler=function(t,n,o){var r=o||"",p=function(b){e.Variables.promptName(e.Msg.NEW_VARIABLE_TITLE,b,function(I){if(I){var x=e.Variables.nameUsedWithAnyType(I,t);if(x){if(x.type==r)var k=e.Msg.VARIABLE_ALREADY_EXISTS.replace("%1",x.name);else k=(k=e.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE).replace("%1",x.name).replace("%2",x.type);e.alert(k,function(){p(I)})}else t.createVariable(I,r),n&&n(I)}else n&&n(null)})};p("")},e.Variables.createVariable=e.Variables.createVariableButtonHandler,e.Variables.renameVariable=function(t,n,o){var r=function(p){var b=e.Msg.RENAME_VARIABLE_TITLE.replace("%1",n.name);e.Variables.promptName(b,p,function(I){if(I){var x=e.Variables.nameUsedWithOtherType_(I,n.type,t);x?(x=e.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",x.name).replace("%2",x.type),e.alert(x,function(){r(I)})):(t.renameVariableById(n.getId(),I),o&&o(I))}else o&&o(null)})};r("")},e.Variables.promptName=function(t,n,o){e.prompt(t,n,function(r){r&&((r=r.replace(/[\s\xa0]+/g," ").trim())==e.Msg.RENAME_VARIABLE||r==e.Msg.NEW_VARIABLE)&&(r=null),o(r)})},e.Variables.nameUsedWithOtherType_=function(t,n,o){o=o.getVariableMap().getAllVariables(),t=t.toLowerCase();for(var p,r=0;p=o[r];r++)if(p.name.toLowerCase()==t&&p.type!=n)return p;return null},e.Variables.nameUsedWithAnyType=function(t,n){n=n.getVariableMap().getAllVariables(),t=t.toLowerCase();for(var r,o=0;r=n[o];o++)if(r.name.toLowerCase()==t)return r;return null},e.Variables.generateVariableFieldDom=function(t){var n=e.utils.xml.createElement("field");return n.setAttribute("name","VAR"),n.setAttribute("id",t.getId()),n.setAttribute("variabletype",t.type),t=e.utils.xml.createTextNode(t.name),n.appendChild(t),n},e.Variables.getOrCreateVariablePackage=function(t,n,o,r){var p=e.Variables.getVariable(t,n,o,r);return p||(p=e.Variables.createVariable_(t,n,o,r)),p},e.Variables.getVariable=function(t,n,o,r){var p=t.getPotentialVariableMap(),b=null;if(n&&(!(b=t.getVariableById(n))&&p&&(b=p.getVariableById(n)),b))return b;if(o){if(null==r)throw Error("Tried to look up a variable by name without a type");!(b=t.getVariable(o,r))&&p&&(b=p.getVariable(o,r))}return b},e.Variables.createVariable_=function(t,n,o,r){var p=t.getPotentialVariableMap();return o||(o=e.Variables.generateUniqueName(t.isFlyout?t.targetWorkspace:t)),p?p.createVariable(o,r,n):t.createVariable(o,r,n)},e.Variables.getAddedVariables=function(t,n){t=t.getAllVariables();var o=[];if(n.length!=t.length)for(var r=0;r<t.length;r++){var p=t[r];-1==n.indexOf(p)&&o.push(p)}return o},e.VERSION="6.20210701.0",e.mainWorkspace=null,e.selected=null,e.draggingConnections=[],e.clipboardXml_=null,e.clipboardSource_=null,e.clipboardTypeCounts_=null,e.cache3dSupported_=null,e.parentContainer=null,e.svgSize=function(t){return e.utils.deprecation.warn("Blockly.svgSize","March 2021","March 2022","workspace.getCachedParentSvgSize"),new e.utils.Size(t.cachedWidth_,t.cachedHeight_)},e.resizeSvgContents=function(t){t.resizeContents()},e.svgResize=function(t){for(;t.options.parentWorkspace;)t=t.options.parentWorkspace;var n=t.getParentSvg(),o=t.getCachedParentSvgSize(),r=n.parentNode;if(r){var p=r.offsetWidth;r=r.offsetHeight,o.width!=p&&(n.setAttribute("width",p+"px"),t.setCachedParentSvgSize(p,null)),o.height!=r&&(n.setAttribute("height",r+"px"),t.setCachedParentSvgSize(null,r)),t.resize()}},e.onKeyDown=function(t){var n=e.mainWorkspace;n&&!(e.utils.isTargetInput(t)||n.rendered&&!n.isVisible())&&e.ShortcutRegistry.registry.onKeyDown(n,t)},e.deleteBlock=function(t){t.workspace.isFlyout||(e.Events.setGroup(!0),e.hideChaff(),t.dispose(!t.outputConnection,!0),e.Events.setGroup(!1))},e.copy=function(t){(t=t.toCopyData())&&(e.clipboardXml_=t.xml,e.clipboardSource_=t.source,e.clipboardTypeCounts_=t.typeCounts)},e.paste=function(){if(!e.clipboardXml_)return!1;var t=e.clipboardSource_;return t.isFlyout&&(t=t.targetWorkspace),!(!e.clipboardTypeCounts_||!t.isCapacityAvailable(e.clipboardTypeCounts_)||(e.Events.setGroup(!0),t.paste(e.clipboardXml_),e.Events.setGroup(!1),0))},e.duplicate=function(t){var n=e.clipboardXml_,o=e.clipboardSource_;e.copy(t),t.workspace.paste(e.clipboardXml_),e.clipboardXml_=n,e.clipboardSource_=o},e.onContextMenu_=function(t){e.utils.isTargetInput(t)||t.preventDefault()},e.hideChaff=function(t){e.Tooltip.hide(),e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation();var n=!!t;e.getMainWorkspace().getComponentManager().getComponents(e.ComponentManager.Capability.AUTOHIDEABLE,!0).forEach(function(o){o.autoHide(n)})},e.getMainWorkspace=function(){return e.mainWorkspace},e.alert=function(t,n){alert(t),n&&n()},e.confirm=function(t,n){n(confirm(t))},e.prompt=function(t,n,o){o(prompt(t,n))},e.jsonInitFactory_=function(t){return function(){this.jsonInit(t)}},e.defineBlocksWithJsonArray=function(t){for(var n=0;n<t.length;n++){var o=t[n];if(o){var r=o.type;null==r||""===r?console.warn("Block definition #"+n+" in JSON array is missing a type attribute. Skipping."):(e.Blocks[r]&&console.warn("Block definition #"+n+' in JSON array overwrites prior definition of "'+r+'".'),e.Blocks[r]={init:e.jsonInitFactory_(o)})}else console.warn("Block definition #"+n+" in JSON array is "+o+". Skipping.")}},e.isNumber=function(t){return/^\s*-?\d+(\.\d+)?\s*$/.test(t)},e.hueToHex=function(t){return e.utils.colour.hsvToHex(t,e.HSV_SATURATION,255*e.HSV_VALUE)},e.checkBlockColourConstants=function(){e.checkBlockColourConstant_("LOGIC_HUE",["Blocks","logic","HUE"],void 0),e.checkBlockColourConstant_("LOGIC_HUE",["Constants","Logic","HUE"],210),e.checkBlockColourConstant_("LOOPS_HUE",["Blocks","loops","HUE"],void 0),e.checkBlockColourConstant_("LOOPS_HUE",["Constants","Loops","HUE"],120),e.checkBlockColourConstant_("MATH_HUE",["Blocks","math","HUE"],void 0),e.checkBlockColourConstant_("MATH_HUE",["Constants","Math","HUE"],230),e.checkBlockColourConstant_("TEXTS_HUE",["Blocks","texts","HUE"],void 0),e.checkBlockColourConstant_("TEXTS_HUE",["Constants","Text","HUE"],160),e.checkBlockColourConstant_("LISTS_HUE",["Blocks","lists","HUE"],void 0),e.checkBlockColourConstant_("LISTS_HUE",["Constants","Lists","HUE"],260),e.checkBlockColourConstant_("COLOUR_HUE",["Blocks","colour","HUE"],void 0),e.checkBlockColourConstant_("COLOUR_HUE",["Constants","Colour","HUE"],20),e.checkBlockColourConstant_("VARIABLES_HUE",["Blocks","variables","HUE"],void 0),e.checkBlockColourConstant_("VARIABLES_HUE",["Constants","Variables","HUE"],330),e.checkBlockColourConstant_("VARIABLES_DYNAMIC_HUE",["Constants","VariablesDynamic","HUE"],310),e.checkBlockColourConstant_("PROCEDURES_HUE",["Blocks","procedures","HUE"],void 0)},e.checkBlockColourConstant_=function(t,n,o){for(var r="Blockly",p=e,b=0;b<n.length;++b)r+="."+n[b],p&&(p=p[n[b]]);p&&p!==o&&(t=(void 0===o?'%1 has been removed. Use Blockly.Msg["%2"].':'%1 is deprecated and unused. Override Blockly.Msg["%2"].').replace("%1",r).replace("%2",t),console.warn(t))},e.setParentContainer=function(t){e.parentContainer=t},e.bindEvent_=e.browserEvents.bind,e.unbindEvent_=e.browserEvents.unbind,e.bindEventWithChecks_=e.browserEvents.conditionalBind,e.ALIGN_LEFT=e.constants.ALIGN.LEFT,e.ALIGN_CENTRE=e.constants.ALIGN.CENTRE,e.ALIGN_RIGHT=e.constants.ALIGN.RIGHT,e.INPUT_VALUE=e.connectionTypes.INPUT_VALUE,e.OUTPUT_VALUE=e.connectionTypes.OUTPUT_VALUE,e.NEXT_STATEMENT=e.connectionTypes.NEXT_STATEMENT,e.PREVIOUS_STATEMENT=e.connectionTypes.PREVIOUS_STATEMENT,e.DUMMY_INPUT=e.inputTypes.DUMMY,e.TOOLBOX_AT_TOP=e.utils.toolbox.Position.TOP,e.TOOLBOX_AT_BOTTOM=e.utils.toolbox.Position.BOTTOM,e.TOOLBOX_AT_LEFT=e.utils.toolbox.Position.LEFT,e.TOOLBOX_AT_RIGHT=e.utils.toolbox.Position.RIGHT,e.Events.BubbleOpen=function(t,n,o){e.Events.BubbleOpen.superClass_.constructor.call(this,t?t.workspace.id:void 0),this.blockId=t?t.id:null,this.isOpen=n,this.bubbleType=o},e.utils.object.inherits(e.Events.BubbleOpen,e.Events.UiBase),e.Events.BubbleOpen.prototype.type=e.Events.BUBBLE_OPEN,e.Events.BubbleOpen.prototype.toJson=function(){var t=e.Events.BubbleOpen.superClass_.toJson.call(this);return t.isOpen=this.isOpen,t.bubbleType=this.bubbleType,t.blockId=this.blockId,t},e.Events.BubbleOpen.prototype.fromJson=function(t){e.Events.BubbleOpen.superClass_.fromJson.call(this,t),this.isOpen=t.isOpen,this.bubbleType=t.bubbleType,this.blockId=t.blockId},e.registry.register(e.registry.Type.EVENT,e.Events.BUBBLE_OPEN,e.Events.BubbleOpen),e.Icon=function(t){this.block_=t,this.iconGroup_=null},e.Icon.prototype.collapseHidden=!0,e.Icon.prototype.SIZE=17,e.Icon.prototype.bubble_=null,e.Icon.prototype.iconXY_=null,e.Icon.prototype.createIcon=function(){this.iconGroup_||(this.iconGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyIconGroup"},null),this.block_.isInFlyout&&e.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly"),this.drawIcon_(this.iconGroup_),this.block_.getSvgRoot().appendChild(this.iconGroup_),e.browserEvents.conditionalBind(this.iconGroup_,"mouseup",this,this.iconClick_),this.updateEditable())},e.Icon.prototype.dispose=function(){e.utils.dom.removeNode(this.iconGroup_),this.iconGroup_=null,this.setVisible(!1),this.block_=null},e.Icon.prototype.updateEditable=function(){},e.Icon.prototype.isVisible=function(){return!!this.bubble_},e.Icon.prototype.iconClick_=function(t){this.block_.workspace.isDragging()||this.block_.isInFlyout||e.utils.isRightButton(t)||this.setVisible(!this.isVisible())},e.Icon.prototype.applyColour=function(){this.isVisible()&&this.bubble_.setColour(this.block_.style.colourPrimary)},e.Icon.prototype.setIconLocation=function(t){this.iconXY_=t,this.isVisible()&&this.bubble_.setAnchorLocation(t)},e.Icon.prototype.computeIconLocation=function(){var t=this.block_.getRelativeToSurfaceXY(),n=e.utils.getRelativeXY(this.iconGroup_);t=new e.utils.Coordinate(t.x+n.x+this.SIZE/2,t.y+n.y+this.SIZE/2),e.utils.Coordinate.equals(this.getIconLocation(),t)||this.setIconLocation(t)},e.Icon.prototype.getIconLocation=function(){return this.iconXY_},e.Icon.prototype.getCorrectedSize=function(){return new e.utils.Size(e.Icon.prototype.SIZE,e.Icon.prototype.SIZE-2)},e.Warning=function(t){e.Warning.superClass_.constructor.call(this,t),this.createIcon(),this.text_=Object.create(null)},e.utils.object.inherits(e.Warning,e.Icon),e.Warning.prototype.collapseHidden=!1,e.Warning.prototype.drawIcon_=function(t){e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},t),e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},t),e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},t)},e.Warning.prototype.setVisible=function(t){t!=this.isVisible()&&(e.Events.fire(new(e.Events.get(e.Events.BUBBLE_OPEN))(this.block_,t,"warning")),t?this.createBubble_():this.disposeBubble_())},e.Warning.prototype.createBubble_=function(){this.paragraphElement_=e.Bubble.textToDom(this.getText()),this.bubble_=e.Bubble.createNonEditableBubble(this.paragraphElement_,this.block_,this.iconXY_),this.applyColour()},e.Warning.prototype.disposeBubble_=function(){this.bubble_.dispose(),this.paragraphElement_=this.bubble_=null},e.Warning.prototype.setText=function(t,n){this.text_[n]!=t&&(t?this.text_[n]=t:delete this.text_[n],this.isVisible()&&(this.setVisible(!1),this.setVisible(!0)))},e.Warning.prototype.getText=function(){var n,t=[];for(n in this.text_)t.push(this.text_[n]);return t.join("\n")},e.Warning.prototype.dispose=function(){this.block_.warning=null,e.Icon.prototype.dispose.call(this)},e.Comment=function(t){e.Comment.superClass_.constructor.call(this,t),this.model_=t.commentModel,this.model_.text=this.model_.text||"",this.cachedText_="",this.onInputWrapper_=this.onChangeWrapper_=this.onWheelWrapper_=this.onMouseUpWrapper_=null,this.createIcon()},e.utils.object.inherits(e.Comment,e.Icon),e.Comment.prototype.drawIcon_=function(t){e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},t),e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},t),e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},t)},e.Comment.prototype.createEditor_=function(){this.foreignObject_=e.utils.dom.createSvgElement(e.utils.Svg.FOREIGNOBJECT,{x:e.Bubble.BORDER_WIDTH,y:e.Bubble.BORDER_WIDTH},null);var t=document.createElementNS(e.utils.dom.HTML_NS,"body");t.setAttribute("xmlns",e.utils.dom.HTML_NS),t.className="blocklyMinimalBody";var n=this.textarea_=document.createElementNS(e.utils.dom.HTML_NS,"textarea");return n.className="blocklyCommentTextarea",n.setAttribute("dir",this.block_.RTL?"RTL":"LTR"),n.value=this.model_.text,this.resizeTextarea_(),t.appendChild(n),this.foreignObject_.appendChild(t),this.onMouseUpWrapper_=e.browserEvents.conditionalBind(n,"mouseup",this,this.startEdit_,!0,!0),this.onWheelWrapper_=e.browserEvents.conditionalBind(n,"wheel",this,function(o){o.stopPropagation()}),this.onChangeWrapper_=e.browserEvents.conditionalBind(n,"change",this,function(o){this.cachedText_!=this.model_.text&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this.block_,"comment",null,this.cachedText_,this.model_.text))}),this.onInputWrapper_=e.browserEvents.conditionalBind(n,"input",this,function(o){this.model_.text=n.value}),setTimeout(n.focus.bind(n),0),this.foreignObject_},e.Comment.prototype.updateEditable=function(){e.Comment.superClass_.updateEditable.call(this),this.isVisible()&&(this.disposeBubble_(),this.createBubble_())},e.Comment.prototype.onBubbleResize_=function(){this.isVisible()&&(this.model_.size=this.bubble_.getBubbleSize(),this.resizeTextarea_())},e.Comment.prototype.resizeTextarea_=function(){var t=this.model_.size,n=2*e.Bubble.BORDER_WIDTH,o=t.width-n;t=t.height-n,this.foreignObject_.setAttribute("width",o),this.foreignObject_.setAttribute("height",t),this.textarea_.style.width=o-4+"px",this.textarea_.style.height=t-4+"px"},e.Comment.prototype.setVisible=function(t){t!=this.isVisible()&&(e.Events.fire(new(e.Events.get(e.Events.BUBBLE_OPEN))(this.block_,t,"comment")),(this.model_.pinned=t)?this.createBubble_():this.disposeBubble_())},e.Comment.prototype.createBubble_=function(){!this.block_.isEditable()||e.utils.userAgent.IE?this.createNonEditableBubble_():this.createEditableBubble_()},e.Comment.prototype.createEditableBubble_=function(){this.bubble_=new e.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,this.model_.size.width,this.model_.size.height),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerResizeEvent(this.onBubbleResize_.bind(this)),this.applyColour()},e.Comment.prototype.createNonEditableBubble_=function(){this.paragraphElement_=e.Bubble.textToDom(this.block_.getCommentText()),this.bubble_=e.Bubble.createNonEditableBubble(this.paragraphElement_,this.block_,this.iconXY_),this.applyColour()},e.Comment.prototype.disposeBubble_=function(){this.onMouseUpWrapper_&&(e.browserEvents.unbind(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onWheelWrapper_&&(e.browserEvents.unbind(this.onWheelWrapper_),this.onWheelWrapper_=null),this.onChangeWrapper_&&(e.browserEvents.unbind(this.onChangeWrapper_),this.onChangeWrapper_=null),this.onInputWrapper_&&(e.browserEvents.unbind(this.onInputWrapper_),this.onInputWrapper_=null),this.bubble_.dispose(),this.paragraphElement_=this.foreignObject_=this.textarea_=this.bubble_=null},e.Comment.prototype.startEdit_=function(t){this.bubble_.promote()&&this.textarea_.focus(),this.cachedText_=this.model_.text},e.Comment.prototype.getBubbleSize=function(){return this.model_.size},e.Comment.prototype.setBubbleSize=function(t,n){this.bubble_?this.bubble_.setBubbleSize(t,n):(this.model_.size.width=t,this.model_.size.height=n)},e.Comment.prototype.updateText=function(){this.textarea_?this.textarea_.value=this.model_.text:this.paragraphElement_&&(this.paragraphElement_.firstChild.textContent=this.model_.text)},e.Comment.prototype.dispose=function(){this.block_.comment=null,e.Icon.prototype.dispose.call(this)},e.Css.register(".blocklyCommentTextarea {,background-color: #fef49c;,border: 0;,outline: 0;,margin: 0;,padding: 3px;,resize: none;,display: block;,text-overflow: hidden;,}".split(",")),e.IComponent=function(){},e.IDragTarget=function(){},e.DragTarget=function(){},e.DragTarget.prototype.onDragEnter=function(t){},e.DragTarget.prototype.onDragOver=function(t){},e.DragTarget.prototype.onDragExit=function(t){},e.DragTarget.prototype.onDrop=function(t){},e.DragTarget.prototype.shouldPreventMove=function(t){return!1},e.IDeleteArea=function(){},e.DeleteArea=function(){e.DeleteArea.superClass_.constructor.call(this),this.wouldDelete_=!1},e.utils.object.inherits(e.DeleteArea,e.DragTarget),e.DeleteArea.prototype.wouldDelete=function(t,n){return t instanceof e.BlockSvg?(t=!t.getParent()&&t.isDeletable(),this.updateWouldDelete_(t&&!n)):this.updateWouldDelete_(t.isDeletable()),this.wouldDelete_},e.DeleteArea.prototype.updateWouldDelete_=function(t){this.wouldDelete_=t},e.IFlyout=function(){},e.Flyout=function(t){e.Flyout.superClass_.constructor.call(this),t.setMetrics=this.setMetrics_.bind(this),this.workspace_=new e.WorkspaceSvg(t),this.workspace_.setMetricsManager(new e.FlyoutMetricsManager(this.workspace_,this)),this.workspace_.isFlyout=!0,this.workspace_.setVisible(this.isVisible_),this.id=e.utils.genUid(),this.RTL=!!t.RTL,this.horizontalLayout=!1,this.toolboxPosition_=t.toolboxPosition,this.eventWrappers_=[],this.mats_=[],this.buttons_=[],this.listeners_=[],this.permanentlyDisabled_=[],this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.targetWorkspace=null},e.utils.object.inherits(e.Flyout,e.DeleteArea),e.Flyout.prototype.autoClose=!0,e.Flyout.prototype.isVisible_=!1,e.Flyout.prototype.containerVisible_=!0,e.Flyout.prototype.CORNER_RADIUS=8,e.Flyout.prototype.MARGIN=e.Flyout.prototype.CORNER_RADIUS,e.Flyout.prototype.GAP_X=3*e.Flyout.prototype.MARGIN,e.Flyout.prototype.GAP_Y=3*e.Flyout.prototype.MARGIN,e.Flyout.prototype.SCROLLBAR_MARGIN=2.5,e.Flyout.prototype.width_=0,e.Flyout.prototype.height_=0,e.Flyout.prototype.dragAngleRange_=70,e.Flyout.prototype.createDom=function(t){return this.svgGroup_=e.utils.dom.createSvgElement(t,{class:"blocklyFlyout",style:"display: none"},null),this.svgBackground_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_},e.Flyout.prototype.init=function(t){this.targetWorkspace=t,this.workspace_.targetWorkspace=t,this.workspace_.scrollbar=new e.ScrollbarPair(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),Array.prototype.push.apply(this.eventWrappers_,e.browserEvents.conditionalBind(this.svgGroup_,"wheel",this,this.wheel_)),this.autoClose||(this.filterWrapper_=this.filterForCapacity_.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper_)),Array.prototype.push.apply(this.eventWrappers_,e.browserEvents.conditionalBind(this.svgBackground_,"mousedown",this,this.onMouseDown_)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),t.getComponentManager().addComponent({component:this,weight:1,capabilities:[e.ComponentManager.Capability.DELETE_AREA,e.ComponentManager.Capability.DRAG_TARGET]})},e.Flyout.prototype.dispose=function(){this.hide(),this.workspace_.getComponentManager().removeComponent(this.id),e.browserEvents.unbind(this.eventWrappers_),this.filterWrapper_&&(this.targetWorkspace.removeChangeListener(this.filterWrapper_),this.filterWrapper_=null),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.targetWorkspace=null,this.workspace_.dispose(),this.workspace_=null),this.svgGroup_&&(e.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.targetWorkspace=this.svgBackground_=null},e.Flyout.prototype.getWidth=function(){return this.width_},e.Flyout.prototype.getHeight=function(){return this.height_},e.Flyout.prototype.getFlyoutScale=function(){return this.targetWorkspace.scale},e.Flyout.prototype.getWorkspace=function(){return this.workspace_},e.Flyout.prototype.isVisible=function(){return this.isVisible_},e.Flyout.prototype.setVisible=function(t){var n=t!=this.isVisible();this.isVisible_=t,n&&(this.autoClose||this.workspace_.recordDragTargets(),this.updateDisplay_())},e.Flyout.prototype.setContainerVisible=function(t){var n=t!=this.containerVisible_;this.containerVisible_=t,n&&this.updateDisplay_()},e.Flyout.prototype.updateDisplay_=function(){var t=!!this.containerVisible_&&this.isVisible();this.svgGroup_.style.display=t?"block":"none",this.workspace_.scrollbar.setContainerVisible(t)},e.Flyout.prototype.positionAt_=function(t,n,o,r){this.svgGroup_.setAttribute("width",t),this.svgGroup_.setAttribute("height",n),this.workspace_.setCachedParentSvgSize(t,n),"svg"==this.svgGroup_.tagName?e.utils.dom.setCssTransform(this.svgGroup_,"translate("+o+"px,"+r+"px)"):this.svgGroup_.setAttribute("transform","translate("+o+","+r+")"),(t=this.workspace_.scrollbar)&&(t.setOrigin(o,r),t.resize(),t.hScroll&&t.hScroll.setPosition(t.hScroll.position.x,t.hScroll.position.y),t.vScroll&&t.vScroll.setPosition(t.vScroll.position.x,t.vScroll.position.y))},e.Flyout.prototype.hide=function(){if(this.isVisible()){this.setVisible(!1);for(var n,t=0;n=this.listeners_[t];t++)e.browserEvents.unbind(n);this.listeners_.length=0,this.reflowWrapper_&&(this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowWrapper_=null)}},e.Flyout.prototype.show=function(t){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks_(),"string"==typeof t&&(t=this.getDynamicCategoryContents_(t)),this.setVisible(!0),t=e.utils.toolbox.convertFlyoutDefToJsonArray(t),t=this.createFlyoutInfo_(t),this.layout_(t.contents,t.gaps),this.listeners_.push(e.browserEvents.conditionalBind(this.svgBackground_,"mouseover",this,function(){for(var r,n=this.workspace_.getTopBlocks(!1),o=0;r=n[o];o++)r.removeSelect()})),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity_(),this.position(),this.reflowWrapper_=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper_)},e.Flyout.prototype.createFlyoutInfo_=function(t){var n=[],o=[];this.permanentlyDisabled_.length=0;for(var b,r=this.horizontalLayout?this.GAP_X:this.GAP_Y,p=0;b=t[p];p++)switch(b.custom&&(b=this.getDynamicCategoryContents_(b.custom),b=e.utils.toolbox.convertFlyoutDefToJsonArray(b),t.splice.apply(t,[p,1].concat(b)),b=t[p]),b.kind.toUpperCase()){case"BLOCK":var I=b,x=this.getBlockXml_(I);b=this.createBlock_(x),I=parseInt(I.gap||x.getAttribute("gap"),10),o.push(isNaN(I)?r:I),n.push({type:"block",block:b});break;case"SEP":this.addSeparatorGap_(b,o,r);break;case"LABEL":b=this.createButton_(b,!0),n.push({type:"button",button:b}),o.push(r);break;case"BUTTON":b=this.createButton_(b,!1),n.push({type:"button",button:b}),o.push(r)}return{contents:n,gaps:o}},e.Flyout.prototype.getDynamicCategoryContents_=function(t){if("function"!=typeof(t=this.workspace_.targetWorkspace.getToolboxCategoryCallback(t)))throw TypeError("Couldn't find a callback function when opening a toolbox category.");if(t=t(this.workspace_.targetWorkspace),!Array.isArray(t))throw new TypeError("Result of toolbox category callback must be an array.");return t},e.Flyout.prototype.createButton_=function(t,n){if(!e.FlyoutButton)throw Error("Missing require for Blockly.FlyoutButton");return new e.FlyoutButton(this.workspace_,this.targetWorkspace,t,n)},e.Flyout.prototype.createBlock_=function(t){return(t=e.Xml.domToBlock(t,this.workspace_)).isEnabled()||this.permanentlyDisabled_.push(t),t},e.Flyout.prototype.getBlockXml_=function(t){var n=null,o=t.blockxml;if(o&&"string"!=typeof o?n=o:o&&"string"==typeof o?(n=e.Xml.textToDom(o),t.blockxml=n):t.type&&((n=e.utils.xml.createElement("xml")).setAttribute("type",t.type),n.setAttribute("disabled",t.disabled),t.blockxml=n),!n)throw Error("Error: Invalid block definition. Block definition must have blockxml or type.");return n},e.Flyout.prototype.addSeparatorGap_=function(t,n,o){t=parseInt(t.gap,10),!isNaN(t)&&0<n.length?n[n.length-1]=t:n.push(o)},e.Flyout.prototype.clearOldBlocks_=function(){for(var o,t=this.workspace_.getTopBlocks(!1),n=0;o=t[n];n++)o.workspace==this.workspace_&&o.dispose(!1,!1);for(n=0;n<this.mats_.length;n++)(t=this.mats_[n])&&(e.Tooltip.unbindMouseEvents(t),e.utils.dom.removeNode(t));for(n=this.mats_.length=0;t=this.buttons_[n];n++)t.dispose();this.buttons_.length=0,this.workspace_.getPotentialVariableMap().clear()},e.Flyout.prototype.addBlockListeners_=function(t,n,o){this.listeners_.push(e.browserEvents.conditionalBind(t,"mousedown",null,this.blockMouseDown_(n))),this.listeners_.push(e.browserEvents.conditionalBind(o,"mousedown",null,this.blockMouseDown_(n))),this.listeners_.push(e.browserEvents.bind(t,"mouseenter",n,n.addSelect)),this.listeners_.push(e.browserEvents.bind(t,"mouseleave",n,n.removeSelect)),this.listeners_.push(e.browserEvents.bind(o,"mouseenter",n,n.addSelect)),this.listeners_.push(e.browserEvents.bind(o,"mouseleave",n,n.removeSelect))},e.Flyout.prototype.blockMouseDown_=function(t){var n=this;return function(o){var r=n.targetWorkspace.getGesture(o);r&&(r.setStartBlock(t),r.handleFlyoutStart(o,n))}},e.Flyout.prototype.onMouseDown_=function(t){var n=this.targetWorkspace.getGesture(t);n&&n.handleFlyoutStart(t,this)},e.Flyout.prototype.isBlockCreatable_=function(t){return t.isEnabled()},e.Flyout.prototype.createBlock=function(t){var n=null;e.Events.disable();var o=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{n=this.placeNewBlock_(t)}finally{e.Events.enable()}if(e.hideChaff(),t=e.Variables.getAddedVariables(this.targetWorkspace,o),e.Events.isEnabled()){for(e.Events.setGroup(!0),o=0;o<t.length;o++){var r=t[o];e.Events.fire(new(e.Events.get(e.Events.VAR_CREATE))(r))}e.Events.fire(new(e.Events.get(e.Events.BLOCK_CREATE))(n))}return this.autoClose?this.hide():this.filterForCapacity_(),n},e.Flyout.prototype.initFlyoutButton_=function(t,n,o){var r=t.createDom();t.moveTo(n,o),t.show(),this.listeners_.push(e.browserEvents.conditionalBind(r,"mousedown",this,this.onMouseDown_)),this.buttons_.push(t)},e.Flyout.prototype.createRect_=function(t,n,o,r,p){return(n=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{"fill-opacity":0,x:n,y:o,height:r.height,width:r.width},null)).tooltip=t,e.Tooltip.bindMouseEvents(n),this.workspace_.getCanvas().insertBefore(n,t.getSvgRoot()),t.flyoutRect_=n,this.mats_[p]=n},e.Flyout.prototype.moveRectToBlock_=function(t,n){var o=n.getHeightWidth();t.setAttribute("width",o.width),t.setAttribute("height",o.height),n=n.getRelativeToSurfaceXY(),t.setAttribute("y",n.y),t.setAttribute("x",this.RTL?n.x-o.width:n.x)},e.Flyout.prototype.filterForCapacity_=function(){for(var o,t=this.workspace_.getTopBlocks(!1),n=0;o=t[n];n++)if(-1==this.permanentlyDisabled_.indexOf(o))for(var r=this.targetWorkspace.isCapacityAvailable(e.utils.getBlockTypeCounts(o));o;)o.setEnabled(r),o=o.getNextBlock()},e.Flyout.prototype.reflow=function(){this.reflowWrapper_&&this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowInternal_(),this.reflowWrapper_&&this.workspace_.addChangeListener(this.reflowWrapper_)},e.Flyout.prototype.isScrollable=function(){return!!this.workspace_.scrollbar&&this.workspace_.scrollbar.isVisible()},e.Flyout.prototype.placeNewBlock_=function(t){var n=this.targetWorkspace;if(!t.getSvgRoot())throw Error("oldBlock is not rendered.");var o=e.Xml.blockToDom(t,!0);if(n.setResizesEnabled(!1),!(o=e.Xml.domToBlock(o,n)).getSvgRoot())throw Error("block is not rendered.");var r=n.getOriginOffsetInPixels(),p=this.workspace_.getOriginOffsetInPixels();return(t=t.getRelativeToSurfaceXY()).scale(this.workspace_.scale),t=e.utils.Coordinate.sum(p,t),(r=e.utils.Coordinate.difference(t,r)).scale(1/n.scale),o.moveBy(r.x,r.y),o},e.HorizontalFlyout=function(t){e.HorizontalFlyout.superClass_.constructor.call(this,t),this.horizontalLayout=!0},e.utils.object.inherits(e.HorizontalFlyout,e.Flyout),e.HorizontalFlyout.prototype.setMetrics_=function(t){if(this.isVisible()){var n=this.workspace_.getMetricsManager(),o=n.getScrollMetrics(),r=n.getViewMetrics();n=n.getAbsoluteMetrics(),"number"==typeof t.x&&(this.workspace_.scrollX=-(o.left+(o.width-r.width)*t.x)),this.workspace_.translate(this.workspace_.scrollX+n.left,this.workspace_.scrollY+n.top)}},e.HorizontalFlyout.prototype.getX=function(){return 0},e.HorizontalFlyout.prototype.getY=function(){if(!this.isVisible())return 0;var t=this.targetWorkspace.getMetricsManager(),n=t.getAbsoluteMetrics(),o=t.getViewMetrics();t=t.getToolboxMetrics();var r=this.toolboxPosition_==e.utils.toolbox.Position.TOP;return this.targetWorkspace.toolboxPosition==this.toolboxPosition_?this.targetWorkspace.getToolbox()?r?t.height:o.height-this.height_:r?0:o.height:r?0:o.height+n.top-this.height_},e.HorizontalFlyout.prototype.position=function(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var t=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=t.width,this.setBackgroundPath_(t.width-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),t=this.getX();var n=this.getY();this.positionAt_(this.width_,this.height_,t,n)}},e.HorizontalFlyout.prototype.setBackgroundPath_=function(t,n){var o=this.toolboxPosition_==e.utils.toolbox.Position.TOP,r=["M 0,"+(o?0:this.CORNER_RADIUS)];o?(r.push("h",t+2*this.CORNER_RADIUS),r.push("v",n),r.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),r.push("h",-t),r.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(r.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),r.push("h",t),r.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),r.push("v",n),r.push("h",-t-2*this.CORNER_RADIUS)),r.push("z"),this.svgBackground_.setAttribute("d",r.join(" "))},e.HorizontalFlyout.prototype.scrollToStart=function(){this.workspace_.scrollbar.setX(this.RTL?1/0:0)},e.HorizontalFlyout.prototype.wheel_=function(t){var n=e.utils.getScrollDeltaPixels(t);if(n=n.x||n.y){var o=this.workspace_.getMetricsManager(),r=o.getScrollMetrics();n=o.getViewMetrics().left-r.left+n,this.workspace_.scrollbar.setX(n),e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation()}t.preventDefault(),t.stopPropagation()},e.HorizontalFlyout.prototype.layout_=function(t,n){this.workspace_.scale=this.targetWorkspace.scale;var o=this.MARGIN,r=o+this.tabWidth_;this.RTL&&(t=t.reverse());for(var b,p=0;b=t[p];p++)if("block"==b.type){for(var k,I=(b=b.block).getDescendants(!1),x=0;k=I[x];x++)k.isInFlyout=!0;b.render(),I=b.getSvgRoot(),x=b.getHeightWidth(),k=b.outputConnection?this.tabWidth_:0,b.moveBy(k=this.RTL?r+x.width:r-k,o),k=this.createRect_(b,k,o,x,p),r+=x.width+n[p],this.addBlockListeners_(I,b,k)}else"button"==b.type&&(this.initFlyoutButton_(b.button,r,o),r+=b.button.width+n[p])},e.HorizontalFlyout.prototype.isDragTowardWorkspace=function(t){t=Math.atan2(t.y,t.x)/Math.PI*180;var n=this.dragAngleRange_;return t<90+n&&t>90-n||t>-90-n&&t<-90+n},e.HorizontalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;var t=this.svgGroup_.getBoundingClientRect(),n=t.top;return this.toolboxPosition_==e.utils.toolbox.Position.TOP?new e.utils.Rect(-1e9,n+t.height,-1e9,1e9):new e.utils.Rect(n,1e9,-1e9,1e9)},e.HorizontalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.getFlyoutScale();for(var r,t=0,n=this.workspace_.getTopBlocks(!1),o=0;r=n[o];o++)t=Math.max(t,r.getHeightWidth().height);if(t+=1.5*this.MARGIN,t*=this.workspace_.scale,this.height_!=(t+=e.Scrollbar.scrollbarThickness)){for(o=0;r=n[o];o++)r.flyoutRect_&&this.moveRectToBlock_(r.flyoutRect_,r);this.targetWorkspace.toolboxPosition!=this.toolboxPosition_||this.toolboxPosition_!=e.utils.toolbox.Position.TOP||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+t),this.height_=t,this.position(),this.targetWorkspace.recordDragTargets()}},e.registry.register(e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,e.registry.DEFAULT,e.HorizontalFlyout),e.VerticalFlyout=function(t){e.VerticalFlyout.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.VerticalFlyout,e.Flyout),e.VerticalFlyout.registryName="verticalFlyout",e.VerticalFlyout.prototype.setMetrics_=function(t){if(this.isVisible()){var n=this.workspace_.getMetricsManager(),o=n.getScrollMetrics(),r=n.getViewMetrics();n=n.getAbsoluteMetrics(),"number"==typeof t.y&&(this.workspace_.scrollY=-(o.top+(o.height-r.height)*t.y)),this.workspace_.translate(this.workspace_.scrollX+n.left,this.workspace_.scrollY+n.top)}},e.VerticalFlyout.prototype.getX=function(){if(!this.isVisible())return 0;var t=this.targetWorkspace.getMetricsManager(),n=t.getAbsoluteMetrics(),o=t.getViewMetrics();return t=t.getToolboxMetrics(),this.targetWorkspace.toolboxPosition==this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_==e.utils.toolbox.Position.LEFT?t.width:o.width-this.width_:this.toolboxPosition_==e.utils.toolbox.Position.LEFT?0:o.width:this.toolboxPosition_==e.utils.toolbox.Position.LEFT?0:o.width+n.left-this.width_},e.VerticalFlyout.prototype.getY=function(){return 0},e.VerticalFlyout.prototype.position=function(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var t=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=t.height,this.setBackgroundPath_(this.width_-this.CORNER_RADIUS,t.height-2*this.CORNER_RADIUS),t=this.getX();var n=this.getY();this.positionAt_(this.width_,this.height_,t,n)}},e.VerticalFlyout.prototype.setBackgroundPath_=function(t,n){var o=this.toolboxPosition_==e.utils.toolbox.Position.RIGHT,r=t+this.CORNER_RADIUS;(r=["M "+(o?r:0)+",0"]).push("h",o?-t:t),r.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,o?0:1,o?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),r.push("v",Math.max(0,n)),r.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,o?0:1,o?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),r.push("h",o?t:-t),r.push("z"),this.svgBackground_.setAttribute("d",r.join(" "))},e.VerticalFlyout.prototype.scrollToStart=function(){this.workspace_.scrollbar.setY(0)},e.VerticalFlyout.prototype.wheel_=function(t){var n=e.utils.getScrollDeltaPixels(t);if(n.y){var o=this.workspace_.getMetricsManager(),r=o.getScrollMetrics();n=o.getViewMetrics().top-r.top+n.y,this.workspace_.scrollbar.setY(n),e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation()}t.preventDefault(),t.stopPropagation()},e.VerticalFlyout.prototype.layout_=function(t,n){this.workspace_.scale=this.targetWorkspace.scale;for(var b,o=this.MARGIN,r=this.RTL?o:o+this.tabWidth_,p=0;b=t[p];p++)if("block"==b.type){for(var k,I=(b=b.block).getDescendants(!1),x=0;k=I[x];x++)k.isInFlyout=!0;b.render(),I=b.getSvgRoot(),x=b.getHeightWidth(),b.moveBy(k=b.outputConnection?r-this.tabWidth_:r,o),k=this.createRect_(b,this.RTL?k-x.width:k,o,x,p),this.addBlockListeners_(I,b,k),o+=x.height+n[p]}else"button"==b.type&&(this.initFlyoutButton_(b.button,r,o),o+=b.button.height+n[p])},e.VerticalFlyout.prototype.isDragTowardWorkspace=function(t){t=Math.atan2(t.y,t.x)/Math.PI*180;var n=this.dragAngleRange_;return t<n&&t>-n||t<-180+n||t>180-n},e.VerticalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;var t=this.svgGroup_.getBoundingClientRect(),n=t.left;return this.toolboxPosition_==e.utils.toolbox.Position.LEFT?new e.utils.Rect(-1e9,1e9,-1e9,n+t.width):new e.utils.Rect(-1e9,1e9,n,1e9)},e.VerticalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.getFlyoutScale();for(var r,t=0,n=this.workspace_.getTopBlocks(!1),o=0;r=n[o];o++){var p=r.getHeightWidth().width;r.outputConnection&&(p-=this.tabWidth_),t=Math.max(t,p)}for(o=0;r=this.buttons_[o];o++)t=Math.max(t,r.width);if(t+=1.5*this.MARGIN+this.tabWidth_,t*=this.workspace_.scale,this.width_!=(t+=e.Scrollbar.scrollbarThickness)){for(o=0;r=n[o];o++){if(this.RTL){p=r.getRelativeToSurfaceXY().x;var b=t/this.workspace_.scale-this.MARGIN;r.outputConnection||(b-=this.tabWidth_),r.moveBy(b-p,0)}r.flyoutRect_&&this.moveRectToBlock_(r.flyoutRect_,r)}if(this.RTL)for(o=0;r=this.buttons_[o];o++)n=r.getPosition().y,r.moveTo(t/this.workspace_.scale-r.width-this.MARGIN-this.tabWidth_,n);this.targetWorkspace.toolboxPosition!=this.toolboxPosition_||this.toolboxPosition_!=e.utils.toolbox.Position.LEFT||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX+t,this.targetWorkspace.scrollY),this.width_=t,this.position(),this.targetWorkspace.recordDragTargets()}},e.registry.register(e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,e.registry.DEFAULT,e.VerticalFlyout),e.FlyoutButton=function(t,n,o,r){this.workspace_=t,this.targetWorkspace_=n,this.text_=o.text,this.position_=new e.utils.Coordinate(0,0),this.isLabel_=r,this.callbackKey_=o.callbackKey||o.callbackkey,this.cssClass_=o["web-class"]||null,this.onMouseUpWrapper_=null,this.info=o},e.FlyoutButton.MARGIN_X=5,e.FlyoutButton.MARGIN_Y=2,e.FlyoutButton.prototype.width=0,e.FlyoutButton.prototype.height=0,e.FlyoutButton.prototype.createDom=function(){var t=this.isLabel_?"blocklyFlyoutLabel":"blocklyFlyoutButton";if(this.cssClass_&&(t+=" "+this.cssClass_),this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:t},this.workspace_.getCanvas()),!this.isLabel_)var n=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyFlyoutButtonShadow",rx:4,ry:4,x:1,y:1},this.svgGroup_);t=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:this.isLabel_?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:4,ry:4},this.svgGroup_);var o=e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:this.isLabel_?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup_),r=e.utils.replaceMessageReferences(this.text_);this.workspace_.RTL&&(r+="\u200f"),o.textContent=r,this.isLabel_&&(this.svgText_=o,this.workspace_.getThemeManager().subscribe(this.svgText_,"flyoutForegroundColour","fill"));var p=e.utils.style.getComputedStyle(o,"fontSize"),b=e.utils.style.getComputedStyle(o,"fontWeight"),I=e.utils.style.getComputedStyle(o,"fontFamily");return this.width=e.utils.dom.getFastTextWidthWithSizeString(o,p,b,I),r=e.utils.dom.measureFontMetrics(r,p,b,I),this.height=r.height,this.isLabel_||(this.width+=2*e.FlyoutButton.MARGIN_X,this.height+=2*e.FlyoutButton.MARGIN_Y,n.setAttribute("width",this.width),n.setAttribute("height",this.height)),t.setAttribute("width",this.width),t.setAttribute("height",this.height),o.setAttribute("x",this.width/2),o.setAttribute("y",this.height/2-r.height/2+r.baseline),this.updateTransform_(),this.onMouseUpWrapper_=e.browserEvents.conditionalBind(this.svgGroup_,"mouseup",this,this.onMouseUp_),this.svgGroup_},e.FlyoutButton.prototype.show=function(){this.updateTransform_(),this.svgGroup_.setAttribute("display","block")},e.FlyoutButton.prototype.updateTransform_=function(){this.svgGroup_.setAttribute("transform","translate("+this.position_.x+","+this.position_.y+")")},e.FlyoutButton.prototype.moveTo=function(t,n){this.position_.x=t,this.position_.y=n,this.updateTransform_()},e.FlyoutButton.prototype.isLabel=function(){return this.isLabel_},e.FlyoutButton.prototype.getPosition=function(){return this.position_},e.FlyoutButton.prototype.getButtonText=function(){return this.text_},e.FlyoutButton.prototype.getTargetWorkspace=function(){return this.targetWorkspace_},e.FlyoutButton.prototype.dispose=function(){this.onMouseUpWrapper_&&e.browserEvents.unbind(this.onMouseUpWrapper_),this.svgGroup_&&e.utils.dom.removeNode(this.svgGroup_),this.svgText_&&this.workspace_.getThemeManager().unsubscribe(this.svgText_)},e.FlyoutButton.prototype.onMouseUp_=function(t){(t=this.targetWorkspace_.getGesture(t))&&t.cancel(),this.isLabel_&&this.callbackKey_?console.warn("Labels should not have callbacks. Label text: "+this.text_):this.isLabel_||this.callbackKey_&&this.targetWorkspace_.getButtonCallback(this.callbackKey_)?this.isLabel_||this.targetWorkspace_.getButtonCallback(this.callbackKey_)(this):console.warn("Buttons should have callbacks. Button text: "+this.text_)},e.Css.register(".blocklyFlyoutButton {,fill: #888;,cursor: default;,},.blocklyFlyoutButtonShadow {,fill: #666;,},.blocklyFlyoutButton:hover {,fill: #aaa;,},.blocklyFlyoutLabel {,cursor: default;,},.blocklyFlyoutLabelBackground {,opacity: 0;,}".split(",")),e.Generator=function(t){this.name_=t,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")},e.Generator.prototype.INFINITE_LOOP_TRAP=null,e.Generator.prototype.STATEMENT_PREFIX=null,e.Generator.prototype.STATEMENT_SUFFIX=null,e.Generator.prototype.INDENT="  ",e.Generator.prototype.COMMENT_WRAP=60,e.Generator.prototype.ORDER_OVERRIDES=[],e.Generator.prototype.isInitialized=null,e.Generator.prototype.workspaceToCode=function(t){t||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),t=e.getMainWorkspace());var n=[];this.init(t),t=t.getTopBlocks(!0);for(var r,o=0;r=t[o];o++){var p=this.blockToCode(r);Array.isArray(p)&&(p=p[0]),p&&(r.outputConnection&&(p=this.scrubNakedValue(p),this.STATEMENT_PREFIX&&!r.suppressPrefixSuffix&&(p=this.injectId(this.STATEMENT_PREFIX,r)+p),this.STATEMENT_SUFFIX&&!r.suppressPrefixSuffix&&(p+=this.injectId(this.STATEMENT_SUFFIX,r))),n.push(p))}return n=n.join("\n"),(n=(n=(n=this.finish(n)).replace(/^\s+\n/,"")).replace(/\n\s+$/,"\n")).replace(/[ \t]+\n/g,"\n")},e.Generator.prototype.prefixLines=function(t,n){return n+t.replace(/(?!\n$)\n/g,"\n"+n)},e.Generator.prototype.allNestedComments=function(t){var n=[];t=t.getDescendants(!0);for(var o=0;o<t.length;o++){var r=t[o].getCommentText();r&&n.push(r)}return n.length&&n.push(""),n.join("\n")},e.Generator.prototype.blockToCode=function(t,n){if(!1===this.isInitialized&&console.warn("Generator init was not called before blockToCode was called."),!t)return"";if(!t.isEnabled())return n?"":this.blockToCode(t.getNextBlock());if(t.isInsertionMarker())return n?"":this.blockToCode(t.getChildren(!1)[0]);var o=this[t.type];if("function"!=typeof o)throw Error('Language "'+this.name_+'" does not know how to generate code for block type "'+t.type+'".');if(o=o.call(t,t),Array.isArray(o)){if(!t.outputConnection)throw TypeError("Expecting string from statement block: "+t.type);return[this.scrub_(t,o[0],n),o[1]]}if("string"==typeof o)return this.STATEMENT_PREFIX&&!t.suppressPrefixSuffix&&(o=this.injectId(this.STATEMENT_PREFIX,t)+o),this.STATEMENT_SUFFIX&&!t.suppressPrefixSuffix&&(o+=this.injectId(this.STATEMENT_SUFFIX,t)),this.scrub_(t,o,n);if(null===o)return"";throw SyntaxError("Invalid code generated: "+o)},e.Generator.prototype.valueToCode=function(t,n,o){if(isNaN(o))throw TypeError("Expecting valid order from block: "+t.type);var r=t.getInputTargetBlock(n);if(!r||""===(n=this.blockToCode(r)))return"";if(!Array.isArray(n))throw TypeError("Expecting tuple from value block: "+r.type);if(t=n[0],n=n[1],isNaN(n))throw TypeError("Expecting valid order from value block: "+r.type);if(!t)return"";r=!1;var p=Math.floor(o),b=Math.floor(n);if(p<=b&&(p!=b||0!=p&&99!=p))for(r=!0,p=0;p<this.ORDER_OVERRIDES.length;p++)if(this.ORDER_OVERRIDES[p][0]==o&&this.ORDER_OVERRIDES[p][1]==n){r=!1;break}return r&&(t="("+t+")"),t},e.Generator.prototype.statementToCode=function(t,n){if(t=t.getInputTargetBlock(n),"string"!=typeof(n=this.blockToCode(t)))throw TypeError("Expecting code from statement block: "+(t&&t.type));return n&&(n=this.prefixLines(n,this.INDENT)),n},e.Generator.prototype.addLoopTrap=function(t,n){return this.INFINITE_LOOP_TRAP&&(t=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,n),this.INDENT)+t),this.STATEMENT_SUFFIX&&!n.suppressPrefixSuffix&&(t=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,n),this.INDENT)+t),this.STATEMENT_PREFIX&&!n.suppressPrefixSuffix&&(t+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,n),this.INDENT)),t},e.Generator.prototype.injectId=function(t,n){return n=n.id.replace(/\$/g,"$$$$"),t.replace(/%1/g,"'"+n+"'")},e.Generator.prototype.RESERVED_WORDS_="",e.Generator.prototype.addReservedWords=function(t){this.RESERVED_WORDS_+=t+","},e.Generator.prototype.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",Object.defineProperty(e.Generator.prototype,"variableDB_",{get:function(){return e.utils.deprecation.warn("variableDB_","May 2021","May 2026","nameDB_"),this.nameDB_},set:function(t){e.utils.deprecation.warn("variableDB_","May 2021","May 2026","nameDB_"),this.nameDB_=t}}),e.Generator.prototype.provideFunction_=function(t,n){if(!this.definitions_[t]){var r,o=this.nameDB_.getDistinctName(t,e.PROCEDURE_CATEGORY_NAME);for(this.functionNames_[t]=o,n=n.join("\n").replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,o);r!=n;)r=n,n=n.replace(/^(( {2})*) {2}/gm,"$1\0");n=n.replace(/\0/g,this.INDENT),this.definitions_[t]=n}return this.functionNames_[t]},e.Generator.prototype.init=function(t){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)},e.Generator.prototype.scrub_=function(t,n,o){return n},e.Generator.prototype.finish=function(t){return delete this.definitions_,delete this.functionNames_,t},e.Generator.prototype.scrubNakedValue=function(t){return t},e.IToolboxItem=function(){},e.ISelectableToolboxItem=function(){},e.ICollapsibleToolboxItem=function(){},e.ToolboxItem=function(t,n,o){this.id_=t.toolboxitemid||e.utils.IdGenerator.getNextUniqueId(),this.level_=(this.parent_=o||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=t,this.parentToolbox_=n,this.workspace_=this.parentToolbox_.getWorkspace()},e.ToolboxItem.prototype.init=function(){},e.ToolboxItem.prototype.getDiv=function(){return null},e.ToolboxItem.prototype.getId=function(){return this.id_},e.ToolboxItem.prototype.getParent=function(){return null},e.ToolboxItem.prototype.getLevel=function(){return this.level_},e.ToolboxItem.prototype.isSelectable=function(){return!1},e.ToolboxItem.prototype.isCollapsible=function(){return!1},e.ToolboxItem.prototype.dispose=function(){},e.ToolboxCategory=function(t,n,o){e.ToolboxCategory.superClass_.constructor.call(this,t,n,o),this.name_=e.utils.replaceMessageReferences(t.name),this.colour_=this.getColour_(t),this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.cssConfig_=this.makeDefaultCssConfig_(),e.utils.object.mixin(this.cssConfig_,t.cssconfig||t.cssConfig),this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.parseContents_(t)},e.utils.object.inherits(e.ToolboxCategory,e.ToolboxItem),e.ToolboxCategory.registrationName="category",e.ToolboxCategory.nestedPadding=19,e.ToolboxCategory.borderWidth=8,e.ToolboxCategory.defaultBackgroundColour="#57e",e.ToolboxCategory.prototype.makeDefaultCssConfig_=function(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}},e.ToolboxCategory.prototype.parseContents_=function(t){var n=t.contents;if(t.custom)this.flyoutItems_=t.custom;else if(n){t=0;for(var o;o=n[t];t++)this.flyoutItems_.push(o)}},e.ToolboxCategory.prototype.init=function(){this.createDom_(),"true"==this.toolboxItemDef_.hidden&&this.hide()},e.ToolboxCategory.prototype.createDom_=function(){return this.htmlDiv_=this.createContainer_(),e.utils.aria.setRole(this.htmlDiv_,e.utils.aria.Role.TREEITEM),e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.SELECTED,!1),e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.LEVEL,this.level_),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),e.utils.aria.setRole(this.iconDom_,e.utils.aria.Role.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_),e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.LABELLEDBY,this.labelDom_.getAttribute("id")),this.addColourBorder_(this.colour_),this.htmlDiv_},e.ToolboxCategory.prototype.createContainer_=function(){var t=document.createElement("div");return e.utils.dom.addClass(t,this.cssConfig_.container),t},e.ToolboxCategory.prototype.createRowContainer_=function(){var t=document.createElement("div");e.utils.dom.addClass(t,this.cssConfig_.row);var n=e.ToolboxCategory.nestedPadding*this.getLevel();return n=n.toString()+"px",this.workspace_.RTL?t.style.paddingRight=n:t.style.paddingLeft=n,t},e.ToolboxCategory.prototype.createRowContentsContainer_=function(){var t=document.createElement("div");return e.utils.dom.addClass(t,this.cssConfig_.rowcontentcontainer),t},e.ToolboxCategory.prototype.createIconDom_=function(){var t=document.createElement("span");return this.parentToolbox_.isHorizontal()||e.utils.dom.addClass(t,this.cssConfig_.icon),t.style.display="inline-block",t},e.ToolboxCategory.prototype.createLabelDom_=function(t){var n=document.createElement("span");return n.setAttribute("id",this.getId()+".label"),n.textContent=t,e.utils.dom.addClass(n,this.cssConfig_.label),n},e.ToolboxCategory.prototype.refreshTheme=function(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)},e.ToolboxCategory.prototype.addColourBorder_=function(t){t&&(t=e.ToolboxCategory.borderWidth+"px solid "+(t||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=t:this.rowDiv_.style.borderLeft=t)},e.ToolboxCategory.prototype.getColour_=function(t){var n=t.categorystyle||t.categoryStyle;return(t=t.colour)&&n?(console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour'),""):n?this.getColourfromStyle_(n):this.parseColour_(t)},e.ToolboxCategory.prototype.getColourfromStyle_=function(t){var n=this.workspace_.getTheme();if(t&&n){if((n=n.categoryStyles[t])&&n.colour)return this.parseColour_(n.colour);console.warn('Style "'+t+'" must exist and contain a colour value')}return""},e.ToolboxCategory.prototype.getClickTarget=function(){return this.rowDiv_},e.ToolboxCategory.prototype.parseColour_=function(t){if(null==(t=e.utils.replaceMessageReferences(t))||""===t)return"";var n=Number(t);return isNaN(n)?(n=e.utils.colour.parse(t))?n:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+t),""):e.hueToHex(n)},e.ToolboxCategory.prototype.openIcon_=function(t){t&&(e.utils.dom.removeClasses(t,this.cssConfig_.closedicon),e.utils.dom.addClass(t,this.cssConfig_.openicon))},e.ToolboxCategory.prototype.closeIcon_=function(t){t&&(e.utils.dom.removeClasses(t,this.cssConfig_.openicon),e.utils.dom.addClass(t,this.cssConfig_.closedicon))},e.ToolboxCategory.prototype.setVisible_=function(t){this.htmlDiv_.style.display=t?"block":"none",this.isHidden_=!t,this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()},e.ToolboxCategory.prototype.hide=function(){this.setVisible_(!1)},e.ToolboxCategory.prototype.show=function(){this.setVisible_(!0)},e.ToolboxCategory.prototype.isVisible=function(){return!this.isHidden_&&this.allAncestorsExpanded_()},e.ToolboxCategory.prototype.allAncestorsExpanded_=function(){for(var t=this;t.getParent();)if(!(t=t.getParent()).isExpanded())return!1;return!0},e.ToolboxCategory.prototype.isSelectable=function(){return this.isVisible()&&!this.isDisabled_},e.ToolboxCategory.prototype.onClick=function(t){},e.ToolboxCategory.prototype.setSelected=function(t){if(t){var n=this.parseColour_(e.ToolboxCategory.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||n,e.utils.dom.addClass(this.rowDiv_,this.cssConfig_.selected)}else this.rowDiv_.style.backgroundColor="",e.utils.dom.removeClass(this.rowDiv_,this.cssConfig_.selected);e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.SELECTED,t)},e.ToolboxCategory.prototype.setDisabled=function(t){this.isDisabled_=t,this.getDiv().setAttribute("disabled",t),t?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")},e.ToolboxCategory.prototype.getName=function(){return this.name_},e.ToolboxCategory.prototype.getParent=function(){return this.parent_},e.ToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},e.ToolboxCategory.prototype.getContents=function(){return this.flyoutItems_},e.ToolboxCategory.prototype.updateFlyoutContents=function(t){this.flyoutItems_=[],"string"==typeof t?this.toolboxItemDef_.custom=t:(delete this.toolboxItemDef_.custom,this.toolboxItemDef_.contents=e.utils.toolbox.convertFlyoutDefToJsonArray(t)),this.parseContents_(this.toolboxItemDef_)},e.ToolboxCategory.prototype.dispose=function(){e.utils.dom.removeNode(this.htmlDiv_)},e.Css.register([".blocklyTreeRow:not(.blocklyTreeSelected):hover {","background-color: rgba(255, 255, 255, 0.2);","}",'.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {',"margin: 1px 5px 1px 0;","}",'.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {',"margin: 1px 0 1px 5px;","}",".blocklyTreeRow {","height: 22px;","line-height: 22px;","margin-bottom: 3px;","padding-right: 8px;","white-space: nowrap;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {',"margin-left: 8px;","padding-right: 0px","}",".blocklyTreeIcon {","background-image: url(<<<PATH>>>/sprites.png);","height: 16px;","vertical-align: middle;","visibility: hidden;","width: 16px;","}",".blocklyTreeIconClosed {","background-position: -32px -1px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {',"background-position: 0 -1px;","}",".blocklyTreeSelected>.blocklyTreeIconClosed {","background-position: -32px -17px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {',"background-position: 0 -17px;","}",".blocklyTreeIconOpen {","background-position: -16px -1px;","}",".blocklyTreeSelected>.blocklyTreeIconOpen {","background-position: -16px -17px;","}",".blocklyTreeLabel {","cursor: default;","font: 16px sans-serif;","padding: 0 3px;","vertical-align: middle;","}",".blocklyToolboxDelete .blocklyTreeLabel {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyTreeSelected .blocklyTreeLabel {","color: #fff;","}"]),e.registry.register(e.registry.Type.TOOLBOX_ITEM,e.ToolboxCategory.registrationName,e.ToolboxCategory),e.ToolboxSeparator=function(t,n){e.ToolboxSeparator.superClass_.constructor.call(this,t,n),this.cssConfig_={container:"blocklyTreeSeparator"},e.utils.object.mixin(this.cssConfig_,t.cssconfig||t.cssConfig)},e.utils.object.inherits(e.ToolboxSeparator,e.ToolboxItem),e.ToolboxSeparator.registrationName="sep",e.ToolboxSeparator.prototype.init=function(){this.createDom_()},e.ToolboxSeparator.prototype.createDom_=function(){var t=document.createElement("div");return e.utils.dom.addClass(t,this.cssConfig_.container),this.htmlDiv_=t},e.ToolboxSeparator.prototype.getDiv=function(){return this.htmlDiv_},e.ToolboxSeparator.prototype.dispose=function(){e.utils.dom.removeNode(this.htmlDiv_)},e.Css.register('.blocklyTreeSeparator {,border-bottom: solid #e5e5e5 1px;,height: 0;,margin: 5px 0;,},.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {,border-right: solid #e5e5e5 1px;,border-bottom: none;,height: auto;,margin: 0 5px 0 5px;,padding: 5px 0;,width: 0;,}'.split(",")),e.registry.register(e.registry.Type.TOOLBOX_ITEM,e.ToolboxSeparator.registrationName,e.ToolboxSeparator),e.CollapsibleToolboxCategory=function(t,n,o){this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[],e.CollapsibleToolboxCategory.superClass_.constructor.call(this,t,n,o)},e.utils.object.inherits(e.CollapsibleToolboxCategory,e.ToolboxCategory),e.CollapsibleToolboxCategory.registrationName="collapsibleCategory",e.CollapsibleToolboxCategory.prototype.makeDefaultCssConfig_=function(){var t=e.CollapsibleToolboxCategory.superClass_.makeDefaultCssConfig_.call(this);return t.contents="blocklyToolboxContents",t},e.CollapsibleToolboxCategory.prototype.parseContents_=function(t){var n=t.contents,o=!0;if(t.custom)this.flyoutItems_=t.custom;else if(n){t=0;for(var r;r=n[t];t++)!e.registry.hasItem(e.registry.Type.TOOLBOX_ITEM,r.kind)||r.kind.toLowerCase()==e.ToolboxSeparator.registrationName&&o?(this.flyoutItems_.push(r),o=!0):(this.createToolboxItem_(r),o=!1)}},e.CollapsibleToolboxCategory.prototype.createToolboxItem_=function(t){var n=t.kind;"CATEGORY"==n.toUpperCase()&&e.utils.toolbox.isCategoryCollapsible(t)&&(n=e.CollapsibleToolboxCategory.registrationName),t=new(e.registry.getClass(e.registry.Type.TOOLBOX_ITEM,n))(t,this.parentToolbox_,this),this.toolboxItems_.push(t)},e.CollapsibleToolboxCategory.prototype.init=function(){e.CollapsibleToolboxCategory.superClass_.init.call(this),this.setExpanded("true"==this.toolboxItemDef_.expanded||this.toolboxItemDef_.expanded)},e.CollapsibleToolboxCategory.prototype.createDom_=function(){e.CollapsibleToolboxCategory.superClass_.createDom_.call(this);var t=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(t),e.utils.aria.setRole(this.subcategoriesDiv_,e.utils.aria.Role.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.htmlDiv_},e.CollapsibleToolboxCategory.prototype.createIconDom_=function(){var t=document.createElement("span");return this.parentToolbox_.isHorizontal()||(e.utils.dom.addClass(t,this.cssConfig_.icon),t.style.visibility="visible"),t.style.display="inline-block",t},e.CollapsibleToolboxCategory.prototype.createSubCategoriesDom_=function(t){var n=document.createElement("div");e.utils.dom.addClass(n,this.cssConfig_.contents);for(var o=0;o<t.length;o++){var r=t[o];r.init();var p=r.getDiv();n.appendChild(p),r.getClickTarget&&r.getClickTarget().setAttribute("id",r.getId())}return n},e.CollapsibleToolboxCategory.prototype.setExpanded=function(t){this.expanded_!=t&&((this.expanded_=t)?(this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_)):(this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)),e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.EXPANDED,t),this.parentToolbox_.handleToolboxItemResize())},e.CollapsibleToolboxCategory.prototype.setVisible_=function(t){this.htmlDiv_.style.display=t?"block":"none";for(var o,n=0;o=this.getChildToolboxItems()[n];n++)o.setVisible_(t);this.isHidden_=!t,this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()},e.CollapsibleToolboxCategory.prototype.isExpanded=function(){return this.expanded_},e.CollapsibleToolboxCategory.prototype.isCollapsible=function(){return!0},e.CollapsibleToolboxCategory.prototype.onClick=function(t){this.toggleExpanded()},e.CollapsibleToolboxCategory.prototype.toggleExpanded=function(){this.setExpanded(!this.expanded_)},e.CollapsibleToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},e.CollapsibleToolboxCategory.prototype.getChildToolboxItems=function(){return this.toolboxItems_},e.registry.register(e.registry.Type.TOOLBOX_ITEM,e.CollapsibleToolboxCategory.registrationName,e.CollapsibleToolboxCategory),e.Events.ToolboxItemSelect=function(t,n,o){e.Events.ToolboxItemSelect.superClass_.constructor.call(this,o),this.oldItem=t,this.newItem=n},e.utils.object.inherits(e.Events.ToolboxItemSelect,e.Events.UiBase),e.Events.ToolboxItemSelect.prototype.type=e.Events.TOOLBOX_ITEM_SELECT,e.Events.ToolboxItemSelect.prototype.toJson=function(){var t=e.Events.ToolboxItemSelect.superClass_.toJson.call(this);return t.oldItem=this.oldItem,t.newItem=this.newItem,t},e.Events.ToolboxItemSelect.prototype.fromJson=function(t){e.Events.ToolboxItemSelect.superClass_.fromJson.call(this,t),this.oldItem=t.oldItem,this.newItem=t.newItem},e.registry.register(e.registry.Type.EVENT,e.Events.TOOLBOX_ITEM_SELECT,e.Events.ToolboxItemSelect),e.IAutoHideable=function(){},e.IStyleable=function(){},e.IToolbox=function(){},e.Toolbox=function(t){e.Toolbox.superClass_.constructor.call(this),this.workspace_=t,this.id="toolbox",this.toolboxDef_=t.options.languageTree||{contents:[]},this.horizontalLayout_=t.options.horizontalLayout,this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.contents_=[],this.height_=this.width_=0,this.RTL=t.options.RTL,this.flyout_=null,this.contentMap_=Object.create(null),this.toolboxPosition=t.options.toolboxPosition,this.previouslySelectedItem_=this.selectedItem_=null,this.boundEvents_=[]},e.utils.object.inherits(e.Toolbox,e.DeleteArea),e.Toolbox.prototype.onShortcut=function(t){return!1},e.Toolbox.prototype.init=function(){var t=this.workspace_,n=t.getParentSvg();this.flyout_=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),e.utils.dom.insertAfter(this.flyout_.createDom("svg"),n),this.setVisible(!0),this.flyout_.init(t),this.render(this.toolboxDef_),(t=t.getThemeManager()).subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),t.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[e.ComponentManager.Capability.AUTOHIDEABLE,e.ComponentManager.Capability.DELETE_AREA,e.ComponentManager.Capability.DRAG_TARGET]})},e.Toolbox.prototype.createDom_=function(t){t=t.getParentSvg();var n=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,e.utils.aria.setRole(this.contentsDiv_,e.utils.aria.Role.TREE),n.appendChild(this.contentsDiv_),t.parentNode.insertBefore(n,t),this.attachEvents_(n,this.contentsDiv_),n},e.Toolbox.prototype.createContainer_=function(){var t=document.createElement("div");return t.setAttribute("layout",this.isHorizontal()?"h":"v"),e.utils.dom.addClass(t,"blocklyToolboxDiv"),e.utils.dom.addClass(t,"blocklyNonSelectable"),t.setAttribute("dir",this.RTL?"RTL":"LTR"),t},e.Toolbox.prototype.createContentsContainer_=function(){var t=document.createElement("div");return e.utils.dom.addClass(t,"blocklyToolboxContents"),this.isHorizontal()&&(t.style.flexDirection="row"),t},e.Toolbox.prototype.attachEvents_=function(t,n){t=e.browserEvents.conditionalBind(t,"click",this,this.onClick_,!1,!0),this.boundEvents_.push(t),n=e.browserEvents.conditionalBind(n,"keydown",this,this.onKeyDown_,!1,!0),this.boundEvents_.push(n)},e.Toolbox.prototype.onClick_=function(t){if(e.utils.isRightButton(t)||t.target==this.HtmlDiv)e.hideChaff(!1);else{var n=t.target.getAttribute("id");n&&(n=this.getToolboxItemById(n)).isSelectable()&&(this.setSelectedItem(n),n.onClick(t)),e.hideChaff(!0)}e.Touch.clearTouchIdentifier()},e.Toolbox.prototype.onKeyDown_=function(t){var n=!1;switch(t.keyCode){case e.utils.KeyCodes.DOWN:n=this.selectNext_();break;case e.utils.KeyCodes.UP:n=this.selectPrevious_();break;case e.utils.KeyCodes.LEFT:n=this.selectParent_();break;case e.utils.KeyCodes.RIGHT:n=this.selectChild_();break;case e.utils.KeyCodes.ENTER:case e.utils.KeyCodes.SPACE:this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),n=!0);break;default:n=!1}!n&&this.selectedItem_&&this.selectedItem_.onKeyDown&&(n=this.selectedItem_.onKeyDown(t)),n&&t.preventDefault()},e.Toolbox.prototype.createFlyout_=function(){var t=this.workspace_,n=new e.Options({parentWorkspace:t,rtl:t.RTL,oneBasedIndex:t.options.oneBasedIndex,horizontalLayout:t.horizontalLayout,renderer:t.options.renderer,rendererOverrides:t.options.rendererOverrides,move:{scrollbars:!0}});return n.toolboxPosition=t.options.toolboxPosition,new(e.registry.getClassFromOptions(t.horizontalLayout?e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX:e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,t.options,!0))(n)},e.Toolbox.prototype.render=function(t){this.toolboxDef_=t;for(var n=0;n<this.contents_.length;n++){var o=this.contents_[n];o&&o.dispose()}this.contents_=[],this.contentMap_=Object.create(null),this.renderContents_(t.contents),this.position(),this.handleToolboxItemResize()},e.Toolbox.prototype.renderContents_=function(t){for(var r,n=document.createDocumentFragment(),o=0;r=t[o];o++)this.createToolboxItem_(r,n);this.contentsDiv_.appendChild(n)},e.Toolbox.prototype.createToolboxItem_=function(t,n){var o=t.kind;"CATEGORY"==o.toUpperCase()&&e.utils.toolbox.isCategoryCollapsible(t)&&(o=e.CollapsibleToolboxCategory.registrationName),(o=e.registry.getClass(e.registry.Type.TOOLBOX_ITEM,o.toLowerCase()))&&(t=new o(t,this),this.addToolboxItem_(t),t.init(),(o=t.getDiv())&&n.appendChild(o),t.getClickTarget&&t.getClickTarget().setAttribute("id",t.getId()))},e.Toolbox.prototype.addToolboxItem_=function(t){if(this.contents_.push(t),this.contentMap_[t.getId()]=t,t.isCollapsible())for(var o,n=0;o=t.getChildToolboxItems()[n];n++)this.addToolboxItem_(o)},e.Toolbox.prototype.getToolboxItems=function(){return this.contents_},e.Toolbox.prototype.addStyle=function(t){e.utils.dom.addClass(this.HtmlDiv,t)},e.Toolbox.prototype.removeStyle=function(t){e.utils.dom.removeClass(this.HtmlDiv,t)},e.Toolbox.prototype.getClientRect=function(){if(!this.HtmlDiv||!this.isVisible_)return null;var t=this.HtmlDiv.getBoundingClientRect(),n=t.top,o=n+t.height,r=t.left;return t=r+t.width,this.toolboxPosition==e.utils.toolbox.Position.TOP?new e.utils.Rect(-1e7,o,-1e7,1e7):this.toolboxPosition==e.utils.toolbox.Position.BOTTOM?new e.utils.Rect(n,1e7,-1e7,1e7):this.toolboxPosition==e.utils.toolbox.Position.LEFT?new e.utils.Rect(-1e7,1e7,-1e7,t):new e.utils.Rect(-1e7,1e7,r,1e7)},e.Toolbox.prototype.wouldDelete=function(t,n){return this.updateWouldDelete_(t instanceof e.BlockSvg?!t.getParent()&&t.isDeletable():t.isDeletable()),this.wouldDelete_},e.Toolbox.prototype.onDragEnter=function(t){this.updateCursorDeleteStyle_(!0)},e.Toolbox.prototype.onDragExit=function(t){this.updateCursorDeleteStyle_(!1)},e.Toolbox.prototype.onDrop=function(t){this.updateCursorDeleteStyle_(!1)},e.Toolbox.prototype.updateWouldDelete_=function(t){t!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=t,this.updateCursorDeleteStyle_(!0))},e.Toolbox.prototype.updateCursorDeleteStyle_=function(t){var n=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";t?this.addStyle(n):this.removeStyle(n)},e.Toolbox.prototype.getToolboxItemById=function(t){return this.contentMap_[t]||null},e.Toolbox.prototype.getWidth=function(){return this.width_},e.Toolbox.prototype.getHeight=function(){return this.height_},e.Toolbox.prototype.getFlyout=function(){return this.flyout_},e.Toolbox.prototype.getWorkspace=function(){return this.workspace_},e.Toolbox.prototype.getSelectedItem=function(){return this.selectedItem_},e.Toolbox.prototype.getPreviouslySelectedItem=function(){return this.previouslySelectedItem_},e.Toolbox.prototype.isHorizontal=function(){return this.horizontalLayout_},e.Toolbox.prototype.position=function(){var t=this.workspace_.getMetrics(),n=this.HtmlDiv;n&&(this.horizontalLayout_?(n.style.left="0",n.style.height="auto",n.style.width="100%",this.height_=n.offsetHeight,this.width_=t.viewWidth,this.toolboxPosition==e.utils.toolbox.Position.TOP?n.style.top="0":n.style.bottom="0"):(this.toolboxPosition==e.utils.toolbox.Position.RIGHT?n.style.right="0":n.style.left="0",n.style.height="100%",this.width_=n.offsetWidth,this.height_=t.viewHeight),this.flyout_.position())},e.Toolbox.prototype.handleToolboxItemResize=function(){var t=this.workspace_,n=this.HtmlDiv.getBoundingClientRect();t.translate(this.toolboxPosition==e.utils.toolbox.Position.LEFT?t.scrollX+n.width:t.scrollX,this.toolboxPosition==e.utils.toolbox.Position.TOP?t.scrollY+n.height:t.scrollY),e.svgResize(t)},e.Toolbox.prototype.clearSelection=function(){this.setSelectedItem(null)},e.Toolbox.prototype.refreshTheme=function(){for(var t=0;t<this.contents_.length;t++){var n=this.contents_[t];n.refreshTheme&&n.refreshTheme()}},e.Toolbox.prototype.refreshSelection=function(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout_.show(this.selectedItem_.getContents())},e.Toolbox.prototype.setVisible=function(t){this.isVisible_!==t&&(this.HtmlDiv.style.display=t?"block":"none",this.isVisible_=t,this.workspace_.recordDragTargets())},e.Toolbox.prototype.autoHide=function(t){!t&&this.flyout_&&this.flyout_.autoClose&&this.clearSelection()},e.Toolbox.prototype.setSelectedItem=function(t){var n=this.selectedItem_;!t&&!n||t&&!t.isSelectable()||(this.shouldDeselectItem_(n,t)&&null!=n&&this.deselectItem_(n),this.shouldSelectItem_(n,t)&&null!=t&&this.selectItem_(n,t),this.updateFlyout_(n,t),this.fireSelectEvent_(n,t))},e.Toolbox.prototype.shouldDeselectItem_=function(t,n){return null!=t&&(!t.isCollapsible()||t!=n)},e.Toolbox.prototype.shouldSelectItem_=function(t,n){return null!=n&&n!=t},e.Toolbox.prototype.deselectItem_=function(t){this.selectedItem_=null,this.previouslySelectedItem_=t,t.setSelected(!1),e.utils.aria.setState(this.contentsDiv_,e.utils.aria.State.ACTIVEDESCENDANT,"")},e.Toolbox.prototype.selectItem_=function(t,n){this.selectedItem_=n,this.previouslySelectedItem_=t,n.setSelected(!0),e.utils.aria.setState(this.contentsDiv_,e.utils.aria.State.ACTIVEDESCENDANT,n.getId())},e.Toolbox.prototype.selectItemByPosition=function(t){-1<t&&t<this.contents_.length&&(t=this.contents_[t]).isSelectable()&&this.setSelectedItem(t)},e.Toolbox.prototype.updateFlyout_=function(t,n){(t!=n||n.isCollapsible())&&n&&n.getContents().length?(this.flyout_.show(n.getContents()),this.flyout_.scrollToStart()):this.flyout_.hide()},e.Toolbox.prototype.fireSelectEvent_=function(t,n){var o=t&&t.getName(),r=n&&n.getName();t==n&&(r=null),t=new(e.Events.get(e.Events.TOOLBOX_ITEM_SELECT))(o,r,this.workspace_.id),e.Events.fire(t)},e.Toolbox.prototype.selectParent_=function(){return!(!this.selectedItem_||(this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.setExpanded(!1),0):!this.selectedItem_.getParent()||!this.selectedItem_.getParent().isSelectable()||(this.setSelectedItem(this.selectedItem_.getParent()),0)))},e.Toolbox.prototype.selectChild_=function(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;var t=this.selectedItem_;return t.isExpanded()?this.selectNext_():t.setExpanded(!0),!0},e.Toolbox.prototype.selectNext_=function(){if(!this.selectedItem_)return!1;var t=this.contents_.indexOf(this.selectedItem_)+1;if(-1<t&&t<this.contents_.length){for(var n=this.contents_[t];n&&!n.isSelectable();)n=this.contents_[++t];if(n&&n.isSelectable())return this.setSelectedItem(n),!0}return!1},e.Toolbox.prototype.selectPrevious_=function(){if(!this.selectedItem_)return!1;var t=this.contents_.indexOf(this.selectedItem_)-1;if(-1<t&&t<this.contents_.length){for(var n=this.contents_[t];n&&!n.isSelectable();)n=this.contents_[--t];if(n&&n.isSelectable())return this.setSelectedItem(n),!0}return!1},e.Toolbox.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout_.dispose();for(var t=0;t<this.contents_.length;t++)this.contents_[t].dispose();for(t=0;t<this.boundEvents_.length;t++)e.browserEvents.unbind(this.boundEvents_[t]);this.boundEvents_=[],this.contents_=[],this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),e.utils.dom.removeNode(this.HtmlDiv)},e.Css.register([".blocklyToolboxDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyToolboxGrab {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyToolboxDiv {","background-color: #ddd;","overflow-x: visible;","overflow-y: auto;","padding: 4px 0 4px 0;","position: absolute;","z-index: 70;","-webkit-tap-highlight-color: transparent;","}",".blocklyToolboxContents {","display: flex;","flex-wrap: wrap;","flex-direction: column;","}",".blocklyToolboxContents:focus {","outline: none;","}"]),e.registry.register(e.registry.Type.TOOLBOX,e.registry.DEFAULT,e.Toolbox),e.Events.TrashcanOpen=function(t,n){e.Events.TrashcanOpen.superClass_.constructor.call(this,n),this.isOpen=t},e.utils.object.inherits(e.Events.TrashcanOpen,e.Events.UiBase),e.Events.TrashcanOpen.prototype.type=e.Events.TRASHCAN_OPEN,e.Events.TrashcanOpen.prototype.toJson=function(){var t=e.Events.TrashcanOpen.superClass_.toJson.call(this);return t.isOpen=this.isOpen,t},e.Events.TrashcanOpen.prototype.fromJson=function(t){e.Events.TrashcanOpen.superClass_.fromJson.call(this,t),this.isOpen=t.isOpen},e.registry.register(e.registry.Type.EVENT,e.Events.TRASHCAN_OPEN,e.Events.TrashcanOpen),e.IPositionable=function(){},e.uiPosition={},e.uiPosition.verticalPosition={TOP:0,BOTTOM:1},e.uiPosition.horizontalPosition={LEFT:0,RIGHT:1},e.uiPosition.bumpDirection={UP:0,DOWN:1},e.uiPosition.getStartPositionRect=function(t,n,o,r,p,b){var I=b.scrollbar&&b.scrollbar.canScrollVertically();return t.horizontal===e.uiPosition.horizontalPosition.LEFT?(o=p.absoluteMetrics.left+o,I&&b.RTL&&(o+=e.Scrollbar.scrollbarThickness)):(o=p.absoluteMetrics.left+p.viewMetrics.width-n.width-o,I&&!b.RTL&&(o-=e.Scrollbar.scrollbarThickness)),t.vertical===e.uiPosition.verticalPosition.TOP?t=p.absoluteMetrics.top+r:(t=p.absoluteMetrics.top+p.viewMetrics.height-n.height-r,b.scrollbar&&b.scrollbar.canScrollHorizontally()&&(t-=e.Scrollbar.scrollbarThickness)),new e.utils.Rect(t,t+n.height,o,o+n.width)},e.uiPosition.getCornerOppositeToolbox=function(t,n){return{horizontal:n.toolboxMetrics.position===e.utils.toolbox.Position.LEFT||t.horizontalLayout&&!t.RTL?e.uiPosition.horizontalPosition.RIGHT:e.uiPosition.horizontalPosition.LEFT,vertical:n.toolboxMetrics.position===e.utils.toolbox.Position.BOTTOM?e.uiPosition.verticalPosition.TOP:e.uiPosition.verticalPosition.BOTTOM}},e.uiPosition.bumpPositionRect=function(t,n,o,r){for(var k,p=t.left,b=t.right-t.left,I=t.bottom-t.top,x=0;k=r[x];x++)t.intersects(k)&&(t=new e.utils.Rect(t=o===e.uiPosition.bumpDirection.UP?k.top-I-n:k.bottom+n,t+I,p,p+b),x=-1);return t},e.Trashcan=function(t){e.Trashcan.superClass_.constructor.call(this),this.workspace_=t,this.id="trashcan",this.contents_=[],this.flyout=null,0>=this.workspace_.options.maxTrashcanContents||(t=new e.Options({scrollbars:!0,parentWorkspace:this.workspace_,rtl:this.workspace_.RTL,oneBasedIndex:this.workspace_.options.oneBasedIndex,renderer:this.workspace_.options.renderer,rendererOverrides:this.workspace_.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace_.horizontalLayout?(t.toolboxPosition=this.workspace_.toolboxPosition==e.utils.toolbox.Position.TOP?e.utils.toolbox.Position.BOTTOM:e.utils.toolbox.Position.TOP,this.flyout=new(e.registry.getClassFromOptions(e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace_.options,!0))(t)):(t.toolboxPosition=this.workspace_.toolboxPosition==e.utils.toolbox.Position.RIGHT?e.utils.toolbox.Position.LEFT:e.utils.toolbox.Position.RIGHT,this.flyout=new(e.registry.getClassFromOptions(e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,this.workspace_.options,!0))(t)),this.workspace_.addChangeListener(this.onDelete_.bind(this)))},e.utils.object.inherits(e.Trashcan,e.DeleteArea),e.Trashcan.prototype.WIDTH_=47,e.Trashcan.prototype.BODY_HEIGHT_=44,e.Trashcan.prototype.LID_HEIGHT_=16,e.Trashcan.prototype.MARGIN_VERTICAL_=20,e.Trashcan.prototype.MARGIN_HORIZONTAL_=20,e.Trashcan.prototype.MARGIN_HOTSPOT_=10,e.Trashcan.prototype.SPRITE_LEFT_=0,e.Trashcan.prototype.SPRITE_TOP_=32,e.Trashcan.prototype.HAS_BLOCKS_LID_ANGLE_=.1,e.Trashcan.ANIMATION_LENGTH_=80,e.Trashcan.ANIMATION_FRAMES_=4,e.Trashcan.OPACITY_MIN_=.4,e.Trashcan.OPACITY_MAX_=.8,e.Trashcan.MAX_LID_ANGLE_=45,e.Trashcan.prototype.isLidOpen=!1,e.Trashcan.prototype.minOpenness_=0,e.Trashcan.prototype.svgGroup_=null,e.Trashcan.prototype.svgLid_=null,e.Trashcan.prototype.lidTask_=0,e.Trashcan.prototype.lidOpen_=0,e.Trashcan.prototype.left_=0,e.Trashcan.prototype.top_=0,e.Trashcan.prototype.initialized_=!1,e.Trashcan.prototype.createDom=function(){this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyTrash"},null);var t=String(Math.random()).substring(2),n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyTrashBodyClipPath"+t},this.svgGroup_);e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:this.WIDTH_,height:this.BODY_HEIGHT_,y:this.LID_HEIGHT_},n);var o=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,x:-this.SPRITE_LEFT_,height:e.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashBodyClipPath"+t+")"},this.svgGroup_);return o.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyTrashLidClipPath"+t},this.svgGroup_),e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:this.WIDTH_,height:this.LID_HEIGHT_},n),this.svgLid_=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,x:-this.SPRITE_LEFT_,height:e.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashLidClipPath"+t+")"},this.svgGroup_),this.svgLid_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),e.browserEvents.bind(this.svgGroup_,"mousedown",this,this.blockMouseDownWhenOpenable_),e.browserEvents.bind(this.svgGroup_,"mouseup",this,this.click),e.browserEvents.bind(o,"mouseover",this,this.mouseOver_),e.browserEvents.bind(o,"mouseout",this,this.mouseOut_),this.animateLid_(),this.svgGroup_},e.Trashcan.prototype.init=function(){0<this.workspace_.options.maxTrashcanContents&&(e.utils.dom.insertAfter(this.flyout.createDom(e.utils.Svg.SVG),this.workspace_.getParentSvg()),this.flyout.init(this.workspace_)),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[e.ComponentManager.Capability.AUTOHIDEABLE,e.ComponentManager.Capability.DELETE_AREA,e.ComponentManager.Capability.DRAG_TARGET,e.ComponentManager.Capability.POSITIONABLE]}),this.initialized_=!0,this.setLidOpen(!1)},e.Trashcan.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("trashcan"),this.svgGroup_&&(e.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.workspace_=this.svgLid_=null,clearTimeout(this.lidTask_)},e.Trashcan.prototype.hasContents_=function(){return!!this.contents_.length},e.Trashcan.prototype.contentsIsOpen=function(){return this.flyout.isVisible()},e.Trashcan.prototype.openFlyout=function(){if(!this.contentsIsOpen()){var t=this.contents_.map(e.Xml.textToDom);this.flyout.show(t),this.fireUiEvent_(!0)}},e.Trashcan.prototype.closeFlyout=function(){this.contentsIsOpen()&&(this.flyout.hide(),this.fireUiEvent_(!1))},e.Trashcan.prototype.autoHide=function(t){!t&&this.flyout&&this.closeFlyout()},e.Trashcan.prototype.emptyContents=function(){this.hasContents_()&&(this.contents_.length=0,this.setMinOpenness_(0),this.closeFlyout())},e.Trashcan.prototype.position=function(t,n){if(this.initialized_){var o=e.uiPosition.getCornerOppositeToolbox(this.workspace_,t);t=e.uiPosition.getStartPositionRect(o,new e.utils.Size(this.WIDTH_,this.BODY_HEIGHT_+this.LID_HEIGHT_),this.MARGIN_HORIZONTAL_,this.MARGIN_VERTICAL_,t,this.workspace_),n=e.uiPosition.bumpPositionRect(t,this.MARGIN_VERTICAL_,o.vertical===e.uiPosition.verticalPosition.TOP?e.uiPosition.bumpDirection.DOWN:e.uiPosition.bumpDirection.UP,n),this.top_=n.top,this.left_=n.left,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}},e.Trashcan.prototype.getBoundingRectangle=function(){return new e.utils.Rect(this.top_,this.top_+this.BODY_HEIGHT_+this.LID_HEIGHT_,this.left_,this.left_+this.WIDTH_)},e.Trashcan.prototype.getClientRect=function(){if(!this.svgGroup_)return null;var t=this.svgGroup_.getBoundingClientRect(),n=t.top+this.SPRITE_TOP_-this.MARGIN_HOTSPOT_;return new e.utils.Rect(n,n+this.LID_HEIGHT_+this.BODY_HEIGHT_+2*this.MARGIN_HOTSPOT_,t=t.left+this.SPRITE_LEFT_-this.MARGIN_HOTSPOT_,t+this.WIDTH_+2*this.MARGIN_HOTSPOT_)},e.Trashcan.prototype.onDragOver=function(t){this.setLidOpen(this.wouldDelete_)},e.Trashcan.prototype.onDragExit=function(t){this.setLidOpen(!1)},e.Trashcan.prototype.onDrop=function(t){setTimeout(this.setLidOpen.bind(this,!1),100)},e.Trashcan.prototype.setLidOpen=function(t){this.isLidOpen!=t&&(clearTimeout(this.lidTask_),this.isLidOpen=t,this.animateLid_())},e.Trashcan.prototype.animateLid_=function(){var t=e.Trashcan.ANIMATION_FRAMES_,n=1/(t+1);this.lidOpen_+=this.isLidOpen?n:-n,this.lidOpen_=Math.min(Math.max(this.lidOpen_,this.minOpenness_),1),this.setLidAngle_(this.lidOpen_*e.Trashcan.MAX_LID_ANGLE_),this.svgGroup_.style.opacity=(n=e.Trashcan.OPACITY_MIN_)+this.lidOpen_*(e.Trashcan.OPACITY_MAX_-n),this.lidOpen_>this.minOpenness_&&1>this.lidOpen_&&(this.lidTask_=setTimeout(this.animateLid_.bind(this),e.Trashcan.ANIMATION_LENGTH_/t))},e.Trashcan.prototype.setLidAngle_=function(t){var n=this.workspace_.toolboxPosition==e.utils.toolbox.Position.RIGHT||this.workspace_.horizontalLayout&&this.workspace_.RTL;this.svgLid_.setAttribute("transform","rotate("+(n?-t:t)+","+(n?4:this.WIDTH_-4)+","+(this.LID_HEIGHT_-2)+")")},e.Trashcan.prototype.setMinOpenness_=function(t){this.minOpenness_=t,this.isLidOpen||this.setLidAngle_(t*e.Trashcan.MAX_LID_ANGLE_)},e.Trashcan.prototype.closeLid=function(){this.setLidOpen(!1)},e.Trashcan.prototype.click=function(){this.hasContents_()&&this.openFlyout()},e.Trashcan.prototype.fireUiEvent_=function(t){t=new(e.Events.get(e.Events.TRASHCAN_OPEN))(t,this.workspace_.id),e.Events.fire(t)},e.Trashcan.prototype.blockMouseDownWhenOpenable_=function(t){!this.contentsIsOpen()&&this.hasContents_()&&t.stopPropagation()},e.Trashcan.prototype.mouseOver_=function(){this.hasContents_()&&this.setLidOpen(!0)},e.Trashcan.prototype.mouseOut_=function(){this.setLidOpen(!1)},e.Trashcan.prototype.onDelete_=function(t){if(!(0>=this.workspace_.options.maxTrashcanContents)&&t.type==e.Events.BLOCK_DELETE&&t.oldXml.tagName&&"shadow"!=t.oldXml.tagName.toLowerCase()&&(t=this.cleanBlockXML_(t.oldXml),-1==this.contents_.indexOf(t))){for(this.contents_.unshift(t);this.contents_.length>this.workspace_.options.maxTrashcanContents;)this.contents_.pop();this.setMinOpenness_(this.HAS_BLOCKS_LID_ANGLE_)}},e.Trashcan.prototype.cleanBlockXML_=function(t){for(var n=t=t.cloneNode(!0);n;){n.removeAttribute&&(n.removeAttribute("x"),n.removeAttribute("y"),n.removeAttribute("id"),n.removeAttribute("disabled"),"comment"==n.nodeName&&(n.removeAttribute("h"),n.removeAttribute("w"),n.removeAttribute("pinned")));var o=n.firstChild||n.nextSibling;if(!o)for(o=n.parentNode;o;){if(o.nextSibling){o=o.nextSibling;break}o=o.parentNode}n=o}return e.Xml.domToText(t)},e.VariablesDynamic={},e.VariablesDynamic.onCreateVariableButtonClick_String=function(t){e.Variables.createVariableButtonHandler(t.getTargetWorkspace(),void 0,"String")},e.VariablesDynamic.onCreateVariableButtonClick_Number=function(t){e.Variables.createVariableButtonHandler(t.getTargetWorkspace(),void 0,"Number")},e.VariablesDynamic.onCreateVariableButtonClick_Colour=function(t){e.Variables.createVariableButtonHandler(t.getTargetWorkspace(),void 0,"Colour")},e.VariablesDynamic.flyoutCategory=function(t){var n=[],o=document.createElement("button");return o.setAttribute("text",e.Msg.NEW_STRING_VARIABLE),o.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),n.push(o),(o=document.createElement("button")).setAttribute("text",e.Msg.NEW_NUMBER_VARIABLE),o.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),n.push(o),(o=document.createElement("button")).setAttribute("text",e.Msg.NEW_COLOUR_VARIABLE),o.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),n.push(o),t.registerButtonCallback("CREATE_VARIABLE_STRING",e.VariablesDynamic.onCreateVariableButtonClick_String),t.registerButtonCallback("CREATE_VARIABLE_NUMBER",e.VariablesDynamic.onCreateVariableButtonClick_Number),t.registerButtonCallback("CREATE_VARIABLE_COLOUR",e.VariablesDynamic.onCreateVariableButtonClick_Colour),t=e.VariablesDynamic.flyoutCategoryBlocks(t),n.concat(t)},e.VariablesDynamic.flyoutCategoryBlocks=function(t){var n=[];if(0<(t=t.getAllVariables()).length){if(e.Blocks.variables_set_dynamic){var o=t[t.length-1],r=e.utils.xml.createElement("block");r.setAttribute("type","variables_set_dynamic"),r.setAttribute("gap",24),r.appendChild(e.Variables.generateVariableFieldDom(o)),n.push(r)}if(e.Blocks.variables_get_dynamic){t.sort(e.VariableModel.compareByName),o=0;for(var p;p=t[o];o++)(r=e.utils.xml.createElement("block")).setAttribute("type","variables_get_dynamic"),r.setAttribute("gap",8),r.appendChild(e.Variables.generateVariableFieldDom(p)),n.push(r)}}return n},e.ZoomControls=function(t){this.workspace_=t,this.id="zoomControls",this.zoomResetGroup_=this.zoomOutGroup_=this.zoomInGroup_=this.onZoomOutWrapper_=this.onZoomInWrapper_=this.onZoomResetWrapper_=null},e.ZoomControls.prototype.WIDTH_=32,e.ZoomControls.prototype.HEIGHT_=32,e.ZoomControls.prototype.SMALL_SPACING_=2,e.ZoomControls.prototype.LARGE_SPACING_=11,e.ZoomControls.prototype.MARGIN_VERTICAL_=20,e.ZoomControls.prototype.MARGIN_HORIZONTAL_=20,e.ZoomControls.prototype.svgGroup_=null,e.ZoomControls.prototype.left_=0,e.ZoomControls.prototype.top_=0,e.ZoomControls.prototype.initialized_=!1,e.ZoomControls.prototype.createDom=function(){this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},null);var t=String(Math.random()).substring(2);return this.createZoomOutSvg_(t),this.createZoomInSvg_(t),this.workspace_.isMovable()&&this.createZoomResetSvg_(t),this.svgGroup_},e.ZoomControls.prototype.init=function(){this.workspace_.getComponentManager().addComponent({component:this,weight:2,capabilities:[e.ComponentManager.Capability.POSITIONABLE]}),this.initialized_=!0},e.ZoomControls.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("zoomControls"),this.svgGroup_&&e.utils.dom.removeNode(this.svgGroup_),this.onZoomResetWrapper_&&e.browserEvents.unbind(this.onZoomResetWrapper_),this.onZoomInWrapper_&&e.browserEvents.unbind(this.onZoomInWrapper_),this.onZoomOutWrapper_&&e.browserEvents.unbind(this.onZoomOutWrapper_)},e.ZoomControls.prototype.getBoundingRectangle=function(){var t=this.SMALL_SPACING_+2*this.HEIGHT_;return this.zoomResetGroup_&&(t+=this.LARGE_SPACING_+this.HEIGHT_),new e.utils.Rect(this.top_,this.top_+t,this.left_,this.left_+this.WIDTH_)},e.ZoomControls.prototype.position=function(t,n){if(this.initialized_){var o=e.uiPosition.getCornerOppositeToolbox(this.workspace_,t),r=this.SMALL_SPACING_+2*this.HEIGHT_;this.zoomResetGroup_&&(r+=this.LARGE_SPACING_+this.HEIGHT_),t=e.uiPosition.getStartPositionRect(o,new e.utils.Size(this.WIDTH_,r),this.MARGIN_HORIZONTAL_,this.MARGIN_VERTICAL_,t,this.workspace_),n=e.uiPosition.bumpPositionRect(t,this.MARGIN_VERTICAL_,(o=o.vertical)===e.uiPosition.verticalPosition.TOP?e.uiPosition.bumpDirection.DOWN:e.uiPosition.bumpDirection.UP,n),o===e.uiPosition.verticalPosition.TOP?(this.zoomInGroup_.setAttribute("transform","translate(0, "+(o=this.SMALL_SPACING_+this.HEIGHT_)+")"),this.zoomResetGroup_&&this.zoomResetGroup_.setAttribute("transform","translate(0, "+(o+this.LARGE_SPACING_+this.HEIGHT_)+")")):(this.zoomInGroup_.setAttribute("transform","translate(0, "+(o=this.zoomResetGroup_?this.LARGE_SPACING_+this.HEIGHT_:0)+")"),this.zoomOutGroup_.setAttribute("transform","translate(0, "+(o+this.SMALL_SPACING_+this.HEIGHT_)+")")),this.top_=n.top,this.left_=n.left,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}},e.ZoomControls.prototype.createZoomOutSvg_=function(t){this.zoomOutGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyZoomoutClipPath"+t},this.zoomOutGroup_);e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:32,height:32},n),e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,height:e.SPRITE.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+t+")"},this.zoomOutGroup_).setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),this.onZoomOutWrapper_=e.browserEvents.conditionalBind(this.zoomOutGroup_,"mousedown",null,this.zoom_.bind(this,-1))},e.ZoomControls.prototype.createZoomInSvg_=function(t){this.zoomInGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyZoominClipPath"+t},this.zoomInGroup_);e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:32,height:32},n),e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,height:e.SPRITE.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+t+")"},this.zoomInGroup_).setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),this.onZoomInWrapper_=e.browserEvents.conditionalBind(this.zoomInGroup_,"mousedown",null,this.zoom_.bind(this,1))},e.ZoomControls.prototype.zoom_=function(t,n){this.workspace_.markFocused(),this.workspace_.zoomCenter(t),this.fireZoomEvent_(),e.Touch.clearTouchIdentifier(),n.stopPropagation(),n.preventDefault()},e.ZoomControls.prototype.createZoomResetSvg_=function(t){this.zoomResetGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyZoomresetClipPath"+t},this.zoomResetGroup_);e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:32,height:32},n),e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,height:e.SPRITE.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+t+")"},this.zoomResetGroup_).setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),this.onZoomResetWrapper_=e.browserEvents.conditionalBind(this.zoomResetGroup_,"mousedown",null,this.resetZoom_.bind(this))},e.ZoomControls.prototype.resetZoom_=function(t){this.workspace_.markFocused();var n=Math.log(this.workspace_.options.zoomOptions.startScale/this.workspace_.scale)/Math.log(this.workspace_.options.zoomOptions.scaleSpeed);this.workspace_.beginCanvasTransition(),this.workspace_.zoomCenter(n),this.workspace_.scrollCenter(),setTimeout(this.workspace_.endCanvasTransition.bind(this.workspace_),500),this.fireZoomEvent_(),e.Touch.clearTouchIdentifier(),t.stopPropagation(),t.preventDefault()},e.ZoomControls.prototype.fireZoomEvent_=function(){var t=new(e.Events.get(e.Events.CLICK))(null,this.workspace_.id,"zoom_controls");e.Events.fire(t)},e.Css.register([".blocklyZoom>image, .blocklyZoom>svg>image {","opacity: .4;","}",".blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {","opacity: .6;","}",".blocklyZoom>image:active, .blocklyZoom>svg>image:active {","opacity: .8;","}"]),e.ShortcutItems={},e.ShortcutItems.names={ESCAPE:"escape",DELETE:"delete",COPY:"copy",CUT:"cut",PASTE:"paste",UNDO:"undo",REDO:"redo"},e.ShortcutItems.registerEscape=function(){var t={name:e.ShortcutItems.names.ESCAPE,preconditionFn:function(n){return!n.options.readOnly},callback:function(){return e.hideChaff(),!0}};e.ShortcutRegistry.registry.register(t),e.ShortcutRegistry.registry.addKeyMapping(e.utils.KeyCodes.ESC,t.name)},e.ShortcutItems.registerDelete=function(){var t={name:e.ShortcutItems.names.DELETE,preconditionFn:function(n){return!n.options.readOnly&&e.selected&&e.selected.isDeletable()},callback:function(n,o){return o.preventDefault(),!e.Gesture.inProgress()&&(e.deleteBlock(e.selected),!0)}};e.ShortcutRegistry.registry.register(t),e.ShortcutRegistry.registry.addKeyMapping(e.utils.KeyCodes.DELETE,t.name),e.ShortcutRegistry.registry.addKeyMapping(e.utils.KeyCodes.BACKSPACE,t.name)},e.ShortcutItems.registerCopy=function(){var t={name:e.ShortcutItems.names.COPY,preconditionFn:function(o){return!o.options.readOnly&&!e.Gesture.inProgress()&&e.selected&&e.selected.isDeletable()&&e.selected.isMovable()},callback:function(o,r){return r.preventDefault(),e.hideChaff(),e.copy(e.selected),!0}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.C,[e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.C,[e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.C,[e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerCut=function(){var t={name:e.ShortcutItems.names.CUT,preconditionFn:function(o){return!o.options.readOnly&&!e.Gesture.inProgress()&&e.selected&&e.selected.isDeletable()&&e.selected.isMovable()&&!e.selected.workspace.isFlyout},callback:function(){return e.copy(e.selected),e.deleteBlock(e.selected),!0}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.X,[e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.X,[e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.X,[e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerPaste=function(){var t={name:e.ShortcutItems.names.PASTE,preconditionFn:function(o){return!o.options.readOnly&&!e.Gesture.inProgress()},callback:function(){return e.paste()}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.V,[e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.V,[e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.V,[e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerUndo=function(){var t={name:e.ShortcutItems.names.UNDO,preconditionFn:function(o){return!o.options.readOnly&&!e.Gesture.inProgress()},callback:function(o){return e.hideChaff(),o.undo(!1),!0}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerRedo=function(){var t={name:e.ShortcutItems.names.REDO,preconditionFn:function(o){return!e.Gesture.inProgress()&&!o.options.readOnly},callback:function(o){return e.hideChaff(),o.undo(!0),!0}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.SHIFT,e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.SHIFT,e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.SHIFT,e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Y,[e.utils.KeyCodes.CTRL]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerDefaultShortcuts=function(){e.ShortcutItems.registerEscape(),e.ShortcutItems.registerDelete(),e.ShortcutItems.registerCopy(),e.ShortcutItems.registerCut(),e.ShortcutItems.registerPaste(),e.ShortcutItems.registerUndo(),e.ShortcutItems.registerRedo()},e.ShortcutItems.registerDefaultShortcuts(),e.ContextMenuItems={},e.ContextMenuItems.registerUndo=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.UNDO},preconditionFn:function(t){return 0<t.workspace.getUndoStack().length?"enabled":"disabled"},callback:function(t){t.workspace.undo(!1)},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},e.ContextMenuItems.registerRedo=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.REDO},preconditionFn:function(t){return 0<t.workspace.getRedoStack().length?"enabled":"disabled"},callback:function(t){t.workspace.undo(!0)},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},e.ContextMenuItems.registerCleanup=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.CLEAN_UP},preconditionFn:function(t){return t.workspace.isMovable()?1<t.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden"},callback:function(t){t.workspace.cleanUp()},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},e.ContextMenuItems.toggleOption_=function(t,n){for(var o=0,r=0;r<n.length;r++)for(var p=n[r];p;)setTimeout(p.setCollapsed.bind(p,t),o),p=p.getNextBlock(),o+=10},e.ContextMenuItems.registerCollapse=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.COLLAPSE_ALL},preconditionFn:function(t){if(t.workspace.options.collapse){t=t.workspace.getTopBlocks(!1);for(var n=0;n<t.length;n++)for(var o=t[n];o;){if(!o.isCollapsed())return"enabled";o=o.getNextBlock()}return"disabled"}return"hidden"},callback:function(t){e.ContextMenuItems.toggleOption_(!0,t.workspace.getTopBlocks(!0))},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},e.ContextMenuItems.registerExpand=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.EXPAND_ALL},preconditionFn:function(t){if(t.workspace.options.collapse){t=t.workspace.getTopBlocks(!1);for(var n=0;n<t.length;n++)for(var o=t[n];o;){if(o.isCollapsed())return"enabled";o=o.getNextBlock()}return"disabled"}return"hidden"},callback:function(t){e.ContextMenuItems.toggleOption_(!1,t.workspace.getTopBlocks(!0))},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},e.ContextMenuItems.addDeletableBlocks_=function(t,n){if(t.isDeletable())Array.prototype.push.apply(n,t.getDescendants(!1));else{t=t.getChildren(!1);for(var o=0;o<t.length;o++)e.ContextMenuItems.addDeletableBlocks_(t[o],n)}},e.ContextMenuItems.getDeletableBlocks_=function(t){var n=[];t=t.getTopBlocks(!0);for(var o=0;o<t.length;o++)e.ContextMenuItems.addDeletableBlocks_(t[o],n);return n},e.ContextMenuItems.deleteNext_=function(t,n){e.Events.setGroup(n);var o=t.shift();o&&(o.workspace?(o.dispose(!1,!0),setTimeout(e.ContextMenuItems.deleteNext_,10,t,n)):e.ContextMenuItems.deleteNext_(t,n)),e.Events.setGroup(!1)},e.ContextMenuItems.registerDeleteAll=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){if(t.workspace)return 1==(t=e.ContextMenuItems.getDeletableBlocks_(t.workspace).length)?e.Msg.DELETE_BLOCK:e.Msg.DELETE_X_BLOCKS.replace("%1",String(t))},preconditionFn:function(t){if(t.workspace)return 0<e.ContextMenuItems.getDeletableBlocks_(t.workspace).length?"enabled":"disabled"},callback:function(t){if(t.workspace){t.workspace.cancelCurrentGesture();var n=e.ContextMenuItems.getDeletableBlocks_(t.workspace),o=e.utils.genUid();2>n.length?e.ContextMenuItems.deleteNext_(n,o):e.confirm(e.Msg.DELETE_ALL_BLOCKS.replace("%1",n.length),function(r){r&&e.ContextMenuItems.deleteNext_(n,o)})}},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},e.ContextMenuItems.registerWorkspaceOptions_=function(){e.ContextMenuItems.registerUndo(),e.ContextMenuItems.registerRedo(),e.ContextMenuItems.registerCleanup(),e.ContextMenuItems.registerCollapse(),e.ContextMenuItems.registerExpand(),e.ContextMenuItems.registerDeleteAll()},e.ContextMenuItems.registerDuplicate=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.DUPLICATE_BLOCK},preconditionFn:function(t){return!(t=t.block).isInFlyout&&t.isDeletable()&&t.isMovable()?t.isDuplicatable()?"enabled":"disabled":"hidden"},callback:function(t){t.block&&e.duplicate(t.block)},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},e.ContextMenuItems.registerComment=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.getCommentIcon()?e.Msg.REMOVE_COMMENT:e.Msg.ADD_COMMENT},preconditionFn:function(t){return t=t.block,e.utils.userAgent.IE||t.isInFlyout||!t.workspace.options.comments||t.isCollapsed()||!t.isEditable()?"hidden":"enabled"},callback:function(t){(t=t.block).getCommentIcon()?t.setCommentText(null):t.setCommentText("")},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockComment",weight:2})},e.ContextMenuItems.registerInline=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.getInputsInline()?e.Msg.EXTERNAL_INPUTS:e.Msg.INLINE_INPUTS},preconditionFn:function(t){if(!(t=t.block).isInFlyout&&t.isMovable()&&!t.isCollapsed())for(var n=1;n<t.inputList.length;n++)if(t.inputList[n-1].type!=e.inputTypes.STATEMENT&&t.inputList[n].type!=e.inputTypes.STATEMENT)return"enabled";return"hidden"},callback:function(t){t.block.setInputsInline(!t.block.getInputsInline())},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockInline",weight:3})},e.ContextMenuItems.registerCollapseExpandBlock=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.isCollapsed()?e.Msg.EXPAND_BLOCK:e.Msg.COLLAPSE_BLOCK},preconditionFn:function(t){return!(t=t.block).isInFlyout&&t.isMovable()&&t.workspace.options.collapse?"enabled":"hidden"},callback:function(t){t.block.setCollapsed(!t.block.isCollapsed())},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},e.ContextMenuItems.registerDisable=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.isEnabled()?e.Msg.DISABLE_BLOCK:e.Msg.ENABLE_BLOCK},preconditionFn:function(t){return!(t=t.block).isInFlyout&&t.workspace.options.disable&&t.isEditable()?t.getInheritedDisabled()?"disabled":"enabled":"hidden"},callback:function(t){t=t.block;var n=e.Events.getGroup();n||e.Events.setGroup(!0),t.setEnabled(!t.isEnabled()),n||e.Events.setGroup(!1)},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDisable",weight:5})},e.ContextMenuItems.registerDelete=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){var n=t.block;return t=n.getDescendants(!1).length,(n=n.getNextBlock())&&(t-=n.getDescendants(!1).length),1==t?e.Msg.DELETE_BLOCK:e.Msg.DELETE_X_BLOCKS.replace("%1",String(t))},preconditionFn:function(t){return!t.block.isInFlyout&&t.block.isDeletable()?"enabled":"hidden"},callback:function(t){e.Events.setGroup(!0),t.block&&e.deleteBlock(t.block),e.Events.setGroup(!1)},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDelete",weight:6})},e.ContextMenuItems.registerHelp=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.HELP},preconditionFn:function(t){return("function"==typeof(t=t.block).helpUrl?t.helpUrl():t.helpUrl)?"enabled":"hidden"},callback:function(t){t.block.showHelp()},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockHelp",weight:7})},e.ContextMenuItems.registerBlockOptions_=function(){e.ContextMenuItems.registerDuplicate(),e.ContextMenuItems.registerComment(),e.ContextMenuItems.registerInline(),e.ContextMenuItems.registerCollapseExpandBlock(),e.ContextMenuItems.registerDisable(),e.ContextMenuItems.registerDelete(),e.ContextMenuItems.registerHelp()},e.ContextMenuItems.registerDefaultOptions=function(){e.ContextMenuItems.registerWorkspaceOptions_(),e.ContextMenuItems.registerBlockOptions_()},e.ContextMenuItems.registerDefaultOptions(),e.Mutator=function(t){e.Mutator.superClass_.constructor.call(this,null),this.quarkNames_=t},e.utils.object.inherits(e.Mutator,e.Icon),e.Mutator.prototype.workspace_=null,e.Mutator.prototype.workspaceWidth_=0,e.Mutator.prototype.workspaceHeight_=0,e.Mutator.prototype.setBlock=function(t){this.block_=t},e.Mutator.prototype.getWorkspace=function(){return this.workspace_},e.Mutator.prototype.drawIcon_=function(t){e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},t),e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},t),e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},t)},e.Mutator.prototype.iconClick_=function(t){this.block_.isEditable()&&e.Icon.prototype.iconClick_.call(this,t)},e.Mutator.prototype.createEditor_=function(){if(this.svgDialog_=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{x:e.Bubble.BORDER_WIDTH,y:e.Bubble.BORDER_WIDTH},null),this.quarkNames_.length)for(var o,t=e.utils.xml.createElement("xml"),n=0;o=this.quarkNames_[n];n++){var r=e.utils.xml.createElement("block");r.setAttribute("type",o),t.appendChild(r)}else t=null;return(n=new e.Options({disable:!1,parentWorkspace:this.block_.workspace,media:this.block_.workspace.options.pathToMedia,rtl:this.block_.RTL,horizontalLayout:!1,renderer:this.block_.workspace.options.renderer,rendererOverrides:this.block_.workspace.options.rendererOverrides})).toolboxPosition=this.block_.RTL?e.utils.toolbox.Position.RIGHT:e.utils.toolbox.Position.LEFT,(o=!!t)&&(n.languageTree=e.utils.toolbox.convertToolboxDefToJson(t)),this.workspace_=new e.WorkspaceSvg(n),this.workspace_.isMutator=!0,this.workspace_.addChangeListener(e.Events.disableOrphans),t=o?this.workspace_.addFlyout(e.utils.Svg.G):null,n=this.workspace_.createDom("blocklyMutatorBackground"),t&&n.insertBefore(t,this.workspace_.svgBlockCanvas_),this.svgDialog_.appendChild(n),this.svgDialog_},e.Mutator.prototype.updateEditable=function(){e.Mutator.superClass_.updateEditable.call(this),this.block_.isInFlyout||(this.block_.isEditable()?this.iconGroup_&&e.utils.dom.removeClass(this.iconGroup_,"blocklyIconGroupReadonly"):(this.setVisible(!1),this.iconGroup_&&e.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly")))},e.Mutator.prototype.resizeBubble_=function(){var t=2*e.Bubble.BORDER_WIDTH,n=this.workspace_.getCanvas().getBBox(),o=n.width+n.x,r=n.height+3*t,p=this.workspace_.getFlyout();if(p){var b=p.getWorkspace().getMetricsManager().getScrollMetrics();r=Math.max(r,b.height+20),o+=p.getWidth()}this.block_.RTL&&(o=-n.x),o+=3*t,(Math.abs(this.workspaceWidth_-o)>t||Math.abs(this.workspaceHeight_-r)>t)&&(this.workspaceWidth_=o,this.workspaceHeight_=r,this.bubble_.setBubbleSize(o+t,r+t),this.svgDialog_.setAttribute("width",this.workspaceWidth_),this.svgDialog_.setAttribute("height",this.workspaceHeight_),this.workspace_.setCachedParentSvgSize(this.workspaceWidth_,this.workspaceHeight_)),this.block_.RTL&&(t="translate("+this.workspaceWidth_+",0)",this.workspace_.getCanvas().setAttribute("transform",t)),this.workspace_.resize()},e.Mutator.prototype.onBubbleMove_=function(){this.workspace_&&this.workspace_.recordDragTargets()},e.Mutator.prototype.setVisible=function(t){if(t!=this.isVisible())if(e.Events.fire(new(e.Events.get(e.Events.BUBBLE_OPEN))(this.block_,t,"mutator")),t){this.bubble_=new e.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,null,null),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerMoveEvent(this.onBubbleMove_.bind(this));var n=this.workspace_.options.languageTree;t=this.workspace_.getFlyout(),n&&(t.init(this.workspace_),t.show(n)),this.rootBlock_=this.block_.decompose(this.workspace_),n=this.rootBlock_.getDescendants(!1);for(var r,o=0;r=n[o];o++)r.render();if(this.rootBlock_.setMovable(!1),this.rootBlock_.setDeletable(!1),t?(n=2*t.CORNER_RADIUS,t=this.rootBlock_.RTL?t.getWidth()+n:n):t=n=16,this.block_.RTL&&(t=-t),this.rootBlock_.moveBy(t,n),this.block_.saveConnections){var p=this,b=this.block_;b.saveConnections(this.rootBlock_),this.sourceListener_=function(){b.saveConnections(p.rootBlock_)},this.block_.workspace.addChangeListener(this.sourceListener_)}this.resizeBubble_(),this.workspace_.addChangeListener(this.workspaceChanged_.bind(this)),this.applyColour()}else this.svgDialog_=null,this.workspace_.dispose(),this.rootBlock_=this.workspace_=null,this.bubble_.dispose(),this.bubble_=null,this.workspaceHeight_=this.workspaceWidth_=0,this.sourceListener_&&(this.block_.workspace.removeChangeListener(this.sourceListener_),this.sourceListener_=null)},e.Mutator.prototype.workspaceChanged_=function(t){if(!(t.isUiEvent||t.type==e.Events.CHANGE&&"disabled"==t.element)){if(!this.workspace_.isDragging()){t=this.workspace_.getTopBlocks(!1);for(var o,n=0;o=t[n];n++){var r=o.getRelativeToSurfaceXY();if(20>r.y&&o.moveBy(0,20-r.y),o.RTL){var p=-20,b=this.workspace_.getFlyout();b&&(p-=b.getWidth()),r.x>p&&o.moveBy(p-r.x,0)}else 20>r.x&&o.moveBy(20-r.x,0)}}if(this.rootBlock_.workspace==this.workspace_){if(e.Events.setGroup(!0),t=(t=(o=this.block_).mutationToDom())&&e.Xml.domToText(t),n=o.rendered,o.rendered=!1,o.compose(this.rootBlock_),o.rendered=n,o.initSvg(),o.rendered&&o.render(),t!=(n=(n=o.mutationToDom())&&e.Xml.domToText(n))){e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(o,"mutation",null,t,n));var I=e.Events.getGroup();setTimeout(function(){e.Events.setGroup(I),o.bumpNeighbours(),e.Events.setGroup(!1)},e.BUMP_DELAY)}this.workspace_.isDragging()||this.resizeBubble_(),e.Events.setGroup(!1)}}},e.Mutator.prototype.dispose=function(){this.block_.mutator=null,e.Icon.prototype.dispose.call(this)},e.Mutator.prototype.updateBlockStyle=function(){var t=this.workspace_;if(t&&t.getAllBlocks(!1)){for(var r,n=t.getAllBlocks(!1),o=0;r=n[o];o++)r.setStyle(r.getStyleName());if(o=t.getFlyout())for(t=o.workspace_.getAllBlocks(!1),o=0;r=t[o];o++)r.setStyle(r.getStyleName())}},e.Mutator.reconnect=function(t,n,o){if(!t||!t.getSourceBlock().workspace)return!1;o=n.getInput(o).connection;var r=t.targetBlock();return!(r&&r!=n||o.targetConnection==t||(o.isConnected()&&o.disconnect(),o.connect(t),0))},e.Mutator.findParentWs=function(t){var n=null;if(t&&t.options){var o=t.options.parentWorkspace;t.isFlyout?o&&o.options&&(n=o.options.parentWorkspace):o&&(n=o)}return n},e.FieldTextInput=function(t,n,o){this.spellcheck_=!0,e.FieldTextInput.superClass_.constructor.call(this,t,n,o),this.onKeyInputWrapper_=this.onKeyDownWrapper_=this.htmlInput_=null,this.fullBlockClickTarget_=!1,this.workspace_=null},e.utils.object.inherits(e.FieldTextInput,e.Field),e.FieldTextInput.prototype.DEFAULT_VALUE="",e.FieldTextInput.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.text);return new e.FieldTextInput(n,void 0,t)},e.FieldTextInput.prototype.SERIALIZABLE=!0,e.FieldTextInput.BORDERRADIUS=4,e.FieldTextInput.prototype.CURSOR="text",e.FieldTextInput.prototype.configure_=function(t){e.FieldTextInput.superClass_.configure_.call(this,t),"boolean"==typeof t.spellcheck&&(this.spellcheck_=t.spellcheck)},e.FieldTextInput.prototype.initView=function(){if(this.getConstants().FULL_BLOCK_FIELDS){for(var r,t=0,n=0,o=0;r=this.sourceBlock_.inputList[o];o++){for(var p=0;r.fieldRow[p];p++)t++;r.connection&&n++}this.fullBlockClickTarget_=1>=t&&this.sourceBlock_.outputConnection&&!n}else this.fullBlockClickTarget_=!1;this.fullBlockClickTarget_?this.clickTarget_=this.sourceBlock_.getSvgRoot():this.createBorderRect_(),this.createTextElement_()},e.FieldTextInput.prototype.doClassValidation_=function(t){return null==t?null:String(t)},e.FieldTextInput.prototype.doValueInvalid_=function(t){this.isBeingEdited_&&(this.isTextValid_=!1,t=this.value_,this.value_=this.htmlInput_.untypedDefaultValue_,this.sourceBlock_&&e.Events.isEnabled()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this.sourceBlock_,"field",this.name||null,t,this.value_)))},e.FieldTextInput.prototype.doValueUpdate_=function(t){this.isTextValid_=!0,this.value_=t,this.isBeingEdited_||(this.isDirty_=!0)},e.FieldTextInput.prototype.applyColour=function(){this.sourceBlock_&&this.getConstants().FULL_BLOCK_FIELDS&&(this.borderRect_?this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary):this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR))},e.FieldTextInput.prototype.render_=function(){if(e.FieldTextInput.superClass_.render_.call(this),this.isBeingEdited_){this.resizeEditor_();var t=this.htmlInput_;this.isTextValid_?(e.utils.dom.removeClass(t,"blocklyInvalidInput"),e.utils.aria.setState(t,e.utils.aria.State.INVALID,!1)):(e.utils.dom.addClass(t,"blocklyInvalidInput"),e.utils.aria.setState(t,e.utils.aria.State.INVALID,!0))}},e.FieldTextInput.prototype.setSpellcheck=function(t){t!=this.spellcheck_&&(this.spellcheck_=t,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))},e.FieldTextInput.prototype.showEditor_=function(t,n){this.workspace_=this.sourceBlock_.workspace,!(t=n||!1)&&(e.utils.userAgent.MOBILE||e.utils.userAgent.ANDROID||e.utils.userAgent.IPAD)?this.showPromptEditor_():this.showInlineEditor_(t)},e.FieldTextInput.prototype.showPromptEditor_=function(){e.prompt(e.Msg.CHANGE_VALUE_TITLE,this.getText(),function(t){this.setValue(this.getValueFromEditorText_(t))}.bind(this))},e.FieldTextInput.prototype.showInlineEditor_=function(t){e.WidgetDiv.show(this,this.sourceBlock_.RTL,this.widgetDispose_.bind(this)),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,t||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())},e.FieldTextInput.prototype.widgetCreate_=function(){var t=e.WidgetDiv.DIV;e.utils.dom.addClass(this.getClickTarget_(),"editing");var n=document.createElement("input");n.className="blocklyHtmlInput",n.setAttribute("spellcheck",this.spellcheck_);var o=this.workspace_.getScale(),r=this.getConstants().FIELD_TEXT_FONTSIZE*o+"pt";if(t.style.fontSize=r,n.style.fontSize=r,r=e.FieldTextInput.BORDERRADIUS*o+"px",this.fullBlockClickTarget_){r=((r=this.getScaledBBox()).bottom-r.top)/2+"px";var p=this.sourceBlock_.getParent()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;n.style.border=1*o+"px solid "+p,t.style.borderRadius=r,t.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(t.style.boxShadow="rgba(255, 255, 255, 0.3) 0px 0px 0px "+4*o+"px")}return n.style.borderRadius=r,t.appendChild(n),n.value=n.defaultValue=this.getEditorText_(this.value_),n.untypedDefaultValue_=this.value_,n.oldValue_=null,this.resizeEditor_(),this.bindInputEvents_(n),n},e.FieldTextInput.prototype.widgetDispose_=function(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_&&this.onFinishEditing_(this.value_),this.unbindInputEvents_();var t=e.WidgetDiv.DIV.style;t.width="auto",t.height="auto",t.fontSize="",t.transition="",t.boxShadow="",this.htmlInput_=null,e.utils.dom.removeClass(this.getClickTarget_(),"editing")},e.FieldTextInput.prototype.bindInputEvents_=function(t){this.onKeyDownWrapper_=e.browserEvents.conditionalBind(t,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper_=e.browserEvents.conditionalBind(t,"input",this,this.onHtmlInputChange_)},e.FieldTextInput.prototype.unbindInputEvents_=function(){this.onKeyDownWrapper_&&(e.browserEvents.unbind(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.onKeyInputWrapper_&&(e.browserEvents.unbind(this.onKeyInputWrapper_),this.onKeyInputWrapper_=null)},e.FieldTextInput.prototype.onHtmlInputKeyDown_=function(t){t.keyCode==e.utils.KeyCodes.ENTER?(e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation()):t.keyCode==e.utils.KeyCodes.ESC?(this.setValue(this.htmlInput_.untypedDefaultValue_),e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation()):t.keyCode==e.utils.KeyCodes.TAB&&(e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation(),this.sourceBlock_.tab(this,!t.shiftKey),t.preventDefault())},e.FieldTextInput.prototype.onHtmlInputChange_=function(t){(t=this.htmlInput_.value)!==this.htmlInput_.oldValue_&&(this.htmlInput_.oldValue_=t,e.Events.setGroup(!0),t=this.getValueFromEditorText_(t),this.setValue(t),this.forceRerender(),this.resizeEditor_(),e.Events.setGroup(!1))},e.FieldTextInput.prototype.setEditorValue_=function(t){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(t)),this.setValue(t)},e.FieldTextInput.prototype.resizeEditor_=function(){var t=e.WidgetDiv.DIV,n=this.getScaledBBox();t.style.width=n.right-n.left+"px",t.style.height=n.bottom-n.top+"px",n=new e.utils.Coordinate(this.sourceBlock_.RTL?n.right-t.offsetWidth:n.left,n.top),t.style.left=n.x+"px",t.style.top=n.y+"px"},e.FieldTextInput.prototype.isTabNavigable=function(){return!0},e.FieldTextInput.prototype.getText_=function(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null},e.FieldTextInput.prototype.getEditorText_=function(t){return String(t)},e.FieldTextInput.prototype.getValueFromEditorText_=function(t){return t},e.fieldRegistry.register("field_input",e.FieldTextInput),e.FieldAngle=function(t,n,o){this.clockwise_=e.FieldAngle.CLOCKWISE,this.offset_=e.FieldAngle.OFFSET,this.wrap_=e.FieldAngle.WRAP,this.round_=e.FieldAngle.ROUND,e.FieldAngle.superClass_.constructor.call(this,t,n,o),this.moveSurfaceWrapper_=this.clickSurfaceWrapper_=this.clickWrapper_=this.line_=this.gauge_=this.editor_=null},e.utils.object.inherits(e.FieldAngle,e.FieldTextInput),e.FieldAngle.prototype.DEFAULT_VALUE=0,e.FieldAngle.fromJson=function(t){return new e.FieldAngle(t.angle,void 0,t)},e.FieldAngle.prototype.SERIALIZABLE=!0,e.FieldAngle.ROUND=15,e.FieldAngle.HALF=50,e.FieldAngle.CLOCKWISE=!1,e.FieldAngle.OFFSET=0,e.FieldAngle.WRAP=360,e.FieldAngle.RADIUS=e.FieldAngle.HALF-1,e.FieldAngle.prototype.configure_=function(t){switch(e.FieldAngle.superClass_.configure_.call(this,t),t.mode){case"compass":this.clockwise_=!0,this.offset_=90;break;case"protractor":this.clockwise_=!1,this.offset_=0}var n=t.clockwise;"boolean"==typeof n&&(this.clockwise_=n),null!=(n=t.offset)&&(n=Number(n),isNaN(n)||(this.offset_=n)),null!=(n=t.wrap)&&(n=Number(n),isNaN(n)||(this.wrap_=n)),null!=(t=t.round)&&(t=Number(t),isNaN(t)||(this.round_=t))},e.FieldAngle.prototype.initView=function(){e.FieldAngle.superClass_.initView.call(this),this.symbol_=e.utils.dom.createSvgElement(e.utils.Svg.TSPAN,{},null),this.symbol_.appendChild(document.createTextNode("\xb0")),this.textElement_.appendChild(this.symbol_)},e.FieldAngle.prototype.render_=function(){e.FieldAngle.superClass_.render_.call(this),this.updateGraph_()},e.FieldAngle.prototype.showEditor_=function(t){e.FieldAngle.superClass_.showEditor_.call(this,t,e.utils.userAgent.MOBILE||e.utils.userAgent.ANDROID||e.utils.userAgent.IPAD),this.dropdownCreate_(),e.DropDownDiv.getContentDiv().appendChild(this.editor_),e.DropDownDiv.setColour(this.sourceBlock_.style.colourPrimary,this.sourceBlock_.style.colourTertiary),e.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.updateGraph_()},e.FieldAngle.prototype.dropdownCreate_=function(){var t=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{xmlns:e.utils.dom.SVG_NS,"xmlns:html":e.utils.dom.HTML_NS,"xmlns:xlink":e.utils.dom.XLINK_NS,version:"1.1",height:2*e.FieldAngle.HALF+"px",width:2*e.FieldAngle.HALF+"px",style:"touch-action: none"},null),n=e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{cx:e.FieldAngle.HALF,cy:e.FieldAngle.HALF,r:e.FieldAngle.RADIUS,class:"blocklyAngleCircle"},t);this.gauge_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyAngleGauge"},t),this.line_=e.utils.dom.createSvgElement(e.utils.Svg.LINE,{x1:e.FieldAngle.HALF,y1:e.FieldAngle.HALF,class:"blocklyAngleLine"},t);for(var o=0;360>o;o+=15)e.utils.dom.createSvgElement(e.utils.Svg.LINE,{x1:e.FieldAngle.HALF+e.FieldAngle.RADIUS,y1:e.FieldAngle.HALF,x2:e.FieldAngle.HALF+e.FieldAngle.RADIUS-(o%45==0?10:5),y2:e.FieldAngle.HALF,class:"blocklyAngleMarks",transform:"rotate("+o+","+e.FieldAngle.HALF+","+e.FieldAngle.HALF+")"},t);this.clickWrapper_=e.browserEvents.conditionalBind(t,"click",this,this.hide_),this.clickSurfaceWrapper_=e.browserEvents.conditionalBind(n,"click",this,this.onMouseMove_,!0,!0),this.moveSurfaceWrapper_=e.browserEvents.conditionalBind(n,"mousemove",this,this.onMouseMove_,!0,!0),this.editor_=t},e.FieldAngle.prototype.dropdownDispose_=function(){this.clickWrapper_&&(e.browserEvents.unbind(this.clickWrapper_),this.clickWrapper_=null),this.clickSurfaceWrapper_&&(e.browserEvents.unbind(this.clickSurfaceWrapper_),this.clickSurfaceWrapper_=null),this.moveSurfaceWrapper_&&(e.browserEvents.unbind(this.moveSurfaceWrapper_),this.moveSurfaceWrapper_=null),this.line_=this.gauge_=null},e.FieldAngle.prototype.hide_=function(){e.DropDownDiv.hideIfOwner(this),e.WidgetDiv.hide()},e.FieldAngle.prototype.onMouseMove_=function(t){var n=this.gauge_.ownerSVGElement.getBoundingClientRect(),o=t.clientX-n.left-e.FieldAngle.HALF;t=t.clientY-n.top-e.FieldAngle.HALF,n=Math.atan(-t/o),isNaN(n)||(n=e.utils.math.toDegrees(n),0>o?n+=180:0<t&&(n+=360),this.displayMouseOrKeyboardValue_(n=this.clockwise_?this.offset_+360-n:360-(this.offset_-n)))},e.FieldAngle.prototype.displayMouseOrKeyboardValue_=function(t){this.round_&&(t=Math.round(t/this.round_)*this.round_),(t=this.wrapValue_(t))!=this.value_&&this.setEditorValue_(t)},e.FieldAngle.prototype.updateGraph_=function(){if(this.gauge_){var t=Number(this.getText())+this.offset_,n=e.utils.math.toRadians(t%360);t=["M ",e.FieldAngle.HALF,",",e.FieldAngle.HALF];var o=e.FieldAngle.HALF,r=e.FieldAngle.HALF;if(!isNaN(n)){var p=Number(this.clockwise_),b=e.utils.math.toRadians(this.offset_),I=Math.cos(b)*e.FieldAngle.RADIUS,x=Math.sin(b)*-e.FieldAngle.RADIUS;p&&(n=2*b-n),o+=Math.cos(n)*e.FieldAngle.RADIUS,r-=Math.sin(n)*e.FieldAngle.RADIUS,n=Math.abs(Math.floor((n-b)/Math.PI)%2),p&&(n=1-n),t.push(" l ",I,",",x," A ",e.FieldAngle.RADIUS,",",e.FieldAngle.RADIUS," 0 ",n," ",p," ",o,",",r," z")}this.gauge_.setAttribute("d",t.join("")),this.line_.setAttribute("x2",o),this.line_.setAttribute("y2",r)}},e.FieldAngle.prototype.onHtmlInputKeyDown_=function(t){var n;if(e.FieldAngle.superClass_.onHtmlInputKeyDown_.call(this,t),t.keyCode===e.utils.KeyCodes.LEFT?n=this.sourceBlock_.RTL?1:-1:t.keyCode===e.utils.KeyCodes.RIGHT?n=this.sourceBlock_.RTL?-1:1:t.keyCode===e.utils.KeyCodes.DOWN?n=-1:t.keyCode===e.utils.KeyCodes.UP&&(n=1),n){var o=this.getValue();this.displayMouseOrKeyboardValue_(o+n*this.round_),t.preventDefault(),t.stopPropagation()}},e.FieldAngle.prototype.doClassValidation_=function(t){return t=Number(t),isNaN(t)||!isFinite(t)?null:this.wrapValue_(t)},e.FieldAngle.prototype.wrapValue_=function(t){return 0>(t%=360)&&(t+=360),t>this.wrap_&&(t-=360),t},e.Css.register(".blocklyAngleCircle {,stroke: #444;,stroke-width: 1;,fill: #ddd;,fill-opacity: .8;,},.blocklyAngleMarks {,stroke: #444;,stroke-width: 1;,},.blocklyAngleGauge {,fill: #f88;,fill-opacity: .8;,pointer-events: none;,},.blocklyAngleLine {,stroke: #f00;,stroke-width: 2;,stroke-linecap: round;,pointer-events: none;,}".split(",")),e.fieldRegistry.register("field_angle",e.FieldAngle),e.FieldCheckbox=function(t,n,o){this.checkChar_=null,e.FieldCheckbox.superClass_.constructor.call(this,t,n,o)},e.utils.object.inherits(e.FieldCheckbox,e.Field),e.FieldCheckbox.prototype.DEFAULT_VALUE=!1,e.FieldCheckbox.fromJson=function(t){return new e.FieldCheckbox(t.checked,void 0,t)},e.FieldCheckbox.CHECK_CHAR="\u2713",e.FieldCheckbox.prototype.SERIALIZABLE=!0,e.FieldCheckbox.prototype.CURSOR="default",e.FieldCheckbox.prototype.configure_=function(t){e.FieldCheckbox.superClass_.configure_.call(this,t),t.checkCharacter&&(this.checkChar_=t.checkCharacter)},e.FieldCheckbox.prototype.initView=function(){e.FieldCheckbox.superClass_.initView.call(this),e.utils.dom.addClass(this.textElement_,"blocklyCheckbox"),this.textElement_.style.display=this.value_?"block":"none"},e.FieldCheckbox.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)},e.FieldCheckbox.prototype.getDisplayText_=function(){return this.checkChar_||e.FieldCheckbox.CHECK_CHAR},e.FieldCheckbox.prototype.setCheckCharacter=function(t){this.checkChar_=t,this.forceRerender()},e.FieldCheckbox.prototype.showEditor_=function(){this.setValue(!this.value_)},e.FieldCheckbox.prototype.doClassValidation_=function(t){return!0===t||"TRUE"===t?"TRUE":!1===t||"FALSE"===t?"FALSE":null},e.FieldCheckbox.prototype.doValueUpdate_=function(t){this.value_=this.convertValueToBool_(t),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")},e.FieldCheckbox.prototype.getValue=function(){return this.value_?"TRUE":"FALSE"},e.FieldCheckbox.prototype.getValueBoolean=function(){return this.value_},e.FieldCheckbox.prototype.getText=function(){return String(this.convertValueToBool_(this.value_))},e.FieldCheckbox.prototype.convertValueToBool_=function(t){return"string"==typeof t?"TRUE"==t:!!t},e.fieldRegistry.register("field_checkbox",e.FieldCheckbox),e.FieldColour=function(t,n,o){e.FieldColour.superClass_.constructor.call(this,t,n,o),this.onKeyDownWrapper_=this.onMouseLeaveWrapper_=this.onMouseEnterWrapper_=this.onMouseMoveWrapper_=this.onClickWrapper_=this.highlightedIndex_=this.picker_=null},e.utils.object.inherits(e.FieldColour,e.Field),e.FieldColour.fromJson=function(t){return new e.FieldColour(t.colour,void 0,t)},e.FieldColour.prototype.SERIALIZABLE=!0,e.FieldColour.prototype.CURSOR="default",e.FieldColour.prototype.isDirty_=!1,e.FieldColour.prototype.colours_=null,e.FieldColour.prototype.titles_=null,e.FieldColour.prototype.columns_=0,e.FieldColour.prototype.configure_=function(t){e.FieldColour.superClass_.configure_.call(this,t),t.colourOptions&&(this.colours_=t.colourOptions,this.titles_=t.colourTitles),t.columns&&(this.columns_=t.columns)},e.FieldColour.prototype.initView=function(){this.size_=new e.utils.Size(this.getConstants().FIELD_COLOUR_DEFAULT_WIDTH,this.getConstants().FIELD_COLOUR_DEFAULT_HEIGHT),this.getConstants().FIELD_COLOUR_FULL_BLOCK?this.clickTarget_=this.sourceBlock_.getSvgRoot():(this.createBorderRect_(),this.borderRect_.style.fillOpacity="1")},e.FieldColour.prototype.applyColour=function(){this.getConstants().FIELD_COLOUR_FULL_BLOCK?(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getValue()),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff")):this.borderRect_&&(this.borderRect_.style.fill=this.getValue())},e.FieldColour.prototype.doClassValidation_=function(t){return"string"!=typeof t?null:e.utils.colour.parse(t)},e.FieldColour.prototype.doValueUpdate_=function(t){this.value_=t,this.borderRect_?this.borderRect_.style.fill=t:this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",t),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff"))},e.FieldColour.prototype.getText=function(){var t=this.value_;return/^#(.)\1(.)\2(.)\3$/.test(t)&&(t="#"+t[1]+t[3]+t[5]),t},e.FieldColour.COLOURS="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" "),e.FieldColour.prototype.DEFAULT_VALUE=e.FieldColour.COLOURS[0],e.FieldColour.TITLES=[],e.FieldColour.COLUMNS=7,e.FieldColour.prototype.setColours=function(t,n){return this.colours_=t,n&&(this.titles_=n),this},e.FieldColour.prototype.setColumns=function(t){return this.columns_=t,this},e.FieldColour.prototype.showEditor_=function(){this.dropdownCreate_(),e.DropDownDiv.getContentDiv().appendChild(this.picker_),e.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.picker_.focus({preventScroll:!0})},e.FieldColour.prototype.onClick_=function(t){null!==(t=(t=t.target)&&t.label)&&(this.setValue(t),e.DropDownDiv.hideIfOwner(this))},e.FieldColour.prototype.onKeyDown_=function(t){var n=!1;t.keyCode===e.utils.KeyCodes.UP?(this.moveHighlightBy_(0,-1),n=!0):t.keyCode===e.utils.KeyCodes.DOWN?(this.moveHighlightBy_(0,1),n=!0):t.keyCode===e.utils.KeyCodes.LEFT?(this.moveHighlightBy_(-1,0),n=!0):t.keyCode===e.utils.KeyCodes.RIGHT?(this.moveHighlightBy_(1,0),n=!0):t.keyCode===e.utils.KeyCodes.ENTER&&((n=this.getHighlighted_())&&null!==(n=n&&n.label)&&this.setValue(n),e.DropDownDiv.hideWithoutAnimation(),n=!0),n&&t.stopPropagation()},e.FieldColour.prototype.moveHighlightBy_=function(t,n){var o=this.colours_||e.FieldColour.COLOURS,r=this.columns_||e.FieldColour.COLUMNS,p=this.highlightedIndex_%r,b=Math.floor(this.highlightedIndex_/r);p+=t,b+=n,0>t?0>p&&0<b?(p=r-1,b--):0>p&&(p=0):0<t?p>r-1&&b<Math.floor(o.length/r)-1?(p=0,b++):p>r-1&&p--:0>n?0>b&&(b=0):0<n&&b>Math.floor(o.length/r)-1&&(b=Math.floor(o.length/r)-1),this.setHighlightedCell_(this.picker_.childNodes[b].childNodes[p],b*r+p)},e.FieldColour.prototype.onMouseMove_=function(t){var n=(t=t.target)&&Number(t.getAttribute("data-index"));null!==n&&n!==this.highlightedIndex_&&this.setHighlightedCell_(t,n)},e.FieldColour.prototype.onMouseEnter_=function(){this.picker_.focus({preventScroll:!0})},e.FieldColour.prototype.onMouseLeave_=function(){this.picker_.blur();var t=this.getHighlighted_();t&&e.utils.dom.removeClass(t,"blocklyColourHighlighted")},e.FieldColour.prototype.getHighlighted_=function(){var t=this.columns_||e.FieldColour.COLUMNS,n=this.picker_.childNodes[Math.floor(this.highlightedIndex_/t)];return n?n.childNodes[this.highlightedIndex_%t]:null},e.FieldColour.prototype.setHighlightedCell_=function(t,n){var o=this.getHighlighted_();o&&e.utils.dom.removeClass(o,"blocklyColourHighlighted"),e.utils.dom.addClass(t,"blocklyColourHighlighted"),this.highlightedIndex_=n,e.utils.aria.setState(this.picker_,e.utils.aria.State.ACTIVEDESCENDANT,t.getAttribute("id"))},e.FieldColour.prototype.dropdownCreate_=function(){var t=this.columns_||e.FieldColour.COLUMNS,n=this.colours_||e.FieldColour.COLOURS,o=this.titles_||e.FieldColour.TITLES,r=this.getValue(),p=document.createElement("table");p.className="blocklyColourTable",p.tabIndex=0,p.dir="ltr",e.utils.aria.setRole(p,e.utils.aria.Role.GRID),e.utils.aria.setState(p,e.utils.aria.State.EXPANDED,!0),e.utils.aria.setState(p,e.utils.aria.State.ROWCOUNT,Math.floor(n.length/t)),e.utils.aria.setState(p,e.utils.aria.State.COLCOUNT,t);for(var b,I=0;I<n.length;I++){I%t==0&&(b=document.createElement("tr"),e.utils.aria.setRole(b,e.utils.aria.Role.ROW),p.appendChild(b));var x=document.createElement("td");b.appendChild(x),x.label=n[I],x.title=o[I]||n[I],x.id=e.utils.IdGenerator.getNextUniqueId(),x.setAttribute("data-index",I),e.utils.aria.setRole(x,e.utils.aria.Role.GRIDCELL),e.utils.aria.setState(x,e.utils.aria.State.LABEL,n[I]),e.utils.aria.setState(x,e.utils.aria.State.SELECTED,n[I]==r),x.style.backgroundColor=n[I],n[I]==r&&(x.className="blocklyColourSelected",this.highlightedIndex_=I)}this.onClickWrapper_=e.browserEvents.conditionalBind(p,"click",this,this.onClick_,!0),this.onMouseMoveWrapper_=e.browserEvents.conditionalBind(p,"mousemove",this,this.onMouseMove_,!0),this.onMouseEnterWrapper_=e.browserEvents.conditionalBind(p,"mouseenter",this,this.onMouseEnter_,!0),this.onMouseLeaveWrapper_=e.browserEvents.conditionalBind(p,"mouseleave",this,this.onMouseLeave_,!0),this.onKeyDownWrapper_=e.browserEvents.conditionalBind(p,"keydown",this,this.onKeyDown_),this.picker_=p},e.FieldColour.prototype.dropdownDispose_=function(){this.onClickWrapper_&&(e.browserEvents.unbind(this.onClickWrapper_),this.onClickWrapper_=null),this.onMouseMoveWrapper_&&(e.browserEvents.unbind(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null),this.onMouseEnterWrapper_&&(e.browserEvents.unbind(this.onMouseEnterWrapper_),this.onMouseEnterWrapper_=null),this.onMouseLeaveWrapper_&&(e.browserEvents.unbind(this.onMouseLeaveWrapper_),this.onMouseLeaveWrapper_=null),this.onKeyDownWrapper_&&(e.browserEvents.unbind(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.highlightedIndex_=this.picker_=null},e.Css.register([".blocklyColourTable {","border-collapse: collapse;","display: block;","outline: none;","padding: 1px;","}",".blocklyColourTable>tr>td {","border: .5px solid #888;","box-sizing: border-box;","cursor: pointer;","display: inline-block;","height: 20px;","padding: 0;","width: 20px;","}",".blocklyColourTable>tr>td.blocklyColourHighlighted {","border-color: #eee;","box-shadow: 2px 2px 7px 2px rgba(0,0,0,.3);","position: relative;","}",".blocklyColourSelected, .blocklyColourSelected:hover {","border-color: #eee !important;","outline: 1px solid #333;","position: relative;","}"]),e.fieldRegistry.register("field_colour",e.FieldColour),e.FieldDropdown=function(t,n,o){"function"!=typeof t&&e.FieldDropdown.validateOptions_(t),this.menuGenerator_=t,this.suffixField=this.prefixField=this.generatedOptions_=null,this.trimOptions_(),this.selectedOption_=this.getOptions(!1)[0],e.FieldDropdown.superClass_.constructor.call(this,this.selectedOption_[1],n,o),this.svgArrow_=this.arrow_=this.imageElement_=this.menu_=this.selectedMenuItem_=null},e.utils.object.inherits(e.FieldDropdown,e.Field),e.FieldDropdown.fromJson=function(t){return new e.FieldDropdown(t.options,void 0,t)},e.FieldDropdown.prototype.fromXml=function(t){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(t.textContent)},e.FieldDropdown.prototype.SERIALIZABLE=!0,e.FieldDropdown.CHECKMARK_OVERHANG=25,e.FieldDropdown.MAX_MENU_HEIGHT_VH=.45,e.FieldDropdown.IMAGE_Y_OFFSET=5,e.FieldDropdown.IMAGE_Y_PADDING=2*e.FieldDropdown.IMAGE_Y_OFFSET,e.FieldDropdown.ARROW_CHAR=e.utils.userAgent.ANDROID?"\u25bc":"\u25be",e.FieldDropdown.prototype.CURSOR="default",e.FieldDropdown.prototype.initView=function(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement_=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&e.utils.dom.addClass(this.borderRect_,"blocklyDropdownRect")},e.FieldDropdown.prototype.shouldAddBorderRect_=function(){return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!this.sourceBlock_.isShadow()},e.FieldDropdown.prototype.createTextArrow_=function(){this.arrow_=e.utils.dom.createSvgElement(e.utils.Svg.TSPAN,{},this.textElement_),this.arrow_.appendChild(document.createTextNode(this.sourceBlock_.RTL?e.FieldDropdown.ARROW_CHAR+" ":" "+e.FieldDropdown.ARROW_CHAR)),this.sourceBlock_.RTL?this.textElement_.insertBefore(this.arrow_,this.textContent_):this.textElement_.appendChild(this.arrow_)},e.FieldDropdown.prototype.createSVGArrow_=function(){this.svgArrow_=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)},e.FieldDropdown.prototype.showEditor_=function(t){if(this.dropdownCreate_(),this.menu_.openingCoords=t&&"number"==typeof t.clientX?new e.utils.Coordinate(t.clientX,t.clientY):null,this.menu_.render(e.DropDownDiv.getContentDiv()),t=this.menu_.getElement(),e.utils.dom.addClass(t,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV){t=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().getColour():this.sourceBlock_.getColour();var n=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;e.DropDownDiv.setColour(t,n)}e.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem_&&this.menu_.setHighlighted(this.selectedMenuItem_),this.applyColour()},e.FieldDropdown.prototype.dropdownCreate_=function(){var t=new e.Menu;t.setRole(e.utils.aria.Role.LISTBOX),this.menu_=t;var n=this.getOptions(!1);this.selectedMenuItem_=null;for(var o=0;o<n.length;o++){var r=n[o][0],p=n[o][1];if("object"==typeof r){var b=new Image(r.width,r.height);b.src=r.src,b.alt=r.alt||"",r=b}(r=new e.MenuItem(r,p)).setRole(e.utils.aria.Role.OPTION),r.setRightToLeft(this.sourceBlock_.RTL),r.setCheckable(!0),t.addChild(r),r.setChecked(p==this.value_),p==this.value_&&(this.selectedMenuItem_=r),r.onAction(this.handleMenuActionEvent_,this)}},e.FieldDropdown.prototype.dropdownDispose_=function(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem_=this.menu_=null,this.applyColour()},e.FieldDropdown.prototype.handleMenuActionEvent_=function(t){e.DropDownDiv.hideIfOwner(this,!0),this.onItemSelected_(this.menu_,t)},e.FieldDropdown.prototype.onItemSelected_=function(t,n){this.setValue(n.getValue())},e.FieldDropdown.prototype.trimOptions_=function(){var t=this.menuGenerator_;if(Array.isArray(t)){for(var n=!1,o=0;o<t.length;o++){var r=t[o][0];"string"==typeof r?t[o][0]=e.utils.replaceMessageReferences(r):(null!=r.alt&&(t[o][0].alt=e.utils.replaceMessageReferences(r.alt)),n=!0)}if(!(n||2>t.length)){for(n=[],o=0;o<t.length;o++)n.push(t[o][0]);o=e.utils.string.shortestStringLength(n),r=e.utils.string.commonWordPrefix(n,o);var p=e.utils.string.commonWordSuffix(n,o);!r&&!p||o<=r+p||(r&&(this.prefixField=n[0].substring(0,r-1)),p&&(this.suffixField=n[0].substr(1-p)),this.menuGenerator_=e.FieldDropdown.applyTrim_(t,r,p))}}},e.FieldDropdown.applyTrim_=function(t,n,o){for(var r=[],p=0;p<t.length;p++){var b=t[p][0],I=t[p][1];b=b.substring(n,b.length-o),r[p]=[b,I]}return r},e.FieldDropdown.prototype.isOptionListDynamic=function(){return"function"==typeof this.menuGenerator_},e.FieldDropdown.prototype.getOptions=function(t){return this.isOptionListDynamic()?(this.generatedOptions_&&t||(this.generatedOptions_=this.menuGenerator_.call(this),e.FieldDropdown.validateOptions_(this.generatedOptions_)),this.generatedOptions_):this.menuGenerator_},e.FieldDropdown.prototype.doClassValidation_=function(t){for(var p,n=!1,o=this.getOptions(!0),r=0;p=o[r];r++)if(p[1]==t){n=!0;break}return n?t:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+t),null)},e.FieldDropdown.prototype.doValueUpdate_=function(t){e.FieldDropdown.superClass_.doValueUpdate_.call(this,t),t=this.getOptions(!0);for(var o,n=0;o=t[n];n++)o[1]==this.value_&&(this.selectedOption_=o)},e.FieldDropdown.prototype.applyColour=function(){this.borderRect_&&(this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary),this.borderRect_.setAttribute("fill",this.menu_?this.sourceBlock_.style.colourTertiary:"transparent")),this.sourceBlock_&&this.arrow_&&(this.arrow_.style.fill=this.sourceBlock_.isShadow()?this.sourceBlock_.style.colourSecondary:this.sourceBlock_.style.colourPrimary)},e.FieldDropdown.prototype.render_=function(){this.textContent_.nodeValue="",this.imageElement_.style.display="none";var t=this.selectedOption_&&this.selectedOption_[0];t&&"object"==typeof t?this.renderSelectedImage_(t):this.renderSelectedText_(),this.positionBorderRect_()},e.FieldDropdown.prototype.renderSelectedImage_=function(t){this.imageElement_.style.display="",this.imageElement_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",t.src),this.imageElement_.setAttribute("height",t.height),this.imageElement_.setAttribute("width",t.width);var n=Number(t.height);t=Number(t.width);var o=!!this.borderRect_,r=Math.max(o?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,n+e.FieldDropdown.IMAGE_Y_PADDING);o=o?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var p=this.svgArrow_?this.positionSVGArrow_(t+o,r/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):e.utils.dom.getFastTextWidth(this.arrow_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);this.size_.width=t+p+2*o,this.size_.height=r;var b=0;this.sourceBlock_.RTL?this.imageElement_.setAttribute("x",o+p):(b=t+p,this.textElement_.setAttribute("text-anchor","end"),this.imageElement_.setAttribute("x",o)),this.imageElement_.setAttribute("y",r/2-n/2),this.positionTextElement_(b+o,t+p)},e.FieldDropdown.prototype.renderSelectedText_=function(){this.textContent_.nodeValue=this.getDisplayText_(),e.utils.dom.addClass(this.textElement_,"blocklyDropdownText"),this.textElement_.setAttribute("text-anchor","start");var t=!!this.borderRect_,n=Math.max(t?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT),o=e.utils.dom.getFastTextWidth(this.textElement_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);t=t?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var r=0;this.svgArrow_&&(r=this.positionSVGArrow_(o+t,n/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=o+r+2*t,this.size_.height=n,this.positionTextElement_(t,o)},e.FieldDropdown.prototype.positionSVGArrow_=function(t,n){if(!this.svgArrow_)return 0;var o=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,r=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,p=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow_.setAttribute("transform","translate("+(this.sourceBlock_.RTL?o:t+r)+","+n+")"),p+r},e.FieldDropdown.prototype.getText_=function(){if(!this.selectedOption_)return null;var t=this.selectedOption_[0];return"object"==typeof t?t.alt:t},e.FieldDropdown.validateOptions_=function(t){if(!Array.isArray(t))throw TypeError("FieldDropdown options must be an array.");if(!t.length)throw TypeError("FieldDropdown options must not be an empty array.");for(var n=!1,o=0;o<t.length;++o){var r=t[o];Array.isArray(r)?"string"!=typeof r[1]?(n=!0,console.error("Invalid option["+o+"]: Each FieldDropdown option id must be a string. Found "+r[1]+" in: ",r)):r[0]&&"string"!=typeof r[0]&&"string"!=typeof r[0].src&&(n=!0,console.error("Invalid option["+o+"]: Each FieldDropdown option must have a string label or image description. Found"+r[0]+" in: ",r)):(n=!0,console.error("Invalid option["+o+"]: Each FieldDropdown option must be an array. Found: ",r))}if(n)throw TypeError("Found invalid FieldDropdown options.")},e.fieldRegistry.register("field_dropdown",e.FieldDropdown),e.FieldLabelSerializable=function(t,n,o){e.FieldLabelSerializable.superClass_.constructor.call(this,t,n,o)},e.utils.object.inherits(e.FieldLabelSerializable,e.FieldLabel),e.FieldLabelSerializable.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.text);return new e.FieldLabelSerializable(n,void 0,t)},e.FieldLabelSerializable.prototype.EDITABLE=!1,e.FieldLabelSerializable.prototype.SERIALIZABLE=!0,e.fieldRegistry.register("field_label_serializable",e.FieldLabelSerializable),e.FieldImage=function(t,n,o,r,p,b,I){if(!t)throw Error("Src value of an image field is required");if(t=e.utils.replaceMessageReferences(t),o=Number(e.utils.replaceMessageReferences(o)),n=Number(e.utils.replaceMessageReferences(n)),isNaN(o)||isNaN(n))throw Error("Height and width values of an image field must cast to numbers.");if(0>=o||0>=n)throw Error("Height and width values of an image field must be greater than 0.");this.flipRtl_=!1,this.altText_="",e.FieldImage.superClass_.constructor.call(this,t,null,I),I||(this.flipRtl_=!!b,this.altText_=e.utils.replaceMessageReferences(r)||""),this.size_=new e.utils.Size(n,o+e.FieldImage.Y_PADDING),this.imageHeight_=o,this.clickHandler_=null,"function"==typeof p&&(this.clickHandler_=p),this.imageElement_=null},e.utils.object.inherits(e.FieldImage,e.Field),e.FieldImage.prototype.DEFAULT_VALUE="",e.FieldImage.fromJson=function(t){return new e.FieldImage(t.src,t.width,t.height,void 0,void 0,void 0,t)},e.FieldImage.Y_PADDING=1,e.FieldImage.prototype.EDITABLE=!1,e.FieldImage.prototype.isDirty_=!1,e.FieldImage.prototype.configure_=function(t){e.FieldImage.superClass_.configure_.call(this,t),this.flipRtl_=!!t.flipRtl,this.altText_=e.utils.replaceMessageReferences(t.alt)||""},e.FieldImage.prototype.initView=function(){this.imageElement_=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{height:this.imageHeight_+"px",width:this.size_.width+"px",alt:this.altText_},this.fieldGroup_),this.imageElement_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.value_),this.clickHandler_&&(this.imageElement_.style.cursor="pointer")},e.FieldImage.prototype.updateSize_=function(){},e.FieldImage.prototype.doClassValidation_=function(t){return"string"!=typeof t?null:t},e.FieldImage.prototype.doValueUpdate_=function(t){this.value_=t,this.imageElement_&&this.imageElement_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",String(this.value_))},e.FieldImage.prototype.getFlipRtl=function(){return this.flipRtl_},e.FieldImage.prototype.setAlt=function(t){t!=this.altText_&&(this.altText_=t||"",this.imageElement_&&this.imageElement_.setAttribute("alt",this.altText_))},e.FieldImage.prototype.showEditor_=function(){this.clickHandler_&&this.clickHandler_(this)},e.FieldImage.prototype.setOnClickHandler=function(t){this.clickHandler_=t},e.FieldImage.prototype.getText_=function(){return this.altText_},e.fieldRegistry.register("field_image",e.FieldImage),e.FieldMultilineInput=function(t,n,o){e.FieldMultilineInput.superClass_.constructor.call(this,t,n,o),this.textGroup_=null,this.maxLines_=1/0,this.isOverflowedY_=!1},e.utils.object.inherits(e.FieldMultilineInput,e.FieldTextInput),e.FieldMultilineInput.prototype.configure_=function(t){e.FieldMultilineInput.superClass_.configure_.call(this,t),t.maxLines&&this.setMaxLines(t.maxLines)},e.FieldMultilineInput.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.text);return new e.FieldMultilineInput(n,void 0,t)},e.FieldMultilineInput.prototype.toXml=function(t){return t.textContent=this.getValue().replace(/\n/g,"&#10;"),t},e.FieldMultilineInput.prototype.fromXml=function(t){this.setValue(t.textContent.replace(/&#10;/g,"\n"))},e.FieldMultilineInput.prototype.initView=function(){this.createBorderRect_(),this.textGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyEditableText"},this.fieldGroup_)},e.FieldMultilineInput.prototype.getDisplayText_=function(){var t=this.getText();if(!t)return e.Field.NBSP;var n=t.split("\n");t="";for(var o=this.isOverflowedY_?this.maxLines_:n.length,r=0;r<o;r++){var p=n[r];p.length>this.maxDisplayLength?p=p.substring(0,this.maxDisplayLength-4)+"...":this.isOverflowedY_&&r===o-1&&(p=p.substring(0,p.length-3)+"..."),t+=p=p.replace(/\s/g,e.Field.NBSP),r!==o-1&&(t+="\n")}return this.sourceBlock_.RTL&&(t+="\u200f"),t},e.FieldMultilineInput.prototype.doValueUpdate_=function(t){e.FieldMultilineInput.superClass_.doValueUpdate_.call(this,t),this.isOverflowedY_=this.value_.split("\n").length>this.maxLines_},e.FieldMultilineInput.prototype.render_=function(){for(var t;t=this.textGroup_.firstChild;)this.textGroup_.removeChild(t);t=this.getDisplayText_().split("\n");for(var n=0,o=0;o<t.length;o++){var r=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING;e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:"blocklyText blocklyMultilineText",x:this.getConstants().FIELD_BORDER_RECT_X_PADDING,y:n+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,dy:this.getConstants().FIELD_TEXT_BASELINE},this.textGroup_).appendChild(document.createTextNode(t[o])),n+=r}this.isBeingEdited_&&(t=this.htmlInput_,this.isOverflowedY_?e.utils.dom.addClass(t,"blocklyHtmlTextAreaInputOverflowedY"):e.utils.dom.removeClass(t,"blocklyHtmlTextAreaInputOverflowedY")),this.updateSize_(),this.isBeingEdited_&&(this.sourceBlock_.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),t=this.htmlInput_,this.isTextValid_?(e.utils.dom.removeClass(t,"blocklyInvalidInput"),e.utils.aria.setState(t,e.utils.aria.State.INVALID,!1)):(e.utils.dom.addClass(t,"blocklyInvalidInput"),e.utils.aria.setState(t,e.utils.aria.State.INVALID,!0)))},e.FieldMultilineInput.prototype.updateSize_=function(){for(var t=this.textGroup_.childNodes,n=0,o=0,r=0;r<t.length;r++){var p=e.utils.dom.getTextWidth(t[r]);p>n&&(n=p),o+=this.getConstants().FIELD_TEXT_HEIGHT+(0<r?this.getConstants().FIELD_BORDER_RECT_Y_PADDING:0)}if(this.isBeingEdited_){t=this.value_.split("\n"),p=e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:"blocklyText blocklyMultilineText"});var b=this.getConstants().FIELD_TEXT_FONTSIZE,I=this.getConstants().FIELD_TEXT_FONTWEIGHT,x=this.getConstants().FIELD_TEXT_FONTFAMILY;for(r=0;r<t.length;r++){t[r].length>this.maxDisplayLength&&(t[r]=t[r].substring(0,this.maxDisplayLength)),p.textContent=t[r];var k=e.utils.dom.getFastTextWidth(p,b,I,x);k>n&&(n=k)}n+=this.htmlInput_.offsetWidth-this.htmlInput_.clientWidth}this.borderRect_&&(o+=2*this.getConstants().FIELD_BORDER_RECT_Y_PADDING,n+=2*this.getConstants().FIELD_BORDER_RECT_X_PADDING,this.borderRect_.setAttribute("width",n),this.borderRect_.setAttribute("height",o)),this.size_.width=n,this.size_.height=o,this.positionBorderRect_()},e.FieldMultilineInput.prototype.showEditor_=function(t,n){e.FieldMultilineInput.superClass_.showEditor_.call(this,t,n),this.forceRerender()},e.FieldMultilineInput.prototype.widgetCreate_=function(){var t=e.WidgetDiv.DIV,n=this.workspace_.getScale(),o=document.createElement("textarea");o.className="blocklyHtmlInput blocklyHtmlTextAreaInput",o.setAttribute("spellcheck",this.spellcheck_);var r=this.getConstants().FIELD_TEXT_FONTSIZE*n+"pt";t.style.fontSize=r,o.style.fontSize=r,o.style.borderRadius=e.FieldTextInput.BORDERRADIUS*n+"px",r=this.getConstants().FIELD_BORDER_RECT_X_PADDING*n;var p=this.getConstants().FIELD_BORDER_RECT_Y_PADDING*n/2;return o.style.padding=p+"px "+r+"px "+p+"px "+r+"px",r=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,o.style.lineHeight=r*n+"px",t.appendChild(o),o.value=o.defaultValue=this.getEditorText_(this.value_),o.untypedDefaultValue_=this.value_,o.oldValue_=null,e.utils.userAgent.GECKO?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.bindInputEvents_(o),o},e.FieldMultilineInput.prototype.setMaxLines=function(t){"number"==typeof t&&0<t&&t!==this.maxLines_&&(this.maxLines_=t,this.forceRerender())},e.FieldMultilineInput.prototype.getMaxLines=function(){return this.maxLines_},e.FieldMultilineInput.prototype.onHtmlInputKeyDown_=function(t){t.keyCode!==e.utils.KeyCodes.ENTER&&e.FieldMultilineInput.superClass_.onHtmlInputKeyDown_.call(this,t)},e.Css.register(".blocklyHtmlTextAreaInput {,font-family: monospace;,resize: none;,overflow: hidden;,height: 100%;,text-align: left;,},.blocklyHtmlTextAreaInputOverflowedY {,overflow-y: scroll;,}".split(",")),e.fieldRegistry.register("field_multilinetext",e.FieldMultilineInput),e.FieldNumber=function(t,n,o,r,p,b){this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces_=null,e.FieldNumber.superClass_.constructor.call(this,t,p,b),b||this.setConstraints(n,o,r)},e.utils.object.inherits(e.FieldNumber,e.FieldTextInput),e.FieldNumber.prototype.DEFAULT_VALUE=0,e.FieldNumber.fromJson=function(t){return new e.FieldNumber(t.value,void 0,void 0,void 0,void 0,t)},e.FieldNumber.prototype.SERIALIZABLE=!0,e.FieldNumber.prototype.configure_=function(t){e.FieldNumber.superClass_.configure_.call(this,t),this.setMinInternal_(t.min),this.setMaxInternal_(t.max),this.setPrecisionInternal_(t.precision)},e.FieldNumber.prototype.setConstraints=function(t,n,o){this.setMinInternal_(t),this.setMaxInternal_(n),this.setPrecisionInternal_(o),this.setValue(this.getValue())},e.FieldNumber.prototype.setMin=function(t){this.setMinInternal_(t),this.setValue(this.getValue())},e.FieldNumber.prototype.setMinInternal_=function(t){null==t?this.min_=-1/0:(t=Number(t),isNaN(t)||(this.min_=t))},e.FieldNumber.prototype.getMin=function(){return this.min_},e.FieldNumber.prototype.setMax=function(t){this.setMaxInternal_(t),this.setValue(this.getValue())},e.FieldNumber.prototype.setMaxInternal_=function(t){null==t?this.max_=1/0:(t=Number(t),isNaN(t)||(this.max_=t))},e.FieldNumber.prototype.getMax=function(){return this.max_},e.FieldNumber.prototype.setPrecision=function(t){this.setPrecisionInternal_(t),this.setValue(this.getValue())},e.FieldNumber.prototype.setPrecisionInternal_=function(t){this.precision_=Number(t)||0;var n=String(this.precision_);-1!=n.indexOf("e")&&(n=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));var o=n.indexOf(".");this.decimalPlaces_=-1==o?t?0:null:n.length-o-1},e.FieldNumber.prototype.getPrecision=function(){return this.precision_},e.FieldNumber.prototype.doClassValidation_=function(t){return null===t||(t=(t=(t=(t=String(t)).replace(/O/gi,"0")).replace(/,/g,"")).replace(/infinity/i,"Infinity"),t=Number(t||0),isNaN(t))?null:(t=Math.min(Math.max(t,this.min_),this.max_),this.precision_&&isFinite(t)&&(t=Math.round(t/this.precision_)*this.precision_),null!=this.decimalPlaces_&&(t=Number(t.toFixed(this.decimalPlaces_))),t)},e.FieldNumber.prototype.widgetCreate_=function(){var t=e.FieldNumber.superClass_.widgetCreate_.call(this);return-1/0<this.min_&&e.utils.aria.setState(t,e.utils.aria.State.VALUEMIN,this.min_),1/0>this.max_&&e.utils.aria.setState(t,e.utils.aria.State.VALUEMAX,this.max_),t},e.fieldRegistry.register("field_number",e.FieldNumber),e.FieldVariable=function(t,n,o,r,p){this.menuGenerator_=e.FieldVariable.dropdownCreate,this.defaultVariableName="string"==typeof t?t:"",this.size_=new e.utils.Size(0,0),p&&this.configure_(p),n&&this.setValidator(n),p||this.setTypes_(o,r)},e.utils.object.inherits(e.FieldVariable,e.FieldDropdown),e.FieldVariable.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.variable);return new e.FieldVariable(n,void 0,void 0,void 0,t)},e.FieldVariable.prototype.SERIALIZABLE=!0,e.FieldVariable.prototype.configure_=function(t){e.FieldVariable.superClass_.configure_.call(this,t),this.setTypes_(t.variableTypes,t.defaultType)},e.FieldVariable.prototype.initModel=function(){if(!this.variable_){var t=e.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,null,this.defaultVariableName,this.defaultType_);this.doValueUpdate_(t.getId())}},e.FieldVariable.prototype.shouldAddBorderRect_=function(){return e.FieldVariable.superClass_.shouldAddBorderRect_.call(this)&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||"variables_get"!=this.sourceBlock_.type)},e.FieldVariable.prototype.fromXml=function(t){var n=t.getAttribute("id"),o=t.textContent,r=t.getAttribute("variabletype")||t.getAttribute("variableType")||"";if(n=e.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,n,o,r),null!=r&&r!==n.type)throw Error("Serialized variable type with id '"+n.getId()+"' had type "+n.type+", and does not match variable field that references it: "+e.Xml.domToText(t)+".");this.setValue(n.getId())},e.FieldVariable.prototype.toXml=function(t){return this.initModel(),t.id=this.variable_.getId(),t.textContent=this.variable_.name,this.variable_.type&&t.setAttribute("variabletype",this.variable_.type),t},e.FieldVariable.prototype.setSourceBlock=function(t){if(t.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");e.FieldVariable.superClass_.setSourceBlock.call(this,t)},e.FieldVariable.prototype.getValue=function(){return this.variable_?this.variable_.getId():null},e.FieldVariable.prototype.getText=function(){return this.variable_?this.variable_.name:""},e.FieldVariable.prototype.getVariable=function(){return this.variable_},e.FieldVariable.prototype.getValidator=function(){return this.variable_?this.validator_:null},e.FieldVariable.prototype.doClassValidation_=function(t){if(null===t)return null;var n=e.Variables.getVariable(this.sourceBlock_.workspace,t);return n?this.typeIsAllowed_(n=n.type)?t:(console.warn("Variable type doesn't match this field!  Type was "+n),null):(console.warn("Variable id doesn't point to a real variable! ID was "+t),null)},e.FieldVariable.prototype.doValueUpdate_=function(t){this.variable_=e.Variables.getVariable(this.sourceBlock_.workspace,t),e.FieldVariable.superClass_.doValueUpdate_.call(this,t)},e.FieldVariable.prototype.typeIsAllowed_=function(t){var n=this.getVariableTypes_();if(!n)return!0;for(var o=0;o<n.length;o++)if(t==n[o])return!0;return!1},e.FieldVariable.prototype.getVariableTypes_=function(){var t=this.variableTypes;if(null===t&&this.sourceBlock_&&this.sourceBlock_.workspace)return this.sourceBlock_.workspace.getVariableTypes();if(0==(t=t||[""]).length)throw t=this.getText(),Error("'variableTypes' of field variable "+t+" was an empty list");return t},e.FieldVariable.prototype.setTypes_=function(t,n){if(n=n||"",null==t||null==t)t=null;else{if(!Array.isArray(t))throw Error("'variableTypes' was not an array in the definition of a FieldVariable");for(var o=!1,r=0;r<t.length;r++)t[r]==n&&(o=!0);if(!o)throw Error("Invalid default type '"+n+"' in the definition of a FieldVariable")}this.defaultType_=n,this.variableTypes=t},e.FieldVariable.prototype.refreshVariableName=function(){this.forceRerender()},e.FieldVariable.dropdownCreate=function(){if(!this.variable_)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");var t=this.getText(),n=[];if(this.sourceBlock_&&this.sourceBlock_.workspace)for(var o=this.getVariableTypes_(),r=0;r<o.length;r++){var p=this.sourceBlock_.workspace.getVariablesOfType(o[r]);n=n.concat(p)}for(n.sort(e.VariableModel.compareByName),o=[],r=0;r<n.length;r++)o[r]=[n[r].name,n[r].getId()];return o.push([e.Msg.RENAME_VARIABLE,e.RENAME_VARIABLE_ID]),e.Msg.DELETE_VARIABLE&&o.push([e.Msg.DELETE_VARIABLE.replace("%1",t),e.DELETE_VARIABLE_ID]),o},e.FieldVariable.prototype.onItemSelected_=function(t,n){if(t=n.getValue(),this.sourceBlock_&&this.sourceBlock_.workspace){if(t==e.RENAME_VARIABLE_ID)return void e.Variables.renameVariable(this.sourceBlock_.workspace,this.variable_);if(t==e.DELETE_VARIABLE_ID)return void this.sourceBlock_.workspace.deleteVariableById(this.variable_.getId())}this.setValue(t)},e.FieldVariable.prototype.referencesVariables=function(){return!0},e.fieldRegistry.register("field_variable",e.FieldVariable),e.utils.svgPaths={},e.utils.svgPaths.point=function(t,n){return" "+t+","+n+" "},e.utils.svgPaths.curve=function(t,n){return" "+t+n.join("")},e.utils.svgPaths.moveTo=function(t,n){return" M "+t+","+n+" "},e.utils.svgPaths.moveBy=function(t,n){return" m "+t+","+n+" "},e.utils.svgPaths.lineTo=function(t,n){return" l "+t+","+n+" "},e.utils.svgPaths.line=function(t){return" l"+t.join("")},e.utils.svgPaths.lineOnAxis=function(t,n){return" "+t+" "+n+" "},e.utils.svgPaths.arc=function(t,n,o,r){return t+" "+o+" "+o+" "+n+r},e.blockRendering.ConstantProvider=function(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.CORNER_RADIUS=8,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=e.utils.svgPaths.moveBy(0,0),this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_TEXT_BASELINE_CENTER=!e.utils.userAgent.IE&&!e.utils.userAgent.EDGE,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2),this.embossFilterId="",this.embossFilter_=null,this.disabledPatternId="",this.disabledPattern_=null,this.debugFilterId="",this.cssNode_=this.debugFilter_=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2}},e.blockRendering.ConstantProvider.prototype.init=function(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()},e.blockRendering.ConstantProvider.prototype.setTheme=function(t){this.blockStyles=Object.create(null);var o,n=t.blockStyles;for(o in n)this.blockStyles[o]=this.validatedBlockStyle_(n[o]);this.setDynamicProperties_(t)},e.blockRendering.ConstantProvider.prototype.setDynamicProperties_=function(t){this.setFontConstants_(t),this.setComponentConstants_(t),this.ADD_START_HATS=null!=t.startHats?t.startHats:this.ADD_START_HATS},e.blockRendering.ConstantProvider.prototype.setFontConstants_=function(t){this.FIELD_TEXT_FONTFAMILY=t.fontStyle&&null!=t.fontStyle.family?t.fontStyle.family:this.FIELD_TEXT_FONTFAMILY,this.FIELD_TEXT_FONTWEIGHT=t.fontStyle&&null!=t.fontStyle.weight?t.fontStyle.weight:this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTSIZE=t.fontStyle&&null!=t.fontStyle.size?t.fontStyle.size:this.FIELD_TEXT_FONTSIZE,t=e.utils.dom.measureFontMetrics("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=t.height,this.FIELD_TEXT_BASELINE=t.baseline},e.blockRendering.ConstantProvider.prototype.setComponentConstants_=function(t){this.CURSOR_COLOUR=t.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=t.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=t.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(t.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY},e.blockRendering.ConstantProvider.prototype.getBlockStyleForColour=function(t){var n="auto_"+t;return this.blockStyles[n]||(this.blockStyles[n]=this.createBlockStyle_(t)),{style:this.blockStyles[n],name:n}},e.blockRendering.ConstantProvider.prototype.getBlockStyle=function(t){return this.blockStyles[t||""]||(t&&0==t.indexOf("auto_")?this.getBlockStyleForColour(t.substring(5)).style:this.createBlockStyle_("#000000"))},e.blockRendering.ConstantProvider.prototype.createBlockStyle_=function(t){return this.validatedBlockStyle_({colourPrimary:t})},e.blockRendering.ConstantProvider.prototype.validatedBlockStyle_=function(t){var n={};return t&&e.utils.object.mixin(n,t),t=e.utils.parseBlockColour(n.colourPrimary||"#000"),n.colourPrimary=t.hex,n.colourSecondary=n.colourSecondary?e.utils.parseBlockColour(n.colourSecondary).hex:this.generateSecondaryColour_(n.colourPrimary),n.colourTertiary=n.colourTertiary?e.utils.parseBlockColour(n.colourTertiary).hex:this.generateTertiaryColour_(n.colourPrimary),n.hat=n.hat||"",n},e.blockRendering.ConstantProvider.prototype.generateSecondaryColour_=function(t){return e.utils.colour.blend("#fff",t,.6)||t},e.blockRendering.ConstantProvider.prototype.generateTertiaryColour_=function(t){return e.utils.colour.blend("#fff",t,.3)||t},e.blockRendering.ConstantProvider.prototype.dispose=function(){this.embossFilter_&&e.utils.dom.removeNode(this.embossFilter_),this.disabledPattern_&&e.utils.dom.removeNode(this.disabledPattern_),this.debugFilter_&&e.utils.dom.removeNode(this.debugFilter_),this.cssNode_=null},e.blockRendering.ConstantProvider.prototype.makeJaggedTeeth=function(){var t=this.JAGGED_TEETH_HEIGHT,n=this.JAGGED_TEETH_WIDTH;return{height:t,width:n,path:e.utils.svgPaths.line([e.utils.svgPaths.point(n,t/4),e.utils.svgPaths.point(2*-n,t/2),e.utils.svgPaths.point(n,t/4)])}},e.blockRendering.ConstantProvider.prototype.makeStartHat=function(){var t=this.START_HAT_HEIGHT,n=this.START_HAT_WIDTH;return{height:t,width:n,path:e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(30,-t),e.utils.svgPaths.point(70,-t),e.utils.svgPaths.point(n,0)])}},e.blockRendering.ConstantProvider.prototype.makePuzzleTab=function(){function t(b){var I=-(b=b?-1:1),x=o/2,k=x+2.5,Y=x+.5,X=e.utils.svgPaths.point(-n,b*x);return x=e.utils.svgPaths.point(n,b*x),e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(0,b*k),e.utils.svgPaths.point(-n,I*Y),X])+e.utils.svgPaths.curve("s",[e.utils.svgPaths.point(n,2.5*I),x])}var n=this.TAB_WIDTH,o=this.TAB_HEIGHT,r=t(!0),p=t(!1);return{type:this.SHAPES.PUZZLE,width:n,height:o,pathDown:p,pathUp:r}},e.blockRendering.ConstantProvider.prototype.makeNotch=function(){function t(I){return e.utils.svgPaths.line([e.utils.svgPaths.point(I*r,o),e.utils.svgPaths.point(3*I,0),e.utils.svgPaths.point(I*r,-o)])}var n=this.NOTCH_WIDTH,o=this.NOTCH_HEIGHT,r=(n-3)/2,p=t(1),b=t(-1);return{type:this.SHAPES.NOTCH,width:n,height:o,pathLeft:p,pathRight:b}},e.blockRendering.ConstantProvider.prototype.makeInsideCorners=function(){var t=this.CORNER_RADIUS;return{width:t,height:t,pathTop:e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(-t,t)),pathBottom:e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(t,t))}},e.blockRendering.ConstantProvider.prototype.makeOutsideCorners=function(){var t=this.CORNER_RADIUS,n=e.utils.svgPaths.moveBy(0,t)+e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(t,-t)),o=e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(t,t)),r=e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(-t,-t));return{topLeft:n,topRight:o,bottomRight:e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(-t,t)),bottomLeft:r,rightHeight:t}},e.blockRendering.ConstantProvider.prototype.shapeFor=function(t){switch(t.type){case e.connectionTypes.INPUT_VALUE:case e.connectionTypes.OUTPUT_VALUE:return this.PUZZLE_TAB;case e.connectionTypes.PREVIOUS_STATEMENT:case e.connectionTypes.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}},e.blockRendering.ConstantProvider.prototype.createDom=function(t,n,o){this.injectCSS_(n,o),t=e.utils.dom.createSvgElement(e.utils.Svg.DEFS,{},t),n=e.utils.dom.createSvgElement(e.utils.Svg.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},t),e.utils.dom.createSvgElement(e.utils.Svg.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},n),o=e.utils.dom.createSvgElement(e.utils.Svg.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},n),e.utils.dom.createSvgElement(e.utils.Svg.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},o),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},n),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},n),this.embossFilterId=n.id,this.embossFilter_=n,n=e.utils.dom.createSvgElement(e.utils.Svg.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},t),e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:10,height:10,fill:"#aaa"},n),e.utils.dom.createSvgElement(e.utils.Svg.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},n),this.disabledPatternId=n.id,this.disabledPattern_=n,e.blockRendering.Debug&&(t=e.utils.dom.createSvgElement(e.utils.Svg.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},t),n=e.utils.dom.createSvgElement(e.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},t),e.utils.dom.createSvgElement(e.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),e.utils.dom.createSvgElement(e.utils.Svg.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},t),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},t),this.debugFilterId=t.id,this.debugFilter_=t)},e.blockRendering.ConstantProvider.prototype.injectCSS_=function(t,n){n=this.getCSS_(n),t="blockly-renderer-style-"+t,this.cssNode_=document.getElementById(t);var o=n.join("\n");this.cssNode_?this.cssNode_.firstChild.textContent=o:((n=document.createElement("style")).id=t,t=document.createTextNode(o),n.appendChild(t),document.head.insertBefore(n,document.head.firstChild),this.cssNode_=n)},e.blockRendering.ConstantProvider.prototype.getCSS_=function(t){return[t+" .blocklyText, ",t+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",t+" .blocklyText {","fill: #fff;","}",t+" .blocklyNonEditableText>rect,",t+" .blocklyEditableText>rect {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","fill-opacity: .6;","stroke: none;","}",t+" .blocklyNonEditableText>text,",t+" .blocklyEditableText>text {","fill: #000;","}",t+" .blocklyFlyoutLabelText {","fill: #000;","}",t+" .blocklyText.blocklyBubbleText {","fill: #000;","}",t+" .blocklyEditableText:not(.editing):hover>rect {","stroke: #fff;","stroke-width: 2;","}",t+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","}",t+" .blocklySelected>.blocklyPath {","stroke: #fc3;","stroke-width: 3px;","}",t+" .blocklyHighlightedConnectionPath {","stroke: #fc3;","}",t+" .blocklyReplaceable .blocklyPath {","fill-opacity: .5;","}",t+" .blocklyReplaceable .blocklyPathLight,",t+" .blocklyReplaceable .blocklyPathDark {","display: none;","}",t+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]},e.blockRendering.Types={NONE:0,FIELD:1,HAT:2,ICON:4,SPACER:8,BETWEEN_ROW_SPACER:16,IN_ROW_SPACER:32,EXTERNAL_VALUE_INPUT:64,INPUT:128,INLINE_INPUT:256,STATEMENT_INPUT:512,CONNECTION:1024,PREVIOUS_CONNECTION:2048,NEXT_CONNECTION:4096,OUTPUT_CONNECTION:8192,CORNER:16384,LEFT_SQUARE_CORNER:32768,LEFT_ROUND_CORNER:65536,RIGHT_SQUARE_CORNER:131072,RIGHT_ROUND_CORNER:262144,JAGGED_EDGE:524288,ROW:1048576,TOP_ROW:2097152,BOTTOM_ROW:4194304,INPUT_ROW:8388608},e.blockRendering.Types.LEFT_CORNER=e.blockRendering.Types.LEFT_SQUARE_CORNER|e.blockRendering.Types.LEFT_ROUND_CORNER,e.blockRendering.Types.RIGHT_CORNER=e.blockRendering.Types.RIGHT_SQUARE_CORNER|e.blockRendering.Types.RIGHT_ROUND_CORNER,e.blockRendering.Types.nextTypeValue_=16777216,e.blockRendering.Types.getType=function(t){return Object.prototype.hasOwnProperty.call(e.blockRendering.Types,t)||(e.blockRendering.Types[t]=e.blockRendering.Types.nextTypeValue_,e.blockRendering.Types.nextTypeValue_<<=1),e.blockRendering.Types[t]},e.blockRendering.Types.isField=function(t){return t.type&e.blockRendering.Types.FIELD},e.blockRendering.Types.isHat=function(t){return t.type&e.blockRendering.Types.HAT},e.blockRendering.Types.isIcon=function(t){return t.type&e.blockRendering.Types.ICON},e.blockRendering.Types.isSpacer=function(t){return t.type&e.blockRendering.Types.SPACER},e.blockRendering.Types.isInRowSpacer=function(t){return t.type&e.blockRendering.Types.IN_ROW_SPACER},e.blockRendering.Types.isInput=function(t){return t.type&e.blockRendering.Types.INPUT},e.blockRendering.Types.isExternalInput=function(t){return t.type&e.blockRendering.Types.EXTERNAL_VALUE_INPUT},e.blockRendering.Types.isInlineInput=function(t){return t.type&e.blockRendering.Types.INLINE_INPUT},e.blockRendering.Types.isStatementInput=function(t){return t.type&e.blockRendering.Types.STATEMENT_INPUT},e.blockRendering.Types.isPreviousConnection=function(t){return t.type&e.blockRendering.Types.PREVIOUS_CONNECTION},e.blockRendering.Types.isNextConnection=function(t){return t.type&e.blockRendering.Types.NEXT_CONNECTION},e.blockRendering.Types.isPreviousOrNextConnection=function(t){return t.type&(e.blockRendering.Types.PREVIOUS_CONNECTION|e.blockRendering.Types.NEXT_CONNECTION)},e.blockRendering.Types.isLeftRoundedCorner=function(t){return t.type&e.blockRendering.Types.LEFT_ROUND_CORNER},e.blockRendering.Types.isRightRoundedCorner=function(t){return t.type&e.blockRendering.Types.RIGHT_ROUND_CORNER},e.blockRendering.Types.isLeftSquareCorner=function(t){return t.type&e.blockRendering.Types.LEFT_SQUARE_CORNER},e.blockRendering.Types.isRightSquareCorner=function(t){return t.type&e.blockRendering.Types.RIGHT_SQUARE_CORNER},e.blockRendering.Types.isCorner=function(t){return t.type&e.blockRendering.Types.CORNER},e.blockRendering.Types.isJaggedEdge=function(t){return t.type&e.blockRendering.Types.JAGGED_EDGE},e.blockRendering.Types.isRow=function(t){return t.type&e.blockRendering.Types.ROW},e.blockRendering.Types.isBetweenRowSpacer=function(t){return t.type&e.blockRendering.Types.BETWEEN_ROW_SPACER},e.blockRendering.Types.isTopRow=function(t){return t.type&e.blockRendering.Types.TOP_ROW},e.blockRendering.Types.isBottomRow=function(t){return t.type&e.blockRendering.Types.BOTTOM_ROW},e.blockRendering.Types.isTopOrBottomRow=function(t){return t.type&(e.blockRendering.Types.TOP_ROW|e.blockRendering.Types.BOTTOM_ROW)},e.blockRendering.Types.isInputRow=function(t){return t.type&e.blockRendering.Types.INPUT_ROW},e.blockRendering.Measurable=function(t){this.height=this.width=0,this.type=e.blockRendering.Types.NONE,this.centerline=this.xPos=0,this.constants_=t,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT},e.blockRendering.Connection=function(t,n){e.blockRendering.Connection.superClass_.constructor.call(this,t),this.connectionModel=n,this.shape=this.constants_.shapeFor(n),this.isDynamicShape=!!this.shape.isDynamic,this.type|=e.blockRendering.Types.CONNECTION},e.utils.object.inherits(e.blockRendering.Connection,e.blockRendering.Measurable),e.blockRendering.OutputConnection=function(t,n){e.blockRendering.OutputConnection.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=0},e.utils.object.inherits(e.blockRendering.OutputConnection,e.blockRendering.Connection),e.blockRendering.PreviousConnection=function(t,n){e.blockRendering.PreviousConnection.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},e.utils.object.inherits(e.blockRendering.PreviousConnection,e.blockRendering.Connection),e.blockRendering.NextConnection=function(t,n){e.blockRendering.NextConnection.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},e.utils.object.inherits(e.blockRendering.NextConnection,e.blockRendering.Connection),e.blockRendering.InputConnection=function(t,n){e.blockRendering.InputConnection.superClass_.constructor.call(this,t,n.connection),this.type|=e.blockRendering.Types.INPUT,this.input=n,this.align=n.align,(this.connectedBlock=n.connection&&n.connection.targetBlock()?n.connection.targetBlock():null)?(t=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=t.width,this.connectedBlockHeight=t.height):this.connectedBlockHeight=this.connectedBlockWidth=0,this.connectionOffsetY=this.connectionOffsetX=0},e.utils.object.inherits(e.blockRendering.InputConnection,e.blockRendering.Connection),e.blockRendering.InlineInput=function(t,n){e.blockRendering.InlineInput.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY=this.isDynamicShape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=this.isDynamicShape?this.shape.connectionOffsetX(this.connectionWidth):0},e.utils.object.inherits(e.blockRendering.InlineInput,e.blockRendering.InputConnection),e.blockRendering.StatementInput=function(t,n){e.blockRendering.StatementInput.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width},e.utils.object.inherits(e.blockRendering.StatementInput,e.blockRendering.InputConnection),e.blockRendering.ExternalValueInput=function(t,n){e.blockRendering.ExternalValueInput.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width},e.utils.object.inherits(e.blockRendering.ExternalValueInput,e.blockRendering.InputConnection),e.blockRendering.Icon=function(t,n){e.blockRendering.Icon.superClass_.constructor.call(this,t),this.icon=n,this.isVisible=n.isVisible(),this.type|=e.blockRendering.Types.ICON,t=n.getCorrectedSize(),this.height=t.height,this.width=t.width},e.utils.object.inherits(e.blockRendering.Icon,e.blockRendering.Measurable),e.blockRendering.JaggedEdge=function(t){e.blockRendering.JaggedEdge.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width},e.utils.object.inherits(e.blockRendering.JaggedEdge,e.blockRendering.Measurable),e.blockRendering.Field=function(t,n,o){e.blockRendering.Field.superClass_.constructor.call(this,t),this.field=n,this.isEditable=n.EDITABLE,this.flipRtl=n.getFlipRtl(),this.type|=e.blockRendering.Types.FIELD,t=this.field.getSize(),this.height=t.height,this.width=t.width,this.parentInput=o},e.utils.object.inherits(e.blockRendering.Field,e.blockRendering.Measurable),e.blockRendering.Hat=function(t){e.blockRendering.Hat.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height},e.utils.object.inherits(e.blockRendering.Hat,e.blockRendering.Measurable),e.blockRendering.SquareCorner=function(t,n){e.blockRendering.SquareCorner.superClass_.constructor.call(this,t),this.type=(n&&"left"!=n?e.blockRendering.Types.RIGHT_SQUARE_CORNER:e.blockRendering.Types.LEFT_SQUARE_CORNER)|e.blockRendering.Types.CORNER,this.width=this.height=this.constants_.NO_PADDING},e.utils.object.inherits(e.blockRendering.SquareCorner,e.blockRendering.Measurable),e.blockRendering.RoundCorner=function(t,n){e.blockRendering.RoundCorner.superClass_.constructor.call(this,t),this.type=(n&&"left"!=n?e.blockRendering.Types.RIGHT_ROUND_CORNER:e.blockRendering.Types.LEFT_ROUND_CORNER)|e.blockRendering.Types.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2},e.utils.object.inherits(e.blockRendering.RoundCorner,e.blockRendering.Measurable),e.blockRendering.InRowSpacer=function(t,n){e.blockRendering.InRowSpacer.superClass_.constructor.call(this,t),this.type=this.type|e.blockRendering.Types.SPACER|e.blockRendering.Types.IN_ROW_SPACER,this.width=n,this.height=this.constants_.SPACER_DEFAULT_HEIGHT},e.utils.object.inherits(e.blockRendering.InRowSpacer,e.blockRendering.Measurable),e.blockRendering.Row=function(t){this.type=e.blockRendering.Types.ROW,this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=this.hasStatement=this.hasExternalInput=!1,this.constants_=t,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT,this.align=null},e.blockRendering.Row.prototype.measure=function(){throw Error("Unexpected attempt to measure a base Row.")},e.blockRendering.Row.prototype.getLastInput=function(){for(var n,t=this.elements.length-1;n=this.elements[t];t--)if(e.blockRendering.Types.isInput(n))return n;return null},e.blockRendering.Row.prototype.startsWithElemSpacer=function(){return!0},e.blockRendering.Row.prototype.endsWithElemSpacer=function(){return!0},e.blockRendering.Row.prototype.getFirstSpacer=function(){for(var n,t=0;n=this.elements[t];t++)if(e.blockRendering.Types.isSpacer(n))return n;return null},e.blockRendering.Row.prototype.getLastSpacer=function(){for(var n,t=this.elements.length-1;n=this.elements[t];t--)if(e.blockRendering.Types.isSpacer(n))return n;return null},e.blockRendering.TopRow=function(t){e.blockRendering.TopRow.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.TOP_ROW,this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null},e.utils.object.inherits(e.blockRendering.TopRow,e.blockRendering.Row),e.blockRendering.TopRow.prototype.hasLeftSquareCorner=function(t){var n=(t.hat?"cap"===t.hat:this.constants_.ADD_START_HATS)&&!t.outputConnection&&!t.previousConnection,o=t.getPreviousBlock();return!!t.outputConnection||n||!!o&&o.getNextBlock()==t},e.blockRendering.TopRow.prototype.hasRightSquareCorner=function(t){return!0},e.blockRendering.TopRow.prototype.measure=function(){for(var p,t=0,n=0,o=0,r=0;p=this.elements[r];r++)n+=p.width,e.blockRendering.Types.isSpacer(p)||(e.blockRendering.Types.isHat(p)?o=Math.max(o,p.ascenderHeight):t=Math.max(t,p.height));this.width=Math.max(this.minWidth,n),this.height=Math.max(this.minHeight,t)+o,this.capline=this.ascenderHeight=o,this.widthWithConnectedBlocks=this.width},e.blockRendering.TopRow.prototype.startsWithElemSpacer=function(){return!1},e.blockRendering.TopRow.prototype.endsWithElemSpacer=function(){return!1},e.blockRendering.BottomRow=function(t){e.blockRendering.BottomRow.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.BOTTOM_ROW,this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0},e.utils.object.inherits(e.blockRendering.BottomRow,e.blockRendering.Row),e.blockRendering.BottomRow.prototype.hasLeftSquareCorner=function(t){return!!t.outputConnection||!!t.getNextBlock()},e.blockRendering.BottomRow.prototype.hasRightSquareCorner=function(t){return!0},e.blockRendering.BottomRow.prototype.measure=function(){for(var p,t=0,n=0,o=0,r=0;p=this.elements[r];r++)n+=p.width,e.blockRendering.Types.isSpacer(p)||(e.blockRendering.Types.isNextConnection(p)?o=Math.max(o,p.height):t=Math.max(t,p.height));this.width=Math.max(this.minWidth,n),this.height=Math.max(this.minHeight,t)+o,this.descenderHeight=o,this.widthWithConnectedBlocks=this.width},e.blockRendering.BottomRow.prototype.startsWithElemSpacer=function(){return!1},e.blockRendering.BottomRow.prototype.endsWithElemSpacer=function(){return!1},e.blockRendering.SpacerRow=function(t,n,o){e.blockRendering.SpacerRow.superClass_.constructor.call(this,t),this.type=this.type|e.blockRendering.Types.SPACER|e.blockRendering.Types.BETWEEN_ROW_SPACER,this.width=o,this.height=n,this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.elements=[new e.blockRendering.InRowSpacer(this.constants_,o)]},e.utils.object.inherits(e.blockRendering.SpacerRow,e.blockRendering.Row),e.blockRendering.SpacerRow.prototype.measure=function(){},e.blockRendering.InputRow=function(t){e.blockRendering.InputRow.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.INPUT_ROW,this.connectedBlockWidths=0},e.utils.object.inherits(e.blockRendering.InputRow,e.blockRendering.Row),e.blockRendering.InputRow.prototype.measure=function(){this.width=this.minWidth,this.height=this.minHeight;for(var o,t=0,n=0;o=this.elements[n];n++)this.width+=o.width,e.blockRendering.Types.isInput(o)&&(e.blockRendering.Types.isStatementInput(o)?t+=o.connectedBlockWidth:e.blockRendering.Types.isExternalInput(o)&&0!=o.connectedBlockWidth&&(t+=o.connectedBlockWidth-o.connectionWidth)),e.blockRendering.Types.isSpacer(o)||(this.height=Math.max(this.height,o.height));this.connectedBlockWidths=t,this.widthWithConnectedBlocks=this.width+t},e.blockRendering.InputRow.prototype.endsWithElemSpacer=function(){return!this.hasExternalInput&&!this.hasStatement},e.blockRendering.RenderInfo=function(t,n){this.block_=n,this.renderer_=t,this.constants_=this.renderer_.getConstants(),this.outputConnection=n.outputConnection?new e.blockRendering.OutputConnection(this.constants_,n.outputConnection):null,this.isInline=n.getInputsInline()&&!n.isCollapsed(),this.isCollapsed=n.isCollapsed(),this.isInsertionMarker=n.isInsertionMarker(),this.RTL=n.RTL,this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.hiddenIcons=[],this.topRow=new e.blockRendering.TopRow(this.constants_),this.bottomRow=new e.blockRendering.BottomRow(this.constants_),this.startY=this.startX=0},e.blockRendering.RenderInfo.prototype.getRenderer=function(){return this.renderer_},e.blockRendering.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},e.blockRendering.RenderInfo.prototype.createRows_=function(){this.populateTopRow_(),this.rows.push(this.topRow);var t=new e.blockRendering.InputRow(this.constants_);this.inputRows.push(t);for(var r,n=this.block_.getIcons(),o=0;r=n[o];o++){var p=new e.blockRendering.Icon(this.constants_,r);this.isCollapsed&&r.collapseHidden?this.hiddenIcons.push(p):t.elements.push(p)}for(r=null,o=0;n=this.block_.inputList[o];o++)if(n.isVisible()){for(this.shouldStartNewRow_(n,r)&&(this.rows.push(t),t=new e.blockRendering.InputRow(this.constants_),this.inputRows.push(t)),r=0;p=n.fieldRow[r];r++)t.elements.push(new e.blockRendering.Field(this.constants_,p,n));this.addInput_(n,t),r=n}this.isCollapsed&&(t.hasJaggedEdge=!0,t.elements.push(new e.blockRendering.JaggedEdge(this.constants_))),(t.elements.length||t.hasDummyInput)&&this.rows.push(t),this.populateBottomRow_(),this.rows.push(this.bottomRow)},e.blockRendering.RenderInfo.prototype.populateTopRow_=function(){var t=!!this.block_.previousConnection,n=(this.block_.hat?"cap"===this.block_.hat:this.constants_.ADD_START_HATS)&&!this.outputConnection&&!t,o=this.topRow.hasLeftSquareCorner(this.block_)?e.blockRendering.SquareCorner:e.blockRendering.RoundCorner;this.topRow.elements.push(new o(this.constants_)),n?(t=new e.blockRendering.Hat(this.constants_),this.topRow.elements.push(t),this.topRow.capline=t.ascenderHeight):t&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new e.blockRendering.PreviousConnection(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.topRow.minHeight=this.block_.inputList.length&&this.block_.inputList[0].type==e.inputTypes.STATEMENT&&!this.block_.isCollapsed()?this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.constants_.TOP_ROW_MIN_HEIGHT,o=this.topRow.hasRightSquareCorner(this.block_)?e.blockRendering.SquareCorner:e.blockRendering.RoundCorner,this.topRow.elements.push(new o(this.constants_,"right"))},e.blockRendering.RenderInfo.prototype.populateBottomRow_=function(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==e.inputTypes.STATEMENT?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new e.blockRendering.SquareCorner(this.constants_)):this.bottomRow.elements.push(new e.blockRendering.RoundCorner(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new e.blockRendering.NextConnection(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new e.blockRendering.SquareCorner(this.constants_,"right")):this.bottomRow.elements.push(new e.blockRendering.RoundCorner(this.constants_,"right"))},e.blockRendering.RenderInfo.prototype.addInput_=function(t,n){this.isInline&&t.type==e.inputTypes.VALUE?(n.elements.push(new e.blockRendering.InlineInput(this.constants_,t)),n.hasInlineInput=!0):t.type==e.inputTypes.STATEMENT?(n.elements.push(new e.blockRendering.StatementInput(this.constants_,t)),n.hasStatement=!0):t.type==e.inputTypes.VALUE?(n.elements.push(new e.blockRendering.ExternalValueInput(this.constants_,t)),n.hasExternalInput=!0):t.type==e.inputTypes.DUMMY&&(n.minHeight=Math.max(n.minHeight,t.getSourceBlock()&&t.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),n.hasDummyInput=!0),null==n.align&&(n.align=t.align)},e.blockRendering.RenderInfo.prototype.shouldStartNewRow_=function(t,n){return!(!n||t.type!=e.inputTypes.STATEMENT&&n.type!=e.inputTypes.STATEMENT&&(t.type!=e.inputTypes.VALUE&&t.type!=e.inputTypes.DUMMY||this.isInline))},e.blockRendering.RenderInfo.prototype.addElemSpacing_=function(){for(var n,t=0;n=this.rows[t];t++){var o=n.elements;if(n.elements=[],n.startsWithElemSpacer()&&n.elements.push(new e.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,o[0]))),o.length){for(var r=0;r<o.length-1;r++){n.elements.push(o[r]);var p=this.getInRowSpacing_(o[r],o[r+1]);n.elements.push(new e.blockRendering.InRowSpacer(this.constants_,p))}n.elements.push(o[o.length-1]),n.endsWithElemSpacer()&&n.elements.push(new e.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(o[o.length-1],null)))}}},e.blockRendering.RenderInfo.prototype.getInRowSpacing_=function(t,n){if(!t&&n&&e.blockRendering.Types.isStatementInput(n))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(t&&e.blockRendering.Types.isInput(t)&&!n){if(e.blockRendering.Types.isExternalInput(t))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isInlineInput(t))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(t))return this.constants_.NO_PADDING}return t&&e.blockRendering.Types.isLeftSquareCorner(t)&&n&&(e.blockRendering.Types.isPreviousConnection(n)||e.blockRendering.Types.isNextConnection(n))?n.notchOffset:t&&e.blockRendering.Types.isLeftRoundedCorner(t)&&n&&(e.blockRendering.Types.isPreviousConnection(n)||e.blockRendering.Types.isNextConnection(n))?n.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},e.blockRendering.RenderInfo.prototype.computeBounds_=function(){for(var p,t=0,n=0,o=0,r=0;p=this.rows[r];r++){if(p.measure(),n=Math.max(n,p.width),p.hasStatement){var b=p.getLastInput();t=Math.max(t,p.width-b.width)}o=Math.max(o,p.widthWithConnectedBlocks)}for(this.statementEdge=t,this.width=n,r=0;p=this.rows[r];r++)p.hasStatement&&(p.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(n,o),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)},e.blockRendering.RenderInfo.prototype.alignRowElements_=function(){for(var n,t=0;n=this.rows[t];t++)if(n.hasStatement)this.alignStatementRow_(n);else{var o=n.width;0<(o=this.getDesiredRowWidth_(n)-o)&&this.addAlignmentPadding_(n,o),e.blockRendering.Types.isTopOrBottomRow(n)&&(n.widthWithConnectedBlocks=n.width)}},e.blockRendering.RenderInfo.prototype.getDesiredRowWidth_=function(t){return this.width-this.startX},e.blockRendering.RenderInfo.prototype.addAlignmentPadding_=function(t,n){var o=t.getFirstSpacer(),r=t.getLastSpacer();(t.hasExternalInput||t.hasStatement)&&(t.widthWithConnectedBlocks+=n),t.align==e.constants.ALIGN.LEFT?r.width+=n:t.align==e.constants.ALIGN.CENTRE?(o.width+=n/2,r.width+=n/2):t.align==e.constants.ALIGN.RIGHT?o.width+=n:r.width+=n,t.width+=n},e.blockRendering.RenderInfo.prototype.alignStatementRow_=function(t){var n=t.getLastInput(),o=t.width-n.width,r=this.statementEdge;0<(o=r-o)&&this.addAlignmentPadding_(t,o),o=t.width,r=this.getDesiredRowWidth_(t),n.width+=r-o,n.height=Math.max(n.height,t.height),t.width+=r-o,t.widthWithConnectedBlocks=Math.max(t.width,this.statementEdge+t.connectedBlockWidths)},e.blockRendering.RenderInfo.prototype.addRowSpacing_=function(){var t=this.rows;this.rows=[];for(var n=0;n<t.length;n++)this.rows.push(t[n]),n!=t.length-1&&this.rows.push(this.makeSpacerRow_(t[n],t[n+1]))},e.blockRendering.RenderInfo.prototype.makeSpacerRow_=function(t,n){var o=this.getSpacerRowHeight_(t,n),r=this.getSpacerRowWidth_(t,n);return o=new e.blockRendering.SpacerRow(this.constants_,o,r),t.hasStatement&&(o.followsStatement=!0),n.hasStatement&&(o.precedesStatement=!0),o},e.blockRendering.RenderInfo.prototype.getSpacerRowWidth_=function(t,n){return this.width-this.startX},e.blockRendering.RenderInfo.prototype.getSpacerRowHeight_=function(t,n){return this.constants_.MEDIUM_PADDING},e.blockRendering.RenderInfo.prototype.getElemCenterline_=function(t,n){return e.blockRendering.Types.isSpacer(n)?t.yPos+n.height/2:e.blockRendering.Types.isBottomRow(t)?(t=t.yPos+t.height-t.descenderHeight,e.blockRendering.Types.isNextConnection(n)?t+n.height/2:t-n.height/2):e.blockRendering.Types.isTopRow(t)?e.blockRendering.Types.isHat(n)?t.capline-n.height/2:t.capline+n.height/2:t.yPos+t.height/2},e.blockRendering.RenderInfo.prototype.recordElemPositions_=function(t){for(var r,n=t.xPos,o=0;r=t.elements[o];o++)e.blockRendering.Types.isSpacer(r)&&(r.height=t.height),r.xPos=n,r.centerline=this.getElemCenterline_(t,r),n+=r.width},e.blockRendering.RenderInfo.prototype.finalize_=function(){for(var r,t=0,n=0,o=0;r=this.rows[o];o++)r.yPos=n,r.xPos=this.startX,n+=r.height,t=Math.max(t,r.widthWithConnectedBlocks),this.recordElemPositions_(r);this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(t=Math.max(t,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.widthWithChildren=t+this.startX,this.height=n,this.startY=this.topRow.capline,this.bottomRow.baseline=n-this.bottomRow.descenderHeight},e.blockRendering.Debug=function(t){this.debugElements_=[],this.svgRoot_=null,this.constants_=t},e.blockRendering.Debug.config={rowSpacers:!0,elemSpacers:!0,rows:!0,elems:!0,connections:!0,blockBounds:!0,connectedBlockBounds:!0,render:!0},e.blockRendering.Debug.prototype.clearElems=function(){for(var n,t=0;n=this.debugElements_[t];t++)e.utils.dom.removeNode(n);this.debugElements_=[]},e.blockRendering.Debug.prototype.drawSpacerRow=function(t,n,o){if(e.blockRendering.Debug.config.rowSpacers){var r=Math.abs(t.height),p=0>t.height;p&&(n-=r),this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"rowSpacerRect blockRenderDebug",x:o?-(t.xPos+t.width):t.xPos,y:n,width:t.width,height:r,stroke:p?"black":"blue",fill:"blue","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}},e.blockRendering.Debug.prototype.drawSpacerElem=function(t,n,o){if(e.blockRendering.Debug.config.elemSpacers){n=Math.abs(t.width);var r=0>t.width,p=r?t.xPos-n:t.xPos;o&&(p=-(p+n)),this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"elemSpacerRect blockRenderDebug",x:p,y:t.centerline-t.height/2,width:n,height:t.height,stroke:"pink",fill:r?"black":"pink","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}},e.blockRendering.Debug.prototype.drawRenderedElem=function(t,n){if(e.blockRendering.Debug.config.elems){var o=t.xPos;n&&(o=-(o+t.width)),this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"rowRenderingRect blockRenderDebug",x:o,y:n=t.centerline-t.height/2,width:t.width,height:t.height,stroke:"black",fill:"none","stroke-width":"1px"},this.svgRoot_)),e.blockRendering.Types.isField(t)&&t.field instanceof e.FieldLabel&&this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"rowRenderingRect blockRenderDebug",x:o,y:n+this.constants_.FIELD_TEXT_BASELINE,width:t.width,height:"0.1px",stroke:"red",fill:"none","stroke-width":"0.5px"},this.svgRoot_))}e.blockRendering.Types.isInput(t)&&e.blockRendering.Debug.config.connections&&this.drawConnection(t.connectionModel)},e.blockRendering.Debug.prototype.drawConnection=function(t){if(e.blockRendering.Debug.config.connections){if(t.type==e.connectionTypes.INPUT_VALUE)var n=4,o="magenta",r="none";else t.type==e.connectionTypes.OUTPUT_VALUE?(n=2,r=o="magenta"):t.type==e.connectionTypes.NEXT_STATEMENT?(n=4,o="goldenrod",r="none"):t.type==e.connectionTypes.PREVIOUS_STATEMENT&&(n=2,r=o="goldenrod");this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{class:"blockRenderDebug",cx:t.offsetInBlock_.x,cy:t.offsetInBlock_.y,r:n,fill:r,stroke:o},this.svgRoot_))}},e.blockRendering.Debug.prototype.drawRenderedRow=function(t,n,o){e.blockRendering.Debug.config.rows&&(this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"elemRenderingRect blockRenderDebug",x:o?-(t.xPos+t.width):t.xPos,y:t.yPos,width:t.width,height:t.height,stroke:"red",fill:"none","stroke-width":"1px"},this.svgRoot_)),e.blockRendering.Types.isTopOrBottomRow(t)||e.blockRendering.Debug.config.connectedBlockBounds&&this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"connectedBlockWidth blockRenderDebug",x:o?-(t.xPos+t.widthWithConnectedBlocks):t.xPos,y:t.yPos,width:t.widthWithConnectedBlocks,height:t.height,stroke:this.randomColour_,fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_)))},e.blockRendering.Debug.prototype.drawRowWithElements=function(t,n,o){for(var r=0,p=t.elements.length;r<p;r++){var b=t.elements[r];b?e.blockRendering.Types.isSpacer(b)?this.drawSpacerElem(b,t.height,o):this.drawRenderedElem(b,o):console.warn("A row has an undefined or null element.",t,b)}this.drawRenderedRow(t,n,o)},e.blockRendering.Debug.prototype.drawBoundingBox=function(t){if(e.blockRendering.Debug.config.blockBounds){var n=t.RTL?-t.width:0;this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blockBoundingBox blockRenderDebug",x:n,y:0,width:t.width,height:t.height,stroke:"black",fill:"none","stroke-width":"1px","stroke-dasharray":"5,5"},this.svgRoot_)),e.blockRendering.Debug.config.connectedBlockBounds&&this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blockRenderDebug",x:n=t.RTL?-t.widthWithChildren:0,y:0,width:t.widthWithChildren,height:t.height,stroke:"#DF57BC",fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_))}},e.blockRendering.Debug.prototype.drawDebug=function(t,n){this.clearElems(),this.svgRoot_=t.getSvgRoot(),this.randomColour_="#"+Math.floor(16777215*Math.random()).toString(16);for(var p,o=0,r=0;p=n.rows[r];r++)e.blockRendering.Types.isBetweenRowSpacer(p)?this.drawSpacerRow(p,o,n.RTL):this.drawRowWithElements(p,o,n.RTL),o+=p.height;t.previousConnection&&this.drawConnection(t.previousConnection),t.nextConnection&&this.drawConnection(t.nextConnection),t.outputConnection&&this.drawConnection(t.outputConnection),n.rightSide&&this.drawRenderedElem(n.rightSide,n.RTL),this.drawBoundingBox(n),this.drawRender(t.pathObject.svgPath)},e.blockRendering.Debug.prototype.drawRender=function(t){e.blockRendering.Debug.config.render&&(t.setAttribute("filter","url(#"+this.constants_.debugFilterId+")"),setTimeout(function(){t.setAttribute("filter","")},100))},e.blockRendering.Drawer=function(t,n){this.block_=t,this.info_=n,this.topLeft_=t.getRelativeToSurfaceXY(),this.inlinePath_=this.outlinePath_="",this.constants_=n.getRenderer().getConstants()},e.blockRendering.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),this.block_.pathObject.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),e.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},e.blockRendering.Drawer.prototype.recordSizeOnBlock_=function(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren},e.blockRendering.Drawer.prototype.hideHiddenIcons_=function(){for(var n,t=0;n=this.info_.hiddenIcons[t];t++)n.icon.iconGroup_.setAttribute("display","none")},e.blockRendering.Drawer.prototype.drawOutline_=function(){this.drawTop_();for(var t=1;t<this.info_.rows.length-1;t++){var n=this.info_.rows[t];n.hasJaggedEdge?this.drawJaggedEdge_(n):n.hasStatement?this.drawStatementInput_(n):n.hasExternalInput?this.drawValueInput_(n):this.drawRightSideRow_(n)}this.drawBottom_(),this.drawLeft_()},e.blockRendering.Drawer.prototype.drawTop_=function(){var t=this.info_.topRow,n=t.elements;this.positionPreviousConnection_(),this.outlinePath_+=e.utils.svgPaths.moveBy(t.xPos,this.info_.startY);for(var r,o=0;r=n[o];o++)e.blockRendering.Types.isLeftRoundedCorner(r)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:e.blockRendering.Types.isRightRoundedCorner(r)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:e.blockRendering.Types.isPreviousConnection(r)?this.outlinePath_+=r.shape.pathLeft:e.blockRendering.Types.isHat(r)?this.outlinePath_+=this.constants_.START_HAT.path:e.blockRendering.Types.isSpacer(r)&&(this.outlinePath_+=e.utils.svgPaths.lineOnAxis("h",r.width));this.outlinePath_+=e.utils.svgPaths.lineOnAxis("v",t.height)},e.blockRendering.Drawer.prototype.drawJaggedEdge_=function(t){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+e.utils.svgPaths.lineOnAxis("v",t.height-this.constants_.JAGGED_TEETH.height)},e.blockRendering.Drawer.prototype.drawValueInput_=function(t){var n=t.getLastInput();this.positionExternalValueConnection_(t);var o="function"==typeof n.shape.pathDown?n.shape.pathDown(n.height):n.shape.pathDown;this.outlinePath_+=e.utils.svgPaths.lineOnAxis("H",n.xPos+n.width)+o+e.utils.svgPaths.lineOnAxis("v",t.height-n.connectionHeight)},e.blockRendering.Drawer.prototype.drawStatementInput_=function(t){var n=t.getLastInput(),o=n.xPos+n.notchOffset+n.shape.width;n=n.shape.pathRight+e.utils.svgPaths.lineOnAxis("h",-(n.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var r=t.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=e.utils.svgPaths.lineOnAxis("H",o)+n+e.utils.svgPaths.lineOnAxis("v",r)+this.constants_.INSIDE_CORNERS.pathBottom+e.utils.svgPaths.lineOnAxis("H",t.xPos+t.width),this.positionStatementInputConnection_(t)},e.blockRendering.Drawer.prototype.drawRightSideRow_=function(t){this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",t.yPos+t.height)},e.blockRendering.Drawer.prototype.drawBottom_=function(){var t=this.info_.bottomRow,n=t.elements;this.positionNextConnection_();for(var b,o=0,r="",p=n.length-1;b=n[p];p--)e.blockRendering.Types.isNextConnection(b)?r+=b.shape.pathRight:e.blockRendering.Types.isLeftSquareCorner(b)?r+=e.utils.svgPaths.lineOnAxis("H",t.xPos):e.blockRendering.Types.isLeftRoundedCorner(b)?r+=this.constants_.OUTSIDE_CORNERS.bottomLeft:e.blockRendering.Types.isRightRoundedCorner(b)?(r+=this.constants_.OUTSIDE_CORNERS.bottomRight,o=this.constants_.OUTSIDE_CORNERS.rightHeight):e.blockRendering.Types.isSpacer(b)&&(r+=e.utils.svgPaths.lineOnAxis("h",-1*b.width));this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",t.baseline-o),this.outlinePath_+=r},e.blockRendering.Drawer.prototype.drawLeft_=function(){var t=this.info_.outputConnection;if(this.positionOutputConnection_(),t){var n=t.connectionOffsetY+t.height;t="function"==typeof t.shape.pathUp?t.shape.pathUp(t.height):t.shape.pathUp,this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",n)+t}this.outlinePath_+="z"},e.blockRendering.Drawer.prototype.drawInternals_=function(){for(var n,t=0;n=this.info_.rows[t];t++)for(var r,o=0;r=n.elements[o];o++)e.blockRendering.Types.isInlineInput(r)?this.drawInlineInput_(r):(e.blockRendering.Types.isIcon(r)||e.blockRendering.Types.isField(r))&&this.layoutField_(r)},e.blockRendering.Drawer.prototype.layoutField_=function(t){if(e.blockRendering.Types.isField(t))var n=t.field.getSvgRoot();else e.blockRendering.Types.isIcon(t)&&(n=t.icon.iconGroup_);var o=t.centerline-t.height/2,r=t.xPos,p="";this.info_.RTL&&(r=-(r+t.width),t.flipRtl&&(r+=t.width,p="scale(-1 1)")),e.blockRendering.Types.isIcon(t)?(n.setAttribute("display","block"),n.setAttribute("transform","translate("+r+","+o+")"),t.icon.computeIconLocation()):n.setAttribute("transform","translate("+r+","+o+")"+p),this.info_.isInsertionMarker&&n.setAttribute("display","none")},e.blockRendering.Drawer.prototype.drawInlineInput_=function(t){var n=t.width,o=t.height,r=t.connectionOffsetY,p=t.connectionHeight+r;this.inlinePath_+=e.utils.svgPaths.moveTo(t.xPos+t.connectionWidth,t.centerline-o/2)+e.utils.svgPaths.lineOnAxis("v",r)+t.shape.pathDown+e.utils.svgPaths.lineOnAxis("v",o-p)+e.utils.svgPaths.lineOnAxis("h",n-t.connectionWidth)+e.utils.svgPaths.lineOnAxis("v",-o)+"z",this.positionInlineInputConnection_(t)},e.blockRendering.Drawer.prototype.positionInlineInputConnection_=function(t){if(t.connectionModel){var o=t.xPos+t.connectionWidth+t.connectionOffsetX;this.info_.RTL&&(o*=-1),t.connectionModel.setOffsetInBlock(o,t.centerline-t.height/2+t.connectionOffsetY)}},e.blockRendering.Drawer.prototype.positionStatementInputConnection_=function(t){var n=t.getLastInput();if(n.connectionModel){var o=t.xPos+t.statementEdge+n.notchOffset;this.info_.RTL&&(o*=-1),n.connectionModel.setOffsetInBlock(o,t.yPos)}},e.blockRendering.Drawer.prototype.positionExternalValueConnection_=function(t){var n=t.getLastInput();if(n.connectionModel){var o=t.xPos+t.width;this.info_.RTL&&(o*=-1),n.connectionModel.setOffsetInBlock(o,t.yPos)}},e.blockRendering.Drawer.prototype.positionPreviousConnection_=function(){var t=this.info_.topRow;if(t.connection){var n=t.xPos+t.notchOffset;t.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-n:n,0)}},e.blockRendering.Drawer.prototype.positionNextConnection_=function(){var t=this.info_.bottomRow;if(t.connection){var n=t.connection,o=n.xPos;n.connectionModel.setOffsetInBlock(this.info_.RTL?-o:o,t.baseline)}},e.blockRendering.Drawer.prototype.positionOutputConnection_=function(){if(this.info_.outputConnection){var t=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-t:t,this.info_.outputConnection.connectionOffsetY)}},e.Events.MarkerMove=function(t,n,o,r){var p=t?t.workspace.id:void 0;r&&r.getType()==e.ASTNode.types.WORKSPACE&&(p=r.getLocation().id),e.Events.MarkerMove.superClass_.constructor.call(this,p),this.blockId=t?t.id:null,this.oldNode=o,this.newNode=r,this.isCursor=n},e.utils.object.inherits(e.Events.MarkerMove,e.Events.UiBase),e.Events.MarkerMove.prototype.type=e.Events.MARKER_MOVE,e.Events.MarkerMove.prototype.toJson=function(){var t=e.Events.MarkerMove.superClass_.toJson.call(this);return t.isCursor=this.isCursor,t.blockId=this.blockId,t.oldNode=this.oldNode,t.newNode=this.newNode,t},e.Events.MarkerMove.prototype.fromJson=function(t){e.Events.MarkerMove.superClass_.fromJson.call(this,t),this.isCursor=t.isCursor,this.blockId=t.blockId,this.oldNode=t.oldNode,this.newNode=t.newNode},e.registry.register(e.registry.Type.EVENT,e.Events.MARKER_MOVE,e.Events.MarkerMove),e.blockRendering.MarkerSvg=function(t,n,o){this.workspace_=t,this.marker_=o,this.parent_=null,this.constants_=n,this.currentMarkerSvg=null,t=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=o.colour||t},e.blockRendering.MarkerSvg.CURSOR_CLASS="blocklyCursor",e.blockRendering.MarkerSvg.MARKER_CLASS="blocklyMarker",e.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER=.75,e.blockRendering.MarkerSvg.prototype.getSvgRoot=function(){return this.svgGroup_},e.blockRendering.MarkerSvg.prototype.getMarker=function(){return this.marker_},e.blockRendering.MarkerSvg.prototype.isCursor=function(){return"cursor"==this.marker_.type},e.blockRendering.MarkerSvg.prototype.createDom=function(){var t=this.isCursor()?e.blockRendering.MarkerSvg.CURSOR_CLASS:e.blockRendering.MarkerSvg.MARKER_CLASS;return this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:t},null),this.createDomInternal_(),this.svgGroup_},e.blockRendering.MarkerSvg.prototype.setParent_=function(t){this.isCursor()?(this.parent_&&this.parent_.setCursorSvg(null),t.setCursorSvg(this.getSvgRoot())):(this.parent_&&this.parent_.setMarkerSvg(null),t.setMarkerSvg(this.getSvgRoot())),this.parent_=t},e.blockRendering.MarkerSvg.prototype.draw=function(t,n){if(n){this.constants_=this.workspace_.getRenderer().getConstants();var o=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker_.colour||o,this.applyColour_(n),this.showAtLocation_(n),this.fireMarkerEvent_(t,n),void 0!==(t=this.currentMarkerSvg.childNodes[0])&&t.beginElement&&t.beginElement()}else this.hide()},e.blockRendering.MarkerSvg.prototype.showAtLocation_=function(t){var n=t.getLocation().type;t.getType()==e.ASTNode.types.BLOCK?this.showWithBlock_(t):t.getType()==e.ASTNode.types.OUTPUT?this.showWithOutput_(t):n==e.connectionTypes.INPUT_VALUE?this.showWithInput_(t):n==e.connectionTypes.NEXT_STATEMENT?this.showWithNext_(t):t.getType()==e.ASTNode.types.PREVIOUS?this.showWithPrevious_(t):t.getType()==e.ASTNode.types.FIELD?this.showWithField_(t):t.getType()==e.ASTNode.types.WORKSPACE?this.showWithCoordinates_(t):t.getType()==e.ASTNode.types.STACK&&this.showWithStack_(t)},e.blockRendering.MarkerSvg.prototype.showWithBlockPrevOutput_=function(t){var n=(t=t.getSourceBlock()).width,o=t.height,r=o*e.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER,p=this.constants_.CURSOR_BLOCK_PADDING;if(t.previousConnection){var b=this.constants_.shapeFor(t.previousConnection);this.positionPrevious_(n,p,r,b)}else t.outputConnection?(b=this.constants_.shapeFor(t.outputConnection),this.positionOutput_(n,o,b)):this.positionBlock_(n,p,r);this.setParent_(t),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithBlock_=function(t){this.showWithBlockPrevOutput_(t)},e.blockRendering.MarkerSvg.prototype.showWithPrevious_=function(t){this.showWithBlockPrevOutput_(t)},e.blockRendering.MarkerSvg.prototype.showWithOutput_=function(t){this.showWithBlockPrevOutput_(t)},e.blockRendering.MarkerSvg.prototype.showWithCoordinates_=function(t){var n=t.getWsCoordinate();t=n.x,this.workspace_.RTL&&(t-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(t,n=n.y,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace_),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithField_=function(t){var n=(t=t.getLocation()).getSize().width,o=t.getSize().height;this.positionRect_(0,0,n,o),this.setParent_(t),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithInput_=function(t){var n=(t=t.getLocation()).getSourceBlock();this.positionInput_(t),this.setParent_(n),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithNext_=function(t){var n=t.getLocation();t=n.getSourceBlock();var o=0;n=n.getOffsetInBlock().y;var r=t.getHeightWidth().width;this.workspace_.RTL&&(o=-r),this.positionLine_(o,n,r),this.setParent_(t),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithStack_=function(t){var n=(t=t.getLocation()).getHeightWidth(),o=n.width+this.constants_.CURSOR_STACK_PADDING,r=-this.constants_.CURSOR_STACK_PADDING/2,b=r;this.workspace_.RTL&&(b=-(o+r)),this.positionRect_(b,-this.constants_.CURSOR_STACK_PADDING/2,o,n=n.height+this.constants_.CURSOR_STACK_PADDING),this.setParent_(t),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showCurrent_=function(){this.hide(),this.currentMarkerSvg.style.display=""},e.blockRendering.MarkerSvg.prototype.positionBlock_=function(t,n,o){t=e.utils.svgPaths.moveBy(-n,o)+e.utils.svgPaths.lineOnAxis("V",-n)+e.utils.svgPaths.lineOnAxis("H",t+2*n)+e.utils.svgPaths.lineOnAxis("V",o),this.markerBlock_.setAttribute("d",t),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},e.blockRendering.MarkerSvg.prototype.positionInput_=function(t){var n=t.getOffsetInBlock().x,o=t.getOffsetInBlock().y;t=e.utils.svgPaths.moveTo(0,0)+this.constants_.shapeFor(t).pathDown,this.markerInput_.setAttribute("d",t),this.markerInput_.setAttribute("transform","translate("+n+","+o+")"+(this.workspace_.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_},e.blockRendering.MarkerSvg.prototype.positionLine_=function(t,n,o){this.markerSvgLine_.setAttribute("x",t),this.markerSvgLine_.setAttribute("y",n),this.markerSvgLine_.setAttribute("width",o),this.currentMarkerSvg=this.markerSvgLine_},e.blockRendering.MarkerSvg.prototype.positionOutput_=function(t,n,o){t=e.utils.svgPaths.moveBy(t,0)+e.utils.svgPaths.lineOnAxis("h",-(t-o.width))+e.utils.svgPaths.lineOnAxis("v",this.constants_.TAB_OFFSET_FROM_TOP)+o.pathDown+e.utils.svgPaths.lineOnAxis("V",n)+e.utils.svgPaths.lineOnAxis("H",t),this.markerBlock_.setAttribute("d",t),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},e.blockRendering.MarkerSvg.prototype.positionPrevious_=function(t,n,o,r){t=e.utils.svgPaths.moveBy(-n,o)+e.utils.svgPaths.lineOnAxis("V",-n)+e.utils.svgPaths.lineOnAxis("H",this.constants_.NOTCH_OFFSET_LEFT)+r.pathLeft+e.utils.svgPaths.lineOnAxis("H",t+2*n)+e.utils.svgPaths.lineOnAxis("V",o),this.markerBlock_.setAttribute("d",t),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},e.blockRendering.MarkerSvg.prototype.positionRect_=function(t,n,o,r){this.markerSvgRect_.setAttribute("x",t),this.markerSvgRect_.setAttribute("y",n),this.markerSvgRect_.setAttribute("width",o),this.markerSvgRect_.setAttribute("height",r),this.currentMarkerSvg=this.markerSvgRect_},e.blockRendering.MarkerSvg.prototype.flipRtl_=function(t){t.setAttribute("transform","scale(-1 1)")},e.blockRendering.MarkerSvg.prototype.hide=function(){this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"},e.blockRendering.MarkerSvg.prototype.fireMarkerEvent_=function(t,n){var o=n.getSourceBlock();t=new(e.Events.get(e.Events.MARKER_MOVE))(o,this.isCursor(),t,n),e.Events.fire(t)},e.blockRendering.MarkerSvg.prototype.getBlinkProperties_=function(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}},e.blockRendering.MarkerSvg.prototype.createDomInternal_=function(){if(this.markerSvg_=e.utils.dom.createSvgElement(e.utils.Svg.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT,style:"display: none"},this.markerSvg_),this.markerSvgRect_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10,style:"display: none"},this.markerSvg_),this.markerInput_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{transform:"",style:"display: none"},this.markerSvg_),this.markerBlock_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{transform:"",style:"display: none",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var t=this.getBlinkProperties_();e.utils.dom.createSvgElement(e.utils.Svg.ANIMATE,t,this.markerSvgLine_),e.utils.dom.createSvgElement(e.utils.Svg.ANIMATE,t,this.markerInput_),t.attributeName="stroke",e.utils.dom.createSvgElement(e.utils.Svg.ANIMATE,t,this.markerBlock_)}return this.markerSvg_},e.blockRendering.MarkerSvg.prototype.applyColour_=function(t){this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(this.markerSvgLine_.firstChild.setAttribute("values",t=this.colour_+";transparent;transparent;"),this.markerInput_.firstChild.setAttribute("values",t),this.markerBlock_.firstChild.setAttribute("values",t))},e.blockRendering.MarkerSvg.prototype.dispose=function(){this.svgGroup_&&e.utils.dom.removeNode(this.svgGroup_)},e.blockRendering.PathObject=function(t,n,o){this.constants=o,this.svgRoot=t,this.svgPath=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.style=n,this.markerSvg=this.cursorSvg=null},e.blockRendering.PathObject.prototype.setPath=function(t){this.svgPath.setAttribute("d",t)},e.blockRendering.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)")},e.blockRendering.PathObject.prototype.setCursorSvg=function(t){t?(this.svgRoot.appendChild(t),this.cursorSvg=t):this.cursorSvg=null},e.blockRendering.PathObject.prototype.setMarkerSvg=function(t){t?(this.cursorSvg?this.svgRoot.insertBefore(t,this.cursorSvg):this.svgRoot.appendChild(t),this.markerSvg=t):this.markerSvg=null},e.blockRendering.PathObject.prototype.applyColour=function(t){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(t.isShadow()),this.updateDisabled_(!t.isEnabled()||t.getInheritedDisabled())},e.blockRendering.PathObject.prototype.setStyle=function(t){this.style=t},e.blockRendering.PathObject.prototype.setClass_=function(t,n){n?e.utils.dom.addClass(this.svgRoot,t):e.utils.dom.removeClass(this.svgRoot,t)},e.blockRendering.PathObject.prototype.updateHighlighted=function(t){this.svgPath.setAttribute("filter",t?"url(#"+this.constants.embossFilterId+")":"none")},e.blockRendering.PathObject.prototype.updateShadow_=function(t){t&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},e.blockRendering.PathObject.prototype.updateDisabled_=function(t){this.setClass_("blocklyDisabled",t),t&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")},e.blockRendering.PathObject.prototype.updateSelected=function(t){this.setClass_("blocklySelected",t)},e.blockRendering.PathObject.prototype.updateDraggingDelete=function(t){this.setClass_("blocklyDraggingDelete",t)},e.blockRendering.PathObject.prototype.updateInsertionMarker=function(t){this.setClass_("blocklyInsertionMarker",t)},e.blockRendering.PathObject.prototype.updateMovable=function(t){this.setClass_("blocklyDraggable",t)},e.blockRendering.PathObject.prototype.updateReplacementFade=function(t){this.setClass_("blocklyReplaceable",t)},e.blockRendering.PathObject.prototype.updateShapeForInputHighlight=function(t,n){},e.blockRendering.Renderer=function(t){this.name=t,this.overrides=this.constants_=null},e.blockRendering.Renderer.prototype.getClassName=function(){return this.name+"-renderer"},e.blockRendering.Renderer.prototype.init=function(t,n){this.constants_=this.makeConstants_(),n&&(this.overrides=n,e.utils.object.mixin(this.constants_,n)),this.constants_.setTheme(t),this.constants_.init()},e.blockRendering.Renderer.prototype.createDom=function(t,n){this.constants_.createDom(t,this.name+"-"+n.name,"."+this.getClassName()+"."+n.getClassName())},e.blockRendering.Renderer.prototype.refreshDom=function(t,n){var o=this.getConstants();o.dispose(),this.constants_=this.makeConstants_(),this.overrides&&e.utils.object.mixin(this.constants_,this.overrides),this.constants_.randomIdentifier=o.randomIdentifier,this.constants_.setTheme(n),this.constants_.init(),this.createDom(t,n)},e.blockRendering.Renderer.prototype.dispose=function(){this.constants_&&this.constants_.dispose()},e.blockRendering.Renderer.prototype.makeConstants_=function(){return new e.blockRendering.ConstantProvider},e.blockRendering.Renderer.prototype.makeRenderInfo_=function(t){return new e.blockRendering.RenderInfo(this,t)},e.blockRendering.Renderer.prototype.makeDrawer_=function(t,n){return new e.blockRendering.Drawer(t,n)},e.blockRendering.Renderer.prototype.makeDebugger_=function(){if(!e.blockRendering.Debug)throw Error("Missing require for Blockly.blockRendering.Debug");return new e.blockRendering.Debug(this.getConstants())},e.blockRendering.Renderer.prototype.makeMarkerDrawer=function(t,n){return new e.blockRendering.MarkerSvg(t,this.getConstants(),n)},e.blockRendering.Renderer.prototype.makePathObject=function(t,n){return new e.blockRendering.PathObject(t,n,this.constants_)},e.blockRendering.Renderer.prototype.getConstants=function(){return this.constants_},e.blockRendering.Renderer.prototype.shouldHighlightConnection=function(t){return!0},e.blockRendering.Renderer.prototype.orphanCanConnectAtEnd=function(t,n,o){return!!e.Connection.getConnectionForOrphanedConnection(t,o===e.connectionTypes.OUTPUT_VALUE?n.outputConnection:n.previousConnection)},e.blockRendering.Renderer.prototype.getConnectionPreviewMethod=function(t,n,o){return n.type==e.connectionTypes.OUTPUT_VALUE||n.type==e.connectionTypes.PREVIOUS_STATEMENT?!t.isConnected()||this.orphanCanConnectAtEnd(o,t.targetBlock(),n.type)?e.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:e.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:e.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER},e.blockRendering.Renderer.prototype.render=function(t){e.blockRendering.useDebugger&&!t.renderingDebugger&&(t.renderingDebugger=this.makeDebugger_());var n=this.makeRenderInfo_(t);n.measure(),this.makeDrawer_(t,n).draw()},e.geras={},e.geras.ConstantProvider=function(){e.geras.ConstantProvider.superClass_.constructor.call(this),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2},e.utils.object.inherits(e.geras.ConstantProvider,e.blockRendering.ConstantProvider),e.geras.ConstantProvider.prototype.getCSS_=function(t){return e.geras.ConstantProvider.superClass_.getCSS_.call(this,t).concat([t+" .blocklyInsertionMarker>.blocklyPathLight,",t+" .blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"])},e.geras.Highlighter=function(t){this.info_=t,this.inlineSteps_=this.steps_="",this.RTL_=this.info_.RTL,t=t.getRenderer(),this.constants_=t.getConstants(),this.highlightConstants_=t.getHighlightConstants(),this.highlightOffset_=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH},e.geras.Highlighter.prototype.getPath=function(){return this.steps_+"\n"+this.inlineSteps_},e.geras.Highlighter.prototype.drawTopCorner=function(t){this.steps_+=e.utils.svgPaths.moveBy(t.xPos,this.info_.startY);for(var o,n=0;o=t.elements[n];n++)e.blockRendering.Types.isLeftSquareCorner(o)?this.steps_+=this.highlightConstants_.START_POINT:e.blockRendering.Types.isLeftRoundedCorner(o)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):e.blockRendering.Types.isPreviousConnection(o)?this.steps_+=this.notchPaths_.pathLeft:e.blockRendering.Types.isHat(o)?this.steps_+=this.startPaths_.path(this.RTL_):e.blockRendering.Types.isSpacer(o)&&0!=o.width&&(this.steps_+=e.utils.svgPaths.lineOnAxis("H",o.xPos+o.width-this.highlightOffset_));this.steps_+=e.utils.svgPaths.lineOnAxis("H",t.xPos+t.width-this.highlightOffset_)},e.geras.Highlighter.prototype.drawJaggedEdge_=function(t){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+e.utils.svgPaths.lineOnAxis("v",t.height-this.jaggedTeethPaths_.height-this.highlightOffset_))},e.geras.Highlighter.prototype.drawValueInput=function(t){var n=t.getLastInput();if(this.RTL_){var o=t.height-n.connectionHeight;this.steps_+=e.utils.svgPaths.moveTo(n.xPos+n.width-this.highlightOffset_,t.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+e.utils.svgPaths.lineOnAxis("v",o)}else this.steps_+=e.utils.svgPaths.moveTo(n.xPos+n.width,t.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)},e.geras.Highlighter.prototype.drawStatementInput=function(t){var n=t.getLastInput();if(this.RTL_){var o=t.height-2*this.insideCornerPaths_.height;this.steps_+=e.utils.svgPaths.moveTo(n.xPos,t.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+e.utils.svgPaths.lineOnAxis("v",o)+this.insideCornerPaths_.pathBottom(this.RTL_)+e.utils.svgPaths.lineTo(t.width-n.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=e.utils.svgPaths.moveTo(n.xPos,t.yPos+t.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+e.utils.svgPaths.lineTo(t.width-n.xPos-this.insideCornerPaths_.width,0)},e.geras.Highlighter.prototype.drawRightSideRow=function(t){var n=t.xPos+t.width-this.highlightOffset_;t.followsStatement&&(this.steps_+=e.utils.svgPaths.lineOnAxis("H",n)),this.RTL_&&(this.steps_+=e.utils.svgPaths.lineOnAxis("H",n),t.height>this.highlightOffset_&&(this.steps_+=e.utils.svgPaths.lineOnAxis("V",t.yPos+t.height-this.highlightOffset_)))},e.geras.Highlighter.prototype.drawBottomRow=function(t){if(this.RTL_)this.steps_+=e.utils.svgPaths.lineOnAxis("V",t.baseline-this.highlightOffset_);else{var n=this.info_.bottomRow.elements[0];e.blockRendering.Types.isLeftSquareCorner(n)?this.steps_+=e.utils.svgPaths.moveTo(t.xPos+this.highlightOffset_,t.baseline-this.highlightOffset_):e.blockRendering.Types.isLeftRoundedCorner(n)&&(this.steps_+=e.utils.svgPaths.moveTo(t.xPos,t.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}},e.geras.Highlighter.prototype.drawLeft=function(){var t=this.info_.outputConnection;t&&(t=t.connectionOffsetY+t.height,this.RTL_?this.steps_+=e.utils.svgPaths.moveTo(this.info_.startX,t):(this.steps_+=e.utils.svgPaths.moveTo(this.info_.startX+this.highlightOffset_,this.info_.bottomRow.baseline-this.highlightOffset_),this.steps_+=e.utils.svgPaths.lineOnAxis("V",t)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(e.blockRendering.Types.isLeftRoundedCorner((t=this.info_.topRow).elements[0])?this.steps_+=e.utils.svgPaths.lineOnAxis("V",this.outsideCornerPaths_.height):this.steps_+=e.utils.svgPaths.lineOnAxis("V",t.capline+this.highlightOffset_))},e.geras.Highlighter.prototype.drawInlineInput=function(t){var n=this.highlightOffset_,o=t.xPos+t.connectionWidth,r=t.centerline-t.height/2,p=t.width-t.connectionWidth,b=r+n;this.RTL_?(r=t.connectionOffsetY-n,t=t.height-(t.connectionOffsetY+t.connectionHeight)+n,this.inlineSteps_+=e.utils.svgPaths.moveTo(o-n,b)+e.utils.svgPaths.lineOnAxis("v",r)+this.puzzleTabPaths_.pathDown(this.RTL_)+e.utils.svgPaths.lineOnAxis("v",t)+e.utils.svgPaths.lineOnAxis("h",p)):this.inlineSteps_+=e.utils.svgPaths.moveTo(t.xPos+t.width+n,b)+e.utils.svgPaths.lineOnAxis("v",t.height)+e.utils.svgPaths.lineOnAxis("h",-p)+e.utils.svgPaths.moveTo(o,r+t.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)},e.geras.InlineInput=function(t,n){e.geras.InlineInput.superClass_.constructor.call(this,t,n),this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)},e.utils.object.inherits(e.geras.InlineInput,e.blockRendering.InlineInput),e.geras.StatementInput=function(t,n){e.geras.StatementInput.superClass_.constructor.call(this,t,n),this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)},e.utils.object.inherits(e.geras.StatementInput,e.blockRendering.StatementInput),e.geras.RenderInfo=function(t,n){e.geras.RenderInfo.superClass_.constructor.call(this,t,n)},e.utils.object.inherits(e.geras.RenderInfo,e.blockRendering.RenderInfo),e.geras.RenderInfo.prototype.getRenderer=function(){return this.renderer_},e.geras.RenderInfo.prototype.populateBottomRow_=function(){e.geras.RenderInfo.superClass_.populateBottomRow_.call(this),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==e.inputTypes.STATEMENT||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)},e.geras.RenderInfo.prototype.addInput_=function(t,n){this.isInline&&t.type==e.inputTypes.VALUE?(n.elements.push(new e.geras.InlineInput(this.constants_,t)),n.hasInlineInput=!0):t.type==e.inputTypes.STATEMENT?(n.elements.push(new e.geras.StatementInput(this.constants_,t)),n.hasStatement=!0):t.type==e.inputTypes.VALUE?(n.elements.push(new e.blockRendering.ExternalValueInput(this.constants_,t)),n.hasExternalInput=!0):t.type==e.inputTypes.DUMMY&&(n.minHeight=Math.max(n.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),n.hasDummyInput=!0),this.isInline||null!=n.align||(n.align=t.align)},e.geras.RenderInfo.prototype.addElemSpacing_=function(){for(var o,t=!1,n=0;o=this.rows[n];n++)o.hasExternalInput&&(t=!0);for(n=0;o=this.rows[n];n++){var r=o.elements;if(o.elements=[],o.startsWithElemSpacer()&&o.elements.push(new e.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,r[0]))),r.length){for(var p=0;p<r.length-1;p++){o.elements.push(r[p]);var b=this.getInRowSpacing_(r[p],r[p+1]);o.elements.push(new e.blockRendering.InRowSpacer(this.constants_,b))}o.elements.push(r[r.length-1]),o.endsWithElemSpacer()&&(b=this.getInRowSpacing_(r[r.length-1],null),t&&o.hasDummyInput&&(b+=this.constants_.TAB_WIDTH),o.elements.push(new e.blockRendering.InRowSpacer(this.constants_,b)))}}},e.geras.RenderInfo.prototype.getInRowSpacing_=function(t,n){if(!t)return n&&e.blockRendering.Types.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:n&&e.blockRendering.Types.isInlineInput(n)?this.constants_.MEDIUM_LARGE_PADDING:n&&e.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!e.blockRendering.Types.isInput(t)&&(!n||e.blockRendering.Types.isStatementInput(n)))return e.blockRendering.Types.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:e.blockRendering.Types.isIcon(t)?2*this.constants_.LARGE_PADDING+1:e.blockRendering.Types.isHat(t)?this.constants_.NO_PADDING:e.blockRendering.Types.isPreviousOrNextConnection(t)?this.constants_.LARGE_PADDING:e.blockRendering.Types.isLeftRoundedCorner(t)?this.constants_.MIN_BLOCK_WIDTH:e.blockRendering.Types.isJaggedEdge(t)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isInput(t)&&!n){if(e.blockRendering.Types.isExternalInput(t))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isInlineInput(t))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(t))return this.constants_.NO_PADDING}if(!e.blockRendering.Types.isInput(t)&&n&&e.blockRendering.Types.isInput(n)){if(e.blockRendering.Types.isField(t)&&t.isEditable){if(e.blockRendering.Types.isInlineInput(n)||e.blockRendering.Types.isExternalInput(n))return this.constants_.SMALL_PADDING}else{if(e.blockRendering.Types.isInlineInput(n)||e.blockRendering.Types.isExternalInput(n))return this.constants_.MEDIUM_LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(n))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(e.blockRendering.Types.isIcon(t)&&n&&!e.blockRendering.Types.isInput(n))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isInlineInput(t)&&n&&e.blockRendering.Types.isField(n))return n.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isLeftSquareCorner(t)&&n){if(e.blockRendering.Types.isHat(n))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isPreviousConnection(n))return n.notchOffset;if(e.blockRendering.Types.isNextConnection(n))return n.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(e.blockRendering.Types.isLeftRoundedCorner(t)&&n){if(e.blockRendering.Types.isPreviousConnection(n))return n.notchOffset-this.constants_.CORNER_RADIUS;if(e.blockRendering.Types.isNextConnection(n))return n.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return e.blockRendering.Types.isField(t)&&n&&e.blockRendering.Types.isField(n)&&t.isEditable==n.isEditable||n&&e.blockRendering.Types.isJaggedEdge(n)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},e.geras.RenderInfo.prototype.getSpacerRowHeight_=function(t,n){return e.blockRendering.Types.isTopRow(t)&&e.blockRendering.Types.isBottomRow(n)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:e.blockRendering.Types.isTopRow(t)||e.blockRendering.Types.isBottomRow(n)?this.constants_.NO_PADDING:t.hasExternalInput&&n.hasExternalInput?this.constants_.LARGE_PADDING:!t.hasStatement&&n.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:t.hasStatement&&n.hasStatement||!t.hasStatement&&n.hasDummyInput||t.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},e.geras.RenderInfo.prototype.getElemCenterline_=function(t,n){if(e.blockRendering.Types.isSpacer(n))return t.yPos+n.height/2;if(e.blockRendering.Types.isBottomRow(t))return t=t.yPos+t.height-t.descenderHeight,e.blockRendering.Types.isNextConnection(n)?t+n.height/2:t-n.height/2;if(e.blockRendering.Types.isTopRow(t))return e.blockRendering.Types.isHat(n)?t.capline-n.height/2:t.capline+n.height/2;var o=t.yPos;return e.blockRendering.Types.isField(n)||e.blockRendering.Types.isIcon(n)?(o+=n.height/2,(t.hasInlineInput||t.hasStatement)&&n.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=t.height&&(o+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):o=e.blockRendering.Types.isInlineInput(n)?o+n.height/2:o+t.height/2,o},e.geras.RenderInfo.prototype.alignRowElements_=function(){if(this.isInline){for(var r,t=0,n=null,o=this.rows.length-1;r=this.rows[o];o--)r.nextRightEdge=t,e.blockRendering.Types.isInputRow(r)&&(r.hasStatement&&this.alignStatementRow_(r),n&&n.hasStatement&&r.width<n.width?r.nextRightEdge=n.width:t=r.width,n=r);for(o=t=0;r=this.rows[o];o++)r.hasStatement?t=this.getDesiredRowWidth_(r):e.blockRendering.Types.isSpacer(r)?r.width=Math.max(t,r.nextRightEdge):(0<(t=Math.max(t,r.nextRightEdge)-r.width)&&this.addAlignmentPadding_(r,t),t=r.width)}else e.geras.RenderInfo.superClass_.alignRowElements_.call(this)},e.geras.RenderInfo.prototype.getDesiredRowWidth_=function(t){return this.isInline&&t.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:e.geras.RenderInfo.superClass_.getDesiredRowWidth_.call(this,t)},e.geras.RenderInfo.prototype.finalize_=function(){for(var r,t=0,n=0,o=0;r=this.rows[o];o++){r.yPos=n,r.xPos=this.startX,n+=r.height,t=Math.max(t,r.widthWithConnectedBlocks);var p=n-this.topRow.ascenderHeight;r==this.bottomRow&&p<this.constants_.MIN_BLOCK_HEIGHT&&(this.bottomRow.height+=p=this.constants_.MIN_BLOCK_HEIGHT-p,n+=p),this.recordElemPositions_(r)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(t=Math.max(t,this.block_.nextConnection.targetBlock().getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=n-this.bottomRow.descenderHeight,this.widthWithChildren=t+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=n+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline},e.geras.Drawer=function(t,n){e.geras.Drawer.superClass_.constructor.call(this,t,n),this.highlighter_=new e.geras.Highlighter(n)},e.utils.object.inherits(e.geras.Drawer,e.blockRendering.Drawer),e.geras.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_();var t=this.block_.pathObject;t.setPath(this.outlinePath_+"\n"+this.inlinePath_),t.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&t.flipRTL(),e.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},e.geras.Drawer.prototype.drawTop_=function(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),e.geras.Drawer.superClass_.drawTop_.call(this)},e.geras.Drawer.prototype.drawJaggedEdge_=function(t){this.highlighter_.drawJaggedEdge_(t),e.geras.Drawer.superClass_.drawJaggedEdge_.call(this,t)},e.geras.Drawer.prototype.drawValueInput_=function(t){this.highlighter_.drawValueInput(t),e.geras.Drawer.superClass_.drawValueInput_.call(this,t)},e.geras.Drawer.prototype.drawStatementInput_=function(t){this.highlighter_.drawStatementInput(t),e.geras.Drawer.superClass_.drawStatementInput_.call(this,t)},e.geras.Drawer.prototype.drawRightSideRow_=function(t){this.highlighter_.drawRightSideRow(t),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("H",t.xPos+t.width)+e.utils.svgPaths.lineOnAxis("V",t.yPos+t.height)},e.geras.Drawer.prototype.drawBottom_=function(){this.highlighter_.drawBottomRow(this.info_.bottomRow),e.geras.Drawer.superClass_.drawBottom_.call(this)},e.geras.Drawer.prototype.drawLeft_=function(){this.highlighter_.drawLeft(),e.geras.Drawer.superClass_.drawLeft_.call(this)},e.geras.Drawer.prototype.drawInlineInput_=function(t){this.highlighter_.drawInlineInput(t),e.geras.Drawer.superClass_.drawInlineInput_.call(this,t)},e.geras.Drawer.prototype.positionInlineInputConnection_=function(t){if(t.connectionModel){var o=t.xPos+t.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(o*=-1),t.connectionModel.setOffsetInBlock(o,t.centerline-t.height/2+t.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}},e.geras.Drawer.prototype.positionStatementInputConnection_=function(t){var n=t.getLastInput();if(n.connectionModel){var o=t.xPos+t.statementEdge+n.notchOffset;n.connectionModel.setOffsetInBlock(o=this.info_.RTL?-1*o:o+this.constants_.DARK_PATH_OFFSET,t.yPos+this.constants_.DARK_PATH_OFFSET)}},e.geras.Drawer.prototype.positionExternalValueConnection_=function(t){var n=t.getLastInput();if(n.connectionModel){var o=t.xPos+t.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(o*=-1),n.connectionModel.setOffsetInBlock(o,t.yPos)}},e.geras.Drawer.prototype.positionNextConnection_=function(){var t=this.info_.bottomRow;if(t.connection){var n=t.connection,o=n.xPos;n.connectionModel.setOffsetInBlock((this.info_.RTL?-o:o)+this.constants_.DARK_PATH_OFFSET/2,t.baseline+this.constants_.DARK_PATH_OFFSET)}},e.geras.HighlightConstantProvider=function(t){this.constantProvider=t,this.OFFSET=.5,this.START_POINT=e.utils.svgPaths.moveBy(this.OFFSET,this.OFFSET)},e.geras.HighlightConstantProvider.prototype.init=function(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()},e.geras.HighlightConstantProvider.prototype.makeInsideCorner=function(){var t=this.constantProvider.CORNER_RADIUS,n=this.OFFSET,o=(1-Math.SQRT1_2)*(t+n)-n,r=e.utils.svgPaths.moveBy(o,o)+e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(-o-n,t-o)),p=e.utils.svgPaths.arc("a","0 0,0",t+n,e.utils.svgPaths.point(t+n,t+n)),b=e.utils.svgPaths.moveBy(o,-o)+e.utils.svgPaths.arc("a","0 0,0",t+n,e.utils.svgPaths.point(t-o,o+n));return{width:t+n,height:t,pathTop:function(I){return I?r:""},pathBottom:function(I){return I?p:b}}},e.geras.HighlightConstantProvider.prototype.makeOutsideCorner=function(){var t=this.constantProvider.CORNER_RADIUS,n=this.OFFSET,o=(1-Math.SQRT1_2)*(t-n)+n,r=e.utils.svgPaths.moveBy(o,o)+e.utils.svgPaths.arc("a","0 0,1",t-n,e.utils.svgPaths.point(t-o,-o+n)),p=e.utils.svgPaths.moveBy(n,t)+e.utils.svgPaths.arc("a","0 0,1",t-n,e.utils.svgPaths.point(t,-t+n)),b=-o,I=e.utils.svgPaths.moveBy(o,b)+e.utils.svgPaths.arc("a","0 0,1",t-n,e.utils.svgPaths.point(-o+n,-b-t));return{height:t,topLeft:function(x){return x?r:p},bottomLeft:function(){return I}}},e.geras.HighlightConstantProvider.prototype.makePuzzleTab=function(){var t=this.constantProvider.TAB_WIDTH,n=this.constantProvider.TAB_HEIGHT,o=e.utils.svgPaths.moveBy(-2,3.4-n)+e.utils.svgPaths.lineTo(-.45*t,-2.1),r=e.utils.svgPaths.lineOnAxis("v",2.5)+e.utils.svgPaths.moveBy(.97*-t,2.5)+e.utils.svgPaths.curve("q",[e.utils.svgPaths.point(.05*-t,10),e.utils.svgPaths.point(.3*t,9.5)])+e.utils.svgPaths.moveBy(.67*t,-1.9)+e.utils.svgPaths.lineOnAxis("v",2.5),p=e.utils.svgPaths.lineOnAxis("v",-1.5)+e.utils.svgPaths.moveBy(-.92*t,-.5)+e.utils.svgPaths.curve("q",[e.utils.svgPaths.point(-.19*t,-5.5),e.utils.svgPaths.point(0,-11)])+e.utils.svgPaths.moveBy(.92*t,1),b=e.utils.svgPaths.moveBy(-5,n-.7)+e.utils.svgPaths.lineTo(.46*t,-2.1);return{width:t,height:n,pathUp:function(I){return I?o:p},pathDown:function(I){return I?r:b}}},e.geras.HighlightConstantProvider.prototype.makeNotch=function(){return{pathLeft:e.utils.svgPaths.lineOnAxis("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}},e.geras.HighlightConstantProvider.prototype.makeJaggedTeeth=function(){return{pathLeft:e.utils.svgPaths.lineTo(5.1,2.6)+e.utils.svgPaths.moveBy(-10.2,6.8)+e.utils.svgPaths.lineTo(5.1,2.6),height:12,width:10.2}},e.geras.HighlightConstantProvider.prototype.makeStartHat=function(){var t=this.constantProvider.START_HAT.height,n=e.utils.svgPaths.moveBy(25,-8.7)+e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(29.7,-6.2),e.utils.svgPaths.point(57.2,-.5),e.utils.svgPaths.point(75,8.7)]),o=e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(17.8,-9.2),e.utils.svgPaths.point(45.3,-14.9),e.utils.svgPaths.point(75,-8.7)])+e.utils.svgPaths.moveTo(100.5,t+.5);return{path:function(r){return r?n:o}}},e.geras.PathObject=function(t,n,o){this.constants=o,this.svgRoot=t,this.svgPathDark=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"},this.svgRoot),this.svgPath=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.svgPathLight=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyPathLight"},this.svgRoot),this.colourDark="#000000",this.style=n},e.utils.object.inherits(e.geras.PathObject,e.blockRendering.PathObject),e.geras.PathObject.prototype.setPath=function(t){this.svgPath.setAttribute("d",t),this.svgPathDark.setAttribute("d",t)},e.geras.PathObject.prototype.setHighlightPath=function(t){this.svgPathLight.setAttribute("d",t)},e.geras.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")},e.geras.PathObject.prototype.applyColour=function(t){this.svgPathLight.style.display="",this.svgPathDark.style.display="",this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),e.geras.PathObject.superClass_.applyColour.call(this,t),this.svgPath.setAttribute("stroke","none")},e.geras.PathObject.prototype.setStyle=function(t){this.style=t,this.colourDark=e.utils.colour.blend("#000",this.style.colourPrimary,.2)||this.colourDark},e.geras.PathObject.prototype.updateHighlighted=function(t){t?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")},e.geras.PathObject.prototype.updateShadow_=function(t){t&&(this.svgPathLight.style.display="none",this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},e.geras.PathObject.prototype.updateDisabled_=function(t){e.geras.PathObject.superClass_.updateDisabled_.call(this,t),t&&this.svgPath.setAttribute("stroke","none")},e.geras.Renderer=function(t){e.geras.Renderer.superClass_.constructor.call(this,t),this.highlightConstants_=null},e.utils.object.inherits(e.geras.Renderer,e.blockRendering.Renderer),e.geras.Renderer.prototype.init=function(t,n){e.geras.Renderer.superClass_.init.call(this,t,n),this.highlightConstants_=this.makeHighlightConstants_(),this.highlightConstants_.init()},e.geras.Renderer.prototype.refreshDom=function(t,n){e.geras.Renderer.superClass_.refreshDom.call(this,t,n),this.getHighlightConstants().init()},e.geras.Renderer.prototype.makeConstants_=function(){return new e.geras.ConstantProvider},e.geras.Renderer.prototype.makeRenderInfo_=function(t){return new e.geras.RenderInfo(this,t)},e.geras.Renderer.prototype.makeDrawer_=function(t,n){return new e.geras.Drawer(t,n)},e.geras.Renderer.prototype.makePathObject=function(t,n){return new e.geras.PathObject(t,n,this.getConstants())},e.geras.Renderer.prototype.makeHighlightConstants_=function(){return new e.geras.HighlightConstantProvider(this.getConstants())},e.geras.Renderer.prototype.getHighlightConstants=function(){return this.highlightConstants_},e.blockRendering.register("geras",e.geras.Renderer),e.thrasos={},e.thrasos.RenderInfo=function(t,n){e.thrasos.RenderInfo.superClass_.constructor.call(this,t,n)},e.utils.object.inherits(e.thrasos.RenderInfo,e.blockRendering.RenderInfo),e.thrasos.RenderInfo.prototype.getRenderer=function(){return this.renderer_},e.thrasos.RenderInfo.prototype.addElemSpacing_=function(){for(var o,t=!1,n=0;o=this.rows[n];n++)o.hasExternalInput&&(t=!0);for(n=0;o=this.rows[n];n++){var r=o.elements;o.elements=[],o.startsWithElemSpacer()&&o.elements.push(new e.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,r[0])));for(var p=0;p<r.length-1;p++){o.elements.push(r[p]);var b=this.getInRowSpacing_(r[p],r[p+1]);o.elements.push(new e.blockRendering.InRowSpacer(this.constants_,b))}o.elements.push(r[r.length-1]),o.endsWithElemSpacer()&&(b=this.getInRowSpacing_(r[r.length-1],null),t&&o.hasDummyInput&&(b+=this.constants_.TAB_WIDTH),o.elements.push(new e.blockRendering.InRowSpacer(this.constants_,b)))}},e.thrasos.RenderInfo.prototype.getInRowSpacing_=function(t,n){if(!t)return n&&e.blockRendering.Types.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:n&&e.blockRendering.Types.isInlineInput(n)?this.constants_.MEDIUM_LARGE_PADDING:n&&e.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!e.blockRendering.Types.isInput(t)&&!n)return e.blockRendering.Types.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:e.blockRendering.Types.isIcon(t)?2*this.constants_.LARGE_PADDING+1:e.blockRendering.Types.isHat(t)?this.constants_.NO_PADDING:e.blockRendering.Types.isPreviousOrNextConnection(t)?this.constants_.LARGE_PADDING:e.blockRendering.Types.isLeftRoundedCorner(t)?this.constants_.MIN_BLOCK_WIDTH:e.blockRendering.Types.isJaggedEdge(t)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isInput(t)&&!n){if(e.blockRendering.Types.isExternalInput(t))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isInlineInput(t))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(t))return this.constants_.NO_PADDING}if(!e.blockRendering.Types.isInput(t)&&n&&e.blockRendering.Types.isInput(n)){if(e.blockRendering.Types.isField(t)&&t.isEditable){if(e.blockRendering.Types.isInlineInput(n)||e.blockRendering.Types.isExternalInput(n))return this.constants_.SMALL_PADDING}else{if(e.blockRendering.Types.isInlineInput(n)||e.blockRendering.Types.isExternalInput(n))return this.constants_.MEDIUM_LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(n))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(e.blockRendering.Types.isIcon(t)&&n&&!e.blockRendering.Types.isInput(n))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isInlineInput(t)&&n&&e.blockRendering.Types.isField(n))return n.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isLeftSquareCorner(t)&&n){if(e.blockRendering.Types.isHat(n))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isPreviousConnection(n)||e.blockRendering.Types.isNextConnection(n))return n.notchOffset}return e.blockRendering.Types.isLeftRoundedCorner(t)&&n?n.notchOffset-this.constants_.CORNER_RADIUS:e.blockRendering.Types.isField(t)&&n&&e.blockRendering.Types.isField(n)&&t.isEditable==n.isEditable||n&&e.blockRendering.Types.isJaggedEdge(n)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},e.thrasos.RenderInfo.prototype.getSpacerRowHeight_=function(t,n){return e.blockRendering.Types.isTopRow(t)&&e.blockRendering.Types.isBottomRow(n)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:e.blockRendering.Types.isTopRow(t)||e.blockRendering.Types.isBottomRow(n)?this.constants_.NO_PADDING:t.hasExternalInput&&n.hasExternalInput?this.constants_.LARGE_PADDING:!t.hasStatement&&n.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:t.hasStatement&&n.hasStatement||t.hasDummyInput||n.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},e.thrasos.RenderInfo.prototype.getElemCenterline_=function(t,n){if(e.blockRendering.Types.isSpacer(n))return t.yPos+n.height/2;if(e.blockRendering.Types.isBottomRow(t))return t=t.yPos+t.height-t.descenderHeight,e.blockRendering.Types.isNextConnection(n)?t+n.height/2:t-n.height/2;if(e.blockRendering.Types.isTopRow(t))return e.blockRendering.Types.isHat(n)?t.capline-n.height/2:t.capline+n.height/2;var o=t.yPos;return e.blockRendering.Types.isField(n)&&t.hasStatement?o+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+n.height/2):o+t.height/2},e.thrasos.RenderInfo.prototype.finalize_=function(){for(var r,t=0,n=0,o=0;r=this.rows[o];o++){r.yPos=n,r.xPos=this.startX,n+=r.height,t=Math.max(t,r.widthWithConnectedBlocks);var p=n-this.topRow.ascenderHeight;r==this.bottomRow&&p<this.constants_.MIN_BLOCK_HEIGHT&&(this.bottomRow.height+=p=this.constants_.MIN_BLOCK_HEIGHT-p,n+=p),this.recordElemPositions_(r)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(t=Math.max(t,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.bottomRow.baseline=n-this.bottomRow.descenderHeight,this.widthWithChildren=t+this.startX,this.height=n,this.startY=this.topRow.capline},e.thrasos.Renderer=function(t){e.thrasos.Renderer.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.thrasos.Renderer,e.blockRendering.Renderer),e.thrasos.Renderer.prototype.makeRenderInfo_=function(t){return new e.thrasos.RenderInfo(this,t)},e.blockRendering.register("thrasos",e.thrasos.Renderer),e.zelos={},e.zelos.ConstantProvider=function(){e.zelos.ConstantProvider.superClass_.constructor.call(this),this.SMALL_PADDING=this.GRID_UNIT=4,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TAB_OFFSET_FROM_TOP=0,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!0,this.FIELD_COLOUR_DEFAULT_WIDTH=2*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=4*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter_=null,this.replacementGlowFilterId="",this.replacementGlowFilter_=null},e.utils.object.inherits(e.zelos.ConstantProvider,e.blockRendering.ConstantProvider),e.zelos.ConstantProvider.prototype.setFontConstants_=function(t){e.zelos.ConstantProvider.superClass_.setFontConstants_.call(this,t),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING},e.zelos.ConstantProvider.prototype.init=function(){e.zelos.ConstantProvider.superClass_.init.call(this),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth},e.zelos.ConstantProvider.prototype.setDynamicProperties_=function(t){e.zelos.ConstantProvider.superClass_.setDynamicProperties_.call(this,t),this.SELECTED_GLOW_COLOUR=t.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;var n=Number(t.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=n&&!isNaN(n)?n:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=t.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(t=Number(t.getComponentStyle("replacementGlowSize")))&&!isNaN(t)?t:this.REPLACEMENT_GLOW_SIZE},e.zelos.ConstantProvider.prototype.dispose=function(){e.zelos.ConstantProvider.superClass_.dispose.call(this),this.selectedGlowFilter_&&e.utils.dom.removeNode(this.selectedGlowFilter_),this.replacementGlowFilter_&&e.utils.dom.removeNode(this.replacementGlowFilter_)},e.zelos.ConstantProvider.prototype.makeStartHat=function(){var t=this.START_HAT_HEIGHT,n=this.START_HAT_WIDTH;return{height:t,width:n,path:e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(25,-t),e.utils.svgPaths.point(71,-t),e.utils.svgPaths.point(n,0)])}},e.zelos.ConstantProvider.prototype.makeHexagonal=function(){function t(o,r,p){var b=o/2;return e.utils.svgPaths.lineTo(-(p=p?-1:1)*(b=b>n?n:b),o=(r?-1:1)*o/2)+e.utils.svgPaths.lineTo(p*b,o)}var n=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width:function(o){return(o/=2)>n?n:o},height:function(o){return o},connectionOffsetY:function(o){return o/2},connectionOffsetX:function(o){return-o},pathDown:function(o){return t(o,!1,!1)},pathUp:function(o){return t(o,!0,!1)},pathRightDown:function(o){return t(o,!1,!0)},pathRightUp:function(o){return t(o,!1,!0)}}},e.zelos.ConstantProvider.prototype.makeRounded=function(){function t(r,p,b){var I=r>o?r-o:0;return e.utils.svgPaths.arc("a","0 0,1",r=(r>o?o:r)/2,e.utils.svgPaths.point((p?-1:1)*r,(p?-1:1)*r))+e.utils.svgPaths.lineOnAxis("v",(b?1:-1)*I)+e.utils.svgPaths.arc("a","0 0,1",r,e.utils.svgPaths.point((p?1:-1)*r,(p?-1:1)*r))}var n=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,o=2*n;return{type:this.SHAPES.ROUND,isDynamic:!0,width:function(r){return(r/=2)>n?n:r},height:function(r){return r},connectionOffsetY:function(r){return r/2},connectionOffsetX:function(r){return-r},pathDown:function(r){return t(r,!1,!1)},pathUp:function(r){return t(r,!0,!1)},pathRightDown:function(r){return t(r,!1,!0)},pathRightUp:function(r){return t(r,!1,!0)}}},e.zelos.ConstantProvider.prototype.makeSquared=function(){function t(o,r,p){return o-=2*n,e.utils.svgPaths.arc("a","0 0,1",n,e.utils.svgPaths.point((r?-1:1)*n,(r?-1:1)*n))+e.utils.svgPaths.lineOnAxis("v",(p?1:-1)*o)+e.utils.svgPaths.arc("a","0 0,1",n,e.utils.svgPaths.point((r?1:-1)*n,(r?-1:1)*n))}var n=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width:function(o){return n},height:function(o){return o},connectionOffsetY:function(o){return o/2},connectionOffsetX:function(o){return-o},pathDown:function(o){return t(o,!1,!1)},pathUp:function(o){return t(o,!0,!1)},pathRightDown:function(o){return t(o,!1,!0)},pathRightUp:function(o){return t(o,!1,!0)}}},e.zelos.ConstantProvider.prototype.shapeFor=function(t){var n=t.getCheck();switch(!n&&t.targetConnection&&(n=t.targetConnection.getCheck()),t.type){case e.connectionTypes.INPUT_VALUE:case e.connectionTypes.OUTPUT_VALUE:if(null!=(t=t.getSourceBlock().getOutputShape()))switch(t){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return n&&-1!=n.indexOf("Boolean")?this.HEXAGONAL:(n&&-1!=n.indexOf("Number")||n&&n.indexOf("String"),this.ROUNDED);case e.connectionTypes.PREVIOUS_STATEMENT:case e.connectionTypes.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}},e.zelos.ConstantProvider.prototype.makeNotch=function(){function t(Y){return e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(Y*p/2,0),e.utils.svgPaths.point(Y*p*3/4,I/2),e.utils.svgPaths.point(Y*p,I)])+e.utils.svgPaths.line([e.utils.svgPaths.point(Y*p,b)])+e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(Y*p/4,I/2),e.utils.svgPaths.point(Y*p/2,I),e.utils.svgPaths.point(Y*p,I)])+e.utils.svgPaths.lineOnAxis("h",Y*r)+e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(Y*p/2,0),e.utils.svgPaths.point(Y*p*3/4,-I/2),e.utils.svgPaths.point(Y*p,-I)])+e.utils.svgPaths.line([e.utils.svgPaths.point(Y*p,-b)])+e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(Y*p/4,-I/2),e.utils.svgPaths.point(Y*p/2,-I),e.utils.svgPaths.point(Y*p,-I)])}var n=this.NOTCH_WIDTH,o=this.NOTCH_HEIGHT,r=n/3,p=r/3,b=o/2,I=b/2,x=t(1),k=t(-1);return{type:this.SHAPES.NOTCH,width:n,height:o,pathLeft:x,pathRight:k}},e.zelos.ConstantProvider.prototype.makeInsideCorners=function(){var t=this.CORNER_RADIUS,n=e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(-t,t)),o=e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(-t,t));return{width:t,height:t,pathTop:n,pathBottom:e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(t,t)),rightWidth:t,rightHeight:t,pathTopRight:o,pathBottomRight:e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(t,t))}},e.zelos.ConstantProvider.prototype.generateSecondaryColour_=function(t){return e.utils.colour.blend("#000",t,.15)||t},e.zelos.ConstantProvider.prototype.generateTertiaryColour_=function(t){return e.utils.colour.blend("#000",t,.25)||t},e.zelos.ConstantProvider.prototype.createDom=function(t,n,o){e.zelos.ConstantProvider.superClass_.createDom.call(this,t,n,o),t=e.utils.dom.createSvgElement(e.utils.Svg.DEFS,{},t),n=e.utils.dom.createSvgElement(e.utils.Svg.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},t),e.utils.dom.createSvgElement(e.utils.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},n),o=e.utils.dom.createSvgElement(e.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},n),e.utils.dom.createSvgElement(e.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},o),e.utils.dom.createSvgElement(e.utils.Svg.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},n),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},n),this.selectedGlowFilterId=n.id,this.selectedGlowFilter_=n,t=e.utils.dom.createSvgElement(e.utils.Svg.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},t),e.utils.dom.createSvgElement(e.utils.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},t),n=e.utils.dom.createSvgElement(e.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},t),e.utils.dom.createSvgElement(e.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),e.utils.dom.createSvgElement(e.utils.Svg.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},t),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},t),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},t),this.replacementGlowFilterId=t.id,this.replacementGlowFilter_=t},e.zelos.ConstantProvider.prototype.getCSS_=function(t){return[t+" .blocklyText,",t+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",t+" .blocklyText {","fill: #fff;","}",t+" .blocklyNonEditableText>rect:not(.blocklyDropdownRect),",t+" .blocklyEditableText>rect:not(.blocklyDropdownRect) {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","}",t+" .blocklyNonEditableText>text,",t+" .blocklyEditableText>text,",t+" .blocklyNonEditableText>g>text,",t+" .blocklyEditableText>g>text {","fill: #575E75;","}",t+" .blocklyFlyoutLabelText {","fill: #575E75;","}",t+" .blocklyText.blocklyBubbleText {","fill: #575E75;","}",t+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>rect,",t+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",t+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","color: #575E75;","}",t+" .blocklyDropdownText {","fill: #fff !important;","}",t+".blocklyWidgetDiv .goog-menuitem,",t+".blocklyDropDownDiv .goog-menuitem {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","}",t+".blocklyDropDownDiv .goog-menuitem-content {","color: #fff;","}",t+" .blocklyHighlightedConnectionPath {","stroke: "+this.SELECTED_GLOW_COLOUR+";","}",t+" .blocklyDisabled > .blocklyOutlinePath {","fill: url(#blocklyDisabledPattern"+this.randomIdentifier+")","}",t+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]},e.zelos.TopRow=function(t){e.zelos.TopRow.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.zelos.TopRow,e.blockRendering.TopRow),e.zelos.TopRow.prototype.endsWithElemSpacer=function(){return!1},e.zelos.TopRow.prototype.hasLeftSquareCorner=function(t){return!!t.outputConnection||(t.hat?"cap"===t.hat:this.constants_.ADD_START_HATS)&&!t.outputConnection&&!t.previousConnection},e.zelos.TopRow.prototype.hasRightSquareCorner=function(t){return!!t.outputConnection&&!t.statementInputCount&&!t.nextConnection},e.zelos.BottomRow=function(t){e.zelos.BottomRow.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.zelos.BottomRow,e.blockRendering.BottomRow),e.zelos.BottomRow.prototype.endsWithElemSpacer=function(){return!1},e.zelos.BottomRow.prototype.hasLeftSquareCorner=function(t){return!!t.outputConnection},e.zelos.BottomRow.prototype.hasRightSquareCorner=function(t){return!!t.outputConnection&&!t.statementInputCount&&!t.nextConnection},e.zelos.RightConnectionShape=function(t){e.zelos.RightConnectionShape.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.getType("RIGHT_CONNECTION"),this.width=this.height=0},e.utils.object.inherits(e.zelos.RightConnectionShape,e.blockRendering.Measurable),e.zelos.RenderInfo=function(t,n){e.zelos.RenderInfo.superClass_.constructor.call(this,t,n),this.topRow=new e.zelos.TopRow(this.constants_),this.bottomRow=new e.zelos.BottomRow(this.constants_),this.isInline=!0,this.isMultiRow=!n.getInputsInline()||n.isCollapsed(),this.hasStatementInput=0<n.statementInputCount,this.rightSide=this.outputConnection?new e.zelos.RightConnectionShape(this.constants_):null},e.utils.object.inherits(e.zelos.RenderInfo,e.blockRendering.RenderInfo),e.zelos.RenderInfo.prototype.getRenderer=function(){return this.renderer_},e.zelos.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},e.zelos.RenderInfo.prototype.shouldStartNewRow_=function(t,n){return!!n&&(t.type==e.inputTypes.STATEMENT||n.type==e.inputTypes.STATEMENT||(t.type==e.inputTypes.VALUE||t.type==e.inputTypes.DUMMY)&&(!this.isInline||this.isMultiRow))},e.zelos.RenderInfo.prototype.getDesiredRowWidth_=function(t){return t.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):e.zelos.RenderInfo.superClass_.getDesiredRowWidth_.call(this,t)},e.zelos.RenderInfo.prototype.getInRowSpacing_=function(t,n){return t&&n||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!t&&n&&e.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:t&&e.blockRendering.Types.isLeftRoundedCorner(t)&&n&&(e.blockRendering.Types.isPreviousConnection(n)||e.blockRendering.Types.isNextConnection(n))?n.notchOffset-this.constants_.CORNER_RADIUS:t&&e.blockRendering.Types.isLeftSquareCorner(t)&&n&&e.blockRendering.Types.isHat(n)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING},e.zelos.RenderInfo.prototype.getSpacerRowHeight_=function(t,n){if(e.blockRendering.Types.isTopRow(t)&&e.blockRendering.Types.isBottomRow(n))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;var o=e.blockRendering.Types.isInputRow(t)&&t.hasStatement,r=e.blockRendering.Types.isInputRow(n)&&n.hasStatement;return r||o?(t=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),r&&o?Math.max(t,this.constants_.DUMMY_INPUT_MIN_HEIGHT):t):e.blockRendering.Types.isTopRow(t)?t.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):e.blockRendering.Types.isBottomRow(n)?this.outputConnection?!n.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},e.zelos.RenderInfo.prototype.getSpacerRowWidth_=function(t,n){var o=this.width-this.startX;return e.blockRendering.Types.isInputRow(t)&&t.hasStatement||e.blockRendering.Types.isInputRow(n)&&n.hasStatement?Math.max(o,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):o},e.zelos.RenderInfo.prototype.getElemCenterline_=function(t,n){if(t.hasStatement&&!e.blockRendering.Types.isSpacer(n)&&!e.blockRendering.Types.isStatementInput(n))return t.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(e.blockRendering.Types.isInlineInput(n)){var o=n.connectedBlock;if(o&&o.outputConnection&&o.nextConnection)return t.yPos+o.height/2}return e.zelos.RenderInfo.superClass_.getElemCenterline_.call(this,t,n)},e.zelos.RenderInfo.prototype.addInput_=function(t,n){t.type==e.inputTypes.DUMMY&&n.hasDummyInput&&n.align==e.constants.ALIGN.LEFT&&t.align==e.constants.ALIGN.RIGHT&&(n.rightAlignedDummyInput=t),e.zelos.RenderInfo.superClass_.addInput_.call(this,t,n)},e.zelos.RenderInfo.prototype.addAlignmentPadding_=function(t,n){if(t.rightAlignedDummyInput){for(var o,p,r=0;(p=t.elements[r])&&(e.blockRendering.Types.isSpacer(p)&&(o=p),!e.blockRendering.Types.isField(p)||p.parentInput!=t.rightAlignedDummyInput);r++);if(o)return o.width+=n,void(t.width+=n)}e.zelos.RenderInfo.superClass_.addAlignmentPadding_.call(this,t,n)},e.zelos.RenderInfo.prototype.adjustXPosition_=function(){for(var t=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH,n=t,o=2;o<this.rows.length-1;o+=2){var r=this.rows[o-1],p=this.rows[o],b=this.rows[o+1];if(r=2==o?!!this.topRow.hasPreviousConnection:!!r.followsStatement,b=o+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!b.precedesStatement,e.blockRendering.Types.isInputRow(p)&&p.hasStatement)p.measure(),n=p.width-p.getLastInput().width+t;else if(r&&(2==o||b)&&e.blockRendering.Types.isInputRow(p)&&!p.hasStatement){b=p.xPos,r=null;for(var x,I=0;x=p.elements[I];I++)e.blockRendering.Types.isSpacer(x)&&(r=x),!(r&&(e.blockRendering.Types.isField(x)||e.blockRendering.Types.isInput(x))&&b<n)||e.blockRendering.Types.isField(x)&&(x.field instanceof e.FieldLabel||x.field instanceof e.FieldImage)||(r.width+=n-b),b+=x.width}}},e.zelos.RenderInfo.prototype.finalizeOutputConnection_=function(){if(this.outputConnection&&this.outputConnection.isDynamicShape){for(var o,t=0,n=0;o=this.rows[n];n++)o.yPos=t,t+=o.height;this.height=t,t=this.outputConnection.shape.height(n=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height),n=this.outputConnection.shape.width(n),this.outputConnection.height=t,this.outputConnection.width=n,this.outputConnection.startX=n,this.outputConnection.connectionOffsetY=this.outputConnection.shape.connectionOffsetY(t),this.outputConnection.connectionOffsetX=this.outputConnection.shape.connectionOffsetX(n),o=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(o=n,this.rightSide.height=t,this.rightSide.width=o,this.rightSide.centerline=t/2,this.rightSide.xPos=this.width+o),this.startX=n,this.width+=n+o,this.widthWithChildren+=n+o}},e.zelos.RenderInfo.prototype.finalizeHorizontalAlignment_=function(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var o,t=0,n=0;o=this.rows[n];n++)if(e.blockRendering.Types.isInputRow(o)){t=o.elements[o.elements.length-2];var r=this.getNegativeSpacing_(o.elements[1]),p=this.getNegativeSpacing_(t),b=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-(t=r+p)<b&&(r=(t=this.width-b)/2,p=t/2),o.elements.unshift(new e.blockRendering.InRowSpacer(this.constants_,-r)),o.elements.push(new e.blockRendering.InRowSpacer(this.constants_,-p))}if(t)for(this.width-=t,this.widthWithChildren-=t,this.rightSide.xPos-=t,n=0;o=this.rows[n];n++)e.blockRendering.Types.isTopOrBottomRow(o)&&(o.elements[1].width-=t,o.elements[1].widthWithConnectedBlocks-=t),o.width-=t,o.widthWithConnectedBlocks-=t}},e.zelos.RenderInfo.prototype.getNegativeSpacing_=function(t){if(!t)return 0;var n=this.outputConnection.width,o=this.outputConnection.shape.type,r=this.constants_;if(this.isMultiRow&&1<this.inputRows.length)switch(o){case r.SHAPES.ROUND:return n-(o=this.height/2>(o=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH)?o:this.height/2)*(1-Math.sin(Math.acos((o-this.constants_.SMALL_PADDING)/o)));default:return 0}if(e.blockRendering.Types.isInlineInput(t)){var p=t.connectedBlock;return t=p?p.pathObject.outputShapeType:t.shape.type,p&&p.outputConnection&&(p.statementInputCount||p.nextConnection)||o==r.SHAPES.HEXAGONAL&&o!=t?0:n-this.constants_.SHAPE_IN_SHAPE_PADDING[o][t]}return e.blockRendering.Types.isField(t)?o==r.SHAPES.ROUND&&t.field instanceof e.FieldTextInput?n-2.75*r.GRID_UNIT:n-this.constants_.SHAPE_IN_SHAPE_PADDING[o][0]:e.blockRendering.Types.isIcon(t)?this.constants_.SMALL_PADDING:0},e.zelos.RenderInfo.prototype.finalizeVerticalAlignment_=function(){if(!this.outputConnection)for(var t=2;t<this.rows.length-1;t+=2){var n=this.rows[t-1],o=this.rows[t],r=this.rows[t+1],p=2==t,b=t+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!r.precedesStatement;if(p?this.topRow.hasPreviousConnection:n.followsStatement){var I=3==o.elements.length&&(o.elements[1].field instanceof e.FieldLabel||o.elements[1].field instanceof e.FieldImage);if(!p&&I)n.height-=this.constants_.SMALL_PADDING,r.height-=this.constants_.SMALL_PADDING,o.height-=this.constants_.MEDIUM_PADDING;else if(p||b){if(b){for(p=!1,b=0;I=o.elements[b];b++)if(e.blockRendering.Types.isInlineInput(I)&&I.connectedBlock&&!I.connectedBlock.isShadow()&&40<=I.connectedBlock.getHeightWidth().height){p=!0;break}p&&(n.height-=this.constants_.SMALL_PADDING,r.height-=this.constants_.SMALL_PADDING)}}else n.height+=this.constants_.SMALL_PADDING}}},e.zelos.RenderInfo.prototype.finalize_=function(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),e.zelos.RenderInfo.superClass_.finalize_.call(this),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)},e.zelos.Drawer=function(t,n){e.zelos.Drawer.superClass_.constructor.call(this,t,n)},e.utils.object.inherits(e.zelos.Drawer,e.blockRendering.Drawer),e.zelos.Drawer.prototype.draw=function(){var t=this.block_.pathObject;t.beginDrawing(),this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),t.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&t.flipRTL(),e.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_(),this.info_.outputConnection&&(t.outputShapeType=this.info_.outputConnection.shape.type),t.endDrawing()},e.zelos.Drawer.prototype.drawOutline_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):e.zelos.Drawer.superClass_.drawOutline_.call(this)},e.zelos.Drawer.prototype.drawLeft_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():e.zelos.Drawer.superClass_.drawLeft_.call(this)},e.zelos.Drawer.prototype.drawRightSideRow_=function(t){if(!(0>=t.height))if(t.precedesStatement||t.followsStatement){var n=this.constants_.INSIDE_CORNERS.rightHeight;this.outlinePath_+=(t.followsStatement?this.constants_.INSIDE_CORNERS.pathBottomRight:"")+(0<(n=t.height-(t.precedesStatement?n:0))?e.utils.svgPaths.lineOnAxis("V",t.yPos+n):"")+(t.precedesStatement?this.constants_.INSIDE_CORNERS.pathTopRight:"")}else this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",t.yPos+t.height)},e.zelos.Drawer.prototype.drawRightDynamicConnection_=function(){this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)},e.zelos.Drawer.prototype.drawLeftDynamicConnection_=function(){this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"},e.zelos.Drawer.prototype.drawFlatTop_=function(){var t=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=e.utils.svgPaths.moveBy(t.xPos,this.info_.startY),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("h",t.width)},e.zelos.Drawer.prototype.drawFlatBottom_=function(){var t=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",t.baseline),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("h",-t.width)},e.zelos.Drawer.prototype.drawInlineInput_=function(t){this.positionInlineInputConnection_(t);var n=t.input.name;if(!t.connectedBlock&&!this.info_.isInsertionMarker){var o=t.width-2*t.connectionWidth;t=e.utils.svgPaths.moveTo(t.xPos+t.connectionWidth,t.centerline-t.height/2)+e.utils.svgPaths.lineOnAxis("h",o)+t.shape.pathRightDown(t.height)+e.utils.svgPaths.lineOnAxis("h",-o)+t.shape.pathUp(t.height)+"z",this.block_.pathObject.setOutlinePath(n,t)}},e.zelos.Drawer.prototype.drawStatementInput_=function(t){var n=t.getLastInput(),o=n.xPos+n.notchOffset+n.shape.width,r=n.shape.pathRight+e.utils.svgPaths.lineOnAxis("h",-(n.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop,p=t.height-2*this.constants_.INSIDE_CORNERS.height;n=this.constants_.INSIDE_CORNERS.pathBottom+e.utils.svgPaths.lineOnAxis("h",n.notchOffset-this.constants_.INSIDE_CORNERS.width)+(n.connectedBottomNextConnection?"":n.shape.pathLeft),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("H",o)+r+e.utils.svgPaths.lineOnAxis("v",p)+n+e.utils.svgPaths.lineOnAxis("H",t.xPos+t.width),this.positionStatementInputConnection_(t)},e.zelos.MarkerSvg=function(t,n,o){e.zelos.MarkerSvg.superClass_.constructor.call(this,t,n,o)},e.utils.object.inherits(e.zelos.MarkerSvg,e.blockRendering.MarkerSvg),e.zelos.MarkerSvg.prototype.showWithInputOutput_=function(t){var n=t.getSourceBlock();t=t.getLocation().getOffsetInBlock(),this.positionCircle_(t.x,t.y),this.setParent_(n),this.showCurrent_()},e.zelos.MarkerSvg.prototype.showWithOutput_=function(t){this.showWithInputOutput_(t)},e.zelos.MarkerSvg.prototype.showWithInput_=function(t){this.showWithInputOutput_(t)},e.zelos.MarkerSvg.prototype.showWithBlock_=function(t){var n=(t=t.getLocation()).getHeightWidth();this.positionRect_(0,0,n.width,n.height),this.setParent_(t),this.showCurrent_()},e.zelos.MarkerSvg.prototype.positionCircle_=function(t,n){this.markerCircle_.setAttribute("cx",t),this.markerCircle_.setAttribute("cy",n),this.currentMarkerSvg=this.markerCircle_},e.zelos.MarkerSvg.prototype.hide=function(){e.zelos.MarkerSvg.superClass_.hide.call(this),this.markerCircle_.style.display="none"},e.zelos.MarkerSvg.prototype.createDomInternal_=function(){if(e.zelos.MarkerSvg.superClass_.createDomInternal_.call(this),this.markerCircle_=e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{r:this.constants_.CURSOR_RADIUS,style:"display: none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var t=this.getBlinkProperties_();e.utils.dom.createSvgElement(e.utils.Svg.ANIMATE,t,this.markerCircle_)}return this.markerSvg_},e.zelos.MarkerSvg.prototype.applyColour_=function(t){e.zelos.MarkerSvg.superClass_.applyColour_.call(this,t),this.markerCircle_.setAttribute("fill",this.colour_),this.markerCircle_.setAttribute("stroke",this.colour_),this.isCursor()&&this.markerCircle_.firstChild.setAttribute("values",this.colour_+";transparent;transparent;")},e.zelos.PathObject=function(t,n,o){e.zelos.PathObject.superClass_.constructor.call(this,t,n,o),this.constants=o,this.svgPathSelected_=null,this.outlines_=Object.create(null),this.outputShapeType=this.remainingOutlines_=null},e.utils.object.inherits(e.zelos.PathObject,e.blockRendering.PathObject),e.zelos.PathObject.prototype.setPath=function(t){e.zelos.PathObject.superClass_.setPath.call(this,t),this.svgPathSelected_&&this.svgPathSelected_.setAttribute("d",t)},e.zelos.PathObject.prototype.applyColour=function(t){for(var n in e.zelos.PathObject.superClass_.applyColour.call(this,t),t.isShadow()&&t.getParent()&&this.svgPath.setAttribute("stroke",t.getParent().style.colourTertiary),this.outlines_)this.outlines_[n].setAttribute("fill",this.style.colourTertiary)},e.zelos.PathObject.prototype.flipRTL=function(){for(var t in e.zelos.PathObject.superClass_.flipRTL.call(this),this.outlines_)this.outlines_[t].setAttribute("transform","scale(-1 1)")},e.zelos.PathObject.prototype.updateSelected=function(t){this.setClass_("blocklySelected",t),t?this.svgPathSelected_||(this.svgPathSelected_=this.svgPath.cloneNode(!0),this.svgPathSelected_.setAttribute("fill","none"),this.svgPathSelected_.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected_)):this.svgPathSelected_&&(this.svgRoot.removeChild(this.svgPathSelected_),this.svgPathSelected_=null)},e.zelos.PathObject.prototype.updateReplacementFade=function(t){this.setClass_("blocklyReplaceable",t),t?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")},e.zelos.PathObject.prototype.updateShapeForInputHighlight=function(t,n){t=t.getParentInput().name,(t=this.getOutlinePath_(t))&&(n?t.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):t.removeAttribute("filter"))},e.zelos.PathObject.prototype.beginDrawing=function(){for(var t in this.remainingOutlines_=Object.create(null),this.outlines_)this.remainingOutlines_[t]=1},e.zelos.PathObject.prototype.endDrawing=function(){if(this.remainingOutlines_)for(var t in this.remainingOutlines_)this.removeOutlinePath_(t);this.remainingOutlines_=null},e.zelos.PathObject.prototype.setOutlinePath=function(t,n){(t=this.getOutlinePath_(t)).setAttribute("d",n),t.setAttribute("fill",this.style.colourTertiary)},e.zelos.PathObject.prototype.getOutlinePath_=function(t){return this.outlines_[t]||(this.outlines_[t]=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines_&&delete this.remainingOutlines_[t],this.outlines_[t]},e.zelos.PathObject.prototype.removeOutlinePath_=function(t){this.outlines_[t].parentNode.removeChild(this.outlines_[t]),delete this.outlines_[t]},e.zelos.Renderer=function(t){e.zelos.Renderer.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.zelos.Renderer,e.blockRendering.Renderer),e.zelos.Renderer.prototype.makeConstants_=function(){return new e.zelos.ConstantProvider},e.zelos.Renderer.prototype.makeRenderInfo_=function(t){return new e.zelos.RenderInfo(this,t)},e.zelos.Renderer.prototype.makeDrawer_=function(t,n){return new e.zelos.Drawer(t,n)},e.zelos.Renderer.prototype.makeMarkerDrawer=function(t,n){return new e.zelos.MarkerSvg(t,this.getConstants(),n)},e.zelos.Renderer.prototype.makePathObject=function(t,n){return new e.zelos.PathObject(t,n,this.getConstants())},e.zelos.Renderer.prototype.shouldHighlightConnection=function(t){return t.type!=e.connectionTypes.INPUT_VALUE&&t.type!==e.connectionTypes.OUTPUT_VALUE},e.zelos.Renderer.prototype.getConnectionPreviewMethod=function(t,n,o){return n.type==e.connectionTypes.OUTPUT_VALUE?t.isConnected()?e.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:e.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:e.zelos.Renderer.superClass_.getConnectionPreviewMethod(t,n,o)},e.blockRendering.register("zelos",e.zelos.Renderer),e.Themes.Dark=e.Theme.defineTheme("dark",{base:e.Themes.Classic,componentStyles:{workspaceBackgroundColour:"#1e1e1e",toolboxBackgroundColour:"blackBackground",toolboxForegroundColour:"#fff",flyoutBackgroundColour:"#252526",flyoutForegroundColour:"#ccc",flyoutOpacity:1,scrollbarColour:"#797979",insertionMarkerColour:"#fff",insertionMarkerOpacity:.3,scrollbarOpacity:.4,cursorColour:"#d0d0d0",blackBackground:"#333"}}),e.Themes.Deuteranopia={},e.Themes.Deuteranopia.defaultBlockStyles={colour_blocks:{colourPrimary:"#f2a72c",colourSecondary:"#f1c172",colourTertiary:"#da921c"},list_blocks:{colourPrimary:"#7d65ab",colourSecondary:"#a88be0",colourTertiary:"#66518e"},logic_blocks:{colourPrimary:"#9fd2f1",colourSecondary:"#c0e0f4",colourTertiary:"#74bae5"},loop_blocks:{colourPrimary:"#795a07",colourSecondary:"#ac8726",colourTertiary:"#c4a03f"},math_blocks:{colourPrimary:"#e6da39",colourSecondary:"#f3ec8e",colourTertiary:"#f2eeb7"},procedure_blocks:{colourPrimary:"#590721",colourSecondary:"#8c475d",colourTertiary:"#885464"},text_blocks:{colourPrimary:"#058863",colourSecondary:"#5ecfaf",colourTertiary:"#04684c"},variable_blocks:{colourPrimary:"#47025a",colourSecondary:"#820fa1",colourTertiary:"#8e579d"},variable_dynamic_blocks:{colourPrimary:"#47025a",colourSecondary:"#820fa1",colourTertiary:"#8e579d"}},e.Themes.Deuteranopia.categoryStyles={colour_category:{colour:"#f2a72c"},list_category:{colour:"#7d65ab"},logic_category:{colour:"#9fd2f1"},loop_category:{colour:"#795a07"},math_category:{colour:"#e6da39"},procedure_category:{colour:"#590721"},text_category:{colour:"#058863"},variable_category:{colour:"#47025a"},variable_dynamic_category:{colour:"#47025a"}},e.Themes.Deuteranopia=new e.Theme("deuteranopia",e.Themes.Deuteranopia.defaultBlockStyles,e.Themes.Deuteranopia.categoryStyles),e.Themes.HighContrast={},e.Themes.HighContrast.defaultBlockStyles={colour_blocks:{colourPrimary:"#a52714",colourSecondary:"#FB9B8C",colourTertiary:"#FBE1DD"},list_blocks:{colourPrimary:"#4a148c",colourSecondary:"#AD7BE9",colourTertiary:"#CDB6E9"},logic_blocks:{colourPrimary:"#01579b",colourSecondary:"#64C7FF",colourTertiary:"#C5EAFF"},loop_blocks:{colourPrimary:"#33691e",colourSecondary:"#9AFF78",colourTertiary:"#E1FFD7"},math_blocks:{colourPrimary:"#1a237e",colourSecondary:"#8A9EFF",colourTertiary:"#DCE2FF"},procedure_blocks:{colourPrimary:"#006064",colourSecondary:"#77E6EE",colourTertiary:"#CFECEE"},text_blocks:{colourPrimary:"#004d40",colourSecondary:"#5ae27c",colourTertiary:"#D2FFDD"},variable_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},variable_dynamic_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},hat_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB",hat:"cap"}},e.Themes.HighContrast.categoryStyles={colour_category:{colour:"#a52714"},list_category:{colour:"#4a148c"},logic_category:{colour:"#01579b"},loop_category:{colour:"#33691e"},math_category:{colour:"#1a237e"},procedure_category:{colour:"#006064"},text_category:{colour:"#004d40"},variable_category:{colour:"#880e4f"},variable_dynamic_category:{colour:"#880e4f"}},e.Themes.HighContrast=new e.Theme("highcontrast",e.Themes.HighContrast.defaultBlockStyles,e.Themes.HighContrast.categoryStyles),e.Themes.HighContrast.setComponentStyle("selectedGlowColour","#000000"),e.Themes.HighContrast.setComponentStyle("selectedGlowSize",1),e.Themes.HighContrast.setComponentStyle("replacementGlowColour","#000000"),e.Themes.HighContrast.setFontStyle({family:null,weight:null,size:16}),e.Themes.Tritanopia={},e.Themes.Tritanopia.defaultBlockStyles={colour_blocks:{colourPrimary:"#05427f",colourSecondary:"#2974c0",colourTertiary:"#2d74bb"},list_blocks:{colourPrimary:"#b69ce8",colourSecondary:"#ccbaef",colourTertiary:"#9176c5"},logic_blocks:{colourPrimary:"#9fd2f1",colourSecondary:"#c0e0f4",colourTertiary:"#74bae5"},loop_blocks:{colourPrimary:"#aa1846",colourSecondary:"#d36185",colourTertiary:"#7c1636"},math_blocks:{colourPrimary:"#e6da39",colourSecondary:"#f3ec8e",colourTertiary:"#f2eeb7"},procedure_blocks:{colourPrimary:"#590721",colourSecondary:"#8c475d",colourTertiary:"#885464"},text_blocks:{colourPrimary:"#058863",colourSecondary:"#5ecfaf",colourTertiary:"#04684c"},variable_blocks:{colourPrimary:"#4b2d84",colourSecondary:"#816ea7",colourTertiary:"#83759e"},variable_dynamic_blocks:{colourPrimary:"#4b2d84",colourSecondary:"#816ea7",colourTertiary:"#83759e"}},e.Themes.Tritanopia.categoryStyles={colour_category:{colour:"#05427f"},list_category:{colour:"#b69ce8"},logic_category:{colour:"#9fd2f1"},loop_category:{colour:"#aa1846"},math_category:{colour:"#e6da39"},procedure_category:{colour:"#590721"},text_category:{colour:"#058863"},variable_category:{colour:"#4b2d84"},variable_dynamic_category:{colour:"#4b2d84"}},e.Themes.Tritanopia=new e.Theme("tritanopia",e.Themes.Tritanopia.defaultBlockStyles,e.Themes.Tritanopia.categoryStyles),e.requires={},e})?v.apply(U,[]):v)&&(B.exports=a)},81010:function(B,U,v){var T,a,e;a=[v(8100)],void 0!==(e="function"==typeof(T=function(t){"use strict";return t.Blocks={},t.Blocks})?T.apply(U,a):T)&&(B.exports=e)},8100:function(B,U,v){var T,a,e;a=[v(99240)],void 0!==(e="function"==typeof(T=function(t){"use strict";return t.Blocks.colour={},t.Constants={},t.Constants.Colour={},t.Constants.Colour.HUE=20,t.defineBlocksWithJsonArray([{type:"colour_picker",message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"colour_random",message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"},{type:"colour_rgb",message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"RIGHT"},{type:"input_value",name:"GREEN",check:"Number",align:"RIGHT"},{type:"input_value",name:"BLUE",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"},{type:"colour_blend",message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"RIGHT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"RIGHT"},{type:"input_value",name:"RATIO",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"}]),t.Constants.Lists={},t.Constants.Lists.HUE=260,t.defineBlocksWithJsonArray([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),t.Blocks.lists_create_with={init:function(){this.setHelpUrl(t.Msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new t.Mutator(["lists_create_with_item"])),this.setTooltip(t.Msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("items",this.itemCount_),n},domToMutation:function(n){this.itemCount_=parseInt(n.getAttribute("items"),10),this.updateShape_()},decompose:function(n){var o=n.newBlock("lists_create_with_container");o.initSvg();for(var r=o.getInput("STACK").connection,p=0;p<this.itemCount_;p++){var b=n.newBlock("lists_create_with_item");b.initSvg(),r.connect(b.previousConnection),r=b.nextConnection}return o},compose:function(n){var o=n.getInputTargetBlock("STACK");for(n=[];o&&!o.isInsertionMarker();)n.push(o.valueConnection_),o=o.nextConnection&&o.nextConnection.targetBlock();for(o=0;o<this.itemCount_;o++){var r=this.getInput("ADD"+o).connection.targetConnection;r&&-1==n.indexOf(r)&&r.disconnect()}for(this.itemCount_=n.length,this.updateShape_(),o=0;o<this.itemCount_;o++)t.Mutator.reconnect(n[o],this,"ADD"+o)},saveConnections:function(n){n=n.getInputTargetBlock("STACK");for(var o=0;n;){var r=this.getInput("ADD"+o);n.valueConnection_=r&&r.connection.targetConnection,o++,n=n.nextConnection&&n.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(t.Msg.LISTS_CREATE_EMPTY_TITLE);for(var n=0;n<this.itemCount_;n++)if(!this.getInput("ADD"+n)){var o=this.appendValueInput("ADD"+n).setAlign(t.ALIGN_RIGHT);0==n&&o.appendField(t.Msg.LISTS_CREATE_WITH_INPUT_WITH)}for(;this.getInput("ADD"+n);)this.removeInput("ADD"+n),n++}},t.Blocks.lists_create_with_container={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(t.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(t.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}},t.Blocks.lists_create_with_item={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(t.Msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(t.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}},t.Blocks.lists_indexOf={init:function(){var n=[[t.Msg.LISTS_INDEX_OF_FIRST,"FIRST"],[t.Msg.LISTS_INDEX_OF_LAST,"LAST"]];this.setHelpUrl(t.Msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(t.Msg.LISTS_INDEX_OF_INPUT_IN_LIST),this.appendValueInput("FIND").appendField(new t.FieldDropdown(n),"END"),this.setInputsInline(!0);var o=this;this.setTooltip(function(){return t.Msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",o.workspace.options.oneBasedIndex?"0":"-1")})}},t.Blocks.lists_getIndex={init:function(){var n=[[t.Msg.LISTS_GET_INDEX_GET,"GET"],[t.Msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[t.Msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[t.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[t.Msg.LISTS_GET_INDEX_LAST,"LAST"],[t.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(t.Msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),n=new t.FieldDropdown(n,function(r){r="REMOVE"==r,this.getSourceBlock().updateStatement_(r)}),this.appendValueInput("VALUE").setCheck("Array").appendField(t.Msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(n,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),t.Msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(t.Msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0);var o=this;this.setTooltip(function(){var r=o.getFieldValue("MODE"),p=o.getFieldValue("WHERE"),b="";switch(r+" "+p){case"GET FROM_START":case"GET FROM_END":b=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":b=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":b=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":b=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":b=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":b=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":b=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":b=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":b=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":b=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":b=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":b=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return("FROM_START"==p||"FROM_END"==p)&&(b+="  "+("FROM_START"==p?t.Msg.LISTS_INDEX_FROM_START_TOOLTIP:t.Msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",o.workspace.options.oneBasedIndex?"#1":"#0")),b})},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");n.setAttribute("statement",!this.outputConnection);var o=this.getInput("AT").type==t.INPUT_VALUE;return n.setAttribute("at",o),n},domToMutation:function(n){var o="true"==n.getAttribute("statement");this.updateStatement_(o),n="false"!=n.getAttribute("at"),this.updateAt_(n)},updateStatement_:function(n){n!=!this.outputConnection&&(this.unplug(!0,!0),n?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(n){this.removeInput("AT"),this.removeInput("ORDINAL",!0),n?(this.appendValueInput("AT").setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var o=new t.FieldDropdown(this.WHERE_OPTIONS,function(r){var p="FROM_START"==r||"FROM_END"==r;if(p!=n){var b=this.getSourceBlock();return b.updateAt_(p),b.setFieldValue(r,"WHERE"),null}});this.getInput("AT").appendField(o,"WHERE"),t.Msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}},t.Blocks.lists_setIndex={init:function(){var n=[[t.Msg.LISTS_SET_INDEX_SET,"SET"],[t.Msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[t.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[t.Msg.LISTS_GET_INDEX_LAST,"LAST"],[t.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(t.Msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(t.Msg.LISTS_SET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(new t.FieldDropdown(n),"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(t.Msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(t.Msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0);var o=this;this.setTooltip(function(){var r=o.getFieldValue("MODE"),p=o.getFieldValue("WHERE"),b="";switch(r+" "+p){case"SET FROM_START":case"SET FROM_END":b=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":b=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":b=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":b=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":b=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":b=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":b=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":b=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return("FROM_START"==p||"FROM_END"==p)&&(b+="  "+t.Msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",o.workspace.options.oneBasedIndex?"#1":"#0")),b})},mutationToDom:function(){var n=t.utils.xml.createElement("mutation"),o=this.getInput("AT").type==t.INPUT_VALUE;return n.setAttribute("at",o),n},domToMutation:function(n){n="false"!=n.getAttribute("at"),this.updateAt_(n)},updateAt_:function(n){this.removeInput("AT"),this.removeInput("ORDINAL",!0),n?(this.appendValueInput("AT").setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var o=new t.FieldDropdown(this.WHERE_OPTIONS,function(r){var p="FROM_START"==r||"FROM_END"==r;if(p!=n){var b=this.getSourceBlock();return b.updateAt_(p),b.setFieldValue(r,"WHERE"),null}});this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO"),this.getInput("AT").appendField(o,"WHERE")}},t.Blocks.lists_getSublist={init:function(){this.WHERE_OPTIONS_1=[[t.Msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[t.Msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(t.Msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(t.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),t.Msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(t.Msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(t.Msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){var n=t.utils.xml.createElement("mutation"),o=this.getInput("AT1").type==t.INPUT_VALUE;return n.setAttribute("at1",o),o=this.getInput("AT2").type==t.INPUT_VALUE,n.setAttribute("at2",o),n},domToMutation:function(n){var o="true"==n.getAttribute("at1");n="true"==n.getAttribute("at2"),this.updateAt_(1,o),this.updateAt_(2,n)},updateAt_:function(n,o){this.removeInput("AT"+n),this.removeInput("ORDINAL"+n,!0),o?(this.appendValueInput("AT"+n).setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+n).appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+n);var r=new t.FieldDropdown(this["WHERE_OPTIONS_"+n],function(p){var b="FROM_START"==p||"FROM_END"==p;if(b!=o){var I=this.getSourceBlock();return I.updateAt_(n,b),I.setFieldValue(p,"WHERE"+n),null}});this.getInput("AT"+n).appendField(r,"WHERE"+n),1==n&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2")),t.Msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}},t.Blocks.lists_sort={init:function(){this.jsonInit({message0:t.Msg.LISTS_SORT_TITLE,args0:[{type:"field_dropdown",name:"TYPE",options:[[t.Msg.LISTS_SORT_TYPE_NUMERIC,"NUMERIC"],[t.Msg.LISTS_SORT_TYPE_TEXT,"TEXT"],[t.Msg.LISTS_SORT_TYPE_IGNORECASE,"IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[[t.Msg.LISTS_SORT_ORDER_ASCENDING,"1"],[t.Msg.LISTS_SORT_ORDER_DESCENDING,"-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:t.Msg.LISTS_SORT_TOOLTIP,helpUrl:t.Msg.LISTS_SORT_HELPURL})}},t.Blocks.lists_split={init:function(){var n=this,o=new t.FieldDropdown([[t.Msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[t.Msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]],function(r){n.updateType_(r)});this.setHelpUrl(t.Msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(o,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(t.Msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(function(){var r=n.getFieldValue("MODE");if("SPLIT"==r)return t.Msg.LISTS_SPLIT_TOOLTIP_SPLIT;if("JOIN"==r)return t.Msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+r)})},updateType_:function(n){if(this.getFieldValue("MODE")!=n){var o=this.getInput("INPUT").connection;o.setShadowDom(null);var r=o.targetBlock();r&&(o.disconnect(),r.isShadow()?r.dispose():this.bumpNeighbours())}"SPLIT"==n?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("mode",this.getFieldValue("MODE")),n},domToMutation:function(n){this.updateType_(n.getAttribute("mode"))}},t.Blocks.logic={},t.Constants.Logic={},t.Constants.Logic.HUE=210,t.defineBlocksWithJsonArray([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["\u2260","NEQ"],["\u200f<","LT"],["\u200f\u2264","LTE"],["\u200f>","GT"],["\u200f\u2265","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]}]),t.defineBlocksWithJsonArray([{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]),t.Constants.Logic.TOOLTIPS_BY_OP={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"},t.Extensions.register("logic_op_tooltip",t.Extensions.buildTooltipForDropdown("OP",t.Constants.Logic.TOOLTIPS_BY_OP)),t.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN={elseifCount_:0,elseCount_:0,suppressPrefixSuffix:!0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;var n=t.utils.xml.createElement("mutation");return this.elseifCount_&&n.setAttribute("elseif",this.elseifCount_),this.elseCount_&&n.setAttribute("else",1),n},domToMutation:function(n){this.elseifCount_=parseInt(n.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(n.getAttribute("else"),10)||0,this.rebuildShape_()},decompose:function(n){var o=n.newBlock("controls_if_if");o.initSvg();for(var r=o.nextConnection,p=1;p<=this.elseifCount_;p++){var b=n.newBlock("controls_if_elseif");b.initSvg(),r.connect(b.previousConnection),r=b.nextConnection}return this.elseCount_&&((n=n.newBlock("controls_if_else")).initSvg(),r.connect(n.previousConnection)),o},compose:function(n){n=n.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;for(var o=[null],r=[null],p=null;n&&!n.isInsertionMarker();){switch(n.type){case"controls_if_elseif":this.elseifCount_++,o.push(n.valueConnection_),r.push(n.statementConnection_);break;case"controls_if_else":this.elseCount_++,p=n.statementConnection_;break;default:throw TypeError("Unknown block type: "+n.type)}n=n.nextConnection&&n.nextConnection.targetBlock()}this.updateShape_(),this.reconnectChildBlocks_(o,r,p)},saveConnections:function(n){n=n.nextConnection.targetBlock();for(var o=1;n;){switch(n.type){case"controls_if_elseif":var r=this.getInput("IF"+o),p=this.getInput("DO"+o);n.valueConnection_=r&&r.connection.targetConnection,n.statementConnection_=p&&p.connection.targetConnection,o++;break;case"controls_if_else":p=this.getInput("ELSE"),n.statementConnection_=p&&p.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+n.type)}n=n.nextConnection&&n.nextConnection.targetBlock()}},rebuildShape_:function(){var n=[null],o=[null],r=null;this.getInput("ELSE")&&(r=this.getInput("ELSE").connection.targetConnection);for(var p=1;this.getInput("IF"+p);){var b=this.getInput("IF"+p),I=this.getInput("DO"+p);n.push(b.connection.targetConnection),o.push(I.connection.targetConnection),p++}this.updateShape_(),this.reconnectChildBlocks_(n,o,r)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var n=1;this.getInput("IF"+n);)this.removeInput("IF"+n),this.removeInput("DO"+n),n++;for(n=1;n<=this.elseifCount_;n++)this.appendValueInput("IF"+n).setCheck("Boolean").appendField(t.Msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+n).appendField(t.Msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(t.Msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(n,o,r){for(var p=1;p<=this.elseifCount_;p++)t.Mutator.reconnect(n[p],this,"IF"+p),t.Mutator.reconnect(o[p],this,"DO"+p);t.Mutator.reconnect(r,this,"ELSE")}},t.Extensions.registerMutator("controls_if_mutator",t.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN,null,["controls_if_elseif","controls_if_else"]),t.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION=function(){this.setTooltip(function(){return this.elseifCount_||this.elseCount_?!this.elseifCount_&&this.elseCount_?t.Msg.CONTROLS_IF_TOOLTIP_2:this.elseifCount_&&!this.elseCount_?t.Msg.CONTROLS_IF_TOOLTIP_3:this.elseifCount_&&this.elseCount_?t.Msg.CONTROLS_IF_TOOLTIP_4:"":t.Msg.CONTROLS_IF_TOOLTIP_1}.bind(this))},t.Extensions.register("controls_if_tooltip",t.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION),t.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN={onchange:function(n){this.prevBlocks_||(this.prevBlocks_=[null,null]);var o=this.getInputTargetBlock("A"),r=this.getInputTargetBlock("B");o&&r&&!this.workspace.connectionChecker.doTypeChecks(o.outputConnection,r.outputConnection)&&(t.Events.setGroup(n.group),(n=this.prevBlocks_[0])!==o&&(o.unplug(),!n||n.isDisposed()||n.isShadow()||this.getInput("A").connection.connect(n.outputConnection)),(o=this.prevBlocks_[1])!==r&&(r.unplug(),!o||o.isDisposed()||o.isShadow()||this.getInput("B").connection.connect(o.outputConnection)),this.bumpNeighbours(),t.Events.setGroup(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},t.Constants.Logic.LOGIC_COMPARE_EXTENSION=function(){this.mixin(t.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN)},t.Extensions.register("logic_compare",t.Constants.Logic.LOGIC_COMPARE_EXTENSION),t.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN={prevParentConnection_:null,onchange:function(n){var o=this.getInputTargetBlock("THEN"),r=this.getInputTargetBlock("ELSE"),p=this.outputConnection.targetConnection;if((o||r)&&p)for(var b=0;2>b;b++){var I=1==b?o:r;I&&!I.workspace.connectionChecker.doTypeChecks(I.outputConnection,p)&&(t.Events.setGroup(n.group),p===this.prevParentConnection_?(this.unplug(),p.getSourceBlock().bumpNeighbours()):(I.unplug(),I.bumpNeighbours()),t.Events.setGroup(!1))}this.prevParentConnection_=p}},t.Extensions.registerMixin("logic_ternary",t.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN),t.Blocks.loops={},t.Constants.Loops={},t.Constants.Loops.HUE=120,t.defineBlocksWithJsonArray([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]),t.Constants.Loops.WHILE_UNTIL_TOOLTIPS={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"},t.Extensions.register("controls_whileUntil_tooltip",t.Extensions.buildTooltipForDropdown("MODE",t.Constants.Loops.WHILE_UNTIL_TOOLTIPS)),t.Constants.Loops.BREAK_CONTINUE_TOOLTIPS={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"},t.Extensions.register("controls_flow_tooltip",t.Extensions.buildTooltipForDropdown("FLOW",t.Constants.Loops.BREAK_CONTINUE_TOOLTIPS)),t.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN={customContextMenu:function(n){if(!this.isInFlyout){var o=this.getField("VAR").getVariable(),r=o.name;if(!this.isCollapsed()&&null!=r){var p={enabled:!0};p.text=t.Msg.VARIABLES_SET_CREATE_GET.replace("%1",r),o=t.Variables.generateVariableFieldDom(o),(r=t.utils.xml.createElement("block")).setAttribute("type","variables_get"),r.appendChild(o),p.callback=t.ContextMenu.callbackFactory(this,r),n.push(p)}}}},t.Extensions.registerMixin("contextMenu_newGetVariableBlock",t.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN),t.Extensions.register("controls_for_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),t.Extensions.register("controls_forEach_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR")),t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN={LOOP_TYPES:["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"],suppressPrefixSuffix:!0,getSurroundLoop:function(n){do{if(-1!=t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.LOOP_TYPES.indexOf(n.type))return n;n=n.getSurroundParent()}while(n);return null},onchange:function(n){if(this.workspace.isDragging&&!this.workspace.isDragging()&&n.type==t.Events.BLOCK_MOVE){var o=t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(this);if(this.setWarningText(o?null:t.Msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout){var r=t.Events.getGroup();t.Events.setGroup(n.group),this.setEnabled(o),t.Events.setGroup(r)}}}},t.Extensions.registerMixin("controls_flow_in_loop_check",t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN),t.Blocks.math={},t.Constants.Math={},t.Constants.Math.HUE=230,t.defineBlocksWithJsonArray([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["\u03c0","PI"],["e","E"],["\u03c6","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(\xbd)","SQRT1_2"],["\u221e","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]),t.Constants.Math.TOOLTIPS_BY_OP={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"},t.Extensions.register("math_op_tooltip",t.Extensions.buildTooltipForDropdown("OP",t.Constants.Math.TOOLTIPS_BY_OP)),t.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN={mutationToDom:function(){var n=t.utils.xml.createElement("mutation"),o="DIVISIBLE_BY"==this.getFieldValue("PROPERTY");return n.setAttribute("divisor_input",o),n},domToMutation:function(n){n="true"==n.getAttribute("divisor_input"),this.updateShape_(n)},updateShape_:function(n){var o=this.getInput("DIVISOR");n?o||this.appendValueInput("DIVISOR").setCheck("Number"):o&&this.removeInput("DIVISOR")}},t.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION=function(){this.getField("PROPERTY").setValidator(function(n){n="DIVISIBLE_BY"==n,this.getSourceBlock().updateShape_(n)})},t.Extensions.registerMutator("math_is_divisibleby_mutator",t.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN,t.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION),t.Extensions.register("math_change_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_MATH_CHANGE_TOOLTIP}","VAR")),t.Constants.Math.LIST_MODES_MUTATOR_MIXIN={updateType_:function(n){this.outputConnection.setCheck("MODE"==n?"Array":"Number")},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("op",this.getFieldValue("OP")),n},domToMutation:function(n){this.updateType_(n.getAttribute("op"))}},t.Constants.Math.LIST_MODES_MUTATOR_EXTENSION=function(){this.getField("OP").setValidator(function(n){this.updateType_(n)}.bind(this))},t.Extensions.registerMutator("math_modes_of_list_mutator",t.Constants.Math.LIST_MODES_MUTATOR_MIXIN,t.Constants.Math.LIST_MODES_MUTATOR_EXTENSION),t.Blocks.procedures={},t.Blocks.procedures_defnoreturn={init:function(){var n=t.Procedures.findLegalName("",this);(n=new t.FieldTextInput(n,t.Procedures.rename)).setSpellcheck(!1),this.appendDummyInput().appendField(t.Msg.PROCEDURES_DEFNORETURN_TITLE).appendField(n,"NAME").appendField("","PARAMS"),this.setMutator(new t.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&t.Msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(t.Msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(t.Msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:function(n){this.hasStatements_!==n&&(n?(this.appendStatementInput("STACK").appendField(t.Msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=n)},updateParams_:function(){var n="";this.arguments_.length&&(n=t.Msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),t.Events.disable();try{this.setFieldValue(n,"PARAMS")}finally{t.Events.enable()}},mutationToDom:function(n){var o=t.utils.xml.createElement("mutation");n&&o.setAttribute("name",this.getFieldValue("NAME"));for(var r=0;r<this.argumentVarModels_.length;r++){var p=t.utils.xml.createElement("arg"),b=this.argumentVarModels_[r];p.setAttribute("name",b.name),p.setAttribute("varid",b.getId()),n&&this.paramIds_&&p.setAttribute("paramId",this.paramIds_[r]),o.appendChild(p)}return this.hasStatements_||o.setAttribute("statements","false"),o},domToMutation:function(n){this.arguments_=[],this.argumentVarModels_=[];for(var r,o=0;r=n.childNodes[o];o++)if("arg"==r.nodeName.toLowerCase()){var p=r.getAttribute("name");r=r.getAttribute("varid")||r.getAttribute("varId"),this.arguments_.push(p),null!=(r=t.Variables.getOrCreateVariablePackage(this.workspace,r,p,""))?this.argumentVarModels_.push(r):console.log("Failed to create a variable with name "+p+", ignoring.")}this.updateParams_(),t.Procedures.mutateCallers(this),this.setStatements_("false"!==n.getAttribute("statements"))},decompose:function(n){var o=t.utils.xml.createElement("block");o.setAttribute("type","procedures_mutatorcontainer");var r=t.utils.xml.createElement("statement");r.setAttribute("name","STACK"),o.appendChild(r);for(var p=0;p<this.arguments_.length;p++){var b=t.utils.xml.createElement("block");b.setAttribute("type","procedures_mutatorarg");var I=t.utils.xml.createElement("field");I.setAttribute("name","NAME");var x=t.utils.xml.createTextNode(this.arguments_[p]);I.appendChild(x),b.appendChild(I),I=t.utils.xml.createElement("next"),b.appendChild(I),r.appendChild(b),r=I}return n=t.Xml.domToBlock(o,n),"procedures_defreturn"==this.type?n.setFieldValue(this.hasStatements_,"STATEMENTS"):n.removeInput("STATEMENT_INPUT"),t.Procedures.mutateCallers(this),n},compose:function(n){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];for(var o=n.getInputTargetBlock("STACK");o&&!o.isInsertionMarker();){var r=o.getFieldValue("NAME");this.arguments_.push(r),r=this.workspace.getVariable(r,""),this.argumentVarModels_.push(r),this.paramIds_.push(o.id),o=o.nextConnection&&o.nextConnection.targetBlock()}this.updateParams_(),t.Procedures.mutateCallers(this),null!==(n=n.getFieldValue("STATEMENTS"))&&this.hasStatements_!=(n="TRUE"==n)&&(n?(this.setStatements_(!0),t.Mutator.reconnect(this.statementConnection_,this,"STACK"),this.statementConnection_=null):(n=this.getInput("STACK").connection,(this.statementConnection_=n.targetConnection)&&((n=n.targetBlock()).unplug(),n.bumpNeighbours()),this.setStatements_(!1)))},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(n,o){var r=this.workspace.getVariableById(n);if(""==r.type){r=r.name,o=this.workspace.getVariableById(o);for(var p=!1,b=0;b<this.argumentVarModels_.length;b++)this.argumentVarModels_[b].getId()==n&&(this.arguments_[b]=o.name,this.argumentVarModels_[b]=o,p=!0);p&&(this.displayRenamedVar_(r,o.name),t.Procedures.mutateCallers(this))}},updateVarName:function(n){for(var o=n.name,r=!1,p=0;p<this.argumentVarModels_.length;p++)if(this.argumentVarModels_[p].getId()==n.getId()){var b=this.arguments_[p];this.arguments_[p]=o,r=!0}r&&(this.displayRenamedVar_(b,o),t.Procedures.mutateCallers(this))},displayRenamedVar_:function(n,o){if(this.updateParams_(),this.mutator&&this.mutator.isVisible())for(var b,r=this.mutator.workspace_.getAllBlocks(!1),p=0;b=r[p];p++)"procedures_mutatorarg"==b.type&&t.Names.equals(n,b.getFieldValue("NAME"))&&b.setFieldValue(o,"NAME")},customContextMenu:function(n){if(!this.isInFlyout){var o={enabled:!0},r=this.getFieldValue("NAME");o.text=t.Msg.PROCEDURES_CREATE_DO.replace("%1",r);var p=t.utils.xml.createElement("mutation");for(p.setAttribute("name",r),r=0;r<this.arguments_.length;r++){var b=t.utils.xml.createElement("arg");b.setAttribute("name",this.arguments_[r]),p.appendChild(b)}if((r=t.utils.xml.createElement("block")).setAttribute("type",this.callType_),r.appendChild(p),o.callback=t.ContextMenu.callbackFactory(this,r),n.push(o),!this.isCollapsed())for(r=0;r<this.argumentVarModels_.length;r++)(o={enabled:!0}).text=t.Msg.VARIABLES_SET_CREATE_GET.replace("%1",(p=this.argumentVarModels_[r]).name),p=t.Variables.generateVariableFieldDom(p),(b=t.utils.xml.createElement("block")).setAttribute("type","variables_get"),b.appendChild(p),o.callback=t.ContextMenu.callbackFactory(this,b),n.push(o)}},callType_:"procedures_callnoreturn"},t.Blocks.procedures_defreturn={init:function(){var n=t.Procedures.findLegalName("",this);(n=new t.FieldTextInput(n,t.Procedures.rename)).setSpellcheck(!1),this.appendDummyInput().appendField(t.Msg.PROCEDURES_DEFRETURN_TITLE).appendField(n,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(t.ALIGN_RIGHT).appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new t.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&t.Msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(t.Msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(t.Msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:t.Blocks.procedures_defnoreturn.setStatements_,updateParams_:t.Blocks.procedures_defnoreturn.updateParams_,mutationToDom:t.Blocks.procedures_defnoreturn.mutationToDom,domToMutation:t.Blocks.procedures_defnoreturn.domToMutation,decompose:t.Blocks.procedures_defnoreturn.decompose,compose:t.Blocks.procedures_defnoreturn.compose,getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},getVars:t.Blocks.procedures_defnoreturn.getVars,getVarModels:t.Blocks.procedures_defnoreturn.getVarModels,renameVarById:t.Blocks.procedures_defnoreturn.renameVarById,updateVarName:t.Blocks.procedures_defnoreturn.updateVarName,displayRenamedVar_:t.Blocks.procedures_defnoreturn.displayRenamedVar_,customContextMenu:t.Blocks.procedures_defnoreturn.customContextMenu,callType_:"procedures_callreturn"},t.Blocks.procedures_mutatorcontainer={init:function(){this.appendDummyInput().appendField(t.Msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(t.Msg.PROCEDURES_ALLOW_STATEMENTS).appendField(new t.FieldCheckbox("TRUE"),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}},t.Blocks.procedures_mutatorarg={init:function(){var n=new t.FieldTextInput(t.Procedures.DEFAULT_ARG,this.validator_);n.oldShowEditorFn_=n.showEditor_,n.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(t.Msg.PROCEDURES_MUTATORARG_TITLE).appendField(n,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,n.onFinishEditing_=this.deleteIntermediateVars_,n.createdVariables_=[],n.onFinishEditing_("x")},validator_:function(n){var o=this.getSourceBlock(),r=t.Mutator.findParentWs(o.workspace);if(!(n=n.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,"")))return null;for(var p=(o.workspace.targetWorkspace||o.workspace).getAllBlocks(!1),b=n.toLowerCase(),I=0;I<p.length;I++)if(p[I].id!=this.getSourceBlock().id){var x=p[I].getFieldValue("NAME");if(x&&x.toLowerCase()==b)return null}return o.isInFlyout||((o=r.getVariable(n,""))&&o.name!=n&&r.renameVariableById(o.getId(),n),o||(o=r.createVariable(n,""))&&this.createdVariables_&&this.createdVariables_.push(o)),n},deleteIntermediateVars_:function(n){var o=t.Mutator.findParentWs(this.getSourceBlock().workspace);if(o)for(var r=0;r<this.createdVariables_.length;r++){var p=this.createdVariables_[r];p.name!=n&&o.deleteVariableById(p.getId())}}},t.Blocks.procedures_callnoreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(t.Msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(n,o){t.Names.equals(n,this.getProcedureCall())&&(this.setFieldValue(o,"NAME"),this.setTooltip((this.outputConnection?t.Msg.PROCEDURES_CALLRETURN_TOOLTIP:t.Msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",o)))},setProcedureParameters_:function(n,o){var r=t.Procedures.getDefinition(this.getProcedureCall(),this.workspace),p=r&&r.mutator&&r.mutator.isVisible();if(p||(this.quarkConnections_={},this.quarkIds_=null),o)if(n.join("\n")==this.arguments_.join("\n"))this.quarkIds_=o;else{if(o.length!=n.length)throw RangeError("paramNames and paramIds must be the same length.");this.setCollapsed(!1),this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]),r=this.rendered,this.rendered=!1;for(var b=0;b<this.arguments_.length;b++){var I=this.getInput("ARG"+b);I&&(this.quarkConnections_[this.quarkIds_[b]]=I=I.connection.targetConnection,p&&I&&-1==o.indexOf(this.quarkIds_[b])&&(I.disconnect(),I.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(n),this.argumentVarModels_=[],b=0;b<this.arguments_.length;b++)n=t.Variables.getOrCreateVariablePackage(this.workspace,null,this.arguments_[b],""),this.argumentVarModels_.push(n);if(this.updateShape_(),this.quarkIds_=o)for(b=0;b<this.arguments_.length;b++)(o=this.quarkIds_[b])in this.quarkConnections_&&(t.Mutator.reconnect(I=this.quarkConnections_[o],this,"ARG"+b)||delete this.quarkConnections_[o]);(this.rendered=r)&&this.render()}},updateShape_:function(){for(var n=0;n<this.arguments_.length;n++){var o=this.getField("ARGNAME"+n);if(o){t.Events.disable();try{o.setValue(this.arguments_[n])}finally{t.Events.enable()}}else o=new t.FieldLabel(this.arguments_[n]),this.appendValueInput("ARG"+n).setAlign(t.ALIGN_RIGHT).appendField(o,"ARGNAME"+n).init()}for(;this.getInput("ARG"+n);)this.removeInput("ARG"+n),n++;(n=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||(n.appendField(t.Msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),n.init()):this.getField("WITH")&&n.removeField("WITH"))},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");n.setAttribute("name",this.getProcedureCall());for(var o=0;o<this.arguments_.length;o++){var r=t.utils.xml.createElement("arg");r.setAttribute("name",this.arguments_[o]),n.appendChild(r)}return n},domToMutation:function(n){var o=n.getAttribute("name");this.renameProcedure(this.getProcedureCall(),o),o=[];for(var b,r=[],p=0;b=n.childNodes[p];p++)"arg"==b.nodeName.toLowerCase()&&(o.push(b.getAttribute("name")),r.push(b.getAttribute("paramId")));this.setProcedureParameters_(o,r)},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(n){if(this.workspace&&!this.workspace.isFlyout&&n.recordUndo)if(n.type==t.Events.BLOCK_CREATE&&-1!=n.ids.indexOf(this.id)){var o=this.getProcedureCall();if(!(o=t.Procedures.getDefinition(o,this.workspace))||o.type==this.defType_&&JSON.stringify(o.getVars())==JSON.stringify(this.arguments_)||(o=null),!o){t.Events.setGroup(n.group),n=t.utils.xml.createElement("xml"),(o=t.utils.xml.createElement("block")).setAttribute("type",this.defType_);var r=this.getRelativeToSurfaceXY(),p=r.y+2*t.SNAP_RADIUS;o.setAttribute("x",r.x+t.SNAP_RADIUS*(this.RTL?-1:1)),o.setAttribute("y",p),r=this.mutationToDom(),o.appendChild(r),(r=t.utils.xml.createElement("field")).setAttribute("name","NAME"),(p=this.getProcedureCall())||(p=t.Procedures.findLegalName("",this),this.renameProcedure("",p)),r.appendChild(t.utils.xml.createTextNode(p)),o.appendChild(r),n.appendChild(o),t.Xml.domToWorkspace(n,this.workspace),t.Events.setGroup(!1)}}else n.type==t.Events.BLOCK_DELETE?(o=this.getProcedureCall(),(o=t.Procedures.getDefinition(o,this.workspace))||(t.Events.setGroup(n.group),this.dispose(!0),t.Events.setGroup(!1))):n.type==t.Events.CHANGE&&"disabled"==n.element&&(o=this.getProcedureCall(),(o=t.Procedures.getDefinition(o,this.workspace))&&o.id==n.blockId&&((o=t.Events.getGroup())&&console.log("Saw an existing group while responding to a definition change"),t.Events.setGroup(n.group),n.newValue?(this.previousEnabledState_=this.isEnabled(),this.setEnabled(!1)):this.setEnabled(this.previousEnabledState_),t.Events.setGroup(o)))},customContextMenu:function(n){if(this.workspace.isMovable()){var o={enabled:!0};o.text=t.Msg.PROCEDURES_HIGHLIGHT_DEF;var r=this.getProcedureCall(),p=this.workspace;o.callback=function(){var b=t.Procedures.getDefinition(r,p);b&&(p.centerOnBlock(b.id),b.select())},n.push(o)}},defType_:"procedures_defnoreturn"},t.Blocks.procedures_callreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(t.Msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},getProcedureCall:t.Blocks.procedures_callnoreturn.getProcedureCall,renameProcedure:t.Blocks.procedures_callnoreturn.renameProcedure,setProcedureParameters_:t.Blocks.procedures_callnoreturn.setProcedureParameters_,updateShape_:t.Blocks.procedures_callnoreturn.updateShape_,mutationToDom:t.Blocks.procedures_callnoreturn.mutationToDom,domToMutation:t.Blocks.procedures_callnoreturn.domToMutation,getVars:t.Blocks.procedures_callnoreturn.getVars,getVarModels:t.Blocks.procedures_callnoreturn.getVarModels,onchange:t.Blocks.procedures_callnoreturn.onchange,customContextMenu:t.Blocks.procedures_callnoreturn.customContextMenu,defType_:"procedures_defreturn"},t.Blocks.procedures_ifreturn={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(t.Msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(t.Msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("value",Number(this.hasReturnValue_)),n},domToMutation:function(n){this.hasReturnValue_=1==n.getAttribute("value"),this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(n){if(this.workspace.isDragging&&!this.workspace.isDragging()){n=!1;var o=this;do{if(-1!=this.FUNCTION_TYPES.indexOf(o.type)){n=!0;break}o=o.getSurroundParent()}while(o);n?("procedures_defnoreturn"==o.type&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):"procedures_defreturn"!=o.type||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null),this.isInFlyout||this.setEnabled(!0)):(this.setWarningText(t.Msg.PROCEDURES_IFRETURN_WARNING),this.isInFlyout||this.getInheritedDisabled()||this.setEnabled(!1))}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]},t.Blocks.texts={},t.Constants.Text={},t.Constants.Text.HUE=160,t.defineBlocksWithJsonArray([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_multiline",message0:"%1 %2",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=",width:12,height:17,alt:"\xb6"},{type:"field_multilinetext",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),t.Blocks.text_getSubstring={init:function(){this.WHERE_OPTIONS_1=[[t.Msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[t.Msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[t.Msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[t.Msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[t.Msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[t.Msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(t.Msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(t.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),t.Msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(t.Msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(t.Msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){var n=t.utils.xml.createElement("mutation"),o=this.getInput("AT1").type==t.INPUT_VALUE;return n.setAttribute("at1",o),o=this.getInput("AT2").type==t.INPUT_VALUE,n.setAttribute("at2",o),n},domToMutation:function(n){var o="true"==n.getAttribute("at1");n="true"==n.getAttribute("at2"),this.updateAt_(1,o),this.updateAt_(2,n)},updateAt_:function(n,o){this.removeInput("AT"+n),this.removeInput("ORDINAL"+n,!0),o?(this.appendValueInput("AT"+n).setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+n).appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+n),2==n&&t.Msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(t.Msg.TEXT_GET_SUBSTRING_TAIL));var r=new t.FieldDropdown(this["WHERE_OPTIONS_"+n],function(p){var b="FROM_START"==p||"FROM_END"==p;if(b!=o){var I=this.getSourceBlock();return I.updateAt_(n,b),I.setFieldValue(p,"WHERE"+n),null}});this.getInput("AT"+n).appendField(r,"WHERE"+n),1==n&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"))}},t.Blocks.text_changeCase={init:function(){var n=[[t.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[t.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[t.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(t.Msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new t.FieldDropdown(n),"CASE"),this.setOutput(!0,"String"),this.setTooltip(t.Msg.TEXT_CHANGECASE_TOOLTIP)}},t.Blocks.text_trim={init:function(){var n=[[t.Msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[t.Msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[t.Msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(t.Msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new t.FieldDropdown(n),"MODE"),this.setOutput(!0,"String"),this.setTooltip(t.Msg.TEXT_TRIM_TOOLTIP)}},t.Blocks.text_print={init:function(){this.jsonInit({message0:t.Msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:t.Msg.TEXT_PRINT_TOOLTIP,helpUrl:t.Msg.TEXT_PRINT_HELPURL})}},t.Blocks.text_prompt_ext={init:function(){var n=[[t.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[t.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(t.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks");var o=this;n=new t.FieldDropdown(n,function(r){o.updateType_(r)}),this.appendValueInput("TEXT").appendField(n,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(function(){return"TEXT"==o.getFieldValue("TYPE")?t.Msg.TEXT_PROMPT_TOOLTIP_TEXT:t.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},updateType_:function(n){this.outputConnection.setCheck("NUMBER"==n?"Number":"String")},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("type",this.getFieldValue("TYPE")),n},domToMutation:function(n){this.updateType_(n.getAttribute("type"))}},t.Blocks.text_prompt={init:function(){this.mixin(t.Constants.Text.QUOTE_IMAGE_MIXIN);var n=[[t.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[t.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]],o=this;this.setHelpUrl(t.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),n=new t.FieldDropdown(n,function(r){o.updateType_(r)}),this.appendDummyInput().appendField(n,"TYPE").appendField(this.newQuote_(!0)).appendField(new t.FieldTextInput(""),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(function(){return"TEXT"==o.getFieldValue("TYPE")?t.Msg.TEXT_PROMPT_TOOLTIP_TEXT:t.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},updateType_:t.Blocks.text_prompt_ext.updateType_,mutationToDom:t.Blocks.text_prompt_ext.mutationToDom,domToMutation:t.Blocks.text_prompt_ext.domToMutation},t.Blocks.text_count={init:function(){this.jsonInit({message0:t.Msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:t.Msg.TEXT_COUNT_TOOLTIP,helpUrl:t.Msg.TEXT_COUNT_HELPURL})}},t.Blocks.text_replace={init:function(){this.jsonInit({message0:t.Msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:t.Msg.TEXT_REPLACE_TOOLTIP,helpUrl:t.Msg.TEXT_REPLACE_HELPURL})}},t.Blocks.text_reverse={init:function(){this.jsonInit({message0:t.Msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:t.Msg.TEXT_REVERSE_TOOLTIP,helpUrl:t.Msg.TEXT_REVERSE_HELPURL})}},t.Constants.Text.QUOTE_IMAGE_MIXIN={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(n){for(var r,o=0;r=this.inputList[o];o++)for(var b,p=0;b=r.fieldRow[p];p++)if(n==b.name)return r.insertFieldAt(p,this.newQuote_(!0)),void r.insertFieldAt(p+2,this.newQuote_(!1));console.warn('field named "'+n+'" not found in '+this.toDevString())},newQuote_:function(n){return new t.FieldImage((n=this.RTL?!n:n)?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,this.QUOTE_IMAGE_WIDTH,this.QUOTE_IMAGE_HEIGHT,n?"\u201c":"\u201d")}},t.Constants.Text.TEXT_QUOTES_EXTENSION=function(){this.mixin(t.Constants.Text.QUOTE_IMAGE_MIXIN),this.quoteField_("TEXT")},t.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN={mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("items",this.itemCount_),n},domToMutation:function(n){this.itemCount_=parseInt(n.getAttribute("items"),10),this.updateShape_()},decompose:function(n){var o=n.newBlock("text_create_join_container");o.initSvg();for(var r=o.getInput("STACK").connection,p=0;p<this.itemCount_;p++){var b=n.newBlock("text_create_join_item");b.initSvg(),r.connect(b.previousConnection),r=b.nextConnection}return o},compose:function(n){var o=n.getInputTargetBlock("STACK");for(n=[];o&&!o.isInsertionMarker();)n.push(o.valueConnection_),o=o.nextConnection&&o.nextConnection.targetBlock();for(o=0;o<this.itemCount_;o++){var r=this.getInput("ADD"+o).connection.targetConnection;r&&-1==n.indexOf(r)&&r.disconnect()}for(this.itemCount_=n.length,this.updateShape_(),o=0;o<this.itemCount_;o++)t.Mutator.reconnect(n[o],this,"ADD"+o)},saveConnections:function(n){n=n.getInputTargetBlock("STACK");for(var o=0;n;){var r=this.getInput("ADD"+o);n.valueConnection_=r&&r.connection.targetConnection,o++,n=n.nextConnection&&n.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var n=0;n<this.itemCount_;n++)if(!this.getInput("ADD"+n)){var o=this.appendValueInput("ADD"+n).setAlign(t.ALIGN_RIGHT);0==n&&o.appendField(t.Msg.TEXT_JOIN_TITLE_CREATEWITH)}for(;this.getInput("ADD"+n);)this.removeInput("ADD"+n),n++}},t.Constants.Text.TEXT_JOIN_EXTENSION=function(){this.mixin(t.Constants.Text.QUOTE_IMAGE_MIXIN),this.itemCount_=2,this.updateShape_(),this.setMutator(new t.Mutator(["text_create_join_item"]))},t.Extensions.register("text_append_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_TEXT_APPEND_TOOLTIP}","VAR")),t.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION=function(){var n=this;this.setTooltip(function(){return t.Msg.TEXT_INDEXOF_TOOLTIP.replace("%1",n.workspace.options.oneBasedIndex?"0":"-1")})},t.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN={mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("at",!!this.isAt_),n},domToMutation:function(n){n="false"!=n.getAttribute("at"),this.updateAt_(n)},updateAt_:function(n){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),n&&(this.appendValueInput("AT").setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)),t.Msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(t.Msg.TEXT_CHARAT_TAIL)),this.isAt_=n}},t.Constants.Text.TEXT_CHARAT_EXTENSION=function(){this.getField("WHERE").setValidator(function(o){(o="FROM_START"==o||"FROM_END"==o)!=this.isAt_&&this.getSourceBlock().updateAt_(o)}),this.updateAt_(!0);var n=this;this.setTooltip(function(){var o=n.getFieldValue("WHERE"),r=t.Msg.TEXT_CHARAT_TOOLTIP;return("FROM_START"==o||"FROM_END"==o)&&(o="FROM_START"==o?t.Msg.LISTS_INDEX_FROM_START_TOOLTIP:t.Msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(r+="  "+o.replace("%1",n.workspace.options.oneBasedIndex?"#1":"#0")),r})},t.Extensions.register("text_indexOf_tooltip",t.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION),t.Extensions.register("text_quotes",t.Constants.Text.TEXT_QUOTES_EXTENSION),t.Extensions.registerMutator("text_join_mutator",t.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN,t.Constants.Text.TEXT_JOIN_EXTENSION),t.Extensions.registerMutator("text_charAt_mutator",t.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN,t.Constants.Text.TEXT_CHARAT_EXTENSION),t.Blocks.variables={},t.Constants.Variables={},t.Constants.Variables.HUE=330,t.defineBlocksWithJsonArray([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]),t.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(n){if(this.isInFlyout)("variables_get"==this.type||"variables_get_reporter"==this.type)&&(o={text:t.Msg.RENAME_VARIABLE,enabled:!0,callback:t.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},b=this.getField("VAR").getText(),p={text:t.Msg.DELETE_VARIABLE.replace("%1",b),enabled:!0,callback:t.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},n.unshift(o),n.unshift(p));else{if("variables_get"==this.type)var o="variables_set",r=t.Msg.VARIABLES_GET_CREATE_SET;else o="variables_get",r=t.Msg.VARIABLES_SET_CREATE_GET;var p={enabled:0<this.workspace.remainingCapacity()},b=this.getField("VAR").getText();p.text=r.replace("%1",b),(r=t.utils.xml.createElement("field")).setAttribute("name","VAR"),r.appendChild(t.utils.xml.createTextNode(b)),(b=t.utils.xml.createElement("block")).setAttribute("type",o),b.appendChild(r),p.callback=t.ContextMenu.callbackFactory(this,b),n.push(p)}}},t.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY=function(n){return function(){var o=n.workspace,r=n.getField("VAR").getVariable();t.Variables.renameVariable(o,r)}},t.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY=function(n){return function(){var o=n.workspace,r=n.getField("VAR").getVariable();o.deleteVariableById(r.getId()),o.refreshToolboxSelection()}},t.Extensions.registerMixin("contextMenu_variableSetterGetter",t.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),t.Constants.VariablesDynamic={},t.Constants.VariablesDynamic.HUE=310,t.defineBlocksWithJsonArray([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]),t.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(n){if(this.isInFlyout)("variables_get_dynamic"==this.type||"variables_get_reporter_dynamic"==this.type)&&(o={text:t.Msg.RENAME_VARIABLE,enabled:!0,callback:t.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},I=this.getField("VAR").getText(),b={text:t.Msg.DELETE_VARIABLE.replace("%1",I),enabled:!0,callback:t.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},n.unshift(o),n.unshift(b));else{var o=this.getFieldValue("VAR"),r=this.workspace.getVariableById(o).type;if("variables_get_dynamic"==this.type){o="variables_set_dynamic";var p=t.Msg.VARIABLES_GET_CREATE_SET}else o="variables_get_dynamic",p=t.Msg.VARIABLES_SET_CREATE_GET;var b={enabled:0<this.workspace.remainingCapacity()},I=this.getField("VAR").getText();b.text=p.replace("%1",I),(p=t.utils.xml.createElement("field")).setAttribute("name","VAR"),p.setAttribute("variabletype",r),p.appendChild(t.utils.xml.createTextNode(I)),(I=t.utils.xml.createElement("block")).setAttribute("type",o),I.appendChild(p),b.callback=t.ContextMenu.callbackFactory(this,I),n.push(b)}},onchange:function(n){n=this.getFieldValue("VAR"),n=t.Variables.getVariable(this.workspace,n),"variables_get_dynamic"==this.type?this.outputConnection.setCheck(n.type):this.getInput("VALUE").connection.setCheck(n.type)}},t.Constants.VariablesDynamic.RENAME_OPTION_CALLBACK_FACTORY=function(n){return function(){var o=n.workspace,r=n.getField("VAR").getVariable();t.Variables.renameVariable(o,r)}},t.Constants.VariablesDynamic.DELETE_OPTION_CALLBACK_FACTORY=function(n){return function(){var o=n.workspace,r=n.getField("VAR").getVariable();o.deleteVariableById(r.getId()),o.refreshToolboxSelection()}},t.Extensions.registerMixin("contextMenu_variableDynamicSetterGetter",t.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),t.Blocks})?T.apply(U,a):T)&&(B.exports=e)},72593:function(B,U,v){var T,a,e;a=[v(81846),v(59090),v(81010),v(7148)],void 0!==(e="function"==typeof(T=function(t,n,o,r){"use strict";return t.setLocale(n),t.Blocks=t.Blocks||{},Object.keys(o).forEach(function(p){t.Blocks[p]=o[p]}),t.JavaScript=r,t})?T.apply(U,a):T)&&(B.exports=e)},81846:function(B,U,v){var T,a,e;a=[v(72749)],void 0!==(e="function"==typeof(T=function(t){"use strict";return t.setLocale=function(n){t.Msg=t.Msg||{},Object.keys(n).forEach(function(o){t.Msg[o]=n[o]})},t})?T.apply(U,a):T)&&(B.exports=e)},7832:function(B,U,v){var T,a,e;a=[v(72593)],void 0!==(e="function"==typeof(T=function(t){"use strict";return t})?T.apply(U,a):T)&&(B.exports=e)},7148:function(B,U,v){var T,a,e;a=[v(81846),v(97861)],void 0!==(e="function"==typeof(T=function(t,n){"use strict";return t.JavaScript=n,n})?T.apply(U,a):T)&&(B.exports=e)},97861:function(B,U,v){var T,a,e;a=[v(99240)],void 0!==(e="function"==typeof(T=function(t){"use strict";return t.JavaScript=new t.Generator("JavaScript"),t.JavaScript.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(t.utils.global).join(",")),t.JavaScript.ORDER_ATOMIC=0,t.JavaScript.ORDER_NEW=1.1,t.JavaScript.ORDER_MEMBER=1.2,t.JavaScript.ORDER_FUNCTION_CALL=2,t.JavaScript.ORDER_INCREMENT=3,t.JavaScript.ORDER_DECREMENT=3,t.JavaScript.ORDER_BITWISE_NOT=4.1,t.JavaScript.ORDER_UNARY_PLUS=4.2,t.JavaScript.ORDER_UNARY_NEGATION=4.3,t.JavaScript.ORDER_LOGICAL_NOT=4.4,t.JavaScript.ORDER_TYPEOF=4.5,t.JavaScript.ORDER_VOID=4.6,t.JavaScript.ORDER_DELETE=4.7,t.JavaScript.ORDER_AWAIT=4.8,t.JavaScript.ORDER_EXPONENTIATION=5,t.JavaScript.ORDER_MULTIPLICATION=5.1,t.JavaScript.ORDER_DIVISION=5.2,t.JavaScript.ORDER_MODULUS=5.3,t.JavaScript.ORDER_SUBTRACTION=6.1,t.JavaScript.ORDER_ADDITION=6.2,t.JavaScript.ORDER_BITWISE_SHIFT=7,t.JavaScript.ORDER_RELATIONAL=8,t.JavaScript.ORDER_IN=8,t.JavaScript.ORDER_INSTANCEOF=8,t.JavaScript.ORDER_EQUALITY=9,t.JavaScript.ORDER_BITWISE_AND=10,t.JavaScript.ORDER_BITWISE_XOR=11,t.JavaScript.ORDER_BITWISE_OR=12,t.JavaScript.ORDER_LOGICAL_AND=13,t.JavaScript.ORDER_LOGICAL_OR=14,t.JavaScript.ORDER_CONDITIONAL=15,t.JavaScript.ORDER_ASSIGNMENT=16,t.JavaScript.ORDER_YIELD=17,t.JavaScript.ORDER_COMMA=18,t.JavaScript.ORDER_NONE=99,t.JavaScript.ORDER_OVERRIDES=[[t.JavaScript.ORDER_FUNCTION_CALL,t.JavaScript.ORDER_MEMBER],[t.JavaScript.ORDER_FUNCTION_CALL,t.JavaScript.ORDER_FUNCTION_CALL],[t.JavaScript.ORDER_MEMBER,t.JavaScript.ORDER_MEMBER],[t.JavaScript.ORDER_MEMBER,t.JavaScript.ORDER_FUNCTION_CALL],[t.JavaScript.ORDER_LOGICAL_NOT,t.JavaScript.ORDER_LOGICAL_NOT],[t.JavaScript.ORDER_MULTIPLICATION,t.JavaScript.ORDER_MULTIPLICATION],[t.JavaScript.ORDER_ADDITION,t.JavaScript.ORDER_ADDITION],[t.JavaScript.ORDER_LOGICAL_AND,t.JavaScript.ORDER_LOGICAL_AND],[t.JavaScript.ORDER_LOGICAL_OR,t.JavaScript.ORDER_LOGICAL_OR]],t.JavaScript.isInitialized=!1,t.JavaScript.init=function(n){Object.getPrototypeOf(this).init.call(this),this.nameDB_?this.nameDB_.reset():this.nameDB_=new t.Names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(n.getVariableMap()),this.nameDB_.populateVariables(n),this.nameDB_.populateProcedures(n);for(var o=[],r=t.Variables.allDeveloperVariables(n),p=0;p<r.length;p++)o.push(this.nameDB_.getName(r[p],t.Names.DEVELOPER_VARIABLE_TYPE));for(n=t.Variables.allUsedVarModels(n),p=0;p<n.length;p++)o.push(this.nameDB_.getName(n[p].getId(),t.VARIABLE_CATEGORY_NAME));o.length&&(this.definitions_.variables="var "+o.join(", ")+";"),this.isInitialized=!0},t.JavaScript.finish=function(n){var o=t.utils.object.values(this.definitions_);return n=Object.getPrototypeOf(this).finish.call(this,n),this.isInitialized=!1,this.nameDB_.reset(),o.join("\n\n")+"\n\n\n"+n},t.JavaScript.scrubNakedValue=function(n){return n+";\n"},t.JavaScript.quote_=function(n){return"'"+(n=n.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/'/g,"\\'"))+"'"},t.JavaScript.multiline_quote_=function(n){return n.split(/\n/g).map(this.quote_).join(" + '\\n' +\n")},t.JavaScript.scrub_=function(n,o,r){var p="";if(!n.outputConnection||!n.outputConnection.targetConnection){var b=n.getCommentText();b&&(b=t.utils.string.wrap(b,this.COMMENT_WRAP-3),p+=this.prefixLines(b+"\n","// "));for(var I=0;I<n.inputList.length;I++)n.inputList[I].type==t.inputTypes.VALUE&&(b=n.inputList[I].connection.targetBlock())&&(b=this.allNestedComments(b))&&(p+=this.prefixLines(b,"// "))}return n=n.nextConnection&&n.nextConnection.targetBlock(),p+o+(r?"":this.blockToCode(n))},t.JavaScript.getAdjusted=function(n,o,r,p,b){r=r||0,b=b||this.ORDER_NONE,n.workspace.options.oneBasedIndex&&r--;var I=n.workspace.options.oneBasedIndex?"1":"0";if(n=0<r?this.valueToCode(n,o,this.ORDER_ADDITION)||I:0>r?this.valueToCode(n,o,this.ORDER_SUBTRACTION)||I:p?this.valueToCode(n,o,this.ORDER_UNARY_NEGATION)||I:this.valueToCode(n,o,b)||I,t.isNumber(n))n=Number(n)+r,p&&(n=-n);else{if(0<r){n=n+" + "+r;var x=this.ORDER_ADDITION}else 0>r&&(n=n+" - "+-r,x=this.ORDER_SUBTRACTION);p&&(n=r?"-("+n+")":"-"+n,x=this.ORDER_UNARY_NEGATION),x=Math.floor(x),b=Math.floor(b),x&&b>=x&&(n="("+n+")")}return n},t.JavaScript.colour={},t.JavaScript.colour_picker=function(n){return[t.JavaScript.quote_(n.getFieldValue("COLOUR")),t.JavaScript.ORDER_ATOMIC]},t.JavaScript.colour_random=function(n){return[t.JavaScript.provideFunction_("colourRandom",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"() {","  var num = Math.floor(Math.random() * Math.pow(2, 24));","  return '#' + ('00000' + num.toString(16)).substr(-6);","}"])+"()",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.colour_rgb=function(n){var o=t.JavaScript.valueToCode(n,"RED",t.JavaScript.ORDER_NONE)||0,r=t.JavaScript.valueToCode(n,"GREEN",t.JavaScript.ORDER_NONE)||0;return n=t.JavaScript.valueToCode(n,"BLUE",t.JavaScript.ORDER_NONE)||0,[t.JavaScript.provideFunction_("colourRgb",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(r, g, b) {","  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;","  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;","  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;","  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);","  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);","  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+o+", "+r+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.colour_blend=function(n){var o=t.JavaScript.valueToCode(n,"COLOUR1",t.JavaScript.ORDER_NONE)||"'#000000'",r=t.JavaScript.valueToCode(n,"COLOUR2",t.JavaScript.ORDER_NONE)||"'#000000'";return n=t.JavaScript.valueToCode(n,"RATIO",t.JavaScript.ORDER_NONE)||.5,[t.JavaScript.provideFunction_("colourBlend",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(c1, c2, ratio) {","  ratio = Math.max(Math.min(Number(ratio), 1), 0);","  var r1 = parseInt(c1.substring(1, 3), 16);","  var g1 = parseInt(c1.substring(3, 5), 16);","  var b1 = parseInt(c1.substring(5, 7), 16);","  var r2 = parseInt(c2.substring(1, 3), 16);","  var g2 = parseInt(c2.substring(3, 5), 16);","  var b2 = parseInt(c2.substring(5, 7), 16);","  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);","  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);","  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);","  r = ('0' + (r || 0).toString(16)).slice(-2);","  g = ('0' + (g || 0).toString(16)).slice(-2);","  b = ('0' + (b || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+o+", "+r+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists={},t.JavaScript.lists_create_empty=function(n){return["[]",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.lists_create_with=function(n){for(var o=Array(n.itemCount_),r=0;r<n.itemCount_;r++)o[r]=t.JavaScript.valueToCode(n,"ADD"+r,t.JavaScript.ORDER_NONE)||"null";return["["+o.join(", ")+"]",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.lists_repeat=function(n){return[t.JavaScript.provideFunction_("listsRepeat",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(value, n) {","  var array = [];","  for (var i = 0; i < n; i++) {","    array[i] = value;","  }","  return array;","}"])+"("+(t.JavaScript.valueToCode(n,"ITEM",t.JavaScript.ORDER_NONE)||"null")+", "+(n=t.JavaScript.valueToCode(n,"NUM",t.JavaScript.ORDER_NONE)||"0")+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_length=function(n){return[(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"[]")+".length",t.JavaScript.ORDER_MEMBER]},t.JavaScript.lists_isEmpty=function(n){return["!"+(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"[]")+".length",t.JavaScript.ORDER_LOGICAL_NOT]},t.JavaScript.lists_indexOf=function(n){var o="FIRST"==n.getFieldValue("END")?"indexOf":"lastIndexOf",r=t.JavaScript.valueToCode(n,"FIND",t.JavaScript.ORDER_NONE)||"''";return o=(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"[]")+"."+o+"("+r+")",n.workspace.options.oneBasedIndex?[o+" + 1",t.JavaScript.ORDER_ADDITION]:[o,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_getIndex=function(n){var o=n.getFieldValue("MODE")||"GET",r=n.getFieldValue("WHERE")||"FROM_START",p=t.JavaScript.valueToCode(n,"VALUE","RANDOM"==r?t.JavaScript.ORDER_NONE:t.JavaScript.ORDER_MEMBER)||"[]";switch(r){case"FIRST":if("GET"==o)return[p+"[0]",t.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==o)return[p+".shift()",t.JavaScript.ORDER_MEMBER];if("REMOVE"==o)return p+".shift();\n";break;case"LAST":if("GET"==o)return[p+".slice(-1)[0]",t.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==o)return[p+".pop()",t.JavaScript.ORDER_MEMBER];if("REMOVE"==o)return p+".pop();\n";break;case"FROM_START":if(n=t.JavaScript.getAdjusted(n,"AT"),"GET"==o)return[p+"["+n+"]",t.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==o)return[p+".splice("+n+", 1)[0]",t.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==o)return p+".splice("+n+", 1);\n";break;case"FROM_END":if(n=t.JavaScript.getAdjusted(n,"AT",1,!0),"GET"==o)return[p+".slice("+n+")[0]",t.JavaScript.ORDER_FUNCTION_CALL];if("GET_REMOVE"==o)return[p+".splice("+n+", 1)[0]",t.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==o)return p+".splice("+n+", 1);";break;case"RANDOM":if(p=t.JavaScript.provideFunction_("listsGetRandomItem",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list, remove) {","  var x = Math.floor(Math.random() * list.length);","  if (remove) {","    return list.splice(x, 1)[0];","  } else {","    return list[x];","  }","}"])+"("+p+", "+("GET"!=o)+")","GET"==o||"GET_REMOVE"==o)return[p,t.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==o)return p+";\n"}throw Error("Unhandled combination (lists_getIndex).")},t.JavaScript.lists_setIndex=function(n){function o(){if(r.match(/^\w+$/))return"";var x=t.JavaScript.nameDB_.getDistinctName("tmpList",t.VARIABLE_CATEGORY_NAME),k="var "+x+" = "+r+";\n";return r=x,k}var r=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_MEMBER)||"[]",p=n.getFieldValue("MODE")||"GET",b=n.getFieldValue("WHERE")||"FROM_START",I=t.JavaScript.valueToCode(n,"TO",t.JavaScript.ORDER_ASSIGNMENT)||"null";switch(b){case"FIRST":if("SET"==p)return r+"[0] = "+I+";\n";if("INSERT"==p)return r+".unshift("+I+");\n";break;case"LAST":if("SET"==p)return(n=o())+(r+"[")+r+".length - 1] = "+I+";\n";if("INSERT"==p)return r+".push("+I+");\n";break;case"FROM_START":if(b=t.JavaScript.getAdjusted(n,"AT"),"SET"==p)return r+"["+b+"] = "+I+";\n";if("INSERT"==p)return r+".splice("+b+", 0, "+I+");\n";break;case"FROM_END":if(b=t.JavaScript.getAdjusted(n,"AT",1,!1,t.JavaScript.ORDER_SUBTRACTION),n=o(),"SET"==p)return n+(r+"[")+r+".length - "+b+"] = "+I+";\n";if("INSERT"==p)return n+(r+".splice(")+r+".length - "+b+", 0, "+I+");\n";break;case"RANDOM":if(n=o(),n+="var "+(b=t.JavaScript.nameDB_.getDistinctName("tmpX",t.VARIABLE_CATEGORY_NAME))+" = Math.floor(Math.random() * "+r+".length);\n","SET"==p)return n+(r+"[")+b+"] = "+I+";\n";if("INSERT"==p)return n+(r+".splice(")+b+", 0, "+I+");\n"}throw Error("Unhandled combination (lists_setIndex).")},t.JavaScript.lists.getIndex_=function(n,o,r){return"FIRST"==o?"0":"FROM_END"==o?n+".length - 1 - "+r:"LAST"==o?n+".length - 1":r},t.JavaScript.lists_getSublist=function(n){var o=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_MEMBER)||"[]",r=n.getFieldValue("WHERE1"),p=n.getFieldValue("WHERE2");if("FIRST"==r&&"LAST"==p)o+=".slice(0)";else if(o.match(/^\w+$/)||"FROM_END"!=r&&"FROM_START"==p){switch(r){case"FROM_START":var b=t.JavaScript.getAdjusted(n,"AT1");break;case"FROM_END":b=o+".length - "+(b=t.JavaScript.getAdjusted(n,"AT1",1,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"FIRST":b="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(p){case"FROM_START":n=t.JavaScript.getAdjusted(n,"AT2",1);break;case"FROM_END":n=o+".length - "+(n=t.JavaScript.getAdjusted(n,"AT2",0,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"LAST":n=o+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}o=o+".slice("+b+", "+n+")"}else{b=t.JavaScript.getAdjusted(n,"AT1"),n=t.JavaScript.getAdjusted(n,"AT2");var I=t.JavaScript.lists.getIndex_,x={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};o=t.JavaScript.provideFunction_("subsequence"+x[r]+x[p],["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+("FROM_END"==r||"FROM_START"==r?", at1":"")+("FROM_END"==p||"FROM_START"==p?", at2":"")+") {","  var start = "+I("sequence",r,"at1")+";","  var end = "+I("sequence",p,"at2")+" + 1;","  return sequence.slice(start, end);","}"])+"("+o+("FROM_END"==r||"FROM_START"==r?", "+b:"")+("FROM_END"==p||"FROM_START"==p?", "+n:"")+")"}return[o,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_sort=function(n){var o=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_FUNCTION_CALL)||"[]",r="1"===n.getFieldValue("DIRECTION")?1:-1;return n=n.getFieldValue("TYPE"),[o+".slice().sort("+t.JavaScript.provideFunction_("listsGetSortCompare",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(type, direction) {","  var compareFuncs = {",'    "NUMERIC": function(a, b) {',"        return Number(a) - Number(b); },",'    "TEXT": function(a, b) {',"        return a.toString() > b.toString() ? 1 : -1; },",'    "IGNORE_CASE": function(a, b) {',"        return a.toString().toLowerCase() > b.toString().toLowerCase() ? 1 : -1; },","  };","  var compare = compareFuncs[type];","  return function(a, b) { return compare(a, b) * direction; }","}"])+'("'+n+'", '+r+"))",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_split=function(n){var o=t.JavaScript.valueToCode(n,"INPUT",t.JavaScript.ORDER_MEMBER),r=t.JavaScript.valueToCode(n,"DELIM",t.JavaScript.ORDER_NONE)||"''";if("SPLIT"==(n=n.getFieldValue("MODE")))o||(o="''"),n="split";else{if("JOIN"!=n)throw Error("Unknown mode: "+n);o||(o="[]"),n="join"}return[o+"."+n+"("+r+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_reverse=function(n){return[(t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_FUNCTION_CALL)||"[]")+".slice().reverse()",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.logic={},t.JavaScript.controls_if=function(n){var o=0,r="";t.JavaScript.STATEMENT_PREFIX&&(r+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,n));do{var p=t.JavaScript.valueToCode(n,"IF"+o,t.JavaScript.ORDER_NONE)||"false",b=t.JavaScript.statementToCode(n,"DO"+o);t.JavaScript.STATEMENT_SUFFIX&&(b=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n),t.JavaScript.INDENT)+b),r+=(0<o?" else ":"")+"if ("+p+") {\n"+b+"}",++o}while(n.getInput("IF"+o));return(n.getInput("ELSE")||t.JavaScript.STATEMENT_SUFFIX)&&(b=t.JavaScript.statementToCode(n,"ELSE"),t.JavaScript.STATEMENT_SUFFIX&&(b=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n),t.JavaScript.INDENT)+b),r+=" else {\n"+b+"}"),r+"\n"},t.JavaScript.controls_ifelse=t.JavaScript.controls_if,t.JavaScript.logic_compare=function(n){var o={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[n.getFieldValue("OP")],r="=="==o||"!="==o?t.JavaScript.ORDER_EQUALITY:t.JavaScript.ORDER_RELATIONAL;return[(t.JavaScript.valueToCode(n,"A",r)||"0")+" "+o+" "+(n=t.JavaScript.valueToCode(n,"B",r)||"0"),r]},t.JavaScript.logic_operation=function(n){var o="AND"==n.getFieldValue("OP")?"&&":"||",r="&&"==o?t.JavaScript.ORDER_LOGICAL_AND:t.JavaScript.ORDER_LOGICAL_OR,p=t.JavaScript.valueToCode(n,"A",r);if(n=t.JavaScript.valueToCode(n,"B",r),p||n){var b="&&"==o?"true":"false";p||(p=b),n||(n=b)}else n=p="false";return[p+" "+o+" "+n,r]},t.JavaScript.logic_negate=function(n){var o=t.JavaScript.ORDER_LOGICAL_NOT;return["!"+(t.JavaScript.valueToCode(n,"BOOL",o)||"true"),o]},t.JavaScript.logic_boolean=function(n){return["TRUE"==n.getFieldValue("BOOL")?"true":"false",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.logic_null=function(n){return["null",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.logic_ternary=function(n){return[(t.JavaScript.valueToCode(n,"IF",t.JavaScript.ORDER_CONDITIONAL)||"false")+" ? "+(t.JavaScript.valueToCode(n,"THEN",t.JavaScript.ORDER_CONDITIONAL)||"null")+" : "+(n=t.JavaScript.valueToCode(n,"ELSE",t.JavaScript.ORDER_CONDITIONAL)||"null"),t.JavaScript.ORDER_CONDITIONAL]},t.JavaScript.loops={},t.JavaScript.controls_repeat_ext=function(n){var o=n.getField("TIMES")?String(Number(n.getFieldValue("TIMES"))):t.JavaScript.valueToCode(n,"TIMES",t.JavaScript.ORDER_ASSIGNMENT)||"0",r=t.JavaScript.statementToCode(n,"DO");r=t.JavaScript.addLoopTrap(r,n),n="";var p=t.JavaScript.nameDB_.getDistinctName("count",t.VARIABLE_CATEGORY_NAME),b=o;return o.match(/^\w+$/)||t.isNumber(o)||(n+="var "+(b=t.JavaScript.nameDB_.getDistinctName("repeat_end",t.VARIABLE_CATEGORY_NAME))+" = "+o+";\n"),n+"for (var "+p+" = 0; "+p+" < "+b+"; "+p+"++) {\n"+r+"}\n"},t.JavaScript.controls_repeat=t.JavaScript.controls_repeat_ext,t.JavaScript.controls_whileUntil=function(n){var o="UNTIL"==n.getFieldValue("MODE"),r=t.JavaScript.valueToCode(n,"BOOL",o?t.JavaScript.ORDER_LOGICAL_NOT:t.JavaScript.ORDER_NONE)||"false",p=t.JavaScript.statementToCode(n,"DO");return o&&(r="!"+r),"while ("+r+") {\n"+(p=t.JavaScript.addLoopTrap(p,n))+"}\n"},t.JavaScript.controls_for=function(n){var o=t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME),r=t.JavaScript.valueToCode(n,"FROM",t.JavaScript.ORDER_ASSIGNMENT)||"0",p=t.JavaScript.valueToCode(n,"TO",t.JavaScript.ORDER_ASSIGNMENT)||"0",b=t.JavaScript.valueToCode(n,"BY",t.JavaScript.ORDER_ASSIGNMENT)||"1",I=t.JavaScript.statementToCode(n,"DO");if(I=t.JavaScript.addLoopTrap(I,n),t.isNumber(r)&&t.isNumber(p)&&t.isNumber(b)){var x=Number(r)<=Number(p);n="for ("+o+" = "+r+"; "+o+(x?" <= ":" >= ")+p+"; "+o,n=(1==(o=Math.abs(Number(b)))?n+(x?"++":"--"):n+(x?" += ":" -= ")+o)+") {\n"+I+"}\n"}else n="",x=r,r.match(/^\w+$/)||t.isNumber(r)||(n+="var "+(x=t.JavaScript.nameDB_.getDistinctName(o+"_start",t.VARIABLE_CATEGORY_NAME))+" = "+r+";\n"),r=p,p.match(/^\w+$/)||t.isNumber(p)||(n+="var "+(r=t.JavaScript.nameDB_.getDistinctName(o+"_end",t.VARIABLE_CATEGORY_NAME))+" = "+p+";\n"),n+="var "+(p=t.JavaScript.nameDB_.getDistinctName(o+"_inc",t.VARIABLE_CATEGORY_NAME))+" = ",n=(n=t.isNumber(b)?n+(Math.abs(b)+";\n"):n+"Math.abs("+b+");\n")+"if ("+x+" > "+r+") {\n"+(t.JavaScript.INDENT+p)+" = -"+p+";\n",n+="}\n",n+="for ("+o+" = "+x+"; "+p+" >= 0 ? "+o+" <= "+r+" : "+o+" >= "+r+"; "+o+" += "+p+") {\n"+I+"}\n";return n},t.JavaScript.controls_forEach=function(n){var o=t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME),r=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_ASSIGNMENT)||"[]",p=t.JavaScript.statementToCode(n,"DO");p=t.JavaScript.addLoopTrap(p,n),n="";var b=r;return r.match(/^\w+$/)||(n+="var "+(b=t.JavaScript.nameDB_.getDistinctName(o+"_list",t.VARIABLE_CATEGORY_NAME))+" = "+r+";\n"),n+"for (var "+(r=t.JavaScript.nameDB_.getDistinctName(o+"_index",t.VARIABLE_CATEGORY_NAME))+" in "+b+") {\n"+(p=t.JavaScript.INDENT+o+" = "+b+"["+r+"];\n"+p)+"}\n"},t.JavaScript.controls_flow_statements=function(n){var o="";if(t.JavaScript.STATEMENT_PREFIX&&(o+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,n)),t.JavaScript.STATEMENT_SUFFIX&&(o+=t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n)),t.JavaScript.STATEMENT_PREFIX){var r=t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(n);r&&!r.suppressPrefixSuffix&&(o+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,r))}switch(n.getFieldValue("FLOW")){case"BREAK":return o+"break;\n";case"CONTINUE":return o+"continue;\n"}throw Error("Unknown flow statement.")},t.JavaScript.math={},t.JavaScript.math_number=function(n){return[n=Number(n.getFieldValue("NUM")),0<=n?t.JavaScript.ORDER_ATOMIC:t.JavaScript.ORDER_UNARY_NEGATION]},t.JavaScript.math_arithmetic=function(n){var o={ADD:[" + ",t.JavaScript.ORDER_ADDITION],MINUS:[" - ",t.JavaScript.ORDER_SUBTRACTION],MULTIPLY:[" * ",t.JavaScript.ORDER_MULTIPLICATION],DIVIDE:[" / ",t.JavaScript.ORDER_DIVISION],POWER:[null,t.JavaScript.ORDER_NONE]}[n.getFieldValue("OP")],r=o[0],p=t.JavaScript.valueToCode(n,"A",o=o[1])||"0";return n=t.JavaScript.valueToCode(n,"B",o)||"0",r?[p+r+n,o]:["Math.pow("+p+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_single=function(n){var o=n.getFieldValue("OP");if("NEG"==o)return"-"==(n=t.JavaScript.valueToCode(n,"NUM",t.JavaScript.ORDER_UNARY_NEGATION)||"0")[0]&&(n=" "+n),["-"+n,t.JavaScript.ORDER_UNARY_NEGATION];switch(n="SIN"==o||"COS"==o||"TAN"==o?t.JavaScript.valueToCode(n,"NUM",t.JavaScript.ORDER_DIVISION)||"0":t.JavaScript.valueToCode(n,"NUM",t.JavaScript.ORDER_NONE)||"0",o){case"ABS":var r="Math.abs("+n+")";break;case"ROOT":r="Math.sqrt("+n+")";break;case"LN":r="Math.log("+n+")";break;case"EXP":r="Math.exp("+n+")";break;case"POW10":r="Math.pow(10,"+n+")";break;case"ROUND":r="Math.round("+n+")";break;case"ROUNDUP":r="Math.ceil("+n+")";break;case"ROUNDDOWN":r="Math.floor("+n+")";break;case"SIN":r="Math.sin("+n+" / 180 * Math.PI)";break;case"COS":r="Math.cos("+n+" / 180 * Math.PI)";break;case"TAN":r="Math.tan("+n+" / 180 * Math.PI)"}if(r)return[r,t.JavaScript.ORDER_FUNCTION_CALL];switch(o){case"LOG10":r="Math.log("+n+") / Math.log(10)";break;case"ASIN":r="Math.asin("+n+") / Math.PI * 180";break;case"ACOS":r="Math.acos("+n+") / Math.PI * 180";break;case"ATAN":r="Math.atan("+n+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+o)}return[r,t.JavaScript.ORDER_DIVISION]},t.JavaScript.math_constant=function(n){return{PI:["Math.PI",t.JavaScript.ORDER_MEMBER],E:["Math.E",t.JavaScript.ORDER_MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",t.JavaScript.ORDER_DIVISION],SQRT2:["Math.SQRT2",t.JavaScript.ORDER_MEMBER],SQRT1_2:["Math.SQRT1_2",t.JavaScript.ORDER_MEMBER],INFINITY:["Infinity",t.JavaScript.ORDER_ATOMIC]}[n.getFieldValue("CONSTANT")]},t.JavaScript.math_number_property=function(n){var o=t.JavaScript.valueToCode(n,"NUMBER_TO_CHECK",t.JavaScript.ORDER_MODULUS)||"0",r=n.getFieldValue("PROPERTY");if("PRIME"==r)return[t.JavaScript.provideFunction_("mathIsPrime",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(n) {","  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods","  if (n == 2 || n == 3) {","    return true;","  }","  // False if n is NaN, negative, is 1, or not whole.","  // And false if n is divisible by 2 or 3.","  if (isNaN(n) || n <= 1 || n % 1 != 0 || n % 2 == 0 || n % 3 == 0) {","    return false;","  }","  // Check all the numbers of form 6k +/- 1, up to sqrt(n).","  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {","    if (n % (x - 1) == 0 || n % (x + 1) == 0) {","      return false;","    }","  }","  return true;","}"])+"("+o+")",t.JavaScript.ORDER_FUNCTION_CALL];switch(r){case"EVEN":var p=o+" % 2 == 0";break;case"ODD":p=o+" % 2 == 1";break;case"WHOLE":p=o+" % 1 == 0";break;case"POSITIVE":p=o+" > 0";break;case"NEGATIVE":p=o+" < 0";break;case"DIVISIBLE_BY":p=o+" % "+(n=t.JavaScript.valueToCode(n,"DIVISOR",t.JavaScript.ORDER_MODULUS)||"0")+" == 0"}return[p,t.JavaScript.ORDER_EQUALITY]},t.JavaScript.math_change=function(n){var o=t.JavaScript.valueToCode(n,"DELTA",t.JavaScript.ORDER_ADDITION)||"0";return(n=t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME))+" = (typeof "+n+" == 'number' ? "+n+" : 0) + "+o+";\n"},t.JavaScript.math_round=t.JavaScript.math_single,t.JavaScript.math_trig=t.JavaScript.math_single,t.JavaScript.math_on_list=function(n){var o=n.getFieldValue("OP");switch(o){case"SUM":n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_MEMBER)||"[]",n+=".reduce(function(x, y) {return x + y;})";break;case"MIN":n="Math.min.apply(null, "+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"MAX":n="Math.max.apply(null, "+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"AVERAGE":n=(o=t.JavaScript.provideFunction_("mathMean",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {","  return myList.reduce(function(x, y) {return x + y;}) / myList.length;","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"MEDIAN":n=(o=t.JavaScript.provideFunction_("mathMedian",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {","  var localList = myList.filter(function (x) {return typeof x == 'number';});","  if (!localList.length) return null;","  localList.sort(function(a, b) {return b - a;});","  if (localList.length % 2 == 0) {","    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;","  } else {","    return localList[(localList.length - 1) / 2];","  }","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"MODE":n=(o=t.JavaScript.provideFunction_("mathModes",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(values) {","  var modes = [];","  var counts = [];","  var maxCount = 0;","  for (var i = 0; i < values.length; i++) {","    var value = values[i];","    var found = false;","    var thisCount;","    for (var j = 0; j < counts.length; j++) {","      if (counts[j][0] === value) {","        thisCount = ++counts[j][1];","        found = true;","        break;","      }","    }","    if (!found) {","      counts.push([value, 1]);","      thisCount = 1;","    }","    maxCount = Math.max(thisCount, maxCount);","  }","  for (var j = 0; j < counts.length; j++) {","    if (counts[j][1] == maxCount) {","        modes.push(counts[j][0]);","    }","  }","  return modes;","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"STD_DEV":n=(o=t.JavaScript.provideFunction_("mathStandardDeviation",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(numbers) {","  var n = numbers.length;","  if (!n) return null;","  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;","  var variance = 0;","  for (var j = 0; j < n; j++) {","    variance += Math.pow(numbers[j] - mean, 2);","  }","  variance = variance / n;","  return Math.sqrt(variance);","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"RANDOM":n=(o=t.JavaScript.provideFunction_("mathRandomList",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list) {","  var x = Math.floor(Math.random() * list.length);","  return list[x];","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;default:throw Error("Unknown operator: "+o)}return[n,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_modulo=function(n){return[(t.JavaScript.valueToCode(n,"DIVIDEND",t.JavaScript.ORDER_MODULUS)||"0")+" % "+(n=t.JavaScript.valueToCode(n,"DIVISOR",t.JavaScript.ORDER_MODULUS)||"0"),t.JavaScript.ORDER_MODULUS]},t.JavaScript.math_constrain=function(n){return["Math.min(Math.max("+(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_NONE)||"0")+", "+(t.JavaScript.valueToCode(n,"LOW",t.JavaScript.ORDER_NONE)||"0")+"), "+(n=t.JavaScript.valueToCode(n,"HIGH",t.JavaScript.ORDER_NONE)||"Infinity")+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_random_int=function(n){var o=t.JavaScript.valueToCode(n,"FROM",t.JavaScript.ORDER_NONE)||"0";return n=t.JavaScript.valueToCode(n,"TO",t.JavaScript.ORDER_NONE)||"0",[t.JavaScript.provideFunction_("mathRandomInt",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(a, b) {","  if (a > b) {","    // Swap a and b to ensure a is smaller.","    var c = a;","    a = b;","    b = c;","  }","  return Math.floor(Math.random() * (b - a + 1) + a);","}"])+"("+o+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_random_float=function(n){return["Math.random()",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_atan2=function(n){var o=t.JavaScript.valueToCode(n,"X",t.JavaScript.ORDER_NONE)||"0";return["Math.atan2("+(t.JavaScript.valueToCode(n,"Y",t.JavaScript.ORDER_NONE)||"0")+", "+o+") / Math.PI * 180",t.JavaScript.ORDER_DIVISION]},t.JavaScript.procedures={},t.JavaScript.procedures_defreturn=function(n){var o=t.JavaScript.nameDB_.getName(n.getFieldValue("NAME"),t.PROCEDURE_CATEGORY_NAME),r="";t.JavaScript.STATEMENT_PREFIX&&(r+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,n)),t.JavaScript.STATEMENT_SUFFIX&&(r+=t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n)),r&&(r=t.JavaScript.prefixLines(r,t.JavaScript.INDENT));var p="";t.JavaScript.INFINITE_LOOP_TRAP&&(p=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.INFINITE_LOOP_TRAP,n),t.JavaScript.INDENT));var b=t.JavaScript.statementToCode(n,"STACK"),I=t.JavaScript.valueToCode(n,"RETURN",t.JavaScript.ORDER_NONE)||"",x="";b&&I&&(x=r),I&&(I=t.JavaScript.INDENT+"return "+I+";\n");for(var k=[],Y=n.getVars(),X=0;X<Y.length;X++)k[X]=t.JavaScript.nameDB_.getName(Y[X],t.VARIABLE_CATEGORY_NAME);return r="function "+o+"("+k.join(", ")+") {\n"+r+p+b+x+I+"}",r=t.JavaScript.scrub_(n,r),t.JavaScript.definitions_["%"+o]=r,null},t.JavaScript.procedures_defnoreturn=t.JavaScript.procedures_defreturn,t.JavaScript.procedures_callreturn=function(n){for(var o=t.JavaScript.nameDB_.getName(n.getFieldValue("NAME"),t.PROCEDURE_CATEGORY_NAME),r=[],p=n.getVars(),b=0;b<p.length;b++)r[b]=t.JavaScript.valueToCode(n,"ARG"+b,t.JavaScript.ORDER_NONE)||"null";return[o+"("+r.join(", ")+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.procedures_callnoreturn=function(n){return t.JavaScript.procedures_callreturn(n)[0]+";\n"},t.JavaScript.procedures_ifreturn=function(n){var o="if ("+(t.JavaScript.valueToCode(n,"CONDITION",t.JavaScript.ORDER_NONE)||"false")+") {\n";return t.JavaScript.STATEMENT_SUFFIX&&(o+=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n),t.JavaScript.INDENT)),n.hasReturnValue_?(n=t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_NONE)||"null",o+=t.JavaScript.INDENT+"return "+n+";\n"):o+=t.JavaScript.INDENT+"return;\n",o+"}\n"},t.JavaScript.texts={},t.JavaScript.text=function(n){return[t.JavaScript.quote_(n.getFieldValue("TEXT")),t.JavaScript.ORDER_ATOMIC]},t.JavaScript.text_multiline=function(n){var o=-1!=(n=t.JavaScript.multiline_quote_(n.getFieldValue("TEXT"))).indexOf("+")?t.JavaScript.ORDER_ADDITION:t.JavaScript.ORDER_ATOMIC;return[n,o]},t.JavaScript.text.forceString_=function(n){return t.JavaScript.text.forceString_.strRegExp.test(n)?[n,t.JavaScript.ORDER_ATOMIC]:["String("+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text.forceString_.strRegExp=/^\s*'([^']|\\')*'\s*$/,t.JavaScript.text_join=function(n){switch(n.itemCount_){case 0:return["''",t.JavaScript.ORDER_ATOMIC];case 1:return n=t.JavaScript.valueToCode(n,"ADD0",t.JavaScript.ORDER_NONE)||"''",t.JavaScript.text.forceString_(n);case 2:var o=t.JavaScript.valueToCode(n,"ADD0",t.JavaScript.ORDER_NONE)||"''";return n=t.JavaScript.valueToCode(n,"ADD1",t.JavaScript.ORDER_NONE)||"''",[n=t.JavaScript.text.forceString_(o)[0]+" + "+t.JavaScript.text.forceString_(n)[0],t.JavaScript.ORDER_ADDITION];default:o=Array(n.itemCount_);for(var r=0;r<n.itemCount_;r++)o[r]=t.JavaScript.valueToCode(n,"ADD"+r,t.JavaScript.ORDER_NONE)||"''";return[n="["+o.join(",")+"].join('')",t.JavaScript.ORDER_FUNCTION_CALL]}},t.JavaScript.text_append=function(n){var o=t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME);return n=t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''",o+" += "+t.JavaScript.text.forceString_(n)[0]+";\n"},t.JavaScript.text_length=function(n){return[(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"''")+".length",t.JavaScript.ORDER_MEMBER]},t.JavaScript.text_isEmpty=function(n){return["!"+(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"''")+".length",t.JavaScript.ORDER_LOGICAL_NOT]},t.JavaScript.text_indexOf=function(n){var o="FIRST"==n.getFieldValue("END")?"indexOf":"lastIndexOf",r=t.JavaScript.valueToCode(n,"FIND",t.JavaScript.ORDER_NONE)||"''";return o=(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"''")+"."+o+"("+r+")",n.workspace.options.oneBasedIndex?[o+" + 1",t.JavaScript.ORDER_ADDITION]:[o,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_charAt=function(n){var o=n.getFieldValue("WHERE")||"FROM_START",r=t.JavaScript.valueToCode(n,"VALUE","RANDOM"==o?t.JavaScript.ORDER_NONE:t.JavaScript.ORDER_MEMBER)||"''";switch(o){case"FIRST":return[r+".charAt(0)",t.JavaScript.ORDER_FUNCTION_CALL];case"LAST":return[r+".slice(-1)",t.JavaScript.ORDER_FUNCTION_CALL];case"FROM_START":return[r+".charAt("+(n=t.JavaScript.getAdjusted(n,"AT"))+")",t.JavaScript.ORDER_FUNCTION_CALL];case"FROM_END":return[r+".slice("+(n=t.JavaScript.getAdjusted(n,"AT",1,!0))+").charAt(0)",t.JavaScript.ORDER_FUNCTION_CALL];case"RANDOM":return[t.JavaScript.provideFunction_("textRandomLetter",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(text) {","  var x = Math.floor(Math.random() * text.length);","  return text[x];","}"])+"("+r+")",t.JavaScript.ORDER_FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},t.JavaScript.text.getIndex_=function(n,o,r){return"FIRST"==o?"0":"FROM_END"==o?n+".length - 1 - "+r:"LAST"==o?n+".length - 1":r},t.JavaScript.text_getSubstring=function(n){var o=n.getFieldValue("WHERE1"),r=n.getFieldValue("WHERE2"),p="FROM_END"!=o&&"LAST"!=o&&"FROM_END"!=r&&"LAST"!=r,b=t.JavaScript.valueToCode(n,"STRING",p?t.JavaScript.ORDER_MEMBER:t.JavaScript.ORDER_NONE)||"''";if("FIRST"==o&&"LAST"==r)return[b,t.JavaScript.ORDER_NONE];if(b.match(/^'?\w+'?$/)||p){switch(o){case"FROM_START":p=t.JavaScript.getAdjusted(n,"AT1");break;case"FROM_END":p=b+".length - "+(p=t.JavaScript.getAdjusted(n,"AT1",1,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"FIRST":p="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(r){case"FROM_START":n=t.JavaScript.getAdjusted(n,"AT2",1);break;case"FROM_END":n=b+".length - "+(n=t.JavaScript.getAdjusted(n,"AT2",0,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"LAST":n=b+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}o=b+".slice("+p+", "+n+")"}else{p=t.JavaScript.getAdjusted(n,"AT1"),n=t.JavaScript.getAdjusted(n,"AT2");var I=t.JavaScript.text.getIndex_,x={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};o=t.JavaScript.provideFunction_("subsequence"+x[o]+x[r],["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+("FROM_END"==o||"FROM_START"==o?", at1":"")+("FROM_END"==r||"FROM_START"==r?", at2":"")+") {","  var start = "+I("sequence",o,"at1")+";","  var end = "+I("sequence",r,"at2")+" + 1;","  return sequence.slice(start, end);","}"])+"("+b+("FROM_END"==o||"FROM_START"==o?", "+p:"")+("FROM_END"==r||"FROM_START"==r?", "+n:"")+")"}return[o,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_changeCase=function(n){var o={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[n.getFieldValue("CASE")];return n=t.JavaScript.valueToCode(n,"TEXT",o?t.JavaScript.ORDER_MEMBER:t.JavaScript.ORDER_NONE)||"''",[o?n+o:t.JavaScript.provideFunction_("textToTitleCase",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(str) {","  return str.replace(/\\S+/g,","      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});","}"])+"("+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_trim=function(n){var o={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[n.getFieldValue("MODE")];return[(t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_MEMBER)||"''")+o,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_print=function(n){return"window.alert("+(t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''")+");\n"},t.JavaScript.text_prompt_ext=function(n){var o="window.prompt("+(n.getField("TEXT")?t.JavaScript.quote_(n.getFieldValue("TEXT")):t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''")+")";return"NUMBER"==n.getFieldValue("TYPE")&&(o="Number("+o+")"),[o,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_prompt=t.JavaScript.text_prompt_ext,t.JavaScript.text_count=function(n){var o=t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''";return n=t.JavaScript.valueToCode(n,"SUB",t.JavaScript.ORDER_NONE)||"''",[t.JavaScript.provideFunction_("textCount",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle) {","  if (needle.length === 0) {","    return haystack.length + 1;","  } else {","    return haystack.split(needle).length - 1;","  }","}"])+"("+o+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_replace=function(n){var o=t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''",r=t.JavaScript.valueToCode(n,"FROM",t.JavaScript.ORDER_NONE)||"''";return n=t.JavaScript.valueToCode(n,"TO",t.JavaScript.ORDER_NONE)||"''",[t.JavaScript.provideFunction_("textReplace",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle, replacement) {",'  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g,"\\\\$1")','                 .replace(/\\x08/g,"\\\\x08");',"  return haystack.replace(new RegExp(needle, 'g'), replacement);","}"])+"("+o+", "+r+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_reverse=function(n){return[(t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_MEMBER)||"''")+".split('').reverse().join('')",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.variables={},t.JavaScript.variables_get=function(n){return[t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME),t.JavaScript.ORDER_ATOMIC]},t.JavaScript.variables_set=function(n){var o=t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_ASSIGNMENT)||"0";return t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME)+" = "+o+";\n"},t.JavaScript.variablesDynamic={},t.JavaScript.variables_get_dynamic=t.JavaScript.variables_get,t.JavaScript.variables_set_dynamic=t.JavaScript.variables_set,t.JavaScript})?T.apply(U,a):T)&&(B.exports=e)},59090:function(B,U,v){var T,a,e;a=[v(81846)],void 0!==(e="function"==typeof(T=function(t){return(t={Msg:{}}).Msg.ADD_COMMENT="Add Comment",t.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",t.Msg.CHANGE_VALUE_TITLE="Change value:",t.Msg.CLEAN_UP="Clean up Blocks",t.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",t.Msg.COLLAPSE_ALL="Collapse Blocks",t.Msg.COLLAPSE_BLOCK="Collapse Block",t.Msg.COLOUR_BLEND_COLOUR1="colour 1",t.Msg.COLOUR_BLEND_COLOUR2="colour 2",t.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",t.Msg.COLOUR_BLEND_RATIO="ratio",t.Msg.COLOUR_BLEND_TITLE="blend",t.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",t.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",t.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",t.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",t.Msg.COLOUR_RANDOM_TITLE="random colour",t.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",t.Msg.COLOUR_RGB_BLUE="blue",t.Msg.COLOUR_RGB_GREEN="green",t.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",t.Msg.COLOUR_RGB_RED="red",t.Msg.COLOUR_RGB_TITLE="colour with",t.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",t.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",t.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",t.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",t.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",t.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",t.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",t.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",t.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",t.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",t.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",t.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",t.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",t.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",t.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",t.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",t.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",t.Msg.CONTROLS_IF_MSG_ELSE="else",t.Msg.CONTROLS_IF_MSG_ELSEIF="else if",t.Msg.CONTROLS_IF_MSG_IF="if",t.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",t.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",t.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",t.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",t.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",t.Msg.CONTROLS_REPEAT_INPUT_DO="do",t.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",t.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",t.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",t.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",t.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",t.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",t.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",t.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",t.Msg.DELETE_BLOCK="Delete Block",t.Msg.DELETE_VARIABLE="Delete the '%1' variable",t.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",t.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",t.Msg.DISABLE_BLOCK="Disable Block",t.Msg.DUPLICATE_BLOCK="Duplicate",t.Msg.DUPLICATE_COMMENT="Duplicate Comment",t.Msg.ENABLE_BLOCK="Enable Block",t.Msg.EXPAND_ALL="Expand Blocks",t.Msg.EXPAND_BLOCK="Expand Block",t.Msg.EXTERNAL_INPUTS="External Inputs",t.Msg.HELP="Help",t.Msg.INLINE_INPUTS="Inline Inputs",t.Msg.IOS_CANCEL="Cancel",t.Msg.IOS_ERROR="Error",t.Msg.IOS_OK="OK",t.Msg.IOS_PROCEDURES_ADD_INPUT="+ Add Input",t.Msg.IOS_PROCEDURES_ALLOW_STATEMENTS="Allow statements",t.Msg.IOS_PROCEDURES_DUPLICATE_INPUTS_ERROR="This function has duplicate inputs.",t.Msg.IOS_PROCEDURES_INPUTS="INPUTS",t.Msg.IOS_VARIABLES_ADD_BUTTON="Add",t.Msg.IOS_VARIABLES_ADD_VARIABLE="+ Add Variable",t.Msg.IOS_VARIABLES_DELETE_BUTTON="Delete",t.Msg.IOS_VARIABLES_EMPTY_NAME_ERROR="You can't use an empty variable name.",t.Msg.IOS_VARIABLES_RENAME_BUTTON="Rename",t.Msg.IOS_VARIABLES_VARIABLE_NAME="Variable name",t.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",t.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",t.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",t.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",t.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",t.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",t.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",t.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",t.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",t.Msg.LISTS_GET_INDEX_FIRST="first",t.Msg.LISTS_GET_INDEX_FROM_END="# from end",t.Msg.LISTS_GET_INDEX_FROM_START="#",t.Msg.LISTS_GET_INDEX_GET="get",t.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",t.Msg.LISTS_GET_INDEX_LAST="last",t.Msg.LISTS_GET_INDEX_RANDOM="random",t.Msg.LISTS_GET_INDEX_REMOVE="remove",t.Msg.LISTS_GET_INDEX_TAIL="",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",t.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",t.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",t.Msg.LISTS_GET_SUBLIST_END_LAST="to last",t.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",t.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",t.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",t.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",t.Msg.LISTS_GET_SUBLIST_TAIL="",t.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",t.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",t.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",t.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",t.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",t.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",t.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",t.Msg.LISTS_INLIST="in list",t.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",t.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",t.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",t.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",t.Msg.LISTS_LENGTH_TITLE="length of %1",t.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",t.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",t.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",t.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",t.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",t.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",t.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",t.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",t.Msg.LISTS_SET_INDEX_INPUT_TO="as",t.Msg.LISTS_SET_INDEX_INSERT="insert at",t.Msg.LISTS_SET_INDEX_SET="set",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",t.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",t.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",t.Msg.LISTS_SORT_ORDER_DESCENDING="descending",t.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",t.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",t.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",t.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",t.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",t.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",t.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",t.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",t.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",t.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",t.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",t.Msg.LOGIC_BOOLEAN_FALSE="false",t.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",t.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",t.Msg.LOGIC_BOOLEAN_TRUE="true",t.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",t.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",t.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",t.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",t.Msg.LOGIC_NEGATE_TITLE="not %1",t.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",t.Msg.LOGIC_NULL="null",t.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",t.Msg.LOGIC_NULL_TOOLTIP="Returns null.",t.Msg.LOGIC_OPERATION_AND="and",t.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",t.Msg.LOGIC_OPERATION_OR="or",t.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",t.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",t.Msg.LOGIC_TERNARY_CONDITION="test",t.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",t.Msg.LOGIC_TERNARY_IF_FALSE="if false",t.Msg.LOGIC_TERNARY_IF_TRUE="if true",t.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",t.Msg.MATH_ADDITION_SYMBOL="+",t.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",t.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",t.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",t.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",t.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",t.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",t.Msg.MATH_CHANGE_TITLE="change %1 by %2",t.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",t.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",t.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants: \u03c0 (3.141\u2026), e (2.718\u2026), \u03c6 (1.618\u2026), sqrt(2) (1.414\u2026), sqrt(\xbd) (0.707\u2026), or \u221e (infinity).",t.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",t.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",t.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",t.Msg.MATH_DIVISION_SYMBOL="\xf7",t.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",t.Msg.MATH_IS_EVEN="is even",t.Msg.MATH_IS_NEGATIVE="is negative",t.Msg.MATH_IS_ODD="is odd",t.Msg.MATH_IS_POSITIVE="is positive",t.Msg.MATH_IS_PRIME="is prime",t.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",t.Msg.MATH_IS_WHOLE="is whole",t.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",t.Msg.MATH_MODULO_TITLE="remainder of %1 \xf7 %2",t.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",t.Msg.MATH_MULTIPLICATION_SYMBOL="\xd7",t.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",t.Msg.MATH_NUMBER_TOOLTIP="A number.",t.Msg.MATH_ONLIST_HELPURL="",t.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",t.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",t.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",t.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",t.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",t.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",t.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",t.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",t.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",t.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",t.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",t.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",t.Msg.MATH_POWER_SYMBOL="^",t.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",t.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",t.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",t.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",t.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",t.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",t.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",t.Msg.MATH_ROUND_OPERATOR_ROUND="round",t.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",t.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",t.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",t.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",t.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",t.Msg.MATH_SINGLE_OP_ROOT="square root",t.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",t.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",t.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",t.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",t.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",t.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",t.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",t.Msg.MATH_SUBTRACTION_SYMBOL="-",t.Msg.MATH_TRIG_ACOS="acos",t.Msg.MATH_TRIG_ASIN="asin",t.Msg.MATH_TRIG_ATAN="atan",t.Msg.MATH_TRIG_COS="cos",t.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",t.Msg.MATH_TRIG_SIN="sin",t.Msg.MATH_TRIG_TAN="tan",t.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",t.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",t.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",t.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",t.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",t.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",t.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",t.Msg.NEW_NUMBER_VARIABLE="Create number variable...",t.Msg.NEW_STRING_VARIABLE="Create string variable...",t.Msg.NEW_VARIABLE="Create variable...",t.Msg.NEW_VARIABLE_TITLE="New variable name:",t.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",t.Msg.ORDINAL_NUMBER_SUFFIX="",t.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",t.Msg.PROCEDURES_BEFORE_PARAMS="with:",t.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",t.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",t.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",t.Msg.PROCEDURES_CREATE_DO="Create '%1'",t.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",t.Msg.PROCEDURES_DEFNORETURN_DO="",t.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",t.Msg.PROCEDURES_DEFNORETURN_TITLE="to",t.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",t.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_DEFRETURN_RETURN="return",t.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",t.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",t.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",t.Msg.PROCEDURES_IFRETURN_HELPURL="http://c2.com/cgi/wiki?GuardClause",t.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",t.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",t.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",t.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",t.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",t.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",t.Msg.REDO="Redo",t.Msg.REMOVE_COMMENT="Remove Comment",t.Msg.RENAME_VARIABLE="Rename variable...",t.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",t.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",t.Msg.TEXT_APPEND_TITLE="to %1 append text %2",t.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",t.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",t.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",t.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",t.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",t.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",t.Msg.TEXT_CHARAT_FIRST="get first letter",t.Msg.TEXT_CHARAT_FROM_END="get letter # from end",t.Msg.TEXT_CHARAT_FROM_START="get letter #",t.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",t.Msg.TEXT_CHARAT_LAST="get last letter",t.Msg.TEXT_CHARAT_RANDOM="get random letter",t.Msg.TEXT_CHARAT_TAIL="",t.Msg.TEXT_CHARAT_TITLE="in text %1 %2",t.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",t.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",t.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",t.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",t.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",t.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",t.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",t.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",t.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",t.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",t.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",t.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",t.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",t.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",t.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",t.Msg.TEXT_GET_SUBSTRING_TAIL="",t.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",t.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",t.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",t.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",t.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",t.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",t.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",t.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",t.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",t.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",t.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",t.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",t.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",t.Msg.TEXT_LENGTH_TITLE="length of %1",t.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",t.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",t.Msg.TEXT_PRINT_TITLE="print %1",t.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",t.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",t.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",t.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",t.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",t.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",t.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",t.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",t.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",t.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",t.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",t.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",t.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",t.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",t.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",t.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",t.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",t.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",t.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",t.Msg.TODAY="Today",t.Msg.UNDO="Undo",t.Msg.UNNAMED_KEY="unnamed",t.Msg.VARIABLES_DEFAULT_NAME="item",t.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",t.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",t.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",t.Msg.VARIABLES_SET="set %1 to %2",t.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",t.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",t.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",t.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",t.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",t.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",t.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",t.Msg.CONTROLS_FOREACH_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_FOR_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=t.Msg.CONTROLS_IF_MSG_ELSEIF,t.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=t.Msg.CONTROLS_IF_MSG_ELSE,t.Msg.CONTROLS_IF_IF_TITLE_IF=t.Msg.CONTROLS_IF_MSG_IF,t.Msg.CONTROLS_IF_MSG_THEN=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.LISTS_CREATE_WITH_ITEM_TITLE=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.LISTS_GET_INDEX_HELPURL=t.Msg.LISTS_INDEX_OF_HELPURL,t.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.MATH_CHANGE_TITLE_ITEM=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.PROCEDURES_DEFRETURN_COMMENT=t.Msg.PROCEDURES_DEFNORETURN_COMMENT,t.Msg.PROCEDURES_DEFRETURN_DO=t.Msg.PROCEDURES_DEFNORETURN_DO,t.Msg.PROCEDURES_DEFRETURN_PROCEDURE=t.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,t.Msg.PROCEDURES_DEFRETURN_TITLE=t.Msg.PROCEDURES_DEFNORETURN_TITLE,t.Msg.TEXT_APPEND_VARIABLE=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.MATH_HUE="230",t.Msg.LOOPS_HUE="120",t.Msg.LISTS_HUE="260",t.Msg.LOGIC_HUE="210",t.Msg.VARIABLES_HUE="330",t.Msg.TEXTS_HUE="160",t.Msg.PROCEDURES_HUE="290",t.Msg.COLOUR_HUE="20",t.Msg.VARIABLES_DYNAMIC_HUE="310",t.Msg})?T.apply(U,a):T)&&(B.exports=e)},45149:function(B){B.exports=function(){"use strict";function U(ht){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(vt){return typeof vt}:function(vt){return vt&&"function"==typeof Symbol&&vt.constructor===Symbol&&vt!==Symbol.prototype?"symbol":typeof vt})(ht)}var ht,T=(ht={},function(Ut){var le=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"introjs-stamp";return ht[le]=ht[le]||0,void 0===Ut[le]&&(Ut[le]=ht[le]++),Ut[le]});function a(ht,vt,Ut){if(ht)for(var le=0,de=ht.length;le<de;le++)vt(ht[le],le);"function"==typeof Ut&&Ut()}var e=new function(){var vt="introjs_event";this._id=function(Ut,le,de,Ye){return le+T(de)+(Ye?"_".concat(T(Ye)):"")},this.on=function(Ut,le,de,Ye,Te){var He=this._id.apply(this,arguments),ci=function(Ti){return de.call(Ye||Ut,Ti||window.event)};"addEventListener"in Ut?Ut.addEventListener(le,ci,Te):"attachEvent"in Ut&&Ut.attachEvent("on".concat(le),ci),Ut[vt]=Ut[vt]||{},Ut[vt][He]=ci},this.off=function(Ut,le,de,Ye,Te){var He=this._id.apply(this,arguments),ci=Ut[vt]&&Ut[vt][He];!ci||("removeEventListener"in Ut?Ut.removeEventListener(le,ci,Te):"detachEvent"in Ut&&Ut.detachEvent("on".concat(le),ci),Ut[vt][He]=null)}},t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(ht,vt){return ht(vt={exports:{}},vt.exports),vt.exports}var Pe,qe,o=function(ht){return ht&&ht.Math==Math&&ht},r=o("object"==typeof globalThis&&globalThis)||o("object"==typeof window&&window)||o("object"==typeof self&&self)||o("object"==typeof t&&t)||function(){return this}()||Function("return this")(),p=function(ht){try{return!!ht()}catch(vt){return!0}},b=!p(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),I=Function.prototype.call,x=I.bind?I.bind(I):function(){return I.apply(I,arguments)},k={}.propertyIsEnumerable,Y=Object.getOwnPropertyDescriptor,rt={f:Y&&!k.call({1:2},1)?function(vt){var Ut=Y(this,vt);return!!Ut&&Ut.enumerable}:k},ct=function(ht,vt){return{enumerable:!(1&ht),configurable:!(2&ht),writable:!(4&ht),value:vt}},wt=Function.prototype,At=wt.bind,Rt=wt.call,Dt=At&&At.bind(Rt),pt=At?function(ht){return ht&&Dt(Rt,ht)}:function(ht){return ht&&function(){return Rt.apply(ht,arguments)}},st=pt({}.toString),ot=pt("".slice),nt=function(ht){return ot(st(ht),8,-1)},Tt=r.Object,Ct=pt("".split),yt=p(function(){return!Tt("z").propertyIsEnumerable(0)})?function(ht){return"String"==nt(ht)?Ct(ht,""):Tt(ht)}:Tt,gt=r.TypeError,_t=function(ht){if(null==ht)throw gt("Can't call method on "+ht);return ht},Jt=function(ht){return yt(_t(ht))},Pt=function(ht){return"function"==typeof ht},oe=function(ht){return"object"==typeof ht?null!==ht:Pt(ht)},Ne=function(ht){return Pt(ht)?ht:void 0},Xe=function(ht,vt){return arguments.length<2?Ne(r[ht]):r[ht]&&r[ht][vt]},Ce=pt({}.isPrototypeOf),Ze=Xe("navigator","userAgent")||"",we=r.process,ai=r.Deno,re=we&&we.versions||ai&&ai.version,ce=re&&re.v8;ce&&(qe=(Pe=ce.split("."))[0]>0&&Pe[0]<4?1:+(Pe[0]+Pe[1])),!qe&&Ze&&(!(Pe=Ze.match(/Edge\/(\d+)/))||Pe[1]>=74)&&(Pe=Ze.match(/Chrome\/(\d+)/))&&(qe=+Pe[1]);var oi=qe,wi=!!Object.getOwnPropertySymbols&&!p(function(){var ht=Symbol();return!String(ht)||!(Object(ht)instanceof Symbol)||!Symbol.sham&&oi&&oi<41}),Ji=wi&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Ni=r.Object,ui=Ji?function(ht){return"symbol"==typeof ht}:function(ht){var vt=Xe("Symbol");return Pt(vt)&&Ce(vt.prototype,Ni(ht))},Oe=r.String,Be=function(ht){try{return Oe(ht)}catch(vt){return"Object"}},Ft=r.TypeError,ie=function(ht){if(Pt(ht))return ht;throw Ft(Be(ht)+" is not a function")},hi=function(ht,vt){var Ut=ht[vt];return null==Ut?void 0:ie(Ut)},fe=r.TypeError,ge=Object.defineProperty,Ve=function(ht,vt){try{ge(r,ht,{value:vt,configurable:!0,writable:!0})}catch(Ut){r[ht]=vt}return vt},Zt="__core-js_shared__",at=r[Zt]||Ve(Zt,{}),zt=n(function(ht){(ht.exports=function(vt,Ut){return at[vt]||(at[vt]=void 0!==Ut?Ut:{})})("versions",[]).push({version:"3.19.1",mode:"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})}),Qt=r.Object,ye=function(ht){return Qt(_t(ht))},Ee=pt({}.hasOwnProperty),ni=Object.hasOwn||function(vt,Ut){return Ee(ye(vt),Ut)},Di=0,Mi=Math.random(),vi=pt(1..toString),pi=function(ht){return"Symbol("+(void 0===ht?"":ht)+")_"+vi(++Di+Mi,36)},Ue=zt("wks"),Ke=r.Symbol,ne=Ke&&Ke.for,xe=Ji?Ke:Ke&&Ke.withoutSetter||pi,ii=function(ht){if(!ni(Ue,ht)||!wi&&"string"!=typeof Ue[ht]){var vt="Symbol."+ht;Ue[ht]=wi&&ni(Ke,ht)?Ke[ht]:Ji&&ne?ne(vt):xe(vt)}return Ue[ht]},yi=r.TypeError,Zi=ii("toPrimitive"),ji=function(ht,vt){if(!oe(ht)||ui(ht))return ht;var le,Ut=hi(ht,Zi);if(Ut){if(void 0===vt&&(vt="default"),le=x(Ut,ht,vt),!oe(le)||ui(le))return le;throw yi("Can't convert object to primitive value")}return void 0===vt&&(vt="number"),function(ht,vt){var Ut,le;if("string"===vt&&Pt(Ut=ht.toString)&&!oe(le=x(Ut,ht))||Pt(Ut=ht.valueOf)&&!oe(le=x(Ut,ht))||"string"!==vt&&Pt(Ut=ht.toString)&&!oe(le=x(Ut,ht)))return le;throw fe("Can't convert object to primitive value")}(ht,vt)},Ui=function(ht){var vt=ji(ht,"string");return ui(vt)?vt:vt+""},Xi=r.document,Re=oe(Xi)&&oe(Xi.createElement),Me=function(ht){return Re?Xi.createElement(ht):{}},kt=!b&&!p(function(){return 7!=Object.defineProperty(Me("div"),"a",{get:function(){return 7}}).a}),Wt=Object.getOwnPropertyDescriptor,be={f:b?Wt:function(vt,Ut){if(vt=Jt(vt),Ut=Ui(Ut),kt)try{return Wt(vt,Ut)}catch(le){}if(ni(vt,Ut))return ct(!x(rt.f,vt,Ut),vt[Ut])}},Je=r.String,Pi=r.TypeError,Oi=function(ht){if(oe(ht))return ht;throw Pi(Je(ht)+" is not an object")},kn=r.TypeError,Wn=Object.defineProperty,Vn={f:b?Wn:function(vt,Ut,le){if(Oi(vt),Ut=Ui(Ut),Oi(le),kt)try{return Wn(vt,Ut,le)}catch(de){}if("get"in le||"set"in le)throw kn("Accessors not supported");return"value"in le&&(vt[Ut]=le.value),vt}},Dn=b?function(ht,vt,Ut){return Vn.f(ht,vt,ct(1,Ut))}:function(ht,vt,Ut){return ht[vt]=Ut,ht},Do=pt(Function.toString);Pt(at.inspectSource)||(at.inspectSource=function(ht){return Do(ht)});var Vo,Yn,xs,Eo=at.inspectSource,hs=r.WeakMap,ro=Pt(hs)&&/native code/.test(Eo(hs)),Li=zt("keys"),pn=function(ht){return Li[ht]||(Li[ht]=pi(ht))},Fn={},jo="Object already initialized",es=r.TypeError;if(ro||at.state){var Ge=at.state||(at.state=new(0,r.WeakMap)),ke=pt(Ge.get),pe=pt(Ge.has),$e=pt(Ge.set);Vo=function(ht,vt){if(pe(Ge,ht))throw new es(jo);return vt.facade=ht,$e(Ge,ht,vt),vt},Yn=function(ht){return ke(Ge,ht)||{}},xs=function(ht){return pe(Ge,ht)}}else{var _i=pn("state");Fn[_i]=!0,Vo=function(ht,vt){if(ni(ht,_i))throw new es(jo);return vt.facade=ht,Dn(ht,_i,vt),vt},Yn=function(ht){return ni(ht,_i)?ht[_i]:{}},xs=function(ht){return ni(ht,_i)}}var on={set:Vo,get:Yn,has:xs,enforce:function(ht){return xs(ht)?Yn(ht):Vo(ht,{})},getterFor:function(ht){return function(vt){var Ut;if(!oe(vt)||(Ut=Yn(vt)).type!==ht)throw es("Incompatible receiver, "+ht+" required");return Ut}}},fn=Function.prototype,An=b&&Object.getOwnPropertyDescriptor,cn=ni(fn,"name"),ps={EXISTS:cn,PROPER:cn&&"something"===function(){}.name,CONFIGURABLE:cn&&(!b||b&&An(fn,"name").configurable)},No=n(function(ht){var vt=ps.CONFIGURABLE,Ut=on.get,le=on.enforce,de=String(String).split("String");(ht.exports=function(Ye,Te,He,ci){var Bn,gi=!!ci&&!!ci.unsafe,Ti=!!ci&&!!ci.enumerable,dn=!!ci&&!!ci.noTargetGet,an=ci&&void 0!==ci.name?ci.name:Te;Pt(He)&&("Symbol("===String(an).slice(0,7)&&(an="["+String(an).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!ni(He,"name")||vt&&He.name!==an)&&Dn(He,"name",an),(Bn=le(He)).source||(Bn.source=de.join("string"==typeof an?an:""))),Ye!==r?(gi?!dn&&Ye[Te]&&(Ti=!0):delete Ye[Te],Ti?Ye[Te]=He:Dn(Ye,Te,He)):Ti?Ye[Te]=He:Ve(Te,He)})(Function.prototype,"toString",function(){return Pt(this)&&Ut(this).source||Eo(this)})}),Ao=Math.ceil,rs=Math.floor,Uo=function(ht){var vt=+ht;return vt!=vt||0===vt?0:(vt>0?rs:Ao)(vt)},To=Math.max,On=Math.min,is=function(ht,vt){var Ut=Uo(ht);return Ut<0?To(Ut+vt,0):On(Ut,vt)},lo=Math.min,ks=function(ht){return ht>0?lo(Uo(ht),9007199254740991):0},Co=function(ht){return ks(ht.length)},ws=function(ht){return function(vt,Ut,le){var He,de=Jt(vt),Ye=Co(de),Te=is(le,Ye);if(ht&&Ut!=Ut){for(;Ye>Te;)if((He=de[Te++])!=He)return!0}else for(;Ye>Te;Te++)if((ht||Te in de)&&de[Te]===Ut)return ht||Te||0;return!ht&&-1}},ns={includes:ws(!0),indexOf:ws(!1)},Oo=ns.indexOf,go=pt([].push),er=function(ht,vt){var Ye,Ut=Jt(ht),le=0,de=[];for(Ye in Ut)!ni(Fn,Ye)&&ni(Ut,Ye)&&go(de,Ye);for(;vt.length>le;)ni(Ut,Ye=vt[le++])&&(~Oo(de,Ye)||go(de,Ye));return de},Or=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],ir=Or.concat("length","prototype"),Jr={f:Object.getOwnPropertyNames||function(vt){return er(vt,ir)}},xr={f:Object.getOwnPropertySymbols},zr=pt([].concat),Ea=Xe("Reflect","ownKeys")||function(vt){var Ut=Jr.f(Oi(vt)),le=xr.f;return le?zr(Ut,le(vt)):Ut},Ts=function(ht,vt){for(var Ut=Ea(vt),le=Vn.f,de=be.f,Ye=0;Ye<Ut.length;Ye++){var Te=Ut[Ye];ni(ht,Te)||le(ht,Te,de(vt,Te))}},gs=/#|\.prototype\./,Ks=function(ht,vt){var Ut=Cs[sa(ht)];return Ut==bo||Ut!=Yo&&(Pt(vt)?p(vt):!!vt)},sa=Ks.normalize=function(ht){return String(ht).replace(gs,".").toLowerCase()},Cs=Ks.data={},Yo=Ks.NATIVE="N",bo=Ks.POLYFILL="P",Ls=Ks,_r=be.f,$o=function(ht,vt){var Te,He,ci,gi,Ti,Ut=ht.target,le=ht.global,de=ht.stat;if(Te=le?r:de?r[Ut]||Ve(Ut,{}):(r[Ut]||{}).prototype)for(He in vt){if(gi=vt[He],ci=ht.noTargetGet?(Ti=_r(Te,He))&&Ti.value:Te[He],!Ls(le?He:Ut+(de?".":"#")+He,ht.forced)&&void 0!==ci){if(typeof gi==typeof ci)continue;Ts(gi,ci)}(ht.sham||ci&&ci.sham)&&Dn(gi,"sham",!0),No(Te,He,gi,ht)}},Ds={};Ds[ii("toStringTag")]="z";var ze,Ns="[object z]"===String(Ds),ra=ii("toStringTag"),Us=r.Object,xo="Arguments"==nt(function(){return arguments}()),ho=Ns?nt:function(ht){var vt,Ut,le;return void 0===ht?"Undefined":null===ht?"Null":"string"==typeof(Ut=function(ht,vt){try{return ht[vt]}catch(Ut){}}(vt=Us(ht),ra))?Ut:xo?nt(vt):"Object"==(le=nt(vt))&&Pt(vt.callee)?"Arguments":le},Is=r.String,Qn=function(ht){if("Symbol"===ho(ht))throw TypeError("Cannot convert a Symbol value to a string");return Is(ht)},aa=function(){var ht=Oi(this),vt="";return ht.global&&(vt+="g"),ht.ignoreCase&&(vt+="i"),ht.multiline&&(vt+="m"),ht.dotAll&&(vt+="s"),ht.unicode&&(vt+="u"),ht.sticky&&(vt+="y"),vt},Lr=r.RegExp,vr={UNSUPPORTED_Y:p(function(){var ht=Lr("a","y");return ht.lastIndex=2,null!=ht.exec("abcd")}),BROKEN_CARET:p(function(){var ht=Lr("^r","gy");return ht.lastIndex=2,null!=ht.exec("str")})},Nr=Object.keys||function(vt){return er(vt,Or)},nr=b?Object.defineProperties:function(vt,Ut){Oi(vt);for(var He,le=Jt(Ut),de=Nr(Ut),Ye=de.length,Te=0;Ye>Te;)Vn.f(vt,He=de[Te++],le[He]);return vt},la=Xe("document","documentElement"),bt="prototype",jt="script",St=pn("IE_PROTO"),J=function(){},q=function(ht){return"<script>"+ht+"</"+jt+">"},et=function(ht){ht.write(q("")),ht.close();var vt=ht.parentWindow.Object;return ht=null,vt},Ii=function(){try{ze=new ActiveXObject("htmlfile")}catch(vt){}Ii="undefined"!=typeof document?document.domain&&ze?et(ze):function(){var Ut,ht=Me("iframe");return ht.style.display="none",la.appendChild(ht),ht.src=String("javascript:"),(Ut=ht.contentWindow.document).open(),Ut.write(q("document.F=Object")),Ut.close(),Ut.F}():et(ze);for(var ht=Or.length;ht--;)delete Ii[bt][Or[ht]];return Ii()};Fn[St]=!0;var Cn=Object.create||function(vt,Ut){var le;return null!==vt?(J[bt]=Oi(vt),le=new J,J[bt]=null,le[St]=vt):le=Ii(),void 0===Ut?le:nr(le,Ut)},Xn=r.RegExp,En=p(function(){var ht=Xn(".","s");return!(ht.dotAll&&ht.exec("\n")&&"s"===ht.flags)}),ao=r.RegExp,_o=p(function(){var ht=ao("(?<a>b)","g");return"b"!==ht.exec("b").groups.a||"bc"!=="b".replace(ht,"$<a>c")}),Fo=on.get,ca=zt("native-string-replace",String.prototype.replace),os=RegExp.prototype.exec,Zs=os,Gs=pt("".charAt),un=pt("".indexOf),Pr=pt("".replace),or=pt("".slice),ul=function(){var ht=/a/,vt=/b*/g;return x(os,ht,"a"),x(os,vt,"a"),0!==ht.lastIndex||0!==vt.lastIndex}(),Fr=vr.UNSUPPORTED_Y||vr.BROKEN_CARET,hl=void 0!==/()??/.exec("")[1];(ul||hl||Fr||En||_o)&&(Zs=function(vt){var Te,He,ci,gi,Ti,dn,an,Ut=this,le=Fo(Ut),de=Qn(vt),Ye=le.raw;if(Ye)return Ye.lastIndex=Ut.lastIndex,Te=x(Zs,Ye,de),Ut.lastIndex=Ye.lastIndex,Te;var Bn=le.groups,wo=Fr&&Ut.sticky,Mn=x(aa,Ut),Jn=Ut.source,Qo=0,us=de;if(wo&&(Mn=Pr(Mn,"y",""),-1===un(Mn,"g")&&(Mn+="g"),us=or(de,Ut.lastIndex),Ut.lastIndex>0&&(!Ut.multiline||Ut.multiline&&"\n"!==Gs(de,Ut.lastIndex-1))&&(Jn="(?: "+Jn+")",us=" "+us,Qo++),He=new RegExp("^(?:"+Jn+")",Mn)),hl&&(He=new RegExp("^"+Jn+"$(?!\\s)",Mn)),ul&&(ci=Ut.lastIndex),gi=x(os,wo?He:Ut,us),wo?gi?(gi.input=or(gi.input,Qo),gi[0]=or(gi[0],Qo),gi.index=Ut.lastIndex,Ut.lastIndex+=gi[0].length):Ut.lastIndex=0:ul&&gi&&(Ut.lastIndex=Ut.global?gi.index+gi[0].length:ci),hl&&gi&&gi.length>1&&x(ca,gi[0],He,function(){for(Ti=1;Ti<arguments.length-2;Ti++)void 0===arguments[Ti]&&(gi[Ti]=void 0)}),gi&&Bn)for(gi.groups=dn=Cn(null),Ti=0;Ti<Bn.length;Ti++)dn[(an=Bn[Ti])[0]]=gi[an[1]];return gi});var br=Zs;$o({target:"RegExp",proto:!0,forced:/./.exec!==br},{exec:br});var ki=ii("species"),Rn=RegExp.prototype,ua=function(ht,vt,Ut,le){var de=ii(ht),Ye=!p(function(){var gi={};return gi[de]=function(){return 7},7!=""[ht](gi)}),Te=Ye&&!p(function(){var gi=!1,Ti=/a/;return"split"===ht&&((Ti={}).constructor={},Ti.constructor[ki]=function(){return Ti},Ti.flags="",Ti[de]=/./[de]),Ti.exec=function(){return gi=!0,null},Ti[de](""),!gi});if(!Ye||!Te||Ut){var He=pt(/./[de]),ci=vt(de,""[ht],function(gi,Ti,dn,an,Bn){var wo=pt(gi),Mn=Ti.exec;return Mn===br||Mn===Rn.exec?Ye&&!Bn?{done:!0,value:He(Ti,dn,an)}:{done:!0,value:wo(dn,Ti,an)}:{done:!1}});No(String.prototype,ht,ci[0]),No(Rn,de,ci[1])}le&&Dn(Rn[de],"sham",!0)},Xo=pt("".charAt),yr=pt("".charCodeAt),ha=pt("".slice),Ps=function(ht){return function(vt,Ut){var Te,He,le=Qn(_t(vt)),de=Uo(Ut),Ye=le.length;return de<0||de>=Ye?ht?"":void 0:(Te=yr(le,de))<55296||Te>56319||de+1===Ye||(He=yr(le,de+1))<56320||He>57343?ht?Xo(le,de):Te:ht?ha(le,de,de+2):He-56320+(Te-55296<<10)+65536}},V=(Ps(!1),Ps(!0)),W=function(ht,vt,Ut){return vt+(Ut?V(ht,vt).length:1)},ft=r.TypeError,Ht=function(ht,vt){var Ut=ht.exec;if(Pt(Ut)){var le=x(Ut,ht,vt);return null!==le&&Oi(le),le}if("RegExp"===nt(ht))return x(br,ht,vt);throw ft("RegExp#exec called on incompatible receiver")};ua("match",function(ht,vt,Ut){return[function(de){var Ye=_t(this),Te=null==de?void 0:hi(de,ht);return Te?x(Te,de,Ye):new RegExp(de)[ht](Qn(Ye))},function(le){var de=Oi(this),Ye=Qn(le),Te=Ut(vt,de,Ye);if(Te.done)return Te.value;if(!de.global)return Ht(de,Ye);var He=de.unicode;de.lastIndex=0;for(var Ti,ci=[],gi=0;null!==(Ti=Ht(de,Ye));){var dn=Qn(Ti[0]);ci[gi]=dn,""===dn&&(de.lastIndex=W(Ye,ks(de.lastIndex),He)),gi++}return 0===gi?null:ci}]});var te=Array.isArray||function(vt){return"Array"==nt(vt)},_e=function(ht,vt,Ut){var le=Ui(vt);le in ht?Vn.f(ht,le,ct(0,Ut)):ht[le]=Ut},Se=function(){},ti=[],mi=Xe("Reflect","construct"),Gi=/^\s*(?:class|function)\b/,sn=pt(Gi.exec),In=!Gi.exec(Se),Ln=function(ht){if(!Pt(ht))return!1;try{return mi(Se,ti,ht),!0}catch(vt){return!1}},bn=!mi||p(function(){var ht;return Ln(Ln.call)||!Ln(Object)||!Ln(function(){ht=!0})||ht})?function(ht){if(!Pt(ht))return!1;switch(ho(ht)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return In||!!sn(Gi,Eo(ht))}:Ln,Gn=ii("species"),So=r.Array,_s=function(ht,vt){return new(function(ht){var vt;return te(ht)&&(bn(vt=ht.constructor)&&(vt===So||te(vt.prototype))||oe(vt)&&null===(vt=vt[Gn]))&&(vt=void 0),void 0===vt?So:vt}(ht))(0===vt?0:vt)},qn=ii("species"),sr=function(ht){return oi>=51||!p(function(){var vt=[];return(vt.constructor={})[qn]=function(){return{foo:1}},1!==vt[ht](Boolean).foo})},Er=ii("isConcatSpreadable"),Io=9007199254740991,Ws="Maximum allowed index exceeded",Tr=r.TypeError,Ms=oi>=51||!p(function(){var ht=[];return ht[Er]=!1,ht.concat()[0]!==ht}),jl=sr("concat"),$r=function(ht){if(!oe(ht))return!1;var vt=ht[Er];return void 0!==vt?!!vt:te(ht)};$o({target:"Array",proto:!0,forced:!Ms||!jl},{concat:function(vt){var Ye,Te,He,ci,gi,Ut=ye(this),le=_s(Ut,0),de=0;for(Ye=-1,He=arguments.length;Ye<He;Ye++)if($r(gi=-1===Ye?Ut:arguments[Ye])){if(de+(ci=Co(gi))>Io)throw Tr(Ws);for(Te=0;Te<ci;Te++,de++)Te in gi&&_e(le,de,gi[Te])}else{if(de>=Io)throw Tr(Ws);_e(le,de++,gi)}return le.length=de,le}}),Ns||No(Object.prototype,"toString",Ns?{}.toString:function(){return"[object "+ho(this)+"]"},{unsafe:!0});var co=ps.PROPER,tn="toString",hn=RegExp.prototype,Tn=hn[tn],to=pt(aa);(p(function(){return"/a/b"!=Tn.call({source:"a",flags:"b"})})||co&&Tn.name!=tn)&&No(RegExp.prototype,tn,function(){var vt=Oi(this),Ut=Qn(vt.source),le=vt.flags;return"/"+Ut+"/"+Qn(void 0===le&&Ce(hn,vt)&&!("flags"in hn)?to(vt):le)},{unsafe:!0});var ls=Function.prototype,Mo=ls.apply,da=ls.call,zs="object"==typeof Reflect&&Reflect.apply||(ls.bind?da.bind(Mo):function(){return da.apply(Mo,arguments)}),Qs=ii("match"),Ss=function(ht){var vt;return oe(ht)&&(void 0!==(vt=ht[Qs])?!!vt:"RegExp"==nt(ht))},qs=r.TypeError,dl=ii("species"),Zr=function(ht,vt){var le,Ut=Oi(ht).constructor;return void 0===Ut||null==(le=Oi(Ut)[dl])?vt:function(ht){if(bn(ht))return ht;throw qs(Be(ht)+" is not a constructor")}(le)},jr=pt([].slice),Ta=vr.UNSUPPORTED_Y,Ml=4294967295,Qr=Math.min,Yl=[].push,Xl=pt(/./.exec),rr=pt(Yl),js=pt("".slice);function ar(ht,vt){if(ht instanceof SVGElement){var Ut=ht.getAttribute("class")||"";Ut.match(vt)||ht.setAttribute("class","".concat(Ut," ").concat(vt))}else void 0!==ht.classList?a(vt.split(" "),function(de){ht.classList.add(de)}):ht.className.match(vt)||(ht.className+=" ".concat(vt))}function pl(ht,vt){var Ut="";return ht.currentStyle?Ut=ht.currentStyle[vt]:document.defaultView&&document.defaultView.getComputedStyle&&(Ut=document.defaultView.getComputedStyle(ht,null).getPropertyValue(vt)),Ut&&Ut.toLowerCase?Ut.toLowerCase():Ut}function Sa(ht){var vt=ht.element;if(this._options.scrollToElement){var Ut=function(ht){var vt=window.getComputedStyle(ht),Ut="absolute"===vt.position,le=/(auto|scroll)/;if("fixed"===vt.position)return document.body;for(var de=ht;de=de.parentElement;)if(vt=window.getComputedStyle(de),(!Ut||"static"!==vt.position)&&le.test(vt.overflow+vt.overflowY+vt.overflowX))return de;return document.body}(vt);Ut!==document.body&&(Ut.scrollTop=vt.offsetTop-Ut.offsetTop)}}function Ol(){if(void 0!==window.innerWidth)return{width:window.innerWidth,height:window.innerHeight};var ht=document.documentElement;return{width:ht.clientWidth,height:ht.clientHeight}}function Cu(ht,vt,Ut){var de,le=vt.element;if("off"!==ht&&this._options.scrollToElement&&(de="tooltip"===ht?Ut.getBoundingClientRect():le.getBoundingClientRect(),!function(ht){var vt=ht.getBoundingClientRect();return vt.top>=0&&vt.left>=0&&vt.bottom+80<=window.innerHeight&&vt.right<=window.innerWidth}(le))){var Ye=Ol().height;de.bottom-(de.bottom-de.top)<0||le.clientHeight>Ye?window.scrollBy(0,de.top-(Ye/2-de.height/2)-this._options.scrollPadding):window.scrollBy(0,de.top-(Ye/2-de.height/2)+this._options.scrollPadding)}}function $a(ht){ht.setAttribute("role","button"),ht.tabIndex=0}ua("split",function(ht,vt,Ut){var le;return le="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(de,Ye){var Te=Qn(_t(this)),He=void 0===Ye?Ml:Ye>>>0;if(0===He)return[];if(void 0===de)return[Te];if(!Ss(de))return x(vt,Te,de,He);for(var an,Bn,wo,ci=[],Ti=0,dn=new RegExp(de.source,(de.ignoreCase?"i":"")+(de.multiline?"m":"")+(de.unicode?"u":"")+(de.sticky?"y":"")+"g");(an=x(br,dn,Te))&&!((Bn=dn.lastIndex)>Ti&&(rr(ci,js(Te,Ti,an.index)),an.length>1&&an.index<Te.length&&zs(Yl,ci,jr(an,1)),wo=an[0].length,Ti=Bn,ci.length>=He));)dn.lastIndex===an.index&&dn.lastIndex++;return Ti===Te.length?(wo||!Xl(dn,""))&&rr(ci,""):rr(ci,js(Te,Ti)),ci.length>He?jr(ci,0,He):ci}:"0".split(void 0,0).length?function(de,Ye){return void 0===de&&0===Ye?[]:x(vt,this,de,Ye)}:vt,[function(Ye,Te){var He=_t(this),ci=null==Ye?void 0:hi(Ye,ht);return ci?x(ci,Ye,He,Te):x(le,Qn(He),Ye,Te)},function(de,Ye){var Te=Oi(this),He=Qn(de),ci=Ut(le,Te,He,Ye,le!==vt);if(ci.done)return ci.value;var gi=Zr(Te,RegExp),Ti=Te.unicode,an=new gi(Ta?"^(?:"+Te.source+")":Te,(Te.ignoreCase?"i":"")+(Te.multiline?"m":"")+(Te.unicode?"u":"")+(Ta?"g":"y")),Bn=void 0===Ye?Ml:Ye>>>0;if(0===Bn)return[];if(0===He.length)return null===Ht(an,He)?[He]:[];for(var wo=0,Mn=0,Jn=[];Mn<He.length;){an.lastIndex=Ta?0:Mn;var us,Qo=Ht(an,Ta?js(He,Mn):He);if(null===Qo||(us=Qr(ks(an.lastIndex+(Ta?Mn:0)),He.length))===wo)Mn=W(He,Mn,Ti);else{if(rr(Jn,js(He,wo,Mn)),Jn.length===Bn)return Jn;for(var As=1;As<=Qo.length-1;As++)if(rr(Jn,Qo[As]),Jn.length===Bn)return Jn;Mn=wo=us}}return rr(Jn,js(He,wo)),Jn}]},!!p(function(){var ht=/(?:)/,vt=ht.exec;ht.exec=function(){return vt.apply(this,arguments)};var Ut="ab".split(ht);return 2!==Ut.length||"a"!==Ut[0]||"b"!==Ut[1]}),Ta);var Za=Object.assign,Kl=Object.defineProperty,Su=pt([].concat),gl=!Za||p(function(){if(b&&1!==Za({b:1},Za(Kl({},"a",{enumerable:!0,get:function(){Kl(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var ht={},vt={},Ut=Symbol(),le="abcdefghijklmnopqrst";return ht[Ut]=7,le.split("").forEach(function(de){vt[de]=de}),7!=Za({},ht)[Ut]||Nr(Za({},vt)).join("")!=le})?function(vt,Ut){for(var le=ye(vt),de=arguments.length,Ye=1,Te=xr.f,He=rt.f;de>Ye;)for(var an,ci=yt(arguments[Ye++]),gi=Te?Su(Nr(ci),Te(ci)):Nr(ci),Ti=gi.length,dn=0;Ti>dn;)an=gi[dn++],(!b||x(He,ci,an))&&(le[an]=ci[an]);return le}:Za;function Fa(ht){var vt=ht.parentNode;return!(!vt||"HTML"===vt.nodeName)&&("fixed"===pl(ht,"position")||Fa(vt))}function Ra(ht,vt){var Ut=document.body,le=document.documentElement,de=window.pageYOffset||le.scrollTop||Ut.scrollTop,Ye=window.pageXOffset||le.scrollLeft||Ut.scrollLeft;vt=vt||Ut;var Te=ht.getBoundingClientRect(),He=vt.getBoundingClientRect(),ci=pl(vt,"position"),gi={width:Te.width,height:Te.height};return"body"!==vt.tagName.toLowerCase()&&"relative"===ci||"sticky"===ci?Object.assign(gi,{top:Te.top-He.top,left:Te.left-He.left}):Fa(ht)?Object.assign(gi,{top:Te.top,left:Te.left}):Object.assign(gi,{top:Te.top+de,left:Te.left+Ye})}$o({target:"Object",stat:!0,forced:Object.assign!==gl},{assign:gl});var mc=Math.floor,lt=pt("".charAt),Z=pt("".replace),j=pt("".slice),Et=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,Mt=/\$([$&'`]|\d{1,2})/g,$t=function(ht,vt,Ut,le,de,Ye){var Te=Ut+ht.length,He=le.length,ci=Mt;return void 0!==de&&(de=ye(de),ci=Et),Z(Ye,ci,function(gi,Ti){var dn;switch(lt(Ti,0)){case"$":return"$";case"&":return ht;case"`":return j(vt,0,Ut);case"'":return j(vt,Te);case"<":dn=de[j(Ti,1,-1)];break;default:var an=+Ti;if(0===an)return gi;if(an>He){var Bn=mc(an/10);return 0===Bn?gi:Bn<=He?void 0===le[Bn-1]?lt(Ti,1):le[Bn-1]+lt(Ti,1):gi}dn=le[an-1]}return void 0===dn?"":dn})},me=ii("replace"),Le=Math.max,bi=Math.min,$i=pt([].concat),eo=pt([].push),vn=pt("".indexOf),io=pt("".slice),zn=function(ht){return void 0===ht?ht:String(ht)},cs="$0"==="a".replace(/./,"$0"),lr=!!/./[me]&&""===/./[me]("a","$0");function Bs(ht,vt){if(ht instanceof SVGElement){var Ut=ht.getAttribute("class")||"";ht.setAttribute("class",Ut.replace(vt,"").replace(/^\s+|\s+$/g,""))}else ht.className=ht.className.replace(vt,"").replace(/^\s+|\s+$/g,"")}function Zo(ht,vt){var Ut="";if(ht.style.cssText&&(Ut+=ht.style.cssText),"string"==typeof vt)Ut+=vt;else for(var le in vt)Ut+="".concat(le,":").concat(vt[le],";");ht.style.cssText=Ut}function Ko(ht){if(ht){if(!this._introItems[this._currentStep])return;var vt=this._introItems[this._currentStep],Ut=Ra(vt.element,this._targetElement),le=this._options.helperElementPadding;Fa(vt.element)?ar(ht,"introjs-fixedTooltip"):Bs(ht,"introjs-fixedTooltip"),"floating"===vt.position&&(le=0),Zo(ht,{width:"".concat(Ut.width+le,"px"),height:"".concat(Ut.height+le,"px"),top:"".concat(Ut.top-le/2,"px"),left:"".concat(Ut.left-le/2,"px")})}}ua("replace",function(ht,vt,Ut){var le=lr?"$":"$0";return[function(Ye,Te){var He=_t(this),ci=null==Ye?void 0:hi(Ye,me);return ci?x(ci,Ye,He,Te):x(vt,Qn(He),Ye,Te)},function(de,Ye){var Te=Oi(this),He=Qn(de);if("string"==typeof Ye&&-1===vn(Ye,le)&&-1===vn(Ye,"$<")){var ci=Ut(vt,Te,He,Ye);if(ci.done)return ci.value}var gi=Pt(Ye);gi||(Ye=Qn(Ye));var Ti=Te.global;if(Ti){var dn=Te.unicode;Te.lastIndex=0}for(var an=[];;){var Bn=Ht(Te,He);if(null===Bn||(eo(an,Bn),!Ti))break;""===Qn(Bn[0])&&(Te.lastIndex=W(He,ks(Te.lastIndex),dn))}for(var Mn="",Jn=0,Qo=0;Qo<an.length;Qo++){for(var us=Qn((Bn=an[Qo])[0]),As=Le(bi(Uo(Bn.index),He.length),0),_a=[],Ur=1;Ur<Bn.length;Ur++)eo(_a,zn(Bn[Ur]));var pr=Bn.groups;if(gi){var Ma=$i([us],_a,As,He);void 0!==pr&&eo(Ma,pr);var rc=Qn(zs(Ye,void 0,Ma))}else rc=$t(us,He,As,_a,pr,Ye);As>=Jn&&(Mn+=io(He,Jn,As)+rc,Jn=As+us.length)}return Mn+io(He,Jn)}]},!!p(function(){var ht=/./;return ht.exec=function(){var vt=[];return vt.groups={a:"7"},vt},"7"!=="".replace(ht,"$<a>")})||!cs||lr);var Yr=ii("unscopables"),wa=Array.prototype;null==wa[Yr]&&Vn.f(wa,Yr,{configurable:!0,value:Cn(null)});var Fh=ns.includes;$o({target:"Array",proto:!0},{includes:function(vt){return Fh(this,vt,arguments.length>1?arguments[1]:void 0)}}),function(ht){wa[Yr][ht]=!0}("includes");var Ru=sr("slice"),vc=ii("species"),Jl=r.Array,bc=Math.max;$o({target:"Array",proto:!0,forced:!Ru},{slice:function(vt,Ut){var He,ci,gi,le=Jt(this),de=Co(le),Ye=is(vt,de),Te=is(void 0===Ut?de:Ut,de);if(te(le)&&((bn(He=le.constructor)&&(He===Jl||te(He.prototype))||oe(He)&&null===(He=He[vc]))&&(He=void 0),He===Jl||void 0===He))return jr(le,Ye,Te);for(ci=new(void 0===He?Jl:He)(bc(Te-Ye,0)),gi=0;Ye<Te;Ye++,gi++)Ye in le&&_e(ci,gi,le[Ye]);return ci.length=gi,ci}});var ms=r.TypeError,Gc=function(ht){if(Ss(ht))throw ms("The method doesn't accept regular expressions");return ht},wu=ii("match"),Zl=pt("".indexOf);$o({target:"String",proto:!0,forced:!function(ht){var vt=/./;try{"/./"[ht](vt)}catch(Ut){try{return vt[wu]=!1,"/./"[ht](vt)}catch(le){}}return!1}("includes")},{includes:function(vt){return!!~Zl(Qn(_t(this)),Qn(Gc(vt)),arguments.length>1?arguments[1]:void 0)}});var Wc=function(ht,vt){var Ut=[][ht];return!!Ut&&p(function(){Ut.call(null,vt||function(){throw 1},1)})},Cr=pt([].join),rh=yt!=Object,Bh=Wc("join",",");$o({target:"Array",proto:!0,forced:rh||!Bh},{join:function(vt){return Cr(Jt(this),void 0===vt?",":vt)}});var Ql=pt(pt.bind),zc=pt([].push),Xr=function(ht){var vt=1==ht,Ut=2==ht,le=3==ht,de=4==ht,Ye=6==ht,Te=7==ht,He=5==ht||Ye;return function(ci,gi,Ti,dn){for(var As,_a,an=ye(ci),Bn=yt(an),wo=function(ht,vt){return ie(ht),void 0===vt?ht:Ql?Ql(ht,vt):function(){return ht.apply(vt,arguments)}}(gi,Ti),Mn=Co(Bn),Jn=0,Qo=dn||_s,us=vt?Qo(ci,Mn):Ut||Te?Qo(ci,0):void 0;Mn>Jn;Jn++)if((He||Jn in Bn)&&(_a=wo(As=Bn[Jn],Jn,an),ht))if(vt)us[Jn]=_a;else if(_a)switch(ht){case 3:return!0;case 5:return As;case 6:return Jn;case 2:zc(us,As)}else switch(ht){case 4:return!1;case 7:zc(us,As)}return Ye?-1:le||de?de:us}},Rs=[Xr(0),Xr(1),Xr(2),Xr(3),Xr(4),Xr(5),Xr(6),Xr(7)][2];function _l(ht,vt,Ut,le,de){return ht.left+vt+Ut.width>le.width?(de.style.left="".concat(le.width-Ut.width-ht.left,"px"),!1):(de.style.left="".concat(vt,"px"),!0)}function pa(ht,vt,Ut,le){return ht.left+ht.width-vt-Ut.width<0?(le.style.left="".concat(-ht.left,"px"),!1):(le.style.right="".concat(vt,"px"),!0)}$o({target:"Array",proto:!0,forced:!sr("filter")},{filter:function(vt){return Rs(this,vt,arguments.length>1?arguments[1]:void 0)}});var Iu=sr("splice"),Ys=r.TypeError,vs=Math.max,tc=Math.min,ml=9007199254740991,qa="Maximum allowed length exceeded";function tl(ht,vt){ht.includes(vt)&&ht.splice(ht.indexOf(vt),1)}function jc(ht,vt,Ut){var le=this._options.positionPrecedence.slice(),de=Ol(),Ye=Ra(vt).height+10,Te=Ra(vt).width+20,He=ht.getBoundingClientRect(),ci="floating";He.bottom+Ye>de.height&&tl(le,"bottom"),He.top-Ye<0&&tl(le,"top"),He.right+Te>de.width&&tl(le,"right"),He.left-Te<0&&tl(le,"left");var Ti,dn,gi=-1!==(dn=(Ti=Ut||"").indexOf("-"))?Ti.substr(dn):"";return Ut&&(Ut=Ut.split("-")[0]),le.length&&(ci=le.includes(Ut)?Ut:le[0]),["top","bottom"].includes(ci)&&(ci+=function(ht,vt,Ut,le){var Ye=vt/2,Te=Math.min(Ut.width,window.screen.width),He=["-left-aligned","-middle-aligned","-right-aligned"];return Te-ht<vt&&tl(He,"-left-aligned"),(ht<Ye||Te-ht<Ye)&&tl(He,"-middle-aligned"),ht<vt&&tl(He,"-right-aligned"),He.length?He.includes(le)?le:He[0]:"-middle-aligned"}(He.left,Te,de,gi)),ci}function Sr(ht,vt,Ut,le){var Ye,Te,He,ci,gi;if(le=le||!1,vt.style.top=null,vt.style.right=null,vt.style.bottom=null,vt.style.left=null,vt.style.marginLeft=null,vt.style.marginTop=null,Ut.style.display="inherit",this._introItems[this._currentStep])switch(vt.className=["introjs-tooltip","string"==typeof(Ye=this._introItems[this._currentStep]).tooltipClass?Ye.tooltipClass:this._options.tooltipClass].filter(Boolean).join(" "),vt.setAttribute("role","dialog"),"floating"!==(gi=this._introItems[this._currentStep].position)&&this._options.autoPosition&&(gi=jc.call(this,ht,vt,gi)),He=Ra(ht),Te=Ra(vt),ci=Ol(),ar(vt,"introjs-".concat(gi)),gi){case"top-right-aligned":Ut.className="introjs-arrow bottom-right";var dn=0;pa(He,dn,Te,vt),vt.style.bottom="".concat(He.height+20,"px");break;case"top-middle-aligned":Ut.className="introjs-arrow bottom-middle";var an=He.width/2-Te.width/2;le&&(an+=5),pa(He,an,Te,vt)&&(vt.style.right=null,_l(He,an,Te,ci,vt)),vt.style.bottom="".concat(He.height+20,"px");break;case"top-left-aligned":case"top":Ut.className="introjs-arrow bottom",_l(He,le?0:15,Te,ci,vt),vt.style.bottom="".concat(He.height+20,"px");break;case"right":vt.style.left="".concat(He.width+20,"px"),He.top+Te.height>ci.height?(Ut.className="introjs-arrow left-bottom",vt.style.top="-".concat(Te.height-He.height-20,"px")):Ut.className="introjs-arrow left";break;case"left":!le&&!0===this._options.showStepNumbers&&(vt.style.top="15px"),He.top+Te.height>ci.height?(vt.style.top="-".concat(Te.height-He.height-20,"px"),Ut.className="introjs-arrow right-bottom"):Ut.className="introjs-arrow right",vt.style.right="".concat(He.width+20,"px");break;case"floating":Ut.style.display="none",vt.style.left="50%",vt.style.top="50%",vt.style.marginLeft="-".concat(Te.width/2,"px"),vt.style.marginTop="-".concat(Te.height/2,"px");break;case"bottom-right-aligned":Ut.className="introjs-arrow top-right",pa(He,dn=0,Te,vt),vt.style.top="".concat(He.height+20,"px");break;case"bottom-middle-aligned":Ut.className="introjs-arrow top-middle",an=He.width/2-Te.width/2,le&&(an+=5),pa(He,an,Te,vt)&&(vt.style.right=null,_l(He,an,Te,ci,vt)),vt.style.top="".concat(He.height+20,"px");break;default:Ut.className="introjs-arrow top",_l(He,0,Te,ci,vt),vt.style.top="".concat(He.height+20,"px")}}function Yc(){a(document.querySelectorAll(".introjs-showElement"),function(vt){Bs(vt,/introjs-[a-zA-Z]+/g)})}function wn(ht,vt){var Ut=document.createElement(ht);vt=vt||{};var le=/^(?:role|data-|aria-)/;for(var de in vt){var Ye=vt[de];"style"===de?Zo(Ut,Ye):de.match(le)?Ut.setAttribute(de,Ye):Ut[de]=Ye}return Ut}function ur(ht,vt,Ut){if(Ut){var le=vt.style.opacity||"1";Zo(vt,{opacity:"0"}),window.setTimeout(function(){Zo(vt,{opacity:le})},10)}ht.appendChild(vt)}function vl(){return parseInt(this._currentStep+1,10)/this._introItems.length*100}function el(){var ht=document.querySelector(".introjs-disableInteraction");null===ht&&(ht=wn("div",{className:"introjs-disableInteraction"}),this._targetElement.appendChild(ht)),Ko.call(this,ht)}function Xc(ht){var vt=this,Ut=wn("div",{className:"introjs-bullets"});!1===this._options.showBullets&&(Ut.style.display="none");var le=wn("ul");le.setAttribute("role","tablist");var de=function(){vt.goToStep(this.getAttribute("data-stepnumber"))};return a(this._introItems,function(Ye,Te){var He=Ye.step,ci=wn("li"),gi=wn("a");ci.setAttribute("role","presentation"),gi.setAttribute("role","tab"),gi.onclick=de,Te===ht.step-1&&(gi.className="active"),$a(gi),gi.innerHTML="&nbsp;",gi.setAttribute("data-stepnumber",He),ci.appendChild(gi),le.appendChild(ci)}),Ut.appendChild(le),Ut}function Kc(ht,vt){if(this._options.showBullets){var Ut=document.querySelector(".introjs-bullets");Ut.parentNode.replaceChild(Xc.call(this,vt),Ut)}}function Mu(ht,vt){this._options.showBullets&&(ht.querySelector(".introjs-bullets li > a.active").className="",ht.querySelector('.introjs-bullets li > a[data-stepnumber="'.concat(vt.step,'"]')).className="active")}function bs(){var ht=wn("div");ht.className="introjs-progress",!1===this._options.showProgress&&(ht.style.display="none");var vt=wn("div",{className:"introjs-progressbar"});return this._options.progressBarAdditionalClass&&(vt.className+=" "+this._options.progressBarAdditionalClass),vt.setAttribute("role","progress"),vt.setAttribute("aria-valuemin",0),vt.setAttribute("aria-valuemax",100),vt.setAttribute("aria-valuenow",vl.call(this)),vt.style.cssText="width:".concat(vl.call(this),"%;"),ht.appendChild(vt),ht}function Au(ht){ht.querySelector(".introjs-progress .introjs-progressbar").style.cssText="width:".concat(vl.call(this),"%;"),ht.querySelector(".introjs-progress .introjs-progressbar").setAttribute("aria-valuenow",vl.call(this))}function fa(ht){var vt=this;void 0!==this._introChangeCallback&&this._introChangeCallback.call(this,ht.element);var Te,He,ci,Ut=this,le=document.querySelector(".introjs-helperLayer"),de=document.querySelector(".introjs-tooltipReferenceLayer"),Ye="introjs-helperLayer";if("string"==typeof ht.highlightClass&&(Ye+=" ".concat(ht.highlightClass)),"string"==typeof this._options.highlightClass&&(Ye+=" ".concat(this._options.highlightClass)),null!==le&&null!==de){var gi=de.querySelector(".introjs-helperNumberLayer"),Ti=de.querySelector(".introjs-tooltiptext"),dn=de.querySelector(".introjs-tooltip-title"),an=de.querySelector(".introjs-arrow"),Bn=de.querySelector(".introjs-tooltip");ci=de.querySelector(".introjs-skipbutton"),He=de.querySelector(".introjs-prevbutton"),Te=de.querySelector(".introjs-nextbutton"),le.className=Ye,Bn.style.opacity=0,Bn.style.display="none",Sa.call(Ut,ht),Ko.call(Ut,le),Ko.call(Ut,de),Yc(),Ut._lastShowElementTimer&&window.clearTimeout(Ut._lastShowElementTimer),Ut._lastShowElementTimer=window.setTimeout(function(){null!==gi&&(gi.innerHTML="".concat(ht.step," of ").concat(vt._introItems.length)),Ti.innerHTML=ht.intro,dn.innerHTML=ht.title,Bn.style.display="block",Sr.call(Ut,ht.element,Bn,an),Mu.call(Ut,de,ht),Au.call(Ut,de),Bn.style.opacity=1,(null!=Te&&/introjs-donebutton/gi.test(Te.className)||null!=Te)&&Te.focus(),Cu.call(Ut,ht.scrollTo,ht,Ti)},350)}else{var wo=wn("div",{className:Ye}),Mn=wn("div",{className:"introjs-tooltipReferenceLayer"}),Jn=wn("div",{className:"introjs-arrow"}),Qo=wn("div",{className:"introjs-tooltip"}),us=wn("div",{className:"introjs-tooltiptext"}),As=wn("div",{className:"introjs-tooltip-header"}),_a=wn("h1",{className:"introjs-tooltip-title"}),Ur=wn("div");Zo(wo,{"box-shadow":"0 0 1px 2px rgba(33, 33, 33, 0.8), rgba(33, 33, 33, ".concat(Ut._options.overlayOpacity.toString(),") 0 0 0 5000px")}),Sa.call(Ut,ht),Ko.call(Ut,wo),Ko.call(Ut,Mn),ur(this._targetElement,wo,!0),ur(this._targetElement,Mn),us.innerHTML=ht.intro,_a.innerHTML=ht.title,Ur.className="introjs-tooltipbuttons",!1===this._options.showButtons&&(Ur.style.display="none"),As.appendChild(_a),Qo.appendChild(As),Qo.appendChild(us),Qo.appendChild(Xc.call(this,ht)),Qo.appendChild(bs.call(this));var pr=wn("div");!0===this._options.showStepNumbers&&(pr.className="introjs-helperNumberLayer",pr.innerHTML="".concat(ht.step," of ").concat(this._introItems.length),Qo.appendChild(pr)),Qo.appendChild(Jn),Mn.appendChild(Qo),(Te=wn("a")).onclick=function(){Ut._introItems.length-1!==Ut._currentStep?hr.call(Ut):/introjs-donebutton/gi.test(Te.className)&&("function"==typeof Ut._introCompleteCallback&&Ut._introCompleteCallback.call(Ut,Ut._currentStep,"done"),dr.call(Ut,Ut._targetElement))},$a(Te),Te.innerHTML=this._options.nextLabel,(He=wn("a")).onclick=function(){0!==Ut._currentStep&&Hr.call(Ut)},$a(He),He.innerHTML=this._options.prevLabel,$a(ci=wn("a",{className:"introjs-skipbutton"})),ci.innerHTML=this._options.skipLabel,ci.onclick=function(){Ut._introItems.length-1===Ut._currentStep&&"function"==typeof Ut._introCompleteCallback&&Ut._introCompleteCallback.call(Ut,Ut._currentStep,"skip"),"function"==typeof Ut._introSkipCallback&&Ut._introSkipCallback.call(Ut),dr.call(Ut,Ut._targetElement)},As.appendChild(ci),this._introItems.length>1&&Ur.appendChild(He),Ur.appendChild(Te),Qo.appendChild(Ur),Sr.call(Ut,ht.element,Qo,Jn),Cu.call(this,ht.scrollTo,ht,Qo)}var Ma=Ut._targetElement.querySelector(".introjs-disableInteraction");Ma&&Ma.parentNode.removeChild(Ma),ht.disableInteraction&&el.call(Ut),0===this._currentStep&&this._introItems.length>1?(null!=Te&&(Te.className="".concat(this._options.buttonClass," introjs-nextbutton"),Te.innerHTML=this._options.nextLabel),!0===this._options.hidePrev?(null!=He&&(He.className="".concat(this._options.buttonClass," introjs-prevbutton introjs-hidden")),null!=Te&&ar(Te,"introjs-fullbutton")):null!=He&&(He.className="".concat(this._options.buttonClass," introjs-prevbutton introjs-disabled"))):this._introItems.length-1===this._currentStep||1===this._introItems.length?(null!=He&&(He.className="".concat(this._options.buttonClass," introjs-prevbutton")),!0===this._options.hideNext?(null!=Te&&(Te.className="".concat(this._options.buttonClass," introjs-nextbutton introjs-hidden")),null!=He&&ar(He,"introjs-fullbutton")):null!=Te&&(!0===this._options.nextToDone?(Te.innerHTML=this._options.doneLabel,ar(Te,"".concat(this._options.buttonClass," introjs-nextbutton introjs-donebutton"))):Te.className="".concat(this._options.buttonClass," introjs-nextbutton introjs-disabled"))):(null!=He&&(He.className="".concat(this._options.buttonClass," introjs-prevbutton")),null!=Te&&(Te.className="".concat(this._options.buttonClass," introjs-nextbutton"),Te.innerHTML=this._options.nextLabel)),null!=He&&He.setAttribute("role","button"),null!=Te&&Te.setAttribute("role","button"),null!=ci&&ci.setAttribute("role","button"),null!=Te&&Te.focus(),function(ht){var vt=ht.element;ar(vt,"introjs-showElement");var Ut=pl(vt,"position");"absolute"!==Ut&&"relative"!==Ut&&"sticky"!==Ut&&"fixed"!==Ut&&ar(vt,"introjs-relativePosition")}(ht),void 0!==this._introAfterChangeCallback&&this._introAfterChangeCallback.call(this,ht.element)}function ah(ht){this._currentStep=ht-2,void 0!==this._introItems&&hr.call(this)}function Ba(ht){this._currentStepNumber=ht,void 0!==this._introItems&&hr.call(this)}function hr(){var ht=this;this._direction="forward",void 0!==this._currentStepNumber&&a(this._introItems,function(le,de){le.step===ht._currentStepNumber&&(ht._currentStep=de-1,ht._currentStepNumber=void 0)}),void 0===this._currentStep?this._currentStep=0:++this._currentStep;var vt=this._introItems[this._currentStep],Ut=!0;return void 0!==this._introBeforeChangeCallback&&(Ut=this._introBeforeChangeCallback.call(this,vt&&vt.element)),!1===Ut?(--this._currentStep,!1):this._introItems.length<=this._currentStep?("function"==typeof this._introCompleteCallback&&this._introCompleteCallback.call(this,this._currentStep,"end"),void dr.call(this,this._targetElement)):void fa.call(this,vt)}function Hr(){if(this._direction="backward",0===this._currentStep)return!1;--this._currentStep;var ht=this._introItems[this._currentStep],vt=!0;if(void 0!==this._introBeforeChangeCallback&&(vt=this._introBeforeChangeCallback.call(this,ht&&ht.element)),!1===vt)return++this._currentStep,!1;fa.call(this,ht)}function Vh(){return this._currentStep}function Ha(ht){var vt=void 0===ht.code?ht.which:ht.code;if(null===vt&&(vt=null===ht.charCode?ht.keyCode:ht.charCode),"Escape"!==vt&&27!==vt||!0!==this._options.exitOnEsc){if("ArrowLeft"===vt||37===vt)Hr.call(this);else if("ArrowRight"===vt||39===vt)hr.call(this);else if("Enter"===vt||"NumpadEnter"===vt||13===vt){var Ut=ht.target||ht.srcElement;Ut&&Ut.className.match("introjs-prevbutton")?Hr.call(this):Ut&&Ut.className.match("introjs-skipbutton")?(this._introItems.length-1===this._currentStep&&"function"==typeof this._introCompleteCallback&&this._introCompleteCallback.call(this,this._currentStep,"skip"),dr.call(this,this._targetElement)):Ut&&Ut.getAttribute("data-stepnumber")?Ut.click():hr.call(this),ht.preventDefault?ht.preventDefault():ht.returnValue=!1}}else dr.call(this,this._targetElement)}function qr(ht){if(null===ht||"object"!==U(ht)||void 0!==ht.nodeType)return ht;var vt={};for(var Ut in ht)vt[Ut]=void 0!==window.jQuery&&ht[Ut]instanceof window.jQuery?ht[Ut]:qr(ht[Ut]);return vt}function il(ht){var vt=document.querySelector(".introjs-hints");return vt?vt.querySelectorAll(ht):[]}function Jc(ht){var vt=il('.introjs-hint[data-step="'.concat(ht,'"]'))[0];Kr.call(this),vt&&ar(vt,"introjs-hidehint"),void 0!==this._hintCloseCallback&&this._hintCloseCallback.call(this,ht)}function lh(){var ht=this;a(il(".introjs-hint"),function(Ut){Jc.call(ht,Ut.getAttribute("data-step"))})}function yc(){var ht=this,vt=il(".introjs-hint");vt&&vt.length?a(vt,function(Ut){nl.call(ht,Ut.getAttribute("data-step"))}):ch.call(this,this._targetElement)}function nl(ht){var vt=il('.introjs-hint[data-step="'.concat(ht,'"]'))[0];vt&&Bs(vt,/introjs-hidehint/g)}function kl(){var ht=this;a(il(".introjs-hint"),function(Ut){Ll.call(ht,Ut.getAttribute("data-step"))}),e.off(document,"click",Kr,this,!1),e.off(window,"resize",Va,this,!0),this._hintsAutoRefreshFunction&&e.off(window,"scroll",this._hintsAutoRefreshFunction,this,!0)}function Ll(ht){var vt=il('.introjs-hint[data-step="'.concat(ht,'"]'))[0];vt&&vt.parentNode.removeChild(vt)}function Nl(){var ht=this,vt=this,Ut=document.querySelector(".introjs-hints");null===Ut&&(Ut=wn("div",{className:"introjs-hints"}));a(this._introItems,function(de,Ye){if(!document.querySelector('.introjs-hint[data-step="'.concat(Ye,'"]'))){var Te=wn("a",{className:"introjs-hint"});$a(Te),Te.onclick=function(Ye){return function(Te){var He=Te||window.event;He.stopPropagation&&He.stopPropagation(),null!==He.cancelBubble&&(He.cancelBubble=!0),ss.call(vt,Ye)}}(Ye),de.hintAnimation||ar(Te,"introjs-hint-no-anim"),Fa(de.element)&&ar(Te,"introjs-fixedhint");var He=wn("div",{className:"introjs-hint-dot"}),ci=wn("div",{className:"introjs-hint-pulse"});Te.appendChild(He),Te.appendChild(ci),Te.setAttribute("data-step",Ye),de.targetElement=de.element,de.element=Te,ec.call(ht,de.hintPosition,Te,de.targetElement),Ut.appendChild(Te)}}),document.body.appendChild(Ut),void 0!==this._hintsAddedCallback&&this._hintsAddedCallback.call(this),this._options.hintAutoRefreshInterval>=0&&(this._hintsAutoRefreshFunction=function(ht,vt){var le,Ut=this;return function(){for(var de=arguments.length,Ye=new Array(de),Te=0;Te<de;Te++)Ye[Te]=arguments[Te];clearTimeout(le),le=setTimeout(function(){ht.apply(Ut,Ye)},vt)}}(function(){return Va.call(ht)},this._options.hintAutoRefreshInterval),e.on(window,"scroll",this._hintsAutoRefreshFunction,this,!0))}function ec(ht,vt,Ut){var le=vt.style,de=Ra.call(this,Ut);switch(ht){default:case"top-left":le.left="".concat(de.left,"px"),le.top="".concat(de.top,"px");break;case"top-right":le.left="".concat(de.left+de.width-20,"px"),le.top="".concat(de.top,"px");break;case"bottom-left":le.left="".concat(de.left,"px"),le.top="".concat(de.top+de.height-20,"px");break;case"bottom-right":le.left="".concat(de.left+de.width-20,"px"),le.top="".concat(de.top+de.height-20,"px");break;case"middle-left":le.left="".concat(de.left,"px"),le.top="".concat(de.top+(de.height-20)/2,"px");break;case"middle-right":le.left="".concat(de.left+de.width-20,"px"),le.top="".concat(de.top+(de.height-20)/2,"px");break;case"middle-middle":le.left="".concat(de.left+(de.width-20)/2,"px"),le.top="".concat(de.top+(de.height-20)/2,"px");break;case"bottom-middle":le.left="".concat(de.left+(de.width-20)/2,"px"),le.top="".concat(de.top+de.height-20,"px");break;case"top-middle":le.left="".concat(de.left+(de.width-20)/2,"px"),le.top="".concat(de.top,"px")}}function ss(ht){var vt=document.querySelector('.introjs-hint[data-step="'.concat(ht,'"]')),Ut=this._introItems[ht];void 0!==this._hintClickCallback&&this._hintClickCallback.call(this,vt,Ut,ht);var le=Kr.call(this);if(parseInt(le,10)!==ht){var de=wn("div",{className:"introjs-tooltip"}),Ye=wn("div"),Te=wn("div"),He=wn("div");de.onclick=function(Ti){Ti.stopPropagation?Ti.stopPropagation():Ti.cancelBubble=!0},Ye.className="introjs-tooltiptext";var ci=wn("p");if(ci.innerHTML=Ut.hint,Ye.appendChild(ci),this._options.hintShowButton){var gi=wn("a");gi.className=this._options.buttonClass,gi.setAttribute("role","button"),gi.innerHTML=this._options.hintButtonLabel,gi.onclick=Jc.bind(this,ht),Ye.appendChild(gi)}Te.className="introjs-arrow",de.appendChild(Te),de.appendChild(Ye),this._currentStep=vt.getAttribute("data-step"),He.className="introjs-tooltipReferenceLayer introjs-hintReference",He.setAttribute("data-step",vt.getAttribute("data-step")),Ko.call(this,He),He.appendChild(de),document.body.appendChild(He),Sr.call(this,vt,de,Te,!0)}}function Kr(){var ht=document.querySelector(".introjs-hintReference");if(ht){var vt=ht.getAttribute("data-step");return ht.parentNode.removeChild(ht),vt}}function ch(ht){var vt=this;if(this._introItems=[],this._options.hints)a(this._options.hints,function(le){var de=qr(le);"string"==typeof de.element&&(de.element=document.querySelector(de.element)),de.hintPosition=de.hintPosition||vt._options.hintPosition,de.hintAnimation=de.hintAnimation||vt._options.hintAnimation,null!==de.element&&vt._introItems.push(de)});else{var Ut=ht.querySelectorAll("*[data-hint]");if(!Ut||!Ut.length)return!1;a(Ut,function(le){var de=le.getAttribute("data-hintanimation");de=de?"true"===de:vt._options.hintAnimation,vt._introItems.push({element:le,hint:le.getAttribute("data-hint"),hintPosition:le.getAttribute("data-hintposition")||vt._options.hintPosition,hintAnimation:de,tooltipClass:le.getAttribute("data-tooltipclass"),position:le.getAttribute("data-position")||vt._options.tooltipPosition})})}Nl.call(this),e.on(document,"click",Kr,this,!1),e.on(window,"resize",Va,this,!0)}function Va(){var ht=this;a(this._introItems,function(vt){var Ut=vt.targetElement;void 0!==Ut&&ec.call(ht,vt.hintPosition,vt.element,Ut)})}$o({target:"Array",proto:!0,forced:!Iu},{splice:function(vt,Ut){var He,ci,gi,Ti,dn,an,le=ye(this),de=Co(le),Ye=is(vt,de),Te=arguments.length;if(0===Te?He=ci=0:1===Te?(He=0,ci=de-Ye):(He=Te-2,ci=tc(vs(Uo(Ut),0),de-Ye)),de+He-ci>ml)throw Ys(qa);for(gi=_s(le,ci),Ti=0;Ti<ci;Ti++)(dn=Ye+Ti)in le&&_e(gi,Ti,le[dn]);if(gi.length=ci,He<ci){for(Ti=Ye;Ti<de-ci;Ti++)an=Ti+He,(dn=Ti+ci)in le?le[an]=le[dn]:delete le[an];for(Ti=de;Ti>de-ci+He;Ti--)delete le[Ti-1]}else if(He>ci)for(Ti=de-ci;Ti>Ye;Ti--)an=Ti+He-1,(dn=Ti+ci-1)in le?le[an]=le[dn]:delete le[an];for(Ti=0;Ti<He;Ti++)le[Ti+Ye]=arguments[Ti+2];return le.length=de-ci+He,gi}});var Ec=Math.floor,$c=function(ht,vt){var Ut=ht.length,le=Ec(Ut/2);return Ut<8?Ou(ht,vt):mo(ht,$c(jr(ht,0,le),vt),$c(jr(ht,le),vt),vt)},Ou=function(ht,vt){for(var de,Ye,Ut=ht.length,le=1;le<Ut;){for(Ye=le,de=ht[le];Ye&&vt(ht[Ye-1],de)>0;)ht[Ye]=ht[--Ye];Ye!==le++&&(ht[Ye]=de)}return ht},mo=function(ht,vt,Ut,le){for(var de=vt.length,Ye=Ut.length,Te=0,He=0;Te<de||He<Ye;)ht[Te+He]=Te<de&&He<Ye?le(vt[Te],Ut[He])<=0?vt[Te++]:Ut[He++]:Te<de?vt[Te++]:Ut[He++];return ht},uh=$c,Ua=Ze.match(/firefox\/(\d+)/i),Ga=!!Ua&&+Ua[1],ol=/MSIE|Trident/.test(Ze),Da=Ze.match(/AppleWebKit\/(\d+)\./),xu=!!Da&&+Da[1],Wa=[],ic=pt(Wa.sort),nc=pt(Wa.push),Zc=p(function(){Wa.sort(void 0)}),oc=p(function(){Wa.sort(null)}),Pl=Wc("sort"),za=!p(function(){if(oi)return oi<70;if(!(Ga&&Ga>3)){if(ol)return!0;if(xu)return xu<603;var vt,Ut,le,de,ht="";for(vt=65;vt<76;vt++){switch(Ut=String.fromCharCode(vt),vt){case 66:case 69:case 70:case 72:le=3;break;case 68:case 71:le=4;break;default:le=2}for(de=0;de<47;de++)Wa.push({k:Ut+de,v:le})}for(Wa.sort(function(Ye,Te){return Te.v-Ye.v}),de=0;de<Wa.length;de++)Ut=Wa[de].k.charAt(0),ht.charAt(ht.length-1)!==Ut&&(ht+=Ut);return"DGBEFHACIJK"!==ht}});function dh(ht){var vt=this,Ut=ht.querySelectorAll("*[data-intro]"),le=[];if(this._options.steps)a(this._options.steps,function(gi){var Ti=qr(gi);if(Ti.step=le.length+1,Ti.title=Ti.title||"","string"==typeof Ti.element&&(Ti.element=document.querySelector(Ti.element)),null==Ti.element){var dn=document.querySelector(".introjsFloatingElement");null===dn&&(dn=wn("div",{className:"introjsFloatingElement"}),document.body.appendChild(dn)),Ti.element=dn,Ti.position="floating"}Ti.position=Ti.position||vt._options.tooltipPosition,Ti.scrollTo=Ti.scrollTo||vt._options.scrollTo,void 0===Ti.disableInteraction&&(Ti.disableInteraction=vt._options.disableInteraction),null!==Ti.element&&le.push(Ti)});else{var Ye;if(Ut.length<1)return[];a(Ut,function(gi){if((!vt._options.group||gi.getAttribute("data-intro-group")===vt._options.group)&&"none"!==gi.style.display){var Ti=parseInt(gi.getAttribute("data-step"),10);Ye=gi.hasAttribute("data-disable-interaction")?!!gi.getAttribute("data-disable-interaction"):vt._options.disableInteraction,Ti>0&&(le[Ti-1]={element:gi,title:gi.getAttribute("data-title")||"",intro:gi.getAttribute("data-intro"),step:parseInt(gi.getAttribute("data-step"),10),tooltipClass:gi.getAttribute("data-tooltipclass"),highlightClass:gi.getAttribute("data-highlightclass"),position:gi.getAttribute("data-position")||vt._options.tooltipPosition,scrollTo:gi.getAttribute("data-scrollto")||vt._options.scrollTo,disableInteraction:Ye})}});var Te=0;a(Ut,function(gi){if((!vt._options.group||gi.getAttribute("data-intro-group")===vt._options.group)&&null===gi.getAttribute("data-step")){for(;void 0!==le[Te];)Te++;Ye=gi.hasAttribute("data-disable-interaction")?!!gi.getAttribute("data-disable-interaction"):vt._options.disableInteraction,le[Te]={element:gi,title:gi.getAttribute("data-title")||"",intro:gi.getAttribute("data-intro"),step:Te+1,tooltipClass:gi.getAttribute("data-tooltipclass"),highlightClass:gi.getAttribute("data-highlightclass"),position:gi.getAttribute("data-position")||vt._options.tooltipPosition,scrollTo:gi.getAttribute("data-scrollto")||vt._options.scrollTo,disableInteraction:Ye}}})}for(var He=[],ci=0;ci<le.length;ci++)le[ci]&&He.push(le[ci]);return(le=He).sort(function(gi,Ti){return gi.step-Ti.step}),le}function Tc(ht){var vt=document.querySelector(".introjs-tooltipReferenceLayer"),Ut=document.querySelector(".introjs-helperLayer"),le=document.querySelector(".introjs-disableInteraction");if(Ko.call(this,Ut),Ko.call(this,vt),Ko.call(this,le),ht&&(this._introItems=dh.call(this,this._targetElement),Kc.call(this,vt,this._introItems[this._currentStep]),Au.call(this,vt)),null!=this._currentStep){var de=document.querySelector(".introjs-arrow"),Ye=document.querySelector(".introjs-tooltip");Ye&&de&&Sr.call(this,this._introItems[this._currentStep].element,Ye,de)}return Va.call(this),this}function Bl(){Tc.call(this)}function Hl(ht,vt){if(ht&&ht.parentElement){var Ut=ht.parentElement;vt?(Zo(ht,{opacity:"0"}),window.setTimeout(function(){try{Ut.removeChild(ht)}catch(le){}},500)):Ut.removeChild(ht)}}function dr(ht,vt){var Ut=!0;if(void 0!==this._introBeforeExitCallback&&(Ut=this._introBeforeExitCallback.call(this)),vt||!1!==Ut){var le=ht.querySelectorAll(".introjs-overlay");le&&le.length&&a(le,function(ci){return Hl(ci)}),Hl(ht.querySelector(".introjs-helperLayer"),!0),Hl(ht.querySelector(".introjs-tooltipReferenceLayer")),Hl(ht.querySelector(".introjs-disableInteraction")),Hl(document.querySelector(".introjsFloatingElement")),Yc(),e.off(window,"keydown",Ha,this,!0),e.off(window,"resize",Bl,this,!0),void 0!==this._introExitCallback&&this._introExitCallback.call(this),this._currentStep=void 0}}function ku(ht){var vt=this,Ut=wn("div",{className:"introjs-overlay"});return Zo(Ut,{top:0,bottom:0,left:0,right:0,position:"fixed"}),ht.appendChild(Ut),!0===this._options.exitOnOverlayClick&&(Zo(Ut,{cursor:"pointer"}),Ut.onclick=function(){dr.call(vt,ht)}),!0}function Lu(ht){void 0!==this._introStartCallback&&this._introStartCallback.call(this,ht);var vt=dh.call(this,ht);return 0===vt.length||(this._introItems=vt,ku.call(this,ht)&&(hr.call(this),this._options.keyboardNavigation&&e.on(window,"keydown",Ha,this,!0),e.on(window,"resize",Bl,this,!0))),!1}function ga(ht){this._targetElement=ht,this._introItems=[],this._options={nextLabel:"Next",prevLabel:"Back",skipLabel:"\xd7",doneLabel:"Done",hidePrev:!1,hideNext:!1,nextToDone:!0,tooltipPosition:"bottom",tooltipClass:"",group:"",highlightClass:"",exitOnEsc:!0,exitOnOverlayClick:!0,showStepNumbers:!1,keyboardNavigation:!0,showButtons:!0,showBullets:!0,showProgress:!1,scrollToElement:!0,scrollTo:"element",scrollPadding:30,overlayOpacity:.5,autoPosition:!0,positionPrecedence:["bottom","top","right","left"],disableInteraction:!1,helperElementPadding:10,hintPosition:"top-middle",hintButtonLabel:"Got it",hintShowButton:!0,hintAutoRefreshInterval:10,hintAnimation:!0,buttonClass:"introjs-button",progressBarAdditionalClass:!1}}$o({target:"Array",proto:!0,forced:Zc||!oc||!Pl||!za},{sort:function(vt){void 0!==vt&&ie(vt);var Ut=ye(this);if(za)return void 0===vt?ic(Ut):ic(Ut,vt);var Ye,Te,le=[],de=Co(Ut);for(Te=0;Te<de;Te++)Te in Ut&&nc(le,Ut[Te]);for(uh(le,function(ht){return function(vt,Ut){return void 0===Ut?-1:void 0===vt?1:void 0!==ht?+ht(vt,Ut)||0:Qn(vt)>Qn(Ut)?1:-1}}(vt)),Ye=le.length,Te=0;Te<Ye;)Ut[Te]=le[Te++];for(;Te<de;)delete Ut[Te++];return Ut}});var Ia=function ht(vt){var Ut;if("object"===U(vt))Ut=new ga(vt);else if("string"==typeof vt){var le=document.querySelector(vt);if(!le)throw new Error("There is no element with given selector.");Ut=new ga(le)}else Ut=new ga(document.body);return ht.instances[T(Ut,"introjs-instance")]=Ut,Ut};return Ia.version="4.3.0",Ia.instances={},Ia.fn=ga.prototype={clone:function(){return new ga(this)},setOption:function(vt,Ut){return this._options[vt]=Ut,this},setOptions:function(vt){return this._options=function(ht,vt){var le,Ut={};for(le in ht)Ut[le]=ht[le];for(le in vt)Ut[le]=vt[le];return Ut}(this._options,vt),this},start:function(){return Lu.call(this,this._targetElement),this},goToStep:function(vt){return ah.call(this,vt),this},addStep:function(vt){return this._options.steps||(this._options.steps=[]),this._options.steps.push(vt),this},addSteps:function(vt){if(vt.length){for(var Ut=0;Ut<vt.length;Ut++)this.addStep(vt[Ut]);return this}},goToStepNumber:function(vt){return Ba.call(this,vt),this},nextStep:function(){return hr.call(this),this},previousStep:function(){return Hr.call(this),this},currentStep:function(){return Vh.call(this)},exit:function(vt){return dr.call(this,this._targetElement,vt),this},refresh:function(vt){return Tc.call(this,vt),this},onbeforechange:function(vt){if("function"!=typeof vt)throw new Error("Provided callback for onbeforechange was not a function");return this._introBeforeChangeCallback=vt,this},onchange:function(vt){if("function"!=typeof vt)throw new Error("Provided callback for onchange was not a function.");return this._introChangeCallback=vt,this},onafterchange:function(vt){if("function"!=typeof vt)throw new Error("Provided callback for onafterchange was not a function");return this._introAfterChangeCallback=vt,this},oncomplete:function(vt){if("function"!=typeof vt)throw new Error("Provided callback for oncomplete was not a function.");return this._introCompleteCallback=vt,this},onhintsadded:function(vt){if("function"!=typeof vt)throw new Error("Provided callback for onhintsadded was not a function.");return this._hintsAddedCallback=vt,this},onhintclick:function(vt){if("function"!=typeof vt)throw new Error("Provided callback for onhintclick was not a function.");return this._hintClickCallback=vt,this},onhintclose:function(vt){if("function"!=typeof vt)throw new Error("Provided callback for onhintclose was not a function.");return this._hintCloseCallback=vt,this},onstart:function(vt){if("function"!=typeof vt)throw new Error("Provided callback for onstart was not a function.");return this._introStartCallback=vt,this},onexit:function(vt){if("function"!=typeof vt)throw new Error("Provided callback for onexit was not a function.");return this._introExitCallback=vt,this},onskip:function(vt){if("function"!=typeof vt)throw new Error("Provided callback for onskip was not a function.");return this._introSkipCallback=vt,this},onbeforeexit:function(vt){if("function"!=typeof vt)throw new Error("Provided callback for onbeforeexit was not a function.");return this._introBeforeExitCallback=vt,this},addHints:function(){return ch.call(this,this._targetElement),this},hideHint:function(vt){return Jc.call(this,vt),this},hideHints:function(){return lh.call(this),this},showHint:function(vt){return nl.call(this,vt),this},showHints:function(){return yc.call(this),this},removeHints:function(){return kl.call(this),this},removeHint:function(vt){return Ll().call(this,vt),this},showHintDialog:function(vt){return ss.call(this,vt),this}},Ia}()},30142:(B,U,v)=>{"use strict";v.d(U,{PG:()=>I,nm:()=>k});var T=v(42741),a=v(93324),e=v(54958),t=v(16274);const n=["editorContainer"],o=new T.OlP("NGX_MONACO_EDITOR_CONFIG");let p,r=!1,b=(()=>{class Y{constructor(it){this.config=it,this.onInit=new T.vpe}ngAfterViewInit(){r?p.then(()=>{this.initMonaco(this._options)}):(r=!0,p=new Promise(it=>{const rt=(this.config.baseUrl||"./assets")+"/monaco-editor/min/vs";if("object"==typeof window.monaco)return void it();const ct=()=>{window.require.config({paths:{vs:`${rt}`}}),window.require(["vs/editor/editor.main"],()=>{"function"==typeof this.config.onMonacoLoad&&this.config.onMonacoLoad(),this.initMonaco(this._options),it()})};if(window.require)ct();else{const wt=document.createElement("script");wt.type="text/javascript",wt.src=`${rt}/loader.js`,wt.addEventListener("load",ct),document.body.appendChild(wt)}}))}ngOnDestroy(){this._windowResizeSubscription&&this._windowResizeSubscription.unsubscribe(),this._editor&&(this._editor.dispose(),this._editor=void 0)}}return Y.\u0275fac=function(it){return new(it||Y)(T.Y36(o))},Y.\u0275cmp=T.Xpm({type:Y,selectors:[["ng-component"]],viewQuery:function(it,rt){if(1&it&&T.Gf(n,7),2&it){let ct;T.iGM(ct=T.CRH())&&(rt._editorContainer=ct.first)}},outputs:{onInit:"onInit"},decls:0,vars:0,template:function(it,rt){},encapsulation:2}),Y})(),I=(()=>{class Y extends b{constructor(it,rt){super(rt),this.zone=it,this.editorConfig=rt,this._value="",this.propagateChange=ct=>{},this.onTouched=()=>{}}set options(it){this._options=Object.assign({},this.config.defaultOptions,it),this._editor&&(this._editor.dispose(),this.initMonaco(it))}get options(){return this._options}set model(it){this.options.model=it,this._editor&&(this._editor.dispose(),this.initMonaco(this.options))}writeValue(it){this._value=it||"",setTimeout(()=>{this._editor&&!this.options.model&&this._editor.setValue(this._value)})}registerOnChange(it){this.propagateChange=it}registerOnTouched(it){this.onTouched=it}initMonaco(it){const rt=!!it.model;if(rt){const ct=monaco.editor.getModel(it.model.uri||"");ct?(it.model=ct,it.model.setValue(this._value)):it.model=monaco.editor.createModel(it.model.value,it.model.language,it.model.uri)}this._editor=monaco.editor.create(this._editorContainer.nativeElement,it),rt||this._editor.setValue(this._value),this._editor.onDidChangeModelContent(ct=>{const wt=this._editor.getValue();this.zone.run(()=>{this.propagateChange(wt),this._value=wt})}),this._editor.onDidBlurEditorWidget(()=>{this.onTouched()}),this._windowResizeSubscription&&this._windowResizeSubscription.unsubscribe(),this._windowResizeSubscription=(0,e.R)(window,"resize").subscribe(()=>this._editor.layout()),this.onInit.emit(this._editor)}}return Y.\u0275fac=function(it){return new(it||Y)(T.Y36(T.R0b),T.Y36(o))},Y.\u0275cmp=T.Xpm({type:Y,selectors:[["ngx-monaco-editor"]],inputs:{options:"options",model:"model"},features:[T._Bn([{provide:a.JU,useExisting:(0,T.Gpc)(()=>Y),multi:!0}]),T.qOj],decls:2,vars:0,consts:[[1,"editor-container"],["editorContainer",""]],template:function(it,rt){1&it&&T._UZ(0,"div",0,1)},styles:["[_nghost-%COMP%] {\n          display: block;\n          height: 200px;\n      }\n\n      .editor-container[_ngcontent-%COMP%] {\n          width: 100%;\n          height: 98%;\n      }"]}),Y})(),k=(()=>{class Y{static forRoot(it={}){return{ngModule:Y,providers:[{provide:o,useValue:it}]}}}return Y.\u0275fac=function(it){return new(it||Y)},Y.\u0275mod=T.oAB({type:Y}),Y.\u0275inj=T.cJS({imports:[[t.ez]]}),Y})()},29923:(B,U,v)=>{"use strict";v.d(U,{X:()=>e});var T=v(6006),a=v(67078);class e extends T.xQ{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const o=super._subscribe(n);return o&&!o.closed&&n.next(this._value),o}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new a.N;return this._value}next(n){super.next(this._value=n)}}},33585:(B,U,v)=>{"use strict";v.d(U,{P:()=>n});var T=v(23974),a=v(267),e=v(7535);class n{constructor(r,p,b){this.kind=r,this.value=p,this.error=b,this.hasValue="N"===r}observe(r){switch(this.kind){case"N":return r.next&&r.next(this.value);case"E":return r.error&&r.error(this.error);case"C":return r.complete&&r.complete()}}do(r,p,b){switch(this.kind){case"N":return r&&r(this.value);case"E":return p&&p(this.error);case"C":return b&&b()}}accept(r,p,b){return r&&"function"==typeof r.next?this.observe(r):this.do(r,p,b)}toObservable(){switch(this.kind){case"N":return(0,a.of)(this.value);case"E":return(0,e._)(this.error);case"C":return(0,T.c)()}throw new Error("unexpected notification kind value")}static createNext(r){return void 0!==r?new n("N",r):n.undefinedValueNotification}static createError(r){return new n("E",void 0,r)}static createComplete(){return n.completeNotification}}n.completeNotification=new n("C"),n.undefinedValueNotification=new n("N",void 0)},93948:(B,U,v)=>{"use strict";v.d(U,{y:()=>x});var T=v(28744),e=v(59754),t=v(45669),o=v(27631),r=v(37846);var I=v(16633);let x=(()=>{class Y{constructor(it){this._isScalar=!1,it&&(this._subscribe=it)}lift(it){const rt=new Y;return rt.source=this,rt.operator=it,rt}subscribe(it,rt,ct){const{operator:wt}=this,At=function(Y,X,it){if(Y){if(Y instanceof T.L)return Y;if(Y[e.b])return Y[e.b]()}return Y||X||it?new T.L(Y,X,it):new T.L(t.c)}(it,rt,ct);if(At.add(wt?wt.call(At,this.source):this.source||I.v.useDeprecatedSynchronousErrorHandling&&!At.syncErrorThrowable?this._subscribe(At):this._trySubscribe(At)),I.v.useDeprecatedSynchronousErrorHandling&&At.syncErrorThrowable&&(At.syncErrorThrowable=!1,At.syncErrorThrown))throw At.syncErrorValue;return At}_trySubscribe(it){try{return this._subscribe(it)}catch(rt){I.v.useDeprecatedSynchronousErrorHandling&&(it.syncErrorThrown=!0,it.syncErrorValue=rt),function(Y){for(;Y;){const{closed:X,destination:it,isStopped:rt}=Y;if(X||rt)return!1;Y=it&&it instanceof T.L?it:null}return!0}(it)?it.error(rt):console.warn(rt)}}forEach(it,rt){return new(rt=k(rt))((ct,wt)=>{let At;At=this.subscribe(Rt=>{try{it(Rt)}catch(Dt){wt(Dt),At&&At.unsubscribe()}},wt,ct)})}_subscribe(it){const{source:rt}=this;return rt&&rt.subscribe(it)}[o.L](){return this}pipe(...it){return 0===it.length?this:function(Y){return 0===Y.length?r.y:1===Y.length?Y[0]:function(it){return Y.reduce((rt,ct)=>ct(rt),it)}}(it)(this)}toPromise(it){return new(it=k(it))((rt,ct)=>{let wt;this.subscribe(At=>wt=At,At=>ct(At),()=>rt(wt))})}}return Y.create=X=>new Y(X),Y})();function k(Y){if(Y||(Y=I.v.Promise||Promise),!Y)throw new Error("no Promise impl found");return Y}},45669:(B,U,v)=>{"use strict";v.d(U,{c:()=>e});var T=v(16633),a=v(63863);const e={closed:!0,next(t){},error(t){if(T.v.useDeprecatedSynchronousErrorHandling)throw t;(0,a.z)(t)},complete(){}}},6006:(B,U,v)=>{"use strict";v.d(U,{Yc:()=>r,xQ:()=>p});var T=v(93948),a=v(28744),e=v(39734),t=v(67078),n=v(2417),o=v(59754);class r extends a.L{constructor(x){super(x),this.destination=x}}let p=(()=>{class I extends T.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[o.b](){return new r(this)}lift(k){const Y=new b(this,this);return Y.operator=k,Y}next(k){if(this.closed)throw new t.N;if(!this.isStopped){const{observers:Y}=this,X=Y.length,it=Y.slice();for(let rt=0;rt<X;rt++)it[rt].next(k)}}error(k){if(this.closed)throw new t.N;this.hasError=!0,this.thrownError=k,this.isStopped=!0;const{observers:Y}=this,X=Y.length,it=Y.slice();for(let rt=0;rt<X;rt++)it[rt].error(k);this.observers.length=0}complete(){if(this.closed)throw new t.N;this.isStopped=!0;const{observers:k}=this,Y=k.length,X=k.slice();for(let it=0;it<Y;it++)X[it].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(k){if(this.closed)throw new t.N;return super._trySubscribe(k)}_subscribe(k){if(this.closed)throw new t.N;return this.hasError?(k.error(this.thrownError),e.w.EMPTY):this.isStopped?(k.complete(),e.w.EMPTY):(this.observers.push(k),new n.W(this,k))}asObservable(){const k=new T.y;return k.source=this,k}}return I.create=(x,k)=>new b(x,k),I})();class b extends p{constructor(x,k){super(),this.destination=x,this.source=k}next(x){const{destination:k}=this;k&&k.next&&k.next(x)}error(x){const{destination:k}=this;k&&k.error&&this.destination.error(x)}complete(){const{destination:x}=this;x&&x.complete&&this.destination.complete()}_subscribe(x){const{source:k}=this;return k?this.source.subscribe(x):e.w.EMPTY}}},2417:(B,U,v)=>{"use strict";v.d(U,{W:()=>a});var T=v(39734);class a extends T.w{constructor(t,n){super(),this.subject=t,this.subscriber=n,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,n=t.observers;if(this.subject=null,!n||0===n.length||t.isStopped||t.closed)return;const o=n.indexOf(this.subscriber);-1!==o&&n.splice(o,1)}}},28744:(B,U,v)=>{"use strict";v.d(U,{L:()=>r});var T=v(13673),a=v(45669),e=v(39734),t=v(59754),n=v(16633),o=v(63863);class r extends e.w{constructor(I,x,k){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a.c;break;case 1:if(!I){this.destination=a.c;break}if("object"==typeof I){I instanceof r?(this.syncErrorThrowable=I.syncErrorThrowable,this.destination=I,I.add(this)):(this.syncErrorThrowable=!0,this.destination=new p(this,I));break}default:this.syncErrorThrowable=!0,this.destination=new p(this,I,x,k)}}[t.b](){return this}static create(I,x,k){const Y=new r(I,x,k);return Y.syncErrorThrowable=!1,Y}next(I){this.isStopped||this._next(I)}error(I){this.isStopped||(this.isStopped=!0,this._error(I))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(I){this.destination.next(I)}_error(I){this.destination.error(I),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:I}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=I,this}}class p extends r{constructor(I,x,k,Y){super(),this._parentSubscriber=I;let X,it=this;(0,T.m)(x)?X=x:x&&(X=x.next,k=x.error,Y=x.complete,x!==a.c&&(it=Object.create(x),(0,T.m)(it.unsubscribe)&&this.add(it.unsubscribe.bind(it)),it.unsubscribe=this.unsubscribe.bind(this))),this._context=it,this._next=X,this._error=k,this._complete=Y}next(I){if(!this.isStopped&&this._next){const{_parentSubscriber:x}=this;n.v.useDeprecatedSynchronousErrorHandling&&x.syncErrorThrowable?this.__tryOrSetError(x,this._next,I)&&this.unsubscribe():this.__tryOrUnsub(this._next,I)}}error(I){if(!this.isStopped){const{_parentSubscriber:x}=this,{useDeprecatedSynchronousErrorHandling:k}=n.v;if(this._error)k&&x.syncErrorThrowable?(this.__tryOrSetError(x,this._error,I),this.unsubscribe()):(this.__tryOrUnsub(this._error,I),this.unsubscribe());else if(x.syncErrorThrowable)k?(x.syncErrorValue=I,x.syncErrorThrown=!0):(0,o.z)(I),this.unsubscribe();else{if(this.unsubscribe(),k)throw I;(0,o.z)(I)}}}complete(){if(!this.isStopped){const{_parentSubscriber:I}=this;if(this._complete){const x=()=>this._complete.call(this._context);n.v.useDeprecatedSynchronousErrorHandling&&I.syncErrorThrowable?(this.__tryOrSetError(I,x),this.unsubscribe()):(this.__tryOrUnsub(x),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(I,x){try{I.call(this._context,x)}catch(k){if(this.unsubscribe(),n.v.useDeprecatedSynchronousErrorHandling)throw k;(0,o.z)(k)}}__tryOrSetError(I,x,k){if(!n.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{x.call(this._context,k)}catch(Y){return n.v.useDeprecatedSynchronousErrorHandling?(I.syncErrorValue=Y,I.syncErrorThrown=!0,!0):((0,o.z)(Y),!0)}return!1}_unsubscribe(){const{_parentSubscriber:I}=this;this._context=null,this._parentSubscriber=null,I.unsubscribe()}}},39734:(B,U,v)=>{"use strict";v.d(U,{w:()=>o});var T=v(69622),a=v(20153),e=v(13673);const n=(()=>{function p(b){return Error.call(this),this.message=b?`${b.length} errors occurred during unsubscription:\n${b.map((I,x)=>`${x+1}) ${I.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=b,this}return p.prototype=Object.create(Error.prototype),p})();class o{constructor(b){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,b&&(this._ctorUnsubscribe=!0,this._unsubscribe=b)}unsubscribe(){let b;if(this.closed)return;let{_parentOrParents:I,_ctorUnsubscribe:x,_unsubscribe:k,_subscriptions:Y}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,I instanceof o)I.remove(this);else if(null!==I)for(let X=0;X<I.length;++X)I[X].remove(this);if((0,e.m)(k)){x&&(this._unsubscribe=void 0);try{k.call(this)}catch(X){b=X instanceof n?r(X.errors):[X]}}if((0,T.k)(Y)){let X=-1,it=Y.length;for(;++X<it;){const rt=Y[X];if((0,a.K)(rt))try{rt.unsubscribe()}catch(ct){b=b||[],ct instanceof n?b=b.concat(r(ct.errors)):b.push(ct)}}}if(b)throw new n(b)}add(b){let I=b;if(!b)return o.EMPTY;switch(typeof b){case"function":I=new o(b);case"object":if(I===this||I.closed||"function"!=typeof I.unsubscribe)return I;if(this.closed)return I.unsubscribe(),I;if(!(I instanceof o)){const Y=I;I=new o,I._subscriptions=[Y]}break;default:throw new Error("unrecognized teardown "+b+" added to Subscription.")}let{_parentOrParents:x}=I;if(null===x)I._parentOrParents=this;else if(x instanceof o){if(x===this)return I;I._parentOrParents=[x,this]}else{if(-1!==x.indexOf(this))return I;x.push(this)}const k=this._subscriptions;return null===k?this._subscriptions=[I]:k.push(I),I}remove(b){const I=this._subscriptions;if(I){const x=I.indexOf(b);-1!==x&&I.splice(x,1)}}}var p;function r(p){return p.reduce((b,I)=>b.concat(I instanceof n?I.errors:I),[])}o.EMPTY=((p=new o).closed=!0,p)},16633:(B,U,v)=>{"use strict";v.d(U,{v:()=>a});let T=!1;const a={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else T&&console.log("RxJS: Back to a better error behavior. Thank you. <3");T=e},get useDeprecatedSynchronousErrorHandling(){return T}}},86790:(B,U,v)=>{"use strict";v.d(U,{IY:()=>t,Ds:()=>o,ft:()=>p});var T=v(28744),a=v(93948),e=v(77040);class t extends T.L{constructor(I){super(),this.parent=I}_next(I){this.parent.notifyNext(I)}_error(I){this.parent.notifyError(I),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class o extends T.L{notifyNext(I){this.destination.next(I)}notifyError(I){this.destination.error(I)}notifyComplete(){this.destination.complete()}}function p(b,I){if(I.closed)return;if(b instanceof a.y)return b.subscribe(I);let x;try{x=(0,e.s)(b)(I)}catch(k){I.error(k)}return x}},30955:(B,U,v)=>{"use strict";v.d(U,{c:()=>n,N:()=>o});var T=v(6006),a=v(93948),e=v(39734),t=v(95290);class n extends a.y{constructor(x,k){super(),this.source=x,this.subjectFactory=k,this._refCount=0,this._isComplete=!1}_subscribe(x){return this.getSubject().subscribe(x)}getSubject(){const x=this._subject;return(!x||x.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let x=this._connection;return x||(this._isComplete=!1,x=this._connection=new e.w,x.add(this.source.subscribe(new r(this.getSubject(),this))),x.closed&&(this._connection=null,x=e.w.EMPTY)),x}refCount(){return(0,t.x)()(this)}}const o=(()=>{const I=n.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:I._subscribe},_isComplete:{value:I._isComplete,writable:!0},getSubject:{value:I.getSubject},connect:{value:I.connect},refCount:{value:I.refCount}}})();class r extends T.Yc{constructor(x,k){super(x),this.connectable=k}_error(x){this._unsubscribe(),super._error(x)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const x=this.connectable;if(x){this.connectable=null;const k=x._connection;x._refCount=0,x._subject=null,x._connection=null,k&&k.unsubscribe()}}}},52032:(B,U,v)=>{"use strict";v.d(U,{aj:()=>x});var T=v(97204),a=v(69622),e=v(28744);class t extends e.L{notifyNext(it,rt,ct,wt,At){this.destination.next(rt)}notifyError(it,rt){this.destination.error(it)}notifyComplete(it){this.destination.complete()}}class n extends e.L{constructor(it,rt,ct){super(),this.parent=it,this.outerValue=rt,this.outerIndex=ct,this.index=0}_next(it){this.parent.notifyNext(this.outerValue,it,this.outerIndex,this.index++,this)}_error(it){this.parent.notifyError(it,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var o=v(77040),r=v(93948);function p(X,it,rt,ct,wt=new n(X,rt,ct)){if(!wt.closed)return it instanceof r.y?it.subscribe(wt):(0,o.s)(it)(wt)}var b=v(36431);const I={};function x(...X){let it,rt;return(0,T.K)(X[X.length-1])&&(rt=X.pop()),"function"==typeof X[X.length-1]&&(it=X.pop()),1===X.length&&(0,a.k)(X[0])&&(X=X[0]),(0,b.n)(X,rt).lift(new k(it))}class k{constructor(it){this.resultSelector=it}call(it,rt){return rt.subscribe(new Y(it,this.resultSelector))}}class Y extends t{constructor(it,rt){super(it),this.resultSelector=rt,this.active=0,this.values=[],this.observables=[]}_next(it){this.values.push(I),this.observables.push(it)}_complete(){const it=this.observables,rt=it.length;if(0===rt)this.destination.complete();else{this.active=rt,this.toRespond=rt;for(let ct=0;ct<rt;ct++)this.add(p(this,it[ct],void 0,ct))}}notifyComplete(it){0==(this.active-=1)&&this.destination.complete()}notifyNext(it,rt,ct){const wt=this.values,Rt=this.toRespond?wt[ct]===I?--this.toRespond:this.toRespond:0;wt[ct]=rt,0===Rt&&(this.resultSelector?this._tryResultSelector(wt):this.destination.next(wt.slice()))}_tryResultSelector(it){let rt;try{rt=this.resultSelector.apply(this,it)}catch(ct){return void this.destination.error(ct)}this.destination.next(rt)}}},38895:(B,U,v)=>{"use strict";v.d(U,{z:()=>t});var T=v(267),a=v(4540);function t(...n){return(0,a.J)(1)((0,T.of)(...n))}},59765:(B,U,v)=>{"use strict";v.d(U,{P:()=>t});var T=v(93948),a=v(72850),e=v(23974);function t(n){return new T.y(o=>{let r;try{r=n()}catch(b){return void o.error(b)}return(r?(0,a.D)(r):(0,e.c)()).subscribe(o)})}},23974:(B,U,v)=>{"use strict";v.d(U,{E:()=>a,c:()=>e});var T=v(93948);const a=new T.y(n=>n.complete());function e(n){return n?function(n){return new T.y(o=>n.schedule(()=>o.complete()))}(n):a}},90714:(B,U,v)=>{"use strict";v.d(U,{D:()=>o});var T=v(93948),a=v(69622),e=v(88561),t=v(20153),n=v(72850);function o(...p){if(1===p.length){const b=p[0];if((0,a.k)(b))return r(b,null);if((0,t.K)(b)&&Object.getPrototypeOf(b)===Object.prototype){const I=Object.keys(b);return r(I.map(x=>b[x]),I)}}if("function"==typeof p[p.length-1]){const b=p.pop();return r(p=1===p.length&&(0,a.k)(p[0])?p[0]:p,null).pipe((0,e.U)(I=>b(...I)))}return r(p,null)}function r(p,b){return new T.y(I=>{const x=p.length;if(0===x)return void I.complete();const k=new Array(x);let Y=0,X=0;for(let it=0;it<x;it++){const rt=(0,n.D)(p[it]);let ct=!1;I.add(rt.subscribe({next:wt=>{ct||(ct=!0,X++),k[it]=wt},error:wt=>I.error(wt),complete:()=>{Y++,(Y===x||!ct)&&(X===x&&I.next(b?b.reduce((wt,At,Rt)=>(wt[At]=k[Rt],wt),{}):k),I.complete())}}))}})}},72850:(B,U,v)=>{"use strict";v.d(U,{D:()=>it});var T=v(93948),a=v(77040),e=v(39734),t=v(27631),r=v(59112),p=v(65389),x=v(58253),k=v(1292);function it(rt,ct){return ct?function(rt,ct){if(null!=rt){if(function(rt){return rt&&"function"==typeof rt[t.L]}(rt))return function(rt,ct){return new T.y(wt=>{const At=new e.w;return At.add(ct.schedule(()=>{const Rt=rt[t.L]();At.add(Rt.subscribe({next(Dt){At.add(ct.schedule(()=>wt.next(Dt)))},error(Dt){At.add(ct.schedule(()=>wt.error(Dt)))},complete(){At.add(ct.schedule(()=>wt.complete()))}}))})),At})}(rt,ct);if((0,x.t)(rt))return function(rt,ct){return new T.y(wt=>{const At=new e.w;return At.add(ct.schedule(()=>rt.then(Rt=>{At.add(ct.schedule(()=>{wt.next(Rt),At.add(ct.schedule(()=>wt.complete()))}))},Rt=>{At.add(ct.schedule(()=>wt.error(Rt)))}))),At})}(rt,ct);if((0,k.z)(rt))return(0,r.r)(rt,ct);if(function(rt){return rt&&"function"==typeof rt[p.hZ]}(rt)||"string"==typeof rt)return function(rt,ct){if(!rt)throw new Error("Iterable cannot be null");return new T.y(wt=>{const At=new e.w;let Rt;return At.add(()=>{Rt&&"function"==typeof Rt.return&&Rt.return()}),At.add(ct.schedule(()=>{Rt=rt[p.hZ](),At.add(ct.schedule(function(){if(wt.closed)return;let Dt,pt;try{const st=Rt.next();Dt=st.value,pt=st.done}catch(st){return void wt.error(st)}pt?wt.complete():(wt.next(Dt),this.schedule())}))})),At})}(rt,ct)}throw new TypeError((null!==rt&&typeof rt||rt)+" is not observable")}(rt,ct):rt instanceof T.y?rt:new T.y((0,a.s)(rt))}},36431:(B,U,v)=>{"use strict";v.d(U,{n:()=>t});var T=v(93948),a=v(54537),e=v(59112);function t(n,o){return o?(0,e.r)(n,o):new T.y((0,a.V)(n))}},54958:(B,U,v)=>{"use strict";v.d(U,{R:()=>o});var T=v(93948),a=v(69622),e=v(13673),t=v(88561);function o(x,k,Y,X){return(0,e.m)(Y)&&(X=Y,Y=void 0),X?o(x,k,Y).pipe((0,t.U)(it=>(0,a.k)(it)?X(...it):X(it))):new T.y(it=>{r(x,k,function(ct){it.next(arguments.length>1?Array.prototype.slice.call(arguments):ct)},it,Y)})}function r(x,k,Y,X,it){let rt;if(function(x){return x&&"function"==typeof x.addEventListener&&"function"==typeof x.removeEventListener}(x)){const ct=x;x.addEventListener(k,Y,it),rt=()=>ct.removeEventListener(k,Y,it)}else if(function(x){return x&&"function"==typeof x.on&&"function"==typeof x.off}(x)){const ct=x;x.on(k,Y),rt=()=>ct.off(k,Y)}else if(function(x){return x&&"function"==typeof x.addListener&&"function"==typeof x.removeListener}(x)){const ct=x;x.addListener(k,Y),rt=()=>ct.removeListener(k,Y)}else{if(!x||!x.length)throw new TypeError("Invalid event target");for(let ct=0,wt=x.length;ct<wt;ct++)r(x[ct],k,Y,X,it)}X.add(rt)}},30636:(B,U,v)=>{"use strict";v.d(U,{T:()=>n});var T=v(93948),a=v(97204),e=v(4540),t=v(36431);function n(...o){let r=Number.POSITIVE_INFINITY,p=null,b=o[o.length-1];return(0,a.K)(b)?(p=o.pop(),o.length>1&&"number"==typeof o[o.length-1]&&(r=o.pop())):"number"==typeof b&&(r=o.pop()),null===p&&1===o.length&&o[0]instanceof T.y?o[0]:(0,e.J)(r)((0,t.n)(o,p))}},267:(B,U,v)=>{"use strict";v.d(U,{of:()=>t});var T=v(97204),a=v(36431),e=v(59112);function t(...n){let o=n[n.length-1];return(0,T.K)(o)?(n.pop(),(0,e.r)(n,o)):(0,a.n)(n)}},7535:(B,U,v)=>{"use strict";v.d(U,{_:()=>a});var T=v(93948);function a(t,n){return new T.y(n?o=>n.schedule(e,0,{error:t,subscriber:o}):o=>o.error(t))}function e({error:t,subscriber:n}){n.error(t)}},78862:(B,U,v)=>{"use strict";v.d(U,{H:()=>o});var T=v(93948),a=v(98846),e=v(69622);function t(p){return!(0,e.k)(p)&&p-parseFloat(p)+1>=0}var n=v(97204);function o(p=0,b,I){let x=-1;return t(b)?x=Number(b)<1?1:Number(b):(0,n.K)(b)&&(I=b),(0,n.K)(I)||(I=a.P),new T.y(k=>{const Y=t(p)?p:+p-I.now();return I.schedule(r,Y,{index:0,period:x,subscriber:k})})}function r(p){const{index:b,period:I,subscriber:x}=p;if(x.next(b),!x.closed){if(-1===I)return x.complete();p.index=b+1,this.schedule(p,I)}}},64337:(B,U,v)=>{"use strict";v.d(U,{e:()=>r});var T=v(98846),a=v(86790);class t{constructor(b){this.durationSelector=b}call(b,I){return I.subscribe(new n(b,this.durationSelector))}}class n extends a.Ds{constructor(b,I){super(b),this.durationSelector=I,this.hasValue=!1}_next(b){if(this.value=b,this.hasValue=!0,!this.throttled){let I;try{const{durationSelector:k}=this;I=k(b)}catch(k){return this.destination.error(k)}const x=(0,a.ft)(I,new a.IY(this));!x||x.closed?this.clearThrottle():this.add(this.throttled=x)}}clearThrottle(){const{value:b,hasValue:I,throttled:x}=this;x&&(this.remove(x),this.throttled=void 0,x.unsubscribe()),I&&(this.value=void 0,this.hasValue=!1,this.destination.next(b))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}var o=v(78862);function r(p,b=T.P){return function(p){return function(I){return I.lift(new t(p))}}(()=>(0,o.H)(p,b))}},72072:(B,U,v)=>{"use strict";v.d(U,{K:()=>a});var T=v(86790);function a(n){return function(r){const p=new e(n),b=r.lift(p);return p.caught=b}}class e{constructor(o){this.selector=o}call(o,r){return r.subscribe(new t(o,this.selector,this.caught))}}class t extends T.Ds{constructor(o,r,p){super(o),this.selector=r,this.caught=p}error(o){if(!this.isStopped){let r;try{r=this.selector(o,this.caught)}catch(I){return void super.error(I)}this._unsubscribeAndRecycle();const p=new T.IY(this);this.add(p);const b=(0,T.ft)(r,p);b!==p&&this.add(b)}}}},23748:(B,U,v)=>{"use strict";v.d(U,{b:()=>a});var T=v(16513);function a(e,t){return(0,T.zg)(e,t,1)}},89006:(B,U,v)=>{"use strict";v.d(U,{b:()=>e});var T=v(28744),a=v(98846);function e(r,p=a.P){return b=>b.lift(new t(r,p))}class t{constructor(p,b){this.dueTime=p,this.scheduler=b}call(p,b){return b.subscribe(new n(p,this.dueTime,this.scheduler))}}class n extends T.L{constructor(p,b,I){super(p),this.dueTime=b,this.scheduler=I,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(p){this.clearDebounce(),this.lastValue=p,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(o,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:p}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(p)}}clearDebounce(){const p=this.debouncedSubscription;null!==p&&(this.remove(p),p.unsubscribe(),this.debouncedSubscription=null)}}function o(r){r.debouncedNext()}},62615:(B,U,v)=>{"use strict";v.d(U,{g:()=>n});var T=v(98846),e=v(28744),t=v(33585);function n(b,I=T.P){const k=function(b){return b instanceof Date&&!isNaN(+b)}(b)?+b-I.now():Math.abs(b);return Y=>Y.lift(new o(k,I))}class o{constructor(I,x){this.delay=I,this.scheduler=x}call(I,x){return x.subscribe(new r(I,this.delay,this.scheduler))}}class r extends e.L{constructor(I,x,k){super(I),this.delay=x,this.scheduler=k,this.queue=[],this.active=!1,this.errored=!1}static dispatch(I){const x=I.source,k=x.queue,Y=I.scheduler,X=I.destination;for(;k.length>0&&k[0].time-Y.now()<=0;)k.shift().notification.observe(X);if(k.length>0){const it=Math.max(0,k[0].time-Y.now());this.schedule(I,it)}else this.unsubscribe(),x.active=!1}_schedule(I){this.active=!0,this.destination.add(I.schedule(r.dispatch,this.delay,{source:this,destination:this.destination,scheduler:I}))}scheduleNotification(I){if(!0===this.errored)return;const x=this.scheduler,k=new p(x.now()+this.delay,I);this.queue.push(k),!1===this.active&&this._schedule(x)}_next(I){this.scheduleNotification(t.P.createNext(I))}_error(I){this.errored=!0,this.queue=[],this.destination.error(I),this.unsubscribe()}_complete(){this.scheduleNotification(t.P.createComplete()),this.unsubscribe()}}class p{constructor(I,x){this.time=I,this.notification=x}}},57689:(B,U,v)=>{"use strict";v.d(U,{x:()=>a});var T=v(28744);function a(n,o){return r=>r.lift(new e(n,o))}class e{constructor(o,r){this.compare=o,this.keySelector=r}call(o,r){return r.subscribe(new t(o,this.compare,this.keySelector))}}class t extends T.L{constructor(o,r,p){super(o),this.keySelector=p,this.hasKey=!1,"function"==typeof r&&(this.compare=r)}compare(o,r){return o===r}_next(o){let r;try{const{keySelector:b}=this;r=b?b(o):o}catch(b){return this.destination.error(b)}let p=!1;if(this.hasKey)try{const{compare:b}=this;p=b(this.key,r)}catch(b){return this.destination.error(b)}else this.hasKey=!0;p||(this.key=r,this.destination.next(o))}}},63305:(B,U,v)=>{"use strict";v.d(U,{h:()=>a});var T=v(28744);function a(n,o){return function(p){return p.lift(new e(n,o))}}class e{constructor(o,r){this.predicate=o,this.thisArg=r}call(o,r){return r.subscribe(new t(o,this.predicate,this.thisArg))}}class t extends T.L{constructor(o,r,p){super(o),this.predicate=r,this.thisArg=p,this.count=0}_next(o){let r;try{r=this.predicate.call(this.thisArg,o,this.count++)}catch(p){return void this.destination.error(p)}r&&this.destination.next(o)}}},27813:(B,U,v)=>{"use strict";v.d(U,{x:()=>e});var T=v(28744),a=v(39734);function e(o){return r=>r.lift(new t(o))}class t{constructor(r){this.callback=r}call(r,p){return p.subscribe(new n(r,this.callback))}}class n extends T.L{constructor(r,p){super(r),this.add(new a.w(p))}}},88561:(B,U,v)=>{"use strict";v.d(U,{U:()=>a});var T=v(28744);function a(n,o){return function(p){if("function"!=typeof n)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return p.lift(new e(n,o))}}class e{constructor(o,r){this.project=o,this.thisArg=r}call(o,r){return r.subscribe(new t(o,this.project,this.thisArg))}}class t extends T.L{constructor(o,r,p){super(o),this.project=r,this.count=0,this.thisArg=p||this}_next(o){let r;try{r=this.project.call(this.thisArg,o,this.count++)}catch(p){return void this.destination.error(p)}this.destination.next(r)}}},4540:(B,U,v)=>{"use strict";v.d(U,{J:()=>e});var T=v(16513),a=v(37846);function e(t=Number.POSITIVE_INFINITY){return(0,T.zg)(a.y,t)}},16513:(B,U,v)=>{"use strict";v.d(U,{zg:()=>t});var T=v(88561),a=v(72850),e=v(86790);function t(p,b,I=Number.POSITIVE_INFINITY){return"function"==typeof b?x=>x.pipe(t((k,Y)=>(0,a.D)(p(k,Y)).pipe((0,T.U)((X,it)=>b(k,X,Y,it))),I)):("number"==typeof b&&(I=b),x=>x.lift(new n(p,I)))}class n{constructor(b,I=Number.POSITIVE_INFINITY){this.project=b,this.concurrent=I}call(b,I){return I.subscribe(new o(b,this.project,this.concurrent))}}class o extends e.Ds{constructor(b,I,x=Number.POSITIVE_INFINITY){super(b),this.project=I,this.concurrent=x,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(b){this.active<this.concurrent?this._tryNext(b):this.buffer.push(b)}_tryNext(b){let I;const x=this.index++;try{I=this.project(b,x)}catch(k){return void this.destination.error(k)}this.active++,this._innerSub(I)}_innerSub(b){const I=new e.IY(this),x=this.destination;x.add(I);const k=(0,e.ft)(b,I);k!==I&&x.add(k)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(b){this.destination.next(b)}notifyComplete(){const b=this.buffer;this.active--,b.length>0?this._next(b.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},95290:(B,U,v)=>{"use strict";v.d(U,{x:()=>a});var T=v(28744);function a(){return function(o){return o.lift(new e(o))}}class e{constructor(o){this.connectable=o}call(o,r){const{connectable:p}=this;p._refCount++;const b=new t(o,p),I=r.subscribe(b);return b.closed||(b.connection=p.connect()),I}}class t extends T.L{constructor(o,r){super(o),this.connectable=r}_unsubscribe(){const{connectable:o}=this;if(!o)return void(this.connection=null);this.connectable=null;const r=o._refCount;if(r<=0)return void(this.connection=null);if(o._refCount=r-1,r>1)return void(this.connection=null);const{connection:p}=this,b=o._connection;this.connection=null,b&&(!p||b===p)&&b.unsubscribe()}}},82564:(B,U,v)=>{"use strict";v.d(U,{B:()=>r});var T=v(30955);var t=v(95290),n=v(6006);function o(){return new n.xQ}function r(){return p=>(0,t.x)()(function(p,b){return function(x){let k;k="function"==typeof p?p:function(){return p};const Y=Object.create(x,T.N);return Y.source=x,Y.subjectFactory=k,Y}}(o)(p))}},41001:(B,U,v)=>{"use strict";v.d(U,{d:()=>At});var T=v(6006),a=v(25464),t=v(20708);const r=new class extends t.v{}(class extends a.o{constructor(pt,st){super(pt,st),this.scheduler=pt,this.work=st}schedule(pt,st=0){return st>0?super.schedule(pt,st):(this.delay=st,this.state=pt,this.scheduler.flush(this),this)}execute(pt,st){return st>0||this.closed?super.execute(pt,st):this._execute(pt,st)}requestAsyncId(pt,st,ot=0){return null!==ot&&ot>0||null===ot&&this.delay>0?super.requestAsyncId(pt,st,ot):pt.flush(this)}});var p=v(39734),b=v(28744),I=v(33585);class Y extends b.L{constructor(pt,st,ot=0){super(pt),this.scheduler=st,this.delay=ot}static dispatch(pt){const{notification:st,destination:ot}=pt;st.observe(ot),this.unsubscribe()}scheduleMessage(pt){this.destination.add(this.scheduler.schedule(Y.dispatch,this.delay,new X(pt,this.destination)))}_next(pt){this.scheduleMessage(I.P.createNext(pt))}_error(pt){this.scheduleMessage(I.P.createError(pt)),this.unsubscribe()}_complete(){this.scheduleMessage(I.P.createComplete()),this.unsubscribe()}}class X{constructor(pt,st){this.notification=pt,this.destination=st}}var it=v(67078),rt=v(2417);class ct extends T.xQ{constructor(pt=Number.POSITIVE_INFINITY,st=Number.POSITIVE_INFINITY,ot){super(),this.scheduler=ot,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=pt<1?1:pt,this._windowTime=st<1?1:st,st===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(pt){if(!this.isStopped){const st=this._events;st.push(pt),st.length>this._bufferSize&&st.shift()}super.next(pt)}nextTimeWindow(pt){this.isStopped||(this._events.push(new wt(this._getNow(),pt)),this._trimBufferThenGetEvents()),super.next(pt)}_subscribe(pt){const st=this._infiniteTimeWindow,ot=st?this._events:this._trimBufferThenGetEvents(),nt=this.scheduler,Tt=ot.length;let Ct;if(this.closed)throw new it.N;if(this.isStopped||this.hasError?Ct=p.w.EMPTY:(this.observers.push(pt),Ct=new rt.W(this,pt)),nt&&pt.add(pt=new Y(pt,nt)),st)for(let yt=0;yt<Tt&&!pt.closed;yt++)pt.next(ot[yt]);else for(let yt=0;yt<Tt&&!pt.closed;yt++)pt.next(ot[yt].value);return this.hasError?pt.error(this.thrownError):this.isStopped&&pt.complete(),Ct}_getNow(){return(this.scheduler||r).now()}_trimBufferThenGetEvents(){const pt=this._getNow(),st=this._bufferSize,ot=this._windowTime,nt=this._events,Tt=nt.length;let Ct=0;for(;Ct<Tt&&!(pt-nt[Ct].time<ot);)Ct++;return Tt>st&&(Ct=Math.max(Ct,Tt-st)),Ct>0&&nt.splice(0,Ct),nt}}class wt{constructor(pt,st){this.time=pt,this.value=st}}function At(Dt,pt,st){let ot;return ot=Dt&&"object"==typeof Dt?Dt:{bufferSize:Dt,windowTime:pt,refCount:!1,scheduler:st},nt=>nt.lift(function({bufferSize:Dt=Number.POSITIVE_INFINITY,windowTime:pt=Number.POSITIVE_INFINITY,refCount:st,scheduler:ot}){let nt,Ct,Tt=0,yt=!1,gt=!1;return function(Jt){let Pt;Tt++,!nt||yt?(yt=!1,nt=new ct(Dt,pt,ot),Pt=nt.subscribe(this),Ct=Jt.subscribe({next(oe){nt.next(oe)},error(oe){yt=!0,nt.error(oe)},complete(){gt=!0,Ct=void 0,nt.complete()}}),gt&&(Ct=void 0)):Pt=nt.subscribe(this),this.add(()=>{Tt--,Pt.unsubscribe(),Pt=void 0,Ct&&!gt&&st&&0===Tt&&(Ct.unsubscribe(),Ct=void 0,nt=void 0)})}}(ot))}},8055:(B,U,v)=>{"use strict";v.d(U,{T:()=>a});var T=v(28744);function a(n){return o=>o.lift(new e(n))}class e{constructor(o){this.total=o}call(o,r){return r.subscribe(new t(o,this.total))}}class t extends T.L{constructor(o,r){super(o),this.total=r,this.count=0}_next(o){++this.count>this.total&&this.destination.next(o)}}},63543:(B,U,v)=>{"use strict";v.d(U,{O:()=>e});var T=v(38895),a=v(97204);function e(...t){const n=t[t.length-1];return(0,a.K)(n)?(t.pop(),o=>(0,T.z)(t,o,n)):o=>(0,T.z)(t,o)}},32812:(B,U,v)=>{"use strict";v.d(U,{w:()=>t});var T=v(88561),a=v(72850),e=v(86790);function t(r,p){return"function"==typeof p?b=>b.pipe(t((I,x)=>(0,a.D)(r(I,x)).pipe((0,T.U)((k,Y)=>p(I,k,x,Y))))):b=>b.lift(new n(r))}class n{constructor(p){this.project=p}call(p,b){return b.subscribe(new o(p,this.project))}}class o extends e.Ds{constructor(p,b){super(p),this.project=b,this.index=0}_next(p){let b;const I=this.index++;try{b=this.project(p,I)}catch(x){return void this.destination.error(x)}this._innerSub(b)}_innerSub(p){const b=this.innerSubscription;b&&b.unsubscribe();const I=new e.IY(this),x=this.destination;x.add(I),this.innerSubscription=(0,e.ft)(p,I),this.innerSubscription!==I&&x.add(this.innerSubscription)}_complete(){const{innerSubscription:p}=this;(!p||p.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(p){this.destination.next(p)}}},59917:(B,U,v)=>{"use strict";v.d(U,{q:()=>t});var T=v(28744),a=v(49862),e=v(23974);function t(r){return p=>0===r?(0,e.c)():p.lift(new n(r))}class n{constructor(p){if(this.total=p,this.total<0)throw new a.W}call(p,b){return b.subscribe(new o(p,this.total))}}class o extends T.L{constructor(p,b){super(p),this.total=b,this.count=0}_next(p){const b=this.total,I=++this.count;I<=b&&(this.destination.next(p),I===b&&(this.destination.complete(),this.unsubscribe()))}}},27194:(B,U,v)=>{"use strict";v.d(U,{R:()=>a});var T=v(86790);function a(n){return o=>o.lift(new e(n))}class e{constructor(o){this.notifier=o}call(o,r){const p=new t(o),b=(0,T.ft)(this.notifier,new T.IY(p));return b&&!p.seenValue?(p.add(b),r.subscribe(p)):p}}class t extends T.Ds{constructor(o){super(o),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}},96286:(B,U,v)=>{"use strict";v.d(U,{b:()=>t});var T=v(28744);function a(){}var e=v(13673);function t(r,p,b){return function(x){return x.lift(new n(r,p,b))}}class n{constructor(p,b,I){this.nextOrObserver=p,this.error=b,this.complete=I}call(p,b){return b.subscribe(new o(p,this.nextOrObserver,this.error,this.complete))}}class o extends T.L{constructor(p,b,I,x){super(p),this._tapNext=a,this._tapError=a,this._tapComplete=a,this._tapError=I||a,this._tapComplete=x||a,(0,e.m)(b)?(this._context=this,this._tapNext=b):b&&(this._context=b,this._tapNext=b.next||a,this._tapError=b.error||a,this._tapComplete=b.complete||a)}_next(p){try{this._tapNext.call(this._context,p)}catch(b){return void this.destination.error(b)}this.destination.next(p)}_error(p){try{this._tapError.call(this._context,p)}catch(b){return void this.destination.error(b)}this.destination.error(p)}_complete(){try{this._tapComplete.call(this._context)}catch(p){return void this.destination.error(p)}return this.destination.complete()}}},59112:(B,U,v)=>{"use strict";v.d(U,{r:()=>e});var T=v(93948),a=v(39734);function e(t,n){return new T.y(o=>{const r=new a.w;let p=0;return r.add(n.schedule(function(){p!==t.length?(o.next(t[p++]),o.closed||r.add(this.schedule())):o.complete()})),r})}},25464:(B,U,v)=>{"use strict";v.d(U,{o:()=>e});var T=v(39734);class a extends T.w{constructor(n,o){super()}schedule(n,o=0){return this}}class e extends a{constructor(n,o){super(n,o),this.scheduler=n,this.work=o,this.pending=!1}schedule(n,o=0){if(this.closed)return this;this.state=n;const r=this.id,p=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(p,r,o)),this.pending=!0,this.delay=o,this.id=this.id||this.requestAsyncId(p,this.id,o),this}requestAsyncId(n,o,r=0){return setInterval(n.flush.bind(n,this),r)}recycleAsyncId(n,o,r=0){if(null!==r&&this.delay===r&&!1===this.pending)return o;clearInterval(o)}execute(n,o){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(n,o);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,o){let p,r=!1;try{this.work(n)}catch(b){r=!0,p=!!b&&b||new Error(b)}if(r)return this.unsubscribe(),p}_unsubscribe(){const n=this.id,o=this.scheduler,r=o.actions,p=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==p&&r.splice(p,1),null!=n&&(this.id=this.recycleAsyncId(o,n,null)),this.delay=null}}},20708:(B,U,v)=>{"use strict";v.d(U,{v:()=>a});let T=(()=>{class e{constructor(n,o=e.now){this.SchedulerAction=n,this.now=o}schedule(n,o=0,r){return new this.SchedulerAction(this,n).schedule(r,o)}}return e.now=()=>Date.now(),e})();class a extends T{constructor(t,n=T.now){super(t,()=>a.delegate&&a.delegate!==this?a.delegate.now():n()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,n=0,o){return a.delegate&&a.delegate!==this?a.delegate.schedule(t,n,o):super.schedule(t,n,o)}flush(t){const{actions:n}=this;if(this.active)return void n.push(t);let o;this.active=!0;do{if(o=t.execute(t.state,t.delay))break}while(t=n.shift());if(this.active=!1,o){for(;t=n.shift();)t.unsubscribe();throw o}}}},13438:(B,U,v)=>{"use strict";v.d(U,{E:()=>x});let T=1;const a=Promise.resolve(),e={};function t(Y){return Y in e&&(delete e[Y],!0)}const n={setImmediate(Y){const X=T++;return e[X]=!0,a.then(()=>t(X)&&Y()),X},clearImmediate(Y){t(Y)}};var r=v(25464),b=v(20708);const x=new class extends b.v{flush(X){this.active=!0,this.scheduled=void 0;const{actions:it}=this;let rt,ct=-1,wt=it.length;X=X||it.shift();do{if(rt=X.execute(X.state,X.delay))break}while(++ct<wt&&(X=it.shift()));if(this.active=!1,rt){for(;++ct<wt&&(X=it.shift());)X.unsubscribe();throw rt}}}(class extends r.o{constructor(X,it){super(X,it),this.scheduler=X,this.work=it}requestAsyncId(X,it,rt=0){return null!==rt&&rt>0?super.requestAsyncId(X,it,rt):(X.actions.push(this),X.scheduled||(X.scheduled=n.setImmediate(X.flush.bind(X,null))))}recycleAsyncId(X,it,rt=0){if(null!==rt&&rt>0||null===rt&&this.delay>0)return super.recycleAsyncId(X,it,rt);0===X.actions.length&&(n.clearImmediate(it),X.scheduled=void 0)}})},98846:(B,U,v)=>{"use strict";v.d(U,{P:()=>t});var T=v(25464);const t=new(v(20708).v)(T.o)},65389:(B,U,v)=>{"use strict";v.d(U,{hZ:()=>a});const a="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},27631:(B,U,v)=>{"use strict";v.d(U,{L:()=>T});const T="function"==typeof Symbol&&Symbol.observable||"@@observable"},59754:(B,U,v)=>{"use strict";v.d(U,{b:()=>T});const T="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},49862:(B,U,v)=>{"use strict";v.d(U,{W:()=>a});const a=(()=>{function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e})()},67078:(B,U,v)=>{"use strict";v.d(U,{N:()=>a});const a=(()=>{function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e})()},63863:(B,U,v)=>{"use strict";function T(a){setTimeout(()=>{throw a},0)}v.d(U,{z:()=>T})},37846:(B,U,v)=>{"use strict";function T(a){return a}v.d(U,{y:()=>T})},69622:(B,U,v)=>{"use strict";v.d(U,{k:()=>T});const T=Array.isArray||(a=>a&&"number"==typeof a.length)},1292:(B,U,v)=>{"use strict";v.d(U,{z:()=>T});const T=a=>a&&"number"==typeof a.length&&"function"!=typeof a},13673:(B,U,v)=>{"use strict";function T(a){return"function"==typeof a}v.d(U,{m:()=>T})},20153:(B,U,v)=>{"use strict";function T(a){return null!==a&&"object"==typeof a}v.d(U,{K:()=>T})},15648:(B,U,v)=>{"use strict";v.d(U,{b:()=>a});var T=v(93948);function a(e){return!!e&&(e instanceof T.y||"function"==typeof e.lift&&"function"==typeof e.subscribe)}},58253:(B,U,v)=>{"use strict";function T(a){return!!a&&"function"!=typeof a.subscribe&&"function"==typeof a.then}v.d(U,{t:()=>T})},97204:(B,U,v)=>{"use strict";function T(a){return a&&"function"==typeof a.schedule}v.d(U,{K:()=>T})},77040:(B,U,v)=>{"use strict";v.d(U,{s:()=>x});var T=v(54537),a=v(63863),t=v(65389),o=v(27631),p=v(1292),b=v(58253),I=v(20153);const x=k=>{if(k&&"function"==typeof k[o.L])return(k=>Y=>{const X=k[o.L]();if("function"!=typeof X.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return X.subscribe(Y)})(k);if((0,p.z)(k))return(0,T.V)(k);if((0,b.t)(k))return(k=>Y=>(k.then(X=>{Y.closed||(Y.next(X),Y.complete())},X=>Y.error(X)).then(null,a.z),Y))(k);if(k&&"function"==typeof k[t.hZ])return(k=>Y=>{const X=k[t.hZ]();for(;;){let it;try{it=X.next()}catch(rt){return Y.error(rt),Y}if(it.done){Y.complete();break}if(Y.next(it.value),Y.closed)break}return"function"==typeof X.return&&Y.add(()=>{X.return&&X.return()}),Y})(k);{const X=`You provided ${(0,I.K)(k)?"an invalid object":`'${k}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(X)}}},54537:(B,U,v)=>{"use strict";v.d(U,{V:()=>T});const T=a=>e=>{for(let t=0,n=a.length;t<n&&!e.closed;t++)e.next(a[t]);e.complete()}},970:(B,U,v)=>{"use strict";v.d(U,{d:()=>st});var T=v(36431),a=v(69622),e=v(28744),t=v(65389),n=v(86790);class r{constructor(nt){this.resultSelector=nt}call(nt,Tt){return Tt.subscribe(new p(nt,this.resultSelector))}}class p extends e.L{constructor(nt,Tt,Ct=Object.create(null)){super(nt),this.resultSelector=Tt,this.iterators=[],this.active=0,this.resultSelector="function"==typeof Tt?Tt:void 0}_next(nt){const Tt=this.iterators;(0,a.k)(nt)?Tt.push(new I(nt)):Tt.push("function"==typeof nt[t.hZ]?new b(nt[t.hZ]()):new x(this.destination,this,nt))}_complete(){const nt=this.iterators,Tt=nt.length;if(this.unsubscribe(),0!==Tt){this.active=Tt;for(let Ct=0;Ct<Tt;Ct++){let yt=nt[Ct];yt.stillUnsubscribed?this.destination.add(yt.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const nt=this.iterators,Tt=nt.length,Ct=this.destination;for(let _t=0;_t<Tt;_t++){let Jt=nt[_t];if("function"==typeof Jt.hasValue&&!Jt.hasValue())return}let yt=!1;const gt=[];for(let _t=0;_t<Tt;_t++){let Jt=nt[_t],Pt=Jt.next();if(Jt.hasCompleted()&&(yt=!0),Pt.done)return void Ct.complete();gt.push(Pt.value)}this.resultSelector?this._tryresultSelector(gt):Ct.next(gt),yt&&Ct.complete()}_tryresultSelector(nt){let Tt;try{Tt=this.resultSelector.apply(this,nt)}catch(Ct){return void this.destination.error(Ct)}this.destination.next(Tt)}}class b{constructor(nt){this.iterator=nt,this.nextResult=nt.next()}hasValue(){return!0}next(){const nt=this.nextResult;return this.nextResult=this.iterator.next(),nt}hasCompleted(){const nt=this.nextResult;return Boolean(nt&&nt.done)}}class I{constructor(nt){this.array=nt,this.index=0,this.length=0,this.length=nt.length}[t.hZ](){return this}next(nt){const Tt=this.index++;return Tt<this.length?{value:this.array[Tt],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class x extends n.Ds{constructor(nt,Tt,Ct){super(nt),this.parent=Tt,this.observable=Ct,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[t.hZ](){return this}next(){const nt=this.buffer;return 0===nt.length&&this.isComplete?{value:null,done:!0}:{value:nt.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(nt){this.buffer.push(nt),this.parent.checkIterators()}subscribe(){return(0,n.ft)(this.observable,new n.IY(this))}}var k=v(267),Y=v(90714),X=v(72850),it=v(62615),rt=v(96286),ct=v(32812),wt=v(88561),At=v(76894),Rt=v(42741),Dt=v(31887),pt=v(93124);let st=(()=>{class ot{constructor(Tt,Ct){this.http=Tt,this.loadShowUsageService=Ct,this.settings=null,this.linksSwagger=[],this.demoBlocks=[],this.swaggersDict=new Map,this.customCategories="",this.Init()}Init(){return function(...ot){const nt=ot[ot.length-1];return"function"==typeof nt&&ot.pop(),(0,T.n)(ot,void 0).lift(new r(nt))}(this.getSettings(),this.loadShowUsageService.getSwaggerLinks(),this.loadShowUsageService.getDemoBlocks(),this.loadShowUsageService.getCustomCategories()).pipe((0,it.g)(2e3),(0,rt.b)(([Tt,Ct,yt,gt])=>{this.settings=Tt,this.linksSwagger=Ct,this.demoBlocks=yt,this.customCategories=gt}),(0,ct.w)(()=>this.obtainSwaggers(this.linksSwagger)),(0,ct.w)(()=>(0,k.of)("")))}obtainSwaggers(Tt){var Ct=Tt.map(gt=>this.LoadSwaggersFromUrl(gt));return(0,Y.D)(Ct)}LoadSwaggersFromUrl(Tt){var Ct=Tt.link,yt=Tt.id||Tt.link,gt=new At.parseData(Ct);return(0,X.D)(gt.ParseSwagger()).pipe((0,rt.b)(Jt=>{console.log("swagger loaded:"+Ct,Jt),Jt.name=yt,this.swaggersDict.set(Ct,Jt)},Jt=>{console.error("swagger error:"+Ct,Jt)}))}getSettings(){var Tt=(new Date).toISOString();return this.http.get(`assets/settings.json?${Tt}`,{responseType:"text"}).pipe((0,wt.U)(Ct=>JSON.parse(Ct)))}}return ot.\u0275fac=function(Tt){return new(Tt||ot)(Rt.LFG(Dt.eN),Rt.LFG(pt.F))},ot.\u0275prov=Rt.Yz7({token:ot,factory:ot.\u0275fac}),ot})()},45725:(B,U,v)=>{"use strict";v.d(U,{v:()=>e});var T=v(6006),a=v(42741);let e=(()=>{class t{constructor(){this.sendData=new T.xQ}receiveData(){return this.sendData.asObservable()}sendDataToServer(o,r){this.sendData.next([o,r])}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac}),t})()},82454:(B,U,v)=>{"use strict";v.r(U),v.d(U,{DisplayBlocklyComponent:()=>gc});var T=v(61921),a=v(7832),e=v(7148);const t=[a.Events.VIEWPORT_CHANGE,a.Events.BLOCK_MOVE,a.Events.BLOCK_DELETE];class r{constructor(d){this.workspace_=d,this.width_=0,this.height_=0,this.top_=0,this.left_=0,this.lastScale_=1,this.cachedContentMetrics_=void 0}init(d){d=Number(d),this.padding_=isNaN(d)?10:d,this.svgGroup_=a.utils.dom.createSvgElement(a.utils.Svg.G,{class:"contentAreaHighlight"},null);const s=String(Math.random()).substring(2),u=a.utils.dom.createSvgElement(new a.utils.Svg("mask"),{id:"contentAreaHighlightMask"+s},this.svgGroup_);a.utils.dom.createSvgElement(a.utils.Svg.RECT,{x:0,y:0,width:"100%",height:"100%",fill:"white"},u),this.rect_=a.utils.dom.createSvgElement(a.utils.Svg.RECT,{x:0,y:0,rx:a.Bubble.BORDER_WIDTH,ry:a.Bubble.BORDER_WIDTH,fill:"black"},u),this.background_=a.utils.dom.createSvgElement(a.utils.Svg.RECT,{x:0,y:0,width:"100%",height:"100%",mask:"url(#contentAreaHighlightMask"+s+")"},this.svgGroup_),this.applyColor_();const f=this.workspace_.getMetricsManager();this.cachedContentMetrics_=f.getContentMetrics(!0),this.resize_(this.cachedContentMetrics_);const _=f.getAbsoluteMetrics();this.position_(this.cachedContentMetrics_,_),this.svgGroup_.style.transition="opacity 0.25s";const C=this.workspace_.getParentSvg();C.firstChild?C.insertBefore(this.svgGroup_,C.firstChild):C.appendChild(this.svgGroup_),this.onChangeWrapper_=this.onChange_.bind(this),this.workspace_.addChangeListener(this.onChangeWrapper_)}dispose(){this.svgGroup_&&a.utils.dom.removeNode(this.svgGroup_),this.onChangeWrapper_&&a.unbindEvent_(this.onChangeWrapper_)}onChange_(d){if(d.type===a.Events.THEME_CHANGE)this.applyColor_();else if(-1!==t.indexOf(d.type)){const s=this.workspace_.getMetricsManager();d.type!==a.Events.VIEWPORT_CHANGE&&(this.cachedContentMetrics_=s.getContentMetrics(!0),this.resize_(this.cachedContentMetrics_));const u=s.getAbsoluteMetrics();this.position_(this.cachedContentMetrics_,u)}else d.type===a.Events.BLOCK_DRAG&&this.handleBlockDrag_(d)}handleBlockDrag_(d){this.svgGroup_.setAttribute("opacity",d.isStart?"0":"1")}applyColor_(){const s=this.workspace_.getTheme().getComponentStyle("workspaceBackgroundColour")||"#ffffff",u=a.utils.colour.blend("#000",s,.1),f=a.utils.colour.blend("#fff",s,.1);this.background_.setAttribute("fill","#ffffff"===s||"#fff"===s?u:f)}resize_(d){const s=d.width?d.width+2*this.padding_:0,u=d.height?d.height+2*this.padding_:0;s!==this.width_&&(this.width_=s,this.rect_.setAttribute("width",s)),u!==this.height_&&(this.height_=u,this.rect_.setAttribute("height",u))}position_(d,s){const _=this.workspace_.scale,C=s.top+d.top*_- -this.workspace_.scrollY-this.padding_*_,D=s.left+d.left*_- -this.workspace_.scrollX-this.padding_*_;(C!==this.top_||D!==this.left_||this.lastScale_!==_)&&(this.top_=C,this.left_=D,this.lastScale_=_,this.rect_.setAttribute("transform","translate("+D+","+C+") scale("+_+")"))}}var p=v(57470),b=v(39855),I=v(76894),x=v(45149);const Y="undefined"==typeof window?function(m){return m()}:window.requestAnimationFrame;function X(m,d,s){const u=s||(C=>Array.prototype.slice.call(C));let f=!1,_=[];return function(...C){_=u(C),f||(f=!0,Y.call(window,()=>{f=!1,m.apply(d,_)}))}}const rt=m=>"start"===m?"left":"end"===m?"right":"center",ct=(m,d,s)=>"start"===m?d:"end"===m?s:(d+s)/2;function At(){}const Rt=function(){let m=0;return function(){return m++}}();function Dt(m){return null==m}function pt(m){if(Array.isArray&&Array.isArray(m))return!0;const d=Object.prototype.toString.call(m);return"[object"===d.substr(0,7)&&"Array]"===d.substr(-6)}function st(m){return null!==m&&"[object Object]"===Object.prototype.toString.call(m)}const ot=m=>("number"==typeof m||m instanceof Number)&&isFinite(+m);function nt(m,d){return ot(m)?m:d}function Tt(m,d){return void 0===m?d:m}const yt=(m,d)=>"string"==typeof m&&m.endsWith("%")?parseFloat(m)/100*d:+m;function gt(m,d,s){if(m&&"function"==typeof m.call)return m.apply(s,d)}function _t(m,d,s,u){let f,_,C;if(pt(m))if(_=m.length,u)for(f=_-1;f>=0;f--)d.call(s,m[f],f);else for(f=0;f<_;f++)d.call(s,m[f],f);else if(st(m))for(C=Object.keys(m),_=C.length,f=0;f<_;f++)d.call(s,m[C[f]],C[f])}function Jt(m,d){let s,u,f,_;if(!m||!d||m.length!==d.length)return!1;for(s=0,u=m.length;s<u;++s)if(f=m[s],_=d[s],f.datasetIndex!==_.datasetIndex||f.index!==_.index)return!1;return!0}function Pt(m){if(pt(m))return m.map(Pt);if(st(m)){const d=Object.create(null),s=Object.keys(m),u=s.length;let f=0;for(;f<u;++f)d[s[f]]=Pt(m[s[f]]);return d}return m}function oe(m){return-1===["__proto__","prototype","constructor"].indexOf(m)}function Ne(m,d,s,u){if(!oe(m))return;const f=d[m],_=s[m];st(f)&&st(_)?Xe(f,_,u):d[m]=Pt(_)}function Xe(m,d,s){const u=pt(d)?d:[d],f=u.length;if(!st(m))return m;const _=(s=s||{}).merger||Ne;for(let C=0;C<f;++C){if(!st(d=u[C]))continue;const D=Object.keys(d);for(let A=0,F=D.length;A<F;++A)_(D[A],m,d,s)}return m}function Ce(m,d){return Xe(m,d,{merger:Ze})}function Ze(m,d,s){if(!oe(m))return;const u=d[m],f=s[m];st(u)&&st(f)?Ce(u,f):Object.prototype.hasOwnProperty.call(d,m)||(d[m]=Pt(f))}function ce(m,d){const s=m.indexOf(".",d);return-1===s?m.length:s}function Pe(m,d){if(""===d)return m;let s=0,u=ce(d,s);for(;m&&u>s;)m=m[d.substr(s,u-s)],s=u+1,u=ce(d,s);return m}function qe(m){return m.charAt(0).toUpperCase()+m.slice(1)}const oi=m=>void 0!==m,wi=m=>"function"==typeof m,Ni=Math.PI,ui=2*Ni,Oe=ui+Ni,Be=Number.POSITIVE_INFINITY,Ft=Ni/180,ie=Ni/2,hi=Ni/4,fe=2*Ni/3,di=Math.log10,ge=Math.sign;function Ve(m){const d=Math.round(m);m=at(m,d,m/1e3)?d:m;const s=Math.pow(10,Math.floor(di(m))),u=m/s;return(u<=1?1:u<=2?2:u<=5?5:10)*s}function $(m){return!isNaN(parseFloat(m))&&isFinite(m)}function at(m,d,s){return Math.abs(m-d)<s}function Qt(m,d,s){let u,f,_;for(u=0,f=m.length;u<f;u++)_=m[u][s],isNaN(_)||(d.min=Math.min(d.min,_),d.max=Math.max(d.max,_))}function ye(m){return m*(Ni/180)}function Ee(m){return m*(180/Ni)}function ni(m){if(!ot(m))return;let d=1,s=0;for(;Math.round(m*d)/d!==m;)d*=10,s++;return s}function Mi(m,d){return Math.sqrt(Math.pow(d.x-m.x,2)+Math.pow(d.y-m.y,2))}function vi(m,d){return(m-d+Oe)%ui-Ni}function pi(m){return(m%ui+ui)%ui}function Ue(m,d,s,u){const f=pi(m),_=pi(d),C=pi(s),D=pi(_-f),A=pi(C-f),F=pi(f-_),K=pi(f-C);return f===_||f===C||u&&_===C||D>A&&F<K}function Ke(m,d,s){return Math.max(d,Math.min(s,m))}const xe=m=>0===m||1===m,ii=(m,d,s)=>-Math.pow(2,10*(m-=1))*Math.sin((m-d)*ui/s),yi=(m,d,s)=>Math.pow(2,-10*m)*Math.sin((m-d)*ui/s)+1,Zi={linear:m=>m,easeInQuad:m=>m*m,easeOutQuad:m=>-m*(m-2),easeInOutQuad:m=>(m/=.5)<1?.5*m*m:-.5*(--m*(m-2)-1),easeInCubic:m=>m*m*m,easeOutCubic:m=>(m-=1)*m*m+1,easeInOutCubic:m=>(m/=.5)<1?.5*m*m*m:.5*((m-=2)*m*m+2),easeInQuart:m=>m*m*m*m,easeOutQuart:m=>-((m-=1)*m*m*m-1),easeInOutQuart:m=>(m/=.5)<1?.5*m*m*m*m:-.5*((m-=2)*m*m*m-2),easeInQuint:m=>m*m*m*m*m,easeOutQuint:m=>(m-=1)*m*m*m*m+1,easeInOutQuint:m=>(m/=.5)<1?.5*m*m*m*m*m:.5*((m-=2)*m*m*m*m+2),easeInSine:m=>1-Math.cos(m*ie),easeOutSine:m=>Math.sin(m*ie),easeInOutSine:m=>-.5*(Math.cos(Ni*m)-1),easeInExpo:m=>0===m?0:Math.pow(2,10*(m-1)),easeOutExpo:m=>1===m?1:1-Math.pow(2,-10*m),easeInOutExpo:m=>xe(m)?m:m<.5?.5*Math.pow(2,10*(2*m-1)):.5*(2-Math.pow(2,-10*(2*m-1))),easeInCirc:m=>m>=1?m:-(Math.sqrt(1-m*m)-1),easeOutCirc:m=>Math.sqrt(1-(m-=1)*m),easeInOutCirc:m=>(m/=.5)<1?-.5*(Math.sqrt(1-m*m)-1):.5*(Math.sqrt(1-(m-=2)*m)+1),easeInElastic:m=>xe(m)?m:ii(m,.075,.3),easeOutElastic:m=>xe(m)?m:yi(m,.075,.3),easeInOutElastic(m){const d=.1125;return xe(m)?m:m<.5?.5*ii(2*m,d,.45):.5+.5*yi(2*m-1,d,.45)},easeInBack(m){const d=1.70158;return m*m*((d+1)*m-d)},easeOutBack(m){const d=1.70158;return(m-=1)*m*((d+1)*m+d)+1},easeInOutBack(m){let d=1.70158;return(m/=.5)<1?m*m*((1+(d*=1.525))*m-d)*.5:.5*((m-=2)*m*((1+(d*=1.525))*m+d)+2)},easeInBounce:m=>1-Zi.easeOutBounce(1-m),easeOutBounce(m){const d=7.5625,s=2.75;return m<1/s?d*m*m:m<2/s?d*(m-=1.5/s)*m+.75:m<2.5/s?d*(m-=2.25/s)*m+.9375:d*(m-=2.625/s)*m+.984375},easeInOutBounce:m=>m<.5?.5*Zi.easeInBounce(2*m):.5*Zi.easeOutBounce(2*m-1)+.5},ji={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Ui="0123456789ABCDEF",Xi=m=>Ui[15&m],Re=m=>Ui[(240&m)>>4]+Ui[15&m],Me=m=>(240&m)>>4==(15&m);function be(m){return m+.5|0}const Je=(m,d,s)=>Math.max(Math.min(m,s),d);function Pi(m){return Je(be(2.55*m),0,255)}function Oi(m){return Je(be(255*m),0,255)}function kn(m){return Je(be(m/2.55)/100,0,1)}function Wn(m){return Je(be(100*m),0,100)}const so=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,Do=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Eo(m,d,s){const u=d*Math.min(s,1-s),f=(_,C=(_+m/30)%12)=>s-u*Math.max(Math.min(C-3,9-C,1),-1);return[f(0),f(8),f(4)]}function hs(m,d,s){const u=(f,_=(f+m/60)%6)=>s-s*d*Math.max(Math.min(_,4-_,1),0);return[u(5),u(3),u(1)]}function ro(m,d,s){const u=Eo(m,1,.5);let f;for(d+s>1&&(f=1/(d+s),d*=f,s*=f),f=0;f<3;f++)u[f]*=1-d-s,u[f]+=d;return u}function Li(m){const s=m.r/255,u=m.g/255,f=m.b/255,_=Math.max(s,u,f),C=Math.min(s,u,f),D=(_+C)/2;let A,F,K;return _!==C&&(K=_-C,F=D>.5?K/(2-_-C):K/(_+C),A=_===s?(u-f)/K+(u<f?6:0):_===u?(f-s)/K+2:(s-u)/K+4,A=60*A+.5),[0|A,F||0,D]}function pn(m,d,s,u){return(Array.isArray(d)?m(d[0],d[1],d[2]):m(d,s,u)).map(Oi)}function Fn(m,d,s){return pn(Eo,m,d,s)}function xn(m){return(m%360+360)%360}const Vs={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},gn={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let ke;function $e(m,d,s){if(m){let u=Li(m);u[d]=Math.max(0,Math.min(u[d]+u[d]*s,0===d?360:1)),u=Fn(u),m.r=u[0],m.g=u[1],m.b=u[2]}}function _i(m,d){return m&&Object.assign(d||{},m)}function on(m){var d={r:0,g:0,b:0,a:255};return Array.isArray(m)?m.length>=3&&(d={r:m[0],g:m[1],b:m[2],a:255},m.length>3&&(d.a=Oi(m[3]))):(d=_i(m,{r:0,g:0,b:0,a:1})).a=Oi(d.a),d}function fn(m){return"r"===m.charAt(0)?function(m){const d=so.exec(m);let u,f,_,s=255;if(d){if(d[7]!==u){const C=+d[7];s=255&(d[8]?Pi(C):255*C)}return u=+d[1],f=+d[3],_=+d[5],u=255&(d[2]?Pi(u):u),f=255&(d[4]?Pi(f):f),_=255&(d[6]?Pi(_):_),{r:u,g:f,b:_,a:s}}}(m):function(m){const d=Do.exec(m);let u,s=255;if(!d)return;d[5]!==u&&(s=d[6]?Pi(+d[5]):Oi(+d[5]));const f=xn(+d[2]),_=+d[3]/100,C=+d[4]/100;return u="hwb"===d[1]?function(m,d,s){return pn(ro,m,d,s)}(f,_,C):"hsv"===d[1]?function(m,d,s){return pn(hs,m,d,s)}(f,_,C):Fn(f,_,C),{r:u[0],g:u[1],b:u[2],a:s}}(m)}class An{constructor(d){if(d instanceof An)return d;const s=typeof d;let u;"object"===s?u=on(d):"string"===s&&(u=function(m){var s,d=m.length;return"#"===m[0]&&(4===d||5===d?s={r:255&17*ji[m[1]],g:255&17*ji[m[2]],b:255&17*ji[m[3]],a:5===d?17*ji[m[4]]:255}:(7===d||9===d)&&(s={r:ji[m[1]]<<4|ji[m[2]],g:ji[m[3]]<<4|ji[m[4]],b:ji[m[5]]<<4|ji[m[6]],a:9===d?ji[m[7]]<<4|ji[m[8]]:255})),s}(d)||function(m){ke||(ke=function(){const m={},d=Object.keys(gn),s=Object.keys(Vs);let u,f,_,C,D;for(u=0;u<d.length;u++){for(C=D=d[u],f=0;f<s.length;f++)_=s[f],D=D.replace(_,Vs[_]);_=parseInt(gn[C],16),m[D]=[_>>16&255,_>>8&255,255&_]}return m}(),ke.transparent=[0,0,0,0]);const d=ke[m.toLowerCase()];return d&&{r:d[0],g:d[1],b:d[2],a:4===d.length?d[3]:255}}(d)||fn(d)),this._rgb=u,this._valid=!!u}get valid(){return this._valid}get rgb(){var d=_i(this._rgb);return d&&(d.a=kn(d.a)),d}set rgb(d){this._rgb=on(d)}rgbString(){return this._valid?(m=this._rgb)&&(m.a<255?`rgba(${m.r}, ${m.g}, ${m.b}, ${kn(m.a)})`:`rgb(${m.r}, ${m.g}, ${m.b})`):this._rgb;var m}hexString(){return this._valid?(d=function(m){return Me(m.r)&&Me(m.g)&&Me(m.b)&&Me(m.a)}(m=this._rgb)?Xi:Re,m&&"#"+d(m.r)+d(m.g)+d(m.b)+(m.a<255?d(m.a):"")):this._rgb;var m,d}hslString(){return this._valid?function(m){if(!m)return;const d=Li(m),s=d[0],u=Wn(d[1]),f=Wn(d[2]);return m.a<255?`hsla(${s}, ${u}%, ${f}%, ${kn(m.a)})`:`hsl(${s}, ${u}%, ${f}%)`}(this._rgb):this._rgb}mix(d,s){const u=this;if(d){const f=u.rgb,_=d.rgb;let C;const D=s===C?.5:s,A=2*D-1,F=f.a-_.a,K=((A*F==-1?A:(A+F)/(1+A*F))+1)/2;C=1-K,f.r=255&K*f.r+C*_.r+.5,f.g=255&K*f.g+C*_.g+.5,f.b=255&K*f.b+C*_.b+.5,f.a=D*f.a+(1-D)*_.a,u.rgb=f}return u}clone(){return new An(this.rgb)}alpha(d){return this._rgb.a=Oi(d),this}clearer(d){return this._rgb.a*=1-d,this}greyscale(){const d=this._rgb,s=be(.3*d.r+.59*d.g+.11*d.b);return d.r=d.g=d.b=s,this}opaquer(d){return this._rgb.a*=1+d,this}negate(){const d=this._rgb;return d.r=255-d.r,d.g=255-d.g,d.b=255-d.b,this}lighten(d){return $e(this._rgb,2,d),this}darken(d){return $e(this._rgb,2,-d),this}saturate(d){return $e(this._rgb,1,d),this}desaturate(d){return $e(this._rgb,1,-d),this}rotate(d){return function(m,d){var s=Li(m);s[0]=xn(s[0]+d),s=Fn(s),m.r=s[0],m.g=s[1],m.b=s[2]}(this._rgb,d),this}}function cn(m){return new An(m)}const ds=m=>m instanceof CanvasGradient||m instanceof CanvasPattern;function gr(m){return ds(m)?m:cn(m)}function ps(m){return ds(m)?m:cn(m).saturate(.5).darken(.1).hexString()}const No=Object.create(null),Ao=Object.create(null);function rs(m,d){if(!d)return m;const s=d.split(".");for(let u=0,f=s.length;u<f;++u){const _=s[u];m=m[_]||(m[_]=Object.create(null))}return m}function Uo(m,d,s){return"string"==typeof d?Xe(rs(m,d),s):Xe(rs(m,""),d)}var On=new class{constructor(d){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,u)=>ps(u.backgroundColor),this.hoverBorderColor=(s,u)=>ps(u.borderColor),this.hoverColor=(s,u)=>ps(u.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.describe(d)}set(d,s){return Uo(this,d,s)}get(d){return rs(this,d)}describe(d,s){return Uo(Ao,d,s)}override(d,s){return Uo(No,d,s)}route(d,s,u,f){const _=rs(this,d),C=rs(this,u),D="_"+s;Object.defineProperties(_,{[D]:{value:_[s],writable:!0},[s]:{enumerable:!0,get(){const A=this[D],F=C[f];return st(A)?Object.assign({},F,A):Tt(A,F)},set(A){this[D]=A}}})}}({_scriptable:m=>!m.startsWith("on"),_indexable:m=>"events"!==m,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function lo(m,d,s,u,f){let _=d[f];return _||(_=d[f]=m.measureText(f).width,s.push(f)),_>u&&(u=_),u}function ks(m,d,s,u){let f=(u=u||{}).data=u.data||{},_=u.garbageCollect=u.garbageCollect||[];u.font!==d&&(f=u.data={},_=u.garbageCollect=[],u.font=d),m.save(),m.font=d;let C=0;const D=s.length;let A,F,K,ut,It;for(A=0;A<D;A++)if(ut=s[A],null!=ut&&!0!==pt(ut))C=lo(m,f,_,C,ut);else if(pt(ut))for(F=0,K=ut.length;F<K;F++)It=ut[F],null!=It&&!pt(It)&&(C=lo(m,f,_,C,It));m.restore();const Vt=_.length/2;if(Vt>s.length){for(A=0;A<Vt;A++)delete f[_[A]];_.splice(0,Vt)}return C}function Co(m,d,s){const u=m.currentDevicePixelRatio,f=0!==s?Math.max(s/2,.5):0;return Math.round((d-f)*u)/u+f}function ws(m,d){(d=d||m.getContext("2d")).save(),d.resetTransform(),d.clearRect(0,0,m.width,m.height),d.restore()}function ns(m,d,s,u){let f,_,C,D,A;const F=d.pointStyle,K=d.rotation,ut=d.radius;let It=(K||0)*Ft;if(F&&"object"==typeof F&&(f=F.toString(),"[object HTMLImageElement]"===f||"[object HTMLCanvasElement]"===f))return m.save(),m.translate(s,u),m.rotate(It),m.drawImage(F,-F.width/2,-F.height/2,F.width,F.height),void m.restore();if(!(isNaN(ut)||ut<=0)){switch(m.beginPath(),F){default:m.arc(s,u,ut,0,ui),m.closePath();break;case"triangle":m.moveTo(s+Math.sin(It)*ut,u-Math.cos(It)*ut),It+=fe,m.lineTo(s+Math.sin(It)*ut,u-Math.cos(It)*ut),It+=fe,m.lineTo(s+Math.sin(It)*ut,u-Math.cos(It)*ut),m.closePath();break;case"rectRounded":A=.516*ut,D=ut-A,_=Math.cos(It+hi)*D,C=Math.sin(It+hi)*D,m.arc(s-_,u-C,A,It-Ni,It-ie),m.arc(s+C,u-_,A,It-ie,It),m.arc(s+_,u+C,A,It,It+ie),m.arc(s-C,u+_,A,It+ie,It+Ni),m.closePath();break;case"rect":if(!K){D=Math.SQRT1_2*ut,m.rect(s-D,u-D,2*D,2*D);break}It+=hi;case"rectRot":_=Math.cos(It)*ut,C=Math.sin(It)*ut,m.moveTo(s-_,u-C),m.lineTo(s+C,u-_),m.lineTo(s+_,u+C),m.lineTo(s-C,u+_),m.closePath();break;case"crossRot":It+=hi;case"cross":_=Math.cos(It)*ut,C=Math.sin(It)*ut,m.moveTo(s-_,u-C),m.lineTo(s+_,u+C),m.moveTo(s+C,u-_),m.lineTo(s-C,u+_);break;case"star":_=Math.cos(It)*ut,C=Math.sin(It)*ut,m.moveTo(s-_,u-C),m.lineTo(s+_,u+C),m.moveTo(s+C,u-_),m.lineTo(s-C,u+_),It+=hi,_=Math.cos(It)*ut,C=Math.sin(It)*ut,m.moveTo(s-_,u-C),m.lineTo(s+_,u+C),m.moveTo(s+C,u-_),m.lineTo(s-C,u+_);break;case"line":_=Math.cos(It)*ut,C=Math.sin(It)*ut,m.moveTo(s-_,u-C),m.lineTo(s+_,u+C);break;case"dash":m.moveTo(s,u),m.lineTo(s+Math.cos(It)*ut,u+Math.sin(It)*ut)}m.fill(),d.borderWidth>0&&m.stroke()}}function Oo(m,d,s){return s=s||.5,!d||m&&m.x>d.left-s&&m.x<d.right+s&&m.y>d.top-s&&m.y<d.bottom+s}function go(m,d){m.save(),m.beginPath(),m.rect(d.left,d.top,d.right-d.left,d.bottom-d.top),m.clip()}function er(m){m.restore()}function Or(m,d,s,u,f){if(!d)return m.lineTo(s.x,s.y);if("middle"===f){const _=(d.x+s.x)/2;m.lineTo(_,d.y),m.lineTo(_,s.y)}else"after"===f!=!!u?m.lineTo(d.x,s.y):m.lineTo(s.x,d.y);m.lineTo(s.x,s.y)}function ir(m,d,s,u){if(!d)return m.lineTo(s.x,s.y);m.bezierCurveTo(u?d.cp1x:d.cp2x,u?d.cp1y:d.cp2y,u?s.cp2x:s.cp1x,u?s.cp2y:s.cp1y,s.x,s.y)}function fs(m,d,s,u,f,_={}){const C=pt(d)?d:[d],D=_.strokeWidth>0&&""!==_.strokeColor;let A,F;for(m.save(),m.font=f.string,function(m,d){d.translation&&m.translate(d.translation[0],d.translation[1]),Dt(d.rotation)||m.rotate(d.rotation),d.color&&(m.fillStyle=d.color),d.textAlign&&(m.textAlign=d.textAlign),d.textBaseline&&(m.textBaseline=d.textBaseline)}(m,_),A=0;A<C.length;++A)F=C[A],D&&(_.strokeColor&&(m.strokeStyle=_.strokeColor),Dt(_.strokeWidth)||(m.lineWidth=_.strokeWidth),m.strokeText(F,s,u,_.maxWidth)),m.fillText(F,s,u,_.maxWidth),oa(m,s,u,F,_),u+=f.lineHeight;m.restore()}function oa(m,d,s,u,f){if(f.strikethrough||f.underline){const _=m.measureText(u),C=d-_.actualBoundingBoxLeft,D=d+_.actualBoundingBoxRight,A=s-_.actualBoundingBoxAscent,F=s+_.actualBoundingBoxDescent,K=f.strikethrough?(A+F)/2:F;m.strokeStyle=m.fillStyle,m.beginPath(),m.lineWidth=f.decorationWidth||2,m.moveTo(C,K),m.lineTo(D,K),m.stroke()}}function xr(m,d){const{x:s,y:u,w:f,h:_,radius:C}=d;m.arc(s+C.topLeft,u+C.topLeft,C.topLeft,-ie,Ni,!0),m.lineTo(s,u+_-C.bottomLeft),m.arc(s+C.bottomLeft,u+_-C.bottomLeft,C.bottomLeft,Ni,ie,!0),m.lineTo(s+f-C.bottomRight,u+_),m.arc(s+f-C.bottomRight,u+_-C.bottomRight,C.bottomRight,ie,0,!0),m.lineTo(s+f,u+C.topRight),m.arc(s+f-C.topRight,u+C.topRight,C.topRight,0,-ie,!0),m.lineTo(s+C.topLeft,u)}const zr=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),Ea=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function Ts(m,d){const s=(""+m).match(zr);if(!s||"normal"===s[1])return 1.2*d;switch(m=+s[2],s[3]){case"px":return m;case"%":m/=100}return d*m}const gs=m=>+m||0;function Ks(m,d){const s={},u=st(d),f=u?Object.keys(d):d,_=st(m)?u?C=>Tt(m[C],m[d[C]]):C=>m[C]:()=>m;for(const C of f)s[C]=gs(_(C));return s}function sa(m){return Ks(m,{top:"y",right:"x",bottom:"y",left:"x"})}function Cs(m){return Ks(m,["topLeft","topRight","bottomLeft","bottomRight"])}function Yo(m){const d=sa(m);return d.width=d.left+d.right,d.height=d.top+d.bottom,d}function bo(m,d){let s=Tt((m=m||{}).size,(d=d||On.font).size);"string"==typeof s&&(s=parseInt(s,10));let u=Tt(m.style,d.style);u&&!(""+u).match(Ea)&&(console.warn('Invalid font style specified: "'+u+'"'),u="");const f={family:Tt(m.family,d.family),lineHeight:Ts(Tt(m.lineHeight,d.lineHeight),s),size:s,style:u,weight:Tt(m.weight,d.weight),string:""};return f.string=function(m){return!m||Dt(m.size)||Dt(m.family)?null:(m.style?m.style+" ":"")+(m.weight?m.weight+" ":"")+m.size+"px "+m.family}(f),f}function Ls(m,d,s,u){let _,C,D,f=!0;for(_=0,C=m.length;_<C;++_)if(D=m[_],void 0!==D&&(void 0!==d&&"function"==typeof D&&(D=D(d),f=!1),void 0!==s&&pt(D)&&(D=D[s%D.length],f=!1),void 0!==D))return u&&!f&&(u.cacheable=!1),D}function $o(m,d){return Object.assign(Object.create(m),d)}function kr(m,d,s){s=s||(C=>m[C]<d);let _,u=m.length-1,f=0;for(;u-f>1;)_=f+u>>1,s(_)?f=_:u=_;return{lo:f,hi:u}}const Ds=(m,d,s)=>kr(m,s,u=>m[u][d]<s),Ns=(m,d,s)=>kr(m,s,u=>m[u][d]>=s),Us=["push","pop","shift","splice","unshift"];function Js(m,d){const s=m._chartjs;if(!s)return;const u=s.listeners,f=u.indexOf(d);-1!==f&&u.splice(f,1),!(u.length>0)&&(Us.forEach(_=>{delete m[_]}),delete m._chartjs)}function ho(m){const d=new Set;let s,u;for(s=0,u=m.length;s<u;++s)d.add(m[s]);return d.size===u?m:Array.from(d)}function Is(m,d=[""],s=m,u,f=(()=>m[0])){oi(u)||(u=q("_fallback",m));const _={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:m,_rootScopes:s,_fallback:u,_getTarget:f,override:C=>Is([C,...m],d,s,u)};return new Proxy(_,{deleteProperty:(C,D)=>(delete C[D],delete C._keys,delete m[0][D],!0),get:(C,D)=>Po(C,D,()=>function(m,d,s,u){let f;for(const _ of d)if(f=q(Lr(_,m),s),oi(f))return mr(m,f)?bt(s,u,m,f):f}(D,d,m,C)),getOwnPropertyDescriptor:(C,D)=>Reflect.getOwnPropertyDescriptor(C._scopes[0],D),getPrototypeOf:()=>Reflect.getPrototypeOf(m[0]),has:(C,D)=>et(C).includes(D),ownKeys:C=>et(C),set:(C,D,A)=>((C._storage||(C._storage=f()))[D]=A,delete C[D],delete C._keys,!0)})}function Qn(m,d,s,u){const f={_cacheable:!1,_proxy:m,_context:d,_subProxy:s,_stack:new Set,_descriptors:aa(m,u),setContext:_=>Qn(m,_,s,u),override:_=>Qn(m.override(_),d,s,u)};return new Proxy(f,{deleteProperty:(_,C)=>(delete _[C],delete m[C],!0),get:(_,C,D)=>Po(_,C,()=>function(m,d,s){const{_proxy:u,_context:f,_subProxy:_,_descriptors:C}=m;let D=u[d];return wi(D)&&C.isScriptable(d)&&(D=function(m,d,s,u){const{_proxy:f,_context:_,_subProxy:C,_stack:D}=s;if(D.has(m))throw new Error("Recursion detected: "+Array.from(D).join("->")+"->"+m);return D.add(m),d=d(_,C||u),D.delete(m),st(d)&&(d=bt(f._scopes,f,m,d)),d}(d,D,m,s)),pt(D)&&D.length&&(D=function(m,d,s,u){const{_proxy:f,_context:_,_subProxy:C,_descriptors:D}=s;if(oi(_.index)&&u(m))d=d[_.index%d.length];else if(st(d[0])){const A=d,F=f._scopes.filter(K=>K!==A);d=[];for(const K of A){const ut=bt(F,f,m,K);d.push(Qn(ut,_,C&&C[m],D))}}return d}(d,D,m,C.isIndexable)),mr(d,D)&&(D=Qn(D,f,_&&_[d],C)),D}(_,C,D)),getOwnPropertyDescriptor:(_,C)=>_._descriptors.allKeys?Reflect.has(m,C)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(m,C),getPrototypeOf:()=>Reflect.getPrototypeOf(m),has:(_,C)=>Reflect.has(m,C),ownKeys:()=>Reflect.ownKeys(m),set:(_,C,D)=>(m[C]=D,delete _[C],!0)})}function aa(m,d={scriptable:!0,indexable:!0}){const{_scriptable:s=d.scriptable,_indexable:u=d.indexable,_allKeys:f=d.allKeys}=m;return{allKeys:f,scriptable:s,indexable:u,isScriptable:wi(s)?s:()=>s,isIndexable:wi(u)?u:()=>u}}const Lr=(m,d)=>m?m+qe(d):d,mr=(m,d)=>st(d)&&"adapters"!==m;function Po(m,d,s){if(Object.prototype.hasOwnProperty.call(m,d))return m[d];const u=s();return m[d]=u,u}function la(m,d,s){return wi(m)?m(d,s):m}const $s=(m,d)=>!0===m?d:"string"==typeof m?Pe(d,m):void 0;function Vi(m,d,s,u){for(const f of d){const _=$s(s,f);if(_){m.add(_);const C=la(_._fallback,s,_);if(oi(C)&&C!==s&&C!==u)return C}else if(!1===_&&oi(u)&&s!==u)return null}return!1}function bt(m,d,s,u){const f=d._rootScopes,_=la(d._fallback,s,u),C=[...m,...f],D=new Set;D.add(u);let A=jt(D,C,s,_||s);return!(null===A||oi(_)&&_!==s&&(A=jt(D,C,_,A),null===A))&&Is(Array.from(D),[""],f,_,()=>function(m,d,s){const u=m._getTarget();d in u||(u[d]={});const f=u[d];return pt(f)&&st(s)?s:f}(d,s,u))}function jt(m,d,s,u){for(;s;)s=Vi(m,d,s,u);return s}function q(m,d){for(const s of d){if(!s)continue;const u=s[m];if(oi(u))return u}}function et(m){let d=m._keys;return d||(d=m._keys=function(m){const d=new Set;for(const s of m)for(const u of Object.keys(s).filter(f=>!f.startsWith("_")))d.add(u);return Array.from(d)}(m._scopes)),d}const ze=Number.EPSILON||1e-14,Ii=(m,d)=>d<m.length&&!m[d].skip&&m[d],Cn=m=>"x"===m?"y":"x";function Xn(m,d,s,u){const f=m.skip?d:m,_=d,C=s.skip?d:s,D=Mi(_,f),A=Mi(C,_);let F=D/(D+A),K=A/(D+A);F=isNaN(F)?0:F,K=isNaN(K)?0:K;const ut=u*F,It=u*K;return{previous:{x:_.x-ut*(C.x-f.x),y:_.y-ut*(C.y-f.y)},next:{x:_.x+It*(C.x-f.x),y:_.y+It*(C.y-f.y)}}}function Fo(m,d,s){return Math.max(Math.min(m,s),d)}function os(m,d,s,u,f){let _,C,D,A;if(d.spanGaps&&(m=m.filter(F=>!F.skip)),"monotone"===d.cubicInterpolationMode)!function(m,d="x"){const s=Cn(d),u=m.length,f=Array(u).fill(0),_=Array(u);let C,D,A,F=Ii(m,0);for(C=0;C<u;++C)if(D=A,A=F,F=Ii(m,C+1),A){if(F){const K=F[d]-A[d];f[C]=0!==K?(F[s]-A[s])/K:0}_[C]=D?F?ge(f[C-1])!==ge(f[C])?0:(f[C-1]+f[C])/2:f[C-1]:f[C]}(function(m,d,s){const u=m.length;let f,_,C,D,A,F=Ii(m,0);for(let K=0;K<u-1;++K)if(A=F,F=Ii(m,K+1),A&&F){if(at(d[K],0,ze)){s[K]=s[K+1]=0;continue}f=s[K]/d[K],_=s[K+1]/d[K],D=Math.pow(f,2)+Math.pow(_,2),!(D<=9)&&(C=3/Math.sqrt(D),s[K]=f*C*d[K],s[K+1]=_*C*d[K])}})(m,f,_),function(m,d,s="x"){const u=Cn(s),f=m.length;let _,C,D,A=Ii(m,0);for(let F=0;F<f;++F){if(C=D,D=A,A=Ii(m,F+1),!D)continue;const K=D[s],ut=D[u];C&&(_=(K-C[s])/3,D[`cp1${s}`]=K-_,D[`cp1${u}`]=ut-_*d[F]),A&&(_=(A[s]-K)/3,D[`cp2${s}`]=K+_,D[`cp2${u}`]=ut+_*d[F])}}(m,_,d)}(m,f);else{let F=u?m[m.length-1]:m[0];for(_=0,C=m.length;_<C;++_)D=m[_],A=Xn(F,D,m[Math.min(_+1,C-(u?0:1))%C],d.tension),D.cp1x=A.previous.x,D.cp1y=A.previous.y,D.cp2x=A.next.x,D.cp2y=A.next.y,F=D}d.capBezierPoints&&function(m,d){let s,u,f,_,C,D=Oo(m[0],d);for(s=0,u=m.length;s<u;++s)C=_,_=D,D=s<u-1&&Oo(m[s+1],d),_&&(f=m[s],C&&(f.cp1x=Fo(f.cp1x,d.left,d.right),f.cp1y=Fo(f.cp1y,d.top,d.bottom)),D&&(f.cp2x=Fo(f.cp2x,d.left,d.right),f.cp2y=Fo(f.cp2y,d.top,d.bottom)))}(m,s)}function Zs(){return"undefined"!=typeof window&&"undefined"!=typeof document}function Gs(m){let d=m.parentNode;return d&&"[object ShadowRoot]"===d.toString()&&(d=d.host),d}function un(m,d,s){let u;return"string"==typeof m?(u=parseInt(m,10),-1!==m.indexOf("%")&&(u=u/100*d.parentNode[s])):u=m,u}const Pr=m=>window.getComputedStyle(m,null),ul=["top","right","bottom","left"];function Fr(m,d,s){const u={};s=s?"-"+s:"";for(let f=0;f<4;f++){const _=ul[f];u[_]=parseFloat(m[d+"-"+_+s])||0}return u.width=u.left+u.right,u.height=u.top+u.bottom,u}function br(m,d){const{canvas:s,currentDevicePixelRatio:u}=d,f=Pr(s),_="border-box"===f.boxSizing,C=Fr(f,"padding"),D=Fr(f,"border","width"),{x:A,y:F,box:K}=function(m,d){const s=m.native||m,u=s.touches,f=u&&u.length?u[0]:s,{offsetX:_,offsetY:C}=f;let A,F,D=!1;if(((m,d,s)=>(m>0||d>0)&&(!s||!s.shadowRoot))(_,C,s.target))A=_,F=C;else{const K=d.getBoundingClientRect();A=f.clientX-K.left,F=f.clientY-K.top,D=!0}return{x:A,y:F,box:D}}(m,s),ut=C.left+(K&&D.left),It=C.top+(K&&D.top);let{width:Vt,height:ee}=d;return _&&(Vt-=C.width+D.width,ee-=C.height+D.height),{x:Math.round((A-ut)/Vt*s.width/u),y:Math.round((F-It)/ee*s.height/u)}}const Rn=m=>Math.round(10*m)/10;function Xo(m,d,s){const u=d||1,f=Math.floor(m.height*u),_=Math.floor(m.width*u);m.height=f/u,m.width=_/u;const C=m.canvas;return C.style&&(s||!C.style.height&&!C.style.width)&&(C.style.height=`${m.height}px`,C.style.width=`${m.width}px`),(m.currentDevicePixelRatio!==u||C.height!==f||C.width!==_)&&(m.currentDevicePixelRatio=u,C.height=f,C.width=_,m.ctx.setTransform(u,0,0,u,0,0),!0)}const yr=function(){let m=!1;try{const d={get passive(){return m=!0,!1}};window.addEventListener("test",null,d),window.removeEventListener("test",null,d)}catch(d){}return m}();function ha(m,d){const s=function(m,d){return Pr(m).getPropertyValue(d)}(m,d),u=s&&s.match(/^(\d+)(\.\d+)?px$/);return u?+u[1]:void 0}function Ps(m,d,s,u){return{x:m.x+s*(d.x-m.x),y:m.y+s*(d.y-m.y)}}function Bt(m,d,s,u){return{x:m.x+s*(d.x-m.x),y:"middle"===u?s<.5?m.y:d.y:"after"===u?s<1?m.y:d.y:s>0?d.y:m.y}}function V(m,d,s,u){const f={x:m.cp2x,y:m.cp2y},_={x:d.cp1x,y:d.cp1y},C=Ps(m,f,s),D=Ps(f,_,s),A=Ps(_,d,s),F=Ps(C,D,s),K=Ps(D,A,s);return Ps(F,K,s)}const W=new Map;function Ht(m,d,s){return function(m,d){d=d||{};const s=m+JSON.stringify(d);let u=W.get(s);return u||(u=new Intl.NumberFormat(m,d),W.set(s,u)),u}(d,s).format(m)}function Se(m,d,s){return m?function(m,d){return{x:s=>m+m+d-s,setWidth(s){d=s},textAlign:s=>"center"===s?s:"right"===s?"left":"right",xPlus:(s,u)=>s-u,leftForLtr:(s,u)=>s-u}}(d,s):{x:m=>m,setWidth(m){},textAlign:m=>m,xPlus:(m,d)=>m+d,leftForLtr:(m,d)=>m}}function ti(m,d){let s,u;("ltr"===d||"rtl"===d)&&(s=m.canvas.style,u=[s.getPropertyValue("direction"),s.getPropertyPriority("direction")],s.setProperty("direction",d,"important"),m.prevTextDirection=u)}function mi(m,d){void 0!==d&&(delete m.prevTextDirection,m.canvas.style.setProperty("direction",d[0],d[1]))}function Gi(m){return"angle"===m?{between:Ue,compare:vi,normalize:pi}:{between:(d,s,u)=>d>=Math.min(s,u)&&d<=Math.max(u,s),compare:(d,s)=>d-s,normalize:d=>d}}function sn({start:m,end:d,count:s,loop:u,style:f}){return{start:m%s,end:d%s,loop:u&&(d-m+1)%s==0,style:f}}function Ln(m,d,s){if(!s)return[m];const{property:u,start:f,end:_}=s,C=d.length,{compare:D,between:A,normalize:F}=Gi(u),{start:K,end:ut,loop:It,style:Vt}=function(m,d,s){const{property:u,start:f,end:_}=s,{between:C,normalize:D}=Gi(u),A=d.length;let It,Vt,{start:F,end:K,loop:ut}=m;if(ut){for(F+=A,K+=A,It=0,Vt=A;It<Vt&&C(D(d[F%A][u]),f,_);++It)F--,K--;F%=A,K%=A}return K<F&&(K+=A),{start:F,end:K,loop:ut,style:m.style}}(m,d,s),ee=[];let De,si,Wi,he=!1,ve=null;for(let nn=K,ln=K;nn<=ut;++nn)si=d[nn%C],!si.skip&&(De=F(si[u]),De!==Wi&&(he=A(De,f,_),null===ve&&(he||A(f,Wi,De)&&0!==D(f,Wi))&&(ve=0===D(De,f)?nn:ln),null!==ve&&(!he||0===D(_,De)||A(_,Wi,De))&&(ee.push(sn({start:ve,end:nn,loop:It,count:C,style:Vt})),ve=null),ln=nn,Wi=De));return null!==ve&&ee.push(sn({start:ve,end:ut,loop:It,count:C,style:Vt})),ee}function _n(m,d){const s=[],u=m.segments;for(let f=0;f<u.length;f++){const _=Ln(u[f],m.points,d);_.length&&s.push(..._)}return s}function qn(m){return{backgroundColor:m.backgroundColor,borderCapStyle:m.borderCapStyle,borderDash:m.borderDash,borderDashOffset:m.borderDashOffset,borderJoinStyle:m.borderJoinStyle,borderWidth:m.borderWidth,borderColor:m.borderColor}}function sr(m,d){return d&&JSON.stringify(m)!==JSON.stringify(d)}var Io=new class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(d,s,u,f){const C=s.duration;s.listeners[f].forEach(D=>D({chart:d,initial:s.initial,numSteps:C,currentStep:Math.min(u-s.start,C)}))}_refresh(){this._request||(this._running=!0,this._request=Y.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(d=Date.now()){let s=0;this._charts.forEach((u,f)=>{if(!u.running||!u.items.length)return;const _=u.items;let A,C=_.length-1,D=!1;for(;C>=0;--C)A=_[C],A._active?(A._total>u.duration&&(u.duration=A._total),A.tick(d),D=!0):(_[C]=_[_.length-1],_.pop());D&&(f.draw(),this._notify(f,u,d,"progress")),_.length||(u.running=!1,this._notify(f,u,d,"complete"),u.initial=!1),s+=_.length}),this._lastDate=d,0===s&&(this._running=!1)}_getAnims(d){const s=this._charts;let u=s.get(d);return u||(u={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},s.set(d,u)),u}listen(d,s,u){this._getAnims(d).listeners[s].push(u)}add(d,s){!s||!s.length||this._getAnims(d).items.push(...s)}has(d){return this._getAnims(d).items.length>0}start(d){const s=this._charts.get(d);!s||(s.running=!0,s.start=Date.now(),s.duration=s.items.reduce((u,f)=>Math.max(u,f._duration),0),this._refresh())}running(d){if(!this._running)return!1;const s=this._charts.get(d);return!(!s||!s.running||!s.items.length)}stop(d){const s=this._charts.get(d);if(!s||!s.items.length)return;const u=s.items;let f=u.length-1;for(;f>=0;--f)u[f].cancel();s.items=[],this._notify(d,s,Date.now(),"complete")}remove(d){return this._charts.delete(d)}};const Ws="transparent",Tr={boolean:(m,d,s)=>s>.5?d:m,color(m,d,s){const u=gr(m||Ws),f=u.valid&&gr(d||Ws);return f&&f.valid?f.mix(u,s).hexString():d},number:(m,d,s)=>m+(d-m)*s};class Ms{constructor(d,s,u,f){const _=s[u];f=Ls([d.to,f,_,d.from]);const C=Ls([d.from,_,f]);this._active=!0,this._fn=d.fn||Tr[d.type||typeof C],this._easing=Zi[d.easing]||Zi.linear,this._start=Math.floor(Date.now()+(d.delay||0)),this._duration=this._total=Math.floor(d.duration),this._loop=!!d.loop,this._target=s,this._prop=u,this._from=C,this._to=f,this._promises=void 0}active(){return this._active}update(d,s,u){if(this._active){this._notify(!1);const f=this._target[this._prop],_=u-this._start,C=this._duration-_;this._start=u,this._duration=Math.floor(Math.max(C,d.duration)),this._total+=_,this._loop=!!d.loop,this._to=Ls([d.to,s,f,d.from]),this._from=Ls([d.from,f,s])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(d){const s=d-this._start,u=this._duration,f=this._prop,_=this._from,C=this._loop,D=this._to;let A;if(this._active=_!==D&&(C||s<u),!this._active)return this._target[f]=D,void this._notify(!0);s<0?this._target[f]=_:(A=s/u%2,A=C&&A>1?2-A:A,A=this._easing(Math.min(1,Math.max(0,A))),this._target[f]=this._fn(_,D,A))}wait(){const d=this._promises||(this._promises=[]);return new Promise((s,u)=>{d.push({res:s,rej:u})})}_notify(d){const s=d?"res":"rej",u=this._promises||[];for(let f=0;f<u.length;f++)u[f][s]()}}On.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const Bo=Object.keys(On.animation);On.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:m=>"onProgress"!==m&&"onComplete"!==m&&"fn"!==m}),On.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),On.describe("animations",{_fallback:"animation"}),On.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:m=>0|m}}}});class Br{constructor(d,s){this._chart=d,this._properties=new Map,this.configure(s)}configure(d){if(!st(d))return;const s=this._properties;Object.getOwnPropertyNames(d).forEach(u=>{const f=d[u];if(!st(f))return;const _={};for(const C of Bo)_[C]=f[C];(pt(f.properties)&&f.properties||[u]).forEach(C=>{(C===u||!s.has(C))&&s.set(C,_)})})}_animateOptions(d,s){const u=s.options,f=function(m,d){if(!d)return;let s=m.options;if(s)return s.$shared&&(m.options=s=Object.assign({},s,{$shared:!1,$animations:{}})),s;m.options=d}(d,u);if(!f)return[];const _=this._createAnimations(f,u);return u.$shared&&function(m,d){const s=[],u=Object.keys(d);for(let f=0;f<u.length;f++){const _=m[u[f]];_&&_.active()&&s.push(_.wait())}return Promise.all(s)}(d.options.$animations,u).then(()=>{d.options=u},()=>{}),_}_createAnimations(d,s){const u=this._properties,f=[],_=d.$animations||(d.$animations={}),C=Object.keys(s),D=Date.now();let A;for(A=C.length-1;A>=0;--A){const F=C[A];if("$"===F.charAt(0))continue;if("options"===F){f.push(...this._animateOptions(d,s));continue}const K=s[F];let ut=_[F];const It=u.get(F);if(ut){if(It&&ut.active()){ut.update(It,K,D);continue}ut.cancel()}It&&It.duration?(_[F]=ut=new Ms(It,d,F,K),f.push(ut)):d[F]=K}return f}update(d,s){if(0===this._properties.size)return void Object.assign(d,s);const u=this._createAnimations(d,s);return u.length?(Io.add(this._chart,u),!0):void 0}}function hn(m,d){const s=m&&m.options||{},u=s.reverse,f=void 0===s.min?d:0,_=void 0===s.max?d:0;return{start:u?_:f,end:u?f:_}}function as(m,d){const s=[],u=m._getSortedDatasetMetas(d);let f,_;for(f=0,_=u.length;f<_;++f)s.push(u[f].index);return s}function Fs(m,d,s,u={}){const f=m.keys,_="single"===u.mode;let C,D,A,F;if(null!==d){for(C=0,D=f.length;C<D;++C){if(A=+f[C],A===s){if(u.all)continue;break}F=m.values[A],ot(F)&&(_||0===d||ge(d)===ge(F))&&(d+=F)}return d}}function Mo(m,d){const s=m&&m.options.stacked;return s||void 0===s&&void 0!==d.stack}function zs(m,d,s){const u=m[d]||(m[d]={});return u[s]||(u[s]={})}function Qs(m,d,s,u){for(const f of d.getMatchingVisibleMetas(u).reverse()){const _=m[f.index];if(s&&_>0||!s&&_<0)return f.index}return null}function Ss(m,d){const{chart:s,_cachedMeta:u}=m,f=s._stacks||(s._stacks={}),{iScale:_,vScale:C,index:D}=u,A=_.axis,F=C.axis,K=function(m,d,s){return`${m.id}.${d.id}.${s.stack||s.type}`}(_,C,u),ut=d.length;let It;for(let Vt=0;Vt<ut;++Vt){const ee=d[Vt],{[A]:he,[F]:ve}=ee;It=(ee._stacks||(ee._stacks={}))[F]=zs(f,K,he),It[D]=ve,It._top=Qs(It,C,!0,u.type),It._bottom=Qs(It,C,!1,u.type)}}function qs(m,d){const s=m.scales;return Object.keys(s).filter(u=>s[u].axis===d).shift()}function Zr(m,d){const s=m.controller.index,u=m.vScale&&m.vScale.axis;if(u){d=d||m._parsed;for(const f of d){const _=f._stacks;if(!_||void 0===_[u]||void 0===_[u][s])return;delete _[u][s]}}}const jr=m=>"reset"===m||"none"===m,Ta=(m,d)=>d?m:Object.assign({},m);let Qr=(()=>{class m{constructor(s,u){this.chart=s,this._ctx=s.ctx,this.index=u,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const s=this._cachedMeta;this.configure(),this.linkScales(),s._stacked=Mo(s.vScale,s),this.addElements()}updateIndex(s){this.index!==s&&Zr(this._cachedMeta),this.index=s}linkScales(){const s=this.chart,u=this._cachedMeta,f=this.getDataset(),_=(It,Vt,ee,he)=>"x"===It?Vt:"r"===It?he:ee,C=u.xAxisID=Tt(f.xAxisID,qs(s,"x")),D=u.yAxisID=Tt(f.yAxisID,qs(s,"y")),A=u.rAxisID=Tt(f.rAxisID,qs(s,"r")),F=u.indexAxis,K=u.iAxisID=_(F,C,D,A),ut=u.vAxisID=_(F,D,C,A);u.xScale=this.getScaleForId(C),u.yScale=this.getScaleForId(D),u.rScale=this.getScaleForId(A),u.iScale=this.getScaleForId(K),u.vScale=this.getScaleForId(ut)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(s){return this.chart.scales[s]}_getOtherScale(s){const u=this._cachedMeta;return s===u.iScale?u.vScale:u.iScale}reset(){this._update("reset")}_destroy(){const s=this._cachedMeta;this._data&&Js(this._data,this),s._stacked&&Zr(s)}_dataCheck(){const s=this.getDataset(),u=s.data||(s.data=[]),f=this._data;if(st(u))this._data=function(m){const d=Object.keys(m),s=new Array(d.length);let u,f,_;for(u=0,f=d.length;u<f;++u)_=d[u],s[u]={x:_,y:m[_]};return s}(u);else if(f!==u){if(f){Js(f,this);const _=this._cachedMeta;Zr(_),_._parsed=[]}u&&Object.isExtensible(u)&&function(m,d){m._chartjs?m._chartjs.listeners.push(d):(Object.defineProperty(m,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[d]}}),Us.forEach(s=>{const u="_onData"+qe(s),f=m[s];Object.defineProperty(m,s,{configurable:!0,enumerable:!1,value(..._){const C=f.apply(this,_);return m._chartjs.listeners.forEach(D=>{"function"==typeof D[u]&&D[u](..._)}),C}})}))}(u,this),this._syncList=[],this._data=u}}addElements(){const s=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(s.dataset=new this.datasetElementType)}buildOrUpdateElements(s){const u=this._cachedMeta,f=this.getDataset();let _=!1;this._dataCheck();const C=u._stacked;u._stacked=Mo(u.vScale,u),u.stack!==f.stack&&(_=!0,Zr(u),u.stack=f.stack),this._resyncElements(s),(_||C!==u._stacked)&&Ss(this,u._parsed)}configure(){const s=this.chart.config,u=s.datasetScopeKeys(this._type),f=s.getOptionScopes(this.getDataset(),u,!0);this.options=s.createResolver(f,this.getContext()),this._parsing=this.options.parsing}parse(s,u){const{_cachedMeta:f,_data:_}=this,{iScale:C,_stacked:D}=f,A=C.axis;let ut,It,Vt,F=0===s&&u===_.length||f._sorted,K=s>0&&f._parsed[s-1];if(!1===this._parsing)f._parsed=_,f._sorted=!0,Vt=_;else{Vt=pt(_[s])?this.parseArrayData(f,_,s,u):st(_[s])?this.parseObjectData(f,_,s,u):this.parsePrimitiveData(f,_,s,u);const ee=()=>null===It[A]||K&&It[A]<K[A];for(ut=0;ut<u;++ut)f._parsed[ut+s]=It=Vt[ut],F&&(ee()&&(F=!1),K=It);f._sorted=F}D&&Ss(this,Vt)}parsePrimitiveData(s,u,f,_){const{iScale:C,vScale:D}=s,A=C.axis,F=D.axis,K=C.getLabels(),ut=C===D,It=new Array(_);let Vt,ee,he;for(Vt=0,ee=_;Vt<ee;++Vt)he=Vt+f,It[Vt]={[A]:ut||C.parse(K[he],he),[F]:D.parse(u[he],he)};return It}parseArrayData(s,u,f,_){const{xScale:C,yScale:D}=s,A=new Array(_);let F,K,ut,It;for(F=0,K=_;F<K;++F)ut=F+f,It=u[ut],A[F]={x:C.parse(It[0],ut),y:D.parse(It[1],ut)};return A}parseObjectData(s,u,f,_){const{xScale:C,yScale:D}=s,{xAxisKey:A="x",yAxisKey:F="y"}=this._parsing,K=new Array(_);let ut,It,Vt,ee;for(ut=0,It=_;ut<It;++ut)Vt=ut+f,ee=u[Vt],K[ut]={x:C.parse(Pe(ee,A),Vt),y:D.parse(Pe(ee,F),Vt)};return K}getParsed(s){return this._cachedMeta._parsed[s]}getDataElement(s){return this._cachedMeta.data[s]}applyStack(s,u,f){const C=this._cachedMeta,D=u[s.axis];return Fs({keys:as(this.chart,!0),values:u._stacks[s.axis]},D,C.index,{mode:f})}updateRangeFromParsed(s,u,f,_){const C=f[u.axis];let D=null===C?NaN:C;const A=_&&f._stacks[u.axis];_&&A&&(_.values=A,D=Fs(_,C,this._cachedMeta.index)),s.min=Math.min(s.min,D),s.max=Math.max(s.max,D)}getMinMax(s,u){const f=this._cachedMeta,_=f._parsed,C=f._sorted&&s===f.iScale,D=_.length,A=this._getOtherScale(s),F=((m,d,s)=>m&&!d.hidden&&d._stacked&&{keys:as(this.chart,!0),values:null})(u,f),K={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:ut,max:It}=function(m){const{min:d,max:s,minDefined:u,maxDefined:f}=m.getUserBounds();return{min:u?d:Number.NEGATIVE_INFINITY,max:f?s:Number.POSITIVE_INFINITY}}(A);let Vt,ee;function he(){ee=_[Vt];const ve=ee[A.axis];return!ot(ee[s.axis])||ut>ve||It<ve}for(Vt=0;Vt<D&&(he()||(this.updateRangeFromParsed(K,s,ee,F),!C));++Vt);if(C)for(Vt=D-1;Vt>=0;--Vt)if(!he()){this.updateRangeFromParsed(K,s,ee,F);break}return K}getAllParsedValues(s){const u=this._cachedMeta._parsed,f=[];let _,C,D;for(_=0,C=u.length;_<C;++_)D=u[_][s.axis],ot(D)&&f.push(D);return f}getMaxOverflow(){return!1}getLabelAndValue(s){const u=this._cachedMeta,f=u.iScale,_=u.vScale,C=this.getParsed(s);return{label:f?""+f.getLabelForValue(C[f.axis]):"",value:_?""+_.getLabelForValue(C[_.axis]):""}}_update(s){const u=this._cachedMeta;this.configure(),this._cachedDataOpts={},this.update(s||"default"),u._clip=function(m){let d,s,u,f;return st(m)?(d=m.top,s=m.right,u=m.bottom,f=m.left):d=s=u=f=m,{top:d,right:s,bottom:u,left:f,disabled:!1===m}}(Tt(this.options.clip,function(m,d,s){if(!1===s)return!1;const u=hn(m,s),f=hn(d,s);return{top:f.end,right:u.end,bottom:f.start,left:u.start}}(u.xScale,u.yScale,this.getMaxOverflow())))}update(s){}draw(){const s=this._ctx,f=this._cachedMeta,_=f.data||[],C=this.chart.chartArea,D=[],A=this._drawStart||0,F=this._drawCount||_.length-A;let K;for(f.dataset&&f.dataset.draw(s,C,A,F),K=A;K<A+F;++K){const ut=_[K];ut.hidden||(ut.active?D.push(ut):ut.draw(s,C))}for(K=0;K<D.length;++K)D[K].draw(s,C)}getStyle(s,u){const f=u?"active":"default";return void 0===s&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(f):this.resolveDataElementOptions(s||0,f)}getContext(s,u,f){const _=this.getDataset();let C;if(s>=0&&s<this._cachedMeta.data.length){const D=this._cachedMeta.data[s];C=D.$context||(D.$context=function(m,d,s){return $o(m,{active:!1,dataIndex:d,parsed:void 0,raw:void 0,element:s,index:d,mode:"default",type:"data"})}(this.getContext(),s,D)),C.parsed=this.getParsed(s),C.raw=_.data[s],C.index=C.dataIndex=s}else C=this.$context||(this.$context=function(m,d){return $o(m,{active:!1,dataset:void 0,datasetIndex:d,index:d,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),C.dataset=_,C.index=C.datasetIndex=this.index;return C.active=!!u,C.mode=f,C}resolveDatasetElementOptions(s){return this._resolveElementOptions(this.datasetElementType.id,s)}resolveDataElementOptions(s,u){return this._resolveElementOptions(this.dataElementType.id,u,s)}_resolveElementOptions(s,u="default",f){const _="active"===u,C=this._cachedDataOpts,D=s+"-"+u,A=C[D],F=this.enableOptionSharing&&oi(f);if(A)return Ta(A,F);const K=this.chart.config,ut=K.datasetElementScopeKeys(this._type,s),It=_?[`${s}Hover`,"hover",s,""]:[s,""],Vt=K.getOptionScopes(this.getDataset(),ut),ee=Object.keys(On.elements[s]),ve=K.resolveNamedOptions(Vt,ee,()=>this.getContext(f,_),It);return ve.$shared&&(ve.$shared=F,C[D]=Object.freeze(Ta(ve,F))),ve}_resolveAnimations(s,u,f){const _=this.chart,C=this._cachedDataOpts,D=`animation-${u}`,A=C[D];if(A)return A;let F;if(!1!==_.options.animation){const ut=this.chart.config,It=ut.datasetAnimationScopeKeys(this._type,u),Vt=ut.getOptionScopes(this.getDataset(),It);F=ut.createResolver(Vt,this.getContext(s,f,u))}const K=new Br(_,F&&F.animations);return F&&F._cacheable&&(C[D]=Object.freeze(K)),K}getSharedOptions(s){if(s.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},s))}includeOptions(s,u){return!u||jr(s)||this.chart._animationsDisabled}updateElement(s,u,f,_){jr(_)?Object.assign(s,f):this._resolveAnimations(u,_).update(s,f)}updateSharedOptions(s,u,f){s&&!jr(u)&&this._resolveAnimations(void 0,u).update(s,f)}_setStyle(s,u,f,_){s.active=_;const C=this.getStyle(u,_);this._resolveAnimations(u,f,_).update(s,{options:!_&&this.getSharedOptions(C)||C})}removeHoverStyle(s,u,f){this._setStyle(s,f,"active",!1)}setHoverStyle(s,u,f){this._setStyle(s,f,"active",!0)}_removeDatasetHoverStyle(){const s=this._cachedMeta.dataset;s&&this._setStyle(s,void 0,"active",!1)}_setDatasetHoverStyle(){const s=this._cachedMeta.dataset;s&&this._setStyle(s,void 0,"active",!0)}_resyncElements(s){const u=this._data,f=this._cachedMeta.data;for(const[A,F,K]of this._syncList)this[A](F,K);this._syncList=[];const _=f.length,C=u.length,D=Math.min(C,_);D&&this.parse(0,D),C>_?this._insertElements(_,C-_,s):C<_&&this._removeElements(C,_-C)}_insertElements(s,u,f=!0){const _=this._cachedMeta,C=_.data,D=s+u;let A;const F=K=>{for(K.length+=u,A=K.length-1;A>=D;A--)K[A]=K[A-u]};for(F(C),A=s;A<D;++A)C[A]=new this.dataElementType;this._parsing&&F(_._parsed),this.parse(s,u),f&&this.updateElements(C,s,u,"reset")}updateElements(s,u,f,_){}_removeElements(s,u){const f=this._cachedMeta;if(this._parsing){const _=f._parsed.splice(s,u);f._stacked&&Zr(f,_)}f.data.splice(s,u)}_sync(s){if(this._parsing)this._syncList.push(s);else{const[u,f,_]=s;this[u](f,_)}}_onDataPush(){const s=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-s,s])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(s,u){this._sync(["_removeElements",s,u]),this._sync(["_insertElements",s,arguments.length-2])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return m.defaults={},m})();function Xl(m){const d=m.iScale,s=function(m,d){if(!m._cache.$bar){const s=m.getMatchingVisibleMetas(d);let u=[];for(let f=0,_=s.length;f<_;f++)u=u.concat(s[f].controller.getAllParsedValues(m));m._cache.$bar=ho(u.sort((f,_)=>f-_))}return m._cache.$bar}(d,m.type);let f,_,C,D,u=d._length;const A=()=>{32767===C||-32768===C||(oi(D)&&(u=Math.min(u,Math.abs(C-D)||u)),D=C)};for(f=0,_=s.length;f<_;++f)C=d.getPixelForValue(s[f]),A();for(D=void 0,f=0,_=d.ticks.length;f<_;++f)C=d.getPixelForTick(f),A();return u}function ar(m,d,s,u){return pt(m)?function(m,d,s,u){const f=s.parse(m[0],u),_=s.parse(m[1],u),C=Math.min(f,_),D=Math.max(f,_);let A=C,F=D;Math.abs(C)>Math.abs(D)&&(A=D,F=C),d[s.axis]=F,d._custom={barStart:A,barEnd:F,start:f,end:_,min:C,max:D}}(m,d,s,u):d[s.axis]=s.parse(m,u),d}function pl(m,d,s,u){const f=m.iScale,_=m.vScale,C=f.getLabels(),D=f===_,A=[];let F,K,ut,It;for(F=s,K=s+u;F<K;++F)It=d[F],ut={},ut[f.axis]=D||f.parse(C[F],F),A.push(ar(It,ut,_,F));return A}function Ca(m){return m&&void 0!==m.barStart&&void 0!==m.barEnd}function Ol(m,d,s,u){let f=d.borderSkipped;const _={};if(!f)return void(m.borderSkipped=_);const{start:C,end:D,reverse:A,top:F,bottom:K}=function(m){let d,s,u,f,_;return m.horizontal?(d=m.base>m.x,s="left",u="right"):(d=m.base<m.y,s="bottom",u="top"),d?(f="end",_="start"):(f="start",_="end"),{start:s,end:u,reverse:d,top:f,bottom:_}}(m);"middle"===f&&s&&(m.enableBorderRadius=!0,(s._top||0)===u?f=F:(s._bottom||0)===u?f=K:(_[fl(K,C,D,A)]=!0,f=F)),_[fl(f,C,D,A)]=!0,m.borderSkipped=_}function fl(m,d,s,u){return m=u?$a(m=function(m,d,s){return m===d?s:m===s?d:m}(m,d,s),s,d):$a(m,d,s)}function $a(m,d,s){return"start"===m?d:"end"===m?s:m}function Za(m,{inflateAmount:d},s){m.inflateAmount="auto"===d?1===s?.33:0:d}Qr.prototype.datasetElementType=null,Qr.prototype.dataElementType=null;let Kl=(()=>{class m extends Qr{parsePrimitiveData(s,u,f,_){return pl(s,u,f,_)}parseArrayData(s,u,f,_){return pl(s,u,f,_)}parseObjectData(s,u,f,_){const{iScale:C,vScale:D}=s,{xAxisKey:A="x",yAxisKey:F="y"}=this._parsing,K="x"===C.axis?A:F,ut="x"===D.axis?A:F,It=[];let Vt,ee,he,ve;for(Vt=f,ee=f+_;Vt<ee;++Vt)ve=u[Vt],he={},he[C.axis]=C.parse(Pe(ve,K),Vt),It.push(ar(Pe(ve,ut),he,D,Vt));return It}updateRangeFromParsed(s,u,f,_){super.updateRangeFromParsed(s,u,f,_);const C=f._custom;C&&u===this._cachedMeta.vScale&&(s.min=Math.min(s.min,C.min),s.max=Math.max(s.max,C.max))}getMaxOverflow(){return 0}getLabelAndValue(s){const u=this._cachedMeta,{iScale:f,vScale:_}=u,C=this.getParsed(s),D=C._custom,A=Ca(D)?"["+D.start+", "+D.end+"]":""+_.getLabelForValue(C[_.axis]);return{label:""+f.getLabelForValue(C[f.axis]),value:A}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(s){const u=this._cachedMeta;this.updateElements(u.data,0,u.data.length,s)}updateElements(s,u,f,_){const C="reset"===_,{index:D,_cachedMeta:{vScale:A}}=this,F=A.getBasePixel(),K=A.isHorizontal(),ut=this._getRuler(),It=this.resolveDataElementOptions(u,_),Vt=this.getSharedOptions(It),ee=this.includeOptions(_,Vt);this.updateSharedOptions(Vt,_,It);for(let he=u;he<u+f;he++){const ve=this.getParsed(he),De=C||Dt(ve[A.axis])?{base:F,head:F}:this._calculateBarValuePixels(he),si=this._calculateBarIndexPixels(he,ut),Wi=(ve._stacks||{})[A.axis],Ri={horizontal:K,base:De.base,enableBorderRadius:!Wi||Ca(ve._custom)||D===Wi._top||D===Wi._bottom,x:K?De.head:si.center,y:K?si.center:De.head,height:K?si.size:Math.abs(De.size),width:K?Math.abs(De.size):si.size};ee&&(Ri.options=Vt||this.resolveDataElementOptions(he,s[he].active?"active":_));const Si=Ri.options||s[he].options;Ol(Ri,Si,Wi,D),Za(Ri,Si,ut.ratio),this.updateElement(s[he],he,Ri,_)}}_getStacks(s,u){const _=this._cachedMeta.iScale,C=_.getMatchingVisibleMetas(this._type),D=_.options.stacked,A=C.length,F=[];let K,ut;for(K=0;K<A;++K)if(ut=C[K],ut.controller.options.grouped){if(void 0!==u){const It=ut.controller.getParsed(u)[ut.controller._cachedMeta.vScale.axis];if(Dt(It)||isNaN(It))continue}if((!1===D||-1===F.indexOf(ut.stack)||void 0===D&&void 0===ut.stack)&&F.push(ut.stack),ut.index===s)break}return F.length||F.push(void 0),F}_getStackCount(s){return this._getStacks(void 0,s).length}_getStackIndex(s,u,f){const _=this._getStacks(s,f),C=void 0!==u?_.indexOf(u):-1;return-1===C?_.length-1:C}_getRuler(){const s=this.options,u=this._cachedMeta,f=u.iScale,_=[];let C,D;for(C=0,D=u.data.length;C<D;++C)_.push(f.getPixelForValue(this.getParsed(C)[f.axis],C));const A=s.barThickness;return{min:A||Xl(u),pixels:_,start:f._startPixel,end:f._endPixel,stackCount:this._getStackCount(),scale:f,grouped:s.grouped,ratio:A?1:s.categoryPercentage*s.barPercentage}}_calculateBarValuePixels(s){const{_cachedMeta:{vScale:u,_stacked:f},options:{base:_,minBarLength:C}}=this,D=_||0,A=this.getParsed(s),F=A._custom,K=Ca(F);let ee,he,ut=A[u.axis],It=0,Vt=f?this.applyStack(u,A,f):ut;Vt!==ut&&(It=Vt-ut,Vt=ut),K&&(ut=F.barStart,Vt=F.barEnd-F.barStart,0!==ut&&ge(ut)!==ge(F.barEnd)&&(It=0),It+=ut);const ve=Dt(_)||K?It:_;let De=u.getPixelForValue(ve);if(ee=this.chart.getDataVisibility(s)?u.getPixelForValue(It+Vt):De,he=ee-De,Math.abs(he)<C&&(he=function(m,d,s){return 0!==m?ge(m):(d.isHorizontal()?1:-1)*(d.min>=s?1:-1)}(he,u,D)*C,ut===D&&(De-=he/2),ee=De+he),De===u.getPixelForValue(D)){const si=ge(he)*u.getLineWidthForValue(D)/2;De+=si,he-=si}return{size:he,base:De,head:ee,center:ee+he/2}}_calculateBarIndexPixels(s,u){const f=u.scale,_=this.options,C=_.skipNull,D=Tt(_.maxBarThickness,1/0);let A,F;if(u.grouped){const K=C?this._getStackCount(s):u.stackCount,ut="flex"===_.barThickness?function(m,d,s,u){const f=d.pixels,_=f[m];let C=m>0?f[m-1]:null,D=m<f.length-1?f[m+1]:null;const A=s.categoryPercentage;null===C&&(C=_-(null===D?d.end-d.start:D-_)),null===D&&(D=_+_-C);const F=_-(_-Math.min(C,D))/2*A;return{chunk:Math.abs(D-C)/2*A/u,ratio:s.barPercentage,start:F}}(s,u,_,K):function(m,d,s,u){const f=s.barThickness;let _,C;return Dt(f)?(_=d.min*s.categoryPercentage,C=s.barPercentage):(_=f*u,C=1),{chunk:_/u,ratio:C,start:d.pixels[m]-_/2}}(s,u,_,K),It=this._getStackIndex(this.index,this._cachedMeta.stack,C?s:void 0);A=ut.start+ut.chunk*It+ut.chunk/2,F=Math.min(D,ut.chunk*ut.ratio)}else A=f.getPixelForValue(this.getParsed(s)[f.axis],s),F=Math.min(D,u.min*u.ratio);return{base:A-F/2,head:A+F/2,center:A,size:F}}draw(){const s=this._cachedMeta,u=s.vScale,f=s.data,_=f.length;let C=0;for(;C<_;++C)null!==this.getParsed(C)[u.axis]&&f[C].draw(this._ctx)}}return m.id="bar",m.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},m.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}},m})(),Su=(()=>{class m extends Qr{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(s,u,f,_){const C=super.parsePrimitiveData(s,u,f,_);for(let D=0;D<C.length;D++)C[D]._custom=this.resolveDataElementOptions(D+f).radius;return C}parseArrayData(s,u,f,_){const C=super.parseArrayData(s,u,f,_);for(let D=0;D<C.length;D++)C[D]._custom=Tt(u[f+D][2],this.resolveDataElementOptions(D+f).radius);return C}parseObjectData(s,u,f,_){const C=super.parseObjectData(s,u,f,_);for(let D=0;D<C.length;D++){const A=u[f+D];C[D]._custom=Tt(A&&A.r&&+A.r,this.resolveDataElementOptions(D+f).radius)}return C}getMaxOverflow(){const s=this._cachedMeta.data;let u=0;for(let f=s.length-1;f>=0;--f)u=Math.max(u,s[f].size(this.resolveDataElementOptions(f))/2);return u>0&&u}getLabelAndValue(s){const u=this._cachedMeta,{xScale:f,yScale:_}=u,C=this.getParsed(s),D=f.getLabelForValue(C.x),A=_.getLabelForValue(C.y),F=C._custom;return{label:u.label,value:"("+D+", "+A+(F?", "+F:"")+")"}}update(s){const u=this._cachedMeta.data;this.updateElements(u,0,u.length,s)}updateElements(s,u,f,_){const C="reset"===_,{iScale:D,vScale:A}=this._cachedMeta,F=this.resolveDataElementOptions(u,_),K=this.getSharedOptions(F),ut=this.includeOptions(_,K),It=D.axis,Vt=A.axis;for(let ee=u;ee<u+f;ee++){const he=s[ee],ve=!C&&this.getParsed(ee),De={},si=De[It]=C?D.getPixelForDecimal(.5):D.getPixelForValue(ve[It]),Wi=De[Vt]=C?A.getBasePixel():A.getPixelForValue(ve[Vt]);De.skip=isNaN(si)||isNaN(Wi),ut&&(De.options=this.resolveDataElementOptions(ee,he.active?"active":_),C&&(De.options.radius=0)),this.updateElement(he,ee,De,_)}this.updateSharedOptions(K,_,F)}resolveDataElementOptions(s,u){const f=this.getParsed(s);let _=super.resolveDataElementOptions(s,u);_.$shared&&(_=Object.assign({},_,{$shared:!1}));const C=_.radius;return"active"!==u&&(_.radius=0),_.radius+=Tt(f&&f._custom,C),_}}return m.id="bubble",m.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},m.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:()=>""}}}},m})(),Fa=(()=>{class m extends Qr{constructor(s,u){super(s,u),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(s,u){const f=this.getDataset().data,_=this._cachedMeta;if(!1===this._parsing)_._parsed=f;else{let D,A,C=F=>+f[F];if(st(f[s])){const{key:F="value"}=this._parsing;C=K=>+Pe(f[K],F)}for(D=s,A=s+u;D<A;++D)_._parsed[D]=C(D)}}_getRotation(){return ye(this.options.rotation-90)}_getCircumference(){return ye(this.options.circumference)}_getRotationExtents(){let s=ui,u=-ui;for(let f=0;f<this.chart.data.datasets.length;++f)if(this.chart.isDatasetVisible(f)){const _=this.chart.getDatasetMeta(f).controller,C=_._getRotation(),D=_._getCircumference();s=Math.min(s,C),u=Math.max(u,C+D)}return{rotation:s,circumference:u-s}}update(s){const u=this.chart,{chartArea:f}=u,_=this._cachedMeta,C=_.data,D=this.getMaxBorderWidth()+this.getMaxOffset(C)+this.options.spacing,A=Math.max((Math.min(f.width,f.height)-D)/2,0),F=Math.min(((m,d)=>"string"==typeof m&&m.endsWith("%")?parseFloat(m)/100:m/d)(this.options.cutout,A),1),K=this._getRingWeight(this.index),{circumference:ut,rotation:It}=this._getRotationExtents(),{ratioX:Vt,ratioY:ee,offsetX:he,offsetY:ve}=function(m,d,s){let u=1,f=1,_=0,C=0;if(d<ui){const D=m,A=D+d,F=Math.cos(D),K=Math.sin(D),ut=Math.cos(A),It=Math.sin(A),Vt=(Wi,Ri,Si)=>Ue(Wi,D,A,!0)?1:Math.max(Ri,Ri*s,Si,Si*s),ee=(Wi,Ri,Si)=>Ue(Wi,D,A,!0)?-1:Math.min(Ri,Ri*s,Si,Si*s),he=Vt(0,F,ut),ve=Vt(ie,K,It),De=ee(Ni,F,ut),si=ee(Ni+ie,K,It);u=(he-De)/2,f=(ve-si)/2,_=-(he+De)/2,C=-(ve+si)/2}return{ratioX:u,ratioY:f,offsetX:_,offsetY:C}}(It,ut,F),Wi=Math.max(Math.min((f.width-D)/Vt,(f.height-D)/ee)/2,0),Ri=yt(this.options.radius,Wi),Ki=(Ri-Math.max(Ri*F,0))/this._getVisibleDatasetWeightTotal();this.offsetX=he*Ri,this.offsetY=ve*Ri,_.total=this.calculateTotal(),this.outerRadius=Ri-Ki*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-Ki*K,0),this.updateElements(C,0,C.length,s)}_circumference(s,u){const f=this.options,_=this._cachedMeta,C=this._getCircumference();return u&&f.animation.animateRotate||!this.chart.getDataVisibility(s)||null===_._parsed[s]||_.data[s].hidden?0:this.calculateCircumference(_._parsed[s]*C/ui)}updateElements(s,u,f,_){const C="reset"===_,D=this.chart,A=D.chartArea,ut=(A.left+A.right)/2,It=(A.top+A.bottom)/2,Vt=C&&D.options.animation.animateScale,ee=Vt?0:this.innerRadius,he=Vt?0:this.outerRadius,ve=this.resolveDataElementOptions(u,_),De=this.getSharedOptions(ve),si=this.includeOptions(_,De);let Ri,Wi=this._getRotation();for(Ri=0;Ri<u;++Ri)Wi+=this._circumference(Ri,C);for(Ri=u;Ri<u+f;++Ri){const Si=this._circumference(Ri,C),Ki=s[Ri],Qi={x:ut+this.offsetX,y:It+this.offsetY,startAngle:Wi,endAngle:Wi+Si,circumference:Si,outerRadius:he,innerRadius:ee};si&&(Qi.options=De||this.resolveDataElementOptions(Ri,Ki.active?"active":_)),Wi+=Si,this.updateElement(Ki,Ri,Qi,_)}this.updateSharedOptions(De,_,ve)}calculateTotal(){const s=this._cachedMeta,u=s.data;let _,f=0;for(_=0;_<u.length;_++){const C=s._parsed[_];null!==C&&!isNaN(C)&&this.chart.getDataVisibility(_)&&!u[_].hidden&&(f+=Math.abs(C))}return f}calculateCircumference(s){const u=this._cachedMeta.total;return u>0&&!isNaN(s)?ui*(Math.abs(s)/u):0}getLabelAndValue(s){const f=this.chart,_=f.data.labels||[],C=Ht(this._cachedMeta._parsed[s],f.options.locale);return{label:_[s]||"",value:C}}getMaxBorderWidth(s){let u=0;const f=this.chart;let _,C,D,A,F;if(!s)for(_=0,C=f.data.datasets.length;_<C;++_)if(f.isDatasetVisible(_)){D=f.getDatasetMeta(_),s=D.data,A=D.controller,A!==this&&A.configure();break}if(!s)return 0;for(_=0,C=s.length;_<C;++_)F=A.resolveDataElementOptions(_),"inner"!==F.borderAlign&&(u=Math.max(u,F.borderWidth||0,F.hoverBorderWidth||0));return u}getMaxOffset(s){let u=0;for(let f=0,_=s.length;f<_;++f){const C=this.resolveDataElementOptions(f);u=Math.max(u,C.offset||0,C.hoverOffset||0)}return u}_getRingWeightOffset(s){let u=0;for(let f=0;f<s;++f)this.chart.isDatasetVisible(f)&&(u+=this._getRingWeight(f));return u}_getRingWeight(s){return Math.max(Tt(this.chart.data.datasets[s].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return m.id="doughnut",m.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},m.descriptors={_scriptable:d=>"spacing"!==d,_indexable:d=>"spacing"!==d},m.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(d){const s=d.data;if(s.labels.length&&s.datasets.length){const{labels:{pointStyle:u}}=d.legend.options;return s.labels.map((f,_)=>{const D=d.getDatasetMeta(0).controller.getStyle(_);return{text:f,fillStyle:D.backgroundColor,strokeStyle:D.borderColor,lineWidth:D.borderWidth,pointStyle:u,hidden:!d.getDataVisibility(_),index:_}})}return[]}},onClick(d,s,u){u.chart.toggleDataVisibility(s.index),u.chart.update()}},tooltip:{callbacks:{title:()=>"",label(d){let s=d.label;const u=": "+d.formattedValue;return pt(s)?(s=s.slice(),s[0]+=u):s+=u,s}}}}},m})(),Ra=(()=>{class m extends Qr{initialize(){this.enableOptionSharing=!0,super.initialize()}update(s){const u=this._cachedMeta,{dataset:f,data:_=[],_dataset:C}=u,D=this.chart._animationsDisabled;let{start:A,count:F}=function(m,d,s){const u=d.length;let f=0,_=u;if(m._sorted){const{iScale:C,_parsed:D}=m,A=C.axis,{min:F,max:K,minDefined:ut,maxDefined:It}=C.getUserBounds();ut&&(f=Ke(Math.min(Ds(D,C.axis,F).lo,s?u:Ds(d,A,C.getPixelForValue(F)).lo),0,u-1)),_=It?Ke(Math.max(Ds(D,C.axis,K).hi+1,s?0:Ds(d,A,C.getPixelForValue(K)).hi+1),f,u)-f:u-f}return{start:f,count:_}}(u,_,D);this._drawStart=A,this._drawCount=F,function(m){const{xScale:d,yScale:s,_scaleRanges:u}=m,f={xmin:d.min,xmax:d.max,ymin:s.min,ymax:s.max};if(!u)return m._scaleRanges=f,!0;const _=u.xmin!==d.min||u.xmax!==d.max||u.ymin!==s.min||u.ymax!==s.max;return Object.assign(u,f),_}(u)&&(A=0,F=_.length),f._chart=this.chart,f._datasetIndex=this.index,f._decimated=!!C._decimated,f.points=_;const K=this.resolveDatasetElementOptions(s);this.options.showLine||(K.borderWidth=0),K.segment=this.options.segment,this.updateElement(f,void 0,{animated:!D,options:K},s),this.updateElements(_,A,F,s)}updateElements(s,u,f,_){const C="reset"===_,{iScale:D,vScale:A,_stacked:F,_dataset:K}=this._cachedMeta,ut=this.resolveDataElementOptions(u,_),It=this.getSharedOptions(ut),Vt=this.includeOptions(_,It),ee=D.axis,he=A.axis,{spanGaps:ve,segment:De}=this.options,si=$(ve)?ve:Number.POSITIVE_INFINITY,Wi=this.chart._animationsDisabled||C||"none"===_;let Ri=u>0&&this.getParsed(u-1);for(let Si=u;Si<u+f;++Si){const Ki=s[Si],Qi=this.getParsed(Si),nn=Wi?Ki:{},ln=Dt(Qi[he]),Kn=nn[ee]=D.getPixelForValue(Qi[ee],Si),rn=nn[he]=C||ln?A.getBasePixel():A.getPixelForValue(F?this.applyStack(A,Qi,F):Qi[he],Si);nn.skip=isNaN(Kn)||isNaN(rn)||ln,nn.stop=Si>0&&Qi[ee]-Ri[ee]>si,De&&(nn.parsed=Qi,nn.raw=K.data[Si]),Vt&&(nn.options=It||this.resolveDataElementOptions(Si,Ki.active?"active":_)),Wi||this.updateElement(Ki,Si,nn,_),Ri=Qi}this.updateSharedOptions(It,_,ut)}getMaxOverflow(){const s=this._cachedMeta,u=s.dataset,f=u.options&&u.options.borderWidth||0,_=s.data||[];if(!_.length)return f;const C=_[0].size(this.resolveDataElementOptions(0)),D=_[_.length-1].size(this.resolveDataElementOptions(_.length-1));return Math.max(f,C,D)/2}draw(){const s=this._cachedMeta;s.dataset.updateControlPoints(this.chart.chartArea,s.iScale.axis),super.draw()}}return m.id="line",m.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},m.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}},m})();var $t=Object.freeze({__proto__:null,BarController:Kl,BubbleController:Su,DoughnutController:Fa,LineController:Ra,PolarAreaController:(()=>{class m extends Qr{constructor(s,u){super(s,u),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(s){const f=this.chart,_=f.data.labels||[],C=Ht(this._cachedMeta._parsed[s].r,f.options.locale);return{label:_[s]||"",value:C}}update(s){const u=this._cachedMeta.data;this._updateRadius(),this.updateElements(u,0,u.length,s)}_updateRadius(){const s=this.chart,u=s.chartArea,f=s.options,_=Math.min(u.right-u.left,u.bottom-u.top),C=Math.max(_/2,0),A=(C-Math.max(f.cutoutPercentage?C/100*f.cutoutPercentage:1,0))/s.getVisibleDatasetCount();this.outerRadius=C-A*this.index,this.innerRadius=this.outerRadius-A}updateElements(s,u,f,_){const C="reset"===_,D=this.chart,A=this.getDataset(),K=D.options.animation,ut=this._cachedMeta.rScale,It=ut.xCenter,Vt=ut.yCenter,ee=ut.getIndexAngle(0)-.5*Ni;let ve,he=ee;const De=360/this.countVisibleElements();for(ve=0;ve<u;++ve)he+=this._computeAngle(ve,_,De);for(ve=u;ve<u+f;ve++){const si=s[ve];let Wi=he,Ri=he+this._computeAngle(ve,_,De),Si=D.getDataVisibility(ve)?ut.getDistanceFromCenterForValue(A.data[ve]):0;he=Ri,C&&(K.animateScale&&(Si=0),K.animateRotate&&(Wi=Ri=ee));const Ki={x:It,y:Vt,innerRadius:0,outerRadius:Si,startAngle:Wi,endAngle:Ri,options:this.resolveDataElementOptions(ve,si.active?"active":_)};this.updateElement(si,ve,Ki,_)}}countVisibleElements(){const s=this.getDataset();let f=0;return this._cachedMeta.data.forEach((_,C)=>{!isNaN(s.data[C])&&this.chart.getDataVisibility(C)&&f++}),f}_computeAngle(s,u,f){return this.chart.getDataVisibility(s)?ye(this.resolveDataElementOptions(s,u).angle||f):0}}return m.id="polarArea",m.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},m.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(d){const s=d.data;if(s.labels.length&&s.datasets.length){const{labels:{pointStyle:u}}=d.legend.options;return s.labels.map((f,_)=>{const D=d.getDatasetMeta(0).controller.getStyle(_);return{text:f,fillStyle:D.backgroundColor,strokeStyle:D.borderColor,lineWidth:D.borderWidth,pointStyle:u,hidden:!d.getDataVisibility(_),index:_}})}return[]}},onClick(d,s,u){u.chart.toggleDataVisibility(s.index),u.chart.update()}},tooltip:{callbacks:{title:()=>"",label:d=>d.chart.data.labels[d.dataIndex]+": "+d.formattedValue}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}},m})(),PieController:(()=>{class m extends Fa{}return m.id="pie",m.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"},m})(),RadarController:(()=>{class m extends Qr{getLabelAndValue(s){const u=this._cachedMeta.vScale,f=this.getParsed(s);return{label:u.getLabels()[s],value:""+u.getLabelForValue(f[u.axis])}}update(s){const u=this._cachedMeta,f=u.dataset,_=u.data||[],C=u.iScale.getLabels();if(f.points=_,"resize"!==s){const D=this.resolveDatasetElementOptions(s);this.options.showLine||(D.borderWidth=0),this.updateElement(f,void 0,{_loop:!0,_fullLoop:C.length===_.length,options:D},s)}this.updateElements(_,0,_.length,s)}updateElements(s,u,f,_){const C=this.getDataset(),D=this._cachedMeta.rScale,A="reset"===_;for(let F=u;F<u+f;F++){const K=s[F],ut=this.resolveDataElementOptions(F,K.active?"active":_),It=D.getPointPositionForValue(F,C.data[F]),Vt=A?D.xCenter:It.x,ee=A?D.yCenter:It.y,he={x:Vt,y:ee,angle:It.angle,skip:isNaN(Vt)||isNaN(ee),options:ut};this.updateElement(K,F,he,_)}}}return m.id="radar",m.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},m.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}},m})(),ScatterController:(()=>{class m extends Ra{}return m.id="scatter",m.defaults={showLine:!1,fill:!1},m.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:()=>"",label:d=>"("+d.label+", "+d.formattedValue+")"}}},scales:{x:{type:"linear"},y:{type:"linear"}}},m})()});function me(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var bi={_date:(()=>{class m{constructor(s){this.options=s||{}}formats(){return me()}parse(s,u){return me()}format(s,u){return me()}add(s,u,f){return me()}diff(s,u,f){return me()}startOf(s,u,f){return me()}endOf(s,u){return me()}}return m.override=function(d){Object.assign(m.prototype,d)},m})()};function $i(m,d){return"native"in m?{x:m.x,y:m.y}:br(m,d)}function vn(m,d,s,u){const{controller:f,data:_,_sorted:C}=m,D=f._cachedMeta.iScale;if(D&&d===D.axis&&C&&_.length){const A=D._reversePixels?Ns:Ds;if(!u)return A(_,d,s);if(f._sharedOptions){const F=_[0],K="function"==typeof F.getRange&&F.getRange(d);if(K){const ut=A(_,d,s-K),It=A(_,d,s+K);return{lo:ut.lo,hi:It.hi}}}}return{lo:0,hi:_.length-1}}function io(m,d,s,u,f){const _=m.getSortedVisibleDatasetMetas(),C=s[d];for(let D=0,A=_.length;D<A;++D){const{index:F,data:K}=_[D],{lo:ut,hi:It}=vn(_[D],d,C,f);for(let Vt=ut;Vt<=It;++Vt){const ee=K[Vt];ee.skip||u(ee,F,Vt)}}}function cs(m,d,s,u){const f=[];return Oo(d,m.chartArea,m._minPadding)&&io(m,s,d,function(C,D,A){C.inRange(d.x,d.y,u)&&f.push({element:C,datasetIndex:D,index:A})},!0),f}function lr(m,d,s,u,f){const _=function(m){const d=-1!==m.indexOf("x"),s=-1!==m.indexOf("y");return function(u,f){const _=d?Math.abs(u.x-f.x):0,C=s?Math.abs(u.y-f.y):0;return Math.sqrt(Math.pow(_,2)+Math.pow(C,2))}}(s);let C=Number.POSITIVE_INFINITY,D=[];return Oo(d,m.chartArea,m._minPadding)&&io(m,s,d,function(F,K,ut){if(u&&!F.inRange(d.x,d.y,f))return;const It=F.getCenterPoint(f);if(!Oo(It,m.chartArea,m._minPadding)&&!F.inRange(d.x,d.y,f))return;const Vt=_(d,It);Vt<C?(D=[{element:F,datasetIndex:K,index:ut}],C=Vt):Vt===C&&D.push({element:F,datasetIndex:K,index:ut})}),D}function cr(m,d,s,u){const f=$i(d,m),_=[],C=s.axis,D="x"===C?"inXRange":"inYRange";let A=!1;return function(m,d){const s=m.getSortedVisibleDatasetMetas();let u,f,_;for(let C=0,D=s.length;C<D;++C){({index:u,data:f}=s[C]);for(let A=0,F=f.length;A<F;++A)_=f[A],_.skip||d(_,u,A)}}(m,(F,K,ut)=>{F[D](f[C],u)&&_.push({element:F,datasetIndex:K,index:ut}),F.inRange(f.x,f.y,u)&&(A=!0)}),s.intersect&&!A?[]:_}var Bs={modes:{index(m,d,s,u){const f=$i(d,m),_=s.axis||"x",C=s.intersect?cs(m,f,_,u):lr(m,f,_,!1,u),D=[];return C.length?(m.getSortedVisibleDatasetMetas().forEach(A=>{const F=C[0].index,K=A.data[F];K&&!K.skip&&D.push({element:K,datasetIndex:A.index,index:F})}),D):[]},dataset(m,d,s,u){const f=$i(d,m),_=s.axis||"xy";let C=s.intersect?cs(m,f,_,u):lr(m,f,_,!1,u);if(C.length>0){const D=C[0].datasetIndex,A=m.getDatasetMeta(D).data;C=[];for(let F=0;F<A.length;++F)C.push({element:A[F],datasetIndex:D,index:F})}return C},point:(m,d,s,u)=>cs(m,$i(d,m),s.axis||"xy",u),nearest:(m,d,s,u)=>lr(m,$i(d,m),s.axis||"xy",s.intersect,u),x:(m,d,s,u)=>(s.axis="x",cr(m,d,s,u)),y:(m,d,s,u)=>(s.axis="y",cr(m,d,s,u))}};const Zo=["left","top","right","bottom"];function Ko(m,d){return m.filter(s=>s.pos===d)}function Yr(m,d){return m.filter(s=>-1===Zo.indexOf(s.pos)&&s.box.axis===d)}function wa(m,d){return m.sort((s,u)=>{const f=d?u:s,_=d?s:u;return f.weight===_.weight?f.index-_.index:f.weight-_.weight})}function Jl(m,d,s,u){return Math.max(m[s],d[s])+Math.max(m[u],d[u])}function bc(m,d){m.top=Math.max(m.top,d.top),m.left=Math.max(m.left,d.left),m.bottom=Math.max(m.bottom,d.bottom),m.right=Math.max(m.right,d.right)}function ms(m,d,s,u){const{pos:f,box:_}=s,C=m.maxPadding;if(!st(f)){s.size&&(m[f]-=s.size);const ut=u[s.stack]||{size:0,count:1};ut.size=Math.max(ut.size,s.horizontal?_.height:_.width),s.size=ut.size/ut.count,m[f]+=s.size}_.getPadding&&bc(C,_.getPadding());const D=Math.max(0,d.outerWidth-Jl(C,m,"left","right")),A=Math.max(0,d.outerHeight-Jl(C,m,"top","bottom")),F=D!==m.w,K=A!==m.h;return m.w=D,m.h=A,s.horizontal?{same:F,other:K}:{same:K,other:F}}function wu(m,d){const s=d.maxPadding;return function(f){const _={left:0,top:0,right:0,bottom:0};return f.forEach(C=>{_[C]=Math.max(d[C],s[C])}),_}(m?["left","right"]:["top","bottom"])}function $l(m,d,s,u){const f=[];let _,C,D,A,F,K;for(_=0,C=m.length,F=0;_<C;++_){D=m[_],A=D.box,A.update(D.width||d.w,D.height||d.h,wu(D.horizontal,d));const{same:ut,other:It}=ms(d,s,D,u);F|=ut&&f.length,K=K||It,A.fullSize||f.push(D)}return F&&$l(f,d,s,u)||K}function Zl(m,d,s,u,f){m.top=s,m.left=d,m.right=d+u,m.bottom=s+f,m.width=u,m.height=f}function Wc(m,d,s,u){const f=s.padding;let{x:_,y:C}=d;for(const D of m){const A=D.box,F=u[D.stack]||{count:1,placed:0,weight:1},K=D.stackWeight/F.weight||1;if(D.horizontal){const ut=d.w*K,It=F.size||A.height;oi(F.start)&&(C=F.start),A.fullSize?Zl(A,f.left,C,s.outerWidth-f.right-f.left,It):Zl(A,d.left+F.placed,C,ut,It),F.start=C,F.placed+=ut,C=A.bottom}else{const ut=d.h*K,It=F.size||A.width;oi(F.start)&&(_=F.start),A.fullSize?Zl(A,_,f.top,It,s.outerHeight-f.bottom-f.top):Zl(A,_,d.top+F.placed,It,ut),F.start=_,F.placed+=ut,_=A.right}}d.x=_,d.y=C}On.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var Cr={addBox(m,d){m.boxes||(m.boxes=[]),d.fullSize=d.fullSize||!1,d.position=d.position||"top",d.weight=d.weight||0,d._layers=d._layers||function(){return[{z:0,draw(s){d.draw(s)}}]},m.boxes.push(d)},removeBox(m,d){const s=m.boxes?m.boxes.indexOf(d):-1;-1!==s&&m.boxes.splice(s,1)},configure(m,d,s){d.fullSize=s.fullSize,d.position=s.position,d.weight=s.weight},update(m,d,s,u){if(!m)return;const f=Yo(m.options.layout.padding),_=Math.max(d-f.width,0),C=Math.max(s-f.height,0),D=function(m){const d=function(m){const d=[];let s,u,f,_,C,D;for(s=0,u=(m||[]).length;s<u;++s)f=m[s],({position:_,options:{stack:C,stackWeight:D=1}}=f),d.push({index:s,box:f,pos:_,horizontal:f.isHorizontal(),weight:f.weight,stack:C&&_+C,stackWeight:D});return d}(m),s=wa(d.filter(F=>F.box.fullSize),!0),u=wa(Ko(d,"left"),!0),f=wa(Ko(d,"right")),_=wa(Ko(d,"top"),!0),C=wa(Ko(d,"bottom")),D=Yr(d,"x"),A=Yr(d,"y");return{fullSize:s,leftAndTop:u.concat(_),rightAndBottom:f.concat(A).concat(C).concat(D),chartArea:Ko(d,"chartArea"),vertical:u.concat(f).concat(A),horizontal:_.concat(C).concat(D)}}(m.boxes),A=D.vertical,F=D.horizontal;_t(m.boxes,he=>{"function"==typeof he.beforeLayout&&he.beforeLayout()});const K=A.reduce((he,ve)=>ve.box.options&&!1===ve.box.options.display?he:he+1,0)||1,ut=Object.freeze({outerWidth:d,outerHeight:s,padding:f,availableWidth:_,availableHeight:C,vBoxMaxWidth:_/2/K,hBoxMaxHeight:C/2}),It=Object.assign({},f);bc(It,Yo(u));const Vt=Object.assign({maxPadding:It,w:_,h:C,x:f.left,y:f.top},f),ee=function(m,d){const s=function(m){const d={};for(const s of m){const{stack:u,pos:f,stackWeight:_}=s;if(!u||!Zo.includes(f))continue;const C=d[u]||(d[u]={count:0,placed:0,weight:0,size:0});C.count++,C.weight+=_}return d}(m),{vBoxMaxWidth:u,hBoxMaxHeight:f}=d;let _,C,D;for(_=0,C=m.length;_<C;++_){D=m[_];const{fullSize:A}=D.box,F=s[D.stack],K=F&&D.stackWeight/F.weight;D.horizontal?(D.width=K?K*u:A&&d.availableWidth,D.height=f):(D.width=u,D.height=K?K*f:A&&d.availableHeight)}return s}(A.concat(F),ut);$l(D.fullSize,Vt,ut,ee),$l(A,Vt,ut,ee),$l(F,Vt,ut,ee)&&$l(A,Vt,ut,ee),function(m){const d=m.maxPadding;function s(u){const f=Math.max(d[u]-m[u],0);return m[u]+=f,f}m.y+=s("top"),m.x+=s("left"),s("right"),s("bottom")}(Vt),Wc(D.leftAndTop,Vt,ut,ee),Vt.x+=Vt.w,Vt.y+=Vt.h,Wc(D.rightAndBottom,Vt,ut,ee),m.chartArea={left:Vt.left,top:Vt.top,right:Vt.left+Vt.w,bottom:Vt.top+Vt.h,height:Vt.h,width:Vt.w},_t(D.chartArea,he=>{const ve=he.box;Object.assign(ve,m.chartArea),ve.update(Vt.w,Vt.h)})}};class rh{acquireContext(d,s){}releaseContext(d){return!1}addEventListener(d,s,u){}removeEventListener(d,s,u){}getDevicePixelRatio(){return 1}getMaximumSize(d,s,u,f){return s=Math.max(0,s||d.width),u=u||d.height,{width:s,height:Math.max(0,f?Math.floor(s/f):u)}}isAttached(d){return!0}updateConfig(d){}}class Bh extends rh{acquireContext(d){return d&&d.getContext&&d.getContext("2d")||null}updateConfig(d){d.options.animation=!1}}const Ql="$chartjs",Hh={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},zc=m=>null===m||""===m,Du=!!yr&&{passive:!0};function ql(m,d,s){m.canvas.removeEventListener(d,s,Du)}function pa(m,d,s){const u=m.canvas,f=new MutationObserver(_=>{for(const C of _)for(const D of C.addedNodes)if(D===u||D.contains(u))return s()});return f.observe(document,{childList:!0,subtree:!0}),f}function Iu(m,d,s){const u=m.canvas,f=new MutationObserver(_=>{for(const C of _)for(const D of C.removedNodes)if(D===u||D.contains(u))return s()});return f.observe(document,{childList:!0,subtree:!0}),f}const Ys=new Map;let vs=0;function tc(){const m=window.devicePixelRatio;m!==vs&&(vs=m,Ys.forEach((d,s)=>{s.currentDevicePixelRatio!==m&&d()}))}function tl(m,d,s){const u=m.canvas,f=u&&Gs(u);if(!f)return;const _=X((D,A)=>{const F=f.clientWidth;s(D,A),F<f.clientWidth&&s()},window),C=new ResizeObserver(D=>{const A=D[0],F=A.contentRect.width,K=A.contentRect.height;0===F&&0===K||_(F,K)});return C.observe(f),function(m,d){Ys.size||window.addEventListener("resize",tc),Ys.set(m,d)}(m,_),C}function xl(m,d,s){s&&s.disconnect(),"resize"===d&&function(m){Ys.delete(m),Ys.size||window.removeEventListener("resize",tc)}(m)}function jc(m,d,s){const u=m.canvas,f=X(_=>{null!==m.ctx&&s(function(m,d){const s=Hh[m.type]||m.type,{x:u,y:f}=br(m,d);return{type:s,chart:d,native:m,x:void 0!==u?u:null,y:void 0!==f?f:null}}(_,m))},m,_=>{const C=_[0];return[C,C.offsetX,C.offsetY]});return function(m,d,s){m.addEventListener(d,s,Du)}(u,d,f),f}class Sr extends rh{acquireContext(d,s){const u=d&&d.getContext&&d.getContext("2d");return u&&u.canvas===d?(function(m,d){const s=m.style,u=m.getAttribute("height"),f=m.getAttribute("width");if(m[Ql]={initial:{height:u,width:f,style:{display:s.display,height:s.height,width:s.width}}},s.display=s.display||"block",s.boxSizing=s.boxSizing||"border-box",zc(f)){const _=ha(m,"width");void 0!==_&&(m.width=_)}if(zc(u))if(""===m.style.height)m.height=m.width/(d||2);else{const _=ha(m,"height");void 0!==_&&(m.height=_)}}(d,s),u):null}releaseContext(d){const s=d.canvas;if(!s[Ql])return!1;const u=s[Ql].initial;["height","width"].forEach(_=>{const C=u[_];Dt(C)?s.removeAttribute(_):s.setAttribute(_,C)});const f=u.style||{};return Object.keys(f).forEach(_=>{s.style[_]=f[_]}),s.width=s.width,delete s[Ql],!0}addEventListener(d,s,u){this.removeEventListener(d,s),(d.$proxies||(d.$proxies={}))[s]=({attach:pa,detach:Iu,resize:tl}[s]||jc)(d,s,u)}removeEventListener(d,s){const u=d.$proxies||(d.$proxies={}),f=u[s];f&&(({attach:xl,detach:xl,resize:xl}[s]||ql)(d,s,f),u[s]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(d,s,u,f){return function(m,d,s,u){const f=Pr(m),_=Fr(f,"margin"),C=un(f.maxWidth,m,"clientWidth")||Be,D=un(f.maxHeight,m,"clientHeight")||Be,A=function(m,d,s){let u,f;if(void 0===d||void 0===s){const _=Gs(m);if(_){const C=_.getBoundingClientRect(),D=Pr(_),A=Fr(D,"border","width"),F=Fr(D,"padding");d=C.width-F.width-A.width,s=C.height-F.height-A.height,u=un(D.maxWidth,_,"clientWidth"),f=un(D.maxHeight,_,"clientHeight")}else d=m.clientWidth,s=m.clientHeight}return{width:d,height:s,maxWidth:u||Be,maxHeight:f||Be}}(m,d,s);let{width:F,height:K}=A;if("content-box"===f.boxSizing){const ut=Fr(f,"border","width"),It=Fr(f,"padding");F-=It.width+ut.width,K-=It.height+ut.height}return F=Math.max(0,F-_.width),K=Math.max(0,u?Math.floor(F/u):K-_.height),F=Rn(Math.min(F,C,A.maxWidth)),K=Rn(Math.min(K,D,A.maxHeight)),F&&!K&&(K=Rn(F/2)),{width:F,height:K}}(d,s,u,f)}isAttached(d){const s=Gs(d);return!(!s||!s.isConnected)}}class wn{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(d){const{x:s,y:u}=this.getProps(["x","y"],d);return{x:s,y:u}}hasValue(){return $(this.x)&&$(this.y)}getProps(d,s){const u=this.$animations;if(!s||!u)return this;const f={};return d.forEach(_=>{f[_]=u[_]&&u[_].active()?u[_]._to:this[_]}),f}}wn.defaults={},wn.defaultRoutes=void 0;const ur={values:m=>pt(m)?m:""+m,numeric(m,d,s){if(0===m)return"0";const u=this.chart.options.locale;let f,_=m;if(s.length>1){const F=Math.max(Math.abs(s[0].value),Math.abs(s[s.length-1].value));(F<1e-4||F>1e15)&&(f="scientific"),_=function(m,d){let s=d.length>3?d[2].value-d[1].value:d[1].value-d[0].value;return Math.abs(s)>=1&&m!==Math.floor(m)&&(s=m-Math.floor(m)),s}(m,s)}const C=di(Math.abs(_)),D=Math.max(Math.min(-1*Math.floor(C),20),0),A={notation:f,minimumFractionDigits:D,maximumFractionDigits:D};return Object.assign(A,this.options.ticks.format),Ht(m,u,A)},logarithmic(m,d,s){if(0===m)return"0";const u=m/Math.pow(10,Math.floor(di(m)));return 1===u||2===u||5===u?ur.numeric.call(this,m,d,s):""}};var el={formatters:ur};function fa(m,d,s,u,f){const _=Tt(u,0),C=Math.min(Tt(f,m.length),m.length);let A,F,K,D=0;for(s=Math.ceil(s),f&&(A=f-u,s=A/Math.floor(A/s)),K=_;K<0;)D++,K=Math.round(_+D*s);for(F=Math.max(_,0);F<C;F++)F===K&&(d.push(m[F]),D++,K=Math.round(_+D*s))}On.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(m,d)=>d.lineWidth,tickColor:(m,d)=>d.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:el.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),On.route("scale.ticks","color","","color"),On.route("scale.grid","color","","borderColor"),On.route("scale.grid","borderColor","","borderColor"),On.route("scale.title","color","","color"),On.describe("scale",{_fallback:!1,_scriptable:m=>!m.startsWith("before")&&!m.startsWith("after")&&"callback"!==m&&"parser"!==m,_indexable:m=>"borderDash"!==m&&"tickBorderDash"!==m}),On.describe("scales",{_fallback:"scale"}),On.describe("scale.ticks",{_scriptable:m=>"backdropPadding"!==m&&"callback"!==m,_indexable:m=>"backdropPadding"!==m});const hr=(m,d,s)=>"top"===d||"left"===d?m[d]+s:m[d]-s;function Hr(m,d){const s=[],u=m.length/d,f=m.length;let _=0;for(;_<f;_+=u)s.push(m[Math.floor(_)]);return s}function Vh(m,d,s){const u=m.ticks.length,f=Math.min(d,u-1),_=m._startPixel,C=m._endPixel,D=1e-6;let F,A=m.getPixelForTick(f);if(!(s&&(F=1===u?Math.max(A-_,C-A):0===d?(m.getPixelForTick(1)-A)/2:(A-m.getPixelForTick(f-1))/2,A+=f<d?F:-F,A<_-D||A>C+D)))return A}function qr(m){return m.drawTicks?m.tickLength:0}function Vr(m,d){if(!m.display)return 0;const s=bo(m.font,d),u=Yo(m.padding);return(pt(m.text)?m.text.length:1)*s.lineHeight+u.height}function lh(m,d,s){let u=rt(m);return(s&&"right"!==d||!s&&"right"===d)&&(u=(m=>"left"===m?"right":"right"===m?"left":m)(u)),u}class nl extends wn{constructor(d){super(),this.id=d.id,this.type=d.type,this.options=void 0,this.ctx=d.ctx,this.chart=d.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(d){this.options=d.setContext(this.getContext()),this.axis=d.axis,this._userMin=this.parse(d.min),this._userMax=this.parse(d.max),this._suggestedMin=this.parse(d.suggestedMin),this._suggestedMax=this.parse(d.suggestedMax)}parse(d,s){return d}getUserBounds(){let{_userMin:d,_userMax:s,_suggestedMin:u,_suggestedMax:f}=this;return d=nt(d,Number.POSITIVE_INFINITY),s=nt(s,Number.NEGATIVE_INFINITY),u=nt(u,Number.POSITIVE_INFINITY),f=nt(f,Number.NEGATIVE_INFINITY),{min:nt(d,u),max:nt(s,f),minDefined:ot(d),maxDefined:ot(s)}}getMinMax(d){let C,{min:s,max:u,minDefined:f,maxDefined:_}=this.getUserBounds();if(f&&_)return{min:s,max:u};const D=this.getMatchingVisibleMetas();for(let A=0,F=D.length;A<F;++A)C=D[A].controller.getMinMax(this,d),f||(s=Math.min(s,C.min)),_||(u=Math.max(u,C.max));return s=_&&s>u?u:s,u=f&&s>u?s:u,{min:nt(s,nt(u,s)),max:nt(u,nt(s,u))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const d=this.chart.data;return this.options.labels||(this.isHorizontal()?d.xLabels:d.yLabels)||d.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){gt(this.options.beforeUpdate,[this])}update(d,s,u){const{beginAtZero:f,grace:_,ticks:C}=this.options,D=C.sampleSize;this.beforeUpdate(),this.maxWidth=d,this.maxHeight=s,this._margins=u=Object.assign({left:0,right:0,top:0,bottom:0},u),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+u.left+u.right:this.height+u.top+u.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(m,d,s){const{min:u,max:f}=m,_=yt(d,(f-u)/2),C=(D,A)=>s&&0===D?0:D+A;return{min:C(u,-Math.abs(_)),max:C(f,_)}}(this,_,f),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const A=D<this.ticks.length;this._convertTicksToLabels(A?Hr(this.ticks,D):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),C.display&&(C.autoSkip||"auto"===C.source)&&(this.ticks=function(m,d){const s=m.options.ticks,u=s.maxTicksLimit||function(m){const d=m.options.offset,s=m._tickSize();return Math.floor(Math.min(m._length/s+(d?0:1),m._maxLength/s))}(m),f=s.major.enabled?function(m){const d=[];let s,u;for(s=0,u=m.length;s<u;s++)m[s].major&&d.push(s);return d}(d):[],_=f.length,C=f[0],D=f[_-1],A=[];if(_>u)return function(m,d,s,u){let C,f=0,_=s[0];for(u=Math.ceil(u),C=0;C<m.length;C++)C===_&&(d.push(m[C]),f++,_=s[f*u])}(d,A,f,_/u),A;const F=function(m,d,s){const u=function(m){const d=m.length;let s,u;if(d<2)return!1;for(u=m[0],s=1;s<d;++s)if(m[s]-m[s-1]!==u)return!1;return u}(m),f=d.length/s;if(!u)return Math.max(f,1);const _=function(m){const d=[],s=Math.sqrt(m);let u;for(u=1;u<s;u++)m%u==0&&(d.push(u),d.push(m/u));return s===(0|s)&&d.push(s),d.sort((f,_)=>f-_).pop(),d}(u);for(let C=0,D=_.length-1;C<D;C++){const A=_[C];if(A>f)return A}return Math.max(f,1)}(f,d,u);if(_>0){let K,ut;const It=_>1?Math.round((D-C)/(_-1)):null;for(fa(d,A,F,Dt(It)?0:C-It,C),K=0,ut=_-1;K<ut;K++)fa(d,A,F,f[K],f[K+1]);return fa(d,A,F,D,Dt(It)?d.length:D+It),A}return fa(d,A,F),A}(this,this.ticks),this._labelSizes=null),A&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let s,u,d=this.options.reverse;this.isHorizontal()?(s=this.left,u=this.right):(s=this.top,u=this.bottom,d=!d),this._startPixel=s,this._endPixel=u,this._reversePixels=d,this._length=u-s,this._alignToPixels=this.options.alignToPixels}afterUpdate(){gt(this.options.afterUpdate,[this])}beforeSetDimensions(){gt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){gt(this.options.afterSetDimensions,[this])}_callHooks(d){this.chart.notifyPlugins(d,this.getContext()),gt(this.options[d],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){gt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(d){const s=this.options.ticks;let u,f,_;for(u=0,f=d.length;u<f;u++)_=d[u],_.label=gt(s.callback,[_.value,u,d],this)}afterTickToLabelConversion(){gt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){gt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const d=this.options,s=d.ticks,u=this.ticks.length,f=s.minRotation||0,_=s.maxRotation;let D,A,F,C=f;if(!this._isVisible()||!s.display||f>=_||u<=1||!this.isHorizontal())return void(this.labelRotation=f);const K=this._getLabelSizes(),ut=K.widest.width,It=K.highest.height,Vt=Ke(this.chart.width-ut,0,this.maxWidth);D=d.offset?this.maxWidth/u:Vt/(u-1),ut+6>D&&(D=Vt/(u-(d.offset?.5:1)),A=this.maxHeight-qr(d.grid)-s.padding-Vr(d.title,this.chart.options.font),F=Math.sqrt(ut*ut+It*It),C=Ee(Math.min(Math.asin(Ke((K.highest.height+6)/D,-1,1)),Math.asin(Ke(A/F,-1,1))-Math.asin(Ke(It/F,-1,1)))),C=Math.max(f,Math.min(_,C))),this.labelRotation=C}afterCalculateLabelRotation(){gt(this.options.afterCalculateLabelRotation,[this])}beforeFit(){gt(this.options.beforeFit,[this])}fit(){const d={width:0,height:0},{chart:s,options:{ticks:u,title:f,grid:_}}=this,C=this._isVisible(),D=this.isHorizontal();if(C){const A=Vr(f,s.options.font);if(D?(d.width=this.maxWidth,d.height=qr(_)+A):(d.height=this.maxHeight,d.width=qr(_)+A),u.display&&this.ticks.length){const{first:F,last:K,widest:ut,highest:It}=this._getLabelSizes(),Vt=2*u.padding,ee=ye(this.labelRotation),he=Math.cos(ee),ve=Math.sin(ee);D?d.height=Math.min(this.maxHeight,d.height+(u.mirror?0:ve*ut.width+he*It.height)+Vt):d.width=Math.min(this.maxWidth,d.width+(u.mirror?0:he*ut.width+ve*It.height)+Vt),this._calculatePadding(F,K,ve,he)}}this._handleMargins(),D?(this.width=this._length=s.width-this._margins.left-this._margins.right,this.height=d.height):(this.width=d.width,this.height=this._length=s.height-this._margins.top-this._margins.bottom)}_calculatePadding(d,s,u,f){const{ticks:{align:_,padding:C},position:D}=this.options,A=0!==this.labelRotation,F="top"!==D&&"x"===this.axis;if(this.isHorizontal()){const K=this.getPixelForTick(0)-this.left,ut=this.right-this.getPixelForTick(this.ticks.length-1);let It=0,Vt=0;A?F?(It=f*d.width,Vt=u*s.height):(It=u*d.height,Vt=f*s.width):"start"===_?Vt=s.width:"end"===_?It=d.width:(It=d.width/2,Vt=s.width/2),this.paddingLeft=Math.max((It-K+C)*this.width/(this.width-K),0),this.paddingRight=Math.max((Vt-ut+C)*this.width/(this.width-ut),0)}else{let K=s.height/2,ut=d.height/2;"start"===_?(K=0,ut=d.height):"end"===_&&(K=s.height,ut=0),this.paddingTop=K+C,this.paddingBottom=ut+C}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){gt(this.options.afterFit,[this])}isHorizontal(){const{axis:d,position:s}=this.options;return"top"===s||"bottom"===s||"x"===d}isFullSize(){return this.options.fullSize}_convertTicksToLabels(d){let s,u;for(this.beforeTickToLabelConversion(),this.generateTickLabels(d),s=0,u=d.length;s<u;s++)Dt(d[s].label)&&(d.splice(s,1),u--,s--);this.afterTickToLabelConversion()}_getLabelSizes(){let d=this._labelSizes;if(!d){const s=this.options.ticks.sampleSize;let u=this.ticks;s<u.length&&(u=Hr(u,s)),this._labelSizes=d=this._computeLabelSizes(u,u.length)}return d}_computeLabelSizes(d,s){const{ctx:u,_longestTextCache:f}=this,_=[],C=[];let F,K,ut,It,Vt,ee,he,ve,De,si,Wi,D=0,A=0;for(F=0;F<s;++F){if(It=d[F].label,Vt=this._resolveTickFontOptions(F),u.font=ee=Vt.string,he=f[ee]=f[ee]||{data:{},gc:[]},ve=Vt.lineHeight,De=si=0,Dt(It)||pt(It)){if(pt(It))for(K=0,ut=It.length;K<ut;++K)Wi=It[K],!Dt(Wi)&&!pt(Wi)&&(De=lo(u,he.data,he.gc,De,Wi),si+=ve)}else De=lo(u,he.data,he.gc,De,It),si=ve;_.push(De),C.push(si),D=Math.max(De,D),A=Math.max(si,A)}!function(m,d){_t(m,s=>{const u=s.gc,f=u.length/2;let _;if(f>d){for(_=0;_<f;++_)delete s.data[u[_]];u.splice(0,f)}})}(f,s);const Ri=_.indexOf(D),Si=C.indexOf(A),Ki=Qi=>({width:_[Qi]||0,height:C[Qi]||0});return{first:Ki(0),last:Ki(s-1),widest:Ki(Ri),highest:Ki(Si),widths:_,heights:C}}getLabelForValue(d){return d}getPixelForValue(d,s){return NaN}getValueForPixel(d){}getPixelForTick(d){const s=this.ticks;return d<0||d>s.length-1?null:this.getPixelForValue(s[d].value)}getPixelForDecimal(d){this._reversePixels&&(d=1-d);const s=this._startPixel+d*this._length;return Ke(this._alignToPixels?Co(this.chart,s,0):s,-32768,32767)}getDecimalForPixel(d){const s=(d-this._startPixel)/this._length;return this._reversePixels?1-s:s}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:d,max:s}=this;return d<0&&s<0?s:d>0&&s>0?d:0}getContext(d){const s=this.ticks||[];if(d>=0&&d<s.length){const u=s[d];return u.$context||(u.$context=function(m,d,s){return $o(m,{tick:s,index:d,type:"tick"})}(this.getContext(),d,u))}return this.$context||(this.$context=function(m,d){return $o(m,{scale:d,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const d=this.options.ticks,s=ye(this.labelRotation),u=Math.abs(Math.cos(s)),f=Math.abs(Math.sin(s)),_=this._getLabelSizes(),C=d.autoSkipPadding||0,D=_?_.widest.width+C:0,A=_?_.highest.height+C:0;return this.isHorizontal()?A*u>D*f?D/u:A/f:A*f<D*u?A/u:D/f}_isVisible(){const d=this.options.display;return"auto"!==d?!!d:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(d){const s=this.axis,u=this.chart,f=this.options,{grid:_,position:C}=f,D=_.offset,A=this.isHorizontal(),K=this.ticks.length+(D?1:0),ut=qr(_),It=[],Vt=_.setContext(this.getContext()),ee=Vt.drawBorder?Vt.borderWidth:0,he=ee/2,ve=function(qi){return Co(u,qi,ee)};let De,si,Wi,Ri,Si,Ki,Qi,nn,ln,Kn,rn,$n;if("top"===C)De=ve(this.bottom),Ki=this.bottom-ut,nn=De-he,Kn=ve(d.top)+he,$n=d.bottom;else if("bottom"===C)De=ve(this.top),Kn=d.top,$n=ve(d.bottom)-he,Ki=De+he,nn=this.top+ut;else if("left"===C)De=ve(this.right),Si=this.right-ut,Qi=De-he,ln=ve(d.left)+he,rn=d.right;else if("right"===C)De=ve(this.left),ln=d.left,rn=ve(d.right)-he,Si=De+he,Qi=this.left+ut;else if("x"===s){if("center"===C)De=ve((d.top+d.bottom)/2+.5);else if(st(C)){const qi=Object.keys(C)[0];De=ve(this.chart.scales[qi].getPixelForValue(C[qi]))}Kn=d.top,$n=d.bottom,Ki=De+he,nn=Ki+ut}else if("y"===s){if("center"===C)De=ve((d.left+d.right)/2);else if(st(C)){const qi=Object.keys(C)[0];De=ve(this.chart.scales[qi].getPixelForValue(C[qi]))}Si=De-he,Qi=Si-ut,ln=d.left,rn=d.right}const Ho=Tt(f.ticks.maxTicksLimit,K),Hi=Math.max(1,Math.ceil(K/Ho));for(si=0;si<K;si+=Hi){const qi=_.setContext(this.getContext(si)),Nn=qi.lineWidth,vo=qi.color,fo=_.borderDash||[],zo=qi.borderDashOffset,_d=qi.tickWidth,Bi=qi.tickColor,mn=qi.tickBorderDash||[],ts=qi.tickBorderDashOffset;Wi=Vh(this,si,D),void 0!==Wi&&(Ri=Co(u,Wi,Nn),A?Si=Qi=ln=rn=Ri:Ki=nn=Kn=$n=Ri,It.push({tx1:Si,ty1:Ki,tx2:Qi,ty2:nn,x1:ln,y1:Kn,x2:rn,y2:$n,width:Nn,color:vo,borderDash:fo,borderDashOffset:zo,tickWidth:_d,tickColor:Bi,tickBorderDash:mn,tickBorderDashOffset:ts}))}return this._ticksLength=K,this._borderValue=De,It}_computeLabelItems(d){const s=this.axis,u=this.options,{position:f,ticks:_}=u,C=this.isHorizontal(),D=this.ticks,{align:A,crossAlign:F,padding:K,mirror:ut}=_,It=qr(u.grid),Vt=It+K,ee=ut?-K:Vt,he=-ye(this.labelRotation),ve=[];let De,si,Wi,Ri,Si,Ki,Qi,nn,ln,Kn,rn,$n,Ho="middle";if("top"===f)Ki=this.bottom-ee,Qi=this._getXAxisLabelAlignment();else if("bottom"===f)Ki=this.top+ee,Qi=this._getXAxisLabelAlignment();else if("left"===f){const qi=this._getYAxisLabelAlignment(It);Qi=qi.textAlign,Si=qi.x}else if("right"===f){const qi=this._getYAxisLabelAlignment(It);Qi=qi.textAlign,Si=qi.x}else if("x"===s){if("center"===f)Ki=(d.top+d.bottom)/2+Vt;else if(st(f)){const qi=Object.keys(f)[0];Ki=this.chart.scales[qi].getPixelForValue(f[qi])+Vt}Qi=this._getXAxisLabelAlignment()}else if("y"===s){if("center"===f)Si=(d.left+d.right)/2-Vt;else if(st(f)){const qi=Object.keys(f)[0];Si=this.chart.scales[qi].getPixelForValue(f[qi])}Qi=this._getYAxisLabelAlignment(It).textAlign}"y"===s&&("start"===A?Ho="top":"end"===A&&(Ho="bottom"));const Hi=this._getLabelSizes();for(De=0,si=D.length;De<si;++De){Wi=D[De],Ri=Wi.label;const qi=_.setContext(this.getContext(De));nn=this.getPixelForTick(De)+_.labelOffset,ln=this._resolveTickFontOptions(De),Kn=ln.lineHeight,rn=pt(Ri)?Ri.length:1;const Nn=rn/2,vo=qi.color,fo=qi.textStrokeColor,zo=qi.textStrokeWidth;let _d;if(C?(Si=nn,$n="top"===f?"near"===F||0!==he?-rn*Kn+Kn/2:"center"===F?-Hi.highest.height/2-Nn*Kn+Kn:Kn/2-Hi.highest.height:"near"===F||0!==he?Kn/2:"center"===F?Hi.highest.height/2-Nn*Kn:Hi.highest.height-rn*Kn,ut&&($n*=-1)):(Ki=nn,$n=(1-rn)*Kn/2),qi.showLabelBackdrop){const Bi=Yo(qi.backdropPadding),mn=Hi.heights[De],ts=Hi.widths[De];let Ir=Ki+$n-Bi.top,S=Si-Bi.left;switch(Ho){case"middle":Ir-=mn/2;break;case"bottom":Ir-=mn}switch(Qi){case"center":S-=ts/2;break;case"right":S-=ts}_d={left:S,top:Ir,width:ts+Bi.width,height:mn+Bi.height,color:qi.backdropColor}}ve.push({rotation:he,label:Ri,font:ln,color:vo,strokeColor:fo,strokeWidth:zo,textOffset:$n,textAlign:Qi,textBaseline:Ho,translation:[Si,Ki],backdrop:_d})}return ve}_getXAxisLabelAlignment(){const{position:d,ticks:s}=this.options;if(-ye(this.labelRotation))return"top"===d?"left":"right";let f="center";return"start"===s.align?f="left":"end"===s.align&&(f="right"),f}_getYAxisLabelAlignment(d){const{position:s,ticks:{crossAlign:u,mirror:f,padding:_}}=this.options,D=d+_,A=this._getLabelSizes().widest.width;let F,K;return"left"===s?f?(K=this.right+_,"near"===u?F="left":"center"===u?(F="center",K+=A/2):(F="right",K+=A)):(K=this.right-D,"near"===u?F="right":"center"===u?(F="center",K-=A/2):(F="left",K=this.left)):"right"===s?f?(K=this.left+_,"near"===u?F="right":"center"===u?(F="center",K-=A/2):(F="left",K-=A)):(K=this.left+D,"near"===u?F="left":"center"===u?(F="center",K+=A/2):(F="right",K=this.right)):F="right",{textAlign:F,x:K}}_computeLabelArea(){if(this.options.ticks.mirror)return;const d=this.chart,s=this.options.position;return"left"===s||"right"===s?{top:0,left:this.left,bottom:d.height,right:this.right}:"top"===s||"bottom"===s?{top:this.top,left:0,bottom:this.bottom,right:d.width}:void 0}drawBackground(){const{ctx:d,options:{backgroundColor:s},left:u,top:f,width:_,height:C}=this;s&&(d.save(),d.fillStyle=s,d.fillRect(u,f,_,C),d.restore())}getLineWidthForValue(d){const s=this.options.grid;if(!this._isVisible()||!s.display)return 0;const f=this.ticks.findIndex(_=>_.value===d);return f>=0?s.setContext(this.getContext(f)).lineWidth:0}drawGrid(d){const s=this.options.grid,u=this.ctx,f=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(d));let _,C;const D=(A,F,K)=>{!K.width||!K.color||(u.save(),u.lineWidth=K.width,u.strokeStyle=K.color,u.setLineDash(K.borderDash||[]),u.lineDashOffset=K.borderDashOffset,u.beginPath(),u.moveTo(A.x,A.y),u.lineTo(F.x,F.y),u.stroke(),u.restore())};if(s.display)for(_=0,C=f.length;_<C;++_){const A=f[_];s.drawOnChartArea&&D({x:A.x1,y:A.y1},{x:A.x2,y:A.y2},A),s.drawTicks&&D({x:A.tx1,y:A.ty1},{x:A.tx2,y:A.ty2},{color:A.tickColor,width:A.tickWidth,borderDash:A.tickBorderDash,borderDashOffset:A.tickBorderDashOffset})}}drawBorder(){const{chart:d,ctx:s,options:{grid:u}}=this,f=u.setContext(this.getContext()),_=u.drawBorder?f.borderWidth:0;if(!_)return;const C=u.setContext(this.getContext(0)).lineWidth,D=this._borderValue;let A,F,K,ut;this.isHorizontal()?(A=Co(d,this.left,_)-_/2,F=Co(d,this.right,C)+C/2,K=ut=D):(K=Co(d,this.top,_)-_/2,ut=Co(d,this.bottom,C)+C/2,A=F=D),s.save(),s.lineWidth=f.borderWidth,s.strokeStyle=f.borderColor,s.beginPath(),s.moveTo(A,K),s.lineTo(F,ut),s.stroke(),s.restore()}drawLabels(d){if(!this.options.ticks.display)return;const u=this.ctx,f=this._computeLabelArea();f&&go(u,f);const _=this._labelItems||(this._labelItems=this._computeLabelItems(d));let C,D;for(C=0,D=_.length;C<D;++C){const A=_[C],F=A.font,K=A.label;A.backdrop&&(u.fillStyle=A.backdrop.color,u.fillRect(A.backdrop.left,A.backdrop.top,A.backdrop.width,A.backdrop.height)),fs(u,K,0,A.textOffset,F,A)}f&&er(u)}drawTitle(){const{ctx:d,options:{position:s,title:u,reverse:f}}=this;if(!u.display)return;const _=bo(u.font),C=Yo(u.padding),D=u.align;let A=_.lineHeight/2;"bottom"===s||"center"===s||st(s)?(A+=C.bottom,pt(u.text)&&(A+=_.lineHeight*(u.text.length-1))):A+=C.top;const{titleX:F,titleY:K,maxWidth:ut,rotation:It}=function(m,d,s,u){const{top:f,left:_,bottom:C,right:D,chart:A}=m,{chartArea:F,scales:K}=A;let It,Vt,ee,ut=0;const he=C-f,ve=D-_;if(m.isHorizontal()){if(Vt=ct(u,_,D),st(s)){const De=Object.keys(s)[0];ee=K[De].getPixelForValue(s[De])+he-d}else ee="center"===s?(F.bottom+F.top)/2+he-d:hr(m,s,d);It=D-_}else{if(st(s)){const De=Object.keys(s)[0];Vt=K[De].getPixelForValue(s[De])-ve+d}else Vt="center"===s?(F.left+F.right)/2-ve+d:hr(m,s,d);ee=ct(u,C,f),ut="left"===s?-ie:ie}return{titleX:Vt,titleY:ee,maxWidth:It,rotation:ut}}(this,A,s,D);fs(d,u.text,0,0,_,{color:u.color,maxWidth:ut,rotation:It,textAlign:lh(D,s,f),textBaseline:"middle",translation:[F,K]})}draw(d){!this._isVisible()||(this.drawBackground(),this.drawGrid(d),this.drawBorder(),this.drawTitle(),this.drawLabels(d))}_layers(){const d=this.options,s=d.ticks&&d.ticks.z||0,u=Tt(d.grid&&d.grid.z,-1);return this._isVisible()&&this.draw===nl.prototype.draw?[{z:u,draw:f=>{this.drawBackground(),this.drawGrid(f),this.drawTitle()}},{z:u+1,draw:()=>{this.drawBorder()}},{z:s,draw:f=>{this.drawLabels(f)}}]:[{z:s,draw:f=>{this.draw(f)}}]}getMatchingVisibleMetas(d){const s=this.chart.getSortedVisibleDatasetMetas(),u=this.axis+"AxisID",f=[];let _,C;for(_=0,C=s.length;_<C;++_){const D=s[_];D[u]===this.id&&(!d||D.type===d)&&f.push(D)}return f}_resolveTickFontOptions(d){return bo(this.options.ticks.setContext(this.getContext(d)).font)}_maxDigits(){const d=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/d}}class kl{constructor(d,s,u){this.type=d,this.scope=s,this.override=u,this.items=Object.create(null)}isForType(d){return Object.prototype.isPrototypeOf.call(this.type.prototype,d.prototype)}register(d){const s=Object.getPrototypeOf(d);let u;var m;"id"in(m=s)&&"defaults"in m&&(u=this.register(s));const f=this.items,_=d.id,C=this.scope+"."+_;if(!_)throw new Error("class does not have id: "+d);return _ in f||(f[_]=d,function(m,d,s){const u=Xe(Object.create(null),[s?On.get(s):{},On.get(d),m.defaults]);On.set(d,u),m.defaultRoutes&&function(m,d){Object.keys(d).forEach(s=>{const u=s.split("."),f=u.pop(),_=[m].concat(u).join("."),C=d[s].split("."),D=C.pop(),A=C.join(".");On.route(_,f,A,D)})}(d,m.defaultRoutes),m.descriptors&&On.describe(d,m.descriptors)}(d,C,u),this.override&&On.override(d.id,d.overrides)),C}get(d){return this.items[d]}unregister(d){const s=this.items,u=d.id,f=this.scope;u in s&&delete s[u],f&&u in On[f]&&(delete On[f][u],this.override&&delete No[u])}}var Kr=new class{constructor(){this.controllers=new kl(Qr,"datasets",!0),this.elements=new kl(wn,"elements"),this.plugins=new kl(Object,"plugins"),this.scales=new kl(nl,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...d){this._each("register",d)}remove(...d){this._each("unregister",d)}addControllers(...d){this._each("register",d,this.controllers)}addElements(...d){this._each("register",d,this.elements)}addPlugins(...d){this._each("register",d,this.plugins)}addScales(...d){this._each("register",d,this.scales)}getController(d){return this._get(d,this.controllers,"controller")}getElement(d){return this._get(d,this.elements,"element")}getPlugin(d){return this._get(d,this.plugins,"plugin")}getScale(d){return this._get(d,this.scales,"scale")}removeControllers(...d){this._each("unregister",d,this.controllers)}removeElements(...d){this._each("unregister",d,this.elements)}removePlugins(...d){this._each("unregister",d,this.plugins)}removeScales(...d){this._each("unregister",d,this.scales)}_each(d,s,u){[...s].forEach(f=>{const _=u||this._getRegistryForType(f);u||_.isForType(f)||_===this.plugins&&f.id?this._exec(d,_,f):_t(f,C=>{const D=u||this._getRegistryForType(C);this._exec(d,D,C)})})}_exec(d,s,u){const f=qe(d);gt(u["before"+f],[],u),s[d](u),gt(u["after"+f],[],u)}_getRegistryForType(d){for(let s=0;s<this._typedRegistries.length;s++){const u=this._typedRegistries[s];if(u.isForType(d))return u}return this.plugins}_get(d,s,u){const f=s.get(d);if(void 0===f)throw new Error('"'+d+'" is not a registered '+u+".");return f}};class ch{constructor(){this._init=[]}notify(d,s,u,f){"beforeInit"===s&&(this._init=this._createDescriptors(d,!0),this._notify(this._init,d,"install"));const _=f?this._descriptors(d).filter(f):this._descriptors(d),C=this._notify(_,d,s,u);return"destroy"===s&&(this._notify(_,d,"stop"),this._notify(this._init,d,"uninstall")),C}_notify(d,s,u,f){f=f||{};for(const _ of d){const C=_.plugin;if(!1===gt(C[u],[s,f,_.options],C)&&f.cancelable)return!1}return!0}invalidate(){Dt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(d){if(this._cache)return this._cache;const s=this._cache=this._createDescriptors(d);return this._notifyStateChanges(d),s}_createDescriptors(d,s){const u=d&&d.config,f=Tt(u.options&&u.options.plugins,{}),_=function(m){const d=[],s=Object.keys(Kr.plugins.items);for(let f=0;f<s.length;f++)d.push(Kr.getPlugin(s[f]));const u=m.plugins||[];for(let f=0;f<u.length;f++){const _=u[f];-1===d.indexOf(_)&&d.push(_)}return d}(u);return!1!==f||s?function(m,d,s,u){const f=[],_=m.getContext();for(let C=0;C<d.length;C++){const D=d[C],F=Ec(s[D.id],u);null!==F&&f.push({plugin:D,options:Ou(m.config,D,F,_)})}return f}(d,_,f,s):[]}_notifyStateChanges(d){const s=this._oldCache||[],u=this._cache,f=(_,C)=>_.filter(D=>!C.some(A=>D.plugin.id===A.plugin.id));this._notify(f(s,u),d,"stop"),this._notify(f(u,s),d,"start")}}function Ec(m,d){return d||!1!==m?!0===m?{}:m:null}function Ou(m,d,s,u){const f=m.pluginScopeKeys(d),_=m.getOptionScopes(s,f);return m.createResolver(_,u,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function mo(m,d){return((d.datasets||{})[m]||{}).indexAxis||d.indexAxis||(On.datasets[m]||{}).indexAxis||"x"}function ol(m,d){return"x"===m||"y"===m?m:d.axis||function(m){return"top"===m||"bottom"===m?"x":"left"===m||"right"===m?"y":void 0}(d.position)||m.charAt(0).toLowerCase()}function xu(m){const d=m.options||(m.options={});d.plugins=Tt(d.plugins,{}),d.scales=function(m,d){const s=No[m.type]||{scales:{}},u=d.scales||{},f=mo(m.type,d),_=Object.create(null),C=Object.create(null);return Object.keys(u).forEach(D=>{const A=u[D];if(!st(A))return console.error(`Invalid scale configuration for scale: ${D}`);if(A._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${D}`);const F=ol(D,A),K=function(m,d){return m===d?"_index_":"_value_"}(F,f),ut=s.scales||{};_[F]=_[F]||D,C[D]=Ce(Object.create(null),[{axis:F},A,ut[F],ut[K]])}),m.data.datasets.forEach(D=>{const A=D.type||m.type,F=D.indexAxis||mo(A,d),ut=(No[A]||{}).scales||{};Object.keys(ut).forEach(It=>{const Vt=function(m,d){let s=m;return"_index_"===m?s=d:"_value_"===m&&(s="x"===d?"y":"x"),s}(It,F),ee=D[Vt+"AxisID"]||_[Vt]||Vt;C[ee]=C[ee]||Object.create(null),Ce(C[ee],[{axis:Vt},u[ee],ut[It]])})}),Object.keys(C).forEach(D=>{const A=C[D];Ce(A,[On.scales[A.type],On.scale])}),C}(m,d)}function Wa(m){return(m=m||{}).datasets=m.datasets||[],m.labels=m.labels||[],m}const nc=new Map,Zc=new Set;function oc(m,d){let s=nc.get(m);return s||(s=d(),nc.set(m,s),Zc.add(s)),s}const Pl=(m,d,s)=>{const u=Pe(d,s);void 0!==u&&m.add(u)};class za{constructor(d){var m;this._config=((m=(m=d)||{}).data=Wa(m.data),xu(m),m),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(d){this._config.type=d}get data(){return this._config.data}set data(d){this._config.data=Wa(d)}get options(){return this._config.options}set options(d){this._config.options=d}get plugins(){return this._config.plugins}update(){const d=this._config;this.clearCache(),xu(d)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(d){return oc(d,()=>[[`datasets.${d}`,""]])}datasetAnimationScopeKeys(d,s){return oc(`${d}.transition.${s}`,()=>[[`datasets.${d}.transitions.${s}`,`transitions.${s}`],[`datasets.${d}`,""]])}datasetElementScopeKeys(d,s){return oc(`${d}-${s}`,()=>[[`datasets.${d}.elements.${s}`,`datasets.${d}`,`elements.${s}`,""]])}pluginScopeKeys(d){const s=d.id;return oc(`${this.type}-plugin-${s}`,()=>[[`plugins.${s}`,...d.additionalOptionScopes||[]]])}_cachedScopes(d,s){const u=this._scopeCache;let f=u.get(d);return(!f||s)&&(f=new Map,u.set(d,f)),f}getOptionScopes(d,s,u){const{options:f,type:_}=this,C=this._cachedScopes(d,u),D=C.get(s);if(D)return D;const A=new Set;s.forEach(K=>{d&&(A.add(d),K.forEach(ut=>Pl(A,d,ut))),K.forEach(ut=>Pl(A,f,ut)),K.forEach(ut=>Pl(A,No[_]||{},ut)),K.forEach(ut=>Pl(A,On,ut)),K.forEach(ut=>Pl(A,Ao,ut))});const F=Array.from(A);return 0===F.length&&F.push(Object.create(null)),Zc.has(s)&&C.set(s,F),F}chartOptionScopes(){const{options:d,type:s}=this;return[d,No[s]||{},On.datasets[s]||{},{type:s},On,Ao]}resolveNamedOptions(d,s,u,f=[""]){const _={$shared:!0},{resolver:C,subPrefixes:D}=Fl(this._resolverCache,d,f);let A=C;(function(m,d){const{isScriptable:s,isIndexable:u}=aa(m);for(const f of d){const _=s(f),C=u(f),D=(C||_)&&m[f];if(_&&(wi(D)||hh(D))||C&&pt(D))return!0}return!1})(C,s)&&(_.$shared=!1,A=Qn(C,u=wi(u)?u():u,this.createResolver(d,u,D)));for(const F of s)_[F]=A[F];return _}createResolver(d,s,u=[""],f){const{resolver:_}=Fl(this._resolverCache,d,u);return st(s)?Qn(_,s,void 0,f):_}}function Fl(m,d,s){let u=m.get(d);u||(u=new Map,m.set(d,u));const f=s.join();let _=u.get(f);return _||(_={resolver:Is(d,s),subPrefixes:s.filter(D=>!D.toLowerCase().includes("hover"))},u.set(f,_)),_}const hh=m=>st(m)&&Object.getOwnPropertyNames(m).reduce((d,s)=>d||wi(m[s]),!1),Bl=["top","bottom","left","right","chartArea"];function Hl(m,d){return"top"===m||"bottom"===m||-1===Bl.indexOf(m)&&"x"===d}function dr(m,d){return function(s,u){return s[m]===u[m]?s[d]-u[d]:s[m]-u[m]}}function ku(m){const d=m.chart,s=d.options.animation;d.notifyPlugins("afterRender"),gt(s&&s.onComplete,[m],d)}function Lu(m){const d=m.chart,s=d.options.animation;gt(s&&s.onProgress,[m],d)}function sc(m){return Zs()&&"string"==typeof m?m=document.getElementById(m):m&&m.length&&(m=m[0]),m&&m.canvas&&(m=m.canvas),m}const ga={},Ia=m=>{const d=sc(m);return Object.values(ga).filter(s=>s.canvas===d).pop()};class ht{constructor(d,s){const u=this.config=new za(s),f=sc(d),_=Ia(f);if(_)throw new Error("Canvas is already in use. Chart with ID '"+_.id+"' must be destroyed before the canvas can be reused.");const C=u.createResolver(u.chartOptionScopes(),this.getContext());var m;this.platform=new(u.platform||(m=f,!Zs()||"undefined"!=typeof OffscreenCanvas&&m instanceof OffscreenCanvas?Bh:Sr)),this.platform.updateConfig(u);const D=this.platform.acquireContext(f,C.aspectRatio),A=D&&D.canvas,F=A&&A.height,K=A&&A.width;this.id=Rt(),this.ctx=D,this.canvas=A,this.width=K,this.height=F,this._options=C,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new ch,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(m,d){let s;return function(...u){return d?(clearTimeout(s),s=setTimeout(m,d,u)):m.apply(this,u),d}}(ut=>this.update(ut),C.resizeDelay||0),ga[this.id]=this,D&&A?(Io.listen(this,"complete",ku),Io.listen(this,"progress",Lu),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:d,maintainAspectRatio:s},width:u,height:f,_aspectRatio:_}=this;return Dt(d)?s&&_?_:f?u/f:null:d}get data(){return this.config.data}set data(d){this.config.data=d}get options(){return this._options}set options(d){this.config.options=d}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Xo(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return ws(this.canvas,this.ctx),this}stop(){return Io.stop(this),this}resize(d,s){Io.running(this)?this._resizeBeforeDraw={width:d,height:s}:this._resize(d,s)}_resize(d,s){const u=this.options,C=this.platform.getMaximumSize(this.canvas,d,s,u.maintainAspectRatio&&this.aspectRatio),D=u.devicePixelRatio||this.platform.getDevicePixelRatio(),A=this.width?"resize":"attach";this.width=C.width,this.height=C.height,this._aspectRatio=this.aspectRatio,Xo(this,D,!0)&&(this.notifyPlugins("resize",{size:C}),gt(u.onResize,[this,C],this),this.attached&&this._doResize(A)&&this.render())}ensureScalesHaveIDs(){_t(this.options.scales||{},(u,f)=>{u.id=f})}buildOrUpdateScales(){const d=this.options,s=d.scales,u=this.scales,f=Object.keys(u).reduce((C,D)=>(C[D]=!1,C),{});let _=[];s&&(_=_.concat(Object.keys(s).map(C=>{const D=s[C],A=ol(C,D),F="r"===A,K="x"===A;return{options:D,dposition:F?"chartArea":K?"bottom":"left",dtype:F?"radialLinear":K?"category":"linear"}}))),_t(_,C=>{const D=C.options,A=D.id,F=ol(A,D),K=Tt(D.type,C.dtype);(void 0===D.position||Hl(D.position,F)!==Hl(C.dposition))&&(D.position=C.dposition),f[A]=!0;let ut=null;A in u&&u[A].type===K?ut=u[A]:(ut=new(Kr.getScale(K))({id:A,type:K,ctx:this.ctx,chart:this}),u[ut.id]=ut),ut.init(D,d)}),_t(f,(C,D)=>{C||delete u[D]}),_t(u,C=>{Cr.configure(this,C,C.options),Cr.addBox(this,C)})}_updateMetasets(){const d=this._metasets,s=this.data.datasets.length,u=d.length;if(d.sort((f,_)=>f.index-_.index),u>s){for(let f=s;f<u;++f)this._destroyDatasetMeta(f);d.splice(s,u-s)}this._sortedMetasets=d.slice(0).sort(dr("order","index"))}_removeUnreferencedMetasets(){const{_metasets:d,data:{datasets:s}}=this;d.length>s.length&&delete this._stacks,d.forEach((u,f)=>{0===s.filter(_=>_===u._dataset).length&&this._destroyDatasetMeta(f)})}buildOrUpdateControllers(){const d=[],s=this.data.datasets;let u,f;for(this._removeUnreferencedMetasets(),u=0,f=s.length;u<f;u++){const _=s[u];let C=this.getDatasetMeta(u);const D=_.type||this.config.type;if(C.type&&C.type!==D&&(this._destroyDatasetMeta(u),C=this.getDatasetMeta(u)),C.type=D,C.indexAxis=_.indexAxis||mo(D,this.options),C.order=_.order||0,C.index=u,C.label=""+_.label,C.visible=this.isDatasetVisible(u),C.controller)C.controller.updateIndex(u),C.controller.linkScales();else{const A=Kr.getController(D),{datasetElementType:F,dataElementType:K}=On.datasets[D];Object.assign(A.prototype,{dataElementType:Kr.getElement(K),datasetElementType:F&&Kr.getElement(F)}),C.controller=new A(this,u),d.push(C.controller)}}return this._updateMetasets(),d}_resetElements(){_t(this.data.datasets,(d,s)=>{this.getDatasetMeta(s).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(d){const s=this.config;s.update();const u=this._options=s.createResolver(s.chartOptionScopes(),this.getContext());_t(this.scales,F=>{Cr.removeBox(this,F)});const f=this._animationsDisabled=!u.animation;if(this.ensureScalesHaveIDs(),this.buildOrUpdateScales(),(!((m,d)=>{if(m.size!==d.size)return!1;for(const s of m)if(!d.has(s))return!1;return!0})(new Set(Object.keys(this._listeners)),new Set(u.events))||!!this._responsiveListeners!==u.responsive)&&(this.unbindEvents(),this.bindEvents()),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:d,cancelable:!0}))return;const D=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let A=0;for(let F=0,K=this.data.datasets.length;F<K;F++){const{controller:ut}=this.getDatasetMeta(F),It=!f&&-1===D.indexOf(ut);ut.buildOrUpdateElements(It),A=Math.max(+ut.getMaxOverflow(),A)}A=this._minPadding=u.layout.autoPadding?A:0,this._updateLayout(A),f||_t(D,F=>{F.reset()}),this._updateDatasets(d),this.notifyPlugins("afterUpdate",{mode:d}),this._layers.sort(dr("z","_idx")),this._lastEvent&&this._eventHandler(this._lastEvent,!0),this.render()}_updateLayout(d){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Cr.update(this,this.width,this.height,d);const s=this.chartArea,u=s.width<=0||s.height<=0;this._layers=[],_t(this.boxes,f=>{u&&"chartArea"===f.position||(f.configure&&f.configure(),this._layers.push(...f._layers()))},this),this._layers.forEach((f,_)=>{f._idx=_}),this.notifyPlugins("afterLayout")}_updateDatasets(d){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:d,cancelable:!0})){for(let s=0,u=this.data.datasets.length;s<u;++s)this._updateDataset(s,wi(d)?d({datasetIndex:s}):d);this.notifyPlugins("afterDatasetsUpdate",{mode:d})}}_updateDataset(d,s){const u=this.getDatasetMeta(d),f={meta:u,index:d,mode:s,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",f)&&(u.controller._update(s),f.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",f))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(Io.has(this)?this.attached&&!Io.running(this)&&Io.start(this):(this.draw(),ku({chart:this})))}draw(){let d;if(this._resizeBeforeDraw){const{width:u,height:f}=this._resizeBeforeDraw;this._resize(u,f),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const s=this._layers;for(d=0;d<s.length&&s[d].z<=0;++d)s[d].draw(this.chartArea);for(this._drawDatasets();d<s.length;++d)s[d].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(d){const s=this._sortedMetasets,u=[];let f,_;for(f=0,_=s.length;f<_;++f){const C=s[f];(!d||C.visible)&&u.push(C)}return u}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const d=this.getSortedVisibleDatasetMetas();for(let s=d.length-1;s>=0;--s)this._drawDataset(d[s]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(d){const s=this.ctx,u=d._clip,f=!u.disabled,_=this.chartArea,C={meta:d,index:d.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",C)&&(f&&go(s,{left:!1===u.left?0:_.left-u.left,right:!1===u.right?this.width:_.right+u.right,top:!1===u.top?0:_.top-u.top,bottom:!1===u.bottom?this.height:_.bottom+u.bottom}),d.controller.draw(),f&&er(s),C.cancelable=!1,this.notifyPlugins("afterDatasetDraw",C))}getElementsAtEventForMode(d,s,u,f){const _=Bs.modes[s];return"function"==typeof _?_(this,d,u,f):[]}getDatasetMeta(d){const s=this.data.datasets[d],u=this._metasets;let f=u.filter(_=>_&&_._dataset===s).pop();return f||(f={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:s&&s.order||0,index:d,_dataset:s,_parsed:[],_sorted:!1},u.push(f)),f}getContext(){return this.$context||(this.$context=$o(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(d){const s=this.data.datasets[d];if(!s)return!1;const u=this.getDatasetMeta(d);return"boolean"==typeof u.hidden?!u.hidden:!s.hidden}setDatasetVisibility(d,s){this.getDatasetMeta(d).hidden=!s}toggleDataVisibility(d){this._hiddenIndices[d]=!this._hiddenIndices[d]}getDataVisibility(d){return!this._hiddenIndices[d]}_updateVisibility(d,s,u){const f=u?"show":"hide",_=this.getDatasetMeta(d),C=_.controller._resolveAnimations(void 0,f);oi(s)?(_.data[s].hidden=!u,this.update()):(this.setDatasetVisibility(d,u),C.update(_,{visible:u}),this.update(D=>D.datasetIndex===d?f:void 0))}hide(d,s){this._updateVisibility(d,s,!1)}show(d,s){this._updateVisibility(d,s,!0)}_destroyDatasetMeta(d){const s=this._metasets[d];s&&s.controller&&s.controller._destroy(),delete this._metasets[d]}_stop(){let d,s;for(this.stop(),Io.remove(this),d=0,s=this.data.datasets.length;d<s;++d)this._destroyDatasetMeta(d)}destroy(){const{canvas:d,ctx:s}=this;this._stop(),this.config.clearCache(),d&&(this.unbindEvents(),ws(d,s),this.platform.releaseContext(s),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete ga[this.id]}toBase64Image(...d){return this.canvas.toDataURL(...d)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const d=this._listeners,s=this.platform,u=(_,C)=>{s.addEventListener(this,_,C),d[_]=C},f=(_,C,D)=>{_.offsetX=C,_.offsetY=D,this._eventHandler(_)};_t(this.options.events,_=>u(_,f))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const d=this._responsiveListeners,s=this.platform,u=(A,F)=>{s.addEventListener(this,A,F),d[A]=F},f=(A,F)=>{d[A]&&(s.removeEventListener(this,A,F),delete d[A])},_=(A,F)=>{this.canvas&&this.resize(A,F)};let C;const D=()=>{f("attach",D),this.attached=!0,this.resize(),u("resize",_),u("detach",C)};C=()=>{this.attached=!1,f("resize",_),this._stop(),this._resize(0,0),u("attach",D)},s.isAttached(this.canvas)?D():C()}unbindEvents(){_t(this._listeners,(d,s)=>{this.platform.removeEventListener(this,s,d)}),this._listeners={},_t(this._responsiveListeners,(d,s)=>{this.platform.removeEventListener(this,s,d)}),this._responsiveListeners=void 0}updateHoverStyle(d,s,u){const f=u?"set":"remove";let _,C,D,A;for("dataset"===s&&(_=this.getDatasetMeta(d[0].datasetIndex),_.controller["_"+f+"DatasetHoverStyle"]()),D=0,A=d.length;D<A;++D){C=d[D];const F=C&&this.getDatasetMeta(C.datasetIndex).controller;F&&F[f+"HoverStyle"](C.element,C.datasetIndex,C.index)}}getActiveElements(){return this._active||[]}setActiveElements(d){const s=this._active||[],u=d.map(({datasetIndex:_,index:C})=>{const D=this.getDatasetMeta(_);if(!D)throw new Error("No dataset found at index "+_);return{datasetIndex:_,element:D.data[C],index:C}});!Jt(u,s)&&(this._active=u,this._updateHoverStyles(u,s))}notifyPlugins(d,s,u){return this._plugins.notify(this,d,s,u)}_updateHoverStyles(d,s,u){const f=this.options.hover,_=(A,F)=>A.filter(K=>!F.some(ut=>K.datasetIndex===ut.datasetIndex&&K.index===ut.index)),C=_(s,d),D=u?d:_(d,s);C.length&&this.updateHoverStyle(C,f.mode,!1),D.length&&f.mode&&this.updateHoverStyle(D,f.mode,!0)}_eventHandler(d,s){const u={event:d,replay:s,cancelable:!0},f=C=>(C.options.events||this.options.events).includes(d.native.type);if(!1===this.notifyPlugins("beforeEvent",u,f))return;const _=this._handleEvent(d,s);return u.cancelable=!1,this.notifyPlugins("afterEvent",u,f),(_||u.changed)&&this.render(),this}_handleEvent(d,s){const{_active:u=[],options:f}=this,_=f.hover;let D=[],A=!1,F=null;return"mouseout"!==d.type&&(D=this.getElementsAtEventForMode(d,_.mode,_,s),F="click"===d.type?this._lastEvent:d),this._lastEvent=null,Oo(d,this.chartArea,this._minPadding)&&(gt(f.onHover,[d,D,this],this),("mouseup"===d.type||"click"===d.type||"contextmenu"===d.type)&&gt(f.onClick,[d,D,this],this)),A=!Jt(D,u),(A||s)&&(this._active=D,this._updateHoverStyles(D,u,s)),this._lastEvent=F,A}}const vt=()=>_t(ht.instances,m=>m._plugins.invalidate()),Ut=!0;function le(m,d,s){const{startAngle:u,pixelMargin:f,x:_,y:C,outerRadius:D,innerRadius:A}=d;let F=f/D;m.beginPath(),m.arc(_,C,D,u-F,s+F),A>f?(F=f/A,m.arc(_,C,A,s+F,u-F,!0)):m.arc(_,C,f,s+ie,u-ie),m.closePath(),m.clip()}function Te(m,d,s,u){return{x:s+m*Math.cos(d),y:u+m*Math.sin(d)}}function He(m,d,s,u,f){const{x:_,y:C,startAngle:D,pixelMargin:A,innerRadius:F}=d,K=Math.max(d.outerRadius+u+s-A,0),ut=F>0?F+u+s+A:0;let It=0;const Vt=f-D;if(u){const fo=((F>0?F-u:0)+(K>0?K-u:0))/2;It=(Vt-(0!==fo?Vt*fo/(fo+u):Vt))/2}const he=(Vt-Math.max(.001,Vt*K-s/Ni)/K)/2,ve=D+he+It,De=f-he-It,{outerStart:si,outerEnd:Wi,innerStart:Ri,innerEnd:Si}=function(m,d,s,u){const f=function(m){return Ks(m,["outerStart","outerEnd","innerStart","innerEnd"])}(m.options.borderRadius),_=(s-d)/2,C=Math.min(_,u*d/2),D=A=>{const F=(s-Math.min(_,A))*u/2;return Ke(A,0,Math.min(_,F))};return{outerStart:D(f.outerStart),outerEnd:D(f.outerEnd),innerStart:Ke(f.innerStart,0,C),innerEnd:Ke(f.innerEnd,0,C)}}(d,ut,K,De-ve),Ki=K-si,Qi=K-Wi,nn=ve+si/Ki,ln=De-Wi/Qi,Kn=ut+Ri,rn=ut+Si,$n=ve+Ri/Kn,Ho=De-Si/rn;if(m.beginPath(),m.arc(_,C,K,nn,ln),Wi>0){const Nn=Te(Qi,ln,_,C);m.arc(Nn.x,Nn.y,Wi,ln,De+ie)}const Hi=Te(rn,De,_,C);if(m.lineTo(Hi.x,Hi.y),Si>0){const Nn=Te(rn,Ho,_,C);m.arc(Nn.x,Nn.y,Si,De+ie,Ho+Math.PI)}if(m.arc(_,C,ut,De-Si/ut,ve+Ri/ut,!0),Ri>0){const Nn=Te(Kn,$n,_,C);m.arc(Nn.x,Nn.y,Ri,$n+Math.PI,ve-ie)}const qi=Te(Ki,ve,_,C);if(m.lineTo(qi.x,qi.y),si>0){const Nn=Te(Ki,nn,_,C);m.arc(Nn.x,Nn.y,si,ve-ie,nn)}m.closePath()}Object.defineProperties(ht,{defaults:{enumerable:Ut,value:On},instances:{enumerable:Ut,value:ga},overrides:{enumerable:Ut,value:No},registry:{enumerable:Ut,value:Kr},version:{enumerable:Ut,value:"3.6.0"},getChart:{enumerable:Ut,value:Ia},register:{enumerable:Ut,value:(...m)=>{Kr.add(...m),vt()}},unregister:{enumerable:Ut,value:(...m)=>{Kr.remove(...m),vt()}}});class dn extends wn{constructor(d){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,d&&Object.assign(this,d)}inRange(d,s,u){const f=this.getProps(["x","y"],u),{angle:_,distance:C}=function(m,d){const s=d.x-m.x,u=d.y-m.y,f=Math.sqrt(s*s+u*u);let _=Math.atan2(u,s);return _<-.5*Ni&&(_+=ui),{angle:_,distance:f}}(f,{x:d,y:s}),{startAngle:D,endAngle:A,innerRadius:F,outerRadius:K,circumference:ut}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],u),It=this.options.spacing/2;return(ut>=ui||Ue(_,D,A))&&C>=F+It&&C<=K+It}getCenterPoint(d){const{x:s,y:u,startAngle:f,endAngle:_,innerRadius:C,outerRadius:D}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],d),{offset:A,spacing:F}=this.options,K=(f+_)/2,ut=(C+D+F+A)/2;return{x:s+Math.cos(K)*ut,y:u+Math.sin(K)*ut}}tooltipPosition(d){return this.getCenterPoint(d)}draw(d){const{options:s,circumference:u}=this,f=(s.offset||0)/2,_=(s.spacing||0)/2;if(this.pixelMargin="inner"===s.borderAlign?.33:0,this.fullCircles=u>ui?Math.floor(u/ui):0,0===u||this.innerRadius<0||this.outerRadius<0)return;d.save();let C=0;if(f){C=f/2;const A=(this.startAngle+this.endAngle)/2;d.translate(Math.cos(A)*C,Math.sin(A)*C),this.circumference>=Ni&&(C=f)}d.fillStyle=s.backgroundColor,d.strokeStyle=s.borderColor,function(m,d,s,u,f){const{options:_}=d,C="inner"===_.borderAlign;!_.borderWidth||(C?(m.lineWidth=2*_.borderWidth,m.lineJoin="round"):(m.lineWidth=_.borderWidth,m.lineJoin="bevel"),d.fullCircles&&function(m,d,s){const{x:u,y:f,startAngle:_,pixelMargin:C,fullCircles:D}=d,A=Math.max(d.outerRadius-C,0),F=d.innerRadius+C;let K;for(s&&le(m,d,_+ui),m.beginPath(),m.arc(u,f,F,_+ui,_,!0),K=0;K<D;++K)m.stroke();for(m.beginPath(),m.arc(u,f,A,_,_+ui),K=0;K<D;++K)m.stroke()}(m,d,C),C&&le(m,d,f),He(m,d,s,u,f),m.stroke())}(d,this,C,_,function(m,d,s,u){const{fullCircles:f,startAngle:_,circumference:C}=d;let D=d.endAngle;if(f){He(m,d,s,u,_+ui);for(let A=0;A<f;++A)m.fill();isNaN(C)||(D=_+C%ui,C%ui==0&&(D+=ui))}return He(m,d,s,u,D),m.fill(),D}(d,this,C,_)),d.restore()}}function an(m,d,s=d){m.lineCap=Tt(s.borderCapStyle,d.borderCapStyle),m.setLineDash(Tt(s.borderDash,d.borderDash)),m.lineDashOffset=Tt(s.borderDashOffset,d.borderDashOffset),m.lineJoin=Tt(s.borderJoinStyle,d.borderJoinStyle),m.lineWidth=Tt(s.borderWidth,d.borderWidth),m.strokeStyle=Tt(s.borderColor,d.borderColor)}function Bn(m,d,s){m.lineTo(s.x,s.y)}function Mn(m,d,s={}){const u=m.length,{start:f=0,end:_=u-1}=s,{start:C,end:D}=d,A=Math.max(f,C),F=Math.min(_,D);return{count:u,start:A,loop:d.loop,ilen:F<A&&!(f<C&&_<C||f>D&&_>D)?u+F-A:F-A}}function Jn(m,d,s,u){const{points:f,options:_}=d,{count:C,start:D,loop:A,ilen:F}=Mn(f,s,u),K=function(m){return m.stepped?Or:m.tension||"monotone"===m.cubicInterpolationMode?ir:Bn}(_);let Vt,ee,he,{move:ut=!0,reverse:It}=u||{};for(Vt=0;Vt<=F;++Vt)ee=f[(D+(It?F-Vt:Vt))%C],!ee.skip&&(ut?(m.moveTo(ee.x,ee.y),ut=!1):K(m,he,ee,It,_.stepped),he=ee);return A&&(ee=f[(D+(It?F:0))%C],K(m,he,ee,It,_.stepped)),!!A}function Qo(m,d,s,u){const f=d.points,{count:_,start:C,ilen:D}=Mn(f,s,u),{move:A=!0,reverse:F}=u||{};let It,Vt,ee,he,ve,De,K=0,ut=0;const si=Ri=>(C+(F?D-Ri:Ri))%_,Wi=()=>{he!==ve&&(m.lineTo(K,ve),m.lineTo(K,he),m.lineTo(K,De))};for(A&&(Vt=f[si(0)],m.moveTo(Vt.x,Vt.y)),It=0;It<=D;++It){if(Vt=f[si(It)],Vt.skip)continue;const Ri=Vt.x,Si=Vt.y,Ki=0|Ri;Ki===ee?(Si<he?he=Si:Si>ve&&(ve=Si),K=(ut*K+Ri)/++ut):(Wi(),m.lineTo(Ri,Si),ee=Ki,ut=0,he=ve=Si),De=Si}Wi()}function us(m){const d=m.options;return m._decimated||m._loop||d.tension||"monotone"===d.cubicInterpolationMode||d.stepped||d.borderDash&&d.borderDash.length?Jn:Qo}dn.id="arc",dn.defaults={borderAlign:"center",borderColor:"#fff",borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0},dn.defaultRoutes={backgroundColor:"backgroundColor"};const pr="function"==typeof Path2D;let rc=(()=>{class m extends wn{constructor(s){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,s&&Object.assign(this,s)}updateControlPoints(s,u){const f=this.options;!f.tension&&"monotone"!==f.cubicInterpolationMode||f.stepped||this._pointsUpdated||(os(this._points,f,s,f.spanGaps?this._loop:this._fullLoop,u),this._pointsUpdated=!0)}set points(s){this._points=s,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(m,d){const s=m.points,u=m.options.spanGaps,f=s.length;if(!f)return[];const _=!!m._loop,{start:C,end:D}=function(m,d,s,u){let f=0,_=d-1;if(s&&!u)for(;f<d&&!m[f].skip;)f++;for(;f<d&&m[f].skip;)f++;for(f%=d,s&&(_+=f);_>f&&m[_%d].skip;)_--;return _%=d,{start:f,end:_}}(s,f,_,u);return function(m,d,s,u){return u&&u.setContext&&s?function(m,d,s,u){const f=m._chart.getContext(),_=qn(m.options),{_datasetIndex:C,options:{spanGaps:D}}=m,A=s.length,F=[];let K=_,ut=d[0].start,It=ut;function Vt(ee,he,ve,De){const si=D?-1:1;if(ee!==he){for(ee+=A;s[ee%A].skip;)ee-=si;for(;s[he%A].skip;)he+=si;ee%A!=he%A&&(F.push({start:ee%A,end:he%A,loop:ve,style:De}),K=De,ut=he%A)}}for(const ee of d){ut=D?ut:ee.start;let ve,he=s[ut%A];for(It=ut+1;It<=ee.end;It++){const De=s[It%A];ve=qn(u.setContext($o(f,{type:"segment",p0:he,p1:De,p0DataIndex:(It-1)%A,p1DataIndex:It%A,datasetIndex:C}))),sr(ve,K)&&Vt(ut,It-1,ee.loop,K),he=De,K=ve}ut<It-1&&Vt(ut,It-1,ee.loop,K)}return F}(m,d,s,u):d}(m,!0===u?[{start:C,end:D,loop:_}]:function(m,d,s,u){const f=m.length,_=[];let A,C=d,D=m[d];for(A=d+1;A<=s;++A){const F=m[A%f];F.skip||F.stop?D.skip||(_.push({start:d%f,end:(A-1)%f,loop:u=!1}),d=C=F.stop?A:null):(C=A,D.skip&&(d=A)),D=F}return null!==C&&_.push({start:d%f,end:C%f,loop:u}),_}(s,C,D<C?D+f:D,!!m._fullLoop&&0===C&&D===f-1),s,d)}(this,this.options.segment))}first(){const s=this.segments;return s.length&&this.points[s[0].start]}last(){const s=this.segments,f=s.length;return f&&this.points[s[f-1].end]}interpolate(s,u){const f=this.options,_=s[u],C=this.points,D=_n(this,{property:u,start:_,end:_});if(!D.length)return;const A=[],F=function(m){return m.stepped?Bt:m.tension||"monotone"===m.cubicInterpolationMode?V:Ps}(f);let K,ut;for(K=0,ut=D.length;K<ut;++K){const{start:It,end:Vt}=D[K],ee=C[It],he=C[Vt];if(ee===he){A.push(ee);continue}const De=F(ee,he,Math.abs((_-ee[u])/(he[u]-ee[u])),f.stepped);De[u]=s[u],A.push(De)}return 1===A.length?A[0]:A}pathSegment(s,u,f){return us(this)(s,this,u,f)}path(s,u,f){const _=this.segments,C=us(this);let D=this._loop;u=u||0,f=f||this.points.length-u;for(const A of _)D&=C(s,this,A,{start:u,end:u+f-1});return!!D}draw(s,u,f,_){(this.points||[]).length&&(this.options||{}).borderWidth&&(s.save(),function(m,d,s,u){pr&&!d.options.segment?function(m,d,s,u){let f=d._path;f||(f=d._path=new Path2D,d.path(f,s,u)&&f.closePath()),an(m,d.options),m.stroke(f)}(m,d,s,u):function(m,d,s,u){const{segments:f,options:_}=d,C=us(d);for(const D of f)an(m,_,D.style),m.beginPath(),C(m,d,D,{start:s,end:s+u-1})&&m.closePath(),m.stroke()}(m,d,s,u)}(s,this,f,_),s.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return m.id="line",m.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},m.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},m.descriptors={_scriptable:!0,_indexable:d=>"borderDash"!==d&&"fill"!==d},m})();function Uh(m,d,s,u){const f=m.options,{[s]:_}=m.getProps([s],u);return Math.abs(d-_)<f.radius+f.hitRadius}let yd=(()=>{class m extends wn{constructor(s){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,s&&Object.assign(this,s)}inRange(s,u,f){const _=this.options,{x:C,y:D}=this.getProps(["x","y"],f);return Math.pow(s-C,2)+Math.pow(u-D,2)<Math.pow(_.hitRadius+_.radius,2)}inXRange(s,u){return Uh(this,s,"x",u)}inYRange(s,u){return Uh(this,s,"y",u)}getCenterPoint(s){const{x:u,y:f}=this.getProps(["x","y"],s);return{x:u,y:f}}size(s){let u=(s=s||this.options||{}).radius||0;return u=Math.max(u,u&&s.hoverRadius||0),2*(u+(u&&s.borderWidth||0))}draw(s,u){const f=this.options;this.skip||f.radius<.1||!Oo(this,u,this.size(f)/2)||(s.strokeStyle=f.borderColor,s.lineWidth=f.borderWidth,s.fillStyle=f.backgroundColor,ns(s,f,this.x,this.y))}getRange(){const s=this.options||{};return s.radius+s.hitRadius}}return m.id="point",m.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},m.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},m})();function Nu(m,d){const{x:s,y:u,base:f,width:_,height:C}=m.getProps(["x","y","base","width","height"],d);let D,A,F,K,ut;return m.horizontal?(ut=C/2,D=Math.min(s,f),A=Math.max(s,f),F=u-ut,K=u+ut):(ut=_/2,D=s-ut,A=s+ut,F=Math.min(u,f),K=Math.max(u,f)),{left:D,top:F,right:A,bottom:K}}function bl(m,d,s,u){return m?0:Ke(d,s,u)}function yl(m,d,s,u){const f=null===d,_=null===s,D=m&&!(f&&_)&&Nu(m,u);return D&&(f||d>=D.left&&d<=D.right)&&(_||s>=D.top&&s<=D.bottom)}function Pu(m,d){m.rect(d.x,d.y,d.w,d.h)}function Fu(m,d,s={}){const u=m.x!==s.x?-d:0,f=m.y!==s.y?-d:0;return{x:m.x+u,y:m.y+f,w:m.w+((m.x+m.w!==s.x+s.w?d:0)-u),h:m.h+((m.y+m.h!==s.y+s.h?d:0)-f),radius:m.radius}}class Rc extends wn{constructor(d){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,d&&Object.assign(this,d)}draw(d){const{inflateAmount:s,options:{borderColor:u,backgroundColor:f}}=this,{inner:_,outer:C}=function(m){const d=Nu(m),s=d.right-d.left,u=d.bottom-d.top,f=function(m,d,s){const f=m.borderSkipped,_=sa(m.options.borderWidth);return{t:bl(f.top,_.top,0,s),r:bl(f.right,_.right,0,d),b:bl(f.bottom,_.bottom,0,s),l:bl(f.left,_.left,0,d)}}(m,s/2,u/2),_=function(m,d,s){const{enableBorderRadius:u}=m.getProps(["enableBorderRadius"]),f=m.options.borderRadius,_=Cs(f),C=Math.min(d,s),D=m.borderSkipped,A=u||st(f);return{topLeft:bl(!A||D.top||D.left,_.topLeft,0,C),topRight:bl(!A||D.top||D.right,_.topRight,0,C),bottomLeft:bl(!A||D.bottom||D.left,_.bottomLeft,0,C),bottomRight:bl(!A||D.bottom||D.right,_.bottomRight,0,C)}}(m,s/2,u/2);return{outer:{x:d.left,y:d.top,w:s,h:u,radius:_},inner:{x:d.left+f.l,y:d.top+f.t,w:s-f.l-f.r,h:u-f.t-f.b,radius:{topLeft:Math.max(0,_.topLeft-Math.max(f.t,f.l)),topRight:Math.max(0,_.topRight-Math.max(f.t,f.r)),bottomLeft:Math.max(0,_.bottomLeft-Math.max(f.b,f.l)),bottomRight:Math.max(0,_.bottomRight-Math.max(f.b,f.r))}}}}(this),D=(m=C.radius).topLeft||m.topRight||m.bottomLeft||m.bottomRight?xr:Pu;var m;d.save(),(C.w!==_.w||C.h!==_.h)&&(d.beginPath(),D(d,Fu(C,s,_)),d.clip(),D(d,Fu(_,-s,C)),d.fillStyle=u,d.fill("evenodd")),d.beginPath(),D(d,Fu(_,s)),d.fillStyle=f,d.fill(),d.restore()}inRange(d,s,u){return yl(this,d,s,u)}inXRange(d,s){return yl(this,d,null,s)}inYRange(d,s){return yl(this,null,d,s)}getCenterPoint(d){const{x:s,y:u,base:f,horizontal:_}=this.getProps(["x","y","base","horizontal"],d);return{x:_?(s+f)/2:s,y:_?u:(u+f)/2}}getRange(d){return"x"===d?this.width/2:this.height/2}}Rc.id="bar",Rc.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},Rc.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var Gh=Object.freeze({__proto__:null,ArcElement:dn,LineElement:rc,PointElement:yd,BarElement:Rc});function Qc(m){if(m._decimated){const d=m._data;delete m._decimated,delete m._data,Object.defineProperty(m,"data",{value:d})}}function Bu(m){m.data.datasets.forEach(d=>{Qc(d)})}var dp={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(m,d,s)=>{if(!s.enabled)return void Bu(m);const u=m.width;m.data.datasets.forEach((f,_)=>{const{_data:C,indexAxis:D}=f,A=m.getDatasetMeta(_),F=C||f.data;if("y"===Ls([D,m.options.indexAxis])||"line"!==A.type)return;const K=m.scales[A.xAxisID];if("linear"!==K.type&&"time"!==K.type||m.options.parsing)return;let ee,{start:ut,count:It}=function(m,d){const s=d.length;let f,u=0;const{iScale:_}=m,{min:C,max:D,minDefined:A,maxDefined:F}=_.getUserBounds();return A&&(u=Ke(Ds(d,_.axis,C).lo,0,s-1)),f=F?Ke(Ds(d,_.axis,D).hi+1,u,s)-u:s-u,{start:u,count:f}}(A,F);if(It<=(s.threshold||4*u))Qc(f);else{switch(Dt(C)&&(f._data=F,delete f.data,Object.defineProperty(f,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(he){this._data=he}})),s.algorithm){case"lttb":ee=function(m,d,s,u,f){const _=f.samples||u;if(_>=s)return m.slice(d,d+s);const C=[],D=(s-2)/(_-2);let A=0;const F=d+s-1;let ut,It,Vt,ee,he,K=d;for(C[A++]=m[K],ut=0;ut<_-2;ut++){let si,ve=0,De=0;const Wi=Math.floor((ut+1)*D)+1+d,Ri=Math.min(Math.floor((ut+2)*D)+1,s)+d,Si=Ri-Wi;for(si=Wi;si<Ri;si++)ve+=m[si].x,De+=m[si].y;ve/=Si,De/=Si;const Ki=Math.floor(ut*D)+1+d,Qi=Math.min(Math.floor((ut+1)*D)+1,s)+d,{x:nn,y:ln}=m[K];for(Vt=ee=-1,si=Ki;si<Qi;si++)ee=.5*Math.abs((nn-ve)*(m[si].y-ln)-(nn-m[si].x)*(De-ln)),ee>Vt&&(Vt=ee,It=m[si],he=si);C[A++]=It,K=he}return C[A++]=m[F],C}(F,ut,It,u,s);break;case"min-max":ee=function(m,d,s,u){let C,D,A,F,K,ut,It,Vt,ee,he,f=0,_=0;const ve=[],si=m[d].x,Ri=m[d+s-1].x-si;for(C=d;C<d+s;++C){D=m[C],A=(D.x-si)/Ri*u,F=D.y;const Si=0|A;if(Si===K)F<ee?(ee=F,ut=C):F>he&&(he=F,It=C),f=(_*f+D.x)/++_;else{const Ki=C-1;if(!Dt(ut)&&!Dt(It)){const Qi=Math.min(ut,It),nn=Math.max(ut,It);Qi!==Vt&&Qi!==Ki&&ve.push(pv(dv({},m[Qi]),{x:f})),nn!==Vt&&nn!==Ki&&ve.push(pv(dv({},m[nn]),{x:f}))}C>0&&Ki!==Vt&&ve.push(m[Ki]),ve.push(D),K=Si,_=0,ee=he=F,ut=It=Vt=C}}return ve}(F,ut,It,u);break;default:throw new Error(`Unsupported decimation algorithm '${s.algorithm}'`)}f._decimated=ee}})},destroy(m){Bu(m)}};function Cd(m,d,s){const u=function(m){const d=m.options,s=d.fill;let u=Tt(s&&s.target,s);return void 0===u&&(u=!!d.backgroundColor),!1!==u&&null!==u&&(!0===u?"origin":u)}(m);if(st(u))return!isNaN(u.value)&&u;let f=parseFloat(u);return ot(f)&&Math.floor(f)===f?(("-"===u[0]||"+"===u[0])&&(f=d+f),!(f===d||f<0||f>=s)&&f):["origin","start","end","stack","shape"].indexOf(u)>=0&&u}class Sd{constructor(d){this.x=d.x,this.y=d.y,this.radius=d.radius}pathSegment(d,s,u){const{x:f,y:_,radius:C}=this;return d.arc(f,_,C,(s=s||{start:0,end:ui}).end,s.start,!0),!u.bounds}interpolate(d){const{x:s,y:u,radius:f}=this,_=d.angle;return{x:s+Math.cos(_)*f,y:u+Math.sin(_)*f,angle:_}}}function Dc(m,d,s){for(;d>m;d--){const u=s[d];if(!isNaN(u.x)&&!isNaN(u.y))break}return d}function Rd(m,d,s){const u=[];for(let f=0;f<s.length;f++){const _=s[f],{first:C,last:D,point:A}=pp(_,d,"x");if(!(!A||C&&D))if(C)u.unshift(A);else if(m.push(A),!D)break}m.push(...u)}function pp(m,d,s){const u=m.interpolate(d,s);if(!u)return{};const f=u[s],_=m.segments,C=m.points;let D=!1,A=!1;for(let F=0;F<_.length;F++){const K=_[F],ut=C[K.start][s],It=C[K.end][s];if(f>=ut&&f<=It){D=f===ut,A=f===It;break}}return{first:D,last:A,point:u}}function Oa(m){const{chart:d,fill:s,line:u}=m;if(ot(s))return function(m,d){const s=m.getDatasetMeta(d);return s&&m.isDatasetVisible(d)?s.dataset:null}(d,s);if("stack"===s)return function(m){const{scale:d,index:s,line:u}=m,f=[],_=u.segments,C=u.points,D=function(m,d){const s=[],u=m.getMatchingVisibleMetas("line");for(let f=0;f<u.length;f++){const _=u[f];if(_.index===d)break;_.hidden||s.unshift(_.dataset)}return s}(d,s);D.push(fh({x:null,y:d.bottom},u));for(let A=0;A<_.length;A++){const F=_[A];for(let K=F.start;K<=F.end;K++)Rd(f,C[K],D)}return new rc({points:f,options:{}})}(m);if("shape"===s)return!0;const f=function(m){return(m.scale||{}).getPointPositionForValue?function(m){const{scale:d,fill:s}=m,u=d.options,f=d.getLabels().length,_=[],C=u.reverse?d.max:d.min;let A,F,K;if(K="start"===s?C:"end"===s?u.reverse?d.min:d.max:st(s)?s.value:d.getBaseValue(),u.grid.circular)return F=d.getPointPositionForValue(0,C),new Sd({x:F.x,y:F.y,radius:d.getDistanceFromCenterForValue(K)});for(A=0;A<f;++A)_.push(d.getPointPositionForValue(A,K));return _}(m):function(m){const{scale:d={},fill:s}=m;let f,u=null;return"start"===s?u=d.bottom:"end"===s?u=d.top:st(s)?u=d.getPixelForValue(s.value):d.getBasePixel&&(u=d.getBasePixel()),ot(u)?(f=d.isHorizontal(),{x:f?u:null,y:f?null:u}):null}(m)}(m);return f instanceof Sd?f:fh(f,u)}function fh(m,d){let s=[],u=!1;return pt(m)?(u=!0,s=m):s=function(m,d){const{x:s=null,y:u=null}=m||{},f=d.points,_=[];return d.segments.forEach(({start:C,end:D})=>{D=Dc(C,D,f);const A=f[C],F=f[D];null!==u?(_.push({x:A.x,y:u}),_.push({x:F.x,y:u})):null!==s&&(_.push({x:s,y:A.y}),_.push({x:s,y:F.y}))}),_}(m,d),s.length?new rc({points:s,options:{tension:0},_loop:u,_fullLoop:u}):null}function gh(m,d,s){let f=m[d].fill;const _=[d];let C;if(!s)return f;for(;!1!==f&&-1===_.indexOf(f);){if(!ot(f))return f;if(C=m[f],!C)return!1;if(C.visible)return f;_.push(f),f=C.fill}return!1}function _h(m,d,s){m.beginPath(),d.path(m),m.lineTo(d.last().x,s),m.lineTo(d.first().x,s),m.closePath(),m.clip()}function Hu(m,d,s,u){if(u)return;let f=d[m],_=s[m];return"angle"===m&&(f=pi(f),_=pi(_)),{property:m,start:f,end:_}}function mh(m,d,s,u){return m&&d?u(m[s],d[s]):m?m[s]:d?d[s]:0}function jh(m,d,s){const{top:u,bottom:f}=d.chart.chartArea,{property:_,start:C,end:D}=s||{};"x"===_&&(m.beginPath(),m.rect(C,u,D-C,f-u),m.clip())}function fp(m,d,s,u){const f=d.interpolate(s,u);f&&m.lineTo(f.x,f.y)}function Mc(m,d){const{line:s,target:u,property:f,color:_,scale:C}=d,D=function(m,d,s){const u=m.segments,f=m.points,_=d.points,C=[];for(const D of u){let{start:A,end:F}=D;F=Dc(A,F,f);const K=Hu(s,f[A],f[F],D.loop);if(!d.segments){C.push({source:D,target:K,start:f[A],end:f[F]});continue}const ut=_n(d,K);for(const It of ut){const Vt=Hu(s,_[It.start],_[It.end],It.loop),ee=Ln(D,f,Vt);for(const he of ee)C.push({source:he,target:It,start:{[s]:mh(K,Vt,"start",Math.max)},end:{[s]:mh(K,Vt,"end",Math.min)}})}}return C}(s,u,f);for(const{source:A,target:F,start:K,end:ut}of D){const{style:{backgroundColor:It=_}={}}=A,Vt=!0!==u;m.save(),m.fillStyle=It,jh(m,C,Vt&&Hu(f,K,ut)),m.beginPath();const ee=!!s.pathSegment(m,A);let he;if(Vt){ee?m.closePath():fp(m,u,ut,f);const ve=!!u.pathSegment(m,F,{move:ee,reverse:!0});he=ee&&ve,he||fp(m,u,K,f)}m.closePath(),m.fill(he?"evenodd":"nonzero"),m.restore()}}function eu(m,d,s){const u=Oa(d),{line:f,scale:_,axis:C}=d,D=f.options,A=D.fill,F=D.backgroundColor,{above:K=F,below:ut=F}=A||{};u&&f.points.length&&(go(m,s),function(m,d){const{line:s,target:u,above:f,below:_,area:C,scale:D}=d,A=s._loop?"angle":d.axis;m.save(),"x"===A&&_!==f&&(_h(m,u,C.top),Mc(m,{line:s,target:u,color:f,scale:D,property:A}),m.restore(),m.save(),_h(m,u,C.bottom)),Mc(m,{line:s,target:u,color:_,scale:D,property:A}),m.restore()}(m,{line:f,target:u,above:K,below:ut,area:s,scale:_,axis:C}),er(m))}var vh={id:"filler",afterDatasetsUpdate(m,d,s){const u=(m.data.datasets||[]).length,f=[];let _,C,D,A;for(C=0;C<u;++C)_=m.getDatasetMeta(C),D=_.dataset,A=null,D&&D.options&&D instanceof rc&&(A={visible:m.isDatasetVisible(C),index:C,fill:Cd(D,C,u),chart:m,axis:_.controller.options.indexAxis,scale:_.vScale,line:D}),_.$filler=A,f.push(A);for(C=0;C<u;++C)A=f[C],A&&!1!==A.fill&&(A.fill=gh(f,C,s.propagate))},beforeDraw(m,d,s){const u="beforeDraw"===s.drawTime,f=m.getSortedVisibleDatasetMetas(),_=m.chartArea;for(let C=f.length-1;C>=0;--C){const D=f[C].$filler;!D||(D.line.updateControlPoints(_,D.axis),u&&eu(m.ctx,D,_))}},beforeDatasetsDraw(m,d,s){if("beforeDatasetsDraw"!==s.drawTime)return;const u=m.getSortedVisibleDatasetMetas();for(let f=u.length-1;f>=0;--f){const _=u[f].$filler;_&&eu(m.ctx,_,m.chartArea)}},beforeDatasetDraw(m,d,s){const u=d.meta.$filler;!u||!1===u.fill||"beforeDatasetDraw"!==s.drawTime||eu(m.ctx,u,m.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Ac=(m,d)=>{let{boxHeight:s=d,boxWidth:u=d}=m;return m.usePointStyle&&(s=Math.min(s,d),u=Math.min(u,d)),{boxWidth:u,boxHeight:s,itemHeight:Math.max(d,s)}};class iu extends wn{constructor(d){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=d.chart,this.options=d.options,this.ctx=d.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(d,s,u){this.maxWidth=d,this.maxHeight=s,this._margins=u,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const d=this.options.labels||{};let s=gt(d.generateLabels,[this.chart],this)||[];d.filter&&(s=s.filter(u=>d.filter(u,this.chart.data))),d.sort&&(s=s.sort((u,f)=>d.sort(u,f,this.chart.data))),this.options.reverse&&s.reverse(),this.legendItems=s}fit(){const{options:d,ctx:s}=this;if(!d.display)return void(this.width=this.height=0);const u=d.labels,f=bo(u.font),_=f.size,C=this._computeTitleHeight(),{boxWidth:D,itemHeight:A}=Ac(u,_);let F,K;s.font=f.string,this.isHorizontal()?(F=this.maxWidth,K=this._fitRows(C,_,D,A)+10):(K=this.maxHeight,F=this._fitCols(C,_,D,A)+10),this.width=Math.min(F,d.maxWidth||this.maxWidth),this.height=Math.min(K,d.maxHeight||this.maxHeight)}_fitRows(d,s,u,f){const{ctx:_,maxWidth:C,options:{labels:{padding:D}}}=this,A=this.legendHitBoxes=[],F=this.lineWidths=[0],K=f+D;let ut=d;_.textAlign="left",_.textBaseline="middle";let It=-1,Vt=-K;return this.legendItems.forEach((ee,he)=>{const ve=u+s/2+_.measureText(ee.text).width;(0===he||F[F.length-1]+ve+2*D>C)&&(ut+=K,F[F.length-(he>0?0:1)]=0,Vt+=K,It++),A[he]={left:0,top:Vt,row:It,width:ve,height:f},F[F.length-1]+=ve+D}),ut}_fitCols(d,s,u,f){const{ctx:_,maxHeight:C,options:{labels:{padding:D}}}=this,A=this.legendHitBoxes=[],F=this.columnSizes=[],K=C-d;let ut=D,It=0,Vt=0,ee=0,he=0;return this.legendItems.forEach((ve,De)=>{const si=u+s/2+_.measureText(ve.text).width;De>0&&Vt+f+2*D>K&&(ut+=It+D,F.push({width:It,height:Vt}),ee+=It+D,he++,It=Vt=0),A[De]={left:ee,top:Vt,col:he,width:si,height:f},It=Math.max(It,si),Vt+=f+D}),ut+=It,F.push({width:It,height:Vt}),ut}adjustHitBoxes(){if(!this.options.display)return;const d=this._computeTitleHeight(),{legendHitBoxes:s,options:{align:u,labels:{padding:f},rtl:_}}=this,C=Se(_,this.left,this.width);if(this.isHorizontal()){let D=0,A=ct(u,this.left+f,this.right-this.lineWidths[D]);for(const F of s)D!==F.row&&(D=F.row,A=ct(u,this.left+f,this.right-this.lineWidths[D])),F.top+=this.top+d+f,F.left=C.leftForLtr(C.x(A),F.width),A+=F.width+f}else{let D=0,A=ct(u,this.top+d+f,this.bottom-this.columnSizes[D].height);for(const F of s)F.col!==D&&(D=F.col,A=ct(u,this.top+d+f,this.bottom-this.columnSizes[D].height)),F.top=A,F.left+=this.left+f,F.left=C.leftForLtr(C.x(F.left),F.width),A+=F.height+f}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const d=this.ctx;go(d,this),this._draw(),er(d)}}_draw(){const{options:d,columnSizes:s,lineWidths:u,ctx:f}=this,{align:_,labels:C}=d,D=On.color,A=Se(d.rtl,this.left,this.width),F=bo(C.font),{color:K,padding:ut}=C,It=F.size,Vt=It/2;let ee;this.drawTitle(),f.textAlign=A.textAlign("left"),f.textBaseline="middle",f.lineWidth=.5,f.font=F.string;const{boxWidth:he,boxHeight:ve,itemHeight:De}=Ac(C,It),Ri=this.isHorizontal(),Si=this._computeTitleHeight();ee=Ri?{x:ct(_,this.left+ut,this.right-u[0]),y:this.top+ut+Si,line:0}:{x:this.left+ut,y:ct(_,this.top+Si+ut,this.bottom-s[0].height),line:0},ti(this.ctx,d.textDirection);const Ki=De+ut;this.legendItems.forEach((Qi,nn)=>{f.strokeStyle=Qi.fontColor||K,f.fillStyle=Qi.fontColor||K;const ln=f.measureText(Qi.text).width,Kn=A.textAlign(Qi.textAlign||(Qi.textAlign=C.textAlign)),rn=he+Vt+ln;let $n=ee.x,Ho=ee.y;A.setWidth(this.width),Ri?nn>0&&$n+rn+ut>this.right&&(Ho=ee.y+=Ki,ee.line++,$n=ee.x=ct(_,this.left+ut,this.right-u[ee.line])):nn>0&&Ho+Ki>this.bottom&&($n=ee.x=$n+s[ee.line].width+ut,ee.line++,Ho=ee.y=ct(_,this.top+Si+ut,this.bottom-s[ee.line].height)),function(Qi,nn,ln){if(isNaN(he)||he<=0||isNaN(ve)||ve<0)return;f.save();const Kn=Tt(ln.lineWidth,1);if(f.fillStyle=Tt(ln.fillStyle,D),f.lineCap=Tt(ln.lineCap,"butt"),f.lineDashOffset=Tt(ln.lineDashOffset,0),f.lineJoin=Tt(ln.lineJoin,"miter"),f.lineWidth=Kn,f.strokeStyle=Tt(ln.strokeStyle,D),f.setLineDash(Tt(ln.lineDash,[])),C.usePointStyle){const rn={radius:he*Math.SQRT2/2,pointStyle:ln.pointStyle,rotation:ln.rotation,borderWidth:Kn},$n=A.xPlus(Qi,he/2);ns(f,rn,$n,nn+Vt)}else{const rn=nn+Math.max((It-ve)/2,0),$n=A.leftForLtr(Qi,he),Ho=Cs(ln.borderRadius);f.beginPath(),Object.values(Ho).some(Hi=>0!==Hi)?xr(f,{x:$n,y:rn,w:he,h:ve,radius:Ho}):f.rect($n,rn,he,ve),f.fill(),0!==Kn&&f.stroke()}f.restore()}(A.x($n),Ho,Qi),$n=((m,d,s,u)=>m===(u?"left":"right")?s:"center"===m?(d+s)/2:d)(Kn,$n+he+Vt,Ri?$n+rn:this.right,d.rtl),function(Qi,nn,ln){fs(f,ln.text,Qi,nn+De/2,F,{strikethrough:ln.hidden,textAlign:A.textAlign(ln.textAlign)})}(A.x($n),Ho,Qi),Ri?ee.x+=rn+ut:ee.y+=Ki}),mi(this.ctx,d.textDirection)}drawTitle(){const d=this.options,s=d.title,u=bo(s.font),f=Yo(s.padding);if(!s.display)return;const _=Se(d.rtl,this.left,this.width),C=this.ctx,D=s.position,F=f.top+u.size/2;let K,ut=this.left,It=this.width;if(this.isHorizontal())It=Math.max(...this.lineWidths),K=this.top+F,ut=ct(d.align,ut,this.right-It);else{const ee=this.columnSizes.reduce((he,ve)=>Math.max(he,ve.height),0);K=F+ct(d.align,this.top,this.bottom-ee-d.labels.padding-this._computeTitleHeight())}const Vt=ct(D,ut,ut+It);C.textAlign=_.textAlign(rt(D)),C.textBaseline="middle",C.strokeStyle=s.color,C.fillStyle=s.color,C.font=u.string,fs(C,s.text,Vt,K,u)}_computeTitleHeight(){const d=this.options.title,s=bo(d.font),u=Yo(d.padding);return d.display?s.lineHeight+u.height:0}_getLegendItemAt(d,s){let u,f,_;if(d>=this.left&&d<=this.right&&s>=this.top&&s<=this.bottom)for(_=this.legendHitBoxes,u=0;u<_.length;++u)if(f=_[u],d>=f.left&&d<=f.left+f.width&&s>=f.top&&s<=f.top+f.height)return this.legendItems[u];return null}handleEvent(d){const s=this.options;if(!function(m,d){return!!("mousemove"===m&&(d.onHover||d.onLeave)||d.onClick&&("click"===m||"mouseup"===m))}(d.type,s))return;const u=this._getLegendItemAt(d.x,d.y);if("mousemove"===d.type){const f=this._hoveredItem,_=((m,d)=>null!==m&&null!==d&&m.datasetIndex===d.datasetIndex&&m.index===d.index)(f,u);f&&!_&&gt(s.onLeave,[d,f,this],this),this._hoveredItem=u,u&&!_&&gt(s.onHover,[d,u,this],this)}else u&&gt(s.onClick,[d,u,this],this)}}var wd={id:"legend",_element:iu,start(m,d,s){const u=m.legend=new iu({ctx:m.ctx,options:s,chart:m});Cr.configure(m,u,s),Cr.addBox(m,u)},stop(m){Cr.removeBox(m,m.legend),delete m.legend},beforeUpdate(m,d,s){const u=m.legend;Cr.configure(m,u,s),u.options=s},afterUpdate(m){const d=m.legend;d.buildLabels(),d.adjustHitBoxes()},afterEvent(m,d){d.replay||m.legend.handleEvent(d.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(m,d,s){const u=d.datasetIndex,f=s.chart;f.isDatasetVisible(u)?(f.hide(u),d.hidden=!0):(f.show(u),d.hidden=!1)},onHover:null,onLeave:null,labels:{color:m=>m.chart.options.color,boxWidth:40,padding:10,generateLabels(m){const d=m.data.datasets,{labels:{usePointStyle:s,pointStyle:u,textAlign:f,color:_}}=m.legend.options;return m._getSortedDatasetMetas().map(C=>{const D=C.controller.getStyle(s?0:void 0),A=Yo(D.borderWidth);return{text:d[C.index].label,fillStyle:D.backgroundColor,fontColor:_,hidden:!C.visible,lineCap:D.borderCapStyle,lineDash:D.borderDash,lineDashOffset:D.borderDashOffset,lineJoin:D.borderJoinStyle,lineWidth:(A.width+A.height)/4,strokeStyle:D.borderColor,pointStyle:u||D.pointStyle,rotation:D.rotation,textAlign:f||D.textAlign,borderRadius:0,datasetIndex:C.index}},this)}},title:{color:m=>m.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:m=>!m.startsWith("on"),labels:{_scriptable:m=>!["generateLabels","filter","sort"].includes(m)}}};class lc extends wn{constructor(d){super(),this.chart=d.chart,this.options=d.options,this.ctx=d.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(d,s){const u=this.options;if(this.left=0,this.top=0,!u.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=d,this.height=this.bottom=s;const f=pt(u.text)?u.text.length:1;this._padding=Yo(u.padding);const _=f*bo(u.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=_:this.width=_}isHorizontal(){const d=this.options.position;return"top"===d||"bottom"===d}_drawArgs(d){const{top:s,left:u,bottom:f,right:_,options:C}=this,D=C.align;let F,K,ut,A=0;return this.isHorizontal()?(K=ct(D,u,_),ut=s+d,F=_-u):("left"===C.position?(K=u+d,ut=ct(D,f,s),A=-.5*Ni):(K=_-d,ut=ct(D,s,f),A=.5*Ni),F=f-s),{titleX:K,titleY:ut,maxWidth:F,rotation:A}}draw(){const d=this.ctx,s=this.options;if(!s.display)return;const u=bo(s.font),_=u.lineHeight/2+this._padding.top,{titleX:C,titleY:D,maxWidth:A,rotation:F}=this._drawArgs(_);fs(d,s.text,0,0,u,{color:s.color,maxWidth:A,rotation:F,textAlign:rt(s.align),textBaseline:"middle",translation:[C,D]})}}var nu={id:"title",_element:lc,start(m,d,s){!function(m,d){const s=new lc({ctx:m.ctx,options:d,chart:m});Cr.configure(m,s,d),Cr.addBox(m,s),m.titleBlock=s}(m,s)},stop(m){Cr.removeBox(m,m.titleBlock),delete m.titleBlock},beforeUpdate(m,d,s){const u=m.titleBlock;Cr.configure(m,u,s),u.options=s},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ou=new WeakMap;var Dd={id:"subtitle",start(m,d,s){const u=new lc({ctx:m.ctx,options:s,chart:m});Cr.configure(m,u,s),Cr.addBox(m,u),ou.set(m,u)},stop(m){Cr.removeBox(m,ou.get(m)),ou.delete(m)},beforeUpdate(m,d,s){const u=ou.get(m);Cr.configure(m,u,s),u.options=s},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const sl={average(m){if(!m.length)return!1;let d,s,u=0,f=0,_=0;for(d=0,s=m.length;d<s;++d){const C=m[d].element;if(C&&C.hasValue()){const D=C.tooltipPosition();u+=D.x,f+=D.y,++_}}return{x:u/_,y:f/_}},nearest(m,d){if(!m.length)return!1;let _,C,D,s=d.x,u=d.y,f=Number.POSITIVE_INFINITY;for(_=0,C=m.length;_<C;++_){const A=m[_].element;if(A&&A.hasValue()){const K=Mi(d,A.getCenterPoint());K<f&&(f=K,D=A)}}if(D){const A=D.tooltipPosition();s=A.x,u=A.y}return{x:s,y:u}}};function El(m,d){return d&&(pt(d)?Array.prototype.push.apply(m,d):m.push(d)),m}function Vl(m){return("string"==typeof m||m instanceof String)&&m.indexOf("\n")>-1?m.split("\n"):m}function Id(m,d){const{element:s,datasetIndex:u,index:f}=d,_=m.getDatasetMeta(u).controller,{label:C,value:D}=_.getLabelAndValue(f);return{chart:m,label:C,parsed:_.getParsed(f),raw:m.data.datasets[u].data[f],formattedValue:D,dataset:_.getDataset(),dataIndex:f,datasetIndex:u,element:s}}function bh(m,d){const s=m._chart.ctx,{body:u,footer:f,title:_}=m,{boxWidth:C,boxHeight:D}=d,A=bo(d.bodyFont),F=bo(d.titleFont),K=bo(d.footerFont),ut=_.length,It=f.length,Vt=u.length,ee=Yo(d.padding);let he=ee.height,ve=0,De=u.reduce((Ri,Si)=>Ri+Si.before.length+Si.lines.length+Si.after.length,0);De+=m.beforeBody.length+m.afterBody.length,ut&&(he+=ut*F.lineHeight+(ut-1)*d.titleSpacing+d.titleMarginBottom),De&&(he+=Vt*(d.displayColors?Math.max(D,A.lineHeight):A.lineHeight)+(De-Vt)*A.lineHeight+(De-1)*d.bodySpacing),It&&(he+=d.footerMarginTop+It*K.lineHeight+(It-1)*d.footerSpacing);let si=0;const Wi=function(Ri){ve=Math.max(ve,s.measureText(Ri).width+si)};return s.save(),s.font=F.string,_t(m.title,Wi),s.font=A.string,_t(m.beforeBody.concat(m.afterBody),Wi),si=d.displayColors?C+2+d.boxPadding:0,_t(u,Ri=>{_t(Ri.before,Wi),_t(Ri.lines,Wi),_t(Ri.after,Wi)}),si=0,s.font=K.string,_t(m.footer,Wi),s.restore(),ve+=ee.width,{width:ve,height:he}}function Md(m,d,s,u){const{x:f,width:_}=s,{width:C,chartArea:{left:D,right:A}}=m;let F="center";return"center"===u?F=f<=(D+A)/2?"left":"right":f<=_/2?F="left":f>=C-_/2&&(F="right"),function(m,d,s,u){const{x:f,width:_}=u,C=s.caretSize+s.caretPadding;if("left"===m&&f+_+C>d.width||"right"===m&&f-_-C<0)return!0}(F,m,d,s)&&(F="center"),F}function gp(m,d,s){const u=d.yAlign||function(m,d){const{y:s,height:u}=d;return s<u/2?"top":s>m.height-u/2?"bottom":"center"}(m,s);return{xAlign:d.xAlign||Md(m,d,s,u),yAlign:u}}function Ad(m,d,s,u){const{caretSize:f,caretPadding:_,cornerRadius:C}=m,{xAlign:D,yAlign:A}=s,F=f+_,{topLeft:K,topRight:ut,bottomLeft:It,bottomRight:Vt}=Cs(C);let ee=function(m,d){let{x:s,width:u}=m;return"right"===d?s-=u:"center"===d&&(s-=u/2),s}(d,D);const he=function(m,d,s){let{y:u,height:f}=m;return"top"===d?u+=s:u-="bottom"===d?f+s:f/2,u}(d,A,F);return"center"===A?"left"===D?ee+=F:"right"===D&&(ee-=F):"left"===D?ee-=Math.max(K,It)+_:"right"===D&&(ee+=Math.max(ut,Vt)+_),{x:Ke(ee,0,u.width-d.width),y:Ke(he,0,u.height-d.height)}}function su(m,d,s){const u=Yo(s.padding);return"center"===d?m.x+m.width/2:"right"===d?m.x+m.width-u.right:m.x+u.left}function cc(m){return El([],Vl(m))}function Kh(m,d){const s=d&&d.dataset&&d.dataset.tooltip&&d.dataset.tooltip.callbacks;return s?m.override(s):m}let Jh=(()=>{class m extends wn{constructor(s){super(),this.opacity=0,this._active=[],this._chart=s._chart,this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.options=s.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(s){this.options=s,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const s=this._cachedAnimations;if(s)return s;const u=this._chart,f=this.options.setContext(this.getContext()),_=f.enabled&&u.options.animation&&f.animations,C=new Br(this._chart,_);return _._cacheable&&(this._cachedAnimations=Object.freeze(C)),C}getContext(){return this.$context||(this.$context=function(m,d,s){return $o(m,{tooltip:d,tooltipItems:s,type:"tooltip"})}(this._chart.getContext(),this,this._tooltipItems))}getTitle(s,u){const{callbacks:f}=u,_=f.beforeTitle.apply(this,[s]),C=f.title.apply(this,[s]),D=f.afterTitle.apply(this,[s]);let A=[];return A=El(A,Vl(_)),A=El(A,Vl(C)),A=El(A,Vl(D)),A}getBeforeBody(s,u){return cc(u.callbacks.beforeBody.apply(this,[s]))}getBody(s,u){const{callbacks:f}=u,_=[];return _t(s,C=>{const D={before:[],lines:[],after:[]},A=Kh(f,C);El(D.before,Vl(A.beforeLabel.call(this,C))),El(D.lines,A.label.call(this,C)),El(D.after,Vl(A.afterLabel.call(this,C))),_.push(D)}),_}getAfterBody(s,u){return cc(u.callbacks.afterBody.apply(this,[s]))}getFooter(s,u){const{callbacks:f}=u,_=f.beforeFooter.apply(this,[s]),C=f.footer.apply(this,[s]),D=f.afterFooter.apply(this,[s]);let A=[];return A=El(A,Vl(_)),A=El(A,Vl(C)),A=El(A,Vl(D)),A}_createItems(s){const u=this._active,f=this._chart.data,_=[],C=[],D=[];let F,K,A=[];for(F=0,K=u.length;F<K;++F)A.push(Id(this._chart,u[F]));return s.filter&&(A=A.filter((ut,It,Vt)=>s.filter(ut,It,Vt,f))),s.itemSort&&(A=A.sort((ut,It)=>s.itemSort(ut,It,f))),_t(A,ut=>{const It=Kh(s.callbacks,ut);_.push(It.labelColor.call(this,ut)),C.push(It.labelPointStyle.call(this,ut)),D.push(It.labelTextColor.call(this,ut))}),this.labelColors=_,this.labelPointStyles=C,this.labelTextColors=D,this.dataPoints=A,A}update(s,u){const f=this.options.setContext(this.getContext()),_=this._active;let C,D=[];if(_.length){const A=sl[f.position].call(this,_,this._eventPosition);D=this._createItems(f),this.title=this.getTitle(D,f),this.beforeBody=this.getBeforeBody(D,f),this.body=this.getBody(D,f),this.afterBody=this.getAfterBody(D,f),this.footer=this.getFooter(D,f);const F=this._size=bh(this,f),K=Object.assign({},A,F),ut=gp(this._chart,f,K),It=Ad(f,K,ut,this._chart);this.xAlign=ut.xAlign,this.yAlign=ut.yAlign,C={opacity:1,x:It.x,y:It.y,width:F.width,height:F.height,caretX:A.x,caretY:A.y}}else 0!==this.opacity&&(C={opacity:0});this._tooltipItems=D,this.$context=void 0,C&&this._resolveAnimations().update(this,C),s&&f.external&&f.external.call(this,{chart:this._chart,tooltip:this,replay:u})}drawCaret(s,u,f,_){const C=this.getCaretPosition(s,f,_);u.lineTo(C.x1,C.y1),u.lineTo(C.x2,C.y2),u.lineTo(C.x3,C.y3)}getCaretPosition(s,u,f){const{xAlign:_,yAlign:C}=this,{caretSize:D,cornerRadius:A}=f,{topLeft:F,topRight:K,bottomLeft:ut,bottomRight:It}=Cs(A),{x:Vt,y:ee}=s,{width:he,height:ve}=u;let De,si,Wi,Ri,Si,Ki;return"center"===C?(Si=ee+ve/2,"left"===_?(De=Vt,si=De-D,Ri=Si+D,Ki=Si-D):(De=Vt+he,si=De+D,Ri=Si-D,Ki=Si+D),Wi=De):(si="left"===_?Vt+Math.max(F,ut)+D:"right"===_?Vt+he-Math.max(K,It)-D:this.caretX,"top"===C?(Ri=ee,Si=Ri-D,De=si-D,Wi=si+D):(Ri=ee+ve,Si=Ri+D,De=si+D,Wi=si-D),Ki=Ri),{x1:De,x2:si,x3:Wi,y1:Ri,y2:Si,y3:Ki}}drawTitle(s,u,f){const _=this.title,C=_.length;let D,A,F;if(C){const K=Se(f.rtl,this.x,this.width);for(s.x=su(this,f.titleAlign,f),u.textAlign=K.textAlign(f.titleAlign),u.textBaseline="middle",D=bo(f.titleFont),A=f.titleSpacing,u.fillStyle=f.titleColor,u.font=D.string,F=0;F<C;++F)u.fillText(_[F],K.x(s.x),s.y+D.lineHeight/2),s.y+=D.lineHeight+A,F+1===C&&(s.y+=f.titleMarginBottom-A)}}_drawColorBox(s,u,f,_,C){const D=this.labelColors[f],A=this.labelPointStyles[f],{boxHeight:F,boxWidth:K,boxPadding:ut}=C,It=bo(C.bodyFont),Vt=su(this,"left",C),ee=_.x(Vt),ve=u.y+(F<It.lineHeight?(It.lineHeight-F)/2:0);if(C.usePointStyle){const De={radius:Math.min(K,F)/2,pointStyle:A.pointStyle,rotation:A.rotation,borderWidth:1},si=_.leftForLtr(ee,K)+K/2,Wi=ve+F/2;s.strokeStyle=C.multiKeyBackground,s.fillStyle=C.multiKeyBackground,ns(s,De,si,Wi),s.strokeStyle=D.borderColor,s.fillStyle=D.backgroundColor,ns(s,De,si,Wi)}else{s.lineWidth=D.borderWidth||1,s.strokeStyle=D.borderColor,s.setLineDash(D.borderDash||[]),s.lineDashOffset=D.borderDashOffset||0;const De=_.leftForLtr(ee,K-ut),si=_.leftForLtr(_.xPlus(ee,1),K-ut-2),Wi=Cs(D.borderRadius);Object.values(Wi).some(Ri=>0!==Ri)?(s.beginPath(),s.fillStyle=C.multiKeyBackground,xr(s,{x:De,y:ve,w:K,h:F,radius:Wi}),s.fill(),s.stroke(),s.fillStyle=D.backgroundColor,s.beginPath(),xr(s,{x:si,y:ve+1,w:K-2,h:F-2,radius:Wi}),s.fill()):(s.fillStyle=C.multiKeyBackground,s.fillRect(De,ve,K,F),s.strokeRect(De,ve,K,F),s.fillStyle=D.backgroundColor,s.fillRect(si,ve+1,K-2,F-2))}s.fillStyle=this.labelTextColors[f]}drawBody(s,u,f){const{body:_}=this,{bodySpacing:C,bodyAlign:D,displayColors:A,boxHeight:F,boxWidth:K,boxPadding:ut}=f,It=bo(f.bodyFont);let Vt=It.lineHeight,ee=0;const he=Se(f.rtl,this.x,this.width),ve=function(ln){u.fillText(ln,he.x(s.x+ee),s.y+Vt/2),s.y+=Vt+C},De=he.textAlign(D);let si,Wi,Ri,Si,Ki,Qi,nn;for(u.textAlign=D,u.textBaseline="middle",u.font=It.string,s.x=su(this,De,f),u.fillStyle=f.bodyColor,_t(this.beforeBody,ve),ee=A&&"right"!==De?"center"===D?K/2+ut:K+2+ut:0,Si=0,Qi=_.length;Si<Qi;++Si){for(si=_[Si],Wi=this.labelTextColors[Si],u.fillStyle=Wi,_t(si.before,ve),Ri=si.lines,A&&Ri.length&&(this._drawColorBox(u,s,Si,he,f),Vt=Math.max(It.lineHeight,F)),Ki=0,nn=Ri.length;Ki<nn;++Ki)ve(Ri[Ki]),Vt=It.lineHeight;_t(si.after,ve)}ee=0,Vt=It.lineHeight,_t(this.afterBody,ve),s.y-=C}drawFooter(s,u,f){const _=this.footer,C=_.length;let D,A;if(C){const F=Se(f.rtl,this.x,this.width);for(s.x=su(this,f.footerAlign,f),s.y+=f.footerMarginTop,u.textAlign=F.textAlign(f.footerAlign),u.textBaseline="middle",D=bo(f.footerFont),u.fillStyle=f.footerColor,u.font=D.string,A=0;A<C;++A)u.fillText(_[A],F.x(s.x),s.y+D.lineHeight/2),s.y+=D.lineHeight+f.footerSpacing}}drawBackground(s,u,f,_){const{xAlign:C,yAlign:D}=this,{x:A,y:F}=s,{width:K,height:ut}=f,{topLeft:It,topRight:Vt,bottomLeft:ee,bottomRight:he}=Cs(_.cornerRadius);u.fillStyle=_.backgroundColor,u.strokeStyle=_.borderColor,u.lineWidth=_.borderWidth,u.beginPath(),u.moveTo(A+It,F),"top"===D&&this.drawCaret(s,u,f,_),u.lineTo(A+K-Vt,F),u.quadraticCurveTo(A+K,F,A+K,F+Vt),"center"===D&&"right"===C&&this.drawCaret(s,u,f,_),u.lineTo(A+K,F+ut-he),u.quadraticCurveTo(A+K,F+ut,A+K-he,F+ut),"bottom"===D&&this.drawCaret(s,u,f,_),u.lineTo(A+ee,F+ut),u.quadraticCurveTo(A,F+ut,A,F+ut-ee),"center"===D&&"left"===C&&this.drawCaret(s,u,f,_),u.lineTo(A,F+It),u.quadraticCurveTo(A,F,A+It,F),u.closePath(),u.fill(),_.borderWidth>0&&u.stroke()}_updateAnimationTarget(s){const u=this._chart,f=this.$animations,_=f&&f.x,C=f&&f.y;if(_||C){const D=sl[s.position].call(this,this._active,this._eventPosition);if(!D)return;const A=this._size=bh(this,s),F=Object.assign({},D,this._size),K=gp(u,s,F),ut=Ad(s,F,K,u);(_._to!==ut.x||C._to!==ut.y)&&(this.xAlign=K.xAlign,this.yAlign=K.yAlign,this.width=A.width,this.height=A.height,this.caretX=D.x,this.caretY=D.y,this._resolveAnimations().update(this,ut))}}draw(s){const u=this.options.setContext(this.getContext());let f=this.opacity;if(!f)return;this._updateAnimationTarget(u);const _={width:this.width,height:this.height},C={x:this.x,y:this.y};f=Math.abs(f)<.001?0:f;const D=Yo(u.padding);u.enabled&&(this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length)&&(s.save(),s.globalAlpha=f,this.drawBackground(C,s,_,u),ti(s,u.textDirection),C.y+=D.top,this.drawTitle(C,s,u),this.drawBody(C,s,u),this.drawFooter(C,s,u),mi(s,u.textDirection),s.restore())}getActiveElements(){return this._active||[]}setActiveElements(s,u){const f=this._active,_=s.map(({datasetIndex:A,index:F})=>{const K=this._chart.getDatasetMeta(A);if(!K)throw new Error("Cannot find a dataset at index "+A);return{datasetIndex:A,element:K.data[F],index:F}}),C=!Jt(f,_),D=this._positionChanged(_,u);(C||D)&&(this._active=_,this._eventPosition=u,this.update(!0))}handleEvent(s,u){const f=this.options,_=this._active||[];let C=!1,D=[];"mouseout"!==s.type&&(D=this._chart.getElementsAtEventForMode(s,f.mode,f,u),f.reverse&&D.reverse());const A=this._positionChanged(D,s);return C=u||!Jt(D,_)||A,C&&(this._active=D,(f.enabled||f.external)&&(this._eventPosition={x:s.x,y:s.y},this.update(!0,u))),C}_positionChanged(s,u){const{caretX:f,caretY:_,options:C}=this,D=sl[C.position].call(this,s,u);return!1!==D&&(f!==D.x||_!==D.y)}}return m.positioners=sl,m})();var xd=Object.freeze({__proto__:null,Decimation:dp,Filler:vh,Legend:wd,SubTitle:Dd,Title:nu,Tooltip:{id:"tooltip",_element:Jh,positioners:sl,afterInit(m,d,s){s&&(m.tooltip=new Jh({_chart:m,options:s}))},beforeUpdate(m,d,s){m.tooltip&&m.tooltip.initialize(s)},reset(m,d,s){m.tooltip&&m.tooltip.initialize(s)},afterDraw(m){const d=m.tooltip,s={tooltip:d};!1!==m.notifyPlugins("beforeTooltipDraw",s)&&(d&&d.draw(m.ctx),m.notifyPlugins("afterTooltipDraw",s))},afterEvent(m,d){m.tooltip&&m.tooltip.handleEvent(d.event,d.replay)&&(d.changed=!0)},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(m,d)=>d.bodyFont.size,boxWidth:(m,d)=>d.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:At,title(m){if(m.length>0){const d=m[0],s=d.chart.data.labels,u=s?s.length:0;if(this&&this.options&&"dataset"===this.options.mode)return d.dataset.label||"";if(d.label)return d.label;if(u>0&&d.dataIndex<u)return s[d.dataIndex]}return""},afterTitle:At,beforeBody:At,beforeLabel:At,label(m){if(this&&this.options&&"dataset"===this.options.mode)return m.label+": "+m.formattedValue||m.formattedValue;let d=m.dataset.label||"";d&&(d+=": ");const s=m.formattedValue;return Dt(s)||(d+=s),d},labelColor(m){const s=m.chart.getDatasetMeta(m.datasetIndex).controller.getStyle(m.dataIndex);return{borderColor:s.borderColor,backgroundColor:s.backgroundColor,borderWidth:s.borderWidth,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(m){const s=m.chart.getDatasetMeta(m.datasetIndex).controller.getStyle(m.dataIndex);return{pointStyle:s.pointStyle,rotation:s.rotation}},afterLabel:At,afterBody:At,beforeFooter:At,footer:At,afterFooter:At}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:m=>"filter"!==m&&"itemSort"!==m&&"external"!==m,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]}});class zu extends nl{constructor(d){super(d),this._startValue=void 0,this._valueRange=0}parse(d,s){if(Dt(d))return null;const u=this.getLabels();return((m,d)=>null===m?null:Ke(Math.round(m),0,d))(s=isFinite(s)&&u[s]===d?s:function(m,d,s){const u=m.indexOf(d);return-1===u?((m,d,s)=>"string"==typeof d?m.push(d)-1:isNaN(d)?null:s)(m,d,s):u!==m.lastIndexOf(d)?s:u}(u,d,Tt(s,d)),u.length-1)}determineDataLimits(){const{minDefined:d,maxDefined:s}=this.getUserBounds();let{min:u,max:f}=this.getMinMax(!0);"ticks"===this.options.bounds&&(d||(u=0),s||(f=this.getLabels().length-1)),this.min=u,this.max=f}buildTicks(){const d=this.min,s=this.max,u=this.options.offset,f=[];let _=this.getLabels();_=0===d&&s===_.length-1?_:_.slice(d,s+1),this._valueRange=Math.max(_.length-(u?0:1),1),this._startValue=this.min-(u?.5:0);for(let C=d;C<=s;C++)f.push({value:C});return f}getLabelForValue(d){const s=this.getLabels();return d>=0&&d<s.length?s[d]:d}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(d){return"number"!=typeof d&&(d=this.parse(d)),null===d?NaN:this.getPixelForDecimal((d-this._startValue)/this._valueRange)}getPixelForTick(d){const s=this.ticks;return d<0||d>s.length-1?null:this.getPixelForValue(s[d].value)}getValueForPixel(d){return Math.round(this._startValue+this.getDecimalForPixel(d)*this._valueRange)}getBasePixel(){return this.bottom}}function ru(m,d,{horizontal:s,minRotation:u}){const f=ye(u),_=(s?Math.sin(f):Math.cos(f))||.001;return Math.min(d/_,.75*d*(""+m).length)}zu.id="category",zu.defaults={ticks:{callback:zu.prototype.getLabelForValue}};class Zh extends nl{constructor(d){super(d),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(d,s){return Dt(d)||("number"==typeof d||d instanceof Number)&&!isFinite(+d)?null:+d}handleTickRangeOptions(){const{beginAtZero:d}=this.options,{minDefined:s,maxDefined:u}=this.getUserBounds();let{min:f,max:_}=this;const C=A=>f=s?f:A,D=A=>_=u?_:A;if(d){const A=ge(f),F=ge(_);A<0&&F<0?D(0):A>0&&F>0&&C(0)}if(f===_){let A=1;(_>=Number.MAX_SAFE_INTEGER||f<=Number.MIN_SAFE_INTEGER)&&(A=Math.abs(.05*_)),D(_+A),d||C(f-A)}this.min=f,this.max=_}getTickLimit(){const d=this.options.ticks;let f,{maxTicksLimit:s,stepSize:u}=d;return u?(f=Math.ceil(this.max/u)-Math.floor(this.min/u)+1,f>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${u} would result generating up to ${f} ticks. Limiting to 1000.`),f=1e3)):(f=this.computeTickLimit(),s=s||11),s&&(f=Math.min(s,f)),f}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const d=this.options,s=d.ticks;let u=this.getTickLimit();u=Math.max(2,u);const C=function(m,d){const s=[],{bounds:f,step:_,min:C,max:D,precision:A,count:F,maxTicks:K,maxDigits:ut,includeBounds:It}=m,Vt=_||1,ee=K-1,{min:he,max:ve}=d,De=!Dt(C),si=!Dt(D),Wi=!Dt(F),Ri=(ve-he)/(ut+1);let Ki,Qi,nn,ln,Si=Ve((ve-he)/ee/Vt)*Vt;if(Si<1e-14&&!De&&!si)return[{value:he},{value:ve}];ln=Math.ceil(ve/Si)-Math.floor(he/Si),ln>ee&&(Si=Ve(ln*Si/ee/Vt)*Vt),Dt(A)||(Ki=Math.pow(10,A),Si=Math.ceil(Si*Ki)/Ki),"ticks"===f?(Qi=Math.floor(he/Si)*Si,nn=Math.ceil(ve/Si)*Si):(Qi=he,nn=ve),De&&si&&_&&function(m,d){const s=Math.round(m);return s-d<=m&&s+d>=m}((D-C)/_,Si/1e3)?(ln=Math.round(Math.min((D-C)/Si,K)),Si=(D-C)/ln,Qi=C,nn=D):Wi?(Qi=De?C:Qi,nn=si?D:nn,ln=F-1,Si=(nn-Qi)/ln):(ln=(nn-Qi)/Si,ln=at(ln,Math.round(ln),Si/1e3)?Math.round(ln):Math.ceil(ln));const Kn=Math.max(ni(Si),ni(Qi));Ki=Math.pow(10,Dt(A)?Kn:A),Qi=Math.round(Qi*Ki)/Ki,nn=Math.round(nn*Ki)/Ki;let rn=0;for(De&&(It&&Qi!==C?(s.push({value:C}),Qi<C&&rn++,at(Math.round((Qi+rn*Si)*Ki)/Ki,C,ru(C,Ri,m))&&rn++):Qi<C&&rn++);rn<ln;++rn)s.push({value:Math.round((Qi+rn*Si)*Ki)/Ki});return si&&It&&nn!==D?s.length&&at(s[s.length-1].value,D,ru(D,Ri,m))?s[s.length-1].value=D:s.push({value:D}):(!si||nn===D)&&s.push({value:nn}),s}({maxTicks:u,bounds:d.bounds,min:d.min,max:d.max,precision:s.precision,step:s.stepSize,count:s.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:s.minRotation||0,includeBounds:!1!==s.includeBounds},this._range||this);return"ticks"===d.bounds&&Qt(C,this,"value"),d.reverse?(C.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),C}configure(){const d=this.ticks;let s=this.min,u=this.max;if(super.configure(),this.options.offset&&d.length){const f=(u-s)/Math.max(d.length-1,1)/2;s-=f,u+=f}this._startValue=s,this._endValue=u,this._valueRange=u-s}getLabelForValue(d){return Ht(d,this.chart.options.locale)}}class Eh extends Zh{determineDataLimits(){const{min:d,max:s}=this.getMinMax(!0);this.min=ot(d)?d:0,this.max=ot(s)?s:1,this.handleTickRangeOptions()}computeTickLimit(){const d=this.isHorizontal(),s=d?this.width:this.height,u=ye(this.options.ticks.minRotation),f=(d?Math.sin(u):Math.cos(u))||.001,_=this._resolveTickFontOptions(0);return Math.ceil(s/Math.min(40,_.lineHeight/f))}getPixelForValue(d){return null===d?NaN:this.getPixelForDecimal((d-this._startValue)/this._valueRange)}getValueForPixel(d){return this._startValue+this.getDecimalForPixel(d)*this._valueRange}}function Ld(m){return m/Math.pow(10,Math.floor(di(m)))==1}Eh.id="linear",Eh.defaults={ticks:{callback:el.formatters.numeric}};class uc extends nl{constructor(d){super(d),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(d,s){const u=Zh.prototype.parse.apply(this,[d,s]);if(0!==u)return ot(u)&&u>0?u:null;this._zero=!0}determineDataLimits(){const{min:d,max:s}=this.getMinMax(!0);this.min=ot(d)?Math.max(0,d):null,this.max=ot(s)?Math.max(0,s):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:d,maxDefined:s}=this.getUserBounds();let u=this.min,f=this.max;const _=A=>u=d?u:A,C=A=>f=s?f:A,D=(A,F)=>Math.pow(10,Math.floor(di(A))+F);u===f&&(u<=0?(_(1),C(10)):(_(D(u,-1)),C(D(f,1)))),u<=0&&_(D(f,-1)),f<=0&&C(D(u,1)),this._zero&&this.min!==this._suggestedMin&&u===D(this.min,0)&&_(D(u,-1)),this.min=u,this.max=f}buildTicks(){const d=this.options,u=function(m,d){const s=Math.floor(di(d.max)),u=Math.ceil(d.max/Math.pow(10,s)),f=[];let _=nt(m.min,Math.pow(10,Math.floor(di(d.min)))),C=Math.floor(di(_)),D=Math.floor(_/Math.pow(10,C)),A=C<0?Math.pow(10,Math.abs(C)):1;do{f.push({value:_,major:Ld(_)}),++D,10===D&&(D=1,++C,A=C>=0?1:A),_=Math.round(D*Math.pow(10,C)*A)/A}while(C<s||C===s&&D<u);const F=nt(m.max,_);return f.push({value:F,major:Ld(_)}),f}({min:this._userMin,max:this._userMax},this);return"ticks"===d.bounds&&Qt(u,this,"value"),d.reverse?(u.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),u}getLabelForValue(d){return void 0===d?"0":Ht(d,this.chart.options.locale)}configure(){const d=this.min;super.configure(),this._startValue=di(d),this._valueRange=di(this.max)-di(d)}getPixelForValue(d){return(void 0===d||0===d)&&(d=this.min),null===d||isNaN(d)?NaN:this.getPixelForDecimal(d===this.min?0:(di(d)-this._startValue)/this._valueRange)}getValueForPixel(d){const s=this.getDecimalForPixel(d);return Math.pow(10,this._startValue+s*this._valueRange)}}function ea(m){const d=m.ticks;if(d.display&&m.display){const s=Yo(d.backdropPadding);return Tt(d.font&&d.font.size,On.font.size)+s.height}return 0}function rl(m,d,s){return s=pt(s)?s:[s],{w:ks(m,d.string,s),h:s.length*d.lineHeight}}function Nd(m,d,s,u,f){return m===u||m===f?{start:d-s/2,end:d+s/2}:m<u||m>f?{start:d-s,end:d}:{start:d,end:d+s}}function Fd(m){return 0===m||180===m?"center":m<180?"left":"right"}function ja(m,d,s){return"right"===s?m-=d:"center"===s&&(m-=d/2),m}function lu(m,d,s){return 90===s||270===s?m-=d/2:(s>270||s<90)&&(m-=d),m}function qh(m,d,s,u){const{ctx:f}=m;if(s)f.arc(m.xCenter,m.yCenter,d,0,ui);else{let _=m.getPointPosition(0,d);f.moveTo(_.x,_.y);for(let C=1;C<u;C++)_=m.getPointPosition(C,d),f.lineTo(_.x,_.y)}}function Tl(m){return $(m)?m:0}uc.id="logarithmic",uc.defaults={ticks:{callback:el.formatters.logarithmic,major:{enabled:!0}}};class qo extends Zh{constructor(d){super(d),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){this.width=this.maxWidth,this.height=this.maxHeight,this.paddingTop=ea(this.options)/2,this.xCenter=Math.floor(this.width/2),this.yCenter=Math.floor((this.height-this.paddingTop)/2),this.drawingArea=Math.min(this.height-this.paddingTop,this.width)/2}determineDataLimits(){const{min:d,max:s}=this.getMinMax(!1);this.min=ot(d)&&!isNaN(d)?d:0,this.max=ot(s)&&!isNaN(s)?s:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/ea(this.options))}generateTickLabels(d){Zh.prototype.generateTickLabels.call(this,d),this._pointLabels=this.getLabels().map((s,u)=>{const f=gt(this.options.pointLabels.callback,[s,u],this);return f||0===f?f:""})}fit(){const d=this.options;d.display&&d.pointLabels.display?function(m){const d={l:0,r:m.width,t:0,b:m.height-m.paddingTop},s={},u=[],f=[],_=m.getLabels().length;for(let C=0;C<_;C++){const D=m.options.pointLabels.setContext(m.getPointLabelContext(C));f[C]=D.padding;const A=m.getPointPosition(C,m.drawingArea+f[C]),F=bo(D.font),K=rl(m.ctx,F,m._pointLabels[C]);u[C]=K;const ut=m.getIndexAngle(C),It=Ee(ut),Vt=Nd(It,A.x,K.w,0,180),ee=Nd(It,A.y,K.h,90,270);Vt.start<d.l&&(d.l=Vt.start,s.l=ut),Vt.end>d.r&&(d.r=Vt.end,s.r=ut),ee.start<d.t&&(d.t=ee.start,s.t=ut),ee.end>d.b&&(d.b=ee.end,s.b=ut)}m._setReductions(m.drawingArea,d,s),m._pointLabelItems=function(m,d,s){const u=[],f=m.getLabels().length,_=m.options,C=ea(_),D=m.getDistanceFromCenterForValue(_.ticks.reverse?m.min:m.max);for(let A=0;A<f;A++){const K=m.getPointPosition(A,D+(0===A?C/2:0)+s[A]),ut=Ee(m.getIndexAngle(A)),It=d[A],Vt=lu(K.y,It.h,ut),ee=Fd(ut),he=ja(K.x,It.w,ee);u.push({x:K.x,y:Vt,textAlign:ee,left:he,top:Vt,right:he+It.w,bottom:Vt+It.h})}return u}(m,u,f)}(this):this.setCenterPoint(0,0,0,0)}_setReductions(d,s,u){let f=s.l/Math.sin(u.l),_=Math.max(s.r-this.width,0)/Math.sin(u.r),C=-s.t/Math.cos(u.t),D=-Math.max(s.b-(this.height-this.paddingTop),0)/Math.cos(u.b);f=Tl(f),_=Tl(_),C=Tl(C),D=Tl(D),this.drawingArea=Math.max(d/2,Math.min(Math.floor(d-(f+_)/2),Math.floor(d-(C+D)/2))),this.setCenterPoint(f,_,C,D)}setCenterPoint(d,s,u,f){const D=u+this.drawingArea,A=this.height-this.paddingTop-f-this.drawingArea;this.xCenter=Math.floor((d+this.drawingArea+(this.width-s-this.drawingArea))/2+this.left),this.yCenter=Math.floor((D+A)/2+this.top+this.paddingTop)}getIndexAngle(d){return pi(d*(ui/this.getLabels().length)+ye(this.options.startAngle||0))}getDistanceFromCenterForValue(d){if(Dt(d))return NaN;const s=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-d)*s:(d-this.min)*s}getValueForDistanceFromCenter(d){if(Dt(d))return NaN;const s=d/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-s:this.min+s}getPointLabelContext(d){const s=this._pointLabels||[];if(d>=0&&d<s.length){const u=s[d];return function(m,d,s){return $o(m,{label:s,index:d,type:"pointLabel"})}(this.getContext(),d,u)}}getPointPosition(d,s){const u=this.getIndexAngle(d)-ie;return{x:Math.cos(u)*s+this.xCenter,y:Math.sin(u)*s+this.yCenter,angle:u}}getPointPositionForValue(d,s){return this.getPointPosition(d,this.getDistanceFromCenterForValue(s))}getBasePosition(d){return this.getPointPositionForValue(d||0,this.getBaseValue())}getPointLabelPosition(d){const{left:s,top:u,right:f,bottom:_}=this._pointLabelItems[d];return{left:s,top:u,right:f,bottom:_}}drawBackground(){const{backgroundColor:d,grid:{circular:s}}=this.options;if(d){const u=this.ctx;u.save(),u.beginPath(),qh(this,this.getDistanceFromCenterForValue(this._endValue),s,this.getLabels().length),u.closePath(),u.fillStyle=d,u.fill(),u.restore()}}drawGrid(){const d=this.ctx,s=this.options,{angleLines:u,grid:f}=s,_=this.getLabels().length;let C,D,A;if(s.pointLabels.display&&function(m,d){const{ctx:s,options:{pointLabels:u}}=m;for(let f=d-1;f>=0;f--){const _=u.setContext(m.getPointLabelContext(f)),C=bo(_.font),{x:D,y:A,textAlign:F,left:K,top:ut,right:It,bottom:Vt}=m._pointLabelItems[f],{backdropColor:ee}=_;if(!Dt(ee)){const he=Yo(_.backdropPadding);s.fillStyle=ee,s.fillRect(K-he.left,ut-he.top,It-K+he.width,Vt-ut+he.height)}fs(s,m._pointLabels[f],D,A+C.lineHeight/2,C,{color:_.color,textAlign:F,textBaseline:"middle"})}}(this,_),f.display&&this.ticks.forEach((F,K)=>{0!==K&&(D=this.getDistanceFromCenterForValue(F.value),function(m,d,s,u){const f=m.ctx,_=d.circular,{color:C,lineWidth:D}=d;!_&&!u||!C||!D||s<0||(f.save(),f.strokeStyle=C,f.lineWidth=D,f.setLineDash(d.borderDash),f.lineDashOffset=d.borderDashOffset,f.beginPath(),qh(m,s,_,u),f.closePath(),f.stroke(),f.restore())}(this,f.setContext(this.getContext(K-1)),D,_))}),u.display){for(d.save(),C=this.getLabels().length-1;C>=0;C--){const F=u.setContext(this.getPointLabelContext(C)),{color:K,lineWidth:ut}=F;!ut||!K||(d.lineWidth=ut,d.strokeStyle=K,d.setLineDash(F.borderDash),d.lineDashOffset=F.borderDashOffset,D=this.getDistanceFromCenterForValue(s.ticks.reverse?this.min:this.max),A=this.getPointPosition(C,D),d.beginPath(),d.moveTo(this.xCenter,this.yCenter),d.lineTo(A.x,A.y),d.stroke())}d.restore()}}drawBorder(){}drawLabels(){const d=this.ctx,s=this.options,u=s.ticks;if(!u.display)return;const f=this.getIndexAngle(0);let _,C;d.save(),d.translate(this.xCenter,this.yCenter),d.rotate(f),d.textAlign="center",d.textBaseline="middle",this.ticks.forEach((D,A)=>{if(0===A&&!s.reverse)return;const F=u.setContext(this.getContext(A)),K=bo(F.font);if(_=this.getDistanceFromCenterForValue(this.ticks[A].value),F.showLabelBackdrop){d.font=K.string,C=d.measureText(D.label).width,d.fillStyle=F.backdropColor;const ut=Yo(F.backdropPadding);d.fillRect(-C/2-ut.left,-_-K.size/2-ut.top,C+ut.width,K.size+ut.height)}fs(d,D.label,0,-_,K,{color:F.color})}),d.restore()}drawTitle(){}}qo.id="radialLinear",qo.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:el.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:m=>m,padding:5}},qo.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},qo.descriptors={angleLines:{_fallback:"grid"}};const xc={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},wr=Object.keys(xc);function R(m,d){return m-d}function P(m,d){if(Dt(d))return null;const s=m._adapter,{parser:u,round:f,isoWeekday:_}=m._parseOpts;let C=d;return"function"==typeof u&&(C=u(C)),ot(C)||(C="string"==typeof u?s.parse(C,u):s.parse(C)),null===C?null:(f&&(C="week"!==f||!$(_)&&!0!==_?s.startOf(C,f):s.startOf(C,"isoWeek",_)),+C)}function G(m,d,s,u){const f=wr.length;for(let _=wr.indexOf(m);_<f-1;++_){const C=xc[wr[_]],D=C.steps?C.steps:Number.MAX_SAFE_INTEGER;if(C.common&&Math.ceil((s-d)/(D*C.size))<=u)return wr[_]}return wr[f-1]}function Nt(m,d,s){if(s){if(s.length){const{lo:u,hi:f}=kr(s,d);m[s[u]>=d?s[u]:s[f]]=!0}}else m[d]=!0}function Yt(m,d,s){const u=[],f={},_=d.length;let C,D;for(C=0;C<_;++C)D=d[C],f[D]=C,u.push({value:D,major:!1});return 0!==_&&s?function(m,d,s,u){const f=m._adapter,_=+f.startOf(d[0].value,u),C=d[d.length-1].value;let D,A;for(D=_;D<=C;D=+f.add(D,1,u))A=s[D],A>=0&&(d[A].major=!0);return d}(m,u,f,s):u}let ae=(()=>{class m extends nl{constructor(s){super(s),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(s,u){const f=s.time||(s.time={}),_=this._adapter=new bi._date(s.adapters.date);Ce(f.displayFormats,_.formats()),this._parseOpts={parser:f.parser,round:f.round,isoWeekday:f.isoWeekday},super.init(s),this._normalized=u.normalized}parse(s,u){return void 0===s?null:P(this,s)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const s=this.options,u=this._adapter,f=s.time.unit||"day";let{min:_,max:C,minDefined:D,maxDefined:A}=this.getUserBounds();function F(K){!D&&!isNaN(K.min)&&(_=Math.min(_,K.min)),!A&&!isNaN(K.max)&&(C=Math.max(C,K.max))}(!D||!A)&&(F(this._getLabelBounds()),("ticks"!==s.bounds||"labels"!==s.ticks.source)&&F(this.getMinMax(!1))),_=ot(_)&&!isNaN(_)?_:+u.startOf(Date.now(),f),C=ot(C)&&!isNaN(C)?C:+u.endOf(Date.now(),f)+1,this.min=Math.min(_,C-1),this.max=Math.max(_+1,C)}_getLabelBounds(){const s=this.getLabelTimestamps();let u=Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY;return s.length&&(u=s[0],f=s[s.length-1]),{min:u,max:f}}buildTicks(){const s=this.options,u=s.time,f=s.ticks,_="labels"===f.source?this.getLabelTimestamps():this._generate();"ticks"===s.bounds&&_.length&&(this.min=this._userMin||_[0],this.max=this._userMax||_[_.length-1]);const C=this.min,A=function(m,d,s){let u=0,f=m.length;for(;u<f&&m[u]<d;)u++;for(;f>u&&m[f-1]>s;)f--;return u>0||f<m.length?m.slice(u,f):m}(_,C,this.max);return this._unit=u.unit||(f.autoSkip?G(u.minUnit,this.min,this.max,this._getLabelCapacity(C)):function(m,d,s,u,f){for(let _=wr.length-1;_>=wr.indexOf(s);_--){const C=wr[_];if(xc[C].common&&m._adapter.diff(f,u,C)>=d-1)return C}return wr[s?wr.indexOf(s):0]}(this,A.length,u.minUnit,this.min,this.max)),this._majorUnit=f.major.enabled&&"year"!==this._unit?function(m){for(let d=wr.indexOf(m)+1,s=wr.length;d<s;++d)if(xc[wr[d]].common)return wr[d]}(this._unit):void 0,this.initOffsets(_),s.reverse&&A.reverse(),Yt(this,A,this._majorUnit)}initOffsets(s){let _,C,u=0,f=0;this.options.offset&&s.length&&(_=this.getDecimalForValue(s[0]),u=1===s.length?1-_:(this.getDecimalForValue(s[1])-_)/2,C=this.getDecimalForValue(s[s.length-1]),f=1===s.length?C:(C-this.getDecimalForValue(s[s.length-2]))/2);const D=s.length<3?.5:.25;u=Ke(u,0,D),f=Ke(f,0,D),this._offsets={start:u,end:f,factor:1/(u+1+f)}}_generate(){const s=this._adapter,u=this.min,f=this.max,_=this.options,C=_.time,D=C.unit||G(C.minUnit,u,f,this._getLabelCapacity(u)),A=Tt(C.stepSize,1),F="week"===D&&C.isoWeekday,K=$(F)||!0===F,ut={};let Vt,ee,It=u;if(K&&(It=+s.startOf(It,"isoWeek",F)),It=+s.startOf(It,K?"day":D),s.diff(f,u,D)>1e5*A)throw new Error(u+" and "+f+" are too far apart with stepSize of "+A+" "+D);const he="data"===_.ticks.source&&this.getDataTimestamps();for(Vt=It,ee=0;Vt<f;Vt=+s.add(Vt,A,D),ee++)Nt(ut,Vt,he);return(Vt===f||"ticks"===_.bounds||1===ee)&&Nt(ut,Vt,he),Object.keys(ut).sort((ve,De)=>ve-De).map(ve=>+ve)}getLabelForValue(s){const f=this.options.time;return this._adapter.format(s,f.tooltipFormat?f.tooltipFormat:f.displayFormats.datetime)}_tickFormatFunction(s,u,f,_){const C=this.options,D=C.time.displayFormats,A=this._unit,F=this._majorUnit,ut=F&&D[F],It=f[u],ee=this._adapter.format(s,_||(F&&ut&&It&&It.major?ut:A&&D[A])),he=C.ticks.callback;return he?gt(he,[ee,u,f],this):ee}generateTickLabels(s){let u,f,_;for(u=0,f=s.length;u<f;++u)_=s[u],_.label=this._tickFormatFunction(_.value,u,s)}getDecimalForValue(s){return null===s?NaN:(s-this.min)/(this.max-this.min)}getPixelForValue(s){const u=this._offsets,f=this.getDecimalForValue(s);return this.getPixelForDecimal((u.start+f)*u.factor)}getValueForPixel(s){const u=this._offsets,f=this.getDecimalForPixel(s)/u.factor-u.end;return this.min+f*(this.max-this.min)}_getLabelSize(s){const u=this.options.ticks,f=this.ctx.measureText(s).width,_=ye(this.isHorizontal()?u.maxRotation:u.minRotation),C=Math.cos(_),D=Math.sin(_),A=this._resolveTickFontOptions(0).size;return{w:f*C+A*D,h:f*D+A*C}}_getLabelCapacity(s){const u=this.options.time,f=u.displayFormats,_=f[u.unit]||f.millisecond,C=this._tickFormatFunction(s,0,Yt(this,[s],this._majorUnit),_),D=this._getLabelSize(C),A=Math.floor(this.isHorizontal()?this.width/D.w:this.height/D.h)-1;return A>0?A:1}getDataTimestamps(){let u,f,s=this._cache.data||[];if(s.length)return s;const _=this.getMatchingVisibleMetas();if(this._normalized&&_.length)return this._cache.data=_[0].controller.getAllParsedValues(this);for(u=0,f=_.length;u<f;++u)s=s.concat(_[u].controller.getAllParsedValues(this));return this._cache.data=this.normalize(s)}getLabelTimestamps(){const s=this._cache.labels||[];let u,f;if(s.length)return s;const _=this.getLabels();for(u=0,f=_.length;u<f;++u)s.push(P(this,_[u]));return this._cache.labels=this._normalized?s:this.normalize(s)}normalize(s){return ho(s.sort(R))}}return m.id="time",m.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}},m})();function ue(m,d,s){let _,C,D,A,u=0,f=m.length-1;s?(d>=m[u].pos&&d<=m[f].pos&&({lo:u,hi:f}=Ds(m,"pos",d)),({pos:_,time:D}=m[u]),({pos:C,time:A}=m[f])):(d>=m[u].time&&d<=m[f].time&&({lo:u,hi:f}=Ds(m,"time",d)),({time:_,pos:D}=m[u]),({time:C,pos:A}=m[f]));const F=C-_;return F?D+(A-D)*(d-_)/F:D}class Fe extends ae{constructor(d){super(d),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const d=this._getTimestampsForTable(),s=this._table=this.buildLookupTable(d);this._minPos=ue(s,this.min),this._tableRange=ue(s,this.max)-this._minPos,super.initOffsets(d)}buildLookupTable(d){const{min:s,max:u}=this,f=[],_=[];let C,D,A,F,K;for(C=0,D=d.length;C<D;++C)F=d[C],F>=s&&F<=u&&f.push(F);if(f.length<2)return[{time:s,pos:0},{time:u,pos:1}];for(C=0,D=f.length;C<D;++C)K=f[C+1],A=f[C-1],F=f[C],Math.round((K+A)/2)!==F&&_.push({time:F,pos:C/(D-1)});return _}_getTimestampsForTable(){let d=this._cache.all||[];if(d.length)return d;const s=this.getDataTimestamps(),u=this.getLabelTimestamps();return d=s.length&&u.length?this.normalize(s.concat(u)):s.length?s:u,d=this._cache.all=d,d}getDecimalForValue(d){return(ue(this._table,d)-this._minPos)/this._tableRange}getValueForPixel(d){const s=this._offsets,u=this.getDecimalForPixel(d)/s.factor-s.end;return ue(this._table,u*this._tableRange+this._minPos,!0)}}Fe.id="timeseries",Fe.defaults=ae.defaults,ht.register($t,Gh,xd,Object.freeze({__proto__:null,CategoryScale:zu,LinearScale:Eh,LogarithmicScale:uc,RadialLinearScale:qo,TimeScale:ae,TimeSeriesScale:Fe}));const li=ht;var Ci=v(54958),Xt=v(42741);class xi{constructor(d){this.table=d}reloadData(d,s){return this.table.dataLoader.load(d,void 0,void 0,void 0,s)}langText(){return this.table.modules.localize.getText(...arguments)}langBind(){return this.table.modules.localize.bind(...arguments)}langLocale(){return this.table.modules.localize.getLocale(...arguments)}commsConnections(){return this.table.modules.comms.getConnections(...arguments)}commsSend(){return this.table.modules.comms.send(...arguments)}layoutMode(){return this.table.modules.layout.getMode()}layoutRefresh(){return this.table.modules.layout.layout()}subscribe(){return this.table.eventBus.subscribe(...arguments)}unsubscribe(){return this.table.eventBus.unsubscribe(...arguments)}subscribed(d){return this.table.eventBus.subscribed(d)}subscriptionChange(){return this.table.eventBus.subscriptionChange(...arguments)}dispatch(){return this.table.eventBus.dispatch(...arguments)}chain(){return this.table.eventBus.chain(...arguments)}confirm(){return this.table.eventBus.confirm(...arguments)}dispatchExternal(){return this.table.externalEvents.dispatch(...arguments)}subscribedExternal(d){return this.table.externalEvents.subscribed(d)}subscriptionChangeExternal(){return this.table.externalEvents.subscriptionChange(...arguments)}options(d,s){return void 0!==s&&(this.table.options[d]=s),this.table.options[d]}setOption(d,s){return void 0!==s&&(this.table.options[d]=s),this.table.options[d]}module(d){return this.table.module(d)}}class Fi extends xi{constructor(d,s){super(d),this._handler=null}initialize(){}registerTableOption(d,s){this.table.optionsList.register(d,s)}registerColumnOption(d,s){this.table.columnManager.optionsList.register(d,s)}registerTableFunction(d,s){void 0===this.table[d]?this.table[d]=s:console.warn("Unable to bind table function, name already in use",d)}registerComponentFunction(d,s,u){return this.table.componentFunctionBinder.bind(d,s,u)}registerDataHandler(d,s){this.table.rowManager.registerDataPipelineHandler(d,s),this._handler=d}registerDisplayHandler(d,s){this.table.rowManager.registerDisplayPipelineHandler(d,s),this._handler=d}refreshData(d,s){s||(s=this._handler),s&&this.table.rowManager.refreshActiveData(s,!1,d)}}class Ei{static elVisible(d){return!(d.offsetWidth<=0&&d.offsetHeight<=0)}static elOffset(d){var s=d.getBoundingClientRect();return{top:s.top+window.pageYOffset-document.documentElement.clientTop,left:s.left+window.pageXOffset-document.documentElement.clientLeft}}static deepClone(d,s,u=[]){var f={}.__proto__,_=[].__proto__;for(var C in s||(s=Object.assign(Array.isArray(d)?[]:{},d)),d){let A,F,D=d[C];null!=D&&"object"==typeof D&&(D.__proto__===f||D.__proto__===_)&&(A=u.findIndex(K=>K.subject===D),A>-1?s[C]=u[A].copy:(F=Object.assign(Array.isArray(D)?[]:{},D),u.unshift({subject:D,copy:F}),s[C]=this.deepClone(D,F,u)))}return s}}var uo={};let no=(()=>{class m extends Fi{constructor(s){super(s),this.allowedTypes=["","data","download","clipboard","print","htmlOutput"],this.registerColumnOption("accessor"),this.registerColumnOption("accessorParams"),this.registerColumnOption("accessorData"),this.registerColumnOption("accessorDataParams"),this.registerColumnOption("accessorDownload"),this.registerColumnOption("accessorDownloadParams"),this.registerColumnOption("accessorClipboard"),this.registerColumnOption("accessorClipboardParams"),this.registerColumnOption("accessorPrint"),this.registerColumnOption("accessorPrintParams"),this.registerColumnOption("accessorHtmlOutput"),this.registerColumnOption("accessorHtmlOutputParams")}initialize(){this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("row-data-retrieve",this.transformRow.bind(this))}initializeColumn(s){var u=!1,f={};this.allowedTypes.forEach(_=>{var D,C="accessor"+(_.charAt(0).toUpperCase()+_.slice(1));s.definition[C]&&(D=this.lookupAccessor(s.definition[C]))&&(u=!0,f[C]={accessor:D,params:s.definition[C+"Params"]||{}})}),u&&(s.modules.accessor=f)}lookupAccessor(s){var u=!1;switch(typeof s){case"string":m.accessors[s]?u=m.accessors[s]:console.warn("Accessor Error - No such accessor found, ignoring: ",s);break;case"function":u=s}return u}transformRow(s,u){var f="accessor"+(u.charAt(0).toUpperCase()+u.slice(1)),_=s.getComponent(),C=Ei.deepClone(s.data||{});return this.table.columnManager.traverse(function(D){var A,F,K,ut;D.modules.accessor&&(F=D.modules.accessor[f]||D.modules.accessor.accessor||!1)&&"undefined"!=(A=D.getFieldValue(C))&&(ut=D.getComponent(),K="function"==typeof F.params?F.params(A,C,u,ut,_):F.params,D.setFieldValue(C,F.accessor(A,C,u,K,ut,_)))}),C}}return m.moduleName="accessor",m.accessors=uo,m})();var Jo={method:"GET"};function Go(m,d){var s=[];if(d=d||"",Array.isArray(m))m.forEach((f,_)=>{s=s.concat(Go(f,d?d+"["+_+"]":_))});else if("object"==typeof m)for(var u in m)s=s.concat(Go(m[u],d?d+"["+u+"]":u));else s.push({key:d,value:m});return s}function yo(m){var d=Go(m),s=[];return d.forEach(function(u){s.push(encodeURIComponent(u.key)+"="+encodeURIComponent(u.value))}),s.join("&")}function Gr(m,d,s){return m&&s&&Object.keys(s).length&&(!d.method||"get"==d.method.toLowerCase())&&(d.method="get",m+=(m.includes("?")?"&":"?")+yo(s)),m}function Dr(m,d,s){var u;return new Promise((f,_)=>{if(m=this.urlGenerator.call(this.table,m,d,s),"GET"!=d.method.toUpperCase())if(u="object"==typeof this.table.options.ajaxContentType?this.table.options.ajaxContentType:this.contentTypeFormatters[this.table.options.ajaxContentType]){for(var C in u.headers)d.headers||(d.headers={}),void 0===d.headers[C]&&(d.headers[C]=u.headers[C]);d.body=u.body.call(this,m,d,s)}else console.warn("Ajax Error - Invalid ajaxContentType value:",this.table.options.ajaxContentType);m?(void 0===d.headers&&(d.headers={}),void 0===d.headers.Accept&&(d.headers.Accept="application/json"),void 0===d.headers["X-Requested-With"]&&(d.headers["X-Requested-With"]="XMLHttpRequest"),void 0===d.mode&&(d.mode="cors"),"cors"==d.mode?(void 0===d.headers.Origin&&(d.headers.Origin=window.location.origin),void 0===d.credentials&&(d.credentials="same-origin")):void 0===d.credentials&&(d.credentials="include"),fetch(m,d).then(D=>{D.ok?D.json().then(A=>{f(A)}).catch(A=>{_(A),console.warn("Ajax Load Error - Invalid JSON returned",A)}):(console.error("Ajax Load Error - Connection Error: "+D.status,D.statusText),_(D))}).catch(D=>{console.error("Ajax Load Error - Connection Error: ",D),_(D)})):(console.warn("Ajax Load Error - No URL Set"),f([]))})}function Os(m,d){var s=[];if(d=d||"",Array.isArray(m))m.forEach((f,_)=>{s=s.concat(Os(f,d?d+"["+_+"]":_))});else if("object"==typeof m)for(var u in m)s=s.concat(Os(m[u],d?d+"["+u+"]":u));else s.push({key:d,value:m});return s}var tr={json:{headers:{"Content-Type":"application/json"},body:function(m,d,s){return JSON.stringify(s)}},form:{headers:{},body:function(m,d,s){var u=Os(s),f=new FormData;return u.forEach(function(_){f.append(_.key,_.value)}),f}}};let po=(()=>{class m extends Fi{constructor(s){super(s),this.config=!1,this.url="",this.urlGenerator=!1,this.params=!1,this.loaderPromise=!1,this.registerTableOption("ajaxURL",!1),this.registerTableOption("ajaxURLGenerator",!1),this.registerTableOption("ajaxParams",{}),this.registerTableOption("ajaxConfig","get"),this.registerTableOption("ajaxContentType","form"),this.registerTableOption("ajaxRequestFunc",!1),this.registerTableOption("ajaxRequesting",function(){}),this.registerTableOption("ajaxResponse",!1),this.contentTypeFormatters=m.contentTypeFormatters}initialize(){this.loaderPromise=this.table.options.ajaxRequestFunc||m.defaultLoaderPromise,this.urlGenerator=this.table.options.ajaxURLGenerator||m.defaultURLGenerator,this.table.options.ajaxParams&&this.setParams(this.table.options.ajaxParams),this.table.options.ajaxConfig&&this.setConfig(this.table.options.ajaxConfig),this.table.options.ajaxURL&&this.setUrl(this.table.options.ajaxURL),this.registerTableFunction("getAjaxUrl",this.getUrl.bind(this)),this.subscribe("data-loading",this.requestDataCheck.bind(this)),this.subscribe("data-load",this.requestData.bind(this))}requestDataCheck(s,u,f,_){return!((s||!this.url)&&"string"!=typeof s)}requestData(s,u,f,_,C){return this.requestDataCheck(s)?(s&&this.setUrl(s),u&&this.setParams(u,!0),f&&this.setConfig(f),this.sendRequest()):C}setParams(s,u){if(u){this.params=this.params||{};for(let f in s)this.params[f]=s[f]}else this.params=s}getParams(){return this.params||{}}setConfig(s){if(this._loadDefaultConfig(),"string"==typeof s)this.config.method=s;else for(let u in s)this.config[u]=s[u]}_loadDefaultConfig(s){if(!this.config||s){this.config={};for(let u in m.defaultConfig)this.config[u]=m.defaultConfig[u]}}setUrl(s){this.url=s}getUrl(){return this.url}sendRequest(s){var u=this.url;return this._loadDefaultConfig(),!1!==this.table.options.ajaxRequesting.call(this.table,this.url,this.params)?this.loaderPromise(u,this.config,this.params).then(f=>(this.table.options.ajaxResponse&&(f=this.table.options.ajaxResponse.call(this.table,this.url,this.params,f)),f)):Promise.reject()}}return m.moduleName="ajax",m.defaultConfig=Jo,m.defaultURLGenerator=Gr,m.defaultLoaderPromise=Dr,m.contentTypeFormatters=tr,m})();var Xs={replace:function(m){return this.table.setData(m)},update:function(m){return this.table.updateOrAddData(m)},insert:function(m){return this.table.addData(m)}},Hs={table:function(m){var d=[],s=!0,u=this.table.columnManager.columns,f=[],_=[];return(m=m.split("\n")).forEach(function(C){d.push(C.split("\t"))}),!(!d.length||1===d.length&&d[0].length<2)&&(d[0].forEach(function(C){var D=u.find(function(A){return C&&A.definition.title&&C.trim()&&A.definition.title.trim()===C.trim()});D?f.push(D):s=!1}),s||(s=!0,f=[],d[0].forEach(function(C){var D=u.find(function(A){return C&&A.field&&C.trim()&&A.field.trim()===C.trim()});D?f.push(D):s=!1}),s||(f=this.table.columnManager.columnsByIndex)),s&&d.shift(),d.forEach(function(C){var D={};C.forEach(function(A,F){f[F]&&(D[f[F].field]=A)}),_.push(D)}),_)}};let Cl=(()=>{class m extends Fi{constructor(s){super(s),this.mode=!0,this.pasteParser=function(){},this.pasteAction=function(){},this.customSelection=!1,this.rowRange=!1,this.blocked=!0,this.registerTableOption("clipboard",!1),this.registerTableOption("clipboardCopyStyled",!0),this.registerTableOption("clipboardCopyConfig",!1),this.registerTableOption("clipboardCopyFormatter",!1),this.registerTableOption("clipboardCopyRowRange","active"),this.registerTableOption("clipboardPasteParser","table"),this.registerTableOption("clipboardPasteAction","insert"),this.registerColumnOption("clipboard"),this.registerColumnOption("titleClipboard")}initialize(){this.mode=this.table.options.clipboard,this.rowRange=this.table.options.clipboardCopyRowRange,(!0===this.mode||"copy"===this.mode)&&this.table.element.addEventListener("copy",s=>{var u,f;if(!this.blocked){if(s.preventDefault(),this.customSelection)u=this.customSelection,this.table.options.clipboardCopyFormatter&&(u=this.table.options.clipboardCopyFormatter("plain",u));else{var _=this.table.modules.export.generateExportList(this.table.options.clipboardCopyConfig,this.table.options.clipboardCopyStyled,this.rowRange,"clipboard");u=(f=this.table.modules.export.genereateHTMLTable(_))?this.generatePlainContent(_):"",this.table.options.clipboardCopyFormatter&&(u=this.table.options.clipboardCopyFormatter("plain",u),f=this.table.options.clipboardCopyFormatter("html",f))}window.clipboardData&&window.clipboardData.setData?window.clipboardData.setData("Text",u):s.clipboardData&&s.clipboardData.setData?(s.clipboardData.setData("text/plain",u),f&&s.clipboardData.setData("text/html",f)):s.originalEvent&&s.originalEvent.clipboardData.setData&&(s.originalEvent.clipboardData.setData("text/plain",u),f&&s.originalEvent.clipboardData.setData("text/html",f)),this.dispatchExternal("clipboardCopied",u,f),this.reset()}}),(!0===this.mode||"paste"===this.mode)&&this.table.element.addEventListener("paste",s=>{this.paste(s)}),this.setPasteParser(this.table.options.clipboardPasteParser),this.setPasteAction(this.table.options.clipboardPasteAction),this.registerTableFunction("copyToClipboard",this.copy.bind(this))}reset(){this.blocked=!0,this.customSelection=!1}generatePlainContent(s){var u=[];return s.forEach(f=>{var _=[];f.columns.forEach(C=>{var D="";if(C)if("group"===f.type&&(C.value=C.component.getKey()),null===C.value)D="";else switch(typeof C.value){case"object":D=JSON.stringify(C.value);break;case"undefined":D="";break;default:D=C.value}_.push(D)}),u.push(_.join("\t"))}),u.join("\n")}copy(s,u){var f,_;this.blocked=!1,this.customSelection=!1,(!0===this.mode||"copy"===this.mode)&&(this.rowRange=s||this.table.options.clipboardCopyRowRange,void 0!==window.getSelection&&void 0!==document.createRange?((s=document.createRange()).selectNodeContents(this.table.element),(f=window.getSelection()).toString()&&u&&(this.customSelection=f.toString()),f.removeAllRanges(),f.addRange(s)):void 0!==document.selection&&void 0!==document.body.createTextRange&&((_=document.body.createTextRange()).moveToElementText(this.table.element),_.select()),document.execCommand("copy"),f&&f.removeAllRanges())}setPasteAction(s){switch(typeof s){case"string":this.pasteAction=m.pasteActions[s],this.pasteAction||console.warn("Clipboard Error - No such paste action found:",s);break;case"function":this.pasteAction=s}}setPasteParser(s){switch(typeof s){case"string":this.pasteParser=m.pasteParsers[s],this.pasteParser||console.warn("Clipboard Error - No such paste parser found:",s);break;case"function":this.pasteParser=s}}paste(s){var u,f,_;this.checkPaseOrigin(s)&&(u=this.getPasteData(s),(f=this.pasteParser.call(this,u))?(s.preventDefault(),this.table.modExists("mutator")&&(f=this.mutateData(f)),_=this.pasteAction.call(this,f),this.dispatchExternal("clipboardPasted",u,f,_)):this.dispatchExternal("clipboardPasteError",u))}mutateData(s){var u=[];return Array.isArray(s)?s.forEach(f=>{u.push(this.table.modules.mutator.transformRow(f,"clipboard"))}):u=s,u}checkPaseOrigin(s){var u=!0;return("DIV"!=s.target.tagName||this.table.modules.edit.currentCell)&&(u=!1),u}getPasteData(s){var u;return window.clipboardData&&window.clipboardData.getData?u=window.clipboardData.getData("Text"):s.clipboardData&&s.clipboardData.getData?u=s.clipboardData.getData("text/plain"):s.originalEvent&&s.originalEvent.clipboardData.getData&&(u=s.originalEvent.clipboardData.getData("text/plain")),u}}return m.moduleName="clipboard",m.pasteActions=Xs,m.pasteParsers=Hs,m})();class ma{constructor(d){return this._row=d,new Proxy(this,{get:function(s,u,f){return void 0!==s[u]?s[u]:s._row.table.componentFunctionBinder.handle("row",s._row,u)}})}getData(d){return this._row.getData(d)}getElement(){return this._row.getElement()}getTable(){return this._row.table}getCells(){var d=[];return this._row.getCells().forEach(function(s){d.push(s.getComponent())}),d}getCell(d){var s=this._row.getCell(d);return!!s&&s.getComponent()}_getSelf(){return this._row}}class Sl{constructor(d){return this._cell=d,new Proxy(this,{get:function(s,u,f){return void 0!==s[u]?s[u]:s._cell.table.componentFunctionBinder.handle("cell",s._cell,u)}})}getValue(){return this._cell.getValue()}getOldValue(){return this._cell.getOldValue()}getInitialValue(){return this._cell.initialValue}getElement(){return this._cell.getElement()}getRow(){return this._cell.row.getComponent()}getData(){return this._cell.row.getData()}getField(){return this._cell.column.getField()}getColumn(){return this._cell.column.getComponent()}setValue(d,s){void 0===s&&(s=!0),this._cell.setValue(d,s)}restoreOldValue(){this._cell.setValueActual(this._cell.getOldValue())}restoreInitialValue(){this._cell.setValueActual(this._cell.initialValue)}checkHeight(){this._cell.checkHeight()}getTable(){return this._cell.table}_getSelf(){return this._cell}}class hc extends xi{constructor(d,s){super(d.table),this.table=d.table,this.column=d,this.row=s,this.element=null,this.value=null,this.oldValue=null,this.modules={},this.height=null,this.width=null,this.minWidth=null,this.component=null,this.loaded=!1,this.build()}build(){this.generateElement(),this.setWidth(),this._configureCell(),this.setValueActual(this.column.getFieldValue(this.row.data)),this.initialValue=this.value}generateElement(){this.element=document.createElement("div"),this.element.className="tabulator-cell",this.element.setAttribute("role","gridcell"),this.element=this.element}_configureCell(){var d=this.element,s=this.column.getField();d.style.textAlign=this.column.hozAlign,this.column.vertAlign&&(d.style.display="inline-flex",d.style.alignItems={top:"flex-start",bottom:"flex-end",middle:"center"}[this.column.vertAlign]||"",this.column.hozAlign&&(d.style.justifyContent={left:"flex-start",right:"flex-end",center:"center"}[this.column.hozAlign]||"")),s&&d.setAttribute("tabulator-field",s),this.column.definition.cssClass&&this.column.definition.cssClass.split(" ").forEach(C=>{d.classList.add(C)}),"hover"===this.table.options.tooltipGenerationMode&&d.addEventListener("mouseenter",C=>{this._generateTooltip()}),this.dispatch("cell-init",this),this.column.visible||this.hide()}_generateContents(){var d;switch(typeof(d=this.chain("cell-format",this,null,()=>this.element.innerHTML=this.value))){case"object":if(d instanceof Node){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.appendChild(d)}else this.element.innerHTML="",null!=d&&console.warn("Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",d);break;case"undefined":case"null":this.element.innerHTML="";break;default:this.element.innerHTML=d}}cellRendered(){this.dispatch("cell-rendered",this)}_generateTooltip(){var d=this.column.tooltip;d?(!0===d?d=this.value:"function"==typeof d&&!1===(d=d(this.getComponent()))&&(d=""),void 0===d&&(d=""),this.element.setAttribute("title",d)):this.element.setAttribute("title","")}getElement(d){return this.loaded||(this.loaded=!0,d||this.layoutElement()),this.element}getValue(){return this.value}getOldValue(){return this.oldValue}setValue(d,s){this.setValueProcessData(d,s)&&(this.dispatch("cell-value-updated",this),this.cellRendered(),this.dispatchExternal("cellEdited",this.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()))}setValueProcessData(d,s){var u=!1;return this.value!=d&&(u=!0,s&&(d=this.chain("cell-value-changing",[this,d],null,d))),this.setValueActual(d),u&&this.dispatch("cell-value-changed",this),u}setValueActual(d){this.oldValue=this.value,this.value=d,this.dispatch("cell-value-save-before",this),this.column.setFieldValue(this.row.data,d),this.dispatch("cell-value-save-after",this),this.loaded&&this.layoutElement()}layoutElement(){this._generateContents(),this._generateTooltip(),this.dispatch("cell-layout",this)}setWidth(){this.width=this.column.width,this.element.style.width=this.column.widthStyled}clearWidth(){this.width="",this.element.style.width=""}getWidth(){return this.width||this.element.offsetWidth}setMinWidth(){this.minWidth=this.column.minWidth,this.element.style.minWidth=this.column.minWidthStyled}setMaxWidth(){this.maxWidth=this.column.maxWidth,this.element.style.maxWidth=this.column.maxWidthStyled}checkHeight(){this.row.reinitializeHeight()}clearHeight(){this.element.style.height="",this.height=null}setHeight(){this.height=this.row.height,this.element.style.height=this.row.heightStyled}getHeight(){return this.height||this.element.offsetHeight}show(){this.element.style.display=this.column.vertAlign?"inline-flex":""}hide(){this.element.style.display="none"}delete(){this.dispatch("cell-delete",this),!this.table.rowManager.redrawBlock&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=!1,this.column.deleteCell(this),this.row.deleteCell(this),this.calcs={}}getIndex(){return this.row.getCellIndex(this)}getComponent(){return this.component||(this.component=new Sl(this)),this.component}}class cu{constructor(d){return this._column=d,this.type="ColumnComponent",new Proxy(this,{get:function(s,u,f){return void 0!==s[u]?s[u]:s._column.table.componentFunctionBinder.handle("column",s._column,u)}})}getElement(){return this._column.getElement()}getDefinition(){return this._column.getDefinition()}getField(){return this._column.getField()}getCells(){var d=[];return this._column.cells.forEach(function(s){d.push(s.getComponent())}),d}isVisible(){return this._column.visible}show(){this._column.isGroup?this._column.columns.forEach(function(d){d.show()}):this._column.show()}hide(){this._column.isGroup?this._column.columns.forEach(function(d){d.hide()}):this._column.hide()}toggle(){this._column.visible?this.hide():this.show()}delete(){return this._column.delete()}getSubColumns(){var d=[];return this._column.columns.length&&this._column.columns.forEach(function(s){d.push(s.getComponent())}),d}getParentColumn(){return this._column.parent instanceof Column&&this._column.parent.getComponent()}_getSelf(){return this._column}scrollTo(){return this._column.table.columnManager.scrollToColumn(this._column)}getTable(){return this._column.table}move(d,s){var u=this._column.table.columnManager.findColumn(d);u?this._column.table.columnManager.moveColumn(this._column,u,s):console.warn("Move Error - No matching column found:",u)}getNextColumn(){var d=this._column.nextColumn();return!!d&&d.getComponent()}getPrevColumn(){var d=this._column.prevColumn();return!!d&&d.getComponent()}updateDefinition(d){return this._column.updateDefinition(d)}getWidth(){return this._column.getWidth()}setWidth(d){var s;return s=!0===d?this._column.reinitializeWidth(!0):this._column.setWidth(d),this._column.table.columnManager.renderer.rerenderColumns(!0),s}}var Yu={title:void 0,field:void 0,columns:void 0,visible:void 0,hozAlign:void 0,vertAlign:void 0,width:void 0,minWidth:40,maxWidth:void 0,tooltip:void 0,cssClass:void 0,variableHeight:void 0,headerTooltip:void 0,headerVertical:void 0,headerHozAlign:void 0,editableTitle:void 0};let Ul=(()=>{class m extends xi{constructor(s,u){super(u.table),this.definition=s,this.parent=u,this.type="column",this.columns=[],this.cells=[],this.element=this.createElement(),this.contentElement=!1,this.titleHolderElement=!1,this.titleElement=!1,this.groupElement=this.createGroupElement(),this.isGroup=!1,this.tooltip=!1,this.hozAlign="",this.vertAlign="",this.field="",this.fieldStructure="",this.getFieldValue="",this.setFieldValue="",this.titleFormatterRendered=!1,this.mapDefinitions(),this.setField(this.definition.field),this.modules={},this.width=null,this.widthStyled="",this.maxWidth=null,this.maxWidthStyled="",this.minWidth=null,this.minWidthStyled="",this.widthFixed=!1,this.visible=!0,this.component=null,this.definition.columns?(this.isGroup=!0,this.definition.columns.forEach((f,_)=>{var C=new m(f,this);this.attachColumn(C)}),this.checkColumnVisibility()):u.registerColumnField(this),this._initialize(),this.bindModuleColumns()}createElement(){var s=document.createElement("div");return s.classList.add("tabulator-col"),s.setAttribute("role","columnheader"),s.setAttribute("aria-sort","none"),s}createGroupElement(){var s=document.createElement("div");return s.classList.add("tabulator-col-group-cols"),s}mapDefinitions(){var s=this.table.options.columnDefaults;if(s)for(let u in s)void 0===this.definition[u]&&(this.definition[u]=s[u]);this.definition=this.table.columnManager.optionsList.generate(m.defaultOptionList,this.definition)}checkDefinition(){Object.keys(this.definition).forEach(s=>{-1===m.defaultOptionList.indexOf(s)&&console.warn("Invalid column definition option in '"+(this.field||this.definition.title)+"' column:",s)})}setField(s){this.field=s,this.fieldStructure=s?this.table.options.nestedFieldSeparator?s.split(this.table.options.nestedFieldSeparator):[s]:[],this.getFieldValue=this.fieldStructure.length>1?this._getNestedData:this._getFlatData,this.setFieldValue=this.fieldStructure.length>1?this._setNestedData:this._setFlatData}registerColumnPosition(s){this.parent.registerColumnPosition(s)}registerColumnField(s){this.parent.registerColumnField(s)}reRegisterPosition(){this.isGroup?this.columns.forEach(function(s){s.reRegisterPosition()}):this.registerColumnPosition(this)}_mapDepricatedFunctionality(){}setTooltip(){var s=this.definition,u=void 0===s.headerTooltip?s.tooltip:s.headerTooltip;u?!0===u?s.field?this.langBind("columns|"+s.field,f=>{this.element.setAttribute("title",f||s.title)}):this.element.setAttribute("title",s.title):("function"==typeof u&&!1===(u=u(this.getComponent()))&&(u=""),this.element.setAttribute("title",u)):this.element.setAttribute("title","")}_initialize(){for(var s=this.definition;this.element.firstChild;)this.element.removeChild(this.element.firstChild);s.headerVertical&&(this.element.classList.add("tabulator-col-vertical"),"flip"===s.headerVertical&&this.element.classList.add("tabulator-col-vertical-flip")),this.contentElement=this._bindEvents(),this.contentElement=this._buildColumnHeaderContent(),this.element.appendChild(this.contentElement),this.isGroup?this._buildGroupHeader():this._buildColumnHeader(),this.setTooltip(),this.dispatch("column-init",this),this.element.addEventListener("mouseenter",u=>{this.setTooltip()})}_bindEvents(){var u,f,_,s=this.definition;"function"==typeof s.headerClick&&this.element.addEventListener("click",C=>{s.headerClick(C,this.getComponent())}),"function"==typeof s.headerDblClick&&this.element.addEventListener("dblclick",C=>{s.headerDblClick(C,this.getComponent())}),"function"==typeof s.headerContext&&this.element.addEventListener("contextmenu",C=>{s.headerContext(C,this.getComponent())}),"function"==typeof s.headerTap&&(_=!1,this.element.addEventListener("touchstart",C=>{_=!0},{passive:!0}),this.element.addEventListener("touchend",C=>{_&&s.headerTap(C,this.getComponent()),_=!1})),"function"==typeof s.headerDblTap&&(u=null,this.element.addEventListener("touchend",C=>{u?(clearTimeout(u),u=null,s.headerDblTap(C,this.getComponent())):u=setTimeout(()=>{clearTimeout(u),u=null},300)})),"function"==typeof s.headerTapHold&&(f=null,this.element.addEventListener("touchstart",C=>{clearTimeout(f),f=setTimeout(function(){clearTimeout(f),f=null,_=!1,s.headerTapHold(C,this.getComponent())},1e3)},{passive:!0}),this.element.addEventListener("touchend",C=>{clearTimeout(f),f=null}))}_buildColumnHeader(){var s=this.definition;this.dispatch("column-layout",this),void 0!==s.visible&&(s.visible?this.show(!0):this.hide(!0)),s.cssClass&&s.cssClass.split(" ").forEach(_=>{this.element.classList.add(_)}),s.field&&this.element.setAttribute("tabulator-field",s.field),this.setMinWidth(parseInt(s.minWidth)),s.maxWidth&&this.setMaxWidth(parseInt(s.maxWidth)),this.reinitializeWidth(),this.tooltip=this.definition.tooltip,this.hozAlign=this.definition.hozAlign,this.vertAlign=this.definition.vertAlign,this.titleElement.style.textAlign=this.definition.headerHozAlign}_buildColumnHeaderContent(){var f=document.createElement("div");return f.classList.add("tabulator-col-content"),this.titleHolderElement=document.createElement("div"),this.titleHolderElement.classList.add("tabulator-col-title-holder"),f.appendChild(this.titleHolderElement),this.titleElement=this._buildColumnHeaderTitle(),this.titleHolderElement.appendChild(this.titleElement),f}_buildColumnHeaderTitle(){var s=this.definition,u=document.createElement("div");if(u.classList.add("tabulator-col-title"),s.editableTitle){var f=document.createElement("input");f.classList.add("tabulator-title-editor"),f.addEventListener("click",_=>{_.stopPropagation(),f.focus()}),f.addEventListener("change",()=>{s.title=f.value,this.dispatchExternal("columnTitleChanged",this.getComponent())}),u.appendChild(f),s.field?this.langBind("columns|"+s.field,_=>{f.value=_||s.title||"&nbsp;"}):f.value=s.title||"&nbsp;"}else s.field?this.langBind("columns|"+s.field,_=>{this._formatColumnHeaderTitle(u,_||s.title||"&nbsp;")}):this._formatColumnHeaderTitle(u,s.title||"&nbsp;");return u}_formatColumnHeaderTitle(s,u){var f=this.chain("column-format",[this,u,s],null,()=>u);switch(typeof f){case"object":f instanceof Node?s.appendChild(f):(s.innerHTML="",console.warn("Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",f));break;case"undefined":case"null":s.innerHTML="";break;default:s.innerHTML=f}}_buildGroupHeader(){this.element.classList.add("tabulator-col-group"),this.element.setAttribute("role","columngroup"),this.element.setAttribute("aria-title",this.definition.title),this.definition.cssClass&&this.definition.cssClass.split(" ").forEach(u=>{this.element.classList.add(u)}),this.titleElement.style.textAlign=this.definition.headerHozAlign,this.element.appendChild(this.groupElement)}_getFlatData(s){return s[this.field]}_getNestedData(s){var C,u=s,f=this.fieldStructure,_=f.length;for(let D=0;D<_&&(C=u=u[f[D]],u);D++);return C}_setFlatData(s,u){this.field&&(s[this.field]=u)}_setNestedData(s,u){var f=s,_=this.fieldStructure,C=_.length;for(let D=0;D<C;D++)if(D==C-1)f[_[D]]=u;else{if(!f[_[D]]){if(void 0===u)break;f[_[D]]={}}f=f[_[D]]}}attachColumn(s){this.groupElement?(this.columns.push(s),this.groupElement.appendChild(s.getElement())):console.warn("Column Warning - Column being attached to another column instead of column group")}verticalAlign(s,u){var f=this.parent.isGroup?this.parent.getGroupElement().clientHeight:u||this.parent.getHeadersElement().clientHeight;this.element.style.height=f+"px",this.isGroup&&(this.groupElement.style.minHeight=f-this.contentElement.offsetHeight+"px"),!this.isGroup&&"top"!==s&&(this.element.style.paddingTop="bottom"===s?this.element.clientHeight-this.contentElement.offsetHeight+"px":(this.element.clientHeight-this.contentElement.offsetHeight)/2+"px"),this.columns.forEach(function(_){_.verticalAlign(s)})}clearVerticalAlign(){this.element.style.paddingTop="",this.element.style.height="",this.element.style.minHeight="",this.groupElement.style.minHeight="",this.columns.forEach(function(s){s.clearVerticalAlign()})}bindModuleColumns(){"rownum"==this.definition.formatter&&(this.table.rowManager.rowNumColumn=this)}getElement(){return this.element}getGroupElement(){return this.groupElement}getField(){return this.field}getFirstColumn(){return this.isGroup?!!this.columns.length&&this.columns[0].getFirstColumn():this}getLastColumn(){return this.isGroup?!!this.columns.length&&this.columns[this.columns.length-1].getLastColumn():this}getColumns(){return this.columns}getCells(){return this.cells}getTopColumn(){return this.parent.isGroup?this.parent.getTopColumn():this}getDefinition(s){var u=[];return this.isGroup&&s&&(this.columns.forEach(function(f){u.push(f.getDefinition(!0))}),this.definition.columns=u),this.definition}checkColumnVisibility(){var s=!1;this.columns.forEach(function(u){u.visible&&(s=!0)}),s?(this.show(),this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!1)):this.hide()}show(s,u){this.visible||(this.visible=!0,this.element.style.display="",this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(f){f.show()}),!this.isGroup&&null===this.width&&this.reinitializeWidth(),this.table.columnManager.verticalAlignHeaders(),this.dispatch("column-show",this,u),s||this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!0),this.parent.isGroup&&this.parent.matchChildWidths(),this.silent||this.table.columnManager.renderer.rerenderColumns())}hide(s,u){this.visible&&(this.visible=!1,this.element.style.display="none",this.table.columnManager.verticalAlignHeaders(),this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(f){f.hide()}),this.dispatch("column-hide",this),s||this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!1),this.parent.isGroup&&this.parent.matchChildWidths(),this.silent||this.table.columnManager.renderer.rerenderColumns())}matchChildWidths(){var s=0;this.contentElement&&this.columns.length&&(this.columns.forEach(function(u){u.visible&&(s+=u.getWidth())}),this.contentElement.style.maxWidth=s-1+"px",this.parent.isGroup&&this.parent.matchChildWidths())}removeChild(s){var u=this.columns.indexOf(s);u>-1&&this.columns.splice(u,1),this.columns.length||this.delete()}setWidth(s){this.widthFixed=!0,this.setWidthActual(s)}setWidthActual(s){isNaN(s)&&(s=Math.floor(this.table.element.clientWidth/100*parseInt(s))),s=Math.max(this.minWidth,s),this.maxWidth&&(s=Math.min(this.maxWidth,s)),this.width=s,this.widthStyled=s?s+"px":"",this.element.style.width=this.widthStyled,this.isGroup||this.cells.forEach(function(u){u.setWidth()}),this.parent.isGroup&&this.parent.matchChildWidths(),this.dispatch("column-width",this)}checkCellHeights(){var s=[];this.cells.forEach(function(u){u.row.heightInitialized&&(null!==u.row.getElement().offsetParent?(s.push(u.row),u.row.clearCellHeight()):u.row.heightInitialized=!1)}),s.forEach(function(u){u.calcHeight()}),s.forEach(function(u){u.setCellHeight()})}getWidth(){var s=0;return this.isGroup?this.columns.forEach(function(u){u.visible&&(s+=u.getWidth())}):s=this.width,s}getHeight(){return this.element.offsetHeight}setMinWidth(s){this.minWidth=s,this.minWidthStyled=s?s+"px":"",this.element.style.minWidth=this.minWidthStyled,this.cells.forEach(function(u){u.setMinWidth()})}setMaxWidth(s){this.maxWidth=s,this.maxWidthStyled=s?s+"px":"",this.element.style.maxWidth=this.maxWidthStyled,this.cells.forEach(function(u){u.setMaxWidth()})}delete(){return new Promise((s,u)=>{this.isGroup&&this.columns.forEach(function(_){_.delete()}),this.dispatch("column-delete",this);var f=this.cells.length;for(let _=0;_<f;_++)this.cells[0].delete();this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=!1,this.contentElement=!1,this.titleElement=!1,this.groupElement=!1,this.parent.isGroup&&this.parent.removeChild(this),this.table.columnManager.deregisterColumn(this),this.table.columnManager.renderer.rerenderColumns(!0),s()})}columnRendered(){this.titleFormatterRendered&&this.titleFormatterRendered()}generateCell(s){var u=new hc(this,s);return this.cells.push(u),u}nextColumn(){var s=this.table.columnManager.findColumnIndex(this);return s>-1&&this._nextVisibleColumn(s+1)}_nextVisibleColumn(s){var u=this.table.columnManager.getColumnByIndex(s);return!u||u.visible?u:this._nextVisibleColumn(s+1)}prevColumn(){var s=this.table.columnManager.findColumnIndex(this);return s>-1&&this._prevVisibleColumn(s-1)}_prevVisibleColumn(s){var u=this.table.columnManager.getColumnByIndex(s);return!u||u.visible?u:this._prevVisibleColumn(s-1)}reinitializeWidth(s){this.widthFixed=!1,void 0!==this.definition.width&&!s&&this.setWidth(this.definition.width),this.dispatch("column-width-fit-before",this),this.fitToData(),this.dispatch("column-width-fit-after",this)}fitToData(){if(!this.isGroup){this.widthFixed||(this.element.style.width="",this.cells.forEach(u=>{u.clearWidth()}));var s=this.element.offsetWidth;(!this.width||!this.widthFixed)&&(this.cells.forEach(u=>{var f=u.getWidth();f>s&&(s=f)}),s&&this.setWidthActual(s+1))}}updateDefinition(s){var u;return this.isGroup||this.parent.isGroup?(console.error("Column Update Error - The updateDefinition function is only available on ungrouped columns"),Promise.reject("Column Update Error - The updateDefinition function is only available on columns, not column groups")):(u=Object.assign({},this.getDefinition()),u=Object.assign(u,s),this.table.columnManager.addColumn(u,!1,this).then(f=>(u.field==this.field&&(this.field=!1),this.delete().then(()=>f.getComponent()))))}deleteCell(s){var u=this.cells.indexOf(s);u>-1&&this.cells.splice(u,1)}getComponent(){return this.component||(this.component=new cu(this)),this.component}}return m.defaultOptionList=Yu,m})();class uu{constructor(d){return this._row=d,new Proxy(this,{get:function(s,u,f){return void 0!==s[u]?s[u]:s._row.table.componentFunctionBinder.handle("row",s._row,u)}})}getData(d){return this._row.getData(d)}getElement(){return this._row.getElement()}getCells(){var d=[];return this._row.getCells().forEach(function(s){d.push(s.getComponent())}),d}getCell(d){var s=this._row.getCell(d);return!!s&&s.getComponent()}getIndex(){return this._row.getData("data")[this._row.table.options.index]}getPosition(d){return this._row.table.rowManager.getRowPosition(this._row,d)}delete(){return this._row.delete()}scrollTo(){return this._row.table.rowManager.scrollToRow(this._row)}move(d,s){this._row.moveToRow(d,s)}update(d){return this._row.updateData(d)}normalizeHeight(){this._row.normalizeHeight(!0)}_getSelf(){return this._row}reformat(){return this._row.reinitialize()}getTable(){return this._row.table}getNextRow(){var d=this._row.nextRow();return d&&d.getComponent()}getPrevRow(){var d=this._row.prevRow();return d&&d.getComponent()}}class Wo extends xi{constructor(d,s,u="row"){super(s.table),this.parent=s,this.data={},this.type=u,this.element=!1,this.modules={},this.cells=[],this.height=0,this.heightStyled="",this.manualHeight=!1,this.outerHeight=0,this.initialized=!1,this.heightInitialized=!1,this.component=null,this.created=!1,this.setData(d)}create(){this.created||(this.created=!0,this.generateElement())}createElement(){var d=document.createElement("div");d.classList.add("tabulator-row"),d.setAttribute("role","row"),this.element=d}getElement(){return this.create(),this.element}detachElement(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}generateElement(){this.createElement(),this.dispatch("row-init",this)}generateCells(){this.cells=this.table.columnManager.generateCells(this)}initialize(d){if(this.create(),!this.initialized||d){for(this.deleteCells();this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.dispatch("row-layout-before",this),this.generateCells(),this.table.columnManager.renderer.renderRowCells(this),d&&this.normalizeHeight(),this.dispatch("row-layout",this),this.table.options.rowFormatter&&this.table.options.rowFormatter(this.getComponent()),this.initialized=!0,this.dispatch("row-layout-after",this)}else this.table.columnManager.renderer.rerenderRowCells(this)}reinitializeHeight(){this.heightInitialized=!1,this.element&&null!==this.element.offsetParent&&this.normalizeHeight(!0)}deinitializeHeight(){this.heightInitialized=!1}reinitialize(d){this.initialized=!1,this.heightInitialized=!1,this.manualHeight||(this.height=0,this.heightStyled=""),this.element&&null!==this.element.offsetParent&&this.initialize(!0),this.dispatch("row-relayout",this)}calcHeight(d){var s=0,u=this.table.options.resizableRows?this.element.clientHeight:0;this.cells.forEach(function(f){var _=f.getHeight();_>s&&(s=_)}),this.height=d?Math.max(s,u):this.manualHeight?this.height:Math.max(s,u),this.heightStyled=this.height?this.height+"px":"",this.outerHeight=this.element.offsetHeight}setCellHeight(){this.cells.forEach(function(d){d.setHeight()}),this.heightInitialized=!0}clearCellHeight(){this.cells.forEach(function(d){d.clearHeight()})}normalizeHeight(d){d&&this.clearCellHeight(),this.calcHeight(d),this.setCellHeight()}setHeight(d,s){(this.height!=d||s)&&(this.manualHeight=!0,this.height=d,this.heightStyled=d?d+"px":"",this.setCellHeight(),this.outerHeight=this.element.offsetHeight)}getHeight(){return this.outerHeight}getWidth(){return this.element.offsetWidth}deleteCell(d){var s=this.cells.indexOf(d);s>-1&&this.cells.splice(s,1)}setData(d){this.data=this.chain("row-data-init-before",[this,d],void 0,d),this.dispatch("row-data-init-after",this)}updateData(d){var f,s=this.element&&Ei.elVisible(this.element),u={};return new Promise((_,C)=>{for(var D in"string"==typeof d&&(d=JSON.parse(d)),this.dispatch("row-data-save-before",this),this.subscribed("row-data-changing")&&(u=Object.assign(u,this.data),u=Object.assign(u,d)),f=this.chain("row-data-changing",[this,u,d],null,d))this.data[D]=f[D];for(var D in this.dispatch("row-data-save-after",this),d)this.table.columnManager.getColumnsByFieldRoot(D).forEach(K=>{let ut=this.getCell(K.getField());if(ut){let It=K.getFieldValue(f);ut.getValue()!=It&&(ut.setValueProcessData(It),s&&ut.cellRendered())}});s?(this.normalizeHeight(!0),this.table.options.rowFormatter&&this.table.options.rowFormatter(this.getComponent())):(this.initialized=!1,this.height=0,this.heightStyled=""),this.dispatch("row-data-changed",this,s,d),this.dispatchExternal("rowUpdated",this.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()),_()})}getData(d){return d?this.chain("row-data-retrieve",[this,d],null,this.data):this.data}getCell(d){return d=this.table.columnManager.findColumn(d),this.initialized||this.generateCells(),this.cells.find(function(u){return u.column===d})}getCellIndex(d){return this.cells.findIndex(function(s){return s===d})}findCell(d){return this.cells.find(s=>s.element===d)}getCells(){return this.initialized||this.generateCells(),this.cells}nextRow(){return this.table.rowManager.nextDisplayRow(this,!0)||!1}prevRow(){return this.table.rowManager.prevDisplayRow(this,!0)||!1}moveToRow(d,s){var u=this.table.rowManager.findRow(d);u?(this.table.rowManager.moveRowActual(this,u,!s),this.table.rowManager.refreshActiveData("display",!1,!0)):console.warn("Move Error - No matching row found:",d)}delete(){return this.dispatch("row-delete",this),this.deleteActual(),Promise.resolve()}deleteActual(d){this.table.rowManager.getRowIndex(this),this.detatchModules(),this.table.rowManager.deleteRow(this,d),this.deleteCells(),this.initialized=!1,this.heightInitialized=!1,this.element=!1,this.dispatch("row-deleted",this)}detatchModules(){this.dispatch("row-deleting",this)}deleteCells(){var d=this.cells.length;for(let s=0;s<d;s++)this.cells[0].delete()}wipe(){if(this.detatchModules(),this.deleteCells(),this.element){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.parentNode&&this.element.parentNode.removeChild(this.element)}this.element=!1,this.modules={}}getGroup(){return this.modules.group||!1}getComponent(){return this.component||(this.component=new uu(this)),this.component}}var _p={avg:function(m,d,s){var u=0,f=void 0!==s.precision?s.precision:2;return m.length&&(u=m.reduce(function(_,C){return Number(_)+Number(C)}),u/=m.length,u=!1!==f?u.toFixed(f):u),parseFloat(u).toString()},max:function(m,d,s){var u=null,f=void 0!==s.precision&&s.precision;return m.forEach(function(_){((_=Number(_))>u||null===u)&&(u=_)}),null!==u?!1!==f?u.toFixed(f):u:""},min:function(m,d,s){var u=null,f=void 0!==s.precision&&s.precision;return m.forEach(function(_){((_=Number(_))<u||null===u)&&(u=_)}),null!==u?!1!==f?u.toFixed(f):u:""},sum:function(m,d,s){var u=0,f=void 0!==s.precision&&s.precision;return m.length&&m.forEach(function(_){_=Number(_),u+=isNaN(_)?0:Number(_)}),!1!==f?u.toFixed(f):u},concat:function(m,d,s){var u=0;return m.length&&(u=m.reduce(function(f,_){return String(f)+String(_)})),u},count:function(m,d,s){var u=0;return m.length&&m.forEach(function(f){f&&u++}),u}};let yf=(()=>{class m extends Fi{constructor(s){super(s),this.topCalcs=[],this.botCalcs=[],this.genColumn=!1,this.topElement=this.createElement(),this.botElement=this.createElement(),this.topRow=!1,this.botRow=!1,this.topInitialized=!1,this.botInitialized=!1,this.registerTableOption("columnCalcs",!0),this.registerColumnOption("topCalc"),this.registerColumnOption("topCalcParams"),this.registerColumnOption("topCalcFormatter"),this.registerColumnOption("topCalcFormatterParams"),this.registerColumnOption("bottomCalc"),this.registerColumnOption("bottomCalcParams"),this.registerColumnOption("bottomCalcFormatter"),this.registerColumnOption("bottomCalcFormatterParams")}createElement(){var s=document.createElement("div");return s.classList.add("tabulator-calcs-holder"),s}initialize(){this.genColumn=new Ul({field:"value"},this),this.subscribe("cell-value-changed",this.cellValueChanged.bind(this)),this.subscribe("column-init",this.initializeColumnCheck.bind(this)),this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this)),this.subscribe("row-added",this.rowsUpdated.bind(this)),this.subscribe("column-moved",this.recalcActiveRows.bind(this)),this.subscribe("column-add",this.recalcActiveRows.bind(this)),this.subscribe("data-refeshed",this.recalcActiveRows.bind(this)),this.subscribe("table-redraw",this.tableRedraw.bind(this)),this.registerTableFunction("getCalcResults",this.getResults.bind(this)),this.registerTableFunction("recalc",this.userRecalc.bind(this))}tableRedraw(s){this.recalc(this.table.rowManager.activeRows),s&&this.redraw()}userRecalc(){this.recalc(this.table.rowManager.activeRows)}rowsUpdated(s){this.table.options.groupBy?this.recalcRowGroup(this):this.recalcActiveRows()}recalcActiveRows(){this.recalc(this.table.rowManager.activeRows)}cellValueChanged(s){(s.column.definition.topCalc||s.column.definition.bottomCalc)&&(this.table.options.groupBy?(("table"==this.table.options.columnCalcs||"both"==this.table.options.columnCalcs)&&this.recalcActiveRows(),"table"!=this.table.options.columnCalcs&&this.recalcRowGroup(s.row)):this.recalcActiveRows())}initializeColumnCheck(s){(s.definition.topCalc||s.definition.bottomCalc)&&this.initializeColumn(s)}initializeColumn(s){var u=s.definition,f={topCalcParams:u.topCalcParams||{},botCalcParams:u.bottomCalcParams||{}};if(u.topCalc){switch(typeof u.topCalc){case"string":m.calculations[u.topCalc]?f.topCalc=m.calculations[u.topCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",u.topCalc);break;case"function":f.topCalc=u.topCalc}f.topCalc&&(s.modules.columnCalcs=f,this.topCalcs.push(s),"group"!=this.table.options.columnCalcs&&this.initializeTopRow())}if(u.bottomCalc){switch(typeof u.bottomCalc){case"string":m.calculations[u.bottomCalc]?f.botCalc=m.calculations[u.bottomCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",u.bottomCalc);break;case"function":f.botCalc=u.bottomCalc}f.botCalc&&(s.modules.columnCalcs=f,this.botCalcs.push(s),"group"!=this.table.options.columnCalcs&&this.initializeBottomRow())}}registerColumnField(){}removeCalcs(){var s=!1;this.topInitialized&&(this.topInitialized=!1,this.topElement.parentNode.removeChild(this.topElement),s=!0),this.botInitialized&&(this.botInitialized=!1,this.table.footerManager.remove(this.botElement),s=!0),s&&this.table.rowManager.adjustTableSize()}initializeTopRow(){this.topInitialized||(this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling),this.topInitialized=!0)}initializeBottomRow(){this.botInitialized||(this.table.footerManager.prepend(this.botElement),this.botInitialized=!0)}scrollHorizontal(s){this.botInitialized&&this.botRow&&(this.botRow.getElement().style.marginLeft=-s+"px")}recalc(s){var u;if(this.topInitialized||this.botInitialized){if(this.rowsToData(s),this.topInitialized){for(this.topRow&&this.topRow.deleteCells(),u=this.generateRow("top",this.rowsToData(s)),this.topRow=u;this.topElement.firstChild;)this.topElement.removeChild(this.topElement.firstChild);this.topElement.appendChild(u.getElement()),u.initialize(!0)}if(this.botInitialized){for(this.botRow&&this.botRow.deleteCells(),u=this.generateRow("bottom",this.rowsToData(s)),this.botRow=u;this.botElement.firstChild;)this.botElement.removeChild(this.botElement.firstChild);this.botElement.appendChild(u.getElement()),u.initialize(!0)}this.table.rowManager.adjustTableSize(),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout()}}recalcRowGroup(s){this.recalcGroup(this.table.modules.groupRows.getRowGroup(s))}recalcAll(){(this.topCalcs.length||this.botCalcs.length)&&("group"!==this.table.options.columnCalcs&&this.recalcActiveRows(),this.table.options.groupBy&&"table"!==this.table.options.columnCalcs)&&this.table.modules.groupRows.getChildGroups().forEach(u=>{this.recalcGroup(u)})}recalcGroup(s){var u,f;s&&s.calcs&&(s.calcs.bottom&&(u=this.rowsToData(s.rows),f=this.generateRowData("bottom",u),s.calcs.bottom.updateData(f),s.calcs.bottom.reinitialize()),s.calcs.top&&(u=this.rowsToData(s.rows),f=this.generateRowData("top",u),s.calcs.top.updateData(f),s.calcs.top.reinitialize()))}generateTopRow(s){return this.generateRow("top",this.rowsToData(s))}generateBottomRow(s){return this.generateRow("bottom",this.rowsToData(s))}rowsToData(s){var u=[];return s.forEach(f=>{if(u.push(f.getData()),this.table.options.dataTree&&this.table.options.dataTreeChildColumnCalcs&&f.modules.dataTree.open){var _=this.rowsToData(this.table.modules.dataTree.getFilteredTreeChildren(f));u=u.concat(_)}}),u}generateRow(s,u){var _,f=this.generateRowData(s,u);return this.table.modExists("mutator")&&this.table.modules.mutator.disable(),_=new Wo(f,this,"calc"),this.table.modExists("mutator")&&this.table.modules.mutator.enable(),_.getElement().classList.add("tabulator-calcs","tabulator-calcs-"+s),_.component=!1,_.getComponent=()=>(_.component||(_.component=new ma(this)),_.component),_.generateCells=()=>{var C=[];this.table.columnManager.columnsByIndex.forEach(D=>{this.genColumn.setField(D.getField()),this.genColumn.hozAlign=D.hozAlign,this.genColumn.modules.format=D.definition[s+"CalcFormatter"]&&this.table.modExists("format")?{formatter:this.table.modules.format.getFormatter(D.definition[s+"CalcFormatter"]),params:D.definition[s+"CalcFormatterParams"]||{}}:{formatter:this.table.modules.format.getFormatter("plaintext"),params:{}},this.genColumn.definition.cssClass=D.definition.cssClass;var A=new hc(this.genColumn,_);A.getElement(),A.column=D,A.setWidth(),D.cells.push(A),C.push(A),D.visible||A.hide()}),_.cells=C},_}generateRowData(s,u){var D,A,f={},C="top"==s?"topCalc":"botCalc";return("top"==s?this.topCalcs:this.botCalcs).forEach(function(F){var K=[];F.modules.columnCalcs&&F.modules.columnCalcs[C]&&(u.forEach(function(ut){K.push(F.getFieldValue(ut))}),D="function"==typeof F.modules.columnCalcs[A=C+"Params"]?F.modules.columnCalcs[A](K,u):F.modules.columnCalcs[A],F.setFieldValue(f,F.modules.columnCalcs[C](K,u,D)))}),f}hasTopCalcs(){return!!this.topCalcs.length}hasBottomCalcs(){return!!this.botCalcs.length}redraw(){this.topRow&&this.topRow.normalizeHeight(!0),this.botRow&&this.botRow.normalizeHeight(!0)}getResults(){var s={};return this.table.options.groupBy&&this.table.modExists("groupRows")?this.table.modules.groupRows.getGroups(!0).forEach(f=>{s[f.getKey()]=this.getGroupResults(f)}):s={top:this.topRow?this.topRow.getData():{},bottom:this.botRow?this.botRow.getData():{}},s}getGroupResults(s){var u=s._getSelf(),f=s.getSubGroups(),_={};return f.forEach(D=>{_[D.getKey()]=this.getGroupResults(D)}),{top:u.calcs.top?u.calcs.top.getData():{},bottom:u.calcs.bottom?u.calcs.bottom.getData():{},groups:_}}}return m.moduleName="columnCalcs",m.calculations=_p,m})(),Ef=(()=>{class m extends Fi{constructor(s){super(s),this.indent=10,this.field="",this.collapseEl=null,this.expandEl=null,this.branchEl=null,this.elementField=!1,this.startOpen=function(){},this.displayIndex=0,this.registerTableOption("dataTree",!1),this.registerTableOption("dataTreeFilter",!0),this.registerTableOption("dataTreeSort",!0),this.registerTableOption("dataTreeElementColumn",!1),this.registerTableOption("dataTreeBranchElement",!0),this.registerTableOption("dataTreeChildIndent",9),this.registerTableOption("dataTreeChildField","_children"),this.registerTableOption("dataTreeCollapseElement",!1),this.registerTableOption("dataTreeExpandElement",!1),this.registerTableOption("dataTreeStartExpanded",!1),this.registerTableOption("dataTreeChildColumnCalcs",!1),this.registerTableOption("dataTreeSelectPropagate",!1),this.registerComponentFunction("row","treeCollapse",this.collapseRow.bind(this)),this.registerComponentFunction("row","treeExpand",this.expandRow.bind(this)),this.registerComponentFunction("row","treeToggle",this.toggleRow.bind(this)),this.registerComponentFunction("row","getTreeParent",this.getTreeParent.bind(this)),this.registerComponentFunction("row","getTreeChildren",this.getRowChildren.bind(this)),this.registerComponentFunction("row","addTreeChild",this.addTreeChildRow.bind(this))}initialize(){if(this.table.options.dataTree){var s=null,u=this.table.columnManager.getFirstVisibileColumn(),f=this.table.options;switch(this.field=f.dataTreeChildField,this.indent=f.dataTreeChildIndent,this.elementField=f.dataTreeElementColumn||!!u&&u.field,f.dataTreeBranchElement&&(!0===f.dataTreeBranchElement?(this.branchEl=document.createElement("div"),this.branchEl.classList.add("tabulator-data-tree-branch")):"string"==typeof f.dataTreeBranchElement?((s=document.createElement("div")).innerHTML=f.dataTreeBranchElement,this.branchEl=s.firstChild):this.branchEl=f.dataTreeBranchElement),f.dataTreeCollapseElement?"string"==typeof f.dataTreeCollapseElement?((s=document.createElement("div")).innerHTML=f.dataTreeCollapseElement,this.collapseEl=s.firstChild):this.collapseEl=f.dataTreeCollapseElement:(this.collapseEl=document.createElement("div"),this.collapseEl.classList.add("tabulator-data-tree-control"),this.collapseEl.tabIndex=0,this.collapseEl.innerHTML="<div class='tabulator-data-tree-control-collapse'></div>"),f.dataTreeExpandElement?"string"==typeof f.dataTreeExpandElement?((s=document.createElement("div")).innerHTML=f.dataTreeExpandElement,this.expandEl=s.firstChild):this.expandEl=f.dataTreeExpandElement:(this.expandEl=document.createElement("div"),this.expandEl.classList.add("tabulator-data-tree-control"),this.expandEl.tabIndex=0,this.expandEl.innerHTML="<div class='tabulator-data-tree-control-expand'></div>"),typeof f.dataTreeStartExpanded){case"boolean":this.startOpen=function(_,C){return f.dataTreeStartExpanded};break;case"function":this.startOpen=f.dataTreeStartExpanded;break;default:this.startOpen=function(_,C){return f.dataTreeStartExpanded[C]}}this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-layout-after",this.layoutRow.bind(this)),this.subscribe("row-relayout",this.layoutRow.bind(this)),this.subscribe("row-deleted",this.rowDelete.bind(this),0),this.subscribe("row-data-changed",this.rowDataChanged.bind(this),10),this.subscribe("column-moving-rows",this.columnMoving.bind(this)),this.registerDisplayHandler(this.getRows.bind(this),30)}}getRowChildren(s){return this.getTreeChildren(s,!0)}columnMoving(){var s=[];return this.table.rowManager.rows.forEach(u=>{s=s.concat(this.getTreeChildren(u,!1,!0))}),s}rowDataChanged(s,u,f){this.redrawNeeded(f)&&(this.initializeRow(s),u&&(this.layoutRow(s),this.refreshData(!0)))}initializeRow(s){var u=s.getData()[this.field],f=Array.isArray(u),_=f||!f&&"object"==typeof u&&null!==u;!_&&s.modules.dataTree&&s.modules.dataTree.branchEl&&s.modules.dataTree.branchEl.parentNode.removeChild(s.modules.dataTree.branchEl),!_&&s.modules.dataTree&&s.modules.dataTree.controlEl&&s.modules.dataTree.controlEl.parentNode.removeChild(s.modules.dataTree.controlEl),s.modules.dataTree={index:s.modules.dataTree?s.modules.dataTree.index:0,open:!!_&&(s.modules.dataTree?s.modules.dataTree.open:this.startOpen(s.getComponent(),0)),controlEl:!(!s.modules.dataTree||!_)&&s.modules.dataTree.controlEl,branchEl:!(!s.modules.dataTree||!_)&&s.modules.dataTree.branchEl,parent:!!s.modules.dataTree&&s.modules.dataTree.parent,children:_}}reinitializeRowChildren(s){this.getTreeChildren(s,!1,!0).forEach(function(f){f.reinitialize(!0)})}layoutRow(s){var f=(this.elementField?s.getCell(this.elementField):s.getCells()[0]).getElement(),_=s.modules.dataTree;_.branchEl&&(_.branchEl.parentNode&&_.branchEl.parentNode.removeChild(_.branchEl),_.branchEl=!1),_.controlEl&&(_.controlEl.parentNode&&_.controlEl.parentNode.removeChild(_.controlEl),_.controlEl=!1),this.generateControlElement(s,f),s.getElement().classList.add("tabulator-tree-level-"+_.index),_.index&&(this.branchEl?(_.branchEl=this.branchEl.cloneNode(!0),f.insertBefore(_.branchEl,f.firstChild),this.table.rtl?_.branchEl.style.marginRight=(_.branchEl.offsetWidth+_.branchEl.style.marginLeft)*(_.index-1)+_.index*this.indent+"px":_.branchEl.style.marginLeft=(_.branchEl.offsetWidth+_.branchEl.style.marginRight)*(_.index-1)+_.index*this.indent+"px"):this.table.rtl?f.style.paddingRight=parseInt(window.getComputedStyle(f,null).getPropertyValue("padding-right"))+_.index*this.indent+"px":f.style.paddingLeft=parseInt(window.getComputedStyle(f,null).getPropertyValue("padding-left"))+_.index*this.indent+"px")}generateControlElement(s,u){var f=s.modules.dataTree,_=(u=u||s.getCells()[0].getElement(),f.controlEl);!1!==f.children&&(f.open?(f.controlEl=this.collapseEl.cloneNode(!0),f.controlEl.addEventListener("click",C=>{C.stopPropagation(),this.collapseRow(s)})):(f.controlEl=this.expandEl.cloneNode(!0),f.controlEl.addEventListener("click",C=>{C.stopPropagation(),this.expandRow(s)})),f.controlEl.addEventListener("mousedown",C=>{C.stopPropagation()}),_&&_.parentNode===u?_.parentNode.replaceChild(f.controlEl,_):u.insertBefore(f.controlEl,u.firstChild))}setDisplayIndex(s){this.displayIndex=s}getDisplayIndex(){return this.displayIndex}getRows(s){var u=[];return s.forEach((f,_)=>{var C;u.push(f),f instanceof Wo&&(f.create(),!(C=f.modules.dataTree.children).index&&!1!==C.children&&this.getChildren(f).forEach(A=>{A.create(),u.push(A)}))}),u}getChildren(s,u){var f=s.modules.dataTree,_=[],C=[];return!1!==f.children&&(f.open||u)&&(Array.isArray(f.children)||(f.children=this.generateChildren(s)),_=this.table.modExists("filter")&&this.table.options.dataTreeFilter?this.table.modules.filter.filter(f.children):f.children,this.table.modExists("sort")&&this.table.options.dataTreeSort&&this.table.modules.sort.sort(_),_.forEach(D=>{C.push(D),this.getChildren(D).forEach(F=>{C.push(F)})})),C}generateChildren(s){var u=[],f=s.getData()[this.field];return Array.isArray(f)||(f=[f]),f.forEach(_=>{var C=new Wo(_||{},this.table.rowManager);C.create(),C.modules.dataTree.index=s.modules.dataTree.index+1,C.modules.dataTree.parent=s,C.modules.dataTree.children&&(C.modules.dataTree.open=this.startOpen(C.getComponent(),C.modules.dataTree.index)),u.push(C)}),u}expandRow(s,u){var f=s.modules.dataTree;!1!==f.children&&(f.open=!0,s.reinitialize(),this.refreshData(!0),this.dispatchExternal("dataTreeRowExpanded",s.getComponent(),s.modules.dataTree.index))}collapseRow(s){var u=s.modules.dataTree;!1!==u.children&&(u.open=!1,s.reinitialize(),this.refreshData(!0),this.dispatchExternal("dataTreeRowCollapsed",s.getComponent(),s.modules.dataTree.index))}toggleRow(s){var u=s.modules.dataTree;!1!==u.children&&(u.open?this.collapseRow(s):this.expandRow(s))}getTreeParent(s){return!!s.modules.dataTree.parent&&s.modules.dataTree.parent.getComponent()}getFilteredTreeChildren(s){var u=s.modules.dataTree,f=[];return u.children&&(Array.isArray(u.children)||(u.children=this.generateChildren(s)),(this.table.modExists("filter")&&this.table.options.dataTreeFilter?this.table.modules.filter.filter(u.children):u.children).forEach(C=>{C instanceof Wo&&f.push(C)})),f}rowDelete(s){var f,u=s.modules.dataTree.parent;u&&(!1!==(f=this.findChildIndex(s,u))&&u.data[this.field].splice(f,1),u.data[this.field].length||delete u.data[this.field],this.initializeRow(u),this.layoutRow(u)),this.refreshData(!0)}addTreeChildRow(s,u,f,_){var C=!1;"string"==typeof u&&(u=JSON.parse(u)),Array.isArray(s.data[this.field])||(s.data[this.field]=[],s.modules.dataTree.open=this.startOpen(s.getComponent(),s.modules.dataTree.index)),void 0!==_&&!1!==(C=this.findChildIndex(_,s))&&s.data[this.field].splice(f?C:C+1,0,u),!1===C&&(f?s.data[this.field].unshift(u):s.data[this.field].push(u)),this.initializeRow(s),this.layoutRow(s),this.refreshData(!0)}findChildIndex(s,u){var f=!1;return"object"==typeof s?s instanceof Wo?f=s.data:s instanceof RowComponent?f=s._getSelf().data:"undefined"!=typeof HTMLElement&&s instanceof HTMLElement&&u.modules.dataTree&&(f=u.modules.dataTree.children.find(_=>_ instanceof Wo&&_.element===s))&&(f=f.data):f=null!=s&&u.data[this.field].find(_=>_.data[this.table.options.index]==s),f&&(Array.isArray(u.data[this.field])&&(f=u.data[this.field].indexOf(f)),-1==f&&(f=!1)),f}getTreeChildren(s,u,f){var _=s.modules.dataTree,C=[];return _.children&&(Array.isArray(_.children)||(_.children=this.generateChildren(s)),_.children.forEach(D=>{D instanceof Wo&&(C.push(u?D.getComponent():D),f&&(C=C.concat(this.getTreeChildren(D,u,f))))})),C}checkForRestyle(s){s.row.cells.indexOf(s)||this.layoutRow(s.row)}getChildField(){return this.field}redrawNeeded(s){return!!this.field&&void 0!==s[this.field]||!!this.elementField&&void 0!==s[this.elementField]}}return m.moduleName="dataTree",m})();var Tf={csv:function(m,d,s){var u=d&&d.delimiter?d.delimiter:",",f=[],_=[];m.forEach(C=>{var D=[];switch(C.type){case"group":console.warn("Download Warning - CSV downloader cannot process row groups");break;case"calc":console.warn("Download Warning - CSV downloader cannot process column calculations");break;case"header":C.columns.forEach((A,F)=>{A&&1===A.depth&&(_[F]=null==A.value?"":'"'+String(A.value).split('"').join('""')+'"')});break;case"row":C.columns.forEach(A=>{if(A){switch(typeof A.value){case"object":A.value=JSON.stringify(A.value);break;case"undefined":case"null":A.value=""}D.push('"'+String(A.value).split('"').join('""')+'"')}}),f.push(D.join(u))}}),_.length&&f.unshift(_.join(u)),f=f.join("\n"),d.bom&&(f="\ufeff"+f),s(f,"text/csv")},json:function(m,d,s){var u=[];m.forEach(f=>{var _={};switch(f.type){case"header":break;case"group":console.warn("Download Warning - JSON downloader cannot process row groups");break;case"calc":console.warn("Download Warning - JSON downloader cannot process column calculations");break;case"row":f.columns.forEach(C=>{C&&(_[C.component.getField()]=C.value)}),u.push(_)}}),s(u=JSON.stringify(u,null,"\t"),"application/json")},pdf:function(m,d,s){var u=[],f=[],_={},C=d.rowGroupStyles||{fontStyle:"bold",fontSize:12,cellPadding:6,fillColor:220},D=d.rowCalcStyles||{fontStyle:"bold",fontSize:10,cellPadding:4,fillColor:232},A=d.jsPDF||{},F=d&&d.title?d.title:"";function K(It,Vt){var ee=[];return It.columns.forEach(he=>{var ve;if(he){switch(typeof he.value){case"object":he.value=JSON.stringify(he.value);break;case"undefined":case"null":he.value=""}ve={content:he.value,colSpan:he.width,rowSpan:he.height},Vt&&(ve.styles=Vt),ee.push(ve)}else ee.push("")}),ee}A.orientation||(A.orientation=d.orientation||"landscape"),A.unit||(A.unit="pt"),m.forEach(It=>{switch(It.type){case"header":u.push(K(It));break;case"group":f.push(K(It,C));break;case"calc":f.push(K(It,D));break;case"row":f.push(K(It))}});var ut=new jspdf.jsPDF(A);d&&d.autoTable&&(_="function"==typeof d.autoTable?d.autoTable(ut)||{}:d.autoTable),F&&(_.didDrawPage=function(It){ut.text(F,40,30)}),_.head=u,_.body=f,ut.autoTable(_),d&&d.documentProcessing&&d.documentProcessing(ut),s(ut.output("arraybuffer"),"application/pdf")},xlsx:function(m,d,s){var f=d.sheetName||"Sheet1",_=XLSX.utils.book_new(),C=new xi(this);function A(){var ut=[],It=[],Vt={},ee={s:{c:0,r:0},e:{c:m[0]?m[0].columns.reduce((he,ve)=>he+(ve&&ve.width?ve.width:1),0):0,r:m.length}};return m.forEach((he,ve)=>{var De=[];he.columns.forEach(function(si,Wi){si?(De.push(si.value instanceof Date||"object"!=typeof si.value?si.value:JSON.stringify(si.value)),(si.width>1||si.height>-1)&&It.push({s:{r:ve,c:Wi},e:{r:ve+si.height-1,c:Wi+si.width-1}})):De.push("")}),ut.push(De)}),XLSX.utils.sheet_add_aoa(Vt,ut),Vt["!ref"]=XLSX.utils.encode_range(ee),It.length&&(Vt["!merges"]=It),Vt}if(_.SheetNames=[],_.Sheets={},d.sheetOnly)s(A());else{if(d.sheets)for(var F in d.sheets)!0===d.sheets[F]?(_.SheetNames.push(F),_.Sheets[F]=A()):(_.SheetNames.push(F),C.commsSend(d.sheets[F],"download","intercept",{type:"xlsx",options:{sheetOnly:!0},active:this.active,intercept:function(ut){_.Sheets[F]=ut}}));else _.SheetNames.push(f),_.Sheets[f]=A();d.documentProcessing&&(_=d.documentProcessing(_)),s(function(ut){for(var It=new ArrayBuffer(ut.length),Vt=new Uint8Array(It),ee=0;ee!=ut.length;++ee)Vt[ee]=255&ut.charCodeAt(ee);return It}(XLSX.write(_,{bookType:"xlsx",bookSST:!0,type:"binary"})),"application/octet-stream")}},html:function(m,d,s){this.modExists("export",!0)&&s(this.modules.export.genereateHTMLTable(m),"text/html")}};let ed=(()=>{class m extends Fi{constructor(s){super(s),this.registerTableOption("downloadReady",function(u,f){return f}),this.registerTableOption("downloadConfig",{}),this.registerTableOption("downloadRowRange","active"),this.registerColumnOption("download"),this.registerColumnOption("titleDownload")}initialize(){this.registerTableFunction("download",this.download.bind(this)),this.registerTableFunction("downloadToTab",this.downloadToTab.bind(this))}downloadToTab(s,u,f,_){this.download(s,u,f,_,!0)}download(s,u,f,_,C){var D=!1;if("function"==typeof s?D=s:m.downloaders[s]?D=m.downloaders[s]:console.warn("Download Error - No such download type found: ",s),D){var F=this.generateExportList(_);D.call(this.table,F,f||{},function(K,ut){C?!0===C?this.triggerDownload(K,ut,s,u,!0):C(K):this.triggerDownload(K,ut,s,u)}.bind(this))}}generateExportList(s){var u=this.table.modules.export.generateExportList(this.table.options.downloadConfig,!1,s||this.table.options.downloadRowRange,"download"),f=this.table.options.groupHeaderDownload;return f&&!Array.isArray(f)&&(f=[f]),u.forEach(_=>{var C;"group"===_.type&&(C=_.columns[0],f&&f[_.indent]&&(C.value=f[_.indent](C.value,_.component._group.getRowCount(),_.component._group.getData(),_.component)))}),u}triggerDownload(s,u,f,_,C){var D=document.createElement("a"),A=new Blob([s],{type:u});_=_||"Tabulator."+("function"==typeof f?"txt":f),(A=this.table.options.downloadReady(s,A))&&(C?window.open(window.URL.createObjectURL(A)):navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(A,_):(D.setAttribute("href",window.URL.createObjectURL(A)),D.setAttribute("download",_),D.style.display="none",document.body.appendChild(D),D.click(),document.body.removeChild(D)),this.dispatchExternal("downloadComplete"))}commsReceived(s,u,f){switch(u){case"intercept":this.download(f.type,"",f.options,f.active,f.intercept)}}}return m.moduleName="download",m.downloaders=Tf,m})();function Th(m,d){var s=d.mask,u=void 0!==d.maskLetterChar?d.maskLetterChar:"A",f=void 0!==d.maskNumberChar?d.maskNumberChar:"9",_=void 0!==d.maskWildcardChar?d.maskWildcardChar:"*";function C(D){var A=s[D];void 0!==A&&A!==_&&A!==u&&A!==f&&(m.value=m.value+""+A,C(D+1))}m.addEventListener("keydown",D=>{var A=m.value.length,F=D.key;if(D.keyCode>46){if(A>=s.length)return D.preventDefault(),D.stopPropagation(),!1;switch(s[A]){case u:if(F.toUpperCase()==F.toLowerCase())return D.preventDefault(),D.stopPropagation(),!1;break;case f:if(isNaN(F))return D.preventDefault(),D.stopPropagation(),!1;break;case _:break;default:if(F!==s[A])return D.preventDefault(),D.stopPropagation(),!1}}}),m.addEventListener("keyup",D=>{D.keyCode>46&&d.maskAutoFill&&C(m.value.length)}),m.placeholder||(m.placeholder=s),d.maskAutoFill&&C(m.value.length)}var If={input:function(m,d,s,u,f){var _=m.getValue(),C=document.createElement("input");if(C.setAttribute("type",f.search?"search":"text"),C.style.padding="4px",C.style.width="100%",C.style.boxSizing="border-box",f.elementAttributes&&"object"==typeof f.elementAttributes)for(let A in f.elementAttributes)"+"==A.charAt(0)?(A=A.slice(1),C.setAttribute(A,C.getAttribute(A)+f.elementAttributes["+"+A])):C.setAttribute(A,f.elementAttributes[A]);function D(A){null==_&&""!==C.value||C.value!==_?s(C.value)&&(_=C.value):u()}return C.value=void 0!==_?_:"",d(function(){C.focus({preventScroll:!0}),C.style.height="100%"}),C.addEventListener("change",D),C.addEventListener("blur",D),C.addEventListener("keydown",function(A){switch(A.keyCode){case 13:D();break;case 27:u();break;case 35:case 36:A.stopPropagation()}}),f.mask&&Th(C,f),C},textarea:function(m,d,s,u,f){var _=m.getValue(),C=f.verticalNavigation||"hybrid",D=String(null!=_?_:""),F=(D.match(/(?:\r\n|\r|\n)/g),document.createElement("textarea")),K=0;if(F.style.display="block",F.style.padding="2px",F.style.height="100%",F.style.width="100%",F.style.boxSizing="border-box",F.style.whiteSpace="pre-wrap",F.style.resize="none",f.elementAttributes&&"object"==typeof f.elementAttributes)for(let It in f.elementAttributes)"+"==It.charAt(0)?(It=It.slice(1),F.setAttribute(It,F.getAttribute(It)+f.elementAttributes["+"+It])):F.setAttribute(It,f.elementAttributes[It]);function ut(It){null==_&&""!==F.value||F.value!==_?(s(F.value)&&(_=F.value),setTimeout(function(){m.getRow().normalizeHeight()},300)):u()}return F.value=D,d(function(){F.focus({preventScroll:!0}),F.style.height="100%",F.style.height=F.scrollHeight+"px",m.getRow().normalizeHeight()}),F.addEventListener("change",ut),F.addEventListener("blur",ut),F.addEventListener("keyup",function(){F.style.height="";var It=F.scrollHeight;F.style.height=It+"px",It!=K&&(K=It,m.getRow().normalizeHeight())}),F.addEventListener("keydown",function(It){switch(It.keyCode){case 27:u();break;case 38:("editor"==C||"hybrid"==C&&F.selectionStart)&&(It.stopImmediatePropagation(),It.stopPropagation());break;case 40:("editor"==C||"hybrid"==C&&F.selectionStart!==F.value.length)&&(It.stopImmediatePropagation(),It.stopPropagation());break;case 35:case 36:It.stopPropagation()}}),f.mask&&Th(F,f),F},number:function(m,d,s,u,f){var _=m.getValue(),C=f.verticalNavigation||"editor",D=document.createElement("input");if(D.setAttribute("type","number"),void 0!==f.max&&D.setAttribute("max",f.max),void 0!==f.min&&D.setAttribute("min",f.min),void 0!==f.step&&D.setAttribute("step",f.step),D.style.padding="4px",D.style.width="100%",D.style.boxSizing="border-box",f.elementAttributes&&"object"==typeof f.elementAttributes)for(let K in f.elementAttributes)"+"==K.charAt(0)?(K=K.slice(1),D.setAttribute(K,D.getAttribute(K)+f.elementAttributes["+"+K])):D.setAttribute(K,f.elementAttributes[K]);D.value=_;var A=function(K){F()};function F(){var K=D.value;!isNaN(K)&&""!==K&&(K=Number(K)),K!==_?s(K)&&(_=K):u()}return d(function(){D.removeEventListener("blur",A),D.focus({preventScroll:!0}),D.style.height="100%",D.addEventListener("blur",A)}),D.addEventListener("keydown",function(K){switch(K.keyCode){case 13:F();break;case 27:u();break;case 38:case 40:"editor"==C&&(K.stopImmediatePropagation(),K.stopPropagation());break;case 35:case 36:K.stopPropagation()}}),f.mask&&Th(D,f),D},range:function(m,d,s,u,f){var _=m.getValue(),C=document.createElement("input");if(C.setAttribute("type","range"),void 0!==f.max&&C.setAttribute("max",f.max),void 0!==f.min&&C.setAttribute("min",f.min),void 0!==f.step&&C.setAttribute("step",f.step),C.style.padding="4px",C.style.width="100%",C.style.boxSizing="border-box",f.elementAttributes&&"object"==typeof f.elementAttributes)for(let A in f.elementAttributes)"+"==A.charAt(0)?(A=A.slice(1),C.setAttribute(A,C.getAttribute(A)+f.elementAttributes["+"+A])):C.setAttribute(A,f.elementAttributes[A]);function D(){var A=C.value;!isNaN(A)&&""!==A&&(A=Number(A)),A!=_?s(A)&&(_=A):u()}return C.value=_,d(function(){C.focus({preventScroll:!0}),C.style.height="100%"}),C.addEventListener("blur",function(A){D()}),C.addEventListener("keydown",function(A){switch(A.keyCode){case 13:D();break;case 27:u()}}),C},select:function(m,d,s,u,f){var _=this,C=m.getElement(),D=m.getValue(),A=f.verticalNavigation||"editor",F=void 0!==D||null===D?Array.isArray(D)?D:[D]:void 0!==f.defaultValue?f.defaultValue:[],K=document.createElement("input"),ut=document.createElement("div"),It=f.multiselect,Vt=[],ee={},he=[],ve=[],De=!0,si=!1,Wi="",Ri=null;function Si(Bi){var Ir,mn={},ts=_.table.getData();return(Ir=Bi?_.table.columnManager.getColumnByField(Bi):m.getColumn()._getSelf())?ts.forEach(function(S){var N=Ir.getFieldValue(S);null!=N&&""!==N&&(mn[N]=!0)}):console.warn("unable to find matching column to create select lookup list:",Bi),Object.keys(mn)}function nn(Bi,mn){!It&&ee&&ee.element&&ee.element.classList.remove("active"),ee&&ee.element&&ee.element.classList.remove("focused"),ee=Bi,Bi.element&&(Bi.element.classList.add("focused"),mn&&Bi.element.classList.add("active")),Bi&&Bi.element&&Bi.element.scrollIntoView&&Bi.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}function ln(Bi){-1==ve.indexOf(Bi)&&(ve.push(Bi),nn(Bi,!0)),Hi()}function Kn(Bi){var mn=ve[Bi];Bi>-1&&(ve.splice(Bi,1),mn.element&&mn.element.classList.remove("active"))}function rn(Bi){Bi||(Bi=ee);var mn=ve.indexOf(Bi);mn>-1?Kn(mn):(!0!==It&&ve.length>=It&&Kn(0),ln(Bi)),Hi()}function $n(Bi){fo(),Bi||(Bi=ee),Bi&&(K.value=Bi.label,s(Bi.value)),F=[Bi.value]}function Ho(Bi){Bi||fo();var mn=[];ve.forEach(ts=>{mn.push(ts.value)}),F=mn,s(mn)}function Hi(){var Bi=[];ve.forEach(mn=>{Bi.push(mn.label)}),K.value=Bi.join(", "),!1===_.currentCell&&Ho(!0)}function Nn(){fo(),u()}function fo(){ut.parentNode&&ut.parentNode.removeChild(ut),_.table.rowManager.element.removeEventListener("scroll",Nn)}if((Array.isArray(f)||!Array.isArray(f)&&"object"==typeof f&&!f.values)&&(console.warn("DEPRECATION WARNING - values for the select editor must now be passed into the values property of the editorParams object, not as the editorParams object"),f={values:f}),K.setAttribute("type","text"),K.style.padding="4px",K.style.width="100%",K.style.boxSizing="border-box",K.style.cursor="default",K.readOnly=0!=this.currentCell,f.elementAttributes&&"object"==typeof f.elementAttributes)for(let Bi in f.elementAttributes)"+"==Bi.charAt(0)?(Bi=Bi.slice(1),K.setAttribute(Bi,K.getAttribute(Bi)+f.elementAttributes["+"+Bi])):K.setAttribute(Bi,f.elementAttributes[Bi]);return K.value=void 0!==D||null===D?D:"",K.addEventListener("search",function(Bi){K.value||(function(){var Bi=ve.length;for(let mn=0;mn<Bi;mn++)Kn(0)}(),Ho())}),K.addEventListener("keydown",function(Bi){var mn;switch(Bi.keyCode){case 38:mn=Vt.indexOf(ee),("editor"==A||"hybrid"==A&&mn)&&(Bi.stopImmediatePropagation(),Bi.stopPropagation(),Bi.preventDefault(),mn>0&&nn(Vt[mn-1],!It));break;case 40:mn=Vt.indexOf(ee),("editor"==A||"hybrid"==A&&mn<Vt.length-1)&&(Bi.stopImmediatePropagation(),Bi.stopPropagation(),Bi.preventDefault(),mn<Vt.length-1&&nn(-1==mn?Vt[0]:Vt[mn+1],!It));break;case 37:case 39:Bi.stopImmediatePropagation(),Bi.stopPropagation(),Bi.preventDefault();break;case 13:It?rn():$n();break;case 27:Nn();break;case 9:break;default:!1===_.currentCell&&Bi.preventDefault(),Bi.keyCode>=38&&Bi.keyCode<=90&&function(Bi){clearTimeout(Ri);var mn=String.fromCharCode(event.keyCode).toLowerCase();Wi+=mn.toLowerCase();var ts=Vt.find(Ir=>void 0!==Ir.label&&Ir.label.toLowerCase().startsWith(Wi));ts&&nn(ts,!It),Ri=setTimeout(()=>{Wi=""},800)}()}}),K.addEventListener("blur",function(Bi){De&&(It?Ho():Nn())}),K.addEventListener("focus",function(Bi){si||function(){if(ve=[],!ut.parentNode){!function(Bi,mn){var ts=[],Ir=[];function S(y){return mn.indexOf((y={label:y.label,value:y.value,itemParams:y.itemParams,elementAttributes:y.elementAttributes,element:!1}).value)>-1&&ln(y),ts.push(y),Ir.push(y),y}if("function"==typeof Bi&&(Bi=Bi(m)),Array.isArray(Bi))Bi.forEach(function(y){var O;"object"==typeof y?y.options?(Ir.push(O={label:y.label,group:!0,itemParams:y.itemParams,elementAttributes:y.elementAttributes,element:!1}),y.options.forEach(function(z){S(z)})):S(y):(mn.indexOf((O={label:y,value:y,element:!1}).value)>-1&&ln(O),ts.push(O),Ir.push(O))});else for(var N in Bi){var h={label:Bi[N],value:N,element:!1};mn.indexOf(h.value)>-1&&ln(h),ts.push(h),Ir.push(h)}f.sortValuesList&&(ts.sort((y,O)=>y.label<O.label?-1:y.label>O.label?1:0),Ir.sort((y,O)=>y.label<O.label?-1:y.label>O.label?1:0),"asc"!==f.sortValuesList&&(ts.reverse(),Ir.reverse())),Vt=ts,he=Ir,function(){for(;ut.firstChild;)ut.removeChild(ut.firstChild);he.forEach(function(Bi){var mn=Bi.element;if(!mn){if(mn=document.createElement("div"),Bi.label=f.listItemFormatter?f.listItemFormatter(Bi.value,Bi.label,m,mn,Bi.itemParams):Bi.label,Bi.group?(mn.classList.add("tabulator-edit-select-list-group"),mn.tabIndex=0,mn.innerHTML=""===Bi.label?"&nbsp;":Bi.label):(mn.classList.add("tabulator-edit-select-list-item"),mn.tabIndex=0,mn.innerHTML=""===Bi.label?"&nbsp;":Bi.label,mn.addEventListener("click",function(){si=!0,setTimeout(()=>{si=!1},10),It?(rn(Bi),K.focus()):$n(Bi)}),ve.indexOf(Bi)>-1&&mn.classList.add("active")),Bi.elementAttributes&&"object"==typeof Bi.elementAttributes)for(let ts in Bi.elementAttributes)"+"==ts.charAt(0)?(ts=ts.slice(1),mn.setAttribute(ts,K.getAttribute(ts)+Bi.elementAttributes["+"+ts])):mn.setAttribute(ts,Bi.elementAttributes[ts]);mn.addEventListener("mousedown",function(){De=!1,setTimeout(function(){De=!0},10)}),Bi.element=mn}ut.appendChild(mn)})}()}(!0===f.values?Si():"string"==typeof f.values?Si(f.values):f.values||[],F);var Bi=Ei.elOffset(C);ut.style.minWidth=C.offsetWidth+"px",ut.style.top=Bi.top+C.offsetHeight+"px",ut.style.left=Bi.left+"px",ut.addEventListener("mousedown",function(mn){De=!1,setTimeout(function(){De=!0},10)}),document.body.appendChild(ut)}}()}),(ut=document.createElement("div")).classList.add("tabulator-edit-select-list"),d(function(){K.style.height="100%",K.focus({preventScroll:!0})}),setTimeout(()=>{this.table.rowManager.element.addEventListener("scroll",Nn)},10),K},autocomplete:function(m,d,s,u,f){var _=this,C=m.getElement(),D=m.getValue(),A=f.verticalNavigation||"editor",F=void 0!==D||null===D?D:void 0!==f.defaultValue?f.defaultValue:"",K=document.createElement("input"),ut=document.createElement("div"),It=[],Vt=!1,ee=!0,he=!1;if(K.setAttribute("type","search"),K.style.padding="4px",K.style.width="100%",K.style.boxSizing="border-box",f.elementAttributes&&"object"==typeof f.elementAttributes)for(let Hi in f.elementAttributes)"+"==Hi.charAt(0)?(Hi=Hi.slice(1),K.setAttribute(Hi,K.getAttribute(Hi)+f.elementAttributes["+"+Hi])):K.setAttribute(Hi,f.elementAttributes[Hi]);function ve(){!0===f.values?he=De():"string"==typeof f.values&&(he=De(f.values))}function De(Hi){var vo,qi={},Nn=_.table.getData();return(vo=Hi?_.table.columnManager.getColumnByField(Hi):m.getColumn()._getSelf())?(Nn.forEach(function(fo){var zo=vo.getFieldValue(fo);null!=zo&&""!==zo&&(qi[zo]=!0)}),qi=f.sortValuesList?"asc"==f.sortValuesList?Object.keys(qi).sort():Object.keys(qi).sort().reverse():Object.keys(qi)):console.warn("unable to find matching column to create autocomplete lookup list:",Hi),qi}function si(Hi,qi){var vo,fo,Nn=[];vo=he||f.values||[],f.searchFunc?(Nn=f.searchFunc(Hi,vo))instanceof Promise?(Wi(void 0!==f.searchingPlaceholder?f.searchingPlaceholder:"Searching..."),Nn.then(zo=>{Ki(Ri(zo),qi)}).catch(zo=>{console.err("error in autocomplete search promise:",zo)})):Ki(Ri(Nn),qi):(fo=Ri(vo),""===Hi?f.showListOnEmpty&&(Nn=fo):fo.forEach(function(zo){(null!==zo.value||void 0!==zo.value)&&(String(zo.value).toLowerCase().indexOf(String(Hi).toLowerCase())>-1||String(zo.title).toLowerCase().indexOf(String(Hi).toLowerCase())>-1)&&Nn.push(zo)}),Ki(Nn,qi))}function Wi(Hi){var qi=document.createElement("div");Si(),!1!==Hi&&(qi.classList.add("tabulator-edit-select-list-notice"),qi.tabIndex=0,Hi instanceof Node?qi.appendChild(Hi):qi.innerHTML=Hi,ut.appendChild(qi))}function Ri(Hi){var qi=[];if(Array.isArray(Hi))Hi.forEach(function(fo){var zo={};"object"==typeof fo?(zo.title=f.listItemFormatter?f.listItemFormatter(fo.value,fo.label):fo.label,zo.value=fo.value):(zo.title=f.listItemFormatter?f.listItemFormatter(fo,fo):fo,zo.value=fo),qi.push(zo)});else for(var Nn in Hi){var vo={title:f.listItemFormatter?f.listItemFormatter(Nn,Hi[Nn]):Hi[Nn],value:Nn};qi.push(vo)}return qi}function Si(){for(;ut.firstChild;)ut.removeChild(ut.firstChild)}function Ki(Hi,qi){Hi.length?function(Hi,qi){var Nn=!1;Si(),(It=Hi).forEach(function(vo){var fo=vo.element;fo||((fo=document.createElement("div")).classList.add("tabulator-edit-select-list-item"),fo.tabIndex=0,fo.innerHTML=vo.title,fo.addEventListener("click",function(zo){Kn(vo),nn()}),fo.addEventListener("mousedown",function(zo){ee=!1,setTimeout(function(){ee=!0},10)}),vo.element=fo,qi&&vo.value==D&&(K.value=vo.title,vo.element.classList.add("active"),Nn=!0),vo===Vt&&(vo.element.classList.add("active"),Nn=!0)),ut.appendChild(fo)}),Nn||Kn(!1)}(Hi,qi):f.emptyPlaceholder&&Wi(f.emptyPlaceholder)}function nn(){rn(),Vt?D!==Vt.value?(D=Vt.value,K.value=Vt.title,s(Vt.value)):u():f.freetext||f.allowEmpty&&""===K.value?(D=K.value,s(K.value)):u()}function Kn(Hi,qi){Vt&&Vt.element&&Vt.element.classList.remove("active"),Vt=Hi,Hi&&Hi.element&&Hi.element.classList.add("active"),Hi&&Hi.element&&Hi.element.scrollIntoView&&Hi.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}function rn(){ut.parentNode&&ut.parentNode.removeChild(ut),_.table.rowManager.element.removeEventListener("scroll",$n)}function $n(){rn(),u()}return ut.classList.add("tabulator-edit-select-list"),ut.addEventListener("mousedown",function(Hi){ee=!1,setTimeout(function(){ee=!0},10)}),K.addEventListener("keydown",function(Hi){var qi;switch(Hi.keyCode){case 38:qi=It.indexOf(Vt),("editor"==A||"hybrid"==A&&qi)&&(Hi.stopImmediatePropagation(),Hi.stopPropagation(),Hi.preventDefault(),Kn(qi>0&&It[qi-1]));break;case 40:qi=It.indexOf(Vt),("editor"==A||"hybrid"==A&&qi<It.length-1)&&(Hi.stopImmediatePropagation(),Hi.stopPropagation(),Hi.preventDefault(),qi<It.length-1&&Kn(-1==qi?It[0]:It[qi+1]));break;case 37:case 39:Hi.stopImmediatePropagation(),Hi.stopPropagation();break;case 13:nn();break;case 27:$n();break;case 36:case 35:Hi.stopImmediatePropagation()}}),K.addEventListener("keyup",function(Hi){switch(Hi.keyCode){case 38:case 37:case 39:case 40:case 13:case 27:break;default:si(K.value)}}),K.addEventListener("search",function(Hi){si(K.value)}),K.addEventListener("blur",function(Hi){ee&&nn()}),K.addEventListener("focus",function(Hi){var qi=F;ve(),function(){if(!ut.parentNode){for(;ut.firstChild;)ut.removeChild(ut.firstChild);var Hi=Ei.elOffset(C);ut.style.minWidth=C.offsetWidth+"px",ut.style.top=Hi.top+C.offsetHeight+"px",ut.style.left=Hi.left+"px",document.body.appendChild(ut)}}(),K.value=qi,si(qi,!0)}),d(function(){K.style.height="100%",K.focus({preventScroll:!0})}),f.mask&&Th(K,f),setTimeout(()=>{this.table.rowManager.element.addEventListener("scroll",$n)},10),ve(),K.value=F,si(F,!0),K},star:function(m,d,s,u,f){var _=this,C=m.getElement(),D=m.getValue(),A=C.getElementsByTagName("svg").length||5,F=C.getElementsByTagName("svg")[0]?C.getElementsByTagName("svg")[0].getAttribute("width"):14,K=[],ut=document.createElement("div"),It=document.createElementNS("http://www.w3.org/2000/svg","svg");function Vt(De){K.forEach(function(si,Wi){Wi<De?("ie"==_.table.browser?si.setAttribute("class","tabulator-star-active"):si.classList.replace("tabulator-star-inactive","tabulator-star-active"),si.innerHTML='<polygon fill="#488CE9" stroke="#014AAE" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>'):("ie"==_.table.browser?si.setAttribute("class","tabulator-star-inactive"):si.classList.replace("tabulator-star-active","tabulator-star-inactive"),si.innerHTML='<polygon fill="#010155" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>')})}function ee(De){var si=document.createElement("span"),Wi=It.cloneNode(!0);K.push(Wi),si.addEventListener("mouseenter",function(Ri){Ri.stopPropagation(),Ri.stopImmediatePropagation(),Vt(De)}),si.addEventListener("mousemove",function(Ri){Ri.stopPropagation(),Ri.stopImmediatePropagation()}),si.addEventListener("click",function(Ri){Ri.stopPropagation(),Ri.stopImmediatePropagation(),s(De),C.blur()}),si.appendChild(Wi),ut.appendChild(si)}function he(De){D=De,Vt(De)}if(C.style.whiteSpace="nowrap",C.style.overflow="hidden",C.style.textOverflow="ellipsis",ut.style.verticalAlign="middle",ut.style.display="inline-block",ut.style.padding="4px",It.setAttribute("width",F),It.setAttribute("height",F),It.setAttribute("viewBox","0 0 512 512"),It.setAttribute("xml:space","preserve"),It.style.padding="0 1px",f.elementAttributes&&"object"==typeof f.elementAttributes)for(let De in f.elementAttributes)"+"==De.charAt(0)?(De=De.slice(1),ut.setAttribute(De,ut.getAttribute(De)+f.elementAttributes["+"+De])):ut.setAttribute(De,f.elementAttributes[De]);for(var ve=1;ve<=A;ve++)ee(ve);return Vt(D=Math.min(parseInt(D),A)),ut.addEventListener("mousemove",function(De){Vt(0)}),ut.addEventListener("click",function(De){s(0)}),C.addEventListener("blur",function(De){u()}),C.addEventListener("keydown",function(De){switch(De.keyCode){case 39:he(D+1);break;case 37:he(D-1);break;case 13:s(D);break;case 27:u()}}),ut},progress:function(m,d,s,u,f){var he,ve,It,Vt,_=m.getElement(),C=void 0===f.max?(null==(he=_.getElementsByTagName("div")[0])?void 0:he.getAttribute("max"))||100:f.max,D=void 0===f.min?(null==(ve=_.getElementsByTagName("div")[0])?void 0:ve.getAttribute("min"))||0:f.min,A=(C-D)/100,F=m.getValue()||0,K=document.createElement("div"),ut=document.createElement("div");function ee(){var De=window.getComputedStyle(_,null),si=A*Math.round(ut.offsetWidth/((_.clientWidth-parseInt(De.getPropertyValue("padding-left"))-parseInt(De.getPropertyValue("padding-right")))/100))+D;s(si),_.setAttribute("aria-valuenow",si),_.setAttribute("aria-label",F)}if(K.style.position="absolute",K.style.right="0",K.style.top="0",K.style.bottom="0",K.style.width="5px",K.classList.add("tabulator-progress-handle"),ut.style.display="inline-block",ut.style.position="relative",ut.style.height="100%",ut.style.backgroundColor="#488CE9",ut.style.maxWidth="100%",ut.style.minWidth="0%",f.elementAttributes&&"object"==typeof f.elementAttributes)for(let De in f.elementAttributes)"+"==De.charAt(0)?(De=De.slice(1),ut.setAttribute(De,ut.getAttribute(De)+f.elementAttributes["+"+De])):ut.setAttribute(De,f.elementAttributes[De]);return _.style.padding="4px 4px",F=Math.min(parseFloat(F),C),F=Math.max(parseFloat(F),D),F=Math.round((F-D)/A),ut.style.width=F+"%",_.setAttribute("aria-valuemin",D),_.setAttribute("aria-valuemax",C),ut.appendChild(K),K.addEventListener("mousedown",function(De){It=De.screenX,Vt=ut.offsetWidth}),K.addEventListener("mouseover",function(){K.style.cursor="ew-resize"}),_.addEventListener("mousemove",function(De){It&&(ut.style.width=Vt+De.screenX-It+"px")}),_.addEventListener("mouseup",function(De){It&&(De.stopPropagation(),De.stopImmediatePropagation(),It=!1,Vt=!1,ee())}),_.addEventListener("keydown",function(De){switch(De.keyCode){case 39:De.preventDefault(),ut.style.width=ut.clientWidth+_.clientWidth/100+"px";break;case 37:De.preventDefault(),ut.style.width=ut.clientWidth-_.clientWidth/100+"px";break;case 9:case 13:ee();break;case 27:u()}}),_.addEventListener("blur",function(){u()}),ut},tickCross:function(m,d,s,u,f){var _=m.getValue(),C=document.createElement("input"),D=f.tristate,A=void 0===f.indeterminateValue?null:f.indeterminateValue,F=!1;if(C.setAttribute("type","checkbox"),C.style.marginTop="5px",C.style.boxSizing="border-box",f.elementAttributes&&"object"==typeof f.elementAttributes)for(let ut in f.elementAttributes)"+"==ut.charAt(0)?(ut=ut.slice(1),C.setAttribute(ut,C.getAttribute(ut)+f.elementAttributes["+"+ut])):C.setAttribute(ut,f.elementAttributes[ut]);function K(ut){return D?ut?F?A:C.checked:C.checked&&!F?(C.checked=!1,C.indeterminate=!0,F=!0,A):(F=!1,C.checked):C.checked}return C.value=_,D&&(void 0===_||_===A||""===_)&&(F=!0,C.indeterminate=!0),"firefox"!=this.table.browser&&d(function(){C.focus({preventScroll:!0})}),C.checked=!0===_||"true"===_||"True"===_||1===_,d(function(){C.focus()}),C.addEventListener("change",function(ut){s(K())}),C.addEventListener("blur",function(ut){s(K(!0))}),C.addEventListener("keydown",function(ut){13==ut.keyCode&&s(K()),27==ut.keyCode&&u()}),C}};let Mf=(()=>{class m extends Fi{constructor(s){super(s),this.currentCell=!1,this.mouseClick=!1,this.recursionBlock=!1,this.invalidEdit=!1,this.editedCells=[],this.editors=m.editors,this.registerColumnOption("editable"),this.registerColumnOption("editor"),this.registerColumnOption("editorParams"),this.registerColumnOption("cellEditing"),this.registerColumnOption("cellEdited"),this.registerColumnOption("cellEditCancelled"),this.registerTableFunction("getEditedCells",this.getEditedCells.bind(this)),this.registerTableFunction("clearCellEdited",this.clearCellEdited.bind(this)),this.registerTableFunction("navigatePrev",this.navigatePrev.bind(this)),this.registerTableFunction("navigateNext",this.navigateNext.bind(this)),this.registerTableFunction("navigateLeft",this.navigateLeft.bind(this)),this.registerTableFunction("navigateRight",this.navigateRight.bind(this)),this.registerTableFunction("navigateUp",this.navigateUp.bind(this)),this.registerTableFunction("navigateDown",this.navigateDown.bind(this)),this.registerComponentFunction("cell","isEdited",this.cellisEdited.bind(this)),this.registerComponentFunction("cell","clearEdited",this.clearEdited.bind(this)),this.registerComponentFunction("cell","edit",this.editCell.bind(this)),this.registerComponentFunction("cell","cancelEdit",this.cellCancelEdit.bind(this)),this.registerComponentFunction("cell","navigatePrev",this.navigatePrev.bind(this)),this.registerComponentFunction("cell","navigateNext",this.navigateNext.bind(this)),this.registerComponentFunction("cell","navigateLeft",this.navigateLeft.bind(this)),this.registerComponentFunction("cell","navigateRight",this.navigateRight.bind(this)),this.registerComponentFunction("cell","navigateUp",this.navigateUp.bind(this)),this.registerComponentFunction("cell","navigateDown",this.navigateDown.bind(this))}initialize(){this.subscribe("cell-init",this.bindEditor.bind(this)),this.subscribe("cell-delete",this.clearEdited.bind(this)),this.subscribe("column-layout",this.initializeColumnCheck.bind(this)),this.subscribe("column-delete",this.columnDeleteCheck.bind(this)),this.subscribe("row-deleting",this.rowDeleteCheck.bind(this)),this.subscribe("data-refeshing",this.cancelEdit.bind(this)),this.subscribe("keybinding-nav-prev",this.navigatePrev.bind(this)),this.subscribe("keybinding-nav-next",this.keybindingNavigateNext.bind(this)),this.subscribe("keybinding-nav-left",this.navigateLeft.bind(this)),this.subscribe("keybinding-nav-right",this.navigateRight.bind(this)),this.subscribe("keybinding-nav-up",this.navigateUp.bind(this)),this.subscribe("keybinding-nav-down",this.navigateDown.bind(this))}keybindingNavigateNext(s){var u=this.currentCell,f=this.options("tabEndNewRow");u&&(this.navigateNext(s)||f&&(u.getElement().firstChild.blur(),(f=this.table.addRow(!0===f?{}:"function"==typeof f?f(u.row.getComponent()):Object.assign({},f))).then(()=>{setTimeout(()=>{nav.next()})})))}cellisEdited(s){return!!s.modules.edit&&s.modules.edit.edited}cellCancelEdit(s){s===this.currentCell?this.table.modules.edit.cancelEdit():console.warn("Cancel Editor Error - This cell is not currently being edited ")}clearCellEdited(s){s||(s=this.modules.edit.getEditedCells()),Array.isArray(s)||(s=[s]),s.forEach(u=>{this.modules.edit.clearEdited(u._getSelf())})}navigatePrev(s){var f,_,u=this.currentCell;if(u){if(s&&s.preventDefault(),f=this.navigateLeft())return!0;if((_=this.table.rowManager.prevDisplayRow(u.row,!0))&&(f=this.findNextEditableCell(_,_.cells.length)))return f.getComponent().edit(),!0}return!1}navigateNext(s){var f,_,u=this.currentCell;if(u){if(s&&s.preventDefault(),f=this.navigateRight())return!0;if((_=this.table.rowManager.nextDisplayRow(u.row,!0))&&(f=this.findNextEditableCell(_,-1)))return f.getComponent().edit(),!0}return!1}navigateLeft(s){var f,_,u=this.currentCell;return!(!u||(s&&s.preventDefault(),f=u.getIndex(),_=this.findPrevEditableCell(u.row,f),!_)||(_.getComponent().edit(),0))}navigateRight(s){var f,_,u=this.currentCell;return!(!u||(s&&s.preventDefault(),f=u.getIndex(),_=this.findNextEditableCell(u.row,f),!_)||(_.getComponent().edit(),0))}navigateUp(s){var f,_,u=this.currentCell;return!(!u||(s&&s.preventDefault(),f=u.getIndex(),_=this.table.rowManager.prevDisplayRow(u.row,!0),!_)||(_.cells[f].getComponent().edit(),0))}navigateDown(s){var f,_,u=this.currentCell;return!(!u||(s&&s.preventDefault(),f=u.getIndex(),_=this.table.rowManager.nextDisplayRow(u.row,!0),!_)||(_.cells[f].getComponent().edit(),0))}findNextEditableCell(s,u){var f=!1;if(u<s.cells.length-1)for(var _=u+1;_<s.cells.length;_++){let C=s.cells[_];if(C.column.modules.edit&&Ei.elVisible(C.getElement())){let D=!0;if("function"==typeof C.column.modules.edit.check&&(D=C.column.modules.edit.check(C.getComponent())),D){f=C;break}}}return f}findPrevEditableCell(s,u){var f=!1;if(u>0)for(var _=u-1;_>=0;_--){let C=s.cells[_],D=!0;if(C.column.modules.edit&&Ei.elVisible(C.getElement())&&("function"==typeof C.column.modules.edit.check&&(D=C.column.modules.edit.check(C.getComponent())),D)){f=C;break}}return f}initializeColumnCheck(s){void 0!==s.definition.editor&&this.initializeColumn(s)}columnDeleteCheck(s){this.currentCell&&this.currentCell.column===s&&this.cancelEdit()}rowDeleteCheck(s){this.currentCell&&this.currentCell.row===s&&this.cancelEdit()}initializeColumn(s){var u={editor:!1,blocked:!1,check:s.definition.editable,params:s.definition.editorParams||{}};switch(typeof s.definition.editor){case"string":this.editors[s.definition.editor]?u.editor=this.editors[s.definition.editor]:console.warn("Editor Error - No such editor found: ",s.definition.editor);break;case"function":u.editor=s.definition.editor;break;case"boolean":!0===s.definition.editor&&("function"!=typeof s.definition.formatter?u.editor=this.editors[s.definition.formatter]?this.editors[s.definition.formatter]:this.editors.input:console.warn("Editor Error - Cannot auto lookup editor for a custom formatter: ",s.definition.formatter))}u.editor&&(s.modules.edit=u)}getCurrentCell(){return!!this.currentCell&&this.currentCell.getComponent()}clearEditor(s){var f,u=this.currentCell;if(this.invalidEdit=!1,u){for(this.currentCell=!1,f=u.getElement(),s?u.validate&&u.validate():f.classList.remove("tabulator-validation-fail"),f.classList.remove("tabulator-editing");f.firstChild;)f.removeChild(f.firstChild);u.row.getElement().classList.remove("tabulator-row-editing")}}cancelEdit(){if(this.currentCell){var s=this.currentCell,u=this.currentCell.getComponent();this.clearEditor(!0),s.setValueActual(s.getValue()),s.cellRendered(),("textarea"==s.column.definition.editor||s.column.definition.variableHeight)&&s.row.normalizeHeight(!0),s.column.definition.cellEditCancelled&&s.column.definition.cellEditCancelled.call(this.table,u),this.dispatchExternal("cellEditCancelled",u)}}bindEditor(s){if(s.column.modules.edit){var u=this,f=s.getElement(!0);f.setAttribute("tabindex",0),f.addEventListener("click",function(_){f.classList.contains("tabulator-editing")||f.focus({preventScroll:!0})}),f.addEventListener("mousedown",function(_){2===_.button?_.preventDefault():u.mouseClick=!0}),f.addEventListener("focus",function(_){u.recursionBlock||u.edit(s,_,!1)})}}focusCellNoEvent(s,u){this.recursionBlock=!0,u&&"ie"===this.table.browser||s.getElement().focus({preventScroll:!0}),this.recursionBlock=!1}editCell(s,u){this.focusCellNoEvent(s),this.edit(s,!1,u)}focusScrollAdjust(s){if("virtual"==this.table.rowManager.getRenderMode()){var u=this.table.rowManager.element.scrollTop,f=this.table.rowManager.element.clientHeight+this.table.rowManager.element.scrollTop,_=s.row.getElement();_.offsetTop<u?this.table.rowManager.element.scrollTop-=u-_.offsetTop:_.offsetTop+_.offsetHeight>f&&(this.table.rowManager.element.scrollTop+=_.offsetTop+_.offsetHeight-f);var D=this.table.rowManager.element.scrollLeft,A=this.table.rowManager.element.clientWidth+this.table.rowManager.element.scrollLeft,F=s.getElement();this.table.modExists("frozenColumns")&&(D+=parseInt(this.table.modules.frozenColumns.leftMargin),A-=parseInt(this.table.modules.frozenColumns.rightMargin)),"virtual"===this.table.options.renderHorizontal&&(D-=parseInt(this.table.columnManager.renderer.vDomPadLeft),A-=parseInt(this.table.columnManager.renderer.vDomPadLeft)),F.offsetLeft<D?this.table.rowManager.element.scrollLeft-=D-F.offsetLeft:F.offsetLeft+F.offsetWidth>A&&(this.table.rowManager.element.scrollLeft+=F.offsetLeft+F.offsetWidth-A)}}edit(s,u,f){var F,K,ut,_=this,C=!0,D=function(){},A=s.getElement();if(!this.currentCell){if(s.column.modules.edit.blocked)return this.mouseClick=!1,A.blur(),!1;switch(u&&u.stopPropagation(),typeof s.column.modules.edit.check){case"function":C=s.column.modules.edit.check(s.getComponent());break;case"boolean":C=s.column.modules.edit.check}if(C||f){if(_.cancelEdit(),_.currentCell=s,this.focusScrollAdjust(s),K=s.getComponent(),this.mouseClick&&(this.mouseClick=!1,s.column.definition.cellClick&&s.column.definition.cellClick.call(this.table,u,K)),s.column.definition.cellEditing&&s.column.definition.cellEditing.call(this.table,K),this.dispatchExternal("cellEditing",K),ut="function"==typeof s.column.modules.edit.params?s.column.modules.edit.params(K):s.column.modules.edit.params,!1===(F=s.column.modules.edit.editor.call(_,K,function(De){D=De},function(De){if(_.currentCell===s){var si=!0;return s.column.modules.validate&&_.table.modExists("validate")&&"manual"!=_.table.options.validationMode&&(si=_.table.modules.validate.validate(s.column.modules.validate,s,De)),!0===si||"highlight"===_.table.options.validationMode?(_.clearEditor(),s.modules.edit||(s.modules.edit={}),s.modules.edit.edited=!0,-1==_.editedCells.indexOf(s)&&_.editedCells.push(s),s.setValue(De,!0),_.table.options.dataTree&&_.table.modExists("dataTree")&&_.table.modules.dataTree.checkForRestyle(s),!0===si||(A.classList.add("tabulator-validation-fail"),_.table.externalEvents.dispatch("validationFailed",s.getComponent(),De,si),!1)):(_.invalidEdit=!0,A.classList.add("tabulator-validation-fail"),_.focusCellNoEvent(s,!0),D(),_.table.externalEvents.dispatch("validationFailed",s.getComponent(),De,si),!1)}},function(){_.currentCell===s&&(_.cancelEdit(),_.table.options.dataTree&&_.table.modExists("dataTree")&&_.table.modules.dataTree.checkForRestyle(s))},ut)))return A.blur(),!1;if(!(F instanceof Node))return console.warn("Edit Error - Editor should return an instance of Node, the editor returned:",F),A.blur(),!1;for(A.classList.add("tabulator-editing"),s.row.getElement().classList.add("tabulator-row-editing");A.firstChild;)A.removeChild(A.firstChild);A.appendChild(F),D();for(var he=A.children,ve=0;ve<he.length;ve++)he[ve].addEventListener("click",function(De){De.stopPropagation()});return!0}return this.mouseClick=!1,A.blur(),!1}this.invalidEdit||this.cancelEdit()}getEditedCells(){var s=[];return this.editedCells.forEach(u=>{s.push(u.getComponent())}),s}clearEdited(s){var u;s.modules.edit&&s.modules.edit.edited&&(s.modules.edit.edited=!1,s.modules.validate&&(s.modules.validate.invalid=!1)),(u=this.editedCells.indexOf(s))>-1&&this.editedCells.splice(u,1)}}return m.moduleName="edit",m.editors=If,m})();class Ep{constructor(d,s,u,f){this.type=d,this.columns=s,this.component=u||!1,this.indent=f||0}}class Un{constructor(d,s,u,f,_){this.value=d,this.component=s||!1,this.width=u,this.height=f,this.depth=_}}let Tp=(()=>{class m extends Fi{constructor(s){super(s),this.config={},this.cloneTableStyle=!0,this.colVisProp="",this.registerTableOption("htmlOutputConfig",!1),this.registerColumnOption("htmlOutput"),this.registerColumnOption("titleHtmlOutput")}initialize(){this.registerTableFunction("getHtml",this.getHtml.bind(this))}generateExportList(s,u,f,_){this.cloneTableStyle=u,this.config=s||{},this.colVisProp=_;var C=!1!==this.config.columnHeaders?this.headersToExportRows(this.generateColumnGroupHeaders()):[],D=this.bodyToExportRows(this.rowLookup(f));return C.concat(D)}genereateTable(s,u,f,_){var C=this.generateExportList(s,u,f,_);return this.genereateTableElement(C)}rowLookup(s){var u=[];if("function"==typeof s)s.call(this.table).forEach(f=>{(f=this.table.rowManager.findRow(f))&&u.push(f)});else switch(s){case!0:case"visible":u=this.table.rowManager.getVisibleRows(!0);break;case"all":u=this.table.rowManager.rows;break;case"selected":u=this.table.modules.selectRow.selectedRows;break;case"active":default:u=this.table.options.pagination?this.table.rowManager.getDisplayRows(this.table.rowManager.displayRows.length-2):this.table.rowManager.getDisplayRows()}return Object.assign([],u)}generateColumnGroupHeaders(){var s=[];return(!1!==this.config.columnGroups?this.table.columnManager.columns:this.table.columnManager.columnsByIndex).forEach(f=>{var _=this.processColumnGroup(f);_&&s.push(_)}),s}processColumnGroup(s){var u=s.columns,f=0,C={title:s.definition["title"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))]||s.definition.title,column:s,depth:1};if(u.length){if(C.subGroups=[],C.width=0,u.forEach(D=>{var A=this.processColumnGroup(D);A&&(C.width+=A.width,C.subGroups.push(A),A.depth>f&&(f=A.depth))}),C.depth+=f,!C.width)return!1}else{if(!this.columnVisCheck(s))return!1;C.width=1}return C}columnVisCheck(s){return!1!==s.definition[this.colVisProp]&&(s.visible||!s.visible&&s.definition[this.colVisProp])}headersToExportRows(s){var u=[],f=0,_=[];function C(D,A){var F=f-A;if(void 0===u[A]&&(u[A]=[]),D.height=D.subGroups?1:F-D.depth+1,u[A].push(D),D.height>1)for(let K=1;K<D.height;K++)void 0===u[A+K]&&(u[A+K]=[]),u[A+K].push(!1);if(D.width>1)for(let K=1;K<D.width;K++)u[A].push(!1);D.subGroups&&D.subGroups.forEach(function(K){C(K,A+1)})}return s.forEach(function(D){D.depth>f&&(f=D.depth)}),s.forEach(function(D){C(D,0)}),u.forEach(D=>{var A=[];D.forEach(F=>{A.push(F?new Un(F.title,F.column.getComponent(),F.width,F.height,F.depth):null)}),_.push(new Ep("header",A))}),_}bodyToExportRows(s){var u=[],f=[];return this.table.columnManager.columnsByIndex.forEach(_=>{this.columnVisCheck(_)&&u.push(_.getComponent())}),!1!==this.config.columnCalcs&&this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&s.unshift(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&s.push(this.table.modules.columnCalcs.botRow)),(s=s.filter(_=>{switch(_.type){case"group":return!1!==this.config.rowGroups;case"calc":return!1!==this.config.columnCalcs;case"row":return!(this.table.options.dataTree&&!1===this.config.dataTree&&_.modules.dataTree.parent)}return!0})).forEach((_,C)=>{var D=_.getData(this.colVisProp),A=[],F=0;switch(_.type){case"group":F=_.level,A.push(new Un(_.key,_.getComponent(),u.length,1));break;case"calc":case"row":u.forEach(K=>{A.push(new Un(K._column.getFieldValue(D),K,1,1))}),this.table.options.dataTree&&!1!==this.config.dataTree&&(F=_.modules.dataTree.index)}f.push(new Ep(_.type,A,_.getComponent(),F))}),f}genereateTableElement(s){var u=document.createElement("table"),f=document.createElement("thead"),_=document.createElement("tbody"),C=this.lookupTableStyles(),D=this.table.options["rowFormatter"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))],A={};return A.rowFormatter=null!==D?D:this.table.options.rowFormatter,this.table.options.dataTree&&!1!==this.config.dataTree&&this.table.modExists("columnCalcs")&&(A.treeElementField=this.table.modules.dataTree.elementField),A.groupHeader=this.table.options["groupHeader"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))],A.groupHeader&&!Array.isArray(A.groupHeader)&&(A.groupHeader=[A.groupHeader]),u.classList.add("tabulator-print-table"),this.mapElementStyles(this.table.columnManager.getHeadersElement(),f,["border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),s.length>1e3&&console.warn("It may take a long time to render an HTML table with more than 1000 rows"),s.forEach((F,K)=>{switch(F.type){case"header":f.appendChild(this.genereateHeaderElement(F,A,C));break;case"group":_.appendChild(this.genereateGroupElement(F,A,C));break;case"calc":_.appendChild(this.genereateCalcElement(F,A,C));break;case"row":let ut=this.genereateRowElement(F,A,C);this.mapElementStyles(K%2&&C.evenRow?C.evenRow:C.oddRow,ut,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),_.appendChild(ut)}}),f.innerHTML&&u.appendChild(f),u.appendChild(_),this.mapElementStyles(this.table.element,u,["border-top","border-left","border-right","border-bottom"]),u}lookupTableStyles(){var s={};return this.cloneTableStyle&&window.getComputedStyle&&(s.oddRow=this.table.element.querySelector(".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)"),s.evenRow=this.table.element.querySelector(".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)"),s.calcRow=this.table.element.querySelector(".tabulator-row.tabulator-calcs"),s.firstRow=this.table.element.querySelector(".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)"),s.firstGroup=this.table.element.getElementsByClassName("tabulator-group")[0],s.firstRow&&(s.styleCells=s.firstRow.getElementsByClassName("tabulator-cell"),s.firstCell=s.styleCells[0],s.lastCell=s.styleCells[s.styleCells.length-1])),s}genereateHeaderElement(s,u,f){var _=document.createElement("tr");return s.columns.forEach(C=>{if(C){var D=document.createElement("th"),A=C.component._column.definition.cssClass?C.component._column.definition.cssClass.split(" "):[];D.colSpan=C.width,D.rowSpan=C.height,D.innerHTML=C.value,this.cloneTableStyle&&(D.style.boxSizing="border-box"),A.forEach(function(F){D.classList.add(F)}),this.mapElementStyles(C.component.getElement(),D,["text-align","border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),this.mapElementStyles(C.component._column.contentElement,D,["padding-top","padding-left","padding-right","padding-bottom"]),C.component._column.visible?this.mapElementStyles(C.component.getElement(),D,["width"]):C.component._column.definition.width&&(D.style.width=C.component._column.definition.width+"px"),C.component._column.parent&&this.mapElementStyles(C.component._column.parent.groupElement,D,["border-top"]),_.appendChild(D)}}),_}genereateGroupElement(s,u,f){var _=document.createElement("tr"),C=document.createElement("td"),D=s.columns[0];return _.classList.add("tabulator-print-table-row"),D.value=u.groupHeader&&u.groupHeader[s.indent]?u.groupHeader[s.indent](D.value,s.component._group.getRowCount(),s.component._group.getData(),s.component):!1===u.groupHeader?D.value:s.component._group.generator(D.value,s.component._group.getRowCount(),s.component._group.getData(),s.component),C.colSpan=D.width,C.innerHTML=D.value,_.classList.add("tabulator-print-table-group"),_.classList.add("tabulator-group-level-"+s.indent),D.component.isVisible()&&_.classList.add("tabulator-group-visible"),this.mapElementStyles(f.firstGroup,_,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),this.mapElementStyles(f.firstGroup,C,["padding-top","padding-left","padding-right","padding-bottom"]),_.appendChild(C),_}genereateCalcElement(s,u,f){var _=this.genereateRowElement(s,u,f);return _.classList.add("tabulator-print-table-calcs"),this.mapElementStyles(f.calcRow,_,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),_}genereateRowElement(s,u,f){var _=document.createElement("tr");return _.classList.add("tabulator-print-table-row"),s.columns.forEach(C=>{if(C){var D=document.createElement("td"),A=C.component._column,F=C.value,K={modules:{},getValue:function(){return F},getField:function(){return A.definition.field},getElement:function(){return D},getColumn:function(){return A.getComponent()},getData:function(){return s.component.getData()},getRow:function(){return s.component},getComponent:function(){return K},column:A};if((A.definition.cssClass?A.definition.cssClass.split(" "):[]).forEach(function(It){D.classList.add(It)}),this.table.modExists("format")&&!1!==this.config.formatCells)F=this.table.modules.format.formatExportValue(K,this.colVisProp);else switch(typeof F){case"object":F=JSON.stringify(F);break;case"undefined":case"null":F="";break;default:F=F}F instanceof Node?D.appendChild(F):D.innerHTML=F,f.firstCell&&(this.mapElementStyles(f.firstCell,D,["padding-top","padding-left","padding-right","padding-bottom","border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size"]),A.definition.align&&(D.style.textAlign=A.definition.align)),this.table.options.dataTree&&!1!==this.config.dataTree&&(u.treeElementField&&u.treeElementField==A.field||!u.treeElementField&&0==i)&&(s.component._row.modules.dataTree.controlEl&&D.insertBefore(s.component._row.modules.dataTree.controlEl.cloneNode(!0),D.firstChild),s.component._row.modules.dataTree.branchEl&&D.insertBefore(s.component._row.modules.dataTree.branchEl.cloneNode(!0),D.firstChild)),_.appendChild(D),K.modules.format&&K.modules.format.renderedCallback&&K.modules.format.renderedCallback(),u.rowFormatter&&!1!==this.config.formatCells&&u.rowFormatter(s.component)}}),_}genereateHTMLTable(s){var u=document.createElement("div");return u.appendChild(this.genereateTableElement(s)),u.innerHTML}getHtml(s,u,f,_){var C=this.generateExportList(f||this.table.options.htmlOutputConfig,u,s,_||"htmlOutput");return this.genereateHTMLTable(C)}mapElementStyles(s,u,f){if(this.cloneTableStyle&&s&&u){var _={"background-color":"backgroundColor",color:"fontColor",width:"width","font-weight":"fontWeight","font-family":"fontFamily","font-size":"fontSize","text-align":"textAlign","border-top":"borderTop","border-left":"borderLeft","border-right":"borderRight","border-bottom":"borderBottom","padding-top":"paddingTop","padding-left":"paddingLeft","padding-right":"paddingRight","padding-bottom":"paddingBottom"};if(window.getComputedStyle){var C=window.getComputedStyle(s);f.forEach(function(D){u.style[_[D]]=C.getPropertyValue(D)})}}}}return m.moduleName="export",m})();var Cp={"=":function(m,d,s,u){return d==m},"<":function(m,d,s,u){return d<m},"<=":function(m,d,s,u){return d<=m},">":function(m,d,s,u){return d>m},">=":function(m,d,s,u){return d>=m},"!=":function(m,d,s,u){return d!=m},regex:function(m,d,s,u){return"string"==typeof m&&(m=new RegExp(m)),m.test(d)},like:function(m,d,s,u){return null==m?d===m:null!=d&&String(d).toLowerCase().indexOf(m.toLowerCase())>-1},keywords:function(m,d,s,u){var f=m.toLowerCase().split(void 0===u.separator?" ":u.separator),_=String(null==d?"":d).toLowerCase(),C=[];return f.forEach(D=>{_.includes(D)&&C.push(!0)}),u.matchAll?C.length===f.length:!!C.length},starts:function(m,d,s,u){return null==m?d===m:null!=d&&String(d).toLowerCase().startsWith(m.toLowerCase())},ends:function(m,d,s,u){return null==m?d===m:null!=d&&String(d).toLowerCase().endsWith(m.toLowerCase())},in:function(m,d,s,u){return Array.isArray(m)?!m.length||m.indexOf(d)>-1:(console.warn("Filter Error - filter value is not an array:",m),!1)}};let id=(()=>{class m extends Fi{constructor(s){super(s),this.filterList=[],this.headerFilters={},this.headerFilterColumns=[],this.prevHeaderFilterChangeCheck="",this.prevHeaderFilterChangeCheck="{}",this.changed=!1,this.tableInitialized=!1,this.registerTableOption("filterMode","local"),this.registerTableOption("initialFilter",!1),this.registerTableOption("initialHeaderFilter",!1),this.registerTableOption("headerFilterLiveFilterDelay",300),this.registerColumnOption("headerFilter"),this.registerColumnOption("headerFilterPlaceholder"),this.registerColumnOption("headerFilterParams"),this.registerColumnOption("headerFilterEmptyCheck"),this.registerColumnOption("headerFilterFunc"),this.registerColumnOption("headerFilterFuncParams"),this.registerColumnOption("headerFilterLiveFilter"),this.registerTableFunction("searchRows",this.searchRows.bind(this)),this.registerTableFunction("searchData",this.searchData.bind(this)),this.registerTableFunction("setFilter",this.userSetFilter.bind(this)),this.registerTableFunction("refreshFilter",this.userRefreshFilter.bind(this)),this.registerTableFunction("addFilter",this.userAddFilter.bind(this)),this.registerTableFunction("getFilters",this.getFilters.bind(this)),this.registerTableFunction("setHeaderFilterFocus",this.userSetHeaderFilterFocus.bind(this)),this.registerTableFunction("getHeaderFilterValue",this.userGetHeaderFilterValue.bind(this)),this.registerTableFunction("setHeaderFilterValue",this.userSetHeaderFilterValue.bind(this)),this.registerTableFunction("getHeaderFilters",this.getHeaderFilters.bind(this)),this.registerTableFunction("removeFilter",this.userRemoveFilter.bind(this)),this.registerTableFunction("clearFilter",this.userClearFilter.bind(this)),this.registerTableFunction("clearHeaderFilter",this.userClearHeaderFilter.bind(this)),this.registerComponentFunction("column","headerFilterFocus",this.setHeaderFilterFocus.bind(this)),this.registerComponentFunction("column","reloadHeaderFilter",this.reloadHeaderFilter.bind(this)),this.registerComponentFunction("column","getHeaderFilterValue",this.getHeaderFilterValue.bind(this)),this.registerComponentFunction("column","setHeaderFilterValue",this.setHeaderFilterValue.bind(this))}initialize(){this.subscribe("column-init",this.initializeColumnHeaderFilter.bind(this)),this.subscribe("column-width-fit-before",this.hideHeaderFilterElements.bind(this)),this.subscribe("column-width-fit-after",this.showHeaderFilterElements.bind(this)),this.subscribe("table-built",this.tableBuilt.bind(this)),"remote"===this.table.options.filterMode&&this.subscribe("data-params",this.remoteFilterParams.bind(this)),this.registerDataHandler(this.filter.bind(this),10)}tableBuilt(){this.table.options.initialFilter&&this.setFilter(this.table.options.initialFilter),this.table.options.initialHeaderFilter&&this.table.options.initialHeaderFilter.forEach(s=>{var u=this.table.columnManager.findColumn(s.field);if(!u)return console.warn("Column Filter Error - No matching column found:",s.field),!1;this.setHeaderFilterValue(u,s.value)}),this.tableInitialized=!0}remoteFilterParams(s,u,f,_){return _.filter=this.getFilters(!0,!0),_}userSetFilter(s,u,f,_){this.setFilter(s,u,f,_),this.refreshFilter()}userRefreshFilter(){this.refreshFilter()}userAddFilter(s,u,f,_){this.addFilter(s,u,f,_),this.refreshFilter()}userSetHeaderFilterFocus(s){var u=this.table.columnManager.findColumn(s);if(!u)return console.warn("Column Filter Focus Error - No matching column found:",s),!1;this.setHeaderFilterFocus(u)}userGetHeaderFilterValue(s){var u=this.table.columnManager.findColumn(s);if(u)return this.getHeaderFilterValue(u);console.warn("Column Filter Error - No matching column found:",s)}userSetHeaderFilterValue(s,u){var f=this.table.columnManager.findColumn(s);if(!f)return console.warn("Column Filter Error - No matching column found:",s),!1;this.setHeaderFilterValue(f,u)}userRemoveFilter(s,u,f){this.removeFilter(s,u,f),this.refreshFilter()}userClearFilter(s){this.clearFilter(s),this.refreshFilter()}userClearHeaderFilter(){this.clearHeaderFilter(),this.refreshFilter()}searchRows(s,u,f){return this.search("rows",s,u,f)}searchData(s,u,f){return this.search("data",s,u,f)}initializeColumnHeaderFilter(s){var u=s.definition;u.headerFilter&&(void 0!==u.headerFilterPlaceholder&&u.field&&this.module("localize").setHeaderFilterColumnPlaceholder(u.field,u.headerFilterPlaceholder),this.initializeColumn(s))}initializeColumn(s,u){var f=this,_=s.getField();s.modules.filter={success:function(D){var ut,A="input"==s.modules.filter.tagType&&"text"==s.modules.filter.attrType||"textarea"==s.modules.filter.tagType?"partial":"match",F="",K="";if(void 0===s.modules.filter.prevSuccess||s.modules.filter.prevSuccess!==D){if(s.modules.filter.prevSuccess=D,s.modules.filter.emptyFunc(D))delete f.headerFilters[_];else{switch(s.modules.filter.value=D,typeof s.definition.headerFilterFunc){case"string":m.filters[s.definition.headerFilterFunc]?(F=s.definition.headerFilterFunc,ut=function(It){var Vt=s.definition.headerFilterFuncParams||{},ee=s.getFieldValue(It);return Vt="function"==typeof Vt?Vt(D,ee,It):Vt,m.filters[s.definition.headerFilterFunc](D,ee,It,Vt)}):console.warn("Header Filter Error - Matching filter function not found: ",s.definition.headerFilterFunc);break;case"function":F=ut=function(It){var Vt=s.definition.headerFilterFuncParams||{},ee=s.getFieldValue(It);return Vt="function"==typeof Vt?Vt(D,ee,It):Vt,s.definition.headerFilterFunc(D,ee,It,Vt)}}if(!ut)switch(A){case"partial":ut=function(It){var Vt=s.getFieldValue(It);return null!=Vt&&String(Vt).toLowerCase().indexOf(String(D).toLowerCase())>-1},F="like";break;default:ut=function(It){return s.getFieldValue(It)==D},F="="}f.headerFilters[_]={value:D,func:ut,type:F,params:{}}}K=JSON.stringify(f.headerFilters),f.prevHeaderFilterChangeCheck!==K&&(f.prevHeaderFilterChangeCheck=K,f.trackChanges(),f.refreshFilter())}return!0},attrType:!1,tagType:!1,emptyFunc:!1},this.generateHeaderFilterElement(s)}generateHeaderFilterElement(s,u,f){var A,F,K,ut,It,Vt,ee,_=this,C=s.modules.filter.success,D=s.getField();if(s.modules.filter.headerElement&&s.modules.filter.headerElement.parentNode&&s.contentElement.removeChild(s.modules.filter.headerElement.parentNode),D){switch(s.modules.filter.emptyFunc=s.definition.headerFilterEmptyCheck||function(ve){return!ve&&"0"!==ve&&0!==ve},(A=document.createElement("div")).classList.add("tabulator-header-filter"),typeof s.definition.headerFilter){case"string":_.table.modules.edit.editors[s.definition.headerFilter]?(F=_.table.modules.edit.editors[s.definition.headerFilter],("tick"===s.definition.headerFilter||"tickCross"===s.definition.headerFilter)&&!s.definition.headerFilterEmptyCheck&&(s.modules.filter.emptyFunc=function(ve){return!0!==ve&&!1!==ve})):console.warn("Filter Error - Cannot build header filter, No such editor found: ",s.definition.editor);break;case"function":F=s.definition.headerFilter;break;case"boolean":s.modules.edit&&s.modules.edit.editor?F=s.modules.edit.editor:s.definition.formatter&&_.table.modules.edit.editors[s.definition.formatter]?(F=_.table.modules.edit.editors[s.definition.formatter],("tick"===s.definition.formatter||"tickCross"===s.definition.formatter)&&!s.definition.headerFilterEmptyCheck&&(s.modules.filter.emptyFunc=function(ve){return!0!==ve&&!1!==ve})):F=_.table.modules.edit.editors.input}if(F){if(ut={getValue:function(){return void 0!==u?u:""},getField:function(){return s.definition.field},getElement:function(){return A},getColumn:function(){return s.getComponent()},getRow:function(){return{normalizeHeight:function(){}}}},ee="function"==typeof(ee=s.definition.headerFilterParams||{})?ee.call(_.table):ee,!(K=F.call(this.table.modules.edit,ut,function(){},C,function(){},ee)))return void console.warn("Filter Error - Cannot add filter to "+D+" column, editor returned a value of false");if(!(K instanceof Node))return void console.warn("Filter Error - Cannot add filter to "+D+" column, editor should return an instance of Node, the editor returned:",K);D?_.langBind("headerFilters|columns|"+s.definition.field,function(ve){K.setAttribute("placeholder",void 0!==ve&&ve?ve:_.langText("headerFilters|default"))}):_.langBind("headerFilters|default",function(ve){K.setAttribute("placeholder",ve)}),K.addEventListener("click",function(ve){ve.stopPropagation(),K.focus()}),K.addEventListener("focus",ve=>{var De=this.table.columnManager.element.scrollLeft;De!==this.table.rowManager.element.scrollLeft&&(this.table.rowManager.scrollHorizontal(De),this.table.columnManager.scrollHorizontal(De))}),It=!1,Vt=function(ve){It&&clearTimeout(It),It=setTimeout(function(){C(K.value)},_.table.options.headerFilterLiveFilterDelay)},s.modules.filter.headerElement=K,s.modules.filter.attrType=K.hasAttribute("type")?K.getAttribute("type").toLowerCase():"",s.modules.filter.tagType=K.tagName.toLowerCase(),!1!==s.definition.headerFilterLiveFilter&&("autocomplete"===s.definition.headerFilter||"tickCross"===s.definition.headerFilter||("autocomplete"===s.definition.editor||"tickCross"===s.definition.editor)&&!0===s.definition.headerFilter||(K.addEventListener("keyup",Vt),K.addEventListener("search",Vt),"number"==s.modules.filter.attrType&&K.addEventListener("change",function(ve){C(K.value)}),"text"==s.modules.filter.attrType&&"ie"!==this.table.browser&&K.setAttribute("type","search")),("input"==s.modules.filter.tagType||"select"==s.modules.filter.tagType||"textarea"==s.modules.filter.tagType)&&K.addEventListener("mousedown",function(ve){ve.stopPropagation()})),A.appendChild(K),s.contentElement.appendChild(A),f||_.headerFilterColumns.push(s)}}else console.warn("Filter Error - Cannot add header filter, column has no field set:",s.definition.title)}hideHeaderFilterElements(){this.headerFilterColumns.forEach(function(s){s.modules.filter&&s.modules.filter.headerElement&&(s.modules.filter.headerElement.style.display="none")})}showHeaderFilterElements(){this.headerFilterColumns.forEach(function(s){s.modules.filter&&s.modules.filter.headerElement&&(s.modules.filter.headerElement.style.display="")})}setHeaderFilterFocus(s){s.modules.filter&&s.modules.filter.headerElement?s.modules.filter.headerElement.focus():console.warn("Column Filter Focus Error - No header filter set on column:",s.getField())}getHeaderFilterValue(s){if(s.modules.filter&&s.modules.filter.headerElement)return s.modules.filter.headerElement.value;console.warn("Column Filter Error - No header filter set on column:",s.getField())}setHeaderFilterValue(s,u){s&&(s.modules.filter&&s.modules.filter.headerElement?(this.generateHeaderFilterElement(s,u,!0),s.modules.filter.success(u)):console.warn("Column Filter Error - No header filter set on column:",s.getField()))}reloadHeaderFilter(s){s&&(s.modules.filter&&s.modules.filter.headerElement?this.generateHeaderFilterElement(s,s.modules.filter.value,!0):console.warn("Column Filter Error - No header filter set on column:",s.getField()))}refreshFilter(){this.tableInitialized&&("remote"===this.table.options.filterMode?this.reloadData():this.refreshData())}trackChanges(){this.changed=!0,this.dispatch("filter-changed")}hasChanged(){var s=this.changed;return this.changed=!1,s}setFilter(s,u,f,_){this.filterList=[],Array.isArray(s)||(s=[{field:s,type:u,value:f,params:_}]),this.addFilter(s)}addFilter(s,u,f,_){Array.isArray(s)||(s=[{field:s,type:u,value:f,params:_}]),s.forEach(C=>{(C=this.findFilter(C))&&(this.filterList.push(C),this.changed=!0)})}findFilter(s){var u;if(Array.isArray(s))return this.findSubFilters(s);var f=!1;return"function"==typeof s.field?f=function(_){return s.field(_,s.type||{})}:m.filters[s.type]?f=(u=this.table.columnManager.getColumnByField(s.field))?function(_){return m.filters[s.type](s.value,u.getFieldValue(_),_,s.params||{})}:function(_){return m.filters[s.type](s.value,_[s.field],_,s.params||{})}:console.warn("Filter Error - No such filter type found, ignoring: ",s.type),s.func=f,!!s.func&&s}findSubFilters(s){var u=[];return s.forEach(f=>{(f=this.findFilter(f))&&u.push(f)}),!!u.length&&u}getFilters(s,u){var f=[];return s&&(f=this.getHeaderFilters()),u&&f.forEach(function(_){"function"==typeof _.type&&(_.type="function")}),f.concat(this.filtersToArray(this.filterList,u))}filtersToArray(s,u){var f=[];return s.forEach(_=>{var C;Array.isArray(_)?f.push(this.filtersToArray(_,u)):(C={field:_.field,type:_.type,value:_.value},u&&"function"==typeof C.type&&(C.type="function"),f.push(C))}),f}getHeaderFilters(){var s=[];for(var u in this.headerFilters)s.push({field:u,type:this.headerFilters[u].type,value:this.headerFilters[u].value});return s}removeFilter(s,u,f){Array.isArray(s)||(s=[{field:s,type:u,value:f}]),s.forEach(_=>{var C;(C=this.filterList.findIndex("object"==typeof _.field?D=>_===D:D=>_.field===D.field&&_.type===D.type&&_.value===D.value))>-1?this.filterList.splice(C,1):console.warn("Filter Error - No matching filter type found, ignoring: ",_.type)}),this.trackChanges()}clearFilter(s){this.filterList=[],s&&this.clearHeaderFilter(),this.trackChanges()}clearHeaderFilter(){this.headerFilters={},this.prevHeaderFilterChangeCheck="{}",this.headerFilterColumns.forEach(s=>{void 0!==s.modules.filter.value&&delete s.modules.filter.value,s.modules.filter.prevSuccess=void 0,this.reloadHeaderFilter(s)}),this.trackChanges()}search(s,u,f,_){var C=[],D=[];return Array.isArray(u)||(u=[{field:u,type:f,value:_}]),u.forEach(A=>{(A=this.findFilter(A))&&D.push(A)}),this.table.rowManager.rows.forEach(A=>{var F=!0;D.forEach(K=>{this.filterRecurse(K,A.getData())||(F=!1)}),F&&C.push("data"===s?A.getData("data"):A.getComponent())}),C}filter(s,u){var f=[],_=[];return this.subscribedExternal("dataFiltering")&&this.dispatchExternal("dataFiltering",this.getFilters()),"remote"!==this.table.options.filterMode&&(this.filterList.length||Object.keys(this.headerFilters).length)?s.forEach(C=>{this.filterRow(C)&&f.push(C)}):f=s.slice(0),this.subscribedExternal("dataFiltered")&&(f.forEach(C=>{_.push(C.getComponent())}),this.dispatchExternal("dataFiltered",this.getFilters(),_)),f}filterRow(s,u){var f=!0,_=s.getData();for(var C in this.filterList.forEach(D=>{this.filterRecurse(D,_)||(f=!1)}),this.headerFilters)this.headerFilters[C].func(_)||(f=!1);return f}filterRecurse(s,u){var f=!1;return Array.isArray(s)?s.forEach(_=>{this.filterRecurse(_,u)&&(f=!0)}):f=s.func(u),f}}return m.moduleName="filter",m.filters=Cp,m})();var Rg={plaintext:function(m,d,s){return this.emptyToSpace(this.sanitizeHTML(m.getValue()))},html:function(m,d,s){return m.getValue()},textarea:function(m,d,s){return m.getElement().style.whiteSpace="pre-wrap",this.emptyToSpace(this.sanitizeHTML(m.getValue()))},money:function(m,d,s){var _,C,D,A,u=parseFloat(m.getValue()),f="",F=d.decimal||".",K=d.thousand||",",ut=d.negativeSign||"-",It=d.symbol||"",Vt=!!d.symbolAfter,ee=void 0!==d.precision?d.precision:2;if(isNaN(u))return this.emptyToSpace(this.sanitizeHTML(m.getValue()));for(u<0&&(u=Math.abs(u),f=ut),_=!1!==ee?u.toFixed(ee):u,C=(_=String(_).split("."))[0],D=_.length>1?F+_[1]:"",A=/(\d+)(\d{3})/;A.test(C);)C=C.replace(A,"$1"+K+"$2");return Vt?f+C+D+It:f+It+C+D},link:function(m,d,s){var u=m.getValue(),f=d.urlPrefix||"",_=d.download,C=u,D=document.createElement("a");if(d.labelField&&(C=m.getData()[d.labelField]),d.label)switch(typeof d.label){case"string":C=d.label;break;case"function":C=d.label(m)}if(C){if(d.urlField&&(u=m.getData()[d.urlField]),d.url)switch(typeof d.url){case"string":u=d.url;break;case"function":u=d.url(m)}return D.setAttribute("href",f+u),d.target&&D.setAttribute("target",d.target),d.download&&(_="function"==typeof _?_(m):!0===_?"":_,D.setAttribute("download",_)),D.innerHTML=this.emptyToSpace(this.sanitizeHTML(C)),D}return"&nbsp;"},image:function(m,d,s){var u=document.createElement("img"),f=m.getValue();switch(d.urlPrefix&&(f=d.urlPrefix+m.getValue()),d.urlSuffix&&(f+=d.urlSuffix),u.setAttribute("src",f),typeof d.height){case"number":u.style.height=d.height+"px";break;case"string":u.style.height=d.height}switch(typeof d.width){case"number":u.style.width=d.width+"px";break;case"string":u.style.width=d.width}return u.addEventListener("load",function(){m.getRow().normalizeHeight()}),u},tickCross:function(m,d,s){var u=m.getValue(),f=m.getElement(),_=d.allowEmpty,D=void 0!==d.tickElement?d.tickElement:'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>',A=void 0!==d.crossElement?d.crossElement:'<svg enable-background="new 0 0 24 24" height="14" width="14"  viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>';return d.allowTruthy&&u||!0===u||"true"===u||"True"===u||1===u||"1"===u?(f.setAttribute("aria-checked",!0),D||""):!_||"null"!==u&&""!==u&&null!=u?(f.setAttribute("aria-checked",!1),A||""):(f.setAttribute("aria-checked","mixed"),"")},datetime:function(m,d,s){var u=window.DateTime||luxon.DateTime,f=d.inputFormat||"yyyy-MM-dd HH:mm:ss",_=d.outputFormat||"dd/MM/yyyy HH:mm:ss",C=void 0!==d.invalidPlaceholder?d.invalidPlaceholder:"",D=m.getValue();if(void 0!==u){var A=(window.DateTime||luxon.DateTime).fromFormat(D,f);return A.isValid?(d.timezone&&(A=A.shiftTimezone(d.timezone)),A.toFormat(_)):!0===C?D:"function"==typeof C?C(D):C}console.error("Format Error - 'datetime' formatter is dependant on luxon.js")},datetimediff:function(m,d,s){var u=window.DateTime||luxon.DateTime,f=d.inputFormat||"yyyy-MM-dd HH:mm:ss",_=void 0!==d.invalidPlaceholder?d.invalidPlaceholder:"",C=void 0!==d.suffix&&d.suffix,D=void 0!==d.unit?d.unit:"days",A=void 0!==d.humanize&&d.humanize,F=void 0!==d.date?d.date:u.now(),K=m.getValue();if(void 0!==u){var ut=u.fromFormat(K,f);if(!ut.isValid)return!0===_?K:"function"==typeof _?_(K):_;if(!A)return parseInt(ut.diff(F,D)[D])+(C?" "+C:"")}else console.error("Format Error - 'datetimediff' formatter is dependant on luxon.js")},lookup:function(m,d,s){var u=m.getValue();return void 0===d[u]?(console.warn("Missing display value for "+u),u):d[u]},star:function(m,d,s){var u=m.getValue(),f=m.getElement(),_=d&&d.stars?d.stars:5,C=document.createElement("span"),D=document.createElementNS("http://www.w3.org/2000/svg","svg");C.style.verticalAlign="middle",D.setAttribute("width","14"),D.setAttribute("height","14"),D.setAttribute("viewBox","0 0 512 512"),D.setAttribute("xml:space","preserve"),D.style.padding="0 1px",u=u&&!isNaN(u)?parseInt(u):0,u=Math.max(0,Math.min(u,_));for(var K=1;K<=_;K++){var ut=D.cloneNode(!0);ut.innerHTML=K<=u?'<polygon fill="#FFEA00" stroke="#C1AB60" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>':'<polygon fill="#D2D2D2" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>',C.appendChild(ut)}return f.style.whiteSpace="nowrap",f.style.overflow="hidden",f.style.textOverflow="ellipsis",f.setAttribute("aria-label",u),C},traffic:function(m,d,s){var K,u=this.sanitizeHTML(m.getValue())||0,f=document.createElement("span"),_=d&&d.max?d.max:100,C=d&&d.min?d.min:0,D=d&&void 0!==d.color?d.color:["red","orange","green"],A="#666666";if(!isNaN(u)&&void 0!==m.getValue()){switch(f.classList.add("tabulator-traffic-light"),K=parseFloat(u)<=_?parseFloat(u):_,K=parseFloat(K)>=C?parseFloat(K):C,K=Math.round((K-C)/((_-C)/100)),typeof D){case"string":A=D;break;case"function":A=D(u);break;case"object":if(Array.isArray(D)){var It=Math.floor(K/(100/D.length));It=Math.min(It,D.length-1),A=D[It=Math.max(It,0)];break}}return f.style.backgroundColor=A,f}},progress:function(m,d,s){var F,K,ut,It,u=this.sanitizeHTML(m.getValue())||0,f=m.getElement(),_=d&&d.max?d.max:100,C=d&&d.min?d.min:0,D=d&&d.legendAlign?d.legendAlign:"center";switch(F=parseFloat(u)<=_?parseFloat(u):_,F=parseFloat(F)>=C?parseFloat(F):C,F=Math.round((F-C)/((_-C)/100)),typeof d.color){case"string":K=d.color;break;case"function":K=d.color(u);break;case"object":if(Array.isArray(d.color)){var Vt=100/d.color.length,ee=Math.floor(F/Vt);ee=Math.min(ee,d.color.length-1),ee=Math.max(ee,0),K=d.color[ee];break}default:K="#2DC214"}switch(typeof d.legend){case"string":ut=d.legend;break;case"function":ut=d.legend(u);break;case"boolean":ut=u;break;default:ut=!1}switch(typeof d.legendColor){case"string":It=d.legendColor;break;case"function":It=d.legendColor(u);break;case"object":Array.isArray(d.legendColor)&&(Vt=100/d.legendColor.length,ee=Math.floor(F/Vt),ee=Math.min(ee,d.legendColor.length-1),ee=Math.max(ee,0),It=d.legendColor[ee]);break;default:It="#000"}f.style.minWidth="30px",f.style.position="relative",f.setAttribute("aria-label",F);var he=document.createElement("div");he.style.display="inline-block",he.style.position="absolute",he.style.width=F+"%",he.style.backgroundColor=K,he.style.height="100%",he.setAttribute("data-max",_),he.setAttribute("data-min",C);var ve=document.createElement("div");if(ve.style.position="relative",ve.style.width="100%",ve.style.height="100%",ut){var De=document.createElement("div");De.style.position="absolute",De.style.top=0,De.style.left=0,De.style.textAlign=D,De.style.width="100%",De.style.color=It,De.innerHTML=ut}return s(function(){if(!(m instanceof Sl)){var si=document.createElement("div");si.style.position="absolute",si.style.top="4px",si.style.bottom="4px",si.style.left="4px",si.style.right="4px",f.appendChild(si),f=si}f.appendChild(ve),ve.appendChild(he),ut&&ve.appendChild(De)}),""},color:function(m,d,s){return m.getElement().style.backgroundColor=this.sanitizeHTML(m.getValue()),""},buttonTick:function(m,d,s){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>'},buttonCross:function(m,d,s){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>'},rownum:function(m,d,s){return this.table.rowManager.activeRows.indexOf(m.getRow()._getSelf())+1},handle:function(m,d,s){return m.getElement().classList.add("tabulator-row-handle"),"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>"},responsiveCollapse:function(m,d,s){var u=document.createElement("div"),f=m.getRow()._row.modules.responsiveLayout;function _(C){var D=f.element;f.open=C,D&&(f.open?(u.classList.add("open"),D.style.display=""):(u.classList.remove("open"),D.style.display="none"))}return u.classList.add("tabulator-responsive-collapse-toggle"),u.innerHTML="<span class='tabulator-responsive-collapse-toggle-open'>+</span><span class='tabulator-responsive-collapse-toggle-close'>-</span>",m.getElement().classList.add("tabulator-row-handle"),u.addEventListener("click",function(C){C.stopImmediatePropagation(),_(!f.open)}),_(f.open),u},rowSelection:function(m,d,s){var u=document.createElement("input");if(u.type="checkbox",this.table.modExists("selectRow",!0))if(u.addEventListener("click",_=>{_.stopPropagation()}),"function"==typeof m.getRow){var f=m.getRow();f instanceof uu?(u.addEventListener("change",_=>{f.toggleSelect()}),u.checked=f.isSelected&&f.isSelected(),this.table.modules.selectRow.registerRowSelectCheckbox(f,u)):u=""}else u.addEventListener("change",_=>{this.table.modules.selectRow.selectedRows.length?this.table.deselectRow():this.table.selectRow(d.rowRange)}),this.table.modules.selectRow.registerHeaderSelectCheckbox(u);return u}};let Wd=(()=>{class m extends Fi{constructor(s){super(s),this.registerColumnOption("formatter"),this.registerColumnOption("formatterParams"),this.registerColumnOption("formatterPrint"),this.registerColumnOption("formatterPrintParams"),this.registerColumnOption("formatterClipboard"),this.registerColumnOption("formatterClipboardParams"),this.registerColumnOption("formatterHtmlOutput"),this.registerColumnOption("formatterHtmlOutputParams"),this.registerColumnOption("titleFormatter"),this.registerColumnOption("titleFormatterParams")}initialize(){this.subscribe("cell-format",this.formatValue.bind(this)),this.subscribe("cell-rendered",this.cellRendered.bind(this)),this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("column-format",this.formatHeader.bind(this))}initializeColumn(s){s.modules.format=this.lookupFormatter(s,""),void 0!==s.definition.formatterPrint&&(s.modules.format.print=this.lookupFormatter(s,"Print")),void 0!==s.definition.formatterClipboard&&(s.modules.format.clipboard=this.lookupFormatter(s,"Clipboard")),void 0!==s.definition.formatterHtmlOutput&&(s.modules.format.htmlOutput=this.lookupFormatter(s,"HtmlOutput"))}lookupFormatter(s,u){var f={params:s.definition["formatter"+u+"Params"]||{}},_=s.definition["formatter"+u];switch(typeof _){case"string":m.formatters[_]?f.formatter=m.formatters[_]:(console.warn("Formatter Error - No such formatter found: ",_),f.formatter=m.formatters.plaintext);break;case"function":f.formatter=_;break;default:f.formatter=m.formatters.plaintext}return f}cellRendered(s){s.modules.format&&s.modules.format.renderedCallback&&!s.modules.format.rendered&&(s.modules.format.renderedCallback(),s.modules.format.rendered=!0)}formatHeader(s,u,f){var _,C,D,A;return s.definition.titleFormatter?(_=this.getFormatter(s.definition.titleFormatter),D=F=>{s.titleFormatterRendered=F},A={getValue:function(){return u},getElement:function(){return f}},C="function"==typeof(C=s.definition.titleFormatterParams||{})?C():C,_.call(this,A,C,D)):u}formatValue(s){var u=s.getComponent(),f="function"==typeof s.column.modules.format.params?s.column.modules.format.params(u):s.column.modules.format.params;return s.column.modules.format.formatter.call(this,u,f,function(C){s.modules.format||(s.modules.format={}),s.modules.format.renderedCallback=C,s.modules.format.rendered=!1})}formatExportValue(s,u){var _,f=s.column.modules.format[u];if(f){let C=function(D){s.modules.format||(s.modules.format={}),s.modules.format.renderedCallback=D,s.modules.format.rendered=!1};return _="function"==typeof f.params?f.params(component):f.params,f.formatter.call(this,s.getComponent(),_,C)}return this.formatValue(s)}sanitizeHTML(s){if(s){var u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(s).replace(/[&<>"'`=\/]/g,function(f){return u[f]})}return s}emptyToSpace(s){return null==s||""===s?"&nbsp;":s}getFormatter(s){switch(typeof s){case"string":m.formatters[s]?s=m.formatters[s]:(console.warn("Formatter Error - No such formatter found: ",s),s=m.formatters.plaintext);break;case"function":s=s;break;default:s=m.formatters.plaintext}return s}}return m.moduleName="format",m.formatters=Rg,m})(),Mp=(()=>{class m extends Fi{constructor(s){super(s),this.leftColumns=[],this.rightColumns=[],this.leftMargin=0,this.rightMargin=0,this.rightPadding=0,this.initializationMode="left",this.active=!1,this.scrollEndTimer=!1,this.registerColumnOption("frozen")}reset(){this.initializationMode="left",this.leftColumns=[],this.rightColumns=[],this.leftMargin=0,this.rightMargin=0,this.rightMargin=0,this.active=!1,this.table.columnManager.headersElement.style.marginLeft=0,this.table.columnManager.element.style.paddingRight=0}initialize(){this.subscribe("cell-layout",this.layoutCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-width",this.layout.bind(this)),this.subscribe("row-layout-before",this.layoutRow.bind(this)),this.subscribe("table-layout",this.layout.bind(this)),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this)),this.subscribe("columns-loading",this.reset.bind(this)),this.subscribe("table-redraw",this.layout.bind(this))}layoutCell(s){this.layoutElement(s.element,s.column)}initializeColumn(s){var u={margin:0,edge:!1};s.isGroup||(this.frozenCheck(s)?(u.position=this.initializationMode,"left"==this.initializationMode?this.leftColumns.push(s):this.rightColumns.unshift(s),this.active=!0,s.modules.frozen=u):this.initializationMode="right")}frozenCheck(s){return s.parent.isGroup&&s.definition.frozen&&console.warn("Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups"),s.parent.isGroup?this.frozenCheck(s.parent):s.definition.frozen}scrollHorizontal(){var s;this.active&&(clearTimeout(this.scrollEndTimer),this.scrollEndTimer=setTimeout(()=>{this.layout()},100),s=this.table.rowManager.getVisibleRows(),this.calcMargins(),this.layoutColumnPosition(),this.layoutCalcRows(),s.forEach(u=>{"row"===u.type&&this.layoutRow(u)}),this.table.rowManager.tableElement.style.marginRight=this.rightMargin)}calcMargins(){this.leftMargin=this._calcSpace(this.leftColumns,this.leftColumns.length)+"px",this.table.columnManager.headersElement.style.marginLeft=this.leftMargin,this.rightMargin=this._calcSpace(this.rightColumns,this.rightColumns.length)+"px",this.table.columnManager.element.style.paddingRight=this.rightMargin,this.rightPadding=this.table.rowManager.element.clientWidth+this.table.columnManager.scrollLeft}layoutCalcRows(){this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&this.table.modules.columnCalcs.topRow&&this.layoutRow(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&this.table.modules.columnCalcs.botRow&&this.layoutRow(this.table.modules.columnCalcs.botRow),this.table.modExists("groupRows")&&this.layoutGroupCalcs(this.table.modules.groupRows.getGroups()))}layoutGroupCalcs(s){s.forEach(u=>{u.calcs.top&&this.layoutRow(u.calcs.top),u.calcs.bottom&&this.layoutRow(u.calcs.bottom),u.groupList&&u.groupList.length&&this.layoutGroupCalcs(u.groupList&&u.groupList)})}layoutColumnPosition(s){var u=[];this.leftColumns.forEach((f,_)=>{if(f.modules.frozen.margin=this._calcSpace(this.leftColumns,_)+this.table.columnManager.scrollLeft+"px",f.modules.frozen.edge=_==this.leftColumns.length-1,f.parent.isGroup){var C=this.getColGroupParentElement(f);u.includes(C)||(this.layoutElement(C,f),u.push(C)),f.modules.frozen.edge&&C.classList.add("tabulator-frozen-"+f.modules.frozen.position)}else this.layoutElement(f.getElement(),f);s&&f.cells.forEach(D=>{this.layoutElement(D.getElement(!0),f)})}),this.rightColumns.forEach((f,_)=>{f.modules.frozen.margin=this.rightPadding-this._calcSpace(this.rightColumns,_+1)+"px",f.modules.frozen.edge=_==this.rightColumns.length-1,this.layoutElement(f.parent.isGroup?this.getColGroupParentElement(f):f.getElement(),f),s&&f.cells.forEach(C=>{this.layoutElement(C.getElement(!0),f)})})}getColGroupParentElement(s){return s.parent.isGroup?this.getColGroupParentElement(s.parent):s.getElement()}layout(){this.active&&(this.calcMargins(),this.table.rowManager.getDisplayRows().forEach(s=>{"row"===s.type&&this.layoutRow(s)}),this.layoutCalcRows(),this.layoutColumnPosition(!0),this.table.rowManager.tableElement.style.marginRight=this.rightMargin)}layoutRow(s){s.getElement().style.paddingLeft=this.leftMargin,this.leftColumns.forEach(f=>{var _=s.getCell(f);_&&this.layoutElement(_.getElement(!0),f)}),this.rightColumns.forEach(f=>{var _=s.getCell(f);_&&this.layoutElement(_.getElement(!0),f)})}layoutElement(s,u){u.modules.frozen&&(s.style.position="absolute",s.style.left=u.modules.frozen.margin,s.classList.add("tabulator-frozen"),u.modules.frozen.edge&&s.classList.add("tabulator-frozen-"+u.modules.frozen.position))}_calcSpace(s,u){var f=0;for(let _=0;_<u;_++)s[_].visible&&(f+=s[_].getWidth());return f}}return m.moduleName="frozenColumns",m})(),Of=(()=>{class m extends Fi{constructor(s){super(s),this.topElement=document.createElement("div"),this.rows=[],this.registerComponentFunction("row","freeze",this.freezeRow.bind(this)),this.registerComponentFunction("row","unfreeze",this.unfreezeRow.bind(this)),this.registerComponentFunction("row","isFrozen",this.isRowFrozen.bind(this))}initialize(){this.rows=[],this.topElement.classList.add("tabulator-frozen-rows-holder"),this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling),this.subscribe("row-deleting",this.detachRow.bind(this)),this.registerDisplayHandler(this.getRows.bind(this),10)}isRowFrozen(s){return this.rows.indexOf(s)>-1}isFrozen(){return!!this.rows.length}getRows(s){var u=s.slice(0);return this.rows.forEach(function(f){var _=u.indexOf(f);_>-1&&u.splice(_,1)}),u}freezeRow(s){s.modules.frozen?console.warn("Freeze Error - Row is already frozen"):(s.modules.frozen=!0,this.topElement.appendChild(s.getElement()),s.initialize(),s.normalizeHeight(),this.table.rowManager.adjustTableSize(),this.rows.push(s),this.refreshData(!1,"display"),this.styleRows())}unfreezeRow(s){this.rows.indexOf(s),s.modules.frozen?(s.modules.frozen=!1,this.detachRow(s),this.table.rowManager.adjustTableSize(),this.refreshData(!1,"display"),this.rows.length&&this.styleRows()):console.warn("Freeze Error - Row is already unfrozen")}detachRow(s){var u=this.rows.indexOf(s);if(u>-1){var f=s.getElement();f.parentNode&&f.parentNode.removeChild(f),this.rows.splice(u,1)}}styleRows(s){this.rows.forEach((u,f)=>{this.table.rowManager.styleRow(u,f)})}}return m.moduleName="frozenRows",m})();class zd{constructor(d){return this._group=d,this.type="GroupComponent",new Proxy(this,{get:function(s,u,f){return void 0!==s[u]?s[u]:s._group.table.componentFunctionBinder.handle("row",s._group,u)}})}getKey(){return this._group.key}getField(){return this._group.field}getElement(){return this._group.element}getRows(){return this._group.getRows(!0)}getSubGroups(){return this._group.getSubGroups(!0)}getParentGroup(){return!!this._group.parent&&this._group.parent.getComponent()}isVisible(){return this._group.visible}show(){this._group.show()}hide(){this._group.hide()}toggle(){this._group.toggleVisibility()}_getSelf(){return this._group}getTable(){return this._group.groupManager.table}}class rd{constructor(d,s,u,f,_,C,D){this.groupManager=d,this.parent=s,this.key=f,this.level=u,this.field=_,this.hasSubGroups=u<d.groupIDLookups.length-1,this.addRow=this.hasSubGroups?this._addRowToGroup:this._addRow,this.type="group",this.old=D,this.rows=[],this.groups=[],this.groupList=[],this.generator=C,this.elementContents=!1,this.height=0,this.outerHeight=0,this.initialized=!1,this.calcs={},this.initialized=!1,this.modules={},this.arrowElement=!1,this.visible=D?D.visible:void 0!==d.startOpen[u]?d.startOpen[u]:d.startOpen[0],this.component=null,this.createElements(),this.addBindings(),this.createValueGroups()}wipe(){this.groupList.length?this.groupList.forEach(function(d){d.wipe()}):(this.element=!1,this.arrowElement=!1,this.elementContents=!1)}createElements(){var d=document.createElement("div");d.classList.add("tabulator-arrow"),this.element=document.createElement("div"),this.element.classList.add("tabulator-row"),this.element.classList.add("tabulator-group"),this.element.classList.add("tabulator-group-level-"+this.level),this.element.setAttribute("role","rowgroup"),this.arrowElement=document.createElement("div"),this.arrowElement.classList.add("tabulator-group-toggle"),this.arrowElement.appendChild(d),!1!==this.groupManager.table.options.movableRows&&this.groupManager.table.modExists("moveRow")&&this.groupManager.table.modules.moveRow.initializeGroupHeader(this)}createValueGroups(){var d=this.level+1;this.groupManager.allowedValues&&this.groupManager.allowedValues[d]&&this.groupManager.allowedValues[d].forEach(s=>{this._createGroup(s,d)})}addBindings(){var d,s,u;(this.groupManager.table.options.groupContextMenu||this.groupManager.table.options.groupClickMenu)&&this.groupManager.table.modExists("menu")&&this.groupManager.table.modules.menu.initializeGroup.call(this.groupManager.table.modules.menu,this),this.groupManager.table.options.groupTap&&(u=!1,this.element.addEventListener("touchstart",_=>{u=!0},{passive:!0}),this.element.addEventListener("touchend",_=>{u&&this.groupManager.table.options.groupTap(_,this.getComponent()),u=!1})),this.groupManager.table.options.groupDblTap&&(d=null,this.element.addEventListener("touchend",_=>{d?(clearTimeout(d),d=null,this.groupManager.table.options.groupDblTap(_,this.getComponent())):d=setTimeout(()=>{clearTimeout(d),d=null},300)})),this.groupManager.table.options.groupTapHold&&(s=null,this.element.addEventListener("touchstart",_=>{clearTimeout(s),s=setTimeout(()=>{clearTimeout(s),s=null,u=!1,this.groupManager.table.options.groupTapHold(_,this.getComponent())},1e3)},{passive:!0}),this.element.addEventListener("touchend",_=>{clearTimeout(s),s=null})),this.groupManager.table.options.groupToggleElement&&("arrow"==this.groupManager.table.options.groupToggleElement?this.arrowElement:this.element).addEventListener("click",_=>{_.stopPropagation(),_.stopImmediatePropagation(),this.toggleVisibility()})}_createGroup(d,s){var u=s+"_"+d,f=new rd(this.groupManager,this,s,d,this.groupManager.groupIDLookups[s].field,this.groupManager.headerGenerator[s]||this.groupManager.headerGenerator[0],!!this.old&&this.old.groups[u]);this.groups[u]=f,this.groupList.push(f)}_addRowToGroup(d){var s=this.level+1;if(this.hasSubGroups){var u=this.groupManager.groupIDLookups[s].func(d.getData()),f=s+"_"+u;this.groupManager.allowedValues&&this.groupManager.allowedValues[s]?this.groups[f]&&this.groups[f].addRow(d):(this.groups[f]||this._createGroup(u,s),this.groups[f].addRow(d))}}_addRow(d){this.rows.push(d),d.modules.group=this}insertRow(d,s,u){var f=this.conformRowData({});d.updateData(f);var _=this.rows.indexOf(s);_>-1?this.rows.splice(u?_+1:_,0,d):u?this.rows.push(d):this.rows.unshift(d),d.modules.group=this,this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modules.columnCalcs.recalcGroup(this),this.groupManager.updateGroupRows(!0)}scrollHeader(d){this.arrowElement.style.marginLeft=d,this.groupList.forEach(function(s){s.scrollHeader(d)})}getRowIndex(d){}conformRowData(d){return this.field?d[this.field]=this.key:console.warn("Data Conforming Error - Cannot conform row data to match new group as groupBy is a function"),this.parent&&(d=this.parent.conformRowData(d)),d}removeRow(d){var s=this.rows.indexOf(d),u=d.getElement();s>-1&&this.rows.splice(s,1),this.groupManager.table.options.groupValues||this.rows.length?(u.parentNode&&u.parentNode.removeChild(u),this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modules.columnCalcs.recalcGroup(this)):(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this),this.groupManager.updateGroupRows(!0))}removeGroup(d){var u,s=d.level+"_"+d.key;this.groups[s]&&(delete this.groups[s],(u=this.groupList.indexOf(d))>-1&&this.groupList.splice(u,1),this.groupList.length||(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this)))}getHeadersAndRows(d){var s=[];return s.push(this),this._visSet(),this.visible?this.groupList.length?this.groupList.forEach(function(u){s=s.concat(u.getHeadersAndRows(d))}):(!d&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top&&(this.calcs.top.detachElement(),this.calcs.top.deleteCells()),this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),s.push(this.calcs.top)),s=s.concat(this.rows),!d&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom&&(this.calcs.bottom.detachElement(),this.calcs.bottom.deleteCells()),this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),s.push(this.calcs.bottom))):!this.groupList.length&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&(!d&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top&&(this.calcs.top.detachElement(),this.calcs.top.deleteCells()),this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),s.push(this.calcs.top))),!d&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom&&(this.calcs.bottom.detachElement(),this.calcs.bottom.deleteCells()),this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),s.push(this.calcs.bottom)))),s}getData(d,s){var u=[];return this._visSet(),(!d||d&&this.visible)&&this.rows.forEach(f=>{u.push(f.getData(s||"data"))}),u}getRowCount(){var d=0;return this.groupList.length?this.groupList.forEach(s=>{d+=s.getRowCount()}):d=this.rows.length,d}toggleVisibility(){this.visible?this.hide():this.show()}hide(){this.visible=!1,"classic"!=this.groupManager.table.rowManager.getRenderMode()||this.groupManager.table.options.pagination?this.groupManager.updateGroupRows(!0):(this.element.classList.remove("tabulator-group-visible"),this.groupList.length?this.groupList.forEach(d=>{d.getHeadersAndRows().forEach(u=>{u.detachElement()})}):this.rows.forEach(d=>{var s=d.getElement();s.parentNode.removeChild(s)}),this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex()),this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth()),this.groupManager.table.externalEvents.dispatch("groupVisibilityChanged",this.getComponent(),!1)}show(){if(this.visible=!0,"classic"!=this.groupManager.table.rowManager.getRenderMode()||this.groupManager.table.options.pagination)this.groupManager.updateGroupRows(!0);else{this.element.classList.add("tabulator-group-visible");var d=this.getElement();this.groupList.length?this.groupList.forEach(s=>{s.getHeadersAndRows().forEach(f=>{var _=f.getElement();d.parentNode.insertBefore(_,d.nextSibling),f.initialize(),d=_})}):this.rows.forEach(s=>{var u=s.getElement();d.parentNode.insertBefore(u,d.nextSibling),s.initialize(),d=u}),this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex()),this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth()}this.groupManager.table.externalEvents.dispatch("groupVisibilityChanged",this.getComponent(),!0)}_visSet(){var d=[];"function"==typeof this.visible&&(this.rows.forEach(function(s){d.push(s.getData())}),this.visible=this.visible(this.key,this.getRowCount(),d,this.getComponent()))}getRowGroup(d){var s=!1;return this.groupList.length?this.groupList.forEach(function(u){var f=u.getRowGroup(d);f&&(s=f)}):this.rows.find(function(u){return u===d})&&(s=this),s}getSubGroups(d){var s=[];return this.groupList.forEach(function(u){s.push(d?u.getComponent():u)}),s}getRows(d){var s=[];return this.rows.forEach(function(u){s.push(d?u.getComponent():u)}),s}generateGroupHeaderContents(){var d=[];for(this.rows.forEach(function(s){d.push(s.getData())}),this.elementContents=this.generator(this.key,this.getRowCount(),d,this.getComponent());this.element.firstChild;)this.element.removeChild(this.element.firstChild);"string"==typeof this.elementContents?this.element.innerHTML=this.elementContents:this.element.appendChild(this.elementContents),this.element.insertBefore(this.arrowElement,this.element.firstChild)}getPath(d=[]){return d.unshift(this.key),this.parent&&this.parent.getPath(d),d}getElement(){this.addBindingsd=!1,this._visSet(),this.visible?this.element.classList.add("tabulator-group-visible"):this.element.classList.remove("tabulator-group-visible");for(var d=0;d<this.element.childNodes.length;++d)this.element.childNodes[d].parentNode.removeChild(this.element.childNodes[d]);return this.generateGroupHeaderContents(),this.element}detachElement(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}normalizeHeight(){this.setHeight(this.element.clientHeight)}initialize(d){(!this.initialized||d)&&(this.normalizeHeight(),this.initialized=!0)}reinitialize(){this.initialized=!1,this.height=0,Ei.elVisible(this.element)&&this.initialize(!0)}setHeight(d){this.height!=d&&(this.height=d,this.outerHeight=this.element.offsetHeight)}getHeight(){return this.outerHeight}getGroup(){return this}reinitializeHeight(){}calcHeight(){}setCellHeight(){}clearCellHeight(){}deinitializeHeight(){}getComponent(){return this.component||(this.component=new zd(this)),this.component}}let T_=(()=>{class m extends Fi{constructor(s){super(s),this.groupIDLookups=!1,this.startOpen=[function(){return!1}],this.headerGenerator=[function(){return""}],this.groupList=[],this.allowedValues=!1,this.groups={},this.displayIndex=0,this.displayHandler=this.getRows.bind(this),this.registerTableOption("groupBy",!1),this.registerTableOption("groupStartOpen",!0),this.registerTableOption("groupValues",!1),this.registerTableOption("groupUpdateOnCellEdit",!1),this.registerTableOption("groupHeader",!1),this.registerTableOption("groupHeaderPrint",null),this.registerTableOption("groupHeaderClipboard",null),this.registerTableOption("groupHeaderHtmlOutput",null),this.registerTableOption("groupHeaderDownload",null),this.registerTableOption("groupToggleElement","arrow"),this.registerTableOption("groupClosedShowCalcs",!1),this.registerTableFunction("setGroupBy",this.setGroupBy.bind(this)),this.registerTableFunction("setGroupValues",this.setGroupValues.bind(this)),this.registerTableFunction("setGroupStartOpen",this.setGroupStartOpen.bind(this)),this.registerTableFunction("setGroupHeader",this.setGroupHeader.bind(this)),this.registerTableFunction("getGroups",this.userGetGroups.bind(this)),this.registerTableFunction("getGroupedData",this.userGetGroupedData.bind(this)),this.registerComponentFunction("row","getGroup",this.rowGetGroup.bind(this))}initialize(){this.table.options.groupBy&&(this.configureGroupSetup(),this.table.options.groupUpdateOnCellEdit&&(this.subscribe("cell-value-updated",this.cellUpdated.bind(this)),this.subscribe("row-data-changed",this.reassignRowToGroup.bind(this),0)),this.subscribe("row-deleting",this.rowDeleting.bind(this)),this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("scroll-horizontal",this.scrollHeaders.bind(this)),this.subscribe("rows-wipe",this.wipe.bind(this)),this.subscribe("rows-added",this.rowsUpdated.bind(this)),this.subscribe("row-moving",this.rowMoving.bind(this)),this.subscribe("row-adding-index",this.rowAddingIndex.bind(this)),this.subscribe("rows-sample",this.rowSample.bind(this)),this.subscribe("render-virtual-fill",this.virtualRenderFill.bind(this)),this.registerDisplayHandler(this.displayHandler,20),this.initialized=!0)}configureGroupSetup(){if(this.table.options.groupBy){var s=this.table.options.groupBy,u=this.table.options.groupStartOpen,f=this.table.options.groupHeader;this.allowedValues=this.table.options.groupValues,Array.isArray(s)&&Array.isArray(f)&&s.length>f.length&&console.warn("Error creating group headers, groupHeader array is shorter than groupBy array"),this.headerGenerator=[function(){return""}],this.startOpen=[function(){return!1}],this.langBind("groups|item",(C,D)=>{this.headerGenerator[0]=(A,F,K)=>(void 0===A?"":A)+"<span>("+F+" "+(1===F?C:D.groups.items)+")</span>"}),this.groupIDLookups=[],Array.isArray(s)||s?this.table.modExists("columnCalcs")&&"table"!=this.table.options.columnCalcs&&"both"!=this.table.options.columnCalcs&&this.table.modules.columnCalcs.removeCalcs():this.table.modExists("columnCalcs")&&"group"!=this.table.options.columnCalcs&&this.table.columnManager.getRealColumns().forEach(C=>{C.definition.topCalc&&this.table.modules.columnCalcs.initializeTopRow(),C.definition.bottomCalc&&this.table.modules.columnCalcs.initializeBottomRow()}),Array.isArray(s)||(s=[s]),s.forEach((C,D)=>{var A,F;A="function"==typeof C?C:(F=this.table.columnManager.getColumnByField(C))?function(K){return F.getFieldValue(K)}:function(K){return K[C]},this.groupIDLookups.push({field:"function"!=typeof C&&C,func:A,values:!!this.allowedValues&&this.allowedValues[D]})}),u&&(Array.isArray(u)||(u=[u]),u.forEach(C=>{}),this.startOpen=u),f&&(this.headerGenerator=Array.isArray(f)?f:[f])}}rowSample(s,u){var f=this.getGroups(!1)[0];return u.push(f.getRows(!1)[0]),u}virtualRenderFill(){var s=this.table.rowManager.tableElement,u=this.table.rowManager.getVisibleRows();u=u.filter(f=>"group"!==f.type),s.style.minWidth=u.length?"":this.table.columnManager.getWidth()+"px"}rowAddingIndex(s,u,f){this.assignRowToGroup(s);var _=s.modules.group.rows;return _.length>1&&(!u||u&&-1==_.indexOf(u)?f?_[0]!==s&&this.table.rowManager.moveRowInArray(s.modules.group.rows,s,u=_[0],!f):_[_.length-1]!==s&&this.table.rowManager.moveRowInArray(s.modules.group.rows,s,u=_[_.length-1],!f):this.table.rowManager.moveRowInArray(s.modules.group.rows,s,u,!f)),u}trackChanges(){this.dispatch("group-changed")}setGroupBy(s){this.table.options.groupBy=s,this.configureGroupSetup(),this.refreshData(),this.trackChanges()}setGroupValues(s){this.table.options.groupValues=s,this.configureGroupSetup(),this.refreshData(),this.trackChanges()}setGroupStartOpen(s){this.table.options.groupStartOpen=s,this.configureGroupSetup(),this.table.options.groupBy?(this.refreshData(),this.trackChanges()):console.warn("Grouping Update - cant refresh view, no groups have been set")}setGroupHeader(s){this.table.options.groupHeader=s,this.configureGroupSetup(),this.table.options.groupBy?(this.refreshData(),this.trackChanges()):console.warn("Grouping Update - cant refresh view, no groups have been set")}userGetGroups(s){return this.getGroups(!0)}userGetGroupedData(){return this.table.options.groupBy?this.getGroupedData():this.getData()}rowGetGroup(s){return!!s.modules.group&&s.modules.group.getComponent()}rowMoving(s,u,f){!f&&u instanceof rd&&(u=this.table.rowManager.prevDisplayRow(s)||u);var _=u instanceof rd?u:u.modules.group,C=s instanceof rd?s:s.modules.group;_===C?this.table.rowManager.moveRowInArray(_.rows,s,u,f):(C&&C.removeRow(s),_.insertRow(s,u,f))}rowDeleting(s){s.modules.group&&s.modules.group.removeRow(s)}rowsUpdated(s){this.updateGroupRows(!0)}cellUpdated(s){this.reassignRowToGroup(s.row)}setDisplayIndex(s){this.displayIndex=s}getDisplayIndex(){return this.displayIndex}getRows(s){return this.table.options.groupBy&&this.groupIDLookups.length?(this.dispatchExternal("dataGrouping"),this.generateGroups(s),this.subscribedExternal("dataGrouped")&&this.dispatchExternal("dataGrouped",this.getGroups(!0)),this.updateGroupRows()):s.slice(0)}getGroups(s){var u=[];return this.groupList.forEach(function(f){u.push(s?f.getComponent():f)}),u}getChildGroups(s){var u=[];return s||(s=this),s.groupList.forEach(f=>{f.groupList.length?u=u.concat(this.getChildGroups(f)):u.push(f)}),u}wipe(){this.groupList.forEach(function(s){s.wipe()})}pullGroupListData(s){var u=[];return s.forEach(f=>{var _={level:0,rowCount:0,headerContent:""},C=[];f.hasSubGroups?(C=this.pullGroupListData(f.groupList),_.level=f.level,_.rowCount=C.length-f.groupList.length,_.headerContent=f.generator(f.key,_.rowCount,f.rows,f),u.push(_),u=u.concat(C)):(_.level=f.level,_.headerContent=f.generator(f.key,f.rows.length,f.rows,f),_.rowCount=f.getRows().length,u.push(_),f.getRows().forEach(D=>{u.push(D.getData("data"))}))}),u}getGroupedData(){return this.pullGroupListData(this.groupList)}getRowGroup(s){var u=!1;return this.groupList.forEach(f=>{var _=f.getRowGroup(s);_&&(u=_)}),u}countGroups(){return this.groupList.length}generateGroups(s){var u=this.groups;this.groups={},this.groupList=[],this.allowedValues&&this.allowedValues[0]?(this.allowedValues[0].forEach(f=>{this.createGroup(f,0,u)}),s.forEach(f=>{this.assignRowToExistingGroup(f,u)})):s.forEach(f=>{this.assignRowToGroup(f,u)})}createGroup(s,u,f){var C,_=u+"_"+s;C=new rd(this,!1,u,s,this.groupIDLookups[0].field,this.headerGenerator[0],(f=f||[])[_]),this.groups[_]=C,this.groupList.push(C)}assignRowToExistingGroup(s,u){var _="0_"+this.groupIDLookups[0].func(s.getData());this.groups[_]&&this.groups[_].addRow(s)}assignRowToGroup(s,u){var f=this.groupIDLookups[0].func(s.getData()),_=!this.groups["0_"+f];return _&&this.createGroup(f,0,u),this.groups["0_"+f].addRow(s),!_}reassignRowToGroup(s){if("row"===s.type){var u=s.modules.group,f=u.getPath(),_=this.getExpectedPath(s);f.length==_.length&&f.every((D,A)=>D===_[A])||(u.removeRow(s),this.assignRowToGroup(s,this.groups),this.refreshData(!0))}}getExpectedPath(s){var u=[],f=s.getData();return this.groupIDLookups.forEach(_=>{u.push(_.func(f))}),u}updateGroupRows(s){var u=[];return this.groupList.forEach(f=>{u=u.concat(f.getHeadersAndRows())}),s&&this.refreshData(!0,this.displayHandler),u}scrollHeaders(s){"virtual"===this.table.options.renderHorizontal&&(s-=this.table.columnManager.renderer.vDomPadLeft),s+="px",this.groupList.forEach(u=>{u.scrollHeader(s)})}removeGroup(s){var f,u=s.level+"_"+s.key;this.groups[u]&&(delete this.groups[u],(f=this.groupList.indexOf(s))>-1&&this.groupList.splice(f,1))}}return m.moduleName="groupRows",m})();var C_={cellEdit:function(m){m.component.setValueProcessData(m.data.oldValue),m.component.cellRendered()},rowAdd:function(m){m.component.deleteActual()},rowDelete:function(m){var d=this.table.rowManager.addRowActual(m.data.data,m.data.pos,m.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(m.component,d)},rowMove:function(m){this.table.rowManager.moveRowActual(m.component,this.table.rowManager.rows[m.data.posFrom],!m.data.after),this.table.rowManager.redraw()}},S_={cellEdit:function(m){m.component.setValueProcessData(m.data.newValue),m.component.cellRendered()},rowAdd:function(m){var d=this.table.rowManager.addRowActual(m.data.data,m.data.pos,m.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(m.component,d)},rowDelete:function(m){m.component.deleteActual()},rowMove:function(m){this.table.rowManager.moveRowActual(m.component,this.table.rowManager.rows[m.data.posTo],m.data.after),this.table.rowManager.redraw()}};let wg=(()=>{class m extends Fi{constructor(s){super(s),this.history=[],this.index=-1,this.registerTableOption("history",!1)}initialize(){this.table.options.history&&(this.subscribe("cell-value-updated",this.cellUpdated.bind(this)),this.subscribe("cell-delete",this.clearComponentHistory.bind(this)),this.subscribe("row-delete",this.rowDeleted.bind(this)),this.subscribe("rows-wipe",this.clear.bind(this)),this.subscribe("row-added",this.rowAdded.bind(this)),this.subscribe("row-move",this.rowMoved.bind(this))),this.registerTableFunction("undo",this.undo.bind(this)),this.registerTableFunction("redo",this.redo.bind(this)),this.registerTableFunction("getHistoryUndoSize",this.getHistoryUndoSize.bind(this)),this.registerTableFunction("getHistoryRedoSize",this.getHistoryRedoSize.bind(this)),this.registerTableFunction("clearHistory",this.clear.bind(this))}rowMoved(s,u,f){this.action("rowMove",s,{posFrom:this.table.rowManager.getRowPosition(s),posTo:this.table.rowManager.getRowPosition(u),to:u,after:f})}rowAdded(s,u,f,_){this.action("rowAdd",s,{data:u,pos:f,index:_})}rowDeleted(s){var u,f;this.table.options.groupBy?(u=(f=s.getComponent().getGroup().rows).indexOf(s))&&(u=f[u-1]):(u=s.table.rowManager.getRowIndex(s))&&(u=s.table.rowManager.rows[u-1]),this.action("rowDelete",s,{data:s.getData(),pos:!u,index:u})}cellUpdated(s){this.action("cellEdit",s,{oldValue:s.oldValue,newValue:s.value})}clear(){this.history=[],this.index=-1}action(s,u,f){this.history=this.history.slice(0,this.index+1),this.history.push({type:s,component:u,data:f}),this.index++}getHistoryUndoSize(){return this.index+1}getHistoryRedoSize(){return this.history.length-(this.index+1)}clearComponentHistory(s){var u=this.history.findIndex(function(f){return f.component===s});u>-1&&(this.history.splice(u,1),u<=this.index&&this.index--,this.clearComponentHistory(s))}undo(){if(this.index>-1){let s=this.history[this.index];return m.undoers[s.type].call(this,s),this.index--,this.dispatchExternal("historyUndo",s.type,s.component.getComponent(),s.data),!0}return console.warn("History Undo Error - No more history to undo"),!1}redo(){if(this.history.length-1>this.index){this.index++;let s=this.history[this.index];return m.redoers[s.type].call(this,s),this.dispatchExternal("historyRedo",s.type,s.component.getComponent(),s.data),!0}return console.warn("History Redo Error - No more history to redo"),!1}_rebindRow(s,u){this.history.forEach(function(f){if(f.component instanceof Wo)f.component===s&&(f.component=u);else if(f.component instanceof hc&&f.component.row===s){var _=f.component.column.getField();_&&(f.component=u.getCell(_))}})}}return m.moduleName="history",m.undoers=C_,m.redoers=S_,m})(),Dg=(()=>{class m extends Fi{constructor(s){super(s),this.fieldIndex=[],this.hasIndex=!1}initialize(){this.tableElementCheck()}tableElementCheck(){this.table.originalElement&&"TABLE"===this.table.originalElement.tagName&&this.parseTable()}parseTable(){var s=this.table.originalElement,u=this.table.options,_=s.getElementsByTagName("th"),C=s.getElementsByTagName("tbody")[0],D=[];this.hasIndex=!1,this.dispatchExternal("htmlImporting"),C=C?C.getElementsByTagName("tr"):[],this._extractOptions(s,u),_.length?this._extractHeaders(_,C):this._generateBlankHeaders(_,C);for(var A=0;A<C.length;A++){var K=C[A].getElementsByTagName("td"),ut={};this.hasIndex||(ut[u.index]=A);for(var It=0;It<K.length;It++)void 0!==this.fieldIndex[It]&&(ut[this.fieldIndex[It]]=K[It].innerHTML);D.push(ut)}u.data=D,this.dispatchExternal("htmlImported")}_extractOptions(s,u,f){var _=s.attributes,C=f?Object.assign([],f):Object.keys(u),D={};for(var A in C.forEach(ut=>{D[ut.toLowerCase()]=ut}),_){var K,F=_[A];F&&"object"==typeof F&&F.name&&0===F.name.indexOf("tabulator-")&&(K=F.name.replace("tabulator-",""),void 0!==D[K]&&(u[D[K]]=this._attribValue(F.value)))}}_attribValue(s){return"true"===s||"false"!==s&&s}_findCol(s){return this.table.options.columns.find(f=>f.title===s)||!1}_extractHeaders(s,u){for(var f=0;f<s.length;f++){var A,_=s[f],C=!1,D=this._findCol(_.textContent);D?C=!0:D={title:_.textContent.trim()},D.field||(D.field=_.textContent.trim().toLowerCase().replace(" ","_")),(A=_.getAttribute("width"))&&!D.width&&(D.width=A),this._extractOptions(_,D,Ul.prototype.defaultOptionList),this.fieldIndex[f]=D.field,D.field==this.table.options.index&&(this.hasIndex=!0),C||this.table.options.columns.push(D)}}_generateBlankHeaders(s,u){for(var f=0;f<s.length;f++){var _=s[f],C={title:"",field:"col"+f};this.fieldIndex[f]=C.field;var D=_.getAttribute("width");D&&(C.width=D),this.table.options.columns.push(C)}}}return m.moduleName="htmlTableImport",m})(),Ig=(()=>{class m extends Fi{constructor(s){super(s),this.eventMap={rowClick:"row-click",rowDblClick:"row-dblclick",rowContext:"row-contextmenu",rowMouseEnter:"row-mouseenter",rowMouseLeave:"row-mouseleave",rowMouseOver:"row-mouseover",rowMouseOut:"row-mouseout",rowMouseMove:"row-mousemove",rowTap:"row",rowDblTap:"row",rowTapHold:"row",cellClick:"cell-click",cellDblClick:"cell-dblclick",cellContext:"cell-contextmenu",cellMouseEnter:"cell-mouseenter",cellMouseLeave:"cell-mouseleave",cellMouseOver:"cell-mouseover",cellMouseOut:"cell-mouseout",cellMouseMove:"cell-mousemove",cellTap:"cell",cellDblTap:"cell",cellTapHold:"cell",headerClick:"column-click",headerDblClick:"column-dblclick",headerContext:"column-contextmenu",headerMouseEnter:"column-mouseenter",headerMouseLeave:"column-mouseleave",headerMouseOver:"column-mouseover",headerMouseOut:"column-mouseout",headerMouseMove:"column-mousemove",headerTap:"column",headerDblTap:"column",headerTapHold:"column",groupClick:"group-click",groupDblClick:"group-dblclick",groupContext:"group-contextmenu",groupMouseEnter:"group-mouseenter",groupMouseLeave:"group-mouseleave",groupMouseOver:"group-mouseover",groupMouseOut:"group-mouseout",groupMouseMove:"group-mousemove",groupTap:"group",groupDblTap:"group",groupTapHold:"group"},this.subscribers={},this.touchSubscribers={},this.columnSubscribers={},this.touchWatchers={row:{tap:null,tapDbl:null,tapHold:null},cell:{tap:null,tapDbl:null,tapHold:null},column:{tap:null,tapDbl:null,tapHold:null}},this.registerColumnOption("headerClick"),this.registerColumnOption("headerDblClick"),this.registerColumnOption("headerContext"),this.registerColumnOption("headerMouseEnter"),this.registerColumnOption("headerMouseLeave"),this.registerColumnOption("headerMouseOver"),this.registerColumnOption("headerMouseOut"),this.registerColumnOption("headerMouseMove"),this.registerColumnOption("headerTap"),this.registerColumnOption("headerDblTap"),this.registerColumnOption("headerTapHold"),this.registerColumnOption("cellClick"),this.registerColumnOption("cellDblClick"),this.registerColumnOption("cellContext"),this.registerColumnOption("cellMouseEnter"),this.registerColumnOption("cellMouseLeave"),this.registerColumnOption("cellMouseOver"),this.registerColumnOption("cellMouseOut"),this.registerColumnOption("cellMouseMove"),this.registerColumnOption("cellTap"),this.registerColumnOption("cellDblTap"),this.registerColumnOption("cellTapHold")}initialize(){this.initializeExternalEvents(),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("cell-dblclick",this.cellContentsSelectionFixer.bind(this))}cellContentsSelectionFixer(s,u){if(!this.table.modExists("edit")||this.table.modules.edit.currentCell!==this){s.preventDefault();try{if(document.selection)(f=document.body.createTextRange()).moveToElementText(this.element),f.select();else if(window.getSelection){var f;(f=document.createRange()).selectNode(this.element),window.getSelection().removeAllRanges(),window.getSelection().addRange(f)}}catch(_){}}}initializeExternalEvents(){for(let s in this.eventMap)this.subscriptionChangeExternal(s,this.subscriptionChanged.bind(this,s))}subscriptionChanged(s,u){u?this.subscribers[s]||(this.eventMap[s].includes("-")?(this.subscribers[s]=this.handle.bind(this,s),this.subscribe(this.eventMap[s],this.subscribers[s])):this.subscribeTouchEvents(s)):this.eventMap[s].includes("-")?this.subscribers[s]&&!this.columnSubscribers[s]&&!this.subscribedExternal(s)&&(this.unsubscribe(this.eventMap[s],this.subscribers[s]),delete this.subscribers[s]):this.unsubscribeTouchEvents(s)}subscribeTouchEvents(s){var u=this.eventMap[s];this.touchSubscribers[u+"-touchstart"]||(this.touchSubscribers[u+"-touchstart"]=this.handleTouch.bind(this,u,"start"),this.touchSubscribers[u+"-touchend"]=this.handleTouch.bind(this,u,"end"),this.subscribe(u+"-touchstart",this.touchSubscribers[u+"-touchstart"]),this.subscribe(u+"-touchend",this.touchSubscribers[u+"-touchend"])),this.subscribers[s]=!0}unsubscribeTouchEvents(s){var u=!0,f=this.eventMap[s];if(this.subscribers[s]&&!this.subscribedExternal(s)){delete this.subscribers[s];for(let _ in this.eventMap)this.eventMap[_]===f&&this.subscribers[_]&&(u=!1);u&&(this.unsubscribe(f+"-touchstart",this.touchSubscribers[f+"-touchstart"]),this.unsubscribe(f+"-touchend",this.touchSubscribers[f+"-touchend"]),delete this.touchSubscribers[f+"-touchstart"],delete this.touchSubscribers[f+"-touchend"])}}initializeColumn(s){var u=s.definition;for(let f in this.eventMap)u[f]&&(this.subscriptionChanged(f,!0),this.columnSubscribers[f]||(this.columnSubscribers[f]=[]),this.columnSubscribers[f].push(s))}handle(s,u,f){this.dispatchEvent(s,u,f)}handleTouch(s,u,f,_){var C=this.touchWatchers[s];switch("column"===s&&(s="header"),u){case"start":C.tap=!0,clearTimeout(C.tapHold),C.tapHold=setTimeout(()=>{clearTimeout(C.tapHold),C.tapHold=null,C.tap=null,clearTimeout(C.tapDbl),C.tapDbl=null,this.dispatchEvent(s+"TapHold",f,_)},1e3);break;case"end":C.tap&&(C.tap=null,this.dispatchEvent(s+"Tap",f,_)),C.tapDbl?(clearTimeout(C.tapDbl),C.tapDbl=null,this.dispatchEvent(s+"DblTap",f,_)):C.tapDbl=setTimeout(()=>{clearTimeout(C.tapDbl),C.tapDbl=null},300),clearTimeout(C.tapHold),C.tapHold=null}}dispatchEvent(s,u,f){var C,_=f.getComponent();this.columnSubscribers[s]&&(f instanceof hc?C=f.column.definition[s]:f instanceof Ul&&(C=f.definition[s]),C&&C(u,_)),this.dispatchExternal(s,u,_)}}return m.moduleName="interaction",m})();var Mg={navPrev:"shift + 9",navNext:9,navUp:38,navDown:40,scrollPageUp:33,scrollPageDown:34,scrollToStart:36,scrollToEnd:35,undo:"ctrl + 90",redo:"ctrl + 89",copyToClipboard:"ctrl + 67"},hu={keyBlock:function(m){m.stopPropagation(),m.preventDefault()},scrollPageUp:function(m){var d=this.table.rowManager,s=d.scrollTop-d.element.clientHeight;m.preventDefault(),d.displayRowsCount&&(s>=0?d.element.scrollTop=s:d.scrollToRow(d.getDisplayRows()[0])),this.table.element.focus()},scrollPageDown:function(m){var d=this.table.rowManager,s=d.scrollTop+d.element.clientHeight,u=d.element.scrollHeight;m.preventDefault(),d.displayRowsCount&&(s<=u?d.element.scrollTop=s:d.scrollToRow(d.getDisplayRows()[d.displayRowsCount-1])),this.table.element.focus()},scrollToStart:function(m){var d=this.table.rowManager;m.preventDefault(),d.displayRowsCount&&d.scrollToRow(d.getDisplayRows()[0]),this.table.element.focus()},scrollToEnd:function(m){var d=this.table.rowManager;m.preventDefault(),d.displayRowsCount&&d.scrollToRow(d.getDisplayRows()[d.displayRowsCount-1]),this.table.element.focus()},navPrev:function(m){this.dispatch("keybinding-nav-prev",m)},navNext:function(m){this.dispatch("keybinding-nav-next",m)},navLeft:function(m){this.dispatch("keybinding-nav-left",m)},navRight:function(m){this.dispatch("keybinding-nav-right",m)},navUp:function(m){this.dispatch("keybinding-nav-up",m)},navDown:function(m){this.dispatch("keybinding-nav-down",m)},undo:function(m){this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(this.table.modules.edit.currentCell||(m.preventDefault(),this.table.modules.history.undo()))},redo:function(m){this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(this.table.modules.edit.currentCell||(m.preventDefault(),this.table.modules.history.redo()))},copyToClipboard:function(m){this.table.modules.edit.currentCell||this.table.modExists("clipboard",!0)&&this.table.modules.clipboard.copy(!1,!0)}};let Sh=(()=>{class m extends Fi{constructor(s){super(s),this.watchKeys=null,this.pressedKeys=null,this.keyupBinding=!1,this.keydownBinding=!1,this.registerTableOption("keybindings",[]),this.registerTableOption("tabEndNewRow",!1)}initialize(){var s=this.table.options.keybindings,u={};if(this.watchKeys={},this.pressedKeys=[],!1!==s){for(let f in m.bindings)u[f]=m.bindings[f];if(Object.keys(s).length)for(let f in s)u[f]=s[f];this.mapBindings(u),this.bindEvents()}this.subscribe("table-destroy",this.clearBindings.bind(this))}mapBindings(s){for(let u in s)m.actions[u]?s[u]&&("object"!=typeof s[u]&&(s[u]=[s[u]]),s[u].forEach(f=>{this.mapBinding(u,f)})):console.warn("Key Binding Error - no such action:",u)}mapBinding(s,u){var f={action:m.actions[s],keys:[],ctrl:!1,shift:!1,meta:!1};u.toString().toLowerCase().split(" ").join("").split("+").forEach(C=>{switch(C){case"ctrl":f.ctrl=!0;break;case"shift":f.shift=!0;break;case"meta":f.meta=!0;break;default:C=parseInt(C),f.keys.push(C),this.watchKeys[C]||(this.watchKeys[C]=[]),this.watchKeys[C].push(f)}})}bindEvents(){var s=this;this.keyupBinding=function(u){var f=u.keyCode,_=s.watchKeys[f];_&&(s.pressedKeys.push(f),_.forEach(function(C){s.checkBinding(u,C)}))},this.keydownBinding=function(u){var f=u.keyCode;if(s.watchKeys[f]){var C=s.pressedKeys.indexOf(f);C>-1&&s.pressedKeys.splice(C,1)}},this.table.element.addEventListener("keydown",this.keyupBinding),this.table.element.addEventListener("keyup",this.keydownBinding)}clearBindings(){this.keyupBinding&&this.table.element.removeEventListener("keydown",this.keyupBinding),this.keydownBinding&&this.table.element.removeEventListener("keyup",this.keydownBinding)}checkBinding(s,u){var f=!0;return s.ctrlKey==u.ctrl&&s.shiftKey==u.shift&&s.metaKey==u.meta&&(u.keys.forEach(_=>{-1==this.pressedKeys.indexOf(_)&&(f=!1)}),f&&u.action.call(this,s),!0)}}return m.moduleName="keybindings",m.bindings=Mg,m.actions=hu,m})(),jd=(()=>{class m extends Fi{constructor(s){super(s),this.menuElements=[],this.blurEvent=this.hideMenu.bind(this),this.escEvent=this.escMenu.bind(this),this.nestedMenuBlock=!1,this.positionReversedX=!1,this.registerTableOption("rowContextMenu",!1),this.registerTableOption("rowClickMenu",!1),this.registerTableOption("groupContextMenu",!1),this.registerTableOption("groupClickMenu",!1),this.registerColumnOption("headerContextMenu"),this.registerColumnOption("headerMenu"),this.registerColumnOption("contextMenu"),this.registerColumnOption("clickMenu")}initialize(){this.subscribe("cell-layout",this.layoutCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("row-init",this.initializeRow.bind(this))}layoutCell(s){(s.column.definition.contextMenu||s.column.definition.clickMenu)&&this.initializeCell(s)}initializeColumn(s){var u=s.definition;(u.headerContextMenu||u.headerClickMenu||u.headerMenu)&&this.initializeColumnHeader(s)}initializeColumnHeader(s){var u;s.definition.headerContextMenu&&(s.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,s,s.definition.headerContextMenu)),this.tapHold(s,s.definition.headerContextMenu)),s.definition.headerMenu&&((u=document.createElement("span")).classList.add("tabulator-header-menu-button"),u.innerHTML="&vellip;",u.addEventListener("click",f=>{f.stopPropagation(),f.preventDefault(),this.LoadMenuEvent(s,s.definition.headerMenu,f)}),s.titleElement.insertBefore(u,s.titleElement.firstChild))}LoadMenuEvent(s,u,f){u="function"==typeof u?u.call(this.table,s.getComponent(),f):u,this.loadMenu(f,s,u)}tapHold(s,u){var f=s.getElement(),_=null,C=!1;f.addEventListener("touchstart",D=>{clearTimeout(_),C=!1,_=setTimeout(()=>{clearTimeout(_),_=null,C=!0,this.LoadMenuEvent(s,u,D)},1e3)},{passive:!0}),f.addEventListener("touchend",D=>{clearTimeout(_),_=null,C&&D.preventDefault()})}initializeCell(s){s.column.definition.contextMenu&&(s.getElement(!0).addEventListener("contextmenu",this.LoadMenuEvent.bind(this,s,s.column.definition.contextMenu)),this.tapHold(s,s.column.definition.contextMenu)),s.column.definition.clickMenu&&s.getElement(!0).addEventListener("click",this.LoadMenuEvent.bind(this,s,s.column.definition.clickMenu))}initializeRow(s){this.table.options.rowContextMenu&&(s.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,s,this.table.options.rowContextMenu)),this.tapHold(s,this.table.options.rowContextMenu)),this.table.options.rowClickMenu&&s.getElement().addEventListener("click",this.LoadMenuEvent.bind(this,s,this.table.options.rowClickMenu))}initializeGroup(s){this.table.options.groupContextMenu&&(s.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,s,this.table.options.groupContextMenu)),this.tapHold(s,this.table.options.groupContextMenu)),this.table.options.groupClickMenu&&s.getElement().addEventListener("click",this.LoadMenuEvent.bind(this,s,this.table.options.groupClickMenu))}loadMenu(s,u,f,_){var C=!(s instanceof MouseEvent),D=document.createElement("div");if(D.classList.add("tabulator-menu"),C||s.preventDefault(),f&&f.length){if(!_){if(this.nestedMenuBlock){if(this.isOpen())return}else this.nestedMenuBlock=setTimeout(()=>{this.nestedMenuBlock=!1},100);this.hideMenu(),this.menuElements=[]}f.forEach(A=>{var F=document.createElement("div"),K=A.label,ut=A.disabled;A.separator?F.classList.add("tabulator-menu-separator"):(F.classList.add("tabulator-menu-item"),"function"==typeof K&&(K=K.call(this.table,u.getComponent())),K instanceof Node?F.appendChild(K):F.innerHTML=K,"function"==typeof ut&&(ut=ut.call(this.table,u.getComponent())),ut?(F.classList.add("tabulator-menu-item-disabled"),F.addEventListener("click",It=>{It.stopPropagation()})):A.menu&&A.menu.length?F.addEventListener("click",It=>{It.stopPropagation(),this.hideOldSubMenus(D),this.loadMenu(It,u,A.menu,F)}):A.action&&F.addEventListener("click",It=>{A.action(It,u.getComponent())}),A.menu&&A.menu.length&&F.classList.add("tabulator-menu-item-submenu")),D.appendChild(F)}),D.addEventListener("click",A=>{this.hideMenu()}),this.menuElements.push(D),this.positionMenu(D,_,C,s)}}hideOldSubMenus(s){var u=this.menuElements.indexOf(s);if(u>-1)for(let _=this.menuElements.length-1;_>u;_--){var f=this.menuElements[_];f.parentNode&&f.parentNode.removeChild(f),this.menuElements.pop()}}positionMenu(s,u,f,_){var D,A,F,C=Math.max(document.body.offsetHeight,window.innerHeight);u?(D=(F=Ei.elOffset(u)).left+u.offsetWidth,A=F.top-1):(D=f?_.touches[0].pageX:_.pageX,A=f?_.touches[0].pageY:_.pageY,this.positionReversedX=!1),s.style.top=A+"px",s.style.left=D+"px",setTimeout(()=>{this.table.rowManager.element.addEventListener("scroll",this.blurEvent),document.body.addEventListener("click",this.blurEvent),document.body.addEventListener("contextmenu",this.blurEvent),window.addEventListener("resize",this.blurEvent),document.body.addEventListener("keydown",this.escEvent)},100),document.body.appendChild(s),A+s.offsetHeight>=C&&(s.style.top="",s.style.bottom=u?C-F.top-u.offsetHeight-1+"px":C-A+"px"),(D+s.offsetWidth>=document.body.offsetWidth||this.positionReversedX)&&(s.style.left="",s.style.right=u?document.documentElement.offsetWidth-F.left+"px":document.documentElement.offsetWidth-D+"px",this.positionReversedX=!0)}isOpen(){return!!this.menuElements.length}escMenu(s){27==s.keyCode&&this.hideMenu()}hideMenu(){this.menuElements.forEach(s=>{s.parentNode&&s.parentNode.removeChild(s)}),document.body.removeEventListener("keydown",this.escEvent),document.body.removeEventListener("click",this.blurEvent),document.body.removeEventListener("contextmenu",this.blurEvent),window.removeEventListener("resize",this.blurEvent),this.table.rowManager.element.removeEventListener("scroll",this.blurEvent)}}return m.moduleName="menu",m})(),kc=(()=>{class m extends Fi{constructor(s){super(s),this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=250,this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.startX=0,this.autoScrollMargin=40,this.autoScrollStep=5,this.autoScrollTimeout=!1,this.touchMove=!1,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.registerTableOption("movableColumns",!1)}createPlaceholderElement(){var s=document.createElement("div");return s.classList.add("tabulator-col"),s.classList.add("tabulator-col-placeholder"),s}initialize(){this.subscribe("column-init",this.initializeColumn.bind(this))}initializeColumn(s){var _,u=this,f={};s.modules.frozen||(_=s.getElement(),f.mousemove=function(C){s.parent===u.moving.parent&&((u.touchMove?C.touches[0].pageX:C.pageX)-Ei.elOffset(_).left+u.table.columnManager.element.scrollLeft>s.getWidth()/2?(u.toCol!==s||!u.toColAfter)&&(_.parentNode.insertBefore(u.placeholderElement,_.nextSibling),u.moveColumn(s,!0)):(u.toCol!==s||u.toColAfter)&&(_.parentNode.insertBefore(u.placeholderElement,_),u.moveColumn(s,!1)))}.bind(u),_.addEventListener("mousedown",function(C){u.touchMove=!1,1===C.which&&(u.checkTimeout=setTimeout(function(){u.startMove(C,s)},u.checkPeriod))}),_.addEventListener("mouseup",function(C){1===C.which&&u.checkTimeout&&clearTimeout(u.checkTimeout)}),u.bindTouchEvents(s)),s.modules.moveColumn=f}bindTouchEvents(s){var _,C,D,A,F,K,u=s.getElement(),f=!1;u.addEventListener("touchstart",ut=>{this.checkTimeout=setTimeout(()=>{this.touchMove=!0,_=s.nextColumn(),D=_?_.getWidth()/2:0,C=s.prevColumn(),A=C?C.getWidth()/2:0,F=0,K=0,f=!1,this.startMove(ut,s)},this.checkPeriod)},{passive:!0}),u.addEventListener("touchmove",ut=>{var It,Vt;this.moving&&(this.moveHover(ut),f||(f=ut.touches[0].pageX),(It=ut.touches[0].pageX-f)>0?_&&It-F>D&&(Vt=_)!==s&&(f=ut.touches[0].pageX,Vt.getElement().parentNode.insertBefore(this.placeholderElement,Vt.getElement().nextSibling),this.moveColumn(Vt,!0)):C&&-It-K>A&&(Vt=C)!==s&&(f=ut.touches[0].pageX,Vt.getElement().parentNode.insertBefore(this.placeholderElement,Vt.getElement()),this.moveColumn(Vt,!1)),Vt&&(_=Vt.nextColumn(),F=D,D=_?_.getWidth()/2:0,C=Vt.prevColumn(),K=A,A=C?C.getWidth()/2:0))},{passive:!0}),u.addEventListener("touchend",ut=>{this.checkTimeout&&clearTimeout(this.checkTimeout),this.moving&&this.endMove(ut)})}startMove(s,u){var f=u.getElement(),_=this.table.columnManager.getElement(),C=this.table.columnManager.getHeadersElement();this.moving=u,this.startX=(this.touchMove?s.touches[0].pageX:s.pageX)-Ei.elOffset(f).left,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=u.getWidth()+"px",this.placeholderElement.style.height=u.getHeight()+"px",f.parentNode.insertBefore(this.placeholderElement,f),f.parentNode.removeChild(f),this.hoverElement=f.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.table.columnManager.getElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.bottom=_.clientHeight-C.offsetHeight+"px",this.touchMove||(this._bindMouseMove(),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove)),this.moveHover(s)}_bindMouseMove(){this.table.columnManager.columnsByIndex.forEach(function(s){s.modules.moveColumn.mousemove&&s.getElement().addEventListener("mousemove",s.modules.moveColumn.mousemove)})}_unbindMouseMove(){this.table.columnManager.columnsByIndex.forEach(function(s){s.modules.moveColumn.mousemove&&s.getElement().removeEventListener("mousemove",s.modules.moveColumn.mousemove)})}moveColumn(s,u){var f=this.moving.getCells();this.toCol=s,this.toColAfter=u,u?s.getCells().forEach(function(_,C){var D=_.getElement(!0);D.parentNode&&f[C]&&D.parentNode.insertBefore(f[C].getElement(),D.nextSibling)}):s.getCells().forEach(function(_,C){var D=_.getElement(!0);D.parentNode&&f[C]&&D.parentNode.insertBefore(f[C].getElement(),D)})}endMove(s){(1===s.which||this.touchMove)&&(this._unbindMouseMove(),this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toCol&&this.table.columnManager.moveColumnActual(this.moving,this.toCol,this.toColAfter),this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.touchMove||(document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove)))}moveHover(s){var C,u=this.table.columnManager.getElement(),f=u.scrollLeft,_=(this.touchMove?s.touches[0].pageX:s.pageX)-Ei.elOffset(u).left+f;this.hoverElement.style.left=_-this.startX+"px",_-f<this.autoScrollMargin&&(this.autoScrollTimeout||(this.autoScrollTimeout=setTimeout(()=>{C=Math.max(0,f-5),this.table.rowManager.getElement().scrollLeft=C,this.autoScrollTimeout=!1},1))),f+u.clientWidth-_<this.autoScrollMargin&&(this.autoScrollTimeout||(this.autoScrollTimeout=setTimeout(()=>{C=Math.min(u.clientWidth,f+5),this.table.rowManager.getElement().scrollLeft=C,this.autoScrollTimeout=!1},1)))}}return m.moduleName="moveColumn",m})();class Ku extends Fi{constructor(d){super(d),this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=150,this.moving=!1,this.toRow=!1,this.toRowAfter=!1,this.hasHandle=!1,this.startY=0,this.startX=0,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.tableRowDropEvent=!1,this.touchMove=!1,this.connection=!1,this.connectionSelectorsTables=!1,this.connectionSelectorsElements=!1,this.connectionElements=[],this.connections=[],this.connectedTable=!1,this.connectedRow=!1,this.registerTableOption("movableRows",!1),this.registerTableOption("movableRowsConnectedTables",!1),this.registerTableOption("movableRowsConnectedElements",!1),this.registerTableOption("movableRowsSender",!1),this.registerTableOption("movableRowsReceiver","insert"),this.registerColumnOption("rowHandle")}createPlaceholderElement(){var d=document.createElement("div");return d.classList.add("tabulator-row"),d.classList.add("tabulator-row-placeholder"),d}initialize(){this.table.options.movableRows&&(this.connectionSelectorsTables=this.table.options.movableRowsConnectedTables,this.connectionSelectorsElements=this.table.options.movableRowsConnectedElements,this.connection=this.connectionSelectorsTables||this.connectionSelectorsElements,this.subscribe("cell-init",this.initializeCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("row-init",this.initializeRow.bind(this)))}initializeGroupHeader(d){var s=this,u={};u.mouseup=function(f){s.tableRowDrop(f,row)}.bind(s),u.mousemove=function(f){if(f.pageY-Ei.elOffset(d.element).top+s.table.rowManager.element.scrollTop>d.getHeight()/2)s.toRow===d&&s.toRowAfter||((_=d.getElement()).parentNode.insertBefore(s.placeholderElement,_.nextSibling),s.moveRow(d,!0));else if(s.toRow!==d||s.toRowAfter){var _;(_=d.getElement()).previousSibling&&(_.parentNode.insertBefore(s.placeholderElement,_),s.moveRow(d,!1))}}.bind(s),d.modules.moveRow=u}initializeRow(d){var f,s=this,u={};u.mouseup=function(_){s.tableRowDrop(_,d)}.bind(s),u.mousemove=function(_){var C=d.getElement();_.pageY-Ei.elOffset(C).top+s.table.rowManager.element.scrollTop>d.getHeight()/2?(s.toRow!==d||!s.toRowAfter)&&(C.parentNode.insertBefore(s.placeholderElement,C.nextSibling),s.moveRow(d,!0)):(s.toRow!==d||s.toRowAfter)&&(C.parentNode.insertBefore(s.placeholderElement,C),s.moveRow(d,!1))}.bind(s),this.hasHandle||((f=d.getElement()).addEventListener("mousedown",function(_){1===_.which&&(s.checkTimeout=setTimeout(function(){s.startMove(_,d)},s.checkPeriod))}),f.addEventListener("mouseup",function(_){1===_.which&&s.checkTimeout&&clearTimeout(s.checkTimeout)}),this.bindTouchEvents(d,d.getElement())),d.modules.moveRow=u}initializeColumn(d){d.definition.rowHandle&&!1!==this.table.options.movableRows&&(this.hasHandle=!0)}initializeCell(d){if(d.column.definition.rowHandle&&!1!==this.table.options.movableRows){var s=this,u=d.getElement(!0);u.addEventListener("mousedown",function(f){1===f.which&&(s.checkTimeout=setTimeout(function(){s.startMove(f,d.row)},s.checkPeriod))}),u.addEventListener("mouseup",function(f){1===f.which&&s.checkTimeout&&clearTimeout(s.checkTimeout)}),this.bindTouchEvents(d.row,u)}}bindTouchEvents(d,s){var f,_,C,D,A,F,u=!1;s.addEventListener("touchstart",K=>{this.checkTimeout=setTimeout(()=>{this.touchMove=!0,f=d.nextRow(),C=f?f.getHeight()/2:0,_=d.prevRow(),D=_?_.getHeight()/2:0,A=0,F=0,u=!1,this.startMove(K,d)},this.checkPeriod)},{passive:!0}),s.addEventListener("touchmove",K=>{var ut,It;this.moving&&(K.preventDefault(),this.moveHover(K),u||(u=K.touches[0].pageY),(ut=K.touches[0].pageY-u)>0?f&&ut-A>C&&(It=f)!==d&&(u=K.touches[0].pageY,It.getElement().parentNode.insertBefore(this.placeholderElement,It.getElement().nextSibling),this.moveRow(It,!0)):_&&-ut-F>D&&(It=_)!==d&&(u=K.touches[0].pageY,It.getElement().parentNode.insertBefore(this.placeholderElement,It.getElement()),this.moveRow(It,!1)),It&&(f=It.nextRow(),A=C,C=f?f.getHeight()/2:0,_=It.prevRow(),F=D,D=_?_.getHeight()/2:0))}),s.addEventListener("touchend",K=>{this.checkTimeout&&clearTimeout(this.checkTimeout),this.moving&&(this.endMove(K),this.touchMove=!1)})}_bindMouseMove(){this.table.rowManager.getDisplayRows().forEach(d=>{("row"===d.type||"group"===d.type)&&d.modules.moveRow&&d.modules.moveRow.mousemove&&d.getElement().addEventListener("mousemove",d.modules.moveRow.mousemove)})}_unbindMouseMove(){this.table.rowManager.getDisplayRows().forEach(d=>{("row"===d.type||"group"===d.type)&&d.modules.moveRow&&d.modules.moveRow.mousemove&&d.getElement().removeEventListener("mousemove",d.modules.moveRow.mousemove)})}startMove(d,s){var u=s.getElement();this.setStartPosition(d,s),this.moving=s,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=s.getWidth()+"px",this.placeholderElement.style.height=s.getHeight()+"px",this.connection?(this.table.element.classList.add("tabulator-movingrow-sending"),this.connectToTables(s)):(u.parentNode.insertBefore(this.placeholderElement,u),u.parentNode.removeChild(u)),this.hoverElement=u.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.connection?(document.body.appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this.hoverElement.style.width=this.table.element.clientWidth+"px",this.hoverElement.style.whiteSpace="nowrap",this.hoverElement.style.overflow="hidden",this.hoverElement.style.pointerEvents="none"):(this.table.rowManager.getTableElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this._bindMouseMove()),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove),this.moveHover(d)}setStartPosition(d,s){var _,C,u=this.touchMove?d.touches[0].pageX:d.pageX,f=this.touchMove?d.touches[0].pageY:d.pageY;_=s.getElement(),this.connection?(C=_.getBoundingClientRect(),this.startX=C.left-u+window.pageXOffset,this.startY=C.top-f+window.pageYOffset):this.startY=f-_.getBoundingClientRect().top}endMove(d){(!d||1===d.which||this.touchMove)&&(this._unbindMouseMove(),this.connection||(this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement)),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toRow&&this.table.rowManager.moveRow(this.moving,this.toRow,this.toRowAfter),this.moving=!1,this.toRow=!1,this.toRowAfter=!1,document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove),this.connection&&(this.table.element.classList.remove("tabulator-movingrow-sending"),this.disconnectFromTables()))}moveRow(d,s){this.toRow=d,this.toRowAfter=s}moveHover(d){this.connection?this.moveHoverConnections.call(this,d):this.moveHoverTable.call(this,d)}moveHoverTable(d){var s=this.table.rowManager.getElement(),u=s.scrollTop,f=(this.touchMove?d.touches[0].pageY:d.pageY)-s.getBoundingClientRect().top+u;this.hoverElement.style.top=f-this.startY+"px"}moveHoverConnections(d){this.hoverElement.style.left=this.startX+(this.touchMove?d.touches[0].pageX:d.pageX)+"px",this.hoverElement.style.top=this.startY+(this.touchMove?d.touches[0].pageY:d.pageY)+"px"}elementRowDrop(d,s,u){this.dispatchExternal("movableRowsElementDrop",d,s,!!u&&u.getComponent())}connectToTables(d){var s;this.connectionSelectorsTables&&(s=this.commsConnections(this.connectionSelectorsTables),this.dispatchExternal("movableRowsSendingStart",s),this.commsSend(this.connectionSelectorsTables,"moveRow","connect",{row:d})),this.connectionSelectorsElements&&(this.connectionElements=[],Array.isArray(this.connectionSelectorsElements)||(this.connectionSelectorsElements=[this.connectionSelectorsElements]),this.connectionSelectorsElements.forEach(u=>{"string"==typeof u?this.connectionElements=this.connectionElements.concat(Array.prototype.slice.call(document.querySelectorAll(u))):this.connectionElements.push(u)}),this.connectionElements.forEach(u=>{var f=_=>{this.elementRowDrop(_,u,this.moving)};u.addEventListener("mouseup",f),u.tabulatorElementDropEvent=f,u.classList.add("tabulator-movingrow-receiving")}))}disconnectFromTables(){var d;this.connectionSelectorsTables&&(d=this.commsConnections(this.connectionSelectorsTables),this.dispatchExternal("movableRowsSendingStop",d),this.commsSend(this.connectionSelectorsTables,"moveRow","disconnect")),this.connectionElements.forEach(s=>{s.classList.remove("tabulator-movingrow-receiving"),s.removeEventListener("mouseup",s.tabulatorElementDropEvent),delete s.tabulatorElementDropEvent})}connect(d,s){return this.connectedTable?(console.warn("Move Row Error - Table cannot accept connection, already connected to table:",this.connectedTable),!1):(this.connectedTable=d,this.connectedRow=s,this.table.element.classList.add("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach(u=>{"row"===u.type&&u.modules.moveRow&&u.modules.moveRow.mouseup&&u.getElement().addEventListener("mouseup",u.modules.moveRow.mouseup)}),this.tableRowDropEvent=this.tableRowDrop.bind(this),this.table.element.addEventListener("mouseup",this.tableRowDropEvent),this.dispatchExternal("movableRowsReceivingStart",s,d),!0)}disconnect(d){d===this.connectedTable?(this.connectedTable=!1,this.connectedRow=!1,this.table.element.classList.remove("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach(s=>{"row"===s.type&&s.modules.moveRow&&s.modules.moveRow.mouseup&&s.getElement().removeEventListener("mouseup",s.modules.moveRow.mouseup)}),this.table.element.removeEventListener("mouseup",this.tableRowDropEvent),this.dispatchExternal("movableRowsReceivingStop",d)):console.warn("Move Row Error - trying to disconnect from non connected table")}dropComplete(d,s,u){var f=!1;if(u){switch(typeof this.table.options.movableRowsSender){case"string":f=this.senders[this.table.options.movableRowsSender];break;case"function":f=this.table.options.movableRowsSender}f?f.call(this,this.moving.getComponent(),s?s.getComponent():void 0,d):this.table.options.movableRowsSender&&console.warn("Mover Row Error - no matching sender found:",this.table.options.movableRowsSender),this.dispatchExternal("movableRowsSent",this.moving.getComponent(),s?s.getComponent():void 0,d)}else this.dispatchExternal("movableRowsSentFailed",this.moving.getComponent(),s?s.getComponent():void 0,d);this.endMove()}tableRowDrop(d,s){var u=!1,f=!1;switch(d.stopImmediatePropagation(),typeof this.table.options.movableRowsReceiver){case"string":u=this.receivers[this.table.options.movableRowsReceiver];break;case"function":u=this.table.options.movableRowsReceiver}u?f=u.call(this,this.connectedRow.getComponent(),s?s.getComponent():void 0,this.connectedTable):console.warn("Mover Row Error - no matching receiver found:",this.table.options.movableRowsReceiver),this.dispatchExternal(f?"movableRowsReceived":"movableRowsReceivedFailed",this.connectedRow.getComponent(),s?s.getComponent():void 0,this.connectedTable),this.commsSend(this.connectedTable,"moveRow","dropcomplete",{row:s,success:f})}commsReceived(d,s,u){switch(s){case"connect":return this.connect(d,u.row);case"disconnect":return this.disconnect(d);case"dropcomplete":return this.dropComplete(d,u.row,u.success)}}}Ku.prototype.receivers={insert:function(m,d,s){return this.table.addRow(m.getData(),void 0,d),!0},add:function(m,d,s){return this.table.addRow(m.getData()),!0},update:function(m,d,s){return!!d&&(d.update(m.getData()),!0)},replace:function(m,d,s){return!!d&&(this.table.addRow(m.getData(),void 0,d),d.delete(),!0)}},Ku.prototype.senders={delete:function(m,d,s){m.delete()}},Ku.moduleName="moveRow";var xf={};let kf=(()=>{class m extends Fi{constructor(s){super(s),this.allowedTypes=["","data","edit","clipboard"],this.enabled=!0,this.registerColumnOption("mutator"),this.registerColumnOption("mutatorParams"),this.registerColumnOption("mutatorData"),this.registerColumnOption("mutatorDataParams"),this.registerColumnOption("mutatorEdit"),this.registerColumnOption("mutatorEditParams"),this.registerColumnOption("mutatorClipboard"),this.registerColumnOption("mutatorClipboardParams")}initialize(){this.subscribe("cell-value-changing",this.transformCell.bind(this)),this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("row-data-init-before",this.rowDataChanged.bind(this)),this.subscribe("row-data-changing",this.rowDataChanged.bind(this))}rowDataChanged(s,u,f){return this.transformRow(u,"data",f)}initializeColumn(s){var u=!1,f={};this.allowedTypes.forEach(_=>{var D,C="mutator"+(_.charAt(0).toUpperCase()+_.slice(1));s.definition[C]&&(D=this.lookupMutator(s.definition[C]))&&(u=!0,f[C]={mutator:D,params:s.definition[C+"Params"]||{}})}),u&&(s.modules.mutate=f)}lookupMutator(s){var u=!1;switch(typeof s){case"string":m.mutators[s]?u=m.mutators[s]:console.warn("Mutator Error - No such mutator found, ignoring: ",s);break;case"function":u=s}return u}transformRow(s,u,f){var C,_="mutator"+(u.charAt(0).toUpperCase()+u.slice(1));return this.enabled&&this.table.columnManager.traverse(D=>{var A,F,K;D.modules.mutate&&(A=D.modules.mutate[_]||D.modules.mutate.mutator||!1)&&(C=D.getFieldValue(void 0!==f?f:s),("data"==u||void 0!==C)&&(K=D.getComponent(),F="function"==typeof A.params?A.params(C,s,u,K):A.params,D.setFieldValue(s,A.mutator(C,s,u,F,K))))}),s}transformCell(s,u){if(s.column.modules.mutate){var f=s.column.modules.mutate.mutatorEdit||s.column.modules.mutate.mutator||!1,_={};if(f)return _=Object.assign(_,s.row.getData()),s.column.setFieldValue(_,u),f.mutator(u,_,"edit",f.params,s.getComponent())}return u}enable(){this.enabled=!0}disable(){this.enabled=!1}}return m.moduleName="mutator",m.mutators=xf,m})(),Yd=(()=>{class m extends Fi{constructor(s){super(s),this.mode="local",this.progressiveLoad=!1,this.size=0,this.page=1,this.count=5,this.max=1,this.displayIndex=0,this.initialLoad=!0,this.dataChanging=!1,this.pageSizes=[],this.dataReceivedNames={},this.dataSentNames={},this.registerTableOption("pagination",!1),this.registerTableOption("paginationMode","local"),this.registerTableOption("paginationSize",!1),this.registerTableOption("paginationInitialPage",1),this.registerTableOption("paginationButtonCount",5),this.registerTableOption("paginationSizeSelector",!1),this.registerTableOption("paginationElement",!1),this.registerTableOption("paginationAddRow","page"),this.registerTableOption("progressiveLoad",!1),this.registerTableOption("progressiveLoadDelay",0),this.registerTableOption("progressiveLoadScrollMargin",0),this.registerTableFunction("setMaxPage",this.setMaxPage.bind(this)),this.registerTableFunction("setPage",this.setPage.bind(this)),this.registerTableFunction("setPageToRow",this.userSetPageToRow.bind(this)),this.registerTableFunction("setPageSize",this.userSetPageSize.bind(this)),this.registerTableFunction("getPageSize",this.getPageSize.bind(this)),this.registerTableFunction("previousPage",this.previousPage.bind(this)),this.registerTableFunction("nextPage",this.nextPage.bind(this)),this.registerTableFunction("getPage",this.getPage.bind(this)),this.registerTableFunction("getPageMax",this.getPageMax.bind(this)),this.registerComponentFunction("row","pageTo",this.setPageToRow.bind(this))}initialize(){this.table.options.pagination?(this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("row-adding-position",this.rowAddingPosition.bind(this)),this.subscribe("row-added",this.rowsUpdated.bind(this)),this.subscribe("data-processed",this.initialLoadComplete.bind(this)),this.subscribe("table-built",this.calculatePageSizes.bind(this)),"remote"===this.table.options.paginationMode&&(this.subscribe("data-params",this.remotePageParams.bind(this)),this.subscribe("data-loaded",this._parseRemoteData.bind(this))),this.table.options.progressiveLoad&&console.error("Progressive Load Error - Pagination and progressive load cannot be used at the same time"),this.registerDisplayHandler(this.restOnRenderBefore.bind(this),40),this.registerDisplayHandler(this.getRows.bind(this),50),this.createElements(),this.initializePaginator()):this.table.options.progressiveLoad&&(this.subscribe("data-params",this.remotePageParams.bind(this)),this.subscribe("data-loaded",this._parseRemoteData.bind(this)),this.subscribe("table-built",this.calculatePageSizes.bind(this)),this.initializeProgressive(this.table.options.progressiveLoad),"scroll"===this.table.options.progressiveLoad&&this.subscribe("scroll-vertical",this.scrollVertical.bind(this)))}rowAddingPosition(s,u){var C,f=this.table.rowManager,_=f.getDisplayRows();return u?_.length?C=_[0]:f.activeRows.length&&(C=f.activeRows[f.activeRows.length-1],u=!1):_.length&&(C=_[_.length-1],u=!(_.length<this.size)),{index:C,top:u}}calculatePageSizes(){var s,u;this.table.options.paginationSize?this.size=this.table.options.paginationSize:((s=document.createElement("div")).classList.add("tabulator-row"),s.style.visibility="hidden",(u=document.createElement("div")).classList.add("tabulator-cell"),u.innerHTML="Page Row Test",s.appendChild(u),this.table.rowManager.getTableElement().appendChild(s),this.size=Math.floor(this.table.rowManager.getElement().clientHeight/s.offsetHeight),this.table.rowManager.getTableElement().removeChild(s)),this.generatePageSizeSelectList()}initialLoadComplete(){this.initialLoad=!1}remotePageParams(s,u,f,_){return this.initialLoad||(this.progressiveLoad&&!f||!this.progressiveLoad&&!this.dataChanging)&&this.reset(!0),_.page=this.page,this.size&&(_.size=this.size),_}userSetPageToRow(s){return this.table.options.pagination&&(s=this.rowManager.findRow(s))?this.setPageToRow(s):Promise.reject()}userSetPageSize(s){return!!this.table.options.pagination&&(this.setPageSize(s),this.setPage(1))}scrollVertical(s,u){var f;!u&&!this.table.dataLoader.loading&&(f=this.table.rowManager.getElement()).scrollHeight-f.clientHeight-s<(this.table.options.progressiveLoadScrollMargin||2*f.clientHeight)&&this.nextPage()}restOnRenderBefore(s,u){return u||"local"===this.mode&&this.reset(),s}rowsUpdated(){this.refreshData(!0,"all")}createElements(){var s;this.element=document.createElement("span"),this.element.classList.add("tabulator-paginator"),this.pagesElement=document.createElement("span"),this.pagesElement.classList.add("tabulator-pages"),(s=document.createElement("button")).classList.add("tabulator-page"),s.setAttribute("type","button"),s.setAttribute("role","button"),s.setAttribute("aria-label",""),s.setAttribute("title",""),this.firstBut=s.cloneNode(!0),this.firstBut.setAttribute("data-page","first"),this.prevBut=s.cloneNode(!0),this.prevBut.setAttribute("data-page","prev"),this.nextBut=s.cloneNode(!0),this.nextBut.setAttribute("data-page","next"),this.lastBut=s.cloneNode(!0),this.lastBut.setAttribute("data-page","last"),this.table.options.paginationSizeSelector&&(this.pageSizeSelect=document.createElement("select"),this.pageSizeSelect.classList.add("tabulator-page-size"))}generatePageSizeSelectList(){var s=[];if(this.pageSizeSelect){if(Array.isArray(this.table.options.paginationSizeSelector))this.pageSizes=s=this.table.options.paginationSizeSelector,-1==this.pageSizes.indexOf(this.size)&&s.unshift(this.size);else if(-1==this.pageSizes.indexOf(this.size)){s=[];for(let u=1;u<5;u++)s.push(this.size*u);this.pageSizes=s}else s=this.pageSizes;for(;this.pageSizeSelect.firstChild;)this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild);s.forEach(u=>{var f=document.createElement("option");f.value=u,!0===u?this.langBind("pagination|all",function(_){f.innerHTML=_}):f.innerHTML=u,this.pageSizeSelect.appendChild(f)}),this.pageSizeSelect.value=this.size}}initializePaginator(s){var u;s||(this.langBind("pagination|first",f=>{this.firstBut.innerHTML=f}),this.langBind("pagination|first_title",f=>{this.firstBut.setAttribute("aria-label",f),this.firstBut.setAttribute("title",f)}),this.langBind("pagination|prev",f=>{this.prevBut.innerHTML=f}),this.langBind("pagination|prev_title",f=>{this.prevBut.setAttribute("aria-label",f),this.prevBut.setAttribute("title",f)}),this.langBind("pagination|next",f=>{this.nextBut.innerHTML=f}),this.langBind("pagination|next_title",f=>{this.nextBut.setAttribute("aria-label",f),this.nextBut.setAttribute("title",f)}),this.langBind("pagination|last",f=>{this.lastBut.innerHTML=f}),this.langBind("pagination|last_title",f=>{this.lastBut.setAttribute("aria-label",f),this.lastBut.setAttribute("title",f)}),this.firstBut.addEventListener("click",()=>{this.setPage(1)}),this.prevBut.addEventListener("click",()=>{this.previousPage()}),this.nextBut.addEventListener("click",()=>{this.nextPage()}),this.lastBut.addEventListener("click",()=>{this.setPage(this.max)}),this.table.options.paginationElement&&(this.element=this.table.options.paginationElement),this.pageSizeSelect&&(u=document.createElement("label"),this.langBind("pagination|page_size",f=>{this.pageSizeSelect.setAttribute("aria-label",f),this.pageSizeSelect.setAttribute("title",f),u.innerHTML=f}),this.element.appendChild(u),this.element.appendChild(this.pageSizeSelect),this.pageSizeSelect.addEventListener("change",f=>{this.setPageSize("true"==this.pageSizeSelect.value||this.pageSizeSelect.value),this.setPage(1)})),this.element.appendChild(this.firstBut),this.element.appendChild(this.prevBut),this.element.appendChild(this.pagesElement),this.element.appendChild(this.nextBut),this.element.appendChild(this.lastBut),!this.table.options.paginationElement&&!s&&this.table.footerManager.append(this.element,this),this.page=this.table.options.paginationInitialPage,this.count=this.table.options.paginationButtonCount),this.mode=this.table.options.paginationMode}initializeProgressive(s){this.initializePaginator(!0),this.mode="progressive_"+s,this.progressiveLoad=!0}trackChanges(){this.dispatch("page-changed")}setDisplayIndex(s){this.displayIndex=s}getDisplayIndex(){return this.displayIndex}setMaxRows(s){this.max=s?!0===this.size?1:Math.ceil(s/this.size):1,this.page>this.max&&(this.page=this.max)}reset(s){this.initialLoad||("local"==this.mode||s)&&(this.page=1)}setMaxPage(s){s=parseInt(s),this.max=s||1,this.page>this.max&&(this.page=this.max,this.trigger())}setPage(s){switch(s){case"first":return this.setPage(1);case"prev":return this.previousPage();case"next":return this.nextPage();case"last":return this.setPage(this.max)}return(s=parseInt(s))>0&&s<=this.max||"local"!==this.mode?(this.page=s,this.trackChanges(),this.trigger()):(console.warn("Pagination Error - Requested page is out of range of 1 - "+this.max+":",s),Promise.reject())}setPageToRow(s){var f=this.table.rowManager.getDisplayRows(this.displayIndex-1).indexOf(s);if(f>-1){var _=!0===this.size?1:Math.ceil((f+1)/this.size);return this.setPage(_)}return console.warn("Pagination Error - Requested row is not visible"),Promise.reject()}setPageSize(s){!0!==s&&(s=parseInt(s)),s>0&&(this.size=s),this.pageSizeSelect&&this.generatePageSizeSelectList(),this.trackChanges()}_setPageButtons(){let s=Math.floor((this.count-1)/2),u=Math.ceil((this.count-1)/2),f=this.max-this.page+s+1<this.count?this.max-this.count+1:Math.max(this.page-s,1),_=this.page<=u?Math.min(this.count,this.max):Math.min(this.page+u,this.max);for(;this.pagesElement.firstChild;)this.pagesElement.removeChild(this.pagesElement.firstChild);1==this.page?(this.firstBut.disabled=!0,this.prevBut.disabled=!0):(this.firstBut.disabled=!1,this.prevBut.disabled=!1),this.page==this.max?(this.lastBut.disabled=!0,this.nextBut.disabled=!0):(this.lastBut.disabled=!1,this.nextBut.disabled=!1);for(let C=f;C<=_;C++)C>0&&C<=this.max&&this.pagesElement.appendChild(this._generatePageButton(C));this.footerRedraw()}_generatePageButton(s){var u=document.createElement("button");return u.classList.add("tabulator-page"),s==this.page&&u.classList.add("active"),u.setAttribute("type","button"),u.setAttribute("role","button"),this.langBind("pagination|page_title",f=>{u.setAttribute("aria-label",f+" "+s),u.setAttribute("title",f+" "+s)}),u.setAttribute("data-page",s),u.textContent=s,u.addEventListener("click",f=>{this.setPage(s)}),u}previousPage(){return this.page>1?(this.page--,this.trackChanges(),this.trigger()):(console.warn("Pagination Error - Previous page would be less than page 1:",0),Promise.reject())}nextPage(){return this.page<this.max?(this.page++,this.trackChanges(),this.trigger()):(this.progressiveLoad||console.warn("Pagination Error - Next page would be greater than maximum page of "+this.max+":",this.max+1),Promise.reject())}getPage(){return this.page}getPageMax(){return this.max}getPageSize(s){return this.size}getMode(){return this.mode}getRows(s){var u,f,_;if("local"==this.mode){u=[],this.setMaxRows(s.length),!0===this.size?(f=0,_=s.length):_=(f=this.size*(this.page-1))+parseInt(this.size),this._setPageButtons();for(let C=f;C<_;C++)s[C]&&u.push(s[C]);return u}return this._setPageButtons(),s.slice(0)}trigger(){var s;switch(this.mode){case"local":return s=this.table.rowManager.scrollLeft,this.refreshData(),this.table.rowManager.scrollHorizontal(s),this.dispatchExternal("pageLoaded",this.getPage()),Promise.resolve();case"remote":return this.dataChanging=!0,this.reloadData(null).finally(()=>{this.dataChanging=!1});case"progressive_load":case"progressive_scroll":return this.reloadData(null,!0);default:return console.warn("Pagination Error - no such pagination mode:",this.mode),Promise.reject()}}_parseRemoteData(s){if(void 0===s.last_page&&console.warn("Remote Pagination Error - Server response missing '"+this.dataReceivedNames.last_page+"' property"),s.data){if(this.max=parseInt(s.last_page)||1,this.progressiveLoad){switch(this.mode){case"progressive_load":1==this.page?this.table.rowManager.setData(s.data,!1,1==this.page):this.table.rowManager.addRows(s.data),this.page<this.max&&setTimeout(()=>{this.nextPage()},this.table.options.progressiveLoadDelay);break;case"progressive_scroll":s=this.table.rowManager.getData().concat(s.data),this.table.rowManager.setData(s,1!==this.page,1==this.page),this.table.rowManager.element.scrollHeight<=this.table.rowManager.element.clientHeight+(this.table.options.progressiveLoadScrollMargin||2*this.table.rowManager.element.clientHeight)&&setTimeout(()=>{this.nextPage()})}return!1}this.dispatchExternal("pageLoaded",this.getPage())}else console.warn("Remote Pagination Error - Server response missing '"+this.dataReceivedNames.data+"' property");return s.data}footerRedraw(){var s=this.table.footerManager.element;Math.ceil(s.clientWidth)-s.scrollWidth<0?this.pagesElement.style.display="none":(this.pagesElement.style.display="",Math.ceil(s.clientWidth)-s.scrollWidth<0&&(this.pagesElement.style.display="none"))}}return m.moduleName="page",m})();var Ap={local:function(m,d){var s=localStorage.getItem(m+"-"+d);return!!s&&JSON.parse(s)},cookie:function(m,d){var _,C,s=document.cookie,u=m+"-"+d,f=s.indexOf(u+"=");return f>-1&&((_=(s=s.substr(f)).indexOf(";"))>-1&&(s=s.substr(0,_)),C=s.replace(u+"=","")),!!C&&JSON.parse(C)}},ad={local:function(m,d,s){localStorage.setItem(m+"-"+d,JSON.stringify(s))},cookie:function(m,d,s){var u=new Date;u.setDate(u.getDate()+1e4),document.cookie=m+"-"+d+"="+JSON.stringify(s)+"; expires="+u.toUTCString()}};let Xd=(()=>{class m extends Fi{constructor(s){super(s),this.mode="",this.id="",this.defWatcherBlock=!1,this.config={},this.readFunc=!1,this.writeFunc=!1,this.registerTableOption("persistence",!1),this.registerTableOption("persistenceID",""),this.registerTableOption("persistenceMode",!0),this.registerTableOption("persistenceReaderFunc",!1),this.registerTableOption("persistenceWriterFunc",!1)}localStorageTest(){var s="_tabulator_test";try{return window.localStorage.setItem(s,s),window.localStorage.removeItem(s),!0}catch(u){return!1}}initialize(){if(this.table.options.persistence){var f,s=this.table.options.persistenceMode,u=this.table.options.persistenceID;this.mode=!0!==s?s:this.localStorageTest()?"local":"cookie",this.table.options.persistenceReaderFunc?"function"==typeof this.table.options.persistenceReaderFunc?this.readFunc=this.table.options.persistenceReaderFunc:m.readers[this.table.options.persistenceReaderFunc]?this.readFunc=m.readers[this.table.options.persistenceReaderFunc]:console.warn("Persistence Read Error - invalid reader set",this.table.options.persistenceReaderFunc):m.readers[this.mode]?this.readFunc=m.readers[this.mode]:console.warn("Persistence Read Error - invalid reader set",this.mode),this.table.options.persistenceWriterFunc?"function"==typeof this.table.options.persistenceWriterFunc?this.writeFunc=this.table.options.persistenceWriterFunc:m.writers[this.table.options.persistenceWriterFunc]?this.writeFunc=m.writers[this.table.options.persistenceWriterFunc]:console.warn("Persistence Write Error - invalid reader set",this.table.options.persistenceWriterFunc):m.writers[this.mode]?this.writeFunc=m.writers[this.mode]:console.warn("Persistence Write Error - invalid writer set",this.mode),this.id="tabulator-"+(u||this.table.element.getAttribute("id")||""),this.config={sort:!0===this.table.options.persistence||this.table.options.persistence.sort,filter:!0===this.table.options.persistence||this.table.options.persistence.filter,group:!0===this.table.options.persistence||this.table.options.persistence.group,page:!0===this.table.options.persistence||this.table.options.persistence.page,columns:!0===this.table.options.persistence?["title","width","visible"]:this.table.options.persistence.columns},this.config.page&&(f=this.retreiveData("page"))&&(void 0!==f.paginationSize&&(!0===this.config.page||this.config.page.size)&&(this.table.options.paginationSize=f.paginationSize),void 0!==f.paginationInitialPage&&(!0===this.config.page||this.config.page.page)&&(this.table.options.paginationInitialPage=f.paginationInitialPage)),this.config.group&&(f=this.retreiveData("group"))&&(void 0!==f.groupBy&&(!0===this.config.group||this.config.group.groupBy)&&(this.table.options.groupBy=f.groupBy),void 0!==f.groupStartOpen&&(!0===this.config.group||this.config.group.groupStartOpen)&&(this.table.options.groupStartOpen=f.groupStartOpen),void 0!==f.groupHeader&&(!0===this.config.group||this.config.group.groupHeader)&&(this.table.options.groupHeader=f.groupHeader)),this.config.columns&&(this.table.options.columns=this.load("columns",this.table.options.columns),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-show",this.save.bind(this,"columns")),this.subscribe("column-hide",this.save.bind(this,"columns")),this.subscribe("column-moved",this.save.bind(this,"columns")),this.subscribe("table-built",this.tableBuilt.bind(this),0)),this.subscribe("table-redraw",this.tableRedraw.bind(this)),this.subscribe("filter-changed",this.eventSave.bind(this,"filter")),this.subscribe("sort-changed",this.eventSave.bind(this,"sort")),this.subscribe("group-changed",this.eventSave.bind(this,"group")),this.subscribe("page-changed",this.eventSave.bind(this,"page")),this.subscribe("column-resized",this.eventSave.bind(this,"columns")),this.subscribe("layout-refreshed",this.eventSave.bind(this,"columns"))}this.registerTableFunction("getColumnLayout",this.getColumnLayout.bind(this)),this.registerTableFunction("setColumnLayout",this.setColumnLayout.bind(this))}eventSave(s){this.config[s]&&this.save(s)}tableBuilt(){var u,f;this.config.sort&&(u=this.load("sort"))&&(this.table.initialSort=u),this.config.filter&&(f=this.load("filter"))&&(this.table.initialFilter=f)}tableRedraw(s){s&&this.config.columns&&this.save("columns")}getColumnLayout(){return this.parseColumns(this.table.columnManager.getColumns())}setColumnLayout(s){return this.table.columnManager.setColumns(this.mergeDefinition(this.table.options.columns,s)),!0}initializeColumn(s){var u;this.config.columns&&(this.defWatcherBlock=!0,u=s.getDefinition(),(!0===this.config.columns?Object.keys(u):this.config.columns).forEach(_=>{var C=Object.getOwnPropertyDescriptor(u,_),D=u[_];C&&Object.defineProperty(u,_,{set:function(A){D=A,this.defWatcherBlock||this.save("columns"),C.set&&C.set(A)},get:function(){return C.get&&C.get(),D}})}),this.defWatcherBlock=!1)}load(s,u){var f=this.retreiveData(s);return u&&(f=f?this.mergeDefinition(u,f):u),f}retreiveData(s){return!!this.readFunc&&this.readFunc(this.id,s)}mergeDefinition(s,u){var f=[];return(u=u||[]).forEach((_,C)=>{var A,D=this._findColumn(s,_);D&&(!0===this.config.columns||null==this.config.columns?(A=Object.keys(D)).push("width"):A=this.config.columns,A.forEach(F=>{"columns"!==F&&void 0!==_[F]&&(D[F]=_[F])}),D.columns&&(D.columns=this.mergeDefinition(D.columns,_.columns)),f.push(D))}),s.forEach((_,C)=>{this._findColumn(u,_)||(f.length>C?f.splice(C,0,_):f.push(_))}),f}_findColumn(s,u){var f=u.columns?"group":u.field?"field":"object";return s.find(function(_){switch(f){case"group":return _.title===u.title&&_.columns.length===u.columns.length;case"field":return _.field===u.field;case"object":return _===u}})}save(s){var u={};switch(s){case"columns":u=this.parseColumns(this.table.columnManager.getColumns());break;case"filter":u=this.table.modules.filter.getFilters();break;case"sort":u=this.validateSorters(this.table.modules.sort.getSort());break;case"group":u=this.getGroupConfig();break;case"page":u=this.getPageConfig()}this.writeFunc&&this.writeFunc(this.id,s,u)}validateSorters(s){return s.forEach(function(u){u.column=u.field,delete u.field}),s}getGroupConfig(){var s={};return this.config.group&&((!0===this.config.group||this.config.group.groupBy)&&(s.groupBy=this.table.options.groupBy),(!0===this.config.group||this.config.group.groupStartOpen)&&(s.groupStartOpen=this.table.options.groupStartOpen),(!0===this.config.group||this.config.group.groupHeader)&&(s.groupHeader=this.table.options.groupHeader)),s}getPageConfig(){var s={};return this.config.page&&((!0===this.config.page||this.config.page.size)&&(s.paginationSize=this.table.modules.page.getPageSize()),(!0===this.config.page||this.config.page.page)&&(s.paginationInitialPage=this.table.modules.page.getPage())),s}parseColumns(s){var u=[],f=["headerContextMenu","headerMenu","contextMenu","clickMenu"];return s.forEach(_=>{var A,C={},D=_.getDefinition();_.isGroup?(C.title=D.title,C.columns=this.parseColumns(_.getColumns())):(C.field=_.getField(),!0===this.config.columns||null==this.config.columns?(A=Object.keys(D)).push("width"):A=this.config.columns,A.forEach(F=>{switch(F){case"width":C.width=_.getWidth();break;case"visible":C.visible=_.visible;break;default:"function"!=typeof D[F]&&-1===f.indexOf(F)&&(C[F]=D[F])}})),u.push(C)}),u}}return m.moduleName="persistence",m.readers=Ap,m.writers=ad,m})(),Lc=(()=>{class m extends Fi{constructor(s){super(s),this.element=!1,this.manualBlock=!1,this.registerTableOption("printAsHtml",!1),this.registerTableOption("printFormatter",!1),this.registerTableOption("printHeader",!1),this.registerTableOption("printFooter",!1),this.registerTableOption("printStyled",!0),this.registerTableOption("printRowRange","visible"),this.registerTableOption("printConfig",{}),this.registerColumnOption("print"),this.registerColumnOption("titlePrint")}initialize(){this.table.options.printAsHtml&&(window.addEventListener("beforeprint",this.replaceTable.bind(this)),window.addEventListener("afterprint",this.cleanup.bind(this))),this.registerTableFunction("print",this.printFullscreen.bind(this))}replaceTable(){this.manualBlock||(this.element=document.createElement("div"),this.element.classList.add("tabulator-print-table"),this.element.appendChild(this.table.modules.export.genereateTable(this.table.options.printConfig,this.table.options.printStyled,this.table.options.printRowRange,"print")),this.table.element.style.display="none",this.table.element.parentNode.insertBefore(this.element,this.table.element))}cleanup(){document.body.classList.remove("tabulator-print-fullscreen-hide"),this.element&&this.element.parentNode&&(this.element.parentNode.removeChild(this.element),this.table.element.style.display="")}printFullscreen(s,u,f){var K,ut,_=window.scrollX,C=window.scrollY,D=document.createElement("div"),A=document.createElement("div"),F=this.table.modules.export.genereateTable(void 0!==f?f:this.table.options.printConfig,void 0!==u?u:this.table.options.printStyled,s||this.table.options.printRowRange,"print");this.manualBlock=!0,this.element=document.createElement("div"),this.element.classList.add("tabulator-print-fullscreen"),this.table.options.printHeader&&(D.classList.add("tabulator-print-header"),"string"==typeof(K="function"==typeof this.table.options.printHeader?this.table.options.printHeader.call(this.table):this.table.options.printHeader)?D.innerHTML=K:D.appendChild(K),this.element.appendChild(D)),this.element.appendChild(F),this.table.options.printFooter&&(A.classList.add("tabulator-print-footer"),"string"==typeof(ut="function"==typeof this.table.options.printFooter?this.table.options.printFooter.call(this.table):this.table.options.printFooter)?A.innerHTML=ut:A.appendChild(ut),this.element.appendChild(A)),document.body.classList.add("tabulator-print-fullscreen-hide"),document.body.appendChild(this.element),this.table.options.printFormatter&&this.table.options.printFormatter(this.element,F),window.print(),this.cleanup(),window.scrollTo(_,C),this.manualBlock=!1}}return m.moduleName="print",m})(),Op=(()=>{class m extends Fi{constructor(s){super(s),this.data=!1,this.blocked=!1,this.origFuncs={},this.currentVersion=0,this.registerTableOption("reactiveData",!1)}initialize(){this.table.options.reactiveData&&(this.subscribe("cell-value-save-before",this.block.bind(this)),this.subscribe("cell-value-save-after",this.unblock.bind(this)),this.subscribe("row-data-save-before",this.block.bind(this)),this.subscribe("row-data-save-after",this.unblock.bind(this)),this.subscribe("row-data-init-after",this.watchRow.bind(this)),this.subscribe("data-processing",this.watchData.bind(this)),this.subscribe("table-destroy",this.unwatchData.bind(this)))}watchData(s){var f,u=this;this.currentVersion++,f=this.currentVersion,this.unwatchData(),this.data=s,this.origFuncs.push=s.push,Object.defineProperty(this.data,"push",{enumerable:!1,configurable:!0,value:function(){var _=Array.from(arguments);return!u.blocked&&f===u.currentVersion&&_.forEach(C=>{u.table.rowManager.addRowActual(C,!1)}),u.origFuncs.push.apply(s,arguments)}}),this.origFuncs.unshift=s.unshift,Object.defineProperty(this.data,"unshift",{enumerable:!1,configurable:!0,value:function(){var _=Array.from(arguments);return!u.blocked&&f===u.currentVersion&&_.forEach(C=>{u.table.rowManager.addRowActual(C,!0)}),u.origFuncs.unshift.apply(s,arguments)}}),this.origFuncs.shift=s.shift,Object.defineProperty(this.data,"shift",{enumerable:!1,configurable:!0,value:function(){var _;return!u.blocked&&f===u.currentVersion&&u.data.length&&(_=u.table.rowManager.getRowFromDataObject(u.data[0]))&&_.deleteActual(),u.origFuncs.shift.call(s)}}),this.origFuncs.pop=s.pop,Object.defineProperty(this.data,"pop",{enumerable:!1,configurable:!0,value:function(){var _;return!u.blocked&&f===u.currentVersion&&u.data.length&&(_=u.table.rowManager.getRowFromDataObject(u.data[u.data.length-1]))&&_.deleteActual(),u.origFuncs.pop.call(s)}}),this.origFuncs.splice=s.splice,Object.defineProperty(this.data,"splice",{enumerable:!1,configurable:!0,value:function(){var F,_=Array.from(arguments),C=_[0]<0?s.length+_[0]:_[0],D=_[1],A=!!_[2]&&_.slice(2);if(!u.blocked&&f===u.currentVersion){if(A&&((F=!!s[C]&&u.table.rowManager.getRowFromDataObject(s[C]))?A.forEach(ut=>{u.table.rowManager.addRowActual(ut,!0,F,!0)}):(A=A.slice().reverse()).forEach(ut=>{u.table.rowManager.addRowActual(ut,!0,!1,!0)})),0!==D){var K=s.slice(C,void 0===_[1]?_[1]:C+D);K.forEach((ut,It)=>{var Vt=u.table.rowManager.getRowFromDataObject(ut);Vt&&Vt.deleteActual(It!==K.length-1)})}(A||0!==D)&&u.table.rowManager.reRenderInPosition()}return u.origFuncs.splice.apply(s,arguments)}})}unwatchData(){if(!1!==this.data)for(var s in this.origFuncs)Object.defineProperty(this.data,s,{enumerable:!0,configurable:!0,writable:!0,value:this.origFuncs.key})}watchRow(s){var u=s.getData();for(var f in this.blocked=!0,u)this.watchKey(s,u,f);this.table.options.dataTree&&this.watchTreeChildren(s),this.blocked=!1}watchTreeChildren(s){var u=s.getData()[this.table.options.dataTreeChildField],f={};function _(){this.table.modules.dataTree.initializeRow(s),this.table.modules.dataTree.layoutRow(s),this.table.rowManager.refreshActiveData("tree",!1,!0)}u&&(f.push=u.push,Object.defineProperty(u,"push",{enumerable:!1,configurable:!0,value:()=>{var C=f.push.apply(u,arguments);return _(),C}}),f.unshift=u.unshift,Object.defineProperty(u,"unshift",{enumerable:!1,configurable:!0,value:()=>{var C=f.unshift.apply(u,arguments);return _(),C}}),f.shift=u.shift,Object.defineProperty(u,"shift",{enumerable:!1,configurable:!0,value:()=>{var C=f.shift.call(u);return _(),C}}),f.pop=u.pop,Object.defineProperty(u,"pop",{enumerable:!1,configurable:!0,value:()=>{var C=f.pop.call(u);return _(),C}}),f.splice=u.splice,Object.defineProperty(u,"splice",{enumerable:!1,configurable:!0,value:()=>{var C=f.splice.apply(u,arguments);return _(),C}}))}watchKey(s,u,f){var _=Object.getOwnPropertyDescriptor(u,f),C=u[f],D=this.currentVersion;Object.defineProperty(u,f,{set:A=>{if(C=A,!this.blocked&&D===this.currentVersion){var F={};F[f]=A,s.updateData(F)}_.set&&_.set(A)},get:()=>(_.get&&_.get(),C)})}unwatchRow(s){var u=s.getData();for(var f in u)Object.defineProperty(u,f,{value:u[f]})}block(){this.blocked=!0}unblock(){this.blocked=!1}}return m.moduleName="reactiveData",m})(),Lf=(()=>{class m extends Fi{constructor(s){super(s),this.startColumn=!1,this.startX=!1,this.startWidth=!1,this.handle=null,this.prevHandle=null,this.registerColumnOption("resizable",!0)}initialize(){this.subscribe("cell-layout",this.layoutCellHandles.bind(this)),this.subscribe("column-init",this.layoutColumnHeader.bind(this))}layoutCellHandles(s){"row"===s.row.type&&this.initializeColumn("cell",s.column,s.element)}layoutColumnHeader(s){this.initializeColumn("header",s,s.element)}initializeColumn(s,u,f){var _=this,D=u.definition.resizable;if("header"===s&&(u.modules.resize={variableHeight:"textarea"==u.definition.formatter||u.definition.variableHeight}),!0===D||D==s){var A=document.createElement("div");A.className="tabulator-col-resize-handle";var F=document.createElement("div");F.className="tabulator-col-resize-handle prev",A.addEventListener("click",function(It){It.stopPropagation()});var K=function(It){var Vt=u.getLastColumn();Vt&&_._checkResizability(Vt)&&(_.startColumn=u,_._mouseDown(It,Vt,A))};A.addEventListener("mousedown",K),A.addEventListener("touchstart",K,{passive:!0}),A.addEventListener("dblclick",function(It){var Vt=u.getLastColumn();Vt&&_._checkResizability(Vt)&&(It.stopPropagation(),Vt.reinitializeWidth(!0))}),F.addEventListener("click",function(It){It.stopPropagation()});var ut=function(It){var Vt,ee,he;(Vt=u.getFirstColumn())&&(he=(ee=_.table.columnManager.findColumnIndex(Vt))>0&&_.table.columnManager.getColumnByIndex(ee-1))&&_._checkResizability(he)&&(_.startColumn=u,_._mouseDown(It,he,F))};F.addEventListener("mousedown",ut),F.addEventListener("touchstart",ut,{passive:!0}),F.addEventListener("dblclick",function(It){var Vt,ee,he;(Vt=u.getFirstColumn())&&(he=(ee=_.table.columnManager.findColumnIndex(Vt))>0&&_.table.columnManager.getColumnByIndex(ee-1))&&_._checkResizability(he)&&(It.stopPropagation(),he.reinitializeWidth(!0))}),f.appendChild(A),f.appendChild(F)}}_checkResizability(s){return s.definition.resizable}_mouseDown(s,u,f){var _=this;function C(A){u.setWidth(_.table.rtl?_.startWidth-((void 0===A.screenX?A.touches[0].screenX:A.screenX)-_.startX):_.startWidth+((void 0===A.screenX?A.touches[0].screenX:A.screenX)-_.startX)),_.table.columnManager.renderer.rerenderColumns(!0),!_.table.browserSlow&&u.modules.resize&&u.modules.resize.variableHeight&&u.checkCellHeights()}function D(A){_.startColumn.modules.edit&&(_.startColumn.modules.edit.blocked=!1),_.table.browserSlow&&u.modules.resize&&u.modules.resize.variableHeight&&u.checkCellHeights(),document.body.removeEventListener("mouseup",D),document.body.removeEventListener("mousemove",C),f.removeEventListener("touchmove",C),f.removeEventListener("touchend",D),_.table.element.classList.remove("tabulator-block-select"),_.dispatch("column-resized",u),_.table.externalEvents.dispatch("columnResized",u.getComponent())}_.table.element.classList.add("tabulator-block-select"),s.stopPropagation(),_.startColumn.modules.edit&&(_.startColumn.modules.edit.blocked=!0),_.startX=void 0===s.screenX?s.touches[0].screenX:s.screenX,_.startWidth=u.getWidth(),document.body.addEventListener("mousemove",C),document.body.addEventListener("mouseup",D),f.addEventListener("touchmove",C,{passive:!0}),f.addEventListener("touchend",D)}}return m.moduleName="resizeColumns",m})(),Ag=(()=>{class m extends Fi{constructor(s){super(s),this.startColumn=!1,this.startY=!1,this.startHeight=!1,this.handle=null,this.prevHandle=null,this.registerTableOption("resizableRows",!1)}initialize(){this.table.options.resizableRows&&this.subscribe("row-layout-after",this.initializeRow.bind(this))}initializeRow(s){var u=this,f=s.getElement(),_=document.createElement("div");_.className="tabulator-row-resize-handle";var C=document.createElement("div");C.className="tabulator-row-resize-handle prev",_.addEventListener("click",function(F){F.stopPropagation()});var D=function(F){u.startRow=s,u._mouseDown(F,s,_)};_.addEventListener("mousedown",D),_.addEventListener("touchstart",D,{passive:!0}),C.addEventListener("click",function(F){F.stopPropagation()});var A=function(F){var K=u.table.rowManager.prevDisplayRow(s);K&&(u.startRow=K,u._mouseDown(F,K,C))};C.addEventListener("mousedown",A),C.addEventListener("touchstart",A,{passive:!0}),f.appendChild(_),f.appendChild(C)}_mouseDown(s,u,f){var _=this;function C(A){u.setHeight(_.startHeight+((void 0===A.screenY?A.touches[0].screenY:A.screenY)-_.startY))}function D(A){document.body.removeEventListener("mouseup",C),document.body.removeEventListener("mousemove",C),f.removeEventListener("touchmove",C),f.removeEventListener("touchend",D),_.table.element.classList.remove("tabulator-block-select"),this.dispatchExternal("rowResized",u.getComponent())}_.table.element.classList.add("tabulator-block-select"),s.stopPropagation(),_.startY=void 0===s.screenY?s.touches[0].screenY:s.screenY,_.startHeight=u.getHeight(),document.body.addEventListener("mousemove",C),document.body.addEventListener("mouseup",D),f.addEventListener("touchmove",C,{passive:!0}),f.addEventListener("touchend",D)}}return m.moduleName="resizeRows",m})(),Rh=(()=>{class m extends Fi{constructor(s){super(s),this.binding=!1,this.observer=!1,this.containerObserver=!1,this.tableHeight=0,this.tableWidth=0,this.containerHeight=0,this.containerWidth=0,this.autoResize=!1,this.registerTableOption("autoResize",!0)}initialize(){if(this.table.options.autoResize){var u,s=this.table;this.tableHeight=s.element.clientHeight,this.tableWidth=s.element.clientWidth,s.element.parentNode&&(this.containerHeight=s.element.parentNode.clientHeight,this.containerWidth=s.element.parentNode.clientWidth),"undefined"!=typeof ResizeObserver&&"virtual"===s.rowManager.getRenderMode()?(this.autoResize=!0,this.observer=new ResizeObserver(f=>{if(!s.browserMobile||s.browserMobile&&!s.modules.edit.currentCell){var _=Math.floor(f[0].contentRect.height),C=Math.floor(f[0].contentRect.width);(this.tableHeight!=_||this.tableWidth!=C)&&(this.tableHeight=_,this.tableWidth=C,s.element.parentNode&&(this.containerHeight=s.element.parentNode.clientHeight,this.containerWidth=s.element.parentNode.clientWidth),this.table.columnManager.renderer.rerenderColumns(!0),s.redraw())}}),this.observer.observe(s.element),u=window.getComputedStyle(s.element),this.table.element.parentNode&&!this.table.rowManager.fixedHeight&&(u.getPropertyValue("max-height")||u.getPropertyValue("min-height"))&&(this.containerObserver=new ResizeObserver(f=>{if(!s.browserMobile||s.browserMobile&&!s.modules.edit.currentCell){var _=Math.floor(f[0].contentRect.height),C=Math.floor(f[0].contentRect.width);(this.containerHeight!=_||this.containerWidth!=C)&&(this.containerHeight=_,this.containerWidth=C,this.tableHeight=s.element.clientHeight,this.tableWidth=s.element.clientWidth),s.columnManager.renderer.rerenderColumns(!0),s.redraw()}}),this.containerObserver.observe(this.table.element.parentNode)),this.subscribe("table-resize",this.tableResized.bind(this))):(this.binding=function(){(!s.browserMobile||s.browserMobile&&!s.modules.edit.currentCell)&&(s.columnManager.renderer.rerenderColumns(!0),s.redraw())},window.addEventListener("resize",this.binding)),this.subscribe("table-destroy",this.clearBindings.bind(this))}}tableResized(){this.table.rowManager.redraw()}clearBindings(){this.binding&&window.removeEventListener("resize",this.binding),this.observer&&this.observer.unobserve(this.table.element),this.containerObserver&&this.containerObserver.unobserve(this.table.element.parentNode)}}return m.moduleName="resizeTable",m})(),Ju=(()=>{class m extends Fi{constructor(s){super(s),this.columns=[],this.hiddenColumns=[],this.mode="",this.index=0,this.collapseFormatter=[],this.collapseStartOpen=!0,this.collapseHandleColumn=!1,this.registerTableOption("responsiveLayout",!1),this.registerTableOption("responsiveLayoutCollapseStartOpen",!0),this.registerTableOption("responsiveLayoutCollapseUseFormatters",!0),this.registerTableOption("responsiveLayoutCollapseFormatter",!1),this.registerColumnOption("responsive")}initialize(){this.table.options.responsiveLayout&&(this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("column-show",this.updateColumnVisibility.bind(this)),this.subscribe("column-hide",this.updateColumnVisibility.bind(this)),this.subscribe("columns-loaded",this.initializeResponsivity.bind(this)),this.subscribe("column-moved",this.initializeResponsivity.bind(this)),this.subscribe("column-add",this.initializeResponsivity.bind(this)),this.subscribe("column-delete",this.initializeResponsivity.bind(this)),this.subscribe("table-redrawing",this.tableRedraw.bind(this)),"collapse"===this.table.options.responsiveLayout&&(this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-layout",this.layoutRow.bind(this))))}tableRedraw(s){-1===["fitColumns","fitDataStretch"].indexOf(this.layoutMode())&&(s||this.update())}initializeResponsivity(){var s=[];this.mode=this.table.options.responsiveLayout,this.collapseFormatter=this.table.options.responsiveLayoutCollapseFormatter||this.formatCollapsedData,this.collapseStartOpen=this.table.options.responsiveLayoutCollapseStartOpen,this.hiddenColumns=[],this.table.columnManager.columnsByIndex.forEach(function(u,f){u.modules.responsive&&u.modules.responsive.order&&u.modules.responsive.visible&&(u.modules.responsive.index=f,s.push(u),!u.visible&&"collapse"===self.mode&&self.hiddenColumns.push(u))}),s=(s=s.reverse()).sort(function(u,f){return f.modules.responsive.order-u.modules.responsive.order||f.modules.responsive.index-u.modules.responsive.index}),this.columns=s,"collapse"===this.mode&&this.generateCollapsedContent();for(let u of this.table.columnManager.columnsByIndex)if("responsiveCollapse"==u.definition.formatter){this.collapseHandleColumn=u;break}this.collapseHandleColumn&&(this.hiddenColumns.length?this.collapseHandleColumn.show():this.collapseHandleColumn.hide())}initializeColumn(s){var u=s.getDefinition();s.modules.responsive={order:void 0===u.responsive?1:u.responsive,visible:!1!==u.visible}}initializeRow(s){var u;"calc"!==s.type&&((u=document.createElement("div")).classList.add("tabulator-responsive-collapse"),s.modules.responsiveLayout={element:u,open:this.collapseStartOpen},this.collapseStartOpen||(u.style.display="none"))}layoutRow(s){var u=s.getElement();s.modules.responsiveLayout&&(u.appendChild(s.modules.responsiveLayout.element),this.generateCollapsedRowContent(s))}updateColumnVisibility(s,u){!u&&s.modules.responsive&&(s.modules.responsive.visible=s.visible,this.initialize())}hideColumn(s){var u=this.hiddenColumns.length;s.hide(!1,!0),"collapse"===this.mode&&(this.hiddenColumns.unshift(s),this.generateCollapsedContent(),this.collapseHandleColumn&&!u&&this.collapseHandleColumn.show())}showColumn(s){var u;s.show(!1,!0),s.setWidth(s.getWidth()),"collapse"===this.mode&&((u=this.hiddenColumns.indexOf(s))>-1&&this.hiddenColumns.splice(u,1),this.generateCollapsedContent(),this.collapseHandleColumn&&!this.hiddenColumns.length&&this.collapseHandleColumn.hide())}update(){for(var s=this,u=!0;u;){let f="fitColumns"==s.table.modules.layout.getMode()?s.table.columnManager.getFlexBaseWidth():s.table.columnManager.getWidth(),_=(s.table.options.headerVisible?s.table.columnManager.element.clientWidth:s.table.element.clientWidth)-f;if(_<0){let C=s.columns[s.index];C?(s.hideColumn(C),s.index++):u=!1}else{let C=s.columns[s.index-1];C&&_>0&&_>=C.getWidth()?(s.showColumn(C),s.index--):u=!1}s.table.rowManager.activeRowsCount||s.table.rowManager.renderEmptyScroll()}}generateCollapsedContent(){var s=this;this.table.rowManager.getDisplayRows().forEach(function(f){s.generateCollapsedRowContent(f)})}generateCollapsedRowContent(s){var u,f;if(s.modules.responsiveLayout){for(u=s.modules.responsiveLayout.element;u.firstChild;)u.removeChild(u.firstChild);(f=this.collapseFormatter(this.generateCollapsedRowData(s)))&&u.appendChild(f)}}generateCollapsedRowData(s){var C,u=this,f=s.getData(),_=[];return this.hiddenColumns.forEach(function(D){var A=D.getFieldValue(f);D.definition.title&&D.field&&(D.modules.format&&u.table.options.responsiveLayoutCollapseUseFormatters?(C={value:!1,data:{},getValue:function(){return A},getData:function(){return f},getElement:function(){return document.createElement("div")},getRow:function(){return s.getComponent()},getColumn:function(){return D.getComponent()}},_.push({field:D.field,title:D.definition.title,value:D.modules.format.formatter.call(u.table.modules.format,C,D.modules.format.params,function(K){K()})})):_.push({field:D.field,title:D.definition.title,value:A}))}),_}formatCollapsedData(s){var u=document.createElement("table");return s.forEach(function(f){var A,_=document.createElement("tr"),C=document.createElement("td"),D=document.createElement("td"),F=document.createElement("strong");C.appendChild(F),this.langBind("columns|"+f.field,function(K){F.innerText=K||f.title}),f.value instanceof Node?((A=document.createElement("div")).appendChild(f.value),D.appendChild(A)):D.innerHTML=f.value,_.appendChild(C),_.appendChild(D),u.appendChild(_)},this),Object.keys(s).length?u:""}}return m.moduleName="responsiveLayout",m})(),Kd=(()=>{class m extends Fi{constructor(s){super(s),this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],this.headerCheckboxElement=null,this.registerTableOption("selectable","highlight"),this.registerTableOption("selectableRangeMode","drag"),this.registerTableOption("selectableRollingSelection",!0),this.registerTableOption("selectablePersistence",!0),this.registerTableOption("selectableCheck",function(u,f){return!0}),this.registerTableFunction("selectRow",this.selectRows.bind(this)),this.registerTableFunction("deselectRow",this.deselectRows.bind(this)),this.registerTableFunction("toggleSelectRow",this.toggleRow.bind(this)),this.registerTableFunction("getSelectedRows",this.getSelectedRows.bind(this)),this.registerTableFunction("getSelectedData",this.getSelectedData.bind(this)),this.registerComponentFunction("row","select",this.selectRows.bind(this)),this.registerComponentFunction("row","deselect",this.deselectRows.bind(this)),this.registerComponentFunction("row","toggleSelect",this.toggleRow.bind(this)),this.registerComponentFunction("row","isSelected",this.isRowSelected.bind(this))}initialize(){!1!==this.table.options.selectable&&(this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-deleting",this.rowDeleted.bind(this)),this.subscribe("rows-wipe",this.clearSelectionData.bind(this)),this.subscribe("rows-retrieve",this.rowRetrieve.bind(this)),this.table.options.selectable&&this.table.options.selectablePersistence&&this.subscribe("data-refeshing",this.deselectRows.bind(this)))}rowRetrieve(s,u){return"selected"===s?this.selectedRows:u}rowDeleted(s){this._deselectRow(s,!0)}clearSelectionData(s){this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],!0!==s&&this._rowSelectionChanged()}initializeRow(s){var u=this,f=s.getElement(),_=function(){setTimeout(function(){u.selecting=!1},50),document.body.removeEventListener("mouseup",_)};s.modules.select={selected:!1},u.table.options.selectableCheck.call(this.table,s.getComponent())?(f.classList.add("tabulator-selectable"),f.classList.remove("tabulator-unselectable"),u.table.options.selectable&&"highlight"!=u.table.options.selectable&&("click"===u.table.options.selectableRangeMode?f.addEventListener("click",function(C){if(C.shiftKey){u.table._clearSelection(),u.lastClickedRow=u.lastClickedRow||s;var D=u.table.rowManager.getDisplayRowIndex(u.lastClickedRow),A=u.table.rowManager.getDisplayRowIndex(s),F=D<=A?D:A,K=D>=A?D:A,It=u.table.rowManager.getDisplayRows().slice(0).splice(F,K-F+1);C.ctrlKey||C.metaKey?(It.forEach(function(Vt){Vt!==u.lastClickedRow&&(!0===u.table.options.selectable||u.isRowSelected(s)||u.selectedRows.length<u.table.options.selectable)&&u.toggleRow(Vt)}),u.lastClickedRow=s):(u.deselectRows(void 0,!0),!0!==u.table.options.selectable&&It.length>u.table.options.selectable&&(It=It.slice(0,u.table.options.selectable)),u.selectRows(It)),u.table._clearSelection()}else C.ctrlKey||C.metaKey?(u.toggleRow(s),u.lastClickedRow=s):(u.deselectRows(void 0,!0),u.selectRows(s),u.lastClickedRow=s)}):(f.addEventListener("click",function(C){(!u.table.modExists("edit")||!u.table.modules.edit.getCurrentCell())&&u.table._clearSelection(),u.selecting||u.toggleRow(s)}),f.addEventListener("mousedown",function(C){if(C.shiftKey)return u.table._clearSelection(),u.selecting=!0,u.selectPrev=[],document.body.addEventListener("mouseup",_),document.body.addEventListener("keyup",_),u.toggleRow(s),!1}),f.addEventListener("mouseenter",function(C){u.selecting&&(u.table._clearSelection(),u.toggleRow(s),u.selectPrev[1]==s&&u.toggleRow(u.selectPrev[0]))}),f.addEventListener("mouseout",function(C){u.selecting&&(u.table._clearSelection(),u.selectPrev.unshift(s))})))):(f.classList.add("tabulator-unselectable"),f.classList.remove("tabulator-selectable"))}toggleRow(s){this.table.options.selectableCheck.call(this.table,s.getComponent())&&(s.modules.select&&s.modules.select.selected?this._deselectRow(s):this._selectRow(s))}selectRows(s){var u;switch(typeof s){case"undefined":this.table.rowManager.rows.forEach(f=>{this._selectRow(f,!0,!0)}),this._rowSelectionChanged();break;case"string":(u=this.table.rowManager.findRow(s))?this._selectRow(u,!0,!0):this.table.rowManager.getRows(s).forEach(f=>{this._selectRow(f,!0,!0)}),this._rowSelectionChanged();break;default:Array.isArray(s)?(s.forEach(f=>{this._selectRow(f,!0,!0)}),this._rowSelectionChanged()):this._selectRow(s,!1,!0)}}_selectRow(s,u,f){if(!isNaN(this.table.options.selectable)&&!0!==this.table.options.selectable&&!f&&this.selectedRows.length>=this.table.options.selectable){if(!this.table.options.selectableRollingSelection)return!1;this._deselectRow(this.selectedRows[0])}var _=this.table.rowManager.findRow(s);_?-1==this.selectedRows.indexOf(_)&&(_.getElement().classList.add("tabulator-selected"),_.modules.select||(_.modules.select={}),_.modules.select.selected=!0,_.modules.select.checkboxEl&&(_.modules.select.checkboxEl.checked=!0),this.selectedRows.push(_),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(_,!0),u||this.dispatchExternal("rowSelected",_.getComponent()),this._rowSelectionChanged(u)):u||console.warn("Selection Error - No such row found, ignoring selection:"+s)}isRowSelected(s){return-1!==this.selectedRows.indexOf(s)}deselectRows(s,u){var _,f=this;if(void 0===s){_=f.selectedRows.length;for(let C=0;C<_;C++)f._deselectRow(f.selectedRows[0],!0);f._rowSelectionChanged(u)}else Array.isArray(s)?(s.forEach(function(C){f._deselectRow(C,!0)}),f._rowSelectionChanged(u)):f._deselectRow(s,u)}_deselectRow(s,u){var C,f=this,_=f.table.rowManager.findRow(s);_?(C=f.selectedRows.findIndex(function(D){return D==_}))>-1&&(_.getElement().classList.remove("tabulator-selected"),_.modules.select||(_.modules.select={}),_.modules.select.selected=!1,_.modules.select.checkboxEl&&(_.modules.select.checkboxEl.checked=!1),f.selectedRows.splice(C,1),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(_,!1),u||this.dispatchExternal("rowDeselected",_.getComponent()),f._rowSelectionChanged(u)):u||console.warn("Deselection Error - No such row found, ignoring selection:"+s)}getSelectedData(){var s=[];return this.selectedRows.forEach(function(u){s.push(u.getData())}),s}getSelectedRows(){var s=[];return this.selectedRows.forEach(function(u){s.push(u.getComponent())}),s}_rowSelectionChanged(s){this.headerCheckboxElement&&(0===this.selectedRows.length?(this.headerCheckboxElement.checked=!1,this.headerCheckboxElement.indeterminate=!1):this.table.rowManager.rows.length===this.selectedRows.length?(this.headerCheckboxElement.checked=!0,this.headerCheckboxElement.indeterminate=!1):(this.headerCheckboxElement.indeterminate=!0,this.headerCheckboxElement.checked=!1)),s||this.dispatchExternal("rowSelectionChanged",this.getSelectedData(),this.getSelectedRows())}registerRowSelectCheckbox(s,u){s._row.modules.select||(s._row.modules.select={}),s._row.modules.select.checkboxEl=u}registerHeaderSelectCheckbox(s){this.headerCheckboxElement=s}childRowSelection(s,u){var f=this.table.modules.dataTree.getChildren(s,!0);if(u)for(let _ of f)this._selectRow(_,!0);else for(let _ of f)this._deselectRow(_,!0)}}return m.moduleName="selectRow",m})();function Gl(m,d,s,u,f,_,C){var D=window.DateTime||luxon.DateTime,A=C.format||"dd/MM/yyyy HH:mm:ss",F=C.alignEmptyValues,K=0;if(void 0!==D){if(m=D.fromFormat(m,A),d=D.fromFormat(d,A),m.isValid){if(d.isValid)return m-d;K=1}else K=d.isValid?-1:0;return("top"===F&&"desc"===_||"bottom"===F&&"asc"===_)&&(K*=-1),K}console.error("Sort Error - 'datetime' sorter is dependant on luxon.js")}var ld={number:function(m,d,s,u,f,_,C){var D=C.alignEmptyValues,A=C.decimalSeparator,F=C.thousandSeparator,K=0;if(m=String(m),d=String(d),F&&(m=m.split(F).join(""),d=d.split(F).join("")),A&&(m=m.split(A).join("."),d=d.split(A).join(".")),m=parseFloat(m),d=parseFloat(d),isNaN(m))K=isNaN(d)?0:-1;else{if(!isNaN(d))return m-d;K=1}return("top"===D&&"desc"===_||"bottom"===D&&"asc"===_)&&(K*=-1),K},string:function(m,d,s,u,f,_,C){var F,D=C.alignEmptyValues,A=0;if(m){if(d){switch(typeof C.locale){case"boolean":C.locale&&(F=this.langLocale());break;case"string":F=C.locale}return String(m).toLowerCase().localeCompare(String(d).toLowerCase(),F)}A=1}else A=d?-1:0;return("top"===D&&"desc"===_||"bottom"===D&&"asc"===_)&&(A*=-1),A},date:function(m,d,s,u,f,_,C){return C.format||(C.format="dd/MM/yyyy"),Gl.call(this,m,d,s,u,f,_,C)},time:function(m,d,s,u,f,_,C){return C.format||(C.format="HH:mm"),Gl.call(this,m,d,s,u,f,_,C)},datetime:Gl,boolean:function(m,d,s,u,f,_,C){return(!0===m||"true"===m||"True"===m||1===m?1:0)-(!0===d||"true"===d||"True"===d||1===d?1:0)},array:function(m,d,s,u,f,_,C){var F=C.type||"length",K=C.alignEmptyValues,ut=0;function It(Vt){switch(F){case"length":return Vt.length;case"sum":return Vt.reduce(function(ee,he){return ee+he});case"max":return Math.max.apply(null,Vt);case"min":return Math.min.apply(null,Vt);case"avg":return Vt.reduce(function(ee,he){return ee+he})/Vt.length}}if(Array.isArray(m)){if(Array.isArray(d))return(m?It(m):0)-(d?It(d):0);K=1}else K=Array.isArray(d)?-1:0;return("top"===K&&"desc"===_||"bottom"===K&&"asc"===_)&&(ut*=-1),ut},exists:function(m,d,s,u,f,_,C){return(void 0===m?0:1)-(void 0===d?0:1)},alphanum:function(m,d,s,u,f,_,C){var D,A,F,K,It,ut=0,Vt=/(\d+)|(\D+)/g,ee=/\d/,he=C.alignEmptyValues,ve=0;if(m||0===m){if(d||0===d){if(isFinite(m)&&isFinite(d))return m-d;if((D=String(m).toLowerCase())===(A=String(d).toLowerCase()))return 0;if(!ee.test(D)||!ee.test(A))return D>A?1:-1;for(D=D.match(Vt),A=A.match(Vt),It=D.length>A.length?A.length:D.length;ut<It;)if((F=D[ut])!==(K=A[ut++]))return isFinite(F)&&isFinite(K)?("0"===F.charAt(0)&&(F="."+F),"0"===K.charAt(0)&&(K="."+K),F-K):F>K?1:-1;return D.length>A.length}ve=1}else ve=d||0===d?-1:0;return("top"===he&&"desc"===_||"bottom"===he&&"asc"===_)&&(ve*=-1),ve}},wh={integer:function(m,d,s){return""===d||null==d||"number"==typeof(d=Number(d))&&isFinite(d)&&Math.floor(d)===d},float:function(m,d,s){return""===d||null==d||"number"==typeof(d=Number(d))&&isFinite(d)&&d%1!=0},numeric:function(m,d,s){return""===d||null==d||!isNaN(d)},string:function(m,d,s){return""===d||null==d||isNaN(d)},max:function(m,d,s){return""===d||null==d||parseFloat(d)<=s},min:function(m,d,s){return""===d||null==d||parseFloat(d)>=s},starts:function(m,d,s){return""===d||null==d||String(d).toLowerCase().startsWith(String(s).toLowerCase())},ends:function(m,d,s){return""===d||null==d||String(d).toLowerCase().endsWith(String(s).toLowerCase())},minLength:function(m,d,s){return""===d||null==d||String(d).length>=s},maxLength:function(m,d,s){return""===d||null==d||String(d).length<=s},in:function(m,d,s){return""===d||null==d||("string"==typeof s&&(s=s.split("|")),""===d||s.indexOf(d)>-1)},regex:function(m,d,s){return""===d||null==d||new RegExp(s).test(d)},unique:function(m,d,s){if(""===d||null==d)return!0;var u=!0,f=m.getData(),_=m.getColumn()._getSelf();return this.table.rowManager.rows.forEach(function(C){var D=C.getData();D!==f&&d==_.getFieldValue(D)&&(u=!1)}),u},required:function(m,d,s){return""!==d&&null!=d}},Nf=Object.freeze({__proto__:null,AccessorModule:no,AjaxModule:po,ClipboardModule:Cl,ColumnCalcsModule:yf,DataTreeModule:Ef,DownloadModule:ed,EditModule:Mf,ExportModule:Tp,FilterModule:id,FormatModule:Wd,FrozenColumnsModule:Mp,FrozenRowsModule:Of,GroupRowsModule:T_,HistoryModule:wg,HtmlTableImportModule:Dg,InteractionModule:Ig,KeybindingsModule:Sh,MenuModule:jd,MoveColumnsModule:kc,MoveRowsModule:Ku,MutatorModule:kf,PageModule:Yd,PersistenceModule:Xd,PrintModule:Lc,ReactiveDataModule:Op,ResizeColumnsModule:Lf,ResizeRowsModule:Ag,ResizeTableModule:Rh,ResponsiveLayoutModule:Ju,SelectRowModule:Kd,SortModule:(()=>{class m extends Fi{constructor(s){super(s),this.sortList=[],this.changed=!1,this.registerTableOption("sortMode","local"),this.registerTableOption("initialSort",!1),this.registerTableOption("columnHeaderSortMulti",!0),this.registerTableOption("sortOrderReverse",!1),this.registerTableOption("headerSortElement","<div class='tabulator-arrow'></div>"),this.registerColumnOption("sorter"),this.registerColumnOption("sorterParams"),this.registerColumnOption("headerSort",!0),this.registerColumnOption("headerSortStartingDir"),this.registerColumnOption("headerSortTristate")}initialize(){this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("table-built",this.tableBuilt.bind(this)),this.registerDataHandler(this.sort.bind(this),20),this.registerTableFunction("setSort",this.userSetSort.bind(this)),this.registerTableFunction("getSorters",this.getSort.bind(this)),this.registerTableFunction("clearSort",this.clearSort.bind(this)),"remote"===this.table.options.sortMode&&this.subscribe("data-params",this.remoteSortParams.bind(this))}tableBuilt(){this.table.options.initialSort&&this.setSort(this.table.options.initialSort)}remoteSortParams(s,u,f,_){var C=this.getSort();return C.forEach(D=>{delete D.column}),_.sort=C,_}userSetSort(s,u){this.setSort(s,u),this.refreshSort()}clearSort(){this.clear(),this.refreshSort()}initializeColumn(s){var f,_,u=!1;switch(typeof s.definition.sorter){case"string":m.sorters[s.definition.sorter]?u=m.sorters[s.definition.sorter]:console.warn("Sort Error - No such sorter found: ",s.definition.sorter);break;case"function":u=s.definition.sorter}s.modules.sort={sorter:u,dir:"none",params:s.definition.sorterParams||{},startingDir:s.definition.headerSortStartingDir||"asc",tristate:s.definition.headerSortTristate},!1!==s.definition.headerSort&&((f=s.getElement()).classList.add("tabulator-sortable"),(_=document.createElement("div")).classList.add("tabulator-col-sorter"),"object"==typeof this.table.options.headerSortElement?_.appendChild(this.table.options.headerSortElement):_.innerHTML=this.table.options.headerSortElement,s.titleHolderElement.appendChild(_),s.modules.sort.element=_,f.addEventListener("click",C=>{var D="",A=[],F=!1;if(s.modules.sort){if(s.modules.sort.tristate)D="none"==s.modules.sort.dir?s.modules.sort.startingDir:s.modules.sort.dir==s.modules.sort.startingDir?"asc"==s.modules.sort.dir?"desc":"asc":"none";else switch(s.modules.sort.dir){case"asc":D="desc";break;case"desc":D="asc";break;default:D=s.modules.sort.startingDir}this.table.options.columnHeaderSortMulti&&(C.shiftKey||C.ctrlKey)?((F=(A=this.getSort()).findIndex(K=>K.field===s.getField()))>-1?(A[F].dir=D,F!=A.length-1&&(F=A.splice(F,1)[0],"none"!=D&&A.push(F))):"none"!=D&&A.push({column:s,dir:D}),this.setSort(A)):"none"==D?this.clear():this.setSort(s,D),this.refreshSort()}}))}refreshSort(){"remote"===this.table.options.sortMode?this.reloadData():this.refreshData()}hasChanged(){var s=this.changed;return this.changed=!1,s}getSort(){var u=[];return this.sortList.forEach(function(f){f.column&&u.push({column:f.column.getComponent(),field:f.column.getField(),dir:f.dir})}),u}setSort(s,u){var f=this,_=[];Array.isArray(s)||(s=[{column:s,dir:u}]),s.forEach(function(C){var D;(D=f.table.columnManager.findColumn(C.column))?(C.column=D,_.push(C),f.changed=!0):console.warn("Sort Warning - Sort field does not exist and is being ignored: ",C.column)}),f.sortList=_,this.dispatch("sort-changed")}clear(){this.setSort([])}findSorter(s){var C,u=this.table.rowManager.activeRows[0],f="string";if(u&&(u=u.getData(),s.getField()))switch(C=s.getFieldValue(u),typeof C){case"undefined":f="string";break;case"boolean":f="boolean";break;default:isNaN(C)||""===C?C.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)&&(f="alphanum"):f="number"}return m.sorters[f]}sort(s){var u=this,f=this.table.options.sortOrderReverse?u.sortList.slice().reverse():u.sortList,_=[],C=[];return this.subscribedExternal("dataSorting")&&this.dispatchExternal("dataSorting",u.getSort()),u.clearColumnHeaders(),"remote"!==this.table.options.sortMode?(f.forEach(function(D,A){var F=D.column.modules.sort;D.column&&F&&(F.sorter||(F.sorter=u.findSorter(D.column)),D.params="function"==typeof F.params?F.params(D.column.getComponent(),D.dir):F.params,_.push(D)),u.setColumnHeader(D.column,D.dir)}),_.length&&u._sortItems(s,_)):f.forEach(function(D,A){u.setColumnHeader(D.column,D.dir)}),this.subscribedExternal("dataSorted")&&(s.forEach(D=>{C.push(D.getComponent())}),this.dispatchExternal("dataSorted",u.getSort(),C)),s}clearColumnHeaders(){this.table.columnManager.getRealColumns().forEach(function(s){s.modules.sort&&(s.modules.sort.dir="none",s.getElement().setAttribute("aria-sort","none"))})}setColumnHeader(s,u){s.modules.sort.dir=u,s.getElement().setAttribute("aria-sort",u)}_sortItems(s,u){var f=u.length-1;s.sort((_,C)=>{for(var D,A=f;A>=0;A--){let F=u[A];if(0!==(D=this._sortRow(_,C,F.column,F.dir,F.params)))break}return D})}_sortRow(s,u,f,_,C){var D,A,F="asc"==_?s:u,K="asc"==_?u:s;return s=void 0!==(s=f.getFieldValue(F.getData()))?s:"",u=void 0!==(u=f.getFieldValue(K.getData()))?u:"",D=F.getComponent(),A=K.getComponent(),f.modules.sort.sorter.call(this,s,u,D,A,f.getComponent(),_,C)}}return m.moduleName="sort",m.sorters=ld,m})(),ValidateModule:(()=>{class m extends Fi{constructor(s){super(s),this.invalidCells=[],this.registerTableOption("validationMode","blocking"),this.registerColumnOption("validator"),this.registerTableFunction("getInvalidCells",this.getInvalidCells.bind(this)),this.registerTableFunction("clearCellValidation",this.userClearCellValidation.bind(this)),this.registerTableFunction("validate",this.userValidate.bind(this)),this.registerComponentFunction("cell","isValid",this.cellIsValid.bind(this)),this.registerComponentFunction("cell","clearValidation",this.clearValidation.bind(this)),this.registerComponentFunction("cell","validate",this.cellValidate.bind(this)),this.registerComponentFunction("column","validate",this.columnValidate.bind(this)),this.registerComponentFunction("row","validate",this.rowValidate.bind(this))}initialize(){this.subscribe("cell-delete",this.clearValidation.bind(this)),this.subscribe("column-layout",this.initializeColumnCheck.bind(this))}cellIsValid(s){return!s.modules.validate||!s.modules.validate.invalid}cellValidate(s){return this.validate(s.column.modules.validate,s,s.getValue())}columnValidate(s){var u=[];return s.cells.forEach(function(f){this.cellValidate(f)||u.push(f.getComponent())}),!u.length||u}rowValidate(s){var u=[];return s.cells.forEach(function(f){this.cellValidate(f)||u.push(f.getComponent())}),!u.length||u}userClearCellValidation(s){s||(s=this.getInvalidCells()),Array.isArray(s)||(s=[s]),s.forEach(u=>{this.clearValidation(u._getSelf())})}userValidate(s){var u=[];return this.table.rowManager.rows.forEach(function(f){var _=f.validate();!0!==_&&(u=u.concat(_))}),!u.length||u}initializeColumnCheck(s){void 0!==s.definition.validator&&this.initializeColumn(s)}initializeColumn(s){var _,u=this,f=[];s.definition.validator&&(Array.isArray(s.definition.validator)?s.definition.validator.forEach(function(C){(_=u._extractValidator(C))&&f.push(_)}):(_=this._extractValidator(s.definition.validator))&&f.push(_),s.modules.validate=!!f.length&&f)}_extractValidator(s){var u,f,_;switch(typeof s){case"string":return(_=s.indexOf(":"))>-1?(u=s.substring(0,_),f=s.substring(_+1)):u=s,this._buildValidator(u,f);case"function":return this._buildValidator(s);case"object":return this._buildValidator(s.type,s.parameters)}}_buildValidator(s,u){var f="function"==typeof s?s:m.validators[s];return f?{type:"function"==typeof s?"function":s,func:f,params:u}:(console.warn("Validator Setup Error - No matching validator found:",s),!1)}validate(s,u,f){var _=this,C=[],D=this.invalidCells.indexOf(u);return s&&s.forEach(function(A){A.func.call(_,u.getComponent(),f,A.params)||C.push({type:A.type,parameters:A.params})}),C=!C.length||C,u.modules.validate||(u.modules.validate={}),!0===C?(u.modules.validate.invalid=!1,u.getElement().classList.remove("tabulator-validation-fail"),D>-1&&this.invalidCells.splice(D,1)):(u.modules.validate.invalid=!0,"manual"!==this.table.options.validationMode&&u.getElement().classList.add("tabulator-validation-fail"),-1==D&&this.invalidCells.push(u)),C}getInvalidCells(){var s=[];return this.invalidCells.forEach(u=>{s.push(u.getComponent())}),s}clearValidation(s){var u;s.modules.validate&&s.modules.validate.invalid&&(s.getElement().classList.remove("tabulator-validation-fail"),s.modules.validate.invalid=!1,(u=this.invalidCells.indexOf(s))>-1&&this.invalidCells.splice(u,1))}}return m.moduleName="validate",m.validators=wh,m})()}),qu={debugEventsExternal:!1,debugEventsInternal:!1,debugInvalidOptions:!0,height:!1,minHeight:!1,maxHeight:!1,columnMaxWidth:!1,columnHeaderVertAlign:"top",columns:[],columnDefaults:{},data:!1,autoColumns:!1,autoColumnsDefinitions:!1,nestedFieldSeparator:".",tooltipGenerationMode:"load",footerElement:!1,index:"id",textDirection:"auto",addRowPos:"bottom",headerVisible:!0,renderVertical:"virtual",renderHorizontal:"basic",renderVerticalBuffer:0,scrollToRowPosition:"top",scrollToRowIfVisible:!0,scrollToColumnPosition:"left",scrollToColumnIfVisible:!0,rowFormatter:!1,rowFormatterPrint:null,rowFormatterClipboard:null,rowFormatterHtmlOutput:null,placeholder:!1,dataLoader:!0,dataLoaderLoading:!1,dataLoaderError:!1,dataSendParams:{},dataReceiveParams:{}};class kp{constructor(d,s){this.table=d,this.msgType=s,this.registeredDefaults={}}register(d,s){this.registeredDefaults[d]=s}generate(d,s={}){var u=Object.assign({},this.registeredDefaults);if(Object.assign(u,d),!1!==s.debugInvalidOptions||this.table.options.debugInvalidOptions)for(var f in s)u.hasOwnProperty(f)||console.warn("Invalid "+this.msgType+" option:",f);for(var f in u)f in s?u[f]=s[f]:Array.isArray(u[f])?u[f]=Object.assign([],u[f]):"object"==typeof u[f]&&null!==u[f]?u[f]=Object.assign({},u[f]):void 0===u[f]&&delete u[f];return u}}class Dh extends xi{constructor(d){super(d),this.elementVertical=d.rowManager.element,this.elementHorizontal=d.columnManager.element,this.tableElement=d.rowManager.tableElement,this.verticalFillMode="fit"}initialize(){}clearRows(){}clearColumns(){}reinitializeColumnWidths(d){}renderRows(){}renderColumns(){}rerenderRows(d){d&&d()}rerenderColumns(d,s){}renderRowCells(d){}rerenderRowCells(d,s){}scrollColumns(d,s){}scrollRows(d,s){}resize(){}scrollToRow(d){}scrollToRowNearestTop(d){}visibleRows(d){return[]}rows(){return this.table.rowManager.getDisplayRows()}styleRow(d,s){var u=d.getElement();s%2?(u.classList.add("tabulator-row-even"),u.classList.remove("tabulator-row-odd")):(u.classList.add("tabulator-row-odd"),u.classList.remove("tabulator-row-even"))}clear(){this.clearRows(),this.clearColumns()}render(){this.renderRows(),this.renderColumns()}rerender(d){this.rerenderRows(),this.rerenderColumns()}scrollToRowPosition(d,s,u){var f=this.rows().indexOf(d),_=d.getElement(),C=0;return new Promise((D,A)=>{if(f>-1){if(void 0===u&&(u=this.table.options.scrollToRowIfVisible),!u&&Ei.elVisible(_)&&(C=Ei.elOffset(_).top-Ei.elOffset(this.elementVertical).top)>0&&C<this.elementVertical.clientHeight-_.offsetHeight)return!1;switch(void 0===s&&(s=this.table.options.scrollToRowPosition),"nearest"===s&&(s=this.scrollToRowNearestTop(d)?"top":"bottom"),this.scrollToRow(d),s){case"middle":case"center":this.elementVertical.scrollTop=this.elementVertical.scrollHeight-this.elementVertical.scrollTop==this.elementVertical.clientHeight?this.elementVertical.scrollTop+(_.offsetTop-this.elementVertical.scrollTop)-(this.elementVertical.scrollHeight-_.offsetTop)/2:this.elementVertical.scrollTop-this.elementVertical.clientHeight/2;break;case"bottom":this.elementVertical.scrollTop=this.elementVertical.scrollHeight-this.elementVertical.scrollTop==this.elementVertical.clientHeight?this.elementVertical.scrollTop-(this.elementVertical.scrollHeight-_.offsetTop)+_.offsetHeight:this.elementVertical.scrollTop-this.elementVertical.clientHeight+_.offsetHeight}D()}else console.warn("Scroll Error - Row not visible"),A("Scroll Error - Row not visible")})}}class cd extends Dh{constructor(d){super(d)}renderRowCells(d){d.cells.forEach(s=>{d.element.appendChild(s.getElement()),s.cellRendered()})}reinitializeColumnWidths(d){d.forEach(function(s){s.reinitializeWidth()})}}class Lp extends Dh{constructor(d){super(d),this.leftCol=0,this.rightCol=0,this.scrollLeft=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0,this.fitDataColAvg=0,this.window=200,this.initialized=!1,this.columns=[]}initialize(){this.compatabilityCheck()}compatabilityCheck(){var d=this.options("columns"),u=!0;return"fitDataTable"==this.options("layout")&&(console.warn("Horizontal Vitrual DOM is not compatible with fitDataTable layout mode"),u=!1),this.options("responsiveLayout")&&(console.warn("Horizontal Vitrual DOM is not compatible with responsive columns"),u=!1),this.options("rtl")&&(console.warn("Horizontal Vitrual DOM is not currently compatible with RTL text direction"),u=!1),d&&d.find(f=>f.frozen)&&(console.warn("Horizontal Vitrual DOM is not compatible with frozen columns"),u=!1),u}renderColumns(d,s){this.dataChange()}scrollColumns(d,s){this.scrollLeft!=d&&(this.scrollLeft=d,this.scroll(d-(this.vDomScrollPosLeft+this.window)))}rerenderColumns(d,s){var u={cols:this.columns,leftCol:this.leftCol,rightCol:this.rightCol};if(!d||this.initialized){this.clear(),this.scrollLeft=this.elementVertical.scrollLeft,this.vDomScrollPosLeft=this.scrollLeft-this.window,this.vDomScrollPosRight=this.scrollLeft+this.elementVertical.clientWidth+this.window;var f=0;this.table.columnManager.columnsByIndex.forEach(_=>{var C={};if(_.visible){var D=_.getWidth();C.leftPos=f,C.rightPos=f+D,C.width=D,"fitData"===this.options("layout")&&(C.fitDataCheck=!0),f+D>this.vDomScrollPosLeft&&f<this.vDomScrollPosRight?(-1==this.leftCol&&(this.leftCol=this.columns.length,this.vDomPadLeft=f),this.rightCol=this.columns.length):-1!==this.leftCol&&(this.vDomPadRight+=D),this.columns.push(_),_.modules.vdomHoz=C,f+=D}}),this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.initialized=!0,s||(!d||this.reinitChanged(u))&&this.renitializeRows(),this.elementVertical.scrollLeft=this.scrollLeft}}renderRowCells(d){this.initialized?this.initializeRow(d):d.cells.forEach(s=>{d.element.appendChild(s.getElement()),s.cellRendered()})}rerenderRowCells(d,s){this.reinitializeRow(d,s)}reinitializeColumnWidths(d){for(let s=this.leftCol;s<=this.rightCol;s++)this.columns[s].reinitializeWidth()}deinitialize(){this.initialized=!1}clear(){this.columns=[],this.leftCol=-1,this.rightCol=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0}dataChange(){var _,f,d=!1,s=0,u=0;if("fitData"===this.options("layout")){if(this.table.columnManager.columnsByIndex.forEach(C=>{!C.definition.width&&C.visible&&(d=!0)}),d&&d&&this.table.rowManager.getDisplayRows().length&&(this.vDomScrollPosRight=this.scrollLeft+this.elementVertical.clientWidth+this.window,f=this.chain("rows-sample",[1],[],()=>this.table.rowManager.getDisplayRows()[0])[0])){for(_=f.getElement(),f.generateCells(),this.tableElement.appendChild(_),u=0;u<f.cells.length;u++){let A=f.cells[u];if(_.appendChild(A.getElement()),A.column.reinitializeWidth(),(s+=A.column.getWidth())>this.vDomScrollPosRight)break}for(_.parentNode.removeChild(_),this.fitDataColAvg=Math.floor(s/(u+1));u<this.table.columnManager.columnsByIndex.length;u++)this.table.columnManager.columnsByIndex[u].setWidth(this.fitDataColAvg);this.rerenderColumns(!1,!0)}}else"fitColumns"===this.options("layout")&&(this.layoutRefresh(),this.rerenderColumns(!1,!0))}reinitChanged(d){var s=!0;return d.cols.length!==this.columns.length||d.leftCol!==this.leftCol||d.rightCol!==this.rightCol||(d.cols.forEach((u,f)=>{u!==this.columns[f]&&(s=!1)}),!s)}renitializeRows(){this.table.rowManager.getVisibleRows().forEach(s=>{this.reinitializeRow(s,!0)})}scroll(d){this.vDomScrollPosLeft+=d,this.vDomScrollPosRight+=d,d>.8*this.elementVertical.clientWidth?this.rerenderColumns():d>0?(this.addColRight(),this.removeColLeft()):(this.addColLeft(),this.removeColRight())}colPositionAdjust(d,s,u){for(let f=d;f<s;f++){let _=this.columns[f];_.modules.vdomHoz.leftPos+=u,_.modules.vdomHoz.rightPos+=u}}addColRight(){var d=this.columns[this.rightCol+1];d&&d.modules.vdomHoz.leftPos<=this.vDomScrollPosRight&&(this.table.rowManager.getVisibleRows().forEach(u=>{if("group"!==u.type){var f=u.getCell(d);u.getElement().appendChild(f.getElement()),f.cellRendered()}}),this.fitDataColActualWidthCheck(d),this.rightCol++,this.rightCol>=this.columns.length-1?this.vDomPadRight=0:this.vDomPadRight-=d.getWidth(),this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.addColRight())}addColLeft(){var d=this.columns[this.leftCol-1];d&&d.modules.vdomHoz.rightPos>=this.vDomScrollPosLeft&&(this.table.rowManager.getVisibleRows().forEach(f=>{if("group"!==f.type){var _=f.getCell(d);f.getElement().prepend(_.getElement()),_.cellRendered()}}),this.fitDataColActualWidthCheck(d),this.leftCol?this.vDomPadLeft-=d.getWidth():this.vDomPadLeft=0,this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.leftCol--,this.addColLeft())}removeColRight(d){var s;(d=this.columns[this.rightCol])&&d.modules.vdomHoz.leftPos>this.vDomScrollPosRight&&(s=this.table.rowManager.getVisibleRows(),d.modules.vdomHoz.visible=!1,s.forEach(u=>{if("group"!==u.type){var f=u.getCell(d);u.getElement().removeChild(f.getElement())}}),this.vDomPadRight+=d.getWidth(),this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.rightCol--,this.removeColRight())}removeColLeft(){var d=this.columns[this.leftCol];d&&d.modules.vdomHoz.rightPos<this.vDomScrollPosLeft&&(this.table.rowManager.getVisibleRows().forEach(u=>{if("group"!==u.type){var f=u.getCell(d);f.parentNode&&u.getElement().removeChild(f.getElement())}}),this.vDomPadLeft+=d.getWidth(),this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.leftCol++,this.removeColLeft())}fitDataColActualWidthCheck(d){var s,u;d.modules.vdomHoz.fitDataCheck&&(d.reinitializeWidth(),(u=(s=d.getWidth())-d.modules.vdomHoz.width)&&(d.modules.vdomHoz.rightPos+=u,d.modules.vdomHoz.width=s,this.colPositionAdjust(this.rightCol+2,this.columns.length,u)),d.modules.vdomHoz.fitDataCheck=!1)}initializeRow(d){if("group"!==d.type){d.modules.vdomHoz={leftCol:this.leftCol,rightCol:this.rightCol};for(let s=this.leftCol;s<=this.rightCol;s++){let u=this.columns[s];if(u&&u.visible){let f=d.getCell(u);d.getElement().appendChild(f.getElement()),f.cellRendered()}}}}reinitializeRow(d,s){if("group"!==d.type&&(s||!d.modules.vdomHoz||d.modules.vdomHoz.leftCol!==this.leftCol||d.modules.vdomHoz.rightCol!==this.rightCol)){for(var u=d.getElement();u.firstChild;)u.removeChild(u.firstChild);this.initializeRow(d)}}}class Np extends xi{constructor(d){super(d),this.blockHozScrollEvent=!1,this.headersElement=null,this.element=null,this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.scrollLeft=0,this.optionsList=new kp(this.table,"column definition"),this.renderer=null}initialize(){this.initializeRenderer(),this.headersElement=this.createHeadersElement(),this.element=this.createHeaderElement(),this.element.insertBefore(this.headersElement,this.element.firstChild),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this))}initializeRenderer(){var d;(d="string"==typeof this.table.options.renderHorizontal?{virtual:Lp,basic:cd}[this.table.options.renderHorizontal]:this.table.options.renderHorizontal)?(this.renderer=new d(this.table,this.element,this.tableElement),this.renderer.initialize()):console.error("Unable to find matching renderer:",table.options.renderHorizontal)}createHeadersElement(){var d=document.createElement("div");return d.classList.add("tabulator-headers"),d.setAttribute("role","row"),d}createHeaderElement(){var d=document.createElement("div");return d.classList.add("tabulator-header"),d.setAttribute("role","rowgroup"),this.table.options.headerVisible||d.classList.add("tabulator-header-hidden"),d}getElement(){return this.element}getHeadersElement(){return this.headersElement}scrollHorizontal(d){var u=this.element.scrollWidth-this.table.element.clientWidth;this.element.scrollLeft=d,this.element.style.marginLeft=d>u?-(d-u)+"px":0,this.scrollLeft=d,this.renderer.scrollColumns(d)}generateColumnsFromRowData(d){var f,_,s=[],u=this.table.options.autoColumnsDefinitions;if(d&&d.length){for(var C in f=d[0]){let D={field:C,title:C},A=f[C];switch(typeof A){case"undefined":_="string";break;case"boolean":_="boolean";break;case"object":_=Array.isArray(A)?"array":"string";break;default:_=isNaN(A)||""===A?A.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)?"alphanum":"string":"number"}D.sorter=_,s.push(D)}if(u)switch(typeof u){case"function":this.table.options.columns=u.call(this.table,s);break;case"object":Array.isArray(u)?s.forEach(D=>{var A=u.find(F=>F.field===D.field);A&&Object.assign(D,A)}):s.forEach(D=>{u[D.field]&&Object.assign(D,u[D.field])}),this.table.options.columns=s}else this.table.options.columns=s;this.setColumns(this.table.options.columns)}}setColumns(d,s){for(;this.headersElement.firstChild;)this.headersElement.removeChild(this.headersElement.firstChild);this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.dispatch("columns-loading"),d.forEach((u,f)=>{this._addColumn(u)}),this._reIndexColumns(),this.dispatch("columns-loaded"),this.renderer.rerenderColumns(!1,!0),this.redraw(!0)}_addColumn(d,s,u){var f=new Ul(d,this),_=f.getElement(),C=u&&this.findColumnIndex(u);if(u&&C>-1){var D=u.getTopColumn(),A=this.columns.indexOf(D),F=D.getElement();s?(this.columns.splice(A,0,f),F.parentNode.insertBefore(_,F)):(this.columns.splice(A+1,0,f),F.parentNode.insertBefore(_,F.nextSibling))}else s?(this.columns.unshift(f),this.headersElement.insertBefore(f.getElement(),this.headersElement.firstChild)):(this.columns.push(f),this.headersElement.appendChild(f.getElement()));return f.columnRendered(),f}registerColumnField(d){d.definition.field&&(this.columnsByField[d.definition.field]=d)}registerColumnPosition(d){this.columnsByIndex.push(d)}_reIndexColumns(){this.columnsByIndex=[],this.columns.forEach(function(d){d.reRegisterPosition()})}verticalAlignHeaders(){var d=0;this.columns.forEach(s=>{var u;s.clearVerticalAlign(),(u=s.getHeight())>d&&(d=u)}),this.columns.forEach(s=>{s.verticalAlign(this.table.options.columnHeaderVertAlign,d)}),this.table.rowManager.adjustTableSize()}findColumn(d){return"object"!=typeof d?this.columnsByField[d]||!1:d instanceof Ul?d:d instanceof cu?d._getSelf()||!1:"undefined"!=typeof HTMLElement&&d instanceof HTMLElement&&this.columns.find(u=>u.element===d)||!1}getColumnByField(d){return this.columnsByField[d]}getColumnsByFieldRoot(d){var s=[];return Object.keys(this.columnsByField).forEach(u=>{u.split(".")[0]===d&&s.push(this.columnsByField[u])}),s}getColumnByIndex(d){return this.columnsByIndex[d]}getFirstVisibileColumn(d){return(d=this.columnsByIndex.findIndex(s=>s.visible))>-1&&this.columnsByIndex[d]}getColumns(){return this.columns}findColumnIndex(d){return this.columnsByIndex.findIndex(s=>d===s)}getRealColumns(){return this.columnsByIndex}traverse(d){this.columnsByIndex.forEach((s,u)=>{d(s,u)})}getDefinitions(d){var s=[];return this.columnsByIndex.forEach(u=>{(!d||d&&u.visible)&&s.push(u.getDefinition())}),s}getDefinitionTree(){var d=[];return this.columns.forEach(s=>{d.push(s.getDefinition(!0))}),d}getComponents(d){var s=[];return(d?this.columns:this.columnsByIndex).forEach(f=>{s.push(f.getComponent())}),s}getWidth(){var d=0;return this.columnsByIndex.forEach(s=>{s.visible&&(d+=s.getWidth())}),d}moveColumn(d,s,u){this.moveColumnActual(d,s,u),s.element.parentNode.insertBefore(d.element,s.element),u&&s.element.parentNode.insertBefore(s.element,d.element),this.verticalAlignHeaders(),this.table.rowManager.reinitialize()}moveColumnActual(d,s,u){this._moveColumnInArray(d.parent.isGroup?d.parent.columns:this.columns,d,s,u),this._moveColumnInArray(this.columnsByIndex,d,s,u,!0),this.renderer.rerenderColumns(!0),this.dispatch("column-moved",d,s,u),this.subscribedExternal("columnMoved")&&this.dispatchExternal("columnMoved",d.getComponent(),this.table.columnManager.getComponents())}_moveColumnInArray(d,s,u,f,_){var D,C=d.indexOf(s);C>-1&&(d.splice(C,1),(D=d.indexOf(u))>-1?f&&(D+=1):D=C,d.splice(D,0,s),_&&(this.chain("column-moving-rows",[s,u,f],null,[])||[]).concat(this.table.rowManager.rows).forEach(function(F){if(F.cells.length){var K=F.cells.splice(C,1)[0];F.cells.splice(D,0,K)}}))}scrollToColumn(d,s,u){var f=0,_=0,C=0,D=d.getElement();return new Promise((A,F)=>{if(void 0===s&&(s=this.table.options.scrollToColumnPosition),void 0===u&&(u=this.table.options.scrollToColumnIfVisible),d.visible){switch(s){case"middle":case"center":C=-this.element.clientWidth/2;break;case"right":C=D.clientWidth-this.headersElement.clientWidth}if(!u&&(_=D.offsetLeft)>0&&_+D.offsetWidth<this.element.clientWidth)return!1;f=D.offsetLeft+C,f=Math.max(Math.min(f,this.table.rowManager.element.scrollWidth-this.table.rowManager.element.clientWidth),0),this.table.rowManager.scrollHorizontal(f),this.scrollHorizontal(f),A()}else console.warn("Scroll Error - Column not visible"),F("Scroll Error - Column not visible")})}generateCells(d){var s=[];return this.columnsByIndex.forEach(u=>{s.push(u.generateCell(d))}),s}getFlexBaseWidth(){var d=this.table.element.clientWidth,s=0;return this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(d-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),this.columnsByIndex.forEach(function(u){var f,_,C;u.visible&&(f=u.definition.width||0,_=parseInt(u.minWidth),C="string"==typeof f?f.indexOf("%")>-1?d/100*parseInt(f):parseInt(f):f,s+=C>_?C:_)}),s}addColumn(d,s,u){return new Promise((f,_)=>{var C=this._addColumn(d,s,u);this._reIndexColumns(),this.dispatch("column-add",d,s,u),"fitColumns"!=this.layoutMode()&&C.reinitializeWidth(),this.redraw(!0),this.table.rowManager.reinitialize(),this.renderer.rerenderColumns(),f(C)})}deregisterColumn(d){var u,s=d.getField();s&&delete this.columnsByField[s],(u=this.columnsByIndex.indexOf(d))>-1&&this.columnsByIndex.splice(u,1),(u=this.columns.indexOf(d))>-1&&this.columns.splice(u,1),this.verticalAlignHeaders(),this.redraw()}redraw(d){Ei.elVisible(this.element)&&this.verticalAlignHeaders(),d&&(this.table.rowManager.resetScroll(),this.table.rowManager.reinitialize()),this.confirm("table-redrawing",d)||this.layoutRefresh(),this.dispatch("table-redraw",d),this.table.footerManager.redraw()}}class Ih extends Dh{constructor(d){super(d),this.verticalFillMode="fill",this.scrollTop=0,this.scrollLeft=0,this.scrollTop=0,this.scrollLeft=0}clearRows(){for(var d=this.tableElement;d.firstChild;)d.removeChild(d.firstChild);d.scrollTop=0,d.scrollLeft=0,d.style.minWidth="",d.style.minHeight="",d.style.display="",d.style.visibility=""}renderRows(){var d=this.tableElement,s=!0;this.rows().forEach((u,f)=>{this.styleRow(u,f),d.appendChild(u.getElement()),u.initialize(!0),"group"!==u.type&&(s=!1)}),d.style.minWidth=s?this.table.columnManager.getWidth()+"px":""}rerenderRows(d){this.render(),d&&d()}scrollToRowNearestTop(d){var s=Ei.elOffset(d.getElement()).top;return!(Math.abs(this.elementVertical.scrollTop-s)>Math.abs(this.elementVertical.scrollTop+this.elementVertical.clientHeight-s))}scrollToRow(d){var s=d.getElement();this.elementVertical.scrollTop=Ei.elOffset(s).top-Ei.elOffset(this.elementVertical).top+this.elementVertical.scrollTop}visibleRows(d){return this.rows()}}class Mh extends Dh{constructor(d){super(d),this.verticalFillMode="fill",this.scrollTop=0,this.scrollLeft=0,this.vDomRowHeight=20,this.vDomTop=0,this.vDomBottom=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomMaxRenderChain=90,this.vDomWindowBuffer=0,this.vDomWindowMinTotalRows=20,this.vDomWindowMinMarginRows=5,this.vDomTopNewRows=[],this.vDomBottomNewRows=[]}clearRows(){for(var d=this.tableElement;d.firstChild;)d.removeChild(d.firstChild);d.style.paddingTop="",d.style.paddingBottom="",d.style.minWidth="",d.style.minHeight="",d.style.display="",d.style.visibility="",this.elementVertical.scrollTop=0,this.elementVertical.scrollLeft=0,this.scrollTop=0,this.scrollLeft=0,this.vDomTop=0,this.vDomBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0}renderRows(){this._virtualRenderFill()}rerenderRows(d){for(var s=this.elementVertical.scrollTop,u=!1,f=!1,_=this.table.rowManager.scrollLeft,C=this.rows(),D=this.vDomTop;D<=this.vDomBottom;D++)if(C[D]){var A=s-C[D].getElement().offsetTop;if(!(!1===f||Math.abs(A)<f))break;f=A,u=D}C.forEach(F=>{F.deinitializeHeight()}),d&&d(),this._virtualRenderFill(!1===u?this.rows.length-1:u,!0,f||0),this.scrollColumns(_)}scrollColumns(d){this.table.rowManager.scrollHorizontal(d)}scrollRows(d,s){var u=d-this.vDomScrollPosTop,f=d-this.vDomScrollPosBottom,_=2*this.vDomWindowBuffer,C=this.rows();if(this.scrollTop=d,-u>_||f>_){var D=this.table.rowManager.scrollLeft;this._virtualRenderFill(Math.floor(this.elementVertical.scrollTop/this.elementVertical.scrollHeight*C.length)),this.scrollColumns(D)}else s?(u<0&&this._addTopRow(C,-u),f<0&&(this.vDomScrollHeight-this.scrollTop>this.vDomWindowBuffer?this._removeBottomRow(C,-f):this.vDomScrollPosBottom=this.scrollTop)):(f>=0&&this._addBottomRow(C,f),u>=0&&(this.scrollTop>this.vDomWindowBuffer?this._removeTopRow(C,u):this.vDomScrollPosTop=this.scrollTop))}resize(){this.vDomWindowBuffer=this.table.options.renderVerticalBuffer||this.elementVertical.clientHeight}scrollToRowNearestTop(d){var s=this.rows().indexOf(d);return!(Math.abs(this.vDomTop-s)>Math.abs(this.vDomBottom-s))}scrollToRow(d){var s=this.rows().indexOf(d);s>-1&&this._virtualRenderFill(s,!0)}visibleRows(d){var s=this.elementVertical.scrollTop,u=this.elementVertical.clientHeight+s,f=!1,_=0,C=0,D=this.rows();if(d)_=this.vDomTop,C=this.vDomBottom;else for(var A=this.vDomTop;A<=this.vDomBottom;A++)if(D[A])if(f){if(!(u-D[A].getElement().offsetTop>=0))break;C=A}else if(s-D[A].getElement().offsetTop>=0)_=A;else{if(f=!0,!(u-D[A].getElement().offsetTop>=0))break;C=A}return D.slice(_,C+1)}_virtualRenderFill(d,s,u){var f=this.tableElement,_=this.elementVertical,C=0,D=0,A=0,F=0,K=0,ut=this.rows(),It=ut.length,Vt=this.elementVertical.clientHeight;if(u=u||0,d=d||0){for(;f.firstChild;)f.removeChild(f.firstChild);(A=(It-d+1)*this.vDomRowHeight)<Vt&&(d-=Math.ceil((Vt-A)/this.vDomRowHeight))<0&&(d=0),d-=C=Math.min(Math.max(Math.floor(this.vDomWindowBuffer/this.vDomRowHeight),this.vDomWindowMinMarginRows),d)}else this.clear();if(It&&Ei.elVisible(this.elementVertical)){for(this.vDomTop=d,this.vDomBottom=d-1;(D<=Vt+this.vDomWindowBuffer||K<this.vDomWindowMinTotalRows)&&this.vDomBottom<It-1;){var ve,ee=this.vDomBottom+1,he=ut[ee];this.styleRow(he,ee),f.appendChild(he.getElement()),he.initialize(),he.heightInitialized||he.normalizeHeight(!0),ve=he.getHeight(),K<C?F+=ve:D+=ve,ve>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*ve),this.vDomBottom++,K++}d?(this.vDomTopPad=s?this.vDomRowHeight*this.vDomTop+u:this.scrollTop-F,this.vDomBottomPad=this.vDomBottom==It-1?0:Math.max(this.vDomScrollHeight-this.vDomTopPad-D-F,0)):(this.vDomTopPad=0,this.vDomRowHeight=Math.floor((D+F)/K),this.vDomBottomPad=this.vDomRowHeight*(It-this.vDomBottom-1),this.vDomScrollHeight=F+D+this.vDomBottomPad-Vt),f.style.paddingTop=this.vDomTopPad+"px",f.style.paddingBottom=this.vDomBottomPad+"px",s&&(this.scrollTop=this.vDomTopPad+F+u-(this.elementVertical.scrollWidth>this.elementVertical.clientWidth?this.elementVertical.offsetHeight-Vt:0)),this.scrollTop=Math.min(this.scrollTop,this.elementVertical.scrollHeight-Vt),this.elementVertical.scrollWidth>this.elementVertical.offsetWidth&&s&&(this.scrollTop+=this.elementVertical.offsetHeight-Vt),this.vDomScrollPosTop=this.scrollTop,this.vDomScrollPosBottom=this.scrollTop,_.scrollTop=this.scrollTop,this.dispatch("render-virtual-fill")}}_addTopRow(d,s){for(var u=this.tableElement,f=[],_=0,C=this.vDomTop-1,D=0;this.vDomTop;){let F,K,A=d[C];if(!(A&&D<this.vDomMaxRenderChain))break;if(F=A.getHeight()||this.vDomRowHeight,K=A.initialized,!(s>=F))break;this.styleRow(A,C),u.insertBefore(A.getElement(),u.firstChild),(!A.initialized||!A.heightInitialized)&&f.push(A),A.initialize(),K||(F=A.getElement().offsetHeight,F>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*F)),s-=F,_+=F,this.vDomTop--,C--,D++}for(let A of f)A.clearCellHeight();this._quickNormalizeRowHeight(f),_&&(this.vDomTopPad-=_,this.vDomTopPad<0&&(this.vDomTopPad=C*this.vDomRowHeight),C<1&&(this.vDomTopPad=0),u.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop-=_)}_removeTopRow(d,s){for(var u=[],f=0,_=0;;){let D,C=d[this.vDomTop];if(!(C&&_<this.vDomMaxRenderChain))break;if(D=C.getHeight()||this.vDomRowHeight,!(s>=D))break;this.vDomTop++,s-=D,f+=D,u.push(C),_++}for(let C of u){let D=C.getElement();D.parentNode&&D.parentNode.removeChild(D)}f&&(this.vDomTopPad+=f,this.tableElement.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop+=this.vDomTop?f:f+this.vDomWindowBuffer)}_addBottomRow(d,s){for(var u=this.tableElement,f=[],_=0,C=this.vDomBottom+1,D=0;;){let F,K,A=d[C];if(!(A&&D<this.vDomMaxRenderChain))break;if(F=A.getHeight()||this.vDomRowHeight,K=A.initialized,!(s>=F))break;this.styleRow(A,C),u.appendChild(A.getElement()),(!A.initialized||!A.heightInitialized)&&f.push(A),A.initialize(),K||(F=A.getElement().offsetHeight,F>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*F)),s-=F,_+=F,this.vDomBottom++,C++,D++}for(let A of f)A.clearCellHeight();this._quickNormalizeRowHeight(f),_&&(this.vDomBottomPad-=_,(this.vDomBottomPad<0||C==d.length-1)&&(this.vDomBottomPad=0),u.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom+=_)}_removeBottomRow(d,s){for(var u=[],f=0,_=0;;){let D,C=d[this.vDomBottom];if(!(C&&_<this.vDomMaxRenderChain))break;if(D=C.getHeight()||this.vDomRowHeight,!(s>=D))break;this.vDomBottom--,s-=D,f+=D,u.push(C),_++}for(let C of u){let D=C.getElement();D.parentNode&&D.parentNode.removeChild(D)}f&&(this.vDomBottomPad+=f,this.vDomBottomPad<0&&(this.vDomBottomPad=0),this.tableElement.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom-=f)}_quickNormalizeRowHeight(d){for(let s of d)s.calcHeight();for(let s of d)s.setCellHeight()}}class fc extends xi{constructor(d){super(d),this.element=this.createHolderElement(),this.tableElement=this.createTableElement(),this.heightFixer=this.createTableElement(),this.firstRender=!1,this.renderMode="virtual",this.fixedHeight=!1,this.rows=[],this.activeRowsPipeline=[],this.activeRows=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0,this.scrollTop=0,this.scrollLeft=0,this.rowNumColumn=!1,this.redrawBlock=!1,this.redrawBlockRestoreConfig=!1,this.redrawBlockRederInPosition=!1,this.dataPipeline=[],this.displayPipeline=[],this.renderer=null}createHolderElement(){var d=document.createElement("div");return d.classList.add("tabulator-tableholder"),d.setAttribute("tabindex",0),d.setAttribute("role","rowgroup"),d}createTableElement(){var d=document.createElement("div");return d.classList.add("tabulator-table"),d.setAttribute("role","rowgroup"),d}getElement(){return this.element}getTableElement(){return this.tableElement}getRowPosition(d,s){return s?this.activeRows.indexOf(d):this.rows.indexOf(d)}initialize(){this.initializeRenderer(),this.element.appendChild(this.tableElement),this.firstRender=!0,this.element.addEventListener("scroll",()=>{var d=this.element.scrollLeft,s=this.scrollLeft>d,u=this.element.scrollTop,f=this.scrollTop>u;this.scrollLeft!=d&&(this.scrollLeft=d,this.dispatch("scroll-horizontal",d,s),this.dispatchExternal("scrollHorizontal",d,s)),this.scrollTop!=u&&(this.scrollTop=u,this.renderer.scrollRows(u,f),this.dispatch("scroll-vertical",u,f),this.dispatchExternal("scrollVertical",u,f))})}findRow(d){return"object"!=typeof d?null!=d&&(this.rows.find(u=>u.data[this.table.options.index]==d)||!1):d instanceof Wo?d:d instanceof uu?d._getSelf()||!1:"undefined"!=typeof HTMLElement&&d instanceof HTMLElement&&this.rows.find(u=>u.getElement()===d)||!1}getRowFromDataObject(d){return this.rows.find(u=>u.data===d)||!1}getRowFromPosition(d,s){return s?this.activeRows[d]:this.rows[d]}scrollToRow(d,s,u){return this.renderer.scrollToRowPosition(d,s,u)}setData(d,s,u){return new Promise((f,_)=>{s&&this.getDisplayRows().length?this.table.options.pagination?this._setDataActual(d,!0):this.reRenderInPosition(()=>{this._setDataActual(d)}):(this.table.options.autoColumns&&u&&this.table.initialized&&this.table.columnManager.generateColumnsFromRowData(d),this.resetScroll(),this._setDataActual(d)),f()})}_setDataActual(d,s){this.dispatchExternal("dataProcessing",d),this._wipeElements(),Array.isArray(d)?(this.dispatch("data-processing",d),d.forEach((u,f)=>{if(u&&"object"==typeof u){var _=new Wo(u,this);this.rows.push(_)}else console.warn("Data Loading Warning - Invalid row data detected and ignored, expecting object but received:",u)}),this.refreshActiveData(!1,!1,s),this.dispatch("data-processed",d),this.dispatchExternal("dataProcessed",d)):console.error("Data Loading Error - Unable to process data due to invalid data type \nExpecting: array \nReceived: ",typeof d,"\nData:     ",d)}_wipeElements(){this.dispatch("rows-wipe"),this.rows.forEach(d=>{d.wipe()}),this.rows=[],this.activeRows=[],this.activeRowsPipeline=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0,this.adjustTableSize()}deleteRow(d,s){var u=this.rows.indexOf(d),f=this.activeRows.indexOf(d);f>-1&&this.activeRows.splice(f,1),u>-1&&this.rows.splice(u,1),this.setActiveRows(this.activeRows),this.displayRowIterator(_=>{var C=_.indexOf(d);C>-1&&_.splice(C,1)}),s||this.reRenderInPosition(),this.regenerateRowNumbers(),this.dispatchExternal("rowDeleted",d.getComponent()),this.displayRowsCount||this._showPlaceholder(),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.getData())}addRow(d,s,u,f){var _=this.addRowActual(d,s,u,f);return this.dispatch("row-added",_,d,s,u),_}addRows(d,s,u){var f=[];return new Promise((_,C)=>{s=this.findAddRowPos(s),Array.isArray(d)||(d=[d]),(void 0===u&&s||void 0!==u&&!s)&&d.reverse(),d.forEach((D,A)=>{var F=this.addRow(D,s,u,!0);f.push(F),this.dispatch("row-added",F,d,s,u)}),this.refreshActiveData(!1,!1,!0),this.regenerateRowNumbers(),f.length&&this._clearPlaceholder(),_(f)})}findAddRowPos(d){return void 0===d&&(d=this.table.options.addRowPos),"pos"===d&&(d=!0),"bottom"===d&&(d=!1),d}addRowActual(d,s,u,f){var A,F,_=d instanceof Wo?d:new Wo(d||{},this),C=this.findAddRowPos(s),D=-1;return u||(F=this.chain("row-adding-position",[_,C],null,{index:u,top:C}),u=F.index,C=F.top),void 0!==u&&(u=this.findRow(u)),(u=this.chain("row-adding-index",[_,u,C],null,u))&&(D=this.rows.indexOf(u)),u&&D>-1?(A=this.activeRows.indexOf(u),this.displayRowIterator(function(K){var ut=K.indexOf(u);ut>-1&&K.splice(C?ut:ut+1,0,_)}),A>-1&&this.activeRows.splice(C?A:A+1,0,_),this.rows.splice(C?D:D+1,0,_)):C?(this.displayRowIterator(function(K){K.unshift(_)}),this.activeRows.unshift(_),this.rows.unshift(_)):(this.displayRowIterator(function(K){K.push(_)}),this.activeRows.push(_),this.rows.push(_)),this.setActiveRows(this.activeRows),this.dispatchExternal("rowAdded",_.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()),f||this.reRenderInPosition(),_}moveRow(d,s,u){this.dispatch("row-move",d,s,u),this.moveRowActual(d,s,u),this.regenerateRowNumbers(),this.dispatch("row-moved",d,s,u),this.dispatchExternal("rowMoved",d.getComponent())}moveRowActual(d,s,u){this.moveRowInArray(this.rows,d,s,u),this.moveRowInArray(this.activeRows,d,s,u),this.displayRowIterator(f=>{this.moveRowInArray(f,d,s,u)}),this.dispatch("row-moving",d,s,u)}moveRowInArray(d,s,u,f){var _,C,A;if(s!==u&&((_=d.indexOf(s))>-1&&(d.splice(_,1),C=d.indexOf(u),d.splice(C>-1?f?C+1:C:_,0,s)),d===this.getDisplayRows())){A=C>_?C:_+1;for(let F=_<C?_:C;F<=A;F++)d[F]&&this.styleRow(d[F],F)}}clearData(){this.setData([])}getRowIndex(d){return this.findRowIndex(d,this.rows)}getDisplayRowIndex(d){var s=this.getDisplayRows().indexOf(d);return s>-1&&s}nextDisplayRow(d,s){var u=this.getDisplayRowIndex(d),f=!1;return!1!==u&&u<this.displayRowsCount-1&&(f=this.getDisplayRows()[u+1]),!f||f instanceof Wo&&"row"==f.type?f:this.nextDisplayRow(f,s)}prevDisplayRow(d,s){var u=this.getDisplayRowIndex(d),f=!1;return u&&(f=this.getDisplayRows()[u-1]),!s||!f||f instanceof Wo&&"row"==f.type?f:this.prevDisplayRow(f,s)}findRowIndex(d,s){var u;return!!((d=this.findRow(d))&&(u=s.indexOf(d),u>-1))&&u}getData(d,s){var u=[];return this.getRows(d).forEach(function(_){"row"==_.type&&u.push(_.getData(s||"data"))}),u}getComponents(d){var s=[];return this.getRows(d).forEach(function(f){s.push(f.getComponent())}),s}getDataCount(d){return this.getRows(d).length}scrollHorizontal(d){this.scrollLeft=d,this.element.scrollLeft=d,this.dispatch("scroll-horizontal",d)}registerDataPipelineHandler(d,s){void 0!==s?(this.dataPipeline.push({handler:d,priority:s}),this.dataPipeline.sort((u,f)=>u.priority-f.priority)):console.error("Data pipeline handlers must have a priority in order to be registered")}registerDisplayPipelineHandler(d,s){void 0!==s?(this.displayPipeline.push({handler:d,priority:s}),this.displayPipeline.sort((u,f)=>u.priority-f.priority)):console.error("Display pipeline handlers must have a priority in order to be registered")}refreshActiveData(d,s,u){var f=this.table,_="",C=0,D=["all","dataPipeline","display","displayPipeline","end"];if("function"==typeof d)if((C=this.dataPipeline.findIndex(A=>A.handler===d))>-1)_="dataPipeline",s&&(C==this.dataPipeline.length-1?_="display":C++);else{if(!((C=this.displayPipeline.findIndex(A=>A.handler===d))>-1))return void console.error("Unable to refresh data, invalid handler provided",d);_="displayPipeline",s&&(C==this.displayPipeline.length-1?_="end":C++)}else _=d||"all",C=0;if(this.redrawBlock)(!this.redrawBlockRestoreConfig||this.redrawBlockRestoreConfig&&(this.redrawBlockRestoreConfig.stage===_&&C<this.redrawBlockRestoreConfig.index||D.indexOf(_)<D.indexOf(this.redrawBlockRestoreConfig.stage)))&&(this.redrawBlockRestoreConfig={handler:d,skipStage:s,renderInPosition:u,stage:_,index:C});else{switch(this.dispatch("data-refeshing"),d||(this.activeRowsPipeline[0]=this.rows.slice(0)),_){case"all":case"dataPipeline":for(let A=C;A<this.dataPipeline.length;A++){let F=this.dataPipeline[A].handler(this.activeRowsPipeline[A].slice(0));this.activeRowsPipeline[A+1]=F||this.activeRowsPipeline[A].slice(0)}this.setActiveRows(this.activeRowsPipeline[this.dataPipeline.length]),this.regenerateRowNumbers();case"display":C=0,this.resetDisplayRows();case"displayPipeline":for(let A=C;A<this.displayPipeline.length;A++){let F=this.displayPipeline[A].handler((A?this.getDisplayRows(A-1):this.activeRows).slice(0),u);this.setDisplayRows(F||this.getDisplayRows(A-1).slice(0),A)}}Ei.elVisible(this.element)&&(u?this.reRenderInPosition():(d||this.table.columnManager.renderer.renderColumns(),this.renderTable(),f.options.layoutColumnsOnNewData&&this.table.columnManager.redraw(!0))),this.dispatch("data-refeshed")}}regenerateRowNumbers(){this.rowNumColumn&&this.activeRows.forEach(d=>{var s=d.getCell(this.rowNumColumn);s&&s._generateContents()})}setActiveRows(d){this.activeRows=d,this.activeRowsCount=this.activeRows.length}resetDisplayRows(){this.displayRows=[],this.displayRows.push(this.activeRows.slice(0)),this.displayRowsCount=this.displayRows[0].length}getNextDisplayIndex(){return this.displayRows.length}setDisplayRows(d,s){var u=!0;return s&&void 0!==this.displayRows[s]?(this.displayRows[s]=d,u=!0):(this.displayRows.push(d),u=s=this.displayRows.length-1),s==this.displayRows.length-1&&(this.displayRowsCount=this.displayRows[this.displayRows.length-1].length),u}getDisplayRows(d){return void 0===d?this.displayRows.length?this.displayRows[this.displayRows.length-1]:[]:this.displayRows[d]||[]}getVisibleRows(d){return this.renderer.visibleRows(!d)}displayRowIterator(d){this.activeRowsPipeline.forEach(d),this.displayRows.forEach(d),this.displayRowsCount=this.displayRows[this.displayRows.length-1].length}getRows(d){var s;switch(d){case"active":s=this.activeRows;break;case"display":s=this.table.rowManager.getDisplayRows();break;case"visible":s=this.getVisibleRows(!0);break;default:s=this.chain("rows-retrieve",d,null,this.rows)||this.rows}return s}reRenderInPosition(d){this.redrawBlock?d?d():this.redrawBlockRederInPosition=!0:this.renderer.rerenderRows(d)}initializeRenderer(){var d;(d="string"==typeof this.table.options.renderVertical?{virtual:Mh,basic:Ih}[this.table.options.renderVertical]:this.table.options.renderVertical)?(this.renderer=new d(this.table,this.element,this.tableElement),this.renderer.initialize(),this.fixedHeight=!(!this.table.element.clientHeight&&!this.table.options.height)):console.error("Unable to find matching renderer:",table.options.renderVertical)}getRenderMode(){return this.renderMode}renderTable(){this.dispatchExternal("renderStarted"),this.element.scrollTop=0,this._clearTable(),this.displayRowsCount?(this.renderer.renderRows(),this.firstRender&&(this.firstRender=!1,this.layoutRefresh())):this.renderEmptyScroll(),this.fixedHeight||this.adjustTableSize(),this.dispatch("table-layout"),this.displayRowsCount||this._showPlaceholder(),this.dispatchExternal("renderComplete")}renderEmptyScroll(){this.table.options.placeholder?this.tableElement.style.display="none":this.tableElement.style.minWidth=this.table.columnManager.getWidth()+"px"}_clearTable(){this._clearPlaceholder(),this.scrollTop=0,this.scrollLeft=0,this.renderer.clearRows()}_showPlaceholder(){this.table.options.placeholder&&(this.table.options.placeholder.setAttribute("tabulator-render-mode",this.renderMode),this.getElement().appendChild(this.table.options.placeholder),this.table.options.placeholder.style.width=this.table.columnManager.getWidth()+"px")}_clearPlaceholder(){this.table.options.placeholder&&this.table.options.placeholder.parentNode&&this.table.options.placeholder.parentNode.removeChild(this.table.options.placeholder)}styleRow(d,s){var u=d.getElement();s%2?(u.classList.add("tabulator-row-even"),u.classList.remove("tabulator-row-odd")):(u.classList.add("tabulator-row-odd"),u.classList.remove("tabulator-row-even"))}normalizeHeight(){this.activeRows.forEach(function(d){d.normalizeHeight()})}adjustTableSize(){var d=this.element.clientHeight;if("fill"===this.renderer.verticalFillMode){let s=Math.floor(this.table.columnManager.getElement().getBoundingClientRect().height+(this.table.footerManager&&this.table.footerManager.active&&!this.table.footerManager.external?this.table.footerManager.getElement().getBoundingClientRect().height:0));this.fixedHeight?(this.element.style.minHeight="calc(100% - "+s+"px)",this.element.style.height="calc(100% - "+s+"px)",this.element.style.maxHeight="calc(100% - "+s+"px)"):(this.element.style.height="",this.element.style.height=this.table.element.clientHeight-s+"px",this.element.scrollTop=this.scrollTop),this.renderer.resize(),!this.fixedHeight&&d!=this.element.clientHeight&&(this.subscribed("table-resize")?this.dispatch("table-resize"):this.redraw())}}reinitialize(){this.rows.forEach(function(d){d.reinitialize(!0)})}blockRedraw(){this.redrawBlock=!0,this.redrawBlockRestoreConfig=!1}restoreRedraw(){this.redrawBlock=!1,this.redrawBlockRestoreConfig?(this.refreshActiveData(this.redrawBlockRestoreConfig.handler,this.redrawBlockRestoreConfig.skipStage,this.redrawBlockRestoreConfig.renderInPosition),this.redrawBlockRestoreConfig=!1):this.redrawBlockRederInPosition&&this.reRenderInPosition(),this.redrawBlockRederInPosition=!1}redraw(d){var s=this.scrollLeft;this.adjustTableSize(),this.table.tableWidth=this.table.element.clientWidth,d?this.renderTable():(this.reRenderInPosition(),this.scrollHorizontal(s),this.displayRowsCount||this.table.options.placeholder&&this.getElement().appendChild(this.table.options.placeholder))}resetScroll(){if(this.element.scrollLeft=0,this.element.scrollTop=0,"ie"===this.table.browser){var d=document.createEvent("Event");d.initEvent("scroll",!1,!0),this.element.dispatchEvent(d)}else this.element.dispatchEvent(new Event("scroll"))}}class Qd extends xi{constructor(d){super(d),this.active=!1,this.element=this.createElement(),this.external=!1,this.links=[],this.initializeElement()}initialize(){this.initializeElement()}createElement(){var d=document.createElement("div");return d.classList.add("tabulator-footer"),d}initializeElement(){if(this.table.options.footerElement)switch(typeof this.table.options.footerElement){case"string":"<"===this.table.options.footerElement[0]?this.element.innerHTML=this.table.options.footerElement:(this.external=!0,this.element=document.querySelector(this.table.options.footerElement));break;default:this.element=this.table.options.footerElement}}getElement(){return this.element}append(d,s){this.activate(s),this.element.appendChild(d),this.table.rowManager.adjustTableSize()}prepend(d,s){this.activate(s),this.element.insertBefore(d,this.element.firstChild),this.table.rowManager.adjustTableSize()}remove(d){d.parentNode.removeChild(d),this.deactivate()}deactivate(d){(!this.element.firstChild||d)&&(this.external||this.element.parentNode.removeChild(this.element),this.active=!1)}activate(d){this.active||(this.active=!0,this.external||(this.table.element.appendChild(this.getElement()),this.table.element.style.display="")),d&&this.links.push(d)}redraw(){this.links.forEach(function(d){d.footerRedraw()})}}class va extends xi{constructor(d){super(d),this.el=this.table.element,this.abortClasses=["tabulator-headers","tabulator-table"],this.previousTargets={},this.listeners=["click","dblclick","contextmenu","mouseenter","mouseleave","mouseover","mouseout","mousemove","touchstart","touchend"],this.componentMap={"tabulator-cell":"cell","tabulator-row":"row","tabulator-group":"group","tabulator-col":"column"},this.buildListenerMap(),this.bindSubscriptionWatchers()}buildListenerMap(){var d={};this.listeners.forEach(s=>{d[s]={handler:null,components:[]}}),this.listeners=d}bindSubscriptionWatchers(){var d=Object.keys(this.listeners),s=Object.values(this.componentMap);for(let u of s)for(let f of d)this.subscriptionChange(u+"-"+f,this.subscriptionChanged.bind(this,u,f))}subscriptionChanged(d,s,u){var f=this.listeners[s].components,_=f.indexOf(d),C=!1;u?-1===_&&(f.push(d),C=!0):this.subscribed(d+"-"+s)||_>-1&&(f.splice(_,1),C=!0),C&&this.updateEventListeners()}updateEventListeners(){for(let d in this.listeners){let s=this.listeners[d];s.components.length?s.handler||(s.handler=this.track.bind(this,d),this.el.addEventListener(d,s.handler)):s.handler&&(this.el.removeEventListener(d,s.handler),s.handler=null)}}track(d,s){var u=s.composedPath&&s.composedPath()||s.path,f=this.findTargets(u);f=this.bindComponents(d,f),this.triggerEvents(d,s,f)}findTargets(d){var s={};let u=Object.keys(this.componentMap);for(let f of d){let _=f.classList?[...f.classList]:[];if(_.filter(A=>this.abortClasses.includes(A)).length)break;let D=_.filter(A=>u.includes(A));for(let A of D)s[this.componentMap[A]]=f}return s.group&&s.group===s.row&&delete s.row,s}bindComponents(d,s){var u=Object.keys(s).reverse(),f=this.listeners[d],_={};for(let C of u){let D,A=s[C],F=this.previousTargets[C];if(F&&F.target===A)D=F.component;else switch(C){case"row":case"group":(f.components.includes("row")||f.components.includes("cell"))&&(D=this.table.rowManager.getVisibleRows().find(ut=>ut.getElement()===A));break;case"column":f.components.includes("column")&&(D=this.table.columnManager.findColumn(A));break;case"cell":f.components.includes("cell")&&(D=s.row.findCell(A))}D&&(s[C]=D,_[C]={target:A,component:D})}return this.previousTargets=_,s}triggerEvents(d,s,u){var f=this.listeners[d];for(let _ in u)u[_]&&f.components.includes(_)&&this.dispatch(_+"-"+d,s,u[_])}}class qd{constructor(d){this.table=d,this.bindings={}}bind(d,s,u){this.bindings[d]||(this.bindings[d]={}),this.bindings[d][s]?console.warn("Unable to bind component handler, a matching function name is already bound",d,s,hanlder):this.bindings[d][s]=u}handle(d,s,u){if(this.bindings[d]&&this.bindings[d][u])return this.bindings[d][u].bind(null,s);"then"!==u&&"string"==typeof u&&!u.startsWith("_")&&console.error("The "+d+" component does not have a "+u+" function, have you checked that you have the correct Tabulator module installed?")}}class ud extends xi{constructor(d){super(d),this.loaderElement=this.createLoaderElement(),this.msgElement=this.createMsgElement(),this.loadingElement=null,this.errorElement=null,this.requestOrder=0,this.loading=!1}initialize(){var d;this.loaderElement.appendChild(this.msgElement),this.table.options.dataLoaderLoading&&("string"==typeof this.table.options.dataLoaderLoading?((d=document.createElement("template")).innerHTML=this.table.options.dataLoaderLoading.trim(),this.loadingElement=d.firstElementChild):this.loadingElement=this.table.options.dataLoaderLoading),this.table.options.dataLoaderError&&("string"==typeof this.table.options.dataLoaderError?((d=document.createElement("template")).innerHTML=this.table.options.dataLoaderError.trim(),this.errorElement=d.firstElementChild):this.errorElement=this.table.options.dataLoaderError)}createLoaderElement(){var d=document.createElement("div");return d.classList.add("tabulator-loader"),d}createMsgElement(){var d=document.createElement("div");return d.classList.add("tabulator-loader-msg"),d.setAttribute("role","alert"),d}load(d,s,u,f,_){var C=++this.requestOrder;return this.dispatchExternal("dataLoading",d),d&&(0==d.indexOf("{")||0==d.indexOf("["))&&(d=JSON.parse(d)),this.confirm("data-loading",d,s,u,_)?(this.loading=!0,_||this.showLoader(),s=this.chain("data-params",[d,u,_],s||{},{}),s=this.mapParams(s,this.table.options.dataSendParams),this.chain("data-load",[d,s,u,_],Promise.resolve([])).then(F=>{!Array.isArray(F)&&"object"==typeof F&&(F=this.mapParams(F,this.objectInvert(this.table.options.dataReceiveParams)));var K=this.chain("data-loaded",F,null,F);C==this.requestOrder?(this.hideLoader(),!1!==K&&(this.dispatchExternal("dataLoaded",K),this.table.rowManager.setData(K,f,!f))):console.warn("Data Load Response Blocked - An active data load request was blocked by an attempt to change table data while the request was being made")}).catch(F=>{console.error("Data Load Error: ",F),this.dispatchExternal("dataLoadError",F),_||this.showError(),setTimeout(()=>{this.hideLoader()},3e3)}).finally(()=>{this.loading=!1})):(this.dispatchExternal("dataLoaded",d),d||(d=[]),this.table.rowManager.setData(d,f,!f),Promise.resolve())}mapParams(d,s){var u={};for(let f in d)u[s.hasOwnProperty(f)?s[f]:f]=d[f];return u}objectInvert(d){var s={};for(let u in d)s[d[u]]=u;return s}blockActiveLoad(){this.requestOrder++}showLoader(){if("function"==typeof this.table.options.dataLoader?this.table.options.dataLoader():this.table.options.dataLoader){for(this.hideLoader();this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.remove("tabulator-error"),this.msgElement.classList.add("tabulator-loading"),this.loadingElement?this.msgElement.appendChild(this.loadingElement):this.msgElement.innerHTML=this.langText("data|loading"),this.table.element.appendChild(this.loaderElement)}}showError(){for(this.hideLoader();this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.remove("tabulator-loading"),this.msgElement.classList.add("tabulator-error"),this.errorElement?this.msgElement.appendChild(this.errorElement):this.msgElement.innerHTML=this.langText("data|error"),this.table.element.appendChild(this.loaderElement)}hideLoader(){this.loaderElement.parentNode&&this.loaderElement.parentNode.removeChild(this.loaderElement)}}class Pf{constructor(d,s,u){this.table=d,this.events={},this.optionsList=s||{},this.subscriptionNotifiers={},this.dispatch=u?this._debugDispatch.bind(this):this._dispatch.bind(this),this.debug=u}subscriptionChange(d,s){this.subscriptionNotifiers[d]||(this.subscriptionNotifiers[d]=[]),this.subscriptionNotifiers[d].push(s),this.subscribed(d)&&this._notifiySubscriptionChange(d,!0)}subscribe(d,s){this.events[d]||(this.events[d]=[]),this.events[d].push(s),this._notifiySubscriptionChange(d,!0)}unsubscribe(d,s){var u;if(this.events[d]){if(s){if(!((u=this.events[d].findIndex(f=>f===s))>-1))return void console.warn("Cannot remove event, no matching event found:",d,s);this.events[d].splice(u,1)}else delete this.events[d];this._notifiySubscriptionChange(d,!1)}else console.warn("Cannot remove event, no events set on:",d)}subscribed(d){return this.events[d]&&this.events[d].length}_notifiySubscriptionChange(d,s){var u=this.subscriptionNotifiers[d];u&&u.forEach(f=>{f(s)})}_dispatch(){var u,d=Array.from(arguments),s=d.shift();return this.events[s]&&this.events[s].forEach((f,_)=>{let C=f.apply(this.table,d);_||(u=C)}),u}_debugDispatch(){var d=Array.from(arguments),s=d[0];return d[0]="ExternalEvent:"+d[0],(!0===this.debug||this.debug.includes(s))&&console.log(...d),this._dispatch(...arguments)}}class Og{constructor(d){this.events={},this.subscriptionNotifiers={},this.dispatch=d?this._debugDispatch.bind(this):this._dispatch.bind(this),this.chain=d?this._debugChain.bind(this):this._chain.bind(this),this.confirm=d?this._debugConfirm.bind(this):this._confirm.bind(this),this.debug=d}subscriptionChange(d,s){this.subscriptionNotifiers[d]||(this.subscriptionNotifiers[d]=[]),this.subscriptionNotifiers[d].push(s),this.subscribed(d)&&this._notifiySubscriptionChange(d,!0)}subscribe(d,s,u=1e4){this.events[d]||(this.events[d]=[]),this.events[d].push({callback:s,priority:u}),this.events[d].sort((f,_)=>f.priority-_.priority),this._notifiySubscriptionChange(d,!0)}unsubscribe(d,s){var u;if(this.events[d]){if(s){if(!((u=this.events[d].findIndex(f=>f.callback===s))>-1))return void console.warn("Cannot remove event, no matching event found:",d,s);this.events[d].splice(u,1)}this._notifiySubscriptionChange(d,!1)}else console.warn("Cannot remove event, no events set on:",d)}subscribed(d){return this.events[d]&&this.events[d].length}_chain(d,s,u,f){var _=u;return Array.isArray(s)||(s=[s]),this.subscribed(d)?(this.events[d].forEach((C,D)=>{_=C.callback.apply(this,s.concat([_]))}),_):"function"==typeof f?f():f}_confirm(d,s){var u=!1;return Array.isArray(s)||(s=[s]),this.subscribed(d)&&this.events[d].forEach((f,_)=>{f.callback.apply(this,s)&&(u=!0)}),u}_notifiySubscriptionChange(d,s){var u=this.subscriptionNotifiers[d];u&&u.forEach(f=>{f(s)})}_dispatch(){var d=Array.from(arguments),s=d.shift();this.events[s]&&this.events[s].forEach(u=>{u.callback.apply(this,d)})}_debugDispatch(){var d=Array.from(arguments),s=d[0];return d[0]="InternalEvent:"+s,(!0===this.debug||this.debug.includes(s))&&console.log(...d),this._dispatch(...arguments)}_debugChain(){var d=Array.from(arguments),s=d[0];return d[0]="InternalEvent:"+s,(!0===this.debug||this.debug.includes(s))&&console.log(...d),this._chain(...arguments)}_debugConfirm(){var d=Array.from(arguments),s=d[0];return d[0]="InternalEvent:"+s,(!0===this.debug||this.debug.includes(s))&&console.log(...d),this._confirm(...arguments)}}let hd=(()=>{class m{static register(s){m.tables.push(s)}static deregister(s){var u=m.tables.indexOf(s);u>-1&&m.tables.splice(u,1)}static lookupTable(s,u){var _,C,f=[];if("string"==typeof s){if((_=document.querySelectorAll(s)).length)for(var D=0;D<_.length;D++)(C=m.matchElement(_[D]))&&f.push(C)}else"undefined"!=typeof HTMLElement&&s instanceof HTMLElement||s instanceof Wl?(C=m.matchElement(s))&&f.push(C):Array.isArray(s)?s.forEach(function(A){f=f.concat(m.lookupTable(A))}):u||console.warn("Table Connection Error - Invalid Selector",s);return f}static matchElement(s){return m.tables.find(function(u){return s instanceof Wl?u===s:u.element===s})}}return m.tables=[],m})();function Ff(m){m.forEach(function(d){d.reinitializeWidth()}),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()}var xg={fitData:function(m){this.table.columnManager.renderer.reinitializeColumnWidths(m),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitDataFill:Ff,fitDataTable:Ff,fitDataStretch:function(m){var d=0,s=this.table.rowManager.element.clientWidth,u=0,f=!1;m.forEach((_,C)=>{_.widthFixed||_.reinitializeWidth(),(this.table.options.responsiveLayout?_.modules.responsive.visible:_.visible)&&(f=_),_.visible&&(d+=_.getWidth())}),f?(u=s-d+f.getWidth(),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&(f.setWidth(0),this.table.modules.responsiveLayout.update()),u>0?f.setWidth(u):f.reinitializeWidth()):this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitColumns:function(m){var _,F,d=this.table.element.clientWidth,s=0,u=0,f=0,C=[],D=[],A=0,K=0;function ut(Vt){return"string"==typeof Vt?Vt.indexOf("%")>-1?d/100*parseInt(Vt):parseInt(Vt):Vt}function It(Vt,ee,he,ve){var De=[],si=0,Wi=0,Ri=0,Si=f,Ki=0,Qi=0,nn=[];function ln(rn){return he*(rn.column.definition.widthGrow||1)}function Kn(rn){return ut(rn.width)-he*(rn.column.definition.widthShrink||0)}return Vt.forEach(function(rn,$n){var Ho=ve?Kn(rn):ln(rn);rn.column.minWidth>=Ho?De.push(rn):rn.column.maxWidth&&rn.column.maxWidth<Ho?(rn.width=rn.column.maxWidth,ee-=rn.column.maxWidth,(Si-=ve?rn.column.definition.widthShrink||1:rn.column.definition.widthGrow||1)&&(he=Math.floor(ee/Si))):(nn.push(rn),Qi+=ve?rn.column.definition.widthShrink||1:rn.column.definition.widthGrow||1)}),De.length?(De.forEach(function(rn){si+=ve?rn.width-rn.column.minWidth:rn.column.minWidth,rn.width=rn.column.minWidth}),Ki=(Wi=ee-si)-(Ri=Qi?Math.floor(Wi/Qi):Wi)*Qi,Ki+=It(nn,Wi,Ri,ve)):(Ki=Qi?ee-Math.floor(ee/Qi)*Qi:ee,nn.forEach(function(rn){rn.width=ve?Kn(rn):ln(rn)})),Ki}this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update(),this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(d-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),m.forEach(function(Vt){var ee,he,ve;Vt.visible&&(ee=Vt.definition.width,he=parseInt(Vt.minWidth),ee?(ve=ut(ee),s+=ve>he?ve:he,Vt.definition.widthShrink&&(D.push({column:Vt,width:ve>he?ve:he}),A+=Vt.definition.widthShrink)):(C.push({column:Vt,width:0}),f+=Vt.definition.widthGrow||1))}),u=d-s,_=Math.floor(u/f),K=It(C,u,_,!1),C.length&&K>0&&(C[C.length-1].width+=+K),C.forEach(function(Vt){u-=Vt.width}),(F=Math.abs(K)+u)>0&&A&&(K=It(D,F,Math.floor(F/A),!0)),D.length&&(D[D.length-1].width-=K),C.forEach(function(Vt){Vt.column.setWidth(Vt.width)}),D.forEach(function(Vt){Vt.column.setWidth(Vt.width)})}},Lg={default:{groups:{item:"item",items:"items"},columns:{},data:{loading:"Loading",error:"Error"},pagination:{page_size:"Page Size",page_title:"Show Page",first:"First",first_title:"First Page",last:"Last",last_title:"Last Page",prev:"Prev",prev_title:"Prev Page",next:"Next",next_title:"Next Page",all:"All"},headerFilters:{default:"filter column...",columns:{}}}},Ah=Object.freeze({__proto__:null,LayoutModule:(()=>{class m extends Fi{constructor(s){super(s,"layout"),this.mode=null,this.registerTableOption("layout","fitData"),this.registerTableOption("layoutColumnsOnNewData",!1),this.registerColumnOption("widthGrow"),this.registerColumnOption("widthShrink")}initialize(){var s=this.table.options.layout;m.modes[s]?this.mode=s:(console.warn("Layout Error - invalid mode set, defaulting to 'fitData' : "+s),this.mode="fitData"),this.table.element.setAttribute("tabulator-layout",this.mode)}getMode(){return this.mode}layout(){m.modes[this.mode].call(this,this.table.columnManager.columnsByIndex),this.dispatch("layout-refreshed")}}return m.moduleName="layout",m.modes=xg,m})(),LocalizeModule:(()=>{class m extends Fi{constructor(s){super(s),this.locale="default",this.lang=!1,this.bindings={},this.langList={},this.registerTableOption("locale",!1),this.registerTableOption("langs",{})}initialize(){this.langList=Ei.deepClone(m.langs),!1!==this.table.options.columnDefaults.headerFilterPlaceholder&&this.setHeaderFilterPlaceholder(this.table.options.columnDefaults.headerFilterPlaceholder);for(let s in this.table.options.langs)this.installLang(s,this.table.options.langs[s]);this.setLocale(this.table.options.locale),this.registerTableFunction("setLocale",this.setLocale.bind(this)),this.registerTableFunction("getLocale",this.getLocale.bind(this)),this.registerTableFunction("getLang",this.getLang.bind(this))}setHeaderFilterPlaceholder(s){this.langList.default.headerFilters.default=s}setHeaderFilterColumnPlaceholder(s,u){this.langList.default.headerFilters.columns[s]=u,this.lang&&!this.lang.headerFilters.columns[s]&&(this.lang.headerFilters.columns[s]=u)}installLang(s,u){this.langList[s]?this._setLangProp(this.langList[s],u):this.langList[s]=u}_setLangProp(s,u){for(let f in u)s[f]&&"object"==typeof s[f]?this._setLangProp(s[f],u[f]):s[f]=u[f]}setLocale(s){if(!0===(s=s||"default")&&navigator.language&&(s=navigator.language.toLowerCase()),s&&!this.langList[s]){let f=s.split("-")[0];this.langList[f]?(console.warn("Localization Error - Exact matching locale not found, using closest match: ",s,f),s=f):(console.warn("Localization Error - Matching locale not found, using default: ",s),s="default")}this.locale=s,this.lang=Ei.deepClone(this.langList.default||{}),"default"!=s&&function u(f,_){for(var C in f)"object"==typeof f[C]?(_[C]||(_[C]={}),u(f[C],_[C])):_[C]=f[C]}(this.langList[s],this.lang),this.dispatchExternal("localized",this.locale,this.lang),this._executeBindings()}getLocale(s){return this.locale}getLang(s){return s?this.langList[s]:this.lang}getText(s,u){var f=(s=u?s+"|"+u:s).split("|");return this._getLangElement(f,this.locale)||""}_getLangElement(s,u){var f=this.lang;return s.forEach(function(_){var C;f&&(f=void 0!==(C=f[_])&&C)}),f}bind(s,u){this.bindings[s]||(this.bindings[s]=[]),this.bindings[s].push(u),u(this.getText(s),this.lang)}_executeBindings(){for(let s in this.bindings)this.bindings[s].forEach(u=>{u(this.getText(s),this.lang)})}}return m.moduleName="localize",m.langs=Lg,m})(),CommsModule:(()=>{class m extends Fi{constructor(s){super(s)}initialize(){this.registerTableFunction("tableComms",this.receive.bind(this))}getConnections(s){var u=[];return hd.lookupTable(s).forEach(_=>{this.table!==_&&u.push(_)}),u}send(s,u,f,_){var C=this.getConnections(s);C.forEach(D=>{D.tableComms(this.table.element,u,f,_)}),!C.length&&s&&console.warn("Table Connection Error - No tables matching selector found",s)}receive(s,u,f,_){if(this.table.modExists(u))return this.table.modules[u].commsReceived(s,f,_);console.warn("Inter-table Comms Error - no such module:",u)}}return m.moduleName="comms",m})()});class Oh{constructor(d,s){this.bindStaticFuctionality(d),this.bindModules(d,Ah,!0),s&&this.bindModules(d,s)}bindStaticFuctionality(d){d.moduleBindings={},d.extendModule=function(s,u,f){if(d.moduleBindings[s]){var _=d.moduleBindings[s][u];if(_)if("object"==typeof f)for(let C in f)_[C]=f[C];else console.warn("Module Error - Invalid value type, it must be an object");else console.warn("Module Error - property does not exist:",u)}else console.warn("Module Error - module does not exist:",s)},d.registerModule=function(s){Array.isArray(s)||(s=[s]),s.forEach(u=>{d.registerModuleBinding(u)})},d.registerModuleBinding=function(s){d.moduleBindings[s.moduleName]=s},d.findTable=function(s){var u=hd.lookupTable(s,!0);return!(Array.isArray(u)&&!u.length)&&u},d.prototype.bindModules=function(){for(var s in this.modules={},d.moduleBindings){let u=d.moduleBindings[s];this.modules[s]=new u(this),u.prototype.moduleCore?this.modulesCore[s]=this.modules[s]:this.modulesRegular[s]=this.modules[s]}}}bindModules(d,s,u){var f=Object.values(s);u&&f.forEach(_=>{_.prototype.moduleCore=!0}),d.registerModule(f)}}let Wl=(()=>{class m{constructor(s,u){this.options={},this.columnManager=null,this.rowManager=null,this.footerManager=null,this.vdomHoz=null,this.externalEvents=null,this.eventBus=null,this.interactionMonitor=!1,this.browser="",this.browserSlow=!1,this.browserMobile=!1,this.rtl=!1,this.originalElement=null,this.componentFunctionBinder=new qd(this),this.dataLoader=!1,this.modules={},this.modulesCore={},this.modulesRegular={},this.optionsList=new kp(this,"table constructor"),this.initialized=!1,this.initializeElement(s)&&(this.initialzeCoreSystems(u),setTimeout(()=>{this._create()})),hd.register(this)}initializeElement(s){return"undefined"!=typeof HTMLElement&&s instanceof HTMLElement?(this.element=s,!0):"string"==typeof s?(this.element=document.querySelector(s),!!this.element||(console.error("Tabulator Creation Error - no element found matching selector: ",s),!1)):(console.error("Tabulator Creation Error - Invalid element provided:",s),!1)}initialzeCoreSystems(s){this.columnManager=new Np(this),this.rowManager=new fc(this),this.footerManager=new Qd(this),this.dataLoader=new ud(this),this.bindModules(),this.options=this.optionsList.generate(m.defaultOptions,s),this._clearObjectPointers(),this._mapDepricatedFunctionality(),this.externalEvents=new Pf(this,this.options,this.options.debugEventsExternal),this.eventBus=new Og(this.options.debugEventsInternal),this.interactionMonitor=new va(this),this.dataLoader.initialize(),this.columnManager.initialize(),this.rowManager.initialize(),this.footerManager.initialize()}_mapDepricatedFunctionality(){}_clearSelection(){this.element.classList.add("tabulator-block-select"),window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty(),this.element.classList.remove("tabulator-block-select")}_create(){this.externalEvents.dispatch("tableBuilding"),this.eventBus.dispatch("table-building"),this._rtlCheck(),this._buildElement(),this._initializeTable(),this._loadInitialData(),this.initialized=!0,this.externalEvents.dispatch("tableBuilt")}_rtlCheck(){var s=window.getComputedStyle(this.element);switch(this.options.textDirection){case"auto":if("rtl"!==s.direction)break;case"rtl":this.element.classList.add("tabulator-rtl"),this.rtl=!0;break;case"ltr":this.element.classList.add("tabulator-ltr");default:this.rtl=!1}}_clearObjectPointers(){this.options.columns=this.options.columns.slice(0),this.options.data&&!this.options.reactiveData&&(this.options.data=this.options.data.slice(0))}_buildElement(){var f,s=this.element,u=this.options;if("TABLE"===s.tagName){this.originalElement=this.element,f=document.createElement("div");var _=s.attributes;for(var C in _)"object"==typeof _[C]&&f.setAttribute(_[C].name,_[C].value);s.parentNode.replaceChild(f,s),this.element=s=f}for(s.classList.add("tabulator"),s.setAttribute("role","grid");s.firstChild;)s.removeChild(s.firstChild);u.height&&(u.height=isNaN(u.height)?u.height:u.height+"px",s.style.height=u.height),!1!==u.minHeight&&(u.minHeight=isNaN(u.minHeight)?u.minHeight:u.minHeight+"px",s.style.minHeight=u.minHeight),!1!==u.maxHeight&&(u.maxHeight=isNaN(u.maxHeight)?u.maxHeight:u.maxHeight+"px",s.style.maxHeight=u.maxHeight)}_initializeTable(){var s=this.element,u=this.options;this.columnManager.initialize(),this.rowManager.initialize(),this._detectBrowser();for(let C in this.modulesCore)this.modulesCore[C].initialize();if("string"==typeof u.placeholder){var f=document.createElement("div");f.classList.add("tabulator-placeholder");var _=document.createElement("span");_.innerHTML=u.placeholder,f.appendChild(_),u.placeholder=f}s.appendChild(this.columnManager.getElement()),s.appendChild(this.rowManager.getElement()),u.footerElement&&this.footerManager.activate(),u.autoColumns&&u.data&&this.columnManager.generateColumnsFromRowData(this.options.data);for(let C in this.modulesRegular)this.modulesRegular[C].initialize();this.columnManager.setColumns(u.columns),this.eventBus.dispatch("table-built")}_loadInitialData(){this.dataLoader.load(this.options.data)}destroy(){var s=this.element;for(hd.deregister(this),this.eventBus.dispatch("table-destroy"),this.rowManager.rows.forEach(function(u){u.wipe()}),this.rowManager.rows=[],this.rowManager.activeRows=[],this.rowManager.displayRows=[];s.firstChild;)s.removeChild(s.firstChild);s.classList.remove("tabulator")}_detectBrowser(){var s=navigator.userAgent||navigator.vendor||window.opera;s.indexOf("Trident")>-1?(this.browser="ie",this.browserSlow=!0):s.indexOf("Edge")>-1?(this.browser="edge",this.browserSlow=!0):s.indexOf("Firefox")>-1?(this.browser="firefox",this.browserSlow=!1):(this.browser="other",this.browserSlow=!1),this.browserMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(s)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(s.substr(0,4))}blockRedraw(){return this.rowManager.blockRedraw()}restoreRedraw(){return this.rowManager.restoreRedraw()}setDataFromLocalFile(s){return new Promise((u,f)=>{var _=document.createElement("input");_.type="file",_.accept=s||".json,application/json",_.addEventListener("change",C=>{var F,D=_.files[0],A=new FileReader;A.readAsText(D),A.onload=K=>{try{F=JSON.parse(A.result)}catch(ut){return console.warn("File Load Error - File contents is invalid JSON",ut),void f(ut)}this.setData(F).then(ut=>{u(ut)}).catch(ut=>{u(ut)})},A.onerror=K=>{console.warn("File Load Error - Unable to read file"),f()}}),_.click()})}setData(s,u,f){if(this.initialized)return this.dataLoader.load(s,u,f,!1);console.warn("setData failed - table not yet initialized. To set initial data please use the 'data' property in the table constructor.")}clearData(){this.dataLoader.blockActiveLoad(),this.rowManager.clearData()}getData(s){return this.rowManager.getData(s)}getDataCount(s){return this.rowManager.getDataCount(s)}replaceData(s,u,f){if(this.initialized)return this.dataLoader.load(s,u,f,!0,!0);console.warn("replaceData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}updateData(s){var u=0;if(this.initialized)return new Promise((f,_)=>{this.dataLoader.blockActiveLoad(),"string"==typeof s&&(s=JSON.parse(s)),s?s.forEach(C=>{var D=this.rowManager.findRow(C[this.options.index]);D&&(u++,D.updateData(C).then(()=>{--u||f()}))}):(console.warn("Update Error - No data provided"),_("Update Error - No data provided"))});console.warn("updateData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}addData(s,u,f){if(this.initialized)return new Promise((_,C)=>{this.dataLoader.blockActiveLoad(),"string"==typeof s&&(s=JSON.parse(s)),s?this.rowManager.addRows(s,u,f).then(D=>{var A=[];D.forEach(function(F){A.push(F.getComponent())}),_(A)}):(console.warn("Update Error - No data provided"),C("Update Error - No data provided"))});console.warn("addData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}updateOrAddData(s){var u=[],f=0;if(this.initialized)return new Promise((_,C)=>{this.dataLoader.blockActiveLoad(),"string"==typeof s&&(s=JSON.parse(s)),s?s.forEach(D=>{var A=this.rowManager.findRow(D[this.options.index]);f++,A?A.updateData(D).then(()=>{f--,u.push(A.getComponent()),f||_(u)}):this.rowManager.addRows(D).then(F=>{f--,u.push(F[0].getComponent()),f||_(u)})}):(console.warn("Update Error - No data provided"),C("Update Error - No data provided"))});console.warn("updateOrAddData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}getRow(s){var u=this.rowManager.findRow(s);return u?u.getComponent():(console.warn("Find Error - No matching row found:",s),!1)}getRowFromPosition(s,u){var f=this.rowManager.getRowFromPosition(s,u);return f?f.getComponent():(console.warn("Find Error - No matching row found:",s),!1)}deleteRow(s){var u=[];Array.isArray(s)||(s=[s]);for(let f of s){let _=this.rowManager.findRow(f,!0);if(!_)return console.error("Delete Error - No matching row found:",f),Promise.reject("Delete Error - No matching row found");u.push(_)}return u.sort((f,_)=>this.rowManager.rows.indexOf(f)>this.rowManager.rows.indexOf(_)?1:-1),u.forEach(f=>{f.delete()}),this.rowManager.reRenderInPosition(),Promise.resolve()}addRow(s,u,f){if(this.initialized)return"string"==typeof s&&(s=JSON.parse(s)),this.rowManager.addRows(s,u,f).then(_=>_[0].getComponent());console.warn("addRow failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}updateOrAddRow(s,u){var f=this.rowManager.findRow(s);return"string"==typeof u&&(u=JSON.parse(u)),f?f.updateData(u).then(()=>f.getComponent()):this.rowManager.addRows(u).then(_=>_[0].getComponent())}updateRow(s,u){var f=this.rowManager.findRow(s);return"string"==typeof u&&(u=JSON.parse(u)),f?f.updateData(u).then(()=>{resolve(f.getComponent())}):(console.warn("Update Error - No matching row found:",s),Promise.reject("Update Error - No matching row found"))}scrollToRow(s,u,f){var _=this.rowManager.findRow(s);return _?this.rowManager.scrollToRow(_,u,f):(console.warn("Scroll Error - No matching row found:",s),Promise.reject("Scroll Error - No matching row found"))}moveRow(s,u,f){var _=this.rowManager.findRow(s);_?_.moveToRow(u,f):console.warn("Move Error - No matching row found:",s)}getRows(s){if(this.initialized)return this.rowManager.getComponents(s);console.warn("getRows failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}getRowPosition(s,u){var f=this.rowManager.findRow(s);return f?this.rowManager.getRowPosition(f,u):(console.warn("Position Error - No matching row found:",s),!1)}setColumns(s){this.initialized?this.columnManager.setColumns(s):console.warn("setColumns failed - table not yet initialized. To set initial data please use the 'columns' property in the table constructor.")}getColumns(s){return this.columnManager.getComponents(s)}getColumn(s){var u=this.columnManager.findColumn(s);return u?u.getComponent():(console.warn("Find Error - No matching column found:",s),!1)}getColumnDefinitions(){return this.columnManager.getDefinitionTree()}showColumn(s){var u=this.columnManager.findColumn(s);if(!u)return console.warn("Column Show Error - No matching column found:",s),!1;u.show()}hideColumn(s){var u=this.columnManager.findColumn(s);if(!u)return console.warn("Column Hide Error - No matching column found:",s),!1;u.hide()}toggleColumn(s){var u=this.columnManager.findColumn(s);if(!u)return console.warn("Column Visibility Toggle Error - No matching column found:",s),!1;u.visible?u.hide():u.show()}addColumn(s,u,f){var _=this.columnManager.findColumn(f);return this.columnManager.addColumn(s,u,_).then(C=>C.getComponent())}deleteColumn(s){var u=this.columnManager.findColumn(s);return u?u.delete():(console.warn("Column Delete Error - No matching column found:",s),Promise.reject())}updateColumnDefinition(s,u){var f=this.columnManager.findColumn(s);return f?f.updateDefinition(u):(console.warn("Column Update Error - No matching column found:",s),Promise.reject())}moveColumn(s,u,f){var _=this.columnManager.findColumn(s),C=this.columnManager.findColumn(u);_?C?this.columnManager.moveColumn(_,C,f):console.warn("Move Error - No matching column found:",C):console.warn("Move Error - No matching column found:",s)}scrollToColumn(s,u,f){return new Promise((_,C)=>{var D=this.columnManager.findColumn(s);return D?this.columnManager.scrollToColumn(D,u,f):(console.warn("Scroll Error - No matching column found:",s),Promise.reject("Scroll Error - No matching column found"))})}redraw(s){this.initialized?(this.columnManager.redraw(s),this.rowManager.redraw(s)):console.warn("redraw failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}setHeight(s){this.options.height=isNaN(s)?s:s+"px",this.element.style.height=this.options.height,this.rowManager.initializeRenderer(),this.rowManager.redraw()}on(s,u){this.externalEvents.subscribe(s,u)}off(s,u){this.externalEvents.unsubscribe(s,u)}dispatchEvent(){Array.from(arguments).shift(),this.externalEvents.dispatch(...arguments)}modExists(s,u){return!!this.modules[s]||(u&&console.error("Tabulator Module Not Installed: "+s),!1)}module(s){var u=this.modules[s];return u||console.error("Tabulator module not installed: "+s),u}}return m.defaultOptions=qu,m})();new Oh(Wl),new Oh(class extends Wl{},Nf);let Fg=(()=>{class m{constructor(){this.a=null,this.b=null,this.dataObject=[],this.objectsForGrid=[],this.stringsForGrid=[],this.hotInstance=null}get hot(){if(null!=this.hotInstance)return this.hotInstance;throw new Error("hot is null")}initGrid(s){Wl.registerModule([Wd,Cl,ed,Kd]),this.hotInstance=new Wl(s,{columns:[{title:"Step",field:"id"}],layout:"fitColumns",clipboard:"copy",footerElement:"<div>\n        \x3c!-- <a href=\"javascript:{var event = new Event('TabCopy'); window.dispatchEvent(event);}\">Copy Clipboard</a>\n        &nbsp;&nbsp;&nbsp;&nbsp;\n        <a href=\"javascript:{var event = new Event('TabDownload'); window.dispatchEvent(event);}\">CSV</a>\n        --\x3e\n        \n    </div>",placeholder:"please press execute button",tooltips:function(u){return u.getColumn().getField()+" - "+u.getValue()}}),this.hot.replaceData([]),this.hot.redraw(!0)}AddStringToGrid(s){if(s.startsWith("{")&&s.endsWith("}"))try{var u=JSON.parse(s);return void this.objectsForGrid.push(u)}catch(C){}if(s.startsWith("[")&&s.endsWith("]"))try{for(var f=JSON.parse(s),_=0;_<f.length;_++)this.objectsForGrid.push(f[_]);return}catch(C){}this.stringsForGrid.push(s)}AddDataToGrid(s){return"string"==typeof s?(this.AddStringToGrid(null==s?void 0:s.toString()),void this.dataObject.push([null==s?void 0:s.toString()])):"object"==typeof s?(console.log("adding object to grid"),this.AddStringToGrid(JSON.stringify(s)),void this.dataObject.push([s])):(this.dataObject.push([s.ToString()]),void this.AddStringToGrid(s.toString()))}ClearDataGrid(){this.dataObject=[],this.objectsForGrid=[],this.stringsForGrid=[],null!=this.hot&&(this.hot.setColumns([{title:"Step",field:"id"},{title:"Value",field:"val"}]),this.hot.replaceData([]),this.hot.redraw(!0))}hasOwnProperty(s,u){return null!=s&&s.hasOwnProperty(u)}AddObjectToFinishGrid(){for(var s=[],u=this.objectsForGrid,f=0;f<u.length;f++)"string"==typeof(_=u[f])?s.push("_"):s.push(...Object.keys(_));var C=new Set(s);s=Array.from(C);var D=[...s],A=[];for(f=0;f<u.length;f++){for(var _=u[f],F={Nr:f+1},K=0;K<s.length;K++){var ut=s[K],It=this.goodNameForKey(ut);if(_&&this.hasOwnProperty(_,ut)){var Vt=_[ut];F[It]="object"==typeof Vt?JSON.stringify(Vt):Vt}else F[It]="string"==typeof _&&0===K?_:""}A.push(F)}s.splice(0,0,"Nr"),D.splice(0,0,"Nr");var ee=this.Headers(D);this.hot.setColumns(ee),this.hot.replaceData(A)}Headers(s){return s.map(u=>({title:u,field:this.goodNameForKey(u),formatter:function(f,_,C){try{var D=f.getValue().toString();if(D.length<2)return D;if(D.startsWith("[")&&D.endsWith("]"))try{var A=JSON.parse(D),F=f.getRow().getData().Nr,ut=f.getColumn().getField()+"_"+F;return C(function(){new Wl("#"+ut,{data:A,autoColumns:!0,layout:"fitDataFill"})}),"<div id='"+ut+"'>"+D+"</div>"}catch(It){return D}}catch(It){return D}return f.getValue()}}))}AddStringToFinishGrid(){for(var s=[],u=0;u<this.stringsForGrid.length;u++)s.push({Nr:u+1,Text:this.stringsForGrid[u]});var _=this.Headers(["Nr","Text"]);this.hot.setColumns(_),this.hot.replaceData(s)}FinishGrid(){this.objectsForGrid.length+this.stringsForGrid.length!=0&&(this.objectsForGrid.length>0?this.AddObjectToFinishGrid():this.AddStringToFinishGrid(),this.hot.redraw(!0))}goodNameForKey(s){var u=s;return u.replace(".","_")}copyClip(){this.hot.copyToClipboard()}copyCSV(){this.hot.download("csv","data.csv",{bom:!0})}}return m.\u0275fac=function(s){return new(s||m)},m.\u0275prov=Xt.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})();var Xa=v(970),th=v(93124),ep=v(60805),Bg=v(45725),Hg=v(45491),dd=v(16274),pd=v(74026),Fp=v(67617),Hf=v(31749),kh=v(28369),Lh=v(8220),Bp=v(65434),Nh=v(30142),fd=v(93324);function Hp(m,d){1&m&&Xt._UZ(0,"mat-spinner")}function gd(m,d){if(1&m){const s=Xt.EpF();Xt.TgZ(0,"button",19),Xt.NdJ("click",function(){const _=Xt.CHM(s).$implicit;return Xt.oxw(2).ShowDemo(_.id)}),Xt._uU(1),Xt.qZA()}if(2&m){const s=d.$implicit,u=d.index;Xt.xp6(1),Xt.AsE(" ",u+1," ",s.description," ")}}function ip(m,d){if(1&m&&(Xt.TgZ(0,"button",10),Xt._uU(1),Xt.qZA(),Xt.TgZ(2,"mat-menu",null,18),Xt.YNc(4,gd,2,2,"ng-template",12),Xt.qZA()),2&m){const s=d.$implicit,u=d.index,f=Xt.MAs(3);Xt.Q6J("matMenuTriggerFor",f),Xt.xp6(1),Xt.lnq(" ",u+1," ",s.key," (",s.value.length,") "),Xt.xp6(3),Xt.Q6J("ngForOf",s.value)}}function np(m,d){if(1&m){const s=Xt.EpF();Xt.TgZ(0,"button",19),Xt.NdJ("click",function(){const _=Xt.CHM(s).$implicit;return Xt.oxw(2).ShowDemo(_.id)}),Xt._uU(1),Xt.qZA()}if(2&m){const s=d.$implicit,u=d.index;Xt.xp6(1),Xt.AsE(" ",u+1," ",s.description," ")}}function Vf(m,d){if(1&m&&(Xt.TgZ(0,"button",10),Xt._uU(1),Xt.qZA(),Xt.TgZ(2,"mat-menu",null,20),Xt.YNc(4,np,2,2,"ng-template",12),Xt.qZA()),2&m){const s=d.$implicit,u=d.index,f=Xt.MAs(3);Xt.Q6J("matMenuTriggerFor",f),Xt.xp6(1),Xt.lnq(" ",u+1," ",s.key.toLowerCase()," (",s.value.length,") "),Xt.xp6(3),Xt.Q6J("ngForOf",s.value)}}const Uf=function(m){return["/","automation","loadexample",m]};function op(m,d){if(1&m&&(Xt.TgZ(0,"a",21),Xt._uU(1),Xt.qZA()),2&m){const s=Xt.oxw();Xt.Q6J("routerLink",Xt.VKq(2,Uf,s.mustLoadDemoBlock)),Xt.xp6(1),Xt.hij("Direct link ",s.mustLoadDemoBlock,"")}}function Vg(m,d){1&m&&(Xt.TgZ(0,"span"),Xt._uU(1,"Loading"),Xt.qZA())}function Gf(m,d){if(1&m){const s=Xt.EpF();Xt.TgZ(0,"ngx-monaco-editor",23),Xt.NdJ("ngModelChange",function(f){return Xt.CHM(s),Xt.oxw(2).showInner=f}),Xt.qZA()}if(2&m){const s=Xt.oxw(2);Xt.Q6J("options",s.editorPlain)("ngModel",s.showInner)}}function Vp(m,d){if(1&m){const s=Xt.EpF();Xt.TgZ(0,"ngx-monaco-editor",23),Xt.NdJ("ngModelChange",function(f){return Xt.CHM(s),Xt.oxw(2).showJSCode=f}),Xt.qZA()}if(2&m){const s=Xt.oxw(2);Xt.Q6J("options",s.editorXMLOptions)("ngModel",s.showJSCode)}}function Up(m,d){if(1&m){const s=Xt.EpF();Xt.TgZ(0,"ngx-monaco-editor",23),Xt.NdJ("ngModelChange",function(f){return Xt.CHM(s),Xt.oxw(2).showXMLCode=f}),Xt.qZA()}if(2&m){const s=Xt.oxw(2);Xt.Q6J("options",s.editorJSOptions)("ngModel",s.showXMLCode)}}function Gp(m,d){if(1&m){const s=Xt.EpF();Xt.TgZ(0,"ngx-monaco-editor",23),Xt.NdJ("ngModelChange",function(f){return Xt.CHM(s),Xt.oxw(2).showBlocksDefinition=f}),Xt.qZA()}if(2&m){const s=Xt.oxw(2);Xt.Q6J("options",s.editorJSOptions)("ngModel",s.showBlocksDefinition)}}function Wf(m,d){if(1&m&&(Xt.TgZ(0,"mat-grid-tile"),Xt.YNc(1,Gf,1,2,"ngx-monaco-editor",22),Xt.YNc(2,Vp,1,2,"ngx-monaco-editor",22),Xt.YNc(3,Up,1,2,"ngx-monaco-editor",22),Xt.YNc(4,Gp,1,2,"ngx-monaco-editor",22),Xt.qZA()),2&m){const s=Xt.oxw();Xt.xp6(1),Xt.Q6J("ngIf",s.ShowOutput()),Xt.xp6(1),Xt.Q6J("ngIf",s.ShowCode()),Xt.xp6(1),Xt.Q6J("ngIf",s.ShowXML()),Xt.xp6(1),Xt.Q6J("ngIf",s.ShowBlocksDefinition())}}var La=(()=>{return(m=La||(La={}))[m.ShowNone=0]="ShowNone",m[m.ShowBlocksDefinition=1]="ShowBlocksDefinition",m[m.ShowXML=2]="ShowXML",m[m.ShowOutput=3]="ShowOutput",m[m.ShowCode=4]="ShowCode",m[m.Stop=100]="Stop",La;var m})();let gc=(()=>{class m{constructor(s,u,f,_,C,D){this.tabulator=s,this.DetailsApp=u,this.loadDemo=f,this.ar=_,this.ta=C,this.snackBar=D,this.editorXMLOptions={theme:"vs-dark",language:"xml"},this.editorJSOptions={theme:"vs-dark",language:"javascript",lineNumbers:"on"},this.editorPlain={theme:"vs-dark",language:"plaintext",lineNumbers:"on"},this.code='function x() {\nconsole.log("Hello world!");\n}',this.showCodeAndXML=La.ShowNone,this.swaggerLoaded=0,this.demoWorkspace=null,this.demos=[],this.demosCategories=new Map,this.demosBlocks=new Map,this.mustLoadDemoBlock="",this.intro=x(),this.myId=0,this.fullTextData="",this.fullHtmlData="",this.myChart=null,this.step=0,this.swaggerData=[],this.showInner="",this.showXMLCode="",this.showJSCode="",this.showBlocksDefinition="",this.toolboxXML="",this.loadedCompletely=!1,this.myId=++m.id,this.ar.paramMap.subscribe(A=>{this.mustLoadDemoBlock=A.get("demoblock")}),this.InitiateDemos(),this.ta.receiveData().subscribe(A=>{"DisplayBlocklyComponent"==A[0]&&this[A[1]]()})}InitiateDemos(){var s=this.DetailsApp.demoBlocks;this.demos=s.sort((_,C)=>_.description.localeCompare(C.description));var u=s.map(_=>_.categories).filter(_=>(null==_?void 0:_.length)>0).flatMap(_=>_.split(";")).filter(_=>(null==_?void 0:_.length)>0);this.demosCategories.set("All",this.demos),u.forEach(_=>{this.demosCategories.set(_,s.filter(C=>{var D;return(null===(D=C.categories)||void 0===D?void 0:D.length)>0}).filter(C=>(";"+C.categories+";").indexOf(";"+_+";")>-1))}),s.map(_=>_.blocks).filter(_=>(null==_?void 0:_.length)>0).flatMap(_=>_.split(";")).filter(_=>(null==_?void 0:_.length)>0).sort((_,C)=>_.toLowerCase().localeCompare(C.toLowerCase())).forEach(_=>{this.demosBlocks.set(_.toLowerCase(),s.filter(C=>{var D;return(null===(D=C.blocks)||void 0===D?void 0:D.length)>0}).filter(C=>(";"+C.blocks+";").indexOf(";"+_+";")>-1))})}createIntro(){var s,u=null===(s=this.DetailsApp.settings)||void 0===s?void 0:s.tourSteps.map(f=>{var _;return{title:(null===(_=this.DetailsApp.settings)||void 0===_?void 0:_.title)||"Blockly Automation",intro:f.text,element:document.querySelector(f.query)||void 0}});this.intro.setOptions({exitOnEsc:!0,showStepNumbers:!0,showButtons:!0,doneLabel:"Exit",skipLabel:"Skip",showProgress:!0,steps:u}).start()}clearOutput(){this.step=0,this.showInner="",this.tabulator.ClearDataGrid(),null!=this.myChart&&this.myChart.destroy();var s=this.theHtmlOutput();s.innerHTML="",this.fullHtmlData="",(s=this.theTextOutput()).innerText="",this.fullTextData=""}ShowText(s){if(null!=s){var u=s.toString();this.fullTextData+=u,this.theTextOutput().innerText=this.fullTextData}}finishHTMLOutput(){this.theHtmlOutput().innerHTML=this.fullHtmlData}ShowHTML(s){if(null!=s){var u=s.toString();this.fullHtmlData+=u,this.theHtmlOutput().innerHTML+=u}}theHtmlOutput(){return document.getElementById("htmlOutput"+this.myId)}theTextOutput(){return document.getElementById("htmlText"+this.myId)}ShowChart(s){var u,f=null===(u=document.getElementById("barchart"+this.myId))||void 0===u?void 0:u.getContext("2d");if(null!=f)try{var _=null==s?void 0:s.toString(),C=JSON.parse(_);C&&C.type&&(this.myChart=new li(f,C),console.log("make chart",s))}catch(D){this.myChart=null}else console.log("not canvas available for chart!")}RunCode(){this.snackBar.open("Program start","Executing...");var s=this,u=this.run.latestCode,f=this.showJSCode;s.CalculateXMLAndCode(),this.run=b.interpreterHelper.createInterpreter(this.demoWorkspace,e),this.clearOutput(),this.showCodeAndXML=La.ShowOutput,this.showInner='{ "step_start": "start program",',u!=f&&(window.confirm("Do you want to run the code modified by you ?")&&(u=f),this.showJSCode=f),this.run.runCode((C,D)=>{try{return new Interpreter(C,D)}catch(A){s.CalculateXMLAndCode(),window.alert("please copy the left output and report there is an error at "+JSON.stringify(A)),this.showCodeAndXML=La.ShowCode}},C=>{s.step++,s.showInner+=`\n           \n"step_${s.step}" : "${C}",`,s.tabulator.AddDataToGrid(C),s.ShowChart(C),s.ShowHTML(C),s.ShowText(C)},()=>{this.snackBar.open("Program end","Done!",{duration:3e3}),s.showInner+='\n "step_end" : "program executed; see results below"\n}',this.tabulator.FinishGrid(),this.finishHTMLOutput()},u)}ShowDemo(s){this.mustLoadDemoBlock=s,this.loadDemo.getDemoBlock(s).subscribe(u=>{var f=a.Xml.textToDom(u);null!=this.demoWorkspace&&(a.Xml.clearWorkspaceAndLoadFromXml(f,this.demoWorkspace),window.alert("please press run code button"))})}registerSwaggerBlocksObjects(s,u){return u.fieldXMLObjects.map(_=>a.Xml.textToDom(_))}registerSwaggerBlocksAPIControllers(s,u,f){return u.findfieldXMLFunctions(f).map(C=>a.Xml.textToDom(C.gui))}registerSwaggerBlocksAPIAll(s,u){return u.fieldXMLFunctions.map(_=>a.Xml.textToDom(_.gui))}ngOnInit(){}ngAfterViewInit(){this.StartRegister(),(0,Ci.R)(window,"TabDownload").subscribe(s=>this.tabulator.copyCSV()),(0,Ci.R)(window,"TabCopy").subscribe(s=>this.tabulator.copyClip())}LoadSwagger(){var s=window.prompt("Swagger url? ","https://swagger-tax-calc-api.herokuapp.com/api-docs");if(s){if(s.endsWith(".html")||s.endsWith(".htm"))return void window.alert("Swagger should end with .json - see source of html page");this.LoadSwaggerFromUrl(s).then(u=>{this.addToToolboxSwagger(u,this),window.alert("done")})}}LoadSwaggerFromUrl(s,u){var f=this;return(0,T.Z)(function*(){var _=new I.parseData(s),C=yield _.ParseSwagger();return C.name=u||s,f.LoadSwaggerFromAPI(C)})()}LoadSwaggerFromAPI(s){this.swaggerData.push(s);for(var u=0;u<s.GenerateBlocks.length;u++)(0,s.GenerateBlocks[u])(a.Blocks,e);for(u=0;u<s.GenerateFunctions.length;u++)(0,s.GenerateFunctions[u])(a.Blocks,e);return s.metaBlocks()(a.Blocks,e),s}StartRegister(){var s=this;return(0,T.Z)(function*(){var u=s.DetailsApp.swaggersDict,f=new Map;u.forEach((F,K)=>{f.set(K,s.LoadSwaggerFromAPI(F))});var _=[...Array(50).keys()].map(F=>s.CategorySwaggerHidden(F)).join("");const C=document.getElementById("steps"+s.myId);if(null!=C){s.tabulator.initGrid(C),p.filterBlocks.definitionBlocks(a.Blocks,e),p.waitBlocks.definitionBlocks(a.defineBlocksWithJsonArray,e),p.xhrBlocks.definitionBlocks(a.Blocks,e),p.propBlocks.definitionBlocks(a.Blocks,e),p.guiBlocks.definitionBlocks(a.Blocks,e),p.convertersBlocks.definitionBlocks(a.Blocks,e),p.exportFileBlock.definitionBlocks(a.Blocks,e),p.createObjectBlocks.definitionBlocks(a.Blocks,e,a.Extensions,a.Mutator),p.currentDateBlock.definitionBlocks(a.Blocks,e),p.dateFromTextBlock.definitionBlocks(a.Blocks,e),p.waitBlocks.definitionBlocks(a.Blocks,e),p.commentBlock.definitionBlocks(a.Blocks,e),p.trycatchFinBlock.definitionBlocks(a.Blocks,e),p.auth0Blocks.definitionBlocks(a.Blocks,e),p.windowsCreds.definitionBlocks(a.Blocks,e),p.chartBlock.definitionBlocks(a.Blocks,e),p.emailBlocks.definitionBlocks(a.Blocks,e),p.htmlblocks.definitionBlocks(a.Blocks,e),console.log("z",window.speechSynthesis.getVoices()),p.ttsBlock.definitionBlocks(a.Blocks,e),p.pianoBlock.definitionBlocks(a.Blocks,e);var D=s.DetailsApp.customCategories,A=[p.defaultBlocks.generalBlocks(),` \n        <category name='Blockly Advanced'>\n        <category id="Audio" name="Audio">\n        ${p.ttsBlock.fieldXML()}\n        ${p.pianoBlock.fieldXML()}\n        </category>  \n            ${p.filterBlocks.fieldXML()}\n                \n                ${p.auth0Blocks.fieldXML()}\n                <category id="catConverters"  name="Converters">\n                ${p.convertersBlocks.fieldXML()}\n              </category>    \n              <category id="catDates"  name="Dates">\n          ${p.currentDateBlock.fieldXML()}\n          ${p.dateFromTextBlock.fieldXML()}\n          ${p.waitBlocks.fieldXML()}\n        </category>\n        <category id="catEmail"  name="Email">\n        ${p.emailBlocks.fieldXML()}\n      </category>\n\n        <category id="catExporter"  name="Exporter">\n        ${p.exportFileBlock.fieldXML()}\n      </category>\n              <category id="catGUI" name="GUI">\n              ${p.guiBlocks.fieldXML()}\n              ${p.chartBlock.fieldXML()}\n              </category>\n              <category id="catHTML" name="HTML">\n              ${p.htmlblocks.fieldXML()}\n              </category>\n              <category name="Objects" id="objects">\n              ${p.propBlocks.fieldXML()}\n              ${p.createObjectBlocks.fieldXML()}\n              </category>\n              <category id="XHR" name="Request">\n            ${p.xhrBlocks.fieldXML()}\n            ${p.windowsCreds.fieldXML()}\n            </category>\n        `,`<category id="catTimers"  name="Timers">\n          ${p.waitBlocks.fieldXML()}\n        </category>`,`  <category id="programming" name="Programming">\n        ${p.trycatchFinBlock.fieldXML()}\n        ${p.commentBlock.fieldXML()}\n          </category>\n        \n      `,`</category>\n      ${D}\n      <category name="Swagger" id="catSwagger" expanded='true' >          \n          ${_}\n        </category> \n        \n        `];s.initialize(A)}else window.alert("gridElement is null")})()}SaveBlocks(){b.saveBlocksUrl.saveState(a.Xml,this.demoWorkspace,this.myId)}ShowBlocksDefinition(){return this.showCodeAndXML===La.ShowBlocksDefinition}ShowSelection(){return La[this.showCodeAndXML]}ShowSomething(){return this.showCodeAndXML!==La.ShowNone}ShowOutput(){return this.showCodeAndXML===La.ShowOutput}ShowCode(){return this.showCodeAndXML===La.ShowCode}ShowXML(){return this.showCodeAndXML===La.ShowXML}CalculateXMLAndCode(){var s=a.Xml.workspaceToDom(this.demoWorkspace,!0),u=a.Xml.domToPrettyText(s);this.showJSCode=this.run.latestCode,this.showXMLCode=u;var f=this.parseTextForBlocks(u);this.showBlocksDefinition=f.map(_=>{try{return`Blockly.Blocks['${_}']={ init: \n`+a.Blocks[_].init.toString()+`};\n};\nBlockly.JavaScript['${_}']=`+e[_].toString()+";"}catch(A){return console.error("parse definition : "+_,A),"//Error for "+_}}).join("\n")}parseTextForBlocks(s){var u=[];if(s.indexOf('<block type="')>=0)for(var f=s.split('<block type="'),_=1;_<f.length;_++){var C=f[_].split('"')[0];u.push(C)}return u}ShowInnerWorkings(){null!=this.demoWorkspace?(this.showCodeAndXML++,this.ShowSelection()||(this.showCodeAndXML=La.ShowNone,setTimeout(u=>{a.svgResize(u)},1e3,this.demoWorkspace)),this.CalculateXMLAndCode()):window.alert("demoWorkspace is null")}Download(){var s=window.prompt("Name?","blocks.txt");null!=s&&b.saveLoad.DownloadBlocks(a.Xml,this.demoWorkspace,s)}changeListener(s){this.readThis(s.target)}readThis(s){var u=s.files[0],f=new FileReader,_=this;f.onloadend=function(C){b.saveLoad.LoadFile(a.Xml,_.demoWorkspace,f.result),_.run.resetInterpreter()},f.readAsText(u)}CategorySwaggerHidden(s){return`<category name='swagger_hidden_${s}' hidden='true' >${s}</category>`}initialize(s){var u,f,_;const C=document.getElementById("blocklyDiv"+this.myId);if(null!=C){var D=s.map(It=>`<sep></sep>${It}`);this.toolboxXML=`<xml xmlns="https://developers.google.com/blockly/xml" id="toolbox-simple" style="display: none">\n    ${D}\n    </xml>`,this.demoWorkspace=a.inject(C,{readOnly:!1,media:"media/",trashcan:!0,horizontalLayout:!1,move:{scrollbars:!0,drag:!0,wheel:!0},zoom:{controls:!0,wheel:!0,startScale:1,maxScale:3,minScale:.3,scaleSpeed:1.2,pinch:!0},toolbox:this.toolboxXML}),new r(this.demoWorkspace).init();var F=this;if(((null===(f=null===(u=this.DetailsApp.settings)||void 0===u?void 0:u.startBlocks)||void 0===f?void 0:f.length)||0)>0)try{var K=((null===(_=this.DetailsApp.settings)||void 0===_?void 0:_.startBlocks)||[]).join("\n"),ut=a.Xml.textToDom(K);a.Xml.clearWorkspaceAndLoadFromXml(ut,this.demoWorkspace)}catch(It){console.error("error when load default blocks",It)}window.setTimeout(F.afterTimeout,2e3,this),this.run=b.interpreterHelper.createInterpreter(this.demoWorkspace,e),F=this,this.demoWorkspace.addChangeListener(function(It){It.isUiEvent||(F.run.resetInterpreter(),F.run.generateCodeAndLoadIntoInterpreter(),F.CalculateXMLAndCode())})}else window.alert("blocklyDiv is null")}restoreBlocks(){b.saveBlocksUrl.restoreState(a.Xml,this.demoWorkspace,this.myId)}addToToolboxSwagger(s,u){var f,_=s.findCategSwaggerFromPaths().sort().map(Vt=>`<category name='${Vt}' custom='func_${s.name}_${Vt}'></category>`).join("\n"),C=(null==u?void 0:u.CategorySwaggerHidden(null==u?void 0:u.swaggerLoaded))||"",D=u.toolboxXML,A=`<category name='${s.name}'>\n<category name='API' id='func_${s.name}'>\n${_}\n</category>\n${s.categSwagger()}\n\n<category name='meta' id='meta_${s.name}'>\n<block type='meta_swagger_controllers_${s.name}'></block>\n<block type='meta_swagger_controllers_actions_${s.name}'></block>\n</category>\n\n</category>\n`;if(D=D.replace(C,A),u.swaggerLoaded++,u.toolboxXML=D,null===(f=null==u?void 0:u.demoWorkspace)||void 0===f||f.updateToolbox(D),null!=(null==u?void 0:u.demoWorkspace)){var K="objects_"+s.nameCategSwagger(),ut="AllApi_"+s.nameCategSwagger(),It=s;u.demoWorkspace.registerToolboxCategoryCallback(K,Vt=>u.registerSwaggerBlocksObjects(Vt,It)),u.demoWorkspace.registerToolboxCategoryCallback(ut,Vt=>u.registerSwaggerBlocksAPIAll(Vt,It)),s.findCategSwaggerFromPaths().forEach(Vt=>{var ee;null===(ee=null==u?void 0:u.demoWorkspace)||void 0===ee||ee.registerToolboxCategoryCallback(`func_${s.name}_${Vt}`,he=>u.registerSwaggerBlocksAPIControllers(he,s,Vt))})}}afterTimeout(s){var u,f,_;if(s.loadedCompletely=!0,null!=(null==s?void 0:s.swaggerData))if(s.toolboxXML=s.toolboxXML.replace("Swagger",`Swagger(${s.swaggerData.length})`),s.swaggerData.forEach(F=>{s.addToToolboxSwagger(F,s)}),null!=(null==s?void 0:s.mustLoadDemoBlock))s.ShowDemo(null==s?void 0:s.mustLoadDemoBlock);else{if(((null===(f=null===(u=s.DetailsApp.settings)||void 0===u?void 0:u.startBlocks)||void 0===f?void 0:f.length)||0)>0)try{var D=((null===(_=s.DetailsApp.settings)||void 0===_?void 0:_.startBlocks)||[]).join("\n");if((null==D?void 0:D.length)>62){var A=a.Xml.textToDom(D);a.Xml.clearWorkspaceAndLoadFromXml(A,s.demoWorkspace)}}catch(F){console.log("error when load default blocks",F)}s.restoreBlocks()}}}return m.id=0,m.\u0275fac=function(s){return new(s||m)(Xt.Y36(Fg),Xt.Y36(Xa.d),Xt.Y36(th.F),Xt.Y36(ep.gz),Xt.Y36(Bg.v),Xt.Y36(Hg.ux))},m.\u0275cmp=Xt.Xpm({type:m,selectors:[["app-display-blockly"]],decls:84,vars:21,consts:[[4,"ngIf"],["rowHeight","1:1",3,"cols"],[2,"display","inline-block","height","100%","width","100%"],[2,"display","inline-block","height","5%","width","100%"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn","id","runButton",3,"click"],["id","downloadBlocks","mat-raised-button","","color","primary",3,"click"],["type","file",3,"change"],["mat-raised-button","","id","demos","color","accent",3,"matMenuTriggerFor"],["menuDiff","matMenu"],["mat-menu-item","",3,"matMenuTriggerFor"],["menuByName","matMenu"],["ngFor","",3,"ngForOf"],["menuByBlocks","matMenu"],["target","_blank","mat-raised-button","","color","primary",3,"routerLink",4,"ngIf"],[2,"display","inline-block","height","100%","width","100%",3,"id"],[3,"id"],["width","800","height","450",3,"id"],["menu","matMenu"],["mat-menu-item","",3,"click"],["menuBlock","matMenu"],["target","_blank","mat-raised-button","","color","primary",3,"routerLink"],["style","display: inline-block; height: 100%; width: 100%",3,"options","ngModel","ngModelChange",4,"ngIf"],[2,"display","inline-block","height","100%","width","100%",3,"options","ngModel","ngModelChange"]],template:function(s,u){if(1&s&&(Xt.YNc(0,Hp,1,0,"mat-spinner",0),Xt.TgZ(1,"mat-grid-list",1),Xt.TgZ(2,"mat-grid-tile-header"),Xt.TgZ(3,"div",2),Xt.TgZ(4,"div",3),Xt.TgZ(5,"button",4),Xt.NdJ("click",function(){return u.LoadSwagger()}),Xt.TgZ(6,"mat-icon"),Xt._uU(7,"file_upload"),Xt.qZA(),Xt._uU(8," Load Swagger/OpenAPI "),Xt.qZA(),Xt._uU(9," \xa0 "),Xt.TgZ(10,"button",4),Xt.NdJ("click",function(){return u.SaveBlocks()}),Xt.TgZ(11,"mat-icon"),Xt._uU(12,"save"),Xt.qZA(),Xt._uU(13," Persist in browser "),Xt.qZA(),Xt._uU(14," \xa0 "),Xt.TgZ(15,"button",5),Xt.NdJ("click",function(){return u.RunCode()}),Xt.TgZ(16,"mat-icon"),Xt._uU(17,"play_arrow"),Xt.qZA(),Xt._uU(18," Run Code "),Xt.qZA(),Xt._uU(19," \xa0 "),Xt.TgZ(20,"button",6),Xt.NdJ("click",function(){return u.Download()}),Xt.TgZ(21,"mat-icon"),Xt._uU(22,"download"),Xt.qZA(),Xt._uU(23," Download blocks "),Xt.qZA(),Xt._uU(24," \xa0 "),Xt.TgZ(25,"input",7),Xt.NdJ("change",function(_){return u.changeListener(_)}),Xt.qZA(),Xt.TgZ(26,"button",4),Xt.NdJ("click",function(){return u.ShowInnerWorkings()}),Xt.TgZ(27,"mat-icon"),Xt._uU(28,"code"),Xt.qZA(),Xt._uU(29),Xt.qZA(),Xt.TgZ(30,"button",8),Xt.TgZ(31,"mat-icon"),Xt._uU(32,"list"),Xt.qZA(),Xt._uU(33),Xt.qZA(),Xt.TgZ(34,"mat-menu",null,9),Xt.TgZ(36,"button",10),Xt._uU(37," By Name "),Xt.qZA(),Xt.TgZ(38,"mat-menu",null,11),Xt.YNc(40,ip,5,5,"ng-template",12),Xt.ALo(41,"keyvalue"),Xt.qZA(),Xt.TgZ(42,"button",10),Xt._uU(43," By Blocks "),Xt.qZA(),Xt.TgZ(44,"mat-menu",null,13),Xt.YNc(46,Vf,5,5,"ng-template",12),Xt.ALo(47,"keyvalue"),Xt.qZA(),Xt.qZA(),Xt.YNc(48,op,2,4,"a",14),Xt.YNc(49,Vg,2,0,"span",0),Xt.qZA(),Xt.qZA(),Xt.qZA(),Xt.TgZ(50,"mat-grid-tile"),Xt._UZ(51,"div",15),Xt.qZA(),Xt.YNc(52,Wf,5,4,"mat-grid-tile",0),Xt.qZA(),Xt.TgZ(53,"mat-accordion"),Xt.TgZ(54,"mat-expansion-panel"),Xt.TgZ(55,"mat-expansion-panel-header"),Xt.TgZ(56,"mat-panel-title"),Xt._uU(57," Output Grid "),Xt.qZA(),Xt.TgZ(58,"mat-panel-description"),Xt._uU(59," Click to see grid of output values "),Xt.qZA(),Xt.qZA(),Xt._uU(60," My Text "),Xt._UZ(61,"div",16),Xt.qZA(),Xt.TgZ(62,"mat-expansion-panel"),Xt.TgZ(63,"mat-expansion-panel-header"),Xt.TgZ(64,"mat-panel-title"),Xt._uU(65," Chart "),Xt.qZA(),Xt.TgZ(66,"mat-panel-description"),Xt._uU(67," Click to see chart of output values "),Xt.qZA(),Xt.qZA(),Xt.TgZ(68,"p"),Xt._UZ(69,"canvas",17),Xt.qZA(),Xt.qZA(),Xt.TgZ(70,"mat-expansion-panel"),Xt.TgZ(71,"mat-expansion-panel-header"),Xt.TgZ(72,"mat-panel-title"),Xt._uU(73," HTML "),Xt.qZA(),Xt.TgZ(74,"mat-panel-description"),Xt._uU(75," Click to see output as HTML "),Xt.qZA(),Xt.qZA(),Xt._UZ(76,"div",16),Xt.qZA(),Xt.TgZ(77,"mat-expansion-panel"),Xt.TgZ(78,"mat-expansion-panel-header"),Xt.TgZ(79,"mat-panel-title"),Xt._uU(80," Text "),Xt.qZA(),Xt.TgZ(81,"mat-panel-description"),Xt._uU(82," Click to see output as Text "),Xt.qZA(),Xt.qZA(),Xt._UZ(83,"div",16),Xt.qZA(),Xt.qZA()),2&s){const f=Xt.MAs(35),_=Xt.MAs(39),C=Xt.MAs(45);Xt.Q6J("ngIf",!u.loadedCompletely),Xt.xp6(1),Xt.Q6J("cols",u.ShowSomething()?2:1),Xt.xp6(28),Xt.hij(" ",u.ShowSelection()," "),Xt.xp6(1),Xt.Q6J("matMenuTriggerFor",f),Xt.xp6(3),Xt.hij(" Demos (",u.demos.length,") "),Xt.xp6(3),Xt.Q6J("matMenuTriggerFor",_),Xt.xp6(4),Xt.Q6J("ngForOf",Xt.lcZ(41,17,u.demosCategories)),Xt.xp6(2),Xt.Q6J("matMenuTriggerFor",C),Xt.xp6(4),Xt.Q6J("ngForOf",Xt.lcZ(47,19,u.demosBlocks)),Xt.xp6(2),Xt.Q6J("ngIf",null==u.mustLoadDemoBlock?null:u.mustLoadDemoBlock.length),Xt.xp6(1),Xt.Q6J("ngIf",null==u.demoWorkspace),Xt.xp6(2),Xt.Q6J("id","blocklyDiv"+u.myId),Xt.xp6(1),Xt.Q6J("ngIf",u.ShowSomething()),Xt.xp6(9),Xt.Q6J("id","steps"+u.myId),Xt.xp6(8),Xt.Q6J("id","barchart"+u.myId),Xt.xp6(7),Xt.Q6J("id","htmlOutput"+u.myId),Xt.xp6(7),Xt.Q6J("id","htmlText"+u.myId)}},directives:[dd.O5,pd.Il,pd.$H,pd.jo,Fp.lW,Hf.Hw,kh.p6,kh.VK,kh.OP,dd.sg,pd.DX,Lh.pp,Lh.ib,Lh.yz,Lh.yK,Lh.u4,Bp.$g,Fp.zs,ep.yS,Nh.PG,fd.JJ,fd.On],pipes:[dd.Nd],styles:[".tabulator[_ngcontent-%COMP%]{font-size:12px;border:none}.tabulator[_ngcontent-%COMP%]   .tabulator-header[_ngcontent-%COMP%]{font-weight:normal;border-bottom:1px solid;border-bottom-color:#0000001f;color:#0000008a}.tabulator[_ngcontent-%COMP%]   .tabulator-header[_ngcontent-%COMP%]   .tabulator-col[_ngcontent-%COMP%]{height:48px;background-color:#fff;border:none;padding:0 7px}.tabulator-row[_ngcontent-%COMP%]{border-bottom:1px solid;border-bottom-color:#0000001f;min-height:48px;vertical-align:middle}.tabulator-row[_ngcontent-%COMP%]   .tabulator-cell[_ngcontent-%COMP%]{padding:16px 7px;border-right:none;vertical-align:middle}.tabulator-row[_ngcontent-%COMP%]   .tabulator-cell[_ngcontent-%COMP%]:first-of-type, .tabulator[_ngcontent-%COMP%]   .tabulator-header[_ngcontent-%COMP%]   .tabulator-col[_ngcontent-%COMP%]:first-of-type{padding-left:24px}.tabulator-row.tabulator-row-even[_ngcontent-%COMP%]{background-color:#fff}"]}),m})()},93124:(B,U,v)=>{"use strict";v.d(U,{F:()=>o}),v(267);var a=v(88561),e=v(96286),t=v(42741),n=v(31887);let o=(()=>{class r{constructor(b){this.http=b}getDemoBlocks(){var b=(new Date).toISOString();return this.http.get(`assets/showUsage/demoBlocks/all.txt?${b}`,{responseType:"text"}).pipe((0,a.U)(I=>JSON.parse(I)))}getCustomCategories(){var b=(new Date).toISOString();return this.http.get(`assets/loadAtStartup/customCategories.txt?${b}`,{responseType:"text"}).pipe((0,a.U)(I=>I.toString()))}getSwaggerLinks(){var b=(new Date).toISOString();return this.http.get(`assets/loadAtStartup/swaggers.json?${b}`,{responseType:"text"}).pipe((0,a.U)(I=>JSON.parse(I)))}getDemoBlock(b){var I=(new Date).toISOString();return this.http.get(`assets/showUsage/demoBlocks/${b}.txt?${I}`,{responseType:"text"}).pipe((0,e.b)(k=>{}),(0,a.U)(k=>k.toString()))}}return r.\u0275fac=function(b){return new(b||r)(t.LFG(n.eN))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()},15773:(B,U,v)=>{"use strict";var T=v(93220),a=v(42741),e=v(93324),t=v(60805),n=v(61921),o=v(67617),r=v(31749),p=v(72882),b=v(34529),I=v(62718),x=v(16274),k=v(40688),Y=v(81728),X=v(6006),it=v(39734),rt=v(30636),ct=v(54958),wt=v(267),At=v(78862),Rt=v(88638),Dt=v(63543),pt=v(57689),st=v(27194),ot=v(99957),nt=v(66899),Tt=v(15911),Ct=v(12281),yt=v(54847);function gt(S,N){1&S&&a.Hsn(0)}const _t=["*"];function Jt(S,N){}const Pt=function(S){return{animationDuration:S}},oe=function(S,N){return{value:S,params:N}},Ne=["tabBodyWrapper"],Xe=["tabHeader"];function Ce(S,N){}function Ze(S,N){if(1&S&&a.YNc(0,Ce,0,0,"ng-template",9),2&S){const h=a.oxw().$implicit;a.Q6J("cdkPortalOutlet",h.templateLabel)}}function we(S,N){if(1&S&&a._uU(0),2&S){const h=a.oxw().$implicit;a.Oqu(h.textLabel)}}function ai(S,N){if(1&S){const h=a.EpF();a.TgZ(0,"div",6),a.NdJ("click",function(){const O=a.CHM(h),z=O.$implicit,Kt=O.index,Ae=a.oxw(),Qe=a.MAs(1);return Ae._handleClick(z,Qe,Kt)})("cdkFocusChange",function(O){const Kt=a.CHM(h).index;return a.oxw()._tabFocusChanged(O,Kt)}),a.TgZ(1,"div",7),a.YNc(2,Ze,1,1,"ng-template",8),a.YNc(3,we,1,1,"ng-template",8),a.qZA(),a.qZA()}if(2&S){const h=N.$implicit,y=N.index,O=a.oxw();a.ekj("mat-tab-label-active",O.selectedIndex==y),a.Q6J("id",O._getTabLabelId(y))("disabled",h.disabled)("matRippleDisabled",h.disabled||O.disableRipple),a.uIk("tabIndex",O._getTabIndex(h,y))("aria-posinset",y+1)("aria-setsize",O._tabs.length)("aria-controls",O._getTabContentId(y))("aria-selected",O.selectedIndex==y)("aria-label",h.ariaLabel||null)("aria-labelledby",!h.ariaLabel&&h.ariaLabelledby?h.ariaLabelledby:null),a.xp6(2),a.Q6J("ngIf",h.templateLabel),a.xp6(1),a.Q6J("ngIf",!h.templateLabel)}}function re(S,N){if(1&S){const h=a.EpF();a.TgZ(0,"mat-tab-body",10),a.NdJ("_onCentered",function(){return a.CHM(h),a.oxw()._removeTabBodyWrapperHeight()})("_onCentering",function(O){return a.CHM(h),a.oxw()._setTabBodyWrapperHeight(O)}),a.qZA()}if(2&S){const h=N.$implicit,y=N.index,O=a.oxw();a.ekj("mat-tab-body-active",O.selectedIndex===y),a.Q6J("id",O._getTabContentId(y))("content",h.content)("position",h.position)("origin",h.origin)("animationDuration",O.animationDuration),a.uIk("tabindex",null!=O.contentTabIndex&&O.selectedIndex===y?O.contentTabIndex:null)("aria-labelledby",O._getTabLabelId(y))}}const ce=["tabListContainer"],Pe=["tabList"],qe=["nextPaginator"],oi=["previousPaginator"],Ji=new a.OlP("MatInkBarPositioner",{providedIn:"root",factory:function(){return N=>({left:N?(N.offsetLeft||0)+"px":"0",width:N?(N.offsetWidth||0)+"px":"0"})}});let ui=(()=>{class S{constructor(h,y,O,z){this._elementRef=h,this._ngZone=y,this._inkBarPositioner=O,this._animationMode=z}alignToElement(h){this.show(),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._setStyles(h))}):this._setStyles(h)}show(){this._elementRef.nativeElement.style.visibility="visible"}hide(){this._elementRef.nativeElement.style.visibility="hidden"}_setStyles(h){const y=this._inkBarPositioner(h),O=this._elementRef.nativeElement;O.style.left=y.left,O.style.width=y.width}}return S.\u0275fac=function(h){return new(h||S)(a.Y36(a.SBq),a.Y36(a.R0b),a.Y36(Ji),a.Y36(Y.Qb,8))},S.\u0275dir=a.lG2({type:S,selectors:[["mat-ink-bar"]],hostAttrs:[1,"mat-ink-bar"],hostVars:2,hostBindings:function(h,y){2&h&&a.ekj("_mat-animation-noopable","NoopAnimations"===y._animationMode)}}),S})();const Oe=new a.OlP("MatTabContent"),Ft=new a.OlP("MatTabLabel"),ie=new a.OlP("MAT_TAB");let hi=(()=>{class S extends I.ig{constructor(h,y,O){super(h,y),this._closestTab=O}}return S.\u0275fac=function(h){return new(h||S)(a.Y36(a.Rgc),a.Y36(a.s_b),a.Y36(ie,8))},S.\u0275dir=a.lG2({type:S,selectors:[["","mat-tab-label",""],["","matTabLabel",""]],features:[a._Bn([{provide:Ft,useExisting:S}]),a.qOj]}),S})();const fe=(0,k.Id)(class{}),di=new a.OlP("MAT_TAB_GROUP");let ge=(()=>{class S extends fe{constructor(h,y){super(),this._viewContainerRef=h,this._closestTabGroup=y,this.textLabel="",this._contentPortal=null,this._stateChanges=new X.xQ,this.position=null,this.origin=null,this.isActive=!1}get templateLabel(){return this._templateLabel}set templateLabel(h){this._setTemplateLabelInput(h)}get content(){return this._contentPortal}ngOnChanges(h){(h.hasOwnProperty("textLabel")||h.hasOwnProperty("disabled"))&&this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}ngOnInit(){this._contentPortal=new I.UE(this._explicitContent||this._implicitContent,this._viewContainerRef)}_setTemplateLabelInput(h){h&&h._closestTab===this&&(this._templateLabel=h)}}return S.\u0275fac=function(h){return new(h||S)(a.Y36(a.s_b),a.Y36(di,8))},S.\u0275cmp=a.Xpm({type:S,selectors:[["mat-tab"]],contentQueries:function(h,y,O){if(1&h&&(a.Suo(O,Ft,5),a.Suo(O,Oe,7,a.Rgc)),2&h){let z;a.iGM(z=a.CRH())&&(y.templateLabel=z.first),a.iGM(z=a.CRH())&&(y._explicitContent=z.first)}},viewQuery:function(h,y){if(1&h&&a.Gf(a.Rgc,7),2&h){let O;a.iGM(O=a.CRH())&&(y._implicitContent=O.first)}},inputs:{disabled:"disabled",textLabel:["label","textLabel"],ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"]},exportAs:["matTab"],features:[a._Bn([{provide:ie,useExisting:S}]),a.qOj,a.TTD],ngContentSelectors:_t,decls:1,vars:0,template:function(h,y){1&h&&(a.F$t(),a.YNc(0,gt,1,0,"ng-template"))},encapsulation:2}),S})();const Ve={translateTab:(0,Rt.X$)("translateTab",[(0,Rt.SB)("center, void, left-origin-center, right-origin-center",(0,Rt.oB)({transform:"none"})),(0,Rt.SB)("left",(0,Rt.oB)({transform:"translate3d(-100%, 0, 0)",minHeight:"1px"})),(0,Rt.SB)("right",(0,Rt.oB)({transform:"translate3d(100%, 0, 0)",minHeight:"1px"})),(0,Rt.eR)("* => left, * => right, left => center, right => center",(0,Rt.jt)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")),(0,Rt.eR)("void => left-origin-center",[(0,Rt.oB)({transform:"translate3d(-100%, 0, 0)"}),(0,Rt.jt)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")]),(0,Rt.eR)("void => right-origin-center",[(0,Rt.oB)({transform:"translate3d(100%, 0, 0)"}),(0,Rt.jt)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")])])};let Zt=(()=>{class S extends I.Pl{constructor(h,y,O,z){super(h,y,z),this._host=O,this._centeringSub=it.w.EMPTY,this._leavingSub=it.w.EMPTY}ngOnInit(){super.ngOnInit(),this._centeringSub=this._host._beforeCentering.pipe((0,Dt.O)(this._host._isCenterPosition(this._host._position))).subscribe(h=>{h&&!this.hasAttached()&&this.attach(this._host._content)}),this._leavingSub=this._host._afterLeavingCenter.subscribe(()=>{this.detach()})}ngOnDestroy(){super.ngOnDestroy(),this._centeringSub.unsubscribe(),this._leavingSub.unsubscribe()}}return S.\u0275fac=function(h){return new(h||S)(a.Y36(a._Vd),a.Y36(a.s_b),a.Y36((0,a.Gpc)(()=>at)),a.Y36(x.K0))},S.\u0275dir=a.lG2({type:S,selectors:[["","matTabBodyHost",""]],features:[a.qOj]}),S})(),$=(()=>{class S{constructor(h,y,O){this._elementRef=h,this._dir=y,this._dirChangeSubscription=it.w.EMPTY,this._translateTabComplete=new X.xQ,this._onCentering=new a.vpe,this._beforeCentering=new a.vpe,this._afterLeavingCenter=new a.vpe,this._onCentered=new a.vpe(!0),this.animationDuration="500ms",y&&(this._dirChangeSubscription=y.change.subscribe(z=>{this._computePositionAnimationState(z),O.markForCheck()})),this._translateTabComplete.pipe((0,pt.x)((z,Kt)=>z.fromState===Kt.fromState&&z.toState===Kt.toState)).subscribe(z=>{this._isCenterPosition(z.toState)&&this._isCenterPosition(this._position)&&this._onCentered.emit(),this._isCenterPosition(z.fromState)&&!this._isCenterPosition(this._position)&&this._afterLeavingCenter.emit()})}set position(h){this._positionIndex=h,this._computePositionAnimationState()}ngOnInit(){"center"==this._position&&null!=this.origin&&(this._position=this._computePositionFromOrigin(this.origin))}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._translateTabComplete.complete()}_onTranslateTabStarted(h){const y=this._isCenterPosition(h.toState);this._beforeCentering.emit(y),y&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_isCenterPosition(h){return"center"==h||"left-origin-center"==h||"right-origin-center"==h}_computePositionAnimationState(h=this._getLayoutDirection()){this._position=this._positionIndex<0?"ltr"==h?"left":"right":this._positionIndex>0?"ltr"==h?"right":"left":"center"}_computePositionFromOrigin(h){const y=this._getLayoutDirection();return"ltr"==y&&h<=0||"rtl"==y&&h>0?"left-origin-center":"right-origin-center"}}return S.\u0275fac=function(h){return new(h||S)(a.Y36(a.SBq),a.Y36(Ct.Is,8),a.Y36(a.sBO))},S.\u0275dir=a.lG2({type:S,inputs:{animationDuration:"animationDuration",position:"position",_content:["content","_content"],origin:"origin"},outputs:{_onCentering:"_onCentering",_beforeCentering:"_beforeCentering",_afterLeavingCenter:"_afterLeavingCenter",_onCentered:"_onCentered"}}),S})(),at=(()=>{class S extends ${constructor(h,y,O){super(h,y,O)}}return S.\u0275fac=function(h){return new(h||S)(a.Y36(a.SBq),a.Y36(Ct.Is,8),a.Y36(a.sBO))},S.\u0275cmp=a.Xpm({type:S,selectors:[["mat-tab-body"]],viewQuery:function(h,y){if(1&h&&a.Gf(I.Pl,5),2&h){let O;a.iGM(O=a.CRH())&&(y._portalHost=O.first)}},hostAttrs:[1,"mat-tab-body"],features:[a.qOj],decls:3,vars:6,consts:[["cdkScrollable","",1,"mat-tab-body-content"],["content",""],["matTabBodyHost",""]],template:function(h,y){1&h&&(a.TgZ(0,"div",0,1),a.NdJ("@translateTab.start",function(z){return y._onTranslateTabStarted(z)})("@translateTab.done",function(z){return y._translateTabComplete.next(z)}),a.YNc(2,Jt,0,0,"ng-template",2),a.qZA()),2&h&&a.Q6J("@translateTab",a.WLB(3,oe,y._position,a.VKq(1,Pt,y.animationDuration)))},directives:[Zt],styles:[".mat-tab-body-content{height:100%;overflow:auto}.mat-tab-group-dynamic-height .mat-tab-body-content{overflow:hidden}\n"],encapsulation:2,data:{animation:[Ve.translateTab]}}),S})();const zt=new a.OlP("MAT_TABS_CONFIG");let Qt=0;class ye{}const Ee=(0,k.pj)((0,k.Kr)(class{constructor(S){this._elementRef=S}}),"primary");let ni=(()=>{class S extends Ee{constructor(h,y,O,z){var Kt;super(h),this._changeDetectorRef=y,this._animationMode=z,this._tabs=new a.n_E,this._indexToSelect=0,this._tabBodyWrapperHeight=0,this._tabsSubscription=it.w.EMPTY,this._tabLabelSubscription=it.w.EMPTY,this._selectedIndex=null,this.headerPosition="above",this.selectedIndexChange=new a.vpe,this.focusChange=new a.vpe,this.animationDone=new a.vpe,this.selectedTabChange=new a.vpe(!0),this._groupId=Qt++,this.animationDuration=O&&O.animationDuration?O.animationDuration:"500ms",this.disablePagination=!(!O||null==O.disablePagination)&&O.disablePagination,this.dynamicHeight=!(!O||null==O.dynamicHeight)&&O.dynamicHeight,this.contentTabIndex=null!==(Kt=null==O?void 0:O.contentTabIndex)&&void 0!==Kt?Kt:null}get dynamicHeight(){return this._dynamicHeight}set dynamicHeight(h){this._dynamicHeight=(0,ot.Ig)(h)}get selectedIndex(){return this._selectedIndex}set selectedIndex(h){this._indexToSelect=(0,ot.su)(h,null)}get animationDuration(){return this._animationDuration}set animationDuration(h){this._animationDuration=/^\d+$/.test(h)?h+"ms":h}get contentTabIndex(){return this._contentTabIndex}set contentTabIndex(h){this._contentTabIndex=(0,ot.su)(h,null)}get backgroundColor(){return this._backgroundColor}set backgroundColor(h){const y=this._elementRef.nativeElement;y.classList.remove(`mat-background-${this.backgroundColor}`),h&&y.classList.add(`mat-background-${h}`),this._backgroundColor=h}ngAfterContentChecked(){const h=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=h){const y=null==this._selectedIndex;if(!y){this.selectedTabChange.emit(this._createChangeEvent(h));const O=this._tabBodyWrapper.nativeElement;O.style.minHeight=O.clientHeight+"px"}Promise.resolve().then(()=>{this._tabs.forEach((O,z)=>O.isActive=z===h),y||(this.selectedIndexChange.emit(h),this._tabBodyWrapper.nativeElement.style.minHeight="")})}this._tabs.forEach((y,O)=>{y.position=O-h,null!=this._selectedIndex&&0==y.position&&!y.origin&&(y.origin=h-this._selectedIndex)}),this._selectedIndex!==h&&(this._selectedIndex=h,this._changeDetectorRef.markForCheck())}ngAfterContentInit(){this._subscribeToAllTabChanges(),this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe(()=>{if(this._clampTabIndex(this._indexToSelect)===this._selectedIndex){const y=this._tabs.toArray();for(let O=0;O<y.length;O++)if(y[O].isActive){this._indexToSelect=this._selectedIndex=O;break}}this._changeDetectorRef.markForCheck()})}_subscribeToAllTabChanges(){this._allTabs.changes.pipe((0,Dt.O)(this._allTabs)).subscribe(h=>{this._tabs.reset(h.filter(y=>y._closestTabGroup===this||!y._closestTabGroup)),this._tabs.notifyOnChanges()})}ngOnDestroy(){this._tabs.destroy(),this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe()}realignInkBar(){this._tabHeader&&this._tabHeader._alignInkBarToSelectedTab()}focusTab(h){const y=this._tabHeader;y&&(y.focusIndex=h)}_focusChanged(h){this.focusChange.emit(this._createChangeEvent(h))}_createChangeEvent(h){const y=new ye;return y.index=h,this._tabs&&this._tabs.length&&(y.tab=this._tabs.toArray()[h]),y}_subscribeToTabLabels(){this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=(0,rt.T)(...this._tabs.map(h=>h._stateChanges)).subscribe(()=>this._changeDetectorRef.markForCheck())}_clampTabIndex(h){return Math.min(this._tabs.length-1,Math.max(h||0,0))}_getTabLabelId(h){return`mat-tab-label-${this._groupId}-${h}`}_getTabContentId(h){return`mat-tab-content-${this._groupId}-${h}`}_setTabBodyWrapperHeight(h){if(!this._dynamicHeight||!this._tabBodyWrapperHeight)return;const y=this._tabBodyWrapper.nativeElement;y.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(y.style.height=h+"px")}_removeTabBodyWrapperHeight(){const h=this._tabBodyWrapper.nativeElement;this._tabBodyWrapperHeight=h.clientHeight,h.style.height="",this.animationDone.emit()}_handleClick(h,y,O){h.disabled||(this.selectedIndex=y.focusIndex=O)}_getTabIndex(h,y){return h.disabled?null:this.selectedIndex===y?0:-1}_tabFocusChanged(h,y){h&&"mouse"!==h&&"touch"!==h&&(this._tabHeader.focusIndex=y)}}return S.\u0275fac=function(h){return new(h||S)(a.Y36(a.SBq),a.Y36(a.sBO),a.Y36(zt,8),a.Y36(Y.Qb,8))},S.\u0275dir=a.lG2({type:S,inputs:{headerPosition:"headerPosition",animationDuration:"animationDuration",disablePagination:"disablePagination",dynamicHeight:"dynamicHeight",contentTabIndex:"contentTabIndex",selectedIndex:"selectedIndex",backgroundColor:"backgroundColor"},outputs:{selectedIndexChange:"selectedIndexChange",focusChange:"focusChange",animationDone:"animationDone",selectedTabChange:"selectedTabChange"},features:[a.qOj]}),S})(),Di=(()=>{class S extends ni{constructor(h,y,O,z){super(h,y,O,z)}}return S.\u0275fac=function(h){return new(h||S)(a.Y36(a.SBq),a.Y36(a.sBO),a.Y36(zt,8),a.Y36(Y.Qb,8))},S.\u0275cmp=a.Xpm({type:S,selectors:[["mat-tab-group"]],contentQueries:function(h,y,O){if(1&h&&a.Suo(O,ge,5),2&h){let z;a.iGM(z=a.CRH())&&(y._allTabs=z)}},viewQuery:function(h,y){if(1&h&&(a.Gf(Ne,5),a.Gf(Xe,5)),2&h){let O;a.iGM(O=a.CRH())&&(y._tabBodyWrapper=O.first),a.iGM(O=a.CRH())&&(y._tabHeader=O.first)}},hostAttrs:[1,"mat-tab-group"],hostVars:4,hostBindings:function(h,y){2&h&&a.ekj("mat-tab-group-dynamic-height",y.dynamicHeight)("mat-tab-group-inverted-header","below"===y.headerPosition)},inputs:{color:"color",disableRipple:"disableRipple"},exportAs:["matTabGroup"],features:[a._Bn([{provide:di,useExisting:S}]),a.qOj],decls:6,vars:7,consts:[[3,"selectedIndex","disableRipple","disablePagination","indexFocused","selectFocusedIndex"],["tabHeader",""],["class","mat-tab-label mat-focus-indicator","role","tab","matTabLabelWrapper","","mat-ripple","","cdkMonitorElementFocus","",3,"id","mat-tab-label-active","disabled","matRippleDisabled","click","cdkFocusChange",4,"ngFor","ngForOf"],[1,"mat-tab-body-wrapper"],["tabBodyWrapper",""],["role","tabpanel",3,"id","mat-tab-body-active","content","position","origin","animationDuration","_onCentered","_onCentering",4,"ngFor","ngForOf"],["role","tab","matTabLabelWrapper","","mat-ripple","","cdkMonitorElementFocus","",1,"mat-tab-label","mat-focus-indicator",3,"id","disabled","matRippleDisabled","click","cdkFocusChange"],[1,"mat-tab-label-content"],[3,"ngIf"],[3,"cdkPortalOutlet"],["role","tabpanel",3,"id","content","position","origin","animationDuration","_onCentered","_onCentering"]],template:function(h,y){1&h&&(a.TgZ(0,"mat-tab-header",0,1),a.NdJ("indexFocused",function(z){return y._focusChanged(z)})("selectFocusedIndex",function(z){return y.selectedIndex=z}),a.YNc(2,ai,4,14,"div",2),a.qZA(),a.TgZ(3,"div",3,4),a.YNc(5,re,1,9,"mat-tab-body",5),a.qZA()),2&h&&(a.Q6J("selectedIndex",y.selectedIndex||0)("disableRipple",y.disableRipple)("disablePagination",y.disablePagination),a.xp6(2),a.Q6J("ngForOf",y._tabs),a.xp6(1),a.ekj("_mat-animation-noopable","NoopAnimations"===y._animationMode),a.xp6(2),a.Q6J("ngForOf",y._tabs))},directives:function(){return[yi,x.sg,vi,k.wG,p.kH,x.O5,I.Pl,at]},styles:[".mat-tab-group{display:flex;flex-direction:column;max-width:100%}.mat-tab-group.mat-tab-group-inverted-header{flex-direction:column-reverse}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:none}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.cdk-high-contrast-active .mat-tab-label:focus{outline:dotted 2px;outline-offset:-2px}.mat-tab-label.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-label.mat-tab-disabled{opacity:.5}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-label{opacity:1}@media(max-width: 599px){.mat-tab-label{padding:0 12px}}@media(max-width: 959px){.mat-tab-label{padding:0 12px}}.mat-tab-group[mat-stretch-tabs]>.mat-tab-header .mat-tab-label{flex-basis:0;flex-grow:1}.mat-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height 500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable.mat-tab-body-wrapper{transition:none;animation:none}.mat-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden;outline:0;flex-basis:100%}.mat-tab-body.mat-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-tab-group.mat-tab-group-dynamic-height .mat-tab-body.mat-tab-body-active{overflow-y:hidden}\n"],encapsulation:2}),S})();const Mi=(0,k.Id)(class{});let vi=(()=>{class S extends Mi{constructor(h){super(),this.elementRef=h}focus(){this.elementRef.nativeElement.focus()}getOffsetLeft(){return this.elementRef.nativeElement.offsetLeft}getOffsetWidth(){return this.elementRef.nativeElement.offsetWidth}}return S.\u0275fac=function(h){return new(h||S)(a.Y36(a.SBq))},S.\u0275dir=a.lG2({type:S,selectors:[["","matTabLabelWrapper",""]],hostVars:3,hostBindings:function(h,y){2&h&&(a.uIk("aria-disabled",!!y.disabled),a.ekj("mat-tab-disabled",y.disabled))},inputs:{disabled:"disabled"},features:[a.qOj]}),S})();const pi=(0,nt.i$)({passive:!0});let xe=(()=>{class S{constructor(h,y,O,z,Kt,Ae,Qe){this._elementRef=h,this._changeDetectorRef=y,this._viewportRuler=O,this._dir=z,this._ngZone=Kt,this._platform=Ae,this._animationMode=Qe,this._scrollDistance=0,this._selectedIndexChanged=!1,this._destroyed=new X.xQ,this._showPaginationControls=!1,this._disableScrollAfter=!0,this._disableScrollBefore=!0,this._stopScrolling=new X.xQ,this.disablePagination=!1,this._selectedIndex=0,this.selectFocusedIndex=new a.vpe,this.indexFocused=new a.vpe,Kt.runOutsideAngular(()=>{(0,ct.R)(h.nativeElement,"mouseleave").pipe((0,st.R)(this._destroyed)).subscribe(()=>{this._stopInterval()})})}get selectedIndex(){return this._selectedIndex}set selectedIndex(h){h=(0,ot.su)(h),this._selectedIndex!=h&&(this._selectedIndexChanged=!0,this._selectedIndex=h,this._keyManager&&this._keyManager.updateActiveItem(h))}ngAfterViewInit(){(0,ct.R)(this._previousPaginator.nativeElement,"touchstart",pi).pipe((0,st.R)(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("before")}),(0,ct.R)(this._nextPaginator.nativeElement,"touchstart",pi).pipe((0,st.R)(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("after")})}ngAfterContentInit(){const h=this._dir?this._dir.change:(0,wt.of)("ltr"),y=this._viewportRuler.change(150),O=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new p.Em(this._items).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap(),this._keyManager.updateActiveItem(this._selectedIndex),"undefined"!=typeof requestAnimationFrame?requestAnimationFrame(O):O(),(0,rt.T)(h,y,this._items.changes).pipe((0,st.R)(this._destroyed)).subscribe(()=>{this._ngZone.run(()=>Promise.resolve().then(O)),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.pipe((0,st.R)(this._destroyed)).subscribe(z=>{this.indexFocused.emit(z),this._setTabFocus(z)})}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(h){if(!(0,Tt.Vb)(h))switch(h.keyCode){case Tt.K5:case Tt.L_:this.focusIndex!==this.selectedIndex&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(h));break;default:this._keyManager.onKeydown(h)}}_onContentChanges(){const h=this._elementRef.nativeElement.textContent;h!==this._currentTextContent&&(this._currentTextContent=h||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(h){!this._isValidIndex(h)||this.focusIndex===h||!this._keyManager||this._keyManager.setActiveItem(h)}_isValidIndex(h){if(!this._items)return!0;const y=this._items?this._items.toArray()[h]:null;return!!y&&!y.disabled}_setTabFocus(h){if(this._showPaginationControls&&this._scrollToLabel(h),this._items&&this._items.length){this._items.toArray()[h].focus();const y=this._tabListContainer.nativeElement;y.scrollLeft="ltr"==this._getLayoutDirection()?0:y.scrollWidth-y.offsetWidth}}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination)return;const h=this.scrollDistance,y="ltr"===this._getLayoutDirection()?-h:h;this._tabList.nativeElement.style.transform=`translateX(${Math.round(y)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(h){this._scrollTo(h)}_scrollHeader(h){return this._scrollTo(this._scrollDistance+("before"==h?-1:1)*this._tabListContainer.nativeElement.offsetWidth/3)}_handlePaginatorClick(h){this._stopInterval(),this._scrollHeader(h)}_scrollToLabel(h){if(this.disablePagination)return;const y=this._items?this._items.toArray()[h]:null;if(!y)return;const O=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:z,offsetWidth:Kt}=y.elementRef.nativeElement;let Ae,Qe;"ltr"==this._getLayoutDirection()?(Ae=z,Qe=Ae+Kt):(Qe=this._tabList.nativeElement.offsetWidth-z,Ae=Qe-Kt);const zi=this.scrollDistance,en=this.scrollDistance+O;Ae<zi?this.scrollDistance-=zi-Ae+60:Qe>en&&(this.scrollDistance+=Qe-en+60)}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{const h=this._tabList.nativeElement.scrollWidth>this._elementRef.nativeElement.offsetWidth;h||(this.scrollDistance=0),h!==this._showPaginationControls&&this._changeDetectorRef.markForCheck(),this._showPaginationControls=h}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=0==this.scrollDistance,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){return this._tabList.nativeElement.scrollWidth-this._tabListContainer.nativeElement.offsetWidth||0}_alignInkBarToSelectedTab(){const h=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,y=h?h.elementRef.nativeElement:null;y?this._inkBar.alignToElement(y):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(h,y){y&&null!=y.button&&0!==y.button||(this._stopInterval(),(0,At.H)(650,100).pipe((0,st.R)((0,rt.T)(this._stopScrolling,this._destroyed))).subscribe(()=>{const{maxScrollDistance:O,distance:z}=this._scrollHeader(h);(0===z||z>=O)&&this._stopInterval()}))}_scrollTo(h){if(this.disablePagination)return{maxScrollDistance:0,distance:0};const y=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(y,h)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:y,distance:this._scrollDistance}}}return S.\u0275fac=function(h){return new(h||S)(a.Y36(a.SBq),a.Y36(a.sBO),a.Y36(yt.rL),a.Y36(Ct.Is,8),a.Y36(a.R0b),a.Y36(nt.t4),a.Y36(Y.Qb,8))},S.\u0275dir=a.lG2({type:S,inputs:{disablePagination:"disablePagination"}}),S})(),ii=(()=>{class S extends xe{constructor(h,y,O,z,Kt,Ae,Qe){super(h,y,O,z,Kt,Ae,Qe),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(h){this._disableRipple=(0,ot.Ig)(h)}_itemSelected(h){h.preventDefault()}}return S.\u0275fac=function(h){return new(h||S)(a.Y36(a.SBq),a.Y36(a.sBO),a.Y36(yt.rL),a.Y36(Ct.Is,8),a.Y36(a.R0b),a.Y36(nt.t4),a.Y36(Y.Qb,8))},S.\u0275dir=a.lG2({type:S,inputs:{disableRipple:"disableRipple"},features:[a.qOj]}),S})(),yi=(()=>{class S extends ii{constructor(h,y,O,z,Kt,Ae,Qe){super(h,y,O,z,Kt,Ae,Qe)}}return S.\u0275fac=function(h){return new(h||S)(a.Y36(a.SBq),a.Y36(a.sBO),a.Y36(yt.rL),a.Y36(Ct.Is,8),a.Y36(a.R0b),a.Y36(nt.t4),a.Y36(Y.Qb,8))},S.\u0275cmp=a.Xpm({type:S,selectors:[["mat-tab-header"]],contentQueries:function(h,y,O){if(1&h&&a.Suo(O,vi,4),2&h){let z;a.iGM(z=a.CRH())&&(y._items=z)}},viewQuery:function(h,y){if(1&h&&(a.Gf(ui,7),a.Gf(ce,7),a.Gf(Pe,7),a.Gf(qe,5),a.Gf(oi,5)),2&h){let O;a.iGM(O=a.CRH())&&(y._inkBar=O.first),a.iGM(O=a.CRH())&&(y._tabListContainer=O.first),a.iGM(O=a.CRH())&&(y._tabList=O.first),a.iGM(O=a.CRH())&&(y._nextPaginator=O.first),a.iGM(O=a.CRH())&&(y._previousPaginator=O.first)}},hostAttrs:[1,"mat-tab-header"],hostVars:4,hostBindings:function(h,y){2&h&&a.ekj("mat-tab-header-pagination-controls-enabled",y._showPaginationControls)("mat-tab-header-rtl","rtl"==y._getLayoutDirection())},inputs:{selectedIndex:"selectedIndex"},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"},features:[a.qOj],ngContentSelectors:_t,decls:13,vars:8,consts:[["aria-hidden","true","mat-ripple","",1,"mat-tab-header-pagination","mat-tab-header-pagination-before","mat-elevation-z4",3,"matRippleDisabled","click","mousedown","touchend"],["previousPaginator",""],[1,"mat-tab-header-pagination-chevron"],[1,"mat-tab-label-container",3,"keydown"],["tabListContainer",""],["role","tablist",1,"mat-tab-list",3,"cdkObserveContent"],["tabList",""],[1,"mat-tab-labels"],["aria-hidden","true","mat-ripple","",1,"mat-tab-header-pagination","mat-tab-header-pagination-after","mat-elevation-z4",3,"matRippleDisabled","mousedown","click","touchend"],["nextPaginator",""]],template:function(h,y){1&h&&(a.F$t(),a.TgZ(0,"div",0,1),a.NdJ("click",function(){return y._handlePaginatorClick("before")})("mousedown",function(z){return y._handlePaginatorPress("before",z)})("touchend",function(){return y._stopInterval()}),a._UZ(2,"div",2),a.qZA(),a.TgZ(3,"div",3,4),a.NdJ("keydown",function(z){return y._handleKeydown(z)}),a.TgZ(5,"div",5,6),a.NdJ("cdkObserveContent",function(){return y._onContentChanges()}),a.TgZ(7,"div",7),a.Hsn(8),a.qZA(),a._UZ(9,"mat-ink-bar"),a.qZA(),a.qZA(),a.TgZ(10,"div",8,9),a.NdJ("mousedown",function(z){return y._handlePaginatorPress("after",z)})("click",function(){return y._handlePaginatorClick("after")})("touchend",function(){return y._stopInterval()}),a._UZ(12,"div",2),a.qZA()),2&h&&(a.ekj("mat-tab-header-pagination-disabled",y._disableScrollBefore),a.Q6J("matRippleDisabled",y._disableScrollBefore||y.disableRipple),a.xp6(5),a.ekj("_mat-animation-noopable","NoopAnimations"===y._animationMode),a.xp6(5),a.ekj("mat-tab-header-pagination-disabled",y._disableScrollAfter),a.Q6J("matRippleDisabled",y._disableScrollAfter||y.disableRipple))},directives:[k.wG,b.wD,ui],styles:['.mat-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mat-tab-header-pagination{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:transparent;touch-action:none}.mat-tab-header-pagination-controls-enabled .mat-tab-header-pagination{display:flex}.mat-tab-header-pagination-before,.mat-tab-header-rtl .mat-tab-header-pagination-after{padding-left:4px}.mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-rtl .mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-tab-header-rtl .mat-tab-header-pagination-before,.mat-tab-header-pagination-after{padding-right:4px}.mat-tab-header-rtl .mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;content:"";height:8px;width:8px}.mat-tab-header-pagination-disabled{box-shadow:none;cursor:default}.mat-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-ink-bar{position:absolute;bottom:0;height:2px;transition:500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable.mat-ink-bar{transition:none;animation:none}.mat-tab-group-inverted-header .mat-ink-bar{bottom:auto;top:0}.cdk-high-contrast-active .mat-ink-bar{outline:solid 2px;height:0}.mat-tab-labels{display:flex}[mat-align-tabs=center]>.mat-tab-header .mat-tab-labels{justify-content:center}[mat-align-tabs=end]>.mat-tab-header .mat-tab-labels{justify-content:flex-end}.mat-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1}._mat-animation-noopable.mat-tab-list{transition:none;animation:none}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:none}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.cdk-high-contrast-active .mat-tab-label:focus{outline:dotted 2px;outline-offset:-2px}.mat-tab-label.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-label.mat-tab-disabled{opacity:.5}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-label{opacity:1}@media(max-width: 599px){.mat-tab-label{min-width:72px}}\n'],encapsulation:2}),S})(),Me=(()=>{class S{}return S.\u0275fac=function(h){return new(h||S)},S.\u0275mod=a.oAB({type:S}),S.\u0275inj=a.cJS({imports:[[x.ez,k.BQ,I.eL,k.si,b.Q8,p.rt],k.BQ]}),S})();const kt=["vcr"];function Wt(S,N){if(1&S&&(a.TgZ(0,"mat-icon",9),a._uU(1),a.qZA()),2&S){const h=a.oxw(2).$implicit;a.xp6(1),a.hij(" filter_",h+1,"")}}function Gt(S,N){1&S&&(a.TgZ(0,"span"),a._uU(1,"W:{{number+1}"),a.qZA())}function be(S,N){if(1&S&&(a.YNc(0,Wt,2,1,"mat-icon",7),a.YNc(1,Gt,2,0,"span",8)),2&S){const h=a.oxw().$implicit;a.Q6J("ngIf",h<10),a.xp6(1),a.Q6J("ngIf",h>9)}}function Je(S,N){}function Pi(S,N){1&S&&(a.TgZ(0,"mat-tab",4),a.YNc(1,be,2,2,"ng-template",5),a.YNc(2,Je,0,0,"ng-template",null,6,a.W1O),a.qZA()),2&S&&a.Q6J("label","W:"+(N.$implicit+1))}let Oi=(()=>{class S{constructor(h,y){this.fooInjector=h,this.resolver=y,this.data=[],this.selectedTabIndex=0,this.numbers=[0]}addTab(){this.numbers.push(this.numbers.length),this.selectedTabIndex=this.numbers.length-1}changeSelected(h){this.data.filter(y=>y==h).length>0||(this.data.push(h),this.loadBar(h).then(y=>{console.log("loaded"+y)}))}ngAfterViewInit(){this.data.push(0),this.loadBar(0).then(h=>{console.log("loaded tab"+h)})}loadBar(h){var y=this;return(0,n.Z)(function*(){var O;try{const Kt=yield Promise.resolve().then(v.bind(v,82454)),Ae=y.resolver.resolveComponentFactory(Kt.DisplayBlocklyComponent);var z=null===(O=y.components)||void 0===O?void 0:O.get(h);null!=z&&z.createComponent(Ae)}catch(Kt){console.error("loading"+h,Kt)}return h})()}ngOnInit(){}}return S.\u0275fac=function(h){return new(h||S)(a.Y36(a.zs3),a.Y36(a._Vd))},S.\u0275cmp=a.Xpm({type:S,selectors:[["app-blockly-studio"]],viewQuery:function(h,y){if(1&h&&a.Gf(kt,5,a.s_b),2&h){let O;a.iGM(O=a.CRH())&&(y.components=O)}},decls:7,vars:2,consts:[["mat-icon-button","","color","primary",3,"click"],[3,"selectedIndex","selectedIndexChange"],[3,"label",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"click"],[3,"label"],["mat-tab-label",""],["vcr",""],["aria-hidden","false",4,"ngIf"],[4,"ngIf"],["aria-hidden","false"]],template:function(h,y){1&h&&(a.TgZ(0,"button",0),a.NdJ("click",function(){return y.addTab()}),a.TgZ(1,"mat-icon"),a._uU(2,"add_circle"),a.qZA(),a.qZA(),a.TgZ(3,"mat-tab-group",1),a.NdJ("selectedIndexChange",function(z){return y.changeSelected(z)}),a.YNc(4,Pi,4,1,"mat-tab",2),a.qZA(),a.TgZ(5,"button",3),a.NdJ("click",function(){return y.addTab()}),a._uU(6,"Add"),a.qZA()),2&h&&(a.xp6(3),a.Q6J("selectedIndex",y.selectedTabIndex),a.xp6(1),a.Q6J("ngForOf",y.numbers))},directives:[o.lW,r.Hw,Di,x.sg,ge,hi,x.O5],styles:[""]}),S})();var kn=v(82454);const Wn=[{path:"",redirectTo:"automation/main",pathMatch:"full"},{path:"automation/main",component:kn.DisplayBlocklyComponent},{path:"automation/studio",component:Oi},{path:"automation/loadexample/:demoblock",component:kn.DisplayBlocklyComponent}];let so=(()=>{class S{}return S.\u0275fac=function(h){return new(h||S)},S.\u0275mod=a.oAB({type:S}),S.\u0275inj=a.cJS({imports:[[t.Bz.forRoot(Wn)],t.Bz]}),S})();var Vn=v(970),Dn=v(52514),Do=v(88561),Eo=v(41001);let hs=(()=>{class S{constructor(){this.title="",this.footer="",this.startBlocks=[],this.tourSteps=[]}}return S.version="2021.12.10.713",S})();var ro=v(45725),Li=v(63305),pn=v(28744);function Fn(S){return N=>N.lift(new jo(S))}class jo{constructor(N){this.value=N}call(N,h){return h.subscribe(new es(N,this.value))}}class es extends pn.L{constructor(N,h){super(N),this.value=h}_next(N){this.destination.next(this.value)}}var xn=v(59917),Vo=v(89006);const Yn=["*"];function xs(S,N){if(1&S){const h=a.EpF();a.TgZ(0,"div",2),a.NdJ("click",function(){return a.CHM(h),a.oxw()._onBackdropClicked()}),a.qZA()}if(2&S){const h=a.oxw();a.ekj("mat-drawer-shown",h._isShowingBackdrop())}}function Vs(S,N){1&S&&(a.TgZ(0,"mat-drawer-content"),a.Hsn(1,2),a.qZA())}const gn=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],Ge=["mat-drawer","mat-drawer-content","*"];function ke(S,N){if(1&S){const h=a.EpF();a.TgZ(0,"div",2),a.NdJ("click",function(){return a.CHM(h),a.oxw()._onBackdropClicked()}),a.qZA()}if(2&S){const h=a.oxw();a.ekj("mat-drawer-shown",h._isShowingBackdrop())}}function pe(S,N){1&S&&(a.TgZ(0,"mat-sidenav-content",3),a.Hsn(1,2),a.qZA())}const $e=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],_i=["mat-sidenav","mat-sidenav-content","*"],on=".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n",fn={transformDrawer:(0,Rt.X$)("transform",[(0,Rt.SB)("open, open-instant",(0,Rt.oB)({transform:"none",visibility:"visible"})),(0,Rt.SB)("void",(0,Rt.oB)({"box-shadow":"none",visibility:"hidden"})),(0,Rt.eR)("void => open-instant",(0,Rt.jt)("0ms")),(0,Rt.eR)("void <=> open, open-instant => void",(0,Rt.jt)("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},cn=new a.OlP("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function(){return!1}}),ds=new a.OlP("MAT_DRAWER_CONTAINER");let ps=(()=>{class S extends yt.PQ{constructor(h,y,O,z,Kt){super(O,z,Kt),this._changeDetectorRef=h,this._container=y}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return S.\u0275fac=function(h){return new(h||S)(a.Y36(a.sBO),a.Y36((0,a.Gpc)(()=>Ao)),a.Y36(a.SBq),a.Y36(yt.mF),a.Y36(a.R0b))},S.\u0275cmp=a.Xpm({type:S,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(h,y){2&h&&a.Udp("margin-left",y._container._contentMargins.left,"px")("margin-right",y._container._contentMargins.right,"px")},features:[a.qOj],ngContentSelectors:Yn,decls:1,vars:0,template:function(h,y){1&h&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),S})(),No=(()=>{class S{constructor(h,y,O,z,Kt,Ae,Qe){this._elementRef=h,this._focusTrapFactory=y,this._focusMonitor=O,this._platform=z,this._ngZone=Kt,this._doc=Ae,this._container=Qe,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new X.xQ,this._animationEnd=new X.xQ,this._animationState="void",this.openedChange=new a.vpe(!0),this._openedStream=this.openedChange.pipe((0,Li.h)(zi=>zi),(0,Do.U)(()=>{})),this.openedStart=this._animationStarted.pipe((0,Li.h)(zi=>zi.fromState!==zi.toState&&0===zi.toState.indexOf("open")),Fn(void 0)),this._closedStream=this.openedChange.pipe((0,Li.h)(zi=>!zi),(0,Do.U)(()=>{})),this.closedStart=this._animationStarted.pipe((0,Li.h)(zi=>zi.fromState!==zi.toState&&"void"===zi.toState),Fn(void 0)),this._destroyed=new X.xQ,this.onPositionChanged=new a.vpe,this._modeChanged=new X.xQ,this.openedChange.subscribe(zi=>{zi?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus()}),this._ngZone.runOutsideAngular(()=>{(0,ct.R)(this._elementRef.nativeElement,"keydown").pipe((0,Li.h)(zi=>zi.keyCode===Tt.hY&&!this.disableClose&&!(0,Tt.Vb)(zi)),(0,st.R)(this._destroyed)).subscribe(zi=>this._ngZone.run(()=>{this.close(),zi.stopPropagation(),zi.preventDefault()}))}),this._animationEnd.pipe((0,pt.x)((zi,en)=>zi.fromState===en.fromState&&zi.toState===en.toState)).subscribe(zi=>{const{fromState:en,toState:Pn}=zi;(0===Pn.indexOf("open")&&"void"===en||"void"===Pn&&0===en.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(h){(h="end"===h?"end":"start")!=this._position&&(this._position=h,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(h){this._mode=h,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(h){this._disableClose=(0,ot.Ig)(h)}get autoFocus(){const h=this._autoFocus;return null==h?"side"!==this.mode:h}set autoFocus(h){this._autoFocus=(0,ot.Ig)(h)}get opened(){return this._opened}set opened(h){this.toggle((0,ot.Ig)(h))}_takeFocus(){!this.autoFocus||!this._focusTrap||this._focusTrap.focusInitialElementWhenReady().then(h=>{!h&&"function"==typeof this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()})}_restoreFocus(){!this.autoFocus||(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,this._openedVia):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null,this._openedVia=null)}_isFocusWithinDrawer(){var h;const y=null===(h=this._doc)||void 0===h?void 0:h.activeElement;return!!y&&this._elementRef.nativeElement.contains(y)}ngAfterContentInit(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState()}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(h){return this.toggle(!0,h)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0)}toggle(h=!this.opened,y){return this._setOpen(h,!h&&this._isFocusWithinDrawer(),y)}_setOpen(h,y,O="program"){return this._opened=h,h?(this._animationState=this._enableAnimations?"open":"open-instant",this._openedVia=O):(this._animationState="void",y&&this._restoreFocus()),this._updateFocusTrapState(),new Promise(z=>{this.openedChange.pipe((0,xn.q)(1)).subscribe(Kt=>z(Kt?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_animationStartListener(h){this._animationStarted.next(h)}_animationDoneListener(h){this._animationEnd.next(h)}}return S.\u0275fac=function(h){return new(h||S)(a.Y36(a.SBq),a.Y36(p.qV),a.Y36(p.tE),a.Y36(nt.t4),a.Y36(a.R0b),a.Y36(x.K0,8),a.Y36(ds,8))},S.\u0275cmp=a.Xpm({type:S,selectors:[["mat-drawer"]],hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(h,y){1&h&&a.WFA("@transform.start",function(z){return y._animationStartListener(z)})("@transform.done",function(z){return y._animationDoneListener(z)}),2&h&&(a.uIk("align",null),a.d8E("@transform",y._animationState),a.ekj("mat-drawer-end","end"===y.position)("mat-drawer-over","over"===y.mode)("mat-drawer-push","push"===y.mode)("mat-drawer-side","side"===y.mode)("mat-drawer-opened",y.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:Yn,decls:2,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(h,y){1&h&&(a.F$t(),a.TgZ(0,"div",0),a.Hsn(1),a.qZA())},directives:[yt.PQ],encapsulation:2,data:{animation:[fn.transformDrawer]},changeDetection:0}),S})(),Ao=(()=>{class S{constructor(h,y,O,z,Kt,Ae=!1,Qe){this._dir=h,this._element=y,this._ngZone=O,this._changeDetectorRef=z,this._animationMode=Qe,this._drawers=new a.n_E,this.backdropClick=new a.vpe,this._destroyed=new X.xQ,this._doCheckSubject=new X.xQ,this._contentMargins={left:null,right:null},this._contentMarginChanges=new X.xQ,h&&h.change.pipe((0,st.R)(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),Kt.change().pipe((0,st.R)(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=Ae}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(h){this._autosize=(0,ot.Ig)(h)}get hasBackdrop(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride}set hasBackdrop(h){this._backdropOverride=null==h?null:(0,ot.Ig)(h)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe((0,Dt.O)(this._allDrawers),(0,st.R)(this._destroyed)).subscribe(h=>{this._drawers.reset(h.filter(y=>!y._container||y._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe((0,Dt.O)(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(h=>{this._watchDrawerToggle(h),this._watchDrawerPosition(h),this._watchDrawerMode(h)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe((0,Vo.b)(10),(0,st.R)(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(h=>h.open())}close(){this._drawers.forEach(h=>h.close())}updateContentMargins(){let h=0,y=0;if(this._left&&this._left.opened)if("side"==this._left.mode)h+=this._left._getWidth();else if("push"==this._left.mode){const O=this._left._getWidth();h+=O,y-=O}if(this._right&&this._right.opened)if("side"==this._right.mode)y+=this._right._getWidth();else if("push"==this._right.mode){const O=this._right._getWidth();y+=O,h-=O}h=h||null,y=y||null,(h!==this._contentMargins.left||y!==this._contentMargins.right)&&(this._contentMargins={left:h,right:y},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(h){h._animationStarted.pipe((0,Li.h)(y=>y.fromState!==y.toState),(0,st.R)(this._drawers.changes)).subscribe(y=>{"open-instant"!==y.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==h.mode&&h.openedChange.pipe((0,st.R)(this._drawers.changes)).subscribe(()=>this._setContainerClass(h.opened))}_watchDrawerPosition(h){!h||h.onPositionChanged.pipe((0,st.R)(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe((0,xn.q)(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(h){h&&h._modeChanged.pipe((0,st.R)((0,rt.T)(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(h){const y=this._element.nativeElement.classList,O="mat-drawer-container-has-open";h?y.add(O):y.remove(O)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(h=>{"end"==h.position?this._end=h:this._start=h}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(h=>h&&!h.disableClose&&this._canHaveBackdrop(h)).forEach(h=>h._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(h){return"side"!==h.mode||!!this._backdropOverride}_isDrawerOpen(h){return null!=h&&h.opened}}return S.\u0275fac=function(h){return new(h||S)(a.Y36(Ct.Is,8),a.Y36(a.SBq),a.Y36(a.R0b),a.Y36(a.sBO),a.Y36(yt.rL),a.Y36(cn),a.Y36(Y.Qb,8))},S.\u0275cmp=a.Xpm({type:S,selectors:[["mat-drawer-container"]],contentQueries:function(h,y,O){if(1&h&&(a.Suo(O,ps,5),a.Suo(O,No,5)),2&h){let z;a.iGM(z=a.CRH())&&(y._content=z.first),a.iGM(z=a.CRH())&&(y._allDrawers=z)}},viewQuery:function(h,y){if(1&h&&a.Gf(ps,5),2&h){let O;a.iGM(O=a.CRH())&&(y._userContent=O.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(h,y){2&h&&a.ekj("mat-drawer-container-explicit-backdrop",y._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[a._Bn([{provide:ds,useExisting:S}])],ngContentSelectors:Ge,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(h,y){1&h&&(a.F$t(gn),a.YNc(0,xs,1,2,"div",0),a.Hsn(1),a.Hsn(2,1),a.YNc(3,Vs,2,0,"mat-drawer-content",1)),2&h&&(a.Q6J("ngIf",y.hasBackdrop),a.xp6(3),a.Q6J("ngIf",!y._content))},directives:[x.O5,ps],styles:[on],encapsulation:2,changeDetection:0}),S})(),rs=(()=>{class S extends ps{constructor(h,y,O,z,Kt){super(h,y,O,z,Kt)}}return S.\u0275fac=function(h){return new(h||S)(a.Y36(a.sBO),a.Y36((0,a.Gpc)(()=>To)),a.Y36(a.SBq),a.Y36(yt.mF),a.Y36(a.R0b))},S.\u0275cmp=a.Xpm({type:S,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],hostVars:4,hostBindings:function(h,y){2&h&&a.Udp("margin-left",y._container._contentMargins.left,"px")("margin-right",y._container._contentMargins.right,"px")},features:[a.qOj],ngContentSelectors:Yn,decls:1,vars:0,template:function(h,y){1&h&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),S})(),Uo=(()=>{class S extends No{constructor(){super(...arguments),this._fixedInViewport=!1,this._fixedTopGap=0,this._fixedBottomGap=0}get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(h){this._fixedInViewport=(0,ot.Ig)(h)}get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(h){this._fixedTopGap=(0,ot.su)(h)}get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(h){this._fixedBottomGap=(0,ot.su)(h)}}return S.\u0275fac=function(){let N;return function(y){return(N||(N=a.n5z(S)))(y||S)}}(),S.\u0275cmp=a.Xpm({type:S,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1",1,"mat-drawer","mat-sidenav"],hostVars:17,hostBindings:function(h,y){2&h&&(a.uIk("align",null),a.Udp("top",y.fixedInViewport?y.fixedTopGap:null,"px")("bottom",y.fixedInViewport?y.fixedBottomGap:null,"px"),a.ekj("mat-drawer-end","end"===y.position)("mat-drawer-over","over"===y.mode)("mat-drawer-push","push"===y.mode)("mat-drawer-side","side"===y.mode)("mat-drawer-opened",y.opened)("mat-sidenav-fixed",y.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],features:[a.qOj],ngContentSelectors:Yn,decls:2,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(h,y){1&h&&(a.F$t(),a.TgZ(0,"div",0),a.Hsn(1),a.qZA())},directives:[yt.PQ],encapsulation:2,data:{animation:[fn.transformDrawer]},changeDetection:0}),S})(),To=(()=>{class S extends Ao{}return S.\u0275fac=function(){let N;return function(y){return(N||(N=a.n5z(S)))(y||S)}}(),S.\u0275cmp=a.Xpm({type:S,selectors:[["mat-sidenav-container"]],contentQueries:function(h,y,O){if(1&h&&(a.Suo(O,rs,5),a.Suo(O,Uo,5)),2&h){let z;a.iGM(z=a.CRH())&&(y._content=z.first),a.iGM(z=a.CRH())&&(y._allDrawers=z)}},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(h,y){2&h&&a.ekj("mat-drawer-container-explicit-backdrop",y._backdropOverride)},exportAs:["matSidenavContainer"],features:[a._Bn([{provide:ds,useExisting:S}]),a.qOj],ngContentSelectors:_i,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],["cdkScrollable","",4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"],["cdkScrollable",""]],template:function(h,y){1&h&&(a.F$t($e),a.YNc(0,ke,1,2,"div",0),a.Hsn(1),a.Hsn(2,1),a.YNc(3,pe,2,0,"mat-sidenav-content",1)),2&h&&(a.Q6J("ngIf",y.hasBackdrop),a.xp6(3),a.Q6J("ngIf",!y._content))},directives:[x.O5,rs,yt.PQ],styles:[on],encapsulation:2,changeDetection:0}),S})(),On=(()=>{class S{}return S.\u0275fac=function(h){return new(h||S)},S.\u0275mod=a.oAB({type:S}),S.\u0275inj=a.cJS({imports:[[x.ez,k.BQ,nt.ud,yt.ZD],yt.ZD,k.BQ]}),S})();const is=["*",[["mat-toolbar-row"]]],lo=["*","mat-toolbar-row"],ks=(0,k.pj)(class{constructor(S){this._elementRef=S}});let Co=(()=>{class S{}return S.\u0275fac=function(h){return new(h||S)},S.\u0275dir=a.lG2({type:S,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),S})(),ws=(()=>{class S extends ks{constructor(h,y,O){super(h),this._platform=y,this._document=O}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return S.\u0275fac=function(h){return new(h||S)(a.Y36(a.SBq),a.Y36(nt.t4),a.Y36(x.K0))},S.\u0275cmp=a.Xpm({type:S,selectors:[["mat-toolbar"]],contentQueries:function(h,y,O){if(1&h&&a.Suo(O,Co,5),2&h){let z;a.iGM(z=a.CRH())&&(y._toolbarRows=z)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(h,y){2&h&&a.ekj("mat-toolbar-multiple-rows",y._toolbarRows.length>0)("mat-toolbar-single-row",0===y._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[a.qOj],ngContentSelectors:lo,decls:2,vars:0,template:function(h,y){1&h&&(a.F$t(is),a.Hsn(0),a.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),S})(),Oo=(()=>{class S{}return S.\u0275fac=function(h){return new(h||S)},S.\u0275mod=a.oAB({type:S}),S.\u0275inj=a.cJS({imports:[[k.BQ],k.BQ]}),S})();v(98950);let er=(()=>{class S{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(h){this._vertical=(0,ot.Ig)(h)}get inset(){return this._inset}set inset(h){this._inset=(0,ot.Ig)(h)}}return S.\u0275fac=function(h){return new(h||S)},S.\u0275cmp=a.Xpm({type:S,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(h,y){2&h&&(a.uIk("aria-orientation",y.vertical?"vertical":"horizontal"),a.ekj("mat-divider-vertical",y.vertical)("mat-divider-horizontal",!y.vertical)("mat-divider-inset",y.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(h,y){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}\n"],encapsulation:2,changeDetection:0}),S})(),Or=(()=>{class S{}return S.\u0275fac=function(h){return new(h||S)},S.\u0275mod=a.oAB({type:S}),S.\u0275inj=a.cJS({imports:[[k.BQ],k.BQ]}),S})();const ir=["*"],Jr=[[["","mat-list-avatar",""],["","mat-list-icon",""],["","matListAvatar",""],["","matListIcon",""]],[["","mat-line",""],["","matLine",""]],"*"],oa=["[mat-list-avatar], [mat-list-icon], [matListAvatar], [matListIcon]","[mat-line], [matLine]","*"],gs=(0,k.Id)((0,k.Kr)(class{})),Ks=(0,k.Kr)(class{}),sa=new a.OlP("MatList"),Cs=new a.OlP("MatNavList");let Yo=(()=>{class S extends gs{constructor(){super(...arguments),this._stateChanges=new X.xQ}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return S.\u0275fac=function(){let N;return function(y){return(N||(N=a.n5z(S)))(y||S)}}(),S.\u0275cmp=a.Xpm({type:S,selectors:[["mat-nav-list"]],hostAttrs:["role","navigation",1,"mat-nav-list","mat-list-base"],inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matNavList"],features:[a._Bn([{provide:Cs,useExisting:S}]),a.qOj,a.TTD],ngContentSelectors:ir,decls:1,vars:0,template:function(h,y){1&h&&(a.F$t(),a.Hsn(0))},styles:['.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:transparent}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:transparent;text-align:left}[dir=rtl] mat-action-list button{text-align:right}mat-action-list button::-moz-focus-inner{border:0}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-selection-list:focus{outline-style:dotted}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-list-option:focus,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:focus,.cdk-high-contrast-active mat-action-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:focus{outline:dotted 1px;z-index:1}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}\n'],encapsulation:2,changeDetection:0}),S})(),Ls=(()=>{class S{}return S.\u0275fac=function(h){return new(h||S)},S.\u0275dir=a.lG2({type:S,selectors:[["","mat-list-avatar",""],["","matListAvatar",""]],hostAttrs:[1,"mat-list-avatar"]}),S})(),_r=(()=>{class S{}return S.\u0275fac=function(h){return new(h||S)},S.\u0275dir=a.lG2({type:S,selectors:[["","mat-list-icon",""],["","matListIcon",""]],hostAttrs:[1,"mat-list-icon"]}),S})(),kr=(()=>{class S extends Ks{constructor(h,y,O,z){super(),this._element=h,this._isInteractiveList=!1,this._destroyed=new X.xQ,this._disabled=!1,this._isInteractiveList=!!(O||z&&"action-list"===z._getListType()),this._list=O||z;const Kt=this._getHostElement();"button"===Kt.nodeName.toLowerCase()&&!Kt.hasAttribute("type")&&Kt.setAttribute("type","button"),this._list&&this._list._stateChanges.pipe((0,st.R)(this._destroyed)).subscribe(()=>{y.markForCheck()})}get disabled(){return this._disabled||!(!this._list||!this._list.disabled)}set disabled(h){this._disabled=(0,ot.Ig)(h)}ngAfterContentInit(){(0,k.E0)(this._lines,this._element)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_isRippleDisabled(){return!this._isInteractiveList||this.disableRipple||!(!this._list||!this._list.disableRipple)}_getHostElement(){return this._element.nativeElement}}return S.\u0275fac=function(h){return new(h||S)(a.Y36(a.SBq),a.Y36(a.sBO),a.Y36(Cs,8),a.Y36(sa,8))},S.\u0275cmp=a.Xpm({type:S,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(h,y,O){if(1&h&&(a.Suo(O,Ls,5),a.Suo(O,_r,5),a.Suo(O,k.X2,5)),2&h){let z;a.iGM(z=a.CRH())&&(y._avatar=z.first),a.iGM(z=a.CRH())&&(y._icon=z.first),a.iGM(z=a.CRH())&&(y._lines=z)}},hostAttrs:[1,"mat-list-item","mat-focus-indicator"],hostVars:6,hostBindings:function(h,y){2&h&&a.ekj("mat-list-item-disabled",y.disabled)("mat-list-item-avatar",y._avatar||y._icon)("mat-list-item-with-avatar",y._avatar||y._icon)},inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matListItem"],features:[a.qOj],ngContentSelectors:oa,decls:6,vars:2,consts:[[1,"mat-list-item-content"],["mat-ripple","",1,"mat-list-item-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-list-text"]],template:function(h,y){1&h&&(a.F$t(Jr),a.TgZ(0,"div",0),a._UZ(1,"div",1),a.Hsn(2),a.TgZ(3,"div",2),a.Hsn(4,1),a.qZA(),a.Hsn(5,2),a.qZA()),2&h&&(a.xp6(1),a.Q6J("matRippleTrigger",y._getHostElement())("matRippleDisabled",y._isRippleDisabled()))},directives:[k.wG],encapsulation:2,changeDetection:0}),S})(),ho=(()=>{class S{}return S.\u0275fac=function(h){return new(h||S)},S.\u0275mod=a.oAB({type:S}),S.\u0275inj=a.cJS({imports:[[k.uc,k.si,k.BQ,k.us,x.ez],k.uc,k.BQ,k.us,Or]}),S})();var Is=v(8220),Qn=v(28369);const aa=function(S){return["/","automation","loadexample",S]};function Lr(S,N){if(1&S&&(a.TgZ(0,"a",20),a.TgZ(1,"mat-icon"),a._uU(2," https "),a.qZA(),a._uU(3),a.qZA()),2&S){const h=N.index,y=N.$implicit;a.Q6J("routerLink",a.VKq(3,aa,y.id)),a.xp6(3),a.AsE(" ",h+1," ",y.description,"")}}function mr(S,N){if(1&S){const h=a.EpF();a.TgZ(0,"button",22),a.NdJ("click",function(){return a.CHM(h),a.oxw(),a.MAs(2).toggle()}),a.TgZ(1,"mat-icon",23),a._uU(2,"menu"),a.qZA(),a.qZA()}}const Po=function(){return["/","automation","studio"]},vr=function(){return["/","automation","main"]};let Nr=(()=>{class S{constructor(h,y,O){this.breakpointObserver=h,this.details=y,this.ta=O,this.demoBlocks=[],this.isHandset$=this.breakpointObserver.observe(Dn.u3.Handset).pipe((0,Do.U)(z=>z.matches||!0),(0,Eo.d)()),this.version=hs.version,this.title="Blockly Automation",this.footer=""}ngOnInit(){var h,y,O,z;this.demoBlocks=this.details.demoBlocks.sort((Kt,Ae)=>Kt.description.localeCompare(Ae.description)),this.title=(null===(y=null===(h=this.details)||void 0===h?void 0:h.settings)||void 0===y?void 0:y.title)||"Blockly Automation",this.footer=(null===(z=null===(O=this.details)||void 0===O?void 0:O.settings)||void 0===z?void 0:z.footer)||""}executeOnDisplayBlockly(h){this.ta.sendDataToServer("DisplayBlocklyComponent",h)}}return S.\u0275fac=function(h){return new(h||S)(a.Y36(Dn.Yg),a.Y36(Vn.d),a.Y36(ro.v))},S.\u0275cmp=a.Xpm({type:S,selectors:[["app-primary-navig"]],decls:75,vars:23,consts:[[1,"sidenav-container"],["fixedInViewport","",1,"sidenav",3,"mode","opened"],["drawer",""],["mat-list-item","","routerLink","/"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation","target","_blank"],["mat-list-item","","href","https://ignatandrei.github.io/BlocklyAutomation","target","_blank"],["mat-list-item","","target","_blank",3,"routerLink",4,"ngFor","ngForOf"],["color","primary",1,"nav-bar"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click",4,"ngIf"],[3,"title"],[1,"example-spacer"],["mat-mini-fab","","color","primary",3,"click"],["id","download","mat-button","",3,"matMenuTriggerFor"],["download","matMenu"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseBlocklyAutomation.zip/","target","_blank"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseLin.zip/","target","_blank"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseWin.zip/","target","_blank"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseIISWin.zip/","target","_blank"],["mat-button","",3,"matMenuTriggerFor"],["examples","matMenu"],["mat-list-item","","target","_blank",3,"routerLink"],[1,"main-content"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click"],["aria-label","Side nav toggle icon"]],template:function(h,y){if(1&h&&(a.TgZ(0,"mat-sidenav-container",0),a.TgZ(1,"mat-sidenav",1,2),a.ALo(3,"async"),a.ALo(4,"async"),a.ALo(5,"async"),a.TgZ(6,"mat-toolbar"),a.TgZ(7,"a",3),a._uU(8,"Menu"),a.qZA(),a.qZA(),a.TgZ(9,"mat-nav-list"),a.TgZ(10,"a",4),a.TgZ(11,"mat-icon"),a._uU(12," source "),a.qZA(),a._uU(13," Github"),a.qZA(),a._UZ(14,"mat-divider"),a.TgZ(15,"a",5),a.TgZ(16,"mat-icon"),a._uU(17," https "),a.qZA(),a._uU(18," Demo online"),a.qZA(),a._UZ(19,"mat-divider"),a.TgZ(20,"mat-expansion-panel"),a.TgZ(21,"mat-expansion-panel-header"),a.TgZ(22,"mat-panel-title"),a._uU(23),a.qZA(),a.qZA(),a.YNc(24,Lr,4,5,"a",6),a.qZA(),a.qZA(),a.qZA(),a.TgZ(25,"mat-sidenav-content"),a.TgZ(26,"mat-toolbar",7),a.YNc(27,mr,3,0,"button",8),a.ALo(28,"async"),a.TgZ(29,"span",9),a._uU(30),a.qZA(),a._UZ(31,"span",10),a.TgZ(32,"button",11),a.NdJ("click",function(){return y.executeOnDisplayBlockly("createIntro")}),a.TgZ(33,"mat-icon"),a._uU(34," help_outline "),a.qZA(),a.qZA(),a.TgZ(35,"button",12),a.TgZ(36,"mat-icon"),a._uU(37," file_download "),a.qZA(),a.qZA(),a.TgZ(38,"mat-menu",null,13),a.TgZ(40,"a",14),a._uU(41," Download HTML"),a.qZA(),a.TgZ(42,"a",15),a._uU(43," Download Linux"),a.qZA(),a.TgZ(44,"a",16),a._uU(45," Download Windows"),a.qZA(),a.TgZ(46,"a",17),a._uU(47," Download IIS"),a.qZA(),a.qZA(),a.TgZ(48,"button",18),a.TgZ(49,"mat-icon"),a._uU(50," source "),a.qZA(),a.qZA(),a.TgZ(51,"mat-menu",null,19),a.TgZ(53,"a",20),a.TgZ(54,"mat-icon"),a._uU(55," star "),a.qZA(),a._uU(56,"Studio "),a.qZA(),a.TgZ(57,"a",20),a.TgZ(58,"mat-icon"),a._uU(59," star_half "),a.qZA(),a._uU(60,"Single "),a.qZA(),a.TgZ(61,"a",4),a.TgZ(62,"mat-icon"),a._uU(63," source "),a.qZA(),a._uU(64," Github"),a.qZA(),a._UZ(65,"mat-divider"),a.TgZ(66,"a",5),a.TgZ(67,"mat-icon"),a._uU(68," https "),a.qZA(),a._uU(69," Demo online"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(70,"div",21),a._UZ(71,"router-outlet"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(72,"footer"),a.TgZ(73,"small"),a._uU(74),a.qZA(),a.qZA()),2&h){const O=a.MAs(39),z=a.MAs(52);a.xp6(1),a.Q6J("mode",a.lcZ(4,15,y.isHandset$)?"over":"side")("opened",!1===a.lcZ(5,17,y.isHandset$)),a.uIk("role",a.lcZ(3,13,y.isHandset$)?"dialog":"navigation"),a.xp6(22),a.hij(" Demos ",y.demoBlocks.length," "),a.xp6(1),a.Q6J("ngForOf",y.demoBlocks),a.xp6(3),a.Q6J("ngIf",a.lcZ(28,19,y.isHandset$)),a.xp6(2),a.s9C("title",y.version),a.xp6(1),a.Oqu(y.title),a.xp6(5),a.Q6J("matMenuTriggerFor",O),a.xp6(13),a.Q6J("matMenuTriggerFor",z),a.xp6(5),a.Q6J("routerLink",a.DdM(21,Po)),a.xp6(4),a.Q6J("routerLink",a.DdM(22,vr)),a.xp6(17),a.Oqu(y.footer)}},directives:[To,Uo,ws,kr,t.yS,Yo,r.Hw,er,Is.ib,Is.yz,Is.yK,x.sg,rs,x.O5,o.lW,Qn.p6,Qn.VK,t.lC],pipes:[x.Ov],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;width:100%}.sidenav-container[_ngcontent-%COMP%]{height:100%}.sidenav[_ngcontent-%COMP%]{width:200px}.sidenav[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{background:inherit}.mat-toolbar.mat-primary[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.main-content[_ngcontent-%COMP%]{height:97%;width:100%}.nav-bar[_ngcontent-%COMP%]{height:3%;width:100%}"]}),S})(),nr=(()=>{class S{constructor(h,y){var O,z;this.titleService=h,this.title="AutoBlocklyApp",console.log(null===(O=y.settings)||void 0===O?void 0:O.title),this.titleService.setTitle((null===(z=y.settings)||void 0===z?void 0:z.title)||"")}}return S.\u0275fac=function(h){return new(h||S)(a.Y36(T.Dx),a.Y36(Vn.d))},S.\u0275cmp=a.Xpm({type:S,selectors:[["app-root"]],decls:1,vars:0,template:function(h,y){1&h&&a._UZ(0,"app-primary-navig")},directives:[Nr],styles:[""]}),S})();var la=v(31887),$s=v(59765),Vi=v(68101);let Se=(()=>{class S{}return S.\u0275fac=function(h){return new(h||S)},S.\u0275mod=a.oAB({type:S}),S.\u0275inj=a.cJS({imports:[[x.ez,k.BQ,b.Q8],k.BQ]}),S})();v(32812),v(96286),v(62615);const Tr={provide:new a.OlP("mat-autocomplete-scroll-strategy"),deps:[Vi.aV],useFactory:function(S){return()=>S.scrollStrategies.reposition()}};let Br=(()=>{class S{}return S.\u0275fac=function(h){return new(h||S)},S.\u0275mod=a.oAB({type:S}),S.\u0275inj=a.cJS({providers:[Tr],imports:[[Vi.U8,k.Ng,k.BQ,x.ez],yt.ZD,k.Ng,k.BQ]}),S})(),Tn=(()=>{class S{}return S.\u0275fac=function(h){return new(h||S)},S.\u0275mod=a.oAB({type:S}),S.\u0275inj=a.cJS({imports:[[p.rt,k.BQ],k.BQ]}),S})(),Ro=(()=>{class S{}return S.\u0275fac=function(h){return new(h||S)},S.\u0275mod=a.oAB({type:S}),S.\u0275inj=a.cJS({imports:[[Vi.U8,k.BQ,I.eL],k.BQ]}),S})(),rr=(()=>{class S{}return S.\u0275fac=function(h){return new(h||S)},S.\u0275mod=a.oAB({type:S}),S.\u0275inj=a.cJS({imports:[[k.BQ,k.si],k.BQ]}),S})(),j=(()=>{class S{}return S.\u0275fac=function(h){return new(h||S)},S.\u0275mod=a.oAB({type:S}),S.\u0275inj=a.cJS({imports:[[k.BQ],k.BQ]}),S})(),cr=(()=>{class S{}return S.\u0275fac=function(h){return new(h||S)},S.\u0275mod=a.oAB({type:S}),S.\u0275inj=a.cJS({}),S})(),Bs=(()=>{class S{}return S.\u0275fac=function(h){return new(h||S)},S.\u0275mod=a.oAB({type:S}),S.\u0275inj=a.cJS({imports:[[k.si,k.BQ,b.Q8,cr],k.BQ,cr]}),S})();const Gc=new a.OlP("mat-chips-default-options"),Ql={separatorKeyCodes:[Tt.K5]};let Hh=(()=>{class S{}return S.\u0275fac=function(h){return new(h||S)},S.\u0275mod=a.oAB({type:S}),S.\u0275inj=a.cJS({providers:[k.rD,{provide:Gc,useValue:Ql}],imports:[[k.BQ]]}),S})(),qa=(()=>{class S{}return S.\u0275fac=function(h){return new(h||S)},S.\u0275mod=a.oAB({type:S}),S.\u0275inj=a.cJS({imports:[[Ct.vT]]}),S})(),Vr=(()=>{class S{constructor(){this.changes=new X.xQ,this.optionalLabel="Optional",this.completedLabel="Completed",this.editableLabel="Editable"}}return S.\u0275fac=function(h){return new(h||S)},S.\u0275prov=a.Yz7({factory:function(){return new S},token:S,providedIn:"root"}),S})();const Jc={provide:Vr,deps:[[new a.FiY,new a.tp0,Vr]],useFactory:function(S){return S||new Vr}};let $c=(()=>{class S{}return S.\u0275fac=function(h){return new(h||S)},S.\u0275mod=a.oAB({type:S}),S.\u0275inj=a.cJS({providers:[Jc,k.rD],imports:[[k.BQ,x.ez,I.eL,o.ot,qa,r.Ps,k.si],k.BQ]}),S})();v(23974),v(64337);let Da=(()=>{class S{}return S.\u0275fac=function(h){return new(h||S)},S.\u0275mod=a.oAB({type:S}),S.\u0275inj=a.cJS({imports:[[nt.ud]]}),S})(),za=(()=>{class S{}return S.\u0275fac=function(h){return new(h||S)},S.\u0275mod=a.oAB({type:S}),S.\u0275inj=a.cJS({providers:[k.rD],imports:[[Da,Se,k.BQ],Da,Se]}),S})(),ci=(()=>{class S{constructor(){this.changes=new X.xQ,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 24 years",this.nextMultiYearLabel="Next 24 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year"}formatYearRange(h,y){return`${h} \u2013 ${y}`}}return S.\u0275fac=function(h){return new(h||S)},S.\u0275prov=a.Yz7({factory:function(){return new S},token:S,providedIn:"root"}),S})();const Wh={provide:new a.OlP("mat-datepicker-scroll-strategy"),deps:[Vi.aV],useFactory:function(S){return()=>S.scrollStrategies.reposition()}};let eu=(()=>{class S{}return S.\u0275fac=function(h){return new(h||S)},S.\u0275mod=a.oAB({type:S}),S.\u0275inj=a.cJS({providers:[ci,Wh],imports:[[x.ez,o.ot,Vi.U8,p.rt,I.eL,k.BQ],yt.ZD]}),S})();function vh(S,N){}class Ac{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus=!0,this.restoreFocus=!0,this.closeOnNavigation=!0}}const Rr={dialogContainer:(0,Rt.X$)("dialogContainer",[(0,Rt.SB)("void, exit",(0,Rt.oB)({opacity:0,transform:"scale(0.7)"})),(0,Rt.SB)("enter",(0,Rt.oB)({transform:"none"})),(0,Rt.eR)("* => enter",(0,Rt.jt)("150ms cubic-bezier(0, 0, 0.2, 1)",(0,Rt.oB)({transform:"none",opacity:1}))),(0,Rt.eR)("* => void, * => exit",(0,Rt.jt)("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",(0,Rt.oB)({opacity:0})))])};let Vu=(()=>{class S extends I.en{constructor(h,y,O,z,Kt,Ae){super(),this._elementRef=h,this._focusTrapFactory=y,this._changeDetectorRef=O,this._config=Kt,this._focusMonitor=Ae,this._animationStateChanged=new a.vpe,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=Qe=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(Qe)),this._ariaLabelledBy=Kt.ariaLabelledBy||null,this._document=z}_initializeWithAttachedContent(){this._setupFocusTrap(),this._capturePreviouslyFocusedElement(),this._focusDialogContainer()}attachComponentPortal(h){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(h)}attachTemplatePortal(h){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(h)}_recaptureFocus(){this._containsFocus()||(!this._config.autoFocus||!this._focusTrap.focusInitialElement())&&this._elementRef.nativeElement.focus()}_trapFocus(){this._config.autoFocus?this._focusTrap.focusInitialElementWhenReady():this._containsFocus()||this._elementRef.nativeElement.focus()}_restoreFocus(){const h=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&h&&"function"==typeof h.focus){const y=(0,nt.ht)(),O=this._elementRef.nativeElement;(!y||y===this._document.body||y===O||O.contains(y))&&(this._focusMonitor?(this._focusMonitor.focusVia(h,this._closeInteractionType),this._closeInteractionType=null):h.focus())}this._focusTrap&&this._focusTrap.destroy()}_setupFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)}_capturePreviouslyFocusedElement(){this._document&&(this._elementFocusedBeforeDialogWasOpened=(0,nt.ht)())}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const h=this._elementRef.nativeElement,y=(0,nt.ht)();return h===y||h.contains(y)}}return S.\u0275fac=function(h){return new(h||S)(a.Y36(a.SBq),a.Y36(p.qV),a.Y36(a.sBO),a.Y36(x.K0,8),a.Y36(Ac),a.Y36(p.tE))},S.\u0275dir=a.lG2({type:S,viewQuery:function(h,y){if(1&h&&a.Gf(I.Pl,7),2&h){let O;a.iGM(O=a.CRH())&&(y._portalOutlet=O.first)}},features:[a.qOj]}),S})(),wd=(()=>{class S extends Vu{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:h,totalTime:y}){"enter"===h?(this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:y})):"exit"===h&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:y}))}_onAnimationStart({toState:h,totalTime:y}){"enter"===h?this._animationStateChanged.next({state:"opening",totalTime:y}):("exit"===h||"void"===h)&&this._animationStateChanged.next({state:"closing",totalTime:y})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}}return S.\u0275fac=function(){let N;return function(y){return(N||(N=a.n5z(S)))(y||S)}}(),S.\u0275cmp=a.Xpm({type:S,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(h,y){1&h&&a.WFA("@dialogContainer.start",function(z){return y._onAnimationStart(z)})("@dialogContainer.done",function(z){return y._onAnimationDone(z)}),2&h&&(a.Ikx("id",y._id),a.uIk("role",y._config.role)("aria-labelledby",y._config.ariaLabel?null:y._ariaLabelledBy)("aria-label",y._config.ariaLabel)("aria-describedby",y._config.ariaDescribedBy||null),a.d8E("@dialogContainer",y._state))},features:[a.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(h,y){1&h&&a.YNc(0,vh,0,0,"ng-template",0)},directives:[I.Pl],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[Rr.dialogContainer]}}),S})(),lc=0;class Uu{constructor(N,h,y="mat-dialog-"+lc++){this._overlayRef=N,this._containerInstance=h,this.id=y,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new X.xQ,this._afterClosed=new X.xQ,this._beforeClosed=new X.xQ,this._state=0,h._id=y,h._animationStateChanged.pipe((0,Li.h)(O=>"opened"===O.state),(0,xn.q)(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),h._animationStateChanged.pipe((0,Li.h)(O=>"closed"===O.state),(0,xn.q)(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),N.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),N.keydownEvents().pipe((0,Li.h)(O=>O.keyCode===Tt.hY&&!this.disableClose&&!(0,Tt.Vb)(O))).subscribe(O=>{O.preventDefault(),nu(this,"keyboard")}),N.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():nu(this,"mouse")})}close(N){this._result=N,this._containerInstance._animationStateChanged.pipe((0,Li.h)(h=>"closing"===h.state),(0,xn.q)(1)).subscribe(h=>{this._beforeClosed.next(N),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),h.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(N){let h=this._getPositionStrategy();return N&&(N.left||N.right)?N.left?h.left(N.left):h.right(N.right):h.centerHorizontally(),N&&(N.top||N.bottom)?N.top?h.top(N.top):h.bottom(N.bottom):h.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(N="",h=""){return this._overlayRef.updateSize({width:N,height:h}),this._overlayRef.updatePosition(),this}addPanelClass(N){return this._overlayRef.addPanelClass(N),this}removePanelClass(N){return this._overlayRef.removePanelClass(N),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function nu(S,N,h){return void 0!==S._containerInstance&&(S._containerInstance._closeInteractionType=N),S.close(h)}const ou=new a.OlP("MatDialogData"),Dd=new a.OlP("mat-dialog-default-options"),sl=new a.OlP("mat-dialog-scroll-strategy"),Id={provide:sl,deps:[Vi.aV],useFactory:function(S){return()=>S.scrollStrategies.block()}};let bh=(()=>{class S{constructor(h,y,O,z,Kt,Ae,Qe,zi,en){this._overlay=h,this._injector=y,this._defaultOptions=O,this._parentDialog=z,this._overlayContainer=Kt,this._dialogRefConstructor=Qe,this._dialogContainerType=zi,this._dialogDataToken=en,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new X.xQ,this._afterOpenedAtThisLevel=new X.xQ,this._ariaHiddenElements=new Map,this.afterAllClosed=(0,$s.P)(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe((0,Dt.O)(void 0))),this._scrollStrategy=Ae}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const h=this._parentDialog;return h?h._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(h,y){(y=function(S,N){return Object.assign(Object.assign({},N),S)}(y,this._defaultOptions||new Ac)).id&&this.getDialogById(y.id);const O=this._createOverlay(y),z=this._attachDialogContainer(O,y),Kt=this._attachDialogContent(h,z,O,y);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(Kt),Kt.afterClosed().subscribe(()=>this._removeOpenDialog(Kt)),this.afterOpened.next(Kt),z._initializeWithAttachedContent(),Kt}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(h){return this.openDialogs.find(y=>y.id===h)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(h){const y=this._getOverlayConfig(h);return this._overlay.create(y)}_getOverlayConfig(h){const y=new Vi.X_({positionStrategy:this._overlay.position().global(),scrollStrategy:h.scrollStrategy||this._scrollStrategy(),panelClass:h.panelClass,hasBackdrop:h.hasBackdrop,direction:h.direction,minWidth:h.minWidth,minHeight:h.minHeight,maxWidth:h.maxWidth,maxHeight:h.maxHeight,disposeOnNavigation:h.closeOnNavigation});return h.backdropClass&&(y.backdropClass=h.backdropClass),y}_attachDialogContainer(h,y){const z=a.zs3.create({parent:y&&y.viewContainerRef&&y.viewContainerRef.injector||this._injector,providers:[{provide:Ac,useValue:y}]}),Kt=new I.C5(this._dialogContainerType,y.viewContainerRef,z,y.componentFactoryResolver);return h.attach(Kt).instance}_attachDialogContent(h,y,O,z){const Kt=new this._dialogRefConstructor(O,y,z.id);if(h instanceof a.Rgc)y.attachTemplatePortal(new I.UE(h,null,{$implicit:z.data,dialogRef:Kt}));else{const Ae=this._createInjector(z,Kt,y),Qe=y.attachComponentPortal(new I.C5(h,z.viewContainerRef,Ae));Kt.componentInstance=Qe.instance}return Kt.updateSize(z.width,z.height).updatePosition(z.position),Kt}_createInjector(h,y,O){const z=h&&h.viewContainerRef&&h.viewContainerRef.injector,Kt=[{provide:this._dialogContainerType,useValue:O},{provide:this._dialogDataToken,useValue:h.data},{provide:this._dialogRefConstructor,useValue:y}];return h.direction&&(!z||!z.get(Ct.Is,null,a.XFs.Optional))&&Kt.push({provide:Ct.Is,useValue:{value:h.direction,change:(0,wt.of)()}}),a.zs3.create({parent:z||this._injector,providers:Kt})}_removeOpenDialog(h){const y=this.openDialogs.indexOf(h);y>-1&&(this.openDialogs.splice(y,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((O,z)=>{O?z.setAttribute("aria-hidden",O):z.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const h=this._overlayContainer.getContainerElement();if(h.parentElement){const y=h.parentElement.children;for(let O=y.length-1;O>-1;O--){let z=y[O];z!==h&&"SCRIPT"!==z.nodeName&&"STYLE"!==z.nodeName&&!z.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(z,z.getAttribute("aria-hidden")),z.setAttribute("aria-hidden","true"))}}}_closeDialogs(h){let y=h.length;for(;y--;)h[y].close()}}return S.\u0275fac=function(h){return new(h||S)(a.Y36(Vi.aV),a.Y36(a.zs3),a.Y36(void 0),a.Y36(void 0),a.Y36(Vi.Xj),a.Y36(void 0),a.Y36(a.DyG),a.Y36(a.DyG),a.Y36(a.OlP))},S.\u0275dir=a.lG2({type:S}),S})(),Oc=(()=>{class S extends bh{constructor(h,y,O,z,Kt,Ae,Qe){super(h,y,z,Ae,Qe,Kt,Uu,wd,ou)}}return S.\u0275fac=function(h){return new(h||S)(a.LFG(Vi.aV),a.LFG(a.zs3),a.LFG(x.Ye,8),a.LFG(Dd,8),a.LFG(sl),a.LFG(S,12),a.LFG(Vi.Xj))},S.\u0275prov=a.Yz7({token:S,factory:S.\u0275fac}),S})(),cc=(()=>{class S{}return S.\u0275fac=function(h){return new(h||S)},S.\u0275mod=a.oAB({type:S}),S.\u0275inj=a.cJS({providers:[Oc,Id],imports:[[Vi.U8,I.eL,k.BQ],k.BQ]}),S})();var Od=v(74026);const ju={provide:new a.OlP("mat-select-scroll-strategy"),deps:[Vi.aV],useFactory:function(S){return()=>S.scrollStrategies.reposition()}};let wr=(()=>{class S{}return S.\u0275fac=function(h){return new(h||S)},S.\u0275mod=a.oAB({type:S}),S.\u0275inj=a.cJS({providers:[ju],imports:[[x.ez,Vi.U8,k.Ng,k.BQ],yt.ZD,Se,k.Ng,k.BQ]}),S})();const ue={provide:new a.OlP("mat-tooltip-scroll-strategy"),deps:[Vi.aV],useFactory:function(S){return()=>S.scrollStrategies.reposition({scrollThrottle:20})}};let xi=(()=>{class S{}return S.\u0275fac=function(h){return new(h||S)},S.\u0275mod=a.oAB({type:S}),S.\u0275inj=a.cJS({providers:[ue],imports:[[p.rt,x.ez,Vi.U8,k.BQ],k.BQ,yt.ZD]}),S})(),yo=(()=>{class S{constructor(){this.changes=new X.xQ,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(h,y,O)=>{if(0==O||0==y)return`0 of ${O}`;const z=h*y;return`${z+1} \u2013 ${z<(O=Math.max(O,0))?Math.min(z+y,O):z+y} of ${O}`}}}return S.\u0275fac=function(h){return new(h||S)},S.\u0275prov=a.Yz7({factory:function(){return new S},token:S,providedIn:"root"}),S})();const Dr={provide:yo,deps:[[new a.FiY,new a.tp0,yo]],useFactory:function(S){return S||new yo}};let ma=(()=>{class S{}return S.\u0275fac=function(h){return new(h||S)},S.\u0275mod=a.oAB({type:S}),S.\u0275inj=a.cJS({providers:[Dr],imports:[[x.ez,o.ot,wr,xi,k.BQ]]}),S})(),_p=(()=>{class S{}return S.\u0275fac=function(h){return new(h||S)},S.\u0275mod=a.oAB({type:S}),S.\u0275inj=a.cJS({imports:[[x.ez,k.BQ],k.BQ]}),S})();var yf=v(65434);let wf=(()=>{class S{}return S.\u0275fac=function(h){return new(h||S)},S.\u0275mod=a.oAB({type:S}),S.\u0275inj=a.cJS({imports:[[k.si,k.BQ],k.BQ]}),S})(),nd=(()=>{class S{}return S.\u0275fac=function(h){return new(h||S)},S.\u0275mod=a.oAB({type:S}),S.\u0275inj=a.cJS({imports:[[x.ez,k.BQ],k.BQ]}),S})(),Ip=(()=>{class S{}return S.\u0275fac=function(h){return new(h||S)},S.\u0275mod=a.oAB({type:S}),S.\u0275inj=a.cJS({}),S})(),Rg=(()=>{class S{}return S.\u0275fac=function(h){return new(h||S)},S.\u0275mod=a.oAB({type:S}),S.\u0275inj=a.cJS({imports:[[Ip,k.si,k.BQ,b.Q8],Ip,k.BQ]}),S})();var Wd=v(45491);let jd=(()=>{class S{constructor(){this.changes=new X.xQ}}return S.\u0275fac=function(h){return new(h||S)},S.\u0275prov=a.Yz7({factory:function(){return new S},token:S,providedIn:"root"}),S})();const Ku={provide:jd,deps:[[new a.FiY,new a.tp0,jd]],useFactory:function(S){return S||new jd}};let Yd=(()=>{class S{}return S.\u0275fac=function(h){return new(h||S)},S.\u0275mod=a.oAB({type:S}),S.\u0275inj=a.cJS({providers:[Ku],imports:[[x.ez,k.BQ]]}),S})();v(72850),v(29923),v(15648);let Hg=(()=>{class S{}return S.\u0275fac=function(h){return new(h||S)},S.\u0275mod=a.oAB({type:S}),S.\u0275inj=a.cJS({imports:[[yt.Cl]]}),S})(),La=(()=>{class S{}return S.\u0275fac=function(h){return new(h||S)},S.\u0275mod=a.oAB({type:S}),S.\u0275inj=a.cJS({imports:[[Hg,k.BQ],k.BQ]}),S})(),Qi=(()=>{class S{}return S.\u0275fac=function(h){return new(h||S)},S.\u0275mod=a.oAB({type:S}),S.\u0275inj=a.cJS({}),S})(),vo=(()=>{class S{}return S.\u0275fac=function(h){return new(h||S)},S.\u0275mod=a.oAB({type:S}),S.\u0275inj=a.cJS({imports:[[Qi,k.BQ],k.BQ]}),S})();var Bi=v(30142);let mn=(()=>{class S{}return S.\u0275fac=function(h){return new(h||S)},S.\u0275mod=a.oAB({type:S,bootstrap:[nr]}),S.\u0275inj=a.cJS({providers:[Vn.d,ro.v,{provide:a.ip1,useFactory:ts,deps:[Vn.d],multi:!0}],imports:[[T.b2,so,e.u5,Y.PW,nd,o.ot,la.JF,Br,Tn,Ro,o.ot,rr,j,Bs,Hh,$c,eu,cc,Or,Is.To,Od.N6,r.Ps,za,ho,Qn.Tx,k.XK,ma,_p,yf.Cq,wf,k.si,wr,On,nd,Rg,Wd.ZX,Yd,La,Me,Oo,xi,vo,Oo,o.ot,On,r.Ps,ho,Bi.nm.forRoot()]]}),S})();function ts(S){return()=>S.Init()}(0,a.G48)(),T.q6().bootstrapModule(mn).catch(S=>console.error(S))},39855:(B,U,v)=>{B.exports={interpreterHelper:v(44212),saveBlocksUrl:v(70200),saveLoad:v(98288)}},44212:(B,U,v)=>{const T=v(9642);U.createInterpreter=function(a,e){return{latestCode:"",workspace:a,BlocklyJavaScript:e,step:0,highlightPause:!1,myInterpreter:null,runner:null,generateCodeAndLoadIntoInterpreter:function(){this.BlocklyJavaScript.STATEMENT_PREFIX="highlightBlock(%1);\n",this.BlocklyJavaScript.addReservedWords("highlightBlock"),this.latestCode=this.BlocklyJavaScript.workspaceToCode(a),this.resetStepUi(!0)},resetStepUi:function(t){this.step=0,this.workspace.highlightBlock(null),this.highlightPause=!1},resetInterpreter:function(){this.myInterpreter=null,this.runner&&(window.clearTimeout(this.runner),this.runner=null)},highlightBlock:function(t){this.workspace.highlightBlock(t),highlightPause=!0},nextStep:function(t,n){console.log("next step"),t.myInterpreter.step()?setTimeout((o,r)=>{o.nextStep(o,r)},10,t,n):(n?n():console.log("\n\n<< Program complete >>"),t.resetInterpreter(),t.resetStepUi(!1))},runCode:function(t,n,o,r){""==r&&(r=this.latestCode),this.myInterpreter||this.resetStepUi(!0),this.generateCodeAndLoadIntoInterpreter();var p=this;p.myInterpreter=t(r,(b,I)=>p.initApiJS(b,I,p,n,o)),1!=window.runOneByOne?setTimeout(function(){this.highlightPause=!1,p.runner=function(){p.myInterpreter&&(p.myInterpreter.run()?setTimeout(p.runner,10):(o?o():console.log("\n\n<< Program complete >>"),p.resetInterpreter(),p.resetStepUi(!1)))},p.runner&&p.runner()},100):this.nextStep(p,o)},initInterpreterWaitForSeconds:function(t,n){this.BlocklyJavaScript.addReservedWords("waitForSeconds");var o=t.createAsyncFunction(function(r,p){setTimeout(p,1e3*r)});t.setProperty(n,"waitForSeconds",o)},getCreds:function(t,n,o){var r=t.pseudoToNative(n),p="(localSite)";(o.startsWith("http://")||o.startsWith("https://"))&&(p=new URL(o).hostname);var b=!1;return p in r?b=r[p]:"*"in r&&(b=r["*"]),b},getHeaders:function(t,n,o){var r=t.pseudoToNative(n),p="(localSite)";(o.startsWith("http://")||o.startsWith("https://"))&&(p=new URL(o).hostname);var b=[];return p in r?b=r[p]:"*"in r&&(b=r["*"]),b},doGet:function(t,n,o,r){let p=new XMLHttpRequest;p.open("GET",t,!0),this.generateDataAndCreds(p,o,r,!1),p.onreadystatechange=function(){if(4==p.readyState){if(p.status>=200&&p.status<300){var b=JSON.stringify({origHref:t,objectToSend:"",status:p.status,statusOK:!0,text:p.responseText});return n(b)}return b=JSON.stringify({origHref:t,objectToSend:"",status:p.status,statusOK:!1,text:p.responseText,headers:p.getAllResponseHeaders()}),n(b)}},p.send(null)},exportToFile:function(t,n,o){var p,r=v(74694);return p=o?this.b64toBlob(n):new Blob([n],{type:"text/plain;charset=utf-8"}),r.saveAs(p,t),t},b64toBlob:function(t,n="",o=512){const r=atob(t),p=[];for(let I=0;I<r.length;I+=o){const x=r.slice(I,I+o),k=new Array(x.length);for(let X=0;X<x.length;X++)k[X]=x.charCodeAt(X);const Y=new Uint8Array(k);p.push(Y)}return new Blob(p,{type:n})},displayDateCurrentAsHuman:function(){return(new Date).toLocaleDateString(void 0,{day:"numeric",month:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})},displayDateCurrentAsIso:function(){return(new Date).toISOString()},displayDateCurrentAsUnix:function(){return Date.now()},displayDateFormatted:function(t){switch(t){case"human":return this.displayDateCurrentAsHuman();case"iso":return this.displayDateCurrentAsIso();case"unix":return this.displayDateCurrentAsUnix();default:console.log("Date time format not suported")}},generateDataAndCreds(t,n,o,r){if(o)t.withCredentials=o;else{var p=!1;if(n&&n.length>0)for(var b=0;b<n.length;b++){var I=n[b];"Content-Type"==I.name&&(p=!0),t.setRequestHeader(I.name,I.value)}r&&!p&&t.setRequestHeader("Content-Type","application/json;charset=UTF-8")}},doPut:(t,n,o,r,p)=>{let b=n,I=new XMLHttpRequest;I.open("PUT",t,!0),this.generateDataAndCreds(I,r,p,!!n),I.onreadystatechange=function(){if(4==I.readyState){if(I.status>=200&&I.status<300){var x=JSON.stringify({origHref:t,objectToSend:n,status:I.status,statusOK:!0,text:I.responseText});return o(x)}return x=JSON.stringify({origHref:t,objectToSend:n,status:I.status,statusOK:!1,text:I.responseText,objectToSend:n,headers:I.getAllResponseHeaders()}),o(x)}},I.send(b)},doDelete:function(t,n,o,r,p){let b=n;var I=new XMLHttpRequest;I.open("DELETE",t,!0),this.generateDataAndCreds(I,r,p,!!n),I.onreadystatechange=function(){if(4==I.readyState){if(I.status>=200&&I.status<300){var x=JSON.stringify({origHref:t,objectToSend:"",status:I.status,statusOK:!0,text:I.responseText});return o(x)}return x=JSON.stringify({origHref:t,objectToSend:"",status:I.status,statusOK:!1,text:I.responseText,objectToSend:n,headers:I.getAllResponseHeaders()}),o(x)}},I.send(b)},doPost:function(t,n,o,r,p){let b=n,I=new XMLHttpRequest;I.open("POST",t,!0),this.generateDataAndCreds(I,r,p,!!n),I.onreadystatechange=function(){if(4==I.readyState){if(I.status>=200&&I.status<300){var x=JSON.stringify({origHref:t,objectToSend:n,status:I.status,statusOK:!0,text:I.responseText});return o(x)}return x=JSON.stringify({origHref:t,objectToSend:n,status:I.status,statusOK:!1,text:I.responseText,objectToSend:n,headers:I.getAllResponseHeaders()}),o(x)}},I.send(b)},initApiJS:function(t,n,o,r,p){t.setProperty(n,"errHandler",t.createNativeFunction(b=k=>{r?r("\n error --\n"+k+"\n error --"):console.log(k)}));var I=t.nativeToPseudo({"(localSite)":!1});t.setProperty(n,"withCredsForDomain",I);var x=t.nativeToPseudo({"(localSite)":[]});t.setProperty(n,"headersForDomain",x),t.setProperty(n,"alert1",t.createNativeFunction(b=function(k){k=k?k.toString():"",window.alert(k)})),t.setProperty(n,"playPiano",t.createNativeFunction(b=function(k,Y,X){T.Synth.createInstrument("piano").play(k,Y,X)})),t.setProperty(n,"startDebugger",t.createNativeFunction(b=function(k,Y,X){o.highlightBlock(Y),console.log(k,Y,X)})),t.setProperty(n,"alert",t.createNativeFunction(b=function(k){k=k?k.toString():"",r?r(k):console.log(k)})),t.setProperty(n,"waitTime",t.createAsyncFunction(b=(k,Y)=>{console.log(`waiting seconds ${k}`),setTimeout(Y,1e3*k)})),t.setProperty(n,"displayDateFormatted",t.createNativeFunction(b=k=>o.displayDateFormatted(k))),t.setProperty(n,"exportToFile",t.createNativeFunction(b=(k,Y,X)=>o.exportToFile(k,Y,X))),t.setProperty(n,"convertToCSV",t.createNativeFunction(b=k=>{let Y="object"!=typeof k?JSON.parse(k):{};return Y=[Object.keys(Y[0])].concat(Y),Y.map(it=>Object.values(it).toString()).join("\n")})),t.setProperty(n,"open",t.createNativeFunction(b=function(k){window.open(k,"_blank")})),t.setProperty(n,"changeHost",t.createNativeFunction(b=function(k,Y){if(0==(Y=(Y=Y?Y.toString():"").trim()).length)return k;if(0==(k=(k=k||"").trim()).length&&!(k=Y).startsWith("http"))throw`please put in front of ${Y} http:// or https://`;(k=new URL(k)).hostname=Y.replace("https://","").replace("http://","");var X=k.href;return X.endsWith("/")&&(X=X.substring(0,X.length-1)),X})),t.setProperty(n,"changePort",t.createNativeFunction(b=function(k,Y){k=new URL(k),console.log(`url ${k.href}`),k.port=Y,console.log(`url ${k.href}`);var X=k.href;return X.endsWith("/")&&(X=X.substring(0,X.length-1)),X})),t.setProperty(n,"speakDefault",t.createNativeFunction(b=function(k,Y,X,it,rt){var ct=new SpeechSynthesisUtterance(k);window.speechSynthesis.speak(ct)}));var b=function(k){return k=k?k.toString():"",t.createPrimitive(prompt(k))};t.setProperty(n,"prompt",t.createNativeFunction(b)),o.BlocklyJavaScript.addReservedWords("waitForSeconds"),b=t.createAsyncFunction(function(k,Y){setTimeout(Y,1e3*k)}),t.setProperty(n,"waitForSeconds",b),t.setProperty(n,"getXhr",t.createAsyncFunction(b=(k,Y)=>{var X=o.getHeaders(t,x,k),it=o.getCreds(t,I,k);return o.doGet(k,Y,X,it)})),t.setProperty(n,"postXhr",t.createAsyncFunction(b=(k,Y,X)=>{try{var it=o.getHeaders(t,x,k),rt=o.getCreds(t,I,k);o.doPost(k,Y,X,it,rt)}catch(ct){alert("is an error"+ct)}})),t.setProperty(n,"deleteXhr",t.createAsyncFunction(b=(k,Y,X)=>{try{var it=o.getHeaders(t,x,k),rt=o.getCreds(t,I,k);o.doDelete(k,Y,X,it,rt)}catch(ct){alert("is an error"+ct)}})),b=(k,Y,X)=>{try{var it=t.pseudoToNative(x),rt="(localSite)";(k.startsWith("http://")||k.startsWith("https://"))&&(rt=new URL(k).hostname);var ct=[];rt in it&&(ct=it[rt]),o.doPut(k,Y,X,ct,!1)}catch(At){alert("is an error"+At)}},t.setProperty(n,"putXhr",t.createAsyncFunction(b)),b=function(k){return k=k?k.toString():"",t.createPrimitive(o.highlightBlock(k))},t.setProperty(n,"highlightBlock",t.createNativeFunction(b))}}}},9642:(B,U,v)=>{"use strict";var T,a,e;v.r(U),v.d(U,{Synth:()=>T}),function(){var t=window.URL||window.webkitURL,n=window.Blob;if(!t||!n)throw new Error("This browser does not support AudioSynth");var o=!1,r=null,p=function(Y,X){return[new Uint8Array([X,X>>8]),new Uint8Array([X,X>>8,X>>16,X>>24])][Y]},b=function(Y,X,it,rt){Object.defineProperty(this,Y,{value:X,writable:!!it,enumerable:!!rt})},I=function(Y,X,it){b.call(this,Y,X,it,!0)},x=b.bind((e=function(){this.__init__.apply(this,arguments)}).prototype),k=I.bind(e.prototype);x("__init__",function(Y,X,it){if(!o)throw new Error("AudioSynthInstrument can only be instantiated from the createInstrument method of the AudioSynth object.");b.call(this,"_parent",Y),I.call(this,"name",X),b.call(this,"_soundID",it)}),k("play",function(Y,X,it){return this._parent.play(this._soundID,Y,X,it)}),k("generate",function(Y,X,it){return this._parent.generate(this._soundID,Y,X,it)}),x=b.bind((a=function Y(){return r instanceof Y?r:(this.__init__(),this)}).prototype),k=I.bind(a.prototype),x("_debug",!1,!0),x("_bitsPerSample",16),x("_channels",1),x("_sampleRate",44100,!0),k("setSampleRate",function(Y){return this._sampleRate=Math.max(Math.min(0|Y,44100),4e3),this._clearCache(),this._sampleRate}),k("getSampleRate",function(){return this._sampleRate}),x("_volume",32768,!0),k("setVolume",function(Y){return Y=parseFloat(Y),isNaN(Y)&&(Y=0),Y=Math.round(32768*Y),this._volume=Math.max(Math.min(0|Y,32768),0),this._clearCache(),this._volume}),k("getVolume",function(){return Math.round(this._volume/32768*1e4)/1e4}),x("_notes",{C:261.63,"C#":277.18,D:293.66,"D#":311.13,E:329.63,F:349.23,"F#":369.99,G:392,"G#":415.3,A:440,"A#":466.16,B:493.88}),x("_fileCache",[],!0),x("_temp",{},!0),x("_sounds",[],!0),x("_mod",[function(Y,X,it,rt){return Math.sin(2*Math.PI*(Y/X)*it+rt)}]),x("_resizeCache",function(){for(var Y=this._fileCache,X=this._sounds.length;Y.length<X;){for(var it=[],rt=0;rt<8;rt++){var ct={};for(var wt in this._notes)ct[wt]={};it.push(ct)}Y.push(it)}}),x("_clearCache",function(){this._fileCache=[],this._resizeCache()}),k("generate",function(Y,X,it,rt){var ct=this._sounds[Y];if(!ct)for(var wt=0;wt<this._sounds.length;wt++)if(this._sounds[wt].name==Y){ct=this._sounds[wt],Y=wt;break}if(!ct)throw new Error("Invalid sound or sound ID: "+Y);var At=(new Date).valueOf();this._temp={},it|=0,it=Math.min(8,Math.max(1,it));var Rt=rt?parseFloat(rt):2;if(void 0===this._notes[X])throw new Error(X+" is not a valid note.");if(void 0!==this._fileCache[Y][it-1][X][Rt])return this._debug&&console.log((new Date).valueOf()-At,"ms to retrieve (cached)"),this._fileCache[Y][it-1][X][Rt];var Dt=this._notes[X]*Math.pow(2,it-4),pt=this._sampleRate,st=this._volume,ot=this._channels,nt=this._bitsPerSample,Tt=ct.attack(pt,Dt,st),Ct=ct.dampen(pt,Dt,st),yt=ct.wave,gt={modulate:this._mod,vars:this._temp},_t=0,Pt=new Uint8Array(new ArrayBuffer(Math.ceil(pt*Rt*2))),oe=pt*Tt|0,Ne=pt*Rt|0;for(wt=0;wt!==oe;wt++)_t=st*(wt/(pt*Tt))*yt.call(gt,wt,pt,Dt,st),Pt[wt<<1]=_t,Pt[1+(wt<<1)]=_t>>8;for(;wt!==Ne;wt++)_t=st*Math.pow(1-(wt-pt*Tt)/(pt*(Rt-Tt)),Ct)*yt.call(gt,wt,pt,Dt,st),Pt[wt<<1]=_t,Pt[1+(wt<<1)]=_t>>8;var Xe=["RIFF",p(1,52),"WAVE","fmt ",p(1,16),p(0,1),p(0,ot),p(1,pt),p(1,pt*ot*nt/8),p(0,ot*nt/8),p(0,nt),"data",p(1,Pt.length*ot*nt/8),Pt],Ce=new n(Xe,{type:"audio/wav"}),Ze=t.createObjectURL(Ce);return this._fileCache[Y][it-1][X][Rt]=Ze,this._debug&&console.log((new Date).valueOf()-At,"ms to generate"),Ze}),k("play",function(Y,X,it,rt){var ct=this.generate(Y,X,it,rt);return new Audio(ct).play(),!0}),k("debug",function(){this._debug=!0}),k("createInstrument",function(Y){var X=0,it=!1;if("string"==typeof Y){for(var rt=0;rt<this._sounds.length;rt++)if(this._sounds[rt].name==Y){it=!0,X=rt;break}}else this._sounds[Y]&&(Y=this._sounds[X=Y].name,it=!0);if(!it)throw new Error("Invalid sound or sound ID: "+Y);o=!0;var ct=new e(this,Y,X);return o=!1,ct}),k("listSounds",function(){for(var Y=[],X=0;X<this._sounds.length;X++)Y.push(this._sounds[X].name);return Y}),x("__init__",function(){this._resizeCache()}),k("loadSoundProfile",function(){for(var Y=0,X=arguments.length;Y<X;Y++){var it=arguments[Y];if(!(it instanceof Object))throw new Error("Invalid sound profile.");this._sounds.push(it)}return this._resizeCache(),!0}),k("loadModulationFunction",function(){for(var Y=0,X=arguments.length;Y<X;Y++){var it=arguments[Y];if("function"!=typeof it)throw new Error("Invalid modulation function.");this._mod.push(it)}return!0}),r=new a,T=r}(),T.loadModulationFunction(function(t,n,o,r){return 1*Math.sin(2*Math.PI*(t/n*o)+r)},function(t,n,o,r){return 1*Math.sin(4*Math.PI*(t/n*o)+r)},function(t,n,o,r){return 1*Math.sin(8*Math.PI*(t/n*o)+r)},function(t,n,o,r){return 1*Math.sin(.5*Math.PI*(t/n*o)+r)},function(t,n,o,r){return 1*Math.sin(.25*Math.PI*(t/n*o)+r)},function(t,n,o,r){return.5*Math.sin(2*Math.PI*(t/n*o)+r)},function(t,n,o,r){return.5*Math.sin(4*Math.PI*(t/n*o)+r)},function(t,n,o,r){return.5*Math.sin(8*Math.PI*(t/n*o)+r)},function(t,n,o,r){return.5*Math.sin(.5*Math.PI*(t/n*o)+r)},function(t,n,o,r){return.5*Math.sin(.25*Math.PI*(t/n*o)+r)}),T.loadSoundProfile({name:"piano",attack:function(){return.002},dampen:function(t,n,o){return Math.pow(.5*Math.log(n*o/t),2)},wave:function(t,n,o,r){var p=this.modulate[0];return this.modulate[1](t,n,o,Math.pow(p(t,n,o,0),2)+.75*p(t,n,o,.25)+.1*p(t,n,o,.5))}},{name:"organ",attack:function(){return.3},dampen:function(t,n){return 1+.01*n},wave:function(t,n,o){var r=this.modulate[0];return this.modulate[1](t,n,o,r(t,n,o,0)+.5*r(t,n,o,.25)+.25*r(t,n,o,.5))}},{name:"acoustic",attack:function(){return.002},dampen:function(){return 1},wave:function(t,n,o){var r=this.vars;r.valueTable=r.valueTable?r.valueTable:[],void 0===r.playVal&&(r.playVal=0),void 0===r.periodCount&&(r.periodCount=0);var p=r.valueTable,b=r.playVal,I=r.periodCount,x=n/o,k=Math.floor(100*(x-Math.floor(x))),Y=!1;if(p.length<=Math.ceil(x))return p.push(2*Math.round(Math.random())-1),p[p.length-1];p[b]=.5*(p[b>=p.length-1?0:b+1]+p[b]),b>=Math.floor(x)&&(b<Math.ceil(x)?I%100>=k&&(Y=!0,p[b+1]=.5*(p[0]+p[b+1]),r.periodCount++):Y=!0);var X=p[b];return Y?r.playVal=0:r.playVal++,X}},{name:"edm",attack:function(){return.002},dampen:function(){return 1},wave:function(t,n,o){var r=this.modulate[0],p=this.modulate.slice(1);return p[0](t,n,o,p[9](t,n,o,p[2](t,n,o,Math.pow(r(t,n,o,0),3)+Math.pow(r(t,n,o,.5),5)+Math.pow(r(t,n,o,1),7)))+p[8](t,n,o,r(t,n,o,1.75)))}})},70200:(B,U)=>{U.saveState=function(a,e,t){var n="BlocklyState"+(t||""),o=a.workspaceToDom(e,!0),r=a.domToPrettyText(o);window.localStorage.setItem(n,r)},U.restoreState=function(a,e,t){var o=window.localStorage.getItem("BlocklyState"+(t||""));if((null==o?void 0:o.length)>62){var r=a.textToDom(o);a.clearWorkspaceAndLoadFromXml(r,e)}return""}},98288:(B,U,v)=>{var T=v(74694);U.DownloadBlocks=function(a,e,t){var n=a.workspaceToDom(e,!0),o=a.domToPrettyText(n),r=new Blob([o],{type:"text/plain;charset=utf-16"});T.saveAs(r,t)},U.LoadFile=function(a,e,t){e.clear();var n=a.textToDom(t);a.domToWorkspace(n,e)}},64408:(B,U,v)=>{const T=v(9371);U.definitionBlocks=function(a,e){a.HTMLheaders={init:function(){this.appendValueInput("NAME").setCheck(null).appendField("Header").appendField(new T.FieldDropdown([["H1","H1"],["H2","H2"],["H3","H3"]]),"NAME"),this.setOutput(!0,null),this.setColour(240),this.setTooltip("string to Header "),this.setHelpUrl("")}},e.HTMLheaders=function(t){var n=t.getFieldValue("NAME");return[`'<${n}>'+ ${e.valueToCode(t,"NAME",e.ORDER_ATOMIC)} + '</${n}>'`,e.ORDER_NONE]},a.HTMLlist={init:function(){this.appendDummyInput().appendField("List ").appendField(new T.FieldDropdown([["OL","ol"],["UL","ul"]]),"listType"),this.appendStatementInput("Content").setCheck(null),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(240),this.setTooltip("list - please add li block "),this.setHelpUrl("")}},e.HTMLlist=function(t){var n=t.getFieldValue("listType");return e.valueToCode(t,"ListType",e.ORDER_ATOMIC),`window.alert('<${n}>');\n;${e.statementToCode(t,"Content")};\n;window.alert('</${n}>');\n`},a.HTMLli={init:function(){this.appendValueInput("NAME").setCheck(null).appendField("LI"),this.setOutput(!0,null),this.setColour(240),this.setTooltip("string to LI"),this.setHelpUrl("")}},e.HTMLli=function(t){return[`'<li>'+ ${e.valueToCode(t,"NAME",e.ORDER_ATOMIC)} + '</li>'`,e.ORDER_NONE]}},U.fieldXML=function(){return'\n    <block type=\'text_print\'>" \n               <value name=\'TEXT\'>" \n                 \n    <block type="HTMLheaders">\n        <value name="NAME">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n    </block>    \n      </value>\n\n\n      </block>\n        \n<block type="HTMLlist"></block>\n\n<block type=\'text_print\'>" \n<value name=\'TEXT\'>" \n  \n<block type="HTMLli">\n<value name="NAME">\n<shadow type="text">\n <field name="TEXT"></field>\n</shadow>\n</value>\n</block>    \n</value>\n\n\n</block>\n\n\n'}},87268:(B,U,v)=>{v(9371),U.definitionBlocks=function(a,e){a.ttsBlock={init:function(){this.appendValueInput("NAME").setCheck(null).appendField("Voice"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},e.ttsBlock=function(t){return"speakDefault("+e.valueToCode(t,"NAME",e.ORDER_ATOMIC)+");\n"}},U.fieldXML=function(){return'<block type="ttsBlock">\n        <value name="NAME">\n            <shadow type="text">\n            <field name="TEXT">Hello</field></shadow>\n        </value>       \n        </block>\n'}},99848:(B,U)=>{U.definitionBlocks=function(v,T){v.credsforhttp={init:function(){this.appendDummyInput().appendField("Http with Creds"),this.appendValueInput("HttpDomain").setCheck("String").appendField("Domain"),this.appendValueInput("WithCreds").setCheck("Boolean").appendField("With Creds ?"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},T.credsforhttp=function(t){return"withCredsForDomain["+(T.valueToCode(t,"HttpDomain",0)||"(localSite)")+"]="+T.valueToCode(t,"WithCreds",0)+";\n"}},U.fieldXML=function(){return'<block type="credsforhttp">\n    <value name="HttpDomain">\n        <shadow type="text">\n            <field name="TEXT">(localSite)</field>\n        </shadow>\n    </value>\n    <value name="WithCreds">\n        <shadow type="logic_boolean">\n            <field name="BOOL">FALSE</field>\n        </shadow>\n    </value>\n</block>\n'}},10650:(B,U)=>{U.definitionBlocks=function(v,T){v.auth0webapidata={init:function(){this.appendDummyInput().appendField("Auth0"),this.appendValueInput("client_id").setCheck(null).appendField("client_id"),this.appendValueInput("client_secret").setCheck(null).appendField("client_secret"),this.appendValueInput("audience").setCheck(null).appendField("audience"),this.appendValueInput("grant_type").setCheck(null).appendField("grant_type"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},T.auth0webapidata=function(t){var b='{"client_id":'+T.valueToCode(t,"client_id",0);return b+=',"client_secret":'+T.valueToCode(t,"client_secret",0),b+=',"audience":'+T.valueToCode(t,"audience",0),b+=',"grant_type":'+T.valueToCode(t,"grant_type",0),[b+="}",99]}},U.fieldXML=function(){return'<category id="Auth0" name="Auth0">\n    <block type="auth0webapidata">\n        <value name="client_id">\n            <shadow type="text">\n                <field name="TEXT">client_id?</field>\n            </shadow>\n\n        </value>\n        <value name="client_secret">\n            <shadow type="text">\n                <field name="TEXT">client_secret?</field>\n            </shadow>\n\n        </value>\n        <value name="audience">\n            <shadow type="text">\n                <field name="TEXT">audience</field>\n            </shadow>\n\n        </value>\n        <value name="grant_type">\n            <shadow type="text">\n                <field name="TEXT">grant_type?</field>\n            </shadow>\n\n        </value>\n    </block>\n</category>\n'}},80681:(B,U,v)=>{const T=v(9371);U.definitionBlocks=function(a,e){a.chart_js={init:function(){this.appendDummyInput().appendField("ChartType").appendField(new T.FieldDropdown([["HBar","HBar"],["VBar","VBar"]]),"ChartTypeValue"),this.appendValueInput("ChartTitleValue").setCheck(null).appendField(new T.FieldLabelSerializable("Title"),"ChartTitle"),this.appendValueInput("LabelsValue").setCheck("Array").appendField(new T.FieldLabelSerializable("Labels"),"ChartLabels"),this.appendValueInput("DataSet1Label").setCheck("String").appendField(new T.FieldLabelSerializable("DataSet1 Label"),"DataSetLabel1"),this.appendValueInput("DataSet1Data").setCheck("Array").appendField(new T.FieldLabelSerializable("DataSet1 Data"),"DataSetData1"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},e.chart_js=function(t){var n=t.getFieldValue("ChartTypeValue"),r=(e.valueToCode(t,"ChartTitleValue",e.ORDER_ATOMIC),e.valueToCode(t,"LabelsValue",e.ORDER_ATOMIC)),p=e.valueToCode(t,"DataSet1Label",e.ORDER_ATOMIC),b=e.valueToCode(t,"DataSet1Data",e.ORDER_ATOMIC),I="",x="x";switch(n){case"HBar":I="bar",x="y";break;case"VBar":I="bar";break;default:throw"Unknown chart type:"+n}return[`JSON.stringify({ 'type': '${I}', 'options':{ 'indexAxis':'${x}'},  'data': {  'labels': ${r}, 'datasets': [{ 'backgroundColor': ['green','blue'],'label': ${p}, 'data': ${b} }] } })`,e.ORDER_NONE]}},U.fieldXML=function(){return'<block type="chart_js"></block>'}},31439:(B,U)=>{U.definitionBlocks=function(v,T){v.comment={init:function(){this.appendValueInput("TEXT").setCheck(null).appendField("comment /* */").appendField(new Blockly.FieldLabelSerializable(""),"NAME"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(""),this.setHelpUrl("")}},T.comment=function(e){return"/*\n"+(T.valueToCode(e,"TEXT",0)||"''")+"\n*/;\n"},v.debugger={init:function(){this.appendValueInput("TEXT").setCheck(null).appendField("debugger").appendField(new Blockly.FieldLabelSerializable(""),"NAME"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(""),this.setHelpUrl("")}},T.debugger=function(e){return"startDebugger("+(T.valueToCode(e,"TEXT",0)||"''")+",'"+e.id+"',this);\n"}},U.fieldXML=function(){return'<block type="comment">\n    <value name="TEXT">\n        <shadow type="text">\n            <field name="TEXT">Put here comments</field>\n        </shadow>\n    </value>\n</block>\n<block type="debugger">\n    <value name="TEXT">\n        <shadow type="text">\n            <field name="TEXT">my message for debug</field>\n        </shadow>\n    </value>\n</block>\n'}},5986:(B,U)=>{U.definitionBlocks=function(v,T){v.converttojson={init:function(){this.appendDummyInput().appendField("ConvertToJSON"),this.appendValueInput("ValueToConvert").setCheck(null),this.setInputsInline(!0),this.setOutput(!0,null),this.setTooltip("Convert to JSON"),this.setHelpUrl("")}},T.converttojson=function(n){return["JSON.parse("+T.valueToCode(n,"ValueToConvert",0)+")",99]},v.converttostring={init:function(){this.appendDummyInput().appendField("ConvertToString"),this.appendValueInput("ValueToConvert").setCheck(null),this.setInputsInline(!0),this.setOutput(!0,null),this.setTooltip("Convert to String"),this.setHelpUrl("")}},T.converttostring=function(n){return["JSON.stringify("+T.valueToCode(n,"ValueToConvert",0)+")",99]},v.convertcsv={init:function(){this.appendDummyInput().appendField("Convert CSV"),this.appendValueInput("ArrayToConvert").setCheck(null).appendField("Array to convert"),this.setOutput(!0,null),this.setTooltip(""),this.setHelpUrl("")}},T.convertcsv=function(n){return["convertToCSV("+T.valueToCode(n,"ArrayToConvert",T.ORDER_ATOMIC)+")",99]}},U.fieldXML=function(){return'<block type="converttojson"></block>\n <block type="converttostring"></block>\n <block type="convertcsv"></block>\n'}},44832:(B,U,v)=>{const T=v(9371);U.definitionBlocks=function(a,e,t,n){e.object_from_json=function(Ct){return[`JSON.parse(${e.valueToCode(Ct,"JSON",0)})`,99]},e.object_to_json=function(Ct){return[`JSON.stringify(${e.valueToCode(Ct,"object",0)})`,99]},e.object_get=function(Ct){const yt=Ct.getFieldValue("field_name");return[`${e.valueToCode(Ct,"object",0)}['${yt}']`,99]},e.object_set=function(Ct){const yt=Ct.getFieldValue("field_name");return`${e.valueToCode(Ct,"object_field",0)}['${yt}'] = ${e.valueToCode(Ct,"value_field",0)};\n`},e.object_create=function(Ct){if(!Ct.numFields)return["{}",99];let yt="";for(let _t=1;_t<=Ct.numFields;_t++)yt+=`"${Ct.getFieldValue("field"+_t)}": ${e.valueToCode(Ct,"field_input"+_t,0)}, `;return[`{ ${yt} }`,99]};const it="object_field",rt="object_create_mutator_top",ct="#F99EA3",wt=(Ct,...yt)=>({object_from_json:"get object from JSON %1",object_from_json_tooltip:"Create object from JSON string.",object_to_json:"generate JSON from object %1",object_to_json_tooltip:"Save object as a JSON string.",object_get_json:"get property %1 %2 of object %3",object_get_json_tooltip:"Get a property of an object.",object_set_json:"set property %1 %2 of object %3 to %4",object_set_json_tooltip:"Set a property of an object.",object_create:"create object",object_create_tooltip:"Create a new object, optionally with some property values.",object_field_name:"property name"}[Ct]),At={type:"object_from_json",message0:wt("object_from_json"),args0:[{type:"input_value",name:"JSON",check:"String"}],output:"Object",colour:ct,tooltip:wt("object_from_json_tooltip"),helpUrl:"http://www.json.org/"};a.object_from_json={init:function(){this.jsonInit(At)}};const Rt={type:"object_to_json",message0:wt("object_to_json"),args0:[{type:"input_value",name:"object",check:"Object"}],output:null,colour:ct,tooltip:wt("object_to_json_tooltip"),helpUrl:"http://www.json.org/"};a.object_to_json={init:function(){this.jsonInit(Rt)}};const Dt={type:"object_get",message0:wt("object_get_json"),args0:[{type:"field_input",name:"field_name",text:"default"},{type:"input_dummy"},{type:"input_value",name:"object",check:"Object",align:"RIGHT"}],output:null,colour:ct,tooltip:wt("object_get_json_tooltip"),helpUrl:""};a.object_get={init:function(){this.jsonInit(Dt)}};const pt={type:"object_set",message0:wt("object_set_json"),args0:[{type:"field_input",name:"field_name",text:wt("object_field_name")},{type:"input_dummy"},{type:"input_value",name:"object_field",check:"Object",align:"RIGHT"},{type:"input_value",name:"value_field",align:"RIGHT"}],previousStatement:null,nextStatement:null,colour:ct,tooltip:wt("object_set_json_tooltip"),helpUrl:""};a.object_set={init:function(){this.jsonInit(pt)}};const st={type:"object_create",message0:wt("object_create"),output:"Object",mutator:"controls_create_mutator",colour:15,tooltip:wt("object_create_tooltip"),helpUrl:""};a.object_create={init:function(){this.jsonInit(st)}};const ot={type:"object_field",message0:"%1 %2",args0:[{type:"field_input",name:"field_name",text:wt("object_field_name")},{type:"input_value",name:"field_value"}],previousStatement:null,nextStatement:null,colour:15,tooltip:"",helpUrl:""};a[it]={init:function(){this.jsonInit(ot)}};const nt={type:"object_create_mutator",message0:wt("object_create"),nextStatement:null,colour:15,tooltip:wt("object_create_tooltip"),helpUrl:""};a[rt]={init:function(){this.jsonInit(nt)}};const Tt={numFields:0,fields:[],domToMutation:function(Ct){this.fields=[];for(let gt,yt=0;gt=Ct.childNodes[yt];yt++)"field"==gt.nodeName.toLowerCase()&&this.fields.push(gt.getAttribute("name"));this.numFields=this.fields.length,this.updateShape()},mutationToDom:function(){if(!this.numFields)return null;const Ct=document.createElement("mutation");Ct.setAttribute("num_fields",""+this.numFields);for(let yt=0;yt<this.fields.length;yt++){const gt=document.createElement("field");gt.setAttribute("name",this.fields[yt]),Ct.appendChild(gt)}return Ct},compose:function(Ct){let yt=Ct.nextConnection&&Ct.nextConnection.targetBlock();this.numFields=0,this.fields=[];let gt=[null];for(;yt;)this.fields.push(yt.getFieldValue("field_name")),this.numFields++,gt.push(yt.savedConnection),yt=yt.nextConnection&&yt.nextConnection.targetBlock();this.updateShape();for(let _t=1;_t<=this.numFields;_t++)n.reconnect(gt[_t],this,"field_input"+_t)},decompose:function(Ct){const yt=Ct.newBlock(rt);yt.initSvg();let gt=yt.nextConnection;for(let _t=0;_t<this.fields.length;_t++){const Jt=Ct.newBlock(it);Jt.initSvg(),Jt.setFieldValue(this.fields[_t],"field_name"),gt.connect(Jt.previousConnection),gt=Jt.nextConnection}return yt},saveConnections:function(Ct){let yt=Ct.nextConnection&&Ct.nextConnection.targetBlock(),gt=1;for(;yt;){const _t=this.getInput("field_input"+gt);yt.savedConnection=_t&&_t.connection.targetConnection,yt.setFieldValue(this.getFieldValue("field"+gt),"field_name"),gt++,yt=yt.nextConnection&&yt.nextConnection.targetBlock()}},updateShape:function(){this.getInput("with")&&this.removeInput("with");let Ct=1;for(;this.getInput("field_input"+Ct);)this.removeInput("field_input"+Ct),Ct++;this.numFields>0&&this.appendDummyInput("with").setAlign(1).appendField("with fields");for(let yt=1;yt<=this.numFields;yt++){const gt=this.fields[yt-1];this.appendValueInput("field_input"+yt).setCheck(null).setAlign(1).appendField(new T.FieldTextInput(gt),"field"+yt)}}};try{t.registerMutator("controls_create_mutator",Tt,null,["object_field"])}catch(Ct){}},U.fieldXML=function(){return'    \n    <block type="modifyproperty"></block>\n    <block type="getproperty"></block>\n    <block type="object_create"></block>\n    \x3c!--<block type="object_from_json"></block>\n<block type="object_to_json"></block>\n<block type="object_get"></block>\n<block type="object_set"></block>--\x3e\n\n'}},31310:(B,U,v)=>{const T=v(9371);U.definitionBlocks=function(a,e){a.displayCurrentDate={init:function(){this.appendDummyInput().appendField("Current Date"),this.appendDummyInput().appendField("Pick date format:").appendField(new T.FieldDropdown([["Unix format","unix"],["ISO format","iso"],["Human format","human"]]),"dateFormat"),this.setOutput(!0,null),this.setColour(100),this.setTooltip("Show current date."),this.setHelpUrl("https://www.w3schools.com/jsref/jsref_obj_date.asp")}};e.displayCurrentDate=o=>{let p="";switch(o.getFieldValue("dateFormat").toString()){case"human":p="displayDateFormatted('human')";break;case"iso":p="displayDateFormatted('iso')";break;case"unix":p="displayDateFormatted('unix')";break;default:console.log("Date time format not suported")}return[p,99]}},U.fieldXML=function(){return'<block type="displayCurrentDate"></block>'}},70061:(B,U)=>{U.definitionBlocks=function(v,T){v.DateFromText={init:function(){this.appendValueInput("VALUE").appendField("Date from "),this.setOutput(!0,null),this.setHelpUrl("https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/parse#Date_Time_String_Format")}},T.DateFromText=e=>["Date.parse("+(T.valueToCode(e,"VALUE",T.ORDER_ATOMIC)||"")+")",99]},U.fieldXML=function(){return'<block type="DateFromText">\n    <value name="VALUE">\n        <shadow type="text">\n            <field name="TEXT">1970-04-16T02:00:00</field>\n        </shadow>\n    </value>\n</block>\n'}},75140:(B,U)=>{U.generalBlocks=function(){return'\n    \n    <category name="Blockly Core">\n\n    <category id="catLogic" colour="210" name="Logic">\n        <block type="controls_if"></block>\n        <block type="logic_compare"></block>\n        <block type="logic_operation"></block>\n        <block type="logic_negate"></block>\n        <block type="logic_boolean"></block>\n        <block type="logic_null"></block>\n        <block type="logic_ternary"></block>\n    </category>\n    <category id="catLoops" colour="120" name="Loops">\n        <block type="controls_repeat_ext">\n            <value name="TIMES">\n                <shadow type="math_number">\n                    <field name="NUM">10</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="controls_whileUntil"></block>\n        <block type="controls_for">\n            <value name="FROM">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="TO">\n                <shadow type="math_number">\n                    <field name="NUM">10</field>\n                </shadow>\n            </value>\n            <value name="BY">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="controls_forEach"></block>\n        <block type="controls_flow_statements"></block>\n    </category>\n    <category id="catMath" colour="230" name="Math">\n        <block type="math_number"></block>\n        <block type="math_arithmetic">\n            <value name="A">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="B">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_single">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">9</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_trig">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">45</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_constant"></block>\n        <block type="math_number_property">\n            <value name="NUMBER_TO_CHECK">\n                <shadow type="math_number">\n                    <field name="NUM">0</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_change">\n            <value name="DELTA">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_round">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">3.1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_on_list"></block>\n        <block type="math_modulo">\n            <value name="DIVIDEND">\n                <shadow type="math_number">\n                    <field name="NUM">64</field>\n                </shadow>\n            </value>\n            <value name="DIVISOR">\n                <shadow type="math_number">\n                    <field name="NUM">10</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_constrain">\n            <value name="VALUE">\n                <shadow type="math_number">\n                    <field name="NUM">50</field>\n                </shadow>\n            </value>\n            <value name="LOW">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="HIGH">\n                <shadow type="math_number">\n                    <field name="NUM">100</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_random_int">\n            <value name="FROM">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="TO">\n                <shadow type="math_number">\n                    <field name="NUM">100</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_random_float"></block>\n    </category>\n    <category id="catText" colour="160" name="Text">\n        <block type="text"></block>\n        <block type="text_join"></block>\n        <block type="text_append">\n            <value name="TEXT">\n                <shadow type="text"></shadow>\n            </value>\n        </block>\n        <block type="text_length">\n            <value name="VALUE">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_isEmpty">\n            <value name="VALUE">\n                <shadow type="text">\n                    <field name="TEXT"></field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_indexOf">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">text</field>\n                </block>\n            </value>\n            <value name="FIND">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_charAt">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">text</field>\n                </block>\n            </value>\n        </block>\n        <block type="text_getSubstring">\n            <value name="STRING">\n                <block type="variables_get">\n                    <field name="VAR">text</field>\n                </block>\n            </value>\n        </block>\n        <block type="text_changeCase">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_trim">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_print">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_prompt_ext">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n    </category>\n    <category id="catLists" colour="260" name="Lists">\n        <block type="lists_create_with">\n            <mutation items="0"></mutation>\n        </block>\n        <block type="lists_create_with"></block>\n        <block type="lists_repeat">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">5</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="lists_length"></block>\n        <block type="lists_isEmpty"></block>\n        <block type="lists_indexOf">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_getIndex">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_setIndex">\n            <value name="LIST">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_getSublist">\n            <value name="LIST">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_split">\n            <value name="DELIM">\n                <shadow type="text">\n                    <field name="TEXT">,</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="lists_sort"></block>\n    </category>\n    <category id="catColour" colour="20" name="Color">\n        <block type="colour_picker"></block>\n        <block type="colour_random"></block>\n        <block type="colour_rgb">\n            <value name="RED">\n                <shadow type="math_number">\n                    <field name="NUM">100</field>\n                </shadow>\n            </value>\n            <value name="GREEN">\n                <shadow type="math_number">\n                    <field name="NUM">50</field>\n                </shadow>\n            </value>\n            <value name="BLUE">\n                <shadow type="math_number">\n                    <field name="NUM">0</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="colour_blend">\n            <value name="COLOUR1">\n                <shadow type="colour_picker">\n                    <field name="COLOUR">#ff0000</field>\n                </shadow>\n            </value>\n            <value name="COLOUR2">\n                <shadow type="colour_picker">\n                    <field name="COLOUR">#3333ff</field>\n                </shadow>\n            </value>\n            <value name="RATIO">\n                <shadow type="math_number">\n                    <field name="NUM">0.5</field>\n                </shadow>\n            </value>\n        </block>\n    </category>\n    <category id="catVariables" colour="330" custom="VARIABLE" name="Variables"></category>\n    <category id="catFunctions" colour="290" custom="PROCEDURE" name="Functions"></category>\n</category>\n\n      '}},88518:(B,U,v)=>{const T=v(9371);U.definitionBlocks=function(a,e){a.blockemail={init:function(){this.appendValueInput("from").setCheck(null).appendField("From:"),this.appendValueInput("to").setCheck(null).appendField("To:"),this.appendValueInput("cc").setCheck(null).appendField("CC:"),this.appendValueInput("bcc").setCheck(null).appendField("BCC:"),this.appendValueInput("subject").setCheck(null).appendField("Subject:"),this.appendValueInput("body").setCheck(null).appendField("Body:").appendField(new T.FieldDropdown([["HTML","Html"],["TEXT","Text"]]),"NAME"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},a.sendinblue={init:function(){this.appendDummyInput().appendField("SendInBlue"),this.appendValueInput("APIKey").setCheck(null).appendField("ApiKey"),this.appendValueInput("email").setCheck("blockemail").appendField("Email"),this.setColour(230),this.setTooltip("Please see https://account.sendinblue.com/advanced/api"),this.setHelpUrl("https://account.sendinblue.com/advanced/api"),this.setOutput(!0,null)}},e.sendinblue=function(n){var p='window.alert("SendInBlue");\n',b="api.sendinblue.com";return p=`(function(apiKey,email){if(!('${b}' in headersForDomain)){ headersForDomain['${b}']=[]; };\n`,p+=`headersForDomain['${b}'].push({"name":"api-key","value":apiKey});\n`,p+=`headersForDomain['${b}'].push({"name":"Content-Type","value":"application/json"});\n`,p+=`headersForDomain['${b}'].push({"name":"Accept","value":"application/json"});\n`,p+='var sendinblueData={"sender":{"email": email.from }, "to":[{"email":email.to }],"subject":email.subject,"htmlContent": email.body} ;\n',p+="\nwindow.alert(JSON.stringify(sendinblueData));\n",p+=`var res=JSON.parse(postXhr("https://${b}/v3/smtp/email",JSON.stringify(sendinblueData)));if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;\n`,[p+="})("+e.valueToCode(n,"APIKey",e.ORDER_ATOMIC)+","+e.valueToCode(n,"email",e.ORDER_ATOMIC)+")",e.ORDER_NONE]},e.blockemail=function(n){var o=e.valueToCode(n,"from",e.ORDER_ATOMIC),r=e.valueToCode(n,"to",e.ORDER_ATOMIC),p=e.valueToCode(n,"cc",e.ORDER_ATOMIC),b=e.valueToCode(n,"bcc",e.ORDER_ATOMIC),I=e.valueToCode(n,"subject",e.ORDER_ATOMIC),x=n.getFieldValue("NAME"),Y="{";return Y+='"from":'+o+",",Y+='"to":'+r+",",Y+='"cc":'+p+",",Y+='"bcc":'+b+",",Y+='"subject":'+I+",",Y+='"body":'+e.valueToCode(n,"body",e.ORDER_ATOMIC)+",",Y+='"typeEmail":"'+x+'"',[""+(Y+="}"),e.ORDER_NONE]}},U.fieldXML=function(){return'<block type="blockemail">\n        <value name="from">\n            <shadow type="text">\n                <field name="TEXT">test@test.com</field>\n            </shadow>\n        </value>\n        <value name="to">\n            <shadow type="text">\n                <field name="TEXT">ignatandrei@yahoo.com</field>\n            </shadow>\n        </value>\n        <value name="cc">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n        <value name="bcc">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n        <value name="subject">\n            <shadow type="text">\n                <field name="TEXT">My test email</field>\n            </shadow>\n        </value>\n        <value name="body">\n            <shadow type="text">\n                <field name="TEXT">This is the body</field>\n            </shadow>\n        </value>\n            </block>\n        <block type="sendinblue">\n        <value name="APIKey">\n            <shadow type="text">\n                <field name="TEXT">Please put here the API Key from SendInBlue</field>\n            </shadow>\n            \n        </value>\n        <value name="email">\n            <shadow type="blockemail">\n            </shadow>\n            \n        </value>\n        \n        </block>\n'}},93736:(B,U)=>{U.definitionBlocks=function(v,T){v.exportfile={init:function(){this.appendDummyInput().appendField("ExportToFile"),this.appendValueInput("fileName").setCheck(null).appendField("FileName"),this.appendValueInput("contentFile").setCheck(null).appendField("Content"),this.appendValueInput("convertToByte").setCheck("Boolean").appendField("ConvertToByteFromBase64"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},T.exportfile=function(t){return"exportToFile("+T.valueToCode(t,"fileName",0)+","+T.valueToCode(t,"contentFile",0)+","+T.valueToCode(t,"convertToByte",0)+");\n"}},U.fieldXML=function(){return'<block type="exportfile">\n    <value name="fileName">\n        <shadow type="text">\n            <field name="TEXT">abc</field>\n        </shadow>\n    </value>\n    <value name="convertToByte">\n        <shadow type="logic_boolean">\n            <field name="BOOL">FALSE</field>\n        </shadow>\n    </value>\n</block>\n'}},21811:(B,U)=>{U.definitionBlocks=function(v,T){v.filterList={init:function(){this.appendDummyInput().appendField("filterList"),this.appendValueInput("LIST").setCheck("Array"),this.appendValueInput("Logic").setCheck("String").appendField("item=>"),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},T.filterList=function(a){var e=T.valueToCode(a,"LIST",T.ORDER_MEMBER)||"[]",t=T.valueToCode(a,"Logic",T.ORDER_ATOMIC);"string"==typeof t&&(t=t.substr(1,t.length-2));var n="";return n+='(function(t){ if (typeof t === "string") return JSON.parse(t);  return t;}('+e+")).filter(function (item){ return "+t+";})",[n+="",T.ORDER_FUNCTION_CALL]},v.mapList={init:function(){this.appendDummyInput().appendField("mapList"),this.appendValueInput("LIST").setCheck("Array"),this.appendValueInput("Logic").setCheck("String").appendField("item=>"),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},T.mapList=function(a){var e=T.valueToCode(a,"LIST",T.ORDER_MEMBER)||"[]",t=T.valueToCode(a,"Logic",T.ORDER_ATOMIC);"string"==typeof t&&(t=t.substr(1,t.length-2));var n="";return n+='(function(t){ if (typeof t === "string") return JSON.parse(t);  return t;}('+e+")).map(function (item){ return "+t+";})",[n+="",T.ORDER_FUNCTION_CALL]},v.reduceList={init:function(){this.appendDummyInput().appendField("reduceList"),this.appendValueInput("LIST").setCheck("Array"),this.appendValueInput("initValue").setCheck(null).appendField("initialValue"),this.appendValueInput("Logic").setCheck("String").appendField("callback(acc,curVal,index, array)=>"),this.setInputsInline(!0),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},T.reduceList=function(a){var e=T.valueToCode(a,"LIST",T.ORDER_MEMBER)||"[]",t="";try{t=T.valueToCode(a,"initValue",T.ORDER_ATOMIC)}catch(r){window.alert(r)}var n=T.valueToCode(a,"Logic",T.ORDER_ATOMIC);"string"==typeof n&&(n=n.substr(1,n.length-2));var o="";return o+='(function(t){ if (typeof t === "string") return JSON.parse(t);  return t;}('+e+")).reduce(function (acc,curVal,index,array){ "+n+";}",t&&t.toString().length>0&&(o+=","+t),o+=")",[o+="",T.ORDER_FUNCTION_CALL]}},U.fieldXML=function(){return'\n        <category id="catA" name="Array">\n            <block type="filterList">\n                <value name="LIST">\n                    <block type="variables_get">\n                        <field name="VAR">list</field>\n                    </block>\n                </value>\n                <value name="initValue">\n                    <shadow type="text">\n                        <field name="TEXT"> </field>\n                    </shadow>\n                </value>\n                <value name="Logic">\n                    <shadow type="text">\n                        <field name="TEXT">item.property == "value"</field>\n                    </shadow>\n                </value>\n            </block>\n            <block type="mapList">\n            <value name="LIST">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n            <value name="Logic">\n                <shadow type="text">\n                    <field name="TEXT">item.property</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="reduceList">\n        <value name="LIST">\n        <block type="variables_get">\n                <field name="VAR">list</field>\n            </block>\n            </value>\n            <value name="Logic">\n                <shadow type="text">\n                    <field name="TEXT">...</field>\n                </shadow>\n            </value>\n        </block>\n        </category>\n\n'}},92605:(B,U,v)=>{const T=v(9371);U.definitionBlocks=function(a,e){a.window_open={init:function(){this.jsonInit({message0:"Open %1",args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks"})}},e.window_open=function(o){var r=e.valueToCode(o,"TEXT",99)||"''";return"if((typeof "+r+' == "object") && ("to" in '+r+')){open("mailto:'+r.to+'")}else{ open('+r+")};\n"},a.text_message={init:function(){this.jsonInit({message0:"alert %1",args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks"})}},e.text_message=function(o){return"alert1("+(e.valueToCode(o,"TEXT",99)||"''")+");\n"},a.text_print_return={init:function(){this.appendValueInput("TEXT").setCheck(null).appendField("print return").appendField(new T.FieldLabelSerializable(""),"NAME"),this.setOutput(!0,null),this.setTooltip(""),this.setHelpUrl("")}},e.text_print_return=function(o){var r=e.valueToCode(o,"TEXT",0)||"''";return["(function(){window.alert("+r+");\n;return ("+r+");}())\n",99]},a.valuefromtext={init:function(){this.appendDummyInput().appendField("InputFromText"),this.appendValueInput("IdOfText").setCheck("String").appendField("Text id"),this.appendValueInput("ValueToObtain").setCheck("String").appendField("Property"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},e.valuefromtext=function(o){return["getIDProp("+e.valueToCode(o,"IdOfText",0)+","+(e.valueToCode(o,"ValueToObtain",0)||'"value"')+")",99]}},U.fieldXML=function(){return'<block type="window_open"></block>\n    <block type="valuefromtext">\n        <value name="IdOfText">\n            <shadow type="text">\n                <field name="TEXT">output</field>\n            </shadow>\n        </value>\n        <value name="ValueToObtain">\n            <shadow type="text">\n                <field name="TEXT">value</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="text_print"></block>\n    <block type="text_print_return"></block>  \n    <block type="text_prompt_ext"></block>\n    <block type="text_message"></block>\n    \n    '}},57470:(B,U,v)=>{B.exports={defaultBlocks:v(75140),filterBlocks:v(21811),waitBlocks:v(95870),xhrBlocks:v(67716),propBlocks:v(53951),guiBlocks:v(92605),convertersBlocks:v(5986),exportFileBlock:v(93736),createObjectBlocks:v(44832),currentDateBlock:v(31310),dateFromTextBlock:v(70061),waitBlocks:v(96126),commentBlock:v(31439),auth0Blocks:v(10650),windowsCreds:v(99848),trycatchFinBlock:v(73375),chartBlock:v(80681),emailBlocks:v(88518),htmlblocks:v(64408),ttsBlock:v(87268),pianoBlock:v(34215)}},34215:(B,U,v)=>{v(9371),U.definitionBlocks=function(a,e){a.pianoBlock={init:function(){this.appendValueInput("Note").setCheck("String").appendField("Note(A-G)"),this.appendValueInput("Sharp").setCheck("Boolean").appendField("#"),this.appendValueInput("Octave").setCheck("Number").appendField("Octave"),this.appendValueInput("Duration").setCheck("Number").appendField("Duration"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("https://github.com/keithwhor/audiosynth")}},e.pianoBlock=function(t){var n=e.valueToCode(t,"Note",e.ORDER_ATOMIC),b="";return"true"==(e.valueToCode(t,"Sharp",e.ORDER_ATOMIC)||!1)&&(b="#"),"playPiano("+n+b+","+e.valueToCode(t,"Octave",e.ORDER_ATOMIC)+","+(e.valueToCode(t,"Duration",e.ORDER_ATOMIC)||2)+");\n"},a.cmajor={init:function(){this.appendDummyInput().appendField("CMajor "),this.setOutput(!0,"Array"),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},e.cmajor=function(t){return['["C","D","E","F","G","A","B"]',e.ORDER_NONE]}},U.fieldXML=function(){return'<block type="pianoBlock">\n        <value name="Note">\n            <shadow type="text">\n            <field name="TEXT">C</field></shadow>\n        </value>       \n        <value name="Octave">\n            <shadow type="math_number">\n            <field name="NUM">4</field></shadow>\n        </value>       \n        <value name="Sharp">\n            <shadow type="logic_boolean">\n            <field name="BOOL">FALSE</field></shadow>\n        </value>       \n        \n        <value name="Duration">\n            <shadow type="math_number">\n            <field name="NUM">2</field></shadow>\n        </value>       \n        </block>\n        <block type="cmajor"></block>\n\n'}},53951:(B,U,v)=>{const T=v(9371);U.definitionBlocks=function(a,e){a.modifyproperty={init:function(){this.appendDummyInput().appendField("Modify "),this.appendValueInput("ObjectToChange").setCheck(null).setAlign(0).appendField(new T.FieldLabelSerializable("object"),"objectName"),this.appendValueInput("PropertyName").setCheck(null).setAlign(1).appendField(new T.FieldLabelSerializable(",property"),"prop"),this.appendValueInput("NewValue").setCheck(null).setAlign(1).appendField(new T.FieldLabelSerializable("toValue"),"newValue"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(""),this.setHelpUrl("")}},e.modifyproperty=function(p){return e.valueToCode(p,"ObjectToChange",0)+"["+e.valueToCode(p,"PropertyName",0)+"]="+e.valueToCode(p,"NewValue",0)+";"},a.getproperty={init:function(){this.appendDummyInput().appendField("Get from"),this.appendValueInput("ObjectToChange").setCheck(null).setAlign(0).appendField(new T.FieldLabelSerializable("object"),"objectName"),this.appendValueInput("PropertyName").setCheck(null).setAlign(1).appendField(new T.FieldLabelSerializable("property"),"prop"),this.setInputsInline(!0),this.setOutput(!0,null)}},e.getproperty=function(p){return['(function(t){ if (typeof t === "string") return JSON.parse(t);  return t;}('+e.valueToCode(p,"ObjectToChange",0)+"))["+e.valueToCode(p,"PropertyName",0)+"]",99]}},U.fieldXML=function(){return'\n    \n    <block type="modifyproperty">\n        <value name="PropertyName">\n            <shadow type="text">\n                <field name="TEXT">enter property name</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="getproperty">\n        <value name="PropertyName">\n            <shadow type="text">\n                <field name="TEXT">enter property name</field>\n            </shadow>\n        </value>\n\n    </block>    \n'}},73375:(B,U)=>{U.definitionBlocks=function(v,T){v.trycatchfinally={init:function(){this.appendStatementInput("TRY").appendField("try"),this.appendStatementInput("CATCH").appendField("catch"),this.appendStatementInput("FINALLY").appendField("finally"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},T.trycatchfinally=function(t){var p="try {\n"+T.statementToCode(t,"TRY")+"}\n";return(p+="catch(err){\n errHandler(JSON.stringify(err));\n"+T.statementToCode(t,"CATCH")+"\n}")+"finally{\n "+T.statementToCode(t,"FINALLY")+"\n}\n"}},U.fieldXML=function(){return'\n    \n    <block type="trycatchfinally">\n    \n</block>\n'}},96126:(B,U)=>{U.definitionBlocks=function(v,T){v.wait={init:function(){this.appendValueInput("VALUE").appendField("wait secs"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},T.wait=function(e){return"waitTime("+(T.valueToCode(e,"VALUE",T.ORDER_ATOMIC)||"")+");"},v.wait_until={init:function(){this.appendValueInput("VALUE").appendField("wait until date"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},T.wait_until=function(e){return"waitTime(("+(T.valueToCode(e,"VALUE",0)||"")+"-new Date())/1000);"}},U.fieldXML=function(){return'\n    <block type="wait">\n\n    <value name="VALUE">\n        <shadow type="math_number">\n            <field name="NUM">10</field>\n        </shadow>\n    </value>\n\n</block>\n<block type="wait_until">\n\n</block>'}},95870:(B,U)=>{U.definitionBlocks=function(v,T){v([{type:"wait_seconds",message0:" wait %1 seconds",args0:[{type:"field_number",name:"SECONDS",min:0,max:600,value:1}],previousStatement:null,nextStatement:null,colour:"%{BKY_LOOPS_HUE}"}]),T.wait_seconds=function(a){return"waitForSeconds("+Number(a.getFieldValue("SECONDS"))+");\n"}},U.fieldXML=function(){return'\n  <block type="wait_seconds"></block>\n'}},67716:(B,U,v)=>{const T=v(9371);U.definitionBlocks=function(a,e){a.headersbeforehttp={init:function(){this.appendDummyInput().appendField("Add Headers"),this.appendValueInput("HttpDomain").setCheck("String").appendField("Domain"),this.appendValueInput("HeaderName").setCheck("String").appendField("Header Name"),this.appendValueInput("HeaderValue").setCheck("String").appendField("Header Value"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("at domain put (localSite) or *")}},e.headersbeforehttp=function(o){var r=e.valueToCode(o,"HttpDomain",0)||"(localSite)",I="\n";return I+="{\n",I+="if(!("+r+" in headersForDomain))\n",I+="{\n",I+="headersForDomain["+r+"]=[];\n",I+="};\n",I+="var arr = headersForDomain["+r+"];\n",I+="arr.push({name:"+e.valueToCode(o,"HeaderName",0)+", value:"+e.valueToCode(o,"HeaderValue",0)+"});\n",I+='//alert("a" + JSON.stringify(arr)+"a");\n',(I+='//alert("a" + JSON.stringify(headersForDomain['+r+'])+"a");\n')+"};\n"},a.httprequest={init:function(){this.appendDummyInput().appendField(new T.FieldDropdown([["JSON","JSON"],["Text","Text"]]),"TypeOutput").appendField("HttpRequest"),this.appendValueInput("TheUrl").setCheck(null).appendField(new T.FieldDropdown([["GET","GET"],["POST","POST"],["PUT","PUT"],["DELETE","DELETE"]]),"TypeRequest").appendField("URL"),this.appendValueInput("Data").setCheck(null).appendField("Data"),this.setOutput(!0,null)}},e.httprequest=function(o){var r=o.getFieldValue("TypeOutput"),p=o.getFieldValue("TypeRequest"),b=e.valueToCode(o,"TheUrl",0),I=e.valueToCode(o,"Data",0),x="";switch(p.toString()){case"GET":x="(function(url){ var res=JSON.parse(getXhr(url)); if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;}("+b+") )";break;case"POST":x="(function(url,data){ var res=JSON.parse(postXhr(url,JSON.stringify(data))); if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;}("+b,I&&(x+=","+I),x+=") )";break;case"DELETE":x="(function(url,data){ var res=JSON.parse(deleteXhr(url,JSON.stringify(data))); if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;}("+b,I&&(x+=","+I),x+=") )";break;case"PUT":x="(function(url,data){ var res=JSON.parse(putXhr(url,JSON.stringify(data))); if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;}("+b,I&&(x+=","+I),x+=") )";break;default:alert("Do not understand : "+p.toString())}var k=x;switch(r){case"JSON":k="JSON.parse("+k+")"}return[k,99]}},U.fieldXML=function(){return'\n    \n    <block type="headersbeforehttp">\n    <value name="HttpDomain">\n        <shadow type="text">\n            <field name="TEXT">(localSite)</field>\n        </shadow>\n    </value>\n    <value name="HeaderName">\n        <shadow type="text">\n            <field name="TEXT">Authorization</field>\n        </shadow>\n    </value>\n    <value name="HeaderValue">\n        <shadow type="text_join">\n\n        </shadow>\n    </value>\n</block>\n<block type="text_print">\n<value name="TEXT">\n\n    <block type="httprequest">\n    <value name="TheUrl">\n        <shadow type="text">\n            <field name="TEXT">https://httpbin.org/get</field>\n        </shadow>\n    </value>\n</block>\n</value>\n</block>    \n\n'}},47730:(B,U,v)=>{var T=v(38506).default;const a=v(9371);B.exports=class{constructor(n){Vc(this,"GenerateBlocks",[]),Vc(this,"GenerateFunctions",[]),Vc(this,"fieldXMLObjects",[]),Vc(this,"fieldXMLFunctions",[]),Vc(this,"hasError",!0),Vc(this,"paths",[]),Vc(this,"name",""),Vc(this,"operations",[]),Vc(this,"cacheCategSwaggerFromPaths",[]),Vc(this,"openApiDocument",null),Vc(this,"basePath",""),this.swaggerUrl=n}nameCategSwagger(){return`catSwagger${this.findHostNameRegular()}_${this.name}`}metaBlocks(){var n=this;return function(o,r){var p;o[p=`meta_swagger_controllers_${n.name}`]={init:function(){this.appendDummyInput().appendField("categories_"+n.name),this.setOutput(!0,null),this.setColour(30),this.setTooltip(""),this.setHelpUrl(n.swaggerUrl)}},r[p]=function(b){var x=n.findCategSwaggerFromPaths().map(Y=>({name:Y}));return x={name:n.name,categories:x},[JSON.stringify(x),r.ORDER_NONE]},o[p=`meta_swagger_controllers_actions_${n.name}`]={init:function(){this.appendDummyInput().appendField("categories_actions"+n.name),this.setOutput(!0,null),this.setColour(30),this.setTooltip(""),this.setHelpUrl(n.swaggerUrl)}},r[p]=function(b){var x=n.findCategSwaggerFromPaths().map(Y=>({name:Y,ops:n.findfieldXMLFunctions(Y).map(X=>X.id).filter(X=>X.length>0)}));return x={name:n.name,categories:x},[JSON.stringify(x),r.ORDER_NONE]}}}findfieldXMLFunctions(n){var o=this.operations.filter(p=>p.controller==n);return this.fieldXMLFunctions.filter(p=>{if(""==p.id)return!0;var b=p.id+"/",I=!1;return o.forEach(x=>{b.startsWith(x.id)&&(I=!0)}),!!I||(o.forEach(x=>{var k=x.id.substring(0,x.id.lastIndexOf("/"))+"{";b.startsWith(k)&&(I=!0)}),I)})}findCategSwaggerFromPaths(){if(this.cacheCategSwaggerFromPaths.length>0)return this.cacheCategSwaggerFromPaths;var n=this.paths.filter(r=>r&&r.id&&r.id.length>0).map(r=>{for(var p=r.id.length,b=r.id.indexOf("{");b>0;){var I=r.id.indexOf("}",b);if(p-I<2){r.id=r.id.substring(0,b);break}b=r.id.indexOf("{",I)}return r}).map(r=>(r.id.lastIndexOf("/")!=r.id.length-1&&(r.id+="/"),r));this.operations=n.filter(r=>r.nrOps>1).map(r=>({arr:r.id.split("/").filter(b=>b.length>0),id:r.id})).map(r=>({controller:r.arr[r.arr.length-1],id:r.id}));var o=n.filter(r=>1==r.nrOps).map(r=>({arr:r.id.split("/").filter(p=>p.length>0),id:r.id})).map(r=>1==r.arr.length?{controller:r.arr[0],id:r.id}:{controller:r.arr[r.arr.length-2],id:r.id});return this.operations.push(...o),this.cacheCategSwaggerFromPaths=[...new Set(this.operations.map(r=>r.controller))],this.cacheCategSwaggerFromPaths}categSwagger(){var n=this.findHostNameRegular();(n=n.replaceAll(".","")).length>5&&n.substring(0,5);var p=this.nameCategSwagger();return'<category name="Objects" custom="objects_'+p+'"></category><category name="AllApi" custom="AllApi_'+p+'"></category>'}findRootSite(){var n=this.swaggerUrl,o="";if(n.startsWith("http://")||n.startsWith("https://")){var r=new URL(n);o=r.protocol+"//"+r.hostname,r.port.length>0&&(o+=":"+r.port)}return o}findHostNameRegular(){var b,n=this.swaggerUrl,o="(localSite)";if(n.startsWith("http://")||n.startsWith("https://")){var r=new URL(n),p=null!=(b=r.port)?b:80;o=r.hostname+p}return o.replaceAll(".","")}ParseSwagger(){var n=this;return T(function*(){var x,o=n;o.fieldXMLObjects.push(`<label text="${o.swaggerUrl}"></label>`),o.fieldXMLFunctions.push({id:"",gui:`<label text="${o.swaggerUrl}"></label>`});var r=null;try{r=(yield v(14087).default(n.swaggerUrl)).spec}catch(k){return console.error(`parseSwagger ${n.swaggerUrl}`,k),o.fieldXMLObjects.push("<label text='Error parsing!'></label>"),n}n.hasError=!1,n.basePath=r.basePath||"";var b=null==(x=r.components)?void 0:x.schemas;return(null==b||null==b)&&(b=r.definitions),b?Object.keys(b).sort().forEach(function(k){var Y=b[k],X=o.findProperties(Y),it=`<block type="${k}">`;X.forEach(function(rt){if(rt.value&&rt.value.type){var ct=o.GenerateShadowField(rt.value.type,rt.key);ct.length>0&&(it+=`<value name="val_${rt.key}">${ct}</value>`)}}),o.fieldXMLObjects.push(it+="</block>"),o.GenerateBlocks.push(o.GenerateBlock(Y,k))}):console.log("_A",r),r.paths&&Object.keys(r.paths).forEach(function(k){var Y=r.paths[k];o.paths.push({id:k,nrOps:Object.keys(Y).length}),Object.keys(Y).forEach(function(X){o.GenerateFunctions.push(o.GenerateFunction(Y,k,Y[X],X))})}),o.openApiDocument=r,o})()}findProperties(n){var o=[];return n.properties&&Object.keys(n.properties).forEach(r=>{o.push({key:r,value:n.properties[r]})}),o}GenerateNameFunction(n,o,r,p){return p+"_"+o.replaceAll("/","_").replaceAll("{","__").replaceAll("}","")}GenerateShadowField(n,o,r){switch(n){case"integer":return`<block type='math_number'><field name='NUM'>${r||0}</field></block>`;case"string":return`<block type='text'><field name='TEXT'>${r||`please enter ${o}`}</field></block>`;case"boolean":return`<block type='logic_boolean'><field name='BOOL'>${r||"FALSE"}</field></block>`;case"array":return'<block type="lists_create_with"> <mutation items="0"></mutation></block>';default:return""}}GenerateFunction(n,o,r,p){var b=this,I=b.GenerateNameFunction(n,o,r,p),k=r,Y=`<block type="text_print"> <value name="TEXT"><block type="${I}">`;k.parameters&&k.parameters.forEach(wt=>{if(wt.type)(At=b.GenerateShadowField(wt.type,wt.name)).length>0&&(Y+=`<value name="val_${wt.name}">${At}</value>`);else if(wt.schema&&wt.schema.type){var At;(At=b.GenerateShadowField(wt.schema.type,wt.name)).length>0&&(Y+=`<value name="val_${wt.name}">${At}</value>`)}});var X="",it="";try{var rt=new URL(b.findRootSite());X=rt.hostname,it=rt.port}catch(wt){}var ct=b.GenerateShadowField("string","override_host",X=X||" ");return Y+=`<value name="override_Host">${ct}</value>`,ct=b.GenerateShadowField("integer","override_port",it=it||"0"),Y+=`<value name="override_Port">${ct}</value>`,Y+="</block></value>",b.fieldXMLFunctions.push({id:o,gui:Y+="</block>"}),function(wt,At){wt[I]={init:function(){var Rt=p;switch(p.toString().toLowerCase()){case"get":Rt="",this.setColour(210);break;case"post":Rt="",this.setColour(165);break;case"put":Rt="",this.setColour(40);break;case"delete":Rt="",this.setColour(10);break;default:console.log(`not found ${p}`),this.setColour(10)}for(var Dt=o,pt=b.findCategSwaggerFromPaths(),st=0;st<pt.length;st++){var ot="/"+pt[st]+"/",nt=o.indexOf(ot);if(nt>-1){var Tt=o.substring(nt+ot.length);Tt.length<Dt.length&&(Dt=Tt)}}Dt.length>25&&(Dt=Dt.substring(0,25)+"..."),this.appendDummyInput().appendField(new a.FieldImage(`assets/httpImages/${p}.png`,90,20,p)).appendField(`${Rt} ${Dt}`);var Ct=b.findRootSite();if(k.parameters&&k.parameters.forEach(Jt=>{var Pt=Jt.name;if(Jt.required&&(Pt+="*"),Jt.type)Pt+=":"+Jt.type;else if(Jt.schema)if(Jt.schema.enum&&"$$ref"in Jt.schema){var oe=Jt.schema.$$ref.split("/");Pt+="=>"+oe[oe.length-1]}else if(Jt.schema.type)if("object"==Jt.schema.type){var Ne=Jt.schema.$$ref||"";Ne.length>0&&(Pt+=":"+(Ne=Ne.substring(Ne.lastIndexOf("/")+1)))}else Pt+=":"+Jt.schema.type;this.appendValueInput(`val_${Jt.name}`).appendField(Pt)}),k.requestBody){var yt="";if(k.requestBody.content){var gt=k.requestBody.content["application/json"];if(gt&&gt.schema){var _t=gt.schema.$$ref;_t&&(yt="=>"+_t.substring(_t.lastIndexOf("/")+1))}}this.appendValueInput("val_values").appendField("values"+yt).setCheck()}this.appendValueInput("override_Host").appendField("override Host"),this.appendValueInput("override_Port").appendField("override Port"),this.setTooltip(`${p} ${Ct}${o}`),this.setOutput(!0,"")}},At[I]=function(Rt){var ot=b.openApiDocument.paths[o][p],nt=[];"parameters"in ot&&(nt=ot.parameters);var Tt=!1,Ct=nt.filter(re=>"body"==re.in).length>0;(Ct||"requestBody"in ot)&&(Tt=!0);var yt={},gt={};Tt&&(yt.val_values=At.valueToCode(Rt,"val_values",0),gt.val_values=yt.val_values),nt.forEach(re=>{yt[`val_${re.name}`]=At.valueToCode(Rt,`val_${re.name}`,0)});var _t=nt.map(re=>re.name);Tt&!Ct&&_t.push("values"),_t.push("extraData"),nt.map(re=>`\${obj['val_${re.name}']},`);var Pt="function(";Pt+=_t.join(","),Pt+="){\n",Pt+='var rootSite="'+b.findRootSite()+'";\n',Pt+="if(extraData){\n",Pt+="if(extraData.url && extraData.url.host && extraData.url.host.length>0 ){\n",Pt+="rootSite =  changeHost(rootSite, extraData.url.host);\n",Pt+="};\n",Pt+="if(extraData.url && extraData.url.port && extraData.url.port.toString().length>0 ){\n",Pt+="rootSite  =changePort(rootSite , extraData.url.port);\n",Pt+="};\n",Pt+="};\n",Pt+='var strUrl =rootSite +"'+b.basePath+o+'";\n';var oe=nt.filter(re=>"query"==re.in);if(oe.length>0){Pt+='strUrl+="?";\n;';var Ne=oe.map(re=>`${re.name}={`+re.name+"}").join("&");Pt+='strUrl += "'+Ne+'";\n;'}var Xe=nt.filter(re=>"path"==re.in||"query"==re.in).map(re=>`\n          //this gives error cannot read property 'call' of undefined in acorn\n          //strUrl = strUrl.replace("{${re.name}}",${re.name});\n          {\n            var replaceFInd = "{${re.name}}";\n            var index= strUrl.indexOf(replaceFInd);\n            if(index>=0){\n              var strUrlReplace = strUrl.substring(0,index)+ ${re.name} + strUrl.substring(index+replaceFInd.length);\n              strUrl = strUrlReplace;\n            }\n\n          };`);if(Pt+=Xe.join("\n"),Pt+=`\n{var res= ${p}Xhr(strUrl`,Tt){var Ce="values";Ct&&(Ce=nt.filter(re=>"body"==re.in)[0].name),Pt+=`,JSON.stringify(${Ce})`}Pt+=");\n",Pt+="var resJS=JSON.parse(res);\n",Pt+="if(resJS.statusOK) return resJS.text;\n",Pt+="errHandler(res);\n}\n",Pt+="}",Pt+="(",nt.forEach(re=>{Pt+=yt[`val_${re.name}`]+","}),Tt&!Ct&&(Pt+=gt.val_values+",");var Ze="url:{notImportant:1",we=At.valueToCode(Rt,"override_Host",0);(we=we||"").length>0&&(Ze+=`,host:${we}`);var ai=At.valueToCode(Rt,"override_Port",0);return(ai=ai||"").length>0&&(Ze+=`,port:${ai}`),Pt+=`{${Ze+="}"}}\n`,[Pt+=")",99]}}}GenerateBlock(n,o){var r=this,p=o,I=r.findProperties(n);return function(x,k){x[p]={init:function(){var Y=!1,X=[];n.enum&&(Y=!0,X=Object.keys(n.enum).map(n["x-enumNames"]?ct=>[n["x-enumNames"][ct],ct]:ct=>[n.enum[ct],ct]));var rt=this.appendDummyInput().appendField(o);Y?(X=X.map(ct=>[ct[0].toString(),ct[1].toString()]),rt.appendField(new a.FieldDropdown(X),`val_${o}`)):I.forEach(ct=>{var pt,wt=ct.key;if(ct.value.nullable&&0==ct.value.nullable&&(wt+="*"),null==(pt=ct.value)?void 0:pt.type){var At=ct.value.type||"";if("object"==At){var Rt=ct.value.$$ref||"";Rt.length>0&&(At=Rt.substring(Rt.lastIndexOf("/")+1))}wt+=":"+At}ct.value.$ref&&(wt+="->"+ct.value.$ref.replaceAll("#/components/schemas/","")),this.appendValueInput(`val_${ct.key}`).appendField(`${wt}`)}),this.setOutput(!0,p)}},k[p]=function(Y){{var X=!1;n.enum&&(X=!0);var it=r.findProperties(n);const At=99,Rt=0;var rt="",ct=[];return it.forEach(Dt=>{let pt=k.valueToCode(Y,`val_${Dt.key}`,Rt);""===pt&&(pt="null"),null==pt&&(pt="null"),ct.push(`"${Dt.key}":${pt}`)}),rt="{ "+ct.join(",")+" }",X&&(rt=Y.getFieldValue(`val_${o}`)),[rt,At]}}}}TranslateToBlocklyType(n){return"integer"==n?"Number":"string"==n?"String":"bool"==n?"Boolean":"array"==n?"Array":(console.error("not found TranslateToBlocklyType item"+n),"not found type"+n)}}},76894:(B,U,v)=>{B.exports={parseSwagger:v(88977),parseData:v(47730)}},88977:(B,U,v)=>{var T=v(38506).default;U.parseSwagger=function(){var t=T(function*(n){var k;new(v(47730))(n);var p=[],x=(yield v(33817).default(n)).response;return(null==(k=x.components)?void 0:k.schemas)&&Object.keys(x.components.schemas).forEach(function(Y){p.push(function(t,n){var o=n;return t.properties&&Object.keys(t.properties).forEach(r=>{}),function(r,p){r[o]={init:function(){this.appendDummyInput().appendField(n),this.setOutput(!0,o)}}}}(x.components.schemas[Y],Y))}),p});return function(n){return t.apply(this,arguments)}}(),U.parseSwagger1=function(t){return v(33817).default(t)}},80751:(B,U,v)=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.Api=void 0;var T=v(14985);U.Api=function(t,n){void 0===n&&(n={}),this.entrypoint=t,T.assignSealed(this,n)}},77981:(B,U,v)=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.Field=void 0;var T=v(14985);U.Field=function(t,n){void 0===n&&(n={}),this.name=t,T.assignSealed(this,n)}},20985:(B,U,v)=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.Resource=void 0;var T=v(14985);U.Resource=function(t,n,o){void 0===o&&(o={}),this.name=t,this.url=n,T.assignSealed(this,o)}},22566:(B,U,v)=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.removeTrailingSlash=void 0;var a=v(2805).__importDefault(v(19556)),e=v(77981),t=v(20985),n=v(37906);U.removeTrailingSlash=function(p){return p.endsWith("/")&&(p=p.slice(0,-1)),p},U.default=function(p,b){return n.getResources(p.paths).map(function(k){var Y=k.replace("/",""),X=U.removeTrailingSlash(b)+k,it=Object.keys(p.paths[k])[0],rt=p.paths[k][it];if(!rt.tags)throw new Error;var ct=rt.tags[0];if(!p.components)throw new Error;if(!p.components.schemas)throw new Error;var At=p.components.schemas[ct].properties;if(!At)throw new Error;var Rt=Object.keys(At),Dt=a.default(p,["components","schemas",ct,"required"],[]),pt=Rt.map(function(st){return new e.Field(st,{id:null,range:null,reference:null,required:!!Dt.find(function(ot){return ot===st}),description:a.default(At[st],"description","")})});return new t.Resource(Y,X,{id:null,title:ct,fields:pt,readableFields:pt,writableFields:pt})})}},33817:(B,U,v)=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0});var T=v(2805),a=v(80751),e=T.__importStar(v(22566));U.default=function(n){return n=e.removeTrailingSlash(n),fetch(n).then(function(o){return Promise.all([o,o.json()])}).then(function(o){var r=o[0],p=o[1],b=p.info.title,I=e.default(p,n);return Promise.resolve({api:new a.Api(n,{title:b,resources:I}),response:p,status:r.status})},function(o){var r=o[0],p=o[1];return Promise.reject({api:new a.Api(n,{resources:[]}),response:p,status:r.status})})}},14985:(B,U)=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.assignSealed=void 0,U.assignSealed=function(T,a){Object.keys(a).forEach(function(e){Object.defineProperty(T,e,{writable:!0,enumerable:!0,configurable:!1,value:a[e]})})}},37906:(B,U)=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.getResources=void 0,U.getResources=function(T){var a=[];return Object.keys(T).forEach(function(e){e.includes("/{id}")||a.find(function(t){return t.startsWith("/"+e.split("/")[1])})||a.push(e)}),a}},8334:function(B,U,v){var T,a,e;a=[v(40923)],void 0!==(e="function"==typeof(T=function(t){"use strict";return t})?T.apply(U,a):T)&&(B.exports=e)},40923:function(B,U){var v,a;void 0!==(a="function"==typeof(v=function(){"use strict";var e={connectionTypes:{INPUT_VALUE:1,OUTPUT_VALUE:2,NEXT_STATEMENT:3,PREVIOUS_STATEMENT:4},constants:{},LINE_MODE_MULTIPLIER:40,PAGE_MODE_MULTIPLIER:125,DRAG_RADIUS:5,FLYOUT_DRAG_RADIUS:10,SNAP_RADIUS:28};return e.CONNECTING_SNAP_RADIUS=e.SNAP_RADIUS,e.CURRENT_CONNECTION_PREFERENCE=8,e.BUMP_DELAY=250,e.BUMP_RANDOMNESS=10,e.COLLAPSE_CHARS=30,e.LONGPRESS=750,e.SOUND_LIMIT=100,e.DRAG_STACK=!0,e.HSV_SATURATION=.45,e.HSV_VALUE=.65,e.SPRITE={width:96,height:124,url:"sprites.png"},e.constants.ALIGN={LEFT:-1,CENTRE:0,RIGHT:1},e.DRAG_NONE=0,e.DRAG_STICKY=1,e.DRAG_BEGIN=1,e.DRAG_FREE=2,e.OPPOSITE_TYPE=[],e.OPPOSITE_TYPE[e.connectionTypes.INPUT_VALUE]=e.connectionTypes.OUTPUT_VALUE,e.OPPOSITE_TYPE[e.connectionTypes.OUTPUT_VALUE]=e.connectionTypes.INPUT_VALUE,e.OPPOSITE_TYPE[e.connectionTypes.NEXT_STATEMENT]=e.connectionTypes.PREVIOUS_STATEMENT,e.OPPOSITE_TYPE[e.connectionTypes.PREVIOUS_STATEMENT]=e.connectionTypes.NEXT_STATEMENT,e.VARIABLE_CATEGORY_NAME="VARIABLE",e.VARIABLE_DYNAMIC_CATEGORY_NAME="VARIABLE_DYNAMIC",e.PROCEDURE_CATEGORY_NAME="PROCEDURE",e.RENAME_VARIABLE_ID="RENAME_VARIABLE_ID",e.DELETE_VARIABLE_ID="DELETE_VARIABLE_ID",e.constants.COLLAPSED_INPUT_NAME="_TEMP_COLLAPSED_INPUT",e.constants.COLLAPSED_FIELD_NAME="_TEMP_COLLAPSED_FIELD",e.utils={},e.utils.global=function(){return"object"==typeof self?self:"object"==typeof window?window:"object"==typeof global?global:this}(),e.Msg={},e.utils.global.Blockly||(e.utils.global.Blockly={}),e.utils.global.Blockly.Msg||(e.utils.global.Blockly.Msg=e.Msg),e.utils.colour={},e.utils.colour.parse=function(t){t=String(t).toLowerCase().trim();var n=e.utils.colour.names[t];if(n||(n="0x"==t.substring(0,2)?"#"+t.substring(2):t,/^#[0-9a-f]{6}$/.test(n="#"==n[0]?n:"#"+n)))return n;if(/^#[0-9a-f]{3}$/.test(n))return["#",n[1],n[1],n[2],n[2],n[3],n[3]].join("");var o=t.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return o&&(t=Number(o[1]),n=Number(o[2]),o=Number(o[3]),0<=t&&256>t&&0<=n&&256>n&&0<=o&&256>o)?e.utils.colour.rgbToHex(t,n,o):null},e.utils.colour.rgbToHex=function(t,n,o){return n=t<<16|n<<8|o,16>t?"#"+(16777216|n).toString(16).substr(1):"#"+n.toString(16)},e.utils.colour.hexToRgb=function(t){return(t=e.utils.colour.parse(t))?[(t=parseInt(t.substr(1),16))>>16,t>>8&255,255&t]:[0,0,0]},e.utils.colour.hsvToHex=function(t,n,o){var r=0,p=0,b=0;if(0==n)b=p=r=o;else{var I=Math.floor(t/60),x=t/60-I;t=o*(1-n);var k=o*(1-n*x);switch(n=o*(1-n*(1-x)),I){case 1:r=k,p=o,b=t;break;case 2:r=t,p=o,b=n;break;case 3:r=t,p=k,b=o;break;case 4:r=n,p=t,b=o;break;case 5:r=o,p=t,b=k;break;case 6:case 0:r=o,p=n,b=t}}return e.utils.colour.rgbToHex(Math.floor(r),Math.floor(p),Math.floor(b))},e.utils.colour.blend=function(t,n,o){return(t=e.utils.colour.parse(t))&&(n=e.utils.colour.parse(n))?(t=e.utils.colour.hexToRgb(t),n=e.utils.colour.hexToRgb(n),e.utils.colour.rgbToHex(Math.round(n[0]+o*(t[0]-n[0])),Math.round(n[1]+o*(t[1]-n[1])),Math.round(n[2]+o*(t[2]-n[2])))):null},e.utils.colour.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},e.utils.Coordinate=function(t,n){this.x=t,this.y=n},e.utils.Coordinate.equals=function(t,n){return t==n||!(!t||!n)&&t.x==n.x&&t.y==n.y},e.utils.Coordinate.distance=function(t,n){var o=t.x-n.x;return t=t.y-n.y,Math.sqrt(o*o+t*t)},e.utils.Coordinate.magnitude=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},e.utils.Coordinate.difference=function(t,n){return new e.utils.Coordinate(t.x-n.x,t.y-n.y)},e.utils.Coordinate.sum=function(t,n){return new e.utils.Coordinate(t.x+n.x,t.y+n.y)},e.utils.Coordinate.prototype.clone=function(){return new e.utils.Coordinate(this.x,this.y)},e.utils.Coordinate.prototype.scale=function(t){return this.x*=t,this.y*=t,this},e.utils.Coordinate.prototype.translate=function(t,n){return this.x+=t,this.y+=n,this},e.utils.Rect=function(t,n,o,r){this.top=t,this.bottom=n,this.left=o,this.right=r},e.utils.Rect.prototype.contains=function(t,n){return t>=this.left&&t<=this.right&&n>=this.top&&n<=this.bottom},e.utils.Rect.prototype.intersects=function(t){return!(this.left>t.right||this.right<t.left||this.top>t.bottom||this.bottom<t.top)},e.utils.string={},e.utils.string.startsWith=function(t,n){return 0==t.lastIndexOf(n,0)},e.utils.string.shortestStringLength=function(t){return t.length?t.reduce(function(n,o){return n.length<o.length?n:o}).length:0},e.utils.string.commonWordPrefix=function(t,n){if(!t.length)return 0;if(1==t.length)return t[0].length;var o=0;n=n||e.utils.string.shortestStringLength(t);for(var r=0;r<n;r++){for(var p=t[0][r],b=1;b<t.length;b++)if(p!=t[b][r])return o;" "==p&&(o=r+1)}for(b=1;b<t.length;b++)if((p=t[b][r])&&" "!=p)return o;return n},e.utils.string.commonWordSuffix=function(t,n){if(!t.length)return 0;if(1==t.length)return t[0].length;var o=0;n=n||e.utils.string.shortestStringLength(t);for(var r=0;r<n;r++){for(var p=t[0].substr(-r-1,1),b=1;b<t.length;b++)if(p!=t[b].substr(-r-1,1))return o;" "==p&&(o=r+1)}for(b=1;b<t.length;b++)if((p=t[b].charAt(t[b].length-r-1))&&" "!=p)return o;return n},e.utils.string.wrap=function(t,n){t=t.split("\n");for(var o=0;o<t.length;o++)t[o]=e.utils.string.wrapLine_(t[o],n);return t.join("\n")},e.utils.string.wrapLine_=function(t,n){if(t.length<=n)return t;for(var o=t.trim().split(/\s+/),r=0;r<o.length;r++)o[r].length>n&&(n=o[r].length);r=-1/0;var p=1;do{var b=r,I=t;t=[];var x=o.length/p,k=1;for(r=0;r<o.length-1;r++)k<(r+1.5)/x?(k++,t[r]=!0):t[r]=!1;t=e.utils.string.wrapMutate_(o,t,n),r=e.utils.string.wrapScore_(o,t,n),t=e.utils.string.wrapToText_(o,t),p++}while(r>b);return I},e.utils.string.wrapScore_=function(t,n,o){for(var r=[0],p=[],b=0;b<t.length;b++)r[r.length-1]+=t[b].length,!0===n[b]?(r.push(0),p.push(t[b].charAt(t[b].length-1))):!1===n[b]&&r[r.length-1]++;for(t=Math.max.apply(Math,r),b=n=0;b<r.length;b++)n-=2*Math.pow(Math.abs(o-r[b]),1.5),n-=Math.pow(t-r[b],1.5),-1!=".?!".indexOf(p[b])?n+=o/3:-1!=",;)]}".indexOf(p[b])&&(n+=o/4);return 1<r.length&&r[r.length-1]<=r[r.length-2]&&(n+=.5),n},e.utils.string.wrapMutate_=function(t,n,o){for(var p,r=e.utils.string.wrapScore_(t,n,o),b=0;b<n.length-1;b++)if(n[b]!=n[b+1]){var I=[].concat(n);I[b]=!I[b],I[b+1]=!I[b+1];var x=e.utils.string.wrapScore_(t,I,o);x>r&&(r=x,p=I)}return p?e.utils.string.wrapMutate_(t,p,o):n},e.utils.string.wrapToText_=function(t,n){for(var o=[],r=0;r<t.length;r++)o.push(t[r]),void 0!==n[r]&&o.push(n[r]?"\n":" ");return o.join("")},e.utils.Size=function(t,n){this.width=t,this.height=n},e.utils.Size.equals=function(t,n){return t==n||!(!t||!n)&&t.width==n.width&&t.height==n.height},e.utils.style={},e.utils.style.getSize=function(t){if("none"!=e.utils.style.getStyle_(t,"display"))return e.utils.style.getSizeWithDisplay_(t);var n=t.style,o=n.display,r=n.visibility,p=n.position;n.visibility="hidden",n.position="absolute",n.display="inline";var b=t.offsetWidth;return t=t.offsetHeight,n.display=o,n.position=p,n.visibility=r,new e.utils.Size(b,t)},e.utils.style.getSizeWithDisplay_=function(t){return new e.utils.Size(t.offsetWidth,t.offsetHeight)},e.utils.style.getStyle_=function(t,n){return e.utils.style.getComputedStyle(t,n)||e.utils.style.getCascadedStyle(t,n)||t.style&&t.style[n]},e.utils.style.getComputedStyle=function(t,n){return document.defaultView&&document.defaultView.getComputedStyle&&(t=document.defaultView.getComputedStyle(t,null))&&(t[n]||t.getPropertyValue(n))||""},e.utils.style.getCascadedStyle=function(t,n){return t.currentStyle?t.currentStyle[n]:null},e.utils.style.getPageOffset=function(t){var n=new e.utils.Coordinate(0,0);t=t.getBoundingClientRect();var o=document.documentElement;return o=new e.utils.Coordinate(window.pageXOffset||o.scrollLeft,window.pageYOffset||o.scrollTop),n.x=t.left+o.x,n.y=t.top+o.y,n},e.utils.style.getViewportPageOffset=function(){var t=document.body,n=document.documentElement;return new e.utils.Coordinate(t.scrollLeft||n.scrollLeft,t.scrollTop||n.scrollTop)},e.utils.style.setElementShown=function(t,n){t.style.display=n?"":"none"},e.utils.style.isRightToLeft=function(t){return"rtl"==e.utils.style.getStyle_(t,"direction")},e.utils.style.getBorderBox=function(t){var n=e.utils.style.getComputedStyle(t,"borderLeftWidth"),o=e.utils.style.getComputedStyle(t,"borderRightWidth"),r=e.utils.style.getComputedStyle(t,"borderTopWidth");return t=e.utils.style.getComputedStyle(t,"borderBottomWidth"),{top:parseFloat(r),right:parseFloat(o),bottom:parseFloat(t),left:parseFloat(n)}},e.utils.style.scrollIntoContainerView=function(t,n,o){t=e.utils.style.getContainerOffsetToScrollInto(t,n,o),n.scrollLeft=t.x,n.scrollTop=t.y},e.utils.style.getContainerOffsetToScrollInto=function(t,n,o){var r=e.utils.style.getPageOffset(t),p=e.utils.style.getPageOffset(n),b=e.utils.style.getBorderBox(n),I=r.x-p.x-b.left;return r=r.y-p.y-b.top,p=e.utils.style.getSizeWithDisplay_(t),t=n.clientWidth-p.width,p=n.clientHeight-p.height,b=n.scrollLeft,n=n.scrollTop,o?(b+=I-t/2,n+=r-p/2):(b+=Math.min(I,Math.max(I-t,0)),n+=Math.min(r,Math.max(r-p,0))),new e.utils.Coordinate(b,n)},e.utils.userAgent={},function(t){function n(r){return-1!=o.indexOf(r.toUpperCase())}e.utils.userAgent.raw=t;var o=e.utils.userAgent.raw.toUpperCase();e.utils.userAgent.IE=n("Trident")||n("MSIE"),e.utils.userAgent.EDGE=n("Edge"),e.utils.userAgent.JAVA_FX=n("JavaFX"),e.utils.userAgent.CHROME=(n("Chrome")||n("CriOS"))&&!e.utils.userAgent.EDGE,e.utils.userAgent.WEBKIT=n("WebKit")&&!e.utils.userAgent.EDGE,e.utils.userAgent.GECKO=n("Gecko")&&!e.utils.userAgent.WEBKIT&&!e.utils.userAgent.IE&&!e.utils.userAgent.EDGE,e.utils.userAgent.ANDROID=n("Android"),t=e.utils.global.navigator&&e.utils.global.navigator.maxTouchPoints,e.utils.userAgent.IPAD=n("iPad")||n("Macintosh")&&0<t,e.utils.userAgent.IPOD=n("iPod"),e.utils.userAgent.IPHONE=n("iPhone")&&!e.utils.userAgent.IPAD&&!e.utils.userAgent.IPOD,e.utils.userAgent.MAC=n("Macintosh"),e.utils.userAgent.TABLET=e.utils.userAgent.IPAD||e.utils.userAgent.ANDROID&&!n("Mobile")||n("Silk"),e.utils.userAgent.MOBILE=!e.utils.userAgent.TABLET&&(e.utils.userAgent.IPOD||e.utils.userAgent.IPHONE||e.utils.userAgent.ANDROID||n("IEMobile"))}(e.utils.global.navigator&&e.utils.global.navigator.userAgent||""),e.utils.noEvent=function(t){t.preventDefault(),t.stopPropagation()},e.utils.isTargetInput=function(t){return"textarea"==t.target.type||"text"==t.target.type||"number"==t.target.type||"email"==t.target.type||"password"==t.target.type||"search"==t.target.type||"tel"==t.target.type||"url"==t.target.type||t.target.isContentEditable||t.target.dataset&&"true"==t.target.dataset.isTextInput},e.utils.getRelativeXY=function(t){var n=new e.utils.Coordinate(0,0),o=t.getAttribute("x");return o&&(n.x=parseInt(o,10)),(o=t.getAttribute("y"))&&(n.y=parseInt(o,10)),(o=(o=t.getAttribute("transform"))&&o.match(e.utils.getRelativeXY.XY_REGEX_))&&(n.x+=Number(o[1]),o[3]&&(n.y+=Number(o[3]))),(t=t.getAttribute("style"))&&-1<t.indexOf("translate")&&(t=t.match(e.utils.getRelativeXY.XY_STYLE_REGEX_))&&(n.x+=Number(t[1]),t[3]&&(n.y+=Number(t[3]))),n},e.utils.getInjectionDivXY_=function(t){for(var n=0,o=0;t;){var r=e.utils.getRelativeXY(t);if(n+=r.x,o+=r.y,-1!=(" "+(t.getAttribute("class")||"")+" ").indexOf(" injectionDiv "))break;t=t.parentNode}return new e.utils.Coordinate(n,o)},e.utils.getRelativeXY.XY_REGEX_=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,e.utils.getRelativeXY.XY_STYLE_REGEX_=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,e.utils.isRightButton=function(t){return!(!t.ctrlKey||!e.utils.userAgent.MAC)||2==t.button},e.utils.mouseToSvg=function(t,n,o){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,o||(o=n.getScreenCTM().inverse()),r.matrixTransform(o)},e.utils.getScrollDeltaPixels=function(t){switch(t.deltaMode){default:return{x:t.deltaX,y:t.deltaY};case 1:return{x:t.deltaX*e.LINE_MODE_MULTIPLIER,y:t.deltaY*e.LINE_MODE_MULTIPLIER};case 2:return{x:t.deltaX*e.PAGE_MODE_MULTIPLIER,y:t.deltaY*e.PAGE_MODE_MULTIPLIER}}},e.utils.tokenizeInterpolation=function(t){return e.utils.tokenizeInterpolation_(t,!0)},e.utils.replaceMessageReferences=function(t){return"string"!=typeof t?t:(t=e.utils.tokenizeInterpolation_(t,!1)).length?String(t[0]):""},e.utils.checkMessageReferences=function(t){for(var n=!0,o=e.Msg,r=t.match(/%{BKY_[A-Z]\w*}/gi),p=0;p<r.length;p++)null==o[r[p].toUpperCase().slice(6,-1)]&&(console.warn("No message string for "+r[p]+" in "+t),n=!1);return n},e.utils.tokenizeInterpolation_=function(t,n){var o=[],r=t.split("");r.push("");var p=0;t=[];for(var b=null,I=0;I<r.length;I++){var x=r[I];0==p?"%"==x?((x=t.join(""))&&o.push(x),t.length=0,p=1):t.push(x):1==p?"%"==x?(t.push(x),p=0):n&&"0"<=x&&"9">=x?(p=2,b=x,(x=t.join(""))&&o.push(x),t.length=0):"{"==x?p=3:(t.push("%",x),p=0):2==p?"0"<=x&&"9">=x?b+=x:(o.push(parseInt(b,10)),I--,p=0):3==p&&(""==x?(t.splice(0,0,"%{"),I--,p=0):"}"!=x?t.push(x):(p=t.join(""),/[A-Z]\w*/i.test(p)?(x=p.toUpperCase(),(x=e.utils.string.startsWith(x,"BKY_")?x.substring(4):null)&&x in e.Msg?"string"==typeof(p=e.Msg[x])?Array.prototype.push.apply(o,e.utils.tokenizeInterpolation_(p,n)):o.push(n?String(p):p):o.push("%{"+p+"}")):o.push("%{"+p+"}"),p=t.length=0))}for((x=t.join(""))&&o.push(x),n=[],I=t.length=0;I<o.length;++I)"string"==typeof o[I]?t.push(o[I]):((x=t.join(""))&&n.push(x),t.length=0,n.push(o[I]));return(x=t.join(""))&&n.push(x),t.length=0,n},e.utils.genUid=function(){for(var t=e.utils.genUid.soup_.length,n=[],o=0;20>o;o++)n[o]=e.utils.genUid.soup_.charAt(Math.random()*t);return n.join("")},e.utils.genUid.soup_="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e.utils.is3dSupported=function(){if(void 0!==e.utils.is3dSupported.cached_)return e.utils.is3dSupported.cached_;if(!e.utils.global.getComputedStyle)return!1;var t=document.createElement("p"),n="none",o={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};for(var r in document.body.insertBefore(t,null),o)if(void 0!==t.style[r]){if(t.style[r]="translate3d(1px,1px,1px)",!(n=e.utils.global.getComputedStyle(t)))return document.body.removeChild(t),!1;n=n.getPropertyValue(o[r])}return document.body.removeChild(t),e.utils.is3dSupported.cached_="none"!==n,e.utils.is3dSupported.cached_},e.utils.runAfterPageLoad=function(t){if("object"!=typeof document)throw Error("Blockly.utils.runAfterPageLoad() requires browser document.");if("complete"==document.readyState)t();else var n=setInterval(function(){"complete"==document.readyState&&(clearInterval(n),t())},10)},e.utils.getViewportBBox=function(){var t=e.utils.style.getViewportPageOffset();return new e.utils.Rect(t.y,document.documentElement.clientHeight+t.y,t.x,document.documentElement.clientWidth+t.x)},e.utils.arrayRemove=function(t,n){return-1!=(n=t.indexOf(n))&&(t.splice(n,1),!0)},e.utils.getDocumentScroll=function(){var t=document.documentElement,n=window;return e.utils.userAgent.IE&&n.pageYOffset!=t.scrollTop?new e.utils.Coordinate(t.scrollLeft,t.scrollTop):new e.utils.Coordinate(n.pageXOffset||t.scrollLeft,n.pageYOffset||t.scrollTop)},e.utils.getBlockTypeCounts=function(t,n){var o=Object.create(null),r=t.getDescendants(!0);for(n&&(t=t.getNextBlock())&&(t=r.indexOf(t),r.splice(t,r.length-t)),t=0;n=r[t];t++)o[n.type]?o[n.type]++:o[n.type]=1;return o},e.utils.screenToWsCoordinates=function(t,n){var o=n.x;n=n.y;var r=t.getInjectionDiv().getBoundingClientRect();return o=new e.utils.Coordinate(o-r.left,n-r.top),n=t.getOriginOffsetInPixels(),e.utils.Coordinate.difference(o,n).scale(1/t.scale)},e.utils.parseBlockColour=function(t){var n="string"==typeof t?e.utils.replaceMessageReferences(t):t,o=Number(n);if(!isNaN(o)&&0<=o&&360>=o)return{hue:o,hex:e.utils.colour.hsvToHex(o,e.HSV_SATURATION,255*e.HSV_VALUE)};if(o=e.utils.colour.parse(n))return{hue:null,hex:o};throw o='Invalid colour: "'+n+'"',t!=n&&(o+=' (from "'+t+'")'),Error(o)},e.Touch={},e.Touch.TOUCH_ENABLED="ontouchstart"in e.utils.global||!!(e.utils.global.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!e.utils.global.navigator||!e.utils.global.navigator.maxTouchPoints&&!e.utils.global.navigator.msMaxTouchPoints),e.Touch.touchIdentifier_=null,e.Touch.TOUCH_MAP={},e.utils.global.PointerEvent?e.Touch.TOUCH_MAP={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]}:e.Touch.TOUCH_ENABLED&&(e.Touch.TOUCH_MAP={mousedown:["touchstart"],mousemove:["touchmove"],mouseup:["touchend","touchcancel"]}),e.longPid_=0,e.longStart=function(t,n){e.longStop_(),t.changedTouches&&1!=t.changedTouches.length||(e.longPid_=setTimeout(function(){t.changedTouches&&(t.button=2,t.clientX=t.changedTouches[0].clientX,t.clientY=t.changedTouches[0].clientY),n&&n.handleRightClick(t)},e.LONGPRESS))},e.longStop_=function(){e.longPid_&&(clearTimeout(e.longPid_),e.longPid_=0)},e.Touch.clearTouchIdentifier=function(){e.Touch.touchIdentifier_=null},e.Touch.shouldHandleEvent=function(t){return!e.Touch.isMouseOrTouchEvent(t)||e.Touch.checkTouchIdentifier(t)},e.Touch.getTouchIdentifierFromEvent=function(t){return null!=t.pointerId?t.pointerId:t.changedTouches&&t.changedTouches[0]&&null!=t.changedTouches[0].identifier?t.changedTouches[0].identifier:"mouse"},e.Touch.checkTouchIdentifier=function(t){var n=e.Touch.getTouchIdentifierFromEvent(t);return null!=e.Touch.touchIdentifier_?e.Touch.touchIdentifier_==n:("mousedown"==t.type||"touchstart"==t.type||"pointerdown"==t.type)&&(e.Touch.touchIdentifier_=n,!0)},e.Touch.setClientFromTouch=function(t){if(e.utils.string.startsWith(t.type,"touch")){var n=t.changedTouches[0];t.clientX=n.clientX,t.clientY=n.clientY}},e.Touch.isMouseOrTouchEvent=function(t){return e.utils.string.startsWith(t.type,"touch")||e.utils.string.startsWith(t.type,"mouse")||e.utils.string.startsWith(t.type,"pointer")},e.Touch.isTouchEvent=function(t){return e.utils.string.startsWith(t.type,"touch")||e.utils.string.startsWith(t.type,"pointer")},e.Touch.splitEventByTouches=function(t){var n=[];if(t.changedTouches)for(var o=0;o<t.changedTouches.length;o++)n[o]={type:t.type,changedTouches:[t.changedTouches[o]],target:t.target,stopPropagation:function(){t.stopPropagation()},preventDefault:function(){t.preventDefault()}};else n.push(t);return n},e.browserEvents={},e.browserEvents.conditionalBind=function(t,n,o,r,p,b){var I=!1,x=function(rt){var ct=!p;rt=e.Touch.splitEventByTouches(rt);for(var At,wt=0;At=rt[wt];wt++)(!ct||e.Touch.shouldHandleEvent(At))&&(e.Touch.setClientFromTouch(At),o?r.call(o,At):r(At),I=!0)},k=[];if(e.utils.global.PointerEvent&&n in e.Touch.TOUCH_MAP)for(var X,Y=0;X=e.Touch.TOUCH_MAP[n][Y];Y++)t.addEventListener(X,x,!1),k.push([t,X,x]);else if(t.addEventListener(n,x,!1),k.push([t,n,x]),n in e.Touch.TOUCH_MAP){var it=function(rt){x(rt),I&&!b&&rt.preventDefault()};for(Y=0;X=e.Touch.TOUCH_MAP[n][Y];Y++)t.addEventListener(X,it,!1),k.push([t,X,it])}return k},e.browserEvents.bind=function(t,n,o,r){var p=function(Y){o?r.call(o,Y):r(Y)},b=[];if(e.utils.global.PointerEvent&&n in e.Touch.TOUCH_MAP)for(var x,I=0;x=e.Touch.TOUCH_MAP[n][I];I++)t.addEventListener(x,p,!1),b.push([t,x,p]);else if(t.addEventListener(n,p,!1),b.push([t,n,p]),n in e.Touch.TOUCH_MAP){var k=function(Y){if(Y.changedTouches&&1==Y.changedTouches.length){var X=Y.changedTouches[0];Y.clientX=X.clientX,Y.clientY=X.clientY}p(Y),Y.preventDefault()};for(I=0;x=e.Touch.TOUCH_MAP[n][I];I++)t.addEventListener(x,k,!1),b.push([t,x,k])}return b},e.browserEvents.unbind=function(t){for(;t.length;){var n=t.pop(),o=n[2];n[0].removeEventListener(n[1],o,!1)}return o},e.ComponentManager=function(){this.componentData_=Object.create(null),this.capabilityToComponentIds_=Object.create(null)},e.ComponentManager.prototype.addComponent=function(t,n){var o=t.component.id;if(!n&&this.componentData_[o])throw Error('Plugin "'+o+'" with capabilities "'+this.componentData_[o].capabilities+'" already added.');this.componentData_[o]=t,n=[];for(var r=0;r<t.capabilities.length;r++){var p=String(t.capabilities[r]).toLowerCase();n.push(p),void 0===this.capabilityToComponentIds_[p]?this.capabilityToComponentIds_[p]=[o]:this.capabilityToComponentIds_[p].push(o)}this.componentData_[o].capabilities=n},e.ComponentManager.prototype.removeComponent=function(t){var n=this.componentData_[t];if(n){for(var o=0;o<n.capabilities.length;o++){var r=String(n.capabilities[o]).toLowerCase();this.capabilityToComponentIds_[r].splice(this.capabilityToComponentIds_[r].indexOf(t),1)}delete this.componentData_[t]}},e.ComponentManager.prototype.addCapability=function(t,n){if(!this.getComponent(t))throw Error('Cannot add capability, "'+n+'". Plugin "'+t+'" has not been added to the ComponentManager');this.hasCapability(t,n)?console.warn('Plugin "'+t+'already has capability "'+n+'"'):(n=String(n).toLowerCase(),this.componentData_[t].capabilities.push(n),this.capabilityToComponentIds_[n].push(t))},e.ComponentManager.prototype.removeCapability=function(t,n){if(!this.getComponent(t))throw Error('Cannot remove capability, "'+n+'". Plugin "'+t+'" has not been added to the ComponentManager');this.hasCapability(t,n)?(n=String(n).toLowerCase(),this.componentData_[t].capabilities.splice(this.componentData_[t].capabilities.indexOf(n),1),this.capabilityToComponentIds_[n].splice(this.capabilityToComponentIds_[n].indexOf(t),1)):console.warn('Plugin "'+t+"doesn't have capability \""+n+'" to remove')},e.ComponentManager.prototype.hasCapability=function(t,n){return n=String(n).toLowerCase(),-1!==this.componentData_[t].capabilities.indexOf(n)},e.ComponentManager.prototype.getComponent=function(t){return this.componentData_[t]&&this.componentData_[t].component},e.ComponentManager.prototype.getComponents=function(t,n){if(t=String(t).toLowerCase(),!(t=this.capabilityToComponentIds_[t]))return[];var o=[];if(n){var r=[],p=this.componentData_;t.forEach(function(b){r.push(p[b])}),r.sort(function(b,I){return b.weight-I.weight}),r.forEach(function(b){o.push(b.component)})}else p=this.componentData_,t.forEach(function(b){o.push(p[b].component)});return o},e.ComponentManager.Capability=function(t){this.name_=t},e.ComponentManager.Capability.prototype.toString=function(){return this.name_},e.ComponentManager.Capability.POSITIONABLE=new e.ComponentManager.Capability("positionable"),e.ComponentManager.Capability.DRAG_TARGET=new e.ComponentManager.Capability("drag_target"),e.ComponentManager.Capability.DELETE_AREA=new e.ComponentManager.Capability("delete_area"),e.ComponentManager.Capability.AUTOHIDEABLE=new e.ComponentManager.Capability("autohideable"),e.utils.Svg=function(t){this.tagName_=t},e.utils.Svg.prototype.toString=function(){return this.tagName_},e.utils.Svg.ANIMATE=new e.utils.Svg("animate"),e.utils.Svg.CIRCLE=new e.utils.Svg("circle"),e.utils.Svg.CLIPPATH=new e.utils.Svg("clipPath"),e.utils.Svg.DEFS=new e.utils.Svg("defs"),e.utils.Svg.FECOMPOSITE=new e.utils.Svg("feComposite"),e.utils.Svg.FECOMPONENTTRANSFER=new e.utils.Svg("feComponentTransfer"),e.utils.Svg.FEFLOOD=new e.utils.Svg("feFlood"),e.utils.Svg.FEFUNCA=new e.utils.Svg("feFuncA"),e.utils.Svg.FEGAUSSIANBLUR=new e.utils.Svg("feGaussianBlur"),e.utils.Svg.FEPOINTLIGHT=new e.utils.Svg("fePointLight"),e.utils.Svg.FESPECULARLIGHTING=new e.utils.Svg("feSpecularLighting"),e.utils.Svg.FILTER=new e.utils.Svg("filter"),e.utils.Svg.FOREIGNOBJECT=new e.utils.Svg("foreignObject"),e.utils.Svg.G=new e.utils.Svg("g"),e.utils.Svg.IMAGE=new e.utils.Svg("image"),e.utils.Svg.LINE=new e.utils.Svg("line"),e.utils.Svg.PATH=new e.utils.Svg("path"),e.utils.Svg.PATTERN=new e.utils.Svg("pattern"),e.utils.Svg.POLYGON=new e.utils.Svg("polygon"),e.utils.Svg.RECT=new e.utils.Svg("rect"),e.utils.Svg.SVG=new e.utils.Svg("svg"),e.utils.Svg.TEXT=new e.utils.Svg("text"),e.utils.Svg.TSPAN=new e.utils.Svg("tspan"),e.utils.dom={},e.utils.dom.SVG_NS="http://www.w3.org/2000/svg",e.utils.dom.HTML_NS="http://www.w3.org/1999/xhtml",e.utils.dom.XLINK_NS="http://www.w3.org/1999/xlink",e.utils.dom.NodeType={ELEMENT_NODE:1,TEXT_NODE:3,COMMENT_NODE:8,DOCUMENT_POSITION_CONTAINED_BY:16},e.utils.dom.cacheWidths_=null,e.utils.dom.cacheReference_=0,e.utils.dom.canvasContext_=null,e.utils.dom.createSvgElement=function(t,n,o){for(var r in t=document.createElementNS(e.utils.dom.SVG_NS,String(t)),n)t.setAttribute(r,n[r]);return document.body.runtimeStyle&&(t.runtimeStyle=t.currentStyle=t.style),o&&o.appendChild(t),t},e.utils.dom.addClass=function(t,n){var o=t.getAttribute("class")||"";return-1==(" "+o+" ").indexOf(" "+n+" ")&&(o&&(o+=" "),t.setAttribute("class",o+n),!0)},e.utils.dom.removeClasses=function(t,n){n=n.split(" ");for(var o=0;o<n.length;o++)e.utils.dom.removeClass(t,n[o])},e.utils.dom.removeClass=function(t,n){var o=t.getAttribute("class");if(-1==(" "+o+" ").indexOf(" "+n+" "))return!1;o=o.split(/\s+/);for(var r=0;r<o.length;r++)o[r]&&o[r]!=n||(o.splice(r,1),r--);return o.length?t.setAttribute("class",o.join(" ")):t.removeAttribute("class"),!0},e.utils.dom.hasClass=function(t,n){return-1!=(" "+t.getAttribute("class")+" ").indexOf(" "+n+" ")},e.utils.dom.removeNode=function(t){return t&&t.parentNode?t.parentNode.removeChild(t):null},e.utils.dom.insertAfter=function(t,n){var o=n.nextSibling;if(!(n=n.parentNode))throw Error("Reference node has no parent.");o?n.insertBefore(t,o):n.appendChild(t)},e.utils.dom.containsNode=function(t,n){return!!(t.compareDocumentPosition(n)&e.utils.dom.NodeType.DOCUMENT_POSITION_CONTAINED_BY)},e.utils.dom.setCssTransform=function(t,n){t.style.transform=n,t.style["-webkit-transform"]=n},e.utils.dom.startTextWidthCache=function(){e.utils.dom.cacheReference_++,e.utils.dom.cacheWidths_||(e.utils.dom.cacheWidths_=Object.create(null))},e.utils.dom.stopTextWidthCache=function(){e.utils.dom.cacheReference_--,e.utils.dom.cacheReference_||(e.utils.dom.cacheWidths_=null)},e.utils.dom.getTextWidth=function(t){var o,n=t.textContent+"\n"+t.className.baseVal;if(e.utils.dom.cacheWidths_&&(o=e.utils.dom.cacheWidths_[n]))return o;try{o=e.utils.userAgent.IE||e.utils.userAgent.EDGE?t.getBBox().width:t.getComputedTextLength()}catch(r){return 8*t.textContent.length}return e.utils.dom.cacheWidths_&&(e.utils.dom.cacheWidths_[n]=o),o},e.utils.dom.getFastTextWidth=function(t,n,o,r){return e.utils.dom.getFastTextWidthWithSizeString(t,n+"pt",o,r)},e.utils.dom.getFastTextWidthWithSizeString=function(t,n,o,r){var b,p=t.textContent;return t=p+"\n"+t.className.baseVal,e.utils.dom.cacheWidths_&&(b=e.utils.dom.cacheWidths_[t])||(e.utils.dom.canvasContext_||((b=document.createElement("canvas")).className="blocklyComputeCanvas",document.body.appendChild(b),e.utils.dom.canvasContext_=b.getContext("2d")),e.utils.dom.canvasContext_.font=o+" "+n+" "+r,b=e.utils.dom.canvasContext_.measureText(p).width,e.utils.dom.cacheWidths_&&(e.utils.dom.cacheWidths_[t]=b)),b},e.utils.dom.measureFontMetrics=function(t,n,o,r){var p=document.createElement("span");p.style.font=o+" "+n+" "+r,p.textContent=t,(t=document.createElement("div")).style.width="1px",t.style.height="0px",(n=document.createElement("div")).setAttribute("style","position: fixed; top: 0; left: 0; display: flex;"),n.appendChild(p),n.appendChild(t),document.body.appendChild(n);try{o={},n.style.alignItems="baseline",o.baseline=t.offsetTop-p.offsetTop,n.style.alignItems="flex-end",o.height=t.offsetTop-p.offsetTop}finally{document.body.removeChild(n)}return o},e.utils.math={},e.utils.math.toRadians=function(t){return t*Math.PI/180},e.utils.math.toDegrees=function(t){return 180*t/Math.PI},e.utils.math.clamp=function(t,n,o){if(o<t){var r=o;o=t,t=r}return Math.max(t,Math.min(n,o))},e.DropDownDiv=function(){},e.DropDownDiv.boundsElement_=null,e.DropDownDiv.owner_=null,e.DropDownDiv.positionToField_=null,e.DropDownDiv.ARROW_SIZE=16,e.DropDownDiv.BORDER_SIZE=1,e.DropDownDiv.ARROW_HORIZONTAL_PADDING=12,e.DropDownDiv.PADDING_Y=16,e.DropDownDiv.ANIMATION_TIME=.25,e.DropDownDiv.animateOutTimer_=null,e.DropDownDiv.onHide_=null,e.DropDownDiv.rendererClassName_="",e.DropDownDiv.themeClassName_="",e.DropDownDiv.createDom=function(){if(!e.DropDownDiv.DIV_){var t=document.createElement("div");t.className="blocklyDropDownDiv",(e.parentContainer||document.body).appendChild(t),e.DropDownDiv.DIV_=t;var n=document.createElement("div");n.className="blocklyDropDownContent",t.appendChild(n),e.DropDownDiv.content_=n,(n=document.createElement("div")).className="blocklyDropDownArrow",t.appendChild(n),e.DropDownDiv.arrow_=n,e.DropDownDiv.DIV_.style.opacity=0,e.DropDownDiv.DIV_.style.transition="transform "+e.DropDownDiv.ANIMATION_TIME+"s, opacity "+e.DropDownDiv.ANIMATION_TIME+"s",t.addEventListener("focusin",function(){e.utils.dom.addClass(t,"blocklyFocused")}),t.addEventListener("focusout",function(){e.utils.dom.removeClass(t,"blocklyFocused")})}},e.DropDownDiv.setBoundsElement=function(t){e.DropDownDiv.boundsElement_=t},e.DropDownDiv.getContentDiv=function(){return e.DropDownDiv.content_},e.DropDownDiv.clearContent=function(){e.DropDownDiv.content_.textContent="",e.DropDownDiv.content_.style.width=""},e.DropDownDiv.setColour=function(t,n){e.DropDownDiv.DIV_.style.backgroundColor=t,e.DropDownDiv.DIV_.style.borderColor=n},e.DropDownDiv.showPositionedByBlock=function(t,n,o,r){return e.DropDownDiv.showPositionedByRect_(e.DropDownDiv.getScaledBboxOfBlock_(n),t,o,r)},e.DropDownDiv.showPositionedByField=function(t,n,o){return e.DropDownDiv.positionToField_=!0,e.DropDownDiv.showPositionedByRect_(e.DropDownDiv.getScaledBboxOfField_(t),t,n,o)},e.DropDownDiv.getScaledBboxOfBlock_=function(t){var n=t.getSvgRoot(),o=n.getBBox(),r=t.workspace.scale;return t=o.height*r,o=o.width*r,n=e.utils.style.getPageOffset(n),new e.utils.Rect(n.y,n.y+t,n.x,n.x+o)},e.DropDownDiv.getScaledBboxOfField_=function(t){return t=t.getScaledBBox(),new e.utils.Rect(t.top,t.bottom,t.left,t.right)},e.DropDownDiv.showPositionedByRect_=function(t,n,o,r){var p=t.left+(t.right-t.left)/2,b=t.bottom;t=t.top,r&&(t+=r);for(var I=(r=n.getSourceBlock()).workspace;I.options.parentWorkspace;)I=I.options.parentWorkspace;return e.DropDownDiv.setBoundsElement(I.getParentSvg().parentNode),e.DropDownDiv.show(n,r.RTL,p,b,p,t,o)},e.DropDownDiv.show=function(t,n,o,r,p,b,I){return e.DropDownDiv.owner_=t,e.DropDownDiv.onHide_=I||null,(t=e.DropDownDiv.DIV_).style.direction=n?"rtl":"ltr",n=e.getMainWorkspace(),e.DropDownDiv.rendererClassName_=n.getRenderer().getClassName(),e.DropDownDiv.themeClassName_=n.getTheme().getClassName(),e.utils.dom.addClass(t,e.DropDownDiv.rendererClassName_),e.utils.dom.addClass(t,e.DropDownDiv.themeClassName_),e.DropDownDiv.positionInternal_(o,r,p,b)},e.DropDownDiv.getBoundsInfo_=function(){var t=e.utils.style.getPageOffset(e.DropDownDiv.boundsElement_),n=e.utils.style.getSize(e.DropDownDiv.boundsElement_);return{left:t.x,right:t.x+n.width,top:t.y,bottom:t.y+n.height,width:n.width,height:n.height}},e.DropDownDiv.getPositionMetrics_=function(t,n,o,r){var p=e.DropDownDiv.getBoundsInfo_(),b=e.utils.style.getSize(e.DropDownDiv.DIV_);return n+b.height<p.bottom?e.DropDownDiv.getPositionBelowMetrics_(t,n,p,b):r-b.height>p.top?e.DropDownDiv.getPositionAboveMetrics_(o,r,p,b):n+b.height<document.documentElement.clientHeight?e.DropDownDiv.getPositionBelowMetrics_(t,n,p,b):r-b.height>document.documentElement.clientTop?e.DropDownDiv.getPositionAboveMetrics_(o,r,p,b):e.DropDownDiv.getPositionTopOfPageMetrics_(t,p,b)},e.DropDownDiv.getPositionBelowMetrics_=function(t,n,o,r){return{initialX:(t=e.DropDownDiv.getPositionX(t,o.left,o.right,r.width)).divX,initialY:n,finalX:t.divX,finalY:n+e.DropDownDiv.PADDING_Y,arrowX:t.arrowX,arrowY:-(e.DropDownDiv.ARROW_SIZE/2+e.DropDownDiv.BORDER_SIZE),arrowAtTop:!0,arrowVisible:!0}},e.DropDownDiv.getPositionAboveMetrics_=function(t,n,o,r){return{initialX:(t=e.DropDownDiv.getPositionX(t,o.left,o.right,r.width)).divX,initialY:n-r.height,finalX:t.divX,finalY:n-r.height-e.DropDownDiv.PADDING_Y,arrowX:t.arrowX,arrowY:r.height-2*e.DropDownDiv.BORDER_SIZE-e.DropDownDiv.ARROW_SIZE/2,arrowAtTop:!1,arrowVisible:!0}},e.DropDownDiv.getPositionTopOfPageMetrics_=function(t,n,o){return{initialX:(t=e.DropDownDiv.getPositionX(t,n.left,n.right,o.width)).divX,initialY:0,finalX:t.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},e.DropDownDiv.getPositionX=function(t,n,o,r){var p=t;return t=e.utils.math.clamp(n,t-r/2,o-r),{arrowX:r=e.utils.math.clamp(n=e.DropDownDiv.ARROW_HORIZONTAL_PADDING,(p-=e.DropDownDiv.ARROW_SIZE/2)-t,r-n-e.DropDownDiv.ARROW_SIZE),divX:t}},e.DropDownDiv.isVisible=function(){return!!e.DropDownDiv.owner_},e.DropDownDiv.hideIfOwner=function(t,n){return e.DropDownDiv.owner_===t&&(n?e.DropDownDiv.hideWithoutAnimation():e.DropDownDiv.hide(),!0)},e.DropDownDiv.hide=function(){var t=e.DropDownDiv.DIV_;t.style.transform="translate(0, 0)",t.style.opacity=0,e.DropDownDiv.animateOutTimer_=setTimeout(function(){e.DropDownDiv.hideWithoutAnimation()},1e3*e.DropDownDiv.ANIMATION_TIME),e.DropDownDiv.onHide_&&(e.DropDownDiv.onHide_(),e.DropDownDiv.onHide_=null)},e.DropDownDiv.hideWithoutAnimation=function(){if(e.DropDownDiv.isVisible()){e.DropDownDiv.animateOutTimer_&&clearTimeout(e.DropDownDiv.animateOutTimer_);var t=e.DropDownDiv.DIV_;t.style.transform="",t.style.left="",t.style.top="",t.style.opacity=0,t.style.display="none",t.style.backgroundColor="",t.style.borderColor="",e.DropDownDiv.onHide_&&(e.DropDownDiv.onHide_(),e.DropDownDiv.onHide_=null),e.DropDownDiv.clearContent(),e.DropDownDiv.owner_=null,e.DropDownDiv.rendererClassName_&&(e.utils.dom.removeClass(t,e.DropDownDiv.rendererClassName_),e.DropDownDiv.rendererClassName_=""),e.DropDownDiv.themeClassName_&&(e.utils.dom.removeClass(t,e.DropDownDiv.themeClassName_),e.DropDownDiv.themeClassName_=""),e.getMainWorkspace().markFocused()}},e.DropDownDiv.positionInternal_=function(t,n,o,r){(t=e.DropDownDiv.getPositionMetrics_(t,n,o,r)).arrowVisible?(e.DropDownDiv.arrow_.style.display="",e.DropDownDiv.arrow_.style.transform="translate("+t.arrowX+"px,"+t.arrowY+"px) rotate(45deg)",e.DropDownDiv.arrow_.setAttribute("class",t.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):e.DropDownDiv.arrow_.style.display="none",n=Math.floor(t.initialX),o=Math.floor(t.initialY),r=Math.floor(t.finalX);var p=Math.floor(t.finalY),b=e.DropDownDiv.DIV_;return b.style.left=n+"px",b.style.top=o+"px",b.style.display="block",b.style.opacity=1,b.style.transform="translate("+(r-n)+"px,"+(p-o)+"px)",!!t.arrowAtTop},e.DropDownDiv.repositionForWindowResize=function(){if(e.DropDownDiv.owner_){var t=e.DropDownDiv.owner_,n=t.getSourceBlock();t=e.DropDownDiv.positionToField_?e.DropDownDiv.getScaledBboxOfField_(t):e.DropDownDiv.getScaledBboxOfBlock_(n),e.DropDownDiv.positionInternal_(n=t.left+(t.right-t.left)/2,t.bottom,n,t.top)}else e.DropDownDiv.hide()},e.registry={},e.registry.typeMap_=Object.create(null),e.registry.DEFAULT="default",e.registry.Type=function(t){this.name_=t},e.registry.Type.prototype.toString=function(){return this.name_},e.registry.Type.CONNECTION_CHECKER=new e.registry.Type("connectionChecker"),e.registry.Type.CURSOR=new e.registry.Type("cursor"),e.registry.Type.EVENT=new e.registry.Type("event"),e.registry.Type.FIELD=new e.registry.Type("field"),e.registry.Type.RENDERER=new e.registry.Type("renderer"),e.registry.Type.TOOLBOX=new e.registry.Type("toolbox"),e.registry.Type.THEME=new e.registry.Type("theme"),e.registry.Type.TOOLBOX_ITEM=new e.registry.Type("toolboxItem"),e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX=new e.registry.Type("flyoutsVerticalToolbox"),e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX=new e.registry.Type("flyoutsHorizontalToolbox"),e.registry.Type.METRICS_MANAGER=new e.registry.Type("metricsManager"),e.registry.Type.BLOCK_DRAGGER=new e.registry.Type("blockDragger"),e.registry.register=function(t,n,o,r){if(!(t instanceof e.registry.Type)&&"string"!=typeof t||""==String(t).trim())throw Error('Invalid type "'+t+'". The type must be a non-empty string or a Blockly.registry.Type.');if(t=String(t).toLowerCase(),"string"!=typeof n||""==n.trim())throw Error('Invalid name "'+n+'". The name must be a non-empty string.');if(n=n.toLowerCase(),!o)throw Error("Can not register a null value");var p=e.registry.typeMap_[t];if(p||(p=e.registry.typeMap_[t]=Object.create(null)),e.registry.validate_(t,o),!r&&p[n])throw Error('Name "'+n+'" with type "'+t+'" already registered.');p[n]=o},e.registry.validate_=function(t,n){switch(t){case String(e.registry.Type.FIELD):if("function"!=typeof n.fromJson)throw Error('Type "'+t+'" must have a fromJson function')}},e.registry.unregister=function(t,n){t=String(t).toLowerCase(),n=n.toLowerCase();var o=e.registry.typeMap_[t];o&&o[n]?delete e.registry.typeMap_[t][n]:console.warn("Unable to unregister ["+n+"]["+t+"] from the registry.")},e.registry.getItem_=function(t,n,o){t=String(t).toLowerCase(),n=n.toLowerCase();var r=e.registry.typeMap_[t];if(!r||!r[n]){if(n="Unable to find ["+n+"]["+t+"] in the registry.",o)throw Error(n+" You must require or register a "+t+" plugin.");return console.warn(n),null}return r[n]},e.registry.hasItem=function(t,n){return t=String(t).toLowerCase(),n=n.toLowerCase(),!!(t=e.registry.typeMap_[t])&&!!t[n]},e.registry.getClass=function(t,n,o){return e.registry.getItem_(t,n,o)},e.registry.getObject=function(t,n,o){return e.registry.getItem_(t,n,o)},e.registry.getClassFromOptions=function(t,n,o){return"function"==typeof(n=n.plugins[t.toString()]||e.registry.DEFAULT)?n:e.registry.getClass(t,n,o)},e.Events={},e.Events.group_="",e.Events.recordUndo=!0,e.Events.disabled_=0,e.Events.CREATE="create",e.Events.BLOCK_CREATE=e.Events.CREATE,e.Events.DELETE="delete",e.Events.BLOCK_DELETE=e.Events.DELETE,e.Events.CHANGE="change",e.Events.BLOCK_CHANGE=e.Events.CHANGE,e.Events.MOVE="move",e.Events.BLOCK_MOVE=e.Events.MOVE,e.Events.VAR_CREATE="var_create",e.Events.VAR_DELETE="var_delete",e.Events.VAR_RENAME="var_rename",e.Events.UI="ui",e.Events.BLOCK_DRAG="drag",e.Events.SELECTED="selected",e.Events.CLICK="click",e.Events.MARKER_MOVE="marker_move",e.Events.BUBBLE_OPEN="bubble_open",e.Events.TRASHCAN_OPEN="trashcan_open",e.Events.TOOLBOX_ITEM_SELECT="toolbox_item_select",e.Events.THEME_CHANGE="theme_change",e.Events.VIEWPORT_CHANGE="viewport_change",e.Events.COMMENT_CREATE="comment_create",e.Events.COMMENT_DELETE="comment_delete",e.Events.COMMENT_CHANGE="comment_change",e.Events.COMMENT_MOVE="comment_move",e.Events.FINISHED_LOADING="finished_loading",e.Events.BUMP_EVENTS=[e.Events.BLOCK_CREATE,e.Events.BLOCK_MOVE,e.Events.COMMENT_CREATE,e.Events.COMMENT_MOVE],e.Events.FIRE_QUEUE_=[],e.Events.fire=function(t){e.Events.isEnabled()&&(e.Events.FIRE_QUEUE_.length||setTimeout(e.Events.fireNow_,0),e.Events.FIRE_QUEUE_.push(t))},e.Events.fireNow_=function(){for(var o,t=e.Events.filter(e.Events.FIRE_QUEUE_,!0),n=e.Events.FIRE_QUEUE_.length=0;o=t[n];n++)if(o.workspaceId){var r=e.Workspace.getById(o.workspaceId);r&&r.fireChangeListener(o)}},e.Events.filter=function(t,n){t=t.slice(),n||t.reverse();for(var b,o=[],r=Object.create(null),p=0;b=t[p];p++)if(!b.isNull()){var I=[b.isUiEvent?e.Events.UI:b.type,b.blockId,b.workspaceId].join(" "),x=r[I],k=x?x.event:null;x?b.type==e.Events.MOVE&&x.index==p-1?(k.newParentId=b.newParentId,k.newInputName=b.newInputName,k.newCoordinate=b.newCoordinate,x.index=p):b.type==e.Events.CHANGE&&b.element==k.element&&b.name==k.name?k.newValue=b.newValue:b.type==e.Events.VIEWPORT_CHANGE?(k.viewTop=b.viewTop,k.viewLeft=b.viewLeft,k.scale=b.scale,k.oldScale=b.oldScale):(b.type!=e.Events.CLICK||k.type!=e.Events.BUBBLE_OPEN)&&(r[I]={event:b,index:p},o.push(b)):(r[I]={event:b,index:p},o.push(b))}for(t=o.filter(function(Y){return!Y.isNull()}),n||t.reverse(),p=1;b=t[p];p++)b.type==e.Events.CHANGE&&"mutation"==b.element&&t.unshift(t.splice(p,1)[0]);return t},e.Events.clearPendingUndo=function(){for(var n,t=0;n=e.Events.FIRE_QUEUE_[t];t++)n.recordUndo=!1},e.Events.disable=function(){e.Events.disabled_++},e.Events.enable=function(){e.Events.disabled_--},e.Events.isEnabled=function(){return 0==e.Events.disabled_},e.Events.getGroup=function(){return e.Events.group_},e.Events.setGroup=function(t){e.Events.group_="boolean"==typeof t?t?e.utils.genUid():"":t},e.Events.getDescendantIds=function(t){var n=[];t=t.getDescendants(!1);for(var r,o=0;r=t[o];o++)n[o]=r.id;return n},e.Events.fromJson=function(t,n){var o=e.Events.get(t.type);if(!o)throw Error("Unknown event type.");return(o=new o).fromJson(t),o.workspaceId=n.id,o},e.Events.get=function(t){return e.registry.getClass(e.registry.Type.EVENT,t)},e.Events.disableOrphans=function(t){if((t.type==e.Events.MOVE||t.type==e.Events.CREATE)&&t.workspaceId){var n=e.Workspace.getById(t.workspaceId),o=n.getBlockById(t.blockId);if(o){t=e.Events.recordUndo;try{e.Events.recordUndo=!1;var r=o.getParent();if(r&&r.isEnabled()){var b,p=o.getDescendants(!1);for(n=0;b=p[n];n++)b.setEnabled(!0)}else if((o.outputConnection||o.previousConnection)&&!n.isDragging())do{o.setEnabled(!1),o=o.getNextBlock()}while(o)}finally{e.Events.recordUndo=t}}}},e.Events.Abstract=function(){this.isBlank=null,this.workspaceId=void 0,this.group=e.Events.getGroup(),this.recordUndo=e.Events.recordUndo},e.Events.Abstract.prototype.isUiEvent=!1,e.Events.Abstract.prototype.toJson=function(){var t={type:this.type};return this.group&&(t.group=this.group),t},e.Events.Abstract.prototype.fromJson=function(t){this.isBlank=!1,this.group=t.group},e.Events.Abstract.prototype.isNull=function(){return!1},e.Events.Abstract.prototype.run=function(t){},e.Events.Abstract.prototype.getEventWorkspace_=function(){if(this.workspaceId)var t=e.Workspace.getById(this.workspaceId);if(!t)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return t},e.utils.object={},e.utils.object.inherits=function(t,n){t.superClass_=n.prototype,t.prototype=Object.create(n.prototype),t.prototype.constructor=t},e.utils.object.mixin=function(t,n){for(var o in n)t[o]=n[o]},e.utils.object.deepMerge=function(t,n){for(var o in n)t[o]=null!=n[o]&&"object"==typeof n[o]?e.utils.object.deepMerge(t[o]||Object.create(null),n[o]):n[o];return t},e.utils.object.values=function(t){return Object.values?Object.values(t):Object.keys(t).map(function(n){return t[n]})},e.utils.xml={},e.utils.xml.NAME_SPACE="https://developers.google.com/blockly/xml",e.utils.xml.document=function(){return document},e.utils.xml.createElement=function(t){return e.utils.xml.document().createElementNS(e.utils.xml.NAME_SPACE,t)},e.utils.xml.createTextNode=function(t){return e.utils.xml.document().createTextNode(t)},e.utils.xml.textToDomDocument=function(t){return(new DOMParser).parseFromString(t,"text/xml")},e.utils.xml.domToText=function(t){return(new XMLSerializer).serializeToString(t)},e.inputTypes={VALUE:e.connectionTypes.INPUT_VALUE,STATEMENT:e.connectionTypes.NEXT_STATEMENT,DUMMY:5},e.Xml={},e.Xml.workspaceToDom=function(t,n){var o=e.utils.xml.createElement("xml"),r=e.Xml.variablesToDom(e.Variables.allUsedVarModels(t));r.hasChildNodes()&&o.appendChild(r);var b,p=t.getTopComments(!0);for(r=0;b=p[r];r++)o.appendChild(b.toXmlWithXY(n));for(t=t.getTopBlocks(!0),r=0;p=t[r];r++)o.appendChild(e.Xml.blockToDomWithXY(p,n));return o},e.Xml.variablesToDom=function(t){for(var r,n=e.utils.xml.createElement("variables"),o=0;r=t[o];o++){var p=e.utils.xml.createElement("variable");p.appendChild(e.utils.xml.createTextNode(r.name)),r.type&&p.setAttribute("type",r.type),p.id=r.getId(),n.appendChild(p)}return n},e.Xml.blockToDomWithXY=function(t,n){if(t.isInsertionMarker()&&!(t=t.getChildren(!1)[0]))return new DocumentFragment;var o;t.workspace.RTL&&(o=t.workspace.getWidth()),n=e.Xml.blockToDom(t,n);var r=t.getRelativeToSurfaceXY();return n.setAttribute("x",Math.round(t.workspace.RTL?o-r.x:r.x)),n.setAttribute("y",Math.round(r.y)),n},e.Xml.fieldToDom_=function(t){if(t.isSerializable()){var n=e.utils.xml.createElement("field");return n.setAttribute("name",t.name||""),t.toXml(n)}return null},e.Xml.allFieldsToDom_=function(t,n){for(var r,o=0;r=t.inputList[o];o++)for(var b,p=0;b=r.fieldRow[p];p++)(b=e.Xml.fieldToDom_(b))&&n.appendChild(b)},e.Xml.blockToDom=function(t,n){if(t.isInsertionMarker())return(t=t.getChildren(!1)[0])?e.Xml.blockToDom(t):new DocumentFragment;var o=e.utils.xml.createElement(t.isShadow()?"shadow":"block");if(o.setAttribute("type",t.type),n||o.setAttribute("id",t.id),t.mutationToDom){var r=t.mutationToDom();r&&(r.hasChildNodes()||r.hasAttributes())&&o.appendChild(r)}if(e.Xml.allFieldsToDom_(t,o),r=t.getCommentText()){var p=t.commentModel.size,b=t.commentModel.pinned,I=e.utils.xml.createElement("comment");I.appendChild(e.utils.xml.createTextNode(r)),I.setAttribute("pinned",b),I.setAttribute("h",p.height),I.setAttribute("w",p.width),o.appendChild(I)}for(t.data&&((r=e.utils.xml.createElement("data")).appendChild(e.utils.xml.createTextNode(t.data)),o.appendChild(r)),r=0;p=t.inputList[r];r++){var x;if(b=!0,p.type!=e.inputTypes.DUMMY){var k=p.connection.targetBlock();p.type==e.inputTypes.VALUE?x=e.utils.xml.createElement("value"):p.type==e.inputTypes.STATEMENT&&(x=e.utils.xml.createElement("statement")),!(I=p.connection.getShadowDom())||k&&k.isShadow()||x.appendChild(e.Xml.cloneShadow_(I,n)),k&&(I=e.Xml.blockToDom(k,n)).nodeType==e.utils.dom.NodeType.ELEMENT_NODE&&(x.appendChild(I),b=!1),x.setAttribute("name",p.name),b||o.appendChild(x)}}return null!=t.inputsInline&&t.inputsInline!=t.inputsInlineDefault&&o.setAttribute("inline",t.inputsInline),t.isCollapsed()&&o.setAttribute("collapsed",!0),t.isEnabled()||o.setAttribute("disabled",!0),t.isDeletable()||t.isShadow()||o.setAttribute("deletable",!1),t.isMovable()||t.isShadow()||o.setAttribute("movable",!1),t.isEditable()||o.setAttribute("editable",!1),(r=t.getNextBlock())&&(I=e.Xml.blockToDom(r,n)).nodeType==e.utils.dom.NodeType.ELEMENT_NODE&&((x=e.utils.xml.createElement("next")).appendChild(I),o.appendChild(x)),!(I=t.nextConnection&&t.nextConnection.getShadowDom())||r&&r.isShadow()||x.appendChild(e.Xml.cloneShadow_(I,n)),o},e.Xml.cloneShadow_=function(t,n){for(var r,o=t=t.cloneNode(!0);o;)if(n&&"shadow"==o.nodeName&&o.removeAttribute("id"),o.firstChild)o=o.firstChild;else{for(;o&&!o.nextSibling;)r=o,o=o.parentNode,r.nodeType==e.utils.dom.NodeType.TEXT_NODE&&""==r.data.trim()&&o.firstChild!=r&&e.utils.dom.removeNode(r);o&&(r=o,o=o.nextSibling,r.nodeType==e.utils.dom.NodeType.TEXT_NODE&&""==r.data.trim()&&e.utils.dom.removeNode(r))}return t},e.Xml.domToText=function(t){return e.utils.xml.domToText(t).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},e.Xml.domToPrettyText=function(t){t=e.Xml.domToText(t).split("<");for(var n="",o=1;o<t.length;o++){var r=t[o];"/"==r[0]&&(n=n.substring(2)),t[o]=n+"<"+r,"/"!=r[0]&&"/>"!=r.slice(-2)&&(n+="  ")}return(t=(t=t.join("\n")).replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>")).replace(/^\n/,"")},e.Xml.textToDom=function(t){var n=e.utils.xml.textToDomDocument(t);if(!n||!n.documentElement||n.getElementsByTagName("parsererror").length)throw Error("textToDom was unable to parse: "+t);return n.documentElement},e.Xml.clearWorkspaceAndLoadFromXml=function(t,n){return n.setResizesEnabled(!1),n.clear(),t=e.Xml.domToWorkspace(t,n),n.setResizesEnabled(!0),t},e.Xml.domToWorkspace=function(t,n){if(t instanceof e.Workspace){var o=t;t=n,n=o,console.warn("Deprecated call to Blockly.Xml.domToWorkspace, swap the arguments.")}var r;n.RTL&&(r=n.getWidth()),o=[],e.utils.dom.startTextWidthCache();var p=e.Events.getGroup();p||e.Events.setGroup(!0),n.setResizesEnabled&&n.setResizesEnabled(!1);var b=!0;try{for(var x,I=0;x=t.childNodes[I];I++){var k=x.nodeName.toLowerCase(),Y=x;if("block"==k||"shadow"==k&&!e.Events.recordUndo){var X=e.Xml.domToBlock(Y,n);o.push(X.id);var it=Y.hasAttribute("x")?parseInt(Y.getAttribute("x"),10):10,rt=Y.hasAttribute("y")?parseInt(Y.getAttribute("y"),10):10;isNaN(it)||isNaN(rt)||X.moveBy(n.RTL?r-it:it,rt),b=!1}else{if("shadow"==k)throw TypeError("Shadow block cannot be a top-level block.");if("comment"==k)n.rendered?e.WorkspaceCommentSvg?e.WorkspaceCommentSvg.fromXml(Y,n,r):console.warn("Missing require for Blockly.WorkspaceCommentSvg, ignoring workspace comment."):e.WorkspaceComment?e.WorkspaceComment.fromXml(Y,n):console.warn("Missing require for Blockly.WorkspaceComment, ignoring workspace comment.");else if("variables"==k){if(!b)throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");e.Xml.domToVariables(Y,n),b=!1}}}}finally{p||e.Events.setGroup(!1),e.utils.dom.stopTextWidthCache()}return n.setResizesEnabled&&n.setResizesEnabled(!0),e.Events.fire(new(e.Events.get(e.Events.FINISHED_LOADING))(n)),o},e.Xml.appendDomToWorkspace=function(t,n){var o;if(Object.prototype.hasOwnProperty.call(n,"scale")&&(o=n.getBlocksBoundingBox()),t=e.Xml.domToWorkspace(t,n),o&&o.top!=o.bottom){var r=o.bottom,p=n.RTL?o.right:o.left,b=1/0,I=-1/0,x=1/0;for(o=0;o<t.length;o++){var k=n.getBlockById(t[o]).getRelativeToSurfaceXY();k.y<x&&(x=k.y),k.x<b&&(b=k.x),k.x>I&&(I=k.x)}for(r=r-x+10,p=n.RTL?p-I:p-b,o=0;o<t.length;o++)n.getBlockById(t[o]).moveBy(p,r)}return t},e.Xml.domToBlock=function(t,n){if(t instanceof e.Workspace){var o=t;t=n,n=o,console.warn("Deprecated call to Blockly.Xml.domToBlock, swap the arguments.")}e.Events.disable(),o=n.getAllVariables();try{var r=e.Xml.domToBlockHeadless_(t,n),p=r.getDescendants(!1);if(n.rendered){r.setConnectionTracking(!1);for(var b=p.length-1;0<=b;b--)p[b].initSvg();for(b=p.length-1;0<=b;b--)p[b].render(!1);setTimeout(function(){r.disposed||r.setConnectionTracking(!0)},1),r.updateDisabled(),n.resizeContents()}else for(b=p.length-1;0<=b;b--)p[b].initModel()}finally{e.Events.enable()}if(e.Events.isEnabled()){for(t=e.Variables.getAddedVariables(n,o),b=0;b<t.length;b++)n=t[b],e.Events.fire(new(e.Events.get(e.Events.VAR_CREATE))(n));e.Events.fire(new(e.Events.get(e.Events.CREATE))(r))}return r},e.Xml.domToVariables=function(t,n){for(var r,o=0;r=t.childNodes[o];o++)if(r.nodeType==e.utils.dom.NodeType.ELEMENT_NODE){var p=r.getAttribute("type"),b=r.getAttribute("id");n.createVariable(r.textContent,p,b)}},e.Xml.mapSupportedXmlTags_=function(t){for(var r,n={mutation:[],comment:[],data:[],field:[],input:[],next:[]},o=0;r=t.childNodes[o];o++)if(r.nodeType!=e.utils.dom.NodeType.TEXT_NODE)switch(r.nodeName.toLowerCase()){case"mutation":n.mutation.push(r);break;case"comment":if(!e.Comment){console.warn("Missing require for Blockly.Comment, ignoring block comment.");break}n.comment.push(r);break;case"data":n.data.push(r);break;case"title":case"field":n.field.push(r);break;case"value":case"statement":n.input.push(r);break;case"next":n.next.push(r);break;default:console.warn("Ignoring unknown tag: "+r.nodeName)}return n},e.Xml.applyMutationTagNodes_=function(t,n){for(var p,o=!1,r=0;p=t[r];r++)n.domToMutation&&(n.domToMutation(p),n.initSvg&&(o=!0));return o},e.Xml.applyCommentTagNodes_=function(t,n){for(var r,o=0;r=t[o];o++){var p=r.textContent,b="true"==r.getAttribute("pinned"),I=parseInt(r.getAttribute("w"),10);r=parseInt(r.getAttribute("h"),10),n.setCommentText(p),n.commentModel.pinned=b,isNaN(I)||isNaN(r)||(n.commentModel.size=new e.utils.Size(I,r)),b&&n.getCommentIcon&&!n.isInFlyout&&setTimeout(function(){n.getCommentIcon().setVisible(!0)},1)}},e.Xml.applyDataTagNodes_=function(t,n){for(var r,o=0;r=t[o];o++)n.data=r.textContent},e.Xml.applyFieldTagNodes_=function(t,n){for(var r,o=0;r=t[o];o++){var p=r.getAttribute("name");e.Xml.domToField_(n,p,r)}},e.Xml.findChildBlocks_=function(t){for(var r,n={childBlockElement:null,childShadowElement:null},o=0;r=t.childNodes[o];o++)r.nodeType==e.utils.dom.NodeType.ELEMENT_NODE&&("block"==r.nodeName.toLowerCase()?n.childBlockElement=r:"shadow"==r.nodeName.toLowerCase()&&(n.childShadowElement=r));return n},e.Xml.applyInputTagNodes_=function(t,n,o,r){for(var b,p=0;b=t[p];p++){var I=b.getAttribute("name"),x=o.getInput(I);if(!x){console.warn("Ignoring non-existent input "+I+" in block "+r);break}if((b=e.Xml.findChildBlocks_(b)).childBlockElement){if(!x.connection)throw TypeError("Input connection does not exist.");e.Xml.domToBlockHeadless_(b.childBlockElement,n,x.connection,!1)}b.childShadowElement&&x.connection.setShadowDom(b.childShadowElement)}},e.Xml.applyNextTagNodes_=function(t,n,o){for(var p,r=0;p=t[r];r++){if((p=e.Xml.findChildBlocks_(p)).childBlockElement){if(!o.nextConnection)throw TypeError("Next statement does not exist.");if(o.nextConnection.isConnected())throw TypeError("Next statement is already connected.");e.Xml.domToBlockHeadless_(p.childBlockElement,n,o.nextConnection,!0)}p.childShadowElement&&o.nextConnection&&o.nextConnection.setShadowDom(p.childShadowElement)}},e.Xml.domToBlockHeadless_=function(t,n,o,r){var p=t.getAttribute("type");if(!p)throw TypeError("Block type unspecified: "+t.outerHTML);var b=t.getAttribute("id");b=n.newBlock(p,b);var I=e.Xml.mapSupportedXmlTags_(t),x=e.Xml.applyMutationTagNodes_(I.mutation,b);if(e.Xml.applyCommentTagNodes_(I.comment,b),e.Xml.applyDataTagNodes_(I.data,b),o)if(r){if(!b.previousConnection)throw TypeError("Next block does not have previous statement.");o.connect(b.previousConnection)}else if(b.outputConnection)o.connect(b.outputConnection);else{if(!b.previousConnection)throw TypeError("Child block does not have output or previous statement.");o.connect(b.previousConnection)}if(e.Xml.applyFieldTagNodes_(I.field,b),e.Xml.applyInputTagNodes_(I.input,n,b,p),e.Xml.applyNextTagNodes_(I.next,n,b),x&&b.initSvg(),(n=t.getAttribute("inline"))&&b.setInputsInline("true"==n),(n=t.getAttribute("disabled"))&&b.setEnabled("true"!=n&&"disabled"!=n),(n=t.getAttribute("deletable"))&&b.setDeletable("true"==n),(n=t.getAttribute("movable"))&&b.setMovable("true"==n),(n=t.getAttribute("editable"))&&b.setEditable("true"==n),(n=t.getAttribute("collapsed"))&&b.setCollapsed("true"==n),"shadow"==t.nodeName.toLowerCase()){for(t=b.getChildren(!1),n=0;o=t[n];n++)if(!o.isShadow())throw TypeError("Shadow block not allowed non-shadow child.");if(b.getVarModels().length)throw TypeError("Shadow blocks cannot have variable references.");b.setShadow(!0)}return b},e.Xml.domToField_=function(t,n,o){var r=t.getField(n);r?r.fromXml(o):console.warn("Ignoring non-existent field "+n+" in block "+t.type)},e.Xml.deleteNext=function(t){for(var o,n=0;o=t.childNodes[n];n++)if("next"==o.nodeName.toLowerCase()){t.removeChild(o);break}},e.Events.BlockBase=function(t){e.Events.BlockBase.superClass_.constructor.call(this),this.blockId=(this.isBlank=void 0===t)?"":t.id,this.workspaceId=this.isBlank?"":t.workspace.id},e.utils.object.inherits(e.Events.BlockBase,e.Events.Abstract),e.Events.BlockBase.prototype.toJson=function(){var t=e.Events.BlockBase.superClass_.toJson.call(this);return t.blockId=this.blockId,t},e.Events.BlockBase.prototype.fromJson=function(t){e.Events.BlockBase.superClass_.fromJson.call(this,t),this.blockId=t.blockId},e.Events.BlockChange=function(t,n,o,r,p){e.Events.Change.superClass_.constructor.call(this,t),t&&(this.element=void 0===n?"":n,this.name=void 0===o?"":o,this.oldValue=void 0===r?"":r,this.newValue=void 0===p?"":p)},e.utils.object.inherits(e.Events.BlockChange,e.Events.BlockBase),e.Events.Change=e.Events.BlockChange,e.Events.BlockChange.prototype.type=e.Events.CHANGE,e.Events.BlockChange.prototype.toJson=function(){var t=e.Events.BlockChange.superClass_.toJson.call(this);return t.element=this.element,this.name&&(t.name=this.name),t.oldValue=this.oldValue,t.newValue=this.newValue,t},e.Events.BlockChange.prototype.fromJson=function(t){e.Events.BlockChange.superClass_.fromJson.call(this,t),this.element=t.element,this.name=t.name,this.oldValue=t.oldValue,this.newValue=t.newValue},e.Events.BlockChange.prototype.isNull=function(){return this.oldValue==this.newValue},e.Events.BlockChange.prototype.run=function(t){var n=this.getEventWorkspace_().getBlockById(this.blockId);if(n)switch(n.mutator&&n.mutator.setVisible(!1),t=t?this.newValue:this.oldValue,this.element){case"field":(n=n.getField(this.name))?n.setValue(t):console.warn("Can't set non-existent field: "+this.name);break;case"comment":n.setCommentText(t||null);break;case"collapsed":n.setCollapsed(!!t);break;case"disabled":n.setEnabled(!t);break;case"inline":n.setInputsInline(!!t);break;case"mutation":var o="";if(n.mutationToDom&&(o=(o=n.mutationToDom())&&e.Xml.domToText(o)),n.domToMutation){var r=e.Xml.textToDom(t||"<mutation/>");n.domToMutation(r)}e.Events.fire(new e.Events.BlockChange(n,"mutation",null,o,t));break;default:console.warn("Unknown change type: "+this.element)}else console.warn("Can't change non-existent block: "+this.blockId)},e.Events.Create=function(t){e.Events.Create.superClass_.constructor.call(this,t),t&&(t.isShadow()&&(this.recordUndo=!1),this.xml=t.workspace.rendered?e.Xml.blockToDomWithXY(t):e.Xml.blockToDom(t),this.ids=e.Events.getDescendantIds(t))},e.utils.object.inherits(e.Events.Create,e.Events.BlockBase),e.Events.BlockCreate=e.Events.Create,e.Events.Create.prototype.type=e.Events.CREATE,e.Events.Create.prototype.toJson=function(){var t=e.Events.Create.superClass_.toJson.call(this);return t.xml=e.Xml.domToText(this.xml),t.ids=this.ids,this.recordUndo||(t.recordUndo=this.recordUndo),t},e.Events.Create.prototype.fromJson=function(t){e.Events.Create.superClass_.fromJson.call(this,t),this.xml=e.Xml.textToDom(t.xml),this.ids=t.ids,void 0!==t.recordUndo&&(this.recordUndo=t.recordUndo)},e.Events.Create.prototype.run=function(t){var n=this.getEventWorkspace_();if(t)(t=e.utils.xml.createElement("xml")).appendChild(this.xml),e.Xml.domToWorkspace(t,n);else{t=0;for(var o;o=this.ids[t];t++){var r=n.getBlockById(o);r?r.dispose(!1):o==this.blockId&&console.warn("Can't uncreate non-existent block: "+o)}}},e.Events.Delete=function(t){if(e.Events.Delete.superClass_.constructor.call(this,t),t){if(t.getParent())throw Error("Connected blocks cannot be deleted.");t.isShadow()&&(this.recordUndo=!1),this.oldXml=t.workspace.rendered?e.Xml.blockToDomWithXY(t):e.Xml.blockToDom(t),this.ids=e.Events.getDescendantIds(t)}},e.utils.object.inherits(e.Events.Delete,e.Events.BlockBase),e.Events.BlockDelete=e.Events.Delete,e.Events.Delete.prototype.type=e.Events.DELETE,e.Events.Delete.prototype.toJson=function(){var t=e.Events.Delete.superClass_.toJson.call(this);return t.oldXml=e.Xml.domToText(this.oldXml),t.ids=this.ids,this.recordUndo||(t.recordUndo=this.recordUndo),t},e.Events.Delete.prototype.fromJson=function(t){e.Events.Delete.superClass_.fromJson.call(this,t),this.oldXml=e.Xml.textToDom(t.oldXml),this.ids=t.ids,void 0!==t.recordUndo&&(this.recordUndo=t.recordUndo)},e.Events.Delete.prototype.run=function(t){var n=this.getEventWorkspace_();if(t){t=0;for(var o;o=this.ids[t];t++){var r=n.getBlockById(o);r?r.dispose(!1):o==this.blockId&&console.warn("Can't delete non-existent block: "+o)}}else(t=e.utils.xml.createElement("xml")).appendChild(this.oldXml),e.Xml.domToWorkspace(t,n)},e.Events.Move=function(t){e.Events.Move.superClass_.constructor.call(this,t),t&&(t.isShadow()&&(this.recordUndo=!1),t=this.currentLocation_(),this.oldParentId=t.parentId,this.oldInputName=t.inputName,this.oldCoordinate=t.coordinate)},e.utils.object.inherits(e.Events.Move,e.Events.BlockBase),e.Events.BlockMove=e.Events.Move,e.Events.Move.prototype.type=e.Events.MOVE,e.Events.Move.prototype.toJson=function(){var t=e.Events.Move.superClass_.toJson.call(this);return this.newParentId&&(t.newParentId=this.newParentId),this.newInputName&&(t.newInputName=this.newInputName),this.newCoordinate&&(t.newCoordinate=Math.round(this.newCoordinate.x)+","+Math.round(this.newCoordinate.y)),this.recordUndo||(t.recordUndo=this.recordUndo),t},e.Events.Move.prototype.fromJson=function(t){if(e.Events.Move.superClass_.fromJson.call(this,t),this.newParentId=t.newParentId,this.newInputName=t.newInputName,t.newCoordinate){var n=t.newCoordinate.split(",");this.newCoordinate=new e.utils.Coordinate(Number(n[0]),Number(n[1]))}void 0!==t.recordUndo&&(this.recordUndo=t.recordUndo)},e.Events.Move.prototype.recordNew=function(){var t=this.currentLocation_();this.newParentId=t.parentId,this.newInputName=t.inputName,this.newCoordinate=t.coordinate},e.Events.Move.prototype.currentLocation_=function(){var t=this.getEventWorkspace_().getBlockById(this.blockId),n={},o=t.getParent();return o?(n.parentId=o.id,(t=o.getInputWithBlock(t))&&(n.inputName=t.name)):n.coordinate=t.getRelativeToSurfaceXY(),n},e.Events.Move.prototype.isNull=function(){return this.oldParentId==this.newParentId&&this.oldInputName==this.newInputName&&e.utils.Coordinate.equals(this.oldCoordinate,this.newCoordinate)},e.Events.Move.prototype.run=function(t){var n=this.getEventWorkspace_(),o=n.getBlockById(this.blockId);if(o){var r=t?this.newParentId:this.oldParentId,p=t?this.newInputName:this.oldInputName,b=t?this.newCoordinate:this.oldCoordinate;if(t=null,r&&!(t=n.getBlockById(r)))return void console.warn("Can't connect to non-existent block: "+r);if(o.getParent()&&o.unplug(),b)p=o.getRelativeToSurfaceXY(),o.moveBy(b.x-p.x,b.y-p.y);else{if(n=(o=o.outputConnection||o.previousConnection).type,p){if(t=t.getInput(p))var I=t.connection}else n==e.connectionTypes.PREVIOUS_STATEMENT&&(I=t.nextConnection);I?o.connect(I):console.warn("Can't connect to non-existent input: "+p)}}else console.warn("Can't move non-existent block: "+this.blockId)},e.registry.register(e.registry.Type.EVENT,e.Events.CREATE,e.Events.Create),e.registry.register(e.registry.Type.EVENT,e.Events.DELETE,e.Events.Delete),e.registry.register(e.registry.Type.EVENT,e.Events.CHANGE,e.Events.BlockChange),e.registry.register(e.registry.Type.EVENT,e.Events.MOVE,e.Events.Move),e.Events.FinishedLoading=function(t){this.isBlank=void 0===t,this.workspaceId=t?t.id:"",this.group=e.Events.getGroup(),this.recordUndo=!1},e.utils.object.inherits(e.Events.FinishedLoading,e.Events.Abstract),e.Events.FinishedLoading.prototype.type=e.Events.FINISHED_LOADING,e.Events.FinishedLoading.prototype.toJson=function(){var t={type:this.type};return this.group&&(t.group=this.group),this.workspaceId&&(t.workspaceId=this.workspaceId),t},e.Events.FinishedLoading.prototype.fromJson=function(t){this.isBlank=!1,this.workspaceId=t.workspaceId,this.group=t.group},e.registry.register(e.registry.Type.EVENT,e.Events.FINISHED_LOADING,e.Events.FinishedLoading),e.Events.UiBase=function(t){e.Events.UiBase.superClass_.constructor.call(this),this.isBlank=void 0===t,this.workspaceId=t||"",this.recordUndo=!1},e.utils.object.inherits(e.Events.UiBase,e.Events.Abstract),e.Events.UiBase.prototype.isUiEvent=!0,e.Events.Ui=function(t,n,o,r){e.Events.Ui.superClass_.constructor.call(this,t?t.workspace.id:void 0),this.blockId=t?t.id:null,this.element=void 0===n?"":n,this.oldValue=void 0===o?"":o,this.newValue=void 0===r?"":r},e.utils.object.inherits(e.Events.Ui,e.Events.UiBase),e.Events.Ui.prototype.type=e.Events.UI,e.Events.Ui.prototype.toJson=function(){var t=e.Events.Ui.superClass_.toJson.call(this);return t.element=this.element,void 0!==this.newValue&&(t.newValue=this.newValue),this.blockId&&(t.blockId=this.blockId),t},e.Events.Ui.prototype.fromJson=function(t){e.Events.Ui.superClass_.fromJson.call(this,t),this.element=t.element,this.newValue=t.newValue,this.blockId=t.blockId},e.registry.register(e.registry.Type.EVENT,e.Events.UI,e.Events.Ui),e.Events.VarBase=function(t){e.Events.VarBase.superClass_.constructor.call(this),this.varId=(this.isBlank=void 0===t)?"":t.getId(),this.workspaceId=this.isBlank?"":t.workspace.id},e.utils.object.inherits(e.Events.VarBase,e.Events.Abstract),e.Events.VarBase.prototype.toJson=function(){var t=e.Events.VarBase.superClass_.toJson.call(this);return t.varId=this.varId,t},e.Events.VarBase.prototype.fromJson=function(t){e.Events.VarBase.superClass_.toJson.call(this),this.varId=t.varId},e.Events.VarCreate=function(t){e.Events.VarCreate.superClass_.constructor.call(this,t),t&&(this.varType=t.type,this.varName=t.name)},e.utils.object.inherits(e.Events.VarCreate,e.Events.VarBase),e.Events.VarCreate.prototype.type=e.Events.VAR_CREATE,e.Events.VarCreate.prototype.toJson=function(){var t=e.Events.VarCreate.superClass_.toJson.call(this);return t.varType=this.varType,t.varName=this.varName,t},e.Events.VarCreate.prototype.fromJson=function(t){e.Events.VarCreate.superClass_.fromJson.call(this,t),this.varType=t.varType,this.varName=t.varName},e.Events.VarCreate.prototype.run=function(t){var n=this.getEventWorkspace_();t?n.createVariable(this.varName,this.varType,this.varId):n.deleteVariableById(this.varId)},e.Events.VarDelete=function(t){e.Events.VarDelete.superClass_.constructor.call(this,t),t&&(this.varType=t.type,this.varName=t.name)},e.utils.object.inherits(e.Events.VarDelete,e.Events.VarBase),e.Events.VarDelete.prototype.type=e.Events.VAR_DELETE,e.Events.VarDelete.prototype.toJson=function(){var t=e.Events.VarDelete.superClass_.toJson.call(this);return t.varType=this.varType,t.varName=this.varName,t},e.Events.VarDelete.prototype.fromJson=function(t){e.Events.VarDelete.superClass_.fromJson.call(this,t),this.varType=t.varType,this.varName=t.varName},e.Events.VarDelete.prototype.run=function(t){var n=this.getEventWorkspace_();t?n.deleteVariableById(this.varId):n.createVariable(this.varName,this.varType,this.varId)},e.Events.VarRename=function(t,n){e.Events.VarRename.superClass_.constructor.call(this,t),t&&(this.oldName=t.name,this.newName=void 0===n?"":n)},e.utils.object.inherits(e.Events.VarRename,e.Events.VarBase),e.Events.VarRename.prototype.type=e.Events.VAR_RENAME,e.Events.VarRename.prototype.toJson=function(){var t=e.Events.VarRename.superClass_.toJson.call(this);return t.oldName=this.oldName,t.newName=this.newName,t},e.Events.VarRename.prototype.fromJson=function(t){e.Events.VarRename.superClass_.fromJson.call(this,t),this.oldName=t.oldName,this.newName=t.newName},e.Events.VarRename.prototype.run=function(t){this.getEventWorkspace_().renameVariableById(this.varId,t?this.newName:this.oldName)},e.registry.register(e.registry.Type.EVENT,e.Events.VAR_CREATE,e.Events.VarCreate),e.registry.register(e.registry.Type.EVENT,e.Events.VAR_DELETE,e.Events.VarDelete),e.registry.register(e.registry.Type.EVENT,e.Events.VAR_RENAME,e.Events.VarRename),e.BlockDragSurfaceSvg=function(t){this.container_=t,this.createDom()},e.BlockDragSurfaceSvg.prototype.SVG_=null,e.BlockDragSurfaceSvg.prototype.dragGroup_=null,e.BlockDragSurfaceSvg.prototype.container_=null,e.BlockDragSurfaceSvg.prototype.scale_=1,e.BlockDragSurfaceSvg.prototype.surfaceXY_=null,e.BlockDragSurfaceSvg.prototype.childSurfaceXY_=new e.utils.Coordinate(0,0),e.BlockDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{xmlns:e.utils.dom.SVG_NS,"xmlns:html":e.utils.dom.HTML_NS,"xmlns:xlink":e.utils.dom.XLINK_NS,version:"1.1",class:"blocklyBlockDragSurface"},this.container_),this.dragGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},this.SVG_))},e.BlockDragSurfaceSvg.prototype.setBlocksAndShow=function(t){if(this.dragGroup_.childNodes.length)throw Error("Already dragging a block.");this.dragGroup_.appendChild(t),this.SVG_.style.display="block",this.surfaceXY_=new e.utils.Coordinate(0,0)},e.BlockDragSurfaceSvg.prototype.translateAndScaleGroup=function(t,n,o){this.scale_=o,t=t.toFixed(0),n=n.toFixed(0),this.childSurfaceXY_.x=parseInt(t,10),this.childSurfaceXY_.y=parseInt(n,10),this.dragGroup_.setAttribute("transform","translate("+t+","+n+") scale("+o+")")},e.BlockDragSurfaceSvg.prototype.translateSurfaceInternal_=function(){var t=this.surfaceXY_.x,n=this.surfaceXY_.y;t=t.toFixed(0),n=n.toFixed(0),this.SVG_.style.display="block",e.utils.dom.setCssTransform(this.SVG_,"translate3d("+t+"px, "+n+"px, 0px)")},e.BlockDragSurfaceSvg.prototype.translateBy=function(t,n){this.surfaceXY_=new e.utils.Coordinate(this.surfaceXY_.x+t,this.surfaceXY_.y+n),this.translateSurfaceInternal_()},e.BlockDragSurfaceSvg.prototype.translateSurface=function(t,n){this.surfaceXY_=new e.utils.Coordinate(t*this.scale_,n*this.scale_),this.translateSurfaceInternal_()},e.BlockDragSurfaceSvg.prototype.getSurfaceTranslation=function(){var t=e.utils.getRelativeXY(this.SVG_);return new e.utils.Coordinate(t.x/this.scale_,t.y/this.scale_)},e.BlockDragSurfaceSvg.prototype.getGroup=function(){return this.dragGroup_},e.BlockDragSurfaceSvg.prototype.getSvgRoot=function(){return this.SVG_},e.BlockDragSurfaceSvg.prototype.getCurrentBlock=function(){return this.dragGroup_.firstChild},e.BlockDragSurfaceSvg.prototype.getWsTranslation=function(){return this.childSurfaceXY_.clone()},e.BlockDragSurfaceSvg.prototype.clearAndHide=function(t){if(t?t.appendChild(this.getCurrentBlock()):this.dragGroup_.removeChild(this.getCurrentBlock()),this.SVG_.style.display="none",this.dragGroup_.childNodes.length)throw Error("Drag group was not cleared.");this.surfaceXY_=null},e.Css={},e.Css.injected_=!1,e.Css.register=function(t){if(e.Css.injected_)throw Error("CSS already injected");Array.prototype.push.apply(e.Css.CONTENT,t),t.length=0},e.Css.inject=function(t,n){if(!e.Css.injected_){e.Css.injected_=!0;var o=e.Css.CONTENT.join("\n");e.Css.CONTENT.length=0,t&&(t=n.replace(/[\\/]$/,""),o=o.replace(/<<<PATH>>>/g,t),(t=document.createElement("style")).id="blockly-common-style",o=document.createTextNode(o),t.appendChild(o),document.head.insertBefore(t,document.head.firstChild))}},e.Css.CONTENT=[".blocklySvg {","background-color: #fff;","outline: none;","overflow: hidden;","position: absolute;","display: block;","}",".blocklyWidgetDiv {","display: none;","position: absolute;","z-index: 99999;","}",".injectionDiv {","height: 100%;","position: relative;","overflow: hidden;","touch-action: none;","}",".blocklyNonSelectable {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","}",".blocklyWsDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","}",".blocklyWsDragSurface.blocklyOverflowVisible {","overflow: visible;","}",".blocklyBlockDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","right: 0;","bottom: 0;","overflow: visible !important;","z-index: 50;","}",".blocklyBlockCanvas.blocklyCanvasTransitioning,",".blocklyBubbleCanvas.blocklyCanvasTransitioning {","transition: transform .5s;","}",".blocklyTooltipDiv {","background-color: #ffffc7;","border: 1px solid #ddc;","box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);","color: #000;","display: none;","font: 9pt sans-serif;","opacity: .9;","padding: 2px;","position: absolute;","z-index: 100000;","}",".blocklyDropDownDiv {","position: absolute;","left: 0;","top: 0;","z-index: 1000;","display: none;","border: 1px solid;","border-color: #dadce0;","background-color: #fff;","border-radius: 2px;","padding: 4px;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownContent {","max-height: 300px;","overflow: auto;","overflow-x: hidden;","position: relative;","}",".blocklyDropDownArrow {","position: absolute;","left: 0;","top: 0;","width: 16px;","height: 16px;","z-index: -1;","background-color: inherit;","border-color: inherit;","}",".blocklyDropDownButton {","display: inline-block;","float: left;","padding: 0;","margin: 4px;","border-radius: 4px;","outline: none;","border: 1px solid;","transition: box-shadow .1s;","cursor: pointer;","}",".blocklyArrowTop {","border-top: 1px solid;","border-left: 1px solid;","border-top-left-radius: 4px;","border-color: inherit;","}",".blocklyArrowBottom {","border-bottom: 1px solid;","border-right: 1px solid;","border-bottom-right-radius: 4px;","border-color: inherit;","}",".blocklyResizeSE {","cursor: se-resize;","fill: #aaa;","}",".blocklyResizeSW {","cursor: sw-resize;","fill: #aaa;","}",".blocklyResizeLine {","stroke: #515A5A;","stroke-width: 1;","}",".blocklyHighlightedConnectionPath {","fill: none;","stroke: #fc3;","stroke-width: 4px;","}",".blocklyPathLight {","fill: none;","stroke-linecap: round;","stroke-width: 1;","}",".blocklySelected>.blocklyPathLight {","display: none;","}",".blocklyDraggable {",'cursor: url("<<<PATH>>>/handopen.cur"), auto;',"cursor: grab;","cursor: -webkit-grab;","}",".blocklyDragging {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDraggable:active {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyBlockDragSurface .blocklyDraggable {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDragging.blocklyDraggingDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyDragging>.blocklyPath,",".blocklyDragging>.blocklyPathLight {","fill-opacity: .8;","stroke-opacity: .8;","}",".blocklyDragging>.blocklyPathDark {","display: none;","}",".blocklyDisabled>.blocklyPath {","fill-opacity: .5;","stroke-opacity: .5;","}",".blocklyDisabled>.blocklyPathLight,",".blocklyDisabled>.blocklyPathDark {","display: none;","}",".blocklyInsertionMarker>.blocklyPath,",".blocklyInsertionMarker>.blocklyPathLight,",".blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: .2;","stroke: none;","}",".blocklyMultilineText {","font-family: monospace;","}",".blocklyNonEditableText>text {","pointer-events: none;","}",".blocklyFlyout {","position: absolute;","z-index: 20;","}",".blocklyText text {","cursor: default;","}",".blocklySvg text,",".blocklyBlockDragSurface text {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","cursor: inherit;","}",".blocklyHidden {","display: none;","}",".blocklyFieldDropdown:not(.blocklyHidden) {","display: block;","}",".blocklyIconGroup {","cursor: default;","}",".blocklyIconGroup:not(:hover),",".blocklyIconGroupReadonly {","opacity: .6;","}",".blocklyIconShape {","fill: #00f;","stroke: #fff;","stroke-width: 1px;","}",".blocklyIconSymbol {","fill: #fff;","}",".blocklyMinimalBody {","margin: 0;","padding: 0;","}",".blocklyHtmlInput {","border: none;","border-radius: 4px;","height: 100%;","margin: 0;","outline: none;","padding: 0;","width: 100%;","text-align: center;","display: block;","box-sizing: border-box;","}",".blocklyHtmlInput::-ms-clear {","display: none;","}",".blocklyMainBackground {","stroke-width: 1;","stroke: #c6c6c6;","}",".blocklyMutatorBackground {","fill: #fff;","stroke: #ddd;","stroke-width: 1;","}",".blocklyFlyoutBackground {","fill: #ddd;","fill-opacity: .8;","}",".blocklyMainWorkspaceScrollbar {","z-index: 20;","}",".blocklyFlyoutScrollbar {","z-index: 30;","}",".blocklyScrollbarHorizontal,",".blocklyScrollbarVertical {","position: absolute;","outline: none;","}",".blocklyScrollbarBackground {","opacity: 0;","}",".blocklyScrollbarHandle {","fill: #ccc;","}",".blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyScrollbarHandle:hover {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarHandle {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyFlyout .blocklyScrollbarHandle:hover {","fill: #aaa;","}",".blocklyInvalidInput {","background: #faa;","}",".blocklyVerticalMarker {","stroke-width: 3px;","fill: rgba(255,255,255,.5);","pointer-events: none;","}",".blocklyComputeCanvas {","position: absolute;","width: 0;","height: 0;","}",".blocklyNoPointerEvents {","pointer-events: none;","}",".blocklyContextMenu {","border-radius: 4px;","max-height: 100%;","}",".blocklyDropdownMenu {","border-radius: 2px;","padding: 0 !important;","}",".blocklyDropdownMenu .blocklyMenuItem {","padding-left: 28px;","}",".blocklyDropdownMenu .blocklyMenuItemRtl {","padding-left: 5px;","padding-right: 28px;","}",".blocklyWidgetDiv .blocklyMenu {","background: #fff;","border: 1px solid transparent;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","font: normal 13px Arial, sans-serif;","margin: 0;","outline: none;","padding: 4px 0;","position: absolute;","overflow-y: auto;","overflow-x: hidden;","max-height: 100%;","z-index: 20000;","}",".blocklyWidgetDiv .blocklyMenu.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv .blocklyMenu {","background: inherit;","border: inherit;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"outline: none;","position: relative;","z-index: 20000;","}",".blocklyMenuItem {","border: none;","color: #000;","cursor: pointer;","list-style: none;","margin: 0;","min-width: 7em;","padding: 6px 15px;","white-space: nowrap;","}",".blocklyMenuItemDisabled {","color: #ccc;","cursor: inherit;","}",".blocklyMenuItemHighlight {","background-color: rgba(0,0,0,.1);","}",".blocklyMenuItemCheckbox {","height: 16px;","position: absolute;","width: 16px;","}",".blocklyMenuItemSelected .blocklyMenuItemCheckbox {","background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;","float: left;","margin-left: -24px;","position: static;","}",".blocklyMenuItemRtl .blocklyMenuItemCheckbox {","float: right;","margin-right: -24px;","}"],e.Grid=function(t,n){this.gridPattern_=t,this.spacing_=n.spacing,this.length_=n.length,this.line2_=(this.line1_=t.firstChild)&&this.line1_.nextSibling,this.snapToGrid_=n.snap},e.Grid.prototype.scale_=1,e.Grid.prototype.dispose=function(){this.gridPattern_=null},e.Grid.prototype.shouldSnap=function(){return this.snapToGrid_},e.Grid.prototype.getSpacing=function(){return this.spacing_},e.Grid.prototype.getPatternId=function(){return this.gridPattern_.id},e.Grid.prototype.update=function(t){this.scale_=t;var n=this.spacing_*t||100;this.gridPattern_.setAttribute("width",n),this.gridPattern_.setAttribute("height",n);var o=(n=Math.floor(this.spacing_/2)+.5)-this.length_/2,r=n+this.length_/2;this.setLineAttributes_(this.line1_,t,o*=t,r*=t,n*=t,n),this.setLineAttributes_(this.line2_,t,n,n,o,r)},e.Grid.prototype.setLineAttributes_=function(t,n,o,r,p,b){t&&(t.setAttribute("stroke-width",n),t.setAttribute("x1",o),t.setAttribute("y1",p),t.setAttribute("x2",r),t.setAttribute("y2",b))},e.Grid.prototype.moveTo=function(t,n){this.gridPattern_.setAttribute("x",t),this.gridPattern_.setAttribute("y",n),(e.utils.userAgent.IE||e.utils.userAgent.EDGE)&&this.update(this.scale_)},e.Grid.createDom=function(t,n,o){return t=e.utils.dom.createSvgElement(e.utils.Svg.PATTERN,{id:"blocklyGridPattern"+t,patternUnits:"userSpaceOnUse"},o),0<n.length&&0<n.spacing?(e.utils.dom.createSvgElement(e.utils.Svg.LINE,{stroke:n.colour},t),1<n.length&&e.utils.dom.createSvgElement(e.utils.Svg.LINE,{stroke:n.colour},t)):e.utils.dom.createSvgElement(e.utils.Svg.LINE,{},t),t},e.Theme=function(t,n,o,r){this.name=t,this.blockStyles=n||Object.create(null),this.categoryStyles=o||Object.create(null),this.componentStyles=r||Object.create(null),this.fontStyle=Object.create(null),this.startHats=null,e.registry.register(e.registry.Type.THEME,t,this)},e.Theme.prototype.getClassName=function(){return this.name+"-theme"},e.Theme.prototype.setBlockStyle=function(t,n){this.blockStyles[t]=n},e.Theme.prototype.setCategoryStyle=function(t,n){this.categoryStyles[t]=n},e.Theme.prototype.getComponentStyle=function(t){return(t=this.componentStyles[t])&&"string"==typeof t&&this.getComponentStyle(t)?this.getComponentStyle(t):t?String(t):null},e.Theme.prototype.setComponentStyle=function(t,n){this.componentStyles[t]=n},e.Theme.prototype.setFontStyle=function(t){this.fontStyle=t},e.Theme.prototype.setStartHats=function(t){this.startHats=t},e.Theme.defineTheme=function(t,n){var o=new e.Theme(t),r=n.base;return r&&("string"==typeof r&&(r=e.registry.getObject(e.registry.Type.THEME,r)),r instanceof e.Theme&&(e.utils.object.deepMerge(o,r),o.name=t)),e.utils.object.deepMerge(o.blockStyles,n.blockStyles),e.utils.object.deepMerge(o.categoryStyles,n.categoryStyles),e.utils.object.deepMerge(o.componentStyles,n.componentStyles),e.utils.object.deepMerge(o.fontStyle,n.fontStyle),null!=n.startHats&&(o.startHats=n.startHats),o},e.Themes={},e.Themes.Classic={},e.Themes.Classic.defaultBlockStyles={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},e.Themes.Classic.categoryStyles={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},e.Themes.Classic=new e.Theme("classic",e.Themes.Classic.defaultBlockStyles,e.Themes.Classic.categoryStyles),e.utils.IdGenerator={},e.utils.IdGenerator.nextId_=0,e.utils.IdGenerator.getNextUniqueId=function(){return"blockly-"+(e.utils.IdGenerator.nextId_++).toString(36)},e.utils.Metrics=function(){},e.utils.toolbox={},e.utils.toolbox.CATEGORY_TOOLBOX_KIND="categoryToolbox",e.utils.toolbox.FLYOUT_TOOLBOX_KIND="flyoutToolbox",e.utils.toolbox.Position={TOP:0,BOTTOM:1,LEFT:2,RIGHT:3},e.utils.toolbox.convertToolboxDefToJson=function(t){return t?((t instanceof Element||"string"==typeof t)&&(t=e.utils.toolbox.parseToolboxTree(t),t=e.utils.toolbox.convertToToolboxJson_(t)),e.utils.toolbox.validateToolbox_(t),t):null},e.utils.toolbox.validateToolbox_=function(t){var n=t.kind;if(t=t.contents,n&&n!=e.utils.toolbox.FLYOUT_TOOLBOX_KIND&&n!=e.utils.toolbox.CATEGORY_TOOLBOX_KIND)throw Error("Invalid toolbox kind "+n+". Please supply either "+e.utils.toolbox.FLYOUT_TOOLBOX_KIND+" or "+e.utils.toolbox.CATEGORY_TOOLBOX_KIND);if(!t)throw Error("Toolbox must have a contents attribute.")},e.utils.toolbox.convertFlyoutDefToJsonArray=function(t){return t?t.contents?t.contents:Array.isArray(t)&&0<t.length&&!t[0].nodeType?t:e.utils.toolbox.xmlToJsonArray_(t):[]},e.utils.toolbox.hasCategories=function(t){if(!t)return!1;var n=t.kind;return n?n==e.utils.toolbox.CATEGORY_TOOLBOX_KIND:!!t.contents.filter(function(o){return"CATEGORY"==o.kind.toUpperCase()}).length},e.utils.toolbox.isCategoryCollapsible=function(t){return!(!t||!t.contents||!t.contents.filter(function(n){return"CATEGORY"==n.kind.toUpperCase()}).length)},e.utils.toolbox.convertToToolboxJson_=function(t){var n={contents:e.utils.toolbox.xmlToJsonArray_(t)};return t instanceof Node&&e.utils.toolbox.addAttributes_(t,n),n},e.utils.toolbox.xmlToJsonArray_=function(t){var r,n=[],o=t.childNodes;for(o||(o=t),t=0;r=o[t];t++)if(r.tagName){var p={},b=r.tagName.toUpperCase();p.kind=b,"BLOCK"==b?p.blockxml=r:r.childNodes&&0<r.childNodes.length&&(p.contents=e.utils.toolbox.xmlToJsonArray_(r)),e.utils.toolbox.addAttributes_(r,p),n.push(p)}return n},e.utils.toolbox.addAttributes_=function(t,n){for(var o=0;o<t.attributes.length;o++){var r=t.attributes[o];-1<r.nodeName.indexOf("css-")?(n.cssconfig=n.cssconfig||{},n.cssconfig[r.nodeName.replace("css-","")]=r.value):n[r.nodeName]=r.value}},e.utils.toolbox.parseToolboxTree=function(t){if(t){if("string"!=typeof t&&(e.utils.userAgent.IE&&t.outerHTML?t=t.outerHTML:t instanceof Element||(t=null)),"string"==typeof t&&"xml"!=(t=e.Xml.textToDom(t)).nodeName.toLowerCase())throw TypeError("Toolbox should be an <xml> document.")}else t=null;return t},e.Options=function(t){var n=!!t.readOnly;if(n)var o=null,r=!1,p=!1,b=!1,I=!1,x=!1,k=!1;else{o=e.utils.toolbox.convertToolboxDefToJson(t.toolbox),r=e.utils.toolbox.hasCategories(o),void 0===(p=t.trashcan)&&(p=r);var Y=t.maxTrashcanContents;p?void 0===Y&&(Y=32):Y=0,void 0===(b=t.collapse)&&(b=r),void 0===(I=t.comments)&&(I=r),void 0===(x=t.disable)&&(x=r),void 0===(k=t.sounds)&&(k=!0)}var X=!!t.rtl,it=t.horizontalLayout;void 0===it&&(it=!1);var rt=t.toolboxPosition;rt="end"!==rt,rt=it?rt?e.utils.toolbox.Position.TOP:e.utils.toolbox.Position.BOTTOM:rt==X?e.utils.toolbox.Position.RIGHT:e.utils.toolbox.Position.LEFT;var ct=t.css;void 0===ct&&(ct=!0);var wt="https://blockly-demo.appspot.com/static/media/";t.media?wt=t.media:t.path&&(wt=t.path+"media/");var At=void 0===t.oneBasedIndex||!!t.oneBasedIndex,Rt=t.renderer||"geras",Dt=t.plugins||{};this.RTL=X,this.oneBasedIndex=At,this.collapse=b,this.comments=I,this.disable=x,this.readOnly=n,this.maxBlocks=t.maxBlocks||1/0,this.maxInstances=t.maxInstances,this.pathToMedia=wt,this.hasCategories=r,this.moveOptions=e.Options.parseMoveOptions_(t,r),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=p,this.maxTrashcanContents=Y,this.hasSounds=k,this.hasCss=ct,this.horizontalLayout=it,this.languageTree=o,this.gridOptions=e.Options.parseGridOptions_(t),this.zoomOptions=e.Options.parseZoomOptions_(t),this.toolboxPosition=rt,this.theme=e.Options.parseThemeOptions_(t),this.renderer=Rt,this.rendererOverrides=t.rendererOverrides,this.gridPattern=null,this.parentWorkspace=t.parentWorkspace,this.plugins=Dt},e.BlocklyOptions=function(){},e.Options.parseMoveOptions_=function(t,n){var o=t.move||{},r={};return void 0===o.scrollbars&&void 0===t.scrollbars?r.scrollbars=n:"object"==typeof o.scrollbars?(r.scrollbars={},r.scrollbars.horizontal=!!o.scrollbars.horizontal,r.scrollbars.vertical=!!o.scrollbars.vertical,r.scrollbars.horizontal&&r.scrollbars.vertical?r.scrollbars=!0:r.scrollbars.horizontal||r.scrollbars.vertical||(r.scrollbars=!1)):r.scrollbars=!!o.scrollbars||!!t.scrollbars,r.wheel=r.scrollbars&&void 0!==o.wheel?!!o.wheel:"object"==typeof r.scrollbars,r.drag=!(!r.scrollbars||void 0!==o.drag&&!o.drag),r},e.Options.parseZoomOptions_=function(t){var n={};return n.controls=void 0!==(t=t.zoom||{}).controls&&!!t.controls,n.wheel=void 0!==t.wheel&&!!t.wheel,n.startScale=void 0===t.startScale?1:Number(t.startScale),n.maxScale=void 0===t.maxScale?3:Number(t.maxScale),n.minScale=void 0===t.minScale?.3:Number(t.minScale),n.scaleSpeed=void 0===t.scaleSpeed?1.2:Number(t.scaleSpeed),n.pinch=void 0===t.pinch?n.wheel||n.controls:!!t.pinch,n},e.Options.parseGridOptions_=function(t){t=t.grid||{};var n={};return n.spacing=Number(t.spacing)||0,n.colour=t.colour||"#888",n.length=void 0===t.length?1:Number(t.length),n.snap=0<n.spacing&&!!t.snap,n},e.Options.parseThemeOptions_=function(t){return"string"==typeof(t=t.theme||e.Themes.Classic)?e.registry.getObject(e.registry.Type.THEME,t):t instanceof e.Theme?t:e.Theme.defineTheme(t.name||"builtin"+e.utils.IdGenerator.getNextUniqueId(),t)},e.Options.parseToolboxTree=function(t){return e.utils.deprecation.warn("Blockly.Options.parseToolboxTree","September 2020","September 2021","Blockly.utils.toolbox.parseToolboxTree"),e.utils.toolbox.parseToolboxTree(t)},e.ScrollbarPair=function(t,n,o,r,p){this.workspace_=t,o=void 0===o||o;var b=(n=void 0===n||n)&&o;n&&(this.hScroll=new e.Scrollbar(t,!0,b,r,p)),o&&(this.vScroll=new e.Scrollbar(t,!1,b,r,p)),b&&(this.corner_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{height:e.Scrollbar.scrollbarThickness,width:e.Scrollbar.scrollbarThickness,class:"blocklyScrollbarBackground"},null),e.utils.dom.insertAfter(this.corner_,t.getBubbleCanvas())),this.oldHostMetrics_=null},e.ScrollbarPair.prototype.dispose=function(){e.utils.dom.removeNode(this.corner_),this.oldHostMetrics_=this.workspace_=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)},e.ScrollbarPair.prototype.resize=function(){var t=this.workspace_.getMetrics();if(t){var n=!1,o=!1;if(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==t.viewWidth&&this.oldHostMetrics_.viewHeight==t.viewHeight&&this.oldHostMetrics_.absoluteTop==t.absoluteTop&&this.oldHostMetrics_.absoluteLeft==t.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.scrollWidth==t.scrollWidth&&this.oldHostMetrics_.viewLeft==t.viewLeft&&this.oldHostMetrics_.scrollLeft==t.scrollLeft||(n=!0),this.oldHostMetrics_&&this.oldHostMetrics_.scrollHeight==t.scrollHeight&&this.oldHostMetrics_.viewTop==t.viewTop&&this.oldHostMetrics_.scrollTop==t.scrollTop||(o=!0)):o=n=!0,n||o){try{e.Events.disable(),this.hScroll&&n&&this.hScroll.resize(t),this.vScroll&&o&&this.vScroll.resize(t)}finally{e.Events.enable()}this.workspace_.maybeFireViewportChangeEvent()}this.hScroll&&this.vScroll&&(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==t.viewWidth&&this.oldHostMetrics_.absoluteLeft==t.absoluteLeft||this.corner_.setAttribute("x",this.vScroll.position.x),this.oldHostMetrics_&&this.oldHostMetrics_.viewHeight==t.viewHeight&&this.oldHostMetrics_.absoluteTop==t.absoluteTop||this.corner_.setAttribute("y",this.hScroll.position.y)),this.oldHostMetrics_=t}},e.ScrollbarPair.prototype.canScrollHorizontally=function(){return!!this.hScroll},e.ScrollbarPair.prototype.canScrollVertically=function(){return!!this.vScroll},e.ScrollbarPair.prototype.setOrigin=function(t,n){this.hScroll&&this.hScroll.setOrigin(t,n),this.vScroll&&this.vScroll.setOrigin(t,n)},e.ScrollbarPair.prototype.set=function(t,n,o){this.hScroll&&this.hScroll.set(t,!1),this.vScroll&&this.vScroll.set(n,!1),(o||void 0===o)&&(t={},this.hScroll&&(t.x=this.hScroll.getRatio_()),this.vScroll&&(t.y=this.vScroll.getRatio_()),this.workspace_.setMetrics(t))},e.ScrollbarPair.prototype.setX=function(t){this.hScroll&&this.hScroll.set(t,!0)},e.ScrollbarPair.prototype.setY=function(t){this.vScroll&&this.vScroll.set(t,!0)},e.ScrollbarPair.prototype.setContainerVisible=function(t){this.hScroll&&this.hScroll.setContainerVisible(t),this.vScroll&&this.vScroll.setContainerVisible(t)},e.ScrollbarPair.prototype.isVisible=function(){var t=!1;return this.hScroll&&(t=this.hScroll.isVisible()),this.vScroll&&(t=t||this.vScroll.isVisible()),t},e.ScrollbarPair.prototype.resizeContent=function(t){this.hScroll&&this.hScroll.resizeContentHorizontal(t),this.vScroll&&this.vScroll.resizeContentVertical(t)},e.ScrollbarPair.prototype.resizeView=function(t){this.hScroll&&this.hScroll.resizeViewHorizontal(t),this.vScroll&&this.vScroll.resizeViewVertical(t)},e.Scrollbar=function(t,n,o,r,p){this.workspace_=t,this.pair_=o||!1,this.horizontal_=n,this.margin_=void 0!==p?p:e.Scrollbar.DEFAULT_SCROLLBAR_MARGIN,this.ratio=this.oldHostMetrics_=null,this.createDom_(r),this.position=new e.utils.Coordinate(0,0),t=e.Scrollbar.scrollbarThickness,n?(this.svgBackground_.setAttribute("height",t),this.outerSvg_.setAttribute("height",t),this.svgHandle_.setAttribute("height",t-5),this.svgHandle_.setAttribute("y",2.5),this.lengthAttribute_="width",this.positionAttribute_="x"):(this.svgBackground_.setAttribute("width",t),this.outerSvg_.setAttribute("width",t),this.svgHandle_.setAttribute("width",t-5),this.svgHandle_.setAttribute("x",2.5),this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=e.browserEvents.conditionalBind(this.svgBackground_,"mousedown",this,this.onMouseDownBar_),this.onMouseDownHandleWrapper_=e.browserEvents.conditionalBind(this.svgHandle_,"mousedown",this,this.onMouseDownHandle_)},e.Scrollbar.prototype.origin_=new e.utils.Coordinate(0,0),e.Scrollbar.prototype.startDragMouse_=0,e.Scrollbar.prototype.scrollbarLength_=0,e.Scrollbar.prototype.handleLength_=0,e.Scrollbar.prototype.handlePosition_=0,e.Scrollbar.prototype.isVisible_=!0,e.Scrollbar.prototype.containerVisible_=!0,e.Scrollbar.scrollbarThickness=15,e.Touch.TOUCH_ENABLED&&(e.Scrollbar.scrollbarThickness=25),e.Scrollbar.DEFAULT_SCROLLBAR_MARGIN=.5,e.Scrollbar.metricsAreEquivalent_=function(t,n){return t.viewWidth==n.viewWidth&&t.viewHeight==n.viewHeight&&t.viewLeft==n.viewLeft&&t.viewTop==n.viewTop&&t.absoluteTop==n.absoluteTop&&t.absoluteLeft==n.absoluteLeft&&t.scrollWidth==n.scrollWidth&&t.scrollHeight==n.scrollHeight&&t.scrollLeft==n.scrollLeft&&t.scrollTop==n.scrollTop},e.Scrollbar.prototype.dispose=function(){this.cleanUp_(),e.browserEvents.unbind(this.onMouseDownBarWrapper_),this.onMouseDownBarWrapper_=null,e.browserEvents.unbind(this.onMouseDownHandleWrapper_),this.onMouseDownHandleWrapper_=null,e.utils.dom.removeNode(this.outerSvg_),this.svgBackground_=this.svgGroup_=this.outerSvg_=null,this.svgHandle_&&(this.workspace_.getThemeManager().unsubscribe(this.svgHandle_),this.svgHandle_=null),this.workspace_=null},e.Scrollbar.prototype.constrainHandleLength_=function(t){return 0>=t||isNaN(t)?0:Math.min(t,this.scrollbarLength_)},e.Scrollbar.prototype.setHandleLength_=function(t){this.handleLength_=t,this.svgHandle_.setAttribute(this.lengthAttribute_,this.handleLength_)},e.Scrollbar.prototype.constrainHandlePosition_=function(t){return 0>=t||isNaN(t)?0:Math.min(t,this.scrollbarLength_-this.handleLength_)},e.Scrollbar.prototype.setHandlePosition=function(t){this.handlePosition_=t,this.svgHandle_.setAttribute(this.positionAttribute_,this.handlePosition_)},e.Scrollbar.prototype.setScrollbarLength_=function(t){this.scrollbarLength_=t,this.outerSvg_.setAttribute(this.lengthAttribute_,this.scrollbarLength_),this.svgBackground_.setAttribute(this.lengthAttribute_,this.scrollbarLength_)},e.Scrollbar.prototype.setPosition=function(t,n){this.position.x=t,this.position.y=n,e.utils.dom.setCssTransform(this.outerSvg_,"translate("+(this.position.x+this.origin_.x)+"px,"+(this.position.y+this.origin_.y)+"px)")},e.Scrollbar.prototype.resize=function(t){!t&&!(t=this.workspace_.getMetrics())||this.oldHostMetrics_&&e.Scrollbar.metricsAreEquivalent_(t,this.oldHostMetrics_)||(this.horizontal_?this.resizeHorizontal_(t):this.resizeVertical_(t),this.oldHostMetrics_=t,this.updateMetrics_())},e.Scrollbar.prototype.requiresViewResize_=function(t){return!this.oldHostMetrics_||this.oldHostMetrics_.viewWidth!==t.viewWidth||this.oldHostMetrics_.viewHeight!==t.viewHeight||this.oldHostMetrics_.absoluteLeft!==t.absoluteLeft||this.oldHostMetrics_.absoluteTop!==t.absoluteTop},e.Scrollbar.prototype.resizeHorizontal_=function(t){this.requiresViewResize_(t)?this.resizeViewHorizontal(t):this.resizeContentHorizontal(t)},e.Scrollbar.prototype.resizeViewHorizontal=function(t){var n=t.viewWidth-2*this.margin_;this.pair_&&(n-=e.Scrollbar.scrollbarThickness),this.setScrollbarLength_(Math.max(0,n)),n=t.absoluteLeft+this.margin_,this.pair_&&this.workspace_.RTL&&(n+=e.Scrollbar.scrollbarThickness),this.setPosition(n,t.absoluteTop+t.viewHeight-e.Scrollbar.scrollbarThickness-this.margin_),this.resizeContentHorizontal(t)},e.Scrollbar.prototype.resizeContentHorizontal=function(t){if(t.viewWidth>=t.scrollWidth)this.setHandleLength_(this.scrollbarLength_),this.setHandlePosition(0),this.pair_||this.setVisible(!1);else{this.pair_||this.setVisible(!0);var n=this.scrollbarLength_*t.viewWidth/t.scrollWidth;n=this.constrainHandleLength_(n),this.setHandleLength_(n);var o=this.scrollbarLength_-this.handleLength_;t=this.constrainHandlePosition_(t=(t.viewLeft-t.scrollLeft)/(n=t.scrollWidth-t.viewWidth)*o),this.setHandlePosition(t),this.ratio=o/n}},e.Scrollbar.prototype.resizeVertical_=function(t){this.requiresViewResize_(t)?this.resizeViewVertical(t):this.resizeContentVertical(t)},e.Scrollbar.prototype.resizeViewVertical=function(t){var n=t.viewHeight-2*this.margin_;this.pair_&&(n-=e.Scrollbar.scrollbarThickness),this.setScrollbarLength_(Math.max(0,n)),this.setPosition(this.workspace_.RTL?t.absoluteLeft+this.margin_:t.absoluteLeft+t.viewWidth-e.Scrollbar.scrollbarThickness-this.margin_,t.absoluteTop+this.margin_),this.resizeContentVertical(t)},e.Scrollbar.prototype.resizeContentVertical=function(t){if(t.viewHeight>=t.scrollHeight)this.setHandleLength_(this.scrollbarLength_),this.setHandlePosition(0),this.pair_||this.setVisible(!1);else{this.pair_||this.setVisible(!0);var n=this.scrollbarLength_*t.viewHeight/t.scrollHeight;n=this.constrainHandleLength_(n),this.setHandleLength_(n);var o=this.scrollbarLength_-this.handleLength_;t=this.constrainHandlePosition_(t=(t.viewTop-t.scrollTop)/(n=t.scrollHeight-t.viewHeight)*o),this.setHandlePosition(t),this.ratio=o/n}},e.Scrollbar.prototype.createDom_=function(t){var n="blocklyScrollbar"+(this.horizontal_?"Horizontal":"Vertical");t&&(n+=" "+t),this.outerSvg_=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{class:n},null),this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},this.outerSvg_),this.svgBackground_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyScrollbarBackground"},this.svgGroup_),t=Math.floor((e.Scrollbar.scrollbarThickness-5)/2),this.svgHandle_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyScrollbarHandle",rx:t,ry:t},this.svgGroup_),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarOpacity","fill-opacity"),e.utils.dom.insertAfter(this.outerSvg_,this.workspace_.getParentSvg())},e.Scrollbar.prototype.isVisible=function(){return this.isVisible_},e.Scrollbar.prototype.setContainerVisible=function(t){var n=t!=this.containerVisible_;this.containerVisible_=t,n&&this.updateDisplay_()},e.Scrollbar.prototype.setVisible=function(t){var n=t!=this.isVisible();if(this.pair_)throw Error("Unable to toggle visibility of paired scrollbars.");this.isVisible_=t,n&&this.updateDisplay_()},e.Scrollbar.prototype.updateDisplay_=function(){this.containerVisible_&&this.isVisible()?this.outerSvg_.setAttribute("display","block"):this.outerSvg_.setAttribute("display","none")},e.Scrollbar.prototype.onMouseDownBar_=function(t){if(this.workspace_.markFocused(),e.Touch.clearTouchIdentifier(),this.cleanUp_(),e.utils.isRightButton(t))t.stopPropagation();else{var n=e.utils.mouseToSvg(t,this.workspace_.getParentSvg(),this.workspace_.getInverseScreenCTM());n=this.horizontal_?n.x:n.y;var o=e.utils.getInjectionDivXY_(this.svgHandle_),r=this.handlePosition_,p=.95*this.handleLength_;n<=(o=this.horizontal_?o.x:o.y)?r-=p:n>=o+this.handleLength_&&(r+=p),this.setHandlePosition(this.constrainHandlePosition_(r)),this.updateMetrics_(),t.stopPropagation(),t.preventDefault()}},e.Scrollbar.prototype.onMouseDownHandle_=function(t){this.workspace_.markFocused(),this.cleanUp_(),e.utils.isRightButton(t)?t.stopPropagation():(this.startDragHandle=this.handlePosition_,this.workspace_.setupDragSurface(),this.startDragMouse_=this.horizontal_?t.clientX:t.clientY,e.Scrollbar.onMouseUpWrapper_=e.browserEvents.conditionalBind(document,"mouseup",this,this.onMouseUpHandle_),e.Scrollbar.onMouseMoveWrapper_=e.browserEvents.conditionalBind(document,"mousemove",this,this.onMouseMoveHandle_),t.stopPropagation(),t.preventDefault())},e.Scrollbar.prototype.onMouseMoveHandle_=function(t){this.setHandlePosition(this.constrainHandlePosition_(this.startDragHandle+((this.horizontal_?t.clientX:t.clientY)-this.startDragMouse_))),this.updateMetrics_()},e.Scrollbar.prototype.onMouseUpHandle_=function(){this.workspace_.resetDragSurface(),e.Touch.clearTouchIdentifier(),this.cleanUp_()},e.Scrollbar.prototype.cleanUp_=function(){e.hideChaff(!0),e.Scrollbar.onMouseUpWrapper_&&(e.browserEvents.unbind(e.Scrollbar.onMouseUpWrapper_),e.Scrollbar.onMouseUpWrapper_=null),e.Scrollbar.onMouseMoveWrapper_&&(e.browserEvents.unbind(e.Scrollbar.onMouseMoveWrapper_),e.Scrollbar.onMouseMoveWrapper_=null)},e.Scrollbar.prototype.getRatio_=function(){var t=this.handlePosition_/(this.scrollbarLength_-this.handleLength_);return isNaN(t)&&(t=0),t},e.Scrollbar.prototype.updateMetrics_=function(){var t=this.getRatio_(),n={};this.horizontal_?n.x=t:n.y=t,this.workspace_.setMetrics(n)},e.Scrollbar.prototype.set=function(t,n){this.setHandlePosition(this.constrainHandlePosition_(t*this.ratio)),(n||void 0===n)&&this.updateMetrics_()},e.Scrollbar.prototype.setOrigin=function(t,n){this.origin_=new e.utils.Coordinate(t,n)},e.Tooltip={},e.Tooltip.visible=!1,e.Tooltip.blocked_=!1,e.Tooltip.LIMIT=50,e.Tooltip.mouseOutPid_=0,e.Tooltip.showPid_=0,e.Tooltip.lastX_=0,e.Tooltip.lastY_=0,e.Tooltip.element_=null,e.Tooltip.poisonedElement_=null,e.Tooltip.OFFSET_X=0,e.Tooltip.OFFSET_Y=10,e.Tooltip.RADIUS_OK=10,e.Tooltip.HOVER_MS=750,e.Tooltip.MARGINS=5,e.Tooltip.DIV=null,e.Tooltip.getTooltipOfObject=function(t){if(t=e.Tooltip.getTargetObject_(t)){for(t=t.tooltip;"function"==typeof t;)t=t();if("string"!=typeof t)throw Error("Tooltip function must return a string.");return t}return""},e.Tooltip.getTargetObject_=function(t){for(;t&&t.tooltip;){if("string"==typeof t.tooltip||"function"==typeof t.tooltip)return t;t=t.tooltip}return null},e.Tooltip.createDom=function(){e.Tooltip.DIV||(e.Tooltip.DIV=document.createElement("div"),e.Tooltip.DIV.className="blocklyTooltipDiv",(e.parentContainer||document.body).appendChild(e.Tooltip.DIV))},e.Tooltip.bindMouseEvents=function(t){t.mouseOverWrapper_=e.browserEvents.bind(t,"mouseover",null,e.Tooltip.onMouseOver_),t.mouseOutWrapper_=e.browserEvents.bind(t,"mouseout",null,e.Tooltip.onMouseOut_),t.addEventListener("mousemove",e.Tooltip.onMouseMove_,!1)},e.Tooltip.unbindMouseEvents=function(t){t&&(e.browserEvents.unbind(t.mouseOverWrapper_),e.browserEvents.unbind(t.mouseOutWrapper_),t.removeEventListener("mousemove",e.Tooltip.onMouseMove_))},e.Tooltip.onMouseOver_=function(t){e.Tooltip.blocked_||(t=e.Tooltip.getTargetObject_(t.currentTarget),e.Tooltip.element_!=t&&(e.Tooltip.hide(),e.Tooltip.poisonedElement_=null,e.Tooltip.element_=t),clearTimeout(e.Tooltip.mouseOutPid_))},e.Tooltip.onMouseOut_=function(t){e.Tooltip.blocked_||(e.Tooltip.mouseOutPid_=setTimeout(function(){e.Tooltip.element_=null,e.Tooltip.poisonedElement_=null,e.Tooltip.hide()},1),clearTimeout(e.Tooltip.showPid_))},e.Tooltip.onMouseMove_=function(t){if(e.Tooltip.element_&&e.Tooltip.element_.tooltip&&!e.Tooltip.blocked_)if(e.Tooltip.visible){var n=e.Tooltip.lastX_-t.pageX;t=e.Tooltip.lastY_-t.pageY,Math.sqrt(n*n+t*t)>e.Tooltip.RADIUS_OK&&e.Tooltip.hide()}else e.Tooltip.poisonedElement_!=e.Tooltip.element_&&(clearTimeout(e.Tooltip.showPid_),e.Tooltip.lastX_=t.pageX,e.Tooltip.lastY_=t.pageY,e.Tooltip.showPid_=setTimeout(e.Tooltip.show_,e.Tooltip.HOVER_MS))},e.Tooltip.dispose=function(){e.Tooltip.element_=null,e.Tooltip.poisonedElement_=null,e.Tooltip.hide()},e.Tooltip.hide=function(){e.Tooltip.visible&&(e.Tooltip.visible=!1,e.Tooltip.DIV&&(e.Tooltip.DIV.style.display="none")),e.Tooltip.showPid_&&clearTimeout(e.Tooltip.showPid_)},e.Tooltip.block=function(){e.Tooltip.hide(),e.Tooltip.blocked_=!0},e.Tooltip.unblock=function(){e.Tooltip.blocked_=!1},e.Tooltip.show_=function(){if(!e.Tooltip.blocked_&&(e.Tooltip.poisonedElement_=e.Tooltip.element_,e.Tooltip.DIV)){e.Tooltip.DIV.textContent="";var t=e.Tooltip.getTooltipOfObject(e.Tooltip.element_);t=(t=e.utils.string.wrap(t,e.Tooltip.LIMIT)).split("\n");for(var n=0;n<t.length;n++){var o=document.createElement("div");o.appendChild(document.createTextNode(t[n])),e.Tooltip.DIV.appendChild(o)}t=e.Tooltip.element_.RTL,n=document.documentElement.clientWidth,o=document.documentElement.clientHeight,e.Tooltip.DIV.style.direction=t?"rtl":"ltr",e.Tooltip.DIV.style.display="block",e.Tooltip.visible=!0;var r=e.Tooltip.lastX_;r=t?r-(e.Tooltip.OFFSET_X+e.Tooltip.DIV.offsetWidth):r+e.Tooltip.OFFSET_X;var p=e.Tooltip.lastY_+e.Tooltip.OFFSET_Y;p+e.Tooltip.DIV.offsetHeight>o+window.scrollY&&(p-=e.Tooltip.DIV.offsetHeight+2*e.Tooltip.OFFSET_Y),t?r=Math.max(e.Tooltip.MARGINS-window.scrollX,r):r+e.Tooltip.DIV.offsetWidth>n+window.scrollX-2*e.Tooltip.MARGINS&&(r=n-e.Tooltip.DIV.offsetWidth-2*e.Tooltip.MARGINS),e.Tooltip.DIV.style.top=p+"px",e.Tooltip.DIV.style.left=r+"px"}},e.utils.aria={},e.utils.aria.ARIA_PREFIX_="aria-",e.utils.aria.ROLE_ATTRIBUTE_="role",e.utils.aria.Role={GRID:"grid",GRIDCELL:"gridcell",GROUP:"group",LISTBOX:"listbox",MENU:"menu",MENUITEM:"menuitem",MENUITEMCHECKBOX:"menuitemcheckbox",OPTION:"option",PRESENTATION:"presentation",ROW:"row",TREE:"tree",TREEITEM:"treeitem"},e.utils.aria.State={ACTIVEDESCENDANT:"activedescendant",COLCOUNT:"colcount",DISABLED:"disabled",EXPANDED:"expanded",INVALID:"invalid",LABEL:"label",LABELLEDBY:"labelledby",LEVEL:"level",ORIENTATION:"orientation",POSINSET:"posinset",ROWCOUNT:"rowcount",SELECTED:"selected",SETSIZE:"setsize",VALUEMAX:"valuemax",VALUEMIN:"valuemin"},e.utils.aria.setRole=function(t,n){t.setAttribute(e.utils.aria.ROLE_ATTRIBUTE_,n)},e.utils.aria.setState=function(t,n,o){Array.isArray(o)&&(o=o.join(" ")),t.setAttribute(e.utils.aria.ARIA_PREFIX_+n,o)},e.IASTNodeLocation=function(){},e.IASTNodeLocationSvg=function(){},e.IASTNodeLocationWithBlock=function(){},e.IKeyboardAccessible=function(){},e.utils.deprecation={},e.utils.deprecation.warn=function(t,n,o,r){t=t+" was deprecated on "+n+" and will be deleted on "+o+".",r&&(t+="\nUse "+r+" instead."),console.warn(t)},e.Connection=function(t,n){this.sourceBlock_=t,this.type=n},e.Connection.CAN_CONNECT=0,e.Connection.REASON_SELF_CONNECTION=1,e.Connection.REASON_WRONG_TYPE=2,e.Connection.REASON_TARGET_NULL=3,e.Connection.REASON_CHECKS_FAILED=4,e.Connection.REASON_DIFFERENT_WORKSPACES=5,e.Connection.REASON_SHADOW_PARENT=6,e.Connection.REASON_DRAG_CHECKS_FAILED=7,e.Connection.prototype.targetConnection=null,e.Connection.prototype.disposed=!1,e.Connection.prototype.check_=null,e.Connection.prototype.shadowDom_=null,e.Connection.prototype.x=0,e.Connection.prototype.y=0,e.Connection.prototype.connect_=function(t){var x,n=e.connectionTypes.INPUT_VALUE,o=this.getSourceBlock(),r=t.getSourceBlock();if(t.isConnected()&&t.disconnect(),this.isConnected()){var p=this.getShadowDom(!0);this.shadowDom_=null;var b=this.targetBlock();if(b.isShadow())b.dispose(!1);else{this.disconnect();var I=b}this.shadowDom_=p}e.Events.isEnabled()&&(x=new(e.Events.get(e.Events.BLOCK_MOVE))(r)),e.Connection.connectReciprocally_(this,t),r.setParent(o),x&&(x.recordNew(),e.Events.fire(x)),I&&((r=e.Connection.getConnectionForOrphanedConnection(r,t=this.type===n?I.outputConnection:I.previousConnection))?t.connect(r):t.onFailedConnect(this))},e.Connection.prototype.dispose=function(){if(this.isConnected()){this.setShadowDom(null);var t=this.targetBlock();t&&t.unplug()}this.disposed=!0},e.Connection.prototype.getSourceBlock=function(){return this.sourceBlock_},e.Connection.prototype.isSuperior=function(){return this.type==e.connectionTypes.INPUT_VALUE||this.type==e.connectionTypes.NEXT_STATEMENT},e.Connection.prototype.isConnected=function(){return!!this.targetConnection},e.Connection.prototype.canConnectWithReason=function(t){return e.utils.deprecation.warn("Connection.prototype.canConnectWithReason","July 2020","July 2021","the workspace's connection checker"),this.getConnectionChecker().canConnectWithReason(this,t,!1)},e.Connection.prototype.checkConnection=function(t){e.utils.deprecation.warn("Connection.prototype.checkConnection","July 2020","July 2021","the workspace's connection checker");var n=this.getConnectionChecker(),o=n.canConnectWithReason(this,t,!1);if(o!=e.Connection.CAN_CONNECT)throw Error(n.getErrorMessage(o,this,t))},e.Connection.prototype.getConnectionChecker=function(){return this.sourceBlock_.workspace.connectionChecker},e.Connection.prototype.isConnectionAllowed=function(t){return e.utils.deprecation.warn("Connection.prototype.isConnectionAllowed","July 2020","July 2021","the workspace's connection checker"),this.getConnectionChecker().canConnect(this,t,!0)},e.Connection.prototype.onFailedConnect=function(t){},e.Connection.prototype.connect=function(t){if(this.targetConnection!=t&&this.getConnectionChecker().canConnect(this,t,!1)){var n=e.Events.getGroup();n||e.Events.setGroup(!0),this.isSuperior()?this.connect_(t):t.connect_(this),n||e.Events.setGroup(!1)}},e.Connection.connectReciprocally_=function(t,n){if(!t||!n)throw Error("Cannot connect null connections.");t.targetConnection=n,n.targetConnection=t},e.Connection.getSingleConnection_=function(t,n){for(var b,o=null,r=(n=n.outputConnection).getConnectionChecker(),p=0;b=t.inputList[p];p++)if((b=b.connection)&&r.canConnect(n,b,!1)){if(o)return null;o=b}return o},e.Connection.getConnectionForOrphanedOutput_=function(t,n){for(var o;o=e.Connection.getSingleConnection_(t,n);)if(!(t=o.targetBlock())||t.isShadow())return o;return null},e.Connection.getConnectionForOrphanedConnection=function(t,n){if(n.type===e.connectionTypes.OUTPUT_VALUE)return e.Connection.getConnectionForOrphanedOutput_(t,n.getSourceBlock());t=t.lastConnectionInStack(!0);var o=n.getConnectionChecker();return t&&o.canConnect(n,t,!1)?t:null},e.Connection.prototype.disconnect=function(){var t=this.targetConnection;if(!t)throw Error("Source connection not connected.");if(t.targetConnection!=this)throw Error("Target connection not connected to source connection.");if(this.isSuperior()){var n=this.sourceBlock_,o=t.getSourceBlock();t=this}else n=t.getSourceBlock(),o=this.sourceBlock_;var r=e.Events.getGroup();r||e.Events.setGroup(!0),this.disconnectInternal_(n,o),o.isShadow()||t.respawnShadow_(),r||e.Events.setGroup(!1)},e.Connection.prototype.disconnectInternal_=function(t,n){var o;e.Events.isEnabled()&&(o=new(e.Events.get(e.Events.BLOCK_MOVE))(n)),this.targetConnection=this.targetConnection.targetConnection=null,n.setParent(null),o&&(o.recordNew(),e.Events.fire(o))},e.Connection.prototype.respawnShadow_=function(){var t=this.getSourceBlock(),n=this.getShadowDom();if(t.workspace&&n)if((t=e.Xml.domToBlock(n,t.workspace)).outputConnection)this.connect(t.outputConnection);else{if(!t.previousConnection)throw Error("Child block does not have output or previous statement.");this.connect(t.previousConnection)}},e.Connection.prototype.targetBlock=function(){return this.isConnected()?this.targetConnection.getSourceBlock():null},e.Connection.prototype.checkType=function(t){return e.utils.deprecation.warn("Connection.prototype.checkType","October 2019","January 2021","the workspace's connection checker"),this.getConnectionChecker().canConnect(this,t,!1)},e.Connection.prototype.checkType_=function(t){return e.utils.deprecation.warn("Connection.prototype.checkType_","October 2019","January 2021","the workspace's connection checker"),this.checkType(t)},e.Connection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()},e.Connection.prototype.setCheck=function(t){return t?(Array.isArray(t)||(t=[t]),this.check_=t,this.onCheckChanged_()):this.check_=null,this},e.Connection.prototype.getCheck=function(){return this.check_},e.Connection.prototype.setShadowDom=function(t){this.shadowDom_=t,(t=this.targetBlock())?t.isShadow()&&(t.dispose(!1),this.respawnShadow_()):this.respawnShadow_()},e.Connection.prototype.getShadowDom=function(t){return t&&this.targetBlock().isShadow()?e.Xml.blockToDom(this.targetBlock()):this.shadowDom_},e.Connection.prototype.neighbours=function(t){return[]},e.Connection.prototype.getParentInput=function(){for(var t=null,n=this.sourceBlock_.inputList,o=0;o<n.length;o++)if(n[o].connection===this){t=n[o];break}return t},e.Connection.prototype.toString=function(){var t=this.sourceBlock_;if(!t)return"Orphan Connection";if(t.outputConnection==this)var n="Output Connection of ";else if(t.previousConnection==this)n="Previous Connection of ";else if(t.nextConnection==this)n="Next Connection of ";else{n=null;for(var r,o=0;r=t.inputList[o];o++)if(r.connection==this){n=r;break}if(!n)return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection";n='Input "'+n.name+'" connection on '}return n+t.toDevString()},e.IConnectionChecker=function(){},e.ConnectionChecker=function(){},e.ConnectionChecker.prototype.canConnect=function(t,n,o,r){return this.canConnectWithReason(t,n,o,r)==e.Connection.CAN_CONNECT},e.ConnectionChecker.prototype.canConnectWithReason=function(t,n,o,r){var p=this.doSafetyChecks(t,n);return p!=e.Connection.CAN_CONNECT?p:this.doTypeChecks(t,n)?o&&!this.doDragChecks(t,n,r||0)?e.Connection.REASON_DRAG_CHECKS_FAILED:e.Connection.CAN_CONNECT:e.Connection.REASON_CHECKS_FAILED},e.ConnectionChecker.prototype.getErrorMessage=function(t,n,o){switch(t){case e.Connection.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case e.Connection.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case e.Connection.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case e.Connection.REASON_TARGET_NULL:return"Target connection is null.";case e.Connection.REASON_CHECKS_FAILED:return"Connection checks failed. "+n+" expected "+n.getCheck()+", found "+o.getCheck();case e.Connection.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case e.Connection.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";default:return"Unknown connection failure: this should never happen!"}},e.ConnectionChecker.prototype.doSafetyChecks=function(t,n){if(!t||!n)return e.Connection.REASON_TARGET_NULL;if(t.isSuperior())var o=t.getSourceBlock(),r=n.getSourceBlock();else r=t.getSourceBlock(),o=n.getSourceBlock();return o==r?e.Connection.REASON_SELF_CONNECTION:n.type!=e.OPPOSITE_TYPE[t.type]?e.Connection.REASON_WRONG_TYPE:o.workspace!==r.workspace?e.Connection.REASON_DIFFERENT_WORKSPACES:o.isShadow()&&!r.isShadow()?e.Connection.REASON_SHADOW_PARENT:e.Connection.CAN_CONNECT},e.ConnectionChecker.prototype.doTypeChecks=function(t,n){if(t=t.getCheck(),n=n.getCheck(),!t||!n)return!0;for(var o=0;o<t.length;o++)if(-1!=n.indexOf(t[o]))return!0;return!1},e.ConnectionChecker.prototype.doDragChecks=function(t,n,o){if(t.distanceFrom(n)>o||n.getSourceBlock().isInsertionMarker())return!1;switch(n.type){case e.connectionTypes.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(t,n);case e.connectionTypes.OUTPUT_VALUE:if(n.isConnected()&&!n.targetBlock().isInsertionMarker()||t.isConnected())return!1;break;case e.connectionTypes.INPUT_VALUE:if(n.isConnected()&&!n.targetBlock().isMovable()&&!n.targetBlock().isShadow())return!1;break;case e.connectionTypes.NEXT_STATEMENT:if(n.isConnected()&&!t.getSourceBlock().nextConnection&&!n.targetBlock().isShadow()&&n.targetBlock().nextConnection)return!1;break;default:return!1}return-1==e.draggingConnections.indexOf(n)},e.ConnectionChecker.prototype.canConnectToPrevious_=function(t,n){return!(t.targetConnection||-1!=e.draggingConnections.indexOf(n)||n.targetConnection&&(!(t=n.targetBlock()).isInsertionMarker()||t.getPreviousBlock()))},e.registry.register(e.registry.Type.CONNECTION_CHECKER,e.registry.DEFAULT,e.ConnectionChecker),e.VariableMap=function(t){this.variableMap_=Object.create(null),this.workspace=t},e.VariableMap.prototype.clear=function(){this.variableMap_=Object.create(null)},e.VariableMap.prototype.renameVariable=function(t,n){var o=this.getVariable(n,t.type),r=this.workspace.getAllBlocks(!1);e.Events.setGroup(!0);try{o&&o.getId()!=t.getId()?this.renameVariableWithConflict_(t,n,o,r):this.renameVariableAndUses_(t,n,r)}finally{e.Events.setGroup(!1)}},e.VariableMap.prototype.renameVariableById=function(t,n){var o=this.getVariableById(t);if(!o)throw Error("Tried to rename a variable that didn't exist. ID: "+t);this.renameVariable(o,n)},e.VariableMap.prototype.renameVariableAndUses_=function(t,n,o){for(e.Events.fire(new(e.Events.get(e.Events.VAR_RENAME))(t,n)),t.name=n,n=0;n<o.length;n++)o[n].updateVarName(t)},e.VariableMap.prototype.renameVariableWithConflict_=function(t,n,o,r){var p=t.type;for(n!=o.name&&this.renameVariableAndUses_(o,n,r),n=0;n<r.length;n++)r[n].renameVarById(t.getId(),o.getId());e.Events.fire(new(e.Events.get(e.Events.VAR_DELETE))(t)),t=this.getVariablesOfType(p).indexOf(t),this.variableMap_[p].splice(t,1)},e.VariableMap.prototype.createVariable=function(t,n,o){var r=this.getVariable(t,n);if(r){if(o&&r.getId()!=o)throw Error('Variable "'+t+'" is already in use and its id is "'+r.getId()+'" which conflicts with the passed in id, "'+o+'".');return r}if(o&&this.getVariableById(o))throw Error('Variable id, "'+o+'", is already in use.');return r=o||e.utils.genUid(),r=new e.VariableModel(this.workspace,t,n=n||"",r),(t=this.variableMap_[n]||[]).push(r),delete this.variableMap_[n],this.variableMap_[n]=t,r},e.VariableMap.prototype.deleteVariable=function(t){for(var r,n=this.variableMap_[t.type],o=0;r=n[o];o++)if(r.getId()==t.getId()){n.splice(o,1),e.Events.fire(new(e.Events.get(e.Events.VAR_DELETE))(t));break}},e.VariableMap.prototype.deleteVariableById=function(t){var n=this.getVariableById(t);if(n){var p,o=n.name,r=this.getVariableUsesById(t);for(t=0;p=r[t];t++)if("procedures_defnoreturn"==p.type||"procedures_defreturn"==p.type)return t=p.getFieldValue("NAME"),o=e.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",o).replace("%2",t),void e.alert(o);var b=this;1<r.length?(o=e.Msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(r.length)).replace("%2",o),e.confirm(o,function(I){I&&n&&b.deleteVariableInternal(n,r)})):b.deleteVariableInternal(n,r)}else console.warn("Can't delete non-existent variable: "+t)},e.VariableMap.prototype.deleteVariableInternal=function(t,n){var o=e.Events.getGroup();o||e.Events.setGroup(!0);try{for(var r=0;r<n.length;r++)n[r].dispose(!0);this.deleteVariable(t)}finally{o||e.Events.setGroup(!1)}},e.VariableMap.prototype.getVariable=function(t,n){if(n=this.variableMap_[n||""])for(var r,o=0;r=n[o];o++)if(e.Names.equals(r.name,t))return r;return null},e.VariableMap.prototype.getVariableById=function(t){for(var n=Object.keys(this.variableMap_),o=0;o<n.length;o++)for(var b,r=n[o],p=0;b=this.variableMap_[r][p];p++)if(b.getId()==t)return b;return null},e.VariableMap.prototype.getVariablesOfType=function(t){return(t=this.variableMap_[t||""])?t.slice():[]},e.VariableMap.prototype.getVariableTypes=function(t){var n={};e.utils.object.mixin(n,this.variableMap_),t&&t.getPotentialVariableMap()&&e.utils.object.mixin(n,t.getPotentialVariableMap().variableMap_),t=Object.keys(n),n=!1;for(var o=0;o<t.length;o++)""==t[o]&&(n=!0);return n||t.push(""),t},e.VariableMap.prototype.getAllVariables=function(){var n,t=[];for(n in this.variableMap_)t=t.concat(this.variableMap_[n]);return t},e.VariableMap.prototype.getAllVariableNames=function(){var n,t=[];for(n in this.variableMap_)for(var p,o=this.variableMap_[n],r=0;p=o[r];r++)t.push(p.name);return t},e.VariableMap.prototype.getVariableUsesById=function(t){for(var n=[],o=this.workspace.getAllBlocks(!1),r=0;r<o.length;r++){var p=o[r].getVarModels();if(p)for(var b=0;b<p.length;b++)p[b].getId()==t&&n.push(o[r])}return n},e.Workspace=function(t){this.id=e.utils.genUid(),e.Workspace.WorkspaceDB_[this.id]=this,this.options=t||new e.Options({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(e.registry.getClassFromOptions(e.registry.Type.CONNECTION_CHECKER,this.options,!0))(this),this.topBlocks_=[],this.topComments_=[],this.commentDB_=Object.create(null),this.listeners_=[],this.undoStack_=[],this.redoStack_=[],this.blockDB_=Object.create(null),this.typedBlocksDB_=Object.create(null),this.variableMap_=new e.VariableMap(this),this.potentialVariableMap_=null},e.Workspace.prototype.rendered=!1,e.Workspace.prototype.isClearing=!1,e.Workspace.prototype.MAX_UNDO=1024,e.Workspace.prototype.connectionDBList=null,e.Workspace.prototype.dispose=function(){this.listeners_.length=0,this.clear(),delete e.Workspace.WorkspaceDB_[this.id]},e.Workspace.SCAN_ANGLE=3,e.Workspace.prototype.sortObjects_=function(t,n){return t=t.getRelativeToSurfaceXY(),n=n.getRelativeToSurfaceXY(),t.y+e.Workspace.prototype.sortObjects_.offset*t.x-(n.y+e.Workspace.prototype.sortObjects_.offset*n.x)},e.Workspace.prototype.addTopBlock=function(t){this.topBlocks_.push(t)},e.Workspace.prototype.removeTopBlock=function(t){if(!e.utils.arrayRemove(this.topBlocks_,t))throw Error("Block not present in workspace's list of top-most blocks.")},e.Workspace.prototype.getTopBlocks=function(t){var n=[].concat(this.topBlocks_);return t&&1<n.length&&(this.sortObjects_.offset=Math.sin(e.utils.math.toRadians(e.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),n.sort(this.sortObjects_)),n},e.Workspace.prototype.addTypedBlock=function(t){this.typedBlocksDB_[t.type]||(this.typedBlocksDB_[t.type]=[]),this.typedBlocksDB_[t.type].push(t)},e.Workspace.prototype.removeTypedBlock=function(t){this.typedBlocksDB_[t.type].splice(this.typedBlocksDB_[t.type].indexOf(t),1),this.typedBlocksDB_[t.type].length||delete this.typedBlocksDB_[t.type]},e.Workspace.prototype.getBlocksByType=function(t,n){return this.typedBlocksDB_[t]?(t=this.typedBlocksDB_[t].slice(0),n&&1<t.length&&(this.sortObjects_.offset=Math.sin(e.utils.math.toRadians(e.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),t.sort(this.sortObjects_)),t):[]},e.Workspace.prototype.addTopComment=function(t){this.topComments_.push(t),this.commentDB_[t.id]&&console.warn('Overriding an existing comment on this workspace, with id "'+t.id+'"'),this.commentDB_[t.id]=t},e.Workspace.prototype.removeTopComment=function(t){if(!e.utils.arrayRemove(this.topComments_,t))throw Error("Comment not present in workspace's list of top-most comments.");delete this.commentDB_[t.id]},e.Workspace.prototype.getTopComments=function(t){var n=[].concat(this.topComments_);return t&&1<n.length&&(this.sortObjects_.offset=Math.sin(e.utils.math.toRadians(e.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),n.sort(this.sortObjects_)),n},e.Workspace.prototype.getAllBlocks=function(t){if(t){t=this.getTopBlocks(!0);for(var n=[],o=0;o<t.length;o++)n.push.apply(n,t[o].getDescendants(!0))}else for(n=this.getTopBlocks(!1),o=0;o<n.length;o++)n.push.apply(n,n[o].getChildren(!1));return n.filter(function(r){return!r.isInsertionMarker()})},e.Workspace.prototype.clear=function(){this.isClearing=!0;try{var t=e.Events.getGroup();for(t||e.Events.setGroup(!0);this.topBlocks_.length;)this.topBlocks_[0].dispose(!1);for(;this.topComments_.length;)this.topComments_[this.topComments_.length-1].dispose(!1);t||e.Events.setGroup(!1),this.variableMap_.clear(),this.potentialVariableMap_&&this.potentialVariableMap_.clear()}finally{this.isClearing=!1}},e.Workspace.prototype.renameVariableById=function(t,n){this.variableMap_.renameVariableById(t,n)},e.Workspace.prototype.createVariable=function(t,n,o){return this.variableMap_.createVariable(t,n,o)},e.Workspace.prototype.getVariableUsesById=function(t){return this.variableMap_.getVariableUsesById(t)},e.Workspace.prototype.deleteVariableById=function(t){this.variableMap_.deleteVariableById(t)},e.Workspace.prototype.getVariable=function(t,n){return this.variableMap_.getVariable(t,n)},e.Workspace.prototype.getVariableById=function(t){return this.variableMap_.getVariableById(t)},e.Workspace.prototype.getVariablesOfType=function(t){return this.variableMap_.getVariablesOfType(t)},e.Workspace.prototype.getVariableTypes=function(){return this.variableMap_.getVariableTypes(this)},e.Workspace.prototype.getAllVariables=function(){return this.variableMap_.getAllVariables()},e.Workspace.prototype.getAllVariableNames=function(){return this.variableMap_.getAllVariableNames()},e.Workspace.prototype.getWidth=function(){return 0},e.Workspace.prototype.newBlock=function(t,n){return new e.Block(this,t,n)},e.Workspace.prototype.remainingCapacity=function(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length},e.Workspace.prototype.remainingCapacityOfType=function(t){return this.options.maxInstances?(void 0!==this.options.maxInstances[t]?this.options.maxInstances[t]:1/0)-this.getBlocksByType(t,!1).length:1/0},e.Workspace.prototype.isCapacityAvailable=function(t){if(!this.hasBlockLimits())return!0;var o,n=0;for(o in t){if(t[o]>this.remainingCapacityOfType(o))return!1;n+=t[o]}return!(n>this.remainingCapacity())},e.Workspace.prototype.hasBlockLimits=function(){return this.options.maxBlocks!=1/0||!!this.options.maxInstances},e.Workspace.prototype.getUndoStack=function(){return this.undoStack_},e.Workspace.prototype.getRedoStack=function(){return this.redoStack_},e.Workspace.prototype.undo=function(t){var n=t?this.redoStack_:this.undoStack_,o=t?this.undoStack_:this.redoStack_,r=n.pop();if(r){for(var p=[r];n.length&&r.group&&r.group==n[n.length-1].group;)p.push(n.pop());for(n=0;r=p[n];n++)o.push(r);p=e.Events.filter(p,t),e.Events.recordUndo=!1;try{for(n=0;r=p[n];n++)r.run(t)}finally{e.Events.recordUndo=!0}}},e.Workspace.prototype.clearUndo=function(){this.undoStack_.length=0,this.redoStack_.length=0,e.Events.clearPendingUndo()},e.Workspace.prototype.addChangeListener=function(t){return this.listeners_.push(t),t},e.Workspace.prototype.removeChangeListener=function(t){e.utils.arrayRemove(this.listeners_,t)},e.Workspace.prototype.fireChangeListener=function(t){if(t.recordUndo)for(this.undoStack_.push(t),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(var o,n=0;o=this.listeners_[n];n++)o(t)},e.Workspace.prototype.getBlockById=function(t){return this.blockDB_[t]||null},e.Workspace.prototype.setBlockById=function(t,n){this.blockDB_[t]=n},e.Workspace.prototype.removeBlockById=function(t){delete this.blockDB_[t]},e.Workspace.prototype.getCommentById=function(t){return this.commentDB_[t]||null},e.Workspace.prototype.allInputsFilled=function(t){for(var r,n=this.getTopBlocks(!1),o=0;r=n[o];o++)if(!r.allInputsFilled(t))return!1;return!0},e.Workspace.prototype.getPotentialVariableMap=function(){return this.potentialVariableMap_},e.Workspace.prototype.createPotentialVariableMap=function(){this.potentialVariableMap_=new e.VariableMap(this)},e.Workspace.prototype.getVariableMap=function(){return this.variableMap_},e.Workspace.prototype.setVariableMap=function(t){this.variableMap_=t},e.Workspace.WorkspaceDB_=Object.create(null),e.Workspace.getById=function(t){return e.Workspace.WorkspaceDB_[t]||null},e.Workspace.getAll=function(){var n,t=[];for(n in e.Workspace.WorkspaceDB_)t.push(e.Workspace.WorkspaceDB_[n]);return t},e.WorkspaceDragSurfaceSvg=function(t){this.container_=t,this.createDom()},e.WorkspaceDragSurfaceSvg.prototype.SVG_=null,e.WorkspaceDragSurfaceSvg.prototype.container_=null,e.WorkspaceDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{xmlns:e.utils.dom.SVG_NS,"xmlns:html":e.utils.dom.HTML_NS,"xmlns:xlink":e.utils.dom.XLINK_NS,version:"1.1",class:"blocklyWsDragSurface blocklyOverflowVisible"},null),this.container_.appendChild(this.SVG_))},e.WorkspaceDragSurfaceSvg.prototype.translateSurface=function(t,n){t=t.toFixed(0),n=n.toFixed(0),this.SVG_.style.display="block",e.utils.dom.setCssTransform(this.SVG_,"translate3d("+t+"px, "+n+"px, 0px)")},e.WorkspaceDragSurfaceSvg.prototype.getSurfaceTranslation=function(){return e.utils.getRelativeXY(this.SVG_)},e.WorkspaceDragSurfaceSvg.prototype.clearAndHide=function(t){if(!t)throw Error("Couldn't clear and hide the drag surface: missing new surface.");var n=this.SVG_.childNodes[0],o=this.SVG_.childNodes[1];if(!(n&&o&&e.utils.dom.hasClass(n,"blocklyBlockCanvas")&&e.utils.dom.hasClass(o,"blocklyBubbleCanvas")))throw Error("Couldn't clear and hide the drag surface. A node was missing.");if(null!=this.previousSibling_?e.utils.dom.insertAfter(n,this.previousSibling_):t.insertBefore(n,t.firstChild),e.utils.dom.insertAfter(o,n),this.SVG_.style.display="none",this.SVG_.childNodes.length)throw Error("Drag surface was not cleared.");e.utils.dom.setCssTransform(this.SVG_,""),this.previousSibling_=null},e.WorkspaceDragSurfaceSvg.prototype.setContentsAndShow=function(t,n,o,r,p,b){if(this.SVG_.childNodes.length)throw Error("Already dragging a block.");this.previousSibling_=o,t.setAttribute("transform","translate(0, 0) scale("+b+")"),n.setAttribute("transform","translate(0, 0) scale("+b+")"),this.SVG_.setAttribute("width",r),this.SVG_.setAttribute("height",p),this.SVG_.appendChild(t),this.SVG_.appendChild(n),this.SVG_.style.display="block"},e.blockRendering={},e.blockRendering.useDebugger=!1,e.blockRendering.register=function(t,n){e.registry.register(e.registry.Type.RENDERER,t,n)},e.blockRendering.unregister=function(t){e.registry.unregister(e.registry.Type.RENDERER,t)},e.blockRendering.startDebugger=function(){e.blockRendering.useDebugger=!0},e.blockRendering.stopDebugger=function(){e.blockRendering.useDebugger=!1},e.blockRendering.init=function(t,n,o){return(t=new(e.registry.getClass(e.registry.Type.RENDERER,t))(t)).init(n,o),t},e.ASTNode=function(t,n,o){if(!n)throw Error("Cannot create a node without a location.");this.type_=t,this.isConnection_=e.ASTNode.isConnectionType_(t),this.location_=n,this.wsCoordinate_=null,this.processParams_(o||null)},e.ASTNode.types={FIELD:"field",BLOCK:"block",INPUT:"input",OUTPUT:"output",NEXT:"next",PREVIOUS:"previous",STACK:"stack",WORKSPACE:"workspace"},e.ASTNode.NAVIGATE_ALL_FIELDS=!1,e.ASTNode.DEFAULT_OFFSET_Y=-20,e.ASTNode.isConnectionType_=function(t){switch(t){case e.ASTNode.types.PREVIOUS:case e.ASTNode.types.NEXT:case e.ASTNode.types.INPUT:case e.ASTNode.types.OUTPUT:return!0}return!1},e.ASTNode.createFieldNode=function(t){return t?new e.ASTNode(e.ASTNode.types.FIELD,t):null},e.ASTNode.createConnectionNode=function(t){if(!t)return null;var n=t.type;return n==e.connectionTypes.INPUT_VALUE||n==e.connectionTypes.NEXT_STATEMENT&&t.getParentInput()?e.ASTNode.createInputNode(t.getParentInput()):n==e.connectionTypes.NEXT_STATEMENT?new e.ASTNode(e.ASTNode.types.NEXT,t):n==e.connectionTypes.OUTPUT_VALUE?new e.ASTNode(e.ASTNode.types.OUTPUT,t):n==e.connectionTypes.PREVIOUS_STATEMENT?new e.ASTNode(e.ASTNode.types.PREVIOUS,t):null},e.ASTNode.createInputNode=function(t){return t&&t.connection?new e.ASTNode(e.ASTNode.types.INPUT,t.connection):null},e.ASTNode.createBlockNode=function(t){return t?new e.ASTNode(e.ASTNode.types.BLOCK,t):null},e.ASTNode.createStackNode=function(t){return t?new e.ASTNode(e.ASTNode.types.STACK,t):null},e.ASTNode.createWorkspaceNode=function(t,n){return n&&t?new e.ASTNode(e.ASTNode.types.WORKSPACE,t,{wsCoordinate:n}):null},e.ASTNode.createTopNode=function(t){var n=t.previousConnection||t.outputConnection;return n?e.ASTNode.createConnectionNode(n):e.ASTNode.createBlockNode(t)},e.ASTNode.prototype.processParams_=function(t){t&&t.wsCoordinate&&(this.wsCoordinate_=t.wsCoordinate)},e.ASTNode.prototype.getLocation=function(){return this.location_},e.ASTNode.prototype.getType=function(){return this.type_},e.ASTNode.prototype.getWsCoordinate=function(){return this.wsCoordinate_},e.ASTNode.prototype.isConnection=function(){return this.isConnection_},e.ASTNode.prototype.findNextForInput_=function(){var o,t=this.location_.getParentInput(),n=t.getSourceBlock();for(t=n.inputList.indexOf(t)+1;o=n.inputList[t];t++){for(var b,r=o.fieldRow,p=0;b=r[p];p++)if(b.isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(b);if(o.connection)return e.ASTNode.createInputNode(o)}return null},e.ASTNode.prototype.findNextForField_=function(){var t=this.location_,n=t.getParentInput(),o=t.getSourceBlock(),r=o.inputList.indexOf(n);for(t=n.fieldRow.indexOf(t)+1;n=o.inputList[r];r++){for(var p=n.fieldRow;t<p.length;){if(p[t].isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(p[t]);t++}if(t=0,n.connection)return e.ASTNode.createInputNode(n)}return null},e.ASTNode.prototype.findPrevForInput_=function(){for(var r,t=this.location_.getParentInput(),n=t.getSourceBlock(),o=n.inputList.indexOf(t);r=n.inputList[o];o--){if(r.connection&&r!==t)return e.ASTNode.createInputNode(r);for(var b,p=(r=r.fieldRow).length-1;b=r[p];p--)if(b.isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(b)}return null},e.ASTNode.prototype.findPrevForField_=function(){var p,t=this.location_,n=t.getParentInput(),o=t.getSourceBlock(),r=o.inputList.indexOf(n);for(t=n.fieldRow.indexOf(t)-1;p=o.inputList[r];r--){if(p.connection&&p!==n)return e.ASTNode.createInputNode(p);for(p=p.fieldRow;-1<t;){if(p[t].isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(p[t]);t--}0<=r-1&&(t=o.inputList[r-1].fieldRow.length-1)}return null},e.ASTNode.prototype.navigateBetweenStacks_=function(t){var n=this.getLocation();if(n instanceof e.Block||(n=n.getSourceBlock()),!n||!n.workspace)return null;var o=n.getRootBlock();n=o.workspace.getTopBlocks(!0);for(var p,r=0;p=n[r];r++)if(o.id==p.id)return-1==(t=r+(t?1:-1))||t==n.length?null:e.ASTNode.createStackNode(n[t]);throw Error("Couldn't find "+(t?"next":"previous")+" stack?!")},e.ASTNode.prototype.findTopASTNodeForBlock_=function(t){var n=t.previousConnection||t.outputConnection;return n?e.ASTNode.createConnectionNode(n):e.ASTNode.createBlockNode(t)},e.ASTNode.prototype.getOutAstNodeForBlock_=function(t){if(!t)return null;var n=(t=t.getTopStackBlock()).previousConnection||t.outputConnection;return n&&n.targetConnection&&n.targetConnection.getParentInput()?e.ASTNode.createInputNode(n.targetConnection.getParentInput()):e.ASTNode.createStackNode(t)},e.ASTNode.prototype.findFirstFieldOrInput_=function(t){t=t.inputList;for(var o,n=0;o=t[n];n++){for(var b,r=o.fieldRow,p=0;b=r[p];p++)if(b.isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(b);if(o.connection)return e.ASTNode.createInputNode(o)}return null},e.ASTNode.prototype.getSourceBlock=function(){return this.getType()===e.ASTNode.types.BLOCK||this.getType()===e.ASTNode.types.STACK?this.getLocation():this.getType()===e.ASTNode.types.WORKSPACE?null:this.getLocation().getSourceBlock()},e.ASTNode.prototype.next=function(){switch(this.type_){case e.ASTNode.types.STACK:return this.navigateBetweenStacks_(!0);case e.ASTNode.types.OUTPUT:var t=this.location_;return e.ASTNode.createBlockNode(t.getSourceBlock());case e.ASTNode.types.FIELD:return this.findNextForField_();case e.ASTNode.types.INPUT:return this.findNextForInput_();case e.ASTNode.types.BLOCK:return e.ASTNode.createConnectionNode(this.location_.nextConnection);case e.ASTNode.types.PREVIOUS:return e.ASTNode.createBlockNode((t=this.location_).getSourceBlock());case e.ASTNode.types.NEXT:return e.ASTNode.createConnectionNode((t=this.location_).targetConnection)}return null},e.ASTNode.prototype.in=function(){switch(this.type_){case e.ASTNode.types.WORKSPACE:var t=this.location_.getTopBlocks(!0);if(0<t.length)return e.ASTNode.createStackNode(t[0]);break;case e.ASTNode.types.STACK:return this.findTopASTNodeForBlock_(t=this.location_);case e.ASTNode.types.BLOCK:return this.findFirstFieldOrInput_(t=this.location_);case e.ASTNode.types.INPUT:return e.ASTNode.createConnectionNode(this.location_.targetConnection)}return null},e.ASTNode.prototype.prev=function(){switch(this.type_){case e.ASTNode.types.STACK:return this.navigateBetweenStacks_(!1);case e.ASTNode.types.FIELD:return this.findPrevForField_();case e.ASTNode.types.INPUT:return this.findPrevForInput_();case e.ASTNode.types.BLOCK:var t=this.location_;return e.ASTNode.createConnectionNode(t.previousConnection||t.outputConnection);case e.ASTNode.types.PREVIOUS:if((t=(t=this.location_).targetConnection)&&!t.getParentInput())return e.ASTNode.createConnectionNode(t);break;case e.ASTNode.types.NEXT:return e.ASTNode.createBlockNode((t=this.location_).getSourceBlock())}return null},e.ASTNode.prototype.out=function(){switch(this.type_){case e.ASTNode.types.STACK:var t=this.location_,n=t.getRelativeToSurfaceXY();return n=new e.utils.Coordinate(n.x,n.y+e.ASTNode.DEFAULT_OFFSET_Y),e.ASTNode.createWorkspaceNode(t.workspace,n);case e.ASTNode.types.OUTPUT:return(n=(t=this.location_).targetConnection)?e.ASTNode.createConnectionNode(n):e.ASTNode.createStackNode(t.getSourceBlock());case e.ASTNode.types.FIELD:return e.ASTNode.createBlockNode(this.location_.getSourceBlock());case e.ASTNode.types.INPUT:return e.ASTNode.createBlockNode((t=this.location_).getSourceBlock());case e.ASTNode.types.BLOCK:return this.getOutAstNodeForBlock_(t=this.location_);case e.ASTNode.types.PREVIOUS:case e.ASTNode.types.NEXT:return this.getOutAstNodeForBlock_((t=this.location_).getSourceBlock())}return null},e.Blocks=Object.create(null),e.Extensions={},e.Extensions.ALL_=Object.create(null),e.Extensions.register=function(t,n){if("string"!=typeof t||""==t.trim())throw Error('Error: Invalid extension name "'+t+'"');if(e.Extensions.ALL_[t])throw Error('Error: Extension "'+t+'" is already registered.');if("function"!=typeof n)throw Error('Error: Extension "'+t+'" must be a function');e.Extensions.ALL_[t]=n},e.Extensions.registerMixin=function(t,n){if(!n||"object"!=typeof n)throw Error('Error: Mixin "'+t+'" must be a object');e.Extensions.register(t,function(){this.mixin(n)})},e.Extensions.registerMutator=function(t,n,o,r){var p='Error when registering mutator "'+t+'": ';e.Extensions.checkHasFunction_(p,n.domToMutation,"domToMutation"),e.Extensions.checkHasFunction_(p,n.mutationToDom,"mutationToDom");var b=e.Extensions.checkMutatorDialog_(n,p);if(o&&"function"!=typeof o)throw Error('Extension "'+t+'" is not a function');e.Extensions.register(t,function(){if(b){if(!e.Mutator)throw Error(p+"Missing require for Blockly.Mutator");this.setMutator(new e.Mutator(r||[]))}this.mixin(n),o&&o.apply(this)})},e.Extensions.unregister=function(t){e.Extensions.ALL_[t]?delete e.Extensions.ALL_[t]:console.warn('No extension mapping for name "'+t+'" found to unregister')},e.Extensions.apply=function(t,n,o){var r=e.Extensions.ALL_[t];if("function"!=typeof r)throw Error('Error: Extension "'+t+'" not found.');if(o)e.Extensions.checkNoMutatorProperties_(t,n);else var p=e.Extensions.getMutatorProperties_(n);if(r.apply(n),o)e.Extensions.checkBlockHasMutatorProperties_('Error after applying mutator "'+t+'": ',n);else if(!e.Extensions.mutatorPropertiesMatch_(p,n))throw Error('Error when applying extension "'+t+'": mutation properties changed when applying a non-mutator extension.')},e.Extensions.checkHasFunction_=function(t,n,o){if(!n)throw Error(t+'missing required property "'+o+'"');if("function"!=typeof n)throw Error(t+'" required property "'+o+'" must be a function')},e.Extensions.checkNoMutatorProperties_=function(t,n){if(e.Extensions.getMutatorProperties_(n).length)throw Error('Error: tried to apply mutation "'+t+'" to a block that already has mutator functions.  Block id: '+n.id)},e.Extensions.checkMutatorDialog_=function(t,n){var o=void 0!==t.compose,r=void 0!==t.decompose;if(o&&r){if("function"!=typeof t.compose)throw Error(n+"compose must be a function.");if("function"!=typeof t.decompose)throw Error(n+"decompose must be a function.");return!0}if(!o&&!r)return!1;throw Error(n+'Must have both or neither of "compose" and "decompose"')},e.Extensions.checkBlockHasMutatorProperties_=function(t,n){if("function"!=typeof n.domToMutation)throw Error(t+'Applying a mutator didn\'t add "domToMutation"');if("function"!=typeof n.mutationToDom)throw Error(t+'Applying a mutator didn\'t add "mutationToDom"');e.Extensions.checkMutatorDialog_(n,t)},e.Extensions.getMutatorProperties_=function(t){var n=[];return void 0!==t.domToMutation&&n.push(t.domToMutation),void 0!==t.mutationToDom&&n.push(t.mutationToDom),void 0!==t.compose&&n.push(t.compose),void 0!==t.decompose&&n.push(t.decompose),n},e.Extensions.mutatorPropertiesMatch_=function(t,n){if((n=e.Extensions.getMutatorProperties_(n)).length!=t.length)return!1;for(var o=0;o<n.length;o++)if(t[o]!=n[o])return!1;return!0},e.Extensions.buildTooltipForDropdown=function(t,n){var o=[];return"object"==typeof document&&e.utils.runAfterPageLoad(function(){for(var r in n)e.utils.checkMessageReferences(n[r])}),function(){this.type&&-1==o.indexOf(this.type)&&(e.Extensions.checkDropdownOptionsInTable_(this,t,n),o.push(this.type)),this.setTooltip(function(){var r=String(this.getFieldValue(t)),p=n[r];return null==p?-1==o.indexOf(this.type)&&(r="No tooltip mapping for value "+r+" of field "+t,null!=this.type&&(r+=" of block type "+this.type),console.warn(r+".")):p=e.utils.replaceMessageReferences(p),p}.bind(this))}},e.Extensions.checkDropdownOptionsInTable_=function(t,n,o){var r=t.getField(n);if(!r.isOptionListDynamic()){r=r.getOptions();for(var p=0;p<r.length;++p){var b=r[p][1];null==o[b]&&console.warn("No tooltip mapping for value "+b+" of field "+n+" of block type "+t.type)}}},e.Extensions.buildTooltipWithFieldText=function(t,n){return"object"==typeof document&&e.utils.runAfterPageLoad(function(){e.utils.checkMessageReferences(t)}),function(){this.setTooltip(function(){var o=this.getField(n);return e.utils.replaceMessageReferences(t).replace("%1",o?o.getText():"")}.bind(this))}},e.Extensions.extensionParentTooltip_=function(){this.tooltipWhenNotConnected_=this.tooltip,this.setTooltip(function(){var t=this.getParent();return t&&t.getInputsInline()&&t.tooltip||this.tooltipWhenNotConnected_}.bind(this))},e.Extensions.register("parent_tooltip_when_inline",e.Extensions.extensionParentTooltip_),e.fieldRegistry={},e.fieldRegistry.register=function(t,n){e.registry.register(e.registry.Type.FIELD,t,n)},e.fieldRegistry.unregister=function(t){e.registry.unregister(e.registry.Type.FIELD,t)},e.fieldRegistry.fromJson=function(t){var n=e.registry.getObject(e.registry.Type.FIELD,t.type);return n?n.fromJson(t):(console.warn("Blockly could not create a field of type "+t.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null)},e.IDeletable=function(){},e.blockAnimations={},e.blockAnimations.disconnectPid_=0,e.blockAnimations.disconnectGroup_=null,e.blockAnimations.disposeUiEffect=function(t){var n=t.workspace,o=t.getSvgRoot();n.getAudioManager().play("delete"),t=n.getSvgXY(o),(o=o.cloneNode(!0)).translateX_=t.x,o.translateY_=t.y,o.setAttribute("transform","translate("+t.x+","+t.y+")"),n.getParentSvg().appendChild(o),o.bBox_=o.getBBox(),e.blockAnimations.disposeUiStep_(o,n.RTL,new Date,n.scale)},e.blockAnimations.disposeUiStep_=function(t,n,o,r){var p=(new Date-o)/150;1<p?e.utils.dom.removeNode(t):(t.setAttribute("transform","translate("+(t.translateX_+(n?-1:1)*t.bBox_.width*r/2*p)+","+(t.translateY_+t.bBox_.height*r*p)+") scale("+(1-p)*r+")"),setTimeout(e.blockAnimations.disposeUiStep_,10,t,n,o,r))},e.blockAnimations.connectionUiEffect=function(t){var n=t.workspace,o=n.scale;if(n.getAudioManager().play("click"),!(1>o)){var r=n.getSvgXY(t.getSvgRoot());t.outputConnection?(r.x+=(t.RTL?3:-3)*o,r.y+=13*o):t.previousConnection&&(r.x+=(t.RTL?-23:23)*o,r.y+=3*o),t=e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{cx:r.x,cy:r.y,r:0,fill:"none",stroke:"#888","stroke-width":10},n.getParentSvg()),e.blockAnimations.connectionUiStep_(t,new Date,o)}},e.blockAnimations.connectionUiStep_=function(t,n,o){var r=(new Date-n)/150;1<r?e.utils.dom.removeNode(t):(t.setAttribute("r",25*r*o),t.style.opacity=1-r,e.blockAnimations.disconnectPid_=setTimeout(e.blockAnimations.connectionUiStep_,10,t,n,o))},e.blockAnimations.disconnectUiEffect=function(t){if(t.workspace.getAudioManager().play("disconnect"),!(1>t.workspace.scale)){var n=t.getHeightWidth().height;n=Math.atan(10/n)/Math.PI*180,t.RTL||(n*=-1),e.blockAnimations.disconnectUiStep_(t.getSvgRoot(),n,new Date)}},e.blockAnimations.disconnectUiStep_=function(t,n,o){var r=(new Date-o)/200;1<r?t.skew_="":(t.skew_="skewX("+Math.round(Math.sin(r*Math.PI*3)*(1-r)*n)+")",e.blockAnimations.disconnectGroup_=t,e.blockAnimations.disconnectPid_=setTimeout(e.blockAnimations.disconnectUiStep_,10,t,n,o)),t.setAttribute("transform",t.translate_+t.skew_)},e.blockAnimations.disconnectUiStop=function(){if(e.blockAnimations.disconnectGroup_){clearTimeout(e.blockAnimations.disconnectPid_);var t=e.blockAnimations.disconnectGroup_;t.skew_="",t.setAttribute("transform",t.translate_),e.blockAnimations.disconnectGroup_=null}},e.Events.BlockDrag=function(t,n,o){e.Events.BlockDrag.superClass_.constructor.call(this,t?t.workspace.id:void 0),this.blockId=t?t.id:null,this.isStart=n,this.blocks=o},e.utils.object.inherits(e.Events.BlockDrag,e.Events.UiBase),e.Events.BlockDrag.prototype.type=e.Events.BLOCK_DRAG,e.Events.BlockDrag.prototype.toJson=function(){var t=e.Events.BlockDrag.superClass_.toJson.call(this);return t.isStart=this.isStart,t.blockId=this.blockId,t.blocks=this.blocks,t},e.Events.BlockDrag.prototype.fromJson=function(t){e.Events.BlockDrag.superClass_.fromJson.call(this,t),this.isStart=t.isStart,this.blockId=t.blockId,this.blocks=t.blocks},e.registry.register(e.registry.Type.EVENT,e.Events.BLOCK_DRAG,e.Events.BlockDrag),e.IBlockDragger=function(){},e.InsertionMarkerManager=function(t){this.topBlock_=e.selected=t,this.workspace_=t.workspace,this.lastMarker_=this.lastOnStack_=null,this.firstMarker_=this.createMarkerBlock_(this.topBlock_),this.localConnection_=this.closestConnection_=null,this.wouldDeleteBlock_=!1,this.fadedBlock_=this.highlightedBlock_=this.markerConnection_=null,this.availableConnections_=this.initAvailableConnections_()},e.InsertionMarkerManager.PREVIEW_TYPE={INSERTION_MARKER:0,INPUT_OUTLINE:1,REPLACEMENT_FADE:2},e.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR="The insertion marker manager tried to create a marker but the result is missing %1. If you are using a mutator, make sure your domToMutation method is properly defined.",e.InsertionMarkerManager.prototype.dispose=function(){this.availableConnections_.length=0,e.Events.disable();try{this.firstMarker_&&this.firstMarker_.dispose(),this.lastMarker_&&this.lastMarker_.dispose()}finally{e.Events.enable()}},e.InsertionMarkerManager.prototype.updateAvailableConnections=function(){this.availableConnections_=this.initAvailableConnections_()},e.InsertionMarkerManager.prototype.wouldDeleteBlock=function(){return this.wouldDeleteBlock_},e.InsertionMarkerManager.prototype.wouldConnectBlock=function(){return!!this.closestConnection_},e.InsertionMarkerManager.prototype.applyConnections=function(){if(this.closestConnection_&&(e.Events.disable(),this.hidePreview_(),e.Events.enable(),this.localConnection_.connect(this.closestConnection_),this.topBlock_.rendered)){var t=this.localConnection_.isSuperior()?this.closestConnection_:this.localConnection_;e.blockAnimations.connectionUiEffect(t.getSourceBlock()),this.topBlock_.getRootBlock().bringToFront()}},e.InsertionMarkerManager.prototype.update=function(t,n){var o=this.getCandidate_(t);((this.wouldDeleteBlock_=this.shouldDelete_(o,n))||this.shouldUpdatePreviews_(o,t))&&(e.Events.disable(),this.maybeHidePreview_(o),this.maybeShowPreview_(o),e.Events.enable())},e.InsertionMarkerManager.prototype.createMarkerBlock_=function(t){var n=t.type;e.Events.disable();try{var o=this.workspace_.newBlock(n);if(o.setInsertionMarker(!0),t.mutationToDom){var r=t.mutationToDom();r&&o.domToMutation(r)}for(n=0;n<t.inputList.length;n++){var p=t.inputList[n];if(p.name!=e.constants.COLLAPSED_INPUT_NAME){var b=o.inputList[n];if(!b)throw Error(e.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR.replace("%1","an input"));for(r=0;r<p.fieldRow.length;r++){var I=p.fieldRow[r],x=b.fieldRow[r];if(!x)throw Error(e.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR.replace("%1","a field"));x.setValue(I.getValue())}}}o.setCollapsed(t.isCollapsed()),o.setInputsInline(t.getInputsInline()),o.initSvg(),o.getSvgRoot().setAttribute("visibility","hidden")}finally{e.Events.enable()}return o},e.InsertionMarkerManager.prototype.initAvailableConnections_=function(){var t=this.topBlock_.getConnections_(!1),n=this.topBlock_.lastConnectionInStack(!0);if(n&&n!=this.topBlock_.nextConnection){if(t.push(n),this.lastOnStack_=n,this.lastMarker_){e.Events.disable();try{this.lastMarker_.dispose()}finally{e.Events.enable()}}this.lastMarker_=this.createMarkerBlock_(n.getSourceBlock())}return t},e.InsertionMarkerManager.prototype.shouldUpdatePreviews_=function(t,n){var o=t.local,r=t.closest;return t=t.radius,o&&r?this.localConnection_&&this.closestConnection_?!(this.closestConnection_==r&&this.localConnection_==o||(o=this.localConnection_.x+n.x-this.closestConnection_.x,n=this.localConnection_.y+n.y-this.closestConnection_.y,n=Math.sqrt(o*o+n*n),r&&t>n-e.CURRENT_CONNECTION_PREFERENCE)):!this.localConnection_&&!this.closestConnection_||(console.error("Only one of localConnection_ and closestConnection_ was set."),console.error("Returning true from shouldUpdatePreviews, but it's not clear why."),!0):!(!this.localConnection_||!this.closestConnection_)},e.InsertionMarkerManager.prototype.getCandidate_=function(t){for(var n=this.getStartRadius_(),o=null,r=null,p=0;p<this.availableConnections_.length;p++){var b=this.availableConnections_[p],I=b.closest(n,t);I.connection&&(o=I.connection,r=b,n=I.radius)}return{closest:o,local:r,radius:n}},e.InsertionMarkerManager.prototype.getStartRadius_=function(){return this.closestConnection_&&this.localConnection_?e.CONNECTING_SNAP_RADIUS:e.SNAP_RADIUS},e.InsertionMarkerManager.prototype.shouldDelete_=function(t,n){return!(!n||!this.workspace_.getComponentManager().hasCapability(n.id,e.ComponentManager.Capability.DELETE_AREA))&&n.wouldDelete(this.topBlock_,t&&!!t.closest)},e.InsertionMarkerManager.prototype.maybeShowPreview_=function(t){if(!this.wouldDeleteBlock_){var n=t.closest;t=t.local,n&&(n==this.closestConnection_||n.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.closestConnection_=n,this.localConnection_=t,this.showPreview_()))}},e.InsertionMarkerManager.prototype.showPreview_=function(){var t=this.closestConnection_,n=this.workspace_.getRenderer();switch(n.getConnectionPreviewMethod(t,this.localConnection_,this.topBlock_)){case e.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline_();break;case e.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker_();break;case e.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade_()}t&&n.shouldHighlightConnection(t)&&t.highlight()},e.InsertionMarkerManager.prototype.maybeHidePreview_=function(t){if(t.closest){var n=this.closestConnection_!=t.closest;t=this.localConnection_!=t.local,this.closestConnection_&&this.localConnection_&&(n||t||this.wouldDeleteBlock_)&&this.hidePreview_()}else this.hidePreview_();this.localConnection_=this.closestConnection_=this.markerConnection_=null},e.InsertionMarkerManager.prototype.hidePreview_=function(){this.closestConnection_&&this.closestConnection_.targetBlock()&&this.workspace_.getRenderer().shouldHighlightConnection(this.closestConnection_)&&this.closestConnection_.unhighlight(),this.fadedBlock_?this.hideReplacementFade_():this.highlightedBlock_?this.hideInsertionInputOutline_():this.markerConnection_&&this.hideInsertionMarker_()},e.InsertionMarkerManager.prototype.showInsertionMarker_=function(){var t=this.localConnection_,n=this.closestConnection_,o=this.lastOnStack_&&t==this.lastOnStack_?this.lastMarker_:this.firstMarker_;if((t=o.getMatchingConnection(t.getSourceBlock(),t))==this.markerConnection_)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");o.render(),o.rendered=!0,o.getSvgRoot().setAttribute("visibility","visible"),t&&n&&o.positionNearConnection(t,n),n&&t.connect(n),this.markerConnection_=t},e.InsertionMarkerManager.prototype.hideInsertionMarker_=function(){if(this.markerConnection_){var t=this.markerConnection_,n=t.getSourceBlock(),o=n.nextConnection,r=n.previousConnection,p=n.outputConnection;if(p=t.type==e.connectionTypes.INPUT_VALUE&&!(p&&p.targetConnection),!(t!=o||r&&r.targetConnection)||p?t.targetBlock().unplug(!1):t.type==e.connectionTypes.NEXT_STATEMENT&&t!=o?((o=t.targetConnection).getSourceBlock().unplug(!1),r=r?r.targetConnection:null,n.unplug(!0),r&&r.connect(o)):n.unplug(!0),t.targetConnection)throw Error("markerConnection_ still connected at the end of disconnectInsertionMarker");this.markerConnection_=null,(t=n.getSvgRoot())&&t.setAttribute("visibility","hidden")}else console.log("No insertion marker connection to disconnect")},e.InsertionMarkerManager.prototype.showInsertionInputOutline_=function(){var t=this.closestConnection_;this.highlightedBlock_=t.getSourceBlock(),this.highlightedBlock_.highlightShapeForInput(t,!0)},e.InsertionMarkerManager.prototype.hideInsertionInputOutline_=function(){this.highlightedBlock_.highlightShapeForInput(this.closestConnection_,!1),this.highlightedBlock_=null},e.InsertionMarkerManager.prototype.showReplacementFade_=function(){this.fadedBlock_=this.closestConnection_.targetBlock(),this.fadedBlock_.fadeForReplacement(!0)},e.InsertionMarkerManager.prototype.hideReplacementFade_=function(){this.fadedBlock_.fadeForReplacement(!1),this.fadedBlock_=null},e.InsertionMarkerManager.prototype.getInsertionMarkers=function(){var t=[];return this.firstMarker_&&t.push(this.firstMarker_),this.lastMarker_&&t.push(this.lastMarker_),t},e.BlockDragger=function(t,n){this.draggingBlock_=t,this.workspace_=n,this.draggedConnectionManager_=new e.InsertionMarkerManager(this.draggingBlock_),this.dragTarget_=null,this.wouldDeleteBlock_=!1,this.startXY_=this.draggingBlock_.getRelativeToSurfaceXY(),this.dragIconData_=e.BlockDragger.initIconData_(t)},e.BlockDragger.prototype.dispose=function(){this.dragIconData_.length=0,this.draggedConnectionManager_&&this.draggedConnectionManager_.dispose()},e.BlockDragger.initIconData_=function(t){var n=[];t=t.getDescendants(!1);for(var r,o=0;r=t[o];o++){r=r.getIcons();for(var p=0;p<r.length;p++){var b={location:r[p].getIconLocation(),icon:r[p]};n.push(b)}}return n},e.BlockDragger.prototype.startDrag=function(t,n){e.Events.getGroup()||e.Events.setGroup(!0),this.fireDragStartEvent_(),this.workspace_.isMutator&&this.draggingBlock_.bringToFront(),e.utils.dom.startTextWidthCache(),this.workspace_.setResizesEnabled(!1),e.blockAnimations.disconnectUiStop(),this.shouldDisconnect_(n)&&this.disconnectBlock_(n,t),this.draggingBlock_.setDragging(!0),this.draggingBlock_.moveToDragSurface()},e.BlockDragger.prototype.shouldDisconnect_=function(t){return!!(this.draggingBlock_.getParent()||t&&this.draggingBlock_.nextConnection&&this.draggingBlock_.nextConnection.targetBlock())},e.BlockDragger.prototype.disconnectBlock_=function(t,n){this.draggingBlock_.unplug(t),t=this.pixelsToWorkspaceUnits_(n),t=e.utils.Coordinate.sum(this.startXY_,t),this.draggingBlock_.translate(t.x,t.y),e.blockAnimations.disconnectUiEffect(this.draggingBlock_),this.draggedConnectionManager_.updateAvailableConnections()},e.BlockDragger.prototype.fireDragStartEvent_=function(){var t=new(e.Events.get(e.Events.BLOCK_DRAG))(this.draggingBlock_,!0,this.draggingBlock_.getDescendants(!1));e.Events.fire(t)},e.BlockDragger.prototype.drag=function(t,n){n=this.pixelsToWorkspaceUnits_(n);var o=e.utils.Coordinate.sum(this.startXY_,n);this.draggingBlock_.moveDuringDrag(o),this.dragIcons_(n),o=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(t),this.draggedConnectionManager_.update(n,this.dragTarget_),t=this.wouldDeleteBlock_,this.wouldDeleteBlock_=this.draggedConnectionManager_.wouldDeleteBlock(),t!=this.wouldDeleteBlock_&&this.updateCursorDuringBlockDrag_(),this.dragTarget_!==o&&(o&&o.onDragExit(this.draggingBlock_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBlock_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBlock_)},e.BlockDragger.prototype.endDrag=function(t,n){if(this.drag(t,n),this.dragIconData_=[],this.fireDragEndEvent_(),e.utils.dom.stopTextWidthCache(),e.blockAnimations.disconnectUiStop(),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBlock_))t=this.startXY_;else{var o=(t=this.getNewLocationAfterDrag_(n)).delta;t=t.newLocation}this.draggingBlock_.moveOffDragSurface(t),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBlock_),this.maybeDeleteBlock_()||(this.draggingBlock_.setDragging(!1),o?this.updateBlockAfterMove_(o):e.bumpObjectIntoBounds_(this.draggingBlock_.workspace,this.workspace_.getMetricsManager().getScrollMetrics(!0),this.draggingBlock_)),this.workspace_.setResizesEnabled(!0),e.Events.setGroup(!1)},e.BlockDragger.prototype.getNewLocationAfterDrag_=function(t){var n={};return n.delta=this.pixelsToWorkspaceUnits_(t),n.newLocation=e.utils.Coordinate.sum(this.startXY_,n.delta),n},e.BlockDragger.prototype.maybeDeleteBlock_=function(){return!!this.wouldDeleteBlock_&&(this.fireMoveEvent_(),this.draggingBlock_.dispose(!1,!0),e.draggingConnections=[],!0)},e.BlockDragger.prototype.updateBlockAfterMove_=function(t){this.draggingBlock_.moveConnections(t.x,t.y),this.fireMoveEvent_(),this.draggedConnectionManager_.wouldConnectBlock()?this.draggedConnectionManager_.applyConnections():this.draggingBlock_.render(),this.draggingBlock_.scheduleSnapAndBump()},e.BlockDragger.prototype.fireDragEndEvent_=function(){var t=new(e.Events.get(e.Events.BLOCK_DRAG))(this.draggingBlock_,!1,this.draggingBlock_.getDescendants(!1));e.Events.fire(t)},e.BlockDragger.prototype.updateToolboxStyle_=function(t){var n=this.workspace_.getToolbox();if(n){var o=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab";t&&"function"==typeof n.removeStyle?n.removeStyle(o):t||"function"!=typeof n.addStyle||n.addStyle(o)}},e.BlockDragger.prototype.fireMoveEvent_=function(){var t=new(e.Events.get(e.Events.BLOCK_MOVE))(this.draggingBlock_);t.oldCoordinate=this.startXY_,t.recordNew(),e.Events.fire(t)},e.BlockDragger.prototype.updateCursorDuringBlockDrag_=function(){this.draggingBlock_.setDeleteStyle(this.wouldDeleteBlock_)},e.BlockDragger.prototype.pixelsToWorkspaceUnits_=function(t){return t=new e.utils.Coordinate(t.x/this.workspace_.scale,t.y/this.workspace_.scale),this.workspace_.isMutator&&t.scale(1/this.workspace_.options.parentWorkspace.scale),t},e.BlockDragger.prototype.dragIcons_=function(t){for(var n=0;n<this.dragIconData_.length;n++){var o=this.dragIconData_[n];o.icon.setIconLocation(e.utils.Coordinate.sum(o.location,t))}},e.BlockDragger.prototype.getInsertionMarkers=function(){return this.draggedConnectionManager_&&this.draggedConnectionManager_.getInsertionMarkers?this.draggedConnectionManager_.getInsertionMarkers():[]},e.registry.register(e.registry.Type.BLOCK_DRAGGER,e.registry.DEFAULT,e.BlockDragger),e.IContextMenu=function(){},e.IDraggable=function(){},e.IBubble=function(){},e.Bubble=function(t,n,o,r,p,b){this.workspace_=t,this.content_=n,this.shape_=o,this.onMouseDownResizeWrapper_=this.onMouseDownBubbleWrapper_=this.moveCallback_=this.resizeCallback_=null,this.disposed=!1,o=e.Bubble.ARROW_ANGLE,this.workspace_.RTL&&(o=-o),this.arrow_radians_=e.utils.math.toRadians(o),t.getBubbleCanvas().appendChild(this.createDom_(n,!(!p||!b))),this.setAnchorLocation(r),p&&b||(p=(t=this.content_.getBBox()).width+2*e.Bubble.BORDER_WIDTH,b=t.height+2*e.Bubble.BORDER_WIDTH),this.setBubbleSize(p,b),this.positionBubble_(),this.renderArrow_(),this.rendered_=!0},e.Bubble.BORDER_WIDTH=6,e.Bubble.ARROW_THICKNESS=5,e.Bubble.ARROW_ANGLE=20,e.Bubble.ARROW_BEND=4,e.Bubble.ANCHOR_RADIUS=8,e.Bubble.onMouseUpWrapper_=null,e.Bubble.onMouseMoveWrapper_=null,e.Bubble.unbindDragEvents_=function(){e.Bubble.onMouseUpWrapper_&&(e.browserEvents.unbind(e.Bubble.onMouseUpWrapper_),e.Bubble.onMouseUpWrapper_=null),e.Bubble.onMouseMoveWrapper_&&(e.browserEvents.unbind(e.Bubble.onMouseMoveWrapper_),e.Bubble.onMouseMoveWrapper_=null)},e.Bubble.bubbleMouseUp_=function(t){e.Touch.clearTouchIdentifier(),e.Bubble.unbindDragEvents_()},e.Bubble.prototype.rendered_=!1,e.Bubble.prototype.anchorXY_=null,e.Bubble.prototype.relativeLeft_=0,e.Bubble.prototype.relativeTop_=0,e.Bubble.prototype.width_=0,e.Bubble.prototype.height_=0,e.Bubble.prototype.autoLayout_=!0,e.Bubble.prototype.createDom_=function(t,n){this.bubbleGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},null);var o={filter:"url(#"+this.workspace_.getRenderer().getConstants().embossFilterId+")"};return e.utils.userAgent.JAVA_FX&&(o={}),o=e.utils.dom.createSvgElement(e.utils.Svg.G,o,this.bubbleGroup_),this.bubbleArrow_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{},o),this.bubbleBack_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyDraggable",x:0,y:0,rx:e.Bubble.BORDER_WIDTH,ry:e.Bubble.BORDER_WIDTH},o),n?(this.resizeGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:this.workspace_.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.bubbleGroup_),e.utils.dom.createSvgElement(e.utils.Svg.POLYGON,{points:"0,x x,x x,0".replace(/x/g,(n=2*e.Bubble.BORDER_WIDTH).toString())},this.resizeGroup_),e.utils.dom.createSvgElement(e.utils.Svg.LINE,{class:"blocklyResizeLine",x1:n/3,y1:n-1,x2:n-1,y2:n/3},this.resizeGroup_),e.utils.dom.createSvgElement(e.utils.Svg.LINE,{class:"blocklyResizeLine",x1:2*n/3,y1:n-1,x2:n-1,y2:2*n/3},this.resizeGroup_)):this.resizeGroup_=null,this.workspace_.options.readOnly||(this.onMouseDownBubbleWrapper_=e.browserEvents.conditionalBind(this.bubbleBack_,"mousedown",this,this.bubbleMouseDown_),this.resizeGroup_&&(this.onMouseDownResizeWrapper_=e.browserEvents.conditionalBind(this.resizeGroup_,"mousedown",this,this.resizeMouseDown_))),this.bubbleGroup_.appendChild(t),this.bubbleGroup_},e.Bubble.prototype.getSvgRoot=function(){return this.bubbleGroup_},e.Bubble.prototype.setSvgId=function(t){this.bubbleGroup_.dataset&&(this.bubbleGroup_.dataset.blockId=t)},e.Bubble.prototype.bubbleMouseDown_=function(t){var n=this.workspace_.getGesture(t);n&&n.handleBubbleStart(t,this)},e.Bubble.prototype.showContextMenu=function(t){},e.Bubble.prototype.isDeletable=function(){return!1},e.Bubble.prototype.setDeleteStyle=function(t){},e.Bubble.prototype.resizeMouseDown_=function(t){this.promote(),e.Bubble.unbindDragEvents_(),e.utils.isRightButton(t)||(this.workspace_.startDrag(t,new e.utils.Coordinate(this.workspace_.RTL?-this.width_:this.width_,this.height_)),e.Bubble.onMouseUpWrapper_=e.browserEvents.conditionalBind(document,"mouseup",this,e.Bubble.bubbleMouseUp_),e.Bubble.onMouseMoveWrapper_=e.browserEvents.conditionalBind(document,"mousemove",this,this.resizeMouseMove_),e.hideChaff()),t.stopPropagation()},e.Bubble.prototype.resizeMouseMove_=function(t){this.autoLayout_=!1,t=this.workspace_.moveDrag(t),this.setBubbleSize(this.workspace_.RTL?-t.x:t.x,t.y),this.workspace_.RTL&&this.positionBubble_()},e.Bubble.prototype.registerResizeEvent=function(t){this.resizeCallback_=t},e.Bubble.prototype.registerMoveEvent=function(t){this.moveCallback_=t},e.Bubble.prototype.promote=function(){var t=this.bubbleGroup_.parentNode;return t.lastChild!==this.bubbleGroup_&&(t.appendChild(this.bubbleGroup_),!0)},e.Bubble.prototype.setAnchorLocation=function(t){this.anchorXY_=t,this.rendered_&&this.positionBubble_()},e.Bubble.prototype.layoutBubble_=function(){var t=this.workspace_.getMetricsManager().getViewMetrics(!0),n=this.getOptimalRelativeLeft_(t),o=this.getOptimalRelativeTop_(t),r=this.shape_.getBBox(),p={x:n,y:-this.height_-this.workspace_.getRenderer().getConstants().MIN_BLOCK_HEIGHT},b={x:-this.width_-30,y:o};o={x:r.width,y:o};var I={x:n,y:r.height};n=r.width<r.height?o:I,r=r.width<r.height?I:o,o=this.getOverlap_(p,t),I=this.getOverlap_(b,t);var x=this.getOverlap_(n,t);t=this.getOverlap_(r,t),o==(t=Math.max(o,I,x,t))?(this.relativeLeft_=p.x,this.relativeTop_=p.y):I==t?(this.relativeLeft_=b.x,this.relativeTop_=b.y):x==t?(this.relativeLeft_=n.x,this.relativeTop_=n.y):(this.relativeLeft_=r.x,this.relativeTop_=r.y)},e.Bubble.prototype.getOverlap_=function(t,n){var o=this.workspace_.RTL?this.anchorXY_.x-t.x-this.width_:t.x+this.anchorXY_.x;return t=t.y+this.anchorXY_.y,Math.max(0,Math.min(1,(Math.min(o+this.width_,n.left+n.width)-Math.max(o,n.left))*(Math.min(t+this.height_,n.top+n.height)-Math.max(t,n.top))/(this.width_*this.height_)))},e.Bubble.prototype.getOptimalRelativeLeft_=function(t){var n=-this.width_/4;if(this.width_>t.width)return n;if(this.workspace_.RTL)var o=this.anchorXY_.x-n,r=o-this.width_,p=t.left+t.width,b=t.left+e.Scrollbar.scrollbarThickness/this.workspace_.scale;else o=(r=n+this.anchorXY_.x)+this.width_,b=t.left,p=t.left+t.width-e.Scrollbar.scrollbarThickness/this.workspace_.scale;return this.workspace_.RTL?r<b?n=-(b-this.anchorXY_.x+this.width_):o>p&&(n=-(p-this.anchorXY_.x)):r<b?n=b-this.anchorXY_.x:o>p&&(n=p-this.anchorXY_.x-this.width_),n},e.Bubble.prototype.getOptimalRelativeTop_=function(t){var n=-this.height_/4;if(this.height_>t.height)return n;var o=this.anchorXY_.y+n,p=t.top;t=t.top+t.height-e.Scrollbar.scrollbarThickness/this.workspace_.scale;var b=this.anchorXY_.y;return o<p?n=p-b:o+this.height_>t&&(n=t-b-this.height_),n},e.Bubble.prototype.positionBubble_=function(){var t=this.anchorXY_.x;this.moveTo(t=this.workspace_.RTL?t-(this.relativeLeft_+this.width_):t+this.relativeLeft_,this.relativeTop_+this.anchorXY_.y)},e.Bubble.prototype.moveTo=function(t,n){this.bubbleGroup_.setAttribute("transform","translate("+t+","+n+")")},e.Bubble.prototype.setDragging=function(t){!t&&this.moveCallback_&&this.moveCallback_()},e.Bubble.prototype.getBubbleSize=function(){return new e.utils.Size(this.width_,this.height_)},e.Bubble.prototype.setBubbleSize=function(t,n){var o=2*e.Bubble.BORDER_WIDTH;t=Math.max(t,o+45),n=Math.max(n,o+20),this.width_=t,this.height_=n,this.bubbleBack_.setAttribute("width",t),this.bubbleBack_.setAttribute("height",n),this.resizeGroup_&&this.resizeGroup_.setAttribute("transform",this.workspace_.RTL?"translate("+2*e.Bubble.BORDER_WIDTH+","+(n-o)+") scale(-1 1)":"translate("+(t-o)+","+(n-o)+")"),this.autoLayout_&&this.layoutBubble_(),this.positionBubble_(),this.renderArrow_(),this.resizeCallback_&&this.resizeCallback_()},e.Bubble.prototype.renderArrow_=function(){var t=[],n=this.width_/2,o=this.height_/2,r=-this.relativeLeft_,p=-this.relativeTop_;if(n==r&&o==p)t.push("M "+n+","+o);else{p-=o,r-=n,this.workspace_.RTL&&(r*=-1);var b=Math.sqrt(p*p+r*r),I=Math.acos(r/b);0>p&&(I=2*Math.PI-I);var x=I+Math.PI/2;x>2*Math.PI&&(x-=2*Math.PI);var k=Math.sin(x),Y=Math.cos(x),X=this.getBubbleSize();x=(X.width+X.height)/e.Bubble.ARROW_THICKNESS,x=Math.min(x,X.width,X.height)/4,r=n+(X=1-e.Bubble.ANCHOR_RADIUS/b)*r,p=o+X*p,X=n+x*Y;var it=o+x*k;n-=x*Y,o-=x*k,(k=I+this.arrow_radians_)>2*Math.PI&&(k-=2*Math.PI),I=Math.sin(k)*b/e.Bubble.ARROW_BEND,b=Math.cos(k)*b/e.Bubble.ARROW_BEND,t.push("M"+X+","+it),t.push("C"+(X+b)+","+(it+I)+" "+r+","+p+" "+r+","+p),t.push("C"+r+","+p+" "+(n+b)+","+(o+I)+" "+n+","+o)}t.push("z"),this.bubbleArrow_.setAttribute("d",t.join(" "))},e.Bubble.prototype.setColour=function(t){this.bubbleBack_.setAttribute("fill",t),this.bubbleArrow_.setAttribute("fill",t)},e.Bubble.prototype.dispose=function(){this.onMouseDownBubbleWrapper_&&e.browserEvents.unbind(this.onMouseDownBubbleWrapper_),this.onMouseDownResizeWrapper_&&e.browserEvents.unbind(this.onMouseDownResizeWrapper_),e.Bubble.unbindDragEvents_(),e.utils.dom.removeNode(this.bubbleGroup_),this.disposed=!0},e.Bubble.prototype.moveDuringDrag=function(t,n){t?t.translateSurface(n.x,n.y):this.moveTo(n.x,n.y),this.relativeLeft_=this.workspace_.RTL?this.anchorXY_.x-n.x-this.width_:n.x-this.anchorXY_.x,this.relativeTop_=n.y-this.anchorXY_.y,this.renderArrow_()},e.Bubble.prototype.getRelativeToSurfaceXY=function(){return new e.utils.Coordinate(this.workspace_.RTL?-this.relativeLeft_+this.anchorXY_.x-this.width_:this.anchorXY_.x+this.relativeLeft_,this.anchorXY_.y+this.relativeTop_)},e.Bubble.prototype.setAutoLayout=function(t){this.autoLayout_=t},e.Bubble.textToDom=function(t){var n=e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:e.Bubble.BORDER_WIDTH},null);t=t.split("\n");for(var o=0;o<t.length;o++){var r=e.utils.dom.createSvgElement(e.utils.Svg.TSPAN,{dy:"1em",x:e.Bubble.BORDER_WIDTH},n),p=document.createTextNode(t[o]);r.appendChild(p)}return n},e.Bubble.createNonEditableBubble=function(t,n,o){if((o=new e.Bubble(n.workspace,t,n.pathObject.svgPath,o,null,null)).setSvgId(n.id),n.RTL){n=t.getBBox().width;for(var p,r=0;p=t.childNodes[r];r++)p.setAttribute("text-anchor","end"),p.setAttribute("x",n+e.Bubble.BORDER_WIDTH)}return o},e.Events.CommentBase=function(t){this.commentId=(this.isBlank=void 0===t)?"":t.id,this.workspaceId=this.isBlank?"":t.workspace.id,this.group=e.Events.getGroup(),this.recordUndo=e.Events.recordUndo},e.utils.object.inherits(e.Events.CommentBase,e.Events.Abstract),e.Events.CommentBase.prototype.toJson=function(){var t=e.Events.CommentBase.superClass_.toJson.call(this);return this.commentId&&(t.commentId=this.commentId),t},e.Events.CommentBase.prototype.fromJson=function(t){e.Events.CommentBase.superClass_.fromJson.call(this,t),this.commentId=t.commentId},e.Events.CommentChange=function(t,n,o){e.Events.CommentChange.superClass_.constructor.call(this,t),t&&(this.oldContents_=void 0===n?"":n,this.newContents_=void 0===o?"":o)},e.utils.object.inherits(e.Events.CommentChange,e.Events.CommentBase),e.Events.CommentChange.prototype.type=e.Events.COMMENT_CHANGE,e.Events.CommentChange.prototype.toJson=function(){var t=e.Events.CommentChange.superClass_.toJson.call(this);return t.oldContents=this.oldContents_,t.newContents=this.newContents_,t},e.Events.CommentChange.prototype.fromJson=function(t){e.Events.CommentChange.superClass_.fromJson.call(this,t),this.oldContents_=t.oldContents,this.newContents_=t.newContents},e.Events.CommentChange.prototype.isNull=function(){return this.oldContents_==this.newContents_},e.Events.CommentChange.prototype.run=function(t){var n=this.getEventWorkspace_().getCommentById(this.commentId);n?n.setContent(t?this.newContents_:this.oldContents_):console.warn("Can't change non-existent comment: "+this.commentId)},e.Events.CommentCreate=function(t){e.Events.CommentCreate.superClass_.constructor.call(this,t),t&&(this.xml=t.toXmlWithXY())},e.utils.object.inherits(e.Events.CommentCreate,e.Events.CommentBase),e.Events.CommentCreate.prototype.type=e.Events.COMMENT_CREATE,e.Events.CommentCreate.prototype.toJson=function(){var t=e.Events.CommentCreate.superClass_.toJson.call(this);return t.xml=e.Xml.domToText(this.xml),t},e.Events.CommentCreate.prototype.fromJson=function(t){e.Events.CommentCreate.superClass_.fromJson.call(this,t),this.xml=e.Xml.textToDom(t.xml)},e.Events.CommentCreate.prototype.run=function(t){e.Events.CommentCreateDeleteHelper(this,t)},e.Events.CommentCreateDeleteHelper=function(t,n){var o=t.getEventWorkspace_();n?((n=e.utils.xml.createElement("xml")).appendChild(t.xml),e.Xml.domToWorkspace(n,o)):(o=o.getCommentById(t.commentId))?o.dispose(!1,!1):console.warn("Can't uncreate non-existent comment: "+t.commentId)},e.Events.CommentDelete=function(t){e.Events.CommentDelete.superClass_.constructor.call(this,t),t&&(this.xml=t.toXmlWithXY())},e.utils.object.inherits(e.Events.CommentDelete,e.Events.CommentBase),e.Events.CommentDelete.prototype.type=e.Events.COMMENT_DELETE,e.Events.CommentDelete.prototype.toJson=function(){return e.Events.CommentDelete.superClass_.toJson.call(this)},e.Events.CommentDelete.prototype.fromJson=function(t){e.Events.CommentDelete.superClass_.fromJson.call(this,t)},e.Events.CommentDelete.prototype.run=function(t){e.Events.CommentCreateDeleteHelper(this,!t)},e.Events.CommentMove=function(t){e.Events.CommentMove.superClass_.constructor.call(this,t),t&&(this.comment_=t,this.oldCoordinate_=t.getXY(),this.newCoordinate_=null)},e.utils.object.inherits(e.Events.CommentMove,e.Events.CommentBase),e.Events.CommentMove.prototype.recordNew=function(){if(!this.comment_)throw Error("Tried to record the new position of a comment on the same event twice.");this.newCoordinate_=this.comment_.getXY(),this.comment_=null},e.Events.CommentMove.prototype.type=e.Events.COMMENT_MOVE,e.Events.CommentMove.prototype.setOldCoordinate=function(t){this.oldCoordinate_=t},e.Events.CommentMove.prototype.toJson=function(){var t=e.Events.CommentMove.superClass_.toJson.call(this);return this.oldCoordinate_&&(t.oldCoordinate=Math.round(this.oldCoordinate_.x)+","+Math.round(this.oldCoordinate_.y)),this.newCoordinate_&&(t.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y)),t},e.Events.CommentMove.prototype.fromJson=function(t){if(e.Events.CommentMove.superClass_.fromJson.call(this,t),t.oldCoordinate){var n=t.oldCoordinate.split(",");this.oldCoordinate_=new e.utils.Coordinate(Number(n[0]),Number(n[1]))}t.newCoordinate&&(n=t.newCoordinate.split(","),this.newCoordinate_=new e.utils.Coordinate(Number(n[0]),Number(n[1])))},e.Events.CommentMove.prototype.isNull=function(){return e.utils.Coordinate.equals(this.oldCoordinate_,this.newCoordinate_)},e.Events.CommentMove.prototype.run=function(t){var n=this.getEventWorkspace_().getCommentById(this.commentId);if(n){t=t?this.newCoordinate_:this.oldCoordinate_;var o=n.getXY();n.moveBy(t.x-o.x,t.y-o.y)}else console.warn("Can't move non-existent comment: "+this.commentId)},e.registry.register(e.registry.Type.EVENT,e.Events.COMMENT_CREATE,e.Events.CommentCreate),e.registry.register(e.registry.Type.EVENT,e.Events.COMMENT_CHANGE,e.Events.CommentChange),e.registry.register(e.registry.Type.EVENT,e.Events.COMMENT_MOVE,e.Events.CommentMove),e.registry.register(e.registry.Type.EVENT,e.Events.COMMENT_DELETE,e.Events.CommentDelete),e.BubbleDragger=function(t,n){this.draggingBubble_=t,this.workspace_=n,this.dragTarget_=null,this.wouldDeleteBubble_=!1,this.startXY_=this.draggingBubble_.getRelativeToSurfaceXY(),this.dragSurface_=e.utils.is3dSupported()&&n.getBlockDragSurface()?n.getBlockDragSurface():null},e.BubbleDragger.prototype.dispose=function(){this.dragSurface_=this.workspace_=this.draggingBubble_=null},e.BubbleDragger.prototype.startBubbleDrag=function(){e.Events.getGroup()||e.Events.setGroup(!0),this.workspace_.setResizesEnabled(!1),this.draggingBubble_.setAutoLayout(!1),this.dragSurface_&&this.moveToDragSurface_(),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!0)},e.BubbleDragger.prototype.dragBubble=function(t,n){n=this.pixelsToWorkspaceUnits_(n),n=e.utils.Coordinate.sum(this.startXY_,n),this.draggingBubble_.moveDuringDrag(this.dragSurface_,n),n=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(t),t=this.wouldDeleteBubble_,this.wouldDeleteBubble_=this.shouldDelete_(this.dragTarget_),t!=this.wouldDeleteBubble_&&this.updateCursorDuringBubbleDrag_(),this.dragTarget_!==n&&(n&&n.onDragExit(this.draggingBubble_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBubble_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBubble_)},e.BubbleDragger.prototype.shouldDelete_=function(t){return!(!t||!this.workspace_.getComponentManager().hasCapability(t.id,e.ComponentManager.Capability.DELETE_AREA))&&t.wouldDelete(this.draggingBubble_,!1)},e.BubbleDragger.prototype.updateCursorDuringBubbleDrag_=function(){this.draggingBubble_.setDeleteStyle(this.wouldDeleteBubble_)},e.BubbleDragger.prototype.endBubbleDrag=function(t,n){this.dragBubble(t,n),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBubble_)?t=this.startXY_:(t=this.pixelsToWorkspaceUnits_(n),t=e.utils.Coordinate.sum(this.startXY_,t)),this.draggingBubble_.moveTo(t.x,t.y),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBubble_),this.wouldDeleteBubble_?(this.fireMoveEvent_(),this.draggingBubble_.dispose(!1,!0)):(this.dragSurface_&&this.dragSurface_.clearAndHide(this.workspace_.getBubbleCanvas()),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!1),this.fireMoveEvent_()),this.workspace_.setResizesEnabled(!0),e.Events.setGroup(!1)},e.BubbleDragger.prototype.fireMoveEvent_=function(){if(this.draggingBubble_.isComment){var t=new(e.Events.get(e.Events.COMMENT_MOVE))(this.draggingBubble_);t.setOldCoordinate(this.startXY_),t.recordNew(),e.Events.fire(t)}},e.BubbleDragger.prototype.pixelsToWorkspaceUnits_=function(t){return t=new e.utils.Coordinate(t.x/this.workspace_.scale,t.y/this.workspace_.scale),this.workspace_.isMutator&&t.scale(1/this.workspace_.options.parentWorkspace.scale),t},e.BubbleDragger.prototype.moveToDragSurface_=function(){this.draggingBubble_.moveTo(0,0),this.dragSurface_.translateSurface(this.startXY_.x,this.startXY_.y),this.dragSurface_.setBlocksAndShow(this.draggingBubble_.getSvgRoot())},e.Events.Click=function(t,n,o){e.Events.Click.superClass_.constructor.call(this,t?t.workspace.id:n),this.blockId=t?t.id:null,this.targetType=o},e.utils.object.inherits(e.Events.Click,e.Events.UiBase),e.Events.Click.prototype.type=e.Events.CLICK,e.Events.Click.prototype.toJson=function(){var t=e.Events.Click.superClass_.toJson.call(this);return t.targetType=this.targetType,this.blockId&&(t.blockId=this.blockId),t},e.Events.Click.prototype.fromJson=function(t){e.Events.Click.superClass_.fromJson.call(this,t),this.targetType=t.targetType,this.blockId=t.blockId},e.registry.register(e.registry.Type.EVENT,e.Events.CLICK,e.Events.Click),e.WorkspaceDragger=function(t){this.workspace_=t,this.horizontalScrollEnabled_=this.workspace_.isMovableHorizontally(),this.verticalScrollEnabled_=this.workspace_.isMovableVertically(),this.startScrollXY_=new e.utils.Coordinate(t.scrollX,t.scrollY)},e.WorkspaceDragger.prototype.dispose=function(){this.workspace_=null},e.WorkspaceDragger.prototype.startDrag=function(){e.selected&&e.selected.unselect(),this.workspace_.setupDragSurface()},e.WorkspaceDragger.prototype.endDrag=function(t){this.drag(t),this.workspace_.resetDragSurface()},e.WorkspaceDragger.prototype.drag=function(t){if(t=e.utils.Coordinate.sum(this.startScrollXY_,t),this.horizontalScrollEnabled_&&this.verticalScrollEnabled_)this.workspace_.scroll(t.x,t.y);else if(this.horizontalScrollEnabled_)this.workspace_.scroll(t.x,this.workspace_.scrollY);else{if(!this.verticalScrollEnabled_)throw new TypeError("Invalid state.");this.workspace_.scroll(this.workspace_.scrollX,t.y)}},e.Gesture=function(t,n){this.mouseDownXY_=null,this.currentDragDeltaXY_=new e.utils.Coordinate(0,0),this.startWorkspace_=this.targetBlock_=this.startBlock_=this.startField_=this.startBubble_=null,this.creatorWorkspace_=n,this.isDraggingBubble_=this.isDraggingBlock_=this.isDraggingWorkspace_=this.hasExceededDragRadius_=!1,this.mostRecentEvent_=t,this.flyout_=this.workspaceDragger_=this.blockDragger_=this.bubbleDragger_=this.onUpWrapper_=this.onMoveWrapper_=null,this.isEnding_=this.hasStarted_=this.calledUpdateIsDragging_=!1,this.healStack_=!e.DRAG_STACK},e.Gesture.prototype.dispose=function(){e.Touch.clearTouchIdentifier(),e.Tooltip.unblock(),this.creatorWorkspace_.clearGesture(),this.onMoveWrapper_&&e.browserEvents.unbind(this.onMoveWrapper_),this.onUpWrapper_&&e.browserEvents.unbind(this.onUpWrapper_),this.blockDragger_&&this.blockDragger_.dispose(),this.workspaceDragger_&&this.workspaceDragger_.dispose(),this.bubbleDragger_&&this.bubbleDragger_.dispose()},e.Gesture.prototype.updateFromEvent_=function(t){var n=new e.utils.Coordinate(t.clientX,t.clientY);this.updateDragDelta_(n)&&(this.updateIsDragging_(),e.longStop_()),this.mostRecentEvent_=t},e.Gesture.prototype.updateDragDelta_=function(t){return this.currentDragDeltaXY_=e.utils.Coordinate.difference(t,this.mouseDownXY_),!this.hasExceededDragRadius_&&(this.hasExceededDragRadius_=e.utils.Coordinate.magnitude(this.currentDragDeltaXY_)>(this.flyout_?e.FLYOUT_DRAG_RADIUS:e.DRAG_RADIUS))},e.Gesture.prototype.updateIsDraggingFromFlyout_=function(){return!(!this.targetBlock_||!this.flyout_.isBlockCreatable_(this.targetBlock_)||this.flyout_.isScrollable()&&!this.flyout_.isDragTowardWorkspace(this.currentDragDeltaXY_)||(this.startWorkspace_=this.flyout_.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),e.Events.getGroup()||e.Events.setGroup(!0),this.startBlock_=null,this.targetBlock_=this.flyout_.createBlock(this.targetBlock_),this.targetBlock_.select(),0))},e.Gesture.prototype.updateIsDraggingBubble_=function(){return!!this.startBubble_&&(this.isDraggingBubble_=!0,this.startDraggingBubble_(),!0)},e.Gesture.prototype.updateIsDraggingBlock_=function(){return!!this.targetBlock_&&(this.flyout_?this.isDraggingBlock_=this.updateIsDraggingFromFlyout_():this.targetBlock_.isMovable()&&(this.isDraggingBlock_=!0),!!this.isDraggingBlock_&&(this.startDraggingBlock_(),!0))},e.Gesture.prototype.updateIsDraggingWorkspace_=function(){(this.flyout_?this.flyout_.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.workspaceDragger_=new e.WorkspaceDragger(this.startWorkspace_),this.isDraggingWorkspace_=!0,this.workspaceDragger_.startDrag())},e.Gesture.prototype.updateIsDragging_=function(){if(this.calledUpdateIsDragging_)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging_=!0,this.updateIsDraggingBubble_()||this.updateIsDraggingBlock_()||this.updateIsDraggingWorkspace_()},e.Gesture.prototype.startDraggingBlock_=function(){this.blockDragger_=new(e.registry.getClassFromOptions(e.registry.Type.BLOCK_DRAGGER,this.creatorWorkspace_.options,!0))(this.targetBlock_,this.startWorkspace_),this.blockDragger_.startDrag(this.currentDragDeltaXY_,this.healStack_),this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_)},e.Gesture.prototype.startDraggingBubble_=function(){this.bubbleDragger_=new e.BubbleDragger(this.startBubble_,this.startWorkspace_),this.bubbleDragger_.startBubbleDrag(),this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_)},e.Gesture.prototype.doStart=function(t){e.utils.isTargetInput(t)?this.cancel():(this.hasStarted_=!0,e.blockAnimations.disconnectUiStop(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),e.hideChaff(!!this.flyout_),this.startWorkspace_.markFocused(),this.mostRecentEvent_=t,e.Tooltip.block(),this.targetBlock_&&this.targetBlock_.select(),e.utils.isRightButton(t)?this.handleRightClick(t):("touchstart"!=t.type.toLowerCase()&&"pointerdown"!=t.type.toLowerCase()||"mouse"==t.pointerType||e.longStart(t,this),this.mouseDownXY_=new e.utils.Coordinate(t.clientX,t.clientY),this.healStack_=t.altKey||t.ctrlKey||t.metaKey,this.bindMouseEvents(t)))},e.Gesture.prototype.bindMouseEvents=function(t){this.onMoveWrapper_=e.browserEvents.conditionalBind(document,"mousemove",null,this.handleMove.bind(this)),this.onUpWrapper_=e.browserEvents.conditionalBind(document,"mouseup",null,this.handleUp.bind(this)),t.preventDefault(),t.stopPropagation()},e.Gesture.prototype.handleMove=function(t){this.updateFromEvent_(t),this.isDraggingWorkspace_?this.workspaceDragger_.drag(this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBubble_&&this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_),t.preventDefault(),t.stopPropagation()},e.Gesture.prototype.handleUp=function(t){this.updateFromEvent_(t),e.longStop_(),this.isEnding_?console.log("Trying to end a gesture recursively."):(this.isEnding_=!0,this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(t,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endDrag(t,this.currentDragDeltaXY_):this.isDraggingWorkspace_?this.workspaceDragger_.endDrag(this.currentDragDeltaXY_):this.isBubbleClick_()?this.doBubbleClick_():this.isFieldClick_()?this.doFieldClick_():this.isBlockClick_()?this.doBlockClick_():this.isWorkspaceClick_()&&this.doWorkspaceClick_(t),t.preventDefault(),t.stopPropagation(),this.dispose())},e.Gesture.prototype.cancel=function(){this.isEnding_||(e.longStop_(),this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingWorkspace_&&this.workspaceDragger_.endDrag(this.currentDragDeltaXY_),this.dispose())},e.Gesture.prototype.handleRightClick=function(t){this.targetBlock_?(this.bringBlockToFront_(),e.hideChaff(!!this.flyout_),this.targetBlock_.showContextMenu(t)):this.startBubble_?this.startBubble_.showContextMenu(t):this.startWorkspace_&&!this.flyout_&&(e.hideChaff(),this.startWorkspace_.showContextMenu(t)),t.preventDefault(),t.stopPropagation(),this.dispose()},e.Gesture.prototype.handleWsStart=function(t,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace_(n),this.mostRecentEvent_=t,this.doStart(t)},e.Gesture.prototype.fireWorkspaceClick_=function(t){e.Events.fire(new(e.Events.get(e.Events.CLICK))(null,t.id,"workspace"))},e.Gesture.prototype.handleFlyoutStart=function(t,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout_(n),this.handleWsStart(t,n.getWorkspace())},e.Gesture.prototype.handleBlockStart=function(t,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(n),this.mostRecentEvent_=t},e.Gesture.prototype.handleBubbleStart=function(t,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(n),this.mostRecentEvent_=t},e.Gesture.prototype.doBubbleClick_=function(){this.startBubble_.setFocus&&this.startBubble_.setFocus(),this.startBubble_.select&&this.startBubble_.select()},e.Gesture.prototype.doFieldClick_=function(){this.startField_.showEditor(this.mostRecentEvent_),this.bringBlockToFront_()},e.Gesture.prototype.doBlockClick_=function(){if(this.flyout_&&this.flyout_.autoClose)this.targetBlock_.isEnabled()&&(e.Events.getGroup()||e.Events.setGroup(!0),this.flyout_.createBlock(this.targetBlock_).scheduleSnapAndBump());else{var t=new(e.Events.get(e.Events.CLICK))(this.startBlock_,this.startWorkspace_.id,"block");e.Events.fire(t)}this.bringBlockToFront_(),e.Events.setGroup(!1)},e.Gesture.prototype.doWorkspaceClick_=function(t){t=this.creatorWorkspace_,e.selected&&e.selected.unselect(),this.fireWorkspaceClick_(this.startWorkspace_||t)},e.Gesture.prototype.bringBlockToFront_=function(){this.targetBlock_&&!this.flyout_&&this.targetBlock_.bringToFront()},e.Gesture.prototype.setStartField=function(t){if(this.hasStarted_)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField_||(this.startField_=t)},e.Gesture.prototype.setStartBubble=function(t){this.startBubble_||(this.startBubble_=t)},e.Gesture.prototype.setStartBlock=function(t){this.startBlock_||this.startBubble_||(this.startBlock_=t,t.isInFlyout&&t!=t.getRootBlock()?this.setTargetBlock_(t.getRootBlock()):this.setTargetBlock_(t))},e.Gesture.prototype.setTargetBlock_=function(t){t.isShadow()?this.setTargetBlock_(t.getParent()):this.targetBlock_=t},e.Gesture.prototype.setStartWorkspace_=function(t){this.startWorkspace_||(this.startWorkspace_=t)},e.Gesture.prototype.setStartFlyout_=function(t){this.flyout_||(this.flyout_=t)},e.Gesture.prototype.isBubbleClick_=function(){return!!this.startBubble_&&!this.hasExceededDragRadius_},e.Gesture.prototype.isBlockClick_=function(){return!!this.startBlock_&&!this.hasExceededDragRadius_&&!this.isFieldClick_()},e.Gesture.prototype.isFieldClick_=function(){return!!this.startField_&&this.startField_.isClickable()&&!this.hasExceededDragRadius_&&(!this.flyout_||!this.flyout_.autoClose)},e.Gesture.prototype.isWorkspaceClick_=function(){return!(this.startBlock_||this.startBubble_||this.startField_||this.hasExceededDragRadius_)},e.Gesture.prototype.isDragging=function(){return this.isDraggingWorkspace_||this.isDraggingBlock_||this.isDraggingBubble_},e.Gesture.prototype.hasStarted=function(){return this.hasStarted_},e.Gesture.prototype.getInsertionMarkers=function(){return this.blockDragger_?this.blockDragger_.getInsertionMarkers():[]},e.Gesture.prototype.getCurrentDragger=function(){return this.isDraggingBlock_?this.blockDragger_:this.isDraggingWorkspace_?this.workspaceDragger_:this.isDraggingBubble_?this.bubbleDragger_:null},e.Gesture.inProgress=function(){for(var o,t=e.Workspace.getAll(),n=0;o=t[n];n++)if(o.currentGesture_)return!0;return!1},e.IRegistrable=function(){},e.Marker=function(){this.drawer_=this.curNode_=this.colour=null,this.type="marker"},e.Marker.prototype.setDrawer=function(t){this.drawer_=t},e.Marker.prototype.getDrawer=function(){return this.drawer_},e.Marker.prototype.getCurNode=function(){return this.curNode_},e.Marker.prototype.setCurNode=function(t){var n=this.curNode_;this.curNode_=t,this.drawer_&&this.drawer_.draw(n,this.curNode_)},e.Marker.prototype.draw=function(){this.drawer_&&this.drawer_.draw(this.curNode_,this.curNode_)},e.Marker.prototype.hide=function(){this.drawer_&&this.drawer_.hide()},e.Marker.prototype.dispose=function(){this.getDrawer()&&this.getDrawer().dispose()},e.Cursor=function(){e.Cursor.superClass_.constructor.call(this),this.type="cursor"},e.utils.object.inherits(e.Cursor,e.Marker),e.Cursor.prototype.next=function(){var t=this.getCurNode();if(!t)return null;for(t=t.next();t&&t.next()&&(t.getType()==e.ASTNode.types.NEXT||t.getType()==e.ASTNode.types.BLOCK);)t=t.next();return t&&this.setCurNode(t),t},e.Cursor.prototype.in=function(){var t=this.getCurNode();return t?((t.getType()==e.ASTNode.types.PREVIOUS||t.getType()==e.ASTNode.types.OUTPUT)&&(t=t.next()),(t=t.in())&&this.setCurNode(t),t):null},e.Cursor.prototype.prev=function(){var t=this.getCurNode();if(!t)return null;for(t=t.prev();t&&t.prev()&&(t.getType()==e.ASTNode.types.NEXT||t.getType()==e.ASTNode.types.BLOCK);)t=t.prev();return t&&this.setCurNode(t),t},e.Cursor.prototype.out=function(){var t=this.getCurNode();return t?((t=t.out())&&t.getType()==e.ASTNode.types.BLOCK&&(t=t.prev()||t),t&&this.setCurNode(t),t):null},e.registry.register(e.registry.Type.CURSOR,e.registry.DEFAULT,e.Cursor),e.MarkerManager=function(t){this.cursorSvg_=this.cursor_=null,this.markers_=Object.create(null),this.workspace_=t},e.MarkerManager.LOCAL_MARKER="local_marker_1",e.MarkerManager.prototype.registerMarker=function(t,n){this.markers_[t]&&this.unregisterMarker(t),n.setDrawer(this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,n)),this.setMarkerSvg(n.getDrawer().createDom()),this.markers_[t]=n},e.MarkerManager.prototype.unregisterMarker=function(t){var n=this.markers_[t];if(!n)throw Error("Marker with ID "+t+" does not exist. Can only unregister markers that exist.");n.dispose(),delete this.markers_[t]},e.MarkerManager.prototype.getCursor=function(){return this.cursor_},e.MarkerManager.prototype.getMarker=function(t){return this.markers_[t]||null},e.MarkerManager.prototype.setCursor=function(t){this.cursor_&&this.cursor_.getDrawer()&&this.cursor_.getDrawer().dispose(),(this.cursor_=t)&&(t=this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,this.cursor_),this.cursor_.setDrawer(t),this.setCursorSvg(this.cursor_.getDrawer().createDom()))},e.MarkerManager.prototype.setCursorSvg=function(t){t?(this.workspace_.getBlockCanvas().appendChild(t),this.cursorSvg_=t):this.cursorSvg_=null},e.MarkerManager.prototype.setMarkerSvg=function(t){t?this.workspace_.getBlockCanvas()&&(this.cursorSvg_?this.workspace_.getBlockCanvas().insertBefore(t,this.cursorSvg_):this.workspace_.getBlockCanvas().appendChild(t)):this.markerSvg_=null},e.MarkerManager.prototype.updateMarkers=function(){this.workspace_.keyboardAccessibilityMode&&this.cursorSvg_&&this.workspace_.getCursor().draw()},e.MarkerManager.prototype.dispose=function(){for(var o,t=Object.keys(this.markers_),n=0;o=t[n];n++)this.unregisterMarker(o);this.markers_=null,this.cursor_&&(this.cursor_.dispose(),this.cursor_=null)},e.WidgetDiv={},e.WidgetDiv.owner_=null,e.WidgetDiv.dispose_=null,e.WidgetDiv.rendererClassName_="",e.WidgetDiv.themeClassName_="",e.WidgetDiv.createDom=function(){e.WidgetDiv.DIV||(e.WidgetDiv.DIV=document.createElement("div"),e.WidgetDiv.DIV.className="blocklyWidgetDiv",(e.parentContainer||document.body).appendChild(e.WidgetDiv.DIV))},e.WidgetDiv.show=function(t,n,o){e.WidgetDiv.hide(),e.WidgetDiv.owner_=t,e.WidgetDiv.dispose_=o,(t=e.WidgetDiv.DIV).style.direction=n?"rtl":"ltr",t.style.display="block",n=e.getMainWorkspace(),e.WidgetDiv.rendererClassName_=n.getRenderer().getClassName(),e.WidgetDiv.themeClassName_=n.getTheme().getClassName(),e.utils.dom.addClass(t,e.WidgetDiv.rendererClassName_),e.utils.dom.addClass(t,e.WidgetDiv.themeClassName_)},e.WidgetDiv.hide=function(){if(e.WidgetDiv.isVisible()){e.WidgetDiv.owner_=null;var t=e.WidgetDiv.DIV;t.style.display="none",t.style.left="",t.style.top="",e.WidgetDiv.dispose_&&e.WidgetDiv.dispose_(),e.WidgetDiv.dispose_=null,t.textContent="",e.WidgetDiv.rendererClassName_&&(e.utils.dom.removeClass(t,e.WidgetDiv.rendererClassName_),e.WidgetDiv.rendererClassName_=""),e.WidgetDiv.themeClassName_&&(e.utils.dom.removeClass(t,e.WidgetDiv.themeClassName_),e.WidgetDiv.themeClassName_=""),e.getMainWorkspace().markFocused()}},e.WidgetDiv.isVisible=function(){return!!e.WidgetDiv.owner_},e.WidgetDiv.hideIfOwner=function(t){e.WidgetDiv.owner_==t&&e.WidgetDiv.hide()},e.WidgetDiv.positionInternal_=function(t,n,o){e.WidgetDiv.DIV.style.left=t+"px",e.WidgetDiv.DIV.style.top=n+"px",e.WidgetDiv.DIV.style.height=o+"px"},e.WidgetDiv.positionWithAnchor=function(t,n,o,r){var p=e.WidgetDiv.calculateY_(t,n,o);t=e.WidgetDiv.calculateX_(t,n,o,r),0>p?e.WidgetDiv.positionInternal_(t,0,o.height+p):e.WidgetDiv.positionInternal_(t,p,o.height)},e.WidgetDiv.calculateX_=function(t,n,o,r){return r?(n=Math.max(n.right-o.width,t.left),Math.min(n,t.right-o.width)):(n=Math.min(n.left,t.right-o.width),Math.max(n,t.left))},e.WidgetDiv.calculateY_=function(t,n,o){return n.bottom+o.height>=t.bottom?n.top-o.height:n.bottom},e.Field=function(t,n,o){this.value_=this.DEFAULT_VALUE,this.tooltip_=this.validator_=null,this.size_=new e.utils.Size(0,0),this.constants_=this.mouseDownWrapper_=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg_=this.cursorSvg_=null,o&&this.configure_(o),this.setValue(t),n&&this.setValidator(n)},e.Field.prototype.DEFAULT_VALUE=null,e.Field.prototype.name=void 0,e.Field.prototype.disposed=!1,e.Field.prototype.maxDisplayLength=50,e.Field.prototype.sourceBlock_=null,e.Field.prototype.isDirty_=!0,e.Field.prototype.visible_=!0,e.Field.prototype.clickTarget_=null,e.Field.NBSP="\xa0",e.Field.prototype.EDITABLE=!0,e.Field.prototype.SERIALIZABLE=!1,e.Field.prototype.configure_=function(t){var n=t.tooltip;"string"==typeof n&&(n=e.utils.replaceMessageReferences(t.tooltip)),n&&this.setTooltip(n)},e.Field.prototype.setSourceBlock=function(t){if(this.sourceBlock_)throw Error("Field already bound to a block.");this.sourceBlock_=t},e.Field.prototype.getConstants=function(){return!this.constants_&&this.sourceBlock_&&this.sourceBlock_.workspace&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_},e.Field.prototype.getSourceBlock=function(){return this.sourceBlock_},e.Field.prototype.init=function(){this.fieldGroup_||(this.fieldGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},null),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip_),this.bindEvents_(),this.initModel())},e.Field.prototype.initView=function(){this.createBorderRect_(),this.createTextElement_()},e.Field.prototype.initModel=function(){},e.Field.prototype.createBorderRect_=function(){this.borderRect_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)},e.Field.prototype.createTextElement_=function(){this.textElement_=e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)},e.Field.prototype.bindEvents_=function(){e.Tooltip.bindMouseEvents(this.getClickTarget_()),this.mouseDownWrapper_=e.browserEvents.conditionalBind(this.getClickTarget_(),"mousedown",this,this.onMouseDown_)},e.Field.prototype.fromXml=function(t){this.setValue(t.textContent)},e.Field.prototype.toXml=function(t){return t.textContent=this.getValue(),t},e.Field.prototype.dispose=function(){e.DropDownDiv.hideIfOwner(this),e.WidgetDiv.hideIfOwner(this),e.Tooltip.unbindMouseEvents(this.getClickTarget_()),this.mouseDownWrapper_&&e.browserEvents.unbind(this.mouseDownWrapper_),e.utils.dom.removeNode(this.fieldGroup_),this.disposed=!0},e.Field.prototype.updateEditable=function(){var t=this.fieldGroup_;this.EDITABLE&&t&&(this.sourceBlock_.isEditable()?(e.utils.dom.addClass(t,"blocklyEditableText"),e.utils.dom.removeClass(t,"blocklyNonEditableText"),t.style.cursor=this.CURSOR):(e.utils.dom.addClass(t,"blocklyNonEditableText"),e.utils.dom.removeClass(t,"blocklyEditableText"),t.style.cursor=""))},e.Field.prototype.isClickable=function(){return!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&!!this.showEditor_&&"function"==typeof this.showEditor_},e.Field.prototype.isCurrentlyEditable=function(){return this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()},e.Field.prototype.isSerializable=function(){var t=!1;return this.name&&(this.SERIALIZABLE?t=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),t=!0)),t},e.Field.prototype.isVisible=function(){return this.visible_},e.Field.prototype.setVisible=function(t){if(this.visible_!=t){this.visible_=t;var n=this.getSvgRoot();n&&(n.style.display=t?"block":"none")}},e.Field.prototype.setValidator=function(t){this.validator_=t},e.Field.prototype.getValidator=function(){return this.validator_},e.Field.prototype.getSvgRoot=function(){return this.fieldGroup_},e.Field.prototype.applyColour=function(){},e.Field.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()},e.Field.prototype.showEditor=function(t){this.isClickable()&&this.showEditor_(t)},e.Field.prototype.updateSize_=function(t){var n=this.getConstants(),o=2*(t=null!=t?t:this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0),r=n.FIELD_TEXT_HEIGHT,p=0;this.textElement_&&(o+=p=e.utils.dom.getFastTextWidth(this.textElement_,n.FIELD_TEXT_FONTSIZE,n.FIELD_TEXT_FONTWEIGHT,n.FIELD_TEXT_FONTFAMILY)),this.borderRect_&&(r=Math.max(r,n.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=r,this.size_.width=o,this.positionTextElement_(t,p),this.positionBorderRect_()},e.Field.prototype.positionTextElement_=function(t,n){if(this.textElement_){var o=this.getConstants(),r=this.size_.height/2;this.textElement_.setAttribute("x",this.sourceBlock_.RTL?this.size_.width-n-t:t),this.textElement_.setAttribute("y",o.FIELD_TEXT_BASELINE_CENTER?r:r-o.FIELD_TEXT_HEIGHT/2+o.FIELD_TEXT_BASELINE)}},e.Field.prototype.positionBorderRect_=function(){this.borderRect_&&(this.borderRect_.setAttribute("width",this.size_.width),this.borderRect_.setAttribute("height",this.size_.height),this.borderRect_.setAttribute("rx",this.getConstants().FIELD_BORDER_RECT_RADIUS),this.borderRect_.setAttribute("ry",this.getConstants().FIELD_BORDER_RECT_RADIUS))},e.Field.prototype.getSize=function(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&0==this.size_.width&&(console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead."),this.render_()),this.size_):new e.utils.Size(0,0)},e.Field.prototype.getScaledBBox=function(){if(this.borderRect_)t=this.borderRect_.getBoundingClientRect(),o=e.utils.style.getPageOffset(this.borderRect_),r=t.width,t=t.height;else{var t=this.sourceBlock_.getHeightWidth(),n=this.sourceBlock_.workspace.scale,o=this.getAbsoluteXY_(),r=t.width*n;t=t.height*n,e.utils.userAgent.GECKO?(o.x+=1.5*n,o.y+=1.5*n):e.utils.userAgent.EDGE||e.utils.userAgent.IE||(o.x-=.5*n,o.y-=.5*n),r+=1*n,t+=1*n}return new e.utils.Rect(o.y,o.y+t,o.x,o.x+r)},e.Field.prototype.getDisplayText_=function(){var t=this.getText();return t?(t.length>this.maxDisplayLength&&(t=t.substring(0,this.maxDisplayLength-2)+"\u2026"),t=t.replace(/\s/g,e.Field.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(t+="\u200f"),t):e.Field.NBSP},e.Field.prototype.getText=function(){if(this.getText_){var t=this.getText_.call(this);if(null!==t)return String(t)}return String(this.getValue())},e.Field.prototype.markDirty=function(){this.isDirty_=!0,this.constants_=null},e.Field.prototype.forceRerender=function(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours(),this.updateMarkers_())},e.Field.prototype.setValue=function(t){if(null!==t){var n=this.doClassValidation_(t);if(!((t=this.processValidation_(t,n))instanceof Error)){if((n=this.getValidator())&&(n=n.call(this,t),(t=this.processValidation_(t,n))instanceof Error))return;if(!(n=this.sourceBlock_)||!n.disposed){var o=this.getValue();o===t?this.doValueUpdate_(t):(n&&e.Events.isEnabled()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(n,"field",this.name||null,o,t)),this.doValueUpdate_(t),this.isDirty_&&this.forceRerender())}}}},e.Field.prototype.processValidation_=function(t,n){return null===n?(this.doValueInvalid_(t),this.isDirty_&&this.forceRerender(),Error()):(void 0!==n&&(t=n),t)},e.Field.prototype.getValue=function(){return this.value_},e.Field.prototype.doClassValidation_=function(t){return null==t?null:t},e.Field.prototype.doValueUpdate_=function(t){this.value_=t,this.isDirty_=!0},e.Field.prototype.doValueInvalid_=function(t){},e.Field.prototype.onMouseDown_=function(t){this.sourceBlock_&&this.sourceBlock_.workspace&&(t=this.sourceBlock_.workspace.getGesture(t))&&t.setStartField(this)},e.Field.prototype.setTooltip=function(t){t||""===t||(t=this.sourceBlock_);var n=this.getClickTarget_();n?n.tooltip=t:this.tooltip_=t},e.Field.prototype.getTooltip=function(){var t=this.getClickTarget_();return e.Tooltip.getTooltipOfObject(t||{tooltip:this.tooltip_})},e.Field.prototype.getClickTarget_=function(){return this.clickTarget_||this.getSvgRoot()},e.Field.prototype.getAbsoluteXY_=function(){return e.utils.style.getPageOffset(this.getClickTarget_())},e.Field.prototype.referencesVariables=function(){return!1},e.Field.prototype.getParentInput=function(){for(var t=null,n=this.sourceBlock_,o=n.inputList,r=0;r<n.inputList.length;r++)for(var p=o[r],b=p.fieldRow,I=0;I<b.length;I++)if(b[I]===this){t=p;break}return t},e.Field.prototype.getFlipRtl=function(){return!1},e.Field.prototype.isTabNavigable=function(){return!1},e.Field.prototype.onShortcut=function(t){return!1},e.Field.prototype.setCursorSvg=function(t){t?(this.fieldGroup_.appendChild(t),this.cursorSvg_=t):this.cursorSvg_=null},e.Field.prototype.setMarkerSvg=function(t){t?(this.fieldGroup_.appendChild(t),this.markerSvg_=t):this.markerSvg_=null},e.Field.prototype.updateMarkers_=function(){var t=this.sourceBlock_.workspace;t.keyboardAccessibilityMode&&this.cursorSvg_&&t.getCursor().draw(),t.keyboardAccessibilityMode&&this.markerSvg_&&t.getMarker(e.MarkerManager.LOCAL_MARKER).draw()},e.FieldLabel=function(t,n,o){this.class_=null,e.FieldLabel.superClass_.constructor.call(this,t,null,o),o||(this.class_=n||null)},e.utils.object.inherits(e.FieldLabel,e.Field),e.FieldLabel.prototype.DEFAULT_VALUE="",e.FieldLabel.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.text);return new e.FieldLabel(n,void 0,t)},e.FieldLabel.prototype.EDITABLE=!1,e.FieldLabel.prototype.configure_=function(t){e.FieldLabel.superClass_.configure_.call(this,t),this.class_=t.class},e.FieldLabel.prototype.initView=function(){this.createTextElement_(),this.class_&&e.utils.dom.addClass(this.textElement_,this.class_)},e.FieldLabel.prototype.doClassValidation_=function(t){return null==t?null:String(t)},e.FieldLabel.prototype.setClass=function(t){this.textElement_&&(this.class_&&e.utils.dom.removeClass(this.textElement_,this.class_),t&&e.utils.dom.addClass(this.textElement_,t)),this.class_=t},e.fieldRegistry.register("field_label",e.FieldLabel),e.Input=function(t,n,o,r){if(t!=e.inputTypes.DUMMY&&!n)throw Error("Value inputs and statement inputs must have non-empty name.");this.type=t,this.name=n,this.sourceBlock_=o,this.connection=r,this.fieldRow=[]},e.Input.prototype.align=e.constants.ALIGN.LEFT,e.Input.prototype.visible_=!0,e.Input.prototype.getSourceBlock=function(){return this.sourceBlock_},e.Input.prototype.appendField=function(t,n){return this.insertFieldAt(this.fieldRow.length,t,n),this},e.Input.prototype.insertFieldAt=function(t,n,o){if(0>t||t>this.fieldRow.length)throw Error("index "+t+" out of bounds.");return(n||""==n&&o)&&("string"==typeof n&&(n=e.fieldRegistry.fromJson({type:"field_label",text:n})),n.setSourceBlock(this.sourceBlock_),this.sourceBlock_.rendered&&(n.init(),n.applyColour()),n.name=o,n.setVisible(this.isVisible()),n.prefixField&&(t=this.insertFieldAt(t,n.prefixField)),this.fieldRow.splice(t,0,n),++t,n.suffixField&&(t=this.insertFieldAt(t,n.suffixField)),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours())),t},e.Input.prototype.removeField=function(t,n){for(var r,o=0;r=this.fieldRow[o];o++)if(r.name===t)return r.dispose(),this.fieldRow.splice(o,1),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours()),!0;if(n)return!1;throw Error('Field "'+t+'" not found.')},e.Input.prototype.isVisible=function(){return this.visible_},e.Input.prototype.setVisible=function(t){var n=[];if(this.visible_==t)return n;this.visible_=t;for(var r,o=0;r=this.fieldRow[o];o++)r.setVisible(t);return this.connection&&(this.connection=this.connection,t?n=this.connection.startTrackingAll():this.connection.stopTrackingAll(),o=this.connection.targetBlock())&&(o.getSvgRoot().style.display=t?"block":"none"),n},e.Input.prototype.markDirty=function(){for(var n,t=0;n=this.fieldRow[t];t++)n.markDirty()},e.Input.prototype.setCheck=function(t){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(t),this},e.Input.prototype.setAlign=function(t){return this.align=t,this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render()),this},e.Input.prototype.setShadowDom=function(t){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(t),this},e.Input.prototype.getShadowDom=function(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()},e.Input.prototype.init=function(){if(this.sourceBlock_.workspace.rendered)for(var t=0;t<this.fieldRow.length;t++)this.fieldRow[t].init()},e.Input.prototype.dispose=function(){for(var n,t=0;n=this.fieldRow[t];t++)n.dispose();this.connection&&this.connection.dispose(),this.sourceBlock_=null},e.Block=function(t,n,o){if(e.Generator&&void 0!==e.Generator.prototype[n])throw Error('Block prototypeName "'+n+'" conflicts with Blockly.Generator members.');if(this.id=o&&!t.getBlockById(o)?o:e.utils.genUid(),t.setBlockById(this.id,this),this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.inputsInline=void 0,this.disabled=!1,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable_=this.movable_=this.deletable_=!0,this.collapsed_=this.isShadow_=!1,this.comment=this.outputShape_=null,this.commentModel={text:null,pinned:!1,size:new e.utils.Size(160,80)},this.xy_=new e.utils.Coordinate(0,0),this.workspace=t,this.isInFlyout=t.isFlyout,this.isInMutator=t.isMutator,this.RTL=t.RTL,this.isInsertionMarker_=!1,this.hat=void 0,this.rendered=null,this.statementInputCount=0,n){if(this.type=n,!(o=e.Blocks[n])||"object"!=typeof o)throw TypeError("Unknown block type: "+n);e.utils.object.mixin(this,o)}t.addTopBlock(this),t.addTypedBlock(this),(t=e.Events.getGroup())||e.Events.setGroup(!0),n=e.Events.recordUndo;try{"function"==typeof this.init&&(e.Events.recordUndo=!1,this.init(),e.Events.recordUndo=n),e.Events.isEnabled()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CREATE))(this))}finally{t||e.Events.setGroup(!1),e.Events.recordUndo=n}this.inputsInlineDefault=this.inputsInline,"function"==typeof this.onchange&&this.setOnChange(this.onchange)},e.Block.COLLAPSED_INPUT_NAME=e.constants.COLLAPSED_INPUT_NAME,e.Block.COLLAPSED_FIELD_NAME=e.constants.COLLAPSED_FIELD_NAME,e.Block.prototype.data=null,e.Block.prototype.disposed=!1,e.Block.prototype.hue_=null,e.Block.prototype.colour_="#000000",e.Block.prototype.styleName_="",e.Block.prototype.dispose=function(t){if(this.workspace){this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.unplug(t),e.Events.isEnabled()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_DELETE))(this)),e.Events.disable();try{this.workspace&&(this.workspace.removeTopBlock(this),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),this.workspace=null),e.selected==this&&(e.selected=null);for(var n=this.childBlocks_.length-1;0<=n;n--)this.childBlocks_[n].dispose(!1);n=0;for(var o;o=this.inputList[n];n++)o.dispose();this.inputList.length=0;var p,r=this.getConnections_(!0);for(n=0;p=r[n];n++)p.dispose()}finally{e.Events.enable(),this.disposed=!0}}},e.Block.prototype.initModel=function(){for(var n,t=0;n=this.inputList[t];t++)for(var r,o=0;r=n.fieldRow[o];o++)r.initModel&&r.initModel()},e.Block.prototype.unplug=function(t){this.outputConnection?this.unplugFromRow_(t):this.previousConnection&&this.unplugFromStack_(t)},e.Block.prototype.unplugFromRow_=function(t){var n=null;this.outputConnection.isConnected()&&(n=this.outputConnection.targetConnection,this.outputConnection.disconnect()),n&&t&&(t=this.getOnlyValueConnection_())&&t.isConnected()&&!t.targetBlock().isShadow()&&((t=t.targetConnection).disconnect(),this.workspace.connectionChecker.canConnect(t,n,!1)?n.connect(t):t.onFailedConnect(n))},e.Block.prototype.getOnlyValueConnection_=function(){for(var t=null,n=0;n<this.inputList.length;n++){var o=this.inputList[n].connection;if(o&&o.type==e.connectionTypes.INPUT_VALUE&&o.targetConnection){if(t)return null;t=o}}return t},e.Block.prototype.unplugFromStack_=function(t){var n=null;this.previousConnection.isConnected()&&(n=this.previousConnection.targetConnection,this.previousConnection.disconnect());var o=this.getNextBlock();t&&o&&!o.isShadow()&&((t=this.nextConnection.targetConnection).disconnect(),n&&this.workspace.connectionChecker.canConnect(n,t,!1)&&n.connect(t))},e.Block.prototype.getConnections_=function(t){t=[],this.outputConnection&&t.push(this.outputConnection),this.previousConnection&&t.push(this.previousConnection),this.nextConnection&&t.push(this.nextConnection);for(var o,n=0;o=this.inputList[n];n++)o.connection&&t.push(o.connection);return t},e.Block.prototype.lastConnectionInStack=function(t){for(var n=this.nextConnection;n;){var o=n.targetBlock();if(!o||t&&o.isShadow())return n;n=o.nextConnection}return null},e.Block.prototype.bumpNeighbours=function(){},e.Block.prototype.getParent=function(){return this.parentBlock_},e.Block.prototype.getInputWithBlock=function(t){for(var o,n=0;o=this.inputList[n];n++)if(o.connection&&o.connection.targetBlock()==t)return o;return null},e.Block.prototype.getSurroundParent=function(){var t=this;do{var n=t;if(!(t=t.getParent()))return null}while(t.getNextBlock()==n);return t},e.Block.prototype.getNextBlock=function(){return this.nextConnection&&this.nextConnection.targetBlock()},e.Block.prototype.getPreviousBlock=function(){return this.previousConnection&&this.previousConnection.targetBlock()},e.Block.prototype.getFirstStatementConnection=function(){for(var n,t=0;n=this.inputList[t];t++)if(n.connection&&n.connection.type==e.connectionTypes.NEXT_STATEMENT)return n.connection;return null},e.Block.prototype.getRootBlock=function(){var t=this;do{var n=t;t=n.parentBlock_}while(t);return n},e.Block.prototype.getTopStackBlock=function(){var t=this;do{var n=t.getPreviousBlock()}while(n&&n.getNextBlock()==t&&(t=n));return t},e.Block.prototype.getChildren=function(t){if(!t)return this.childBlocks_;t=[];for(var o,n=0;o=this.inputList[n];n++)o.connection&&(o=o.connection.targetBlock())&&t.push(o);return(n=this.getNextBlock())&&t.push(n),t},e.Block.prototype.setParent=function(t){if(t!=this.parentBlock_){if(this.parentBlock_){if(e.utils.arrayRemove(this.parentBlock_.childBlocks_,this),this.previousConnection&&this.previousConnection.isConnected())throw Error("Still connected to previous block.");if(this.outputConnection&&this.outputConnection.isConnected())throw Error("Still connected to parent block.");this.parentBlock_=null}else this.workspace.removeTopBlock(this);(this.parentBlock_=t)?t.childBlocks_.push(this):this.workspace.addTopBlock(this)}},e.Block.prototype.getDescendants=function(t){for(var r,n=[this],o=this.getChildren(t),p=0;r=o[p];p++)n.push.apply(n,r.getDescendants(t));return n},e.Block.prototype.isDeletable=function(){return this.deletable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},e.Block.prototype.setDeletable=function(t){this.deletable_=t},e.Block.prototype.isMovable=function(){return this.movable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},e.Block.prototype.setMovable=function(t){this.movable_=t},e.Block.prototype.isDuplicatable=function(){return!this.workspace.hasBlockLimits()||this.workspace.isCapacityAvailable(e.utils.getBlockTypeCounts(this,!0))},e.Block.prototype.isShadow=function(){return this.isShadow_},e.Block.prototype.setShadow=function(t){this.isShadow_=t},e.Block.prototype.isInsertionMarker=function(){return this.isInsertionMarker_},e.Block.prototype.setInsertionMarker=function(t){this.isInsertionMarker_=t},e.Block.prototype.isEditable=function(){return this.editable_&&!(this.workspace&&this.workspace.options.readOnly)},e.Block.prototype.setEditable=function(t){this.editable_=t,t=0;for(var n;n=this.inputList[t];t++)for(var r,o=0;r=n.fieldRow[o];o++)r.updateEditable()},e.Block.prototype.isDisposed=function(){return this.disposed},e.Block.prototype.getMatchingConnection=function(t,n){var o=this.getConnections_(!0);if(t=t.getConnections_(!0),o.length!=t.length)throw Error("Connection lists did not match in length.");for(var r=0;r<t.length;r++)if(t[r]==n)return o[r];return null},e.Block.prototype.setHelpUrl=function(t){this.helpUrl=t},e.Block.prototype.setTooltip=function(t){this.tooltip=t},e.Block.prototype.getTooltip=function(){return e.Tooltip.getTooltipOfObject(this)},e.Block.prototype.getColour=function(){return this.colour_},e.Block.prototype.getStyleName=function(){return this.styleName_},e.Block.prototype.getHue=function(){return this.hue_},e.Block.prototype.setColour=function(t){t=e.utils.parseBlockColour(t),this.hue_=t.hue,this.colour_=t.hex},e.Block.prototype.setStyle=function(t){this.styleName_=t},e.Block.prototype.setOnChange=function(t){if(t&&"function"!=typeof t)throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),(this.onchange=t)&&(this.onchangeWrapper_=t.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_))},e.Block.prototype.getField=function(t){if("string"!=typeof t)throw TypeError("Blockly.Block.prototype.getField expects a string with the field name but received "+(void 0===t?"nothing":t+" of type "+typeof t)+" instead");for(var o,n=0;o=this.inputList[n];n++)for(var p,r=0;p=o.fieldRow[r];r++)if(p.name===t)return p;return null},e.Block.prototype.getVars=function(){for(var o,t=[],n=0;o=this.inputList[n];n++)for(var p,r=0;p=o.fieldRow[r];r++)p.referencesVariables()&&t.push(p.getValue());return t},e.Block.prototype.getVarModels=function(){for(var o,t=[],n=0;o=this.inputList[n];n++)for(var p,r=0;p=o.fieldRow[r];r++)p.referencesVariables()&&(p=this.workspace.getVariableById(p.getValue()))&&t.push(p);return t},e.Block.prototype.updateVarName=function(t){for(var o,n=0;o=this.inputList[n];n++)for(var p,r=0;p=o.fieldRow[r];r++)p.referencesVariables()&&t.getId()==p.getValue()&&p.refreshVariableName()},e.Block.prototype.renameVarById=function(t,n){for(var r,o=0;r=this.inputList[o];o++)for(var b,p=0;b=r.fieldRow[p];p++)b.referencesVariables()&&t==b.getValue()&&b.setValue(n)},e.Block.prototype.getFieldValue=function(t){return(t=this.getField(t))?t.getValue():null},e.Block.prototype.setFieldValue=function(t,n){var o=this.getField(n);if(!o)throw Error('Field "'+n+'" not found.');o.setValue(t)},e.Block.prototype.setPreviousStatement=function(t,n){if(t){if(void 0===n&&(n=null),!this.previousConnection){if(this.outputConnection)throw Error("Remove output connection prior to adding previous connection.");this.previousConnection=this.makeConnection_(e.connectionTypes.PREVIOUS_STATEMENT)}this.previousConnection.setCheck(n)}else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}},e.Block.prototype.setNextStatement=function(t,n){if(t)void 0===n&&(n=null),this.nextConnection||(this.nextConnection=this.makeConnection_(e.connectionTypes.NEXT_STATEMENT)),this.nextConnection.setCheck(n);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}},e.Block.prototype.setOutput=function(t,n){if(t){if(void 0===n&&(n=null),!this.outputConnection){if(this.previousConnection)throw Error("Remove previous connection prior to adding output connection.");this.outputConnection=this.makeConnection_(e.connectionTypes.OUTPUT_VALUE)}this.outputConnection.setCheck(n)}else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}},e.Block.prototype.setInputsInline=function(t){this.inputsInline!=t&&(e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this,"inline",null,this.inputsInline,t)),this.inputsInline=t)},e.Block.prototype.getInputsInline=function(){if(null!=this.inputsInline)return this.inputsInline;for(var t=1;t<this.inputList.length;t++)if(this.inputList[t-1].type==e.inputTypes.DUMMY&&this.inputList[t].type==e.inputTypes.DUMMY)return!1;for(t=1;t<this.inputList.length;t++)if(this.inputList[t-1].type==e.inputTypes.VALUE&&this.inputList[t].type==e.inputTypes.DUMMY)return!0;return!1},e.Block.prototype.setOutputShape=function(t){this.outputShape_=t},e.Block.prototype.getOutputShape=function(){return this.outputShape_},e.Block.prototype.isEnabled=function(){return!this.disabled},e.Block.prototype.setEnabled=function(t){this.isEnabled()!=t&&(e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this,"disabled",null,this.disabled,!t)),this.disabled=!t)},e.Block.prototype.getInheritedDisabled=function(){for(var t=this.getSurroundParent();t;){if(t.disabled)return!0;t=t.getSurroundParent()}return!1},e.Block.prototype.isCollapsed=function(){return this.collapsed_},e.Block.prototype.setCollapsed=function(t){this.collapsed_!=t&&(e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this,"collapsed",null,this.collapsed_,t)),this.collapsed_=t)},e.Block.prototype.toString=function(t,n){function o(Y){var X=Y.getCheck();return!X&&Y.targetConnection&&(X=Y.targetConnection.getCheck()),!!X&&(-1!=X.indexOf("Boolean")||-1!=X.indexOf("Number"))}function r(){I&&I.getType()==x.getType()&&I.getLocation()==x.getLocation()&&(I=null)}var p=[];n=n||"?";var b=e.ASTNode.NAVIGATE_ALL_FIELDS;e.ASTNode.NAVIGATE_ALL_FIELDS=!0;for(var I=e.ASTNode.createBlockNode(this),x=I;I;){switch(I.getType()){case e.ASTNode.types.INPUT:var k=I.getLocation();I.in()?o(k)&&p.push("("):p.push(n);break;case e.ASTNode.types.FIELD:(k=I.getLocation()).name!=e.constants.COLLAPSED_FIELD_NAME&&p.push(k.getText())}if(!(I=(k=I).in()||k.next())){for(I=k.out(),r();I&&!I.next();)I=I.out(),r(),I&&I.getType()==e.ASTNode.types.INPUT&&o(I.getLocation())&&p.push(")");I&&(I=I.next())}}for(e.ASTNode.NAVIGATE_ALL_FIELDS=b,n=2;n<p.length;n++)"("==p[n-2]&&")"==p[n]&&(p[n-2]=p[n-1],p.splice(n-1,2));return p=(p=p.reduce(function(Y,X){return Y+("("==Y.substr(-1)||")"==X?"":" ")+X},"")).trim()||"???",t&&p.length>t&&(p=p.substring(0,t-3)+"..."),p},e.Block.prototype.appendValueInput=function(t){return this.appendInput_(e.inputTypes.VALUE,t)},e.Block.prototype.appendStatementInput=function(t){return this.appendInput_(e.inputTypes.STATEMENT,t)},e.Block.prototype.appendDummyInput=function(t){return this.appendInput_(e.inputTypes.DUMMY,t||"")},e.Block.prototype.jsonInit=function(t){var n=t.type?'Block "'+t.type+'": ':"";if(t.output&&t.previousStatement)throw Error(n+"Must not have both an output and a previousStatement.");if(t.style&&t.style.hat&&(this.hat=t.style.hat,t.style=null),t.style&&t.colour)throw Error(n+"Must not have both a colour and a style.");t.style?this.jsonInitStyle_(t,n):this.jsonInitColour_(t,n);for(var o=0;void 0!==t["message"+o];)this.interpolate_(t["message"+o],t["args"+o]||[],t["lastDummyAlign"+o],n),o++;if(void 0!==t.inputsInline&&this.setInputsInline(t.inputsInline),void 0!==t.output&&this.setOutput(!0,t.output),void 0!==t.outputShape&&this.setOutputShape(t.outputShape),void 0!==t.previousStatement&&this.setPreviousStatement(!0,t.previousStatement),void 0!==t.nextStatement&&this.setNextStatement(!0,t.nextStatement),void 0!==t.tooltip&&(o=e.utils.replaceMessageReferences(o=t.tooltip),this.setTooltip(o)),void 0!==t.enableContextMenu&&(this.contextMenu=!!(o=t.enableContextMenu)),void 0!==t.helpUrl&&(o=e.utils.replaceMessageReferences(o=t.helpUrl),this.setHelpUrl(o)),"string"==typeof t.extensions&&(console.warn(n+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+t.type+"' block."),t.extensions=[t.extensions]),void 0!==t.mutator&&e.Extensions.apply(t.mutator,this,!0),t=t.extensions,Array.isArray(t))for(n=0;n<t.length;++n)e.Extensions.apply(t[n],this,!1)},e.Block.prototype.jsonInitColour_=function(t,n){if("colour"in t)if(void 0===t.colour)console.warn(n+"Undefined colour value.");else{t=t.colour;try{this.setColour(t)}catch(o){console.warn(n+"Illegal colour value: ",t)}}},e.Block.prototype.jsonInitStyle_=function(t,n){t=t.style;try{this.setStyle(t)}catch(o){console.warn(n+"Style does not exist: ",t)}},e.Block.prototype.mixin=function(t,n){if(void 0!==n&&"boolean"!=typeof n)throw Error("opt_disableCheck must be a boolean if provided");if(!n){for(var o in n=[],t)void 0!==this[o]&&n.push(o);if(n.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(n))}e.utils.object.mixin(this,t)},e.Block.prototype.interpolate_=function(t,n,o,r){t=e.utils.tokenizeInterpolation(t),this.validateTokens_(t,n.length),n=this.interpolateArguments_(t,n,o),o=[],t=0;for(var p;p=n[t];t++)if(this.isInputKeyword_(p.type)){if(p=this.inputFromJson_(p,r)){for(var I,b=0;I=o[b];b++)p.appendField(I[0],I[1]);o.length=0}}else(b=this.fieldFromJson_(p))&&o.push([b,p.name])},e.Block.prototype.validateTokens_=function(t,n){for(var o=[],r=0,p=0;p<t.length;p++){var b=t[p];if("number"==typeof b){if(1>b||b>n)throw Error('Block "'+this.type+'": Message index %'+b+" out of range.");if(o[b])throw Error('Block "'+this.type+'": Message index %'+b+" duplicated.");o[b]=!0,r++}}if(r!=n)throw Error('Block "'+this.type+'": Message does not reference all '+n+" arg(s).")},e.Block.prototype.interpolateArguments_=function(t,n,o){for(var r=[],p=0;p<t.length;p++){var b=t[p];"number"==typeof b&&(b=n[b-1]),("string"!=typeof b||(b=this.stringToFieldJson_(b)))&&r.push(b)}return(t=r.length)&&!this.isInputKeyword_(r[t-1].type)&&(t={type:"input_dummy"},o&&(t.align=o),r.push(t)),r},e.Block.prototype.fieldFromJson_=function(t){var n=e.fieldRegistry.fromJson(t);return!n&&t.alt?"string"==typeof t.alt?(t=this.stringToFieldJson_(t.alt))?this.fieldFromJson_(t):null:this.fieldFromJson_(t.alt):n},e.Block.prototype.inputFromJson_=function(t,n){var o={LEFT:e.constants.ALIGN.LEFT,RIGHT:e.constants.ALIGN.RIGHT,CENTRE:e.constants.ALIGN.CENTRE,CENTER:e.constants.ALIGN.CENTRE},r=null;switch(t.type){case"input_value":r=this.appendValueInput(t.name);break;case"input_statement":r=this.appendStatementInput(t.name);break;case"input_dummy":r=this.appendDummyInput(t.name)}return r?(t.check&&r.setCheck(t.check),t.align&&(void 0===(o=o[t.align.toUpperCase()])?console.warn(n+"Illegal align value: ",t.align):r.setAlign(o)),r):null},e.Block.prototype.isInputKeyword_=function(t){return"input_value"==t||"input_statement"==t||"input_dummy"==t},e.Block.prototype.stringToFieldJson_=function(t){return(t=t.trim())?{type:"field_label",text:t}:null},e.Block.prototype.appendInput_=function(t,n){var o=null;return(t==e.inputTypes.VALUE||t==e.inputTypes.STATEMENT)&&(o=this.makeConnection_(t)),t==e.inputTypes.STATEMENT&&this.statementInputCount++,t=new e.Input(t,n,this,o),this.inputList.push(t),t},e.Block.prototype.moveInputBefore=function(t,n){if(t!=n){for(var b,o=-1,r=n?-1:this.inputList.length,p=0;b=this.inputList[p];p++)if(b.name==t){if(o=p,-1!=r)break}else if(n&&b.name==n&&(r=p,-1!=o))break;if(-1==o)throw Error('Named input "'+t+'" not found.');if(-1==r)throw Error('Reference input "'+n+'" not found.');this.moveNumberedInputBefore(o,r)}},e.Block.prototype.moveNumberedInputBefore=function(t,n){if(t==n)throw Error("Can't move input to itself.");if(t>=this.inputList.length)throw RangeError("Input index "+t+" out of bounds.");if(n>this.inputList.length)throw RangeError("Reference input "+n+" out of bounds.");var o=this.inputList[t];this.inputList.splice(t,1),t<n&&n--,this.inputList.splice(n,0,o)},e.Block.prototype.removeInput=function(t,n){for(var r,o=0;r=this.inputList[o];o++)if(r.name==t)return r.type==e.inputTypes.STATEMENT&&this.statementInputCount--,r.dispose(),this.inputList.splice(o,1),!0;if(n)return!1;throw Error("Input not found: "+t)},e.Block.prototype.getInput=function(t){for(var o,n=0;o=this.inputList[n];n++)if(o.name==t)return o;return null},e.Block.prototype.getInputTargetBlock=function(t){return(t=this.getInput(t))&&t.connection&&t.connection.targetBlock()},e.Block.prototype.getCommentText=function(){return this.commentModel.text},e.Block.prototype.setCommentText=function(t){this.commentModel.text!=t&&(e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this,"comment",null,this.commentModel.text,t)),this.comment=this.commentModel.text=t)},e.Block.prototype.setWarningText=function(t,n){},e.Block.prototype.setMutator=function(t){},e.Block.prototype.getRelativeToSurfaceXY=function(){return this.xy_},e.Block.prototype.moveBy=function(t,n){if(this.parentBlock_)throw Error("Block has parent.");var o=new(e.Events.get(e.Events.BLOCK_MOVE))(this);this.xy_.translate(t,n),o.recordNew(),e.Events.fire(o)},e.Block.prototype.makeConnection_=function(t){return new e.Connection(this,t)},e.Block.prototype.allInputsFilled=function(t){if(void 0===t&&(t=!0),!t&&this.isShadow())return!1;for(var o,n=0;o=this.inputList[n];n++)if(o.connection&&(!(o=o.connection.targetBlock())||!o.allInputsFilled(t)))return!1;return!(n=this.getNextBlock())||n.allInputsFilled(t)},e.Block.prototype.toDevString=function(){var t=this.type?'"'+this.type+'" block':"Block";return this.id&&(t+=' (id="'+this.id+'")'),t},e.blockRendering.IPathObject=function(t,n){},e.utils.KeyCodes={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PLUS_SIGN:43,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,FF_DASH:173,FF_HASH:163,QUESTION_MARK:63,AT_SIGN:64,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,MAC_WK_CMD_LEFT:91,MAC_WK_CMD_RIGHT:93,WIN_IME:229,VK_NONAME:252,PHANTOM:255},e.Menu=function(){this.menuItems_=[],this.roleName_=this.element_=this.onKeyDownHandler_=this.mouseLeaveHandler_=this.mouseEnterHandler_=this.clickHandler_=this.mouseOverHandler_=this.highlightedItem_=this.openingCoords=null},e.Menu.prototype.addChild=function(t){this.menuItems_.push(t)},e.Menu.prototype.render=function(t){var n=document.createElement("div");n.className="blocklyMenu goog-menu blocklyNonSelectable",n.tabIndex=0,this.roleName_&&e.utils.aria.setRole(n,this.roleName_),this.element_=n;for(var r,o=0;r=this.menuItems_[o];o++)n.appendChild(r.createDom());this.mouseOverHandler_=e.browserEvents.conditionalBind(n,"mouseover",this,this.handleMouseOver_,!0),this.clickHandler_=e.browserEvents.conditionalBind(n,"click",this,this.handleClick_,!0),this.mouseEnterHandler_=e.browserEvents.conditionalBind(n,"mouseenter",this,this.handleMouseEnter_,!0),this.mouseLeaveHandler_=e.browserEvents.conditionalBind(n,"mouseleave",this,this.handleMouseLeave_,!0),this.onKeyDownHandler_=e.browserEvents.conditionalBind(n,"keydown",this,this.handleKeyEvent_),t.appendChild(n)},e.Menu.prototype.getElement=function(){return this.element_},e.Menu.prototype.focus=function(){var t=this.getElement();t&&(t.focus({preventScroll:!0}),e.utils.dom.addClass(t,"blocklyFocused"))},e.Menu.prototype.blur_=function(){var t=this.getElement();t&&(t.blur(),e.utils.dom.removeClass(t,"blocklyFocused"))},e.Menu.prototype.setRole=function(t){this.roleName_=t},e.Menu.prototype.dispose=function(){this.mouseOverHandler_&&(e.browserEvents.unbind(this.mouseOverHandler_),this.mouseOverHandler_=null),this.clickHandler_&&(e.browserEvents.unbind(this.clickHandler_),this.clickHandler_=null),this.mouseEnterHandler_&&(e.browserEvents.unbind(this.mouseEnterHandler_),this.mouseEnterHandler_=null),this.mouseLeaveHandler_&&(e.browserEvents.unbind(this.mouseLeaveHandler_),this.mouseLeaveHandler_=null),this.onKeyDownHandler_&&(e.browserEvents.unbind(this.onKeyDownHandler_),this.onKeyDownHandler_=null);for(var n,t=0;n=this.menuItems_[t];t++)n.dispose();this.element_=null},e.Menu.prototype.getMenuItem_=function(t){for(var n=this.getElement();t&&t!=n;){if(e.utils.dom.hasClass(t,"blocklyMenuItem"))for(var r,o=0;r=this.menuItems_[o];o++)if(r.getElement()==t)return r;t=t.parentElement}return null},e.Menu.prototype.setHighlighted=function(t){var n=this.highlightedItem_;n&&(n.setHighlighted(!1),this.highlightedItem_=null),t&&(t.setHighlighted(!0),this.highlightedItem_=t,n=this.getElement(),e.utils.style.scrollIntoContainerView(t.getElement(),n),e.utils.aria.setState(n,e.utils.aria.State.ACTIVEDESCENDANT,t.getId()))},e.Menu.prototype.highlightNext=function(){var t=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(t,1)},e.Menu.prototype.highlightPrevious=function(){var t=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(0>t?this.menuItems_.length:t,-1)},e.Menu.prototype.highlightFirst_=function(){this.highlightHelper_(-1,1)},e.Menu.prototype.highlightLast_=function(){this.highlightHelper_(this.menuItems_.length,-1)},e.Menu.prototype.highlightHelper_=function(t,n){t+=n;for(var o;o=this.menuItems_[t];){if(o.isEnabled()){this.setHighlighted(o);break}t+=n}},e.Menu.prototype.handleMouseOver_=function(t){(t=this.getMenuItem_(t.target))&&(t.isEnabled()?this.highlightedItem_!=t&&this.setHighlighted(t):this.setHighlighted(null))},e.Menu.prototype.handleClick_=function(t){var n=this.openingCoords;if(this.openingCoords=null,n&&"number"==typeof t.clientX){var o=new e.utils.Coordinate(t.clientX,t.clientY);if(1>e.utils.Coordinate.distance(n,o))return}(t=this.getMenuItem_(t.target))&&t.performAction()},e.Menu.prototype.handleMouseEnter_=function(t){this.focus()},e.Menu.prototype.handleMouseLeave_=function(t){this.getElement()&&(this.blur_(),this.setHighlighted(null))},e.Menu.prototype.handleKeyEvent_=function(t){if(this.menuItems_.length&&!(t.shiftKey||t.ctrlKey||t.metaKey||t.altKey)){var n=this.highlightedItem_;switch(t.keyCode){case e.utils.KeyCodes.ENTER:case e.utils.KeyCodes.SPACE:n&&n.performAction();break;case e.utils.KeyCodes.UP:this.highlightPrevious();break;case e.utils.KeyCodes.DOWN:this.highlightNext();break;case e.utils.KeyCodes.PAGE_UP:case e.utils.KeyCodes.HOME:this.highlightFirst_();break;case e.utils.KeyCodes.PAGE_DOWN:case e.utils.KeyCodes.END:this.highlightLast_();break;default:return}t.preventDefault(),t.stopPropagation()}},e.Menu.prototype.getSize=function(){var t=this.getElement(),n=e.utils.style.getSize(t);return n.height=t.scrollHeight,n},e.MenuItem=function(t,n){this.content_=t,this.value_=n,this.enabled_=!0,this.element_=null,this.rightToLeft_=!1,this.roleName_=null,this.highlight_=this.checked_=this.checkable_=!1,this.actionHandler_=null},e.MenuItem.prototype.createDom=function(){var t=document.createElement("div");t.id=e.utils.IdGenerator.getNextUniqueId(),this.element_=t,t.className="blocklyMenuItem goog-menuitem "+(this.enabled_?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked_?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight_?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft_?"blocklyMenuItemRtl goog-menuitem-rtl ":"");var n=document.createElement("div");if(n.className="blocklyMenuItemContent goog-menuitem-content",this.checkable_){var o=document.createElement("div");o.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",n.appendChild(o)}return o=this.content_,"string"==typeof this.content_&&(o=document.createTextNode(this.content_)),n.appendChild(o),t.appendChild(n),this.roleName_&&e.utils.aria.setRole(t,this.roleName_),e.utils.aria.setState(t,e.utils.aria.State.SELECTED,this.checkable_&&this.checked_||!1),e.utils.aria.setState(t,e.utils.aria.State.DISABLED,!this.enabled_),t},e.MenuItem.prototype.dispose=function(){this.element_=null},e.MenuItem.prototype.getElement=function(){return this.element_},e.MenuItem.prototype.getId=function(){return this.element_.id},e.MenuItem.prototype.getValue=function(){return this.value_},e.MenuItem.prototype.setRightToLeft=function(t){this.rightToLeft_=t},e.MenuItem.prototype.setRole=function(t){this.roleName_=t},e.MenuItem.prototype.setCheckable=function(t){this.checkable_=t},e.MenuItem.prototype.setChecked=function(t){this.checked_=t},e.MenuItem.prototype.setHighlighted=function(t){this.highlight_=t;var n=this.getElement();n&&this.isEnabled()&&(t?(e.utils.dom.addClass(n,"blocklyMenuItemHighlight"),e.utils.dom.addClass(n,"goog-menuitem-highlight")):(e.utils.dom.removeClass(n,"blocklyMenuItemHighlight"),e.utils.dom.removeClass(n,"goog-menuitem-highlight")))},e.MenuItem.prototype.isEnabled=function(){return this.enabled_},e.MenuItem.prototype.setEnabled=function(t){this.enabled_=t},e.MenuItem.prototype.performAction=function(){this.isEnabled()&&this.actionHandler_&&this.actionHandler_(this)},e.MenuItem.prototype.onAction=function(t,n){this.actionHandler_=t.bind(n)},e.ContextMenu={},e.ContextMenu.currentBlock=null,e.ContextMenu.menu_=null,e.ContextMenu.show=function(t,n,o){if(e.WidgetDiv.show(e.ContextMenu,o,e.ContextMenu.dispose),n.length){var r=e.ContextMenu.populate_(n,o);e.ContextMenu.menu_=r,e.ContextMenu.position_(r,t,o),setTimeout(function(){r.focus()},1),e.ContextMenu.currentBlock=null}else e.ContextMenu.hide()},e.ContextMenu.populate_=function(t,n){var o=new e.Menu;o.setRole(e.utils.aria.Role.MENU);for(var p,r=0;p=t[r];r++){var b=new e.MenuItem(p.text);b.setRightToLeft(n),b.setRole(e.utils.aria.Role.MENUITEM),o.addChild(b),b.setEnabled(p.enabled),p.enabled&&b.onAction(function(I){e.ContextMenu.hide(),this.callback(this.scope)},p)}return o},e.ContextMenu.position_=function(t,n,o){var r=e.utils.getViewportBBox();n=new e.utils.Rect(n.clientY+r.top,n.clientY+r.top,n.clientX+r.left,n.clientX+r.left),e.ContextMenu.createWidget_(t);var p=t.getSize();o&&(n.left+=p.width,n.right+=p.width,r.left+=p.width,r.right+=p.width),e.WidgetDiv.positionWithAnchor(r,n,p,o),t.focus()},e.ContextMenu.createWidget_=function(t){t.render(e.WidgetDiv.DIV);var n=t.getElement();e.utils.dom.addClass(n,"blocklyContextMenu"),e.browserEvents.conditionalBind(n,"contextmenu",null,e.utils.noEvent),t.focus()},e.ContextMenu.hide=function(){e.WidgetDiv.hideIfOwner(e.ContextMenu),e.ContextMenu.currentBlock=null},e.ContextMenu.dispose=function(){e.ContextMenu.menu_&&(e.ContextMenu.menu_.dispose(),e.ContextMenu.menu_=null)},e.ContextMenu.callbackFactory=function(t,n){return function(){e.Events.disable();try{var o=e.Xml.domToBlock(n,t.workspace),r=t.getRelativeToSurfaceXY();r.x=t.RTL?r.x-e.SNAP_RADIUS:r.x+e.SNAP_RADIUS,r.y+=2*e.SNAP_RADIUS,o.moveBy(r.x,r.y)}finally{e.Events.enable()}e.Events.isEnabled()&&!o.isShadow()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CREATE))(o)),o.select()}},e.ContextMenu.commentDeleteOption=function(t){return{text:e.Msg.REMOVE_COMMENT,enabled:!0,callback:function(){e.Events.setGroup(!0),t.dispose(!0,!0),e.Events.setGroup(!1)}}},e.ContextMenu.commentDuplicateOption=function(t){return{text:e.Msg.DUPLICATE_COMMENT,enabled:!0,callback:function(){e.duplicate(t)}}},e.ContextMenu.workspaceCommentOption=function(t,n){if(!e.WorkspaceCommentSvg)throw Error("Missing require for Blockly.WorkspaceCommentSvg");var o={enabled:!e.utils.userAgent.IE};return o.text=e.Msg.ADD_COMMENT,o.callback=function(){var r=new e.WorkspaceCommentSvg(t,e.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT,e.WorkspaceCommentSvg.DEFAULT_SIZE,e.WorkspaceCommentSvg.DEFAULT_SIZE),p=t.getInjectionDiv().getBoundingClientRect();p=new e.utils.Coordinate(n.clientX-p.left,n.clientY-p.top);var b=t.getOriginOffsetInPixels();(p=e.utils.Coordinate.difference(p,b)).scale(1/t.scale),r.moveBy(p.x,p.y),t.rendered&&(r.initSvg(),r.render(),r.select())},o},e.ContextMenuRegistry=function(){e.ContextMenuRegistry.registry=this,this.registry_=Object.create(null)},e.ContextMenuRegistry.ScopeType={BLOCK:"block",WORKSPACE:"workspace"},e.ContextMenuRegistry.registry=null,e.ContextMenuRegistry.prototype.register=function(t){if(this.registry_[t.id])throw Error('Menu item with ID "'+t.id+'" is already registered.');this.registry_[t.id]=t},e.ContextMenuRegistry.prototype.unregister=function(t){if(!this.registry_[t])throw Error('Menu item with ID "'+t+'" not found.');delete this.registry_[t]},e.ContextMenuRegistry.prototype.getItem=function(t){return this.registry_[t]||null},e.ContextMenuRegistry.prototype.getContextMenuOptions=function(t,n){var o=[],r=this.registry_;return Object.keys(r).forEach(function(p){if(t==(p=r[p]).scopeType){var b=p.preconditionFn(n);"hidden"!=b&&(p={text:"function"==typeof p.displayText?p.displayText(n):p.displayText,enabled:"enabled"==b,callback:p.callback,scope:n,weight:p.weight},o.push(p))}}),o.sort(function(p,b){return p.weight-b.weight}),o},new e.ContextMenuRegistry,e.Events.Selected=function(t,n,o){e.Events.Selected.superClass_.constructor.call(this,o),this.oldElementId=t,this.newElementId=n},e.utils.object.inherits(e.Events.Selected,e.Events.UiBase),e.Events.Selected.prototype.type=e.Events.SELECTED,e.Events.Selected.prototype.toJson=function(){var t=e.Events.Selected.superClass_.toJson.call(this);return t.oldElementId=this.oldElementId,t.newElementId=this.newElementId,t},e.Events.Selected.prototype.fromJson=function(t){e.Events.Selected.superClass_.fromJson.call(this,t),this.oldElementId=t.oldElementId,this.newElementId=t.newElementId},e.registry.register(e.registry.Type.EVENT,e.Events.SELECTED,e.Events.Selected),e.IBoundedElement=function(){},e.ICopyable=function(){},e.RenderedConnection=function(t,n){e.RenderedConnection.superClass_.constructor.call(this,t,n),this.db_=t.workspace.connectionDBList[n],this.dbOpposite_=t.workspace.connectionDBList[e.OPPOSITE_TYPE[n]],this.offsetInBlock_=new e.utils.Coordinate(0,0),this.trackedState_=e.RenderedConnection.TrackedState.WILL_TRACK,this.targetConnection=null},e.utils.object.inherits(e.RenderedConnection,e.Connection),e.RenderedConnection.TrackedState={WILL_TRACK:-1,UNTRACKED:0,TRACKED:1},e.RenderedConnection.prototype.dispose=function(){e.RenderedConnection.superClass_.dispose.call(this),this.trackedState_==e.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y)},e.RenderedConnection.prototype.getSourceBlock=function(){return e.RenderedConnection.superClass_.getSourceBlock.call(this)},e.RenderedConnection.prototype.targetBlock=function(){return e.RenderedConnection.superClass_.targetBlock.call(this)},e.RenderedConnection.prototype.distanceFrom=function(t){var n=this.x-t.x;return t=this.y-t.y,Math.sqrt(n*n+t*t)},e.RenderedConnection.prototype.bumpAwayFrom=function(t){if(!this.sourceBlock_.workspace.isDragging()){var n=this.sourceBlock_.getRootBlock();if(!n.isInFlyout){var o=!1;if(!n.isMovable()){if(!(n=t.getSourceBlock().getRootBlock()).isMovable())return;t=this,o=!0}var r=e.selected==n;r||n.addSelect();var p=t.x+e.SNAP_RADIUS+Math.floor(Math.random()*e.BUMP_RANDOMNESS)-this.x,b=t.y+e.SNAP_RADIUS+Math.floor(Math.random()*e.BUMP_RANDOMNESS)-this.y;o&&(b=-b),n.RTL&&(p=t.x-e.SNAP_RADIUS-Math.floor(Math.random()*e.BUMP_RANDOMNESS)-this.x),n.moveBy(p,b),r||n.removeSelect()}}},e.RenderedConnection.prototype.moveTo=function(t,n){this.trackedState_==e.RenderedConnection.TrackedState.WILL_TRACK?(this.db_.addConnection(this,n),this.trackedState_=e.RenderedConnection.TrackedState.TRACKED):this.trackedState_==e.RenderedConnection.TrackedState.TRACKED&&(this.db_.removeConnection(this,this.y),this.db_.addConnection(this,n)),this.x=t,this.y=n},e.RenderedConnection.prototype.moveBy=function(t,n){this.moveTo(this.x+t,this.y+n)},e.RenderedConnection.prototype.moveToOffset=function(t){this.moveTo(t.x+this.offsetInBlock_.x,t.y+this.offsetInBlock_.y)},e.RenderedConnection.prototype.setOffsetInBlock=function(t,n){this.offsetInBlock_.x=t,this.offsetInBlock_.y=n},e.RenderedConnection.prototype.getOffsetInBlock=function(){return this.offsetInBlock_},e.RenderedConnection.prototype.tighten=function(){var t=this.targetConnection.x-this.x,n=this.targetConnection.y-this.y;if(0!=t||0!=n){var o=this.targetBlock(),r=o.getSvgRoot();if(!r)throw Error("block is not rendered.");r=e.utils.getRelativeXY(r),o.getSvgRoot().setAttribute("transform","translate("+(r.x-t)+","+(r.y-n)+")"),o.moveConnections(-t,-n)}},e.RenderedConnection.prototype.closest=function(t,n){return this.dbOpposite_.searchForClosest(this,t,n)},e.RenderedConnection.prototype.highlight=function(){var t=this.sourceBlock_.workspace.getRenderer().getConstants(),n=t.shapeFor(this);n=this.type==e.connectionTypes.INPUT_VALUE||this.type==e.connectionTypes.OUTPUT_VALUE?e.utils.svgPaths.moveBy(0,-(t=t.TAB_OFFSET_FROM_TOP))+e.utils.svgPaths.lineOnAxis("v",t)+n.pathDown+e.utils.svgPaths.lineOnAxis("v",t):e.utils.svgPaths.moveBy(-(t=t.NOTCH_OFFSET_LEFT-t.CORNER_RADIUS),0)+e.utils.svgPaths.lineOnAxis("h",t)+n.pathLeft+e.utils.svgPaths.lineOnAxis("h",t),t=this.sourceBlock_.getRelativeToSurfaceXY(),e.Connection.highlightedPath_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyHighlightedConnectionPath",d:n,transform:"translate("+(this.x-t.x)+","+(this.y-t.y)+")"+(this.sourceBlock_.RTL?" scale(-1 1)":"")},this.sourceBlock_.getSvgRoot())},e.RenderedConnection.prototype.unhighlight=function(){e.utils.dom.removeNode(e.Connection.highlightedPath_),delete e.Connection.highlightedPath_},e.RenderedConnection.prototype.setTracking=function(t){t&&this.trackedState_==e.RenderedConnection.TrackedState.TRACKED||!t&&this.trackedState_==e.RenderedConnection.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(t?(this.db_.addConnection(this,this.y),this.trackedState_=e.RenderedConnection.TrackedState.TRACKED):(this.trackedState_==e.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y),this.trackedState_=e.RenderedConnection.TrackedState.UNTRACKED))},e.RenderedConnection.prototype.stopTrackingAll=function(){if(this.setTracking(!1),this.targetConnection)for(var t=this.targetBlock().getDescendants(!1),n=0;n<t.length;n++){for(var o=t[n],r=o.getConnections_(!0),p=0;p<r.length;p++)r[p].setTracking(!1);for(o=o.getIcons(),p=0;p<o.length;p++)o[p].setVisible(!1)}},e.RenderedConnection.prototype.startTrackingAll=function(){this.setTracking(!0);var t=[];if(this.type!=e.connectionTypes.INPUT_VALUE&&this.type!=e.connectionTypes.NEXT_STATEMENT)return t;var n=this.targetBlock();if(n){if(n.isCollapsed()){var o=[];n.outputConnection&&o.push(n.outputConnection),n.nextConnection&&o.push(n.nextConnection),n.previousConnection&&o.push(n.previousConnection)}else o=n.getConnections_(!0);for(var r=0;r<o.length;r++)t.push.apply(t,o[r].startTrackingAll());t.length||(t[0]=n)}return t},e.RenderedConnection.prototype.isConnectionAllowed=function(t,n){return e.utils.deprecation.warn("RenderedConnection.prototype.isConnectionAllowed","July 2020","July 2021","Blockly.Workspace.prototype.getConnectionChecker().canConnect"),!(this.distanceFrom(t)>n)&&e.RenderedConnection.superClass_.isConnectionAllowed.call(this,t)},e.RenderedConnection.prototype.onFailedConnect=function(t){var n=this.getSourceBlock();if(e.Events.recordUndo){var o=e.Events.getGroup();setTimeout(function(){n.isDisposed()||n.getParent()||(e.Events.setGroup(o),this.bumpAwayFrom(t),e.Events.setGroup(!1))}.bind(this),e.BUMP_DELAY)}},e.RenderedConnection.prototype.disconnectInternal_=function(t,n){e.RenderedConnection.superClass_.disconnectInternal_.call(this,t,n),t.rendered&&t.render(),n.rendered&&(n.updateDisabled(),n.render(),n.getSvgRoot().style.display="block")},e.RenderedConnection.prototype.respawnShadow_=function(){e.RenderedConnection.superClass_.respawnShadow_.call(this);var t=this.targetBlock();t&&(t.initSvg(),t.render(!1),(t=this.getSourceBlock()).rendered&&t.render())},e.RenderedConnection.prototype.neighbours=function(t){return this.dbOpposite_.getNeighbours(this,t)},e.RenderedConnection.prototype.connect_=function(t){e.RenderedConnection.superClass_.connect_.call(this,t);var n=this.getSourceBlock();t=t.getSourceBlock();var o=n.rendered,r=t.rendered;o&&n.updateDisabled(),r&&t.updateDisabled(),o&&r&&(this.type==e.connectionTypes.NEXT_STATEMENT||this.type==e.connectionTypes.PREVIOUS_STATEMENT?t.render():n.render()),(n=n.getInputWithBlock(t))&&(n=n.isVisible(),t.getSvgRoot().style.display=n?"block":"none")},e.RenderedConnection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||((this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug(),this.sourceBlock_.bumpNeighbours())},e.BasicCursor=function(){e.BasicCursor.superClass_.constructor.call(this)},e.utils.object.inherits(e.BasicCursor,e.Cursor),e.BasicCursor.registrationName="basicCursor",e.BasicCursor.prototype.next=function(){var t=this.getCurNode();return t?((t=this.getNextNode_(t,this.validNode_))&&this.setCurNode(t),t):null},e.BasicCursor.prototype.in=function(){return this.next()},e.BasicCursor.prototype.prev=function(){var t=this.getCurNode();return t?((t=this.getPreviousNode_(t,this.validNode_))&&this.setCurNode(t),t):null},e.BasicCursor.prototype.out=function(){return this.prev()},e.BasicCursor.prototype.getNextNode_=function(t,n){if(!t)return null;var o=t.in()||t.next();return n(o)?o:o?this.getNextNode_(o,n):n(t=this.findSiblingOrParent_(t.out()))?t:t?this.getNextNode_(t,n):null},e.BasicCursor.prototype.getPreviousNode_=function(t,n){if(!t)return null;var o=t.prev();return n(o=o?this.getRightMostChild_(o):t.out())?o:o?this.getPreviousNode_(o,n):null},e.BasicCursor.prototype.validNode_=function(t){var n=!1;return((t=t&&t.getType())==e.ASTNode.types.OUTPUT||t==e.ASTNode.types.INPUT||t==e.ASTNode.types.FIELD||t==e.ASTNode.types.NEXT||t==e.ASTNode.types.PREVIOUS||t==e.ASTNode.types.WORKSPACE)&&(n=!0),n},e.BasicCursor.prototype.findSiblingOrParent_=function(t){return t?t.next()||this.findSiblingOrParent_(t.out()):null},e.BasicCursor.prototype.getRightMostChild_=function(t){if(!t.in())return t;for(t=t.in();t.next();)t=t.next();return this.getRightMostChild_(t)},e.registry.register(e.registry.Type.CURSOR,e.BasicCursor.registrationName,e.BasicCursor),e.TabNavigateCursor=function(){e.TabNavigateCursor.superClass_.constructor.call(this)},e.utils.object.inherits(e.TabNavigateCursor,e.BasicCursor),e.TabNavigateCursor.prototype.validNode_=function(t){var n=!1,o=t&&t.getType();return t&&(t=t.getLocation(),o==e.ASTNode.types.FIELD&&t&&t.isTabNavigable()&&t.isClickable()&&(n=!0)),n},e.BlockSvg=function(t,n,o){this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},null),this.svgGroup_.translate_="",this.style=t.getRenderer().getConstants().getBlockStyle(null),this.pathObject=t.getRenderer().makePathObject(this.svgGroup_,this.style),this.renderIsInProgress_=this.rendered=!1,this.workspace=t,this.previousConnection=this.nextConnection=this.outputConnection=null,this.useDragSurface_=e.utils.is3dSupported()&&!!t.getBlockDragSurface();var r=this.pathObject.svgPath;r.tooltip=this,e.Tooltip.bindMouseEvents(r),e.BlockSvg.superClass_.constructor.call(this,t,n,o),this.svgGroup_.dataset?this.svgGroup_.dataset.id=this.id:e.utils.userAgent.IE&&this.svgGroup_.setAttribute("data-id",this.id)},e.utils.object.inherits(e.BlockSvg,e.Block),e.BlockSvg.prototype.height=0,e.BlockSvg.prototype.width=0,e.BlockSvg.prototype.warningTextDb_=null,e.BlockSvg.INLINE=-1,e.BlockSvg.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_",e.BlockSvg.prototype.initSvg=function(){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");for(var n,t=0;n=this.inputList[t];t++)n.init();for(n=this.getIcons(),t=0;t<n.length;t++)n[t].createIcon();this.applyColour(),this.pathObject.updateMovable(this.isMovable()),t=this.getSvgRoot(),this.workspace.options.readOnly||this.eventsInit_||!t||e.browserEvents.conditionalBind(t,"mousedown",this,this.onMouseDown_),this.eventsInit_=!0,t.parentNode||this.workspace.getCanvas().appendChild(t)},e.BlockSvg.prototype.getColourSecondary=function(){return this.style.colourSecondary},e.BlockSvg.prototype.getColourTertiary=function(){return this.style.colourTertiary},e.BlockSvg.prototype.getColourShadow=function(){return e.utils.deprecation.warn("BlockSvg.prototype.getColourShadow","January 2020","January 2021","style.colourSecondary"),this.getColourSecondary()},e.BlockSvg.prototype.getColourBorder=function(){return e.utils.deprecation.warn("BlockSvg.prototype.getColourBorder","January 2020","January 2021","style.colourTertiary"),{colourBorder:this.getColourTertiary(),colourLight:null,colourDark:null}},e.BlockSvg.prototype.select=function(){if(this.isShadow()&&this.getParent())this.getParent().select();else if(e.selected!=this){var t=null;if(e.selected){t=e.selected.id,e.Events.disable();try{e.selected.unselect()}finally{e.Events.enable()}}t=new(e.Events.get(e.Events.SELECTED))(t,this.id,this.workspace.id),e.Events.fire(t),e.selected=this,this.addSelect()}},e.BlockSvg.prototype.unselect=function(){if(e.selected==this){var t=new(e.Events.get(e.Events.SELECTED))(this.id,null,this.workspace.id);t.workspaceId=this.workspace.id,e.Events.fire(t),e.selected=null,this.removeSelect()}},e.BlockSvg.prototype.mutator=null,e.BlockSvg.prototype.comment=null,e.BlockSvg.prototype.commentIcon_=null,e.BlockSvg.prototype.warning=null,e.BlockSvg.prototype.getIcons=function(){var t=[];return this.mutator&&t.push(this.mutator),this.commentIcon_&&t.push(this.commentIcon_),this.warning&&t.push(this.warning),t},e.BlockSvg.prototype.setParent=function(t){var n=this.parentBlock_;if(t!=n){e.utils.dom.startTextWidthCache(),e.BlockSvg.superClass_.setParent.call(this,t),e.utils.dom.stopTextWidthCache();var o=this.getSvgRoot();if(!this.workspace.isClearing&&o){var r=this.getRelativeToSurfaceXY();t?(t.getSvgRoot().appendChild(o),t=this.getRelativeToSurfaceXY(),this.moveConnections(t.x-r.x,t.y-r.y)):n&&(this.workspace.getCanvas().appendChild(o),this.translate(r.x,r.y)),this.applyColour()}}},e.BlockSvg.prototype.getRelativeToSurfaceXY=function(){var t=0,n=0,o=this.useDragSurface_?this.workspace.getBlockDragSurface().getGroup():null,r=this.getSvgRoot();if(r)do{var p=e.utils.getRelativeXY(r);t+=p.x,n+=p.y,this.useDragSurface_&&this.workspace.getBlockDragSurface().getCurrentBlock()==r&&(t+=(p=this.workspace.getBlockDragSurface().getSurfaceTranslation()).x,n+=p.y),r=r.parentNode}while(r&&r!=this.workspace.getCanvas()&&r!=o);return new e.utils.Coordinate(t,n)},e.BlockSvg.prototype.moveBy=function(t,n){if(this.parentBlock_)throw Error("Block has parent.");var o=e.Events.isEnabled();if(o)var r=new(e.Events.get(e.Events.BLOCK_MOVE))(this);var p=this.getRelativeToSurfaceXY();this.translate(p.x+t,p.y+n),this.moveConnections(t,n),o&&(r.recordNew(),e.Events.fire(r)),this.workspace.resizeContents()},e.BlockSvg.prototype.translate=function(t,n){this.getSvgRoot().setAttribute("transform","translate("+t+","+n+")")},e.BlockSvg.prototype.moveToDragSurface=function(){if(this.useDragSurface_){var t=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.getBlockDragSurface().translateSurface(t.x,t.y),(t=this.getSvgRoot())&&this.workspace.getBlockDragSurface().setBlocksAndShow(t)}},e.BlockSvg.prototype.moveTo=function(t){var n=this.getRelativeToSurfaceXY();this.moveBy(t.x-n.x,t.y-n.y)},e.BlockSvg.prototype.moveOffDragSurface=function(t){this.useDragSurface_&&(this.translate(t.x,t.y),this.workspace.getBlockDragSurface().clearAndHide(this.workspace.getCanvas()))},e.BlockSvg.prototype.moveDuringDrag=function(t){this.useDragSurface_?this.workspace.getBlockDragSurface().translateSurface(t.x,t.y):(this.svgGroup_.translate_="translate("+t.x+","+t.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))},e.BlockSvg.prototype.clearTransformAttributes_=function(){this.getSvgRoot().removeAttribute("transform")},e.BlockSvg.prototype.snapToGrid=function(){if(this.workspace&&!this.workspace.isDragging()&&!this.getParent()&&!this.isInFlyout){var t=this.workspace.getGrid();if(t&&t.shouldSnap()){var n=t.getSpacing(),o=n/2,r=this.getRelativeToSurfaceXY();t=Math.round((r.x-o)/n)*n+o-r.x,n=Math.round((r.y-o)/n)*n+o-r.y,t=Math.round(t),n=Math.round(n),0==t&&0==n||this.moveBy(t,n)}}},e.BlockSvg.prototype.getBoundingRectangle=function(){var t=this.getRelativeToSurfaceXY(),n=this.getHeightWidth();if(this.RTL)var o=t.x-n.width,r=t.x;else o=t.x,r=t.x+n.width;return new e.utils.Rect(t.y,t.y+n.height,o,r)},e.BlockSvg.prototype.markDirty=function(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(var n,t=0;n=this.inputList[t];t++)n.markDirty()},e.BlockSvg.prototype.setCollapsed=function(t){this.collapsed_!=t&&(e.BlockSvg.superClass_.setCollapsed.call(this,t),t?this.rendered&&this.render():this.updateCollapsed_())},e.BlockSvg.prototype.updateCollapsed_=function(){for(var p,t=this.isCollapsed(),n=e.constants.COLLAPSED_INPUT_NAME,o=e.constants.COLLAPSED_FIELD_NAME,r=0;p=this.inputList[r];r++)p.name!=n&&p.setVisible(!t);if(t){for(p=this.getIcons(),r=0;t=p[r];r++)t.setVisible(!1);r=this.toString(e.COLLAPSE_CHARS),(p=this.getField(o))?p.setValue(r):(p=this.getInput(n)||this.appendDummyInput(n)).appendField(new e.FieldLabel(r),o)}else this.updateDisabled(),this.removeInput(n)},e.BlockSvg.prototype.tab=function(t,n){var o=new e.TabNavigateCursor;o.setCurNode(e.ASTNode.createFieldNode(t)),t=o.getCurNode(),n?o.next():o.prev(),(n=o.getCurNode())&&n!==t&&(n.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(n))},e.BlockSvg.prototype.onMouseDown_=function(t){var n=this.workspace&&this.workspace.getGesture(t);n&&n.handleBlockStart(t,this)},e.BlockSvg.prototype.showHelp=function(){var t="function"==typeof this.helpUrl?this.helpUrl():this.helpUrl;t&&window.open(t)},e.BlockSvg.prototype.generateContextMenu=function(){if(this.workspace.options.readOnly||!this.contextMenu)return null;var t=e.ContextMenuRegistry.registry.getContextMenuOptions(e.ContextMenuRegistry.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(t),t},e.BlockSvg.prototype.showContextMenu=function(t){var n=this.generateContextMenu();n&&n.length&&(e.ContextMenu.show(t,n,this.RTL),e.ContextMenu.currentBlock=this)},e.BlockSvg.prototype.moveConnections=function(t,n){if(this.rendered){for(var o=this.getConnections_(!1),r=0;r<o.length;r++)o[r].moveBy(t,n);for(o=this.getIcons(),r=0;r<o.length;r++)o[r].computeIconLocation();for(r=0;r<this.childBlocks_.length;r++)this.childBlocks_[r].moveConnections(t,n)}},e.BlockSvg.prototype.setDragging=function(t){if(t){var n=this.getSvgRoot();n.translate_="",n.skew_="",e.draggingConnections=e.draggingConnections.concat(this.getConnections_(!0)),e.utils.dom.addClass(this.svgGroup_,"blocklyDragging")}else e.draggingConnections=[],e.utils.dom.removeClass(this.svgGroup_,"blocklyDragging");for(n=0;n<this.childBlocks_.length;n++)this.childBlocks_[n].setDragging(t)},e.BlockSvg.prototype.setMovable=function(t){e.BlockSvg.superClass_.setMovable.call(this,t),this.pathObject.updateMovable(t)},e.BlockSvg.prototype.setEditable=function(t){e.BlockSvg.superClass_.setEditable.call(this,t),t=this.getIcons();for(var n=0;n<t.length;n++)t[n].updateEditable()},e.BlockSvg.prototype.setShadow=function(t){e.BlockSvg.superClass_.setShadow.call(this,t),this.applyColour()},e.BlockSvg.prototype.setInsertionMarker=function(t){this.isInsertionMarker_!=t&&(this.isInsertionMarker_=t)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))},e.BlockSvg.prototype.getSvgRoot=function(){return this.svgGroup_},e.BlockSvg.prototype.dispose=function(t,n){if(this.workspace){e.Tooltip.dispose(),e.Tooltip.unbindMouseEvents(this.pathObject.svgPath),e.utils.dom.startTextWidthCache();var o=this.workspace;if(e.selected==this&&(this.unselect(),this.workspace.cancelCurrentGesture()),e.ContextMenu.currentBlock==this&&e.ContextMenu.hide(),n&&this.rendered&&(this.unplug(t),e.blockAnimations.disposeUiEffect(this)),this.rendered=!1,this.warningTextDb_){for(var r in this.warningTextDb_)clearTimeout(this.warningTextDb_[r]);this.warningTextDb_=null}for(n=this.getIcons(),r=0;r<n.length;r++)n[r].dispose();e.BlockSvg.superClass_.dispose.call(this,!!t),e.utils.dom.removeNode(this.svgGroup_),o.resizeContents(),this.svgGroup_=null,e.utils.dom.stopTextWidthCache()}},e.BlockSvg.prototype.toCopyData=function(){if(this.isInsertionMarker_)return null;var t=e.Xml.blockToDom(this,!0);e.Xml.deleteNext(t);var n=this.getRelativeToSurfaceXY();return t.setAttribute("x",this.RTL?-n.x:n.x),t.setAttribute("y",n.y),{xml:t,source:this.workspace,typeCounts:e.utils.getBlockTypeCounts(this,!0)}},e.BlockSvg.prototype.applyColour=function(){this.pathObject.applyColour(this);for(var t=this.getIcons(),n=0;n<t.length;n++)t[n].applyColour();for(t=0;n=this.inputList[t];t++)for(var r,o=0;r=n.fieldRow[o];o++)r.applyColour()},e.BlockSvg.prototype.updateDisabled=function(){var t=this.getChildren(!1);if(this.applyColour(),!this.isCollapsed())for(var o,n=0;o=t[n];n++)o.rendered&&o.updateDisabled()},e.BlockSvg.prototype.getCommentIcon=function(){return this.commentIcon_},e.BlockSvg.prototype.setCommentText=function(t){if(!e.Comment)throw Error("Missing require for Blockly.Comment");this.commentModel.text!=t&&(e.BlockSvg.superClass_.setCommentText.call(this,t),!!this.commentIcon_==(t=null!=t)?this.commentIcon_.updateText():(t?this.comment=this.commentIcon_=new e.Comment(this):(this.commentIcon_.dispose(),this.comment=this.commentIcon_=null),this.rendered&&(this.render(),this.bumpNeighbours())))},e.BlockSvg.prototype.setWarningText=function(t,n){if(!e.Warning)throw Error("Missing require for Blockly.Warning");this.warningTextDb_||(this.warningTextDb_=Object.create(null));var o=n||"";if(o)this.warningTextDb_[o]&&(clearTimeout(this.warningTextDb_[o]),delete this.warningTextDb_[o]);else for(var r in this.warningTextDb_)clearTimeout(this.warningTextDb_[r]),delete this.warningTextDb_[r];if(this.workspace.isDragging()){var p=this;this.warningTextDb_[o]=setTimeout(function(){p.workspace&&(delete p.warningTextDb_[o],p.setWarningText(t,o))},100)}else{if(this.isInFlyout&&(t=null),n=!1,"string"==typeof t){r=this.getSurroundParent();for(var b=null;r;)r.isCollapsed()&&(b=r),r=r.getSurroundParent();b&&b.setWarningText(e.Msg.COLLAPSED_WARNINGS_WARNING,e.BlockSvg.COLLAPSED_WARNING_ID),this.warning||(this.warning=new e.Warning(this),n=!0),this.warning.setText(t,o)}else this.warning&&!o?(this.warning.dispose(),n=!0):this.warning&&(n=this.warning.getText(),this.warning.setText("",o),(r=this.warning.getText())||this.warning.dispose(),n=n!=r);n&&this.rendered&&(this.render(),this.bumpNeighbours())}},e.BlockSvg.prototype.setMutator=function(t){this.mutator&&this.mutator!==t&&this.mutator.dispose(),t&&(t.setBlock(this),this.mutator=t,t.createIcon()),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.setEnabled=function(t){this.isEnabled()!=t&&(e.BlockSvg.superClass_.setEnabled.call(this,t),this.rendered&&!this.getInheritedDisabled()&&this.updateDisabled())},e.BlockSvg.prototype.setHighlighted=function(t){this.rendered&&this.pathObject.updateHighlighted(t)},e.BlockSvg.prototype.addSelect=function(){this.pathObject.updateSelected(!0)},e.BlockSvg.prototype.removeSelect=function(){this.pathObject.updateSelected(!1)},e.BlockSvg.prototype.setDeleteStyle=function(t){this.pathObject.updateDraggingDelete(t)},e.BlockSvg.prototype.getColour=function(){return this.style.colourPrimary},e.BlockSvg.prototype.setColour=function(t){e.BlockSvg.superClass_.setColour.call(this,t),t=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(t.style),this.style=t.style,this.styleName_=t.name,this.applyColour()},e.BlockSvg.prototype.setStyle=function(t){var n=this.workspace.getRenderer().getConstants().getBlockStyle(t);if(this.styleName_=t,!n)throw Error("Invalid style name: "+t);this.hat=n.hat,this.pathObject.setStyle(n),this.colour_=n.colourPrimary,this.style=n,this.applyColour()},e.BlockSvg.prototype.bringToFront=function(){var t=this;do{var n=t.getSvgRoot(),o=n.parentNode,r=o.childNodes;r[r.length-1]!==n&&o.appendChild(n),t=t.getParent()}while(t)},e.BlockSvg.prototype.setPreviousStatement=function(t,n){e.BlockSvg.superClass_.setPreviousStatement.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.setNextStatement=function(t,n){e.BlockSvg.superClass_.setNextStatement.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.setOutput=function(t,n){e.BlockSvg.superClass_.setOutput.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.setInputsInline=function(t){e.BlockSvg.superClass_.setInputsInline.call(this,t),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.removeInput=function(t,n){return t=e.BlockSvg.superClass_.removeInput.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours()),t},e.BlockSvg.prototype.moveNumberedInputBefore=function(t,n){e.BlockSvg.superClass_.moveNumberedInputBefore.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.appendInput_=function(t,n){return t=e.BlockSvg.superClass_.appendInput_.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours()),t},e.BlockSvg.prototype.setConnectionTracking=function(t){if(this.previousConnection&&this.previousConnection.setTracking(t),this.outputConnection&&this.outputConnection.setTracking(t),this.nextConnection){this.nextConnection.setTracking(t);var n=this.nextConnection.targetBlock();n&&n.setConnectionTracking(t)}if(!this.collapsed_)for(n=0;n<this.inputList.length;n++){var o=this.inputList[n].connection;o&&(o.setTracking(t),(o=o.targetBlock())&&o.setConnectionTracking(t))}},e.BlockSvg.prototype.getConnections_=function(t){var n=[];if((t||this.rendered)&&(this.outputConnection&&n.push(this.outputConnection),this.previousConnection&&n.push(this.previousConnection),this.nextConnection&&n.push(this.nextConnection),t||!this.collapsed_)){t=0;for(var o;o=this.inputList[t];t++)o.connection&&n.push(o.connection)}return n},e.BlockSvg.prototype.lastConnectionInStack=function(t){return e.BlockSvg.superClass_.lastConnectionInStack.call(this,t)},e.BlockSvg.prototype.getMatchingConnection=function(t,n){return e.BlockSvg.superClass_.getMatchingConnection.call(this,t,n)},e.BlockSvg.prototype.makeConnection_=function(t){return new e.RenderedConnection(this,t)},e.BlockSvg.prototype.bumpNeighbours=function(){if(this.workspace&&!this.workspace.isDragging()){var t=this.getRootBlock();if(!t.isInFlyout)for(var r,n=this.getConnections_(!1),o=0;r=n[o];o++){r.isConnected()&&r.isSuperior()&&r.targetBlock().bumpNeighbours();for(var I,p=r.neighbours(e.SNAP_RADIUS),b=0;I=p[b];b++)r.isConnected()&&I.isConnected()||I.getSourceBlock().getRootBlock()!=t&&(r.isSuperior()?I.bumpAwayFrom(r):r.bumpAwayFrom(I))}}},e.BlockSvg.prototype.scheduleSnapAndBump=function(){var t=this,n=e.Events.getGroup();setTimeout(function(){e.Events.setGroup(n),t.snapToGrid(),e.Events.setGroup(!1)},e.BUMP_DELAY/2),setTimeout(function(){e.Events.setGroup(n),t.bumpNeighbours(),e.Events.setGroup(!1)},e.BUMP_DELAY)},e.BlockSvg.prototype.positionNearConnection=function(t,n){t.type!=e.connectionTypes.NEXT_STATEMENT&&t.type!=e.connectionTypes.INPUT_VALUE||this.moveBy(n.x-t.x,n.y-t.y)},e.BlockSvg.prototype.getParent=function(){return e.BlockSvg.superClass_.getParent.call(this)},e.BlockSvg.prototype.getRootBlock=function(){return e.BlockSvg.superClass_.getRootBlock.call(this)},e.BlockSvg.prototype.render=function(t){if(!this.renderIsInProgress_){this.renderIsInProgress_=!0;try{if(this.rendered=!0,e.utils.dom.startTextWidthCache(),this.isCollapsed()&&this.updateCollapsed_(),this.workspace.getRenderer().render(this),this.updateConnectionLocations_(),!1!==t){var n=this.getParent();n?n.render(!0):this.workspace.resizeContents()}e.utils.dom.stopTextWidthCache(),this.updateMarkers_()}finally{this.renderIsInProgress_=!1}}},e.BlockSvg.prototype.updateMarkers_=function(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(e.MarkerManager.LOCAL_MARKER).draw()},e.BlockSvg.prototype.updateConnectionLocations_=function(){var t=this.getRelativeToSurfaceXY();this.previousConnection&&this.previousConnection.moveToOffset(t),this.outputConnection&&this.outputConnection.moveToOffset(t);for(var n=0;n<this.inputList.length;n++){var o=this.inputList[n].connection;o&&(o.moveToOffset(t),o.isConnected()&&o.tighten())}this.nextConnection&&(this.nextConnection.moveToOffset(t),this.nextConnection.isConnected()&&this.nextConnection.tighten())},e.BlockSvg.prototype.setCursorSvg=function(t){this.pathObject.setCursorSvg(t)},e.BlockSvg.prototype.setMarkerSvg=function(t){this.pathObject.setMarkerSvg(t)},e.BlockSvg.prototype.getHeightWidth=function(){var t=this.height,n=this.width,o=this.getNextBlock();if(o){o=o.getHeightWidth();var r=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;t+=o.height-r,n=Math.max(n,o.width)}return{height:t,width:n}},e.BlockSvg.prototype.fadeForReplacement=function(t){this.pathObject.updateReplacementFade(t)},e.BlockSvg.prototype.highlightShapeForInput=function(t,n){this.pathObject.updateShapeForInputHighlight(t,n)},e.ConnectionDB=function(t){this.connections_=[],this.connectionChecker_=t},e.ConnectionDB.prototype.addConnection=function(t,n){n=this.calculateIndexForYPos_(n),this.connections_.splice(n,0,t)},e.ConnectionDB.prototype.findIndexOfConnection_=function(t,n){if(!this.connections_.length)return-1;var o=this.calculateIndexForYPos_(n);if(o>=this.connections_.length)return-1;n=t.y;for(var r=o;0<=r&&this.connections_[r].y==n;){if(this.connections_[r]==t)return r;r--}for(r=o;r<this.connections_.length&&this.connections_[r].y==n;){if(this.connections_[r]==t)return r;r++}return-1},e.ConnectionDB.prototype.calculateIndexForYPos_=function(t){if(!this.connections_.length)return 0;for(var n=0,o=this.connections_.length;n<o;){var r=Math.floor((n+o)/2);if(this.connections_[r].y<t)n=r+1;else{if(!(this.connections_[r].y>t)){n=r;break}o=r}}return n},e.ConnectionDB.prototype.removeConnection=function(t,n){if(-1==(t=this.findIndexOfConnection_(t,n)))throw Error("Unable to find connection in connectionDB.");this.connections_.splice(t,1)},e.ConnectionDB.prototype.getNeighbours=function(t,n){function o(Y){var X=p-r[Y].x,it=b-r[Y].y;return Math.sqrt(X*X+it*it)<=n&&k.push(r[Y]),it<n}var r=this.connections_,p=t.x,b=t.y;t=0;for(var I=r.length-2,x=I;t<x;)r[x].y<b?t=x:I=x,x=Math.floor((t+I)/2);var k=[];if(I=t=x,r.length){for(;0<=t&&o(t);)t--;do{I++}while(I<r.length&&o(I))}return k},e.ConnectionDB.prototype.isInYRange_=function(t,n,o){return Math.abs(this.connections_[t].y-n)<=o},e.ConnectionDB.prototype.searchForClosest=function(t,n,o){if(!this.connections_.length)return{connection:null,radius:n};var r=t.y,p=t.x;t.x=p+o.x,t.y=r+o.y;var b=this.calculateIndexForYPos_(t.y);o=null;for(var x,I=n,k=b-1;0<=k&&this.isInYRange_(k,t.y,n);)this.connectionChecker_.canConnect(t,x=this.connections_[k],!0,I)&&(o=x,I=x.distanceFrom(t)),k--;for(;b<this.connections_.length&&this.isInYRange_(b,t.y,n);)this.connectionChecker_.canConnect(t,x=this.connections_[b],!0,I)&&(o=x,I=x.distanceFrom(t)),b++;return t.x=p,t.y=r,{connection:o,radius:I}},e.ConnectionDB.init=function(t){var n=[];return n[e.connectionTypes.INPUT_VALUE]=new e.ConnectionDB(t),n[e.connectionTypes.OUTPUT_VALUE]=new e.ConnectionDB(t),n[e.connectionTypes.NEXT_STATEMENT]=new e.ConnectionDB(t),n[e.connectionTypes.PREVIOUS_STATEMENT]=new e.ConnectionDB(t),n},e.Events.ThemeChange=function(t,n){e.Events.ThemeChange.superClass_.constructor.call(this,n),this.themeName=t},e.utils.object.inherits(e.Events.ThemeChange,e.Events.UiBase),e.Events.ThemeChange.prototype.type=e.Events.THEME_CHANGE,e.Events.ThemeChange.prototype.toJson=function(){var t=e.Events.ThemeChange.superClass_.toJson.call(this);return t.themeName=this.themeName,t},e.Events.ThemeChange.prototype.fromJson=function(t){e.Events.ThemeChange.superClass_.fromJson.call(this,t),this.themeName=t.themeName},e.registry.register(e.registry.Type.EVENT,e.Events.THEME_CHANGE,e.Events.ThemeChange),e.Events.ViewportChange=function(t,n,o,r,p){e.Events.ViewportChange.superClass_.constructor.call(this,r),this.viewTop=t,this.viewLeft=n,this.scale=o,this.oldScale=p},e.utils.object.inherits(e.Events.ViewportChange,e.Events.UiBase),e.Events.ViewportChange.prototype.type=e.Events.VIEWPORT_CHANGE,e.Events.ViewportChange.prototype.toJson=function(){var t=e.Events.ViewportChange.superClass_.toJson.call(this);return t.viewTop=this.viewTop,t.viewLeft=this.viewLeft,t.scale=this.scale,t.oldScale=this.oldScale,t},e.Events.ViewportChange.prototype.fromJson=function(t){e.Events.ViewportChange.superClass_.fromJson.call(this,t),this.viewTop=t.viewTop,this.viewLeft=t.viewLeft,this.scale=t.scale,this.oldScale=t.oldScale},e.registry.register(e.registry.Type.EVENT,e.Events.VIEWPORT_CHANGE,e.Events.ViewportChange),e.IMetricsManager=function(){},e.MetricsManager=function(t){this.workspace_=t},e.MetricsManager.prototype.getDimensionsPx_=function(t){var n=0,o=0;return t&&(n=t.getWidth(),o=t.getHeight()),new e.utils.Size(n,o)},e.MetricsManager.prototype.getFlyoutMetrics=function(t){return{width:(t=this.getDimensionsPx_(this.workspace_.getFlyout(t))).width,height:t.height,position:this.workspace_.toolboxPosition}},e.MetricsManager.prototype.getToolboxMetrics=function(){var t=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:t.width,height:t.height,position:this.workspace_.toolboxPosition}},e.MetricsManager.prototype.getSvgMetrics=function(){return this.workspace_.getCachedParentSvgSize()},e.MetricsManager.prototype.getAbsoluteMetrics=function(){var t=0,n=this.getToolboxMetrics(),o=this.getFlyoutMetrics(!0),r=!!this.workspace_.getToolbox(),p=!!this.workspace_.getFlyout(!0),b=r?n.position:o.position,I=b==e.utils.toolbox.Position.LEFT;return b=b==e.utils.toolbox.Position.TOP,r&&I?t=n.width:p&&I&&(t=o.width),I=0,r&&b?I=n.height:p&&b&&(I=o.height),{top:I,left:t}},e.MetricsManager.prototype.getViewMetrics=function(t){t=t?this.workspace_.scale:1;var n=this.getSvgMetrics(),o=this.getToolboxMetrics(),r=this.getFlyoutMetrics(!0),p=this.workspace_.getToolbox()?o.position:r.position;return this.workspace_.getToolbox()?p==e.utils.toolbox.Position.TOP||p==e.utils.toolbox.Position.BOTTOM?n.height-=o.height:(p==e.utils.toolbox.Position.LEFT||p==e.utils.toolbox.Position.RIGHT)&&(n.width-=o.width):this.workspace_.getFlyout(!0)&&(p==e.utils.toolbox.Position.TOP||p==e.utils.toolbox.Position.BOTTOM?n.height-=r.height:(p==e.utils.toolbox.Position.LEFT||p==e.utils.toolbox.Position.RIGHT)&&(n.width-=r.width)),{height:n.height/t,width:n.width/t,top:-this.workspace_.scrollY/t,left:-this.workspace_.scrollX/t}},e.MetricsManager.prototype.getContentMetrics=function(t){t=t?1:this.workspace_.scale;var n=this.workspace_.getBlocksBoundingBox();return{height:(n.bottom-n.top)*t,width:(n.right-n.left)*t,top:n.top*t,left:n.left*t}},e.MetricsManager.prototype.hasFixedEdges=function(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()},e.MetricsManager.prototype.getComputedFixedEdges_=function(t){if(!this.hasFixedEdges())return{};var n=this.workspace_.isMovableHorizontally(),o=this.workspace_.isMovableVertically();t=t||this.getViewMetrics(!1);var r={};return o||(r.top=t.top,r.bottom=t.top+t.height),n||(r.left=t.left,r.right=t.left+t.width),r},e.MetricsManager.prototype.getPaddedContent_=function(t,n){var o=n.top+n.height,r=n.left+n.width,p=t.width,b=p/2,I=(t=t.height)/2;return{top:Math.min(n.top-I,o-t),bottom:Math.max(o+I,n.top+t),left:Math.min(n.left-b,r-p),right:Math.max(r+b,n.left+p)}},e.MetricsManager.prototype.getScrollMetrics=function(t,n,o){t=t?this.workspace_.scale:1,n=n||this.getViewMetrics(!1);var r=o||this.getContentMetrics();o=this.getComputedFixedEdges_(n),n=this.getPaddedContent_(n,r);var p=void 0!==o.left?o.left:n.left;return{top:(r=void 0!==o.top?o.top:n.top)/t,left:p/t,width:((void 0!==o.right?o.right:n.right)-p)/t,height:((void 0!==o.bottom?o.bottom:n.bottom)-r)/t}},e.MetricsManager.prototype.getUiMetrics=function(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}},e.MetricsManager.prototype.getMetrics=function(){var t=this.getToolboxMetrics(),n=this.getFlyoutMetrics(!0),o=this.getSvgMetrics(),r=this.getAbsoluteMetrics(),p=this.getViewMetrics(),b=this.getContentMetrics(),I=this.getScrollMetrics(!1,p,b);return{contentHeight:b.height,contentWidth:b.width,contentTop:b.top,contentLeft:b.left,scrollHeight:I.height,scrollWidth:I.width,scrollTop:I.top,scrollLeft:I.left,viewHeight:p.height,viewWidth:p.width,viewTop:p.top,viewLeft:p.left,absoluteTop:r.top,absoluteLeft:r.left,svgHeight:o.height,svgWidth:o.width,toolboxWidth:t.width,toolboxHeight:t.height,toolboxPosition:t.position,flyoutWidth:n.width,flyoutHeight:n.height}},e.registry.register(e.registry.Type.METRICS_MANAGER,e.registry.DEFAULT,e.MetricsManager),e.FlyoutMetricsManager=function(t,n){this.flyout_=n,e.FlyoutMetricsManager.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.FlyoutMetricsManager,e.MetricsManager),e.FlyoutMetricsManager.prototype.getBoundingBox_=function(){try{var t=this.workspace_.getCanvas().getBBox()}catch(n){t={height:0,y:0,width:0,x:0}}return t},e.FlyoutMetricsManager.prototype.getContentMetrics=function(t){var n=this.getBoundingBox_();return{height:n.height*(t=t?1:this.workspace_.scale),width:n.width*t,top:n.y*t,left:n.x*t}},e.FlyoutMetricsManager.prototype.getScrollMetrics=function(t,n,o){return{height:((n=o||this.getContentMetrics()).height+2*(o=this.flyout_.MARGIN*this.workspace_.scale))/(t=t?this.workspace_.scale:1),width:(n.width+n.left+o)/t,top:0,left:0}},e.ThemeManager=function(t,n){this.workspace_=t,this.theme_=n,this.subscribedWorkspaces_=[],this.componentDB_=Object.create(null)},e.ThemeManager.prototype.getTheme=function(){return this.theme_},e.ThemeManager.prototype.setTheme=function(t){var o,n=this.theme_;for(this.theme_=t,(t=this.workspace_.getInjectionDiv())&&(n&&e.utils.dom.removeClass(t,n.getClassName()),e.utils.dom.addClass(t,this.theme_.getClassName())),n=0;t=this.subscribedWorkspaces_[n];n++)t.refreshTheme();for(n=0,t=Object.keys(this.componentDB_);o=t[n];n++)for(var p,r=0;p=this.componentDB_[o][r];r++){var b=p.element;p=p.propertyName;var I=this.theme_&&this.theme_.getComponentStyle(o);b.style[p]=I||""}e.hideChaff()},e.ThemeManager.prototype.subscribeWorkspace=function(t){this.subscribedWorkspaces_.push(t)},e.ThemeManager.prototype.unsubscribeWorkspace=function(t){if(0>(t=this.subscribedWorkspaces_.indexOf(t)))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.");this.subscribedWorkspaces_.splice(t,1)},e.ThemeManager.prototype.subscribe=function(t,n,o){this.componentDB_[n]||(this.componentDB_[n]=[]),this.componentDB_[n].push({element:t,propertyName:o}),n=this.theme_&&this.theme_.getComponentStyle(n),t.style[o]=n||""},e.ThemeManager.prototype.unsubscribe=function(t){if(t)for(var r,n=Object.keys(this.componentDB_),o=0;r=n[o];o++){for(var p=this.componentDB_[r],b=p.length-1;0<=b;b--)p[b].element===t&&p.splice(b,1);this.componentDB_[r].length||delete this.componentDB_[r]}},e.ThemeManager.prototype.dispose=function(){this.componentDB_=this.subscribedWorkspaces_=this.theme_=this.owner_=null},e.TouchGesture=function(t,n){e.TouchGesture.superClass_.constructor.call(this,t,n),this.isMultiTouch_=!1,this.cachedPoints_=Object.create(null),this.startDistance_=this.previousScale_=0,this.isPinchZoomEnabled_=this.onStartWrapper_=null},e.utils.object.inherits(e.TouchGesture,e.Gesture),e.TouchGesture.ZOOM_IN_MULTIPLIER=5,e.TouchGesture.ZOOM_OUT_MULTIPLIER=6,e.TouchGesture.prototype.doStart=function(t){this.isPinchZoomEnabled_=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,e.TouchGesture.superClass_.doStart.call(this,t),!this.isEnding_&&e.Touch.isTouchEvent(t)&&this.handleTouchStart(t)},e.TouchGesture.prototype.bindMouseEvents=function(t){this.onStartWrapper_=e.browserEvents.conditionalBind(document,"mousedown",null,this.handleStart.bind(this),!0),this.onMoveWrapper_=e.browserEvents.conditionalBind(document,"mousemove",null,this.handleMove.bind(this),!0),this.onUpWrapper_=e.browserEvents.conditionalBind(document,"mouseup",null,this.handleUp.bind(this),!0),t.preventDefault(),t.stopPropagation()},e.TouchGesture.prototype.handleStart=function(t){!this.isDragging()&&e.Touch.isTouchEvent(t)&&(this.handleTouchStart(t),this.isMultiTouch()&&e.longStop_())},e.TouchGesture.prototype.handleMove=function(t){this.isDragging()?e.Touch.shouldHandleEvent(t)&&e.TouchGesture.superClass_.handleMove.call(this,t):this.isMultiTouch()?(e.Touch.isTouchEvent(t)&&this.handleTouchMove(t),e.longStop_()):e.TouchGesture.superClass_.handleMove.call(this,t)},e.TouchGesture.prototype.handleUp=function(t){e.Touch.isTouchEvent(t)&&!this.isDragging()&&this.handleTouchEnd(t),!this.isMultiTouch()||this.isDragging()?e.Touch.shouldHandleEvent(t)&&e.TouchGesture.superClass_.handleUp.call(this,t):(t.preventDefault(),t.stopPropagation(),this.dispose())},e.TouchGesture.prototype.isMultiTouch=function(){return this.isMultiTouch_},e.TouchGesture.prototype.dispose=function(){e.TouchGesture.superClass_.dispose.call(this),this.onStartWrapper_&&e.browserEvents.unbind(this.onStartWrapper_)},e.TouchGesture.prototype.handleTouchStart=function(t){var n=e.Touch.getTouchIdentifierFromEvent(t);this.cachedPoints_[n]=this.getTouchPoint(t),2==(n=Object.keys(this.cachedPoints_)).length&&(this.startDistance_=e.utils.Coordinate.distance(this.cachedPoints_[n[0]],this.cachedPoints_[n[1]]),this.isMultiTouch_=!0,t.preventDefault())},e.TouchGesture.prototype.handleTouchMove=function(t){var n=e.Touch.getTouchIdentifierFromEvent(t);this.cachedPoints_[n]=this.getTouchPoint(t),n=Object.keys(this.cachedPoints_),this.isPinchZoomEnabled_&&2===n.length?this.handlePinch_(t):e.TouchGesture.superClass_.handleMove.call(this,t)},e.TouchGesture.prototype.handlePinch_=function(t){var n=Object.keys(this.cachedPoints_);if(n=e.utils.Coordinate.distance(this.cachedPoints_[n[0]],this.cachedPoints_[n[1]])/this.startDistance_,0<this.previousScale_&&1/0>this.previousScale_){var o=n-this.previousScale_;o=0<o?o*e.TouchGesture.ZOOM_IN_MULTIPLIER:o*e.TouchGesture.ZOOM_OUT_MULTIPLIER;var r=this.startWorkspace_,p=e.utils.mouseToSvg(t,r.getParentSvg(),r.getInverseScreenCTM());r.zoom(p.x,p.y,o)}this.previousScale_=n,t.preventDefault()},e.TouchGesture.prototype.handleTouchEnd=function(t){t=e.Touch.getTouchIdentifierFromEvent(t),this.cachedPoints_[t]&&delete this.cachedPoints_[t],2>Object.keys(this.cachedPoints_).length&&(this.cachedPoints_=Object.create(null),this.previousScale_=0)},e.TouchGesture.prototype.getTouchPoint=function(t){return this.startWorkspace_?new e.utils.Coordinate(t.pageX?t.pageX:t.changedTouches[0].pageX,t.pageY?t.pageY:t.changedTouches[0].pageY):null},e.WorkspaceAudio=function(t){this.parentWorkspace_=t,this.SOUNDS_=Object.create(null)},e.WorkspaceAudio.prototype.lastSound_=null,e.WorkspaceAudio.prototype.dispose=function(){this.SOUNDS_=this.parentWorkspace_=null},e.WorkspaceAudio.prototype.load=function(t,n){if(t.length){try{var o=new e.utils.global.Audio}catch(x){return}for(var r,p=0;p<t.length;p++){var b=t[p],I=b.match(/\.(\w+)$/);if(I&&o.canPlayType("audio/"+I[1])){r=new e.utils.global.Audio(b);break}}r&&r.play&&(this.SOUNDS_[n]=r)}},e.WorkspaceAudio.prototype.preload=function(){for(var t in this.SOUNDS_){var n=this.SOUNDS_[t];n.volume=.01;var o=n.play();if(void 0!==o?o.then(n.pause).catch(function(){}):n.pause(),e.utils.userAgent.IPAD||e.utils.userAgent.IPHONE)break}},e.WorkspaceAudio.prototype.play=function(t,n){var o=this.SOUNDS_[t];o?(t=new Date,null!=this.lastSound_&&t-this.lastSound_<e.SOUND_LIMIT||(this.lastSound_=t,(o=e.utils.userAgent.IPAD||e.utils.userAgent.ANDROID?o:o.cloneNode()).volume=void 0===n?1:n,o.play())):this.parentWorkspace_&&this.parentWorkspace_.getAudioManager().play(t,n)},e.WorkspaceSvg=function(t,n,o){e.WorkspaceSvg.superClass_.constructor.call(this,t),this.metricsManager_=new(e.registry.getClassFromOptions(e.registry.Type.METRICS_MANAGER,t,!0))(this),this.getMetrics=t.getMetrics||this.metricsManager_.getMetrics.bind(this.metricsManager_),this.setMetrics=t.setMetrics||e.WorkspaceSvg.setTopLevelWorkspaceMetrics_,this.componentManager_=new e.ComponentManager,this.connectionDBList=e.ConnectionDB.init(this.connectionChecker),n&&(this.blockDragSurface_=n),o&&(this.workspaceDragSurface_=o),this.useWorkspaceDragSurface_=!!this.workspaceDragSurface_&&e.utils.is3dSupported(),this.highlightedBlocks_=[],this.audioManager_=new e.WorkspaceAudio(t.parentWorkspace),this.grid_=this.options.gridPattern?new e.Grid(this.options.gridPattern,t.gridOptions):null,this.markerManager_=new e.MarkerManager(this),this.toolboxCategoryCallbacks_=Object.create(null),this.flyoutButtonCallbacks_=Object.create(null),e.Variables&&e.Variables.flyoutCategory&&this.registerToolboxCategoryCallback(e.VARIABLE_CATEGORY_NAME,e.Variables.flyoutCategory),e.VariablesDynamic&&e.VariablesDynamic.flyoutCategory&&this.registerToolboxCategoryCallback(e.VARIABLE_DYNAMIC_CATEGORY_NAME,e.VariablesDynamic.flyoutCategory),e.Procedures&&e.Procedures.flyoutCategory&&(this.registerToolboxCategoryCallback(e.PROCEDURE_CATEGORY_NAME,e.Procedures.flyoutCategory),this.addChangeListener(e.Procedures.mutatorOpenListener)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new e.ThemeManager(this,this.options.theme||e.Themes.Classic),this.themeManager_.subscribeWorkspace(this),this.renderer_=e.blockRendering.init(this.options.renderer||"geras",this.getTheme(),this.options.rendererOverrides),this.cachedParentSvg_=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements_=[],this.dragTargetAreas_=[],this.cachedParentSvgSize_=new e.utils.Size(0,0)},e.utils.object.inherits(e.WorkspaceSvg,e.Workspace),e.WorkspaceSvg.prototype.resizeHandlerWrapper_=null,e.WorkspaceSvg.prototype.rendered=!0,e.WorkspaceSvg.prototype.isVisible_=!0,e.WorkspaceSvg.prototype.isFlyout=!1,e.WorkspaceSvg.prototype.isMutator=!1,e.WorkspaceSvg.prototype.resizesEnabled_=!0,e.WorkspaceSvg.prototype.scrollX=0,e.WorkspaceSvg.prototype.scrollY=0,e.WorkspaceSvg.prototype.startScrollX=0,e.WorkspaceSvg.prototype.startScrollY=0,e.WorkspaceSvg.prototype.dragDeltaXY_=null,e.WorkspaceSvg.prototype.scale=1,e.WorkspaceSvg.prototype.oldScale_=1,e.WorkspaceSvg.prototype.oldTop_=0,e.WorkspaceSvg.prototype.oldLeft_=0,e.WorkspaceSvg.prototype.trashcan=null,e.WorkspaceSvg.prototype.scrollbar=null,e.WorkspaceSvg.prototype.flyout_=null,e.WorkspaceSvg.prototype.toolbox_=null,e.WorkspaceSvg.prototype.currentGesture_=null,e.WorkspaceSvg.prototype.blockDragSurface_=null,e.WorkspaceSvg.prototype.workspaceDragSurface_=null,e.WorkspaceSvg.prototype.useWorkspaceDragSurface_=!1,e.WorkspaceSvg.prototype.isDragSurfaceActive_=!1,e.WorkspaceSvg.prototype.injectionDiv_=null,e.WorkspaceSvg.prototype.lastRecordedPageScroll_=null,e.WorkspaceSvg.prototype.targetWorkspace=null,e.WorkspaceSvg.prototype.inverseScreenCTM_=null,e.WorkspaceSvg.prototype.inverseScreenCTMDirty_=!0,e.WorkspaceSvg.prototype.getMarkerManager=function(){return this.markerManager_},e.WorkspaceSvg.prototype.getMetricsManager=function(){return this.metricsManager_},e.WorkspaceSvg.prototype.setMetricsManager=function(t){this.metricsManager_=t,this.getMetrics=this.metricsManager_.getMetrics.bind(this.metricsManager_)},e.WorkspaceSvg.prototype.getComponentManager=function(){return this.componentManager_},e.WorkspaceSvg.prototype.setCursorSvg=function(t){this.markerManager_.setCursorSvg(t)},e.WorkspaceSvg.prototype.setMarkerSvg=function(t){this.markerManager_.setMarkerSvg(t)},e.WorkspaceSvg.prototype.getMarker=function(t){return this.markerManager_?this.markerManager_.getMarker(t):null},e.WorkspaceSvg.prototype.getCursor=function(){return this.markerManager_?this.markerManager_.getCursor():null},e.WorkspaceSvg.prototype.getRenderer=function(){return this.renderer_},e.WorkspaceSvg.prototype.getThemeManager=function(){return this.themeManager_},e.WorkspaceSvg.prototype.getTheme=function(){return this.themeManager_.getTheme()},e.WorkspaceSvg.prototype.setTheme=function(t){t||(t=e.Themes.Classic),this.themeManager_.setTheme(t)},e.WorkspaceSvg.prototype.refreshTheme=function(){this.svgGroup_&&this.renderer_.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles_(this.getAllBlocks(!1).filter(function(n){return!!n.getStyleName()})),this.refreshToolboxSelection(),this.toolbox_&&this.toolbox_.refreshTheme(),this.isVisible()&&this.setVisible(!0);var t=new(e.Events.get(e.Events.THEME_CHANGE))(this.getTheme().name,this.id);e.Events.fire(t)},e.WorkspaceSvg.prototype.updateBlockStyles_=function(t){for(var o,n=0;o=t[n];n++){var r=o.getStyleName();r&&(o.setStyle(r),o.mutator&&o.mutator.updateBlockStyle())}},e.WorkspaceSvg.prototype.getInverseScreenCTM=function(){if(this.inverseScreenCTMDirty_){var t=this.getParentSvg().getScreenCTM();t&&(this.inverseScreenCTM_=t.inverse(),this.inverseScreenCTMDirty_=!1)}return this.inverseScreenCTM_},e.WorkspaceSvg.prototype.updateInverseScreenCTM=function(){this.inverseScreenCTMDirty_=!0},e.WorkspaceSvg.prototype.isVisible=function(){return this.isVisible_},e.WorkspaceSvg.prototype.getSvgXY=function(t){var n=0,o=0,r=1;(e.utils.dom.containsNode(this.getCanvas(),t)||e.utils.dom.containsNode(this.getBubbleCanvas(),t))&&(r=this.scale);do{var p=e.utils.getRelativeXY(t);(t==this.getCanvas()||t==this.getBubbleCanvas())&&(r=1),n+=p.x*r,o+=p.y*r,t=t.parentNode}while(t&&t!=this.getParentSvg());return new e.utils.Coordinate(n,o)},e.WorkspaceSvg.prototype.getCachedParentSvgSize=function(){var t=this.cachedParentSvgSize_;return new e.utils.Size(t.width,t.height)},e.WorkspaceSvg.prototype.getOriginOffsetInPixels=function(){return e.utils.getInjectionDivXY_(this.getCanvas())},e.WorkspaceSvg.prototype.getInjectionDiv=function(){if(!this.injectionDiv_)for(var t=this.svgGroup_;t;){if(-1!=(" "+(t.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")){this.injectionDiv_=t;break}t=t.parentNode}return this.injectionDiv_},e.WorkspaceSvg.prototype.getBlockCanvas=function(){return this.svgBlockCanvas_},e.WorkspaceSvg.prototype.setResizeHandlerWrapper=function(t){this.resizeHandlerWrapper_=t},e.WorkspaceSvg.prototype.createDom=function(t){return this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyWorkspace"},null),t&&(this.svgBackground_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{height:"100%",width:"100%",class:t},this.svgGroup_),"blocklyMainBackground"==t&&this.grid_?this.svgBackground_.style.fill="url(#"+this.grid_.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.svgBlockCanvas_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyBlockCanvas"},this.svgGroup_),this.svgBubbleCanvas_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyBubbleCanvas"},this.svgGroup_),this.isFlyout||(e.browserEvents.conditionalBind(this.svgGroup_,"mousedown",this,this.onMouseDown_,!1,!0),e.browserEvents.conditionalBind(this.svgGroup_,"wheel",this,this.onMouseWheel_)),this.options.hasCategories&&(this.toolbox_=new(e.registry.getClassFromOptions(e.registry.Type.TOOLBOX,this.options,!0))(this)),this.grid_&&this.grid_.update(this.scale),this.recordDragTargets(),(t=e.registry.getClassFromOptions(e.registry.Type.CURSOR,this.options))&&this.markerManager_.setCursor(new t),this.renderer_.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_},e.WorkspaceSvg.prototype.dispose=function(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&(e.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.svgBubbleCanvas_=this.svgBlockCanvas_=null,this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null),this.flyout_&&(this.flyout_.dispose(),this.flyout_=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&(this.zoomControls_.dispose(),this.zoomControls_=null),this.audioManager_&&(this.audioManager_.dispose(),this.audioManager_=null),this.grid_&&(this.grid_.dispose(),this.grid_=null),this.renderer_.dispose(),this.markerManager_&&(this.markerManager_.dispose(),this.markerManager_=null),e.WorkspaceSvg.superClass_.dispose.call(this),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||(this.themeManager_.dispose(),this.themeManager_=null)),this.flyoutButtonCallbacks_=this.toolboxCategoryCallbacks_=this.connectionDBList=null,!this.options.parentWorkspace){var t=this.getParentSvg();t&&t.parentNode&&e.utils.dom.removeNode(t.parentNode)}this.resizeHandlerWrapper_&&(e.browserEvents.unbind(this.resizeHandlerWrapper_),this.resizeHandlerWrapper_=null)},e.WorkspaceSvg.prototype.newBlock=function(t,n){return new e.BlockSvg(this,t,n)},e.WorkspaceSvg.prototype.addTrashcan=function(){if(!e.Trashcan)throw Error("Missing require for Blockly.Trashcan");this.trashcan=new e.Trashcan(this);var t=this.trashcan.createDom();this.svgGroup_.insertBefore(t,this.svgBlockCanvas_)},e.WorkspaceSvg.prototype.addZoomControls=function(){if(!e.ZoomControls)throw Error("Missing require for Blockly.ZoomControls");this.zoomControls_=new e.ZoomControls(this);var t=this.zoomControls_.createDom();this.svgGroup_.appendChild(t)},e.WorkspaceSvg.prototype.addFlyout=function(t){var n=new e.Options({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,move:{scrollbars:!0}});return n.toolboxPosition=this.options.toolboxPosition,this.flyout_=this.horizontalLayout?new(e.registry.getClassFromOptions(e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(n):new(e.registry.getClassFromOptions(e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(n),this.flyout_.autoClose=!1,this.flyout_.getWorkspace().setVisible(!0),this.flyout_.createDom(t)},e.WorkspaceSvg.prototype.getFlyout=function(t){return this.flyout_||t?this.flyout_:this.toolbox_?this.toolbox_.getFlyout():null},e.WorkspaceSvg.prototype.getToolbox=function(){return this.toolbox_},e.WorkspaceSvg.prototype.updateScreenCalculations_=function(){this.updateInverseScreenCTM(),this.recordDragTargets()},e.WorkspaceSvg.prototype.resizeContents=function(){this.resizesEnabled_&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())},e.WorkspaceSvg.prototype.resize=function(){this.toolbox_&&this.toolbox_.position(),this.flyout_&&this.flyout_.position();for(var p,t=this.componentManager_.getComponents(e.ComponentManager.Capability.POSITIONABLE,!0),n=this.getMetricsManager().getUiMetrics(),o=[],r=0;p=t[r];r++)p.position(n,o),(p=p.getBoundingRectangle())&&o.push(p);this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations_()},e.WorkspaceSvg.prototype.updateScreenCalculationsIfScrolled=function(){var t=e.utils.getDocumentScroll();e.utils.Coordinate.equals(this.lastRecordedPageScroll_,t)||(this.lastRecordedPageScroll_=t,this.updateScreenCalculations_())},e.WorkspaceSvg.prototype.getCanvas=function(){return this.svgBlockCanvas_},e.WorkspaceSvg.prototype.setCachedParentSvgSize=function(t,n){var o=this.getParentSvg();t&&(this.cachedParentSvgSize_.width=t,o.cachedWidth_=t),n&&(this.cachedParentSvgSize_.height=n,o.cachedHeight_=n)},e.WorkspaceSvg.prototype.getBubbleCanvas=function(){return this.svgBubbleCanvas_},e.WorkspaceSvg.prototype.getParentSvg=function(){if(!this.cachedParentSvg_)for(var t=this.svgGroup_;t;){if("svg"==t.tagName){this.cachedParentSvg_=t;break}t=t.parentNode}return this.cachedParentSvg_},e.WorkspaceSvg.prototype.maybeFireViewportChangeEvent=function(){if(e.Events.isEnabled()){var t=this.scale,n=-this.scrollY,o=-this.scrollX;if(!(t==this.oldScale_&&1>Math.abs(n-this.oldTop_)&&1>Math.abs(o-this.oldLeft_))){var r=new(e.Events.get(e.Events.VIEWPORT_CHANGE))(n,o,t,this.id,this.oldScale_);this.oldScale_=t,this.oldTop_=n,this.oldLeft_=o,e.Events.fire(r)}}},e.WorkspaceSvg.prototype.translate=function(t,n){if(this.useWorkspaceDragSurface_&&this.isDragSurfaceActive_)this.workspaceDragSurface_.translateSurface(t,n);else{var o="translate("+t+","+n+") scale("+this.scale+")";this.svgBlockCanvas_.setAttribute("transform",o),this.svgBubbleCanvas_.setAttribute("transform",o)}this.blockDragSurface_&&this.blockDragSurface_.translateAndScaleGroup(t,n,this.scale),this.grid_&&this.grid_.moveTo(t,n),this.maybeFireViewportChangeEvent()},e.WorkspaceSvg.prototype.resetDragSurface=function(){if(this.useWorkspaceDragSurface_){this.isDragSurfaceActive_=!1;var t=this.workspaceDragSurface_.getSurfaceTranslation();this.workspaceDragSurface_.clearAndHide(this.svgGroup_),this.svgBlockCanvas_.setAttribute("transform",t="translate("+t.x+","+t.y+") scale("+this.scale+")"),this.svgBubbleCanvas_.setAttribute("transform",t)}},e.WorkspaceSvg.prototype.setupDragSurface=function(){if(this.useWorkspaceDragSurface_&&!this.isDragSurfaceActive_){this.isDragSurfaceActive_=!0;var t=this.svgBlockCanvas_.previousSibling,n=parseInt(this.getParentSvg().getAttribute("width"),10),o=parseInt(this.getParentSvg().getAttribute("height"),10),r=e.utils.getRelativeXY(this.getCanvas());this.workspaceDragSurface_.setContentsAndShow(this.getCanvas(),this.getBubbleCanvas(),t,n,o,this.scale),this.workspaceDragSurface_.translateSurface(r.x,r.y)}},e.WorkspaceSvg.prototype.getBlockDragSurface=function(){return this.blockDragSurface_},e.WorkspaceSvg.prototype.getWidth=function(){var t=this.getMetrics();return t?t.viewWidth/this.scale:0},e.WorkspaceSvg.prototype.setVisible=function(t){if(this.isVisible_=t,this.svgGroup_)if(this.scrollbar&&this.scrollbar.setContainerVisible(t),this.getFlyout()&&this.getFlyout().setContainerVisible(t),this.getParentSvg().style.display=t?"block":"none",this.toolbox_&&this.toolbox_.setVisible(t),t){for(var n=(t=this.getAllBlocks(!1)).length-1;0<=n;n--)t[n].markDirty();this.render(),this.toolbox_&&this.toolbox_.position()}else e.hideChaff(!0)},e.WorkspaceSvg.prototype.render=function(){for(var t=this.getAllBlocks(!1),n=t.length-1;0<=n;n--)t[n].render(!1);if(this.currentGesture_)for(t=this.currentGesture_.getInsertionMarkers(),n=0;n<t.length;n++)t[n].render(!1);this.markerManager_.updateMarkers()},e.WorkspaceSvg.prototype.highlightBlock=function(t,n){if(void 0===n){for(var r,o=0;r=this.highlightedBlocks_[o];o++)r.setHighlighted(!1);this.highlightedBlocks_.length=0}(r=t?this.getBlockById(t):null)&&((t=void 0===n||n)?-1==this.highlightedBlocks_.indexOf(r)&&this.highlightedBlocks_.push(r):e.utils.arrayRemove(this.highlightedBlocks_,r),r.setHighlighted(t))},e.WorkspaceSvg.prototype.paste=function(t){!this.rendered||!t.tagName||t.getElementsByTagName("block").length>=this.remainingCapacity()||(this.currentGesture_&&this.currentGesture_.cancel(),"comment"==t.tagName.toLowerCase()?this.pasteWorkspaceComment_(t):this.pasteBlock_(t))},e.WorkspaceSvg.prototype.pasteBlock_=function(t){e.Events.disable();try{var n=e.Xml.domToBlock(t,this),o=parseInt(t.getAttribute("x"),10),r=parseInt(t.getAttribute("y"),10);if(!isNaN(o)&&!isNaN(r)){this.RTL&&(o=-o);do{t=!1;for(var I,p=this.getAllBlocks(!1),b=0;I=p[b];b++){var x=I.getRelativeToSurfaceXY();if(1>=Math.abs(o-x.x)&&1>=Math.abs(r-x.y)){t=!0;break}}if(!t){var Y,k=n.getConnections_(!1);for(b=0;Y=k[b];b++)if(Y.closest(e.SNAP_RADIUS,new e.utils.Coordinate(o,r)).connection){t=!0;break}}t&&(o=this.RTL?o-e.SNAP_RADIUS:o+e.SNAP_RADIUS,r+=2*e.SNAP_RADIUS)}while(t);n.moveBy(o,r)}}finally{e.Events.enable()}e.Events.isEnabled()&&!n.isShadow()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CREATE))(n)),n.select()},e.WorkspaceSvg.prototype.pasteWorkspaceComment_=function(t){e.Events.disable();try{var n=e.WorkspaceCommentSvg.fromXml(t,this),o=parseInt(t.getAttribute("x"),10),r=parseInt(t.getAttribute("y"),10);isNaN(o)||isNaN(r)||(this.RTL&&(o=-o),n.moveBy(o+50,r+50))}finally{e.Events.enable()}e.Events.isEnabled()&&e.WorkspaceComment.fireCreateEvent(n),n.select()},e.WorkspaceSvg.prototype.refreshToolboxSelection=function(){var t=this.isFlyout?this.targetWorkspace:this;t&&!t.currentGesture_&&t.toolbox_&&t.toolbox_.getFlyout()&&t.toolbox_.refreshSelection()},e.WorkspaceSvg.prototype.renameVariableById=function(t,n){e.WorkspaceSvg.superClass_.renameVariableById.call(this,t,n),this.refreshToolboxSelection()},e.WorkspaceSvg.prototype.deleteVariableById=function(t){e.WorkspaceSvg.superClass_.deleteVariableById.call(this,t),this.refreshToolboxSelection()},e.WorkspaceSvg.prototype.createVariable=function(t,n,o){return t=e.WorkspaceSvg.superClass_.createVariable.call(this,t,n,o),this.refreshToolboxSelection(),t},e.WorkspaceSvg.prototype.recordDeleteAreas=function(){e.utils.deprecation.warn("WorkspaceSvg.prototype.recordDeleteAreas","June 2021","June 2022","WorkspaceSvg.prototype.recordDragTargets"),this.recordDragTargets()},e.WorkspaceSvg.prototype.recordDragTargets=function(){var t=this.componentManager_.getComponents(e.ComponentManager.Capability.DRAG_TARGET,!0);this.dragTargetAreas_=[];for(var o,n=0;o=t[n];n++){var r=o.getClientRect();r&&this.dragTargetAreas_.push({component:o,clientRect:r})}},e.WorkspaceSvg.prototype.getDragTarget=function(t){for(var o,n=0;o=this.dragTargetAreas_[n];n++)if(o.clientRect.contains(t.clientX,t.clientY))return o.component;return null},e.WorkspaceSvg.prototype.onMouseDown_=function(t){var n=this.getGesture(t);n&&n.handleWsStart(t,this)},e.WorkspaceSvg.prototype.startDrag=function(t,n){(t=e.utils.mouseToSvg(t,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,t.y/=this.scale,this.dragDeltaXY_=e.utils.Coordinate.difference(n,t)},e.WorkspaceSvg.prototype.moveDrag=function(t){return(t=e.utils.mouseToSvg(t,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,t.y/=this.scale,e.utils.Coordinate.sum(this.dragDeltaXY_,t)},e.WorkspaceSvg.prototype.isDragging=function(){return null!=this.currentGesture_&&this.currentGesture_.isDragging()},e.WorkspaceSvg.prototype.isDraggable=function(){return this.options.moveOptions&&this.options.moveOptions.drag},e.WorkspaceSvg.prototype.isMovable=function(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch},e.WorkspaceSvg.prototype.isMovableHorizontally=function(){var t=!!this.scrollbar;return this.isMovable()&&(!t||t&&this.scrollbar.canScrollHorizontally())},e.WorkspaceSvg.prototype.isMovableVertically=function(){var t=!!this.scrollbar;return this.isMovable()&&(!t||t&&this.scrollbar.canScrollVertically())},e.WorkspaceSvg.prototype.onMouseWheel_=function(t){if(e.Gesture.inProgress())t.preventDefault(),t.stopPropagation();else{var n=this.options.zoomOptions&&this.options.zoomOptions.wheel,o=this.options.moveOptions&&this.options.moveOptions.wheel;if(n||o){var r=e.utils.getScrollDeltaPixels(t);!n||!t.ctrlKey&&o?(n=this.scrollX-r.x,o=this.scrollY-r.y,t.shiftKey&&!r.x&&(n=this.scrollX-r.y,o=this.scrollY),this.scroll(n,o)):(r=-r.y/50,n=e.utils.mouseToSvg(t,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(n.x,n.y,r)),t.preventDefault()}}},e.WorkspaceSvg.prototype.getBlocksBoundingBox=function(){var t=this.getTopBoundedElements();if(!t.length)return new e.utils.Rect(0,0,0,0);for(var n=t[0].getBoundingRectangle(),o=1;o<t.length;o++){var r=t[o];r.isInsertionMarker&&r.isInsertionMarker()||((r=r.getBoundingRectangle()).top<n.top&&(n.top=r.top),r.bottom>n.bottom&&(n.bottom=r.bottom),r.left<n.left&&(n.left=r.left),r.right>n.right&&(n.right=r.right))}return n},e.WorkspaceSvg.prototype.cleanUp=function(){this.setResizesEnabled(!1),e.Events.setGroup(!0);for(var r,t=this.getTopBlocks(!0),n=0,o=0;r=t[o];o++)if(r.isMovable()){var p=r.getRelativeToSurfaceXY();r.moveBy(-p.x,n-p.y),r.snapToGrid(),n=r.getRelativeToSurfaceXY().y+r.getHeightWidth().height+this.renderer_.getConstants().MIN_BLOCK_HEIGHT}e.Events.setGroup(!1),this.setResizesEnabled(!0)},e.WorkspaceSvg.prototype.showContextMenu=function(t){if(!this.options.readOnly&&!this.isFlyout){var n=e.ContextMenuRegistry.registry.getContextMenuOptions(e.ContextMenuRegistry.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(n,t),e.ContextMenu.show(t,n,this.RTL)}},e.WorkspaceSvg.prototype.updateToolbox=function(t){if(t=e.utils.toolbox.convertToolboxDefToJson(t)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(e.utils.toolbox.hasCategories(t)){if(!this.toolbox_)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=t,this.toolbox_.render(t)}else{if(!this.flyout_)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=t,this.flyout_.show(t)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")},e.WorkspaceSvg.prototype.markFocused=function(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(e.mainWorkspace=this,this.setBrowserFocus())},e.WorkspaceSvg.prototype.setBrowserFocus=function(){document.activeElement&&document.activeElement.blur&&document.activeElement.blur();try{this.getParentSvg().focus({preventScroll:!0})}catch(t){try{this.getParentSvg().parentNode.setActive()}catch(n){this.getParentSvg().parentNode.focus({preventScroll:!0})}}},e.WorkspaceSvg.prototype.zoom=function(t,n,o){o=Math.pow(this.options.zoomOptions.scaleSpeed,o);var r=this.scale*o;if(this.scale!=r){r>this.options.zoomOptions.maxScale?o=this.options.zoomOptions.maxScale/this.scale:r<this.options.zoomOptions.minScale&&(o=this.options.zoomOptions.minScale/this.scale);var p=this.getCanvas().getCTM(),b=this.getParentSvg().createSVGPoint();b.x=t,b.y=n,b=b.matrixTransform(p.inverse()),p=p.translate((t=b.x)*(1-o),(n=b.y)*(1-o)).scale(o),this.scrollX=p.e,this.scrollY=p.f,this.setScale(r)}},e.WorkspaceSvg.prototype.zoomCenter=function(t){var n=this.getMetrics();if(this.flyout_){var o=n.svgWidth?n.svgWidth/2:0;n=n.svgHeight?n.svgHeight/2:0}else o=n.viewWidth/2+n.absoluteLeft,n=n.viewHeight/2+n.absoluteTop;this.zoom(o,n,t)},e.WorkspaceSvg.prototype.zoomToFit=function(){if(this.isMovable()){var t=this.getMetrics(),n=t.viewWidth;t=t.viewHeight;var o=this.getBlocksBoundingBox(),r=o.right-o.left;if(o=o.bottom-o.top,r){this.flyout_&&(this.horizontalLayout?(t+=this.flyout_.getHeight(),o+=this.flyout_.getHeight()/this.scale):(n+=this.flyout_.getWidth(),r+=this.flyout_.getWidth()/this.scale)),n/=r,t/=o,e.Events.disable();try{this.setScale(Math.min(n,t)),this.scrollCenter()}finally{e.Events.enable()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},e.WorkspaceSvg.prototype.beginCanvasTransition=function(){e.utils.dom.addClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),e.utils.dom.addClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},e.WorkspaceSvg.prototype.endCanvasTransition=function(){e.utils.dom.removeClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),e.utils.dom.removeClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},e.WorkspaceSvg.prototype.scrollCenter=function(){if(this.isMovable()){var t=this.getMetrics(),n=(t.scrollWidth-t.viewWidth)/2,o=(t.scrollHeight-t.viewHeight)/2;this.scroll(n=-n-t.scrollLeft,o=-o-t.scrollTop)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},e.WorkspaceSvg.prototype.centerOnBlock=function(t){if(this.isMovable()){if(t=t?this.getBlockById(t):null){var n=t.getRelativeToSurfaceXY(),o=t.getHeightWidth(),r=this.scale;t=(n.x+(this.RTL?-1:1)*o.width/2)*r,n=(n.y+o.height/2)*r,o=this.getMetrics(),this.scroll(-(t-o.viewWidth/2),-(n-o.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},e.WorkspaceSvg.prototype.setScale=function(t){this.options.zoomOptions.maxScale&&t>this.options.zoomOptions.maxScale?t=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&t<this.options.zoomOptions.minScale&&(t=this.options.zoomOptions.minScale),this.scale=t,e.hideChaff(!1),this.flyout_&&(this.flyout_.reflow(),this.recordDragTargets()),this.grid_&&this.grid_.update(this.scale),t=this.getMetrics(),this.scrollX-=t.absoluteLeft,this.scrollY-=t.absoluteTop,t.viewLeft+=t.absoluteLeft,t.viewTop+=t.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout_?this.scrollbar.resizeView(t):this.scrollbar.resizeContent(t))},e.WorkspaceSvg.prototype.getScale=function(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale},e.WorkspaceSvg.prototype.scroll=function(t,n){e.hideChaff(!0);var o=this.getMetrics();t=Math.min(t,-o.scrollLeft),n=Math.min(n,-o.scrollTop);var r=o.scrollTop+Math.max(0,o.scrollHeight-o.viewHeight);t=Math.max(t,-(o.scrollLeft+Math.max(0,o.scrollWidth-o.viewWidth))),n=Math.max(n,-r),this.scrollX=t,this.scrollY=n,this.scrollbar&&this.scrollbar.set(-(t+o.scrollLeft),-(n+o.scrollTop),!1),this.translate(t+=o.absoluteLeft,n+=o.absoluteTop)},e.WorkspaceSvg.setTopLevelWorkspaceMetrics_=function(t){var n=this.getMetrics();"number"==typeof t.x&&(this.scrollX=-(n.scrollLeft+(n.scrollWidth-n.viewWidth)*t.x)),"number"==typeof t.y&&(this.scrollY=-(n.scrollTop+(n.scrollHeight-n.viewHeight)*t.y)),this.translate(this.scrollX+n.absoluteLeft,this.scrollY+n.absoluteTop)},e.WorkspaceSvg.prototype.getBlockById=function(t){return e.WorkspaceSvg.superClass_.getBlockById.call(this,t)},e.WorkspaceSvg.prototype.getTopBlocks=function(t){return e.WorkspaceSvg.superClass_.getTopBlocks.call(this,t)},e.WorkspaceSvg.prototype.addTopBlock=function(t){this.addTopBoundedElement(t),e.WorkspaceSvg.superClass_.addTopBlock.call(this,t)},e.WorkspaceSvg.prototype.removeTopBlock=function(t){this.removeTopBoundedElement(t),e.WorkspaceSvg.superClass_.removeTopBlock.call(this,t)},e.WorkspaceSvg.prototype.addTopComment=function(t){this.addTopBoundedElement(t),e.WorkspaceSvg.superClass_.addTopComment.call(this,t)},e.WorkspaceSvg.prototype.removeTopComment=function(t){this.removeTopBoundedElement(t),e.WorkspaceSvg.superClass_.removeTopComment.call(this,t)},e.WorkspaceSvg.prototype.addTopBoundedElement=function(t){this.topBoundedElements_.push(t)},e.WorkspaceSvg.prototype.removeTopBoundedElement=function(t){e.utils.arrayRemove(this.topBoundedElements_,t)},e.WorkspaceSvg.prototype.getTopBoundedElements=function(){return[].concat(this.topBoundedElements_)},e.WorkspaceSvg.prototype.setResizesEnabled=function(t){var n=!this.resizesEnabled_&&t;this.resizesEnabled_=t,n&&this.resizeContents()},e.WorkspaceSvg.prototype.clear=function(){this.setResizesEnabled(!1),e.WorkspaceSvg.superClass_.clear.call(this),this.topBoundedElements_=[],this.setResizesEnabled(!0)},e.WorkspaceSvg.prototype.registerButtonCallback=function(t,n){if("function"!=typeof n)throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks_[t]=n},e.WorkspaceSvg.prototype.getButtonCallback=function(t){return(t=this.flyoutButtonCallbacks_[t])?t:null},e.WorkspaceSvg.prototype.removeButtonCallback=function(t){this.flyoutButtonCallbacks_[t]=null},e.WorkspaceSvg.prototype.registerToolboxCategoryCallback=function(t,n){if("function"!=typeof n)throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks_[t]=n},e.WorkspaceSvg.prototype.getToolboxCategoryCallback=function(t){return this.toolboxCategoryCallbacks_[t]||null},e.WorkspaceSvg.prototype.removeToolboxCategoryCallback=function(t){this.toolboxCategoryCallbacks_[t]=null},e.WorkspaceSvg.prototype.getGesture=function(t){var n="mousedown"==t.type||"touchstart"==t.type||"pointerdown"==t.type,o=this.currentGesture_;return o?n&&o.hasStarted()?(console.warn("Tried to start the same gesture twice."),o.cancel(),null):o:n?this.currentGesture_=new e.TouchGesture(t,this):null},e.WorkspaceSvg.prototype.clearGesture=function(){this.currentGesture_=null},e.WorkspaceSvg.prototype.cancelCurrentGesture=function(){this.currentGesture_&&this.currentGesture_.cancel()},e.WorkspaceSvg.prototype.getAudioManager=function(){return this.audioManager_},e.WorkspaceSvg.prototype.getGrid=function(){return this.grid_},e.inject=function(t,n){if(e.checkBlockColourConstants(),"string"==typeof t&&(t=document.getElementById(t)||document.querySelector(t)),!t||!e.utils.dom.containsNode(document,t))throw Error("Error: container is not in current document.");n=new e.Options(n||{});var o=document.createElement("div");o.className="injectionDiv",o.tabIndex=0,e.utils.aria.setState(o,e.utils.aria.State.LABEL,e.Msg.WORKSPACE_ARIA_LABEL),t.appendChild(o),t=e.createDom_(o,n);var r=new e.BlockDragSurfaceSvg(o),p=new e.WorkspaceDragSurfaceSvg(o),b=e.createMainWorkspace_(t,n,r,p);return e.init_(b),e.mainWorkspace=b,e.svgResize(b),o.addEventListener("focusin",function(){e.mainWorkspace=b}),b},e.createDom_=function(t,n){t.setAttribute("dir","LTR"),e.Css.inject(n.hasCss,n.pathToMedia),t=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{xmlns:e.utils.dom.SVG_NS,"xmlns:html":e.utils.dom.HTML_NS,"xmlns:xlink":e.utils.dom.XLINK_NS,version:"1.1",class:"blocklySvg",tabindex:"0"},t);var o=e.utils.dom.createSvgElement(e.utils.Svg.DEFS,{},t),r=String(Math.random()).substring(2);return n.gridPattern=e.Grid.createDom(r,n.gridOptions,o),t},e.createMainWorkspace_=function(t,n,o,r){return n.parentWorkspace=null,(n=new e.WorkspaceSvg(n,o,r)).scale=(o=n.options).zoomOptions.startScale,t.appendChild(n.createDom("blocklyMainBackground")),e.utils.dom.addClass(n.getInjectionDiv(),n.getRenderer().getClassName()),e.utils.dom.addClass(n.getInjectionDiv(),n.getTheme().getClassName()),!o.hasCategories&&o.languageTree&&(r=n.addFlyout(e.utils.Svg.SVG),e.utils.dom.insertAfter(r,t)),o.hasTrashcan&&n.addTrashcan(),o.zoomOptions&&o.zoomOptions.controls&&n.addZoomControls(),n.getThemeManager().subscribe(t,"workspaceBackgroundColour","background-color"),n.translate(0,0),n.addChangeListener(e.bumpIntoBoundsHandler_(n)),e.svgResize(n),e.WidgetDiv.createDom(),e.DropDownDiv.createDom(),e.Tooltip.createDom(),n},e.extractObjectFromEvent_=function(t,n){var o=null;switch(n.type){case e.Events.BLOCK_CREATE:case e.Events.BLOCK_MOVE:(o=t.getBlockById(n.blockId))&&(o=o.getRootBlock());break;case e.Events.COMMENT_CREATE:case e.Events.COMMENT_MOVE:o=t.getCommentById(n.commentId)}return o},e.bumpTopObjectsIntoBounds_=function(t){var n=t.getMetricsManager();if(n.hasFixedEdges()&&!t.isDragging()){n=n.getScrollMetrics(!0);for(var p,o=t.getTopBoundedElements(),r=0;p=o[r];r++)e.bumpObjectIntoBounds_(t,n,p)}},e.bumpIntoBoundsHandler_=function(t){return function(n){var o=t.getMetricsManager();if(o.hasFixedEdges()&&!t.isDragging())if(-1!==e.Events.BUMP_EVENTS.indexOf(n.type)){o=o.getScrollMetrics(!0);var r=e.extractObjectFromEvent_(t,n);if(r){var p=e.Events.getGroup();e.Events.setGroup(n.group),e.bumpObjectIntoBounds_(t,o,r)&&!n.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),null!==p&&e.Events.setGroup(p)}}else n.type===e.Events.VIEWPORT_CHANGE&&n.scale>n.oldScale&&e.bumpTopObjectsIntoBounds_(t)}},e.bumpObjectIntoBounds_=function(t,n,o){var r=o.getBoundingRectangle(),p=r.right-r.left,b=e.utils.math.clamp(n.top,r.top,n.top+n.height-(r.bottom-r.top))-r.top,I=n.left;return n=n.left+n.width-p,t.RTL?I=Math.min(n,I):n=Math.max(I,n),!(!(t=e.utils.math.clamp(I,r.left,n)-r.left)&&!b||(o.moveBy(t,b),0))},e.init_=function(t){var n=t.options,o=t.getParentSvg();if(e.browserEvents.conditionalBind(o.parentNode,"contextmenu",null,function(p){e.utils.isTargetInput(p)||p.preventDefault()}),o=e.browserEvents.conditionalBind(window,"resize",null,function(){e.hideChaff(!0),e.svgResize(t),e.bumpTopObjectsIntoBounds_(t)}),t.setResizeHandlerWrapper(o),e.inject.bindDocumentEvents_(),n.languageTree){o=t.getToolbox();var r=t.getFlyout(!0);o?o.init():r&&(r.init(t),r.show(n.languageTree),"function"==typeof r.scrollToStart&&r.scrollToStart())}n.hasTrashcan&&t.trashcan.init(),n.zoomOptions&&n.zoomOptions.controls&&t.zoomControls_.init(),n.moveOptions&&n.moveOptions.scrollbars?(t.scrollbar=new e.ScrollbarPair(t,!0===n.moveOptions.scrollbars||!!n.moveOptions.scrollbars.horizontal,!0===n.moveOptions.scrollbars||!!n.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),t.scrollbar.resize()):t.setMetrics({x:.5,y:.5}),n.hasSounds&&e.inject.loadSounds_(n.pathToMedia,t)},e.inject.bindDocumentEvents_=function(){e.documentEventsBound_||(e.browserEvents.conditionalBind(document,"scroll",null,function(){for(var o,t=e.Workspace.getAll(),n=0;o=t[n];n++)o.updateInverseScreenCTM&&o.updateInverseScreenCTM()}),e.browserEvents.conditionalBind(document,"keydown",null,e.onKeyDown),e.browserEvents.bind(document,"touchend",null,e.longStop_),e.browserEvents.bind(document,"touchcancel",null,e.longStop_),e.utils.userAgent.IPAD&&e.browserEvents.conditionalBind(window,"orientationchange",document,function(){e.svgResize(e.getMainWorkspace())})),e.documentEventsBound_=!0},e.inject.loadSounds_=function(t,n){var o=n.getAudioManager();o.load([t+"click.mp3",t+"click.wav",t+"click.ogg"],"click"),o.load([t+"disconnect.wav",t+"disconnect.mp3",t+"disconnect.ogg"],"disconnect"),o.load([t+"delete.mp3",t+"delete.ogg",t+"delete.wav"],"delete");var r=[];t=function(){for(;r.length;)e.browserEvents.unbind(r.pop());o.preload()},r.push(e.browserEvents.conditionalBind(document,"mousemove",null,t,!0)),r.push(e.browserEvents.conditionalBind(document,"touchstart",null,t,!0))},e.Names=function(t,n){if(this.variablePrefix_=n||"",this.reservedDict_=Object.create(null),t)for(t=t.split(","),n=0;n<t.length;n++)this.reservedDict_[t[n]]=!0;this.reset()},e.Names.DEVELOPER_VARIABLE_TYPE="DEVELOPER_VARIABLE",e.Names.prototype.reset=function(){this.db_=Object.create(null),this.dbReverse_=Object.create(null),this.variableMap_=null},e.Names.prototype.setVariableMap=function(t){this.variableMap_=t},e.Names.prototype.getNameForUserVariable_=function(t){return this.variableMap_?(t=this.variableMap_.getVariableById(t))?t.name:null:(console.warn("Deprecated call to Blockly.Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:\nBlockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());"),null)},e.Names.prototype.populateVariables=function(t){t=e.Variables.allUsedVarModels(t);for(var n=0;n<t.length;n++)this.getName(t[n].getId(),e.VARIABLE_CATEGORY_NAME)},e.Names.prototype.populateProcedures=function(t){t=(t=e.Procedures.allProcedures(t))[0].concat(t[1]);for(var n=0;n<t.length;n++)this.getName(t[n][0],e.PROCEDURE_CATEGORY_NAME)},e.Names.prototype.getName=function(t,n){var o=t;n==e.VARIABLE_CATEGORY_NAME&&(t=this.getNameForUserVariable_(t))&&(o=t),t=o.toLowerCase();var r=n==e.VARIABLE_CATEGORY_NAME||n==e.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"";n in this.db_||(this.db_[n]=Object.create(null));var p=this.db_[n];return t in p?r+p[t]:(n=this.getDistinctName(o,n),p[t]=n.substr(r.length),n)},e.Names.prototype.getUserNames=function(t){return Object.keys(this.db_[t]||{})},e.Names.prototype.getDistinctName=function(t,n){t=this.safeName_(t);for(var o="";this.dbReverse_[t+o]||t+o in this.reservedDict_;)o=o?o+1:2;return this.dbReverse_[t+=o]=!0,(n==e.VARIABLE_CATEGORY_NAME||n==e.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"")+t},e.Names.prototype.safeName_=function(t){return t?(t=encodeURI(t.replace(/ /g,"_")).replace(/[^\w]/g,"_"),-1!="0123456789".indexOf(t[0])&&(t="my_"+t)):t=e.Msg.UNNAMED_KEY||"unnamed",t},e.Names.equals=function(t,n){return t.toLowerCase()==n.toLowerCase()},e.Procedures={},e.Procedures.NAME_TYPE=e.PROCEDURE_CATEGORY_NAME,e.Procedures.DEFAULT_ARG="x",e.Procedures.allProcedures=function(t){var n=t.getBlocksByType("procedures_defnoreturn",!1).map(function(o){return o.getProcedureDef()});return t=t.getBlocksByType("procedures_defreturn",!1).map(function(o){return o.getProcedureDef()}),n.sort(e.Procedures.procTupleComparator_),t.sort(e.Procedures.procTupleComparator_),[n,t]},e.Procedures.procTupleComparator_=function(t,n){return t[0].localeCompare(n[0],void 0,{sensitivity:"base"})},e.Procedures.findLegalName=function(t,n){if(n.isInFlyout)return t;for(t=t||e.Msg.UNNAMED_KEY||"unnamed";!e.Procedures.isLegalName_(t,n.workspace,n);){var o=t.match(/^(.*?)(\d+)$/);t=o?o[1]+(parseInt(o[2],10)+1):t+"2"}return t},e.Procedures.isLegalName_=function(t,n,o){return!e.Procedures.isNameUsed(t,n,o)},e.Procedures.isNameUsed=function(t,n,o){n=n.getAllBlocks(!1);for(var r=0;r<n.length;r++)if(n[r]!=o&&n[r].getProcedureDef){var p=n[r].getProcedureDef();if(e.Names.equals(p[0],t))return!0}return!1},e.Procedures.rename=function(t){t=t.trim();var n=e.Procedures.findLegalName(t,this.getSourceBlock()),o=this.getValue();if(o!=t&&o!=n){t=this.getSourceBlock().workspace.getAllBlocks(!1);for(var r=0;r<t.length;r++)t[r].renameProcedure&&t[r].renameProcedure(o,n)}return n},e.Procedures.flyoutCategory=function(t){function n(b,I){for(var x=0;x<b.length;x++){var k=b[x][0],Y=b[x][1],X=e.utils.xml.createElement("block");X.setAttribute("type",I),X.setAttribute("gap",16);var it=e.utils.xml.createElement("mutation");for(it.setAttribute("name",k),X.appendChild(it),k=0;k<Y.length;k++){var rt=e.utils.xml.createElement("arg");rt.setAttribute("name",Y[k]),it.appendChild(rt)}o.push(X)}}var o=[];if(e.Blocks.procedures_defnoreturn){var r=e.utils.xml.createElement("block");r.setAttribute("type","procedures_defnoreturn"),r.setAttribute("gap",16);var p=e.utils.xml.createElement("field");p.setAttribute("name","NAME"),p.appendChild(e.utils.xml.createTextNode(e.Msg.PROCEDURES_DEFNORETURN_PROCEDURE)),r.appendChild(p),o.push(r)}return e.Blocks.procedures_defreturn&&((r=e.utils.xml.createElement("block")).setAttribute("type","procedures_defreturn"),r.setAttribute("gap",16),(p=e.utils.xml.createElement("field")).setAttribute("name","NAME"),p.appendChild(e.utils.xml.createTextNode(e.Msg.PROCEDURES_DEFRETURN_PROCEDURE)),r.appendChild(p),o.push(r)),e.Blocks.procedures_ifreturn&&((r=e.utils.xml.createElement("block")).setAttribute("type","procedures_ifreturn"),r.setAttribute("gap",16),o.push(r)),o.length&&o[o.length-1].setAttribute("gap",24),n((t=e.Procedures.allProcedures(t))[0],"procedures_callnoreturn"),n(t[1],"procedures_callreturn"),o},e.Procedures.updateMutatorFlyout_=function(t){for(var p,n=[],o=t.getBlocksByType("procedures_mutatorarg",!1),r=0;p=o[r];r++)n.push(p.getFieldValue("NAME"));o=e.utils.xml.createElement("xml"),(r=e.utils.xml.createElement("block")).setAttribute("type","procedures_mutatorarg"),(p=e.utils.xml.createElement("field")).setAttribute("name","NAME"),n=e.Variables.generateUniqueNameFromOptions(e.Procedures.DEFAULT_ARG,n),n=e.utils.xml.createTextNode(n),p.appendChild(n),r.appendChild(p),o.appendChild(r),t.updateToolbox(o)},e.Procedures.mutatorOpenListener=function(t){if(t.type==e.Events.BUBBLE_OPEN&&"mutator"===t.bubbleType&&t.isOpen){var n=(t=e.Workspace.getById(t.workspaceId).getBlockById(t.blockId)).type;("procedures_defnoreturn"==n||"procedures_defreturn"==n)&&(t=t.mutator.getWorkspace(),e.Procedures.updateMutatorFlyout_(t),t.addChangeListener(e.Procedures.mutatorChangeListener_))}},e.Procedures.mutatorChangeListener_=function(t){(t.type==e.Events.BLOCK_CREATE||t.type==e.Events.BLOCK_DELETE||t.type==e.Events.BLOCK_CHANGE)&&(t=e.Workspace.getById(t.workspaceId),e.Procedures.updateMutatorFlyout_(t))},e.Procedures.getCallers=function(t,n){var o=[];n=n.getAllBlocks(!1);for(var r=0;r<n.length;r++)if(n[r].getProcedureCall){var p=n[r].getProcedureCall();p&&e.Names.equals(p,t)&&o.push(n[r])}return o},e.Procedures.mutateCallers=function(t){var p,n=e.Events.recordUndo,o=t.getProcedureDef()[0],r=t.mutationToDom(!0);for(t=e.Procedures.getCallers(o,t.workspace),o=0;p=t[o];o++){var b=p.mutationToDom();b=b&&e.Xml.domToText(b),p.domToMutation(r);var I=p.mutationToDom();b!=(I=I&&e.Xml.domToText(I))&&(e.Events.recordUndo=!1,e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(p,"mutation",null,b,I)),e.Events.recordUndo=n)}},e.Procedures.getDefinition=function(t,n){n=n.getAllBlocks(!1);for(var o=0;o<n.length;o++)if(n[o].getProcedureDef){var r=n[o].getProcedureDef();if(r&&e.Names.equals(r[0],t))return n[o]}return null},e.ShortcutRegistry=function(){e.ShortcutRegistry.registry=this,this.registry_=Object.create(null),this.keyMap_=Object.create(null)},e.ShortcutRegistry.modifierKeys={Shift:e.utils.KeyCodes.SHIFT,Control:e.utils.KeyCodes.CTRL,Alt:e.utils.KeyCodes.ALT,Meta:e.utils.KeyCodes.META},e.ShortcutRegistry.prototype.register=function(t,n){if(this.registry_[t.name]&&!n)throw Error('Shortcut with name "'+t.name+'" already exists.');this.registry_[t.name]=t},e.ShortcutRegistry.prototype.unregister=function(t){return this.registry_[t]?(this.removeAllKeyMappings(t),delete this.registry_[t],!0):(console.warn('Keyboard shortcut with name "'+t+'" not found.'),!1)},e.ShortcutRegistry.prototype.addKeyMapping=function(t,n,o){t=String(t);var r=this.keyMap_[t];if(r&&!o)throw Error('Shortcut with name "'+n+'" collides with shortcuts '+r.toString());r&&o?r.unshift(n):this.keyMap_[t]=[n]},e.ShortcutRegistry.prototype.removeKeyMapping=function(t,n,o){var r=this.keyMap_[t];if(!r&&!o)return console.warn('No keyboard shortcut with name "'+n+'" registered with key code "'+t+'"'),!1;var p=r.indexOf(n);return-1<p?(r.splice(p,1),0==r.length&&delete this.keyMap_[t],!0):(o||console.warn('No keyboard shortcut with name "'+n+'" registered with key code "'+t+'"'),!1)},e.ShortcutRegistry.prototype.removeAllKeyMappings=function(t){for(var n in this.keyMap_)this.removeKeyMapping(n,t,!0)},e.ShortcutRegistry.prototype.setKeyMap=function(t){this.keyMap_=t},e.ShortcutRegistry.prototype.getKeyMap=function(){return e.utils.object.deepMerge(Object.create(null),this.keyMap_)},e.ShortcutRegistry.prototype.getRegistry=function(){return e.utils.object.deepMerge(Object.create(null),this.registry_)},e.ShortcutRegistry.prototype.onKeyDown=function(t,n){var o=this.serializeKeyEvent_(n);if(!(o=this.getShortcutNamesByKeyCode(o)))return!1;for(var p,r=0;p=o[r];r++)if((!(p=this.registry_[p]).preconditionFn||p.preconditionFn(t))&&p.callback&&p.callback(t,n,p))return!0;return!1},e.ShortcutRegistry.prototype.getShortcutNamesByKeyCode=function(t){return this.keyMap_[t]||[]},e.ShortcutRegistry.prototype.getKeyCodesByShortcutName=function(t){var o,n=[];for(o in this.keyMap_)-1<this.keyMap_[o].indexOf(t)&&n.push(o);return n},e.ShortcutRegistry.prototype.serializeKeyEvent_=function(t){var o,n="";for(o in e.ShortcutRegistry.modifierKeys)t.getModifierState(o)&&(""!=n&&(n+="+"),n+=o);return""!=n&&t.keyCode?n=n+"+"+t.keyCode:t.keyCode&&(n=t.keyCode.toString()),n},e.ShortcutRegistry.prototype.checkModifiers_=function(t){for(var r,n=e.utils.object.values(e.ShortcutRegistry.modifierKeys),o=0;r=t[o];o++)if(0>n.indexOf(r))throw Error(r+" is not a valid modifier key.")},e.ShortcutRegistry.prototype.createSerializedKey=function(t,n){var o="";if(n)for(var r in this.checkModifiers_(n),e.ShortcutRegistry.modifierKeys)-1<n.indexOf(e.ShortcutRegistry.modifierKeys[r])&&(""!=o&&(o+="+"),o+=r);return""!=o&&t?o=o+"+"+t:t&&(o=t.toString()),o},new e.ShortcutRegistry,e.VariableModel=function(t,n,o,r){this.workspace=t,this.name=n,this.type=o||"",this.id_=r||e.utils.genUid(),e.Events.fire(new(e.Events.get(e.Events.VAR_CREATE))(this))},e.VariableModel.prototype.getId=function(){return this.id_},e.VariableModel.compareByName=function(t,n){return t.name.localeCompare(n.name,void 0,{sensitivity:"base"})},e.Variables={},e.Variables.NAME_TYPE=e.VARIABLE_CATEGORY_NAME,e.Variables.allUsedVarModels=function(t){var n=t.getAllBlocks(!1);t=Object.create(null);for(var o=0;o<n.length;o++){var r=n[o].getVarModels();if(r)for(var p=0;p<r.length;p++){var b=r[p],I=b.getId();I&&(t[I]=b)}}for(I in n=[],t)n.push(t[I]);return n},e.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_={},e.Variables.allDeveloperVariables=function(t){t=t.getAllBlocks(!1);for(var r,n=Object.create(null),o=0;r=t[o];o++){var p=r.getDeveloperVariables;if(!p&&r.getDeveloperVars&&(p=r.getDeveloperVars,e.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[r.type]||(console.warn("Function getDeveloperVars() deprecated. Use getDeveloperVariables() (block type '"+r.type+"')"),e.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[r.type]=!0)),p)for(r=p(),p=0;p<r.length;p++)n[r[p]]=!0}return Object.keys(n)},e.Variables.flyoutCategory=function(t){var n=[],o=document.createElement("button");return o.setAttribute("text","%{BKY_NEW_VARIABLE}"),o.setAttribute("callbackKey","CREATE_VARIABLE"),t.registerButtonCallback("CREATE_VARIABLE",function(r){e.Variables.createVariableButtonHandler(r.getTargetWorkspace())}),n.push(o),t=e.Variables.flyoutCategoryBlocks(t),n.concat(t)},e.Variables.flyoutCategoryBlocks=function(t){var n=[];if(0<(t=t.getVariablesOfType("")).length){var o=t[t.length-1];if(e.Blocks.variables_set){var r=e.utils.xml.createElement("block");r.setAttribute("type","variables_set"),r.setAttribute("gap",e.Blocks.math_change?8:24),r.appendChild(e.Variables.generateVariableFieldDom(o)),n.push(r)}if(e.Blocks.math_change&&((r=e.utils.xml.createElement("block")).setAttribute("type","math_change"),r.setAttribute("gap",e.Blocks.variables_get?20:8),r.appendChild(e.Variables.generateVariableFieldDom(o)),o=e.Xml.textToDom('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),r.appendChild(o),n.push(r)),e.Blocks.variables_get){t.sort(e.VariableModel.compareByName),o=0;for(var p;p=t[o];o++)(r=e.utils.xml.createElement("block")).setAttribute("type","variables_get"),r.setAttribute("gap",8),r.appendChild(e.Variables.generateVariableFieldDom(p)),n.push(r)}}return n},e.Variables.VAR_LETTER_OPTIONS="ijkmnopqrstuvwxyzabcdefgh",e.Variables.generateUniqueName=function(t){return e.Variables.generateUniqueNameFromOptions(e.Variables.VAR_LETTER_OPTIONS.charAt(0),t.getAllVariableNames())},e.Variables.generateUniqueNameFromOptions=function(t,n){if(!n.length)return t;for(var o=e.Variables.VAR_LETTER_OPTIONS,r="",p=o.indexOf(t);;){for(var b=!1,I=0;I<n.length;I++)if(n[I].toLowerCase()==t){b=!0;break}if(!b)return t;++p==o.length&&(p=0,r=Number(r)+1),t=o.charAt(p)+r}},e.Variables.createVariableButtonHandler=function(t,n,o){var r=o||"",p=function(b){e.Variables.promptName(e.Msg.NEW_VARIABLE_TITLE,b,function(I){if(I){var x=e.Variables.nameUsedWithAnyType(I,t);if(x){if(x.type==r)var k=e.Msg.VARIABLE_ALREADY_EXISTS.replace("%1",x.name);else k=(k=e.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE).replace("%1",x.name).replace("%2",x.type);e.alert(k,function(){p(I)})}else t.createVariable(I,r),n&&n(I)}else n&&n(null)})};p("")},e.Variables.createVariable=e.Variables.createVariableButtonHandler,e.Variables.renameVariable=function(t,n,o){var r=function(p){var b=e.Msg.RENAME_VARIABLE_TITLE.replace("%1",n.name);e.Variables.promptName(b,p,function(I){if(I){var x=e.Variables.nameUsedWithOtherType_(I,n.type,t);x?(x=e.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",x.name).replace("%2",x.type),e.alert(x,function(){r(I)})):(t.renameVariableById(n.getId(),I),o&&o(I))}else o&&o(null)})};r("")},e.Variables.promptName=function(t,n,o){e.prompt(t,n,function(r){r&&((r=r.replace(/[\s\xa0]+/g," ").trim())==e.Msg.RENAME_VARIABLE||r==e.Msg.NEW_VARIABLE)&&(r=null),o(r)})},e.Variables.nameUsedWithOtherType_=function(t,n,o){o=o.getVariableMap().getAllVariables(),t=t.toLowerCase();for(var p,r=0;p=o[r];r++)if(p.name.toLowerCase()==t&&p.type!=n)return p;return null},e.Variables.nameUsedWithAnyType=function(t,n){n=n.getVariableMap().getAllVariables(),t=t.toLowerCase();for(var r,o=0;r=n[o];o++)if(r.name.toLowerCase()==t)return r;return null},e.Variables.generateVariableFieldDom=function(t){var n=e.utils.xml.createElement("field");return n.setAttribute("name","VAR"),n.setAttribute("id",t.getId()),n.setAttribute("variabletype",t.type),t=e.utils.xml.createTextNode(t.name),n.appendChild(t),n},e.Variables.getOrCreateVariablePackage=function(t,n,o,r){var p=e.Variables.getVariable(t,n,o,r);return p||(p=e.Variables.createVariable_(t,n,o,r)),p},e.Variables.getVariable=function(t,n,o,r){var p=t.getPotentialVariableMap(),b=null;if(n&&(!(b=t.getVariableById(n))&&p&&(b=p.getVariableById(n)),b))return b;if(o){if(null==r)throw Error("Tried to look up a variable by name without a type");!(b=t.getVariable(o,r))&&p&&(b=p.getVariable(o,r))}return b},e.Variables.createVariable_=function(t,n,o,r){var p=t.getPotentialVariableMap();return o||(o=e.Variables.generateUniqueName(t.isFlyout?t.targetWorkspace:t)),p?p.createVariable(o,r,n):t.createVariable(o,r,n)},e.Variables.getAddedVariables=function(t,n){t=t.getAllVariables();var o=[];if(n.length!=t.length)for(var r=0;r<t.length;r++){var p=t[r];-1==n.indexOf(p)&&o.push(p)}return o},e.VERSION="6.20210701.0",e.mainWorkspace=null,e.selected=null,e.draggingConnections=[],e.clipboardXml_=null,e.clipboardSource_=null,e.clipboardTypeCounts_=null,e.cache3dSupported_=null,e.parentContainer=null,e.svgSize=function(t){return e.utils.deprecation.warn("Blockly.svgSize","March 2021","March 2022","workspace.getCachedParentSvgSize"),new e.utils.Size(t.cachedWidth_,t.cachedHeight_)},e.resizeSvgContents=function(t){t.resizeContents()},e.svgResize=function(t){for(;t.options.parentWorkspace;)t=t.options.parentWorkspace;var n=t.getParentSvg(),o=t.getCachedParentSvgSize(),r=n.parentNode;if(r){var p=r.offsetWidth;r=r.offsetHeight,o.width!=p&&(n.setAttribute("width",p+"px"),t.setCachedParentSvgSize(p,null)),o.height!=r&&(n.setAttribute("height",r+"px"),t.setCachedParentSvgSize(null,r)),t.resize()}},e.onKeyDown=function(t){var n=e.mainWorkspace;n&&!(e.utils.isTargetInput(t)||n.rendered&&!n.isVisible())&&e.ShortcutRegistry.registry.onKeyDown(n,t)},e.deleteBlock=function(t){t.workspace.isFlyout||(e.Events.setGroup(!0),e.hideChaff(),t.dispose(!t.outputConnection,!0),e.Events.setGroup(!1))},e.copy=function(t){(t=t.toCopyData())&&(e.clipboardXml_=t.xml,e.clipboardSource_=t.source,e.clipboardTypeCounts_=t.typeCounts)},e.paste=function(){if(!e.clipboardXml_)return!1;var t=e.clipboardSource_;return t.isFlyout&&(t=t.targetWorkspace),!(!e.clipboardTypeCounts_||!t.isCapacityAvailable(e.clipboardTypeCounts_)||(e.Events.setGroup(!0),t.paste(e.clipboardXml_),e.Events.setGroup(!1),0))},e.duplicate=function(t){var n=e.clipboardXml_,o=e.clipboardSource_;e.copy(t),t.workspace.paste(e.clipboardXml_),e.clipboardXml_=n,e.clipboardSource_=o},e.onContextMenu_=function(t){e.utils.isTargetInput(t)||t.preventDefault()},e.hideChaff=function(t){e.Tooltip.hide(),e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation();var n=!!t;e.getMainWorkspace().getComponentManager().getComponents(e.ComponentManager.Capability.AUTOHIDEABLE,!0).forEach(function(o){o.autoHide(n)})},e.getMainWorkspace=function(){return e.mainWorkspace},e.alert=function(t,n){alert(t),n&&n()},e.confirm=function(t,n){n(confirm(t))},e.prompt=function(t,n,o){o(prompt(t,n))},e.jsonInitFactory_=function(t){return function(){this.jsonInit(t)}},e.defineBlocksWithJsonArray=function(t){for(var n=0;n<t.length;n++){var o=t[n];if(o){var r=o.type;null==r||""===r?console.warn("Block definition #"+n+" in JSON array is missing a type attribute. Skipping."):(e.Blocks[r]&&console.warn("Block definition #"+n+' in JSON array overwrites prior definition of "'+r+'".'),e.Blocks[r]={init:e.jsonInitFactory_(o)})}else console.warn("Block definition #"+n+" in JSON array is "+o+". Skipping.")}},e.isNumber=function(t){return/^\s*-?\d+(\.\d+)?\s*$/.test(t)},e.hueToHex=function(t){return e.utils.colour.hsvToHex(t,e.HSV_SATURATION,255*e.HSV_VALUE)},e.checkBlockColourConstants=function(){e.checkBlockColourConstant_("LOGIC_HUE",["Blocks","logic","HUE"],void 0),e.checkBlockColourConstant_("LOGIC_HUE",["Constants","Logic","HUE"],210),e.checkBlockColourConstant_("LOOPS_HUE",["Blocks","loops","HUE"],void 0),e.checkBlockColourConstant_("LOOPS_HUE",["Constants","Loops","HUE"],120),e.checkBlockColourConstant_("MATH_HUE",["Blocks","math","HUE"],void 0),e.checkBlockColourConstant_("MATH_HUE",["Constants","Math","HUE"],230),e.checkBlockColourConstant_("TEXTS_HUE",["Blocks","texts","HUE"],void 0),e.checkBlockColourConstant_("TEXTS_HUE",["Constants","Text","HUE"],160),e.checkBlockColourConstant_("LISTS_HUE",["Blocks","lists","HUE"],void 0),e.checkBlockColourConstant_("LISTS_HUE",["Constants","Lists","HUE"],260),e.checkBlockColourConstant_("COLOUR_HUE",["Blocks","colour","HUE"],void 0),e.checkBlockColourConstant_("COLOUR_HUE",["Constants","Colour","HUE"],20),e.checkBlockColourConstant_("VARIABLES_HUE",["Blocks","variables","HUE"],void 0),e.checkBlockColourConstant_("VARIABLES_HUE",["Constants","Variables","HUE"],330),e.checkBlockColourConstant_("VARIABLES_DYNAMIC_HUE",["Constants","VariablesDynamic","HUE"],310),e.checkBlockColourConstant_("PROCEDURES_HUE",["Blocks","procedures","HUE"],void 0)},e.checkBlockColourConstant_=function(t,n,o){for(var r="Blockly",p=e,b=0;b<n.length;++b)r+="."+n[b],p&&(p=p[n[b]]);p&&p!==o&&(t=(void 0===o?'%1 has been removed. Use Blockly.Msg["%2"].':'%1 is deprecated and unused. Override Blockly.Msg["%2"].').replace("%1",r).replace("%2",t),console.warn(t))},e.setParentContainer=function(t){e.parentContainer=t},e.bindEvent_=e.browserEvents.bind,e.unbindEvent_=e.browserEvents.unbind,e.bindEventWithChecks_=e.browserEvents.conditionalBind,e.ALIGN_LEFT=e.constants.ALIGN.LEFT,e.ALIGN_CENTRE=e.constants.ALIGN.CENTRE,e.ALIGN_RIGHT=e.constants.ALIGN.RIGHT,e.INPUT_VALUE=e.connectionTypes.INPUT_VALUE,e.OUTPUT_VALUE=e.connectionTypes.OUTPUT_VALUE,e.NEXT_STATEMENT=e.connectionTypes.NEXT_STATEMENT,e.PREVIOUS_STATEMENT=e.connectionTypes.PREVIOUS_STATEMENT,e.DUMMY_INPUT=e.inputTypes.DUMMY,e.TOOLBOX_AT_TOP=e.utils.toolbox.Position.TOP,e.TOOLBOX_AT_BOTTOM=e.utils.toolbox.Position.BOTTOM,e.TOOLBOX_AT_LEFT=e.utils.toolbox.Position.LEFT,e.TOOLBOX_AT_RIGHT=e.utils.toolbox.Position.RIGHT,e.Events.BubbleOpen=function(t,n,o){e.Events.BubbleOpen.superClass_.constructor.call(this,t?t.workspace.id:void 0),this.blockId=t?t.id:null,this.isOpen=n,this.bubbleType=o},e.utils.object.inherits(e.Events.BubbleOpen,e.Events.UiBase),e.Events.BubbleOpen.prototype.type=e.Events.BUBBLE_OPEN,e.Events.BubbleOpen.prototype.toJson=function(){var t=e.Events.BubbleOpen.superClass_.toJson.call(this);return t.isOpen=this.isOpen,t.bubbleType=this.bubbleType,t.blockId=this.blockId,t},e.Events.BubbleOpen.prototype.fromJson=function(t){e.Events.BubbleOpen.superClass_.fromJson.call(this,t),this.isOpen=t.isOpen,this.bubbleType=t.bubbleType,this.blockId=t.blockId},e.registry.register(e.registry.Type.EVENT,e.Events.BUBBLE_OPEN,e.Events.BubbleOpen),e.Icon=function(t){this.block_=t,this.iconGroup_=null},e.Icon.prototype.collapseHidden=!0,e.Icon.prototype.SIZE=17,e.Icon.prototype.bubble_=null,e.Icon.prototype.iconXY_=null,e.Icon.prototype.createIcon=function(){this.iconGroup_||(this.iconGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyIconGroup"},null),this.block_.isInFlyout&&e.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly"),this.drawIcon_(this.iconGroup_),this.block_.getSvgRoot().appendChild(this.iconGroup_),e.browserEvents.conditionalBind(this.iconGroup_,"mouseup",this,this.iconClick_),this.updateEditable())},e.Icon.prototype.dispose=function(){e.utils.dom.removeNode(this.iconGroup_),this.iconGroup_=null,this.setVisible(!1),this.block_=null},e.Icon.prototype.updateEditable=function(){},e.Icon.prototype.isVisible=function(){return!!this.bubble_},e.Icon.prototype.iconClick_=function(t){this.block_.workspace.isDragging()||this.block_.isInFlyout||e.utils.isRightButton(t)||this.setVisible(!this.isVisible())},e.Icon.prototype.applyColour=function(){this.isVisible()&&this.bubble_.setColour(this.block_.style.colourPrimary)},e.Icon.prototype.setIconLocation=function(t){this.iconXY_=t,this.isVisible()&&this.bubble_.setAnchorLocation(t)},e.Icon.prototype.computeIconLocation=function(){var t=this.block_.getRelativeToSurfaceXY(),n=e.utils.getRelativeXY(this.iconGroup_);t=new e.utils.Coordinate(t.x+n.x+this.SIZE/2,t.y+n.y+this.SIZE/2),e.utils.Coordinate.equals(this.getIconLocation(),t)||this.setIconLocation(t)},e.Icon.prototype.getIconLocation=function(){return this.iconXY_},e.Icon.prototype.getCorrectedSize=function(){return new e.utils.Size(e.Icon.prototype.SIZE,e.Icon.prototype.SIZE-2)},e.Warning=function(t){e.Warning.superClass_.constructor.call(this,t),this.createIcon(),this.text_=Object.create(null)},e.utils.object.inherits(e.Warning,e.Icon),e.Warning.prototype.collapseHidden=!1,e.Warning.prototype.drawIcon_=function(t){e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},t),e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},t),e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},t)},e.Warning.prototype.setVisible=function(t){t!=this.isVisible()&&(e.Events.fire(new(e.Events.get(e.Events.BUBBLE_OPEN))(this.block_,t,"warning")),t?this.createBubble_():this.disposeBubble_())},e.Warning.prototype.createBubble_=function(){this.paragraphElement_=e.Bubble.textToDom(this.getText()),this.bubble_=e.Bubble.createNonEditableBubble(this.paragraphElement_,this.block_,this.iconXY_),this.applyColour()},e.Warning.prototype.disposeBubble_=function(){this.bubble_.dispose(),this.paragraphElement_=this.bubble_=null},e.Warning.prototype.setText=function(t,n){this.text_[n]!=t&&(t?this.text_[n]=t:delete this.text_[n],this.isVisible()&&(this.setVisible(!1),this.setVisible(!0)))},e.Warning.prototype.getText=function(){var n,t=[];for(n in this.text_)t.push(this.text_[n]);return t.join("\n")},e.Warning.prototype.dispose=function(){this.block_.warning=null,e.Icon.prototype.dispose.call(this)},e.Comment=function(t){e.Comment.superClass_.constructor.call(this,t),this.model_=t.commentModel,this.model_.text=this.model_.text||"",this.cachedText_="",this.onInputWrapper_=this.onChangeWrapper_=this.onWheelWrapper_=this.onMouseUpWrapper_=null,this.createIcon()},e.utils.object.inherits(e.Comment,e.Icon),e.Comment.prototype.drawIcon_=function(t){e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},t),e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},t),e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},t)},e.Comment.prototype.createEditor_=function(){this.foreignObject_=e.utils.dom.createSvgElement(e.utils.Svg.FOREIGNOBJECT,{x:e.Bubble.BORDER_WIDTH,y:e.Bubble.BORDER_WIDTH},null);var t=document.createElementNS(e.utils.dom.HTML_NS,"body");t.setAttribute("xmlns",e.utils.dom.HTML_NS),t.className="blocklyMinimalBody";var n=this.textarea_=document.createElementNS(e.utils.dom.HTML_NS,"textarea");return n.className="blocklyCommentTextarea",n.setAttribute("dir",this.block_.RTL?"RTL":"LTR"),n.value=this.model_.text,this.resizeTextarea_(),t.appendChild(n),this.foreignObject_.appendChild(t),this.onMouseUpWrapper_=e.browserEvents.conditionalBind(n,"mouseup",this,this.startEdit_,!0,!0),this.onWheelWrapper_=e.browserEvents.conditionalBind(n,"wheel",this,function(o){o.stopPropagation()}),this.onChangeWrapper_=e.browserEvents.conditionalBind(n,"change",this,function(o){this.cachedText_!=this.model_.text&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this.block_,"comment",null,this.cachedText_,this.model_.text))}),this.onInputWrapper_=e.browserEvents.conditionalBind(n,"input",this,function(o){this.model_.text=n.value}),setTimeout(n.focus.bind(n),0),this.foreignObject_},e.Comment.prototype.updateEditable=function(){e.Comment.superClass_.updateEditable.call(this),this.isVisible()&&(this.disposeBubble_(),this.createBubble_())},e.Comment.prototype.onBubbleResize_=function(){this.isVisible()&&(this.model_.size=this.bubble_.getBubbleSize(),this.resizeTextarea_())},e.Comment.prototype.resizeTextarea_=function(){var t=this.model_.size,n=2*e.Bubble.BORDER_WIDTH,o=t.width-n;t=t.height-n,this.foreignObject_.setAttribute("width",o),this.foreignObject_.setAttribute("height",t),this.textarea_.style.width=o-4+"px",this.textarea_.style.height=t-4+"px"},e.Comment.prototype.setVisible=function(t){t!=this.isVisible()&&(e.Events.fire(new(e.Events.get(e.Events.BUBBLE_OPEN))(this.block_,t,"comment")),(this.model_.pinned=t)?this.createBubble_():this.disposeBubble_())},e.Comment.prototype.createBubble_=function(){!this.block_.isEditable()||e.utils.userAgent.IE?this.createNonEditableBubble_():this.createEditableBubble_()},e.Comment.prototype.createEditableBubble_=function(){this.bubble_=new e.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,this.model_.size.width,this.model_.size.height),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerResizeEvent(this.onBubbleResize_.bind(this)),this.applyColour()},e.Comment.prototype.createNonEditableBubble_=function(){this.paragraphElement_=e.Bubble.textToDom(this.block_.getCommentText()),this.bubble_=e.Bubble.createNonEditableBubble(this.paragraphElement_,this.block_,this.iconXY_),this.applyColour()},e.Comment.prototype.disposeBubble_=function(){this.onMouseUpWrapper_&&(e.browserEvents.unbind(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onWheelWrapper_&&(e.browserEvents.unbind(this.onWheelWrapper_),this.onWheelWrapper_=null),this.onChangeWrapper_&&(e.browserEvents.unbind(this.onChangeWrapper_),this.onChangeWrapper_=null),this.onInputWrapper_&&(e.browserEvents.unbind(this.onInputWrapper_),this.onInputWrapper_=null),this.bubble_.dispose(),this.paragraphElement_=this.foreignObject_=this.textarea_=this.bubble_=null},e.Comment.prototype.startEdit_=function(t){this.bubble_.promote()&&this.textarea_.focus(),this.cachedText_=this.model_.text},e.Comment.prototype.getBubbleSize=function(){return this.model_.size},e.Comment.prototype.setBubbleSize=function(t,n){this.bubble_?this.bubble_.setBubbleSize(t,n):(this.model_.size.width=t,this.model_.size.height=n)},e.Comment.prototype.updateText=function(){this.textarea_?this.textarea_.value=this.model_.text:this.paragraphElement_&&(this.paragraphElement_.firstChild.textContent=this.model_.text)},e.Comment.prototype.dispose=function(){this.block_.comment=null,e.Icon.prototype.dispose.call(this)},e.Css.register(".blocklyCommentTextarea {,background-color: #fef49c;,border: 0;,outline: 0;,margin: 0;,padding: 3px;,resize: none;,display: block;,text-overflow: hidden;,}".split(",")),e.IComponent=function(){},e.IDragTarget=function(){},e.DragTarget=function(){},e.DragTarget.prototype.onDragEnter=function(t){},e.DragTarget.prototype.onDragOver=function(t){},e.DragTarget.prototype.onDragExit=function(t){},e.DragTarget.prototype.onDrop=function(t){},e.DragTarget.prototype.shouldPreventMove=function(t){return!1},e.IDeleteArea=function(){},e.DeleteArea=function(){e.DeleteArea.superClass_.constructor.call(this),this.wouldDelete_=!1},e.utils.object.inherits(e.DeleteArea,e.DragTarget),e.DeleteArea.prototype.wouldDelete=function(t,n){return t instanceof e.BlockSvg?(t=!t.getParent()&&t.isDeletable(),this.updateWouldDelete_(t&&!n)):this.updateWouldDelete_(t.isDeletable()),this.wouldDelete_},e.DeleteArea.prototype.updateWouldDelete_=function(t){this.wouldDelete_=t},e.IFlyout=function(){},e.Flyout=function(t){e.Flyout.superClass_.constructor.call(this),t.setMetrics=this.setMetrics_.bind(this),this.workspace_=new e.WorkspaceSvg(t),this.workspace_.setMetricsManager(new e.FlyoutMetricsManager(this.workspace_,this)),this.workspace_.isFlyout=!0,this.workspace_.setVisible(this.isVisible_),this.id=e.utils.genUid(),this.RTL=!!t.RTL,this.horizontalLayout=!1,this.toolboxPosition_=t.toolboxPosition,this.eventWrappers_=[],this.mats_=[],this.buttons_=[],this.listeners_=[],this.permanentlyDisabled_=[],this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.targetWorkspace=null},e.utils.object.inherits(e.Flyout,e.DeleteArea),e.Flyout.prototype.autoClose=!0,e.Flyout.prototype.isVisible_=!1,e.Flyout.prototype.containerVisible_=!0,e.Flyout.prototype.CORNER_RADIUS=8,e.Flyout.prototype.MARGIN=e.Flyout.prototype.CORNER_RADIUS,e.Flyout.prototype.GAP_X=3*e.Flyout.prototype.MARGIN,e.Flyout.prototype.GAP_Y=3*e.Flyout.prototype.MARGIN,e.Flyout.prototype.SCROLLBAR_MARGIN=2.5,e.Flyout.prototype.width_=0,e.Flyout.prototype.height_=0,e.Flyout.prototype.dragAngleRange_=70,e.Flyout.prototype.createDom=function(t){return this.svgGroup_=e.utils.dom.createSvgElement(t,{class:"blocklyFlyout",style:"display: none"},null),this.svgBackground_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_},e.Flyout.prototype.init=function(t){this.targetWorkspace=t,this.workspace_.targetWorkspace=t,this.workspace_.scrollbar=new e.ScrollbarPair(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),Array.prototype.push.apply(this.eventWrappers_,e.browserEvents.conditionalBind(this.svgGroup_,"wheel",this,this.wheel_)),this.autoClose||(this.filterWrapper_=this.filterForCapacity_.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper_)),Array.prototype.push.apply(this.eventWrappers_,e.browserEvents.conditionalBind(this.svgBackground_,"mousedown",this,this.onMouseDown_)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),t.getComponentManager().addComponent({component:this,weight:1,capabilities:[e.ComponentManager.Capability.DELETE_AREA,e.ComponentManager.Capability.DRAG_TARGET]})},e.Flyout.prototype.dispose=function(){this.hide(),this.workspace_.getComponentManager().removeComponent(this.id),e.browserEvents.unbind(this.eventWrappers_),this.filterWrapper_&&(this.targetWorkspace.removeChangeListener(this.filterWrapper_),this.filterWrapper_=null),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.targetWorkspace=null,this.workspace_.dispose(),this.workspace_=null),this.svgGroup_&&(e.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.targetWorkspace=this.svgBackground_=null},e.Flyout.prototype.getWidth=function(){return this.width_},e.Flyout.prototype.getHeight=function(){return this.height_},e.Flyout.prototype.getFlyoutScale=function(){return this.targetWorkspace.scale},e.Flyout.prototype.getWorkspace=function(){return this.workspace_},e.Flyout.prototype.isVisible=function(){return this.isVisible_},e.Flyout.prototype.setVisible=function(t){var n=t!=this.isVisible();this.isVisible_=t,n&&(this.autoClose||this.workspace_.recordDragTargets(),this.updateDisplay_())},e.Flyout.prototype.setContainerVisible=function(t){var n=t!=this.containerVisible_;this.containerVisible_=t,n&&this.updateDisplay_()},e.Flyout.prototype.updateDisplay_=function(){var t=!!this.containerVisible_&&this.isVisible();this.svgGroup_.style.display=t?"block":"none",this.workspace_.scrollbar.setContainerVisible(t)},e.Flyout.prototype.positionAt_=function(t,n,o,r){this.svgGroup_.setAttribute("width",t),this.svgGroup_.setAttribute("height",n),this.workspace_.setCachedParentSvgSize(t,n),"svg"==this.svgGroup_.tagName?e.utils.dom.setCssTransform(this.svgGroup_,"translate("+o+"px,"+r+"px)"):this.svgGroup_.setAttribute("transform","translate("+o+","+r+")"),(t=this.workspace_.scrollbar)&&(t.setOrigin(o,r),t.resize(),t.hScroll&&t.hScroll.setPosition(t.hScroll.position.x,t.hScroll.position.y),t.vScroll&&t.vScroll.setPosition(t.vScroll.position.x,t.vScroll.position.y))},e.Flyout.prototype.hide=function(){if(this.isVisible()){this.setVisible(!1);for(var n,t=0;n=this.listeners_[t];t++)e.browserEvents.unbind(n);this.listeners_.length=0,this.reflowWrapper_&&(this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowWrapper_=null)}},e.Flyout.prototype.show=function(t){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks_(),"string"==typeof t&&(t=this.getDynamicCategoryContents_(t)),this.setVisible(!0),t=e.utils.toolbox.convertFlyoutDefToJsonArray(t),t=this.createFlyoutInfo_(t),this.layout_(t.contents,t.gaps),this.listeners_.push(e.browserEvents.conditionalBind(this.svgBackground_,"mouseover",this,function(){for(var r,n=this.workspace_.getTopBlocks(!1),o=0;r=n[o];o++)r.removeSelect()})),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity_(),this.position(),this.reflowWrapper_=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper_)},e.Flyout.prototype.createFlyoutInfo_=function(t){var n=[],o=[];this.permanentlyDisabled_.length=0;for(var b,r=this.horizontalLayout?this.GAP_X:this.GAP_Y,p=0;b=t[p];p++)switch(b.custom&&(b=this.getDynamicCategoryContents_(b.custom),b=e.utils.toolbox.convertFlyoutDefToJsonArray(b),t.splice.apply(t,[p,1].concat(b)),b=t[p]),b.kind.toUpperCase()){case"BLOCK":var I=b,x=this.getBlockXml_(I);b=this.createBlock_(x),I=parseInt(I.gap||x.getAttribute("gap"),10),o.push(isNaN(I)?r:I),n.push({type:"block",block:b});break;case"SEP":this.addSeparatorGap_(b,o,r);break;case"LABEL":b=this.createButton_(b,!0),n.push({type:"button",button:b}),o.push(r);break;case"BUTTON":b=this.createButton_(b,!1),n.push({type:"button",button:b}),o.push(r)}return{contents:n,gaps:o}},e.Flyout.prototype.getDynamicCategoryContents_=function(t){if("function"!=typeof(t=this.workspace_.targetWorkspace.getToolboxCategoryCallback(t)))throw TypeError("Couldn't find a callback function when opening a toolbox category.");if(t=t(this.workspace_.targetWorkspace),!Array.isArray(t))throw new TypeError("Result of toolbox category callback must be an array.");return t},e.Flyout.prototype.createButton_=function(t,n){if(!e.FlyoutButton)throw Error("Missing require for Blockly.FlyoutButton");return new e.FlyoutButton(this.workspace_,this.targetWorkspace,t,n)},e.Flyout.prototype.createBlock_=function(t){return(t=e.Xml.domToBlock(t,this.workspace_)).isEnabled()||this.permanentlyDisabled_.push(t),t},e.Flyout.prototype.getBlockXml_=function(t){var n=null,o=t.blockxml;if(o&&"string"!=typeof o?n=o:o&&"string"==typeof o?(n=e.Xml.textToDom(o),t.blockxml=n):t.type&&((n=e.utils.xml.createElement("xml")).setAttribute("type",t.type),n.setAttribute("disabled",t.disabled),t.blockxml=n),!n)throw Error("Error: Invalid block definition. Block definition must have blockxml or type.");return n},e.Flyout.prototype.addSeparatorGap_=function(t,n,o){t=parseInt(t.gap,10),!isNaN(t)&&0<n.length?n[n.length-1]=t:n.push(o)},e.Flyout.prototype.clearOldBlocks_=function(){for(var o,t=this.workspace_.getTopBlocks(!1),n=0;o=t[n];n++)o.workspace==this.workspace_&&o.dispose(!1,!1);for(n=0;n<this.mats_.length;n++)(t=this.mats_[n])&&(e.Tooltip.unbindMouseEvents(t),e.utils.dom.removeNode(t));for(n=this.mats_.length=0;t=this.buttons_[n];n++)t.dispose();this.buttons_.length=0,this.workspace_.getPotentialVariableMap().clear()},e.Flyout.prototype.addBlockListeners_=function(t,n,o){this.listeners_.push(e.browserEvents.conditionalBind(t,"mousedown",null,this.blockMouseDown_(n))),this.listeners_.push(e.browserEvents.conditionalBind(o,"mousedown",null,this.blockMouseDown_(n))),this.listeners_.push(e.browserEvents.bind(t,"mouseenter",n,n.addSelect)),this.listeners_.push(e.browserEvents.bind(t,"mouseleave",n,n.removeSelect)),this.listeners_.push(e.browserEvents.bind(o,"mouseenter",n,n.addSelect)),this.listeners_.push(e.browserEvents.bind(o,"mouseleave",n,n.removeSelect))},e.Flyout.prototype.blockMouseDown_=function(t){var n=this;return function(o){var r=n.targetWorkspace.getGesture(o);r&&(r.setStartBlock(t),r.handleFlyoutStart(o,n))}},e.Flyout.prototype.onMouseDown_=function(t){var n=this.targetWorkspace.getGesture(t);n&&n.handleFlyoutStart(t,this)},e.Flyout.prototype.isBlockCreatable_=function(t){return t.isEnabled()},e.Flyout.prototype.createBlock=function(t){var n=null;e.Events.disable();var o=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{n=this.placeNewBlock_(t)}finally{e.Events.enable()}if(e.hideChaff(),t=e.Variables.getAddedVariables(this.targetWorkspace,o),e.Events.isEnabled()){for(e.Events.setGroup(!0),o=0;o<t.length;o++){var r=t[o];e.Events.fire(new(e.Events.get(e.Events.VAR_CREATE))(r))}e.Events.fire(new(e.Events.get(e.Events.BLOCK_CREATE))(n))}return this.autoClose?this.hide():this.filterForCapacity_(),n},e.Flyout.prototype.initFlyoutButton_=function(t,n,o){var r=t.createDom();t.moveTo(n,o),t.show(),this.listeners_.push(e.browserEvents.conditionalBind(r,"mousedown",this,this.onMouseDown_)),this.buttons_.push(t)},e.Flyout.prototype.createRect_=function(t,n,o,r,p){return(n=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{"fill-opacity":0,x:n,y:o,height:r.height,width:r.width},null)).tooltip=t,e.Tooltip.bindMouseEvents(n),this.workspace_.getCanvas().insertBefore(n,t.getSvgRoot()),t.flyoutRect_=n,this.mats_[p]=n},e.Flyout.prototype.moveRectToBlock_=function(t,n){var o=n.getHeightWidth();t.setAttribute("width",o.width),t.setAttribute("height",o.height),n=n.getRelativeToSurfaceXY(),t.setAttribute("y",n.y),t.setAttribute("x",this.RTL?n.x-o.width:n.x)},e.Flyout.prototype.filterForCapacity_=function(){for(var o,t=this.workspace_.getTopBlocks(!1),n=0;o=t[n];n++)if(-1==this.permanentlyDisabled_.indexOf(o))for(var r=this.targetWorkspace.isCapacityAvailable(e.utils.getBlockTypeCounts(o));o;)o.setEnabled(r),o=o.getNextBlock()},e.Flyout.prototype.reflow=function(){this.reflowWrapper_&&this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowInternal_(),this.reflowWrapper_&&this.workspace_.addChangeListener(this.reflowWrapper_)},e.Flyout.prototype.isScrollable=function(){return!!this.workspace_.scrollbar&&this.workspace_.scrollbar.isVisible()},e.Flyout.prototype.placeNewBlock_=function(t){var n=this.targetWorkspace;if(!t.getSvgRoot())throw Error("oldBlock is not rendered.");var o=e.Xml.blockToDom(t,!0);if(n.setResizesEnabled(!1),!(o=e.Xml.domToBlock(o,n)).getSvgRoot())throw Error("block is not rendered.");var r=n.getOriginOffsetInPixels(),p=this.workspace_.getOriginOffsetInPixels();return(t=t.getRelativeToSurfaceXY()).scale(this.workspace_.scale),t=e.utils.Coordinate.sum(p,t),(r=e.utils.Coordinate.difference(t,r)).scale(1/n.scale),o.moveBy(r.x,r.y),o},e.HorizontalFlyout=function(t){e.HorizontalFlyout.superClass_.constructor.call(this,t),this.horizontalLayout=!0},e.utils.object.inherits(e.HorizontalFlyout,e.Flyout),e.HorizontalFlyout.prototype.setMetrics_=function(t){if(this.isVisible()){var n=this.workspace_.getMetricsManager(),o=n.getScrollMetrics(),r=n.getViewMetrics();n=n.getAbsoluteMetrics(),"number"==typeof t.x&&(this.workspace_.scrollX=-(o.left+(o.width-r.width)*t.x)),this.workspace_.translate(this.workspace_.scrollX+n.left,this.workspace_.scrollY+n.top)}},e.HorizontalFlyout.prototype.getX=function(){return 0},e.HorizontalFlyout.prototype.getY=function(){if(!this.isVisible())return 0;var t=this.targetWorkspace.getMetricsManager(),n=t.getAbsoluteMetrics(),o=t.getViewMetrics();t=t.getToolboxMetrics();var r=this.toolboxPosition_==e.utils.toolbox.Position.TOP;return this.targetWorkspace.toolboxPosition==this.toolboxPosition_?this.targetWorkspace.getToolbox()?r?t.height:o.height-this.height_:r?0:o.height:r?0:o.height+n.top-this.height_},e.HorizontalFlyout.prototype.position=function(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var t=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=t.width,this.setBackgroundPath_(t.width-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),t=this.getX();var n=this.getY();this.positionAt_(this.width_,this.height_,t,n)}},e.HorizontalFlyout.prototype.setBackgroundPath_=function(t,n){var o=this.toolboxPosition_==e.utils.toolbox.Position.TOP,r=["M 0,"+(o?0:this.CORNER_RADIUS)];o?(r.push("h",t+2*this.CORNER_RADIUS),r.push("v",n),r.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),r.push("h",-t),r.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(r.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),r.push("h",t),r.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),r.push("v",n),r.push("h",-t-2*this.CORNER_RADIUS)),r.push("z"),this.svgBackground_.setAttribute("d",r.join(" "))},e.HorizontalFlyout.prototype.scrollToStart=function(){this.workspace_.scrollbar.setX(this.RTL?1/0:0)},e.HorizontalFlyout.prototype.wheel_=function(t){var n=e.utils.getScrollDeltaPixels(t);if(n=n.x||n.y){var o=this.workspace_.getMetricsManager(),r=o.getScrollMetrics();n=o.getViewMetrics().left-r.left+n,this.workspace_.scrollbar.setX(n),e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation()}t.preventDefault(),t.stopPropagation()},e.HorizontalFlyout.prototype.layout_=function(t,n){this.workspace_.scale=this.targetWorkspace.scale;var o=this.MARGIN,r=o+this.tabWidth_;this.RTL&&(t=t.reverse());for(var b,p=0;b=t[p];p++)if("block"==b.type){for(var k,I=(b=b.block).getDescendants(!1),x=0;k=I[x];x++)k.isInFlyout=!0;b.render(),I=b.getSvgRoot(),x=b.getHeightWidth(),k=b.outputConnection?this.tabWidth_:0,b.moveBy(k=this.RTL?r+x.width:r-k,o),k=this.createRect_(b,k,o,x,p),r+=x.width+n[p],this.addBlockListeners_(I,b,k)}else"button"==b.type&&(this.initFlyoutButton_(b.button,r,o),r+=b.button.width+n[p])},e.HorizontalFlyout.prototype.isDragTowardWorkspace=function(t){t=Math.atan2(t.y,t.x)/Math.PI*180;var n=this.dragAngleRange_;return t<90+n&&t>90-n||t>-90-n&&t<-90+n},e.HorizontalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;var t=this.svgGroup_.getBoundingClientRect(),n=t.top;return this.toolboxPosition_==e.utils.toolbox.Position.TOP?new e.utils.Rect(-1e9,n+t.height,-1e9,1e9):new e.utils.Rect(n,1e9,-1e9,1e9)},e.HorizontalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.getFlyoutScale();for(var r,t=0,n=this.workspace_.getTopBlocks(!1),o=0;r=n[o];o++)t=Math.max(t,r.getHeightWidth().height);if(t+=1.5*this.MARGIN,t*=this.workspace_.scale,this.height_!=(t+=e.Scrollbar.scrollbarThickness)){for(o=0;r=n[o];o++)r.flyoutRect_&&this.moveRectToBlock_(r.flyoutRect_,r);this.targetWorkspace.toolboxPosition!=this.toolboxPosition_||this.toolboxPosition_!=e.utils.toolbox.Position.TOP||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+t),this.height_=t,this.position(),this.targetWorkspace.recordDragTargets()}},e.registry.register(e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,e.registry.DEFAULT,e.HorizontalFlyout),e.VerticalFlyout=function(t){e.VerticalFlyout.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.VerticalFlyout,e.Flyout),e.VerticalFlyout.registryName="verticalFlyout",e.VerticalFlyout.prototype.setMetrics_=function(t){if(this.isVisible()){var n=this.workspace_.getMetricsManager(),o=n.getScrollMetrics(),r=n.getViewMetrics();n=n.getAbsoluteMetrics(),"number"==typeof t.y&&(this.workspace_.scrollY=-(o.top+(o.height-r.height)*t.y)),this.workspace_.translate(this.workspace_.scrollX+n.left,this.workspace_.scrollY+n.top)}},e.VerticalFlyout.prototype.getX=function(){if(!this.isVisible())return 0;var t=this.targetWorkspace.getMetricsManager(),n=t.getAbsoluteMetrics(),o=t.getViewMetrics();return t=t.getToolboxMetrics(),this.targetWorkspace.toolboxPosition==this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_==e.utils.toolbox.Position.LEFT?t.width:o.width-this.width_:this.toolboxPosition_==e.utils.toolbox.Position.LEFT?0:o.width:this.toolboxPosition_==e.utils.toolbox.Position.LEFT?0:o.width+n.left-this.width_},e.VerticalFlyout.prototype.getY=function(){return 0},e.VerticalFlyout.prototype.position=function(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var t=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=t.height,this.setBackgroundPath_(this.width_-this.CORNER_RADIUS,t.height-2*this.CORNER_RADIUS),t=this.getX();var n=this.getY();this.positionAt_(this.width_,this.height_,t,n)}},e.VerticalFlyout.prototype.setBackgroundPath_=function(t,n){var o=this.toolboxPosition_==e.utils.toolbox.Position.RIGHT,r=t+this.CORNER_RADIUS;(r=["M "+(o?r:0)+",0"]).push("h",o?-t:t),r.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,o?0:1,o?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),r.push("v",Math.max(0,n)),r.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,o?0:1,o?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),r.push("h",o?t:-t),r.push("z"),this.svgBackground_.setAttribute("d",r.join(" "))},e.VerticalFlyout.prototype.scrollToStart=function(){this.workspace_.scrollbar.setY(0)},e.VerticalFlyout.prototype.wheel_=function(t){var n=e.utils.getScrollDeltaPixels(t);if(n.y){var o=this.workspace_.getMetricsManager(),r=o.getScrollMetrics();n=o.getViewMetrics().top-r.top+n.y,this.workspace_.scrollbar.setY(n),e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation()}t.preventDefault(),t.stopPropagation()},e.VerticalFlyout.prototype.layout_=function(t,n){this.workspace_.scale=this.targetWorkspace.scale;for(var b,o=this.MARGIN,r=this.RTL?o:o+this.tabWidth_,p=0;b=t[p];p++)if("block"==b.type){for(var k,I=(b=b.block).getDescendants(!1),x=0;k=I[x];x++)k.isInFlyout=!0;b.render(),I=b.getSvgRoot(),x=b.getHeightWidth(),b.moveBy(k=b.outputConnection?r-this.tabWidth_:r,o),k=this.createRect_(b,this.RTL?k-x.width:k,o,x,p),this.addBlockListeners_(I,b,k),o+=x.height+n[p]}else"button"==b.type&&(this.initFlyoutButton_(b.button,r,o),o+=b.button.height+n[p])},e.VerticalFlyout.prototype.isDragTowardWorkspace=function(t){t=Math.atan2(t.y,t.x)/Math.PI*180;var n=this.dragAngleRange_;return t<n&&t>-n||t<-180+n||t>180-n},e.VerticalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;var t=this.svgGroup_.getBoundingClientRect(),n=t.left;return this.toolboxPosition_==e.utils.toolbox.Position.LEFT?new e.utils.Rect(-1e9,1e9,-1e9,n+t.width):new e.utils.Rect(-1e9,1e9,n,1e9)},e.VerticalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.getFlyoutScale();for(var r,t=0,n=this.workspace_.getTopBlocks(!1),o=0;r=n[o];o++){var p=r.getHeightWidth().width;r.outputConnection&&(p-=this.tabWidth_),t=Math.max(t,p)}for(o=0;r=this.buttons_[o];o++)t=Math.max(t,r.width);if(t+=1.5*this.MARGIN+this.tabWidth_,t*=this.workspace_.scale,this.width_!=(t+=e.Scrollbar.scrollbarThickness)){for(o=0;r=n[o];o++){if(this.RTL){p=r.getRelativeToSurfaceXY().x;var b=t/this.workspace_.scale-this.MARGIN;r.outputConnection||(b-=this.tabWidth_),r.moveBy(b-p,0)}r.flyoutRect_&&this.moveRectToBlock_(r.flyoutRect_,r)}if(this.RTL)for(o=0;r=this.buttons_[o];o++)n=r.getPosition().y,r.moveTo(t/this.workspace_.scale-r.width-this.MARGIN-this.tabWidth_,n);this.targetWorkspace.toolboxPosition!=this.toolboxPosition_||this.toolboxPosition_!=e.utils.toolbox.Position.LEFT||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX+t,this.targetWorkspace.scrollY),this.width_=t,this.position(),this.targetWorkspace.recordDragTargets()}},e.registry.register(e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,e.registry.DEFAULT,e.VerticalFlyout),e.FlyoutButton=function(t,n,o,r){this.workspace_=t,this.targetWorkspace_=n,this.text_=o.text,this.position_=new e.utils.Coordinate(0,0),this.isLabel_=r,this.callbackKey_=o.callbackKey||o.callbackkey,this.cssClass_=o["web-class"]||null,this.onMouseUpWrapper_=null,this.info=o},e.FlyoutButton.MARGIN_X=5,e.FlyoutButton.MARGIN_Y=2,e.FlyoutButton.prototype.width=0,e.FlyoutButton.prototype.height=0,e.FlyoutButton.prototype.createDom=function(){var t=this.isLabel_?"blocklyFlyoutLabel":"blocklyFlyoutButton";if(this.cssClass_&&(t+=" "+this.cssClass_),this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:t},this.workspace_.getCanvas()),!this.isLabel_)var n=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyFlyoutButtonShadow",rx:4,ry:4,x:1,y:1},this.svgGroup_);t=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:this.isLabel_?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:4,ry:4},this.svgGroup_);var o=e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:this.isLabel_?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup_),r=e.utils.replaceMessageReferences(this.text_);this.workspace_.RTL&&(r+="\u200f"),o.textContent=r,this.isLabel_&&(this.svgText_=o,this.workspace_.getThemeManager().subscribe(this.svgText_,"flyoutForegroundColour","fill"));var p=e.utils.style.getComputedStyle(o,"fontSize"),b=e.utils.style.getComputedStyle(o,"fontWeight"),I=e.utils.style.getComputedStyle(o,"fontFamily");return this.width=e.utils.dom.getFastTextWidthWithSizeString(o,p,b,I),r=e.utils.dom.measureFontMetrics(r,p,b,I),this.height=r.height,this.isLabel_||(this.width+=2*e.FlyoutButton.MARGIN_X,this.height+=2*e.FlyoutButton.MARGIN_Y,n.setAttribute("width",this.width),n.setAttribute("height",this.height)),t.setAttribute("width",this.width),t.setAttribute("height",this.height),o.setAttribute("x",this.width/2),o.setAttribute("y",this.height/2-r.height/2+r.baseline),this.updateTransform_(),this.onMouseUpWrapper_=e.browserEvents.conditionalBind(this.svgGroup_,"mouseup",this,this.onMouseUp_),this.svgGroup_},e.FlyoutButton.prototype.show=function(){this.updateTransform_(),this.svgGroup_.setAttribute("display","block")},e.FlyoutButton.prototype.updateTransform_=function(){this.svgGroup_.setAttribute("transform","translate("+this.position_.x+","+this.position_.y+")")},e.FlyoutButton.prototype.moveTo=function(t,n){this.position_.x=t,this.position_.y=n,this.updateTransform_()},e.FlyoutButton.prototype.isLabel=function(){return this.isLabel_},e.FlyoutButton.prototype.getPosition=function(){return this.position_},e.FlyoutButton.prototype.getButtonText=function(){return this.text_},e.FlyoutButton.prototype.getTargetWorkspace=function(){return this.targetWorkspace_},e.FlyoutButton.prototype.dispose=function(){this.onMouseUpWrapper_&&e.browserEvents.unbind(this.onMouseUpWrapper_),this.svgGroup_&&e.utils.dom.removeNode(this.svgGroup_),this.svgText_&&this.workspace_.getThemeManager().unsubscribe(this.svgText_)},e.FlyoutButton.prototype.onMouseUp_=function(t){(t=this.targetWorkspace_.getGesture(t))&&t.cancel(),this.isLabel_&&this.callbackKey_?console.warn("Labels should not have callbacks. Label text: "+this.text_):this.isLabel_||this.callbackKey_&&this.targetWorkspace_.getButtonCallback(this.callbackKey_)?this.isLabel_||this.targetWorkspace_.getButtonCallback(this.callbackKey_)(this):console.warn("Buttons should have callbacks. Button text: "+this.text_)},e.Css.register(".blocklyFlyoutButton {,fill: #888;,cursor: default;,},.blocklyFlyoutButtonShadow {,fill: #666;,},.blocklyFlyoutButton:hover {,fill: #aaa;,},.blocklyFlyoutLabel {,cursor: default;,},.blocklyFlyoutLabelBackground {,opacity: 0;,}".split(",")),e.Generator=function(t){this.name_=t,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")},e.Generator.prototype.INFINITE_LOOP_TRAP=null,e.Generator.prototype.STATEMENT_PREFIX=null,e.Generator.prototype.STATEMENT_SUFFIX=null,e.Generator.prototype.INDENT="  ",e.Generator.prototype.COMMENT_WRAP=60,e.Generator.prototype.ORDER_OVERRIDES=[],e.Generator.prototype.isInitialized=null,e.Generator.prototype.workspaceToCode=function(t){t||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),t=e.getMainWorkspace());var n=[];this.init(t),t=t.getTopBlocks(!0);for(var r,o=0;r=t[o];o++){var p=this.blockToCode(r);Array.isArray(p)&&(p=p[0]),p&&(r.outputConnection&&(p=this.scrubNakedValue(p),this.STATEMENT_PREFIX&&!r.suppressPrefixSuffix&&(p=this.injectId(this.STATEMENT_PREFIX,r)+p),this.STATEMENT_SUFFIX&&!r.suppressPrefixSuffix&&(p+=this.injectId(this.STATEMENT_SUFFIX,r))),n.push(p))}return n=n.join("\n"),(n=(n=(n=this.finish(n)).replace(/^\s+\n/,"")).replace(/\n\s+$/,"\n")).replace(/[ \t]+\n/g,"\n")},e.Generator.prototype.prefixLines=function(t,n){return n+t.replace(/(?!\n$)\n/g,"\n"+n)},e.Generator.prototype.allNestedComments=function(t){var n=[];t=t.getDescendants(!0);for(var o=0;o<t.length;o++){var r=t[o].getCommentText();r&&n.push(r)}return n.length&&n.push(""),n.join("\n")},e.Generator.prototype.blockToCode=function(t,n){if(!1===this.isInitialized&&console.warn("Generator init was not called before blockToCode was called."),!t)return"";if(!t.isEnabled())return n?"":this.blockToCode(t.getNextBlock());if(t.isInsertionMarker())return n?"":this.blockToCode(t.getChildren(!1)[0]);var o=this[t.type];if("function"!=typeof o)throw Error('Language "'+this.name_+'" does not know how to generate code for block type "'+t.type+'".');if(o=o.call(t,t),Array.isArray(o)){if(!t.outputConnection)throw TypeError("Expecting string from statement block: "+t.type);return[this.scrub_(t,o[0],n),o[1]]}if("string"==typeof o)return this.STATEMENT_PREFIX&&!t.suppressPrefixSuffix&&(o=this.injectId(this.STATEMENT_PREFIX,t)+o),this.STATEMENT_SUFFIX&&!t.suppressPrefixSuffix&&(o+=this.injectId(this.STATEMENT_SUFFIX,t)),this.scrub_(t,o,n);if(null===o)return"";throw SyntaxError("Invalid code generated: "+o)},e.Generator.prototype.valueToCode=function(t,n,o){if(isNaN(o))throw TypeError("Expecting valid order from block: "+t.type);var r=t.getInputTargetBlock(n);if(!r||""===(n=this.blockToCode(r)))return"";if(!Array.isArray(n))throw TypeError("Expecting tuple from value block: "+r.type);if(t=n[0],n=n[1],isNaN(n))throw TypeError("Expecting valid order from value block: "+r.type);if(!t)return"";r=!1;var p=Math.floor(o),b=Math.floor(n);if(p<=b&&(p!=b||0!=p&&99!=p))for(r=!0,p=0;p<this.ORDER_OVERRIDES.length;p++)if(this.ORDER_OVERRIDES[p][0]==o&&this.ORDER_OVERRIDES[p][1]==n){r=!1;break}return r&&(t="("+t+")"),t},e.Generator.prototype.statementToCode=function(t,n){if(t=t.getInputTargetBlock(n),"string"!=typeof(n=this.blockToCode(t)))throw TypeError("Expecting code from statement block: "+(t&&t.type));return n&&(n=this.prefixLines(n,this.INDENT)),n},e.Generator.prototype.addLoopTrap=function(t,n){return this.INFINITE_LOOP_TRAP&&(t=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,n),this.INDENT)+t),this.STATEMENT_SUFFIX&&!n.suppressPrefixSuffix&&(t=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,n),this.INDENT)+t),this.STATEMENT_PREFIX&&!n.suppressPrefixSuffix&&(t+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,n),this.INDENT)),t},e.Generator.prototype.injectId=function(t,n){return n=n.id.replace(/\$/g,"$$$$"),t.replace(/%1/g,"'"+n+"'")},e.Generator.prototype.RESERVED_WORDS_="",e.Generator.prototype.addReservedWords=function(t){this.RESERVED_WORDS_+=t+","},e.Generator.prototype.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",Object.defineProperty(e.Generator.prototype,"variableDB_",{get:function(){return e.utils.deprecation.warn("variableDB_","May 2021","May 2026","nameDB_"),this.nameDB_},set:function(t){e.utils.deprecation.warn("variableDB_","May 2021","May 2026","nameDB_"),this.nameDB_=t}}),e.Generator.prototype.provideFunction_=function(t,n){if(!this.definitions_[t]){var r,o=this.nameDB_.getDistinctName(t,e.PROCEDURE_CATEGORY_NAME);for(this.functionNames_[t]=o,n=n.join("\n").replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,o);r!=n;)r=n,n=n.replace(/^(( {2})*) {2}/gm,"$1\0");n=n.replace(/\0/g,this.INDENT),this.definitions_[t]=n}return this.functionNames_[t]},e.Generator.prototype.init=function(t){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)},e.Generator.prototype.scrub_=function(t,n,o){return n},e.Generator.prototype.finish=function(t){return delete this.definitions_,delete this.functionNames_,t},e.Generator.prototype.scrubNakedValue=function(t){return t},e.IToolboxItem=function(){},e.ISelectableToolboxItem=function(){},e.ICollapsibleToolboxItem=function(){},e.ToolboxItem=function(t,n,o){this.id_=t.toolboxitemid||e.utils.IdGenerator.getNextUniqueId(),this.level_=(this.parent_=o||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=t,this.parentToolbox_=n,this.workspace_=this.parentToolbox_.getWorkspace()},e.ToolboxItem.prototype.init=function(){},e.ToolboxItem.prototype.getDiv=function(){return null},e.ToolboxItem.prototype.getId=function(){return this.id_},e.ToolboxItem.prototype.getParent=function(){return null},e.ToolboxItem.prototype.getLevel=function(){return this.level_},e.ToolboxItem.prototype.isSelectable=function(){return!1},e.ToolboxItem.prototype.isCollapsible=function(){return!1},e.ToolboxItem.prototype.dispose=function(){},e.ToolboxCategory=function(t,n,o){e.ToolboxCategory.superClass_.constructor.call(this,t,n,o),this.name_=e.utils.replaceMessageReferences(t.name),this.colour_=this.getColour_(t),this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.cssConfig_=this.makeDefaultCssConfig_(),e.utils.object.mixin(this.cssConfig_,t.cssconfig||t.cssConfig),this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.parseContents_(t)},e.utils.object.inherits(e.ToolboxCategory,e.ToolboxItem),e.ToolboxCategory.registrationName="category",e.ToolboxCategory.nestedPadding=19,e.ToolboxCategory.borderWidth=8,e.ToolboxCategory.defaultBackgroundColour="#57e",e.ToolboxCategory.prototype.makeDefaultCssConfig_=function(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}},e.ToolboxCategory.prototype.parseContents_=function(t){var n=t.contents;if(t.custom)this.flyoutItems_=t.custom;else if(n){t=0;for(var o;o=n[t];t++)this.flyoutItems_.push(o)}},e.ToolboxCategory.prototype.init=function(){this.createDom_(),"true"==this.toolboxItemDef_.hidden&&this.hide()},e.ToolboxCategory.prototype.createDom_=function(){return this.htmlDiv_=this.createContainer_(),e.utils.aria.setRole(this.htmlDiv_,e.utils.aria.Role.TREEITEM),e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.SELECTED,!1),e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.LEVEL,this.level_),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),e.utils.aria.setRole(this.iconDom_,e.utils.aria.Role.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_),e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.LABELLEDBY,this.labelDom_.getAttribute("id")),this.addColourBorder_(this.colour_),this.htmlDiv_},e.ToolboxCategory.prototype.createContainer_=function(){var t=document.createElement("div");return e.utils.dom.addClass(t,this.cssConfig_.container),t},e.ToolboxCategory.prototype.createRowContainer_=function(){var t=document.createElement("div");e.utils.dom.addClass(t,this.cssConfig_.row);var n=e.ToolboxCategory.nestedPadding*this.getLevel();return n=n.toString()+"px",this.workspace_.RTL?t.style.paddingRight=n:t.style.paddingLeft=n,t},e.ToolboxCategory.prototype.createRowContentsContainer_=function(){var t=document.createElement("div");return e.utils.dom.addClass(t,this.cssConfig_.rowcontentcontainer),t},e.ToolboxCategory.prototype.createIconDom_=function(){var t=document.createElement("span");return this.parentToolbox_.isHorizontal()||e.utils.dom.addClass(t,this.cssConfig_.icon),t.style.display="inline-block",t},e.ToolboxCategory.prototype.createLabelDom_=function(t){var n=document.createElement("span");return n.setAttribute("id",this.getId()+".label"),n.textContent=t,e.utils.dom.addClass(n,this.cssConfig_.label),n},e.ToolboxCategory.prototype.refreshTheme=function(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)},e.ToolboxCategory.prototype.addColourBorder_=function(t){t&&(t=e.ToolboxCategory.borderWidth+"px solid "+(t||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=t:this.rowDiv_.style.borderLeft=t)},e.ToolboxCategory.prototype.getColour_=function(t){var n=t.categorystyle||t.categoryStyle;return(t=t.colour)&&n?(console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour'),""):n?this.getColourfromStyle_(n):this.parseColour_(t)},e.ToolboxCategory.prototype.getColourfromStyle_=function(t){var n=this.workspace_.getTheme();if(t&&n){if((n=n.categoryStyles[t])&&n.colour)return this.parseColour_(n.colour);console.warn('Style "'+t+'" must exist and contain a colour value')}return""},e.ToolboxCategory.prototype.getClickTarget=function(){return this.rowDiv_},e.ToolboxCategory.prototype.parseColour_=function(t){if(null==(t=e.utils.replaceMessageReferences(t))||""===t)return"";var n=Number(t);return isNaN(n)?(n=e.utils.colour.parse(t))?n:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+t),""):e.hueToHex(n)},e.ToolboxCategory.prototype.openIcon_=function(t){t&&(e.utils.dom.removeClasses(t,this.cssConfig_.closedicon),e.utils.dom.addClass(t,this.cssConfig_.openicon))},e.ToolboxCategory.prototype.closeIcon_=function(t){t&&(e.utils.dom.removeClasses(t,this.cssConfig_.openicon),e.utils.dom.addClass(t,this.cssConfig_.closedicon))},e.ToolboxCategory.prototype.setVisible_=function(t){this.htmlDiv_.style.display=t?"block":"none",this.isHidden_=!t,this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()},e.ToolboxCategory.prototype.hide=function(){this.setVisible_(!1)},e.ToolboxCategory.prototype.show=function(){this.setVisible_(!0)},e.ToolboxCategory.prototype.isVisible=function(){return!this.isHidden_&&this.allAncestorsExpanded_()},e.ToolboxCategory.prototype.allAncestorsExpanded_=function(){for(var t=this;t.getParent();)if(!(t=t.getParent()).isExpanded())return!1;return!0},e.ToolboxCategory.prototype.isSelectable=function(){return this.isVisible()&&!this.isDisabled_},e.ToolboxCategory.prototype.onClick=function(t){},e.ToolboxCategory.prototype.setSelected=function(t){if(t){var n=this.parseColour_(e.ToolboxCategory.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||n,e.utils.dom.addClass(this.rowDiv_,this.cssConfig_.selected)}else this.rowDiv_.style.backgroundColor="",e.utils.dom.removeClass(this.rowDiv_,this.cssConfig_.selected);e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.SELECTED,t)},e.ToolboxCategory.prototype.setDisabled=function(t){this.isDisabled_=t,this.getDiv().setAttribute("disabled",t),t?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")},e.ToolboxCategory.prototype.getName=function(){return this.name_},e.ToolboxCategory.prototype.getParent=function(){return this.parent_},e.ToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},e.ToolboxCategory.prototype.getContents=function(){return this.flyoutItems_},e.ToolboxCategory.prototype.updateFlyoutContents=function(t){this.flyoutItems_=[],"string"==typeof t?this.toolboxItemDef_.custom=t:(delete this.toolboxItemDef_.custom,this.toolboxItemDef_.contents=e.utils.toolbox.convertFlyoutDefToJsonArray(t)),this.parseContents_(this.toolboxItemDef_)},e.ToolboxCategory.prototype.dispose=function(){e.utils.dom.removeNode(this.htmlDiv_)},e.Css.register([".blocklyTreeRow:not(.blocklyTreeSelected):hover {","background-color: rgba(255, 255, 255, 0.2);","}",'.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {',"margin: 1px 5px 1px 0;","}",'.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {',"margin: 1px 0 1px 5px;","}",".blocklyTreeRow {","height: 22px;","line-height: 22px;","margin-bottom: 3px;","padding-right: 8px;","white-space: nowrap;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {',"margin-left: 8px;","padding-right: 0px","}",".blocklyTreeIcon {","background-image: url(<<<PATH>>>/sprites.png);","height: 16px;","vertical-align: middle;","visibility: hidden;","width: 16px;","}",".blocklyTreeIconClosed {","background-position: -32px -1px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {',"background-position: 0 -1px;","}",".blocklyTreeSelected>.blocklyTreeIconClosed {","background-position: -32px -17px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {',"background-position: 0 -17px;","}",".blocklyTreeIconOpen {","background-position: -16px -1px;","}",".blocklyTreeSelected>.blocklyTreeIconOpen {","background-position: -16px -17px;","}",".blocklyTreeLabel {","cursor: default;","font: 16px sans-serif;","padding: 0 3px;","vertical-align: middle;","}",".blocklyToolboxDelete .blocklyTreeLabel {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyTreeSelected .blocklyTreeLabel {","color: #fff;","}"]),e.registry.register(e.registry.Type.TOOLBOX_ITEM,e.ToolboxCategory.registrationName,e.ToolboxCategory),e.ToolboxSeparator=function(t,n){e.ToolboxSeparator.superClass_.constructor.call(this,t,n),this.cssConfig_={container:"blocklyTreeSeparator"},e.utils.object.mixin(this.cssConfig_,t.cssconfig||t.cssConfig)},e.utils.object.inherits(e.ToolboxSeparator,e.ToolboxItem),e.ToolboxSeparator.registrationName="sep",e.ToolboxSeparator.prototype.init=function(){this.createDom_()},e.ToolboxSeparator.prototype.createDom_=function(){var t=document.createElement("div");return e.utils.dom.addClass(t,this.cssConfig_.container),this.htmlDiv_=t},e.ToolboxSeparator.prototype.getDiv=function(){return this.htmlDiv_},e.ToolboxSeparator.prototype.dispose=function(){e.utils.dom.removeNode(this.htmlDiv_)},e.Css.register('.blocklyTreeSeparator {,border-bottom: solid #e5e5e5 1px;,height: 0;,margin: 5px 0;,},.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {,border-right: solid #e5e5e5 1px;,border-bottom: none;,height: auto;,margin: 0 5px 0 5px;,padding: 5px 0;,width: 0;,}'.split(",")),e.registry.register(e.registry.Type.TOOLBOX_ITEM,e.ToolboxSeparator.registrationName,e.ToolboxSeparator),e.CollapsibleToolboxCategory=function(t,n,o){this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[],e.CollapsibleToolboxCategory.superClass_.constructor.call(this,t,n,o)},e.utils.object.inherits(e.CollapsibleToolboxCategory,e.ToolboxCategory),e.CollapsibleToolboxCategory.registrationName="collapsibleCategory",e.CollapsibleToolboxCategory.prototype.makeDefaultCssConfig_=function(){var t=e.CollapsibleToolboxCategory.superClass_.makeDefaultCssConfig_.call(this);return t.contents="blocklyToolboxContents",t},e.CollapsibleToolboxCategory.prototype.parseContents_=function(t){var n=t.contents,o=!0;if(t.custom)this.flyoutItems_=t.custom;else if(n){t=0;for(var r;r=n[t];t++)!e.registry.hasItem(e.registry.Type.TOOLBOX_ITEM,r.kind)||r.kind.toLowerCase()==e.ToolboxSeparator.registrationName&&o?(this.flyoutItems_.push(r),o=!0):(this.createToolboxItem_(r),o=!1)}},e.CollapsibleToolboxCategory.prototype.createToolboxItem_=function(t){var n=t.kind;"CATEGORY"==n.toUpperCase()&&e.utils.toolbox.isCategoryCollapsible(t)&&(n=e.CollapsibleToolboxCategory.registrationName),t=new(e.registry.getClass(e.registry.Type.TOOLBOX_ITEM,n))(t,this.parentToolbox_,this),this.toolboxItems_.push(t)},e.CollapsibleToolboxCategory.prototype.init=function(){e.CollapsibleToolboxCategory.superClass_.init.call(this),this.setExpanded("true"==this.toolboxItemDef_.expanded||this.toolboxItemDef_.expanded)},e.CollapsibleToolboxCategory.prototype.createDom_=function(){e.CollapsibleToolboxCategory.superClass_.createDom_.call(this);var t=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(t),e.utils.aria.setRole(this.subcategoriesDiv_,e.utils.aria.Role.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.htmlDiv_},e.CollapsibleToolboxCategory.prototype.createIconDom_=function(){var t=document.createElement("span");return this.parentToolbox_.isHorizontal()||(e.utils.dom.addClass(t,this.cssConfig_.icon),t.style.visibility="visible"),t.style.display="inline-block",t},e.CollapsibleToolboxCategory.prototype.createSubCategoriesDom_=function(t){var n=document.createElement("div");e.utils.dom.addClass(n,this.cssConfig_.contents);for(var o=0;o<t.length;o++){var r=t[o];r.init();var p=r.getDiv();n.appendChild(p),r.getClickTarget&&r.getClickTarget().setAttribute("id",r.getId())}return n},e.CollapsibleToolboxCategory.prototype.setExpanded=function(t){this.expanded_!=t&&((this.expanded_=t)?(this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_)):(this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)),e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.EXPANDED,t),this.parentToolbox_.handleToolboxItemResize())},e.CollapsibleToolboxCategory.prototype.setVisible_=function(t){this.htmlDiv_.style.display=t?"block":"none";for(var o,n=0;o=this.getChildToolboxItems()[n];n++)o.setVisible_(t);this.isHidden_=!t,this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()},e.CollapsibleToolboxCategory.prototype.isExpanded=function(){return this.expanded_},e.CollapsibleToolboxCategory.prototype.isCollapsible=function(){return!0},e.CollapsibleToolboxCategory.prototype.onClick=function(t){this.toggleExpanded()},e.CollapsibleToolboxCategory.prototype.toggleExpanded=function(){this.setExpanded(!this.expanded_)},e.CollapsibleToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},e.CollapsibleToolboxCategory.prototype.getChildToolboxItems=function(){return this.toolboxItems_},e.registry.register(e.registry.Type.TOOLBOX_ITEM,e.CollapsibleToolboxCategory.registrationName,e.CollapsibleToolboxCategory),e.Events.ToolboxItemSelect=function(t,n,o){e.Events.ToolboxItemSelect.superClass_.constructor.call(this,o),this.oldItem=t,this.newItem=n},e.utils.object.inherits(e.Events.ToolboxItemSelect,e.Events.UiBase),e.Events.ToolboxItemSelect.prototype.type=e.Events.TOOLBOX_ITEM_SELECT,e.Events.ToolboxItemSelect.prototype.toJson=function(){var t=e.Events.ToolboxItemSelect.superClass_.toJson.call(this);return t.oldItem=this.oldItem,t.newItem=this.newItem,t},e.Events.ToolboxItemSelect.prototype.fromJson=function(t){e.Events.ToolboxItemSelect.superClass_.fromJson.call(this,t),this.oldItem=t.oldItem,this.newItem=t.newItem},e.registry.register(e.registry.Type.EVENT,e.Events.TOOLBOX_ITEM_SELECT,e.Events.ToolboxItemSelect),e.IAutoHideable=function(){},e.IStyleable=function(){},e.IToolbox=function(){},e.Toolbox=function(t){e.Toolbox.superClass_.constructor.call(this),this.workspace_=t,this.id="toolbox",this.toolboxDef_=t.options.languageTree||{contents:[]},this.horizontalLayout_=t.options.horizontalLayout,this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.contents_=[],this.height_=this.width_=0,this.RTL=t.options.RTL,this.flyout_=null,this.contentMap_=Object.create(null),this.toolboxPosition=t.options.toolboxPosition,this.previouslySelectedItem_=this.selectedItem_=null,this.boundEvents_=[]},e.utils.object.inherits(e.Toolbox,e.DeleteArea),e.Toolbox.prototype.onShortcut=function(t){return!1},e.Toolbox.prototype.init=function(){var t=this.workspace_,n=t.getParentSvg();this.flyout_=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),e.utils.dom.insertAfter(this.flyout_.createDom("svg"),n),this.setVisible(!0),this.flyout_.init(t),this.render(this.toolboxDef_),(t=t.getThemeManager()).subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),t.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[e.ComponentManager.Capability.AUTOHIDEABLE,e.ComponentManager.Capability.DELETE_AREA,e.ComponentManager.Capability.DRAG_TARGET]})},e.Toolbox.prototype.createDom_=function(t){t=t.getParentSvg();var n=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,e.utils.aria.setRole(this.contentsDiv_,e.utils.aria.Role.TREE),n.appendChild(this.contentsDiv_),t.parentNode.insertBefore(n,t),this.attachEvents_(n,this.contentsDiv_),n},e.Toolbox.prototype.createContainer_=function(){var t=document.createElement("div");return t.setAttribute("layout",this.isHorizontal()?"h":"v"),e.utils.dom.addClass(t,"blocklyToolboxDiv"),e.utils.dom.addClass(t,"blocklyNonSelectable"),t.setAttribute("dir",this.RTL?"RTL":"LTR"),t},e.Toolbox.prototype.createContentsContainer_=function(){var t=document.createElement("div");return e.utils.dom.addClass(t,"blocklyToolboxContents"),this.isHorizontal()&&(t.style.flexDirection="row"),t},e.Toolbox.prototype.attachEvents_=function(t,n){t=e.browserEvents.conditionalBind(t,"click",this,this.onClick_,!1,!0),this.boundEvents_.push(t),n=e.browserEvents.conditionalBind(n,"keydown",this,this.onKeyDown_,!1,!0),this.boundEvents_.push(n)},e.Toolbox.prototype.onClick_=function(t){if(e.utils.isRightButton(t)||t.target==this.HtmlDiv)e.hideChaff(!1);else{var n=t.target.getAttribute("id");n&&(n=this.getToolboxItemById(n)).isSelectable()&&(this.setSelectedItem(n),n.onClick(t)),e.hideChaff(!0)}e.Touch.clearTouchIdentifier()},e.Toolbox.prototype.onKeyDown_=function(t){var n=!1;switch(t.keyCode){case e.utils.KeyCodes.DOWN:n=this.selectNext_();break;case e.utils.KeyCodes.UP:n=this.selectPrevious_();break;case e.utils.KeyCodes.LEFT:n=this.selectParent_();break;case e.utils.KeyCodes.RIGHT:n=this.selectChild_();break;case e.utils.KeyCodes.ENTER:case e.utils.KeyCodes.SPACE:this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),n=!0);break;default:n=!1}!n&&this.selectedItem_&&this.selectedItem_.onKeyDown&&(n=this.selectedItem_.onKeyDown(t)),n&&t.preventDefault()},e.Toolbox.prototype.createFlyout_=function(){var t=this.workspace_,n=new e.Options({parentWorkspace:t,rtl:t.RTL,oneBasedIndex:t.options.oneBasedIndex,horizontalLayout:t.horizontalLayout,renderer:t.options.renderer,rendererOverrides:t.options.rendererOverrides,move:{scrollbars:!0}});return n.toolboxPosition=t.options.toolboxPosition,new(e.registry.getClassFromOptions(t.horizontalLayout?e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX:e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,t.options,!0))(n)},e.Toolbox.prototype.render=function(t){this.toolboxDef_=t;for(var n=0;n<this.contents_.length;n++){var o=this.contents_[n];o&&o.dispose()}this.contents_=[],this.contentMap_=Object.create(null),this.renderContents_(t.contents),this.position(),this.handleToolboxItemResize()},e.Toolbox.prototype.renderContents_=function(t){for(var r,n=document.createDocumentFragment(),o=0;r=t[o];o++)this.createToolboxItem_(r,n);this.contentsDiv_.appendChild(n)},e.Toolbox.prototype.createToolboxItem_=function(t,n){var o=t.kind;"CATEGORY"==o.toUpperCase()&&e.utils.toolbox.isCategoryCollapsible(t)&&(o=e.CollapsibleToolboxCategory.registrationName),(o=e.registry.getClass(e.registry.Type.TOOLBOX_ITEM,o.toLowerCase()))&&(t=new o(t,this),this.addToolboxItem_(t),t.init(),(o=t.getDiv())&&n.appendChild(o),t.getClickTarget&&t.getClickTarget().setAttribute("id",t.getId()))},e.Toolbox.prototype.addToolboxItem_=function(t){if(this.contents_.push(t),this.contentMap_[t.getId()]=t,t.isCollapsible())for(var o,n=0;o=t.getChildToolboxItems()[n];n++)this.addToolboxItem_(o)},e.Toolbox.prototype.getToolboxItems=function(){return this.contents_},e.Toolbox.prototype.addStyle=function(t){e.utils.dom.addClass(this.HtmlDiv,t)},e.Toolbox.prototype.removeStyle=function(t){e.utils.dom.removeClass(this.HtmlDiv,t)},e.Toolbox.prototype.getClientRect=function(){if(!this.HtmlDiv||!this.isVisible_)return null;var t=this.HtmlDiv.getBoundingClientRect(),n=t.top,o=n+t.height,r=t.left;return t=r+t.width,this.toolboxPosition==e.utils.toolbox.Position.TOP?new e.utils.Rect(-1e7,o,-1e7,1e7):this.toolboxPosition==e.utils.toolbox.Position.BOTTOM?new e.utils.Rect(n,1e7,-1e7,1e7):this.toolboxPosition==e.utils.toolbox.Position.LEFT?new e.utils.Rect(-1e7,1e7,-1e7,t):new e.utils.Rect(-1e7,1e7,r,1e7)},e.Toolbox.prototype.wouldDelete=function(t,n){return this.updateWouldDelete_(t instanceof e.BlockSvg?!t.getParent()&&t.isDeletable():t.isDeletable()),this.wouldDelete_},e.Toolbox.prototype.onDragEnter=function(t){this.updateCursorDeleteStyle_(!0)},e.Toolbox.prototype.onDragExit=function(t){this.updateCursorDeleteStyle_(!1)},e.Toolbox.prototype.onDrop=function(t){this.updateCursorDeleteStyle_(!1)},e.Toolbox.prototype.updateWouldDelete_=function(t){t!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=t,this.updateCursorDeleteStyle_(!0))},e.Toolbox.prototype.updateCursorDeleteStyle_=function(t){var n=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";t?this.addStyle(n):this.removeStyle(n)},e.Toolbox.prototype.getToolboxItemById=function(t){return this.contentMap_[t]||null},e.Toolbox.prototype.getWidth=function(){return this.width_},e.Toolbox.prototype.getHeight=function(){return this.height_},e.Toolbox.prototype.getFlyout=function(){return this.flyout_},e.Toolbox.prototype.getWorkspace=function(){return this.workspace_},e.Toolbox.prototype.getSelectedItem=function(){return this.selectedItem_},e.Toolbox.prototype.getPreviouslySelectedItem=function(){return this.previouslySelectedItem_},e.Toolbox.prototype.isHorizontal=function(){return this.horizontalLayout_},e.Toolbox.prototype.position=function(){var t=this.workspace_.getMetrics(),n=this.HtmlDiv;n&&(this.horizontalLayout_?(n.style.left="0",n.style.height="auto",n.style.width="100%",this.height_=n.offsetHeight,this.width_=t.viewWidth,this.toolboxPosition==e.utils.toolbox.Position.TOP?n.style.top="0":n.style.bottom="0"):(this.toolboxPosition==e.utils.toolbox.Position.RIGHT?n.style.right="0":n.style.left="0",n.style.height="100%",this.width_=n.offsetWidth,this.height_=t.viewHeight),this.flyout_.position())},e.Toolbox.prototype.handleToolboxItemResize=function(){var t=this.workspace_,n=this.HtmlDiv.getBoundingClientRect();t.translate(this.toolboxPosition==e.utils.toolbox.Position.LEFT?t.scrollX+n.width:t.scrollX,this.toolboxPosition==e.utils.toolbox.Position.TOP?t.scrollY+n.height:t.scrollY),e.svgResize(t)},e.Toolbox.prototype.clearSelection=function(){this.setSelectedItem(null)},e.Toolbox.prototype.refreshTheme=function(){for(var t=0;t<this.contents_.length;t++){var n=this.contents_[t];n.refreshTheme&&n.refreshTheme()}},e.Toolbox.prototype.refreshSelection=function(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout_.show(this.selectedItem_.getContents())},e.Toolbox.prototype.setVisible=function(t){this.isVisible_!==t&&(this.HtmlDiv.style.display=t?"block":"none",this.isVisible_=t,this.workspace_.recordDragTargets())},e.Toolbox.prototype.autoHide=function(t){!t&&this.flyout_&&this.flyout_.autoClose&&this.clearSelection()},e.Toolbox.prototype.setSelectedItem=function(t){var n=this.selectedItem_;!t&&!n||t&&!t.isSelectable()||(this.shouldDeselectItem_(n,t)&&null!=n&&this.deselectItem_(n),this.shouldSelectItem_(n,t)&&null!=t&&this.selectItem_(n,t),this.updateFlyout_(n,t),this.fireSelectEvent_(n,t))},e.Toolbox.prototype.shouldDeselectItem_=function(t,n){return null!=t&&(!t.isCollapsible()||t!=n)},e.Toolbox.prototype.shouldSelectItem_=function(t,n){return null!=n&&n!=t},e.Toolbox.prototype.deselectItem_=function(t){this.selectedItem_=null,this.previouslySelectedItem_=t,t.setSelected(!1),e.utils.aria.setState(this.contentsDiv_,e.utils.aria.State.ACTIVEDESCENDANT,"")},e.Toolbox.prototype.selectItem_=function(t,n){this.selectedItem_=n,this.previouslySelectedItem_=t,n.setSelected(!0),e.utils.aria.setState(this.contentsDiv_,e.utils.aria.State.ACTIVEDESCENDANT,n.getId())},e.Toolbox.prototype.selectItemByPosition=function(t){-1<t&&t<this.contents_.length&&(t=this.contents_[t]).isSelectable()&&this.setSelectedItem(t)},e.Toolbox.prototype.updateFlyout_=function(t,n){(t!=n||n.isCollapsible())&&n&&n.getContents().length?(this.flyout_.show(n.getContents()),this.flyout_.scrollToStart()):this.flyout_.hide()},e.Toolbox.prototype.fireSelectEvent_=function(t,n){var o=t&&t.getName(),r=n&&n.getName();t==n&&(r=null),t=new(e.Events.get(e.Events.TOOLBOX_ITEM_SELECT))(o,r,this.workspace_.id),e.Events.fire(t)},e.Toolbox.prototype.selectParent_=function(){return!(!this.selectedItem_||(this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.setExpanded(!1),0):!this.selectedItem_.getParent()||!this.selectedItem_.getParent().isSelectable()||(this.setSelectedItem(this.selectedItem_.getParent()),0)))},e.Toolbox.prototype.selectChild_=function(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;var t=this.selectedItem_;return t.isExpanded()?this.selectNext_():t.setExpanded(!0),!0},e.Toolbox.prototype.selectNext_=function(){if(!this.selectedItem_)return!1;var t=this.contents_.indexOf(this.selectedItem_)+1;if(-1<t&&t<this.contents_.length){for(var n=this.contents_[t];n&&!n.isSelectable();)n=this.contents_[++t];if(n&&n.isSelectable())return this.setSelectedItem(n),!0}return!1},e.Toolbox.prototype.selectPrevious_=function(){if(!this.selectedItem_)return!1;var t=this.contents_.indexOf(this.selectedItem_)-1;if(-1<t&&t<this.contents_.length){for(var n=this.contents_[t];n&&!n.isSelectable();)n=this.contents_[--t];if(n&&n.isSelectable())return this.setSelectedItem(n),!0}return!1},e.Toolbox.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout_.dispose();for(var t=0;t<this.contents_.length;t++)this.contents_[t].dispose();for(t=0;t<this.boundEvents_.length;t++)e.browserEvents.unbind(this.boundEvents_[t]);this.boundEvents_=[],this.contents_=[],this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),e.utils.dom.removeNode(this.HtmlDiv)},e.Css.register([".blocklyToolboxDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyToolboxGrab {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyToolboxDiv {","background-color: #ddd;","overflow-x: visible;","overflow-y: auto;","padding: 4px 0 4px 0;","position: absolute;","z-index: 70;","-webkit-tap-highlight-color: transparent;","}",".blocklyToolboxContents {","display: flex;","flex-wrap: wrap;","flex-direction: column;","}",".blocklyToolboxContents:focus {","outline: none;","}"]),e.registry.register(e.registry.Type.TOOLBOX,e.registry.DEFAULT,e.Toolbox),e.Events.TrashcanOpen=function(t,n){e.Events.TrashcanOpen.superClass_.constructor.call(this,n),this.isOpen=t},e.utils.object.inherits(e.Events.TrashcanOpen,e.Events.UiBase),e.Events.TrashcanOpen.prototype.type=e.Events.TRASHCAN_OPEN,e.Events.TrashcanOpen.prototype.toJson=function(){var t=e.Events.TrashcanOpen.superClass_.toJson.call(this);return t.isOpen=this.isOpen,t},e.Events.TrashcanOpen.prototype.fromJson=function(t){e.Events.TrashcanOpen.superClass_.fromJson.call(this,t),this.isOpen=t.isOpen},e.registry.register(e.registry.Type.EVENT,e.Events.TRASHCAN_OPEN,e.Events.TrashcanOpen),e.IPositionable=function(){},e.uiPosition={},e.uiPosition.verticalPosition={TOP:0,BOTTOM:1},e.uiPosition.horizontalPosition={LEFT:0,RIGHT:1},e.uiPosition.bumpDirection={UP:0,DOWN:1},e.uiPosition.getStartPositionRect=function(t,n,o,r,p,b){var I=b.scrollbar&&b.scrollbar.canScrollVertically();return t.horizontal===e.uiPosition.horizontalPosition.LEFT?(o=p.absoluteMetrics.left+o,I&&b.RTL&&(o+=e.Scrollbar.scrollbarThickness)):(o=p.absoluteMetrics.left+p.viewMetrics.width-n.width-o,I&&!b.RTL&&(o-=e.Scrollbar.scrollbarThickness)),t.vertical===e.uiPosition.verticalPosition.TOP?t=p.absoluteMetrics.top+r:(t=p.absoluteMetrics.top+p.viewMetrics.height-n.height-r,b.scrollbar&&b.scrollbar.canScrollHorizontally()&&(t-=e.Scrollbar.scrollbarThickness)),new e.utils.Rect(t,t+n.height,o,o+n.width)},e.uiPosition.getCornerOppositeToolbox=function(t,n){return{horizontal:n.toolboxMetrics.position===e.utils.toolbox.Position.LEFT||t.horizontalLayout&&!t.RTL?e.uiPosition.horizontalPosition.RIGHT:e.uiPosition.horizontalPosition.LEFT,vertical:n.toolboxMetrics.position===e.utils.toolbox.Position.BOTTOM?e.uiPosition.verticalPosition.TOP:e.uiPosition.verticalPosition.BOTTOM}},e.uiPosition.bumpPositionRect=function(t,n,o,r){for(var k,p=t.left,b=t.right-t.left,I=t.bottom-t.top,x=0;k=r[x];x++)t.intersects(k)&&(t=new e.utils.Rect(t=o===e.uiPosition.bumpDirection.UP?k.top-I-n:k.bottom+n,t+I,p,p+b),x=-1);return t},e.Trashcan=function(t){e.Trashcan.superClass_.constructor.call(this),this.workspace_=t,this.id="trashcan",this.contents_=[],this.flyout=null,0>=this.workspace_.options.maxTrashcanContents||(t=new e.Options({scrollbars:!0,parentWorkspace:this.workspace_,rtl:this.workspace_.RTL,oneBasedIndex:this.workspace_.options.oneBasedIndex,renderer:this.workspace_.options.renderer,rendererOverrides:this.workspace_.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace_.horizontalLayout?(t.toolboxPosition=this.workspace_.toolboxPosition==e.utils.toolbox.Position.TOP?e.utils.toolbox.Position.BOTTOM:e.utils.toolbox.Position.TOP,this.flyout=new(e.registry.getClassFromOptions(e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace_.options,!0))(t)):(t.toolboxPosition=this.workspace_.toolboxPosition==e.utils.toolbox.Position.RIGHT?e.utils.toolbox.Position.LEFT:e.utils.toolbox.Position.RIGHT,this.flyout=new(e.registry.getClassFromOptions(e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,this.workspace_.options,!0))(t)),this.workspace_.addChangeListener(this.onDelete_.bind(this)))},e.utils.object.inherits(e.Trashcan,e.DeleteArea),e.Trashcan.prototype.WIDTH_=47,e.Trashcan.prototype.BODY_HEIGHT_=44,e.Trashcan.prototype.LID_HEIGHT_=16,e.Trashcan.prototype.MARGIN_VERTICAL_=20,e.Trashcan.prototype.MARGIN_HORIZONTAL_=20,e.Trashcan.prototype.MARGIN_HOTSPOT_=10,e.Trashcan.prototype.SPRITE_LEFT_=0,e.Trashcan.prototype.SPRITE_TOP_=32,e.Trashcan.prototype.HAS_BLOCKS_LID_ANGLE_=.1,e.Trashcan.ANIMATION_LENGTH_=80,e.Trashcan.ANIMATION_FRAMES_=4,e.Trashcan.OPACITY_MIN_=.4,e.Trashcan.OPACITY_MAX_=.8,e.Trashcan.MAX_LID_ANGLE_=45,e.Trashcan.prototype.isLidOpen=!1,e.Trashcan.prototype.minOpenness_=0,e.Trashcan.prototype.svgGroup_=null,e.Trashcan.prototype.svgLid_=null,e.Trashcan.prototype.lidTask_=0,e.Trashcan.prototype.lidOpen_=0,e.Trashcan.prototype.left_=0,e.Trashcan.prototype.top_=0,e.Trashcan.prototype.initialized_=!1,e.Trashcan.prototype.createDom=function(){this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyTrash"},null);var t=String(Math.random()).substring(2),n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyTrashBodyClipPath"+t},this.svgGroup_);e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:this.WIDTH_,height:this.BODY_HEIGHT_,y:this.LID_HEIGHT_},n);var o=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,x:-this.SPRITE_LEFT_,height:e.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashBodyClipPath"+t+")"},this.svgGroup_);return o.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyTrashLidClipPath"+t},this.svgGroup_),e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:this.WIDTH_,height:this.LID_HEIGHT_},n),this.svgLid_=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,x:-this.SPRITE_LEFT_,height:e.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashLidClipPath"+t+")"},this.svgGroup_),this.svgLid_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),e.browserEvents.bind(this.svgGroup_,"mousedown",this,this.blockMouseDownWhenOpenable_),e.browserEvents.bind(this.svgGroup_,"mouseup",this,this.click),e.browserEvents.bind(o,"mouseover",this,this.mouseOver_),e.browserEvents.bind(o,"mouseout",this,this.mouseOut_),this.animateLid_(),this.svgGroup_},e.Trashcan.prototype.init=function(){0<this.workspace_.options.maxTrashcanContents&&(e.utils.dom.insertAfter(this.flyout.createDom(e.utils.Svg.SVG),this.workspace_.getParentSvg()),this.flyout.init(this.workspace_)),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[e.ComponentManager.Capability.AUTOHIDEABLE,e.ComponentManager.Capability.DELETE_AREA,e.ComponentManager.Capability.DRAG_TARGET,e.ComponentManager.Capability.POSITIONABLE]}),this.initialized_=!0,this.setLidOpen(!1)},e.Trashcan.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("trashcan"),this.svgGroup_&&(e.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.workspace_=this.svgLid_=null,clearTimeout(this.lidTask_)},e.Trashcan.prototype.hasContents_=function(){return!!this.contents_.length},e.Trashcan.prototype.contentsIsOpen=function(){return this.flyout.isVisible()},e.Trashcan.prototype.openFlyout=function(){if(!this.contentsIsOpen()){var t=this.contents_.map(e.Xml.textToDom);this.flyout.show(t),this.fireUiEvent_(!0)}},e.Trashcan.prototype.closeFlyout=function(){this.contentsIsOpen()&&(this.flyout.hide(),this.fireUiEvent_(!1))},e.Trashcan.prototype.autoHide=function(t){!t&&this.flyout&&this.closeFlyout()},e.Trashcan.prototype.emptyContents=function(){this.hasContents_()&&(this.contents_.length=0,this.setMinOpenness_(0),this.closeFlyout())},e.Trashcan.prototype.position=function(t,n){if(this.initialized_){var o=e.uiPosition.getCornerOppositeToolbox(this.workspace_,t);t=e.uiPosition.getStartPositionRect(o,new e.utils.Size(this.WIDTH_,this.BODY_HEIGHT_+this.LID_HEIGHT_),this.MARGIN_HORIZONTAL_,this.MARGIN_VERTICAL_,t,this.workspace_),n=e.uiPosition.bumpPositionRect(t,this.MARGIN_VERTICAL_,o.vertical===e.uiPosition.verticalPosition.TOP?e.uiPosition.bumpDirection.DOWN:e.uiPosition.bumpDirection.UP,n),this.top_=n.top,this.left_=n.left,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}},e.Trashcan.prototype.getBoundingRectangle=function(){return new e.utils.Rect(this.top_,this.top_+this.BODY_HEIGHT_+this.LID_HEIGHT_,this.left_,this.left_+this.WIDTH_)},e.Trashcan.prototype.getClientRect=function(){if(!this.svgGroup_)return null;var t=this.svgGroup_.getBoundingClientRect(),n=t.top+this.SPRITE_TOP_-this.MARGIN_HOTSPOT_;return new e.utils.Rect(n,n+this.LID_HEIGHT_+this.BODY_HEIGHT_+2*this.MARGIN_HOTSPOT_,t=t.left+this.SPRITE_LEFT_-this.MARGIN_HOTSPOT_,t+this.WIDTH_+2*this.MARGIN_HOTSPOT_)},e.Trashcan.prototype.onDragOver=function(t){this.setLidOpen(this.wouldDelete_)},e.Trashcan.prototype.onDragExit=function(t){this.setLidOpen(!1)},e.Trashcan.prototype.onDrop=function(t){setTimeout(this.setLidOpen.bind(this,!1),100)},e.Trashcan.prototype.setLidOpen=function(t){this.isLidOpen!=t&&(clearTimeout(this.lidTask_),this.isLidOpen=t,this.animateLid_())},e.Trashcan.prototype.animateLid_=function(){var t=e.Trashcan.ANIMATION_FRAMES_,n=1/(t+1);this.lidOpen_+=this.isLidOpen?n:-n,this.lidOpen_=Math.min(Math.max(this.lidOpen_,this.minOpenness_),1),this.setLidAngle_(this.lidOpen_*e.Trashcan.MAX_LID_ANGLE_),this.svgGroup_.style.opacity=(n=e.Trashcan.OPACITY_MIN_)+this.lidOpen_*(e.Trashcan.OPACITY_MAX_-n),this.lidOpen_>this.minOpenness_&&1>this.lidOpen_&&(this.lidTask_=setTimeout(this.animateLid_.bind(this),e.Trashcan.ANIMATION_LENGTH_/t))},e.Trashcan.prototype.setLidAngle_=function(t){var n=this.workspace_.toolboxPosition==e.utils.toolbox.Position.RIGHT||this.workspace_.horizontalLayout&&this.workspace_.RTL;this.svgLid_.setAttribute("transform","rotate("+(n?-t:t)+","+(n?4:this.WIDTH_-4)+","+(this.LID_HEIGHT_-2)+")")},e.Trashcan.prototype.setMinOpenness_=function(t){this.minOpenness_=t,this.isLidOpen||this.setLidAngle_(t*e.Trashcan.MAX_LID_ANGLE_)},e.Trashcan.prototype.closeLid=function(){this.setLidOpen(!1)},e.Trashcan.prototype.click=function(){this.hasContents_()&&this.openFlyout()},e.Trashcan.prototype.fireUiEvent_=function(t){t=new(e.Events.get(e.Events.TRASHCAN_OPEN))(t,this.workspace_.id),e.Events.fire(t)},e.Trashcan.prototype.blockMouseDownWhenOpenable_=function(t){!this.contentsIsOpen()&&this.hasContents_()&&t.stopPropagation()},e.Trashcan.prototype.mouseOver_=function(){this.hasContents_()&&this.setLidOpen(!0)},e.Trashcan.prototype.mouseOut_=function(){this.setLidOpen(!1)},e.Trashcan.prototype.onDelete_=function(t){if(!(0>=this.workspace_.options.maxTrashcanContents)&&t.type==e.Events.BLOCK_DELETE&&t.oldXml.tagName&&"shadow"!=t.oldXml.tagName.toLowerCase()&&(t=this.cleanBlockXML_(t.oldXml),-1==this.contents_.indexOf(t))){for(this.contents_.unshift(t);this.contents_.length>this.workspace_.options.maxTrashcanContents;)this.contents_.pop();this.setMinOpenness_(this.HAS_BLOCKS_LID_ANGLE_)}},e.Trashcan.prototype.cleanBlockXML_=function(t){for(var n=t=t.cloneNode(!0);n;){n.removeAttribute&&(n.removeAttribute("x"),n.removeAttribute("y"),n.removeAttribute("id"),n.removeAttribute("disabled"),"comment"==n.nodeName&&(n.removeAttribute("h"),n.removeAttribute("w"),n.removeAttribute("pinned")));var o=n.firstChild||n.nextSibling;if(!o)for(o=n.parentNode;o;){if(o.nextSibling){o=o.nextSibling;break}o=o.parentNode}n=o}return e.Xml.domToText(t)},e.VariablesDynamic={},e.VariablesDynamic.onCreateVariableButtonClick_String=function(t){e.Variables.createVariableButtonHandler(t.getTargetWorkspace(),void 0,"String")},e.VariablesDynamic.onCreateVariableButtonClick_Number=function(t){e.Variables.createVariableButtonHandler(t.getTargetWorkspace(),void 0,"Number")},e.VariablesDynamic.onCreateVariableButtonClick_Colour=function(t){e.Variables.createVariableButtonHandler(t.getTargetWorkspace(),void 0,"Colour")},e.VariablesDynamic.flyoutCategory=function(t){var n=[],o=document.createElement("button");return o.setAttribute("text",e.Msg.NEW_STRING_VARIABLE),o.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),n.push(o),(o=document.createElement("button")).setAttribute("text",e.Msg.NEW_NUMBER_VARIABLE),o.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),n.push(o),(o=document.createElement("button")).setAttribute("text",e.Msg.NEW_COLOUR_VARIABLE),o.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),n.push(o),t.registerButtonCallback("CREATE_VARIABLE_STRING",e.VariablesDynamic.onCreateVariableButtonClick_String),t.registerButtonCallback("CREATE_VARIABLE_NUMBER",e.VariablesDynamic.onCreateVariableButtonClick_Number),t.registerButtonCallback("CREATE_VARIABLE_COLOUR",e.VariablesDynamic.onCreateVariableButtonClick_Colour),t=e.VariablesDynamic.flyoutCategoryBlocks(t),n.concat(t)},e.VariablesDynamic.flyoutCategoryBlocks=function(t){var n=[];if(0<(t=t.getAllVariables()).length){if(e.Blocks.variables_set_dynamic){var o=t[t.length-1],r=e.utils.xml.createElement("block");r.setAttribute("type","variables_set_dynamic"),r.setAttribute("gap",24),r.appendChild(e.Variables.generateVariableFieldDom(o)),n.push(r)}if(e.Blocks.variables_get_dynamic){t.sort(e.VariableModel.compareByName),o=0;for(var p;p=t[o];o++)(r=e.utils.xml.createElement("block")).setAttribute("type","variables_get_dynamic"),r.setAttribute("gap",8),r.appendChild(e.Variables.generateVariableFieldDom(p)),n.push(r)}}return n},e.ZoomControls=function(t){this.workspace_=t,this.id="zoomControls",this.zoomResetGroup_=this.zoomOutGroup_=this.zoomInGroup_=this.onZoomOutWrapper_=this.onZoomInWrapper_=this.onZoomResetWrapper_=null},e.ZoomControls.prototype.WIDTH_=32,e.ZoomControls.prototype.HEIGHT_=32,e.ZoomControls.prototype.SMALL_SPACING_=2,e.ZoomControls.prototype.LARGE_SPACING_=11,e.ZoomControls.prototype.MARGIN_VERTICAL_=20,e.ZoomControls.prototype.MARGIN_HORIZONTAL_=20,e.ZoomControls.prototype.svgGroup_=null,e.ZoomControls.prototype.left_=0,e.ZoomControls.prototype.top_=0,e.ZoomControls.prototype.initialized_=!1,e.ZoomControls.prototype.createDom=function(){this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},null);var t=String(Math.random()).substring(2);return this.createZoomOutSvg_(t),this.createZoomInSvg_(t),this.workspace_.isMovable()&&this.createZoomResetSvg_(t),this.svgGroup_},e.ZoomControls.prototype.init=function(){this.workspace_.getComponentManager().addComponent({component:this,weight:2,capabilities:[e.ComponentManager.Capability.POSITIONABLE]}),this.initialized_=!0},e.ZoomControls.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("zoomControls"),this.svgGroup_&&e.utils.dom.removeNode(this.svgGroup_),this.onZoomResetWrapper_&&e.browserEvents.unbind(this.onZoomResetWrapper_),this.onZoomInWrapper_&&e.browserEvents.unbind(this.onZoomInWrapper_),this.onZoomOutWrapper_&&e.browserEvents.unbind(this.onZoomOutWrapper_)},e.ZoomControls.prototype.getBoundingRectangle=function(){var t=this.SMALL_SPACING_+2*this.HEIGHT_;return this.zoomResetGroup_&&(t+=this.LARGE_SPACING_+this.HEIGHT_),new e.utils.Rect(this.top_,this.top_+t,this.left_,this.left_+this.WIDTH_)},e.ZoomControls.prototype.position=function(t,n){if(this.initialized_){var o=e.uiPosition.getCornerOppositeToolbox(this.workspace_,t),r=this.SMALL_SPACING_+2*this.HEIGHT_;this.zoomResetGroup_&&(r+=this.LARGE_SPACING_+this.HEIGHT_),t=e.uiPosition.getStartPositionRect(o,new e.utils.Size(this.WIDTH_,r),this.MARGIN_HORIZONTAL_,this.MARGIN_VERTICAL_,t,this.workspace_),n=e.uiPosition.bumpPositionRect(t,this.MARGIN_VERTICAL_,(o=o.vertical)===e.uiPosition.verticalPosition.TOP?e.uiPosition.bumpDirection.DOWN:e.uiPosition.bumpDirection.UP,n),o===e.uiPosition.verticalPosition.TOP?(this.zoomInGroup_.setAttribute("transform","translate(0, "+(o=this.SMALL_SPACING_+this.HEIGHT_)+")"),this.zoomResetGroup_&&this.zoomResetGroup_.setAttribute("transform","translate(0, "+(o+this.LARGE_SPACING_+this.HEIGHT_)+")")):(this.zoomInGroup_.setAttribute("transform","translate(0, "+(o=this.zoomResetGroup_?this.LARGE_SPACING_+this.HEIGHT_:0)+")"),this.zoomOutGroup_.setAttribute("transform","translate(0, "+(o+this.SMALL_SPACING_+this.HEIGHT_)+")")),this.top_=n.top,this.left_=n.left,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}},e.ZoomControls.prototype.createZoomOutSvg_=function(t){this.zoomOutGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyZoomoutClipPath"+t},this.zoomOutGroup_);e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:32,height:32},n),e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,height:e.SPRITE.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+t+")"},this.zoomOutGroup_).setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),this.onZoomOutWrapper_=e.browserEvents.conditionalBind(this.zoomOutGroup_,"mousedown",null,this.zoom_.bind(this,-1))},e.ZoomControls.prototype.createZoomInSvg_=function(t){this.zoomInGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyZoominClipPath"+t},this.zoomInGroup_);e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:32,height:32},n),e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,height:e.SPRITE.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+t+")"},this.zoomInGroup_).setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),this.onZoomInWrapper_=e.browserEvents.conditionalBind(this.zoomInGroup_,"mousedown",null,this.zoom_.bind(this,1))},e.ZoomControls.prototype.zoom_=function(t,n){this.workspace_.markFocused(),this.workspace_.zoomCenter(t),this.fireZoomEvent_(),e.Touch.clearTouchIdentifier(),n.stopPropagation(),n.preventDefault()},e.ZoomControls.prototype.createZoomResetSvg_=function(t){this.zoomResetGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyZoomresetClipPath"+t},this.zoomResetGroup_);e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:32,height:32},n),e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,height:e.SPRITE.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+t+")"},this.zoomResetGroup_).setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),this.onZoomResetWrapper_=e.browserEvents.conditionalBind(this.zoomResetGroup_,"mousedown",null,this.resetZoom_.bind(this))},e.ZoomControls.prototype.resetZoom_=function(t){this.workspace_.markFocused();var n=Math.log(this.workspace_.options.zoomOptions.startScale/this.workspace_.scale)/Math.log(this.workspace_.options.zoomOptions.scaleSpeed);this.workspace_.beginCanvasTransition(),this.workspace_.zoomCenter(n),this.workspace_.scrollCenter(),setTimeout(this.workspace_.endCanvasTransition.bind(this.workspace_),500),this.fireZoomEvent_(),e.Touch.clearTouchIdentifier(),t.stopPropagation(),t.preventDefault()},e.ZoomControls.prototype.fireZoomEvent_=function(){var t=new(e.Events.get(e.Events.CLICK))(null,this.workspace_.id,"zoom_controls");e.Events.fire(t)},e.Css.register([".blocklyZoom>image, .blocklyZoom>svg>image {","opacity: .4;","}",".blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {","opacity: .6;","}",".blocklyZoom>image:active, .blocklyZoom>svg>image:active {","opacity: .8;","}"]),e.ShortcutItems={},e.ShortcutItems.names={ESCAPE:"escape",DELETE:"delete",COPY:"copy",CUT:"cut",PASTE:"paste",UNDO:"undo",REDO:"redo"},e.ShortcutItems.registerEscape=function(){var t={name:e.ShortcutItems.names.ESCAPE,preconditionFn:function(n){return!n.options.readOnly},callback:function(){return e.hideChaff(),!0}};e.ShortcutRegistry.registry.register(t),e.ShortcutRegistry.registry.addKeyMapping(e.utils.KeyCodes.ESC,t.name)},e.ShortcutItems.registerDelete=function(){var t={name:e.ShortcutItems.names.DELETE,preconditionFn:function(n){return!n.options.readOnly&&e.selected&&e.selected.isDeletable()},callback:function(n,o){return o.preventDefault(),!e.Gesture.inProgress()&&(e.deleteBlock(e.selected),!0)}};e.ShortcutRegistry.registry.register(t),e.ShortcutRegistry.registry.addKeyMapping(e.utils.KeyCodes.DELETE,t.name),e.ShortcutRegistry.registry.addKeyMapping(e.utils.KeyCodes.BACKSPACE,t.name)},e.ShortcutItems.registerCopy=function(){var t={name:e.ShortcutItems.names.COPY,preconditionFn:function(o){return!o.options.readOnly&&!e.Gesture.inProgress()&&e.selected&&e.selected.isDeletable()&&e.selected.isMovable()},callback:function(o,r){return r.preventDefault(),e.hideChaff(),e.copy(e.selected),!0}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.C,[e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.C,[e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.C,[e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerCut=function(){var t={name:e.ShortcutItems.names.CUT,preconditionFn:function(o){return!o.options.readOnly&&!e.Gesture.inProgress()&&e.selected&&e.selected.isDeletable()&&e.selected.isMovable()&&!e.selected.workspace.isFlyout},callback:function(){return e.copy(e.selected),e.deleteBlock(e.selected),!0}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.X,[e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.X,[e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.X,[e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerPaste=function(){var t={name:e.ShortcutItems.names.PASTE,preconditionFn:function(o){return!o.options.readOnly&&!e.Gesture.inProgress()},callback:function(){return e.paste()}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.V,[e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.V,[e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.V,[e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerUndo=function(){var t={name:e.ShortcutItems.names.UNDO,preconditionFn:function(o){return!o.options.readOnly&&!e.Gesture.inProgress()},callback:function(o){return e.hideChaff(),o.undo(!1),!0}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerRedo=function(){var t={name:e.ShortcutItems.names.REDO,preconditionFn:function(o){return!e.Gesture.inProgress()&&!o.options.readOnly},callback:function(o){return e.hideChaff(),o.undo(!0),!0}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.SHIFT,e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.SHIFT,e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.SHIFT,e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Y,[e.utils.KeyCodes.CTRL]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerDefaultShortcuts=function(){e.ShortcutItems.registerEscape(),e.ShortcutItems.registerDelete(),e.ShortcutItems.registerCopy(),e.ShortcutItems.registerCut(),e.ShortcutItems.registerPaste(),e.ShortcutItems.registerUndo(),e.ShortcutItems.registerRedo()},e.ShortcutItems.registerDefaultShortcuts(),e.ContextMenuItems={},e.ContextMenuItems.registerUndo=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.UNDO},preconditionFn:function(t){return 0<t.workspace.getUndoStack().length?"enabled":"disabled"},callback:function(t){t.workspace.undo(!1)},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},e.ContextMenuItems.registerRedo=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.REDO},preconditionFn:function(t){return 0<t.workspace.getRedoStack().length?"enabled":"disabled"},callback:function(t){t.workspace.undo(!0)},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},e.ContextMenuItems.registerCleanup=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.CLEAN_UP},preconditionFn:function(t){return t.workspace.isMovable()?1<t.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden"},callback:function(t){t.workspace.cleanUp()},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},e.ContextMenuItems.toggleOption_=function(t,n){for(var o=0,r=0;r<n.length;r++)for(var p=n[r];p;)setTimeout(p.setCollapsed.bind(p,t),o),p=p.getNextBlock(),o+=10},e.ContextMenuItems.registerCollapse=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.COLLAPSE_ALL},preconditionFn:function(t){if(t.workspace.options.collapse){t=t.workspace.getTopBlocks(!1);for(var n=0;n<t.length;n++)for(var o=t[n];o;){if(!o.isCollapsed())return"enabled";o=o.getNextBlock()}return"disabled"}return"hidden"},callback:function(t){e.ContextMenuItems.toggleOption_(!0,t.workspace.getTopBlocks(!0))},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},e.ContextMenuItems.registerExpand=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.EXPAND_ALL},preconditionFn:function(t){if(t.workspace.options.collapse){t=t.workspace.getTopBlocks(!1);for(var n=0;n<t.length;n++)for(var o=t[n];o;){if(o.isCollapsed())return"enabled";o=o.getNextBlock()}return"disabled"}return"hidden"},callback:function(t){e.ContextMenuItems.toggleOption_(!1,t.workspace.getTopBlocks(!0))},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},e.ContextMenuItems.addDeletableBlocks_=function(t,n){if(t.isDeletable())Array.prototype.push.apply(n,t.getDescendants(!1));else{t=t.getChildren(!1);for(var o=0;o<t.length;o++)e.ContextMenuItems.addDeletableBlocks_(t[o],n)}},e.ContextMenuItems.getDeletableBlocks_=function(t){var n=[];t=t.getTopBlocks(!0);for(var o=0;o<t.length;o++)e.ContextMenuItems.addDeletableBlocks_(t[o],n);return n},e.ContextMenuItems.deleteNext_=function(t,n){e.Events.setGroup(n);var o=t.shift();o&&(o.workspace?(o.dispose(!1,!0),setTimeout(e.ContextMenuItems.deleteNext_,10,t,n)):e.ContextMenuItems.deleteNext_(t,n)),e.Events.setGroup(!1)},e.ContextMenuItems.registerDeleteAll=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){if(t.workspace)return 1==(t=e.ContextMenuItems.getDeletableBlocks_(t.workspace).length)?e.Msg.DELETE_BLOCK:e.Msg.DELETE_X_BLOCKS.replace("%1",String(t))},preconditionFn:function(t){if(t.workspace)return 0<e.ContextMenuItems.getDeletableBlocks_(t.workspace).length?"enabled":"disabled"},callback:function(t){if(t.workspace){t.workspace.cancelCurrentGesture();var n=e.ContextMenuItems.getDeletableBlocks_(t.workspace),o=e.utils.genUid();2>n.length?e.ContextMenuItems.deleteNext_(n,o):e.confirm(e.Msg.DELETE_ALL_BLOCKS.replace("%1",n.length),function(r){r&&e.ContextMenuItems.deleteNext_(n,o)})}},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},e.ContextMenuItems.registerWorkspaceOptions_=function(){e.ContextMenuItems.registerUndo(),e.ContextMenuItems.registerRedo(),e.ContextMenuItems.registerCleanup(),e.ContextMenuItems.registerCollapse(),e.ContextMenuItems.registerExpand(),e.ContextMenuItems.registerDeleteAll()},e.ContextMenuItems.registerDuplicate=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.DUPLICATE_BLOCK},preconditionFn:function(t){return!(t=t.block).isInFlyout&&t.isDeletable()&&t.isMovable()?t.isDuplicatable()?"enabled":"disabled":"hidden"},callback:function(t){t.block&&e.duplicate(t.block)},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},e.ContextMenuItems.registerComment=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.getCommentIcon()?e.Msg.REMOVE_COMMENT:e.Msg.ADD_COMMENT},preconditionFn:function(t){return t=t.block,e.utils.userAgent.IE||t.isInFlyout||!t.workspace.options.comments||t.isCollapsed()||!t.isEditable()?"hidden":"enabled"},callback:function(t){(t=t.block).getCommentIcon()?t.setCommentText(null):t.setCommentText("")},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockComment",weight:2})},e.ContextMenuItems.registerInline=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.getInputsInline()?e.Msg.EXTERNAL_INPUTS:e.Msg.INLINE_INPUTS},preconditionFn:function(t){if(!(t=t.block).isInFlyout&&t.isMovable()&&!t.isCollapsed())for(var n=1;n<t.inputList.length;n++)if(t.inputList[n-1].type!=e.inputTypes.STATEMENT&&t.inputList[n].type!=e.inputTypes.STATEMENT)return"enabled";return"hidden"},callback:function(t){t.block.setInputsInline(!t.block.getInputsInline())},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockInline",weight:3})},e.ContextMenuItems.registerCollapseExpandBlock=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.isCollapsed()?e.Msg.EXPAND_BLOCK:e.Msg.COLLAPSE_BLOCK},preconditionFn:function(t){return!(t=t.block).isInFlyout&&t.isMovable()&&t.workspace.options.collapse?"enabled":"hidden"},callback:function(t){t.block.setCollapsed(!t.block.isCollapsed())},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},e.ContextMenuItems.registerDisable=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.isEnabled()?e.Msg.DISABLE_BLOCK:e.Msg.ENABLE_BLOCK},preconditionFn:function(t){return!(t=t.block).isInFlyout&&t.workspace.options.disable&&t.isEditable()?t.getInheritedDisabled()?"disabled":"enabled":"hidden"},callback:function(t){t=t.block;var n=e.Events.getGroup();n||e.Events.setGroup(!0),t.setEnabled(!t.isEnabled()),n||e.Events.setGroup(!1)},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDisable",weight:5})},e.ContextMenuItems.registerDelete=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){var n=t.block;return t=n.getDescendants(!1).length,(n=n.getNextBlock())&&(t-=n.getDescendants(!1).length),1==t?e.Msg.DELETE_BLOCK:e.Msg.DELETE_X_BLOCKS.replace("%1",String(t))},preconditionFn:function(t){return!t.block.isInFlyout&&t.block.isDeletable()?"enabled":"hidden"},callback:function(t){e.Events.setGroup(!0),t.block&&e.deleteBlock(t.block),e.Events.setGroup(!1)},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDelete",weight:6})},e.ContextMenuItems.registerHelp=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.HELP},preconditionFn:function(t){return("function"==typeof(t=t.block).helpUrl?t.helpUrl():t.helpUrl)?"enabled":"hidden"},callback:function(t){t.block.showHelp()},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockHelp",weight:7})},e.ContextMenuItems.registerBlockOptions_=function(){e.ContextMenuItems.registerDuplicate(),e.ContextMenuItems.registerComment(),e.ContextMenuItems.registerInline(),e.ContextMenuItems.registerCollapseExpandBlock(),e.ContextMenuItems.registerDisable(),e.ContextMenuItems.registerDelete(),e.ContextMenuItems.registerHelp()},e.ContextMenuItems.registerDefaultOptions=function(){e.ContextMenuItems.registerWorkspaceOptions_(),e.ContextMenuItems.registerBlockOptions_()},e.ContextMenuItems.registerDefaultOptions(),e.Mutator=function(t){e.Mutator.superClass_.constructor.call(this,null),this.quarkNames_=t},e.utils.object.inherits(e.Mutator,e.Icon),e.Mutator.prototype.workspace_=null,e.Mutator.prototype.workspaceWidth_=0,e.Mutator.prototype.workspaceHeight_=0,e.Mutator.prototype.setBlock=function(t){this.block_=t},e.Mutator.prototype.getWorkspace=function(){return this.workspace_},e.Mutator.prototype.drawIcon_=function(t){e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},t),e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},t),e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},t)},e.Mutator.prototype.iconClick_=function(t){this.block_.isEditable()&&e.Icon.prototype.iconClick_.call(this,t)},e.Mutator.prototype.createEditor_=function(){if(this.svgDialog_=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{x:e.Bubble.BORDER_WIDTH,y:e.Bubble.BORDER_WIDTH},null),this.quarkNames_.length)for(var o,t=e.utils.xml.createElement("xml"),n=0;o=this.quarkNames_[n];n++){var r=e.utils.xml.createElement("block");r.setAttribute("type",o),t.appendChild(r)}else t=null;return(n=new e.Options({disable:!1,parentWorkspace:this.block_.workspace,media:this.block_.workspace.options.pathToMedia,rtl:this.block_.RTL,horizontalLayout:!1,renderer:this.block_.workspace.options.renderer,rendererOverrides:this.block_.workspace.options.rendererOverrides})).toolboxPosition=this.block_.RTL?e.utils.toolbox.Position.RIGHT:e.utils.toolbox.Position.LEFT,(o=!!t)&&(n.languageTree=e.utils.toolbox.convertToolboxDefToJson(t)),this.workspace_=new e.WorkspaceSvg(n),this.workspace_.isMutator=!0,this.workspace_.addChangeListener(e.Events.disableOrphans),t=o?this.workspace_.addFlyout(e.utils.Svg.G):null,n=this.workspace_.createDom("blocklyMutatorBackground"),t&&n.insertBefore(t,this.workspace_.svgBlockCanvas_),this.svgDialog_.appendChild(n),this.svgDialog_},e.Mutator.prototype.updateEditable=function(){e.Mutator.superClass_.updateEditable.call(this),this.block_.isInFlyout||(this.block_.isEditable()?this.iconGroup_&&e.utils.dom.removeClass(this.iconGroup_,"blocklyIconGroupReadonly"):(this.setVisible(!1),this.iconGroup_&&e.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly")))},e.Mutator.prototype.resizeBubble_=function(){var t=2*e.Bubble.BORDER_WIDTH,n=this.workspace_.getCanvas().getBBox(),o=n.width+n.x,r=n.height+3*t,p=this.workspace_.getFlyout();if(p){var b=p.getWorkspace().getMetricsManager().getScrollMetrics();r=Math.max(r,b.height+20),o+=p.getWidth()}this.block_.RTL&&(o=-n.x),o+=3*t,(Math.abs(this.workspaceWidth_-o)>t||Math.abs(this.workspaceHeight_-r)>t)&&(this.workspaceWidth_=o,this.workspaceHeight_=r,this.bubble_.setBubbleSize(o+t,r+t),this.svgDialog_.setAttribute("width",this.workspaceWidth_),this.svgDialog_.setAttribute("height",this.workspaceHeight_),this.workspace_.setCachedParentSvgSize(this.workspaceWidth_,this.workspaceHeight_)),this.block_.RTL&&(t="translate("+this.workspaceWidth_+",0)",this.workspace_.getCanvas().setAttribute("transform",t)),this.workspace_.resize()},e.Mutator.prototype.onBubbleMove_=function(){this.workspace_&&this.workspace_.recordDragTargets()},e.Mutator.prototype.setVisible=function(t){if(t!=this.isVisible())if(e.Events.fire(new(e.Events.get(e.Events.BUBBLE_OPEN))(this.block_,t,"mutator")),t){this.bubble_=new e.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,null,null),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerMoveEvent(this.onBubbleMove_.bind(this));var n=this.workspace_.options.languageTree;t=this.workspace_.getFlyout(),n&&(t.init(this.workspace_),t.show(n)),this.rootBlock_=this.block_.decompose(this.workspace_),n=this.rootBlock_.getDescendants(!1);for(var r,o=0;r=n[o];o++)r.render();if(this.rootBlock_.setMovable(!1),this.rootBlock_.setDeletable(!1),t?(n=2*t.CORNER_RADIUS,t=this.rootBlock_.RTL?t.getWidth()+n:n):t=n=16,this.block_.RTL&&(t=-t),this.rootBlock_.moveBy(t,n),this.block_.saveConnections){var p=this,b=this.block_;b.saveConnections(this.rootBlock_),this.sourceListener_=function(){b.saveConnections(p.rootBlock_)},this.block_.workspace.addChangeListener(this.sourceListener_)}this.resizeBubble_(),this.workspace_.addChangeListener(this.workspaceChanged_.bind(this)),this.applyColour()}else this.svgDialog_=null,this.workspace_.dispose(),this.rootBlock_=this.workspace_=null,this.bubble_.dispose(),this.bubble_=null,this.workspaceHeight_=this.workspaceWidth_=0,this.sourceListener_&&(this.block_.workspace.removeChangeListener(this.sourceListener_),this.sourceListener_=null)},e.Mutator.prototype.workspaceChanged_=function(t){if(!(t.isUiEvent||t.type==e.Events.CHANGE&&"disabled"==t.element)){if(!this.workspace_.isDragging()){t=this.workspace_.getTopBlocks(!1);for(var o,n=0;o=t[n];n++){var r=o.getRelativeToSurfaceXY();if(20>r.y&&o.moveBy(0,20-r.y),o.RTL){var p=-20,b=this.workspace_.getFlyout();b&&(p-=b.getWidth()),r.x>p&&o.moveBy(p-r.x,0)}else 20>r.x&&o.moveBy(20-r.x,0)}}if(this.rootBlock_.workspace==this.workspace_){if(e.Events.setGroup(!0),t=(t=(o=this.block_).mutationToDom())&&e.Xml.domToText(t),n=o.rendered,o.rendered=!1,o.compose(this.rootBlock_),o.rendered=n,o.initSvg(),o.rendered&&o.render(),t!=(n=(n=o.mutationToDom())&&e.Xml.domToText(n))){e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(o,"mutation",null,t,n));var I=e.Events.getGroup();setTimeout(function(){e.Events.setGroup(I),o.bumpNeighbours(),e.Events.setGroup(!1)},e.BUMP_DELAY)}this.workspace_.isDragging()||this.resizeBubble_(),e.Events.setGroup(!1)}}},e.Mutator.prototype.dispose=function(){this.block_.mutator=null,e.Icon.prototype.dispose.call(this)},e.Mutator.prototype.updateBlockStyle=function(){var t=this.workspace_;if(t&&t.getAllBlocks(!1)){for(var r,n=t.getAllBlocks(!1),o=0;r=n[o];o++)r.setStyle(r.getStyleName());if(o=t.getFlyout())for(t=o.workspace_.getAllBlocks(!1),o=0;r=t[o];o++)r.setStyle(r.getStyleName())}},e.Mutator.reconnect=function(t,n,o){if(!t||!t.getSourceBlock().workspace)return!1;o=n.getInput(o).connection;var r=t.targetBlock();return!(r&&r!=n||o.targetConnection==t||(o.isConnected()&&o.disconnect(),o.connect(t),0))},e.Mutator.findParentWs=function(t){var n=null;if(t&&t.options){var o=t.options.parentWorkspace;t.isFlyout?o&&o.options&&(n=o.options.parentWorkspace):o&&(n=o)}return n},e.FieldTextInput=function(t,n,o){this.spellcheck_=!0,e.FieldTextInput.superClass_.constructor.call(this,t,n,o),this.onKeyInputWrapper_=this.onKeyDownWrapper_=this.htmlInput_=null,this.fullBlockClickTarget_=!1,this.workspace_=null},e.utils.object.inherits(e.FieldTextInput,e.Field),e.FieldTextInput.prototype.DEFAULT_VALUE="",e.FieldTextInput.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.text);return new e.FieldTextInput(n,void 0,t)},e.FieldTextInput.prototype.SERIALIZABLE=!0,e.FieldTextInput.BORDERRADIUS=4,e.FieldTextInput.prototype.CURSOR="text",e.FieldTextInput.prototype.configure_=function(t){e.FieldTextInput.superClass_.configure_.call(this,t),"boolean"==typeof t.spellcheck&&(this.spellcheck_=t.spellcheck)},e.FieldTextInput.prototype.initView=function(){if(this.getConstants().FULL_BLOCK_FIELDS){for(var r,t=0,n=0,o=0;r=this.sourceBlock_.inputList[o];o++){for(var p=0;r.fieldRow[p];p++)t++;r.connection&&n++}this.fullBlockClickTarget_=1>=t&&this.sourceBlock_.outputConnection&&!n}else this.fullBlockClickTarget_=!1;this.fullBlockClickTarget_?this.clickTarget_=this.sourceBlock_.getSvgRoot():this.createBorderRect_(),this.createTextElement_()},e.FieldTextInput.prototype.doClassValidation_=function(t){return null==t?null:String(t)},e.FieldTextInput.prototype.doValueInvalid_=function(t){this.isBeingEdited_&&(this.isTextValid_=!1,t=this.value_,this.value_=this.htmlInput_.untypedDefaultValue_,this.sourceBlock_&&e.Events.isEnabled()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this.sourceBlock_,"field",this.name||null,t,this.value_)))},e.FieldTextInput.prototype.doValueUpdate_=function(t){this.isTextValid_=!0,this.value_=t,this.isBeingEdited_||(this.isDirty_=!0)},e.FieldTextInput.prototype.applyColour=function(){this.sourceBlock_&&this.getConstants().FULL_BLOCK_FIELDS&&(this.borderRect_?this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary):this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR))},e.FieldTextInput.prototype.render_=function(){if(e.FieldTextInput.superClass_.render_.call(this),this.isBeingEdited_){this.resizeEditor_();var t=this.htmlInput_;this.isTextValid_?(e.utils.dom.removeClass(t,"blocklyInvalidInput"),e.utils.aria.setState(t,e.utils.aria.State.INVALID,!1)):(e.utils.dom.addClass(t,"blocklyInvalidInput"),e.utils.aria.setState(t,e.utils.aria.State.INVALID,!0))}},e.FieldTextInput.prototype.setSpellcheck=function(t){t!=this.spellcheck_&&(this.spellcheck_=t,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))},e.FieldTextInput.prototype.showEditor_=function(t,n){this.workspace_=this.sourceBlock_.workspace,!(t=n||!1)&&(e.utils.userAgent.MOBILE||e.utils.userAgent.ANDROID||e.utils.userAgent.IPAD)?this.showPromptEditor_():this.showInlineEditor_(t)},e.FieldTextInput.prototype.showPromptEditor_=function(){e.prompt(e.Msg.CHANGE_VALUE_TITLE,this.getText(),function(t){this.setValue(this.getValueFromEditorText_(t))}.bind(this))},e.FieldTextInput.prototype.showInlineEditor_=function(t){e.WidgetDiv.show(this,this.sourceBlock_.RTL,this.widgetDispose_.bind(this)),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,t||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())},e.FieldTextInput.prototype.widgetCreate_=function(){var t=e.WidgetDiv.DIV;e.utils.dom.addClass(this.getClickTarget_(),"editing");var n=document.createElement("input");n.className="blocklyHtmlInput",n.setAttribute("spellcheck",this.spellcheck_);var o=this.workspace_.getScale(),r=this.getConstants().FIELD_TEXT_FONTSIZE*o+"pt";if(t.style.fontSize=r,n.style.fontSize=r,r=e.FieldTextInput.BORDERRADIUS*o+"px",this.fullBlockClickTarget_){r=((r=this.getScaledBBox()).bottom-r.top)/2+"px";var p=this.sourceBlock_.getParent()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;n.style.border=1*o+"px solid "+p,t.style.borderRadius=r,t.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(t.style.boxShadow="rgba(255, 255, 255, 0.3) 0px 0px 0px "+4*o+"px")}return n.style.borderRadius=r,t.appendChild(n),n.value=n.defaultValue=this.getEditorText_(this.value_),n.untypedDefaultValue_=this.value_,n.oldValue_=null,this.resizeEditor_(),this.bindInputEvents_(n),n},e.FieldTextInput.prototype.widgetDispose_=function(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_&&this.onFinishEditing_(this.value_),this.unbindInputEvents_();var t=e.WidgetDiv.DIV.style;t.width="auto",t.height="auto",t.fontSize="",t.transition="",t.boxShadow="",this.htmlInput_=null,e.utils.dom.removeClass(this.getClickTarget_(),"editing")},e.FieldTextInput.prototype.bindInputEvents_=function(t){this.onKeyDownWrapper_=e.browserEvents.conditionalBind(t,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper_=e.browserEvents.conditionalBind(t,"input",this,this.onHtmlInputChange_)},e.FieldTextInput.prototype.unbindInputEvents_=function(){this.onKeyDownWrapper_&&(e.browserEvents.unbind(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.onKeyInputWrapper_&&(e.browserEvents.unbind(this.onKeyInputWrapper_),this.onKeyInputWrapper_=null)},e.FieldTextInput.prototype.onHtmlInputKeyDown_=function(t){t.keyCode==e.utils.KeyCodes.ENTER?(e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation()):t.keyCode==e.utils.KeyCodes.ESC?(this.setValue(this.htmlInput_.untypedDefaultValue_),e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation()):t.keyCode==e.utils.KeyCodes.TAB&&(e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation(),this.sourceBlock_.tab(this,!t.shiftKey),t.preventDefault())},e.FieldTextInput.prototype.onHtmlInputChange_=function(t){(t=this.htmlInput_.value)!==this.htmlInput_.oldValue_&&(this.htmlInput_.oldValue_=t,e.Events.setGroup(!0),t=this.getValueFromEditorText_(t),this.setValue(t),this.forceRerender(),this.resizeEditor_(),e.Events.setGroup(!1))},e.FieldTextInput.prototype.setEditorValue_=function(t){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(t)),this.setValue(t)},e.FieldTextInput.prototype.resizeEditor_=function(){var t=e.WidgetDiv.DIV,n=this.getScaledBBox();t.style.width=n.right-n.left+"px",t.style.height=n.bottom-n.top+"px",n=new e.utils.Coordinate(this.sourceBlock_.RTL?n.right-t.offsetWidth:n.left,n.top),t.style.left=n.x+"px",t.style.top=n.y+"px"},e.FieldTextInput.prototype.isTabNavigable=function(){return!0},e.FieldTextInput.prototype.getText_=function(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null},e.FieldTextInput.prototype.getEditorText_=function(t){return String(t)},e.FieldTextInput.prototype.getValueFromEditorText_=function(t){return t},e.fieldRegistry.register("field_input",e.FieldTextInput),e.FieldAngle=function(t,n,o){this.clockwise_=e.FieldAngle.CLOCKWISE,this.offset_=e.FieldAngle.OFFSET,this.wrap_=e.FieldAngle.WRAP,this.round_=e.FieldAngle.ROUND,e.FieldAngle.superClass_.constructor.call(this,t,n,o),this.moveSurfaceWrapper_=this.clickSurfaceWrapper_=this.clickWrapper_=this.line_=this.gauge_=this.editor_=null},e.utils.object.inherits(e.FieldAngle,e.FieldTextInput),e.FieldAngle.prototype.DEFAULT_VALUE=0,e.FieldAngle.fromJson=function(t){return new e.FieldAngle(t.angle,void 0,t)},e.FieldAngle.prototype.SERIALIZABLE=!0,e.FieldAngle.ROUND=15,e.FieldAngle.HALF=50,e.FieldAngle.CLOCKWISE=!1,e.FieldAngle.OFFSET=0,e.FieldAngle.WRAP=360,e.FieldAngle.RADIUS=e.FieldAngle.HALF-1,e.FieldAngle.prototype.configure_=function(t){switch(e.FieldAngle.superClass_.configure_.call(this,t),t.mode){case"compass":this.clockwise_=!0,this.offset_=90;break;case"protractor":this.clockwise_=!1,this.offset_=0}var n=t.clockwise;"boolean"==typeof n&&(this.clockwise_=n),null!=(n=t.offset)&&(n=Number(n),isNaN(n)||(this.offset_=n)),null!=(n=t.wrap)&&(n=Number(n),isNaN(n)||(this.wrap_=n)),null!=(t=t.round)&&(t=Number(t),isNaN(t)||(this.round_=t))},e.FieldAngle.prototype.initView=function(){e.FieldAngle.superClass_.initView.call(this),this.symbol_=e.utils.dom.createSvgElement(e.utils.Svg.TSPAN,{},null),this.symbol_.appendChild(document.createTextNode("\xb0")),this.textElement_.appendChild(this.symbol_)},e.FieldAngle.prototype.render_=function(){e.FieldAngle.superClass_.render_.call(this),this.updateGraph_()},e.FieldAngle.prototype.showEditor_=function(t){e.FieldAngle.superClass_.showEditor_.call(this,t,e.utils.userAgent.MOBILE||e.utils.userAgent.ANDROID||e.utils.userAgent.IPAD),this.dropdownCreate_(),e.DropDownDiv.getContentDiv().appendChild(this.editor_),e.DropDownDiv.setColour(this.sourceBlock_.style.colourPrimary,this.sourceBlock_.style.colourTertiary),e.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.updateGraph_()},e.FieldAngle.prototype.dropdownCreate_=function(){var t=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{xmlns:e.utils.dom.SVG_NS,"xmlns:html":e.utils.dom.HTML_NS,"xmlns:xlink":e.utils.dom.XLINK_NS,version:"1.1",height:2*e.FieldAngle.HALF+"px",width:2*e.FieldAngle.HALF+"px",style:"touch-action: none"},null),n=e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{cx:e.FieldAngle.HALF,cy:e.FieldAngle.HALF,r:e.FieldAngle.RADIUS,class:"blocklyAngleCircle"},t);this.gauge_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyAngleGauge"},t),this.line_=e.utils.dom.createSvgElement(e.utils.Svg.LINE,{x1:e.FieldAngle.HALF,y1:e.FieldAngle.HALF,class:"blocklyAngleLine"},t);for(var o=0;360>o;o+=15)e.utils.dom.createSvgElement(e.utils.Svg.LINE,{x1:e.FieldAngle.HALF+e.FieldAngle.RADIUS,y1:e.FieldAngle.HALF,x2:e.FieldAngle.HALF+e.FieldAngle.RADIUS-(o%45==0?10:5),y2:e.FieldAngle.HALF,class:"blocklyAngleMarks",transform:"rotate("+o+","+e.FieldAngle.HALF+","+e.FieldAngle.HALF+")"},t);this.clickWrapper_=e.browserEvents.conditionalBind(t,"click",this,this.hide_),this.clickSurfaceWrapper_=e.browserEvents.conditionalBind(n,"click",this,this.onMouseMove_,!0,!0),this.moveSurfaceWrapper_=e.browserEvents.conditionalBind(n,"mousemove",this,this.onMouseMove_,!0,!0),this.editor_=t},e.FieldAngle.prototype.dropdownDispose_=function(){this.clickWrapper_&&(e.browserEvents.unbind(this.clickWrapper_),this.clickWrapper_=null),this.clickSurfaceWrapper_&&(e.browserEvents.unbind(this.clickSurfaceWrapper_),this.clickSurfaceWrapper_=null),this.moveSurfaceWrapper_&&(e.browserEvents.unbind(this.moveSurfaceWrapper_),this.moveSurfaceWrapper_=null),this.line_=this.gauge_=null},e.FieldAngle.prototype.hide_=function(){e.DropDownDiv.hideIfOwner(this),e.WidgetDiv.hide()},e.FieldAngle.prototype.onMouseMove_=function(t){var n=this.gauge_.ownerSVGElement.getBoundingClientRect(),o=t.clientX-n.left-e.FieldAngle.HALF;t=t.clientY-n.top-e.FieldAngle.HALF,n=Math.atan(-t/o),isNaN(n)||(n=e.utils.math.toDegrees(n),0>o?n+=180:0<t&&(n+=360),this.displayMouseOrKeyboardValue_(n=this.clockwise_?this.offset_+360-n:360-(this.offset_-n)))},e.FieldAngle.prototype.displayMouseOrKeyboardValue_=function(t){this.round_&&(t=Math.round(t/this.round_)*this.round_),(t=this.wrapValue_(t))!=this.value_&&this.setEditorValue_(t)},e.FieldAngle.prototype.updateGraph_=function(){if(this.gauge_){var t=Number(this.getText())+this.offset_,n=e.utils.math.toRadians(t%360);t=["M ",e.FieldAngle.HALF,",",e.FieldAngle.HALF];var o=e.FieldAngle.HALF,r=e.FieldAngle.HALF;if(!isNaN(n)){var p=Number(this.clockwise_),b=e.utils.math.toRadians(this.offset_),I=Math.cos(b)*e.FieldAngle.RADIUS,x=Math.sin(b)*-e.FieldAngle.RADIUS;p&&(n=2*b-n),o+=Math.cos(n)*e.FieldAngle.RADIUS,r-=Math.sin(n)*e.FieldAngle.RADIUS,n=Math.abs(Math.floor((n-b)/Math.PI)%2),p&&(n=1-n),t.push(" l ",I,",",x," A ",e.FieldAngle.RADIUS,",",e.FieldAngle.RADIUS," 0 ",n," ",p," ",o,",",r," z")}this.gauge_.setAttribute("d",t.join("")),this.line_.setAttribute("x2",o),this.line_.setAttribute("y2",r)}},e.FieldAngle.prototype.onHtmlInputKeyDown_=function(t){var n;if(e.FieldAngle.superClass_.onHtmlInputKeyDown_.call(this,t),t.keyCode===e.utils.KeyCodes.LEFT?n=this.sourceBlock_.RTL?1:-1:t.keyCode===e.utils.KeyCodes.RIGHT?n=this.sourceBlock_.RTL?-1:1:t.keyCode===e.utils.KeyCodes.DOWN?n=-1:t.keyCode===e.utils.KeyCodes.UP&&(n=1),n){var o=this.getValue();this.displayMouseOrKeyboardValue_(o+n*this.round_),t.preventDefault(),t.stopPropagation()}},e.FieldAngle.prototype.doClassValidation_=function(t){return t=Number(t),isNaN(t)||!isFinite(t)?null:this.wrapValue_(t)},e.FieldAngle.prototype.wrapValue_=function(t){return 0>(t%=360)&&(t+=360),t>this.wrap_&&(t-=360),t},e.Css.register(".blocklyAngleCircle {,stroke: #444;,stroke-width: 1;,fill: #ddd;,fill-opacity: .8;,},.blocklyAngleMarks {,stroke: #444;,stroke-width: 1;,},.blocklyAngleGauge {,fill: #f88;,fill-opacity: .8;,pointer-events: none;,},.blocklyAngleLine {,stroke: #f00;,stroke-width: 2;,stroke-linecap: round;,pointer-events: none;,}".split(",")),e.fieldRegistry.register("field_angle",e.FieldAngle),e.FieldCheckbox=function(t,n,o){this.checkChar_=null,e.FieldCheckbox.superClass_.constructor.call(this,t,n,o)},e.utils.object.inherits(e.FieldCheckbox,e.Field),e.FieldCheckbox.prototype.DEFAULT_VALUE=!1,e.FieldCheckbox.fromJson=function(t){return new e.FieldCheckbox(t.checked,void 0,t)},e.FieldCheckbox.CHECK_CHAR="\u2713",e.FieldCheckbox.prototype.SERIALIZABLE=!0,e.FieldCheckbox.prototype.CURSOR="default",e.FieldCheckbox.prototype.configure_=function(t){e.FieldCheckbox.superClass_.configure_.call(this,t),t.checkCharacter&&(this.checkChar_=t.checkCharacter)},e.FieldCheckbox.prototype.initView=function(){e.FieldCheckbox.superClass_.initView.call(this),e.utils.dom.addClass(this.textElement_,"blocklyCheckbox"),this.textElement_.style.display=this.value_?"block":"none"},e.FieldCheckbox.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)},e.FieldCheckbox.prototype.getDisplayText_=function(){return this.checkChar_||e.FieldCheckbox.CHECK_CHAR},e.FieldCheckbox.prototype.setCheckCharacter=function(t){this.checkChar_=t,this.forceRerender()},e.FieldCheckbox.prototype.showEditor_=function(){this.setValue(!this.value_)},e.FieldCheckbox.prototype.doClassValidation_=function(t){return!0===t||"TRUE"===t?"TRUE":!1===t||"FALSE"===t?"FALSE":null},e.FieldCheckbox.prototype.doValueUpdate_=function(t){this.value_=this.convertValueToBool_(t),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")},e.FieldCheckbox.prototype.getValue=function(){return this.value_?"TRUE":"FALSE"},e.FieldCheckbox.prototype.getValueBoolean=function(){return this.value_},e.FieldCheckbox.prototype.getText=function(){return String(this.convertValueToBool_(this.value_))},e.FieldCheckbox.prototype.convertValueToBool_=function(t){return"string"==typeof t?"TRUE"==t:!!t},e.fieldRegistry.register("field_checkbox",e.FieldCheckbox),e.FieldColour=function(t,n,o){e.FieldColour.superClass_.constructor.call(this,t,n,o),this.onKeyDownWrapper_=this.onMouseLeaveWrapper_=this.onMouseEnterWrapper_=this.onMouseMoveWrapper_=this.onClickWrapper_=this.highlightedIndex_=this.picker_=null},e.utils.object.inherits(e.FieldColour,e.Field),e.FieldColour.fromJson=function(t){return new e.FieldColour(t.colour,void 0,t)},e.FieldColour.prototype.SERIALIZABLE=!0,e.FieldColour.prototype.CURSOR="default",e.FieldColour.prototype.isDirty_=!1,e.FieldColour.prototype.colours_=null,e.FieldColour.prototype.titles_=null,e.FieldColour.prototype.columns_=0,e.FieldColour.prototype.configure_=function(t){e.FieldColour.superClass_.configure_.call(this,t),t.colourOptions&&(this.colours_=t.colourOptions,this.titles_=t.colourTitles),t.columns&&(this.columns_=t.columns)},e.FieldColour.prototype.initView=function(){this.size_=new e.utils.Size(this.getConstants().FIELD_COLOUR_DEFAULT_WIDTH,this.getConstants().FIELD_COLOUR_DEFAULT_HEIGHT),this.getConstants().FIELD_COLOUR_FULL_BLOCK?this.clickTarget_=this.sourceBlock_.getSvgRoot():(this.createBorderRect_(),this.borderRect_.style.fillOpacity="1")},e.FieldColour.prototype.applyColour=function(){this.getConstants().FIELD_COLOUR_FULL_BLOCK?(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getValue()),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff")):this.borderRect_&&(this.borderRect_.style.fill=this.getValue())},e.FieldColour.prototype.doClassValidation_=function(t){return"string"!=typeof t?null:e.utils.colour.parse(t)},e.FieldColour.prototype.doValueUpdate_=function(t){this.value_=t,this.borderRect_?this.borderRect_.style.fill=t:this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",t),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff"))},e.FieldColour.prototype.getText=function(){var t=this.value_;return/^#(.)\1(.)\2(.)\3$/.test(t)&&(t="#"+t[1]+t[3]+t[5]),t},e.FieldColour.COLOURS="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" "),e.FieldColour.prototype.DEFAULT_VALUE=e.FieldColour.COLOURS[0],e.FieldColour.TITLES=[],e.FieldColour.COLUMNS=7,e.FieldColour.prototype.setColours=function(t,n){return this.colours_=t,n&&(this.titles_=n),this},e.FieldColour.prototype.setColumns=function(t){return this.columns_=t,this},e.FieldColour.prototype.showEditor_=function(){this.dropdownCreate_(),e.DropDownDiv.getContentDiv().appendChild(this.picker_),e.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.picker_.focus({preventScroll:!0})},e.FieldColour.prototype.onClick_=function(t){null!==(t=(t=t.target)&&t.label)&&(this.setValue(t),e.DropDownDiv.hideIfOwner(this))},e.FieldColour.prototype.onKeyDown_=function(t){var n=!1;t.keyCode===e.utils.KeyCodes.UP?(this.moveHighlightBy_(0,-1),n=!0):t.keyCode===e.utils.KeyCodes.DOWN?(this.moveHighlightBy_(0,1),n=!0):t.keyCode===e.utils.KeyCodes.LEFT?(this.moveHighlightBy_(-1,0),n=!0):t.keyCode===e.utils.KeyCodes.RIGHT?(this.moveHighlightBy_(1,0),n=!0):t.keyCode===e.utils.KeyCodes.ENTER&&((n=this.getHighlighted_())&&null!==(n=n&&n.label)&&this.setValue(n),e.DropDownDiv.hideWithoutAnimation(),n=!0),n&&t.stopPropagation()},e.FieldColour.prototype.moveHighlightBy_=function(t,n){var o=this.colours_||e.FieldColour.COLOURS,r=this.columns_||e.FieldColour.COLUMNS,p=this.highlightedIndex_%r,b=Math.floor(this.highlightedIndex_/r);p+=t,b+=n,0>t?0>p&&0<b?(p=r-1,b--):0>p&&(p=0):0<t?p>r-1&&b<Math.floor(o.length/r)-1?(p=0,b++):p>r-1&&p--:0>n?0>b&&(b=0):0<n&&b>Math.floor(o.length/r)-1&&(b=Math.floor(o.length/r)-1),this.setHighlightedCell_(this.picker_.childNodes[b].childNodes[p],b*r+p)},e.FieldColour.prototype.onMouseMove_=function(t){var n=(t=t.target)&&Number(t.getAttribute("data-index"));null!==n&&n!==this.highlightedIndex_&&this.setHighlightedCell_(t,n)},e.FieldColour.prototype.onMouseEnter_=function(){this.picker_.focus({preventScroll:!0})},e.FieldColour.prototype.onMouseLeave_=function(){this.picker_.blur();var t=this.getHighlighted_();t&&e.utils.dom.removeClass(t,"blocklyColourHighlighted")},e.FieldColour.prototype.getHighlighted_=function(){var t=this.columns_||e.FieldColour.COLUMNS,n=this.picker_.childNodes[Math.floor(this.highlightedIndex_/t)];return n?n.childNodes[this.highlightedIndex_%t]:null},e.FieldColour.prototype.setHighlightedCell_=function(t,n){var o=this.getHighlighted_();o&&e.utils.dom.removeClass(o,"blocklyColourHighlighted"),e.utils.dom.addClass(t,"blocklyColourHighlighted"),this.highlightedIndex_=n,e.utils.aria.setState(this.picker_,e.utils.aria.State.ACTIVEDESCENDANT,t.getAttribute("id"))},e.FieldColour.prototype.dropdownCreate_=function(){var t=this.columns_||e.FieldColour.COLUMNS,n=this.colours_||e.FieldColour.COLOURS,o=this.titles_||e.FieldColour.TITLES,r=this.getValue(),p=document.createElement("table");p.className="blocklyColourTable",p.tabIndex=0,p.dir="ltr",e.utils.aria.setRole(p,e.utils.aria.Role.GRID),e.utils.aria.setState(p,e.utils.aria.State.EXPANDED,!0),e.utils.aria.setState(p,e.utils.aria.State.ROWCOUNT,Math.floor(n.length/t)),e.utils.aria.setState(p,e.utils.aria.State.COLCOUNT,t);for(var b,I=0;I<n.length;I++){I%t==0&&(b=document.createElement("tr"),e.utils.aria.setRole(b,e.utils.aria.Role.ROW),p.appendChild(b));var x=document.createElement("td");b.appendChild(x),x.label=n[I],x.title=o[I]||n[I],x.id=e.utils.IdGenerator.getNextUniqueId(),x.setAttribute("data-index",I),e.utils.aria.setRole(x,e.utils.aria.Role.GRIDCELL),e.utils.aria.setState(x,e.utils.aria.State.LABEL,n[I]),e.utils.aria.setState(x,e.utils.aria.State.SELECTED,n[I]==r),x.style.backgroundColor=n[I],n[I]==r&&(x.className="blocklyColourSelected",this.highlightedIndex_=I)}this.onClickWrapper_=e.browserEvents.conditionalBind(p,"click",this,this.onClick_,!0),this.onMouseMoveWrapper_=e.browserEvents.conditionalBind(p,"mousemove",this,this.onMouseMove_,!0),this.onMouseEnterWrapper_=e.browserEvents.conditionalBind(p,"mouseenter",this,this.onMouseEnter_,!0),this.onMouseLeaveWrapper_=e.browserEvents.conditionalBind(p,"mouseleave",this,this.onMouseLeave_,!0),this.onKeyDownWrapper_=e.browserEvents.conditionalBind(p,"keydown",this,this.onKeyDown_),this.picker_=p},e.FieldColour.prototype.dropdownDispose_=function(){this.onClickWrapper_&&(e.browserEvents.unbind(this.onClickWrapper_),this.onClickWrapper_=null),this.onMouseMoveWrapper_&&(e.browserEvents.unbind(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null),this.onMouseEnterWrapper_&&(e.browserEvents.unbind(this.onMouseEnterWrapper_),this.onMouseEnterWrapper_=null),this.onMouseLeaveWrapper_&&(e.browserEvents.unbind(this.onMouseLeaveWrapper_),this.onMouseLeaveWrapper_=null),this.onKeyDownWrapper_&&(e.browserEvents.unbind(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.highlightedIndex_=this.picker_=null},e.Css.register([".blocklyColourTable {","border-collapse: collapse;","display: block;","outline: none;","padding: 1px;","}",".blocklyColourTable>tr>td {","border: .5px solid #888;","box-sizing: border-box;","cursor: pointer;","display: inline-block;","height: 20px;","padding: 0;","width: 20px;","}",".blocklyColourTable>tr>td.blocklyColourHighlighted {","border-color: #eee;","box-shadow: 2px 2px 7px 2px rgba(0,0,0,.3);","position: relative;","}",".blocklyColourSelected, .blocklyColourSelected:hover {","border-color: #eee !important;","outline: 1px solid #333;","position: relative;","}"]),e.fieldRegistry.register("field_colour",e.FieldColour),e.FieldDropdown=function(t,n,o){"function"!=typeof t&&e.FieldDropdown.validateOptions_(t),this.menuGenerator_=t,this.suffixField=this.prefixField=this.generatedOptions_=null,this.trimOptions_(),this.selectedOption_=this.getOptions(!1)[0],e.FieldDropdown.superClass_.constructor.call(this,this.selectedOption_[1],n,o),this.svgArrow_=this.arrow_=this.imageElement_=this.menu_=this.selectedMenuItem_=null},e.utils.object.inherits(e.FieldDropdown,e.Field),e.FieldDropdown.fromJson=function(t){return new e.FieldDropdown(t.options,void 0,t)},e.FieldDropdown.prototype.fromXml=function(t){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(t.textContent)},e.FieldDropdown.prototype.SERIALIZABLE=!0,e.FieldDropdown.CHECKMARK_OVERHANG=25,e.FieldDropdown.MAX_MENU_HEIGHT_VH=.45,e.FieldDropdown.IMAGE_Y_OFFSET=5,e.FieldDropdown.IMAGE_Y_PADDING=2*e.FieldDropdown.IMAGE_Y_OFFSET,e.FieldDropdown.ARROW_CHAR=e.utils.userAgent.ANDROID?"\u25bc":"\u25be",e.FieldDropdown.prototype.CURSOR="default",e.FieldDropdown.prototype.initView=function(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement_=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&e.utils.dom.addClass(this.borderRect_,"blocklyDropdownRect")},e.FieldDropdown.prototype.shouldAddBorderRect_=function(){return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!this.sourceBlock_.isShadow()},e.FieldDropdown.prototype.createTextArrow_=function(){this.arrow_=e.utils.dom.createSvgElement(e.utils.Svg.TSPAN,{},this.textElement_),this.arrow_.appendChild(document.createTextNode(this.sourceBlock_.RTL?e.FieldDropdown.ARROW_CHAR+" ":" "+e.FieldDropdown.ARROW_CHAR)),this.sourceBlock_.RTL?this.textElement_.insertBefore(this.arrow_,this.textContent_):this.textElement_.appendChild(this.arrow_)},e.FieldDropdown.prototype.createSVGArrow_=function(){this.svgArrow_=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)},e.FieldDropdown.prototype.showEditor_=function(t){if(this.dropdownCreate_(),this.menu_.openingCoords=t&&"number"==typeof t.clientX?new e.utils.Coordinate(t.clientX,t.clientY):null,this.menu_.render(e.DropDownDiv.getContentDiv()),t=this.menu_.getElement(),e.utils.dom.addClass(t,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV){t=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().getColour():this.sourceBlock_.getColour();var n=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;e.DropDownDiv.setColour(t,n)}e.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem_&&this.menu_.setHighlighted(this.selectedMenuItem_),this.applyColour()},e.FieldDropdown.prototype.dropdownCreate_=function(){var t=new e.Menu;t.setRole(e.utils.aria.Role.LISTBOX),this.menu_=t;var n=this.getOptions(!1);this.selectedMenuItem_=null;for(var o=0;o<n.length;o++){var r=n[o][0],p=n[o][1];if("object"==typeof r){var b=new Image(r.width,r.height);b.src=r.src,b.alt=r.alt||"",r=b}(r=new e.MenuItem(r,p)).setRole(e.utils.aria.Role.OPTION),r.setRightToLeft(this.sourceBlock_.RTL),r.setCheckable(!0),t.addChild(r),r.setChecked(p==this.value_),p==this.value_&&(this.selectedMenuItem_=r),r.onAction(this.handleMenuActionEvent_,this)}},e.FieldDropdown.prototype.dropdownDispose_=function(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem_=this.menu_=null,this.applyColour()},e.FieldDropdown.prototype.handleMenuActionEvent_=function(t){e.DropDownDiv.hideIfOwner(this,!0),this.onItemSelected_(this.menu_,t)},e.FieldDropdown.prototype.onItemSelected_=function(t,n){this.setValue(n.getValue())},e.FieldDropdown.prototype.trimOptions_=function(){var t=this.menuGenerator_;if(Array.isArray(t)){for(var n=!1,o=0;o<t.length;o++){var r=t[o][0];"string"==typeof r?t[o][0]=e.utils.replaceMessageReferences(r):(null!=r.alt&&(t[o][0].alt=e.utils.replaceMessageReferences(r.alt)),n=!0)}if(!(n||2>t.length)){for(n=[],o=0;o<t.length;o++)n.push(t[o][0]);o=e.utils.string.shortestStringLength(n),r=e.utils.string.commonWordPrefix(n,o);var p=e.utils.string.commonWordSuffix(n,o);!r&&!p||o<=r+p||(r&&(this.prefixField=n[0].substring(0,r-1)),p&&(this.suffixField=n[0].substr(1-p)),this.menuGenerator_=e.FieldDropdown.applyTrim_(t,r,p))}}},e.FieldDropdown.applyTrim_=function(t,n,o){for(var r=[],p=0;p<t.length;p++){var b=t[p][0],I=t[p][1];b=b.substring(n,b.length-o),r[p]=[b,I]}return r},e.FieldDropdown.prototype.isOptionListDynamic=function(){return"function"==typeof this.menuGenerator_},e.FieldDropdown.prototype.getOptions=function(t){return this.isOptionListDynamic()?(this.generatedOptions_&&t||(this.generatedOptions_=this.menuGenerator_.call(this),e.FieldDropdown.validateOptions_(this.generatedOptions_)),this.generatedOptions_):this.menuGenerator_},e.FieldDropdown.prototype.doClassValidation_=function(t){for(var p,n=!1,o=this.getOptions(!0),r=0;p=o[r];r++)if(p[1]==t){n=!0;break}return n?t:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+t),null)},e.FieldDropdown.prototype.doValueUpdate_=function(t){e.FieldDropdown.superClass_.doValueUpdate_.call(this,t),t=this.getOptions(!0);for(var o,n=0;o=t[n];n++)o[1]==this.value_&&(this.selectedOption_=o)},e.FieldDropdown.prototype.applyColour=function(){this.borderRect_&&(this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary),this.borderRect_.setAttribute("fill",this.menu_?this.sourceBlock_.style.colourTertiary:"transparent")),this.sourceBlock_&&this.arrow_&&(this.arrow_.style.fill=this.sourceBlock_.isShadow()?this.sourceBlock_.style.colourSecondary:this.sourceBlock_.style.colourPrimary)},e.FieldDropdown.prototype.render_=function(){this.textContent_.nodeValue="",this.imageElement_.style.display="none";var t=this.selectedOption_&&this.selectedOption_[0];t&&"object"==typeof t?this.renderSelectedImage_(t):this.renderSelectedText_(),this.positionBorderRect_()},e.FieldDropdown.prototype.renderSelectedImage_=function(t){this.imageElement_.style.display="",this.imageElement_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",t.src),this.imageElement_.setAttribute("height",t.height),this.imageElement_.setAttribute("width",t.width);var n=Number(t.height);t=Number(t.width);var o=!!this.borderRect_,r=Math.max(o?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,n+e.FieldDropdown.IMAGE_Y_PADDING);o=o?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var p=this.svgArrow_?this.positionSVGArrow_(t+o,r/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):e.utils.dom.getFastTextWidth(this.arrow_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);this.size_.width=t+p+2*o,this.size_.height=r;var b=0;this.sourceBlock_.RTL?this.imageElement_.setAttribute("x",o+p):(b=t+p,this.textElement_.setAttribute("text-anchor","end"),this.imageElement_.setAttribute("x",o)),this.imageElement_.setAttribute("y",r/2-n/2),this.positionTextElement_(b+o,t+p)},e.FieldDropdown.prototype.renderSelectedText_=function(){this.textContent_.nodeValue=this.getDisplayText_(),e.utils.dom.addClass(this.textElement_,"blocklyDropdownText"),this.textElement_.setAttribute("text-anchor","start");var t=!!this.borderRect_,n=Math.max(t?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT),o=e.utils.dom.getFastTextWidth(this.textElement_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);t=t?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var r=0;this.svgArrow_&&(r=this.positionSVGArrow_(o+t,n/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=o+r+2*t,this.size_.height=n,this.positionTextElement_(t,o)},e.FieldDropdown.prototype.positionSVGArrow_=function(t,n){if(!this.svgArrow_)return 0;var o=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,r=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,p=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow_.setAttribute("transform","translate("+(this.sourceBlock_.RTL?o:t+r)+","+n+")"),p+r},e.FieldDropdown.prototype.getText_=function(){if(!this.selectedOption_)return null;var t=this.selectedOption_[0];return"object"==typeof t?t.alt:t},e.FieldDropdown.validateOptions_=function(t){if(!Array.isArray(t))throw TypeError("FieldDropdown options must be an array.");if(!t.length)throw TypeError("FieldDropdown options must not be an empty array.");for(var n=!1,o=0;o<t.length;++o){var r=t[o];Array.isArray(r)?"string"!=typeof r[1]?(n=!0,console.error("Invalid option["+o+"]: Each FieldDropdown option id must be a string. Found "+r[1]+" in: ",r)):r[0]&&"string"!=typeof r[0]&&"string"!=typeof r[0].src&&(n=!0,console.error("Invalid option["+o+"]: Each FieldDropdown option must have a string label or image description. Found"+r[0]+" in: ",r)):(n=!0,console.error("Invalid option["+o+"]: Each FieldDropdown option must be an array. Found: ",r))}if(n)throw TypeError("Found invalid FieldDropdown options.")},e.fieldRegistry.register("field_dropdown",e.FieldDropdown),e.FieldLabelSerializable=function(t,n,o){e.FieldLabelSerializable.superClass_.constructor.call(this,t,n,o)},e.utils.object.inherits(e.FieldLabelSerializable,e.FieldLabel),e.FieldLabelSerializable.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.text);return new e.FieldLabelSerializable(n,void 0,t)},e.FieldLabelSerializable.prototype.EDITABLE=!1,e.FieldLabelSerializable.prototype.SERIALIZABLE=!0,e.fieldRegistry.register("field_label_serializable",e.FieldLabelSerializable),e.FieldImage=function(t,n,o,r,p,b,I){if(!t)throw Error("Src value of an image field is required");if(t=e.utils.replaceMessageReferences(t),o=Number(e.utils.replaceMessageReferences(o)),n=Number(e.utils.replaceMessageReferences(n)),isNaN(o)||isNaN(n))throw Error("Height and width values of an image field must cast to numbers.");if(0>=o||0>=n)throw Error("Height and width values of an image field must be greater than 0.");this.flipRtl_=!1,this.altText_="",e.FieldImage.superClass_.constructor.call(this,t,null,I),I||(this.flipRtl_=!!b,this.altText_=e.utils.replaceMessageReferences(r)||""),this.size_=new e.utils.Size(n,o+e.FieldImage.Y_PADDING),this.imageHeight_=o,this.clickHandler_=null,"function"==typeof p&&(this.clickHandler_=p),this.imageElement_=null},e.utils.object.inherits(e.FieldImage,e.Field),e.FieldImage.prototype.DEFAULT_VALUE="",e.FieldImage.fromJson=function(t){return new e.FieldImage(t.src,t.width,t.height,void 0,void 0,void 0,t)},e.FieldImage.Y_PADDING=1,e.FieldImage.prototype.EDITABLE=!1,e.FieldImage.prototype.isDirty_=!1,e.FieldImage.prototype.configure_=function(t){e.FieldImage.superClass_.configure_.call(this,t),this.flipRtl_=!!t.flipRtl,this.altText_=e.utils.replaceMessageReferences(t.alt)||""},e.FieldImage.prototype.initView=function(){this.imageElement_=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{height:this.imageHeight_+"px",width:this.size_.width+"px",alt:this.altText_},this.fieldGroup_),this.imageElement_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.value_),this.clickHandler_&&(this.imageElement_.style.cursor="pointer")},e.FieldImage.prototype.updateSize_=function(){},e.FieldImage.prototype.doClassValidation_=function(t){return"string"!=typeof t?null:t},e.FieldImage.prototype.doValueUpdate_=function(t){this.value_=t,this.imageElement_&&this.imageElement_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",String(this.value_))},e.FieldImage.prototype.getFlipRtl=function(){return this.flipRtl_},e.FieldImage.prototype.setAlt=function(t){t!=this.altText_&&(this.altText_=t||"",this.imageElement_&&this.imageElement_.setAttribute("alt",this.altText_))},e.FieldImage.prototype.showEditor_=function(){this.clickHandler_&&this.clickHandler_(this)},e.FieldImage.prototype.setOnClickHandler=function(t){this.clickHandler_=t},e.FieldImage.prototype.getText_=function(){return this.altText_},e.fieldRegistry.register("field_image",e.FieldImage),e.FieldMultilineInput=function(t,n,o){e.FieldMultilineInput.superClass_.constructor.call(this,t,n,o),this.textGroup_=null,this.maxLines_=1/0,this.isOverflowedY_=!1},e.utils.object.inherits(e.FieldMultilineInput,e.FieldTextInput),e.FieldMultilineInput.prototype.configure_=function(t){e.FieldMultilineInput.superClass_.configure_.call(this,t),t.maxLines&&this.setMaxLines(t.maxLines)},e.FieldMultilineInput.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.text);return new e.FieldMultilineInput(n,void 0,t)},e.FieldMultilineInput.prototype.toXml=function(t){return t.textContent=this.getValue().replace(/\n/g,"&#10;"),t},e.FieldMultilineInput.prototype.fromXml=function(t){this.setValue(t.textContent.replace(/&#10;/g,"\n"))},e.FieldMultilineInput.prototype.initView=function(){this.createBorderRect_(),this.textGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyEditableText"},this.fieldGroup_)},e.FieldMultilineInput.prototype.getDisplayText_=function(){var t=this.getText();if(!t)return e.Field.NBSP;var n=t.split("\n");t="";for(var o=this.isOverflowedY_?this.maxLines_:n.length,r=0;r<o;r++){var p=n[r];p.length>this.maxDisplayLength?p=p.substring(0,this.maxDisplayLength-4)+"...":this.isOverflowedY_&&r===o-1&&(p=p.substring(0,p.length-3)+"..."),t+=p=p.replace(/\s/g,e.Field.NBSP),r!==o-1&&(t+="\n")}return this.sourceBlock_.RTL&&(t+="\u200f"),t},e.FieldMultilineInput.prototype.doValueUpdate_=function(t){e.FieldMultilineInput.superClass_.doValueUpdate_.call(this,t),this.isOverflowedY_=this.value_.split("\n").length>this.maxLines_},e.FieldMultilineInput.prototype.render_=function(){for(var t;t=this.textGroup_.firstChild;)this.textGroup_.removeChild(t);t=this.getDisplayText_().split("\n");for(var n=0,o=0;o<t.length;o++){var r=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING;e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:"blocklyText blocklyMultilineText",x:this.getConstants().FIELD_BORDER_RECT_X_PADDING,y:n+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,dy:this.getConstants().FIELD_TEXT_BASELINE},this.textGroup_).appendChild(document.createTextNode(t[o])),n+=r}this.isBeingEdited_&&(t=this.htmlInput_,this.isOverflowedY_?e.utils.dom.addClass(t,"blocklyHtmlTextAreaInputOverflowedY"):e.utils.dom.removeClass(t,"blocklyHtmlTextAreaInputOverflowedY")),this.updateSize_(),this.isBeingEdited_&&(this.sourceBlock_.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),t=this.htmlInput_,this.isTextValid_?(e.utils.dom.removeClass(t,"blocklyInvalidInput"),e.utils.aria.setState(t,e.utils.aria.State.INVALID,!1)):(e.utils.dom.addClass(t,"blocklyInvalidInput"),e.utils.aria.setState(t,e.utils.aria.State.INVALID,!0)))},e.FieldMultilineInput.prototype.updateSize_=function(){for(var t=this.textGroup_.childNodes,n=0,o=0,r=0;r<t.length;r++){var p=e.utils.dom.getTextWidth(t[r]);p>n&&(n=p),o+=this.getConstants().FIELD_TEXT_HEIGHT+(0<r?this.getConstants().FIELD_BORDER_RECT_Y_PADDING:0)}if(this.isBeingEdited_){t=this.value_.split("\n"),p=e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:"blocklyText blocklyMultilineText"});var b=this.getConstants().FIELD_TEXT_FONTSIZE,I=this.getConstants().FIELD_TEXT_FONTWEIGHT,x=this.getConstants().FIELD_TEXT_FONTFAMILY;for(r=0;r<t.length;r++){t[r].length>this.maxDisplayLength&&(t[r]=t[r].substring(0,this.maxDisplayLength)),p.textContent=t[r];var k=e.utils.dom.getFastTextWidth(p,b,I,x);k>n&&(n=k)}n+=this.htmlInput_.offsetWidth-this.htmlInput_.clientWidth}this.borderRect_&&(o+=2*this.getConstants().FIELD_BORDER_RECT_Y_PADDING,n+=2*this.getConstants().FIELD_BORDER_RECT_X_PADDING,this.borderRect_.setAttribute("width",n),this.borderRect_.setAttribute("height",o)),this.size_.width=n,this.size_.height=o,this.positionBorderRect_()},e.FieldMultilineInput.prototype.showEditor_=function(t,n){e.FieldMultilineInput.superClass_.showEditor_.call(this,t,n),this.forceRerender()},e.FieldMultilineInput.prototype.widgetCreate_=function(){var t=e.WidgetDiv.DIV,n=this.workspace_.getScale(),o=document.createElement("textarea");o.className="blocklyHtmlInput blocklyHtmlTextAreaInput",o.setAttribute("spellcheck",this.spellcheck_);var r=this.getConstants().FIELD_TEXT_FONTSIZE*n+"pt";t.style.fontSize=r,o.style.fontSize=r,o.style.borderRadius=e.FieldTextInput.BORDERRADIUS*n+"px",r=this.getConstants().FIELD_BORDER_RECT_X_PADDING*n;var p=this.getConstants().FIELD_BORDER_RECT_Y_PADDING*n/2;return o.style.padding=p+"px "+r+"px "+p+"px "+r+"px",r=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,o.style.lineHeight=r*n+"px",t.appendChild(o),o.value=o.defaultValue=this.getEditorText_(this.value_),o.untypedDefaultValue_=this.value_,o.oldValue_=null,e.utils.userAgent.GECKO?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.bindInputEvents_(o),o},e.FieldMultilineInput.prototype.setMaxLines=function(t){"number"==typeof t&&0<t&&t!==this.maxLines_&&(this.maxLines_=t,this.forceRerender())},e.FieldMultilineInput.prototype.getMaxLines=function(){return this.maxLines_},e.FieldMultilineInput.prototype.onHtmlInputKeyDown_=function(t){t.keyCode!==e.utils.KeyCodes.ENTER&&e.FieldMultilineInput.superClass_.onHtmlInputKeyDown_.call(this,t)},e.Css.register(".blocklyHtmlTextAreaInput {,font-family: monospace;,resize: none;,overflow: hidden;,height: 100%;,text-align: left;,},.blocklyHtmlTextAreaInputOverflowedY {,overflow-y: scroll;,}".split(",")),e.fieldRegistry.register("field_multilinetext",e.FieldMultilineInput),e.FieldNumber=function(t,n,o,r,p,b){this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces_=null,e.FieldNumber.superClass_.constructor.call(this,t,p,b),b||this.setConstraints(n,o,r)},e.utils.object.inherits(e.FieldNumber,e.FieldTextInput),e.FieldNumber.prototype.DEFAULT_VALUE=0,e.FieldNumber.fromJson=function(t){return new e.FieldNumber(t.value,void 0,void 0,void 0,void 0,t)},e.FieldNumber.prototype.SERIALIZABLE=!0,e.FieldNumber.prototype.configure_=function(t){e.FieldNumber.superClass_.configure_.call(this,t),this.setMinInternal_(t.min),this.setMaxInternal_(t.max),this.setPrecisionInternal_(t.precision)},e.FieldNumber.prototype.setConstraints=function(t,n,o){this.setMinInternal_(t),this.setMaxInternal_(n),this.setPrecisionInternal_(o),this.setValue(this.getValue())},e.FieldNumber.prototype.setMin=function(t){this.setMinInternal_(t),this.setValue(this.getValue())},e.FieldNumber.prototype.setMinInternal_=function(t){null==t?this.min_=-1/0:(t=Number(t),isNaN(t)||(this.min_=t))},e.FieldNumber.prototype.getMin=function(){return this.min_},e.FieldNumber.prototype.setMax=function(t){this.setMaxInternal_(t),this.setValue(this.getValue())},e.FieldNumber.prototype.setMaxInternal_=function(t){null==t?this.max_=1/0:(t=Number(t),isNaN(t)||(this.max_=t))},e.FieldNumber.prototype.getMax=function(){return this.max_},e.FieldNumber.prototype.setPrecision=function(t){this.setPrecisionInternal_(t),this.setValue(this.getValue())},e.FieldNumber.prototype.setPrecisionInternal_=function(t){this.precision_=Number(t)||0;var n=String(this.precision_);-1!=n.indexOf("e")&&(n=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));var o=n.indexOf(".");this.decimalPlaces_=-1==o?t?0:null:n.length-o-1},e.FieldNumber.prototype.getPrecision=function(){return this.precision_},e.FieldNumber.prototype.doClassValidation_=function(t){return null===t||(t=(t=(t=(t=String(t)).replace(/O/gi,"0")).replace(/,/g,"")).replace(/infinity/i,"Infinity"),t=Number(t||0),isNaN(t))?null:(t=Math.min(Math.max(t,this.min_),this.max_),this.precision_&&isFinite(t)&&(t=Math.round(t/this.precision_)*this.precision_),null!=this.decimalPlaces_&&(t=Number(t.toFixed(this.decimalPlaces_))),t)},e.FieldNumber.prototype.widgetCreate_=function(){var t=e.FieldNumber.superClass_.widgetCreate_.call(this);return-1/0<this.min_&&e.utils.aria.setState(t,e.utils.aria.State.VALUEMIN,this.min_),1/0>this.max_&&e.utils.aria.setState(t,e.utils.aria.State.VALUEMAX,this.max_),t},e.fieldRegistry.register("field_number",e.FieldNumber),e.FieldVariable=function(t,n,o,r,p){this.menuGenerator_=e.FieldVariable.dropdownCreate,this.defaultVariableName="string"==typeof t?t:"",this.size_=new e.utils.Size(0,0),p&&this.configure_(p),n&&this.setValidator(n),p||this.setTypes_(o,r)},e.utils.object.inherits(e.FieldVariable,e.FieldDropdown),e.FieldVariable.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.variable);return new e.FieldVariable(n,void 0,void 0,void 0,t)},e.FieldVariable.prototype.SERIALIZABLE=!0,e.FieldVariable.prototype.configure_=function(t){e.FieldVariable.superClass_.configure_.call(this,t),this.setTypes_(t.variableTypes,t.defaultType)},e.FieldVariable.prototype.initModel=function(){if(!this.variable_){var t=e.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,null,this.defaultVariableName,this.defaultType_);this.doValueUpdate_(t.getId())}},e.FieldVariable.prototype.shouldAddBorderRect_=function(){return e.FieldVariable.superClass_.shouldAddBorderRect_.call(this)&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||"variables_get"!=this.sourceBlock_.type)},e.FieldVariable.prototype.fromXml=function(t){var n=t.getAttribute("id"),o=t.textContent,r=t.getAttribute("variabletype")||t.getAttribute("variableType")||"";if(n=e.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,n,o,r),null!=r&&r!==n.type)throw Error("Serialized variable type with id '"+n.getId()+"' had type "+n.type+", and does not match variable field that references it: "+e.Xml.domToText(t)+".");this.setValue(n.getId())},e.FieldVariable.prototype.toXml=function(t){return this.initModel(),t.id=this.variable_.getId(),t.textContent=this.variable_.name,this.variable_.type&&t.setAttribute("variabletype",this.variable_.type),t},e.FieldVariable.prototype.setSourceBlock=function(t){if(t.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");e.FieldVariable.superClass_.setSourceBlock.call(this,t)},e.FieldVariable.prototype.getValue=function(){return this.variable_?this.variable_.getId():null},e.FieldVariable.prototype.getText=function(){return this.variable_?this.variable_.name:""},e.FieldVariable.prototype.getVariable=function(){return this.variable_},e.FieldVariable.prototype.getValidator=function(){return this.variable_?this.validator_:null},e.FieldVariable.prototype.doClassValidation_=function(t){if(null===t)return null;var n=e.Variables.getVariable(this.sourceBlock_.workspace,t);return n?this.typeIsAllowed_(n=n.type)?t:(console.warn("Variable type doesn't match this field!  Type was "+n),null):(console.warn("Variable id doesn't point to a real variable! ID was "+t),null)},e.FieldVariable.prototype.doValueUpdate_=function(t){this.variable_=e.Variables.getVariable(this.sourceBlock_.workspace,t),e.FieldVariable.superClass_.doValueUpdate_.call(this,t)},e.FieldVariable.prototype.typeIsAllowed_=function(t){var n=this.getVariableTypes_();if(!n)return!0;for(var o=0;o<n.length;o++)if(t==n[o])return!0;return!1},e.FieldVariable.prototype.getVariableTypes_=function(){var t=this.variableTypes;if(null===t&&this.sourceBlock_&&this.sourceBlock_.workspace)return this.sourceBlock_.workspace.getVariableTypes();if(0==(t=t||[""]).length)throw t=this.getText(),Error("'variableTypes' of field variable "+t+" was an empty list");return t},e.FieldVariable.prototype.setTypes_=function(t,n){if(n=n||"",null==t||null==t)t=null;else{if(!Array.isArray(t))throw Error("'variableTypes' was not an array in the definition of a FieldVariable");for(var o=!1,r=0;r<t.length;r++)t[r]==n&&(o=!0);if(!o)throw Error("Invalid default type '"+n+"' in the definition of a FieldVariable")}this.defaultType_=n,this.variableTypes=t},e.FieldVariable.prototype.refreshVariableName=function(){this.forceRerender()},e.FieldVariable.dropdownCreate=function(){if(!this.variable_)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");var t=this.getText(),n=[];if(this.sourceBlock_&&this.sourceBlock_.workspace)for(var o=this.getVariableTypes_(),r=0;r<o.length;r++){var p=this.sourceBlock_.workspace.getVariablesOfType(o[r]);n=n.concat(p)}for(n.sort(e.VariableModel.compareByName),o=[],r=0;r<n.length;r++)o[r]=[n[r].name,n[r].getId()];return o.push([e.Msg.RENAME_VARIABLE,e.RENAME_VARIABLE_ID]),e.Msg.DELETE_VARIABLE&&o.push([e.Msg.DELETE_VARIABLE.replace("%1",t),e.DELETE_VARIABLE_ID]),o},e.FieldVariable.prototype.onItemSelected_=function(t,n){if(t=n.getValue(),this.sourceBlock_&&this.sourceBlock_.workspace){if(t==e.RENAME_VARIABLE_ID)return void e.Variables.renameVariable(this.sourceBlock_.workspace,this.variable_);if(t==e.DELETE_VARIABLE_ID)return void this.sourceBlock_.workspace.deleteVariableById(this.variable_.getId())}this.setValue(t)},e.FieldVariable.prototype.referencesVariables=function(){return!0},e.fieldRegistry.register("field_variable",e.FieldVariable),e.utils.svgPaths={},e.utils.svgPaths.point=function(t,n){return" "+t+","+n+" "},e.utils.svgPaths.curve=function(t,n){return" "+t+n.join("")},e.utils.svgPaths.moveTo=function(t,n){return" M "+t+","+n+" "},e.utils.svgPaths.moveBy=function(t,n){return" m "+t+","+n+" "},e.utils.svgPaths.lineTo=function(t,n){return" l "+t+","+n+" "},e.utils.svgPaths.line=function(t){return" l"+t.join("")},e.utils.svgPaths.lineOnAxis=function(t,n){return" "+t+" "+n+" "},e.utils.svgPaths.arc=function(t,n,o,r){return t+" "+o+" "+o+" "+n+r},e.blockRendering.ConstantProvider=function(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.CORNER_RADIUS=8,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=e.utils.svgPaths.moveBy(0,0),this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_TEXT_BASELINE_CENTER=!e.utils.userAgent.IE&&!e.utils.userAgent.EDGE,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2),this.embossFilterId="",this.embossFilter_=null,this.disabledPatternId="",this.disabledPattern_=null,this.debugFilterId="",this.cssNode_=this.debugFilter_=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2}},e.blockRendering.ConstantProvider.prototype.init=function(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()},e.blockRendering.ConstantProvider.prototype.setTheme=function(t){this.blockStyles=Object.create(null);var o,n=t.blockStyles;for(o in n)this.blockStyles[o]=this.validatedBlockStyle_(n[o]);this.setDynamicProperties_(t)},e.blockRendering.ConstantProvider.prototype.setDynamicProperties_=function(t){this.setFontConstants_(t),this.setComponentConstants_(t),this.ADD_START_HATS=null!=t.startHats?t.startHats:this.ADD_START_HATS},e.blockRendering.ConstantProvider.prototype.setFontConstants_=function(t){this.FIELD_TEXT_FONTFAMILY=t.fontStyle&&null!=t.fontStyle.family?t.fontStyle.family:this.FIELD_TEXT_FONTFAMILY,this.FIELD_TEXT_FONTWEIGHT=t.fontStyle&&null!=t.fontStyle.weight?t.fontStyle.weight:this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTSIZE=t.fontStyle&&null!=t.fontStyle.size?t.fontStyle.size:this.FIELD_TEXT_FONTSIZE,t=e.utils.dom.measureFontMetrics("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=t.height,this.FIELD_TEXT_BASELINE=t.baseline},e.blockRendering.ConstantProvider.prototype.setComponentConstants_=function(t){this.CURSOR_COLOUR=t.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=t.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=t.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(t.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY},e.blockRendering.ConstantProvider.prototype.getBlockStyleForColour=function(t){var n="auto_"+t;return this.blockStyles[n]||(this.blockStyles[n]=this.createBlockStyle_(t)),{style:this.blockStyles[n],name:n}},e.blockRendering.ConstantProvider.prototype.getBlockStyle=function(t){return this.blockStyles[t||""]||(t&&0==t.indexOf("auto_")?this.getBlockStyleForColour(t.substring(5)).style:this.createBlockStyle_("#000000"))},e.blockRendering.ConstantProvider.prototype.createBlockStyle_=function(t){return this.validatedBlockStyle_({colourPrimary:t})},e.blockRendering.ConstantProvider.prototype.validatedBlockStyle_=function(t){var n={};return t&&e.utils.object.mixin(n,t),t=e.utils.parseBlockColour(n.colourPrimary||"#000"),n.colourPrimary=t.hex,n.colourSecondary=n.colourSecondary?e.utils.parseBlockColour(n.colourSecondary).hex:this.generateSecondaryColour_(n.colourPrimary),n.colourTertiary=n.colourTertiary?e.utils.parseBlockColour(n.colourTertiary).hex:this.generateTertiaryColour_(n.colourPrimary),n.hat=n.hat||"",n},e.blockRendering.ConstantProvider.prototype.generateSecondaryColour_=function(t){return e.utils.colour.blend("#fff",t,.6)||t},e.blockRendering.ConstantProvider.prototype.generateTertiaryColour_=function(t){return e.utils.colour.blend("#fff",t,.3)||t},e.blockRendering.ConstantProvider.prototype.dispose=function(){this.embossFilter_&&e.utils.dom.removeNode(this.embossFilter_),this.disabledPattern_&&e.utils.dom.removeNode(this.disabledPattern_),this.debugFilter_&&e.utils.dom.removeNode(this.debugFilter_),this.cssNode_=null},e.blockRendering.ConstantProvider.prototype.makeJaggedTeeth=function(){var t=this.JAGGED_TEETH_HEIGHT,n=this.JAGGED_TEETH_WIDTH;return{height:t,width:n,path:e.utils.svgPaths.line([e.utils.svgPaths.point(n,t/4),e.utils.svgPaths.point(2*-n,t/2),e.utils.svgPaths.point(n,t/4)])}},e.blockRendering.ConstantProvider.prototype.makeStartHat=function(){var t=this.START_HAT_HEIGHT,n=this.START_HAT_WIDTH;return{height:t,width:n,path:e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(30,-t),e.utils.svgPaths.point(70,-t),e.utils.svgPaths.point(n,0)])}},e.blockRendering.ConstantProvider.prototype.makePuzzleTab=function(){function t(b){var I=-(b=b?-1:1),x=o/2,k=x+2.5,Y=x+.5,X=e.utils.svgPaths.point(-n,b*x);return x=e.utils.svgPaths.point(n,b*x),e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(0,b*k),e.utils.svgPaths.point(-n,I*Y),X])+e.utils.svgPaths.curve("s",[e.utils.svgPaths.point(n,2.5*I),x])}var n=this.TAB_WIDTH,o=this.TAB_HEIGHT,r=t(!0),p=t(!1);return{type:this.SHAPES.PUZZLE,width:n,height:o,pathDown:p,pathUp:r}},e.blockRendering.ConstantProvider.prototype.makeNotch=function(){function t(I){return e.utils.svgPaths.line([e.utils.svgPaths.point(I*r,o),e.utils.svgPaths.point(3*I,0),e.utils.svgPaths.point(I*r,-o)])}var n=this.NOTCH_WIDTH,o=this.NOTCH_HEIGHT,r=(n-3)/2,p=t(1),b=t(-1);return{type:this.SHAPES.NOTCH,width:n,height:o,pathLeft:p,pathRight:b}},e.blockRendering.ConstantProvider.prototype.makeInsideCorners=function(){var t=this.CORNER_RADIUS;return{width:t,height:t,pathTop:e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(-t,t)),pathBottom:e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(t,t))}},e.blockRendering.ConstantProvider.prototype.makeOutsideCorners=function(){var t=this.CORNER_RADIUS,n=e.utils.svgPaths.moveBy(0,t)+e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(t,-t)),o=e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(t,t)),r=e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(-t,-t));return{topLeft:n,topRight:o,bottomRight:e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(-t,t)),bottomLeft:r,rightHeight:t}},e.blockRendering.ConstantProvider.prototype.shapeFor=function(t){switch(t.type){case e.connectionTypes.INPUT_VALUE:case e.connectionTypes.OUTPUT_VALUE:return this.PUZZLE_TAB;case e.connectionTypes.PREVIOUS_STATEMENT:case e.connectionTypes.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}},e.blockRendering.ConstantProvider.prototype.createDom=function(t,n,o){this.injectCSS_(n,o),t=e.utils.dom.createSvgElement(e.utils.Svg.DEFS,{},t),n=e.utils.dom.createSvgElement(e.utils.Svg.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},t),e.utils.dom.createSvgElement(e.utils.Svg.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},n),o=e.utils.dom.createSvgElement(e.utils.Svg.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},n),e.utils.dom.createSvgElement(e.utils.Svg.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},o),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},n),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},n),this.embossFilterId=n.id,this.embossFilter_=n,n=e.utils.dom.createSvgElement(e.utils.Svg.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},t),e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:10,height:10,fill:"#aaa"},n),e.utils.dom.createSvgElement(e.utils.Svg.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},n),this.disabledPatternId=n.id,this.disabledPattern_=n,e.blockRendering.Debug&&(t=e.utils.dom.createSvgElement(e.utils.Svg.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},t),n=e.utils.dom.createSvgElement(e.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},t),e.utils.dom.createSvgElement(e.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),e.utils.dom.createSvgElement(e.utils.Svg.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},t),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},t),this.debugFilterId=t.id,this.debugFilter_=t)},e.blockRendering.ConstantProvider.prototype.injectCSS_=function(t,n){n=this.getCSS_(n),t="blockly-renderer-style-"+t,this.cssNode_=document.getElementById(t);var o=n.join("\n");this.cssNode_?this.cssNode_.firstChild.textContent=o:((n=document.createElement("style")).id=t,t=document.createTextNode(o),n.appendChild(t),document.head.insertBefore(n,document.head.firstChild),this.cssNode_=n)},e.blockRendering.ConstantProvider.prototype.getCSS_=function(t){return[t+" .blocklyText, ",t+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",t+" .blocklyText {","fill: #fff;","}",t+" .blocklyNonEditableText>rect,",t+" .blocklyEditableText>rect {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","fill-opacity: .6;","stroke: none;","}",t+" .blocklyNonEditableText>text,",t+" .blocklyEditableText>text {","fill: #000;","}",t+" .blocklyFlyoutLabelText {","fill: #000;","}",t+" .blocklyText.blocklyBubbleText {","fill: #000;","}",t+" .blocklyEditableText:not(.editing):hover>rect {","stroke: #fff;","stroke-width: 2;","}",t+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","}",t+" .blocklySelected>.blocklyPath {","stroke: #fc3;","stroke-width: 3px;","}",t+" .blocklyHighlightedConnectionPath {","stroke: #fc3;","}",t+" .blocklyReplaceable .blocklyPath {","fill-opacity: .5;","}",t+" .blocklyReplaceable .blocklyPathLight,",t+" .blocklyReplaceable .blocklyPathDark {","display: none;","}",t+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]},e.blockRendering.Types={NONE:0,FIELD:1,HAT:2,ICON:4,SPACER:8,BETWEEN_ROW_SPACER:16,IN_ROW_SPACER:32,EXTERNAL_VALUE_INPUT:64,INPUT:128,INLINE_INPUT:256,STATEMENT_INPUT:512,CONNECTION:1024,PREVIOUS_CONNECTION:2048,NEXT_CONNECTION:4096,OUTPUT_CONNECTION:8192,CORNER:16384,LEFT_SQUARE_CORNER:32768,LEFT_ROUND_CORNER:65536,RIGHT_SQUARE_CORNER:131072,RIGHT_ROUND_CORNER:262144,JAGGED_EDGE:524288,ROW:1048576,TOP_ROW:2097152,BOTTOM_ROW:4194304,INPUT_ROW:8388608},e.blockRendering.Types.LEFT_CORNER=e.blockRendering.Types.LEFT_SQUARE_CORNER|e.blockRendering.Types.LEFT_ROUND_CORNER,e.blockRendering.Types.RIGHT_CORNER=e.blockRendering.Types.RIGHT_SQUARE_CORNER|e.blockRendering.Types.RIGHT_ROUND_CORNER,e.blockRendering.Types.nextTypeValue_=16777216,e.blockRendering.Types.getType=function(t){return Object.prototype.hasOwnProperty.call(e.blockRendering.Types,t)||(e.blockRendering.Types[t]=e.blockRendering.Types.nextTypeValue_,e.blockRendering.Types.nextTypeValue_<<=1),e.blockRendering.Types[t]},e.blockRendering.Types.isField=function(t){return t.type&e.blockRendering.Types.FIELD},e.blockRendering.Types.isHat=function(t){return t.type&e.blockRendering.Types.HAT},e.blockRendering.Types.isIcon=function(t){return t.type&e.blockRendering.Types.ICON},e.blockRendering.Types.isSpacer=function(t){return t.type&e.blockRendering.Types.SPACER},e.blockRendering.Types.isInRowSpacer=function(t){return t.type&e.blockRendering.Types.IN_ROW_SPACER},e.blockRendering.Types.isInput=function(t){return t.type&e.blockRendering.Types.INPUT},e.blockRendering.Types.isExternalInput=function(t){return t.type&e.blockRendering.Types.EXTERNAL_VALUE_INPUT},e.blockRendering.Types.isInlineInput=function(t){return t.type&e.blockRendering.Types.INLINE_INPUT},e.blockRendering.Types.isStatementInput=function(t){return t.type&e.blockRendering.Types.STATEMENT_INPUT},e.blockRendering.Types.isPreviousConnection=function(t){return t.type&e.blockRendering.Types.PREVIOUS_CONNECTION},e.blockRendering.Types.isNextConnection=function(t){return t.type&e.blockRendering.Types.NEXT_CONNECTION},e.blockRendering.Types.isPreviousOrNextConnection=function(t){return t.type&(e.blockRendering.Types.PREVIOUS_CONNECTION|e.blockRendering.Types.NEXT_CONNECTION)},e.blockRendering.Types.isLeftRoundedCorner=function(t){return t.type&e.blockRendering.Types.LEFT_ROUND_CORNER},e.blockRendering.Types.isRightRoundedCorner=function(t){return t.type&e.blockRendering.Types.RIGHT_ROUND_CORNER},e.blockRendering.Types.isLeftSquareCorner=function(t){return t.type&e.blockRendering.Types.LEFT_SQUARE_CORNER},e.blockRendering.Types.isRightSquareCorner=function(t){return t.type&e.blockRendering.Types.RIGHT_SQUARE_CORNER},e.blockRendering.Types.isCorner=function(t){return t.type&e.blockRendering.Types.CORNER},e.blockRendering.Types.isJaggedEdge=function(t){return t.type&e.blockRendering.Types.JAGGED_EDGE},e.blockRendering.Types.isRow=function(t){return t.type&e.blockRendering.Types.ROW},e.blockRendering.Types.isBetweenRowSpacer=function(t){return t.type&e.blockRendering.Types.BETWEEN_ROW_SPACER},e.blockRendering.Types.isTopRow=function(t){return t.type&e.blockRendering.Types.TOP_ROW},e.blockRendering.Types.isBottomRow=function(t){return t.type&e.blockRendering.Types.BOTTOM_ROW},e.blockRendering.Types.isTopOrBottomRow=function(t){return t.type&(e.blockRendering.Types.TOP_ROW|e.blockRendering.Types.BOTTOM_ROW)},e.blockRendering.Types.isInputRow=function(t){return t.type&e.blockRendering.Types.INPUT_ROW},e.blockRendering.Measurable=function(t){this.height=this.width=0,this.type=e.blockRendering.Types.NONE,this.centerline=this.xPos=0,this.constants_=t,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT},e.blockRendering.Connection=function(t,n){e.blockRendering.Connection.superClass_.constructor.call(this,t),this.connectionModel=n,this.shape=this.constants_.shapeFor(n),this.isDynamicShape=!!this.shape.isDynamic,this.type|=e.blockRendering.Types.CONNECTION},e.utils.object.inherits(e.blockRendering.Connection,e.blockRendering.Measurable),e.blockRendering.OutputConnection=function(t,n){e.blockRendering.OutputConnection.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=0},e.utils.object.inherits(e.blockRendering.OutputConnection,e.blockRendering.Connection),e.blockRendering.PreviousConnection=function(t,n){e.blockRendering.PreviousConnection.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},e.utils.object.inherits(e.blockRendering.PreviousConnection,e.blockRendering.Connection),e.blockRendering.NextConnection=function(t,n){e.blockRendering.NextConnection.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},e.utils.object.inherits(e.blockRendering.NextConnection,e.blockRendering.Connection),e.blockRendering.InputConnection=function(t,n){e.blockRendering.InputConnection.superClass_.constructor.call(this,t,n.connection),this.type|=e.blockRendering.Types.INPUT,this.input=n,this.align=n.align,(this.connectedBlock=n.connection&&n.connection.targetBlock()?n.connection.targetBlock():null)?(t=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=t.width,this.connectedBlockHeight=t.height):this.connectedBlockHeight=this.connectedBlockWidth=0,this.connectionOffsetY=this.connectionOffsetX=0},e.utils.object.inherits(e.blockRendering.InputConnection,e.blockRendering.Connection),e.blockRendering.InlineInput=function(t,n){e.blockRendering.InlineInput.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY=this.isDynamicShape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=this.isDynamicShape?this.shape.connectionOffsetX(this.connectionWidth):0},e.utils.object.inherits(e.blockRendering.InlineInput,e.blockRendering.InputConnection),e.blockRendering.StatementInput=function(t,n){e.blockRendering.StatementInput.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width},e.utils.object.inherits(e.blockRendering.StatementInput,e.blockRendering.InputConnection),e.blockRendering.ExternalValueInput=function(t,n){e.blockRendering.ExternalValueInput.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width},e.utils.object.inherits(e.blockRendering.ExternalValueInput,e.blockRendering.InputConnection),e.blockRendering.Icon=function(t,n){e.blockRendering.Icon.superClass_.constructor.call(this,t),this.icon=n,this.isVisible=n.isVisible(),this.type|=e.blockRendering.Types.ICON,t=n.getCorrectedSize(),this.height=t.height,this.width=t.width},e.utils.object.inherits(e.blockRendering.Icon,e.blockRendering.Measurable),e.blockRendering.JaggedEdge=function(t){e.blockRendering.JaggedEdge.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width},e.utils.object.inherits(e.blockRendering.JaggedEdge,e.blockRendering.Measurable),e.blockRendering.Field=function(t,n,o){e.blockRendering.Field.superClass_.constructor.call(this,t),this.field=n,this.isEditable=n.EDITABLE,this.flipRtl=n.getFlipRtl(),this.type|=e.blockRendering.Types.FIELD,t=this.field.getSize(),this.height=t.height,this.width=t.width,this.parentInput=o},e.utils.object.inherits(e.blockRendering.Field,e.blockRendering.Measurable),e.blockRendering.Hat=function(t){e.blockRendering.Hat.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height},e.utils.object.inherits(e.blockRendering.Hat,e.blockRendering.Measurable),e.blockRendering.SquareCorner=function(t,n){e.blockRendering.SquareCorner.superClass_.constructor.call(this,t),this.type=(n&&"left"!=n?e.blockRendering.Types.RIGHT_SQUARE_CORNER:e.blockRendering.Types.LEFT_SQUARE_CORNER)|e.blockRendering.Types.CORNER,this.width=this.height=this.constants_.NO_PADDING},e.utils.object.inherits(e.blockRendering.SquareCorner,e.blockRendering.Measurable),e.blockRendering.RoundCorner=function(t,n){e.blockRendering.RoundCorner.superClass_.constructor.call(this,t),this.type=(n&&"left"!=n?e.blockRendering.Types.RIGHT_ROUND_CORNER:e.blockRendering.Types.LEFT_ROUND_CORNER)|e.blockRendering.Types.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2},e.utils.object.inherits(e.blockRendering.RoundCorner,e.blockRendering.Measurable),e.blockRendering.InRowSpacer=function(t,n){e.blockRendering.InRowSpacer.superClass_.constructor.call(this,t),this.type=this.type|e.blockRendering.Types.SPACER|e.blockRendering.Types.IN_ROW_SPACER,this.width=n,this.height=this.constants_.SPACER_DEFAULT_HEIGHT},e.utils.object.inherits(e.blockRendering.InRowSpacer,e.blockRendering.Measurable),e.blockRendering.Row=function(t){this.type=e.blockRendering.Types.ROW,this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=this.hasStatement=this.hasExternalInput=!1,this.constants_=t,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT,this.align=null},e.blockRendering.Row.prototype.measure=function(){throw Error("Unexpected attempt to measure a base Row.")},e.blockRendering.Row.prototype.getLastInput=function(){for(var n,t=this.elements.length-1;n=this.elements[t];t--)if(e.blockRendering.Types.isInput(n))return n;return null},e.blockRendering.Row.prototype.startsWithElemSpacer=function(){return!0},e.blockRendering.Row.prototype.endsWithElemSpacer=function(){return!0},e.blockRendering.Row.prototype.getFirstSpacer=function(){for(var n,t=0;n=this.elements[t];t++)if(e.blockRendering.Types.isSpacer(n))return n;return null},e.blockRendering.Row.prototype.getLastSpacer=function(){for(var n,t=this.elements.length-1;n=this.elements[t];t--)if(e.blockRendering.Types.isSpacer(n))return n;return null},e.blockRendering.TopRow=function(t){e.blockRendering.TopRow.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.TOP_ROW,this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null},e.utils.object.inherits(e.blockRendering.TopRow,e.blockRendering.Row),e.blockRendering.TopRow.prototype.hasLeftSquareCorner=function(t){var n=(t.hat?"cap"===t.hat:this.constants_.ADD_START_HATS)&&!t.outputConnection&&!t.previousConnection,o=t.getPreviousBlock();return!!t.outputConnection||n||!!o&&o.getNextBlock()==t},e.blockRendering.TopRow.prototype.hasRightSquareCorner=function(t){return!0},e.blockRendering.TopRow.prototype.measure=function(){for(var p,t=0,n=0,o=0,r=0;p=this.elements[r];r++)n+=p.width,e.blockRendering.Types.isSpacer(p)||(e.blockRendering.Types.isHat(p)?o=Math.max(o,p.ascenderHeight):t=Math.max(t,p.height));this.width=Math.max(this.minWidth,n),this.height=Math.max(this.minHeight,t)+o,this.capline=this.ascenderHeight=o,this.widthWithConnectedBlocks=this.width},e.blockRendering.TopRow.prototype.startsWithElemSpacer=function(){return!1},e.blockRendering.TopRow.prototype.endsWithElemSpacer=function(){return!1},e.blockRendering.BottomRow=function(t){e.blockRendering.BottomRow.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.BOTTOM_ROW,this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0},e.utils.object.inherits(e.blockRendering.BottomRow,e.blockRendering.Row),e.blockRendering.BottomRow.prototype.hasLeftSquareCorner=function(t){return!!t.outputConnection||!!t.getNextBlock()},e.blockRendering.BottomRow.prototype.hasRightSquareCorner=function(t){return!0},e.blockRendering.BottomRow.prototype.measure=function(){for(var p,t=0,n=0,o=0,r=0;p=this.elements[r];r++)n+=p.width,e.blockRendering.Types.isSpacer(p)||(e.blockRendering.Types.isNextConnection(p)?o=Math.max(o,p.height):t=Math.max(t,p.height));this.width=Math.max(this.minWidth,n),this.height=Math.max(this.minHeight,t)+o,this.descenderHeight=o,this.widthWithConnectedBlocks=this.width},e.blockRendering.BottomRow.prototype.startsWithElemSpacer=function(){return!1},e.blockRendering.BottomRow.prototype.endsWithElemSpacer=function(){return!1},e.blockRendering.SpacerRow=function(t,n,o){e.blockRendering.SpacerRow.superClass_.constructor.call(this,t),this.type=this.type|e.blockRendering.Types.SPACER|e.blockRendering.Types.BETWEEN_ROW_SPACER,this.width=o,this.height=n,this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.elements=[new e.blockRendering.InRowSpacer(this.constants_,o)]},e.utils.object.inherits(e.blockRendering.SpacerRow,e.blockRendering.Row),e.blockRendering.SpacerRow.prototype.measure=function(){},e.blockRendering.InputRow=function(t){e.blockRendering.InputRow.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.INPUT_ROW,this.connectedBlockWidths=0},e.utils.object.inherits(e.blockRendering.InputRow,e.blockRendering.Row),e.blockRendering.InputRow.prototype.measure=function(){this.width=this.minWidth,this.height=this.minHeight;for(var o,t=0,n=0;o=this.elements[n];n++)this.width+=o.width,e.blockRendering.Types.isInput(o)&&(e.blockRendering.Types.isStatementInput(o)?t+=o.connectedBlockWidth:e.blockRendering.Types.isExternalInput(o)&&0!=o.connectedBlockWidth&&(t+=o.connectedBlockWidth-o.connectionWidth)),e.blockRendering.Types.isSpacer(o)||(this.height=Math.max(this.height,o.height));this.connectedBlockWidths=t,this.widthWithConnectedBlocks=this.width+t},e.blockRendering.InputRow.prototype.endsWithElemSpacer=function(){return!this.hasExternalInput&&!this.hasStatement},e.blockRendering.RenderInfo=function(t,n){this.block_=n,this.renderer_=t,this.constants_=this.renderer_.getConstants(),this.outputConnection=n.outputConnection?new e.blockRendering.OutputConnection(this.constants_,n.outputConnection):null,this.isInline=n.getInputsInline()&&!n.isCollapsed(),this.isCollapsed=n.isCollapsed(),this.isInsertionMarker=n.isInsertionMarker(),this.RTL=n.RTL,this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.hiddenIcons=[],this.topRow=new e.blockRendering.TopRow(this.constants_),this.bottomRow=new e.blockRendering.BottomRow(this.constants_),this.startY=this.startX=0},e.blockRendering.RenderInfo.prototype.getRenderer=function(){return this.renderer_},e.blockRendering.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},e.blockRendering.RenderInfo.prototype.createRows_=function(){this.populateTopRow_(),this.rows.push(this.topRow);var t=new e.blockRendering.InputRow(this.constants_);this.inputRows.push(t);for(var r,n=this.block_.getIcons(),o=0;r=n[o];o++){var p=new e.blockRendering.Icon(this.constants_,r);this.isCollapsed&&r.collapseHidden?this.hiddenIcons.push(p):t.elements.push(p)}for(r=null,o=0;n=this.block_.inputList[o];o++)if(n.isVisible()){for(this.shouldStartNewRow_(n,r)&&(this.rows.push(t),t=new e.blockRendering.InputRow(this.constants_),this.inputRows.push(t)),r=0;p=n.fieldRow[r];r++)t.elements.push(new e.blockRendering.Field(this.constants_,p,n));this.addInput_(n,t),r=n}this.isCollapsed&&(t.hasJaggedEdge=!0,t.elements.push(new e.blockRendering.JaggedEdge(this.constants_))),(t.elements.length||t.hasDummyInput)&&this.rows.push(t),this.populateBottomRow_(),this.rows.push(this.bottomRow)},e.blockRendering.RenderInfo.prototype.populateTopRow_=function(){var t=!!this.block_.previousConnection,n=(this.block_.hat?"cap"===this.block_.hat:this.constants_.ADD_START_HATS)&&!this.outputConnection&&!t,o=this.topRow.hasLeftSquareCorner(this.block_)?e.blockRendering.SquareCorner:e.blockRendering.RoundCorner;this.topRow.elements.push(new o(this.constants_)),n?(t=new e.blockRendering.Hat(this.constants_),this.topRow.elements.push(t),this.topRow.capline=t.ascenderHeight):t&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new e.blockRendering.PreviousConnection(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.topRow.minHeight=this.block_.inputList.length&&this.block_.inputList[0].type==e.inputTypes.STATEMENT&&!this.block_.isCollapsed()?this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.constants_.TOP_ROW_MIN_HEIGHT,o=this.topRow.hasRightSquareCorner(this.block_)?e.blockRendering.SquareCorner:e.blockRendering.RoundCorner,this.topRow.elements.push(new o(this.constants_,"right"))},e.blockRendering.RenderInfo.prototype.populateBottomRow_=function(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==e.inputTypes.STATEMENT?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new e.blockRendering.SquareCorner(this.constants_)):this.bottomRow.elements.push(new e.blockRendering.RoundCorner(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new e.blockRendering.NextConnection(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new e.blockRendering.SquareCorner(this.constants_,"right")):this.bottomRow.elements.push(new e.blockRendering.RoundCorner(this.constants_,"right"))},e.blockRendering.RenderInfo.prototype.addInput_=function(t,n){this.isInline&&t.type==e.inputTypes.VALUE?(n.elements.push(new e.blockRendering.InlineInput(this.constants_,t)),n.hasInlineInput=!0):t.type==e.inputTypes.STATEMENT?(n.elements.push(new e.blockRendering.StatementInput(this.constants_,t)),n.hasStatement=!0):t.type==e.inputTypes.VALUE?(n.elements.push(new e.blockRendering.ExternalValueInput(this.constants_,t)),n.hasExternalInput=!0):t.type==e.inputTypes.DUMMY&&(n.minHeight=Math.max(n.minHeight,t.getSourceBlock()&&t.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),n.hasDummyInput=!0),null==n.align&&(n.align=t.align)},e.blockRendering.RenderInfo.prototype.shouldStartNewRow_=function(t,n){return!(!n||t.type!=e.inputTypes.STATEMENT&&n.type!=e.inputTypes.STATEMENT&&(t.type!=e.inputTypes.VALUE&&t.type!=e.inputTypes.DUMMY||this.isInline))},e.blockRendering.RenderInfo.prototype.addElemSpacing_=function(){for(var n,t=0;n=this.rows[t];t++){var o=n.elements;if(n.elements=[],n.startsWithElemSpacer()&&n.elements.push(new e.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,o[0]))),o.length){for(var r=0;r<o.length-1;r++){n.elements.push(o[r]);var p=this.getInRowSpacing_(o[r],o[r+1]);n.elements.push(new e.blockRendering.InRowSpacer(this.constants_,p))}n.elements.push(o[o.length-1]),n.endsWithElemSpacer()&&n.elements.push(new e.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(o[o.length-1],null)))}}},e.blockRendering.RenderInfo.prototype.getInRowSpacing_=function(t,n){if(!t&&n&&e.blockRendering.Types.isStatementInput(n))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(t&&e.blockRendering.Types.isInput(t)&&!n){if(e.blockRendering.Types.isExternalInput(t))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isInlineInput(t))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(t))return this.constants_.NO_PADDING}return t&&e.blockRendering.Types.isLeftSquareCorner(t)&&n&&(e.blockRendering.Types.isPreviousConnection(n)||e.blockRendering.Types.isNextConnection(n))?n.notchOffset:t&&e.blockRendering.Types.isLeftRoundedCorner(t)&&n&&(e.blockRendering.Types.isPreviousConnection(n)||e.blockRendering.Types.isNextConnection(n))?n.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},e.blockRendering.RenderInfo.prototype.computeBounds_=function(){for(var p,t=0,n=0,o=0,r=0;p=this.rows[r];r++){if(p.measure(),n=Math.max(n,p.width),p.hasStatement){var b=p.getLastInput();t=Math.max(t,p.width-b.width)}o=Math.max(o,p.widthWithConnectedBlocks)}for(this.statementEdge=t,this.width=n,r=0;p=this.rows[r];r++)p.hasStatement&&(p.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(n,o),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)},e.blockRendering.RenderInfo.prototype.alignRowElements_=function(){for(var n,t=0;n=this.rows[t];t++)if(n.hasStatement)this.alignStatementRow_(n);else{var o=n.width;0<(o=this.getDesiredRowWidth_(n)-o)&&this.addAlignmentPadding_(n,o),e.blockRendering.Types.isTopOrBottomRow(n)&&(n.widthWithConnectedBlocks=n.width)}},e.blockRendering.RenderInfo.prototype.getDesiredRowWidth_=function(t){return this.width-this.startX},e.blockRendering.RenderInfo.prototype.addAlignmentPadding_=function(t,n){var o=t.getFirstSpacer(),r=t.getLastSpacer();(t.hasExternalInput||t.hasStatement)&&(t.widthWithConnectedBlocks+=n),t.align==e.constants.ALIGN.LEFT?r.width+=n:t.align==e.constants.ALIGN.CENTRE?(o.width+=n/2,r.width+=n/2):t.align==e.constants.ALIGN.RIGHT?o.width+=n:r.width+=n,t.width+=n},e.blockRendering.RenderInfo.prototype.alignStatementRow_=function(t){var n=t.getLastInput(),o=t.width-n.width,r=this.statementEdge;0<(o=r-o)&&this.addAlignmentPadding_(t,o),o=t.width,r=this.getDesiredRowWidth_(t),n.width+=r-o,n.height=Math.max(n.height,t.height),t.width+=r-o,t.widthWithConnectedBlocks=Math.max(t.width,this.statementEdge+t.connectedBlockWidths)},e.blockRendering.RenderInfo.prototype.addRowSpacing_=function(){var t=this.rows;this.rows=[];for(var n=0;n<t.length;n++)this.rows.push(t[n]),n!=t.length-1&&this.rows.push(this.makeSpacerRow_(t[n],t[n+1]))},e.blockRendering.RenderInfo.prototype.makeSpacerRow_=function(t,n){var o=this.getSpacerRowHeight_(t,n),r=this.getSpacerRowWidth_(t,n);return o=new e.blockRendering.SpacerRow(this.constants_,o,r),t.hasStatement&&(o.followsStatement=!0),n.hasStatement&&(o.precedesStatement=!0),o},e.blockRendering.RenderInfo.prototype.getSpacerRowWidth_=function(t,n){return this.width-this.startX},e.blockRendering.RenderInfo.prototype.getSpacerRowHeight_=function(t,n){return this.constants_.MEDIUM_PADDING},e.blockRendering.RenderInfo.prototype.getElemCenterline_=function(t,n){return e.blockRendering.Types.isSpacer(n)?t.yPos+n.height/2:e.blockRendering.Types.isBottomRow(t)?(t=t.yPos+t.height-t.descenderHeight,e.blockRendering.Types.isNextConnection(n)?t+n.height/2:t-n.height/2):e.blockRendering.Types.isTopRow(t)?e.blockRendering.Types.isHat(n)?t.capline-n.height/2:t.capline+n.height/2:t.yPos+t.height/2},e.blockRendering.RenderInfo.prototype.recordElemPositions_=function(t){for(var r,n=t.xPos,o=0;r=t.elements[o];o++)e.blockRendering.Types.isSpacer(r)&&(r.height=t.height),r.xPos=n,r.centerline=this.getElemCenterline_(t,r),n+=r.width},e.blockRendering.RenderInfo.prototype.finalize_=function(){for(var r,t=0,n=0,o=0;r=this.rows[o];o++)r.yPos=n,r.xPos=this.startX,n+=r.height,t=Math.max(t,r.widthWithConnectedBlocks),this.recordElemPositions_(r);this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(t=Math.max(t,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.widthWithChildren=t+this.startX,this.height=n,this.startY=this.topRow.capline,this.bottomRow.baseline=n-this.bottomRow.descenderHeight},e.blockRendering.Debug=function(t){this.debugElements_=[],this.svgRoot_=null,this.constants_=t},e.blockRendering.Debug.config={rowSpacers:!0,elemSpacers:!0,rows:!0,elems:!0,connections:!0,blockBounds:!0,connectedBlockBounds:!0,render:!0},e.blockRendering.Debug.prototype.clearElems=function(){for(var n,t=0;n=this.debugElements_[t];t++)e.utils.dom.removeNode(n);this.debugElements_=[]},e.blockRendering.Debug.prototype.drawSpacerRow=function(t,n,o){if(e.blockRendering.Debug.config.rowSpacers){var r=Math.abs(t.height),p=0>t.height;p&&(n-=r),this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"rowSpacerRect blockRenderDebug",x:o?-(t.xPos+t.width):t.xPos,y:n,width:t.width,height:r,stroke:p?"black":"blue",fill:"blue","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}},e.blockRendering.Debug.prototype.drawSpacerElem=function(t,n,o){if(e.blockRendering.Debug.config.elemSpacers){n=Math.abs(t.width);var r=0>t.width,p=r?t.xPos-n:t.xPos;o&&(p=-(p+n)),this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"elemSpacerRect blockRenderDebug",x:p,y:t.centerline-t.height/2,width:n,height:t.height,stroke:"pink",fill:r?"black":"pink","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}},e.blockRendering.Debug.prototype.drawRenderedElem=function(t,n){if(e.blockRendering.Debug.config.elems){var o=t.xPos;n&&(o=-(o+t.width)),this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"rowRenderingRect blockRenderDebug",x:o,y:n=t.centerline-t.height/2,width:t.width,height:t.height,stroke:"black",fill:"none","stroke-width":"1px"},this.svgRoot_)),e.blockRendering.Types.isField(t)&&t.field instanceof e.FieldLabel&&this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"rowRenderingRect blockRenderDebug",x:o,y:n+this.constants_.FIELD_TEXT_BASELINE,width:t.width,height:"0.1px",stroke:"red",fill:"none","stroke-width":"0.5px"},this.svgRoot_))}e.blockRendering.Types.isInput(t)&&e.blockRendering.Debug.config.connections&&this.drawConnection(t.connectionModel)},e.blockRendering.Debug.prototype.drawConnection=function(t){if(e.blockRendering.Debug.config.connections){if(t.type==e.connectionTypes.INPUT_VALUE)var n=4,o="magenta",r="none";else t.type==e.connectionTypes.OUTPUT_VALUE?(n=2,r=o="magenta"):t.type==e.connectionTypes.NEXT_STATEMENT?(n=4,o="goldenrod",r="none"):t.type==e.connectionTypes.PREVIOUS_STATEMENT&&(n=2,r=o="goldenrod");this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{class:"blockRenderDebug",cx:t.offsetInBlock_.x,cy:t.offsetInBlock_.y,r:n,fill:r,stroke:o},this.svgRoot_))}},e.blockRendering.Debug.prototype.drawRenderedRow=function(t,n,o){e.blockRendering.Debug.config.rows&&(this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"elemRenderingRect blockRenderDebug",x:o?-(t.xPos+t.width):t.xPos,y:t.yPos,width:t.width,height:t.height,stroke:"red",fill:"none","stroke-width":"1px"},this.svgRoot_)),e.blockRendering.Types.isTopOrBottomRow(t)||e.blockRendering.Debug.config.connectedBlockBounds&&this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"connectedBlockWidth blockRenderDebug",x:o?-(t.xPos+t.widthWithConnectedBlocks):t.xPos,y:t.yPos,width:t.widthWithConnectedBlocks,height:t.height,stroke:this.randomColour_,fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_)))},e.blockRendering.Debug.prototype.drawRowWithElements=function(t,n,o){for(var r=0,p=t.elements.length;r<p;r++){var b=t.elements[r];b?e.blockRendering.Types.isSpacer(b)?this.drawSpacerElem(b,t.height,o):this.drawRenderedElem(b,o):console.warn("A row has an undefined or null element.",t,b)}this.drawRenderedRow(t,n,o)},e.blockRendering.Debug.prototype.drawBoundingBox=function(t){if(e.blockRendering.Debug.config.blockBounds){var n=t.RTL?-t.width:0;this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blockBoundingBox blockRenderDebug",x:n,y:0,width:t.width,height:t.height,stroke:"black",fill:"none","stroke-width":"1px","stroke-dasharray":"5,5"},this.svgRoot_)),e.blockRendering.Debug.config.connectedBlockBounds&&this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blockRenderDebug",x:n=t.RTL?-t.widthWithChildren:0,y:0,width:t.widthWithChildren,height:t.height,stroke:"#DF57BC",fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_))}},e.blockRendering.Debug.prototype.drawDebug=function(t,n){this.clearElems(),this.svgRoot_=t.getSvgRoot(),this.randomColour_="#"+Math.floor(16777215*Math.random()).toString(16);for(var p,o=0,r=0;p=n.rows[r];r++)e.blockRendering.Types.isBetweenRowSpacer(p)?this.drawSpacerRow(p,o,n.RTL):this.drawRowWithElements(p,o,n.RTL),o+=p.height;t.previousConnection&&this.drawConnection(t.previousConnection),t.nextConnection&&this.drawConnection(t.nextConnection),t.outputConnection&&this.drawConnection(t.outputConnection),n.rightSide&&this.drawRenderedElem(n.rightSide,n.RTL),this.drawBoundingBox(n),this.drawRender(t.pathObject.svgPath)},e.blockRendering.Debug.prototype.drawRender=function(t){e.blockRendering.Debug.config.render&&(t.setAttribute("filter","url(#"+this.constants_.debugFilterId+")"),setTimeout(function(){t.setAttribute("filter","")},100))},e.blockRendering.Drawer=function(t,n){this.block_=t,this.info_=n,this.topLeft_=t.getRelativeToSurfaceXY(),this.inlinePath_=this.outlinePath_="",this.constants_=n.getRenderer().getConstants()},e.blockRendering.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),this.block_.pathObject.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),e.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},e.blockRendering.Drawer.prototype.recordSizeOnBlock_=function(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren},e.blockRendering.Drawer.prototype.hideHiddenIcons_=function(){for(var n,t=0;n=this.info_.hiddenIcons[t];t++)n.icon.iconGroup_.setAttribute("display","none")},e.blockRendering.Drawer.prototype.drawOutline_=function(){this.drawTop_();for(var t=1;t<this.info_.rows.length-1;t++){var n=this.info_.rows[t];n.hasJaggedEdge?this.drawJaggedEdge_(n):n.hasStatement?this.drawStatementInput_(n):n.hasExternalInput?this.drawValueInput_(n):this.drawRightSideRow_(n)}this.drawBottom_(),this.drawLeft_()},e.blockRendering.Drawer.prototype.drawTop_=function(){var t=this.info_.topRow,n=t.elements;this.positionPreviousConnection_(),this.outlinePath_+=e.utils.svgPaths.moveBy(t.xPos,this.info_.startY);for(var r,o=0;r=n[o];o++)e.blockRendering.Types.isLeftRoundedCorner(r)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:e.blockRendering.Types.isRightRoundedCorner(r)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:e.blockRendering.Types.isPreviousConnection(r)?this.outlinePath_+=r.shape.pathLeft:e.blockRendering.Types.isHat(r)?this.outlinePath_+=this.constants_.START_HAT.path:e.blockRendering.Types.isSpacer(r)&&(this.outlinePath_+=e.utils.svgPaths.lineOnAxis("h",r.width));this.outlinePath_+=e.utils.svgPaths.lineOnAxis("v",t.height)},e.blockRendering.Drawer.prototype.drawJaggedEdge_=function(t){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+e.utils.svgPaths.lineOnAxis("v",t.height-this.constants_.JAGGED_TEETH.height)},e.blockRendering.Drawer.prototype.drawValueInput_=function(t){var n=t.getLastInput();this.positionExternalValueConnection_(t);var o="function"==typeof n.shape.pathDown?n.shape.pathDown(n.height):n.shape.pathDown;this.outlinePath_+=e.utils.svgPaths.lineOnAxis("H",n.xPos+n.width)+o+e.utils.svgPaths.lineOnAxis("v",t.height-n.connectionHeight)},e.blockRendering.Drawer.prototype.drawStatementInput_=function(t){var n=t.getLastInput(),o=n.xPos+n.notchOffset+n.shape.width;n=n.shape.pathRight+e.utils.svgPaths.lineOnAxis("h",-(n.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var r=t.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=e.utils.svgPaths.lineOnAxis("H",o)+n+e.utils.svgPaths.lineOnAxis("v",r)+this.constants_.INSIDE_CORNERS.pathBottom+e.utils.svgPaths.lineOnAxis("H",t.xPos+t.width),this.positionStatementInputConnection_(t)},e.blockRendering.Drawer.prototype.drawRightSideRow_=function(t){this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",t.yPos+t.height)},e.blockRendering.Drawer.prototype.drawBottom_=function(){var t=this.info_.bottomRow,n=t.elements;this.positionNextConnection_();for(var b,o=0,r="",p=n.length-1;b=n[p];p--)e.blockRendering.Types.isNextConnection(b)?r+=b.shape.pathRight:e.blockRendering.Types.isLeftSquareCorner(b)?r+=e.utils.svgPaths.lineOnAxis("H",t.xPos):e.blockRendering.Types.isLeftRoundedCorner(b)?r+=this.constants_.OUTSIDE_CORNERS.bottomLeft:e.blockRendering.Types.isRightRoundedCorner(b)?(r+=this.constants_.OUTSIDE_CORNERS.bottomRight,o=this.constants_.OUTSIDE_CORNERS.rightHeight):e.blockRendering.Types.isSpacer(b)&&(r+=e.utils.svgPaths.lineOnAxis("h",-1*b.width));this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",t.baseline-o),this.outlinePath_+=r},e.blockRendering.Drawer.prototype.drawLeft_=function(){var t=this.info_.outputConnection;if(this.positionOutputConnection_(),t){var n=t.connectionOffsetY+t.height;t="function"==typeof t.shape.pathUp?t.shape.pathUp(t.height):t.shape.pathUp,this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",n)+t}this.outlinePath_+="z"},e.blockRendering.Drawer.prototype.drawInternals_=function(){for(var n,t=0;n=this.info_.rows[t];t++)for(var r,o=0;r=n.elements[o];o++)e.blockRendering.Types.isInlineInput(r)?this.drawInlineInput_(r):(e.blockRendering.Types.isIcon(r)||e.blockRendering.Types.isField(r))&&this.layoutField_(r)},e.blockRendering.Drawer.prototype.layoutField_=function(t){if(e.blockRendering.Types.isField(t))var n=t.field.getSvgRoot();else e.blockRendering.Types.isIcon(t)&&(n=t.icon.iconGroup_);var o=t.centerline-t.height/2,r=t.xPos,p="";this.info_.RTL&&(r=-(r+t.width),t.flipRtl&&(r+=t.width,p="scale(-1 1)")),e.blockRendering.Types.isIcon(t)?(n.setAttribute("display","block"),n.setAttribute("transform","translate("+r+","+o+")"),t.icon.computeIconLocation()):n.setAttribute("transform","translate("+r+","+o+")"+p),this.info_.isInsertionMarker&&n.setAttribute("display","none")},e.blockRendering.Drawer.prototype.drawInlineInput_=function(t){var n=t.width,o=t.height,r=t.connectionOffsetY,p=t.connectionHeight+r;this.inlinePath_+=e.utils.svgPaths.moveTo(t.xPos+t.connectionWidth,t.centerline-o/2)+e.utils.svgPaths.lineOnAxis("v",r)+t.shape.pathDown+e.utils.svgPaths.lineOnAxis("v",o-p)+e.utils.svgPaths.lineOnAxis("h",n-t.connectionWidth)+e.utils.svgPaths.lineOnAxis("v",-o)+"z",this.positionInlineInputConnection_(t)},e.blockRendering.Drawer.prototype.positionInlineInputConnection_=function(t){if(t.connectionModel){var o=t.xPos+t.connectionWidth+t.connectionOffsetX;this.info_.RTL&&(o*=-1),t.connectionModel.setOffsetInBlock(o,t.centerline-t.height/2+t.connectionOffsetY)}},e.blockRendering.Drawer.prototype.positionStatementInputConnection_=function(t){var n=t.getLastInput();if(n.connectionModel){var o=t.xPos+t.statementEdge+n.notchOffset;this.info_.RTL&&(o*=-1),n.connectionModel.setOffsetInBlock(o,t.yPos)}},e.blockRendering.Drawer.prototype.positionExternalValueConnection_=function(t){var n=t.getLastInput();if(n.connectionModel){var o=t.xPos+t.width;this.info_.RTL&&(o*=-1),n.connectionModel.setOffsetInBlock(o,t.yPos)}},e.blockRendering.Drawer.prototype.positionPreviousConnection_=function(){var t=this.info_.topRow;if(t.connection){var n=t.xPos+t.notchOffset;t.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-n:n,0)}},e.blockRendering.Drawer.prototype.positionNextConnection_=function(){var t=this.info_.bottomRow;if(t.connection){var n=t.connection,o=n.xPos;n.connectionModel.setOffsetInBlock(this.info_.RTL?-o:o,t.baseline)}},e.blockRendering.Drawer.prototype.positionOutputConnection_=function(){if(this.info_.outputConnection){var t=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-t:t,this.info_.outputConnection.connectionOffsetY)}},e.Events.MarkerMove=function(t,n,o,r){var p=t?t.workspace.id:void 0;r&&r.getType()==e.ASTNode.types.WORKSPACE&&(p=r.getLocation().id),e.Events.MarkerMove.superClass_.constructor.call(this,p),this.blockId=t?t.id:null,this.oldNode=o,this.newNode=r,this.isCursor=n},e.utils.object.inherits(e.Events.MarkerMove,e.Events.UiBase),e.Events.MarkerMove.prototype.type=e.Events.MARKER_MOVE,e.Events.MarkerMove.prototype.toJson=function(){var t=e.Events.MarkerMove.superClass_.toJson.call(this);return t.isCursor=this.isCursor,t.blockId=this.blockId,t.oldNode=this.oldNode,t.newNode=this.newNode,t},e.Events.MarkerMove.prototype.fromJson=function(t){e.Events.MarkerMove.superClass_.fromJson.call(this,t),this.isCursor=t.isCursor,this.blockId=t.blockId,this.oldNode=t.oldNode,this.newNode=t.newNode},e.registry.register(e.registry.Type.EVENT,e.Events.MARKER_MOVE,e.Events.MarkerMove),e.blockRendering.MarkerSvg=function(t,n,o){this.workspace_=t,this.marker_=o,this.parent_=null,this.constants_=n,this.currentMarkerSvg=null,t=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=o.colour||t},e.blockRendering.MarkerSvg.CURSOR_CLASS="blocklyCursor",e.blockRendering.MarkerSvg.MARKER_CLASS="blocklyMarker",e.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER=.75,e.blockRendering.MarkerSvg.prototype.getSvgRoot=function(){return this.svgGroup_},e.blockRendering.MarkerSvg.prototype.getMarker=function(){return this.marker_},e.blockRendering.MarkerSvg.prototype.isCursor=function(){return"cursor"==this.marker_.type},e.blockRendering.MarkerSvg.prototype.createDom=function(){var t=this.isCursor()?e.blockRendering.MarkerSvg.CURSOR_CLASS:e.blockRendering.MarkerSvg.MARKER_CLASS;return this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:t},null),this.createDomInternal_(),this.svgGroup_},e.blockRendering.MarkerSvg.prototype.setParent_=function(t){this.isCursor()?(this.parent_&&this.parent_.setCursorSvg(null),t.setCursorSvg(this.getSvgRoot())):(this.parent_&&this.parent_.setMarkerSvg(null),t.setMarkerSvg(this.getSvgRoot())),this.parent_=t},e.blockRendering.MarkerSvg.prototype.draw=function(t,n){if(n){this.constants_=this.workspace_.getRenderer().getConstants();var o=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker_.colour||o,this.applyColour_(n),this.showAtLocation_(n),this.fireMarkerEvent_(t,n),void 0!==(t=this.currentMarkerSvg.childNodes[0])&&t.beginElement&&t.beginElement()}else this.hide()},e.blockRendering.MarkerSvg.prototype.showAtLocation_=function(t){var n=t.getLocation().type;t.getType()==e.ASTNode.types.BLOCK?this.showWithBlock_(t):t.getType()==e.ASTNode.types.OUTPUT?this.showWithOutput_(t):n==e.connectionTypes.INPUT_VALUE?this.showWithInput_(t):n==e.connectionTypes.NEXT_STATEMENT?this.showWithNext_(t):t.getType()==e.ASTNode.types.PREVIOUS?this.showWithPrevious_(t):t.getType()==e.ASTNode.types.FIELD?this.showWithField_(t):t.getType()==e.ASTNode.types.WORKSPACE?this.showWithCoordinates_(t):t.getType()==e.ASTNode.types.STACK&&this.showWithStack_(t)},e.blockRendering.MarkerSvg.prototype.showWithBlockPrevOutput_=function(t){var n=(t=t.getSourceBlock()).width,o=t.height,r=o*e.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER,p=this.constants_.CURSOR_BLOCK_PADDING;if(t.previousConnection){var b=this.constants_.shapeFor(t.previousConnection);this.positionPrevious_(n,p,r,b)}else t.outputConnection?(b=this.constants_.shapeFor(t.outputConnection),this.positionOutput_(n,o,b)):this.positionBlock_(n,p,r);this.setParent_(t),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithBlock_=function(t){this.showWithBlockPrevOutput_(t)},e.blockRendering.MarkerSvg.prototype.showWithPrevious_=function(t){this.showWithBlockPrevOutput_(t)},e.blockRendering.MarkerSvg.prototype.showWithOutput_=function(t){this.showWithBlockPrevOutput_(t)},e.blockRendering.MarkerSvg.prototype.showWithCoordinates_=function(t){var n=t.getWsCoordinate();t=n.x,this.workspace_.RTL&&(t-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(t,n=n.y,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace_),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithField_=function(t){var n=(t=t.getLocation()).getSize().width,o=t.getSize().height;this.positionRect_(0,0,n,o),this.setParent_(t),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithInput_=function(t){var n=(t=t.getLocation()).getSourceBlock();this.positionInput_(t),this.setParent_(n),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithNext_=function(t){var n=t.getLocation();t=n.getSourceBlock();var o=0;n=n.getOffsetInBlock().y;var r=t.getHeightWidth().width;this.workspace_.RTL&&(o=-r),this.positionLine_(o,n,r),this.setParent_(t),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithStack_=function(t){var n=(t=t.getLocation()).getHeightWidth(),o=n.width+this.constants_.CURSOR_STACK_PADDING,r=-this.constants_.CURSOR_STACK_PADDING/2,b=r;this.workspace_.RTL&&(b=-(o+r)),this.positionRect_(b,-this.constants_.CURSOR_STACK_PADDING/2,o,n=n.height+this.constants_.CURSOR_STACK_PADDING),this.setParent_(t),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showCurrent_=function(){this.hide(),this.currentMarkerSvg.style.display=""},e.blockRendering.MarkerSvg.prototype.positionBlock_=function(t,n,o){t=e.utils.svgPaths.moveBy(-n,o)+e.utils.svgPaths.lineOnAxis("V",-n)+e.utils.svgPaths.lineOnAxis("H",t+2*n)+e.utils.svgPaths.lineOnAxis("V",o),this.markerBlock_.setAttribute("d",t),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},e.blockRendering.MarkerSvg.prototype.positionInput_=function(t){var n=t.getOffsetInBlock().x,o=t.getOffsetInBlock().y;t=e.utils.svgPaths.moveTo(0,0)+this.constants_.shapeFor(t).pathDown,this.markerInput_.setAttribute("d",t),this.markerInput_.setAttribute("transform","translate("+n+","+o+")"+(this.workspace_.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_},e.blockRendering.MarkerSvg.prototype.positionLine_=function(t,n,o){this.markerSvgLine_.setAttribute("x",t),this.markerSvgLine_.setAttribute("y",n),this.markerSvgLine_.setAttribute("width",o),this.currentMarkerSvg=this.markerSvgLine_},e.blockRendering.MarkerSvg.prototype.positionOutput_=function(t,n,o){t=e.utils.svgPaths.moveBy(t,0)+e.utils.svgPaths.lineOnAxis("h",-(t-o.width))+e.utils.svgPaths.lineOnAxis("v",this.constants_.TAB_OFFSET_FROM_TOP)+o.pathDown+e.utils.svgPaths.lineOnAxis("V",n)+e.utils.svgPaths.lineOnAxis("H",t),this.markerBlock_.setAttribute("d",t),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},e.blockRendering.MarkerSvg.prototype.positionPrevious_=function(t,n,o,r){t=e.utils.svgPaths.moveBy(-n,o)+e.utils.svgPaths.lineOnAxis("V",-n)+e.utils.svgPaths.lineOnAxis("H",this.constants_.NOTCH_OFFSET_LEFT)+r.pathLeft+e.utils.svgPaths.lineOnAxis("H",t+2*n)+e.utils.svgPaths.lineOnAxis("V",o),this.markerBlock_.setAttribute("d",t),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},e.blockRendering.MarkerSvg.prototype.positionRect_=function(t,n,o,r){this.markerSvgRect_.setAttribute("x",t),this.markerSvgRect_.setAttribute("y",n),this.markerSvgRect_.setAttribute("width",o),this.markerSvgRect_.setAttribute("height",r),this.currentMarkerSvg=this.markerSvgRect_},e.blockRendering.MarkerSvg.prototype.flipRtl_=function(t){t.setAttribute("transform","scale(-1 1)")},e.blockRendering.MarkerSvg.prototype.hide=function(){this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"},e.blockRendering.MarkerSvg.prototype.fireMarkerEvent_=function(t,n){var o=n.getSourceBlock();t=new(e.Events.get(e.Events.MARKER_MOVE))(o,this.isCursor(),t,n),e.Events.fire(t)},e.blockRendering.MarkerSvg.prototype.getBlinkProperties_=function(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}},e.blockRendering.MarkerSvg.prototype.createDomInternal_=function(){if(this.markerSvg_=e.utils.dom.createSvgElement(e.utils.Svg.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT,style:"display: none"},this.markerSvg_),this.markerSvgRect_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10,style:"display: none"},this.markerSvg_),this.markerInput_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{transform:"",style:"display: none"},this.markerSvg_),this.markerBlock_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{transform:"",style:"display: none",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var t=this.getBlinkProperties_();e.utils.dom.createSvgElement(e.utils.Svg.ANIMATE,t,this.markerSvgLine_),e.utils.dom.createSvgElement(e.utils.Svg.ANIMATE,t,this.markerInput_),t.attributeName="stroke",e.utils.dom.createSvgElement(e.utils.Svg.ANIMATE,t,this.markerBlock_)}return this.markerSvg_},e.blockRendering.MarkerSvg.prototype.applyColour_=function(t){this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(this.markerSvgLine_.firstChild.setAttribute("values",t=this.colour_+";transparent;transparent;"),this.markerInput_.firstChild.setAttribute("values",t),this.markerBlock_.firstChild.setAttribute("values",t))},e.blockRendering.MarkerSvg.prototype.dispose=function(){this.svgGroup_&&e.utils.dom.removeNode(this.svgGroup_)},e.blockRendering.PathObject=function(t,n,o){this.constants=o,this.svgRoot=t,this.svgPath=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.style=n,this.markerSvg=this.cursorSvg=null},e.blockRendering.PathObject.prototype.setPath=function(t){this.svgPath.setAttribute("d",t)},e.blockRendering.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)")},e.blockRendering.PathObject.prototype.setCursorSvg=function(t){t?(this.svgRoot.appendChild(t),this.cursorSvg=t):this.cursorSvg=null},e.blockRendering.PathObject.prototype.setMarkerSvg=function(t){t?(this.cursorSvg?this.svgRoot.insertBefore(t,this.cursorSvg):this.svgRoot.appendChild(t),this.markerSvg=t):this.markerSvg=null},e.blockRendering.PathObject.prototype.applyColour=function(t){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(t.isShadow()),this.updateDisabled_(!t.isEnabled()||t.getInheritedDisabled())},e.blockRendering.PathObject.prototype.setStyle=function(t){this.style=t},e.blockRendering.PathObject.prototype.setClass_=function(t,n){n?e.utils.dom.addClass(this.svgRoot,t):e.utils.dom.removeClass(this.svgRoot,t)},e.blockRendering.PathObject.prototype.updateHighlighted=function(t){this.svgPath.setAttribute("filter",t?"url(#"+this.constants.embossFilterId+")":"none")},e.blockRendering.PathObject.prototype.updateShadow_=function(t){t&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},e.blockRendering.PathObject.prototype.updateDisabled_=function(t){this.setClass_("blocklyDisabled",t),t&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")},e.blockRendering.PathObject.prototype.updateSelected=function(t){this.setClass_("blocklySelected",t)},e.blockRendering.PathObject.prototype.updateDraggingDelete=function(t){this.setClass_("blocklyDraggingDelete",t)},e.blockRendering.PathObject.prototype.updateInsertionMarker=function(t){this.setClass_("blocklyInsertionMarker",t)},e.blockRendering.PathObject.prototype.updateMovable=function(t){this.setClass_("blocklyDraggable",t)},e.blockRendering.PathObject.prototype.updateReplacementFade=function(t){this.setClass_("blocklyReplaceable",t)},e.blockRendering.PathObject.prototype.updateShapeForInputHighlight=function(t,n){},e.blockRendering.Renderer=function(t){this.name=t,this.overrides=this.constants_=null},e.blockRendering.Renderer.prototype.getClassName=function(){return this.name+"-renderer"},e.blockRendering.Renderer.prototype.init=function(t,n){this.constants_=this.makeConstants_(),n&&(this.overrides=n,e.utils.object.mixin(this.constants_,n)),this.constants_.setTheme(t),this.constants_.init()},e.blockRendering.Renderer.prototype.createDom=function(t,n){this.constants_.createDom(t,this.name+"-"+n.name,"."+this.getClassName()+"."+n.getClassName())},e.blockRendering.Renderer.prototype.refreshDom=function(t,n){var o=this.getConstants();o.dispose(),this.constants_=this.makeConstants_(),this.overrides&&e.utils.object.mixin(this.constants_,this.overrides),this.constants_.randomIdentifier=o.randomIdentifier,this.constants_.setTheme(n),this.constants_.init(),this.createDom(t,n)},e.blockRendering.Renderer.prototype.dispose=function(){this.constants_&&this.constants_.dispose()},e.blockRendering.Renderer.prototype.makeConstants_=function(){return new e.blockRendering.ConstantProvider},e.blockRendering.Renderer.prototype.makeRenderInfo_=function(t){return new e.blockRendering.RenderInfo(this,t)},e.blockRendering.Renderer.prototype.makeDrawer_=function(t,n){return new e.blockRendering.Drawer(t,n)},e.blockRendering.Renderer.prototype.makeDebugger_=function(){if(!e.blockRendering.Debug)throw Error("Missing require for Blockly.blockRendering.Debug");return new e.blockRendering.Debug(this.getConstants())},e.blockRendering.Renderer.prototype.makeMarkerDrawer=function(t,n){return new e.blockRendering.MarkerSvg(t,this.getConstants(),n)},e.blockRendering.Renderer.prototype.makePathObject=function(t,n){return new e.blockRendering.PathObject(t,n,this.constants_)},e.blockRendering.Renderer.prototype.getConstants=function(){return this.constants_},e.blockRendering.Renderer.prototype.shouldHighlightConnection=function(t){return!0},e.blockRendering.Renderer.prototype.orphanCanConnectAtEnd=function(t,n,o){return!!e.Connection.getConnectionForOrphanedConnection(t,o===e.connectionTypes.OUTPUT_VALUE?n.outputConnection:n.previousConnection)},e.blockRendering.Renderer.prototype.getConnectionPreviewMethod=function(t,n,o){return n.type==e.connectionTypes.OUTPUT_VALUE||n.type==e.connectionTypes.PREVIOUS_STATEMENT?!t.isConnected()||this.orphanCanConnectAtEnd(o,t.targetBlock(),n.type)?e.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:e.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:e.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER},e.blockRendering.Renderer.prototype.render=function(t){e.blockRendering.useDebugger&&!t.renderingDebugger&&(t.renderingDebugger=this.makeDebugger_());var n=this.makeRenderInfo_(t);n.measure(),this.makeDrawer_(t,n).draw()},e.geras={},e.geras.ConstantProvider=function(){e.geras.ConstantProvider.superClass_.constructor.call(this),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2},e.utils.object.inherits(e.geras.ConstantProvider,e.blockRendering.ConstantProvider),e.geras.ConstantProvider.prototype.getCSS_=function(t){return e.geras.ConstantProvider.superClass_.getCSS_.call(this,t).concat([t+" .blocklyInsertionMarker>.blocklyPathLight,",t+" .blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"])},e.geras.Highlighter=function(t){this.info_=t,this.inlineSteps_=this.steps_="",this.RTL_=this.info_.RTL,t=t.getRenderer(),this.constants_=t.getConstants(),this.highlightConstants_=t.getHighlightConstants(),this.highlightOffset_=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH},e.geras.Highlighter.prototype.getPath=function(){return this.steps_+"\n"+this.inlineSteps_},e.geras.Highlighter.prototype.drawTopCorner=function(t){this.steps_+=e.utils.svgPaths.moveBy(t.xPos,this.info_.startY);for(var o,n=0;o=t.elements[n];n++)e.blockRendering.Types.isLeftSquareCorner(o)?this.steps_+=this.highlightConstants_.START_POINT:e.blockRendering.Types.isLeftRoundedCorner(o)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):e.blockRendering.Types.isPreviousConnection(o)?this.steps_+=this.notchPaths_.pathLeft:e.blockRendering.Types.isHat(o)?this.steps_+=this.startPaths_.path(this.RTL_):e.blockRendering.Types.isSpacer(o)&&0!=o.width&&(this.steps_+=e.utils.svgPaths.lineOnAxis("H",o.xPos+o.width-this.highlightOffset_));this.steps_+=e.utils.svgPaths.lineOnAxis("H",t.xPos+t.width-this.highlightOffset_)},e.geras.Highlighter.prototype.drawJaggedEdge_=function(t){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+e.utils.svgPaths.lineOnAxis("v",t.height-this.jaggedTeethPaths_.height-this.highlightOffset_))},e.geras.Highlighter.prototype.drawValueInput=function(t){var n=t.getLastInput();if(this.RTL_){var o=t.height-n.connectionHeight;this.steps_+=e.utils.svgPaths.moveTo(n.xPos+n.width-this.highlightOffset_,t.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+e.utils.svgPaths.lineOnAxis("v",o)}else this.steps_+=e.utils.svgPaths.moveTo(n.xPos+n.width,t.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)},e.geras.Highlighter.prototype.drawStatementInput=function(t){var n=t.getLastInput();if(this.RTL_){var o=t.height-2*this.insideCornerPaths_.height;this.steps_+=e.utils.svgPaths.moveTo(n.xPos,t.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+e.utils.svgPaths.lineOnAxis("v",o)+this.insideCornerPaths_.pathBottom(this.RTL_)+e.utils.svgPaths.lineTo(t.width-n.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=e.utils.svgPaths.moveTo(n.xPos,t.yPos+t.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+e.utils.svgPaths.lineTo(t.width-n.xPos-this.insideCornerPaths_.width,0)},e.geras.Highlighter.prototype.drawRightSideRow=function(t){var n=t.xPos+t.width-this.highlightOffset_;t.followsStatement&&(this.steps_+=e.utils.svgPaths.lineOnAxis("H",n)),this.RTL_&&(this.steps_+=e.utils.svgPaths.lineOnAxis("H",n),t.height>this.highlightOffset_&&(this.steps_+=e.utils.svgPaths.lineOnAxis("V",t.yPos+t.height-this.highlightOffset_)))},e.geras.Highlighter.prototype.drawBottomRow=function(t){if(this.RTL_)this.steps_+=e.utils.svgPaths.lineOnAxis("V",t.baseline-this.highlightOffset_);else{var n=this.info_.bottomRow.elements[0];e.blockRendering.Types.isLeftSquareCorner(n)?this.steps_+=e.utils.svgPaths.moveTo(t.xPos+this.highlightOffset_,t.baseline-this.highlightOffset_):e.blockRendering.Types.isLeftRoundedCorner(n)&&(this.steps_+=e.utils.svgPaths.moveTo(t.xPos,t.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}},e.geras.Highlighter.prototype.drawLeft=function(){var t=this.info_.outputConnection;t&&(t=t.connectionOffsetY+t.height,this.RTL_?this.steps_+=e.utils.svgPaths.moveTo(this.info_.startX,t):(this.steps_+=e.utils.svgPaths.moveTo(this.info_.startX+this.highlightOffset_,this.info_.bottomRow.baseline-this.highlightOffset_),this.steps_+=e.utils.svgPaths.lineOnAxis("V",t)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(e.blockRendering.Types.isLeftRoundedCorner((t=this.info_.topRow).elements[0])?this.steps_+=e.utils.svgPaths.lineOnAxis("V",this.outsideCornerPaths_.height):this.steps_+=e.utils.svgPaths.lineOnAxis("V",t.capline+this.highlightOffset_))},e.geras.Highlighter.prototype.drawInlineInput=function(t){var n=this.highlightOffset_,o=t.xPos+t.connectionWidth,r=t.centerline-t.height/2,p=t.width-t.connectionWidth,b=r+n;this.RTL_?(r=t.connectionOffsetY-n,t=t.height-(t.connectionOffsetY+t.connectionHeight)+n,this.inlineSteps_+=e.utils.svgPaths.moveTo(o-n,b)+e.utils.svgPaths.lineOnAxis("v",r)+this.puzzleTabPaths_.pathDown(this.RTL_)+e.utils.svgPaths.lineOnAxis("v",t)+e.utils.svgPaths.lineOnAxis("h",p)):this.inlineSteps_+=e.utils.svgPaths.moveTo(t.xPos+t.width+n,b)+e.utils.svgPaths.lineOnAxis("v",t.height)+e.utils.svgPaths.lineOnAxis("h",-p)+e.utils.svgPaths.moveTo(o,r+t.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)},e.geras.InlineInput=function(t,n){e.geras.InlineInput.superClass_.constructor.call(this,t,n),this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)},e.utils.object.inherits(e.geras.InlineInput,e.blockRendering.InlineInput),e.geras.StatementInput=function(t,n){e.geras.StatementInput.superClass_.constructor.call(this,t,n),this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)},e.utils.object.inherits(e.geras.StatementInput,e.blockRendering.StatementInput),e.geras.RenderInfo=function(t,n){e.geras.RenderInfo.superClass_.constructor.call(this,t,n)},e.utils.object.inherits(e.geras.RenderInfo,e.blockRendering.RenderInfo),e.geras.RenderInfo.prototype.getRenderer=function(){return this.renderer_},e.geras.RenderInfo.prototype.populateBottomRow_=function(){e.geras.RenderInfo.superClass_.populateBottomRow_.call(this),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==e.inputTypes.STATEMENT||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)},e.geras.RenderInfo.prototype.addInput_=function(t,n){this.isInline&&t.type==e.inputTypes.VALUE?(n.elements.push(new e.geras.InlineInput(this.constants_,t)),n.hasInlineInput=!0):t.type==e.inputTypes.STATEMENT?(n.elements.push(new e.geras.StatementInput(this.constants_,t)),n.hasStatement=!0):t.type==e.inputTypes.VALUE?(n.elements.push(new e.blockRendering.ExternalValueInput(this.constants_,t)),n.hasExternalInput=!0):t.type==e.inputTypes.DUMMY&&(n.minHeight=Math.max(n.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),n.hasDummyInput=!0),this.isInline||null!=n.align||(n.align=t.align)},e.geras.RenderInfo.prototype.addElemSpacing_=function(){for(var o,t=!1,n=0;o=this.rows[n];n++)o.hasExternalInput&&(t=!0);for(n=0;o=this.rows[n];n++){var r=o.elements;if(o.elements=[],o.startsWithElemSpacer()&&o.elements.push(new e.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,r[0]))),r.length){for(var p=0;p<r.length-1;p++){o.elements.push(r[p]);var b=this.getInRowSpacing_(r[p],r[p+1]);o.elements.push(new e.blockRendering.InRowSpacer(this.constants_,b))}o.elements.push(r[r.length-1]),o.endsWithElemSpacer()&&(b=this.getInRowSpacing_(r[r.length-1],null),t&&o.hasDummyInput&&(b+=this.constants_.TAB_WIDTH),o.elements.push(new e.blockRendering.InRowSpacer(this.constants_,b)))}}},e.geras.RenderInfo.prototype.getInRowSpacing_=function(t,n){if(!t)return n&&e.blockRendering.Types.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:n&&e.blockRendering.Types.isInlineInput(n)?this.constants_.MEDIUM_LARGE_PADDING:n&&e.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!e.blockRendering.Types.isInput(t)&&(!n||e.blockRendering.Types.isStatementInput(n)))return e.blockRendering.Types.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:e.blockRendering.Types.isIcon(t)?2*this.constants_.LARGE_PADDING+1:e.blockRendering.Types.isHat(t)?this.constants_.NO_PADDING:e.blockRendering.Types.isPreviousOrNextConnection(t)?this.constants_.LARGE_PADDING:e.blockRendering.Types.isLeftRoundedCorner(t)?this.constants_.MIN_BLOCK_WIDTH:e.blockRendering.Types.isJaggedEdge(t)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isInput(t)&&!n){if(e.blockRendering.Types.isExternalInput(t))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isInlineInput(t))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(t))return this.constants_.NO_PADDING}if(!e.blockRendering.Types.isInput(t)&&n&&e.blockRendering.Types.isInput(n)){if(e.blockRendering.Types.isField(t)&&t.isEditable){if(e.blockRendering.Types.isInlineInput(n)||e.blockRendering.Types.isExternalInput(n))return this.constants_.SMALL_PADDING}else{if(e.blockRendering.Types.isInlineInput(n)||e.blockRendering.Types.isExternalInput(n))return this.constants_.MEDIUM_LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(n))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(e.blockRendering.Types.isIcon(t)&&n&&!e.blockRendering.Types.isInput(n))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isInlineInput(t)&&n&&e.blockRendering.Types.isField(n))return n.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isLeftSquareCorner(t)&&n){if(e.blockRendering.Types.isHat(n))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isPreviousConnection(n))return n.notchOffset;if(e.blockRendering.Types.isNextConnection(n))return n.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(e.blockRendering.Types.isLeftRoundedCorner(t)&&n){if(e.blockRendering.Types.isPreviousConnection(n))return n.notchOffset-this.constants_.CORNER_RADIUS;if(e.blockRendering.Types.isNextConnection(n))return n.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return e.blockRendering.Types.isField(t)&&n&&e.blockRendering.Types.isField(n)&&t.isEditable==n.isEditable||n&&e.blockRendering.Types.isJaggedEdge(n)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},e.geras.RenderInfo.prototype.getSpacerRowHeight_=function(t,n){return e.blockRendering.Types.isTopRow(t)&&e.blockRendering.Types.isBottomRow(n)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:e.blockRendering.Types.isTopRow(t)||e.blockRendering.Types.isBottomRow(n)?this.constants_.NO_PADDING:t.hasExternalInput&&n.hasExternalInput?this.constants_.LARGE_PADDING:!t.hasStatement&&n.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:t.hasStatement&&n.hasStatement||!t.hasStatement&&n.hasDummyInput||t.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},e.geras.RenderInfo.prototype.getElemCenterline_=function(t,n){if(e.blockRendering.Types.isSpacer(n))return t.yPos+n.height/2;if(e.blockRendering.Types.isBottomRow(t))return t=t.yPos+t.height-t.descenderHeight,e.blockRendering.Types.isNextConnection(n)?t+n.height/2:t-n.height/2;if(e.blockRendering.Types.isTopRow(t))return e.blockRendering.Types.isHat(n)?t.capline-n.height/2:t.capline+n.height/2;var o=t.yPos;return e.blockRendering.Types.isField(n)||e.blockRendering.Types.isIcon(n)?(o+=n.height/2,(t.hasInlineInput||t.hasStatement)&&n.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=t.height&&(o+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):o=e.blockRendering.Types.isInlineInput(n)?o+n.height/2:o+t.height/2,o},e.geras.RenderInfo.prototype.alignRowElements_=function(){if(this.isInline){for(var r,t=0,n=null,o=this.rows.length-1;r=this.rows[o];o--)r.nextRightEdge=t,e.blockRendering.Types.isInputRow(r)&&(r.hasStatement&&this.alignStatementRow_(r),n&&n.hasStatement&&r.width<n.width?r.nextRightEdge=n.width:t=r.width,n=r);for(o=t=0;r=this.rows[o];o++)r.hasStatement?t=this.getDesiredRowWidth_(r):e.blockRendering.Types.isSpacer(r)?r.width=Math.max(t,r.nextRightEdge):(0<(t=Math.max(t,r.nextRightEdge)-r.width)&&this.addAlignmentPadding_(r,t),t=r.width)}else e.geras.RenderInfo.superClass_.alignRowElements_.call(this)},e.geras.RenderInfo.prototype.getDesiredRowWidth_=function(t){return this.isInline&&t.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:e.geras.RenderInfo.superClass_.getDesiredRowWidth_.call(this,t)},e.geras.RenderInfo.prototype.finalize_=function(){for(var r,t=0,n=0,o=0;r=this.rows[o];o++){r.yPos=n,r.xPos=this.startX,n+=r.height,t=Math.max(t,r.widthWithConnectedBlocks);var p=n-this.topRow.ascenderHeight;r==this.bottomRow&&p<this.constants_.MIN_BLOCK_HEIGHT&&(this.bottomRow.height+=p=this.constants_.MIN_BLOCK_HEIGHT-p,n+=p),this.recordElemPositions_(r)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(t=Math.max(t,this.block_.nextConnection.targetBlock().getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=n-this.bottomRow.descenderHeight,this.widthWithChildren=t+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=n+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline},e.geras.Drawer=function(t,n){e.geras.Drawer.superClass_.constructor.call(this,t,n),this.highlighter_=new e.geras.Highlighter(n)},e.utils.object.inherits(e.geras.Drawer,e.blockRendering.Drawer),e.geras.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_();var t=this.block_.pathObject;t.setPath(this.outlinePath_+"\n"+this.inlinePath_),t.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&t.flipRTL(),e.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},e.geras.Drawer.prototype.drawTop_=function(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),e.geras.Drawer.superClass_.drawTop_.call(this)},e.geras.Drawer.prototype.drawJaggedEdge_=function(t){this.highlighter_.drawJaggedEdge_(t),e.geras.Drawer.superClass_.drawJaggedEdge_.call(this,t)},e.geras.Drawer.prototype.drawValueInput_=function(t){this.highlighter_.drawValueInput(t),e.geras.Drawer.superClass_.drawValueInput_.call(this,t)},e.geras.Drawer.prototype.drawStatementInput_=function(t){this.highlighter_.drawStatementInput(t),e.geras.Drawer.superClass_.drawStatementInput_.call(this,t)},e.geras.Drawer.prototype.drawRightSideRow_=function(t){this.highlighter_.drawRightSideRow(t),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("H",t.xPos+t.width)+e.utils.svgPaths.lineOnAxis("V",t.yPos+t.height)},e.geras.Drawer.prototype.drawBottom_=function(){this.highlighter_.drawBottomRow(this.info_.bottomRow),e.geras.Drawer.superClass_.drawBottom_.call(this)},e.geras.Drawer.prototype.drawLeft_=function(){this.highlighter_.drawLeft(),e.geras.Drawer.superClass_.drawLeft_.call(this)},e.geras.Drawer.prototype.drawInlineInput_=function(t){this.highlighter_.drawInlineInput(t),e.geras.Drawer.superClass_.drawInlineInput_.call(this,t)},e.geras.Drawer.prototype.positionInlineInputConnection_=function(t){if(t.connectionModel){var o=t.xPos+t.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(o*=-1),t.connectionModel.setOffsetInBlock(o,t.centerline-t.height/2+t.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}},e.geras.Drawer.prototype.positionStatementInputConnection_=function(t){var n=t.getLastInput();if(n.connectionModel){var o=t.xPos+t.statementEdge+n.notchOffset;n.connectionModel.setOffsetInBlock(o=this.info_.RTL?-1*o:o+this.constants_.DARK_PATH_OFFSET,t.yPos+this.constants_.DARK_PATH_OFFSET)}},e.geras.Drawer.prototype.positionExternalValueConnection_=function(t){var n=t.getLastInput();if(n.connectionModel){var o=t.xPos+t.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(o*=-1),n.connectionModel.setOffsetInBlock(o,t.yPos)}},e.geras.Drawer.prototype.positionNextConnection_=function(){var t=this.info_.bottomRow;if(t.connection){var n=t.connection,o=n.xPos;n.connectionModel.setOffsetInBlock((this.info_.RTL?-o:o)+this.constants_.DARK_PATH_OFFSET/2,t.baseline+this.constants_.DARK_PATH_OFFSET)}},e.geras.HighlightConstantProvider=function(t){this.constantProvider=t,this.OFFSET=.5,this.START_POINT=e.utils.svgPaths.moveBy(this.OFFSET,this.OFFSET)},e.geras.HighlightConstantProvider.prototype.init=function(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()},e.geras.HighlightConstantProvider.prototype.makeInsideCorner=function(){var t=this.constantProvider.CORNER_RADIUS,n=this.OFFSET,o=(1-Math.SQRT1_2)*(t+n)-n,r=e.utils.svgPaths.moveBy(o,o)+e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(-o-n,t-o)),p=e.utils.svgPaths.arc("a","0 0,0",t+n,e.utils.svgPaths.point(t+n,t+n)),b=e.utils.svgPaths.moveBy(o,-o)+e.utils.svgPaths.arc("a","0 0,0",t+n,e.utils.svgPaths.point(t-o,o+n));return{width:t+n,height:t,pathTop:function(I){return I?r:""},pathBottom:function(I){return I?p:b}}},e.geras.HighlightConstantProvider.prototype.makeOutsideCorner=function(){var t=this.constantProvider.CORNER_RADIUS,n=this.OFFSET,o=(1-Math.SQRT1_2)*(t-n)+n,r=e.utils.svgPaths.moveBy(o,o)+e.utils.svgPaths.arc("a","0 0,1",t-n,e.utils.svgPaths.point(t-o,-o+n)),p=e.utils.svgPaths.moveBy(n,t)+e.utils.svgPaths.arc("a","0 0,1",t-n,e.utils.svgPaths.point(t,-t+n)),b=-o,I=e.utils.svgPaths.moveBy(o,b)+e.utils.svgPaths.arc("a","0 0,1",t-n,e.utils.svgPaths.point(-o+n,-b-t));return{height:t,topLeft:function(x){return x?r:p},bottomLeft:function(){return I}}},e.geras.HighlightConstantProvider.prototype.makePuzzleTab=function(){var t=this.constantProvider.TAB_WIDTH,n=this.constantProvider.TAB_HEIGHT,o=e.utils.svgPaths.moveBy(-2,3.4-n)+e.utils.svgPaths.lineTo(-.45*t,-2.1),r=e.utils.svgPaths.lineOnAxis("v",2.5)+e.utils.svgPaths.moveBy(.97*-t,2.5)+e.utils.svgPaths.curve("q",[e.utils.svgPaths.point(.05*-t,10),e.utils.svgPaths.point(.3*t,9.5)])+e.utils.svgPaths.moveBy(.67*t,-1.9)+e.utils.svgPaths.lineOnAxis("v",2.5),p=e.utils.svgPaths.lineOnAxis("v",-1.5)+e.utils.svgPaths.moveBy(-.92*t,-.5)+e.utils.svgPaths.curve("q",[e.utils.svgPaths.point(-.19*t,-5.5),e.utils.svgPaths.point(0,-11)])+e.utils.svgPaths.moveBy(.92*t,1),b=e.utils.svgPaths.moveBy(-5,n-.7)+e.utils.svgPaths.lineTo(.46*t,-2.1);return{width:t,height:n,pathUp:function(I){return I?o:p},pathDown:function(I){return I?r:b}}},e.geras.HighlightConstantProvider.prototype.makeNotch=function(){return{pathLeft:e.utils.svgPaths.lineOnAxis("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}},e.geras.HighlightConstantProvider.prototype.makeJaggedTeeth=function(){return{pathLeft:e.utils.svgPaths.lineTo(5.1,2.6)+e.utils.svgPaths.moveBy(-10.2,6.8)+e.utils.svgPaths.lineTo(5.1,2.6),height:12,width:10.2}},e.geras.HighlightConstantProvider.prototype.makeStartHat=function(){var t=this.constantProvider.START_HAT.height,n=e.utils.svgPaths.moveBy(25,-8.7)+e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(29.7,-6.2),e.utils.svgPaths.point(57.2,-.5),e.utils.svgPaths.point(75,8.7)]),o=e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(17.8,-9.2),e.utils.svgPaths.point(45.3,-14.9),e.utils.svgPaths.point(75,-8.7)])+e.utils.svgPaths.moveTo(100.5,t+.5);return{path:function(r){return r?n:o}}},e.geras.PathObject=function(t,n,o){this.constants=o,this.svgRoot=t,this.svgPathDark=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"},this.svgRoot),this.svgPath=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.svgPathLight=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyPathLight"},this.svgRoot),this.colourDark="#000000",this.style=n},e.utils.object.inherits(e.geras.PathObject,e.blockRendering.PathObject),e.geras.PathObject.prototype.setPath=function(t){this.svgPath.setAttribute("d",t),this.svgPathDark.setAttribute("d",t)},e.geras.PathObject.prototype.setHighlightPath=function(t){this.svgPathLight.setAttribute("d",t)},e.geras.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")},e.geras.PathObject.prototype.applyColour=function(t){this.svgPathLight.style.display="",this.svgPathDark.style.display="",this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),e.geras.PathObject.superClass_.applyColour.call(this,t),this.svgPath.setAttribute("stroke","none")},e.geras.PathObject.prototype.setStyle=function(t){this.style=t,this.colourDark=e.utils.colour.blend("#000",this.style.colourPrimary,.2)||this.colourDark},e.geras.PathObject.prototype.updateHighlighted=function(t){t?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")},e.geras.PathObject.prototype.updateShadow_=function(t){t&&(this.svgPathLight.style.display="none",this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},e.geras.PathObject.prototype.updateDisabled_=function(t){e.geras.PathObject.superClass_.updateDisabled_.call(this,t),t&&this.svgPath.setAttribute("stroke","none")},e.geras.Renderer=function(t){e.geras.Renderer.superClass_.constructor.call(this,t),this.highlightConstants_=null},e.utils.object.inherits(e.geras.Renderer,e.blockRendering.Renderer),e.geras.Renderer.prototype.init=function(t,n){e.geras.Renderer.superClass_.init.call(this,t,n),this.highlightConstants_=this.makeHighlightConstants_(),this.highlightConstants_.init()},e.geras.Renderer.prototype.refreshDom=function(t,n){e.geras.Renderer.superClass_.refreshDom.call(this,t,n),this.getHighlightConstants().init()},e.geras.Renderer.prototype.makeConstants_=function(){return new e.geras.ConstantProvider},e.geras.Renderer.prototype.makeRenderInfo_=function(t){return new e.geras.RenderInfo(this,t)},e.geras.Renderer.prototype.makeDrawer_=function(t,n){return new e.geras.Drawer(t,n)},e.geras.Renderer.prototype.makePathObject=function(t,n){return new e.geras.PathObject(t,n,this.getConstants())},e.geras.Renderer.prototype.makeHighlightConstants_=function(){return new e.geras.HighlightConstantProvider(this.getConstants())},e.geras.Renderer.prototype.getHighlightConstants=function(){return this.highlightConstants_},e.blockRendering.register("geras",e.geras.Renderer),e.thrasos={},e.thrasos.RenderInfo=function(t,n){e.thrasos.RenderInfo.superClass_.constructor.call(this,t,n)},e.utils.object.inherits(e.thrasos.RenderInfo,e.blockRendering.RenderInfo),e.thrasos.RenderInfo.prototype.getRenderer=function(){return this.renderer_},e.thrasos.RenderInfo.prototype.addElemSpacing_=function(){for(var o,t=!1,n=0;o=this.rows[n];n++)o.hasExternalInput&&(t=!0);for(n=0;o=this.rows[n];n++){var r=o.elements;o.elements=[],o.startsWithElemSpacer()&&o.elements.push(new e.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,r[0])));for(var p=0;p<r.length-1;p++){o.elements.push(r[p]);var b=this.getInRowSpacing_(r[p],r[p+1]);o.elements.push(new e.blockRendering.InRowSpacer(this.constants_,b))}o.elements.push(r[r.length-1]),o.endsWithElemSpacer()&&(b=this.getInRowSpacing_(r[r.length-1],null),t&&o.hasDummyInput&&(b+=this.constants_.TAB_WIDTH),o.elements.push(new e.blockRendering.InRowSpacer(this.constants_,b)))}},e.thrasos.RenderInfo.prototype.getInRowSpacing_=function(t,n){if(!t)return n&&e.blockRendering.Types.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:n&&e.blockRendering.Types.isInlineInput(n)?this.constants_.MEDIUM_LARGE_PADDING:n&&e.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!e.blockRendering.Types.isInput(t)&&!n)return e.blockRendering.Types.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:e.blockRendering.Types.isIcon(t)?2*this.constants_.LARGE_PADDING+1:e.blockRendering.Types.isHat(t)?this.constants_.NO_PADDING:e.blockRendering.Types.isPreviousOrNextConnection(t)?this.constants_.LARGE_PADDING:e.blockRendering.Types.isLeftRoundedCorner(t)?this.constants_.MIN_BLOCK_WIDTH:e.blockRendering.Types.isJaggedEdge(t)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isInput(t)&&!n){if(e.blockRendering.Types.isExternalInput(t))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isInlineInput(t))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(t))return this.constants_.NO_PADDING}if(!e.blockRendering.Types.isInput(t)&&n&&e.blockRendering.Types.isInput(n)){if(e.blockRendering.Types.isField(t)&&t.isEditable){if(e.blockRendering.Types.isInlineInput(n)||e.blockRendering.Types.isExternalInput(n))return this.constants_.SMALL_PADDING}else{if(e.blockRendering.Types.isInlineInput(n)||e.blockRendering.Types.isExternalInput(n))return this.constants_.MEDIUM_LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(n))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(e.blockRendering.Types.isIcon(t)&&n&&!e.blockRendering.Types.isInput(n))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isInlineInput(t)&&n&&e.blockRendering.Types.isField(n))return n.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isLeftSquareCorner(t)&&n){if(e.blockRendering.Types.isHat(n))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isPreviousConnection(n)||e.blockRendering.Types.isNextConnection(n))return n.notchOffset}return e.blockRendering.Types.isLeftRoundedCorner(t)&&n?n.notchOffset-this.constants_.CORNER_RADIUS:e.blockRendering.Types.isField(t)&&n&&e.blockRendering.Types.isField(n)&&t.isEditable==n.isEditable||n&&e.blockRendering.Types.isJaggedEdge(n)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},e.thrasos.RenderInfo.prototype.getSpacerRowHeight_=function(t,n){return e.blockRendering.Types.isTopRow(t)&&e.blockRendering.Types.isBottomRow(n)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:e.blockRendering.Types.isTopRow(t)||e.blockRendering.Types.isBottomRow(n)?this.constants_.NO_PADDING:t.hasExternalInput&&n.hasExternalInput?this.constants_.LARGE_PADDING:!t.hasStatement&&n.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:t.hasStatement&&n.hasStatement||t.hasDummyInput||n.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},e.thrasos.RenderInfo.prototype.getElemCenterline_=function(t,n){if(e.blockRendering.Types.isSpacer(n))return t.yPos+n.height/2;if(e.blockRendering.Types.isBottomRow(t))return t=t.yPos+t.height-t.descenderHeight,e.blockRendering.Types.isNextConnection(n)?t+n.height/2:t-n.height/2;if(e.blockRendering.Types.isTopRow(t))return e.blockRendering.Types.isHat(n)?t.capline-n.height/2:t.capline+n.height/2;var o=t.yPos;return e.blockRendering.Types.isField(n)&&t.hasStatement?o+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+n.height/2):o+t.height/2},e.thrasos.RenderInfo.prototype.finalize_=function(){for(var r,t=0,n=0,o=0;r=this.rows[o];o++){r.yPos=n,r.xPos=this.startX,n+=r.height,t=Math.max(t,r.widthWithConnectedBlocks);var p=n-this.topRow.ascenderHeight;r==this.bottomRow&&p<this.constants_.MIN_BLOCK_HEIGHT&&(this.bottomRow.height+=p=this.constants_.MIN_BLOCK_HEIGHT-p,n+=p),this.recordElemPositions_(r)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(t=Math.max(t,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.bottomRow.baseline=n-this.bottomRow.descenderHeight,this.widthWithChildren=t+this.startX,this.height=n,this.startY=this.topRow.capline},e.thrasos.Renderer=function(t){e.thrasos.Renderer.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.thrasos.Renderer,e.blockRendering.Renderer),e.thrasos.Renderer.prototype.makeRenderInfo_=function(t){return new e.thrasos.RenderInfo(this,t)},e.blockRendering.register("thrasos",e.thrasos.Renderer),e.zelos={},e.zelos.ConstantProvider=function(){e.zelos.ConstantProvider.superClass_.constructor.call(this),this.SMALL_PADDING=this.GRID_UNIT=4,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TAB_OFFSET_FROM_TOP=0,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!0,this.FIELD_COLOUR_DEFAULT_WIDTH=2*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=4*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter_=null,this.replacementGlowFilterId="",this.replacementGlowFilter_=null},e.utils.object.inherits(e.zelos.ConstantProvider,e.blockRendering.ConstantProvider),e.zelos.ConstantProvider.prototype.setFontConstants_=function(t){e.zelos.ConstantProvider.superClass_.setFontConstants_.call(this,t),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING},e.zelos.ConstantProvider.prototype.init=function(){e.zelos.ConstantProvider.superClass_.init.call(this),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth},e.zelos.ConstantProvider.prototype.setDynamicProperties_=function(t){e.zelos.ConstantProvider.superClass_.setDynamicProperties_.call(this,t),this.SELECTED_GLOW_COLOUR=t.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;var n=Number(t.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=n&&!isNaN(n)?n:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=t.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(t=Number(t.getComponentStyle("replacementGlowSize")))&&!isNaN(t)?t:this.REPLACEMENT_GLOW_SIZE},e.zelos.ConstantProvider.prototype.dispose=function(){e.zelos.ConstantProvider.superClass_.dispose.call(this),this.selectedGlowFilter_&&e.utils.dom.removeNode(this.selectedGlowFilter_),this.replacementGlowFilter_&&e.utils.dom.removeNode(this.replacementGlowFilter_)},e.zelos.ConstantProvider.prototype.makeStartHat=function(){var t=this.START_HAT_HEIGHT,n=this.START_HAT_WIDTH;return{height:t,width:n,path:e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(25,-t),e.utils.svgPaths.point(71,-t),e.utils.svgPaths.point(n,0)])}},e.zelos.ConstantProvider.prototype.makeHexagonal=function(){function t(o,r,p){var b=o/2;return e.utils.svgPaths.lineTo(-(p=p?-1:1)*(b=b>n?n:b),o=(r?-1:1)*o/2)+e.utils.svgPaths.lineTo(p*b,o)}var n=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width:function(o){return(o/=2)>n?n:o},height:function(o){return o},connectionOffsetY:function(o){return o/2},connectionOffsetX:function(o){return-o},pathDown:function(o){return t(o,!1,!1)},pathUp:function(o){return t(o,!0,!1)},pathRightDown:function(o){return t(o,!1,!0)},pathRightUp:function(o){return t(o,!1,!0)}}},e.zelos.ConstantProvider.prototype.makeRounded=function(){function t(r,p,b){var I=r>o?r-o:0;return e.utils.svgPaths.arc("a","0 0,1",r=(r>o?o:r)/2,e.utils.svgPaths.point((p?-1:1)*r,(p?-1:1)*r))+e.utils.svgPaths.lineOnAxis("v",(b?1:-1)*I)+e.utils.svgPaths.arc("a","0 0,1",r,e.utils.svgPaths.point((p?1:-1)*r,(p?-1:1)*r))}var n=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,o=2*n;return{type:this.SHAPES.ROUND,isDynamic:!0,width:function(r){return(r/=2)>n?n:r},height:function(r){return r},connectionOffsetY:function(r){return r/2},connectionOffsetX:function(r){return-r},pathDown:function(r){return t(r,!1,!1)},pathUp:function(r){return t(r,!0,!1)},pathRightDown:function(r){return t(r,!1,!0)},pathRightUp:function(r){return t(r,!1,!0)}}},e.zelos.ConstantProvider.prototype.makeSquared=function(){function t(o,r,p){return o-=2*n,e.utils.svgPaths.arc("a","0 0,1",n,e.utils.svgPaths.point((r?-1:1)*n,(r?-1:1)*n))+e.utils.svgPaths.lineOnAxis("v",(p?1:-1)*o)+e.utils.svgPaths.arc("a","0 0,1",n,e.utils.svgPaths.point((r?1:-1)*n,(r?-1:1)*n))}var n=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width:function(o){return n},height:function(o){return o},connectionOffsetY:function(o){return o/2},connectionOffsetX:function(o){return-o},pathDown:function(o){return t(o,!1,!1)},pathUp:function(o){return t(o,!0,!1)},pathRightDown:function(o){return t(o,!1,!0)},pathRightUp:function(o){return t(o,!1,!0)}}},e.zelos.ConstantProvider.prototype.shapeFor=function(t){var n=t.getCheck();switch(!n&&t.targetConnection&&(n=t.targetConnection.getCheck()),t.type){case e.connectionTypes.INPUT_VALUE:case e.connectionTypes.OUTPUT_VALUE:if(null!=(t=t.getSourceBlock().getOutputShape()))switch(t){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return n&&-1!=n.indexOf("Boolean")?this.HEXAGONAL:(n&&-1!=n.indexOf("Number")||n&&n.indexOf("String"),this.ROUNDED);case e.connectionTypes.PREVIOUS_STATEMENT:case e.connectionTypes.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}},e.zelos.ConstantProvider.prototype.makeNotch=function(){function t(Y){return e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(Y*p/2,0),e.utils.svgPaths.point(Y*p*3/4,I/2),e.utils.svgPaths.point(Y*p,I)])+e.utils.svgPaths.line([e.utils.svgPaths.point(Y*p,b)])+e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(Y*p/4,I/2),e.utils.svgPaths.point(Y*p/2,I),e.utils.svgPaths.point(Y*p,I)])+e.utils.svgPaths.lineOnAxis("h",Y*r)+e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(Y*p/2,0),e.utils.svgPaths.point(Y*p*3/4,-I/2),e.utils.svgPaths.point(Y*p,-I)])+e.utils.svgPaths.line([e.utils.svgPaths.point(Y*p,-b)])+e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(Y*p/4,-I/2),e.utils.svgPaths.point(Y*p/2,-I),e.utils.svgPaths.point(Y*p,-I)])}var n=this.NOTCH_WIDTH,o=this.NOTCH_HEIGHT,r=n/3,p=r/3,b=o/2,I=b/2,x=t(1),k=t(-1);return{type:this.SHAPES.NOTCH,width:n,height:o,pathLeft:x,pathRight:k}},e.zelos.ConstantProvider.prototype.makeInsideCorners=function(){var t=this.CORNER_RADIUS,n=e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(-t,t)),o=e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(-t,t));return{width:t,height:t,pathTop:n,pathBottom:e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(t,t)),rightWidth:t,rightHeight:t,pathTopRight:o,pathBottomRight:e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(t,t))}},e.zelos.ConstantProvider.prototype.generateSecondaryColour_=function(t){return e.utils.colour.blend("#000",t,.15)||t},e.zelos.ConstantProvider.prototype.generateTertiaryColour_=function(t){return e.utils.colour.blend("#000",t,.25)||t},e.zelos.ConstantProvider.prototype.createDom=function(t,n,o){e.zelos.ConstantProvider.superClass_.createDom.call(this,t,n,o),t=e.utils.dom.createSvgElement(e.utils.Svg.DEFS,{},t),n=e.utils.dom.createSvgElement(e.utils.Svg.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},t),e.utils.dom.createSvgElement(e.utils.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},n),o=e.utils.dom.createSvgElement(e.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},n),e.utils.dom.createSvgElement(e.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},o),e.utils.dom.createSvgElement(e.utils.Svg.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},n),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},n),this.selectedGlowFilterId=n.id,this.selectedGlowFilter_=n,t=e.utils.dom.createSvgElement(e.utils.Svg.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},t),e.utils.dom.createSvgElement(e.utils.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},t),n=e.utils.dom.createSvgElement(e.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},t),e.utils.dom.createSvgElement(e.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),e.utils.dom.createSvgElement(e.utils.Svg.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},t),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},t),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},t),this.replacementGlowFilterId=t.id,this.replacementGlowFilter_=t},e.zelos.ConstantProvider.prototype.getCSS_=function(t){return[t+" .blocklyText,",t+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",t+" .blocklyText {","fill: #fff;","}",t+" .blocklyNonEditableText>rect:not(.blocklyDropdownRect),",t+" .blocklyEditableText>rect:not(.blocklyDropdownRect) {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","}",t+" .blocklyNonEditableText>text,",t+" .blocklyEditableText>text,",t+" .blocklyNonEditableText>g>text,",t+" .blocklyEditableText>g>text {","fill: #575E75;","}",t+" .blocklyFlyoutLabelText {","fill: #575E75;","}",t+" .blocklyText.blocklyBubbleText {","fill: #575E75;","}",t+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>rect,",t+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",t+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","color: #575E75;","}",t+" .blocklyDropdownText {","fill: #fff !important;","}",t+".blocklyWidgetDiv .goog-menuitem,",t+".blocklyDropDownDiv .goog-menuitem {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","}",t+".blocklyDropDownDiv .goog-menuitem-content {","color: #fff;","}",t+" .blocklyHighlightedConnectionPath {","stroke: "+this.SELECTED_GLOW_COLOUR+";","}",t+" .blocklyDisabled > .blocklyOutlinePath {","fill: url(#blocklyDisabledPattern"+this.randomIdentifier+")","}",t+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]},e.zelos.TopRow=function(t){e.zelos.TopRow.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.zelos.TopRow,e.blockRendering.TopRow),e.zelos.TopRow.prototype.endsWithElemSpacer=function(){return!1},e.zelos.TopRow.prototype.hasLeftSquareCorner=function(t){return!!t.outputConnection||(t.hat?"cap"===t.hat:this.constants_.ADD_START_HATS)&&!t.outputConnection&&!t.previousConnection},e.zelos.TopRow.prototype.hasRightSquareCorner=function(t){return!!t.outputConnection&&!t.statementInputCount&&!t.nextConnection},e.zelos.BottomRow=function(t){e.zelos.BottomRow.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.zelos.BottomRow,e.blockRendering.BottomRow),e.zelos.BottomRow.prototype.endsWithElemSpacer=function(){return!1},e.zelos.BottomRow.prototype.hasLeftSquareCorner=function(t){return!!t.outputConnection},e.zelos.BottomRow.prototype.hasRightSquareCorner=function(t){return!!t.outputConnection&&!t.statementInputCount&&!t.nextConnection},e.zelos.RightConnectionShape=function(t){e.zelos.RightConnectionShape.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.getType("RIGHT_CONNECTION"),this.width=this.height=0},e.utils.object.inherits(e.zelos.RightConnectionShape,e.blockRendering.Measurable),e.zelos.RenderInfo=function(t,n){e.zelos.RenderInfo.superClass_.constructor.call(this,t,n),this.topRow=new e.zelos.TopRow(this.constants_),this.bottomRow=new e.zelos.BottomRow(this.constants_),this.isInline=!0,this.isMultiRow=!n.getInputsInline()||n.isCollapsed(),this.hasStatementInput=0<n.statementInputCount,this.rightSide=this.outputConnection?new e.zelos.RightConnectionShape(this.constants_):null},e.utils.object.inherits(e.zelos.RenderInfo,e.blockRendering.RenderInfo),e.zelos.RenderInfo.prototype.getRenderer=function(){return this.renderer_},e.zelos.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},e.zelos.RenderInfo.prototype.shouldStartNewRow_=function(t,n){return!!n&&(t.type==e.inputTypes.STATEMENT||n.type==e.inputTypes.STATEMENT||(t.type==e.inputTypes.VALUE||t.type==e.inputTypes.DUMMY)&&(!this.isInline||this.isMultiRow))},e.zelos.RenderInfo.prototype.getDesiredRowWidth_=function(t){return t.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):e.zelos.RenderInfo.superClass_.getDesiredRowWidth_.call(this,t)},e.zelos.RenderInfo.prototype.getInRowSpacing_=function(t,n){return t&&n||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!t&&n&&e.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:t&&e.blockRendering.Types.isLeftRoundedCorner(t)&&n&&(e.blockRendering.Types.isPreviousConnection(n)||e.blockRendering.Types.isNextConnection(n))?n.notchOffset-this.constants_.CORNER_RADIUS:t&&e.blockRendering.Types.isLeftSquareCorner(t)&&n&&e.blockRendering.Types.isHat(n)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING},e.zelos.RenderInfo.prototype.getSpacerRowHeight_=function(t,n){if(e.blockRendering.Types.isTopRow(t)&&e.blockRendering.Types.isBottomRow(n))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;var o=e.blockRendering.Types.isInputRow(t)&&t.hasStatement,r=e.blockRendering.Types.isInputRow(n)&&n.hasStatement;return r||o?(t=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),r&&o?Math.max(t,this.constants_.DUMMY_INPUT_MIN_HEIGHT):t):e.blockRendering.Types.isTopRow(t)?t.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):e.blockRendering.Types.isBottomRow(n)?this.outputConnection?!n.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},e.zelos.RenderInfo.prototype.getSpacerRowWidth_=function(t,n){var o=this.width-this.startX;return e.blockRendering.Types.isInputRow(t)&&t.hasStatement||e.blockRendering.Types.isInputRow(n)&&n.hasStatement?Math.max(o,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):o},e.zelos.RenderInfo.prototype.getElemCenterline_=function(t,n){if(t.hasStatement&&!e.blockRendering.Types.isSpacer(n)&&!e.blockRendering.Types.isStatementInput(n))return t.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(e.blockRendering.Types.isInlineInput(n)){var o=n.connectedBlock;if(o&&o.outputConnection&&o.nextConnection)return t.yPos+o.height/2}return e.zelos.RenderInfo.superClass_.getElemCenterline_.call(this,t,n)},e.zelos.RenderInfo.prototype.addInput_=function(t,n){t.type==e.inputTypes.DUMMY&&n.hasDummyInput&&n.align==e.constants.ALIGN.LEFT&&t.align==e.constants.ALIGN.RIGHT&&(n.rightAlignedDummyInput=t),e.zelos.RenderInfo.superClass_.addInput_.call(this,t,n)},e.zelos.RenderInfo.prototype.addAlignmentPadding_=function(t,n){if(t.rightAlignedDummyInput){for(var o,p,r=0;(p=t.elements[r])&&(e.blockRendering.Types.isSpacer(p)&&(o=p),!e.blockRendering.Types.isField(p)||p.parentInput!=t.rightAlignedDummyInput);r++);if(o)return o.width+=n,void(t.width+=n)}e.zelos.RenderInfo.superClass_.addAlignmentPadding_.call(this,t,n)},e.zelos.RenderInfo.prototype.adjustXPosition_=function(){for(var t=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH,n=t,o=2;o<this.rows.length-1;o+=2){var r=this.rows[o-1],p=this.rows[o],b=this.rows[o+1];if(r=2==o?!!this.topRow.hasPreviousConnection:!!r.followsStatement,b=o+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!b.precedesStatement,e.blockRendering.Types.isInputRow(p)&&p.hasStatement)p.measure(),n=p.width-p.getLastInput().width+t;else if(r&&(2==o||b)&&e.blockRendering.Types.isInputRow(p)&&!p.hasStatement){b=p.xPos,r=null;for(var x,I=0;x=p.elements[I];I++)e.blockRendering.Types.isSpacer(x)&&(r=x),!(r&&(e.blockRendering.Types.isField(x)||e.blockRendering.Types.isInput(x))&&b<n)||e.blockRendering.Types.isField(x)&&(x.field instanceof e.FieldLabel||x.field instanceof e.FieldImage)||(r.width+=n-b),b+=x.width}}},e.zelos.RenderInfo.prototype.finalizeOutputConnection_=function(){if(this.outputConnection&&this.outputConnection.isDynamicShape){for(var o,t=0,n=0;o=this.rows[n];n++)o.yPos=t,t+=o.height;this.height=t,t=this.outputConnection.shape.height(n=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height),n=this.outputConnection.shape.width(n),this.outputConnection.height=t,this.outputConnection.width=n,this.outputConnection.startX=n,this.outputConnection.connectionOffsetY=this.outputConnection.shape.connectionOffsetY(t),this.outputConnection.connectionOffsetX=this.outputConnection.shape.connectionOffsetX(n),o=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(o=n,this.rightSide.height=t,this.rightSide.width=o,this.rightSide.centerline=t/2,this.rightSide.xPos=this.width+o),this.startX=n,this.width+=n+o,this.widthWithChildren+=n+o}},e.zelos.RenderInfo.prototype.finalizeHorizontalAlignment_=function(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var o,t=0,n=0;o=this.rows[n];n++)if(e.blockRendering.Types.isInputRow(o)){t=o.elements[o.elements.length-2];var r=this.getNegativeSpacing_(o.elements[1]),p=this.getNegativeSpacing_(t),b=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-(t=r+p)<b&&(r=(t=this.width-b)/2,p=t/2),o.elements.unshift(new e.blockRendering.InRowSpacer(this.constants_,-r)),o.elements.push(new e.blockRendering.InRowSpacer(this.constants_,-p))}if(t)for(this.width-=t,this.widthWithChildren-=t,this.rightSide.xPos-=t,n=0;o=this.rows[n];n++)e.blockRendering.Types.isTopOrBottomRow(o)&&(o.elements[1].width-=t,o.elements[1].widthWithConnectedBlocks-=t),o.width-=t,o.widthWithConnectedBlocks-=t}},e.zelos.RenderInfo.prototype.getNegativeSpacing_=function(t){if(!t)return 0;var n=this.outputConnection.width,o=this.outputConnection.shape.type,r=this.constants_;if(this.isMultiRow&&1<this.inputRows.length)switch(o){case r.SHAPES.ROUND:return n-(o=this.height/2>(o=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH)?o:this.height/2)*(1-Math.sin(Math.acos((o-this.constants_.SMALL_PADDING)/o)));default:return 0}if(e.blockRendering.Types.isInlineInput(t)){var p=t.connectedBlock;return t=p?p.pathObject.outputShapeType:t.shape.type,p&&p.outputConnection&&(p.statementInputCount||p.nextConnection)||o==r.SHAPES.HEXAGONAL&&o!=t?0:n-this.constants_.SHAPE_IN_SHAPE_PADDING[o][t]}return e.blockRendering.Types.isField(t)?o==r.SHAPES.ROUND&&t.field instanceof e.FieldTextInput?n-2.75*r.GRID_UNIT:n-this.constants_.SHAPE_IN_SHAPE_PADDING[o][0]:e.blockRendering.Types.isIcon(t)?this.constants_.SMALL_PADDING:0},e.zelos.RenderInfo.prototype.finalizeVerticalAlignment_=function(){if(!this.outputConnection)for(var t=2;t<this.rows.length-1;t+=2){var n=this.rows[t-1],o=this.rows[t],r=this.rows[t+1],p=2==t,b=t+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!r.precedesStatement;if(p?this.topRow.hasPreviousConnection:n.followsStatement){var I=3==o.elements.length&&(o.elements[1].field instanceof e.FieldLabel||o.elements[1].field instanceof e.FieldImage);if(!p&&I)n.height-=this.constants_.SMALL_PADDING,r.height-=this.constants_.SMALL_PADDING,o.height-=this.constants_.MEDIUM_PADDING;else if(p||b){if(b){for(p=!1,b=0;I=o.elements[b];b++)if(e.blockRendering.Types.isInlineInput(I)&&I.connectedBlock&&!I.connectedBlock.isShadow()&&40<=I.connectedBlock.getHeightWidth().height){p=!0;break}p&&(n.height-=this.constants_.SMALL_PADDING,r.height-=this.constants_.SMALL_PADDING)}}else n.height+=this.constants_.SMALL_PADDING}}},e.zelos.RenderInfo.prototype.finalize_=function(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),e.zelos.RenderInfo.superClass_.finalize_.call(this),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)},e.zelos.Drawer=function(t,n){e.zelos.Drawer.superClass_.constructor.call(this,t,n)},e.utils.object.inherits(e.zelos.Drawer,e.blockRendering.Drawer),e.zelos.Drawer.prototype.draw=function(){var t=this.block_.pathObject;t.beginDrawing(),this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),t.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&t.flipRTL(),e.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_(),this.info_.outputConnection&&(t.outputShapeType=this.info_.outputConnection.shape.type),t.endDrawing()},e.zelos.Drawer.prototype.drawOutline_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):e.zelos.Drawer.superClass_.drawOutline_.call(this)},e.zelos.Drawer.prototype.drawLeft_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():e.zelos.Drawer.superClass_.drawLeft_.call(this)},e.zelos.Drawer.prototype.drawRightSideRow_=function(t){if(!(0>=t.height))if(t.precedesStatement||t.followsStatement){var n=this.constants_.INSIDE_CORNERS.rightHeight;this.outlinePath_+=(t.followsStatement?this.constants_.INSIDE_CORNERS.pathBottomRight:"")+(0<(n=t.height-(t.precedesStatement?n:0))?e.utils.svgPaths.lineOnAxis("V",t.yPos+n):"")+(t.precedesStatement?this.constants_.INSIDE_CORNERS.pathTopRight:"")}else this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",t.yPos+t.height)},e.zelos.Drawer.prototype.drawRightDynamicConnection_=function(){this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)},e.zelos.Drawer.prototype.drawLeftDynamicConnection_=function(){this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"},e.zelos.Drawer.prototype.drawFlatTop_=function(){var t=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=e.utils.svgPaths.moveBy(t.xPos,this.info_.startY),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("h",t.width)},e.zelos.Drawer.prototype.drawFlatBottom_=function(){var t=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",t.baseline),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("h",-t.width)},e.zelos.Drawer.prototype.drawInlineInput_=function(t){this.positionInlineInputConnection_(t);var n=t.input.name;if(!t.connectedBlock&&!this.info_.isInsertionMarker){var o=t.width-2*t.connectionWidth;t=e.utils.svgPaths.moveTo(t.xPos+t.connectionWidth,t.centerline-t.height/2)+e.utils.svgPaths.lineOnAxis("h",o)+t.shape.pathRightDown(t.height)+e.utils.svgPaths.lineOnAxis("h",-o)+t.shape.pathUp(t.height)+"z",this.block_.pathObject.setOutlinePath(n,t)}},e.zelos.Drawer.prototype.drawStatementInput_=function(t){var n=t.getLastInput(),o=n.xPos+n.notchOffset+n.shape.width,r=n.shape.pathRight+e.utils.svgPaths.lineOnAxis("h",-(n.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop,p=t.height-2*this.constants_.INSIDE_CORNERS.height;n=this.constants_.INSIDE_CORNERS.pathBottom+e.utils.svgPaths.lineOnAxis("h",n.notchOffset-this.constants_.INSIDE_CORNERS.width)+(n.connectedBottomNextConnection?"":n.shape.pathLeft),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("H",o)+r+e.utils.svgPaths.lineOnAxis("v",p)+n+e.utils.svgPaths.lineOnAxis("H",t.xPos+t.width),this.positionStatementInputConnection_(t)},e.zelos.MarkerSvg=function(t,n,o){e.zelos.MarkerSvg.superClass_.constructor.call(this,t,n,o)},e.utils.object.inherits(e.zelos.MarkerSvg,e.blockRendering.MarkerSvg),e.zelos.MarkerSvg.prototype.showWithInputOutput_=function(t){var n=t.getSourceBlock();t=t.getLocation().getOffsetInBlock(),this.positionCircle_(t.x,t.y),this.setParent_(n),this.showCurrent_()},e.zelos.MarkerSvg.prototype.showWithOutput_=function(t){this.showWithInputOutput_(t)},e.zelos.MarkerSvg.prototype.showWithInput_=function(t){this.showWithInputOutput_(t)},e.zelos.MarkerSvg.prototype.showWithBlock_=function(t){var n=(t=t.getLocation()).getHeightWidth();this.positionRect_(0,0,n.width,n.height),this.setParent_(t),this.showCurrent_()},e.zelos.MarkerSvg.prototype.positionCircle_=function(t,n){this.markerCircle_.setAttribute("cx",t),this.markerCircle_.setAttribute("cy",n),this.currentMarkerSvg=this.markerCircle_},e.zelos.MarkerSvg.prototype.hide=function(){e.zelos.MarkerSvg.superClass_.hide.call(this),this.markerCircle_.style.display="none"},e.zelos.MarkerSvg.prototype.createDomInternal_=function(){if(e.zelos.MarkerSvg.superClass_.createDomInternal_.call(this),this.markerCircle_=e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{r:this.constants_.CURSOR_RADIUS,style:"display: none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var t=this.getBlinkProperties_();e.utils.dom.createSvgElement(e.utils.Svg.ANIMATE,t,this.markerCircle_)}return this.markerSvg_},e.zelos.MarkerSvg.prototype.applyColour_=function(t){e.zelos.MarkerSvg.superClass_.applyColour_.call(this,t),this.markerCircle_.setAttribute("fill",this.colour_),this.markerCircle_.setAttribute("stroke",this.colour_),this.isCursor()&&this.markerCircle_.firstChild.setAttribute("values",this.colour_+";transparent;transparent;")},e.zelos.PathObject=function(t,n,o){e.zelos.PathObject.superClass_.constructor.call(this,t,n,o),this.constants=o,this.svgPathSelected_=null,this.outlines_=Object.create(null),this.outputShapeType=this.remainingOutlines_=null},e.utils.object.inherits(e.zelos.PathObject,e.blockRendering.PathObject),e.zelos.PathObject.prototype.setPath=function(t){e.zelos.PathObject.superClass_.setPath.call(this,t),this.svgPathSelected_&&this.svgPathSelected_.setAttribute("d",t)},e.zelos.PathObject.prototype.applyColour=function(t){for(var n in e.zelos.PathObject.superClass_.applyColour.call(this,t),t.isShadow()&&t.getParent()&&this.svgPath.setAttribute("stroke",t.getParent().style.colourTertiary),this.outlines_)this.outlines_[n].setAttribute("fill",this.style.colourTertiary)},e.zelos.PathObject.prototype.flipRTL=function(){for(var t in e.zelos.PathObject.superClass_.flipRTL.call(this),this.outlines_)this.outlines_[t].setAttribute("transform","scale(-1 1)")},e.zelos.PathObject.prototype.updateSelected=function(t){this.setClass_("blocklySelected",t),t?this.svgPathSelected_||(this.svgPathSelected_=this.svgPath.cloneNode(!0),this.svgPathSelected_.setAttribute("fill","none"),this.svgPathSelected_.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected_)):this.svgPathSelected_&&(this.svgRoot.removeChild(this.svgPathSelected_),this.svgPathSelected_=null)},e.zelos.PathObject.prototype.updateReplacementFade=function(t){this.setClass_("blocklyReplaceable",t),t?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")},e.zelos.PathObject.prototype.updateShapeForInputHighlight=function(t,n){t=t.getParentInput().name,(t=this.getOutlinePath_(t))&&(n?t.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):t.removeAttribute("filter"))},e.zelos.PathObject.prototype.beginDrawing=function(){for(var t in this.remainingOutlines_=Object.create(null),this.outlines_)this.remainingOutlines_[t]=1},e.zelos.PathObject.prototype.endDrawing=function(){if(this.remainingOutlines_)for(var t in this.remainingOutlines_)this.removeOutlinePath_(t);this.remainingOutlines_=null},e.zelos.PathObject.prototype.setOutlinePath=function(t,n){(t=this.getOutlinePath_(t)).setAttribute("d",n),t.setAttribute("fill",this.style.colourTertiary)},e.zelos.PathObject.prototype.getOutlinePath_=function(t){return this.outlines_[t]||(this.outlines_[t]=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines_&&delete this.remainingOutlines_[t],this.outlines_[t]},e.zelos.PathObject.prototype.removeOutlinePath_=function(t){this.outlines_[t].parentNode.removeChild(this.outlines_[t]),delete this.outlines_[t]},e.zelos.Renderer=function(t){e.zelos.Renderer.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.zelos.Renderer,e.blockRendering.Renderer),e.zelos.Renderer.prototype.makeConstants_=function(){return new e.zelos.ConstantProvider},e.zelos.Renderer.prototype.makeRenderInfo_=function(t){return new e.zelos.RenderInfo(this,t)},e.zelos.Renderer.prototype.makeDrawer_=function(t,n){return new e.zelos.Drawer(t,n)},e.zelos.Renderer.prototype.makeMarkerDrawer=function(t,n){return new e.zelos.MarkerSvg(t,this.getConstants(),n)},e.zelos.Renderer.prototype.makePathObject=function(t,n){return new e.zelos.PathObject(t,n,this.getConstants())},e.zelos.Renderer.prototype.shouldHighlightConnection=function(t){return t.type!=e.connectionTypes.INPUT_VALUE&&t.type!==e.connectionTypes.OUTPUT_VALUE},e.zelos.Renderer.prototype.getConnectionPreviewMethod=function(t,n,o){return n.type==e.connectionTypes.OUTPUT_VALUE?t.isConnected()?e.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:e.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:e.zelos.Renderer.superClass_.getConnectionPreviewMethod(t,n,o)},e.blockRendering.register("zelos",e.zelos.Renderer),e.Themes.Dark=e.Theme.defineTheme("dark",{base:e.Themes.Classic,componentStyles:{workspaceBackgroundColour:"#1e1e1e",toolboxBackgroundColour:"blackBackground",toolboxForegroundColour:"#fff",flyoutBackgroundColour:"#252526",flyoutForegroundColour:"#ccc",flyoutOpacity:1,scrollbarColour:"#797979",insertionMarkerColour:"#fff",insertionMarkerOpacity:.3,scrollbarOpacity:.4,cursorColour:"#d0d0d0",blackBackground:"#333"}}),e.Themes.Deuteranopia={},e.Themes.Deuteranopia.defaultBlockStyles={colour_blocks:{colourPrimary:"#f2a72c",colourSecondary:"#f1c172",colourTertiary:"#da921c"},list_blocks:{colourPrimary:"#7d65ab",colourSecondary:"#a88be0",colourTertiary:"#66518e"},logic_blocks:{colourPrimary:"#9fd2f1",colourSecondary:"#c0e0f4",colourTertiary:"#74bae5"},loop_blocks:{colourPrimary:"#795a07",colourSecondary:"#ac8726",colourTertiary:"#c4a03f"},math_blocks:{colourPrimary:"#e6da39",colourSecondary:"#f3ec8e",colourTertiary:"#f2eeb7"},procedure_blocks:{colourPrimary:"#590721",colourSecondary:"#8c475d",colourTertiary:"#885464"},text_blocks:{colourPrimary:"#058863",colourSecondary:"#5ecfaf",colourTertiary:"#04684c"},variable_blocks:{colourPrimary:"#47025a",colourSecondary:"#820fa1",colourTertiary:"#8e579d"},variable_dynamic_blocks:{colourPrimary:"#47025a",colourSecondary:"#820fa1",colourTertiary:"#8e579d"}},e.Themes.Deuteranopia.categoryStyles={colour_category:{colour:"#f2a72c"},list_category:{colour:"#7d65ab"},logic_category:{colour:"#9fd2f1"},loop_category:{colour:"#795a07"},math_category:{colour:"#e6da39"},procedure_category:{colour:"#590721"},text_category:{colour:"#058863"},variable_category:{colour:"#47025a"},variable_dynamic_category:{colour:"#47025a"}},e.Themes.Deuteranopia=new e.Theme("deuteranopia",e.Themes.Deuteranopia.defaultBlockStyles,e.Themes.Deuteranopia.categoryStyles),e.Themes.HighContrast={},e.Themes.HighContrast.defaultBlockStyles={colour_blocks:{colourPrimary:"#a52714",colourSecondary:"#FB9B8C",colourTertiary:"#FBE1DD"},list_blocks:{colourPrimary:"#4a148c",colourSecondary:"#AD7BE9",colourTertiary:"#CDB6E9"},logic_blocks:{colourPrimary:"#01579b",colourSecondary:"#64C7FF",colourTertiary:"#C5EAFF"},loop_blocks:{colourPrimary:"#33691e",colourSecondary:"#9AFF78",colourTertiary:"#E1FFD7"},math_blocks:{colourPrimary:"#1a237e",colourSecondary:"#8A9EFF",colourTertiary:"#DCE2FF"},procedure_blocks:{colourPrimary:"#006064",colourSecondary:"#77E6EE",colourTertiary:"#CFECEE"},text_blocks:{colourPrimary:"#004d40",colourSecondary:"#5ae27c",colourTertiary:"#D2FFDD"},variable_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},variable_dynamic_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},hat_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB",hat:"cap"}},e.Themes.HighContrast.categoryStyles={colour_category:{colour:"#a52714"},list_category:{colour:"#4a148c"},logic_category:{colour:"#01579b"},loop_category:{colour:"#33691e"},math_category:{colour:"#1a237e"},procedure_category:{colour:"#006064"},text_category:{colour:"#004d40"},variable_category:{colour:"#880e4f"},variable_dynamic_category:{colour:"#880e4f"}},e.Themes.HighContrast=new e.Theme("highcontrast",e.Themes.HighContrast.defaultBlockStyles,e.Themes.HighContrast.categoryStyles),e.Themes.HighContrast.setComponentStyle("selectedGlowColour","#000000"),e.Themes.HighContrast.setComponentStyle("selectedGlowSize",1),e.Themes.HighContrast.setComponentStyle("replacementGlowColour","#000000"),e.Themes.HighContrast.setFontStyle({family:null,weight:null,size:16}),e.Themes.Tritanopia={},e.Themes.Tritanopia.defaultBlockStyles={colour_blocks:{colourPrimary:"#05427f",colourSecondary:"#2974c0",colourTertiary:"#2d74bb"},list_blocks:{colourPrimary:"#b69ce8",colourSecondary:"#ccbaef",colourTertiary:"#9176c5"},logic_blocks:{colourPrimary:"#9fd2f1",colourSecondary:"#c0e0f4",colourTertiary:"#74bae5"},loop_blocks:{colourPrimary:"#aa1846",colourSecondary:"#d36185",colourTertiary:"#7c1636"},math_blocks:{colourPrimary:"#e6da39",colourSecondary:"#f3ec8e",colourTertiary:"#f2eeb7"},procedure_blocks:{colourPrimary:"#590721",colourSecondary:"#8c475d",colourTertiary:"#885464"},text_blocks:{colourPrimary:"#058863",colourSecondary:"#5ecfaf",colourTertiary:"#04684c"},variable_blocks:{colourPrimary:"#4b2d84",colourSecondary:"#816ea7",colourTertiary:"#83759e"},variable_dynamic_blocks:{colourPrimary:"#4b2d84",colourSecondary:"#816ea7",colourTertiary:"#83759e"}},e.Themes.Tritanopia.categoryStyles={colour_category:{colour:"#05427f"},list_category:{colour:"#b69ce8"},logic_category:{colour:"#9fd2f1"},loop_category:{colour:"#aa1846"},math_category:{colour:"#e6da39"},procedure_category:{colour:"#590721"},text_category:{colour:"#058863"},variable_category:{colour:"#4b2d84"},variable_dynamic_category:{colour:"#4b2d84"}},e.Themes.Tritanopia=new e.Theme("tritanopia",e.Themes.Tritanopia.defaultBlockStyles,e.Themes.Tritanopia.categoryStyles),e.requires={},e})?v.apply(U,[]):v)&&(B.exports=a)},89361:function(B,U,v){var T,a,e;a=[v(63313)],void 0!==(e="function"==typeof(T=function(t){"use strict";return t.Blocks={},t.Blocks})?T.apply(U,a):T)&&(B.exports=e)},63313:function(B,U,v){var T,a,e;a=[v(40923)],void 0!==(e="function"==typeof(T=function(t){"use strict";return t.Blocks.colour={},t.Constants={},t.Constants.Colour={},t.Constants.Colour.HUE=20,t.defineBlocksWithJsonArray([{type:"colour_picker",message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"colour_random",message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"},{type:"colour_rgb",message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"RIGHT"},{type:"input_value",name:"GREEN",check:"Number",align:"RIGHT"},{type:"input_value",name:"BLUE",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"},{type:"colour_blend",message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"RIGHT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"RIGHT"},{type:"input_value",name:"RATIO",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"}]),t.Constants.Lists={},t.Constants.Lists.HUE=260,t.defineBlocksWithJsonArray([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),t.Blocks.lists_create_with={init:function(){this.setHelpUrl(t.Msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new t.Mutator(["lists_create_with_item"])),this.setTooltip(t.Msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("items",this.itemCount_),n},domToMutation:function(n){this.itemCount_=parseInt(n.getAttribute("items"),10),this.updateShape_()},decompose:function(n){var o=n.newBlock("lists_create_with_container");o.initSvg();for(var r=o.getInput("STACK").connection,p=0;p<this.itemCount_;p++){var b=n.newBlock("lists_create_with_item");b.initSvg(),r.connect(b.previousConnection),r=b.nextConnection}return o},compose:function(n){var o=n.getInputTargetBlock("STACK");for(n=[];o&&!o.isInsertionMarker();)n.push(o.valueConnection_),o=o.nextConnection&&o.nextConnection.targetBlock();for(o=0;o<this.itemCount_;o++){var r=this.getInput("ADD"+o).connection.targetConnection;r&&-1==n.indexOf(r)&&r.disconnect()}for(this.itemCount_=n.length,this.updateShape_(),o=0;o<this.itemCount_;o++)t.Mutator.reconnect(n[o],this,"ADD"+o)},saveConnections:function(n){n=n.getInputTargetBlock("STACK");for(var o=0;n;){var r=this.getInput("ADD"+o);n.valueConnection_=r&&r.connection.targetConnection,o++,n=n.nextConnection&&n.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(t.Msg.LISTS_CREATE_EMPTY_TITLE);for(var n=0;n<this.itemCount_;n++)if(!this.getInput("ADD"+n)){var o=this.appendValueInput("ADD"+n).setAlign(t.ALIGN_RIGHT);0==n&&o.appendField(t.Msg.LISTS_CREATE_WITH_INPUT_WITH)}for(;this.getInput("ADD"+n);)this.removeInput("ADD"+n),n++}},t.Blocks.lists_create_with_container={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(t.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(t.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}},t.Blocks.lists_create_with_item={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(t.Msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(t.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}},t.Blocks.lists_indexOf={init:function(){var n=[[t.Msg.LISTS_INDEX_OF_FIRST,"FIRST"],[t.Msg.LISTS_INDEX_OF_LAST,"LAST"]];this.setHelpUrl(t.Msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(t.Msg.LISTS_INDEX_OF_INPUT_IN_LIST),this.appendValueInput("FIND").appendField(new t.FieldDropdown(n),"END"),this.setInputsInline(!0);var o=this;this.setTooltip(function(){return t.Msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",o.workspace.options.oneBasedIndex?"0":"-1")})}},t.Blocks.lists_getIndex={init:function(){var n=[[t.Msg.LISTS_GET_INDEX_GET,"GET"],[t.Msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[t.Msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[t.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[t.Msg.LISTS_GET_INDEX_LAST,"LAST"],[t.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(t.Msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),n=new t.FieldDropdown(n,function(r){r="REMOVE"==r,this.getSourceBlock().updateStatement_(r)}),this.appendValueInput("VALUE").setCheck("Array").appendField(t.Msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(n,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),t.Msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(t.Msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0);var o=this;this.setTooltip(function(){var r=o.getFieldValue("MODE"),p=o.getFieldValue("WHERE"),b="";switch(r+" "+p){case"GET FROM_START":case"GET FROM_END":b=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":b=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":b=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":b=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":b=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":b=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":b=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":b=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":b=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":b=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":b=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":b=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return("FROM_START"==p||"FROM_END"==p)&&(b+="  "+("FROM_START"==p?t.Msg.LISTS_INDEX_FROM_START_TOOLTIP:t.Msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",o.workspace.options.oneBasedIndex?"#1":"#0")),b})},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");n.setAttribute("statement",!this.outputConnection);var o=this.getInput("AT").type==t.INPUT_VALUE;return n.setAttribute("at",o),n},domToMutation:function(n){var o="true"==n.getAttribute("statement");this.updateStatement_(o),n="false"!=n.getAttribute("at"),this.updateAt_(n)},updateStatement_:function(n){n!=!this.outputConnection&&(this.unplug(!0,!0),n?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(n){this.removeInput("AT"),this.removeInput("ORDINAL",!0),n?(this.appendValueInput("AT").setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var o=new t.FieldDropdown(this.WHERE_OPTIONS,function(r){var p="FROM_START"==r||"FROM_END"==r;if(p!=n){var b=this.getSourceBlock();return b.updateAt_(p),b.setFieldValue(r,"WHERE"),null}});this.getInput("AT").appendField(o,"WHERE"),t.Msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}},t.Blocks.lists_setIndex={init:function(){var n=[[t.Msg.LISTS_SET_INDEX_SET,"SET"],[t.Msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[t.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[t.Msg.LISTS_GET_INDEX_LAST,"LAST"],[t.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(t.Msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(t.Msg.LISTS_SET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(new t.FieldDropdown(n),"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(t.Msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(t.Msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0);var o=this;this.setTooltip(function(){var r=o.getFieldValue("MODE"),p=o.getFieldValue("WHERE"),b="";switch(r+" "+p){case"SET FROM_START":case"SET FROM_END":b=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":b=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":b=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":b=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":b=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":b=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":b=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":b=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return("FROM_START"==p||"FROM_END"==p)&&(b+="  "+t.Msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",o.workspace.options.oneBasedIndex?"#1":"#0")),b})},mutationToDom:function(){var n=t.utils.xml.createElement("mutation"),o=this.getInput("AT").type==t.INPUT_VALUE;return n.setAttribute("at",o),n},domToMutation:function(n){n="false"!=n.getAttribute("at"),this.updateAt_(n)},updateAt_:function(n){this.removeInput("AT"),this.removeInput("ORDINAL",!0),n?(this.appendValueInput("AT").setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var o=new t.FieldDropdown(this.WHERE_OPTIONS,function(r){var p="FROM_START"==r||"FROM_END"==r;if(p!=n){var b=this.getSourceBlock();return b.updateAt_(p),b.setFieldValue(r,"WHERE"),null}});this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO"),this.getInput("AT").appendField(o,"WHERE")}},t.Blocks.lists_getSublist={init:function(){this.WHERE_OPTIONS_1=[[t.Msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[t.Msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(t.Msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(t.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),t.Msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(t.Msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(t.Msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){var n=t.utils.xml.createElement("mutation"),o=this.getInput("AT1").type==t.INPUT_VALUE;return n.setAttribute("at1",o),o=this.getInput("AT2").type==t.INPUT_VALUE,n.setAttribute("at2",o),n},domToMutation:function(n){var o="true"==n.getAttribute("at1");n="true"==n.getAttribute("at2"),this.updateAt_(1,o),this.updateAt_(2,n)},updateAt_:function(n,o){this.removeInput("AT"+n),this.removeInput("ORDINAL"+n,!0),o?(this.appendValueInput("AT"+n).setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+n).appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+n);var r=new t.FieldDropdown(this["WHERE_OPTIONS_"+n],function(p){var b="FROM_START"==p||"FROM_END"==p;if(b!=o){var I=this.getSourceBlock();return I.updateAt_(n,b),I.setFieldValue(p,"WHERE"+n),null}});this.getInput("AT"+n).appendField(r,"WHERE"+n),1==n&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2")),t.Msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}},t.Blocks.lists_sort={init:function(){this.jsonInit({message0:t.Msg.LISTS_SORT_TITLE,args0:[{type:"field_dropdown",name:"TYPE",options:[[t.Msg.LISTS_SORT_TYPE_NUMERIC,"NUMERIC"],[t.Msg.LISTS_SORT_TYPE_TEXT,"TEXT"],[t.Msg.LISTS_SORT_TYPE_IGNORECASE,"IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[[t.Msg.LISTS_SORT_ORDER_ASCENDING,"1"],[t.Msg.LISTS_SORT_ORDER_DESCENDING,"-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:t.Msg.LISTS_SORT_TOOLTIP,helpUrl:t.Msg.LISTS_SORT_HELPURL})}},t.Blocks.lists_split={init:function(){var n=this,o=new t.FieldDropdown([[t.Msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[t.Msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]],function(r){n.updateType_(r)});this.setHelpUrl(t.Msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(o,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(t.Msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(function(){var r=n.getFieldValue("MODE");if("SPLIT"==r)return t.Msg.LISTS_SPLIT_TOOLTIP_SPLIT;if("JOIN"==r)return t.Msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+r)})},updateType_:function(n){if(this.getFieldValue("MODE")!=n){var o=this.getInput("INPUT").connection;o.setShadowDom(null);var r=o.targetBlock();r&&(o.disconnect(),r.isShadow()?r.dispose():this.bumpNeighbours())}"SPLIT"==n?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("mode",this.getFieldValue("MODE")),n},domToMutation:function(n){this.updateType_(n.getAttribute("mode"))}},t.Blocks.logic={},t.Constants.Logic={},t.Constants.Logic.HUE=210,t.defineBlocksWithJsonArray([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["\u2260","NEQ"],["\u200f<","LT"],["\u200f\u2264","LTE"],["\u200f>","GT"],["\u200f\u2265","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]}]),t.defineBlocksWithJsonArray([{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]),t.Constants.Logic.TOOLTIPS_BY_OP={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"},t.Extensions.register("logic_op_tooltip",t.Extensions.buildTooltipForDropdown("OP",t.Constants.Logic.TOOLTIPS_BY_OP)),t.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN={elseifCount_:0,elseCount_:0,suppressPrefixSuffix:!0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;var n=t.utils.xml.createElement("mutation");return this.elseifCount_&&n.setAttribute("elseif",this.elseifCount_),this.elseCount_&&n.setAttribute("else",1),n},domToMutation:function(n){this.elseifCount_=parseInt(n.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(n.getAttribute("else"),10)||0,this.rebuildShape_()},decompose:function(n){var o=n.newBlock("controls_if_if");o.initSvg();for(var r=o.nextConnection,p=1;p<=this.elseifCount_;p++){var b=n.newBlock("controls_if_elseif");b.initSvg(),r.connect(b.previousConnection),r=b.nextConnection}return this.elseCount_&&((n=n.newBlock("controls_if_else")).initSvg(),r.connect(n.previousConnection)),o},compose:function(n){n=n.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;for(var o=[null],r=[null],p=null;n&&!n.isInsertionMarker();){switch(n.type){case"controls_if_elseif":this.elseifCount_++,o.push(n.valueConnection_),r.push(n.statementConnection_);break;case"controls_if_else":this.elseCount_++,p=n.statementConnection_;break;default:throw TypeError("Unknown block type: "+n.type)}n=n.nextConnection&&n.nextConnection.targetBlock()}this.updateShape_(),this.reconnectChildBlocks_(o,r,p)},saveConnections:function(n){n=n.nextConnection.targetBlock();for(var o=1;n;){switch(n.type){case"controls_if_elseif":var r=this.getInput("IF"+o),p=this.getInput("DO"+o);n.valueConnection_=r&&r.connection.targetConnection,n.statementConnection_=p&&p.connection.targetConnection,o++;break;case"controls_if_else":p=this.getInput("ELSE"),n.statementConnection_=p&&p.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+n.type)}n=n.nextConnection&&n.nextConnection.targetBlock()}},rebuildShape_:function(){var n=[null],o=[null],r=null;this.getInput("ELSE")&&(r=this.getInput("ELSE").connection.targetConnection);for(var p=1;this.getInput("IF"+p);){var b=this.getInput("IF"+p),I=this.getInput("DO"+p);n.push(b.connection.targetConnection),o.push(I.connection.targetConnection),p++}this.updateShape_(),this.reconnectChildBlocks_(n,o,r)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var n=1;this.getInput("IF"+n);)this.removeInput("IF"+n),this.removeInput("DO"+n),n++;for(n=1;n<=this.elseifCount_;n++)this.appendValueInput("IF"+n).setCheck("Boolean").appendField(t.Msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+n).appendField(t.Msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(t.Msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(n,o,r){for(var p=1;p<=this.elseifCount_;p++)t.Mutator.reconnect(n[p],this,"IF"+p),t.Mutator.reconnect(o[p],this,"DO"+p);t.Mutator.reconnect(r,this,"ELSE")}},t.Extensions.registerMutator("controls_if_mutator",t.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN,null,["controls_if_elseif","controls_if_else"]),t.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION=function(){this.setTooltip(function(){return this.elseifCount_||this.elseCount_?!this.elseifCount_&&this.elseCount_?t.Msg.CONTROLS_IF_TOOLTIP_2:this.elseifCount_&&!this.elseCount_?t.Msg.CONTROLS_IF_TOOLTIP_3:this.elseifCount_&&this.elseCount_?t.Msg.CONTROLS_IF_TOOLTIP_4:"":t.Msg.CONTROLS_IF_TOOLTIP_1}.bind(this))},t.Extensions.register("controls_if_tooltip",t.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION),t.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN={onchange:function(n){this.prevBlocks_||(this.prevBlocks_=[null,null]);var o=this.getInputTargetBlock("A"),r=this.getInputTargetBlock("B");o&&r&&!this.workspace.connectionChecker.doTypeChecks(o.outputConnection,r.outputConnection)&&(t.Events.setGroup(n.group),(n=this.prevBlocks_[0])!==o&&(o.unplug(),!n||n.isDisposed()||n.isShadow()||this.getInput("A").connection.connect(n.outputConnection)),(o=this.prevBlocks_[1])!==r&&(r.unplug(),!o||o.isDisposed()||o.isShadow()||this.getInput("B").connection.connect(o.outputConnection)),this.bumpNeighbours(),t.Events.setGroup(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},t.Constants.Logic.LOGIC_COMPARE_EXTENSION=function(){this.mixin(t.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN)},t.Extensions.register("logic_compare",t.Constants.Logic.LOGIC_COMPARE_EXTENSION),t.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN={prevParentConnection_:null,onchange:function(n){var o=this.getInputTargetBlock("THEN"),r=this.getInputTargetBlock("ELSE"),p=this.outputConnection.targetConnection;if((o||r)&&p)for(var b=0;2>b;b++){var I=1==b?o:r;I&&!I.workspace.connectionChecker.doTypeChecks(I.outputConnection,p)&&(t.Events.setGroup(n.group),p===this.prevParentConnection_?(this.unplug(),p.getSourceBlock().bumpNeighbours()):(I.unplug(),I.bumpNeighbours()),t.Events.setGroup(!1))}this.prevParentConnection_=p}},t.Extensions.registerMixin("logic_ternary",t.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN),t.Blocks.loops={},t.Constants.Loops={},t.Constants.Loops.HUE=120,t.defineBlocksWithJsonArray([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]),t.Constants.Loops.WHILE_UNTIL_TOOLTIPS={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"},t.Extensions.register("controls_whileUntil_tooltip",t.Extensions.buildTooltipForDropdown("MODE",t.Constants.Loops.WHILE_UNTIL_TOOLTIPS)),t.Constants.Loops.BREAK_CONTINUE_TOOLTIPS={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"},t.Extensions.register("controls_flow_tooltip",t.Extensions.buildTooltipForDropdown("FLOW",t.Constants.Loops.BREAK_CONTINUE_TOOLTIPS)),t.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN={customContextMenu:function(n){if(!this.isInFlyout){var o=this.getField("VAR").getVariable(),r=o.name;if(!this.isCollapsed()&&null!=r){var p={enabled:!0};p.text=t.Msg.VARIABLES_SET_CREATE_GET.replace("%1",r),o=t.Variables.generateVariableFieldDom(o),(r=t.utils.xml.createElement("block")).setAttribute("type","variables_get"),r.appendChild(o),p.callback=t.ContextMenu.callbackFactory(this,r),n.push(p)}}}},t.Extensions.registerMixin("contextMenu_newGetVariableBlock",t.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN),t.Extensions.register("controls_for_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),t.Extensions.register("controls_forEach_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR")),t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN={LOOP_TYPES:["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"],suppressPrefixSuffix:!0,getSurroundLoop:function(n){do{if(-1!=t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.LOOP_TYPES.indexOf(n.type))return n;n=n.getSurroundParent()}while(n);return null},onchange:function(n){if(this.workspace.isDragging&&!this.workspace.isDragging()&&n.type==t.Events.BLOCK_MOVE){var o=t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(this);if(this.setWarningText(o?null:t.Msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout){var r=t.Events.getGroup();t.Events.setGroup(n.group),this.setEnabled(o),t.Events.setGroup(r)}}}},t.Extensions.registerMixin("controls_flow_in_loop_check",t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN),t.Blocks.math={},t.Constants.Math={},t.Constants.Math.HUE=230,t.defineBlocksWithJsonArray([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["\u03c0","PI"],["e","E"],["\u03c6","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(\xbd)","SQRT1_2"],["\u221e","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]),t.Constants.Math.TOOLTIPS_BY_OP={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"},t.Extensions.register("math_op_tooltip",t.Extensions.buildTooltipForDropdown("OP",t.Constants.Math.TOOLTIPS_BY_OP)),t.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN={mutationToDom:function(){var n=t.utils.xml.createElement("mutation"),o="DIVISIBLE_BY"==this.getFieldValue("PROPERTY");return n.setAttribute("divisor_input",o),n},domToMutation:function(n){n="true"==n.getAttribute("divisor_input"),this.updateShape_(n)},updateShape_:function(n){var o=this.getInput("DIVISOR");n?o||this.appendValueInput("DIVISOR").setCheck("Number"):o&&this.removeInput("DIVISOR")}},t.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION=function(){this.getField("PROPERTY").setValidator(function(n){n="DIVISIBLE_BY"==n,this.getSourceBlock().updateShape_(n)})},t.Extensions.registerMutator("math_is_divisibleby_mutator",t.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN,t.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION),t.Extensions.register("math_change_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_MATH_CHANGE_TOOLTIP}","VAR")),t.Constants.Math.LIST_MODES_MUTATOR_MIXIN={updateType_:function(n){this.outputConnection.setCheck("MODE"==n?"Array":"Number")},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("op",this.getFieldValue("OP")),n},domToMutation:function(n){this.updateType_(n.getAttribute("op"))}},t.Constants.Math.LIST_MODES_MUTATOR_EXTENSION=function(){this.getField("OP").setValidator(function(n){this.updateType_(n)}.bind(this))},t.Extensions.registerMutator("math_modes_of_list_mutator",t.Constants.Math.LIST_MODES_MUTATOR_MIXIN,t.Constants.Math.LIST_MODES_MUTATOR_EXTENSION),t.Blocks.procedures={},t.Blocks.procedures_defnoreturn={init:function(){var n=t.Procedures.findLegalName("",this);(n=new t.FieldTextInput(n,t.Procedures.rename)).setSpellcheck(!1),this.appendDummyInput().appendField(t.Msg.PROCEDURES_DEFNORETURN_TITLE).appendField(n,"NAME").appendField("","PARAMS"),this.setMutator(new t.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&t.Msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(t.Msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(t.Msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:function(n){this.hasStatements_!==n&&(n?(this.appendStatementInput("STACK").appendField(t.Msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=n)},updateParams_:function(){var n="";this.arguments_.length&&(n=t.Msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),t.Events.disable();try{this.setFieldValue(n,"PARAMS")}finally{t.Events.enable()}},mutationToDom:function(n){var o=t.utils.xml.createElement("mutation");n&&o.setAttribute("name",this.getFieldValue("NAME"));for(var r=0;r<this.argumentVarModels_.length;r++){var p=t.utils.xml.createElement("arg"),b=this.argumentVarModels_[r];p.setAttribute("name",b.name),p.setAttribute("varid",b.getId()),n&&this.paramIds_&&p.setAttribute("paramId",this.paramIds_[r]),o.appendChild(p)}return this.hasStatements_||o.setAttribute("statements","false"),o},domToMutation:function(n){this.arguments_=[],this.argumentVarModels_=[];for(var r,o=0;r=n.childNodes[o];o++)if("arg"==r.nodeName.toLowerCase()){var p=r.getAttribute("name");r=r.getAttribute("varid")||r.getAttribute("varId"),this.arguments_.push(p),null!=(r=t.Variables.getOrCreateVariablePackage(this.workspace,r,p,""))?this.argumentVarModels_.push(r):console.log("Failed to create a variable with name "+p+", ignoring.")}this.updateParams_(),t.Procedures.mutateCallers(this),this.setStatements_("false"!==n.getAttribute("statements"))},decompose:function(n){var o=t.utils.xml.createElement("block");o.setAttribute("type","procedures_mutatorcontainer");var r=t.utils.xml.createElement("statement");r.setAttribute("name","STACK"),o.appendChild(r);for(var p=0;p<this.arguments_.length;p++){var b=t.utils.xml.createElement("block");b.setAttribute("type","procedures_mutatorarg");var I=t.utils.xml.createElement("field");I.setAttribute("name","NAME");var x=t.utils.xml.createTextNode(this.arguments_[p]);I.appendChild(x),b.appendChild(I),I=t.utils.xml.createElement("next"),b.appendChild(I),r.appendChild(b),r=I}return n=t.Xml.domToBlock(o,n),"procedures_defreturn"==this.type?n.setFieldValue(this.hasStatements_,"STATEMENTS"):n.removeInput("STATEMENT_INPUT"),t.Procedures.mutateCallers(this),n},compose:function(n){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];for(var o=n.getInputTargetBlock("STACK");o&&!o.isInsertionMarker();){var r=o.getFieldValue("NAME");this.arguments_.push(r),r=this.workspace.getVariable(r,""),this.argumentVarModels_.push(r),this.paramIds_.push(o.id),o=o.nextConnection&&o.nextConnection.targetBlock()}this.updateParams_(),t.Procedures.mutateCallers(this),null!==(n=n.getFieldValue("STATEMENTS"))&&this.hasStatements_!=(n="TRUE"==n)&&(n?(this.setStatements_(!0),t.Mutator.reconnect(this.statementConnection_,this,"STACK"),this.statementConnection_=null):(n=this.getInput("STACK").connection,(this.statementConnection_=n.targetConnection)&&((n=n.targetBlock()).unplug(),n.bumpNeighbours()),this.setStatements_(!1)))},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(n,o){var r=this.workspace.getVariableById(n);if(""==r.type){r=r.name,o=this.workspace.getVariableById(o);for(var p=!1,b=0;b<this.argumentVarModels_.length;b++)this.argumentVarModels_[b].getId()==n&&(this.arguments_[b]=o.name,this.argumentVarModels_[b]=o,p=!0);p&&(this.displayRenamedVar_(r,o.name),t.Procedures.mutateCallers(this))}},updateVarName:function(n){for(var o=n.name,r=!1,p=0;p<this.argumentVarModels_.length;p++)if(this.argumentVarModels_[p].getId()==n.getId()){var b=this.arguments_[p];this.arguments_[p]=o,r=!0}r&&(this.displayRenamedVar_(b,o),t.Procedures.mutateCallers(this))},displayRenamedVar_:function(n,o){if(this.updateParams_(),this.mutator&&this.mutator.isVisible())for(var b,r=this.mutator.workspace_.getAllBlocks(!1),p=0;b=r[p];p++)"procedures_mutatorarg"==b.type&&t.Names.equals(n,b.getFieldValue("NAME"))&&b.setFieldValue(o,"NAME")},customContextMenu:function(n){if(!this.isInFlyout){var o={enabled:!0},r=this.getFieldValue("NAME");o.text=t.Msg.PROCEDURES_CREATE_DO.replace("%1",r);var p=t.utils.xml.createElement("mutation");for(p.setAttribute("name",r),r=0;r<this.arguments_.length;r++){var b=t.utils.xml.createElement("arg");b.setAttribute("name",this.arguments_[r]),p.appendChild(b)}if((r=t.utils.xml.createElement("block")).setAttribute("type",this.callType_),r.appendChild(p),o.callback=t.ContextMenu.callbackFactory(this,r),n.push(o),!this.isCollapsed())for(r=0;r<this.argumentVarModels_.length;r++)(o={enabled:!0}).text=t.Msg.VARIABLES_SET_CREATE_GET.replace("%1",(p=this.argumentVarModels_[r]).name),p=t.Variables.generateVariableFieldDom(p),(b=t.utils.xml.createElement("block")).setAttribute("type","variables_get"),b.appendChild(p),o.callback=t.ContextMenu.callbackFactory(this,b),n.push(o)}},callType_:"procedures_callnoreturn"},t.Blocks.procedures_defreturn={init:function(){var n=t.Procedures.findLegalName("",this);(n=new t.FieldTextInput(n,t.Procedures.rename)).setSpellcheck(!1),this.appendDummyInput().appendField(t.Msg.PROCEDURES_DEFRETURN_TITLE).appendField(n,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(t.ALIGN_RIGHT).appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new t.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&t.Msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(t.Msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(t.Msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:t.Blocks.procedures_defnoreturn.setStatements_,updateParams_:t.Blocks.procedures_defnoreturn.updateParams_,mutationToDom:t.Blocks.procedures_defnoreturn.mutationToDom,domToMutation:t.Blocks.procedures_defnoreturn.domToMutation,decompose:t.Blocks.procedures_defnoreturn.decompose,compose:t.Blocks.procedures_defnoreturn.compose,getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},getVars:t.Blocks.procedures_defnoreturn.getVars,getVarModels:t.Blocks.procedures_defnoreturn.getVarModels,renameVarById:t.Blocks.procedures_defnoreturn.renameVarById,updateVarName:t.Blocks.procedures_defnoreturn.updateVarName,displayRenamedVar_:t.Blocks.procedures_defnoreturn.displayRenamedVar_,customContextMenu:t.Blocks.procedures_defnoreturn.customContextMenu,callType_:"procedures_callreturn"},t.Blocks.procedures_mutatorcontainer={init:function(){this.appendDummyInput().appendField(t.Msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(t.Msg.PROCEDURES_ALLOW_STATEMENTS).appendField(new t.FieldCheckbox("TRUE"),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}},t.Blocks.procedures_mutatorarg={init:function(){var n=new t.FieldTextInput(t.Procedures.DEFAULT_ARG,this.validator_);n.oldShowEditorFn_=n.showEditor_,n.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(t.Msg.PROCEDURES_MUTATORARG_TITLE).appendField(n,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,n.onFinishEditing_=this.deleteIntermediateVars_,n.createdVariables_=[],n.onFinishEditing_("x")},validator_:function(n){var o=this.getSourceBlock(),r=t.Mutator.findParentWs(o.workspace);if(!(n=n.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,"")))return null;for(var p=(o.workspace.targetWorkspace||o.workspace).getAllBlocks(!1),b=n.toLowerCase(),I=0;I<p.length;I++)if(p[I].id!=this.getSourceBlock().id){var x=p[I].getFieldValue("NAME");if(x&&x.toLowerCase()==b)return null}return o.isInFlyout||((o=r.getVariable(n,""))&&o.name!=n&&r.renameVariableById(o.getId(),n),o||(o=r.createVariable(n,""))&&this.createdVariables_&&this.createdVariables_.push(o)),n},deleteIntermediateVars_:function(n){var o=t.Mutator.findParentWs(this.getSourceBlock().workspace);if(o)for(var r=0;r<this.createdVariables_.length;r++){var p=this.createdVariables_[r];p.name!=n&&o.deleteVariableById(p.getId())}}},t.Blocks.procedures_callnoreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(t.Msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(n,o){t.Names.equals(n,this.getProcedureCall())&&(this.setFieldValue(o,"NAME"),this.setTooltip((this.outputConnection?t.Msg.PROCEDURES_CALLRETURN_TOOLTIP:t.Msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",o)))},setProcedureParameters_:function(n,o){var r=t.Procedures.getDefinition(this.getProcedureCall(),this.workspace),p=r&&r.mutator&&r.mutator.isVisible();if(p||(this.quarkConnections_={},this.quarkIds_=null),o)if(n.join("\n")==this.arguments_.join("\n"))this.quarkIds_=o;else{if(o.length!=n.length)throw RangeError("paramNames and paramIds must be the same length.");this.setCollapsed(!1),this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]),r=this.rendered,this.rendered=!1;for(var b=0;b<this.arguments_.length;b++){var I=this.getInput("ARG"+b);I&&(this.quarkConnections_[this.quarkIds_[b]]=I=I.connection.targetConnection,p&&I&&-1==o.indexOf(this.quarkIds_[b])&&(I.disconnect(),I.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(n),this.argumentVarModels_=[],b=0;b<this.arguments_.length;b++)n=t.Variables.getOrCreateVariablePackage(this.workspace,null,this.arguments_[b],""),this.argumentVarModels_.push(n);if(this.updateShape_(),this.quarkIds_=o)for(b=0;b<this.arguments_.length;b++)(o=this.quarkIds_[b])in this.quarkConnections_&&(t.Mutator.reconnect(I=this.quarkConnections_[o],this,"ARG"+b)||delete this.quarkConnections_[o]);(this.rendered=r)&&this.render()}},updateShape_:function(){for(var n=0;n<this.arguments_.length;n++){var o=this.getField("ARGNAME"+n);if(o){t.Events.disable();try{o.setValue(this.arguments_[n])}finally{t.Events.enable()}}else o=new t.FieldLabel(this.arguments_[n]),this.appendValueInput("ARG"+n).setAlign(t.ALIGN_RIGHT).appendField(o,"ARGNAME"+n).init()}for(;this.getInput("ARG"+n);)this.removeInput("ARG"+n),n++;(n=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||(n.appendField(t.Msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),n.init()):this.getField("WITH")&&n.removeField("WITH"))},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");n.setAttribute("name",this.getProcedureCall());for(var o=0;o<this.arguments_.length;o++){var r=t.utils.xml.createElement("arg");r.setAttribute("name",this.arguments_[o]),n.appendChild(r)}return n},domToMutation:function(n){var o=n.getAttribute("name");this.renameProcedure(this.getProcedureCall(),o),o=[];for(var b,r=[],p=0;b=n.childNodes[p];p++)"arg"==b.nodeName.toLowerCase()&&(o.push(b.getAttribute("name")),r.push(b.getAttribute("paramId")));this.setProcedureParameters_(o,r)},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(n){if(this.workspace&&!this.workspace.isFlyout&&n.recordUndo)if(n.type==t.Events.BLOCK_CREATE&&-1!=n.ids.indexOf(this.id)){var o=this.getProcedureCall();if(!(o=t.Procedures.getDefinition(o,this.workspace))||o.type==this.defType_&&JSON.stringify(o.getVars())==JSON.stringify(this.arguments_)||(o=null),!o){t.Events.setGroup(n.group),n=t.utils.xml.createElement("xml"),(o=t.utils.xml.createElement("block")).setAttribute("type",this.defType_);var r=this.getRelativeToSurfaceXY(),p=r.y+2*t.SNAP_RADIUS;o.setAttribute("x",r.x+t.SNAP_RADIUS*(this.RTL?-1:1)),o.setAttribute("y",p),r=this.mutationToDom(),o.appendChild(r),(r=t.utils.xml.createElement("field")).setAttribute("name","NAME"),(p=this.getProcedureCall())||(p=t.Procedures.findLegalName("",this),this.renameProcedure("",p)),r.appendChild(t.utils.xml.createTextNode(p)),o.appendChild(r),n.appendChild(o),t.Xml.domToWorkspace(n,this.workspace),t.Events.setGroup(!1)}}else n.type==t.Events.BLOCK_DELETE?(o=this.getProcedureCall(),(o=t.Procedures.getDefinition(o,this.workspace))||(t.Events.setGroup(n.group),this.dispose(!0),t.Events.setGroup(!1))):n.type==t.Events.CHANGE&&"disabled"==n.element&&(o=this.getProcedureCall(),(o=t.Procedures.getDefinition(o,this.workspace))&&o.id==n.blockId&&((o=t.Events.getGroup())&&console.log("Saw an existing group while responding to a definition change"),t.Events.setGroup(n.group),n.newValue?(this.previousEnabledState_=this.isEnabled(),this.setEnabled(!1)):this.setEnabled(this.previousEnabledState_),t.Events.setGroup(o)))},customContextMenu:function(n){if(this.workspace.isMovable()){var o={enabled:!0};o.text=t.Msg.PROCEDURES_HIGHLIGHT_DEF;var r=this.getProcedureCall(),p=this.workspace;o.callback=function(){var b=t.Procedures.getDefinition(r,p);b&&(p.centerOnBlock(b.id),b.select())},n.push(o)}},defType_:"procedures_defnoreturn"},t.Blocks.procedures_callreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(t.Msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},getProcedureCall:t.Blocks.procedures_callnoreturn.getProcedureCall,renameProcedure:t.Blocks.procedures_callnoreturn.renameProcedure,setProcedureParameters_:t.Blocks.procedures_callnoreturn.setProcedureParameters_,updateShape_:t.Blocks.procedures_callnoreturn.updateShape_,mutationToDom:t.Blocks.procedures_callnoreturn.mutationToDom,domToMutation:t.Blocks.procedures_callnoreturn.domToMutation,getVars:t.Blocks.procedures_callnoreturn.getVars,getVarModels:t.Blocks.procedures_callnoreturn.getVarModels,onchange:t.Blocks.procedures_callnoreturn.onchange,customContextMenu:t.Blocks.procedures_callnoreturn.customContextMenu,defType_:"procedures_defreturn"},t.Blocks.procedures_ifreturn={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(t.Msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(t.Msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("value",Number(this.hasReturnValue_)),n},domToMutation:function(n){this.hasReturnValue_=1==n.getAttribute("value"),this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(n){if(this.workspace.isDragging&&!this.workspace.isDragging()){n=!1;var o=this;do{if(-1!=this.FUNCTION_TYPES.indexOf(o.type)){n=!0;break}o=o.getSurroundParent()}while(o);n?("procedures_defnoreturn"==o.type&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):"procedures_defreturn"!=o.type||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null),this.isInFlyout||this.setEnabled(!0)):(this.setWarningText(t.Msg.PROCEDURES_IFRETURN_WARNING),this.isInFlyout||this.getInheritedDisabled()||this.setEnabled(!1))}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]},t.Blocks.texts={},t.Constants.Text={},t.Constants.Text.HUE=160,t.defineBlocksWithJsonArray([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_multiline",message0:"%1 %2",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=",width:12,height:17,alt:"\xb6"},{type:"field_multilinetext",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),t.Blocks.text_getSubstring={init:function(){this.WHERE_OPTIONS_1=[[t.Msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[t.Msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[t.Msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[t.Msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[t.Msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[t.Msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(t.Msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(t.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),t.Msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(t.Msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(t.Msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){var n=t.utils.xml.createElement("mutation"),o=this.getInput("AT1").type==t.INPUT_VALUE;return n.setAttribute("at1",o),o=this.getInput("AT2").type==t.INPUT_VALUE,n.setAttribute("at2",o),n},domToMutation:function(n){var o="true"==n.getAttribute("at1");n="true"==n.getAttribute("at2"),this.updateAt_(1,o),this.updateAt_(2,n)},updateAt_:function(n,o){this.removeInput("AT"+n),this.removeInput("ORDINAL"+n,!0),o?(this.appendValueInput("AT"+n).setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+n).appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+n),2==n&&t.Msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(t.Msg.TEXT_GET_SUBSTRING_TAIL));var r=new t.FieldDropdown(this["WHERE_OPTIONS_"+n],function(p){var b="FROM_START"==p||"FROM_END"==p;if(b!=o){var I=this.getSourceBlock();return I.updateAt_(n,b),I.setFieldValue(p,"WHERE"+n),null}});this.getInput("AT"+n).appendField(r,"WHERE"+n),1==n&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"))}},t.Blocks.text_changeCase={init:function(){var n=[[t.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[t.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[t.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(t.Msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new t.FieldDropdown(n),"CASE"),this.setOutput(!0,"String"),this.setTooltip(t.Msg.TEXT_CHANGECASE_TOOLTIP)}},t.Blocks.text_trim={init:function(){var n=[[t.Msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[t.Msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[t.Msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(t.Msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new t.FieldDropdown(n),"MODE"),this.setOutput(!0,"String"),this.setTooltip(t.Msg.TEXT_TRIM_TOOLTIP)}},t.Blocks.text_print={init:function(){this.jsonInit({message0:t.Msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:t.Msg.TEXT_PRINT_TOOLTIP,helpUrl:t.Msg.TEXT_PRINT_HELPURL})}},t.Blocks.text_prompt_ext={init:function(){var n=[[t.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[t.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(t.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks");var o=this;n=new t.FieldDropdown(n,function(r){o.updateType_(r)}),this.appendValueInput("TEXT").appendField(n,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(function(){return"TEXT"==o.getFieldValue("TYPE")?t.Msg.TEXT_PROMPT_TOOLTIP_TEXT:t.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},updateType_:function(n){this.outputConnection.setCheck("NUMBER"==n?"Number":"String")},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("type",this.getFieldValue("TYPE")),n},domToMutation:function(n){this.updateType_(n.getAttribute("type"))}},t.Blocks.text_prompt={init:function(){this.mixin(t.Constants.Text.QUOTE_IMAGE_MIXIN);var n=[[t.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[t.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]],o=this;this.setHelpUrl(t.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),n=new t.FieldDropdown(n,function(r){o.updateType_(r)}),this.appendDummyInput().appendField(n,"TYPE").appendField(this.newQuote_(!0)).appendField(new t.FieldTextInput(""),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(function(){return"TEXT"==o.getFieldValue("TYPE")?t.Msg.TEXT_PROMPT_TOOLTIP_TEXT:t.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},updateType_:t.Blocks.text_prompt_ext.updateType_,mutationToDom:t.Blocks.text_prompt_ext.mutationToDom,domToMutation:t.Blocks.text_prompt_ext.domToMutation},t.Blocks.text_count={init:function(){this.jsonInit({message0:t.Msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:t.Msg.TEXT_COUNT_TOOLTIP,helpUrl:t.Msg.TEXT_COUNT_HELPURL})}},t.Blocks.text_replace={init:function(){this.jsonInit({message0:t.Msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:t.Msg.TEXT_REPLACE_TOOLTIP,helpUrl:t.Msg.TEXT_REPLACE_HELPURL})}},t.Blocks.text_reverse={init:function(){this.jsonInit({message0:t.Msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:t.Msg.TEXT_REVERSE_TOOLTIP,helpUrl:t.Msg.TEXT_REVERSE_HELPURL})}},t.Constants.Text.QUOTE_IMAGE_MIXIN={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(n){for(var r,o=0;r=this.inputList[o];o++)for(var b,p=0;b=r.fieldRow[p];p++)if(n==b.name)return r.insertFieldAt(p,this.newQuote_(!0)),void r.insertFieldAt(p+2,this.newQuote_(!1));console.warn('field named "'+n+'" not found in '+this.toDevString())},newQuote_:function(n){return new t.FieldImage((n=this.RTL?!n:n)?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,this.QUOTE_IMAGE_WIDTH,this.QUOTE_IMAGE_HEIGHT,n?"\u201c":"\u201d")}},t.Constants.Text.TEXT_QUOTES_EXTENSION=function(){this.mixin(t.Constants.Text.QUOTE_IMAGE_MIXIN),this.quoteField_("TEXT")},t.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN={mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("items",this.itemCount_),n},domToMutation:function(n){this.itemCount_=parseInt(n.getAttribute("items"),10),this.updateShape_()},decompose:function(n){var o=n.newBlock("text_create_join_container");o.initSvg();for(var r=o.getInput("STACK").connection,p=0;p<this.itemCount_;p++){var b=n.newBlock("text_create_join_item");b.initSvg(),r.connect(b.previousConnection),r=b.nextConnection}return o},compose:function(n){var o=n.getInputTargetBlock("STACK");for(n=[];o&&!o.isInsertionMarker();)n.push(o.valueConnection_),o=o.nextConnection&&o.nextConnection.targetBlock();for(o=0;o<this.itemCount_;o++){var r=this.getInput("ADD"+o).connection.targetConnection;r&&-1==n.indexOf(r)&&r.disconnect()}for(this.itemCount_=n.length,this.updateShape_(),o=0;o<this.itemCount_;o++)t.Mutator.reconnect(n[o],this,"ADD"+o)},saveConnections:function(n){n=n.getInputTargetBlock("STACK");for(var o=0;n;){var r=this.getInput("ADD"+o);n.valueConnection_=r&&r.connection.targetConnection,o++,n=n.nextConnection&&n.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var n=0;n<this.itemCount_;n++)if(!this.getInput("ADD"+n)){var o=this.appendValueInput("ADD"+n).setAlign(t.ALIGN_RIGHT);0==n&&o.appendField(t.Msg.TEXT_JOIN_TITLE_CREATEWITH)}for(;this.getInput("ADD"+n);)this.removeInput("ADD"+n),n++}},t.Constants.Text.TEXT_JOIN_EXTENSION=function(){this.mixin(t.Constants.Text.QUOTE_IMAGE_MIXIN),this.itemCount_=2,this.updateShape_(),this.setMutator(new t.Mutator(["text_create_join_item"]))},t.Extensions.register("text_append_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_TEXT_APPEND_TOOLTIP}","VAR")),t.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION=function(){var n=this;this.setTooltip(function(){return t.Msg.TEXT_INDEXOF_TOOLTIP.replace("%1",n.workspace.options.oneBasedIndex?"0":"-1")})},t.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN={mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("at",!!this.isAt_),n},domToMutation:function(n){n="false"!=n.getAttribute("at"),this.updateAt_(n)},updateAt_:function(n){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),n&&(this.appendValueInput("AT").setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)),t.Msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(t.Msg.TEXT_CHARAT_TAIL)),this.isAt_=n}},t.Constants.Text.TEXT_CHARAT_EXTENSION=function(){this.getField("WHERE").setValidator(function(o){(o="FROM_START"==o||"FROM_END"==o)!=this.isAt_&&this.getSourceBlock().updateAt_(o)}),this.updateAt_(!0);var n=this;this.setTooltip(function(){var o=n.getFieldValue("WHERE"),r=t.Msg.TEXT_CHARAT_TOOLTIP;return("FROM_START"==o||"FROM_END"==o)&&(o="FROM_START"==o?t.Msg.LISTS_INDEX_FROM_START_TOOLTIP:t.Msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(r+="  "+o.replace("%1",n.workspace.options.oneBasedIndex?"#1":"#0")),r})},t.Extensions.register("text_indexOf_tooltip",t.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION),t.Extensions.register("text_quotes",t.Constants.Text.TEXT_QUOTES_EXTENSION),t.Extensions.registerMutator("text_join_mutator",t.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN,t.Constants.Text.TEXT_JOIN_EXTENSION),t.Extensions.registerMutator("text_charAt_mutator",t.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN,t.Constants.Text.TEXT_CHARAT_EXTENSION),t.Blocks.variables={},t.Constants.Variables={},t.Constants.Variables.HUE=330,t.defineBlocksWithJsonArray([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]),t.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(n){if(this.isInFlyout)("variables_get"==this.type||"variables_get_reporter"==this.type)&&(o={text:t.Msg.RENAME_VARIABLE,enabled:!0,callback:t.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},b=this.getField("VAR").getText(),p={text:t.Msg.DELETE_VARIABLE.replace("%1",b),enabled:!0,callback:t.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},n.unshift(o),n.unshift(p));else{if("variables_get"==this.type)var o="variables_set",r=t.Msg.VARIABLES_GET_CREATE_SET;else o="variables_get",r=t.Msg.VARIABLES_SET_CREATE_GET;var p={enabled:0<this.workspace.remainingCapacity()},b=this.getField("VAR").getText();p.text=r.replace("%1",b),(r=t.utils.xml.createElement("field")).setAttribute("name","VAR"),r.appendChild(t.utils.xml.createTextNode(b)),(b=t.utils.xml.createElement("block")).setAttribute("type",o),b.appendChild(r),p.callback=t.ContextMenu.callbackFactory(this,b),n.push(p)}}},t.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY=function(n){return function(){var o=n.workspace,r=n.getField("VAR").getVariable();t.Variables.renameVariable(o,r)}},t.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY=function(n){return function(){var o=n.workspace,r=n.getField("VAR").getVariable();o.deleteVariableById(r.getId()),o.refreshToolboxSelection()}},t.Extensions.registerMixin("contextMenu_variableSetterGetter",t.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),t.Constants.VariablesDynamic={},t.Constants.VariablesDynamic.HUE=310,t.defineBlocksWithJsonArray([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]),t.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(n){if(this.isInFlyout)("variables_get_dynamic"==this.type||"variables_get_reporter_dynamic"==this.type)&&(o={text:t.Msg.RENAME_VARIABLE,enabled:!0,callback:t.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},I=this.getField("VAR").getText(),b={text:t.Msg.DELETE_VARIABLE.replace("%1",I),enabled:!0,callback:t.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},n.unshift(o),n.unshift(b));else{var o=this.getFieldValue("VAR"),r=this.workspace.getVariableById(o).type;if("variables_get_dynamic"==this.type){o="variables_set_dynamic";var p=t.Msg.VARIABLES_GET_CREATE_SET}else o="variables_get_dynamic",p=t.Msg.VARIABLES_SET_CREATE_GET;var b={enabled:0<this.workspace.remainingCapacity()},I=this.getField("VAR").getText();b.text=p.replace("%1",I),(p=t.utils.xml.createElement("field")).setAttribute("name","VAR"),p.setAttribute("variabletype",r),p.appendChild(t.utils.xml.createTextNode(I)),(I=t.utils.xml.createElement("block")).setAttribute("type",o),I.appendChild(p),b.callback=t.ContextMenu.callbackFactory(this,I),n.push(b)}},onchange:function(n){n=this.getFieldValue("VAR"),n=t.Variables.getVariable(this.workspace,n),"variables_get_dynamic"==this.type?this.outputConnection.setCheck(n.type):this.getInput("VALUE").connection.setCheck(n.type)}},t.Constants.VariablesDynamic.RENAME_OPTION_CALLBACK_FACTORY=function(n){return function(){var o=n.workspace,r=n.getField("VAR").getVariable();t.Variables.renameVariable(o,r)}},t.Constants.VariablesDynamic.DELETE_OPTION_CALLBACK_FACTORY=function(n){return function(){var o=n.workspace,r=n.getField("VAR").getVariable();o.deleteVariableById(r.getId()),o.refreshToolboxSelection()}},t.Extensions.registerMixin("contextMenu_variableDynamicSetterGetter",t.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),t.Blocks})?T.apply(U,a):T)&&(B.exports=e)},8269:function(B,U,v){var T,a,e;a=[v(47155),v(26436),v(89361),v(64905)],void 0!==(e="function"==typeof(T=function(t,n,o,r){"use strict";return t.setLocale(n),t.Blocks=t.Blocks||{},Object.keys(o).forEach(function(p){t.Blocks[p]=o[p]}),t.JavaScript=r,t})?T.apply(U,a):T)&&(B.exports=e)},47155:function(B,U,v){var T,a,e;a=[v(8334)],void 0!==(e="function"==typeof(T=function(t){"use strict";return t.setLocale=function(n){t.Msg=t.Msg||{},Object.keys(n).forEach(function(o){t.Msg[o]=n[o]})},t})?T.apply(U,a):T)&&(B.exports=e)},9371:function(B,U,v){var T,a,e;a=[v(8269)],void 0!==(e="function"==typeof(T=function(t){"use strict";return t})?T.apply(U,a):T)&&(B.exports=e)},64905:function(B,U,v){var T,a,e;a=[v(47155),v(84244)],void 0!==(e="function"==typeof(T=function(t,n){"use strict";return t.JavaScript=n,n})?T.apply(U,a):T)&&(B.exports=e)},84244:function(B,U,v){var T,a,e;a=[v(40923)],void 0!==(e="function"==typeof(T=function(t){"use strict";return t.JavaScript=new t.Generator("JavaScript"),t.JavaScript.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(t.utils.global).join(",")),t.JavaScript.ORDER_ATOMIC=0,t.JavaScript.ORDER_NEW=1.1,t.JavaScript.ORDER_MEMBER=1.2,t.JavaScript.ORDER_FUNCTION_CALL=2,t.JavaScript.ORDER_INCREMENT=3,t.JavaScript.ORDER_DECREMENT=3,t.JavaScript.ORDER_BITWISE_NOT=4.1,t.JavaScript.ORDER_UNARY_PLUS=4.2,t.JavaScript.ORDER_UNARY_NEGATION=4.3,t.JavaScript.ORDER_LOGICAL_NOT=4.4,t.JavaScript.ORDER_TYPEOF=4.5,t.JavaScript.ORDER_VOID=4.6,t.JavaScript.ORDER_DELETE=4.7,t.JavaScript.ORDER_AWAIT=4.8,t.JavaScript.ORDER_EXPONENTIATION=5,t.JavaScript.ORDER_MULTIPLICATION=5.1,t.JavaScript.ORDER_DIVISION=5.2,t.JavaScript.ORDER_MODULUS=5.3,t.JavaScript.ORDER_SUBTRACTION=6.1,t.JavaScript.ORDER_ADDITION=6.2,t.JavaScript.ORDER_BITWISE_SHIFT=7,t.JavaScript.ORDER_RELATIONAL=8,t.JavaScript.ORDER_IN=8,t.JavaScript.ORDER_INSTANCEOF=8,t.JavaScript.ORDER_EQUALITY=9,t.JavaScript.ORDER_BITWISE_AND=10,t.JavaScript.ORDER_BITWISE_XOR=11,t.JavaScript.ORDER_BITWISE_OR=12,t.JavaScript.ORDER_LOGICAL_AND=13,t.JavaScript.ORDER_LOGICAL_OR=14,t.JavaScript.ORDER_CONDITIONAL=15,t.JavaScript.ORDER_ASSIGNMENT=16,t.JavaScript.ORDER_YIELD=17,t.JavaScript.ORDER_COMMA=18,t.JavaScript.ORDER_NONE=99,t.JavaScript.ORDER_OVERRIDES=[[t.JavaScript.ORDER_FUNCTION_CALL,t.JavaScript.ORDER_MEMBER],[t.JavaScript.ORDER_FUNCTION_CALL,t.JavaScript.ORDER_FUNCTION_CALL],[t.JavaScript.ORDER_MEMBER,t.JavaScript.ORDER_MEMBER],[t.JavaScript.ORDER_MEMBER,t.JavaScript.ORDER_FUNCTION_CALL],[t.JavaScript.ORDER_LOGICAL_NOT,t.JavaScript.ORDER_LOGICAL_NOT],[t.JavaScript.ORDER_MULTIPLICATION,t.JavaScript.ORDER_MULTIPLICATION],[t.JavaScript.ORDER_ADDITION,t.JavaScript.ORDER_ADDITION],[t.JavaScript.ORDER_LOGICAL_AND,t.JavaScript.ORDER_LOGICAL_AND],[t.JavaScript.ORDER_LOGICAL_OR,t.JavaScript.ORDER_LOGICAL_OR]],t.JavaScript.isInitialized=!1,t.JavaScript.init=function(n){Object.getPrototypeOf(this).init.call(this),this.nameDB_?this.nameDB_.reset():this.nameDB_=new t.Names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(n.getVariableMap()),this.nameDB_.populateVariables(n),this.nameDB_.populateProcedures(n);for(var o=[],r=t.Variables.allDeveloperVariables(n),p=0;p<r.length;p++)o.push(this.nameDB_.getName(r[p],t.Names.DEVELOPER_VARIABLE_TYPE));for(n=t.Variables.allUsedVarModels(n),p=0;p<n.length;p++)o.push(this.nameDB_.getName(n[p].getId(),t.VARIABLE_CATEGORY_NAME));o.length&&(this.definitions_.variables="var "+o.join(", ")+";"),this.isInitialized=!0},t.JavaScript.finish=function(n){var o=t.utils.object.values(this.definitions_);return n=Object.getPrototypeOf(this).finish.call(this,n),this.isInitialized=!1,this.nameDB_.reset(),o.join("\n\n")+"\n\n\n"+n},t.JavaScript.scrubNakedValue=function(n){return n+";\n"},t.JavaScript.quote_=function(n){return"'"+(n=n.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/'/g,"\\'"))+"'"},t.JavaScript.multiline_quote_=function(n){return n.split(/\n/g).map(this.quote_).join(" + '\\n' +\n")},t.JavaScript.scrub_=function(n,o,r){var p="";if(!n.outputConnection||!n.outputConnection.targetConnection){var b=n.getCommentText();b&&(b=t.utils.string.wrap(b,this.COMMENT_WRAP-3),p+=this.prefixLines(b+"\n","// "));for(var I=0;I<n.inputList.length;I++)n.inputList[I].type==t.inputTypes.VALUE&&(b=n.inputList[I].connection.targetBlock())&&(b=this.allNestedComments(b))&&(p+=this.prefixLines(b,"// "))}return n=n.nextConnection&&n.nextConnection.targetBlock(),p+o+(r?"":this.blockToCode(n))},t.JavaScript.getAdjusted=function(n,o,r,p,b){r=r||0,b=b||this.ORDER_NONE,n.workspace.options.oneBasedIndex&&r--;var I=n.workspace.options.oneBasedIndex?"1":"0";if(n=0<r?this.valueToCode(n,o,this.ORDER_ADDITION)||I:0>r?this.valueToCode(n,o,this.ORDER_SUBTRACTION)||I:p?this.valueToCode(n,o,this.ORDER_UNARY_NEGATION)||I:this.valueToCode(n,o,b)||I,t.isNumber(n))n=Number(n)+r,p&&(n=-n);else{if(0<r){n=n+" + "+r;var x=this.ORDER_ADDITION}else 0>r&&(n=n+" - "+-r,x=this.ORDER_SUBTRACTION);p&&(n=r?"-("+n+")":"-"+n,x=this.ORDER_UNARY_NEGATION),x=Math.floor(x),b=Math.floor(b),x&&b>=x&&(n="("+n+")")}return n},t.JavaScript.colour={},t.JavaScript.colour_picker=function(n){return[t.JavaScript.quote_(n.getFieldValue("COLOUR")),t.JavaScript.ORDER_ATOMIC]},t.JavaScript.colour_random=function(n){return[t.JavaScript.provideFunction_("colourRandom",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"() {","  var num = Math.floor(Math.random() * Math.pow(2, 24));","  return '#' + ('00000' + num.toString(16)).substr(-6);","}"])+"()",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.colour_rgb=function(n){var o=t.JavaScript.valueToCode(n,"RED",t.JavaScript.ORDER_NONE)||0,r=t.JavaScript.valueToCode(n,"GREEN",t.JavaScript.ORDER_NONE)||0;return n=t.JavaScript.valueToCode(n,"BLUE",t.JavaScript.ORDER_NONE)||0,[t.JavaScript.provideFunction_("colourRgb",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(r, g, b) {","  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;","  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;","  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;","  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);","  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);","  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+o+", "+r+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.colour_blend=function(n){var o=t.JavaScript.valueToCode(n,"COLOUR1",t.JavaScript.ORDER_NONE)||"'#000000'",r=t.JavaScript.valueToCode(n,"COLOUR2",t.JavaScript.ORDER_NONE)||"'#000000'";return n=t.JavaScript.valueToCode(n,"RATIO",t.JavaScript.ORDER_NONE)||.5,[t.JavaScript.provideFunction_("colourBlend",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(c1, c2, ratio) {","  ratio = Math.max(Math.min(Number(ratio), 1), 0);","  var r1 = parseInt(c1.substring(1, 3), 16);","  var g1 = parseInt(c1.substring(3, 5), 16);","  var b1 = parseInt(c1.substring(5, 7), 16);","  var r2 = parseInt(c2.substring(1, 3), 16);","  var g2 = parseInt(c2.substring(3, 5), 16);","  var b2 = parseInt(c2.substring(5, 7), 16);","  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);","  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);","  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);","  r = ('0' + (r || 0).toString(16)).slice(-2);","  g = ('0' + (g || 0).toString(16)).slice(-2);","  b = ('0' + (b || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+o+", "+r+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists={},t.JavaScript.lists_create_empty=function(n){return["[]",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.lists_create_with=function(n){for(var o=Array(n.itemCount_),r=0;r<n.itemCount_;r++)o[r]=t.JavaScript.valueToCode(n,"ADD"+r,t.JavaScript.ORDER_NONE)||"null";return["["+o.join(", ")+"]",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.lists_repeat=function(n){return[t.JavaScript.provideFunction_("listsRepeat",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(value, n) {","  var array = [];","  for (var i = 0; i < n; i++) {","    array[i] = value;","  }","  return array;","}"])+"("+(t.JavaScript.valueToCode(n,"ITEM",t.JavaScript.ORDER_NONE)||"null")+", "+(n=t.JavaScript.valueToCode(n,"NUM",t.JavaScript.ORDER_NONE)||"0")+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_length=function(n){return[(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"[]")+".length",t.JavaScript.ORDER_MEMBER]},t.JavaScript.lists_isEmpty=function(n){return["!"+(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"[]")+".length",t.JavaScript.ORDER_LOGICAL_NOT]},t.JavaScript.lists_indexOf=function(n){var o="FIRST"==n.getFieldValue("END")?"indexOf":"lastIndexOf",r=t.JavaScript.valueToCode(n,"FIND",t.JavaScript.ORDER_NONE)||"''";return o=(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"[]")+"."+o+"("+r+")",n.workspace.options.oneBasedIndex?[o+" + 1",t.JavaScript.ORDER_ADDITION]:[o,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_getIndex=function(n){var o=n.getFieldValue("MODE")||"GET",r=n.getFieldValue("WHERE")||"FROM_START",p=t.JavaScript.valueToCode(n,"VALUE","RANDOM"==r?t.JavaScript.ORDER_NONE:t.JavaScript.ORDER_MEMBER)||"[]";switch(r){case"FIRST":if("GET"==o)return[p+"[0]",t.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==o)return[p+".shift()",t.JavaScript.ORDER_MEMBER];if("REMOVE"==o)return p+".shift();\n";break;case"LAST":if("GET"==o)return[p+".slice(-1)[0]",t.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==o)return[p+".pop()",t.JavaScript.ORDER_MEMBER];if("REMOVE"==o)return p+".pop();\n";break;case"FROM_START":if(n=t.JavaScript.getAdjusted(n,"AT"),"GET"==o)return[p+"["+n+"]",t.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==o)return[p+".splice("+n+", 1)[0]",t.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==o)return p+".splice("+n+", 1);\n";break;case"FROM_END":if(n=t.JavaScript.getAdjusted(n,"AT",1,!0),"GET"==o)return[p+".slice("+n+")[0]",t.JavaScript.ORDER_FUNCTION_CALL];if("GET_REMOVE"==o)return[p+".splice("+n+", 1)[0]",t.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==o)return p+".splice("+n+", 1);";break;case"RANDOM":if(p=t.JavaScript.provideFunction_("listsGetRandomItem",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list, remove) {","  var x = Math.floor(Math.random() * list.length);","  if (remove) {","    return list.splice(x, 1)[0];","  } else {","    return list[x];","  }","}"])+"("+p+", "+("GET"!=o)+")","GET"==o||"GET_REMOVE"==o)return[p,t.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==o)return p+";\n"}throw Error("Unhandled combination (lists_getIndex).")},t.JavaScript.lists_setIndex=function(n){function o(){if(r.match(/^\w+$/))return"";var x=t.JavaScript.nameDB_.getDistinctName("tmpList",t.VARIABLE_CATEGORY_NAME),k="var "+x+" = "+r+";\n";return r=x,k}var r=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_MEMBER)||"[]",p=n.getFieldValue("MODE")||"GET",b=n.getFieldValue("WHERE")||"FROM_START",I=t.JavaScript.valueToCode(n,"TO",t.JavaScript.ORDER_ASSIGNMENT)||"null";switch(b){case"FIRST":if("SET"==p)return r+"[0] = "+I+";\n";if("INSERT"==p)return r+".unshift("+I+");\n";break;case"LAST":if("SET"==p)return(n=o())+(r+"[")+r+".length - 1] = "+I+";\n";if("INSERT"==p)return r+".push("+I+");\n";break;case"FROM_START":if(b=t.JavaScript.getAdjusted(n,"AT"),"SET"==p)return r+"["+b+"] = "+I+";\n";if("INSERT"==p)return r+".splice("+b+", 0, "+I+");\n";break;case"FROM_END":if(b=t.JavaScript.getAdjusted(n,"AT",1,!1,t.JavaScript.ORDER_SUBTRACTION),n=o(),"SET"==p)return n+(r+"[")+r+".length - "+b+"] = "+I+";\n";if("INSERT"==p)return n+(r+".splice(")+r+".length - "+b+", 0, "+I+");\n";break;case"RANDOM":if(n=o(),n+="var "+(b=t.JavaScript.nameDB_.getDistinctName("tmpX",t.VARIABLE_CATEGORY_NAME))+" = Math.floor(Math.random() * "+r+".length);\n","SET"==p)return n+(r+"[")+b+"] = "+I+";\n";if("INSERT"==p)return n+(r+".splice(")+b+", 0, "+I+");\n"}throw Error("Unhandled combination (lists_setIndex).")},t.JavaScript.lists.getIndex_=function(n,o,r){return"FIRST"==o?"0":"FROM_END"==o?n+".length - 1 - "+r:"LAST"==o?n+".length - 1":r},t.JavaScript.lists_getSublist=function(n){var o=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_MEMBER)||"[]",r=n.getFieldValue("WHERE1"),p=n.getFieldValue("WHERE2");if("FIRST"==r&&"LAST"==p)o+=".slice(0)";else if(o.match(/^\w+$/)||"FROM_END"!=r&&"FROM_START"==p){switch(r){case"FROM_START":var b=t.JavaScript.getAdjusted(n,"AT1");break;case"FROM_END":b=o+".length - "+(b=t.JavaScript.getAdjusted(n,"AT1",1,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"FIRST":b="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(p){case"FROM_START":n=t.JavaScript.getAdjusted(n,"AT2",1);break;case"FROM_END":n=o+".length - "+(n=t.JavaScript.getAdjusted(n,"AT2",0,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"LAST":n=o+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}o=o+".slice("+b+", "+n+")"}else{b=t.JavaScript.getAdjusted(n,"AT1"),n=t.JavaScript.getAdjusted(n,"AT2");var I=t.JavaScript.lists.getIndex_,x={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};o=t.JavaScript.provideFunction_("subsequence"+x[r]+x[p],["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+("FROM_END"==r||"FROM_START"==r?", at1":"")+("FROM_END"==p||"FROM_START"==p?", at2":"")+") {","  var start = "+I("sequence",r,"at1")+";","  var end = "+I("sequence",p,"at2")+" + 1;","  return sequence.slice(start, end);","}"])+"("+o+("FROM_END"==r||"FROM_START"==r?", "+b:"")+("FROM_END"==p||"FROM_START"==p?", "+n:"")+")"}return[o,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_sort=function(n){var o=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_FUNCTION_CALL)||"[]",r="1"===n.getFieldValue("DIRECTION")?1:-1;return n=n.getFieldValue("TYPE"),[o+".slice().sort("+t.JavaScript.provideFunction_("listsGetSortCompare",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(type, direction) {","  var compareFuncs = {",'    "NUMERIC": function(a, b) {',"        return Number(a) - Number(b); },",'    "TEXT": function(a, b) {',"        return a.toString() > b.toString() ? 1 : -1; },",'    "IGNORE_CASE": function(a, b) {',"        return a.toString().toLowerCase() > b.toString().toLowerCase() ? 1 : -1; },","  };","  var compare = compareFuncs[type];","  return function(a, b) { return compare(a, b) * direction; }","}"])+'("'+n+'", '+r+"))",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_split=function(n){var o=t.JavaScript.valueToCode(n,"INPUT",t.JavaScript.ORDER_MEMBER),r=t.JavaScript.valueToCode(n,"DELIM",t.JavaScript.ORDER_NONE)||"''";if("SPLIT"==(n=n.getFieldValue("MODE")))o||(o="''"),n="split";else{if("JOIN"!=n)throw Error("Unknown mode: "+n);o||(o="[]"),n="join"}return[o+"."+n+"("+r+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_reverse=function(n){return[(t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_FUNCTION_CALL)||"[]")+".slice().reverse()",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.logic={},t.JavaScript.controls_if=function(n){var o=0,r="";t.JavaScript.STATEMENT_PREFIX&&(r+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,n));do{var p=t.JavaScript.valueToCode(n,"IF"+o,t.JavaScript.ORDER_NONE)||"false",b=t.JavaScript.statementToCode(n,"DO"+o);t.JavaScript.STATEMENT_SUFFIX&&(b=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n),t.JavaScript.INDENT)+b),r+=(0<o?" else ":"")+"if ("+p+") {\n"+b+"}",++o}while(n.getInput("IF"+o));return(n.getInput("ELSE")||t.JavaScript.STATEMENT_SUFFIX)&&(b=t.JavaScript.statementToCode(n,"ELSE"),t.JavaScript.STATEMENT_SUFFIX&&(b=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n),t.JavaScript.INDENT)+b),r+=" else {\n"+b+"}"),r+"\n"},t.JavaScript.controls_ifelse=t.JavaScript.controls_if,t.JavaScript.logic_compare=function(n){var o={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[n.getFieldValue("OP")],r="=="==o||"!="==o?t.JavaScript.ORDER_EQUALITY:t.JavaScript.ORDER_RELATIONAL;return[(t.JavaScript.valueToCode(n,"A",r)||"0")+" "+o+" "+(n=t.JavaScript.valueToCode(n,"B",r)||"0"),r]},t.JavaScript.logic_operation=function(n){var o="AND"==n.getFieldValue("OP")?"&&":"||",r="&&"==o?t.JavaScript.ORDER_LOGICAL_AND:t.JavaScript.ORDER_LOGICAL_OR,p=t.JavaScript.valueToCode(n,"A",r);if(n=t.JavaScript.valueToCode(n,"B",r),p||n){var b="&&"==o?"true":"false";p||(p=b),n||(n=b)}else n=p="false";return[p+" "+o+" "+n,r]},t.JavaScript.logic_negate=function(n){var o=t.JavaScript.ORDER_LOGICAL_NOT;return["!"+(t.JavaScript.valueToCode(n,"BOOL",o)||"true"),o]},t.JavaScript.logic_boolean=function(n){return["TRUE"==n.getFieldValue("BOOL")?"true":"false",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.logic_null=function(n){return["null",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.logic_ternary=function(n){return[(t.JavaScript.valueToCode(n,"IF",t.JavaScript.ORDER_CONDITIONAL)||"false")+" ? "+(t.JavaScript.valueToCode(n,"THEN",t.JavaScript.ORDER_CONDITIONAL)||"null")+" : "+(n=t.JavaScript.valueToCode(n,"ELSE",t.JavaScript.ORDER_CONDITIONAL)||"null"),t.JavaScript.ORDER_CONDITIONAL]},t.JavaScript.loops={},t.JavaScript.controls_repeat_ext=function(n){var o=n.getField("TIMES")?String(Number(n.getFieldValue("TIMES"))):t.JavaScript.valueToCode(n,"TIMES",t.JavaScript.ORDER_ASSIGNMENT)||"0",r=t.JavaScript.statementToCode(n,"DO");r=t.JavaScript.addLoopTrap(r,n),n="";var p=t.JavaScript.nameDB_.getDistinctName("count",t.VARIABLE_CATEGORY_NAME),b=o;return o.match(/^\w+$/)||t.isNumber(o)||(n+="var "+(b=t.JavaScript.nameDB_.getDistinctName("repeat_end",t.VARIABLE_CATEGORY_NAME))+" = "+o+";\n"),n+"for (var "+p+" = 0; "+p+" < "+b+"; "+p+"++) {\n"+r+"}\n"},t.JavaScript.controls_repeat=t.JavaScript.controls_repeat_ext,t.JavaScript.controls_whileUntil=function(n){var o="UNTIL"==n.getFieldValue("MODE"),r=t.JavaScript.valueToCode(n,"BOOL",o?t.JavaScript.ORDER_LOGICAL_NOT:t.JavaScript.ORDER_NONE)||"false",p=t.JavaScript.statementToCode(n,"DO");return o&&(r="!"+r),"while ("+r+") {\n"+(p=t.JavaScript.addLoopTrap(p,n))+"}\n"},t.JavaScript.controls_for=function(n){var o=t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME),r=t.JavaScript.valueToCode(n,"FROM",t.JavaScript.ORDER_ASSIGNMENT)||"0",p=t.JavaScript.valueToCode(n,"TO",t.JavaScript.ORDER_ASSIGNMENT)||"0",b=t.JavaScript.valueToCode(n,"BY",t.JavaScript.ORDER_ASSIGNMENT)||"1",I=t.JavaScript.statementToCode(n,"DO");if(I=t.JavaScript.addLoopTrap(I,n),t.isNumber(r)&&t.isNumber(p)&&t.isNumber(b)){var x=Number(r)<=Number(p);n="for ("+o+" = "+r+"; "+o+(x?" <= ":" >= ")+p+"; "+o,n=(1==(o=Math.abs(Number(b)))?n+(x?"++":"--"):n+(x?" += ":" -= ")+o)+") {\n"+I+"}\n"}else n="",x=r,r.match(/^\w+$/)||t.isNumber(r)||(n+="var "+(x=t.JavaScript.nameDB_.getDistinctName(o+"_start",t.VARIABLE_CATEGORY_NAME))+" = "+r+";\n"),r=p,p.match(/^\w+$/)||t.isNumber(p)||(n+="var "+(r=t.JavaScript.nameDB_.getDistinctName(o+"_end",t.VARIABLE_CATEGORY_NAME))+" = "+p+";\n"),n+="var "+(p=t.JavaScript.nameDB_.getDistinctName(o+"_inc",t.VARIABLE_CATEGORY_NAME))+" = ",n=(n=t.isNumber(b)?n+(Math.abs(b)+";\n"):n+"Math.abs("+b+");\n")+"if ("+x+" > "+r+") {\n"+(t.JavaScript.INDENT+p)+" = -"+p+";\n",n+="}\n",n+="for ("+o+" = "+x+"; "+p+" >= 0 ? "+o+" <= "+r+" : "+o+" >= "+r+"; "+o+" += "+p+") {\n"+I+"}\n";return n},t.JavaScript.controls_forEach=function(n){var o=t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME),r=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_ASSIGNMENT)||"[]",p=t.JavaScript.statementToCode(n,"DO");p=t.JavaScript.addLoopTrap(p,n),n="";var b=r;return r.match(/^\w+$/)||(n+="var "+(b=t.JavaScript.nameDB_.getDistinctName(o+"_list",t.VARIABLE_CATEGORY_NAME))+" = "+r+";\n"),n+"for (var "+(r=t.JavaScript.nameDB_.getDistinctName(o+"_index",t.VARIABLE_CATEGORY_NAME))+" in "+b+") {\n"+(p=t.JavaScript.INDENT+o+" = "+b+"["+r+"];\n"+p)+"}\n"},t.JavaScript.controls_flow_statements=function(n){var o="";if(t.JavaScript.STATEMENT_PREFIX&&(o+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,n)),t.JavaScript.STATEMENT_SUFFIX&&(o+=t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n)),t.JavaScript.STATEMENT_PREFIX){var r=t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(n);r&&!r.suppressPrefixSuffix&&(o+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,r))}switch(n.getFieldValue("FLOW")){case"BREAK":return o+"break;\n";case"CONTINUE":return o+"continue;\n"}throw Error("Unknown flow statement.")},t.JavaScript.math={},t.JavaScript.math_number=function(n){return[n=Number(n.getFieldValue("NUM")),0<=n?t.JavaScript.ORDER_ATOMIC:t.JavaScript.ORDER_UNARY_NEGATION]},t.JavaScript.math_arithmetic=function(n){var o={ADD:[" + ",t.JavaScript.ORDER_ADDITION],MINUS:[" - ",t.JavaScript.ORDER_SUBTRACTION],MULTIPLY:[" * ",t.JavaScript.ORDER_MULTIPLICATION],DIVIDE:[" / ",t.JavaScript.ORDER_DIVISION],POWER:[null,t.JavaScript.ORDER_NONE]}[n.getFieldValue("OP")],r=o[0],p=t.JavaScript.valueToCode(n,"A",o=o[1])||"0";return n=t.JavaScript.valueToCode(n,"B",o)||"0",r?[p+r+n,o]:["Math.pow("+p+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_single=function(n){var o=n.getFieldValue("OP");if("NEG"==o)return"-"==(n=t.JavaScript.valueToCode(n,"NUM",t.JavaScript.ORDER_UNARY_NEGATION)||"0")[0]&&(n=" "+n),["-"+n,t.JavaScript.ORDER_UNARY_NEGATION];switch(n="SIN"==o||"COS"==o||"TAN"==o?t.JavaScript.valueToCode(n,"NUM",t.JavaScript.ORDER_DIVISION)||"0":t.JavaScript.valueToCode(n,"NUM",t.JavaScript.ORDER_NONE)||"0",o){case"ABS":var r="Math.abs("+n+")";break;case"ROOT":r="Math.sqrt("+n+")";break;case"LN":r="Math.log("+n+")";break;case"EXP":r="Math.exp("+n+")";break;case"POW10":r="Math.pow(10,"+n+")";break;case"ROUND":r="Math.round("+n+")";break;case"ROUNDUP":r="Math.ceil("+n+")";break;case"ROUNDDOWN":r="Math.floor("+n+")";break;case"SIN":r="Math.sin("+n+" / 180 * Math.PI)";break;case"COS":r="Math.cos("+n+" / 180 * Math.PI)";break;case"TAN":r="Math.tan("+n+" / 180 * Math.PI)"}if(r)return[r,t.JavaScript.ORDER_FUNCTION_CALL];switch(o){case"LOG10":r="Math.log("+n+") / Math.log(10)";break;case"ASIN":r="Math.asin("+n+") / Math.PI * 180";break;case"ACOS":r="Math.acos("+n+") / Math.PI * 180";break;case"ATAN":r="Math.atan("+n+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+o)}return[r,t.JavaScript.ORDER_DIVISION]},t.JavaScript.math_constant=function(n){return{PI:["Math.PI",t.JavaScript.ORDER_MEMBER],E:["Math.E",t.JavaScript.ORDER_MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",t.JavaScript.ORDER_DIVISION],SQRT2:["Math.SQRT2",t.JavaScript.ORDER_MEMBER],SQRT1_2:["Math.SQRT1_2",t.JavaScript.ORDER_MEMBER],INFINITY:["Infinity",t.JavaScript.ORDER_ATOMIC]}[n.getFieldValue("CONSTANT")]},t.JavaScript.math_number_property=function(n){var o=t.JavaScript.valueToCode(n,"NUMBER_TO_CHECK",t.JavaScript.ORDER_MODULUS)||"0",r=n.getFieldValue("PROPERTY");if("PRIME"==r)return[t.JavaScript.provideFunction_("mathIsPrime",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(n) {","  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods","  if (n == 2 || n == 3) {","    return true;","  }","  // False if n is NaN, negative, is 1, or not whole.","  // And false if n is divisible by 2 or 3.","  if (isNaN(n) || n <= 1 || n % 1 != 0 || n % 2 == 0 || n % 3 == 0) {","    return false;","  }","  // Check all the numbers of form 6k +/- 1, up to sqrt(n).","  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {","    if (n % (x - 1) == 0 || n % (x + 1) == 0) {","      return false;","    }","  }","  return true;","}"])+"("+o+")",t.JavaScript.ORDER_FUNCTION_CALL];switch(r){case"EVEN":var p=o+" % 2 == 0";break;case"ODD":p=o+" % 2 == 1";break;case"WHOLE":p=o+" % 1 == 0";break;case"POSITIVE":p=o+" > 0";break;case"NEGATIVE":p=o+" < 0";break;case"DIVISIBLE_BY":p=o+" % "+(n=t.JavaScript.valueToCode(n,"DIVISOR",t.JavaScript.ORDER_MODULUS)||"0")+" == 0"}return[p,t.JavaScript.ORDER_EQUALITY]},t.JavaScript.math_change=function(n){var o=t.JavaScript.valueToCode(n,"DELTA",t.JavaScript.ORDER_ADDITION)||"0";return(n=t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME))+" = (typeof "+n+" == 'number' ? "+n+" : 0) + "+o+";\n"},t.JavaScript.math_round=t.JavaScript.math_single,t.JavaScript.math_trig=t.JavaScript.math_single,t.JavaScript.math_on_list=function(n){var o=n.getFieldValue("OP");switch(o){case"SUM":n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_MEMBER)||"[]",n+=".reduce(function(x, y) {return x + y;})";break;case"MIN":n="Math.min.apply(null, "+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"MAX":n="Math.max.apply(null, "+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"AVERAGE":n=(o=t.JavaScript.provideFunction_("mathMean",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {","  return myList.reduce(function(x, y) {return x + y;}) / myList.length;","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"MEDIAN":n=(o=t.JavaScript.provideFunction_("mathMedian",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {","  var localList = myList.filter(function (x) {return typeof x == 'number';});","  if (!localList.length) return null;","  localList.sort(function(a, b) {return b - a;});","  if (localList.length % 2 == 0) {","    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;","  } else {","    return localList[(localList.length - 1) / 2];","  }","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"MODE":n=(o=t.JavaScript.provideFunction_("mathModes",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(values) {","  var modes = [];","  var counts = [];","  var maxCount = 0;","  for (var i = 0; i < values.length; i++) {","    var value = values[i];","    var found = false;","    var thisCount;","    for (var j = 0; j < counts.length; j++) {","      if (counts[j][0] === value) {","        thisCount = ++counts[j][1];","        found = true;","        break;","      }","    }","    if (!found) {","      counts.push([value, 1]);","      thisCount = 1;","    }","    maxCount = Math.max(thisCount, maxCount);","  }","  for (var j = 0; j < counts.length; j++) {","    if (counts[j][1] == maxCount) {","        modes.push(counts[j][0]);","    }","  }","  return modes;","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"STD_DEV":n=(o=t.JavaScript.provideFunction_("mathStandardDeviation",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(numbers) {","  var n = numbers.length;","  if (!n) return null;","  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;","  var variance = 0;","  for (var j = 0; j < n; j++) {","    variance += Math.pow(numbers[j] - mean, 2);","  }","  variance = variance / n;","  return Math.sqrt(variance);","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"RANDOM":n=(o=t.JavaScript.provideFunction_("mathRandomList",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list) {","  var x = Math.floor(Math.random() * list.length);","  return list[x];","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;default:throw Error("Unknown operator: "+o)}return[n,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_modulo=function(n){return[(t.JavaScript.valueToCode(n,"DIVIDEND",t.JavaScript.ORDER_MODULUS)||"0")+" % "+(n=t.JavaScript.valueToCode(n,"DIVISOR",t.JavaScript.ORDER_MODULUS)||"0"),t.JavaScript.ORDER_MODULUS]},t.JavaScript.math_constrain=function(n){return["Math.min(Math.max("+(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_NONE)||"0")+", "+(t.JavaScript.valueToCode(n,"LOW",t.JavaScript.ORDER_NONE)||"0")+"), "+(n=t.JavaScript.valueToCode(n,"HIGH",t.JavaScript.ORDER_NONE)||"Infinity")+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_random_int=function(n){var o=t.JavaScript.valueToCode(n,"FROM",t.JavaScript.ORDER_NONE)||"0";return n=t.JavaScript.valueToCode(n,"TO",t.JavaScript.ORDER_NONE)||"0",[t.JavaScript.provideFunction_("mathRandomInt",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(a, b) {","  if (a > b) {","    // Swap a and b to ensure a is smaller.","    var c = a;","    a = b;","    b = c;","  }","  return Math.floor(Math.random() * (b - a + 1) + a);","}"])+"("+o+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_random_float=function(n){return["Math.random()",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_atan2=function(n){var o=t.JavaScript.valueToCode(n,"X",t.JavaScript.ORDER_NONE)||"0";return["Math.atan2("+(t.JavaScript.valueToCode(n,"Y",t.JavaScript.ORDER_NONE)||"0")+", "+o+") / Math.PI * 180",t.JavaScript.ORDER_DIVISION]},t.JavaScript.procedures={},t.JavaScript.procedures_defreturn=function(n){var o=t.JavaScript.nameDB_.getName(n.getFieldValue("NAME"),t.PROCEDURE_CATEGORY_NAME),r="";t.JavaScript.STATEMENT_PREFIX&&(r+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,n)),t.JavaScript.STATEMENT_SUFFIX&&(r+=t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n)),r&&(r=t.JavaScript.prefixLines(r,t.JavaScript.INDENT));var p="";t.JavaScript.INFINITE_LOOP_TRAP&&(p=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.INFINITE_LOOP_TRAP,n),t.JavaScript.INDENT));var b=t.JavaScript.statementToCode(n,"STACK"),I=t.JavaScript.valueToCode(n,"RETURN",t.JavaScript.ORDER_NONE)||"",x="";b&&I&&(x=r),I&&(I=t.JavaScript.INDENT+"return "+I+";\n");for(var k=[],Y=n.getVars(),X=0;X<Y.length;X++)k[X]=t.JavaScript.nameDB_.getName(Y[X],t.VARIABLE_CATEGORY_NAME);return r="function "+o+"("+k.join(", ")+") {\n"+r+p+b+x+I+"}",r=t.JavaScript.scrub_(n,r),t.JavaScript.definitions_["%"+o]=r,null},t.JavaScript.procedures_defnoreturn=t.JavaScript.procedures_defreturn,t.JavaScript.procedures_callreturn=function(n){for(var o=t.JavaScript.nameDB_.getName(n.getFieldValue("NAME"),t.PROCEDURE_CATEGORY_NAME),r=[],p=n.getVars(),b=0;b<p.length;b++)r[b]=t.JavaScript.valueToCode(n,"ARG"+b,t.JavaScript.ORDER_NONE)||"null";return[o+"("+r.join(", ")+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.procedures_callnoreturn=function(n){return t.JavaScript.procedures_callreturn(n)[0]+";\n"},t.JavaScript.procedures_ifreturn=function(n){var o="if ("+(t.JavaScript.valueToCode(n,"CONDITION",t.JavaScript.ORDER_NONE)||"false")+") {\n";return t.JavaScript.STATEMENT_SUFFIX&&(o+=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n),t.JavaScript.INDENT)),n.hasReturnValue_?(n=t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_NONE)||"null",o+=t.JavaScript.INDENT+"return "+n+";\n"):o+=t.JavaScript.INDENT+"return;\n",o+"}\n"},t.JavaScript.texts={},t.JavaScript.text=function(n){return[t.JavaScript.quote_(n.getFieldValue("TEXT")),t.JavaScript.ORDER_ATOMIC]},t.JavaScript.text_multiline=function(n){var o=-1!=(n=t.JavaScript.multiline_quote_(n.getFieldValue("TEXT"))).indexOf("+")?t.JavaScript.ORDER_ADDITION:t.JavaScript.ORDER_ATOMIC;return[n,o]},t.JavaScript.text.forceString_=function(n){return t.JavaScript.text.forceString_.strRegExp.test(n)?[n,t.JavaScript.ORDER_ATOMIC]:["String("+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text.forceString_.strRegExp=/^\s*'([^']|\\')*'\s*$/,t.JavaScript.text_join=function(n){switch(n.itemCount_){case 0:return["''",t.JavaScript.ORDER_ATOMIC];case 1:return n=t.JavaScript.valueToCode(n,"ADD0",t.JavaScript.ORDER_NONE)||"''",t.JavaScript.text.forceString_(n);case 2:var o=t.JavaScript.valueToCode(n,"ADD0",t.JavaScript.ORDER_NONE)||"''";return n=t.JavaScript.valueToCode(n,"ADD1",t.JavaScript.ORDER_NONE)||"''",[n=t.JavaScript.text.forceString_(o)[0]+" + "+t.JavaScript.text.forceString_(n)[0],t.JavaScript.ORDER_ADDITION];default:o=Array(n.itemCount_);for(var r=0;r<n.itemCount_;r++)o[r]=t.JavaScript.valueToCode(n,"ADD"+r,t.JavaScript.ORDER_NONE)||"''";return[n="["+o.join(",")+"].join('')",t.JavaScript.ORDER_FUNCTION_CALL]}},t.JavaScript.text_append=function(n){var o=t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME);return n=t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''",o+" += "+t.JavaScript.text.forceString_(n)[0]+";\n"},t.JavaScript.text_length=function(n){return[(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"''")+".length",t.JavaScript.ORDER_MEMBER]},t.JavaScript.text_isEmpty=function(n){return["!"+(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"''")+".length",t.JavaScript.ORDER_LOGICAL_NOT]},t.JavaScript.text_indexOf=function(n){var o="FIRST"==n.getFieldValue("END")?"indexOf":"lastIndexOf",r=t.JavaScript.valueToCode(n,"FIND",t.JavaScript.ORDER_NONE)||"''";return o=(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"''")+"."+o+"("+r+")",n.workspace.options.oneBasedIndex?[o+" + 1",t.JavaScript.ORDER_ADDITION]:[o,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_charAt=function(n){var o=n.getFieldValue("WHERE")||"FROM_START",r=t.JavaScript.valueToCode(n,"VALUE","RANDOM"==o?t.JavaScript.ORDER_NONE:t.JavaScript.ORDER_MEMBER)||"''";switch(o){case"FIRST":return[r+".charAt(0)",t.JavaScript.ORDER_FUNCTION_CALL];case"LAST":return[r+".slice(-1)",t.JavaScript.ORDER_FUNCTION_CALL];case"FROM_START":return[r+".charAt("+(n=t.JavaScript.getAdjusted(n,"AT"))+")",t.JavaScript.ORDER_FUNCTION_CALL];case"FROM_END":return[r+".slice("+(n=t.JavaScript.getAdjusted(n,"AT",1,!0))+").charAt(0)",t.JavaScript.ORDER_FUNCTION_CALL];case"RANDOM":return[t.JavaScript.provideFunction_("textRandomLetter",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(text) {","  var x = Math.floor(Math.random() * text.length);","  return text[x];","}"])+"("+r+")",t.JavaScript.ORDER_FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},t.JavaScript.text.getIndex_=function(n,o,r){return"FIRST"==o?"0":"FROM_END"==o?n+".length - 1 - "+r:"LAST"==o?n+".length - 1":r},t.JavaScript.text_getSubstring=function(n){var o=n.getFieldValue("WHERE1"),r=n.getFieldValue("WHERE2"),p="FROM_END"!=o&&"LAST"!=o&&"FROM_END"!=r&&"LAST"!=r,b=t.JavaScript.valueToCode(n,"STRING",p?t.JavaScript.ORDER_MEMBER:t.JavaScript.ORDER_NONE)||"''";if("FIRST"==o&&"LAST"==r)return[b,t.JavaScript.ORDER_NONE];if(b.match(/^'?\w+'?$/)||p){switch(o){case"FROM_START":p=t.JavaScript.getAdjusted(n,"AT1");break;case"FROM_END":p=b+".length - "+(p=t.JavaScript.getAdjusted(n,"AT1",1,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"FIRST":p="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(r){case"FROM_START":n=t.JavaScript.getAdjusted(n,"AT2",1);break;case"FROM_END":n=b+".length - "+(n=t.JavaScript.getAdjusted(n,"AT2",0,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"LAST":n=b+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}o=b+".slice("+p+", "+n+")"}else{p=t.JavaScript.getAdjusted(n,"AT1"),n=t.JavaScript.getAdjusted(n,"AT2");var I=t.JavaScript.text.getIndex_,x={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};o=t.JavaScript.provideFunction_("subsequence"+x[o]+x[r],["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+("FROM_END"==o||"FROM_START"==o?", at1":"")+("FROM_END"==r||"FROM_START"==r?", at2":"")+") {","  var start = "+I("sequence",o,"at1")+";","  var end = "+I("sequence",r,"at2")+" + 1;","  return sequence.slice(start, end);","}"])+"("+b+("FROM_END"==o||"FROM_START"==o?", "+p:"")+("FROM_END"==r||"FROM_START"==r?", "+n:"")+")"}return[o,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_changeCase=function(n){var o={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[n.getFieldValue("CASE")];return n=t.JavaScript.valueToCode(n,"TEXT",o?t.JavaScript.ORDER_MEMBER:t.JavaScript.ORDER_NONE)||"''",[o?n+o:t.JavaScript.provideFunction_("textToTitleCase",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(str) {","  return str.replace(/\\S+/g,","      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});","}"])+"("+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_trim=function(n){var o={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[n.getFieldValue("MODE")];return[(t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_MEMBER)||"''")+o,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_print=function(n){return"window.alert("+(t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''")+");\n"},t.JavaScript.text_prompt_ext=function(n){var o="window.prompt("+(n.getField("TEXT")?t.JavaScript.quote_(n.getFieldValue("TEXT")):t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''")+")";return"NUMBER"==n.getFieldValue("TYPE")&&(o="Number("+o+")"),[o,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_prompt=t.JavaScript.text_prompt_ext,t.JavaScript.text_count=function(n){var o=t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''";return n=t.JavaScript.valueToCode(n,"SUB",t.JavaScript.ORDER_NONE)||"''",[t.JavaScript.provideFunction_("textCount",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle) {","  if (needle.length === 0) {","    return haystack.length + 1;","  } else {","    return haystack.split(needle).length - 1;","  }","}"])+"("+o+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_replace=function(n){var o=t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''",r=t.JavaScript.valueToCode(n,"FROM",t.JavaScript.ORDER_NONE)||"''";return n=t.JavaScript.valueToCode(n,"TO",t.JavaScript.ORDER_NONE)||"''",[t.JavaScript.provideFunction_("textReplace",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle, replacement) {",'  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g,"\\\\$1")','                 .replace(/\\x08/g,"\\\\x08");',"  return haystack.replace(new RegExp(needle, 'g'), replacement);","}"])+"("+o+", "+r+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_reverse=function(n){return[(t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_MEMBER)||"''")+".split('').reverse().join('')",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.variables={},t.JavaScript.variables_get=function(n){return[t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME),t.JavaScript.ORDER_ATOMIC]},t.JavaScript.variables_set=function(n){var o=t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_ASSIGNMENT)||"0";return t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME)+" = "+o+";\n"},t.JavaScript.variablesDynamic={},t.JavaScript.variables_get_dynamic=t.JavaScript.variables_get,t.JavaScript.variables_set_dynamic=t.JavaScript.variables_set,t.JavaScript})?T.apply(U,a):T)&&(B.exports=e)},26436:function(B,U,v){var T,a,e;a=[v(47155)],void 0!==(e="function"==typeof(T=function(t){return(t={Msg:{}}).Msg.ADD_COMMENT="Add Comment",t.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",t.Msg.CHANGE_VALUE_TITLE="Change value:",t.Msg.CLEAN_UP="Clean up Blocks",t.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",t.Msg.COLLAPSE_ALL="Collapse Blocks",t.Msg.COLLAPSE_BLOCK="Collapse Block",t.Msg.COLOUR_BLEND_COLOUR1="colour 1",t.Msg.COLOUR_BLEND_COLOUR2="colour 2",t.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",t.Msg.COLOUR_BLEND_RATIO="ratio",t.Msg.COLOUR_BLEND_TITLE="blend",t.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",t.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",t.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",t.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",t.Msg.COLOUR_RANDOM_TITLE="random colour",t.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",t.Msg.COLOUR_RGB_BLUE="blue",t.Msg.COLOUR_RGB_GREEN="green",t.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",t.Msg.COLOUR_RGB_RED="red",t.Msg.COLOUR_RGB_TITLE="colour with",t.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",t.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",t.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",t.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",t.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",t.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",t.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",t.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",t.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",t.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",t.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",t.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",t.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",t.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",t.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",t.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",t.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",t.Msg.CONTROLS_IF_MSG_ELSE="else",t.Msg.CONTROLS_IF_MSG_ELSEIF="else if",t.Msg.CONTROLS_IF_MSG_IF="if",t.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",t.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",t.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",t.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",t.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",t.Msg.CONTROLS_REPEAT_INPUT_DO="do",t.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",t.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",t.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",t.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",t.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",t.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",t.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",t.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",t.Msg.DELETE_BLOCK="Delete Block",t.Msg.DELETE_VARIABLE="Delete the '%1' variable",t.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",t.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",t.Msg.DISABLE_BLOCK="Disable Block",t.Msg.DUPLICATE_BLOCK="Duplicate",t.Msg.DUPLICATE_COMMENT="Duplicate Comment",t.Msg.ENABLE_BLOCK="Enable Block",t.Msg.EXPAND_ALL="Expand Blocks",t.Msg.EXPAND_BLOCK="Expand Block",t.Msg.EXTERNAL_INPUTS="External Inputs",t.Msg.HELP="Help",t.Msg.INLINE_INPUTS="Inline Inputs",t.Msg.IOS_CANCEL="Cancel",t.Msg.IOS_ERROR="Error",t.Msg.IOS_OK="OK",t.Msg.IOS_PROCEDURES_ADD_INPUT="+ Add Input",t.Msg.IOS_PROCEDURES_ALLOW_STATEMENTS="Allow statements",t.Msg.IOS_PROCEDURES_DUPLICATE_INPUTS_ERROR="This function has duplicate inputs.",t.Msg.IOS_PROCEDURES_INPUTS="INPUTS",t.Msg.IOS_VARIABLES_ADD_BUTTON="Add",t.Msg.IOS_VARIABLES_ADD_VARIABLE="+ Add Variable",t.Msg.IOS_VARIABLES_DELETE_BUTTON="Delete",t.Msg.IOS_VARIABLES_EMPTY_NAME_ERROR="You can't use an empty variable name.",t.Msg.IOS_VARIABLES_RENAME_BUTTON="Rename",t.Msg.IOS_VARIABLES_VARIABLE_NAME="Variable name",t.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",t.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",t.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",t.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",t.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",t.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",t.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",t.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",t.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",t.Msg.LISTS_GET_INDEX_FIRST="first",t.Msg.LISTS_GET_INDEX_FROM_END="# from end",t.Msg.LISTS_GET_INDEX_FROM_START="#",t.Msg.LISTS_GET_INDEX_GET="get",t.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",t.Msg.LISTS_GET_INDEX_LAST="last",t.Msg.LISTS_GET_INDEX_RANDOM="random",t.Msg.LISTS_GET_INDEX_REMOVE="remove",t.Msg.LISTS_GET_INDEX_TAIL="",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",t.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",t.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",t.Msg.LISTS_GET_SUBLIST_END_LAST="to last",t.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",t.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",t.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",t.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",t.Msg.LISTS_GET_SUBLIST_TAIL="",t.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",t.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",t.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",t.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",t.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",t.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",t.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",t.Msg.LISTS_INLIST="in list",t.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",t.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",t.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",t.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",t.Msg.LISTS_LENGTH_TITLE="length of %1",t.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",t.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",t.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",t.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",t.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",t.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",t.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",t.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",t.Msg.LISTS_SET_INDEX_INPUT_TO="as",t.Msg.LISTS_SET_INDEX_INSERT="insert at",t.Msg.LISTS_SET_INDEX_SET="set",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",t.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",t.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",t.Msg.LISTS_SORT_ORDER_DESCENDING="descending",t.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",t.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",t.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",t.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",t.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",t.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",t.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",t.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",t.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",t.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",t.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",t.Msg.LOGIC_BOOLEAN_FALSE="false",t.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",t.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",t.Msg.LOGIC_BOOLEAN_TRUE="true",t.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",t.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",t.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",t.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",t.Msg.LOGIC_NEGATE_TITLE="not %1",t.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",t.Msg.LOGIC_NULL="null",t.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",t.Msg.LOGIC_NULL_TOOLTIP="Returns null.",t.Msg.LOGIC_OPERATION_AND="and",t.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",t.Msg.LOGIC_OPERATION_OR="or",t.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",t.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",t.Msg.LOGIC_TERNARY_CONDITION="test",t.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",t.Msg.LOGIC_TERNARY_IF_FALSE="if false",t.Msg.LOGIC_TERNARY_IF_TRUE="if true",t.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",t.Msg.MATH_ADDITION_SYMBOL="+",t.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",t.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",t.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",t.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",t.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",t.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",t.Msg.MATH_CHANGE_TITLE="change %1 by %2",t.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",t.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",t.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants: \u03c0 (3.141\u2026), e (2.718\u2026), \u03c6 (1.618\u2026), sqrt(2) (1.414\u2026), sqrt(\xbd) (0.707\u2026), or \u221e (infinity).",t.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",t.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",t.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",t.Msg.MATH_DIVISION_SYMBOL="\xf7",t.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",t.Msg.MATH_IS_EVEN="is even",t.Msg.MATH_IS_NEGATIVE="is negative",t.Msg.MATH_IS_ODD="is odd",t.Msg.MATH_IS_POSITIVE="is positive",t.Msg.MATH_IS_PRIME="is prime",t.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",t.Msg.MATH_IS_WHOLE="is whole",t.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",t.Msg.MATH_MODULO_TITLE="remainder of %1 \xf7 %2",t.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",t.Msg.MATH_MULTIPLICATION_SYMBOL="\xd7",t.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",t.Msg.MATH_NUMBER_TOOLTIP="A number.",t.Msg.MATH_ONLIST_HELPURL="",t.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",t.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",t.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",t.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",t.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",t.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",t.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",t.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",t.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",t.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",t.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",t.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",t.Msg.MATH_POWER_SYMBOL="^",t.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",t.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",t.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",t.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",t.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",t.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",t.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",t.Msg.MATH_ROUND_OPERATOR_ROUND="round",t.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",t.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",t.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",t.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",t.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",t.Msg.MATH_SINGLE_OP_ROOT="square root",t.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",t.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",t.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",t.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",t.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",t.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",t.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",t.Msg.MATH_SUBTRACTION_SYMBOL="-",t.Msg.MATH_TRIG_ACOS="acos",t.Msg.MATH_TRIG_ASIN="asin",t.Msg.MATH_TRIG_ATAN="atan",t.Msg.MATH_TRIG_COS="cos",t.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",t.Msg.MATH_TRIG_SIN="sin",t.Msg.MATH_TRIG_TAN="tan",t.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",t.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",t.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",t.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",t.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",t.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",t.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",t.Msg.NEW_NUMBER_VARIABLE="Create number variable...",t.Msg.NEW_STRING_VARIABLE="Create string variable...",t.Msg.NEW_VARIABLE="Create variable...",t.Msg.NEW_VARIABLE_TITLE="New variable name:",t.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",t.Msg.ORDINAL_NUMBER_SUFFIX="",t.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",t.Msg.PROCEDURES_BEFORE_PARAMS="with:",t.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",t.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",t.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",t.Msg.PROCEDURES_CREATE_DO="Create '%1'",t.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",t.Msg.PROCEDURES_DEFNORETURN_DO="",t.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",t.Msg.PROCEDURES_DEFNORETURN_TITLE="to",t.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",t.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_DEFRETURN_RETURN="return",t.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",t.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",t.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",t.Msg.PROCEDURES_IFRETURN_HELPURL="http://c2.com/cgi/wiki?GuardClause",t.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",t.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",t.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",t.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",t.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",t.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",t.Msg.REDO="Redo",t.Msg.REMOVE_COMMENT="Remove Comment",t.Msg.RENAME_VARIABLE="Rename variable...",t.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",t.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",t.Msg.TEXT_APPEND_TITLE="to %1 append text %2",t.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",t.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",t.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",t.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",t.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",t.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",t.Msg.TEXT_CHARAT_FIRST="get first letter",t.Msg.TEXT_CHARAT_FROM_END="get letter # from end",t.Msg.TEXT_CHARAT_FROM_START="get letter #",t.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",t.Msg.TEXT_CHARAT_LAST="get last letter",t.Msg.TEXT_CHARAT_RANDOM="get random letter",t.Msg.TEXT_CHARAT_TAIL="",t.Msg.TEXT_CHARAT_TITLE="in text %1 %2",t.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",t.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",t.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",t.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",t.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",t.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",t.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",t.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",t.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",t.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",t.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",t.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",t.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",t.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",t.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",t.Msg.TEXT_GET_SUBSTRING_TAIL="",t.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",t.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",t.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",t.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",t.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",t.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",t.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",t.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",t.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",t.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",t.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",t.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",t.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",t.Msg.TEXT_LENGTH_TITLE="length of %1",t.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",t.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",t.Msg.TEXT_PRINT_TITLE="print %1",t.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",t.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",t.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",t.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",t.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",t.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",t.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",t.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",t.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",t.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",t.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",t.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",t.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",t.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",t.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",t.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",t.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",t.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",t.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",t.Msg.TODAY="Today",t.Msg.UNDO="Undo",t.Msg.UNNAMED_KEY="unnamed",t.Msg.VARIABLES_DEFAULT_NAME="item",t.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",t.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",t.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",t.Msg.VARIABLES_SET="set %1 to %2",t.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",t.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",t.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",t.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",t.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",t.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",t.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",t.Msg.CONTROLS_FOREACH_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_FOR_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=t.Msg.CONTROLS_IF_MSG_ELSEIF,t.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=t.Msg.CONTROLS_IF_MSG_ELSE,t.Msg.CONTROLS_IF_IF_TITLE_IF=t.Msg.CONTROLS_IF_MSG_IF,t.Msg.CONTROLS_IF_MSG_THEN=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.LISTS_CREATE_WITH_ITEM_TITLE=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.LISTS_GET_INDEX_HELPURL=t.Msg.LISTS_INDEX_OF_HELPURL,t.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.MATH_CHANGE_TITLE_ITEM=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.PROCEDURES_DEFRETURN_COMMENT=t.Msg.PROCEDURES_DEFNORETURN_COMMENT,t.Msg.PROCEDURES_DEFRETURN_DO=t.Msg.PROCEDURES_DEFNORETURN_DO,t.Msg.PROCEDURES_DEFRETURN_PROCEDURE=t.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,t.Msg.PROCEDURES_DEFRETURN_TITLE=t.Msg.PROCEDURES_DEFNORETURN_TITLE,t.Msg.TEXT_APPEND_VARIABLE=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.MATH_HUE="230",t.Msg.LOOPS_HUE="120",t.Msg.LISTS_HUE="260",t.Msg.LOGIC_HUE="210",t.Msg.VARIABLES_HUE="330",t.Msg.TEXTS_HUE="160",t.Msg.PROCEDURES_HUE="290",t.Msg.COLOUR_HUE="20",t.Msg.VARIABLES_DYNAMIC_HUE="310",t.Msg})?T.apply(U,a):T)&&(B.exports=e)},56675:B=>{!function(){"use strict";B.exports=function(v){return(v instanceof Buffer?v:Buffer.from(v.toString(),"binary")).toString("base64")}}()},29448:(B,U,v)=>{"use strict";var T=v(93602),a=v(32321),e=a(T("String.prototype.indexOf"));B.exports=function(n,o){var r=T(n,!!o);return"function"==typeof r&&e(n,".prototype.")>-1?a(r):r}},32321:(B,U,v)=>{"use strict";var T=v(21857),a=v(93602),e=a("%Function.prototype.apply%"),t=a("%Function.prototype.call%"),n=a("%Reflect.apply%",!0)||T.call(t,e),o=a("%Object.getOwnPropertyDescriptor%",!0),r=a("%Object.defineProperty%",!0),p=a("%Math.max%");if(r)try{r({},"a",{value:1})}catch(I){r=null}B.exports=function(x){var k=n(T,t,arguments);if(o&&r){var Y=o(k,"length");Y.configurable&&r(k,"length",{value:1+p(0,x.length-(arguments.length-1))})}return k};var b=function(){return n(T,e,arguments)};r?r(B.exports,"apply",{value:b}):B.exports.apply=b},66571:(B,U)=>{"use strict";U.parse=function(r,p){if("string"!=typeof r)throw new TypeError("argument str must be a string");for(var b={},I=p||{},x=r.split(a),k=I.decode||v,Y=0;Y<x.length;Y++){var X=x[Y],it=X.indexOf("=");if(!(it<0)){var rt=X.substr(0,it).trim(),ct=X.substr(++it,X.length).trim();'"'==ct[0]&&(ct=ct.slice(1,-1)),null==b[rt]&&(b[rt]=o(ct,k))}}return b},U.serialize=function(r,p,b){var I=b||{},x=I.encode||T;if("function"!=typeof x)throw new TypeError("option encode is invalid");if(!e.test(r))throw new TypeError("argument name is invalid");var k=x(p);if(k&&!e.test(k))throw new TypeError("argument val is invalid");var Y=r+"="+k;if(null!=I.maxAge){var X=I.maxAge-0;if(isNaN(X)||!isFinite(X))throw new TypeError("option maxAge is invalid");Y+="; Max-Age="+Math.floor(X)}if(I.domain){if(!e.test(I.domain))throw new TypeError("option domain is invalid");Y+="; Domain="+I.domain}if(I.path){if(!e.test(I.path))throw new TypeError("option path is invalid");Y+="; Path="+I.path}if(I.expires){if("function"!=typeof I.expires.toUTCString)throw new TypeError("option expires is invalid");Y+="; Expires="+I.expires.toUTCString()}if(I.httpOnly&&(Y+="; HttpOnly"),I.secure&&(Y+="; Secure"),I.sameSite)switch("string"==typeof I.sameSite?I.sameSite.toLowerCase():I.sameSite){case!0:Y+="; SameSite=Strict";break;case"lax":Y+="; SameSite=Lax";break;case"strict":Y+="; SameSite=Strict";break;case"none":Y+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return Y};var v=decodeURIComponent,T=encodeURIComponent,a=/; */,e=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function o(r,p){try{return p(r)}catch(b){return r}}},23813:(B,U,v)=>{v(62009),v(46601);var T=v(83271);B.exports=T.Array.from},89740:(B,U,v)=>{v(67011);var T=v(83271);B.exports=T.Array.isArray},53247:(B,U,v)=>{v(94570);var T=v(2159);B.exports=T("Array").concat},34014:(B,U,v)=>{v(64741),v(97045);var T=v(2159);B.exports=T("Array").entries},80228:(B,U,v)=>{v(76613);var T=v(2159);B.exports=T("Array").filter},92606:(B,U,v)=>{v(15963);var T=v(2159);B.exports=T("Array").find},47957:(B,U,v)=>{v(28436);var T=v(2159);B.exports=T("Array").forEach},75532:(B,U,v)=>{v(82680);var T=v(2159);B.exports=T("Array").includes},18329:(B,U,v)=>{v(73713);var T=v(2159);B.exports=T("Array").indexOf},59157:(B,U,v)=>{v(48303);var T=v(2159);B.exports=T("Array").map},78928:(B,U,v)=>{v(96682);var T=v(2159);B.exports=T("Array").slice},60660:(B,U,v)=>{v(92241);var T=v(2159);B.exports=T("Array").splice},48873:(B,U,v)=>{v(64741),v(62009);var T=v(62439);B.exports=T},233:(B,U,v)=>{var T=v(28833),a=v(53247),e=Array.prototype;B.exports=function(t){var n=t.concat;return t===e||T(e,t)&&n===e.concat?a:n}},32263:(B,U,v)=>{var T=v(28833),a=v(80228),e=Array.prototype;B.exports=function(t){var n=t.filter;return t===e||T(e,t)&&n===e.filter?a:n}},81754:(B,U,v)=>{var T=v(28833),a=v(92606),e=Array.prototype;B.exports=function(t){var n=t.find;return t===e||T(e,t)&&n===e.find?a:n}},46397:(B,U,v)=>{var T=v(28833),a=v(75532),e=v(65106),t=Array.prototype,n=String.prototype;B.exports=function(o){var r=o.includes;return o===t||T(t,o)&&r===t.includes?a:"string"==typeof o||o===n||T(n,o)&&r===n.includes?e:r}},88699:(B,U,v)=>{var T=v(28833),a=v(18329),e=Array.prototype;B.exports=function(t){var n=t.indexOf;return t===e||T(e,t)&&n===e.indexOf?a:n}},24454:(B,U,v)=>{var T=v(28833),a=v(59157),e=Array.prototype;B.exports=function(t){var n=t.map;return t===e||T(e,t)&&n===e.map?a:n}},18422:(B,U,v)=>{var T=v(28833),a=v(78928),e=Array.prototype;B.exports=function(t){var n=t.slice;return t===e||T(e,t)&&n===e.slice?a:n}},13807:(B,U,v)=>{var T=v(28833),a=v(60660),e=Array.prototype;B.exports=function(t){var n=t.splice;return t===e||T(e,t)&&n===e.splice?a:n}},13194:(B,U,v)=>{var T=v(28833),a=v(80083),e=String.prototype;B.exports=function(t){var n=t.startsWith;return"string"==typeof t||t===e||T(e,t)&&n===e.startsWith?a:n}},20573:(B,U,v)=>{v(62260);var T=v(83271),a=v(80626);T.JSON||(T.JSON={stringify:JSON.stringify}),B.exports=function(t,n,o){return a(T.JSON.stringify,null,arguments)}},49483:(B,U,v)=>{v(91487);var T=v(83271);B.exports=T.Object.assign},12171:(B,U,v)=>{v(40020);var a=v(83271).Object,e=B.exports=function(n,o){return a.defineProperties(n,o)};a.defineProperties.sham&&(e.sham=!0)},39469:(B,U,v)=>{v(55523);var a=v(83271).Object,e=B.exports=function(n,o,r){return a.defineProperty(n,o,r)};a.defineProperty.sham&&(e.sham=!0)},24911:(B,U,v)=>{v(67777);var T=v(83271);B.exports=T.Object.entries},942:(B,U,v)=>{v(32696);var a=v(83271).Object,e=B.exports=function(n,o){return a.getOwnPropertyDescriptor(n,o)};a.getOwnPropertyDescriptor.sham&&(e.sham=!0)},46592:(B,U,v)=>{v(36714);var T=v(83271);B.exports=T.Object.getOwnPropertyDescriptors},51594:(B,U,v)=>{v(33353);var T=v(83271);B.exports=T.Object.getOwnPropertySymbols},87079:(B,U,v)=>{v(89405);var T=v(83271);B.exports=T.Object.keys},42654:(B,U,v)=>{v(52935),v(64741),v(97045),v(12545),v(75077),v(83218),v(45895),v(62009);var T=v(83271);B.exports=T.Promise},65106:(B,U,v)=>{v(96595);var T=v(2159);B.exports=T("String").includes},80083:(B,U,v)=>{v(11322);var T=v(2159);B.exports=T("String").startsWith},59366:(B,U,v)=>{v(94570),v(97045),v(33353),v(32159),v(72450),v(43071),v(34025),v(19155),v(64485),v(16576),v(42053),v(96668),v(54714),v(20437),v(11979),v(78559),v(59450),v(10157),v(30238),v(22428);var T=v(83271);B.exports=T.Symbol},48926:(B,U,v)=>{v(64741),v(97045),v(62009),v(19155);var T=v(42572);B.exports=T.f("iterator")},1796:(B,U,v)=>{v(64741),v(97045),v(82695);var T=v(83271);B.exports=T.WeakMap},96883:(B,U,v)=>{var T=v(96353);B.exports=T},21244:(B,U,v)=>{var T=v(18830);B.exports=T},81548:(B,U,v)=>{var T=v(92578);B.exports=T},30206:(B,U,v)=>{var T=v(26271);B.exports=T},73915:(B,U,v)=>{var T=v(6506);B.exports=T},91391:(B,U,v)=>{var T=v(28532);B.exports=T},16557:(B,U,v)=>{var T=v(34123);B.exports=T},11944:(B,U,v)=>{var T=v(62217);B.exports=T},63780:(B,U,v)=>{var T=v(14893);B.exports=T},65332:(B,U,v)=>{var T=v(52572);B.exports=T},66203:(B,U,v)=>{var T=v(17608);B.exports=T},98836:(B,U,v)=>{var T=v(27567);B.exports=T},89857:(B,U,v)=>{var T=v(158);B.exports=T},42658:(B,U,v)=>{var T=v(27620);v(62373),v(18168),v(73944),v(25831),B.exports=T},93585:(B,U,v)=>{var T=v(75743);v(42673),v(34286),v(73695),v(13990),v(69181),v(11686),v(84430),B.exports=T},9207:(B,U,v)=>{var T=v(40359);B.exports=T},98204:(B,U,v)=>{var T=v(37516),a=v(91699),e=v(42349),t=T.TypeError;B.exports=function(n){if(a(n))return n;throw t(e(n)+" is not a function")}},39660:(B,U,v)=>{var T=v(37516),a=v(36025),e=v(42349),t=T.TypeError;B.exports=function(n){if(a(n))return n;throw t(e(n)+" is not a constructor")}},82361:(B,U,v)=>{var T=v(37516),a=v(91699),e=T.String,t=T.TypeError;B.exports=function(n){if("object"==typeof n||a(n))return n;throw t("Can't set "+e(n)+" as a prototype")}},51802:B=>{B.exports=function(){}},74528:(B,U,v)=>{var T=v(37516),a=v(28833),e=T.TypeError;B.exports=function(t,n){if(a(n,t))return t;throw e("Incorrect invocation")}},22696:(B,U,v)=>{var T=v(37516),a=v(883),e=T.String,t=T.TypeError;B.exports=function(n){if(a(n))return n;throw t(e(n)+" is not an object")}},70830:(B,U,v)=>{var T=v(20065);B.exports=T(function(){if("function"==typeof ArrayBuffer){var a=new ArrayBuffer(8);Object.isExtensible(a)&&Object.defineProperty(a,"a",{value:8})}})},30247:(B,U,v)=>{"use strict";var T=v(69720).forEach,e=v(40386)("forEach");B.exports=e?[].forEach:function(n){return T(this,n,arguments.length>1?arguments[1]:void 0)}},58365:(B,U,v)=>{"use strict";var T=v(37516),a=v(88509),e=v(13868),t=v(23349),n=v(72178),o=v(60692),r=v(36025),p=v(1435),b=v(763),I=v(13020),x=v(62439),k=T.Array;B.exports=function(X){var it=t(X),rt=r(this),ct=arguments.length,wt=ct>1?arguments[1]:void 0,At=void 0!==wt;At&&(wt=a(wt,ct>2?arguments[2]:void 0));var pt,st,ot,nt,Tt,Ct,Rt=x(it),Dt=0;if(!Rt||this==k&&o(Rt))for(pt=p(it),st=rt?new this(pt):k(pt);pt>Dt;Dt++)Ct=At?wt(it[Dt],Dt):it[Dt],b(st,Dt,Ct);else for(Tt=(nt=I(it,Rt)).next,st=rt?new this:[];!(ot=e(Tt,nt)).done;Dt++)Ct=At?n(nt,wt,[ot.value,Dt],!0):ot.value,b(st,Dt,Ct);return st.length=Dt,st}},591:(B,U,v)=>{var T=v(75880),a=v(54346),e=v(1435),t=function(n){return function(o,r,p){var k,b=T(o),I=e(b),x=a(p,I);if(n&&r!=r){for(;I>x;)if((k=b[x++])!=k)return!0}else for(;I>x;x++)if((n||x in b)&&b[x]===r)return n||x||0;return!n&&-1}};B.exports={includes:t(!0),indexOf:t(!1)}},69720:(B,U,v)=>{var T=v(88509),a=v(45972),e=v(41738),t=v(23349),n=v(1435),o=v(94947),r=a([].push),p=function(b){var I=1==b,x=2==b,k=3==b,Y=4==b,X=6==b,it=7==b,rt=5==b||X;return function(ct,wt,At,Rt){for(var yt,gt,Dt=t(ct),pt=e(Dt),st=T(wt,At),ot=n(pt),nt=0,Tt=Rt||o,Ct=I?Tt(ct,ot):x||it?Tt(ct,0):void 0;ot>nt;nt++)if((rt||nt in pt)&&(gt=st(yt=pt[nt],nt,Dt),b))if(I)Ct[nt]=gt;else if(gt)switch(b){case 3:return!0;case 5:return yt;case 6:return nt;case 2:r(Ct,yt)}else switch(b){case 4:return!1;case 7:r(Ct,yt)}return X?-1:k||Y?Y:Ct}};B.exports={forEach:p(0),map:p(1),filter:p(2),some:p(3),every:p(4),find:p(5),findIndex:p(6),filterReject:p(7)}},64630:(B,U,v)=>{var T=v(20065),a=v(63211),e=v(93687),t=a("species");B.exports=function(n){return e>=51||!T(function(){var o=[];return(o.constructor={})[t]=function(){return{foo:1}},1!==o[n](Boolean).foo})}},40386:(B,U,v)=>{"use strict";var T=v(20065);B.exports=function(a,e){var t=[][a];return!!t&&T(function(){t.call(null,e||function(){throw 1},1)})}},13053:(B,U,v)=>{var T=v(45972);B.exports=T([].slice)},95264:(B,U,v)=>{var T=v(13053),a=Math.floor,e=function(o,r){var p=o.length,b=a(p/2);return p<8?t(o,r):n(o,e(T(o,0,b),r),e(T(o,b),r),r)},t=function(o,r){for(var I,x,p=o.length,b=1;b<p;){for(x=b,I=o[b];x&&r(o[x-1],I)>0;)o[x]=o[--x];x!==b++&&(o[x]=I)}return o},n=function(o,r,p,b){for(var I=r.length,x=p.length,k=0,Y=0;k<I||Y<x;)o[k+Y]=k<I&&Y<x?b(r[k],p[Y])<=0?r[k++]:p[Y++]:k<I?r[k++]:p[Y++];return o};B.exports=e},61397:(B,U,v)=>{var T=v(37516),a=v(51556),e=v(36025),t=v(883),o=v(63211)("species"),r=T.Array;B.exports=function(p){var b;return a(p)&&(e(b=p.constructor)&&(b===r||a(b.prototype))||t(b)&&null===(b=b[o]))&&(b=void 0),void 0===b?r:b}},94947:(B,U,v)=>{var T=v(61397);B.exports=function(a,e){return new(T(a))(0===e?0:e)}},72178:(B,U,v)=>{var T=v(22696),a=v(29475);B.exports=function(e,t,n,o){try{return o?t(T(n)[0],n[1]):t(n)}catch(r){a(e,"throw",r)}}},78442:(B,U,v)=>{var a=v(63211)("iterator"),e=!1;try{var t=0,n={next:function(){return{done:!!t++}},return:function(){e=!0}};n[a]=function(){return this},Array.from(n,function(){throw 2})}catch(o){}B.exports=function(o,r){if(!r&&!e)return!1;var p=!1;try{var b={};b[a]=function(){return{next:function(){return{done:p=!0}}}},o(b)}catch(I){}return p}},35735:(B,U,v)=>{var T=v(45972),a=T({}.toString),e=T("".slice);B.exports=function(t){return e(a(t),8,-1)}},98330:(B,U,v)=>{var T=v(37516),a=v(89834),e=v(91699),t=v(35735),o=v(63211)("toStringTag"),r=T.Object,p="Arguments"==t(function(){return arguments}());B.exports=a?t:function(I){var x,k,Y;return void 0===I?"Undefined":null===I?"Null":"string"==typeof(k=function(I,x){try{return I[x]}catch(k){}}(x=r(I),o))?k:p?t(x):"Object"==(Y=t(x))&&e(x.callee)?"Arguments":Y}},67232:(B,U,v)=>{var T=v(45972),a=v(13053),e=T("".replace),t=T("".split),n=T([].join),o=String(Error("zxcasd").stack),r=/\n\s*at [^:]*:[^\n]*/,p=r.test(o),b=/@[^\n]*\n/.test(o)&&!/zxcasd/.test(o);B.exports=function(I,x){if("string"!=typeof I)return I;if(p)for(;x--;)I=e(I,r,"");else if(b)return n(a(t(I,"\n"),x),"\n");return I}},39754:(B,U,v)=>{"use strict";var T=v(45972),a=v(22239),e=v(48016).getWeakData,t=v(22696),n=v(883),o=v(74528),r=v(30772),p=v(69720),b=v(7723),I=v(90149),x=I.set,k=I.getterFor,Y=p.find,X=p.findIndex,it=T([].splice),rt=0,ct=function(Rt){return Rt.frozen||(Rt.frozen=new wt)},wt=function(){this.entries=[]},At=function(Rt,Dt){return Y(Rt.entries,function(pt){return pt[0]===Dt})};wt.prototype={get:function(Rt){var Dt=At(this,Rt);if(Dt)return Dt[1]},has:function(Rt){return!!At(this,Rt)},set:function(Rt,Dt){var pt=At(this,Rt);pt?pt[1]=Dt:this.entries.push([Rt,Dt])},delete:function(Rt){var Dt=X(this.entries,function(pt){return pt[0]===Rt});return~Dt&&it(this.entries,Dt,1),!!~Dt}},B.exports={getConstructor:function(Rt,Dt,pt,st){var ot=Rt(function(yt,gt){o(yt,nt),x(yt,{type:Dt,id:rt++,frozen:void 0}),null!=gt&&r(gt,yt[st],{that:yt,AS_ENTRIES:pt})}),nt=ot.prototype,Tt=k(Dt),Ct=function(yt,gt,_t){var Jt=Tt(yt),Pt=e(t(gt),!0);return!0===Pt?ct(Jt).set(gt,_t):Pt[Jt.id]=_t,yt};return a(nt,{delete:function(yt){var gt=Tt(this);if(!n(yt))return!1;var _t=e(yt);return!0===_t?ct(gt).delete(yt):_t&&b(_t,gt.id)&&delete _t[gt.id]},has:function(gt){var _t=Tt(this);if(!n(gt))return!1;var Jt=e(gt);return!0===Jt?ct(_t).has(gt):Jt&&b(Jt,_t.id)}}),a(nt,pt?{get:function(gt){var _t=Tt(this);if(n(gt)){var Jt=e(gt);return!0===Jt?ct(_t).get(gt):Jt?Jt[_t.id]:void 0}},set:function(gt,_t){return Ct(this,gt,_t)}}:{add:function(gt){return Ct(this,gt,!0)}}),ot}}},7448:(B,U,v)=>{"use strict";var T=v(99253),a=v(37516),e=v(48016),t=v(20065),n=v(6103),o=v(30772),r=v(74528),p=v(91699),b=v(883),I=v(65702),x=v(70762).f,k=v(69720).forEach,Y=v(61385),X=v(90149),it=X.set,rt=X.getterFor;B.exports=function(ct,wt,At){var Tt,Rt=-1!==ct.indexOf("Map"),Dt=-1!==ct.indexOf("Weak"),pt=Rt?"set":"add",st=a[ct],ot=st&&st.prototype,nt={};if(Y&&p(st)&&(Dt||ot.forEach&&!t(function(){(new st).entries().next()}))){var Ct=(Tt=wt(function(gt,_t){it(r(gt,Ct),{type:ct,collection:new st}),null!=_t&&o(_t,gt[pt],{that:gt,AS_ENTRIES:Rt})})).prototype,yt=rt(ct);k(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(gt){var _t="add"==gt||"set"==gt;gt in ot&&(!Dt||"clear"!=gt)&&n(Ct,gt,function(Jt,Pt){var oe=yt(this).collection;if(!_t&&Dt&&!b(Jt))return"get"==gt&&void 0;var Ne=oe[gt](0===Jt?0:Jt,Pt);return _t?this:Ne})}),Dt||x(Ct,"size",{configurable:!0,get:function(){return yt(this).collection.size}})}else Tt=At.getConstructor(wt,ct,Rt,pt),e.enable();return I(Tt,ct,!1,!0),nt[ct]=Tt,T({global:!0,forced:!0},nt),Dt||At.setStrong(Tt,ct,Rt),Tt}},64325:(B,U,v)=>{var T=v(7723),a=v(8452),e=v(59819),t=v(70762);B.exports=function(n,o){for(var r=a(o),p=t.f,b=e.f,I=0;I<r.length;I++){var x=r[I];T(n,x)||p(n,x,b(o,x))}}},23655:(B,U,v)=>{var a=v(63211)("match");B.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[a]=!1,"/./"[e](t)}catch(o){}}return!1}},719:(B,U,v)=>{var T=v(20065);B.exports=!T(function(){function a(){}return a.prototype.constructor=null,Object.getPrototypeOf(new a)!==a.prototype})},59571:(B,U,v)=>{"use strict";var T=v(61056).IteratorPrototype,a=v(73821),e=v(42856),t=v(65702),n=v(48626),o=function(){return this};B.exports=function(r,p,b){var I=p+" Iterator";return r.prototype=a(T,{next:e(1,b)}),t(r,I,!1,!0),n[I]=o,r}},6103:(B,U,v)=>{var T=v(61385),a=v(70762),e=v(42856);B.exports=T?function(t,n,o){return a.f(t,n,e(1,o))}:function(t,n,o){return t[n]=o,t}},42856:B=>{B.exports=function(U,v){return{enumerable:!(1&U),configurable:!(2&U),writable:!(4&U),value:v}}},763:(B,U,v)=>{"use strict";var T=v(54053),a=v(70762),e=v(42856);B.exports=function(t,n,o){var r=T(n);r in t?a.f(t,r,e(0,o)):t[r]=o}},68797:(B,U,v)=>{"use strict";var T=v(99253),a=v(13868),e=v(27316),t=v(91261),n=v(91699),o=v(59571),r=v(26142),p=v(74494),b=v(65702),I=v(6103),x=v(46573),k=v(63211),Y=v(48626),X=v(61056),it=t.PROPER,rt=t.CONFIGURABLE,ct=X.IteratorPrototype,wt=X.BUGGY_SAFARI_ITERATORS,At=k("iterator"),Dt="values",pt="entries",st=function(){return this};B.exports=function(ot,nt,Tt,Ct,yt,gt,_t){o(Tt,nt,Ct);var we,ai,re,Jt=function(ce){if(ce===yt&&Ce)return Ce;if(!wt&&ce in Ne)return Ne[ce];switch(ce){case"keys":case Dt:case pt:return function(){return new Tt(this,ce)}}return function(){return new Tt(this)}},Pt=nt+" Iterator",oe=!1,Ne=ot.prototype,Xe=Ne[At]||Ne["@@iterator"]||yt&&Ne[yt],Ce=!wt&&Xe||Jt(yt),Ze="Array"==nt&&Ne.entries||Xe;if(Ze&&(we=r(Ze.call(new ot)))!==Object.prototype&&we.next&&(!e&&r(we)!==ct&&(p?p(we,ct):n(we[At])||x(we,At,st)),b(we,Pt,!0,!0),e&&(Y[Pt]=st)),it&&yt==Dt&&Xe&&Xe.name!==Dt&&(!e&&rt?I(Ne,"name",Dt):(oe=!0,Ce=function(){return a(Xe,this)})),yt)if(ai={values:Jt(Dt),keys:gt?Ce:Jt("keys"),entries:Jt(pt)},_t)for(re in ai)(wt||oe||!(re in Ne))&&x(Ne,re,ai[re]);else T({target:nt,proto:!0,forced:wt||oe},ai);return(!e||_t)&&Ne[At]!==Ce&&x(Ne,At,Ce,{name:yt}),Y[nt]=Ce,ai}},8254:(B,U,v)=>{var T=v(83271),a=v(7723),e=v(42572),t=v(70762).f;B.exports=function(n){var o=T.Symbol||(T.Symbol={});a(o,n)||t(o,n,{value:e.f(n)})}},61385:(B,U,v)=>{var T=v(20065);B.exports=!T(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},42304:(B,U,v)=>{var T=v(37516),a=v(883),e=T.document,t=a(e)&&a(e.createElement);B.exports=function(n){return t?e.createElement(n):{}}},70808:B=>{B.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},33040:B=>{B.exports="object"==typeof window},27129:(B,U,v)=>{var T=v(61509),a=v(37516);B.exports=/ipad|iphone|ipod/i.test(T)&&void 0!==a.Pebble},50357:(B,U,v)=>{var T=v(61509);B.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(T)},7214:(B,U,v)=>{var T=v(35735),a=v(37516);B.exports="process"==T(a.process)},35773:(B,U,v)=>{var T=v(61509);B.exports=/web0s(?!.*chrome)/i.test(T)},61509:(B,U,v)=>{var T=v(73289);B.exports=T("navigator","userAgent")||""},93687:(B,U,v)=>{var r,p,T=v(37516),a=v(61509),e=T.process,t=T.Deno,n=e&&e.versions||t&&t.version,o=n&&n.v8;o&&(p=(r=o.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!p&&a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(p=+r[1]),B.exports=p},2159:(B,U,v)=>{var T=v(83271);B.exports=function(a){return T[a+"Prototype"]}},53752:B=>{B.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},54315:(B,U,v)=>{var T=v(20065),a=v(42856);B.exports=!T(function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",a(1,7)),7!==e.stack)})},99253:(B,U,v)=>{"use strict";var T=v(37516),a=v(80626),e=v(45972),t=v(91699),n=v(59819).f,o=v(808),r=v(83271),p=v(88509),b=v(6103),I=v(7723),x=function(k){var Y=function(X,it,rt){if(this instanceof Y){switch(arguments.length){case 0:return new k;case 1:return new k(X);case 2:return new k(X,it)}return new k(X,it,rt)}return a(k,this,arguments)};return Y.prototype=k.prototype,Y};B.exports=function(k,Y){var pt,st,ot,nt,Tt,Ct,yt,gt,X=k.target,it=k.global,rt=k.stat,ct=k.proto,wt=it?T:rt?T[X]:(T[X]||{}).prototype,At=it?r:r[X]||b(r,X,{})[X],Rt=At.prototype;for(ot in Y)pt=!o(it?ot:X+(rt?".":"#")+ot,k.forced)&&wt&&I(wt,ot),Tt=At[ot],pt&&(Ct=k.noTargetGet?(gt=n(wt,ot))&&gt.value:wt[ot]),nt=pt&&Ct?Ct:Y[ot],(!pt||typeof Tt!=typeof nt)&&(yt=k.bind&&pt?p(nt,T):k.wrap&&pt?x(nt):ct&&t(nt)?e(nt):nt,(k.sham||nt&&nt.sham||Tt&&Tt.sham)&&b(yt,"sham",!0),b(At,ot,yt),ct&&(I(r,st=X+"Prototype")||b(r,st,{}),b(r[st],ot,nt),k.real&&Rt&&!Rt[ot]&&b(Rt,ot,nt)))}},20065:B=>{B.exports=function(U){try{return!!U()}catch(v){return!0}}},4224:(B,U,v)=>{var T=v(20065);B.exports=!T(function(){return Object.isExtensible(Object.preventExtensions({}))})},80626:B=>{var U=Function.prototype,v=U.apply,a=U.call;B.exports="object"==typeof Reflect&&Reflect.apply||(U.bind?a.bind(v):function(){return a.apply(v,arguments)})},88509:(B,U,v)=>{var T=v(45972),a=v(98204),e=T(T.bind);B.exports=function(t,n){return a(t),void 0===n?t:e?e(t,n):function(){return t.apply(n,arguments)}}},13868:B=>{var U=Function.prototype.call;B.exports=U.bind?U.bind(U):function(){return U.apply(U,arguments)}},91261:(B,U,v)=>{var T=v(61385),a=v(7723),e=Function.prototype,t=T&&Object.getOwnPropertyDescriptor,n=a(e,"name"),o=n&&"something"===function(){}.name,r=n&&(!T||T&&t(e,"name").configurable);B.exports={EXISTS:n,PROPER:o,CONFIGURABLE:r}},45972:B=>{var U=Function.prototype,v=U.bind,T=U.call,a=v&&v.bind(T);B.exports=v?function(e){return e&&a(T,e)}:function(e){return e&&function(){return T.apply(e,arguments)}}},73289:(B,U,v)=>{var T=v(83271),a=v(37516),e=v(91699),t=function(n){return e(n)?n:void 0};B.exports=function(n,o){return arguments.length<2?t(T[n])||t(a[n]):T[n]&&T[n][o]||a[n]&&a[n][o]}},62439:(B,U,v)=>{var T=v(98330),a=v(37571),e=v(48626),n=v(63211)("iterator");B.exports=function(o){if(null!=o)return a(o,n)||a(o,"@@iterator")||e[T(o)]}},13020:(B,U,v)=>{var T=v(37516),a=v(13868),e=v(98204),t=v(22696),n=v(42349),o=v(62439),r=T.TypeError;B.exports=function(p,b){var I=arguments.length<2?o(p):b;if(e(I))return t(a(I,p));throw r(n(p)+" is not iterable")}},37571:(B,U,v)=>{var T=v(98204);B.exports=function(a,e){var t=a[e];return null==t?void 0:T(t)}},37516:B=>{var U=function(v){return v&&v.Math==Math&&v};B.exports=U("object"==typeof globalThis&&globalThis)||U("object"==typeof window&&window)||U("object"==typeof self&&self)||U("object"==typeof global&&global)||function(){return this}()||Function("return this")()},7723:(B,U,v)=>{var T=v(45972),a=v(23349),e=T({}.hasOwnProperty);B.exports=Object.hasOwn||function(n,o){return e(a(n),o)}},64842:B=>{B.exports={}},28979:(B,U,v)=>{var T=v(37516);B.exports=function(a,e){var t=T.console;t&&t.error&&(1==arguments.length?t.error(a):t.error(a,e))}},21060:(B,U,v)=>{var T=v(73289);B.exports=T("document","documentElement")},86957:(B,U,v)=>{var T=v(61385),a=v(20065),e=v(42304);B.exports=!T&&!a(function(){return 7!=Object.defineProperty(e("div"),"a",{get:function(){return 7}}).a})},41738:(B,U,v)=>{var T=v(37516),a=v(45972),e=v(20065),t=v(35735),n=T.Object,o=a("".split);B.exports=e(function(){return!n("z").propertyIsEnumerable(0)})?function(r){return"String"==t(r)?o(r,""):n(r)}:n},57761:(B,U,v)=>{var T=v(45972),a=v(91699),e=v(53575),t=T(Function.toString);a(e.inspectSource)||(e.inspectSource=function(n){return t(n)}),B.exports=e.inspectSource},84992:(B,U,v)=>{var T=v(883),a=v(6103);B.exports=function(e,t){T(t)&&"cause"in t&&a(e,"cause",t.cause)}},48016:(B,U,v)=>{var T=v(99253),a=v(45972),e=v(64842),t=v(883),n=v(7723),o=v(70762).f,r=v(92081),p=v(69820),b=v(2577),I=v(11789),x=v(4224),k=!1,Y=I("meta"),X=0,it=function(Dt){o(Dt,Y,{value:{objectID:"O"+X++,weakData:{}}})},Rt=B.exports={enable:function(){Rt.enable=function(){},k=!0;var Dt=r.f,pt=a([].splice),st={};st[Y]=1,Dt(st).length&&(r.f=function(ot){for(var nt=Dt(ot),Tt=0,Ct=nt.length;Tt<Ct;Tt++)if(nt[Tt]===Y){pt(nt,Tt,1);break}return nt},T({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:p.f}))},fastKey:function(Dt,pt){if(!t(Dt))return"symbol"==typeof Dt?Dt:("string"==typeof Dt?"S":"P")+Dt;if(!n(Dt,Y)){if(!b(Dt))return"F";if(!pt)return"E";it(Dt)}return Dt[Y].objectID},getWeakData:function(Dt,pt){if(!n(Dt,Y)){if(!b(Dt))return!0;if(!pt)return!1;it(Dt)}return Dt[Y].weakData},onFreeze:function(Dt){return x&&k&&b(Dt)&&!n(Dt,Y)&&it(Dt),Dt}};e[Y]=!0},90149:(B,U,v)=>{var Y,X,it,T=v(74381),a=v(37516),e=v(45972),t=v(883),n=v(6103),o=v(7723),r=v(53575),p=v(26103),b=v(64842),I="Object already initialized",x=a.TypeError;if(T||r.state){var wt=r.state||(r.state=new(0,a.WeakMap)),At=e(wt.get),Rt=e(wt.has),Dt=e(wt.set);Y=function(st,ot){if(Rt(wt,st))throw new x(I);return ot.facade=st,Dt(wt,st,ot),ot},X=function(st){return At(wt,st)||{}},it=function(st){return Rt(wt,st)}}else{var pt=p("state");b[pt]=!0,Y=function(st,ot){if(o(st,pt))throw new x(I);return ot.facade=st,n(st,pt,ot),ot},X=function(st){return o(st,pt)?st[pt]:{}},it=function(st){return o(st,pt)}}B.exports={set:Y,get:X,has:it,enforce:function(st){return it(st)?X(st):Y(st,{})},getterFor:function(st){return function(ot){var nt;if(!t(ot)||(nt=X(ot)).type!==st)throw x("Incompatible receiver, "+st+" required");return nt}}}},60692:(B,U,v)=>{var T=v(63211),a=v(48626),e=T("iterator"),t=Array.prototype;B.exports=function(n){return void 0!==n&&(a.Array===n||t[e]===n)}},51556:(B,U,v)=>{var T=v(35735);B.exports=Array.isArray||function(e){return"Array"==T(e)}},91699:B=>{B.exports=function(U){return"function"==typeof U}},36025:(B,U,v)=>{var T=v(45972),a=v(20065),e=v(91699),t=v(98330),n=v(73289),o=v(57761),r=function(){},p=[],b=n("Reflect","construct"),I=/^\s*(?:class|function)\b/,x=T(I.exec),k=!I.exec(r),Y=function(it){if(!e(it))return!1;try{return b(r,p,it),!0}catch(rt){return!1}};B.exports=!b||a(function(){var it;return Y(Y.call)||!Y(Object)||!Y(function(){it=!0})||it})?function(it){if(!e(it))return!1;switch(t(it)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return k||!!x(I,o(it))}:Y},808:(B,U,v)=>{var T=v(20065),a=v(91699),e=/#|\.prototype\./,t=function(b,I){var x=o[n(b)];return x==p||x!=r&&(a(I)?T(I):!!I)},n=t.normalize=function(b){return String(b).replace(e,".").toLowerCase()},o=t.data={},r=t.NATIVE="N",p=t.POLYFILL="P";B.exports=t},883:(B,U,v)=>{var T=v(91699);B.exports=function(a){return"object"==typeof a?null!==a:T(a)}},27316:B=>{B.exports=!0},89250:(B,U,v)=>{var T=v(883),a=v(35735),t=v(63211)("match");B.exports=function(n){var o;return T(n)&&(void 0!==(o=n[t])?!!o:"RegExp"==a(n))}},17397:(B,U,v)=>{var T=v(37516),a=v(73289),e=v(91699),t=v(28833),n=v(4286),o=T.Object;B.exports=n?function(r){return"symbol"==typeof r}:function(r){var p=a("Symbol");return e(p)&&t(p.prototype,o(r))}},30772:(B,U,v)=>{var T=v(37516),a=v(88509),e=v(13868),t=v(22696),n=v(42349),o=v(60692),r=v(1435),p=v(28833),b=v(13020),I=v(62439),x=v(29475),k=T.TypeError,Y=function(it,rt){this.stopped=it,this.result=rt},X=Y.prototype;B.exports=function(it,rt,ct){var st,ot,nt,Tt,Ct,yt,gt,At=!(!ct||!ct.AS_ENTRIES),Rt=!(!ct||!ct.IS_ITERATOR),Dt=!(!ct||!ct.INTERRUPTED),pt=a(rt,ct&&ct.that),_t=function(Pt){return st&&x(st,"normal",Pt),new Y(!0,Pt)},Jt=function(Pt){return At?(t(Pt),Dt?pt(Pt[0],Pt[1],_t):pt(Pt[0],Pt[1])):Dt?pt(Pt,_t):pt(Pt)};if(Rt)st=it;else{if(!(ot=I(it)))throw k(n(it)+" is not iterable");if(o(ot)){for(nt=0,Tt=r(it);Tt>nt;nt++)if((Ct=Jt(it[nt]))&&p(X,Ct))return Ct;return new Y(!1)}st=b(it,ot)}for(yt=st.next;!(gt=e(yt,st)).done;){try{Ct=Jt(gt.value)}catch(Pt){x(st,"throw",Pt)}if("object"==typeof Ct&&Ct&&p(X,Ct))return Ct}return new Y(!1)}},29475:(B,U,v)=>{var T=v(13868),a=v(22696),e=v(37571);B.exports=function(t,n,o){var r,p;a(t);try{if(!(r=e(t,"return"))){if("throw"===n)throw o;return o}r=T(r,t)}catch(b){p=!0,r=b}if("throw"===n)throw o;if(p)throw r;return a(r),o}},61056:(B,U,v)=>{"use strict";var I,x,k,T=v(20065),a=v(91699),e=v(73821),t=v(26142),n=v(46573),o=v(63211),r=v(27316),p=o("iterator"),b=!1;[].keys&&("next"in(k=[].keys())?(x=t(t(k)))!==Object.prototype&&(I=x):b=!0),null==I||T(function(){var X={};return I[p].call(X)!==X})?I={}:r&&(I=e(I)),a(I[p])||n(I,p,function(){return this}),B.exports={IteratorPrototype:I,BUGGY_SAFARI_ITERATORS:b}},48626:B=>{B.exports={}},1435:(B,U,v)=>{var T=v(37159);B.exports=function(a){return T(a.length)}},6120:(B,U,v)=>{var it,rt,ct,wt,At,Rt,Dt,pt,T=v(37516),a=v(88509),e=v(59819).f,t=v(15691).set,n=v(50357),o=v(27129),r=v(35773),p=v(7214),b=T.MutationObserver||T.WebKitMutationObserver,I=T.document,x=T.process,k=T.Promise,Y=e(T,"queueMicrotask"),X=Y&&Y.value;X||(it=function(){var st,ot;for(p&&(st=x.domain)&&st.exit();rt;){ot=rt.fn,rt=rt.next;try{ot()}catch(nt){throw rt?wt():ct=void 0,nt}}ct=void 0,st&&st.enter()},n||p||r||!b||!I?!o&&k&&k.resolve?((Dt=k.resolve(void 0)).constructor=k,pt=a(Dt.then,Dt),wt=function(){pt(it)}):p?wt=function(){x.nextTick(it)}:(t=a(t,T),wt=function(){t(it)}):(At=!0,Rt=I.createTextNode(""),new b(it).observe(Rt,{characterData:!0}),wt=function(){Rt.data=At=!At})),B.exports=X||function(st){var ot={fn:st,next:void 0};ct&&(ct.next=ot),rt||(rt=ot,wt()),ct=ot}},99978:(B,U,v)=>{var T=v(37516);B.exports=T.Promise},74267:(B,U,v)=>{var T=v(93687),a=v(20065);B.exports=!!Object.getOwnPropertySymbols&&!a(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&T&&T<41})},71665:(B,U,v)=>{var T=v(20065),a=v(63211),e=v(27316),t=a("iterator");B.exports=!T(function(){var n=new URL("b?a=1&b=2&c=3","http://a"),o=n.searchParams,r="";return n.pathname="c%20d",o.forEach(function(p,b){o.delete("b"),r+=b+p}),e&&!n.toJSON||!o.sort||"http://a/c%20d?a=1&c=3"!==n.href||"3"!==o.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!o[t]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==r||"x"!==new URL("http://x",void 0).host})},74381:(B,U,v)=>{var T=v(37516),a=v(91699),e=v(57761),t=T.WeakMap;B.exports=a(t)&&/native code/.test(e(t))},2637:(B,U,v)=>{"use strict";var T=v(98204),a=function(e){var t,n;this.promise=new e(function(o,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=o,n=r}),this.resolve=T(t),this.reject=T(n)};B.exports.f=function(e){return new a(e)}},19105:(B,U,v)=>{var T=v(37299);B.exports=function(a,e){return void 0===a?arguments.length<2?"":e:T(a)}},9974:(B,U,v)=>{var T=v(37516),a=v(89250),e=T.TypeError;B.exports=function(t){if(a(t))throw e("The method doesn't accept regular expressions");return t}},36477:(B,U,v)=>{"use strict";var T=v(61385),a=v(45972),e=v(13868),t=v(20065),n=v(47836),o=v(62222),r=v(52725),p=v(23349),b=v(41738),I=Object.assign,x=Object.defineProperty,k=a([].concat);B.exports=!I||t(function(){if(T&&1!==I({b:1},I(x({},"a",{enumerable:!0,get:function(){x(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var Y={},X={},it=Symbol(),rt="abcdefghijklmnopqrst";return Y[it]=7,rt.split("").forEach(function(ct){X[ct]=ct}),7!=I({},Y)[it]||n(I({},X)).join("")!=rt})?function(X,it){for(var rt=p(X),ct=arguments.length,wt=1,At=o.f,Rt=r.f;ct>wt;)for(var nt,Dt=b(arguments[wt++]),pt=At?k(n(Dt),At(Dt)):n(Dt),st=pt.length,ot=0;st>ot;)nt=pt[ot++],(!T||e(Rt,Dt,nt))&&(rt[nt]=Dt[nt]);return rt}:I},73821:(B,U,v)=>{var ct,T=v(22696),a=v(25526),e=v(53752),t=v(64842),n=v(21060),o=v(42304),r=v(26103),I="prototype",x="script",k=r("IE_PROTO"),Y=function(){},X=function(At){return"<"+x+">"+At+"</"+x+">"},it=function(At){At.write(X("")),At.close();var Rt=At.parentWindow.Object;return At=null,Rt},wt=function(){try{ct=new ActiveXObject("htmlfile")}catch(Rt){}wt="undefined"!=typeof document?document.domain&&ct?it(ct):function(){var Dt,At=o("iframe");return At.style.display="none",n.appendChild(At),At.src=String("javascript:"),(Dt=At.contentWindow.document).open(),Dt.write(X("document.F=Object")),Dt.close(),Dt.F}():it(ct);for(var At=e.length;At--;)delete wt[I][e[At]];return wt()};t[k]=!0,B.exports=Object.create||function(Rt,Dt){var pt;return null!==Rt?(Y[I]=T(Rt),pt=new Y,Y[I]=null,pt[k]=Rt):pt=wt(),void 0===Dt?pt:a(pt,Dt)}},25526:(B,U,v)=>{var T=v(61385),a=v(70762),e=v(22696),t=v(75880),n=v(47836);B.exports=T?Object.defineProperties:function(r,p){e(r);for(var Y,b=t(p),I=n(p),x=I.length,k=0;x>k;)a.f(r,Y=I[k++],b[Y]);return r}},70762:(B,U,v)=>{var T=v(37516),a=v(61385),e=v(86957),t=v(22696),n=v(54053),o=T.TypeError,r=Object.defineProperty;U.f=a?r:function(b,I,x){if(t(b),I=n(I),t(x),e)try{return r(b,I,x)}catch(k){}if("get"in x||"set"in x)throw o("Accessors not supported");return"value"in x&&(b[I]=x.value),b}},59819:(B,U,v)=>{var T=v(61385),a=v(13868),e=v(52725),t=v(42856),n=v(75880),o=v(54053),r=v(7723),p=v(86957),b=Object.getOwnPropertyDescriptor;U.f=T?b:function(x,k){if(x=n(x),k=o(k),p)try{return b(x,k)}catch(Y){}if(r(x,k))return t(!a(e.f,x,k),x[k])}},69820:(B,U,v)=>{var T=v(35735),a=v(75880),e=v(92081).f,t=v(13053),n="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];B.exports.f=function(p){return n&&"Window"==T(p)?function(r){try{return e(r)}catch(p){return t(n)}}(p):e(a(p))}},92081:(B,U,v)=>{var T=v(66230),e=v(53752).concat("length","prototype");U.f=Object.getOwnPropertyNames||function(n){return T(n,e)}},62222:(B,U)=>{U.f=Object.getOwnPropertySymbols},26142:(B,U,v)=>{var T=v(37516),a=v(7723),e=v(91699),t=v(23349),n=v(26103),o=v(719),r=n("IE_PROTO"),p=T.Object,b=p.prototype;B.exports=o?p.getPrototypeOf:function(I){var x=t(I);if(a(x,r))return x[r];var k=x.constructor;return e(k)&&x instanceof k?k.prototype:x instanceof p?b:null}},2577:(B,U,v)=>{var T=v(20065),a=v(883),e=v(35735),t=v(70830),n=Object.isExtensible,o=T(function(){n(1)});B.exports=o||t?function(p){return!(!a(p)||t&&"ArrayBuffer"==e(p))&&(!n||n(p))}:n},28833:(B,U,v)=>{var T=v(45972);B.exports=T({}.isPrototypeOf)},66230:(B,U,v)=>{var T=v(45972),a=v(7723),e=v(75880),t=v(591).indexOf,n=v(64842),o=T([].push);B.exports=function(r,p){var k,b=e(r),I=0,x=[];for(k in b)!a(n,k)&&a(b,k)&&o(x,k);for(;p.length>I;)a(b,k=p[I++])&&(~t(x,k)||o(x,k));return x}},47836:(B,U,v)=>{var T=v(66230),a=v(53752);B.exports=Object.keys||function(t){return T(t,a)}},52725:(B,U)=>{"use strict";var v={}.propertyIsEnumerable,T=Object.getOwnPropertyDescriptor,a=T&&!v.call({1:2},1);U.f=a?function(t){var n=T(this,t);return!!n&&n.enumerable}:v},74494:(B,U,v)=>{var T=v(45972),a=v(22696),e=v(82361);B.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var o,t=!1,n={};try{(o=T(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(r){}return function(p,b){return a(p),e(b),t?o(p,b):p.__proto__=b,p}}():void 0)},37621:(B,U,v)=>{var T=v(61385),a=v(45972),e=v(47836),t=v(75880),o=a(v(52725).f),r=a([].push),p=function(b){return function(I){for(var rt,x=t(I),k=e(x),Y=k.length,X=0,it=[];Y>X;)rt=k[X++],(!T||o(x,rt))&&r(it,b?[rt,x[rt]]:x[rt]);return it}};B.exports={entries:p(!0),values:p(!1)}},97390:(B,U,v)=>{"use strict";var T=v(89834),a=v(98330);B.exports=T?{}.toString:function(){return"[object "+a(this)+"]"}},53890:(B,U,v)=>{var T=v(37516),a=v(13868),e=v(91699),t=v(883),n=T.TypeError;B.exports=function(o,r){var p,b;if("string"===r&&e(p=o.toString)&&!t(b=a(p,o))||e(p=o.valueOf)&&!t(b=a(p,o))||"string"!==r&&e(p=o.toString)&&!t(b=a(p,o)))return b;throw n("Can't convert object to primitive value")}},8452:(B,U,v)=>{var T=v(73289),a=v(45972),e=v(92081),t=v(62222),n=v(22696),o=a([].concat);B.exports=T("Reflect","ownKeys")||function(p){var b=e.f(n(p)),I=t.f;return I?o(b,I(p)):b}},83271:B=>{B.exports={}},18429:B=>{B.exports=function(U){try{return{error:!1,value:U()}}catch(v){return{error:!0,value:v}}}},33898:(B,U,v)=>{var T=v(22696),a=v(883),e=v(2637);B.exports=function(t,n){if(T(t),a(n)&&n.constructor===t)return n;var o=e.f(t);return(0,o.resolve)(n),o.promise}},22239:(B,U,v)=>{var T=v(46573);B.exports=function(a,e,t){for(var n in e)t&&t.unsafe&&a[n]?a[n]=e[n]:T(a,n,e[n],t);return a}},46573:(B,U,v)=>{var T=v(6103);B.exports=function(a,e,t,n){n&&n.enumerable?a[e]=t:T(a,e,t)}},63805:(B,U,v)=>{var a=v(37516).TypeError;B.exports=function(e){if(null==e)throw a("Can't call method on "+e);return e}},75987:(B,U,v)=>{var T=v(37516),a=Object.defineProperty;B.exports=function(e,t){try{a(T,e,{value:t,configurable:!0,writable:!0})}catch(n){T[e]=t}return t}},31333:(B,U,v)=>{"use strict";var T=v(73289),a=v(70762),e=v(63211),t=v(61385),n=e("species");B.exports=function(o){var r=T(o);t&&r&&!r[n]&&(0,a.f)(r,n,{configurable:!0,get:function(){return this}})}},65702:(B,U,v)=>{var T=v(89834),a=v(70762).f,e=v(6103),t=v(7723),n=v(97390),r=v(63211)("toStringTag");B.exports=function(p,b,I,x){if(p){var k=I?p:p.prototype;t(k,r)||a(k,r,{configurable:!0,value:b}),x&&!T&&e(k,"toString",n)}}},26103:(B,U,v)=>{var T=v(2389),a=v(11789),e=T("keys");B.exports=function(t){return e[t]||(e[t]=a(t))}},53575:(B,U,v)=>{var T=v(37516),a=v(75987),e="__core-js_shared__",t=T[e]||a(e,{});B.exports=t},2389:(B,U,v)=>{var T=v(27316),a=v(53575);(B.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.19.1",mode:T?"pure":"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})},3759:(B,U,v)=>{var T=v(22696),a=v(39660),t=v(63211)("species");B.exports=function(n,o){var p,r=T(n).constructor;return void 0===r||null==(p=T(r)[t])?o:a(p)}},14924:(B,U,v)=>{var T=v(45972),a=v(88582),e=v(37299),t=v(63805),n=T("".charAt),o=T("".charCodeAt),r=T("".slice),p=function(b){return function(I,x){var it,rt,k=e(t(I)),Y=a(x),X=k.length;return Y<0||Y>=X?b?"":void 0:(it=o(k,Y))<55296||it>56319||Y+1===X||(rt=o(k,Y+1))<56320||rt>57343?b?n(k,Y):it:b?r(k,Y,Y+2):rt-56320+(it-55296<<10)+65536}};B.exports={codeAt:p(!1),charAt:p(!0)}},15691:(B,U,v)=>{var pt,st,ot,nt,T=v(37516),a=v(80626),e=v(88509),t=v(91699),n=v(7723),o=v(20065),r=v(21060),p=v(13053),b=v(42304),I=v(50357),x=v(7214),k=T.setImmediate,Y=T.clearImmediate,X=T.process,it=T.Dispatch,rt=T.Function,ct=T.MessageChannel,wt=T.String,At=0,Rt={},Dt="onreadystatechange";try{pt=T.location}catch(_t){}var Tt=function(_t){if(n(Rt,_t)){var Jt=Rt[_t];delete Rt[_t],Jt()}},Ct=function(_t){return function(){Tt(_t)}},yt=function(_t){Tt(_t.data)},gt=function(_t){T.postMessage(wt(_t),pt.protocol+"//"+pt.host)};(!k||!Y)&&(k=function(Jt){var Pt=p(arguments,1);return Rt[++At]=function(){a(t(Jt)?Jt:rt(Jt),void 0,Pt)},st(At),At},Y=function(Jt){delete Rt[Jt]},x?st=function(_t){X.nextTick(Ct(_t))}:it&&it.now?st=function(_t){it.now(Ct(_t))}:ct&&!I?(nt=(ot=new ct).port2,ot.port1.onmessage=yt,st=e(nt.postMessage,nt)):T.addEventListener&&t(T.postMessage)&&!T.importScripts&&pt&&"file:"!==pt.protocol&&!o(gt)?(st=gt,T.addEventListener("message",yt,!1)):st=Dt in b("script")?function(_t){r.appendChild(b("script"))[Dt]=function(){r.removeChild(this),Tt(_t)}}:function(_t){setTimeout(Ct(_t),0)}),B.exports={set:k,clear:Y}},54346:(B,U,v)=>{var T=v(88582),a=Math.max,e=Math.min;B.exports=function(t,n){var o=T(t);return o<0?a(o+n,0):e(o,n)}},75880:(B,U,v)=>{var T=v(41738),a=v(63805);B.exports=function(e){return T(a(e))}},88582:B=>{var U=Math.ceil,v=Math.floor;B.exports=function(T){var a=+T;return a!=a||0===a?0:(a>0?v:U)(a)}},37159:(B,U,v)=>{var T=v(88582),a=Math.min;B.exports=function(e){return e>0?a(T(e),9007199254740991):0}},23349:(B,U,v)=>{var T=v(37516),a=v(63805),e=T.Object;B.exports=function(t){return e(a(t))}},54017:(B,U,v)=>{var T=v(37516),a=v(13868),e=v(883),t=v(17397),n=v(37571),o=v(53890),r=v(63211),p=T.TypeError,b=r("toPrimitive");B.exports=function(I,x){if(!e(I)||t(I))return I;var Y,k=n(I,b);if(k){if(void 0===x&&(x="default"),Y=a(k,I,x),!e(Y)||t(Y))return Y;throw p("Can't convert object to primitive value")}return void 0===x&&(x="number"),o(I,x)}},54053:(B,U,v)=>{var T=v(54017),a=v(17397);B.exports=function(e){var t=T(e,"string");return a(t)?t:t+""}},89834:(B,U,v)=>{var e={};e[v(63211)("toStringTag")]="z",B.exports="[object z]"===String(e)},37299:(B,U,v)=>{var T=v(37516),a=v(98330),e=T.String;B.exports=function(t){if("Symbol"===a(t))throw TypeError("Cannot convert a Symbol value to a string");return e(t)}},42349:(B,U,v)=>{var a=v(37516).String;B.exports=function(e){try{return a(e)}catch(t){return"Object"}}},11789:(B,U,v)=>{var T=v(45972),a=0,e=Math.random(),t=T(1..toString);B.exports=function(n){return"Symbol("+(void 0===n?"":n)+")_"+t(++a+e,36)}},4286:(B,U,v)=>{var T=v(74267);B.exports=T&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},42572:(B,U,v)=>{var T=v(63211);U.f=T},63211:(B,U,v)=>{var T=v(37516),a=v(2389),e=v(7723),t=v(11789),n=v(74267),o=v(4286),r=a("wks"),p=T.Symbol,b=p&&p.for,I=o?p:p&&p.withoutSetter||t;B.exports=function(x){if(!e(r,x)||!n&&"string"!=typeof r[x]){var k="Symbol."+x;r[x]=n&&e(p,x)?p[x]:o&&b?b(k):I(k)}return r[x]}},52935:(B,U,v)=>{"use strict";var T=v(99253),a=v(37516),e=v(28833),t=v(26142),n=v(74494),o=v(64325),r=v(73821),p=v(6103),b=v(42856),I=v(67232),x=v(84992),k=v(30772),Y=v(19105),X=v(63211),it=v(54315),rt=X("toStringTag"),ct=a.Error,wt=[].push,At=function(pt,st){var Tt,ot=arguments.length>2?arguments[2]:void 0,nt=e(Rt,this);n?Tt=n(new ct(void 0),nt?t(this):Rt):(Tt=nt?this:r(Rt),p(Tt,rt,"Error")),p(Tt,"message",Y(st,"")),it&&p(Tt,"stack",I(Tt.stack,1)),x(Tt,ot);var Ct=[];return k(pt,wt,{that:Ct}),p(Tt,"errors",Ct),Tt};n?n(At,ct):o(At,ct);var Rt=At.prototype=r(ct.prototype,{constructor:b(1,At),message:b(1,""),name:b(1,"AggregateError")});T({global:!0},{AggregateError:At})},94570:(B,U,v)=>{"use strict";var T=v(99253),a=v(37516),e=v(20065),t=v(51556),n=v(883),o=v(23349),r=v(1435),p=v(763),b=v(94947),I=v(64630),x=v(63211),k=v(93687),Y=x("isConcatSpreadable"),X=9007199254740991,it="Maximum allowed index exceeded",rt=a.TypeError,ct=k>=51||!e(function(){var Dt=[];return Dt[Y]=!1,Dt.concat()[0]!==Dt}),wt=I("concat"),At=function(Dt){if(!n(Dt))return!1;var pt=Dt[Y];return void 0!==pt?!!pt:t(Dt)};T({target:"Array",proto:!0,forced:!ct||!wt},{concat:function(pt){var Tt,Ct,yt,gt,_t,st=o(this),ot=b(st,0),nt=0;for(Tt=-1,yt=arguments.length;Tt<yt;Tt++)if(At(_t=-1===Tt?st:arguments[Tt])){if(nt+(gt=r(_t))>X)throw rt(it);for(Ct=0;Ct<gt;Ct++,nt++)Ct in _t&&p(ot,nt,_t[Ct])}else{if(nt>=X)throw rt(it);p(ot,nt++,_t)}return ot.length=nt,ot}})},76613:(B,U,v)=>{"use strict";var T=v(99253),a=v(69720).filter;T({target:"Array",proto:!0,forced:!v(64630)("filter")},{filter:function(o){return a(this,o,arguments.length>1?arguments[1]:void 0)}})},15963:(B,U,v)=>{"use strict";var T=v(99253),a=v(69720).find,e=v(51802),t="find",n=!0;t in[]&&Array(1)[t](function(){n=!1}),T({target:"Array",proto:!0,forced:n},{find:function(r){return a(this,r,arguments.length>1?arguments[1]:void 0)}}),e(t)},28436:(B,U,v)=>{"use strict";var T=v(99253),a=v(30247);T({target:"Array",proto:!0,forced:[].forEach!=a},{forEach:a})},46601:(B,U,v)=>{var T=v(99253),a=v(58365);T({target:"Array",stat:!0,forced:!v(78442)(function(n){Array.from(n)})},{from:a})},82680:(B,U,v)=>{"use strict";var T=v(99253),a=v(591).includes,e=v(51802);T({target:"Array",proto:!0},{includes:function(n){return a(this,n,arguments.length>1?arguments[1]:void 0)}}),e("includes")},73713:(B,U,v)=>{"use strict";var T=v(99253),a=v(45972),e=v(591).indexOf,t=v(40386),n=a([].indexOf),o=!!n&&1/n([1],1,-0)<0,r=t("indexOf");T({target:"Array",proto:!0,forced:o||!r},{indexOf:function(b){var I=arguments.length>1?arguments[1]:void 0;return o?n(this,b,I)||0:e(this,b,I)}})},67011:(B,U,v)=>{v(99253)({target:"Array",stat:!0},{isArray:v(51556)})},64741:(B,U,v)=>{"use strict";var T=v(75880),a=v(51802),e=v(48626),t=v(90149),n=v(68797),o="Array Iterator",r=t.set,p=t.getterFor(o);B.exports=n(Array,"Array",function(b,I){r(this,{type:o,target:T(b),index:0,kind:I})},function(){var b=p(this),I=b.target,x=b.kind,k=b.index++;return!I||k>=I.length?(b.target=void 0,{value:void 0,done:!0}):"keys"==x?{value:k,done:!1}:"values"==x?{value:I[k],done:!1}:{value:[k,I[k]],done:!1}},"values"),e.Arguments=e.Array,a("keys"),a("values"),a("entries")},48303:(B,U,v)=>{"use strict";var T=v(99253),a=v(69720).map;T({target:"Array",proto:!0,forced:!v(64630)("map")},{map:function(o){return a(this,o,arguments.length>1?arguments[1]:void 0)}})},96682:(B,U,v)=>{"use strict";var T=v(99253),a=v(37516),e=v(51556),t=v(36025),n=v(883),o=v(54346),r=v(1435),p=v(75880),b=v(763),I=v(63211),x=v(64630),k=v(13053),Y=x("slice"),X=I("species"),it=a.Array,rt=Math.max;T({target:"Array",proto:!0,forced:!Y},{slice:function(wt,At){var ot,nt,Tt,Rt=p(this),Dt=r(Rt),pt=o(wt,Dt),st=o(void 0===At?Dt:At,Dt);if(e(Rt)&&((t(ot=Rt.constructor)&&(ot===it||e(ot.prototype))||n(ot)&&null===(ot=ot[X]))&&(ot=void 0),ot===it||void 0===ot))return k(Rt,pt,st);for(nt=new(void 0===ot?it:ot)(rt(st-pt,0)),Tt=0;pt<st;pt++,Tt++)pt in Rt&&b(nt,Tt,Rt[pt]);return nt.length=Tt,nt}})},92241:(B,U,v)=>{"use strict";var T=v(99253),a=v(37516),e=v(54346),t=v(88582),n=v(1435),o=v(23349),r=v(94947),p=v(763),I=v(64630)("splice"),x=a.TypeError,k=Math.max,Y=Math.min,X=9007199254740991,it="Maximum allowed length exceeded";T({target:"Array",proto:!0,forced:!I},{splice:function(ct,wt){var st,ot,nt,Tt,Ct,yt,At=o(this),Rt=n(At),Dt=e(ct,Rt),pt=arguments.length;if(0===pt?st=ot=0:1===pt?(st=0,ot=Rt-Dt):(st=pt-2,ot=Y(k(t(wt),0),Rt-Dt)),Rt+st-ot>X)throw x(it);for(nt=r(At,ot),Tt=0;Tt<ot;Tt++)(Ct=Dt+Tt)in At&&p(nt,Tt,At[Ct]);if(nt.length=ot,st<ot){for(Tt=Dt;Tt<Rt-ot;Tt++)yt=Tt+st,(Ct=Tt+ot)in At?At[yt]=At[Ct]:delete At[yt];for(Tt=Rt;Tt>Rt-ot+st;Tt--)delete At[Tt-1]}else if(st>ot)for(Tt=Rt-ot;Tt>Dt;Tt--)yt=Tt+st-1,(Ct=Tt+ot-1)in At?At[yt]=At[Ct]:delete At[yt];for(Tt=0;Tt<st;Tt++)At[Tt+Dt]=arguments[Tt+2];return At.length=Rt-ot+st,nt}})},62260:(B,U,v)=>{var T=v(99253),a=v(37516),e=v(73289),t=v(80626),n=v(45972),o=v(20065),r=a.Array,p=e("JSON","stringify"),b=n(/./.exec),I=n("".charAt),x=n("".charCodeAt),k=n("".replace),Y=n(1..toString),X=/[\uD800-\uDFFF]/g,it=/^[\uD800-\uDBFF]$/,rt=/^[\uDC00-\uDFFF]$/,ct=function(At,Rt,Dt){var pt=I(Dt,Rt-1),st=I(Dt,Rt+1);return b(it,At)&&!b(rt,st)||b(rt,At)&&!b(it,pt)?"\\u"+Y(x(At,0),16):At},wt=o(function(){return'"\\udf06\\ud834"'!==p("\udf06\ud834")||'"\\udead"'!==p("\udead")});p&&T({target:"JSON",stat:!0,forced:wt},{stringify:function(Rt,Dt,pt){for(var st=0,ot=arguments.length,nt=r(ot);st<ot;st++)nt[st]=arguments[st];var Tt=t(p,null,nt);return"string"==typeof Tt?k(Tt,X,ct):Tt}})},10157:(B,U,v)=>{var T=v(37516);v(65702)(T.JSON,"JSON",!0)},30238:()=>{},91487:(B,U,v)=>{var T=v(99253),a=v(36477);T({target:"Object",stat:!0,forced:Object.assign!==a},{assign:a})},40020:(B,U,v)=>{var T=v(99253),a=v(61385);T({target:"Object",stat:!0,forced:!a,sham:!a},{defineProperties:v(25526)})},55523:(B,U,v)=>{var T=v(99253),a=v(61385);T({target:"Object",stat:!0,forced:!a,sham:!a},{defineProperty:v(70762).f})},67777:(B,U,v)=>{var T=v(99253),a=v(37621).entries;T({target:"Object",stat:!0},{entries:function(t){return a(t)}})},32696:(B,U,v)=>{var T=v(99253),a=v(20065),e=v(75880),t=v(59819).f,n=v(61385),o=a(function(){t(1)});T({target:"Object",stat:!0,forced:!n||o,sham:!n},{getOwnPropertyDescriptor:function(b,I){return t(e(b),I)}})},36714:(B,U,v)=>{var T=v(99253),a=v(61385),e=v(8452),t=v(75880),n=v(59819),o=v(763);T({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(p){for(var X,it,b=t(p),I=n.f,x=e(b),k={},Y=0;x.length>Y;)void 0!==(it=I(b,X=x[Y++]))&&o(k,X,it);return k}})},89405:(B,U,v)=>{var T=v(99253),a=v(23349),e=v(47836);T({target:"Object",stat:!0,forced:v(20065)(function(){e(1)})},{keys:function(r){return e(a(r))}})},97045:()=>{},75077:(B,U,v)=>{"use strict";var T=v(99253),a=v(13868),e=v(98204),t=v(2637),n=v(18429),o=v(30772);T({target:"Promise",stat:!0},{allSettled:function(p){var b=this,I=t.f(b),x=I.resolve,k=I.reject,Y=n(function(){var X=e(b.resolve),it=[],rt=0,ct=1;o(p,function(wt){var At=rt++,Rt=!1;ct++,a(X,b,wt).then(function(Dt){Rt||(Rt=!0,it[At]={status:"fulfilled",value:Dt},--ct||x(it))},function(Dt){Rt||(Rt=!0,it[At]={status:"rejected",reason:Dt},--ct||x(it))})}),--ct||x(it)});return Y.error&&k(Y.value),I.promise}})},83218:(B,U,v)=>{"use strict";var T=v(99253),a=v(98204),e=v(73289),t=v(13868),n=v(2637),o=v(18429),r=v(30772),p="No one promise resolved";T({target:"Promise",stat:!0},{any:function(I){var x=this,k=e("AggregateError"),Y=n.f(x),X=Y.resolve,it=Y.reject,rt=o(function(){var ct=a(x.resolve),wt=[],At=0,Rt=1,Dt=!1;r(I,function(pt){var st=At++,ot=!1;Rt++,t(ct,x,pt).then(function(nt){ot||Dt||(Dt=!0,X(nt))},function(nt){ot||Dt||(ot=!0,wt[st]=nt,--Rt||it(new k(wt,p)))})}),--Rt||it(new k(wt,p))});return rt.error&&it(rt.value),Y.promise}})},45895:(B,U,v)=>{"use strict";var T=v(99253),a=v(27316),e=v(99978),t=v(20065),n=v(73289),o=v(91699),r=v(3759),p=v(33898),b=v(46573);if(T({target:"Promise",proto:!0,real:!0,forced:!!e&&t(function(){e.prototype.finally.call({then:function(){}},function(){})})},{finally:function(k){var Y=r(this,n("Promise")),X=o(k);return this.then(X?function(it){return p(Y,k()).then(function(){return it})}:k,X?function(it){return p(Y,k()).then(function(){throw it})}:k)}}),!a&&o(e)){var x=n("Promise").prototype.finally;e.prototype.finally!==x&&b(e.prototype,"finally",x,{unsafe:!0})}},12545:(B,U,v)=>{"use strict";var di,ge,Ve,Zt,T=v(99253),a=v(27316),e=v(37516),t=v(73289),n=v(13868),o=v(99978),r=v(46573),p=v(22239),b=v(74494),I=v(65702),x=v(31333),k=v(98204),Y=v(91699),X=v(883),it=v(74528),rt=v(57761),ct=v(30772),wt=v(78442),At=v(3759),Rt=v(15691).set,Dt=v(6120),pt=v(33898),st=v(28979),ot=v(2637),nt=v(18429),Tt=v(90149),Ct=v(808),yt=v(63211),gt=v(33040),_t=v(7214),Jt=v(93687),Pt=yt("species"),oe="Promise",Ne=Tt.get,Xe=Tt.set,Ce=Tt.getterFor(oe),Ze=o&&o.prototype,we=o,ai=Ze,re=e.TypeError,ce=e.document,Pe=e.process,qe=ot.f,oi=qe,wi=!!(ce&&ce.createEvent&&e.dispatchEvent),Ji=Y(e.PromiseRejectionEvent),Ni="unhandledrejection",fe=!1,$=Ct(oe,function(){var Ue=rt(we),Ke=Ue!==String(we);if(!Ke&&66===Jt||a&&!ai.finally)return!0;if(Jt>=51&&/native code/.test(Ue))return!1;var ne=new we(function(yi){yi(1)}),xe=function(yi){yi(function(){},function(){})};return(ne.constructor={})[Pt]=xe,!(fe=ne.then(function(){})instanceof xe)||!Ke&&gt&&!Ji}),at=$||!wt(function(Ue){we.all(Ue).catch(function(){})}),zt=function(Ue){var Ke;return!(!X(Ue)||!Y(Ke=Ue.then))&&Ke},Qt=function(Ue,Ke){if(!Ue.notified){Ue.notified=!0;var ne=Ue.reactions;Dt(function(){for(var xe=Ue.value,ii=1==Ue.state,yi=0;ne.length>yi;){var Me,kt,Wt,Zi=ne[yi++],ji=ii?Zi.ok:Zi.fail,Ui=Zi.resolve,Xi=Zi.reject,Re=Zi.domain;try{ji?(ii||(2===Ue.rejection&&Di(Ue),Ue.rejection=1),!0===ji?Me=xe:(Re&&Re.enter(),Me=ji(xe),Re&&(Re.exit(),Wt=!0)),Me===Zi.promise?Xi(re("Promise-chain cycle")):(kt=zt(Me))?n(kt,Me,Ui,Xi):Ui(Me)):Xi(xe)}catch(Gt){Re&&!Wt&&Re.exit(),Xi(Gt)}}Ue.reactions=[],Ue.notified=!1,Ke&&!Ue.rejection&&Ee(Ue)})}},ye=function(Ue,Ke,ne){var xe,ii;wi?((xe=ce.createEvent("Event")).promise=Ke,xe.reason=ne,xe.initEvent(Ue,!1,!0),e.dispatchEvent(xe)):xe={promise:Ke,reason:ne},!Ji&&(ii=e["on"+Ue])?ii(xe):Ue===Ni&&st("Unhandled promise rejection",ne)},Ee=function(Ue){n(Rt,e,function(){var ii,Ke=Ue.facade,ne=Ue.value;if(ni(Ue)&&(ii=nt(function(){_t?Pe.emit("unhandledRejection",ne,Ke):ye(Ni,Ke,ne)}),Ue.rejection=_t||ni(Ue)?2:1,ii.error))throw ii.value})},ni=function(Ue){return 1!==Ue.rejection&&!Ue.parent},Di=function(Ue){n(Rt,e,function(){var Ke=Ue.facade;_t?Pe.emit("rejectionHandled",Ke):ye("rejectionhandled",Ke,Ue.value)})},Mi=function(Ue,Ke,ne){return function(xe){Ue(Ke,xe,ne)}},vi=function(Ue,Ke,ne){Ue.done||(Ue.done=!0,ne&&(Ue=ne),Ue.value=Ke,Ue.state=2,Qt(Ue,!0))},pi=function(Ue,Ke,ne){if(!Ue.done){Ue.done=!0,ne&&(Ue=ne);try{if(Ue.facade===Ke)throw re("Promise can't be resolved itself");var xe=zt(Ke);xe?Dt(function(){var ii={done:!1};try{n(xe,Ke,Mi(pi,ii,Ue),Mi(vi,ii,Ue))}catch(yi){vi(ii,yi,Ue)}}):(Ue.value=Ke,Ue.state=1,Qt(Ue,!1))}catch(ii){vi({done:!1},ii,Ue)}}};if($&&(we=function(Ke){it(this,ai),k(Ke),n(di,this);var ne=Ne(this);try{Ke(Mi(pi,ne),Mi(vi,ne))}catch(xe){vi(ne,xe)}},(di=function(Ke){Xe(this,{type:oe,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=p(ai=we.prototype,{then:function(Ke,ne){var xe=Ce(this),ii=xe.reactions,yi=qe(At(this,we));return yi.ok=!Y(Ke)||Ke,yi.fail=Y(ne)&&ne,yi.domain=_t?Pe.domain:void 0,xe.parent=!0,ii[ii.length]=yi,0!=xe.state&&Qt(xe,!1),yi.promise},catch:function(Ue){return this.then(void 0,Ue)}}),ge=function(){var Ue=new di,Ke=Ne(Ue);this.promise=Ue,this.resolve=Mi(pi,Ke),this.reject=Mi(vi,Ke)},ot.f=qe=function(Ue){return Ue===we||Ue===Ve?new ge(Ue):oi(Ue)},!a&&Y(o)&&Ze!==Object.prototype)){Zt=Ze.then,fe||(r(Ze,"then",function(Ke,ne){var xe=this;return new we(function(ii,yi){n(Zt,xe,ii,yi)}).then(Ke,ne)},{unsafe:!0}),r(Ze,"catch",ai.catch,{unsafe:!0}));try{delete Ze.constructor}catch(Ue){}b&&b(Ze,ai)}T({global:!0,wrap:!0,forced:$},{Promise:we}),I(we,oe,!1,!0),x(oe),Ve=t(oe),T({target:oe,stat:!0,forced:$},{reject:function(Ke){var ne=qe(this);return n(ne.reject,void 0,Ke),ne.promise}}),T({target:oe,stat:!0,forced:a||$},{resolve:function(Ke){return pt(a&&this===Ve?we:this,Ke)}}),T({target:oe,stat:!0,forced:at},{all:function(Ke){var ne=this,xe=qe(ne),ii=xe.resolve,yi=xe.reject,Zi=nt(function(){var ji=k(ne.resolve),Ui=[],Xi=0,Re=1;ct(Ke,function(Me){var kt=Xi++,Wt=!1;Re++,n(ji,ne,Me).then(function(Gt){Wt||(Wt=!0,Ui[kt]=Gt,--Re||ii(Ui))},yi)}),--Re||ii(Ui)});return Zi.error&&yi(Zi.value),xe.promise},race:function(Ke){var ne=this,xe=qe(ne),ii=xe.reject,yi=nt(function(){var Zi=k(ne.resolve);ct(Ke,function(ji){n(Zi,ne,ji).then(xe.resolve,ii)})});return yi.error&&ii(yi.value),xe.promise}})},22428:()=>{},96595:(B,U,v)=>{"use strict";var T=v(99253),a=v(45972),e=v(9974),t=v(63805),n=v(37299),o=v(23655),r=a("".indexOf);T({target:"String",proto:!0,forced:!o("includes")},{includes:function(b){return!!~r(n(t(this)),n(e(b)),arguments.length>1?arguments[1]:void 0)}})},62009:(B,U,v)=>{"use strict";var T=v(14924).charAt,a=v(37299),e=v(90149),t=v(68797),n="String Iterator",o=e.set,r=e.getterFor(n);t(String,"String",function(p){o(this,{type:n,string:a(p),index:0})},function(){var k,b=r(this),I=b.string,x=b.index;return x>=I.length?{value:void 0,done:!0}:(k=T(I,x),b.index+=k.length,{value:k,done:!1})})},11322:(B,U,v)=>{"use strict";var it,T=v(99253),a=v(45972),e=v(59819).f,t=v(37159),n=v(37299),o=v(9974),r=v(63805),p=v(23655),b=v(27316),I=a("".startsWith),x=a("".slice),k=Math.min,Y=p("startsWith");T({target:"String",proto:!0,forced:!(!b&&!Y&&(it=e(String.prototype,"startsWith"),it&&!it.writable)||Y)},{startsWith:function(rt){var ct=n(r(this));o(rt);var wt=t(k(arguments.length>1?arguments[1]:void 0,ct.length)),At=n(rt);return I?I(ct,At,wt):x(ct,wt,wt+At.length)===At}})},32159:(B,U,v)=>{v(8254)("asyncIterator")},72450:()=>{},43071:(B,U,v)=>{v(8254)("hasInstance")},34025:(B,U,v)=>{v(8254)("isConcatSpreadable")},19155:(B,U,v)=>{v(8254)("iterator")},33353:(B,U,v)=>{"use strict";var T=v(99253),a=v(37516),e=v(73289),t=v(80626),n=v(13868),o=v(45972),r=v(27316),p=v(61385),b=v(74267),I=v(20065),x=v(7723),k=v(51556),Y=v(91699),X=v(883),it=v(28833),rt=v(17397),ct=v(22696),wt=v(23349),At=v(75880),Rt=v(54053),Dt=v(37299),pt=v(42856),st=v(73821),ot=v(47836),nt=v(92081),Tt=v(69820),Ct=v(62222),yt=v(59819),gt=v(70762),_t=v(52725),Jt=v(13053),Pt=v(46573),oe=v(2389),Ne=v(26103),Xe=v(64842),Ce=v(11789),Ze=v(63211),we=v(42572),ai=v(8254),re=v(65702),ce=v(90149),Pe=v(69720).forEach,qe=Ne("hidden"),oi="Symbol",wi="prototype",Ji=Ze("toPrimitive"),Ni=ce.set,ui=ce.getterFor(oi),Oe=Object[wi],Be=a.Symbol,Ft=Be&&Be[wi],ie=a.TypeError,hi=a.QObject,fe=e("JSON","stringify"),di=yt.f,ge=gt.f,Ve=Tt.f,Zt=_t.f,$=o([].push),at=oe("symbols"),zt=oe("op-symbols"),Qt=oe("string-to-symbol-registry"),ye=oe("symbol-to-string-registry"),Ee=oe("wks"),ni=!hi||!hi[wi]||!hi[wi].findChild,Di=p&&I(function(){return 7!=st(ge({},"a",{get:function(){return ge(this,"a",{value:7}).a}})).a})?function(ji,Ui,Xi){var Re=di(Oe,Ui);Re&&delete Oe[Ui],ge(ji,Ui,Xi),Re&&ji!==Oe&&ge(Oe,Ui,Re)}:ge,Mi=function(ji,Ui){var Xi=at[ji]=st(Ft);return Ni(Xi,{type:oi,tag:ji,description:Ui}),p||(Xi.description=Ui),Xi},vi=function(Ui,Xi,Re){Ui===Oe&&vi(zt,Xi,Re),ct(Ui);var Me=Rt(Xi);return ct(Re),x(at,Me)?(Re.enumerable?(x(Ui,qe)&&Ui[qe][Me]&&(Ui[qe][Me]=!1),Re=st(Re,{enumerable:pt(0,!1)})):(x(Ui,qe)||ge(Ui,qe,pt(1,{})),Ui[qe][Me]=!0),Di(Ui,Me,Re)):ge(Ui,Me,Re)},pi=function(Ui,Xi){ct(Ui);var Re=At(Xi),Me=ot(Re).concat(ii(Re));return Pe(Me,function(kt){(!p||n(Ke,Re,kt))&&vi(Ui,kt,Re[kt])}),Ui},Ke=function(Ui){var Xi=Rt(Ui),Re=n(Zt,this,Xi);return!(this===Oe&&x(at,Xi)&&!x(zt,Xi))&&(!(Re||!x(this,Xi)||!x(at,Xi)||x(this,qe)&&this[qe][Xi])||Re)},ne=function(Ui,Xi){var Re=At(Ui),Me=Rt(Xi);if(Re!==Oe||!x(at,Me)||x(zt,Me)){var kt=di(Re,Me);return kt&&x(at,Me)&&!(x(Re,qe)&&Re[qe][Me])&&(kt.enumerable=!0),kt}},xe=function(Ui){var Xi=Ve(At(Ui)),Re=[];return Pe(Xi,function(Me){!x(at,Me)&&!x(Xe,Me)&&$(Re,Me)}),Re},ii=function(Ui){var Xi=Ui===Oe,Re=Ve(Xi?zt:At(Ui)),Me=[];return Pe(Re,function(kt){x(at,kt)&&(!Xi||x(Oe,kt))&&$(Me,at[kt])}),Me};if(b||(Pt(Ft=(Be=function(){if(it(Ft,this))throw ie("Symbol is not a constructor");var Ui=arguments.length&&void 0!==arguments[0]?Dt(arguments[0]):void 0,Xi=Ce(Ui),Re=function(Me){this===Oe&&n(Re,zt,Me),x(this,qe)&&x(this[qe],Xi)&&(this[qe][Xi]=!1),Di(this,Xi,pt(1,Me))};return p&&ni&&Di(Oe,Xi,{configurable:!0,set:Re}),Mi(Xi,Ui)})[wi],"toString",function(){return ui(this).tag}),Pt(Be,"withoutSetter",function(ji){return Mi(Ce(ji),ji)}),_t.f=Ke,gt.f=vi,yt.f=ne,nt.f=Tt.f=xe,Ct.f=ii,we.f=function(ji){return Mi(Ze(ji),ji)},p&&(ge(Ft,"description",{configurable:!0,get:function(){return ui(this).description}}),r||Pt(Oe,"propertyIsEnumerable",Ke,{unsafe:!0}))),T({global:!0,wrap:!0,forced:!b,sham:!b},{Symbol:Be}),Pe(ot(Ee),function(ji){ai(ji)}),T({target:oi,stat:!0,forced:!b},{for:function(ji){var Ui=Dt(ji);if(x(Qt,Ui))return Qt[Ui];var Xi=Be(Ui);return Qt[Ui]=Xi,ye[Xi]=Ui,Xi},keyFor:function(Ui){if(!rt(Ui))throw ie(Ui+" is not a symbol");if(x(ye,Ui))return ye[Ui]},useSetter:function(){ni=!0},useSimple:function(){ni=!1}}),T({target:"Object",stat:!0,forced:!b,sham:!p},{create:function(Ui,Xi){return void 0===Xi?st(Ui):pi(st(Ui),Xi)},defineProperty:vi,defineProperties:pi,getOwnPropertyDescriptor:ne}),T({target:"Object",stat:!0,forced:!b},{getOwnPropertyNames:xe,getOwnPropertySymbols:ii}),T({target:"Object",stat:!0,forced:I(function(){Ct.f(1)})},{getOwnPropertySymbols:function(Ui){return Ct.f(wt(Ui))}}),fe&&T({target:"JSON",stat:!0,forced:!b||I(function(){var ji=Be();return"[null]"!=fe([ji])||"{}"!=fe({a:ji})||"{}"!=fe(Object(ji))})},{stringify:function(Ui,Xi,Re){var Me=Jt(arguments),kt=Xi;if((X(Xi)||void 0!==Ui)&&!rt(Ui))return k(Xi)||(Xi=function(Wt,Gt){if(Y(kt)&&(Gt=n(kt,this,Wt,Gt)),!rt(Gt))return Gt}),Me[1]=Xi,t(fe,null,Me)}}),!Ft[Ji]){var Zi=Ft.valueOf;Pt(Ft,Ji,function(ji){return n(Zi,this)})}re(Be,oi),Xe[qe]=!0},16576:(B,U,v)=>{v(8254)("matchAll")},64485:(B,U,v)=>{v(8254)("match")},42053:(B,U,v)=>{v(8254)("replace")},96668:(B,U,v)=>{v(8254)("search")},54714:(B,U,v)=>{v(8254)("species")},20437:(B,U,v)=>{v(8254)("split")},11979:(B,U,v)=>{v(8254)("toPrimitive")},78559:(B,U,v)=>{v(8254)("toStringTag")},59450:(B,U,v)=>{v(8254)("unscopables")},82695:(B,U,v)=>{"use strict";var k,T=v(37516),a=v(45972),e=v(22239),t=v(48016),n=v(7448),o=v(39754),r=v(883),p=v(2577),b=v(90149).enforce,I=v(74381),x=!T.ActiveXObject&&"ActiveXObject"in T,Y=function(Rt){return function(){return Rt(this,arguments.length?arguments[0]:void 0)}},X=n("WeakMap",Y,o);if(I&&x){k=o.getConstructor(Y,"WeakMap",!0),t.enable();var it=X.prototype,rt=a(it.delete),ct=a(it.has),wt=a(it.get),At=a(it.set);e(it,{delete:function(Rt){if(r(Rt)&&!p(Rt)){var Dt=b(this);return Dt.frozen||(Dt.frozen=new k),rt(this,Rt)||Dt.frozen.delete(Rt)}return rt(this,Rt)},has:function(Dt){if(r(Dt)&&!p(Dt)){var pt=b(this);return pt.frozen||(pt.frozen=new k),ct(this,Dt)||pt.frozen.has(Dt)}return ct(this,Dt)},get:function(Dt){if(r(Dt)&&!p(Dt)){var pt=b(this);return pt.frozen||(pt.frozen=new k),ct(this,Dt)?wt(this,Dt):pt.frozen.get(Dt)}return wt(this,Dt)},set:function(Dt,pt){if(r(Dt)&&!p(Dt)){var st=b(this);st.frozen||(st.frozen=new k),ct(this,Dt)?At(this,Dt,pt):st.frozen.set(Dt,pt)}else At(this,Dt,pt);return this}})}},62373:(B,U,v)=>{v(52935)},18168:(B,U,v)=>{v(75077)},25831:(B,U,v)=>{v(83218)},73944:(B,U,v)=>{"use strict";var T=v(99253),a=v(2637),e=v(18429);T({target:"Promise",stat:!0},{try:function(t){var n=a.f(this),o=e(t);return(o.error?n.reject:n.resolve)(o.value),n.promise}})},42673:(B,U,v)=>{v(8254)("asyncDispose")},34286:(B,U,v)=>{v(8254)("dispose")},73695:(B,U,v)=>{v(8254)("matcher")},13990:(B,U,v)=>{v(8254)("metadata")},69181:(B,U,v)=>{v(8254)("observable")},11686:(B,U,v)=>{v(8254)("patternMatch")},84430:(B,U,v)=>{v(8254)("replaceAll")},10713:(B,U,v)=>{v(64741);var T=v(70808),a=v(37516),e=v(98330),t=v(6103),n=v(48626),r=v(63211)("toStringTag");for(var p in T){var b=a[p],I=b&&b.prototype;I&&e(I)!==r&&t(I,r,p),n[p]=n.Array}},37298:(B,U,v)=>{"use strict";v(64741);var T=v(99253),a=v(37516),e=v(73289),t=v(13868),n=v(45972),o=v(71665),r=v(46573),p=v(22239),b=v(65702),I=v(59571),x=v(90149),k=v(74528),Y=v(91699),X=v(7723),it=v(88509),rt=v(98330),ct=v(22696),wt=v(883),At=v(37299),Rt=v(73821),Dt=v(42856),pt=v(13020),st=v(62439),ot=v(63211),nt=v(95264),Tt=ot("iterator"),Ct="URLSearchParams",yt=Ct+"Iterator",gt=x.set,_t=x.getterFor(Ct),Jt=x.getterFor(yt),Pt=e("fetch"),oe=e("Request"),Ne=e("Headers"),Xe=oe&&oe.prototype,Ce=Ne&&Ne.prototype,Ze=a.RegExp,we=a.TypeError,ai=a.decodeURIComponent,re=a.encodeURIComponent,ce=n("".charAt),Pe=n([].join),qe=n([].push),oi=n("".replace),wi=n([].shift),Ji=n([].splice),Ni=n("".split),ui=n("".slice),Oe=/\+/g,Be=Array(4),Ft=function(vi){return Be[vi-1]||(Be[vi-1]=Ze("((?:%[\\da-f]{2}){"+vi+"})","gi"))},ie=function(vi){try{return ai(vi)}catch(pi){return vi}},hi=function(vi){var pi=oi(vi,Oe," "),Ue=4;try{return ai(pi)}catch(Ke){for(;Ue;)pi=oi(pi,Ft(Ue--),ie);return pi}},fe=/[!'()~]|%20/g,di={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},ge=function(vi){return di[vi]},Ve=function(vi){return oi(re(vi),fe,ge)},Zt=function(vi,pi){if(pi)for(var ne,xe,Ue=Ni(pi,"&"),Ke=0;Ke<Ue.length;)(ne=Ue[Ke++]).length&&(xe=Ni(ne,"="),qe(vi,{key:hi(wi(xe)),value:hi(Pe(xe,"="))}))},$=function(vi){this.entries.length=0,Zt(this.entries,vi)},at=function(vi,pi){if(vi<pi)throw we("Not enough arguments")},zt=I(function(pi,Ue){gt(this,{type:yt,iterator:pt(_t(pi).entries),kind:Ue})},"Iterator",function(){var pi=Jt(this),Ue=pi.kind,Ke=pi.iterator.next(),ne=Ke.value;return Ke.done||(Ke.value="keys"===Ue?ne.key:"values"===Ue?ne.value:[ne.key,ne.value]),Ke}),Qt=function(){k(this,ye);var ne,xe,ii,yi,Zi,ji,Ui,Xi,Re,pi=arguments.length>0?arguments[0]:void 0,Ue=this,Ke=[];if(gt(Ue,{type:Ct,entries:Ke,updateURL:function(){},updateSearchParams:$}),void 0!==pi)if(wt(pi))if(ne=st(pi))for(ii=(xe=pt(pi,ne)).next;!(yi=t(ii,xe)).done;){if(Zi=pt(ct(yi.value)),(Ui=t(ji=Zi.next,Zi)).done||(Xi=t(ji,Zi)).done||!t(ji,Zi).done)throw we("Expected sequence with length 2");qe(Ke,{key:At(Ui.value),value:At(Xi.value)})}else for(Re in pi)X(pi,Re)&&qe(Ke,{key:Re,value:At(pi[Re])});else Zt(Ke,"string"==typeof pi?"?"===ce(pi,0)?ui(pi,1):pi:At(pi))},ye=Qt.prototype;if(p(ye,{append:function(pi,Ue){at(arguments.length,2);var Ke=_t(this);qe(Ke.entries,{key:At(pi),value:At(Ue)}),Ke.updateURL()},delete:function(vi){at(arguments.length,1);for(var pi=_t(this),Ue=pi.entries,Ke=At(vi),ne=0;ne<Ue.length;)Ue[ne].key===Ke?Ji(Ue,ne,1):ne++;pi.updateURL()},get:function(pi){at(arguments.length,1);for(var Ue=_t(this).entries,Ke=At(pi),ne=0;ne<Ue.length;ne++)if(Ue[ne].key===Ke)return Ue[ne].value;return null},getAll:function(pi){at(arguments.length,1);for(var Ue=_t(this).entries,Ke=At(pi),ne=[],xe=0;xe<Ue.length;xe++)Ue[xe].key===Ke&&qe(ne,Ue[xe].value);return ne},has:function(pi){at(arguments.length,1);for(var Ue=_t(this).entries,Ke=At(pi),ne=0;ne<Ue.length;)if(Ue[ne++].key===Ke)return!0;return!1},set:function(pi,Ue){at(arguments.length,1);for(var ji,Ke=_t(this),ne=Ke.entries,xe=!1,ii=At(pi),yi=At(Ue),Zi=0;Zi<ne.length;Zi++)(ji=ne[Zi]).key===ii&&(xe?Ji(ne,Zi--,1):(xe=!0,ji.value=yi));xe||qe(ne,{key:ii,value:yi}),Ke.updateURL()},sort:function(){var pi=_t(this);nt(pi.entries,function(Ue,Ke){return Ue.key>Ke.key?1:-1}),pi.updateURL()},forEach:function(pi){for(var xe,Ue=_t(this).entries,Ke=it(pi,arguments.length>1?arguments[1]:void 0),ne=0;ne<Ue.length;)Ke((xe=Ue[ne++]).value,xe.key,this)},keys:function(){return new zt(this,"keys")},values:function(){return new zt(this,"values")},entries:function(){return new zt(this,"entries")}},{enumerable:!0}),r(ye,Tt,ye.entries,{name:"entries"}),r(ye,"toString",function(){for(var ne,pi=_t(this).entries,Ue=[],Ke=0;Ke<pi.length;)ne=pi[Ke++],qe(Ue,Ve(ne.key)+"="+Ve(ne.value));return Pe(Ue,"&")},{enumerable:!0}),b(Qt,Ct),T({global:!0,forced:!o},{URLSearchParams:Qt}),!o&&Y(Ne)){var Ee=n(Ce.has),ni=n(Ce.set),Di=function(vi){if(wt(vi)){var Ue,pi=vi.body;if(rt(pi)===Ct)return Ue=vi.headers?new Ne(vi.headers):new Ne,Ee(Ue,"content-type")||ni(Ue,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),Rt(vi,{body:Dt(0,At(pi)),headers:Dt(0,Ue)})}return vi};if(Y(Pt)&&T({global:!0,enumerable:!0,forced:!0},{fetch:function(pi){return Pt(pi,arguments.length>1?Di(arguments[1]):{})}}),Y(oe)){var Mi=function(pi){return k(this,Xe),new oe(pi,arguments.length>1?Di(arguments[1]):{})};Xe.constructor=Mi,Mi.prototype=Xe,T({global:!0,forced:!0},{Request:Mi})}}B.exports={URLSearchParams:Qt,getState:_t}},96353:(B,U,v)=>{var T=v(23813);B.exports=T},18830:(B,U,v)=>{var T=v(89740);B.exports=T},76023:(B,U,v)=>{var T=v(34014);B.exports=T},88051:(B,U,v)=>{var T=v(47957);B.exports=T},92578:(B,U,v)=>{var T=v(48873);v(10713),B.exports=T},85671:(B,U,v)=>{var T=v(233);B.exports=T},60580:(B,U,v)=>{v(10713);var T=v(98330),a=v(7723),e=v(28833),t=v(76023),n=Array.prototype,o={DOMTokenList:!0,NodeList:!0};B.exports=function(r){var p=r.entries;return r===n||e(n,r)&&p===n.entries||a(o,T(r))?t:p}},26271:(B,U,v)=>{var T=v(32263);B.exports=T},82237:(B,U,v)=>{var T=v(81754);B.exports=T},6506:(B,U,v)=>{v(10713);var T=v(98330),a=v(7723),e=v(28833),t=v(88051),n=Array.prototype,o={DOMTokenList:!0,NodeList:!0};B.exports=function(r){var p=r.forEach;return r===n||e(n,r)&&p===n.forEach||a(o,T(r))?t:p}},26944:(B,U,v)=>{var T=v(46397);B.exports=T},28532:(B,U,v)=>{var T=v(88699);B.exports=T},3245:(B,U,v)=>{var T=v(24454);B.exports=T},34123:(B,U,v)=>{var T=v(18422);B.exports=T},43264:(B,U,v)=>{var T=v(13807);B.exports=T},75991:(B,U,v)=>{var T=v(13194);B.exports=T},65155:(B,U,v)=>{var T=v(20573);B.exports=T},80301:(B,U,v)=>{var T=v(49483);B.exports=T},62217:(B,U,v)=>{var T=v(12171);B.exports=T},14893:(B,U,v)=>{var T=v(39469);B.exports=T},81145:(B,U,v)=>{var T=v(24911);B.exports=T},52572:(B,U,v)=>{var T=v(942);B.exports=T},17608:(B,U,v)=>{var T=v(46592);B.exports=T},27567:(B,U,v)=>{var T=v(51594);B.exports=T},158:(B,U,v)=>{var T=v(87079);B.exports=T},27620:(B,U,v)=>{var T=v(42654);v(10713),B.exports=T},75743:(B,U,v)=>{var T=v(59366);v(10713),B.exports=T},40359:(B,U,v)=>{var T=v(48926);v(10713),B.exports=T},37254:(B,U,v)=>{var T=v(34271);v(10713),B.exports=T},30770:(B,U,v)=>{var T=v(1796);v(10713),B.exports=T},34271:(B,U,v)=>{v(37298);var T=v(83271);B.exports=T.URLSearchParams},9874:function(){var B;B="undefined"!=typeof self?self:this,function(v){var T_searchParams="URLSearchParams"in B,T_iterable="Symbol"in B&&"iterator"in Symbol,T_blob="FileReader"in B&&"Blob"in B&&function(){try{return new Blob,!0}catch(ot){return!1}}(),T_formData="FormData"in B,T_arrayBuffer="ArrayBuffer"in B;if(T_arrayBuffer)var e=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],t=ArrayBuffer.isView||function(ot){return ot&&e.indexOf(Object.prototype.toString.call(ot))>-1};function n(ot){if("string"!=typeof ot&&(ot=String(ot)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(ot))throw new TypeError("Invalid character in header field name");return ot.toLowerCase()}function o(ot){return"string"!=typeof ot&&(ot=String(ot)),ot}function r(ot){var nt={next:function(){var Tt=ot.shift();return{done:void 0===Tt,value:Tt}}};return T_iterable&&(nt[Symbol.iterator]=function(){return nt}),nt}function p(ot){this.map={},ot instanceof p?ot.forEach(function(nt,Tt){this.append(Tt,nt)},this):Array.isArray(ot)?ot.forEach(function(nt){this.append(nt[0],nt[1])},this):ot&&Object.getOwnPropertyNames(ot).forEach(function(nt){this.append(nt,ot[nt])},this)}function b(ot){if(ot.bodyUsed)return Promise.reject(new TypeError("Already read"));ot.bodyUsed=!0}function I(ot){return new Promise(function(nt,Tt){ot.onload=function(){nt(ot.result)},ot.onerror=function(){Tt(ot.error)}})}function x(ot){var nt=new FileReader,Tt=I(nt);return nt.readAsArrayBuffer(ot),Tt}function X(ot){if(ot.slice)return ot.slice(0);var nt=new Uint8Array(ot.byteLength);return nt.set(new Uint8Array(ot)),nt.buffer}function it(){return this.bodyUsed=!1,this._initBody=function(ot){this._bodyInit=ot,ot?"string"==typeof ot?this._bodyText=ot:T_blob&&Blob.prototype.isPrototypeOf(ot)?this._bodyBlob=ot:T_formData&&FormData.prototype.isPrototypeOf(ot)?this._bodyFormData=ot:T_searchParams&&URLSearchParams.prototype.isPrototypeOf(ot)?this._bodyText=ot.toString():T_arrayBuffer&&T_blob&&function(ot){return ot&&DataView.prototype.isPrototypeOf(ot)}(ot)?(this._bodyArrayBuffer=X(ot.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):T_arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(ot)||t(ot))?this._bodyArrayBuffer=X(ot):this._bodyText=ot=Object.prototype.toString.call(ot):this._bodyText="",this.headers.get("content-type")||("string"==typeof ot?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):T_searchParams&&URLSearchParams.prototype.isPrototypeOf(ot)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},T_blob&&(this.blob=function(){var ot=b(this);if(ot)return ot;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?b(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(x)}),this.text=function(){var ot=b(this);if(ot)return ot;if(this._bodyBlob)return function(ot){var nt=new FileReader,Tt=I(nt);return nt.readAsText(ot),Tt}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(ot){for(var nt=new Uint8Array(ot),Tt=new Array(nt.length),Ct=0;Ct<nt.length;Ct++)Tt[Ct]=String.fromCharCode(nt[Ct]);return Tt.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},T_formData&&(this.formData=function(){return this.text().then(At)}),this.json=function(){return this.text().then(JSON.parse)},this}p.prototype.append=function(ot,nt){ot=n(ot),nt=o(nt);var Tt=this.map[ot];this.map[ot]=Tt?Tt+", "+nt:nt},p.prototype.delete=function(ot){delete this.map[n(ot)]},p.prototype.get=function(ot){return ot=n(ot),this.has(ot)?this.map[ot]:null},p.prototype.has=function(ot){return this.map.hasOwnProperty(n(ot))},p.prototype.set=function(ot,nt){this.map[n(ot)]=o(nt)},p.prototype.forEach=function(ot,nt){for(var Tt in this.map)this.map.hasOwnProperty(Tt)&&ot.call(nt,this.map[Tt],Tt,this)},p.prototype.keys=function(){var ot=[];return this.forEach(function(nt,Tt){ot.push(Tt)}),r(ot)},p.prototype.values=function(){var ot=[];return this.forEach(function(nt){ot.push(nt)}),r(ot)},p.prototype.entries=function(){var ot=[];return this.forEach(function(nt,Tt){ot.push([Tt,nt])}),r(ot)},T_iterable&&(p.prototype[Symbol.iterator]=p.prototype.entries);var rt=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function wt(ot,nt){var Tt=(nt=nt||{}).body;if(ot instanceof wt){if(ot.bodyUsed)throw new TypeError("Already read");this.url=ot.url,this.credentials=ot.credentials,nt.headers||(this.headers=new p(ot.headers)),this.method=ot.method,this.mode=ot.mode,this.signal=ot.signal,!Tt&&null!=ot._bodyInit&&(Tt=ot._bodyInit,ot.bodyUsed=!0)}else this.url=String(ot);if(this.credentials=nt.credentials||this.credentials||"same-origin",(nt.headers||!this.headers)&&(this.headers=new p(nt.headers)),this.method=function(ot){var nt=ot.toUpperCase();return rt.indexOf(nt)>-1?nt:ot}(nt.method||this.method||"GET"),this.mode=nt.mode||this.mode||null,this.signal=nt.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&Tt)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(Tt)}function At(ot){var nt=new FormData;return ot.trim().split("&").forEach(function(Tt){if(Tt){var Ct=Tt.split("="),yt=Ct.shift().replace(/\+/g," "),gt=Ct.join("=").replace(/\+/g," ");nt.append(decodeURIComponent(yt),decodeURIComponent(gt))}}),nt}function Rt(ot){var nt=new p;return ot.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(Ct){var yt=Ct.split(":"),gt=yt.shift().trim();if(gt){var _t=yt.join(":").trim();nt.append(gt,_t)}}),nt}function Dt(ot,nt){nt||(nt={}),this.type="default",this.status=void 0===nt.status?200:nt.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in nt?nt.statusText:"OK",this.headers=new p(nt.headers),this.url=nt.url||"",this._initBody(ot)}wt.prototype.clone=function(){return new wt(this,{body:this._bodyInit})},it.call(wt.prototype),it.call(Dt.prototype),Dt.prototype.clone=function(){return new Dt(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},Dt.error=function(){var ot=new Dt(null,{status:0,statusText:""});return ot.type="error",ot};var pt=[301,302,303,307,308];Dt.redirect=function(ot,nt){if(-1===pt.indexOf(nt))throw new RangeError("Invalid status code");return new Dt(null,{status:nt,headers:{location:ot}})},v.DOMException=B.DOMException;try{new v.DOMException}catch(ot){v.DOMException=function(nt,Tt){this.message=nt,this.name=Tt;var Ct=Error(nt);this.stack=Ct.stack},v.DOMException.prototype=Object.create(Error.prototype),v.DOMException.prototype.constructor=v.DOMException}function st(ot,nt){return new Promise(function(Tt,Ct){var yt=new wt(ot,nt);if(yt.signal&&yt.signal.aborted)return Ct(new v.DOMException("Aborted","AbortError"));var gt=new XMLHttpRequest;function _t(){gt.abort()}gt.onload=function(){var Jt={status:gt.status,statusText:gt.statusText,headers:Rt(gt.getAllResponseHeaders()||"")};Jt.url="responseURL"in gt?gt.responseURL:Jt.headers.get("X-Request-URL"),Tt(new Dt("response"in gt?gt.response:gt.responseText,Jt))},gt.onerror=function(){Ct(new TypeError("Network request failed"))},gt.ontimeout=function(){Ct(new TypeError("Network request failed"))},gt.onabort=function(){Ct(new v.DOMException("Aborted","AbortError"))},gt.open(yt.method,yt.url,!0),"include"===yt.credentials?gt.withCredentials=!0:"omit"===yt.credentials&&(gt.withCredentials=!1),"responseType"in gt&&T_blob&&(gt.responseType="blob"),yt.headers.forEach(function(Jt,Pt){gt.setRequestHeader(Pt,Jt)}),yt.signal&&(yt.signal.addEventListener("abort",_t),gt.onreadystatechange=function(){4===gt.readyState&&yt.signal.removeEventListener("abort",_t)}),gt.send(void 0===yt._bodyInit?null:yt._bodyInit)})}st.polyfill=!0,B.fetch||(B.fetch=st,B.Headers=p,B.Request=wt,B.Response=Dt),v.Headers=p,v.Request=wt,v.Response=Dt,v.fetch=st,Object.defineProperty(v,"__esModule",{value:!0})}({})},80915:B=>{"use strict";function U(t){return t instanceof Buffer||t instanceof Date||t instanceof RegExp}function v(t){if(t instanceof Buffer){var n=Buffer.alloc?Buffer.alloc(t.length):new Buffer(t.length);return t.copy(n),n}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return new RegExp(t);throw new Error("Unexpected situation")}function T(t){var n=[];return t.forEach(function(o,r){n[r]="object"==typeof o&&null!==o?Array.isArray(o)?T(o):U(o)?v(o):e({},o):o}),n}function a(t,n){return"__proto__"===n?void 0:t[n]}var e=B.exports=function(){if(arguments.length<1||"object"!=typeof arguments[0])return!1;if(arguments.length<2)return arguments[0];var o,r,t=arguments[0],n=Array.prototype.slice.call(arguments,1);return n.forEach(function(b){"object"!=typeof b||null===b||Array.isArray(b)||Object.keys(b).forEach(function(I){if(r=a(t,I),(o=a(b,I))!==t)return"object"!=typeof o||null===o?void(t[I]=o):Array.isArray(o)?void(t[I]=T(o)):U(o)?void(t[I]=v(o)):"object"!=typeof r||null===r||Array.isArray(r)?void(t[I]=e({},o)):void(t[I]=e(r,o))})}),t}},74694:function(B,U){var v,a;void 0!==(a="function"==typeof(v=function(){"use strict";function t(I,x,k){var Y=new XMLHttpRequest;Y.open("GET",I),Y.responseType="blob",Y.onload=function(){b(Y.response,x,k)},Y.onerror=function(){console.error("could not download file")},Y.send()}function n(I){var x=new XMLHttpRequest;x.open("HEAD",I,!1);try{x.send()}catch(k){}return 200<=x.status&&299>=x.status}function o(I){try{I.dispatchEvent(new MouseEvent("click"))}catch(k){var x=document.createEvent("MouseEvents");x.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),I.dispatchEvent(x)}}var r="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,p=r.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),b=r.saveAs||("object"!=typeof window||window!==r?function(){}:"download"in HTMLAnchorElement.prototype&&!p?function(I,x,k){var Y=r.URL||r.webkitURL,X=document.createElement("a");X.download=x=x||I.name||"download",X.rel="noopener","string"==typeof I?(X.href=I,X.origin===location.origin?o(X):n(X.href)?t(I,x,k):o(X,X.target="_blank")):(X.href=Y.createObjectURL(I),setTimeout(function(){Y.revokeObjectURL(X.href)},4e4),setTimeout(function(){o(X)},0))}:"msSaveOrOpenBlob"in navigator?function(I,x,k){if(x=x||I.name||"download","string"!=typeof I)navigator.msSaveOrOpenBlob(function(I,x){return void 0===x?x={autoBom:!1}:"object"!=typeof x&&(console.warn("Deprecated: Expected third argument to be a object"),x={autoBom:!x}),x.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(I.type)?new Blob(["\ufeff",I],{type:I.type}):I}(I,k),x);else if(n(I))t(I,x,k);else{var Y=document.createElement("a");Y.href=I,Y.target="_blank",setTimeout(function(){o(Y)})}}:function(I,x,k,Y){if((Y=Y||open("","_blank"))&&(Y.document.title=Y.document.body.innerText="downloading..."),"string"==typeof I)return t(I,x,k);var X="application/octet-stream"===I.type,it=/constructor/i.test(r.HTMLElement)||r.safari,rt=/CriOS\/[\d]+/.test(navigator.userAgent);if((rt||X&&it||p)&&"undefined"!=typeof FileReader){var ct=new FileReader;ct.onloadend=function(){var Rt=ct.result;Rt=rt?Rt:Rt.replace(/^data:[^;]*;/,"data:attachment/file;"),Y?Y.location.href=Rt:location=Rt,Y=null},ct.readAsDataURL(I)}else{var wt=r.URL||r.webkitURL,At=wt.createObjectURL(I);Y?Y.location=At:location.href=At,Y=null,setTimeout(function(){wt.revokeObjectURL(At)},4e4)}});r.saveAs=b.saveAs=b,B.exports=b})?v.apply(U,[]):v)&&(B.exports=a)},51359:B=>{"use strict";var U="Function.prototype.bind called on incompatible ",v=Array.prototype.slice,T=Object.prototype.toString,a="[object Function]";B.exports=function(t){var n=this;if("function"!=typeof n||T.call(n)!==a)throw new TypeError(U+n);for(var r,o=v.call(arguments,1),p=function(){if(this instanceof r){var Y=n.apply(this,o.concat(v.call(arguments)));return Object(Y)===Y?Y:this}return n.apply(t,o.concat(v.call(arguments)))},b=Math.max(0,n.length-o.length),I=[],x=0;x<b;x++)I.push("$"+x);if(r=Function("binder","return function ("+I.join(",")+"){ return binder.apply(this,arguments); }")(p),n.prototype){var k=function(){};k.prototype=n.prototype,r.prototype=new k,k.prototype=null}return r}},21857:(B,U,v)=>{"use strict";var T=v(51359);B.exports=Function.prototype.bind||T},93602:(B,U,v)=>{"use strict";var T,a=SyntaxError,e=Function,t=TypeError,n=function(Tt){try{return e('"use strict"; return ('+Tt+").constructor;")()}catch(Ct){}},o=Object.getOwnPropertyDescriptor;if(o)try{o({},"")}catch(Tt){o=null}var r=function(){throw new t},p=o?function(){try{return r}catch(Tt){try{return o(arguments,"callee").get}catch(Ct){return r}}}():r,b=v(33715)(),I=Object.getPrototypeOf||function(Tt){return Tt.__proto__},x={},k="undefined"==typeof Uint8Array?T:I(Uint8Array),Y={"%AggregateError%":"undefined"==typeof AggregateError?T:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?T:ArrayBuffer,"%ArrayIteratorPrototype%":b?I([][Symbol.iterator]()):T,"%AsyncFromSyncIteratorPrototype%":T,"%AsyncFunction%":x,"%AsyncGenerator%":x,"%AsyncGeneratorFunction%":x,"%AsyncIteratorPrototype%":x,"%Atomics%":"undefined"==typeof Atomics?T:Atomics,"%BigInt%":"undefined"==typeof BigInt?T:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?T:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?T:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?T:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?T:FinalizationRegistry,"%Function%":e,"%GeneratorFunction%":x,"%Int8Array%":"undefined"==typeof Int8Array?T:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?T:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?T:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":b?I(I([][Symbol.iterator]())):T,"%JSON%":"object"==typeof JSON?JSON:T,"%Map%":"undefined"==typeof Map?T:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&b?I((new Map)[Symbol.iterator]()):T,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?T:Promise,"%Proxy%":"undefined"==typeof Proxy?T:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?T:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?T:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&b?I((new Set)[Symbol.iterator]()):T,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?T:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":b?I(""[Symbol.iterator]()):T,"%Symbol%":b?Symbol:T,"%SyntaxError%":a,"%ThrowTypeError%":p,"%TypedArray%":k,"%TypeError%":t,"%Uint8Array%":"undefined"==typeof Uint8Array?T:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?T:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?T:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?T:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?T:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?T:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?T:WeakSet},X=function Tt(Ct){var yt;if("%AsyncFunction%"===Ct)yt=n("async function () {}");else if("%GeneratorFunction%"===Ct)yt=n("function* () {}");else if("%AsyncGeneratorFunction%"===Ct)yt=n("async function* () {}");else if("%AsyncGenerator%"===Ct){var gt=Tt("%AsyncGeneratorFunction%");gt&&(yt=gt.prototype)}else if("%AsyncIteratorPrototype%"===Ct){var _t=Tt("%AsyncGenerator%");_t&&(yt=I(_t.prototype))}return Y[Ct]=yt,yt},it={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},rt=v(21857),ct=v(26761),wt=rt.call(Function.call,Array.prototype.concat),At=rt.call(Function.apply,Array.prototype.splice),Rt=rt.call(Function.call,String.prototype.replace),Dt=rt.call(Function.call,String.prototype.slice),pt=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,st=/\\(\\)?/g,ot=function(Ct){var yt=Dt(Ct,0,1),gt=Dt(Ct,-1);if("%"===yt&&"%"!==gt)throw new a("invalid intrinsic syntax, expected closing `%`");if("%"===gt&&"%"!==yt)throw new a("invalid intrinsic syntax, expected opening `%`");var _t=[];return Rt(Ct,pt,function(Jt,Pt,oe,Ne){_t[_t.length]=oe?Rt(Ne,st,"$1"):Pt||Jt}),_t},nt=function(Ct,yt){var _t,gt=Ct;if(ct(it,gt)&&(gt="%"+(_t=it[gt])[0]+"%"),ct(Y,gt)){var Jt=Y[gt];if(Jt===x&&(Jt=X(gt)),void 0===Jt&&!yt)throw new t("intrinsic "+Ct+" exists, but is not available. Please file an issue!");return{alias:_t,name:gt,value:Jt}}throw new a("intrinsic "+Ct+" does not exist!")};B.exports=function(Ct,yt){if("string"!=typeof Ct||0===Ct.length)throw new t("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof yt)throw new t('"allowMissing" argument must be a boolean');var gt=ot(Ct),_t=gt.length>0?gt[0]:"",Jt=nt("%"+_t+"%",yt),Pt=Jt.name,oe=Jt.value,Ne=!1,Xe=Jt.alias;Xe&&(_t=Xe[0],At(gt,wt([0,1],Xe)));for(var Ce=1,Ze=!0;Ce<gt.length;Ce+=1){var we=gt[Ce],ai=Dt(we,0,1),re=Dt(we,-1);if(('"'===ai||"'"===ai||"`"===ai||'"'===re||"'"===re||"`"===re)&&ai!==re)throw new a("property names with quotes must have matching quotes");if(("constructor"===we||!Ze)&&(Ne=!0),ct(Y,Pt="%"+(_t+="."+we)+"%"))oe=Y[Pt];else if(null!=oe){if(!(we in oe)){if(!yt)throw new t("base intrinsic for "+Ct+" exists, but the property is not available.");return}if(o&&Ce+1>=gt.length){var ce=o(oe,we);oe=(Ze=!!ce)&&"get"in ce&&!("originalValue"in ce.get)?ce.get:oe[we]}else Ze=ct(oe,we),oe=oe[we];Ze&&!Ne&&(Y[Pt]=oe)}}return oe}},33715:(B,U,v)=>{"use strict";var T="undefined"!=typeof Symbol&&Symbol,a=v(26069);B.exports=function(){return"function"==typeof T&&"function"==typeof Symbol&&"symbol"==typeof T("foo")&&"symbol"==typeof Symbol("bar")&&a()}},26069:B=>{"use strict";B.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var v={},T=Symbol("test"),a=Object(T);if("string"==typeof T||"[object Symbol]"!==Object.prototype.toString.call(T)||"[object Symbol]"!==Object.prototype.toString.call(a))return!1;for(T in v[T]=42,v)return!1;if("function"==typeof Object.keys&&0!==Object.keys(v).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(v).length)return!1;var t=Object.getOwnPropertySymbols(v);if(1!==t.length||t[0]!==T||!Object.prototype.propertyIsEnumerable.call(v,T))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var n=Object.getOwnPropertyDescriptor(v,T);if(42!==n.value||!0!==n.enumerable)return!1}return!0}},26761:(B,U,v)=>{"use strict";var T=v(21857);B.exports=T.call(Function.call,Object.prototype.hasOwnProperty)},19556:B=>{var ne,v="__lodash_hash_undefined__",T=1/0,n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/,r=/^\./,p=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,I=/\\(\\)?/g,x=/^\[object .+?Constructor\]$/,k="object"==typeof global&&global&&global.Object===Object&&global,Y="object"==typeof self&&self&&self.Object===Object&&self,X=k||Y||Function("return this")(),ct=Array.prototype,wt=Function.prototype,At=Object.prototype,Rt=X["__core-js_shared__"],Dt=(ne=/[^.]+$/.exec(Rt&&Rt.keys&&Rt.keys.IE_PROTO||""))?"Symbol(src)_1."+ne:"",pt=wt.toString,st=At.hasOwnProperty,ot=At.toString,nt=RegExp("^"+pt.call(st).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Tt=X.Symbol,Ct=ct.splice,yt=ge(X,"Map"),gt=ge(Object,"create"),_t=Tt?Tt.prototype:void 0,Jt=_t?_t.toString:void 0;function Pt(ne){var xe=-1,ii=ne?ne.length:0;for(this.clear();++xe<ii;){var yi=ne[xe];this.set(yi[0],yi[1])}}function we(ne){var xe=-1,ii=ne?ne.length:0;for(this.clear();++xe<ii;){var yi=ne[xe];this.set(yi[0],yi[1])}}function oi(ne){var xe=-1,ii=ne?ne.length:0;for(this.clear();++xe<ii;){var yi=ne[xe];this.set(yi[0],yi[1])}}function Be(ne,xe){for(var ii=ne.length;ii--;)if(Ee(ne[ii][0],xe))return ii;return-1}function di(ne,xe){var ii=ne.__data__;return function(ne){var xe=typeof ne;return"string"==xe||"number"==xe||"symbol"==xe||"boolean"==xe?"__proto__"!==ne:null===ne}(xe)?ii["string"==typeof xe?"string":"hash"]:ii.map}function ge(ne,xe){var ii=function(ne,xe){return null==ne?void 0:ne[xe]}(ne,xe);return function(ne){return!(!Mi(ne)||function(ne){return!!Dt&&Dt in ne}(ne))&&(function(ne){var xe=Mi(ne)?ot.call(ne):"";return"[object Function]"==xe||"[object GeneratorFunction]"==xe}(ne)||function(ne){var xe=!1;if(null!=ne&&"function"!=typeof ne.toString)try{xe=!!(ne+"")}catch(ii){}return xe}(ne)?nt:x).test(function(ne){if(null!=ne){try{return pt.call(ne)}catch(xe){}try{return ne+""}catch(xe){}}return""}(ne))}(ii)?ii:void 0}Pt.prototype.clear=function(){this.__data__=gt?gt(null):{}},Pt.prototype.delete=function(ne){return this.has(ne)&&delete this.__data__[ne]},Pt.prototype.get=function(ne){var xe=this.__data__;if(gt){var ii=xe[ne];return ii===v?void 0:ii}return st.call(xe,ne)?xe[ne]:void 0},Pt.prototype.has=function(ne){var xe=this.__data__;return gt?void 0!==xe[ne]:st.call(xe,ne)},Pt.prototype.set=function(ne,xe){return this.__data__[ne]=gt&&void 0===xe?v:xe,this},we.prototype.clear=function(){this.__data__=[]},we.prototype.delete=function(ne){var xe=this.__data__,ii=Be(xe,ne);return!(ii<0||(ii==xe.length-1?xe.pop():Ct.call(xe,ii,1),0))},we.prototype.get=function(ne){var xe=this.__data__,ii=Be(xe,ne);return ii<0?void 0:xe[ii][1]},we.prototype.has=function(ne){return Be(this.__data__,ne)>-1},we.prototype.set=function(ne,xe){var ii=this.__data__,yi=Be(ii,ne);return yi<0?ii.push([ne,xe]):ii[yi][1]=xe,this},oi.prototype.clear=function(){this.__data__={hash:new Pt,map:new(yt||we),string:new Pt}},oi.prototype.delete=function(ne){return di(this,ne).delete(ne)},oi.prototype.get=function(ne){return di(this,ne).get(ne)},oi.prototype.has=function(ne){return di(this,ne).has(ne)},oi.prototype.set=function(ne,xe){return di(this,ne).set(ne,xe),this};var at=ye(function(ne){ne=function(ne){return null==ne?"":function(ne){if("string"==typeof ne)return ne;if(pi(ne))return Jt?Jt.call(ne):"";var xe=ne+"";return"0"==xe&&1/ne==-T?"-0":xe}(ne)}(ne);var xe=[];return r.test(ne)&&xe.push(""),ne.replace(p,function(ii,yi,Zi,ji){xe.push(Zi?ji.replace(I,"$1"):yi||ii)}),xe});function zt(ne){if("string"==typeof ne||pi(ne))return ne;var xe=ne+"";return"0"==xe&&1/ne==-T?"-0":xe}function ye(ne,xe){if("function"!=typeof ne||xe&&"function"!=typeof xe)throw new TypeError("Expected a function");var ii=function(){var yi=arguments,Zi=xe?xe.apply(this,yi):yi[0],ji=ii.cache;if(ji.has(Zi))return ji.get(Zi);var Ui=ne.apply(this,yi);return ii.cache=ji.set(Zi,Ui),Ui};return ii.cache=new(ye.Cache||oi),ii}function Ee(ne,xe){return ne===xe||ne!=ne&&xe!=xe}ye.Cache=oi;var ni=Array.isArray;function Mi(ne){var xe=typeof ne;return!!ne&&("object"==xe||"function"==xe)}function pi(ne){return"symbol"==typeof ne||function(ne){return!!ne&&"object"==typeof ne}(ne)&&"[object Symbol]"==ot.call(ne)}B.exports=function(ne,xe,ii){var yi=null==ne?void 0:function(ne,xe){xe=function(ne,xe){if(ni(ne))return!1;var ii=typeof ne;return!("number"!=ii&&"symbol"!=ii&&"boolean"!=ii&&null!=ne&&!pi(ne))||o.test(ne)||!n.test(ne)||null!=xe&&ne in Object(xe)}(xe,ne)?[xe]:function(ne){return ni(ne)?ne:at(ne)}(xe);for(var ii=0,yi=xe.length;null!=ne&&ii<yi;)ne=ne[zt(xe[ii++])];return ii&&ii==yi?ne:void 0}(ne,xe);return void 0===yi?ii:yi}},78452:(B,U,v)=>{var e=v(87078)(v(37684),"DataView");B.exports=e},17434:(B,U,v)=>{var T=v(1930),a=v(10868),e=v(40640),t=v(22811),n=v(31628);function o(r){var p=-1,b=null==r?0:r.length;for(this.clear();++p<b;){var I=r[p];this.set(I[0],I[1])}}o.prototype.clear=T,o.prototype.delete=a,o.prototype.get=e,o.prototype.has=t,o.prototype.set=n,B.exports=o},60748:(B,U,v)=>{var T=v(56154),a=v(49232),e=v(58847),t=v(64703),n=v(43807);function o(r){var p=-1,b=null==r?0:r.length;for(this.clear();++p<b;){var I=r[p];this.set(I[0],I[1])}}o.prototype.clear=T,o.prototype.delete=a,o.prototype.get=e,o.prototype.has=t,o.prototype.set=n,B.exports=o},15873:(B,U,v)=>{var e=v(87078)(v(37684),"Map");B.exports=e},37718:(B,U,v)=>{var T=v(11521),a=v(83019),e=v(37392),t=v(51062),n=v(35655);function o(r){var p=-1,b=null==r?0:r.length;for(this.clear();++p<b;){var I=r[p];this.set(I[0],I[1])}}o.prototype.clear=T,o.prototype.delete=a,o.prototype.get=e,o.prototype.has=t,o.prototype.set=n,B.exports=o},98680:(B,U,v)=>{var e=v(87078)(v(37684),"Promise");B.exports=e},31415:(B,U,v)=>{var e=v(87078)(v(37684),"Set");B.exports=e},93112:(B,U,v)=>{var T=v(60748),a=v(77219),e=v(68027),t=v(95307),n=v(38127),o=v(18732);function r(p){var b=this.__data__=new T(p);this.size=b.size}r.prototype.clear=a,r.prototype.delete=e,r.prototype.get=t,r.prototype.has=n,r.prototype.set=o,B.exports=r},17135:(B,U,v)=>{var T=v(37684);B.exports=T.Symbol},9456:(B,U,v)=>{var T=v(37684);B.exports=T.Uint8Array},86230:(B,U,v)=>{var e=v(87078)(v(37684),"WeakMap");B.exports=e},57963:B=>{B.exports=function(v,T){for(var a=-1,e=null==v?0:v.length;++a<e&&!1!==T(v[a],a,v););return v}},29736:B=>{B.exports=function(v,T){for(var a=-1,e=null==v?0:v.length,t=0,n=[];++a<e;){var o=v[a];T(o,a,v)&&(n[t++]=o)}return n}},87293:(B,U,v)=>{var T=v(92963),a=v(15034),e=v(81123),t=v(28924),n=v(75398),o=v(39058),p=Object.prototype.hasOwnProperty;B.exports=function(I,x){var k=e(I),Y=!k&&a(I),X=!k&&!Y&&t(I),it=!k&&!Y&&!X&&o(I),rt=k||Y||X||it,ct=rt?T(I.length,String):[],wt=ct.length;for(var At in I)(x||p.call(I,At))&&(!rt||!("length"==At||X&&("offset"==At||"parent"==At)||it&&("buffer"==At||"byteLength"==At||"byteOffset"==At)||n(At,wt)))&&ct.push(At);return ct}},56041:B=>{B.exports=function(v,T){for(var a=-1,e=null==v?0:v.length,t=Array(e);++a<e;)t[a]=T(v[a],a,v);return t}},33855:B=>{B.exports=function(v,T){for(var a=-1,e=T.length,t=v.length;++a<e;)v[t+a]=T[a];return v}},84805:(B,U,v)=>{var T=v(91649),a=v(43170),t=Object.prototype.hasOwnProperty;B.exports=function(o,r,p){var b=o[r];(!t.call(o,r)||!a(b,p)||void 0===p&&!(r in o))&&T(o,r,p)}},30662:(B,U,v)=>{var T=v(43170);B.exports=function(e,t){for(var n=e.length;n--;)if(T(e[n][0],t))return n;return-1}},43772:(B,U,v)=>{var T=v(45309),a=v(32863);B.exports=function(t,n){return t&&T(n,a(n),t)}},97741:(B,U,v)=>{var T=v(45309),a=v(28640);B.exports=function(t,n){return t&&T(n,a(n),t)}},91649:(B,U,v)=>{var T=v(49923);B.exports=function(e,t,n){"__proto__"==t&&T?T(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},82482:(B,U,v)=>{var T=v(93112),a=v(57963),e=v(84805),t=v(43772),n=v(97741),o=v(31869),r=v(70119),p=v(4504),b=v(78127),I=v(34024),x=v(16269),k=v(1395),Y=v(67019),X=v(88479),it=v(5291),rt=v(81123),ct=v(28924),wt=v(10501),At=v(4471),Rt=v(87858),Dt=v(32863),pt=v(28640),Tt="[object Arguments]",Jt="[object Function]",Xe="[object Object]",ie={};ie[Tt]=ie["[object Array]"]=ie["[object ArrayBuffer]"]=ie["[object DataView]"]=ie["[object Boolean]"]=ie["[object Date]"]=ie["[object Float32Array]"]=ie["[object Float64Array]"]=ie["[object Int8Array]"]=ie["[object Int16Array]"]=ie["[object Int32Array]"]=ie["[object Map]"]=ie["[object Number]"]=ie[Xe]=ie["[object RegExp]"]=ie["[object Set]"]=ie["[object String]"]=ie["[object Symbol]"]=ie["[object Uint8Array]"]=ie["[object Uint8ClampedArray]"]=ie["[object Uint16Array]"]=ie["[object Uint32Array]"]=!0,ie["[object Error]"]=ie[Jt]=ie["[object WeakMap]"]=!1,B.exports=function hi(fe,di,ge,Ve,Zt,$){var at,zt=1&di,Qt=2&di,ye=4&di;if(ge&&(at=Zt?ge(fe,Ve,Zt,$):ge(fe)),void 0!==at)return at;if(!At(fe))return fe;var Ee=rt(fe);if(Ee){if(at=Y(fe),!zt)return r(fe,at)}else{var ni=k(fe),Di=ni==Jt||"[object GeneratorFunction]"==ni;if(ct(fe))return o(fe,zt);if(ni==Xe||ni==Tt||Di&&!Zt){if(at=Qt||Di?{}:it(fe),!zt)return Qt?b(fe,n(at,fe)):p(fe,t(at,fe))}else{if(!ie[ni])return Zt?fe:{};at=X(fe,ni,zt)}}$||($=new T);var Mi=$.get(fe);if(Mi)return Mi;$.set(fe,at),Rt(fe)?fe.forEach(function(Ue){at.add(hi(Ue,di,ge,Ue,fe,$))}):wt(fe)&&fe.forEach(function(Ue,Ke){at.set(Ke,hi(Ue,di,ge,Ke,fe,$))});var pi=Ee?void 0:(ye?Qt?x:I:Qt?pt:Dt)(fe);return a(pi||fe,function(Ue,Ke){pi&&(Ue=fe[Ke=Ue]),e(at,Ke,hi(Ue,di,ge,Ke,fe,$))}),at}},5563:(B,U,v)=>{var T=v(4471),a=Object.create,e=function(){function t(){}return function(n){if(!T(n))return{};if(a)return a(n);t.prototype=n;var o=new t;return t.prototype=void 0,o}}();B.exports=e},36432:(B,U,v)=>{var T=v(54021),a=v(31017);B.exports=function(t,n){for(var o=0,r=(n=T(n,t)).length;null!=t&&o<r;)t=t[a(n[o++])];return o&&o==r?t:void 0}},82184:(B,U,v)=>{var T=v(33855),a=v(81123);B.exports=function(t,n,o){var r=n(t);return a(t)?r:T(r,o(t))}},77909:(B,U,v)=>{var T=v(17135),a=v(45222),e=v(48097),o=T?T.toStringTag:void 0;B.exports=function(p){return null==p?void 0===p?"[object Undefined]":"[object Null]":o&&o in Object(p)?a(p):e(p)}},43689:(B,U,v)=>{var T=v(77909),a=v(37409);B.exports=function(n){return a(n)&&"[object Arguments]"==T(n)}},80916:(B,U,v)=>{var T=v(1395),a=v(37409);B.exports=function(n){return a(n)&&"[object Map]"==T(n)}},49915:(B,U,v)=>{var T=v(88939),a=v(60862),e=v(4471),t=v(70753),o=/^\[object .+?Constructor\]$/,x=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");B.exports=function(Y){return!(!e(Y)||a(Y))&&(T(Y)?x:o).test(t(Y))}},15229:(B,U,v)=>{var T=v(1395),a=v(37409);B.exports=function(n){return a(n)&&"[object Set]"==T(n)}},8596:(B,U,v)=>{var T=v(77909),a=v(24282),e=v(37409),yt={};yt["[object Float32Array]"]=yt["[object Float64Array]"]=yt["[object Int8Array]"]=yt["[object Int16Array]"]=yt["[object Int32Array]"]=yt["[object Uint8Array]"]=yt["[object Uint8ClampedArray]"]=yt["[object Uint16Array]"]=yt["[object Uint32Array]"]=!0,yt["[object Arguments]"]=yt["[object Array]"]=yt["[object ArrayBuffer]"]=yt["[object Boolean]"]=yt["[object DataView]"]=yt["[object Date]"]=yt["[object Error]"]=yt["[object Function]"]=yt["[object Map]"]=yt["[object Number]"]=yt["[object Object]"]=yt["[object RegExp]"]=yt["[object Set]"]=yt["[object String]"]=yt["[object WeakMap]"]=!1,B.exports=function(_t){return e(_t)&&a(_t.length)&&!!yt[T(_t)]}},57626:(B,U,v)=>{var T=v(43516),a=v(10863),t=Object.prototype.hasOwnProperty;B.exports=function(o){if(!T(o))return a(o);var r=[];for(var p in Object(o))t.call(o,p)&&"constructor"!=p&&r.push(p);return r}},50899:(B,U,v)=>{var T=v(4471),a=v(43516),e=v(46183),n=Object.prototype.hasOwnProperty;B.exports=function(r){if(!T(r))return e(r);var p=a(r),b=[];for(var I in r)"constructor"==I&&(p||!n.call(r,I))||b.push(I);return b}},92963:B=>{B.exports=function(v,T){for(var a=-1,e=Array(v);++a<v;)e[a]=T(a);return e}},94496:(B,U,v)=>{var T=v(17135),a=v(56041),e=v(81123),t=v(20267),o=T?T.prototype:void 0,r=o?o.toString:void 0;B.exports=function p(b){if("string"==typeof b)return b;if(e(b))return a(b,p)+"";if(t(b))return r?r.call(b):"";var I=b+"";return"0"==I&&1/b==-1/0?"-0":I}},71214:B=>{B.exports=function(v){return function(T){return v(T)}}},54021:(B,U,v)=>{var T=v(81123),a=v(27288),e=v(11796),t=v(45803);B.exports=function(o,r){return T(o)?o:a(o,r)?[o]:e(t(o))}},40056:(B,U,v)=>{var T=v(9456);B.exports=function(e){var t=new e.constructor(e.byteLength);return new T(t).set(new T(e)),t}},31869:(B,U,v)=>{B=v.nmd(B);var T=v(37684),a=U&&!U.nodeType&&U,e=a&&B&&!B.nodeType&&B,n=e&&e.exports===a?T.Buffer:void 0,o=n?n.allocUnsafe:void 0;B.exports=function(p,b){if(b)return p.slice();var I=p.length,x=o?o(I):new p.constructor(I);return p.copy(x),x}},52737:(B,U,v)=>{var T=v(40056);B.exports=function(e,t){var n=t?T(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},93349:B=>{var U=/\w*$/;B.exports=function(T){var a=new T.constructor(T.source,U.exec(T));return a.lastIndex=T.lastIndex,a}},18740:(B,U,v)=>{var T=v(17135),a=T?T.prototype:void 0,e=a?a.valueOf:void 0;B.exports=function(n){return e?Object(e.call(n)):{}}},73611:(B,U,v)=>{var T=v(40056);B.exports=function(e,t){var n=t?T(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},70119:B=>{B.exports=function(v,T){var a=-1,e=v.length;for(T||(T=Array(e));++a<e;)T[a]=v[a];return T}},45309:(B,U,v)=>{var T=v(84805),a=v(91649);B.exports=function(t,n,o,r){var p=!o;o||(o={});for(var b=-1,I=n.length;++b<I;){var x=n[b],k=r?r(o[x],t[x],x,o,t):void 0;void 0===k&&(k=t[x]),p?a(o,x,k):T(o,x,k)}return o}},4504:(B,U,v)=>{var T=v(45309),a=v(79976);B.exports=function(t,n){return T(t,a(t),n)}},78127:(B,U,v)=>{var T=v(45309),a=v(60456);B.exports=function(t,n){return T(t,a(t),n)}},39809:(B,U,v)=>{var T=v(37684);B.exports=T["__core-js_shared__"]},49923:(B,U,v)=>{var T=v(87078),a=function(){try{var e=T(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();B.exports=a},76288:B=>{var U="object"==typeof global&&global&&global.Object===Object&&global;B.exports=U},34024:(B,U,v)=>{var T=v(82184),a=v(79976),e=v(32863);B.exports=function(n){return T(n,e,a)}},16269:(B,U,v)=>{var T=v(82184),a=v(60456),e=v(28640);B.exports=function(n){return T(n,e,a)}},26762:(B,U,v)=>{var T=v(5900);B.exports=function(e,t){var n=e.__data__;return T(t)?n["string"==typeof t?"string":"hash"]:n.map}},87078:(B,U,v)=>{var T=v(49915),a=v(63199);B.exports=function(t,n){var o=a(t,n);return T(o)?o:void 0}},23346:(B,U,v)=>{var a=v(24991)(Object.getPrototypeOf,Object);B.exports=a},45222:(B,U,v)=>{var T=v(17135),a=Object.prototype,e=a.hasOwnProperty,t=a.toString,n=T?T.toStringTag:void 0;B.exports=function(r){var p=e.call(r,n),b=r[n];try{r[n]=void 0;var I=!0}catch(k){}var x=t.call(r);return I&&(p?r[n]=b:delete r[n]),x}},79976:(B,U,v)=>{var T=v(29736),a=v(97324),t=Object.prototype.propertyIsEnumerable,n=Object.getOwnPropertySymbols;B.exports=n?function(r){return null==r?[]:(r=Object(r),T(n(r),function(p){return t.call(r,p)}))}:a},60456:(B,U,v)=>{var T=v(33855),a=v(23346),e=v(79976),t=v(97324);B.exports=Object.getOwnPropertySymbols?function(r){for(var p=[];r;)T(p,e(r)),r=a(r);return p}:t},1395:(B,U,v)=>{var T=v(78452),a=v(15873),e=v(98680),t=v(31415),n=v(86230),o=v(77909),r=v(70753),p="[object Map]",I="[object Promise]",x="[object Set]",k="[object WeakMap]",Y="[object DataView]",X=r(T),it=r(a),rt=r(e),ct=r(t),wt=r(n),At=o;(T&&At(new T(new ArrayBuffer(1)))!=Y||a&&At(new a)!=p||e&&At(e.resolve())!=I||t&&At(new t)!=x||n&&At(new n)!=k)&&(At=function(Rt){var Dt=o(Rt),pt="[object Object]"==Dt?Rt.constructor:void 0,st=pt?r(pt):"";if(st)switch(st){case X:return Y;case it:return p;case rt:return I;case ct:return x;case wt:return k}return Dt}),B.exports=At},63199:B=>{B.exports=function(v,T){return null==v?void 0:v[T]}},1930:(B,U,v)=>{var T=v(57279);B.exports=function(){this.__data__=T?T(null):{},this.size=0}},10868:B=>{B.exports=function(v){var T=this.has(v)&&delete this.__data__[v];return this.size-=T?1:0,T}},40640:(B,U,v)=>{var T=v(57279),t=Object.prototype.hasOwnProperty;B.exports=function(o){var r=this.__data__;if(T){var p=r[o];return"__lodash_hash_undefined__"===p?void 0:p}return t.call(r,o)?r[o]:void 0}},22811:(B,U,v)=>{var T=v(57279),e=Object.prototype.hasOwnProperty;B.exports=function(n){var o=this.__data__;return T?void 0!==o[n]:e.call(o,n)}},31628:(B,U,v)=>{var T=v(57279);B.exports=function(t,n){var o=this.__data__;return this.size+=this.has(t)?0:1,o[t]=T&&void 0===n?"__lodash_hash_undefined__":n,this}},67019:B=>{var v=Object.prototype.hasOwnProperty;B.exports=function(a){var e=a.length,t=new a.constructor(e);return e&&"string"==typeof a[0]&&v.call(a,"index")&&(t.index=a.index,t.input=a.input),t}},88479:(B,U,v)=>{var T=v(40056),a=v(52737),e=v(93349),t=v(18740),n=v(73611);B.exports=function(Tt,Ct,yt){var gt=Tt.constructor;switch(Ct){case"[object ArrayBuffer]":return T(Tt);case"[object Boolean]":case"[object Date]":return new gt(+Tt);case"[object DataView]":return a(Tt,yt);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return n(Tt,yt);case"[object Map]":return new gt;case"[object Number]":case"[object String]":return new gt(Tt);case"[object RegExp]":return e(Tt);case"[object Set]":return new gt;case"[object Symbol]":return t(Tt)}}},5291:(B,U,v)=>{var T=v(5563),a=v(23346),e=v(43516);B.exports=function(n){return"function"!=typeof n.constructor||e(n)?{}:T(a(n))}},75398:B=>{var v=/^(?:0|[1-9]\d*)$/;B.exports=function(a,e){var t=typeof a;return!!(e=null==e?9007199254740991:e)&&("number"==t||"symbol"!=t&&v.test(a))&&a>-1&&a%1==0&&a<e}},27288:(B,U,v)=>{var T=v(81123),a=v(20267),e=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,t=/^\w*$/;B.exports=function(o,r){if(T(o))return!1;var p=typeof o;return!("number"!=p&&"symbol"!=p&&"boolean"!=p&&null!=o&&!a(o))||t.test(o)||!e.test(o)||null!=r&&o in Object(r)}},5900:B=>{B.exports=function(v){var T=typeof v;return"string"==T||"number"==T||"symbol"==T||"boolean"==T?"__proto__"!==v:null===v}},60862:(B,U,v)=>{var t,T=v(39809),a=(t=/[^.]+$/.exec(T&&T.keys&&T.keys.IE_PROTO||""))?"Symbol(src)_1."+t:"";B.exports=function(t){return!!a&&a in t}},43516:B=>{var U=Object.prototype;B.exports=function(T){var a=T&&T.constructor;return T===("function"==typeof a&&a.prototype||U)}},56154:B=>{B.exports=function(){this.__data__=[],this.size=0}},49232:(B,U,v)=>{var T=v(30662),e=Array.prototype.splice;B.exports=function(n){var o=this.__data__,r=T(o,n);return!(r<0||(r==o.length-1?o.pop():e.call(o,r,1),--this.size,0))}},58847:(B,U,v)=>{var T=v(30662);B.exports=function(e){var t=this.__data__,n=T(t,e);return n<0?void 0:t[n][1]}},64703:(B,U,v)=>{var T=v(30662);B.exports=function(e){return T(this.__data__,e)>-1}},43807:(B,U,v)=>{var T=v(30662);B.exports=function(e,t){var n=this.__data__,o=T(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this}},11521:(B,U,v)=>{var T=v(17434),a=v(60748),e=v(15873);B.exports=function(){this.size=0,this.__data__={hash:new T,map:new(e||a),string:new T}}},83019:(B,U,v)=>{var T=v(26762);B.exports=function(e){var t=T(this,e).delete(e);return this.size-=t?1:0,t}},37392:(B,U,v)=>{var T=v(26762);B.exports=function(e){return T(this,e).get(e)}},51062:(B,U,v)=>{var T=v(26762);B.exports=function(e){return T(this,e).has(e)}},35655:(B,U,v)=>{var T=v(26762);B.exports=function(e,t){var n=T(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this}},44170:(B,U,v)=>{var T=v(91407);B.exports=function(t){var n=T(t,function(r){return 500===o.size&&o.clear(),r}),o=n.cache;return n}},57279:(B,U,v)=>{var a=v(87078)(Object,"create");B.exports=a},10863:(B,U,v)=>{var a=v(24991)(Object.keys,Object);B.exports=a},46183:B=>{B.exports=function(v){var T=[];if(null!=v)for(var a in Object(v))T.push(a);return T}},52560:(B,U,v)=>{B=v.nmd(B);var T=v(76288),a=U&&!U.nodeType&&U,e=a&&B&&!B.nodeType&&B,n=e&&e.exports===a&&T.process,o=function(){try{return e&&e.require&&e.require("util").types||n&&n.binding&&n.binding("util")}catch(p){}}();B.exports=o},48097:B=>{var v=Object.prototype.toString;B.exports=function(a){return v.call(a)}},24991:B=>{B.exports=function(v,T){return function(a){return v(T(a))}}},37684:(B,U,v)=>{var T=v(76288),a="object"==typeof self&&self&&self.Object===Object&&self,e=T||a||Function("return this")();B.exports=e},77219:(B,U,v)=>{var T=v(60748);B.exports=function(){this.__data__=new T,this.size=0}},68027:B=>{B.exports=function(v){var T=this.__data__,a=T.delete(v);return this.size=T.size,a}},95307:B=>{B.exports=function(v){return this.__data__.get(v)}},38127:B=>{B.exports=function(v){return this.__data__.has(v)}},18732:(B,U,v)=>{var T=v(60748),a=v(15873),e=v(37718);B.exports=function(o,r){var p=this.__data__;if(p instanceof T){var b=p.__data__;if(!a||b.length<199)return b.push([o,r]),this.size=++p.size,this;p=this.__data__=new e(b)}return p.set(o,r),this.size=p.size,this}},11796:(B,U,v)=>{var T=v(44170),a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,e=/\\(\\)?/g,t=T(function(n){var o=[];return 46===n.charCodeAt(0)&&o.push(""),n.replace(a,function(r,p,b,I){o.push(b?I.replace(e,"$1"):p||r)}),o});B.exports=t},31017:(B,U,v)=>{var T=v(20267);B.exports=function(t){if("string"==typeof t||T(t))return t;var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},70753:B=>{var v=Function.prototype.toString;B.exports=function(a){if(null!=a){try{return v.call(a)}catch(e){}try{return a+""}catch(e){}}return""}},57469:(B,U,v)=>{var T=v(82482);B.exports=function(n){return T(n,5)}},43170:B=>{B.exports=function(v,T){return v===T||v!=v&&T!=T}},17410:(B,U,v)=>{var T=v(36432);B.exports=function(e,t,n){var o=null==e?void 0:T(e,t);return void 0===o?n:o}},15034:(B,U,v)=>{var T=v(43689),a=v(37409),e=Object.prototype,t=e.hasOwnProperty,n=e.propertyIsEnumerable,o=T(function(){return arguments}())?T:function(r){return a(r)&&t.call(r,"callee")&&!n.call(r,"callee")};B.exports=o},81123:B=>{B.exports=Array.isArray},59809:(B,U,v)=>{var T=v(88939),a=v(24282);B.exports=function(t){return null!=t&&a(t.length)&&!T(t)}},28924:(B,U,v)=>{B=v.nmd(B);var T=v(37684),a=v(45801),e=U&&!U.nodeType&&U,t=e&&B&&!B.nodeType&&B,o=t&&t.exports===e?T.Buffer:void 0;B.exports=(o?o.isBuffer:void 0)||a},85191:(B,U,v)=>{var T=v(57626),a=v(1395),e=v(15034),t=v(81123),n=v(59809),o=v(28924),r=v(43516),p=v(39058),k=Object.prototype.hasOwnProperty;B.exports=function(X){if(null==X)return!0;if(n(X)&&(t(X)||"string"==typeof X||"function"==typeof X.splice||o(X)||p(X)||e(X)))return!X.length;var it=a(X);if("[object Map]"==it||"[object Set]"==it)return!X.size;if(r(X))return!T(X).length;for(var rt in X)if(k.call(X,rt))return!1;return!0}},88939:(B,U,v)=>{var T=v(77909),a=v(4471);B.exports=function(p){if(!a(p))return!1;var b=T(p);return"[object Function]"==b||"[object GeneratorFunction]"==b||"[object AsyncFunction]"==b||"[object Proxy]"==b}},24282:B=>{B.exports=function(T){return"number"==typeof T&&T>-1&&T%1==0&&T<=9007199254740991}},10501:(B,U,v)=>{var T=v(80916),a=v(71214),e=v(52560),t=e&&e.isMap,n=t?a(t):T;B.exports=n},4471:B=>{B.exports=function(v){var T=typeof v;return null!=v&&("object"==T||"function"==T)}},37409:B=>{B.exports=function(v){return null!=v&&"object"==typeof v}},64994:(B,U,v)=>{var T=v(77909),a=v(23346),e=v(37409),r=Function.prototype.toString,p=Object.prototype.hasOwnProperty,b=r.call(Object);B.exports=function(x){if(!e(x)||"[object Object]"!=T(x))return!1;var k=a(x);if(null===k)return!0;var Y=p.call(k,"constructor")&&k.constructor;return"function"==typeof Y&&Y instanceof Y&&r.call(Y)==b}},87858:(B,U,v)=>{var T=v(15229),a=v(71214),e=v(52560),t=e&&e.isSet,n=t?a(t):T;B.exports=n},20267:(B,U,v)=>{var T=v(77909),a=v(37409);B.exports=function(n){return"symbol"==typeof n||a(n)&&"[object Symbol]"==T(n)}},39058:(B,U,v)=>{var T=v(8596),a=v(71214),e=v(52560),t=e&&e.isTypedArray,n=t?a(t):T;B.exports=n},32863:(B,U,v)=>{var T=v(87293),a=v(57626),e=v(59809);B.exports=function(n){return e(n)?T(n):a(n)}},28640:(B,U,v)=>{var T=v(87293),a=v(50899),e=v(59809);B.exports=function(n){return e(n)?T(n,!0):a(n)}},91407:(B,U,v)=>{var T=v(37718);function e(t,n){if("function"!=typeof t||null!=n&&"function"!=typeof n)throw new TypeError("Expected a function");var o=function(){var r=arguments,p=n?n.apply(this,r):r[0],b=o.cache;if(b.has(p))return b.get(p);var I=t.apply(this,r);return o.cache=b.set(p,I)||b,I};return o.cache=new(e.Cache||T),o}e.Cache=T,B.exports=e},97324:B=>{B.exports=function(){return[]}},45801:B=>{B.exports=function(){return!1}},45803:(B,U,v)=>{var T=v(94496);B.exports=function(e){return null==e?"":T(e)}},94292:(B,U,v)=>{var T="function"==typeof Map&&Map.prototype,a=Object.getOwnPropertyDescriptor&&T?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,e=T&&a&&"function"==typeof a.get?a.get:null,t=T&&Map.prototype.forEach,n="function"==typeof Set&&Set.prototype,o=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,r=n&&o&&"function"==typeof o.get?o.get:null,p=n&&Set.prototype.forEach,I="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,k="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,X="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,it=Boolean.prototype.valueOf,rt=Object.prototype.toString,ct=Function.prototype.toString,wt=String.prototype.match,At="function"==typeof BigInt?BigInt.prototype.valueOf:null,Rt=Object.getOwnPropertySymbols,Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,pt="function"==typeof Symbol&&"object"==typeof Symbol.iterator,st=Object.prototype.propertyIsEnumerable,ot=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function($){return $.__proto__}:null),nt=v(96553).custom,Tt=nt&&Ze(nt)?nt:null,Ct="function"==typeof Symbol&&void 0!==Symbol.toStringTag?Symbol.toStringTag:null;function yt($,at,zt){var Qt="double"===(zt.quoteStyle||at)?'"':"'";return Qt+$+Qt}function gt($){return String($).replace(/"/g,"&quot;")}function _t($){return!("[object Array]"!==ce($)||Ct&&"object"==typeof $&&Ct in $)}function Ze($){if(pt)return $&&"object"==typeof $&&$ instanceof Symbol;if("symbol"==typeof $)return!0;if(!$||"object"!=typeof $||!Dt)return!1;try{return Dt.call($),!0}catch(at){}return!1}B.exports=function $(at,zt,Qt,ye){var Ee=zt||{};if(re(Ee,"quoteStyle")&&"single"!==Ee.quoteStyle&&"double"!==Ee.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(re(Ee,"maxStringLength")&&("number"==typeof Ee.maxStringLength?Ee.maxStringLength<0&&Ee.maxStringLength!==1/0:null!==Ee.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var ni=!re(Ee,"customInspect")||Ee.customInspect;if("boolean"!=typeof ni&&"symbol"!==ni)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(re(Ee,"indent")&&null!==Ee.indent&&"\t"!==Ee.indent&&!(parseInt(Ee.indent,10)===Ee.indent&&Ee.indent>0))throw new TypeError('options "indent" must be "\\t", an integer > 0, or `null`');if(void 0===at)return"undefined";if(null===at)return"null";if("boolean"==typeof at)return at?"true":"false";if("string"==typeof at)return Be(at,Ee);if("number"==typeof at)return 0===at?1/0/at>0?"0":"-0":String(at);if("bigint"==typeof at)return String(at)+"n";var Di=void 0===Ee.depth?5:Ee.depth;if(void 0===Qt&&(Qt=0),Qt>=Di&&Di>0&&"object"==typeof at)return _t(at)?"[Array]":"[Object]";var Mi=function($,at){var zt;if("\t"===$.indent)zt="\t";else{if(!("number"==typeof $.indent&&$.indent>0))return null;zt=Array($.indent+1).join(" ")}return{base:zt,prev:Array(at+1).join(zt)}}(Ee,Qt);if(void 0===ye)ye=[];else if(qe(ye,at)>=0)return"[Circular]";function vi(be,Je,Pi){if(Je&&(ye=ye.slice()).push(Je),Pi){var Oi={depth:Ee.depth};return re(Ee,"quoteStyle")&&(Oi.quoteStyle=Ee.quoteStyle),$(be,Oi,Qt+1,ye)}return $(be,Ee,Qt+1,ye)}if("function"==typeof at){var pi=function($){if($.name)return $.name;var at=wt.call(ct.call($),/^function\s*([\w$]+)/);return at?at[1]:null}(at),Ue=Zt(at,vi);return"[Function"+(pi?": "+pi:" (anonymous)")+"]"+(Ue.length>0?" { "+Ue.join(", ")+" }":"")}if(Ze(at)){var Ke=pt?String(at).replace(/^(Symbol\(.*\))_[^)]*$/,"$1"):Dt.call(at);return"object"!=typeof at||pt?Ke:ie(Ke)}if(function($){return!(!$||"object"!=typeof $)&&("undefined"!=typeof HTMLElement&&$ instanceof HTMLElement||"string"==typeof $.nodeName&&"function"==typeof $.getAttribute)}(at)){for(var ne="<"+String(at.nodeName).toLowerCase(),xe=at.attributes||[],ii=0;ii<xe.length;ii++)ne+=" "+xe[ii].name+"="+yt(gt(xe[ii].value),"double",Ee);return ne+=">",at.childNodes&&at.childNodes.length&&(ne+="..."),ne+"</"+String(at.nodeName).toLowerCase()+">"}if(_t(at)){if(0===at.length)return"[]";var yi=Zt(at,vi);return Mi&&!function($){for(var at=0;at<$.length;at++)if(qe($[at],"\n")>=0)return!1;return!0}(yi)?"["+Ve(yi,Mi)+"]":"[ "+yi.join(", ")+" ]"}if(function($){return!("[object Error]"!==ce($)||Ct&&"object"==typeof $&&Ct in $)}(at)){var Zi=Zt(at,vi);return 0===Zi.length?"["+String(at)+"]":"{ ["+String(at)+"] "+Zi.join(", ")+" }"}if("object"==typeof at&&ni){if(Tt&&"function"==typeof at[Tt])return at[Tt]();if("symbol"!==ni&&"function"==typeof at.inspect)return at.inspect()}if(function($){if(!e||!$||"object"!=typeof $)return!1;try{e.call($);try{r.call($)}catch(at){return!0}return $ instanceof Map}catch(at){}return!1}(at)){var ji=[];return t.call(at,function(be,Je){ji.push(vi(Je,at,!0)+" => "+vi(be,at))}),fe("Map",e.call(at),ji,Mi)}if(function($){if(!r||!$||"object"!=typeof $)return!1;try{r.call($);try{e.call($)}catch(at){return!0}return $ instanceof Set}catch(at){}return!1}(at)){var Ui=[];return p.call(at,function(be){Ui.push(vi(be,at))}),fe("Set",r.call(at),Ui,Mi)}if(function($){if(!I||!$||"object"!=typeof $)return!1;try{I.call($,I);try{k.call($,k)}catch(at){return!0}return $ instanceof WeakMap}catch(at){}return!1}(at))return hi("WeakMap");if(function($){if(!k||!$||"object"!=typeof $)return!1;try{k.call($,k);try{I.call($,I)}catch(at){return!0}return $ instanceof WeakSet}catch(at){}return!1}(at))return hi("WeakSet");if(function($){if(!X||!$||"object"!=typeof $)return!1;try{return X.call($),!0}catch(at){}return!1}(at))return hi("WeakRef");if(function($){return!("[object Number]"!==ce($)||Ct&&"object"==typeof $&&Ct in $)}(at))return ie(vi(Number(at)));if(function($){if(!$||"object"!=typeof $||!At)return!1;try{return At.call($),!0}catch(at){}return!1}(at))return ie(vi(At.call(at)));if(function($){return!("[object Boolean]"!==ce($)||Ct&&"object"==typeof $&&Ct in $)}(at))return ie(it.call(at));if(function($){return!("[object String]"!==ce($)||Ct&&"object"==typeof $&&Ct in $)}(at))return ie(vi(String(at)));if(!function($){return!("[object Date]"!==ce($)||Ct&&"object"==typeof $&&Ct in $)}(at)&&!function($){return!("[object RegExp]"!==ce($)||Ct&&"object"==typeof $&&Ct in $)}(at)){var Xi=Zt(at,vi),Re=ot?ot(at)===Object.prototype:at instanceof Object||at.constructor===Object,Me=at instanceof Object?"":"null prototype",kt=!Re&&Ct&&Object(at)===at&&Ct in at?ce(at).slice(8,-1):Me?"Object":"",Gt=(Re||"function"!=typeof at.constructor?"":at.constructor.name?at.constructor.name+" ":"")+(kt||Me?"["+[].concat(kt||[],Me||[]).join(": ")+"] ":"");return 0===Xi.length?Gt+"{}":Mi?Gt+"{"+Ve(Xi,Mi)+"}":Gt+"{ "+Xi.join(", ")+" }"}return String(at)};var ai=Object.prototype.hasOwnProperty||function($){return $ in this};function re($,at){return ai.call($,at)}function ce($){return rt.call($)}function qe($,at){if($.indexOf)return $.indexOf(at);for(var zt=0,Qt=$.length;zt<Qt;zt++)if($[zt]===at)return zt;return-1}function Be($,at){if($.length>at.maxStringLength){var zt=$.length-at.maxStringLength,Qt="... "+zt+" more character"+(zt>1?"s":"");return Be($.slice(0,at.maxStringLength),at)+Qt}return yt($.replace(/(['\\])/g,"\\$1").replace(/[\x00-\x1f]/g,Ft),"single",at)}function Ft($){var at=$.charCodeAt(0),zt={8:"b",9:"t",10:"n",12:"f",13:"r"}[at];return zt?"\\"+zt:"\\x"+(at<16?"0":"")+at.toString(16).toUpperCase()}function ie($){return"Object("+$+")"}function hi($){return $+" { ? }"}function fe($,at,zt,Qt){return $+" ("+at+") {"+(Qt?Ve(zt,Qt):zt.join(", "))+"}"}function Ve($,at){if(0===$.length)return"";var zt="\n"+at.prev+at.base;return zt+$.join(","+zt)+"\n"+at.prev}function Zt($,at){var zt=_t($),Qt=[];if(zt){Qt.length=$.length;for(var ye=0;ye<$.length;ye++)Qt[ye]=re($,ye)?at($[ye],$):""}var ni,Ee="function"==typeof Rt?Rt($):[];if(pt){ni={};for(var Di=0;Di<Ee.length;Di++)ni["$"+Ee[Di]]=Ee[Di]}for(var Mi in $)!re($,Mi)||zt&&String(Number(Mi))===Mi&&Mi<$.length||pt&&ni["$"+Mi]instanceof Symbol||(/[^\w$]/.test(Mi)?Qt.push(at(Mi,$)+": "+at($[Mi],$)):Qt.push(Mi+": "+at($[Mi],$)));if("function"==typeof Rt)for(var vi=0;vi<Ee.length;vi++)st.call($,Ee[vi])&&Qt.push("["+at(Ee[vi])+"]: "+at($[Ee[vi]],$));return Qt}},74946:B=>{"use strict";function U(v,T){return Object.prototype.hasOwnProperty.call(v,T)}B.exports=function(v,T,a,e){a=a||"=";var t={};if("string"!=typeof v||0===v.length)return t;var n=/\+/g;v=v.split(T=T||"&");var o=1e3;e&&"number"==typeof e.maxKeys&&(o=e.maxKeys);var r=v.length;o>0&&r>o&&(r=o);for(var p=0;p<r;++p){var x,k,Y,X,b=v[p].replace(n,"%20"),I=b.indexOf(a);I>=0?(x=b.substr(0,I),k=b.substr(I+1)):(x=b,k=""),Y=decodeURIComponent(x),X=decodeURIComponent(k),U(t,Y)?Array.isArray(t[Y])?t[Y].push(X):t[Y]=[t[Y],X]:t[Y]=X}return t}},83392:B=>{"use strict";var U=function(v){switch(typeof v){case"string":return v;case"boolean":return v?"true":"false";case"number":return isFinite(v)?v:"";default:return""}};B.exports=function(v,T,a,e){return T=T||"&",a=a||"=",null===v&&(v=void 0),"object"==typeof v?Object.keys(v).map(function(t){var n=encodeURIComponent(U(t))+a;return Array.isArray(v[t])?v[t].map(function(o){return n+encodeURIComponent(U(o))}).join(T):n+encodeURIComponent(U(v[t]))}).join(T):e?encodeURIComponent(U(e))+a+encodeURIComponent(U(v)):""}},1521:(B,U,v)=>{"use strict";U.decode=U.parse=v(74946),U.encode=U.stringify=v(83392)},32518:B=>{var U=function(v){"use strict";var e,T=Object.prototype,a=T.hasOwnProperty,t="function"==typeof Symbol?Symbol:{},n=t.iterator||"@@iterator",o=t.asyncIterator||"@@asyncIterator",r=t.toStringTag||"@@toStringTag";function p(Pt,oe,Ne){return Object.defineProperty(Pt,oe,{value:Ne,enumerable:!0,configurable:!0,writable:!0}),Pt[oe]}try{p({},"")}catch(Pt){p=function(oe,Ne,Xe){return oe[Ne]=Xe}}function b(Pt,oe,Ne,Xe){var Ze=Object.create((oe&&oe.prototype instanceof rt?oe:rt).prototype),we=new gt(Xe||[]);return Ze._invoke=function(Pt,oe,Ne){var Xe=x;return function(Ze,we){if(Xe===Y)throw new Error("Generator is already running");if(Xe===X){if("throw"===Ze)throw we;return Jt()}for(Ne.method=Ze,Ne.arg=we;;){var ai=Ne.delegate;if(ai){var re=Tt(ai,Ne);if(re){if(re===it)continue;return re}}if("next"===Ne.method)Ne.sent=Ne._sent=Ne.arg;else if("throw"===Ne.method){if(Xe===x)throw Xe=X,Ne.arg;Ne.dispatchException(Ne.arg)}else"return"===Ne.method&&Ne.abrupt("return",Ne.arg);Xe=Y;var ce=I(Pt,oe,Ne);if("normal"===ce.type){if(Xe=Ne.done?X:k,ce.arg===it)continue;return{value:ce.arg,done:Ne.done}}"throw"===ce.type&&(Xe=X,Ne.method="throw",Ne.arg=ce.arg)}}}(Pt,Ne,we),Ze}function I(Pt,oe,Ne){try{return{type:"normal",arg:Pt.call(oe,Ne)}}catch(Xe){return{type:"throw",arg:Xe}}}v.wrap=b;var x="suspendedStart",k="suspendedYield",Y="executing",X="completed",it={};function rt(){}function ct(){}function wt(){}var At={};p(At,n,function(){return this});var Rt=Object.getPrototypeOf,Dt=Rt&&Rt(Rt(_t([])));Dt&&Dt!==T&&a.call(Dt,n)&&(At=Dt);var pt=wt.prototype=rt.prototype=Object.create(At);function st(Pt){["next","throw","return"].forEach(function(oe){p(Pt,oe,function(Ne){return this._invoke(oe,Ne)})})}function ot(Pt,oe){function Ne(Ze,we,ai,re){var ce=I(Pt[Ze],Pt,we);if("throw"!==ce.type){var Pe=ce.arg,qe=Pe.value;return qe&&"object"==typeof qe&&a.call(qe,"__await")?oe.resolve(qe.__await).then(function(oi){Ne("next",oi,ai,re)},function(oi){Ne("throw",oi,ai,re)}):oe.resolve(qe).then(function(oi){Pe.value=oi,ai(Pe)},function(oi){return Ne("throw",oi,ai,re)})}re(ce.arg)}var Xe;this._invoke=function(Ze,we){function ai(){return new oe(function(re,ce){Ne(Ze,we,re,ce)})}return Xe=Xe?Xe.then(ai,ai):ai()}}function Tt(Pt,oe){var Ne=Pt.iterator[oe.method];if(Ne===e){if(oe.delegate=null,"throw"===oe.method){if(Pt.iterator.return&&(oe.method="return",oe.arg=e,Tt(Pt,oe),"throw"===oe.method))return it;oe.method="throw",oe.arg=new TypeError("The iterator does not provide a 'throw' method")}return it}var Xe=I(Ne,Pt.iterator,oe.arg);if("throw"===Xe.type)return oe.method="throw",oe.arg=Xe.arg,oe.delegate=null,it;var Ce=Xe.arg;return Ce?Ce.done?(oe[Pt.resultName]=Ce.value,oe.next=Pt.nextLoc,"return"!==oe.method&&(oe.method="next",oe.arg=e),oe.delegate=null,it):Ce:(oe.method="throw",oe.arg=new TypeError("iterator result is not an object"),oe.delegate=null,it)}function Ct(Pt){var oe={tryLoc:Pt[0]};1 in Pt&&(oe.catchLoc=Pt[1]),2 in Pt&&(oe.finallyLoc=Pt[2],oe.afterLoc=Pt[3]),this.tryEntries.push(oe)}function yt(Pt){var oe=Pt.completion||{};oe.type="normal",delete oe.arg,Pt.completion=oe}function gt(Pt){this.tryEntries=[{tryLoc:"root"}],Pt.forEach(Ct,this),this.reset(!0)}function _t(Pt){if(Pt){var oe=Pt[n];if(oe)return oe.call(Pt);if("function"==typeof Pt.next)return Pt;if(!isNaN(Pt.length)){var Ne=-1,Xe=function Ce(){for(;++Ne<Pt.length;)if(a.call(Pt,Ne))return Ce.value=Pt[Ne],Ce.done=!1,Ce;return Ce.value=e,Ce.done=!0,Ce};return Xe.next=Xe}}return{next:Jt}}function Jt(){return{value:e,done:!0}}return ct.prototype=wt,p(pt,"constructor",wt),p(wt,"constructor",ct),ct.displayName=p(wt,r,"GeneratorFunction"),v.isGeneratorFunction=function(Pt){var oe="function"==typeof Pt&&Pt.constructor;return!!oe&&(oe===ct||"GeneratorFunction"===(oe.displayName||oe.name))},v.mark=function(Pt){return Object.setPrototypeOf?Object.setPrototypeOf(Pt,wt):(Pt.__proto__=wt,p(Pt,r,"GeneratorFunction")),Pt.prototype=Object.create(pt),Pt},v.awrap=function(Pt){return{__await:Pt}},st(ot.prototype),p(ot.prototype,o,function(){return this}),v.AsyncIterator=ot,v.async=function(Pt,oe,Ne,Xe,Ce){void 0===Ce&&(Ce=Promise);var Ze=new ot(b(Pt,oe,Ne,Xe),Ce);return v.isGeneratorFunction(oe)?Ze:Ze.next().then(function(we){return we.done?we.value:Ze.next()})},st(pt),p(pt,r,"Generator"),p(pt,n,function(){return this}),p(pt,"toString",function(){return"[object Generator]"}),v.keys=function(Pt){var oe=[];for(var Ne in Pt)oe.push(Ne);return oe.reverse(),function Xe(){for(;oe.length;){var Ce=oe.pop();if(Ce in Pt)return Xe.value=Ce,Xe.done=!1,Xe}return Xe.done=!0,Xe}},v.values=_t,gt.prototype={constructor:gt,reset:function(Pt){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(yt),!Pt)for(var oe in this)"t"===oe.charAt(0)&&a.call(this,oe)&&!isNaN(+oe.slice(1))&&(this[oe]=e)},stop:function(){this.done=!0;var oe=this.tryEntries[0].completion;if("throw"===oe.type)throw oe.arg;return this.rval},dispatchException:function(Pt){if(this.done)throw Pt;var oe=this;function Ne(re,ce){return Ze.type="throw",Ze.arg=Pt,oe.next=re,ce&&(oe.method="next",oe.arg=e),!!ce}for(var Xe=this.tryEntries.length-1;Xe>=0;--Xe){var Ce=this.tryEntries[Xe],Ze=Ce.completion;if("root"===Ce.tryLoc)return Ne("end");if(Ce.tryLoc<=this.prev){var we=a.call(Ce,"catchLoc"),ai=a.call(Ce,"finallyLoc");if(we&&ai){if(this.prev<Ce.catchLoc)return Ne(Ce.catchLoc,!0);if(this.prev<Ce.finallyLoc)return Ne(Ce.finallyLoc)}else if(we){if(this.prev<Ce.catchLoc)return Ne(Ce.catchLoc,!0)}else{if(!ai)throw new Error("try statement without catch or finally");if(this.prev<Ce.finallyLoc)return Ne(Ce.finallyLoc)}}}},abrupt:function(Pt,oe){for(var Ne=this.tryEntries.length-1;Ne>=0;--Ne){var Xe=this.tryEntries[Ne];if(Xe.tryLoc<=this.prev&&a.call(Xe,"finallyLoc")&&this.prev<Xe.finallyLoc){var Ce=Xe;break}}Ce&&("break"===Pt||"continue"===Pt)&&Ce.tryLoc<=oe&&oe<=Ce.finallyLoc&&(Ce=null);var Ze=Ce?Ce.completion:{};return Ze.type=Pt,Ze.arg=oe,Ce?(this.method="next",this.next=Ce.finallyLoc,it):this.complete(Ze)},complete:function(Pt,oe){if("throw"===Pt.type)throw Pt.arg;return"break"===Pt.type||"continue"===Pt.type?this.next=Pt.arg:"return"===Pt.type?(this.rval=this.arg=Pt.arg,this.method="return",this.next="end"):"normal"===Pt.type&&oe&&(this.next=oe),it},finish:function(Pt){for(var oe=this.tryEntries.length-1;oe>=0;--oe){var Ne=this.tryEntries[oe];if(Ne.finallyLoc===Pt)return this.complete(Ne.completion,Ne.afterLoc),yt(Ne),it}},catch:function(Pt){for(var oe=this.tryEntries.length-1;oe>=0;--oe){var Ne=this.tryEntries[oe];if(Ne.tryLoc===Pt){var Xe=Ne.completion;if("throw"===Xe.type){var Ce=Xe.arg;yt(Ne)}return Ce}}throw new Error("illegal catch attempt")},delegateYield:function(Pt,oe,Ne){return this.delegate={iterator:_t(Pt),resultName:oe,nextLoc:Ne},"next"===this.method&&(this.arg=e),it}},v}(B.exports);try{regeneratorRuntime=U}catch(v){"object"==typeof globalThis?globalThis.regeneratorRuntime=U:Function("r","regeneratorRuntime = r")(U)}},73340:(B,U,v)=>{"use strict";var T=v(93602),a=v(29448),e=v(94292),t=T("%TypeError%"),n=T("%WeakMap%",!0),o=T("%Map%",!0),r=a("WeakMap.prototype.get",!0),p=a("WeakMap.prototype.set",!0),b=a("WeakMap.prototype.has",!0),I=a("Map.prototype.get",!0),x=a("Map.prototype.set",!0),k=a("Map.prototype.has",!0),Y=function(ct,wt){for(var Rt,At=ct;null!==(Rt=At.next);At=Rt)if(Rt.key===wt)return At.next=Rt.next,Rt.next=ct.next,ct.next=Rt,Rt};B.exports=function(){var wt,At,Rt,Dt={assert:function(pt){if(!Dt.has(pt))throw new t("Side channel does not contain "+e(pt))},get:function(pt){if(n&&pt&&("object"==typeof pt||"function"==typeof pt)){if(wt)return r(wt,pt)}else if(o){if(At)return I(At,pt)}else if(Rt)return function(ct,wt){var At=Y(ct,wt);return At&&At.value}(Rt,pt)},has:function(pt){if(n&&pt&&("object"==typeof pt||"function"==typeof pt)){if(wt)return b(wt,pt)}else if(o){if(At)return k(At,pt)}else if(Rt)return function(ct,wt){return!!Y(ct,wt)}(Rt,pt);return!1},set:function(pt,st){n&&pt&&("object"==typeof pt||"function"==typeof pt)?(wt||(wt=new n),p(wt,pt,st)):o?(At||(At=new o),x(At,pt,st)):(Rt||(Rt={key:{},next:null}),function(ct,wt,At){var Rt=Y(ct,wt);Rt?Rt.value=At:ct.next={key:wt,next:ct.next,value:At}}(Rt,pt,st))}};return Dt}},14087:(B,U,v)=>{"use strict";v.r(U),v.d(U,{default:()=>wr,helpers:()=>xc});var T={};v.r(T),v.d(T,{JsonPatchError:()=>bs,_areEquals:()=>Vr,applyOperation:()=>hr,applyPatch:()=>Hr,applyReducer:()=>Vh,deepClone:()=>Au,getValueByPointer:()=>Ba,validate:()=>qr,validator:()=>Ha});var a={};v.r(a),v.d(a,{compare:()=>Kr,generate:()=>ec,observe:()=>Nl,unobserve:()=>Ll});var e={};v.r(e),v.d(e,{cookie:()=>zu,header:()=>$h,path:()=>xd,query:()=>Wu});var t=v(23005),n=v(12988),o=v(66360),r=v(18753),p=v(71094),b=v(90343),I=v(84916),x=v(31946);function k(R,P,G){return P in R?x(R,P,{value:G,enumerable:!0,configurable:!0,writable:!0}):R[P]=G,R}function Y(R,P){var G=t(R);if(n){var Q=n(R);P&&(Q=o(Q).call(Q,function(dt){return r(R,dt).enumerable})),G.push.apply(G,Q)}return G}function X(R){for(var P=1;P<arguments.length;P++){var Q,G=null!=arguments[P]?arguments[P]:{};if(P%2)p(Q=Y(Object(G),!0)).call(Q,function(Nt){k(R,Nt,G[Nt])});else if(b)I(R,b(G));else{var dt;p(dt=Y(Object(G))).call(dt,function(Nt){x(R,Nt,r(G,Nt))})}}return R}var it=v(53130),rt=v.n(it),ct=v(38330),wt=v.n(ct),At=v(77526),Rt=v(93449),Dt=v(57272),pt=v(57124),st=v(19898),ot=v(97326);function nt(R,P){(null==P||P>R.length)&&(P=R.length);for(var G=0,Q=new Array(P);G<P;G++)Q[G]=R[G];return Q}function Tt(R,P){var G;if(R){if("string"==typeof R)return nt(R,P);var Q=st(G=Object.prototype.toString.call(R)).call(G,8,-1);if("Object"===Q&&R.constructor&&(Q=R.constructor.name),"Map"===Q||"Set"===Q)return ot(R);if("Arguments"===Q||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Q))return nt(R,P)}}function Ct(R,P){var G=void 0!==Rt&&Dt(R)||R["@@iterator"];if(!G){if(pt(R)||(G=Tt(R))||P&&R&&"number"==typeof R.length){G&&(R=G);var Q=0,dt=function(){};return{s:dt,n:function(){return Q>=R.length?{done:!0}:{done:!1,value:R[Q++]}},e:function(ue){throw ue},f:dt}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Yt,Nt=!0,Lt=!1;return{s:function(){G=G.call(R)},n:function(){var ue=G.next();return Nt=ue.done,ue},e:function(ue){Lt=!0,Yt=ue},f:function(){try{!Nt&&null!=G.return&&G.return()}finally{if(Lt)throw Yt}}}}var yt=v(3599);function gt(R){return(gt="function"==typeof Rt&&"symbol"==typeof yt?function(G){return typeof G}:function(G){return G&&"function"==typeof Rt&&G.constructor===Rt&&G!==Rt.prototype?"symbol":typeof G})(R)}function oe(R,P){return function(R){if(pt(R))return R}(R)||function(R,P){var G=null==R?null:void 0!==Rt&&Dt(R)||R["@@iterator"];if(null!=G){var Lt,Yt,Q=[],dt=!0,Nt=!1;try{for(G=G.call(R);!(dt=(Lt=G.next()).done)&&(Q.push(Lt.value),!P||Q.length!==P);dt=!0);}catch(ae){Nt=!0,Yt=ae}finally{try{!dt&&null!=G.return&&G.return()}finally{if(Nt)throw Yt}}return Q}}(R,P)||Tt(R,P)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ne=v(26394);function Xe(R,P,G,Q,dt,Nt,Lt){try{var Yt=R[Nt](Lt),ae=Yt.value}catch(ue){return void G(ue)}Yt.done?P(ae):Ne.resolve(ae).then(Q,dt)}function Ce(R){return function(){var P=this,G=arguments;return new Ne(function(Q,dt){var Nt=R.apply(P,G);function Lt(ae){Xe(Nt,Q,dt,Lt,Yt,"next",ae)}function Yt(ae){Xe(Nt,Q,dt,Lt,Yt,"throw",ae)}Lt(void 0)})}}var Ze=v(39126),we=v.n(Ze),ai=v(11761),re=v.n(ai),ce=v(20272),Pe=v.n(ce),qe=v(89926),oi=v.n(qe),wi=v(23289),Ji=v.n(wi),Ni=v(64770),ui=v.n(Ni),Oe=v(45635),Be=v.n(Oe),Ft=v(87048),ie=v.n(Ft),hi=v(45107),fe=v.n(hi),di=v(26775),ge=v.n(di),Zt=(v(9874),v(96912)),$=v.n(Zt);function at(R){return null==R}var ne={isNothing:at,isObject:function(R){return"object"==typeof R&&null!==R},toArray:function(R){return Array.isArray(R)?R:at(R)?[]:[R]},repeat:function(R,P){var Q,G="";for(Q=0;Q<P;Q+=1)G+=R;return G},isNegativeZero:function(R){return 0===R&&Number.NEGATIVE_INFINITY===1/R},extend:function(R,P){var G,Q,dt,Nt;if(P)for(G=0,Q=(Nt=Object.keys(P)).length;G<Q;G+=1)R[dt=Nt[G]]=P[dt];return R}};function xe(R,P){var G="",Q=R.reason||"(unknown reason)";return R.mark?(R.mark.name&&(G+='in "'+R.mark.name+'" '),G+="("+(R.mark.line+1)+":"+(R.mark.column+1)+")",!P&&R.mark.snippet&&(G+="\n\n"+R.mark.snippet),Q+" "+G):Q}function ii(R,P){Error.call(this),this.name="YAMLException",this.reason=R,this.mark=P,this.message=xe(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}(ii.prototype=Object.create(Error.prototype)).constructor=ii,ii.prototype.toString=function(P){return this.name+": "+xe(this,P)};var yi=ii;function Zi(R,P,G,Q,dt){var Nt="",Lt="",Yt=Math.floor(dt/2)-1;return Q-P>Yt&&(P=Q-Yt+(Nt=" ... ").length),G-Q>Yt&&(G=Q+Yt-(Lt=" ...").length),{str:Nt+R.slice(P,G).replace(/\t/g,"\u2192")+Lt,pos:Q-P+Nt.length}}function ji(R,P){return ne.repeat(" ",P-R.length)+R}var Re=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Me=["scalar","sequence","mapping"],Gt=function(R,P){if(P=P||{},Object.keys(P).forEach(function(G){if(-1===Re.indexOf(G))throw new yi('Unknown option "'+G+'" is met in definition of "'+R+'" YAML type.')}),this.options=P,this.tag=R,this.kind=P.kind||null,this.resolve=P.resolve||function(){return!0},this.construct=P.construct||function(G){return G},this.instanceOf=P.instanceOf||null,this.predicate=P.predicate||null,this.represent=P.represent||null,this.representName=P.representName||null,this.defaultStyle=P.defaultStyle||null,this.multi=P.multi||!1,this.styleAliases=function(R){var P={};return null!==R&&Object.keys(R).forEach(function(G){R[G].forEach(function(Q){P[String(Q)]=G})}),P}(P.styleAliases||null),-1===Me.indexOf(this.kind))throw new yi('Unknown kind "'+this.kind+'" is specified for "'+R+'" YAML type.')};function be(R,P){var G=[];return R[P].forEach(function(Q){var dt=G.length;G.forEach(function(Nt,Lt){Nt.tag===Q.tag&&Nt.kind===Q.kind&&Nt.multi===Q.multi&&(dt=Lt)}),G[dt]=Q}),G}function Pi(R){return this.extend(R)}Pi.prototype.extend=function(P){var G=[],Q=[];if(P instanceof Gt)Q.push(P);else if(Array.isArray(P))Q=Q.concat(P);else{if(!P||!Array.isArray(P.implicit)&&!Array.isArray(P.explicit))throw new yi("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");P.implicit&&(G=G.concat(P.implicit)),P.explicit&&(Q=Q.concat(P.explicit))}G.forEach(function(Nt){if(!(Nt instanceof Gt))throw new yi("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(Nt.loadKind&&"scalar"!==Nt.loadKind)throw new yi("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(Nt.multi)throw new yi("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),Q.forEach(function(Nt){if(!(Nt instanceof Gt))throw new yi("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var dt=Object.create(Pi.prototype);return dt.implicit=(this.implicit||[]).concat(G),dt.explicit=(this.explicit||[]).concat(Q),dt.compiledImplicit=be(dt,"implicit"),dt.compiledExplicit=be(dt,"explicit"),dt.compiledTypeMap=function(){var P,G,R={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function Q(dt){dt.multi?(R.multi[dt.kind].push(dt),R.multi.fallback.push(dt)):R[dt.kind][dt.tag]=R.fallback[dt.tag]=dt}for(P=0,G=arguments.length;P<G;P+=1)arguments[P].forEach(Q);return R}(dt.compiledImplicit,dt.compiledExplicit),dt};var Oi=Pi,kn=new Gt("tag:yaml.org,2002:str",{kind:"scalar",construct:function(R){return null!==R?R:""}}),Wn=new Gt("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(R){return null!==R?R:[]}}),so=new Gt("tag:yaml.org,2002:map",{kind:"mapping",construct:function(R){return null!==R?R:{}}}),Vn=new Oi({explicit:[kn,Wn,so]}),hs=new Gt("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(R){if(null===R)return!0;var P=R.length;return 1===P&&"~"===R||4===P&&("null"===R||"Null"===R||"NULL"===R)},construct:function(){return null},predicate:function(R){return null===R},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"}),Fn=new Gt("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(R){if(null===R)return!1;var P=R.length;return 4===P&&("true"===R||"True"===R||"TRUE"===R)||5===P&&("false"===R||"False"===R||"FALSE"===R)},construct:function(R){return"true"===R||"True"===R||"TRUE"===R},predicate:function(R){return"[object Boolean]"===Object.prototype.toString.call(R)},represent:{lowercase:function(R){return R?"true":"false"},uppercase:function(R){return R?"TRUE":"FALSE"},camelcase:function(R){return R?"True":"False"}},defaultStyle:"lowercase"});function jo(R){return 48<=R&&R<=57||65<=R&&R<=70||97<=R&&R<=102}function es(R){return 48<=R&&R<=55}function xn(R){return 48<=R&&R<=57}var Vs=new Gt("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(R){if(null===R)return!1;var dt,P=R.length,G=0,Q=!1;if(!P)return!1;if(("-"===(dt=R[G])||"+"===dt)&&(dt=R[++G]),"0"===dt){if(G+1===P)return!0;if("b"===(dt=R[++G])){for(G++;G<P;G++)if("_"!==(dt=R[G])){if("0"!==dt&&"1"!==dt)return!1;Q=!0}return Q&&"_"!==dt}if("x"===dt){for(G++;G<P;G++)if("_"!==(dt=R[G])){if(!jo(R.charCodeAt(G)))return!1;Q=!0}return Q&&"_"!==dt}if("o"===dt){for(G++;G<P;G++)if("_"!==(dt=R[G])){if(!es(R.charCodeAt(G)))return!1;Q=!0}return Q&&"_"!==dt}}if("_"===dt)return!1;for(;G<P;G++)if("_"!==(dt=R[G])){if(!xn(R.charCodeAt(G)))return!1;Q=!0}return!(!Q||"_"===dt)},construct:function(R){var Q,P=R,G=1;if(-1!==P.indexOf("_")&&(P=P.replace(/_/g,"")),("-"===(Q=P[0])||"+"===Q)&&("-"===Q&&(G=-1),Q=(P=P.slice(1))[0]),"0"===P)return 0;if("0"===Q){if("b"===P[1])return G*parseInt(P.slice(2),2);if("x"===P[1])return G*parseInt(P.slice(2),16);if("o"===P[1])return G*parseInt(P.slice(2),8)}return G*parseInt(P,10)},predicate:function(R){return"[object Number]"===Object.prototype.toString.call(R)&&R%1==0&&!ne.isNegativeZero(R)},represent:{binary:function(R){return R>=0?"0b"+R.toString(2):"-0b"+R.toString(2).slice(1)},octal:function(R){return R>=0?"0o"+R.toString(8):"-0o"+R.toString(8).slice(1)},decimal:function(R){return R.toString(10)},hexadecimal:function(R){return R>=0?"0x"+R.toString(16).toUpperCase():"-0x"+R.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),gn=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),pe=/^[-+]?[0-9]+e/,on=new Gt("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(R){return!(null===R||!gn.test(R)||"_"===R[R.length-1])},construct:function(R){var P,G;return G="-"===(P=R.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(P[0])>=0&&(P=P.slice(1)),".inf"===P?1===G?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===P?NaN:G*parseFloat(P,10)},predicate:function(R){return"[object Number]"===Object.prototype.toString.call(R)&&(R%1!=0||ne.isNegativeZero(R))},represent:function(R,P){var G;if(isNaN(R))switch(P){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===R)switch(P){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===R)switch(P){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(ne.isNegativeZero(R))return"-0.0";return G=R.toString(10),pe.test(G)?G.replace("e",".e"):G},defaultStyle:"lowercase"}),fn=Vn.extend({implicit:[hs,Fn,Vs,on]}),An=fn,cn=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),ds=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$"),Ao=new Gt("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(R){return null!==R&&(null!==cn.exec(R)||null!==ds.exec(R))},construct:function(R){var P,G,Q,dt,Nt,Lt,Yt,ei,ae=0,ue=null;if(null===(P=cn.exec(R))&&(P=ds.exec(R)),null===P)throw new Error("Date resolve error");if(G=+P[1],Q=+P[2]-1,dt=+P[3],!P[4])return new Date(Date.UTC(G,Q,dt));if(Nt=+P[4],Lt=+P[5],Yt=+P[6],P[7]){for(ae=P[7].slice(0,3);ae.length<3;)ae+="0";ae=+ae}return P[9]&&(ue=6e4*(60*+P[10]+ +(P[11]||0)),"-"===P[9]&&(ue=-ue)),ei=new Date(Date.UTC(G,Q,dt,Nt,Lt,Yt,ae)),ue&&ei.setTime(ei.getTime()-ue),ei},instanceOf:Date,represent:function(R){return R.toISOString()}}),Uo=new Gt("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(R){return"<<"===R||null===R}}),To="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r",Co=new Gt("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(R){if(null===R)return!1;var P,G,Q=0,dt=R.length,Nt=To;for(G=0;G<dt;G++)if(!((P=Nt.indexOf(R.charAt(G)))>64)){if(P<0)return!1;Q+=6}return Q%8==0},construct:function(R){var P,G,Q=R.replace(/[\r\n=]/g,""),dt=Q.length,Nt=To,Lt=0,Yt=[];for(P=0;P<dt;P++)P%4==0&&P&&(Yt.push(Lt>>16&255),Yt.push(Lt>>8&255),Yt.push(255&Lt)),Lt=Lt<<6|Nt.indexOf(Q.charAt(P));return 0==(G=dt%4*6)?(Yt.push(Lt>>16&255),Yt.push(Lt>>8&255),Yt.push(255&Lt)):18===G?(Yt.push(Lt>>10&255),Yt.push(Lt>>2&255)):12===G&&Yt.push(Lt>>4&255),new Uint8Array(Yt)},predicate:function(R){return"[object Uint8Array]"===Object.prototype.toString.call(R)},represent:function(R){var Q,dt,P="",G=0,Nt=R.length,Lt=To;for(Q=0;Q<Nt;Q++)Q%3==0&&Q&&(P+=Lt[G>>18&63],P+=Lt[G>>12&63],P+=Lt[G>>6&63],P+=Lt[63&G]),G=(G<<8)+R[Q];return 0==(dt=Nt%3)?(P+=Lt[G>>18&63],P+=Lt[G>>12&63],P+=Lt[G>>6&63],P+=Lt[63&G]):2===dt?(P+=Lt[G>>10&63],P+=Lt[G>>4&63],P+=Lt[G<<2&63],P+=Lt[64]):1===dt&&(P+=Lt[G>>2&63],P+=Lt[G<<4&63],P+=Lt[64],P+=Lt[64]),P}}),ws=Object.prototype.hasOwnProperty,ns=Object.prototype.toString,er=new Gt("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(R){if(null===R)return!0;var G,Q,dt,Nt,Lt,P=[],Yt=R;for(G=0,Q=Yt.length;G<Q;G+=1){if(Lt=!1,"[object Object]"!==ns.call(dt=Yt[G]))return!1;for(Nt in dt)if(ws.call(dt,Nt)){if(Lt)return!1;Lt=!0}if(!Lt)return!1;if(-1!==P.indexOf(Nt))return!1;P.push(Nt)}return!0},construct:function(R){return null!==R?R:[]}}),Or=Object.prototype.toString,Jr=new Gt("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(R){if(null===R)return!0;var P,G,Q,dt,Nt,Lt=R;for(Nt=new Array(Lt.length),P=0,G=Lt.length;P<G;P+=1){if("[object Object]"!==Or.call(Q=Lt[P])||1!==(dt=Object.keys(Q)).length)return!1;Nt[P]=[dt[0],Q[dt[0]]]}return!0},construct:function(R){if(null===R)return[];var P,G,Q,dt,Nt,Lt=R;for(Nt=new Array(Lt.length),P=0,G=Lt.length;P<G;P+=1)Q=Lt[P],dt=Object.keys(Q),Nt[P]=[dt[0],Q[dt[0]]];return Nt}}),oa=Object.prototype.hasOwnProperty,Ea=new Gt("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(R){if(null===R)return!0;var P,G=R;for(P in G)if(oa.call(G,P)&&null!==G[P])return!1;return!0},construct:function(R){return null!==R?R:{}}}),Ts=An.extend({implicit:[Ao,Uo],explicit:[Co,er,Jr,Ea]}),gs=Object.prototype.hasOwnProperty,$o=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,kr=/[\x85\u2028\u2029]/,Ds=/[,\[\]\{\}]/,Ns=/^(?:!|!!|![a-z\-]+!)$/i,ra=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Us(R){return Object.prototype.toString.call(R)}function xo(R){return 10===R||13===R}function Js(R){return 9===R||32===R}function ho(R){return 9===R||32===R||10===R||13===R}function Is(R){return 44===R||91===R||93===R||123===R||125===R}function Qn(R){var P;return 48<=R&&R<=57?R-48:97<=(P=32|R)&&P<=102?P-97+10:-1}function aa(R){return 120===R?2:117===R?4:85===R?8:0}function Lr(R){return 48<=R&&R<=57?R-48:-1}function mr(R){return 48===R?"\0":97===R?"\x07":98===R?"\b":116===R||9===R?"\t":110===R?"\n":118===R?"\v":102===R?"\f":114===R?"\r":101===R?"\x1b":32===R?" ":34===R?'"':47===R?"/":92===R?"\\":78===R?"\x85":95===R?"\xa0":76===R?"\u2028":80===R?"\u2029":""}function Po(R){return R<=65535?String.fromCharCode(R):String.fromCharCode(55296+(R-65536>>10),56320+(R-65536&1023))}for(var vr=new Array(256),Nr=new Array(256),nr=0;nr<256;nr++)vr[nr]=mr(nr)?1:0,Nr[nr]=mr(nr);function la(R,P){this.input=R,this.filename=P.filename||null,this.schema=P.schema||Ts,this.onWarning=P.onWarning||null,this.legacy=P.legacy||!1,this.json=P.json||!1,this.listener=P.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=R.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function $s(R,P){var G={name:R.filename,buffer:R.input.slice(0,-1),position:R.position,line:R.line,column:R.position-R.lineStart};return G.snippet=function(R,P){if(P=Object.create(P||null),!R.buffer)return null;P.maxLength||(P.maxLength=79),"number"!=typeof P.indent&&(P.indent=1),"number"!=typeof P.linesBefore&&(P.linesBefore=3),"number"!=typeof P.linesAfter&&(P.linesAfter=2);for(var Nt,G=/\r?\n|\r|\0/g,Q=[0],dt=[],Lt=-1;Nt=G.exec(R.buffer);)dt.push(Nt.index),Q.push(Nt.index+Nt[0].length),R.position<=Nt.index&&Lt<0&&(Lt=Q.length-2);Lt<0&&(Lt=Q.length-1);var ae,ue,Yt="",Fe=Math.min(R.line+P.linesAfter,dt.length).toString().length,We=P.maxLength-(P.indent+Fe+3);for(ae=1;ae<=P.linesBefore&&!(Lt-ae<0);ae++)ue=Zi(R.buffer,Q[Lt-ae],dt[Lt-ae],R.position-(Q[Lt]-Q[Lt-ae]),We),Yt=ne.repeat(" ",P.indent)+ji((R.line-ae+1).toString(),Fe)+" | "+ue.str+"\n"+Yt;for(ue=Zi(R.buffer,Q[Lt],dt[Lt],R.position,We),Yt+=ne.repeat(" ",P.indent)+ji((R.line+1).toString(),Fe)+" | "+ue.str+"\n",Yt+=ne.repeat("-",P.indent+Fe+3+ue.pos)+"^\n",ae=1;ae<=P.linesAfter&&!(Lt+ae>=dt.length);ae++)ue=Zi(R.buffer,Q[Lt+ae],dt[Lt+ae],R.position-(Q[Lt]-Q[Lt+ae]),We),Yt+=ne.repeat(" ",P.indent)+ji((R.line+ae+1).toString(),Fe)+" | "+ue.str+"\n";return Yt.replace(/\n$/,"")}(G),new yi(P,G)}function Vi(R,P){throw $s(R,P)}function bt(R,P){R.onWarning&&R.onWarning.call(null,$s(R,P))}var jt={YAML:function(P,G,Q){var dt,Nt,Lt;null!==P.version&&Vi(P,"duplication of %YAML directive"),1!==Q.length&&Vi(P,"YAML directive accepts exactly one argument"),null===(dt=/^([0-9]+)\.([0-9]+)$/.exec(Q[0]))&&Vi(P,"ill-formed argument of the YAML directive"),Nt=parseInt(dt[1],10),Lt=parseInt(dt[2],10),1!==Nt&&Vi(P,"unacceptable YAML version of the document"),P.version=Q[0],P.checkLineBreaks=Lt<2,1!==Lt&&2!==Lt&&bt(P,"unsupported YAML version of the document")},TAG:function(P,G,Q){var dt,Nt;2!==Q.length&&Vi(P,"TAG directive accepts exactly two arguments"),Nt=Q[1],Ns.test(dt=Q[0])||Vi(P,"ill-formed tag handle (first argument) of the TAG directive"),gs.call(P.tagMap,dt)&&Vi(P,'there is a previously declared suffix for "'+dt+'" tag handle'),ra.test(Nt)||Vi(P,"ill-formed tag prefix (second argument) of the TAG directive");try{Nt=decodeURIComponent(Nt)}catch(Lt){Vi(P,"tag prefix is malformed: "+Nt)}P.tagMap[dt]=Nt}};function St(R,P,G,Q){var dt,Nt,Lt,Yt;if(P<G){if(Yt=R.input.slice(P,G),Q)for(dt=0,Nt=Yt.length;dt<Nt;dt+=1)9===(Lt=Yt.charCodeAt(dt))||32<=Lt&&Lt<=1114111||Vi(R,"expected valid JSON character");else $o.test(Yt)&&Vi(R,"the stream contains non-printable characters");R.result+=Yt}}function J(R,P,G,Q){var dt,Nt,Lt,Yt;for(ne.isObject(G)||Vi(R,"cannot merge mappings; the provided source object is unacceptable"),Lt=0,Yt=(dt=Object.keys(G)).length;Lt<Yt;Lt+=1)gs.call(P,Nt=dt[Lt])||(P[Nt]=G[Nt],Q[Nt]=!0)}function q(R,P,G,Q,dt,Nt,Lt,Yt,ae){var ue,Fe;if(Array.isArray(dt))for(ue=0,Fe=(dt=Array.prototype.slice.call(dt)).length;ue<Fe;ue+=1)Array.isArray(dt[ue])&&Vi(R,"nested arrays are not supported inside keys"),"object"==typeof dt&&"[object Object]"===Us(dt[ue])&&(dt[ue]="[object Object]");if("object"==typeof dt&&"[object Object]"===Us(dt)&&(dt="[object Object]"),dt=String(dt),null===P&&(P={}),"tag:yaml.org,2002:merge"===Q)if(Array.isArray(Nt))for(ue=0,Fe=Nt.length;ue<Fe;ue+=1)J(R,P,Nt[ue],G);else J(R,P,Nt,G);else!R.json&&!gs.call(G,dt)&&gs.call(P,dt)&&(R.line=Lt||R.line,R.lineStart=Yt||R.lineStart,R.position=ae||R.position,Vi(R,"duplicated mapping key")),"__proto__"===dt?Object.defineProperty(P,dt,{configurable:!0,enumerable:!0,writable:!0,value:Nt}):P[dt]=Nt,delete G[dt];return P}function et(R){var P;10===(P=R.input.charCodeAt(R.position))?R.position++:13===P?(R.position++,10===R.input.charCodeAt(R.position)&&R.position++):Vi(R,"a line break is expected"),R.line+=1,R.lineStart=R.position,R.firstTabInLine=-1}function xt(R,P,G){for(var Q=0,dt=R.input.charCodeAt(R.position);0!==dt;){for(;Js(dt);)9===dt&&-1===R.firstTabInLine&&(R.firstTabInLine=R.position),dt=R.input.charCodeAt(++R.position);if(P&&35===dt)do{dt=R.input.charCodeAt(++R.position)}while(10!==dt&&13!==dt&&0!==dt);if(!xo(dt))break;for(et(R),dt=R.input.charCodeAt(R.position),Q++,R.lineIndent=0;32===dt;)R.lineIndent++,dt=R.input.charCodeAt(++R.position)}return-1!==G&&0!==Q&&R.lineIndent<G&&bt(R,"deficient indentation"),Q}function ze(R){var G,P=R.position;return!(45!==(G=R.input.charCodeAt(P))&&46!==G||G!==R.input.charCodeAt(P+1)||G!==R.input.charCodeAt(P+2)||(P+=3,G=R.input.charCodeAt(P),0!==G&&!ho(G)))}function Ii(R,P){1===P?R.result+=" ":P>1&&(R.result+=ne.repeat("\n",P-1))}function Fo(R,P){var G,ae,Q=R.tag,dt=R.anchor,Nt=[],Yt=!1;if(-1!==R.firstTabInLine)return!1;for(null!==R.anchor&&(R.anchorMap[R.anchor]=Nt),ae=R.input.charCodeAt(R.position);0!==ae&&(-1!==R.firstTabInLine&&(R.position=R.firstTabInLine,Vi(R,"tab characters must not be used in indentation")),45===ae&&ho(R.input.charCodeAt(R.position+1)));)if(Yt=!0,R.position++,xt(R,!0,-1)&&R.lineIndent<=P)Nt.push(null),ae=R.input.charCodeAt(R.position);else if(G=R.line,un(R,P,3,!1,!0),Nt.push(R.result),xt(R,!0,-1),ae=R.input.charCodeAt(R.position),(R.line===G||R.lineIndent>P)&&0!==ae)Vi(R,"bad indentation of a sequence entry");else if(R.lineIndent<P)break;return!!Yt&&(R.tag=Q,R.anchor=dt,R.kind="sequence",R.result=Nt,!0)}function os(R){var P,dt,Nt,Lt,G=!1,Q=!1;if(33!==(Lt=R.input.charCodeAt(R.position)))return!1;if(null!==R.tag&&Vi(R,"duplication of a tag property"),60===(Lt=R.input.charCodeAt(++R.position))?(G=!0,Lt=R.input.charCodeAt(++R.position)):33===Lt?(Q=!0,dt="!!",Lt=R.input.charCodeAt(++R.position)):dt="!",P=R.position,G){do{Lt=R.input.charCodeAt(++R.position)}while(0!==Lt&&62!==Lt);R.position<R.length?(Nt=R.input.slice(P,R.position),Lt=R.input.charCodeAt(++R.position)):Vi(R,"unexpected end of the stream within a verbatim tag")}else{for(;0!==Lt&&!ho(Lt);)33===Lt&&(Q?Vi(R,"tag suffix cannot contain exclamation marks"):(dt=R.input.slice(P-1,R.position+1),Ns.test(dt)||Vi(R,"named tag handle cannot contain such characters"),Q=!0,P=R.position+1)),Lt=R.input.charCodeAt(++R.position);Nt=R.input.slice(P,R.position),Ds.test(Nt)&&Vi(R,"tag suffix cannot contain flow indicator characters")}Nt&&!ra.test(Nt)&&Vi(R,"tag name cannot contain such characters: "+Nt);try{Nt=decodeURIComponent(Nt)}catch(Yt){Vi(R,"tag name is malformed: "+Nt)}return G?R.tag=Nt:gs.call(R.tagMap,dt)?R.tag=R.tagMap[dt]+Nt:"!"===dt?R.tag="!"+Nt:"!!"===dt?R.tag="tag:yaml.org,2002:"+Nt:Vi(R,'undeclared tag handle "'+dt+'"'),!0}function Zs(R){var P,G;if(38!==(G=R.input.charCodeAt(R.position)))return!1;for(null!==R.anchor&&Vi(R,"duplication of an anchor property"),G=R.input.charCodeAt(++R.position),P=R.position;0!==G&&!ho(G)&&!Is(G);)G=R.input.charCodeAt(++R.position);return R.position===P&&Vi(R,"name of an anchor node must contain at least one character"),R.anchor=R.input.slice(P,R.position),!0}function un(R,P,G,Q,dt){var Nt,Lt,Yt,We,ei,li,Ci,Xt,xi,ae=1,ue=!1,Fe=!1;if(null!==R.listener&&R.listener("open",R),R.tag=null,R.anchor=null,R.kind=null,R.result=null,Nt=Lt=Yt=4===G||3===G,Q&&xt(R,!0,-1)&&(ue=!0,R.lineIndent>P?ae=1:R.lineIndent===P?ae=0:R.lineIndent<P&&(ae=-1)),1===ae)for(;os(R)||Zs(R);)xt(R,!0,-1)?(ue=!0,Yt=Nt,R.lineIndent>P?ae=1:R.lineIndent===P?ae=0:R.lineIndent<P&&(ae=-1)):Yt=!1;if(Yt&&(Yt=ue||dt),(1===ae||4===G)&&(Xt=1===G||2===G?P:P+1,xi=R.position-R.lineStart,1===ae?Yt&&(Fo(R,xi)||function(R,P,G){var Q,dt,Nt,Lt,Yt,ae,Ei,ue=R.tag,Fe=R.anchor,We={},ei=Object.create(null),li=null,Ci=null,Xt=null,xi=!1,Fi=!1;if(-1!==R.firstTabInLine)return!1;for(null!==R.anchor&&(R.anchorMap[R.anchor]=We),Ei=R.input.charCodeAt(R.position);0!==Ei;){if(!xi&&-1!==R.firstTabInLine&&(R.position=R.firstTabInLine,Vi(R,"tab characters must not be used in indentation")),Q=R.input.charCodeAt(R.position+1),Nt=R.line,63!==Ei&&58!==Ei||!ho(Q)){if(Lt=R.line,Yt=R.lineStart,ae=R.position,!un(R,G,2,!1,!0))break;if(R.line===Nt){for(Ei=R.input.charCodeAt(R.position);Js(Ei);)Ei=R.input.charCodeAt(++R.position);if(58===Ei)ho(Ei=R.input.charCodeAt(++R.position))||Vi(R,"a whitespace character is expected after the key-value separator within a block mapping"),xi&&(q(R,We,ei,li,Ci,null,Lt,Yt,ae),li=Ci=Xt=null),Fi=!0,xi=!1,dt=!1,li=R.tag,Ci=R.result;else{if(!Fi)return R.tag=ue,R.anchor=Fe,!0;Vi(R,"can not read an implicit mapping pair; a colon is missed")}}else{if(!Fi)return R.tag=ue,R.anchor=Fe,!0;Vi(R,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===Ei?(xi&&(q(R,We,ei,li,Ci,null,Lt,Yt,ae),li=Ci=Xt=null),Fi=!0,xi=!0,dt=!0):xi?(xi=!1,dt=!0):Vi(R,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),R.position+=1,Ei=Q;if((R.line===Nt||R.lineIndent>P)&&(xi&&(Lt=R.line,Yt=R.lineStart,ae=R.position),un(R,P,4,!0,dt)&&(xi?Ci=R.result:Xt=R.result),xi||(q(R,We,ei,li,Ci,Xt,Lt,Yt,ae),li=Ci=Xt=null),xt(R,!0,-1),Ei=R.input.charCodeAt(R.position)),(R.line===Nt||R.lineIndent>P)&&0!==Ei)Vi(R,"bad indentation of a mapping entry");else if(R.lineIndent<P)break}return xi&&q(R,We,ei,li,Ci,null,Lt,Yt,ae),Fi&&(R.tag=ue,R.anchor=Fe,R.kind="mapping",R.result=We),Fi}(R,xi,Xt))||function(R,P){var Q,dt,Nt,Yt,Fe,We,ei,li,Xt,xi,Fi,Ei,G=!0,Lt=R.tag,ae=R.anchor,Ci=Object.create(null);if(91===(Ei=R.input.charCodeAt(R.position)))Fe=93,li=!1,Yt=[];else{if(123!==Ei)return!1;Fe=125,li=!0,Yt={}}for(null!==R.anchor&&(R.anchorMap[R.anchor]=Yt),Ei=R.input.charCodeAt(++R.position);0!==Ei;){if(xt(R,!0,P),(Ei=R.input.charCodeAt(R.position))===Fe)return R.position++,R.tag=Lt,R.anchor=ae,R.kind=li?"mapping":"sequence",R.result=Yt,!0;G?44===Ei&&Vi(R,"expected the node content, but found ','"):Vi(R,"missed comma between flow collection entries"),Fi=null,We=ei=!1,63===Ei&&ho(R.input.charCodeAt(R.position+1))&&(We=ei=!0,R.position++,xt(R,!0,P)),Q=R.line,dt=R.lineStart,Nt=R.position,un(R,P,1,!1,!0),xi=R.tag,Xt=R.result,xt(R,!0,P),Ei=R.input.charCodeAt(R.position),(ei||R.line===Q)&&58===Ei&&(We=!0,Ei=R.input.charCodeAt(++R.position),xt(R,!0,P),un(R,P,1,!1,!0),Fi=R.result),li?q(R,Yt,Ci,xi,Xt,Fi,Q,dt,Nt):Yt.push(We?q(R,null,Ci,xi,Xt,Fi,Q,dt,Nt):Xt),xt(R,!0,P),44===(Ei=R.input.charCodeAt(R.position))?(G=!0,Ei=R.input.charCodeAt(++R.position)):G=!1}Vi(R,"unexpected end of the stream within a flow collection")}(R,Xt)?Fe=!0:(Lt&&function(R,P){var G,Q,Fe,We,dt=1,Nt=!1,Lt=!1,Yt=P,ae=0,ue=!1;if(124===(We=R.input.charCodeAt(R.position)))Q=!1;else{if(62!==We)return!1;Q=!0}for(R.kind="scalar",R.result="";0!==We;)if(43===(We=R.input.charCodeAt(++R.position))||45===We)1===dt?dt=43===We?3:2:Vi(R,"repeat of a chomping mode identifier");else{if(!((Fe=Lr(We))>=0))break;0===Fe?Vi(R,"bad explicit indentation width of a block scalar; it cannot be less than one"):Lt?Vi(R,"repeat of an indentation width identifier"):(Yt=P+Fe-1,Lt=!0)}if(Js(We)){do{We=R.input.charCodeAt(++R.position)}while(Js(We));if(35===We)do{We=R.input.charCodeAt(++R.position)}while(!xo(We)&&0!==We)}for(;0!==We;){for(et(R),R.lineIndent=0,We=R.input.charCodeAt(R.position);(!Lt||R.lineIndent<Yt)&&32===We;)R.lineIndent++,We=R.input.charCodeAt(++R.position);if(!Lt&&R.lineIndent>Yt&&(Yt=R.lineIndent),xo(We))ae++;else{if(R.lineIndent<Yt){3===dt?R.result+=ne.repeat("\n",Nt?1+ae:ae):1===dt&&Nt&&(R.result+="\n");break}for(Q?Js(We)?(ue=!0,R.result+=ne.repeat("\n",Nt?1+ae:ae)):ue?(ue=!1,R.result+=ne.repeat("\n",ae+1)):0===ae?Nt&&(R.result+=" "):R.result+=ne.repeat("\n",ae):R.result+=ne.repeat("\n",Nt?1+ae:ae),Nt=!0,Lt=!0,ae=0,G=R.position;!xo(We)&&0!==We;)We=R.input.charCodeAt(++R.position);St(R,G,R.position,!1)}}return!0}(R,Xt)||function(R,P){var G,Q,dt;if(39!==(G=R.input.charCodeAt(R.position)))return!1;for(R.kind="scalar",R.result="",R.position++,Q=dt=R.position;0!==(G=R.input.charCodeAt(R.position));)if(39===G){if(St(R,Q,R.position,!0),39!==(G=R.input.charCodeAt(++R.position)))return!0;Q=R.position,R.position++,dt=R.position}else xo(G)?(St(R,Q,dt,!0),Ii(R,xt(R,!1,P)),Q=dt=R.position):R.position===R.lineStart&&ze(R)?Vi(R,"unexpected end of the document within a single quoted scalar"):(R.position++,dt=R.position);Vi(R,"unexpected end of the stream within a single quoted scalar")}(R,Xt)||function(R,P){var G,Q,dt,Nt,Lt,Yt;if(34!==(Yt=R.input.charCodeAt(R.position)))return!1;for(R.kind="scalar",R.result="",R.position++,G=Q=R.position;0!==(Yt=R.input.charCodeAt(R.position));){if(34===Yt)return St(R,G,R.position,!0),R.position++,!0;if(92===Yt){if(St(R,G,R.position,!0),xo(Yt=R.input.charCodeAt(++R.position)))xt(R,!1,P);else if(Yt<256&&vr[Yt])R.result+=Nr[Yt],R.position++;else if((Lt=aa(Yt))>0){for(dt=Lt,Nt=0;dt>0;dt--)(Lt=Qn(Yt=R.input.charCodeAt(++R.position)))>=0?Nt=(Nt<<4)+Lt:Vi(R,"expected hexadecimal character");R.result+=Po(Nt),R.position++}else Vi(R,"unknown escape sequence");G=Q=R.position}else xo(Yt)?(St(R,G,Q,!0),Ii(R,xt(R,!1,P)),G=Q=R.position):R.position===R.lineStart&&ze(R)?Vi(R,"unexpected end of the document within a double quoted scalar"):(R.position++,Q=R.position)}Vi(R,"unexpected end of the stream within a double quoted scalar")}(R,Xt)?Fe=!0:function(R){var P,G,Q;if(42!==(Q=R.input.charCodeAt(R.position)))return!1;for(Q=R.input.charCodeAt(++R.position),P=R.position;0!==Q&&!ho(Q)&&!Is(Q);)Q=R.input.charCodeAt(++R.position);return R.position===P&&Vi(R,"name of an alias node must contain at least one character"),G=R.input.slice(P,R.position),gs.call(R.anchorMap,G)||Vi(R,'unidentified alias "'+G+'"'),R.result=R.anchorMap[G],xt(R,!0,-1),!0}(R)?(Fe=!0,(null!==R.tag||null!==R.anchor)&&Vi(R,"alias node should not have any properties")):function(R,P,G){var dt,Nt,Lt,Yt,ae,ue,Fe,li,We=R.kind,ei=R.result;if(ho(li=R.input.charCodeAt(R.position))||Is(li)||35===li||38===li||42===li||33===li||124===li||62===li||39===li||34===li||37===li||64===li||96===li||(63===li||45===li)&&(ho(dt=R.input.charCodeAt(R.position+1))||G&&Is(dt)))return!1;for(R.kind="scalar",R.result="",Nt=Lt=R.position,Yt=!1;0!==li;){if(58===li){if(ho(dt=R.input.charCodeAt(R.position+1))||G&&Is(dt))break}else if(35===li){if(ho(R.input.charCodeAt(R.position-1)))break}else{if(R.position===R.lineStart&&ze(R)||G&&Is(li))break;if(xo(li)){if(ae=R.line,ue=R.lineStart,Fe=R.lineIndent,xt(R,!1,-1),R.lineIndent>=P){Yt=!0,li=R.input.charCodeAt(R.position);continue}R.position=Lt,R.line=ae,R.lineStart=ue,R.lineIndent=Fe;break}}Yt&&(St(R,Nt,Lt,!1),Ii(R,R.line-ae),Nt=Lt=R.position,Yt=!1),Js(li)||(Lt=R.position+1),li=R.input.charCodeAt(++R.position)}return St(R,Nt,Lt,!1),!!R.result||(R.kind=We,R.result=ei,!1)}(R,Xt,1===G)&&(Fe=!0,null===R.tag&&(R.tag="?")),null!==R.anchor&&(R.anchorMap[R.anchor]=R.result)):0===ae&&(Fe=Yt&&Fo(R,xi))),null===R.tag)null!==R.anchor&&(R.anchorMap[R.anchor]=R.result);else if("?"===R.tag){for(null!==R.result&&"scalar"!==R.kind&&Vi(R,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+R.kind+'"'),We=0,ei=R.implicitTypes.length;We<ei;We+=1)if((Ci=R.implicitTypes[We]).resolve(R.result)){R.result=Ci.construct(R.result),R.tag=Ci.tag,null!==R.anchor&&(R.anchorMap[R.anchor]=R.result);break}}else if("!"!==R.tag){if(gs.call(R.typeMap[R.kind||"fallback"],R.tag))Ci=R.typeMap[R.kind||"fallback"][R.tag];else for(Ci=null,We=0,ei=(li=R.typeMap.multi[R.kind||"fallback"]).length;We<ei;We+=1)if(R.tag.slice(0,li[We].tag.length)===li[We].tag){Ci=li[We];break}Ci||Vi(R,"unknown tag !<"+R.tag+">"),null!==R.result&&Ci.kind!==R.kind&&Vi(R,"unacceptable node kind for !<"+R.tag+'> tag; it should be "'+Ci.kind+'", not "'+R.kind+'"'),Ci.resolve(R.result,R.tag)?(R.result=Ci.construct(R.result,R.tag),null!==R.anchor&&(R.anchorMap[R.anchor]=R.result)):Vi(R,"cannot resolve a node with !<"+R.tag+"> explicit tag")}return null!==R.listener&&R.listener("close",R),null!==R.tag||null!==R.anchor||Fe}function Pr(R){var G,Q,dt,Lt,P=R.position,Nt=!1;for(R.version=null,R.checkLineBreaks=R.legacy,R.tagMap=Object.create(null),R.anchorMap=Object.create(null);0!==(Lt=R.input.charCodeAt(R.position))&&(xt(R,!0,-1),Lt=R.input.charCodeAt(R.position),!(R.lineIndent>0||37!==Lt));){for(Nt=!0,Lt=R.input.charCodeAt(++R.position),G=R.position;0!==Lt&&!ho(Lt);)Lt=R.input.charCodeAt(++R.position);for(dt=[],(Q=R.input.slice(G,R.position)).length<1&&Vi(R,"directive name must not be less than one character in length");0!==Lt;){for(;Js(Lt);)Lt=R.input.charCodeAt(++R.position);if(35===Lt){do{Lt=R.input.charCodeAt(++R.position)}while(0!==Lt&&!xo(Lt));break}if(xo(Lt))break;for(G=R.position;0!==Lt&&!ho(Lt);)Lt=R.input.charCodeAt(++R.position);dt.push(R.input.slice(G,R.position))}0!==Lt&&et(R),gs.call(jt,Q)?jt[Q](R,Q,dt):bt(R,'unknown document directive "'+Q+'"')}xt(R,!0,-1),0===R.lineIndent&&45===R.input.charCodeAt(R.position)&&45===R.input.charCodeAt(R.position+1)&&45===R.input.charCodeAt(R.position+2)?(R.position+=3,xt(R,!0,-1)):Nt&&Vi(R,"directives end mark is expected"),un(R,R.lineIndent-1,4,!1,!0),xt(R,!0,-1),R.checkLineBreaks&&kr.test(R.input.slice(P,R.position))&&bt(R,"non-ASCII line breaks are interpreted as content"),R.documents.push(R.result),R.position===R.lineStart&&ze(R)?46===R.input.charCodeAt(R.position)&&(R.position+=3,xt(R,!0,-1)):R.position<R.length-1&&Vi(R,"end of the stream or a document separator is expected")}function or(R,P){P=P||{},0!==(R=String(R)).length&&(10!==R.charCodeAt(R.length-1)&&13!==R.charCodeAt(R.length-1)&&(R+="\n"),65279===R.charCodeAt(0)&&(R=R.slice(1)));var G=new la(R,P),Q=R.indexOf("\0");for(-1!==Q&&(G.position=Q,Vi(G,"null byte is not allowed in input")),G.input+="\0";32===G.input.charCodeAt(G.position);)G.lineIndent+=1,G.position+=1;for(;G.position<G.length-1;)Pr(G);return G.documents}var br={loadAll:function(R,P,G){null!==P&&"object"==typeof P&&void 0===G&&(G=P,P=null);var Q=or(R,G);if("function"!=typeof P)return Q;for(var dt=0,Nt=Q.length;dt<Nt;dt+=1)P(Q[dt])},load:function(R,P){var G=or(R,P);if(0!==G.length){if(1===G.length)return G[0];throw new yi("expected a single document in the stream, but found more")}}},ki=Object.prototype.toString,Rn=Object.prototype.hasOwnProperty,qn={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},sr=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],Er=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function Ws(R){var P,G,Q;if(P=R.toString(16).toUpperCase(),R<=255)G="x",Q=2;else if(R<=65535)G="u",Q=4;else{if(!(R<=4294967295))throw new yi("code point within a string may not be greater than 0xFFFFFFFF");G="U",Q=8}return"\\"+G+ne.repeat("0",Q-P.length)+P}function jl(R){this.schema=R.schema||Ts,this.indent=Math.max(1,R.indent||2),this.noArrayIndent=R.noArrayIndent||!1,this.skipInvalid=R.skipInvalid||!1,this.flowLevel=ne.isNothing(R.flowLevel)?-1:R.flowLevel,this.styleMap=function(R,P){var G,Q,dt,Nt,Lt,Yt,ae;if(null===P)return{};for(G={},dt=0,Nt=(Q=Object.keys(P)).length;dt<Nt;dt+=1)Lt=Q[dt],Yt=String(P[Lt]),"!!"===Lt.slice(0,2)&&(Lt="tag:yaml.org,2002:"+Lt.slice(2)),(ae=R.compiledTypeMap.fallback[Lt])&&Rn.call(ae.styleAliases,Yt)&&(Yt=ae.styleAliases[Yt]),G[Lt]=Yt;return G}(this.schema,R.styles||null),this.sortKeys=R.sortKeys||!1,this.lineWidth=R.lineWidth||80,this.noRefs=R.noRefs||!1,this.noCompatMode=R.noCompatMode||!1,this.condenseFlow=R.condenseFlow||!1,this.quotingType='"'===R.quotingType?2:1,this.forceQuotes=R.forceQuotes||!1,this.replacer="function"==typeof R.replacer?R.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function $r(R,P){for(var Lt,G=ne.repeat(" ",P),Q=0,dt=-1,Nt="",Yt=R.length;Q<Yt;)-1===(dt=R.indexOf("\n",Q))?(Lt=R.slice(Q),Q=Yt):(Lt=R.slice(Q,dt+1),Q=dt+1),Lt.length&&"\n"!==Lt&&(Nt+=G),Nt+=Lt;return Nt}function Bo(R,P){return"\n"+ne.repeat(" ",R.indent*P)}function co(R){return 32===R||9===R}function tn(R){return 32<=R&&R<=126||161<=R&&R<=55295&&8232!==R&&8233!==R||57344<=R&&R<=65533&&65279!==R||65536<=R&&R<=1114111}function hn(R){return tn(R)&&65279!==R&&13!==R&&10!==R}function Tn(R,P,G){var Q=hn(R),dt=Q&&!co(R);return(G?Q:Q&&44!==R&&91!==R&&93!==R&&123!==R&&125!==R)&&35!==R&&!(58===P&&!dt)||hn(P)&&!co(P)&&35===R||58===P&&dt}function Fs(R,P){var Q,G=R.charCodeAt(P);return G>=55296&&G<=56319&&P+1<R.length&&(Q=R.charCodeAt(P+1))>=56320&&Q<=57343?1024*(G-55296)+Q-56320+65536:G}function ls(R){return/^\n* /.test(R)}function qs(R,P,G,Q,dt){R.dump=function(){if(0===P.length)return 2===R.quotingType?'""':"''";if(!R.noCompatMode&&(-1!==sr.indexOf(P)||Er.test(P)))return 2===R.quotingType?'"'+P+'"':"'"+P+"'";var Nt=R.indent*Math.max(1,G),Lt=-1===R.lineWidth?-1:Math.max(Math.min(R.lineWidth,40),R.lineWidth-Nt);switch(function(R,P,G,Q,dt,Nt,Lt,Yt){var ae,ue=0,Fe=null,We=!1,ei=!1,li=-1!==Q,Ci=-1,Xt=function(R){return tn(R)&&65279!==R&&!co(R)&&45!==R&&63!==R&&58!==R&&44!==R&&91!==R&&93!==R&&123!==R&&125!==R&&35!==R&&38!==R&&42!==R&&33!==R&&124!==R&&61!==R&&62!==R&&39!==R&&34!==R&&37!==R&&64!==R&&96!==R}(Fs(R,0))&&function(R){return!co(R)&&58!==R}(Fs(R,R.length-1));if(P||Lt)for(ae=0;ae<R.length;ue>=65536?ae+=2:ae++){if(!tn(ue=Fs(R,ae)))return 5;Xt=Xt&&Tn(ue,Fe,Yt),Fe=ue}else{for(ae=0;ae<R.length;ue>=65536?ae+=2:ae++){if(10===(ue=Fs(R,ae)))We=!0,li&&(ei=ei||ae-Ci-1>Q&&" "!==R[Ci+1],Ci=ae);else if(!tn(ue))return 5;Xt=Xt&&Tn(ue,Fe,Yt),Fe=ue}ei=ei||li&&ae-Ci-1>Q&&" "!==R[Ci+1]}return We||ei?G>9&&ls(R)?5:Lt?2===Nt?5:2:ei?4:3:!Xt||Lt||dt(R)?2===Nt?5:2:1}(P,Q||R.flowLevel>-1&&G>=R.flowLevel,R.indent,Lt,function(ue){return function(R,P){var G,Q;for(G=0,Q=R.implicitTypes.length;G<Q;G+=1)if(R.implicitTypes[G].resolve(P))return!0;return!1}(R,ue)},R.quotingType,R.forceQuotes&&!Q,dt)){case 1:return P;case 2:return"'"+P.replace(/'/g,"''")+"'";case 3:return"|"+Ja(P,R.indent)+dl($r(P,Nt));case 4:return">"+Ja(P,R.indent)+dl($r(function(R,P){for(var Nt,Lt,G=/(\n+)([^\n]*)/g,Q=(ue=void 0,ue=R.indexOf("\n"),G.lastIndex=ue=-1!==ue?ue:R.length,jr(R.slice(0,ue),P)),dt="\n"===R[0]||" "===R[0];Lt=G.exec(R);){var ae=Lt[2];Nt=" "===ae[0],Q+=Lt[1]+(dt||Nt||""===ae?"":"\n")+jr(ae,P),dt=Nt}var ue;return Q}(P,Lt),Nt));case 5:return'"'+function(R){for(var Q,P="",G=0,dt=0;dt<R.length;G>=65536?dt+=2:dt++)G=Fs(R,dt),!(Q=qn[G])&&tn(G)?(P+=R[dt],G>=65536&&(P+=R[dt+1])):P+=Q||Ws(G);return P}(P)+'"';default:throw new yi("impossible error: invalid scalar style")}}()}function Ja(R,P){var G=ls(R)?String(P):"",Q="\n"===R[R.length-1];return G+(!Q||"\n"!==R[R.length-2]&&"\n"!==R?Q?"":"-":"+")+"\n"}function dl(R){return"\n"===R[R.length-1]?R.slice(0,-1):R}function jr(R,P){if(""===R||" "===R[0])return R;for(var Q,Nt,G=/ [^ ]/g,dt=0,Lt=0,Yt=0,ae="";Q=G.exec(R);)(Yt=Q.index)-dt>P&&(ae+="\n"+R.slice(dt,Nt=Lt>dt?Lt:Yt),dt=Nt+1),Lt=Yt;return ae+="\n",(ae+=R.length-dt>P&&Lt>dt?R.slice(dt,Lt)+"\n"+R.slice(Lt+1):R.slice(dt)).slice(1)}function rr(R,P,G){var Q,dt,Nt,Lt,Yt,ae;for(Nt=0,Lt=(dt=G?R.explicitTypes:R.implicitTypes).length;Nt<Lt;Nt+=1)if(((Yt=dt[Nt]).instanceOf||Yt.predicate)&&(!Yt.instanceOf||"object"==typeof P&&P instanceof Yt.instanceOf)&&(!Yt.predicate||Yt.predicate(P))){if(R.tag=G?Yt.multi&&Yt.representName?Yt.representName(P):Yt.tag:"?",Yt.represent){if(ae=R.styleMap[Yt.tag]||Yt.defaultStyle,"[object Function]"===ki.call(Yt.represent))Q=Yt.represent(P,ae);else{if(!Rn.call(Yt.represent,ae))throw new yi("!<"+Yt.tag+'> tag resolver accepts not "'+ae+'" style');Q=Yt.represent[ae](P,ae)}R.dump=Q}return!0}return!1}function js(R,P,G,Q,dt,Nt,Lt){R.tag=null,R.dump=G,rr(R,G,!1)||rr(R,G,!0);var ue,Yt=ki.call(R.dump),ae=Q;Q&&(Q=R.flowLevel<0||R.flowLevel>P);var We,ei,Fe="[object Object]"===Yt||"[object Array]"===Yt;if(Fe&&(ei=-1!==(We=R.duplicates.indexOf(G))),(null!==R.tag&&"?"!==R.tag||ei||2!==R.indent&&P>0)&&(dt=!1),ei&&R.usedDuplicates[We])R.dump="*ref_"+We;else{if(Fe&&ei&&!R.usedDuplicates[We]&&(R.usedDuplicates[We]=!0),"[object Object]"===Yt)Q&&0!==Object.keys(R.dump).length?(function(R,P,G,Q){var Yt,ae,ue,Fe,We,ei,dt="",Nt=R.tag,Lt=Object.keys(G);if(!0===R.sortKeys)Lt.sort();else if("function"==typeof R.sortKeys)Lt.sort(R.sortKeys);else if(R.sortKeys)throw new yi("sortKeys must be a boolean or a function");for(Yt=0,ae=Lt.length;Yt<ae;Yt+=1)ei="",(!Q||""!==dt)&&(ei+=Bo(R,P)),Fe=G[ue=Lt[Yt]],R.replacer&&(Fe=R.replacer.call(G,ue,Fe)),js(R,P+1,ue,!0,!0,!0)&&((We=null!==R.tag&&"?"!==R.tag||R.dump&&R.dump.length>1024)&&(R.dump&&10===R.dump.charCodeAt(0)?ei+="?":ei+="? "),ei+=R.dump,We&&(ei+=Bo(R,P)),js(R,P+1,Fe,!0,We)&&(R.dump&&10===R.dump.charCodeAt(0)?ei+=":":ei+=": ",dt+=ei+=R.dump));R.tag=Nt,R.dump=dt||"{}"}(R,P,R.dump,dt),ei&&(R.dump="&ref_"+We+R.dump)):(function(R,P,G){var Lt,Yt,ae,ue,Fe,Q="",dt=R.tag,Nt=Object.keys(G);for(Lt=0,Yt=Nt.length;Lt<Yt;Lt+=1)Fe="",""!==Q&&(Fe+=", "),R.condenseFlow&&(Fe+='"'),ue=G[ae=Nt[Lt]],R.replacer&&(ue=R.replacer.call(G,ae,ue)),js(R,P,ae,!1,!1)&&(R.dump.length>1024&&(Fe+="? "),Fe+=R.dump+(R.condenseFlow?'"':"")+":"+(R.condenseFlow?"":" "),js(R,P,ue,!1,!1)&&(Q+=Fe+=R.dump));R.tag=dt,R.dump="{"+Q+"}"}(R,P,R.dump),ei&&(R.dump="&ref_"+We+" "+R.dump));else if("[object Array]"===Yt)Q&&0!==R.dump.length?(function(R,P,G,Q){var Lt,Yt,ae,dt="",Nt=R.tag;for(Lt=0,Yt=G.length;Lt<Yt;Lt+=1)ae=G[Lt],R.replacer&&(ae=R.replacer.call(G,String(Lt),ae)),(js(R,P+1,ae,!0,!0,!1,!0)||void 0===ae&&js(R,P+1,null,!0,!0,!1,!0))&&((!Q||""!==dt)&&(dt+=Bo(R,P)),R.dump&&10===R.dump.charCodeAt(0)?dt+="-":dt+="- ",dt+=R.dump);R.tag=Nt,R.dump=dt||"[]"}(R,R.noArrayIndent&&!Lt&&P>0?P-1:P,R.dump,dt),ei&&(R.dump="&ref_"+We+R.dump)):(function(R,P,G){var Nt,Lt,Yt,Q="",dt=R.tag;for(Nt=0,Lt=G.length;Nt<Lt;Nt+=1)Yt=G[Nt],R.replacer&&(Yt=R.replacer.call(G,String(Nt),Yt)),(js(R,P,Yt,!1,!1)||void 0===Yt&&js(R,P,null,!1,!1))&&(""!==Q&&(Q+=","+(R.condenseFlow?"":" ")),Q+=R.dump);R.tag=dt,R.dump="["+Q+"]"}(R,P,R.dump),ei&&(R.dump="&ref_"+We+" "+R.dump));else{if("[object String]"!==Yt){if("[object Undefined]"===Yt)return!1;if(R.skipInvalid)return!1;throw new yi("unacceptable kind of an object to dump "+Yt)}"?"!==R.tag&&qs(R,R.dump,P,Nt,ae)}null!==R.tag&&"?"!==R.tag&&(ue=encodeURI("!"===R.tag[0]?R.tag.slice(1):R.tag).replace(/!/g,"%21"),ue="!"===R.tag[0]?"!"+ue:"tag:yaml.org,2002:"===ue.slice(0,18)?"!!"+ue.slice(18):"!<"+ue+">",R.dump=ue+" "+R.dump)}return!0}function Al(R,P){var dt,Nt,G=[],Q=[];for(ar(R,G,Q),dt=0,Nt=Q.length;dt<Nt;dt+=1)P.duplicates.push(G[Q[dt]]);P.usedDuplicates=new Array(Nt)}function ar(R,P,G){var Q,dt,Nt;if(null!==R&&"object"==typeof R)if(-1!==(dt=P.indexOf(R)))-1===G.indexOf(dt)&&G.push(dt);else if(P.push(R),Array.isArray(R))for(dt=0,Nt=R.length;dt<Nt;dt+=1)ar(R[dt],P,G);else for(dt=0,Nt=(Q=Object.keys(R)).length;dt<Nt;dt+=1)ar(R[Q[dt]],P,G)}function Sa(R,P){return function(){throw new Error("Function yaml."+R+" is removed in js-yaml 4. Use yaml."+P+" instead, which is now safe by default.")}}const Mt={Type:Gt,Schema:Oi,FAILSAFE_SCHEMA:Vn,JSON_SCHEMA:fn,CORE_SCHEMA:An,DEFAULT_SCHEMA:Ts,load:br.load,loadAll:br.loadAll,dump:function(R,P){var G=new jl(P=P||{});G.noRefs||Al(R,G);var Q=R;return G.replacer&&(Q=G.replacer.call({"":Q},"",Q)),js(G,0,Q,!0,!0)?G.dump+"\n":""},YAMLException:yi,types:{binary:Co,float:on,map:so,null:hs,pairs:Jr,set:Ea,timestamp:Ao,bool:Fn,int:Vs,merge:Uo,omap:er,seq:Wn,str:kn},safeLoad:Sa("safeLoad","load"),safeLoadAll:Sa("safeLoadAll","loadAll"),safeDump:Sa("safeDump","dump")},$t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:window,{FormData:me,Blob:Le,File:bi}=$t;function io(R){return function(R){if(pt(R))return nt(R)}(R)||function(R){if(void 0!==Rt&&null!=Dt(R)||null!=R["@@iterator"])return ot(R)}(R)||Tt(R)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var zn=v(71049),cs=v.n(zn),lr=function(P){return":/?#[]@!$&'()*+,;=".indexOf(P)>-1},cr=function(P){return/^[a-z0-9\-._~]+$/i.test(P)};function Bs(R){var P,G=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},Q=G.escape,dt=arguments.length>2?arguments[2]:void 0;return"number"==typeof R&&(R=R.toString()),"string"==typeof R&&R.length&&Q?dt?JSON.parse(R):ui()(P=io(R)).call(P,function(Nt){var Lt,Yt;if(cr(Nt)||lr(Nt)&&"unsafe"===Q)return Nt;var ae=new TextEncoder;return ui()(Lt=ui()(Yt=oi()(ae.encode(Nt))).call(Yt,function(Fe){var We;return cs()(We="0".concat(Fe.toString(16).toUpperCase())).call(We,-2)})).call(Lt,function(Fe){return"%".concat(Fe)}).join("")}).join(""):R}function Zo(R){var P=R.value;return Array.isArray(P)?function(R){var P=R.key,G=R.value,Q=R.style,dt=R.explode,Nt=R.escape,Lt=function(We){return Bs(We,{escape:Nt})};if("simple"===Q)return ui()(G).call(G,function(Fe){return Lt(Fe)}).join(",");if("label"===Q)return".".concat(ui()(G).call(G,function(Fe){return Lt(Fe)}).join("."));if("matrix"===Q)return ui()(G).call(G,function(Fe){return Lt(Fe)}).reduce(function(Fe,We){var ei,li,Ci;return!Fe||dt?ie()(li=ie()(Ci="".concat(Fe||"",";")).call(Ci,P,"=")).call(li,We):ie()(ei="".concat(Fe,",")).call(ei,We)},"");if("form"===Q){var Yt=dt?"&".concat(P,"="):",";return ui()(G).call(G,function(Fe){return Lt(Fe)}).join(Yt)}if("spaceDelimited"===Q){var ae=dt?"".concat(P,"="):"";return ui()(G).call(G,function(Fe){return Lt(Fe)}).join(" ".concat(ae))}if("pipeDelimited"===Q){var ue=dt?"".concat(P,"="):"";return ui()(G).call(G,function(Fe){return Lt(Fe)}).join("|".concat(ue))}}(R):"object"===gt(P)?function(R){var P=R.key,G=R.value,Q=R.style,dt=R.explode,Nt=R.escape,Lt=function(ue){return Bs(ue,{escape:Nt})},Yt=Be()(G);return"simple"===Q?Yt.reduce(function(ae,ue){var Fe,We,ei,li=Lt(G[ue]),Ci=dt?"=":",",Xt=ae?"".concat(ae,","):"";return ie()(Fe=ie()(We=ie()(ei="".concat(Xt)).call(ei,ue)).call(We,Ci)).call(Fe,li)},""):"label"===Q?Yt.reduce(function(ae,ue){var Fe,We,ei,li=Lt(G[ue]),Ci=dt?"=":".",Xt=ae?"".concat(ae,"."):".";return ie()(Fe=ie()(We=ie()(ei="".concat(Xt)).call(ei,ue)).call(We,Ci)).call(Fe,li)},""):"matrix"===Q&&dt?Yt.reduce(function(ae,ue){var Fe,We,ei=Lt(G[ue]),li=ae?"".concat(ae,";"):";";return ie()(Fe=ie()(We="".concat(li)).call(We,ue,"=")).call(Fe,ei)},""):"matrix"===Q?Yt.reduce(function(ae,ue){var Fe,We,ei=Lt(G[ue]),li=ae?"".concat(ae,","):";".concat(P,"=");return ie()(Fe=ie()(We="".concat(li)).call(We,ue,",")).call(Fe,ei)},""):"form"===Q?Yt.reduce(function(ae,ue){var Fe,We,ei,li,Ci=Lt(G[ue]),Xt=ae?ie()(Fe="".concat(ae)).call(Fe,dt?"&":","):"",xi=dt?"=":",";return ie()(We=ie()(ei=ie()(li="".concat(Xt)).call(li,ue)).call(ei,xi)).call(We,Ci)},""):void 0}(R):function(R){var Lt,P=R.key,G=R.value,Q=R.style,dt=R.escape,Nt=function(ae){return Bs(ae,{escape:dt})};return"simple"===Q?Nt(G):"label"===Q?".".concat(Nt(G)):"matrix"===Q?ie()(Lt=";".concat(P,"=")).call(Lt,Nt(G)):"form"===Q||"deepObject"===Q?Nt(G):void 0}(R)}const Fh=function(P,G){G.body=P};var Ru={serializeRes:Gc,mergeInQueryOrForm:Xr};function vc(R){return Jl.apply(this,arguments)}function Jl(){return(Jl=Ce(we().mark(function R(P){var G,dt,Nt,Lt,Yt=arguments;return we().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:if(G=Yt.length>1&&void 0!==Yt[1]?Yt[1]:{},"object"===gt(P)&&(P=(G=P).url),G.headers=G.headers||{},Ru.mergeInQueryOrForm(G),G.headers&&Be()(G.headers).forEach(function(Fe){var We=G.headers[Fe];"string"==typeof We&&(G.headers[Fe]=We.replace(/\n+/g," "))}),!G.requestInterceptor){ue.next=12;break}return ue.next=8,G.requestInterceptor(G);case 8:if(ue.t0=ue.sent,ue.t0){ue.next=11;break}ue.t0=G;case 11:G=ue.t0;case 12:return/multipart\/form-data/i.test(G.headers["content-type"]||G.headers["Content-Type"])&&G.body instanceof me&&(delete G.headers["content-type"],delete G.headers["Content-Type"]),ue.prev=14,ue.next=17,(G.userFetch||fetch)(G.url,G);case 17:return dt=ue.sent,ue.next=20,Ru.serializeRes(dt,P,G);case 20:if(dt=ue.sent,!G.responseInterceptor){ue.next=28;break}return ue.next=24,G.responseInterceptor(dt);case 24:if(ue.t1=ue.sent,ue.t1){ue.next=27;break}ue.t1=dt;case 27:dt=ue.t1;case 28:ue.next=39;break;case 30:if(ue.prev=30,ue.t2=ue.catch(14),dt){ue.next=34;break}throw ue.t2;case 34:throw(Nt=new Error(dt.statusText||"response status is ".concat(dt.status))).status=dt.status,Nt.statusCode=dt.status,Nt.responseError=ue.t2,Nt;case 39:if(dt.ok){ue.next=45;break}throw(Lt=new Error(dt.statusText||"response status is ".concat(dt.status))).status=dt.status,Lt.statusCode=dt.status,Lt.response=dt,Lt;case 45:return ue.abrupt("return",dt);case 46:case"end":return ue.stop()}},R,null,[[14,30]])}))).apply(this,arguments)}var bc=function(){var P=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return/(json|xml|yaml|text)\b/.test(P)};function ms(R,P){return P&&(0===P.indexOf("application/json")||P.indexOf("+json")>0)?JSON.parse(R):Mt.load(R)}function Gc(R,P){var G=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},Q=G.loadSpec,dt=void 0!==Q&&Q,Nt={ok:R.ok,url:R.url||P,status:R.status,statusText:R.statusText,headers:$l(R.headers)},Lt=Nt.headers["content-type"],Yt=dt||bc(Lt),ae=Yt?R.text:R.blob||R.buffer;return ae.call(R).then(function(ue){if(Nt.text=ue,Nt.data=ue,Yt)try{var Fe=ms(ue,Lt);Nt.body=Fe,Nt.obj=Fe}catch(We){Nt.parseError=We}return Nt})}function wu(R){return re()(R).call(R,", ")?R.split(", "):R}function $l(){var R=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"function"!=typeof Pe()(R)?{}:oi()(Pe()(R).call(R)).reduce(function(P,G){var Q=oe(G,2);return P[Q[0]]=wu(Q[1]),P},{})}function Zl(R,P){return!P&&"undefined"!=typeof navigator&&(P=navigator),P&&"ReactNative"===P.product?!(!R||"object"!==gt(R)||"string"!=typeof R.uri):!!(void 0!==bi&&R instanceof bi||void 0!==Le&&R instanceof Le||ArrayBuffer.isView(R))||null!==R&&"object"===gt(R)&&"function"==typeof R.pipe}function Wc(R,P){return Array.isArray(R)&&R.some(function(G){return Zl(G,P)})}var Cr={form:",",spaceDelimited:"%20",pipeDelimited:"|"},rh={csv:",",ssv:"%20",tsv:"%09",pipes:"|"};function Bh(R,P){var G=arguments.length>2&&void 0!==arguments[2]&&arguments[2],Q=P.collectionFormat,dt=P.allowEmptyValue,Nt=P.serializationOption,Lt=P.encoding,Yt="object"!==gt(P)||Array.isArray(P)?P:P.value,ae=G?function(Ci){return Ci.toString()}:function(Ci){return encodeURIComponent(Ci)},ue=ae(R);if(void 0===Yt&&dt)return[[ue,""]];if(Zl(Yt)||Wc(Yt))return[[ue,Yt]];if(Nt)return Ql(R,Yt,G,Nt);if(Lt){if([gt(Lt.style),gt(Lt.explode),gt(Lt.allowReserved)].some(function(Ci){return"undefined"!==Ci})){var Fe=Lt.style,We=Lt.explode,ei=Lt.allowReserved;return Ql(R,Yt,G,{style:Fe,explode:We,allowReserved:ei})}if(Lt.contentType){if("application/json"===Lt.contentType){var li="string"==typeof Yt?Yt:Ji()(Yt);return[[ue,ae(li)]]}return[[ue,ae(Yt.toString())]]}return"object"!==gt(Yt)?[[ue,ae(Yt)]]:Array.isArray(Yt)&&Yt.every(function(Ci){return"object"!==gt(Ci)})?[[ue,ui()(Yt).call(Yt,ae).join(",")]]:[[ue,ae(Ji()(Yt))]]}return"object"!==gt(Yt)?[[ue,ae(Yt)]]:Array.isArray(Yt)?"multi"===Q?[[ue,ui()(Yt).call(Yt,ae)]]:[[ue,ui()(Yt).call(Yt,ae).join(rh[Q||"csv"])]]:[[ue,""]]}function Ql(R,P,G,Q){var dt,Fe,We,Nt=Q.style||"form",Lt=void 0===Q.explode?"form"===Nt:Q.explode,Yt=!G&&(Q&&Q.allowReserved?"unsafe":"reserved"),ae=function(li){return Bs(li,{escape:Yt})},ue=G?function(ei){return ei}:function(ei){return Bs(ei,{escape:Yt})};return"object"!==gt(P)?[[ue(R),ae(P)]]:Array.isArray(P)?Lt?[[ue(R),ui()(P).call(P,ae)]]:[[ue(R),ui()(P).call(P,ae).join(Cr[Nt])]]:"deepObject"===Nt?ui()(Fe=Be()(P)).call(Fe,function(ei){var li;return[ue(ie()(li="".concat(R,"[")).call(li,ei,"]")),ae(P[ei])]}):Lt?ui()(We=Be()(P)).call(We,function(ei){return[ue(ei),ae(P[ei])]}):[[ue(R),ui()(dt=Be()(P)).call(dt,function(ei){var li;return[ie()(li="".concat(ue(ei),",")).call(li,ae(P[ei]))]}).join(",")]]}function Hh(R){return fe()(R).reduce(function(P,G){var Yt,Q=oe(G,2),Lt=Ct(Bh(Q[0],Q[1],!0));try{for(Lt.s();!(Yt=Lt.n()).done;){var ae=oe(Yt.value,2),ue=ae[0],Fe=ae[1];if(Array.isArray(Fe)){var ei,We=Ct(Fe);try{for(We.s();!(ei=We.n()).done;){var li=ei.value;if(ArrayBuffer.isView(li)){var Ci=new Le([li]);P.append(ue,Ci)}else P.append(ue,li)}}catch(xi){We.e(xi)}finally{We.f()}}else if(ArrayBuffer.isView(Fe)){var Xt=new Le([Fe]);P.append(ue,Xt)}else P.append(ue,Fe)}}catch(xi){Lt.e(xi)}finally{Lt.f()}return P},new me)}function zc(R){var P=Be()(R).reduce(function(G,Q){var Nt,dt=Ct(Bh(Q,R[Q]));try{for(dt.s();!(Nt=dt.n()).done;){var Lt=oe(Nt.value,2);G[Lt[0]]=Lt[1]}}catch(ue){dt.e(ue)}finally{dt.f()}return G},{});return $().stringify(P,{encode:!1,indices:!1})||""}function Xr(){var R=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},P=R.url,G=void 0===P?"":P,Q=R.query,dt=R.form,Nt=function(){for(var Ei=arguments.length,uo=new Array(Ei),no=0;no<Ei;no++)uo[no]=arguments[no];var Jo=ge()(uo).call(uo,function(Go){return Go}).join("&");return Jo?"?".concat(Jo):""};if(dt){var Lt=Be()(dt).some(function(Fi){var Ei=dt[Fi].value;return Zl(Ei)||Wc(Ei)}),Yt=R.headers["content-type"]||R.headers["Content-Type"];if(Lt||/multipart\/form-data/i.test(Yt)){var ae=Hh(R.form);Fh(ae,R)}else R.body=zc(dt);delete R.form}if(Q){var ue=G.split("?"),Fe=oe(ue,2),We=Fe[0],ei=Fe[1],li="";if(ei){var Ci=$().parse(ei),Xt=Be()(Q);Xt.forEach(function(Fi){return delete Ci[Fi]}),li=$().stringify(Ci,{encode:!0})}var xi=Nt(li,zc(Q));R.url=We+xi,delete R.query}return R}function Rs(R,P){if(!(R instanceof P))throw new TypeError("Cannot call a class as a function")}function ql(R,P){for(var G=0;G<P.length;G++){var Q=P[G];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),x(R,Q.key,Q)}}function _l(R,P,G){return P&&ql(R.prototype,P),G&&ql(R,G),R}var R,pa=v(78804),Iu=v.n(pa),Ys=v(96916),vs=v.n(Ys),tc=v(3498),ml=v.n(tc),qa=(R=function(P,G){return(R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Q,dt){Q.__proto__=dt}||function(Q,dt){for(var Nt in dt)dt.hasOwnProperty(Nt)&&(Q[Nt]=dt[Nt])})(P,G)},function(P,G){function Q(){this.constructor=P}R(P,G),P.prototype=null===G?Object.create(G):(Q.prototype=G.prototype,new Q)}),tl=Object.prototype.hasOwnProperty;function xl(R,P){return tl.call(R,P)}function jc(R){if(Array.isArray(R)){for(var G=new Array(R.length),P=0;P<G.length;P++)G[P]=""+P;return G}if(Object.keys)return Object.keys(R);for(var Q in G=[],R)xl(R,Q)&&G.push(Q);return G}function Sr(R){switch(typeof R){case"object":return JSON.parse(JSON.stringify(R));case"undefined":return null;default:return R}}function Yc(R){for(var Q,P=0,G=R.length;P<G;){if(!((Q=R.charCodeAt(P))>=48&&Q<=57))return!1;P++}return!0}function wn(R){return-1===R.indexOf("/")&&-1===R.indexOf("~")?R:R.replace(/~/g,"~0").replace(/\//g,"~1")}function ur(R){return R.replace(/~1/g,"/").replace(/~0/g,"~")}function Xc(R){if(void 0===R)return!0;if(R)if(Array.isArray(R)){for(var P=0,G=R.length;P<G;P++)if(Xc(R[P]))return!0}else if("object"==typeof R){var Q=jc(R),dt=Q.length;for(P=0;P<dt;P++)if(Xc(R[Q[P]]))return!0}return!1}function Kc(R,P){var G=[R];for(var Q in P){var dt="object"==typeof P[Q]?JSON.stringify(P[Q],null,2):P[Q];void 0!==dt&&G.push(Q+": "+dt)}return G.join("\n")}var Mu=function(R){function P(G,Q,dt,Nt,Lt){var Yt=this.constructor,ae=R.call(this,Kc(G,{name:Q,index:dt,operation:Nt,tree:Lt}))||this;return ae.name=Q,ae.index=dt,ae.operation=Nt,ae.tree=Lt,Object.setPrototypeOf(ae,Yt.prototype),ae.message=Kc(G,{name:Q,index:dt,operation:Nt,tree:Lt}),ae}return qa(P,R),P}(Error),bs=Mu,Au=Sr,fa={add:function(R,P,G){return R[P]=this.value,{newDocument:G}},remove:function(R,P,G){var Q=R[P];return delete R[P],{newDocument:G,removed:Q}},replace:function(R,P,G){var Q=R[P];return R[P]=this.value,{newDocument:G,removed:Q}},move:function(R,P,G){var Q=Ba(G,this.path);Q&&(Q=Sr(Q));var dt=hr(G,{op:"remove",path:this.from}).removed;return hr(G,{op:"add",path:this.path,value:dt}),{newDocument:G,removed:Q}},copy:function(R,P,G){var Q=Ba(G,this.from);return hr(G,{op:"add",path:this.path,value:Sr(Q)}),{newDocument:G}},test:function(R,P,G){return{newDocument:G,test:Vr(R[P],this.value)}},_get:function(R,P,G){return this.value=R[P],{newDocument:G}}},ah={add:function(R,P,G){return Yc(P)?R.splice(P,0,this.value):R[P]=this.value,{newDocument:G,index:P}},remove:function(R,P,G){return{newDocument:G,removed:R.splice(P,1)[0]}},replace:function(R,P,G){var Q=R[P];return R[P]=this.value,{newDocument:G,removed:Q}},move:fa.move,copy:fa.copy,test:fa.test,_get:fa._get};function Ba(R,P){if(""==P)return R;var G={op:"_get",path:P};return hr(R,G),G.value}function hr(R,P,G,Q,dt,Nt){if(void 0===G&&(G=!1),void 0===Q&&(Q=!0),void 0===dt&&(dt=!0),void 0===Nt&&(Nt=0),G&&("function"==typeof G?G(P,0,R,P.path):Ha(P,0)),""===P.path){var Lt={newDocument:R};if("add"===P.op)return Lt.newDocument=P.value,Lt;if("replace"===P.op)return Lt.newDocument=P.value,Lt.removed=R,Lt;if("move"===P.op||"copy"===P.op)return Lt.newDocument=Ba(R,P.from),"move"===P.op&&(Lt.removed=R),Lt;if("test"===P.op){if(Lt.test=Vr(R,P.value),!1===Lt.test)throw new bs("Test operation failed","TEST_OPERATION_FAILED",Nt,P,R);return Lt.newDocument=R,Lt}if("remove"===P.op)return Lt.removed=R,Lt.newDocument=null,Lt;if("_get"===P.op)return P.value=R,Lt;if(G)throw new bs("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",Nt,P,R);return Lt}Q||(R=Sr(R));var ae=(P.path||"").split("/"),ue=R,Fe=1,We=ae.length,ei=void 0,li=void 0,Ci=void 0;for(Ci="function"==typeof G?G:Ha;;){if((li=ae[Fe])&&-1!=li.indexOf("~")&&(li=ur(li)),dt&&"__proto__"==li)throw new TypeError("JSON-Patch: modifying `__proto__` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(G&&void 0===ei&&(void 0===ue[li]?ei=ae.slice(0,Fe).join("/"):Fe==We-1&&(ei=P.path),void 0!==ei&&Ci(P,0,R,ei)),Fe++,Array.isArray(ue)){if("-"===li)li=ue.length;else{if(G&&!Yc(li))throw new bs("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",Nt,P,R);Yc(li)&&(li=~~li)}if(Fe>=We){if(G&&"add"===P.op&&li>ue.length)throw new bs("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",Nt,P,R);if(!1===(Lt=ah[P.op].call(P,ue,li,R)).test)throw new bs("Test operation failed","TEST_OPERATION_FAILED",Nt,P,R);return Lt}}else if(Fe>=We){if(!1===(Lt=fa[P.op].call(P,ue,li,R)).test)throw new bs("Test operation failed","TEST_OPERATION_FAILED",Nt,P,R);return Lt}if(ue=ue[li],G&&Fe<We&&(!ue||"object"!=typeof ue))throw new bs("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",Nt,P,R)}}function Hr(R,P,G,Q,dt){if(void 0===Q&&(Q=!0),void 0===dt&&(dt=!0),G&&!Array.isArray(P))throw new bs("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");Q||(R=Sr(R));for(var Nt=new Array(P.length),Lt=0,Yt=P.length;Lt<Yt;Lt++)Nt[Lt]=hr(R,P[Lt],G,!0,dt,Lt),R=Nt[Lt].newDocument;return Nt.newDocument=R,Nt}function Vh(R,P,G){var Q=hr(R,P);if(!1===Q.test)throw new bs("Test operation failed","TEST_OPERATION_FAILED",G,P,R);return Q.newDocument}function Ha(R,P,G,Q){if("object"!=typeof R||null===R||Array.isArray(R))throw new bs("Operation is not an object","OPERATION_NOT_AN_OBJECT",P,R,G);if(!fa[R.op])throw new bs("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",P,R,G);if("string"!=typeof R.path)throw new bs("Operation `path` property is not a string","OPERATION_PATH_INVALID",P,R,G);if(0!==R.path.indexOf("/")&&R.path.length>0)throw new bs('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",P,R,G);if(("move"===R.op||"copy"===R.op)&&"string"!=typeof R.from)throw new bs("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",P,R,G);if(("add"===R.op||"replace"===R.op||"test"===R.op)&&void 0===R.value)throw new bs("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",P,R,G);if(("add"===R.op||"replace"===R.op||"test"===R.op)&&Xc(R.value))throw new bs("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",P,R,G);if(G)if("add"==R.op){var dt=R.path.split("/").length,Nt=Q.split("/").length;if(dt!==Nt+1&&dt!==Nt)throw new bs("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",P,R,G)}else if("replace"===R.op||"remove"===R.op||"_get"===R.op){if(R.path!==Q)throw new bs("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",P,R,G)}else if("move"===R.op||"copy"===R.op){var Yt=qr([{op:"_get",path:R.from,value:void 0}],G);if(Yt&&"OPERATION_PATH_UNRESOLVABLE"===Yt.name)throw new bs("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",P,R,G)}}function qr(R,P,G){try{if(!Array.isArray(R))throw new bs("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(P)Hr(Sr(P),Sr(R),G||!0);else{G=G||Ha;for(var Q=0;Q<R.length;Q++)G(R[Q],Q,P,void 0)}}catch(dt){if(dt instanceof bs)return dt;throw dt}}function Vr(R,P){if(R===P)return!0;if(R&&P&&"object"==typeof R&&"object"==typeof P){var dt,Nt,Lt,G=Array.isArray(R),Q=Array.isArray(P);if(G&&Q){if((Nt=R.length)!=P.length)return!1;for(dt=Nt;0!=dt--;)if(!Vr(R[dt],P[dt]))return!1;return!0}if(G!=Q)return!1;var Yt=Object.keys(R);if((Nt=Yt.length)!==Object.keys(P).length)return!1;for(dt=Nt;0!=dt--;)if(!P.hasOwnProperty(Yt[dt]))return!1;for(dt=Nt;0!=dt--;)if(!Vr(R[Lt=Yt[dt]],P[Lt]))return!1;return!0}return R!=R&&P!=P}var il=new WeakMap,Jc=function(P){this.observers=new Map,this.obj=P},lh=function(P,G){this.callback=P,this.observer=G};function Ll(R,P){P.unobserve()}function Nl(R,P){var Q,dt=function(R){return il.get(R)}(R);if(dt){var Nt=function(R,P){return R.observers.get(P)}(dt,P);Q=Nt&&Nt.observer}else dt=new Jc(R),il.set(R,dt);if(Q)return Q;if(Q={},dt.value=Sr(R),P){Q.callback=P,Q.next=null;var Lt=function(){ec(Q)},Yt=function(){clearTimeout(Q.next),Q.next=setTimeout(Lt)};"undefined"!=typeof window&&(window.addEventListener("mouseup",Yt),window.addEventListener("keyup",Yt),window.addEventListener("mousedown",Yt),window.addEventListener("keydown",Yt),window.addEventListener("change",Yt))}return Q.patches=[],Q.object=R,Q.unobserve=function(){ec(Q),clearTimeout(Q.next),function(R,P){R.observers.delete(P.callback)}(dt,Q),"undefined"!=typeof window&&(window.removeEventListener("mouseup",Yt),window.removeEventListener("keyup",Yt),window.removeEventListener("mousedown",Yt),window.removeEventListener("keydown",Yt),window.removeEventListener("change",Yt))},dt.observers.set(P,new lh(P,Q)),Q}function ec(R,P){void 0===P&&(P=!1);var G=il.get(R.object);ss(G.value,R.object,R.patches,"",P),R.patches.length&&Hr(G.value,R.patches);var Q=R.patches;return Q.length>0&&(R.patches=[],R.callback&&R.callback(Q)),Q}function ss(R,P,G,Q,dt){if(P!==R){"function"==typeof P.toJSON&&(P=P.toJSON());for(var Nt=jc(P),Lt=jc(R),ae=!1,ue=Lt.length-1;ue>=0;ue--){var We=R[Fe=Lt[ue]];if(!xl(P,Fe)||void 0===P[Fe]&&void 0!==We&&!1===Array.isArray(P))Array.isArray(R)===Array.isArray(P)?(dt&&G.push({op:"test",path:Q+"/"+wn(Fe),value:Sr(We)}),G.push({op:"remove",path:Q+"/"+wn(Fe)}),ae=!0):(dt&&G.push({op:"test",path:Q,value:R}),G.push({op:"replace",path:Q,value:P}));else{var ei=P[Fe];"object"==typeof We&&null!=We&&"object"==typeof ei&&null!=ei&&Array.isArray(We)===Array.isArray(ei)?ss(We,ei,G,Q+"/"+wn(Fe),dt):We!==ei&&(dt&&G.push({op:"test",path:Q+"/"+wn(Fe),value:Sr(We)}),G.push({op:"replace",path:Q+"/"+wn(Fe),value:Sr(ei)}))}}if(ae||Nt.length!=Lt.length)for(ue=0;ue<Nt.length;ue++){var Fe;!xl(R,Fe=Nt[ue])&&void 0!==P[Fe]&&G.push({op:"add",path:Q+"/"+wn(Fe),value:Sr(P[Fe])})}}}function Kr(R,P,G){void 0===G&&(G=!1);var Q=[];return ss(R,P,Q,"",G),Q}Object.assign({},T,a,{JsonPatchError:Mu,deepClone:Sr,escapePathComponent:wn,unescapePathComponent:ur});var Va=v(80915),Ec=v.n(Va),$c=v(57469),Ou=v.n($c);const mo={add:function(R,P){return{op:"add",path:R,value:P}},replace:ol,remove:function(R){return{op:"remove",path:R}},merge:function(R,P){return{type:"mutation",op:"merge",path:R,value:P}},mergeDeep:function(R,P){return{type:"mutation",op:"mergeDeep",path:R,value:P}},context:function(R,P){return{type:"context",path:R,value:P}},getIn:function(R,P){return P.reduce(function(G,Q){return void 0!==Q&&G?G[Q]:G},R)},applyPatch:function(R,P,G){if(G=G||{},"merge"===(P=X(X({},P),{},{path:P.path&&Ua(P.path)})).op){var Q=de(R,P.path);rt()(Q,P.value),Hr(R,[ol(P.path,Q)])}else if("mergeDeep"===P.op){var dt=de(R,P.path);for(var Nt in P.value){var Lt=P.value[Nt],Yt=Array.isArray(Lt);if(Yt){var ae=dt[Nt]||[];dt[Nt]=ie()(ae).call(ae,Lt)}else if(dr(Lt)&&!Yt){var ue=X({},dt[Nt]);for(var Fe in Lt){if(Object.prototype.hasOwnProperty.call(ue,Fe)){ue=Ec()(Ou()(ue),Lt);break}rt()(ue,k({},Fe,Lt[Fe]))}dt[Nt]=ue}else dt[Nt]=Lt}}else if("add"===P.op&&""===P.path&&dr(P.value)){Hr(R,Be()(P.value).reduce(function(xi,Fi){return xi.push({op:"add",path:"/".concat(Ua(Fi)),value:P.value[Fi]}),xi},[]))}else if("replace"===P.op&&""===P.path){var li=P.value;G.allowMetaPatches&&P.meta&&vt(P)&&(Array.isArray(P.value)||dr(P.value))&&(li=X(X({},li),P.meta)),R=li}else if(Hr(R,[P]),G.allowMetaPatches&&P.meta&&vt(P)&&(Array.isArray(P.value)||dr(P.value))){var Xt=X(X({},de(R,P.path)),P.meta);Hr(R,[ol(P.path,Xt)])}return R},parentPathMatch:function(R,P){if(!Array.isArray(P))return!1;for(var G=0,Q=P.length;G<Q;G+=1)if(P[G]!==R[G])return!1;return!0},flatten:Bl,fullyNormalizeArray:function(R){return Hl(Bl(Tc(R)))},normalizeArray:Tc,isPromise:function(R){return dr(R)&&Lu(R.then)},forEachNew:function(R,P){try{return oc(R,za,P)}catch(G){return G}},forEachNewPrimitive:function(R,P){try{return oc(R,Pl,P)}catch(G){return G}},isJsonPatch:ga,isContextPatch:function(R){return le(R)&&"context"===R.type},isPatch:le,isMutation:ht,isAdditiveMutation:vt,isGenerator:function(R){return"[object GeneratorFunction]"===Object.prototype.toString.call(R)},isFunction:Lu,isObject:dr,isError:function(R){return R instanceof Error}};function Ua(R){return Array.isArray(R)?R.length<1?"":"/".concat(ui()(R).call(R,function(P){return(P+"").replace(/~/g,"~0").replace(/\//g,"~1")}).join("/")):R}function ol(R,P,G){return{op:"replace",path:R,value:P,meta:G}}function oc(R,P,G){var Q;return Hl(Bl(ui()(Q=ge()(R).call(R,vt)).call(Q,function(Yt){return P(Yt.value,G,Yt.path)})||[]))}function Pl(R,P,G){return G=G||[],Array.isArray(R)?ui()(R).call(R,function(dt,Nt){return Pl(dt,P,ie()(G).call(G,Nt))}):dr(R)?ui()(Q=Be()(R)).call(Q,function(dt){return Pl(R[dt],P,ie()(G).call(G,dt))}):P(R,G[G.length-1],G);var Q}function za(R,P,G){var Q=[];if((G=G||[]).length>0){var dt=P(R,G[G.length-1],G);dt&&(Q=ie()(Q).call(Q,dt))}if(Array.isArray(R)){var Nt=ui()(R).call(R,function(ae,ue){return za(ae,P,ie()(G).call(G,ue))});Nt&&(Q=ie()(Q).call(Q,Nt))}else if(dr(R)){var Lt,Yt=ui()(Lt=Be()(R)).call(Lt,function(ae){return za(R[ae],P,ie()(G).call(G,ae))});Yt&&(Q=ie()(Q).call(Q,Yt))}return Bl(Q)}function Tc(R){return Array.isArray(R)?R:[R]}function Bl(R){var P;return ie()(P=[]).apply(P,io(ui()(R).call(R,function(G){return Array.isArray(G)?Bl(G):G})))}function Hl(R){return ge()(R).call(R,function(P){return void 0!==P})}function dr(R){return R&&"object"===gt(R)}function Lu(R){return R&&"function"==typeof R}function ga(R){if(le(R)){var P=R.op;return"add"===P||"remove"===P||"replace"===P}return!1}function ht(R){return ga(R)||le(R)&&"mutation"===R.type}function vt(R){return ht(R)&&("add"===R.op||"replace"===R.op||"merge"===R.op||"mergeDeep"===R.op)}function le(R){return R&&"object"===gt(R)}function de(R,P){try{return Ba(R,P)}catch(G){return console.error(G),{}}}var Ye=v(14569),Te=v.n(Ye),He=v(58258),ci=v.n(He);function gi(R,P){function G(){Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack;for(var Q=arguments.length,dt=new Array(Q),Nt=0;Nt<Q;Nt++)dt[Nt]=arguments[Nt];this.message=dt[0],P&&P.apply(this,dt)}return(G.prototype=new Error).name=R,G.prototype.constructor=G,G}var Ti=v(16958),dn=v.n(Ti),an=["properties"],Bn=["properties"],wo=["definitions","parameters","responses","securityDefinitions","components/schemas","components/responses","components/parameters","components/securitySchemes"],Mn=["schema/example","items/example"];function Jn(R){var P=R[R.length-1],G=R[R.length-2],Q=R.join("/");return an.indexOf(P)>-1&&-1===Bn.indexOf(G)||wo.indexOf(Q)>-1||Mn.some(function(dt){return Q.indexOf(dt)>-1})}function us(R,P){var G,dt=oe(R.split("#"),2),Lt=dt[1],Yt=At.resolve(dt[0]||"",P||"");return Lt?ie()(G="".concat(Yt,"#")).call(G,Lt):Yt}var As="application/json, application/yaml",_a=new RegExp("^([a-z]+://|//)","i"),Ur=gi("JSONRefError",function(P,G,Q){this.originalError=Q,rt()(this,G||{})}),pr={},Ma=new(Te()),rc=[function(R){return"paths"===R[0]&&"responses"===R[3]&&"examples"===R[5]},function(R){return"paths"===R[0]&&"responses"===R[3]&&"content"===R[5]&&"example"===R[7]},function(R){return"paths"===R[0]&&"responses"===R[3]&&"content"===R[5]&&"examples"===R[7]&&"value"===R[9]},function(R){return"paths"===R[0]&&"requestBody"===R[3]&&"content"===R[4]&&"example"===R[6]},function(R){return"paths"===R[0]&&"requestBody"===R[3]&&"content"===R[4]&&"examples"===R[6]&&"value"===R[8]},function(R){return"paths"===R[0]&&"parameters"===R[2]&&"example"===R[4]},function(R){return"paths"===R[0]&&"parameters"===R[3]&&"example"===R[5]},function(R){return"paths"===R[0]&&"parameters"===R[2]&&"examples"===R[4]&&"value"===R[6]},function(R){return"paths"===R[0]&&"parameters"===R[3]&&"examples"===R[5]&&"value"===R[7]},function(R){return"paths"===R[0]&&"parameters"===R[2]&&"content"===R[4]&&"example"===R[6]},function(R){return"paths"===R[0]&&"parameters"===R[2]&&"content"===R[4]&&"examples"===R[6]&&"value"===R[8]},function(R){return"paths"===R[0]&&"parameters"===R[3]&&"content"===R[4]&&"example"===R[7]},function(R){return"paths"===R[0]&&"parameters"===R[3]&&"content"===R[5]&&"examples"===R[7]&&"value"===R[9]}],yd={key:"$ref",plugin:function(P,G,Q,dt){var Nt=dt.getInstance(),Lt=cs()(Q).call(Q,0,-1);if(!Jn(Lt)&&!function(P){return rc.some(function(G){return G(P)})}(Lt)){var ae=dt.getContext(Q).baseDoc;if("string"!=typeof P)return new Ur("$ref: must be a string (JSON-Ref)",{$ref:P,baseDoc:ae,fullPath:Q});var ei,li,Ci,ue=Aa(P),Fe=ue[0],We=ue[1]||"";try{ei=ae||Fe?fr(Fe,ae):null}catch(Ei){return Cc(Ei,{pointer:We,$ref:P,basePath:ei,fullPath:Q})}if(function(R,P,G,Q){var dt,Nt,Lt=Ma.get(Q);Lt||Ma.set(Q,Lt={});var Yt=function(R){return 0===R.length?"":"/".concat(ui()(R).call(R,wc).join("/"))}(G),ae=ie()(dt="".concat(P||"<specmap-base>","#")).call(dt,R),ue=Yt.replace(/allOf\/\d+\/?/g,"");if(P===Q.contextTree.get([]).baseDoc&&ph(ue,R))return!0;var We="";if(G.some(function(li){var Ci;return We=ie()(Ci="".concat(We,"/")).call(Ci,wc(li)),Lt[We]&&Lt[We].some(function(Xt){return ph(Xt,ae)||ph(ae,Xt)})}))return!0;Lt[ue]=ie()(Nt=Lt[ue]||[]).call(Nt,ae)}(We,ei,Lt,dt)&&!Nt.useCircularStructures){var Xt=us(P,ei);return P===Xt?null:mo.replace(Q,Xt)}if(null==ei?(Ci=Gh(We),void 0===(li=dt.get(Ci))&&(li=new Ur("Could not resolve reference: ".concat(P),{pointer:We,$ref:P,baseDoc:ae,fullPath:Q}))):li=null!=(li=yl(ei,We)).__value?li.__value:li.catch(function(Ei){throw Cc(Ei,{pointer:We,$ref:P,baseDoc:ae,fullPath:Q})}),li instanceof Error)return[mo.remove(Q),li];var xi=us(P,ei),Fi=mo.replace(Lt,li,{$$ref:xi});if(ei&&ei!==ae)return[Fi,mo.context(Lt,{baseDoc:ei})];try{if(!function(R,P){var G=[R];return P.path.reduce(function(dt,Nt){return G.push(dt[Nt]),dt[Nt]},R),function Q(dt){return mo.isObject(dt)&&(G.indexOf(dt)>=0||Be()(dt).some(function(Nt){return Q(dt[Nt])}))}(P.value)}(dt.state,Fi)||Nt.useCircularStructures)return Fi}catch(Ei){return null}}}},Nu=rt()(yd,{docCache:pr,absoluteify:fr,clearCache:function(R){void 0!==R?delete pr[R]:Be()(pr).forEach(function(P){delete pr[P]})},JSONRefError:Ur,wrapError:Cc,getDoc:Pu,split:Aa,extractFromDoc:yl,fetchJSON:function(R){return fetch(R,{headers:{Accept:As},loadSpec:!0}).then(function(P){return P.text()}).then(function(P){return Mt.load(P)})},extract:Rc,jsonPointerToArray:Gh,unescapeJsonPointerToken:Ed});const bl=Nu;function fr(R,P){if(!_a.test(R)){var G;if(!P)throw new Ur(ie()(G="Tried to resolve a relative URL, without having a basePath. path: '".concat(R,"' basePath: '")).call(G,P,"'"));return At.resolve(P,R)}return R}function Cc(R,P){var G,Q;return G=R&&R.response&&R.response.body?ie()(Q="".concat(R.response.body.code," ")).call(Q,R.response.body.message):R.message,new Ur("Could not resolve reference: ".concat(G),P,R)}function Aa(R){return(R+"").split("#")}function yl(R,P){var G=pr[R];if(G&&!mo.isPromise(G))try{var Q=Rc(P,G);return rt()(vs().resolve(Q),{__value:Q})}catch(dt){return vs().reject(dt)}return Pu(R).then(function(dt){return Rc(P,dt)})}function Pu(R){var P=pr[R];return P?mo.isPromise(P)?P:vs().resolve(P):(pr[R]=Nu.fetchJSON(R).then(function(G){return pr[R]=G,G}),pr[R])}function Rc(R,P){var G=Gh(R);if(G.length<1)return P;var Q=mo.getIn(P,G);if(void 0===Q)throw new Ur("Could not resolve pointer: ".concat(R," does not exist in document"),{pointer:R});return Q}function Gh(R){var P;if("string"!=typeof R)throw new TypeError("Expected a string, got a ".concat(gt(R)));return"/"===R[0]&&(R=R.substr(1)),""===R?[]:ui()(P=R.split("/")).call(P,Ed)}function Ed(R){return"string"!=typeof R?R:new(ci())("=".concat(R.replace(/~1/g,"/").replace(/~0/g,"~"))).get("")}function wc(R){var P,G=new(ci())([["",R.replace(/~/g,"~0").replace(/\//g,"~1")]]);return cs()(P=G.toString()).call(P,1)}function ph(R,P){if(function(P){return!P||"/"===P||"#"===P}(P))return!0;var G=R.charAt(P.length),Q=cs()(P).call(P,-1);return 0===R.indexOf(P)&&(!G||"/"===G||"#"===G)&&"#"!==Q}var Td=v(85191),Cd=v.n(Td);const ac={key:"allOf",plugin:function(P,G,Q,dt,Nt){if(!Nt.meta||!Nt.meta.$$ref){var Lt=cs()(Q).call(Q,0,-1);if(!Jn(Lt)){if(!Array.isArray(P)){var Yt=new TypeError("allOf must be an array");return Yt.fullPath=Q,Yt}var ae=!1,ue=Nt.value;if(Lt.forEach(function(ei){!ue||(ue=ue[ei])}),ue=X({},ue),!Cd()(ue)){delete ue.allOf;var We,Fe=[];return Fe.push(dt.replace(Lt,{})),P.forEach(function(ei,li){if(!dt.isObject(ei)){if(ae)return null;ae=!0;var Ci=new TypeError("Elements in allOf must be objects");return Ci.fullPath=Q,Fe.push(Ci)}Fe.push(dt.mergeDeep(Lt,ei));var xi=function(R,P){var G=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},Q=G.specmap,dt=G.getBaseUrlForNodePath,Nt=void 0===dt?function(ue){var Fe;return Q.getContext(ie()(Fe=[]).call(Fe,io(P),io(ue))).baseDoc}:dt,Lt=G.targetKeys,Yt=void 0===Lt?["$ref","$$ref"]:Lt,ae=[];return dn()(R).forEach(function(){if(re()(Yt).call(Yt,this.key)&&"string"==typeof this.node){var Fe=this.path,We=ie()(P).call(P,this.path),ei=us(this.node,Nt(Fe));ae.push(Q.replace(We,ei))}}),ae}(ei,cs()(Q).call(Q,0,-1),{getBaseUrlForNodePath:function(Ei){var uo;return dt.getContext(ie()(uo=[]).call(uo,io(Q),[li],io(Ei))).baseDoc},specmap:dt});Fe.push.apply(Fe,io(xi))}),Fe.push(dt.mergeDeep(Lt,ue)),ue.$$ref||Fe.push(dt.remove(ie()(We=[]).call(We,Lt,"$$ref"))),Fe}}}}},Sd={key:"parameters",plugin:function(P,G,Q,dt){if(Array.isArray(P)&&P.length){var Nt=rt()([],P),Lt=cs()(Q).call(Q,0,-1),Yt=X({},mo.getIn(dt.spec,Lt));return P.forEach(function(ae,ue){try{Nt[ue].default=dt.parameterMacro(Yt,ae)}catch(We){var Fe=new Error(We);return Fe.fullPath=Q,Fe}}),mo.replace(Q,Nt)}return mo.replace(Q,P)}},qc={key:"properties",plugin:function(P,G,Q,dt){var Nt=X({},P);for(var Lt in P)try{Nt[Lt].default=dt.modelPropertyMacro(Nt[Lt])}catch(ue){var Yt=new Error(ue);return Yt.fullPath=Q,Yt}return mo.replace(Q,Nt)}};var tu=function(){function R(P){Rs(this,R),this.root=Dc(P||{})}return _l(R,[{key:"set",value:function(G,Q){var dt=this.getParent(G,!0);if(dt){var Nt=G[G.length-1],Lt=dt.children;Lt[Nt]?Ic(Lt[Nt],Q,dt):Lt[Nt]=Dc(Q,dt)}else Ic(this.root,Q,null)}},{key:"get",value:function(G){if((G=G||[]).length<1)return this.root.value;for(var dt,Nt,Q=this.root,Lt=0;Lt<G.length&&(dt=Q.children)[Nt=G[Lt]];Lt+=1)Q=dt[Nt];return Q&&Q.protoValue}},{key:"getParent",value:function(G,Q){return!G||G.length<1?null:G.length<2?this.root:cs()(G).call(G,0,-1).reduce(function(dt,Nt){if(!dt)return dt;var Lt=dt.children;return!Lt[Nt]&&Q&&(Lt[Nt]=Dc(null,dt)),Lt[Nt]},this.root)}}]),R}();function Dc(R,P){return Ic({children:{}},R,P)}function Ic(R,P,G){return R.value=P||{},R.protoValue=G?X(X({},G.protoValue),R.value):R.value,Be()(R.children).forEach(function(Q){var dt=R.children[Q];R.children[Q]=Ic(dt,dt.value,R)}),R}var ys=function(){},Rd=function(){function R(P){var Q,dt,G=this;Rs(this,R),rt()(this,{spec:"",debugLevel:"info",plugins:[],pluginHistory:{},errors:[],mutations:[],promisedPatches:[],state:{},patches:[],context:{},contextTree:new tu,showDebug:!1,allPatches:[],pluginProp:"specMap",libMethods:rt()(Object.create(this),mo,{getInstance:function(){return G}}),allowMetaPatches:!1},P),this.get=this._get.bind(this),this.getContext=this._getContext.bind(this),this.hasRun=this._hasRun.bind(this),this.wrappedPlugins=ge()(Q=ui()(dt=this.plugins).call(dt,this.wrapPlugin.bind(this))).call(Q,mo.isFunction),this.patches.push(mo.add([],this.spec)),this.patches.push(mo.context([],this.context)),this.updatePatches(this.patches)}return _l(R,[{key:"debug",value:function(G){if(this.debugLevel===G){for(var Q,dt=arguments.length,Nt=new Array(dt>1?dt-1:0),Lt=1;Lt<dt;Lt++)Nt[Lt-1]=arguments[Lt];(Q=console).log.apply(Q,Nt)}}},{key:"verbose",value:function(G){if("verbose"===this.debugLevel){for(var Q,dt,Nt=arguments.length,Lt=new Array(Nt>1?Nt-1:0),Yt=1;Yt<Nt;Yt++)Lt[Yt-1]=arguments[Yt];(Q=console).log.apply(Q,ie()(dt=["[".concat(G,"]   ")]).call(dt,Lt))}}},{key:"wrapPlugin",value:function(G,Q){var Lt,ae,ue,dt=this.pathDiscriminator,Nt=null;return G[this.pluginProp]?(Nt=G,Lt=G[this.pluginProp]):mo.isFunction(G)?Lt=G:mo.isObject(G)&&(ae=G,ue=function(We,ei){return!Array.isArray(We)||We.every(function(li,Ci){return li===ei[Ci]})},Lt=we().mark(function Fe(We,ei){var li,Ci,Xt,xi,Fi,Ei;return we().wrap(function(no){for(;;)switch(no.prev=no.next){case 0:Ei=function(Go,yo,Gr){var Dr,Os,tr,po,Xs,Hs,Cl,ma,Sl,hc,cu,Yu,Ul;return we().wrap(function(Wo){for(;;)switch(Wo.prev=Wo.next){case 0:if(mo.isObject(Go)){Wo.next=6;break}if(ae.key!==yo[yo.length-1]){Wo.next=4;break}return Wo.next=4,ae.plugin(Go,ae.key,yo,ei);case 4:Wo.next=30;break;case 6:Os=yo[Dr=yo.length-1],tr=yo.indexOf("properties"),po="properties"===Os&&Dr===tr,Xs=ei.allowMetaPatches&&Ci[Go.$$ref],Hs=0,Cl=Be()(Go);case 12:if(!(Hs<Cl.length)){Wo.next=30;break}if(Sl=Go[ma=Cl[Hs]],hc=ie()(yo).call(yo,ma),cu=mo.isObject(Sl),Yu=Go.$$ref,Xs){Wo.next=22;break}if(!cu){Wo.next=22;break}return ei.allowMetaPatches&&Yu&&(Ci[Yu]=!0),Wo.delegateYield(Ei(Sl,hc,Gr),"t0",22);case 22:if(po||ma!==ae.key){Wo.next=27;break}if(Ul=ue(dt,yo),dt&&!Ul){Wo.next=27;break}return Wo.next=27,ae.plugin(Sl,ma,hc,ei,Gr);case 27:Hs++,Wo.next=12;break;case 30:case"end":return Wo.stop()}},li)},li=we().mark(Ei),Ci={},Xt=Ct(ge()(We).call(We,mo.isAdditiveMutation)),no.prev=4,Xt.s();case 6:if((xi=Xt.n()).done){no.next=11;break}return no.delegateYield(Ei((Fi=xi.value).value,Fi.path,Fi),"t0",9);case 9:no.next=6;break;case 11:no.next=16;break;case 13:no.prev=13,no.t1=no.catch(4),Xt.e(no.t1);case 16:return no.prev=16,Xt.f(),no.finish(16);case 19:case"end":return no.stop()}},Fe,null,[[4,13,16,19]])})),rt()(Lt.bind(Nt),{pluginName:G.name||Q,isGenerator:mo.isGenerator(Lt)})}},{key:"nextPlugin",value:function(){var G,Q=this;return Iu()(G=this.wrappedPlugins).call(G,function(dt){return Q.getMutationsForPlugin(dt).length>0})}},{key:"nextPromisedPatch",value:function(){var G;if(this.promisedPatches.length>0)return vs().race(ui()(G=this.promisedPatches).call(G,function(Q){return Q.value}))}},{key:"getPluginHistory",value:function(G){var Q=this.constructor.getPluginName(G);return this.pluginHistory[Q]||[]}},{key:"getPluginRunCount",value:function(G){return this.getPluginHistory(G).length}},{key:"getPluginHistoryTip",value:function(G){var Q=this.getPluginHistory(G);return Q&&Q[Q.length-1]||{}}},{key:"getPluginMutationIndex",value:function(G){var Q=this.getPluginHistoryTip(G).mutationIndex;return"number"!=typeof Q?-1:Q}},{key:"updatePluginHistory",value:function(G,Q){var dt=this.constructor.getPluginName(G);this.pluginHistory[dt]=this.pluginHistory[dt]||[],this.pluginHistory[dt].push(Q)}},{key:"updatePatches",value:function(G){var Q=this;mo.normalizeArray(G).forEach(function(dt){if(dt instanceof Error)Q.errors.push(dt);else try{if(!mo.isObject(dt))return void Q.debug("updatePatches","Got a non-object patch",dt);if(Q.showDebug&&Q.allPatches.push(dt),mo.isPromise(dt.value))return Q.promisedPatches.push(dt),void Q.promisedPatchThen(dt);if(mo.isContextPatch(dt))return void Q.setContext(dt.path,dt.value);if(mo.isMutation(dt))return void Q.updateMutations(dt)}catch(Nt){console.error(Nt),Q.errors.push(Nt)}})}},{key:"updateMutations",value:function(G){"object"===gt(G.value)&&!Array.isArray(G.value)&&this.allowMetaPatches&&(G.value=X({},G.value));var Q=mo.applyPatch(this.state,G,{allowMetaPatches:this.allowMetaPatches});Q&&(this.mutations.push(G),this.state=Q)}},{key:"removePromisedPatch",value:function(G){var Q,dt=this.promisedPatches.indexOf(G);dt<0?this.debug("Tried to remove a promisedPatch that isn't there!"):ml()(Q=this.promisedPatches).call(Q,dt,1)}},{key:"promisedPatchThen",value:function(G){var Q=this;return G.value=G.value.then(function(dt){var Nt=X(X({},G),{},{value:dt});Q.removePromisedPatch(G),Q.updatePatches(Nt)}).catch(function(dt){Q.removePromisedPatch(G),Q.updatePatches(dt)}),G.value}},{key:"getMutations",value:function(G,Q){var dt;return G=G||0,"number"!=typeof Q&&(Q=this.mutations.length),cs()(dt=this.mutations).call(dt,G,Q)}},{key:"getCurrentMutations",value:function(){return this.getMutationsForPlugin(this.getCurrentPlugin())}},{key:"getMutationsForPlugin",value:function(G){var Q=this.getPluginMutationIndex(G);return this.getMutations(Q+1)}},{key:"getCurrentPlugin",value:function(){return this.currentPlugin}},{key:"getLib",value:function(){return this.libMethods}},{key:"_get",value:function(G){return mo.getIn(this.state,G)}},{key:"_getContext",value:function(G){return this.contextTree.get(G)}},{key:"setContext",value:function(G,Q){return this.contextTree.set(G,Q)}},{key:"_hasRun",value:function(G){return this.getPluginRunCount(this.getCurrentPlugin())>(G||0)}},{key:"dispatch",value:function(){var Yt,G=this,Q=this,dt=this.nextPlugin();if(!dt){var Nt=this.nextPromisedPatch();if(Nt)return Nt.then(function(){return G.dispatch()}).catch(function(){return G.dispatch()});var Lt={spec:this.state,errors:this.errors};return this.showDebug&&(Lt.patches=this.allPatches),vs().resolve(Lt)}if(Q.pluginCount=Q.pluginCount||{},Q.pluginCount[dt]=(Q.pluginCount[dt]||0)+1,Q.pluginCount[dt]>100)return vs().resolve({spec:Q.state,errors:ie()(Yt=Q.errors).call(Yt,new Error("We've reached a hard limit of ".concat(100," plugin runs")))});if(dt!==this.currentPlugin&&this.promisedPatches.length){var ae,ue=ui()(ae=this.promisedPatches).call(ae,function(ei){return ei.value});return vs().all(ui()(ue).call(ue,function(ei){return ei.then(ys,ys)})).then(function(){return G.dispatch()})}return function(){Q.currentPlugin=dt;var ei=Q.getCurrentMutations(),li=Q.mutations.length-1;try{if(dt.isGenerator){var Xt,Ci=Ct(dt(ei,Q.getLib()));try{for(Ci.s();!(Xt=Ci.n()).done;)We(Xt.value)}catch(Ei){Ci.e(Ei)}finally{Ci.f()}}else We(dt(ei,Q.getLib()))}catch(Ei){console.error(Ei),We([rt()(Object.create(Ei),{plugin:dt})])}finally{Q.updatePluginHistory(dt,{mutationIndex:li})}return Q.dispatch()}();function We(ei){ei&&(ei=mo.fullyNormalizeArray(ei),Q.updatePatches(ei,dt))}}}],[{key:"getPluginName",value:function(G){return G.pluginName}},{key:"getPatchesOfType",value:function(G,Q){return ge()(G).call(G,Q)}}]),R}(),Oa={refs:bl,allOf:ac,parameters:Sd,properties:qc},fh=v(4471),gh=v.n(fh),_h=function(P){return String.prototype.toLowerCase.call(P)},Hu=function(P){return P.replace(/[^\w]/gi,"_")};function mh(R){var P=R.openapi;return!!P&&wt()(P).call(P,"3")}function jh(R,P){var G=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",Q=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},dt=Q.v2OperationIdCompatibilityMode;if(!R||"object"!==gt(R))return null;var Nt=(R.operationId||"").replace(/\s/g,"");return Nt.length?Hu(R.operationId):fp(P,G,{v2OperationIdCompatibilityMode:dt})}function fp(R,P){var G,Q=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},dt=Q.v2OperationIdCompatibilityMode;if(dt){var Nt,Lt,Yt=ie()(Nt="".concat(P.toLowerCase(),"_")).call(Nt,R).replace(/[\s!@#$%^&*()_+=[{\]};:<>|./?,\\'""-]/g,"_");return(Yt=Yt||ie()(Lt="".concat(R.substring(1),"_")).call(Lt,P)).replace(/((_){2,})/g,"_").replace(/^(_)*/g,"").replace(/([_])*$/g,"")}return ie()(G="".concat(_h(P))).call(G,Hu(R))}function Mc(R,P){var G;return ie()(G="".concat(_h(P),"-")).call(G,R)}function vh(R,P,G){if(!R||"object"!==gt(R)||!R.paths||"object"!==gt(R.paths))return null;var Q=R.paths;for(var dt in Q)for(var Nt in Q[dt])if("PARAMETERS"!==Nt.toUpperCase()){var Lt=Q[dt][Nt];if(Lt&&"object"===gt(Lt)){var Yt={spec:R,pathName:dt,method:Nt.toUpperCase(),operation:Lt},ae=P(Yt);if(G&&ae)return Yt}}}function Ac(R){var P=R.spec,G=P.paths,Q={};if(!G||P.$$normalized)return R;for(var dt in G){var Nt=G[dt];if(gh()(Nt)){var Lt=Nt.parameters,Yt=function(We){var ei=Nt[We];if(!gh()(ei))return"continue";var li=jh(ei,dt,We);if(li){Q[li]?Q[li].push(ei):Q[li]=[ei];var Ci=Q[li];if(Ci.length>1)Ci.forEach(function(Os,tr){var po;Os.__originalOperationId=Os.__originalOperationId||Os.operationId,Os.operationId=ie()(po="".concat(li)).call(po,tr+1)});else if(void 0!==ei.operationId){var Xt=Ci[0];Xt.__originalOperationId=Xt.__originalOperationId||ei.operationId,Xt.operationId=li}}if("parameters"!==We){var xi=[],Fi={};for(var Ei in P)("produces"===Ei||"consumes"===Ei||"security"===Ei)&&(Fi[Ei]=P[Ei],xi.push(Fi));if(Lt&&(Fi.parameters=Lt,xi.push(Fi)),xi.length){var no,uo=Ct(xi);try{for(uo.s();!(no=uo.n()).done;){var Jo=no.value;for(var Go in Jo)if(ei[Go]){if("parameters"===Go){var Gr,yo=Ct(Jo[Go]);try{var Dr=function(){var tr=Gr.value;ei[Go].some(function(Xs){return Xs.name&&Xs.name===tr.name||Xs.$ref&&Xs.$ref===tr.$ref||Xs.$$ref&&Xs.$$ref===tr.$$ref||Xs===tr})||ei[Go].push(tr)};for(yo.s();!(Gr=yo.n()).done;)Dr()}catch(Os){yo.e(Os)}finally{yo.f()}}}else ei[Go]=Jo[Go]}}catch(Os){uo.e(Os)}finally{uo.f()}}}};for(var ae in Nt)Yt(ae)}}return P.$$normalized=!0,R}function Rr(R){var P=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},G=P.requestInterceptor,Q=P.responseInterceptor,dt=R.withCredentials?"include":"same-origin";return function(Nt){return R({url:Nt,loadSpec:!0,requestInterceptor:G,responseInterceptor:Q,headers:{Accept:As},credentials:dt}).then(function(Lt){return Lt.body})}}function Vu(R){var G=R.spec,dt=R.mode,Nt=R.allowMetaPatches,Lt=void 0===Nt||Nt,Yt=R.pathDiscriminator,ae=R.modelPropertyMacro,ue=R.parameterMacro,Fe=R.requestInterceptor,We=R.responseInterceptor,ei=R.skipNormalization,li=R.useCircularStructures,Ci=R.http,Xt=R.baseDoc;return Xt=Xt||R.url,Ci=R.fetch||Ci||vc,G?xi(G):Rr(Ci,{requestInterceptor:Fe,responseInterceptor:We})(Xt).then(xi);function xi(Fi){Xt&&(Oa.refs.docCache[Xt]=Fi),Oa.refs.fetchJSON=Rr(Ci,{requestInterceptor:Fe,responseInterceptor:We});var Ei=[Oa.refs];return"function"==typeof ue&&Ei.push(Oa.parameters),"function"==typeof ae&&Ei.push(Oa.properties),"strict"!==dt&&Ei.push(Oa.allOf),function(R){return new Rd(R).dispatch()}({spec:Fi,context:{baseDoc:Xt},plugins:Ei,allowMetaPatches:Lt,pathDiscriminator:Yt,parameterMacro:ue,modelPropertyMacro:ae,useCircularStructures:li}).then(ei?function(){var uo=Ce(we().mark(function no(Jo){return we().wrap(function(yo){for(;;)switch(yo.prev=yo.next){case 0:return yo.abrupt("return",Jo);case 1:case"end":return yo.stop()}},no)}));return function(no){return uo.apply(this,arguments)}}():Ac)}}var wd=v(17410),lc=v.n(wd);function nu(){return(nu=Ce(we().mark(function R(P,G){var Q,dt,We,ei,li,Ci,Xt=arguments;return we().wrap(function(Fi){for(;;)switch(Fi.prev=Fi.next){case 0:return dt=(Q=Xt.length>2&&void 0!==Xt[2]?Xt[2]:{}).returnEntireTree,We={pathDiscriminator:G,baseDoc:Q.baseDoc,requestInterceptor:Q.requestInterceptor,responseInterceptor:Q.responseInterceptor,parameterMacro:Q.parameterMacro,modelPropertyMacro:Q.modelPropertyMacro,useCircularStructures:Q.useCircularStructures},ei=Ac({spec:P}),li=ei.spec,Fi.next=6,Vu(X(X({},We),{},{spec:li,allowMetaPatches:!0,skipNormalization:!0}));case 6:return Ci=Fi.sent,!dt&&Array.isArray(G)&&G.length&&(Ci.spec=lc()(Ci.spec,G)||null),Fi.abrupt("return",Ci);case 9:case"end":return Fi.stop()}},R)}))).apply(this,arguments)}var ou=function(){return null},sl_mapTagOperations=function(R){var P=R.spec,G=R.cb,Q=void 0===G?ou:G,dt=R.defaultTag,Nt=void 0===dt?"default":dt,Lt=R.v2OperationIdCompatibilityMode,Yt={},ae={};return vh(P,function(ue){var Fe=ue.pathName,We=ue.method,ei=ue.operation;(ei.tags?function(P){return Array.isArray(P)?P:[P]}(ei.tags):[Nt]).forEach(function(Ci){if("string"==typeof Ci){ae[Ci]=ae[Ci]||{};var Ei,Xt=ae[Ci],xi=jh(ei,Fe,We,{v2OperationIdCompatibilityMode:Lt}),Fi=Q({spec:P,pathName:Fe,method:We,operation:ei,operationId:xi});if(Yt[xi])Yt[xi]+=1,Xt[ie()(Ei="".concat(xi)).call(Ei,Yt[xi])]=Fi;else if(void 0!==Xt[xi]){var uo,no,Jo=Yt[xi]||1;Yt[xi]=Jo+1,Xt[ie()(uo="".concat(xi)).call(uo,Yt[xi])]=Fi;var Go=Xt[xi];delete Xt[xi],Xt[ie()(no="".concat(xi)).call(no,Jo)]=Go}else Xt[xi]=Fi}})}),ae},sl_makeExecute=function(){var R=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(P){var G=P.pathName,Q=P.method,dt=P.operationId;return function(Nt){var Lt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},Yt=R.requestInterceptor,ae=R.responseInterceptor,ue=R.userFetch;return R.execute(X({spec:R.spec,requestInterceptor:Yt,responseInterceptor:ae,userFetch:ue,pathName:G,method:Q,parameters:Nt,operationId:dt},Lt))}}},Oc=v(93165);var gp=v(64994),Xh=v.n(gp),yh=v(66571);const Ad={body:function(R){R.req.body=R.value},header:function(R){var P=R.req,G=R.parameter,Q=R.value;P.headers=P.headers||{},void 0!==Q&&(P.headers[G.name]=Q)},query:function(R){var P=R.req,G=R.value,Q=R.parameter;if(P.query=P.query||{},!1===G&&"boolean"===Q.type&&(G="false"),0===G&&["number","integer"].indexOf(Q.type)>-1&&(G="0"),G)P.query[Q.name]={collectionFormat:Q.collectionFormat,value:G};else if(Q.allowEmptyValue&&void 0!==G){var dt=Q.name;P.query[dt]=P.query[dt]||{},P.query[dt].allowEmptyValue=!0}},path:function(R){var P=R.req,G=R.value;P.url=P.url.split("{".concat(R.parameter.name,"}")).join(encodeURIComponent(G))},formData:function(R){var P=R.req,G=R.value,Q=R.parameter;(G||Q.allowEmptyValue)&&(P.form=P.form||{},P.form[Q.name]={value:G,allowEmptyValue:Q.allowEmptyValue,collectionFormat:Q.collectionFormat})}};function Gu(R,P){return re()(P).call(P,"application/json")?"string"==typeof R?R:Ji()(R):R.toString()}function xd(R){var P=R.req,G=R.value,Q=R.parameter,dt=Q.name,Nt=Q.style,Lt=Q.explode,Yt=Q.content;if(Yt){var ae=Be()(Yt)[0];P.url=P.url.split("{".concat(dt,"}")).join(Bs(Gu(G,ae),{escape:!0}))}else{var ue=Zo({key:Q.name,value:G,style:Nt||"simple",explode:Lt||!1,escape:!0});P.url=P.url.split("{".concat(dt,"}")).join(ue)}}function Wu(R){var P=R.req,G=R.value,Q=R.parameter;if(P.query=P.query||{},Q.content){var dt=Be()(Q.content)[0];P.query[Q.name]=Gu(G,dt)}else if(!1===G&&(G="false"),0===G&&(G="0"),G)P.query[Q.name]={value:G,serializationOption:{style:Q.style,explode:Q.explode,allowReserved:Q.allowReserved}};else if(Q.allowEmptyValue&&void 0!==G){var ae=Q.name;P.query[ae]=P.query[ae]||{},P.query[ae].allowEmptyValue=!0}}var xa=["accept","authorization","content-type"];function $h(R){var P=R.req,G=R.parameter,Q=R.value;if(P.headers=P.headers||{},!(xa.indexOf(G.name.toLowerCase())>-1)){if(G.content){var dt=Be()(G.content)[0];return void(P.headers[G.name]=Gu(Q,dt))}void 0!==Q&&(P.headers[G.name]=Zo({key:G.name,value:Q,style:G.style||"simple",explode:void 0!==G.explode&&G.explode,escape:!1}))}}function zu(R){var P=R.req,G=R.parameter,Q=R.value;P.headers=P.headers||{};var dt=gt(Q);if(G.content){var Nt,Lt=Be()(G.content)[0];P.headers.Cookie=ie()(Nt="".concat(G.name,"=")).call(Nt,Gu(Q,Lt))}else if("undefined"!==dt){var Yt="object"===dt&&!Array.isArray(Q)&&G.explode?"":"".concat(G.name,"=");P.headers.Cookie=Yt+Zo({key:G.name,value:Q,escape:!1,style:G.style||"form",explode:void 0!==G.explode&&G.explode})}}var kd=v(56675),ru=v.n(kd);var uc=["http","fetch","spec","operationId","pathName","method","parameters","securities"],ea=function(P){return Array.isArray(P)?P:[]},rl=gi("OperationNotFoundError",function(P,G,Q){this.originalError=Q,rt()(this,G||{})}),au={buildRequest:ja};function ja(R){var P,G,Q=R.spec,dt=R.operationId,Nt=R.responseContentType,Lt=R.scheme,Yt=R.requestInterceptor,ae=R.responseInterceptor,ue=R.contextUrl,Fe=R.userFetch,We=R.server,ei=R.serverVariables,li=R.http,Ci=R.parameters,Xt=R.parameterBuilders,xi=mh(Q);Xt||(Xt=xi?e:Ad);var Ei={url:"",credentials:li&&li.withCredentials?"include":"same-origin",headers:{},cookies:{}};Yt&&(Ei.requestInterceptor=Yt),ae&&(Ei.responseInterceptor=ae),Fe&&(Ei.userFetch=Fe);var uo=function(R,P){return R&&R.paths?function(R,P){return vh(R,P,!0)||null}(R,function(G){var Q=G.pathName,dt=G.method,Nt=G.operation;if(!Nt||"object"!==gt(Nt))return!1;var Lt=Nt.operationId;return[jh(Nt,Q,dt),Mc(Q,dt),Lt].some(function(ue){return ue&&ue===P})}):null}(Q,dt);if(!uo)throw new rl("Operation ".concat(dt," not found"));var no=uo.operation,Jo=void 0===no?{}:no,Go=uo.method,yo=uo.pathName;if(Ei.url+=ju({spec:Q,scheme:Lt,contextUrl:ue,server:We,serverVariables:ei,pathName:yo,method:Go}),!dt)return delete Ei.cookies,Ei;Ei.url+=yo,Ei.method="".concat(Go).toUpperCase(),Ci=Ci||{};var Gr=Q.paths[yo]||{};Nt&&(Ei.headers.accept=Nt);var Dr=function(P){var G={};P.forEach(function(dt){G[dt.in]||(G[dt.in]={}),G[dt.in][dt.name]=dt});var Q=[];return Be()(G).forEach(function(dt){Be()(G[dt]).forEach(function(Nt){Q.push(G[dt][Nt])})}),Q}(ie()(P=ie()(G=[]).call(G,ea(Jo.parameters))).call(P,ea(Gr.parameters)));Dr.forEach(function(po){var Hs,Cl,Xs=Xt[po.in];if("body"===po.in&&po.schema&&po.schema.properties&&(Hs=Ci),void 0===(Hs=po&&po.name&&Ci[po.name]))Hs=po&&po.name&&Ci[ie()(Cl="".concat(po.in,".")).call(Cl,po.name)];else if(function(P,G){return ge()(G).call(G,function(Q){return Q.name===P})}(po.name,Dr).length>1){var ma;console.warn(ie()(ma="Parameter '".concat(po.name,"' is ambiguous because the defined spec has more than one parameter with the name: '")).call(ma,po.name,"' and the passed-in parameter values did not define an 'in' value."))}if(null!==Hs){if(void 0!==po.default&&void 0===Hs&&(Hs=po.default),void 0===Hs&&po.required&&!po.allowEmptyValue)throw new Error("Required parameter ".concat(po.name," is not provided"));if(xi&&po.schema&&"object"===po.schema.type&&"string"==typeof Hs)try{Hs=JSON.parse(Hs)}catch(Sl){throw new Error("Could not parse object parameter value string as JSON")}Xs&&Xs({req:Ei,parameter:po,value:Hs,operation:Jo,spec:Q})}});var Os=X(X({},R),{},{operation:Jo});if((Ei=xi?function(R,P){var G=R.operation,Q=R.requestBody,Lt=R.attachContentTypeForEmptyPayload,Yt=R.requestContentType;P=function(R){var P=R.request,G=R.securities,Q=void 0===G?{}:G,dt=R.operation,Nt=void 0===dt?{}:dt,Lt=R.spec,Yt=X({},P),ae=Q.authorized,ue=void 0===ae?{}:ae,Fe=Nt.security||Lt.security||[],We=ue&&!!Be()(ue).length,ei=lc()(Lt,["components","securitySchemes"])||{};return Yt.headers=Yt.headers||{},Yt.query=Yt.query||{},Be()(Q).length&&We&&Fe&&(!Array.isArray(Nt.security)||Nt.security.length)?(Fe.forEach(function(li){Be()(li).forEach(function(Ci){var Xt=ue[Ci],xi=ei[Ci];if(Xt){var Fi=Xt.value||Xt,Ei=xi.type;if(Xt)if("apiKey"===Ei)"query"===xi.in&&(Yt.query[xi.name]=Fi),"header"===xi.in&&(Yt.headers[xi.name]=Fi),"cookie"===xi.in&&(Yt.cookies[xi.name]=Fi);else if("http"===Ei){if(/^basic$/i.test(xi.scheme)){var uo,no=Fi.username||"",Jo=Fi.password||"",Go=ru()(ie()(uo="".concat(no,":")).call(uo,Jo));Yt.headers.Authorization="Basic ".concat(Go)}/^bearer$/i.test(xi.scheme)&&(Yt.headers.Authorization="Bearer ".concat(Fi))}else if("oauth2"===Ei||"openIdConnect"===Ei){var yo,Gr=Xt.token||{},Os=Gr[xi["x-tokenName"]||"access_token"],tr=Gr.token_type;(!tr||"bearer"===tr.toLowerCase())&&(tr="Bearer"),Yt.headers.Authorization=ie()(yo="".concat(tr," ")).call(yo,Os)}}})}),Yt):P}({request:P,securities:R.securities,operation:G,spec:R.spec});var ae=G.requestBody||{},ue=Be()(ae.content||{}),Fe=Yt&&ue.indexOf(Yt)>-1;if(Q||Lt){if(Yt&&Fe)P.headers["Content-Type"]=Yt;else if(!Yt){var We=ue[0];We&&(P.headers["Content-Type"]=We,Yt=We)}}else Yt&&Fe&&(P.headers["Content-Type"]=Yt);if(!R.responseContentType&&G.responses){var ei,li=ge()(ei=fe()(G.responses)).call(ei,function(Xt){var xi=oe(Xt,2),Ei=xi[1],uo=parseInt(xi[0],10);return uo>=200&&uo<300&&Xh()(Ei.content)}).reduce(function(Xt,xi){var Ei=oe(xi,2)[1];return ie()(Xt).call(Xt,Be()(Ei.content))},[]);li.length>0&&(P.headers.accept=li.join(", "))}if(Q)if(Yt){if(ue.indexOf(Yt)>-1)if("application/x-www-form-urlencoded"===Yt||"multipart/form-data"===Yt)if("object"===gt(Q)){var Ci=(ae.content[Yt]||{}).encoding||{};P.form={},Be()(Q).forEach(function(Xt){P.form[Xt]={value:Q[Xt],encoding:Ci[Xt]||{}}})}else P.form=Q;else P.body=Q}else P.body=Q;return P}(Os,Ei):function(R,P){var ae,ue,G=R.spec,Q=R.operation,Nt=R.requestContentType,Lt=R.responseContentType,Yt=R.attachContentTypeForEmptyPayload;if((P=function(R){var P=R.request,G=R.securities,Q=void 0===G?{}:G,dt=R.operation,Nt=void 0===dt?{}:dt,Lt=R.spec,Yt=X({},P),ae=Q.authorized,ue=void 0===ae?{}:ae,Fe=Q.specSecurity,ei=Nt.security||(void 0===Fe?[]:Fe),li=ue&&!!Be()(ue).length,Ci=Lt.securityDefinitions;return Yt.headers=Yt.headers||{},Yt.query=Yt.query||{},Be()(Q).length&&li&&ei&&(!Array.isArray(Nt.security)||Nt.security.length)?(ei.forEach(function(Xt){Be()(Xt).forEach(function(xi){var Fi=ue[xi];if(Fi){var Ei=Fi.token,uo=Fi.value||Fi,no=Ci[xi],Jo=no.type,yo=Ei&&Ei[no["x-tokenName"]||"access_token"],Gr=Ei&&Ei.token_type;if(Fi)if("apiKey"===Jo){var Dr="query"===no.in?"query":"headers";Yt[Dr]=Yt[Dr]||{},Yt[Dr][no.name]=uo}else if("basic"===Jo)if(uo.header)Yt.headers.authorization=uo.header;else{var Os,tr=uo.username||"",po=uo.password||"";uo.base64=ru()(ie()(Os="".concat(tr,":")).call(Os,po)),Yt.headers.authorization="Basic ".concat(uo.base64)}else if("oauth2"===Jo&&yo){var Xs;Gr=Gr&&"bearer"!==Gr.toLowerCase()?Gr:"Bearer",Yt.headers.authorization=ie()(Xs="".concat(Gr," ")).call(Xs,yo)}}})}),Yt):P}({request:P,securities:R.securities,operation:Q,spec:G})).body||P.form||Yt)if(Nt)P.headers["Content-Type"]=Nt;else if(Array.isArray(Q.consumes)){var Fe=oe(Q.consumes,1);P.headers["Content-Type"]=Fe[0]}else if(Array.isArray(G.consumes)){var We=oe(G.consumes,1);P.headers["Content-Type"]=We[0]}else Q.parameters&&ge()(ae=Q.parameters).call(ae,function(xi){return"file"===xi.type}).length?P.headers["Content-Type"]="multipart/form-data":Q.parameters&&ge()(ue=Q.parameters).call(ue,function(xi){return"formData"===xi.in}).length&&(P.headers["Content-Type"]="application/x-www-form-urlencoded");else if(Nt){var ei,li,Ci=Q.parameters&&ge()(ei=Q.parameters).call(ei,function(xi){return"body"===xi.in}).length>0,Xt=Q.parameters&&ge()(li=Q.parameters).call(li,function(xi){return"formData"===xi.in}).length>0;(Ci||Xt)&&(P.headers["Content-Type"]=Nt)}return!Lt&&Array.isArray(Q.produces)&&Q.produces.length>0&&(P.headers.accept=Q.produces.join(", ")),P}(Os,Ei)).cookies&&Be()(Ei.cookies).length){var tr=Be()(Ei.cookies).reduce(function(po,Xs){return po+(po?"&":"")+yh.serialize(Xs,Ei.cookies[Xs])},"");Ei.headers.Cookie=tr}return Ei.cookies&&delete Ei.cookies,Xr(Ei),Ei}var lu=function(P){return P?P.replace(/\W/g,""):null};function ju(R){return mh(R.spec)?function(R){var P=R.spec,G=R.pathName,Q=R.method,dt=R.server,Nt=R.contextUrl,Lt=R.serverVariables,Yt=void 0===Lt?{}:Lt,ae=lc()(P,["paths",G,(Q||"").toLowerCase(),"servers"])||lc()(P,["paths",G,"servers"])||lc()(P,["servers"]),ue="",Fe=null;if(dt&&ae&&ae.length){var We=ui()(ae).call(ae,function(Ci){return Ci.url});We.indexOf(dt)>-1&&(ue=dt,Fe=ae[We.indexOf(dt)])}if(!ue&&ae&&ae.length){ue=ae[0].url;var ei=oe(ae,1);Fe=ei[0]}return ue.indexOf("{")>-1&&function(R){for(var Q,P=[],G=/{([^}]+)}/g;Q=G.exec(R);)P.push(Q[1]);return P}(ue).forEach(function(Ci){if(Fe.variables&&Fe.variables[Ci]){var xi=Yt[Ci]||Fe.variables[Ci].default,Fi=new RegExp("{".concat(Ci,"}"),"g");ue=ue.replace(Fi,xi)}}),function(){var Yt,ae,R=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",P=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",G=At.parse(R&&P?At.resolve(P,R):R),Q=At.parse(P),dt=lu(G.protocol)||lu(Q.protocol)||"",Nt=G.host||Q.host,Lt=G.pathname||"";return"/"===(Yt=dt&&Nt?ie()(ae="".concat(dt,"://")).call(ae,Nt+Lt):Lt)[Yt.length-1]?cs()(Yt).call(Yt,0,-1):Yt}(ue,Nt)}(R):function(R){var Fe,We,P=R.spec,G=R.scheme,Q=R.contextUrl,Nt=At.parse(void 0===Q?"":Q),Lt=Array.isArray(P.schemes)?P.schemes[0]:null,Yt=G||Lt||lu(Nt.protocol)||"http",ae=P.host||Nt.host||"",ue=P.basePath||"";return"/"===(Fe=Yt&&ae?ie()(We="".concat(Yt,"://")).call(We,ae+ue):ue)[Fe.length-1]?cs()(Fe).call(Fe,0,-1):Fe}(R)}function qo(R){var P=this,G=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof R?G.url=R:G=R,!(this instanceof qo))return new qo(G);rt()(this,G);var Q=this.resolve().then(function(){return P.disableInterfaces||rt()(P,qo.makeApisTagOperation(P)),P});return Q.client=this,Q}qo.makeHttp=function(R,P,G){return G=G||function(Q){return Q},P=P||function(Q){return Q},function(Q){return"string"==typeof Q&&(Q={url:Q}),Ru.mergeInQueryOrForm(Q),Q=P(Q),G(R(Q))}}.bind(null,qo.http=vc),qo.resolve=Vu,qo.resolveSubtree=function(R,P){return nu.apply(this,arguments)},qo.execute=function(R){var P=R.http,G=R.fetch,Q=R.spec,dt=R.operationId,Nt=R.pathName,Lt=R.method,Yt=R.parameters,ae=R.securities,ue=function(R,P){if(null==R)return{};var Q,dt,G=function(R,P){if(null==R)return{};var dt,Nt,G={},Q=t(R);for(Nt=0;Nt<Q.length;Nt++)dt=Q[Nt],!(Oc(P).call(P,dt)>=0)&&(G[dt]=R[dt]);return G}(R,P);if(n){var Nt=n(R);for(dt=0;dt<Nt.length;dt++)Q=Nt[dt],!(Oc(P).call(P,Q)>=0)&&(!Object.prototype.propertyIsEnumerable.call(R,Q)||(G[Q]=R[Q]))}return G}(R,uc),Fe=P||G||vc;Nt&&Lt&&!dt&&(dt=Mc(Nt,Lt));var We=au.buildRequest(X({spec:Q,operationId:dt,parameters:Yt,securities:ae,http:Fe},ue));return We.body&&(Xh()(We.body)||Array.isArray(We.body))&&(We.body=Ji()(We.body)),Fe(We)},qo.serializeRes=Gc,qo.serializeHeaders=$l,qo.clearCache=function(){Oa.refs.clearCache()},qo.makeApisTagOperation=function(){var R=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},P=sl_makeExecute(R);return{apis:sl_mapTagOperations({v2OperationIdCompatibilityMode:R.v2OperationIdCompatibilityMode,spec:R.spec,cb:P})}},qo.buildRequest=ja,qo.helpers={opId:jh},qo.getBaseUrl=ju,(qo.prototype={http:vc,execute:function(P){return this.applyDefaults(),qo.execute(X({spec:this.spec,http:this.http,securities:{authorized:this.authorizations},contextUrl:"string"==typeof this.url?this.url:void 0,requestInterceptor:this.requestInterceptor||null,responseInterceptor:this.responseInterceptor||null},P))},resolve:function(){var P=this,G=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return qo.resolve(X({spec:this.spec,url:this.url,http:this.http||this.fetch,allowMetaPatches:this.allowMetaPatches,useCircularStructures:this.useCircularStructures,requestInterceptor:this.requestInterceptor||null,responseInterceptor:this.responseInterceptor||null,skipNormalization:this.skipNormalization||!1},G)).then(function(Q){return P.originalSpec=P.spec,P.spec=Q.spec,P.errors=Q.errors,P})}}).applyDefaults=function(){var P=this.spec,G=this.url;if(G&&wt()(G).call(G,"http")){var Q=At.parse(G);P.host||(P.host=Q.host),P.schemes||(P.schemes=[Q.protocol.replace(":","")]),P.basePath||(P.basePath="/")}};var xc=qo.helpers;const wr=qo},11085:B=>{"use strict";var U=String.prototype.replace,v=/%20/g;B.exports={default:"RFC3986",formatters:{RFC1738:function(a){return U.call(a,v,"+")},RFC3986:function(a){return String(a)}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},96912:(B,U,v)=>{"use strict";var T=v(96156),a=v(28895),e=v(11085);B.exports={formats:e,parse:a,stringify:T}},28895:(B,U,v)=>{"use strict";var T=v(45811),a=Object.prototype.hasOwnProperty,e=Array.isArray,t={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:T.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},o=function(Y,X){return Y&&"string"==typeof Y&&X.comma&&Y.indexOf(",")>-1?Y.split(","):Y},x=function(X,it,rt,ct){if(X){var wt=rt.allowDots?X.replace(/\.([^.[]+)/g,"[$1]"):X,Rt=/(\[[^[\]]*])/g,Dt=rt.depth>0&&/(\[[^[\]]*])/.exec(wt),pt=Dt?wt.slice(0,Dt.index):wt,st=[];if(pt){if(!rt.plainObjects&&a.call(Object.prototype,pt)&&!rt.allowPrototypes)return;st.push(pt)}for(var ot=0;rt.depth>0&&null!==(Dt=Rt.exec(wt))&&ot<rt.depth;){if(ot+=1,!rt.plainObjects&&a.call(Object.prototype,Dt[1].slice(1,-1))&&!rt.allowPrototypes)return;st.push(Dt[1])}return Dt&&st.push("["+wt.slice(Dt.index)+"]"),function(Y,X,it,rt){for(var ct=rt?X:o(X,it),wt=Y.length-1;wt>=0;--wt){var At,Rt=Y[wt];if("[]"===Rt&&it.parseArrays)At=[].concat(ct);else{At=it.plainObjects?Object.create(null):{};var Dt="["===Rt.charAt(0)&&"]"===Rt.charAt(Rt.length-1)?Rt.slice(1,-1):Rt,pt=parseInt(Dt,10);it.parseArrays||""!==Dt?!isNaN(pt)&&Rt!==Dt&&String(pt)===Dt&&pt>=0&&it.parseArrays&&pt<=it.arrayLimit?(At=[])[pt]=ct:At[Dt]=ct:At={0:ct}}ct=At}return ct}(st,it,rt,ct)}};B.exports=function(Y,X){var it=function(X){if(!X)return t;if(null!=X.decoder&&"function"!=typeof X.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==X.charset&&"utf-8"!==X.charset&&"iso-8859-1"!==X.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");return{allowDots:void 0===X.allowDots?t.allowDots:!!X.allowDots,allowPrototypes:"boolean"==typeof X.allowPrototypes?X.allowPrototypes:t.allowPrototypes,allowSparse:"boolean"==typeof X.allowSparse?X.allowSparse:t.allowSparse,arrayLimit:"number"==typeof X.arrayLimit?X.arrayLimit:t.arrayLimit,charset:void 0===X.charset?t.charset:X.charset,charsetSentinel:"boolean"==typeof X.charsetSentinel?X.charsetSentinel:t.charsetSentinel,comma:"boolean"==typeof X.comma?X.comma:t.comma,decoder:"function"==typeof X.decoder?X.decoder:t.decoder,delimiter:"string"==typeof X.delimiter||T.isRegExp(X.delimiter)?X.delimiter:t.delimiter,depth:"number"==typeof X.depth||!1===X.depth?+X.depth:t.depth,ignoreQueryPrefix:!0===X.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof X.interpretNumericEntities?X.interpretNumericEntities:t.interpretNumericEntities,parameterLimit:"number"==typeof X.parameterLimit?X.parameterLimit:t.parameterLimit,parseArrays:!1!==X.parseArrays,plainObjects:"boolean"==typeof X.plainObjects?X.plainObjects:t.plainObjects,strictNullHandling:"boolean"==typeof X.strictNullHandling?X.strictNullHandling:t.strictNullHandling}}(X);if(""===Y||null==Y)return it.plainObjects?Object.create(null):{};for(var rt="string"==typeof Y?function(X,it){var Dt,rt={},At=(it.ignoreQueryPrefix?X.replace(/^\?/,""):X).split(it.delimiter,it.parameterLimit===1/0?void 0:it.parameterLimit),Rt=-1,pt=it.charset;if(it.charsetSentinel)for(Dt=0;Dt<At.length;++Dt)0===At[Dt].indexOf("utf8=")&&("utf8=%E2%9C%93"===At[Dt]?pt="utf-8":"utf8=%26%2310003%3B"===At[Dt]&&(pt="iso-8859-1"),Rt=Dt,Dt=At.length);for(Dt=0;Dt<At.length;++Dt)if(Dt!==Rt){var Tt,Ct,st=At[Dt],ot=st.indexOf("]="),nt=-1===ot?st.indexOf("="):ot+1;-1===nt?(Tt=it.decoder(st,t.decoder,pt,"key"),Ct=it.strictNullHandling?null:""):(Tt=it.decoder(st.slice(0,nt),t.decoder,pt,"key"),Ct=T.maybeMap(o(st.slice(nt+1),it),function(yt){return it.decoder(yt,t.decoder,pt,"value")})),Ct&&it.interpretNumericEntities&&"iso-8859-1"===pt&&(Ct=Ct.replace(/&#(\d+);/g,function(X,it){return String.fromCharCode(parseInt(it,10))})),st.indexOf("[]=")>-1&&(Ct=e(Ct)?[Ct]:Ct),rt[Tt]=a.call(rt,Tt)?T.combine(rt[Tt],Ct):Ct}return rt}(Y,it):Y,ct=it.plainObjects?Object.create(null):{},wt=Object.keys(rt),At=0;At<wt.length;++At){var Rt=wt[At],Dt=x(Rt,rt[Rt],it,"string"==typeof Y);ct=T.merge(ct,Dt,it)}return!0===it.allowSparse?ct:T.compact(ct)}},96156:(B,U,v)=>{"use strict";var T=v(73340),a=v(45811),e=v(11085),t=Object.prototype.hasOwnProperty,n={brackets:function(rt){return rt+"[]"},comma:"comma",indices:function(rt,ct){return rt+"["+ct+"]"},repeat:function(rt){return rt}},o=Array.isArray,r=Array.prototype.push,p=function(it,rt){r.apply(it,o(rt)?rt:[rt])},b=Date.prototype.toISOString,I=e.default,x={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:a.encode,encodeValuesOnly:!1,format:I,formatter:e.formatters[I],indices:!1,serializeDate:function(rt){return b.call(rt)},skipNulls:!1,strictNullHandling:!1},Y=function it(rt,ct,wt,At,Rt,Dt,pt,st,ot,nt,Tt,Ct,yt,gt,_t){var Jt=rt;if(_t.has(rt))throw new RangeError("Cyclic object value");if("function"==typeof pt?Jt=pt(ct,Jt):Jt instanceof Date?Jt=nt(Jt):"comma"===wt&&o(Jt)&&(Jt=a.maybeMap(Jt,function(ce){return ce instanceof Date?nt(ce):ce})),null===Jt){if(At)return Dt&&!yt?Dt(ct,x.encoder,gt,"key",Tt):ct;Jt=""}if(function(rt){return"string"==typeof rt||"number"==typeof rt||"boolean"==typeof rt||"symbol"==typeof rt||"bigint"==typeof rt}(Jt)||a.isBuffer(Jt))return Dt?[Ct(yt?ct:Dt(ct,x.encoder,gt,"key",Tt))+"="+Ct(Dt(Jt,x.encoder,gt,"value",Tt))]:[Ct(ct)+"="+Ct(String(Jt))];var Ne,oe=[];if(void 0===Jt)return oe;if("comma"===wt&&o(Jt))Ne=[{value:Jt.length>0?Jt.join(",")||null:void 0}];else if(o(pt))Ne=pt;else{var Xe=Object.keys(Jt);Ne=st?Xe.sort(st):Xe}for(var Ce=0;Ce<Ne.length;++Ce){var Ze=Ne[Ce],we="object"==typeof Ze&&void 0!==Ze.value?Ze.value:Jt[Ze];if(!Rt||null!==we){var ai=o(Jt)?"function"==typeof wt?wt(ct,Ze):ct:ct+(ot?"."+Ze:"["+Ze+"]");_t.set(rt,!0);var re=T();p(oe,it(we,ai,wt,At,Rt,Dt,pt,st,ot,nt,Tt,Ct,yt,gt,re))}}return oe};B.exports=function(it,rt){var At,ct=it,wt=function(rt){if(!rt)return x;if(null!=rt.encoder&&"function"!=typeof rt.encoder)throw new TypeError("Encoder has to be a function.");var ct=rt.charset||x.charset;if(void 0!==rt.charset&&"utf-8"!==rt.charset&&"iso-8859-1"!==rt.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var wt=e.default;if(void 0!==rt.format){if(!t.call(e.formatters,rt.format))throw new TypeError("Unknown format option provided.");wt=rt.format}var At=e.formatters[wt],Rt=x.filter;return("function"==typeof rt.filter||o(rt.filter))&&(Rt=rt.filter),{addQueryPrefix:"boolean"==typeof rt.addQueryPrefix?rt.addQueryPrefix:x.addQueryPrefix,allowDots:void 0===rt.allowDots?x.allowDots:!!rt.allowDots,charset:ct,charsetSentinel:"boolean"==typeof rt.charsetSentinel?rt.charsetSentinel:x.charsetSentinel,delimiter:void 0===rt.delimiter?x.delimiter:rt.delimiter,encode:"boolean"==typeof rt.encode?rt.encode:x.encode,encoder:"function"==typeof rt.encoder?rt.encoder:x.encoder,encodeValuesOnly:"boolean"==typeof rt.encodeValuesOnly?rt.encodeValuesOnly:x.encodeValuesOnly,filter:Rt,format:wt,formatter:At,serializeDate:"function"==typeof rt.serializeDate?rt.serializeDate:x.serializeDate,skipNulls:"boolean"==typeof rt.skipNulls?rt.skipNulls:x.skipNulls,sort:"function"==typeof rt.sort?rt.sort:null,strictNullHandling:"boolean"==typeof rt.strictNullHandling?rt.strictNullHandling:x.strictNullHandling}}(rt);"function"==typeof wt.filter?ct=(0,wt.filter)("",ct):o(wt.filter)&&(At=wt.filter);var Dt=[];if("object"!=typeof ct||null===ct)return"";var st=n[rt&&rt.arrayFormat in n?rt.arrayFormat:rt&&"indices"in rt?rt.indices?"indices":"repeat":"indices"];At||(At=Object.keys(ct)),wt.sort&&At.sort(wt.sort);for(var ot=T(),nt=0;nt<At.length;++nt){var Tt=At[nt];wt.skipNulls&&null===ct[Tt]||p(Dt,Y(ct[Tt],Tt,st,wt.strictNullHandling,wt.skipNulls,wt.encode?wt.encoder:null,wt.filter,wt.sort,wt.allowDots,wt.serializeDate,wt.format,wt.formatter,wt.encodeValuesOnly,wt.charset,ot))}var Ct=Dt.join(wt.delimiter),yt=!0===wt.addQueryPrefix?"?":"";return wt.charsetSentinel&&(yt+="iso-8859-1"===wt.charset?"utf8=%26%2310003%3B&":"utf8=%E2%9C%93&"),Ct.length>0?yt+Ct:""}},45811:(B,U,v)=>{"use strict";var T=v(11085),a=Object.prototype.hasOwnProperty,e=Array.isArray,t=function(){for(var rt=[],ct=0;ct<256;++ct)rt.push("%"+((ct<16?"0":"")+ct.toString(16)).toUpperCase());return rt}(),o=function(ct,wt){for(var At=wt&&wt.plainObjects?Object.create(null):{},Rt=0;Rt<ct.length;++Rt)void 0!==ct[Rt]&&(At[Rt]=ct[Rt]);return At};B.exports={arrayToObject:o,assign:function(ct,wt){return Object.keys(wt).reduce(function(At,Rt){return At[Rt]=wt[Rt],At},ct)},combine:function(ct,wt){return[].concat(ct,wt)},compact:function(ct){for(var wt=[{obj:{o:ct},prop:"o"}],At=[],Rt=0;Rt<wt.length;++Rt)for(var Dt=wt[Rt],pt=Dt.obj[Dt.prop],st=Object.keys(pt),ot=0;ot<st.length;++ot){var nt=st[ot],Tt=pt[nt];"object"==typeof Tt&&null!==Tt&&-1===At.indexOf(Tt)&&(wt.push({obj:pt,prop:nt}),At.push(Tt))}return function(ct){for(;ct.length>1;){var wt=ct.pop(),At=wt.obj[wt.prop];if(e(At)){for(var Rt=[],Dt=0;Dt<At.length;++Dt)void 0!==At[Dt]&&Rt.push(At[Dt]);wt.obj[wt.prop]=Rt}}}(wt),ct},decode:function(rt,ct,wt){var At=rt.replace(/\+/g," ");if("iso-8859-1"===wt)return At.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(At)}catch(Rt){return At}},encode:function(ct,wt,At,Rt,Dt){if(0===ct.length)return ct;var pt=ct;if("symbol"==typeof ct?pt=Symbol.prototype.toString.call(ct):"string"!=typeof ct&&(pt=String(ct)),"iso-8859-1"===At)return escape(pt).replace(/%u[0-9a-f]{4}/gi,function(Tt){return"%26%23"+parseInt(Tt.slice(2),16)+"%3B"});for(var st="",ot=0;ot<pt.length;++ot){var nt=pt.charCodeAt(ot);45===nt||46===nt||95===nt||126===nt||nt>=48&&nt<=57||nt>=65&&nt<=90||nt>=97&&nt<=122||Dt===T.RFC1738&&(40===nt||41===nt)?st+=pt.charAt(ot):nt<128?st+=t[nt]:nt<2048?st+=t[192|nt>>6]+t[128|63&nt]:nt<55296||nt>=57344?st+=t[224|nt>>12]+t[128|nt>>6&63]+t[128|63&nt]:(nt=65536+((1023&nt)<<10|1023&pt.charCodeAt(ot+=1)),st+=t[240|nt>>18]+t[128|nt>>12&63]+t[128|nt>>6&63]+t[128|63&nt])}return st},isBuffer:function(ct){return!(!ct||"object"!=typeof ct||!(ct.constructor&&ct.constructor.isBuffer&&ct.constructor.isBuffer(ct)))},isRegExp:function(ct){return"[object RegExp]"===Object.prototype.toString.call(ct)},maybeMap:function(ct,wt){if(e(ct)){for(var At=[],Rt=0;Rt<ct.length;Rt+=1)At.push(wt(ct[Rt]));return At}return wt(ct)},merge:function rt(ct,wt,At){if(!wt)return ct;if("object"!=typeof wt){if(e(ct))ct.push(wt);else{if(!ct||"object"!=typeof ct)return[ct,wt];(At&&(At.plainObjects||At.allowPrototypes)||!a.call(Object.prototype,wt))&&(ct[wt]=!0)}return ct}if(!ct||"object"!=typeof ct)return[ct].concat(wt);var Rt=ct;return e(ct)&&!e(wt)&&(Rt=o(ct,At)),e(ct)&&e(wt)?(wt.forEach(function(Dt,pt){if(a.call(ct,pt)){var st=ct[pt];st&&"object"==typeof st&&Dt&&"object"==typeof Dt?ct[pt]=rt(st,Dt,At):ct.push(Dt)}else ct[pt]=Dt}),ct):Object.keys(wt).reduce(function(Dt,pt){var st=wt[pt];return Dt[pt]=a.call(Dt,pt)?rt(Dt[pt],st,At):st,Dt},Rt)}}},16958:B=>{var U=B.exports=function(X){return new v(X)};function v(X){this.value=X}function T(X,it,rt){var ct=[],wt=[],At=!0;return function Rt(Dt){var pt=rt?a(Dt):Dt,st={},ot=!0,nt={node:pt,node_:Dt,path:[].concat(ct),parent:wt[wt.length-1],parents:wt,key:ct.slice(-1)[0],isRoot:0===ct.length,level:ct.length,circular:null,update:function(yt,gt){nt.isRoot||(nt.parent.node[nt.key]=yt),nt.node=yt,gt&&(ot=!1)},delete:function(yt){delete nt.parent.node[nt.key],yt&&(ot=!1)},remove:function(yt){x(nt.parent.node)?nt.parent.node.splice(nt.key,1):delete nt.parent.node[nt.key],yt&&(ot=!1)},keys:null,before:function(yt){st.before=yt},after:function(yt){st.after=yt},pre:function(yt){st.pre=yt},post:function(yt){st.post=yt},stop:function(){At=!1},block:function(){ot=!1}};if(!At)return nt;function Tt(){if("object"==typeof nt.node&&null!==nt.node){(!nt.keys||nt.node_!==nt.node)&&(nt.keys=e(nt.node)),nt.isLeaf=0==nt.keys.length;for(var yt=0;yt<wt.length;yt++)if(wt[yt].node_===Dt){nt.circular=wt[yt];break}}else nt.isLeaf=!0,nt.keys=null;nt.notLeaf=!nt.isLeaf,nt.notRoot=!nt.isRoot}Tt();var Ct=it.call(nt,nt.node);return void 0!==Ct&&nt.update&&nt.update(Ct),st.before&&st.before.call(nt,nt.node),ot&&("object"==typeof nt.node&&null!==nt.node&&!nt.circular&&(wt.push(nt),Tt(),k(nt.keys,function(yt,gt){ct.push(yt),st.pre&&st.pre.call(nt,nt.node[yt],yt);var _t=Rt(nt.node[yt]);rt&&Y.call(nt.node,yt)&&(nt.node[yt]=_t.node),_t.isLast=gt==nt.keys.length-1,_t.isFirst=0==gt,st.post&&st.post.call(nt,_t),ct.pop()}),wt.pop()),st.after&&st.after.call(nt,nt.node)),nt}(X).node}function a(X){if("object"==typeof X&&null!==X){var it;if(x(X))it=[];else if(function(X){return"[object Date]"===t(X)}(X))it=new Date(X.getTime?X.getTime():X);else if(function(X){return"[object RegExp]"===t(X)}(X))it=new RegExp(X);else if(function(X){return"[object Error]"===t(X)}(X))it={message:X.message};else if(function(X){return"[object Boolean]"===t(X)}(X))it=new Boolean(X);else if(function(X){return"[object Number]"===t(X)}(X))it=new Number(X);else if(function(X){return"[object String]"===t(X)}(X))it=new String(X);else if(Object.create&&Object.getPrototypeOf)it=Object.create(Object.getPrototypeOf(X));else if(X.constructor===Object)it={};else{var ct=function(){};ct.prototype=X.constructor&&X.constructor.prototype||X.__proto__||{},it=new ct}return k(e(X),function(wt){it[wt]=X[wt]}),it}return X}v.prototype.get=function(X){for(var it=this.value,rt=0;rt<X.length;rt++){var ct=X[rt];if(!it||!Y.call(it,ct)){it=void 0;break}it=it[ct]}return it},v.prototype.has=function(X){for(var it=this.value,rt=0;rt<X.length;rt++){var ct=X[rt];if(!it||!Y.call(it,ct))return!1;it=it[ct]}return!0},v.prototype.set=function(X,it){for(var rt=this.value,ct=0;ct<X.length-1;ct++){var wt=X[ct];Y.call(rt,wt)||(rt[wt]={}),rt=rt[wt]}return rt[X[ct]]=it,it},v.prototype.map=function(X){return T(this.value,X,!0)},v.prototype.forEach=function(X){return this.value=T(this.value,X,!1),this.value},v.prototype.reduce=function(X,it){var rt=1===arguments.length,ct=rt?this.value:it;return this.forEach(function(wt){(!this.isRoot||!rt)&&(ct=X.call(this,ct,wt))}),ct},v.prototype.paths=function(){var X=[];return this.forEach(function(it){X.push(this.path)}),X},v.prototype.nodes=function(){var X=[];return this.forEach(function(it){X.push(this.node)}),X},v.prototype.clone=function(){var X=[],it=[];return function rt(ct){for(var wt=0;wt<X.length;wt++)if(X[wt]===ct)return it[wt];if("object"==typeof ct&&null!==ct){var At=a(ct);return X.push(ct),it.push(At),k(e(ct),function(Rt){At[Rt]=rt(ct[Rt])}),X.pop(),it.pop(),At}return ct}(this.value)};var e=Object.keys||function(it){var rt=[];for(var ct in it)rt.push(ct);return rt};function t(X){return Object.prototype.toString.call(X)}var x=Array.isArray||function(it){return"[object Array]"===Object.prototype.toString.call(it)},k=function(X,it){if(X.forEach)return X.forEach(it);for(var rt=0;rt<X.length;rt++)it(X[rt],rt,X)};k(e(v.prototype),function(X){U[X]=function(it){var rt=[].slice.call(arguments,1),ct=new v(it);return ct[X].apply(ct,rt)}});var Y=Object.hasOwnProperty||function(X,it){return it in X}},58872:function(B,U,v){var T;B=v.nmd(B),function(a){"object"==typeof global&&global;var o,r=2147483647,p=36,rt=/^xn--/,ct=/[^\x20-\x7E]/,wt=/[\x2E\u3002\uFF0E\uFF61]/g,At={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Dt=Math.floor,pt=String.fromCharCode;function ot(Ce){throw RangeError(At[Ce])}function nt(Ce,Ze){for(var we=Ce.length,ai=[];we--;)ai[we]=Ze(Ce[we]);return ai}function Tt(Ce,Ze){var we=Ce.split("@"),ai="";return we.length>1&&(ai=we[0]+"@",Ce=we[1]),ai+nt((Ce=Ce.replace(wt,".")).split("."),Ze).join(".")}function Ct(Ce){for(var re,ce,Ze=[],we=0,ai=Ce.length;we<ai;)(re=Ce.charCodeAt(we++))>=55296&&re<=56319&&we<ai?56320==(64512&(ce=Ce.charCodeAt(we++)))?Ze.push(((1023&re)<<10)+(1023&ce)+65536):(Ze.push(re),we--):Ze.push(re);return Ze}function yt(Ce){return nt(Ce,function(Ze){var we="";return Ze>65535&&(we+=pt((Ze-=65536)>>>10&1023|55296),Ze=56320|1023&Ze),we+pt(Ze)}).join("")}function gt(Ce){return Ce-48<10?Ce-22:Ce-65<26?Ce-65:Ce-97<26?Ce-97:p}function _t(Ce,Ze){return Ce+22+75*(Ce<26)-((0!=Ze)<<5)}function Jt(Ce,Ze,we){var ai=0;for(Ce=we?Dt(Ce/700):Ce>>1,Ce+=Dt(Ce/Ze);Ce>455;ai+=p)Ce=Dt(Ce/35);return Dt(ai+36*Ce/(Ce+38))}function Pt(Ce){var ai,qe,oi,wi,Ji,Ni,ui,Oe,Be,Ft,Ze=[],we=Ce.length,re=0,ce=128,Pe=72;for((qe=Ce.lastIndexOf("-"))<0&&(qe=0),oi=0;oi<qe;++oi)Ce.charCodeAt(oi)>=128&&ot("not-basic"),Ze.push(Ce.charCodeAt(oi));for(wi=qe>0?qe+1:0;wi<we;){for(Ji=re,Ni=1,ui=p;wi>=we&&ot("invalid-input"),((Oe=gt(Ce.charCodeAt(wi++)))>=p||Oe>Dt((r-re)/Ni))&&ot("overflow"),re+=Oe*Ni,!(Oe<(Be=ui<=Pe?1:ui>=Pe+26?26:ui-Pe));ui+=p)Ni>Dt(r/(Ft=p-Be))&&ot("overflow"),Ni*=Ft;Pe=Jt(re-Ji,ai=Ze.length+1,0==Ji),Dt(re/ai)>r-ce&&ot("overflow"),ce+=Dt(re/ai),re%=ai,Ze.splice(re++,0,ce)}return yt(Ze)}function oe(Ce){var Ze,we,ai,re,ce,Pe,qe,oi,wi,Ji,Ni,Oe,Be,Ft,ie,ui=[];for(Oe=(Ce=Ct(Ce)).length,Ze=128,we=0,ce=72,Pe=0;Pe<Oe;++Pe)(Ni=Ce[Pe])<128&&ui.push(pt(Ni));for(ai=re=ui.length,re&&ui.push("-");ai<Oe;){for(qe=r,Pe=0;Pe<Oe;++Pe)(Ni=Ce[Pe])>=Ze&&Ni<qe&&(qe=Ni);for(qe-Ze>Dt((r-we)/(Be=ai+1))&&ot("overflow"),we+=(qe-Ze)*Be,Ze=qe,Pe=0;Pe<Oe;++Pe)if((Ni=Ce[Pe])<Ze&&++we>r&&ot("overflow"),Ni==Ze){for(oi=we,wi=p;!(oi<(Ji=wi<=ce?1:wi>=ce+26?26:wi-ce));wi+=p)ui.push(pt(_t(Ji+(ie=oi-Ji)%(Ft=p-Ji),0))),oi=Dt(ie/Ft);ui.push(pt(_t(oi,0))),ce=Jt(we,Be,ai==re),we=0,++ai}++we,++Ze}return ui.join("")}o={version:"1.3.2",ucs2:{decode:Ct,encode:yt},decode:Pt,encode:oe,toASCII:function(Ce){return Tt(Ce,function(Ze){return ct.test(Ze)?"xn--"+oe(Ze):Ze})},toUnicode:function(Ce){return Tt(Ce,function(Ze){return rt.test(Ze)?Pt(Ze.slice(4).toLowerCase()):Ze})}},void 0!==(T=function(){return o}.call(U,v,U,B))&&(B.exports=T)}()},77526:(B,U,v)=>{"use strict";var T=v(58872),a=v(98893);function e(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}U.parse=At,U.resolve=function(st,ot){return At(st,!1,!0).resolve(ot)},U.resolveObject=function(st,ot){return st?At(st,!1,!0).resolveObject(ot):ot},U.format=function(st){return a.isString(st)&&(st=At(st)),st instanceof e?st.format():e.prototype.format.call(st)},U.Url=e;var t=/^([a-z0-9.+-]+:)/i,n=/:[0-9]*$/,o=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,p=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),b=["'"].concat(p),I=["%","/","?",";","#"].concat(b),x=["/","?","#"],Y=/^[+a-z0-9A-Z_-]{0,63}$/,X=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,it={javascript:!0,"javascript:":!0},rt={javascript:!0,"javascript:":!0},ct={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},wt=v(1521);function At(st,ot,nt){if(st&&a.isObject(st)&&st instanceof e)return st;var Tt=new e;return Tt.parse(st,ot,nt),Tt}e.prototype.parse=function(st,ot,nt){if(!a.isString(st))throw new TypeError("Parameter 'url' must be a string, not "+typeof st);var Tt=st.indexOf("?"),Ct=-1!==Tt&&Tt<st.indexOf("#")?"?":"#",yt=st.split(Ct);yt[0]=yt[0].replace(/\\/g,"/");var _t=st=yt.join(Ct);if(_t=_t.trim(),!nt&&1===st.split("#").length){var Jt=o.exec(_t);if(Jt)return this.path=_t,this.href=_t,this.pathname=Jt[1],Jt[2]?(this.search=Jt[2],this.query=ot?wt.parse(this.search.substr(1)):this.search.substr(1)):ot&&(this.search="",this.query={}),this}var Pt=t.exec(_t);if(Pt){var oe=(Pt=Pt[0]).toLowerCase();this.protocol=oe,_t=_t.substr(Pt.length)}if(nt||Pt||_t.match(/^\/\/[^@\/]+@[^@\/]+/)){var Ne="//"===_t.substr(0,2);Ne&&(!Pt||!rt[Pt])&&(_t=_t.substr(2),this.slashes=!0)}if(!rt[Pt]&&(Ne||Pt&&!ct[Pt])){for(var Xe=-1,Ce=0;Ce<x.length;Ce++)-1!==(Ze=_t.indexOf(x[Ce]))&&(-1===Xe||Ze<Xe)&&(Xe=Ze);var we,ai;for(-1!==(ai=-1===Xe?_t.lastIndexOf("@"):_t.lastIndexOf("@",Xe))&&(we=_t.slice(0,ai),_t=_t.slice(ai+1),this.auth=decodeURIComponent(we)),Xe=-1,Ce=0;Ce<I.length;Ce++){var Ze;-1!==(Ze=_t.indexOf(I[Ce]))&&(-1===Xe||Ze<Xe)&&(Xe=Ze)}-1===Xe&&(Xe=_t.length),this.host=_t.slice(0,Xe),_t=_t.slice(Xe),this.parseHost(),this.hostname=this.hostname||"";var re="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!re)for(var ce=this.hostname.split(/\./),Pe=(Ce=0,ce.length);Ce<Pe;Ce++){var qe=ce[Ce];if(qe&&!qe.match(Y)){for(var oi="",wi=0,Ji=qe.length;wi<Ji;wi++)qe.charCodeAt(wi)>127?oi+="x":oi+=qe[wi];if(!oi.match(Y)){var Ni=ce.slice(0,Ce),ui=ce.slice(Ce+1),Oe=qe.match(X);Oe&&(Ni.push(Oe[1]),ui.unshift(Oe[2])),ui.length&&(_t="/"+ui.join(".")+_t),this.hostname=Ni.join(".");break}}}this.hostname=this.hostname.length>255?"":this.hostname.toLowerCase(),re||(this.hostname=T.toASCII(this.hostname)),this.host=(this.hostname||"")+(this.port?":"+this.port:""),this.href+=this.host,re&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==_t[0]&&(_t="/"+_t))}if(!it[oe])for(Ce=0,Pe=b.length;Ce<Pe;Ce++){var ie=b[Ce];if(-1!==_t.indexOf(ie)){var hi=encodeURIComponent(ie);hi===ie&&(hi=escape(ie)),_t=_t.split(ie).join(hi)}}var fe=_t.indexOf("#");-1!==fe&&(this.hash=_t.substr(fe),_t=_t.slice(0,fe));var di=_t.indexOf("?");return-1!==di?(this.search=_t.substr(di),this.query=_t.substr(di+1),ot&&(this.query=wt.parse(this.query)),_t=_t.slice(0,di)):ot&&(this.search="",this.query={}),_t&&(this.pathname=_t),ct[oe]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(this.path=(this.pathname||"")+(this.search||"")),this.href=this.format(),this},e.prototype.format=function(){var st=this.auth||"";st&&(st=(st=encodeURIComponent(st)).replace(/%3A/i,":"),st+="@");var ot=this.protocol||"",nt=this.pathname||"",Tt=this.hash||"",Ct=!1,yt="";this.host?Ct=st+this.host:this.hostname&&(Ct=st+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(Ct+=":"+this.port)),this.query&&a.isObject(this.query)&&Object.keys(this.query).length&&(yt=wt.stringify(this.query));var gt=this.search||yt&&"?"+yt||"";return ot&&":"!==ot.substr(-1)&&(ot+=":"),this.slashes||(!ot||ct[ot])&&!1!==Ct?(Ct="//"+(Ct||""),nt&&"/"!==nt.charAt(0)&&(nt="/"+nt)):Ct||(Ct=""),Tt&&"#"!==Tt.charAt(0)&&(Tt="#"+Tt),gt&&"?"!==gt.charAt(0)&&(gt="?"+gt),ot+Ct+(nt=nt.replace(/[?#]/g,function(_t){return encodeURIComponent(_t)}))+(gt=gt.replace("#","%23"))+Tt},e.prototype.resolve=function(st){return this.resolveObject(At(st,!1,!0)).format()},e.prototype.resolveObject=function(st){if(a.isString(st)){var ot=new e;ot.parse(st,!1,!0),st=ot}for(var nt=new e,Tt=Object.keys(this),Ct=0;Ct<Tt.length;Ct++){var yt=Tt[Ct];nt[yt]=this[yt]}if(nt.hash=st.hash,""===st.href)return nt.href=nt.format(),nt;if(st.slashes&&!st.protocol){for(var gt=Object.keys(st),_t=0;_t<gt.length;_t++){var Jt=gt[_t];"protocol"!==Jt&&(nt[Jt]=st[Jt])}return ct[nt.protocol]&&nt.hostname&&!nt.pathname&&(nt.path=nt.pathname="/"),nt.href=nt.format(),nt}if(st.protocol&&st.protocol!==nt.protocol){if(!ct[st.protocol]){for(var Pt=Object.keys(st),oe=0;oe<Pt.length;oe++){var Ne=Pt[oe];nt[Ne]=st[Ne]}return nt.href=nt.format(),nt}if(nt.protocol=st.protocol,st.host||rt[st.protocol])nt.pathname=st.pathname;else{for(var Pe=(st.pathname||"").split("/");Pe.length&&!(st.host=Pe.shift()););st.host||(st.host=""),st.hostname||(st.hostname=""),""!==Pe[0]&&Pe.unshift(""),Pe.length<2&&Pe.unshift(""),nt.pathname=Pe.join("/")}return nt.search=st.search,nt.query=st.query,nt.host=st.host||"",nt.auth=st.auth,nt.hostname=st.hostname||st.host,nt.port=st.port,(nt.pathname||nt.search)&&(nt.path=(nt.pathname||"")+(nt.search||"")),nt.slashes=nt.slashes||st.slashes,nt.href=nt.format(),nt}var Ze=nt.pathname&&"/"===nt.pathname.charAt(0),we=st.host||st.pathname&&"/"===st.pathname.charAt(0),ai=we||Ze||nt.host&&st.pathname,re=ai,ce=nt.pathname&&nt.pathname.split("/")||[],qe=(Pe=st.pathname&&st.pathname.split("/")||[],nt.protocol&&!ct[nt.protocol]);if(qe&&(nt.hostname="",nt.port=null,nt.host&&(""===ce[0]?ce[0]=nt.host:ce.unshift(nt.host)),nt.host="",st.protocol&&(st.hostname=null,st.port=null,st.host&&(""===Pe[0]?Pe[0]=st.host:Pe.unshift(st.host)),st.host=null),ai=ai&&(""===Pe[0]||""===ce[0])),we)nt.host=st.host||""===st.host?st.host:nt.host,nt.hostname=st.hostname||""===st.hostname?st.hostname:nt.hostname,nt.search=st.search,nt.query=st.query,ce=Pe;else if(Pe.length)ce||(ce=[]),ce.pop(),ce=ce.concat(Pe),nt.search=st.search,nt.query=st.query;else if(!a.isNullOrUndefined(st.search))return qe&&(nt.hostname=nt.host=ce.shift(),(oi=!!(nt.host&&nt.host.indexOf("@")>0)&&nt.host.split("@"))&&(nt.auth=oi.shift(),nt.host=nt.hostname=oi.shift())),nt.search=st.search,nt.query=st.query,(!a.isNull(nt.pathname)||!a.isNull(nt.search))&&(nt.path=(nt.pathname?nt.pathname:"")+(nt.search?nt.search:"")),nt.href=nt.format(),nt;if(!ce.length)return nt.pathname=null,nt.path=nt.search?"/"+nt.search:null,nt.href=nt.format(),nt;for(var wi=ce.slice(-1)[0],Ji=(nt.host||st.host||ce.length>1)&&("."===wi||".."===wi)||""===wi,Ni=0,ui=ce.length;ui>=0;ui--)"."===(wi=ce[ui])?ce.splice(ui,1):".."===wi?(ce.splice(ui,1),Ni++):Ni&&(ce.splice(ui,1),Ni--);if(!ai&&!re)for(;Ni--;Ni)ce.unshift("..");ai&&""!==ce[0]&&(!ce[0]||"/"!==ce[0].charAt(0))&&ce.unshift(""),Ji&&"/"!==ce.join("/").substr(-1)&&ce.push("");var oi,Oe=""===ce[0]||ce[0]&&"/"===ce[0].charAt(0);return qe&&(nt.hostname=nt.host=Oe?"":ce.length?ce.shift():"",(oi=!!(nt.host&&nt.host.indexOf("@")>0)&&nt.host.split("@"))&&(nt.auth=oi.shift(),nt.host=nt.hostname=oi.shift())),(ai=ai||nt.host&&ce.length)&&!Oe&&ce.unshift(""),ce.length?nt.pathname=ce.join("/"):(nt.pathname=null,nt.path=null),(!a.isNull(nt.pathname)||!a.isNull(nt.search))&&(nt.path=(nt.pathname?nt.pathname:"")+(nt.search?nt.search:"")),nt.auth=st.auth||nt.auth,nt.slashes=nt.slashes||st.slashes,nt.href=nt.format(),nt},e.prototype.parseHost=function(){var st=this.host,ot=n.exec(st);ot&&(":"!==(ot=ot[0])&&(this.port=ot.substr(1)),st=st.substr(0,st.length-ot.length)),st&&(this.hostname=st)}},98893:B=>{"use strict";B.exports={isString:function(U){return"string"==typeof U},isObject:function(U){return"object"==typeof U&&null!==U},isNull:function(U){return null===U},isNullOrUndefined:function(U){return null==U}}},96553:()=>{},61921:(B,U,v)=>{"use strict";function T(e,t,n,o,r,p,b){try{var I=e[p](b),x=I.value}catch(k){return void n(k)}I.done?t(x):Promise.resolve(x).then(o,r)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(o,r){var p=e.apply(t,n);function b(x){T(p,o,r,b,I,"next",x)}function I(x){T(p,o,r,b,I,"throw",x)}b(void 0)})}}v.d(U,{Z:()=>a})}},B=>{B(B.s=15773)}]);