var lq=Object.defineProperty,cq=Object.defineProperties,uq=Object.getOwnPropertyDescriptors,tP=Object.getOwnPropertySymbols,dq=Object.prototype.hasOwnProperty,hq=Object.prototype.propertyIsEnumerable,uS=(T,I,m)=>I in T?lq(T,I,{enumerable:!0,configurable:!0,writable:!0,value:m}):T[I]=m,ht=(T,I)=>{for(var m in I||(I={}))dq.call(I,m)&&uS(T,m,I[m]);if(tP)for(var m of tP(I))hq.call(I,m)&&uS(T,m,I[m]);return T},Nr=(T,I)=>cq(T,uq(I)),Na=(T,I,m)=>(uS(T,"symbol"!=typeof I?I+"":I,m),m);(self.webpackChunkAutoBlocklyApp=self.webpackChunkAutoBlocklyApp||[]).push([[179],{38506:T=>{function I(y,S,s,n,l,u,h){try{var _=y[u](h),b=_.value}catch(R){return void s(R)}_.done?S(b):Promise.resolve(b).then(n,l)}T.exports=function(y){return function(){var S=this,s=arguments;return new Promise(function(n,l){var u=y.apply(S,s);function h(b){I(u,n,l,h,_,"next",b)}function _(b){I(u,n,l,h,_,"throw",b)}h(void 0)})}},T.exports.default=T.exports,T.exports.__esModule=!0},89926:(T,I,m)=>{T.exports=m(16775)},87048:(T,I,m)=>{T.exports=m(29032)},20272:(T,I,m)=>{T.exports=m(93928)},26775:(T,I,m)=>{T.exports=m(40779)},78804:(T,I,m)=>{T.exports=m(88092)},11761:(T,I,m)=>{T.exports=m(43910)},64770:(T,I,m)=>{T.exports=m(89412)},71049:(T,I,m)=>{T.exports=m(71166)},3498:(T,I,m)=>{T.exports=m(14570)},38330:(T,I,m)=>{T.exports=m(68786)},23289:(T,I,m)=>{T.exports=m(94768)},53130:(T,I,m)=>{T.exports=m(5219)},45107:(T,I,m)=>{T.exports=m(47833)},45635:(T,I,m)=>{T.exports=m(16625)},96916:(T,I,m)=>{T.exports=m(95609)},58258:(T,I,m)=>{T.exports=m(56447)},14569:(T,I,m)=>{T.exports=m(3024)},97326:(T,I,m)=>{T.exports=m(15814)},57124:(T,I,m)=>{T.exports=m(80345)},57272:(T,I,m)=>{T.exports=m(90974)},66360:(T,I,m)=>{T.exports=m(23458)},71094:(T,I,m)=>{T.exports=m(75223)},93165:(T,I,m)=>{T.exports=m(31151)},19898:(T,I,m)=>{T.exports=m(31175)},84916:(T,I,m)=>{T.exports=m(60918)},31946:(T,I,m)=>{T.exports=m(68625)},18753:(T,I,m)=>{T.exports=m(58917)},90343:(T,I,m)=>{T.exports=m(2126)},12988:(T,I,m)=>{T.exports=m(93648)},23005:(T,I,m)=>{T.exports=m(58300)},26394:(T,I,m)=>{T.exports=m(7137)},93449:(T,I,m)=>{T.exports=m(24435)},3599:(T,I,m)=>{T.exports=m(30218)},39126:(T,I,m)=>{T.exports=m(91388)},2805:(T,I,m)=>{"use strict";m.r(I),m.d(I,{__extends:()=>S,__assign:()=>s,__rest:()=>n,__decorate:()=>l,__param:()=>u,__metadata:()=>h,__awaiter:()=>_,__generator:()=>b,__createBinding:()=>R,__exportStar:()=>O,__values:()=>H,__read:()=>W,__spread:()=>G,__spreadArrays:()=>Z,__spreadArray:()=>Q,__await:()=>Y,__asyncGenerator:()=>ue,__asyncDelegator:()=>ne,__asyncValues:()=>he,__makeTemplateObject:()=>te,__importStar:()=>q,__importDefault:()=>J,__classPrivateFieldGet:()=>F,__classPrivateFieldSet:()=>fe});var y=function(K,ie){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(le,re){le.__proto__=re}||function(le,re){for(var Re in re)Object.prototype.hasOwnProperty.call(re,Re)&&(le[Re]=re[Re])})(K,ie)};function S(K,ie){if("function"!=typeof ie&&null!==ie)throw new TypeError("Class extends value "+String(ie)+" is not a constructor or null");function le(){this.constructor=K}y(K,ie),K.prototype=null===ie?Object.create(ie):(le.prototype=ie.prototype,new le)}var s=function(){return s=Object.assign||function(ie){for(var le,re=1,Re=arguments.length;re<Re;re++)for(var de in le=arguments[re])Object.prototype.hasOwnProperty.call(le,de)&&(ie[de]=le[de]);return ie},s.apply(this,arguments)};function n(K,ie){var le={};for(var re in K)Object.prototype.hasOwnProperty.call(K,re)&&ie.indexOf(re)<0&&(le[re]=K[re]);if(null!=K&&"function"==typeof Object.getOwnPropertySymbols){var Re=0;for(re=Object.getOwnPropertySymbols(K);Re<re.length;Re++)ie.indexOf(re[Re])<0&&Object.prototype.propertyIsEnumerable.call(K,re[Re])&&(le[re[Re]]=K[re[Re]])}return le}function l(K,ie,le,re){var ve,Re=arguments.length,de=Re<3?ie:null===re?re=Object.getOwnPropertyDescriptor(ie,le):re;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)de=Reflect.decorate(K,ie,le,re);else for(var Pe=K.length-1;Pe>=0;Pe--)(ve=K[Pe])&&(de=(Re<3?ve(de):Re>3?ve(ie,le,de):ve(ie,le))||de);return Re>3&&de&&Object.defineProperty(ie,le,de),de}function u(K,ie){return function(le,re){ie(le,re,K)}}function h(K,ie){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(K,ie)}function _(K,ie,le,re){return new(le||(le=Promise))(function(de,ve){function Pe(Ve){try{Te(re.next(Ve))}catch(Le){ve(Le)}}function Se(Ve){try{Te(re.throw(Ve))}catch(Le){ve(Le)}}function Te(Ve){Ve.done?de(Ve.value):function(de){return de instanceof le?de:new le(function(ve){ve(de)})}(Ve.value).then(Pe,Se)}Te((re=re.apply(K,ie||[])).next())})}function b(K,ie){var re,Re,de,ve,le={label:0,sent:function(){if(1&de[0])throw de[1];return de[1]},trys:[],ops:[]};return ve={next:Pe(0),throw:Pe(1),return:Pe(2)},"function"==typeof Symbol&&(ve[Symbol.iterator]=function(){return this}),ve;function Pe(Te){return function(Ve){return function(Te){if(re)throw new TypeError("Generator is already executing.");for(;le;)try{if(re=1,Re&&(de=2&Te[0]?Re.return:Te[0]?Re.throw||((de=Re.return)&&de.call(Re),0):Re.next)&&!(de=de.call(Re,Te[1])).done)return de;switch(Re=0,de&&(Te=[2&Te[0],de.value]),Te[0]){case 0:case 1:de=Te;break;case 4:return le.label++,{value:Te[1],done:!1};case 5:le.label++,Re=Te[1],Te=[0];continue;case 7:Te=le.ops.pop(),le.trys.pop();continue;default:if(!(de=(de=le.trys).length>0&&de[de.length-1])&&(6===Te[0]||2===Te[0])){le=0;continue}if(3===Te[0]&&(!de||Te[1]>de[0]&&Te[1]<de[3])){le.label=Te[1];break}if(6===Te[0]&&le.label<de[1]){le.label=de[1],de=Te;break}if(de&&le.label<de[2]){le.label=de[2],le.ops.push(Te);break}de[2]&&le.ops.pop(),le.trys.pop();continue}Te=ie.call(K,le)}catch(Ve){Te=[6,Ve],Re=0}finally{re=de=0}if(5&Te[0])throw Te[1];return{value:Te[0]?Te[1]:void 0,done:!0}}([Te,Ve])}}}var R=Object.create?function(K,ie,le,re){void 0===re&&(re=le),Object.defineProperty(K,re,{enumerable:!0,get:function(){return ie[le]}})}:function(K,ie,le,re){void 0===re&&(re=le),K[re]=ie[le]};function O(K,ie){for(var le in K)"default"!==le&&!Object.prototype.hasOwnProperty.call(ie,le)&&R(ie,K,le)}function H(K){var ie="function"==typeof Symbol&&Symbol.iterator,le=ie&&K[ie],re=0;if(le)return le.call(K);if(K&&"number"==typeof K.length)return{next:function(){return K&&re>=K.length&&(K=void 0),{value:K&&K[re++],done:!K}}};throw new TypeError(ie?"Object is not iterable.":"Symbol.iterator is not defined.")}function W(K,ie){var le="function"==typeof Symbol&&K[Symbol.iterator];if(!le)return K;var Re,ve,re=le.call(K),de=[];try{for(;(void 0===ie||ie-- >0)&&!(Re=re.next()).done;)de.push(Re.value)}catch(Pe){ve={error:Pe}}finally{try{Re&&!Re.done&&(le=re.return)&&le.call(re)}finally{if(ve)throw ve.error}}return de}function G(){for(var K=[],ie=0;ie<arguments.length;ie++)K=K.concat(W(arguments[ie]));return K}function Z(){for(var K=0,ie=0,le=arguments.length;ie<le;ie++)K+=arguments[ie].length;var re=Array(K),Re=0;for(ie=0;ie<le;ie++)for(var de=arguments[ie],ve=0,Pe=de.length;ve<Pe;ve++,Re++)re[Re]=de[ve];return re}function Q(K,ie,le){if(le||2===arguments.length)for(var de,re=0,Re=ie.length;re<Re;re++)(de||!(re in ie))&&(de||(de=Array.prototype.slice.call(ie,0,re)),de[re]=ie[re]);return K.concat(de||ie)}function Y(K){return this instanceof Y?(this.v=K,this):new Y(K)}function ue(K,ie,le){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Re,re=le.apply(K,ie||[]),de=[];return Re={},ve("next"),ve("throw"),ve("return"),Re[Symbol.asyncIterator]=function(){return this},Re;function ve(Ue){re[Ue]&&(Re[Ue]=function(He){return new Promise(function(je,ut){de.push([Ue,He,je,ut])>1||Pe(Ue,He)})})}function Pe(Ue,He){try{!function(Ue){Ue.value instanceof Y?Promise.resolve(Ue.value.v).then(Te,Ve):Le(de[0][2],Ue)}(re[Ue](He))}catch(je){Le(de[0][3],je)}}function Te(Ue){Pe("next",Ue)}function Ve(Ue){Pe("throw",Ue)}function Le(Ue,He){Ue(He),de.shift(),de.length&&Pe(de[0][0],de[0][1])}}function ne(K){var ie,le;return ie={},re("next"),re("throw",function(Re){throw Re}),re("return"),ie[Symbol.iterator]=function(){return this},ie;function re(Re,de){ie[Re]=K[Re]?function(ve){return(le=!le)?{value:Y(K[Re](ve)),done:"return"===Re}:de?de(ve):ve}:de}}function he(K){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var le,ie=K[Symbol.asyncIterator];return ie?ie.call(K):(K=H(K),le={},re("next"),re("throw"),re("return"),le[Symbol.asyncIterator]=function(){return this},le);function re(de){le[de]=K[de]&&function(ve){return new Promise(function(Pe,Se){!function(de,ve,Pe,Se){Promise.resolve(Se).then(function(Te){de({value:Te,done:Pe})},ve)}(Pe,Se,(ve=K[de](ve)).done,ve.value)})}}}function te(K,ie){return Object.defineProperty?Object.defineProperty(K,"raw",{value:ie}):K.raw=ie,K}var oe=Object.create?function(K,ie){Object.defineProperty(K,"default",{enumerable:!0,value:ie})}:function(K,ie){K.default=ie};function q(K){if(K&&K.__esModule)return K;var ie={};if(null!=K)for(var le in K)"default"!==le&&Object.prototype.hasOwnProperty.call(K,le)&&R(ie,K,le);return oe(ie,K),ie}function J(K){return K&&K.__esModule?K:{default:K}}function F(K,ie,le,re){if("a"===le&&!re)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof ie?K!==ie||!re:!ie.has(K))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===le?re:"a"===le?re.call(K):re?re.value:ie.get(K)}function fe(K,ie,le,re,Re){if("m"===re)throw new TypeError("Private method is not writable");if("a"===re&&!Re)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof ie?K!==ie||!Re:!ie.has(K))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===re?Re.call(K,le):Re?Re.value=le:ie.set(K,le),le}},76588:function(T,I,m){var S,s;S=[m(96761)],void 0!==(s=function(n){"use strict";return n}.apply(I,S))&&(T.exports=s)},96761:function(T,I){var S;void 0!==(S=function(){"use strict";var s={connectionTypes:{INPUT_VALUE:1,OUTPUT_VALUE:2,NEXT_STATEMENT:3,PREVIOUS_STATEMENT:4},constants:{},LINE_MODE_MULTIPLIER:40,PAGE_MODE_MULTIPLIER:125,DRAG_RADIUS:5,FLYOUT_DRAG_RADIUS:10,SNAP_RADIUS:28};return s.CONNECTING_SNAP_RADIUS=s.SNAP_RADIUS,s.CURRENT_CONNECTION_PREFERENCE=8,s.BUMP_DELAY=250,s.BUMP_RANDOMNESS=10,s.COLLAPSE_CHARS=30,s.LONGPRESS=750,s.SOUND_LIMIT=100,s.DRAG_STACK=!0,s.HSV_SATURATION=.45,s.HSV_VALUE=.65,s.SPRITE={width:96,height:124,url:"sprites.png"},s.constants.ALIGN={LEFT:-1,CENTRE:0,RIGHT:1},s.DRAG_NONE=0,s.DRAG_STICKY=1,s.DRAG_BEGIN=1,s.DRAG_FREE=2,s.OPPOSITE_TYPE=[],s.OPPOSITE_TYPE[s.connectionTypes.INPUT_VALUE]=s.connectionTypes.OUTPUT_VALUE,s.OPPOSITE_TYPE[s.connectionTypes.OUTPUT_VALUE]=s.connectionTypes.INPUT_VALUE,s.OPPOSITE_TYPE[s.connectionTypes.NEXT_STATEMENT]=s.connectionTypes.PREVIOUS_STATEMENT,s.OPPOSITE_TYPE[s.connectionTypes.PREVIOUS_STATEMENT]=s.connectionTypes.NEXT_STATEMENT,s.VARIABLE_CATEGORY_NAME="VARIABLE",s.VARIABLE_DYNAMIC_CATEGORY_NAME="VARIABLE_DYNAMIC",s.PROCEDURE_CATEGORY_NAME="PROCEDURE",s.RENAME_VARIABLE_ID="RENAME_VARIABLE_ID",s.DELETE_VARIABLE_ID="DELETE_VARIABLE_ID",s.constants.COLLAPSED_INPUT_NAME="_TEMP_COLLAPSED_INPUT",s.constants.COLLAPSED_FIELD_NAME="_TEMP_COLLAPSED_FIELD",s.utils={},s.utils.global=function(){return"object"==typeof self?self:"object"==typeof window?window:"object"==typeof global?global:this}(),s.Msg={},s.utils.global.Blockly||(s.utils.global.Blockly={}),s.utils.global.Blockly.Msg||(s.utils.global.Blockly.Msg=s.Msg),s.utils.colour={},s.utils.colour.parse=function(n){n=String(n).toLowerCase().trim();var l=s.utils.colour.names[n];if(l||(l="0x"==n.substring(0,2)?"#"+n.substring(2):n,/^#[0-9a-f]{6}$/.test(l="#"==l[0]?l:"#"+l)))return l;if(/^#[0-9a-f]{3}$/.test(l))return["#",l[1],l[1],l[2],l[2],l[3],l[3]].join("");var u=n.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return u&&(n=Number(u[1]),l=Number(u[2]),u=Number(u[3]),0<=n&&256>n&&0<=l&&256>l&&0<=u&&256>u)?s.utils.colour.rgbToHex(n,l,u):null},s.utils.colour.rgbToHex=function(n,l,u){return l=n<<16|l<<8|u,16>n?"#"+(16777216|l).toString(16).substr(1):"#"+l.toString(16)},s.utils.colour.hexToRgb=function(n){return(n=s.utils.colour.parse(n))?[(n=parseInt(n.substr(1),16))>>16,n>>8&255,255&n]:[0,0,0]},s.utils.colour.hsvToHex=function(n,l,u){var h=0,_=0,b=0;if(0==l)b=_=h=u;else{var R=Math.floor(n/60),O=n/60-R;n=u*(1-l);var H=u*(1-l*O);switch(l=u*(1-l*(1-O)),R){case 1:h=H,_=u,b=n;break;case 2:h=n,_=u,b=l;break;case 3:h=n,_=H,b=u;break;case 4:h=l,_=n,b=u;break;case 5:h=u,_=n,b=H;break;case 6:case 0:h=u,_=l,b=n}}return s.utils.colour.rgbToHex(Math.floor(h),Math.floor(_),Math.floor(b))},s.utils.colour.blend=function(n,l,u){return(n=s.utils.colour.parse(n))&&(l=s.utils.colour.parse(l))?(n=s.utils.colour.hexToRgb(n),l=s.utils.colour.hexToRgb(l),s.utils.colour.rgbToHex(Math.round(l[0]+u*(n[0]-l[0])),Math.round(l[1]+u*(n[1]-l[1])),Math.round(l[2]+u*(n[2]-l[2])))):null},s.utils.colour.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},s.utils.Coordinate=function(n,l){this.x=n,this.y=l},s.utils.Coordinate.equals=function(n,l){return n==l||!(!n||!l)&&n.x==l.x&&n.y==l.y},s.utils.Coordinate.distance=function(n,l){var u=n.x-l.x;return n=n.y-l.y,Math.sqrt(u*u+n*n)},s.utils.Coordinate.magnitude=function(n){return Math.sqrt(n.x*n.x+n.y*n.y)},s.utils.Coordinate.difference=function(n,l){return new s.utils.Coordinate(n.x-l.x,n.y-l.y)},s.utils.Coordinate.sum=function(n,l){return new s.utils.Coordinate(n.x+l.x,n.y+l.y)},s.utils.Coordinate.prototype.clone=function(){return new s.utils.Coordinate(this.x,this.y)},s.utils.Coordinate.prototype.scale=function(n){return this.x*=n,this.y*=n,this},s.utils.Coordinate.prototype.translate=function(n,l){return this.x+=n,this.y+=l,this},s.utils.Rect=function(n,l,u,h){this.top=n,this.bottom=l,this.left=u,this.right=h},s.utils.Rect.prototype.contains=function(n,l){return n>=this.left&&n<=this.right&&l>=this.top&&l<=this.bottom},s.utils.Rect.prototype.intersects=function(n){return!(this.left>n.right||this.right<n.left||this.top>n.bottom||this.bottom<n.top)},s.utils.string={},s.utils.string.startsWith=function(n,l){return 0==n.lastIndexOf(l,0)},s.utils.string.shortestStringLength=function(n){return n.length?n.reduce(function(l,u){return l.length<u.length?l:u}).length:0},s.utils.string.commonWordPrefix=function(n,l){if(!n.length)return 0;if(1==n.length)return n[0].length;var u=0;l=l||s.utils.string.shortestStringLength(n);for(var h=0;h<l;h++){for(var _=n[0][h],b=1;b<n.length;b++)if(_!=n[b][h])return u;" "==_&&(u=h+1)}for(b=1;b<n.length;b++)if((_=n[b][h])&&" "!=_)return u;return l},s.utils.string.commonWordSuffix=function(n,l){if(!n.length)return 0;if(1==n.length)return n[0].length;var u=0;l=l||s.utils.string.shortestStringLength(n);for(var h=0;h<l;h++){for(var _=n[0].substr(-h-1,1),b=1;b<n.length;b++)if(_!=n[b].substr(-h-1,1))return u;" "==_&&(u=h+1)}for(b=1;b<n.length;b++)if((_=n[b].charAt(n[b].length-h-1))&&" "!=_)return u;return l},s.utils.string.wrap=function(n,l){n=n.split("\n");for(var u=0;u<n.length;u++)n[u]=s.utils.string.wrapLine_(n[u],l);return n.join("\n")},s.utils.string.wrapLine_=function(n,l){if(n.length<=l)return n;for(var u=n.trim().split(/\s+/),h=0;h<u.length;h++)u[h].length>l&&(l=u[h].length);h=-1/0;var _=1;do{var b=h,R=n;n=[];var O=u.length/_,H=1;for(h=0;h<u.length-1;h++)H<(h+1.5)/O?(H++,n[h]=!0):n[h]=!1;n=s.utils.string.wrapMutate_(u,n,l),h=s.utils.string.wrapScore_(u,n,l),n=s.utils.string.wrapToText_(u,n),_++}while(h>b);return R},s.utils.string.wrapScore_=function(n,l,u){for(var h=[0],_=[],b=0;b<n.length;b++)h[h.length-1]+=n[b].length,!0===l[b]?(h.push(0),_.push(n[b].charAt(n[b].length-1))):!1===l[b]&&h[h.length-1]++;for(n=Math.max.apply(Math,h),b=l=0;b<h.length;b++)l-=2*Math.pow(Math.abs(u-h[b]),1.5),l-=Math.pow(n-h[b],1.5),-1!=".?!".indexOf(_[b])?l+=u/3:-1!=",;)]}".indexOf(_[b])&&(l+=u/4);return 1<h.length&&h[h.length-1]<=h[h.length-2]&&(l+=.5),l},s.utils.string.wrapMutate_=function(n,l,u){for(var _,h=s.utils.string.wrapScore_(n,l,u),b=0;b<l.length-1;b++)if(l[b]!=l[b+1]){var R=[].concat(l);R[b]=!R[b],R[b+1]=!R[b+1];var O=s.utils.string.wrapScore_(n,R,u);O>h&&(h=O,_=R)}return _?s.utils.string.wrapMutate_(n,_,u):l},s.utils.string.wrapToText_=function(n,l){for(var u=[],h=0;h<n.length;h++)u.push(n[h]),void 0!==l[h]&&u.push(l[h]?"\n":" ");return u.join("")},s.utils.Size=function(n,l){this.width=n,this.height=l},s.utils.Size.equals=function(n,l){return n==l||!(!n||!l)&&n.width==l.width&&n.height==l.height},s.utils.style={},s.utils.style.getSize=function(n){if("none"!=s.utils.style.getStyle_(n,"display"))return s.utils.style.getSizeWithDisplay_(n);var l=n.style,u=l.display,h=l.visibility,_=l.position;l.visibility="hidden",l.position="absolute",l.display="inline";var b=n.offsetWidth;return n=n.offsetHeight,l.display=u,l.position=_,l.visibility=h,new s.utils.Size(b,n)},s.utils.style.getSizeWithDisplay_=function(n){return new s.utils.Size(n.offsetWidth,n.offsetHeight)},s.utils.style.getStyle_=function(n,l){return s.utils.style.getComputedStyle(n,l)||s.utils.style.getCascadedStyle(n,l)||n.style&&n.style[l]},s.utils.style.getComputedStyle=function(n,l){return document.defaultView&&document.defaultView.getComputedStyle&&(n=document.defaultView.getComputedStyle(n,null))&&(n[l]||n.getPropertyValue(l))||""},s.utils.style.getCascadedStyle=function(n,l){return n.currentStyle?n.currentStyle[l]:null},s.utils.style.getPageOffset=function(n){var l=new s.utils.Coordinate(0,0);n=n.getBoundingClientRect();var u=document.documentElement;return u=new s.utils.Coordinate(window.pageXOffset||u.scrollLeft,window.pageYOffset||u.scrollTop),l.x=n.left+u.x,l.y=n.top+u.y,l},s.utils.style.getViewportPageOffset=function(){var n=document.body,l=document.documentElement;return new s.utils.Coordinate(n.scrollLeft||l.scrollLeft,n.scrollTop||l.scrollTop)},s.utils.style.setElementShown=function(n,l){n.style.display=l?"":"none"},s.utils.style.isRightToLeft=function(n){return"rtl"==s.utils.style.getStyle_(n,"direction")},s.utils.style.getBorderBox=function(n){var l=s.utils.style.getComputedStyle(n,"borderLeftWidth"),u=s.utils.style.getComputedStyle(n,"borderRightWidth"),h=s.utils.style.getComputedStyle(n,"borderTopWidth");return n=s.utils.style.getComputedStyle(n,"borderBottomWidth"),{top:parseFloat(h),right:parseFloat(u),bottom:parseFloat(n),left:parseFloat(l)}},s.utils.style.scrollIntoContainerView=function(n,l,u){n=s.utils.style.getContainerOffsetToScrollInto(n,l,u),l.scrollLeft=n.x,l.scrollTop=n.y},s.utils.style.getContainerOffsetToScrollInto=function(n,l,u){var h=s.utils.style.getPageOffset(n),_=s.utils.style.getPageOffset(l),b=s.utils.style.getBorderBox(l),R=h.x-_.x-b.left;return h=h.y-_.y-b.top,_=s.utils.style.getSizeWithDisplay_(n),n=l.clientWidth-_.width,_=l.clientHeight-_.height,b=l.scrollLeft,l=l.scrollTop,u?(b+=R-n/2,l+=h-_/2):(b+=Math.min(R,Math.max(R-n,0)),l+=Math.min(h,Math.max(h-_,0))),new s.utils.Coordinate(b,l)},s.utils.userAgent={},function(n){function l(h){return-1!=u.indexOf(h.toUpperCase())}s.utils.userAgent.raw=n;var u=s.utils.userAgent.raw.toUpperCase();s.utils.userAgent.IE=l("Trident")||l("MSIE"),s.utils.userAgent.EDGE=l("Edge"),s.utils.userAgent.JAVA_FX=l("JavaFX"),s.utils.userAgent.CHROME=(l("Chrome")||l("CriOS"))&&!s.utils.userAgent.EDGE,s.utils.userAgent.WEBKIT=l("WebKit")&&!s.utils.userAgent.EDGE,s.utils.userAgent.GECKO=l("Gecko")&&!s.utils.userAgent.WEBKIT&&!s.utils.userAgent.IE&&!s.utils.userAgent.EDGE,s.utils.userAgent.ANDROID=l("Android"),n=s.utils.global.navigator&&s.utils.global.navigator.maxTouchPoints,s.utils.userAgent.IPAD=l("iPad")||l("Macintosh")&&0<n,s.utils.userAgent.IPOD=l("iPod"),s.utils.userAgent.IPHONE=l("iPhone")&&!s.utils.userAgent.IPAD&&!s.utils.userAgent.IPOD,s.utils.userAgent.MAC=l("Macintosh"),s.utils.userAgent.TABLET=s.utils.userAgent.IPAD||s.utils.userAgent.ANDROID&&!l("Mobile")||l("Silk"),s.utils.userAgent.MOBILE=!s.utils.userAgent.TABLET&&(s.utils.userAgent.IPOD||s.utils.userAgent.IPHONE||s.utils.userAgent.ANDROID||l("IEMobile"))}(s.utils.global.navigator&&s.utils.global.navigator.userAgent||""),s.utils.noEvent=function(n){n.preventDefault(),n.stopPropagation()},s.utils.isTargetInput=function(n){return"textarea"==n.target.type||"text"==n.target.type||"number"==n.target.type||"email"==n.target.type||"password"==n.target.type||"search"==n.target.type||"tel"==n.target.type||"url"==n.target.type||n.target.isContentEditable||n.target.dataset&&"true"==n.target.dataset.isTextInput},s.utils.getRelativeXY=function(n){var l=new s.utils.Coordinate(0,0),u=n.getAttribute("x");return u&&(l.x=parseInt(u,10)),(u=n.getAttribute("y"))&&(l.y=parseInt(u,10)),(u=(u=n.getAttribute("transform"))&&u.match(s.utils.getRelativeXY.XY_REGEX_))&&(l.x+=Number(u[1]),u[3]&&(l.y+=Number(u[3]))),(n=n.getAttribute("style"))&&-1<n.indexOf("translate")&&(n=n.match(s.utils.getRelativeXY.XY_STYLE_REGEX_))&&(l.x+=Number(n[1]),n[3]&&(l.y+=Number(n[3]))),l},s.utils.getInjectionDivXY_=function(n){for(var l=0,u=0;n;){var h=s.utils.getRelativeXY(n);if(l+=h.x,u+=h.y,-1!=(" "+(n.getAttribute("class")||"")+" ").indexOf(" injectionDiv "))break;n=n.parentNode}return new s.utils.Coordinate(l,u)},s.utils.getRelativeXY.XY_REGEX_=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,s.utils.getRelativeXY.XY_STYLE_REGEX_=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,s.utils.isRightButton=function(n){return!(!n.ctrlKey||!s.utils.userAgent.MAC)||2==n.button},s.utils.mouseToSvg=function(n,l,u){var h=l.createSVGPoint();return h.x=n.clientX,h.y=n.clientY,u||(u=l.getScreenCTM().inverse()),h.matrixTransform(u)},s.utils.getScrollDeltaPixels=function(n){switch(n.deltaMode){default:return{x:n.deltaX,y:n.deltaY};case 1:return{x:n.deltaX*s.LINE_MODE_MULTIPLIER,y:n.deltaY*s.LINE_MODE_MULTIPLIER};case 2:return{x:n.deltaX*s.PAGE_MODE_MULTIPLIER,y:n.deltaY*s.PAGE_MODE_MULTIPLIER}}},s.utils.tokenizeInterpolation=function(n){return s.utils.tokenizeInterpolation_(n,!0)},s.utils.replaceMessageReferences=function(n){return"string"!=typeof n?n:(n=s.utils.tokenizeInterpolation_(n,!1)).length?String(n[0]):""},s.utils.checkMessageReferences=function(n){for(var l=!0,u=s.Msg,h=n.match(/%{BKY_[A-Z]\w*}/gi),_=0;_<h.length;_++)null==u[h[_].toUpperCase().slice(6,-1)]&&(console.warn("No message string for "+h[_]+" in "+n),l=!1);return l},s.utils.tokenizeInterpolation_=function(n,l){var u=[],h=n.split("");h.push("");var _=0;n=[];for(var b=null,R=0;R<h.length;R++){var O=h[R];0==_?"%"==O?((O=n.join(""))&&u.push(O),n.length=0,_=1):n.push(O):1==_?"%"==O?(n.push(O),_=0):l&&"0"<=O&&"9">=O?(_=2,b=O,(O=n.join(""))&&u.push(O),n.length=0):"{"==O?_=3:(n.push("%",O),_=0):2==_?"0"<=O&&"9">=O?b+=O:(u.push(parseInt(b,10)),R--,_=0):3==_&&(""==O?(n.splice(0,0,"%{"),R--,_=0):"}"!=O?n.push(O):(_=n.join(""),/[A-Z]\w*/i.test(_)?(O=_.toUpperCase(),(O=s.utils.string.startsWith(O,"BKY_")?O.substring(4):null)&&O in s.Msg?"string"==typeof(_=s.Msg[O])?Array.prototype.push.apply(u,s.utils.tokenizeInterpolation_(_,l)):u.push(l?String(_):_):u.push("%{"+_+"}")):u.push("%{"+_+"}"),_=n.length=0))}for((O=n.join(""))&&u.push(O),l=[],R=n.length=0;R<u.length;++R)"string"==typeof u[R]?n.push(u[R]):((O=n.join(""))&&l.push(O),n.length=0,l.push(u[R]));return(O=n.join(""))&&l.push(O),n.length=0,l},s.utils.genUid=function(){for(var n=s.utils.genUid.soup_.length,l=[],u=0;20>u;u++)l[u]=s.utils.genUid.soup_.charAt(Math.random()*n);return l.join("")},s.utils.genUid.soup_="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s.utils.is3dSupported=function(){if(void 0!==s.utils.is3dSupported.cached_)return s.utils.is3dSupported.cached_;if(!s.utils.global.getComputedStyle)return!1;var n=document.createElement("p"),l="none",u={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};for(var h in document.body.insertBefore(n,null),u)if(void 0!==n.style[h]){if(n.style[h]="translate3d(1px,1px,1px)",!(l=s.utils.global.getComputedStyle(n)))return document.body.removeChild(n),!1;l=l.getPropertyValue(u[h])}return document.body.removeChild(n),s.utils.is3dSupported.cached_="none"!==l,s.utils.is3dSupported.cached_},s.utils.runAfterPageLoad=function(n){if("object"!=typeof document)throw Error("Blockly.utils.runAfterPageLoad() requires browser document.");if("complete"==document.readyState)n();else var l=setInterval(function(){"complete"==document.readyState&&(clearInterval(l),n())},10)},s.utils.getViewportBBox=function(){var n=s.utils.style.getViewportPageOffset();return new s.utils.Rect(n.y,document.documentElement.clientHeight+n.y,n.x,document.documentElement.clientWidth+n.x)},s.utils.arrayRemove=function(n,l){return-1!=(l=n.indexOf(l))&&(n.splice(l,1),!0)},s.utils.getDocumentScroll=function(){var n=document.documentElement,l=window;return s.utils.userAgent.IE&&l.pageYOffset!=n.scrollTop?new s.utils.Coordinate(n.scrollLeft,n.scrollTop):new s.utils.Coordinate(l.pageXOffset||n.scrollLeft,l.pageYOffset||n.scrollTop)},s.utils.getBlockTypeCounts=function(n,l){var u=Object.create(null),h=n.getDescendants(!0);for(l&&(n=n.getNextBlock())&&(n=h.indexOf(n),h.splice(n,h.length-n)),n=0;l=h[n];n++)u[l.type]?u[l.type]++:u[l.type]=1;return u},s.utils.screenToWsCoordinates=function(n,l){var u=l.x;l=l.y;var h=n.getInjectionDiv().getBoundingClientRect();return u=new s.utils.Coordinate(u-h.left,l-h.top),l=n.getOriginOffsetInPixels(),s.utils.Coordinate.difference(u,l).scale(1/n.scale)},s.utils.parseBlockColour=function(n){var l="string"==typeof n?s.utils.replaceMessageReferences(n):n,u=Number(l);if(!isNaN(u)&&0<=u&&360>=u)return{hue:u,hex:s.utils.colour.hsvToHex(u,s.HSV_SATURATION,255*s.HSV_VALUE)};if(u=s.utils.colour.parse(l))return{hue:null,hex:u};throw u='Invalid colour: "'+l+'"',n!=l&&(u+=' (from "'+n+'")'),Error(u)},s.Touch={},s.Touch.TOUCH_ENABLED="ontouchstart"in s.utils.global||!!(s.utils.global.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!s.utils.global.navigator||!s.utils.global.navigator.maxTouchPoints&&!s.utils.global.navigator.msMaxTouchPoints),s.Touch.touchIdentifier_=null,s.Touch.TOUCH_MAP={},s.utils.global.PointerEvent?s.Touch.TOUCH_MAP={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]}:s.Touch.TOUCH_ENABLED&&(s.Touch.TOUCH_MAP={mousedown:["touchstart"],mousemove:["touchmove"],mouseup:["touchend","touchcancel"]}),s.longPid_=0,s.longStart=function(n,l){s.longStop_(),n.changedTouches&&1!=n.changedTouches.length||(s.longPid_=setTimeout(function(){n.changedTouches&&(n.button=2,n.clientX=n.changedTouches[0].clientX,n.clientY=n.changedTouches[0].clientY),l&&l.handleRightClick(n)},s.LONGPRESS))},s.longStop_=function(){s.longPid_&&(clearTimeout(s.longPid_),s.longPid_=0)},s.Touch.clearTouchIdentifier=function(){s.Touch.touchIdentifier_=null},s.Touch.shouldHandleEvent=function(n){return!s.Touch.isMouseOrTouchEvent(n)||s.Touch.checkTouchIdentifier(n)},s.Touch.getTouchIdentifierFromEvent=function(n){return null!=n.pointerId?n.pointerId:n.changedTouches&&n.changedTouches[0]&&null!=n.changedTouches[0].identifier?n.changedTouches[0].identifier:"mouse"},s.Touch.checkTouchIdentifier=function(n){var l=s.Touch.getTouchIdentifierFromEvent(n);return null!=s.Touch.touchIdentifier_?s.Touch.touchIdentifier_==l:("mousedown"==n.type||"touchstart"==n.type||"pointerdown"==n.type)&&(s.Touch.touchIdentifier_=l,!0)},s.Touch.setClientFromTouch=function(n){if(s.utils.string.startsWith(n.type,"touch")){var l=n.changedTouches[0];n.clientX=l.clientX,n.clientY=l.clientY}},s.Touch.isMouseOrTouchEvent=function(n){return s.utils.string.startsWith(n.type,"touch")||s.utils.string.startsWith(n.type,"mouse")||s.utils.string.startsWith(n.type,"pointer")},s.Touch.isTouchEvent=function(n){return s.utils.string.startsWith(n.type,"touch")||s.utils.string.startsWith(n.type,"pointer")},s.Touch.splitEventByTouches=function(n){var l=[];if(n.changedTouches)for(var u=0;u<n.changedTouches.length;u++)l[u]={type:n.type,changedTouches:[n.changedTouches[u]],target:n.target,stopPropagation:function(){n.stopPropagation()},preventDefault:function(){n.preventDefault()}};else l.push(n);return l},s.browserEvents={},s.browserEvents.conditionalBind=function(n,l,u,h,_,b){var R=!1,O=function(Q){var Y=!_;Q=s.Touch.splitEventByTouches(Q);for(var ne,ue=0;ne=Q[ue];ue++)(!Y||s.Touch.shouldHandleEvent(ne))&&(s.Touch.setClientFromTouch(ne),u?h.call(u,ne):h(ne),R=!0)},H=[];if(s.utils.global.PointerEvent&&l in s.Touch.TOUCH_MAP)for(var G,W=0;G=s.Touch.TOUCH_MAP[l][W];W++)n.addEventListener(G,O,!1),H.push([n,G,O]);else if(n.addEventListener(l,O,!1),H.push([n,l,O]),l in s.Touch.TOUCH_MAP){var Z=function(Q){O(Q),R&&!b&&Q.preventDefault()};for(W=0;G=s.Touch.TOUCH_MAP[l][W];W++)n.addEventListener(G,Z,!1),H.push([n,G,Z])}return H},s.browserEvents.bind=function(n,l,u,h){var _=function(W){u?h.call(u,W):h(W)},b=[];if(s.utils.global.PointerEvent&&l in s.Touch.TOUCH_MAP)for(var O,R=0;O=s.Touch.TOUCH_MAP[l][R];R++)n.addEventListener(O,_,!1),b.push([n,O,_]);else if(n.addEventListener(l,_,!1),b.push([n,l,_]),l in s.Touch.TOUCH_MAP){var H=function(W){if(W.changedTouches&&1==W.changedTouches.length){var G=W.changedTouches[0];W.clientX=G.clientX,W.clientY=G.clientY}_(W),W.preventDefault()};for(R=0;O=s.Touch.TOUCH_MAP[l][R];R++)n.addEventListener(O,H,!1),b.push([n,O,H])}return b},s.browserEvents.unbind=function(n){for(;n.length;){var l=n.pop(),u=l[2];l[0].removeEventListener(l[1],u,!1)}return u},s.ComponentManager=function(){this.componentData_=Object.create(null),this.capabilityToComponentIds_=Object.create(null)},s.ComponentManager.prototype.addComponent=function(n,l){var u=n.component.id;if(!l&&this.componentData_[u])throw Error('Plugin "'+u+'" with capabilities "'+this.componentData_[u].capabilities+'" already added.');this.componentData_[u]=n,l=[];for(var h=0;h<n.capabilities.length;h++){var _=String(n.capabilities[h]).toLowerCase();l.push(_),void 0===this.capabilityToComponentIds_[_]?this.capabilityToComponentIds_[_]=[u]:this.capabilityToComponentIds_[_].push(u)}this.componentData_[u].capabilities=l},s.ComponentManager.prototype.removeComponent=function(n){var l=this.componentData_[n];if(l){for(var u=0;u<l.capabilities.length;u++){var h=String(l.capabilities[u]).toLowerCase();this.capabilityToComponentIds_[h].splice(this.capabilityToComponentIds_[h].indexOf(n),1)}delete this.componentData_[n]}},s.ComponentManager.prototype.addCapability=function(n,l){if(!this.getComponent(n))throw Error('Cannot add capability, "'+l+'". Plugin "'+n+'" has not been added to the ComponentManager');this.hasCapability(n,l)?console.warn('Plugin "'+n+'already has capability "'+l+'"'):(l=String(l).toLowerCase(),this.componentData_[n].capabilities.push(l),this.capabilityToComponentIds_[l].push(n))},s.ComponentManager.prototype.removeCapability=function(n,l){if(!this.getComponent(n))throw Error('Cannot remove capability, "'+l+'". Plugin "'+n+'" has not been added to the ComponentManager');this.hasCapability(n,l)?(l=String(l).toLowerCase(),this.componentData_[n].capabilities.splice(this.componentData_[n].capabilities.indexOf(l),1),this.capabilityToComponentIds_[l].splice(this.capabilityToComponentIds_[l].indexOf(n),1)):console.warn('Plugin "'+n+"doesn't have capability \""+l+'" to remove')},s.ComponentManager.prototype.hasCapability=function(n,l){return l=String(l).toLowerCase(),-1!==this.componentData_[n].capabilities.indexOf(l)},s.ComponentManager.prototype.getComponent=function(n){return this.componentData_[n]&&this.componentData_[n].component},s.ComponentManager.prototype.getComponents=function(n,l){if(n=String(n).toLowerCase(),!(n=this.capabilityToComponentIds_[n]))return[];var u=[];if(l){var h=[],_=this.componentData_;n.forEach(function(b){h.push(_[b])}),h.sort(function(b,R){return b.weight-R.weight}),h.forEach(function(b){u.push(b.component)})}else _=this.componentData_,n.forEach(function(b){u.push(_[b].component)});return u},s.ComponentManager.Capability=function(n){this.name_=n},s.ComponentManager.Capability.prototype.toString=function(){return this.name_},s.ComponentManager.Capability.POSITIONABLE=new s.ComponentManager.Capability("positionable"),s.ComponentManager.Capability.DRAG_TARGET=new s.ComponentManager.Capability("drag_target"),s.ComponentManager.Capability.DELETE_AREA=new s.ComponentManager.Capability("delete_area"),s.ComponentManager.Capability.AUTOHIDEABLE=new s.ComponentManager.Capability("autohideable"),s.utils.Svg=function(n){this.tagName_=n},s.utils.Svg.prototype.toString=function(){return this.tagName_},s.utils.Svg.ANIMATE=new s.utils.Svg("animate"),s.utils.Svg.CIRCLE=new s.utils.Svg("circle"),s.utils.Svg.CLIPPATH=new s.utils.Svg("clipPath"),s.utils.Svg.DEFS=new s.utils.Svg("defs"),s.utils.Svg.FECOMPOSITE=new s.utils.Svg("feComposite"),s.utils.Svg.FECOMPONENTTRANSFER=new s.utils.Svg("feComponentTransfer"),s.utils.Svg.FEFLOOD=new s.utils.Svg("feFlood"),s.utils.Svg.FEFUNCA=new s.utils.Svg("feFuncA"),s.utils.Svg.FEGAUSSIANBLUR=new s.utils.Svg("feGaussianBlur"),s.utils.Svg.FEPOINTLIGHT=new s.utils.Svg("fePointLight"),s.utils.Svg.FESPECULARLIGHTING=new s.utils.Svg("feSpecularLighting"),s.utils.Svg.FILTER=new s.utils.Svg("filter"),s.utils.Svg.FOREIGNOBJECT=new s.utils.Svg("foreignObject"),s.utils.Svg.G=new s.utils.Svg("g"),s.utils.Svg.IMAGE=new s.utils.Svg("image"),s.utils.Svg.LINE=new s.utils.Svg("line"),s.utils.Svg.PATH=new s.utils.Svg("path"),s.utils.Svg.PATTERN=new s.utils.Svg("pattern"),s.utils.Svg.POLYGON=new s.utils.Svg("polygon"),s.utils.Svg.RECT=new s.utils.Svg("rect"),s.utils.Svg.SVG=new s.utils.Svg("svg"),s.utils.Svg.TEXT=new s.utils.Svg("text"),s.utils.Svg.TSPAN=new s.utils.Svg("tspan"),s.utils.dom={},s.utils.dom.SVG_NS="http://www.w3.org/2000/svg",s.utils.dom.HTML_NS="http://www.w3.org/1999/xhtml",s.utils.dom.XLINK_NS="http://www.w3.org/1999/xlink",s.utils.dom.NodeType={ELEMENT_NODE:1,TEXT_NODE:3,COMMENT_NODE:8,DOCUMENT_POSITION_CONTAINED_BY:16},s.utils.dom.cacheWidths_=null,s.utils.dom.cacheReference_=0,s.utils.dom.canvasContext_=null,s.utils.dom.createSvgElement=function(n,l,u){for(var h in n=document.createElementNS(s.utils.dom.SVG_NS,String(n)),l)n.setAttribute(h,l[h]);return document.body.runtimeStyle&&(n.runtimeStyle=n.currentStyle=n.style),u&&u.appendChild(n),n},s.utils.dom.addClass=function(n,l){var u=n.getAttribute("class")||"";return-1==(" "+u+" ").indexOf(" "+l+" ")&&(u&&(u+=" "),n.setAttribute("class",u+l),!0)},s.utils.dom.removeClasses=function(n,l){l=l.split(" ");for(var u=0;u<l.length;u++)s.utils.dom.removeClass(n,l[u])},s.utils.dom.removeClass=function(n,l){var u=n.getAttribute("class");if(-1==(" "+u+" ").indexOf(" "+l+" "))return!1;u=u.split(/\s+/);for(var h=0;h<u.length;h++)u[h]&&u[h]!=l||(u.splice(h,1),h--);return u.length?n.setAttribute("class",u.join(" ")):n.removeAttribute("class"),!0},s.utils.dom.hasClass=function(n,l){return-1!=(" "+n.getAttribute("class")+" ").indexOf(" "+l+" ")},s.utils.dom.removeNode=function(n){return n&&n.parentNode?n.parentNode.removeChild(n):null},s.utils.dom.insertAfter=function(n,l){var u=l.nextSibling;if(!(l=l.parentNode))throw Error("Reference node has no parent.");u?l.insertBefore(n,u):l.appendChild(n)},s.utils.dom.containsNode=function(n,l){return!!(n.compareDocumentPosition(l)&s.utils.dom.NodeType.DOCUMENT_POSITION_CONTAINED_BY)},s.utils.dom.setCssTransform=function(n,l){n.style.transform=l,n.style["-webkit-transform"]=l},s.utils.dom.startTextWidthCache=function(){s.utils.dom.cacheReference_++,s.utils.dom.cacheWidths_||(s.utils.dom.cacheWidths_=Object.create(null))},s.utils.dom.stopTextWidthCache=function(){s.utils.dom.cacheReference_--,s.utils.dom.cacheReference_||(s.utils.dom.cacheWidths_=null)},s.utils.dom.getTextWidth=function(n){var u,l=n.textContent+"\n"+n.className.baseVal;if(s.utils.dom.cacheWidths_&&(u=s.utils.dom.cacheWidths_[l]))return u;try{u=s.utils.userAgent.IE||s.utils.userAgent.EDGE?n.getBBox().width:n.getComputedTextLength()}catch(h){return 8*n.textContent.length}return s.utils.dom.cacheWidths_&&(s.utils.dom.cacheWidths_[l]=u),u},s.utils.dom.getFastTextWidth=function(n,l,u,h){return s.utils.dom.getFastTextWidthWithSizeString(n,l+"pt",u,h)},s.utils.dom.getFastTextWidthWithSizeString=function(n,l,u,h){var b,_=n.textContent;return n=_+"\n"+n.className.baseVal,s.utils.dom.cacheWidths_&&(b=s.utils.dom.cacheWidths_[n])||(s.utils.dom.canvasContext_||((b=document.createElement("canvas")).className="blocklyComputeCanvas",document.body.appendChild(b),s.utils.dom.canvasContext_=b.getContext("2d")),s.utils.dom.canvasContext_.font=u+" "+l+" "+h,b=s.utils.dom.canvasContext_.measureText(_).width,s.utils.dom.cacheWidths_&&(s.utils.dom.cacheWidths_[n]=b)),b},s.utils.dom.measureFontMetrics=function(n,l,u,h){var _=document.createElement("span");_.style.font=u+" "+l+" "+h,_.textContent=n,(n=document.createElement("div")).style.width="1px",n.style.height="0px",(l=document.createElement("div")).setAttribute("style","position: fixed; top: 0; left: 0; display: flex;"),l.appendChild(_),l.appendChild(n),document.body.appendChild(l);try{u={},l.style.alignItems="baseline",u.baseline=n.offsetTop-_.offsetTop,l.style.alignItems="flex-end",u.height=n.offsetTop-_.offsetTop}finally{document.body.removeChild(l)}return u},s.utils.math={},s.utils.math.toRadians=function(n){return n*Math.PI/180},s.utils.math.toDegrees=function(n){return 180*n/Math.PI},s.utils.math.clamp=function(n,l,u){if(u<n){var h=u;u=n,n=h}return Math.max(n,Math.min(l,u))},s.DropDownDiv=function(){},s.DropDownDiv.boundsElement_=null,s.DropDownDiv.owner_=null,s.DropDownDiv.positionToField_=null,s.DropDownDiv.ARROW_SIZE=16,s.DropDownDiv.BORDER_SIZE=1,s.DropDownDiv.ARROW_HORIZONTAL_PADDING=12,s.DropDownDiv.PADDING_Y=16,s.DropDownDiv.ANIMATION_TIME=.25,s.DropDownDiv.animateOutTimer_=null,s.DropDownDiv.onHide_=null,s.DropDownDiv.rendererClassName_="",s.DropDownDiv.themeClassName_="",s.DropDownDiv.createDom=function(){if(!s.DropDownDiv.DIV_){var n=document.createElement("div");n.className="blocklyDropDownDiv",(s.parentContainer||document.body).appendChild(n),s.DropDownDiv.DIV_=n;var l=document.createElement("div");l.className="blocklyDropDownContent",n.appendChild(l),s.DropDownDiv.content_=l,(l=document.createElement("div")).className="blocklyDropDownArrow",n.appendChild(l),s.DropDownDiv.arrow_=l,s.DropDownDiv.DIV_.style.opacity=0,s.DropDownDiv.DIV_.style.transition="transform "+s.DropDownDiv.ANIMATION_TIME+"s, opacity "+s.DropDownDiv.ANIMATION_TIME+"s",n.addEventListener("focusin",function(){s.utils.dom.addClass(n,"blocklyFocused")}),n.addEventListener("focusout",function(){s.utils.dom.removeClass(n,"blocklyFocused")})}},s.DropDownDiv.setBoundsElement=function(n){s.DropDownDiv.boundsElement_=n},s.DropDownDiv.getContentDiv=function(){return s.DropDownDiv.content_},s.DropDownDiv.clearContent=function(){s.DropDownDiv.content_.textContent="",s.DropDownDiv.content_.style.width=""},s.DropDownDiv.setColour=function(n,l){s.DropDownDiv.DIV_.style.backgroundColor=n,s.DropDownDiv.DIV_.style.borderColor=l},s.DropDownDiv.showPositionedByBlock=function(n,l,u,h){return s.DropDownDiv.showPositionedByRect_(s.DropDownDiv.getScaledBboxOfBlock_(l),n,u,h)},s.DropDownDiv.showPositionedByField=function(n,l,u){return s.DropDownDiv.positionToField_=!0,s.DropDownDiv.showPositionedByRect_(s.DropDownDiv.getScaledBboxOfField_(n),n,l,u)},s.DropDownDiv.getScaledBboxOfBlock_=function(n){var l=n.getSvgRoot(),u=l.getBBox(),h=n.workspace.scale;return n=u.height*h,u=u.width*h,l=s.utils.style.getPageOffset(l),new s.utils.Rect(l.y,l.y+n,l.x,l.x+u)},s.DropDownDiv.getScaledBboxOfField_=function(n){return n=n.getScaledBBox(),new s.utils.Rect(n.top,n.bottom,n.left,n.right)},s.DropDownDiv.showPositionedByRect_=function(n,l,u,h){var _=n.left+(n.right-n.left)/2,b=n.bottom;n=n.top,h&&(n+=h);for(var R=(h=l.getSourceBlock()).workspace;R.options.parentWorkspace;)R=R.options.parentWorkspace;return s.DropDownDiv.setBoundsElement(R.getParentSvg().parentNode),s.DropDownDiv.show(l,h.RTL,_,b,_,n,u)},s.DropDownDiv.show=function(n,l,u,h,_,b,R){return s.DropDownDiv.owner_=n,s.DropDownDiv.onHide_=R||null,(n=s.DropDownDiv.DIV_).style.direction=l?"rtl":"ltr",l=s.getMainWorkspace(),s.DropDownDiv.rendererClassName_=l.getRenderer().getClassName(),s.DropDownDiv.themeClassName_=l.getTheme().getClassName(),s.utils.dom.addClass(n,s.DropDownDiv.rendererClassName_),s.utils.dom.addClass(n,s.DropDownDiv.themeClassName_),s.DropDownDiv.positionInternal_(u,h,_,b)},s.DropDownDiv.getBoundsInfo_=function(){var n=s.utils.style.getPageOffset(s.DropDownDiv.boundsElement_),l=s.utils.style.getSize(s.DropDownDiv.boundsElement_);return{left:n.x,right:n.x+l.width,top:n.y,bottom:n.y+l.height,width:l.width,height:l.height}},s.DropDownDiv.getPositionMetrics_=function(n,l,u,h){var _=s.DropDownDiv.getBoundsInfo_(),b=s.utils.style.getSize(s.DropDownDiv.DIV_);return l+b.height<_.bottom?s.DropDownDiv.getPositionBelowMetrics_(n,l,_,b):h-b.height>_.top?s.DropDownDiv.getPositionAboveMetrics_(u,h,_,b):l+b.height<document.documentElement.clientHeight?s.DropDownDiv.getPositionBelowMetrics_(n,l,_,b):h-b.height>document.documentElement.clientTop?s.DropDownDiv.getPositionAboveMetrics_(u,h,_,b):s.DropDownDiv.getPositionTopOfPageMetrics_(n,_,b)},s.DropDownDiv.getPositionBelowMetrics_=function(n,l,u,h){return{initialX:(n=s.DropDownDiv.getPositionX(n,u.left,u.right,h.width)).divX,initialY:l,finalX:n.divX,finalY:l+s.DropDownDiv.PADDING_Y,arrowX:n.arrowX,arrowY:-(s.DropDownDiv.ARROW_SIZE/2+s.DropDownDiv.BORDER_SIZE),arrowAtTop:!0,arrowVisible:!0}},s.DropDownDiv.getPositionAboveMetrics_=function(n,l,u,h){return{initialX:(n=s.DropDownDiv.getPositionX(n,u.left,u.right,h.width)).divX,initialY:l-h.height,finalX:n.divX,finalY:l-h.height-s.DropDownDiv.PADDING_Y,arrowX:n.arrowX,arrowY:h.height-2*s.DropDownDiv.BORDER_SIZE-s.DropDownDiv.ARROW_SIZE/2,arrowAtTop:!1,arrowVisible:!0}},s.DropDownDiv.getPositionTopOfPageMetrics_=function(n,l,u){return{initialX:(n=s.DropDownDiv.getPositionX(n,l.left,l.right,u.width)).divX,initialY:0,finalX:n.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},s.DropDownDiv.getPositionX=function(n,l,u,h){var _=n;return n=s.utils.math.clamp(l,n-h/2,u-h),{arrowX:h=s.utils.math.clamp(l=s.DropDownDiv.ARROW_HORIZONTAL_PADDING,(_-=s.DropDownDiv.ARROW_SIZE/2)-n,h-l-s.DropDownDiv.ARROW_SIZE),divX:n}},s.DropDownDiv.isVisible=function(){return!!s.DropDownDiv.owner_},s.DropDownDiv.hideIfOwner=function(n,l){return s.DropDownDiv.owner_===n&&(l?s.DropDownDiv.hideWithoutAnimation():s.DropDownDiv.hide(),!0)},s.DropDownDiv.hide=function(){var n=s.DropDownDiv.DIV_;n.style.transform="translate(0, 0)",n.style.opacity=0,s.DropDownDiv.animateOutTimer_=setTimeout(function(){s.DropDownDiv.hideWithoutAnimation()},1e3*s.DropDownDiv.ANIMATION_TIME),s.DropDownDiv.onHide_&&(s.DropDownDiv.onHide_(),s.DropDownDiv.onHide_=null)},s.DropDownDiv.hideWithoutAnimation=function(){if(s.DropDownDiv.isVisible()){s.DropDownDiv.animateOutTimer_&&clearTimeout(s.DropDownDiv.animateOutTimer_);var n=s.DropDownDiv.DIV_;n.style.transform="",n.style.left="",n.style.top="",n.style.opacity=0,n.style.display="none",n.style.backgroundColor="",n.style.borderColor="",s.DropDownDiv.onHide_&&(s.DropDownDiv.onHide_(),s.DropDownDiv.onHide_=null),s.DropDownDiv.clearContent(),s.DropDownDiv.owner_=null,s.DropDownDiv.rendererClassName_&&(s.utils.dom.removeClass(n,s.DropDownDiv.rendererClassName_),s.DropDownDiv.rendererClassName_=""),s.DropDownDiv.themeClassName_&&(s.utils.dom.removeClass(n,s.DropDownDiv.themeClassName_),s.DropDownDiv.themeClassName_=""),s.getMainWorkspace().markFocused()}},s.DropDownDiv.positionInternal_=function(n,l,u,h){(n=s.DropDownDiv.getPositionMetrics_(n,l,u,h)).arrowVisible?(s.DropDownDiv.arrow_.style.display="",s.DropDownDiv.arrow_.style.transform="translate("+n.arrowX+"px,"+n.arrowY+"px) rotate(45deg)",s.DropDownDiv.arrow_.setAttribute("class",n.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):s.DropDownDiv.arrow_.style.display="none",l=Math.floor(n.initialX),u=Math.floor(n.initialY),h=Math.floor(n.finalX);var _=Math.floor(n.finalY),b=s.DropDownDiv.DIV_;return b.style.left=l+"px",b.style.top=u+"px",b.style.display="block",b.style.opacity=1,b.style.transform="translate("+(h-l)+"px,"+(_-u)+"px)",!!n.arrowAtTop},s.DropDownDiv.repositionForWindowResize=function(){if(s.DropDownDiv.owner_){var n=s.DropDownDiv.owner_,l=n.getSourceBlock();n=s.DropDownDiv.positionToField_?s.DropDownDiv.getScaledBboxOfField_(n):s.DropDownDiv.getScaledBboxOfBlock_(l),s.DropDownDiv.positionInternal_(l=n.left+(n.right-n.left)/2,n.bottom,l,n.top)}else s.DropDownDiv.hide()},s.registry={},s.registry.typeMap_=Object.create(null),s.registry.DEFAULT="default",s.registry.Type=function(n){this.name_=n},s.registry.Type.prototype.toString=function(){return this.name_},s.registry.Type.CONNECTION_CHECKER=new s.registry.Type("connectionChecker"),s.registry.Type.CURSOR=new s.registry.Type("cursor"),s.registry.Type.EVENT=new s.registry.Type("event"),s.registry.Type.FIELD=new s.registry.Type("field"),s.registry.Type.RENDERER=new s.registry.Type("renderer"),s.registry.Type.TOOLBOX=new s.registry.Type("toolbox"),s.registry.Type.THEME=new s.registry.Type("theme"),s.registry.Type.TOOLBOX_ITEM=new s.registry.Type("toolboxItem"),s.registry.Type.FLYOUTS_VERTICAL_TOOLBOX=new s.registry.Type("flyoutsVerticalToolbox"),s.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX=new s.registry.Type("flyoutsHorizontalToolbox"),s.registry.Type.METRICS_MANAGER=new s.registry.Type("metricsManager"),s.registry.Type.BLOCK_DRAGGER=new s.registry.Type("blockDragger"),s.registry.register=function(n,l,u,h){if(!(n instanceof s.registry.Type)&&"string"!=typeof n||""==String(n).trim())throw Error('Invalid type "'+n+'". The type must be a non-empty string or a Blockly.registry.Type.');if(n=String(n).toLowerCase(),"string"!=typeof l||""==l.trim())throw Error('Invalid name "'+l+'". The name must be a non-empty string.');if(l=l.toLowerCase(),!u)throw Error("Can not register a null value");var _=s.registry.typeMap_[n];if(_||(_=s.registry.typeMap_[n]=Object.create(null)),s.registry.validate_(n,u),!h&&_[l])throw Error('Name "'+l+'" with type "'+n+'" already registered.');_[l]=u},s.registry.validate_=function(n,l){if(n===String(s.registry.Type.FIELD)&&"function"!=typeof l.fromJson)throw Error('Type "'+n+'" must have a fromJson function')},s.registry.unregister=function(n,l){n=String(n).toLowerCase(),l=l.toLowerCase();var u=s.registry.typeMap_[n];u&&u[l]?delete s.registry.typeMap_[n][l]:console.warn("Unable to unregister ["+l+"]["+n+"] from the registry.")},s.registry.getItem_=function(n,l,u){n=String(n).toLowerCase(),l=l.toLowerCase();var h=s.registry.typeMap_[n];if(!h||!h[l]){if(l="Unable to find ["+l+"]["+n+"] in the registry.",u)throw Error(l+" You must require or register a "+n+" plugin.");return console.warn(l),null}return h[l]},s.registry.hasItem=function(n,l){return n=String(n).toLowerCase(),l=l.toLowerCase(),!!(n=s.registry.typeMap_[n])&&!!n[l]},s.registry.getClass=function(n,l,u){return s.registry.getItem_(n,l,u)},s.registry.getObject=function(n,l,u){return s.registry.getItem_(n,l,u)},s.registry.getClassFromOptions=function(n,l,u){return"function"==typeof(l=l.plugins[n.toString()]||s.registry.DEFAULT)?l:s.registry.getClass(n,l,u)},s.Events={},s.Events.group_="",s.Events.recordUndo=!0,s.Events.disabled_=0,s.Events.CREATE="create",s.Events.BLOCK_CREATE=s.Events.CREATE,s.Events.DELETE="delete",s.Events.BLOCK_DELETE=s.Events.DELETE,s.Events.CHANGE="change",s.Events.BLOCK_CHANGE=s.Events.CHANGE,s.Events.MOVE="move",s.Events.BLOCK_MOVE=s.Events.MOVE,s.Events.VAR_CREATE="var_create",s.Events.VAR_DELETE="var_delete",s.Events.VAR_RENAME="var_rename",s.Events.UI="ui",s.Events.BLOCK_DRAG="drag",s.Events.SELECTED="selected",s.Events.CLICK="click",s.Events.MARKER_MOVE="marker_move",s.Events.BUBBLE_OPEN="bubble_open",s.Events.TRASHCAN_OPEN="trashcan_open",s.Events.TOOLBOX_ITEM_SELECT="toolbox_item_select",s.Events.THEME_CHANGE="theme_change",s.Events.VIEWPORT_CHANGE="viewport_change",s.Events.COMMENT_CREATE="comment_create",s.Events.COMMENT_DELETE="comment_delete",s.Events.COMMENT_CHANGE="comment_change",s.Events.COMMENT_MOVE="comment_move",s.Events.FINISHED_LOADING="finished_loading",s.Events.BUMP_EVENTS=[s.Events.BLOCK_CREATE,s.Events.BLOCK_MOVE,s.Events.COMMENT_CREATE,s.Events.COMMENT_MOVE],s.Events.FIRE_QUEUE_=[],s.Events.fire=function(n){s.Events.isEnabled()&&(s.Events.FIRE_QUEUE_.length||setTimeout(s.Events.fireNow_,0),s.Events.FIRE_QUEUE_.push(n))},s.Events.fireNow_=function(){for(var u,n=s.Events.filter(s.Events.FIRE_QUEUE_,!0),l=s.Events.FIRE_QUEUE_.length=0;u=n[l];l++)if(u.workspaceId){var h=s.Workspace.getById(u.workspaceId);h&&h.fireChangeListener(u)}},s.Events.filter=function(n,l){n=n.slice(),l||n.reverse();for(var b,u=[],h=Object.create(null),_=0;b=n[_];_++)if(!b.isNull()){var R=[b.isUiEvent?s.Events.UI:b.type,b.blockId,b.workspaceId].join(" "),O=h[R],H=O?O.event:null;O?b.type==s.Events.MOVE&&O.index==_-1?(H.newParentId=b.newParentId,H.newInputName=b.newInputName,H.newCoordinate=b.newCoordinate,O.index=_):b.type==s.Events.CHANGE&&b.element==H.element&&b.name==H.name?H.newValue=b.newValue:b.type==s.Events.VIEWPORT_CHANGE?(H.viewTop=b.viewTop,H.viewLeft=b.viewLeft,H.scale=b.scale,H.oldScale=b.oldScale):(b.type!=s.Events.CLICK||H.type!=s.Events.BUBBLE_OPEN)&&(h[R]={event:b,index:_},u.push(b)):(h[R]={event:b,index:_},u.push(b))}for(n=u.filter(function(W){return!W.isNull()}),l||n.reverse(),_=1;b=n[_];_++)b.type==s.Events.CHANGE&&"mutation"==b.element&&n.unshift(n.splice(_,1)[0]);return n},s.Events.clearPendingUndo=function(){for(var l,n=0;l=s.Events.FIRE_QUEUE_[n];n++)l.recordUndo=!1},s.Events.disable=function(){s.Events.disabled_++},s.Events.enable=function(){s.Events.disabled_--},s.Events.isEnabled=function(){return 0==s.Events.disabled_},s.Events.getGroup=function(){return s.Events.group_},s.Events.setGroup=function(n){s.Events.group_="boolean"==typeof n?n?s.utils.genUid():"":n},s.Events.getDescendantIds=function(n){var l=[];n=n.getDescendants(!1);for(var h,u=0;h=n[u];u++)l[u]=h.id;return l},s.Events.fromJson=function(n,l){var u=s.Events.get(n.type);if(!u)throw Error("Unknown event type.");return(u=new u).fromJson(n),u.workspaceId=l.id,u},s.Events.get=function(n){return s.registry.getClass(s.registry.Type.EVENT,n)},s.Events.disableOrphans=function(n){if((n.type==s.Events.MOVE||n.type==s.Events.CREATE)&&n.workspaceId){var l=s.Workspace.getById(n.workspaceId),u=l.getBlockById(n.blockId);if(u){n=s.Events.recordUndo;try{s.Events.recordUndo=!1;var h=u.getParent();if(h&&h.isEnabled()){var b,_=u.getDescendants(!1);for(l=0;b=_[l];l++)b.setEnabled(!0)}else if((u.outputConnection||u.previousConnection)&&!l.isDragging())do{u.setEnabled(!1),u=u.getNextBlock()}while(u)}finally{s.Events.recordUndo=n}}}},s.Events.Abstract=function(){this.isBlank=null,this.workspaceId=void 0,this.group=s.Events.getGroup(),this.recordUndo=s.Events.recordUndo},s.Events.Abstract.prototype.isUiEvent=!1,s.Events.Abstract.prototype.toJson=function(){var n={type:this.type};return this.group&&(n.group=this.group),n},s.Events.Abstract.prototype.fromJson=function(n){this.isBlank=!1,this.group=n.group},s.Events.Abstract.prototype.isNull=function(){return!1},s.Events.Abstract.prototype.run=function(n){},s.Events.Abstract.prototype.getEventWorkspace_=function(){if(this.workspaceId)var n=s.Workspace.getById(this.workspaceId);if(!n)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return n},s.utils.object={},s.utils.object.inherits=function(n,l){n.superClass_=l.prototype,n.prototype=Object.create(l.prototype),n.prototype.constructor=n},s.utils.object.mixin=function(n,l){for(var u in l)n[u]=l[u]},s.utils.object.deepMerge=function(n,l){for(var u in l)n[u]=null!=l[u]&&"object"==typeof l[u]?s.utils.object.deepMerge(n[u]||Object.create(null),l[u]):l[u];return n},s.utils.object.values=function(n){return Object.values?Object.values(n):Object.keys(n).map(function(l){return n[l]})},s.utils.xml={},s.utils.xml.NAME_SPACE="https://developers.google.com/blockly/xml",s.utils.xml.document=function(){return document},s.utils.xml.createElement=function(n){return s.utils.xml.document().createElementNS(s.utils.xml.NAME_SPACE,n)},s.utils.xml.createTextNode=function(n){return s.utils.xml.document().createTextNode(n)},s.utils.xml.textToDomDocument=function(n){return(new DOMParser).parseFromString(n,"text/xml")},s.utils.xml.domToText=function(n){return(new XMLSerializer).serializeToString(n)},s.inputTypes={VALUE:s.connectionTypes.INPUT_VALUE,STATEMENT:s.connectionTypes.NEXT_STATEMENT,DUMMY:5},s.Xml={},s.Xml.workspaceToDom=function(n,l){var u=s.utils.xml.createElement("xml"),h=s.Xml.variablesToDom(s.Variables.allUsedVarModels(n));h.hasChildNodes()&&u.appendChild(h);var b,_=n.getTopComments(!0);for(h=0;b=_[h];h++)u.appendChild(b.toXmlWithXY(l));for(n=n.getTopBlocks(!0),h=0;_=n[h];h++)u.appendChild(s.Xml.blockToDomWithXY(_,l));return u},s.Xml.variablesToDom=function(n){for(var h,l=s.utils.xml.createElement("variables"),u=0;h=n[u];u++){var _=s.utils.xml.createElement("variable");_.appendChild(s.utils.xml.createTextNode(h.name)),h.type&&_.setAttribute("type",h.type),_.id=h.getId(),l.appendChild(_)}return l},s.Xml.blockToDomWithXY=function(n,l){if(n.isInsertionMarker()&&!(n=n.getChildren(!1)[0]))return new DocumentFragment;var u;n.workspace.RTL&&(u=n.workspace.getWidth()),l=s.Xml.blockToDom(n,l);var h=n.getRelativeToSurfaceXY();return l.setAttribute("x",Math.round(n.workspace.RTL?u-h.x:h.x)),l.setAttribute("y",Math.round(h.y)),l},s.Xml.fieldToDom_=function(n){if(n.isSerializable()){var l=s.utils.xml.createElement("field");return l.setAttribute("name",n.name||""),n.toXml(l)}return null},s.Xml.allFieldsToDom_=function(n,l){for(var h,u=0;h=n.inputList[u];u++)for(var b,_=0;b=h.fieldRow[_];_++)(b=s.Xml.fieldToDom_(b))&&l.appendChild(b)},s.Xml.blockToDom=function(n,l){if(n.isInsertionMarker())return(n=n.getChildren(!1)[0])?s.Xml.blockToDom(n):new DocumentFragment;var u=s.utils.xml.createElement(n.isShadow()?"shadow":"block");if(u.setAttribute("type",n.type),l||u.setAttribute("id",n.id),n.mutationToDom){var h=n.mutationToDom();h&&(h.hasChildNodes()||h.hasAttributes())&&u.appendChild(h)}if(s.Xml.allFieldsToDom_(n,u),h=n.getCommentText()){var _=n.commentModel.size,b=n.commentModel.pinned,R=s.utils.xml.createElement("comment");R.appendChild(s.utils.xml.createTextNode(h)),R.setAttribute("pinned",b),R.setAttribute("h",_.height),R.setAttribute("w",_.width),u.appendChild(R)}for(n.data&&((h=s.utils.xml.createElement("data")).appendChild(s.utils.xml.createTextNode(n.data)),u.appendChild(h)),h=0;_=n.inputList[h];h++){var O;if(b=!0,_.type!=s.inputTypes.DUMMY){var H=_.connection.targetBlock();_.type==s.inputTypes.VALUE?O=s.utils.xml.createElement("value"):_.type==s.inputTypes.STATEMENT&&(O=s.utils.xml.createElement("statement")),!(R=_.connection.getShadowDom())||H&&H.isShadow()||O.appendChild(s.Xml.cloneShadow_(R,l)),H&&(R=s.Xml.blockToDom(H,l)).nodeType==s.utils.dom.NodeType.ELEMENT_NODE&&(O.appendChild(R),b=!1),O.setAttribute("name",_.name),b||u.appendChild(O)}}return null!=n.inputsInline&&n.inputsInline!=n.inputsInlineDefault&&u.setAttribute("inline",n.inputsInline),n.isCollapsed()&&u.setAttribute("collapsed",!0),n.isEnabled()||u.setAttribute("disabled",!0),n.isDeletable()||n.isShadow()||u.setAttribute("deletable",!1),n.isMovable()||n.isShadow()||u.setAttribute("movable",!1),n.isEditable()||u.setAttribute("editable",!1),(h=n.getNextBlock())&&(R=s.Xml.blockToDom(h,l)).nodeType==s.utils.dom.NodeType.ELEMENT_NODE&&((O=s.utils.xml.createElement("next")).appendChild(R),u.appendChild(O)),!(R=n.nextConnection&&n.nextConnection.getShadowDom())||h&&h.isShadow()||O.appendChild(s.Xml.cloneShadow_(R,l)),u},s.Xml.cloneShadow_=function(n,l){for(var h,u=n=n.cloneNode(!0);u;)if(l&&"shadow"==u.nodeName&&u.removeAttribute("id"),u.firstChild)u=u.firstChild;else{for(;u&&!u.nextSibling;)h=u,u=u.parentNode,h.nodeType==s.utils.dom.NodeType.TEXT_NODE&&""==h.data.trim()&&u.firstChild!=h&&s.utils.dom.removeNode(h);u&&(h=u,u=u.nextSibling,h.nodeType==s.utils.dom.NodeType.TEXT_NODE&&""==h.data.trim()&&s.utils.dom.removeNode(h))}return n},s.Xml.domToText=function(n){return s.utils.xml.domToText(n).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},s.Xml.domToPrettyText=function(n){n=s.Xml.domToText(n).split("<");for(var l="",u=1;u<n.length;u++){var h=n[u];"/"==h[0]&&(l=l.substring(2)),n[u]=l+"<"+h,"/"!=h[0]&&"/>"!=h.slice(-2)&&(l+="  ")}return(n=(n=n.join("\n")).replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>")).replace(/^\n/,"")},s.Xml.textToDom=function(n){var l=s.utils.xml.textToDomDocument(n);if(!l||!l.documentElement||l.getElementsByTagName("parsererror").length)throw Error("textToDom was unable to parse: "+n);return l.documentElement},s.Xml.clearWorkspaceAndLoadFromXml=function(n,l){return l.setResizesEnabled(!1),l.clear(),n=s.Xml.domToWorkspace(n,l),l.setResizesEnabled(!0),n},s.Xml.domToWorkspace=function(n,l){if(n instanceof s.Workspace){var u=n;n=l,l=u,console.warn("Deprecated call to Blockly.Xml.domToWorkspace, swap the arguments.")}var h;l.RTL&&(h=l.getWidth()),u=[],s.utils.dom.startTextWidthCache();var _=s.Events.getGroup();_||s.Events.setGroup(!0),l.setResizesEnabled&&l.setResizesEnabled(!1);var b=!0;try{for(var O,R=0;O=n.childNodes[R];R++){var H=O.nodeName.toLowerCase(),W=O;if("block"==H||"shadow"==H&&!s.Events.recordUndo){var G=s.Xml.domToBlock(W,l);u.push(G.id);var Z=W.hasAttribute("x")?parseInt(W.getAttribute("x"),10):10,Q=W.hasAttribute("y")?parseInt(W.getAttribute("y"),10):10;isNaN(Z)||isNaN(Q)||G.moveBy(l.RTL?h-Z:Z,Q),b=!1}else{if("shadow"==H)throw TypeError("Shadow block cannot be a top-level block.");if("comment"==H)l.rendered?s.WorkspaceCommentSvg?s.WorkspaceCommentSvg.fromXml(W,l,h):console.warn("Missing require for Blockly.WorkspaceCommentSvg, ignoring workspace comment."):s.WorkspaceComment?s.WorkspaceComment.fromXml(W,l):console.warn("Missing require for Blockly.WorkspaceComment, ignoring workspace comment.");else if("variables"==H){if(!b)throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");s.Xml.domToVariables(W,l),b=!1}}}}finally{_||s.Events.setGroup(!1),s.utils.dom.stopTextWidthCache()}return l.setResizesEnabled&&l.setResizesEnabled(!0),s.Events.fire(new(s.Events.get(s.Events.FINISHED_LOADING))(l)),u},s.Xml.appendDomToWorkspace=function(n,l){var u;if(Object.prototype.hasOwnProperty.call(l,"scale")&&(u=l.getBlocksBoundingBox()),n=s.Xml.domToWorkspace(n,l),u&&u.top!=u.bottom){var h=u.bottom,_=l.RTL?u.right:u.left,b=1/0,R=-1/0,O=1/0;for(u=0;u<n.length;u++){var H=l.getBlockById(n[u]).getRelativeToSurfaceXY();H.y<O&&(O=H.y),H.x<b&&(b=H.x),H.x>R&&(R=H.x)}for(h=h-O+10,_=l.RTL?_-R:_-b,u=0;u<n.length;u++)l.getBlockById(n[u]).moveBy(_,h)}return n},s.Xml.domToBlock=function(n,l){if(n instanceof s.Workspace){var u=n;n=l,l=u,console.warn("Deprecated call to Blockly.Xml.domToBlock, swap the arguments.")}s.Events.disable(),u=l.getAllVariables();try{var h=s.Xml.domToBlockHeadless_(n,l),_=h.getDescendants(!1);if(l.rendered){h.setConnectionTracking(!1);for(var b=_.length-1;0<=b;b--)_[b].initSvg();for(b=_.length-1;0<=b;b--)_[b].render(!1);setTimeout(function(){h.disposed||h.setConnectionTracking(!0)},1),h.updateDisabled(),l.resizeContents()}else for(b=_.length-1;0<=b;b--)_[b].initModel()}finally{s.Events.enable()}if(s.Events.isEnabled()){for(n=s.Variables.getAddedVariables(l,u),b=0;b<n.length;b++)l=n[b],s.Events.fire(new(s.Events.get(s.Events.VAR_CREATE))(l));s.Events.fire(new(s.Events.get(s.Events.CREATE))(h))}return h},s.Xml.domToVariables=function(n,l){for(var h,u=0;h=n.childNodes[u];u++)if(h.nodeType==s.utils.dom.NodeType.ELEMENT_NODE){var _=h.getAttribute("type"),b=h.getAttribute("id");l.createVariable(h.textContent,_,b)}},s.Xml.mapSupportedXmlTags_=function(n){for(var h,l={mutation:[],comment:[],data:[],field:[],input:[],next:[]},u=0;h=n.childNodes[u];u++)if(h.nodeType!=s.utils.dom.NodeType.TEXT_NODE)switch(h.nodeName.toLowerCase()){case"mutation":l.mutation.push(h);break;case"comment":if(!s.Comment){console.warn("Missing require for Blockly.Comment, ignoring block comment.");break}l.comment.push(h);break;case"data":l.data.push(h);break;case"title":case"field":l.field.push(h);break;case"value":case"statement":l.input.push(h);break;case"next":l.next.push(h);break;default:console.warn("Ignoring unknown tag: "+h.nodeName)}return l},s.Xml.applyMutationTagNodes_=function(n,l){for(var _,u=!1,h=0;_=n[h];h++)l.domToMutation&&(l.domToMutation(_),l.initSvg&&(u=!0));return u},s.Xml.applyCommentTagNodes_=function(n,l){for(var h,u=0;h=n[u];u++){var _=h.textContent,b="true"==h.getAttribute("pinned"),R=parseInt(h.getAttribute("w"),10);h=parseInt(h.getAttribute("h"),10),l.setCommentText(_),l.commentModel.pinned=b,isNaN(R)||isNaN(h)||(l.commentModel.size=new s.utils.Size(R,h)),b&&l.getCommentIcon&&!l.isInFlyout&&setTimeout(function(){l.getCommentIcon().setVisible(!0)},1)}},s.Xml.applyDataTagNodes_=function(n,l){for(var h,u=0;h=n[u];u++)l.data=h.textContent},s.Xml.applyFieldTagNodes_=function(n,l){for(var h,u=0;h=n[u];u++){var _=h.getAttribute("name");s.Xml.domToField_(l,_,h)}},s.Xml.findChildBlocks_=function(n){for(var h,l={childBlockElement:null,childShadowElement:null},u=0;h=n.childNodes[u];u++)h.nodeType==s.utils.dom.NodeType.ELEMENT_NODE&&("block"==h.nodeName.toLowerCase()?l.childBlockElement=h:"shadow"==h.nodeName.toLowerCase()&&(l.childShadowElement=h));return l},s.Xml.applyInputTagNodes_=function(n,l,u,h){for(var b,_=0;b=n[_];_++){var R=b.getAttribute("name"),O=u.getInput(R);if(!O){console.warn("Ignoring non-existent input "+R+" in block "+h);break}if((b=s.Xml.findChildBlocks_(b)).childBlockElement){if(!O.connection)throw TypeError("Input connection does not exist.");s.Xml.domToBlockHeadless_(b.childBlockElement,l,O.connection,!1)}b.childShadowElement&&O.connection.setShadowDom(b.childShadowElement)}},s.Xml.applyNextTagNodes_=function(n,l,u){for(var _,h=0;_=n[h];h++){if((_=s.Xml.findChildBlocks_(_)).childBlockElement){if(!u.nextConnection)throw TypeError("Next statement does not exist.");if(u.nextConnection.isConnected())throw TypeError("Next statement is already connected.");s.Xml.domToBlockHeadless_(_.childBlockElement,l,u.nextConnection,!0)}_.childShadowElement&&u.nextConnection&&u.nextConnection.setShadowDom(_.childShadowElement)}},s.Xml.domToBlockHeadless_=function(n,l,u,h){var _=n.getAttribute("type");if(!_)throw TypeError("Block type unspecified: "+n.outerHTML);var b=n.getAttribute("id");b=l.newBlock(_,b);var R=s.Xml.mapSupportedXmlTags_(n),O=s.Xml.applyMutationTagNodes_(R.mutation,b);if(s.Xml.applyCommentTagNodes_(R.comment,b),s.Xml.applyDataTagNodes_(R.data,b),u)if(h){if(!b.previousConnection)throw TypeError("Next block does not have previous statement.");u.connect(b.previousConnection)}else if(b.outputConnection)u.connect(b.outputConnection);else{if(!b.previousConnection)throw TypeError("Child block does not have output or previous statement.");u.connect(b.previousConnection)}if(s.Xml.applyFieldTagNodes_(R.field,b),s.Xml.applyInputTagNodes_(R.input,l,b,_),s.Xml.applyNextTagNodes_(R.next,l,b),O&&b.initSvg(),(l=n.getAttribute("inline"))&&b.setInputsInline("true"==l),(l=n.getAttribute("disabled"))&&b.setEnabled("true"!=l&&"disabled"!=l),(l=n.getAttribute("deletable"))&&b.setDeletable("true"==l),(l=n.getAttribute("movable"))&&b.setMovable("true"==l),(l=n.getAttribute("editable"))&&b.setEditable("true"==l),(l=n.getAttribute("collapsed"))&&b.setCollapsed("true"==l),"shadow"==n.nodeName.toLowerCase()){for(n=b.getChildren(!1),l=0;u=n[l];l++)if(!u.isShadow())throw TypeError("Shadow block not allowed non-shadow child.");if(b.getVarModels().length)throw TypeError("Shadow blocks cannot have variable references.");b.setShadow(!0)}return b},s.Xml.domToField_=function(n,l,u){var h=n.getField(l);h?h.fromXml(u):console.warn("Ignoring non-existent field "+l+" in block "+n.type)},s.Xml.deleteNext=function(n){for(var u,l=0;u=n.childNodes[l];l++)if("next"==u.nodeName.toLowerCase()){n.removeChild(u);break}},s.Events.BlockBase=function(n){s.Events.BlockBase.superClass_.constructor.call(this),this.blockId=(this.isBlank=void 0===n)?"":n.id,this.workspaceId=this.isBlank?"":n.workspace.id},s.utils.object.inherits(s.Events.BlockBase,s.Events.Abstract),s.Events.BlockBase.prototype.toJson=function(){var n=s.Events.BlockBase.superClass_.toJson.call(this);return n.blockId=this.blockId,n},s.Events.BlockBase.prototype.fromJson=function(n){s.Events.BlockBase.superClass_.fromJson.call(this,n),this.blockId=n.blockId},s.Events.BlockChange=function(n,l,u,h,_){s.Events.Change.superClass_.constructor.call(this,n),n&&(this.element=void 0===l?"":l,this.name=void 0===u?"":u,this.oldValue=void 0===h?"":h,this.newValue=void 0===_?"":_)},s.utils.object.inherits(s.Events.BlockChange,s.Events.BlockBase),s.Events.Change=s.Events.BlockChange,s.Events.BlockChange.prototype.type=s.Events.CHANGE,s.Events.BlockChange.prototype.toJson=function(){var n=s.Events.BlockChange.superClass_.toJson.call(this);return n.element=this.element,this.name&&(n.name=this.name),n.oldValue=this.oldValue,n.newValue=this.newValue,n},s.Events.BlockChange.prototype.fromJson=function(n){s.Events.BlockChange.superClass_.fromJson.call(this,n),this.element=n.element,this.name=n.name,this.oldValue=n.oldValue,this.newValue=n.newValue},s.Events.BlockChange.prototype.isNull=function(){return this.oldValue==this.newValue},s.Events.BlockChange.prototype.run=function(n){var l=this.getEventWorkspace_().getBlockById(this.blockId);if(l)switch(l.mutator&&l.mutator.setVisible(!1),n=n?this.newValue:this.oldValue,this.element){case"field":(l=l.getField(this.name))?l.setValue(n):console.warn("Can't set non-existent field: "+this.name);break;case"comment":l.setCommentText(n||null);break;case"collapsed":l.setCollapsed(!!n);break;case"disabled":l.setEnabled(!n);break;case"inline":l.setInputsInline(!!n);break;case"mutation":var u="";if(l.mutationToDom&&(u=(u=l.mutationToDom())&&s.Xml.domToText(u)),l.domToMutation){var h=s.Xml.textToDom(n||"<mutation/>");l.domToMutation(h)}s.Events.fire(new s.Events.BlockChange(l,"mutation",null,u,n));break;default:console.warn("Unknown change type: "+this.element)}else console.warn("Can't change non-existent block: "+this.blockId)},s.Events.Create=function(n){s.Events.Create.superClass_.constructor.call(this,n),n&&(n.isShadow()&&(this.recordUndo=!1),this.xml=n.workspace.rendered?s.Xml.blockToDomWithXY(n):s.Xml.blockToDom(n),this.ids=s.Events.getDescendantIds(n))},s.utils.object.inherits(s.Events.Create,s.Events.BlockBase),s.Events.BlockCreate=s.Events.Create,s.Events.Create.prototype.type=s.Events.CREATE,s.Events.Create.prototype.toJson=function(){var n=s.Events.Create.superClass_.toJson.call(this);return n.xml=s.Xml.domToText(this.xml),n.ids=this.ids,this.recordUndo||(n.recordUndo=this.recordUndo),n},s.Events.Create.prototype.fromJson=function(n){s.Events.Create.superClass_.fromJson.call(this,n),this.xml=s.Xml.textToDom(n.xml),this.ids=n.ids,void 0!==n.recordUndo&&(this.recordUndo=n.recordUndo)},s.Events.Create.prototype.run=function(n){var l=this.getEventWorkspace_();if(n)(n=s.utils.xml.createElement("xml")).appendChild(this.xml),s.Xml.domToWorkspace(n,l);else{n=0;for(var u;u=this.ids[n];n++){var h=l.getBlockById(u);h?h.dispose(!1):u==this.blockId&&console.warn("Can't uncreate non-existent block: "+u)}}},s.Events.Delete=function(n){if(s.Events.Delete.superClass_.constructor.call(this,n),n){if(n.getParent())throw Error("Connected blocks cannot be deleted.");n.isShadow()&&(this.recordUndo=!1),this.oldXml=n.workspace.rendered?s.Xml.blockToDomWithXY(n):s.Xml.blockToDom(n),this.ids=s.Events.getDescendantIds(n)}},s.utils.object.inherits(s.Events.Delete,s.Events.BlockBase),s.Events.BlockDelete=s.Events.Delete,s.Events.Delete.prototype.type=s.Events.DELETE,s.Events.Delete.prototype.toJson=function(){var n=s.Events.Delete.superClass_.toJson.call(this);return n.oldXml=s.Xml.domToText(this.oldXml),n.ids=this.ids,this.recordUndo||(n.recordUndo=this.recordUndo),n},s.Events.Delete.prototype.fromJson=function(n){s.Events.Delete.superClass_.fromJson.call(this,n),this.oldXml=s.Xml.textToDom(n.oldXml),this.ids=n.ids,void 0!==n.recordUndo&&(this.recordUndo=n.recordUndo)},s.Events.Delete.prototype.run=function(n){var l=this.getEventWorkspace_();if(n){n=0;for(var u;u=this.ids[n];n++){var h=l.getBlockById(u);h?h.dispose(!1):u==this.blockId&&console.warn("Can't delete non-existent block: "+u)}}else(n=s.utils.xml.createElement("xml")).appendChild(this.oldXml),s.Xml.domToWorkspace(n,l)},s.Events.Move=function(n){s.Events.Move.superClass_.constructor.call(this,n),n&&(n.isShadow()&&(this.recordUndo=!1),n=this.currentLocation_(),this.oldParentId=n.parentId,this.oldInputName=n.inputName,this.oldCoordinate=n.coordinate)},s.utils.object.inherits(s.Events.Move,s.Events.BlockBase),s.Events.BlockMove=s.Events.Move,s.Events.Move.prototype.type=s.Events.MOVE,s.Events.Move.prototype.toJson=function(){var n=s.Events.Move.superClass_.toJson.call(this);return this.newParentId&&(n.newParentId=this.newParentId),this.newInputName&&(n.newInputName=this.newInputName),this.newCoordinate&&(n.newCoordinate=Math.round(this.newCoordinate.x)+","+Math.round(this.newCoordinate.y)),this.recordUndo||(n.recordUndo=this.recordUndo),n},s.Events.Move.prototype.fromJson=function(n){if(s.Events.Move.superClass_.fromJson.call(this,n),this.newParentId=n.newParentId,this.newInputName=n.newInputName,n.newCoordinate){var l=n.newCoordinate.split(",");this.newCoordinate=new s.utils.Coordinate(Number(l[0]),Number(l[1]))}void 0!==n.recordUndo&&(this.recordUndo=n.recordUndo)},s.Events.Move.prototype.recordNew=function(){var n=this.currentLocation_();this.newParentId=n.parentId,this.newInputName=n.inputName,this.newCoordinate=n.coordinate},s.Events.Move.prototype.currentLocation_=function(){var n=this.getEventWorkspace_().getBlockById(this.blockId),l={},u=n.getParent();return u?(l.parentId=u.id,(n=u.getInputWithBlock(n))&&(l.inputName=n.name)):l.coordinate=n.getRelativeToSurfaceXY(),l},s.Events.Move.prototype.isNull=function(){return this.oldParentId==this.newParentId&&this.oldInputName==this.newInputName&&s.utils.Coordinate.equals(this.oldCoordinate,this.newCoordinate)},s.Events.Move.prototype.run=function(n){var l=this.getEventWorkspace_(),u=l.getBlockById(this.blockId);if(u){var h=n?this.newParentId:this.oldParentId,_=n?this.newInputName:this.oldInputName,b=n?this.newCoordinate:this.oldCoordinate;if(n=null,h&&!(n=l.getBlockById(h)))return void console.warn("Can't connect to non-existent block: "+h);if(u.getParent()&&u.unplug(),b)_=u.getRelativeToSurfaceXY(),u.moveBy(b.x-_.x,b.y-_.y);else{if(l=(u=u.outputConnection||u.previousConnection).type,_){if(n=n.getInput(_))var R=n.connection}else l==s.connectionTypes.PREVIOUS_STATEMENT&&(R=n.nextConnection);R?u.connect(R):console.warn("Can't connect to non-existent input: "+_)}}else console.warn("Can't move non-existent block: "+this.blockId)},s.registry.register(s.registry.Type.EVENT,s.Events.CREATE,s.Events.Create),s.registry.register(s.registry.Type.EVENT,s.Events.DELETE,s.Events.Delete),s.registry.register(s.registry.Type.EVENT,s.Events.CHANGE,s.Events.BlockChange),s.registry.register(s.registry.Type.EVENT,s.Events.MOVE,s.Events.Move),s.Events.FinishedLoading=function(n){this.isBlank=void 0===n,this.workspaceId=n?n.id:"",this.group=s.Events.getGroup(),this.recordUndo=!1},s.utils.object.inherits(s.Events.FinishedLoading,s.Events.Abstract),s.Events.FinishedLoading.prototype.type=s.Events.FINISHED_LOADING,s.Events.FinishedLoading.prototype.toJson=function(){var n={type:this.type};return this.group&&(n.group=this.group),this.workspaceId&&(n.workspaceId=this.workspaceId),n},s.Events.FinishedLoading.prototype.fromJson=function(n){this.isBlank=!1,this.workspaceId=n.workspaceId,this.group=n.group},s.registry.register(s.registry.Type.EVENT,s.Events.FINISHED_LOADING,s.Events.FinishedLoading),s.Events.UiBase=function(n){s.Events.UiBase.superClass_.constructor.call(this),this.isBlank=void 0===n,this.workspaceId=n||"",this.recordUndo=!1},s.utils.object.inherits(s.Events.UiBase,s.Events.Abstract),s.Events.UiBase.prototype.isUiEvent=!0,s.Events.Ui=function(n,l,u,h){s.Events.Ui.superClass_.constructor.call(this,n?n.workspace.id:void 0),this.blockId=n?n.id:null,this.element=void 0===l?"":l,this.oldValue=void 0===u?"":u,this.newValue=void 0===h?"":h},s.utils.object.inherits(s.Events.Ui,s.Events.UiBase),s.Events.Ui.prototype.type=s.Events.UI,s.Events.Ui.prototype.toJson=function(){var n=s.Events.Ui.superClass_.toJson.call(this);return n.element=this.element,void 0!==this.newValue&&(n.newValue=this.newValue),this.blockId&&(n.blockId=this.blockId),n},s.Events.Ui.prototype.fromJson=function(n){s.Events.Ui.superClass_.fromJson.call(this,n),this.element=n.element,this.newValue=n.newValue,this.blockId=n.blockId},s.registry.register(s.registry.Type.EVENT,s.Events.UI,s.Events.Ui),s.Events.VarBase=function(n){s.Events.VarBase.superClass_.constructor.call(this),this.varId=(this.isBlank=void 0===n)?"":n.getId(),this.workspaceId=this.isBlank?"":n.workspace.id},s.utils.object.inherits(s.Events.VarBase,s.Events.Abstract),s.Events.VarBase.prototype.toJson=function(){var n=s.Events.VarBase.superClass_.toJson.call(this);return n.varId=this.varId,n},s.Events.VarBase.prototype.fromJson=function(n){s.Events.VarBase.superClass_.toJson.call(this),this.varId=n.varId},s.Events.VarCreate=function(n){s.Events.VarCreate.superClass_.constructor.call(this,n),n&&(this.varType=n.type,this.varName=n.name)},s.utils.object.inherits(s.Events.VarCreate,s.Events.VarBase),s.Events.VarCreate.prototype.type=s.Events.VAR_CREATE,s.Events.VarCreate.prototype.toJson=function(){var n=s.Events.VarCreate.superClass_.toJson.call(this);return n.varType=this.varType,n.varName=this.varName,n},s.Events.VarCreate.prototype.fromJson=function(n){s.Events.VarCreate.superClass_.fromJson.call(this,n),this.varType=n.varType,this.varName=n.varName},s.Events.VarCreate.prototype.run=function(n){var l=this.getEventWorkspace_();n?l.createVariable(this.varName,this.varType,this.varId):l.deleteVariableById(this.varId)},s.Events.VarDelete=function(n){s.Events.VarDelete.superClass_.constructor.call(this,n),n&&(this.varType=n.type,this.varName=n.name)},s.utils.object.inherits(s.Events.VarDelete,s.Events.VarBase),s.Events.VarDelete.prototype.type=s.Events.VAR_DELETE,s.Events.VarDelete.prototype.toJson=function(){var n=s.Events.VarDelete.superClass_.toJson.call(this);return n.varType=this.varType,n.varName=this.varName,n},s.Events.VarDelete.prototype.fromJson=function(n){s.Events.VarDelete.superClass_.fromJson.call(this,n),this.varType=n.varType,this.varName=n.varName},s.Events.VarDelete.prototype.run=function(n){var l=this.getEventWorkspace_();n?l.deleteVariableById(this.varId):l.createVariable(this.varName,this.varType,this.varId)},s.Events.VarRename=function(n,l){s.Events.VarRename.superClass_.constructor.call(this,n),n&&(this.oldName=n.name,this.newName=void 0===l?"":l)},s.utils.object.inherits(s.Events.VarRename,s.Events.VarBase),s.Events.VarRename.prototype.type=s.Events.VAR_RENAME,s.Events.VarRename.prototype.toJson=function(){var n=s.Events.VarRename.superClass_.toJson.call(this);return n.oldName=this.oldName,n.newName=this.newName,n},s.Events.VarRename.prototype.fromJson=function(n){s.Events.VarRename.superClass_.fromJson.call(this,n),this.oldName=n.oldName,this.newName=n.newName},s.Events.VarRename.prototype.run=function(n){this.getEventWorkspace_().renameVariableById(this.varId,n?this.newName:this.oldName)},s.registry.register(s.registry.Type.EVENT,s.Events.VAR_CREATE,s.Events.VarCreate),s.registry.register(s.registry.Type.EVENT,s.Events.VAR_DELETE,s.Events.VarDelete),s.registry.register(s.registry.Type.EVENT,s.Events.VAR_RENAME,s.Events.VarRename),s.BlockDragSurfaceSvg=function(n){this.container_=n,this.createDom()},s.BlockDragSurfaceSvg.prototype.SVG_=null,s.BlockDragSurfaceSvg.prototype.dragGroup_=null,s.BlockDragSurfaceSvg.prototype.container_=null,s.BlockDragSurfaceSvg.prototype.scale_=1,s.BlockDragSurfaceSvg.prototype.surfaceXY_=null,s.BlockDragSurfaceSvg.prototype.childSurfaceXY_=new s.utils.Coordinate(0,0),s.BlockDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=s.utils.dom.createSvgElement(s.utils.Svg.SVG,{xmlns:s.utils.dom.SVG_NS,"xmlns:html":s.utils.dom.HTML_NS,"xmlns:xlink":s.utils.dom.XLINK_NS,version:"1.1",class:"blocklyBlockDragSurface"},this.container_),this.dragGroup_=s.utils.dom.createSvgElement(s.utils.Svg.G,{},this.SVG_))},s.BlockDragSurfaceSvg.prototype.setBlocksAndShow=function(n){if(this.dragGroup_.childNodes.length)throw Error("Already dragging a block.");this.dragGroup_.appendChild(n),this.SVG_.style.display="block",this.surfaceXY_=new s.utils.Coordinate(0,0)},s.BlockDragSurfaceSvg.prototype.translateAndScaleGroup=function(n,l,u){this.scale_=u,n=n.toFixed(0),l=l.toFixed(0),this.childSurfaceXY_.x=parseInt(n,10),this.childSurfaceXY_.y=parseInt(l,10),this.dragGroup_.setAttribute("transform","translate("+n+","+l+") scale("+u+")")},s.BlockDragSurfaceSvg.prototype.translateSurfaceInternal_=function(){var n=this.surfaceXY_.x,l=this.surfaceXY_.y;n=n.toFixed(0),l=l.toFixed(0),this.SVG_.style.display="block",s.utils.dom.setCssTransform(this.SVG_,"translate3d("+n+"px, "+l+"px, 0px)")},s.BlockDragSurfaceSvg.prototype.translateBy=function(n,l){this.surfaceXY_=new s.utils.Coordinate(this.surfaceXY_.x+n,this.surfaceXY_.y+l),this.translateSurfaceInternal_()},s.BlockDragSurfaceSvg.prototype.translateSurface=function(n,l){this.surfaceXY_=new s.utils.Coordinate(n*this.scale_,l*this.scale_),this.translateSurfaceInternal_()},s.BlockDragSurfaceSvg.prototype.getSurfaceTranslation=function(){var n=s.utils.getRelativeXY(this.SVG_);return new s.utils.Coordinate(n.x/this.scale_,n.y/this.scale_)},s.BlockDragSurfaceSvg.prototype.getGroup=function(){return this.dragGroup_},s.BlockDragSurfaceSvg.prototype.getSvgRoot=function(){return this.SVG_},s.BlockDragSurfaceSvg.prototype.getCurrentBlock=function(){return this.dragGroup_.firstChild},s.BlockDragSurfaceSvg.prototype.getWsTranslation=function(){return this.childSurfaceXY_.clone()},s.BlockDragSurfaceSvg.prototype.clearAndHide=function(n){if(n?n.appendChild(this.getCurrentBlock()):this.dragGroup_.removeChild(this.getCurrentBlock()),this.SVG_.style.display="none",this.dragGroup_.childNodes.length)throw Error("Drag group was not cleared.");this.surfaceXY_=null},s.Css={},s.Css.injected_=!1,s.Css.register=function(n){if(s.Css.injected_)throw Error("CSS already injected");Array.prototype.push.apply(s.Css.CONTENT,n),n.length=0},s.Css.inject=function(n,l){if(!s.Css.injected_){s.Css.injected_=!0;var u=s.Css.CONTENT.join("\n");s.Css.CONTENT.length=0,n&&(n=l.replace(/[\\/]$/,""),u=u.replace(/<<<PATH>>>/g,n),(n=document.createElement("style")).id="blockly-common-style",u=document.createTextNode(u),n.appendChild(u),document.head.insertBefore(n,document.head.firstChild))}},s.Css.CONTENT=[".blocklySvg {","background-color: #fff;","outline: none;","overflow: hidden;","position: absolute;","display: block;","}",".blocklyWidgetDiv {","display: none;","position: absolute;","z-index: 99999;","}",".injectionDiv {","height: 100%;","position: relative;","overflow: hidden;","touch-action: none;","}",".blocklyNonSelectable {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","}",".blocklyWsDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","}",".blocklyWsDragSurface.blocklyOverflowVisible {","overflow: visible;","}",".blocklyBlockDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","right: 0;","bottom: 0;","overflow: visible !important;","z-index: 50;","}",".blocklyBlockCanvas.blocklyCanvasTransitioning,",".blocklyBubbleCanvas.blocklyCanvasTransitioning {","transition: transform .5s;","}",".blocklyTooltipDiv {","background-color: #ffffc7;","border: 1px solid #ddc;","box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);","color: #000;","display: none;","font: 9pt sans-serif;","opacity: .9;","padding: 2px;","position: absolute;","z-index: 100000;","}",".blocklyDropDownDiv {","position: absolute;","left: 0;","top: 0;","z-index: 1000;","display: none;","border: 1px solid;","border-color: #dadce0;","background-color: #fff;","border-radius: 2px;","padding: 4px;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownContent {","max-height: 300px;","overflow: auto;","overflow-x: hidden;","position: relative;","}",".blocklyDropDownArrow {","position: absolute;","left: 0;","top: 0;","width: 16px;","height: 16px;","z-index: -1;","background-color: inherit;","border-color: inherit;","}",".blocklyDropDownButton {","display: inline-block;","float: left;","padding: 0;","margin: 4px;","border-radius: 4px;","outline: none;","border: 1px solid;","transition: box-shadow .1s;","cursor: pointer;","}",".blocklyArrowTop {","border-top: 1px solid;","border-left: 1px solid;","border-top-left-radius: 4px;","border-color: inherit;","}",".blocklyArrowBottom {","border-bottom: 1px solid;","border-right: 1px solid;","border-bottom-right-radius: 4px;","border-color: inherit;","}",".blocklyResizeSE {","cursor: se-resize;","fill: #aaa;","}",".blocklyResizeSW {","cursor: sw-resize;","fill: #aaa;","}",".blocklyResizeLine {","stroke: #515A5A;","stroke-width: 1;","}",".blocklyHighlightedConnectionPath {","fill: none;","stroke: #fc3;","stroke-width: 4px;","}",".blocklyPathLight {","fill: none;","stroke-linecap: round;","stroke-width: 1;","}",".blocklySelected>.blocklyPathLight {","display: none;","}",".blocklyDraggable {",'cursor: url("<<<PATH>>>/handopen.cur"), auto;',"cursor: grab;","cursor: -webkit-grab;","}",".blocklyDragging {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDraggable:active {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyBlockDragSurface .blocklyDraggable {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDragging.blocklyDraggingDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyDragging>.blocklyPath,",".blocklyDragging>.blocklyPathLight {","fill-opacity: .8;","stroke-opacity: .8;","}",".blocklyDragging>.blocklyPathDark {","display: none;","}",".blocklyDisabled>.blocklyPath {","fill-opacity: .5;","stroke-opacity: .5;","}",".blocklyDisabled>.blocklyPathLight,",".blocklyDisabled>.blocklyPathDark {","display: none;","}",".blocklyInsertionMarker>.blocklyPath,",".blocklyInsertionMarker>.blocklyPathLight,",".blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: .2;","stroke: none;","}",".blocklyMultilineText {","font-family: monospace;","}",".blocklyNonEditableText>text {","pointer-events: none;","}",".blocklyFlyout {","position: absolute;","z-index: 20;","}",".blocklyText text {","cursor: default;","}",".blocklySvg text,",".blocklyBlockDragSurface text {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","cursor: inherit;","}",".blocklyHidden {","display: none;","}",".blocklyFieldDropdown:not(.blocklyHidden) {","display: block;","}",".blocklyIconGroup {","cursor: default;","}",".blocklyIconGroup:not(:hover),",".blocklyIconGroupReadonly {","opacity: .6;","}",".blocklyIconShape {","fill: #00f;","stroke: #fff;","stroke-width: 1px;","}",".blocklyIconSymbol {","fill: #fff;","}",".blocklyMinimalBody {","margin: 0;","padding: 0;","}",".blocklyHtmlInput {","border: none;","border-radius: 4px;","height: 100%;","margin: 0;","outline: none;","padding: 0;","width: 100%;","text-align: center;","display: block;","box-sizing: border-box;","}",".blocklyHtmlInput::-ms-clear {","display: none;","}",".blocklyMainBackground {","stroke-width: 1;","stroke: #c6c6c6;","}",".blocklyMutatorBackground {","fill: #fff;","stroke: #ddd;","stroke-width: 1;","}",".blocklyFlyoutBackground {","fill: #ddd;","fill-opacity: .8;","}",".blocklyMainWorkspaceScrollbar {","z-index: 20;","}",".blocklyFlyoutScrollbar {","z-index: 30;","}",".blocklyScrollbarHorizontal,",".blocklyScrollbarVertical {","position: absolute;","outline: none;","}",".blocklyScrollbarBackground {","opacity: 0;","}",".blocklyScrollbarHandle {","fill: #ccc;","}",".blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyScrollbarHandle:hover {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarHandle {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyFlyout .blocklyScrollbarHandle:hover {","fill: #aaa;","}",".blocklyInvalidInput {","background: #faa;","}",".blocklyVerticalMarker {","stroke-width: 3px;","fill: rgba(255,255,255,.5);","pointer-events: none;","}",".blocklyComputeCanvas {","position: absolute;","width: 0;","height: 0;","}",".blocklyNoPointerEvents {","pointer-events: none;","}",".blocklyContextMenu {","border-radius: 4px;","max-height: 100%;","}",".blocklyDropdownMenu {","border-radius: 2px;","padding: 0 !important;","}",".blocklyDropdownMenu .blocklyMenuItem {","padding-left: 28px;","}",".blocklyDropdownMenu .blocklyMenuItemRtl {","padding-left: 5px;","padding-right: 28px;","}",".blocklyWidgetDiv .blocklyMenu {","background: #fff;","border: 1px solid transparent;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","font: normal 13px Arial, sans-serif;","margin: 0;","outline: none;","padding: 4px 0;","position: absolute;","overflow-y: auto;","overflow-x: hidden;","max-height: 100%;","z-index: 20000;","}",".blocklyWidgetDiv .blocklyMenu.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv .blocklyMenu {","background: inherit;","border: inherit;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"outline: none;","position: relative;","z-index: 20000;","}",".blocklyMenuItem {","border: none;","color: #000;","cursor: pointer;","list-style: none;","margin: 0;","min-width: 7em;","padding: 6px 15px;","white-space: nowrap;","}",".blocklyMenuItemDisabled {","color: #ccc;","cursor: inherit;","}",".blocklyMenuItemHighlight {","background-color: rgba(0,0,0,.1);","}",".blocklyMenuItemCheckbox {","height: 16px;","position: absolute;","width: 16px;","}",".blocklyMenuItemSelected .blocklyMenuItemCheckbox {","background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;","float: left;","margin-left: -24px;","position: static;","}",".blocklyMenuItemRtl .blocklyMenuItemCheckbox {","float: right;","margin-right: -24px;","}"],s.Grid=function(n,l){this.gridPattern_=n,this.spacing_=l.spacing,this.length_=l.length,this.line2_=(this.line1_=n.firstChild)&&this.line1_.nextSibling,this.snapToGrid_=l.snap},s.Grid.prototype.scale_=1,s.Grid.prototype.dispose=function(){this.gridPattern_=null},s.Grid.prototype.shouldSnap=function(){return this.snapToGrid_},s.Grid.prototype.getSpacing=function(){return this.spacing_},s.Grid.prototype.getPatternId=function(){return this.gridPattern_.id},s.Grid.prototype.update=function(n){this.scale_=n;var l=this.spacing_*n||100;this.gridPattern_.setAttribute("width",l),this.gridPattern_.setAttribute("height",l);var u=(l=Math.floor(this.spacing_/2)+.5)-this.length_/2,h=l+this.length_/2;this.setLineAttributes_(this.line1_,n,u*=n,h*=n,l*=n,l),this.setLineAttributes_(this.line2_,n,l,l,u,h)},s.Grid.prototype.setLineAttributes_=function(n,l,u,h,_,b){n&&(n.setAttribute("stroke-width",l),n.setAttribute("x1",u),n.setAttribute("y1",_),n.setAttribute("x2",h),n.setAttribute("y2",b))},s.Grid.prototype.moveTo=function(n,l){this.gridPattern_.setAttribute("x",n),this.gridPattern_.setAttribute("y",l),(s.utils.userAgent.IE||s.utils.userAgent.EDGE)&&this.update(this.scale_)},s.Grid.createDom=function(n,l,u){return n=s.utils.dom.createSvgElement(s.utils.Svg.PATTERN,{id:"blocklyGridPattern"+n,patternUnits:"userSpaceOnUse"},u),0<l.length&&0<l.spacing?(s.utils.dom.createSvgElement(s.utils.Svg.LINE,{stroke:l.colour},n),1<l.length&&s.utils.dom.createSvgElement(s.utils.Svg.LINE,{stroke:l.colour},n)):s.utils.dom.createSvgElement(s.utils.Svg.LINE,{},n),n},s.Theme=function(n,l,u,h){this.name=n,this.blockStyles=l||Object.create(null),this.categoryStyles=u||Object.create(null),this.componentStyles=h||Object.create(null),this.fontStyle=Object.create(null),this.startHats=null,s.registry.register(s.registry.Type.THEME,n,this)},s.Theme.prototype.getClassName=function(){return this.name+"-theme"},s.Theme.prototype.setBlockStyle=function(n,l){this.blockStyles[n]=l},s.Theme.prototype.setCategoryStyle=function(n,l){this.categoryStyles[n]=l},s.Theme.prototype.getComponentStyle=function(n){return(n=this.componentStyles[n])&&"string"==typeof n&&this.getComponentStyle(n)?this.getComponentStyle(n):n?String(n):null},s.Theme.prototype.setComponentStyle=function(n,l){this.componentStyles[n]=l},s.Theme.prototype.setFontStyle=function(n){this.fontStyle=n},s.Theme.prototype.setStartHats=function(n){this.startHats=n},s.Theme.defineTheme=function(n,l){var u=new s.Theme(n),h=l.base;return h&&("string"==typeof h&&(h=s.registry.getObject(s.registry.Type.THEME,h)),h instanceof s.Theme&&(s.utils.object.deepMerge(u,h),u.name=n)),s.utils.object.deepMerge(u.blockStyles,l.blockStyles),s.utils.object.deepMerge(u.categoryStyles,l.categoryStyles),s.utils.object.deepMerge(u.componentStyles,l.componentStyles),s.utils.object.deepMerge(u.fontStyle,l.fontStyle),null!=l.startHats&&(u.startHats=l.startHats),u},s.Themes={},s.Themes.Classic={},s.Themes.Classic.defaultBlockStyles={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},s.Themes.Classic.categoryStyles={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},s.Themes.Classic=new s.Theme("classic",s.Themes.Classic.defaultBlockStyles,s.Themes.Classic.categoryStyles),s.utils.IdGenerator={},s.utils.IdGenerator.nextId_=0,s.utils.IdGenerator.getNextUniqueId=function(){return"blockly-"+(s.utils.IdGenerator.nextId_++).toString(36)},s.utils.Metrics=function(){},s.utils.toolbox={},s.utils.toolbox.CATEGORY_TOOLBOX_KIND="categoryToolbox",s.utils.toolbox.FLYOUT_TOOLBOX_KIND="flyoutToolbox",s.utils.toolbox.Position={TOP:0,BOTTOM:1,LEFT:2,RIGHT:3},s.utils.toolbox.convertToolboxDefToJson=function(n){return n?((n instanceof Element||"string"==typeof n)&&(n=s.utils.toolbox.parseToolboxTree(n),n=s.utils.toolbox.convertToToolboxJson_(n)),s.utils.toolbox.validateToolbox_(n),n):null},s.utils.toolbox.validateToolbox_=function(n){var l=n.kind;if(n=n.contents,l&&l!=s.utils.toolbox.FLYOUT_TOOLBOX_KIND&&l!=s.utils.toolbox.CATEGORY_TOOLBOX_KIND)throw Error("Invalid toolbox kind "+l+". Please supply either "+s.utils.toolbox.FLYOUT_TOOLBOX_KIND+" or "+s.utils.toolbox.CATEGORY_TOOLBOX_KIND);if(!n)throw Error("Toolbox must have a contents attribute.")},s.utils.toolbox.convertFlyoutDefToJsonArray=function(n){return n?n.contents?n.contents:Array.isArray(n)&&0<n.length&&!n[0].nodeType?n:s.utils.toolbox.xmlToJsonArray_(n):[]},s.utils.toolbox.hasCategories=function(n){if(!n)return!1;var l=n.kind;return l?l==s.utils.toolbox.CATEGORY_TOOLBOX_KIND:!!n.contents.filter(function(u){return"CATEGORY"==u.kind.toUpperCase()}).length},s.utils.toolbox.isCategoryCollapsible=function(n){return!(!n||!n.contents||!n.contents.filter(function(l){return"CATEGORY"==l.kind.toUpperCase()}).length)},s.utils.toolbox.convertToToolboxJson_=function(n){var l={contents:s.utils.toolbox.xmlToJsonArray_(n)};return n instanceof Node&&s.utils.toolbox.addAttributes_(n,l),l},s.utils.toolbox.xmlToJsonArray_=function(n){var h,l=[],u=n.childNodes;for(u||(u=n),n=0;h=u[n];n++)if(h.tagName){var _={},b=h.tagName.toUpperCase();_.kind=b,"BLOCK"==b?_.blockxml=h:h.childNodes&&0<h.childNodes.length&&(_.contents=s.utils.toolbox.xmlToJsonArray_(h)),s.utils.toolbox.addAttributes_(h,_),l.push(_)}return l},s.utils.toolbox.addAttributes_=function(n,l){for(var u=0;u<n.attributes.length;u++){var h=n.attributes[u];-1<h.nodeName.indexOf("css-")?(l.cssconfig=l.cssconfig||{},l.cssconfig[h.nodeName.replace("css-","")]=h.value):l[h.nodeName]=h.value}},s.utils.toolbox.parseToolboxTree=function(n){if(n){if("string"!=typeof n&&(s.utils.userAgent.IE&&n.outerHTML?n=n.outerHTML:n instanceof Element||(n=null)),"string"==typeof n&&"xml"!=(n=s.Xml.textToDom(n)).nodeName.toLowerCase())throw TypeError("Toolbox should be an <xml> document.")}else n=null;return n},s.Options=function(n){var l=!!n.readOnly;if(l)var u=null,h=!1,_=!1,b=!1,R=!1,O=!1,H=!1;else{u=s.utils.toolbox.convertToolboxDefToJson(n.toolbox),h=s.utils.toolbox.hasCategories(u),void 0===(_=n.trashcan)&&(_=h);var W=n.maxTrashcanContents;_?void 0===W&&(W=32):W=0,void 0===(b=n.collapse)&&(b=h),void 0===(R=n.comments)&&(R=h),void 0===(O=n.disable)&&(O=h),void 0===(H=n.sounds)&&(H=!0)}var G=!!n.rtl,Z=n.horizontalLayout;void 0===Z&&(Z=!1);var Q=n.toolboxPosition;Q="end"!==Q,Q=Z?Q?s.utils.toolbox.Position.TOP:s.utils.toolbox.Position.BOTTOM:Q==G?s.utils.toolbox.Position.RIGHT:s.utils.toolbox.Position.LEFT;var Y=n.css;void 0===Y&&(Y=!0);var ue="https://blockly-demo.appspot.com/static/media/";n.media?ue=n.media:n.path&&(ue=n.path+"media/");var ne=void 0===n.oneBasedIndex||!!n.oneBasedIndex,he=n.renderer||"geras",te=n.plugins||{};this.RTL=G,this.oneBasedIndex=ne,this.collapse=b,this.comments=R,this.disable=O,this.readOnly=l,this.maxBlocks=n.maxBlocks||1/0,this.maxInstances=n.maxInstances,this.pathToMedia=ue,this.hasCategories=h,this.moveOptions=s.Options.parseMoveOptions_(n,h),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=_,this.maxTrashcanContents=W,this.hasSounds=H,this.hasCss=Y,this.horizontalLayout=Z,this.languageTree=u,this.gridOptions=s.Options.parseGridOptions_(n),this.zoomOptions=s.Options.parseZoomOptions_(n),this.toolboxPosition=Q,this.theme=s.Options.parseThemeOptions_(n),this.renderer=he,this.rendererOverrides=n.rendererOverrides,this.gridPattern=null,this.parentWorkspace=n.parentWorkspace,this.plugins=te},s.BlocklyOptions=function(){},s.Options.parseMoveOptions_=function(n,l){var u=n.move||{},h={};return void 0===u.scrollbars&&void 0===n.scrollbars?h.scrollbars=l:"object"==typeof u.scrollbars?(h.scrollbars={},h.scrollbars.horizontal=!!u.scrollbars.horizontal,h.scrollbars.vertical=!!u.scrollbars.vertical,h.scrollbars.horizontal&&h.scrollbars.vertical?h.scrollbars=!0:h.scrollbars.horizontal||h.scrollbars.vertical||(h.scrollbars=!1)):h.scrollbars=!!u.scrollbars||!!n.scrollbars,h.wheel=h.scrollbars&&void 0!==u.wheel?!!u.wheel:"object"==typeof h.scrollbars,h.drag=!(!h.scrollbars||void 0!==u.drag&&!u.drag),h},s.Options.parseZoomOptions_=function(n){var l={};return l.controls=void 0!==(n=n.zoom||{}).controls&&!!n.controls,l.wheel=void 0!==n.wheel&&!!n.wheel,l.startScale=void 0===n.startScale?1:Number(n.startScale),l.maxScale=void 0===n.maxScale?3:Number(n.maxScale),l.minScale=void 0===n.minScale?.3:Number(n.minScale),l.scaleSpeed=void 0===n.scaleSpeed?1.2:Number(n.scaleSpeed),l.pinch=void 0===n.pinch?l.wheel||l.controls:!!n.pinch,l},s.Options.parseGridOptions_=function(n){n=n.grid||{};var l={};return l.spacing=Number(n.spacing)||0,l.colour=n.colour||"#888",l.length=void 0===n.length?1:Number(n.length),l.snap=0<l.spacing&&!!n.snap,l},s.Options.parseThemeOptions_=function(n){return"string"==typeof(n=n.theme||s.Themes.Classic)?s.registry.getObject(s.registry.Type.THEME,n):n instanceof s.Theme?n:s.Theme.defineTheme(n.name||"builtin"+s.utils.IdGenerator.getNextUniqueId(),n)},s.Options.parseToolboxTree=function(n){return s.utils.deprecation.warn("Blockly.Options.parseToolboxTree","September 2020","September 2021","Blockly.utils.toolbox.parseToolboxTree"),s.utils.toolbox.parseToolboxTree(n)},s.ScrollbarPair=function(n,l,u,h,_){this.workspace_=n,u=void 0===u||u;var b=(l=void 0===l||l)&&u;l&&(this.hScroll=new s.Scrollbar(n,!0,b,h,_)),u&&(this.vScroll=new s.Scrollbar(n,!1,b,h,_)),b&&(this.corner_=s.utils.dom.createSvgElement(s.utils.Svg.RECT,{height:s.Scrollbar.scrollbarThickness,width:s.Scrollbar.scrollbarThickness,class:"blocklyScrollbarBackground"},null),s.utils.dom.insertAfter(this.corner_,n.getBubbleCanvas())),this.oldHostMetrics_=null},s.ScrollbarPair.prototype.dispose=function(){s.utils.dom.removeNode(this.corner_),this.oldHostMetrics_=this.workspace_=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)},s.ScrollbarPair.prototype.resize=function(){var n=this.workspace_.getMetrics();if(n){var l=!1,u=!1;if(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==n.viewWidth&&this.oldHostMetrics_.viewHeight==n.viewHeight&&this.oldHostMetrics_.absoluteTop==n.absoluteTop&&this.oldHostMetrics_.absoluteLeft==n.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.scrollWidth==n.scrollWidth&&this.oldHostMetrics_.viewLeft==n.viewLeft&&this.oldHostMetrics_.scrollLeft==n.scrollLeft||(l=!0),this.oldHostMetrics_&&this.oldHostMetrics_.scrollHeight==n.scrollHeight&&this.oldHostMetrics_.viewTop==n.viewTop&&this.oldHostMetrics_.scrollTop==n.scrollTop||(u=!0)):u=l=!0,l||u){try{s.Events.disable(),this.hScroll&&l&&this.hScroll.resize(n),this.vScroll&&u&&this.vScroll.resize(n)}finally{s.Events.enable()}this.workspace_.maybeFireViewportChangeEvent()}this.hScroll&&this.vScroll&&(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==n.viewWidth&&this.oldHostMetrics_.absoluteLeft==n.absoluteLeft||this.corner_.setAttribute("x",this.vScroll.position.x),this.oldHostMetrics_&&this.oldHostMetrics_.viewHeight==n.viewHeight&&this.oldHostMetrics_.absoluteTop==n.absoluteTop||this.corner_.setAttribute("y",this.hScroll.position.y)),this.oldHostMetrics_=n}},s.ScrollbarPair.prototype.canScrollHorizontally=function(){return!!this.hScroll},s.ScrollbarPair.prototype.canScrollVertically=function(){return!!this.vScroll},s.ScrollbarPair.prototype.setOrigin=function(n,l){this.hScroll&&this.hScroll.setOrigin(n,l),this.vScroll&&this.vScroll.setOrigin(n,l)},s.ScrollbarPair.prototype.set=function(n,l,u){this.hScroll&&this.hScroll.set(n,!1),this.vScroll&&this.vScroll.set(l,!1),(u||void 0===u)&&(n={},this.hScroll&&(n.x=this.hScroll.getRatio_()),this.vScroll&&(n.y=this.vScroll.getRatio_()),this.workspace_.setMetrics(n))},s.ScrollbarPair.prototype.setX=function(n){this.hScroll&&this.hScroll.set(n,!0)},s.ScrollbarPair.prototype.setY=function(n){this.vScroll&&this.vScroll.set(n,!0)},s.ScrollbarPair.prototype.setContainerVisible=function(n){this.hScroll&&this.hScroll.setContainerVisible(n),this.vScroll&&this.vScroll.setContainerVisible(n)},s.ScrollbarPair.prototype.isVisible=function(){var n=!1;return this.hScroll&&(n=this.hScroll.isVisible()),this.vScroll&&(n=n||this.vScroll.isVisible()),n},s.ScrollbarPair.prototype.resizeContent=function(n){this.hScroll&&this.hScroll.resizeContentHorizontal(n),this.vScroll&&this.vScroll.resizeContentVertical(n)},s.ScrollbarPair.prototype.resizeView=function(n){this.hScroll&&this.hScroll.resizeViewHorizontal(n),this.vScroll&&this.vScroll.resizeViewVertical(n)},s.Scrollbar=function(n,l,u,h,_){this.workspace_=n,this.pair_=u||!1,this.horizontal_=l,this.margin_=void 0!==_?_:s.Scrollbar.DEFAULT_SCROLLBAR_MARGIN,this.ratio=this.oldHostMetrics_=null,this.createDom_(h),this.position=new s.utils.Coordinate(0,0),n=s.Scrollbar.scrollbarThickness,l?(this.svgBackground_.setAttribute("height",n),this.outerSvg_.setAttribute("height",n),this.svgHandle_.setAttribute("height",n-5),this.svgHandle_.setAttribute("y",2.5),this.lengthAttribute_="width",this.positionAttribute_="x"):(this.svgBackground_.setAttribute("width",n),this.outerSvg_.setAttribute("width",n),this.svgHandle_.setAttribute("width",n-5),this.svgHandle_.setAttribute("x",2.5),this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=s.browserEvents.conditionalBind(this.svgBackground_,"mousedown",this,this.onMouseDownBar_),this.onMouseDownHandleWrapper_=s.browserEvents.conditionalBind(this.svgHandle_,"mousedown",this,this.onMouseDownHandle_)},s.Scrollbar.prototype.origin_=new s.utils.Coordinate(0,0),s.Scrollbar.prototype.startDragMouse_=0,s.Scrollbar.prototype.scrollbarLength_=0,s.Scrollbar.prototype.handleLength_=0,s.Scrollbar.prototype.handlePosition_=0,s.Scrollbar.prototype.isVisible_=!0,s.Scrollbar.prototype.containerVisible_=!0,s.Scrollbar.scrollbarThickness=15,s.Touch.TOUCH_ENABLED&&(s.Scrollbar.scrollbarThickness=25),s.Scrollbar.DEFAULT_SCROLLBAR_MARGIN=.5,s.Scrollbar.metricsAreEquivalent_=function(n,l){return n.viewWidth==l.viewWidth&&n.viewHeight==l.viewHeight&&n.viewLeft==l.viewLeft&&n.viewTop==l.viewTop&&n.absoluteTop==l.absoluteTop&&n.absoluteLeft==l.absoluteLeft&&n.scrollWidth==l.scrollWidth&&n.scrollHeight==l.scrollHeight&&n.scrollLeft==l.scrollLeft&&n.scrollTop==l.scrollTop},s.Scrollbar.prototype.dispose=function(){this.cleanUp_(),s.browserEvents.unbind(this.onMouseDownBarWrapper_),this.onMouseDownBarWrapper_=null,s.browserEvents.unbind(this.onMouseDownHandleWrapper_),this.onMouseDownHandleWrapper_=null,s.utils.dom.removeNode(this.outerSvg_),this.svgBackground_=this.svgGroup_=this.outerSvg_=null,this.svgHandle_&&(this.workspace_.getThemeManager().unsubscribe(this.svgHandle_),this.svgHandle_=null),this.workspace_=null},s.Scrollbar.prototype.constrainHandleLength_=function(n){return 0>=n||isNaN(n)?0:Math.min(n,this.scrollbarLength_)},s.Scrollbar.prototype.setHandleLength_=function(n){this.handleLength_=n,this.svgHandle_.setAttribute(this.lengthAttribute_,this.handleLength_)},s.Scrollbar.prototype.constrainHandlePosition_=function(n){return 0>=n||isNaN(n)?0:Math.min(n,this.scrollbarLength_-this.handleLength_)},s.Scrollbar.prototype.setHandlePosition=function(n){this.handlePosition_=n,this.svgHandle_.setAttribute(this.positionAttribute_,this.handlePosition_)},s.Scrollbar.prototype.setScrollbarLength_=function(n){this.scrollbarLength_=n,this.outerSvg_.setAttribute(this.lengthAttribute_,this.scrollbarLength_),this.svgBackground_.setAttribute(this.lengthAttribute_,this.scrollbarLength_)},s.Scrollbar.prototype.setPosition=function(n,l){this.position.x=n,this.position.y=l,s.utils.dom.setCssTransform(this.outerSvg_,"translate("+(this.position.x+this.origin_.x)+"px,"+(this.position.y+this.origin_.y)+"px)")},s.Scrollbar.prototype.resize=function(n){!n&&!(n=this.workspace_.getMetrics())||this.oldHostMetrics_&&s.Scrollbar.metricsAreEquivalent_(n,this.oldHostMetrics_)||(this.horizontal_?this.resizeHorizontal_(n):this.resizeVertical_(n),this.oldHostMetrics_=n,this.updateMetrics_())},s.Scrollbar.prototype.requiresViewResize_=function(n){return!this.oldHostMetrics_||this.oldHostMetrics_.viewWidth!==n.viewWidth||this.oldHostMetrics_.viewHeight!==n.viewHeight||this.oldHostMetrics_.absoluteLeft!==n.absoluteLeft||this.oldHostMetrics_.absoluteTop!==n.absoluteTop},s.Scrollbar.prototype.resizeHorizontal_=function(n){this.requiresViewResize_(n)?this.resizeViewHorizontal(n):this.resizeContentHorizontal(n)},s.Scrollbar.prototype.resizeViewHorizontal=function(n){var l=n.viewWidth-2*this.margin_;this.pair_&&(l-=s.Scrollbar.scrollbarThickness),this.setScrollbarLength_(Math.max(0,l)),l=n.absoluteLeft+this.margin_,this.pair_&&this.workspace_.RTL&&(l+=s.Scrollbar.scrollbarThickness),this.setPosition(l,n.absoluteTop+n.viewHeight-s.Scrollbar.scrollbarThickness-this.margin_),this.resizeContentHorizontal(n)},s.Scrollbar.prototype.resizeContentHorizontal=function(n){if(n.viewWidth>=n.scrollWidth)this.setHandleLength_(this.scrollbarLength_),this.setHandlePosition(0),this.pair_||this.setVisible(!1);else{this.pair_||this.setVisible(!0);var l=this.scrollbarLength_*n.viewWidth/n.scrollWidth;l=this.constrainHandleLength_(l),this.setHandleLength_(l);var u=this.scrollbarLength_-this.handleLength_;n=this.constrainHandlePosition_(n=(n.viewLeft-n.scrollLeft)/(l=n.scrollWidth-n.viewWidth)*u),this.setHandlePosition(n),this.ratio=u/l}},s.Scrollbar.prototype.resizeVertical_=function(n){this.requiresViewResize_(n)?this.resizeViewVertical(n):this.resizeContentVertical(n)},s.Scrollbar.prototype.resizeViewVertical=function(n){var l=n.viewHeight-2*this.margin_;this.pair_&&(l-=s.Scrollbar.scrollbarThickness),this.setScrollbarLength_(Math.max(0,l)),this.setPosition(this.workspace_.RTL?n.absoluteLeft+this.margin_:n.absoluteLeft+n.viewWidth-s.Scrollbar.scrollbarThickness-this.margin_,n.absoluteTop+this.margin_),this.resizeContentVertical(n)},s.Scrollbar.prototype.resizeContentVertical=function(n){if(n.viewHeight>=n.scrollHeight)this.setHandleLength_(this.scrollbarLength_),this.setHandlePosition(0),this.pair_||this.setVisible(!1);else{this.pair_||this.setVisible(!0);var l=this.scrollbarLength_*n.viewHeight/n.scrollHeight;l=this.constrainHandleLength_(l),this.setHandleLength_(l);var u=this.scrollbarLength_-this.handleLength_;n=this.constrainHandlePosition_(n=(n.viewTop-n.scrollTop)/(l=n.scrollHeight-n.viewHeight)*u),this.setHandlePosition(n),this.ratio=u/l}},s.Scrollbar.prototype.createDom_=function(n){var l="blocklyScrollbar"+(this.horizontal_?"Horizontal":"Vertical");n&&(l+=" "+n),this.outerSvg_=s.utils.dom.createSvgElement(s.utils.Svg.SVG,{class:l},null),this.svgGroup_=s.utils.dom.createSvgElement(s.utils.Svg.G,{},this.outerSvg_),this.svgBackground_=s.utils.dom.createSvgElement(s.utils.Svg.RECT,{class:"blocklyScrollbarBackground"},this.svgGroup_),n=Math.floor((s.Scrollbar.scrollbarThickness-5)/2),this.svgHandle_=s.utils.dom.createSvgElement(s.utils.Svg.RECT,{class:"blocklyScrollbarHandle",rx:n,ry:n},this.svgGroup_),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarOpacity","fill-opacity"),s.utils.dom.insertAfter(this.outerSvg_,this.workspace_.getParentSvg())},s.Scrollbar.prototype.isVisible=function(){return this.isVisible_},s.Scrollbar.prototype.setContainerVisible=function(n){var l=n!=this.containerVisible_;this.containerVisible_=n,l&&this.updateDisplay_()},s.Scrollbar.prototype.setVisible=function(n){var l=n!=this.isVisible();if(this.pair_)throw Error("Unable to toggle visibility of paired scrollbars.");this.isVisible_=n,l&&this.updateDisplay_()},s.Scrollbar.prototype.updateDisplay_=function(){this.containerVisible_&&this.isVisible()?this.outerSvg_.setAttribute("display","block"):this.outerSvg_.setAttribute("display","none")},s.Scrollbar.prototype.onMouseDownBar_=function(n){if(this.workspace_.markFocused(),s.Touch.clearTouchIdentifier(),this.cleanUp_(),s.utils.isRightButton(n))n.stopPropagation();else{var l=s.utils.mouseToSvg(n,this.workspace_.getParentSvg(),this.workspace_.getInverseScreenCTM());l=this.horizontal_?l.x:l.y;var u=s.utils.getInjectionDivXY_(this.svgHandle_),h=this.handlePosition_,_=.95*this.handleLength_;l<=(u=this.horizontal_?u.x:u.y)?h-=_:l>=u+this.handleLength_&&(h+=_),this.setHandlePosition(this.constrainHandlePosition_(h)),this.updateMetrics_(),n.stopPropagation(),n.preventDefault()}},s.Scrollbar.prototype.onMouseDownHandle_=function(n){this.workspace_.markFocused(),this.cleanUp_(),s.utils.isRightButton(n)?n.stopPropagation():(this.startDragHandle=this.handlePosition_,this.workspace_.setupDragSurface(),this.startDragMouse_=this.horizontal_?n.clientX:n.clientY,s.Scrollbar.onMouseUpWrapper_=s.browserEvents.conditionalBind(document,"mouseup",this,this.onMouseUpHandle_),s.Scrollbar.onMouseMoveWrapper_=s.browserEvents.conditionalBind(document,"mousemove",this,this.onMouseMoveHandle_),n.stopPropagation(),n.preventDefault())},s.Scrollbar.prototype.onMouseMoveHandle_=function(n){this.setHandlePosition(this.constrainHandlePosition_(this.startDragHandle+((this.horizontal_?n.clientX:n.clientY)-this.startDragMouse_))),this.updateMetrics_()},s.Scrollbar.prototype.onMouseUpHandle_=function(){this.workspace_.resetDragSurface(),s.Touch.clearTouchIdentifier(),this.cleanUp_()},s.Scrollbar.prototype.cleanUp_=function(){s.hideChaff(!0),s.Scrollbar.onMouseUpWrapper_&&(s.browserEvents.unbind(s.Scrollbar.onMouseUpWrapper_),s.Scrollbar.onMouseUpWrapper_=null),s.Scrollbar.onMouseMoveWrapper_&&(s.browserEvents.unbind(s.Scrollbar.onMouseMoveWrapper_),s.Scrollbar.onMouseMoveWrapper_=null)},s.Scrollbar.prototype.getRatio_=function(){var n=this.handlePosition_/(this.scrollbarLength_-this.handleLength_);return isNaN(n)&&(n=0),n},s.Scrollbar.prototype.updateMetrics_=function(){var n=this.getRatio_(),l={};this.horizontal_?l.x=n:l.y=n,this.workspace_.setMetrics(l)},s.Scrollbar.prototype.set=function(n,l){this.setHandlePosition(this.constrainHandlePosition_(n*this.ratio)),(l||void 0===l)&&this.updateMetrics_()},s.Scrollbar.prototype.setOrigin=function(n,l){this.origin_=new s.utils.Coordinate(n,l)},s.Tooltip={},s.Tooltip.visible=!1,s.Tooltip.blocked_=!1,s.Tooltip.LIMIT=50,s.Tooltip.mouseOutPid_=0,s.Tooltip.showPid_=0,s.Tooltip.lastX_=0,s.Tooltip.lastY_=0,s.Tooltip.element_=null,s.Tooltip.poisonedElement_=null,s.Tooltip.OFFSET_X=0,s.Tooltip.OFFSET_Y=10,s.Tooltip.RADIUS_OK=10,s.Tooltip.HOVER_MS=750,s.Tooltip.MARGINS=5,s.Tooltip.DIV=null,s.Tooltip.getTooltipOfObject=function(n){if(n=s.Tooltip.getTargetObject_(n)){for(n=n.tooltip;"function"==typeof n;)n=n();if("string"!=typeof n)throw Error("Tooltip function must return a string.");return n}return""},s.Tooltip.getTargetObject_=function(n){for(;n&&n.tooltip;){if("string"==typeof n.tooltip||"function"==typeof n.tooltip)return n;n=n.tooltip}return null},s.Tooltip.createDom=function(){s.Tooltip.DIV||(s.Tooltip.DIV=document.createElement("div"),s.Tooltip.DIV.className="blocklyTooltipDiv",(s.parentContainer||document.body).appendChild(s.Tooltip.DIV))},s.Tooltip.bindMouseEvents=function(n){n.mouseOverWrapper_=s.browserEvents.bind(n,"mouseover",null,s.Tooltip.onMouseOver_),n.mouseOutWrapper_=s.browserEvents.bind(n,"mouseout",null,s.Tooltip.onMouseOut_),n.addEventListener("mousemove",s.Tooltip.onMouseMove_,!1)},s.Tooltip.unbindMouseEvents=function(n){n&&(s.browserEvents.unbind(n.mouseOverWrapper_),s.browserEvents.unbind(n.mouseOutWrapper_),n.removeEventListener("mousemove",s.Tooltip.onMouseMove_))},s.Tooltip.onMouseOver_=function(n){s.Tooltip.blocked_||(n=s.Tooltip.getTargetObject_(n.currentTarget),s.Tooltip.element_!=n&&(s.Tooltip.hide(),s.Tooltip.poisonedElement_=null,s.Tooltip.element_=n),clearTimeout(s.Tooltip.mouseOutPid_))},s.Tooltip.onMouseOut_=function(n){s.Tooltip.blocked_||(s.Tooltip.mouseOutPid_=setTimeout(function(){s.Tooltip.element_=null,s.Tooltip.poisonedElement_=null,s.Tooltip.hide()},1),clearTimeout(s.Tooltip.showPid_))},s.Tooltip.onMouseMove_=function(n){if(s.Tooltip.element_&&s.Tooltip.element_.tooltip&&!s.Tooltip.blocked_)if(s.Tooltip.visible){var l=s.Tooltip.lastX_-n.pageX;n=s.Tooltip.lastY_-n.pageY,Math.sqrt(l*l+n*n)>s.Tooltip.RADIUS_OK&&s.Tooltip.hide()}else s.Tooltip.poisonedElement_!=s.Tooltip.element_&&(clearTimeout(s.Tooltip.showPid_),s.Tooltip.lastX_=n.pageX,s.Tooltip.lastY_=n.pageY,s.Tooltip.showPid_=setTimeout(s.Tooltip.show_,s.Tooltip.HOVER_MS))},s.Tooltip.dispose=function(){s.Tooltip.element_=null,s.Tooltip.poisonedElement_=null,s.Tooltip.hide()},s.Tooltip.hide=function(){s.Tooltip.visible&&(s.Tooltip.visible=!1,s.Tooltip.DIV&&(s.Tooltip.DIV.style.display="none")),s.Tooltip.showPid_&&clearTimeout(s.Tooltip.showPid_)},s.Tooltip.block=function(){s.Tooltip.hide(),s.Tooltip.blocked_=!0},s.Tooltip.unblock=function(){s.Tooltip.blocked_=!1},s.Tooltip.show_=function(){if(!s.Tooltip.blocked_&&(s.Tooltip.poisonedElement_=s.Tooltip.element_,s.Tooltip.DIV)){s.Tooltip.DIV.textContent="";var n=s.Tooltip.getTooltipOfObject(s.Tooltip.element_);n=(n=s.utils.string.wrap(n,s.Tooltip.LIMIT)).split("\n");for(var l=0;l<n.length;l++){var u=document.createElement("div");u.appendChild(document.createTextNode(n[l])),s.Tooltip.DIV.appendChild(u)}n=s.Tooltip.element_.RTL,l=document.documentElement.clientWidth,u=document.documentElement.clientHeight,s.Tooltip.DIV.style.direction=n?"rtl":"ltr",s.Tooltip.DIV.style.display="block",s.Tooltip.visible=!0;var h=s.Tooltip.lastX_;h=n?h-(s.Tooltip.OFFSET_X+s.Tooltip.DIV.offsetWidth):h+s.Tooltip.OFFSET_X;var _=s.Tooltip.lastY_+s.Tooltip.OFFSET_Y;_+s.Tooltip.DIV.offsetHeight>u+window.scrollY&&(_-=s.Tooltip.DIV.offsetHeight+2*s.Tooltip.OFFSET_Y),n?h=Math.max(s.Tooltip.MARGINS-window.scrollX,h):h+s.Tooltip.DIV.offsetWidth>l+window.scrollX-2*s.Tooltip.MARGINS&&(h=l-s.Tooltip.DIV.offsetWidth-2*s.Tooltip.MARGINS),s.Tooltip.DIV.style.top=_+"px",s.Tooltip.DIV.style.left=h+"px"}},s.utils.aria={},s.utils.aria.ARIA_PREFIX_="aria-",s.utils.aria.ROLE_ATTRIBUTE_="role",s.utils.aria.Role={GRID:"grid",GRIDCELL:"gridcell",GROUP:"group",LISTBOX:"listbox",MENU:"menu",MENUITEM:"menuitem",MENUITEMCHECKBOX:"menuitemcheckbox",OPTION:"option",PRESENTATION:"presentation",ROW:"row",TREE:"tree",TREEITEM:"treeitem"},s.utils.aria.State={ACTIVEDESCENDANT:"activedescendant",COLCOUNT:"colcount",DISABLED:"disabled",EXPANDED:"expanded",INVALID:"invalid",LABEL:"label",LABELLEDBY:"labelledby",LEVEL:"level",ORIENTATION:"orientation",POSINSET:"posinset",ROWCOUNT:"rowcount",SELECTED:"selected",SETSIZE:"setsize",VALUEMAX:"valuemax",VALUEMIN:"valuemin"},s.utils.aria.setRole=function(n,l){n.setAttribute(s.utils.aria.ROLE_ATTRIBUTE_,l)},s.utils.aria.setState=function(n,l,u){Array.isArray(u)&&(u=u.join(" ")),n.setAttribute(s.utils.aria.ARIA_PREFIX_+l,u)},s.IASTNodeLocation=function(){},s.IASTNodeLocationSvg=function(){},s.IASTNodeLocationWithBlock=function(){},s.IKeyboardAccessible=function(){},s.utils.deprecation={},s.utils.deprecation.warn=function(n,l,u,h){n=n+" was deprecated on "+l+" and will be deleted on "+u+".",h&&(n+="\nUse "+h+" instead."),console.warn(n)},s.Connection=function(n,l){this.sourceBlock_=n,this.type=l},s.Connection.CAN_CONNECT=0,s.Connection.REASON_SELF_CONNECTION=1,s.Connection.REASON_WRONG_TYPE=2,s.Connection.REASON_TARGET_NULL=3,s.Connection.REASON_CHECKS_FAILED=4,s.Connection.REASON_DIFFERENT_WORKSPACES=5,s.Connection.REASON_SHADOW_PARENT=6,s.Connection.REASON_DRAG_CHECKS_FAILED=7,s.Connection.prototype.targetConnection=null,s.Connection.prototype.disposed=!1,s.Connection.prototype.check_=null,s.Connection.prototype.shadowDom_=null,s.Connection.prototype.x=0,s.Connection.prototype.y=0,s.Connection.prototype.connect_=function(n){var O,l=s.connectionTypes.INPUT_VALUE,u=this.getSourceBlock(),h=n.getSourceBlock();if(n.isConnected()&&n.disconnect(),this.isConnected()){var _=this.getShadowDom(!0);this.shadowDom_=null;var b=this.targetBlock();if(b.isShadow())b.dispose(!1);else{this.disconnect();var R=b}this.shadowDom_=_}s.Events.isEnabled()&&(O=new(s.Events.get(s.Events.BLOCK_MOVE))(h)),s.Connection.connectReciprocally_(this,n),h.setParent(u),O&&(O.recordNew(),s.Events.fire(O)),R&&((h=s.Connection.getConnectionForOrphanedConnection(h,n=this.type===l?R.outputConnection:R.previousConnection))?n.connect(h):n.onFailedConnect(this))},s.Connection.prototype.dispose=function(){if(this.isConnected()){this.setShadowDom(null);var n=this.targetBlock();n&&n.unplug()}this.disposed=!0},s.Connection.prototype.getSourceBlock=function(){return this.sourceBlock_},s.Connection.prototype.isSuperior=function(){return this.type==s.connectionTypes.INPUT_VALUE||this.type==s.connectionTypes.NEXT_STATEMENT},s.Connection.prototype.isConnected=function(){return!!this.targetConnection},s.Connection.prototype.canConnectWithReason=function(n){return s.utils.deprecation.warn("Connection.prototype.canConnectWithReason","July 2020","July 2021","the workspace's connection checker"),this.getConnectionChecker().canConnectWithReason(this,n,!1)},s.Connection.prototype.checkConnection=function(n){s.utils.deprecation.warn("Connection.prototype.checkConnection","July 2020","July 2021","the workspace's connection checker");var l=this.getConnectionChecker(),u=l.canConnectWithReason(this,n,!1);if(u!=s.Connection.CAN_CONNECT)throw Error(l.getErrorMessage(u,this,n))},s.Connection.prototype.getConnectionChecker=function(){return this.sourceBlock_.workspace.connectionChecker},s.Connection.prototype.isConnectionAllowed=function(n){return s.utils.deprecation.warn("Connection.prototype.isConnectionAllowed","July 2020","July 2021","the workspace's connection checker"),this.getConnectionChecker().canConnect(this,n,!0)},s.Connection.prototype.onFailedConnect=function(n){},s.Connection.prototype.connect=function(n){if(this.targetConnection!=n&&this.getConnectionChecker().canConnect(this,n,!1)){var l=s.Events.getGroup();l||s.Events.setGroup(!0),this.isSuperior()?this.connect_(n):n.connect_(this),l||s.Events.setGroup(!1)}},s.Connection.connectReciprocally_=function(n,l){if(!n||!l)throw Error("Cannot connect null connections.");n.targetConnection=l,l.targetConnection=n},s.Connection.getSingleConnection_=function(n,l){for(var b,u=null,h=(l=l.outputConnection).getConnectionChecker(),_=0;b=n.inputList[_];_++)if((b=b.connection)&&h.canConnect(l,b,!1)){if(u)return null;u=b}return u},s.Connection.getConnectionForOrphanedOutput_=function(n,l){for(var u;u=s.Connection.getSingleConnection_(n,l);)if(!(n=u.targetBlock())||n.isShadow())return u;return null},s.Connection.getConnectionForOrphanedConnection=function(n,l){if(l.type===s.connectionTypes.OUTPUT_VALUE)return s.Connection.getConnectionForOrphanedOutput_(n,l.getSourceBlock());n=n.lastConnectionInStack(!0);var u=l.getConnectionChecker();return n&&u.canConnect(l,n,!1)?n:null},s.Connection.prototype.disconnect=function(){var n=this.targetConnection;if(!n)throw Error("Source connection not connected.");if(n.targetConnection!=this)throw Error("Target connection not connected to source connection.");if(this.isSuperior()){var l=this.sourceBlock_,u=n.getSourceBlock();n=this}else l=n.getSourceBlock(),u=this.sourceBlock_;var h=s.Events.getGroup();h||s.Events.setGroup(!0),this.disconnectInternal_(l,u),u.isShadow()||n.respawnShadow_(),h||s.Events.setGroup(!1)},s.Connection.prototype.disconnectInternal_=function(n,l){var u;s.Events.isEnabled()&&(u=new(s.Events.get(s.Events.BLOCK_MOVE))(l)),this.targetConnection=this.targetConnection.targetConnection=null,l.setParent(null),u&&(u.recordNew(),s.Events.fire(u))},s.Connection.prototype.respawnShadow_=function(){var n=this.getSourceBlock(),l=this.getShadowDom();if(n.workspace&&l)if((n=s.Xml.domToBlock(l,n.workspace)).outputConnection)this.connect(n.outputConnection);else{if(!n.previousConnection)throw Error("Child block does not have output or previous statement.");this.connect(n.previousConnection)}},s.Connection.prototype.targetBlock=function(){return this.isConnected()?this.targetConnection.getSourceBlock():null},s.Connection.prototype.checkType=function(n){return s.utils.deprecation.warn("Connection.prototype.checkType","October 2019","January 2021","the workspace's connection checker"),this.getConnectionChecker().canConnect(this,n,!1)},s.Connection.prototype.checkType_=function(n){return s.utils.deprecation.warn("Connection.prototype.checkType_","October 2019","January 2021","the workspace's connection checker"),this.checkType(n)},s.Connection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()},s.Connection.prototype.setCheck=function(n){return n?(Array.isArray(n)||(n=[n]),this.check_=n,this.onCheckChanged_()):this.check_=null,this},s.Connection.prototype.getCheck=function(){return this.check_},s.Connection.prototype.setShadowDom=function(n){this.shadowDom_=n,(n=this.targetBlock())?n.isShadow()&&(n.dispose(!1),this.respawnShadow_()):this.respawnShadow_()},s.Connection.prototype.getShadowDom=function(n){return n&&this.targetBlock().isShadow()?s.Xml.blockToDom(this.targetBlock()):this.shadowDom_},s.Connection.prototype.neighbours=function(n){return[]},s.Connection.prototype.getParentInput=function(){for(var n=null,l=this.sourceBlock_.inputList,u=0;u<l.length;u++)if(l[u].connection===this){n=l[u];break}return n},s.Connection.prototype.toString=function(){var n=this.sourceBlock_;if(!n)return"Orphan Connection";if(n.outputConnection==this)var l="Output Connection of ";else if(n.previousConnection==this)l="Previous Connection of ";else if(n.nextConnection==this)l="Next Connection of ";else{l=null;for(var h,u=0;h=n.inputList[u];u++)if(h.connection==this){l=h;break}if(!l)return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection";l='Input "'+l.name+'" connection on '}return l+n.toDevString()},s.IConnectionChecker=function(){},s.ConnectionChecker=function(){},s.ConnectionChecker.prototype.canConnect=function(n,l,u,h){return this.canConnectWithReason(n,l,u,h)==s.Connection.CAN_CONNECT},s.ConnectionChecker.prototype.canConnectWithReason=function(n,l,u,h){var _=this.doSafetyChecks(n,l);return _!=s.Connection.CAN_CONNECT?_:this.doTypeChecks(n,l)?u&&!this.doDragChecks(n,l,h||0)?s.Connection.REASON_DRAG_CHECKS_FAILED:s.Connection.CAN_CONNECT:s.Connection.REASON_CHECKS_FAILED},s.ConnectionChecker.prototype.getErrorMessage=function(n,l,u){switch(n){case s.Connection.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case s.Connection.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case s.Connection.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case s.Connection.REASON_TARGET_NULL:return"Target connection is null.";case s.Connection.REASON_CHECKS_FAILED:return"Connection checks failed. "+l+" expected "+l.getCheck()+", found "+u.getCheck();case s.Connection.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case s.Connection.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";default:return"Unknown connection failure: this should never happen!"}},s.ConnectionChecker.prototype.doSafetyChecks=function(n,l){if(!n||!l)return s.Connection.REASON_TARGET_NULL;if(n.isSuperior())var u=n.getSourceBlock(),h=l.getSourceBlock();else h=n.getSourceBlock(),u=l.getSourceBlock();return u==h?s.Connection.REASON_SELF_CONNECTION:l.type!=s.OPPOSITE_TYPE[n.type]?s.Connection.REASON_WRONG_TYPE:u.workspace!==h.workspace?s.Connection.REASON_DIFFERENT_WORKSPACES:u.isShadow()&&!h.isShadow()?s.Connection.REASON_SHADOW_PARENT:s.Connection.CAN_CONNECT},s.ConnectionChecker.prototype.doTypeChecks=function(n,l){if(n=n.getCheck(),l=l.getCheck(),!n||!l)return!0;for(var u=0;u<n.length;u++)if(-1!=l.indexOf(n[u]))return!0;return!1},s.ConnectionChecker.prototype.doDragChecks=function(n,l,u){if(n.distanceFrom(l)>u||l.getSourceBlock().isInsertionMarker())return!1;switch(l.type){case s.connectionTypes.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(n,l);case s.connectionTypes.OUTPUT_VALUE:if(l.isConnected()&&!l.targetBlock().isInsertionMarker()||n.isConnected())return!1;break;case s.connectionTypes.INPUT_VALUE:if(l.isConnected()&&!l.targetBlock().isMovable()&&!l.targetBlock().isShadow())return!1;break;case s.connectionTypes.NEXT_STATEMENT:if(l.isConnected()&&!n.getSourceBlock().nextConnection&&!l.targetBlock().isShadow()&&l.targetBlock().nextConnection)return!1;break;default:return!1}return-1==s.draggingConnections.indexOf(l)},s.ConnectionChecker.prototype.canConnectToPrevious_=function(n,l){return!(n.targetConnection||-1!=s.draggingConnections.indexOf(l)||l.targetConnection&&(!(n=l.targetBlock()).isInsertionMarker()||n.getPreviousBlock()))},s.registry.register(s.registry.Type.CONNECTION_CHECKER,s.registry.DEFAULT,s.ConnectionChecker),s.VariableMap=function(n){this.variableMap_=Object.create(null),this.workspace=n},s.VariableMap.prototype.clear=function(){this.variableMap_=Object.create(null)},s.VariableMap.prototype.renameVariable=function(n,l){var u=this.getVariable(l,n.type),h=this.workspace.getAllBlocks(!1);s.Events.setGroup(!0);try{u&&u.getId()!=n.getId()?this.renameVariableWithConflict_(n,l,u,h):this.renameVariableAndUses_(n,l,h)}finally{s.Events.setGroup(!1)}},s.VariableMap.prototype.renameVariableById=function(n,l){var u=this.getVariableById(n);if(!u)throw Error("Tried to rename a variable that didn't exist. ID: "+n);this.renameVariable(u,l)},s.VariableMap.prototype.renameVariableAndUses_=function(n,l,u){for(s.Events.fire(new(s.Events.get(s.Events.VAR_RENAME))(n,l)),n.name=l,l=0;l<u.length;l++)u[l].updateVarName(n)},s.VariableMap.prototype.renameVariableWithConflict_=function(n,l,u,h){var _=n.type;for(l!=u.name&&this.renameVariableAndUses_(u,l,h),l=0;l<h.length;l++)h[l].renameVarById(n.getId(),u.getId());s.Events.fire(new(s.Events.get(s.Events.VAR_DELETE))(n)),n=this.getVariablesOfType(_).indexOf(n),this.variableMap_[_].splice(n,1)},s.VariableMap.prototype.createVariable=function(n,l,u){var h=this.getVariable(n,l);if(h){if(u&&h.getId()!=u)throw Error('Variable "'+n+'" is already in use and its id is "'+h.getId()+'" which conflicts with the passed in id, "'+u+'".');return h}if(u&&this.getVariableById(u))throw Error('Variable id, "'+u+'", is already in use.');return h=u||s.utils.genUid(),h=new s.VariableModel(this.workspace,n,l=l||"",h),(n=this.variableMap_[l]||[]).push(h),delete this.variableMap_[l],this.variableMap_[l]=n,h},s.VariableMap.prototype.deleteVariable=function(n){for(var h,l=this.variableMap_[n.type],u=0;h=l[u];u++)if(h.getId()==n.getId()){l.splice(u,1),s.Events.fire(new(s.Events.get(s.Events.VAR_DELETE))(n));break}},s.VariableMap.prototype.deleteVariableById=function(n){var l=this.getVariableById(n);if(l){var _,u=l.name,h=this.getVariableUsesById(n);for(n=0;_=h[n];n++)if("procedures_defnoreturn"==_.type||"procedures_defreturn"==_.type)return n=_.getFieldValue("NAME"),u=s.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",u).replace("%2",n),void s.alert(u);var b=this;1<h.length?(u=s.Msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(h.length)).replace("%2",u),s.confirm(u,function(R){R&&l&&b.deleteVariableInternal(l,h)})):b.deleteVariableInternal(l,h)}else console.warn("Can't delete non-existent variable: "+n)},s.VariableMap.prototype.deleteVariableInternal=function(n,l){var u=s.Events.getGroup();u||s.Events.setGroup(!0);try{for(var h=0;h<l.length;h++)l[h].dispose(!0);this.deleteVariable(n)}finally{u||s.Events.setGroup(!1)}},s.VariableMap.prototype.getVariable=function(n,l){if(l=this.variableMap_[l||""])for(var h,u=0;h=l[u];u++)if(s.Names.equals(h.name,n))return h;return null},s.VariableMap.prototype.getVariableById=function(n){for(var l=Object.keys(this.variableMap_),u=0;u<l.length;u++)for(var b,h=l[u],_=0;b=this.variableMap_[h][_];_++)if(b.getId()==n)return b;return null},s.VariableMap.prototype.getVariablesOfType=function(n){return(n=this.variableMap_[n||""])?n.slice():[]},s.VariableMap.prototype.getVariableTypes=function(n){var l={};s.utils.object.mixin(l,this.variableMap_),n&&n.getPotentialVariableMap()&&s.utils.object.mixin(l,n.getPotentialVariableMap().variableMap_),n=Object.keys(l),l=!1;for(var u=0;u<n.length;u++)""==n[u]&&(l=!0);return l||n.push(""),n},s.VariableMap.prototype.getAllVariables=function(){var l,n=[];for(l in this.variableMap_)n=n.concat(this.variableMap_[l]);return n},s.VariableMap.prototype.getAllVariableNames=function(){var l,n=[];for(l in this.variableMap_)for(var _,u=this.variableMap_[l],h=0;_=u[h];h++)n.push(_.name);return n},s.VariableMap.prototype.getVariableUsesById=function(n){for(var l=[],u=this.workspace.getAllBlocks(!1),h=0;h<u.length;h++){var _=u[h].getVarModels();if(_)for(var b=0;b<_.length;b++)_[b].getId()==n&&l.push(u[h])}return l},s.Workspace=function(n){this.id=s.utils.genUid(),s.Workspace.WorkspaceDB_[this.id]=this,this.options=n||new s.Options({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(s.registry.getClassFromOptions(s.registry.Type.CONNECTION_CHECKER,this.options,!0))(this),this.topBlocks_=[],this.topComments_=[],this.commentDB_=Object.create(null),this.listeners_=[],this.undoStack_=[],this.redoStack_=[],this.blockDB_=Object.create(null),this.typedBlocksDB_=Object.create(null),this.variableMap_=new s.VariableMap(this),this.potentialVariableMap_=null},s.Workspace.prototype.rendered=!1,s.Workspace.prototype.isClearing=!1,s.Workspace.prototype.MAX_UNDO=1024,s.Workspace.prototype.connectionDBList=null,s.Workspace.prototype.dispose=function(){this.listeners_.length=0,this.clear(),delete s.Workspace.WorkspaceDB_[this.id]},s.Workspace.SCAN_ANGLE=3,s.Workspace.prototype.sortObjects_=function(n,l){return n=n.getRelativeToSurfaceXY(),l=l.getRelativeToSurfaceXY(),n.y+s.Workspace.prototype.sortObjects_.offset*n.x-(l.y+s.Workspace.prototype.sortObjects_.offset*l.x)},s.Workspace.prototype.addTopBlock=function(n){this.topBlocks_.push(n)},s.Workspace.prototype.removeTopBlock=function(n){if(!s.utils.arrayRemove(this.topBlocks_,n))throw Error("Block not present in workspace's list of top-most blocks.")},s.Workspace.prototype.getTopBlocks=function(n){var l=[].concat(this.topBlocks_);return n&&1<l.length&&(this.sortObjects_.offset=Math.sin(s.utils.math.toRadians(s.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),l.sort(this.sortObjects_)),l},s.Workspace.prototype.addTypedBlock=function(n){this.typedBlocksDB_[n.type]||(this.typedBlocksDB_[n.type]=[]),this.typedBlocksDB_[n.type].push(n)},s.Workspace.prototype.removeTypedBlock=function(n){this.typedBlocksDB_[n.type].splice(this.typedBlocksDB_[n.type].indexOf(n),1),this.typedBlocksDB_[n.type].length||delete this.typedBlocksDB_[n.type]},s.Workspace.prototype.getBlocksByType=function(n,l){return this.typedBlocksDB_[n]?(n=this.typedBlocksDB_[n].slice(0),l&&1<n.length&&(this.sortObjects_.offset=Math.sin(s.utils.math.toRadians(s.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),n.sort(this.sortObjects_)),n):[]},s.Workspace.prototype.addTopComment=function(n){this.topComments_.push(n),this.commentDB_[n.id]&&console.warn('Overriding an existing comment on this workspace, with id "'+n.id+'"'),this.commentDB_[n.id]=n},s.Workspace.prototype.removeTopComment=function(n){if(!s.utils.arrayRemove(this.topComments_,n))throw Error("Comment not present in workspace's list of top-most comments.");delete this.commentDB_[n.id]},s.Workspace.prototype.getTopComments=function(n){var l=[].concat(this.topComments_);return n&&1<l.length&&(this.sortObjects_.offset=Math.sin(s.utils.math.toRadians(s.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),l.sort(this.sortObjects_)),l},s.Workspace.prototype.getAllBlocks=function(n){if(n){n=this.getTopBlocks(!0);for(var l=[],u=0;u<n.length;u++)l.push.apply(l,n[u].getDescendants(!0))}else for(l=this.getTopBlocks(!1),u=0;u<l.length;u++)l.push.apply(l,l[u].getChildren(!1));return l.filter(function(h){return!h.isInsertionMarker()})},s.Workspace.prototype.clear=function(){this.isClearing=!0;try{var n=s.Events.getGroup();for(n||s.Events.setGroup(!0);this.topBlocks_.length;)this.topBlocks_[0].dispose(!1);for(;this.topComments_.length;)this.topComments_[this.topComments_.length-1].dispose(!1);n||s.Events.setGroup(!1),this.variableMap_.clear(),this.potentialVariableMap_&&this.potentialVariableMap_.clear()}finally{this.isClearing=!1}},s.Workspace.prototype.renameVariableById=function(n,l){this.variableMap_.renameVariableById(n,l)},s.Workspace.prototype.createVariable=function(n,l,u){return this.variableMap_.createVariable(n,l,u)},s.Workspace.prototype.getVariableUsesById=function(n){return this.variableMap_.getVariableUsesById(n)},s.Workspace.prototype.deleteVariableById=function(n){this.variableMap_.deleteVariableById(n)},s.Workspace.prototype.getVariable=function(n,l){return this.variableMap_.getVariable(n,l)},s.Workspace.prototype.getVariableById=function(n){return this.variableMap_.getVariableById(n)},s.Workspace.prototype.getVariablesOfType=function(n){return this.variableMap_.getVariablesOfType(n)},s.Workspace.prototype.getVariableTypes=function(){return this.variableMap_.getVariableTypes(this)},s.Workspace.prototype.getAllVariables=function(){return this.variableMap_.getAllVariables()},s.Workspace.prototype.getAllVariableNames=function(){return this.variableMap_.getAllVariableNames()},s.Workspace.prototype.getWidth=function(){return 0},s.Workspace.prototype.newBlock=function(n,l){return new s.Block(this,n,l)},s.Workspace.prototype.remainingCapacity=function(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length},s.Workspace.prototype.remainingCapacityOfType=function(n){return this.options.maxInstances?(void 0!==this.options.maxInstances[n]?this.options.maxInstances[n]:1/0)-this.getBlocksByType(n,!1).length:1/0},s.Workspace.prototype.isCapacityAvailable=function(n){if(!this.hasBlockLimits())return!0;var u,l=0;for(u in n){if(n[u]>this.remainingCapacityOfType(u))return!1;l+=n[u]}return!(l>this.remainingCapacity())},s.Workspace.prototype.hasBlockLimits=function(){return this.options.maxBlocks!=1/0||!!this.options.maxInstances},s.Workspace.prototype.getUndoStack=function(){return this.undoStack_},s.Workspace.prototype.getRedoStack=function(){return this.redoStack_},s.Workspace.prototype.undo=function(n){var l=n?this.redoStack_:this.undoStack_,u=n?this.undoStack_:this.redoStack_,h=l.pop();if(h){for(var _=[h];l.length&&h.group&&h.group==l[l.length-1].group;)_.push(l.pop());for(l=0;h=_[l];l++)u.push(h);_=s.Events.filter(_,n),s.Events.recordUndo=!1;try{for(l=0;h=_[l];l++)h.run(n)}finally{s.Events.recordUndo=!0}}},s.Workspace.prototype.clearUndo=function(){this.undoStack_.length=0,this.redoStack_.length=0,s.Events.clearPendingUndo()},s.Workspace.prototype.addChangeListener=function(n){return this.listeners_.push(n),n},s.Workspace.prototype.removeChangeListener=function(n){s.utils.arrayRemove(this.listeners_,n)},s.Workspace.prototype.fireChangeListener=function(n){if(n.recordUndo)for(this.undoStack_.push(n),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(var u,l=0;u=this.listeners_[l];l++)u(n)},s.Workspace.prototype.getBlockById=function(n){return this.blockDB_[n]||null},s.Workspace.prototype.setBlockById=function(n,l){this.blockDB_[n]=l},s.Workspace.prototype.removeBlockById=function(n){delete this.blockDB_[n]},s.Workspace.prototype.getCommentById=function(n){return this.commentDB_[n]||null},s.Workspace.prototype.allInputsFilled=function(n){for(var h,l=this.getTopBlocks(!1),u=0;h=l[u];u++)if(!h.allInputsFilled(n))return!1;return!0},s.Workspace.prototype.getPotentialVariableMap=function(){return this.potentialVariableMap_},s.Workspace.prototype.createPotentialVariableMap=function(){this.potentialVariableMap_=new s.VariableMap(this)},s.Workspace.prototype.getVariableMap=function(){return this.variableMap_},s.Workspace.prototype.setVariableMap=function(n){this.variableMap_=n},s.Workspace.WorkspaceDB_=Object.create(null),s.Workspace.getById=function(n){return s.Workspace.WorkspaceDB_[n]||null},s.Workspace.getAll=function(){var l,n=[];for(l in s.Workspace.WorkspaceDB_)n.push(s.Workspace.WorkspaceDB_[l]);return n},s.WorkspaceDragSurfaceSvg=function(n){this.container_=n,this.createDom()},s.WorkspaceDragSurfaceSvg.prototype.SVG_=null,s.WorkspaceDragSurfaceSvg.prototype.container_=null,s.WorkspaceDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=s.utils.dom.createSvgElement(s.utils.Svg.SVG,{xmlns:s.utils.dom.SVG_NS,"xmlns:html":s.utils.dom.HTML_NS,"xmlns:xlink":s.utils.dom.XLINK_NS,version:"1.1",class:"blocklyWsDragSurface blocklyOverflowVisible"},null),this.container_.appendChild(this.SVG_))},s.WorkspaceDragSurfaceSvg.prototype.translateSurface=function(n,l){n=n.toFixed(0),l=l.toFixed(0),this.SVG_.style.display="block",s.utils.dom.setCssTransform(this.SVG_,"translate3d("+n+"px, "+l+"px, 0px)")},s.WorkspaceDragSurfaceSvg.prototype.getSurfaceTranslation=function(){return s.utils.getRelativeXY(this.SVG_)},s.WorkspaceDragSurfaceSvg.prototype.clearAndHide=function(n){if(!n)throw Error("Couldn't clear and hide the drag surface: missing new surface.");var l=this.SVG_.childNodes[0],u=this.SVG_.childNodes[1];if(!(l&&u&&s.utils.dom.hasClass(l,"blocklyBlockCanvas")&&s.utils.dom.hasClass(u,"blocklyBubbleCanvas")))throw Error("Couldn't clear and hide the drag surface. A node was missing.");if(null!=this.previousSibling_?s.utils.dom.insertAfter(l,this.previousSibling_):n.insertBefore(l,n.firstChild),s.utils.dom.insertAfter(u,l),this.SVG_.style.display="none",this.SVG_.childNodes.length)throw Error("Drag surface was not cleared.");s.utils.dom.setCssTransform(this.SVG_,""),this.previousSibling_=null},s.WorkspaceDragSurfaceSvg.prototype.setContentsAndShow=function(n,l,u,h,_,b){if(this.SVG_.childNodes.length)throw Error("Already dragging a block.");this.previousSibling_=u,n.setAttribute("transform","translate(0, 0) scale("+b+")"),l.setAttribute("transform","translate(0, 0) scale("+b+")"),this.SVG_.setAttribute("width",h),this.SVG_.setAttribute("height",_),this.SVG_.appendChild(n),this.SVG_.appendChild(l),this.SVG_.style.display="block"},s.blockRendering={},s.blockRendering.useDebugger=!1,s.blockRendering.register=function(n,l){s.registry.register(s.registry.Type.RENDERER,n,l)},s.blockRendering.unregister=function(n){s.registry.unregister(s.registry.Type.RENDERER,n)},s.blockRendering.startDebugger=function(){s.blockRendering.useDebugger=!0},s.blockRendering.stopDebugger=function(){s.blockRendering.useDebugger=!1},s.blockRendering.init=function(n,l,u){return(n=new(s.registry.getClass(s.registry.Type.RENDERER,n))(n)).init(l,u),n},s.ASTNode=function(n,l,u){if(!l)throw Error("Cannot create a node without a location.");this.type_=n,this.isConnection_=s.ASTNode.isConnectionType_(n),this.location_=l,this.wsCoordinate_=null,this.processParams_(u||null)},s.ASTNode.types={FIELD:"field",BLOCK:"block",INPUT:"input",OUTPUT:"output",NEXT:"next",PREVIOUS:"previous",STACK:"stack",WORKSPACE:"workspace"},s.ASTNode.NAVIGATE_ALL_FIELDS=!1,s.ASTNode.DEFAULT_OFFSET_Y=-20,s.ASTNode.isConnectionType_=function(n){switch(n){case s.ASTNode.types.PREVIOUS:case s.ASTNode.types.NEXT:case s.ASTNode.types.INPUT:case s.ASTNode.types.OUTPUT:return!0}return!1},s.ASTNode.createFieldNode=function(n){return n?new s.ASTNode(s.ASTNode.types.FIELD,n):null},s.ASTNode.createConnectionNode=function(n){if(!n)return null;var l=n.type;return l==s.connectionTypes.INPUT_VALUE||l==s.connectionTypes.NEXT_STATEMENT&&n.getParentInput()?s.ASTNode.createInputNode(n.getParentInput()):l==s.connectionTypes.NEXT_STATEMENT?new s.ASTNode(s.ASTNode.types.NEXT,n):l==s.connectionTypes.OUTPUT_VALUE?new s.ASTNode(s.ASTNode.types.OUTPUT,n):l==s.connectionTypes.PREVIOUS_STATEMENT?new s.ASTNode(s.ASTNode.types.PREVIOUS,n):null},s.ASTNode.createInputNode=function(n){return n&&n.connection?new s.ASTNode(s.ASTNode.types.INPUT,n.connection):null},s.ASTNode.createBlockNode=function(n){return n?new s.ASTNode(s.ASTNode.types.BLOCK,n):null},s.ASTNode.createStackNode=function(n){return n?new s.ASTNode(s.ASTNode.types.STACK,n):null},s.ASTNode.createWorkspaceNode=function(n,l){return l&&n?new s.ASTNode(s.ASTNode.types.WORKSPACE,n,{wsCoordinate:l}):null},s.ASTNode.createTopNode=function(n){var l=n.previousConnection||n.outputConnection;return l?s.ASTNode.createConnectionNode(l):s.ASTNode.createBlockNode(n)},s.ASTNode.prototype.processParams_=function(n){n&&n.wsCoordinate&&(this.wsCoordinate_=n.wsCoordinate)},s.ASTNode.prototype.getLocation=function(){return this.location_},s.ASTNode.prototype.getType=function(){return this.type_},s.ASTNode.prototype.getWsCoordinate=function(){return this.wsCoordinate_},s.ASTNode.prototype.isConnection=function(){return this.isConnection_},s.ASTNode.prototype.findNextForInput_=function(){var u,n=this.location_.getParentInput(),l=n.getSourceBlock();for(n=l.inputList.indexOf(n)+1;u=l.inputList[n];n++){for(var b,h=u.fieldRow,_=0;b=h[_];_++)if(b.isClickable()||s.ASTNode.NAVIGATE_ALL_FIELDS)return s.ASTNode.createFieldNode(b);if(u.connection)return s.ASTNode.createInputNode(u)}return null},s.ASTNode.prototype.findNextForField_=function(){var n=this.location_,l=n.getParentInput(),u=n.getSourceBlock(),h=u.inputList.indexOf(l);for(n=l.fieldRow.indexOf(n)+1;l=u.inputList[h];h++){for(var _=l.fieldRow;n<_.length;){if(_[n].isClickable()||s.ASTNode.NAVIGATE_ALL_FIELDS)return s.ASTNode.createFieldNode(_[n]);n++}if(n=0,l.connection)return s.ASTNode.createInputNode(l)}return null},s.ASTNode.prototype.findPrevForInput_=function(){for(var h,n=this.location_.getParentInput(),l=n.getSourceBlock(),u=l.inputList.indexOf(n);h=l.inputList[u];u--){if(h.connection&&h!==n)return s.ASTNode.createInputNode(h);for(var b,_=(h=h.fieldRow).length-1;b=h[_];_--)if(b.isClickable()||s.ASTNode.NAVIGATE_ALL_FIELDS)return s.ASTNode.createFieldNode(b)}return null},s.ASTNode.prototype.findPrevForField_=function(){var _,n=this.location_,l=n.getParentInput(),u=n.getSourceBlock(),h=u.inputList.indexOf(l);for(n=l.fieldRow.indexOf(n)-1;_=u.inputList[h];h--){if(_.connection&&_!==l)return s.ASTNode.createInputNode(_);for(_=_.fieldRow;-1<n;){if(_[n].isClickable()||s.ASTNode.NAVIGATE_ALL_FIELDS)return s.ASTNode.createFieldNode(_[n]);n--}0<=h-1&&(n=u.inputList[h-1].fieldRow.length-1)}return null},s.ASTNode.prototype.navigateBetweenStacks_=function(n){var l=this.getLocation();if(l instanceof s.Block||(l=l.getSourceBlock()),!l||!l.workspace)return null;var u=l.getRootBlock();l=u.workspace.getTopBlocks(!0);for(var _,h=0;_=l[h];h++)if(u.id==_.id)return-1==(n=h+(n?1:-1))||n==l.length?null:s.ASTNode.createStackNode(l[n]);throw Error("Couldn't find "+(n?"next":"previous")+" stack?!")},s.ASTNode.prototype.findTopASTNodeForBlock_=function(n){var l=n.previousConnection||n.outputConnection;return l?s.ASTNode.createConnectionNode(l):s.ASTNode.createBlockNode(n)},s.ASTNode.prototype.getOutAstNodeForBlock_=function(n){if(!n)return null;var l=(n=n.getTopStackBlock()).previousConnection||n.outputConnection;return l&&l.targetConnection&&l.targetConnection.getParentInput()?s.ASTNode.createInputNode(l.targetConnection.getParentInput()):s.ASTNode.createStackNode(n)},s.ASTNode.prototype.findFirstFieldOrInput_=function(n){n=n.inputList;for(var u,l=0;u=n[l];l++){for(var b,h=u.fieldRow,_=0;b=h[_];_++)if(b.isClickable()||s.ASTNode.NAVIGATE_ALL_FIELDS)return s.ASTNode.createFieldNode(b);if(u.connection)return s.ASTNode.createInputNode(u)}return null},s.ASTNode.prototype.getSourceBlock=function(){return this.getType()===s.ASTNode.types.BLOCK||this.getType()===s.ASTNode.types.STACK?this.getLocation():this.getType()===s.ASTNode.types.WORKSPACE?null:this.getLocation().getSourceBlock()},s.ASTNode.prototype.next=function(){switch(this.type_){case s.ASTNode.types.STACK:return this.navigateBetweenStacks_(!0);case s.ASTNode.types.OUTPUT:var n=this.location_;return s.ASTNode.createBlockNode(n.getSourceBlock());case s.ASTNode.types.FIELD:return this.findNextForField_();case s.ASTNode.types.INPUT:return this.findNextForInput_();case s.ASTNode.types.BLOCK:return s.ASTNode.createConnectionNode(this.location_.nextConnection);case s.ASTNode.types.PREVIOUS:return s.ASTNode.createBlockNode((n=this.location_).getSourceBlock());case s.ASTNode.types.NEXT:return s.ASTNode.createConnectionNode((n=this.location_).targetConnection)}return null},s.ASTNode.prototype.in=function(){switch(this.type_){case s.ASTNode.types.WORKSPACE:var n=this.location_.getTopBlocks(!0);if(0<n.length)return s.ASTNode.createStackNode(n[0]);break;case s.ASTNode.types.STACK:return this.findTopASTNodeForBlock_(n=this.location_);case s.ASTNode.types.BLOCK:return this.findFirstFieldOrInput_(n=this.location_);case s.ASTNode.types.INPUT:return s.ASTNode.createConnectionNode(this.location_.targetConnection)}return null},s.ASTNode.prototype.prev=function(){switch(this.type_){case s.ASTNode.types.STACK:return this.navigateBetweenStacks_(!1);case s.ASTNode.types.FIELD:return this.findPrevForField_();case s.ASTNode.types.INPUT:return this.findPrevForInput_();case s.ASTNode.types.BLOCK:var n=this.location_;return s.ASTNode.createConnectionNode(n.previousConnection||n.outputConnection);case s.ASTNode.types.PREVIOUS:if((n=(n=this.location_).targetConnection)&&!n.getParentInput())return s.ASTNode.createConnectionNode(n);break;case s.ASTNode.types.NEXT:return s.ASTNode.createBlockNode((n=this.location_).getSourceBlock())}return null},s.ASTNode.prototype.out=function(){switch(this.type_){case s.ASTNode.types.STACK:var n=this.location_,l=n.getRelativeToSurfaceXY();return l=new s.utils.Coordinate(l.x,l.y+s.ASTNode.DEFAULT_OFFSET_Y),s.ASTNode.createWorkspaceNode(n.workspace,l);case s.ASTNode.types.OUTPUT:return(l=(n=this.location_).targetConnection)?s.ASTNode.createConnectionNode(l):s.ASTNode.createStackNode(n.getSourceBlock());case s.ASTNode.types.FIELD:return s.ASTNode.createBlockNode(this.location_.getSourceBlock());case s.ASTNode.types.INPUT:return s.ASTNode.createBlockNode((n=this.location_).getSourceBlock());case s.ASTNode.types.BLOCK:return this.getOutAstNodeForBlock_(n=this.location_);case s.ASTNode.types.PREVIOUS:case s.ASTNode.types.NEXT:return this.getOutAstNodeForBlock_((n=this.location_).getSourceBlock())}return null},s.Blocks=Object.create(null),s.Extensions={},s.Extensions.ALL_=Object.create(null),s.Extensions.register=function(n,l){if("string"!=typeof n||""==n.trim())throw Error('Error: Invalid extension name "'+n+'"');if(s.Extensions.ALL_[n])throw Error('Error: Extension "'+n+'" is already registered.');if("function"!=typeof l)throw Error('Error: Extension "'+n+'" must be a function');s.Extensions.ALL_[n]=l},s.Extensions.registerMixin=function(n,l){if(!l||"object"!=typeof l)throw Error('Error: Mixin "'+n+'" must be a object');s.Extensions.register(n,function(){this.mixin(l)})},s.Extensions.registerMutator=function(n,l,u,h){var _='Error when registering mutator "'+n+'": ';s.Extensions.checkHasFunction_(_,l.domToMutation,"domToMutation"),s.Extensions.checkHasFunction_(_,l.mutationToDom,"mutationToDom");var b=s.Extensions.checkMutatorDialog_(l,_);if(u&&"function"!=typeof u)throw Error('Extension "'+n+'" is not a function');s.Extensions.register(n,function(){if(b){if(!s.Mutator)throw Error(_+"Missing require for Blockly.Mutator");this.setMutator(new s.Mutator(h||[]))}this.mixin(l),u&&u.apply(this)})},s.Extensions.unregister=function(n){s.Extensions.ALL_[n]?delete s.Extensions.ALL_[n]:console.warn('No extension mapping for name "'+n+'" found to unregister')},s.Extensions.apply=function(n,l,u){var h=s.Extensions.ALL_[n];if("function"!=typeof h)throw Error('Error: Extension "'+n+'" not found.');if(u)s.Extensions.checkNoMutatorProperties_(n,l);else var _=s.Extensions.getMutatorProperties_(l);if(h.apply(l),u)s.Extensions.checkBlockHasMutatorProperties_('Error after applying mutator "'+n+'": ',l);else if(!s.Extensions.mutatorPropertiesMatch_(_,l))throw Error('Error when applying extension "'+n+'": mutation properties changed when applying a non-mutator extension.')},s.Extensions.checkHasFunction_=function(n,l,u){if(!l)throw Error(n+'missing required property "'+u+'"');if("function"!=typeof l)throw Error(n+'" required property "'+u+'" must be a function')},s.Extensions.checkNoMutatorProperties_=function(n,l){if(s.Extensions.getMutatorProperties_(l).length)throw Error('Error: tried to apply mutation "'+n+'" to a block that already has mutator functions.  Block id: '+l.id)},s.Extensions.checkMutatorDialog_=function(n,l){var u=void 0!==n.compose,h=void 0!==n.decompose;if(u&&h){if("function"!=typeof n.compose)throw Error(l+"compose must be a function.");if("function"!=typeof n.decompose)throw Error(l+"decompose must be a function.");return!0}if(!u&&!h)return!1;throw Error(l+'Must have both or neither of "compose" and "decompose"')},s.Extensions.checkBlockHasMutatorProperties_=function(n,l){if("function"!=typeof l.domToMutation)throw Error(n+'Applying a mutator didn\'t add "domToMutation"');if("function"!=typeof l.mutationToDom)throw Error(n+'Applying a mutator didn\'t add "mutationToDom"');s.Extensions.checkMutatorDialog_(l,n)},s.Extensions.getMutatorProperties_=function(n){var l=[];return void 0!==n.domToMutation&&l.push(n.domToMutation),void 0!==n.mutationToDom&&l.push(n.mutationToDom),void 0!==n.compose&&l.push(n.compose),void 0!==n.decompose&&l.push(n.decompose),l},s.Extensions.mutatorPropertiesMatch_=function(n,l){if((l=s.Extensions.getMutatorProperties_(l)).length!=n.length)return!1;for(var u=0;u<l.length;u++)if(n[u]!=l[u])return!1;return!0},s.Extensions.buildTooltipForDropdown=function(n,l){var u=[];return"object"==typeof document&&s.utils.runAfterPageLoad(function(){for(var h in l)s.utils.checkMessageReferences(l[h])}),function(){this.type&&-1==u.indexOf(this.type)&&(s.Extensions.checkDropdownOptionsInTable_(this,n,l),u.push(this.type)),this.setTooltip(function(){var h=String(this.getFieldValue(n)),_=l[h];return null==_?-1==u.indexOf(this.type)&&(h="No tooltip mapping for value "+h+" of field "+n,null!=this.type&&(h+=" of block type "+this.type),console.warn(h+".")):_=s.utils.replaceMessageReferences(_),_}.bind(this))}},s.Extensions.checkDropdownOptionsInTable_=function(n,l,u){var h=n.getField(l);if(!h.isOptionListDynamic()){h=h.getOptions();for(var _=0;_<h.length;++_){var b=h[_][1];null==u[b]&&console.warn("No tooltip mapping for value "+b+" of field "+l+" of block type "+n.type)}}},s.Extensions.buildTooltipWithFieldText=function(n,l){return"object"==typeof document&&s.utils.runAfterPageLoad(function(){s.utils.checkMessageReferences(n)}),function(){this.setTooltip(function(){var u=this.getField(l);return s.utils.replaceMessageReferences(n).replace("%1",u?u.getText():"")}.bind(this))}},s.Extensions.extensionParentTooltip_=function(){this.tooltipWhenNotConnected_=this.tooltip,this.setTooltip(function(){var n=this.getParent();return n&&n.getInputsInline()&&n.tooltip||this.tooltipWhenNotConnected_}.bind(this))},s.Extensions.register("parent_tooltip_when_inline",s.Extensions.extensionParentTooltip_),s.fieldRegistry={},s.fieldRegistry.register=function(n,l){s.registry.register(s.registry.Type.FIELD,n,l)},s.fieldRegistry.unregister=function(n){s.registry.unregister(s.registry.Type.FIELD,n)},s.fieldRegistry.fromJson=function(n){var l=s.registry.getObject(s.registry.Type.FIELD,n.type);return l?l.fromJson(n):(console.warn("Blockly could not create a field of type "+n.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null)},s.IDeletable=function(){},s.blockAnimations={},s.blockAnimations.disconnectPid_=0,s.blockAnimations.disconnectGroup_=null,s.blockAnimations.disposeUiEffect=function(n){var l=n.workspace,u=n.getSvgRoot();l.getAudioManager().play("delete"),n=l.getSvgXY(u),(u=u.cloneNode(!0)).translateX_=n.x,u.translateY_=n.y,u.setAttribute("transform","translate("+n.x+","+n.y+")"),l.getParentSvg().appendChild(u),u.bBox_=u.getBBox(),s.blockAnimations.disposeUiStep_(u,l.RTL,new Date,l.scale)},s.blockAnimations.disposeUiStep_=function(n,l,u,h){var _=(new Date-u)/150;1<_?s.utils.dom.removeNode(n):(n.setAttribute("transform","translate("+(n.translateX_+(l?-1:1)*n.bBox_.width*h/2*_)+","+(n.translateY_+n.bBox_.height*h*_)+") scale("+(1-_)*h+")"),setTimeout(s.blockAnimations.disposeUiStep_,10,n,l,u,h))},s.blockAnimations.connectionUiEffect=function(n){var l=n.workspace,u=l.scale;if(l.getAudioManager().play("click"),!(1>u)){var h=l.getSvgXY(n.getSvgRoot());n.outputConnection?(h.x+=(n.RTL?3:-3)*u,h.y+=13*u):n.previousConnection&&(h.x+=(n.RTL?-23:23)*u,h.y+=3*u),n=s.utils.dom.createSvgElement(s.utils.Svg.CIRCLE,{cx:h.x,cy:h.y,r:0,fill:"none",stroke:"#888","stroke-width":10},l.getParentSvg()),s.blockAnimations.connectionUiStep_(n,new Date,u)}},s.blockAnimations.connectionUiStep_=function(n,l,u){var h=(new Date-l)/150;1<h?s.utils.dom.removeNode(n):(n.setAttribute("r",25*h*u),n.style.opacity=1-h,s.blockAnimations.disconnectPid_=setTimeout(s.blockAnimations.connectionUiStep_,10,n,l,u))},s.blockAnimations.disconnectUiEffect=function(n){if(n.workspace.getAudioManager().play("disconnect"),!(1>n.workspace.scale)){var l=n.getHeightWidth().height;l=Math.atan(10/l)/Math.PI*180,n.RTL||(l*=-1),s.blockAnimations.disconnectUiStep_(n.getSvgRoot(),l,new Date)}},s.blockAnimations.disconnectUiStep_=function(n,l,u){var h=(new Date-u)/200;1<h?n.skew_="":(n.skew_="skewX("+Math.round(Math.sin(h*Math.PI*3)*(1-h)*l)+")",s.blockAnimations.disconnectGroup_=n,s.blockAnimations.disconnectPid_=setTimeout(s.blockAnimations.disconnectUiStep_,10,n,l,u)),n.setAttribute("transform",n.translate_+n.skew_)},s.blockAnimations.disconnectUiStop=function(){if(s.blockAnimations.disconnectGroup_){clearTimeout(s.blockAnimations.disconnectPid_);var n=s.blockAnimations.disconnectGroup_;n.skew_="",n.setAttribute("transform",n.translate_),s.blockAnimations.disconnectGroup_=null}},s.Events.BlockDrag=function(n,l,u){s.Events.BlockDrag.superClass_.constructor.call(this,n?n.workspace.id:void 0),this.blockId=n?n.id:null,this.isStart=l,this.blocks=u},s.utils.object.inherits(s.Events.BlockDrag,s.Events.UiBase),s.Events.BlockDrag.prototype.type=s.Events.BLOCK_DRAG,s.Events.BlockDrag.prototype.toJson=function(){var n=s.Events.BlockDrag.superClass_.toJson.call(this);return n.isStart=this.isStart,n.blockId=this.blockId,n.blocks=this.blocks,n},s.Events.BlockDrag.prototype.fromJson=function(n){s.Events.BlockDrag.superClass_.fromJson.call(this,n),this.isStart=n.isStart,this.blockId=n.blockId,this.blocks=n.blocks},s.registry.register(s.registry.Type.EVENT,s.Events.BLOCK_DRAG,s.Events.BlockDrag),s.IBlockDragger=function(){},s.InsertionMarkerManager=function(n){this.topBlock_=s.selected=n,this.workspace_=n.workspace,this.lastMarker_=this.lastOnStack_=null,this.firstMarker_=this.createMarkerBlock_(this.topBlock_),this.localConnection_=this.closestConnection_=null,this.wouldDeleteBlock_=!1,this.fadedBlock_=this.highlightedBlock_=this.markerConnection_=null,this.availableConnections_=this.initAvailableConnections_()},s.InsertionMarkerManager.PREVIEW_TYPE={INSERTION_MARKER:0,INPUT_OUTLINE:1,REPLACEMENT_FADE:2},s.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR="The insertion marker manager tried to create a marker but the result is missing %1. If you are using a mutator, make sure your domToMutation method is properly defined.",s.InsertionMarkerManager.prototype.dispose=function(){this.availableConnections_.length=0,s.Events.disable();try{this.firstMarker_&&this.firstMarker_.dispose(),this.lastMarker_&&this.lastMarker_.dispose()}finally{s.Events.enable()}},s.InsertionMarkerManager.prototype.updateAvailableConnections=function(){this.availableConnections_=this.initAvailableConnections_()},s.InsertionMarkerManager.prototype.wouldDeleteBlock=function(){return this.wouldDeleteBlock_},s.InsertionMarkerManager.prototype.wouldConnectBlock=function(){return!!this.closestConnection_},s.InsertionMarkerManager.prototype.applyConnections=function(){if(this.closestConnection_&&(s.Events.disable(),this.hidePreview_(),s.Events.enable(),this.localConnection_.connect(this.closestConnection_),this.topBlock_.rendered)){var n=this.localConnection_.isSuperior()?this.closestConnection_:this.localConnection_;s.blockAnimations.connectionUiEffect(n.getSourceBlock()),this.topBlock_.getRootBlock().bringToFront()}},s.InsertionMarkerManager.prototype.update=function(n,l){var u=this.getCandidate_(n);((this.wouldDeleteBlock_=this.shouldDelete_(u,l))||this.shouldUpdatePreviews_(u,n))&&(s.Events.disable(),this.maybeHidePreview_(u),this.maybeShowPreview_(u),s.Events.enable())},s.InsertionMarkerManager.prototype.createMarkerBlock_=function(n){var l=n.type;s.Events.disable();try{var u=this.workspace_.newBlock(l);if(u.setInsertionMarker(!0),n.mutationToDom){var h=n.mutationToDom();h&&u.domToMutation(h)}for(l=0;l<n.inputList.length;l++){var _=n.inputList[l];if(_.name!=s.constants.COLLAPSED_INPUT_NAME){var b=u.inputList[l];if(!b)throw Error(s.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR.replace("%1","an input"));for(h=0;h<_.fieldRow.length;h++){var R=_.fieldRow[h],O=b.fieldRow[h];if(!O)throw Error(s.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR.replace("%1","a field"));O.setValue(R.getValue())}}}u.setCollapsed(n.isCollapsed()),u.setInputsInline(n.getInputsInline()),u.initSvg(),u.getSvgRoot().setAttribute("visibility","hidden")}finally{s.Events.enable()}return u},s.InsertionMarkerManager.prototype.initAvailableConnections_=function(){var n=this.topBlock_.getConnections_(!1),l=this.topBlock_.lastConnectionInStack(!0);if(l&&l!=this.topBlock_.nextConnection){if(n.push(l),this.lastOnStack_=l,this.lastMarker_){s.Events.disable();try{this.lastMarker_.dispose()}finally{s.Events.enable()}}this.lastMarker_=this.createMarkerBlock_(l.getSourceBlock())}return n},s.InsertionMarkerManager.prototype.shouldUpdatePreviews_=function(n,l){var u=n.local,h=n.closest;return n=n.radius,u&&h?this.localConnection_&&this.closestConnection_?!(this.closestConnection_==h&&this.localConnection_==u||(u=this.localConnection_.x+l.x-this.closestConnection_.x,l=this.localConnection_.y+l.y-this.closestConnection_.y,l=Math.sqrt(u*u+l*l),h&&n>l-s.CURRENT_CONNECTION_PREFERENCE)):!this.localConnection_&&!this.closestConnection_||(console.error("Only one of localConnection_ and closestConnection_ was set."),console.error("Returning true from shouldUpdatePreviews, but it's not clear why."),!0):!(!this.localConnection_||!this.closestConnection_)},s.InsertionMarkerManager.prototype.getCandidate_=function(n){for(var l=this.getStartRadius_(),u=null,h=null,_=0;_<this.availableConnections_.length;_++){var b=this.availableConnections_[_],R=b.closest(l,n);R.connection&&(u=R.connection,h=b,l=R.radius)}return{closest:u,local:h,radius:l}},s.InsertionMarkerManager.prototype.getStartRadius_=function(){return this.closestConnection_&&this.localConnection_?s.CONNECTING_SNAP_RADIUS:s.SNAP_RADIUS},s.InsertionMarkerManager.prototype.shouldDelete_=function(n,l){return!(!l||!this.workspace_.getComponentManager().hasCapability(l.id,s.ComponentManager.Capability.DELETE_AREA))&&l.wouldDelete(this.topBlock_,n&&!!n.closest)},s.InsertionMarkerManager.prototype.maybeShowPreview_=function(n){if(!this.wouldDeleteBlock_){var l=n.closest;n=n.local,l&&(l==this.closestConnection_||l.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.closestConnection_=l,this.localConnection_=n,this.showPreview_()))}},s.InsertionMarkerManager.prototype.showPreview_=function(){var n=this.closestConnection_,l=this.workspace_.getRenderer();switch(l.getConnectionPreviewMethod(n,this.localConnection_,this.topBlock_)){case s.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline_();break;case s.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker_();break;case s.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade_()}n&&l.shouldHighlightConnection(n)&&n.highlight()},s.InsertionMarkerManager.prototype.maybeHidePreview_=function(n){if(n.closest){var l=this.closestConnection_!=n.closest;n=this.localConnection_!=n.local,this.closestConnection_&&this.localConnection_&&(l||n||this.wouldDeleteBlock_)&&this.hidePreview_()}else this.hidePreview_();this.localConnection_=this.closestConnection_=this.markerConnection_=null},s.InsertionMarkerManager.prototype.hidePreview_=function(){this.closestConnection_&&this.closestConnection_.targetBlock()&&this.workspace_.getRenderer().shouldHighlightConnection(this.closestConnection_)&&this.closestConnection_.unhighlight(),this.fadedBlock_?this.hideReplacementFade_():this.highlightedBlock_?this.hideInsertionInputOutline_():this.markerConnection_&&this.hideInsertionMarker_()},s.InsertionMarkerManager.prototype.showInsertionMarker_=function(){var n=this.localConnection_,l=this.closestConnection_,u=this.lastOnStack_&&n==this.lastOnStack_?this.lastMarker_:this.firstMarker_;if((n=u.getMatchingConnection(n.getSourceBlock(),n))==this.markerConnection_)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");u.render(),u.rendered=!0,u.getSvgRoot().setAttribute("visibility","visible"),n&&l&&u.positionNearConnection(n,l),l&&n.connect(l),this.markerConnection_=n},s.InsertionMarkerManager.prototype.hideInsertionMarker_=function(){if(this.markerConnection_){var n=this.markerConnection_,l=n.getSourceBlock(),u=l.nextConnection,h=l.previousConnection,_=l.outputConnection;if(_=n.type==s.connectionTypes.INPUT_VALUE&&!(_&&_.targetConnection),!(n!=u||h&&h.targetConnection)||_?n.targetBlock().unplug(!1):n.type==s.connectionTypes.NEXT_STATEMENT&&n!=u?((u=n.targetConnection).getSourceBlock().unplug(!1),h=h?h.targetConnection:null,l.unplug(!0),h&&h.connect(u)):l.unplug(!0),n.targetConnection)throw Error("markerConnection_ still connected at the end of disconnectInsertionMarker");this.markerConnection_=null,(n=l.getSvgRoot())&&n.setAttribute("visibility","hidden")}else console.log("No insertion marker connection to disconnect")},s.InsertionMarkerManager.prototype.showInsertionInputOutline_=function(){var n=this.closestConnection_;this.highlightedBlock_=n.getSourceBlock(),this.highlightedBlock_.highlightShapeForInput(n,!0)},s.InsertionMarkerManager.prototype.hideInsertionInputOutline_=function(){this.highlightedBlock_.highlightShapeForInput(this.closestConnection_,!1),this.highlightedBlock_=null},s.InsertionMarkerManager.prototype.showReplacementFade_=function(){this.fadedBlock_=this.closestConnection_.targetBlock(),this.fadedBlock_.fadeForReplacement(!0)},s.InsertionMarkerManager.prototype.hideReplacementFade_=function(){this.fadedBlock_.fadeForReplacement(!1),this.fadedBlock_=null},s.InsertionMarkerManager.prototype.getInsertionMarkers=function(){var n=[];return this.firstMarker_&&n.push(this.firstMarker_),this.lastMarker_&&n.push(this.lastMarker_),n},s.BlockDragger=function(n,l){this.draggingBlock_=n,this.workspace_=l,this.draggedConnectionManager_=new s.InsertionMarkerManager(this.draggingBlock_),this.dragTarget_=null,this.wouldDeleteBlock_=!1,this.startXY_=this.draggingBlock_.getRelativeToSurfaceXY(),this.dragIconData_=s.BlockDragger.initIconData_(n)},s.BlockDragger.prototype.dispose=function(){this.dragIconData_.length=0,this.draggedConnectionManager_&&this.draggedConnectionManager_.dispose()},s.BlockDragger.initIconData_=function(n){var l=[];n=n.getDescendants(!1);for(var h,u=0;h=n[u];u++){h=h.getIcons();for(var _=0;_<h.length;_++){var b={location:h[_].getIconLocation(),icon:h[_]};l.push(b)}}return l},s.BlockDragger.prototype.startDrag=function(n,l){s.Events.getGroup()||s.Events.setGroup(!0),this.fireDragStartEvent_(),this.workspace_.isMutator&&this.draggingBlock_.bringToFront(),s.utils.dom.startTextWidthCache(),this.workspace_.setResizesEnabled(!1),s.blockAnimations.disconnectUiStop(),this.shouldDisconnect_(l)&&this.disconnectBlock_(l,n),this.draggingBlock_.setDragging(!0),this.draggingBlock_.moveToDragSurface()},s.BlockDragger.prototype.shouldDisconnect_=function(n){return!!(this.draggingBlock_.getParent()||n&&this.draggingBlock_.nextConnection&&this.draggingBlock_.nextConnection.targetBlock())},s.BlockDragger.prototype.disconnectBlock_=function(n,l){this.draggingBlock_.unplug(n),n=this.pixelsToWorkspaceUnits_(l),n=s.utils.Coordinate.sum(this.startXY_,n),this.draggingBlock_.translate(n.x,n.y),s.blockAnimations.disconnectUiEffect(this.draggingBlock_),this.draggedConnectionManager_.updateAvailableConnections()},s.BlockDragger.prototype.fireDragStartEvent_=function(){var n=new(s.Events.get(s.Events.BLOCK_DRAG))(this.draggingBlock_,!0,this.draggingBlock_.getDescendants(!1));s.Events.fire(n)},s.BlockDragger.prototype.drag=function(n,l){l=this.pixelsToWorkspaceUnits_(l);var u=s.utils.Coordinate.sum(this.startXY_,l);this.draggingBlock_.moveDuringDrag(u),this.dragIcons_(l),u=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(n),this.draggedConnectionManager_.update(l,this.dragTarget_),n=this.wouldDeleteBlock_,this.wouldDeleteBlock_=this.draggedConnectionManager_.wouldDeleteBlock(),n!=this.wouldDeleteBlock_&&this.updateCursorDuringBlockDrag_(),this.dragTarget_!==u&&(u&&u.onDragExit(this.draggingBlock_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBlock_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBlock_)},s.BlockDragger.prototype.endDrag=function(n,l){if(this.drag(n,l),this.dragIconData_=[],this.fireDragEndEvent_(),s.utils.dom.stopTextWidthCache(),s.blockAnimations.disconnectUiStop(),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBlock_))n=this.startXY_;else{var u=(n=this.getNewLocationAfterDrag_(l)).delta;n=n.newLocation}this.draggingBlock_.moveOffDragSurface(n),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBlock_),this.maybeDeleteBlock_()||(this.draggingBlock_.setDragging(!1),u?this.updateBlockAfterMove_(u):s.bumpObjectIntoBounds_(this.draggingBlock_.workspace,this.workspace_.getMetricsManager().getScrollMetrics(!0),this.draggingBlock_)),this.workspace_.setResizesEnabled(!0),s.Events.setGroup(!1)},s.BlockDragger.prototype.getNewLocationAfterDrag_=function(n){var l={};return l.delta=this.pixelsToWorkspaceUnits_(n),l.newLocation=s.utils.Coordinate.sum(this.startXY_,l.delta),l},s.BlockDragger.prototype.maybeDeleteBlock_=function(){return!!this.wouldDeleteBlock_&&(this.fireMoveEvent_(),this.draggingBlock_.dispose(!1,!0),s.draggingConnections=[],!0)},s.BlockDragger.prototype.updateBlockAfterMove_=function(n){this.draggingBlock_.moveConnections(n.x,n.y),this.fireMoveEvent_(),this.draggedConnectionManager_.wouldConnectBlock()?this.draggedConnectionManager_.applyConnections():this.draggingBlock_.render(),this.draggingBlock_.scheduleSnapAndBump()},s.BlockDragger.prototype.fireDragEndEvent_=function(){var n=new(s.Events.get(s.Events.BLOCK_DRAG))(this.draggingBlock_,!1,this.draggingBlock_.getDescendants(!1));s.Events.fire(n)},s.BlockDragger.prototype.updateToolboxStyle_=function(n){var l=this.workspace_.getToolbox();if(l){var u=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab";n&&"function"==typeof l.removeStyle?l.removeStyle(u):n||"function"!=typeof l.addStyle||l.addStyle(u)}},s.BlockDragger.prototype.fireMoveEvent_=function(){var n=new(s.Events.get(s.Events.BLOCK_MOVE))(this.draggingBlock_);n.oldCoordinate=this.startXY_,n.recordNew(),s.Events.fire(n)},s.BlockDragger.prototype.updateCursorDuringBlockDrag_=function(){this.draggingBlock_.setDeleteStyle(this.wouldDeleteBlock_)},s.BlockDragger.prototype.pixelsToWorkspaceUnits_=function(n){return n=new s.utils.Coordinate(n.x/this.workspace_.scale,n.y/this.workspace_.scale),this.workspace_.isMutator&&n.scale(1/this.workspace_.options.parentWorkspace.scale),n},s.BlockDragger.prototype.dragIcons_=function(n){for(var l=0;l<this.dragIconData_.length;l++){var u=this.dragIconData_[l];u.icon.setIconLocation(s.utils.Coordinate.sum(u.location,n))}},s.BlockDragger.prototype.getInsertionMarkers=function(){return this.draggedConnectionManager_&&this.draggedConnectionManager_.getInsertionMarkers?this.draggedConnectionManager_.getInsertionMarkers():[]},s.registry.register(s.registry.Type.BLOCK_DRAGGER,s.registry.DEFAULT,s.BlockDragger),s.IContextMenu=function(){},s.IDraggable=function(){},s.IBubble=function(){},s.Bubble=function(n,l,u,h,_,b){this.workspace_=n,this.content_=l,this.shape_=u,this.onMouseDownResizeWrapper_=this.onMouseDownBubbleWrapper_=this.moveCallback_=this.resizeCallback_=null,this.disposed=!1,u=s.Bubble.ARROW_ANGLE,this.workspace_.RTL&&(u=-u),this.arrow_radians_=s.utils.math.toRadians(u),n.getBubbleCanvas().appendChild(this.createDom_(l,!(!_||!b))),this.setAnchorLocation(h),_&&b||(_=(n=this.content_.getBBox()).width+2*s.Bubble.BORDER_WIDTH,b=n.height+2*s.Bubble.BORDER_WIDTH),this.setBubbleSize(_,b),this.positionBubble_(),this.renderArrow_(),this.rendered_=!0},s.Bubble.BORDER_WIDTH=6,s.Bubble.ARROW_THICKNESS=5,s.Bubble.ARROW_ANGLE=20,s.Bubble.ARROW_BEND=4,s.Bubble.ANCHOR_RADIUS=8,s.Bubble.onMouseUpWrapper_=null,s.Bubble.onMouseMoveWrapper_=null,s.Bubble.unbindDragEvents_=function(){s.Bubble.onMouseUpWrapper_&&(s.browserEvents.unbind(s.Bubble.onMouseUpWrapper_),s.Bubble.onMouseUpWrapper_=null),s.Bubble.onMouseMoveWrapper_&&(s.browserEvents.unbind(s.Bubble.onMouseMoveWrapper_),s.Bubble.onMouseMoveWrapper_=null)},s.Bubble.bubbleMouseUp_=function(n){s.Touch.clearTouchIdentifier(),s.Bubble.unbindDragEvents_()},s.Bubble.prototype.rendered_=!1,s.Bubble.prototype.anchorXY_=null,s.Bubble.prototype.relativeLeft_=0,s.Bubble.prototype.relativeTop_=0,s.Bubble.prototype.width_=0,s.Bubble.prototype.height_=0,s.Bubble.prototype.autoLayout_=!0,s.Bubble.prototype.createDom_=function(n,l){this.bubbleGroup_=s.utils.dom.createSvgElement(s.utils.Svg.G,{},null);var u={filter:"url(#"+this.workspace_.getRenderer().getConstants().embossFilterId+")"};return s.utils.userAgent.JAVA_FX&&(u={}),u=s.utils.dom.createSvgElement(s.utils.Svg.G,u,this.bubbleGroup_),this.bubbleArrow_=s.utils.dom.createSvgElement(s.utils.Svg.PATH,{},u),this.bubbleBack_=s.utils.dom.createSvgElement(s.utils.Svg.RECT,{class:"blocklyDraggable",x:0,y:0,rx:s.Bubble.BORDER_WIDTH,ry:s.Bubble.BORDER_WIDTH},u),l?(this.resizeGroup_=s.utils.dom.createSvgElement(s.utils.Svg.G,{class:this.workspace_.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.bubbleGroup_),s.utils.dom.createSvgElement(s.utils.Svg.POLYGON,{points:"0,x x,x x,0".replace(/x/g,(l=2*s.Bubble.BORDER_WIDTH).toString())},this.resizeGroup_),s.utils.dom.createSvgElement(s.utils.Svg.LINE,{class:"blocklyResizeLine",x1:l/3,y1:l-1,x2:l-1,y2:l/3},this.resizeGroup_),s.utils.dom.createSvgElement(s.utils.Svg.LINE,{class:"blocklyResizeLine",x1:2*l/3,y1:l-1,x2:l-1,y2:2*l/3},this.resizeGroup_)):this.resizeGroup_=null,this.workspace_.options.readOnly||(this.onMouseDownBubbleWrapper_=s.browserEvents.conditionalBind(this.bubbleBack_,"mousedown",this,this.bubbleMouseDown_),this.resizeGroup_&&(this.onMouseDownResizeWrapper_=s.browserEvents.conditionalBind(this.resizeGroup_,"mousedown",this,this.resizeMouseDown_))),this.bubbleGroup_.appendChild(n),this.bubbleGroup_},s.Bubble.prototype.getSvgRoot=function(){return this.bubbleGroup_},s.Bubble.prototype.setSvgId=function(n){this.bubbleGroup_.dataset&&(this.bubbleGroup_.dataset.blockId=n)},s.Bubble.prototype.bubbleMouseDown_=function(n){var l=this.workspace_.getGesture(n);l&&l.handleBubbleStart(n,this)},s.Bubble.prototype.showContextMenu=function(n){},s.Bubble.prototype.isDeletable=function(){return!1},s.Bubble.prototype.setDeleteStyle=function(n){},s.Bubble.prototype.resizeMouseDown_=function(n){this.promote(),s.Bubble.unbindDragEvents_(),s.utils.isRightButton(n)||(this.workspace_.startDrag(n,new s.utils.Coordinate(this.workspace_.RTL?-this.width_:this.width_,this.height_)),s.Bubble.onMouseUpWrapper_=s.browserEvents.conditionalBind(document,"mouseup",this,s.Bubble.bubbleMouseUp_),s.Bubble.onMouseMoveWrapper_=s.browserEvents.conditionalBind(document,"mousemove",this,this.resizeMouseMove_),s.hideChaff()),n.stopPropagation()},s.Bubble.prototype.resizeMouseMove_=function(n){this.autoLayout_=!1,n=this.workspace_.moveDrag(n),this.setBubbleSize(this.workspace_.RTL?-n.x:n.x,n.y),this.workspace_.RTL&&this.positionBubble_()},s.Bubble.prototype.registerResizeEvent=function(n){this.resizeCallback_=n},s.Bubble.prototype.registerMoveEvent=function(n){this.moveCallback_=n},s.Bubble.prototype.promote=function(){var n=this.bubbleGroup_.parentNode;return n.lastChild!==this.bubbleGroup_&&(n.appendChild(this.bubbleGroup_),!0)},s.Bubble.prototype.setAnchorLocation=function(n){this.anchorXY_=n,this.rendered_&&this.positionBubble_()},s.Bubble.prototype.layoutBubble_=function(){var n=this.workspace_.getMetricsManager().getViewMetrics(!0),l=this.getOptimalRelativeLeft_(n),u=this.getOptimalRelativeTop_(n),h=this.shape_.getBBox(),_={x:l,y:-this.height_-this.workspace_.getRenderer().getConstants().MIN_BLOCK_HEIGHT},b={x:-this.width_-30,y:u};u={x:h.width,y:u};var R={x:l,y:h.height};l=h.width<h.height?u:R,h=h.width<h.height?R:u,u=this.getOverlap_(_,n),R=this.getOverlap_(b,n);var O=this.getOverlap_(l,n);n=this.getOverlap_(h,n),u==(n=Math.max(u,R,O,n))?(this.relativeLeft_=_.x,this.relativeTop_=_.y):R==n?(this.relativeLeft_=b.x,this.relativeTop_=b.y):O==n?(this.relativeLeft_=l.x,this.relativeTop_=l.y):(this.relativeLeft_=h.x,this.relativeTop_=h.y)},s.Bubble.prototype.getOverlap_=function(n,l){var u=this.workspace_.RTL?this.anchorXY_.x-n.x-this.width_:n.x+this.anchorXY_.x;return n=n.y+this.anchorXY_.y,Math.max(0,Math.min(1,(Math.min(u+this.width_,l.left+l.width)-Math.max(u,l.left))*(Math.min(n+this.height_,l.top+l.height)-Math.max(n,l.top))/(this.width_*this.height_)))},s.Bubble.prototype.getOptimalRelativeLeft_=function(n){var l=-this.width_/4;if(this.width_>n.width)return l;if(this.workspace_.RTL)var u=this.anchorXY_.x-l,h=u-this.width_,_=n.left+n.width,b=n.left+s.Scrollbar.scrollbarThickness/this.workspace_.scale;else u=(h=l+this.anchorXY_.x)+this.width_,b=n.left,_=n.left+n.width-s.Scrollbar.scrollbarThickness/this.workspace_.scale;return this.workspace_.RTL?h<b?l=-(b-this.anchorXY_.x+this.width_):u>_&&(l=-(_-this.anchorXY_.x)):h<b?l=b-this.anchorXY_.x:u>_&&(l=_-this.anchorXY_.x-this.width_),l},s.Bubble.prototype.getOptimalRelativeTop_=function(n){var l=-this.height_/4;if(this.height_>n.height)return l;var u=this.anchorXY_.y+l,_=n.top;n=n.top+n.height-s.Scrollbar.scrollbarThickness/this.workspace_.scale;var b=this.anchorXY_.y;return u<_?l=_-b:u+this.height_>n&&(l=n-b-this.height_),l},s.Bubble.prototype.positionBubble_=function(){var n=this.anchorXY_.x;this.moveTo(n=this.workspace_.RTL?n-(this.relativeLeft_+this.width_):n+this.relativeLeft_,this.relativeTop_+this.anchorXY_.y)},s.Bubble.prototype.moveTo=function(n,l){this.bubbleGroup_.setAttribute("transform","translate("+n+","+l+")")},s.Bubble.prototype.setDragging=function(n){!n&&this.moveCallback_&&this.moveCallback_()},s.Bubble.prototype.getBubbleSize=function(){return new s.utils.Size(this.width_,this.height_)},s.Bubble.prototype.setBubbleSize=function(n,l){var u=2*s.Bubble.BORDER_WIDTH;n=Math.max(n,u+45),l=Math.max(l,u+20),this.width_=n,this.height_=l,this.bubbleBack_.setAttribute("width",n),this.bubbleBack_.setAttribute("height",l),this.resizeGroup_&&this.resizeGroup_.setAttribute("transform",this.workspace_.RTL?"translate("+2*s.Bubble.BORDER_WIDTH+","+(l-u)+") scale(-1 1)":"translate("+(n-u)+","+(l-u)+")"),this.autoLayout_&&this.layoutBubble_(),this.positionBubble_(),this.renderArrow_(),this.resizeCallback_&&this.resizeCallback_()},s.Bubble.prototype.renderArrow_=function(){var n=[],l=this.width_/2,u=this.height_/2,h=-this.relativeLeft_,_=-this.relativeTop_;if(l==h&&u==_)n.push("M "+l+","+u);else{_-=u,h-=l,this.workspace_.RTL&&(h*=-1);var b=Math.sqrt(_*_+h*h),R=Math.acos(h/b);0>_&&(R=2*Math.PI-R);var O=R+Math.PI/2;O>2*Math.PI&&(O-=2*Math.PI);var H=Math.sin(O),W=Math.cos(O),G=this.getBubbleSize();O=(G.width+G.height)/s.Bubble.ARROW_THICKNESS,O=Math.min(O,G.width,G.height)/4,h=l+(G=1-s.Bubble.ANCHOR_RADIUS/b)*h,_=u+G*_,G=l+O*W;var Z=u+O*H;l-=O*W,u-=O*H,(H=R+this.arrow_radians_)>2*Math.PI&&(H-=2*Math.PI),R=Math.sin(H)*b/s.Bubble.ARROW_BEND,b=Math.cos(H)*b/s.Bubble.ARROW_BEND,n.push("M"+G+","+Z),n.push("C"+(G+b)+","+(Z+R)+" "+h+","+_+" "+h+","+_),n.push("C"+h+","+_+" "+(l+b)+","+(u+R)+" "+l+","+u)}n.push("z"),this.bubbleArrow_.setAttribute("d",n.join(" "))},s.Bubble.prototype.setColour=function(n){this.bubbleBack_.setAttribute("fill",n),this.bubbleArrow_.setAttribute("fill",n)},s.Bubble.prototype.dispose=function(){this.onMouseDownBubbleWrapper_&&s.browserEvents.unbind(this.onMouseDownBubbleWrapper_),this.onMouseDownResizeWrapper_&&s.browserEvents.unbind(this.onMouseDownResizeWrapper_),s.Bubble.unbindDragEvents_(),s.utils.dom.removeNode(this.bubbleGroup_),this.disposed=!0},s.Bubble.prototype.moveDuringDrag=function(n,l){n?n.translateSurface(l.x,l.y):this.moveTo(l.x,l.y),this.relativeLeft_=this.workspace_.RTL?this.anchorXY_.x-l.x-this.width_:l.x-this.anchorXY_.x,this.relativeTop_=l.y-this.anchorXY_.y,this.renderArrow_()},s.Bubble.prototype.getRelativeToSurfaceXY=function(){return new s.utils.Coordinate(this.workspace_.RTL?-this.relativeLeft_+this.anchorXY_.x-this.width_:this.anchorXY_.x+this.relativeLeft_,this.anchorXY_.y+this.relativeTop_)},s.Bubble.prototype.setAutoLayout=function(n){this.autoLayout_=n},s.Bubble.textToDom=function(n){var l=s.utils.dom.createSvgElement(s.utils.Svg.TEXT,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:s.Bubble.BORDER_WIDTH},null);n=n.split("\n");for(var u=0;u<n.length;u++){var h=s.utils.dom.createSvgElement(s.utils.Svg.TSPAN,{dy:"1em",x:s.Bubble.BORDER_WIDTH},l),_=document.createTextNode(n[u]);h.appendChild(_)}return l},s.Bubble.createNonEditableBubble=function(n,l,u){if((u=new s.Bubble(l.workspace,n,l.pathObject.svgPath,u,null,null)).setSvgId(l.id),l.RTL){l=n.getBBox().width;for(var _,h=0;_=n.childNodes[h];h++)_.setAttribute("text-anchor","end"),_.setAttribute("x",l+s.Bubble.BORDER_WIDTH)}return u},s.Events.CommentBase=function(n){this.commentId=(this.isBlank=void 0===n)?"":n.id,this.workspaceId=this.isBlank?"":n.workspace.id,this.group=s.Events.getGroup(),this.recordUndo=s.Events.recordUndo},s.utils.object.inherits(s.Events.CommentBase,s.Events.Abstract),s.Events.CommentBase.prototype.toJson=function(){var n=s.Events.CommentBase.superClass_.toJson.call(this);return this.commentId&&(n.commentId=this.commentId),n},s.Events.CommentBase.prototype.fromJson=function(n){s.Events.CommentBase.superClass_.fromJson.call(this,n),this.commentId=n.commentId},s.Events.CommentChange=function(n,l,u){s.Events.CommentChange.superClass_.constructor.call(this,n),n&&(this.oldContents_=void 0===l?"":l,this.newContents_=void 0===u?"":u)},s.utils.object.inherits(s.Events.CommentChange,s.Events.CommentBase),s.Events.CommentChange.prototype.type=s.Events.COMMENT_CHANGE,s.Events.CommentChange.prototype.toJson=function(){var n=s.Events.CommentChange.superClass_.toJson.call(this);return n.oldContents=this.oldContents_,n.newContents=this.newContents_,n},s.Events.CommentChange.prototype.fromJson=function(n){s.Events.CommentChange.superClass_.fromJson.call(this,n),this.oldContents_=n.oldContents,this.newContents_=n.newContents},s.Events.CommentChange.prototype.isNull=function(){return this.oldContents_==this.newContents_},s.Events.CommentChange.prototype.run=function(n){var l=this.getEventWorkspace_().getCommentById(this.commentId);l?l.setContent(n?this.newContents_:this.oldContents_):console.warn("Can't change non-existent comment: "+this.commentId)},s.Events.CommentCreate=function(n){s.Events.CommentCreate.superClass_.constructor.call(this,n),n&&(this.xml=n.toXmlWithXY())},s.utils.object.inherits(s.Events.CommentCreate,s.Events.CommentBase),s.Events.CommentCreate.prototype.type=s.Events.COMMENT_CREATE,s.Events.CommentCreate.prototype.toJson=function(){var n=s.Events.CommentCreate.superClass_.toJson.call(this);return n.xml=s.Xml.domToText(this.xml),n},s.Events.CommentCreate.prototype.fromJson=function(n){s.Events.CommentCreate.superClass_.fromJson.call(this,n),this.xml=s.Xml.textToDom(n.xml)},s.Events.CommentCreate.prototype.run=function(n){s.Events.CommentCreateDeleteHelper(this,n)},s.Events.CommentCreateDeleteHelper=function(n,l){var u=n.getEventWorkspace_();l?((l=s.utils.xml.createElement("xml")).appendChild(n.xml),s.Xml.domToWorkspace(l,u)):(u=u.getCommentById(n.commentId))?u.dispose(!1,!1):console.warn("Can't uncreate non-existent comment: "+n.commentId)},s.Events.CommentDelete=function(n){s.Events.CommentDelete.superClass_.constructor.call(this,n),n&&(this.xml=n.toXmlWithXY())},s.utils.object.inherits(s.Events.CommentDelete,s.Events.CommentBase),s.Events.CommentDelete.prototype.type=s.Events.COMMENT_DELETE,s.Events.CommentDelete.prototype.toJson=function(){return s.Events.CommentDelete.superClass_.toJson.call(this)},s.Events.CommentDelete.prototype.fromJson=function(n){s.Events.CommentDelete.superClass_.fromJson.call(this,n)},s.Events.CommentDelete.prototype.run=function(n){s.Events.CommentCreateDeleteHelper(this,!n)},s.Events.CommentMove=function(n){s.Events.CommentMove.superClass_.constructor.call(this,n),n&&(this.comment_=n,this.oldCoordinate_=n.getXY(),this.newCoordinate_=null)},s.utils.object.inherits(s.Events.CommentMove,s.Events.CommentBase),s.Events.CommentMove.prototype.recordNew=function(){if(!this.comment_)throw Error("Tried to record the new position of a comment on the same event twice.");this.newCoordinate_=this.comment_.getXY(),this.comment_=null},s.Events.CommentMove.prototype.type=s.Events.COMMENT_MOVE,s.Events.CommentMove.prototype.setOldCoordinate=function(n){this.oldCoordinate_=n},s.Events.CommentMove.prototype.toJson=function(){var n=s.Events.CommentMove.superClass_.toJson.call(this);return this.oldCoordinate_&&(n.oldCoordinate=Math.round(this.oldCoordinate_.x)+","+Math.round(this.oldCoordinate_.y)),this.newCoordinate_&&(n.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y)),n},s.Events.CommentMove.prototype.fromJson=function(n){if(s.Events.CommentMove.superClass_.fromJson.call(this,n),n.oldCoordinate){var l=n.oldCoordinate.split(",");this.oldCoordinate_=new s.utils.Coordinate(Number(l[0]),Number(l[1]))}n.newCoordinate&&(l=n.newCoordinate.split(","),this.newCoordinate_=new s.utils.Coordinate(Number(l[0]),Number(l[1])))},s.Events.CommentMove.prototype.isNull=function(){return s.utils.Coordinate.equals(this.oldCoordinate_,this.newCoordinate_)},s.Events.CommentMove.prototype.run=function(n){var l=this.getEventWorkspace_().getCommentById(this.commentId);if(l){n=n?this.newCoordinate_:this.oldCoordinate_;var u=l.getXY();l.moveBy(n.x-u.x,n.y-u.y)}else console.warn("Can't move non-existent comment: "+this.commentId)},s.registry.register(s.registry.Type.EVENT,s.Events.COMMENT_CREATE,s.Events.CommentCreate),s.registry.register(s.registry.Type.EVENT,s.Events.COMMENT_CHANGE,s.Events.CommentChange),s.registry.register(s.registry.Type.EVENT,s.Events.COMMENT_MOVE,s.Events.CommentMove),s.registry.register(s.registry.Type.EVENT,s.Events.COMMENT_DELETE,s.Events.CommentDelete),s.BubbleDragger=function(n,l){this.draggingBubble_=n,this.workspace_=l,this.dragTarget_=null,this.wouldDeleteBubble_=!1,this.startXY_=this.draggingBubble_.getRelativeToSurfaceXY(),this.dragSurface_=s.utils.is3dSupported()&&l.getBlockDragSurface()?l.getBlockDragSurface():null},s.BubbleDragger.prototype.dispose=function(){this.dragSurface_=this.workspace_=this.draggingBubble_=null},s.BubbleDragger.prototype.startBubbleDrag=function(){s.Events.getGroup()||s.Events.setGroup(!0),this.workspace_.setResizesEnabled(!1),this.draggingBubble_.setAutoLayout(!1),this.dragSurface_&&this.moveToDragSurface_(),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!0)},s.BubbleDragger.prototype.dragBubble=function(n,l){l=this.pixelsToWorkspaceUnits_(l),l=s.utils.Coordinate.sum(this.startXY_,l),this.draggingBubble_.moveDuringDrag(this.dragSurface_,l),l=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(n),n=this.wouldDeleteBubble_,this.wouldDeleteBubble_=this.shouldDelete_(this.dragTarget_),n!=this.wouldDeleteBubble_&&this.updateCursorDuringBubbleDrag_(),this.dragTarget_!==l&&(l&&l.onDragExit(this.draggingBubble_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBubble_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBubble_)},s.BubbleDragger.prototype.shouldDelete_=function(n){return!(!n||!this.workspace_.getComponentManager().hasCapability(n.id,s.ComponentManager.Capability.DELETE_AREA))&&n.wouldDelete(this.draggingBubble_,!1)},s.BubbleDragger.prototype.updateCursorDuringBubbleDrag_=function(){this.draggingBubble_.setDeleteStyle(this.wouldDeleteBubble_)},s.BubbleDragger.prototype.endBubbleDrag=function(n,l){this.dragBubble(n,l),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBubble_)?n=this.startXY_:(n=this.pixelsToWorkspaceUnits_(l),n=s.utils.Coordinate.sum(this.startXY_,n)),this.draggingBubble_.moveTo(n.x,n.y),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBubble_),this.wouldDeleteBubble_?(this.fireMoveEvent_(),this.draggingBubble_.dispose(!1,!0)):(this.dragSurface_&&this.dragSurface_.clearAndHide(this.workspace_.getBubbleCanvas()),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!1),this.fireMoveEvent_()),this.workspace_.setResizesEnabled(!0),s.Events.setGroup(!1)},s.BubbleDragger.prototype.fireMoveEvent_=function(){if(this.draggingBubble_.isComment){var n=new(s.Events.get(s.Events.COMMENT_MOVE))(this.draggingBubble_);n.setOldCoordinate(this.startXY_),n.recordNew(),s.Events.fire(n)}},s.BubbleDragger.prototype.pixelsToWorkspaceUnits_=function(n){return n=new s.utils.Coordinate(n.x/this.workspace_.scale,n.y/this.workspace_.scale),this.workspace_.isMutator&&n.scale(1/this.workspace_.options.parentWorkspace.scale),n},s.BubbleDragger.prototype.moveToDragSurface_=function(){this.draggingBubble_.moveTo(0,0),this.dragSurface_.translateSurface(this.startXY_.x,this.startXY_.y),this.dragSurface_.setBlocksAndShow(this.draggingBubble_.getSvgRoot())},s.Events.Click=function(n,l,u){s.Events.Click.superClass_.constructor.call(this,n?n.workspace.id:l),this.blockId=n?n.id:null,this.targetType=u},s.utils.object.inherits(s.Events.Click,s.Events.UiBase),s.Events.Click.prototype.type=s.Events.CLICK,s.Events.Click.prototype.toJson=function(){var n=s.Events.Click.superClass_.toJson.call(this);return n.targetType=this.targetType,this.blockId&&(n.blockId=this.blockId),n},s.Events.Click.prototype.fromJson=function(n){s.Events.Click.superClass_.fromJson.call(this,n),this.targetType=n.targetType,this.blockId=n.blockId},s.registry.register(s.registry.Type.EVENT,s.Events.CLICK,s.Events.Click),s.WorkspaceDragger=function(n){this.workspace_=n,this.horizontalScrollEnabled_=this.workspace_.isMovableHorizontally(),this.verticalScrollEnabled_=this.workspace_.isMovableVertically(),this.startScrollXY_=new s.utils.Coordinate(n.scrollX,n.scrollY)},s.WorkspaceDragger.prototype.dispose=function(){this.workspace_=null},s.WorkspaceDragger.prototype.startDrag=function(){s.selected&&s.selected.unselect(),this.workspace_.setupDragSurface()},s.WorkspaceDragger.prototype.endDrag=function(n){this.drag(n),this.workspace_.resetDragSurface()},s.WorkspaceDragger.prototype.drag=function(n){if(n=s.utils.Coordinate.sum(this.startScrollXY_,n),this.horizontalScrollEnabled_&&this.verticalScrollEnabled_)this.workspace_.scroll(n.x,n.y);else if(this.horizontalScrollEnabled_)this.workspace_.scroll(n.x,this.workspace_.scrollY);else{if(!this.verticalScrollEnabled_)throw new TypeError("Invalid state.");this.workspace_.scroll(this.workspace_.scrollX,n.y)}},s.Gesture=function(n,l){this.mouseDownXY_=null,this.currentDragDeltaXY_=new s.utils.Coordinate(0,0),this.startWorkspace_=this.targetBlock_=this.startBlock_=this.startField_=this.startBubble_=null,this.creatorWorkspace_=l,this.isDraggingBubble_=this.isDraggingBlock_=this.isDraggingWorkspace_=this.hasExceededDragRadius_=!1,this.mostRecentEvent_=n,this.flyout_=this.workspaceDragger_=this.blockDragger_=this.bubbleDragger_=this.onUpWrapper_=this.onMoveWrapper_=null,this.isEnding_=this.hasStarted_=this.calledUpdateIsDragging_=!1,this.healStack_=!s.DRAG_STACK},s.Gesture.prototype.dispose=function(){s.Touch.clearTouchIdentifier(),s.Tooltip.unblock(),this.creatorWorkspace_.clearGesture(),this.onMoveWrapper_&&s.browserEvents.unbind(this.onMoveWrapper_),this.onUpWrapper_&&s.browserEvents.unbind(this.onUpWrapper_),this.blockDragger_&&this.blockDragger_.dispose(),this.workspaceDragger_&&this.workspaceDragger_.dispose(),this.bubbleDragger_&&this.bubbleDragger_.dispose()},s.Gesture.prototype.updateFromEvent_=function(n){var l=new s.utils.Coordinate(n.clientX,n.clientY);this.updateDragDelta_(l)&&(this.updateIsDragging_(),s.longStop_()),this.mostRecentEvent_=n},s.Gesture.prototype.updateDragDelta_=function(n){return this.currentDragDeltaXY_=s.utils.Coordinate.difference(n,this.mouseDownXY_),!this.hasExceededDragRadius_&&(this.hasExceededDragRadius_=s.utils.Coordinate.magnitude(this.currentDragDeltaXY_)>(this.flyout_?s.FLYOUT_DRAG_RADIUS:s.DRAG_RADIUS))},s.Gesture.prototype.updateIsDraggingFromFlyout_=function(){return!(!this.targetBlock_||!this.flyout_.isBlockCreatable_(this.targetBlock_)||this.flyout_.isScrollable()&&!this.flyout_.isDragTowardWorkspace(this.currentDragDeltaXY_)||(this.startWorkspace_=this.flyout_.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),s.Events.getGroup()||s.Events.setGroup(!0),this.startBlock_=null,this.targetBlock_=this.flyout_.createBlock(this.targetBlock_),this.targetBlock_.select(),0))},s.Gesture.prototype.updateIsDraggingBubble_=function(){return!!this.startBubble_&&(this.isDraggingBubble_=!0,this.startDraggingBubble_(),!0)},s.Gesture.prototype.updateIsDraggingBlock_=function(){return!!this.targetBlock_&&(this.flyout_?this.isDraggingBlock_=this.updateIsDraggingFromFlyout_():this.targetBlock_.isMovable()&&(this.isDraggingBlock_=!0),!!this.isDraggingBlock_&&(this.startDraggingBlock_(),!0))},s.Gesture.prototype.updateIsDraggingWorkspace_=function(){(this.flyout_?this.flyout_.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.workspaceDragger_=new s.WorkspaceDragger(this.startWorkspace_),this.isDraggingWorkspace_=!0,this.workspaceDragger_.startDrag())},s.Gesture.prototype.updateIsDragging_=function(){if(this.calledUpdateIsDragging_)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging_=!0,this.updateIsDraggingBubble_()||this.updateIsDraggingBlock_()||this.updateIsDraggingWorkspace_()},s.Gesture.prototype.startDraggingBlock_=function(){this.blockDragger_=new(s.registry.getClassFromOptions(s.registry.Type.BLOCK_DRAGGER,this.creatorWorkspace_.options,!0))(this.targetBlock_,this.startWorkspace_),this.blockDragger_.startDrag(this.currentDragDeltaXY_,this.healStack_),this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_)},s.Gesture.prototype.startDraggingBubble_=function(){this.bubbleDragger_=new s.BubbleDragger(this.startBubble_,this.startWorkspace_),this.bubbleDragger_.startBubbleDrag(),this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_)},s.Gesture.prototype.doStart=function(n){s.utils.isTargetInput(n)?this.cancel():(this.hasStarted_=!0,s.blockAnimations.disconnectUiStop(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),s.hideChaff(!!this.flyout_),this.startWorkspace_.markFocused(),this.mostRecentEvent_=n,s.Tooltip.block(),this.targetBlock_&&this.targetBlock_.select(),s.utils.isRightButton(n)?this.handleRightClick(n):("touchstart"!=n.type.toLowerCase()&&"pointerdown"!=n.type.toLowerCase()||"mouse"==n.pointerType||s.longStart(n,this),this.mouseDownXY_=new s.utils.Coordinate(n.clientX,n.clientY),this.healStack_=n.altKey||n.ctrlKey||n.metaKey,this.bindMouseEvents(n)))},s.Gesture.prototype.bindMouseEvents=function(n){this.onMoveWrapper_=s.browserEvents.conditionalBind(document,"mousemove",null,this.handleMove.bind(this)),this.onUpWrapper_=s.browserEvents.conditionalBind(document,"mouseup",null,this.handleUp.bind(this)),n.preventDefault(),n.stopPropagation()},s.Gesture.prototype.handleMove=function(n){this.updateFromEvent_(n),this.isDraggingWorkspace_?this.workspaceDragger_.drag(this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBubble_&&this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_),n.preventDefault(),n.stopPropagation()},s.Gesture.prototype.handleUp=function(n){this.updateFromEvent_(n),s.longStop_(),this.isEnding_?console.log("Trying to end a gesture recursively."):(this.isEnding_=!0,this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(n,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endDrag(n,this.currentDragDeltaXY_):this.isDraggingWorkspace_?this.workspaceDragger_.endDrag(this.currentDragDeltaXY_):this.isBubbleClick_()?this.doBubbleClick_():this.isFieldClick_()?this.doFieldClick_():this.isBlockClick_()?this.doBlockClick_():this.isWorkspaceClick_()&&this.doWorkspaceClick_(n),n.preventDefault(),n.stopPropagation(),this.dispose())},s.Gesture.prototype.cancel=function(){this.isEnding_||(s.longStop_(),this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingWorkspace_&&this.workspaceDragger_.endDrag(this.currentDragDeltaXY_),this.dispose())},s.Gesture.prototype.handleRightClick=function(n){this.targetBlock_?(this.bringBlockToFront_(),s.hideChaff(!!this.flyout_),this.targetBlock_.showContextMenu(n)):this.startBubble_?this.startBubble_.showContextMenu(n):this.startWorkspace_&&!this.flyout_&&(s.hideChaff(),this.startWorkspace_.showContextMenu(n)),n.preventDefault(),n.stopPropagation(),this.dispose()},s.Gesture.prototype.handleWsStart=function(n,l){if(this.hasStarted_)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace_(l),this.mostRecentEvent_=n,this.doStart(n)},s.Gesture.prototype.fireWorkspaceClick_=function(n){s.Events.fire(new(s.Events.get(s.Events.CLICK))(null,n.id,"workspace"))},s.Gesture.prototype.handleFlyoutStart=function(n,l){if(this.hasStarted_)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout_(l),this.handleWsStart(n,l.getWorkspace())},s.Gesture.prototype.handleBlockStart=function(n,l){if(this.hasStarted_)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(l),this.mostRecentEvent_=n},s.Gesture.prototype.handleBubbleStart=function(n,l){if(this.hasStarted_)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(l),this.mostRecentEvent_=n},s.Gesture.prototype.doBubbleClick_=function(){this.startBubble_.setFocus&&this.startBubble_.setFocus(),this.startBubble_.select&&this.startBubble_.select()},s.Gesture.prototype.doFieldClick_=function(){this.startField_.showEditor(this.mostRecentEvent_),this.bringBlockToFront_()},s.Gesture.prototype.doBlockClick_=function(){if(this.flyout_&&this.flyout_.autoClose)this.targetBlock_.isEnabled()&&(s.Events.getGroup()||s.Events.setGroup(!0),this.flyout_.createBlock(this.targetBlock_).scheduleSnapAndBump());else{var n=new(s.Events.get(s.Events.CLICK))(this.startBlock_,this.startWorkspace_.id,"block");s.Events.fire(n)}this.bringBlockToFront_(),s.Events.setGroup(!1)},s.Gesture.prototype.doWorkspaceClick_=function(n){n=this.creatorWorkspace_,s.selected&&s.selected.unselect(),this.fireWorkspaceClick_(this.startWorkspace_||n)},s.Gesture.prototype.bringBlockToFront_=function(){this.targetBlock_&&!this.flyout_&&this.targetBlock_.bringToFront()},s.Gesture.prototype.setStartField=function(n){if(this.hasStarted_)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField_||(this.startField_=n)},s.Gesture.prototype.setStartBubble=function(n){this.startBubble_||(this.startBubble_=n)},s.Gesture.prototype.setStartBlock=function(n){this.startBlock_||this.startBubble_||(this.startBlock_=n,n.isInFlyout&&n!=n.getRootBlock()?this.setTargetBlock_(n.getRootBlock()):this.setTargetBlock_(n))},s.Gesture.prototype.setTargetBlock_=function(n){n.isShadow()?this.setTargetBlock_(n.getParent()):this.targetBlock_=n},s.Gesture.prototype.setStartWorkspace_=function(n){this.startWorkspace_||(this.startWorkspace_=n)},s.Gesture.prototype.setStartFlyout_=function(n){this.flyout_||(this.flyout_=n)},s.Gesture.prototype.isBubbleClick_=function(){return!!this.startBubble_&&!this.hasExceededDragRadius_},s.Gesture.prototype.isBlockClick_=function(){return!!this.startBlock_&&!this.hasExceededDragRadius_&&!this.isFieldClick_()},s.Gesture.prototype.isFieldClick_=function(){return!!this.startField_&&this.startField_.isClickable()&&!this.hasExceededDragRadius_&&(!this.flyout_||!this.flyout_.autoClose)},s.Gesture.prototype.isWorkspaceClick_=function(){return!(this.startBlock_||this.startBubble_||this.startField_||this.hasExceededDragRadius_)},s.Gesture.prototype.isDragging=function(){return this.isDraggingWorkspace_||this.isDraggingBlock_||this.isDraggingBubble_},s.Gesture.prototype.hasStarted=function(){return this.hasStarted_},s.Gesture.prototype.getInsertionMarkers=function(){return this.blockDragger_?this.blockDragger_.getInsertionMarkers():[]},s.Gesture.prototype.getCurrentDragger=function(){return this.isDraggingBlock_?this.blockDragger_:this.isDraggingWorkspace_?this.workspaceDragger_:this.isDraggingBubble_?this.bubbleDragger_:null},s.Gesture.inProgress=function(){for(var u,n=s.Workspace.getAll(),l=0;u=n[l];l++)if(u.currentGesture_)return!0;return!1},s.IRegistrable=function(){},s.Marker=function(){this.drawer_=this.curNode_=this.colour=null,this.type="marker"},s.Marker.prototype.setDrawer=function(n){this.drawer_=n},s.Marker.prototype.getDrawer=function(){return this.drawer_},s.Marker.prototype.getCurNode=function(){return this.curNode_},s.Marker.prototype.setCurNode=function(n){var l=this.curNode_;this.curNode_=n,this.drawer_&&this.drawer_.draw(l,this.curNode_)},s.Marker.prototype.draw=function(){this.drawer_&&this.drawer_.draw(this.curNode_,this.curNode_)},s.Marker.prototype.hide=function(){this.drawer_&&this.drawer_.hide()},s.Marker.prototype.dispose=function(){this.getDrawer()&&this.getDrawer().dispose()},s.Cursor=function(){s.Cursor.superClass_.constructor.call(this),this.type="cursor"},s.utils.object.inherits(s.Cursor,s.Marker),s.Cursor.prototype.next=function(){var n=this.getCurNode();if(!n)return null;for(n=n.next();n&&n.next()&&(n.getType()==s.ASTNode.types.NEXT||n.getType()==s.ASTNode.types.BLOCK);)n=n.next();return n&&this.setCurNode(n),n},s.Cursor.prototype.in=function(){var n=this.getCurNode();return n?((n.getType()==s.ASTNode.types.PREVIOUS||n.getType()==s.ASTNode.types.OUTPUT)&&(n=n.next()),(n=n.in())&&this.setCurNode(n),n):null},s.Cursor.prototype.prev=function(){var n=this.getCurNode();if(!n)return null;for(n=n.prev();n&&n.prev()&&(n.getType()==s.ASTNode.types.NEXT||n.getType()==s.ASTNode.types.BLOCK);)n=n.prev();return n&&this.setCurNode(n),n},s.Cursor.prototype.out=function(){var n=this.getCurNode();return n?((n=n.out())&&n.getType()==s.ASTNode.types.BLOCK&&(n=n.prev()||n),n&&this.setCurNode(n),n):null},s.registry.register(s.registry.Type.CURSOR,s.registry.DEFAULT,s.Cursor),s.MarkerManager=function(n){this.cursorSvg_=this.cursor_=null,this.markers_=Object.create(null),this.workspace_=n},s.MarkerManager.LOCAL_MARKER="local_marker_1",s.MarkerManager.prototype.registerMarker=function(n,l){this.markers_[n]&&this.unregisterMarker(n),l.setDrawer(this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,l)),this.setMarkerSvg(l.getDrawer().createDom()),this.markers_[n]=l},s.MarkerManager.prototype.unregisterMarker=function(n){var l=this.markers_[n];if(!l)throw Error("Marker with ID "+n+" does not exist. Can only unregister markers that exist.");l.dispose(),delete this.markers_[n]},s.MarkerManager.prototype.getCursor=function(){return this.cursor_},s.MarkerManager.prototype.getMarker=function(n){return this.markers_[n]||null},s.MarkerManager.prototype.setCursor=function(n){this.cursor_&&this.cursor_.getDrawer()&&this.cursor_.getDrawer().dispose(),(this.cursor_=n)&&(n=this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,this.cursor_),this.cursor_.setDrawer(n),this.setCursorSvg(this.cursor_.getDrawer().createDom()))},s.MarkerManager.prototype.setCursorSvg=function(n){n?(this.workspace_.getBlockCanvas().appendChild(n),this.cursorSvg_=n):this.cursorSvg_=null},s.MarkerManager.prototype.setMarkerSvg=function(n){n?this.workspace_.getBlockCanvas()&&(this.cursorSvg_?this.workspace_.getBlockCanvas().insertBefore(n,this.cursorSvg_):this.workspace_.getBlockCanvas().appendChild(n)):this.markerSvg_=null},s.MarkerManager.prototype.updateMarkers=function(){this.workspace_.keyboardAccessibilityMode&&this.cursorSvg_&&this.workspace_.getCursor().draw()},s.MarkerManager.prototype.dispose=function(){for(var u,n=Object.keys(this.markers_),l=0;u=n[l];l++)this.unregisterMarker(u);this.markers_=null,this.cursor_&&(this.cursor_.dispose(),this.cursor_=null)},s.WidgetDiv={},s.WidgetDiv.owner_=null,s.WidgetDiv.dispose_=null,s.WidgetDiv.rendererClassName_="",s.WidgetDiv.themeClassName_="",s.WidgetDiv.createDom=function(){s.WidgetDiv.DIV||(s.WidgetDiv.DIV=document.createElement("div"),s.WidgetDiv.DIV.className="blocklyWidgetDiv",(s.parentContainer||document.body).appendChild(s.WidgetDiv.DIV))},s.WidgetDiv.show=function(n,l,u){s.WidgetDiv.hide(),s.WidgetDiv.owner_=n,s.WidgetDiv.dispose_=u,(n=s.WidgetDiv.DIV).style.direction=l?"rtl":"ltr",n.style.display="block",l=s.getMainWorkspace(),s.WidgetDiv.rendererClassName_=l.getRenderer().getClassName(),s.WidgetDiv.themeClassName_=l.getTheme().getClassName(),s.utils.dom.addClass(n,s.WidgetDiv.rendererClassName_),s.utils.dom.addClass(n,s.WidgetDiv.themeClassName_)},s.WidgetDiv.hide=function(){if(s.WidgetDiv.isVisible()){s.WidgetDiv.owner_=null;var n=s.WidgetDiv.DIV;n.style.display="none",n.style.left="",n.style.top="",s.WidgetDiv.dispose_&&s.WidgetDiv.dispose_(),s.WidgetDiv.dispose_=null,n.textContent="",s.WidgetDiv.rendererClassName_&&(s.utils.dom.removeClass(n,s.WidgetDiv.rendererClassName_),s.WidgetDiv.rendererClassName_=""),s.WidgetDiv.themeClassName_&&(s.utils.dom.removeClass(n,s.WidgetDiv.themeClassName_),s.WidgetDiv.themeClassName_=""),s.getMainWorkspace().markFocused()}},s.WidgetDiv.isVisible=function(){return!!s.WidgetDiv.owner_},s.WidgetDiv.hideIfOwner=function(n){s.WidgetDiv.owner_==n&&s.WidgetDiv.hide()},s.WidgetDiv.positionInternal_=function(n,l,u){s.WidgetDiv.DIV.style.left=n+"px",s.WidgetDiv.DIV.style.top=l+"px",s.WidgetDiv.DIV.style.height=u+"px"},s.WidgetDiv.positionWithAnchor=function(n,l,u,h){var _=s.WidgetDiv.calculateY_(n,l,u);n=s.WidgetDiv.calculateX_(n,l,u,h),0>_?s.WidgetDiv.positionInternal_(n,0,u.height+_):s.WidgetDiv.positionInternal_(n,_,u.height)},s.WidgetDiv.calculateX_=function(n,l,u,h){return h?(l=Math.max(l.right-u.width,n.left),Math.min(l,n.right-u.width)):(l=Math.min(l.left,n.right-u.width),Math.max(l,n.left))},s.WidgetDiv.calculateY_=function(n,l,u){return l.bottom+u.height>=n.bottom?l.top-u.height:l.bottom},s.Field=function(n,l,u){this.value_=this.DEFAULT_VALUE,this.tooltip_=this.validator_=null,this.size_=new s.utils.Size(0,0),this.constants_=this.mouseDownWrapper_=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg_=this.cursorSvg_=null,u&&this.configure_(u),this.setValue(n),l&&this.setValidator(l)},s.Field.prototype.DEFAULT_VALUE=null,s.Field.prototype.name=void 0,s.Field.prototype.disposed=!1,s.Field.prototype.maxDisplayLength=50,s.Field.prototype.sourceBlock_=null,s.Field.prototype.isDirty_=!0,s.Field.prototype.visible_=!0,s.Field.prototype.clickTarget_=null,s.Field.NBSP="\xa0",s.Field.prototype.EDITABLE=!0,s.Field.prototype.SERIALIZABLE=!1,s.Field.prototype.configure_=function(n){var l=n.tooltip;"string"==typeof l&&(l=s.utils.replaceMessageReferences(n.tooltip)),l&&this.setTooltip(l)},s.Field.prototype.setSourceBlock=function(n){if(this.sourceBlock_)throw Error("Field already bound to a block.");this.sourceBlock_=n},s.Field.prototype.getConstants=function(){return!this.constants_&&this.sourceBlock_&&this.sourceBlock_.workspace&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_},s.Field.prototype.getSourceBlock=function(){return this.sourceBlock_},s.Field.prototype.init=function(){this.fieldGroup_||(this.fieldGroup_=s.utils.dom.createSvgElement(s.utils.Svg.G,{},null),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip_),this.bindEvents_(),this.initModel())},s.Field.prototype.initView=function(){this.createBorderRect_(),this.createTextElement_()},s.Field.prototype.initModel=function(){},s.Field.prototype.createBorderRect_=function(){this.borderRect_=s.utils.dom.createSvgElement(s.utils.Svg.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)},s.Field.prototype.createTextElement_=function(){this.textElement_=s.utils.dom.createSvgElement(s.utils.Svg.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)},s.Field.prototype.bindEvents_=function(){s.Tooltip.bindMouseEvents(this.getClickTarget_()),this.mouseDownWrapper_=s.browserEvents.conditionalBind(this.getClickTarget_(),"mousedown",this,this.onMouseDown_)},s.Field.prototype.fromXml=function(n){this.setValue(n.textContent)},s.Field.prototype.toXml=function(n){return n.textContent=this.getValue(),n},s.Field.prototype.dispose=function(){s.DropDownDiv.hideIfOwner(this),s.WidgetDiv.hideIfOwner(this),s.Tooltip.unbindMouseEvents(this.getClickTarget_()),this.mouseDownWrapper_&&s.browserEvents.unbind(this.mouseDownWrapper_),s.utils.dom.removeNode(this.fieldGroup_),this.disposed=!0},s.Field.prototype.updateEditable=function(){var n=this.fieldGroup_;this.EDITABLE&&n&&(this.sourceBlock_.isEditable()?(s.utils.dom.addClass(n,"blocklyEditableText"),s.utils.dom.removeClass(n,"blocklyNonEditableText"),n.style.cursor=this.CURSOR):(s.utils.dom.addClass(n,"blocklyNonEditableText"),s.utils.dom.removeClass(n,"blocklyEditableText"),n.style.cursor=""))},s.Field.prototype.isClickable=function(){return!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&!!this.showEditor_&&"function"==typeof this.showEditor_},s.Field.prototype.isCurrentlyEditable=function(){return this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()},s.Field.prototype.isSerializable=function(){var n=!1;return this.name&&(this.SERIALIZABLE?n=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),n=!0)),n},s.Field.prototype.isVisible=function(){return this.visible_},s.Field.prototype.setVisible=function(n){if(this.visible_!=n){this.visible_=n;var l=this.getSvgRoot();l&&(l.style.display=n?"block":"none")}},s.Field.prototype.setValidator=function(n){this.validator_=n},s.Field.prototype.getValidator=function(){return this.validator_},s.Field.prototype.getSvgRoot=function(){return this.fieldGroup_},s.Field.prototype.applyColour=function(){},s.Field.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()},s.Field.prototype.showEditor=function(n){this.isClickable()&&this.showEditor_(n)},s.Field.prototype.updateSize_=function(n){var l=this.getConstants(),u=2*(n=null!=n?n:this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0),h=l.FIELD_TEXT_HEIGHT,_=0;this.textElement_&&(u+=_=s.utils.dom.getFastTextWidth(this.textElement_,l.FIELD_TEXT_FONTSIZE,l.FIELD_TEXT_FONTWEIGHT,l.FIELD_TEXT_FONTFAMILY)),this.borderRect_&&(h=Math.max(h,l.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=h,this.size_.width=u,this.positionTextElement_(n,_),this.positionBorderRect_()},s.Field.prototype.positionTextElement_=function(n,l){if(this.textElement_){var u=this.getConstants(),h=this.size_.height/2;this.textElement_.setAttribute("x",this.sourceBlock_.RTL?this.size_.width-l-n:n),this.textElement_.setAttribute("y",u.FIELD_TEXT_BASELINE_CENTER?h:h-u.FIELD_TEXT_HEIGHT/2+u.FIELD_TEXT_BASELINE)}},s.Field.prototype.positionBorderRect_=function(){this.borderRect_&&(this.borderRect_.setAttribute("width",this.size_.width),this.borderRect_.setAttribute("height",this.size_.height),this.borderRect_.setAttribute("rx",this.getConstants().FIELD_BORDER_RECT_RADIUS),this.borderRect_.setAttribute("ry",this.getConstants().FIELD_BORDER_RECT_RADIUS))},s.Field.prototype.getSize=function(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&0==this.size_.width&&(console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead."),this.render_()),this.size_):new s.utils.Size(0,0)},s.Field.prototype.getScaledBBox=function(){if(this.borderRect_)n=this.borderRect_.getBoundingClientRect(),u=s.utils.style.getPageOffset(this.borderRect_),h=n.width,n=n.height;else{var n=this.sourceBlock_.getHeightWidth(),l=this.sourceBlock_.workspace.scale,u=this.getAbsoluteXY_(),h=n.width*l;n=n.height*l,s.utils.userAgent.GECKO?(u.x+=1.5*l,u.y+=1.5*l):s.utils.userAgent.EDGE||s.utils.userAgent.IE||(u.x-=.5*l,u.y-=.5*l),h+=1*l,n+=1*l}return new s.utils.Rect(u.y,u.y+n,u.x,u.x+h)},s.Field.prototype.getDisplayText_=function(){var n=this.getText();return n?(n.length>this.maxDisplayLength&&(n=n.substring(0,this.maxDisplayLength-2)+"\u2026"),n=n.replace(/\s/g,s.Field.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(n+="\u200f"),n):s.Field.NBSP},s.Field.prototype.getText=function(){if(this.getText_){var n=this.getText_.call(this);if(null!==n)return String(n)}return String(this.getValue())},s.Field.prototype.markDirty=function(){this.isDirty_=!0,this.constants_=null},s.Field.prototype.forceRerender=function(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours(),this.updateMarkers_())},s.Field.prototype.setValue=function(n){if(null!==n){var l=this.doClassValidation_(n);if(!((n=this.processValidation_(n,l))instanceof Error)){if((l=this.getValidator())&&(l=l.call(this,n),(n=this.processValidation_(n,l))instanceof Error))return;if(!(l=this.sourceBlock_)||!l.disposed){var u=this.getValue();u===n?this.doValueUpdate_(n):(l&&s.Events.isEnabled()&&s.Events.fire(new(s.Events.get(s.Events.BLOCK_CHANGE))(l,"field",this.name||null,u,n)),this.doValueUpdate_(n),this.isDirty_&&this.forceRerender())}}}},s.Field.prototype.processValidation_=function(n,l){return null===l?(this.doValueInvalid_(n),this.isDirty_&&this.forceRerender(),Error()):(void 0!==l&&(n=l),n)},s.Field.prototype.getValue=function(){return this.value_},s.Field.prototype.doClassValidation_=function(n){return null==n?null:n},s.Field.prototype.doValueUpdate_=function(n){this.value_=n,this.isDirty_=!0},s.Field.prototype.doValueInvalid_=function(n){},s.Field.prototype.onMouseDown_=function(n){this.sourceBlock_&&this.sourceBlock_.workspace&&(n=this.sourceBlock_.workspace.getGesture(n))&&n.setStartField(this)},s.Field.prototype.setTooltip=function(n){n||""===n||(n=this.sourceBlock_);var l=this.getClickTarget_();l?l.tooltip=n:this.tooltip_=n},s.Field.prototype.getTooltip=function(){var n=this.getClickTarget_();return s.Tooltip.getTooltipOfObject(n||{tooltip:this.tooltip_})},s.Field.prototype.getClickTarget_=function(){return this.clickTarget_||this.getSvgRoot()},s.Field.prototype.getAbsoluteXY_=function(){return s.utils.style.getPageOffset(this.getClickTarget_())},s.Field.prototype.referencesVariables=function(){return!1},s.Field.prototype.getParentInput=function(){for(var n=null,l=this.sourceBlock_,u=l.inputList,h=0;h<l.inputList.length;h++)for(var _=u[h],b=_.fieldRow,R=0;R<b.length;R++)if(b[R]===this){n=_;break}return n},s.Field.prototype.getFlipRtl=function(){return!1},s.Field.prototype.isTabNavigable=function(){return!1},s.Field.prototype.onShortcut=function(n){return!1},s.Field.prototype.setCursorSvg=function(n){n?(this.fieldGroup_.appendChild(n),this.cursorSvg_=n):this.cursorSvg_=null},s.Field.prototype.setMarkerSvg=function(n){n?(this.fieldGroup_.appendChild(n),this.markerSvg_=n):this.markerSvg_=null},s.Field.prototype.updateMarkers_=function(){var n=this.sourceBlock_.workspace;n.keyboardAccessibilityMode&&this.cursorSvg_&&n.getCursor().draw(),n.keyboardAccessibilityMode&&this.markerSvg_&&n.getMarker(s.MarkerManager.LOCAL_MARKER).draw()},s.FieldLabel=function(n,l,u){this.class_=null,s.FieldLabel.superClass_.constructor.call(this,n,null,u),u||(this.class_=l||null)},s.utils.object.inherits(s.FieldLabel,s.Field),s.FieldLabel.prototype.DEFAULT_VALUE="",s.FieldLabel.fromJson=function(n){var l=s.utils.replaceMessageReferences(n.text);return new s.FieldLabel(l,void 0,n)},s.FieldLabel.prototype.EDITABLE=!1,s.FieldLabel.prototype.configure_=function(n){s.FieldLabel.superClass_.configure_.call(this,n),this.class_=n.class},s.FieldLabel.prototype.initView=function(){this.createTextElement_(),this.class_&&s.utils.dom.addClass(this.textElement_,this.class_)},s.FieldLabel.prototype.doClassValidation_=function(n){return null==n?null:String(n)},s.FieldLabel.prototype.setClass=function(n){this.textElement_&&(this.class_&&s.utils.dom.removeClass(this.textElement_,this.class_),n&&s.utils.dom.addClass(this.textElement_,n)),this.class_=n},s.fieldRegistry.register("field_label",s.FieldLabel),s.Input=function(n,l,u,h){if(n!=s.inputTypes.DUMMY&&!l)throw Error("Value inputs and statement inputs must have non-empty name.");this.type=n,this.name=l,this.sourceBlock_=u,this.connection=h,this.fieldRow=[]},s.Input.prototype.align=s.constants.ALIGN.LEFT,s.Input.prototype.visible_=!0,s.Input.prototype.getSourceBlock=function(){return this.sourceBlock_},s.Input.prototype.appendField=function(n,l){return this.insertFieldAt(this.fieldRow.length,n,l),this},s.Input.prototype.insertFieldAt=function(n,l,u){if(0>n||n>this.fieldRow.length)throw Error("index "+n+" out of bounds.");return(l||""==l&&u)&&("string"==typeof l&&(l=s.fieldRegistry.fromJson({type:"field_label",text:l})),l.setSourceBlock(this.sourceBlock_),this.sourceBlock_.rendered&&(l.init(),l.applyColour()),l.name=u,l.setVisible(this.isVisible()),l.prefixField&&(n=this.insertFieldAt(n,l.prefixField)),this.fieldRow.splice(n,0,l),++n,l.suffixField&&(n=this.insertFieldAt(n,l.suffixField)),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours())),n},s.Input.prototype.removeField=function(n,l){for(var h,u=0;h=this.fieldRow[u];u++)if(h.name===n)return h.dispose(),this.fieldRow.splice(u,1),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours()),!0;if(l)return!1;throw Error('Field "'+n+'" not found.')},s.Input.prototype.isVisible=function(){return this.visible_},s.Input.prototype.setVisible=function(n){var l=[];if(this.visible_==n)return l;this.visible_=n;for(var h,u=0;h=this.fieldRow[u];u++)h.setVisible(n);return this.connection&&(this.connection=this.connection,n?l=this.connection.startTrackingAll():this.connection.stopTrackingAll(),u=this.connection.targetBlock())&&(u.getSvgRoot().style.display=n?"block":"none"),l},s.Input.prototype.markDirty=function(){for(var l,n=0;l=this.fieldRow[n];n++)l.markDirty()},s.Input.prototype.setCheck=function(n){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(n),this},s.Input.prototype.setAlign=function(n){return this.align=n,this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render()),this},s.Input.prototype.setShadowDom=function(n){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(n),this},s.Input.prototype.getShadowDom=function(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()},s.Input.prototype.init=function(){if(this.sourceBlock_.workspace.rendered)for(var n=0;n<this.fieldRow.length;n++)this.fieldRow[n].init()},s.Input.prototype.dispose=function(){for(var l,n=0;l=this.fieldRow[n];n++)l.dispose();this.connection&&this.connection.dispose(),this.sourceBlock_=null},s.Block=function(n,l,u){if(s.Generator&&void 0!==s.Generator.prototype[l])throw Error('Block prototypeName "'+l+'" conflicts with Blockly.Generator members.');if(this.id=u&&!n.getBlockById(u)?u:s.utils.genUid(),n.setBlockById(this.id,this),this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.inputsInline=void 0,this.disabled=!1,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable_=this.movable_=this.deletable_=!0,this.collapsed_=this.isShadow_=!1,this.comment=this.outputShape_=null,this.commentModel={text:null,pinned:!1,size:new s.utils.Size(160,80)},this.xy_=new s.utils.Coordinate(0,0),this.workspace=n,this.isInFlyout=n.isFlyout,this.isInMutator=n.isMutator,this.RTL=n.RTL,this.isInsertionMarker_=!1,this.hat=void 0,this.rendered=null,this.statementInputCount=0,l){if(this.type=l,!(u=s.Blocks[l])||"object"!=typeof u)throw TypeError("Unknown block type: "+l);s.utils.object.mixin(this,u)}n.addTopBlock(this),n.addTypedBlock(this),(n=s.Events.getGroup())||s.Events.setGroup(!0),l=s.Events.recordUndo;try{"function"==typeof this.init&&(s.Events.recordUndo=!1,this.init(),s.Events.recordUndo=l),s.Events.isEnabled()&&s.Events.fire(new(s.Events.get(s.Events.BLOCK_CREATE))(this))}finally{n||s.Events.setGroup(!1),s.Events.recordUndo=l}this.inputsInlineDefault=this.inputsInline,"function"==typeof this.onchange&&this.setOnChange(this.onchange)},s.Block.COLLAPSED_INPUT_NAME=s.constants.COLLAPSED_INPUT_NAME,s.Block.COLLAPSED_FIELD_NAME=s.constants.COLLAPSED_FIELD_NAME,s.Block.prototype.data=null,s.Block.prototype.disposed=!1,s.Block.prototype.hue_=null,s.Block.prototype.colour_="#000000",s.Block.prototype.styleName_="",s.Block.prototype.dispose=function(n){if(this.workspace){this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.unplug(n),s.Events.isEnabled()&&s.Events.fire(new(s.Events.get(s.Events.BLOCK_DELETE))(this)),s.Events.disable();try{this.workspace&&(this.workspace.removeTopBlock(this),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),this.workspace=null),s.selected==this&&(s.selected=null);for(var l=this.childBlocks_.length-1;0<=l;l--)this.childBlocks_[l].dispose(!1);l=0;for(var u;u=this.inputList[l];l++)u.dispose();this.inputList.length=0;var _,h=this.getConnections_(!0);for(l=0;_=h[l];l++)_.dispose()}finally{s.Events.enable(),this.disposed=!0}}},s.Block.prototype.initModel=function(){for(var l,n=0;l=this.inputList[n];n++)for(var h,u=0;h=l.fieldRow[u];u++)h.initModel&&h.initModel()},s.Block.prototype.unplug=function(n){this.outputConnection?this.unplugFromRow_(n):this.previousConnection&&this.unplugFromStack_(n)},s.Block.prototype.unplugFromRow_=function(n){var l=null;this.outputConnection.isConnected()&&(l=this.outputConnection.targetConnection,this.outputConnection.disconnect()),l&&n&&(n=this.getOnlyValueConnection_())&&n.isConnected()&&!n.targetBlock().isShadow()&&((n=n.targetConnection).disconnect(),this.workspace.connectionChecker.canConnect(n,l,!1)?l.connect(n):n.onFailedConnect(l))},s.Block.prototype.getOnlyValueConnection_=function(){for(var n=null,l=0;l<this.inputList.length;l++){var u=this.inputList[l].connection;if(u&&u.type==s.connectionTypes.INPUT_VALUE&&u.targetConnection){if(n)return null;n=u}}return n},s.Block.prototype.unplugFromStack_=function(n){var l=null;this.previousConnection.isConnected()&&(l=this.previousConnection.targetConnection,this.previousConnection.disconnect());var u=this.getNextBlock();n&&u&&!u.isShadow()&&((n=this.nextConnection.targetConnection).disconnect(),l&&this.workspace.connectionChecker.canConnect(l,n,!1)&&l.connect(n))},s.Block.prototype.getConnections_=function(n){n=[],this.outputConnection&&n.push(this.outputConnection),this.previousConnection&&n.push(this.previousConnection),this.nextConnection&&n.push(this.nextConnection);for(var u,l=0;u=this.inputList[l];l++)u.connection&&n.push(u.connection);return n},s.Block.prototype.lastConnectionInStack=function(n){for(var l=this.nextConnection;l;){var u=l.targetBlock();if(!u||n&&u.isShadow())return l;l=u.nextConnection}return null},s.Block.prototype.bumpNeighbours=function(){},s.Block.prototype.getParent=function(){return this.parentBlock_},s.Block.prototype.getInputWithBlock=function(n){for(var u,l=0;u=this.inputList[l];l++)if(u.connection&&u.connection.targetBlock()==n)return u;return null},s.Block.prototype.getSurroundParent=function(){var n=this;do{var l=n;if(!(n=n.getParent()))return null}while(n.getNextBlock()==l);return n},s.Block.prototype.getNextBlock=function(){return this.nextConnection&&this.nextConnection.targetBlock()},s.Block.prototype.getPreviousBlock=function(){return this.previousConnection&&this.previousConnection.targetBlock()},s.Block.prototype.getFirstStatementConnection=function(){for(var l,n=0;l=this.inputList[n];n++)if(l.connection&&l.connection.type==s.connectionTypes.NEXT_STATEMENT)return l.connection;return null},s.Block.prototype.getRootBlock=function(){var n=this;do{var l=n;n=l.parentBlock_}while(n);return l},s.Block.prototype.getTopStackBlock=function(){var n=this;do{var l=n.getPreviousBlock()}while(l&&l.getNextBlock()==n&&(n=l));return n},s.Block.prototype.getChildren=function(n){if(!n)return this.childBlocks_;n=[];for(var u,l=0;u=this.inputList[l];l++)u.connection&&(u=u.connection.targetBlock())&&n.push(u);return(l=this.getNextBlock())&&n.push(l),n},s.Block.prototype.setParent=function(n){if(n!=this.parentBlock_){if(this.parentBlock_){if(s.utils.arrayRemove(this.parentBlock_.childBlocks_,this),this.previousConnection&&this.previousConnection.isConnected())throw Error("Still connected to previous block.");if(this.outputConnection&&this.outputConnection.isConnected())throw Error("Still connected to parent block.");this.parentBlock_=null}else this.workspace.removeTopBlock(this);(this.parentBlock_=n)?n.childBlocks_.push(this):this.workspace.addTopBlock(this)}},s.Block.prototype.getDescendants=function(n){for(var h,l=[this],u=this.getChildren(n),_=0;h=u[_];_++)l.push.apply(l,h.getDescendants(n));return l},s.Block.prototype.isDeletable=function(){return this.deletable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},s.Block.prototype.setDeletable=function(n){this.deletable_=n},s.Block.prototype.isMovable=function(){return this.movable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},s.Block.prototype.setMovable=function(n){this.movable_=n},s.Block.prototype.isDuplicatable=function(){return!this.workspace.hasBlockLimits()||this.workspace.isCapacityAvailable(s.utils.getBlockTypeCounts(this,!0))},s.Block.prototype.isShadow=function(){return this.isShadow_},s.Block.prototype.setShadow=function(n){this.isShadow_=n},s.Block.prototype.isInsertionMarker=function(){return this.isInsertionMarker_},s.Block.prototype.setInsertionMarker=function(n){this.isInsertionMarker_=n},s.Block.prototype.isEditable=function(){return this.editable_&&!(this.workspace&&this.workspace.options.readOnly)},s.Block.prototype.setEditable=function(n){this.editable_=n,n=0;for(var l;l=this.inputList[n];n++)for(var h,u=0;h=l.fieldRow[u];u++)h.updateEditable()},s.Block.prototype.isDisposed=function(){return this.disposed},s.Block.prototype.getMatchingConnection=function(n,l){var u=this.getConnections_(!0);if(n=n.getConnections_(!0),u.length!=n.length)throw Error("Connection lists did not match in length.");for(var h=0;h<n.length;h++)if(n[h]==l)return u[h];return null},s.Block.prototype.setHelpUrl=function(n){this.helpUrl=n},s.Block.prototype.setTooltip=function(n){this.tooltip=n},s.Block.prototype.getTooltip=function(){return s.Tooltip.getTooltipOfObject(this)},s.Block.prototype.getColour=function(){return this.colour_},s.Block.prototype.getStyleName=function(){return this.styleName_},s.Block.prototype.getHue=function(){return this.hue_},s.Block.prototype.setColour=function(n){n=s.utils.parseBlockColour(n),this.hue_=n.hue,this.colour_=n.hex},s.Block.prototype.setStyle=function(n){this.styleName_=n},s.Block.prototype.setOnChange=function(n){if(n&&"function"!=typeof n)throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),(this.onchange=n)&&(this.onchangeWrapper_=n.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_))},s.Block.prototype.getField=function(n){if("string"!=typeof n)throw TypeError("Blockly.Block.prototype.getField expects a string with the field name but received "+(void 0===n?"nothing":n+" of type "+typeof n)+" instead");for(var u,l=0;u=this.inputList[l];l++)for(var _,h=0;_=u.fieldRow[h];h++)if(_.name===n)return _;return null},s.Block.prototype.getVars=function(){for(var u,n=[],l=0;u=this.inputList[l];l++)for(var _,h=0;_=u.fieldRow[h];h++)_.referencesVariables()&&n.push(_.getValue());return n},s.Block.prototype.getVarModels=function(){for(var u,n=[],l=0;u=this.inputList[l];l++)for(var _,h=0;_=u.fieldRow[h];h++)_.referencesVariables()&&(_=this.workspace.getVariableById(_.getValue()))&&n.push(_);return n},s.Block.prototype.updateVarName=function(n){for(var u,l=0;u=this.inputList[l];l++)for(var _,h=0;_=u.fieldRow[h];h++)_.referencesVariables()&&n.getId()==_.getValue()&&_.refreshVariableName()},s.Block.prototype.renameVarById=function(n,l){for(var h,u=0;h=this.inputList[u];u++)for(var b,_=0;b=h.fieldRow[_];_++)b.referencesVariables()&&n==b.getValue()&&b.setValue(l)},s.Block.prototype.getFieldValue=function(n){return(n=this.getField(n))?n.getValue():null},s.Block.prototype.setFieldValue=function(n,l){var u=this.getField(l);if(!u)throw Error('Field "'+l+'" not found.');u.setValue(n)},s.Block.prototype.setPreviousStatement=function(n,l){if(n){if(void 0===l&&(l=null),!this.previousConnection){if(this.outputConnection)throw Error("Remove output connection prior to adding previous connection.");this.previousConnection=this.makeConnection_(s.connectionTypes.PREVIOUS_STATEMENT)}this.previousConnection.setCheck(l)}else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}},s.Block.prototype.setNextStatement=function(n,l){if(n)void 0===l&&(l=null),this.nextConnection||(this.nextConnection=this.makeConnection_(s.connectionTypes.NEXT_STATEMENT)),this.nextConnection.setCheck(l);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}},s.Block.prototype.setOutput=function(n,l){if(n){if(void 0===l&&(l=null),!this.outputConnection){if(this.previousConnection)throw Error("Remove previous connection prior to adding output connection.");this.outputConnection=this.makeConnection_(s.connectionTypes.OUTPUT_VALUE)}this.outputConnection.setCheck(l)}else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}},s.Block.prototype.setInputsInline=function(n){this.inputsInline!=n&&(s.Events.fire(new(s.Events.get(s.Events.BLOCK_CHANGE))(this,"inline",null,this.inputsInline,n)),this.inputsInline=n)},s.Block.prototype.getInputsInline=function(){if(null!=this.inputsInline)return this.inputsInline;for(var n=1;n<this.inputList.length;n++)if(this.inputList[n-1].type==s.inputTypes.DUMMY&&this.inputList[n].type==s.inputTypes.DUMMY)return!1;for(n=1;n<this.inputList.length;n++)if(this.inputList[n-1].type==s.inputTypes.VALUE&&this.inputList[n].type==s.inputTypes.DUMMY)return!0;return!1},s.Block.prototype.setOutputShape=function(n){this.outputShape_=n},s.Block.prototype.getOutputShape=function(){return this.outputShape_},s.Block.prototype.isEnabled=function(){return!this.disabled},s.Block.prototype.setEnabled=function(n){this.isEnabled()!=n&&(s.Events.fire(new(s.Events.get(s.Events.BLOCK_CHANGE))(this,"disabled",null,this.disabled,!n)),this.disabled=!n)},s.Block.prototype.getInheritedDisabled=function(){for(var n=this.getSurroundParent();n;){if(n.disabled)return!0;n=n.getSurroundParent()}return!1},s.Block.prototype.isCollapsed=function(){return this.collapsed_},s.Block.prototype.setCollapsed=function(n){this.collapsed_!=n&&(s.Events.fire(new(s.Events.get(s.Events.BLOCK_CHANGE))(this,"collapsed",null,this.collapsed_,n)),this.collapsed_=n)},s.Block.prototype.toString=function(n,l){function u(W){var G=W.getCheck();return!G&&W.targetConnection&&(G=W.targetConnection.getCheck()),!!G&&(-1!=G.indexOf("Boolean")||-1!=G.indexOf("Number"))}function h(){R&&R.getType()==O.getType()&&R.getLocation()==O.getLocation()&&(R=null)}var _=[];l=l||"?";var b=s.ASTNode.NAVIGATE_ALL_FIELDS;s.ASTNode.NAVIGATE_ALL_FIELDS=!0;for(var R=s.ASTNode.createBlockNode(this),O=R;R;){switch(R.getType()){case s.ASTNode.types.INPUT:var H=R.getLocation();R.in()?u(H)&&_.push("("):_.push(l);break;case s.ASTNode.types.FIELD:(H=R.getLocation()).name!=s.constants.COLLAPSED_FIELD_NAME&&_.push(H.getText())}if(!(R=(H=R).in()||H.next())){for(R=H.out(),h();R&&!R.next();)R=R.out(),h(),R&&R.getType()==s.ASTNode.types.INPUT&&u(R.getLocation())&&_.push(")");R&&(R=R.next())}}for(s.ASTNode.NAVIGATE_ALL_FIELDS=b,l=2;l<_.length;l++)"("==_[l-2]&&")"==_[l]&&(_[l-2]=_[l-1],_.splice(l-1,2));return _=(_=_.reduce(function(W,G){return W+("("==W.substr(-1)||")"==G?"":" ")+G},"")).trim()||"???",n&&_.length>n&&(_=_.substring(0,n-3)+"..."),_},s.Block.prototype.appendValueInput=function(n){return this.appendInput_(s.inputTypes.VALUE,n)},s.Block.prototype.appendStatementInput=function(n){return this.appendInput_(s.inputTypes.STATEMENT,n)},s.Block.prototype.appendDummyInput=function(n){return this.appendInput_(s.inputTypes.DUMMY,n||"")},s.Block.prototype.jsonInit=function(n){var l=n.type?'Block "'+n.type+'": ':"";if(n.output&&n.previousStatement)throw Error(l+"Must not have both an output and a previousStatement.");if(n.style&&n.style.hat&&(this.hat=n.style.hat,n.style=null),n.style&&n.colour)throw Error(l+"Must not have both a colour and a style.");n.style?this.jsonInitStyle_(n,l):this.jsonInitColour_(n,l);for(var u=0;void 0!==n["message"+u];)this.interpolate_(n["message"+u],n["args"+u]||[],n["lastDummyAlign"+u],l),u++;if(void 0!==n.inputsInline&&this.setInputsInline(n.inputsInline),void 0!==n.output&&this.setOutput(!0,n.output),void 0!==n.outputShape&&this.setOutputShape(n.outputShape),void 0!==n.previousStatement&&this.setPreviousStatement(!0,n.previousStatement),void 0!==n.nextStatement&&this.setNextStatement(!0,n.nextStatement),void 0!==n.tooltip&&(u=s.utils.replaceMessageReferences(u=n.tooltip),this.setTooltip(u)),void 0!==n.enableContextMenu&&(this.contextMenu=!!(u=n.enableContextMenu)),void 0!==n.helpUrl&&(u=s.utils.replaceMessageReferences(u=n.helpUrl),this.setHelpUrl(u)),"string"==typeof n.extensions&&(console.warn(l+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+n.type+"' block."),n.extensions=[n.extensions]),void 0!==n.mutator&&s.Extensions.apply(n.mutator,this,!0),n=n.extensions,Array.isArray(n))for(l=0;l<n.length;++l)s.Extensions.apply(n[l],this,!1)},s.Block.prototype.jsonInitColour_=function(n,l){if("colour"in n)if(void 0===n.colour)console.warn(l+"Undefined colour value.");else{n=n.colour;try{this.setColour(n)}catch(u){console.warn(l+"Illegal colour value: ",n)}}},s.Block.prototype.jsonInitStyle_=function(n,l){n=n.style;try{this.setStyle(n)}catch(u){console.warn(l+"Style does not exist: ",n)}},s.Block.prototype.mixin=function(n,l){if(void 0!==l&&"boolean"!=typeof l)throw Error("opt_disableCheck must be a boolean if provided");if(!l){for(var u in l=[],n)void 0!==this[u]&&l.push(u);if(l.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(l))}s.utils.object.mixin(this,n)},s.Block.prototype.interpolate_=function(n,l,u,h){n=s.utils.tokenizeInterpolation(n),this.validateTokens_(n,l.length),l=this.interpolateArguments_(n,l,u),u=[],n=0;for(var _;_=l[n];n++)if(this.isInputKeyword_(_.type)){if(_=this.inputFromJson_(_,h)){for(var R,b=0;R=u[b];b++)_.appendField(R[0],R[1]);u.length=0}}else(b=this.fieldFromJson_(_))&&u.push([b,_.name])},s.Block.prototype.validateTokens_=function(n,l){for(var u=[],h=0,_=0;_<n.length;_++){var b=n[_];if("number"==typeof b){if(1>b||b>l)throw Error('Block "'+this.type+'": Message index %'+b+" out of range.");if(u[b])throw Error('Block "'+this.type+'": Message index %'+b+" duplicated.");u[b]=!0,h++}}if(h!=l)throw Error('Block "'+this.type+'": Message does not reference all '+l+" arg(s).")},s.Block.prototype.interpolateArguments_=function(n,l,u){for(var h=[],_=0;_<n.length;_++){var b=n[_];"number"==typeof b&&(b=l[b-1]),("string"!=typeof b||(b=this.stringToFieldJson_(b)))&&h.push(b)}return(n=h.length)&&!this.isInputKeyword_(h[n-1].type)&&(n={type:"input_dummy"},u&&(n.align=u),h.push(n)),h},s.Block.prototype.fieldFromJson_=function(n){var l=s.fieldRegistry.fromJson(n);return!l&&n.alt?"string"==typeof n.alt?(n=this.stringToFieldJson_(n.alt))?this.fieldFromJson_(n):null:this.fieldFromJson_(n.alt):l},s.Block.prototype.inputFromJson_=function(n,l){var u={LEFT:s.constants.ALIGN.LEFT,RIGHT:s.constants.ALIGN.RIGHT,CENTRE:s.constants.ALIGN.CENTRE,CENTER:s.constants.ALIGN.CENTRE},h=null;switch(n.type){case"input_value":h=this.appendValueInput(n.name);break;case"input_statement":h=this.appendStatementInput(n.name);break;case"input_dummy":h=this.appendDummyInput(n.name)}return h?(n.check&&h.setCheck(n.check),n.align&&(void 0===(u=u[n.align.toUpperCase()])?console.warn(l+"Illegal align value: ",n.align):h.setAlign(u)),h):null},s.Block.prototype.isInputKeyword_=function(n){return"input_value"==n||"input_statement"==n||"input_dummy"==n},s.Block.prototype.stringToFieldJson_=function(n){return(n=n.trim())?{type:"field_label",text:n}:null},s.Block.prototype.appendInput_=function(n,l){var u=null;return(n==s.inputTypes.VALUE||n==s.inputTypes.STATEMENT)&&(u=this.makeConnection_(n)),n==s.inputTypes.STATEMENT&&this.statementInputCount++,n=new s.Input(n,l,this,u),this.inputList.push(n),n},s.Block.prototype.moveInputBefore=function(n,l){if(n!=l){for(var b,u=-1,h=l?-1:this.inputList.length,_=0;b=this.inputList[_];_++)if(b.name==n){if(u=_,-1!=h)break}else if(l&&b.name==l&&(h=_,-1!=u))break;if(-1==u)throw Error('Named input "'+n+'" not found.');if(-1==h)throw Error('Reference input "'+l+'" not found.');this.moveNumberedInputBefore(u,h)}},s.Block.prototype.moveNumberedInputBefore=function(n,l){if(n==l)throw Error("Can't move input to itself.");if(n>=this.inputList.length)throw RangeError("Input index "+n+" out of bounds.");if(l>this.inputList.length)throw RangeError("Reference input "+l+" out of bounds.");var u=this.inputList[n];this.inputList.splice(n,1),n<l&&l--,this.inputList.splice(l,0,u)},s.Block.prototype.removeInput=function(n,l){for(var h,u=0;h=this.inputList[u];u++)if(h.name==n)return h.type==s.inputTypes.STATEMENT&&this.statementInputCount--,h.dispose(),this.inputList.splice(u,1),!0;if(l)return!1;throw Error("Input not found: "+n)},s.Block.prototype.getInput=function(n){for(var u,l=0;u=this.inputList[l];l++)if(u.name==n)return u;return null},s.Block.prototype.getInputTargetBlock=function(n){return(n=this.getInput(n))&&n.connection&&n.connection.targetBlock()},s.Block.prototype.getCommentText=function(){return this.commentModel.text},s.Block.prototype.setCommentText=function(n){this.commentModel.text!=n&&(s.Events.fire(new(s.Events.get(s.Events.BLOCK_CHANGE))(this,"comment",null,this.commentModel.text,n)),this.comment=this.commentModel.text=n)},s.Block.prototype.setWarningText=function(n,l){},s.Block.prototype.setMutator=function(n){},s.Block.prototype.getRelativeToSurfaceXY=function(){return this.xy_},s.Block.prototype.moveBy=function(n,l){if(this.parentBlock_)throw Error("Block has parent.");var u=new(s.Events.get(s.Events.BLOCK_MOVE))(this);this.xy_.translate(n,l),u.recordNew(),s.Events.fire(u)},s.Block.prototype.makeConnection_=function(n){return new s.Connection(this,n)},s.Block.prototype.allInputsFilled=function(n){if(void 0===n&&(n=!0),!n&&this.isShadow())return!1;for(var u,l=0;u=this.inputList[l];l++)if(u.connection&&(!(u=u.connection.targetBlock())||!u.allInputsFilled(n)))return!1;return!(l=this.getNextBlock())||l.allInputsFilled(n)},s.Block.prototype.toDevString=function(){var n=this.type?'"'+this.type+'" block':"Block";return this.id&&(n+=' (id="'+this.id+'")'),n},s.blockRendering.IPathObject=function(n,l){},s.utils.KeyCodes={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PLUS_SIGN:43,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,FF_DASH:173,FF_HASH:163,QUESTION_MARK:63,AT_SIGN:64,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,MAC_WK_CMD_LEFT:91,MAC_WK_CMD_RIGHT:93,WIN_IME:229,VK_NONAME:252,PHANTOM:255},s.Menu=function(){this.menuItems_=[],this.roleName_=this.element_=this.onKeyDownHandler_=this.mouseLeaveHandler_=this.mouseEnterHandler_=this.clickHandler_=this.mouseOverHandler_=this.highlightedItem_=this.openingCoords=null},s.Menu.prototype.addChild=function(n){this.menuItems_.push(n)},s.Menu.prototype.render=function(n){var l=document.createElement("div");l.className="blocklyMenu goog-menu blocklyNonSelectable",l.tabIndex=0,this.roleName_&&s.utils.aria.setRole(l,this.roleName_),this.element_=l;for(var h,u=0;h=this.menuItems_[u];u++)l.appendChild(h.createDom());this.mouseOverHandler_=s.browserEvents.conditionalBind(l,"mouseover",this,this.handleMouseOver_,!0),this.clickHandler_=s.browserEvents.conditionalBind(l,"click",this,this.handleClick_,!0),this.mouseEnterHandler_=s.browserEvents.conditionalBind(l,"mouseenter",this,this.handleMouseEnter_,!0),this.mouseLeaveHandler_=s.browserEvents.conditionalBind(l,"mouseleave",this,this.handleMouseLeave_,!0),this.onKeyDownHandler_=s.browserEvents.conditionalBind(l,"keydown",this,this.handleKeyEvent_),n.appendChild(l)},s.Menu.prototype.getElement=function(){return this.element_},s.Menu.prototype.focus=function(){var n=this.getElement();n&&(n.focus({preventScroll:!0}),s.utils.dom.addClass(n,"blocklyFocused"))},s.Menu.prototype.blur_=function(){var n=this.getElement();n&&(n.blur(),s.utils.dom.removeClass(n,"blocklyFocused"))},s.Menu.prototype.setRole=function(n){this.roleName_=n},s.Menu.prototype.dispose=function(){this.mouseOverHandler_&&(s.browserEvents.unbind(this.mouseOverHandler_),this.mouseOverHandler_=null),this.clickHandler_&&(s.browserEvents.unbind(this.clickHandler_),this.clickHandler_=null),this.mouseEnterHandler_&&(s.browserEvents.unbind(this.mouseEnterHandler_),this.mouseEnterHandler_=null),this.mouseLeaveHandler_&&(s.browserEvents.unbind(this.mouseLeaveHandler_),this.mouseLeaveHandler_=null),this.onKeyDownHandler_&&(s.browserEvents.unbind(this.onKeyDownHandler_),this.onKeyDownHandler_=null);for(var l,n=0;l=this.menuItems_[n];n++)l.dispose();this.element_=null},s.Menu.prototype.getMenuItem_=function(n){for(var l=this.getElement();n&&n!=l;){if(s.utils.dom.hasClass(n,"blocklyMenuItem"))for(var h,u=0;h=this.menuItems_[u];u++)if(h.getElement()==n)return h;n=n.parentElement}return null},s.Menu.prototype.setHighlighted=function(n){var l=this.highlightedItem_;l&&(l.setHighlighted(!1),this.highlightedItem_=null),n&&(n.setHighlighted(!0),this.highlightedItem_=n,l=this.getElement(),s.utils.style.scrollIntoContainerView(n.getElement(),l),s.utils.aria.setState(l,s.utils.aria.State.ACTIVEDESCENDANT,n.getId()))},s.Menu.prototype.highlightNext=function(){var n=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(n,1)},s.Menu.prototype.highlightPrevious=function(){var n=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(0>n?this.menuItems_.length:n,-1)},s.Menu.prototype.highlightFirst_=function(){this.highlightHelper_(-1,1)},s.Menu.prototype.highlightLast_=function(){this.highlightHelper_(this.menuItems_.length,-1)},s.Menu.prototype.highlightHelper_=function(n,l){n+=l;for(var u;u=this.menuItems_[n];){if(u.isEnabled()){this.setHighlighted(u);break}n+=l}},s.Menu.prototype.handleMouseOver_=function(n){(n=this.getMenuItem_(n.target))&&(n.isEnabled()?this.highlightedItem_!=n&&this.setHighlighted(n):this.setHighlighted(null))},s.Menu.prototype.handleClick_=function(n){var l=this.openingCoords;if(this.openingCoords=null,l&&"number"==typeof n.clientX){var u=new s.utils.Coordinate(n.clientX,n.clientY);if(1>s.utils.Coordinate.distance(l,u))return}(n=this.getMenuItem_(n.target))&&n.performAction()},s.Menu.prototype.handleMouseEnter_=function(n){this.focus()},s.Menu.prototype.handleMouseLeave_=function(n){this.getElement()&&(this.blur_(),this.setHighlighted(null))},s.Menu.prototype.handleKeyEvent_=function(n){if(this.menuItems_.length&&!(n.shiftKey||n.ctrlKey||n.metaKey||n.altKey)){var l=this.highlightedItem_;switch(n.keyCode){case s.utils.KeyCodes.ENTER:case s.utils.KeyCodes.SPACE:l&&l.performAction();break;case s.utils.KeyCodes.UP:this.highlightPrevious();break;case s.utils.KeyCodes.DOWN:this.highlightNext();break;case s.utils.KeyCodes.PAGE_UP:case s.utils.KeyCodes.HOME:this.highlightFirst_();break;case s.utils.KeyCodes.PAGE_DOWN:case s.utils.KeyCodes.END:this.highlightLast_();break;default:return}n.preventDefault(),n.stopPropagation()}},s.Menu.prototype.getSize=function(){var n=this.getElement(),l=s.utils.style.getSize(n);return l.height=n.scrollHeight,l},s.MenuItem=function(n,l){this.content_=n,this.value_=l,this.enabled_=!0,this.element_=null,this.rightToLeft_=!1,this.roleName_=null,this.highlight_=this.checked_=this.checkable_=!1,this.actionHandler_=null},s.MenuItem.prototype.createDom=function(){var n=document.createElement("div");n.id=s.utils.IdGenerator.getNextUniqueId(),this.element_=n,n.className="blocklyMenuItem goog-menuitem "+(this.enabled_?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked_?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight_?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft_?"blocklyMenuItemRtl goog-menuitem-rtl ":"");var l=document.createElement("div");if(l.className="blocklyMenuItemContent goog-menuitem-content",this.checkable_){var u=document.createElement("div");u.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",l.appendChild(u)}return u=this.content_,"string"==typeof this.content_&&(u=document.createTextNode(this.content_)),l.appendChild(u),n.appendChild(l),this.roleName_&&s.utils.aria.setRole(n,this.roleName_),s.utils.aria.setState(n,s.utils.aria.State.SELECTED,this.checkable_&&this.checked_||!1),s.utils.aria.setState(n,s.utils.aria.State.DISABLED,!this.enabled_),n},s.MenuItem.prototype.dispose=function(){this.element_=null},s.MenuItem.prototype.getElement=function(){return this.element_},s.MenuItem.prototype.getId=function(){return this.element_.id},s.MenuItem.prototype.getValue=function(){return this.value_},s.MenuItem.prototype.setRightToLeft=function(n){this.rightToLeft_=n},s.MenuItem.prototype.setRole=function(n){this.roleName_=n},s.MenuItem.prototype.setCheckable=function(n){this.checkable_=n},s.MenuItem.prototype.setChecked=function(n){this.checked_=n},s.MenuItem.prototype.setHighlighted=function(n){this.highlight_=n;var l=this.getElement();l&&this.isEnabled()&&(n?(s.utils.dom.addClass(l,"blocklyMenuItemHighlight"),s.utils.dom.addClass(l,"goog-menuitem-highlight")):(s.utils.dom.removeClass(l,"blocklyMenuItemHighlight"),s.utils.dom.removeClass(l,"goog-menuitem-highlight")))},s.MenuItem.prototype.isEnabled=function(){return this.enabled_},s.MenuItem.prototype.setEnabled=function(n){this.enabled_=n},s.MenuItem.prototype.performAction=function(){this.isEnabled()&&this.actionHandler_&&this.actionHandler_(this)},s.MenuItem.prototype.onAction=function(n,l){this.actionHandler_=n.bind(l)},s.ContextMenu={},s.ContextMenu.currentBlock=null,s.ContextMenu.menu_=null,s.ContextMenu.show=function(n,l,u){if(s.WidgetDiv.show(s.ContextMenu,u,s.ContextMenu.dispose),l.length){var h=s.ContextMenu.populate_(l,u);s.ContextMenu.menu_=h,s.ContextMenu.position_(h,n,u),setTimeout(function(){h.focus()},1),s.ContextMenu.currentBlock=null}else s.ContextMenu.hide()},s.ContextMenu.populate_=function(n,l){var u=new s.Menu;u.setRole(s.utils.aria.Role.MENU);for(var _,h=0;_=n[h];h++){var b=new s.MenuItem(_.text);b.setRightToLeft(l),b.setRole(s.utils.aria.Role.MENUITEM),u.addChild(b),b.setEnabled(_.enabled),_.enabled&&b.onAction(function(R){s.ContextMenu.hide(),this.callback(this.scope)},_)}return u},s.ContextMenu.position_=function(n,l,u){var h=s.utils.getViewportBBox();l=new s.utils.Rect(l.clientY+h.top,l.clientY+h.top,l.clientX+h.left,l.clientX+h.left),s.ContextMenu.createWidget_(n);var _=n.getSize();u&&(l.left+=_.width,l.right+=_.width,h.left+=_.width,h.right+=_.width),s.WidgetDiv.positionWithAnchor(h,l,_,u),n.focus()},s.ContextMenu.createWidget_=function(n){n.render(s.WidgetDiv.DIV);var l=n.getElement();s.utils.dom.addClass(l,"blocklyContextMenu"),s.browserEvents.conditionalBind(l,"contextmenu",null,s.utils.noEvent),n.focus()},s.ContextMenu.hide=function(){s.WidgetDiv.hideIfOwner(s.ContextMenu),s.ContextMenu.currentBlock=null},s.ContextMenu.dispose=function(){s.ContextMenu.menu_&&(s.ContextMenu.menu_.dispose(),s.ContextMenu.menu_=null)},s.ContextMenu.callbackFactory=function(n,l){return function(){s.Events.disable();try{var u=s.Xml.domToBlock(l,n.workspace),h=n.getRelativeToSurfaceXY();h.x=n.RTL?h.x-s.SNAP_RADIUS:h.x+s.SNAP_RADIUS,h.y+=2*s.SNAP_RADIUS,u.moveBy(h.x,h.y)}finally{s.Events.enable()}s.Events.isEnabled()&&!u.isShadow()&&s.Events.fire(new(s.Events.get(s.Events.BLOCK_CREATE))(u)),u.select()}},s.ContextMenu.commentDeleteOption=function(n){return{text:s.Msg.REMOVE_COMMENT,enabled:!0,callback:function(){s.Events.setGroup(!0),n.dispose(!0,!0),s.Events.setGroup(!1)}}},s.ContextMenu.commentDuplicateOption=function(n){return{text:s.Msg.DUPLICATE_COMMENT,enabled:!0,callback:function(){s.duplicate(n)}}},s.ContextMenu.workspaceCommentOption=function(n,l){if(!s.WorkspaceCommentSvg)throw Error("Missing require for Blockly.WorkspaceCommentSvg");var u={enabled:!s.utils.userAgent.IE};return u.text=s.Msg.ADD_COMMENT,u.callback=function(){var h=new s.WorkspaceCommentSvg(n,s.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT,s.WorkspaceCommentSvg.DEFAULT_SIZE,s.WorkspaceCommentSvg.DEFAULT_SIZE),_=n.getInjectionDiv().getBoundingClientRect();_=new s.utils.Coordinate(l.clientX-_.left,l.clientY-_.top);var b=n.getOriginOffsetInPixels();(_=s.utils.Coordinate.difference(_,b)).scale(1/n.scale),h.moveBy(_.x,_.y),n.rendered&&(h.initSvg(),h.render(),h.select())},u},s.ContextMenuRegistry=function(){s.ContextMenuRegistry.registry=this,this.registry_=Object.create(null)},s.ContextMenuRegistry.ScopeType={BLOCK:"block",WORKSPACE:"workspace"},s.ContextMenuRegistry.registry=null,s.ContextMenuRegistry.prototype.register=function(n){if(this.registry_[n.id])throw Error('Menu item with ID "'+n.id+'" is already registered.');this.registry_[n.id]=n},s.ContextMenuRegistry.prototype.unregister=function(n){if(!this.registry_[n])throw Error('Menu item with ID "'+n+'" not found.');delete this.registry_[n]},s.ContextMenuRegistry.prototype.getItem=function(n){return this.registry_[n]||null},s.ContextMenuRegistry.prototype.getContextMenuOptions=function(n,l){var u=[],h=this.registry_;return Object.keys(h).forEach(function(_){if(n==(_=h[_]).scopeType){var b=_.preconditionFn(l);"hidden"!=b&&(_={text:"function"==typeof _.displayText?_.displayText(l):_.displayText,enabled:"enabled"==b,callback:_.callback,scope:l,weight:_.weight},u.push(_))}}),u.sort(function(_,b){return _.weight-b.weight}),u},new s.ContextMenuRegistry,s.Events.Selected=function(n,l,u){s.Events.Selected.superClass_.constructor.call(this,u),this.oldElementId=n,this.newElementId=l},s.utils.object.inherits(s.Events.Selected,s.Events.UiBase),s.Events.Selected.prototype.type=s.Events.SELECTED,s.Events.Selected.prototype.toJson=function(){var n=s.Events.Selected.superClass_.toJson.call(this);return n.oldElementId=this.oldElementId,n.newElementId=this.newElementId,n},s.Events.Selected.prototype.fromJson=function(n){s.Events.Selected.superClass_.fromJson.call(this,n),this.oldElementId=n.oldElementId,this.newElementId=n.newElementId},s.registry.register(s.registry.Type.EVENT,s.Events.SELECTED,s.Events.Selected),s.IBoundedElement=function(){},s.ICopyable=function(){},s.RenderedConnection=function(n,l){s.RenderedConnection.superClass_.constructor.call(this,n,l),this.db_=n.workspace.connectionDBList[l],this.dbOpposite_=n.workspace.connectionDBList[s.OPPOSITE_TYPE[l]],this.offsetInBlock_=new s.utils.Coordinate(0,0),this.trackedState_=s.RenderedConnection.TrackedState.WILL_TRACK,this.targetConnection=null},s.utils.object.inherits(s.RenderedConnection,s.Connection),s.RenderedConnection.TrackedState={WILL_TRACK:-1,UNTRACKED:0,TRACKED:1},s.RenderedConnection.prototype.dispose=function(){s.RenderedConnection.superClass_.dispose.call(this),this.trackedState_==s.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y)},s.RenderedConnection.prototype.getSourceBlock=function(){return s.RenderedConnection.superClass_.getSourceBlock.call(this)},s.RenderedConnection.prototype.targetBlock=function(){return s.RenderedConnection.superClass_.targetBlock.call(this)},s.RenderedConnection.prototype.distanceFrom=function(n){var l=this.x-n.x;return n=this.y-n.y,Math.sqrt(l*l+n*n)},s.RenderedConnection.prototype.bumpAwayFrom=function(n){if(!this.sourceBlock_.workspace.isDragging()){var l=this.sourceBlock_.getRootBlock();if(!l.isInFlyout){var u=!1;if(!l.isMovable()){if(!(l=n.getSourceBlock().getRootBlock()).isMovable())return;n=this,u=!0}var h=s.selected==l;h||l.addSelect();var _=n.x+s.SNAP_RADIUS+Math.floor(Math.random()*s.BUMP_RANDOMNESS)-this.x,b=n.y+s.SNAP_RADIUS+Math.floor(Math.random()*s.BUMP_RANDOMNESS)-this.y;u&&(b=-b),l.RTL&&(_=n.x-s.SNAP_RADIUS-Math.floor(Math.random()*s.BUMP_RANDOMNESS)-this.x),l.moveBy(_,b),h||l.removeSelect()}}},s.RenderedConnection.prototype.moveTo=function(n,l){this.trackedState_==s.RenderedConnection.TrackedState.WILL_TRACK?(this.db_.addConnection(this,l),this.trackedState_=s.RenderedConnection.TrackedState.TRACKED):this.trackedState_==s.RenderedConnection.TrackedState.TRACKED&&(this.db_.removeConnection(this,this.y),this.db_.addConnection(this,l)),this.x=n,this.y=l},s.RenderedConnection.prototype.moveBy=function(n,l){this.moveTo(this.x+n,this.y+l)},s.RenderedConnection.prototype.moveToOffset=function(n){this.moveTo(n.x+this.offsetInBlock_.x,n.y+this.offsetInBlock_.y)},s.RenderedConnection.prototype.setOffsetInBlock=function(n,l){this.offsetInBlock_.x=n,this.offsetInBlock_.y=l},s.RenderedConnection.prototype.getOffsetInBlock=function(){return this.offsetInBlock_},s.RenderedConnection.prototype.tighten=function(){var n=this.targetConnection.x-this.x,l=this.targetConnection.y-this.y;if(0!=n||0!=l){var u=this.targetBlock(),h=u.getSvgRoot();if(!h)throw Error("block is not rendered.");h=s.utils.getRelativeXY(h),u.getSvgRoot().setAttribute("transform","translate("+(h.x-n)+","+(h.y-l)+")"),u.moveConnections(-n,-l)}},s.RenderedConnection.prototype.closest=function(n,l){return this.dbOpposite_.searchForClosest(this,n,l)},s.RenderedConnection.prototype.highlight=function(){var n=this.sourceBlock_.workspace.getRenderer().getConstants(),l=n.shapeFor(this);l=this.type==s.connectionTypes.INPUT_VALUE||this.type==s.connectionTypes.OUTPUT_VALUE?s.utils.svgPaths.moveBy(0,-(n=n.TAB_OFFSET_FROM_TOP))+s.utils.svgPaths.lineOnAxis("v",n)+l.pathDown+s.utils.svgPaths.lineOnAxis("v",n):s.utils.svgPaths.moveBy(-(n=n.NOTCH_OFFSET_LEFT-n.CORNER_RADIUS),0)+s.utils.svgPaths.lineOnAxis("h",n)+l.pathLeft+s.utils.svgPaths.lineOnAxis("h",n),n=this.sourceBlock_.getRelativeToSurfaceXY(),s.Connection.highlightedPath_=s.utils.dom.createSvgElement(s.utils.Svg.PATH,{class:"blocklyHighlightedConnectionPath",d:l,transform:"translate("+(this.x-n.x)+","+(this.y-n.y)+")"+(this.sourceBlock_.RTL?" scale(-1 1)":"")},this.sourceBlock_.getSvgRoot())},s.RenderedConnection.prototype.unhighlight=function(){s.utils.dom.removeNode(s.Connection.highlightedPath_),delete s.Connection.highlightedPath_},s.RenderedConnection.prototype.setTracking=function(n){n&&this.trackedState_==s.RenderedConnection.TrackedState.TRACKED||!n&&this.trackedState_==s.RenderedConnection.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(n?(this.db_.addConnection(this,this.y),this.trackedState_=s.RenderedConnection.TrackedState.TRACKED):(this.trackedState_==s.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y),this.trackedState_=s.RenderedConnection.TrackedState.UNTRACKED))},s.RenderedConnection.prototype.stopTrackingAll=function(){if(this.setTracking(!1),this.targetConnection)for(var n=this.targetBlock().getDescendants(!1),l=0;l<n.length;l++){for(var u=n[l],h=u.getConnections_(!0),_=0;_<h.length;_++)h[_].setTracking(!1);for(u=u.getIcons(),_=0;_<u.length;_++)u[_].setVisible(!1)}},s.RenderedConnection.prototype.startTrackingAll=function(){this.setTracking(!0);var n=[];if(this.type!=s.connectionTypes.INPUT_VALUE&&this.type!=s.connectionTypes.NEXT_STATEMENT)return n;var l=this.targetBlock();if(l){if(l.isCollapsed()){var u=[];l.outputConnection&&u.push(l.outputConnection),l.nextConnection&&u.push(l.nextConnection),l.previousConnection&&u.push(l.previousConnection)}else u=l.getConnections_(!0);for(var h=0;h<u.length;h++)n.push.apply(n,u[h].startTrackingAll());n.length||(n[0]=l)}return n},s.RenderedConnection.prototype.isConnectionAllowed=function(n,l){return s.utils.deprecation.warn("RenderedConnection.prototype.isConnectionAllowed","July 2020","July 2021","Blockly.Workspace.prototype.getConnectionChecker().canConnect"),!(this.distanceFrom(n)>l)&&s.RenderedConnection.superClass_.isConnectionAllowed.call(this,n)},s.RenderedConnection.prototype.onFailedConnect=function(n){var l=this.getSourceBlock();if(s.Events.recordUndo){var u=s.Events.getGroup();setTimeout(function(){l.isDisposed()||l.getParent()||(s.Events.setGroup(u),this.bumpAwayFrom(n),s.Events.setGroup(!1))}.bind(this),s.BUMP_DELAY)}},s.RenderedConnection.prototype.disconnectInternal_=function(n,l){s.RenderedConnection.superClass_.disconnectInternal_.call(this,n,l),n.rendered&&n.render(),l.rendered&&(l.updateDisabled(),l.render(),l.getSvgRoot().style.display="block")},s.RenderedConnection.prototype.respawnShadow_=function(){s.RenderedConnection.superClass_.respawnShadow_.call(this);var n=this.targetBlock();n&&(n.initSvg(),n.render(!1),(n=this.getSourceBlock()).rendered&&n.render())},s.RenderedConnection.prototype.neighbours=function(n){return this.dbOpposite_.getNeighbours(this,n)},s.RenderedConnection.prototype.connect_=function(n){s.RenderedConnection.superClass_.connect_.call(this,n);var l=this.getSourceBlock();n=n.getSourceBlock();var u=l.rendered,h=n.rendered;u&&l.updateDisabled(),h&&n.updateDisabled(),u&&h&&(this.type==s.connectionTypes.NEXT_STATEMENT||this.type==s.connectionTypes.PREVIOUS_STATEMENT?n.render():l.render()),(l=l.getInputWithBlock(n))&&(l=l.isVisible(),n.getSvgRoot().style.display=l?"block":"none")},s.RenderedConnection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||((this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug(),this.sourceBlock_.bumpNeighbours())},s.BasicCursor=function(){s.BasicCursor.superClass_.constructor.call(this)},s.utils.object.inherits(s.BasicCursor,s.Cursor),s.BasicCursor.registrationName="basicCursor",s.BasicCursor.prototype.next=function(){var n=this.getCurNode();return n?((n=this.getNextNode_(n,this.validNode_))&&this.setCurNode(n),n):null},s.BasicCursor.prototype.in=function(){return this.next()},s.BasicCursor.prototype.prev=function(){var n=this.getCurNode();return n?((n=this.getPreviousNode_(n,this.validNode_))&&this.setCurNode(n),n):null},s.BasicCursor.prototype.out=function(){return this.prev()},s.BasicCursor.prototype.getNextNode_=function(n,l){if(!n)return null;var u=n.in()||n.next();return l(u)?u:u?this.getNextNode_(u,l):l(n=this.findSiblingOrParent_(n.out()))?n:n?this.getNextNode_(n,l):null},s.BasicCursor.prototype.getPreviousNode_=function(n,l){if(!n)return null;var u=n.prev();return l(u=u?this.getRightMostChild_(u):n.out())?u:u?this.getPreviousNode_(u,l):null},s.BasicCursor.prototype.validNode_=function(n){var l=!1;return((n=n&&n.getType())==s.ASTNode.types.OUTPUT||n==s.ASTNode.types.INPUT||n==s.ASTNode.types.FIELD||n==s.ASTNode.types.NEXT||n==s.ASTNode.types.PREVIOUS||n==s.ASTNode.types.WORKSPACE)&&(l=!0),l},s.BasicCursor.prototype.findSiblingOrParent_=function(n){return n?n.next()||this.findSiblingOrParent_(n.out()):null},s.BasicCursor.prototype.getRightMostChild_=function(n){if(!n.in())return n;for(n=n.in();n.next();)n=n.next();return this.getRightMostChild_(n)},s.registry.register(s.registry.Type.CURSOR,s.BasicCursor.registrationName,s.BasicCursor),s.TabNavigateCursor=function(){s.TabNavigateCursor.superClass_.constructor.call(this)},s.utils.object.inherits(s.TabNavigateCursor,s.BasicCursor),s.TabNavigateCursor.prototype.validNode_=function(n){var l=!1,u=n&&n.getType();return n&&(n=n.getLocation(),u==s.ASTNode.types.FIELD&&n&&n.isTabNavigable()&&n.isClickable()&&(l=!0)),l},s.BlockSvg=function(n,l,u){this.svgGroup_=s.utils.dom.createSvgElement(s.utils.Svg.G,{},null),this.svgGroup_.translate_="",this.style=n.getRenderer().getConstants().getBlockStyle(null),this.pathObject=n.getRenderer().makePathObject(this.svgGroup_,this.style),this.renderIsInProgress_=this.rendered=!1,this.workspace=n,this.previousConnection=this.nextConnection=this.outputConnection=null,this.useDragSurface_=s.utils.is3dSupported()&&!!n.getBlockDragSurface();var h=this.pathObject.svgPath;h.tooltip=this,s.Tooltip.bindMouseEvents(h),s.BlockSvg.superClass_.constructor.call(this,n,l,u),this.svgGroup_.dataset?this.svgGroup_.dataset.id=this.id:s.utils.userAgent.IE&&this.svgGroup_.setAttribute("data-id",this.id)},s.utils.object.inherits(s.BlockSvg,s.Block),s.BlockSvg.prototype.height=0,s.BlockSvg.prototype.width=0,s.BlockSvg.prototype.warningTextDb_=null,s.BlockSvg.INLINE=-1,s.BlockSvg.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_",s.BlockSvg.prototype.initSvg=function(){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");for(var l,n=0;l=this.inputList[n];n++)l.init();for(l=this.getIcons(),n=0;n<l.length;n++)l[n].createIcon();this.applyColour(),this.pathObject.updateMovable(this.isMovable()),n=this.getSvgRoot(),this.workspace.options.readOnly||this.eventsInit_||!n||s.browserEvents.conditionalBind(n,"mousedown",this,this.onMouseDown_),this.eventsInit_=!0,n.parentNode||this.workspace.getCanvas().appendChild(n)},s.BlockSvg.prototype.getColourSecondary=function(){return this.style.colourSecondary},s.BlockSvg.prototype.getColourTertiary=function(){return this.style.colourTertiary},s.BlockSvg.prototype.getColourShadow=function(){return s.utils.deprecation.warn("BlockSvg.prototype.getColourShadow","January 2020","January 2021","style.colourSecondary"),this.getColourSecondary()},s.BlockSvg.prototype.getColourBorder=function(){return s.utils.deprecation.warn("BlockSvg.prototype.getColourBorder","January 2020","January 2021","style.colourTertiary"),{colourBorder:this.getColourTertiary(),colourLight:null,colourDark:null}},s.BlockSvg.prototype.select=function(){if(this.isShadow()&&this.getParent())this.getParent().select();else if(s.selected!=this){var n=null;if(s.selected){n=s.selected.id,s.Events.disable();try{s.selected.unselect()}finally{s.Events.enable()}}n=new(s.Events.get(s.Events.SELECTED))(n,this.id,this.workspace.id),s.Events.fire(n),s.selected=this,this.addSelect()}},s.BlockSvg.prototype.unselect=function(){if(s.selected==this){var n=new(s.Events.get(s.Events.SELECTED))(this.id,null,this.workspace.id);n.workspaceId=this.workspace.id,s.Events.fire(n),s.selected=null,this.removeSelect()}},s.BlockSvg.prototype.mutator=null,s.BlockSvg.prototype.comment=null,s.BlockSvg.prototype.commentIcon_=null,s.BlockSvg.prototype.warning=null,s.BlockSvg.prototype.getIcons=function(){var n=[];return this.mutator&&n.push(this.mutator),this.commentIcon_&&n.push(this.commentIcon_),this.warning&&n.push(this.warning),n},s.BlockSvg.prototype.setParent=function(n){var l=this.parentBlock_;if(n!=l){s.utils.dom.startTextWidthCache(),s.BlockSvg.superClass_.setParent.call(this,n),s.utils.dom.stopTextWidthCache();var u=this.getSvgRoot();if(!this.workspace.isClearing&&u){var h=this.getRelativeToSurfaceXY();n?(n.getSvgRoot().appendChild(u),n=this.getRelativeToSurfaceXY(),this.moveConnections(n.x-h.x,n.y-h.y)):l&&(this.workspace.getCanvas().appendChild(u),this.translate(h.x,h.y)),this.applyColour()}}},s.BlockSvg.prototype.getRelativeToSurfaceXY=function(){var n=0,l=0,u=this.useDragSurface_?this.workspace.getBlockDragSurface().getGroup():null,h=this.getSvgRoot();if(h)do{var _=s.utils.getRelativeXY(h);n+=_.x,l+=_.y,this.useDragSurface_&&this.workspace.getBlockDragSurface().getCurrentBlock()==h&&(n+=(_=this.workspace.getBlockDragSurface().getSurfaceTranslation()).x,l+=_.y),h=h.parentNode}while(h&&h!=this.workspace.getCanvas()&&h!=u);return new s.utils.Coordinate(n,l)},s.BlockSvg.prototype.moveBy=function(n,l){if(this.parentBlock_)throw Error("Block has parent.");var u=s.Events.isEnabled();if(u)var h=new(s.Events.get(s.Events.BLOCK_MOVE))(this);var _=this.getRelativeToSurfaceXY();this.translate(_.x+n,_.y+l),this.moveConnections(n,l),u&&(h.recordNew(),s.Events.fire(h)),this.workspace.resizeContents()},s.BlockSvg.prototype.translate=function(n,l){this.getSvgRoot().setAttribute("transform","translate("+n+","+l+")")},s.BlockSvg.prototype.moveToDragSurface=function(){if(this.useDragSurface_){var n=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.getBlockDragSurface().translateSurface(n.x,n.y),(n=this.getSvgRoot())&&this.workspace.getBlockDragSurface().setBlocksAndShow(n)}},s.BlockSvg.prototype.moveTo=function(n){var l=this.getRelativeToSurfaceXY();this.moveBy(n.x-l.x,n.y-l.y)},s.BlockSvg.prototype.moveOffDragSurface=function(n){this.useDragSurface_&&(this.translate(n.x,n.y),this.workspace.getBlockDragSurface().clearAndHide(this.workspace.getCanvas()))},s.BlockSvg.prototype.moveDuringDrag=function(n){this.useDragSurface_?this.workspace.getBlockDragSurface().translateSurface(n.x,n.y):(this.svgGroup_.translate_="translate("+n.x+","+n.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))},s.BlockSvg.prototype.clearTransformAttributes_=function(){this.getSvgRoot().removeAttribute("transform")},s.BlockSvg.prototype.snapToGrid=function(){if(this.workspace&&!this.workspace.isDragging()&&!this.getParent()&&!this.isInFlyout){var n=this.workspace.getGrid();if(n&&n.shouldSnap()){var l=n.getSpacing(),u=l/2,h=this.getRelativeToSurfaceXY();n=Math.round((h.x-u)/l)*l+u-h.x,l=Math.round((h.y-u)/l)*l+u-h.y,n=Math.round(n),l=Math.round(l),0==n&&0==l||this.moveBy(n,l)}}},s.BlockSvg.prototype.getBoundingRectangle=function(){var n=this.getRelativeToSurfaceXY(),l=this.getHeightWidth();if(this.RTL)var u=n.x-l.width,h=n.x;else u=n.x,h=n.x+l.width;return new s.utils.Rect(n.y,n.y+l.height,u,h)},s.BlockSvg.prototype.markDirty=function(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(var l,n=0;l=this.inputList[n];n++)l.markDirty()},s.BlockSvg.prototype.setCollapsed=function(n){this.collapsed_!=n&&(s.BlockSvg.superClass_.setCollapsed.call(this,n),n?this.rendered&&this.render():this.updateCollapsed_())},s.BlockSvg.prototype.updateCollapsed_=function(){for(var _,n=this.isCollapsed(),l=s.constants.COLLAPSED_INPUT_NAME,u=s.constants.COLLAPSED_FIELD_NAME,h=0;_=this.inputList[h];h++)_.name!=l&&_.setVisible(!n);if(n){for(_=this.getIcons(),h=0;n=_[h];h++)n.setVisible(!1);h=this.toString(s.COLLAPSE_CHARS),(_=this.getField(u))?_.setValue(h):(_=this.getInput(l)||this.appendDummyInput(l)).appendField(new s.FieldLabel(h),u)}else this.updateDisabled(),this.removeInput(l)},s.BlockSvg.prototype.tab=function(n,l){var u=new s.TabNavigateCursor;u.setCurNode(s.ASTNode.createFieldNode(n)),n=u.getCurNode(),l?u.next():u.prev(),(l=u.getCurNode())&&l!==n&&(l.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(l))},s.BlockSvg.prototype.onMouseDown_=function(n){var l=this.workspace&&this.workspace.getGesture(n);l&&l.handleBlockStart(n,this)},s.BlockSvg.prototype.showHelp=function(){var n="function"==typeof this.helpUrl?this.helpUrl():this.helpUrl;n&&window.open(n)},s.BlockSvg.prototype.generateContextMenu=function(){if(this.workspace.options.readOnly||!this.contextMenu)return null;var n=s.ContextMenuRegistry.registry.getContextMenuOptions(s.ContextMenuRegistry.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(n),n},s.BlockSvg.prototype.showContextMenu=function(n){var l=this.generateContextMenu();l&&l.length&&(s.ContextMenu.show(n,l,this.RTL),s.ContextMenu.currentBlock=this)},s.BlockSvg.prototype.moveConnections=function(n,l){if(this.rendered){for(var u=this.getConnections_(!1),h=0;h<u.length;h++)u[h].moveBy(n,l);for(u=this.getIcons(),h=0;h<u.length;h++)u[h].computeIconLocation();for(h=0;h<this.childBlocks_.length;h++)this.childBlocks_[h].moveConnections(n,l)}},s.BlockSvg.prototype.setDragging=function(n){if(n){var l=this.getSvgRoot();l.translate_="",l.skew_="",s.draggingConnections=s.draggingConnections.concat(this.getConnections_(!0)),s.utils.dom.addClass(this.svgGroup_,"blocklyDragging")}else s.draggingConnections=[],s.utils.dom.removeClass(this.svgGroup_,"blocklyDragging");for(l=0;l<this.childBlocks_.length;l++)this.childBlocks_[l].setDragging(n)},s.BlockSvg.prototype.setMovable=function(n){s.BlockSvg.superClass_.setMovable.call(this,n),this.pathObject.updateMovable(n)},s.BlockSvg.prototype.setEditable=function(n){s.BlockSvg.superClass_.setEditable.call(this,n),n=this.getIcons();for(var l=0;l<n.length;l++)n[l].updateEditable()},s.BlockSvg.prototype.setShadow=function(n){s.BlockSvg.superClass_.setShadow.call(this,n),this.applyColour()},s.BlockSvg.prototype.setInsertionMarker=function(n){this.isInsertionMarker_!=n&&(this.isInsertionMarker_=n)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))},s.BlockSvg.prototype.getSvgRoot=function(){return this.svgGroup_},s.BlockSvg.prototype.dispose=function(n,l){if(this.workspace){s.Tooltip.dispose(),s.Tooltip.unbindMouseEvents(this.pathObject.svgPath),s.utils.dom.startTextWidthCache();var u=this.workspace;if(s.selected==this&&(this.unselect(),this.workspace.cancelCurrentGesture()),s.ContextMenu.currentBlock==this&&s.ContextMenu.hide(),l&&this.rendered&&(this.unplug(n),s.blockAnimations.disposeUiEffect(this)),this.rendered=!1,this.warningTextDb_){for(var h in this.warningTextDb_)clearTimeout(this.warningTextDb_[h]);this.warningTextDb_=null}for(l=this.getIcons(),h=0;h<l.length;h++)l[h].dispose();s.BlockSvg.superClass_.dispose.call(this,!!n),s.utils.dom.removeNode(this.svgGroup_),u.resizeContents(),this.svgGroup_=null,s.utils.dom.stopTextWidthCache()}},s.BlockSvg.prototype.toCopyData=function(){if(this.isInsertionMarker_)return null;var n=s.Xml.blockToDom(this,!0);s.Xml.deleteNext(n);var l=this.getRelativeToSurfaceXY();return n.setAttribute("x",this.RTL?-l.x:l.x),n.setAttribute("y",l.y),{xml:n,source:this.workspace,typeCounts:s.utils.getBlockTypeCounts(this,!0)}},s.BlockSvg.prototype.applyColour=function(){this.pathObject.applyColour(this);for(var n=this.getIcons(),l=0;l<n.length;l++)n[l].applyColour();for(n=0;l=this.inputList[n];n++)for(var h,u=0;h=l.fieldRow[u];u++)h.applyColour()},s.BlockSvg.prototype.updateDisabled=function(){var n=this.getChildren(!1);if(this.applyColour(),!this.isCollapsed())for(var u,l=0;u=n[l];l++)u.rendered&&u.updateDisabled()},s.BlockSvg.prototype.getCommentIcon=function(){return this.commentIcon_},s.BlockSvg.prototype.setCommentText=function(n){if(!s.Comment)throw Error("Missing require for Blockly.Comment");this.commentModel.text!=n&&(s.BlockSvg.superClass_.setCommentText.call(this,n),!!this.commentIcon_==(n=null!=n)?this.commentIcon_.updateText():(n?this.comment=this.commentIcon_=new s.Comment(this):(this.commentIcon_.dispose(),this.comment=this.commentIcon_=null),this.rendered&&(this.render(),this.bumpNeighbours())))},s.BlockSvg.prototype.setWarningText=function(n,l){if(!s.Warning)throw Error("Missing require for Blockly.Warning");this.warningTextDb_||(this.warningTextDb_=Object.create(null));var u=l||"";if(u)this.warningTextDb_[u]&&(clearTimeout(this.warningTextDb_[u]),delete this.warningTextDb_[u]);else for(var h in this.warningTextDb_)clearTimeout(this.warningTextDb_[h]),delete this.warningTextDb_[h];if(this.workspace.isDragging()){var _=this;this.warningTextDb_[u]=setTimeout(function(){_.workspace&&(delete _.warningTextDb_[u],_.setWarningText(n,u))},100)}else{if(this.isInFlyout&&(n=null),l=!1,"string"==typeof n){h=this.getSurroundParent();for(var b=null;h;)h.isCollapsed()&&(b=h),h=h.getSurroundParent();b&&b.setWarningText(s.Msg.COLLAPSED_WARNINGS_WARNING,s.BlockSvg.COLLAPSED_WARNING_ID),this.warning||(this.warning=new s.Warning(this),l=!0),this.warning.setText(n,u)}else this.warning&&!u?(this.warning.dispose(),l=!0):this.warning&&(l=this.warning.getText(),this.warning.setText("",u),(h=this.warning.getText())||this.warning.dispose(),l=l!=h);l&&this.rendered&&(this.render(),this.bumpNeighbours())}},s.BlockSvg.prototype.setMutator=function(n){this.mutator&&this.mutator!==n&&this.mutator.dispose(),n&&(n.setBlock(this),this.mutator=n,n.createIcon()),this.rendered&&(this.render(),this.bumpNeighbours())},s.BlockSvg.prototype.setEnabled=function(n){this.isEnabled()!=n&&(s.BlockSvg.superClass_.setEnabled.call(this,n),this.rendered&&!this.getInheritedDisabled()&&this.updateDisabled())},s.BlockSvg.prototype.setHighlighted=function(n){this.rendered&&this.pathObject.updateHighlighted(n)},s.BlockSvg.prototype.addSelect=function(){this.pathObject.updateSelected(!0)},s.BlockSvg.prototype.removeSelect=function(){this.pathObject.updateSelected(!1)},s.BlockSvg.prototype.setDeleteStyle=function(n){this.pathObject.updateDraggingDelete(n)},s.BlockSvg.prototype.getColour=function(){return this.style.colourPrimary},s.BlockSvg.prototype.setColour=function(n){s.BlockSvg.superClass_.setColour.call(this,n),n=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(n.style),this.style=n.style,this.styleName_=n.name,this.applyColour()},s.BlockSvg.prototype.setStyle=function(n){var l=this.workspace.getRenderer().getConstants().getBlockStyle(n);if(this.styleName_=n,!l)throw Error("Invalid style name: "+n);this.hat=l.hat,this.pathObject.setStyle(l),this.colour_=l.colourPrimary,this.style=l,this.applyColour()},s.BlockSvg.prototype.bringToFront=function(){var n=this;do{var l=n.getSvgRoot(),u=l.parentNode,h=u.childNodes;h[h.length-1]!==l&&u.appendChild(l),n=n.getParent()}while(n)},s.BlockSvg.prototype.setPreviousStatement=function(n,l){s.BlockSvg.superClass_.setPreviousStatement.call(this,n,l),this.rendered&&(this.render(),this.bumpNeighbours())},s.BlockSvg.prototype.setNextStatement=function(n,l){s.BlockSvg.superClass_.setNextStatement.call(this,n,l),this.rendered&&(this.render(),this.bumpNeighbours())},s.BlockSvg.prototype.setOutput=function(n,l){s.BlockSvg.superClass_.setOutput.call(this,n,l),this.rendered&&(this.render(),this.bumpNeighbours())},s.BlockSvg.prototype.setInputsInline=function(n){s.BlockSvg.superClass_.setInputsInline.call(this,n),this.rendered&&(this.render(),this.bumpNeighbours())},s.BlockSvg.prototype.removeInput=function(n,l){return n=s.BlockSvg.superClass_.removeInput.call(this,n,l),this.rendered&&(this.render(),this.bumpNeighbours()),n},s.BlockSvg.prototype.moveNumberedInputBefore=function(n,l){s.BlockSvg.superClass_.moveNumberedInputBefore.call(this,n,l),this.rendered&&(this.render(),this.bumpNeighbours())},s.BlockSvg.prototype.appendInput_=function(n,l){return n=s.BlockSvg.superClass_.appendInput_.call(this,n,l),this.rendered&&(this.render(),this.bumpNeighbours()),n},s.BlockSvg.prototype.setConnectionTracking=function(n){if(this.previousConnection&&this.previousConnection.setTracking(n),this.outputConnection&&this.outputConnection.setTracking(n),this.nextConnection){this.nextConnection.setTracking(n);var l=this.nextConnection.targetBlock();l&&l.setConnectionTracking(n)}if(!this.collapsed_)for(l=0;l<this.inputList.length;l++){var u=this.inputList[l].connection;u&&(u.setTracking(n),(u=u.targetBlock())&&u.setConnectionTracking(n))}},s.BlockSvg.prototype.getConnections_=function(n){var l=[];if((n||this.rendered)&&(this.outputConnection&&l.push(this.outputConnection),this.previousConnection&&l.push(this.previousConnection),this.nextConnection&&l.push(this.nextConnection),n||!this.collapsed_)){n=0;for(var u;u=this.inputList[n];n++)u.connection&&l.push(u.connection)}return l},s.BlockSvg.prototype.lastConnectionInStack=function(n){return s.BlockSvg.superClass_.lastConnectionInStack.call(this,n)},s.BlockSvg.prototype.getMatchingConnection=function(n,l){return s.BlockSvg.superClass_.getMatchingConnection.call(this,n,l)},s.BlockSvg.prototype.makeConnection_=function(n){return new s.RenderedConnection(this,n)},s.BlockSvg.prototype.bumpNeighbours=function(){if(this.workspace&&!this.workspace.isDragging()){var n=this.getRootBlock();if(!n.isInFlyout)for(var h,l=this.getConnections_(!1),u=0;h=l[u];u++){h.isConnected()&&h.isSuperior()&&h.targetBlock().bumpNeighbours();for(var R,_=h.neighbours(s.SNAP_RADIUS),b=0;R=_[b];b++)h.isConnected()&&R.isConnected()||R.getSourceBlock().getRootBlock()!=n&&(h.isSuperior()?R.bumpAwayFrom(h):h.bumpAwayFrom(R))}}},s.BlockSvg.prototype.scheduleSnapAndBump=function(){var n=this,l=s.Events.getGroup();setTimeout(function(){s.Events.setGroup(l),n.snapToGrid(),s.Events.setGroup(!1)},s.BUMP_DELAY/2),setTimeout(function(){s.Events.setGroup(l),n.bumpNeighbours(),s.Events.setGroup(!1)},s.BUMP_DELAY)},s.BlockSvg.prototype.positionNearConnection=function(n,l){n.type!=s.connectionTypes.NEXT_STATEMENT&&n.type!=s.connectionTypes.INPUT_VALUE||this.moveBy(l.x-n.x,l.y-n.y)},s.BlockSvg.prototype.getParent=function(){return s.BlockSvg.superClass_.getParent.call(this)},s.BlockSvg.prototype.getRootBlock=function(){return s.BlockSvg.superClass_.getRootBlock.call(this)},s.BlockSvg.prototype.render=function(n){if(!this.renderIsInProgress_){this.renderIsInProgress_=!0;try{if(this.rendered=!0,s.utils.dom.startTextWidthCache(),this.isCollapsed()&&this.updateCollapsed_(),this.workspace.getRenderer().render(this),this.updateConnectionLocations_(),!1!==n){var l=this.getParent();l?l.render(!0):this.workspace.resizeContents()}s.utils.dom.stopTextWidthCache(),this.updateMarkers_()}finally{this.renderIsInProgress_=!1}}},s.BlockSvg.prototype.updateMarkers_=function(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(s.MarkerManager.LOCAL_MARKER).draw()},s.BlockSvg.prototype.updateConnectionLocations_=function(){var n=this.getRelativeToSurfaceXY();this.previousConnection&&this.previousConnection.moveToOffset(n),this.outputConnection&&this.outputConnection.moveToOffset(n);for(var l=0;l<this.inputList.length;l++){var u=this.inputList[l].connection;u&&(u.moveToOffset(n),u.isConnected()&&u.tighten())}this.nextConnection&&(this.nextConnection.moveToOffset(n),this.nextConnection.isConnected()&&this.nextConnection.tighten())},s.BlockSvg.prototype.setCursorSvg=function(n){this.pathObject.setCursorSvg(n)},s.BlockSvg.prototype.setMarkerSvg=function(n){this.pathObject.setMarkerSvg(n)},s.BlockSvg.prototype.getHeightWidth=function(){var n=this.height,l=this.width,u=this.getNextBlock();if(u){u=u.getHeightWidth();var h=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;n+=u.height-h,l=Math.max(l,u.width)}return{height:n,width:l}},s.BlockSvg.prototype.fadeForReplacement=function(n){this.pathObject.updateReplacementFade(n)},s.BlockSvg.prototype.highlightShapeForInput=function(n,l){this.pathObject.updateShapeForInputHighlight(n,l)},s.ConnectionDB=function(n){this.connections_=[],this.connectionChecker_=n},s.ConnectionDB.prototype.addConnection=function(n,l){l=this.calculateIndexForYPos_(l),this.connections_.splice(l,0,n)},s.ConnectionDB.prototype.findIndexOfConnection_=function(n,l){if(!this.connections_.length)return-1;var u=this.calculateIndexForYPos_(l);if(u>=this.connections_.length)return-1;l=n.y;for(var h=u;0<=h&&this.connections_[h].y==l;){if(this.connections_[h]==n)return h;h--}for(h=u;h<this.connections_.length&&this.connections_[h].y==l;){if(this.connections_[h]==n)return h;h++}return-1},s.ConnectionDB.prototype.calculateIndexForYPos_=function(n){if(!this.connections_.length)return 0;for(var l=0,u=this.connections_.length;l<u;){var h=Math.floor((l+u)/2);if(this.connections_[h].y<n)l=h+1;else{if(!(this.connections_[h].y>n)){l=h;break}u=h}}return l},s.ConnectionDB.prototype.removeConnection=function(n,l){if(-1==(n=this.findIndexOfConnection_(n,l)))throw Error("Unable to find connection in connectionDB.");this.connections_.splice(n,1)},s.ConnectionDB.prototype.getNeighbours=function(n,l){function u(W){var G=_-h[W].x,Z=b-h[W].y;return Math.sqrt(G*G+Z*Z)<=l&&H.push(h[W]),Z<l}var h=this.connections_,_=n.x,b=n.y;n=0;for(var R=h.length-2,O=R;n<O;)h[O].y<b?n=O:R=O,O=Math.floor((n+R)/2);var H=[];if(R=n=O,h.length){for(;0<=n&&u(n);)n--;do{R++}while(R<h.length&&u(R))}return H},s.ConnectionDB.prototype.isInYRange_=function(n,l,u){return Math.abs(this.connections_[n].y-l)<=u},s.ConnectionDB.prototype.searchForClosest=function(n,l,u){if(!this.connections_.length)return{connection:null,radius:l};var h=n.y,_=n.x;n.x=_+u.x,n.y=h+u.y;var b=this.calculateIndexForYPos_(n.y);u=null;for(var O,R=l,H=b-1;0<=H&&this.isInYRange_(H,n.y,l);)this.connectionChecker_.canConnect(n,O=this.connections_[H],!0,R)&&(u=O,R=O.distanceFrom(n)),H--;for(;b<this.connections_.length&&this.isInYRange_(b,n.y,l);)this.connectionChecker_.canConnect(n,O=this.connections_[b],!0,R)&&(u=O,R=O.distanceFrom(n)),b++;return n.x=_,n.y=h,{connection:u,radius:R}},s.ConnectionDB.init=function(n){var l=[];return l[s.connectionTypes.INPUT_VALUE]=new s.ConnectionDB(n),l[s.connectionTypes.OUTPUT_VALUE]=new s.ConnectionDB(n),l[s.connectionTypes.NEXT_STATEMENT]=new s.ConnectionDB(n),l[s.connectionTypes.PREVIOUS_STATEMENT]=new s.ConnectionDB(n),l},s.Events.ThemeChange=function(n,l){s.Events.ThemeChange.superClass_.constructor.call(this,l),this.themeName=n},s.utils.object.inherits(s.Events.ThemeChange,s.Events.UiBase),s.Events.ThemeChange.prototype.type=s.Events.THEME_CHANGE,s.Events.ThemeChange.prototype.toJson=function(){var n=s.Events.ThemeChange.superClass_.toJson.call(this);return n.themeName=this.themeName,n},s.Events.ThemeChange.prototype.fromJson=function(n){s.Events.ThemeChange.superClass_.fromJson.call(this,n),this.themeName=n.themeName},s.registry.register(s.registry.Type.EVENT,s.Events.THEME_CHANGE,s.Events.ThemeChange),s.Events.ViewportChange=function(n,l,u,h,_){s.Events.ViewportChange.superClass_.constructor.call(this,h),this.viewTop=n,this.viewLeft=l,this.scale=u,this.oldScale=_},s.utils.object.inherits(s.Events.ViewportChange,s.Events.UiBase),s.Events.ViewportChange.prototype.type=s.Events.VIEWPORT_CHANGE,s.Events.ViewportChange.prototype.toJson=function(){var n=s.Events.ViewportChange.superClass_.toJson.call(this);return n.viewTop=this.viewTop,n.viewLeft=this.viewLeft,n.scale=this.scale,n.oldScale=this.oldScale,n},s.Events.ViewportChange.prototype.fromJson=function(n){s.Events.ViewportChange.superClass_.fromJson.call(this,n),this.viewTop=n.viewTop,this.viewLeft=n.viewLeft,this.scale=n.scale,this.oldScale=n.oldScale},s.registry.register(s.registry.Type.EVENT,s.Events.VIEWPORT_CHANGE,s.Events.ViewportChange),s.IMetricsManager=function(){},s.MetricsManager=function(n){this.workspace_=n},s.MetricsManager.prototype.getDimensionsPx_=function(n){var l=0,u=0;return n&&(l=n.getWidth(),u=n.getHeight()),new s.utils.Size(l,u)},s.MetricsManager.prototype.getFlyoutMetrics=function(n){return{width:(n=this.getDimensionsPx_(this.workspace_.getFlyout(n))).width,height:n.height,position:this.workspace_.toolboxPosition}},s.MetricsManager.prototype.getToolboxMetrics=function(){var n=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:n.width,height:n.height,position:this.workspace_.toolboxPosition}},s.MetricsManager.prototype.getSvgMetrics=function(){return this.workspace_.getCachedParentSvgSize()},s.MetricsManager.prototype.getAbsoluteMetrics=function(){var n=0,l=this.getToolboxMetrics(),u=this.getFlyoutMetrics(!0),h=!!this.workspace_.getToolbox(),_=!!this.workspace_.getFlyout(!0),b=h?l.position:u.position,R=b==s.utils.toolbox.Position.LEFT;return b=b==s.utils.toolbox.Position.TOP,h&&R?n=l.width:_&&R&&(n=u.width),R=0,h&&b?R=l.height:_&&b&&(R=u.height),{top:R,left:n}},s.MetricsManager.prototype.getViewMetrics=function(n){n=n?this.workspace_.scale:1;var l=this.getSvgMetrics(),u=this.getToolboxMetrics(),h=this.getFlyoutMetrics(!0),_=this.workspace_.getToolbox()?u.position:h.position;return this.workspace_.getToolbox()?_==s.utils.toolbox.Position.TOP||_==s.utils.toolbox.Position.BOTTOM?l.height-=u.height:(_==s.utils.toolbox.Position.LEFT||_==s.utils.toolbox.Position.RIGHT)&&(l.width-=u.width):this.workspace_.getFlyout(!0)&&(_==s.utils.toolbox.Position.TOP||_==s.utils.toolbox.Position.BOTTOM?l.height-=h.height:(_==s.utils.toolbox.Position.LEFT||_==s.utils.toolbox.Position.RIGHT)&&(l.width-=h.width)),{height:l.height/n,width:l.width/n,top:-this.workspace_.scrollY/n,left:-this.workspace_.scrollX/n}},s.MetricsManager.prototype.getContentMetrics=function(n){n=n?1:this.workspace_.scale;var l=this.workspace_.getBlocksBoundingBox();return{height:(l.bottom-l.top)*n,width:(l.right-l.left)*n,top:l.top*n,left:l.left*n}},s.MetricsManager.prototype.hasFixedEdges=function(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()},s.MetricsManager.prototype.getComputedFixedEdges_=function(n){if(!this.hasFixedEdges())return{};var l=this.workspace_.isMovableHorizontally(),u=this.workspace_.isMovableVertically();n=n||this.getViewMetrics(!1);var h={};return u||(h.top=n.top,h.bottom=n.top+n.height),l||(h.left=n.left,h.right=n.left+n.width),h},s.MetricsManager.prototype.getPaddedContent_=function(n,l){var u=l.top+l.height,h=l.left+l.width,_=n.width,b=_/2,R=(n=n.height)/2;return{top:Math.min(l.top-R,u-n),bottom:Math.max(u+R,l.top+n),left:Math.min(l.left-b,h-_),right:Math.max(h+b,l.left+_)}},s.MetricsManager.prototype.getScrollMetrics=function(n,l,u){n=n?this.workspace_.scale:1,l=l||this.getViewMetrics(!1);var h=u||this.getContentMetrics();u=this.getComputedFixedEdges_(l),l=this.getPaddedContent_(l,h);var _=void 0!==u.left?u.left:l.left;return{top:(h=void 0!==u.top?u.top:l.top)/n,left:_/n,width:((void 0!==u.right?u.right:l.right)-_)/n,height:((void 0!==u.bottom?u.bottom:l.bottom)-h)/n}},s.MetricsManager.prototype.getUiMetrics=function(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}},s.MetricsManager.prototype.getMetrics=function(){var n=this.getToolboxMetrics(),l=this.getFlyoutMetrics(!0),u=this.getSvgMetrics(),h=this.getAbsoluteMetrics(),_=this.getViewMetrics(),b=this.getContentMetrics(),R=this.getScrollMetrics(!1,_,b);return{contentHeight:b.height,contentWidth:b.width,contentTop:b.top,contentLeft:b.left,scrollHeight:R.height,scrollWidth:R.width,scrollTop:R.top,scrollLeft:R.left,viewHeight:_.height,viewWidth:_.width,viewTop:_.top,viewLeft:_.left,absoluteTop:h.top,absoluteLeft:h.left,svgHeight:u.height,svgWidth:u.width,toolboxWidth:n.width,toolboxHeight:n.height,toolboxPosition:n.position,flyoutWidth:l.width,flyoutHeight:l.height}},s.registry.register(s.registry.Type.METRICS_MANAGER,s.registry.DEFAULT,s.MetricsManager),s.FlyoutMetricsManager=function(n,l){this.flyout_=l,s.FlyoutMetricsManager.superClass_.constructor.call(this,n)},s.utils.object.inherits(s.FlyoutMetricsManager,s.MetricsManager),s.FlyoutMetricsManager.prototype.getBoundingBox_=function(){try{var n=this.workspace_.getCanvas().getBBox()}catch(l){n={height:0,y:0,width:0,x:0}}return n},s.FlyoutMetricsManager.prototype.getContentMetrics=function(n){var l=this.getBoundingBox_();return{height:l.height*(n=n?1:this.workspace_.scale),width:l.width*n,top:l.y*n,left:l.x*n}},s.FlyoutMetricsManager.prototype.getScrollMetrics=function(n,l,u){return{height:((l=u||this.getContentMetrics()).height+2*(u=this.flyout_.MARGIN*this.workspace_.scale))/(n=n?this.workspace_.scale:1),width:(l.width+l.left+u)/n,top:0,left:0}},s.ThemeManager=function(n,l){this.workspace_=n,this.theme_=l,this.subscribedWorkspaces_=[],this.componentDB_=Object.create(null)},s.ThemeManager.prototype.getTheme=function(){return this.theme_},s.ThemeManager.prototype.setTheme=function(n){var u,l=this.theme_;for(this.theme_=n,(n=this.workspace_.getInjectionDiv())&&(l&&s.utils.dom.removeClass(n,l.getClassName()),s.utils.dom.addClass(n,this.theme_.getClassName())),l=0;n=this.subscribedWorkspaces_[l];l++)n.refreshTheme();for(l=0,n=Object.keys(this.componentDB_);u=n[l];l++)for(var _,h=0;_=this.componentDB_[u][h];h++){var b=_.element;_=_.propertyName;var R=this.theme_&&this.theme_.getComponentStyle(u);b.style[_]=R||""}s.hideChaff()},s.ThemeManager.prototype.subscribeWorkspace=function(n){this.subscribedWorkspaces_.push(n)},s.ThemeManager.prototype.unsubscribeWorkspace=function(n){if(0>(n=this.subscribedWorkspaces_.indexOf(n)))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.");this.subscribedWorkspaces_.splice(n,1)},s.ThemeManager.prototype.subscribe=function(n,l,u){this.componentDB_[l]||(this.componentDB_[l]=[]),this.componentDB_[l].push({element:n,propertyName:u}),l=this.theme_&&this.theme_.getComponentStyle(l),n.style[u]=l||""},s.ThemeManager.prototype.unsubscribe=function(n){if(n)for(var h,l=Object.keys(this.componentDB_),u=0;h=l[u];u++){for(var _=this.componentDB_[h],b=_.length-1;0<=b;b--)_[b].element===n&&_.splice(b,1);this.componentDB_[h].length||delete this.componentDB_[h]}},s.ThemeManager.prototype.dispose=function(){this.componentDB_=this.subscribedWorkspaces_=this.theme_=this.owner_=null},s.TouchGesture=function(n,l){s.TouchGesture.superClass_.constructor.call(this,n,l),this.isMultiTouch_=!1,this.cachedPoints_=Object.create(null),this.startDistance_=this.previousScale_=0,this.isPinchZoomEnabled_=this.onStartWrapper_=null},s.utils.object.inherits(s.TouchGesture,s.Gesture),s.TouchGesture.ZOOM_IN_MULTIPLIER=5,s.TouchGesture.ZOOM_OUT_MULTIPLIER=6,s.TouchGesture.prototype.doStart=function(n){this.isPinchZoomEnabled_=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,s.TouchGesture.superClass_.doStart.call(this,n),!this.isEnding_&&s.Touch.isTouchEvent(n)&&this.handleTouchStart(n)},s.TouchGesture.prototype.bindMouseEvents=function(n){this.onStartWrapper_=s.browserEvents.conditionalBind(document,"mousedown",null,this.handleStart.bind(this),!0),this.onMoveWrapper_=s.browserEvents.conditionalBind(document,"mousemove",null,this.handleMove.bind(this),!0),this.onUpWrapper_=s.browserEvents.conditionalBind(document,"mouseup",null,this.handleUp.bind(this),!0),n.preventDefault(),n.stopPropagation()},s.TouchGesture.prototype.handleStart=function(n){!this.isDragging()&&s.Touch.isTouchEvent(n)&&(this.handleTouchStart(n),this.isMultiTouch()&&s.longStop_())},s.TouchGesture.prototype.handleMove=function(n){this.isDragging()?s.Touch.shouldHandleEvent(n)&&s.TouchGesture.superClass_.handleMove.call(this,n):this.isMultiTouch()?(s.Touch.isTouchEvent(n)&&this.handleTouchMove(n),s.longStop_()):s.TouchGesture.superClass_.handleMove.call(this,n)},s.TouchGesture.prototype.handleUp=function(n){s.Touch.isTouchEvent(n)&&!this.isDragging()&&this.handleTouchEnd(n),!this.isMultiTouch()||this.isDragging()?s.Touch.shouldHandleEvent(n)&&s.TouchGesture.superClass_.handleUp.call(this,n):(n.preventDefault(),n.stopPropagation(),this.dispose())},s.TouchGesture.prototype.isMultiTouch=function(){return this.isMultiTouch_},s.TouchGesture.prototype.dispose=function(){s.TouchGesture.superClass_.dispose.call(this),this.onStartWrapper_&&s.browserEvents.unbind(this.onStartWrapper_)},s.TouchGesture.prototype.handleTouchStart=function(n){var l=s.Touch.getTouchIdentifierFromEvent(n);this.cachedPoints_[l]=this.getTouchPoint(n),2==(l=Object.keys(this.cachedPoints_)).length&&(this.startDistance_=s.utils.Coordinate.distance(this.cachedPoints_[l[0]],this.cachedPoints_[l[1]]),this.isMultiTouch_=!0,n.preventDefault())},s.TouchGesture.prototype.handleTouchMove=function(n){var l=s.Touch.getTouchIdentifierFromEvent(n);this.cachedPoints_[l]=this.getTouchPoint(n),l=Object.keys(this.cachedPoints_),this.isPinchZoomEnabled_&&2===l.length?this.handlePinch_(n):s.TouchGesture.superClass_.handleMove.call(this,n)},s.TouchGesture.prototype.handlePinch_=function(n){var l=Object.keys(this.cachedPoints_);if(l=s.utils.Coordinate.distance(this.cachedPoints_[l[0]],this.cachedPoints_[l[1]])/this.startDistance_,0<this.previousScale_&&1/0>this.previousScale_){var u=l-this.previousScale_;u=0<u?u*s.TouchGesture.ZOOM_IN_MULTIPLIER:u*s.TouchGesture.ZOOM_OUT_MULTIPLIER;var h=this.startWorkspace_,_=s.utils.mouseToSvg(n,h.getParentSvg(),h.getInverseScreenCTM());h.zoom(_.x,_.y,u)}this.previousScale_=l,n.preventDefault()},s.TouchGesture.prototype.handleTouchEnd=function(n){n=s.Touch.getTouchIdentifierFromEvent(n),this.cachedPoints_[n]&&delete this.cachedPoints_[n],2>Object.keys(this.cachedPoints_).length&&(this.cachedPoints_=Object.create(null),this.previousScale_=0)},s.TouchGesture.prototype.getTouchPoint=function(n){return this.startWorkspace_?new s.utils.Coordinate(n.pageX?n.pageX:n.changedTouches[0].pageX,n.pageY?n.pageY:n.changedTouches[0].pageY):null},s.WorkspaceAudio=function(n){this.parentWorkspace_=n,this.SOUNDS_=Object.create(null)},s.WorkspaceAudio.prototype.lastSound_=null,s.WorkspaceAudio.prototype.dispose=function(){this.SOUNDS_=this.parentWorkspace_=null},s.WorkspaceAudio.prototype.load=function(n,l){if(n.length){try{var u=new s.utils.global.Audio}catch(O){return}for(var h,_=0;_<n.length;_++){var b=n[_],R=b.match(/\.(\w+)$/);if(R&&u.canPlayType("audio/"+R[1])){h=new s.utils.global.Audio(b);break}}h&&h.play&&(this.SOUNDS_[l]=h)}},s.WorkspaceAudio.prototype.preload=function(){for(var n in this.SOUNDS_){var l=this.SOUNDS_[n];l.volume=.01;var u=l.play();if(void 0!==u?u.then(l.pause).catch(function(){}):l.pause(),s.utils.userAgent.IPAD||s.utils.userAgent.IPHONE)break}},s.WorkspaceAudio.prototype.play=function(n,l){var u=this.SOUNDS_[n];u?(n=new Date,null!=this.lastSound_&&n-this.lastSound_<s.SOUND_LIMIT||(this.lastSound_=n,(u=s.utils.userAgent.IPAD||s.utils.userAgent.ANDROID?u:u.cloneNode()).volume=void 0===l?1:l,u.play())):this.parentWorkspace_&&this.parentWorkspace_.getAudioManager().play(n,l)},s.WorkspaceSvg=function(n,l,u){s.WorkspaceSvg.superClass_.constructor.call(this,n),this.metricsManager_=new(s.registry.getClassFromOptions(s.registry.Type.METRICS_MANAGER,n,!0))(this),this.getMetrics=n.getMetrics||this.metricsManager_.getMetrics.bind(this.metricsManager_),this.setMetrics=n.setMetrics||s.WorkspaceSvg.setTopLevelWorkspaceMetrics_,this.componentManager_=new s.ComponentManager,this.connectionDBList=s.ConnectionDB.init(this.connectionChecker),l&&(this.blockDragSurface_=l),u&&(this.workspaceDragSurface_=u),this.useWorkspaceDragSurface_=!!this.workspaceDragSurface_&&s.utils.is3dSupported(),this.highlightedBlocks_=[],this.audioManager_=new s.WorkspaceAudio(n.parentWorkspace),this.grid_=this.options.gridPattern?new s.Grid(this.options.gridPattern,n.gridOptions):null,this.markerManager_=new s.MarkerManager(this),this.toolboxCategoryCallbacks_=Object.create(null),this.flyoutButtonCallbacks_=Object.create(null),s.Variables&&s.Variables.flyoutCategory&&this.registerToolboxCategoryCallback(s.VARIABLE_CATEGORY_NAME,s.Variables.flyoutCategory),s.VariablesDynamic&&s.VariablesDynamic.flyoutCategory&&this.registerToolboxCategoryCallback(s.VARIABLE_DYNAMIC_CATEGORY_NAME,s.VariablesDynamic.flyoutCategory),s.Procedures&&s.Procedures.flyoutCategory&&(this.registerToolboxCategoryCallback(s.PROCEDURE_CATEGORY_NAME,s.Procedures.flyoutCategory),this.addChangeListener(s.Procedures.mutatorOpenListener)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new s.ThemeManager(this,this.options.theme||s.Themes.Classic),this.themeManager_.subscribeWorkspace(this),this.renderer_=s.blockRendering.init(this.options.renderer||"geras",this.getTheme(),this.options.rendererOverrides),this.cachedParentSvg_=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements_=[],this.dragTargetAreas_=[],this.cachedParentSvgSize_=new s.utils.Size(0,0)},s.utils.object.inherits(s.WorkspaceSvg,s.Workspace),s.WorkspaceSvg.prototype.resizeHandlerWrapper_=null,s.WorkspaceSvg.prototype.rendered=!0,s.WorkspaceSvg.prototype.isVisible_=!0,s.WorkspaceSvg.prototype.isFlyout=!1,s.WorkspaceSvg.prototype.isMutator=!1,s.WorkspaceSvg.prototype.resizesEnabled_=!0,s.WorkspaceSvg.prototype.scrollX=0,s.WorkspaceSvg.prototype.scrollY=0,s.WorkspaceSvg.prototype.startScrollX=0,s.WorkspaceSvg.prototype.startScrollY=0,s.WorkspaceSvg.prototype.dragDeltaXY_=null,s.WorkspaceSvg.prototype.scale=1,s.WorkspaceSvg.prototype.oldScale_=1,s.WorkspaceSvg.prototype.oldTop_=0,s.WorkspaceSvg.prototype.oldLeft_=0,s.WorkspaceSvg.prototype.trashcan=null,s.WorkspaceSvg.prototype.scrollbar=null,s.WorkspaceSvg.prototype.flyout_=null,s.WorkspaceSvg.prototype.toolbox_=null,s.WorkspaceSvg.prototype.currentGesture_=null,s.WorkspaceSvg.prototype.blockDragSurface_=null,s.WorkspaceSvg.prototype.workspaceDragSurface_=null,s.WorkspaceSvg.prototype.useWorkspaceDragSurface_=!1,s.WorkspaceSvg.prototype.isDragSurfaceActive_=!1,s.WorkspaceSvg.prototype.injectionDiv_=null,s.WorkspaceSvg.prototype.lastRecordedPageScroll_=null,s.WorkspaceSvg.prototype.targetWorkspace=null,s.WorkspaceSvg.prototype.inverseScreenCTM_=null,s.WorkspaceSvg.prototype.inverseScreenCTMDirty_=!0,s.WorkspaceSvg.prototype.getMarkerManager=function(){return this.markerManager_},s.WorkspaceSvg.prototype.getMetricsManager=function(){return this.metricsManager_},s.WorkspaceSvg.prototype.setMetricsManager=function(n){this.metricsManager_=n,this.getMetrics=this.metricsManager_.getMetrics.bind(this.metricsManager_)},s.WorkspaceSvg.prototype.getComponentManager=function(){return this.componentManager_},s.WorkspaceSvg.prototype.setCursorSvg=function(n){this.markerManager_.setCursorSvg(n)},s.WorkspaceSvg.prototype.setMarkerSvg=function(n){this.markerManager_.setMarkerSvg(n)},s.WorkspaceSvg.prototype.getMarker=function(n){return this.markerManager_?this.markerManager_.getMarker(n):null},s.WorkspaceSvg.prototype.getCursor=function(){return this.markerManager_?this.markerManager_.getCursor():null},s.WorkspaceSvg.prototype.getRenderer=function(){return this.renderer_},s.WorkspaceSvg.prototype.getThemeManager=function(){return this.themeManager_},s.WorkspaceSvg.prototype.getTheme=function(){return this.themeManager_.getTheme()},s.WorkspaceSvg.prototype.setTheme=function(n){n||(n=s.Themes.Classic),this.themeManager_.setTheme(n)},s.WorkspaceSvg.prototype.refreshTheme=function(){this.svgGroup_&&this.renderer_.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles_(this.getAllBlocks(!1).filter(function(l){return!!l.getStyleName()})),this.refreshToolboxSelection(),this.toolbox_&&this.toolbox_.refreshTheme(),this.isVisible()&&this.setVisible(!0);var n=new(s.Events.get(s.Events.THEME_CHANGE))(this.getTheme().name,this.id);s.Events.fire(n)},s.WorkspaceSvg.prototype.updateBlockStyles_=function(n){for(var u,l=0;u=n[l];l++){var h=u.getStyleName();h&&(u.setStyle(h),u.mutator&&u.mutator.updateBlockStyle())}},s.WorkspaceSvg.prototype.getInverseScreenCTM=function(){if(this.inverseScreenCTMDirty_){var n=this.getParentSvg().getScreenCTM();n&&(this.inverseScreenCTM_=n.inverse(),this.inverseScreenCTMDirty_=!1)}return this.inverseScreenCTM_},s.WorkspaceSvg.prototype.updateInverseScreenCTM=function(){this.inverseScreenCTMDirty_=!0},s.WorkspaceSvg.prototype.isVisible=function(){return this.isVisible_},s.WorkspaceSvg.prototype.getSvgXY=function(n){var l=0,u=0,h=1;(s.utils.dom.containsNode(this.getCanvas(),n)||s.utils.dom.containsNode(this.getBubbleCanvas(),n))&&(h=this.scale);do{var _=s.utils.getRelativeXY(n);(n==this.getCanvas()||n==this.getBubbleCanvas())&&(h=1),l+=_.x*h,u+=_.y*h,n=n.parentNode}while(n&&n!=this.getParentSvg());return new s.utils.Coordinate(l,u)},s.WorkspaceSvg.prototype.getCachedParentSvgSize=function(){var n=this.cachedParentSvgSize_;return new s.utils.Size(n.width,n.height)},s.WorkspaceSvg.prototype.getOriginOffsetInPixels=function(){return s.utils.getInjectionDivXY_(this.getCanvas())},s.WorkspaceSvg.prototype.getInjectionDiv=function(){if(!this.injectionDiv_)for(var n=this.svgGroup_;n;){if(-1!=(" "+(n.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")){this.injectionDiv_=n;break}n=n.parentNode}return this.injectionDiv_},s.WorkspaceSvg.prototype.getBlockCanvas=function(){return this.svgBlockCanvas_},s.WorkspaceSvg.prototype.setResizeHandlerWrapper=function(n){this.resizeHandlerWrapper_=n},s.WorkspaceSvg.prototype.createDom=function(n){return this.svgGroup_=s.utils.dom.createSvgElement(s.utils.Svg.G,{class:"blocklyWorkspace"},null),n&&(this.svgBackground_=s.utils.dom.createSvgElement(s.utils.Svg.RECT,{height:"100%",width:"100%",class:n},this.svgGroup_),"blocklyMainBackground"==n&&this.grid_?this.svgBackground_.style.fill="url(#"+this.grid_.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.svgBlockCanvas_=s.utils.dom.createSvgElement(s.utils.Svg.G,{class:"blocklyBlockCanvas"},this.svgGroup_),this.svgBubbleCanvas_=s.utils.dom.createSvgElement(s.utils.Svg.G,{class:"blocklyBubbleCanvas"},this.svgGroup_),this.isFlyout||(s.browserEvents.conditionalBind(this.svgGroup_,"mousedown",this,this.onMouseDown_,!1,!0),s.browserEvents.conditionalBind(this.svgGroup_,"wheel",this,this.onMouseWheel_)),this.options.hasCategories&&(this.toolbox_=new(s.registry.getClassFromOptions(s.registry.Type.TOOLBOX,this.options,!0))(this)),this.grid_&&this.grid_.update(this.scale),this.recordDragTargets(),(n=s.registry.getClassFromOptions(s.registry.Type.CURSOR,this.options))&&this.markerManager_.setCursor(new n),this.renderer_.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_},s.WorkspaceSvg.prototype.dispose=function(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&(s.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.svgBubbleCanvas_=this.svgBlockCanvas_=null,this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null),this.flyout_&&(this.flyout_.dispose(),this.flyout_=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&(this.zoomControls_.dispose(),this.zoomControls_=null),this.audioManager_&&(this.audioManager_.dispose(),this.audioManager_=null),this.grid_&&(this.grid_.dispose(),this.grid_=null),this.renderer_.dispose(),this.markerManager_&&(this.markerManager_.dispose(),this.markerManager_=null),s.WorkspaceSvg.superClass_.dispose.call(this),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||(this.themeManager_.dispose(),this.themeManager_=null)),this.flyoutButtonCallbacks_=this.toolboxCategoryCallbacks_=this.connectionDBList=null,!this.options.parentWorkspace){var n=this.getParentSvg();n&&n.parentNode&&s.utils.dom.removeNode(n.parentNode)}this.resizeHandlerWrapper_&&(s.browserEvents.unbind(this.resizeHandlerWrapper_),this.resizeHandlerWrapper_=null)},s.WorkspaceSvg.prototype.newBlock=function(n,l){return new s.BlockSvg(this,n,l)},s.WorkspaceSvg.prototype.addTrashcan=function(){if(!s.Trashcan)throw Error("Missing require for Blockly.Trashcan");this.trashcan=new s.Trashcan(this);var n=this.trashcan.createDom();this.svgGroup_.insertBefore(n,this.svgBlockCanvas_)},s.WorkspaceSvg.prototype.addZoomControls=function(){if(!s.ZoomControls)throw Error("Missing require for Blockly.ZoomControls");this.zoomControls_=new s.ZoomControls(this);var n=this.zoomControls_.createDom();this.svgGroup_.appendChild(n)},s.WorkspaceSvg.prototype.addFlyout=function(n){var l=new s.Options({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,move:{scrollbars:!0}});return l.toolboxPosition=this.options.toolboxPosition,this.flyout_=this.horizontalLayout?new(s.registry.getClassFromOptions(s.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(l):new(s.registry.getClassFromOptions(s.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(l),this.flyout_.autoClose=!1,this.flyout_.getWorkspace().setVisible(!0),this.flyout_.createDom(n)},s.WorkspaceSvg.prototype.getFlyout=function(n){return this.flyout_||n?this.flyout_:this.toolbox_?this.toolbox_.getFlyout():null},s.WorkspaceSvg.prototype.getToolbox=function(){return this.toolbox_},s.WorkspaceSvg.prototype.updateScreenCalculations_=function(){this.updateInverseScreenCTM(),this.recordDragTargets()},s.WorkspaceSvg.prototype.resizeContents=function(){this.resizesEnabled_&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())},s.WorkspaceSvg.prototype.resize=function(){this.toolbox_&&this.toolbox_.position(),this.flyout_&&this.flyout_.position();for(var _,n=this.componentManager_.getComponents(s.ComponentManager.Capability.POSITIONABLE,!0),l=this.getMetricsManager().getUiMetrics(),u=[],h=0;_=n[h];h++)_.position(l,u),(_=_.getBoundingRectangle())&&u.push(_);this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations_()},s.WorkspaceSvg.prototype.updateScreenCalculationsIfScrolled=function(){var n=s.utils.getDocumentScroll();s.utils.Coordinate.equals(this.lastRecordedPageScroll_,n)||(this.lastRecordedPageScroll_=n,this.updateScreenCalculations_())},s.WorkspaceSvg.prototype.getCanvas=function(){return this.svgBlockCanvas_},s.WorkspaceSvg.prototype.setCachedParentSvgSize=function(n,l){var u=this.getParentSvg();n&&(this.cachedParentSvgSize_.width=n,u.cachedWidth_=n),l&&(this.cachedParentSvgSize_.height=l,u.cachedHeight_=l)},s.WorkspaceSvg.prototype.getBubbleCanvas=function(){return this.svgBubbleCanvas_},s.WorkspaceSvg.prototype.getParentSvg=function(){if(!this.cachedParentSvg_)for(var n=this.svgGroup_;n;){if("svg"==n.tagName){this.cachedParentSvg_=n;break}n=n.parentNode}return this.cachedParentSvg_},s.WorkspaceSvg.prototype.maybeFireViewportChangeEvent=function(){if(s.Events.isEnabled()){var n=this.scale,l=-this.scrollY,u=-this.scrollX;if(!(n==this.oldScale_&&1>Math.abs(l-this.oldTop_)&&1>Math.abs(u-this.oldLeft_))){var h=new(s.Events.get(s.Events.VIEWPORT_CHANGE))(l,u,n,this.id,this.oldScale_);this.oldScale_=n,this.oldTop_=l,this.oldLeft_=u,s.Events.fire(h)}}},s.WorkspaceSvg.prototype.translate=function(n,l){if(this.useWorkspaceDragSurface_&&this.isDragSurfaceActive_)this.workspaceDragSurface_.translateSurface(n,l);else{var u="translate("+n+","+l+") scale("+this.scale+")";this.svgBlockCanvas_.setAttribute("transform",u),this.svgBubbleCanvas_.setAttribute("transform",u)}this.blockDragSurface_&&this.blockDragSurface_.translateAndScaleGroup(n,l,this.scale),this.grid_&&this.grid_.moveTo(n,l),this.maybeFireViewportChangeEvent()},s.WorkspaceSvg.prototype.resetDragSurface=function(){if(this.useWorkspaceDragSurface_){this.isDragSurfaceActive_=!1;var n=this.workspaceDragSurface_.getSurfaceTranslation();this.workspaceDragSurface_.clearAndHide(this.svgGroup_),this.svgBlockCanvas_.setAttribute("transform",n="translate("+n.x+","+n.y+") scale("+this.scale+")"),this.svgBubbleCanvas_.setAttribute("transform",n)}},s.WorkspaceSvg.prototype.setupDragSurface=function(){if(this.useWorkspaceDragSurface_&&!this.isDragSurfaceActive_){this.isDragSurfaceActive_=!0;var n=this.svgBlockCanvas_.previousSibling,l=parseInt(this.getParentSvg().getAttribute("width"),10),u=parseInt(this.getParentSvg().getAttribute("height"),10),h=s.utils.getRelativeXY(this.getCanvas());this.workspaceDragSurface_.setContentsAndShow(this.getCanvas(),this.getBubbleCanvas(),n,l,u,this.scale),this.workspaceDragSurface_.translateSurface(h.x,h.y)}},s.WorkspaceSvg.prototype.getBlockDragSurface=function(){return this.blockDragSurface_},s.WorkspaceSvg.prototype.getWidth=function(){var n=this.getMetrics();return n?n.viewWidth/this.scale:0},s.WorkspaceSvg.prototype.setVisible=function(n){if(this.isVisible_=n,this.svgGroup_)if(this.scrollbar&&this.scrollbar.setContainerVisible(n),this.getFlyout()&&this.getFlyout().setContainerVisible(n),this.getParentSvg().style.display=n?"block":"none",this.toolbox_&&this.toolbox_.setVisible(n),n){for(var l=(n=this.getAllBlocks(!1)).length-1;0<=l;l--)n[l].markDirty();this.render(),this.toolbox_&&this.toolbox_.position()}else s.hideChaff(!0)},s.WorkspaceSvg.prototype.render=function(){for(var n=this.getAllBlocks(!1),l=n.length-1;0<=l;l--)n[l].render(!1);if(this.currentGesture_)for(n=this.currentGesture_.getInsertionMarkers(),l=0;l<n.length;l++)n[l].render(!1);this.markerManager_.updateMarkers()},s.WorkspaceSvg.prototype.highlightBlock=function(n,l){if(void 0===l){for(var h,u=0;h=this.highlightedBlocks_[u];u++)h.setHighlighted(!1);this.highlightedBlocks_.length=0}(h=n?this.getBlockById(n):null)&&((n=void 0===l||l)?-1==this.highlightedBlocks_.indexOf(h)&&this.highlightedBlocks_.push(h):s.utils.arrayRemove(this.highlightedBlocks_,h),h.setHighlighted(n))},s.WorkspaceSvg.prototype.paste=function(n){!this.rendered||!n.tagName||n.getElementsByTagName("block").length>=this.remainingCapacity()||(this.currentGesture_&&this.currentGesture_.cancel(),"comment"==n.tagName.toLowerCase()?this.pasteWorkspaceComment_(n):this.pasteBlock_(n))},s.WorkspaceSvg.prototype.pasteBlock_=function(n){s.Events.disable();try{var l=s.Xml.domToBlock(n,this),u=parseInt(n.getAttribute("x"),10),h=parseInt(n.getAttribute("y"),10);if(!isNaN(u)&&!isNaN(h)){this.RTL&&(u=-u);do{n=!1;for(var R,_=this.getAllBlocks(!1),b=0;R=_[b];b++){var O=R.getRelativeToSurfaceXY();if(1>=Math.abs(u-O.x)&&1>=Math.abs(h-O.y)){n=!0;break}}if(!n){var W,H=l.getConnections_(!1);for(b=0;W=H[b];b++)if(W.closest(s.SNAP_RADIUS,new s.utils.Coordinate(u,h)).connection){n=!0;break}}n&&(u=this.RTL?u-s.SNAP_RADIUS:u+s.SNAP_RADIUS,h+=2*s.SNAP_RADIUS)}while(n);l.moveBy(u,h)}}finally{s.Events.enable()}s.Events.isEnabled()&&!l.isShadow()&&s.Events.fire(new(s.Events.get(s.Events.BLOCK_CREATE))(l)),l.select()},s.WorkspaceSvg.prototype.pasteWorkspaceComment_=function(n){s.Events.disable();try{var l=s.WorkspaceCommentSvg.fromXml(n,this),u=parseInt(n.getAttribute("x"),10),h=parseInt(n.getAttribute("y"),10);isNaN(u)||isNaN(h)||(this.RTL&&(u=-u),l.moveBy(u+50,h+50))}finally{s.Events.enable()}s.Events.isEnabled()&&s.WorkspaceComment.fireCreateEvent(l),l.select()},s.WorkspaceSvg.prototype.refreshToolboxSelection=function(){var n=this.isFlyout?this.targetWorkspace:this;n&&!n.currentGesture_&&n.toolbox_&&n.toolbox_.getFlyout()&&n.toolbox_.refreshSelection()},s.WorkspaceSvg.prototype.renameVariableById=function(n,l){s.WorkspaceSvg.superClass_.renameVariableById.call(this,n,l),this.refreshToolboxSelection()},s.WorkspaceSvg.prototype.deleteVariableById=function(n){s.WorkspaceSvg.superClass_.deleteVariableById.call(this,n),this.refreshToolboxSelection()},s.WorkspaceSvg.prototype.createVariable=function(n,l,u){return n=s.WorkspaceSvg.superClass_.createVariable.call(this,n,l,u),this.refreshToolboxSelection(),n},s.WorkspaceSvg.prototype.recordDeleteAreas=function(){s.utils.deprecation.warn("WorkspaceSvg.prototype.recordDeleteAreas","June 2021","June 2022","WorkspaceSvg.prototype.recordDragTargets"),this.recordDragTargets()},s.WorkspaceSvg.prototype.recordDragTargets=function(){var n=this.componentManager_.getComponents(s.ComponentManager.Capability.DRAG_TARGET,!0);this.dragTargetAreas_=[];for(var u,l=0;u=n[l];l++){var h=u.getClientRect();h&&this.dragTargetAreas_.push({component:u,clientRect:h})}},s.WorkspaceSvg.prototype.getDragTarget=function(n){for(var u,l=0;u=this.dragTargetAreas_[l];l++)if(u.clientRect.contains(n.clientX,n.clientY))return u.component;return null},s.WorkspaceSvg.prototype.onMouseDown_=function(n){var l=this.getGesture(n);l&&l.handleWsStart(n,this)},s.WorkspaceSvg.prototype.startDrag=function(n,l){(n=s.utils.mouseToSvg(n,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,n.y/=this.scale,this.dragDeltaXY_=s.utils.Coordinate.difference(l,n)},s.WorkspaceSvg.prototype.moveDrag=function(n){return(n=s.utils.mouseToSvg(n,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,n.y/=this.scale,s.utils.Coordinate.sum(this.dragDeltaXY_,n)},s.WorkspaceSvg.prototype.isDragging=function(){return null!=this.currentGesture_&&this.currentGesture_.isDragging()},s.WorkspaceSvg.prototype.isDraggable=function(){return this.options.moveOptions&&this.options.moveOptions.drag},s.WorkspaceSvg.prototype.isMovable=function(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch},s.WorkspaceSvg.prototype.isMovableHorizontally=function(){var n=!!this.scrollbar;return this.isMovable()&&(!n||n&&this.scrollbar.canScrollHorizontally())},s.WorkspaceSvg.prototype.isMovableVertically=function(){var n=!!this.scrollbar;return this.isMovable()&&(!n||n&&this.scrollbar.canScrollVertically())},s.WorkspaceSvg.prototype.onMouseWheel_=function(n){if(s.Gesture.inProgress())n.preventDefault(),n.stopPropagation();else{var l=this.options.zoomOptions&&this.options.zoomOptions.wheel,u=this.options.moveOptions&&this.options.moveOptions.wheel;if(l||u){var h=s.utils.getScrollDeltaPixels(n);!l||!n.ctrlKey&&u?(l=this.scrollX-h.x,u=this.scrollY-h.y,n.shiftKey&&!h.x&&(l=this.scrollX-h.y,u=this.scrollY),this.scroll(l,u)):(h=-h.y/50,l=s.utils.mouseToSvg(n,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(l.x,l.y,h)),n.preventDefault()}}},s.WorkspaceSvg.prototype.getBlocksBoundingBox=function(){var n=this.getTopBoundedElements();if(!n.length)return new s.utils.Rect(0,0,0,0);for(var l=n[0].getBoundingRectangle(),u=1;u<n.length;u++){var h=n[u];h.isInsertionMarker&&h.isInsertionMarker()||((h=h.getBoundingRectangle()).top<l.top&&(l.top=h.top),h.bottom>l.bottom&&(l.bottom=h.bottom),h.left<l.left&&(l.left=h.left),h.right>l.right&&(l.right=h.right))}return l},s.WorkspaceSvg.prototype.cleanUp=function(){this.setResizesEnabled(!1),s.Events.setGroup(!0);for(var h,n=this.getTopBlocks(!0),l=0,u=0;h=n[u];u++)if(h.isMovable()){var _=h.getRelativeToSurfaceXY();h.moveBy(-_.x,l-_.y),h.snapToGrid(),l=h.getRelativeToSurfaceXY().y+h.getHeightWidth().height+this.renderer_.getConstants().MIN_BLOCK_HEIGHT}s.Events.setGroup(!1),this.setResizesEnabled(!0)},s.WorkspaceSvg.prototype.showContextMenu=function(n){if(!this.options.readOnly&&!this.isFlyout){var l=s.ContextMenuRegistry.registry.getContextMenuOptions(s.ContextMenuRegistry.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(l,n),s.ContextMenu.show(n,l,this.RTL)}},s.WorkspaceSvg.prototype.updateToolbox=function(n){if(n=s.utils.toolbox.convertToolboxDefToJson(n)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(s.utils.toolbox.hasCategories(n)){if(!this.toolbox_)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=n,this.toolbox_.render(n)}else{if(!this.flyout_)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=n,this.flyout_.show(n)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")},s.WorkspaceSvg.prototype.markFocused=function(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(s.mainWorkspace=this,this.setBrowserFocus())},s.WorkspaceSvg.prototype.setBrowserFocus=function(){document.activeElement&&document.activeElement.blur&&document.activeElement.blur();try{this.getParentSvg().focus({preventScroll:!0})}catch(n){try{this.getParentSvg().parentNode.setActive()}catch(l){this.getParentSvg().parentNode.focus({preventScroll:!0})}}},s.WorkspaceSvg.prototype.zoom=function(n,l,u){u=Math.pow(this.options.zoomOptions.scaleSpeed,u);var h=this.scale*u;if(this.scale!=h){h>this.options.zoomOptions.maxScale?u=this.options.zoomOptions.maxScale/this.scale:h<this.options.zoomOptions.minScale&&(u=this.options.zoomOptions.minScale/this.scale);var _=this.getCanvas().getCTM(),b=this.getParentSvg().createSVGPoint();b.x=n,b.y=l,b=b.matrixTransform(_.inverse()),_=_.translate((n=b.x)*(1-u),(l=b.y)*(1-u)).scale(u),this.scrollX=_.e,this.scrollY=_.f,this.setScale(h)}},s.WorkspaceSvg.prototype.zoomCenter=function(n){var l=this.getMetrics();if(this.flyout_){var u=l.svgWidth?l.svgWidth/2:0;l=l.svgHeight?l.svgHeight/2:0}else u=l.viewWidth/2+l.absoluteLeft,l=l.viewHeight/2+l.absoluteTop;this.zoom(u,l,n)},s.WorkspaceSvg.prototype.zoomToFit=function(){if(this.isMovable()){var n=this.getMetrics(),l=n.viewWidth;n=n.viewHeight;var u=this.getBlocksBoundingBox(),h=u.right-u.left;if(u=u.bottom-u.top,h){this.flyout_&&(this.horizontalLayout?(n+=this.flyout_.getHeight(),u+=this.flyout_.getHeight()/this.scale):(l+=this.flyout_.getWidth(),h+=this.flyout_.getWidth()/this.scale)),l/=h,n/=u,s.Events.disable();try{this.setScale(Math.min(l,n)),this.scrollCenter()}finally{s.Events.enable()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},s.WorkspaceSvg.prototype.beginCanvasTransition=function(){s.utils.dom.addClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),s.utils.dom.addClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},s.WorkspaceSvg.prototype.endCanvasTransition=function(){s.utils.dom.removeClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),s.utils.dom.removeClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},s.WorkspaceSvg.prototype.scrollCenter=function(){if(this.isMovable()){var n=this.getMetrics(),l=(n.scrollWidth-n.viewWidth)/2,u=(n.scrollHeight-n.viewHeight)/2;this.scroll(l=-l-n.scrollLeft,u=-u-n.scrollTop)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},s.WorkspaceSvg.prototype.centerOnBlock=function(n){if(this.isMovable()){if(n=n?this.getBlockById(n):null){var l=n.getRelativeToSurfaceXY(),u=n.getHeightWidth(),h=this.scale;n=(l.x+(this.RTL?-1:1)*u.width/2)*h,l=(l.y+u.height/2)*h,u=this.getMetrics(),this.scroll(-(n-u.viewWidth/2),-(l-u.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},s.WorkspaceSvg.prototype.setScale=function(n){this.options.zoomOptions.maxScale&&n>this.options.zoomOptions.maxScale?n=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&n<this.options.zoomOptions.minScale&&(n=this.options.zoomOptions.minScale),this.scale=n,s.hideChaff(!1),this.flyout_&&(this.flyout_.reflow(),this.recordDragTargets()),this.grid_&&this.grid_.update(this.scale),n=this.getMetrics(),this.scrollX-=n.absoluteLeft,this.scrollY-=n.absoluteTop,n.viewLeft+=n.absoluteLeft,n.viewTop+=n.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout_?this.scrollbar.resizeView(n):this.scrollbar.resizeContent(n))},s.WorkspaceSvg.prototype.getScale=function(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale},s.WorkspaceSvg.prototype.scroll=function(n,l){s.hideChaff(!0);var u=this.getMetrics();n=Math.min(n,-u.scrollLeft),l=Math.min(l,-u.scrollTop);var h=u.scrollTop+Math.max(0,u.scrollHeight-u.viewHeight);n=Math.max(n,-(u.scrollLeft+Math.max(0,u.scrollWidth-u.viewWidth))),l=Math.max(l,-h),this.scrollX=n,this.scrollY=l,this.scrollbar&&this.scrollbar.set(-(n+u.scrollLeft),-(l+u.scrollTop),!1),this.translate(n+=u.absoluteLeft,l+=u.absoluteTop)},s.WorkspaceSvg.setTopLevelWorkspaceMetrics_=function(n){var l=this.getMetrics();"number"==typeof n.x&&(this.scrollX=-(l.scrollLeft+(l.scrollWidth-l.viewWidth)*n.x)),"number"==typeof n.y&&(this.scrollY=-(l.scrollTop+(l.scrollHeight-l.viewHeight)*n.y)),this.translate(this.scrollX+l.absoluteLeft,this.scrollY+l.absoluteTop)},s.WorkspaceSvg.prototype.getBlockById=function(n){return s.WorkspaceSvg.superClass_.getBlockById.call(this,n)},s.WorkspaceSvg.prototype.getTopBlocks=function(n){return s.WorkspaceSvg.superClass_.getTopBlocks.call(this,n)},s.WorkspaceSvg.prototype.addTopBlock=function(n){this.addTopBoundedElement(n),s.WorkspaceSvg.superClass_.addTopBlock.call(this,n)},s.WorkspaceSvg.prototype.removeTopBlock=function(n){this.removeTopBoundedElement(n),s.WorkspaceSvg.superClass_.removeTopBlock.call(this,n)},s.WorkspaceSvg.prototype.addTopComment=function(n){this.addTopBoundedElement(n),s.WorkspaceSvg.superClass_.addTopComment.call(this,n)},s.WorkspaceSvg.prototype.removeTopComment=function(n){this.removeTopBoundedElement(n),s.WorkspaceSvg.superClass_.removeTopComment.call(this,n)},s.WorkspaceSvg.prototype.addTopBoundedElement=function(n){this.topBoundedElements_.push(n)},s.WorkspaceSvg.prototype.removeTopBoundedElement=function(n){s.utils.arrayRemove(this.topBoundedElements_,n)},s.WorkspaceSvg.prototype.getTopBoundedElements=function(){return[].concat(this.topBoundedElements_)},s.WorkspaceSvg.prototype.setResizesEnabled=function(n){var l=!this.resizesEnabled_&&n;this.resizesEnabled_=n,l&&this.resizeContents()},s.WorkspaceSvg.prototype.clear=function(){this.setResizesEnabled(!1),s.WorkspaceSvg.superClass_.clear.call(this),this.topBoundedElements_=[],this.setResizesEnabled(!0)},s.WorkspaceSvg.prototype.registerButtonCallback=function(n,l){if("function"!=typeof l)throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks_[n]=l},s.WorkspaceSvg.prototype.getButtonCallback=function(n){return(n=this.flyoutButtonCallbacks_[n])?n:null},s.WorkspaceSvg.prototype.removeButtonCallback=function(n){this.flyoutButtonCallbacks_[n]=null},s.WorkspaceSvg.prototype.registerToolboxCategoryCallback=function(n,l){if("function"!=typeof l)throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks_[n]=l},s.WorkspaceSvg.prototype.getToolboxCategoryCallback=function(n){return this.toolboxCategoryCallbacks_[n]||null},s.WorkspaceSvg.prototype.removeToolboxCategoryCallback=function(n){this.toolboxCategoryCallbacks_[n]=null},s.WorkspaceSvg.prototype.getGesture=function(n){var l="mousedown"==n.type||"touchstart"==n.type||"pointerdown"==n.type,u=this.currentGesture_;return u?l&&u.hasStarted()?(console.warn("Tried to start the same gesture twice."),u.cancel(),null):u:l?this.currentGesture_=new s.TouchGesture(n,this):null},s.WorkspaceSvg.prototype.clearGesture=function(){this.currentGesture_=null},s.WorkspaceSvg.prototype.cancelCurrentGesture=function(){this.currentGesture_&&this.currentGesture_.cancel()},s.WorkspaceSvg.prototype.getAudioManager=function(){return this.audioManager_},s.WorkspaceSvg.prototype.getGrid=function(){return this.grid_},s.inject=function(n,l){if(s.checkBlockColourConstants(),"string"==typeof n&&(n=document.getElementById(n)||document.querySelector(n)),!n||!s.utils.dom.containsNode(document,n))throw Error("Error: container is not in current document.");l=new s.Options(l||{});var u=document.createElement("div");u.className="injectionDiv",u.tabIndex=0,s.utils.aria.setState(u,s.utils.aria.State.LABEL,s.Msg.WORKSPACE_ARIA_LABEL),n.appendChild(u),n=s.createDom_(u,l);var h=new s.BlockDragSurfaceSvg(u),_=new s.WorkspaceDragSurfaceSvg(u),b=s.createMainWorkspace_(n,l,h,_);return s.init_(b),s.mainWorkspace=b,s.svgResize(b),u.addEventListener("focusin",function(){s.mainWorkspace=b}),b},s.createDom_=function(n,l){n.setAttribute("dir","LTR"),s.Css.inject(l.hasCss,l.pathToMedia),n=s.utils.dom.createSvgElement(s.utils.Svg.SVG,{xmlns:s.utils.dom.SVG_NS,"xmlns:html":s.utils.dom.HTML_NS,"xmlns:xlink":s.utils.dom.XLINK_NS,version:"1.1",class:"blocklySvg",tabindex:"0"},n);var u=s.utils.dom.createSvgElement(s.utils.Svg.DEFS,{},n),h=String(Math.random()).substring(2);return l.gridPattern=s.Grid.createDom(h,l.gridOptions,u),n},s.createMainWorkspace_=function(n,l,u,h){return l.parentWorkspace=null,(l=new s.WorkspaceSvg(l,u,h)).scale=(u=l.options).zoomOptions.startScale,n.appendChild(l.createDom("blocklyMainBackground")),s.utils.dom.addClass(l.getInjectionDiv(),l.getRenderer().getClassName()),s.utils.dom.addClass(l.getInjectionDiv(),l.getTheme().getClassName()),!u.hasCategories&&u.languageTree&&(h=l.addFlyout(s.utils.Svg.SVG),s.utils.dom.insertAfter(h,n)),u.hasTrashcan&&l.addTrashcan(),u.zoomOptions&&u.zoomOptions.controls&&l.addZoomControls(),l.getThemeManager().subscribe(n,"workspaceBackgroundColour","background-color"),l.translate(0,0),l.addChangeListener(s.bumpIntoBoundsHandler_(l)),s.svgResize(l),s.WidgetDiv.createDom(),s.DropDownDiv.createDom(),s.Tooltip.createDom(),l},s.extractObjectFromEvent_=function(n,l){var u=null;switch(l.type){case s.Events.BLOCK_CREATE:case s.Events.BLOCK_MOVE:(u=n.getBlockById(l.blockId))&&(u=u.getRootBlock());break;case s.Events.COMMENT_CREATE:case s.Events.COMMENT_MOVE:u=n.getCommentById(l.commentId)}return u},s.bumpTopObjectsIntoBounds_=function(n){var l=n.getMetricsManager();if(l.hasFixedEdges()&&!n.isDragging()){l=l.getScrollMetrics(!0);for(var _,u=n.getTopBoundedElements(),h=0;_=u[h];h++)s.bumpObjectIntoBounds_(n,l,_)}},s.bumpIntoBoundsHandler_=function(n){return function(l){var u=n.getMetricsManager();if(u.hasFixedEdges()&&!n.isDragging())if(-1!==s.Events.BUMP_EVENTS.indexOf(l.type)){u=u.getScrollMetrics(!0);var h=s.extractObjectFromEvent_(n,l);if(h){var _=s.Events.getGroup();s.Events.setGroup(l.group),s.bumpObjectIntoBounds_(n,u,h)&&!l.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),null!==_&&s.Events.setGroup(_)}}else l.type===s.Events.VIEWPORT_CHANGE&&l.scale>l.oldScale&&s.bumpTopObjectsIntoBounds_(n)}},s.bumpObjectIntoBounds_=function(n,l,u){var h=u.getBoundingRectangle(),_=h.right-h.left,b=s.utils.math.clamp(l.top,h.top,l.top+l.height-(h.bottom-h.top))-h.top,R=l.left;return l=l.left+l.width-_,n.RTL?R=Math.min(l,R):l=Math.max(R,l),!(!(n=s.utils.math.clamp(R,h.left,l)-h.left)&&!b||(u.moveBy(n,b),0))},s.init_=function(n){var l=n.options,u=n.getParentSvg();if(s.browserEvents.conditionalBind(u.parentNode,"contextmenu",null,function(_){s.utils.isTargetInput(_)||_.preventDefault()}),u=s.browserEvents.conditionalBind(window,"resize",null,function(){s.hideChaff(!0),s.svgResize(n),s.bumpTopObjectsIntoBounds_(n)}),n.setResizeHandlerWrapper(u),s.inject.bindDocumentEvents_(),l.languageTree){u=n.getToolbox();var h=n.getFlyout(!0);u?u.init():h&&(h.init(n),h.show(l.languageTree),"function"==typeof h.scrollToStart&&h.scrollToStart())}l.hasTrashcan&&n.trashcan.init(),l.zoomOptions&&l.zoomOptions.controls&&n.zoomControls_.init(),l.moveOptions&&l.moveOptions.scrollbars?(n.scrollbar=new s.ScrollbarPair(n,!0===l.moveOptions.scrollbars||!!l.moveOptions.scrollbars.horizontal,!0===l.moveOptions.scrollbars||!!l.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),n.scrollbar.resize()):n.setMetrics({x:.5,y:.5}),l.hasSounds&&s.inject.loadSounds_(l.pathToMedia,n)},s.inject.bindDocumentEvents_=function(){s.documentEventsBound_||(s.browserEvents.conditionalBind(document,"scroll",null,function(){for(var u,n=s.Workspace.getAll(),l=0;u=n[l];l++)u.updateInverseScreenCTM&&u.updateInverseScreenCTM()}),s.browserEvents.conditionalBind(document,"keydown",null,s.onKeyDown),s.browserEvents.bind(document,"touchend",null,s.longStop_),s.browserEvents.bind(document,"touchcancel",null,s.longStop_),s.utils.userAgent.IPAD&&s.browserEvents.conditionalBind(window,"orientationchange",document,function(){s.svgResize(s.getMainWorkspace())})),s.documentEventsBound_=!0},s.inject.loadSounds_=function(n,l){var u=l.getAudioManager();u.load([n+"click.mp3",n+"click.wav",n+"click.ogg"],"click"),u.load([n+"disconnect.wav",n+"disconnect.mp3",n+"disconnect.ogg"],"disconnect"),u.load([n+"delete.mp3",n+"delete.ogg",n+"delete.wav"],"delete");var h=[];n=function(){for(;h.length;)s.browserEvents.unbind(h.pop());u.preload()},h.push(s.browserEvents.conditionalBind(document,"mousemove",null,n,!0)),h.push(s.browserEvents.conditionalBind(document,"touchstart",null,n,!0))},s.Names=function(n,l){if(this.variablePrefix_=l||"",this.reservedDict_=Object.create(null),n)for(n=n.split(","),l=0;l<n.length;l++)this.reservedDict_[n[l]]=!0;this.reset()},s.Names.DEVELOPER_VARIABLE_TYPE="DEVELOPER_VARIABLE",s.Names.prototype.reset=function(){this.db_=Object.create(null),this.dbReverse_=Object.create(null),this.variableMap_=null},s.Names.prototype.setVariableMap=function(n){this.variableMap_=n},s.Names.prototype.getNameForUserVariable_=function(n){return this.variableMap_?(n=this.variableMap_.getVariableById(n))?n.name:null:(console.warn("Deprecated call to Blockly.Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:\nBlockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());"),null)},s.Names.prototype.populateVariables=function(n){n=s.Variables.allUsedVarModels(n);for(var l=0;l<n.length;l++)this.getName(n[l].getId(),s.VARIABLE_CATEGORY_NAME)},s.Names.prototype.populateProcedures=function(n){n=(n=s.Procedures.allProcedures(n))[0].concat(n[1]);for(var l=0;l<n.length;l++)this.getName(n[l][0],s.PROCEDURE_CATEGORY_NAME)},s.Names.prototype.getName=function(n,l){var u=n;l==s.VARIABLE_CATEGORY_NAME&&(n=this.getNameForUserVariable_(n))&&(u=n),n=u.toLowerCase();var h=l==s.VARIABLE_CATEGORY_NAME||l==s.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"";l in this.db_||(this.db_[l]=Object.create(null));var _=this.db_[l];return n in _?h+_[n]:(l=this.getDistinctName(u,l),_[n]=l.substr(h.length),l)},s.Names.prototype.getUserNames=function(n){return Object.keys(this.db_[n]||{})},s.Names.prototype.getDistinctName=function(n,l){n=this.safeName_(n);for(var u="";this.dbReverse_[n+u]||n+u in this.reservedDict_;)u=u?u+1:2;return this.dbReverse_[n+=u]=!0,(l==s.VARIABLE_CATEGORY_NAME||l==s.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"")+n},s.Names.prototype.safeName_=function(n){return n?(n=encodeURI(n.replace(/ /g,"_")).replace(/[^\w]/g,"_"),-1!="0123456789".indexOf(n[0])&&(n="my_"+n)):n=s.Msg.UNNAMED_KEY||"unnamed",n},s.Names.equals=function(n,l){return n.toLowerCase()==l.toLowerCase()},s.Procedures={},s.Procedures.NAME_TYPE=s.PROCEDURE_CATEGORY_NAME,s.Procedures.DEFAULT_ARG="x",s.Procedures.allProcedures=function(n){var l=n.getBlocksByType("procedures_defnoreturn",!1).map(function(u){return u.getProcedureDef()});return n=n.getBlocksByType("procedures_defreturn",!1).map(function(u){return u.getProcedureDef()}),l.sort(s.Procedures.procTupleComparator_),n.sort(s.Procedures.procTupleComparator_),[l,n]},s.Procedures.procTupleComparator_=function(n,l){return n[0].localeCompare(l[0],void 0,{sensitivity:"base"})},s.Procedures.findLegalName=function(n,l){if(l.isInFlyout)return n;for(n=n||s.Msg.UNNAMED_KEY||"unnamed";!s.Procedures.isLegalName_(n,l.workspace,l);){var u=n.match(/^(.*?)(\d+)$/);n=u?u[1]+(parseInt(u[2],10)+1):n+"2"}return n},s.Procedures.isLegalName_=function(n,l,u){return!s.Procedures.isNameUsed(n,l,u)},s.Procedures.isNameUsed=function(n,l,u){l=l.getAllBlocks(!1);for(var h=0;h<l.length;h++)if(l[h]!=u&&l[h].getProcedureDef){var _=l[h].getProcedureDef();if(s.Names.equals(_[0],n))return!0}return!1},s.Procedures.rename=function(n){n=n.trim();var l=s.Procedures.findLegalName(n,this.getSourceBlock()),u=this.getValue();if(u!=n&&u!=l){n=this.getSourceBlock().workspace.getAllBlocks(!1);for(var h=0;h<n.length;h++)n[h].renameProcedure&&n[h].renameProcedure(u,l)}return l},s.Procedures.flyoutCategory=function(n){function l(b,R){for(var O=0;O<b.length;O++){var H=b[O][0],W=b[O][1],G=s.utils.xml.createElement("block");G.setAttribute("type",R),G.setAttribute("gap",16);var Z=s.utils.xml.createElement("mutation");for(Z.setAttribute("name",H),G.appendChild(Z),H=0;H<W.length;H++){var Q=s.utils.xml.createElement("arg");Q.setAttribute("name",W[H]),Z.appendChild(Q)}u.push(G)}}var u=[];if(s.Blocks.procedures_defnoreturn){var h=s.utils.xml.createElement("block");h.setAttribute("type","procedures_defnoreturn"),h.setAttribute("gap",16);var _=s.utils.xml.createElement("field");_.setAttribute("name","NAME"),_.appendChild(s.utils.xml.createTextNode(s.Msg.PROCEDURES_DEFNORETURN_PROCEDURE)),h.appendChild(_),u.push(h)}return s.Blocks.procedures_defreturn&&((h=s.utils.xml.createElement("block")).setAttribute("type","procedures_defreturn"),h.setAttribute("gap",16),(_=s.utils.xml.createElement("field")).setAttribute("name","NAME"),_.appendChild(s.utils.xml.createTextNode(s.Msg.PROCEDURES_DEFRETURN_PROCEDURE)),h.appendChild(_),u.push(h)),s.Blocks.procedures_ifreturn&&((h=s.utils.xml.createElement("block")).setAttribute("type","procedures_ifreturn"),h.setAttribute("gap",16),u.push(h)),u.length&&u[u.length-1].setAttribute("gap",24),l((n=s.Procedures.allProcedures(n))[0],"procedures_callnoreturn"),l(n[1],"procedures_callreturn"),u},s.Procedures.updateMutatorFlyout_=function(n){for(var _,l=[],u=n.getBlocksByType("procedures_mutatorarg",!1),h=0;_=u[h];h++)l.push(_.getFieldValue("NAME"));u=s.utils.xml.createElement("xml"),(h=s.utils.xml.createElement("block")).setAttribute("type","procedures_mutatorarg"),(_=s.utils.xml.createElement("field")).setAttribute("name","NAME"),l=s.Variables.generateUniqueNameFromOptions(s.Procedures.DEFAULT_ARG,l),l=s.utils.xml.createTextNode(l),_.appendChild(l),h.appendChild(_),u.appendChild(h),n.updateToolbox(u)},s.Procedures.mutatorOpenListener=function(n){if(n.type==s.Events.BUBBLE_OPEN&&"mutator"===n.bubbleType&&n.isOpen){var l=(n=s.Workspace.getById(n.workspaceId).getBlockById(n.blockId)).type;("procedures_defnoreturn"==l||"procedures_defreturn"==l)&&(n=n.mutator.getWorkspace(),s.Procedures.updateMutatorFlyout_(n),n.addChangeListener(s.Procedures.mutatorChangeListener_))}},s.Procedures.mutatorChangeListener_=function(n){(n.type==s.Events.BLOCK_CREATE||n.type==s.Events.BLOCK_DELETE||n.type==s.Events.BLOCK_CHANGE)&&(n=s.Workspace.getById(n.workspaceId),s.Procedures.updateMutatorFlyout_(n))},s.Procedures.getCallers=function(n,l){var u=[];l=l.getAllBlocks(!1);for(var h=0;h<l.length;h++)if(l[h].getProcedureCall){var _=l[h].getProcedureCall();_&&s.Names.equals(_,n)&&u.push(l[h])}return u},s.Procedures.mutateCallers=function(n){var _,l=s.Events.recordUndo,u=n.getProcedureDef()[0],h=n.mutationToDom(!0);for(n=s.Procedures.getCallers(u,n.workspace),u=0;_=n[u];u++){var b=_.mutationToDom();b=b&&s.Xml.domToText(b),_.domToMutation(h);var R=_.mutationToDom();b!=(R=R&&s.Xml.domToText(R))&&(s.Events.recordUndo=!1,s.Events.fire(new(s.Events.get(s.Events.BLOCK_CHANGE))(_,"mutation",null,b,R)),s.Events.recordUndo=l)}},s.Procedures.getDefinition=function(n,l){l=l.getAllBlocks(!1);for(var u=0;u<l.length;u++)if(l[u].getProcedureDef){var h=l[u].getProcedureDef();if(h&&s.Names.equals(h[0],n))return l[u]}return null},s.ShortcutRegistry=function(){s.ShortcutRegistry.registry=this,this.registry_=Object.create(null),this.keyMap_=Object.create(null)},s.ShortcutRegistry.modifierKeys={Shift:s.utils.KeyCodes.SHIFT,Control:s.utils.KeyCodes.CTRL,Alt:s.utils.KeyCodes.ALT,Meta:s.utils.KeyCodes.META},s.ShortcutRegistry.prototype.register=function(n,l){if(this.registry_[n.name]&&!l)throw Error('Shortcut with name "'+n.name+'" already exists.');this.registry_[n.name]=n},s.ShortcutRegistry.prototype.unregister=function(n){return this.registry_[n]?(this.removeAllKeyMappings(n),delete this.registry_[n],!0):(console.warn('Keyboard shortcut with name "'+n+'" not found.'),!1)},s.ShortcutRegistry.prototype.addKeyMapping=function(n,l,u){n=String(n);var h=this.keyMap_[n];if(h&&!u)throw Error('Shortcut with name "'+l+'" collides with shortcuts '+h.toString());h&&u?h.unshift(l):this.keyMap_[n]=[l]},s.ShortcutRegistry.prototype.removeKeyMapping=function(n,l,u){var h=this.keyMap_[n];if(!h&&!u)return console.warn('No keyboard shortcut with name "'+l+'" registered with key code "'+n+'"'),!1;var _=h.indexOf(l);return-1<_?(h.splice(_,1),0==h.length&&delete this.keyMap_[n],!0):(u||console.warn('No keyboard shortcut with name "'+l+'" registered with key code "'+n+'"'),!1)},s.ShortcutRegistry.prototype.removeAllKeyMappings=function(n){for(var l in this.keyMap_)this.removeKeyMapping(l,n,!0)},s.ShortcutRegistry.prototype.setKeyMap=function(n){this.keyMap_=n},s.ShortcutRegistry.prototype.getKeyMap=function(){return s.utils.object.deepMerge(Object.create(null),this.keyMap_)},s.ShortcutRegistry.prototype.getRegistry=function(){return s.utils.object.deepMerge(Object.create(null),this.registry_)},s.ShortcutRegistry.prototype.onKeyDown=function(n,l){var u=this.serializeKeyEvent_(l);if(!(u=this.getShortcutNamesByKeyCode(u)))return!1;for(var _,h=0;_=u[h];h++)if((!(_=this.registry_[_]).preconditionFn||_.preconditionFn(n))&&_.callback&&_.callback(n,l,_))return!0;return!1},s.ShortcutRegistry.prototype.getShortcutNamesByKeyCode=function(n){return this.keyMap_[n]||[]},s.ShortcutRegistry.prototype.getKeyCodesByShortcutName=function(n){var u,l=[];for(u in this.keyMap_)-1<this.keyMap_[u].indexOf(n)&&l.push(u);return l},s.ShortcutRegistry.prototype.serializeKeyEvent_=function(n){var u,l="";for(u in s.ShortcutRegistry.modifierKeys)n.getModifierState(u)&&(""!=l&&(l+="+"),l+=u);return""!=l&&n.keyCode?l=l+"+"+n.keyCode:n.keyCode&&(l=n.keyCode.toString()),l},s.ShortcutRegistry.prototype.checkModifiers_=function(n){for(var h,l=s.utils.object.values(s.ShortcutRegistry.modifierKeys),u=0;h=n[u];u++)if(0>l.indexOf(h))throw Error(h+" is not a valid modifier key.")},s.ShortcutRegistry.prototype.createSerializedKey=function(n,l){var u="";if(l)for(var h in this.checkModifiers_(l),s.ShortcutRegistry.modifierKeys)-1<l.indexOf(s.ShortcutRegistry.modifierKeys[h])&&(""!=u&&(u+="+"),u+=h);return""!=u&&n?u=u+"+"+n:n&&(u=n.toString()),u},new s.ShortcutRegistry,s.VariableModel=function(n,l,u,h){this.workspace=n,this.name=l,this.type=u||"",this.id_=h||s.utils.genUid(),s.Events.fire(new(s.Events.get(s.Events.VAR_CREATE))(this))},s.VariableModel.prototype.getId=function(){return this.id_},s.VariableModel.compareByName=function(n,l){return n.name.localeCompare(l.name,void 0,{sensitivity:"base"})},s.Variables={},s.Variables.NAME_TYPE=s.VARIABLE_CATEGORY_NAME,s.Variables.allUsedVarModels=function(n){var l=n.getAllBlocks(!1);n=Object.create(null);for(var u=0;u<l.length;u++){var h=l[u].getVarModels();if(h)for(var _=0;_<h.length;_++){var b=h[_],R=b.getId();R&&(n[R]=b)}}for(R in l=[],n)l.push(n[R]);return l},s.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_={},s.Variables.allDeveloperVariables=function(n){n=n.getAllBlocks(!1);for(var h,l=Object.create(null),u=0;h=n[u];u++){var _=h.getDeveloperVariables;if(!_&&h.getDeveloperVars&&(_=h.getDeveloperVars,s.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[h.type]||(console.warn("Function getDeveloperVars() deprecated. Use getDeveloperVariables() (block type '"+h.type+"')"),s.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[h.type]=!0)),_)for(h=_(),_=0;_<h.length;_++)l[h[_]]=!0}return Object.keys(l)},s.Variables.flyoutCategory=function(n){var l=[],u=document.createElement("button");return u.setAttribute("text","%{BKY_NEW_VARIABLE}"),u.setAttribute("callbackKey","CREATE_VARIABLE"),n.registerButtonCallback("CREATE_VARIABLE",function(h){s.Variables.createVariableButtonHandler(h.getTargetWorkspace())}),l.push(u),n=s.Variables.flyoutCategoryBlocks(n),l.concat(n)},s.Variables.flyoutCategoryBlocks=function(n){var l=[];if(0<(n=n.getVariablesOfType("")).length){var u=n[n.length-1];if(s.Blocks.variables_set){var h=s.utils.xml.createElement("block");h.setAttribute("type","variables_set"),h.setAttribute("gap",s.Blocks.math_change?8:24),h.appendChild(s.Variables.generateVariableFieldDom(u)),l.push(h)}if(s.Blocks.math_change&&((h=s.utils.xml.createElement("block")).setAttribute("type","math_change"),h.setAttribute("gap",s.Blocks.variables_get?20:8),h.appendChild(s.Variables.generateVariableFieldDom(u)),u=s.Xml.textToDom('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),h.appendChild(u),l.push(h)),s.Blocks.variables_get){n.sort(s.VariableModel.compareByName),u=0;for(var _;_=n[u];u++)(h=s.utils.xml.createElement("block")).setAttribute("type","variables_get"),h.setAttribute("gap",8),h.appendChild(s.Variables.generateVariableFieldDom(_)),l.push(h)}}return l},s.Variables.VAR_LETTER_OPTIONS="ijkmnopqrstuvwxyzabcdefgh",s.Variables.generateUniqueName=function(n){return s.Variables.generateUniqueNameFromOptions(s.Variables.VAR_LETTER_OPTIONS.charAt(0),n.getAllVariableNames())},s.Variables.generateUniqueNameFromOptions=function(n,l){if(!l.length)return n;for(var u=s.Variables.VAR_LETTER_OPTIONS,h="",_=u.indexOf(n);;){for(var b=!1,R=0;R<l.length;R++)if(l[R].toLowerCase()==n){b=!0;break}if(!b)return n;++_==u.length&&(_=0,h=Number(h)+1),n=u.charAt(_)+h}},s.Variables.createVariableButtonHandler=function(n,l,u){var h=u||"",_=function(b){s.Variables.promptName(s.Msg.NEW_VARIABLE_TITLE,b,function(R){if(R){var O=s.Variables.nameUsedWithAnyType(R,n);if(O){if(O.type==h)var H=s.Msg.VARIABLE_ALREADY_EXISTS.replace("%1",O.name);else H=(H=s.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE).replace("%1",O.name).replace("%2",O.type);s.alert(H,function(){_(R)})}else n.createVariable(R,h),l&&l(R)}else l&&l(null)})};_("")},s.Variables.createVariable=s.Variables.createVariableButtonHandler,s.Variables.renameVariable=function(n,l,u){var h=function(_){var b=s.Msg.RENAME_VARIABLE_TITLE.replace("%1",l.name);s.Variables.promptName(b,_,function(R){if(R){var O=s.Variables.nameUsedWithOtherType_(R,l.type,n);O?(O=s.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",O.name).replace("%2",O.type),s.alert(O,function(){h(R)})):(n.renameVariableById(l.getId(),R),u&&u(R))}else u&&u(null)})};h("")},s.Variables.promptName=function(n,l,u){s.prompt(n,l,function(h){h&&((h=h.replace(/[\s\xa0]+/g," ").trim())==s.Msg.RENAME_VARIABLE||h==s.Msg.NEW_VARIABLE)&&(h=null),u(h)})},s.Variables.nameUsedWithOtherType_=function(n,l,u){u=u.getVariableMap().getAllVariables(),n=n.toLowerCase();for(var _,h=0;_=u[h];h++)if(_.name.toLowerCase()==n&&_.type!=l)return _;return null},s.Variables.nameUsedWithAnyType=function(n,l){l=l.getVariableMap().getAllVariables(),n=n.toLowerCase();for(var h,u=0;h=l[u];u++)if(h.name.toLowerCase()==n)return h;return null},s.Variables.generateVariableFieldDom=function(n){var l=s.utils.xml.createElement("field");return l.setAttribute("name","VAR"),l.setAttribute("id",n.getId()),l.setAttribute("variabletype",n.type),n=s.utils.xml.createTextNode(n.name),l.appendChild(n),l},s.Variables.getOrCreateVariablePackage=function(n,l,u,h){var _=s.Variables.getVariable(n,l,u,h);return _||(_=s.Variables.createVariable_(n,l,u,h)),_},s.Variables.getVariable=function(n,l,u,h){var _=n.getPotentialVariableMap(),b=null;if(l&&(!(b=n.getVariableById(l))&&_&&(b=_.getVariableById(l)),b))return b;if(u){if(null==h)throw Error("Tried to look up a variable by name without a type");!(b=n.getVariable(u,h))&&_&&(b=_.getVariable(u,h))}return b},s.Variables.createVariable_=function(n,l,u,h){var _=n.getPotentialVariableMap();return u||(u=s.Variables.generateUniqueName(n.isFlyout?n.targetWorkspace:n)),_?_.createVariable(u,h,l):n.createVariable(u,h,l)},s.Variables.getAddedVariables=function(n,l){n=n.getAllVariables();var u=[];if(l.length!=n.length)for(var h=0;h<n.length;h++){var _=n[h];-1==l.indexOf(_)&&u.push(_)}return u},s.VERSION="6.20210701.0",s.mainWorkspace=null,s.selected=null,s.draggingConnections=[],s.clipboardXml_=null,s.clipboardSource_=null,s.clipboardTypeCounts_=null,s.cache3dSupported_=null,s.parentContainer=null,s.svgSize=function(n){return s.utils.deprecation.warn("Blockly.svgSize","March 2021","March 2022","workspace.getCachedParentSvgSize"),new s.utils.Size(n.cachedWidth_,n.cachedHeight_)},s.resizeSvgContents=function(n){n.resizeContents()},s.svgResize=function(n){for(;n.options.parentWorkspace;)n=n.options.parentWorkspace;var l=n.getParentSvg(),u=n.getCachedParentSvgSize(),h=l.parentNode;if(h){var _=h.offsetWidth;h=h.offsetHeight,u.width!=_&&(l.setAttribute("width",_+"px"),n.setCachedParentSvgSize(_,null)),u.height!=h&&(l.setAttribute("height",h+"px"),n.setCachedParentSvgSize(null,h)),n.resize()}},s.onKeyDown=function(n){var l=s.mainWorkspace;l&&!(s.utils.isTargetInput(n)||l.rendered&&!l.isVisible())&&s.ShortcutRegistry.registry.onKeyDown(l,n)},s.deleteBlock=function(n){n.workspace.isFlyout||(s.Events.setGroup(!0),s.hideChaff(),n.dispose(!n.outputConnection,!0),s.Events.setGroup(!1))},s.copy=function(n){(n=n.toCopyData())&&(s.clipboardXml_=n.xml,s.clipboardSource_=n.source,s.clipboardTypeCounts_=n.typeCounts)},s.paste=function(){if(!s.clipboardXml_)return!1;var n=s.clipboardSource_;return n.isFlyout&&(n=n.targetWorkspace),!(!s.clipboardTypeCounts_||!n.isCapacityAvailable(s.clipboardTypeCounts_)||(s.Events.setGroup(!0),n.paste(s.clipboardXml_),s.Events.setGroup(!1),0))},s.duplicate=function(n){var l=s.clipboardXml_,u=s.clipboardSource_;s.copy(n),n.workspace.paste(s.clipboardXml_),s.clipboardXml_=l,s.clipboardSource_=u},s.onContextMenu_=function(n){s.utils.isTargetInput(n)||n.preventDefault()},s.hideChaff=function(n){s.Tooltip.hide(),s.WidgetDiv.hide(),s.DropDownDiv.hideWithoutAnimation();var l=!!n;s.getMainWorkspace().getComponentManager().getComponents(s.ComponentManager.Capability.AUTOHIDEABLE,!0).forEach(function(u){u.autoHide(l)})},s.getMainWorkspace=function(){return s.mainWorkspace},s.alert=function(n,l){alert(n),l&&l()},s.confirm=function(n,l){l(confirm(n))},s.prompt=function(n,l,u){u(prompt(n,l))},s.jsonInitFactory_=function(n){return function(){this.jsonInit(n)}},s.defineBlocksWithJsonArray=function(n){for(var l=0;l<n.length;l++){var u=n[l];if(u){var h=u.type;null==h||""===h?console.warn("Block definition #"+l+" in JSON array is missing a type attribute. Skipping."):(s.Blocks[h]&&console.warn("Block definition #"+l+' in JSON array overwrites prior definition of "'+h+'".'),s.Blocks[h]={init:s.jsonInitFactory_(u)})}else console.warn("Block definition #"+l+" in JSON array is "+u+". Skipping.")}},s.isNumber=function(n){return/^\s*-?\d+(\.\d+)?\s*$/.test(n)},s.hueToHex=function(n){return s.utils.colour.hsvToHex(n,s.HSV_SATURATION,255*s.HSV_VALUE)},s.checkBlockColourConstants=function(){s.checkBlockColourConstant_("LOGIC_HUE",["Blocks","logic","HUE"],void 0),s.checkBlockColourConstant_("LOGIC_HUE",["Constants","Logic","HUE"],210),s.checkBlockColourConstant_("LOOPS_HUE",["Blocks","loops","HUE"],void 0),s.checkBlockColourConstant_("LOOPS_HUE",["Constants","Loops","HUE"],120),s.checkBlockColourConstant_("MATH_HUE",["Blocks","math","HUE"],void 0),s.checkBlockColourConstant_("MATH_HUE",["Constants","Math","HUE"],230),s.checkBlockColourConstant_("TEXTS_HUE",["Blocks","texts","HUE"],void 0),s.checkBlockColourConstant_("TEXTS_HUE",["Constants","Text","HUE"],160),s.checkBlockColourConstant_("LISTS_HUE",["Blocks","lists","HUE"],void 0),s.checkBlockColourConstant_("LISTS_HUE",["Constants","Lists","HUE"],260),s.checkBlockColourConstant_("COLOUR_HUE",["Blocks","colour","HUE"],void 0),s.checkBlockColourConstant_("COLOUR_HUE",["Constants","Colour","HUE"],20),s.checkBlockColourConstant_("VARIABLES_HUE",["Blocks","variables","HUE"],void 0),s.checkBlockColourConstant_("VARIABLES_HUE",["Constants","Variables","HUE"],330),s.checkBlockColourConstant_("VARIABLES_DYNAMIC_HUE",["Constants","VariablesDynamic","HUE"],310),s.checkBlockColourConstant_("PROCEDURES_HUE",["Blocks","procedures","HUE"],void 0)},s.checkBlockColourConstant_=function(n,l,u){for(var h="Blockly",_=s,b=0;b<l.length;++b)h+="."+l[b],_&&(_=_[l[b]]);_&&_!==u&&(n=(void 0===u?'%1 has been removed. Use Blockly.Msg["%2"].':'%1 is deprecated and unused. Override Blockly.Msg["%2"].').replace("%1",h).replace("%2",n),console.warn(n))},s.setParentContainer=function(n){s.parentContainer=n},s.bindEvent_=s.browserEvents.bind,s.unbindEvent_=s.browserEvents.unbind,s.bindEventWithChecks_=s.browserEvents.conditionalBind,s.ALIGN_LEFT=s.constants.ALIGN.LEFT,s.ALIGN_CENTRE=s.constants.ALIGN.CENTRE,s.ALIGN_RIGHT=s.constants.ALIGN.RIGHT,s.INPUT_VALUE=s.connectionTypes.INPUT_VALUE,s.OUTPUT_VALUE=s.connectionTypes.OUTPUT_VALUE,s.NEXT_STATEMENT=s.connectionTypes.NEXT_STATEMENT,s.PREVIOUS_STATEMENT=s.connectionTypes.PREVIOUS_STATEMENT,s.DUMMY_INPUT=s.inputTypes.DUMMY,s.TOOLBOX_AT_TOP=s.utils.toolbox.Position.TOP,s.TOOLBOX_AT_BOTTOM=s.utils.toolbox.Position.BOTTOM,s.TOOLBOX_AT_LEFT=s.utils.toolbox.Position.LEFT,s.TOOLBOX_AT_RIGHT=s.utils.toolbox.Position.RIGHT,s.Events.BubbleOpen=function(n,l,u){s.Events.BubbleOpen.superClass_.constructor.call(this,n?n.workspace.id:void 0),this.blockId=n?n.id:null,this.isOpen=l,this.bubbleType=u},s.utils.object.inherits(s.Events.BubbleOpen,s.Events.UiBase),s.Events.BubbleOpen.prototype.type=s.Events.BUBBLE_OPEN,s.Events.BubbleOpen.prototype.toJson=function(){var n=s.Events.BubbleOpen.superClass_.toJson.call(this);return n.isOpen=this.isOpen,n.bubbleType=this.bubbleType,n.blockId=this.blockId,n},s.Events.BubbleOpen.prototype.fromJson=function(n){s.Events.BubbleOpen.superClass_.fromJson.call(this,n),this.isOpen=n.isOpen,this.bubbleType=n.bubbleType,this.blockId=n.blockId},s.registry.register(s.registry.Type.EVENT,s.Events.BUBBLE_OPEN,s.Events.BubbleOpen),s.Icon=function(n){this.block_=n,this.iconGroup_=null},s.Icon.prototype.collapseHidden=!0,s.Icon.prototype.SIZE=17,s.Icon.prototype.bubble_=null,s.Icon.prototype.iconXY_=null,s.Icon.prototype.createIcon=function(){this.iconGroup_||(this.iconGroup_=s.utils.dom.createSvgElement(s.utils.Svg.G,{class:"blocklyIconGroup"},null),this.block_.isInFlyout&&s.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly"),this.drawIcon_(this.iconGroup_),this.block_.getSvgRoot().appendChild(this.iconGroup_),s.browserEvents.conditionalBind(this.iconGroup_,"mouseup",this,this.iconClick_),this.updateEditable())},s.Icon.prototype.dispose=function(){s.utils.dom.removeNode(this.iconGroup_),this.iconGroup_=null,this.setVisible(!1),this.block_=null},s.Icon.prototype.updateEditable=function(){},s.Icon.prototype.isVisible=function(){return!!this.bubble_},s.Icon.prototype.iconClick_=function(n){this.block_.workspace.isDragging()||this.block_.isInFlyout||s.utils.isRightButton(n)||this.setVisible(!this.isVisible())},s.Icon.prototype.applyColour=function(){this.isVisible()&&this.bubble_.setColour(this.block_.style.colourPrimary)},s.Icon.prototype.setIconLocation=function(n){this.iconXY_=n,this.isVisible()&&this.bubble_.setAnchorLocation(n)},s.Icon.prototype.computeIconLocation=function(){var n=this.block_.getRelativeToSurfaceXY(),l=s.utils.getRelativeXY(this.iconGroup_);n=new s.utils.Coordinate(n.x+l.x+this.SIZE/2,n.y+l.y+this.SIZE/2),s.utils.Coordinate.equals(this.getIconLocation(),n)||this.setIconLocation(n)},s.Icon.prototype.getIconLocation=function(){return this.iconXY_},s.Icon.prototype.getCorrectedSize=function(){return new s.utils.Size(s.Icon.prototype.SIZE,s.Icon.prototype.SIZE-2)},s.Warning=function(n){s.Warning.superClass_.constructor.call(this,n),this.createIcon(),this.text_=Object.create(null)},s.utils.object.inherits(s.Warning,s.Icon),s.Warning.prototype.collapseHidden=!1,s.Warning.prototype.drawIcon_=function(n){s.utils.dom.createSvgElement(s.utils.Svg.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},n),s.utils.dom.createSvgElement(s.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},n),s.utils.dom.createSvgElement(s.utils.Svg.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},n)},s.Warning.prototype.setVisible=function(n){n!=this.isVisible()&&(s.Events.fire(new(s.Events.get(s.Events.BUBBLE_OPEN))(this.block_,n,"warning")),n?this.createBubble_():this.disposeBubble_())},s.Warning.prototype.createBubble_=function(){this.paragraphElement_=s.Bubble.textToDom(this.getText()),this.bubble_=s.Bubble.createNonEditableBubble(this.paragraphElement_,this.block_,this.iconXY_),this.applyColour()},s.Warning.prototype.disposeBubble_=function(){this.bubble_.dispose(),this.paragraphElement_=this.bubble_=null},s.Warning.prototype.setText=function(n,l){this.text_[l]!=n&&(n?this.text_[l]=n:delete this.text_[l],this.isVisible()&&(this.setVisible(!1),this.setVisible(!0)))},s.Warning.prototype.getText=function(){var l,n=[];for(l in this.text_)n.push(this.text_[l]);return n.join("\n")},s.Warning.prototype.dispose=function(){this.block_.warning=null,s.Icon.prototype.dispose.call(this)},s.Comment=function(n){s.Comment.superClass_.constructor.call(this,n),this.model_=n.commentModel,this.model_.text=this.model_.text||"",this.cachedText_="",this.onInputWrapper_=this.onChangeWrapper_=this.onWheelWrapper_=this.onMouseUpWrapper_=null,this.createIcon()},s.utils.object.inherits(s.Comment,s.Icon),s.Comment.prototype.drawIcon_=function(n){s.utils.dom.createSvgElement(s.utils.Svg.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},n),s.utils.dom.createSvgElement(s.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},n),s.utils.dom.createSvgElement(s.utils.Svg.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},n)},s.Comment.prototype.createEditor_=function(){this.foreignObject_=s.utils.dom.createSvgElement(s.utils.Svg.FOREIGNOBJECT,{x:s.Bubble.BORDER_WIDTH,y:s.Bubble.BORDER_WIDTH},null);var n=document.createElementNS(s.utils.dom.HTML_NS,"body");n.setAttribute("xmlns",s.utils.dom.HTML_NS),n.className="blocklyMinimalBody";var l=this.textarea_=document.createElementNS(s.utils.dom.HTML_NS,"textarea");return l.className="blocklyCommentTextarea",l.setAttribute("dir",this.block_.RTL?"RTL":"LTR"),l.value=this.model_.text,this.resizeTextarea_(),n.appendChild(l),this.foreignObject_.appendChild(n),this.onMouseUpWrapper_=s.browserEvents.conditionalBind(l,"mouseup",this,this.startEdit_,!0,!0),this.onWheelWrapper_=s.browserEvents.conditionalBind(l,"wheel",this,function(u){u.stopPropagation()}),this.onChangeWrapper_=s.browserEvents.conditionalBind(l,"change",this,function(u){this.cachedText_!=this.model_.text&&s.Events.fire(new(s.Events.get(s.Events.BLOCK_CHANGE))(this.block_,"comment",null,this.cachedText_,this.model_.text))}),this.onInputWrapper_=s.browserEvents.conditionalBind(l,"input",this,function(u){this.model_.text=l.value}),setTimeout(l.focus.bind(l),0),this.foreignObject_},s.Comment.prototype.updateEditable=function(){s.Comment.superClass_.updateEditable.call(this),this.isVisible()&&(this.disposeBubble_(),this.createBubble_())},s.Comment.prototype.onBubbleResize_=function(){this.isVisible()&&(this.model_.size=this.bubble_.getBubbleSize(),this.resizeTextarea_())},s.Comment.prototype.resizeTextarea_=function(){var n=this.model_.size,l=2*s.Bubble.BORDER_WIDTH,u=n.width-l;n=n.height-l,this.foreignObject_.setAttribute("width",u),this.foreignObject_.setAttribute("height",n),this.textarea_.style.width=u-4+"px",this.textarea_.style.height=n-4+"px"},s.Comment.prototype.setVisible=function(n){n!=this.isVisible()&&(s.Events.fire(new(s.Events.get(s.Events.BUBBLE_OPEN))(this.block_,n,"comment")),(this.model_.pinned=n)?this.createBubble_():this.disposeBubble_())},s.Comment.prototype.createBubble_=function(){!this.block_.isEditable()||s.utils.userAgent.IE?this.createNonEditableBubble_():this.createEditableBubble_()},s.Comment.prototype.createEditableBubble_=function(){this.bubble_=new s.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,this.model_.size.width,this.model_.size.height),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerResizeEvent(this.onBubbleResize_.bind(this)),this.applyColour()},s.Comment.prototype.createNonEditableBubble_=function(){this.paragraphElement_=s.Bubble.textToDom(this.block_.getCommentText()),this.bubble_=s.Bubble.createNonEditableBubble(this.paragraphElement_,this.block_,this.iconXY_),this.applyColour()},s.Comment.prototype.disposeBubble_=function(){this.onMouseUpWrapper_&&(s.browserEvents.unbind(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onWheelWrapper_&&(s.browserEvents.unbind(this.onWheelWrapper_),this.onWheelWrapper_=null),this.onChangeWrapper_&&(s.browserEvents.unbind(this.onChangeWrapper_),this.onChangeWrapper_=null),this.onInputWrapper_&&(s.browserEvents.unbind(this.onInputWrapper_),this.onInputWrapper_=null),this.bubble_.dispose(),this.paragraphElement_=this.foreignObject_=this.textarea_=this.bubble_=null},s.Comment.prototype.startEdit_=function(n){this.bubble_.promote()&&this.textarea_.focus(),this.cachedText_=this.model_.text},s.Comment.prototype.getBubbleSize=function(){return this.model_.size},s.Comment.prototype.setBubbleSize=function(n,l){this.bubble_?this.bubble_.setBubbleSize(n,l):(this.model_.size.width=n,this.model_.size.height=l)},s.Comment.prototype.updateText=function(){this.textarea_?this.textarea_.value=this.model_.text:this.paragraphElement_&&(this.paragraphElement_.firstChild.textContent=this.model_.text)},s.Comment.prototype.dispose=function(){this.block_.comment=null,s.Icon.prototype.dispose.call(this)},s.Css.register(".blocklyCommentTextarea {,background-color: #fef49c;,border: 0;,outline: 0;,margin: 0;,padding: 3px;,resize: none;,display: block;,text-overflow: hidden;,}".split(",")),s.IComponent=function(){},s.IDragTarget=function(){},s.DragTarget=function(){},s.DragTarget.prototype.onDragEnter=function(n){},s.DragTarget.prototype.onDragOver=function(n){},s.DragTarget.prototype.onDragExit=function(n){},s.DragTarget.prototype.onDrop=function(n){},s.DragTarget.prototype.shouldPreventMove=function(n){return!1},s.IDeleteArea=function(){},s.DeleteArea=function(){s.DeleteArea.superClass_.constructor.call(this),this.wouldDelete_=!1},s.utils.object.inherits(s.DeleteArea,s.DragTarget),s.DeleteArea.prototype.wouldDelete=function(n,l){return n instanceof s.BlockSvg?(n=!n.getParent()&&n.isDeletable(),this.updateWouldDelete_(n&&!l)):this.updateWouldDelete_(n.isDeletable()),this.wouldDelete_},s.DeleteArea.prototype.updateWouldDelete_=function(n){this.wouldDelete_=n},s.IFlyout=function(){},s.Flyout=function(n){s.Flyout.superClass_.constructor.call(this),n.setMetrics=this.setMetrics_.bind(this),this.workspace_=new s.WorkspaceSvg(n),this.workspace_.setMetricsManager(new s.FlyoutMetricsManager(this.workspace_,this)),this.workspace_.isFlyout=!0,this.workspace_.setVisible(this.isVisible_),this.id=s.utils.genUid(),this.RTL=!!n.RTL,this.horizontalLayout=!1,this.toolboxPosition_=n.toolboxPosition,this.eventWrappers_=[],this.mats_=[],this.buttons_=[],this.listeners_=[],this.permanentlyDisabled_=[],this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.targetWorkspace=null},s.utils.object.inherits(s.Flyout,s.DeleteArea),s.Flyout.prototype.autoClose=!0,s.Flyout.prototype.isVisible_=!1,s.Flyout.prototype.containerVisible_=!0,s.Flyout.prototype.CORNER_RADIUS=8,s.Flyout.prototype.MARGIN=s.Flyout.prototype.CORNER_RADIUS,s.Flyout.prototype.GAP_X=3*s.Flyout.prototype.MARGIN,s.Flyout.prototype.GAP_Y=3*s.Flyout.prototype.MARGIN,s.Flyout.prototype.SCROLLBAR_MARGIN=2.5,s.Flyout.prototype.width_=0,s.Flyout.prototype.height_=0,s.Flyout.prototype.dragAngleRange_=70,s.Flyout.prototype.createDom=function(n){return this.svgGroup_=s.utils.dom.createSvgElement(n,{class:"blocklyFlyout",style:"display: none"},null),this.svgBackground_=s.utils.dom.createSvgElement(s.utils.Svg.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_},s.Flyout.prototype.init=function(n){this.targetWorkspace=n,this.workspace_.targetWorkspace=n,this.workspace_.scrollbar=new s.ScrollbarPair(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),Array.prototype.push.apply(this.eventWrappers_,s.browserEvents.conditionalBind(this.svgGroup_,"wheel",this,this.wheel_)),this.autoClose||(this.filterWrapper_=this.filterForCapacity_.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper_)),Array.prototype.push.apply(this.eventWrappers_,s.browserEvents.conditionalBind(this.svgBackground_,"mousedown",this,this.onMouseDown_)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),n.getComponentManager().addComponent({component:this,weight:1,capabilities:[s.ComponentManager.Capability.DELETE_AREA,s.ComponentManager.Capability.DRAG_TARGET]})},s.Flyout.prototype.dispose=function(){this.hide(),this.workspace_.getComponentManager().removeComponent(this.id),s.browserEvents.unbind(this.eventWrappers_),this.filterWrapper_&&(this.targetWorkspace.removeChangeListener(this.filterWrapper_),this.filterWrapper_=null),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.targetWorkspace=null,this.workspace_.dispose(),this.workspace_=null),this.svgGroup_&&(s.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.targetWorkspace=this.svgBackground_=null},s.Flyout.prototype.getWidth=function(){return this.width_},s.Flyout.prototype.getHeight=function(){return this.height_},s.Flyout.prototype.getFlyoutScale=function(){return this.targetWorkspace.scale},s.Flyout.prototype.getWorkspace=function(){return this.workspace_},s.Flyout.prototype.isVisible=function(){return this.isVisible_},s.Flyout.prototype.setVisible=function(n){var l=n!=this.isVisible();this.isVisible_=n,l&&(this.autoClose||this.workspace_.recordDragTargets(),this.updateDisplay_())},s.Flyout.prototype.setContainerVisible=function(n){var l=n!=this.containerVisible_;this.containerVisible_=n,l&&this.updateDisplay_()},s.Flyout.prototype.updateDisplay_=function(){var n=!!this.containerVisible_&&this.isVisible();this.svgGroup_.style.display=n?"block":"none",this.workspace_.scrollbar.setContainerVisible(n)},s.Flyout.prototype.positionAt_=function(n,l,u,h){this.svgGroup_.setAttribute("width",n),this.svgGroup_.setAttribute("height",l),this.workspace_.setCachedParentSvgSize(n,l),"svg"==this.svgGroup_.tagName?s.utils.dom.setCssTransform(this.svgGroup_,"translate("+u+"px,"+h+"px)"):this.svgGroup_.setAttribute("transform","translate("+u+","+h+")"),(n=this.workspace_.scrollbar)&&(n.setOrigin(u,h),n.resize(),n.hScroll&&n.hScroll.setPosition(n.hScroll.position.x,n.hScroll.position.y),n.vScroll&&n.vScroll.setPosition(n.vScroll.position.x,n.vScroll.position.y))},s.Flyout.prototype.hide=function(){if(this.isVisible()){this.setVisible(!1);for(var l,n=0;l=this.listeners_[n];n++)s.browserEvents.unbind(l);this.listeners_.length=0,this.reflowWrapper_&&(this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowWrapper_=null)}},s.Flyout.prototype.show=function(n){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks_(),"string"==typeof n&&(n=this.getDynamicCategoryContents_(n)),this.setVisible(!0),n=s.utils.toolbox.convertFlyoutDefToJsonArray(n),n=this.createFlyoutInfo_(n),this.layout_(n.contents,n.gaps),this.listeners_.push(s.browserEvents.conditionalBind(this.svgBackground_,"mouseover",this,function(){for(var h,l=this.workspace_.getTopBlocks(!1),u=0;h=l[u];u++)h.removeSelect()})),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity_(),this.position(),this.reflowWrapper_=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper_)},s.Flyout.prototype.createFlyoutInfo_=function(n){var l=[],u=[];this.permanentlyDisabled_.length=0;for(var b,h=this.horizontalLayout?this.GAP_X:this.GAP_Y,_=0;b=n[_];_++)switch(b.custom&&(b=this.getDynamicCategoryContents_(b.custom),b=s.utils.toolbox.convertFlyoutDefToJsonArray(b),n.splice.apply(n,[_,1].concat(b)),b=n[_]),b.kind.toUpperCase()){case"BLOCK":var R=b,O=this.getBlockXml_(R);b=this.createBlock_(O),R=parseInt(R.gap||O.getAttribute("gap"),10),u.push(isNaN(R)?h:R),l.push({type:"block",block:b});break;case"SEP":this.addSeparatorGap_(b,u,h);break;case"LABEL":b=this.createButton_(b,!0),l.push({type:"button",button:b}),u.push(h);break;case"BUTTON":b=this.createButton_(b,!1),l.push({type:"button",button:b}),u.push(h)}return{contents:l,gaps:u}},s.Flyout.prototype.getDynamicCategoryContents_=function(n){if("function"!=typeof(n=this.workspace_.targetWorkspace.getToolboxCategoryCallback(n)))throw TypeError("Couldn't find a callback function when opening a toolbox category.");if(n=n(this.workspace_.targetWorkspace),!Array.isArray(n))throw new TypeError("Result of toolbox category callback must be an array.");return n},s.Flyout.prototype.createButton_=function(n,l){if(!s.FlyoutButton)throw Error("Missing require for Blockly.FlyoutButton");return new s.FlyoutButton(this.workspace_,this.targetWorkspace,n,l)},s.Flyout.prototype.createBlock_=function(n){return(n=s.Xml.domToBlock(n,this.workspace_)).isEnabled()||this.permanentlyDisabled_.push(n),n},s.Flyout.prototype.getBlockXml_=function(n){var l=null,u=n.blockxml;if(u&&"string"!=typeof u?l=u:u&&"string"==typeof u?(l=s.Xml.textToDom(u),n.blockxml=l):n.type&&((l=s.utils.xml.createElement("xml")).setAttribute("type",n.type),l.setAttribute("disabled",n.disabled),n.blockxml=l),!l)throw Error("Error: Invalid block definition. Block definition must have blockxml or type.");return l},s.Flyout.prototype.addSeparatorGap_=function(n,l,u){n=parseInt(n.gap,10),!isNaN(n)&&0<l.length?l[l.length-1]=n:l.push(u)},s.Flyout.prototype.clearOldBlocks_=function(){for(var u,n=this.workspace_.getTopBlocks(!1),l=0;u=n[l];l++)u.workspace==this.workspace_&&u.dispose(!1,!1);for(l=0;l<this.mats_.length;l++)(n=this.mats_[l])&&(s.Tooltip.unbindMouseEvents(n),s.utils.dom.removeNode(n));for(l=this.mats_.length=0;n=this.buttons_[l];l++)n.dispose();this.buttons_.length=0,this.workspace_.getPotentialVariableMap().clear()},s.Flyout.prototype.addBlockListeners_=function(n,l,u){this.listeners_.push(s.browserEvents.conditionalBind(n,"mousedown",null,this.blockMouseDown_(l))),this.listeners_.push(s.browserEvents.conditionalBind(u,"mousedown",null,this.blockMouseDown_(l))),this.listeners_.push(s.browserEvents.bind(n,"mouseenter",l,l.addSelect)),this.listeners_.push(s.browserEvents.bind(n,"mouseleave",l,l.removeSelect)),this.listeners_.push(s.browserEvents.bind(u,"mouseenter",l,l.addSelect)),this.listeners_.push(s.browserEvents.bind(u,"mouseleave",l,l.removeSelect))},s.Flyout.prototype.blockMouseDown_=function(n){var l=this;return function(u){var h=l.targetWorkspace.getGesture(u);h&&(h.setStartBlock(n),h.handleFlyoutStart(u,l))}},s.Flyout.prototype.onMouseDown_=function(n){var l=this.targetWorkspace.getGesture(n);l&&l.handleFlyoutStart(n,this)},s.Flyout.prototype.isBlockCreatable_=function(n){return n.isEnabled()},s.Flyout.prototype.createBlock=function(n){var l=null;s.Events.disable();var u=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{l=this.placeNewBlock_(n)}finally{s.Events.enable()}if(s.hideChaff(),n=s.Variables.getAddedVariables(this.targetWorkspace,u),s.Events.isEnabled()){for(s.Events.setGroup(!0),u=0;u<n.length;u++){var h=n[u];s.Events.fire(new(s.Events.get(s.Events.VAR_CREATE))(h))}s.Events.fire(new(s.Events.get(s.Events.BLOCK_CREATE))(l))}return this.autoClose?this.hide():this.filterForCapacity_(),l},s.Flyout.prototype.initFlyoutButton_=function(n,l,u){var h=n.createDom();n.moveTo(l,u),n.show(),this.listeners_.push(s.browserEvents.conditionalBind(h,"mousedown",this,this.onMouseDown_)),this.buttons_.push(n)},s.Flyout.prototype.createRect_=function(n,l,u,h,_){return(l=s.utils.dom.createSvgElement(s.utils.Svg.RECT,{"fill-opacity":0,x:l,y:u,height:h.height,width:h.width},null)).tooltip=n,s.Tooltip.bindMouseEvents(l),this.workspace_.getCanvas().insertBefore(l,n.getSvgRoot()),n.flyoutRect_=l,this.mats_[_]=l},s.Flyout.prototype.moveRectToBlock_=function(n,l){var u=l.getHeightWidth();n.setAttribute("width",u.width),n.setAttribute("height",u.height),l=l.getRelativeToSurfaceXY(),n.setAttribute("y",l.y),n.setAttribute("x",this.RTL?l.x-u.width:l.x)},s.Flyout.prototype.filterForCapacity_=function(){for(var u,n=this.workspace_.getTopBlocks(!1),l=0;u=n[l];l++)if(-1==this.permanentlyDisabled_.indexOf(u))for(var h=this.targetWorkspace.isCapacityAvailable(s.utils.getBlockTypeCounts(u));u;)u.setEnabled(h),u=u.getNextBlock()},s.Flyout.prototype.reflow=function(){this.reflowWrapper_&&this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowInternal_(),this.reflowWrapper_&&this.workspace_.addChangeListener(this.reflowWrapper_)},s.Flyout.prototype.isScrollable=function(){return!!this.workspace_.scrollbar&&this.workspace_.scrollbar.isVisible()},s.Flyout.prototype.placeNewBlock_=function(n){var l=this.targetWorkspace;if(!n.getSvgRoot())throw Error("oldBlock is not rendered.");var u=s.Xml.blockToDom(n,!0);if(l.setResizesEnabled(!1),!(u=s.Xml.domToBlock(u,l)).getSvgRoot())throw Error("block is not rendered.");var h=l.getOriginOffsetInPixels(),_=this.workspace_.getOriginOffsetInPixels();return(n=n.getRelativeToSurfaceXY()).scale(this.workspace_.scale),n=s.utils.Coordinate.sum(_,n),(h=s.utils.Coordinate.difference(n,h)).scale(1/l.scale),u.moveBy(h.x,h.y),u},s.HorizontalFlyout=function(n){s.HorizontalFlyout.superClass_.constructor.call(this,n),this.horizontalLayout=!0},s.utils.object.inherits(s.HorizontalFlyout,s.Flyout),s.HorizontalFlyout.prototype.setMetrics_=function(n){if(this.isVisible()){var l=this.workspace_.getMetricsManager(),u=l.getScrollMetrics(),h=l.getViewMetrics();l=l.getAbsoluteMetrics(),"number"==typeof n.x&&(this.workspace_.scrollX=-(u.left+(u.width-h.width)*n.x)),this.workspace_.translate(this.workspace_.scrollX+l.left,this.workspace_.scrollY+l.top)}},s.HorizontalFlyout.prototype.getX=function(){return 0},s.HorizontalFlyout.prototype.getY=function(){if(!this.isVisible())return 0;var n=this.targetWorkspace.getMetricsManager(),l=n.getAbsoluteMetrics(),u=n.getViewMetrics();n=n.getToolboxMetrics();var h=this.toolboxPosition_==s.utils.toolbox.Position.TOP;return this.targetWorkspace.toolboxPosition==this.toolboxPosition_?this.targetWorkspace.getToolbox()?h?n.height:u.height-this.height_:h?0:u.height:h?0:u.height+l.top-this.height_},s.HorizontalFlyout.prototype.position=function(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var n=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=n.width,this.setBackgroundPath_(n.width-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),n=this.getX();var l=this.getY();this.positionAt_(this.width_,this.height_,n,l)}},s.HorizontalFlyout.prototype.setBackgroundPath_=function(n,l){var u=this.toolboxPosition_==s.utils.toolbox.Position.TOP,h=["M 0,"+(u?0:this.CORNER_RADIUS)];u?(h.push("h",n+2*this.CORNER_RADIUS),h.push("v",l),h.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),h.push("h",-n),h.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(h.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),h.push("h",n),h.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),h.push("v",l),h.push("h",-n-2*this.CORNER_RADIUS)),h.push("z"),this.svgBackground_.setAttribute("d",h.join(" "))},s.HorizontalFlyout.prototype.scrollToStart=function(){this.workspace_.scrollbar.setX(this.RTL?1/0:0)},s.HorizontalFlyout.prototype.wheel_=function(n){var l=s.utils.getScrollDeltaPixels(n);if(l=l.x||l.y){var u=this.workspace_.getMetricsManager(),h=u.getScrollMetrics();l=u.getViewMetrics().left-h.left+l,this.workspace_.scrollbar.setX(l),s.WidgetDiv.hide(),s.DropDownDiv.hideWithoutAnimation()}n.preventDefault(),n.stopPropagation()},s.HorizontalFlyout.prototype.layout_=function(n,l){this.workspace_.scale=this.targetWorkspace.scale;var u=this.MARGIN,h=u+this.tabWidth_;this.RTL&&(n=n.reverse());for(var b,_=0;b=n[_];_++)if("block"==b.type){for(var H,R=(b=b.block).getDescendants(!1),O=0;H=R[O];O++)H.isInFlyout=!0;b.render(),R=b.getSvgRoot(),O=b.getHeightWidth(),H=b.outputConnection?this.tabWidth_:0,b.moveBy(H=this.RTL?h+O.width:h-H,u),H=this.createRect_(b,H,u,O,_),h+=O.width+l[_],this.addBlockListeners_(R,b,H)}else"button"==b.type&&(this.initFlyoutButton_(b.button,h,u),h+=b.button.width+l[_])},s.HorizontalFlyout.prototype.isDragTowardWorkspace=function(n){n=Math.atan2(n.y,n.x)/Math.PI*180;var l=this.dragAngleRange_;return n<90+l&&n>90-l||n>-90-l&&n<-90+l},s.HorizontalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;var n=this.svgGroup_.getBoundingClientRect(),l=n.top;return this.toolboxPosition_==s.utils.toolbox.Position.TOP?new s.utils.Rect(-1e9,l+n.height,-1e9,1e9):new s.utils.Rect(l,1e9,-1e9,1e9)},s.HorizontalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.getFlyoutScale();for(var h,n=0,l=this.workspace_.getTopBlocks(!1),u=0;h=l[u];u++)n=Math.max(n,h.getHeightWidth().height);if(n+=1.5*this.MARGIN,n*=this.workspace_.scale,this.height_!=(n+=s.Scrollbar.scrollbarThickness)){for(u=0;h=l[u];u++)h.flyoutRect_&&this.moveRectToBlock_(h.flyoutRect_,h);this.targetWorkspace.toolboxPosition!=this.toolboxPosition_||this.toolboxPosition_!=s.utils.toolbox.Position.TOP||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+n),this.height_=n,this.position(),this.targetWorkspace.recordDragTargets()}},s.registry.register(s.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,s.registry.DEFAULT,s.HorizontalFlyout),s.VerticalFlyout=function(n){s.VerticalFlyout.superClass_.constructor.call(this,n)},s.utils.object.inherits(s.VerticalFlyout,s.Flyout),s.VerticalFlyout.registryName="verticalFlyout",s.VerticalFlyout.prototype.setMetrics_=function(n){if(this.isVisible()){var l=this.workspace_.getMetricsManager(),u=l.getScrollMetrics(),h=l.getViewMetrics();l=l.getAbsoluteMetrics(),"number"==typeof n.y&&(this.workspace_.scrollY=-(u.top+(u.height-h.height)*n.y)),this.workspace_.translate(this.workspace_.scrollX+l.left,this.workspace_.scrollY+l.top)}},s.VerticalFlyout.prototype.getX=function(){if(!this.isVisible())return 0;var n=this.targetWorkspace.getMetricsManager(),l=n.getAbsoluteMetrics(),u=n.getViewMetrics();return n=n.getToolboxMetrics(),this.targetWorkspace.toolboxPosition==this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_==s.utils.toolbox.Position.LEFT?n.width:u.width-this.width_:this.toolboxPosition_==s.utils.toolbox.Position.LEFT?0:u.width:this.toolboxPosition_==s.utils.toolbox.Position.LEFT?0:u.width+l.left-this.width_},s.VerticalFlyout.prototype.getY=function(){return 0},s.VerticalFlyout.prototype.position=function(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var n=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=n.height,this.setBackgroundPath_(this.width_-this.CORNER_RADIUS,n.height-2*this.CORNER_RADIUS),n=this.getX();var l=this.getY();this.positionAt_(this.width_,this.height_,n,l)}},s.VerticalFlyout.prototype.setBackgroundPath_=function(n,l){var u=this.toolboxPosition_==s.utils.toolbox.Position.RIGHT,h=n+this.CORNER_RADIUS;(h=["M "+(u?h:0)+",0"]).push("h",u?-n:n),h.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,u?0:1,u?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),h.push("v",Math.max(0,l)),h.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,u?0:1,u?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),h.push("h",u?n:-n),h.push("z"),this.svgBackground_.setAttribute("d",h.join(" "))},s.VerticalFlyout.prototype.scrollToStart=function(){this.workspace_.scrollbar.setY(0)},s.VerticalFlyout.prototype.wheel_=function(n){var l=s.utils.getScrollDeltaPixels(n);if(l.y){var u=this.workspace_.getMetricsManager(),h=u.getScrollMetrics();l=u.getViewMetrics().top-h.top+l.y,this.workspace_.scrollbar.setY(l),s.WidgetDiv.hide(),s.DropDownDiv.hideWithoutAnimation()}n.preventDefault(),n.stopPropagation()},s.VerticalFlyout.prototype.layout_=function(n,l){this.workspace_.scale=this.targetWorkspace.scale;for(var b,u=this.MARGIN,h=this.RTL?u:u+this.tabWidth_,_=0;b=n[_];_++)if("block"==b.type){for(var H,R=(b=b.block).getDescendants(!1),O=0;H=R[O];O++)H.isInFlyout=!0;b.render(),R=b.getSvgRoot(),O=b.getHeightWidth(),b.moveBy(H=b.outputConnection?h-this.tabWidth_:h,u),H=this.createRect_(b,this.RTL?H-O.width:H,u,O,_),this.addBlockListeners_(R,b,H),u+=O.height+l[_]}else"button"==b.type&&(this.initFlyoutButton_(b.button,h,u),u+=b.button.height+l[_])},s.VerticalFlyout.prototype.isDragTowardWorkspace=function(n){n=Math.atan2(n.y,n.x)/Math.PI*180;var l=this.dragAngleRange_;return n<l&&n>-l||n<-180+l||n>180-l},s.VerticalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;var n=this.svgGroup_.getBoundingClientRect(),l=n.left;return this.toolboxPosition_==s.utils.toolbox.Position.LEFT?new s.utils.Rect(-1e9,1e9,-1e9,l+n.width):new s.utils.Rect(-1e9,1e9,l,1e9)},s.VerticalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.getFlyoutScale();for(var h,n=0,l=this.workspace_.getTopBlocks(!1),u=0;h=l[u];u++){var _=h.getHeightWidth().width;h.outputConnection&&(_-=this.tabWidth_),n=Math.max(n,_)}for(u=0;h=this.buttons_[u];u++)n=Math.max(n,h.width);if(n+=1.5*this.MARGIN+this.tabWidth_,n*=this.workspace_.scale,this.width_!=(n+=s.Scrollbar.scrollbarThickness)){for(u=0;h=l[u];u++){if(this.RTL){_=h.getRelativeToSurfaceXY().x;var b=n/this.workspace_.scale-this.MARGIN;h.outputConnection||(b-=this.tabWidth_),h.moveBy(b-_,0)}h.flyoutRect_&&this.moveRectToBlock_(h.flyoutRect_,h)}if(this.RTL)for(u=0;h=this.buttons_[u];u++)l=h.getPosition().y,h.moveTo(n/this.workspace_.scale-h.width-this.MARGIN-this.tabWidth_,l);this.targetWorkspace.toolboxPosition!=this.toolboxPosition_||this.toolboxPosition_!=s.utils.toolbox.Position.LEFT||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX+n,this.targetWorkspace.scrollY),this.width_=n,this.position(),this.targetWorkspace.recordDragTargets()}},s.registry.register(s.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,s.registry.DEFAULT,s.VerticalFlyout),s.FlyoutButton=function(n,l,u,h){this.workspace_=n,this.targetWorkspace_=l,this.text_=u.text,this.position_=new s.utils.Coordinate(0,0),this.isLabel_=h,this.callbackKey_=u.callbackKey||u.callbackkey,this.cssClass_=u["web-class"]||null,this.onMouseUpWrapper_=null,this.info=u},s.FlyoutButton.MARGIN_X=5,s.FlyoutButton.MARGIN_Y=2,s.FlyoutButton.prototype.width=0,s.FlyoutButton.prototype.height=0,s.FlyoutButton.prototype.createDom=function(){var n=this.isLabel_?"blocklyFlyoutLabel":"blocklyFlyoutButton";if(this.cssClass_&&(n+=" "+this.cssClass_),this.svgGroup_=s.utils.dom.createSvgElement(s.utils.Svg.G,{class:n},this.workspace_.getCanvas()),!this.isLabel_)var l=s.utils.dom.createSvgElement(s.utils.Svg.RECT,{class:"blocklyFlyoutButtonShadow",rx:4,ry:4,x:1,y:1},this.svgGroup_);n=s.utils.dom.createSvgElement(s.utils.Svg.RECT,{class:this.isLabel_?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:4,ry:4},this.svgGroup_);var u=s.utils.dom.createSvgElement(s.utils.Svg.TEXT,{class:this.isLabel_?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup_),h=s.utils.replaceMessageReferences(this.text_);this.workspace_.RTL&&(h+="\u200f"),u.textContent=h,this.isLabel_&&(this.svgText_=u,this.workspace_.getThemeManager().subscribe(this.svgText_,"flyoutForegroundColour","fill"));var _=s.utils.style.getComputedStyle(u,"fontSize"),b=s.utils.style.getComputedStyle(u,"fontWeight"),R=s.utils.style.getComputedStyle(u,"fontFamily");return this.width=s.utils.dom.getFastTextWidthWithSizeString(u,_,b,R),h=s.utils.dom.measureFontMetrics(h,_,b,R),this.height=h.height,this.isLabel_||(this.width+=2*s.FlyoutButton.MARGIN_X,this.height+=2*s.FlyoutButton.MARGIN_Y,l.setAttribute("width",this.width),l.setAttribute("height",this.height)),n.setAttribute("width",this.width),n.setAttribute("height",this.height),u.setAttribute("x",this.width/2),u.setAttribute("y",this.height/2-h.height/2+h.baseline),this.updateTransform_(),this.onMouseUpWrapper_=s.browserEvents.conditionalBind(this.svgGroup_,"mouseup",this,this.onMouseUp_),this.svgGroup_},s.FlyoutButton.prototype.show=function(){this.updateTransform_(),this.svgGroup_.setAttribute("display","block")},s.FlyoutButton.prototype.updateTransform_=function(){this.svgGroup_.setAttribute("transform","translate("+this.position_.x+","+this.position_.y+")")},s.FlyoutButton.prototype.moveTo=function(n,l){this.position_.x=n,this.position_.y=l,this.updateTransform_()},s.FlyoutButton.prototype.isLabel=function(){return this.isLabel_},s.FlyoutButton.prototype.getPosition=function(){return this.position_},s.FlyoutButton.prototype.getButtonText=function(){return this.text_},s.FlyoutButton.prototype.getTargetWorkspace=function(){return this.targetWorkspace_},s.FlyoutButton.prototype.dispose=function(){this.onMouseUpWrapper_&&s.browserEvents.unbind(this.onMouseUpWrapper_),this.svgGroup_&&s.utils.dom.removeNode(this.svgGroup_),this.svgText_&&this.workspace_.getThemeManager().unsubscribe(this.svgText_)},s.FlyoutButton.prototype.onMouseUp_=function(n){(n=this.targetWorkspace_.getGesture(n))&&n.cancel(),this.isLabel_&&this.callbackKey_?console.warn("Labels should not have callbacks. Label text: "+this.text_):this.isLabel_||this.callbackKey_&&this.targetWorkspace_.getButtonCallback(this.callbackKey_)?this.isLabel_||this.targetWorkspace_.getButtonCallback(this.callbackKey_)(this):console.warn("Buttons should have callbacks. Button text: "+this.text_)},s.Css.register(".blocklyFlyoutButton {,fill: #888;,cursor: default;,},.blocklyFlyoutButtonShadow {,fill: #666;,},.blocklyFlyoutButton:hover {,fill: #aaa;,},.blocklyFlyoutLabel {,cursor: default;,},.blocklyFlyoutLabelBackground {,opacity: 0;,}".split(",")),s.Generator=function(n){this.name_=n,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")},s.Generator.prototype.INFINITE_LOOP_TRAP=null,s.Generator.prototype.STATEMENT_PREFIX=null,s.Generator.prototype.STATEMENT_SUFFIX=null,s.Generator.prototype.INDENT="  ",s.Generator.prototype.COMMENT_WRAP=60,s.Generator.prototype.ORDER_OVERRIDES=[],s.Generator.prototype.isInitialized=null,s.Generator.prototype.workspaceToCode=function(n){n||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),n=s.getMainWorkspace());var l=[];this.init(n),n=n.getTopBlocks(!0);for(var h,u=0;h=n[u];u++){var _=this.blockToCode(h);Array.isArray(_)&&(_=_[0]),_&&(h.outputConnection&&(_=this.scrubNakedValue(_),this.STATEMENT_PREFIX&&!h.suppressPrefixSuffix&&(_=this.injectId(this.STATEMENT_PREFIX,h)+_),this.STATEMENT_SUFFIX&&!h.suppressPrefixSuffix&&(_+=this.injectId(this.STATEMENT_SUFFIX,h))),l.push(_))}return l=l.join("\n"),(l=(l=(l=this.finish(l)).replace(/^\s+\n/,"")).replace(/\n\s+$/,"\n")).replace(/[ \t]+\n/g,"\n")},s.Generator.prototype.prefixLines=function(n,l){return l+n.replace(/(?!\n$)\n/g,"\n"+l)},s.Generator.prototype.allNestedComments=function(n){var l=[];n=n.getDescendants(!0);for(var u=0;u<n.length;u++){var h=n[u].getCommentText();h&&l.push(h)}return l.length&&l.push(""),l.join("\n")},s.Generator.prototype.blockToCode=function(n,l){if(!1===this.isInitialized&&console.warn("Generator init was not called before blockToCode was called."),!n)return"";if(!n.isEnabled())return l?"":this.blockToCode(n.getNextBlock());if(n.isInsertionMarker())return l?"":this.blockToCode(n.getChildren(!1)[0]);var u=this[n.type];if("function"!=typeof u)throw Error('Language "'+this.name_+'" does not know how to generate code for block type "'+n.type+'".');if(u=u.call(n,n),Array.isArray(u)){if(!n.outputConnection)throw TypeError("Expecting string from statement block: "+n.type);return[this.scrub_(n,u[0],l),u[1]]}if("string"==typeof u)return this.STATEMENT_PREFIX&&!n.suppressPrefixSuffix&&(u=this.injectId(this.STATEMENT_PREFIX,n)+u),this.STATEMENT_SUFFIX&&!n.suppressPrefixSuffix&&(u+=this.injectId(this.STATEMENT_SUFFIX,n)),this.scrub_(n,u,l);if(null===u)return"";throw SyntaxError("Invalid code generated: "+u)},s.Generator.prototype.valueToCode=function(n,l,u){if(isNaN(u))throw TypeError("Expecting valid order from block: "+n.type);var h=n.getInputTargetBlock(l);if(!h||""===(l=this.blockToCode(h)))return"";if(!Array.isArray(l))throw TypeError("Expecting tuple from value block: "+h.type);if(n=l[0],l=l[1],isNaN(l))throw TypeError("Expecting valid order from value block: "+h.type);if(!n)return"";h=!1;var _=Math.floor(u),b=Math.floor(l);if(_<=b&&(_!=b||0!=_&&99!=_))for(h=!0,_=0;_<this.ORDER_OVERRIDES.length;_++)if(this.ORDER_OVERRIDES[_][0]==u&&this.ORDER_OVERRIDES[_][1]==l){h=!1;break}return h&&(n="("+n+")"),n},s.Generator.prototype.statementToCode=function(n,l){if(n=n.getInputTargetBlock(l),"string"!=typeof(l=this.blockToCode(n)))throw TypeError("Expecting code from statement block: "+(n&&n.type));return l&&(l=this.prefixLines(l,this.INDENT)),l},s.Generator.prototype.addLoopTrap=function(n,l){return this.INFINITE_LOOP_TRAP&&(n=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,l),this.INDENT)+n),this.STATEMENT_SUFFIX&&!l.suppressPrefixSuffix&&(n=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,l),this.INDENT)+n),this.STATEMENT_PREFIX&&!l.suppressPrefixSuffix&&(n+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,l),this.INDENT)),n},s.Generator.prototype.injectId=function(n,l){return l=l.id.replace(/\$/g,"$$$$"),n.replace(/%1/g,"'"+l+"'")},s.Generator.prototype.RESERVED_WORDS_="",s.Generator.prototype.addReservedWords=function(n){this.RESERVED_WORDS_+=n+","},s.Generator.prototype.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",Object.defineProperty(s.Generator.prototype,"variableDB_",{get:function(){return s.utils.deprecation.warn("variableDB_","May 2021","May 2026","nameDB_"),this.nameDB_},set:function(n){s.utils.deprecation.warn("variableDB_","May 2021","May 2026","nameDB_"),this.nameDB_=n}}),s.Generator.prototype.provideFunction_=function(n,l){if(!this.definitions_[n]){var h,u=this.nameDB_.getDistinctName(n,s.PROCEDURE_CATEGORY_NAME);for(this.functionNames_[n]=u,l=l.join("\n").replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,u);h!=l;)h=l,l=l.replace(/^(( {2})*) {2}/gm,"$1\0");l=l.replace(/\0/g,this.INDENT),this.definitions_[n]=l}return this.functionNames_[n]},s.Generator.prototype.init=function(n){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)},s.Generator.prototype.scrub_=function(n,l,u){return l},s.Generator.prototype.finish=function(n){return delete this.definitions_,delete this.functionNames_,n},s.Generator.prototype.scrubNakedValue=function(n){return n},s.IToolboxItem=function(){},s.ISelectableToolboxItem=function(){},s.ICollapsibleToolboxItem=function(){},s.ToolboxItem=function(n,l,u){this.id_=n.toolboxitemid||s.utils.IdGenerator.getNextUniqueId(),this.level_=(this.parent_=u||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=n,this.parentToolbox_=l,this.workspace_=this.parentToolbox_.getWorkspace()},s.ToolboxItem.prototype.init=function(){},s.ToolboxItem.prototype.getDiv=function(){return null},s.ToolboxItem.prototype.getId=function(){return this.id_},s.ToolboxItem.prototype.getParent=function(){return null},s.ToolboxItem.prototype.getLevel=function(){return this.level_},s.ToolboxItem.prototype.isSelectable=function(){return!1},s.ToolboxItem.prototype.isCollapsible=function(){return!1},s.ToolboxItem.prototype.dispose=function(){},s.ToolboxCategory=function(n,l,u){s.ToolboxCategory.superClass_.constructor.call(this,n,l,u),this.name_=s.utils.replaceMessageReferences(n.name),this.colour_=this.getColour_(n),this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.cssConfig_=this.makeDefaultCssConfig_(),s.utils.object.mixin(this.cssConfig_,n.cssconfig||n.cssConfig),this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.parseContents_(n)},s.utils.object.inherits(s.ToolboxCategory,s.ToolboxItem),s.ToolboxCategory.registrationName="category",s.ToolboxCategory.nestedPadding=19,s.ToolboxCategory.borderWidth=8,s.ToolboxCategory.defaultBackgroundColour="#57e",s.ToolboxCategory.prototype.makeDefaultCssConfig_=function(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}},s.ToolboxCategory.prototype.parseContents_=function(n){var l=n.contents;if(n.custom)this.flyoutItems_=n.custom;else if(l){n=0;for(var u;u=l[n];n++)this.flyoutItems_.push(u)}},s.ToolboxCategory.prototype.init=function(){this.createDom_(),"true"==this.toolboxItemDef_.hidden&&this.hide()},s.ToolboxCategory.prototype.createDom_=function(){return this.htmlDiv_=this.createContainer_(),s.utils.aria.setRole(this.htmlDiv_,s.utils.aria.Role.TREEITEM),s.utils.aria.setState(this.htmlDiv_,s.utils.aria.State.SELECTED,!1),s.utils.aria.setState(this.htmlDiv_,s.utils.aria.State.LEVEL,this.level_),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),s.utils.aria.setRole(this.iconDom_,s.utils.aria.Role.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_),s.utils.aria.setState(this.htmlDiv_,s.utils.aria.State.LABELLEDBY,this.labelDom_.getAttribute("id")),this.addColourBorder_(this.colour_),this.htmlDiv_},s.ToolboxCategory.prototype.createContainer_=function(){var n=document.createElement("div");return s.utils.dom.addClass(n,this.cssConfig_.container),n},s.ToolboxCategory.prototype.createRowContainer_=function(){var n=document.createElement("div");s.utils.dom.addClass(n,this.cssConfig_.row);var l=s.ToolboxCategory.nestedPadding*this.getLevel();return l=l.toString()+"px",this.workspace_.RTL?n.style.paddingRight=l:n.style.paddingLeft=l,n},s.ToolboxCategory.prototype.createRowContentsContainer_=function(){var n=document.createElement("div");return s.utils.dom.addClass(n,this.cssConfig_.rowcontentcontainer),n},s.ToolboxCategory.prototype.createIconDom_=function(){var n=document.createElement("span");return this.parentToolbox_.isHorizontal()||s.utils.dom.addClass(n,this.cssConfig_.icon),n.style.display="inline-block",n},s.ToolboxCategory.prototype.createLabelDom_=function(n){var l=document.createElement("span");return l.setAttribute("id",this.getId()+".label"),l.textContent=n,s.utils.dom.addClass(l,this.cssConfig_.label),l},s.ToolboxCategory.prototype.refreshTheme=function(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)},s.ToolboxCategory.prototype.addColourBorder_=function(n){n&&(n=s.ToolboxCategory.borderWidth+"px solid "+(n||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=n:this.rowDiv_.style.borderLeft=n)},s.ToolboxCategory.prototype.getColour_=function(n){var l=n.categorystyle||n.categoryStyle;return(n=n.colour)&&l?(console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour'),""):l?this.getColourfromStyle_(l):this.parseColour_(n)},s.ToolboxCategory.prototype.getColourfromStyle_=function(n){var l=this.workspace_.getTheme();if(n&&l){if((l=l.categoryStyles[n])&&l.colour)return this.parseColour_(l.colour);console.warn('Style "'+n+'" must exist and contain a colour value')}return""},s.ToolboxCategory.prototype.getClickTarget=function(){return this.rowDiv_},s.ToolboxCategory.prototype.parseColour_=function(n){if(null==(n=s.utils.replaceMessageReferences(n))||""===n)return"";var l=Number(n);return isNaN(l)?(l=s.utils.colour.parse(n))?l:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+n),""):s.hueToHex(l)},s.ToolboxCategory.prototype.openIcon_=function(n){n&&(s.utils.dom.removeClasses(n,this.cssConfig_.closedicon),s.utils.dom.addClass(n,this.cssConfig_.openicon))},s.ToolboxCategory.prototype.closeIcon_=function(n){n&&(s.utils.dom.removeClasses(n,this.cssConfig_.openicon),s.utils.dom.addClass(n,this.cssConfig_.closedicon))},s.ToolboxCategory.prototype.setVisible_=function(n){this.htmlDiv_.style.display=n?"block":"none",this.isHidden_=!n,this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()},s.ToolboxCategory.prototype.hide=function(){this.setVisible_(!1)},s.ToolboxCategory.prototype.show=function(){this.setVisible_(!0)},s.ToolboxCategory.prototype.isVisible=function(){return!this.isHidden_&&this.allAncestorsExpanded_()},s.ToolboxCategory.prototype.allAncestorsExpanded_=function(){for(var n=this;n.getParent();)if(!(n=n.getParent()).isExpanded())return!1;return!0},s.ToolboxCategory.prototype.isSelectable=function(){return this.isVisible()&&!this.isDisabled_},s.ToolboxCategory.prototype.onClick=function(n){},s.ToolboxCategory.prototype.setSelected=function(n){if(n){var l=this.parseColour_(s.ToolboxCategory.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||l,s.utils.dom.addClass(this.rowDiv_,this.cssConfig_.selected)}else this.rowDiv_.style.backgroundColor="",s.utils.dom.removeClass(this.rowDiv_,this.cssConfig_.selected);s.utils.aria.setState(this.htmlDiv_,s.utils.aria.State.SELECTED,n)},s.ToolboxCategory.prototype.setDisabled=function(n){this.isDisabled_=n,this.getDiv().setAttribute("disabled",n),n?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")},s.ToolboxCategory.prototype.getName=function(){return this.name_},s.ToolboxCategory.prototype.getParent=function(){return this.parent_},s.ToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},s.ToolboxCategory.prototype.getContents=function(){return this.flyoutItems_},s.ToolboxCategory.prototype.updateFlyoutContents=function(n){this.flyoutItems_=[],"string"==typeof n?this.toolboxItemDef_.custom=n:(delete this.toolboxItemDef_.custom,this.toolboxItemDef_.contents=s.utils.toolbox.convertFlyoutDefToJsonArray(n)),this.parseContents_(this.toolboxItemDef_)},s.ToolboxCategory.prototype.dispose=function(){s.utils.dom.removeNode(this.htmlDiv_)},s.Css.register([".blocklyTreeRow:not(.blocklyTreeSelected):hover {","background-color: rgba(255, 255, 255, 0.2);","}",'.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {',"margin: 1px 5px 1px 0;","}",'.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {',"margin: 1px 0 1px 5px;","}",".blocklyTreeRow {","height: 22px;","line-height: 22px;","margin-bottom: 3px;","padding-right: 8px;","white-space: nowrap;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {',"margin-left: 8px;","padding-right: 0px","}",".blocklyTreeIcon {","background-image: url(<<<PATH>>>/sprites.png);","height: 16px;","vertical-align: middle;","visibility: hidden;","width: 16px;","}",".blocklyTreeIconClosed {","background-position: -32px -1px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {',"background-position: 0 -1px;","}",".blocklyTreeSelected>.blocklyTreeIconClosed {","background-position: -32px -17px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {',"background-position: 0 -17px;","}",".blocklyTreeIconOpen {","background-position: -16px -1px;","}",".blocklyTreeSelected>.blocklyTreeIconOpen {","background-position: -16px -17px;","}",".blocklyTreeLabel {","cursor: default;","font: 16px sans-serif;","padding: 0 3px;","vertical-align: middle;","}",".blocklyToolboxDelete .blocklyTreeLabel {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyTreeSelected .blocklyTreeLabel {","color: #fff;","}"]),s.registry.register(s.registry.Type.TOOLBOX_ITEM,s.ToolboxCategory.registrationName,s.ToolboxCategory),s.ToolboxSeparator=function(n,l){s.ToolboxSeparator.superClass_.constructor.call(this,n,l),this.cssConfig_={container:"blocklyTreeSeparator"},s.utils.object.mixin(this.cssConfig_,n.cssconfig||n.cssConfig)},s.utils.object.inherits(s.ToolboxSeparator,s.ToolboxItem),s.ToolboxSeparator.registrationName="sep",s.ToolboxSeparator.prototype.init=function(){this.createDom_()},s.ToolboxSeparator.prototype.createDom_=function(){var n=document.createElement("div");return s.utils.dom.addClass(n,this.cssConfig_.container),this.htmlDiv_=n},s.ToolboxSeparator.prototype.getDiv=function(){return this.htmlDiv_},s.ToolboxSeparator.prototype.dispose=function(){s.utils.dom.removeNode(this.htmlDiv_)},s.Css.register('.blocklyTreeSeparator {,border-bottom: solid #e5e5e5 1px;,height: 0;,margin: 5px 0;,},.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {,border-right: solid #e5e5e5 1px;,border-bottom: none;,height: auto;,margin: 0 5px 0 5px;,padding: 5px 0;,width: 0;,}'.split(",")),s.registry.register(s.registry.Type.TOOLBOX_ITEM,s.ToolboxSeparator.registrationName,s.ToolboxSeparator),s.CollapsibleToolboxCategory=function(n,l,u){this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[],s.CollapsibleToolboxCategory.superClass_.constructor.call(this,n,l,u)},s.utils.object.inherits(s.CollapsibleToolboxCategory,s.ToolboxCategory),s.CollapsibleToolboxCategory.registrationName="collapsibleCategory",s.CollapsibleToolboxCategory.prototype.makeDefaultCssConfig_=function(){var n=s.CollapsibleToolboxCategory.superClass_.makeDefaultCssConfig_.call(this);return n.contents="blocklyToolboxContents",n},s.CollapsibleToolboxCategory.prototype.parseContents_=function(n){var l=n.contents,u=!0;if(n.custom)this.flyoutItems_=n.custom;else if(l){n=0;for(var h;h=l[n];n++)!s.registry.hasItem(s.registry.Type.TOOLBOX_ITEM,h.kind)||h.kind.toLowerCase()==s.ToolboxSeparator.registrationName&&u?(this.flyoutItems_.push(h),u=!0):(this.createToolboxItem_(h),u=!1)}},s.CollapsibleToolboxCategory.prototype.createToolboxItem_=function(n){var l=n.kind;"CATEGORY"==l.toUpperCase()&&s.utils.toolbox.isCategoryCollapsible(n)&&(l=s.CollapsibleToolboxCategory.registrationName),n=new(s.registry.getClass(s.registry.Type.TOOLBOX_ITEM,l))(n,this.parentToolbox_,this),this.toolboxItems_.push(n)},s.CollapsibleToolboxCategory.prototype.init=function(){s.CollapsibleToolboxCategory.superClass_.init.call(this),this.setExpanded("true"==this.toolboxItemDef_.expanded||this.toolboxItemDef_.expanded)},s.CollapsibleToolboxCategory.prototype.createDom_=function(){s.CollapsibleToolboxCategory.superClass_.createDom_.call(this);var n=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(n),s.utils.aria.setRole(this.subcategoriesDiv_,s.utils.aria.Role.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.htmlDiv_},s.CollapsibleToolboxCategory.prototype.createIconDom_=function(){var n=document.createElement("span");return this.parentToolbox_.isHorizontal()||(s.utils.dom.addClass(n,this.cssConfig_.icon),n.style.visibility="visible"),n.style.display="inline-block",n},s.CollapsibleToolboxCategory.prototype.createSubCategoriesDom_=function(n){var l=document.createElement("div");s.utils.dom.addClass(l,this.cssConfig_.contents);for(var u=0;u<n.length;u++){var h=n[u];h.init();var _=h.getDiv();l.appendChild(_),h.getClickTarget&&h.getClickTarget().setAttribute("id",h.getId())}return l},s.CollapsibleToolboxCategory.prototype.setExpanded=function(n){this.expanded_!=n&&((this.expanded_=n)?(this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_)):(this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)),s.utils.aria.setState(this.htmlDiv_,s.utils.aria.State.EXPANDED,n),this.parentToolbox_.handleToolboxItemResize())},s.CollapsibleToolboxCategory.prototype.setVisible_=function(n){this.htmlDiv_.style.display=n?"block":"none";for(var u,l=0;u=this.getChildToolboxItems()[l];l++)u.setVisible_(n);this.isHidden_=!n,this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()},s.CollapsibleToolboxCategory.prototype.isExpanded=function(){return this.expanded_},s.CollapsibleToolboxCategory.prototype.isCollapsible=function(){return!0},s.CollapsibleToolboxCategory.prototype.onClick=function(n){this.toggleExpanded()},s.CollapsibleToolboxCategory.prototype.toggleExpanded=function(){this.setExpanded(!this.expanded_)},s.CollapsibleToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},s.CollapsibleToolboxCategory.prototype.getChildToolboxItems=function(){return this.toolboxItems_},s.registry.register(s.registry.Type.TOOLBOX_ITEM,s.CollapsibleToolboxCategory.registrationName,s.CollapsibleToolboxCategory),s.Events.ToolboxItemSelect=function(n,l,u){s.Events.ToolboxItemSelect.superClass_.constructor.call(this,u),this.oldItem=n,this.newItem=l},s.utils.object.inherits(s.Events.ToolboxItemSelect,s.Events.UiBase),s.Events.ToolboxItemSelect.prototype.type=s.Events.TOOLBOX_ITEM_SELECT,s.Events.ToolboxItemSelect.prototype.toJson=function(){var n=s.Events.ToolboxItemSelect.superClass_.toJson.call(this);return n.oldItem=this.oldItem,n.newItem=this.newItem,n},s.Events.ToolboxItemSelect.prototype.fromJson=function(n){s.Events.ToolboxItemSelect.superClass_.fromJson.call(this,n),this.oldItem=n.oldItem,this.newItem=n.newItem},s.registry.register(s.registry.Type.EVENT,s.Events.TOOLBOX_ITEM_SELECT,s.Events.ToolboxItemSelect),s.IAutoHideable=function(){},s.IStyleable=function(){},s.IToolbox=function(){},s.Toolbox=function(n){s.Toolbox.superClass_.constructor.call(this),this.workspace_=n,this.id="toolbox",this.toolboxDef_=n.options.languageTree||{contents:[]},this.horizontalLayout_=n.options.horizontalLayout,this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.contents_=[],this.height_=this.width_=0,this.RTL=n.options.RTL,this.flyout_=null,this.contentMap_=Object.create(null),this.toolboxPosition=n.options.toolboxPosition,this.previouslySelectedItem_=this.selectedItem_=null,this.boundEvents_=[]},s.utils.object.inherits(s.Toolbox,s.DeleteArea),s.Toolbox.prototype.onShortcut=function(n){return!1},s.Toolbox.prototype.init=function(){var n=this.workspace_,l=n.getParentSvg();this.flyout_=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),s.utils.dom.insertAfter(this.flyout_.createDom("svg"),l),this.setVisible(!0),this.flyout_.init(n),this.render(this.toolboxDef_),(n=n.getThemeManager()).subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),n.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[s.ComponentManager.Capability.AUTOHIDEABLE,s.ComponentManager.Capability.DELETE_AREA,s.ComponentManager.Capability.DRAG_TARGET]})},s.Toolbox.prototype.createDom_=function(n){n=n.getParentSvg();var l=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,s.utils.aria.setRole(this.contentsDiv_,s.utils.aria.Role.TREE),l.appendChild(this.contentsDiv_),n.parentNode.insertBefore(l,n),this.attachEvents_(l,this.contentsDiv_),l},s.Toolbox.prototype.createContainer_=function(){var n=document.createElement("div");return n.setAttribute("layout",this.isHorizontal()?"h":"v"),s.utils.dom.addClass(n,"blocklyToolboxDiv"),s.utils.dom.addClass(n,"blocklyNonSelectable"),n.setAttribute("dir",this.RTL?"RTL":"LTR"),n},s.Toolbox.prototype.createContentsContainer_=function(){var n=document.createElement("div");return s.utils.dom.addClass(n,"blocklyToolboxContents"),this.isHorizontal()&&(n.style.flexDirection="row"),n},s.Toolbox.prototype.attachEvents_=function(n,l){n=s.browserEvents.conditionalBind(n,"click",this,this.onClick_,!1,!0),this.boundEvents_.push(n),l=s.browserEvents.conditionalBind(l,"keydown",this,this.onKeyDown_,!1,!0),this.boundEvents_.push(l)},s.Toolbox.prototype.onClick_=function(n){if(s.utils.isRightButton(n)||n.target==this.HtmlDiv)s.hideChaff(!1);else{var l=n.target.getAttribute("id");l&&(l=this.getToolboxItemById(l)).isSelectable()&&(this.setSelectedItem(l),l.onClick(n)),s.hideChaff(!0)}s.Touch.clearTouchIdentifier()},s.Toolbox.prototype.onKeyDown_=function(n){var l=!1;switch(n.keyCode){case s.utils.KeyCodes.DOWN:l=this.selectNext_();break;case s.utils.KeyCodes.UP:l=this.selectPrevious_();break;case s.utils.KeyCodes.LEFT:l=this.selectParent_();break;case s.utils.KeyCodes.RIGHT:l=this.selectChild_();break;case s.utils.KeyCodes.ENTER:case s.utils.KeyCodes.SPACE:this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),l=!0);break;default:l=!1}!l&&this.selectedItem_&&this.selectedItem_.onKeyDown&&(l=this.selectedItem_.onKeyDown(n)),l&&n.preventDefault()},s.Toolbox.prototype.createFlyout_=function(){var n=this.workspace_,l=new s.Options({parentWorkspace:n,rtl:n.RTL,oneBasedIndex:n.options.oneBasedIndex,horizontalLayout:n.horizontalLayout,renderer:n.options.renderer,rendererOverrides:n.options.rendererOverrides,move:{scrollbars:!0}});return l.toolboxPosition=n.options.toolboxPosition,new(s.registry.getClassFromOptions(n.horizontalLayout?s.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX:s.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,n.options,!0))(l)},s.Toolbox.prototype.render=function(n){this.toolboxDef_=n;for(var l=0;l<this.contents_.length;l++){var u=this.contents_[l];u&&u.dispose()}this.contents_=[],this.contentMap_=Object.create(null),this.renderContents_(n.contents),this.position(),this.handleToolboxItemResize()},s.Toolbox.prototype.renderContents_=function(n){for(var h,l=document.createDocumentFragment(),u=0;h=n[u];u++)this.createToolboxItem_(h,l);this.contentsDiv_.appendChild(l)},s.Toolbox.prototype.createToolboxItem_=function(n,l){var u=n.kind;"CATEGORY"==u.toUpperCase()&&s.utils.toolbox.isCategoryCollapsible(n)&&(u=s.CollapsibleToolboxCategory.registrationName),(u=s.registry.getClass(s.registry.Type.TOOLBOX_ITEM,u.toLowerCase()))&&(n=new u(n,this),this.addToolboxItem_(n),n.init(),(u=n.getDiv())&&l.appendChild(u),n.getClickTarget&&n.getClickTarget().setAttribute("id",n.getId()))},s.Toolbox.prototype.addToolboxItem_=function(n){if(this.contents_.push(n),this.contentMap_[n.getId()]=n,n.isCollapsible())for(var u,l=0;u=n.getChildToolboxItems()[l];l++)this.addToolboxItem_(u)},s.Toolbox.prototype.getToolboxItems=function(){return this.contents_},s.Toolbox.prototype.addStyle=function(n){s.utils.dom.addClass(this.HtmlDiv,n)},s.Toolbox.prototype.removeStyle=function(n){s.utils.dom.removeClass(this.HtmlDiv,n)},s.Toolbox.prototype.getClientRect=function(){if(!this.HtmlDiv||!this.isVisible_)return null;var n=this.HtmlDiv.getBoundingClientRect(),l=n.top,u=l+n.height,h=n.left;return n=h+n.width,this.toolboxPosition==s.utils.toolbox.Position.TOP?new s.utils.Rect(-1e7,u,-1e7,1e7):this.toolboxPosition==s.utils.toolbox.Position.BOTTOM?new s.utils.Rect(l,1e7,-1e7,1e7):this.toolboxPosition==s.utils.toolbox.Position.LEFT?new s.utils.Rect(-1e7,1e7,-1e7,n):new s.utils.Rect(-1e7,1e7,h,1e7)},s.Toolbox.prototype.wouldDelete=function(n,l){return this.updateWouldDelete_(n instanceof s.BlockSvg?!n.getParent()&&n.isDeletable():n.isDeletable()),this.wouldDelete_},s.Toolbox.prototype.onDragEnter=function(n){this.updateCursorDeleteStyle_(!0)},s.Toolbox.prototype.onDragExit=function(n){this.updateCursorDeleteStyle_(!1)},s.Toolbox.prototype.onDrop=function(n){this.updateCursorDeleteStyle_(!1)},s.Toolbox.prototype.updateWouldDelete_=function(n){n!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=n,this.updateCursorDeleteStyle_(!0))},s.Toolbox.prototype.updateCursorDeleteStyle_=function(n){var l=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";n?this.addStyle(l):this.removeStyle(l)},s.Toolbox.prototype.getToolboxItemById=function(n){return this.contentMap_[n]||null},s.Toolbox.prototype.getWidth=function(){return this.width_},s.Toolbox.prototype.getHeight=function(){return this.height_},s.Toolbox.prototype.getFlyout=function(){return this.flyout_},s.Toolbox.prototype.getWorkspace=function(){return this.workspace_},s.Toolbox.prototype.getSelectedItem=function(){return this.selectedItem_},s.Toolbox.prototype.getPreviouslySelectedItem=function(){return this.previouslySelectedItem_},s.Toolbox.prototype.isHorizontal=function(){return this.horizontalLayout_},s.Toolbox.prototype.position=function(){var n=this.workspace_.getMetrics(),l=this.HtmlDiv;l&&(this.horizontalLayout_?(l.style.left="0",l.style.height="auto",l.style.width="100%",this.height_=l.offsetHeight,this.width_=n.viewWidth,this.toolboxPosition==s.utils.toolbox.Position.TOP?l.style.top="0":l.style.bottom="0"):(this.toolboxPosition==s.utils.toolbox.Position.RIGHT?l.style.right="0":l.style.left="0",l.style.height="100%",this.width_=l.offsetWidth,this.height_=n.viewHeight),this.flyout_.position())},s.Toolbox.prototype.handleToolboxItemResize=function(){var n=this.workspace_,l=this.HtmlDiv.getBoundingClientRect();n.translate(this.toolboxPosition==s.utils.toolbox.Position.LEFT?n.scrollX+l.width:n.scrollX,this.toolboxPosition==s.utils.toolbox.Position.TOP?n.scrollY+l.height:n.scrollY),s.svgResize(n)},s.Toolbox.prototype.clearSelection=function(){this.setSelectedItem(null)},s.Toolbox.prototype.refreshTheme=function(){for(var n=0;n<this.contents_.length;n++){var l=this.contents_[n];l.refreshTheme&&l.refreshTheme()}},s.Toolbox.prototype.refreshSelection=function(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout_.show(this.selectedItem_.getContents())},s.Toolbox.prototype.setVisible=function(n){this.isVisible_!==n&&(this.HtmlDiv.style.display=n?"block":"none",this.isVisible_=n,this.workspace_.recordDragTargets())},s.Toolbox.prototype.autoHide=function(n){!n&&this.flyout_&&this.flyout_.autoClose&&this.clearSelection()},s.Toolbox.prototype.setSelectedItem=function(n){var l=this.selectedItem_;!n&&!l||n&&!n.isSelectable()||(this.shouldDeselectItem_(l,n)&&null!=l&&this.deselectItem_(l),this.shouldSelectItem_(l,n)&&null!=n&&this.selectItem_(l,n),this.updateFlyout_(l,n),this.fireSelectEvent_(l,n))},s.Toolbox.prototype.shouldDeselectItem_=function(n,l){return null!=n&&(!n.isCollapsible()||n!=l)},s.Toolbox.prototype.shouldSelectItem_=function(n,l){return null!=l&&l!=n},s.Toolbox.prototype.deselectItem_=function(n){this.selectedItem_=null,this.previouslySelectedItem_=n,n.setSelected(!1),s.utils.aria.setState(this.contentsDiv_,s.utils.aria.State.ACTIVEDESCENDANT,"")},s.Toolbox.prototype.selectItem_=function(n,l){this.selectedItem_=l,this.previouslySelectedItem_=n,l.setSelected(!0),s.utils.aria.setState(this.contentsDiv_,s.utils.aria.State.ACTIVEDESCENDANT,l.getId())},s.Toolbox.prototype.selectItemByPosition=function(n){-1<n&&n<this.contents_.length&&(n=this.contents_[n]).isSelectable()&&this.setSelectedItem(n)},s.Toolbox.prototype.updateFlyout_=function(n,l){(n!=l||l.isCollapsible())&&l&&l.getContents().length?(this.flyout_.show(l.getContents()),this.flyout_.scrollToStart()):this.flyout_.hide()},s.Toolbox.prototype.fireSelectEvent_=function(n,l){var u=n&&n.getName(),h=l&&l.getName();n==l&&(h=null),n=new(s.Events.get(s.Events.TOOLBOX_ITEM_SELECT))(u,h,this.workspace_.id),s.Events.fire(n)},s.Toolbox.prototype.selectParent_=function(){return!(!this.selectedItem_||(this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.setExpanded(!1),0):!this.selectedItem_.getParent()||!this.selectedItem_.getParent().isSelectable()||(this.setSelectedItem(this.selectedItem_.getParent()),0)))},s.Toolbox.prototype.selectChild_=function(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;var n=this.selectedItem_;return n.isExpanded()?this.selectNext_():n.setExpanded(!0),!0},s.Toolbox.prototype.selectNext_=function(){if(!this.selectedItem_)return!1;var n=this.contents_.indexOf(this.selectedItem_)+1;if(-1<n&&n<this.contents_.length){for(var l=this.contents_[n];l&&!l.isSelectable();)l=this.contents_[++n];if(l&&l.isSelectable())return this.setSelectedItem(l),!0}return!1},s.Toolbox.prototype.selectPrevious_=function(){if(!this.selectedItem_)return!1;var n=this.contents_.indexOf(this.selectedItem_)-1;if(-1<n&&n<this.contents_.length){for(var l=this.contents_[n];l&&!l.isSelectable();)l=this.contents_[--n];if(l&&l.isSelectable())return this.setSelectedItem(l),!0}return!1},s.Toolbox.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout_.dispose();for(var n=0;n<this.contents_.length;n++)this.contents_[n].dispose();for(n=0;n<this.boundEvents_.length;n++)s.browserEvents.unbind(this.boundEvents_[n]);this.boundEvents_=[],this.contents_=[],this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),s.utils.dom.removeNode(this.HtmlDiv)},s.Css.register([".blocklyToolboxDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyToolboxGrab {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyToolboxDiv {","background-color: #ddd;","overflow-x: visible;","overflow-y: auto;","padding: 4px 0 4px 0;","position: absolute;","z-index: 70;","-webkit-tap-highlight-color: transparent;","}",".blocklyToolboxContents {","display: flex;","flex-wrap: wrap;","flex-direction: column;","}",".blocklyToolboxContents:focus {","outline: none;","}"]),s.registry.register(s.registry.Type.TOOLBOX,s.registry.DEFAULT,s.Toolbox),s.Events.TrashcanOpen=function(n,l){s.Events.TrashcanOpen.superClass_.constructor.call(this,l),this.isOpen=n},s.utils.object.inherits(s.Events.TrashcanOpen,s.Events.UiBase),s.Events.TrashcanOpen.prototype.type=s.Events.TRASHCAN_OPEN,s.Events.TrashcanOpen.prototype.toJson=function(){var n=s.Events.TrashcanOpen.superClass_.toJson.call(this);return n.isOpen=this.isOpen,n},s.Events.TrashcanOpen.prototype.fromJson=function(n){s.Events.TrashcanOpen.superClass_.fromJson.call(this,n),this.isOpen=n.isOpen},s.registry.register(s.registry.Type.EVENT,s.Events.TRASHCAN_OPEN,s.Events.TrashcanOpen),s.IPositionable=function(){},s.uiPosition={},s.uiPosition.verticalPosition={TOP:0,BOTTOM:1},s.uiPosition.horizontalPosition={LEFT:0,RIGHT:1},s.uiPosition.bumpDirection={UP:0,DOWN:1},s.uiPosition.getStartPositionRect=function(n,l,u,h,_,b){var R=b.scrollbar&&b.scrollbar.canScrollVertically();return n.horizontal===s.uiPosition.horizontalPosition.LEFT?(u=_.absoluteMetrics.left+u,R&&b.RTL&&(u+=s.Scrollbar.scrollbarThickness)):(u=_.absoluteMetrics.left+_.viewMetrics.width-l.width-u,R&&!b.RTL&&(u-=s.Scrollbar.scrollbarThickness)),n.vertical===s.uiPosition.verticalPosition.TOP?n=_.absoluteMetrics.top+h:(n=_.absoluteMetrics.top+_.viewMetrics.height-l.height-h,b.scrollbar&&b.scrollbar.canScrollHorizontally()&&(n-=s.Scrollbar.scrollbarThickness)),new s.utils.Rect(n,n+l.height,u,u+l.width)},s.uiPosition.getCornerOppositeToolbox=function(n,l){return{horizontal:l.toolboxMetrics.position===s.utils.toolbox.Position.LEFT||n.horizontalLayout&&!n.RTL?s.uiPosition.horizontalPosition.RIGHT:s.uiPosition.horizontalPosition.LEFT,vertical:l.toolboxMetrics.position===s.utils.toolbox.Position.BOTTOM?s.uiPosition.verticalPosition.TOP:s.uiPosition.verticalPosition.BOTTOM}},s.uiPosition.bumpPositionRect=function(n,l,u,h){for(var H,_=n.left,b=n.right-n.left,R=n.bottom-n.top,O=0;H=h[O];O++)n.intersects(H)&&(n=new s.utils.Rect(n=u===s.uiPosition.bumpDirection.UP?H.top-R-l:H.bottom+l,n+R,_,_+b),O=-1);return n},s.Trashcan=function(n){s.Trashcan.superClass_.constructor.call(this),this.workspace_=n,this.id="trashcan",this.contents_=[],this.flyout=null,0>=this.workspace_.options.maxTrashcanContents||(n=new s.Options({scrollbars:!0,parentWorkspace:this.workspace_,rtl:this.workspace_.RTL,oneBasedIndex:this.workspace_.options.oneBasedIndex,renderer:this.workspace_.options.renderer,rendererOverrides:this.workspace_.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace_.horizontalLayout?(n.toolboxPosition=this.workspace_.toolboxPosition==s.utils.toolbox.Position.TOP?s.utils.toolbox.Position.BOTTOM:s.utils.toolbox.Position.TOP,this.flyout=new(s.registry.getClassFromOptions(s.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace_.options,!0))(n)):(n.toolboxPosition=this.workspace_.toolboxPosition==s.utils.toolbox.Position.RIGHT?s.utils.toolbox.Position.LEFT:s.utils.toolbox.Position.RIGHT,this.flyout=new(s.registry.getClassFromOptions(s.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,this.workspace_.options,!0))(n)),this.workspace_.addChangeListener(this.onDelete_.bind(this)))},s.utils.object.inherits(s.Trashcan,s.DeleteArea),s.Trashcan.prototype.WIDTH_=47,s.Trashcan.prototype.BODY_HEIGHT_=44,s.Trashcan.prototype.LID_HEIGHT_=16,s.Trashcan.prototype.MARGIN_VERTICAL_=20,s.Trashcan.prototype.MARGIN_HORIZONTAL_=20,s.Trashcan.prototype.MARGIN_HOTSPOT_=10,s.Trashcan.prototype.SPRITE_LEFT_=0,s.Trashcan.prototype.SPRITE_TOP_=32,s.Trashcan.prototype.HAS_BLOCKS_LID_ANGLE_=.1,s.Trashcan.ANIMATION_LENGTH_=80,s.Trashcan.ANIMATION_FRAMES_=4,s.Trashcan.OPACITY_MIN_=.4,s.Trashcan.OPACITY_MAX_=.8,s.Trashcan.MAX_LID_ANGLE_=45,s.Trashcan.prototype.isLidOpen=!1,s.Trashcan.prototype.minOpenness_=0,s.Trashcan.prototype.svgGroup_=null,s.Trashcan.prototype.svgLid_=null,s.Trashcan.prototype.lidTask_=0,s.Trashcan.prototype.lidOpen_=0,s.Trashcan.prototype.left_=0,s.Trashcan.prototype.top_=0,s.Trashcan.prototype.initialized_=!1,s.Trashcan.prototype.createDom=function(){this.svgGroup_=s.utils.dom.createSvgElement(s.utils.Svg.G,{class:"blocklyTrash"},null);var n=String(Math.random()).substring(2),l=s.utils.dom.createSvgElement(s.utils.Svg.CLIPPATH,{id:"blocklyTrashBodyClipPath"+n},this.svgGroup_);s.utils.dom.createSvgElement(s.utils.Svg.RECT,{width:this.WIDTH_,height:this.BODY_HEIGHT_,y:this.LID_HEIGHT_},l);var u=s.utils.dom.createSvgElement(s.utils.Svg.IMAGE,{width:s.SPRITE.width,x:-this.SPRITE_LEFT_,height:s.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashBodyClipPath"+n+")"},this.svgGroup_);return u.setAttributeNS(s.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+s.SPRITE.url),l=s.utils.dom.createSvgElement(s.utils.Svg.CLIPPATH,{id:"blocklyTrashLidClipPath"+n},this.svgGroup_),s.utils.dom.createSvgElement(s.utils.Svg.RECT,{width:this.WIDTH_,height:this.LID_HEIGHT_},l),this.svgLid_=s.utils.dom.createSvgElement(s.utils.Svg.IMAGE,{width:s.SPRITE.width,x:-this.SPRITE_LEFT_,height:s.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashLidClipPath"+n+")"},this.svgGroup_),this.svgLid_.setAttributeNS(s.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+s.SPRITE.url),s.browserEvents.bind(this.svgGroup_,"mousedown",this,this.blockMouseDownWhenOpenable_),s.browserEvents.bind(this.svgGroup_,"mouseup",this,this.click),s.browserEvents.bind(u,"mouseover",this,this.mouseOver_),s.browserEvents.bind(u,"mouseout",this,this.mouseOut_),this.animateLid_(),this.svgGroup_},s.Trashcan.prototype.init=function(){0<this.workspace_.options.maxTrashcanContents&&(s.utils.dom.insertAfter(this.flyout.createDom(s.utils.Svg.SVG),this.workspace_.getParentSvg()),this.flyout.init(this.workspace_)),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[s.ComponentManager.Capability.AUTOHIDEABLE,s.ComponentManager.Capability.DELETE_AREA,s.ComponentManager.Capability.DRAG_TARGET,s.ComponentManager.Capability.POSITIONABLE]}),this.initialized_=!0,this.setLidOpen(!1)},s.Trashcan.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("trashcan"),this.svgGroup_&&(s.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.workspace_=this.svgLid_=null,clearTimeout(this.lidTask_)},s.Trashcan.prototype.hasContents_=function(){return!!this.contents_.length},s.Trashcan.prototype.contentsIsOpen=function(){return this.flyout.isVisible()},s.Trashcan.prototype.openFlyout=function(){if(!this.contentsIsOpen()){var n=this.contents_.map(s.Xml.textToDom);this.flyout.show(n),this.fireUiEvent_(!0)}},s.Trashcan.prototype.closeFlyout=function(){this.contentsIsOpen()&&(this.flyout.hide(),this.fireUiEvent_(!1))},s.Trashcan.prototype.autoHide=function(n){!n&&this.flyout&&this.closeFlyout()},s.Trashcan.prototype.emptyContents=function(){this.hasContents_()&&(this.contents_.length=0,this.setMinOpenness_(0),this.closeFlyout())},s.Trashcan.prototype.position=function(n,l){if(this.initialized_){var u=s.uiPosition.getCornerOppositeToolbox(this.workspace_,n);n=s.uiPosition.getStartPositionRect(u,new s.utils.Size(this.WIDTH_,this.BODY_HEIGHT_+this.LID_HEIGHT_),this.MARGIN_HORIZONTAL_,this.MARGIN_VERTICAL_,n,this.workspace_),l=s.uiPosition.bumpPositionRect(n,this.MARGIN_VERTICAL_,u.vertical===s.uiPosition.verticalPosition.TOP?s.uiPosition.bumpDirection.DOWN:s.uiPosition.bumpDirection.UP,l),this.top_=l.top,this.left_=l.left,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}},s.Trashcan.prototype.getBoundingRectangle=function(){return new s.utils.Rect(this.top_,this.top_+this.BODY_HEIGHT_+this.LID_HEIGHT_,this.left_,this.left_+this.WIDTH_)},s.Trashcan.prototype.getClientRect=function(){if(!this.svgGroup_)return null;var n=this.svgGroup_.getBoundingClientRect(),l=n.top+this.SPRITE_TOP_-this.MARGIN_HOTSPOT_;return new s.utils.Rect(l,l+this.LID_HEIGHT_+this.BODY_HEIGHT_+2*this.MARGIN_HOTSPOT_,n=n.left+this.SPRITE_LEFT_-this.MARGIN_HOTSPOT_,n+this.WIDTH_+2*this.MARGIN_HOTSPOT_)},s.Trashcan.prototype.onDragOver=function(n){this.setLidOpen(this.wouldDelete_)},s.Trashcan.prototype.onDragExit=function(n){this.setLidOpen(!1)},s.Trashcan.prototype.onDrop=function(n){setTimeout(this.setLidOpen.bind(this,!1),100)},s.Trashcan.prototype.setLidOpen=function(n){this.isLidOpen!=n&&(clearTimeout(this.lidTask_),this.isLidOpen=n,this.animateLid_())},s.Trashcan.prototype.animateLid_=function(){var n=s.Trashcan.ANIMATION_FRAMES_,l=1/(n+1);this.lidOpen_+=this.isLidOpen?l:-l,this.lidOpen_=Math.min(Math.max(this.lidOpen_,this.minOpenness_),1),this.setLidAngle_(this.lidOpen_*s.Trashcan.MAX_LID_ANGLE_),this.svgGroup_.style.opacity=(l=s.Trashcan.OPACITY_MIN_)+this.lidOpen_*(s.Trashcan.OPACITY_MAX_-l),this.lidOpen_>this.minOpenness_&&1>this.lidOpen_&&(this.lidTask_=setTimeout(this.animateLid_.bind(this),s.Trashcan.ANIMATION_LENGTH_/n))},s.Trashcan.prototype.setLidAngle_=function(n){var l=this.workspace_.toolboxPosition==s.utils.toolbox.Position.RIGHT||this.workspace_.horizontalLayout&&this.workspace_.RTL;this.svgLid_.setAttribute("transform","rotate("+(l?-n:n)+","+(l?4:this.WIDTH_-4)+","+(this.LID_HEIGHT_-2)+")")},s.Trashcan.prototype.setMinOpenness_=function(n){this.minOpenness_=n,this.isLidOpen||this.setLidAngle_(n*s.Trashcan.MAX_LID_ANGLE_)},s.Trashcan.prototype.closeLid=function(){this.setLidOpen(!1)},s.Trashcan.prototype.click=function(){this.hasContents_()&&this.openFlyout()},s.Trashcan.prototype.fireUiEvent_=function(n){n=new(s.Events.get(s.Events.TRASHCAN_OPEN))(n,this.workspace_.id),s.Events.fire(n)},s.Trashcan.prototype.blockMouseDownWhenOpenable_=function(n){!this.contentsIsOpen()&&this.hasContents_()&&n.stopPropagation()},s.Trashcan.prototype.mouseOver_=function(){this.hasContents_()&&this.setLidOpen(!0)},s.Trashcan.prototype.mouseOut_=function(){this.setLidOpen(!1)},s.Trashcan.prototype.onDelete_=function(n){if(!(0>=this.workspace_.options.maxTrashcanContents)&&n.type==s.Events.BLOCK_DELETE&&n.oldXml.tagName&&"shadow"!=n.oldXml.tagName.toLowerCase()&&(n=this.cleanBlockXML_(n.oldXml),-1==this.contents_.indexOf(n))){for(this.contents_.unshift(n);this.contents_.length>this.workspace_.options.maxTrashcanContents;)this.contents_.pop();this.setMinOpenness_(this.HAS_BLOCKS_LID_ANGLE_)}},s.Trashcan.prototype.cleanBlockXML_=function(n){for(var l=n=n.cloneNode(!0);l;){l.removeAttribute&&(l.removeAttribute("x"),l.removeAttribute("y"),l.removeAttribute("id"),l.removeAttribute("disabled"),"comment"==l.nodeName&&(l.removeAttribute("h"),l.removeAttribute("w"),l.removeAttribute("pinned")));var u=l.firstChild||l.nextSibling;if(!u)for(u=l.parentNode;u;){if(u.nextSibling){u=u.nextSibling;break}u=u.parentNode}l=u}return s.Xml.domToText(n)},s.VariablesDynamic={},s.VariablesDynamic.onCreateVariableButtonClick_String=function(n){s.Variables.createVariableButtonHandler(n.getTargetWorkspace(),void 0,"String")},s.VariablesDynamic.onCreateVariableButtonClick_Number=function(n){s.Variables.createVariableButtonHandler(n.getTargetWorkspace(),void 0,"Number")},s.VariablesDynamic.onCreateVariableButtonClick_Colour=function(n){s.Variables.createVariableButtonHandler(n.getTargetWorkspace(),void 0,"Colour")},s.VariablesDynamic.flyoutCategory=function(n){var l=[],u=document.createElement("button");return u.setAttribute("text",s.Msg.NEW_STRING_VARIABLE),u.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),l.push(u),(u=document.createElement("button")).setAttribute("text",s.Msg.NEW_NUMBER_VARIABLE),u.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),l.push(u),(u=document.createElement("button")).setAttribute("text",s.Msg.NEW_COLOUR_VARIABLE),u.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),l.push(u),n.registerButtonCallback("CREATE_VARIABLE_STRING",s.VariablesDynamic.onCreateVariableButtonClick_String),n.registerButtonCallback("CREATE_VARIABLE_NUMBER",s.VariablesDynamic.onCreateVariableButtonClick_Number),n.registerButtonCallback("CREATE_VARIABLE_COLOUR",s.VariablesDynamic.onCreateVariableButtonClick_Colour),n=s.VariablesDynamic.flyoutCategoryBlocks(n),l.concat(n)},s.VariablesDynamic.flyoutCategoryBlocks=function(n){var l=[];if(0<(n=n.getAllVariables()).length){if(s.Blocks.variables_set_dynamic){var u=n[n.length-1],h=s.utils.xml.createElement("block");h.setAttribute("type","variables_set_dynamic"),h.setAttribute("gap",24),h.appendChild(s.Variables.generateVariableFieldDom(u)),l.push(h)}if(s.Blocks.variables_get_dynamic){n.sort(s.VariableModel.compareByName),u=0;for(var _;_=n[u];u++)(h=s.utils.xml.createElement("block")).setAttribute("type","variables_get_dynamic"),h.setAttribute("gap",8),h.appendChild(s.Variables.generateVariableFieldDom(_)),l.push(h)}}return l},s.ZoomControls=function(n){this.workspace_=n,this.id="zoomControls",this.zoomResetGroup_=this.zoomOutGroup_=this.zoomInGroup_=this.onZoomOutWrapper_=this.onZoomInWrapper_=this.onZoomResetWrapper_=null},s.ZoomControls.prototype.WIDTH_=32,s.ZoomControls.prototype.HEIGHT_=32,s.ZoomControls.prototype.SMALL_SPACING_=2,s.ZoomControls.prototype.LARGE_SPACING_=11,s.ZoomControls.prototype.MARGIN_VERTICAL_=20,s.ZoomControls.prototype.MARGIN_HORIZONTAL_=20,s.ZoomControls.prototype.svgGroup_=null,s.ZoomControls.prototype.left_=0,s.ZoomControls.prototype.top_=0,s.ZoomControls.prototype.initialized_=!1,s.ZoomControls.prototype.createDom=function(){this.svgGroup_=s.utils.dom.createSvgElement(s.utils.Svg.G,{},null);var n=String(Math.random()).substring(2);return this.createZoomOutSvg_(n),this.createZoomInSvg_(n),this.workspace_.isMovable()&&this.createZoomResetSvg_(n),this.svgGroup_},s.ZoomControls.prototype.init=function(){this.workspace_.getComponentManager().addComponent({component:this,weight:2,capabilities:[s.ComponentManager.Capability.POSITIONABLE]}),this.initialized_=!0},s.ZoomControls.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("zoomControls"),this.svgGroup_&&s.utils.dom.removeNode(this.svgGroup_),this.onZoomResetWrapper_&&s.browserEvents.unbind(this.onZoomResetWrapper_),this.onZoomInWrapper_&&s.browserEvents.unbind(this.onZoomInWrapper_),this.onZoomOutWrapper_&&s.browserEvents.unbind(this.onZoomOutWrapper_)},s.ZoomControls.prototype.getBoundingRectangle=function(){var n=this.SMALL_SPACING_+2*this.HEIGHT_;return this.zoomResetGroup_&&(n+=this.LARGE_SPACING_+this.HEIGHT_),new s.utils.Rect(this.top_,this.top_+n,this.left_,this.left_+this.WIDTH_)},s.ZoomControls.prototype.position=function(n,l){if(this.initialized_){var u=s.uiPosition.getCornerOppositeToolbox(this.workspace_,n),h=this.SMALL_SPACING_+2*this.HEIGHT_;this.zoomResetGroup_&&(h+=this.LARGE_SPACING_+this.HEIGHT_),n=s.uiPosition.getStartPositionRect(u,new s.utils.Size(this.WIDTH_,h),this.MARGIN_HORIZONTAL_,this.MARGIN_VERTICAL_,n,this.workspace_),l=s.uiPosition.bumpPositionRect(n,this.MARGIN_VERTICAL_,(u=u.vertical)===s.uiPosition.verticalPosition.TOP?s.uiPosition.bumpDirection.DOWN:s.uiPosition.bumpDirection.UP,l),u===s.uiPosition.verticalPosition.TOP?(this.zoomInGroup_.setAttribute("transform","translate(0, "+(u=this.SMALL_SPACING_+this.HEIGHT_)+")"),this.zoomResetGroup_&&this.zoomResetGroup_.setAttribute("transform","translate(0, "+(u+this.LARGE_SPACING_+this.HEIGHT_)+")")):(this.zoomInGroup_.setAttribute("transform","translate(0, "+(u=this.zoomResetGroup_?this.LARGE_SPACING_+this.HEIGHT_:0)+")"),this.zoomOutGroup_.setAttribute("transform","translate(0, "+(u+this.SMALL_SPACING_+this.HEIGHT_)+")")),this.top_=l.top,this.left_=l.left,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}},s.ZoomControls.prototype.createZoomOutSvg_=function(n){this.zoomOutGroup_=s.utils.dom.createSvgElement(s.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var l=s.utils.dom.createSvgElement(s.utils.Svg.CLIPPATH,{id:"blocklyZoomoutClipPath"+n},this.zoomOutGroup_);s.utils.dom.createSvgElement(s.utils.Svg.RECT,{width:32,height:32},l),s.utils.dom.createSvgElement(s.utils.Svg.IMAGE,{width:s.SPRITE.width,height:s.SPRITE.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+n+")"},this.zoomOutGroup_).setAttributeNS(s.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+s.SPRITE.url),this.onZoomOutWrapper_=s.browserEvents.conditionalBind(this.zoomOutGroup_,"mousedown",null,this.zoom_.bind(this,-1))},s.ZoomControls.prototype.createZoomInSvg_=function(n){this.zoomInGroup_=s.utils.dom.createSvgElement(s.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var l=s.utils.dom.createSvgElement(s.utils.Svg.CLIPPATH,{id:"blocklyZoominClipPath"+n},this.zoomInGroup_);s.utils.dom.createSvgElement(s.utils.Svg.RECT,{width:32,height:32},l),s.utils.dom.createSvgElement(s.utils.Svg.IMAGE,{width:s.SPRITE.width,height:s.SPRITE.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+n+")"},this.zoomInGroup_).setAttributeNS(s.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+s.SPRITE.url),this.onZoomInWrapper_=s.browserEvents.conditionalBind(this.zoomInGroup_,"mousedown",null,this.zoom_.bind(this,1))},s.ZoomControls.prototype.zoom_=function(n,l){this.workspace_.markFocused(),this.workspace_.zoomCenter(n),this.fireZoomEvent_(),s.Touch.clearTouchIdentifier(),l.stopPropagation(),l.preventDefault()},s.ZoomControls.prototype.createZoomResetSvg_=function(n){this.zoomResetGroup_=s.utils.dom.createSvgElement(s.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var l=s.utils.dom.createSvgElement(s.utils.Svg.CLIPPATH,{id:"blocklyZoomresetClipPath"+n},this.zoomResetGroup_);s.utils.dom.createSvgElement(s.utils.Svg.RECT,{width:32,height:32},l),s.utils.dom.createSvgElement(s.utils.Svg.IMAGE,{width:s.SPRITE.width,height:s.SPRITE.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+n+")"},this.zoomResetGroup_).setAttributeNS(s.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+s.SPRITE.url),this.onZoomResetWrapper_=s.browserEvents.conditionalBind(this.zoomResetGroup_,"mousedown",null,this.resetZoom_.bind(this))},s.ZoomControls.prototype.resetZoom_=function(n){this.workspace_.markFocused();var l=Math.log(this.workspace_.options.zoomOptions.startScale/this.workspace_.scale)/Math.log(this.workspace_.options.zoomOptions.scaleSpeed);this.workspace_.beginCanvasTransition(),this.workspace_.zoomCenter(l),this.workspace_.scrollCenter(),setTimeout(this.workspace_.endCanvasTransition.bind(this.workspace_),500),this.fireZoomEvent_(),s.Touch.clearTouchIdentifier(),n.stopPropagation(),n.preventDefault()},s.ZoomControls.prototype.fireZoomEvent_=function(){var n=new(s.Events.get(s.Events.CLICK))(null,this.workspace_.id,"zoom_controls");s.Events.fire(n)},s.Css.register([".blocklyZoom>image, .blocklyZoom>svg>image {","opacity: .4;","}",".blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {","opacity: .6;","}",".blocklyZoom>image:active, .blocklyZoom>svg>image:active {","opacity: .8;","}"]),s.ShortcutItems={},s.ShortcutItems.names={ESCAPE:"escape",DELETE:"delete",COPY:"copy",CUT:"cut",PASTE:"paste",UNDO:"undo",REDO:"redo"},s.ShortcutItems.registerEscape=function(){var n={name:s.ShortcutItems.names.ESCAPE,preconditionFn:function(l){return!l.options.readOnly},callback:function(){return s.hideChaff(),!0}};s.ShortcutRegistry.registry.register(n),s.ShortcutRegistry.registry.addKeyMapping(s.utils.KeyCodes.ESC,n.name)},s.ShortcutItems.registerDelete=function(){var n={name:s.ShortcutItems.names.DELETE,preconditionFn:function(l){return!l.options.readOnly&&s.selected&&s.selected.isDeletable()},callback:function(l,u){return u.preventDefault(),!s.Gesture.inProgress()&&(s.deleteBlock(s.selected),!0)}};s.ShortcutRegistry.registry.register(n),s.ShortcutRegistry.registry.addKeyMapping(s.utils.KeyCodes.DELETE,n.name),s.ShortcutRegistry.registry.addKeyMapping(s.utils.KeyCodes.BACKSPACE,n.name)},s.ShortcutItems.registerCopy=function(){var n={name:s.ShortcutItems.names.COPY,preconditionFn:function(u){return!u.options.readOnly&&!s.Gesture.inProgress()&&s.selected&&s.selected.isDeletable()&&s.selected.isMovable()},callback:function(u,h){return h.preventDefault(),s.hideChaff(),s.copy(s.selected),!0}};s.ShortcutRegistry.registry.register(n);var l=s.ShortcutRegistry.registry.createSerializedKey(s.utils.KeyCodes.C,[s.utils.KeyCodes.CTRL]);s.ShortcutRegistry.registry.addKeyMapping(l,n.name),l=s.ShortcutRegistry.registry.createSerializedKey(s.utils.KeyCodes.C,[s.utils.KeyCodes.ALT]),s.ShortcutRegistry.registry.addKeyMapping(l,n.name),l=s.ShortcutRegistry.registry.createSerializedKey(s.utils.KeyCodes.C,[s.utils.KeyCodes.META]),s.ShortcutRegistry.registry.addKeyMapping(l,n.name)},s.ShortcutItems.registerCut=function(){var n={name:s.ShortcutItems.names.CUT,preconditionFn:function(u){return!u.options.readOnly&&!s.Gesture.inProgress()&&s.selected&&s.selected.isDeletable()&&s.selected.isMovable()&&!s.selected.workspace.isFlyout},callback:function(){return s.copy(s.selected),s.deleteBlock(s.selected),!0}};s.ShortcutRegistry.registry.register(n);var l=s.ShortcutRegistry.registry.createSerializedKey(s.utils.KeyCodes.X,[s.utils.KeyCodes.CTRL]);s.ShortcutRegistry.registry.addKeyMapping(l,n.name),l=s.ShortcutRegistry.registry.createSerializedKey(s.utils.KeyCodes.X,[s.utils.KeyCodes.ALT]),s.ShortcutRegistry.registry.addKeyMapping(l,n.name),l=s.ShortcutRegistry.registry.createSerializedKey(s.utils.KeyCodes.X,[s.utils.KeyCodes.META]),s.ShortcutRegistry.registry.addKeyMapping(l,n.name)},s.ShortcutItems.registerPaste=function(){var n={name:s.ShortcutItems.names.PASTE,preconditionFn:function(u){return!u.options.readOnly&&!s.Gesture.inProgress()},callback:function(){return s.paste()}};s.ShortcutRegistry.registry.register(n);var l=s.ShortcutRegistry.registry.createSerializedKey(s.utils.KeyCodes.V,[s.utils.KeyCodes.CTRL]);s.ShortcutRegistry.registry.addKeyMapping(l,n.name),l=s.ShortcutRegistry.registry.createSerializedKey(s.utils.KeyCodes.V,[s.utils.KeyCodes.ALT]),s.ShortcutRegistry.registry.addKeyMapping(l,n.name),l=s.ShortcutRegistry.registry.createSerializedKey(s.utils.KeyCodes.V,[s.utils.KeyCodes.META]),s.ShortcutRegistry.registry.addKeyMapping(l,n.name)},s.ShortcutItems.registerUndo=function(){var n={name:s.ShortcutItems.names.UNDO,preconditionFn:function(u){return!u.options.readOnly&&!s.Gesture.inProgress()},callback:function(u){return s.hideChaff(),u.undo(!1),!0}};s.ShortcutRegistry.registry.register(n);var l=s.ShortcutRegistry.registry.createSerializedKey(s.utils.KeyCodes.Z,[s.utils.KeyCodes.CTRL]);s.ShortcutRegistry.registry.addKeyMapping(l,n.name),l=s.ShortcutRegistry.registry.createSerializedKey(s.utils.KeyCodes.Z,[s.utils.KeyCodes.ALT]),s.ShortcutRegistry.registry.addKeyMapping(l,n.name),l=s.ShortcutRegistry.registry.createSerializedKey(s.utils.KeyCodes.Z,[s.utils.KeyCodes.META]),s.ShortcutRegistry.registry.addKeyMapping(l,n.name)},s.ShortcutItems.registerRedo=function(){var n={name:s.ShortcutItems.names.REDO,preconditionFn:function(u){return!s.Gesture.inProgress()&&!u.options.readOnly},callback:function(u){return s.hideChaff(),u.undo(!0),!0}};s.ShortcutRegistry.registry.register(n);var l=s.ShortcutRegistry.registry.createSerializedKey(s.utils.KeyCodes.Z,[s.utils.KeyCodes.SHIFT,s.utils.KeyCodes.CTRL]);s.ShortcutRegistry.registry.addKeyMapping(l,n.name),l=s.ShortcutRegistry.registry.createSerializedKey(s.utils.KeyCodes.Z,[s.utils.KeyCodes.SHIFT,s.utils.KeyCodes.ALT]),s.ShortcutRegistry.registry.addKeyMapping(l,n.name),l=s.ShortcutRegistry.registry.createSerializedKey(s.utils.KeyCodes.Z,[s.utils.KeyCodes.SHIFT,s.utils.KeyCodes.META]),s.ShortcutRegistry.registry.addKeyMapping(l,n.name),l=s.ShortcutRegistry.registry.createSerializedKey(s.utils.KeyCodes.Y,[s.utils.KeyCodes.CTRL]),s.ShortcutRegistry.registry.addKeyMapping(l,n.name)},s.ShortcutItems.registerDefaultShortcuts=function(){s.ShortcutItems.registerEscape(),s.ShortcutItems.registerDelete(),s.ShortcutItems.registerCopy(),s.ShortcutItems.registerCut(),s.ShortcutItems.registerPaste(),s.ShortcutItems.registerUndo(),s.ShortcutItems.registerRedo()},s.ShortcutItems.registerDefaultShortcuts(),s.ContextMenuItems={},s.ContextMenuItems.registerUndo=function(){s.ContextMenuRegistry.registry.register({displayText:function(){return s.Msg.UNDO},preconditionFn:function(n){return 0<n.workspace.getUndoStack().length?"enabled":"disabled"},callback:function(n){n.workspace.undo(!1)},scopeType:s.ContextMenuRegistry.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},s.ContextMenuItems.registerRedo=function(){s.ContextMenuRegistry.registry.register({displayText:function(){return s.Msg.REDO},preconditionFn:function(n){return 0<n.workspace.getRedoStack().length?"enabled":"disabled"},callback:function(n){n.workspace.undo(!0)},scopeType:s.ContextMenuRegistry.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},s.ContextMenuItems.registerCleanup=function(){s.ContextMenuRegistry.registry.register({displayText:function(){return s.Msg.CLEAN_UP},preconditionFn:function(n){return n.workspace.isMovable()?1<n.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden"},callback:function(n){n.workspace.cleanUp()},scopeType:s.ContextMenuRegistry.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},s.ContextMenuItems.toggleOption_=function(n,l){for(var u=0,h=0;h<l.length;h++)for(var _=l[h];_;)setTimeout(_.setCollapsed.bind(_,n),u),_=_.getNextBlock(),u+=10},s.ContextMenuItems.registerCollapse=function(){s.ContextMenuRegistry.registry.register({displayText:function(){return s.Msg.COLLAPSE_ALL},preconditionFn:function(n){if(n.workspace.options.collapse){n=n.workspace.getTopBlocks(!1);for(var l=0;l<n.length;l++)for(var u=n[l];u;){if(!u.isCollapsed())return"enabled";u=u.getNextBlock()}return"disabled"}return"hidden"},callback:function(n){s.ContextMenuItems.toggleOption_(!0,n.workspace.getTopBlocks(!0))},scopeType:s.ContextMenuRegistry.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},s.ContextMenuItems.registerExpand=function(){s.ContextMenuRegistry.registry.register({displayText:function(){return s.Msg.EXPAND_ALL},preconditionFn:function(n){if(n.workspace.options.collapse){n=n.workspace.getTopBlocks(!1);for(var l=0;l<n.length;l++)for(var u=n[l];u;){if(u.isCollapsed())return"enabled";u=u.getNextBlock()}return"disabled"}return"hidden"},callback:function(n){s.ContextMenuItems.toggleOption_(!1,n.workspace.getTopBlocks(!0))},scopeType:s.ContextMenuRegistry.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},s.ContextMenuItems.addDeletableBlocks_=function(n,l){if(n.isDeletable())Array.prototype.push.apply(l,n.getDescendants(!1));else{n=n.getChildren(!1);for(var u=0;u<n.length;u++)s.ContextMenuItems.addDeletableBlocks_(n[u],l)}},s.ContextMenuItems.getDeletableBlocks_=function(n){var l=[];n=n.getTopBlocks(!0);for(var u=0;u<n.length;u++)s.ContextMenuItems.addDeletableBlocks_(n[u],l);return l},s.ContextMenuItems.deleteNext_=function(n,l){s.Events.setGroup(l);var u=n.shift();u&&(u.workspace?(u.dispose(!1,!0),setTimeout(s.ContextMenuItems.deleteNext_,10,n,l)):s.ContextMenuItems.deleteNext_(n,l)),s.Events.setGroup(!1)},s.ContextMenuItems.registerDeleteAll=function(){s.ContextMenuRegistry.registry.register({displayText:function(n){if(n.workspace)return 1==(n=s.ContextMenuItems.getDeletableBlocks_(n.workspace).length)?s.Msg.DELETE_BLOCK:s.Msg.DELETE_X_BLOCKS.replace("%1",String(n))},preconditionFn:function(n){if(n.workspace)return 0<s.ContextMenuItems.getDeletableBlocks_(n.workspace).length?"enabled":"disabled"},callback:function(n){if(n.workspace){n.workspace.cancelCurrentGesture();var l=s.ContextMenuItems.getDeletableBlocks_(n.workspace),u=s.utils.genUid();2>l.length?s.ContextMenuItems.deleteNext_(l,u):s.confirm(s.Msg.DELETE_ALL_BLOCKS.replace("%1",l.length),function(h){h&&s.ContextMenuItems.deleteNext_(l,u)})}},scopeType:s.ContextMenuRegistry.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},s.ContextMenuItems.registerWorkspaceOptions_=function(){s.ContextMenuItems.registerUndo(),s.ContextMenuItems.registerRedo(),s.ContextMenuItems.registerCleanup(),s.ContextMenuItems.registerCollapse(),s.ContextMenuItems.registerExpand(),s.ContextMenuItems.registerDeleteAll()},s.ContextMenuItems.registerDuplicate=function(){s.ContextMenuRegistry.registry.register({displayText:function(){return s.Msg.DUPLICATE_BLOCK},preconditionFn:function(n){return!(n=n.block).isInFlyout&&n.isDeletable()&&n.isMovable()?n.isDuplicatable()?"enabled":"disabled":"hidden"},callback:function(n){n.block&&s.duplicate(n.block)},scopeType:s.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},s.ContextMenuItems.registerComment=function(){s.ContextMenuRegistry.registry.register({displayText:function(n){return n.block.getCommentIcon()?s.Msg.REMOVE_COMMENT:s.Msg.ADD_COMMENT},preconditionFn:function(n){return n=n.block,s.utils.userAgent.IE||n.isInFlyout||!n.workspace.options.comments||n.isCollapsed()||!n.isEditable()?"hidden":"enabled"},callback:function(n){(n=n.block).getCommentIcon()?n.setCommentText(null):n.setCommentText("")},scopeType:s.ContextMenuRegistry.ScopeType.BLOCK,id:"blockComment",weight:2})},s.ContextMenuItems.registerInline=function(){s.ContextMenuRegistry.registry.register({displayText:function(n){return n.block.getInputsInline()?s.Msg.EXTERNAL_INPUTS:s.Msg.INLINE_INPUTS},preconditionFn:function(n){if(!(n=n.block).isInFlyout&&n.isMovable()&&!n.isCollapsed())for(var l=1;l<n.inputList.length;l++)if(n.inputList[l-1].type!=s.inputTypes.STATEMENT&&n.inputList[l].type!=s.inputTypes.STATEMENT)return"enabled";return"hidden"},callback:function(n){n.block.setInputsInline(!n.block.getInputsInline())},scopeType:s.ContextMenuRegistry.ScopeType.BLOCK,id:"blockInline",weight:3})},s.ContextMenuItems.registerCollapseExpandBlock=function(){s.ContextMenuRegistry.registry.register({displayText:function(n){return n.block.isCollapsed()?s.Msg.EXPAND_BLOCK:s.Msg.COLLAPSE_BLOCK},preconditionFn:function(n){return!(n=n.block).isInFlyout&&n.isMovable()&&n.workspace.options.collapse?"enabled":"hidden"},callback:function(n){n.block.setCollapsed(!n.block.isCollapsed())},scopeType:s.ContextMenuRegistry.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},s.ContextMenuItems.registerDisable=function(){s.ContextMenuRegistry.registry.register({displayText:function(n){return n.block.isEnabled()?s.Msg.DISABLE_BLOCK:s.Msg.ENABLE_BLOCK},preconditionFn:function(n){return!(n=n.block).isInFlyout&&n.workspace.options.disable&&n.isEditable()?n.getInheritedDisabled()?"disabled":"enabled":"hidden"},callback:function(n){n=n.block;var l=s.Events.getGroup();l||s.Events.setGroup(!0),n.setEnabled(!n.isEnabled()),l||s.Events.setGroup(!1)},scopeType:s.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDisable",weight:5})},s.ContextMenuItems.registerDelete=function(){s.ContextMenuRegistry.registry.register({displayText:function(n){var l=n.block;return n=l.getDescendants(!1).length,(l=l.getNextBlock())&&(n-=l.getDescendants(!1).length),1==n?s.Msg.DELETE_BLOCK:s.Msg.DELETE_X_BLOCKS.replace("%1",String(n))},preconditionFn:function(n){return!n.block.isInFlyout&&n.block.isDeletable()?"enabled":"hidden"},callback:function(n){s.Events.setGroup(!0),n.block&&s.deleteBlock(n.block),s.Events.setGroup(!1)},scopeType:s.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDelete",weight:6})},s.ContextMenuItems.registerHelp=function(){s.ContextMenuRegistry.registry.register({displayText:function(){return s.Msg.HELP},preconditionFn:function(n){return("function"==typeof(n=n.block).helpUrl?n.helpUrl():n.helpUrl)?"enabled":"hidden"},callback:function(n){n.block.showHelp()},scopeType:s.ContextMenuRegistry.ScopeType.BLOCK,id:"blockHelp",weight:7})},s.ContextMenuItems.registerBlockOptions_=function(){s.ContextMenuItems.registerDuplicate(),s.ContextMenuItems.registerComment(),s.ContextMenuItems.registerInline(),s.ContextMenuItems.registerCollapseExpandBlock(),s.ContextMenuItems.registerDisable(),s.ContextMenuItems.registerDelete(),s.ContextMenuItems.registerHelp()},s.ContextMenuItems.registerDefaultOptions=function(){s.ContextMenuItems.registerWorkspaceOptions_(),s.ContextMenuItems.registerBlockOptions_()},s.ContextMenuItems.registerDefaultOptions(),s.Mutator=function(n){s.Mutator.superClass_.constructor.call(this,null),this.quarkNames_=n},s.utils.object.inherits(s.Mutator,s.Icon),s.Mutator.prototype.workspace_=null,s.Mutator.prototype.workspaceWidth_=0,s.Mutator.prototype.workspaceHeight_=0,s.Mutator.prototype.setBlock=function(n){this.block_=n},s.Mutator.prototype.getWorkspace=function(){return this.workspace_},s.Mutator.prototype.drawIcon_=function(n){s.utils.dom.createSvgElement(s.utils.Svg.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},n),s.utils.dom.createSvgElement(s.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},n),s.utils.dom.createSvgElement(s.utils.Svg.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},n)},s.Mutator.prototype.iconClick_=function(n){this.block_.isEditable()&&s.Icon.prototype.iconClick_.call(this,n)},s.Mutator.prototype.createEditor_=function(){if(this.svgDialog_=s.utils.dom.createSvgElement(s.utils.Svg.SVG,{x:s.Bubble.BORDER_WIDTH,y:s.Bubble.BORDER_WIDTH},null),this.quarkNames_.length)for(var u,n=s.utils.xml.createElement("xml"),l=0;u=this.quarkNames_[l];l++){var h=s.utils.xml.createElement("block");h.setAttribute("type",u),n.appendChild(h)}else n=null;return(l=new s.Options({disable:!1,parentWorkspace:this.block_.workspace,media:this.block_.workspace.options.pathToMedia,rtl:this.block_.RTL,horizontalLayout:!1,renderer:this.block_.workspace.options.renderer,rendererOverrides:this.block_.workspace.options.rendererOverrides})).toolboxPosition=this.block_.RTL?s.utils.toolbox.Position.RIGHT:s.utils.toolbox.Position.LEFT,(u=!!n)&&(l.languageTree=s.utils.toolbox.convertToolboxDefToJson(n)),this.workspace_=new s.WorkspaceSvg(l),this.workspace_.isMutator=!0,this.workspace_.addChangeListener(s.Events.disableOrphans),n=u?this.workspace_.addFlyout(s.utils.Svg.G):null,l=this.workspace_.createDom("blocklyMutatorBackground"),n&&l.insertBefore(n,this.workspace_.svgBlockCanvas_),this.svgDialog_.appendChild(l),this.svgDialog_},s.Mutator.prototype.updateEditable=function(){s.Mutator.superClass_.updateEditable.call(this),this.block_.isInFlyout||(this.block_.isEditable()?this.iconGroup_&&s.utils.dom.removeClass(this.iconGroup_,"blocklyIconGroupReadonly"):(this.setVisible(!1),this.iconGroup_&&s.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly")))},s.Mutator.prototype.resizeBubble_=function(){var n=2*s.Bubble.BORDER_WIDTH,l=this.workspace_.getCanvas().getBBox(),u=l.width+l.x,h=l.height+3*n,_=this.workspace_.getFlyout();if(_){var b=_.getWorkspace().getMetricsManager().getScrollMetrics();h=Math.max(h,b.height+20),u+=_.getWidth()}this.block_.RTL&&(u=-l.x),u+=3*n,(Math.abs(this.workspaceWidth_-u)>n||Math.abs(this.workspaceHeight_-h)>n)&&(this.workspaceWidth_=u,this.workspaceHeight_=h,this.bubble_.setBubbleSize(u+n,h+n),this.svgDialog_.setAttribute("width",this.workspaceWidth_),this.svgDialog_.setAttribute("height",this.workspaceHeight_),this.workspace_.setCachedParentSvgSize(this.workspaceWidth_,this.workspaceHeight_)),this.block_.RTL&&(n="translate("+this.workspaceWidth_+",0)",this.workspace_.getCanvas().setAttribute("transform",n)),this.workspace_.resize()},s.Mutator.prototype.onBubbleMove_=function(){this.workspace_&&this.workspace_.recordDragTargets()},s.Mutator.prototype.setVisible=function(n){if(n!=this.isVisible())if(s.Events.fire(new(s.Events.get(s.Events.BUBBLE_OPEN))(this.block_,n,"mutator")),n){this.bubble_=new s.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,null,null),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerMoveEvent(this.onBubbleMove_.bind(this));var l=this.workspace_.options.languageTree;n=this.workspace_.getFlyout(),l&&(n.init(this.workspace_),n.show(l)),this.rootBlock_=this.block_.decompose(this.workspace_),l=this.rootBlock_.getDescendants(!1);for(var h,u=0;h=l[u];u++)h.render();if(this.rootBlock_.setMovable(!1),this.rootBlock_.setDeletable(!1),n?(l=2*n.CORNER_RADIUS,n=this.rootBlock_.RTL?n.getWidth()+l:l):n=l=16,this.block_.RTL&&(n=-n),this.rootBlock_.moveBy(n,l),this.block_.saveConnections){var _=this,b=this.block_;b.saveConnections(this.rootBlock_),this.sourceListener_=function(){b.saveConnections(_.rootBlock_)},this.block_.workspace.addChangeListener(this.sourceListener_)}this.resizeBubble_(),this.workspace_.addChangeListener(this.workspaceChanged_.bind(this)),this.applyColour()}else this.svgDialog_=null,this.workspace_.dispose(),this.rootBlock_=this.workspace_=null,this.bubble_.dispose(),this.bubble_=null,this.workspaceHeight_=this.workspaceWidth_=0,this.sourceListener_&&(this.block_.workspace.removeChangeListener(this.sourceListener_),this.sourceListener_=null)},s.Mutator.prototype.workspaceChanged_=function(n){if(!(n.isUiEvent||n.type==s.Events.CHANGE&&"disabled"==n.element)){if(!this.workspace_.isDragging()){n=this.workspace_.getTopBlocks(!1);for(var u,l=0;u=n[l];l++){var h=u.getRelativeToSurfaceXY();if(20>h.y&&u.moveBy(0,20-h.y),u.RTL){var _=-20,b=this.workspace_.getFlyout();b&&(_-=b.getWidth()),h.x>_&&u.moveBy(_-h.x,0)}else 20>h.x&&u.moveBy(20-h.x,0)}}if(this.rootBlock_.workspace==this.workspace_){if(s.Events.setGroup(!0),n=(n=(u=this.block_).mutationToDom())&&s.Xml.domToText(n),l=u.rendered,u.rendered=!1,u.compose(this.rootBlock_),u.rendered=l,u.initSvg(),u.rendered&&u.render(),n!=(l=(l=u.mutationToDom())&&s.Xml.domToText(l))){s.Events.fire(new(s.Events.get(s.Events.BLOCK_CHANGE))(u,"mutation",null,n,l));var R=s.Events.getGroup();setTimeout(function(){s.Events.setGroup(R),u.bumpNeighbours(),s.Events.setGroup(!1)},s.BUMP_DELAY)}this.workspace_.isDragging()||this.resizeBubble_(),s.Events.setGroup(!1)}}},s.Mutator.prototype.dispose=function(){this.block_.mutator=null,s.Icon.prototype.dispose.call(this)},s.Mutator.prototype.updateBlockStyle=function(){var n=this.workspace_;if(n&&n.getAllBlocks(!1)){for(var h,l=n.getAllBlocks(!1),u=0;h=l[u];u++)h.setStyle(h.getStyleName());if(u=n.getFlyout())for(n=u.workspace_.getAllBlocks(!1),u=0;h=n[u];u++)h.setStyle(h.getStyleName())}},s.Mutator.reconnect=function(n,l,u){if(!n||!n.getSourceBlock().workspace)return!1;u=l.getInput(u).connection;var h=n.targetBlock();return!(h&&h!=l||u.targetConnection==n||(u.isConnected()&&u.disconnect(),u.connect(n),0))},s.Mutator.findParentWs=function(n){var l=null;if(n&&n.options){var u=n.options.parentWorkspace;n.isFlyout?u&&u.options&&(l=u.options.parentWorkspace):u&&(l=u)}return l},s.FieldTextInput=function(n,l,u){this.spellcheck_=!0,s.FieldTextInput.superClass_.constructor.call(this,n,l,u),this.onKeyInputWrapper_=this.onKeyDownWrapper_=this.htmlInput_=null,this.fullBlockClickTarget_=!1,this.workspace_=null},s.utils.object.inherits(s.FieldTextInput,s.Field),s.FieldTextInput.prototype.DEFAULT_VALUE="",s.FieldTextInput.fromJson=function(n){var l=s.utils.replaceMessageReferences(n.text);return new s.FieldTextInput(l,void 0,n)},s.FieldTextInput.prototype.SERIALIZABLE=!0,s.FieldTextInput.BORDERRADIUS=4,s.FieldTextInput.prototype.CURSOR="text",s.FieldTextInput.prototype.configure_=function(n){s.FieldTextInput.superClass_.configure_.call(this,n),"boolean"==typeof n.spellcheck&&(this.spellcheck_=n.spellcheck)},s.FieldTextInput.prototype.initView=function(){if(this.getConstants().FULL_BLOCK_FIELDS){for(var h,n=0,l=0,u=0;h=this.sourceBlock_.inputList[u];u++){for(var _=0;h.fieldRow[_];_++)n++;h.connection&&l++}this.fullBlockClickTarget_=1>=n&&this.sourceBlock_.outputConnection&&!l}else this.fullBlockClickTarget_=!1;this.fullBlockClickTarget_?this.clickTarget_=this.sourceBlock_.getSvgRoot():this.createBorderRect_(),this.createTextElement_()},s.FieldTextInput.prototype.doClassValidation_=function(n){return null==n?null:String(n)},s.FieldTextInput.prototype.doValueInvalid_=function(n){this.isBeingEdited_&&(this.isTextValid_=!1,n=this.value_,this.value_=this.htmlInput_.untypedDefaultValue_,this.sourceBlock_&&s.Events.isEnabled()&&s.Events.fire(new(s.Events.get(s.Events.BLOCK_CHANGE))(this.sourceBlock_,"field",this.name||null,n,this.value_)))},s.FieldTextInput.prototype.doValueUpdate_=function(n){this.isTextValid_=!0,this.value_=n,this.isBeingEdited_||(this.isDirty_=!0)},s.FieldTextInput.prototype.applyColour=function(){this.sourceBlock_&&this.getConstants().FULL_BLOCK_FIELDS&&(this.borderRect_?this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary):this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR))},s.FieldTextInput.prototype.render_=function(){if(s.FieldTextInput.superClass_.render_.call(this),this.isBeingEdited_){this.resizeEditor_();var n=this.htmlInput_;this.isTextValid_?(s.utils.dom.removeClass(n,"blocklyInvalidInput"),s.utils.aria.setState(n,s.utils.aria.State.INVALID,!1)):(s.utils.dom.addClass(n,"blocklyInvalidInput"),s.utils.aria.setState(n,s.utils.aria.State.INVALID,!0))}},s.FieldTextInput.prototype.setSpellcheck=function(n){n!=this.spellcheck_&&(this.spellcheck_=n,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))},s.FieldTextInput.prototype.showEditor_=function(n,l){this.workspace_=this.sourceBlock_.workspace,!(n=l||!1)&&(s.utils.userAgent.MOBILE||s.utils.userAgent.ANDROID||s.utils.userAgent.IPAD)?this.showPromptEditor_():this.showInlineEditor_(n)},s.FieldTextInput.prototype.showPromptEditor_=function(){s.prompt(s.Msg.CHANGE_VALUE_TITLE,this.getText(),function(n){this.setValue(this.getValueFromEditorText_(n))}.bind(this))},s.FieldTextInput.prototype.showInlineEditor_=function(n){s.WidgetDiv.show(this,this.sourceBlock_.RTL,this.widgetDispose_.bind(this)),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,n||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())},s.FieldTextInput.prototype.widgetCreate_=function(){var n=s.WidgetDiv.DIV;s.utils.dom.addClass(this.getClickTarget_(),"editing");var l=document.createElement("input");l.className="blocklyHtmlInput",l.setAttribute("spellcheck",this.spellcheck_);var u=this.workspace_.getScale(),h=this.getConstants().FIELD_TEXT_FONTSIZE*u+"pt";if(n.style.fontSize=h,l.style.fontSize=h,h=s.FieldTextInput.BORDERRADIUS*u+"px",this.fullBlockClickTarget_){h=((h=this.getScaledBBox()).bottom-h.top)/2+"px";var _=this.sourceBlock_.getParent()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;l.style.border=1*u+"px solid "+_,n.style.borderRadius=h,n.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(n.style.boxShadow="rgba(255, 255, 255, 0.3) 0px 0px 0px "+4*u+"px")}return l.style.borderRadius=h,n.appendChild(l),l.value=l.defaultValue=this.getEditorText_(this.value_),l.untypedDefaultValue_=this.value_,l.oldValue_=null,this.resizeEditor_(),this.bindInputEvents_(l),l},s.FieldTextInput.prototype.widgetDispose_=function(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_&&this.onFinishEditing_(this.value_),this.unbindInputEvents_();var n=s.WidgetDiv.DIV.style;n.width="auto",n.height="auto",n.fontSize="",n.transition="",n.boxShadow="",this.htmlInput_=null,s.utils.dom.removeClass(this.getClickTarget_(),"editing")},s.FieldTextInput.prototype.bindInputEvents_=function(n){this.onKeyDownWrapper_=s.browserEvents.conditionalBind(n,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper_=s.browserEvents.conditionalBind(n,"input",this,this.onHtmlInputChange_)},s.FieldTextInput.prototype.unbindInputEvents_=function(){this.onKeyDownWrapper_&&(s.browserEvents.unbind(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.onKeyInputWrapper_&&(s.browserEvents.unbind(this.onKeyInputWrapper_),this.onKeyInputWrapper_=null)},s.FieldTextInput.prototype.onHtmlInputKeyDown_=function(n){n.keyCode==s.utils.KeyCodes.ENTER?(s.WidgetDiv.hide(),s.DropDownDiv.hideWithoutAnimation()):n.keyCode==s.utils.KeyCodes.ESC?(this.setValue(this.htmlInput_.untypedDefaultValue_),s.WidgetDiv.hide(),s.DropDownDiv.hideWithoutAnimation()):n.keyCode==s.utils.KeyCodes.TAB&&(s.WidgetDiv.hide(),s.DropDownDiv.hideWithoutAnimation(),this.sourceBlock_.tab(this,!n.shiftKey),n.preventDefault())},s.FieldTextInput.prototype.onHtmlInputChange_=function(n){(n=this.htmlInput_.value)!==this.htmlInput_.oldValue_&&(this.htmlInput_.oldValue_=n,s.Events.setGroup(!0),n=this.getValueFromEditorText_(n),this.setValue(n),this.forceRerender(),this.resizeEditor_(),s.Events.setGroup(!1))},s.FieldTextInput.prototype.setEditorValue_=function(n){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(n)),this.setValue(n)},s.FieldTextInput.prototype.resizeEditor_=function(){var n=s.WidgetDiv.DIV,l=this.getScaledBBox();n.style.width=l.right-l.left+"px",n.style.height=l.bottom-l.top+"px",l=new s.utils.Coordinate(this.sourceBlock_.RTL?l.right-n.offsetWidth:l.left,l.top),n.style.left=l.x+"px",n.style.top=l.y+"px"},s.FieldTextInput.prototype.isTabNavigable=function(){return!0},s.FieldTextInput.prototype.getText_=function(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null},s.FieldTextInput.prototype.getEditorText_=function(n){return String(n)},s.FieldTextInput.prototype.getValueFromEditorText_=function(n){return n},s.fieldRegistry.register("field_input",s.FieldTextInput),s.FieldAngle=function(n,l,u){this.clockwise_=s.FieldAngle.CLOCKWISE,this.offset_=s.FieldAngle.OFFSET,this.wrap_=s.FieldAngle.WRAP,this.round_=s.FieldAngle.ROUND,s.FieldAngle.superClass_.constructor.call(this,n,l,u),this.moveSurfaceWrapper_=this.clickSurfaceWrapper_=this.clickWrapper_=this.line_=this.gauge_=this.editor_=null},s.utils.object.inherits(s.FieldAngle,s.FieldTextInput),s.FieldAngle.prototype.DEFAULT_VALUE=0,s.FieldAngle.fromJson=function(n){return new s.FieldAngle(n.angle,void 0,n)},s.FieldAngle.prototype.SERIALIZABLE=!0,s.FieldAngle.ROUND=15,s.FieldAngle.HALF=50,s.FieldAngle.CLOCKWISE=!1,s.FieldAngle.OFFSET=0,s.FieldAngle.WRAP=360,s.FieldAngle.RADIUS=s.FieldAngle.HALF-1,s.FieldAngle.prototype.configure_=function(n){switch(s.FieldAngle.superClass_.configure_.call(this,n),n.mode){case"compass":this.clockwise_=!0,this.offset_=90;break;case"protractor":this.clockwise_=!1,this.offset_=0}var l=n.clockwise;"boolean"==typeof l&&(this.clockwise_=l),null!=(l=n.offset)&&(l=Number(l),isNaN(l)||(this.offset_=l)),null!=(l=n.wrap)&&(l=Number(l),isNaN(l)||(this.wrap_=l)),null!=(n=n.round)&&(n=Number(n),isNaN(n)||(this.round_=n))},s.FieldAngle.prototype.initView=function(){s.FieldAngle.superClass_.initView.call(this),this.symbol_=s.utils.dom.createSvgElement(s.utils.Svg.TSPAN,{},null),this.symbol_.appendChild(document.createTextNode("\xb0")),this.textElement_.appendChild(this.symbol_)},s.FieldAngle.prototype.render_=function(){s.FieldAngle.superClass_.render_.call(this),this.updateGraph_()},s.FieldAngle.prototype.showEditor_=function(n){s.FieldAngle.superClass_.showEditor_.call(this,n,s.utils.userAgent.MOBILE||s.utils.userAgent.ANDROID||s.utils.userAgent.IPAD),this.dropdownCreate_(),s.DropDownDiv.getContentDiv().appendChild(this.editor_),s.DropDownDiv.setColour(this.sourceBlock_.style.colourPrimary,this.sourceBlock_.style.colourTertiary),s.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.updateGraph_()},s.FieldAngle.prototype.dropdownCreate_=function(){var n=s.utils.dom.createSvgElement(s.utils.Svg.SVG,{xmlns:s.utils.dom.SVG_NS,"xmlns:html":s.utils.dom.HTML_NS,"xmlns:xlink":s.utils.dom.XLINK_NS,version:"1.1",height:2*s.FieldAngle.HALF+"px",width:2*s.FieldAngle.HALF+"px",style:"touch-action: none"},null),l=s.utils.dom.createSvgElement(s.utils.Svg.CIRCLE,{cx:s.FieldAngle.HALF,cy:s.FieldAngle.HALF,r:s.FieldAngle.RADIUS,class:"blocklyAngleCircle"},n);this.gauge_=s.utils.dom.createSvgElement(s.utils.Svg.PATH,{class:"blocklyAngleGauge"},n),this.line_=s.utils.dom.createSvgElement(s.utils.Svg.LINE,{x1:s.FieldAngle.HALF,y1:s.FieldAngle.HALF,class:"blocklyAngleLine"},n);for(var u=0;360>u;u+=15)s.utils.dom.createSvgElement(s.utils.Svg.LINE,{x1:s.FieldAngle.HALF+s.FieldAngle.RADIUS,y1:s.FieldAngle.HALF,x2:s.FieldAngle.HALF+s.FieldAngle.RADIUS-(u%45==0?10:5),y2:s.FieldAngle.HALF,class:"blocklyAngleMarks",transform:"rotate("+u+","+s.FieldAngle.HALF+","+s.FieldAngle.HALF+")"},n);this.clickWrapper_=s.browserEvents.conditionalBind(n,"click",this,this.hide_),this.clickSurfaceWrapper_=s.browserEvents.conditionalBind(l,"click",this,this.onMouseMove_,!0,!0),this.moveSurfaceWrapper_=s.browserEvents.conditionalBind(l,"mousemove",this,this.onMouseMove_,!0,!0),this.editor_=n},s.FieldAngle.prototype.dropdownDispose_=function(){this.clickWrapper_&&(s.browserEvents.unbind(this.clickWrapper_),this.clickWrapper_=null),this.clickSurfaceWrapper_&&(s.browserEvents.unbind(this.clickSurfaceWrapper_),this.clickSurfaceWrapper_=null),this.moveSurfaceWrapper_&&(s.browserEvents.unbind(this.moveSurfaceWrapper_),this.moveSurfaceWrapper_=null),this.line_=this.gauge_=null},s.FieldAngle.prototype.hide_=function(){s.DropDownDiv.hideIfOwner(this),s.WidgetDiv.hide()},s.FieldAngle.prototype.onMouseMove_=function(n){var l=this.gauge_.ownerSVGElement.getBoundingClientRect(),u=n.clientX-l.left-s.FieldAngle.HALF;n=n.clientY-l.top-s.FieldAngle.HALF,l=Math.atan(-n/u),isNaN(l)||(l=s.utils.math.toDegrees(l),0>u?l+=180:0<n&&(l+=360),this.displayMouseOrKeyboardValue_(l=this.clockwise_?this.offset_+360-l:360-(this.offset_-l)))},s.FieldAngle.prototype.displayMouseOrKeyboardValue_=function(n){this.round_&&(n=Math.round(n/this.round_)*this.round_),(n=this.wrapValue_(n))!=this.value_&&this.setEditorValue_(n)},s.FieldAngle.prototype.updateGraph_=function(){if(this.gauge_){var n=Number(this.getText())+this.offset_,l=s.utils.math.toRadians(n%360);n=["M ",s.FieldAngle.HALF,",",s.FieldAngle.HALF];var u=s.FieldAngle.HALF,h=s.FieldAngle.HALF;if(!isNaN(l)){var _=Number(this.clockwise_),b=s.utils.math.toRadians(this.offset_),R=Math.cos(b)*s.FieldAngle.RADIUS,O=Math.sin(b)*-s.FieldAngle.RADIUS;_&&(l=2*b-l),u+=Math.cos(l)*s.FieldAngle.RADIUS,h-=Math.sin(l)*s.FieldAngle.RADIUS,l=Math.abs(Math.floor((l-b)/Math.PI)%2),_&&(l=1-l),n.push(" l ",R,",",O," A ",s.FieldAngle.RADIUS,",",s.FieldAngle.RADIUS," 0 ",l," ",_," ",u,",",h," z")}this.gauge_.setAttribute("d",n.join("")),this.line_.setAttribute("x2",u),this.line_.setAttribute("y2",h)}},s.FieldAngle.prototype.onHtmlInputKeyDown_=function(n){var l;if(s.FieldAngle.superClass_.onHtmlInputKeyDown_.call(this,n),n.keyCode===s.utils.KeyCodes.LEFT?l=this.sourceBlock_.RTL?1:-1:n.keyCode===s.utils.KeyCodes.RIGHT?l=this.sourceBlock_.RTL?-1:1:n.keyCode===s.utils.KeyCodes.DOWN?l=-1:n.keyCode===s.utils.KeyCodes.UP&&(l=1),l){var u=this.getValue();this.displayMouseOrKeyboardValue_(u+l*this.round_),n.preventDefault(),n.stopPropagation()}},s.FieldAngle.prototype.doClassValidation_=function(n){return n=Number(n),isNaN(n)||!isFinite(n)?null:this.wrapValue_(n)},s.FieldAngle.prototype.wrapValue_=function(n){return 0>(n%=360)&&(n+=360),n>this.wrap_&&(n-=360),n},s.Css.register(".blocklyAngleCircle {,stroke: #444;,stroke-width: 1;,fill: #ddd;,fill-opacity: .8;,},.blocklyAngleMarks {,stroke: #444;,stroke-width: 1;,},.blocklyAngleGauge {,fill: #f88;,fill-opacity: .8;,pointer-events: none;,},.blocklyAngleLine {,stroke: #f00;,stroke-width: 2;,stroke-linecap: round;,pointer-events: none;,}".split(",")),s.fieldRegistry.register("field_angle",s.FieldAngle),s.FieldCheckbox=function(n,l,u){this.checkChar_=null,s.FieldCheckbox.superClass_.constructor.call(this,n,l,u)},s.utils.object.inherits(s.FieldCheckbox,s.Field),s.FieldCheckbox.prototype.DEFAULT_VALUE=!1,s.FieldCheckbox.fromJson=function(n){return new s.FieldCheckbox(n.checked,void 0,n)},s.FieldCheckbox.CHECK_CHAR="\u2713",s.FieldCheckbox.prototype.SERIALIZABLE=!0,s.FieldCheckbox.prototype.CURSOR="default",s.FieldCheckbox.prototype.configure_=function(n){s.FieldCheckbox.superClass_.configure_.call(this,n),n.checkCharacter&&(this.checkChar_=n.checkCharacter)},s.FieldCheckbox.prototype.initView=function(){s.FieldCheckbox.superClass_.initView.call(this),s.utils.dom.addClass(this.textElement_,"blocklyCheckbox"),this.textElement_.style.display=this.value_?"block":"none"},s.FieldCheckbox.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)},s.FieldCheckbox.prototype.getDisplayText_=function(){return this.checkChar_||s.FieldCheckbox.CHECK_CHAR},s.FieldCheckbox.prototype.setCheckCharacter=function(n){this.checkChar_=n,this.forceRerender()},s.FieldCheckbox.prototype.showEditor_=function(){this.setValue(!this.value_)},s.FieldCheckbox.prototype.doClassValidation_=function(n){return!0===n||"TRUE"===n?"TRUE":!1===n||"FALSE"===n?"FALSE":null},s.FieldCheckbox.prototype.doValueUpdate_=function(n){this.value_=this.convertValueToBool_(n),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")},s.FieldCheckbox.prototype.getValue=function(){return this.value_?"TRUE":"FALSE"},s.FieldCheckbox.prototype.getValueBoolean=function(){return this.value_},s.FieldCheckbox.prototype.getText=function(){return String(this.convertValueToBool_(this.value_))},s.FieldCheckbox.prototype.convertValueToBool_=function(n){return"string"==typeof n?"TRUE"==n:!!n},s.fieldRegistry.register("field_checkbox",s.FieldCheckbox),s.FieldColour=function(n,l,u){s.FieldColour.superClass_.constructor.call(this,n,l,u),this.onKeyDownWrapper_=this.onMouseLeaveWrapper_=this.onMouseEnterWrapper_=this.onMouseMoveWrapper_=this.onClickWrapper_=this.highlightedIndex_=this.picker_=null},s.utils.object.inherits(s.FieldColour,s.Field),s.FieldColour.fromJson=function(n){return new s.FieldColour(n.colour,void 0,n)},s.FieldColour.prototype.SERIALIZABLE=!0,s.FieldColour.prototype.CURSOR="default",s.FieldColour.prototype.isDirty_=!1,s.FieldColour.prototype.colours_=null,s.FieldColour.prototype.titles_=null,s.FieldColour.prototype.columns_=0,s.FieldColour.prototype.configure_=function(n){s.FieldColour.superClass_.configure_.call(this,n),n.colourOptions&&(this.colours_=n.colourOptions,this.titles_=n.colourTitles),n.columns&&(this.columns_=n.columns)},s.FieldColour.prototype.initView=function(){this.size_=new s.utils.Size(this.getConstants().FIELD_COLOUR_DEFAULT_WIDTH,this.getConstants().FIELD_COLOUR_DEFAULT_HEIGHT),this.getConstants().FIELD_COLOUR_FULL_BLOCK?this.clickTarget_=this.sourceBlock_.getSvgRoot():(this.createBorderRect_(),this.borderRect_.style.fillOpacity="1")},s.FieldColour.prototype.applyColour=function(){this.getConstants().FIELD_COLOUR_FULL_BLOCK?(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getValue()),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff")):this.borderRect_&&(this.borderRect_.style.fill=this.getValue())},s.FieldColour.prototype.doClassValidation_=function(n){return"string"!=typeof n?null:s.utils.colour.parse(n)},s.FieldColour.prototype.doValueUpdate_=function(n){this.value_=n,this.borderRect_?this.borderRect_.style.fill=n:this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",n),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff"))},s.FieldColour.prototype.getText=function(){var n=this.value_;return/^#(.)\1(.)\2(.)\3$/.test(n)&&(n="#"+n[1]+n[3]+n[5]),n},s.FieldColour.COLOURS="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" "),s.FieldColour.prototype.DEFAULT_VALUE=s.FieldColour.COLOURS[0],s.FieldColour.TITLES=[],s.FieldColour.COLUMNS=7,s.FieldColour.prototype.setColours=function(n,l){return this.colours_=n,l&&(this.titles_=l),this},s.FieldColour.prototype.setColumns=function(n){return this.columns_=n,this},s.FieldColour.prototype.showEditor_=function(){this.dropdownCreate_(),s.DropDownDiv.getContentDiv().appendChild(this.picker_),s.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.picker_.focus({preventScroll:!0})},s.FieldColour.prototype.onClick_=function(n){null!==(n=(n=n.target)&&n.label)&&(this.setValue(n),s.DropDownDiv.hideIfOwner(this))},s.FieldColour.prototype.onKeyDown_=function(n){var l=!1;n.keyCode===s.utils.KeyCodes.UP?(this.moveHighlightBy_(0,-1),l=!0):n.keyCode===s.utils.KeyCodes.DOWN?(this.moveHighlightBy_(0,1),l=!0):n.keyCode===s.utils.KeyCodes.LEFT?(this.moveHighlightBy_(-1,0),l=!0):n.keyCode===s.utils.KeyCodes.RIGHT?(this.moveHighlightBy_(1,0),l=!0):n.keyCode===s.utils.KeyCodes.ENTER&&((l=this.getHighlighted_())&&null!==(l=l&&l.label)&&this.setValue(l),s.DropDownDiv.hideWithoutAnimation(),l=!0),l&&n.stopPropagation()},s.FieldColour.prototype.moveHighlightBy_=function(n,l){var u=this.colours_||s.FieldColour.COLOURS,h=this.columns_||s.FieldColour.COLUMNS,_=this.highlightedIndex_%h,b=Math.floor(this.highlightedIndex_/h);_+=n,b+=l,0>n?0>_&&0<b?(_=h-1,b--):0>_&&(_=0):0<n?_>h-1&&b<Math.floor(u.length/h)-1?(_=0,b++):_>h-1&&_--:0>l?0>b&&(b=0):0<l&&b>Math.floor(u.length/h)-1&&(b=Math.floor(u.length/h)-1),this.setHighlightedCell_(this.picker_.childNodes[b].childNodes[_],b*h+_)},s.FieldColour.prototype.onMouseMove_=function(n){var l=(n=n.target)&&Number(n.getAttribute("data-index"));null!==l&&l!==this.highlightedIndex_&&this.setHighlightedCell_(n,l)},s.FieldColour.prototype.onMouseEnter_=function(){this.picker_.focus({preventScroll:!0})},s.FieldColour.prototype.onMouseLeave_=function(){this.picker_.blur();var n=this.getHighlighted_();n&&s.utils.dom.removeClass(n,"blocklyColourHighlighted")},s.FieldColour.prototype.getHighlighted_=function(){var n=this.columns_||s.FieldColour.COLUMNS,l=this.picker_.childNodes[Math.floor(this.highlightedIndex_/n)];return l?l.childNodes[this.highlightedIndex_%n]:null},s.FieldColour.prototype.setHighlightedCell_=function(n,l){var u=this.getHighlighted_();u&&s.utils.dom.removeClass(u,"blocklyColourHighlighted"),s.utils.dom.addClass(n,"blocklyColourHighlighted"),this.highlightedIndex_=l,s.utils.aria.setState(this.picker_,s.utils.aria.State.ACTIVEDESCENDANT,n.getAttribute("id"))},s.FieldColour.prototype.dropdownCreate_=function(){var n=this.columns_||s.FieldColour.COLUMNS,l=this.colours_||s.FieldColour.COLOURS,u=this.titles_||s.FieldColour.TITLES,h=this.getValue(),_=document.createElement("table");_.className="blocklyColourTable",_.tabIndex=0,_.dir="ltr",s.utils.aria.setRole(_,s.utils.aria.Role.GRID),s.utils.aria.setState(_,s.utils.aria.State.EXPANDED,!0),s.utils.aria.setState(_,s.utils.aria.State.ROWCOUNT,Math.floor(l.length/n)),s.utils.aria.setState(_,s.utils.aria.State.COLCOUNT,n);for(var b,R=0;R<l.length;R++){R%n==0&&(b=document.createElement("tr"),s.utils.aria.setRole(b,s.utils.aria.Role.ROW),_.appendChild(b));var O=document.createElement("td");b.appendChild(O),O.label=l[R],O.title=u[R]||l[R],O.id=s.utils.IdGenerator.getNextUniqueId(),O.setAttribute("data-index",R),s.utils.aria.setRole(O,s.utils.aria.Role.GRIDCELL),s.utils.aria.setState(O,s.utils.aria.State.LABEL,l[R]),s.utils.aria.setState(O,s.utils.aria.State.SELECTED,l[R]==h),O.style.backgroundColor=l[R],l[R]==h&&(O.className="blocklyColourSelected",this.highlightedIndex_=R)}this.onClickWrapper_=s.browserEvents.conditionalBind(_,"click",this,this.onClick_,!0),this.onMouseMoveWrapper_=s.browserEvents.conditionalBind(_,"mousemove",this,this.onMouseMove_,!0),this.onMouseEnterWrapper_=s.browserEvents.conditionalBind(_,"mouseenter",this,this.onMouseEnter_,!0),this.onMouseLeaveWrapper_=s.browserEvents.conditionalBind(_,"mouseleave",this,this.onMouseLeave_,!0),this.onKeyDownWrapper_=s.browserEvents.conditionalBind(_,"keydown",this,this.onKeyDown_),this.picker_=_},s.FieldColour.prototype.dropdownDispose_=function(){this.onClickWrapper_&&(s.browserEvents.unbind(this.onClickWrapper_),this.onClickWrapper_=null),this.onMouseMoveWrapper_&&(s.browserEvents.unbind(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null),this.onMouseEnterWrapper_&&(s.browserEvents.unbind(this.onMouseEnterWrapper_),this.onMouseEnterWrapper_=null),this.onMouseLeaveWrapper_&&(s.browserEvents.unbind(this.onMouseLeaveWrapper_),this.onMouseLeaveWrapper_=null),this.onKeyDownWrapper_&&(s.browserEvents.unbind(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.highlightedIndex_=this.picker_=null},s.Css.register([".blocklyColourTable {","border-collapse: collapse;","display: block;","outline: none;","padding: 1px;","}",".blocklyColourTable>tr>td {","border: .5px solid #888;","box-sizing: border-box;","cursor: pointer;","display: inline-block;","height: 20px;","padding: 0;","width: 20px;","}",".blocklyColourTable>tr>td.blocklyColourHighlighted {","border-color: #eee;","box-shadow: 2px 2px 7px 2px rgba(0,0,0,.3);","position: relative;","}",".blocklyColourSelected, .blocklyColourSelected:hover {","border-color: #eee !important;","outline: 1px solid #333;","position: relative;","}"]),s.fieldRegistry.register("field_colour",s.FieldColour),s.FieldDropdown=function(n,l,u){"function"!=typeof n&&s.FieldDropdown.validateOptions_(n),this.menuGenerator_=n,this.suffixField=this.prefixField=this.generatedOptions_=null,this.trimOptions_(),this.selectedOption_=this.getOptions(!1)[0],s.FieldDropdown.superClass_.constructor.call(this,this.selectedOption_[1],l,u),this.svgArrow_=this.arrow_=this.imageElement_=this.menu_=this.selectedMenuItem_=null},s.utils.object.inherits(s.FieldDropdown,s.Field),s.FieldDropdown.fromJson=function(n){return new s.FieldDropdown(n.options,void 0,n)},s.FieldDropdown.prototype.fromXml=function(n){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(n.textContent)},s.FieldDropdown.prototype.SERIALIZABLE=!0,s.FieldDropdown.CHECKMARK_OVERHANG=25,s.FieldDropdown.MAX_MENU_HEIGHT_VH=.45,s.FieldDropdown.IMAGE_Y_OFFSET=5,s.FieldDropdown.IMAGE_Y_PADDING=2*s.FieldDropdown.IMAGE_Y_OFFSET,s.FieldDropdown.ARROW_CHAR=s.utils.userAgent.ANDROID?"\u25bc":"\u25be",s.FieldDropdown.prototype.CURSOR="default",s.FieldDropdown.prototype.initView=function(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement_=s.utils.dom.createSvgElement(s.utils.Svg.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&s.utils.dom.addClass(this.borderRect_,"blocklyDropdownRect")},s.FieldDropdown.prototype.shouldAddBorderRect_=function(){return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!this.sourceBlock_.isShadow()},s.FieldDropdown.prototype.createTextArrow_=function(){this.arrow_=s.utils.dom.createSvgElement(s.utils.Svg.TSPAN,{},this.textElement_),this.arrow_.appendChild(document.createTextNode(this.sourceBlock_.RTL?s.FieldDropdown.ARROW_CHAR+" ":" "+s.FieldDropdown.ARROW_CHAR)),this.sourceBlock_.RTL?this.textElement_.insertBefore(this.arrow_,this.textContent_):this.textElement_.appendChild(this.arrow_)},s.FieldDropdown.prototype.createSVGArrow_=function(){this.svgArrow_=s.utils.dom.createSvgElement(s.utils.Svg.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow_.setAttributeNS(s.utils.dom.XLINK_NS,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)},s.FieldDropdown.prototype.showEditor_=function(n){if(this.dropdownCreate_(),this.menu_.openingCoords=n&&"number"==typeof n.clientX?new s.utils.Coordinate(n.clientX,n.clientY):null,this.menu_.render(s.DropDownDiv.getContentDiv()),n=this.menu_.getElement(),s.utils.dom.addClass(n,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV){n=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().getColour():this.sourceBlock_.getColour();var l=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;s.DropDownDiv.setColour(n,l)}s.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem_&&this.menu_.setHighlighted(this.selectedMenuItem_),this.applyColour()},s.FieldDropdown.prototype.dropdownCreate_=function(){var n=new s.Menu;n.setRole(s.utils.aria.Role.LISTBOX),this.menu_=n;var l=this.getOptions(!1);this.selectedMenuItem_=null;for(var u=0;u<l.length;u++){var h=l[u][0],_=l[u][1];if("object"==typeof h){var b=new Image(h.width,h.height);b.src=h.src,b.alt=h.alt||"",h=b}(h=new s.MenuItem(h,_)).setRole(s.utils.aria.Role.OPTION),h.setRightToLeft(this.sourceBlock_.RTL),h.setCheckable(!0),n.addChild(h),h.setChecked(_==this.value_),_==this.value_&&(this.selectedMenuItem_=h),h.onAction(this.handleMenuActionEvent_,this)}},s.FieldDropdown.prototype.dropdownDispose_=function(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem_=this.menu_=null,this.applyColour()},s.FieldDropdown.prototype.handleMenuActionEvent_=function(n){s.DropDownDiv.hideIfOwner(this,!0),this.onItemSelected_(this.menu_,n)},s.FieldDropdown.prototype.onItemSelected_=function(n,l){this.setValue(l.getValue())},s.FieldDropdown.prototype.trimOptions_=function(){var n=this.menuGenerator_;if(Array.isArray(n)){for(var l=!1,u=0;u<n.length;u++){var h=n[u][0];"string"==typeof h?n[u][0]=s.utils.replaceMessageReferences(h):(null!=h.alt&&(n[u][0].alt=s.utils.replaceMessageReferences(h.alt)),l=!0)}if(!(l||2>n.length)){for(l=[],u=0;u<n.length;u++)l.push(n[u][0]);u=s.utils.string.shortestStringLength(l),h=s.utils.string.commonWordPrefix(l,u);var _=s.utils.string.commonWordSuffix(l,u);!h&&!_||u<=h+_||(h&&(this.prefixField=l[0].substring(0,h-1)),_&&(this.suffixField=l[0].substr(1-_)),this.menuGenerator_=s.FieldDropdown.applyTrim_(n,h,_))}}},s.FieldDropdown.applyTrim_=function(n,l,u){for(var h=[],_=0;_<n.length;_++){var b=n[_][0],R=n[_][1];b=b.substring(l,b.length-u),h[_]=[b,R]}return h},s.FieldDropdown.prototype.isOptionListDynamic=function(){return"function"==typeof this.menuGenerator_},s.FieldDropdown.prototype.getOptions=function(n){return this.isOptionListDynamic()?(this.generatedOptions_&&n||(this.generatedOptions_=this.menuGenerator_.call(this),s.FieldDropdown.validateOptions_(this.generatedOptions_)),this.generatedOptions_):this.menuGenerator_},s.FieldDropdown.prototype.doClassValidation_=function(n){for(var _,l=!1,u=this.getOptions(!0),h=0;_=u[h];h++)if(_[1]==n){l=!0;break}return l?n:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+n),null)},s.FieldDropdown.prototype.doValueUpdate_=function(n){s.FieldDropdown.superClass_.doValueUpdate_.call(this,n),n=this.getOptions(!0);for(var u,l=0;u=n[l];l++)u[1]==this.value_&&(this.selectedOption_=u)},s.FieldDropdown.prototype.applyColour=function(){this.borderRect_&&(this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary),this.borderRect_.setAttribute("fill",this.menu_?this.sourceBlock_.style.colourTertiary:"transparent")),this.sourceBlock_&&this.arrow_&&(this.arrow_.style.fill=this.sourceBlock_.isShadow()?this.sourceBlock_.style.colourSecondary:this.sourceBlock_.style.colourPrimary)},s.FieldDropdown.prototype.render_=function(){this.textContent_.nodeValue="",this.imageElement_.style.display="none";var n=this.selectedOption_&&this.selectedOption_[0];n&&"object"==typeof n?this.renderSelectedImage_(n):this.renderSelectedText_(),this.positionBorderRect_()},s.FieldDropdown.prototype.renderSelectedImage_=function(n){this.imageElement_.style.display="",this.imageElement_.setAttributeNS(s.utils.dom.XLINK_NS,"xlink:href",n.src),this.imageElement_.setAttribute("height",n.height),this.imageElement_.setAttribute("width",n.width);var l=Number(n.height);n=Number(n.width);var u=!!this.borderRect_,h=Math.max(u?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,l+s.FieldDropdown.IMAGE_Y_PADDING);u=u?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var _=this.svgArrow_?this.positionSVGArrow_(n+u,h/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):s.utils.dom.getFastTextWidth(this.arrow_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);this.size_.width=n+_+2*u,this.size_.height=h;var b=0;this.sourceBlock_.RTL?this.imageElement_.setAttribute("x",u+_):(b=n+_,this.textElement_.setAttribute("text-anchor","end"),this.imageElement_.setAttribute("x",u)),this.imageElement_.setAttribute("y",h/2-l/2),this.positionTextElement_(b+u,n+_)},s.FieldDropdown.prototype.renderSelectedText_=function(){this.textContent_.nodeValue=this.getDisplayText_(),s.utils.dom.addClass(this.textElement_,"blocklyDropdownText"),this.textElement_.setAttribute("text-anchor","start");var n=!!this.borderRect_,l=Math.max(n?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT),u=s.utils.dom.getFastTextWidth(this.textElement_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);n=n?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var h=0;this.svgArrow_&&(h=this.positionSVGArrow_(u+n,l/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=u+h+2*n,this.size_.height=l,this.positionTextElement_(n,u)},s.FieldDropdown.prototype.positionSVGArrow_=function(n,l){if(!this.svgArrow_)return 0;var u=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,h=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,_=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow_.setAttribute("transform","translate("+(this.sourceBlock_.RTL?u:n+h)+","+l+")"),_+h},s.FieldDropdown.prototype.getText_=function(){if(!this.selectedOption_)return null;var n=this.selectedOption_[0];return"object"==typeof n?n.alt:n},s.FieldDropdown.validateOptions_=function(n){if(!Array.isArray(n))throw TypeError("FieldDropdown options must be an array.");if(!n.length)throw TypeError("FieldDropdown options must not be an empty array.");for(var l=!1,u=0;u<n.length;++u){var h=n[u];Array.isArray(h)?"string"!=typeof h[1]?(l=!0,console.error("Invalid option["+u+"]: Each FieldDropdown option id must be a string. Found "+h[1]+" in: ",h)):h[0]&&"string"!=typeof h[0]&&"string"!=typeof h[0].src&&(l=!0,console.error("Invalid option["+u+"]: Each FieldDropdown option must have a string label or image description. Found"+h[0]+" in: ",h)):(l=!0,console.error("Invalid option["+u+"]: Each FieldDropdown option must be an array. Found: ",h))}if(l)throw TypeError("Found invalid FieldDropdown options.")},s.fieldRegistry.register("field_dropdown",s.FieldDropdown),s.FieldLabelSerializable=function(n,l,u){s.FieldLabelSerializable.superClass_.constructor.call(this,n,l,u)},s.utils.object.inherits(s.FieldLabelSerializable,s.FieldLabel),s.FieldLabelSerializable.fromJson=function(n){var l=s.utils.replaceMessageReferences(n.text);return new s.FieldLabelSerializable(l,void 0,n)},s.FieldLabelSerializable.prototype.EDITABLE=!1,s.FieldLabelSerializable.prototype.SERIALIZABLE=!0,s.fieldRegistry.register("field_label_serializable",s.FieldLabelSerializable),s.FieldImage=function(n,l,u,h,_,b,R){if(!n)throw Error("Src value of an image field is required");if(n=s.utils.replaceMessageReferences(n),u=Number(s.utils.replaceMessageReferences(u)),l=Number(s.utils.replaceMessageReferences(l)),isNaN(u)||isNaN(l))throw Error("Height and width values of an image field must cast to numbers.");if(0>=u||0>=l)throw Error("Height and width values of an image field must be greater than 0.");this.flipRtl_=!1,this.altText_="",s.FieldImage.superClass_.constructor.call(this,n,null,R),R||(this.flipRtl_=!!b,this.altText_=s.utils.replaceMessageReferences(h)||""),this.size_=new s.utils.Size(l,u+s.FieldImage.Y_PADDING),this.imageHeight_=u,this.clickHandler_=null,"function"==typeof _&&(this.clickHandler_=_),this.imageElement_=null},s.utils.object.inherits(s.FieldImage,s.Field),s.FieldImage.prototype.DEFAULT_VALUE="",s.FieldImage.fromJson=function(n){return new s.FieldImage(n.src,n.width,n.height,void 0,void 0,void 0,n)},s.FieldImage.Y_PADDING=1,s.FieldImage.prototype.EDITABLE=!1,s.FieldImage.prototype.isDirty_=!1,s.FieldImage.prototype.configure_=function(n){s.FieldImage.superClass_.configure_.call(this,n),this.flipRtl_=!!n.flipRtl,this.altText_=s.utils.replaceMessageReferences(n.alt)||""},s.FieldImage.prototype.initView=function(){this.imageElement_=s.utils.dom.createSvgElement(s.utils.Svg.IMAGE,{height:this.imageHeight_+"px",width:this.size_.width+"px",alt:this.altText_},this.fieldGroup_),this.imageElement_.setAttributeNS(s.utils.dom.XLINK_NS,"xlink:href",this.value_),this.clickHandler_&&(this.imageElement_.style.cursor="pointer")},s.FieldImage.prototype.updateSize_=function(){},s.FieldImage.prototype.doClassValidation_=function(n){return"string"!=typeof n?null:n},s.FieldImage.prototype.doValueUpdate_=function(n){this.value_=n,this.imageElement_&&this.imageElement_.setAttributeNS(s.utils.dom.XLINK_NS,"xlink:href",String(this.value_))},s.FieldImage.prototype.getFlipRtl=function(){return this.flipRtl_},s.FieldImage.prototype.setAlt=function(n){n!=this.altText_&&(this.altText_=n||"",this.imageElement_&&this.imageElement_.setAttribute("alt",this.altText_))},s.FieldImage.prototype.showEditor_=function(){this.clickHandler_&&this.clickHandler_(this)},s.FieldImage.prototype.setOnClickHandler=function(n){this.clickHandler_=n},s.FieldImage.prototype.getText_=function(){return this.altText_},s.fieldRegistry.register("field_image",s.FieldImage),s.FieldMultilineInput=function(n,l,u){s.FieldMultilineInput.superClass_.constructor.call(this,n,l,u),this.textGroup_=null,this.maxLines_=1/0,this.isOverflowedY_=!1},s.utils.object.inherits(s.FieldMultilineInput,s.FieldTextInput),s.FieldMultilineInput.prototype.configure_=function(n){s.FieldMultilineInput.superClass_.configure_.call(this,n),n.maxLines&&this.setMaxLines(n.maxLines)},s.FieldMultilineInput.fromJson=function(n){var l=s.utils.replaceMessageReferences(n.text);return new s.FieldMultilineInput(l,void 0,n)},s.FieldMultilineInput.prototype.toXml=function(n){return n.textContent=this.getValue().replace(/\n/g,"&#10;"),n},s.FieldMultilineInput.prototype.fromXml=function(n){this.setValue(n.textContent.replace(/&#10;/g,"\n"))},s.FieldMultilineInput.prototype.initView=function(){this.createBorderRect_(),this.textGroup_=s.utils.dom.createSvgElement(s.utils.Svg.G,{class:"blocklyEditableText"},this.fieldGroup_)},s.FieldMultilineInput.prototype.getDisplayText_=function(){var n=this.getText();if(!n)return s.Field.NBSP;var l=n.split("\n");n="";for(var u=this.isOverflowedY_?this.maxLines_:l.length,h=0;h<u;h++){var _=l[h];_.length>this.maxDisplayLength?_=_.substring(0,this.maxDisplayLength-4)+"...":this.isOverflowedY_&&h===u-1&&(_=_.substring(0,_.length-3)+"..."),n+=_=_.replace(/\s/g,s.Field.NBSP),h!==u-1&&(n+="\n")}return this.sourceBlock_.RTL&&(n+="\u200f"),n},s.FieldMultilineInput.prototype.doValueUpdate_=function(n){s.FieldMultilineInput.superClass_.doValueUpdate_.call(this,n),this.isOverflowedY_=this.value_.split("\n").length>this.maxLines_},s.FieldMultilineInput.prototype.render_=function(){for(var n;n=this.textGroup_.firstChild;)this.textGroup_.removeChild(n);n=this.getDisplayText_().split("\n");for(var l=0,u=0;u<n.length;u++){var h=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING;s.utils.dom.createSvgElement(s.utils.Svg.TEXT,{class:"blocklyText blocklyMultilineText",x:this.getConstants().FIELD_BORDER_RECT_X_PADDING,y:l+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,dy:this.getConstants().FIELD_TEXT_BASELINE},this.textGroup_).appendChild(document.createTextNode(n[u])),l+=h}this.isBeingEdited_&&(n=this.htmlInput_,this.isOverflowedY_?s.utils.dom.addClass(n,"blocklyHtmlTextAreaInputOverflowedY"):s.utils.dom.removeClass(n,"blocklyHtmlTextAreaInputOverflowedY")),this.updateSize_(),this.isBeingEdited_&&(this.sourceBlock_.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),n=this.htmlInput_,this.isTextValid_?(s.utils.dom.removeClass(n,"blocklyInvalidInput"),s.utils.aria.setState(n,s.utils.aria.State.INVALID,!1)):(s.utils.dom.addClass(n,"blocklyInvalidInput"),s.utils.aria.setState(n,s.utils.aria.State.INVALID,!0)))},s.FieldMultilineInput.prototype.updateSize_=function(){for(var n=this.textGroup_.childNodes,l=0,u=0,h=0;h<n.length;h++){var _=s.utils.dom.getTextWidth(n[h]);_>l&&(l=_),u+=this.getConstants().FIELD_TEXT_HEIGHT+(0<h?this.getConstants().FIELD_BORDER_RECT_Y_PADDING:0)}if(this.isBeingEdited_){n=this.value_.split("\n"),_=s.utils.dom.createSvgElement(s.utils.Svg.TEXT,{class:"blocklyText blocklyMultilineText"});var b=this.getConstants().FIELD_TEXT_FONTSIZE,R=this.getConstants().FIELD_TEXT_FONTWEIGHT,O=this.getConstants().FIELD_TEXT_FONTFAMILY;for(h=0;h<n.length;h++){n[h].length>this.maxDisplayLength&&(n[h]=n[h].substring(0,this.maxDisplayLength)),_.textContent=n[h];var H=s.utils.dom.getFastTextWidth(_,b,R,O);H>l&&(l=H)}l+=this.htmlInput_.offsetWidth-this.htmlInput_.clientWidth}this.borderRect_&&(u+=2*this.getConstants().FIELD_BORDER_RECT_Y_PADDING,l+=2*this.getConstants().FIELD_BORDER_RECT_X_PADDING,this.borderRect_.setAttribute("width",l),this.borderRect_.setAttribute("height",u)),this.size_.width=l,this.size_.height=u,this.positionBorderRect_()},s.FieldMultilineInput.prototype.showEditor_=function(n,l){s.FieldMultilineInput.superClass_.showEditor_.call(this,n,l),this.forceRerender()},s.FieldMultilineInput.prototype.widgetCreate_=function(){var n=s.WidgetDiv.DIV,l=this.workspace_.getScale(),u=document.createElement("textarea");u.className="blocklyHtmlInput blocklyHtmlTextAreaInput",u.setAttribute("spellcheck",this.spellcheck_);var h=this.getConstants().FIELD_TEXT_FONTSIZE*l+"pt";n.style.fontSize=h,u.style.fontSize=h,u.style.borderRadius=s.FieldTextInput.BORDERRADIUS*l+"px",h=this.getConstants().FIELD_BORDER_RECT_X_PADDING*l;var _=this.getConstants().FIELD_BORDER_RECT_Y_PADDING*l/2;return u.style.padding=_+"px "+h+"px "+_+"px "+h+"px",h=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,u.style.lineHeight=h*l+"px",n.appendChild(u),u.value=u.defaultValue=this.getEditorText_(this.value_),u.untypedDefaultValue_=this.value_,u.oldValue_=null,s.utils.userAgent.GECKO?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.bindInputEvents_(u),u},s.FieldMultilineInput.prototype.setMaxLines=function(n){"number"==typeof n&&0<n&&n!==this.maxLines_&&(this.maxLines_=n,this.forceRerender())},s.FieldMultilineInput.prototype.getMaxLines=function(){return this.maxLines_},s.FieldMultilineInput.prototype.onHtmlInputKeyDown_=function(n){n.keyCode!==s.utils.KeyCodes.ENTER&&s.FieldMultilineInput.superClass_.onHtmlInputKeyDown_.call(this,n)},s.Css.register(".blocklyHtmlTextAreaInput {,font-family: monospace;,resize: none;,overflow: hidden;,height: 100%;,text-align: left;,},.blocklyHtmlTextAreaInputOverflowedY {,overflow-y: scroll;,}".split(",")),s.fieldRegistry.register("field_multilinetext",s.FieldMultilineInput),s.FieldNumber=function(n,l,u,h,_,b){this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces_=null,s.FieldNumber.superClass_.constructor.call(this,n,_,b),b||this.setConstraints(l,u,h)},s.utils.object.inherits(s.FieldNumber,s.FieldTextInput),s.FieldNumber.prototype.DEFAULT_VALUE=0,s.FieldNumber.fromJson=function(n){return new s.FieldNumber(n.value,void 0,void 0,void 0,void 0,n)},s.FieldNumber.prototype.SERIALIZABLE=!0,s.FieldNumber.prototype.configure_=function(n){s.FieldNumber.superClass_.configure_.call(this,n),this.setMinInternal_(n.min),this.setMaxInternal_(n.max),this.setPrecisionInternal_(n.precision)},s.FieldNumber.prototype.setConstraints=function(n,l,u){this.setMinInternal_(n),this.setMaxInternal_(l),this.setPrecisionInternal_(u),this.setValue(this.getValue())},s.FieldNumber.prototype.setMin=function(n){this.setMinInternal_(n),this.setValue(this.getValue())},s.FieldNumber.prototype.setMinInternal_=function(n){null==n?this.min_=-1/0:(n=Number(n),isNaN(n)||(this.min_=n))},s.FieldNumber.prototype.getMin=function(){return this.min_},s.FieldNumber.prototype.setMax=function(n){this.setMaxInternal_(n),this.setValue(this.getValue())},s.FieldNumber.prototype.setMaxInternal_=function(n){null==n?this.max_=1/0:(n=Number(n),isNaN(n)||(this.max_=n))},s.FieldNumber.prototype.getMax=function(){return this.max_},s.FieldNumber.prototype.setPrecision=function(n){this.setPrecisionInternal_(n),this.setValue(this.getValue())},s.FieldNumber.prototype.setPrecisionInternal_=function(n){this.precision_=Number(n)||0;var l=String(this.precision_);-1!=l.indexOf("e")&&(l=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));var u=l.indexOf(".");this.decimalPlaces_=-1==u?n?0:null:l.length-u-1},s.FieldNumber.prototype.getPrecision=function(){return this.precision_},s.FieldNumber.prototype.doClassValidation_=function(n){return null===n||(n=(n=(n=(n=String(n)).replace(/O/gi,"0")).replace(/,/g,"")).replace(/infinity/i,"Infinity"),n=Number(n||0),isNaN(n))?null:(n=Math.min(Math.max(n,this.min_),this.max_),this.precision_&&isFinite(n)&&(n=Math.round(n/this.precision_)*this.precision_),null!=this.decimalPlaces_&&(n=Number(n.toFixed(this.decimalPlaces_))),n)},s.FieldNumber.prototype.widgetCreate_=function(){var n=s.FieldNumber.superClass_.widgetCreate_.call(this);return-1/0<this.min_&&s.utils.aria.setState(n,s.utils.aria.State.VALUEMIN,this.min_),1/0>this.max_&&s.utils.aria.setState(n,s.utils.aria.State.VALUEMAX,this.max_),n},s.fieldRegistry.register("field_number",s.FieldNumber),s.FieldVariable=function(n,l,u,h,_){this.menuGenerator_=s.FieldVariable.dropdownCreate,this.defaultVariableName="string"==typeof n?n:"",this.size_=new s.utils.Size(0,0),_&&this.configure_(_),l&&this.setValidator(l),_||this.setTypes_(u,h)},s.utils.object.inherits(s.FieldVariable,s.FieldDropdown),s.FieldVariable.fromJson=function(n){var l=s.utils.replaceMessageReferences(n.variable);return new s.FieldVariable(l,void 0,void 0,void 0,n)},s.FieldVariable.prototype.SERIALIZABLE=!0,s.FieldVariable.prototype.configure_=function(n){s.FieldVariable.superClass_.configure_.call(this,n),this.setTypes_(n.variableTypes,n.defaultType)},s.FieldVariable.prototype.initModel=function(){if(!this.variable_){var n=s.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,null,this.defaultVariableName,this.defaultType_);this.doValueUpdate_(n.getId())}},s.FieldVariable.prototype.shouldAddBorderRect_=function(){return s.FieldVariable.superClass_.shouldAddBorderRect_.call(this)&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||"variables_get"!=this.sourceBlock_.type)},s.FieldVariable.prototype.fromXml=function(n){var l=n.getAttribute("id"),u=n.textContent,h=n.getAttribute("variabletype")||n.getAttribute("variableType")||"";if(l=s.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,l,u,h),null!=h&&h!==l.type)throw Error("Serialized variable type with id '"+l.getId()+"' had type "+l.type+", and does not match variable field that references it: "+s.Xml.domToText(n)+".");this.setValue(l.getId())},s.FieldVariable.prototype.toXml=function(n){return this.initModel(),n.id=this.variable_.getId(),n.textContent=this.variable_.name,this.variable_.type&&n.setAttribute("variabletype",this.variable_.type),n},s.FieldVariable.prototype.setSourceBlock=function(n){if(n.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");s.FieldVariable.superClass_.setSourceBlock.call(this,n)},s.FieldVariable.prototype.getValue=function(){return this.variable_?this.variable_.getId():null},s.FieldVariable.prototype.getText=function(){return this.variable_?this.variable_.name:""},s.FieldVariable.prototype.getVariable=function(){return this.variable_},s.FieldVariable.prototype.getValidator=function(){return this.variable_?this.validator_:null},s.FieldVariable.prototype.doClassValidation_=function(n){if(null===n)return null;var l=s.Variables.getVariable(this.sourceBlock_.workspace,n);return l?this.typeIsAllowed_(l=l.type)?n:(console.warn("Variable type doesn't match this field!  Type was "+l),null):(console.warn("Variable id doesn't point to a real variable! ID was "+n),null)},s.FieldVariable.prototype.doValueUpdate_=function(n){this.variable_=s.Variables.getVariable(this.sourceBlock_.workspace,n),s.FieldVariable.superClass_.doValueUpdate_.call(this,n)},s.FieldVariable.prototype.typeIsAllowed_=function(n){var l=this.getVariableTypes_();if(!l)return!0;for(var u=0;u<l.length;u++)if(n==l[u])return!0;return!1},s.FieldVariable.prototype.getVariableTypes_=function(){var n=this.variableTypes;if(null===n&&this.sourceBlock_&&this.sourceBlock_.workspace)return this.sourceBlock_.workspace.getVariableTypes();if(0==(n=n||[""]).length)throw n=this.getText(),Error("'variableTypes' of field variable "+n+" was an empty list");return n},s.FieldVariable.prototype.setTypes_=function(n,l){if(l=l||"",null==n||null==n)n=null;else{if(!Array.isArray(n))throw Error("'variableTypes' was not an array in the definition of a FieldVariable");for(var u=!1,h=0;h<n.length;h++)n[h]==l&&(u=!0);if(!u)throw Error("Invalid default type '"+l+"' in the definition of a FieldVariable")}this.defaultType_=l,this.variableTypes=n},s.FieldVariable.prototype.refreshVariableName=function(){this.forceRerender()},s.FieldVariable.dropdownCreate=function(){if(!this.variable_)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");var n=this.getText(),l=[];if(this.sourceBlock_&&this.sourceBlock_.workspace)for(var u=this.getVariableTypes_(),h=0;h<u.length;h++){var _=this.sourceBlock_.workspace.getVariablesOfType(u[h]);l=l.concat(_)}for(l.sort(s.VariableModel.compareByName),u=[],h=0;h<l.length;h++)u[h]=[l[h].name,l[h].getId()];return u.push([s.Msg.RENAME_VARIABLE,s.RENAME_VARIABLE_ID]),s.Msg.DELETE_VARIABLE&&u.push([s.Msg.DELETE_VARIABLE.replace("%1",n),s.DELETE_VARIABLE_ID]),u},s.FieldVariable.prototype.onItemSelected_=function(n,l){if(n=l.getValue(),this.sourceBlock_&&this.sourceBlock_.workspace){if(n==s.RENAME_VARIABLE_ID)return void s.Variables.renameVariable(this.sourceBlock_.workspace,this.variable_);if(n==s.DELETE_VARIABLE_ID)return void this.sourceBlock_.workspace.deleteVariableById(this.variable_.getId())}this.setValue(n)},s.FieldVariable.prototype.referencesVariables=function(){return!0},s.fieldRegistry.register("field_variable",s.FieldVariable),s.utils.svgPaths={},s.utils.svgPaths.point=function(n,l){return" "+n+","+l+" "},s.utils.svgPaths.curve=function(n,l){return" "+n+l.join("")},s.utils.svgPaths.moveTo=function(n,l){return" M "+n+","+l+" "},s.utils.svgPaths.moveBy=function(n,l){return" m "+n+","+l+" "},s.utils.svgPaths.lineTo=function(n,l){return" l "+n+","+l+" "},s.utils.svgPaths.line=function(n){return" l"+n.join("")},s.utils.svgPaths.lineOnAxis=function(n,l){return" "+n+" "+l+" "},s.utils.svgPaths.arc=function(n,l,u,h){return n+" "+u+" "+u+" "+l+h},s.blockRendering.ConstantProvider=function(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.CORNER_RADIUS=8,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=s.utils.svgPaths.moveBy(0,0),this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_TEXT_BASELINE_CENTER=!s.utils.userAgent.IE&&!s.utils.userAgent.EDGE,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2),this.embossFilterId="",this.embossFilter_=null,this.disabledPatternId="",this.disabledPattern_=null,this.debugFilterId="",this.cssNode_=this.debugFilter_=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2}},s.blockRendering.ConstantProvider.prototype.init=function(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()},s.blockRendering.ConstantProvider.prototype.setTheme=function(n){this.blockStyles=Object.create(null);var u,l=n.blockStyles;for(u in l)this.blockStyles[u]=this.validatedBlockStyle_(l[u]);this.setDynamicProperties_(n)},s.blockRendering.ConstantProvider.prototype.setDynamicProperties_=function(n){this.setFontConstants_(n),this.setComponentConstants_(n),this.ADD_START_HATS=null!=n.startHats?n.startHats:this.ADD_START_HATS},s.blockRendering.ConstantProvider.prototype.setFontConstants_=function(n){this.FIELD_TEXT_FONTFAMILY=n.fontStyle&&null!=n.fontStyle.family?n.fontStyle.family:this.FIELD_TEXT_FONTFAMILY,this.FIELD_TEXT_FONTWEIGHT=n.fontStyle&&null!=n.fontStyle.weight?n.fontStyle.weight:this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTSIZE=n.fontStyle&&null!=n.fontStyle.size?n.fontStyle.size:this.FIELD_TEXT_FONTSIZE,n=s.utils.dom.measureFontMetrics("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=n.height,this.FIELD_TEXT_BASELINE=n.baseline},s.blockRendering.ConstantProvider.prototype.setComponentConstants_=function(n){this.CURSOR_COLOUR=n.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=n.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=n.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(n.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY},s.blockRendering.ConstantProvider.prototype.getBlockStyleForColour=function(n){var l="auto_"+n;return this.blockStyles[l]||(this.blockStyles[l]=this.createBlockStyle_(n)),{style:this.blockStyles[l],name:l}},s.blockRendering.ConstantProvider.prototype.getBlockStyle=function(n){return this.blockStyles[n||""]||(n&&0==n.indexOf("auto_")?this.getBlockStyleForColour(n.substring(5)).style:this.createBlockStyle_("#000000"))},s.blockRendering.ConstantProvider.prototype.createBlockStyle_=function(n){return this.validatedBlockStyle_({colourPrimary:n})},s.blockRendering.ConstantProvider.prototype.validatedBlockStyle_=function(n){var l={};return n&&s.utils.object.mixin(l,n),n=s.utils.parseBlockColour(l.colourPrimary||"#000"),l.colourPrimary=n.hex,l.colourSecondary=l.colourSecondary?s.utils.parseBlockColour(l.colourSecondary).hex:this.generateSecondaryColour_(l.colourPrimary),l.colourTertiary=l.colourTertiary?s.utils.parseBlockColour(l.colourTertiary).hex:this.generateTertiaryColour_(l.colourPrimary),l.hat=l.hat||"",l},s.blockRendering.ConstantProvider.prototype.generateSecondaryColour_=function(n){return s.utils.colour.blend("#fff",n,.6)||n},s.blockRendering.ConstantProvider.prototype.generateTertiaryColour_=function(n){return s.utils.colour.blend("#fff",n,.3)||n},s.blockRendering.ConstantProvider.prototype.dispose=function(){this.embossFilter_&&s.utils.dom.removeNode(this.embossFilter_),this.disabledPattern_&&s.utils.dom.removeNode(this.disabledPattern_),this.debugFilter_&&s.utils.dom.removeNode(this.debugFilter_),this.cssNode_=null},s.blockRendering.ConstantProvider.prototype.makeJaggedTeeth=function(){var n=this.JAGGED_TEETH_HEIGHT,l=this.JAGGED_TEETH_WIDTH;return{height:n,width:l,path:s.utils.svgPaths.line([s.utils.svgPaths.point(l,n/4),s.utils.svgPaths.point(2*-l,n/2),s.utils.svgPaths.point(l,n/4)])}},s.blockRendering.ConstantProvider.prototype.makeStartHat=function(){var n=this.START_HAT_HEIGHT,l=this.START_HAT_WIDTH;return{height:n,width:l,path:s.utils.svgPaths.curve("c",[s.utils.svgPaths.point(30,-n),s.utils.svgPaths.point(70,-n),s.utils.svgPaths.point(l,0)])}},s.blockRendering.ConstantProvider.prototype.makePuzzleTab=function(){function n(b){var R=-(b=b?-1:1),O=u/2,H=O+2.5,W=O+.5,G=s.utils.svgPaths.point(-l,b*O);return O=s.utils.svgPaths.point(l,b*O),s.utils.svgPaths.curve("c",[s.utils.svgPaths.point(0,b*H),s.utils.svgPaths.point(-l,R*W),G])+s.utils.svgPaths.curve("s",[s.utils.svgPaths.point(l,2.5*R),O])}var l=this.TAB_WIDTH,u=this.TAB_HEIGHT,h=n(!0),_=n(!1);return{type:this.SHAPES.PUZZLE,width:l,height:u,pathDown:_,pathUp:h}},s.blockRendering.ConstantProvider.prototype.makeNotch=function(){function n(R){return s.utils.svgPaths.line([s.utils.svgPaths.point(R*h,u),s.utils.svgPaths.point(3*R,0),s.utils.svgPaths.point(R*h,-u)])}var l=this.NOTCH_WIDTH,u=this.NOTCH_HEIGHT,h=(l-3)/2,_=n(1),b=n(-1);return{type:this.SHAPES.NOTCH,width:l,height:u,pathLeft:_,pathRight:b}},s.blockRendering.ConstantProvider.prototype.makeInsideCorners=function(){var n=this.CORNER_RADIUS;return{width:n,height:n,pathTop:s.utils.svgPaths.arc("a","0 0,0",n,s.utils.svgPaths.point(-n,n)),pathBottom:s.utils.svgPaths.arc("a","0 0,0",n,s.utils.svgPaths.point(n,n))}},s.blockRendering.ConstantProvider.prototype.makeOutsideCorners=function(){var n=this.CORNER_RADIUS,l=s.utils.svgPaths.moveBy(0,n)+s.utils.svgPaths.arc("a","0 0,1",n,s.utils.svgPaths.point(n,-n)),u=s.utils.svgPaths.arc("a","0 0,1",n,s.utils.svgPaths.point(n,n)),h=s.utils.svgPaths.arc("a","0 0,1",n,s.utils.svgPaths.point(-n,-n));return{topLeft:l,topRight:u,bottomRight:s.utils.svgPaths.arc("a","0 0,1",n,s.utils.svgPaths.point(-n,n)),bottomLeft:h,rightHeight:n}},s.blockRendering.ConstantProvider.prototype.shapeFor=function(n){switch(n.type){case s.connectionTypes.INPUT_VALUE:case s.connectionTypes.OUTPUT_VALUE:return this.PUZZLE_TAB;case s.connectionTypes.PREVIOUS_STATEMENT:case s.connectionTypes.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}},s.blockRendering.ConstantProvider.prototype.createDom=function(n,l,u){this.injectCSS_(l,u),n=s.utils.dom.createSvgElement(s.utils.Svg.DEFS,{},n),l=s.utils.dom.createSvgElement(s.utils.Svg.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},n),s.utils.dom.createSvgElement(s.utils.Svg.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},l),u=s.utils.dom.createSvgElement(s.utils.Svg.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},l),s.utils.dom.createSvgElement(s.utils.Svg.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},u),s.utils.dom.createSvgElement(s.utils.Svg.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},l),s.utils.dom.createSvgElement(s.utils.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},l),this.embossFilterId=l.id,this.embossFilter_=l,l=s.utils.dom.createSvgElement(s.utils.Svg.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},n),s.utils.dom.createSvgElement(s.utils.Svg.RECT,{width:10,height:10,fill:"#aaa"},l),s.utils.dom.createSvgElement(s.utils.Svg.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},l),this.disabledPatternId=l.id,this.disabledPattern_=l,s.blockRendering.Debug&&(n=s.utils.dom.createSvgElement(s.utils.Svg.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},n),l=s.utils.dom.createSvgElement(s.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},n),s.utils.dom.createSvgElement(s.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},l),s.utils.dom.createSvgElement(s.utils.Svg.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},n),s.utils.dom.createSvgElement(s.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},n),this.debugFilterId=n.id,this.debugFilter_=n)},s.blockRendering.ConstantProvider.prototype.injectCSS_=function(n,l){l=this.getCSS_(l),n="blockly-renderer-style-"+n,this.cssNode_=document.getElementById(n);var u=l.join("\n");this.cssNode_?this.cssNode_.firstChild.textContent=u:((l=document.createElement("style")).id=n,n=document.createTextNode(u),l.appendChild(n),document.head.insertBefore(l,document.head.firstChild),this.cssNode_=l)},s.blockRendering.ConstantProvider.prototype.getCSS_=function(n){return[n+" .blocklyText, ",n+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",n+" .blocklyText {","fill: #fff;","}",n+" .blocklyNonEditableText>rect,",n+" .blocklyEditableText>rect {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","fill-opacity: .6;","stroke: none;","}",n+" .blocklyNonEditableText>text,",n+" .blocklyEditableText>text {","fill: #000;","}",n+" .blocklyFlyoutLabelText {","fill: #000;","}",n+" .blocklyText.blocklyBubbleText {","fill: #000;","}",n+" .blocklyEditableText:not(.editing):hover>rect {","stroke: #fff;","stroke-width: 2;","}",n+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","}",n+" .blocklySelected>.blocklyPath {","stroke: #fc3;","stroke-width: 3px;","}",n+" .blocklyHighlightedConnectionPath {","stroke: #fc3;","}",n+" .blocklyReplaceable .blocklyPath {","fill-opacity: .5;","}",n+" .blocklyReplaceable .blocklyPathLight,",n+" .blocklyReplaceable .blocklyPathDark {","display: none;","}",n+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]},s.blockRendering.Types={NONE:0,FIELD:1,HAT:2,ICON:4,SPACER:8,BETWEEN_ROW_SPACER:16,IN_ROW_SPACER:32,EXTERNAL_VALUE_INPUT:64,INPUT:128,INLINE_INPUT:256,STATEMENT_INPUT:512,CONNECTION:1024,PREVIOUS_CONNECTION:2048,NEXT_CONNECTION:4096,OUTPUT_CONNECTION:8192,CORNER:16384,LEFT_SQUARE_CORNER:32768,LEFT_ROUND_CORNER:65536,RIGHT_SQUARE_CORNER:131072,RIGHT_ROUND_CORNER:262144,JAGGED_EDGE:524288,ROW:1048576,TOP_ROW:2097152,BOTTOM_ROW:4194304,INPUT_ROW:8388608},s.blockRendering.Types.LEFT_CORNER=s.blockRendering.Types.LEFT_SQUARE_CORNER|s.blockRendering.Types.LEFT_ROUND_CORNER,s.blockRendering.Types.RIGHT_CORNER=s.blockRendering.Types.RIGHT_SQUARE_CORNER|s.blockRendering.Types.RIGHT_ROUND_CORNER,s.blockRendering.Types.nextTypeValue_=16777216,s.blockRendering.Types.getType=function(n){return Object.prototype.hasOwnProperty.call(s.blockRendering.Types,n)||(s.blockRendering.Types[n]=s.blockRendering.Types.nextTypeValue_,s.blockRendering.Types.nextTypeValue_<<=1),s.blockRendering.Types[n]},s.blockRendering.Types.isField=function(n){return n.type&s.blockRendering.Types.FIELD},s.blockRendering.Types.isHat=function(n){return n.type&s.blockRendering.Types.HAT},s.blockRendering.Types.isIcon=function(n){return n.type&s.blockRendering.Types.ICON},s.blockRendering.Types.isSpacer=function(n){return n.type&s.blockRendering.Types.SPACER},s.blockRendering.Types.isInRowSpacer=function(n){return n.type&s.blockRendering.Types.IN_ROW_SPACER},s.blockRendering.Types.isInput=function(n){return n.type&s.blockRendering.Types.INPUT},s.blockRendering.Types.isExternalInput=function(n){return n.type&s.blockRendering.Types.EXTERNAL_VALUE_INPUT},s.blockRendering.Types.isInlineInput=function(n){return n.type&s.blockRendering.Types.INLINE_INPUT},s.blockRendering.Types.isStatementInput=function(n){return n.type&s.blockRendering.Types.STATEMENT_INPUT},s.blockRendering.Types.isPreviousConnection=function(n){return n.type&s.blockRendering.Types.PREVIOUS_CONNECTION},s.blockRendering.Types.isNextConnection=function(n){return n.type&s.blockRendering.Types.NEXT_CONNECTION},s.blockRendering.Types.isPreviousOrNextConnection=function(n){return n.type&(s.blockRendering.Types.PREVIOUS_CONNECTION|s.blockRendering.Types.NEXT_CONNECTION)},s.blockRendering.Types.isLeftRoundedCorner=function(n){return n.type&s.blockRendering.Types.LEFT_ROUND_CORNER},s.blockRendering.Types.isRightRoundedCorner=function(n){return n.type&s.blockRendering.Types.RIGHT_ROUND_CORNER},s.blockRendering.Types.isLeftSquareCorner=function(n){return n.type&s.blockRendering.Types.LEFT_SQUARE_CORNER},s.blockRendering.Types.isRightSquareCorner=function(n){return n.type&s.blockRendering.Types.RIGHT_SQUARE_CORNER},s.blockRendering.Types.isCorner=function(n){return n.type&s.blockRendering.Types.CORNER},s.blockRendering.Types.isJaggedEdge=function(n){return n.type&s.blockRendering.Types.JAGGED_EDGE},s.blockRendering.Types.isRow=function(n){return n.type&s.blockRendering.Types.ROW},s.blockRendering.Types.isBetweenRowSpacer=function(n){return n.type&s.blockRendering.Types.BETWEEN_ROW_SPACER},s.blockRendering.Types.isTopRow=function(n){return n.type&s.blockRendering.Types.TOP_ROW},s.blockRendering.Types.isBottomRow=function(n){return n.type&s.blockRendering.Types.BOTTOM_ROW},s.blockRendering.Types.isTopOrBottomRow=function(n){return n.type&(s.blockRendering.Types.TOP_ROW|s.blockRendering.Types.BOTTOM_ROW)},s.blockRendering.Types.isInputRow=function(n){return n.type&s.blockRendering.Types.INPUT_ROW},s.blockRendering.Measurable=function(n){this.height=this.width=0,this.type=s.blockRendering.Types.NONE,this.centerline=this.xPos=0,this.constants_=n,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT},s.blockRendering.Connection=function(n,l){s.blockRendering.Connection.superClass_.constructor.call(this,n),this.connectionModel=l,this.shape=this.constants_.shapeFor(l),this.isDynamicShape=!!this.shape.isDynamic,this.type|=s.blockRendering.Types.CONNECTION},s.utils.object.inherits(s.blockRendering.Connection,s.blockRendering.Measurable),s.blockRendering.OutputConnection=function(n,l){s.blockRendering.OutputConnection.superClass_.constructor.call(this,n,l),this.type|=s.blockRendering.Types.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=0},s.utils.object.inherits(s.blockRendering.OutputConnection,s.blockRendering.Connection),s.blockRendering.PreviousConnection=function(n,l){s.blockRendering.PreviousConnection.superClass_.constructor.call(this,n,l),this.type|=s.blockRendering.Types.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},s.utils.object.inherits(s.blockRendering.PreviousConnection,s.blockRendering.Connection),s.blockRendering.NextConnection=function(n,l){s.blockRendering.NextConnection.superClass_.constructor.call(this,n,l),this.type|=s.blockRendering.Types.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},s.utils.object.inherits(s.blockRendering.NextConnection,s.blockRendering.Connection),s.blockRendering.InputConnection=function(n,l){s.blockRendering.InputConnection.superClass_.constructor.call(this,n,l.connection),this.type|=s.blockRendering.Types.INPUT,this.input=l,this.align=l.align,(this.connectedBlock=l.connection&&l.connection.targetBlock()?l.connection.targetBlock():null)?(n=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=n.width,this.connectedBlockHeight=n.height):this.connectedBlockHeight=this.connectedBlockWidth=0,this.connectionOffsetY=this.connectionOffsetX=0},s.utils.object.inherits(s.blockRendering.InputConnection,s.blockRendering.Connection),s.blockRendering.InlineInput=function(n,l){s.blockRendering.InlineInput.superClass_.constructor.call(this,n,l),this.type|=s.blockRendering.Types.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY=this.isDynamicShape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=this.isDynamicShape?this.shape.connectionOffsetX(this.connectionWidth):0},s.utils.object.inherits(s.blockRendering.InlineInput,s.blockRendering.InputConnection),s.blockRendering.StatementInput=function(n,l){s.blockRendering.StatementInput.superClass_.constructor.call(this,n,l),this.type|=s.blockRendering.Types.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width},s.utils.object.inherits(s.blockRendering.StatementInput,s.blockRendering.InputConnection),s.blockRendering.ExternalValueInput=function(n,l){s.blockRendering.ExternalValueInput.superClass_.constructor.call(this,n,l),this.type|=s.blockRendering.Types.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width},s.utils.object.inherits(s.blockRendering.ExternalValueInput,s.blockRendering.InputConnection),s.blockRendering.Icon=function(n,l){s.blockRendering.Icon.superClass_.constructor.call(this,n),this.icon=l,this.isVisible=l.isVisible(),this.type|=s.blockRendering.Types.ICON,n=l.getCorrectedSize(),this.height=n.height,this.width=n.width},s.utils.object.inherits(s.blockRendering.Icon,s.blockRendering.Measurable),s.blockRendering.JaggedEdge=function(n){s.blockRendering.JaggedEdge.superClass_.constructor.call(this,n),this.type|=s.blockRendering.Types.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width},s.utils.object.inherits(s.blockRendering.JaggedEdge,s.blockRendering.Measurable),s.blockRendering.Field=function(n,l,u){s.blockRendering.Field.superClass_.constructor.call(this,n),this.field=l,this.isEditable=l.EDITABLE,this.flipRtl=l.getFlipRtl(),this.type|=s.blockRendering.Types.FIELD,n=this.field.getSize(),this.height=n.height,this.width=n.width,this.parentInput=u},s.utils.object.inherits(s.blockRendering.Field,s.blockRendering.Measurable),s.blockRendering.Hat=function(n){s.blockRendering.Hat.superClass_.constructor.call(this,n),this.type|=s.blockRendering.Types.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height},s.utils.object.inherits(s.blockRendering.Hat,s.blockRendering.Measurable),s.blockRendering.SquareCorner=function(n,l){s.blockRendering.SquareCorner.superClass_.constructor.call(this,n),this.type=(l&&"left"!=l?s.blockRendering.Types.RIGHT_SQUARE_CORNER:s.blockRendering.Types.LEFT_SQUARE_CORNER)|s.blockRendering.Types.CORNER,this.width=this.height=this.constants_.NO_PADDING},s.utils.object.inherits(s.blockRendering.SquareCorner,s.blockRendering.Measurable),s.blockRendering.RoundCorner=function(n,l){s.blockRendering.RoundCorner.superClass_.constructor.call(this,n),this.type=(l&&"left"!=l?s.blockRendering.Types.RIGHT_ROUND_CORNER:s.blockRendering.Types.LEFT_ROUND_CORNER)|s.blockRendering.Types.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2},s.utils.object.inherits(s.blockRendering.RoundCorner,s.blockRendering.Measurable),s.blockRendering.InRowSpacer=function(n,l){s.blockRendering.InRowSpacer.superClass_.constructor.call(this,n),this.type=this.type|s.blockRendering.Types.SPACER|s.blockRendering.Types.IN_ROW_SPACER,this.width=l,this.height=this.constants_.SPACER_DEFAULT_HEIGHT},s.utils.object.inherits(s.blockRendering.InRowSpacer,s.blockRendering.Measurable),s.blockRendering.Row=function(n){this.type=s.blockRendering.Types.ROW,this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=this.hasStatement=this.hasExternalInput=!1,this.constants_=n,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT,this.align=null},s.blockRendering.Row.prototype.measure=function(){throw Error("Unexpected attempt to measure a base Row.")},s.blockRendering.Row.prototype.getLastInput=function(){for(var l,n=this.elements.length-1;l=this.elements[n];n--)if(s.blockRendering.Types.isInput(l))return l;return null},s.blockRendering.Row.prototype.startsWithElemSpacer=function(){return!0},s.blockRendering.Row.prototype.endsWithElemSpacer=function(){return!0},s.blockRendering.Row.prototype.getFirstSpacer=function(){for(var l,n=0;l=this.elements[n];n++)if(s.blockRendering.Types.isSpacer(l))return l;return null},s.blockRendering.Row.prototype.getLastSpacer=function(){for(var l,n=this.elements.length-1;l=this.elements[n];n--)if(s.blockRendering.Types.isSpacer(l))return l;return null},s.blockRendering.TopRow=function(n){s.blockRendering.TopRow.superClass_.constructor.call(this,n),this.type|=s.blockRendering.Types.TOP_ROW,this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null},s.utils.object.inherits(s.blockRendering.TopRow,s.blockRendering.Row),s.blockRendering.TopRow.prototype.hasLeftSquareCorner=function(n){var l=(n.hat?"cap"===n.hat:this.constants_.ADD_START_HATS)&&!n.outputConnection&&!n.previousConnection,u=n.getPreviousBlock();return!!n.outputConnection||l||!!u&&u.getNextBlock()==n},s.blockRendering.TopRow.prototype.hasRightSquareCorner=function(n){return!0},s.blockRendering.TopRow.prototype.measure=function(){for(var _,n=0,l=0,u=0,h=0;_=this.elements[h];h++)l+=_.width,s.blockRendering.Types.isSpacer(_)||(s.blockRendering.Types.isHat(_)?u=Math.max(u,_.ascenderHeight):n=Math.max(n,_.height));this.width=Math.max(this.minWidth,l),this.height=Math.max(this.minHeight,n)+u,this.capline=this.ascenderHeight=u,this.widthWithConnectedBlocks=this.width},s.blockRendering.TopRow.prototype.startsWithElemSpacer=function(){return!1},s.blockRendering.TopRow.prototype.endsWithElemSpacer=function(){return!1},s.blockRendering.BottomRow=function(n){s.blockRendering.BottomRow.superClass_.constructor.call(this,n),this.type|=s.blockRendering.Types.BOTTOM_ROW,this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0},s.utils.object.inherits(s.blockRendering.BottomRow,s.blockRendering.Row),s.blockRendering.BottomRow.prototype.hasLeftSquareCorner=function(n){return!!n.outputConnection||!!n.getNextBlock()},s.blockRendering.BottomRow.prototype.hasRightSquareCorner=function(n){return!0},s.blockRendering.BottomRow.prototype.measure=function(){for(var _,n=0,l=0,u=0,h=0;_=this.elements[h];h++)l+=_.width,s.blockRendering.Types.isSpacer(_)||(s.blockRendering.Types.isNextConnection(_)?u=Math.max(u,_.height):n=Math.max(n,_.height));this.width=Math.max(this.minWidth,l),this.height=Math.max(this.minHeight,n)+u,this.descenderHeight=u,this.widthWithConnectedBlocks=this.width},s.blockRendering.BottomRow.prototype.startsWithElemSpacer=function(){return!1},s.blockRendering.BottomRow.prototype.endsWithElemSpacer=function(){return!1},s.blockRendering.SpacerRow=function(n,l,u){s.blockRendering.SpacerRow.superClass_.constructor.call(this,n),this.type=this.type|s.blockRendering.Types.SPACER|s.blockRendering.Types.BETWEEN_ROW_SPACER,this.width=u,this.height=l,this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.elements=[new s.blockRendering.InRowSpacer(this.constants_,u)]},s.utils.object.inherits(s.blockRendering.SpacerRow,s.blockRendering.Row),s.blockRendering.SpacerRow.prototype.measure=function(){},s.blockRendering.InputRow=function(n){s.blockRendering.InputRow.superClass_.constructor.call(this,n),this.type|=s.blockRendering.Types.INPUT_ROW,this.connectedBlockWidths=0},s.utils.object.inherits(s.blockRendering.InputRow,s.blockRendering.Row),s.blockRendering.InputRow.prototype.measure=function(){this.width=this.minWidth,this.height=this.minHeight;for(var u,n=0,l=0;u=this.elements[l];l++)this.width+=u.width,s.blockRendering.Types.isInput(u)&&(s.blockRendering.Types.isStatementInput(u)?n+=u.connectedBlockWidth:s.blockRendering.Types.isExternalInput(u)&&0!=u.connectedBlockWidth&&(n+=u.connectedBlockWidth-u.connectionWidth)),s.blockRendering.Types.isSpacer(u)||(this.height=Math.max(this.height,u.height));this.connectedBlockWidths=n,this.widthWithConnectedBlocks=this.width+n},s.blockRendering.InputRow.prototype.endsWithElemSpacer=function(){return!this.hasExternalInput&&!this.hasStatement},s.blockRendering.RenderInfo=function(n,l){this.block_=l,this.renderer_=n,this.constants_=this.renderer_.getConstants(),this.outputConnection=l.outputConnection?new s.blockRendering.OutputConnection(this.constants_,l.outputConnection):null,this.isInline=l.getInputsInline()&&!l.isCollapsed(),this.isCollapsed=l.isCollapsed(),this.isInsertionMarker=l.isInsertionMarker(),this.RTL=l.RTL,this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.hiddenIcons=[],this.topRow=new s.blockRendering.TopRow(this.constants_),this.bottomRow=new s.blockRendering.BottomRow(this.constants_),this.startY=this.startX=0},s.blockRendering.RenderInfo.prototype.getRenderer=function(){return this.renderer_},s.blockRendering.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},s.blockRendering.RenderInfo.prototype.createRows_=function(){this.populateTopRow_(),this.rows.push(this.topRow);var n=new s.blockRendering.InputRow(this.constants_);this.inputRows.push(n);for(var h,l=this.block_.getIcons(),u=0;h=l[u];u++){var _=new s.blockRendering.Icon(this.constants_,h);this.isCollapsed&&h.collapseHidden?this.hiddenIcons.push(_):n.elements.push(_)}for(h=null,u=0;l=this.block_.inputList[u];u++)if(l.isVisible()){for(this.shouldStartNewRow_(l,h)&&(this.rows.push(n),n=new s.blockRendering.InputRow(this.constants_),this.inputRows.push(n)),h=0;_=l.fieldRow[h];h++)n.elements.push(new s.blockRendering.Field(this.constants_,_,l));this.addInput_(l,n),h=l}this.isCollapsed&&(n.hasJaggedEdge=!0,n.elements.push(new s.blockRendering.JaggedEdge(this.constants_))),(n.elements.length||n.hasDummyInput)&&this.rows.push(n),this.populateBottomRow_(),this.rows.push(this.bottomRow)},s.blockRendering.RenderInfo.prototype.populateTopRow_=function(){var n=!!this.block_.previousConnection,l=(this.block_.hat?"cap"===this.block_.hat:this.constants_.ADD_START_HATS)&&!this.outputConnection&&!n,u=this.topRow.hasLeftSquareCorner(this.block_)?s.blockRendering.SquareCorner:s.blockRendering.RoundCorner;this.topRow.elements.push(new u(this.constants_)),l?(n=new s.blockRendering.Hat(this.constants_),this.topRow.elements.push(n),this.topRow.capline=n.ascenderHeight):n&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new s.blockRendering.PreviousConnection(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.topRow.minHeight=this.block_.inputList.length&&this.block_.inputList[0].type==s.inputTypes.STATEMENT&&!this.block_.isCollapsed()?this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.constants_.TOP_ROW_MIN_HEIGHT,u=this.topRow.hasRightSquareCorner(this.block_)?s.blockRendering.SquareCorner:s.blockRendering.RoundCorner,this.topRow.elements.push(new u(this.constants_,"right"))},s.blockRendering.RenderInfo.prototype.populateBottomRow_=function(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==s.inputTypes.STATEMENT?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new s.blockRendering.SquareCorner(this.constants_)):this.bottomRow.elements.push(new s.blockRendering.RoundCorner(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new s.blockRendering.NextConnection(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new s.blockRendering.SquareCorner(this.constants_,"right")):this.bottomRow.elements.push(new s.blockRendering.RoundCorner(this.constants_,"right"))},s.blockRendering.RenderInfo.prototype.addInput_=function(n,l){this.isInline&&n.type==s.inputTypes.VALUE?(l.elements.push(new s.blockRendering.InlineInput(this.constants_,n)),l.hasInlineInput=!0):n.type==s.inputTypes.STATEMENT?(l.elements.push(new s.blockRendering.StatementInput(this.constants_,n)),l.hasStatement=!0):n.type==s.inputTypes.VALUE?(l.elements.push(new s.blockRendering.ExternalValueInput(this.constants_,n)),l.hasExternalInput=!0):n.type==s.inputTypes.DUMMY&&(l.minHeight=Math.max(l.minHeight,n.getSourceBlock()&&n.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),l.hasDummyInput=!0),null==l.align&&(l.align=n.align)},s.blockRendering.RenderInfo.prototype.shouldStartNewRow_=function(n,l){return!(!l||n.type!=s.inputTypes.STATEMENT&&l.type!=s.inputTypes.STATEMENT&&(n.type!=s.inputTypes.VALUE&&n.type!=s.inputTypes.DUMMY||this.isInline))},s.blockRendering.RenderInfo.prototype.addElemSpacing_=function(){for(var l,n=0;l=this.rows[n];n++){var u=l.elements;if(l.elements=[],l.startsWithElemSpacer()&&l.elements.push(new s.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,u[0]))),u.length){for(var h=0;h<u.length-1;h++){l.elements.push(u[h]);var _=this.getInRowSpacing_(u[h],u[h+1]);l.elements.push(new s.blockRendering.InRowSpacer(this.constants_,_))}l.elements.push(u[u.length-1]),l.endsWithElemSpacer()&&l.elements.push(new s.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(u[u.length-1],null)))}}},s.blockRendering.RenderInfo.prototype.getInRowSpacing_=function(n,l){if(!n&&l&&s.blockRendering.Types.isStatementInput(l))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(n&&s.blockRendering.Types.isInput(n)&&!l){if(s.blockRendering.Types.isExternalInput(n))return this.constants_.NO_PADDING;if(s.blockRendering.Types.isInlineInput(n))return this.constants_.LARGE_PADDING;if(s.blockRendering.Types.isStatementInput(n))return this.constants_.NO_PADDING}return n&&s.blockRendering.Types.isLeftSquareCorner(n)&&l&&(s.blockRendering.Types.isPreviousConnection(l)||s.blockRendering.Types.isNextConnection(l))?l.notchOffset:n&&s.blockRendering.Types.isLeftRoundedCorner(n)&&l&&(s.blockRendering.Types.isPreviousConnection(l)||s.blockRendering.Types.isNextConnection(l))?l.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},s.blockRendering.RenderInfo.prototype.computeBounds_=function(){for(var _,n=0,l=0,u=0,h=0;_=this.rows[h];h++){if(_.measure(),l=Math.max(l,_.width),_.hasStatement){var b=_.getLastInput();n=Math.max(n,_.width-b.width)}u=Math.max(u,_.widthWithConnectedBlocks)}for(this.statementEdge=n,this.width=l,h=0;_=this.rows[h];h++)_.hasStatement&&(_.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(l,u),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)},s.blockRendering.RenderInfo.prototype.alignRowElements_=function(){for(var l,n=0;l=this.rows[n];n++)if(l.hasStatement)this.alignStatementRow_(l);else{var u=l.width;0<(u=this.getDesiredRowWidth_(l)-u)&&this.addAlignmentPadding_(l,u),s.blockRendering.Types.isTopOrBottomRow(l)&&(l.widthWithConnectedBlocks=l.width)}},s.blockRendering.RenderInfo.prototype.getDesiredRowWidth_=function(n){return this.width-this.startX},s.blockRendering.RenderInfo.prototype.addAlignmentPadding_=function(n,l){var u=n.getFirstSpacer(),h=n.getLastSpacer();(n.hasExternalInput||n.hasStatement)&&(n.widthWithConnectedBlocks+=l),n.align==s.constants.ALIGN.LEFT?h.width+=l:n.align==s.constants.ALIGN.CENTRE?(u.width+=l/2,h.width+=l/2):n.align==s.constants.ALIGN.RIGHT?u.width+=l:h.width+=l,n.width+=l},s.blockRendering.RenderInfo.prototype.alignStatementRow_=function(n){var l=n.getLastInput(),u=n.width-l.width,h=this.statementEdge;0<(u=h-u)&&this.addAlignmentPadding_(n,u),u=n.width,h=this.getDesiredRowWidth_(n),l.width+=h-u,l.height=Math.max(l.height,n.height),n.width+=h-u,n.widthWithConnectedBlocks=Math.max(n.width,this.statementEdge+n.connectedBlockWidths)},s.blockRendering.RenderInfo.prototype.addRowSpacing_=function(){var n=this.rows;this.rows=[];for(var l=0;l<n.length;l++)this.rows.push(n[l]),l!=n.length-1&&this.rows.push(this.makeSpacerRow_(n[l],n[l+1]))},s.blockRendering.RenderInfo.prototype.makeSpacerRow_=function(n,l){var u=this.getSpacerRowHeight_(n,l),h=this.getSpacerRowWidth_(n,l);return u=new s.blockRendering.SpacerRow(this.constants_,u,h),n.hasStatement&&(u.followsStatement=!0),l.hasStatement&&(u.precedesStatement=!0),u},s.blockRendering.RenderInfo.prototype.getSpacerRowWidth_=function(n,l){return this.width-this.startX},s.blockRendering.RenderInfo.prototype.getSpacerRowHeight_=function(n,l){return this.constants_.MEDIUM_PADDING},s.blockRendering.RenderInfo.prototype.getElemCenterline_=function(n,l){return s.blockRendering.Types.isSpacer(l)?n.yPos+l.height/2:s.blockRendering.Types.isBottomRow(n)?(n=n.yPos+n.height-n.descenderHeight,s.blockRendering.Types.isNextConnection(l)?n+l.height/2:n-l.height/2):s.blockRendering.Types.isTopRow(n)?s.blockRendering.Types.isHat(l)?n.capline-l.height/2:n.capline+l.height/2:n.yPos+n.height/2},s.blockRendering.RenderInfo.prototype.recordElemPositions_=function(n){for(var h,l=n.xPos,u=0;h=n.elements[u];u++)s.blockRendering.Types.isSpacer(h)&&(h.height=n.height),h.xPos=l,h.centerline=this.getElemCenterline_(n,h),l+=h.width},s.blockRendering.RenderInfo.prototype.finalize_=function(){for(var h,n=0,l=0,u=0;h=this.rows[u];u++)h.yPos=l,h.xPos=this.startX,l+=h.height,n=Math.max(n,h.widthWithConnectedBlocks),this.recordElemPositions_(h);this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(n=Math.max(n,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.widthWithChildren=n+this.startX,this.height=l,this.startY=this.topRow.capline,this.bottomRow.baseline=l-this.bottomRow.descenderHeight},s.blockRendering.Debug=function(n){this.debugElements_=[],this.svgRoot_=null,this.constants_=n},s.blockRendering.Debug.config={rowSpacers:!0,elemSpacers:!0,rows:!0,elems:!0,connections:!0,blockBounds:!0,connectedBlockBounds:!0,render:!0},s.blockRendering.Debug.prototype.clearElems=function(){for(var l,n=0;l=this.debugElements_[n];n++)s.utils.dom.removeNode(l);this.debugElements_=[]},s.blockRendering.Debug.prototype.drawSpacerRow=function(n,l,u){if(s.blockRendering.Debug.config.rowSpacers){var h=Math.abs(n.height),_=0>n.height;_&&(l-=h),this.debugElements_.push(s.utils.dom.createSvgElement(s.utils.Svg.RECT,{class:"rowSpacerRect blockRenderDebug",x:u?-(n.xPos+n.width):n.xPos,y:l,width:n.width,height:h,stroke:_?"black":"blue",fill:"blue","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}},s.blockRendering.Debug.prototype.drawSpacerElem=function(n,l,u){if(s.blockRendering.Debug.config.elemSpacers){l=Math.abs(n.width);var h=0>n.width,_=h?n.xPos-l:n.xPos;u&&(_=-(_+l)),this.debugElements_.push(s.utils.dom.createSvgElement(s.utils.Svg.RECT,{class:"elemSpacerRect blockRenderDebug",x:_,y:n.centerline-n.height/2,width:l,height:n.height,stroke:"pink",fill:h?"black":"pink","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}},s.blockRendering.Debug.prototype.drawRenderedElem=function(n,l){if(s.blockRendering.Debug.config.elems){var u=n.xPos;l&&(u=-(u+n.width)),this.debugElements_.push(s.utils.dom.createSvgElement(s.utils.Svg.RECT,{class:"rowRenderingRect blockRenderDebug",x:u,y:l=n.centerline-n.height/2,width:n.width,height:n.height,stroke:"black",fill:"none","stroke-width":"1px"},this.svgRoot_)),s.blockRendering.Types.isField(n)&&n.field instanceof s.FieldLabel&&this.debugElements_.push(s.utils.dom.createSvgElement(s.utils.Svg.RECT,{class:"rowRenderingRect blockRenderDebug",x:u,y:l+this.constants_.FIELD_TEXT_BASELINE,width:n.width,height:"0.1px",stroke:"red",fill:"none","stroke-width":"0.5px"},this.svgRoot_))}s.blockRendering.Types.isInput(n)&&s.blockRendering.Debug.config.connections&&this.drawConnection(n.connectionModel)},s.blockRendering.Debug.prototype.drawConnection=function(n){if(s.blockRendering.Debug.config.connections){if(n.type==s.connectionTypes.INPUT_VALUE)var l=4,u="magenta",h="none";else n.type==s.connectionTypes.OUTPUT_VALUE?(l=2,h=u="magenta"):n.type==s.connectionTypes.NEXT_STATEMENT?(l=4,u="goldenrod",h="none"):n.type==s.connectionTypes.PREVIOUS_STATEMENT&&(l=2,h=u="goldenrod");this.debugElements_.push(s.utils.dom.createSvgElement(s.utils.Svg.CIRCLE,{class:"blockRenderDebug",cx:n.offsetInBlock_.x,cy:n.offsetInBlock_.y,r:l,fill:h,stroke:u},this.svgRoot_))}},s.blockRendering.Debug.prototype.drawRenderedRow=function(n,l,u){s.blockRendering.Debug.config.rows&&(this.debugElements_.push(s.utils.dom.createSvgElement(s.utils.Svg.RECT,{class:"elemRenderingRect blockRenderDebug",x:u?-(n.xPos+n.width):n.xPos,y:n.yPos,width:n.width,height:n.height,stroke:"red",fill:"none","stroke-width":"1px"},this.svgRoot_)),s.blockRendering.Types.isTopOrBottomRow(n)||s.blockRendering.Debug.config.connectedBlockBounds&&this.debugElements_.push(s.utils.dom.createSvgElement(s.utils.Svg.RECT,{class:"connectedBlockWidth blockRenderDebug",x:u?-(n.xPos+n.widthWithConnectedBlocks):n.xPos,y:n.yPos,width:n.widthWithConnectedBlocks,height:n.height,stroke:this.randomColour_,fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_)))},s.blockRendering.Debug.prototype.drawRowWithElements=function(n,l,u){for(var h=0,_=n.elements.length;h<_;h++){var b=n.elements[h];b?s.blockRendering.Types.isSpacer(b)?this.drawSpacerElem(b,n.height,u):this.drawRenderedElem(b,u):console.warn("A row has an undefined or null element.",n,b)}this.drawRenderedRow(n,l,u)},s.blockRendering.Debug.prototype.drawBoundingBox=function(n){if(s.blockRendering.Debug.config.blockBounds){var l=n.RTL?-n.width:0;this.debugElements_.push(s.utils.dom.createSvgElement(s.utils.Svg.RECT,{class:"blockBoundingBox blockRenderDebug",x:l,y:0,width:n.width,height:n.height,stroke:"black",fill:"none","stroke-width":"1px","stroke-dasharray":"5,5"},this.svgRoot_)),s.blockRendering.Debug.config.connectedBlockBounds&&this.debugElements_.push(s.utils.dom.createSvgElement(s.utils.Svg.RECT,{class:"blockRenderDebug",x:l=n.RTL?-n.widthWithChildren:0,y:0,width:n.widthWithChildren,height:n.height,stroke:"#DF57BC",fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_))}},s.blockRendering.Debug.prototype.drawDebug=function(n,l){this.clearElems(),this.svgRoot_=n.getSvgRoot(),this.randomColour_="#"+Math.floor(16777215*Math.random()).toString(16);for(var _,u=0,h=0;_=l.rows[h];h++)s.blockRendering.Types.isBetweenRowSpacer(_)?this.drawSpacerRow(_,u,l.RTL):this.drawRowWithElements(_,u,l.RTL),u+=_.height;n.previousConnection&&this.drawConnection(n.previousConnection),n.nextConnection&&this.drawConnection(n.nextConnection),n.outputConnection&&this.drawConnection(n.outputConnection),l.rightSide&&this.drawRenderedElem(l.rightSide,l.RTL),this.drawBoundingBox(l),this.drawRender(n.pathObject.svgPath)},s.blockRendering.Debug.prototype.drawRender=function(n){s.blockRendering.Debug.config.render&&(n.setAttribute("filter","url(#"+this.constants_.debugFilterId+")"),setTimeout(function(){n.setAttribute("filter","")},100))},s.blockRendering.Drawer=function(n,l){this.block_=n,this.info_=l,this.topLeft_=n.getRelativeToSurfaceXY(),this.inlinePath_=this.outlinePath_="",this.constants_=l.getRenderer().getConstants()},s.blockRendering.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),this.block_.pathObject.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),s.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},s.blockRendering.Drawer.prototype.recordSizeOnBlock_=function(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren},s.blockRendering.Drawer.prototype.hideHiddenIcons_=function(){for(var l,n=0;l=this.info_.hiddenIcons[n];n++)l.icon.iconGroup_.setAttribute("display","none")},s.blockRendering.Drawer.prototype.drawOutline_=function(){this.drawTop_();for(var n=1;n<this.info_.rows.length-1;n++){var l=this.info_.rows[n];l.hasJaggedEdge?this.drawJaggedEdge_(l):l.hasStatement?this.drawStatementInput_(l):l.hasExternalInput?this.drawValueInput_(l):this.drawRightSideRow_(l)}this.drawBottom_(),this.drawLeft_()},s.blockRendering.Drawer.prototype.drawTop_=function(){var n=this.info_.topRow,l=n.elements;this.positionPreviousConnection_(),this.outlinePath_+=s.utils.svgPaths.moveBy(n.xPos,this.info_.startY);for(var h,u=0;h=l[u];u++)s.blockRendering.Types.isLeftRoundedCorner(h)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:s.blockRendering.Types.isRightRoundedCorner(h)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:s.blockRendering.Types.isPreviousConnection(h)?this.outlinePath_+=h.shape.pathLeft:s.blockRendering.Types.isHat(h)?this.outlinePath_+=this.constants_.START_HAT.path:s.blockRendering.Types.isSpacer(h)&&(this.outlinePath_+=s.utils.svgPaths.lineOnAxis("h",h.width));this.outlinePath_+=s.utils.svgPaths.lineOnAxis("v",n.height)},s.blockRendering.Drawer.prototype.drawJaggedEdge_=function(n){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+s.utils.svgPaths.lineOnAxis("v",n.height-this.constants_.JAGGED_TEETH.height)},s.blockRendering.Drawer.prototype.drawValueInput_=function(n){var l=n.getLastInput();this.positionExternalValueConnection_(n);var u="function"==typeof l.shape.pathDown?l.shape.pathDown(l.height):l.shape.pathDown;this.outlinePath_+=s.utils.svgPaths.lineOnAxis("H",l.xPos+l.width)+u+s.utils.svgPaths.lineOnAxis("v",n.height-l.connectionHeight)},s.blockRendering.Drawer.prototype.drawStatementInput_=function(n){var l=n.getLastInput(),u=l.xPos+l.notchOffset+l.shape.width;l=l.shape.pathRight+s.utils.svgPaths.lineOnAxis("h",-(l.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var h=n.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=s.utils.svgPaths.lineOnAxis("H",u)+l+s.utils.svgPaths.lineOnAxis("v",h)+this.constants_.INSIDE_CORNERS.pathBottom+s.utils.svgPaths.lineOnAxis("H",n.xPos+n.width),this.positionStatementInputConnection_(n)},s.blockRendering.Drawer.prototype.drawRightSideRow_=function(n){this.outlinePath_+=s.utils.svgPaths.lineOnAxis("V",n.yPos+n.height)},s.blockRendering.Drawer.prototype.drawBottom_=function(){var n=this.info_.bottomRow,l=n.elements;this.positionNextConnection_();for(var b,u=0,h="",_=l.length-1;b=l[_];_--)s.blockRendering.Types.isNextConnection(b)?h+=b.shape.pathRight:s.blockRendering.Types.isLeftSquareCorner(b)?h+=s.utils.svgPaths.lineOnAxis("H",n.xPos):s.blockRendering.Types.isLeftRoundedCorner(b)?h+=this.constants_.OUTSIDE_CORNERS.bottomLeft:s.blockRendering.Types.isRightRoundedCorner(b)?(h+=this.constants_.OUTSIDE_CORNERS.bottomRight,u=this.constants_.OUTSIDE_CORNERS.rightHeight):s.blockRendering.Types.isSpacer(b)&&(h+=s.utils.svgPaths.lineOnAxis("h",-1*b.width));this.outlinePath_+=s.utils.svgPaths.lineOnAxis("V",n.baseline-u),this.outlinePath_+=h},s.blockRendering.Drawer.prototype.drawLeft_=function(){var n=this.info_.outputConnection;if(this.positionOutputConnection_(),n){var l=n.connectionOffsetY+n.height;n="function"==typeof n.shape.pathUp?n.shape.pathUp(n.height):n.shape.pathUp,this.outlinePath_+=s.utils.svgPaths.lineOnAxis("V",l)+n}this.outlinePath_+="z"},s.blockRendering.Drawer.prototype.drawInternals_=function(){for(var l,n=0;l=this.info_.rows[n];n++)for(var h,u=0;h=l.elements[u];u++)s.blockRendering.Types.isInlineInput(h)?this.drawInlineInput_(h):(s.blockRendering.Types.isIcon(h)||s.blockRendering.Types.isField(h))&&this.layoutField_(h)},s.blockRendering.Drawer.prototype.layoutField_=function(n){if(s.blockRendering.Types.isField(n))var l=n.field.getSvgRoot();else s.blockRendering.Types.isIcon(n)&&(l=n.icon.iconGroup_);var u=n.centerline-n.height/2,h=n.xPos,_="";this.info_.RTL&&(h=-(h+n.width),n.flipRtl&&(h+=n.width,_="scale(-1 1)")),s.blockRendering.Types.isIcon(n)?(l.setAttribute("display","block"),l.setAttribute("transform","translate("+h+","+u+")"),n.icon.computeIconLocation()):l.setAttribute("transform","translate("+h+","+u+")"+_),this.info_.isInsertionMarker&&l.setAttribute("display","none")},s.blockRendering.Drawer.prototype.drawInlineInput_=function(n){var l=n.width,u=n.height,h=n.connectionOffsetY,_=n.connectionHeight+h;this.inlinePath_+=s.utils.svgPaths.moveTo(n.xPos+n.connectionWidth,n.centerline-u/2)+s.utils.svgPaths.lineOnAxis("v",h)+n.shape.pathDown+s.utils.svgPaths.lineOnAxis("v",u-_)+s.utils.svgPaths.lineOnAxis("h",l-n.connectionWidth)+s.utils.svgPaths.lineOnAxis("v",-u)+"z",this.positionInlineInputConnection_(n)},s.blockRendering.Drawer.prototype.positionInlineInputConnection_=function(n){if(n.connectionModel){var u=n.xPos+n.connectionWidth+n.connectionOffsetX;this.info_.RTL&&(u*=-1),n.connectionModel.setOffsetInBlock(u,n.centerline-n.height/2+n.connectionOffsetY)}},s.blockRendering.Drawer.prototype.positionStatementInputConnection_=function(n){var l=n.getLastInput();if(l.connectionModel){var u=n.xPos+n.statementEdge+l.notchOffset;this.info_.RTL&&(u*=-1),l.connectionModel.setOffsetInBlock(u,n.yPos)}},s.blockRendering.Drawer.prototype.positionExternalValueConnection_=function(n){var l=n.getLastInput();if(l.connectionModel){var u=n.xPos+n.width;this.info_.RTL&&(u*=-1),l.connectionModel.setOffsetInBlock(u,n.yPos)}},s.blockRendering.Drawer.prototype.positionPreviousConnection_=function(){var n=this.info_.topRow;if(n.connection){var l=n.xPos+n.notchOffset;n.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-l:l,0)}},s.blockRendering.Drawer.prototype.positionNextConnection_=function(){var n=this.info_.bottomRow;if(n.connection){var l=n.connection,u=l.xPos;l.connectionModel.setOffsetInBlock(this.info_.RTL?-u:u,n.baseline)}},s.blockRendering.Drawer.prototype.positionOutputConnection_=function(){if(this.info_.outputConnection){var n=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-n:n,this.info_.outputConnection.connectionOffsetY)}},s.Events.MarkerMove=function(n,l,u,h){var _=n?n.workspace.id:void 0;h&&h.getType()==s.ASTNode.types.WORKSPACE&&(_=h.getLocation().id),s.Events.MarkerMove.superClass_.constructor.call(this,_),this.blockId=n?n.id:null,this.oldNode=u,this.newNode=h,this.isCursor=l},s.utils.object.inherits(s.Events.MarkerMove,s.Events.UiBase),s.Events.MarkerMove.prototype.type=s.Events.MARKER_MOVE,s.Events.MarkerMove.prototype.toJson=function(){var n=s.Events.MarkerMove.superClass_.toJson.call(this);return n.isCursor=this.isCursor,n.blockId=this.blockId,n.oldNode=this.oldNode,n.newNode=this.newNode,n},s.Events.MarkerMove.prototype.fromJson=function(n){s.Events.MarkerMove.superClass_.fromJson.call(this,n),this.isCursor=n.isCursor,this.blockId=n.blockId,this.oldNode=n.oldNode,this.newNode=n.newNode},s.registry.register(s.registry.Type.EVENT,s.Events.MARKER_MOVE,s.Events.MarkerMove),s.blockRendering.MarkerSvg=function(n,l,u){this.workspace_=n,this.marker_=u,this.parent_=null,this.constants_=l,this.currentMarkerSvg=null,n=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=u.colour||n},s.blockRendering.MarkerSvg.CURSOR_CLASS="blocklyCursor",s.blockRendering.MarkerSvg.MARKER_CLASS="blocklyMarker",s.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER=.75,s.blockRendering.MarkerSvg.prototype.getSvgRoot=function(){return this.svgGroup_},s.blockRendering.MarkerSvg.prototype.getMarker=function(){return this.marker_},s.blockRendering.MarkerSvg.prototype.isCursor=function(){return"cursor"==this.marker_.type},s.blockRendering.MarkerSvg.prototype.createDom=function(){var n=this.isCursor()?s.blockRendering.MarkerSvg.CURSOR_CLASS:s.blockRendering.MarkerSvg.MARKER_CLASS;return this.svgGroup_=s.utils.dom.createSvgElement(s.utils.Svg.G,{class:n},null),this.createDomInternal_(),this.svgGroup_},s.blockRendering.MarkerSvg.prototype.setParent_=function(n){this.isCursor()?(this.parent_&&this.parent_.setCursorSvg(null),n.setCursorSvg(this.getSvgRoot())):(this.parent_&&this.parent_.setMarkerSvg(null),n.setMarkerSvg(this.getSvgRoot())),this.parent_=n},s.blockRendering.MarkerSvg.prototype.draw=function(n,l){if(l){this.constants_=this.workspace_.getRenderer().getConstants();var u=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker_.colour||u,this.applyColour_(l),this.showAtLocation_(l),this.fireMarkerEvent_(n,l),void 0!==(n=this.currentMarkerSvg.childNodes[0])&&n.beginElement&&n.beginElement()}else this.hide()},s.blockRendering.MarkerSvg.prototype.showAtLocation_=function(n){var l=n.getLocation().type;n.getType()==s.ASTNode.types.BLOCK?this.showWithBlock_(n):n.getType()==s.ASTNode.types.OUTPUT?this.showWithOutput_(n):l==s.connectionTypes.INPUT_VALUE?this.showWithInput_(n):l==s.connectionTypes.NEXT_STATEMENT?this.showWithNext_(n):n.getType()==s.ASTNode.types.PREVIOUS?this.showWithPrevious_(n):n.getType()==s.ASTNode.types.FIELD?this.showWithField_(n):n.getType()==s.ASTNode.types.WORKSPACE?this.showWithCoordinates_(n):n.getType()==s.ASTNode.types.STACK&&this.showWithStack_(n)},s.blockRendering.MarkerSvg.prototype.showWithBlockPrevOutput_=function(n){var l=(n=n.getSourceBlock()).width,u=n.height,h=u*s.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER,_=this.constants_.CURSOR_BLOCK_PADDING;if(n.previousConnection){var b=this.constants_.shapeFor(n.previousConnection);this.positionPrevious_(l,_,h,b)}else n.outputConnection?(b=this.constants_.shapeFor(n.outputConnection),this.positionOutput_(l,u,b)):this.positionBlock_(l,_,h);this.setParent_(n),this.showCurrent_()},s.blockRendering.MarkerSvg.prototype.showWithBlock_=function(n){this.showWithBlockPrevOutput_(n)},s.blockRendering.MarkerSvg.prototype.showWithPrevious_=function(n){this.showWithBlockPrevOutput_(n)},s.blockRendering.MarkerSvg.prototype.showWithOutput_=function(n){this.showWithBlockPrevOutput_(n)},s.blockRendering.MarkerSvg.prototype.showWithCoordinates_=function(n){var l=n.getWsCoordinate();n=l.x,this.workspace_.RTL&&(n-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(n,l=l.y,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace_),this.showCurrent_()},s.blockRendering.MarkerSvg.prototype.showWithField_=function(n){var l=(n=n.getLocation()).getSize().width,u=n.getSize().height;this.positionRect_(0,0,l,u),this.setParent_(n),this.showCurrent_()},s.blockRendering.MarkerSvg.prototype.showWithInput_=function(n){var l=(n=n.getLocation()).getSourceBlock();this.positionInput_(n),this.setParent_(l),this.showCurrent_()},s.blockRendering.MarkerSvg.prototype.showWithNext_=function(n){var l=n.getLocation();n=l.getSourceBlock();var u=0;l=l.getOffsetInBlock().y;var h=n.getHeightWidth().width;this.workspace_.RTL&&(u=-h),this.positionLine_(u,l,h),this.setParent_(n),this.showCurrent_()},s.blockRendering.MarkerSvg.prototype.showWithStack_=function(n){var l=(n=n.getLocation()).getHeightWidth(),u=l.width+this.constants_.CURSOR_STACK_PADDING,h=-this.constants_.CURSOR_STACK_PADDING/2,b=h;this.workspace_.RTL&&(b=-(u+h)),this.positionRect_(b,-this.constants_.CURSOR_STACK_PADDING/2,u,l=l.height+this.constants_.CURSOR_STACK_PADDING),this.setParent_(n),this.showCurrent_()},s.blockRendering.MarkerSvg.prototype.showCurrent_=function(){this.hide(),this.currentMarkerSvg.style.display=""},s.blockRendering.MarkerSvg.prototype.positionBlock_=function(n,l,u){n=s.utils.svgPaths.moveBy(-l,u)+s.utils.svgPaths.lineOnAxis("V",-l)+s.utils.svgPaths.lineOnAxis("H",n+2*l)+s.utils.svgPaths.lineOnAxis("V",u),this.markerBlock_.setAttribute("d",n),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},s.blockRendering.MarkerSvg.prototype.positionInput_=function(n){var l=n.getOffsetInBlock().x,u=n.getOffsetInBlock().y;n=s.utils.svgPaths.moveTo(0,0)+this.constants_.shapeFor(n).pathDown,this.markerInput_.setAttribute("d",n),this.markerInput_.setAttribute("transform","translate("+l+","+u+")"+(this.workspace_.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_},s.blockRendering.MarkerSvg.prototype.positionLine_=function(n,l,u){this.markerSvgLine_.setAttribute("x",n),this.markerSvgLine_.setAttribute("y",l),this.markerSvgLine_.setAttribute("width",u),this.currentMarkerSvg=this.markerSvgLine_},s.blockRendering.MarkerSvg.prototype.positionOutput_=function(n,l,u){n=s.utils.svgPaths.moveBy(n,0)+s.utils.svgPaths.lineOnAxis("h",-(n-u.width))+s.utils.svgPaths.lineOnAxis("v",this.constants_.TAB_OFFSET_FROM_TOP)+u.pathDown+s.utils.svgPaths.lineOnAxis("V",l)+s.utils.svgPaths.lineOnAxis("H",n),this.markerBlock_.setAttribute("d",n),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},s.blockRendering.MarkerSvg.prototype.positionPrevious_=function(n,l,u,h){n=s.utils.svgPaths.moveBy(-l,u)+s.utils.svgPaths.lineOnAxis("V",-l)+s.utils.svgPaths.lineOnAxis("H",this.constants_.NOTCH_OFFSET_LEFT)+h.pathLeft+s.utils.svgPaths.lineOnAxis("H",n+2*l)+s.utils.svgPaths.lineOnAxis("V",u),this.markerBlock_.setAttribute("d",n),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},s.blockRendering.MarkerSvg.prototype.positionRect_=function(n,l,u,h){this.markerSvgRect_.setAttribute("x",n),this.markerSvgRect_.setAttribute("y",l),this.markerSvgRect_.setAttribute("width",u),this.markerSvgRect_.setAttribute("height",h),this.currentMarkerSvg=this.markerSvgRect_},s.blockRendering.MarkerSvg.prototype.flipRtl_=function(n){n.setAttribute("transform","scale(-1 1)")},s.blockRendering.MarkerSvg.prototype.hide=function(){this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"},s.blockRendering.MarkerSvg.prototype.fireMarkerEvent_=function(n,l){var u=l.getSourceBlock();n=new(s.Events.get(s.Events.MARKER_MOVE))(u,this.isCursor(),n,l),s.Events.fire(n)},s.blockRendering.MarkerSvg.prototype.getBlinkProperties_=function(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}},s.blockRendering.MarkerSvg.prototype.createDomInternal_=function(){if(this.markerSvg_=s.utils.dom.createSvgElement(s.utils.Svg.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=s.utils.dom.createSvgElement(s.utils.Svg.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT,style:"display: none"},this.markerSvg_),this.markerSvgRect_=s.utils.dom.createSvgElement(s.utils.Svg.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10,style:"display: none"},this.markerSvg_),this.markerInput_=s.utils.dom.createSvgElement(s.utils.Svg.PATH,{transform:"",style:"display: none"},this.markerSvg_),this.markerBlock_=s.utils.dom.createSvgElement(s.utils.Svg.PATH,{transform:"",style:"display: none",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var n=this.getBlinkProperties_();s.utils.dom.createSvgElement(s.utils.Svg.ANIMATE,n,this.markerSvgLine_),s.utils.dom.createSvgElement(s.utils.Svg.ANIMATE,n,this.markerInput_),n.attributeName="stroke",s.utils.dom.createSvgElement(s.utils.Svg.ANIMATE,n,this.markerBlock_)}return this.markerSvg_},s.blockRendering.MarkerSvg.prototype.applyColour_=function(n){this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(this.markerSvgLine_.firstChild.setAttribute("values",n=this.colour_+";transparent;transparent;"),this.markerInput_.firstChild.setAttribute("values",n),this.markerBlock_.firstChild.setAttribute("values",n))},s.blockRendering.MarkerSvg.prototype.dispose=function(){this.svgGroup_&&s.utils.dom.removeNode(this.svgGroup_)},s.blockRendering.PathObject=function(n,l,u){this.constants=u,this.svgRoot=n,this.svgPath=s.utils.dom.createSvgElement(s.utils.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.style=l,this.markerSvg=this.cursorSvg=null},s.blockRendering.PathObject.prototype.setPath=function(n){this.svgPath.setAttribute("d",n)},s.blockRendering.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)")},s.blockRendering.PathObject.prototype.setCursorSvg=function(n){n?(this.svgRoot.appendChild(n),this.cursorSvg=n):this.cursorSvg=null},s.blockRendering.PathObject.prototype.setMarkerSvg=function(n){n?(this.cursorSvg?this.svgRoot.insertBefore(n,this.cursorSvg):this.svgRoot.appendChild(n),this.markerSvg=n):this.markerSvg=null},s.blockRendering.PathObject.prototype.applyColour=function(n){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(n.isShadow()),this.updateDisabled_(!n.isEnabled()||n.getInheritedDisabled())},s.blockRendering.PathObject.prototype.setStyle=function(n){this.style=n},s.blockRendering.PathObject.prototype.setClass_=function(n,l){l?s.utils.dom.addClass(this.svgRoot,n):s.utils.dom.removeClass(this.svgRoot,n)},s.blockRendering.PathObject.prototype.updateHighlighted=function(n){this.svgPath.setAttribute("filter",n?"url(#"+this.constants.embossFilterId+")":"none")},s.blockRendering.PathObject.prototype.updateShadow_=function(n){n&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},s.blockRendering.PathObject.prototype.updateDisabled_=function(n){this.setClass_("blocklyDisabled",n),n&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")},s.blockRendering.PathObject.prototype.updateSelected=function(n){this.setClass_("blocklySelected",n)},s.blockRendering.PathObject.prototype.updateDraggingDelete=function(n){this.setClass_("blocklyDraggingDelete",n)},s.blockRendering.PathObject.prototype.updateInsertionMarker=function(n){this.setClass_("blocklyInsertionMarker",n)},s.blockRendering.PathObject.prototype.updateMovable=function(n){this.setClass_("blocklyDraggable",n)},s.blockRendering.PathObject.prototype.updateReplacementFade=function(n){this.setClass_("blocklyReplaceable",n)},s.blockRendering.PathObject.prototype.updateShapeForInputHighlight=function(n,l){},s.blockRendering.Renderer=function(n){this.name=n,this.overrides=this.constants_=null},s.blockRendering.Renderer.prototype.getClassName=function(){return this.name+"-renderer"},s.blockRendering.Renderer.prototype.init=function(n,l){this.constants_=this.makeConstants_(),l&&(this.overrides=l,s.utils.object.mixin(this.constants_,l)),this.constants_.setTheme(n),this.constants_.init()},s.blockRendering.Renderer.prototype.createDom=function(n,l){this.constants_.createDom(n,this.name+"-"+l.name,"."+this.getClassName()+"."+l.getClassName())},s.blockRendering.Renderer.prototype.refreshDom=function(n,l){var u=this.getConstants();u.dispose(),this.constants_=this.makeConstants_(),this.overrides&&s.utils.object.mixin(this.constants_,this.overrides),this.constants_.randomIdentifier=u.randomIdentifier,this.constants_.setTheme(l),this.constants_.init(),this.createDom(n,l)},s.blockRendering.Renderer.prototype.dispose=function(){this.constants_&&this.constants_.dispose()},s.blockRendering.Renderer.prototype.makeConstants_=function(){return new s.blockRendering.ConstantProvider},s.blockRendering.Renderer.prototype.makeRenderInfo_=function(n){return new s.blockRendering.RenderInfo(this,n)},s.blockRendering.Renderer.prototype.makeDrawer_=function(n,l){return new s.blockRendering.Drawer(n,l)},s.blockRendering.Renderer.prototype.makeDebugger_=function(){if(!s.blockRendering.Debug)throw Error("Missing require for Blockly.blockRendering.Debug");return new s.blockRendering.Debug(this.getConstants())},s.blockRendering.Renderer.prototype.makeMarkerDrawer=function(n,l){return new s.blockRendering.MarkerSvg(n,this.getConstants(),l)},s.blockRendering.Renderer.prototype.makePathObject=function(n,l){return new s.blockRendering.PathObject(n,l,this.constants_)},s.blockRendering.Renderer.prototype.getConstants=function(){return this.constants_},s.blockRendering.Renderer.prototype.shouldHighlightConnection=function(n){return!0},s.blockRendering.Renderer.prototype.orphanCanConnectAtEnd=function(n,l,u){return!!s.Connection.getConnectionForOrphanedConnection(n,u===s.connectionTypes.OUTPUT_VALUE?l.outputConnection:l.previousConnection)},s.blockRendering.Renderer.prototype.getConnectionPreviewMethod=function(n,l,u){return l.type==s.connectionTypes.OUTPUT_VALUE||l.type==s.connectionTypes.PREVIOUS_STATEMENT?!n.isConnected()||this.orphanCanConnectAtEnd(u,n.targetBlock(),l.type)?s.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:s.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:s.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER},s.blockRendering.Renderer.prototype.render=function(n){s.blockRendering.useDebugger&&!n.renderingDebugger&&(n.renderingDebugger=this.makeDebugger_());var l=this.makeRenderInfo_(n);l.measure(),this.makeDrawer_(n,l).draw()},s.geras={},s.geras.ConstantProvider=function(){s.geras.ConstantProvider.superClass_.constructor.call(this),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2},s.utils.object.inherits(s.geras.ConstantProvider,s.blockRendering.ConstantProvider),s.geras.ConstantProvider.prototype.getCSS_=function(n){return s.geras.ConstantProvider.superClass_.getCSS_.call(this,n).concat([n+" .blocklyInsertionMarker>.blocklyPathLight,",n+" .blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"])},s.geras.Highlighter=function(n){this.info_=n,this.inlineSteps_=this.steps_="",this.RTL_=this.info_.RTL,n=n.getRenderer(),this.constants_=n.getConstants(),this.highlightConstants_=n.getHighlightConstants(),this.highlightOffset_=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH},s.geras.Highlighter.prototype.getPath=function(){return this.steps_+"\n"+this.inlineSteps_},s.geras.Highlighter.prototype.drawTopCorner=function(n){this.steps_+=s.utils.svgPaths.moveBy(n.xPos,this.info_.startY);for(var u,l=0;u=n.elements[l];l++)s.blockRendering.Types.isLeftSquareCorner(u)?this.steps_+=this.highlightConstants_.START_POINT:s.blockRendering.Types.isLeftRoundedCorner(u)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):s.blockRendering.Types.isPreviousConnection(u)?this.steps_+=this.notchPaths_.pathLeft:s.blockRendering.Types.isHat(u)?this.steps_+=this.startPaths_.path(this.RTL_):s.blockRendering.Types.isSpacer(u)&&0!=u.width&&(this.steps_+=s.utils.svgPaths.lineOnAxis("H",u.xPos+u.width-this.highlightOffset_));this.steps_+=s.utils.svgPaths.lineOnAxis("H",n.xPos+n.width-this.highlightOffset_)},s.geras.Highlighter.prototype.drawJaggedEdge_=function(n){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+s.utils.svgPaths.lineOnAxis("v",n.height-this.jaggedTeethPaths_.height-this.highlightOffset_))},s.geras.Highlighter.prototype.drawValueInput=function(n){var l=n.getLastInput();if(this.RTL_){var u=n.height-l.connectionHeight;this.steps_+=s.utils.svgPaths.moveTo(l.xPos+l.width-this.highlightOffset_,n.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+s.utils.svgPaths.lineOnAxis("v",u)}else this.steps_+=s.utils.svgPaths.moveTo(l.xPos+l.width,n.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)},s.geras.Highlighter.prototype.drawStatementInput=function(n){var l=n.getLastInput();if(this.RTL_){var u=n.height-2*this.insideCornerPaths_.height;this.steps_+=s.utils.svgPaths.moveTo(l.xPos,n.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+s.utils.svgPaths.lineOnAxis("v",u)+this.insideCornerPaths_.pathBottom(this.RTL_)+s.utils.svgPaths.lineTo(n.width-l.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=s.utils.svgPaths.moveTo(l.xPos,n.yPos+n.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+s.utils.svgPaths.lineTo(n.width-l.xPos-this.insideCornerPaths_.width,0)},s.geras.Highlighter.prototype.drawRightSideRow=function(n){var l=n.xPos+n.width-this.highlightOffset_;n.followsStatement&&(this.steps_+=s.utils.svgPaths.lineOnAxis("H",l)),this.RTL_&&(this.steps_+=s.utils.svgPaths.lineOnAxis("H",l),n.height>this.highlightOffset_&&(this.steps_+=s.utils.svgPaths.lineOnAxis("V",n.yPos+n.height-this.highlightOffset_)))},s.geras.Highlighter.prototype.drawBottomRow=function(n){if(this.RTL_)this.steps_+=s.utils.svgPaths.lineOnAxis("V",n.baseline-this.highlightOffset_);else{var l=this.info_.bottomRow.elements[0];s.blockRendering.Types.isLeftSquareCorner(l)?this.steps_+=s.utils.svgPaths.moveTo(n.xPos+this.highlightOffset_,n.baseline-this.highlightOffset_):s.blockRendering.Types.isLeftRoundedCorner(l)&&(this.steps_+=s.utils.svgPaths.moveTo(n.xPos,n.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}},s.geras.Highlighter.prototype.drawLeft=function(){var n=this.info_.outputConnection;n&&(n=n.connectionOffsetY+n.height,this.RTL_?this.steps_+=s.utils.svgPaths.moveTo(this.info_.startX,n):(this.steps_+=s.utils.svgPaths.moveTo(this.info_.startX+this.highlightOffset_,this.info_.bottomRow.baseline-this.highlightOffset_),this.steps_+=s.utils.svgPaths.lineOnAxis("V",n)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(s.blockRendering.Types.isLeftRoundedCorner((n=this.info_.topRow).elements[0])?this.steps_+=s.utils.svgPaths.lineOnAxis("V",this.outsideCornerPaths_.height):this.steps_+=s.utils.svgPaths.lineOnAxis("V",n.capline+this.highlightOffset_))},s.geras.Highlighter.prototype.drawInlineInput=function(n){var l=this.highlightOffset_,u=n.xPos+n.connectionWidth,h=n.centerline-n.height/2,_=n.width-n.connectionWidth,b=h+l;this.RTL_?(h=n.connectionOffsetY-l,n=n.height-(n.connectionOffsetY+n.connectionHeight)+l,this.inlineSteps_+=s.utils.svgPaths.moveTo(u-l,b)+s.utils.svgPaths.lineOnAxis("v",h)+this.puzzleTabPaths_.pathDown(this.RTL_)+s.utils.svgPaths.lineOnAxis("v",n)+s.utils.svgPaths.lineOnAxis("h",_)):this.inlineSteps_+=s.utils.svgPaths.moveTo(n.xPos+n.width+l,b)+s.utils.svgPaths.lineOnAxis("v",n.height)+s.utils.svgPaths.lineOnAxis("h",-_)+s.utils.svgPaths.moveTo(u,h+n.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)},s.geras.InlineInput=function(n,l){s.geras.InlineInput.superClass_.constructor.call(this,n,l),this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)},s.utils.object.inherits(s.geras.InlineInput,s.blockRendering.InlineInput),s.geras.StatementInput=function(n,l){s.geras.StatementInput.superClass_.constructor.call(this,n,l),this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)},s.utils.object.inherits(s.geras.StatementInput,s.blockRendering.StatementInput),s.geras.RenderInfo=function(n,l){s.geras.RenderInfo.superClass_.constructor.call(this,n,l)},s.utils.object.inherits(s.geras.RenderInfo,s.blockRendering.RenderInfo),s.geras.RenderInfo.prototype.getRenderer=function(){return this.renderer_},s.geras.RenderInfo.prototype.populateBottomRow_=function(){s.geras.RenderInfo.superClass_.populateBottomRow_.call(this),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==s.inputTypes.STATEMENT||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)},s.geras.RenderInfo.prototype.addInput_=function(n,l){this.isInline&&n.type==s.inputTypes.VALUE?(l.elements.push(new s.geras.InlineInput(this.constants_,n)),l.hasInlineInput=!0):n.type==s.inputTypes.STATEMENT?(l.elements.push(new s.geras.StatementInput(this.constants_,n)),l.hasStatement=!0):n.type==s.inputTypes.VALUE?(l.elements.push(new s.blockRendering.ExternalValueInput(this.constants_,n)),l.hasExternalInput=!0):n.type==s.inputTypes.DUMMY&&(l.minHeight=Math.max(l.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),l.hasDummyInput=!0),this.isInline||null!=l.align||(l.align=n.align)},s.geras.RenderInfo.prototype.addElemSpacing_=function(){for(var u,n=!1,l=0;u=this.rows[l];l++)u.hasExternalInput&&(n=!0);for(l=0;u=this.rows[l];l++){var h=u.elements;if(u.elements=[],u.startsWithElemSpacer()&&u.elements.push(new s.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,h[0]))),h.length){for(var _=0;_<h.length-1;_++){u.elements.push(h[_]);var b=this.getInRowSpacing_(h[_],h[_+1]);u.elements.push(new s.blockRendering.InRowSpacer(this.constants_,b))}u.elements.push(h[h.length-1]),u.endsWithElemSpacer()&&(b=this.getInRowSpacing_(h[h.length-1],null),n&&u.hasDummyInput&&(b+=this.constants_.TAB_WIDTH),u.elements.push(new s.blockRendering.InRowSpacer(this.constants_,b)))}}},s.geras.RenderInfo.prototype.getInRowSpacing_=function(n,l){if(!n)return l&&s.blockRendering.Types.isField(l)&&l.isEditable?this.constants_.MEDIUM_PADDING:l&&s.blockRendering.Types.isInlineInput(l)?this.constants_.MEDIUM_LARGE_PADDING:l&&s.blockRendering.Types.isStatementInput(l)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!s.blockRendering.Types.isInput(n)&&(!l||s.blockRendering.Types.isStatementInput(l)))return s.blockRendering.Types.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:s.blockRendering.Types.isIcon(n)?2*this.constants_.LARGE_PADDING+1:s.blockRendering.Types.isHat(n)?this.constants_.NO_PADDING:s.blockRendering.Types.isPreviousOrNextConnection(n)?this.constants_.LARGE_PADDING:s.blockRendering.Types.isLeftRoundedCorner(n)?this.constants_.MIN_BLOCK_WIDTH:s.blockRendering.Types.isJaggedEdge(n)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(s.blockRendering.Types.isInput(n)&&!l){if(s.blockRendering.Types.isExternalInput(n))return this.constants_.NO_PADDING;if(s.blockRendering.Types.isInlineInput(n))return this.constants_.LARGE_PADDING;if(s.blockRendering.Types.isStatementInput(n))return this.constants_.NO_PADDING}if(!s.blockRendering.Types.isInput(n)&&l&&s.blockRendering.Types.isInput(l)){if(s.blockRendering.Types.isField(n)&&n.isEditable){if(s.blockRendering.Types.isInlineInput(l)||s.blockRendering.Types.isExternalInput(l))return this.constants_.SMALL_PADDING}else{if(s.blockRendering.Types.isInlineInput(l)||s.blockRendering.Types.isExternalInput(l))return this.constants_.MEDIUM_LARGE_PADDING;if(s.blockRendering.Types.isStatementInput(l))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(s.blockRendering.Types.isIcon(n)&&l&&!s.blockRendering.Types.isInput(l))return this.constants_.LARGE_PADDING;if(s.blockRendering.Types.isInlineInput(n)&&l&&s.blockRendering.Types.isField(l))return l.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(s.blockRendering.Types.isLeftSquareCorner(n)&&l){if(s.blockRendering.Types.isHat(l))return this.constants_.NO_PADDING;if(s.blockRendering.Types.isPreviousConnection(l))return l.notchOffset;if(s.blockRendering.Types.isNextConnection(l))return l.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(s.blockRendering.Types.isLeftRoundedCorner(n)&&l){if(s.blockRendering.Types.isPreviousConnection(l))return l.notchOffset-this.constants_.CORNER_RADIUS;if(s.blockRendering.Types.isNextConnection(l))return l.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return s.blockRendering.Types.isField(n)&&l&&s.blockRendering.Types.isField(l)&&n.isEditable==l.isEditable||l&&s.blockRendering.Types.isJaggedEdge(l)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},s.geras.RenderInfo.prototype.getSpacerRowHeight_=function(n,l){return s.blockRendering.Types.isTopRow(n)&&s.blockRendering.Types.isBottomRow(l)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:s.blockRendering.Types.isTopRow(n)||s.blockRendering.Types.isBottomRow(l)?this.constants_.NO_PADDING:n.hasExternalInput&&l.hasExternalInput?this.constants_.LARGE_PADDING:!n.hasStatement&&l.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:n.hasStatement&&l.hasStatement||!n.hasStatement&&l.hasDummyInput||n.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},s.geras.RenderInfo.prototype.getElemCenterline_=function(n,l){if(s.blockRendering.Types.isSpacer(l))return n.yPos+l.height/2;if(s.blockRendering.Types.isBottomRow(n))return n=n.yPos+n.height-n.descenderHeight,s.blockRendering.Types.isNextConnection(l)?n+l.height/2:n-l.height/2;if(s.blockRendering.Types.isTopRow(n))return s.blockRendering.Types.isHat(l)?n.capline-l.height/2:n.capline+l.height/2;var u=n.yPos;return s.blockRendering.Types.isField(l)||s.blockRendering.Types.isIcon(l)?(u+=l.height/2,(n.hasInlineInput||n.hasStatement)&&l.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=n.height&&(u+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):u=s.blockRendering.Types.isInlineInput(l)?u+l.height/2:u+n.height/2,u},s.geras.RenderInfo.prototype.alignRowElements_=function(){if(this.isInline){for(var h,n=0,l=null,u=this.rows.length-1;h=this.rows[u];u--)h.nextRightEdge=n,s.blockRendering.Types.isInputRow(h)&&(h.hasStatement&&this.alignStatementRow_(h),l&&l.hasStatement&&h.width<l.width?h.nextRightEdge=l.width:n=h.width,l=h);for(u=n=0;h=this.rows[u];u++)h.hasStatement?n=this.getDesiredRowWidth_(h):s.blockRendering.Types.isSpacer(h)?h.width=Math.max(n,h.nextRightEdge):(0<(n=Math.max(n,h.nextRightEdge)-h.width)&&this.addAlignmentPadding_(h,n),n=h.width)}else s.geras.RenderInfo.superClass_.alignRowElements_.call(this)},s.geras.RenderInfo.prototype.getDesiredRowWidth_=function(n){return this.isInline&&n.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:s.geras.RenderInfo.superClass_.getDesiredRowWidth_.call(this,n)},s.geras.RenderInfo.prototype.finalize_=function(){for(var h,n=0,l=0,u=0;h=this.rows[u];u++){h.yPos=l,h.xPos=this.startX,l+=h.height,n=Math.max(n,h.widthWithConnectedBlocks);var _=l-this.topRow.ascenderHeight;h==this.bottomRow&&_<this.constants_.MIN_BLOCK_HEIGHT&&(this.bottomRow.height+=_=this.constants_.MIN_BLOCK_HEIGHT-_,l+=_),this.recordElemPositions_(h)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(n=Math.max(n,this.block_.nextConnection.targetBlock().getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=l-this.bottomRow.descenderHeight,this.widthWithChildren=n+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=l+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline},s.geras.Drawer=function(n,l){s.geras.Drawer.superClass_.constructor.call(this,n,l),this.highlighter_=new s.geras.Highlighter(l)},s.utils.object.inherits(s.geras.Drawer,s.blockRendering.Drawer),s.geras.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_();var n=this.block_.pathObject;n.setPath(this.outlinePath_+"\n"+this.inlinePath_),n.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&n.flipRTL(),s.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},s.geras.Drawer.prototype.drawTop_=function(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),s.geras.Drawer.superClass_.drawTop_.call(this)},s.geras.Drawer.prototype.drawJaggedEdge_=function(n){this.highlighter_.drawJaggedEdge_(n),s.geras.Drawer.superClass_.drawJaggedEdge_.call(this,n)},s.geras.Drawer.prototype.drawValueInput_=function(n){this.highlighter_.drawValueInput(n),s.geras.Drawer.superClass_.drawValueInput_.call(this,n)},s.geras.Drawer.prototype.drawStatementInput_=function(n){this.highlighter_.drawStatementInput(n),s.geras.Drawer.superClass_.drawStatementInput_.call(this,n)},s.geras.Drawer.prototype.drawRightSideRow_=function(n){this.highlighter_.drawRightSideRow(n),this.outlinePath_+=s.utils.svgPaths.lineOnAxis("H",n.xPos+n.width)+s.utils.svgPaths.lineOnAxis("V",n.yPos+n.height)},s.geras.Drawer.prototype.drawBottom_=function(){this.highlighter_.drawBottomRow(this.info_.bottomRow),s.geras.Drawer.superClass_.drawBottom_.call(this)},s.geras.Drawer.prototype.drawLeft_=function(){this.highlighter_.drawLeft(),s.geras.Drawer.superClass_.drawLeft_.call(this)},s.geras.Drawer.prototype.drawInlineInput_=function(n){this.highlighter_.drawInlineInput(n),s.geras.Drawer.superClass_.drawInlineInput_.call(this,n)},s.geras.Drawer.prototype.positionInlineInputConnection_=function(n){if(n.connectionModel){var u=n.xPos+n.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(u*=-1),n.connectionModel.setOffsetInBlock(u,n.centerline-n.height/2+n.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}},s.geras.Drawer.prototype.positionStatementInputConnection_=function(n){var l=n.getLastInput();if(l.connectionModel){var u=n.xPos+n.statementEdge+l.notchOffset;l.connectionModel.setOffsetInBlock(u=this.info_.RTL?-1*u:u+this.constants_.DARK_PATH_OFFSET,n.yPos+this.constants_.DARK_PATH_OFFSET)}},s.geras.Drawer.prototype.positionExternalValueConnection_=function(n){var l=n.getLastInput();if(l.connectionModel){var u=n.xPos+n.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(u*=-1),l.connectionModel.setOffsetInBlock(u,n.yPos)}},s.geras.Drawer.prototype.positionNextConnection_=function(){var n=this.info_.bottomRow;if(n.connection){var l=n.connection,u=l.xPos;l.connectionModel.setOffsetInBlock((this.info_.RTL?-u:u)+this.constants_.DARK_PATH_OFFSET/2,n.baseline+this.constants_.DARK_PATH_OFFSET)}},s.geras.HighlightConstantProvider=function(n){this.constantProvider=n,this.OFFSET=.5,this.START_POINT=s.utils.svgPaths.moveBy(this.OFFSET,this.OFFSET)},s.geras.HighlightConstantProvider.prototype.init=function(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()},s.geras.HighlightConstantProvider.prototype.makeInsideCorner=function(){var n=this.constantProvider.CORNER_RADIUS,l=this.OFFSET,u=(1-Math.SQRT1_2)*(n+l)-l,h=s.utils.svgPaths.moveBy(u,u)+s.utils.svgPaths.arc("a","0 0,0",n,s.utils.svgPaths.point(-u-l,n-u)),_=s.utils.svgPaths.arc("a","0 0,0",n+l,s.utils.svgPaths.point(n+l,n+l)),b=s.utils.svgPaths.moveBy(u,-u)+s.utils.svgPaths.arc("a","0 0,0",n+l,s.utils.svgPaths.point(n-u,u+l));return{width:n+l,height:n,pathTop:function(R){return R?h:""},pathBottom:function(R){return R?_:b}}},s.geras.HighlightConstantProvider.prototype.makeOutsideCorner=function(){var n=this.constantProvider.CORNER_RADIUS,l=this.OFFSET,u=(1-Math.SQRT1_2)*(n-l)+l,h=s.utils.svgPaths.moveBy(u,u)+s.utils.svgPaths.arc("a","0 0,1",n-l,s.utils.svgPaths.point(n-u,-u+l)),_=s.utils.svgPaths.moveBy(l,n)+s.utils.svgPaths.arc("a","0 0,1",n-l,s.utils.svgPaths.point(n,-n+l)),b=-u,R=s.utils.svgPaths.moveBy(u,b)+s.utils.svgPaths.arc("a","0 0,1",n-l,s.utils.svgPaths.point(-u+l,-b-n));return{height:n,topLeft:function(O){return O?h:_},bottomLeft:function(){return R}}},s.geras.HighlightConstantProvider.prototype.makePuzzleTab=function(){var n=this.constantProvider.TAB_WIDTH,l=this.constantProvider.TAB_HEIGHT,u=s.utils.svgPaths.moveBy(-2,3.4-l)+s.utils.svgPaths.lineTo(-.45*n,-2.1),h=s.utils.svgPaths.lineOnAxis("v",2.5)+s.utils.svgPaths.moveBy(.97*-n,2.5)+s.utils.svgPaths.curve("q",[s.utils.svgPaths.point(.05*-n,10),s.utils.svgPaths.point(.3*n,9.5)])+s.utils.svgPaths.moveBy(.67*n,-1.9)+s.utils.svgPaths.lineOnAxis("v",2.5),_=s.utils.svgPaths.lineOnAxis("v",-1.5)+s.utils.svgPaths.moveBy(-.92*n,-.5)+s.utils.svgPaths.curve("q",[s.utils.svgPaths.point(-.19*n,-5.5),s.utils.svgPaths.point(0,-11)])+s.utils.svgPaths.moveBy(.92*n,1),b=s.utils.svgPaths.moveBy(-5,l-.7)+s.utils.svgPaths.lineTo(.46*n,-2.1);return{width:n,height:l,pathUp:function(R){return R?u:_},pathDown:function(R){return R?h:b}}},s.geras.HighlightConstantProvider.prototype.makeNotch=function(){return{pathLeft:s.utils.svgPaths.lineOnAxis("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}},s.geras.HighlightConstantProvider.prototype.makeJaggedTeeth=function(){return{pathLeft:s.utils.svgPaths.lineTo(5.1,2.6)+s.utils.svgPaths.moveBy(-10.2,6.8)+s.utils.svgPaths.lineTo(5.1,2.6),height:12,width:10.2}},s.geras.HighlightConstantProvider.prototype.makeStartHat=function(){var n=this.constantProvider.START_HAT.height,l=s.utils.svgPaths.moveBy(25,-8.7)+s.utils.svgPaths.curve("c",[s.utils.svgPaths.point(29.7,-6.2),s.utils.svgPaths.point(57.2,-.5),s.utils.svgPaths.point(75,8.7)]),u=s.utils.svgPaths.curve("c",[s.utils.svgPaths.point(17.8,-9.2),s.utils.svgPaths.point(45.3,-14.9),s.utils.svgPaths.point(75,-8.7)])+s.utils.svgPaths.moveTo(100.5,n+.5);return{path:function(h){return h?l:u}}},s.geras.PathObject=function(n,l,u){this.constants=u,this.svgRoot=n,this.svgPathDark=s.utils.dom.createSvgElement(s.utils.Svg.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"},this.svgRoot),this.svgPath=s.utils.dom.createSvgElement(s.utils.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.svgPathLight=s.utils.dom.createSvgElement(s.utils.Svg.PATH,{class:"blocklyPathLight"},this.svgRoot),this.colourDark="#000000",this.style=l},s.utils.object.inherits(s.geras.PathObject,s.blockRendering.PathObject),s.geras.PathObject.prototype.setPath=function(n){this.svgPath.setAttribute("d",n),this.svgPathDark.setAttribute("d",n)},s.geras.PathObject.prototype.setHighlightPath=function(n){this.svgPathLight.setAttribute("d",n)},s.geras.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")},s.geras.PathObject.prototype.applyColour=function(n){this.svgPathLight.style.display="",this.svgPathDark.style.display="",this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),s.geras.PathObject.superClass_.applyColour.call(this,n),this.svgPath.setAttribute("stroke","none")},s.geras.PathObject.prototype.setStyle=function(n){this.style=n,this.colourDark=s.utils.colour.blend("#000",this.style.colourPrimary,.2)||this.colourDark},s.geras.PathObject.prototype.updateHighlighted=function(n){n?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")},s.geras.PathObject.prototype.updateShadow_=function(n){n&&(this.svgPathLight.style.display="none",this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},s.geras.PathObject.prototype.updateDisabled_=function(n){s.geras.PathObject.superClass_.updateDisabled_.call(this,n),n&&this.svgPath.setAttribute("stroke","none")},s.geras.Renderer=function(n){s.geras.Renderer.superClass_.constructor.call(this,n),this.highlightConstants_=null},s.utils.object.inherits(s.geras.Renderer,s.blockRendering.Renderer),s.geras.Renderer.prototype.init=function(n,l){s.geras.Renderer.superClass_.init.call(this,n,l),this.highlightConstants_=this.makeHighlightConstants_(),this.highlightConstants_.init()},s.geras.Renderer.prototype.refreshDom=function(n,l){s.geras.Renderer.superClass_.refreshDom.call(this,n,l),this.getHighlightConstants().init()},s.geras.Renderer.prototype.makeConstants_=function(){return new s.geras.ConstantProvider},s.geras.Renderer.prototype.makeRenderInfo_=function(n){return new s.geras.RenderInfo(this,n)},s.geras.Renderer.prototype.makeDrawer_=function(n,l){return new s.geras.Drawer(n,l)},s.geras.Renderer.prototype.makePathObject=function(n,l){return new s.geras.PathObject(n,l,this.getConstants())},s.geras.Renderer.prototype.makeHighlightConstants_=function(){return new s.geras.HighlightConstantProvider(this.getConstants())},s.geras.Renderer.prototype.getHighlightConstants=function(){return this.highlightConstants_},s.blockRendering.register("geras",s.geras.Renderer),s.thrasos={},s.thrasos.RenderInfo=function(n,l){s.thrasos.RenderInfo.superClass_.constructor.call(this,n,l)},s.utils.object.inherits(s.thrasos.RenderInfo,s.blockRendering.RenderInfo),s.thrasos.RenderInfo.prototype.getRenderer=function(){return this.renderer_},s.thrasos.RenderInfo.prototype.addElemSpacing_=function(){for(var u,n=!1,l=0;u=this.rows[l];l++)u.hasExternalInput&&(n=!0);for(l=0;u=this.rows[l];l++){var h=u.elements;u.elements=[],u.startsWithElemSpacer()&&u.elements.push(new s.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,h[0])));for(var _=0;_<h.length-1;_++){u.elements.push(h[_]);var b=this.getInRowSpacing_(h[_],h[_+1]);u.elements.push(new s.blockRendering.InRowSpacer(this.constants_,b))}u.elements.push(h[h.length-1]),u.endsWithElemSpacer()&&(b=this.getInRowSpacing_(h[h.length-1],null),n&&u.hasDummyInput&&(b+=this.constants_.TAB_WIDTH),u.elements.push(new s.blockRendering.InRowSpacer(this.constants_,b)))}},s.thrasos.RenderInfo.prototype.getInRowSpacing_=function(n,l){if(!n)return l&&s.blockRendering.Types.isField(l)&&l.isEditable?this.constants_.MEDIUM_PADDING:l&&s.blockRendering.Types.isInlineInput(l)?this.constants_.MEDIUM_LARGE_PADDING:l&&s.blockRendering.Types.isStatementInput(l)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!s.blockRendering.Types.isInput(n)&&!l)return s.blockRendering.Types.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:s.blockRendering.Types.isIcon(n)?2*this.constants_.LARGE_PADDING+1:s.blockRendering.Types.isHat(n)?this.constants_.NO_PADDING:s.blockRendering.Types.isPreviousOrNextConnection(n)?this.constants_.LARGE_PADDING:s.blockRendering.Types.isLeftRoundedCorner(n)?this.constants_.MIN_BLOCK_WIDTH:s.blockRendering.Types.isJaggedEdge(n)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(s.blockRendering.Types.isInput(n)&&!l){if(s.blockRendering.Types.isExternalInput(n))return this.constants_.NO_PADDING;if(s.blockRendering.Types.isInlineInput(n))return this.constants_.LARGE_PADDING;if(s.blockRendering.Types.isStatementInput(n))return this.constants_.NO_PADDING}if(!s.blockRendering.Types.isInput(n)&&l&&s.blockRendering.Types.isInput(l)){if(s.blockRendering.Types.isField(n)&&n.isEditable){if(s.blockRendering.Types.isInlineInput(l)||s.blockRendering.Types.isExternalInput(l))return this.constants_.SMALL_PADDING}else{if(s.blockRendering.Types.isInlineInput(l)||s.blockRendering.Types.isExternalInput(l))return this.constants_.MEDIUM_LARGE_PADDING;if(s.blockRendering.Types.isStatementInput(l))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(s.blockRendering.Types.isIcon(n)&&l&&!s.blockRendering.Types.isInput(l))return this.constants_.LARGE_PADDING;if(s.blockRendering.Types.isInlineInput(n)&&l&&s.blockRendering.Types.isField(l))return l.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(s.blockRendering.Types.isLeftSquareCorner(n)&&l){if(s.blockRendering.Types.isHat(l))return this.constants_.NO_PADDING;if(s.blockRendering.Types.isPreviousConnection(l)||s.blockRendering.Types.isNextConnection(l))return l.notchOffset}return s.blockRendering.Types.isLeftRoundedCorner(n)&&l?l.notchOffset-this.constants_.CORNER_RADIUS:s.blockRendering.Types.isField(n)&&l&&s.blockRendering.Types.isField(l)&&n.isEditable==l.isEditable||l&&s.blockRendering.Types.isJaggedEdge(l)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},s.thrasos.RenderInfo.prototype.getSpacerRowHeight_=function(n,l){return s.blockRendering.Types.isTopRow(n)&&s.blockRendering.Types.isBottomRow(l)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:s.blockRendering.Types.isTopRow(n)||s.blockRendering.Types.isBottomRow(l)?this.constants_.NO_PADDING:n.hasExternalInput&&l.hasExternalInput?this.constants_.LARGE_PADDING:!n.hasStatement&&l.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:n.hasStatement&&l.hasStatement||n.hasDummyInput||l.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},s.thrasos.RenderInfo.prototype.getElemCenterline_=function(n,l){if(s.blockRendering.Types.isSpacer(l))return n.yPos+l.height/2;if(s.blockRendering.Types.isBottomRow(n))return n=n.yPos+n.height-n.descenderHeight,s.blockRendering.Types.isNextConnection(l)?n+l.height/2:n-l.height/2;if(s.blockRendering.Types.isTopRow(n))return s.blockRendering.Types.isHat(l)?n.capline-l.height/2:n.capline+l.height/2;var u=n.yPos;return s.blockRendering.Types.isField(l)&&n.hasStatement?u+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+l.height/2):u+n.height/2},s.thrasos.RenderInfo.prototype.finalize_=function(){for(var h,n=0,l=0,u=0;h=this.rows[u];u++){h.yPos=l,h.xPos=this.startX,l+=h.height,n=Math.max(n,h.widthWithConnectedBlocks);var _=l-this.topRow.ascenderHeight;h==this.bottomRow&&_<this.constants_.MIN_BLOCK_HEIGHT&&(this.bottomRow.height+=_=this.constants_.MIN_BLOCK_HEIGHT-_,l+=_),this.recordElemPositions_(h)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(n=Math.max(n,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.bottomRow.baseline=l-this.bottomRow.descenderHeight,this.widthWithChildren=n+this.startX,this.height=l,this.startY=this.topRow.capline},s.thrasos.Renderer=function(n){s.thrasos.Renderer.superClass_.constructor.call(this,n)},s.utils.object.inherits(s.thrasos.Renderer,s.blockRendering.Renderer),s.thrasos.Renderer.prototype.makeRenderInfo_=function(n){return new s.thrasos.RenderInfo(this,n)},s.blockRendering.register("thrasos",s.thrasos.Renderer),s.zelos={},s.zelos.ConstantProvider=function(){s.zelos.ConstantProvider.superClass_.constructor.call(this),this.SMALL_PADDING=this.GRID_UNIT=4,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TAB_OFFSET_FROM_TOP=0,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!0,this.FIELD_COLOUR_DEFAULT_WIDTH=2*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=4*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter_=null,this.replacementGlowFilterId="",this.replacementGlowFilter_=null},s.utils.object.inherits(s.zelos.ConstantProvider,s.blockRendering.ConstantProvider),s.zelos.ConstantProvider.prototype.setFontConstants_=function(n){s.zelos.ConstantProvider.superClass_.setFontConstants_.call(this,n),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING},s.zelos.ConstantProvider.prototype.init=function(){s.zelos.ConstantProvider.superClass_.init.call(this),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth},s.zelos.ConstantProvider.prototype.setDynamicProperties_=function(n){s.zelos.ConstantProvider.superClass_.setDynamicProperties_.call(this,n),this.SELECTED_GLOW_COLOUR=n.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;var l=Number(n.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=l&&!isNaN(l)?l:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=n.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(n=Number(n.getComponentStyle("replacementGlowSize")))&&!isNaN(n)?n:this.REPLACEMENT_GLOW_SIZE},s.zelos.ConstantProvider.prototype.dispose=function(){s.zelos.ConstantProvider.superClass_.dispose.call(this),this.selectedGlowFilter_&&s.utils.dom.removeNode(this.selectedGlowFilter_),this.replacementGlowFilter_&&s.utils.dom.removeNode(this.replacementGlowFilter_)},s.zelos.ConstantProvider.prototype.makeStartHat=function(){var n=this.START_HAT_HEIGHT,l=this.START_HAT_WIDTH;return{height:n,width:l,path:s.utils.svgPaths.curve("c",[s.utils.svgPaths.point(25,-n),s.utils.svgPaths.point(71,-n),s.utils.svgPaths.point(l,0)])}},s.zelos.ConstantProvider.prototype.makeHexagonal=function(){function n(u,h,_){var b=u/2;return s.utils.svgPaths.lineTo(-(_=_?-1:1)*(b=b>l?l:b),u=(h?-1:1)*u/2)+s.utils.svgPaths.lineTo(_*b,u)}var l=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width:function(u){return(u/=2)>l?l:u},height:function(u){return u},connectionOffsetY:function(u){return u/2},connectionOffsetX:function(u){return-u},pathDown:function(u){return n(u,!1,!1)},pathUp:function(u){return n(u,!0,!1)},pathRightDown:function(u){return n(u,!1,!0)},pathRightUp:function(u){return n(u,!1,!0)}}},s.zelos.ConstantProvider.prototype.makeRounded=function(){function n(h,_,b){var R=h>u?h-u:0;return s.utils.svgPaths.arc("a","0 0,1",h=(h>u?u:h)/2,s.utils.svgPaths.point((_?-1:1)*h,(_?-1:1)*h))+s.utils.svgPaths.lineOnAxis("v",(b?1:-1)*R)+s.utils.svgPaths.arc("a","0 0,1",h,s.utils.svgPaths.point((_?1:-1)*h,(_?-1:1)*h))}var l=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,u=2*l;return{type:this.SHAPES.ROUND,isDynamic:!0,width:function(h){return(h/=2)>l?l:h},height:function(h){return h},connectionOffsetY:function(h){return h/2},connectionOffsetX:function(h){return-h},pathDown:function(h){return n(h,!1,!1)},pathUp:function(h){return n(h,!0,!1)},pathRightDown:function(h){return n(h,!1,!0)},pathRightUp:function(h){return n(h,!1,!0)}}},s.zelos.ConstantProvider.prototype.makeSquared=function(){function n(u,h,_){return u-=2*l,s.utils.svgPaths.arc("a","0 0,1",l,s.utils.svgPaths.point((h?-1:1)*l,(h?-1:1)*l))+s.utils.svgPaths.lineOnAxis("v",(_?1:-1)*u)+s.utils.svgPaths.arc("a","0 0,1",l,s.utils.svgPaths.point((h?1:-1)*l,(h?-1:1)*l))}var l=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width:function(u){return l},height:function(u){return u},connectionOffsetY:function(u){return u/2},connectionOffsetX:function(u){return-u},pathDown:function(u){return n(u,!1,!1)},pathUp:function(u){return n(u,!0,!1)},pathRightDown:function(u){return n(u,!1,!0)},pathRightUp:function(u){return n(u,!1,!0)}}},s.zelos.ConstantProvider.prototype.shapeFor=function(n){var l=n.getCheck();switch(!l&&n.targetConnection&&(l=n.targetConnection.getCheck()),n.type){case s.connectionTypes.INPUT_VALUE:case s.connectionTypes.OUTPUT_VALUE:if(null!=(n=n.getSourceBlock().getOutputShape()))switch(n){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return l&&-1!=l.indexOf("Boolean")?this.HEXAGONAL:(l&&-1!=l.indexOf("Number")||l&&l.indexOf("String"),this.ROUNDED);case s.connectionTypes.PREVIOUS_STATEMENT:case s.connectionTypes.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}},s.zelos.ConstantProvider.prototype.makeNotch=function(){function n(W){return s.utils.svgPaths.curve("c",[s.utils.svgPaths.point(W*_/2,0),s.utils.svgPaths.point(W*_*3/4,R/2),s.utils.svgPaths.point(W*_,R)])+s.utils.svgPaths.line([s.utils.svgPaths.point(W*_,b)])+s.utils.svgPaths.curve("c",[s.utils.svgPaths.point(W*_/4,R/2),s.utils.svgPaths.point(W*_/2,R),s.utils.svgPaths.point(W*_,R)])+s.utils.svgPaths.lineOnAxis("h",W*h)+s.utils.svgPaths.curve("c",[s.utils.svgPaths.point(W*_/2,0),s.utils.svgPaths.point(W*_*3/4,-R/2),s.utils.svgPaths.point(W*_,-R)])+s.utils.svgPaths.line([s.utils.svgPaths.point(W*_,-b)])+s.utils.svgPaths.curve("c",[s.utils.svgPaths.point(W*_/4,-R/2),s.utils.svgPaths.point(W*_/2,-R),s.utils.svgPaths.point(W*_,-R)])}var l=this.NOTCH_WIDTH,u=this.NOTCH_HEIGHT,h=l/3,_=h/3,b=u/2,R=b/2,O=n(1),H=n(-1);return{type:this.SHAPES.NOTCH,width:l,height:u,pathLeft:O,pathRight:H}},s.zelos.ConstantProvider.prototype.makeInsideCorners=function(){var n=this.CORNER_RADIUS,l=s.utils.svgPaths.arc("a","0 0,0",n,s.utils.svgPaths.point(-n,n)),u=s.utils.svgPaths.arc("a","0 0,1",n,s.utils.svgPaths.point(-n,n));return{width:n,height:n,pathTop:l,pathBottom:s.utils.svgPaths.arc("a","0 0,0",n,s.utils.svgPaths.point(n,n)),rightWidth:n,rightHeight:n,pathTopRight:u,pathBottomRight:s.utils.svgPaths.arc("a","0 0,1",n,s.utils.svgPaths.point(n,n))}},s.zelos.ConstantProvider.prototype.generateSecondaryColour_=function(n){return s.utils.colour.blend("#000",n,.15)||n},s.zelos.ConstantProvider.prototype.generateTertiaryColour_=function(n){return s.utils.colour.blend("#000",n,.25)||n},s.zelos.ConstantProvider.prototype.createDom=function(n,l,u){s.zelos.ConstantProvider.superClass_.createDom.call(this,n,l,u),n=s.utils.dom.createSvgElement(s.utils.Svg.DEFS,{},n),l=s.utils.dom.createSvgElement(s.utils.Svg.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},n),s.utils.dom.createSvgElement(s.utils.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},l),u=s.utils.dom.createSvgElement(s.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},l),s.utils.dom.createSvgElement(s.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},u),s.utils.dom.createSvgElement(s.utils.Svg.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},l),s.utils.dom.createSvgElement(s.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},l),this.selectedGlowFilterId=l.id,this.selectedGlowFilter_=l,n=s.utils.dom.createSvgElement(s.utils.Svg.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},n),s.utils.dom.createSvgElement(s.utils.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},n),l=s.utils.dom.createSvgElement(s.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},n),s.utils.dom.createSvgElement(s.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},l),s.utils.dom.createSvgElement(s.utils.Svg.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},n),s.utils.dom.createSvgElement(s.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},n),s.utils.dom.createSvgElement(s.utils.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},n),this.replacementGlowFilterId=n.id,this.replacementGlowFilter_=n},s.zelos.ConstantProvider.prototype.getCSS_=function(n){return[n+" .blocklyText,",n+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",n+" .blocklyText {","fill: #fff;","}",n+" .blocklyNonEditableText>rect:not(.blocklyDropdownRect),",n+" .blocklyEditableText>rect:not(.blocklyDropdownRect) {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","}",n+" .blocklyNonEditableText>text,",n+" .blocklyEditableText>text,",n+" .blocklyNonEditableText>g>text,",n+" .blocklyEditableText>g>text {","fill: #575E75;","}",n+" .blocklyFlyoutLabelText {","fill: #575E75;","}",n+" .blocklyText.blocklyBubbleText {","fill: #575E75;","}",n+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>rect,",n+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",n+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","color: #575E75;","}",n+" .blocklyDropdownText {","fill: #fff !important;","}",n+".blocklyWidgetDiv .goog-menuitem,",n+".blocklyDropDownDiv .goog-menuitem {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","}",n+".blocklyDropDownDiv .goog-menuitem-content {","color: #fff;","}",n+" .blocklyHighlightedConnectionPath {","stroke: "+this.SELECTED_GLOW_COLOUR+";","}",n+" .blocklyDisabled > .blocklyOutlinePath {","fill: url(#blocklyDisabledPattern"+this.randomIdentifier+")","}",n+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]},s.zelos.TopRow=function(n){s.zelos.TopRow.superClass_.constructor.call(this,n)},s.utils.object.inherits(s.zelos.TopRow,s.blockRendering.TopRow),s.zelos.TopRow.prototype.endsWithElemSpacer=function(){return!1},s.zelos.TopRow.prototype.hasLeftSquareCorner=function(n){return!!n.outputConnection||(n.hat?"cap"===n.hat:this.constants_.ADD_START_HATS)&&!n.outputConnection&&!n.previousConnection},s.zelos.TopRow.prototype.hasRightSquareCorner=function(n){return!!n.outputConnection&&!n.statementInputCount&&!n.nextConnection},s.zelos.BottomRow=function(n){s.zelos.BottomRow.superClass_.constructor.call(this,n)},s.utils.object.inherits(s.zelos.BottomRow,s.blockRendering.BottomRow),s.zelos.BottomRow.prototype.endsWithElemSpacer=function(){return!1},s.zelos.BottomRow.prototype.hasLeftSquareCorner=function(n){return!!n.outputConnection},s.zelos.BottomRow.prototype.hasRightSquareCorner=function(n){return!!n.outputConnection&&!n.statementInputCount&&!n.nextConnection},s.zelos.RightConnectionShape=function(n){s.zelos.RightConnectionShape.superClass_.constructor.call(this,n),this.type|=s.blockRendering.Types.getType("RIGHT_CONNECTION"),this.width=this.height=0},s.utils.object.inherits(s.zelos.RightConnectionShape,s.blockRendering.Measurable),s.zelos.RenderInfo=function(n,l){s.zelos.RenderInfo.superClass_.constructor.call(this,n,l),this.topRow=new s.zelos.TopRow(this.constants_),this.bottomRow=new s.zelos.BottomRow(this.constants_),this.isInline=!0,this.isMultiRow=!l.getInputsInline()||l.isCollapsed(),this.hasStatementInput=0<l.statementInputCount,this.rightSide=this.outputConnection?new s.zelos.RightConnectionShape(this.constants_):null},s.utils.object.inherits(s.zelos.RenderInfo,s.blockRendering.RenderInfo),s.zelos.RenderInfo.prototype.getRenderer=function(){return this.renderer_},s.zelos.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},s.zelos.RenderInfo.prototype.shouldStartNewRow_=function(n,l){return!!l&&(n.type==s.inputTypes.STATEMENT||l.type==s.inputTypes.STATEMENT||(n.type==s.inputTypes.VALUE||n.type==s.inputTypes.DUMMY)&&(!this.isInline||this.isMultiRow))},s.zelos.RenderInfo.prototype.getDesiredRowWidth_=function(n){return n.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):s.zelos.RenderInfo.superClass_.getDesiredRowWidth_.call(this,n)},s.zelos.RenderInfo.prototype.getInRowSpacing_=function(n,l){return n&&l||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!n&&l&&s.blockRendering.Types.isStatementInput(l)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:n&&s.blockRendering.Types.isLeftRoundedCorner(n)&&l&&(s.blockRendering.Types.isPreviousConnection(l)||s.blockRendering.Types.isNextConnection(l))?l.notchOffset-this.constants_.CORNER_RADIUS:n&&s.blockRendering.Types.isLeftSquareCorner(n)&&l&&s.blockRendering.Types.isHat(l)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING},s.zelos.RenderInfo.prototype.getSpacerRowHeight_=function(n,l){if(s.blockRendering.Types.isTopRow(n)&&s.blockRendering.Types.isBottomRow(l))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;var u=s.blockRendering.Types.isInputRow(n)&&n.hasStatement,h=s.blockRendering.Types.isInputRow(l)&&l.hasStatement;return h||u?(n=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),h&&u?Math.max(n,this.constants_.DUMMY_INPUT_MIN_HEIGHT):n):s.blockRendering.Types.isTopRow(n)?n.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):s.blockRendering.Types.isBottomRow(l)?this.outputConnection?!l.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},s.zelos.RenderInfo.prototype.getSpacerRowWidth_=function(n,l){var u=this.width-this.startX;return s.blockRendering.Types.isInputRow(n)&&n.hasStatement||s.blockRendering.Types.isInputRow(l)&&l.hasStatement?Math.max(u,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):u},s.zelos.RenderInfo.prototype.getElemCenterline_=function(n,l){if(n.hasStatement&&!s.blockRendering.Types.isSpacer(l)&&!s.blockRendering.Types.isStatementInput(l))return n.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(s.blockRendering.Types.isInlineInput(l)){var u=l.connectedBlock;if(u&&u.outputConnection&&u.nextConnection)return n.yPos+u.height/2}return s.zelos.RenderInfo.superClass_.getElemCenterline_.call(this,n,l)},s.zelos.RenderInfo.prototype.addInput_=function(n,l){n.type==s.inputTypes.DUMMY&&l.hasDummyInput&&l.align==s.constants.ALIGN.LEFT&&n.align==s.constants.ALIGN.RIGHT&&(l.rightAlignedDummyInput=n),s.zelos.RenderInfo.superClass_.addInput_.call(this,n,l)},s.zelos.RenderInfo.prototype.addAlignmentPadding_=function(n,l){if(n.rightAlignedDummyInput){for(var u,_,h=0;(_=n.elements[h])&&(s.blockRendering.Types.isSpacer(_)&&(u=_),!s.blockRendering.Types.isField(_)||_.parentInput!=n.rightAlignedDummyInput);h++);if(u)return u.width+=l,void(n.width+=l)}s.zelos.RenderInfo.superClass_.addAlignmentPadding_.call(this,n,l)},s.zelos.RenderInfo.prototype.adjustXPosition_=function(){for(var n=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH,l=n,u=2;u<this.rows.length-1;u+=2){var h=this.rows[u-1],_=this.rows[u],b=this.rows[u+1];if(h=2==u?!!this.topRow.hasPreviousConnection:!!h.followsStatement,b=u+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!b.precedesStatement,s.blockRendering.Types.isInputRow(_)&&_.hasStatement)_.measure(),l=_.width-_.getLastInput().width+n;else if(h&&(2==u||b)&&s.blockRendering.Types.isInputRow(_)&&!_.hasStatement){b=_.xPos,h=null;for(var O,R=0;O=_.elements[R];R++)s.blockRendering.Types.isSpacer(O)&&(h=O),!(h&&(s.blockRendering.Types.isField(O)||s.blockRendering.Types.isInput(O))&&b<l)||s.blockRendering.Types.isField(O)&&(O.field instanceof s.FieldLabel||O.field instanceof s.FieldImage)||(h.width+=l-b),b+=O.width}}},s.zelos.RenderInfo.prototype.finalizeOutputConnection_=function(){if(this.outputConnection&&this.outputConnection.isDynamicShape){for(var u,n=0,l=0;u=this.rows[l];l++)u.yPos=n,n+=u.height;this.height=n,n=this.outputConnection.shape.height(l=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height),l=this.outputConnection.shape.width(l),this.outputConnection.height=n,this.outputConnection.width=l,this.outputConnection.startX=l,this.outputConnection.connectionOffsetY=this.outputConnection.shape.connectionOffsetY(n),this.outputConnection.connectionOffsetX=this.outputConnection.shape.connectionOffsetX(l),u=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(u=l,this.rightSide.height=n,this.rightSide.width=u,this.rightSide.centerline=n/2,this.rightSide.xPos=this.width+u),this.startX=l,this.width+=l+u,this.widthWithChildren+=l+u}},s.zelos.RenderInfo.prototype.finalizeHorizontalAlignment_=function(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var u,n=0,l=0;u=this.rows[l];l++)if(s.blockRendering.Types.isInputRow(u)){n=u.elements[u.elements.length-2];var h=this.getNegativeSpacing_(u.elements[1]),_=this.getNegativeSpacing_(n),b=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-(n=h+_)<b&&(h=(n=this.width-b)/2,_=n/2),u.elements.unshift(new s.blockRendering.InRowSpacer(this.constants_,-h)),u.elements.push(new s.blockRendering.InRowSpacer(this.constants_,-_))}if(n)for(this.width-=n,this.widthWithChildren-=n,this.rightSide.xPos-=n,l=0;u=this.rows[l];l++)s.blockRendering.Types.isTopOrBottomRow(u)&&(u.elements[1].width-=n,u.elements[1].widthWithConnectedBlocks-=n),u.width-=n,u.widthWithConnectedBlocks-=n}},s.zelos.RenderInfo.prototype.getNegativeSpacing_=function(n){if(!n)return 0;var l=this.outputConnection.width,u=this.outputConnection.shape.type,h=this.constants_;if(this.isMultiRow&&1<this.inputRows.length)return u===h.SHAPES.ROUND?l-(u=this.height/2>(u=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH)?u:this.height/2)*(1-Math.sin(Math.acos((u-this.constants_.SMALL_PADDING)/u))):0;if(s.blockRendering.Types.isInlineInput(n)){var _=n.connectedBlock;return n=_?_.pathObject.outputShapeType:n.shape.type,_&&_.outputConnection&&(_.statementInputCount||_.nextConnection)||u==h.SHAPES.HEXAGONAL&&u!=n?0:l-this.constants_.SHAPE_IN_SHAPE_PADDING[u][n]}return s.blockRendering.Types.isField(n)?u==h.SHAPES.ROUND&&n.field instanceof s.FieldTextInput?l-2.75*h.GRID_UNIT:l-this.constants_.SHAPE_IN_SHAPE_PADDING[u][0]:s.blockRendering.Types.isIcon(n)?this.constants_.SMALL_PADDING:0},s.zelos.RenderInfo.prototype.finalizeVerticalAlignment_=function(){if(!this.outputConnection)for(var n=2;n<this.rows.length-1;n+=2){var l=this.rows[n-1],u=this.rows[n],h=this.rows[n+1],_=2==n,b=n+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!h.precedesStatement;if(_?this.topRow.hasPreviousConnection:l.followsStatement){var R=3==u.elements.length&&(u.elements[1].field instanceof s.FieldLabel||u.elements[1].field instanceof s.FieldImage);if(!_&&R)l.height-=this.constants_.SMALL_PADDING,h.height-=this.constants_.SMALL_PADDING,u.height-=this.constants_.MEDIUM_PADDING;else if(_||b){if(b){for(_=!1,b=0;R=u.elements[b];b++)if(s.blockRendering.Types.isInlineInput(R)&&R.connectedBlock&&!R.connectedBlock.isShadow()&&40<=R.connectedBlock.getHeightWidth().height){_=!0;break}_&&(l.height-=this.constants_.SMALL_PADDING,h.height-=this.constants_.SMALL_PADDING)}}else l.height+=this.constants_.SMALL_PADDING}}},s.zelos.RenderInfo.prototype.finalize_=function(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),s.zelos.RenderInfo.superClass_.finalize_.call(this),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)},s.zelos.Drawer=function(n,l){s.zelos.Drawer.superClass_.constructor.call(this,n,l)},s.utils.object.inherits(s.zelos.Drawer,s.blockRendering.Drawer),s.zelos.Drawer.prototype.draw=function(){var n=this.block_.pathObject;n.beginDrawing(),this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),n.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&n.flipRTL(),s.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_(),this.info_.outputConnection&&(n.outputShapeType=this.info_.outputConnection.shape.type),n.endDrawing()},s.zelos.Drawer.prototype.drawOutline_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):s.zelos.Drawer.superClass_.drawOutline_.call(this)},s.zelos.Drawer.prototype.drawLeft_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():s.zelos.Drawer.superClass_.drawLeft_.call(this)},s.zelos.Drawer.prototype.drawRightSideRow_=function(n){if(!(0>=n.height))if(n.precedesStatement||n.followsStatement){var l=this.constants_.INSIDE_CORNERS.rightHeight;this.outlinePath_+=(n.followsStatement?this.constants_.INSIDE_CORNERS.pathBottomRight:"")+(0<(l=n.height-(n.precedesStatement?l:0))?s.utils.svgPaths.lineOnAxis("V",n.yPos+l):"")+(n.precedesStatement?this.constants_.INSIDE_CORNERS.pathTopRight:"")}else this.outlinePath_+=s.utils.svgPaths.lineOnAxis("V",n.yPos+n.height)},s.zelos.Drawer.prototype.drawRightDynamicConnection_=function(){this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)},s.zelos.Drawer.prototype.drawLeftDynamicConnection_=function(){this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"},s.zelos.Drawer.prototype.drawFlatTop_=function(){var n=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=s.utils.svgPaths.moveBy(n.xPos,this.info_.startY),this.outlinePath_+=s.utils.svgPaths.lineOnAxis("h",n.width)},s.zelos.Drawer.prototype.drawFlatBottom_=function(){var n=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=s.utils.svgPaths.lineOnAxis("V",n.baseline),this.outlinePath_+=s.utils.svgPaths.lineOnAxis("h",-n.width)},s.zelos.Drawer.prototype.drawInlineInput_=function(n){this.positionInlineInputConnection_(n);var l=n.input.name;if(!n.connectedBlock&&!this.info_.isInsertionMarker){var u=n.width-2*n.connectionWidth;n=s.utils.svgPaths.moveTo(n.xPos+n.connectionWidth,n.centerline-n.height/2)+s.utils.svgPaths.lineOnAxis("h",u)+n.shape.pathRightDown(n.height)+s.utils.svgPaths.lineOnAxis("h",-u)+n.shape.pathUp(n.height)+"z",this.block_.pathObject.setOutlinePath(l,n)}},s.zelos.Drawer.prototype.drawStatementInput_=function(n){var l=n.getLastInput(),u=l.xPos+l.notchOffset+l.shape.width,h=l.shape.pathRight+s.utils.svgPaths.lineOnAxis("h",-(l.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop,_=n.height-2*this.constants_.INSIDE_CORNERS.height;l=this.constants_.INSIDE_CORNERS.pathBottom+s.utils.svgPaths.lineOnAxis("h",l.notchOffset-this.constants_.INSIDE_CORNERS.width)+(l.connectedBottomNextConnection?"":l.shape.pathLeft),this.outlinePath_+=s.utils.svgPaths.lineOnAxis("H",u)+h+s.utils.svgPaths.lineOnAxis("v",_)+l+s.utils.svgPaths.lineOnAxis("H",n.xPos+n.width),this.positionStatementInputConnection_(n)},s.zelos.MarkerSvg=function(n,l,u){s.zelos.MarkerSvg.superClass_.constructor.call(this,n,l,u)},s.utils.object.inherits(s.zelos.MarkerSvg,s.blockRendering.MarkerSvg),s.zelos.MarkerSvg.prototype.showWithInputOutput_=function(n){var l=n.getSourceBlock();n=n.getLocation().getOffsetInBlock(),this.positionCircle_(n.x,n.y),this.setParent_(l),this.showCurrent_()},s.zelos.MarkerSvg.prototype.showWithOutput_=function(n){this.showWithInputOutput_(n)},s.zelos.MarkerSvg.prototype.showWithInput_=function(n){this.showWithInputOutput_(n)},s.zelos.MarkerSvg.prototype.showWithBlock_=function(n){var l=(n=n.getLocation()).getHeightWidth();this.positionRect_(0,0,l.width,l.height),this.setParent_(n),this.showCurrent_()},s.zelos.MarkerSvg.prototype.positionCircle_=function(n,l){this.markerCircle_.setAttribute("cx",n),this.markerCircle_.setAttribute("cy",l),this.currentMarkerSvg=this.markerCircle_},s.zelos.MarkerSvg.prototype.hide=function(){s.zelos.MarkerSvg.superClass_.hide.call(this),this.markerCircle_.style.display="none"},s.zelos.MarkerSvg.prototype.createDomInternal_=function(){if(s.zelos.MarkerSvg.superClass_.createDomInternal_.call(this),this.markerCircle_=s.utils.dom.createSvgElement(s.utils.Svg.CIRCLE,{r:this.constants_.CURSOR_RADIUS,style:"display: none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var n=this.getBlinkProperties_();s.utils.dom.createSvgElement(s.utils.Svg.ANIMATE,n,this.markerCircle_)}return this.markerSvg_},s.zelos.MarkerSvg.prototype.applyColour_=function(n){s.zelos.MarkerSvg.superClass_.applyColour_.call(this,n),this.markerCircle_.setAttribute("fill",this.colour_),this.markerCircle_.setAttribute("stroke",this.colour_),this.isCursor()&&this.markerCircle_.firstChild.setAttribute("values",this.colour_+";transparent;transparent;")},s.zelos.PathObject=function(n,l,u){s.zelos.PathObject.superClass_.constructor.call(this,n,l,u),this.constants=u,this.svgPathSelected_=null,this.outlines_=Object.create(null),this.outputShapeType=this.remainingOutlines_=null},s.utils.object.inherits(s.zelos.PathObject,s.blockRendering.PathObject),s.zelos.PathObject.prototype.setPath=function(n){s.zelos.PathObject.superClass_.setPath.call(this,n),this.svgPathSelected_&&this.svgPathSelected_.setAttribute("d",n)},s.zelos.PathObject.prototype.applyColour=function(n){for(var l in s.zelos.PathObject.superClass_.applyColour.call(this,n),n.isShadow()&&n.getParent()&&this.svgPath.setAttribute("stroke",n.getParent().style.colourTertiary),this.outlines_)this.outlines_[l].setAttribute("fill",this.style.colourTertiary)},s.zelos.PathObject.prototype.flipRTL=function(){for(var n in s.zelos.PathObject.superClass_.flipRTL.call(this),this.outlines_)this.outlines_[n].setAttribute("transform","scale(-1 1)")},s.zelos.PathObject.prototype.updateSelected=function(n){this.setClass_("blocklySelected",n),n?this.svgPathSelected_||(this.svgPathSelected_=this.svgPath.cloneNode(!0),this.svgPathSelected_.setAttribute("fill","none"),this.svgPathSelected_.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected_)):this.svgPathSelected_&&(this.svgRoot.removeChild(this.svgPathSelected_),this.svgPathSelected_=null)},s.zelos.PathObject.prototype.updateReplacementFade=function(n){this.setClass_("blocklyReplaceable",n),n?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")},s.zelos.PathObject.prototype.updateShapeForInputHighlight=function(n,l){n=n.getParentInput().name,(n=this.getOutlinePath_(n))&&(l?n.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):n.removeAttribute("filter"))},s.zelos.PathObject.prototype.beginDrawing=function(){for(var n in this.remainingOutlines_=Object.create(null),this.outlines_)this.remainingOutlines_[n]=1},s.zelos.PathObject.prototype.endDrawing=function(){if(this.remainingOutlines_)for(var n in this.remainingOutlines_)this.removeOutlinePath_(n);this.remainingOutlines_=null},s.zelos.PathObject.prototype.setOutlinePath=function(n,l){(n=this.getOutlinePath_(n)).setAttribute("d",l),n.setAttribute("fill",this.style.colourTertiary)},s.zelos.PathObject.prototype.getOutlinePath_=function(n){return this.outlines_[n]||(this.outlines_[n]=s.utils.dom.createSvgElement(s.utils.Svg.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines_&&delete this.remainingOutlines_[n],this.outlines_[n]},s.zelos.PathObject.prototype.removeOutlinePath_=function(n){this.outlines_[n].parentNode.removeChild(this.outlines_[n]),delete this.outlines_[n]},s.zelos.Renderer=function(n){s.zelos.Renderer.superClass_.constructor.call(this,n)},s.utils.object.inherits(s.zelos.Renderer,s.blockRendering.Renderer),s.zelos.Renderer.prototype.makeConstants_=function(){return new s.zelos.ConstantProvider},s.zelos.Renderer.prototype.makeRenderInfo_=function(n){return new s.zelos.RenderInfo(this,n)},s.zelos.Renderer.prototype.makeDrawer_=function(n,l){return new s.zelos.Drawer(n,l)},s.zelos.Renderer.prototype.makeMarkerDrawer=function(n,l){return new s.zelos.MarkerSvg(n,this.getConstants(),l)},s.zelos.Renderer.prototype.makePathObject=function(n,l){return new s.zelos.PathObject(n,l,this.getConstants())},s.zelos.Renderer.prototype.shouldHighlightConnection=function(n){return n.type!=s.connectionTypes.INPUT_VALUE&&n.type!==s.connectionTypes.OUTPUT_VALUE},s.zelos.Renderer.prototype.getConnectionPreviewMethod=function(n,l,u){return l.type==s.connectionTypes.OUTPUT_VALUE?n.isConnected()?s.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:s.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:s.zelos.Renderer.superClass_.getConnectionPreviewMethod(n,l,u)},s.blockRendering.register("zelos",s.zelos.Renderer),s.Themes.Dark=s.Theme.defineTheme("dark",{base:s.Themes.Classic,componentStyles:{workspaceBackgroundColour:"#1e1e1e",toolboxBackgroundColour:"blackBackground",toolboxForegroundColour:"#fff",flyoutBackgroundColour:"#252526",flyoutForegroundColour:"#ccc",flyoutOpacity:1,scrollbarColour:"#797979",insertionMarkerColour:"#fff",insertionMarkerOpacity:.3,scrollbarOpacity:.4,cursorColour:"#d0d0d0",blackBackground:"#333"}}),s.Themes.Deuteranopia={},s.Themes.Deuteranopia.defaultBlockStyles={colour_blocks:{colourPrimary:"#f2a72c",colourSecondary:"#f1c172",colourTertiary:"#da921c"},list_blocks:{colourPrimary:"#7d65ab",colourSecondary:"#a88be0",colourTertiary:"#66518e"},logic_blocks:{colourPrimary:"#9fd2f1",colourSecondary:"#c0e0f4",colourTertiary:"#74bae5"},loop_blocks:{colourPrimary:"#795a07",colourSecondary:"#ac8726",colourTertiary:"#c4a03f"},math_blocks:{colourPrimary:"#e6da39",colourSecondary:"#f3ec8e",colourTertiary:"#f2eeb7"},procedure_blocks:{colourPrimary:"#590721",colourSecondary:"#8c475d",colourTertiary:"#885464"},text_blocks:{colourPrimary:"#058863",colourSecondary:"#5ecfaf",colourTertiary:"#04684c"},variable_blocks:{colourPrimary:"#47025a",colourSecondary:"#820fa1",colourTertiary:"#8e579d"},variable_dynamic_blocks:{colourPrimary:"#47025a",colourSecondary:"#820fa1",colourTertiary:"#8e579d"}},s.Themes.Deuteranopia.categoryStyles={colour_category:{colour:"#f2a72c"},list_category:{colour:"#7d65ab"},logic_category:{colour:"#9fd2f1"},loop_category:{colour:"#795a07"},math_category:{colour:"#e6da39"},procedure_category:{colour:"#590721"},text_category:{colour:"#058863"},variable_category:{colour:"#47025a"},variable_dynamic_category:{colour:"#47025a"}},s.Themes.Deuteranopia=new s.Theme("deuteranopia",s.Themes.Deuteranopia.defaultBlockStyles,s.Themes.Deuteranopia.categoryStyles),s.Themes.HighContrast={},s.Themes.HighContrast.defaultBlockStyles={colour_blocks:{colourPrimary:"#a52714",colourSecondary:"#FB9B8C",colourTertiary:"#FBE1DD"},list_blocks:{colourPrimary:"#4a148c",colourSecondary:"#AD7BE9",colourTertiary:"#CDB6E9"},logic_blocks:{colourPrimary:"#01579b",colourSecondary:"#64C7FF",colourTertiary:"#C5EAFF"},loop_blocks:{colourPrimary:"#33691e",colourSecondary:"#9AFF78",colourTertiary:"#E1FFD7"},math_blocks:{colourPrimary:"#1a237e",colourSecondary:"#8A9EFF",colourTertiary:"#DCE2FF"},procedure_blocks:{colourPrimary:"#006064",colourSecondary:"#77E6EE",colourTertiary:"#CFECEE"},text_blocks:{colourPrimary:"#004d40",colourSecondary:"#5ae27c",colourTertiary:"#D2FFDD"},variable_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},variable_dynamic_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},hat_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB",hat:"cap"}},s.Themes.HighContrast.categoryStyles={colour_category:{colour:"#a52714"},list_category:{colour:"#4a148c"},logic_category:{colour:"#01579b"},loop_category:{colour:"#33691e"},math_category:{colour:"#1a237e"},procedure_category:{colour:"#006064"},text_category:{colour:"#004d40"},variable_category:{colour:"#880e4f"},variable_dynamic_category:{colour:"#880e4f"}},s.Themes.HighContrast=new s.Theme("highcontrast",s.Themes.HighContrast.defaultBlockStyles,s.Themes.HighContrast.categoryStyles),s.Themes.HighContrast.setComponentStyle("selectedGlowColour","#000000"),s.Themes.HighContrast.setComponentStyle("selectedGlowSize",1),s.Themes.HighContrast.setComponentStyle("replacementGlowColour","#000000"),s.Themes.HighContrast.setFontStyle({family:null,weight:null,size:16}),s.Themes.Tritanopia={},s.Themes.Tritanopia.defaultBlockStyles={colour_blocks:{colourPrimary:"#05427f",colourSecondary:"#2974c0",colourTertiary:"#2d74bb"},list_blocks:{colourPrimary:"#b69ce8",colourSecondary:"#ccbaef",colourTertiary:"#9176c5"},logic_blocks:{colourPrimary:"#9fd2f1",colourSecondary:"#c0e0f4",colourTertiary:"#74bae5"},loop_blocks:{colourPrimary:"#aa1846",colourSecondary:"#d36185",colourTertiary:"#7c1636"},math_blocks:{colourPrimary:"#e6da39",colourSecondary:"#f3ec8e",colourTertiary:"#f2eeb7"},procedure_blocks:{colourPrimary:"#590721",colourSecondary:"#8c475d",colourTertiary:"#885464"},text_blocks:{colourPrimary:"#058863",colourSecondary:"#5ecfaf",colourTertiary:"#04684c"},variable_blocks:{colourPrimary:"#4b2d84",colourSecondary:"#816ea7",colourTertiary:"#83759e"},variable_dynamic_blocks:{colourPrimary:"#4b2d84",colourSecondary:"#816ea7",colourTertiary:"#83759e"}},s.Themes.Tritanopia.categoryStyles={colour_category:{colour:"#05427f"},list_category:{colour:"#b69ce8"},logic_category:{colour:"#9fd2f1"},loop_category:{colour:"#aa1846"},math_category:{colour:"#e6da39"},procedure_category:{colour:"#590721"},text_category:{colour:"#058863"},variable_category:{colour:"#4b2d84"},variable_dynamic_category:{colour:"#4b2d84"}},s.Themes.Tritanopia=new s.Theme("tritanopia",s.Themes.Tritanopia.defaultBlockStyles,s.Themes.Tritanopia.categoryStyles),s.requires={},s}.apply(I,[]))&&(T.exports=S)},20813:function(T,I,m){var S,s;S=[m(73517)],void 0!==(s=function(n){"use strict";return n.Blocks={},n.Blocks}.apply(I,S))&&(T.exports=s)},73517:function(T,I,m){var S,s;S=[m(96761)],void 0!==(s=function(n){"use strict";return n.Blocks.colour={},n.Constants={},n.Constants.Colour={},n.Constants.Colour.HUE=20,n.defineBlocksWithJsonArray([{type:"colour_picker",message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"colour_random",message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"},{type:"colour_rgb",message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"RIGHT"},{type:"input_value",name:"GREEN",check:"Number",align:"RIGHT"},{type:"input_value",name:"BLUE",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"},{type:"colour_blend",message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"RIGHT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"RIGHT"},{type:"input_value",name:"RATIO",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"}]),n.Constants.Lists={},n.Constants.Lists.HUE=260,n.defineBlocksWithJsonArray([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),n.Blocks.lists_create_with={init:function(){this.setHelpUrl(n.Msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new n.Mutator(["lists_create_with_item"])),this.setTooltip(n.Msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){var l=n.utils.xml.createElement("mutation");return l.setAttribute("items",this.itemCount_),l},domToMutation:function(l){this.itemCount_=parseInt(l.getAttribute("items"),10),this.updateShape_()},decompose:function(l){var u=l.newBlock("lists_create_with_container");u.initSvg();for(var h=u.getInput("STACK").connection,_=0;_<this.itemCount_;_++){var b=l.newBlock("lists_create_with_item");b.initSvg(),h.connect(b.previousConnection),h=b.nextConnection}return u},compose:function(l){var u=l.getInputTargetBlock("STACK");for(l=[];u&&!u.isInsertionMarker();)l.push(u.valueConnection_),u=u.nextConnection&&u.nextConnection.targetBlock();for(u=0;u<this.itemCount_;u++){var h=this.getInput("ADD"+u).connection.targetConnection;h&&-1==l.indexOf(h)&&h.disconnect()}for(this.itemCount_=l.length,this.updateShape_(),u=0;u<this.itemCount_;u++)n.Mutator.reconnect(l[u],this,"ADD"+u)},saveConnections:function(l){l=l.getInputTargetBlock("STACK");for(var u=0;l;){var h=this.getInput("ADD"+u);l.valueConnection_=h&&h.connection.targetConnection,u++,l=l.nextConnection&&l.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(n.Msg.LISTS_CREATE_EMPTY_TITLE);for(var l=0;l<this.itemCount_;l++)if(!this.getInput("ADD"+l)){var u=this.appendValueInput("ADD"+l).setAlign(n.ALIGN_RIGHT);0==l&&u.appendField(n.Msg.LISTS_CREATE_WITH_INPUT_WITH)}for(;this.getInput("ADD"+l);)this.removeInput("ADD"+l),l++}},n.Blocks.lists_create_with_container={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(n.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(n.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}},n.Blocks.lists_create_with_item={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(n.Msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(n.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}},n.Blocks.lists_indexOf={init:function(){var l=[[n.Msg.LISTS_INDEX_OF_FIRST,"FIRST"],[n.Msg.LISTS_INDEX_OF_LAST,"LAST"]];this.setHelpUrl(n.Msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(n.Msg.LISTS_INDEX_OF_INPUT_IN_LIST),this.appendValueInput("FIND").appendField(new n.FieldDropdown(l),"END"),this.setInputsInline(!0);var u=this;this.setTooltip(function(){return n.Msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",u.workspace.options.oneBasedIndex?"0":"-1")})}},n.Blocks.lists_getIndex={init:function(){var l=[[n.Msg.LISTS_GET_INDEX_GET,"GET"],[n.Msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[n.Msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[n.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[n.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[n.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[n.Msg.LISTS_GET_INDEX_LAST,"LAST"],[n.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(n.Msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),l=new n.FieldDropdown(l,function(h){h="REMOVE"==h,this.getSourceBlock().updateStatement_(h)}),this.appendValueInput("VALUE").setCheck("Array").appendField(n.Msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(l,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),n.Msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(n.Msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0);var u=this;this.setTooltip(function(){var h=u.getFieldValue("MODE"),_=u.getFieldValue("WHERE"),b="";switch(h+" "+_){case"GET FROM_START":case"GET FROM_END":b=n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":b=n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":b=n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":b=n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":b=n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":b=n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":b=n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":b=n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":b=n.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":b=n.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":b=n.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":b=n.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return("FROM_START"==_||"FROM_END"==_)&&(b+="  "+("FROM_START"==_?n.Msg.LISTS_INDEX_FROM_START_TOOLTIP:n.Msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",u.workspace.options.oneBasedIndex?"#1":"#0")),b})},mutationToDom:function(){var l=n.utils.xml.createElement("mutation");l.setAttribute("statement",!this.outputConnection);var u=this.getInput("AT").type==n.INPUT_VALUE;return l.setAttribute("at",u),l},domToMutation:function(l){var u="true"==l.getAttribute("statement");this.updateStatement_(u),l="false"!=l.getAttribute("at"),this.updateAt_(l)},updateStatement_:function(l){l!=!this.outputConnection&&(this.unplug(!0,!0),l?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(l){this.removeInput("AT"),this.removeInput("ORDINAL",!0),l?(this.appendValueInput("AT").setCheck("Number"),n.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(n.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var u=new n.FieldDropdown(this.WHERE_OPTIONS,function(h){var _="FROM_START"==h||"FROM_END"==h;if(_!=l){var b=this.getSourceBlock();return b.updateAt_(_),b.setFieldValue(h,"WHERE"),null}});this.getInput("AT").appendField(u,"WHERE"),n.Msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}},n.Blocks.lists_setIndex={init:function(){var l=[[n.Msg.LISTS_SET_INDEX_SET,"SET"],[n.Msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[n.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[n.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[n.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[n.Msg.LISTS_GET_INDEX_LAST,"LAST"],[n.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(n.Msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(n.Msg.LISTS_SET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(new n.FieldDropdown(l),"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(n.Msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(n.Msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0);var u=this;this.setTooltip(function(){var h=u.getFieldValue("MODE"),_=u.getFieldValue("WHERE"),b="";switch(h+" "+_){case"SET FROM_START":case"SET FROM_END":b=n.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":b=n.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":b=n.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":b=n.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":b=n.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":b=n.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":b=n.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":b=n.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return("FROM_START"==_||"FROM_END"==_)&&(b+="  "+n.Msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",u.workspace.options.oneBasedIndex?"#1":"#0")),b})},mutationToDom:function(){var l=n.utils.xml.createElement("mutation"),u=this.getInput("AT").type==n.INPUT_VALUE;return l.setAttribute("at",u),l},domToMutation:function(l){l="false"!=l.getAttribute("at"),this.updateAt_(l)},updateAt_:function(l){this.removeInput("AT"),this.removeInput("ORDINAL",!0),l?(this.appendValueInput("AT").setCheck("Number"),n.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(n.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var u=new n.FieldDropdown(this.WHERE_OPTIONS,function(h){var _="FROM_START"==h||"FROM_END"==h;if(_!=l){var b=this.getSourceBlock();return b.updateAt_(_),b.setFieldValue(h,"WHERE"),null}});this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO"),this.getInput("AT").appendField(u,"WHERE")}},n.Blocks.lists_getSublist={init:function(){this.WHERE_OPTIONS_1=[[n.Msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[n.Msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[n.Msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[n.Msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[n.Msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[n.Msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(n.Msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(n.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),n.Msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(n.Msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(n.Msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){var l=n.utils.xml.createElement("mutation"),u=this.getInput("AT1").type==n.INPUT_VALUE;return l.setAttribute("at1",u),u=this.getInput("AT2").type==n.INPUT_VALUE,l.setAttribute("at2",u),l},domToMutation:function(l){var u="true"==l.getAttribute("at1");l="true"==l.getAttribute("at2"),this.updateAt_(1,u),this.updateAt_(2,l)},updateAt_:function(l,u){this.removeInput("AT"+l),this.removeInput("ORDINAL"+l,!0),u?(this.appendValueInput("AT"+l).setCheck("Number"),n.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+l).appendField(n.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+l);var h=new n.FieldDropdown(this["WHERE_OPTIONS_"+l],function(_){var b="FROM_START"==_||"FROM_END"==_;if(b!=u){var R=this.getSourceBlock();return R.updateAt_(l,b),R.setFieldValue(_,"WHERE"+l),null}});this.getInput("AT"+l).appendField(h,"WHERE"+l),1==l&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2")),n.Msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}},n.Blocks.lists_sort={init:function(){this.jsonInit({message0:n.Msg.LISTS_SORT_TITLE,args0:[{type:"field_dropdown",name:"TYPE",options:[[n.Msg.LISTS_SORT_TYPE_NUMERIC,"NUMERIC"],[n.Msg.LISTS_SORT_TYPE_TEXT,"TEXT"],[n.Msg.LISTS_SORT_TYPE_IGNORECASE,"IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[[n.Msg.LISTS_SORT_ORDER_ASCENDING,"1"],[n.Msg.LISTS_SORT_ORDER_DESCENDING,"-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:n.Msg.LISTS_SORT_TOOLTIP,helpUrl:n.Msg.LISTS_SORT_HELPURL})}},n.Blocks.lists_split={init:function(){var l=this,u=new n.FieldDropdown([[n.Msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[n.Msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]],function(h){l.updateType_(h)});this.setHelpUrl(n.Msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(u,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(n.Msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(function(){var h=l.getFieldValue("MODE");if("SPLIT"==h)return n.Msg.LISTS_SPLIT_TOOLTIP_SPLIT;if("JOIN"==h)return n.Msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+h)})},updateType_:function(l){if(this.getFieldValue("MODE")!=l){var u=this.getInput("INPUT").connection;u.setShadowDom(null);var h=u.targetBlock();h&&(u.disconnect(),h.isShadow()?h.dispose():this.bumpNeighbours())}"SPLIT"==l?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){var l=n.utils.xml.createElement("mutation");return l.setAttribute("mode",this.getFieldValue("MODE")),l},domToMutation:function(l){this.updateType_(l.getAttribute("mode"))}},n.Blocks.logic={},n.Constants.Logic={},n.Constants.Logic.HUE=210,n.defineBlocksWithJsonArray([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["\u2260","NEQ"],["\u200f<","LT"],["\u200f\u2264","LTE"],["\u200f>","GT"],["\u200f\u2265","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]}]),n.defineBlocksWithJsonArray([{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]),n.Constants.Logic.TOOLTIPS_BY_OP={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"},n.Extensions.register("logic_op_tooltip",n.Extensions.buildTooltipForDropdown("OP",n.Constants.Logic.TOOLTIPS_BY_OP)),n.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN={elseifCount_:0,elseCount_:0,suppressPrefixSuffix:!0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;var l=n.utils.xml.createElement("mutation");return this.elseifCount_&&l.setAttribute("elseif",this.elseifCount_),this.elseCount_&&l.setAttribute("else",1),l},domToMutation:function(l){this.elseifCount_=parseInt(l.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(l.getAttribute("else"),10)||0,this.rebuildShape_()},decompose:function(l){var u=l.newBlock("controls_if_if");u.initSvg();for(var h=u.nextConnection,_=1;_<=this.elseifCount_;_++){var b=l.newBlock("controls_if_elseif");b.initSvg(),h.connect(b.previousConnection),h=b.nextConnection}return this.elseCount_&&((l=l.newBlock("controls_if_else")).initSvg(),h.connect(l.previousConnection)),u},compose:function(l){l=l.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;for(var u=[null],h=[null],_=null;l&&!l.isInsertionMarker();){switch(l.type){case"controls_if_elseif":this.elseifCount_++,u.push(l.valueConnection_),h.push(l.statementConnection_);break;case"controls_if_else":this.elseCount_++,_=l.statementConnection_;break;default:throw TypeError("Unknown block type: "+l.type)}l=l.nextConnection&&l.nextConnection.targetBlock()}this.updateShape_(),this.reconnectChildBlocks_(u,h,_)},saveConnections:function(l){l=l.nextConnection.targetBlock();for(var u=1;l;){switch(l.type){case"controls_if_elseif":var h=this.getInput("IF"+u),_=this.getInput("DO"+u);l.valueConnection_=h&&h.connection.targetConnection,l.statementConnection_=_&&_.connection.targetConnection,u++;break;case"controls_if_else":_=this.getInput("ELSE"),l.statementConnection_=_&&_.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+l.type)}l=l.nextConnection&&l.nextConnection.targetBlock()}},rebuildShape_:function(){var l=[null],u=[null],h=null;this.getInput("ELSE")&&(h=this.getInput("ELSE").connection.targetConnection);for(var _=1;this.getInput("IF"+_);){var b=this.getInput("IF"+_),R=this.getInput("DO"+_);l.push(b.connection.targetConnection),u.push(R.connection.targetConnection),_++}this.updateShape_(),this.reconnectChildBlocks_(l,u,h)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var l=1;this.getInput("IF"+l);)this.removeInput("IF"+l),this.removeInput("DO"+l),l++;for(l=1;l<=this.elseifCount_;l++)this.appendValueInput("IF"+l).setCheck("Boolean").appendField(n.Msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+l).appendField(n.Msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(n.Msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(l,u,h){for(var _=1;_<=this.elseifCount_;_++)n.Mutator.reconnect(l[_],this,"IF"+_),n.Mutator.reconnect(u[_],this,"DO"+_);n.Mutator.reconnect(h,this,"ELSE")}},n.Extensions.registerMutator("controls_if_mutator",n.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN,null,["controls_if_elseif","controls_if_else"]),n.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION=function(){this.setTooltip(function(){return this.elseifCount_||this.elseCount_?!this.elseifCount_&&this.elseCount_?n.Msg.CONTROLS_IF_TOOLTIP_2:this.elseifCount_&&!this.elseCount_?n.Msg.CONTROLS_IF_TOOLTIP_3:this.elseifCount_&&this.elseCount_?n.Msg.CONTROLS_IF_TOOLTIP_4:"":n.Msg.CONTROLS_IF_TOOLTIP_1}.bind(this))},n.Extensions.register("controls_if_tooltip",n.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION),n.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN={onchange:function(l){this.prevBlocks_||(this.prevBlocks_=[null,null]);var u=this.getInputTargetBlock("A"),h=this.getInputTargetBlock("B");u&&h&&!this.workspace.connectionChecker.doTypeChecks(u.outputConnection,h.outputConnection)&&(n.Events.setGroup(l.group),(l=this.prevBlocks_[0])!==u&&(u.unplug(),!l||l.isDisposed()||l.isShadow()||this.getInput("A").connection.connect(l.outputConnection)),(u=this.prevBlocks_[1])!==h&&(h.unplug(),!u||u.isDisposed()||u.isShadow()||this.getInput("B").connection.connect(u.outputConnection)),this.bumpNeighbours(),n.Events.setGroup(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},n.Constants.Logic.LOGIC_COMPARE_EXTENSION=function(){this.mixin(n.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN)},n.Extensions.register("logic_compare",n.Constants.Logic.LOGIC_COMPARE_EXTENSION),n.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN={prevParentConnection_:null,onchange:function(l){var u=this.getInputTargetBlock("THEN"),h=this.getInputTargetBlock("ELSE"),_=this.outputConnection.targetConnection;if((u||h)&&_)for(var b=0;2>b;b++){var R=1==b?u:h;R&&!R.workspace.connectionChecker.doTypeChecks(R.outputConnection,_)&&(n.Events.setGroup(l.group),_===this.prevParentConnection_?(this.unplug(),_.getSourceBlock().bumpNeighbours()):(R.unplug(),R.bumpNeighbours()),n.Events.setGroup(!1))}this.prevParentConnection_=_}},n.Extensions.registerMixin("logic_ternary",n.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN),n.Blocks.loops={},n.Constants.Loops={},n.Constants.Loops.HUE=120,n.defineBlocksWithJsonArray([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]),n.Constants.Loops.WHILE_UNTIL_TOOLTIPS={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"},n.Extensions.register("controls_whileUntil_tooltip",n.Extensions.buildTooltipForDropdown("MODE",n.Constants.Loops.WHILE_UNTIL_TOOLTIPS)),n.Constants.Loops.BREAK_CONTINUE_TOOLTIPS={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"},n.Extensions.register("controls_flow_tooltip",n.Extensions.buildTooltipForDropdown("FLOW",n.Constants.Loops.BREAK_CONTINUE_TOOLTIPS)),n.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN={customContextMenu:function(l){if(!this.isInFlyout){var u=this.getField("VAR").getVariable(),h=u.name;if(!this.isCollapsed()&&null!=h){var _={enabled:!0};_.text=n.Msg.VARIABLES_SET_CREATE_GET.replace("%1",h),u=n.Variables.generateVariableFieldDom(u),(h=n.utils.xml.createElement("block")).setAttribute("type","variables_get"),h.appendChild(u),_.callback=n.ContextMenu.callbackFactory(this,h),l.push(_)}}}},n.Extensions.registerMixin("contextMenu_newGetVariableBlock",n.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN),n.Extensions.register("controls_for_tooltip",n.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),n.Extensions.register("controls_forEach_tooltip",n.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR")),n.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN={LOOP_TYPES:["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"],suppressPrefixSuffix:!0,getSurroundLoop:function(l){do{if(-1!=n.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.LOOP_TYPES.indexOf(l.type))return l;l=l.getSurroundParent()}while(l);return null},onchange:function(l){if(this.workspace.isDragging&&!this.workspace.isDragging()&&l.type==n.Events.BLOCK_MOVE){var u=n.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(this);if(this.setWarningText(u?null:n.Msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout){var h=n.Events.getGroup();n.Events.setGroup(l.group),this.setEnabled(u),n.Events.setGroup(h)}}}},n.Extensions.registerMixin("controls_flow_in_loop_check",n.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN),n.Blocks.math={},n.Constants.Math={},n.Constants.Math.HUE=230,n.defineBlocksWithJsonArray([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["\u03c0","PI"],["e","E"],["\u03c6","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(\xbd)","SQRT1_2"],["\u221e","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]),n.Constants.Math.TOOLTIPS_BY_OP={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"},n.Extensions.register("math_op_tooltip",n.Extensions.buildTooltipForDropdown("OP",n.Constants.Math.TOOLTIPS_BY_OP)),n.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN={mutationToDom:function(){var l=n.utils.xml.createElement("mutation"),u="DIVISIBLE_BY"==this.getFieldValue("PROPERTY");return l.setAttribute("divisor_input",u),l},domToMutation:function(l){l="true"==l.getAttribute("divisor_input"),this.updateShape_(l)},updateShape_:function(l){var u=this.getInput("DIVISOR");l?u||this.appendValueInput("DIVISOR").setCheck("Number"):u&&this.removeInput("DIVISOR")}},n.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION=function(){this.getField("PROPERTY").setValidator(function(l){l="DIVISIBLE_BY"==l,this.getSourceBlock().updateShape_(l)})},n.Extensions.registerMutator("math_is_divisibleby_mutator",n.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN,n.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION),n.Extensions.register("math_change_tooltip",n.Extensions.buildTooltipWithFieldText("%{BKY_MATH_CHANGE_TOOLTIP}","VAR")),n.Constants.Math.LIST_MODES_MUTATOR_MIXIN={updateType_:function(l){this.outputConnection.setCheck("MODE"==l?"Array":"Number")},mutationToDom:function(){var l=n.utils.xml.createElement("mutation");return l.setAttribute("op",this.getFieldValue("OP")),l},domToMutation:function(l){this.updateType_(l.getAttribute("op"))}},n.Constants.Math.LIST_MODES_MUTATOR_EXTENSION=function(){this.getField("OP").setValidator(function(l){this.updateType_(l)}.bind(this))},n.Extensions.registerMutator("math_modes_of_list_mutator",n.Constants.Math.LIST_MODES_MUTATOR_MIXIN,n.Constants.Math.LIST_MODES_MUTATOR_EXTENSION),n.Blocks.procedures={},n.Blocks.procedures_defnoreturn={init:function(){var l=n.Procedures.findLegalName("",this);(l=new n.FieldTextInput(l,n.Procedures.rename)).setSpellcheck(!1),this.appendDummyInput().appendField(n.Msg.PROCEDURES_DEFNORETURN_TITLE).appendField(l,"NAME").appendField("","PARAMS"),this.setMutator(new n.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&n.Msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(n.Msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(n.Msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(n.Msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:function(l){this.hasStatements_!==l&&(l?(this.appendStatementInput("STACK").appendField(n.Msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=l)},updateParams_:function(){var l="";this.arguments_.length&&(l=n.Msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),n.Events.disable();try{this.setFieldValue(l,"PARAMS")}finally{n.Events.enable()}},mutationToDom:function(l){var u=n.utils.xml.createElement("mutation");l&&u.setAttribute("name",this.getFieldValue("NAME"));for(var h=0;h<this.argumentVarModels_.length;h++){var _=n.utils.xml.createElement("arg"),b=this.argumentVarModels_[h];_.setAttribute("name",b.name),_.setAttribute("varid",b.getId()),l&&this.paramIds_&&_.setAttribute("paramId",this.paramIds_[h]),u.appendChild(_)}return this.hasStatements_||u.setAttribute("statements","false"),u},domToMutation:function(l){this.arguments_=[],this.argumentVarModels_=[];for(var h,u=0;h=l.childNodes[u];u++)if("arg"==h.nodeName.toLowerCase()){var _=h.getAttribute("name");h=h.getAttribute("varid")||h.getAttribute("varId"),this.arguments_.push(_),null!=(h=n.Variables.getOrCreateVariablePackage(this.workspace,h,_,""))?this.argumentVarModels_.push(h):console.log("Failed to create a variable with name "+_+", ignoring.")}this.updateParams_(),n.Procedures.mutateCallers(this),this.setStatements_("false"!==l.getAttribute("statements"))},decompose:function(l){var u=n.utils.xml.createElement("block");u.setAttribute("type","procedures_mutatorcontainer");var h=n.utils.xml.createElement("statement");h.setAttribute("name","STACK"),u.appendChild(h);for(var _=0;_<this.arguments_.length;_++){var b=n.utils.xml.createElement("block");b.setAttribute("type","procedures_mutatorarg");var R=n.utils.xml.createElement("field");R.setAttribute("name","NAME");var O=n.utils.xml.createTextNode(this.arguments_[_]);R.appendChild(O),b.appendChild(R),R=n.utils.xml.createElement("next"),b.appendChild(R),h.appendChild(b),h=R}return l=n.Xml.domToBlock(u,l),"procedures_defreturn"==this.type?l.setFieldValue(this.hasStatements_,"STATEMENTS"):l.removeInput("STATEMENT_INPUT"),n.Procedures.mutateCallers(this),l},compose:function(l){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];for(var u=l.getInputTargetBlock("STACK");u&&!u.isInsertionMarker();){var h=u.getFieldValue("NAME");this.arguments_.push(h),h=this.workspace.getVariable(h,""),this.argumentVarModels_.push(h),this.paramIds_.push(u.id),u=u.nextConnection&&u.nextConnection.targetBlock()}this.updateParams_(),n.Procedures.mutateCallers(this),null!==(l=l.getFieldValue("STATEMENTS"))&&this.hasStatements_!=(l="TRUE"==l)&&(l?(this.setStatements_(!0),n.Mutator.reconnect(this.statementConnection_,this,"STACK"),this.statementConnection_=null):(l=this.getInput("STACK").connection,(this.statementConnection_=l.targetConnection)&&((l=l.targetBlock()).unplug(),l.bumpNeighbours()),this.setStatements_(!1)))},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(l,u){var h=this.workspace.getVariableById(l);if(""==h.type){h=h.name,u=this.workspace.getVariableById(u);for(var _=!1,b=0;b<this.argumentVarModels_.length;b++)this.argumentVarModels_[b].getId()==l&&(this.arguments_[b]=u.name,this.argumentVarModels_[b]=u,_=!0);_&&(this.displayRenamedVar_(h,u.name),n.Procedures.mutateCallers(this))}},updateVarName:function(l){for(var u=l.name,h=!1,_=0;_<this.argumentVarModels_.length;_++)if(this.argumentVarModels_[_].getId()==l.getId()){var b=this.arguments_[_];this.arguments_[_]=u,h=!0}h&&(this.displayRenamedVar_(b,u),n.Procedures.mutateCallers(this))},displayRenamedVar_:function(l,u){if(this.updateParams_(),this.mutator&&this.mutator.isVisible())for(var b,h=this.mutator.workspace_.getAllBlocks(!1),_=0;b=h[_];_++)"procedures_mutatorarg"==b.type&&n.Names.equals(l,b.getFieldValue("NAME"))&&b.setFieldValue(u,"NAME")},customContextMenu:function(l){if(!this.isInFlyout){var u={enabled:!0},h=this.getFieldValue("NAME");u.text=n.Msg.PROCEDURES_CREATE_DO.replace("%1",h);var _=n.utils.xml.createElement("mutation");for(_.setAttribute("name",h),h=0;h<this.arguments_.length;h++){var b=n.utils.xml.createElement("arg");b.setAttribute("name",this.arguments_[h]),_.appendChild(b)}if((h=n.utils.xml.createElement("block")).setAttribute("type",this.callType_),h.appendChild(_),u.callback=n.ContextMenu.callbackFactory(this,h),l.push(u),!this.isCollapsed())for(h=0;h<this.argumentVarModels_.length;h++)(u={enabled:!0}).text=n.Msg.VARIABLES_SET_CREATE_GET.replace("%1",(_=this.argumentVarModels_[h]).name),_=n.Variables.generateVariableFieldDom(_),(b=n.utils.xml.createElement("block")).setAttribute("type","variables_get"),b.appendChild(_),u.callback=n.ContextMenu.callbackFactory(this,b),l.push(u)}},callType_:"procedures_callnoreturn"},n.Blocks.procedures_defreturn={init:function(){var l=n.Procedures.findLegalName("",this);(l=new n.FieldTextInput(l,n.Procedures.rename)).setSpellcheck(!1),this.appendDummyInput().appendField(n.Msg.PROCEDURES_DEFRETURN_TITLE).appendField(l,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(n.ALIGN_RIGHT).appendField(n.Msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new n.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&n.Msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(n.Msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(n.Msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(n.Msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:n.Blocks.procedures_defnoreturn.setStatements_,updateParams_:n.Blocks.procedures_defnoreturn.updateParams_,mutationToDom:n.Blocks.procedures_defnoreturn.mutationToDom,domToMutation:n.Blocks.procedures_defnoreturn.domToMutation,decompose:n.Blocks.procedures_defnoreturn.decompose,compose:n.Blocks.procedures_defnoreturn.compose,getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},getVars:n.Blocks.procedures_defnoreturn.getVars,getVarModels:n.Blocks.procedures_defnoreturn.getVarModels,renameVarById:n.Blocks.procedures_defnoreturn.renameVarById,updateVarName:n.Blocks.procedures_defnoreturn.updateVarName,displayRenamedVar_:n.Blocks.procedures_defnoreturn.displayRenamedVar_,customContextMenu:n.Blocks.procedures_defnoreturn.customContextMenu,callType_:"procedures_callreturn"},n.Blocks.procedures_mutatorcontainer={init:function(){this.appendDummyInput().appendField(n.Msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(n.Msg.PROCEDURES_ALLOW_STATEMENTS).appendField(new n.FieldCheckbox("TRUE"),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(n.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}},n.Blocks.procedures_mutatorarg={init:function(){var l=new n.FieldTextInput(n.Procedures.DEFAULT_ARG,this.validator_);l.oldShowEditorFn_=l.showEditor_,l.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(n.Msg.PROCEDURES_MUTATORARG_TITLE).appendField(l,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(n.Msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,l.onFinishEditing_=this.deleteIntermediateVars_,l.createdVariables_=[],l.onFinishEditing_("x")},validator_:function(l){var u=this.getSourceBlock(),h=n.Mutator.findParentWs(u.workspace);if(!(l=l.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,"")))return null;for(var _=(u.workspace.targetWorkspace||u.workspace).getAllBlocks(!1),b=l.toLowerCase(),R=0;R<_.length;R++)if(_[R].id!=this.getSourceBlock().id){var O=_[R].getFieldValue("NAME");if(O&&O.toLowerCase()==b)return null}return u.isInFlyout||((u=h.getVariable(l,""))&&u.name!=l&&h.renameVariableById(u.getId(),l),u||(u=h.createVariable(l,""))&&this.createdVariables_&&this.createdVariables_.push(u)),l},deleteIntermediateVars_:function(l){var u=n.Mutator.findParentWs(this.getSourceBlock().workspace);if(u)for(var h=0;h<this.createdVariables_.length;h++){var _=this.createdVariables_[h];_.name!=l&&u.deleteVariableById(_.getId())}}},n.Blocks.procedures_callnoreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(n.Msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(l,u){n.Names.equals(l,this.getProcedureCall())&&(this.setFieldValue(u,"NAME"),this.setTooltip((this.outputConnection?n.Msg.PROCEDURES_CALLRETURN_TOOLTIP:n.Msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",u)))},setProcedureParameters_:function(l,u){var h=n.Procedures.getDefinition(this.getProcedureCall(),this.workspace),_=h&&h.mutator&&h.mutator.isVisible();if(_||(this.quarkConnections_={},this.quarkIds_=null),u)if(l.join("\n")==this.arguments_.join("\n"))this.quarkIds_=u;else{if(u.length!=l.length)throw RangeError("paramNames and paramIds must be the same length.");this.setCollapsed(!1),this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]),h=this.rendered,this.rendered=!1;for(var b=0;b<this.arguments_.length;b++){var R=this.getInput("ARG"+b);R&&(this.quarkConnections_[this.quarkIds_[b]]=R=R.connection.targetConnection,_&&R&&-1==u.indexOf(this.quarkIds_[b])&&(R.disconnect(),R.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(l),this.argumentVarModels_=[],b=0;b<this.arguments_.length;b++)l=n.Variables.getOrCreateVariablePackage(this.workspace,null,this.arguments_[b],""),this.argumentVarModels_.push(l);if(this.updateShape_(),this.quarkIds_=u)for(b=0;b<this.arguments_.length;b++)(u=this.quarkIds_[b])in this.quarkConnections_&&(n.Mutator.reconnect(R=this.quarkConnections_[u],this,"ARG"+b)||delete this.quarkConnections_[u]);(this.rendered=h)&&this.render()}},updateShape_:function(){for(var l=0;l<this.arguments_.length;l++){var u=this.getField("ARGNAME"+l);if(u){n.Events.disable();try{u.setValue(this.arguments_[l])}finally{n.Events.enable()}}else u=new n.FieldLabel(this.arguments_[l]),this.appendValueInput("ARG"+l).setAlign(n.ALIGN_RIGHT).appendField(u,"ARGNAME"+l).init()}for(;this.getInput("ARG"+l);)this.removeInput("ARG"+l),l++;(l=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||(l.appendField(n.Msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),l.init()):this.getField("WITH")&&l.removeField("WITH"))},mutationToDom:function(){var l=n.utils.xml.createElement("mutation");l.setAttribute("name",this.getProcedureCall());for(var u=0;u<this.arguments_.length;u++){var h=n.utils.xml.createElement("arg");h.setAttribute("name",this.arguments_[u]),l.appendChild(h)}return l},domToMutation:function(l){var u=l.getAttribute("name");this.renameProcedure(this.getProcedureCall(),u),u=[];for(var b,h=[],_=0;b=l.childNodes[_];_++)"arg"==b.nodeName.toLowerCase()&&(u.push(b.getAttribute("name")),h.push(b.getAttribute("paramId")));this.setProcedureParameters_(u,h)},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(l){if(this.workspace&&!this.workspace.isFlyout&&l.recordUndo)if(l.type==n.Events.BLOCK_CREATE&&-1!=l.ids.indexOf(this.id)){var u=this.getProcedureCall();if(!(u=n.Procedures.getDefinition(u,this.workspace))||u.type==this.defType_&&JSON.stringify(u.getVars())==JSON.stringify(this.arguments_)||(u=null),!u){n.Events.setGroup(l.group),l=n.utils.xml.createElement("xml"),(u=n.utils.xml.createElement("block")).setAttribute("type",this.defType_);var h=this.getRelativeToSurfaceXY(),_=h.y+2*n.SNAP_RADIUS;u.setAttribute("x",h.x+n.SNAP_RADIUS*(this.RTL?-1:1)),u.setAttribute("y",_),h=this.mutationToDom(),u.appendChild(h),(h=n.utils.xml.createElement("field")).setAttribute("name","NAME"),(_=this.getProcedureCall())||(_=n.Procedures.findLegalName("",this),this.renameProcedure("",_)),h.appendChild(n.utils.xml.createTextNode(_)),u.appendChild(h),l.appendChild(u),n.Xml.domToWorkspace(l,this.workspace),n.Events.setGroup(!1)}}else l.type==n.Events.BLOCK_DELETE?(u=this.getProcedureCall(),(u=n.Procedures.getDefinition(u,this.workspace))||(n.Events.setGroup(l.group),this.dispose(!0),n.Events.setGroup(!1))):l.type==n.Events.CHANGE&&"disabled"==l.element&&(u=this.getProcedureCall(),(u=n.Procedures.getDefinition(u,this.workspace))&&u.id==l.blockId&&((u=n.Events.getGroup())&&console.log("Saw an existing group while responding to a definition change"),n.Events.setGroup(l.group),l.newValue?(this.previousEnabledState_=this.isEnabled(),this.setEnabled(!1)):this.setEnabled(this.previousEnabledState_),n.Events.setGroup(u)))},customContextMenu:function(l){if(this.workspace.isMovable()){var u={enabled:!0};u.text=n.Msg.PROCEDURES_HIGHLIGHT_DEF;var h=this.getProcedureCall(),_=this.workspace;u.callback=function(){var b=n.Procedures.getDefinition(h,_);b&&(_.centerOnBlock(b.id),b.select())},l.push(u)}},defType_:"procedures_defnoreturn"},n.Blocks.procedures_callreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(n.Msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},getProcedureCall:n.Blocks.procedures_callnoreturn.getProcedureCall,renameProcedure:n.Blocks.procedures_callnoreturn.renameProcedure,setProcedureParameters_:n.Blocks.procedures_callnoreturn.setProcedureParameters_,updateShape_:n.Blocks.procedures_callnoreturn.updateShape_,mutationToDom:n.Blocks.procedures_callnoreturn.mutationToDom,domToMutation:n.Blocks.procedures_callnoreturn.domToMutation,getVars:n.Blocks.procedures_callnoreturn.getVars,getVarModels:n.Blocks.procedures_callnoreturn.getVarModels,onchange:n.Blocks.procedures_callnoreturn.onchange,customContextMenu:n.Blocks.procedures_callnoreturn.customContextMenu,defType_:"procedures_defreturn"},n.Blocks.procedures_ifreturn={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(n.Msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(n.Msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(n.Msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(n.Msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){var l=n.utils.xml.createElement("mutation");return l.setAttribute("value",Number(this.hasReturnValue_)),l},domToMutation:function(l){this.hasReturnValue_=1==l.getAttribute("value"),this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(n.Msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(l){if(this.workspace.isDragging&&!this.workspace.isDragging()){l=!1;var u=this;do{if(-1!=this.FUNCTION_TYPES.indexOf(u.type)){l=!0;break}u=u.getSurroundParent()}while(u);l?("procedures_defnoreturn"==u.type&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(n.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):"procedures_defreturn"!=u.type||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(n.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null),this.isInFlyout||this.setEnabled(!0)):(this.setWarningText(n.Msg.PROCEDURES_IFRETURN_WARNING),this.isInFlyout||this.getInheritedDisabled()||this.setEnabled(!1))}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]},n.Blocks.texts={},n.Constants.Text={},n.Constants.Text.HUE=160,n.defineBlocksWithJsonArray([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_multiline",message0:"%1 %2",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=",width:12,height:17,alt:"\xb6"},{type:"field_multilinetext",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),n.Blocks.text_getSubstring={init:function(){this.WHERE_OPTIONS_1=[[n.Msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[n.Msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[n.Msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[n.Msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[n.Msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[n.Msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(n.Msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(n.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),n.Msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(n.Msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(n.Msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){var l=n.utils.xml.createElement("mutation"),u=this.getInput("AT1").type==n.INPUT_VALUE;return l.setAttribute("at1",u),u=this.getInput("AT2").type==n.INPUT_VALUE,l.setAttribute("at2",u),l},domToMutation:function(l){var u="true"==l.getAttribute("at1");l="true"==l.getAttribute("at2"),this.updateAt_(1,u),this.updateAt_(2,l)},updateAt_:function(l,u){this.removeInput("AT"+l),this.removeInput("ORDINAL"+l,!0),u?(this.appendValueInput("AT"+l).setCheck("Number"),n.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+l).appendField(n.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+l),2==l&&n.Msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(n.Msg.TEXT_GET_SUBSTRING_TAIL));var h=new n.FieldDropdown(this["WHERE_OPTIONS_"+l],function(_){var b="FROM_START"==_||"FROM_END"==_;if(b!=u){var R=this.getSourceBlock();return R.updateAt_(l,b),R.setFieldValue(_,"WHERE"+l),null}});this.getInput("AT"+l).appendField(h,"WHERE"+l),1==l&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"))}},n.Blocks.text_changeCase={init:function(){var l=[[n.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[n.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[n.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(n.Msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new n.FieldDropdown(l),"CASE"),this.setOutput(!0,"String"),this.setTooltip(n.Msg.TEXT_CHANGECASE_TOOLTIP)}},n.Blocks.text_trim={init:function(){var l=[[n.Msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[n.Msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[n.Msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(n.Msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new n.FieldDropdown(l),"MODE"),this.setOutput(!0,"String"),this.setTooltip(n.Msg.TEXT_TRIM_TOOLTIP)}},n.Blocks.text_print={init:function(){this.jsonInit({message0:n.Msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:n.Msg.TEXT_PRINT_TOOLTIP,helpUrl:n.Msg.TEXT_PRINT_HELPURL})}},n.Blocks.text_prompt_ext={init:function(){var l=[[n.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[n.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(n.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks");var u=this;l=new n.FieldDropdown(l,function(h){u.updateType_(h)}),this.appendValueInput("TEXT").appendField(l,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(function(){return"TEXT"==u.getFieldValue("TYPE")?n.Msg.TEXT_PROMPT_TOOLTIP_TEXT:n.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},updateType_:function(l){this.outputConnection.setCheck("NUMBER"==l?"Number":"String")},mutationToDom:function(){var l=n.utils.xml.createElement("mutation");return l.setAttribute("type",this.getFieldValue("TYPE")),l},domToMutation:function(l){this.updateType_(l.getAttribute("type"))}},n.Blocks.text_prompt={init:function(){this.mixin(n.Constants.Text.QUOTE_IMAGE_MIXIN);var l=[[n.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[n.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]],u=this;this.setHelpUrl(n.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),l=new n.FieldDropdown(l,function(h){u.updateType_(h)}),this.appendDummyInput().appendField(l,"TYPE").appendField(this.newQuote_(!0)).appendField(new n.FieldTextInput(""),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(function(){return"TEXT"==u.getFieldValue("TYPE")?n.Msg.TEXT_PROMPT_TOOLTIP_TEXT:n.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},updateType_:n.Blocks.text_prompt_ext.updateType_,mutationToDom:n.Blocks.text_prompt_ext.mutationToDom,domToMutation:n.Blocks.text_prompt_ext.domToMutation},n.Blocks.text_count={init:function(){this.jsonInit({message0:n.Msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:n.Msg.TEXT_COUNT_TOOLTIP,helpUrl:n.Msg.TEXT_COUNT_HELPURL})}},n.Blocks.text_replace={init:function(){this.jsonInit({message0:n.Msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:n.Msg.TEXT_REPLACE_TOOLTIP,helpUrl:n.Msg.TEXT_REPLACE_HELPURL})}},n.Blocks.text_reverse={init:function(){this.jsonInit({message0:n.Msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:n.Msg.TEXT_REVERSE_TOOLTIP,helpUrl:n.Msg.TEXT_REVERSE_HELPURL})}},n.Constants.Text.QUOTE_IMAGE_MIXIN={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(l){for(var h,u=0;h=this.inputList[u];u++)for(var b,_=0;b=h.fieldRow[_];_++)if(l==b.name)return h.insertFieldAt(_,this.newQuote_(!0)),void h.insertFieldAt(_+2,this.newQuote_(!1));console.warn('field named "'+l+'" not found in '+this.toDevString())},newQuote_:function(l){return new n.FieldImage((l=this.RTL?!l:l)?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,this.QUOTE_IMAGE_WIDTH,this.QUOTE_IMAGE_HEIGHT,l?"\u201c":"\u201d")}},n.Constants.Text.TEXT_QUOTES_EXTENSION=function(){this.mixin(n.Constants.Text.QUOTE_IMAGE_MIXIN),this.quoteField_("TEXT")},n.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN={mutationToDom:function(){var l=n.utils.xml.createElement("mutation");return l.setAttribute("items",this.itemCount_),l},domToMutation:function(l){this.itemCount_=parseInt(l.getAttribute("items"),10),this.updateShape_()},decompose:function(l){var u=l.newBlock("text_create_join_container");u.initSvg();for(var h=u.getInput("STACK").connection,_=0;_<this.itemCount_;_++){var b=l.newBlock("text_create_join_item");b.initSvg(),h.connect(b.previousConnection),h=b.nextConnection}return u},compose:function(l){var u=l.getInputTargetBlock("STACK");for(l=[];u&&!u.isInsertionMarker();)l.push(u.valueConnection_),u=u.nextConnection&&u.nextConnection.targetBlock();for(u=0;u<this.itemCount_;u++){var h=this.getInput("ADD"+u).connection.targetConnection;h&&-1==l.indexOf(h)&&h.disconnect()}for(this.itemCount_=l.length,this.updateShape_(),u=0;u<this.itemCount_;u++)n.Mutator.reconnect(l[u],this,"ADD"+u)},saveConnections:function(l){l=l.getInputTargetBlock("STACK");for(var u=0;l;){var h=this.getInput("ADD"+u);l.valueConnection_=h&&h.connection.targetConnection,u++,l=l.nextConnection&&l.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var l=0;l<this.itemCount_;l++)if(!this.getInput("ADD"+l)){var u=this.appendValueInput("ADD"+l).setAlign(n.ALIGN_RIGHT);0==l&&u.appendField(n.Msg.TEXT_JOIN_TITLE_CREATEWITH)}for(;this.getInput("ADD"+l);)this.removeInput("ADD"+l),l++}},n.Constants.Text.TEXT_JOIN_EXTENSION=function(){this.mixin(n.Constants.Text.QUOTE_IMAGE_MIXIN),this.itemCount_=2,this.updateShape_(),this.setMutator(new n.Mutator(["text_create_join_item"]))},n.Extensions.register("text_append_tooltip",n.Extensions.buildTooltipWithFieldText("%{BKY_TEXT_APPEND_TOOLTIP}","VAR")),n.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION=function(){var l=this;this.setTooltip(function(){return n.Msg.TEXT_INDEXOF_TOOLTIP.replace("%1",l.workspace.options.oneBasedIndex?"0":"-1")})},n.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN={mutationToDom:function(){var l=n.utils.xml.createElement("mutation");return l.setAttribute("at",!!this.isAt_),l},domToMutation:function(l){l="false"!=l.getAttribute("at"),this.updateAt_(l)},updateAt_:function(l){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),l&&(this.appendValueInput("AT").setCheck("Number"),n.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(n.Msg.ORDINAL_NUMBER_SUFFIX)),n.Msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(n.Msg.TEXT_CHARAT_TAIL)),this.isAt_=l}},n.Constants.Text.TEXT_CHARAT_EXTENSION=function(){this.getField("WHERE").setValidator(function(u){(u="FROM_START"==u||"FROM_END"==u)!=this.isAt_&&this.getSourceBlock().updateAt_(u)}),this.updateAt_(!0);var l=this;this.setTooltip(function(){var u=l.getFieldValue("WHERE"),h=n.Msg.TEXT_CHARAT_TOOLTIP;return("FROM_START"==u||"FROM_END"==u)&&(u="FROM_START"==u?n.Msg.LISTS_INDEX_FROM_START_TOOLTIP:n.Msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(h+="  "+u.replace("%1",l.workspace.options.oneBasedIndex?"#1":"#0")),h})},n.Extensions.register("text_indexOf_tooltip",n.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION),n.Extensions.register("text_quotes",n.Constants.Text.TEXT_QUOTES_EXTENSION),n.Extensions.registerMutator("text_join_mutator",n.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN,n.Constants.Text.TEXT_JOIN_EXTENSION),n.Extensions.registerMutator("text_charAt_mutator",n.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN,n.Constants.Text.TEXT_CHARAT_EXTENSION),n.Blocks.variables={},n.Constants.Variables={},n.Constants.Variables.HUE=330,n.defineBlocksWithJsonArray([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]),n.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(l){if(this.isInFlyout)("variables_get"==this.type||"variables_get_reporter"==this.type)&&(u={text:n.Msg.RENAME_VARIABLE,enabled:!0,callback:n.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},b=this.getField("VAR").getText(),_={text:n.Msg.DELETE_VARIABLE.replace("%1",b),enabled:!0,callback:n.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},l.unshift(u),l.unshift(_));else{if("variables_get"==this.type)var u="variables_set",h=n.Msg.VARIABLES_GET_CREATE_SET;else u="variables_get",h=n.Msg.VARIABLES_SET_CREATE_GET;var _={enabled:0<this.workspace.remainingCapacity()},b=this.getField("VAR").getText();_.text=h.replace("%1",b),(h=n.utils.xml.createElement("field")).setAttribute("name","VAR"),h.appendChild(n.utils.xml.createTextNode(b)),(b=n.utils.xml.createElement("block")).setAttribute("type",u),b.appendChild(h),_.callback=n.ContextMenu.callbackFactory(this,b),l.push(_)}}},n.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY=function(l){return function(){var u=l.workspace,h=l.getField("VAR").getVariable();n.Variables.renameVariable(u,h)}},n.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY=function(l){return function(){var u=l.workspace,h=l.getField("VAR").getVariable();u.deleteVariableById(h.getId()),u.refreshToolboxSelection()}},n.Extensions.registerMixin("contextMenu_variableSetterGetter",n.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),n.Constants.VariablesDynamic={},n.Constants.VariablesDynamic.HUE=310,n.defineBlocksWithJsonArray([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]),n.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(l){if(this.isInFlyout)("variables_get_dynamic"==this.type||"variables_get_reporter_dynamic"==this.type)&&(u={text:n.Msg.RENAME_VARIABLE,enabled:!0,callback:n.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},R=this.getField("VAR").getText(),b={text:n.Msg.DELETE_VARIABLE.replace("%1",R),enabled:!0,callback:n.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},l.unshift(u),l.unshift(b));else{var u=this.getFieldValue("VAR"),h=this.workspace.getVariableById(u).type;if("variables_get_dynamic"==this.type){u="variables_set_dynamic";var _=n.Msg.VARIABLES_GET_CREATE_SET}else u="variables_get_dynamic",_=n.Msg.VARIABLES_SET_CREATE_GET;var b={enabled:0<this.workspace.remainingCapacity()},R=this.getField("VAR").getText();b.text=_.replace("%1",R),(_=n.utils.xml.createElement("field")).setAttribute("name","VAR"),_.setAttribute("variabletype",h),_.appendChild(n.utils.xml.createTextNode(R)),(R=n.utils.xml.createElement("block")).setAttribute("type",u),R.appendChild(_),b.callback=n.ContextMenu.callbackFactory(this,R),l.push(b)}},onchange:function(l){l=this.getFieldValue("VAR"),l=n.Variables.getVariable(this.workspace,l),"variables_get_dynamic"==this.type?this.outputConnection.setCheck(l.type):this.getInput("VALUE").connection.setCheck(l.type)}},n.Constants.VariablesDynamic.RENAME_OPTION_CALLBACK_FACTORY=function(l){return function(){var u=l.workspace,h=l.getField("VAR").getVariable();n.Variables.renameVariable(u,h)}},n.Constants.VariablesDynamic.DELETE_OPTION_CALLBACK_FACTORY=function(l){return function(){var u=l.workspace,h=l.getField("VAR").getVariable();u.deleteVariableById(h.getId()),u.refreshToolboxSelection()}},n.Extensions.registerMixin("contextMenu_variableDynamicSetterGetter",n.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),n.Blocks}.apply(I,S))&&(T.exports=s)},55490:function(T,I,m){var S,s;S=[m(82215),m(79841),m(20813),m(75610)],void 0!==(s=function(n,l,u,h){"use strict";return n.setLocale(l),n.Blocks=n.Blocks||{},Object.keys(u).forEach(function(_){n.Blocks[_]=u[_]}),n.JavaScript=h,n}.apply(I,S))&&(T.exports=s)},82215:function(T,I,m){var S,s;S=[m(76588)],void 0!==(s=function(n){"use strict";return n.setLocale=function(l){n.Msg=n.Msg||{},Object.keys(l).forEach(function(u){n.Msg[u]=l[u]})},n}.apply(I,S))&&(T.exports=s)},5389:function(T,I,m){var S,s;S=[m(55490)],void 0!==(s=function(n){"use strict";return n}.apply(I,S))&&(T.exports=s)},75610:function(T,I,m){var S,s;S=[m(82215),m(52657)],void 0!==(s=function(n,l){"use strict";return n.JavaScript=l,l}.apply(I,S))&&(T.exports=s)},52657:function(T,I,m){var S,s;S=[m(96761)],void 0!==(s=function(n){"use strict";return n.JavaScript=new n.Generator("JavaScript"),n.JavaScript.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(n.utils.global).join(",")),n.JavaScript.ORDER_ATOMIC=0,n.JavaScript.ORDER_NEW=1.1,n.JavaScript.ORDER_MEMBER=1.2,n.JavaScript.ORDER_FUNCTION_CALL=2,n.JavaScript.ORDER_INCREMENT=3,n.JavaScript.ORDER_DECREMENT=3,n.JavaScript.ORDER_BITWISE_NOT=4.1,n.JavaScript.ORDER_UNARY_PLUS=4.2,n.JavaScript.ORDER_UNARY_NEGATION=4.3,n.JavaScript.ORDER_LOGICAL_NOT=4.4,n.JavaScript.ORDER_TYPEOF=4.5,n.JavaScript.ORDER_VOID=4.6,n.JavaScript.ORDER_DELETE=4.7,n.JavaScript.ORDER_AWAIT=4.8,n.JavaScript.ORDER_EXPONENTIATION=5,n.JavaScript.ORDER_MULTIPLICATION=5.1,n.JavaScript.ORDER_DIVISION=5.2,n.JavaScript.ORDER_MODULUS=5.3,n.JavaScript.ORDER_SUBTRACTION=6.1,n.JavaScript.ORDER_ADDITION=6.2,n.JavaScript.ORDER_BITWISE_SHIFT=7,n.JavaScript.ORDER_RELATIONAL=8,n.JavaScript.ORDER_IN=8,n.JavaScript.ORDER_INSTANCEOF=8,n.JavaScript.ORDER_EQUALITY=9,n.JavaScript.ORDER_BITWISE_AND=10,n.JavaScript.ORDER_BITWISE_XOR=11,n.JavaScript.ORDER_BITWISE_OR=12,n.JavaScript.ORDER_LOGICAL_AND=13,n.JavaScript.ORDER_LOGICAL_OR=14,n.JavaScript.ORDER_CONDITIONAL=15,n.JavaScript.ORDER_ASSIGNMENT=16,n.JavaScript.ORDER_YIELD=17,n.JavaScript.ORDER_COMMA=18,n.JavaScript.ORDER_NONE=99,n.JavaScript.ORDER_OVERRIDES=[[n.JavaScript.ORDER_FUNCTION_CALL,n.JavaScript.ORDER_MEMBER],[n.JavaScript.ORDER_FUNCTION_CALL,n.JavaScript.ORDER_FUNCTION_CALL],[n.JavaScript.ORDER_MEMBER,n.JavaScript.ORDER_MEMBER],[n.JavaScript.ORDER_MEMBER,n.JavaScript.ORDER_FUNCTION_CALL],[n.JavaScript.ORDER_LOGICAL_NOT,n.JavaScript.ORDER_LOGICAL_NOT],[n.JavaScript.ORDER_MULTIPLICATION,n.JavaScript.ORDER_MULTIPLICATION],[n.JavaScript.ORDER_ADDITION,n.JavaScript.ORDER_ADDITION],[n.JavaScript.ORDER_LOGICAL_AND,n.JavaScript.ORDER_LOGICAL_AND],[n.JavaScript.ORDER_LOGICAL_OR,n.JavaScript.ORDER_LOGICAL_OR]],n.JavaScript.isInitialized=!1,n.JavaScript.init=function(l){Object.getPrototypeOf(this).init.call(this),this.nameDB_?this.nameDB_.reset():this.nameDB_=new n.Names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(l.getVariableMap()),this.nameDB_.populateVariables(l),this.nameDB_.populateProcedures(l);for(var u=[],h=n.Variables.allDeveloperVariables(l),_=0;_<h.length;_++)u.push(this.nameDB_.getName(h[_],n.Names.DEVELOPER_VARIABLE_TYPE));for(l=n.Variables.allUsedVarModels(l),_=0;_<l.length;_++)u.push(this.nameDB_.getName(l[_].getId(),n.VARIABLE_CATEGORY_NAME));u.length&&(this.definitions_.variables="var "+u.join(", ")+";"),this.isInitialized=!0},n.JavaScript.finish=function(l){var u=n.utils.object.values(this.definitions_);return l=Object.getPrototypeOf(this).finish.call(this,l),this.isInitialized=!1,this.nameDB_.reset(),u.join("\n\n")+"\n\n\n"+l},n.JavaScript.scrubNakedValue=function(l){return l+";\n"},n.JavaScript.quote_=function(l){return"'"+(l=l.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/'/g,"\\'"))+"'"},n.JavaScript.multiline_quote_=function(l){return l.split(/\n/g).map(this.quote_).join(" + '\\n' +\n")},n.JavaScript.scrub_=function(l,u,h){var _="";if(!l.outputConnection||!l.outputConnection.targetConnection){var b=l.getCommentText();b&&(b=n.utils.string.wrap(b,this.COMMENT_WRAP-3),_+=this.prefixLines(b+"\n","// "));for(var R=0;R<l.inputList.length;R++)l.inputList[R].type==n.inputTypes.VALUE&&(b=l.inputList[R].connection.targetBlock())&&(b=this.allNestedComments(b))&&(_+=this.prefixLines(b,"// "))}return l=l.nextConnection&&l.nextConnection.targetBlock(),_+u+(h?"":this.blockToCode(l))},n.JavaScript.getAdjusted=function(l,u,h,_,b){h=h||0,b=b||this.ORDER_NONE,l.workspace.options.oneBasedIndex&&h--;var R=l.workspace.options.oneBasedIndex?"1":"0";if(l=0<h?this.valueToCode(l,u,this.ORDER_ADDITION)||R:0>h?this.valueToCode(l,u,this.ORDER_SUBTRACTION)||R:_?this.valueToCode(l,u,this.ORDER_UNARY_NEGATION)||R:this.valueToCode(l,u,b)||R,n.isNumber(l))l=Number(l)+h,_&&(l=-l);else{if(0<h){l=l+" + "+h;var O=this.ORDER_ADDITION}else 0>h&&(l=l+" - "+-h,O=this.ORDER_SUBTRACTION);_&&(l=h?"-("+l+")":"-"+l,O=this.ORDER_UNARY_NEGATION),O=Math.floor(O),b=Math.floor(b),O&&b>=O&&(l="("+l+")")}return l},n.JavaScript.colour={},n.JavaScript.colour_picker=function(l){return[n.JavaScript.quote_(l.getFieldValue("COLOUR")),n.JavaScript.ORDER_ATOMIC]},n.JavaScript.colour_random=function(l){return[n.JavaScript.provideFunction_("colourRandom",["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"() {","  var num = Math.floor(Math.random() * Math.pow(2, 24));","  return '#' + ('00000' + num.toString(16)).substr(-6);","}"])+"()",n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.colour_rgb=function(l){var u=n.JavaScript.valueToCode(l,"RED",n.JavaScript.ORDER_NONE)||0,h=n.JavaScript.valueToCode(l,"GREEN",n.JavaScript.ORDER_NONE)||0;return l=n.JavaScript.valueToCode(l,"BLUE",n.JavaScript.ORDER_NONE)||0,[n.JavaScript.provideFunction_("colourRgb",["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(r, g, b) {","  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;","  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;","  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;","  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);","  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);","  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+u+", "+h+", "+l+")",n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.colour_blend=function(l){var u=n.JavaScript.valueToCode(l,"COLOUR1",n.JavaScript.ORDER_NONE)||"'#000000'",h=n.JavaScript.valueToCode(l,"COLOUR2",n.JavaScript.ORDER_NONE)||"'#000000'";return l=n.JavaScript.valueToCode(l,"RATIO",n.JavaScript.ORDER_NONE)||.5,[n.JavaScript.provideFunction_("colourBlend",["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(c1, c2, ratio) {","  ratio = Math.max(Math.min(Number(ratio), 1), 0);","  var r1 = parseInt(c1.substring(1, 3), 16);","  var g1 = parseInt(c1.substring(3, 5), 16);","  var b1 = parseInt(c1.substring(5, 7), 16);","  var r2 = parseInt(c2.substring(1, 3), 16);","  var g2 = parseInt(c2.substring(3, 5), 16);","  var b2 = parseInt(c2.substring(5, 7), 16);","  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);","  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);","  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);","  r = ('0' + (r || 0).toString(16)).slice(-2);","  g = ('0' + (g || 0).toString(16)).slice(-2);","  b = ('0' + (b || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+u+", "+h+", "+l+")",n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.lists={},n.JavaScript.lists_create_empty=function(l){return["[]",n.JavaScript.ORDER_ATOMIC]},n.JavaScript.lists_create_with=function(l){for(var u=Array(l.itemCount_),h=0;h<l.itemCount_;h++)u[h]=n.JavaScript.valueToCode(l,"ADD"+h,n.JavaScript.ORDER_NONE)||"null";return["["+u.join(", ")+"]",n.JavaScript.ORDER_ATOMIC]},n.JavaScript.lists_repeat=function(l){return[n.JavaScript.provideFunction_("listsRepeat",["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(value, n) {","  var array = [];","  for (var i = 0; i < n; i++) {","    array[i] = value;","  }","  return array;","}"])+"("+(n.JavaScript.valueToCode(l,"ITEM",n.JavaScript.ORDER_NONE)||"null")+", "+(l=n.JavaScript.valueToCode(l,"NUM",n.JavaScript.ORDER_NONE)||"0")+")",n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.lists_length=function(l){return[(n.JavaScript.valueToCode(l,"VALUE",n.JavaScript.ORDER_MEMBER)||"[]")+".length",n.JavaScript.ORDER_MEMBER]},n.JavaScript.lists_isEmpty=function(l){return["!"+(n.JavaScript.valueToCode(l,"VALUE",n.JavaScript.ORDER_MEMBER)||"[]")+".length",n.JavaScript.ORDER_LOGICAL_NOT]},n.JavaScript.lists_indexOf=function(l){var u="FIRST"==l.getFieldValue("END")?"indexOf":"lastIndexOf",h=n.JavaScript.valueToCode(l,"FIND",n.JavaScript.ORDER_NONE)||"''";return u=(n.JavaScript.valueToCode(l,"VALUE",n.JavaScript.ORDER_MEMBER)||"[]")+"."+u+"("+h+")",l.workspace.options.oneBasedIndex?[u+" + 1",n.JavaScript.ORDER_ADDITION]:[u,n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.lists_getIndex=function(l){var u=l.getFieldValue("MODE")||"GET",h=l.getFieldValue("WHERE")||"FROM_START",_=n.JavaScript.valueToCode(l,"VALUE","RANDOM"==h?n.JavaScript.ORDER_NONE:n.JavaScript.ORDER_MEMBER)||"[]";switch(h){case"FIRST":if("GET"==u)return[_+"[0]",n.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==u)return[_+".shift()",n.JavaScript.ORDER_MEMBER];if("REMOVE"==u)return _+".shift();\n";break;case"LAST":if("GET"==u)return[_+".slice(-1)[0]",n.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==u)return[_+".pop()",n.JavaScript.ORDER_MEMBER];if("REMOVE"==u)return _+".pop();\n";break;case"FROM_START":if(l=n.JavaScript.getAdjusted(l,"AT"),"GET"==u)return[_+"["+l+"]",n.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==u)return[_+".splice("+l+", 1)[0]",n.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==u)return _+".splice("+l+", 1);\n";break;case"FROM_END":if(l=n.JavaScript.getAdjusted(l,"AT",1,!0),"GET"==u)return[_+".slice("+l+")[0]",n.JavaScript.ORDER_FUNCTION_CALL];if("GET_REMOVE"==u)return[_+".splice("+l+", 1)[0]",n.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==u)return _+".splice("+l+", 1);";break;case"RANDOM":if(_=n.JavaScript.provideFunction_("listsGetRandomItem",["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list, remove) {","  var x = Math.floor(Math.random() * list.length);","  if (remove) {","    return list.splice(x, 1)[0];","  } else {","    return list[x];","  }","}"])+"("+_+", "+("GET"!=u)+")","GET"==u||"GET_REMOVE"==u)return[_,n.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==u)return _+";\n"}throw Error("Unhandled combination (lists_getIndex).")},n.JavaScript.lists_setIndex=function(l){function u(){if(h.match(/^\w+$/))return"";var O=n.JavaScript.nameDB_.getDistinctName("tmpList",n.VARIABLE_CATEGORY_NAME),H="var "+O+" = "+h+";\n";return h=O,H}var h=n.JavaScript.valueToCode(l,"LIST",n.JavaScript.ORDER_MEMBER)||"[]",_=l.getFieldValue("MODE")||"GET",b=l.getFieldValue("WHERE")||"FROM_START",R=n.JavaScript.valueToCode(l,"TO",n.JavaScript.ORDER_ASSIGNMENT)||"null";switch(b){case"FIRST":if("SET"==_)return h+"[0] = "+R+";\n";if("INSERT"==_)return h+".unshift("+R+");\n";break;case"LAST":if("SET"==_)return(l=u())+(h+"[")+h+".length - 1] = "+R+";\n";if("INSERT"==_)return h+".push("+R+");\n";break;case"FROM_START":if(b=n.JavaScript.getAdjusted(l,"AT"),"SET"==_)return h+"["+b+"] = "+R+";\n";if("INSERT"==_)return h+".splice("+b+", 0, "+R+");\n";break;case"FROM_END":if(b=n.JavaScript.getAdjusted(l,"AT",1,!1,n.JavaScript.ORDER_SUBTRACTION),l=u(),"SET"==_)return l+(h+"[")+h+".length - "+b+"] = "+R+";\n";if("INSERT"==_)return l+(h+".splice(")+h+".length - "+b+", 0, "+R+");\n";break;case"RANDOM":if(l=u(),l+="var "+(b=n.JavaScript.nameDB_.getDistinctName("tmpX",n.VARIABLE_CATEGORY_NAME))+" = Math.floor(Math.random() * "+h+".length);\n","SET"==_)return l+(h+"[")+b+"] = "+R+";\n";if("INSERT"==_)return l+(h+".splice(")+b+", 0, "+R+");\n"}throw Error("Unhandled combination (lists_setIndex).")},n.JavaScript.lists.getIndex_=function(l,u,h){return"FIRST"==u?"0":"FROM_END"==u?l+".length - 1 - "+h:"LAST"==u?l+".length - 1":h},n.JavaScript.lists_getSublist=function(l){var u=n.JavaScript.valueToCode(l,"LIST",n.JavaScript.ORDER_MEMBER)||"[]",h=l.getFieldValue("WHERE1"),_=l.getFieldValue("WHERE2");if("FIRST"==h&&"LAST"==_)u+=".slice(0)";else if(u.match(/^\w+$/)||"FROM_END"!=h&&"FROM_START"==_){switch(h){case"FROM_START":var b=n.JavaScript.getAdjusted(l,"AT1");break;case"FROM_END":b=u+".length - "+(b=n.JavaScript.getAdjusted(l,"AT1",1,!1,n.JavaScript.ORDER_SUBTRACTION));break;case"FIRST":b="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(_){case"FROM_START":l=n.JavaScript.getAdjusted(l,"AT2",1);break;case"FROM_END":l=u+".length - "+(l=n.JavaScript.getAdjusted(l,"AT2",0,!1,n.JavaScript.ORDER_SUBTRACTION));break;case"LAST":l=u+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}u=u+".slice("+b+", "+l+")"}else{b=n.JavaScript.getAdjusted(l,"AT1"),l=n.JavaScript.getAdjusted(l,"AT2");var R=n.JavaScript.lists.getIndex_,O={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};u=n.JavaScript.provideFunction_("subsequence"+O[h]+O[_],["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+("FROM_END"==h||"FROM_START"==h?", at1":"")+("FROM_END"==_||"FROM_START"==_?", at2":"")+") {","  var start = "+R("sequence",h,"at1")+";","  var end = "+R("sequence",_,"at2")+" + 1;","  return sequence.slice(start, end);","}"])+"("+u+("FROM_END"==h||"FROM_START"==h?", "+b:"")+("FROM_END"==_||"FROM_START"==_?", "+l:"")+")"}return[u,n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.lists_sort=function(l){var u=n.JavaScript.valueToCode(l,"LIST",n.JavaScript.ORDER_FUNCTION_CALL)||"[]",h="1"===l.getFieldValue("DIRECTION")?1:-1;return l=l.getFieldValue("TYPE"),[u+".slice().sort("+n.JavaScript.provideFunction_("listsGetSortCompare",["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(type, direction) {","  var compareFuncs = {",'    "NUMERIC": function(a, b) {',"        return Number(a) - Number(b); },",'    "TEXT": function(a, b) {',"        return a.toString() > b.toString() ? 1 : -1; },",'    "IGNORE_CASE": function(a, b) {',"        return a.toString().toLowerCase() > b.toString().toLowerCase() ? 1 : -1; },","  };","  var compare = compareFuncs[type];","  return function(a, b) { return compare(a, b) * direction; }","}"])+'("'+l+'", '+h+"))",n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.lists_split=function(l){var u=n.JavaScript.valueToCode(l,"INPUT",n.JavaScript.ORDER_MEMBER),h=n.JavaScript.valueToCode(l,"DELIM",n.JavaScript.ORDER_NONE)||"''";if("SPLIT"==(l=l.getFieldValue("MODE")))u||(u="''"),l="split";else{if("JOIN"!=l)throw Error("Unknown mode: "+l);u||(u="[]"),l="join"}return[u+"."+l+"("+h+")",n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.lists_reverse=function(l){return[(n.JavaScript.valueToCode(l,"LIST",n.JavaScript.ORDER_FUNCTION_CALL)||"[]")+".slice().reverse()",n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.logic={},n.JavaScript.controls_if=function(l){var u=0,h="";n.JavaScript.STATEMENT_PREFIX&&(h+=n.JavaScript.injectId(n.JavaScript.STATEMENT_PREFIX,l));do{var _=n.JavaScript.valueToCode(l,"IF"+u,n.JavaScript.ORDER_NONE)||"false",b=n.JavaScript.statementToCode(l,"DO"+u);n.JavaScript.STATEMENT_SUFFIX&&(b=n.JavaScript.prefixLines(n.JavaScript.injectId(n.JavaScript.STATEMENT_SUFFIX,l),n.JavaScript.INDENT)+b),h+=(0<u?" else ":"")+"if ("+_+") {\n"+b+"}",++u}while(l.getInput("IF"+u));return(l.getInput("ELSE")||n.JavaScript.STATEMENT_SUFFIX)&&(b=n.JavaScript.statementToCode(l,"ELSE"),n.JavaScript.STATEMENT_SUFFIX&&(b=n.JavaScript.prefixLines(n.JavaScript.injectId(n.JavaScript.STATEMENT_SUFFIX,l),n.JavaScript.INDENT)+b),h+=" else {\n"+b+"}"),h+"\n"},n.JavaScript.controls_ifelse=n.JavaScript.controls_if,n.JavaScript.logic_compare=function(l){var u={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[l.getFieldValue("OP")],h="=="==u||"!="==u?n.JavaScript.ORDER_EQUALITY:n.JavaScript.ORDER_RELATIONAL;return[(n.JavaScript.valueToCode(l,"A",h)||"0")+" "+u+" "+(l=n.JavaScript.valueToCode(l,"B",h)||"0"),h]},n.JavaScript.logic_operation=function(l){var u="AND"==l.getFieldValue("OP")?"&&":"||",h="&&"==u?n.JavaScript.ORDER_LOGICAL_AND:n.JavaScript.ORDER_LOGICAL_OR,_=n.JavaScript.valueToCode(l,"A",h);if(l=n.JavaScript.valueToCode(l,"B",h),_||l){var b="&&"==u?"true":"false";_||(_=b),l||(l=b)}else l=_="false";return[_+" "+u+" "+l,h]},n.JavaScript.logic_negate=function(l){var u=n.JavaScript.ORDER_LOGICAL_NOT;return["!"+(n.JavaScript.valueToCode(l,"BOOL",u)||"true"),u]},n.JavaScript.logic_boolean=function(l){return["TRUE"==l.getFieldValue("BOOL")?"true":"false",n.JavaScript.ORDER_ATOMIC]},n.JavaScript.logic_null=function(l){return["null",n.JavaScript.ORDER_ATOMIC]},n.JavaScript.logic_ternary=function(l){return[(n.JavaScript.valueToCode(l,"IF",n.JavaScript.ORDER_CONDITIONAL)||"false")+" ? "+(n.JavaScript.valueToCode(l,"THEN",n.JavaScript.ORDER_CONDITIONAL)||"null")+" : "+(l=n.JavaScript.valueToCode(l,"ELSE",n.JavaScript.ORDER_CONDITIONAL)||"null"),n.JavaScript.ORDER_CONDITIONAL]},n.JavaScript.loops={},n.JavaScript.controls_repeat_ext=function(l){var u=l.getField("TIMES")?String(Number(l.getFieldValue("TIMES"))):n.JavaScript.valueToCode(l,"TIMES",n.JavaScript.ORDER_ASSIGNMENT)||"0",h=n.JavaScript.statementToCode(l,"DO");h=n.JavaScript.addLoopTrap(h,l),l="";var _=n.JavaScript.nameDB_.getDistinctName("count",n.VARIABLE_CATEGORY_NAME),b=u;return u.match(/^\w+$/)||n.isNumber(u)||(l+="var "+(b=n.JavaScript.nameDB_.getDistinctName("repeat_end",n.VARIABLE_CATEGORY_NAME))+" = "+u+";\n"),l+"for (var "+_+" = 0; "+_+" < "+b+"; "+_+"++) {\n"+h+"}\n"},n.JavaScript.controls_repeat=n.JavaScript.controls_repeat_ext,n.JavaScript.controls_whileUntil=function(l){var u="UNTIL"==l.getFieldValue("MODE"),h=n.JavaScript.valueToCode(l,"BOOL",u?n.JavaScript.ORDER_LOGICAL_NOT:n.JavaScript.ORDER_NONE)||"false",_=n.JavaScript.statementToCode(l,"DO");return u&&(h="!"+h),"while ("+h+") {\n"+(_=n.JavaScript.addLoopTrap(_,l))+"}\n"},n.JavaScript.controls_for=function(l){var u=n.JavaScript.nameDB_.getName(l.getFieldValue("VAR"),n.VARIABLE_CATEGORY_NAME),h=n.JavaScript.valueToCode(l,"FROM",n.JavaScript.ORDER_ASSIGNMENT)||"0",_=n.JavaScript.valueToCode(l,"TO",n.JavaScript.ORDER_ASSIGNMENT)||"0",b=n.JavaScript.valueToCode(l,"BY",n.JavaScript.ORDER_ASSIGNMENT)||"1",R=n.JavaScript.statementToCode(l,"DO");if(R=n.JavaScript.addLoopTrap(R,l),n.isNumber(h)&&n.isNumber(_)&&n.isNumber(b)){var O=Number(h)<=Number(_);l="for ("+u+" = "+h+"; "+u+(O?" <= ":" >= ")+_+"; "+u,l=(1==(u=Math.abs(Number(b)))?l+(O?"++":"--"):l+(O?" += ":" -= ")+u)+") {\n"+R+"}\n"}else l="",O=h,h.match(/^\w+$/)||n.isNumber(h)||(l+="var "+(O=n.JavaScript.nameDB_.getDistinctName(u+"_start",n.VARIABLE_CATEGORY_NAME))+" = "+h+";\n"),h=_,_.match(/^\w+$/)||n.isNumber(_)||(l+="var "+(h=n.JavaScript.nameDB_.getDistinctName(u+"_end",n.VARIABLE_CATEGORY_NAME))+" = "+_+";\n"),l+="var "+(_=n.JavaScript.nameDB_.getDistinctName(u+"_inc",n.VARIABLE_CATEGORY_NAME))+" = ",l=(l=n.isNumber(b)?l+(Math.abs(b)+";\n"):l+"Math.abs("+b+");\n")+"if ("+O+" > "+h+") {\n"+(n.JavaScript.INDENT+_)+" = -"+_+";\n",l+="}\n",l+="for ("+u+" = "+O+"; "+_+" >= 0 ? "+u+" <= "+h+" : "+u+" >= "+h+"; "+u+" += "+_+") {\n"+R+"}\n";return l},n.JavaScript.controls_forEach=function(l){var u=n.JavaScript.nameDB_.getName(l.getFieldValue("VAR"),n.VARIABLE_CATEGORY_NAME),h=n.JavaScript.valueToCode(l,"LIST",n.JavaScript.ORDER_ASSIGNMENT)||"[]",_=n.JavaScript.statementToCode(l,"DO");_=n.JavaScript.addLoopTrap(_,l),l="";var b=h;return h.match(/^\w+$/)||(l+="var "+(b=n.JavaScript.nameDB_.getDistinctName(u+"_list",n.VARIABLE_CATEGORY_NAME))+" = "+h+";\n"),l+"for (var "+(h=n.JavaScript.nameDB_.getDistinctName(u+"_index",n.VARIABLE_CATEGORY_NAME))+" in "+b+") {\n"+(_=n.JavaScript.INDENT+u+" = "+b+"["+h+"];\n"+_)+"}\n"},n.JavaScript.controls_flow_statements=function(l){var u="";if(n.JavaScript.STATEMENT_PREFIX&&(u+=n.JavaScript.injectId(n.JavaScript.STATEMENT_PREFIX,l)),n.JavaScript.STATEMENT_SUFFIX&&(u+=n.JavaScript.injectId(n.JavaScript.STATEMENT_SUFFIX,l)),n.JavaScript.STATEMENT_PREFIX){var h=n.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(l);h&&!h.suppressPrefixSuffix&&(u+=n.JavaScript.injectId(n.JavaScript.STATEMENT_PREFIX,h))}switch(l.getFieldValue("FLOW")){case"BREAK":return u+"break;\n";case"CONTINUE":return u+"continue;\n"}throw Error("Unknown flow statement.")},n.JavaScript.math={},n.JavaScript.math_number=function(l){return[l=Number(l.getFieldValue("NUM")),0<=l?n.JavaScript.ORDER_ATOMIC:n.JavaScript.ORDER_UNARY_NEGATION]},n.JavaScript.math_arithmetic=function(l){var u={ADD:[" + ",n.JavaScript.ORDER_ADDITION],MINUS:[" - ",n.JavaScript.ORDER_SUBTRACTION],MULTIPLY:[" * ",n.JavaScript.ORDER_MULTIPLICATION],DIVIDE:[" / ",n.JavaScript.ORDER_DIVISION],POWER:[null,n.JavaScript.ORDER_NONE]}[l.getFieldValue("OP")],h=u[0],_=n.JavaScript.valueToCode(l,"A",u=u[1])||"0";return l=n.JavaScript.valueToCode(l,"B",u)||"0",h?[_+h+l,u]:["Math.pow("+_+", "+l+")",n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.math_single=function(l){var u=l.getFieldValue("OP");if("NEG"==u)return"-"==(l=n.JavaScript.valueToCode(l,"NUM",n.JavaScript.ORDER_UNARY_NEGATION)||"0")[0]&&(l=" "+l),["-"+l,n.JavaScript.ORDER_UNARY_NEGATION];switch(l="SIN"==u||"COS"==u||"TAN"==u?n.JavaScript.valueToCode(l,"NUM",n.JavaScript.ORDER_DIVISION)||"0":n.JavaScript.valueToCode(l,"NUM",n.JavaScript.ORDER_NONE)||"0",u){case"ABS":var h="Math.abs("+l+")";break;case"ROOT":h="Math.sqrt("+l+")";break;case"LN":h="Math.log("+l+")";break;case"EXP":h="Math.exp("+l+")";break;case"POW10":h="Math.pow(10,"+l+")";break;case"ROUND":h="Math.round("+l+")";break;case"ROUNDUP":h="Math.ceil("+l+")";break;case"ROUNDDOWN":h="Math.floor("+l+")";break;case"SIN":h="Math.sin("+l+" / 180 * Math.PI)";break;case"COS":h="Math.cos("+l+" / 180 * Math.PI)";break;case"TAN":h="Math.tan("+l+" / 180 * Math.PI)"}if(h)return[h,n.JavaScript.ORDER_FUNCTION_CALL];switch(u){case"LOG10":h="Math.log("+l+") / Math.log(10)";break;case"ASIN":h="Math.asin("+l+") / Math.PI * 180";break;case"ACOS":h="Math.acos("+l+") / Math.PI * 180";break;case"ATAN":h="Math.atan("+l+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+u)}return[h,n.JavaScript.ORDER_DIVISION]},n.JavaScript.math_constant=function(l){return{PI:["Math.PI",n.JavaScript.ORDER_MEMBER],E:["Math.E",n.JavaScript.ORDER_MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",n.JavaScript.ORDER_DIVISION],SQRT2:["Math.SQRT2",n.JavaScript.ORDER_MEMBER],SQRT1_2:["Math.SQRT1_2",n.JavaScript.ORDER_MEMBER],INFINITY:["Infinity",n.JavaScript.ORDER_ATOMIC]}[l.getFieldValue("CONSTANT")]},n.JavaScript.math_number_property=function(l){var u=n.JavaScript.valueToCode(l,"NUMBER_TO_CHECK",n.JavaScript.ORDER_MODULUS)||"0",h=l.getFieldValue("PROPERTY");if("PRIME"==h)return[n.JavaScript.provideFunction_("mathIsPrime",["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(n) {","  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods","  if (n == 2 || n == 3) {","    return true;","  }","  // False if n is NaN, negative, is 1, or not whole.","  // And false if n is divisible by 2 or 3.","  if (isNaN(n) || n <= 1 || n % 1 != 0 || n % 2 == 0 || n % 3 == 0) {","    return false;","  }","  // Check all the numbers of form 6k +/- 1, up to sqrt(n).","  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {","    if (n % (x - 1) == 0 || n % (x + 1) == 0) {","      return false;","    }","  }","  return true;","}"])+"("+u+")",n.JavaScript.ORDER_FUNCTION_CALL];switch(h){case"EVEN":var _=u+" % 2 == 0";break;case"ODD":_=u+" % 2 == 1";break;case"WHOLE":_=u+" % 1 == 0";break;case"POSITIVE":_=u+" > 0";break;case"NEGATIVE":_=u+" < 0";break;case"DIVISIBLE_BY":_=u+" % "+(l=n.JavaScript.valueToCode(l,"DIVISOR",n.JavaScript.ORDER_MODULUS)||"0")+" == 0"}return[_,n.JavaScript.ORDER_EQUALITY]},n.JavaScript.math_change=function(l){var u=n.JavaScript.valueToCode(l,"DELTA",n.JavaScript.ORDER_ADDITION)||"0";return(l=n.JavaScript.nameDB_.getName(l.getFieldValue("VAR"),n.VARIABLE_CATEGORY_NAME))+" = (typeof "+l+" == 'number' ? "+l+" : 0) + "+u+";\n"},n.JavaScript.math_round=n.JavaScript.math_single,n.JavaScript.math_trig=n.JavaScript.math_single,n.JavaScript.math_on_list=function(l){var u=l.getFieldValue("OP");switch(u){case"SUM":l=n.JavaScript.valueToCode(l,"LIST",n.JavaScript.ORDER_MEMBER)||"[]",l+=".reduce(function(x, y) {return x + y;})";break;case"MIN":l="Math.min.apply(null, "+(l=n.JavaScript.valueToCode(l,"LIST",n.JavaScript.ORDER_NONE)||"[]")+")";break;case"MAX":l="Math.max.apply(null, "+(l=n.JavaScript.valueToCode(l,"LIST",n.JavaScript.ORDER_NONE)||"[]")+")";break;case"AVERAGE":l=(u=n.JavaScript.provideFunction_("mathMean",["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {","  return myList.reduce(function(x, y) {return x + y;}) / myList.length;","}"]))+"("+(l=n.JavaScript.valueToCode(l,"LIST",n.JavaScript.ORDER_NONE)||"[]")+")";break;case"MEDIAN":l=(u=n.JavaScript.provideFunction_("mathMedian",["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {","  var localList = myList.filter(function (x) {return typeof x == 'number';});","  if (!localList.length) return null;","  localList.sort(function(a, b) {return b - a;});","  if (localList.length % 2 == 0) {","    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;","  } else {","    return localList[(localList.length - 1) / 2];","  }","}"]))+"("+(l=n.JavaScript.valueToCode(l,"LIST",n.JavaScript.ORDER_NONE)||"[]")+")";break;case"MODE":l=(u=n.JavaScript.provideFunction_("mathModes",["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(values) {","  var modes = [];","  var counts = [];","  var maxCount = 0;","  for (var i = 0; i < values.length; i++) {","    var value = values[i];","    var found = false;","    var thisCount;","    for (var j = 0; j < counts.length; j++) {","      if (counts[j][0] === value) {","        thisCount = ++counts[j][1];","        found = true;","        break;","      }","    }","    if (!found) {","      counts.push([value, 1]);","      thisCount = 1;","    }","    maxCount = Math.max(thisCount, maxCount);","  }","  for (var j = 0; j < counts.length; j++) {","    if (counts[j][1] == maxCount) {","        modes.push(counts[j][0]);","    }","  }","  return modes;","}"]))+"("+(l=n.JavaScript.valueToCode(l,"LIST",n.JavaScript.ORDER_NONE)||"[]")+")";break;case"STD_DEV":l=(u=n.JavaScript.provideFunction_("mathStandardDeviation",["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(numbers) {","  var n = numbers.length;","  if (!n) return null;","  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;","  var variance = 0;","  for (var j = 0; j < n; j++) {","    variance += Math.pow(numbers[j] - mean, 2);","  }","  variance = variance / n;","  return Math.sqrt(variance);","}"]))+"("+(l=n.JavaScript.valueToCode(l,"LIST",n.JavaScript.ORDER_NONE)||"[]")+")";break;case"RANDOM":l=(u=n.JavaScript.provideFunction_("mathRandomList",["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list) {","  var x = Math.floor(Math.random() * list.length);","  return list[x];","}"]))+"("+(l=n.JavaScript.valueToCode(l,"LIST",n.JavaScript.ORDER_NONE)||"[]")+")";break;default:throw Error("Unknown operator: "+u)}return[l,n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.math_modulo=function(l){return[(n.JavaScript.valueToCode(l,"DIVIDEND",n.JavaScript.ORDER_MODULUS)||"0")+" % "+(l=n.JavaScript.valueToCode(l,"DIVISOR",n.JavaScript.ORDER_MODULUS)||"0"),n.JavaScript.ORDER_MODULUS]},n.JavaScript.math_constrain=function(l){return["Math.min(Math.max("+(n.JavaScript.valueToCode(l,"VALUE",n.JavaScript.ORDER_NONE)||"0")+", "+(n.JavaScript.valueToCode(l,"LOW",n.JavaScript.ORDER_NONE)||"0")+"), "+(l=n.JavaScript.valueToCode(l,"HIGH",n.JavaScript.ORDER_NONE)||"Infinity")+")",n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.math_random_int=function(l){var u=n.JavaScript.valueToCode(l,"FROM",n.JavaScript.ORDER_NONE)||"0";return l=n.JavaScript.valueToCode(l,"TO",n.JavaScript.ORDER_NONE)||"0",[n.JavaScript.provideFunction_("mathRandomInt",["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(a, b) {","  if (a > b) {","    // Swap a and b to ensure a is smaller.","    var c = a;","    a = b;","    b = c;","  }","  return Math.floor(Math.random() * (b - a + 1) + a);","}"])+"("+u+", "+l+")",n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.math_random_float=function(l){return["Math.random()",n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.math_atan2=function(l){var u=n.JavaScript.valueToCode(l,"X",n.JavaScript.ORDER_NONE)||"0";return["Math.atan2("+(n.JavaScript.valueToCode(l,"Y",n.JavaScript.ORDER_NONE)||"0")+", "+u+") / Math.PI * 180",n.JavaScript.ORDER_DIVISION]},n.JavaScript.procedures={},n.JavaScript.procedures_defreturn=function(l){var u=n.JavaScript.nameDB_.getName(l.getFieldValue("NAME"),n.PROCEDURE_CATEGORY_NAME),h="";n.JavaScript.STATEMENT_PREFIX&&(h+=n.JavaScript.injectId(n.JavaScript.STATEMENT_PREFIX,l)),n.JavaScript.STATEMENT_SUFFIX&&(h+=n.JavaScript.injectId(n.JavaScript.STATEMENT_SUFFIX,l)),h&&(h=n.JavaScript.prefixLines(h,n.JavaScript.INDENT));var _="";n.JavaScript.INFINITE_LOOP_TRAP&&(_=n.JavaScript.prefixLines(n.JavaScript.injectId(n.JavaScript.INFINITE_LOOP_TRAP,l),n.JavaScript.INDENT));var b=n.JavaScript.statementToCode(l,"STACK"),R=n.JavaScript.valueToCode(l,"RETURN",n.JavaScript.ORDER_NONE)||"",O="";b&&R&&(O=h),R&&(R=n.JavaScript.INDENT+"return "+R+";\n");for(var H=[],W=l.getVars(),G=0;G<W.length;G++)H[G]=n.JavaScript.nameDB_.getName(W[G],n.VARIABLE_CATEGORY_NAME);return h="function "+u+"("+H.join(", ")+") {\n"+h+_+b+O+R+"}",h=n.JavaScript.scrub_(l,h),n.JavaScript.definitions_["%"+u]=h,null},n.JavaScript.procedures_defnoreturn=n.JavaScript.procedures_defreturn,n.JavaScript.procedures_callreturn=function(l){for(var u=n.JavaScript.nameDB_.getName(l.getFieldValue("NAME"),n.PROCEDURE_CATEGORY_NAME),h=[],_=l.getVars(),b=0;b<_.length;b++)h[b]=n.JavaScript.valueToCode(l,"ARG"+b,n.JavaScript.ORDER_NONE)||"null";return[u+"("+h.join(", ")+")",n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.procedures_callnoreturn=function(l){return n.JavaScript.procedures_callreturn(l)[0]+";\n"},n.JavaScript.procedures_ifreturn=function(l){var u="if ("+(n.JavaScript.valueToCode(l,"CONDITION",n.JavaScript.ORDER_NONE)||"false")+") {\n";return n.JavaScript.STATEMENT_SUFFIX&&(u+=n.JavaScript.prefixLines(n.JavaScript.injectId(n.JavaScript.STATEMENT_SUFFIX,l),n.JavaScript.INDENT)),l.hasReturnValue_?(l=n.JavaScript.valueToCode(l,"VALUE",n.JavaScript.ORDER_NONE)||"null",u+=n.JavaScript.INDENT+"return "+l+";\n"):u+=n.JavaScript.INDENT+"return;\n",u+"}\n"},n.JavaScript.texts={},n.JavaScript.text=function(l){return[n.JavaScript.quote_(l.getFieldValue("TEXT")),n.JavaScript.ORDER_ATOMIC]},n.JavaScript.text_multiline=function(l){var u=-1!=(l=n.JavaScript.multiline_quote_(l.getFieldValue("TEXT"))).indexOf("+")?n.JavaScript.ORDER_ADDITION:n.JavaScript.ORDER_ATOMIC;return[l,u]},n.JavaScript.text.forceString_=function(l){return n.JavaScript.text.forceString_.strRegExp.test(l)?[l,n.JavaScript.ORDER_ATOMIC]:["String("+l+")",n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.text.forceString_.strRegExp=/^\s*'([^']|\\')*'\s*$/,n.JavaScript.text_join=function(l){switch(l.itemCount_){case 0:return["''",n.JavaScript.ORDER_ATOMIC];case 1:return l=n.JavaScript.valueToCode(l,"ADD0",n.JavaScript.ORDER_NONE)||"''",n.JavaScript.text.forceString_(l);case 2:var u=n.JavaScript.valueToCode(l,"ADD0",n.JavaScript.ORDER_NONE)||"''";return l=n.JavaScript.valueToCode(l,"ADD1",n.JavaScript.ORDER_NONE)||"''",[l=n.JavaScript.text.forceString_(u)[0]+" + "+n.JavaScript.text.forceString_(l)[0],n.JavaScript.ORDER_ADDITION];default:u=Array(l.itemCount_);for(var h=0;h<l.itemCount_;h++)u[h]=n.JavaScript.valueToCode(l,"ADD"+h,n.JavaScript.ORDER_NONE)||"''";return[l="["+u.join(",")+"].join('')",n.JavaScript.ORDER_FUNCTION_CALL]}},n.JavaScript.text_append=function(l){var u=n.JavaScript.nameDB_.getName(l.getFieldValue("VAR"),n.VARIABLE_CATEGORY_NAME);return l=n.JavaScript.valueToCode(l,"TEXT",n.JavaScript.ORDER_NONE)||"''",u+" += "+n.JavaScript.text.forceString_(l)[0]+";\n"},n.JavaScript.text_length=function(l){return[(n.JavaScript.valueToCode(l,"VALUE",n.JavaScript.ORDER_MEMBER)||"''")+".length",n.JavaScript.ORDER_MEMBER]},n.JavaScript.text_isEmpty=function(l){return["!"+(n.JavaScript.valueToCode(l,"VALUE",n.JavaScript.ORDER_MEMBER)||"''")+".length",n.JavaScript.ORDER_LOGICAL_NOT]},n.JavaScript.text_indexOf=function(l){var u="FIRST"==l.getFieldValue("END")?"indexOf":"lastIndexOf",h=n.JavaScript.valueToCode(l,"FIND",n.JavaScript.ORDER_NONE)||"''";return u=(n.JavaScript.valueToCode(l,"VALUE",n.JavaScript.ORDER_MEMBER)||"''")+"."+u+"("+h+")",l.workspace.options.oneBasedIndex?[u+" + 1",n.JavaScript.ORDER_ADDITION]:[u,n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.text_charAt=function(l){var u=l.getFieldValue("WHERE")||"FROM_START",h=n.JavaScript.valueToCode(l,"VALUE","RANDOM"==u?n.JavaScript.ORDER_NONE:n.JavaScript.ORDER_MEMBER)||"''";switch(u){case"FIRST":return[h+".charAt(0)",n.JavaScript.ORDER_FUNCTION_CALL];case"LAST":return[h+".slice(-1)",n.JavaScript.ORDER_FUNCTION_CALL];case"FROM_START":return[h+".charAt("+(l=n.JavaScript.getAdjusted(l,"AT"))+")",n.JavaScript.ORDER_FUNCTION_CALL];case"FROM_END":return[h+".slice("+(l=n.JavaScript.getAdjusted(l,"AT",1,!0))+").charAt(0)",n.JavaScript.ORDER_FUNCTION_CALL];case"RANDOM":return[n.JavaScript.provideFunction_("textRandomLetter",["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(text) {","  var x = Math.floor(Math.random() * text.length);","  return text[x];","}"])+"("+h+")",n.JavaScript.ORDER_FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},n.JavaScript.text.getIndex_=function(l,u,h){return"FIRST"==u?"0":"FROM_END"==u?l+".length - 1 - "+h:"LAST"==u?l+".length - 1":h},n.JavaScript.text_getSubstring=function(l){var u=l.getFieldValue("WHERE1"),h=l.getFieldValue("WHERE2"),_="FROM_END"!=u&&"LAST"!=u&&"FROM_END"!=h&&"LAST"!=h,b=n.JavaScript.valueToCode(l,"STRING",_?n.JavaScript.ORDER_MEMBER:n.JavaScript.ORDER_NONE)||"''";if("FIRST"==u&&"LAST"==h)return[b,n.JavaScript.ORDER_NONE];if(b.match(/^'?\w+'?$/)||_){switch(u){case"FROM_START":_=n.JavaScript.getAdjusted(l,"AT1");break;case"FROM_END":_=b+".length - "+(_=n.JavaScript.getAdjusted(l,"AT1",1,!1,n.JavaScript.ORDER_SUBTRACTION));break;case"FIRST":_="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(h){case"FROM_START":l=n.JavaScript.getAdjusted(l,"AT2",1);break;case"FROM_END":l=b+".length - "+(l=n.JavaScript.getAdjusted(l,"AT2",0,!1,n.JavaScript.ORDER_SUBTRACTION));break;case"LAST":l=b+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}u=b+".slice("+_+", "+l+")"}else{_=n.JavaScript.getAdjusted(l,"AT1"),l=n.JavaScript.getAdjusted(l,"AT2");var R=n.JavaScript.text.getIndex_,O={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};u=n.JavaScript.provideFunction_("subsequence"+O[u]+O[h],["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+("FROM_END"==u||"FROM_START"==u?", at1":"")+("FROM_END"==h||"FROM_START"==h?", at2":"")+") {","  var start = "+R("sequence",u,"at1")+";","  var end = "+R("sequence",h,"at2")+" + 1;","  return sequence.slice(start, end);","}"])+"("+b+("FROM_END"==u||"FROM_START"==u?", "+_:"")+("FROM_END"==h||"FROM_START"==h?", "+l:"")+")"}return[u,n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.text_changeCase=function(l){var u={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[l.getFieldValue("CASE")];return l=n.JavaScript.valueToCode(l,"TEXT",u?n.JavaScript.ORDER_MEMBER:n.JavaScript.ORDER_NONE)||"''",[u?l+u:n.JavaScript.provideFunction_("textToTitleCase",["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(str) {","  return str.replace(/\\S+/g,","      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});","}"])+"("+l+")",n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.text_trim=function(l){var u={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[l.getFieldValue("MODE")];return[(n.JavaScript.valueToCode(l,"TEXT",n.JavaScript.ORDER_MEMBER)||"''")+u,n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.text_print=function(l){return"window.alert("+(n.JavaScript.valueToCode(l,"TEXT",n.JavaScript.ORDER_NONE)||"''")+");\n"},n.JavaScript.text_prompt_ext=function(l){var u="window.prompt("+(l.getField("TEXT")?n.JavaScript.quote_(l.getFieldValue("TEXT")):n.JavaScript.valueToCode(l,"TEXT",n.JavaScript.ORDER_NONE)||"''")+")";return"NUMBER"==l.getFieldValue("TYPE")&&(u="Number("+u+")"),[u,n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.text_prompt=n.JavaScript.text_prompt_ext,n.JavaScript.text_count=function(l){var u=n.JavaScript.valueToCode(l,"TEXT",n.JavaScript.ORDER_NONE)||"''";return l=n.JavaScript.valueToCode(l,"SUB",n.JavaScript.ORDER_NONE)||"''",[n.JavaScript.provideFunction_("textCount",["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle) {","  if (needle.length === 0) {","    return haystack.length + 1;","  } else {","    return haystack.split(needle).length - 1;","  }","}"])+"("+u+", "+l+")",n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.text_replace=function(l){var u=n.JavaScript.valueToCode(l,"TEXT",n.JavaScript.ORDER_NONE)||"''",h=n.JavaScript.valueToCode(l,"FROM",n.JavaScript.ORDER_NONE)||"''";return l=n.JavaScript.valueToCode(l,"TO",n.JavaScript.ORDER_NONE)||"''",[n.JavaScript.provideFunction_("textReplace",["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle, replacement) {",'  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g,"\\\\$1")','                 .replace(/\\x08/g,"\\\\x08");',"  return haystack.replace(new RegExp(needle, 'g'), replacement);","}"])+"("+u+", "+h+", "+l+")",n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.text_reverse=function(l){return[(n.JavaScript.valueToCode(l,"TEXT",n.JavaScript.ORDER_MEMBER)||"''")+".split('').reverse().join('')",n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.variables={},n.JavaScript.variables_get=function(l){return[n.JavaScript.nameDB_.getName(l.getFieldValue("VAR"),n.VARIABLE_CATEGORY_NAME),n.JavaScript.ORDER_ATOMIC]},n.JavaScript.variables_set=function(l){var u=n.JavaScript.valueToCode(l,"VALUE",n.JavaScript.ORDER_ASSIGNMENT)||"0";return n.JavaScript.nameDB_.getName(l.getFieldValue("VAR"),n.VARIABLE_CATEGORY_NAME)+" = "+u+";\n"},n.JavaScript.variablesDynamic={},n.JavaScript.variables_get_dynamic=n.JavaScript.variables_get,n.JavaScript.variables_set_dynamic=n.JavaScript.variables_set,n.JavaScript}.apply(I,S))&&(T.exports=s)},79841:function(T,I,m){var S,s;S=[m(82215)],void 0!==(s=function(n){return(n={Msg:{}}).Msg.ADD_COMMENT="Add Comment",n.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",n.Msg.CHANGE_VALUE_TITLE="Change value:",n.Msg.CLEAN_UP="Clean up Blocks",n.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",n.Msg.COLLAPSE_ALL="Collapse Blocks",n.Msg.COLLAPSE_BLOCK="Collapse Block",n.Msg.COLOUR_BLEND_COLOUR1="colour 1",n.Msg.COLOUR_BLEND_COLOUR2="colour 2",n.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",n.Msg.COLOUR_BLEND_RATIO="ratio",n.Msg.COLOUR_BLEND_TITLE="blend",n.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",n.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",n.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",n.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",n.Msg.COLOUR_RANDOM_TITLE="random colour",n.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",n.Msg.COLOUR_RGB_BLUE="blue",n.Msg.COLOUR_RGB_GREEN="green",n.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",n.Msg.COLOUR_RGB_RED="red",n.Msg.COLOUR_RGB_TITLE="colour with",n.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",n.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",n.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",n.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",n.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",n.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",n.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",n.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",n.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",n.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",n.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",n.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",n.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",n.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",n.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",n.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",n.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",n.Msg.CONTROLS_IF_MSG_ELSE="else",n.Msg.CONTROLS_IF_MSG_ELSEIF="else if",n.Msg.CONTROLS_IF_MSG_IF="if",n.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",n.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",n.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",n.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",n.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",n.Msg.CONTROLS_REPEAT_INPUT_DO="do",n.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",n.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",n.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",n.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",n.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",n.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",n.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",n.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",n.Msg.DELETE_BLOCK="Delete Block",n.Msg.DELETE_VARIABLE="Delete the '%1' variable",n.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",n.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",n.Msg.DISABLE_BLOCK="Disable Block",n.Msg.DUPLICATE_BLOCK="Duplicate",n.Msg.DUPLICATE_COMMENT="Duplicate Comment",n.Msg.ENABLE_BLOCK="Enable Block",n.Msg.EXPAND_ALL="Expand Blocks",n.Msg.EXPAND_BLOCK="Expand Block",n.Msg.EXTERNAL_INPUTS="External Inputs",n.Msg.HELP="Help",n.Msg.INLINE_INPUTS="Inline Inputs",n.Msg.IOS_CANCEL="Cancel",n.Msg.IOS_ERROR="Error",n.Msg.IOS_OK="OK",n.Msg.IOS_PROCEDURES_ADD_INPUT="+ Add Input",n.Msg.IOS_PROCEDURES_ALLOW_STATEMENTS="Allow statements",n.Msg.IOS_PROCEDURES_DUPLICATE_INPUTS_ERROR="This function has duplicate inputs.",n.Msg.IOS_PROCEDURES_INPUTS="INPUTS",n.Msg.IOS_VARIABLES_ADD_BUTTON="Add",n.Msg.IOS_VARIABLES_ADD_VARIABLE="+ Add Variable",n.Msg.IOS_VARIABLES_DELETE_BUTTON="Delete",n.Msg.IOS_VARIABLES_EMPTY_NAME_ERROR="You can't use an empty variable name.",n.Msg.IOS_VARIABLES_RENAME_BUTTON="Rename",n.Msg.IOS_VARIABLES_VARIABLE_NAME="Variable name",n.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",n.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",n.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",n.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",n.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",n.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",n.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",n.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",n.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",n.Msg.LISTS_GET_INDEX_FIRST="first",n.Msg.LISTS_GET_INDEX_FROM_END="# from end",n.Msg.LISTS_GET_INDEX_FROM_START="#",n.Msg.LISTS_GET_INDEX_GET="get",n.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",n.Msg.LISTS_GET_INDEX_LAST="last",n.Msg.LISTS_GET_INDEX_RANDOM="random",n.Msg.LISTS_GET_INDEX_REMOVE="remove",n.Msg.LISTS_GET_INDEX_TAIL="",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",n.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",n.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",n.Msg.LISTS_GET_SUBLIST_END_LAST="to last",n.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",n.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",n.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",n.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",n.Msg.LISTS_GET_SUBLIST_TAIL="",n.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",n.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",n.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",n.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",n.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",n.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",n.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",n.Msg.LISTS_INLIST="in list",n.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",n.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",n.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",n.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",n.Msg.LISTS_LENGTH_TITLE="length of %1",n.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",n.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",n.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",n.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",n.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",n.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",n.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",n.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",n.Msg.LISTS_SET_INDEX_INPUT_TO="as",n.Msg.LISTS_SET_INDEX_INSERT="insert at",n.Msg.LISTS_SET_INDEX_SET="set",n.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",n.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",n.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",n.Msg.LISTS_SORT_ORDER_DESCENDING="descending",n.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",n.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",n.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",n.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",n.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",n.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",n.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",n.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",n.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",n.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",n.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",n.Msg.LOGIC_BOOLEAN_FALSE="false",n.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",n.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",n.Msg.LOGIC_BOOLEAN_TRUE="true",n.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",n.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",n.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",n.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",n.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",n.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",n.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",n.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",n.Msg.LOGIC_NEGATE_TITLE="not %1",n.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",n.Msg.LOGIC_NULL="null",n.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",n.Msg.LOGIC_NULL_TOOLTIP="Returns null.",n.Msg.LOGIC_OPERATION_AND="and",n.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",n.Msg.LOGIC_OPERATION_OR="or",n.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",n.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",n.Msg.LOGIC_TERNARY_CONDITION="test",n.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",n.Msg.LOGIC_TERNARY_IF_FALSE="if false",n.Msg.LOGIC_TERNARY_IF_TRUE="if true",n.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",n.Msg.MATH_ADDITION_SYMBOL="+",n.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",n.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",n.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",n.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",n.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",n.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",n.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",n.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",n.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",n.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",n.Msg.MATH_CHANGE_TITLE="change %1 by %2",n.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",n.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",n.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants: \u03c0 (3.141\u2026), e (2.718\u2026), \u03c6 (1.618\u2026), sqrt(2) (1.414\u2026), sqrt(\xbd) (0.707\u2026), or \u221e (infinity).",n.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",n.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",n.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",n.Msg.MATH_DIVISION_SYMBOL="\xf7",n.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",n.Msg.MATH_IS_EVEN="is even",n.Msg.MATH_IS_NEGATIVE="is negative",n.Msg.MATH_IS_ODD="is odd",n.Msg.MATH_IS_POSITIVE="is positive",n.Msg.MATH_IS_PRIME="is prime",n.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",n.Msg.MATH_IS_WHOLE="is whole",n.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",n.Msg.MATH_MODULO_TITLE="remainder of %1 \xf7 %2",n.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",n.Msg.MATH_MULTIPLICATION_SYMBOL="\xd7",n.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",n.Msg.MATH_NUMBER_TOOLTIP="A number.",n.Msg.MATH_ONLIST_HELPURL="",n.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",n.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",n.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",n.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",n.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",n.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",n.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",n.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",n.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",n.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",n.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",n.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",n.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",n.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",n.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",n.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",n.Msg.MATH_POWER_SYMBOL="^",n.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",n.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",n.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",n.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",n.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",n.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",n.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",n.Msg.MATH_ROUND_OPERATOR_ROUND="round",n.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",n.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",n.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",n.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",n.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",n.Msg.MATH_SINGLE_OP_ROOT="square root",n.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",n.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",n.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",n.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",n.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",n.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",n.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",n.Msg.MATH_SUBTRACTION_SYMBOL="-",n.Msg.MATH_TRIG_ACOS="acos",n.Msg.MATH_TRIG_ASIN="asin",n.Msg.MATH_TRIG_ATAN="atan",n.Msg.MATH_TRIG_COS="cos",n.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",n.Msg.MATH_TRIG_SIN="sin",n.Msg.MATH_TRIG_TAN="tan",n.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",n.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",n.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",n.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",n.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",n.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",n.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",n.Msg.NEW_NUMBER_VARIABLE="Create number variable...",n.Msg.NEW_STRING_VARIABLE="Create string variable...",n.Msg.NEW_VARIABLE="Create variable...",n.Msg.NEW_VARIABLE_TITLE="New variable name:",n.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",n.Msg.ORDINAL_NUMBER_SUFFIX="",n.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",n.Msg.PROCEDURES_BEFORE_PARAMS="with:",n.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",n.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",n.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",n.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",n.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",n.Msg.PROCEDURES_CREATE_DO="Create '%1'",n.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",n.Msg.PROCEDURES_DEFNORETURN_DO="",n.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",n.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",n.Msg.PROCEDURES_DEFNORETURN_TITLE="to",n.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",n.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",n.Msg.PROCEDURES_DEFRETURN_RETURN="return",n.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",n.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",n.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",n.Msg.PROCEDURES_IFRETURN_HELPURL="http://c2.com/cgi/wiki?GuardClause",n.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",n.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",n.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",n.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",n.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",n.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",n.Msg.REDO="Redo",n.Msg.REMOVE_COMMENT="Remove Comment",n.Msg.RENAME_VARIABLE="Rename variable...",n.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",n.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",n.Msg.TEXT_APPEND_TITLE="to %1 append text %2",n.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",n.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",n.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",n.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",n.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",n.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",n.Msg.TEXT_CHARAT_FIRST="get first letter",n.Msg.TEXT_CHARAT_FROM_END="get letter # from end",n.Msg.TEXT_CHARAT_FROM_START="get letter #",n.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",n.Msg.TEXT_CHARAT_LAST="get last letter",n.Msg.TEXT_CHARAT_RANDOM="get random letter",n.Msg.TEXT_CHARAT_TAIL="",n.Msg.TEXT_CHARAT_TITLE="in text %1 %2",n.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",n.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",n.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",n.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",n.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",n.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",n.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",n.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",n.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",n.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",n.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",n.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",n.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",n.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",n.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",n.Msg.TEXT_GET_SUBSTRING_TAIL="",n.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",n.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",n.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",n.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",n.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",n.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",n.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",n.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",n.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",n.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",n.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",n.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",n.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",n.Msg.TEXT_LENGTH_TITLE="length of %1",n.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",n.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",n.Msg.TEXT_PRINT_TITLE="print %1",n.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",n.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",n.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",n.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",n.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",n.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",n.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",n.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",n.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",n.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",n.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",n.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",n.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",n.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",n.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",n.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",n.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",n.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",n.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",n.Msg.TODAY="Today",n.Msg.UNDO="Undo",n.Msg.UNNAMED_KEY="unnamed",n.Msg.VARIABLES_DEFAULT_NAME="item",n.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",n.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",n.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",n.Msg.VARIABLES_SET="set %1 to %2",n.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",n.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",n.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",n.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",n.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",n.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",n.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",n.Msg.CONTROLS_FOREACH_INPUT_DO=n.Msg.CONTROLS_REPEAT_INPUT_DO,n.Msg.CONTROLS_FOR_INPUT_DO=n.Msg.CONTROLS_REPEAT_INPUT_DO,n.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=n.Msg.CONTROLS_IF_MSG_ELSEIF,n.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=n.Msg.CONTROLS_IF_MSG_ELSE,n.Msg.CONTROLS_IF_IF_TITLE_IF=n.Msg.CONTROLS_IF_MSG_IF,n.Msg.CONTROLS_IF_MSG_THEN=n.Msg.CONTROLS_REPEAT_INPUT_DO,n.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=n.Msg.CONTROLS_REPEAT_INPUT_DO,n.Msg.LISTS_CREATE_WITH_ITEM_TITLE=n.Msg.VARIABLES_DEFAULT_NAME,n.Msg.LISTS_GET_INDEX_HELPURL=n.Msg.LISTS_INDEX_OF_HELPURL,n.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=n.Msg.LISTS_INLIST,n.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=n.Msg.LISTS_INLIST,n.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=n.Msg.LISTS_INLIST,n.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=n.Msg.LISTS_INLIST,n.Msg.MATH_CHANGE_TITLE_ITEM=n.Msg.VARIABLES_DEFAULT_NAME,n.Msg.PROCEDURES_DEFRETURN_COMMENT=n.Msg.PROCEDURES_DEFNORETURN_COMMENT,n.Msg.PROCEDURES_DEFRETURN_DO=n.Msg.PROCEDURES_DEFNORETURN_DO,n.Msg.PROCEDURES_DEFRETURN_PROCEDURE=n.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,n.Msg.PROCEDURES_DEFRETURN_TITLE=n.Msg.PROCEDURES_DEFNORETURN_TITLE,n.Msg.TEXT_APPEND_VARIABLE=n.Msg.VARIABLES_DEFAULT_NAME,n.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=n.Msg.VARIABLES_DEFAULT_NAME,n.Msg.MATH_HUE="230",n.Msg.LOOPS_HUE="120",n.Msg.LISTS_HUE="260",n.Msg.LOGIC_HUE="210",n.Msg.VARIABLES_HUE="330",n.Msg.TEXTS_HUE="160",n.Msg.PROCEDURES_HUE="290",n.Msg.COLOUR_HUE="20",n.Msg.VARIABLES_DYNAMIC_HUE="310",n.Msg}.apply(I,S))&&(T.exports=s)},3138:function(T){T.exports=function(){"use strict";function I(k){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(P){return typeof P}:function(P){return P&&"function"==typeof Symbol&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P})(k)}var k,y=(k={},function(j){var se=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"introjs-stamp";return k[se]=k[se]||0,void 0===j[se]&&(j[se]=k[se]++),j[se]});function S(k,P,j){if(k)for(var se=0,pe=k.length;se<pe;se++)P(k[se],se);"function"==typeof j&&j()}var s=new function(){var P="introjs_event";this._id=function(j,se,pe,we){return se+y(pe)+(we?"_".concat(y(we)):"")},this.on=function(j,se,pe,we,_e){var ye=this._id.apply(this,arguments),Fe=function(We){return pe.call(we||j,We||window.event)};"addEventListener"in j?j.addEventListener(se,Fe,_e):"attachEvent"in j&&j.attachEvent("on".concat(se),Fe),j[P]=j[P]||{},j[P][ye]=Fe},this.off=function(j,se,pe,we,_e){var ye=this._id.apply(this,arguments),Fe=j[P]&&j[P][ye];!Fe||("removeEventListener"in j?j.removeEventListener(se,Fe,_e):"detachEvent"in j&&j.detachEvent("on".concat(se),Fe),j[P][ye]=null)}},n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function l(k,P){return k(P={exports:{}},P.exports),P.exports}var ut,gt,u=function(k){return k&&k.Math==Math&&k},h=u("object"==typeof globalThis&&globalThis)||u("object"==typeof window&&window)||u("object"==typeof self&&self)||u("object"==typeof n&&n)||function(){return this}()||Function("return this")(),_=function(k){try{return!!k()}catch(P){return!0}},b=!_(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),R=Function.prototype.call,O=R.bind?R.bind(R):function(){return R.apply(R,arguments)},H={}.propertyIsEnumerable,W=Object.getOwnPropertyDescriptor,Q={f:W&&!H.call({1:2},1)?function(P){var j=W(this,P);return!!j&&j.enumerable}:H},Y=function(k,P){return{enumerable:!(1&k),configurable:!(2&k),writable:!(4&k),value:P}},ue=Function.prototype,ne=ue.bind,he=ue.call,te=ne&&ne.bind(he),oe=ne?function(k){return k&&te(he,k)}:function(k){return k&&function(){return he.apply(k,arguments)}},q=oe({}.toString),J=oe("".slice),F=function(k){return J(q(k),8,-1)},fe=h.Object,K=oe("".split),ie=_(function(){return!fe("z").propertyIsEnumerable(0)})?function(k){return"String"==F(k)?K(k,""):fe(k)}:fe,le=h.TypeError,re=function(k){if(null==k)throw le("Can't call method on "+k);return k},Re=function(k){return ie(re(k))},de=function(k){return"function"==typeof k},ve=function(k){return"object"==typeof k?null!==k:de(k)},Pe=function(k){return de(k)?k:void 0},Se=function(k,P){return arguments.length<2?Pe(h[k]):h[k]&&h[k][P]},Te=oe({}.isPrototypeOf),Ve=Se("navigator","userAgent")||"",Le=h.process,Ue=h.Deno,He=Le&&Le.versions||Ue&&Ue.version,je=He&&He.v8;je&&(gt=(ut=je.split("."))[0]>0&&ut[0]<4?1:+(ut[0]+ut[1])),!gt&&Ve&&(!(ut=Ve.match(/Edge\/(\d+)/))||ut[1]>=74)&&(ut=Ve.match(/Chrome\/(\d+)/))&&(gt=+ut[1]);var At=gt,mi=!!Object.getOwnPropertySymbols&&!_(function(){var k=Symbol();return!String(k)||!(Object(k)instanceof Symbol)||!Symbol.sham&&At&&At<41}),Bi=mi&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Ci=h.Object,Et=Bi?function(k){return"symbol"==typeof k}:function(k){var P=Se("Symbol");return de(P)&&Te(P.prototype,Ci(k))},ui=h.String,mt=function(k){try{return ui(k)}catch(P){return"Object"}},nn=h.TypeError,ze=function(k){if(de(k))return k;throw nn(mt(k)+" is not a function")},rn=function(k,P){var j=k[P];return null==j?void 0:ze(j)},Yt=h.TypeError,wi=Object.defineProperty,fn=function(k,P){try{wi(h,k,{value:P,configurable:!0,writable:!0})}catch(j){h[k]=P}return P},xn="__core-js_shared__",Me=h[xn]||fn(xn,{}),Xt=l(function(k){(k.exports=function(P,j){return Me[P]||(Me[P]=void 0!==j?j:{})})("versions",[]).push({version:"3.19.1",mode:"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})}),qt=h.Object,ai=function(k){return qt(re(k))},ei=oe({}.hasOwnProperty),Si=Object.hasOwn||function(P,j){return ei(ai(P),j)},An=0,fi=Math.random(),at=oe(1..toString),lt=function(k){return"Symbol("+(void 0===k?"":k)+")_"+at(++An+fi,36)},Ne=Xt("wks"),Ke=h.Symbol,me=Ke&&Ke.for,Ae=Bi?Ke:Ke&&Ke.withoutSetter||lt,Xe=function(k){if(!Si(Ne,k)||!mi&&"string"!=typeof Ne[k]){var P="Symbol."+k;Ne[k]=mi&&Si(Ke,k)?Ke[k]:Bi&&me?me(P):Ae(P)}return Ne[k]},ct=h.TypeError,Ii=Xe("toPrimitive"),dt=function(k,P){if(!ve(k)||Et(k))return k;var se,j=rn(k,Ii);if(j){if(void 0===P&&(P="default"),se=O(j,k,P),!ve(se)||Et(se))return se;throw ct("Can't convert object to primitive value")}return void 0===P&&(P="number"),function(k,P){var j,se;if("string"===P&&de(j=k.toString)&&!ve(se=O(j,k))||de(j=k.valueOf)&&!ve(se=O(j,k))||"string"!==P&&de(j=k.toString)&&!ve(se=O(j,k)))return se;throw Yt("Can't convert object to primitive value")}(k,P)},_t=function(k){var P=dt(k,"string");return Et(P)?P:P+""},Ot=h.document,Vt=ve(Ot)&&ve(Ot.createElement),di=function(k){return Vt?Ot.createElement(k):{}},gn=!b&&!_(function(){return 7!=Object.defineProperty(di("div"),"a",{get:function(){return 7}}).a}),lo=Object.getOwnPropertyDescriptor,rr={f:b?lo:function(P,j){if(P=Re(P),j=_t(j),gn)try{return lo(P,j)}catch(se){}if(Si(P,j))return Y(!O(Q.f,P,j),P[j])}},Pa=h.String,Dn=h.TypeError,Un=function(k){if(ve(k))return k;throw Dn(Pa(k)+" is not an object")},co=h.TypeError,Pd=Object.defineProperty,ta={f:b?Pd:function(P,j,se){if(Un(P),j=_t(j),Un(se),gn)try{return Pd(P,j,se)}catch(pe){}if("get"in se||"set"in se)throw co("Accessors not supported");return"value"in se&&(P[j]=se.value),P}},ia=b?function(k,P,j){return ta.f(k,P,Y(1,j))}:function(k,P,j){return k[P]=j,k},pu=oe(Function.toString);de(Me.inspectSource)||(Me.inspectSource=function(k){return pu(k)});var lc,fl,On,na=Me.inspectSource,fu=h.WeakMap,Fd=de(fu)&&/native code/.test(na(fu)),gu=Xt("keys"),Bd=function(k){return gu[k]||(gu[k]=lt(k))},ac={},Vd="Object already initialized",mu=h.TypeError;if(Fd||Me.state){var qo=Me.state||(Me.state=new(0,h.WeakMap)),_u=oe(qo.get),en=oe(qo.has),vu=oe(qo.set);lc=function(k,P){if(en(qo,k))throw new mu(Vd);return P.facade=k,vu(qo,k,P),P},fl=function(k){return _u(qo,k)||{}},On=function(k){return en(qo,k)}}else{var ti=Bd("state");ac[ti]=!0,lc=function(k,P){if(Si(k,ti))throw new mu(Vd);return P.facade=k,ia(k,ti,P),P},fl=function(k){return Si(k,ti)?k[ti]:{}},On=function(k){return Si(k,ti)}}var La={set:lc,get:fl,has:On,enforce:function(k){return On(k)?fl(k):lc(k,{})},getterFor:function(k){return function(P){var j;if(!ve(P)||(j=fl(P)).type!==k)throw mu("Incompatible receiver, "+k+" required");return j}}},bu=Function.prototype,hi=b&&Object.getOwnPropertyDescriptor,Nt=Si(bu,"name"),ws={EXISTS:Nt,PROPER:Nt&&"something"===function(){}.name,CONFIGURABLE:Nt&&(!b||b&&hi(bu,"name").configurable)},cc=l(function(k){var P=ws.CONFIGURABLE,j=La.get,se=La.enforce,pe=String(String).split("String");(k.exports=function(we,_e,ye,Fe){var xe,Be=!!Fe&&!!Fe.unsafe,We=!!Fe&&!!Fe.enumerable,Wt=!!Fe&&!!Fe.noTargetGet,kt=Fe&&void 0!==Fe.name?Fe.name:_e;de(ye)&&("Symbol("===String(kt).slice(0,7)&&(kt="["+String(kt).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!Si(ye,"name")||P&&ye.name!==kt)&&ia(ye,"name",kt),(xe=se(ye)).source||(xe.source=pe.join("string"==typeof kt?kt:""))),we!==h?(Be?!Wt&&we[_e]&&(We=!0):delete we[_e],We?we[_e]=ye:ia(we,_e,ye)):We?we[_e]=ye:fn(_e,ye)})(Function.prototype,"toString",function(){return de(this)&&j(this).source||na(this)})}),uc=Math.ceil,li=Math.floor,Xn=function(k){var P=+k;return P!=P||0===P?0:(P>0?li:uc)(P)},Eu=Math.max,qg=Math.min,Cu=function(k,P){var j=Xn(k);return j<0?Eu(j+P,0):qg(j,P)},dc=Math.min,Tr=function(k){return k>0?dc(Xn(k),9007199254740991):0},Fa=function(k){return Tr(k.length)},Ud=function(k){return function(P,j,se){var ye,pe=Re(P),we=Fa(pe),_e=Cu(se,we);if(k&&j!=j){for(;we>_e;)if((ye=pe[_e++])!=ye)return!0}else for(;we>_e;_e++)if((k||_e in pe)&&pe[_e]===j)return k||_e||0;return!k&&-1}},Hp={includes:Ud(!0),indexOf:Ud(!1)},es=Hp.indexOf,Up=oe([].push),Gd=function(k,P){var we,j=Re(k),se=0,pe=[];for(we in j)!Si(ac,we)&&Si(j,we)&&Up(pe,we);for(;P.length>se;)Si(j,we=P[se++])&&(~es(pe,we)||Up(pe,we));return pe},Tu=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],em=Tu.concat("length","prototype"),jp={f:Object.getOwnPropertyNames||function(P){return Gd(P,em)}},zp={f:Object.getOwnPropertySymbols},Qr=oe([].concat),mn=Se("Reflect","ownKeys")||function(P){var j=jp.f(Un(P)),se=zp.f;return se?Qr(j,se(P)):j},jd=function(k,P){for(var j=mn(P),se=ta.f,pe=rr.f,we=0;we<j.length;we++){var _e=j[we];Si(k,_e)||se(k,_e,pe(P,_e))}},ra=/#|\.prototype\./,oa=function(k,P){var j=Yp[rt(k)];return j==So||j!=pt&&(de(P)?_(P):!!P)},rt=oa.normalize=function(k){return String(k).replace(ra,".").toLowerCase()},Yp=oa.data={},pt=oa.NATIVE="N",So=oa.POLYFILL="P",Wd=oa,zd=rr.f,Lo=function(k,P){var _e,ye,Fe,Be,We,j=k.target,se=k.global,pe=k.stat;if(_e=se?h:pe?h[j]||fn(j,{}):(h[j]||{}).prototype)for(ye in P){if(Be=P[ye],Fe=k.noTargetGet?(We=zd(_e,ye))&&We.value:_e[ye],!Wd(se?ye:j+(pe?".":"#")+ye,k.forced)&&void 0!==Fe){if(typeof Be==typeof Fe)continue;jd(Be,Fe)}(k.sham||Fe&&Fe.sham)&&ia(Be,"sham",!0),cc(_e,ye,Be,k)}},gl={};gl[Xe("toStringTag")]="z";var rs,Ba="[object z]"===String(gl),wu=Xe("toStringTag"),Xd=h.Object,xt="Arguments"==F(function(){return arguments}()),wr=Ba?F:function(k){var P,j,se;return void 0===k?"Undefined":null===k?"Null":"string"==typeof(j=function(k,P){try{return k[P]}catch(j){}}(P=Xd(k),wu))?j:xt?F(P):"Object"==(se=F(P))&&de(P.callee)?"Arguments":se},Zr=h.String,Gn=function(k){if("Symbol"===wr(k))throw TypeError("Cannot convert a Symbol value to a string");return Zr(k)},Xp=function(){var k=Un(this),P="";return k.global&&(P+="g"),k.ignoreCase&&(P+="i"),k.multiline&&(P+="m"),k.dotAll&&(P+="s"),k.unicode&&(P+="u"),k.sticky&&(P+="y"),P},is=h.RegExp,qr=_(function(){var k=is("a","y");return k.lastIndex=2,null!=k.exec("abcd")}),tm=_(function(){var k=is("^r","gy");return k.lastIndex=2,null!=k.exec("str")}),Su={UNSUPPORTED_Y:qr,BROKEN_CARET:tm},or=Object.keys||function(P){return Gd(P,Tu)},Va=b?Object.defineProperties:function(P,j){Un(P);for(var ye,se=Re(j),pe=or(j),we=pe.length,_e=0;we>_e;)ta.f(P,ye=pe[_e++],se[ye]);return P},$p=Se("document","documentElement"),Ni="prototype",Ru="script",Ss=Bd("IE_PROTO"),ns=function(){},Vi=function(k){return"<script>"+k+"</"+Ru+">"},sa=function(k){k.write(Vi("")),k.close();var P=k.parentWindow.Object;return k=null,P},aa=function(){try{rs=new ActiveXObject("htmlfile")}catch(P){}aa="undefined"!=typeof document?document.domain&&rs?sa(rs):function(){var j,k=di("iframe");return k.style.display="none",$p.appendChild(k),k.src=String("javascript:"),(j=k.contentWindow.document).open(),j.write(Vi("document.F=Object")),j.close(),j.F}():sa(rs);for(var k=Tu.length;k--;)delete aa[Ni][Tu[k]];return aa()};ac[Ss]=!0;var Fo=Object.create||function(P,j){var se;return null!==P?(ns[Ni]=Un(P),se=new ns,ns[Ni]=null,se[Ss]=P):se=aa(),void 0===j?se:Va(se,j)},ml=h.RegExp,Kp=_(function(){var k=ml(".","s");return!(k.dotAll&&k.exec("\n")&&"s"===k.flags)}),Qt=h.RegExp,Jp=_(function(){var k=Qt("(?<a>b)","g");return"b"!==k.exec("b").groups.a||"bc"!=="b".replace(k,"$<a>c")}),Mu=La.get,$d=Xt("native-string-replace",String.prototype.replace),_l=RegExp.prototype.exec,bt=_l,Qp=oe("".charAt),la=oe("".indexOf),Ge=oe("".replace),pr=oe("".slice),sr=function(){var k=/a/,P=/b*/g;return O(_l,k,"a"),O(_l,P,"a"),0!==k.lastIndex||0!==P.lastIndex}(),os=Su.UNSUPPORTED_Y||Su.BROKEN_CARET,ss=void 0!==/()??/.exec("")[1];(sr||ss||os||Kp||Jp)&&(bt=function(P){var _e,ye,Fe,Be,We,Wt,kt,j=this,se=Mu(j),pe=Gn(P),we=se.raw;if(we)return we.lastIndex=j.lastIndex,_e=O(bt,we,pe),j.lastIndex=we.lastIndex,_e;var xe=se.groups,zn=os&&j.sticky,ln=O(Xp,j),sn=j.source,Mn=0,$n=pe;if(zn&&(ln=Ge(ln,"y",""),-1===la(ln,"g")&&(ln+="g"),$n=pr(pe,j.lastIndex),j.lastIndex>0&&(!j.multiline||j.multiline&&"\n"!==Qp(pe,j.lastIndex-1))&&(sn="(?: "+sn+")",$n=" "+$n,Mn++),ye=new RegExp("^(?:"+sn+")",ln)),ss&&(ye=new RegExp("^"+sn+"$(?!\\s)",ln)),sr&&(Fe=j.lastIndex),Be=O(_l,zn?ye:j,$n),zn?Be?(Be.input=pr(Be.input,Mn),Be[0]=pr(Be[0],Mn),Be.index=j.lastIndex,j.lastIndex+=Be[0].length):j.lastIndex=0:sr&&Be&&(j.lastIndex=j.global?Be.index+Be[0].length:Fe),ss&&Be&&Be.length>1&&O($d,Be[0],ye,function(){for(We=1;We<arguments.length-2;We++)void 0===arguments[We]&&(Be[We]=void 0)}),Be&&xe)for(Be.groups=Wt=Fo(null),We=0;We<xe.length;We++)Wt[(kt=xe[We])[0]]=Be[kt[1]];return Be});var fr=bt;Lo({target:"RegExp",proto:!0,forced:/./.exec!==fr},{exec:fr});var ft=Xe("species"),_i=RegExp.prototype,an=function(k,P,j,se){var pe=Xe(k),we=!_(function(){var Be={};return Be[pe]=function(){return 7},7!=""[k](Be)}),_e=we&&!_(function(){var Be=!1,We=/a/;return"split"===k&&((We={}).constructor={},We.constructor[ft]=function(){return We},We.flags="",We[pe]=/./[pe]),We.exec=function(){return Be=!0,null},We[pe](""),!Be});if(!we||!_e||j){var ye=oe(/./[pe]),Fe=P(pe,""[k],function(Be,We,Wt,kt,xe){var zn=oe(Be),ln=We.exec;return ln===fr||ln===_i.exec?we&&!xe?{done:!0,value:ye(We,Wt,kt)}:{done:!0,value:zn(Wt,We,kt)}:{done:!1}});cc(String.prototype,k,Fe[0]),cc(_i,pe,Fe[1])}se&&ia(_i[pe],"sham",!0)},eo=oe("".charAt),ho=oe("".charCodeAt),ar=oe("".slice),Ds=function(k){return function(P,j){var _e,ye,se=Gn(re(P)),pe=Xn(j),we=se.length;return pe<0||pe>=we?k?"":void 0:(_e=ho(se,pe))<55296||_e>56319||pe+1===we||(ye=ho(se,pe+1))<56320||ye>57343?k?eo(se,pe):_e:k?ar(se,pe,pe+2):ye-56320+(_e-55296<<10)+65536}},vl=(Ds(!1),Ds(!0)),Bo=function(k,P,j){return P+(j?vl(k,P).length:1)},vi=h.TypeError,Rs=function(k,P){var j=k.exec;if(de(j)){var se=O(j,k,P);return null!==se&&Un(se),se}if("RegExp"===F(k))return O(fr,k,P);throw vi("RegExp#exec called on incompatible receiver")};an("match",function(k,P,j){return[function(pe){var we=re(this),_e=null==pe?void 0:rn(pe,k);return _e?O(_e,pe,we):new RegExp(pe)[k](Gn(we))},function(se){var pe=Un(this),we=Gn(se),_e=j(P,pe,we);if(_e.done)return _e.value;if(!pe.global)return Rs(pe,we);var ye=pe.unicode;pe.lastIndex=0;for(var We,Fe=[],Be=0;null!==(We=Rs(pe,we));){var Wt=Gn(We[0]);Fe[Be]=Wt,""===Wt&&(pe.lastIndex=Bo(we,Tr(pe.lastIndex),ye)),Be++}return 0===Be?null:Fe}]});var Vo=Array.isArray||function(P){return"Array"==F(P)},Ha=function(k,P,j){var se=_t(P);se in k?ta.f(k,se,Y(0,j)):k[se]=j},Ms=function(){},Gr=[],as=Se("Reflect","construct"),Is=/^\s*(?:class|function)\b/,Do=oe(Is.exec),_n=!Is.exec(Ms),bl=function(k){if(!de(k))return!1;try{return as(Ms,Gr,k),!0}catch(P){return!1}},ca=!as||_(function(){var k;return bl(bl.call)||!bl(Object)||!bl(function(){k=!0})||k})?function(k){if(!de(k))return!1;switch(wr(k)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return _n||!!Do(Is,na(k))}:bl,Iu=Xe("species"),ua=h.Array,Ho=function(k,P){return new(function(k){var P;return Vo(k)&&(ca(P=k.constructor)&&(P===ua||Vo(P.prototype))||ve(P)&&null===(P=P[Iu]))&&(P=void 0),void 0===P?ua:P}(k))(0===P?0:P)},Ji=Xe("species"),pc=function(k){return At>=51||!_(function(){var P=[];return(P.constructor={})[Ji]=function(){return{foo:1}},1!==P[k](Boolean).foo})},Ro=Xe("isConcatSpreadable"),po=9007199254740991,fc="Maximum allowed index exceeded",yl=h.TypeError,xs=At>=51||!_(function(){var k=[];return k[Ro]=!1,k.concat()[0]!==k}),Mo=pc("concat"),Jd=function(k){if(!ve(k))return!1;var P=k[Ro];return void 0!==P?!!P:Vo(k)};Lo({target:"Array",proto:!0,forced:!xs||!Mo},{concat:function(P){var we,_e,ye,Fe,Be,j=ai(this),se=Ho(j,0),pe=0;for(we=-1,ye=arguments.length;we<ye;we++)if(Jd(Be=-1===we?j:arguments[we])){if(pe+(Fe=Fa(Be))>po)throw yl(fc);for(_e=0;_e<Fe;_e++,pe++)_e in Be&&Ha(se,pe,Be[_e])}else{if(pe>=po)throw yl(fc);Ha(se,pe++,Be)}return se.length=pe,se}}),Ba||cc(Object.prototype,"toString",Ba?{}.toString:function(){return"[object "+wr(this)+"]"},{unsafe:!0});var gc=ws.PROPER,Ua="toString",xu=RegExp.prototype,Zd=xu[Ua],im=oe(Xp);(_(function(){return"/a/b"!=Zd.call({source:"a",flags:"b"})})||gc&&Zd.name!=Ua)&&cc(RegExp.prototype,Ua,function(){var P=Un(this),j=Gn(P.source),se=P.flags;return"/"+j+"/"+Gn(void 0===se&&Te(xu,P)&&!("flags"in xu)?im(P):se)},{unsafe:!0});var Au=Function.prototype,qd=Au.apply,th=Au.call,ih="object"==typeof Reflect&&Reflect.apply||(Au.bind?th.bind(qd):function(){return th.apply(qd,arguments)}),El=Xe("match"),qp=function(k){var P;return ve(k)&&(void 0!==(P=k[El])?!!P:"RegExp"==F(k))},rm=h.TypeError,_c=Xe("species"),om=function(k,P){var se,j=Un(k).constructor;return void 0===j||null==(se=Un(j)[_c])?P:function(k){if(ca(k))return k;throw rm(mt(k)+" is not a constructor")}(se)},Cl=oe([].slice),Tl=Su.UNSUPPORTED_Y,As=4294967295,ku=Math.min,vn=[].push,nh=oe(/./.exec),da=oe(vn),to=oe("".slice),rh=!_(function(){var k=/(?:)/,P=k.exec;k.exec=function(){return P.apply(this,arguments)};var j="ab".split(k);return 2!==j.length||"a"!==j[0]||"b"!==j[1]});function io(k,P){if(k instanceof SVGElement){var j=k.getAttribute("class")||"";j.match(P)||k.setAttribute("class","".concat(j," ").concat(P))}else void 0!==k.classList?S(P.split(" "),function(pe){k.classList.add(pe)}):k.className.match(P)||(k.className+=" ".concat(P))}function Nu(k,P){var j="";return k.currentStyle?j=k.currentStyle[P]:document.defaultView&&document.defaultView.getComputedStyle&&(j=document.defaultView.getComputedStyle(k,null).getPropertyValue(P)),j&&j.toLowerCase?j.toLowerCase():j}function Pr(k){var P=k.element;if(this._options.scrollToElement){var j=function(k){var P=window.getComputedStyle(k),j="absolute"===P.position,se=/(auto|scroll)/;if("fixed"===P.position)return document.body;for(var pe=k;pe=pe.parentElement;)if(P=window.getComputedStyle(pe),(!j||"static"!==P.position)&&se.test(P.overflow+P.overflowY+P.overflowX))return pe;return document.body}(P);j!==document.body&&(j.scrollTop=P.offsetTop-j.offsetTop)}}function vc(){if(void 0!==window.innerWidth)return{width:window.innerWidth,height:window.innerHeight};var k=document.documentElement;return{width:k.clientWidth,height:k.clientHeight}}function bc(k,P,j){var pe,se=P.element;if("off"!==k&&this._options.scrollToElement&&(pe="tooltip"===k?j.getBoundingClientRect():se.getBoundingClientRect(),!function(k){var P=k.getBoundingClientRect();return P.top>=0&&P.left>=0&&P.bottom+80<=window.innerHeight&&P.right<=window.innerWidth}(se))){var we=vc().height;pe.bottom-(pe.bottom-pe.top)<0||se.clientHeight>we?window.scrollBy(0,pe.top-(we/2-pe.height/2)-this._options.scrollPadding):window.scrollBy(0,pe.top-(we/2-pe.height/2)+this._options.scrollPadding)}}function wl(k){k.setAttribute("role","button"),k.tabIndex=0}an("split",function(k,P,j){var se;return se="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(pe,we){var _e=Gn(re(this)),ye=void 0===we?As:we>>>0;if(0===ye)return[];if(void 0===pe)return[_e];if(!qp(pe))return O(P,_e,pe,ye);for(var kt,xe,zn,Fe=[],We=0,Wt=new RegExp(pe.source,(pe.ignoreCase?"i":"")+(pe.multiline?"m":"")+(pe.unicode?"u":"")+(pe.sticky?"y":"")+"g");(kt=O(fr,Wt,_e))&&!((xe=Wt.lastIndex)>We&&(da(Fe,to(_e,We,kt.index)),kt.length>1&&kt.index<_e.length&&ih(vn,Fe,Cl(kt,1)),zn=kt[0].length,We=xe,Fe.length>=ye));)Wt.lastIndex===kt.index&&Wt.lastIndex++;return We===_e.length?(zn||!nh(Wt,""))&&da(Fe,""):da(Fe,to(_e,We)),Fe.length>ye?Cl(Fe,0,ye):Fe}:"0".split(void 0,0).length?function(pe,we){return void 0===pe&&0===we?[]:O(P,this,pe,we)}:P,[function(we,_e){var ye=re(this),Fe=null==we?void 0:rn(we,k);return Fe?O(Fe,we,ye,_e):O(se,Gn(ye),we,_e)},function(pe,we){var _e=Un(this),ye=Gn(pe),Fe=j(se,_e,ye,we,se!==P);if(Fe.done)return Fe.value;var Be=om(_e,RegExp),We=_e.unicode,kt=new Be(Tl?"^(?:"+_e.source+")":_e,(_e.ignoreCase?"i":"")+(_e.multiline?"m":"")+(_e.unicode?"u":"")+(Tl?"g":"y")),xe=void 0===we?As:we>>>0;if(0===xe)return[];if(0===ye.length)return null===Rs(kt,ye)?[ye]:[];for(var zn=0,ln=0,sn=[];ln<ye.length;){kt.lastIndex=Tl?0:ln;var $n,Mn=Rs(kt,Tl?to(ye,ln):ye);if(null===Mn||($n=ku(Tr(kt.lastIndex+(Tl?ln:0)),ye.length))===zn)ln=Bo(ye,ln,We);else{if(da(sn,to(ye,zn,ln)),sn.length===xe)return sn;for(var Qn=1;Qn<=Mn.length-1;Qn++)if(da(sn,Mn[Qn]),sn.length===xe)return sn;ln=zn=$n}}return da(sn,to(ye,zn)),sn}]},!rh,Tl);var Os=Object.assign,tf=Object.defineProperty,Nn=oe([].concat),Lu=!Os||_(function(){if(b&&1!==Os({b:1},Os(tf({},"a",{enumerable:!0,get:function(){tf(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var k={},P={},j=Symbol(),se="abcdefghijklmnopqrst";return k[j]=7,se.split("").forEach(function(pe){P[pe]=pe}),7!=Os({},k)[j]||or(Os({},P)).join("")!=se})?function(P,j){for(var se=ai(P),pe=arguments.length,we=1,_e=zp.f,ye=Q.f;pe>we;)for(var kt,Fe=ie(arguments[we++]),Be=_e?Nn(or(Fe),_e(Fe)):or(Fe),We=Be.length,Wt=0;We>Wt;)kt=Be[Wt++],(!b||O(ye,Fe,kt))&&(se[kt]=Fe[kt]);return se}:Os;function yc(k){var P=k.parentNode;return!(!P||"HTML"===P.nodeName)&&("fixed"===Nu(k,"position")||yc(P))}function Tn(k,P){var j=document.body,se=document.documentElement,pe=window.pageYOffset||se.scrollTop||j.scrollTop,we=window.pageXOffset||se.scrollLeft||j.scrollLeft;P=P||j;var _e=k.getBoundingClientRect(),ye=P.getBoundingClientRect(),Fe=Nu(P,"position"),Be={width:_e.width,height:_e.height};return"body"!==P.tagName.toLowerCase()&&"relative"===Fe||"sticky"===Fe?Object.assign(Be,{top:_e.top-ye.top,left:_e.left-ye.left}):yc(k)?Object.assign(Be,{top:_e.top,left:_e.left}):Object.assign(Be,{top:_e.top+pe,left:_e.left+we})}Lo({target:"Object",stat:!0,forced:Object.assign!==Lu},{assign:Lu});var nf=Math.floor,sh=oe("".charAt),Ec=oe("".replace),jr=oe("".slice),rf=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,Cc=/\$([$&'`]|\d{1,2})/g,Ga=function(k,P,j,se,pe,we){var _e=j+k.length,ye=se.length,Fe=Cc;return void 0!==pe&&(pe=ai(pe),Fe=rf),Ec(we,Fe,function(Be,We){var Wt;switch(sh(We,0)){case"$":return"$";case"&":return k;case"`":return jr(P,0,j);case"'":return jr(P,_e);case"<":Wt=pe[jr(We,1,-1)];break;default:var kt=+We;if(0===kt)return Be;if(kt>ye){var xe=nf(kt/10);return 0===xe?Be:xe<=ye?void 0===se[xe-1]?sh(We,1):se[xe-1]+sh(We,1):Be}Wt=se[kt-1]}return void 0===Wt?"":Wt})},Sr=Xe("replace"),Sl=Math.max,Tc=Math.min,sf=oe([].concat),Uo=oe([].push),Fu=oe("".indexOf),Go=oe("".slice),Zt=function(k){return void 0===k?k:String(k)},jo="$0"==="a".replace(/./,"$0"),ah=!!/./[Sr]&&""===/./[Sr]("a","$0"),af=!_(function(){var k=/./;return k.exec=function(){var P=[];return P.groups={a:"7"},P},"7"!=="".replace(k,"$<a>")});function ks(k,P){if(k instanceof SVGElement){var j=k.getAttribute("class")||"";k.setAttribute("class",j.replace(P,"").replace(/^\s+|\s+$/g,""))}else k.className=k.className.replace(P,"").replace(/^\s+|\s+$/g,"")}function Io(k,P){var j="";if(k.style.cssText&&(j+=k.style.cssText),"string"==typeof P)j+=P;else for(var se in P)j+="".concat(se,":").concat(P[se],";");k.style.cssText=j}function ls(k){if(k){if(!this._introItems[this._currentStep])return;var P=this._introItems[this._currentStep],j=Tn(P.element,this._targetElement),se=this._options.helperElementPadding;yc(P.element)?io(k,"introjs-fixedTooltip"):ks(k,"introjs-fixedTooltip"),"floating"===P.position&&(se=0),Io(k,{width:"".concat(j.width+se,"px"),height:"".concat(j.height+se,"px"),top:"".concat(j.top-se/2,"px"),left:"".concat(j.left-se/2,"px")})}}an("replace",function(k,P,j){var se=ah?"$":"$0";return[function(we,_e){var ye=re(this),Fe=null==we?void 0:rn(we,Sr);return Fe?O(Fe,we,ye,_e):O(P,Gn(ye),we,_e)},function(pe,we){var _e=Un(this),ye=Gn(pe);if("string"==typeof we&&-1===Fu(we,se)&&-1===Fu(we,"$<")){var Fe=j(P,_e,ye,we);if(Fe.done)return Fe.value}var Be=de(we);Be||(we=Gn(we));var We=_e.global;if(We){var Wt=_e.unicode;_e.lastIndex=0}for(var kt=[];;){var xe=Rs(_e,ye);if(null===xe||(Uo(kt,xe),!We))break;""===Gn(xe[0])&&(_e.lastIndex=Bo(ye,Tr(_e.lastIndex),Wt))}for(var ln="",sn=0,Mn=0;Mn<kt.length;Mn++){for(var $n=Gn((xe=kt[Mn])[0]),Qn=Sl(Tc(Xn(xe.index),ye.length),0),fs=[],cr=1;cr<xe.length;cr++)Uo(fs,Zt(xe[cr]));var Wr=xe.groups;if(Be){var wn=sf([$n],fs,Qn,ye);void 0!==Wr&&Uo(wn,Wr);var Pc=Gn(ih(we,void 0,wn))}else Pc=Ga($n,ye,Qn,fs,Wr,we);Qn>=sn&&(ln+=Go(ye,sn,Qn)+Pc,sn=Qn+$n.length)}return ln+Go(ye,sn)}]},!af||!jo||ah);var Bu=Xe("unscopables"),Je=Array.prototype;null==Je[Bu]&&ta.f(Je,Bu,{configurable:!0,value:Fo(null)});var cs=Hp.includes;Lo({target:"Array",proto:!0},{includes:function(P){return cs(this,P,arguments.length>1?arguments[1]:void 0)}}),function(k){Je[Bu][k]=!0}("includes");var Wn=pc("slice"),Dl=Xe("species"),us=h.Array,Wo=Math.max;Lo({target:"Array",proto:!0,forced:!Wn},{slice:function(P,j){var ye,Fe,Be,se=Re(this),pe=Fa(se),we=Cu(P,pe),_e=Cu(void 0===j?pe:j,pe);if(Vo(se)&&((ca(ye=se.constructor)&&(ye===us||Vo(ye.prototype))||ve(ye)&&null===(ye=ye[Dl]))&&(ye=void 0),ye===us||void 0===ye))return Cl(se,we,_e);for(Fe=new(void 0===ye?us:ye)(Wo(_e-we,0)),Be=0;we<_e;we++,Be++)we in se&&Ha(Fe,Be,se[we]);return Fe.length=Be,Fe}});var Vu=h.TypeError,wc=function(k){if(qp(k))throw Vu("The method doesn't accept regular expressions");return k},sm=Xe("match"),ja=oe("".indexOf);Lo({target:"String",proto:!0,forced:!function(k){var P=/./;try{"/./"[k](P)}catch(j){try{return P[sm]=!1,"/./"[k](P)}catch(se){}}return!1}("includes")},{includes:function(P){return!!~ja(Gn(re(this)),Gn(wc(P)),arguments.length>1?arguments[1]:void 0)}});var Wa=function(k,P){var j=[][k];return!!j&&_(function(){j.call(null,P||function(){throw 1},1)})},Lr=oe([].join),ds=ie!=Object,Hu=Wa("join",",");Lo({target:"Array",proto:!0,forced:ds||!Hu},{join:function(P){return Lr(Re(this),void 0===P?",":P)}});var Ns=oe(oe.bind),Uu=oe([].push),zo=function(k){var P=1==k,j=2==k,se=3==k,pe=4==k,we=6==k,_e=7==k,ye=5==k||we;return function(Fe,Be,We,Wt){for(var Qn,fs,kt=ai(Fe),xe=ie(kt),zn=function(k,P){return ze(k),void 0===P?k:Ns?Ns(k,P):function(){return k.apply(P,arguments)}}(Be,We),ln=Fa(xe),sn=0,Mn=Wt||Ho,$n=P?Mn(Fe,ln):j||_e?Mn(Fe,0):void 0;ln>sn;sn++)if((ye||sn in xe)&&(fs=zn(Qn=xe[sn],sn,kt),k))if(P)$n[sn]=fs;else if(fs)switch(k){case 3:return!0;case 5:return Qn;case 6:return sn;case 2:Uu($n,Qn)}else switch(k){case 4:return!1;case 7:Uu($n,Qn)}return we?-1:se||pe?pe:$n}},ch=[zo(0),zo(1),zo(2),zo(3),zo(4),zo(5),zo(6),zo(7)][2];function ha(k,P,j,se,pe){return k.left+P+j.width>se.width?(pe.style.left="".concat(se.width-j.width-k.left,"px"),!1):(pe.style.left="".concat(P,"px"),!0)}function Rl(k,P,j,se){return k.left+k.width-P-j.width<0?(se.style.left="".concat(-k.left,"px"),!1):(se.style.right="".concat(P,"px"),!0)}Lo({target:"Array",proto:!0,forced:!pc("filter")},{filter:function(P){return ch(this,P,arguments.length>1?arguments[1]:void 0)}});var Gu=pc("splice"),cf=h.TypeError,Ps=Math.max,Dc=Math.min,uh=9007199254740991,dh="Maximum allowed length exceeded";function Ls(k,P){k.includes(P)&&k.splice(k.indexOf(P),1)}function za(k,P,j){var se=this._options.positionPrecedence.slice(),pe=vc(),we=Tn(P).height+10,_e=Tn(P).width+20,ye=k.getBoundingClientRect(),Fe="floating";ye.bottom+we>pe.height&&Ls(se,"bottom"),ye.top-we<0&&Ls(se,"top"),ye.right+_e>pe.width&&Ls(se,"right"),ye.left-_e<0&&Ls(se,"left");var We,Wt,Be=-1!==(Wt=(We=j||"").indexOf("-"))?We.substr(Wt):"";return j&&(j=j.split("-")[0]),se.length&&(Fe=se.includes(j)?j:se[0]),["top","bottom"].includes(Fe)&&(Fe+=function(k,P,j,se){var we=P/2,_e=Math.min(j.width,window.screen.width),ye=["-left-aligned","-middle-aligned","-right-aligned"];return _e-k<P&&Ls(ye,"-left-aligned"),(k<we||_e-k<we)&&Ls(ye,"-middle-aligned"),k<P&&Ls(ye,"-right-aligned"),ye.length?ye.includes(se)?se:ye[0]:"-middle-aligned"}(ye.left,_e,pe,Be)),Fe}function Dr(k,P,j,se){var we,_e,ye,Fe,Be;if(se=se||!1,P.style.top=null,P.style.right=null,P.style.bottom=null,P.style.left=null,P.style.marginLeft=null,P.style.marginTop=null,j.style.display="inherit",this._introItems[this._currentStep])switch(P.className=["introjs-tooltip","string"==typeof(we=this._introItems[this._currentStep]).tooltipClass?we.tooltipClass:this._options.tooltipClass].filter(Boolean).join(" "),P.setAttribute("role","dialog"),"floating"!==(Be=this._introItems[this._currentStep].position)&&this._options.autoPosition&&(Be=za.call(this,k,P,Be)),ye=Tn(k),_e=Tn(P),Fe=vc(),io(P,"introjs-".concat(Be)),Be){case"top-right-aligned":j.className="introjs-arrow bottom-right";var Wt=0;Rl(ye,Wt,_e,P),P.style.bottom="".concat(ye.height+20,"px");break;case"top-middle-aligned":j.className="introjs-arrow bottom-middle";var kt=ye.width/2-_e.width/2;se&&(kt+=5),Rl(ye,kt,_e,P)&&(P.style.right=null,ha(ye,kt,_e,Fe,P)),P.style.bottom="".concat(ye.height+20,"px");break;case"top-left-aligned":case"top":j.className="introjs-arrow bottom",ha(ye,se?0:15,_e,Fe,P),P.style.bottom="".concat(ye.height+20,"px");break;case"right":P.style.left="".concat(ye.width+20,"px"),ye.top+_e.height>Fe.height?(j.className="introjs-arrow left-bottom",P.style.top="-".concat(_e.height-ye.height-20,"px")):j.className="introjs-arrow left";break;case"left":!se&&!0===this._options.showStepNumbers&&(P.style.top="15px"),ye.top+_e.height>Fe.height?(P.style.top="-".concat(_e.height-ye.height-20,"px"),j.className="introjs-arrow right-bottom"):j.className="introjs-arrow right",P.style.right="".concat(ye.width+20,"px");break;case"floating":j.style.display="none",P.style.left="50%",P.style.top="50%",P.style.marginLeft="-".concat(_e.width/2,"px"),P.style.marginTop="-".concat(_e.height/2,"px");break;case"bottom-right-aligned":j.className="introjs-arrow top-right",Rl(ye,Wt=0,_e,P),P.style.top="".concat(ye.height+20,"px");break;case"bottom-middle-aligned":j.className="introjs-arrow top-middle",kt=ye.width/2-_e.width/2,se&&(kt+=5),Rl(ye,kt,_e,P)&&(P.style.right=null,ha(ye,kt,_e,Fe,P)),P.style.top="".concat(ye.height+20,"px");break;default:j.className="introjs-arrow top",ha(ye,0,_e,Fe,P),P.style.top="".concat(ye.height+20,"px")}}function Rc(){S(document.querySelectorAll(".introjs-showElement"),function(P){ks(P,/introjs-[a-zA-Z]+/g)})}function jt(k,P){var j=document.createElement(k);P=P||{};var se=/^(?:role|data-|aria-)/;for(var pe in P){var we=P[pe];"style"===pe?Io(j,we):pe.match(se)?j.setAttribute(pe,we):j[pe]=we}return j}function Yo(k,P,j){if(j){var se=P.style.opacity||"1";Io(P,{opacity:"0"}),window.setTimeout(function(){Io(P,{opacity:se})},10)}k.appendChild(P)}function bn(){return parseInt(this._currentStep+1,10)/this._introItems.length*100}function Il(){var k=document.querySelector(".introjs-disableInteraction");null===k&&(k=jt("div",{className:"introjs-disableInteraction"}),this._targetElement.appendChild(k)),ls.call(this,k)}function Mc(k){var P=this,j=jt("div",{className:"introjs-bullets"});!1===this._options.showBullets&&(j.style.display="none");var se=jt("ul");se.setAttribute("role","tablist");var pe=function(){P.goToStep(this.getAttribute("data-stepnumber"))};return S(this._introItems,function(we,_e){var ye=we.step,Fe=jt("li"),Be=jt("a");Fe.setAttribute("role","presentation"),Be.setAttribute("role","tab"),Be.onclick=pe,_e===k.step-1&&(Be.className="active"),wl(Be),Be.innerHTML="&nbsp;",Be.setAttribute("data-stepnumber",ye),Fe.appendChild(Be),se.appendChild(Fe)}),j.appendChild(se),j}function ju(k,P){if(this._options.showBullets){var j=document.querySelector(".introjs-bullets");j.parentNode.replaceChild(Mc.call(this,P),j)}}function hh(k,P){this._options.showBullets&&(k.querySelector(".introjs-bullets li > a.active").className="",k.querySelector('.introjs-bullets li > a[data-stepnumber="'.concat(P.step,'"]')).className="active")}function Pn(){var k=jt("div");k.className="introjs-progress",!1===this._options.showProgress&&(k.style.display="none");var P=jt("div",{className:"introjs-progressbar"});return this._options.progressBarAdditionalClass&&(P.className+=" "+this._options.progressBarAdditionalClass),P.setAttribute("role","progress"),P.setAttribute("aria-valuemin",0),P.setAttribute("aria-valuemax",100),P.setAttribute("aria-valuenow",bn.call(this)),P.style.cssText="width:".concat(bn.call(this),"%;"),k.appendChild(P),k}function ph(k){k.querySelector(".introjs-progress .introjs-progressbar").style.cssText="width:".concat(bn.call(this),"%;"),k.querySelector(".introjs-progress .introjs-progressbar").setAttribute("aria-valuenow",bn.call(this))}function Xo(k){var P=this;void 0!==this._introChangeCallback&&this._introChangeCallback.call(this,k.element);var _e,ye,Fe,j=this,se=document.querySelector(".introjs-helperLayer"),pe=document.querySelector(".introjs-tooltipReferenceLayer"),we="introjs-helperLayer";if("string"==typeof k.highlightClass&&(we+=" ".concat(k.highlightClass)),"string"==typeof this._options.highlightClass&&(we+=" ".concat(this._options.highlightClass)),null!==se&&null!==pe){var Be=pe.querySelector(".introjs-helperNumberLayer"),We=pe.querySelector(".introjs-tooltiptext"),Wt=pe.querySelector(".introjs-tooltip-title"),kt=pe.querySelector(".introjs-arrow"),xe=pe.querySelector(".introjs-tooltip");Fe=pe.querySelector(".introjs-skipbutton"),ye=pe.querySelector(".introjs-prevbutton"),_e=pe.querySelector(".introjs-nextbutton"),se.className=we,xe.style.opacity=0,xe.style.display="none",Pr.call(j,k),ls.call(j,se),ls.call(j,pe),Rc(),j._lastShowElementTimer&&window.clearTimeout(j._lastShowElementTimer),j._lastShowElementTimer=window.setTimeout(function(){null!==Be&&(Be.innerHTML="".concat(k.step," of ").concat(P._introItems.length)),We.innerHTML=k.intro,Wt.innerHTML=k.title,xe.style.display="block",Dr.call(j,k.element,xe,kt),hh.call(j,pe,k),ph.call(j,pe),xe.style.opacity=1,(null!=_e&&/introjs-donebutton/gi.test(_e.className)||null!=_e)&&_e.focus(),bc.call(j,k.scrollTo,k,We)},350)}else{var zn=jt("div",{className:we}),ln=jt("div",{className:"introjs-tooltipReferenceLayer"}),sn=jt("div",{className:"introjs-arrow"}),Mn=jt("div",{className:"introjs-tooltip"}),$n=jt("div",{className:"introjs-tooltiptext"}),Qn=jt("div",{className:"introjs-tooltip-header"}),fs=jt("h1",{className:"introjs-tooltip-title"}),cr=jt("div");Io(zn,{"box-shadow":"0 0 1px 2px rgba(33, 33, 33, 0.8), rgba(33, 33, 33, ".concat(j._options.overlayOpacity.toString(),") 0 0 0 5000px")}),Pr.call(j,k),ls.call(j,zn),ls.call(j,ln),Yo(this._targetElement,zn,!0),Yo(this._targetElement,ln),$n.innerHTML=k.intro,fs.innerHTML=k.title,cr.className="introjs-tooltipbuttons",!1===this._options.showButtons&&(cr.style.display="none"),Qn.appendChild(fs),Mn.appendChild(Qn),Mn.appendChild($n),Mn.appendChild(Mc.call(this,k)),Mn.appendChild(Pn.call(this));var Wr=jt("div");!0===this._options.showStepNumbers&&(Wr.className="introjs-helperNumberLayer",Wr.innerHTML="".concat(k.step," of ").concat(this._introItems.length),Mn.appendChild(Wr)),Mn.appendChild(sn),ln.appendChild(Mn),(_e=jt("a")).onclick=function(){j._introItems.length-1!==j._currentStep?Fr.call(j):/introjs-donebutton/gi.test(_e.className)&&("function"==typeof j._introCompleteCallback&&j._introCompleteCallback.call(j,j._currentStep,"done"),lr.call(j,j._targetElement))},wl(_e),_e.innerHTML=this._options.nextLabel,(ye=jt("a")).onclick=function(){0!==j._currentStep&&xo.call(j)},wl(ye),ye.innerHTML=this._options.prevLabel,wl(Fe=jt("a",{className:"introjs-skipbutton"})),Fe.innerHTML=this._options.skipLabel,Fe.onclick=function(){j._introItems.length-1===j._currentStep&&"function"==typeof j._introCompleteCallback&&j._introCompleteCallback.call(j,j._currentStep,"skip"),"function"==typeof j._introSkipCallback&&j._introSkipCallback.call(j),lr.call(j,j._targetElement)},Qn.appendChild(Fe),this._introItems.length>1&&cr.appendChild(ye),cr.appendChild(_e),Mn.appendChild(cr),Dr.call(j,k.element,Mn,sn),bc.call(this,k.scrollTo,k,Mn)}var wn=j._targetElement.querySelector(".introjs-disableInteraction");wn&&wn.parentNode.removeChild(wn),k.disableInteraction&&Il.call(j),0===this._currentStep&&this._introItems.length>1?(null!=_e&&(_e.className="".concat(this._options.buttonClass," introjs-nextbutton"),_e.innerHTML=this._options.nextLabel),!0===this._options.hidePrev?(null!=ye&&(ye.className="".concat(this._options.buttonClass," introjs-prevbutton introjs-hidden")),null!=_e&&io(_e,"introjs-fullbutton")):null!=ye&&(ye.className="".concat(this._options.buttonClass," introjs-prevbutton introjs-disabled"))):this._introItems.length-1===this._currentStep||1===this._introItems.length?(null!=ye&&(ye.className="".concat(this._options.buttonClass," introjs-prevbutton")),!0===this._options.hideNext?(null!=_e&&(_e.className="".concat(this._options.buttonClass," introjs-nextbutton introjs-hidden")),null!=ye&&io(ye,"introjs-fullbutton")):null!=_e&&(!0===this._options.nextToDone?(_e.innerHTML=this._options.doneLabel,io(_e,"".concat(this._options.buttonClass," introjs-nextbutton introjs-donebutton"))):_e.className="".concat(this._options.buttonClass," introjs-nextbutton introjs-disabled"))):(null!=ye&&(ye.className="".concat(this._options.buttonClass," introjs-prevbutton")),null!=_e&&(_e.className="".concat(this._options.buttonClass," introjs-nextbutton"),_e.innerHTML=this._options.nextLabel)),null!=ye&&ye.setAttribute("role","button"),null!=_e&&_e.setAttribute("role","button"),null!=Fe&&Fe.setAttribute("role","button"),null!=_e&&_e.focus(),function(k){var P=k.element;io(P,"introjs-showElement");var j=Nu(P,"position");"absolute"!==j&&"relative"!==j&&"sticky"!==j&&"fixed"!==j&&io(P,"introjs-relativePosition")}(k),void 0!==this._introAfterChangeCallback&&this._introAfterChangeCallback.call(this,k.element)}function Ic(k){this._currentStep=k-2,void 0!==this._introItems&&Fr.call(this)}function Fs(k){this._currentStepNumber=k,void 0!==this._introItems&&Fr.call(this)}function Fr(){var k=this;this._direction="forward",void 0!==this._currentStepNumber&&S(this._introItems,function(se,pe){se.step===k._currentStepNumber&&(k._currentStep=pe-1,k._currentStepNumber=void 0)}),void 0===this._currentStep?this._currentStep=0:++this._currentStep;var P=this._introItems[this._currentStep],j=!0;return void 0!==this._introBeforeChangeCallback&&(j=this._introBeforeChangeCallback.call(this,P&&P.element)),!1===j?(--this._currentStep,!1):this._introItems.length<=this._currentStep?("function"==typeof this._introCompleteCallback&&this._introCompleteCallback.call(this,this._currentStep,"end"),void lr.call(this,this._targetElement)):void Xo.call(this,P)}function xo(){if(this._direction="backward",0===this._currentStep)return!1;--this._currentStep;var k=this._introItems[this._currentStep],P=!0;if(void 0!==this._introBeforeChangeCallback&&(P=this._introBeforeChangeCallback.call(this,k&&k.element)),!1===P)return++this._currentStep,!1;Xo.call(this,k)}function uf(){return this._currentStep}function fo(k){var P=void 0===k.code?k.which:k.code;if(null===P&&(P=null===k.charCode?k.keyCode:k.charCode),"Escape"!==P&&27!==P||!0!==this._options.exitOnEsc){if("ArrowLeft"===P||37===P)xo.call(this);else if("ArrowRight"===P||39===P)Fr.call(this);else if("Enter"===P||"NumpadEnter"===P||13===P){var j=k.target||k.srcElement;j&&j.className.match("introjs-prevbutton")?xo.call(this):j&&j.className.match("introjs-skipbutton")?(this._introItems.length-1===this._currentStep&&"function"==typeof this._introCompleteCallback&&this._introCompleteCallback.call(this,this._currentStep,"skip"),lr.call(this,this._targetElement)):j&&j.getAttribute("data-stepnumber")?j.click():Fr.call(this),k.preventDefault?k.preventDefault():k.returnValue=!1}}else lr.call(this,this._targetElement)}function Bs(k){if(null===k||"object"!==I(k)||void 0!==k.nodeType)return k;var P={};for(var j in k)P[j]=void 0!==window.jQuery&&k[j]instanceof window.jQuery?k[j]:Bs(k[j]);return P}function Vs(k){var P=document.querySelector(".introjs-hints");return P?P.querySelectorAll(k):[]}function pa(k){var P=Vs('.introjs-hint[data-step="'.concat(k,'"]'))[0];fa.call(this),P&&io(P,"introjs-hidehint"),void 0!==this._hintCloseCallback&&this._hintCloseCallback.call(this,k)}function Wu(){var k=this;S(Vs(".introjs-hint"),function(j){pa.call(k,j.getAttribute("data-step"))})}function df(){var k=this,P=Vs(".introjs-hint");P&&P.length?S(P,function(j){fh.call(k,j.getAttribute("data-step"))}):gh.call(this,this._targetElement)}function fh(k){var P=Vs('.introjs-hint[data-step="'.concat(k,'"]'))[0];P&&ks(P,/introjs-hidehint/g)}function am(){var k=this;S(Vs(".introjs-hint"),function(j){hf.call(k,j.getAttribute("data-step"))}),s.off(document,"click",fa,this,!1),s.off(window,"resize",Ol,this,!0),this._hintsAutoRefreshFunction&&s.off(window,"scroll",this._hintsAutoRefreshFunction,this,!0)}function hf(k){var P=Vs('.introjs-hint[data-step="'.concat(k,'"]'))[0];P&&P.parentNode.removeChild(P)}function xc(){var k=this,P=this,j=document.querySelector(".introjs-hints");null===j&&(j=jt("div",{className:"introjs-hints"}));S(this._introItems,function(pe,we){if(!document.querySelector('.introjs-hint[data-step="'.concat(we,'"]'))){var _e=jt("a",{className:"introjs-hint"});wl(_e),_e.onclick=function(we){return function(_e){var ye=_e||window.event;ye.stopPropagation&&ye.stopPropagation(),null!==ye.cancelBubble&&(ye.cancelBubble=!0),Ya.call(P,we)}}(we),pe.hintAnimation||io(_e,"introjs-hint-no-anim"),yc(pe.element)&&io(_e,"introjs-fixedhint");var ye=jt("div",{className:"introjs-hint-dot"}),Fe=jt("div",{className:"introjs-hint-pulse"});_e.appendChild(ye),_e.appendChild(Fe),_e.setAttribute("data-step",we),pe.targetElement=pe.element,pe.element=_e,Al.call(k,pe.hintPosition,_e,pe.targetElement),j.appendChild(_e)}}),document.body.appendChild(j),void 0!==this._hintsAddedCallback&&this._hintsAddedCallback.call(this),this._options.hintAutoRefreshInterval>=0&&(this._hintsAutoRefreshFunction=function(k,P){var se,j=this;return function(){for(var pe=arguments.length,we=new Array(pe),_e=0;_e<pe;_e++)we[_e]=arguments[_e];clearTimeout(se),se=setTimeout(function(){k.apply(j,we)},P)}}(function(){return Ol.call(k)},this._options.hintAutoRefreshInterval),s.on(window,"scroll",this._hintsAutoRefreshFunction,this,!0))}function Al(k,P,j){var se=P.style,pe=Tn.call(this,j);switch(k){default:se.left="".concat(pe.left,"px"),se.top="".concat(pe.top,"px");break;case"top-right":se.left="".concat(pe.left+pe.width-20,"px"),se.top="".concat(pe.top,"px");break;case"bottom-left":se.left="".concat(pe.left,"px"),se.top="".concat(pe.top+pe.height-20,"px");break;case"bottom-right":se.left="".concat(pe.left+pe.width-20,"px"),se.top="".concat(pe.top+pe.height-20,"px");break;case"middle-left":se.left="".concat(pe.left,"px"),se.top="".concat(pe.top+(pe.height-20)/2,"px");break;case"middle-right":se.left="".concat(pe.left+pe.width-20,"px"),se.top="".concat(pe.top+(pe.height-20)/2,"px");break;case"middle-middle":se.left="".concat(pe.left+(pe.width-20)/2,"px"),se.top="".concat(pe.top+(pe.height-20)/2,"px");break;case"bottom-middle":se.left="".concat(pe.left+(pe.width-20)/2,"px"),se.top="".concat(pe.top+pe.height-20,"px");break;case"top-middle":se.left="".concat(pe.left+(pe.width-20)/2,"px"),se.top="".concat(pe.top,"px")}}function Ya(k){var P=document.querySelector('.introjs-hint[data-step="'.concat(k,'"]')),j=this._introItems[k];void 0!==this._hintClickCallback&&this._hintClickCallback.call(this,P,j,k);var se=fa.call(this);if(parseInt(se,10)!==k){var pe=jt("div",{className:"introjs-tooltip"}),we=jt("div"),_e=jt("div"),ye=jt("div");pe.onclick=function(We){We.stopPropagation?We.stopPropagation():We.cancelBubble=!0},we.className="introjs-tooltiptext";var Fe=jt("p");if(Fe.innerHTML=j.hint,we.appendChild(Fe),this._options.hintShowButton){var Be=jt("a");Be.className=this._options.buttonClass,Be.setAttribute("role","button"),Be.innerHTML=this._options.hintButtonLabel,Be.onclick=pa.bind(this,k),we.appendChild(Be)}_e.className="introjs-arrow",pe.appendChild(_e),pe.appendChild(we),this._currentStep=P.getAttribute("data-step"),ye.className="introjs-tooltipReferenceLayer introjs-hintReference",ye.setAttribute("data-step",P.getAttribute("data-step")),ls.call(this,ye),ye.appendChild(pe),document.body.appendChild(ye),Dr.call(this,P,pe,_e,!0)}}function fa(){var k=document.querySelector(".introjs-hintReference");if(k){var P=k.getAttribute("data-step");return k.parentNode.removeChild(k),P}}function gh(k){var P=this;if(this._introItems=[],this._options.hints)S(this._options.hints,function(se){var pe=Bs(se);"string"==typeof pe.element&&(pe.element=document.querySelector(pe.element)),pe.hintPosition=pe.hintPosition||P._options.hintPosition,pe.hintAnimation=pe.hintAnimation||P._options.hintAnimation,null!==pe.element&&P._introItems.push(pe)});else{var j=k.querySelectorAll("*[data-hint]");if(!j||!j.length)return!1;S(j,function(se){var pe=se.getAttribute("data-hintanimation");pe=pe?"true"===pe:P._options.hintAnimation,P._introItems.push({element:se,hint:se.getAttribute("data-hint"),hintPosition:se.getAttribute("data-hintposition")||P._options.hintPosition,hintAnimation:pe,tooltipClass:se.getAttribute("data-tooltipclass"),position:se.getAttribute("data-position")||P._options.tooltipPosition})})}xc.call(this),s.on(document,"click",fa,this,!1),s.on(window,"resize",Ol,this,!0)}function Ol(){var k=this;S(this._introItems,function(P){var j=P.targetElement;void 0!==j&&Al.call(k,P.hintPosition,P.element,j)})}Lo({target:"Array",proto:!0,forced:!Gu},{splice:function(P,j){var ye,Fe,Be,We,Wt,kt,se=ai(this),pe=Fa(se),we=Cu(P,pe),_e=arguments.length;if(0===_e?ye=Fe=0:1===_e?(ye=0,Fe=pe-we):(ye=_e-2,Fe=Dc(Ps(Xn(j),0),pe-we)),pe+ye-Fe>uh)throw cf(dh);for(Be=Ho(se,Fe),We=0;We<Fe;We++)(Wt=we+We)in se&&Ha(Be,We,se[Wt]);if(Be.length=Fe,ye<Fe){for(We=we;We<pe-Fe;We++)kt=We+ye,(Wt=We+Fe)in se?se[kt]=se[Wt]:delete se[kt];for(We=pe;We>pe-Fe+ye;We--)delete se[We-1]}else if(ye>Fe)for(We=pe-Fe;We>we;We--)kt=We+ye-1,(Wt=We+Fe-1)in se?se[kt]=se[Wt]:delete se[kt];for(We=0;We<ye;We++)se[We+we]=arguments[We+2];return se.length=pe-Fe+ye,Be}});var Xa=Math.floor,zu=function(k,P){var j=k.length,se=Xa(j/2);return j<8?$a(k,P):Xi(k,zu(Cl(k,0,se),P),zu(Cl(k,se),P),P)},$a=function(k,P){for(var pe,we,j=k.length,se=1;se<j;){for(we=se,pe=k[se];we&&P(k[we-1],pe)>0;)k[we]=k[--we];we!==se++&&(k[we]=pe)}return k},Xi=function(k,P,j,se){for(var pe=P.length,we=j.length,_e=0,ye=0;_e<pe||ye<we;)k[_e+ye]=_e<pe&&ye<we?se(P[_e],j[ye])<=0?P[_e++]:j[ye++]:_e<pe?P[_e++]:j[ye++];return k},Ac=zu,mh=Ve.match(/firefox\/(\d+)/i),Yu=!!mh&&+mh[1],Oc=/MSIE|Trident/.test(Ve),_h=Ve.match(/AppleWebKit\/(\d+)\./),vh=!!_h&&+_h[1],go=[],kc=oe(go.sort),Xu=oe(go.push),Nc=_(function(){go.sort(void 0)}),kl=_(function(){go.sort(null)}),$u=Wa("sort"),Nl=!_(function(){if(At)return At<70;if(!(Yu&&Yu>3)){if(Oc)return!0;if(vh)return vh<603;var P,j,se,pe,k="";for(P=65;P<76;P++){switch(j=String.fromCharCode(P),P){case 66:case 69:case 70:case 72:se=3;break;case 68:case 71:se=4;break;default:se=2}for(pe=0;pe<47;pe++)go.push({k:j+pe,v:se})}for(go.sort(function(we,_e){return _e.v-we.v}),pe=0;pe<go.length;pe++)j=go[pe].k.charAt(0),k.charAt(k.length-1)!==j&&(k+=j);return"DGBEFHACIJK"!==k}});function Ku(k){var P=this,j=k.querySelectorAll("*[data-intro]"),se=[];if(this._options.steps)S(this._options.steps,function(Be){var We=Bs(Be);if(We.step=se.length+1,We.title=We.title||"","string"==typeof We.element&&(We.element=document.querySelector(We.element)),null==We.element){var Wt=document.querySelector(".introjsFloatingElement");null===Wt&&(Wt=jt("div",{className:"introjsFloatingElement"}),document.body.appendChild(Wt)),We.element=Wt,We.position="floating"}We.position=We.position||P._options.tooltipPosition,We.scrollTo=We.scrollTo||P._options.scrollTo,void 0===We.disableInteraction&&(We.disableInteraction=P._options.disableInteraction),null!==We.element&&se.push(We)});else{var we;if(j.length<1)return[];S(j,function(Be){if((!P._options.group||Be.getAttribute("data-intro-group")===P._options.group)&&"none"!==Be.style.display){var We=parseInt(Be.getAttribute("data-step"),10);we=Be.hasAttribute("data-disable-interaction")?!!Be.getAttribute("data-disable-interaction"):P._options.disableInteraction,We>0&&(se[We-1]={element:Be,title:Be.getAttribute("data-title")||"",intro:Be.getAttribute("data-intro"),step:parseInt(Be.getAttribute("data-step"),10),tooltipClass:Be.getAttribute("data-tooltipclass"),highlightClass:Be.getAttribute("data-highlightclass"),position:Be.getAttribute("data-position")||P._options.tooltipPosition,scrollTo:Be.getAttribute("data-scrollto")||P._options.scrollTo,disableInteraction:we})}});var _e=0;S(j,function(Be){if((!P._options.group||Be.getAttribute("data-intro-group")===P._options.group)&&null===Be.getAttribute("data-step")){for(;void 0!==se[_e];)_e++;we=Be.hasAttribute("data-disable-interaction")?!!Be.getAttribute("data-disable-interaction"):P._options.disableInteraction,se[_e]={element:Be,title:Be.getAttribute("data-title")||"",intro:Be.getAttribute("data-intro"),step:_e+1,tooltipClass:Be.getAttribute("data-tooltipclass"),highlightClass:Be.getAttribute("data-highlightclass"),position:Be.getAttribute("data-position")||P._options.tooltipPosition,scrollTo:Be.getAttribute("data-scrollto")||P._options.scrollTo,disableInteraction:we}}})}for(var ye=[],Fe=0;Fe<se.length;Fe++)se[Fe]&&ye.push(se[Fe]);return(se=ye).sort(function(Be,We){return Be.step-We.step}),se}function Ju(k){var P=document.querySelector(".introjs-tooltipReferenceLayer"),j=document.querySelector(".introjs-helperLayer"),se=document.querySelector(".introjs-disableInteraction");if(ls.call(this,j),ls.call(this,P),ls.call(this,se),k&&(this._introItems=Ku.call(this,this._targetElement),ju.call(this,P,this._introItems[this._currentStep]),ph.call(this,P)),null!=this._currentStep){var pe=document.querySelector(".introjs-arrow"),we=document.querySelector(".introjs-tooltip");we&&pe&&Dr.call(this,this._introItems[this._currentStep].element,we,pe)}return Ol.call(this),this}function Ka(){Ju.call(this)}function ps(k,P){if(k&&k.parentElement){var j=k.parentElement;P?(Io(k,{opacity:"0"}),window.setTimeout(function(){try{j.removeChild(k)}catch(se){}},500)):j.removeChild(k)}}function lr(k,P){var j=!0;if(void 0!==this._introBeforeExitCallback&&(j=this._introBeforeExitCallback.call(this)),P||!1!==j){var se=k.querySelectorAll(".introjs-overlay");se&&se.length&&S(se,function(Fe){return ps(Fe)}),ps(k.querySelector(".introjs-helperLayer"),!0),ps(k.querySelector(".introjs-tooltipReferenceLayer")),ps(k.querySelector(".introjs-disableInteraction")),ps(document.querySelector(".introjsFloatingElement")),Rc(),s.off(window,"keydown",fo,this,!0),s.off(window,"resize",Ka,this,!0),void 0!==this._introExitCallback&&this._introExitCallback.call(this),this._currentStep=void 0}}function pf(k){var P=this,j=jt("div",{className:"introjs-overlay"});return Io(j,{top:0,bottom:0,left:0,right:0,position:"fixed"}),k.appendChild(j),!0===this._options.exitOnOverlayClick&&(Io(j,{cursor:"pointer"}),j.onclick=function(){lr.call(P,k)}),!0}function Qu(k){void 0!==this._introStartCallback&&this._introStartCallback.call(this,k);var P=Ku.call(this,k);return 0===P.length||(this._introItems=P,pf.call(this,k)&&(Fr.call(this),this._options.keyboardNavigation&&s.on(window,"keydown",fo,this,!0),s.on(window,"resize",Ka,this,!0))),!1}function Ao(k){this._targetElement=k,this._introItems=[],this._options={nextLabel:"Next",prevLabel:"Back",skipLabel:"\xd7",doneLabel:"Done",hidePrev:!1,hideNext:!1,nextToDone:!0,tooltipPosition:"bottom",tooltipClass:"",group:"",highlightClass:"",exitOnEsc:!0,exitOnOverlayClick:!0,showStepNumbers:!1,keyboardNavigation:!0,showButtons:!0,showBullets:!0,showProgress:!1,scrollToElement:!0,scrollTo:"element",scrollPadding:30,overlayOpacity:.5,autoPosition:!0,positionPrecedence:["bottom","top","right","left"],disableInteraction:!1,helperElementPadding:10,hintPosition:"top-middle",hintButtonLabel:"Got it",hintShowButton:!0,hintAutoRefreshInterval:10,hintAnimation:!0,buttonClass:"introjs-button",progressBarAdditionalClass:!1}}Lo({target:"Array",proto:!0,forced:Nc||!kl||!$u||!Nl},{sort:function(P){void 0!==P&&ze(P);var j=ai(this);if(Nl)return void 0===P?kc(j):kc(j,P);var we,_e,se=[],pe=Fa(j);for(_e=0;_e<pe;_e++)_e in j&&Xu(se,j[_e]);for(Ac(se,function(k){return function(P,j){return void 0===j?-1:void 0===P?1:void 0!==k?+k(P,j)||0:Gn(P)>Gn(j)?1:-1}}(P)),we=se.length,_e=0;_e<we;)j[_e]=se[_e++];for(;_e<pe;)delete j[_e++];return j}});var pi=function k(P){var j;if("object"===I(P))j=new Ao(P);else if("string"==typeof P){var se=document.querySelector(P);if(!se)throw new Error("There is no element with given selector.");j=new Ao(se)}else j=new Ao(document.body);return k.instances[y(j,"introjs-instance")]=j,j};return pi.version="4.3.0",pi.instances={},pi.fn=Ao.prototype={clone:function(){return new Ao(this)},setOption:function(P,j){return this._options[P]=j,this},setOptions:function(P){return this._options=function(k,P){var se,j={};for(se in k)j[se]=k[se];for(se in P)j[se]=P[se];return j}(this._options,P),this},start:function(){return Qu.call(this,this._targetElement),this},goToStep:function(P){return Ic.call(this,P),this},addStep:function(P){return this._options.steps||(this._options.steps=[]),this._options.steps.push(P),this},addSteps:function(P){if(P.length){for(var j=0;j<P.length;j++)this.addStep(P[j]);return this}},goToStepNumber:function(P){return Fs.call(this,P),this},nextStep:function(){return Fr.call(this),this},previousStep:function(){return xo.call(this),this},currentStep:function(){return uf.call(this)},exit:function(P){return lr.call(this,this._targetElement,P),this},refresh:function(P){return Ju.call(this,P),this},onbeforechange:function(P){if("function"!=typeof P)throw new Error("Provided callback for onbeforechange was not a function");return this._introBeforeChangeCallback=P,this},onchange:function(P){if("function"!=typeof P)throw new Error("Provided callback for onchange was not a function.");return this._introChangeCallback=P,this},onafterchange:function(P){if("function"!=typeof P)throw new Error("Provided callback for onafterchange was not a function");return this._introAfterChangeCallback=P,this},oncomplete:function(P){if("function"!=typeof P)throw new Error("Provided callback for oncomplete was not a function.");return this._introCompleteCallback=P,this},onhintsadded:function(P){if("function"!=typeof P)throw new Error("Provided callback for onhintsadded was not a function.");return this._hintsAddedCallback=P,this},onhintclick:function(P){if("function"!=typeof P)throw new Error("Provided callback for onhintclick was not a function.");return this._hintClickCallback=P,this},onhintclose:function(P){if("function"!=typeof P)throw new Error("Provided callback for onhintclose was not a function.");return this._hintCloseCallback=P,this},onstart:function(P){if("function"!=typeof P)throw new Error("Provided callback for onstart was not a function.");return this._introStartCallback=P,this},onexit:function(P){if("function"!=typeof P)throw new Error("Provided callback for onexit was not a function.");return this._introExitCallback=P,this},onskip:function(P){if("function"!=typeof P)throw new Error("Provided callback for onskip was not a function.");return this._introSkipCallback=P,this},onbeforeexit:function(P){if("function"!=typeof P)throw new Error("Provided callback for onbeforeexit was not a function.");return this._introBeforeExitCallback=P,this},addHints:function(){return gh.call(this,this._targetElement),this},hideHint:function(P){return pa.call(this,P),this},hideHints:function(){return Wu.call(this),this},showHint:function(P){return fh.call(this,P),this},showHints:function(){return df.call(this),this},removeHints:function(){return am.call(this),this},removeHint:function(P){return hf().call(this,P),this},showHintDialog:function(P){return Ya.call(this,P),this}},pi}()},16384:(T,I,m)=>{"use strict";function y(r){return"function"==typeof r}function S(r){const e=r(o=>{Error.call(o),o.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const s=S(r=>function(e){r(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((o,a)=>`${a+1}) ${o.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function n(r,t){if(r){const e=r.indexOf(t);0<=e&&r.splice(e,1)}}class l{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const c of e)c.remove(this);else e.remove(this);const{initialTeardown:o}=this;if(y(o))try{o()}catch(c){t=c instanceof s?c.errors:[c]}const{_teardowns:a}=this;if(a){this._teardowns=null;for(const c of a)try{_(c)}catch(d){t=null!=t?t:[],d instanceof s?t=[...t,...d.errors]:t.push(d)}}if(t)throw new s(t)}}add(t){var e;if(t&&t!==this)if(this.closed)_(t);else{if(t instanceof l){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._teardowns=null!==(e=this._teardowns)&&void 0!==e?e:[]).push(t)}}_hasParent(t){const{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){const{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&n(e,t)}remove(t){const{_teardowns:e}=this;e&&n(e,t),t instanceof l&&t._removeParent(this)}}l.EMPTY=(()=>{const r=new l;return r.closed=!0,r})();const u=l.EMPTY;function h(r){return r instanceof l||r&&"closed"in r&&y(r.remove)&&y(r.add)&&y(r.unsubscribe)}function _(r){y(r)?r():r.unsubscribe()}const b={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},R={setTimeout(...r){const{delegate:t}=R;return((null==t?void 0:t.setTimeout)||setTimeout)(...r)},clearTimeout(r){const{delegate:t}=R;return((null==t?void 0:t.clearTimeout)||clearTimeout)(r)},delegate:void 0};function O(r){R.setTimeout(()=>{const{onUnhandledError:t}=b;if(!t)throw r;t(r)})}function H(){}const W=Q("C",void 0,void 0);function Q(r,t,e){return{kind:r,value:t,error:e}}let Y=null;function ue(r){if(b.useDeprecatedSynchronousErrorHandling){const t=!Y;if(t&&(Y={errorThrown:!1,error:null}),r(),t){const{errorThrown:e,error:o}=Y;if(Y=null,e)throw o}}else r()}class he extends l{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,h(t)&&t.add(this)):this.destination=F}static create(t,e,o){return new te(t,e,o)}next(t){this.isStopped?J(Q("N",t,void 0),this):this._next(t)}error(t){this.isStopped?J(Q("E",void 0,t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?J(W,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class te extends he{constructor(t,e,o){let a;if(super(),y(t))a=t;else if(t){let c;({next:a,error:e,complete:o}=t),this&&b.useDeprecatedNextContext?(c=Object.create(t),c.unsubscribe=()=>this.unsubscribe()):c=t,a=null==a?void 0:a.bind(c),e=null==e?void 0:e.bind(c),o=null==o?void 0:o.bind(c)}this.destination={next:a?oe(a):H,error:oe(null!=e?e:q),complete:o?oe(o):H}}}function oe(r,t){return(...e)=>{try{r(...e)}catch(o){b.useDeprecatedSynchronousErrorHandling?function(r){b.useDeprecatedSynchronousErrorHandling&&Y&&(Y.errorThrown=!0,Y.error=r)}(o):O(o)}}}function q(r){throw r}function J(r,t){const{onStoppedNotification:e}=b;e&&R.setTimeout(()=>e(r,t))}const F={closed:!0,next:H,error:q,complete:H},fe="function"==typeof Symbol&&Symbol.observable||"@@observable";function K(r){return r}let re=(()=>{class r{constructor(e){e&&(this._subscribe=e)}lift(e){const o=new r;return o.source=this,o.operator=e,o}subscribe(e,o,a){const c=function(r){return r&&r instanceof he||function(r){return r&&y(r.next)&&y(r.error)&&y(r.complete)}(r)&&h(r)}(e)?e:new te(e,o,a);return ue(()=>{const{operator:d,source:p}=this;c.add(d?d.call(c,p):p?this._subscribe(c):this._trySubscribe(c))}),c}_trySubscribe(e){try{return this._subscribe(e)}catch(o){e.error(o)}}forEach(e,o){return new(o=Re(o))((a,c)=>{let d;d=this.subscribe(p=>{try{e(p)}catch(g){c(g),null==d||d.unsubscribe()}},c,a)})}_subscribe(e){var o;return null===(o=this.source)||void 0===o?void 0:o.subscribe(e)}[fe](){return this}pipe(...e){return function(r){return 0===r.length?K:1===r.length?r[0]:function(e){return r.reduce((o,a)=>a(o),e)}}(e)(this)}toPromise(e){return new(e=Re(e))((o,a)=>{let c;this.subscribe(d=>c=d,d=>a(d),()=>o(c))})}}return r.create=t=>new r(t),r})();function Re(r){var t;return null!==(t=null!=r?r:b.Promise)&&void 0!==t?t:Promise}const Pe=S(r=>function(){r(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Se=(()=>{class r extends re{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const o=new Te(this,this);return o.operator=e,o}_throwIfClosed(){if(this.closed)throw new Pe}next(e){ue(()=>{if(this._throwIfClosed(),!this.isStopped){const o=this.observers.slice();for(const a of o)a.next(e)}})}error(e){ue(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:o}=this;for(;o.length;)o.shift().error(e)}})}complete(){ue(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:o,isStopped:a,observers:c}=this;return o||a?u:(c.push(e),new l(()=>n(c,e)))}_checkFinalizedStatuses(e){const{hasError:o,thrownError:a,isStopped:c}=this;o?e.error(a):c&&e.complete()}asObservable(){const e=new re;return e.source=this,e}}return r.create=(t,e)=>new Te(t,e),r})();class Te extends Se{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,o;null===(o=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===o||o.call(e,t)}error(t){var e,o;null===(o=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===o||o.call(e,t)}complete(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)}_subscribe(t){var e,o;return null!==(o=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==o?o:u}}function Ve(r){return y(null==r?void 0:r.lift)}function Le(r){return t=>{if(Ve(t))return t.lift(function(e){try{return r(e,this)}catch(o){this.error(o)}});throw new TypeError("Unable to lift unknown Observable type")}}class Ue extends he{constructor(t,e,o,a,c){super(t),this.onFinalize=c,this._next=e?function(d){try{e(d)}catch(p){t.error(p)}}:super._next,this._error=a?function(d){try{a(d)}catch(p){t.error(p)}finally{this.unsubscribe()}}:super._error,this._complete=o?function(){try{o()}catch(d){t.error(d)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;const{closed:e}=this;super.unsubscribe(),!e&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}function He(r,t){return Le((e,o)=>{let a=0;e.subscribe(new Ue(o,c=>{o.next(r.call(t,c,a++))}))})}function fn(r){return this instanceof fn?(this.v=r,this):new fn(r)}function xn(r,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a,o=e.apply(r,t||[]),c=[];return a={},d("next"),d("throw"),d("return"),a[Symbol.asyncIterator]=function(){return this},a;function d(x){o[x]&&(a[x]=function(L){return new Promise(function(U,ee){c.push([x,L,U,ee])>1||p(x,L)})})}function p(x,L){try{!function(x){x.value instanceof fn?Promise.resolve(x.value.v).then(v,E):D(c[0][2],x)}(o[x](L))}catch(U){D(c[0][3],U)}}function v(x){p("next",x)}function E(x){p("throw",x)}function D(x,L){x(L),c.shift(),c.length&&p(c[0][0],c[0][1])}}function Me(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=r[Symbol.asyncIterator];return t?t.call(r):(r=function(r){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&r[t],o=0;if(e)return e.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&o>=r.length&&(r=void 0),{value:r&&r[o++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(r),e={},o("next"),o("throw"),o("return"),e[Symbol.asyncIterator]=function(){return this},e);function o(c){e[c]=r[c]&&function(d){return new Promise(function(p,g){!function(c,d,p,g){Promise.resolve(g).then(function(v){c({value:v,done:p})},d)}(p,g,(d=r[c](d)).done,d.value)})}}}const fi=r=>r&&"number"==typeof r.length&&"function"!=typeof r;function at(r){return y(null==r?void 0:r.then)}function lt(r){return y(r[fe])}function Ne(r){return Symbol.asyncIterator&&y(null==r?void 0:r[Symbol.asyncIterator])}function Ke(r){return new TypeError(`You provided ${null!==r&&"object"==typeof r?"an invalid object":`'${r}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Ae="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function Xe(r){return y(null==r?void 0:r[Ae])}function ct(r){return xn(this,arguments,function*(){const e=r.getReader();try{for(;;){const{value:o,done:a}=yield fn(e.read());if(a)return yield fn(void 0);yield yield fn(o)}}finally{e.releaseLock()}})}function Ii(r){return y(null==r?void 0:r.getReader)}function dt(r){if(r instanceof re)return r;if(null!=r){if(lt(r))return function(r){return new re(t=>{const e=r[fe]();if(y(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(r);if(fi(r))return function(r){return new re(t=>{for(let e=0;e<r.length&&!t.closed;e++)t.next(r[e]);t.complete()})}(r);if(at(r))return function(r){return new re(t=>{r.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,O)})}(r);if(Ne(r))return gn(r);if(Xe(r))return function(r){return new re(t=>{for(const e of r)if(t.next(e),t.closed)return;t.complete()})}(r);if(Ii(r))return function(r){return gn(ct(r))}(r)}throw Ke(r)}function gn(r){return new re(t=>{(function(r,t){var e,o,a,c;return function(r,t,e,o){return new(e||(e=Promise))(function(c,d){function p(E){try{v(o.next(E))}catch(D){d(D)}}function g(E){try{v(o.throw(E))}catch(D){d(D)}}function v(E){E.done?c(E.value):function(c){return c instanceof e?c:new e(function(d){d(c)})}(E.value).then(p,g)}v((o=o.apply(r,t||[])).next())})}(this,void 0,void 0,function*(){try{for(e=Me(r);!(o=yield e.next()).done;)if(t.next(o.value),t.closed)return}catch(d){a={error:d}}finally{try{o&&!o.done&&(c=e.return)&&(yield c.call(e))}finally{if(a)throw a.error}}t.complete()})})(r,t).catch(e=>t.error(e))})}function rr(r,t,e,o=0,a=!1){const c=t.schedule(function(){e(),a?r.add(this.schedule(null,o)):this.unsubscribe()},o);if(r.add(c),!a)return c}function Dn(r,t,e=1/0){return y(t)?Dn((o,a)=>He((c,d)=>t(o,c,a,d))(dt(r(o,a))),e):("number"==typeof t&&(e=t),Le((o,a)=>function(r,t,e,o,a,c,d,p){const g=[];let v=0,E=0,D=!1;const x=()=>{D&&!g.length&&!v&&t.complete()},L=ee=>v<o?U(ee):g.push(ee),U=ee=>{v++;let $=!1;dt(e(ee,E++)).subscribe(new Ue(t,ge=>{t.next(ge)},()=>{$=!0},void 0,()=>{if($)try{for(v--;g.length&&v<o;){const ge=g.shift();U(ge)}x()}catch(ge){t.error(ge)}}))};return r.subscribe(new Ue(t,L,()=>{D=!0,x()})),()=>{}}(o,a,r,e)))}function Un(r=1/0){return Dn(K,r)}const co=new re(r=>r.complete());function ta(r){return r&&y(r.schedule)}function ia(r){return r[r.length-1]}function pu(r){return y(ia(r))?r.pop():void 0}function na(r){return ta(ia(r))?r.pop():void 0}function Fd(r,t=0){return Le((e,o)=>{e.subscribe(new Ue(o,a=>rr(o,r,()=>o.next(a),t),()=>rr(o,r,()=>o.complete(),t),a=>rr(o,r,()=>o.error(a),t)))})}function gu(r,t=0){return Le((e,o)=>{o.add(r.schedule(()=>e.subscribe(o),t))})}function Hd(r,t){if(!r)throw new Error("Iterable cannot be null");return new re(e=>{rr(e,t,()=>{const o=r[Symbol.asyncIterator]();rr(e,t,()=>{o.next().then(a=>{a.done?e.complete():e.next(a.value)})},0,!0)})})}function On(r,t){return t?function(r,t){if(null!=r){if(lt(r))return function(r,t){return dt(r).pipe(gu(t),Fd(t))}(r,t);if(fi(r))return function(r,t){return new re(e=>{let o=0;return t.schedule(function(){o===r.length?e.complete():(e.next(r[o++]),e.closed||this.schedule())})})}(r,t);if(at(r))return function(r,t){return dt(r).pipe(gu(t),Fd(t))}(r,t);if(Ne(r))return Hd(r,t);if(Xe(r))return function(r,t){return new re(e=>{let o;return rr(e,t,()=>{o=r[Ae](),rr(e,t,()=>{let a,c;try{({value:a,done:c}=o.next())}catch(d){return void e.error(d)}c?e.complete():e.next(a)},0,!0)}),()=>y(null==o?void 0:o.return)&&o.return()})}(r,t);if(Ii(r))return function(r,t){return Hd(ct(r),t)}(r,t)}throw Ke(r)}(r,t):dt(r)}function Cr(...r){const t=na(r),e=function(r,t){return"number"==typeof ia(r)?r.pop():1/0}(r),o=r;return o.length?1===o.length?dt(o[0]):Un(e)(On(o,t)):co}function Rn(r){return r<=0?()=>co:Le((t,e)=>{let o=0;t.subscribe(new Ue(e,a=>{++o<=r&&(e.next(a),r<=o&&e.complete())}))})}function qo(r={}){const{connector:t=(()=>new Se),resetOnError:e=!0,resetOnComplete:o=!0,resetOnRefCountZero:a=!0}=r;return c=>{let d=null,p=null,g=null,v=0,E=!1,D=!1;const x=()=>{null==p||p.unsubscribe(),p=null},L=()=>{x(),d=g=null,E=D=!1},U=()=>{const ee=d;L(),null==ee||ee.unsubscribe()};return Le((ee,$)=>{v++,!D&&!E&&x();const ge=g=null!=g?g:t();$.add(()=>{v--,0===v&&!D&&!E&&(p=_u(U,a))}),ge.subscribe($),d||(d=new te({next:be=>ge.next(be),error:be=>{D=!0,x(),p=_u(L,e,be),ge.error(be)},complete:()=>{E=!0,x(),p=_u(L,o),ge.complete()}}),On(ee).subscribe(d))})(c)}}function _u(r,t,...e){return!0===t?(r(),null):!1===t?null:t(...e).pipe(Rn(1)).subscribe(()=>r())}function en(r){for(let t in r)if(r[t]===en)return t;throw Error("Could not find renamed property on target object.")}function vu(r,t){for(const e in t)t.hasOwnProperty(e)&&!r.hasOwnProperty(e)&&(r[e]=t[e])}function ti(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(ti).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const t=r.toString();if(null==t)return""+t;const e=t.indexOf("\n");return-1===e?t:t.substring(0,e)}function La(r,t){return null==r||""===r?null===t?"":t:null==t||""===t?r:r+" "+t}const bu=en({__forward_ref__:en});function hi(r){return r.__forward_ref__=hi,r.toString=function(){return ti(this())},r}function Nt(r){return yu(r)?r():r}function yu(r){return"function"==typeof r&&r.hasOwnProperty(bu)&&r.__forward_ref__===hi}class ws extends Error{constructor(t,e){super(function(r,t){return`${r?`NG0${r}: `:""}${t}`}(t,e)),this.code=t}}function li(r){return"string"==typeof r?r:null==r?"":String(r)}function Xn(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():li(r)}function dc(r,t){const e=t?` in ${t}`:"";throw new ws("201",`No provider for ${Xn(r)} found${e}`)}function Qr(r,t){null==r&&function(r,t,e,o){throw new Error(`ASSERTION ERROR: ${r}`+(null==o?"":` [Expected=> ${e} ${o} ${t} <=Actual]`))}(t,r,null,"!=")}function rt(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function pt(r){return{providers:r.providers||[],imports:r.imports||[]}}function So(r){return Wd(r,gl)||Wd(r,wu)}function Wd(r,t){return r.hasOwnProperty(t)?r[t]:null}function Yd(r){return r&&(r.hasOwnProperty(Ba)||r.hasOwnProperty(Xd))?r[Ba]:null}const gl=en({\u0275prov:en}),Ba=en({\u0275inj:en}),wu=en({ngInjectableDef:en}),Xd=en({ngInjectorDef:en});var xt=(()=>((xt=xt||{})[xt.Default=0]="Default",xt[xt.Host=1]="Host",xt[xt.Self=2]="Self",xt[xt.SkipSelf=4]="SkipSelf",xt[xt.Optional=8]="Optional",xt))();let ts;function Zr(r){const t=ts;return ts=r,t}function Gn(r,t,e){const o=So(r);return o&&"root"==o.providedIn?void 0===o.value?o.value=o.factory():o.value:e&xt.Optional?null:void 0!==t?t:void dc(ti(r),"Injector")}function is(r){return{toString:r}.toString()}var qr=(()=>((qr=qr||{})[qr.OnPush=0]="OnPush",qr[qr.Default=1]="Default",qr))(),or=(()=>{return(r=or||(or={}))[r.Emulated=0]="Emulated",r[r.None=2]="None",r[r.ShadowDom=3]="ShadowDom",or;var r})();const Va="undefined"!=typeof globalThis&&globalThis,$p="undefined"!=typeof window&&window,Du="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ni=Va||"undefined"!=typeof global&&global||$p||Du,ns={},Vi=[],sa=en({\u0275cmp:en}),kn=en({\u0275dir:en}),rs=en({\u0275pipe:en}),aa=en({\u0275mod:en}),Fo=en({\u0275fac:en}),ml=en({__NG_ELEMENT_ID__:en});let Kp=0;function Qt(r){return is(()=>{const e={},o={type:r.type,providersResolver:null,decls:r.decls,vars:r.vars,factory:null,template:r.template||null,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:r.exportAs||null,onPush:r.changeDetection===qr.OnPush,directiveDefs:null,pipeDefs:null,selectors:r.selectors||Vi,viewQuery:r.viewQuery||null,features:r.features||null,data:r.data||{},encapsulation:r.encapsulation||or.Emulated,id:"c",styles:r.styles||Vi,_:null,setInput:null,schemas:r.schemas||null,tView:null},a=r.directives,c=r.features,d=r.pipes;return o.id+=Kp++,o.inputs=la(r.inputs,e),o.outputs=la(r.outputs),c&&c.forEach(p=>p(o)),o.directiveDefs=a?()=>("function"==typeof a?a():a).map(Mu):null,o.pipeDefs=d?()=>("function"==typeof d?d():d).map($d):null,o})}function Mu(r){return sr(r)||function(r){return r[kn]||null}(r)}function $d(r){return function(r){return r[rs]||null}(r)}const _l={};function bt(r){return is(()=>{const t={type:r.type,bootstrap:r.bootstrap||Vi,declarations:r.declarations||Vi,imports:r.imports||Vi,exports:r.exports||Vi,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null};return null!=r.id&&(_l[r.id]=r.type),t})}function la(r,t){if(null==r)return ns;const e={};for(const o in r)if(r.hasOwnProperty(o)){let a=r[o],c=a;Array.isArray(a)&&(c=a[1],a=a[0]),e[a]=o,t&&(t[a]=c)}return e}const Ge=Qt;function pr(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,onDestroy:r.type.prototype.ngOnDestroy||null}}function sr(r){return r[sa]||null}function uo(r,t){const e=r[aa]||null;if(!e&&!0===t)throw new Error(`Type ${ti(r)} does not have '\u0275mod' property.`);return e}function Ro(r){return Array.isArray(r)&&"object"==typeof r[1]}function po(r){return Array.isArray(r)&&!0===r[1]}function fc(r){return 0!=(8&r.flags)}function yl(r){return 2==(2&r.flags)}function xs(r){return 1==(1&r.flags)}function Mo(r){return null!==r.template}function Jd(r){return 0!=(512&r[2])}function As(r,t){return r.hasOwnProperty(Fo)?r[Fo]:null}class ku{constructor(t,e,o){this.previousValue=t,this.currentValue=e,this.firstChange=o}isFirstChange(){return this.firstChange}}function vn(){return nh}function nh(r){return r.type.prototype.ngOnChanges&&(r.setInput=to),da}function da(){const r=io(this),t=null==r?void 0:r.current;if(t){const e=r.previous;if(e===ns)r.previous=t;else for(let o in t)e[o]=t[o];r.current=null,this.ngOnChanges(t)}}function to(r,t,e,o){const a=io(r)||function(r,t){return r[rh]=t}(r,{previous:ns,current:null}),c=a.current||(a.current={}),d=a.previous,p=this.declaredInputs[e],g=d[p];c[p]=new ku(g&&g.currentValue,t,d===ns),r[o]=t}vn.ngInherit=!0;const rh="__ngSimpleChanges__";function io(r){return r[rh]||null}const vc="http://www.w3.org/2000/svg";let bc;function Nn(r){return!!r.listen}const Lu={createRenderer:(r,t)=>void 0!==bc?bc:"undefined"!=typeof document?document:void 0};function Tn(r){for(;Array.isArray(r);)r=r[0];return r}function Ec(r,t){return Tn(t[r])}function jr(r,t){return Tn(t[r.index])}function Cc(r,t){return r.data[t]}function Ga(r,t){return r[t]}function Sr(r,t){const e=t[r];return Ro(e)?e:e[0]}function Sl(r){return 4==(4&r[2])}function Tc(r){return 128==(128&r[2])}function Uo(r,t){return null==t?null:r[t]}function Fu(r){r[18]=0}function Go(r,t){r[5]+=t;let e=r,o=r[3];for(;null!==o&&(1===t&&1===e[5]||-1===t&&0===e[5]);)o[5]+=t,e=o,o=o[3]}const Zt={lFrame:dh(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Io(){return Zt.bindingsEnabled}function Je(){return Zt.lFrame.lView}function Hi(){return Zt.lFrame.tView}function cs(r){return Zt.lFrame.contextLView=r,r[8]}function Wn(){let r=Dl();for(;null!==r&&64===r.type;)r=r.parent;return r}function Dl(){return Zt.lFrame.currentTNode}function Wo(r,t){const e=Zt.lFrame;e.currentTNode=r,e.isParent=t}function Vu(){return Zt.lFrame.isParent}function wc(){Zt.lFrame.isParent=!1}function ja(){return Zt.isInCheckNoChangesMode}function Wa(r){Zt.isInCheckNoChangesMode=r}function Lr(){const r=Zt.lFrame;let t=r.bindingRootIndex;return-1===t&&(t=r.bindingRootIndex=r.tView.bindingStartIndex),t}function ds(){return Zt.lFrame.bindingIndex}function Ns(){return Zt.lFrame.bindingIndex++}function hs(r){const t=Zt.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+r,e}function lf(r,t){const e=Zt.lFrame;e.bindingIndex=e.bindingRootIndex=r,Sc(t)}function Sc(r){Zt.lFrame.currentDirectiveIndex=r}function ha(r){const t=Zt.lFrame.currentDirectiveIndex;return-1===t?null:r[t]}function Rl(){return Zt.lFrame.currentQueryIndex}function Gu(r){Zt.lFrame.currentQueryIndex=r}function cf(r){const t=r[1];return 2===t.type?t.declTNode:1===t.type?r[6]:null}function Ps(r,t,e){if(e&xt.SkipSelf){let a=t,c=r;for(;!(a=a.parent,null!==a||e&xt.Host||(a=cf(c),null===a||(c=c[15],10&a.type))););if(null===a)return!1;t=a,r=c}const o=Zt.lFrame=uh();return o.currentTNode=t,o.lView=r,!0}function Dc(r){const t=uh(),e=r[1];Zt.lFrame=t,t.currentTNode=e.firstChild,t.lView=r,t.tView=e,t.contextLView=r,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function uh(){const r=Zt.lFrame,t=null===r?null:r.child;return null===t?dh(r):t}function dh(r){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=t),t}function Ls(){const r=Zt.lFrame;return Zt.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const Ml=Ls;function za(){const r=Ls();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function jt(){return Zt.lFrame.selectedIndex}function Yo(r){Zt.lFrame.selectedIndex=r}function bn(){const r=Zt.lFrame;return Cc(r.tView,r.selectedIndex)}function Il(){Zt.lFrame.currentNamespace=vc}function Xo(r,t){for(let e=t.directiveStart,o=t.directiveEnd;e<o;e++){const c=r.data[e].type.prototype,{ngAfterContentInit:d,ngAfterContentChecked:p,ngAfterViewInit:g,ngAfterViewChecked:v,ngOnDestroy:E}=c;d&&(r.contentHooks||(r.contentHooks=[])).push(-e,d),p&&((r.contentHooks||(r.contentHooks=[])).push(e,p),(r.contentCheckHooks||(r.contentCheckHooks=[])).push(e,p)),g&&(r.viewHooks||(r.viewHooks=[])).push(-e,g),v&&((r.viewHooks||(r.viewHooks=[])).push(e,v),(r.viewCheckHooks||(r.viewCheckHooks=[])).push(e,v)),null!=E&&(r.destroyHooks||(r.destroyHooks=[])).push(e,E)}}function Ic(r,t,e){xo(r,t,3,e)}function Fs(r,t,e,o){(3&r[2])===e&&xo(r,t,e,o)}function Fr(r,t){let e=r[2];(3&e)===t&&(e&=2047,e+=1,r[2]=e)}function xo(r,t,e,o){const c=null!=o?o:-1,d=t.length-1;let p=0;for(let g=void 0!==o?65535&r[18]:0;g<d;g++)if("number"==typeof t[g+1]){if(p=t[g],null!=o&&p>=o)break}else t[g]<0&&(r[18]+=65536),(p<c||-1==c)&&(uf(r,e,t,g),r[18]=(4294901760&r[18])+g+2),g++}function uf(r,t,e,o){const a=e[o]<0,c=e[o+1],p=r[a?-e[o]:e[o]];if(a){if(r[2]>>11<r[18]>>16&&(3&r[2])===t){r[2]+=2048;try{c.call(p)}finally{}}}else try{c.call(p)}finally{}}class Bs{constructor(t,e,o){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=o}}function xc(r,t,e){const o=Nn(r);let a=0;for(;a<e.length;){const c=e[a];if("number"==typeof c){if(0!==c)break;a++;const d=e[a++],p=e[a++],g=e[a++];o?r.setAttribute(t,p,g,d):t.setAttributeNS(d,p,g)}else{const d=c,p=e[++a];Ya(d)?o&&r.setProperty(t,d,p):o?r.setAttribute(t,d,p):t.setAttribute(d,p),a++}}return a}function Al(r){return 3===r||4===r||6===r}function Ya(r){return 64===r.charCodeAt(0)}function fa(r,t){if(null!==t&&0!==t.length)if(null===r||0===r.length)r=t.slice();else{let e=-1;for(let o=0;o<t.length;o++){const a=t[o];"number"==typeof a?e=a:0===e||gh(r,e,a,null,-1===e||2===e?t[++o]:null)}}return r}function gh(r,t,e,o,a){let c=0,d=r.length;if(-1===t)d=-1;else for(;c<r.length;){const p=r[c++];if("number"==typeof p){if(p===t){d=-1;break}if(p>t){d=c-1;break}}}for(;c<r.length;){const p=r[c];if("number"==typeof p)break;if(p===e){if(null===o)return void(null!==a&&(r[c+1]=a));if(o===r[c+1])return void(r[c+2]=a)}c++,null!==o&&c++,null!==a&&c++}-1!==d&&(r.splice(d,0,t),c=d+1),r.splice(c++,0,e),null!==o&&r.splice(c++,0,o),null!==a&&r.splice(c++,0,a)}function Ol(r){return-1!==r}function Xa(r){return 32767&r}function $a(r,t){let e=function(r){return r>>16}(r),o=t;for(;e>0;)o=o[15],e--;return o}let Xi=!0;function Ac(r){const t=Xi;return Xi=r,t}let _h=0;function go(r,t){const e=Xu(r,t);if(-1!==e)return e;const o=t[1];o.firstCreatePass&&(r.injectorIndex=t.length,kc(o.data,r),kc(t,null),kc(o.blueprint,null));const a=Nc(r,t),c=r.injectorIndex;if(Ol(a)){const d=Xa(a),p=$a(a,t),g=p[1].data;for(let v=0;v<8;v++)t[c+v]=p[d+v]|g[d+v]}return t[c+8]=a,c}function kc(r,t){r.push(0,0,0,0,0,0,0,0,t)}function Xu(r,t){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===t[r.injectorIndex+8]?-1:r.injectorIndex}function Nc(r,t){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let e=0,o=null,a=t;for(;null!==a;){const c=a[1],d=c.type;if(o=2===d?c.declTNode:1===d?a[6]:null,null===o)return-1;if(e++,a=a[15],-1!==o.injectorIndex)return o.injectorIndex|e<<16}return-1}function kl(r,t,e){!function(r,t,e){let o;"string"==typeof e?o=e.charCodeAt(0)||0:e.hasOwnProperty(ml)&&(o=e[ml]),null==o&&(o=e[ml]=_h++);const a=255&o;t.data[r+(a>>5)]|=1<<a}(r,t,e)}function Nl(r,t,e){if(e&xt.Optional)return r;dc(t,"NodeInjector")}function bh(r,t,e,o){if(e&xt.Optional&&void 0===o&&(o=null),0==(e&(xt.Self|xt.Host))){const a=r[9],c=Zr(void 0);try{return a?a.get(t,o,e&xt.Optional):Gn(t,o,e&xt.Optional)}finally{Zr(c)}}return Nl(o,t,e)}function yh(r,t,e,o=xt.Default,a){if(null!==r){const c=function(r){if("string"==typeof r)return r.charCodeAt(0)||0;const t=r.hasOwnProperty(ml)?r[ml]:void 0;return"number"==typeof t?t>=0?255&t:Ju:t}(e);if("function"==typeof c){if(!Ps(t,r,o))return o&xt.Host?Nl(a,e,o):bh(t,e,o,a);try{const d=c(o);if(null!=d||o&xt.Optional)return d;dc(e)}finally{Ml()}}else if("number"==typeof c){let d=null,p=Xu(r,t),g=-1,v=o&xt.Host?t[16][6]:null;for((-1===p||o&xt.SkipSelf)&&(g=-1===p?Nc(r,t):t[p+8],-1!==g&&Eh(o,!1)?(d=t[1],p=Xa(g),t=$a(g,t)):p=-1);-1!==p;){const E=t[1];if(Qu(c,p,E.data)){const D=Ka(p,t,e,d,o,v);if(D!==Ku)return D}g=t[p+8],-1!==g&&Eh(o,t[1].data[p+8]===v)&&Qu(c,p,t)?(d=E,p=Xa(g),t=$a(g,t)):p=-1}}}return bh(t,e,o,a)}const Ku={};function Ju(){return new Ao(Wn(),Je())}function Ka(r,t,e,o,a,c){const d=t[1],p=d.data[r+8],E=ps(p,d,e,null==o?yl(p)&&Xi:o!=d&&0!=(3&p.type),a&xt.Host&&c===p);return null!==E?lr(t,d,E,p):Ku}function ps(r,t,e,o,a){const c=r.providerIndexes,d=t.data,p=1048575&c,g=r.directiveStart,E=c>>20,x=a?p+E:r.directiveEnd;for(let L=o?p:p+E;L<x;L++){const U=d[L];if(L<g&&e===U||L>=g&&U.type===e)return L}if(a){const L=d[g];if(L&&Mo(L)&&L.type===e)return g}return null}function lr(r,t,e,o){let a=r[e];const c=t.data;if(function(r){return r instanceof Bs}(a)){const d=a;d.resolving&&function(r,t){throw new ws("200",`Circular dependency in DI detected for ${r}`)}(Xn(c[e]));const p=Ac(d.canSeeViewProviders);d.resolving=!0;const g=d.injectImpl?Zr(d.injectImpl):null;Ps(r,o,xt.Default);try{a=r[e]=d.factory(void 0,c,r,o),t.firstCreatePass&&e>=o.directiveStart&&function(r,t,e){const{ngOnChanges:o,ngOnInit:a,ngDoCheck:c}=t.type.prototype;if(o){const d=nh(t);(e.preOrderHooks||(e.preOrderHooks=[])).push(r,d),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(r,d)}a&&(e.preOrderHooks||(e.preOrderHooks=[])).push(0-r,a),c&&((e.preOrderHooks||(e.preOrderHooks=[])).push(r,c),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(r,c))}(e,c[e],t)}finally{null!==g&&Zr(g),Ac(p),d.resolving=!1,Ml()}}return a}function Qu(r,t,e){return!!(e[t+(r>>5)]&1<<r)}function Eh(r,t){return!(r&xt.Self||r&xt.Host&&t)}class Ao{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,o){return yh(this._tNode,this._lView,t,o,e)}}function pi(r){return is(()=>{const t=r.prototype.constructor,e=t[Fo]||k(t),o=Object.prototype;let a=Object.getPrototypeOf(r.prototype).constructor;for(;a&&a!==o;){const c=a[Fo]||k(a);if(c&&c!==e)return c;a=Object.getPrototypeOf(a)}return c=>new c})}function k(r){return yu(r)?()=>{const t=k(Nt(r));return t&&t()}:As(r)}function P(r){return function(r,t){if("class"===t)return r.classes;if("style"===t)return r.styles;const e=r.attrs;if(e){const o=e.length;let a=0;for(;a<o;){const c=e[a];if(Al(c))break;if(0===c)a+=2;else if("number"==typeof c)for(a++;a<o&&"string"==typeof e[a];)a++;else{if(c===t)return e[a+1];a+=2}}}return null}(Wn(),r)}const se="__parameters__";function ye(r,t,e){return is(()=>{const o=function(r){return function(...e){if(r){const o=r(...e);for(const a in o)this[a]=o[a]}}}(t);function a(...c){if(this instanceof a)return o.apply(this,c),this;const d=new a(...c);return p.annotation=d,p;function p(g,v,E){const D=g.hasOwnProperty(se)?g[se]:Object.defineProperty(g,se,{value:[]})[se];for(;D.length<=E;)D.push(null);return(D[E]=D[E]||[]).push(d),g}}return e&&(a.prototype=Object.create(e.prototype)),a.prototype.ngMetadataName=r,a.annotationCls=a,a})}class xe{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=rt({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const zn=new xe("AnalyzeForEntryComponents");function $o(r,t){void 0===t&&(t=r);for(let e=0;e<r.length;e++){let o=r[e];Array.isArray(o)?(t===r&&(t=r.slice(0,e)),$o(o,t)):t!==r&&t.push(o)}return t}function gs(r,t){r.forEach(e=>Array.isArray(e)?gs(e,t):t(e))}function Lc(r,t,e){t>=r.length?r.push(e):r.splice(t,0,e)}function Ja(r,t){return t>=r.length-1?r.pop():r.splice(t,1)[0]}function ga(r,t){const e=[];for(let o=0;o<r;o++)e.push(t);return e}function mo(r,t,e){let o=Fc(r,t);return o>=0?r[1|o]=e:(o=~o,function(r,t,e,o){let a=r.length;if(a==t)r.push(e,o);else if(1===a)r.push(o,r[0]),r[0]=e;else{for(a--,r.push(r[a-1],r[a]);a>t;)r[a]=r[a-2],a--;r[t]=e,r[t+1]=o}}(r,o,t,e)),o}function gf(r,t){const e=Fc(r,t);if(e>=0)return r[1|e]}function Fc(r,t){return function(r,t,e){let o=0,a=r.length>>e;for(;a!==o;){const c=o+(a-o>>1),d=r[c<<e];if(t===d)return c<<e;d>t?a=c:o=c+1}return~(a<<e)}(r,t,1)}const Vc={},Ch="__NG_DI_FLAG__",Hc="ngTempTokenPath",Pl=/\n/gm,Th="__source",wh=en({provide:String,useValue:en});let Uc;function Ll(r){const t=Uc;return Uc=r,t}function hS(r,t=xt.Default){if(void 0===Uc)throw new Error("inject() must be called from an injection context");return null===Uc?Gn(r,void 0,t):Uc.get(r,t&xt.Optional?null:void 0,t)}function Oe(r,t=xt.Default){return(ts||hS)(Nt(r),t)}const ed=Oe;function Fl(r){const t=[];for(let e=0;e<r.length;e++){const o=Nt(r[e]);if(Array.isArray(o)){if(0===o.length)throw new Error("Arguments array must have arguments.");let a,c=xt.Default;for(let d=0;d<o.length;d++){const p=o[d],g=mm(p);"number"==typeof g?-1===g?a=p.token:c|=g:a=p}t.push(Oe(a,c))}else t.push(Oe(o))}return t}function td(r,t){return r[Ch]=t,r.prototype[Ch]=t,r}function mm(r){return r[Ch]}function vf(r,t,e,o){const a=r[Hc];throw t[Th]&&a.unshift(t[Th]),r.message=function(r,t,e,o=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.substr(2):r;let a=ti(t);if(Array.isArray(t))a=t.map(ti).join(" -> ");else if("object"==typeof t){let c=[];for(let d in t)if(t.hasOwnProperty(d)){let p=t[d];c.push(d+":"+("string"==typeof p?JSON.stringify(p):ti(p)))}a=`{${c.join(", ")}}`}return`${e}${o?"("+o+")":""}[${a}]: ${r.replace(Pl,"\n  ")}`}("\n"+r.message,a,e,o),r.ngTokenPath=a,r[Hc]=null,r}const Gc=td(ye("Inject",r=>({token:r})),-1),Ln=td(ye("Optional"),8),gr=td(ye("SkipSelf"),4);let Mh;function Wc(r){var t;return(null==(t=function(){if(void 0===Mh&&(Mh=null,Ni.trustedTypes))try{Mh=Ni.trustedTypes.createPolicy("angular",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch(r){}return Mh}())?void 0:t.createHTML(r))||r}class Qa{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Vb extends Qa{getTypeName(){return"HTML"}}class Hb extends Qa{getTypeName(){return"Style"}}class Ub extends Qa{getTypeName(){return"Script"}}class Gb extends Qa{getTypeName(){return"URL"}}class jb extends Qa{getTypeName(){return"ResourceURL"}}function _o(r){return r instanceof Qa?r.changingThisBreaksApplicationSecurity:r}function Hs(r,t){const e=Cm(r);if(null!=e&&e!==t){if("ResourceURL"===e&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${e} (see https://g.co/ng/security#xss)`)}return e===t}function Cm(r){return r instanceof Qa&&r.getTypeName()||null}class Xb{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(Wc(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class $b{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const o=this.inertDocument.createElement("body");e.appendChild(o)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=Wc(t),e;const o=this.inertDocument.createElement("body");return o.innerHTML=Wc(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(o),o}stripCustomNsAttrs(t){const e=t.attributes;for(let a=e.length-1;0<a;a--){const d=e.item(a).name;("xmlns:ns1"===d||0===d.indexOf("ns1:"))&&t.removeAttribute(d)}let o=t.firstChild;for(;o;)o.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(o),o=o.nextSibling}}const Jb=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Qb=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function rd(r){return(r=String(r)).match(Jb)||r.match(Qb)?r:"unsafe:"+r}function C(r){const t={};for(const e of r.split(","))t[e]=!0;return t}function w(...r){const t={};for(const e of r)for(const o in e)e.hasOwnProperty(o)&&(t[o]=!0);return t}const M=C("area,br,col,hr,img,wbr"),N=C("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),V=C("rp,rt"),ce=w(M,w(N,C("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),w(V,C("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),w(V,N)),Ee=C("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ce=C("srcset"),Ye=w(Ee,Ce,C("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),C("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),qe=C("script,style,template");class tt{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,o=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?o=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,o&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let a=this.checkClobberedElement(e,e.nextSibling);if(a){e=a;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!ce.hasOwnProperty(e))return this.sanitizedSomething=!0,!qe.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const o=t.attributes;for(let a=0;a<o.length;a++){const c=o.item(a),d=c.name,p=d.toLowerCase();if(!Ye.hasOwnProperty(p)){this.sanitizedSomething=!0;continue}let g=c.value;Ee[p]&&(g=rd(g)),Ce[p]&&(r=g,g=(r=String(r)).split(",").map(t=>rd(t.trim())).join(", ")),this.buf.push(" ",d,'="',Pi(g),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();ce.hasOwnProperty(e)&&!M.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(Pi(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const Ct=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ze=/([^\#-~ |!])/g;function Pi(r){return r.replace(/&/g,"&amp;").replace(Ct,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(Ze,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Di;function Yn(r,t){let e=null;try{Di=Di||function(r){const t=new $b(r);return function(){try{return!!(new window.DOMParser).parseFromString(Wc(""),"text/html")}catch(r){return!1}}()?new Xb(t):t}(r);let o=t?String(t):"";e=Di.getInertBodyElement(o);let a=5,c=o;do{if(0===a)throw new Error("Failed to sanitize html because the input is unstable");a--,o=c,c=e.innerHTML,e=Di.getInertBodyElement(o)}while(o!==c);return Wc((new tt).sanitizeChildren(yn(e)||e))}finally{if(e){const o=yn(e)||e;for(;o.firstChild;)o.removeChild(o.firstChild)}}}function yn(r){return"content"in r&&function(r){return r.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===r.nodeName}(r)?r.content:null}var ii=(()=>((ii=ii||{})[ii.NONE=0]="NONE",ii[ii.HTML=1]="HTML",ii[ii.STYLE=2]="STYLE",ii[ii.SCRIPT=3]="SCRIPT",ii[ii.URL=4]="URL",ii[ii.RESOURCE_URL=5]="RESOURCE_URL",ii))();function qn(r){const t=function(){const r=Je();return r&&r[12]}();return t?t.sanitize(ii.URL,r)||"":Hs(r,"URL")?_o(r):rd(li(r))}const mS="__ngContext__";function bo(r,t){r[mS]=t}function qb(r){const t=function(r){return r[mS]||null}(r);return t?Array.isArray(t)?t:t.lView:null}function Dm(r){return r.ngOriginalError}function dP(r,...t){r.error(...t)}class qa{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),o=this._findContext(t),a=(r=t)&&r.ngErrorLogger||dP;var r;a(this._console,"ERROR",t),e&&a(this._console,"ORIGINAL ERROR",e),o&&a(this._console,"ERROR CONTEXT",o)}_findContext(t){return t?t.ngDebugContext||this._findContext(Dm(t)):null}_findOriginalError(t){let e=t&&Dm(t);for(;e&&Dm(e);)e=Dm(e);return e||null}}const SS=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ni))();function el(r){return r instanceof Function?r():r}var ms=(()=>((ms=ms||{})[ms.Important=1]="Important",ms[ms.DashCase=2]="DashCase",ms))();function iy(r,t){return undefined(r,t)}function Df(r){const t=r[3];return po(t)?t[3]:t}function ny(r){return xS(r[13])}function ry(r){return xS(r[4])}function xS(r){for(;null!==r&&!po(r);)r=r[4];return r}function Oh(r,t,e,o,a){if(null!=o){let c,d=!1;po(o)?c=o:Ro(o)&&(d=!0,o=o[0]);const p=Tn(o);0===r&&null!==e?null==a?LS(t,e,p):sd(t,e,p,a||null,!0):1===r&&null!==e?sd(t,e,p,a||null,!0):2===r?function(r,t,e){const o=Mm(r,t);o&&function(r,t,e,o){Nn(r)?r.removeChild(t,e,o):t.removeChild(e)}(r,o,t,e)}(t,p,d):3===r&&t.destroyNode(p),null!=c&&function(r,t,e,o,a){const c=e[7];c!==Tn(e)&&Oh(t,r,o,c,a);for(let p=10;p<e.length;p++){const g=e[p];Rf(g[1],g,r,t,o,c)}}(t,r,c,e,a)}}function sy(r,t,e){return Nn(r)?r.createElement(t,e):null===e?r.createElement(t):r.createElementNS(e,t)}function OS(r,t){const e=r[9],o=e.indexOf(t),a=t[3];1024&t[2]&&(t[2]&=-1025,Go(a,-1)),e.splice(o,1)}function ay(r,t){if(r.length<=10)return;const e=10+t,o=r[e];if(o){const a=o[17];null!==a&&a!==r&&OS(a,o),t>0&&(r[e-1][4]=o[4]);const c=Ja(r,10+t);!function(r,t){Rf(r,t,t[11],2,null,null),t[0]=null,t[6]=null}(o[1],o);const d=c[19];null!==d&&d.detachView(c[1]),o[3]=null,o[4]=null,o[2]&=-129}return o}function kS(r,t){if(!(256&t[2])){const e=t[11];Nn(e)&&e.destroyNode&&Rf(r,t,e,3,null,null),function(r){let t=r[13];if(!t)return ly(r[1],r);for(;t;){let e=null;if(Ro(t))e=t[13];else{const o=t[10];o&&(e=o)}if(!e){for(;t&&!t[4]&&t!==r;)Ro(t)&&ly(t[1],t),t=t[3];null===t&&(t=r),Ro(t)&&ly(t[1],t),e=t&&t[4]}t=e}}(t)}}function ly(r,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(r,t){let e;if(null!=r&&null!=(e=r.destroyHooks))for(let o=0;o<e.length;o+=2){const a=t[e[o]];if(!(a instanceof Bs)){const c=e[o+1];if(Array.isArray(c))for(let d=0;d<c.length;d+=2){const p=a[c[d]],g=c[d+1];try{g.call(p)}finally{}}else try{c.call(a)}finally{}}}}(r,t),function(r,t){const e=r.cleanup,o=t[7];let a=-1;if(null!==e)for(let c=0;c<e.length-1;c+=2)if("string"==typeof e[c]){const d=e[c+1],p="function"==typeof d?d(t):Tn(t[d]),g=o[a=e[c+2]],v=e[c+3];"boolean"==typeof v?p.removeEventListener(e[c],g,v):v>=0?o[a=v]():o[a=-v].unsubscribe(),c+=2}else{const d=o[a=e[c+1]];e[c].call(d)}if(null!==o){for(let c=a+1;c<o.length;c++)o[c]();t[7]=null}}(r,t),1===t[1].type&&Nn(t[11])&&t[11].destroy();const e=t[17];if(null!==e&&po(t[3])){e!==t[3]&&OS(e,t);const o=t[19];null!==o&&o.detachView(r)}}}function NS(r,t,e){return function(r,t,e){let o=t;for(;null!==o&&40&o.type;)o=(t=o).parent;if(null===o)return e[0];if(2&o.flags){const a=r.data[o.directiveStart].encapsulation;if(a===or.None||a===or.Emulated)return null}return jr(o,e)}(r,t.parent,e)}function sd(r,t,e,o,a){Nn(r)?r.insertBefore(t,e,o,a):t.insertBefore(e,o,a)}function LS(r,t,e){Nn(r)?r.appendChild(t,e):t.appendChild(e)}function FS(r,t,e,o,a){null!==o?sd(r,t,e,o,a):LS(r,t,e)}function Mm(r,t){return Nn(r)?r.parentNode(t):t.parentNode}function BS(r,t,e){return HS(r,t,e)}let HS=function(r,t,e){return 40&r.type?jr(r,e):null};function Im(r,t,e,o){const a=NS(r,o,t),c=t[11],p=BS(o.parent||t[6],o,t);if(null!=a)if(Array.isArray(e))for(let g=0;g<e.length;g++)FS(c,a,e[g],p,!1);else FS(c,a,e,p,!1)}function xm(r,t){if(null!==t){const e=t.type;if(3&e)return jr(t,r);if(4&e)return uy(-1,r[t.index]);if(8&e){const o=t.child;if(null!==o)return xm(r,o);{const a=r[t.index];return po(a)?uy(-1,a):Tn(a)}}if(32&e)return iy(t,r)()||Tn(r[t.index]);{const o=GS(r,t);return null!==o?Array.isArray(o)?o[0]:xm(Df(r[16]),o):xm(r,t.next)}}return null}function GS(r,t){return null!==t?r[16][6].projection[t.projection]:null}function uy(r,t){const e=10+r+1;if(e<t.length){const o=t[e],a=o[1].firstChild;if(null!==a)return xm(o,a)}return t[7]}function dy(r,t,e,o,a,c,d){for(;null!=e;){const p=o[e.index],g=e.type;if(d&&0===t&&(p&&bo(Tn(p),o),e.flags|=4),64!=(64&e.flags))if(8&g)dy(r,t,e.child,o,a,c,!1),Oh(t,r,a,p,c);else if(32&g){const v=iy(e,o);let E;for(;E=v();)Oh(t,r,a,E,c);Oh(t,r,a,p,c)}else 16&g?WS(r,t,o,e,a,c):Oh(t,r,a,p,c);e=d?e.projectionNext:e.next}}function Rf(r,t,e,o,a,c){dy(e,o,r.firstChild,t,a,c,!1)}function WS(r,t,e,o,a,c){const d=e[16],g=d[6].projection[o.projection];if(Array.isArray(g))for(let v=0;v<g.length;v++)Oh(t,r,a,g[v],c);else dy(r,t,g,d[3],a,c,!0)}function zS(r,t,e){Nn(r)?r.setAttribute(t,"style",e):t.style.cssText=e}function hy(r,t,e){Nn(r)?""===e?r.removeAttribute(t,"class"):r.setAttribute(t,"class",e):t.className=e}function YS(r,t,e){let o=r.length;for(;;){const a=r.indexOf(t,e);if(-1===a)return a;if(0===a||r.charCodeAt(a-1)<=32){const c=t.length;if(a+c===o||r.charCodeAt(a+c)<=32)return a}e=a+1}}const XS="ng-template";function FP(r,t,e){let o=0;for(;o<r.length;){let a=r[o++];if(e&&"class"===a){if(a=r[o],-1!==YS(a.toLowerCase(),t,0))return!0}else if(1===a){for(;o<r.length&&"string"==typeof(a=r[o++]);)if(a.toLowerCase()===t)return!0;return!1}}return!1}function $S(r){return 4===r.type&&r.value!==XS}function BP(r,t,e){return t===(4!==r.type||e?r.value:XS)}function VP(r,t,e){let o=4;const a=r.attrs||[],c=function(r){for(let t=0;t<r.length;t++)if(Al(r[t]))return t;return r.length}(a);let d=!1;for(let p=0;p<t.length;p++){const g=t[p];if("number"!=typeof g){if(!d)if(4&o){if(o=2|1&o,""!==g&&!BP(r,g,e)||""===g&&1===t.length){if(ma(o))return!1;d=!0}}else{const v=8&o?g:t[++p];if(8&o&&null!==r.attrs){if(!FP(r.attrs,v,e)){if(ma(o))return!1;d=!0}continue}const D=HP(8&o?"class":g,a,$S(r),e);if(-1===D){if(ma(o))return!1;d=!0;continue}if(""!==v){let x;x=D>c?"":a[D+1].toLowerCase();const L=8&o?x:null;if(L&&-1!==YS(L,v,0)||2&o&&v!==x){if(ma(o))return!1;d=!0}}}}else{if(!d&&!ma(o)&&!ma(g))return!1;if(d&&ma(g))continue;d=!1,o=g|1&o}}return ma(o)||d}function ma(r){return 0==(1&r)}function HP(r,t,e,o){if(null===t)return-1;let a=0;if(o||!e){let c=!1;for(;a<t.length;){const d=t[a];if(d===r)return a;if(3===d||6===d)c=!0;else{if(1===d||2===d){let p=t[++a];for(;"string"==typeof p;)p=t[++a];continue}if(4===d)break;if(0===d){a+=4;continue}}a+=c?1:2}return-1}return function(r,t){let e=r.indexOf(4);if(e>-1)for(e++;e<r.length;){const o=r[e];if("number"==typeof o)return-1;if(o===t)return e;e++}return-1}(t,r)}function KS(r,t,e=!1){for(let o=0;o<t.length;o++)if(VP(r,t[o],e))return!0;return!1}function WP(r,t){e:for(let e=0;e<t.length;e++){const o=t[e];if(r.length===o.length){for(let a=0;a<r.length;a++)if(r[a]!==o[a])continue e;return!0}}return!1}function JS(r,t){return r?":not("+t.trim()+")":t}function zP(r){let t=r[0],e=1,o=2,a="",c=!1;for(;e<r.length;){let d=r[e];if("string"==typeof d)if(2&o){const p=r[++e];a+="["+d+(p.length>0?'="'+p+'"':"")+"]"}else 8&o?a+="."+d:4&o&&(a+=" "+d);else""!==a&&!ma(d)&&(t+=JS(c,a),a=""),o=d,c=c||!ma(o);e++}return""!==a&&(t+=JS(c,a)),t}const Ti={};function $t(r){QS(Hi(),Je(),jt()+r,ja())}function QS(r,t,e,o){if(!o)if(3==(3&t[2])){const c=r.preOrderCheckHooks;null!==c&&Ic(t,c,e)}else{const c=r.preOrderHooks;null!==c&&Fs(t,c,0,e)}Yo(e)}function Am(r,t){return r<<17|t<<2}function _a(r){return r>>17&32767}function py(r){return 2|r}function Vl(r){return(131068&r)>>2}function fy(r,t){return-131069&r|t<<2}function gy(r){return 1|r}function l0(r,t){const e=r.contentQueries;if(null!==e)for(let o=0;o<e.length;o+=2){const a=e[o],c=e[o+1];if(-1!==c){const d=r.data[c];Gu(a),d.contentQueries(2,t[c],c)}}}function Mf(r,t,e,o,a,c,d,p,g,v){const E=t.blueprint.slice();return E[0]=a,E[2]=140|o,Fu(E),E[3]=E[15]=r,E[8]=e,E[10]=d||r&&r[10],E[11]=p||r&&r[11],E[12]=g||r&&r[12]||null,E[9]=v||r&&r[9]||null,E[6]=c,E[16]=2==t.type?r[16]:E,E}function kh(r,t,e,o,a){let c=r.data[t];if(null===c)c=function(r,t,e,o,a){const c=Dl(),d=Vu(),g=r.data[t]=function(r,t,e,o,a,c){return{type:e,index:o,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:a,attrs:c,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,d?c:c&&c.parent,e,t,o,a);return null===r.firstChild&&(r.firstChild=g),null!==c&&(d?null==c.child&&null!==g.parent&&(c.child=g):null===c.next&&(c.next=g)),g}(r,t,e,o,a),Zt.lFrame.inI18n&&(c.flags|=64);else if(64&c.type){c.type=e,c.value=o,c.attrs=a;const d=function(){const r=Zt.lFrame,t=r.currentTNode;return r.isParent?t:t.parent}();c.injectorIndex=null===d?-1:d.injectorIndex}return Wo(c,!0),c}function Nh(r,t,e,o){if(0===e)return-1;const a=t.length;for(let c=0;c<e;c++)t.push(o),r.blueprint.push(o),r.data.push(null);return a}function If(r,t,e){Dc(t);try{const o=r.viewQuery;null!==o&&Ay(1,o,e);const a=r.template;null!==a&&c0(r,t,a,1,e),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&l0(r,t),r.staticViewQueries&&Ay(2,r.viewQuery,e);const c=r.components;null!==c&&function(r,t){for(let e=0;e<t.length;e++)wL(r,t[e])}(t,c)}catch(o){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),o}finally{t[2]&=-5,za()}}function Ph(r,t,e,o){const a=t[2];if(256==(256&a))return;Dc(t);const c=ja();try{Fu(t),function(r){Zt.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==e&&c0(r,t,e,2,o);const d=3==(3&a);if(!c)if(d){const v=r.preOrderCheckHooks;null!==v&&Ic(t,v,null)}else{const v=r.preOrderHooks;null!==v&&Fs(t,v,0,null),Fr(t,0)}if(function(r){for(let t=ny(r);null!==t;t=ry(t)){if(!t[2])continue;const e=t[9];for(let o=0;o<e.length;o++){const a=e[o],c=a[3];0==(1024&a[2])&&Go(c,1),a[2]|=1024}}}(t),function(r){for(let t=ny(r);null!==t;t=ry(t))for(let e=10;e<t.length;e++){const o=t[e],a=o[1];Tc(o)&&Ph(a,o,a.template,o[8])}}(t),null!==r.contentQueries&&l0(r,t),!c)if(d){const v=r.contentCheckHooks;null!==v&&Ic(t,v)}else{const v=r.contentHooks;null!==v&&Fs(t,v,1),Fr(t,1)}!function(r,t){const e=r.hostBindingOpCodes;if(null!==e)try{for(let o=0;o<e.length;o++){const a=e[o];if(a<0)Yo(~a);else{const c=a,d=e[++o],p=e[++o];lf(d,c),p(2,t[c])}}}finally{Yo(-1)}}(r,t);const p=r.components;null!==p&&function(r,t){for(let e=0;e<t.length;e++)TL(r,t[e])}(t,p);const g=r.viewQuery;if(null!==g&&Ay(2,g,o),!c)if(d){const v=r.viewCheckHooks;null!==v&&Ic(t,v)}else{const v=r.viewHooks;null!==v&&Fs(t,v,2),Fr(t,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),c||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,Go(t[3],-1))}finally{za()}}function rL(r,t,e,o){const a=t[10],c=!ja(),d=Sl(t);try{c&&!d&&a.begin&&a.begin(),d&&If(r,t,o),Ph(r,t,e,o)}finally{c&&!d&&a.end&&a.end()}}function c0(r,t,e,o,a){const c=jt(),d=2&o;try{Yo(-1),d&&t.length>20&&QS(r,t,20,ja()),e(o,a)}finally{Yo(c)}}function Ty(r,t,e){!Io()||(function(r,t,e,o){const a=e.directiveStart,c=e.directiveEnd;r.firstCreatePass||go(e,t),bo(o,t);const d=e.initialInputs;for(let p=a;p<c;p++){const g=r.data[p],v=Mo(g);v&&vL(t,e,g);const E=lr(t,r,p,e);bo(E,t),null!==d&&bL(0,p-a,E,g,0,d),v&&(Sr(e.index,t)[8]=E)}}(r,t,e,jr(e,t)),128==(128&e.flags)&&function(r,t,e){const o=e.directiveStart,a=e.directiveEnd,d=e.index,p=Zt.lFrame.currentDirectiveIndex;try{Yo(d);for(let g=o;g<a;g++){const v=r.data[g],E=t[g];Sc(g),(null!==v.hostBindings||0!==v.hostVars||null!==v.hostAttrs)&&v0(v,E)}}finally{Yo(-1),Sc(p)}}(r,t,e))}function wy(r,t,e=jr){const o=t.localNames;if(null!==o){let a=t.index+1;for(let c=0;c<o.length;c+=2){const d=o[c+1],p=-1===d?e(t,r):r[d];r[a++]=p}}}function d0(r){const t=r.tView;return null===t||t.incompleteFirstPass?r.tView=Nm(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts):t}function Nm(r,t,e,o,a,c,d,p,g,v){const E=20+o,D=E+a,x=function(r,t){const e=[];for(let o=0;o<t;o++)e.push(o<r?null:Ti);return e}(E,D),L="function"==typeof v?v():v;return x[1]={type:r,blueprint:x,template:e,queries:null,viewQuery:p,declTNode:t,data:x.slice().fill(null,E),bindingStartIndex:E,expandoStartIndex:D,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof c?c():c,pipeRegistry:"function"==typeof d?d():d,firstChild:null,schemas:g,consts:L,incompleteFirstPass:!1}}function f0(r,t,e,o){const a=w0(t);null===e?a.push(o):(a.push(e),r.firstCreatePass&&S0(r).push(o,a.length-1))}function g0(r,t,e){for(let o in r)if(r.hasOwnProperty(o)){const a=r[o];(e=null===e?{}:e).hasOwnProperty(o)?e[o].push(t,a):e[o]=[t,a]}return e}function _s(r,t,e,o,a,c,d,p){const g=jr(t,e);let E,v=t.inputs;!p&&null!=v&&(E=v[o])?(M0(r,e,E,o,a),yl(t)&&function(r,t){const e=Sr(t,r);16&e[2]||(e[2]|=64)}(e,t.index)):3&t.type&&(o=function(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(o),a=null!=d?d(a,t.value||"",o):a,Nn(c)?c.setProperty(g,o,a):Ya(o)||(g.setProperty?g.setProperty(o,a):g[o]=a))}function Sy(r,t,e,o){let a=!1;if(Io()){const c=function(r,t,e){const o=r.directiveRegistry;let a=null;if(o)for(let c=0;c<o.length;c++){const d=o[c];KS(e,d.selectors,!1)&&(a||(a=[]),kl(go(e,t),r,d.type),Mo(d)?(b0(r,e),a.unshift(d)):a.push(d))}return a}(r,t,e),d=null===o?null:{"":-1};if(null!==c){a=!0,y0(e,r.data.length,c.length);for(let E=0;E<c.length;E++){const D=c[E];D.providersResolver&&D.providersResolver(D)}let p=!1,g=!1,v=Nh(r,t,c.length,null);for(let E=0;E<c.length;E++){const D=c[E];e.mergedAttrs=fa(e.mergedAttrs,D.hostAttrs),E0(r,e,t,v,D),_L(v,D,d),null!==D.contentQueries&&(e.flags|=8),(null!==D.hostBindings||null!==D.hostAttrs||0!==D.hostVars)&&(e.flags|=128);const x=D.type.prototype;!p&&(x.ngOnChanges||x.ngOnInit||x.ngDoCheck)&&((r.preOrderHooks||(r.preOrderHooks=[])).push(e.index),p=!0),!g&&(x.ngOnChanges||x.ngDoCheck)&&((r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(e.index),g=!0),v++}!function(r,t){const o=t.directiveEnd,a=r.data,c=t.attrs,d=[];let p=null,g=null;for(let v=t.directiveStart;v<o;v++){const E=a[v],D=E.inputs,x=null===c||$S(t)?null:yL(D,c);d.push(x),p=g0(D,v,p),g=g0(E.outputs,v,g)}null!==p&&(p.hasOwnProperty("class")&&(t.flags|=16),p.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=d,t.inputs=p,t.outputs=g}(r,e)}d&&function(r,t,e){if(t){const o=r.localNames=[];for(let a=0;a<t.length;a+=2){const c=e[t[a+1]];if(null==c)throw new ws("301",`Export of name '${t[a+1]}' not found!`);o.push(t[a],c)}}}(e,o,d)}return e.mergedAttrs=fa(e.mergedAttrs,e.attrs),a}function _0(r,t,e,o,a,c){const d=c.hostBindings;if(d){let p=r.hostBindingOpCodes;null===p&&(p=r.hostBindingOpCodes=[]);const g=~t.index;(function(r){let t=r.length;for(;t>0;){const e=r[--t];if("number"==typeof e&&e<0)return e}return 0})(p)!=g&&p.push(g),p.push(o,a,d)}}function v0(r,t){null!==r.hostBindings&&r.hostBindings(1,t)}function b0(r,t){t.flags|=2,(r.components||(r.components=[])).push(t.index)}function _L(r,t,e){if(e){if(t.exportAs)for(let o=0;o<t.exportAs.length;o++)e[t.exportAs[o]]=r;Mo(t)&&(e[""]=r)}}function y0(r,t,e){r.flags|=1,r.directiveStart=t,r.directiveEnd=t+e,r.providerIndexes=t}function E0(r,t,e,o,a){r.data[o]=a;const c=a.factory||(a.factory=As(a.type)),d=new Bs(c,Mo(a),null);r.blueprint[o]=d,e[o]=d,_0(r,t,0,o,Nh(r,e,a.hostVars,Ti),a)}function vL(r,t,e){const o=jr(t,r),a=d0(e),c=r[10],d=Pm(r,Mf(r,a,null,e.onPush?64:16,o,t,c,c.createRenderer(o,e),null,null));r[t.index]=d}function tl(r,t,e,o,a,c){const d=jr(r,t);!function(r,t,e,o,a,c,d){if(null==c)Nn(r)?r.removeAttribute(t,a,e):t.removeAttribute(a);else{const p=null==d?li(c):d(c,o||"",a);Nn(r)?r.setAttribute(t,a,p,e):e?t.setAttributeNS(e,a,p):t.setAttribute(a,p)}}(t[11],d,c,r.value,e,o,a)}function bL(r,t,e,o,a,c){const d=c[t];if(null!==d){const p=o.setInput;for(let g=0;g<d.length;){const v=d[g++],E=d[g++],D=d[g++];null!==p?o.setInput(e,D,v,E):e[E]=D}}}function yL(r,t){let e=null,o=0;for(;o<t.length;){const a=t[o];if(0!==a)if(5!==a){if("number"==typeof a)break;r.hasOwnProperty(a)&&(null===e&&(e=[]),e.push(a,r[a],t[o+1])),o+=2}else o+=2;else o+=4}return e}function C0(r,t,e,o){return new Array(r,!0,!1,t,null,0,o,e,null,null)}function TL(r,t){const e=Sr(t,r);if(Tc(e)){const o=e[1];80&e[2]?Ph(o,e,o.template,e[8]):e[5]>0&&Ry(e)}}function Ry(r){for(let o=ny(r);null!==o;o=ry(o))for(let a=10;a<o.length;a++){const c=o[a];if(1024&c[2]){const d=c[1];Ph(d,c,d.template,c[8])}else c[5]>0&&Ry(c)}const e=r[1].components;if(null!==e)for(let o=0;o<e.length;o++){const a=Sr(e[o],r);Tc(a)&&a[5]>0&&Ry(a)}}function wL(r,t){const e=Sr(t,r),o=e[1];(function(r,t){for(let e=t.length;e<r.blueprint.length;e++)t.push(r.blueprint[e])})(o,e),If(o,e,e[8])}function Pm(r,t){return r[13]?r[14][4]=t:r[13]=t,r[14]=t,t}function My(r){for(;r;){r[2]|=64;const t=Df(r);if(Jd(r)&&!t)return r;r=t}return null}function xy(r,t,e){const o=t[10];o.begin&&o.begin();try{Ph(r,t,r.template,e)}catch(a){throw R0(t,a),a}finally{o.end&&o.end()}}function T0(r){!function(r){for(let t=0;t<r.components.length;t++){const e=r.components[t],o=qb(e),a=o[1];rL(a,o,a.template,e)}}(r[8])}function Ay(r,t,e){Gu(0),t(r,e)}const IL=(()=>Promise.resolve(null))();function w0(r){return r[7]||(r[7]=[])}function S0(r){return r.cleanup||(r.cleanup=[])}function D0(r,t,e){return(null===r||Mo(r))&&(e=function(r){for(;Array.isArray(r);){if("object"==typeof r[1])return r;r=r[0]}return null}(e[t.index])),e[11]}function R0(r,t){const e=r[9],o=e?e.get(qa,null):null;o&&o.handleError(t)}function M0(r,t,e,o,a){for(let c=0;c<e.length;){const d=e[c++],p=e[c++],g=t[d],v=r.data[d];null!==v.setInput?v.setInput(g,a,o,p):g[p]=a}}function Ul(r,t,e){const o=Ec(t,r);!function(r,t,e){Nn(r)?r.setValue(t,e):t.textContent=e}(r[11],o,e)}function Lm(r,t,e){let o=e?r.styles:null,a=e?r.classes:null,c=0;if(null!==t)for(let d=0;d<t.length;d++){const p=t[d];"number"==typeof p?c=p:1==c?a=La(a,p):2==c&&(o=La(o,p+": "+t[++d]+";"))}e?r.styles=o:r.stylesWithoutHost=o,e?r.classes=a:r.classesWithoutHost=a}const xf=new xe("INJECTOR",-1);class I0{get(t,e=Vc){if(e===Vc){const o=new Error(`NullInjectorError: No provider for ${ti(t)}!`);throw o.name="NullInjectorError",o}return e}}const Af=new xe("Set Injector scope."),Of={},OL={};let Oy;function x0(){return void 0===Oy&&(Oy=new I0),Oy}function A0(r,t=null,e=null,o){return new NL(r,e,t||x0(),o)}class NL{constructor(t,e,o,a=null){this.parent=o,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const c=[];e&&gs(e,p=>this.processProvider(p,t,e)),gs([t],p=>this.processInjectorType(p,[],c)),this.records.set(xf,Lh(void 0,this));const d=this.records.get(Af);this.scope=null!=d?d.value:null,this.source=a||("object"==typeof t?null:ti(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=Vc,o=xt.Default){this.assertNotDestroyed();const a=Ll(this),c=Zr(void 0);try{if(!(o&xt.SkipSelf)){let p=this.records.get(t);if(void 0===p){const g=("function"==typeof(r=t)||"object"==typeof r&&r instanceof xe)&&So(t);p=g&&this.injectableDefInScope(g)?Lh(ky(t),Of):null,this.records.set(t,p)}if(null!=p)return this.hydrate(t,p)}return(o&xt.Self?x0():this.parent).get(t,e=o&xt.Optional&&e===Vc?null:e)}catch(d){if("NullInjectorError"===d.name){if((d[Hc]=d[Hc]||[]).unshift(ti(t)),a)throw d;return vf(d,t,"R3InjectorError",this.source)}throw d}finally{Zr(c),Ll(a)}var r}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((o,a)=>t.push(ti(a))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,o){if(!(t=Nt(t)))return!1;let a=Yd(t);const c=null==a&&t.ngModule||void 0,d=void 0===c?t:c,p=-1!==o.indexOf(d);if(void 0!==c&&(a=Yd(c)),null==a)return!1;if(null!=a.imports&&!p){let E;o.push(d);try{gs(a.imports,D=>{this.processInjectorType(D,e,o)&&(void 0===E&&(E=[]),E.push(D))})}finally{}if(void 0!==E)for(let D=0;D<E.length;D++){const{ngModule:x,providers:L}=E[D];gs(L,U=>this.processProvider(U,x,L||Vi))}}this.injectorDefTypes.add(d);const g=As(d)||(()=>new d);this.records.set(d,Lh(g,Of));const v=a.providers;if(null!=v&&!p){const E=t;gs(v,D=>this.processProvider(D,E,v))}return void 0!==c&&void 0!==t.providers}processProvider(t,e,o){let a=Fh(t=Nt(t))?t:Nt(t&&t.provide);const c=(r=t,k0(r)?Lh(void 0,r.useValue):Lh(O0(r),Of));var r;if(Fh(t)||!0!==t.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=Lh(void 0,Of,!0),d.factory=()=>Fl(d.multi),this.records.set(a,d)),a=t,d.multi.push(t)}this.records.set(a,c)}hydrate(t,e){return e.value===Of&&(e.value=OL,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(r=e.value)&&"object"==typeof r&&"function"==typeof r.ngOnDestroy&&this.onDestroy.add(e.value),e.value;var r}injectableDefInScope(t){if(!t.providedIn)return!1;const e=Nt(t.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function ky(r){const t=So(r),e=null!==t?t.factory:As(r);if(null!==e)return e;if(r instanceof xe)throw new Error(`Token ${ti(r)} is missing a \u0275prov definition.`);if(r instanceof Function)return function(r){const t=r.length;if(t>0){const o=ga(t,"?");throw new Error(`Can't resolve all parameters for ${ti(r)}: (${o.join(", ")}).`)}const e=function(r){const t=r&&(r[gl]||r[wu]);if(t){const e=function(r){if(r.hasOwnProperty("name"))return r.name;const t=(""+r).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(r);return console.warn(`DEPRECATED: DI is instantiating a token "${e}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${e}" class.`),t}return null}(r);return null!==e?()=>e.factory(r):()=>new r}(r);throw new Error("unreachable")}function O0(r,t,e){let o;if(Fh(r)){const a=Nt(r);return As(a)||ky(a)}if(k0(r))o=()=>Nt(r.useValue);else if(function(r){return!(!r||!r.useFactory)}(r))o=()=>r.useFactory(...Fl(r.deps||[]));else if(function(r){return!(!r||!r.useExisting)}(r))o=()=>Oe(Nt(r.useExisting));else{const a=Nt(r&&(r.useClass||r.provide));if(!function(r){return!!r.deps}(r))return As(a)||ky(a);o=()=>new a(...Fl(r.deps))}return o}function Lh(r,t,e=!1){return{factory:r,value:t,multi:e?[]:void 0}}function k0(r){return null!==r&&"object"==typeof r&&wh in r}function Fh(r){return"function"==typeof r}const N0=function(r,t,e){return function(r,t=null,e=null,o){const a=A0(r,t,e,o);return a._resolveInjectorDefTypes(),a}({name:e},t,r,e)};let tn=(()=>{class r{static create(e,o){return Array.isArray(e)?N0(e,o,""):N0(e.providers,e.parent,e.name||"")}}return r.THROW_IF_NOT_FOUND=Vc,r.NULL=new I0,r.\u0275prov=rt({token:r,providedIn:"any",factory:()=>Oe(xf)}),r.__NG_ELEMENT_ID__=-1,r})();function tF(r,t){Xo(qb(r)[1],Wn())}function st(r){let t=function(r){return Object.getPrototypeOf(r.prototype).constructor}(r.type),e=!0;const o=[r];for(;t;){let a;if(Mo(r))a=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");a=t.\u0275dir}if(a){if(e){o.push(a);const d=r;d.inputs=Vy(r.inputs),d.declaredInputs=Vy(r.declaredInputs),d.outputs=Vy(r.outputs);const p=a.hostBindings;p&&oF(r,p);const g=a.viewQuery,v=a.contentQueries;if(g&&nF(r,g),v&&rF(r,v),vu(r.inputs,a.inputs),vu(r.declaredInputs,a.declaredInputs),vu(r.outputs,a.outputs),Mo(a)&&a.data.animation){const E=r.data;E.animation=(E.animation||[]).concat(a.data.animation)}}const c=a.features;if(c)for(let d=0;d<c.length;d++){const p=c[d];p&&p.ngInherit&&p(r),p===st&&(e=!1)}}t=Object.getPrototypeOf(t)}!function(r){let t=0,e=null;for(let o=r.length-1;o>=0;o--){const a=r[o];a.hostVars=t+=a.hostVars,a.hostAttrs=fa(a.hostAttrs,e=fa(e,a.hostAttrs))}}(o)}function Vy(r){return r===ns?{}:r===Vi?[]:r}function nF(r,t){const e=r.viewQuery;r.viewQuery=e?(o,a)=>{t(o,a),e(o,a)}:t}function rF(r,t){const e=r.contentQueries;r.contentQueries=e?(o,a,c)=>{t(o,a,c),e(o,a,c)}:t}function oF(r,t){const e=r.hostBindings;r.hostBindings=e?(o,a)=>{t(o,a),e(o,a)}:t}let Fm=null;function Bh(){if(!Fm){const r=Ni.Symbol;if(r&&r.iterator)Fm=r.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const o=t[e];"entries"!==o&&"size"!==o&&Map.prototype[o]===Map.prototype.entries&&(Fm=o)}}}return Fm}function Nf(r){return!!Hy(r)&&(Array.isArray(r)||!(r instanceof Map)&&Bh()in r)}function Hy(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function yo(r,t,e){return!Object.is(r[t],e)&&(r[t]=e,!0)}function ad(r,t,e,o){const a=yo(r,t,e);return yo(r,t+1,o)||a}function ni(r,t,e,o){const a=Je();return yo(a,Ns(),t)&&(Hi(),tl(bn(),a,r,t,e,o)),ni}function Gh(r,t,e,o,a,c,d,p){const v=function(r,t,e,o,a){const c=ad(r,t,e,o);return yo(r,t+2,a)||c}(r,ds(),e,a,d);return hs(3),v?t+li(e)+o+li(a)+c+li(d)+p:Ti}function er(r,t,e,o,a,c,d,p){const g=Je(),v=Hi(),E=r+20,D=v.firstCreatePass?function(r,t,e,o,a,c,d,p,g){const v=t.consts,E=kh(t,r,4,d||null,Uo(v,p));Sy(t,e,E,Uo(v,g)),Xo(t,E);const D=E.tViews=Nm(2,E,o,a,c,t.directiveRegistry,t.pipeRegistry,null,t.schemas,v);return null!==t.queries&&(t.queries.template(t,E),D.queries=t.queries.embeddedTView(E)),E}(E,v,g,t,e,o,a,c,d):v.data[E];Wo(D,!1);const x=g[11].createComment("");Im(v,g,x,D),bo(x,g),Pm(g,g[E]=C0(x,g,x,D)),xs(D)&&Ty(v,g,D),null!=d&&wy(g,D,p)}function Ws(r){return Ga(Zt.lFrame.contextLView,20+r)}function X(r,t=xt.Default){const e=Je();return null===e?Oe(r,t):yh(Wn(),e,Nt(r),t)}function Kh(){throw new Error("invalid")}function ri(r,t,e){const o=Je();return yo(o,Ns(),t)&&_s(Hi(),bn(),o,r,t,o[11],e,!1),ri}function zy(r,t,e,o,a){const d=a?"class":"style";M0(r,e,t.inputs[d],d,o)}function it(r,t,e,o){const a=Je(),c=Hi(),d=20+r,p=a[11],g=a[d]=sy(p,t,Zt.lFrame.currentNamespace),v=c.firstCreatePass?function(r,t,e,o,a,c,d){const p=t.consts,v=kh(t,r,2,a,Uo(p,c));return Sy(t,e,v,Uo(p,d)),null!==v.attrs&&Lm(v,v.attrs,!1),null!==v.mergedAttrs&&Lm(v,v.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,v),v}(d,c,a,0,t,e,o):c.data[d];Wo(v,!0);const E=v.mergedAttrs;null!==E&&xc(p,g,E);const D=v.classes;null!==D&&hy(p,g,D);const x=v.styles;null!==x&&zS(p,g,x),64!=(64&v.flags)&&Im(c,a,g,v),0===Zt.lFrame.elementDepthCount&&bo(g,a),Zt.lFrame.elementDepthCount++,xs(v)&&(Ty(c,a,v),function(r,t,e){if(fc(t)){const a=t.directiveEnd;for(let c=t.directiveStart;c<a;c++){const d=r.data[c];d.contentQueries&&d.contentQueries(1,e[c],c)}}}(c,v,a)),null!==o&&wy(a,v)}function nt(){let r=Wn();Vu()?wc():(r=r.parent,Wo(r,!1));const t=r;Zt.lFrame.elementDepthCount--;const e=Hi();e.firstCreatePass&&(Xo(e,r),fc(r)&&e.queries.elementEnd(r)),null!=t.classesWithoutHost&&function(r){return 0!=(16&r.flags)}(t)&&zy(e,t,Je(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(r){return 0!=(32&r.flags)}(t)&&zy(e,t,Je(),t.stylesWithoutHost,!1)}function Gi(r,t,e,o){it(r,t,e,o),nt()}function Jh(){return Je()}function Lf(r){return!!r&&"function"==typeof r.then}function vD(r){return!!r&&"function"==typeof r.subscribe}const Gm=vD;function ci(r,t,e,o){const a=Je(),c=Hi(),d=Wn();return bD(c,a,a[11],d,r,t,!!e,o),ci}function jm(r,t){const e=Wn(),o=Je(),a=Hi();return bD(a,o,D0(ha(a.data),e,o),e,r,t,!1),jm}function bD(r,t,e,o,a,c,d,p){const g=xs(o),E=r.firstCreatePass&&S0(r),D=t[8],x=w0(t);let L=!0;if(3&o.type||p){const $=jr(o,t),ge=p?p($):$,be=x.length,$e=p?et=>p(Tn(et[o.index])):o.index;if(Nn(e)){let et=null;if(!p&&g&&(et=function(r,t,e,o){const a=r.cleanup;if(null!=a)for(let c=0;c<a.length-1;c+=2){const d=a[c];if(d===e&&a[c+1]===o){const p=t[7],g=a[c+2];return p.length>g?p[g]:null}"string"==typeof d&&(c+=2)}return null}(r,t,a,o.index)),null!==et)(et.__ngLastListenerFn__||et).__ngNextListenerFn__=c,et.__ngLastListenerFn__=c,L=!1;else{c=Yy(o,t,D,c,!1);const Bt=e.listen(ge,a,c);x.push(c,Bt),E&&E.push(a,$e,be,be+1)}}else c=Yy(o,t,D,c,!0),ge.addEventListener(a,c,d),x.push(c),E&&E.push(a,$e,be,d)}else c=Yy(o,t,D,c,!1);const U=o.outputs;let ee;if(L&&null!==U&&(ee=U[a])){const $=ee.length;if($)for(let ge=0;ge<$;ge+=2){const Mi=t[ee[ge]][ee[ge+1]].subscribe(c),ki=x.length;x.push(c,Mi),E&&E.push(a,o.index,ki,-(ki+1))}}}function yD(r,t,e,o){try{return!1!==e(o)}catch(a){return R0(r,a),!1}}function Yy(r,t,e,o,a){return function c(d){if(d===Function)return o;const p=2&r.flags?Sr(r.index,t):t;0==(32&t[2])&&My(p);let g=yD(t,0,o,d),v=c.__ngNextListenerFn__;for(;v;)g=yD(t,0,v,d)&&g,v=v.__ngNextListenerFn__;return a&&!1===g&&(d.preventDefault(),d.returnValue=!1),g}}function vr(r=1){return function(r){return(Zt.lFrame.contextLView=function(r,t){for(;r>0;)t=t[15],r--;return t}(r,Zt.lFrame.contextLView))[8]}(r)}function BF(r,t){let e=null;const o=function(r){const t=r.attrs;if(null!=t){const e=t.indexOf(5);if(0==(1&e))return t[e+1]}return null}(r);for(let a=0;a<t.length;a++){const c=t[a];if("*"!==c){if(null===o?KS(r,c,!0):WP(o,c))return a}else e=a}return e}function Fn(r){const t=Je()[16][6];if(!t.projection){const o=t.projection=ga(r?r.length:1,null),a=o.slice();let c=t.child;for(;null!==c;){const d=r?BF(c,r):0;null!==d&&(a[d]?a[d].projectionNext=c:o[d]=c,a[d]=c),c=c.next}}}function Oi(r,t=0,e){const o=Je(),a=Hi(),c=kh(a,20+r,16,null,e||null);null===c.projection&&(c.projection=t),wc(),64!=(64&c.flags)&&function(r,t,e){WS(t[11],0,t,e,NS(r,e,t),BS(e.parent||t[6],e,t))}(a,o,c)}function xD(r,t,e,o,a){const c=r[e+1],d=null===t;let p=o?_a(c):Vl(c),g=!1;for(;0!==p&&(!1===g||d);){const E=r[p+1];UF(r[p],t)&&(g=!0,r[p+1]=o?gy(E):py(E)),p=o?_a(E):Vl(E)}g&&(r[e+1]=o?py(c):gy(c))}function UF(r,t){return null===r||null==t||(Array.isArray(r)?r[1]:r)===t||!(!Array.isArray(r)||"string"!=typeof t)&&Fc(r,t)>=0}function Ko(r,t,e){return ba(r,t,e,!1),Ko}function Li(r,t){return ba(r,t,null,!0),Li}function ba(r,t,e,o){const a=Je(),c=Hi(),d=hs(2);c.firstUpdatePass&&function(r,t,e,o){const a=r.data;if(null===a[e+1]){const c=a[jt()],d=function(r,t){return t>=r.expandoStartIndex}(r,e);(function(r,t){return 0!=(r.flags&(t?16:32))})(c,o)&&null===t&&!d&&(t=!1),t=function(r,t,e,o){const a=ha(r);let c=o?t.residualClasses:t.residualStyles;if(null===a)0===(o?t.classBindings:t.styleBindings)&&(e=Ff(e=$y(null,r,t,e,o),t.attrs,o),c=null);else{const d=t.directiveStylingLast;if(-1===d||r[d]!==a)if(e=$y(a,r,t,e,o),null===c){let g=function(r,t,e){const o=e?t.classBindings:t.styleBindings;if(0!==Vl(o))return r[_a(o)]}(r,t,o);void 0!==g&&Array.isArray(g)&&(g=$y(null,r,t,g[1],o),g=Ff(g,t.attrs,o),function(r,t,e,o){r[_a(e?t.classBindings:t.styleBindings)]=o}(r,t,o,g))}else c=function(r,t,e){let o;const a=t.directiveEnd;for(let c=1+t.directiveStylingLast;c<a;c++)o=Ff(o,r[c].hostAttrs,e);return Ff(o,t.attrs,e)}(r,t,o)}return void 0!==c&&(o?t.residualClasses=c:t.residualStyles=c),e}(a,c,t,o),function(r,t,e,o,a,c){let d=c?t.classBindings:t.styleBindings,p=_a(d),g=Vl(d);r[o]=e;let E,v=!1;if(Array.isArray(e)){const D=e;E=D[1],(null===E||Fc(D,E)>0)&&(v=!0)}else E=e;if(a)if(0!==g){const x=_a(r[p+1]);r[o+1]=Am(x,p),0!==x&&(r[x+1]=fy(r[x+1],o)),r[p+1]=function(r,t){return 131071&r|t<<17}(r[p+1],o)}else r[o+1]=Am(p,0),0!==p&&(r[p+1]=fy(r[p+1],o)),p=o;else r[o+1]=Am(g,0),0===p?p=o:r[g+1]=fy(r[g+1],o),g=o;v&&(r[o+1]=py(r[o+1])),xD(r,E,o,!0),xD(r,E,o,!1),function(r,t,e,o,a){const c=a?r.residualClasses:r.residualStyles;null!=c&&"string"==typeof t&&Fc(c,t)>=0&&(e[o+1]=gy(e[o+1]))}(t,E,r,o,c),d=Am(p,g),c?t.classBindings=d:t.styleBindings=d}(a,c,t,e,d,o)}}(c,r,d,o),t!==Ti&&yo(a,d,t)&&function(r,t,e,o,a,c,d,p){if(!(3&t.type))return;const g=r.data,v=g[p+1];Wm(function(r){return 1==(1&r)}(v)?UD(g,t,e,a,Vl(v),d):void 0)||(Wm(c)||function(r){return 2==(2&r)}(v)&&(c=UD(g,null,e,a,p,d)),function(r,t,e,o,a){const c=Nn(r);if(t)a?c?r.addClass(e,o):e.classList.add(o):c?r.removeClass(e,o):e.classList.remove(o);else{let d=-1===o.indexOf("-")?void 0:ms.DashCase;if(null==a)c?r.removeStyle(e,o,d):e.style.removeProperty(o);else{const p="string"==typeof a&&a.endsWith("!important");p&&(a=a.slice(0,-10),d|=ms.Important),c?r.setStyle(e,o,a,d):e.style.setProperty(o,a,p?"important":"")}}}(o,d,Ec(jt(),e),a,c))}(c,c.data[jt()],a,a[11],r,a[d+1]=function(r,t){return null==r||("string"==typeof t?r+=t:"object"==typeof r&&(r=ti(_o(r)))),r}(t,e),o,d)}function $y(r,t,e,o,a){let c=null;const d=e.directiveEnd;let p=e.directiveStylingLast;for(-1===p?p=e.directiveStart:p++;p<d&&(c=t[p],o=Ff(o,c.hostAttrs,a),c!==r);)p++;return null!==r&&(e.directiveStylingLast=p),o}function Ff(r,t,e){const o=e?1:2;let a=-1;if(null!==t)for(let c=0;c<t.length;c++){const d=t[c];"number"==typeof d?a=d:a===o&&(Array.isArray(r)||(r=void 0===r?[]:["",r]),mo(r,d,!!e||t[++c]))}return void 0===r?null:r}function UD(r,t,e,o,a,c){const d=null===t;let p;for(;a>0;){const g=r[a],v=Array.isArray(g),E=v?g[1]:g,D=null===E;let x=e[a+1];x===Ti&&(x=D?Vi:void 0);let L=D?gf(x,o):E===o?x:void 0;if(v&&!Wm(L)&&(L=gf(g,o)),Wm(L)&&(p=L,d))return p;const U=r[a+1];a=d?_a(U):Vl(U)}if(null!==t){let g=c?t.residualClasses:t.residualStyles;null!=g&&(p=gf(g,o))}return p}function Wm(r){return void 0!==r}function xi(r,t=""){const e=Je(),o=Hi(),a=r+20,c=o.firstCreatePass?kh(o,a,1,t,null):o.data[a],d=e[a]=function(r,t){return Nn(r)?r.createText(t):r.createTextNode(t)}(e[11],t);Im(o,e,d,c),Wo(c,!1)}function ol(r,t,e){const o=Je(),a=function(r,t,e,o){return yo(r,Ns(),e)?t+li(e)+o:Ti}(o,r,t,e);return a!==Ti&&Ul(o,jt(),a),ol}function zm(r,t,e,o,a){const c=Je(),d=function(r,t,e,o,a,c){const p=ad(r,ds(),e,a);return hs(2),p?t+li(e)+o+li(a)+c:Ti}(c,r,t,e,o,a);return d!==Ti&&Ul(c,jt(),d),zm}function Jy(r,t,e,o,a,c,d){const p=Je(),g=Gh(p,r,t,e,o,a,c,d);return g!==Ti&&Ul(p,jt(),g),Jy}function jl(r,t,e){const o=Je();return yo(o,Ns(),t)&&_s(Hi(),bn(),o,r,t,o[11],e,!0),jl}function Ym(r,t,e){const o=Je();if(yo(o,Ns(),t)){const c=Hi(),d=bn();_s(c,d,o,r,t,D0(ha(c.data),d,o),e,!0)}return Ym}const ld=void 0;var CB=["en",[["a","p"],["AM","PM"],ld],[["AM","PM"],ld,ld],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ld,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ld,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ld,"{1} 'at' {0}",ld],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(r){const e=Math.floor(Math.abs(r)),o=r.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===o?1:5}];let Zh={};function oR(r){return r in Zh||(Zh[r]=Ni.ng&&Ni.ng.common&&Ni.ng.common.locales&&Ni.ng.common.locales[r]),Zh[r]}var Tt=(()=>((Tt=Tt||{})[Tt.LocaleId=0]="LocaleId",Tt[Tt.DayPeriodsFormat=1]="DayPeriodsFormat",Tt[Tt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Tt[Tt.DaysFormat=3]="DaysFormat",Tt[Tt.DaysStandalone=4]="DaysStandalone",Tt[Tt.MonthsFormat=5]="MonthsFormat",Tt[Tt.MonthsStandalone=6]="MonthsStandalone",Tt[Tt.Eras=7]="Eras",Tt[Tt.FirstDayOfWeek=8]="FirstDayOfWeek",Tt[Tt.WeekendRange=9]="WeekendRange",Tt[Tt.DateFormat=10]="DateFormat",Tt[Tt.TimeFormat=11]="TimeFormat",Tt[Tt.DateTimeFormat=12]="DateTimeFormat",Tt[Tt.NumberSymbols=13]="NumberSymbols",Tt[Tt.NumberFormats=14]="NumberFormats",Tt[Tt.CurrencyCode=15]="CurrencyCode",Tt[Tt.CurrencySymbol=16]="CurrencySymbol",Tt[Tt.CurrencyName=17]="CurrencyName",Tt[Tt.Currencies=18]="Currencies",Tt[Tt.Directionality=19]="Directionality",Tt[Tt.PluralCase=20]="PluralCase",Tt[Tt.ExtraData=21]="ExtraData",Tt))();const Xm="en-US";let sR=Xm;function qy(r,t,e,o,a){if(r=Nt(r),Array.isArray(r))for(let c=0;c<r.length;c++)qy(r[c],t,e,o,a);else{const c=Hi(),d=Je();let p=Fh(r)?r:Nt(r.provide),g=O0(r);const v=Wn(),E=1048575&v.providerIndexes,D=v.directiveStart,x=v.providerIndexes>>20;if(Fh(r)||!r.multi){const L=new Bs(g,a,X),U=tE(p,t,a?E:E+x,D);-1===U?(kl(go(v,d),c,p),eE(c,r,t.length),t.push(p),v.directiveStart++,v.directiveEnd++,a&&(v.providerIndexes+=1048576),e.push(L),d.push(L)):(e[U]=L,d[U]=L)}else{const L=tE(p,t,E+x,D),U=tE(p,t,E,E+x),ee=L>=0&&e[L],$=U>=0&&e[U];if(a&&!$||!a&&!ee){kl(go(v,d),c,p);const ge=function(r,t,e,o,a){const c=new Bs(r,e,X);return c.multi=[],c.index=t,c.componentProviders=0,xR(c,a,o&&!e),c}(a?E2:y2,e.length,a,o,g);!a&&$&&(e[U].providerFactory=ge),eE(c,r,t.length,0),t.push(p),v.directiveStart++,v.directiveEnd++,a&&(v.providerIndexes+=1048576),e.push(ge),d.push(ge)}else eE(c,r,L>-1?L:U,xR(e[a?U:L],g,!a&&o));!a&&o&&$&&e[U].componentProviders++}}}function eE(r,t,e,o){const a=Fh(t);if(a||function(r){return!!r.useClass}(t)){const d=(t.useClass||t).prototype.ngOnDestroy;if(d){const p=r.destroyHooks||(r.destroyHooks=[]);if(!a&&t.multi){const g=p.indexOf(e);-1===g?p.push(e,[o,d]):p[g+1].push(o,d)}else p.push(e,d)}}}function xR(r,t,e){return e&&r.componentProviders++,r.multi.push(t)-1}function tE(r,t,e,o){for(let a=e;a<o;a++)if(t[a]===r)return a;return-1}function y2(r,t,e,o){return iE(this.multi,[])}function E2(r,t,e,o){const a=this.multi;let c;if(this.providerFactory){const d=this.providerFactory.componentProviders,p=lr(e,e[1],this.providerFactory.index,o);c=p.slice(0,d),iE(a,c);for(let g=d;g<p.length;g++)c.push(p[g])}else c=[],iE(a,c);return c}function iE(r,t){for(let e=0;e<r.length;e++)t.push((0,r[e])());return t}function Rt(r,t=[]){return e=>{e.providersResolver=(o,a)=>function(r,t,e){const o=Hi();if(o.firstCreatePass){const a=Mo(r);qy(e,o.data,o.blueprint,a,!0),qy(t,o.data,o.blueprint,a,!1)}}(o,a?a(r):r,t)}}class AR{}const kR="ngComponent";class w2{resolveComponentFactory(t){throw function(r){const t=Error(`No component factory found for ${ti(r)}. Did you add it to @NgModule.entryComponents?`);return t[kR]=r,t}(t)}}let Wl=(()=>{class r{}return r.NULL=new w2,r})();function Zm(...r){}function ep(r,t){return new It(jr(r,t))}const R2=function(){return ep(Wn(),Je())};let It=(()=>{class r{constructor(e){this.nativeElement=e}}return r.__NG_ELEMENT_ID__=R2,r})();function NR(r){return r instanceof It?r.nativeElement:r}class cd{}let zl=(()=>{class r{}return r.__NG_ELEMENT_ID__=()=>I2(),r})();const I2=function(){const r=Je(),e=Sr(Wn().index,r);return function(r){return r[11]}(Ro(e)?e:r)};let rE=(()=>{class r{}return r.\u0275prov=rt({token:r,providedIn:"root",factory:()=>null}),r})();class Xc{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const PR=new Xc("13.0.0"),tp={};function qm(r,t,e,o,a=!1){for(;null!==e;){const c=t[e.index];if(null!==c&&o.push(Tn(c)),po(c))for(let p=10;p<c.length;p++){const g=c[p],v=g[1].firstChild;null!==v&&qm(g[1],g,v,o)}const d=e.type;if(8&d)qm(r,t,e.child,o);else if(32&d){const p=iy(e,t);let g;for(;g=p();)o.push(g)}else if(16&d){const p=GS(t,e);if(Array.isArray(p))o.push(...p);else{const g=Df(t[16]);qm(g[1],g,p,o,!0)}}e=a?e.projectionNext:e.next}return o}class Gf{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return qm(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(po(t)){const e=t[8],o=e?e.indexOf(this):-1;o>-1&&(ay(t,o),Ja(e,o))}this._attachedToViewContainer=!1}kS(this._lView[1],this._lView)}onDestroy(t){f0(this._lView[1],this._lView,null,t)}markForCheck(){My(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){xy(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(r,t,e){Wa(!0);try{xy(r,t,e)}finally{Wa(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,Rf(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class O2 extends Gf{constructor(t){super(t),this._view=t}detectChanges(){T0(this._view)}checkNoChanges(){!function(r){Wa(!0);try{T0(r)}finally{Wa(!1)}}(this._view)}get context(){return null}}class LR extends Wl{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=sr(t);return new oE(e,this.ngModule)}}function FR(r){const t=[];for(let e in r)r.hasOwnProperty(e)&&t.push({propName:r[e],templateName:e});return t}const N2=new xe("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>SS});class oE extends AR{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(zP).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return FR(this.componentDef.inputs)}get outputs(){return FR(this.componentDef.outputs)}create(t,e,o,a){const c=(a=a||this.ngModule)?function(r,t){return{get:(e,o,a)=>{const c=r.get(e,tp,a);return c!==tp||o===tp?c:t.get(e,o,a)}}}(t,a.injector):t,d=c.get(cd,Lu),p=c.get(rE,null),g=d.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",E=o?function(r,t,e){if(Nn(r))return r.selectRootElement(t,e===or.ShadowDom);let o="string"==typeof t?r.querySelector(t):t;return o.textContent="",o}(g,o,this.componentDef.encapsulation):sy(d.createRenderer(null,this.componentDef),v,function(r){const t=r.toLowerCase();return"svg"===t?vc:"math"===t?"http://www.w3.org/1998/MathML/":null}(v)),D=this.componentDef.onPush?576:528,x=function(r,t){return{components:[],scheduler:r||SS,clean:IL,playerHandler:t||null,flags:0}}(),L=Nm(0,null,null,1,0,null,null,null,null,null),U=Mf(null,L,x,D,null,null,d,g,p,c);let ee,$;Dc(U);try{const ge=function(r,t,e,o,a,c){const d=e[1];e[20]=r;const g=kh(d,20,2,"#host",null),v=g.mergedAttrs=t.hostAttrs;null!==v&&(Lm(g,v,!0),null!==r&&(xc(a,r,v),null!==g.classes&&hy(a,r,g.classes),null!==g.styles&&zS(a,r,g.styles)));const E=o.createRenderer(r,t),D=Mf(e,d0(t),null,t.onPush?64:16,e[20],g,o,E,c||null,null);return d.firstCreatePass&&(kl(go(g,e),d,t.type),b0(d,g),y0(g,e.length,1)),Pm(e,D),e[20]=D}(E,this.componentDef,U,d,g);if(E)if(o)xc(g,E,["ng-version",PR.full]);else{const{attrs:be,classes:$e}=function(r){const t=[],e=[];let o=1,a=2;for(;o<r.length;){let c=r[o];if("string"==typeof c)2===a?""!==c&&t.push(c,r[++o]):8===a&&e.push(c);else{if(!ma(a))break;a=c}o++}return{attrs:t,classes:e}}(this.componentDef.selectors[0]);be&&xc(g,E,be),$e&&$e.length>0&&hy(g,E,$e.join(" "))}if($=Cc(L,20),void 0!==e){const be=$.projection=[];for(let $e=0;$e<this.ngContentSelectors.length;$e++){const et=e[$e];be.push(null!=et?Array.from(et):null)}}ee=function(r,t,e,o,a){const c=e[1],d=function(r,t,e){const o=Wn();r.firstCreatePass&&(e.providersResolver&&e.providersResolver(e),E0(r,o,t,Nh(r,t,1,null),e));const a=lr(t,r,o.directiveStart,o);bo(a,t);const c=jr(o,t);return c&&bo(c,t),a}(c,e,t);if(o.components.push(d),r[8]=d,a&&a.forEach(g=>g(d,t)),t.contentQueries){const g=Wn();t.contentQueries(1,d,g.directiveStart)}const p=Wn();return!c.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(Yo(p.index),_0(e[1],p,0,p.directiveStart,p.directiveEnd,t),v0(t,d)),d}(ge,this.componentDef,U,x,[tF]),If(L,U,null)}finally{za()}return new F2(this.componentType,ee,ep($,U),U,$)}}class F2 extends class{}{constructor(t,e,o,a,c){super(),this.location=o,this._rootLView=a,this._tNode=c,this.instance=e,this.hostView=this.changeDetectorRef=new O2(a),this.componentType=t}get injector(){return new Ao(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}class sl{}class BR{}const ip=new Map;class HR extends sl{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new LR(this);const o=uo(t);this._bootstrapComponents=el(o.bootstrap),this._r3Injector=A0(t,e,[{provide:sl,useValue:this},{provide:Wl,useValue:this.componentFactoryResolver}],ti(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=tn.THROW_IF_NOT_FOUND,o=xt.Default){return t===tn||t===sl||t===xf?this:this._r3Injector.get(t,e,o)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class aE extends BR{constructor(t){super(),this.moduleType=t,null!==uo(t)&&function(r){const t=new Set;!function e(o){const a=uo(o,!0),c=a.id;null!==c&&(function(r,t,e){if(t&&t!==e)throw new Error(`Duplicate module registered for ${r} - ${ti(t)} vs ${ti(t.name)}`)}(c,ip.get(c),o),ip.set(c,o));const d=el(a.imports);for(const p of d)t.has(p)||(t.add(p),e(p))}(r)}(t)}create(t){return new HR(this.moduleType,t)}}function np(r,t,e,o){return UR(Je(),Lr(),r,t,e,o)}function UR(r,t,e,o,a,c){const d=t+e;return yo(r,d,a)?function(r,t,e){return r[t]=e}(r,d+1,c?o.call(c,a):o(a)):function(r,t){const e=r[t];return e===Ti?void 0:e}(r,d+1)}function rp(r,t){const e=Hi();let o;const a=r+20;e.firstCreatePass?(o=function(r,t){if(t)for(let e=t.length-1;e>=0;e--){const o=t[e];if(r===o.name)return o}throw new ws("302",`The pipe '${r}' could not be found!`)}(t,e.pipeRegistry),e.data[a]=o,o.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(a,o.onDestroy)):o=e.data[a];const c=o.factory||(o.factory=As(o.type)),d=Zr(X);try{const p=Ac(!1),g=c();return Ac(p),function(r,t,e,o){e>=r.data.length&&(r.data[e]=null,r.blueprint[e]=null),t[e]=o}(e,Je(),a,g),g}finally{Zr(d)}}function op(r,t,e){const o=r+20,a=Je(),c=Ga(a,o);return function(r,t){return r[1].data[t].pure}(a,o)?UR(a,Lr(),t,c.transform,e,c):c.transform(e)}function lE(r){return t=>{setTimeout(r,void 0,t)}}const Pt=class extends Se{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,o){var g,v,E;let a=t,c=e||(()=>null),d=o;if(t&&"object"==typeof t){const D=t;a=null==(g=D.next)?void 0:g.bind(D),c=null==(v=D.error)?void 0:v.bind(D),d=null==(E=D.complete)?void 0:E.bind(D)}this.__isAsync&&(c=lE(c),a&&(a=lE(a)),d&&(d=lE(d)));const p=super.subscribe({next:a,error:c,complete:d});return t instanceof l&&t.add(p),p}};function tV(){return this._results[Bh()]()}class $c{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Bh(),o=$c.prototype;o[e]||(o[e]=tV)}get changes(){return this._changes||(this._changes=new Pt)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const o=this;o.dirty=!1;const a=$o(t);(this._changesDetected=!function(r,t,e){if(r.length!==t.length)return!1;for(let o=0;o<r.length;o++){let a=r[o],c=t[o];if(e&&(a=e(a),c=e(c)),c!==a)return!1}return!0}(o._results,a,e))&&(o._results=a,o.length=a.length,o.last=a[this.length-1],o.first=a[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;const nV=function(){return e_(Wn(),Je())};let br=(()=>{class r{}return r.__NG_ELEMENT_ID__=nV,r})();const rV=br,oV=class extends rV{constructor(t,e,o){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=o}createEmbeddedView(t){const e=this._declarationTContainer.tViews,o=Mf(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);o[17]=this._declarationLView[this._declarationTContainer.index];const c=this._declarationLView[19];return null!==c&&(o[19]=c.createEmbeddedView(e)),If(e,o,t),new Gf(o)}};function e_(r,t){return 4&r.type?new oV(t,r,ep(r,t)):null}const lV=function(){return $R(Wn(),Je())};let hr=(()=>{class r{}return r.__NG_ELEMENT_ID__=lV,r})();const uV=hr,YR=class extends uV{constructor(t,e,o){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=o}get element(){return ep(this._hostTNode,this._hostLView)}get injector(){return new Ao(this._hostTNode,this._hostLView)}get parentInjector(){const t=Nc(this._hostTNode,this._hostLView);if(Ol(t)){const e=$a(t,this._hostLView),o=Xa(t);return new Ao(e[1].data[o+8],e)}return new Ao(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=XR(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,e,o){const a=t.createEmbeddedView(e||{});return this.insert(a,o),a}createComponent(t,e,o,a,c){const d=t&&!("function"==typeof t);let p;if(d)p=e;else{const D=e||{};p=D.index,o=D.injector,a=D.projectableNodes,c=D.ngModuleRef}const g=d?t:new oE(sr(t)),v=o||this.parentInjector;if(!c&&null==g.ngModule&&v){const D=v.get(sl,null);D&&(c=D)}const E=g.create(v,a,void 0,c);return this.insert(E.hostView,p),E}insert(t,e){const o=t._lView,a=o[1];if(po(o[3])){const E=this.indexOf(t);if(-1!==E)this.detach(E);else{const D=o[3],x=new YR(D,D[6],D[3]);x.detach(x.indexOf(t))}}const c=this._adjustIndex(e),d=this._lContainer;!function(r,t,e,o){const a=10+o,c=e.length;o>0&&(e[a-1][4]=t),o<c-10?(t[4]=e[a],Lc(e,10+o,t)):(e.push(t),t[4]=null),t[3]=e;const d=t[17];null!==d&&e!==d&&function(r,t){const e=r[9];t[16]!==t[3][3][16]&&(r[2]=!0),null===e?r[9]=[t]:e.push(t)}(d,t);const p=t[19];null!==p&&p.insertView(r),t[2]|=128}(a,o,d,c);const p=uy(c,d),g=o[11],v=Mm(g,d[7]);return null!==v&&function(r,t,e,o,a,c){o[0]=a,o[6]=t,Rf(r,o,e,1,a,c)}(a,d[6],g,o,v,p),t.attachToViewContainerRef(),Lc(cE(d),c,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=XR(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),o=ay(this._lContainer,e);o&&(Ja(cE(this._lContainer),e),kS(o[1],o))}detach(t){const e=this._adjustIndex(t,-1),o=ay(this._lContainer,e);return o&&null!=Ja(cE(this._lContainer),e)?new Gf(o):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function XR(r){return r[8]}function cE(r){return r[8]||(r[8]=[])}function $R(r,t){let e;const o=t[r.index];if(po(o))e=o;else{let a;if(8&r.type)a=Tn(o);else{const c=t[11];a=c.createComment("");const d=jr(r,t);sd(c,Mm(c,d),a,function(r,t){return Nn(r)?r.nextSibling(t):t.nextSibling}(c,d),!1)}t[r.index]=e=C0(o,t,a,r),Pm(t,e)}return new YR(e,r,t)}class uE{constructor(t){this.queryList=t,this.matches=null}clone(){return new uE(this.queryList)}setDirty(){this.queryList.setDirty()}}class dE{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const o=null!==t.contentQueries?t.contentQueries[0]:e.length,a=[];for(let c=0;c<o;c++){const d=e.getByIndex(c);a.push(this.queries[d.indexInDeclarationView].clone())}return new dE(a)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==qR(t,e).matches&&this.queries[e].setDirty()}}class KR{constructor(t,e,o=null){this.predicate=t,this.flags=e,this.read=o}}class hE{constructor(t=[]){this.queries=t}elementStart(t,e){for(let o=0;o<this.queries.length;o++)this.queries[o].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let o=0;o<this.length;o++){const a=null!==e?e.length:0,c=this.getByIndex(o).embeddedTView(t,a);c&&(c.indexInDeclarationView=o,null!==e?e.push(c):e=[c])}return null!==e?new hE(e):null}template(t,e){for(let o=0;o<this.queries.length;o++)this.queries[o].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class pE{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new pE(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let o=t.parent;for(;null!==o&&8&o.type&&o.index!==e;)o=o.parent;return e===(null!==o?o.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const o=this.metadata.predicate;if(Array.isArray(o))for(let a=0;a<o.length;a++){const c=o[a];this.matchTNodeWithReadOption(t,e,pV(e,c)),this.matchTNodeWithReadOption(t,e,ps(e,t,c,!1,!1))}else o===br?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,ps(e,t,o,!1,!1))}matchTNodeWithReadOption(t,e,o){if(null!==o){const a=this.metadata.read;if(null!==a)if(a===It||a===hr||a===br&&4&e.type)this.addMatch(e.index,-2);else{const c=ps(e,t,a,!1,!1);null!==c&&this.addMatch(e.index,c)}else this.addMatch(e.index,o)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function pV(r,t){const e=r.localNames;if(null!==e)for(let o=0;o<e.length;o+=2)if(e[o]===t)return e[o+1];return null}function gV(r,t,e,o){return-1===e?function(r,t){return 11&r.type?ep(r,t):4&r.type?e_(r,t):null}(t,r):-2===e?function(r,t,e){return e===It?ep(t,r):e===br?e_(t,r):e===hr?$R(t,r):void 0}(r,t,o):lr(r,r[1],e,t)}function JR(r,t,e,o){const a=t[19].queries[o];if(null===a.matches){const c=r.data,d=e.matches,p=[];for(let g=0;g<d.length;g+=2){const v=d[g];p.push(v<0?null:gV(t,c[v],d[g+1],e.metadata.read))}a.matches=p}return a.matches}function fE(r,t,e,o){const a=r.queries.getByIndex(e),c=a.matches;if(null!==c){const d=JR(r,t,a,e);for(let p=0;p<c.length;p+=2){const g=c[p];if(g>0)o.push(d[p/2]);else{const v=c[p+1],E=t[-g];for(let D=10;D<E.length;D++){const x=E[D];x[17]===x[3]&&fE(x[1],x,v,o)}if(null!==E[9]){const D=E[9];for(let x=0;x<D.length;x++){const L=D[x];fE(L[1],L,v,o)}}}}}return o}function Ht(r){const t=Je(),e=Hi(),o=Rl();Gu(o+1);const a=qR(e,o);if(r.dirty&&Sl(t)===(2==(2&a.metadata.flags))){if(null===a.matches)r.reset([]);else{const c=a.crossesNgTemplate?fE(e,t,o,[]):JR(e,t,a,o);r.reset(c,NR),r.notifyOnChanges()}return!0}return!1}function Kn(r,t,e){const o=Hi();o.firstCreatePass&&(ZR(o,new KR(r,t,e),-1),2==(2&t)&&(o.staticViewQueries=!0)),QR(o,Je(),t)}function Qi(r,t,e,o){const a=Hi();if(a.firstCreatePass){const c=Wn();ZR(a,new KR(t,e,o),c.index),function(r,t){const e=r.contentQueries||(r.contentQueries=[]);t!==(e.length?e[e.length-1]:-1)&&e.push(r.queries.length-1,t)}(a,r),2==(2&e)&&(a.staticContentQueries=!0)}QR(a,Je(),e)}function Ut(){return r=Je(),t=Rl(),r[19].queries[t].queryList;var r,t}function QR(r,t,e){const o=new $c(4==(4&e));f0(r,t,o,o.destroy),null===t[19]&&(t[19]=new dE),t[19].queries.push(new uE(o))}function ZR(r,t,e){null===r.queries&&(r.queries=new hE),r.queries.track(new pE(t,e))}function qR(r,t){return r.queries.getByIndex(t)}const ap=new xe("Application Initializer");let lp=(()=>{class r{constructor(e){this.appInits=e,this.resolve=Zm,this.reject=Zm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((o,a)=>{this.resolve=o,this.reject=a})}runInitializers(){if(this.initialized)return;const e=[],o=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let a=0;a<this.appInits.length;a++){const c=this.appInits[a]();if(Lf(c))e.push(c);else if(Gm(c)){const d=new Promise((p,g)=>{c.subscribe({complete:p,error:g})});e.push(d)}}Promise.all(e).then(()=>{o()}).catch(a=>{this.reject(a)}),0===e.length&&o(),this.initialized=!0}}return r.\u0275fac=function(e){return new(e||r)(Oe(ap,8))},r.\u0275prov=rt({token:r,factory:r.\u0275fac}),r})();const Yf=new xe("AppId"),YV={provide:Yf,useFactory:function(){return`${yE()}${yE()}${yE()}`},deps:[]};function yE(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const _M=new xe("Platform Initializer"),Xf=new xe("Platform ID"),vM=new xe("appBootstrapListener");let n_=(()=>{class r{log(e){console.log(e)}warn(e){console.warn(e)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=rt({token:r,factory:r.\u0275fac}),r})();const Yl=new xe("LocaleId"),bM=new xe("DefaultCurrencyCode");class $V{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const EE=function(r){return new aE(r)},KV=EE,JV=function(r){return Promise.resolve(EE(r))},EM=function(r){const t=EE(r),o=el(uo(r).declarations).reduce((a,c)=>{const d=sr(c);return d&&a.push(new oE(d)),a},[]);return new $V(t,o)},QV=EM,ZV=function(r){return Promise.resolve(EM(r))};let r_=(()=>{class r{constructor(){this.compileModuleSync=KV,this.compileModuleAsync=JV,this.compileModuleAndAllComponentsSync=QV,this.compileModuleAndAllComponentsAsync=ZV}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=rt({token:r,factory:r.\u0275fac}),r})();const tH=(()=>Promise.resolve(0))();function CE(r){"undefined"==typeof Zone?tH.then(()=>{r&&r.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",r)}class bi{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:o=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Pt(!1),this.onMicrotaskEmpty=new Pt(!1),this.onStable=new Pt(!1),this.onError=new Pt(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const a=this;a._nesting=0,a._outer=a._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(a._inner=a._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(a._inner=a._inner.fork(Zone.longStackTraceZoneSpec)),a.shouldCoalesceEventChangeDetection=!o&&e,a.shouldCoalesceRunChangeDetection=o,a.lastRequestAnimationFrameId=-1,a.nativeRequestAnimationFrame=function(){let r=Ni.requestAnimationFrame,t=Ni.cancelAnimationFrame;if("undefined"!=typeof Zone&&r&&t){const e=r[Zone.__symbol__("OriginalDelegate")];e&&(r=e);const o=t[Zone.__symbol__("OriginalDelegate")];o&&(t=o)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(r){const t=()=>{!function(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(Ni,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,wE(r),r.isCheckStableRunning=!0,TE(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),wE(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,o,a,c,d,p)=>{try{return CM(r),e.invokeTask(a,c,d,p)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===c.type||r.shouldCoalesceRunChangeDetection)&&t(),TM(r)}},onInvoke:(e,o,a,c,d,p,g)=>{try{return CM(r),e.invoke(a,c,d,p,g)}finally{r.shouldCoalesceRunChangeDetection&&t(),TM(r)}},onHasTask:(e,o,a,c)=>{e.hasTask(a,c),o===a&&("microTask"==c.change?(r._hasPendingMicrotasks=c.microTask,wE(r),TE(r)):"macroTask"==c.change&&(r.hasPendingMacrotasks=c.macroTask))},onHandleError:(e,o,a,c)=>(e.handleError(a,c),r.runOutsideAngular(()=>r.onError.emit(c)),!1)})}(a)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!bi.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(bi.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,o){return this._inner.run(t,e,o)}runTask(t,e,o,a){const c=this._inner,d=c.scheduleEventTask("NgZoneEvent: "+a,t,nH,Zm,Zm);try{return c.runTask(d,e,o)}finally{c.cancelTask(d)}}runGuarded(t,e,o){return this._inner.runGuarded(t,e,o)}runOutsideAngular(t){return this._outer.run(t)}}const nH={};function TE(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function wE(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function CM(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function TM(r){r._nesting--,TE(r)}class sH{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Pt,this.onMicrotaskEmpty=new Pt,this.onStable=new Pt,this.onError=new Pt}run(t,e,o){return t.apply(e,o)}runGuarded(t,e,o){return t.apply(e,o)}runOutsideAngular(t){return t()}runTask(t,e,o,a){return t.apply(e,o)}}let SE=(()=>{class r{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{bi.assertNotInAngularZone(),CE(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())CE(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(o=>!o.updateCb||!o.updateCb(e)||(clearTimeout(o.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,o,a){let c=-1;o&&o>0&&(c=setTimeout(()=>{this._callbacks=this._callbacks.filter(d=>d.timeoutId!==c),e(this._didWork,this.getPendingTasks())},o)),this._callbacks.push({doneCb:e,timeoutId:c,updateCb:a})}whenStable(e,o,a){if(a&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,o,a),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,o,a){return[]}}return r.\u0275fac=function(e){return new(e||r)(Oe(bi))},r.\u0275prov=rt({token:r,factory:r.\u0275fac}),r})(),wM=(()=>{class r{constructor(){this._applications=new Map,DE.addToWindow(this)}registerApplication(e,o){this._applications.set(e,o)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,o=!0){return DE.findTestabilityInTree(this,e,o)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=rt({token:r,factory:r.\u0275fac}),r})();class aH{addToWindow(t){}findTestabilityInTree(t,e,o){return null}}let DE=new aH,SM=!0,DM=!1;function RE(){return DM=!0,SM}let Ea;const RM=new xe("AllowMultipleToken");class ME{constructor(t,e){this.name=t,this.token=e}}function MM(r,t,e=[]){const o=`Platform: ${t}`,a=new xe(o);return(c=[])=>{let d=IM();if(!d||d.injector.get(RM,!1))if(r)r(e.concat(c).concat({provide:a,useValue:!0}));else{const p=e.concat(c).concat({provide:a,useValue:!0},{provide:Af,useValue:"platform"});!function(r){if(Ea&&!Ea.destroyed&&!Ea.injector.get(RM,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Ea=r.get(xM);const t=r.get(_M,null);t&&t.forEach(e=>e())}(tn.create({providers:p,name:o}))}return function(r){const t=IM();if(!t)throw new Error("No platform exists!");if(!t.injector.get(r,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(a)}}function IM(){return Ea&&!Ea.destroyed?Ea:null}let xM=(()=>{class r{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,o){const p=function(r,t){let e;return e="noop"===r?new sH:("zone.js"===r?void 0:r)||new bi({enableLongStackTrace:RE(),shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),e}(o?o.ngZone:void 0,{ngZoneEventCoalescing:o&&o.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:o&&o.ngZoneRunCoalescing||!1}),g=[{provide:bi,useValue:p}];return p.run(()=>{const v=tn.create({providers:g,parent:this.injector,name:e.moduleType.name}),E=e.create(v),D=E.injector.get(qa,null);if(!D)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return p.runOutsideAngular(()=>{const x=p.onError.subscribe({next:L=>{D.handleError(L)}});E.onDestroy(()=>{IE(this._modules,E),x.unsubscribe()})}),function(r,t,e){try{const o=e();return Lf(o)?o.catch(a=>{throw t.runOutsideAngular(()=>r.handleError(a)),a}):o}catch(o){throw t.runOutsideAngular(()=>r.handleError(o)),o}}(D,p,()=>{const x=E.injector.get(lp);return x.runInitializers(),x.donePromise.then(()=>(function(r){Qr(r,"Expected localeId to be defined"),"string"==typeof r&&(sR=r.toLowerCase().replace(/_/g,"-"))}(E.injector.get(Yl,Xm)||Xm),this._moduleDoBootstrap(E),E))})})}bootstrapModule(e,o=[]){const a=AM({},o);return function(r,t,e){const o=new aE(e);return Promise.resolve(o)}(0,0,e).then(c=>this.bootstrapModuleFactory(c,a))}_moduleDoBootstrap(e){const o=e.injector.get(ud);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(a=>o.bootstrap(a));else{if(!e.instance.ngDoBootstrap)throw new Error(`The module ${ti(e.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);e.instance.ngDoBootstrap(o)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(e){return new(e||r)(Oe(tn))},r.\u0275prov=rt({token:r,factory:r.\u0275fac}),r})();function AM(r,t){return Array.isArray(t)?t.reduce(AM,r):ht(ht({},r),t)}let ud=(()=>{class r{constructor(e,o,a,c,d){this._zone=e,this._injector=o,this._exceptionHandler=a,this._componentFactoryResolver=c,this._initStatus=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const p=new re(v=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{v.next(this._stable),v.complete()})}),g=new re(v=>{let E;this._zone.runOutsideAngular(()=>{E=this._zone.onStable.subscribe(()=>{bi.assertNotInAngularZone(),CE(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,v.next(!0))})})});const D=this._zone.onUnstable.subscribe(()=>{bi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{v.next(!1)}))});return()=>{E.unsubscribe(),D.unsubscribe()}});this.isStable=Cr(p,g.pipe(qo()))}bootstrap(e,o){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let a;a=e instanceof AR?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(a.componentType);const c=function(r){return r.isBoundToModule}(a)?void 0:this._injector.get(sl),p=a.create(tn.NULL,[],o||a.selector,c),g=p.location.nativeElement,v=p.injector.get(SE,null),E=v&&p.injector.get(wM);return v&&E&&E.registerApplication(g,v),p.onDestroy(()=>{this.detachView(p.hostView),IE(this.components,p),E&&E.unregisterApplication(g)}),this._loadComponent(p),p}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const o=e;this._views.push(o),o.attachToAppRef(this)}detachView(e){const o=e;IE(this._views,o),o.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(vM,[]).concat(this._bootstrapListeners).forEach(a=>a(e))}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return r.\u0275fac=function(e){return new(e||r)(Oe(bi),Oe(tn),Oe(qa),Oe(Wl),Oe(lp))},r.\u0275prov=rt({token:r,factory:r.\u0275fac}),r})();function IE(r,t){const e=r.indexOf(t);e>-1&&r.splice(e,1)}const CH=function(r){return function(r,t,e){if(yl(r)&&!e){const o=Sr(r.index,t);return new Gf(o,o)}return 47&r.type?new Gf(t[16],t):null}(Wn(),Je(),16==(16&r))};let Bn=(()=>{class r{}return r.__NG_ELEMENT_ID__=CH,r})();class BM{constructor(){}supports(t){return Nf(t)}create(t){return new PH(t)}}const NH=(r,t)=>t;class PH{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||NH}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,o=this._removalsHead,a=0,c=null;for(;e||o;){const d=!o||e&&e.currentIndex<HM(o,a,c)?e:o,p=HM(d,a,c),g=d.currentIndex;if(d===o)a--,o=o._nextRemoved;else if(e=e._next,null==d.previousIndex)a++;else{c||(c=[]);const v=p-a,E=g-a;if(v!=E){for(let x=0;x<v;x++){const L=x<c.length?c[x]:c[x]=0,U=L+x;E<=U&&U<v&&(c[x]=L+1)}c[d.previousIndex]=E-v}}p!==g&&t(d,p,g)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Nf(t))throw new Error(`Error trying to diff '${ti(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let a,c,d,e=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let p=0;p<this.length;p++)c=t[p],d=this._trackByFn(p,c),null!==e&&Object.is(e.trackById,d)?(o&&(e=this._verifyReinsertion(e,c,d,p)),Object.is(e.item,c)||this._addIdentityChange(e,c)):(e=this._mismatch(e,c,d,p),o=!0),e=e._next}else a=0,function(r,t){if(Array.isArray(r))for(let e=0;e<r.length;e++)t(r[e]);else{const e=r[Bh()]();let o;for(;!(o=e.next()).done;)t(o.value)}}(t,p=>{d=this._trackByFn(a,p),null!==e&&Object.is(e.trackById,d)?(o&&(e=this._verifyReinsertion(e,p,d,a)),Object.is(e.item,p)||this._addIdentityChange(e,p)):(e=this._mismatch(e,p,d,a),o=!0),e=e._next,a++}),this.length=a;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,o,a){let c;return null===t?c=this._itTail:(c=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,c,a)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(o,a))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,c,a)):t=this._addAfter(new LH(e,o),c,a),t}_verifyReinsertion(t,e,o,a){let c=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null);return null!==c?t=this._reinsertAfter(c,t._prev,a):t.currentIndex!=a&&(t.currentIndex=a,this._addToMoves(t,a)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,o){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const a=t._prevRemoved,c=t._nextRemoved;return null===a?this._removalsHead=c:a._nextRemoved=c,null===c?this._removalsTail=a:c._prevRemoved=a,this._insertAfter(t,e,o),this._addToMoves(t,o),t}_moveAfter(t,e,o){return this._unlink(t),this._insertAfter(t,e,o),this._addToMoves(t,o),t}_addAfter(t,e,o){return this._insertAfter(t,e,o),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,o){const a=null===e?this._itHead:e._next;return t._next=a,t._prev=e,null===a?this._itTail=t:a._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new VM),this._linkedRecords.put(t),t.currentIndex=o,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,o=t._next;return null===e?this._itHead=o:e._next=o,null===o?this._itTail=e:o._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new VM),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class LH{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class FH{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let o;for(o=this._head;null!==o;o=o._nextDup)if((null===e||e<=o.currentIndex)&&Object.is(o.trackById,t))return o;return null}remove(t){const e=t._prevDup,o=t._nextDup;return null===e?this._head=o:e._nextDup=o,null===o?this._tail=e:o._prevDup=e,null===this._head}}class VM{constructor(){this.map=new Map}put(t){const e=t.trackById;let o=this.map.get(e);o||(o=new FH,this.map.set(e,o)),o.add(t)}get(t,e){const a=this.map.get(t);return a?a.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function HM(r,t,e){const o=r.previousIndex;if(null===o)return o;let a=0;return e&&o<e.length&&(a=e[o]),o+t+a}class UM{constructor(){}supports(t){return t instanceof Map||Hy(t)}create(){return new BH}}class BH{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Hy(t)))throw new Error(`Error trying to diff '${ti(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(o,a)=>{if(e&&e.key===a)this._maybeAddToChanges(e,o),this._appendAfter=e,e=e._next;else{const c=this._getOrCreateRecordForKey(a,o);e=this._insertBeforeOrAppend(e,c)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let o=e;null!==o;o=o._nextRemoved)o===this._mapHead&&(this._mapHead=null),this._records.delete(o.key),o._nextRemoved=o._next,o.previousValue=o.currentValue,o.currentValue=null,o._prev=null,o._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const o=t._prev;return e._next=t,e._prev=o,t._prev=e,o&&(o._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const a=this._records.get(t);this._maybeAddToChanges(a,e);const c=a._prev,d=a._next;return c&&(c._next=d),d&&(d._prev=c),a._next=null,a._prev=null,a}const o=new VH(t);return this._records.set(t,o),o.currentValue=e,this._addToAdditions(o),o}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(o=>e(t[o],o))}}class VH{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function GM(){return new vs([new BM])}let vs=(()=>{class r{constructor(e){this.factories=e}static create(e,o){if(null!=o){const a=o.factories.slice();e=e.concat(a)}return new r(e)}static extend(e){return{provide:r,useFactory:o=>r.create(e,o||GM()),deps:[[r,new gr,new Ln]]}}find(e){const o=this.factories.find(a=>a.supports(e));if(null!=o)return o;throw new Error(`Cannot find a differ supporting object '${e}' of type '${function(r){return r.name||typeof r}(e)}'`)}}return r.\u0275prov=rt({token:r,providedIn:"root",factory:GM}),r})();function jM(){return new cp([new UM])}let cp=(()=>{class r{constructor(e){this.factories=e}static create(e,o){if(o){const a=o.factories.slice();e=e.concat(a)}return new r(e)}static extend(e){return{provide:r,useFactory:o=>r.create(e,o||jM()),deps:[[r,new gr,new Ln]]}}find(e){const o=this.factories.find(a=>a.supports(e));if(o)return o;throw new Error(`Cannot find a differ supporting object '${e}'`)}}return r.\u0275prov=rt({token:r,providedIn:"root",factory:jM}),r})();const UH=[new UM],jH=new vs([new BM]),WH=new cp(UH),zH=MM(null,"core",[{provide:Xf,useValue:"unknown"},{provide:xM,deps:[tn]},{provide:wM,deps:[]},{provide:n_,deps:[]}]),JH=[{provide:ud,useClass:ud,deps:[bi,tn,qa,Wl,lp]},{provide:N2,deps:[bi],useFactory:function(r){let t=[];return r.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(e){t.push(e)}}},{provide:lp,useClass:lp,deps:[[new Ln,ap]]},{provide:r_,useClass:r_,deps:[]},YV,{provide:vs,useFactory:function(){return jH},deps:[]},{provide:cp,useFactory:function(){return WH},deps:[]},{provide:Yl,useFactory:function(r){return r||"undefined"!=typeof $localize&&$localize.locale||Xm},deps:[[new Gc(Yl),new Ln,new gr]]},{provide:bM,useValue:"USD"}];let ZH=(()=>{class r{constructor(e){}}return r.\u0275fac=function(e){return new(e||r)(Oe(ud))},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({providers:JH}),r})(),v_=null;function al(){return v_}const Kt=new xe("DocumentToken");let gd=(()=>{class r{historyGo(e){throw new Error("Not implemented")}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=rt({token:r,factory:function(){return Oe(RI)},providedIn:"platform"}),r})();const YG=new xe("Location Initialized");let RI=(()=>{class r extends gd{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return al().getBaseHref(this._doc)}onPopState(e){const o=al().getGlobalEventTarget(this._doc,"window");return o.addEventListener("popstate",e,!1),()=>o.removeEventListener("popstate",e)}onHashChange(e){const o=al().getGlobalEventTarget(this._doc,"window");return o.addEventListener("hashchange",e,!1),()=>o.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,o,a){MI()?this._history.pushState(e,o,a):this.location.hash=a}replaceState(e,o,a){MI()?this._history.replaceState(e,o,a):this.location.hash=a}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return r.\u0275fac=function(e){return new(e||r)(Oe(Kt))},r.\u0275prov=rt({token:r,factory:function(){return new RI(Oe(Kt))},providedIn:"platform"}),r})();function MI(){return!!window.history.pushState}function nC(r,t){if(0==r.length)return t;if(0==t.length)return r;let e=0;return r.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?r+t.substring(1):1==e?r+t:r+"/"+t}function II(r){const t=r.match(/#|\?|$/),e=t&&t.index||r.length;return r.slice(0,e-("/"===r[e-1]?1:0))+r.slice(e)}function $l(r){return r&&"?"!==r[0]?"?"+r:r}let gp=(()=>{class r{historyGo(e){throw new Error("Not implemented")}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=rt({token:r,factory:function(){return function(r){const t=Oe(Kt).location;return new xI(Oe(gd),t&&t.origin||"")}()},providedIn:"root"}),r})();const rC=new xe("appBaseHref");let xI=(()=>{class r extends gp{constructor(e,o){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==o&&(o=this._platformLocation.getBaseHrefFromDOM()),null==o)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=o}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return nC(this._baseHref,e)}path(e=!1){const o=this._platformLocation.pathname+$l(this._platformLocation.search),a=this._platformLocation.hash;return a&&e?`${o}${a}`:o}pushState(e,o,a,c){const d=this.prepareExternalUrl(a+$l(c));this._platformLocation.pushState(e,o,d)}replaceState(e,o,a,c){const d=this.prepareExternalUrl(a+$l(c));this._platformLocation.replaceState(e,o,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var o,a;null==(a=(o=this._platformLocation).historyGo)||a.call(o,e)}}return r.\u0275fac=function(e){return new(e||r)(Oe(gd),Oe(rC,8))},r.\u0275prov=rt({token:r,factory:r.\u0275fac}),r})(),KG=(()=>{class r extends gp{constructor(e,o){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=o&&(this._baseHref=o)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let o=this._platformLocation.hash;return null==o&&(o="#"),o.length>0?o.substring(1):o}prepareExternalUrl(e){const o=nC(this._baseHref,e);return o.length>0?"#"+o:o}pushState(e,o,a,c){let d=this.prepareExternalUrl(a+$l(c));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(e,o,d)}replaceState(e,o,a,c){let d=this.prepareExternalUrl(a+$l(c));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(e,o,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var o,a;null==(a=(o=this._platformLocation).historyGo)||a.call(o,e)}}return r.\u0275fac=function(e){return new(e||r)(Oe(gd),Oe(rC,8))},r.\u0275prov=rt({token:r,factory:r.\u0275fac}),r})(),og=(()=>{class r{constructor(e,o){this._subject=new Pt,this._urlChangeListeners=[],this._platformStrategy=e;const a=this._platformStrategy.getBaseHref();this._platformLocation=o,this._baseHref=II(AI(a)),this._platformStrategy.onPopState(c=>{this._subject.emit({url:this.path(!0),pop:!0,state:c.state,type:c.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,o=""){return this.path()==this.normalize(e+$l(o))}normalize(e){return r.stripTrailingSlash(function(r,t){return r&&t.startsWith(r)?t.substring(r.length):t}(this._baseHref,AI(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,o="",a=null){this._platformStrategy.pushState(a,"",e,o),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+$l(o)),a)}replaceState(e,o="",a=null){this._platformStrategy.replaceState(a,"",e,o),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+$l(o)),a)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var o,a;null==(a=(o=this._platformStrategy).historyGo)||a.call(o,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(o=>{this._notifyUrlChangeListeners(o.url,o.state)}))}_notifyUrlChangeListeners(e="",o){this._urlChangeListeners.forEach(a=>a(e,o))}subscribe(e,o,a){return this._subject.subscribe({next:e,error:o,complete:a})}}return r.normalizeQueryParams=$l,r.joinWithSlash=nC,r.stripTrailingSlash=II,r.\u0275fac=function(e){return new(e||r)(Oe(gp),Oe(gd))},r.\u0275prov=rt({token:r,factory:function(){return new og(Oe(gp),Oe(gd))},providedIn:"root"}),r})();function AI(r){return r.replace(/\/index.html$/,"")}var Rr=(()=>((Rr=Rr||{})[Rr.Zero=0]="Zero",Rr[Rr.One=1]="One",Rr[Rr.Two=2]="Two",Rr[Rr.Few=3]="Few",Rr[Rr.Many=4]="Many",Rr[Rr.Other=5]="Other",Rr))();const o3=function(r){return function(r){const t=function(r){return r.toLowerCase().replace(/_/g,"-")}(r);let e=oR(t);if(e)return e;const o=t.split("-")[0];if(e=oR(o),e)return e;if("en"===o)return CB;throw new Error(`Missing locale data for the locale "${r}".`)}(r)[Tt.PluralCase]};class M_{}let N3=(()=>{class r extends M_{constructor(e){super(),this.locale=e}getPluralCategory(e,o){switch(o3(o||this.locale)(e)){case Rr.Zero:return"zero";case Rr.One:return"one";case Rr.Two:return"two";case Rr.Few:return"few";case Rr.Many:return"many";default:return"other"}}}return r.\u0275fac=function(e){return new(e||r)(Oe(Yl))},r.\u0275prov=rt({token:r,factory:r.\u0275fac}),r})();function HI(r,t){t=encodeURIComponent(t);for(const e of r.split(";")){const o=e.indexOf("="),[a,c]=-1==o?[e,""]:[e.slice(0,o),e.slice(o+1)];if(a.trim()===t)return decodeURIComponent(c)}return null}let UI=(()=>{class r{constructor(e,o,a,c){this._iterableDiffers=e,this._keyValueDiffers=o,this._ngEl=a,this._renderer=c,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(Nf(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(o=>this._toggleClass(o.key,o.currentValue)),e.forEachChangedItem(o=>this._toggleClass(o.key,o.currentValue)),e.forEachRemovedItem(o=>{o.previousValue&&this._toggleClass(o.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(o=>{if("string"!=typeof o.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${ti(o.item)}`);this._toggleClass(o.item,!0)}),e.forEachRemovedItem(o=>this._toggleClass(o.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(o=>this._toggleClass(o,!0)):Object.keys(e).forEach(o=>this._toggleClass(o,!!e[o])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(o=>this._toggleClass(o,!1)):Object.keys(e).forEach(o=>this._toggleClass(o,!1)))}_toggleClass(e,o){(e=e.trim())&&e.split(/\s+/g).forEach(a=>{o?this._renderer.addClass(this._ngEl.nativeElement,a):this._renderer.removeClass(this._ngEl.nativeElement,a)})}}return r.\u0275fac=function(e){return new(e||r)(X(vs),X(cp),X(It),X(zl))},r.\u0275dir=Ge({type:r,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),r})();class L3{constructor(t,e,o,a){this.$implicit=t,this.ngForOf=e,this.index=o,this.count=a}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let pC=(()=>{class r{constructor(e,o,a){this._viewContainer=e,this._template=o,this._differs=a,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(o){throw new Error(`Cannot find a differ supporting object '${e}' of type '${function(r){return r.name||typeof r}(e)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const o=[];e.forEachOperation((a,c,d)=>{if(null==a.previousIndex){const p=this._viewContainer.createEmbeddedView(this._template,new L3(null,this._ngForOf,-1,-1),null===d?void 0:d),g=new GI(a,p);o.push(g)}else if(null==d)this._viewContainer.remove(null===c?void 0:c);else if(null!==c){const p=this._viewContainer.get(c);this._viewContainer.move(p,d);const g=new GI(a,p);o.push(g)}});for(let a=0;a<o.length;a++)this._perViewChange(o[a].view,o[a].record);for(let a=0,c=this._viewContainer.length;a<c;a++){const d=this._viewContainer.get(a);d.context.index=a,d.context.count=c,d.context.ngForOf=this._ngForOf}e.forEachIdentityChange(a=>{this._viewContainer.get(a.currentIndex).context.$implicit=a.item})}_perViewChange(e,o){e.context.$implicit=o.item}static ngTemplateContextGuard(e,o){return!0}}return r.\u0275fac=function(e){return new(e||r)(X(hr),X(br),X(vs))},r.\u0275dir=Ge({type:r,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),r})();class GI{constructor(t,e){this.record=t,this.view=e}}let Qc=(()=>{class r{constructor(e,o){this._viewContainer=e,this._context=new B3,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=o}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){jI("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){jI("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,o){return!0}}return r.\u0275fac=function(e){return new(e||r)(X(hr),X(br))},r.\u0275dir=Ge({type:r,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),r})();class B3{constructor(){this.$implicit=null,this.ngIf=null}}function jI(r,t){if(t&&!t.createEmbeddedView)throw new Error(`${r} must be a TemplateRef, but received '${ti(t)}'.`)}class fC{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let I_=(()=>{class r{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const o=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||o,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),o}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let o=0;o<this._defaultViews.length;o++)this._defaultViews[o].enforceState(e)}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=Ge({type:r,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),r})(),WI=(()=>{class r{constructor(e,o,a){this.ngSwitch=a,a._addCase(),this._view=new fC(e,o)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return r.\u0275fac=function(e){return new(e||r)(X(hr),X(br),X(I_,9))},r.\u0275dir=Ge({type:r,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),r})();class G3{createSubscription(t,e){return t.subscribe({next:e,error:o=>{throw o}})}dispose(t){t.unsubscribe()}onDestroy(t){t.unsubscribe()}}class j3{createSubscription(t,e){return t.then(e,o=>{throw o})}dispose(t){}onDestroy(t){}}const W3=new j3,z3=new G3;let XI=(()=>{class r{constructor(e){this._ref=e,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,o=>this._updateLatestValue(e,o))}_selectStrategy(e){if(Lf(e))return W3;if(vD(e))return z3;throw function(r,t){return Error(`InvalidPipeArgument: '${t}' for pipe '${ti(r)}'`)}(r,e)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,o){e===this._obj&&(this._latestValue=o,this._ref.markForCheck())}}return r.\u0275fac=function(e){return new(e||r)(X(Bn,16))},r.\u0275pipe=pr({name:"async",type:r,pure:!1}),r})(),$I=(()=>{class r{constructor(e){this.differs=e,this.keyValues=[],this.compareFn=KI}transform(e,o=KI){if(!e||!(e instanceof Map)&&"object"!=typeof e)return null;this.differ||(this.differ=this.differs.find(e).create());const a=this.differ.diff(e),c=o!==this.compareFn;return a&&(this.keyValues=[],a.forEachItem(d=>{this.keyValues.push(function(r,t){return{key:r,value:t}}(d.key,d.currentValue))})),(a||c)&&(this.keyValues.sort(o),this.compareFn=o),this.keyValues}}return r.\u0275fac=function(e){return new(e||r)(X(cp,16))},r.\u0275pipe=pr({name:"keyvalue",type:r,pure:!1}),r})();function KI(r,t){const e=r.key,o=t.key;if(e===o)return 0;if(void 0===e)return 1;if(void 0===o)return-1;if(null===e)return 1;if(null===o)return-1;if("string"==typeof e&&"string"==typeof o)return e<o?-1:1;if("number"==typeof e&&"number"==typeof o)return e-o;if("boolean"==typeof e&&"boolean"==typeof o)return e<o?-1:1;const a=String(e),c=String(o);return a==c?0:a<c?-1:1}let Hr=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({providers:[{provide:M_,useClass:N3}]}),r})();const JI="browser";let dj=(()=>{class r{}return r.\u0275prov=rt({token:r,providedIn:"root",factory:()=>new hj(Oe(Kt),window)}),r})();class hj{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(r,t){const e=r.getElementById(t)||r.getElementsByName(t)[0];if(e)return e;if("function"==typeof r.createTreeWalker&&r.body&&(r.body.createShadowRoot||r.body.attachShadow)){const o=r.createTreeWalker(r.body,NodeFilter.SHOW_ELEMENT);let a=o.currentNode;for(;a;){const c=a.shadowRoot;if(c){const d=c.getElementById(t)||c.querySelector(`[name="${t}"]`);if(d)return d}a=o.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),o=e.left+this.window.pageXOffset,a=e.top+this.window.pageYOffset,c=this.offset();this.window.scrollTo(o-c[0],a-c[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=QI(this.window.history)||QI(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function QI(r){return Object.getOwnPropertyDescriptor(r,"scrollRestoration")}class ZI{}class _C extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var r;r=new _C,v_||(v_=r)}onAndCancel(t,e,o){return t.addEventListener(e,o,!1),()=>{t.removeEventListener(e,o,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(lg=lg||document.querySelector("base"),lg?lg.getAttribute("href"):null);return null==e?null:function(r){x_=x_||document.createElement("a"),x_.setAttribute("href",r);const t=x_.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){lg=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return HI(document.cookie,t)}}let x_,lg=null;const qI=new xe("TRANSITION_ID"),vj=[{provide:ap,useFactory:function(r,t,e){return()=>{e.get(lp).donePromise.then(()=>{const o=al(),a=t.querySelectorAll(`style[ng-transition="${r}"]`);for(let c=0;c<a.length;c++)o.remove(a[c])})}},deps:[qI,Kt,tn],multi:!0}];class vC{static init(){var r;r=new vC,DE=r}addToWindow(t){Ni.getAngularTestability=(o,a=!0)=>{const c=t.findTestabilityInTree(o,a);if(null==c)throw new Error("Could not find testability for element.");return c},Ni.getAllAngularTestabilities=()=>t.getAllTestabilities(),Ni.getAllAngularRootElements=()=>t.getAllRootElements(),Ni.frameworkStabilizers||(Ni.frameworkStabilizers=[]),Ni.frameworkStabilizers.push(o=>{const a=Ni.getAllAngularTestabilities();let c=a.length,d=!1;const p=function(g){d=d||g,c--,0==c&&o(d)};a.forEach(function(g){g.whenStable(p)})})}findTestabilityInTree(t,e,o){if(null==e)return null;const a=t.getTestability(e);return null!=a?a:o?al().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let bj=(()=>{class r{build(){return new XMLHttpRequest}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=rt({token:r,factory:r.\u0275fac}),r})();const cg=new xe("EventManagerPlugins");let O_=(()=>{class r{constructor(e,o){this._zone=o,this._eventNameToPlugin=new Map,e.forEach(a=>a.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,o,a){return this._findPluginFor(o).addEventListener(e,o,a)}addGlobalEventListener(e,o,a){return this._findPluginFor(o).addGlobalEventListener(e,o,a)}getZone(){return this._zone}_findPluginFor(e){const o=this._eventNameToPlugin.get(e);if(o)return o;const a=this._plugins;for(let c=0;c<a.length;c++){const d=a[c];if(d.supports(e))return this._eventNameToPlugin.set(e,d),d}throw new Error(`No event manager plugin found for event ${e}`)}}return r.\u0275fac=function(e){return new(e||r)(Oe(cg),Oe(bi))},r.\u0275prov=rt({token:r,factory:r.\u0275fac}),r})();class bC{constructor(t){this._doc=t}addGlobalEventListener(t,e,o){const a=al().getGlobalEventTarget(this._doc,t);if(!a)throw new Error(`Unsupported event target ${a} for event ${e}`);return this.addEventListener(a,e,o)}}let tx=(()=>{class r{constructor(){this._stylesSet=new Set}addStyles(e){const o=new Set;e.forEach(a=>{this._stylesSet.has(a)||(this._stylesSet.add(a),o.add(a))}),this.onStylesAdded(o)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=rt({token:r,factory:r.\u0275fac}),r})(),ug=(()=>{class r extends tx{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,o,a){e.forEach(c=>{const d=this._doc.createElement("style");d.textContent=c,a.push(o.appendChild(d))})}addHost(e){const o=[];this._addStylesToHost(this._stylesSet,e,o),this._hostNodes.set(e,o)}removeHost(e){const o=this._hostNodes.get(e);o&&o.forEach(ix),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((o,a)=>{this._addStylesToHost(e,a,o)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(ix))}}return r.\u0275fac=function(e){return new(e||r)(Oe(Kt))},r.\u0275prov=rt({token:r,factory:r.\u0275fac}),r})();function ix(r){al().remove(r)}const yC={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},EC=/%COMP%/g;function k_(r,t,e){for(let o=0;o<t.length;o++){let a=t[o];Array.isArray(a)?k_(r,a,e):(a=a.replace(EC,r),e.push(a))}return e}function ox(r){return t=>{if("__ngUnwrap__"===t)return r;!1===r(t)&&(t.preventDefault(),t.returnValue=!1)}}let N_=(()=>{class r{constructor(e,o,a){this.eventManager=e,this.sharedStylesHost=o,this.appId=a,this.rendererByCompId=new Map,this.defaultRenderer=new CC(e)}createRenderer(e,o){if(!e||!o)return this.defaultRenderer;switch(o.encapsulation){case or.Emulated:{let a=this.rendererByCompId.get(o.id);return a||(a=new Nj(this.eventManager,this.sharedStylesHost,o,this.appId),this.rendererByCompId.set(o.id,a)),a.applyToHost(e),a}case 1:case or.ShadowDom:return new Pj(this.eventManager,this.sharedStylesHost,e,o);default:if(!this.rendererByCompId.has(o.id)){const a=k_(o.id,o.styles,[]);this.sharedStylesHost.addStyles(a),this.rendererByCompId.set(o.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return r.\u0275fac=function(e){return new(e||r)(Oe(O_),Oe(ug),Oe(Yf))},r.\u0275prov=rt({token:r,factory:r.\u0275fac}),r})();class CC{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(yC[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,o){t&&t.insertBefore(e,o)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let o="string"==typeof t?document.querySelector(t):t;if(!o)throw new Error(`The selector "${t}" did not match any elements`);return e||(o.textContent=""),o}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,o,a){if(a){e=a+":"+e;const c=yC[a];c?t.setAttributeNS(c,e,o):t.setAttribute(e,o)}else t.setAttribute(e,o)}removeAttribute(t,e,o){if(o){const a=yC[o];a?t.removeAttributeNS(a,e):t.removeAttribute(`${o}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,o,a){a&(ms.DashCase|ms.Important)?t.style.setProperty(e,o,a&ms.Important?"important":""):t.style[e]=o}removeStyle(t,e,o){o&ms.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,o){t[e]=o}setValue(t,e){t.nodeValue=e}listen(t,e,o){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,ox(o)):this.eventManager.addEventListener(t,e,ox(o))}}class Nj extends CC{constructor(t,e,o,a){super(t),this.component=o;const c=k_(a+"-"+o.id,o.styles,[]);e.addStyles(c),this.contentAttr="_ngcontent-%COMP%".replace(EC,a+"-"+o.id),this.hostAttr="_nghost-%COMP%".replace(EC,a+"-"+o.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const o=super.createElement(t,e);return super.setAttribute(o,this.contentAttr,""),o}}class Pj extends CC{constructor(t,e,o,a){super(t),this.sharedStylesHost=e,this.hostEl=o,this.shadowRoot=o.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=k_(a.id,a.styles,[]);for(let d=0;d<c.length;d++){const p=document.createElement("style");p.textContent=c[d],this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,o){return super.insertBefore(this.nodeOrShadowRoot(t),e,o)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Lj=(()=>{class r extends bC{constructor(e){super(e)}supports(e){return!0}addEventListener(e,o,a){return e.addEventListener(o,a,!1),()=>this.removeEventListener(e,o,a)}removeEventListener(e,o,a){return e.removeEventListener(o,a)}}return r.\u0275fac=function(e){return new(e||r)(Oe(Kt))},r.\u0275prov=rt({token:r,factory:r.\u0275fac}),r})();const lx=["alt","control","meta","shift"],jj={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},cx={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Wj={alt:r=>r.altKey,control:r=>r.ctrlKey,meta:r=>r.metaKey,shift:r=>r.shiftKey};let zj=(()=>{class r extends bC{constructor(e){super(e)}supports(e){return null!=r.parseEventName(e)}addEventListener(e,o,a){const c=r.parseEventName(o),d=r.eventCallback(c.fullKey,a,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>al().onAndCancel(e,c.domEventName,d))}static parseEventName(e){const o=e.toLowerCase().split("."),a=o.shift();if(0===o.length||"keydown"!==a&&"keyup"!==a)return null;const c=r._normalizeKey(o.pop());let d="";if(lx.forEach(g=>{const v=o.indexOf(g);v>-1&&(o.splice(v,1),d+=g+".")}),d+=c,0!=o.length||0===c.length)return null;const p={};return p.domEventName=a,p.fullKey=d,p}static getEventFullKey(e){let o="",a=function(r){let t=r.key;if(null==t){if(t=r.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===r.location&&cx.hasOwnProperty(t)&&(t=cx[t]))}return jj[t]||t}(e);return a=a.toLowerCase()," "===a?a="space":"."===a&&(a="dot"),lx.forEach(c=>{c!=a&&Wj[c](e)&&(o+=c+".")}),o+=a,o}static eventCallback(e,o,a){return c=>{r.getEventFullKey(c)===e&&a.runGuarded(()=>o(c))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return r.\u0275fac=function(e){return new(e||r)(Oe(Kt))},r.\u0275prov=rt({token:r,factory:r.\u0275fac}),r})(),dg=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=rt({token:r,factory:function(e){let o=null;return o=e?new(e||r):Oe(wC),o},providedIn:"root"}),r})(),wC=(()=>{class r extends dg{constructor(e){super(),this._doc=e}sanitize(e,o){if(null==o)return null;switch(e){case ii.NONE:return o;case ii.HTML:return Hs(o,"HTML")?_o(o):Yn(this._doc,String(o)).toString();case ii.STYLE:return Hs(o,"Style")?_o(o):o;case ii.SCRIPT:if(Hs(o,"Script"))return _o(o);throw new Error("unsafe value used in a script context");case ii.URL:return Cm(o),Hs(o,"URL")?_o(o):rd(String(o));case ii.RESOURCE_URL:if(Hs(o,"ResourceURL"))return _o(o);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return function(r){return new Vb(r)}(e)}bypassSecurityTrustStyle(e){return function(r){return new Hb(r)}(e)}bypassSecurityTrustScript(e){return function(r){return new Ub(r)}(e)}bypassSecurityTrustUrl(e){return function(r){return new Gb(r)}(e)}bypassSecurityTrustResourceUrl(e){return function(r){return new jb(r)}(e)}}return r.\u0275fac=function(e){return new(e||r)(Oe(Kt))},r.\u0275prov=rt({token:r,factory:function(e){let o=null;return o=e?new e:function(r){return new wC(r.get(Kt))}(Oe(tn)),o},providedIn:"root"}),r})();const qj=MM(zH,"browser",[{provide:Xf,useValue:JI},{provide:_M,useValue:function(){_C.makeCurrent(),vC.init()},multi:!0},{provide:Kt,useFactory:function(){return r=document,bc=r,document;var r},deps:[]}]),eW=[[],{provide:Af,useValue:"root"},{provide:qa,useFactory:function(){return new qa},deps:[]},{provide:cg,useClass:Lj,multi:!0,deps:[Kt,bi,Xf]},{provide:cg,useClass:zj,multi:!0,deps:[Kt]},[],{provide:N_,useClass:N_,deps:[O_,ug,Yf]},{provide:cd,useExisting:N_},{provide:tx,useExisting:ug},{provide:ug,useClass:ug,deps:[Kt]},{provide:SE,useClass:SE,deps:[bi]},{provide:O_,useClass:O_,deps:[cg,bi]},{provide:ZI,useClass:bj,deps:[]},[]];let ux=(()=>{class r{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:r,providers:[{provide:Yf,useValue:e.appId},{provide:qI,useExisting:Yf},vj]}}}return r.\u0275fac=function(e){return new(e||r)(Oe(r,12))},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({providers:eW,imports:[Hr,ZH]}),r})(),dx=(()=>{class r{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return r.\u0275fac=function(e){return new(e||r)(Oe(Kt))},r.\u0275prov=rt({token:r,factory:function(e){let o=null;return o=e?new e:new dx(Oe(Kt)),o},providedIn:"root"}),r})();"undefined"!=typeof window&&window;const{isArray:lW}=Array,{getPrototypeOf:cW,prototype:uW,keys:dW}=Object;function px(r){if(1===r.length){const t=r[0];if(lW(t))return{args:t,keys:null};if(function(r){return r&&"object"==typeof r&&cW(r)===uW}(t)){const e=dW(t);return{args:e.map(o=>t[o]),keys:e}}}return{args:r,keys:null}}const{isArray:pW}=Array;function DC(r){return He(t=>function(r,t){return pW(t)?r(...t):r(t)}(r,t))}function fx(r,t){return r.reduce((e,o,a)=>(e[o]=t[a],e),{})}function gx(...r){const t=pu(r),{args:e,keys:o}=px(r),a=new re(c=>{const{length:d}=e;if(!d)return void c.complete();const p=new Array(d);let g=d,v=d;for(let E=0;E<d;E++){let D=!1;dt(e[E]).subscribe(new Ue(c,x=>{D||(D=!0,v--),p[E]=x},()=>g--,void 0,()=>{(!g||!D)&&(v||c.next(o?fx(o,p):p),c.complete())}))}});return t?a.pipe(DC(t)):a}let mx=(()=>{class r{constructor(e,o){this._renderer=e,this._elementRef=o,this.onChange=a=>{},this.onTouched=()=>{}}setProperty(e,o){this._renderer.setProperty(this._elementRef.nativeElement,e,o)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return r.\u0275fac=function(e){return new(e||r)(X(zl),X(It))},r.\u0275dir=Ge({type:r}),r})(),md=(()=>{class r extends mx{}return r.\u0275fac=function(){let t;return function(o){return(t||(t=pi(r)))(o||r)}}(),r.\u0275dir=Ge({type:r,features:[st]}),r})();const Kr=new xe("NgValueAccessor"),mW={provide:Kr,useExisting:hi(()=>P_),multi:!0},vW=new xe("CompositionEventMode");let P_=(()=>{class r extends mx{constructor(e,o,a){super(e,o),this._compositionMode=a,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const r=al()?al().getUserAgent():"";return/android (\d+)/.test(r.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return r.\u0275fac=function(e){return new(e||r)(X(zl),X(It),X(vW,8))},r.\u0275dir=Ge({type:r,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,o){1&e&&ci("input",function(c){return o._handleInput(c.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(c){return o._compositionEnd(c.target.value)})},features:[Rt([mW]),st]}),r})();const Ur=new xe("NgValidators"),eu=new xe("NgAsyncValidators");function Mx(r){return null!=r}function Ix(r){const t=Lf(r)?On(r):r;return Gm(t),t}function xx(r){let t={};return r.forEach(e=>{t=null!=e?ht(ht({},t),e):t}),0===Object.keys(t).length?null:t}function Ax(r,t){return t.map(e=>e(r))}function Ox(r){return r.map(t=>function(r){return!r.validate}(t)?t:e=>t.validate(e))}function RC(r){return null!=r?function(r){if(!r)return null;const t=r.filter(Mx);return 0==t.length?null:function(e){return xx(Ax(e,t))}}(Ox(r)):null}function MC(r){return null!=r?function(r){if(!r)return null;const t=r.filter(Mx);return 0==t.length?null:function(e){return gx(Ax(e,t).map(Ix)).pipe(He(xx))}}(Ox(r)):null}function Px(r,t){return null===r?[t]:Array.isArray(r)?[...r,t]:[r,t]}function IC(r){return r?Array.isArray(r)?r:[r]:[]}function L_(r,t){return Array.isArray(r)?r.includes(t):r===t}function Bx(r,t){const e=IC(t);return IC(r).forEach(a=>{L_(e,a)||e.push(a)}),e}function Vx(r,t){return IC(t).filter(e=>!L_(r,e))}class Hx{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=RC(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=MC(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class Po extends Hx{get formDirective(){return null}get path(){return null}}class Ql extends Hx{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let Gx=(()=>{class r extends class{constructor(t){this._cd=t}is(t){var e,o,a;return"submitted"===t?!!(null==(e=this._cd)?void 0:e.submitted):!!(null==(a=null==(o=this._cd)?void 0:o.control)?void 0:a[t])}}{constructor(e){super(e)}}return r.\u0275fac=function(e){return new(e||r)(X(Ql,2))},r.\u0275dir=Ge({type:r,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,o){2&e&&Li("ng-untouched",o.is("untouched"))("ng-touched",o.is("touched"))("ng-pristine",o.is("pristine"))("ng-dirty",o.is("dirty"))("ng-valid",o.is("valid"))("ng-invalid",o.is("invalid"))("ng-pending",o.is("pending"))},features:[st]}),r})();function hg(r,t){(function(r,t){const e=function(r){return r._rawValidators}(r);null!==t.validator?r.setValidators(Px(e,t.validator)):"function"==typeof e&&r.setValidators([e]);const o=function(r){return r._rawAsyncValidators}(r);null!==t.asyncValidator?r.setAsyncValidators(Px(o,t.asyncValidator)):"function"==typeof o&&r.setAsyncValidators([o]);const a=()=>r.updateValueAndValidity();H_(t._rawValidators,a),H_(t._rawAsyncValidators,a)})(r,t),t.valueAccessor.writeValue(r.value),function(r,t){t.valueAccessor.registerOnChange(e=>{r._pendingValue=e,r._pendingChange=!0,r._pendingDirty=!0,"change"===r.updateOn&&jx(r,t)})}(r,t),function(r,t){const e=(o,a)=>{t.valueAccessor.writeValue(o),a&&t.viewToModelUpdate(o)};r.registerOnChange(e),t._registerOnDestroy(()=>{r._unregisterOnChange(e)})}(r,t),function(r,t){t.valueAccessor.registerOnTouched(()=>{r._pendingTouched=!0,"blur"===r.updateOn&&r._pendingChange&&jx(r,t),"submit"!==r.updateOn&&r.markAsTouched()})}(r,t),function(r,t){if(t.valueAccessor.setDisabledState){const e=o=>{t.valueAccessor.setDisabledState(o)};r.registerOnDisabledChange(e),t._registerOnDestroy(()=>{r._unregisterOnDisabledChange(e)})}}(r,t)}function H_(r,t){r.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function jx(r,t){r._pendingDirty&&r.markAsDirty(),r.setValue(r._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1}function G_(r,t){const e=r.indexOf(t);e>-1&&r.splice(e,1)}const pg="VALID",j_="INVALID",mp="PENDING",fg="DISABLED";function PC(r){return(FC(r)?r.validators:r)||null}function Yx(r){return Array.isArray(r)?RC(r):r||null}function LC(r,t){return(FC(t)?t.asyncValidators:r)||null}function Xx(r){return Array.isArray(r)?MC(r):r||null}function FC(r){return null!=r&&!Array.isArray(r)&&"object"==typeof r}class BC{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=Yx(this._rawValidators),this._composedAsyncValidatorFn=Xx(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===pg}get invalid(){return this.status===j_}get pending(){return this.status==mp}get disabled(){return this.status===fg}get enabled(){return this.status!==fg}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=Yx(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=Xx(t)}addValidators(t){this.setValidators(Bx(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Bx(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(Vx(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(Vx(t,this._rawAsyncValidators))}hasValidator(t){return L_(this._rawValidators,t)}hasAsyncValidator(t){return L_(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=mp,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=fg,this.errors=null,this._forEachChild(o=>{o.disable(Nr(ht({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Nr(ht({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(o=>o(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=pg,this._forEachChild(o=>{o.enable(Nr(ht({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Nr(ht({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(o=>o(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===pg||this.status===mp)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?fg:pg}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=mp,this._hasOwnPendingAsyncValidator=!0;const e=Ix(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(o=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(o,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(r,t,e){if(null==t||(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length))return null;let o=r;return t.forEach(a=>{o=o instanceof VC?o.controls.hasOwnProperty(a)?o.controls[a]:null:o instanceof kW&&o.at(a)||null}),o}(this,t)}getError(t,e){const o=e?this.get(e):this;return o&&o.errors?o.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Pt,this.statusChanges=new Pt}_calculateStatus(){return this._allControlsDisabled()?fg:this.errors?j_:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(mp)?mp:this._anyControlsHaveStatus(j_)?j_:pg}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){FC(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class W_ extends BC{constructor(t=null,e,o){super(PC(e),LC(o,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(o=>o(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){G_(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){G_(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class VC extends BC{constructor(t,e,o){super(PC(e),LC(o,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,o={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,o={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(o=>{this._throwIfControlMissing(o),this.controls[o].setValue(t[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(o=>{this.controls[o]&&this.controls[o].patchValue(t[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((o,a)=>{o.reset(t[a],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,o)=>(t[o]=e instanceof W_?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,o)=>!!o._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const o=this.controls[e];o&&t(o,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const o=this.controls[e];if(this.contains(e)&&t(o))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,o)=>((e.enabled||this.disabled)&&(t[o]=e.value),t))}_reduceChildren(t,e){let o=t;return this._forEachChild((a,c)=>{o=e(o,a,c)}),o}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,o)=>{if(void 0===t[o])throw new Error(`Must supply a value for form control with name: '${o}'.`)})}}class kW extends BC{constructor(t,e,o){super(PC(e),LC(o,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,o={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:o.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,o={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((o,a)=>{this._throwIfControlMissing(a),this.at(a).setValue(o,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((o,a)=>{this.at(a)&&this.at(a).patchValue(o,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((o,a)=>{o.reset(t[a],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof W_?t.value:t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((e,o)=>!!o._syncPendingControls()||e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,o)=>{t(e,o)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,o)=>{if(void 0===t[o])throw new Error(`Must supply a value for form control at index: ${o}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const LW={provide:Ql,useExisting:hi(()=>HC)},Jx=(()=>Promise.resolve(null))();let HC=(()=>{class r extends Ql{constructor(e,o,a,c){super(),this.control=new W_,this._registered=!1,this.update=new Pt,this._parent=e,this._setValidators(o),this._setAsyncValidators(a),this.valueAccessor=function(r,t){if(!t)return null;let e,o,a;return Array.isArray(t),t.forEach(c=>{c.constructor===P_?e=c:function(r){return Object.getPrototypeOf(r.constructor)===md}(c)?o=c:a=c}),a||o||e||null}(0,c)}ngOnChanges(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),function(r,t){if(!r.hasOwnProperty("model"))return!1;const e=r.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(r,t){return[...t.path,r]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){hg(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){Jx.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1})})}_updateDisabled(e){const o=e.isDisabled.currentValue,a=""===o||o&&"false"!==o;Jx.then(()=>{a&&!this.control.disabled?this.control.disable():!a&&this.control.disabled&&this.control.enable()})}}return r.\u0275fac=function(e){return new(e||r)(X(Po,9),X(Ur,10),X(eu,10),X(Kr,10))},r.\u0275dir=Ge({type:r,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Rt([LW]),st,vn]}),r})(),Zx=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({}),r})(),az=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({imports:[[Zx]]}),r})(),lz=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({imports:[az]}),r})();function zt(...r){return On(r,na(r))}class Qo extends Se{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:o}=this;if(t)throw e;return this._throwIfClosed(),o}next(t){super.next(this._value=t)}}function mA(...r){const t=na(r),e=pu(r),{args:o,keys:a}=px(r);if(0===o.length)return On([],t);const c=new re(function(r,t,e=K){return o=>{_A(t,()=>{const{length:a}=r,c=new Array(a);let d=a,p=a;for(let g=0;g<a;g++)_A(t,()=>{const v=On(r[g],t);let E=!1;v.subscribe(new Ue(o,D=>{c[g]=D,E||(E=!0,p--),p||o.next(e(c.slice()))},()=>{--d||o.complete()}))},o)},o)}}(o,t,a?d=>fx(a,d):K));return e?c.pipe(DC(e)):c}function _A(r,t,e){r?rr(e,r,t):t()}const $_=S(r=>function(){r(this),this.name="EmptyError",this.message="no elements in sequence"});function mg(...r){return Un(1)(On(r,na(r)))}function K_(r){return new re(t=>{dt(r()).subscribe(t)})}function vA(){return Le((r,t)=>{let e=null;r._refCount++;const o=new Ue(t,void 0,void 0,void 0,()=>{if(!r||r._refCount<=0||0<--r._refCount)return void(e=null);const a=r._connection,c=e;e=null,a&&(!c||a===c)&&a.unsubscribe(),t.unsubscribe()});r.subscribe(o),o.closed||(e=r.connect())})}class dz extends re{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,Ve(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,null==t||t.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new l;const e=this.getSubject();t.add(this.source.subscribe(new Ue(e,void 0,()=>{this._teardown(),e.complete()},o=>{this._teardown(),e.error(o)},()=>this._teardown()))),t.closed&&(this._connection=null,t=l.EMPTY)}return t}refCount(){return vA()(this)}}function Ks(r,t){return Le((e,o)=>{let a=null,c=0,d=!1;const p=()=>d&&!a&&o.complete();e.subscribe(new Ue(o,g=>{null==a||a.unsubscribe();let v=0;const E=c++;dt(r(g,E)).subscribe(a=new Ue(o,D=>o.next(t?t(g,D,E,v++):D),()=>{a=null,p()}))},()=>{d=!0,p()}))})}function Js(...r){const t=na(r);return Le((e,o)=>{(t?mg(r,e,t):mg(r,e)).subscribe(o)})}function hz(r,t,e,o,a){return(c,d)=>{let p=e,g=t,v=0;c.subscribe(new Ue(d,E=>{const D=v++;g=p?r(g,E,D):(p=!0,E),o&&d.next(g)},a&&(()=>{p&&d.next(g),d.complete()})))}}function bA(r,t){return Le(hz(r,t,arguments.length>=2,!0))}function un(r,t){return Le((e,o)=>{let a=0;e.subscribe(new Ue(o,c=>r.call(t,c,a++)&&o.next(c)))})}function Zl(r){return Le((t,e)=>{let c,o=null,a=!1;o=t.subscribe(new Ue(e,void 0,void 0,d=>{c=dt(r(d,Zl(r)(t))),o?(o.unsubscribe(),o=null,c.subscribe(e)):a=!0})),a&&(o.unsubscribe(),o=null,c.subscribe(e))})}function _p(r,t){return y(t)?Dn(r,t,1):Dn(r,1)}function YC(r){return r<=0?()=>co:Le((t,e)=>{let o=[];t.subscribe(new Ue(e,a=>{o.push(a),r<o.length&&o.shift()},()=>{for(const a of o)e.next(a);e.complete()},void 0,()=>{o=null}))})}function yA(r=pz){return Le((t,e)=>{let o=!1;t.subscribe(new Ue(e,a=>{o=!0,e.next(a)},()=>o?e.complete():e.error(r())))})}function pz(){return new $_}function EA(r){return Le((t,e)=>{let o=!1;t.subscribe(new Ue(e,a=>{o=!0,e.next(a)},()=>{o||e.next(r),e.complete()}))})}function vp(r,t){const e=arguments.length>=2;return o=>o.pipe(r?un((a,c)=>r(a,c,o)):K,Rn(1),e?EA(t):yA(()=>new $_))}function Ir(r,t,e){const o=y(r)||t||e?{next:r,error:t,complete:e}:r;return o?Le((a,c)=>{var d;null===(d=o.subscribe)||void 0===d||d.call(o);let p=!0;a.subscribe(new Ue(c,g=>{var v;null===(v=o.next)||void 0===v||v.call(o,g),c.next(g)},()=>{var g;p=!1,null===(g=o.complete)||void 0===g||g.call(o),c.complete()},g=>{var v;p=!1,null===(v=o.error)||void 0===v||v.call(o,g),c.error(g)},()=>{var g,v;p&&(null===(g=o.unsubscribe)||void 0===g||g.call(o)),null===(v=o.finalize)||void 0===v||v.call(o)}))}):K}function CA(r){return Le((t,e)=>{try{t.subscribe(e)}finally{e.add(r)}})}class ql{constructor(t,e){this.id=t,this.url=e}}class XC extends ql{constructor(t,e,o="imperative",a=null){super(t,e),this.navigationTrigger=o,this.restoredState=a}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class _g extends ql{constructor(t,e,o){super(t,e),this.urlAfterRedirects=o}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class TA extends ql{constructor(t,e,o){super(t,e),this.reason=o}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class gz extends ql{constructor(t,e,o){super(t,e),this.error=o}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class mz extends ql{constructor(t,e,o,a){super(t,e),this.urlAfterRedirects=o,this.state=a}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _z extends ql{constructor(t,e,o,a){super(t,e),this.urlAfterRedirects=o,this.state=a}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vz extends ql{constructor(t,e,o,a,c){super(t,e),this.urlAfterRedirects=o,this.state=a,this.shouldActivate=c}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class bz extends ql{constructor(t,e,o,a){super(t,e),this.urlAfterRedirects=o,this.state=a}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yz extends ql{constructor(t,e,o,a){super(t,e),this.urlAfterRedirects=o,this.state=a}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wA{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class SA{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ez{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Cz{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Tz{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wz{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class DA{constructor(t,e,o){this.routerEvent=t,this.position=e,this.anchor=o}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const ji="primary";class Sz{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function bp(r){return new Sz(r)}const RA="ngNavigationCancelingError";function $C(r){const t=Error("NavigationCancelingError: "+r);return t[RA]=!0,t}function Rz(r,t,e){const o=e.path.split("/");if(o.length>r.length||"full"===e.pathMatch&&(t.hasChildren()||o.length<r.length))return null;const a={};for(let c=0;c<o.length;c++){const d=o[c],p=r[c];if(d.startsWith(":"))a[d.substring(1)]=p;else if(d!==p.path)return null}return{consumed:r.slice(0,o.length),posParams:a}}function ll(r,t){const e=r?Object.keys(r):void 0,o=t?Object.keys(t):void 0;if(!e||!o||e.length!=o.length)return!1;let a;for(let c=0;c<e.length;c++)if(a=e[c],!MA(r[a],t[a]))return!1;return!0}function MA(r,t){if(Array.isArray(r)&&Array.isArray(t)){if(r.length!==t.length)return!1;const e=[...r].sort(),o=[...t].sort();return e.every((a,c)=>o[c]===a)}return r===t}function IA(r){return Array.prototype.concat.apply([],r)}function xA(r){return r.length>0?r[r.length-1]:null}function ro(r,t){for(const e in r)r.hasOwnProperty(e)&&t(r[e],e)}function cl(r){return Gm(r)?r:Lf(r)?On(Promise.resolve(r)):zt(r)}const xz={exact:function kA(r,t,e){if(!vd(r.segments,t.segments)||!J_(r.segments,t.segments,e)||r.numberOfChildren!==t.numberOfChildren)return!1;for(const o in t.children)if(!r.children[o]||!kA(r.children[o],t.children[o],e))return!1;return!0},subset:NA},AA={exact:function(r,t){return ll(r,t)},subset:function(r,t){return Object.keys(t).length<=Object.keys(r).length&&Object.keys(t).every(e=>MA(r[e],t[e]))},ignored:()=>!0};function OA(r,t,e){return xz[e.paths](r.root,t.root,e.matrixParams)&&AA[e.queryParams](r.queryParams,t.queryParams)&&!("exact"===e.fragment&&r.fragment!==t.fragment)}function NA(r,t,e){return PA(r,t,t.segments,e)}function PA(r,t,e,o){if(r.segments.length>e.length){const a=r.segments.slice(0,e.length);return!(!vd(a,e)||t.hasChildren()||!J_(a,e,o))}if(r.segments.length===e.length){if(!vd(r.segments,e)||!J_(r.segments,e,o))return!1;for(const a in t.children)if(!r.children[a]||!NA(r.children[a],t.children[a],o))return!1;return!0}{const a=e.slice(0,r.segments.length),c=e.slice(r.segments.length);return!!(vd(r.segments,a)&&J_(r.segments,a,o)&&r.children[ji])&&PA(r.children[ji],t,c,o)}}function J_(r,t,e){return t.every((o,a)=>AA[e](r[a].parameters,o.parameters))}class _d{constructor(t,e,o){this.root=t,this.queryParams=e,this.fragment=o}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=bp(this.queryParams)),this._queryParamMap}toString(){return Pz.serialize(this)}}class $i{constructor(t,e){this.segments=t,this.children=e,this.parent=null,ro(e,(o,a)=>o.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Q_(this)}}class vg{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=bp(this.parameters)),this._parameterMap}toString(){return HA(this)}}function vd(r,t){return r.length===t.length&&r.every((e,o)=>e.path===t[o].path)}class LA{}class FA{parse(t){const e=new Wz(t);return new _d(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${bg(t.root,!0)}`,o=function(r){const t=Object.keys(r).map(e=>{const o=r[e];return Array.isArray(o)?o.map(a=>`${Z_(e)}=${Z_(a)}`).join("&"):`${Z_(e)}=${Z_(o)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);var r;return`${e}${o}${"string"==typeof t.fragment?`#${r=t.fragment,encodeURI(r)}`:""}`}}const Pz=new FA;function Q_(r){return r.segments.map(t=>HA(t)).join("/")}function bg(r,t){if(!r.hasChildren())return Q_(r);if(t){const e=r.children[ji]?bg(r.children[ji],!1):"",o=[];return ro(r.children,(a,c)=>{c!==ji&&o.push(`${c}:${bg(a,!1)}`)}),o.length>0?`${e}(${o.join("//")})`:e}{const e=function(r,t){let e=[];return ro(r.children,(o,a)=>{a===ji&&(e=e.concat(t(o,a)))}),ro(r.children,(o,a)=>{a!==ji&&(e=e.concat(t(o,a)))}),e}(r,(o,a)=>a===ji?[bg(r.children[ji],!1)]:[`${a}:${bg(o,!1)}`]);return 1===Object.keys(r.children).length&&null!=r.children[ji]?`${Q_(r)}/${e[0]}`:`${Q_(r)}/(${e.join("//")})`}}function BA(r){return encodeURIComponent(r).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Z_(r){return BA(r).replace(/%3B/gi,";")}function KC(r){return BA(r).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function q_(r){return decodeURIComponent(r)}function VA(r){return q_(r.replace(/\+/g,"%20"))}function HA(r){return`${KC(r.path)}${function(r){return Object.keys(r).map(t=>`;${KC(t)}=${KC(r[t])}`).join("")}(r.parameters)}`}const Vz=/^[^\/()?;=#]+/;function ev(r){const t=r.match(Vz);return t?t[0]:""}const Hz=/^[^=?&#]+/,Gz=/^[^&#]+/;class Wz{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new $i([],{}):new $i([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let o={};return this.peekStartsWith("(")&&(o=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(o[ji]=new $i(t,e)),o}parseSegment(){const t=ev(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new vg(q_(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=ev(this.remaining);if(!e)return;this.capture(e);let o="";if(this.consumeOptional("=")){const a=ev(this.remaining);a&&(o=a,this.capture(o))}t[q_(e)]=q_(o)}parseQueryParam(t){const e=function(r){const t=r.match(Hz);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let o="";if(this.consumeOptional("=")){const d=function(r){const t=r.match(Gz);return t?t[0]:""}(this.remaining);d&&(o=d,this.capture(o))}const a=VA(e),c=VA(o);if(t.hasOwnProperty(a)){let d=t[a];Array.isArray(d)||(d=[d],t[a]=d),d.push(c)}else t[a]=c}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const o=ev(this.remaining),a=this.remaining[o.length];if("/"!==a&&")"!==a&&";"!==a)throw new Error(`Cannot parse url '${this.url}'`);let c;o.indexOf(":")>-1?(c=o.substr(0,o.indexOf(":")),this.capture(c),this.capture(":")):t&&(c=ji);const d=this.parseChildren();e[c]=1===Object.keys(d).length?d[ji]:new $i([],d),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class UA{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=JC(t,this._root);return e?e.children.map(o=>o.value):[]}firstChild(t){const e=JC(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=QC(t,this._root);return e.length<2?[]:e[e.length-2].children.map(a=>a.value).filter(a=>a!==t)}pathFromRoot(t){return QC(t,this._root).map(e=>e.value)}}function JC(r,t){if(r===t.value)return t;for(const e of t.children){const o=JC(r,e);if(o)return o}return null}function QC(r,t){if(r===t.value)return[t];for(const e of t.children){const o=QC(r,e);if(o.length)return o.unshift(t),o}return[]}class ec{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function yp(r){const t={};return r&&r.children.forEach(e=>t[e.value.outlet]=e),t}class GA extends UA{constructor(t,e){super(t),this.snapshot=e,ZC(this,t)}toString(){return this.snapshot.toString()}}function jA(r,t){const e=function(r,t){const d=new tv([],{},{},"",{},ji,t,null,r.root,-1,{});return new zA("",new ec(d,[]))}(r,t),o=new Qo([new vg("",{})]),a=new Qo({}),c=new Qo({}),d=new Qo({}),p=new Qo(""),g=new bd(o,a,d,p,c,ji,t,e.root);return g.snapshot=e.root,new GA(new ec(g,[]),e)}class bd{constructor(t,e,o,a,c,d,p,g){this.url=t,this.params=e,this.queryParams=o,this.fragment=a,this.data=c,this.outlet=d,this.component=p,this._futureSnapshot=g}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(He(t=>bp(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(He(t=>bp(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function WA(r,t="emptyOnly"){const e=r.pathFromRoot;let o=0;if("always"!==t)for(o=e.length-1;o>=1;){const a=e[o],c=e[o-1];if(a.routeConfig&&""===a.routeConfig.path)o--;else{if(c.component)break;o--}}return function(r){return r.reduce((t,e)=>({params:ht(ht({},t.params),e.params),data:ht(ht({},t.data),e.data),resolve:ht(ht({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(e.slice(o))}class tv{constructor(t,e,o,a,c,d,p,g,v,E,D){this.url=t,this.params=e,this.queryParams=o,this.fragment=a,this.data=c,this.outlet=d,this.component=p,this.routeConfig=g,this._urlSegment=v,this._lastPathIndex=E,this._resolve=D}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=bp(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=bp(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(o=>o.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class zA extends UA{constructor(t,e){super(e),this.url=t,ZC(this,e)}toString(){return YA(this._root)}}function ZC(r,t){t.value._routerState=r,t.children.forEach(e=>ZC(r,e))}function YA(r){const t=r.children.length>0?` { ${r.children.map(YA).join(", ")} } `:"";return`${r.value}${t}`}function qC(r){if(r.snapshot){const t=r.snapshot,e=r._futureSnapshot;r.snapshot=e,ll(t.queryParams,e.queryParams)||r.queryParams.next(e.queryParams),t.fragment!==e.fragment&&r.fragment.next(e.fragment),ll(t.params,e.params)||r.params.next(e.params),function(r,t){if(r.length!==t.length)return!1;for(let e=0;e<r.length;++e)if(!ll(r[e],t[e]))return!1;return!0}(t.url,e.url)||r.url.next(e.url),ll(t.data,e.data)||r.data.next(e.data)}else r.snapshot=r._futureSnapshot,r.data.next(r._futureSnapshot.data)}function eT(r,t){const e=ll(r.params,t.params)&&function(r,t){return vd(r,t)&&r.every((e,o)=>ll(e.parameters,t[o].parameters))}(r.url,t.url);return e&&!(!r.parent!=!t.parent)&&(!r.parent||eT(r.parent,t.parent))}function yg(r,t,e){if(e&&r.shouldReuseRoute(t.value,e.value.snapshot)){const o=e.value;o._futureSnapshot=t.value;const a=function(r,t,e){return t.children.map(o=>{for(const a of e.children)if(r.shouldReuseRoute(o.value,a.value.snapshot))return yg(r,o,a);return yg(r,o)})}(r,t,e);return new ec(o,a)}{if(r.shouldAttach(t.value)){const c=r.retrieve(t.value);if(null!==c){const d=c.route;return d.value._futureSnapshot=t.value,d.children=t.children.map(p=>yg(r,p)),d}}const o=function(r){return new bd(new Qo(r.url),new Qo(r.params),new Qo(r.queryParams),new Qo(r.fragment),new Qo(r.data),r.outlet,r.component,r)}(t.value),a=t.children.map(c=>yg(r,c));return new ec(o,a)}}function iv(r){return"object"==typeof r&&null!=r&&!r.outlets&&!r.segmentPath}function Eg(r){return"object"==typeof r&&null!=r&&r.outlets}function tT(r,t,e,o,a){let c={};return o&&ro(o,(d,p)=>{c[p]=Array.isArray(d)?d.map(g=>`${g}`):`${d}`}),new _d(e.root===r?t:XA(e.root,r,t),c,a)}function XA(r,t,e){const o={};return ro(r.children,(a,c)=>{o[c]=a===t?e:XA(a,t,e)}),new $i(r.segments,o)}class $A{constructor(t,e,o){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=o,t&&o.length>0&&iv(o[0]))throw new Error("Root segment cannot have matrix parameters");const a=o.find(Eg);if(a&&a!==xA(o))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class iT{constructor(t,e,o){this.segmentGroup=t,this.processChildren=e,this.index=o}}function KA(r,t,e){if(r||(r=new $i([],{})),0===r.segments.length&&r.hasChildren())return nv(r,t,e);const o=function(r,t,e){let o=0,a=t;const c={match:!1,pathIndex:0,commandIndex:0};for(;a<r.segments.length;){if(o>=e.length)return c;const d=r.segments[a],p=e[o];if(Eg(p))break;const g=`${p}`,v=o<e.length-1?e[o+1]:null;if(a>0&&void 0===g)break;if(g&&v&&"object"==typeof v&&void 0===v.outlets){if(!QA(g,v,d))return c;o+=2}else{if(!QA(g,{},d))return c;o++}a++}return{match:!0,pathIndex:a,commandIndex:o}}(r,t,e),a=e.slice(o.commandIndex);if(o.match&&o.pathIndex<r.segments.length){const c=new $i(r.segments.slice(0,o.pathIndex),{});return c.children[ji]=new $i(r.segments.slice(o.pathIndex),r.children),nv(c,0,a)}return o.match&&0===a.length?new $i(r.segments,{}):o.match&&!r.hasChildren()?nT(r,t,e):o.match?nv(r,0,a):nT(r,t,e)}function nv(r,t,e){if(0===e.length)return new $i(r.segments,{});{const o=function(r){return Eg(r[0])?r[0].outlets:{[ji]:r}}(e),a={};return ro(o,(c,d)=>{"string"==typeof c&&(c=[c]),null!==c&&(a[d]=KA(r.children[d],t,c))}),ro(r.children,(c,d)=>{void 0===o[d]&&(a[d]=c)}),new $i(r.segments,a)}}function nT(r,t,e){const o=r.segments.slice(0,t);let a=0;for(;a<e.length;){const c=e[a];if(Eg(c)){const g=n8(c.outlets);return new $i(o,g)}if(0===a&&iv(e[0])){o.push(new vg(r.segments[t].path,JA(e[0]))),a++;continue}const d=Eg(c)?c.outlets[ji]:`${c}`,p=a<e.length-1?e[a+1]:null;d&&p&&iv(p)?(o.push(new vg(d,JA(p))),a+=2):(o.push(new vg(d,{})),a++)}return new $i(o,{})}function n8(r){const t={};return ro(r,(e,o)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[o]=nT(new $i([],{}),0,e))}),t}function JA(r){const t={};return ro(r,(e,o)=>t[o]=`${e}`),t}function QA(r,t,e){return r==e.path&&ll(t,e.parameters)}class o8{constructor(t,e,o,a){this.routeReuseStrategy=t,this.futureState=e,this.currState=o,this.forwardEvent=a}activate(t){const e=this.futureState._root,o=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,o,t),qC(this.futureState.root),this.activateChildRoutes(e,o,t)}deactivateChildRoutes(t,e,o){const a=yp(e);t.children.forEach(c=>{const d=c.value.outlet;this.deactivateRoutes(c,a[d],o),delete a[d]}),ro(a,(c,d)=>{this.deactivateRouteAndItsChildren(c,o)})}deactivateRoutes(t,e,o){const a=t.value,c=e?e.value:null;if(a===c)if(a.component){const d=o.getContext(a.outlet);d&&this.deactivateChildRoutes(t,e,d.children)}else this.deactivateChildRoutes(t,e,o);else c&&this.deactivateRouteAndItsChildren(e,o)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const o=e.getContext(t.value.outlet),a=o&&t.value.component?o.children:e,c=yp(t);for(const d of Object.keys(c))this.deactivateRouteAndItsChildren(c[d],a);if(o&&o.outlet){const d=o.outlet.detach(),p=o.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:d,route:t,contexts:p})}}deactivateRouteAndOutlet(t,e){const o=e.getContext(t.value.outlet),a=o&&t.value.component?o.children:e,c=yp(t);for(const d of Object.keys(c))this.deactivateRouteAndItsChildren(c[d],a);o&&o.outlet&&(o.outlet.deactivate(),o.children.onOutletDeactivated(),o.attachRef=null,o.resolver=null,o.route=null)}activateChildRoutes(t,e,o){const a=yp(e);t.children.forEach(c=>{this.activateRoutes(c,a[c.value.outlet],o),this.forwardEvent(new wz(c.value.snapshot))}),t.children.length&&this.forwardEvent(new Cz(t.value.snapshot))}activateRoutes(t,e,o){const a=t.value,c=e?e.value:null;if(qC(a),a===c)if(a.component){const d=o.getOrCreateContext(a.outlet);this.activateChildRoutes(t,e,d.children)}else this.activateChildRoutes(t,e,o);else if(a.component){const d=o.getOrCreateContext(a.outlet);if(this.routeReuseStrategy.shouldAttach(a.snapshot)){const p=this.routeReuseStrategy.retrieve(a.snapshot);this.routeReuseStrategy.store(a.snapshot,null),d.children.onOutletReAttached(p.contexts),d.attachRef=p.componentRef,d.route=p.route.value,d.outlet&&d.outlet.attach(p.componentRef,p.route.value),qC(p.route.value),this.activateChildRoutes(t,null,d.children)}else{const p=function(r){for(let t=r.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(a.snapshot),g=p?p.module.componentFactoryResolver:null;d.attachRef=null,d.route=a,d.resolver=g,d.outlet&&d.outlet.activateWith(a,g),this.activateChildRoutes(t,null,d.children)}}else this.activateChildRoutes(t,null,o)}}class rT{constructor(t,e){this.routes=t,this.module=e}}function tu(r){return"function"==typeof r}function yd(r){return r instanceof _d}const Cg=Symbol("INITIAL_VALUE");function Tg(){return Ks(r=>mA(r.map(t=>t.pipe(Rn(1),Js(Cg)))).pipe(bA((t,e)=>{let o=!1;return e.reduce((a,c,d)=>a!==Cg?a:(c===Cg&&(o=!0),o||!1!==c&&d!==e.length-1&&!yd(c)?a:c),t)},Cg),un(t=>t!==Cg),He(t=>yd(t)?t:!0===t),Rn(1)))}class h8{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new wg,this.attachRef=null}}class wg{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const o=this.getOrCreateContext(t);o.outlet=e,this.contexts.set(t,o)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null,e.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new h8,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}let oT=(()=>{class r{constructor(e,o,a,c,d){this.parentContexts=e,this.location=o,this.resolver=a,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new Pt,this.deactivateEvents=new Pt,this.attachEvents=new Pt,this.detachEvents=new Pt,this.name=c||ji,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,o){this.activated=e,this._activatedRoute=o,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,o){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const d=(o=o||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),p=this.parentContexts.getOrCreateContext(this.name).children,g=new p8(e,p,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,g),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return r.\u0275fac=function(e){return new(e||r)(X(wg),X(hr),X(Wl),P("name"),X(Bn))},r.\u0275dir=Ge({type:r,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),r})();class p8{constructor(t,e,o){this.route=t,this.childContexts=e,this.parent=o}get(t,e){return t===bd?this.route:t===wg?this.childContexts:this.parent.get(t,e)}}let ZA=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=Qt({type:r,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,o){1&e&&Gi(0,"router-outlet")},directives:[oT],encapsulation:2}),r})();function qA(r,t=""){for(let e=0;e<r.length;e++){const o=r[e];f8(o,g8(t,o))}}function f8(r,t){r.children&&qA(r.children,t)}function g8(r,t){return t?r||t.path?r&&!t.path?`${r}/`:!r&&t.path?t.path:`${r}/${t.path}`:"":r}function sT(r){const t=r.children&&r.children.map(sT),e=t?Nr(ht({},r),{children:t}):ht({},r);return!e.component&&(t||e.loadChildren)&&e.outlet&&e.outlet!==ji&&(e.component=ZA),e}function Qs(r){return r.outlet||ji}function eO(r,t){const e=r.filter(o=>Qs(o)===t);return e.push(...r.filter(o=>Qs(o)!==t)),e}const tO={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function rv(r,t,e){var p;if(""===t.path)return"full"===t.pathMatch&&(r.hasChildren()||e.length>0)?ht({},tO):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const a=(t.matcher||Rz)(e,r,t);if(!a)return ht({},tO);const c={};ro(a.posParams,(g,v)=>{c[v]=g.path});const d=a.consumed.length>0?ht(ht({},c),a.consumed[a.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:a.consumed,lastChild:a.consumed.length,parameters:d,positionalParamSegments:null!=(p=a.posParams)?p:{}}}function ov(r,t,e,o,a="corrected"){if(e.length>0&&function(r,t,e){return e.some(o=>sv(r,t,o)&&Qs(o)!==ji)}(r,e,o)){const d=new $i(t,function(r,t,e,o){const a={};a[ji]=o,o._sourceSegment=r,o._segmentIndexShift=t.length;for(const c of e)if(""===c.path&&Qs(c)!==ji){const d=new $i([],{});d._sourceSegment=r,d._segmentIndexShift=t.length,a[Qs(c)]=d}return a}(r,t,o,new $i(e,r.children)));return d._sourceSegment=r,d._segmentIndexShift=t.length,{segmentGroup:d,slicedSegments:[]}}if(0===e.length&&function(r,t,e){return e.some(o=>sv(r,t,o))}(r,e,o)){const d=new $i(r.segments,function(r,t,e,o,a,c){const d={};for(const p of o)if(sv(r,e,p)&&!a[Qs(p)]){const g=new $i([],{});g._sourceSegment=r,g._segmentIndexShift="legacy"===c?r.segments.length:t.length,d[Qs(p)]=g}return ht(ht({},a),d)}(r,t,e,o,r.children,a));return d._sourceSegment=r,d._segmentIndexShift=t.length,{segmentGroup:d,slicedSegments:e}}const c=new $i(r.segments,r.children);return c._sourceSegment=r,c._segmentIndexShift=t.length,{segmentGroup:c,slicedSegments:e}}function sv(r,t,e){return(!(r.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function iO(r,t,e,o){return!!(Qs(r)===o||o!==ji&&sv(t,e,r))&&("**"===r.path||rv(t,r,e).matched)}function nO(r,t,e){return 0===t.length&&!r.children[e]}class Sg{constructor(t){this.segmentGroup=t||null}}class rO{constructor(t){this.urlTree=t}}function av(r){return new re(t=>t.error(new Sg(r)))}function oO(r){return new re(t=>t.error(new rO(r)))}function y8(r){return new re(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${r}'`)))}class T8{constructor(t,e,o,a,c){this.configLoader=e,this.urlSerializer=o,this.urlTree=a,this.config=c,this.allowRedirects=!0,this.ngModule=t.get(sl)}apply(){const t=ov(this.urlTree.root,[],[],this.config).segmentGroup,e=new $i(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,ji).pipe(He(c=>this.createUrlTree(aT(c),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Zl(c=>{if(c instanceof rO)return this.allowRedirects=!1,this.match(c.urlTree);throw c instanceof Sg?this.noMatchError(c):c}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,ji).pipe(He(a=>this.createUrlTree(aT(a),t.queryParams,t.fragment))).pipe(Zl(a=>{throw a instanceof Sg?this.noMatchError(a):a}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,o){const a=t.segments.length>0?new $i([],{[ji]:t}):t;return new _d(a,e,o)}expandSegmentGroup(t,e,o,a){return 0===o.segments.length&&o.hasChildren()?this.expandChildren(t,e,o).pipe(He(c=>new $i([],c))):this.expandSegment(t,o,e,o.segments,a,!0)}expandChildren(t,e,o){const a=[];for(const c of Object.keys(o.children))"primary"===c?a.unshift(c):a.push(c);return On(a).pipe(_p(c=>{const d=o.children[c],p=eO(e,c);return this.expandSegmentGroup(t,p,d,c).pipe(He(g=>({segment:g,outlet:c})))}),bA((c,d)=>(c[d.outlet]=d.segment,c),{}),function(r,t){const e=arguments.length>=2;return o=>o.pipe(r?un((a,c)=>r(a,c,o)):K,YC(1),e?EA(t):yA(()=>new $_))}())}expandSegment(t,e,o,a,c,d){return On(o).pipe(_p(p=>this.expandSegmentAgainstRoute(t,e,o,p,a,c,d).pipe(Zl(v=>{if(v instanceof Sg)return zt(null);throw v}))),vp(p=>!!p),Zl((p,g)=>{if(p instanceof $_||"EmptyError"===p.name){if(nO(e,a,c))return zt(new $i([],{}));throw new Sg(e)}throw p}))}expandSegmentAgainstRoute(t,e,o,a,c,d,p){return iO(a,e,c,d)?void 0===a.redirectTo?this.matchSegmentAgainstRoute(t,e,a,c,d):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,o,a,c,d):av(e):av(e)}expandSegmentAgainstRouteUsingRedirect(t,e,o,a,c,d){return"**"===a.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,o,a,d):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,o,a,c,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,o,a){const c=this.applyRedirectCommands([],o.redirectTo,{});return o.redirectTo.startsWith("/")?oO(c):this.lineralizeSegments(o,c).pipe(Dn(d=>{const p=new $i(d,{});return this.expandSegment(t,p,e,d,a,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,o,a,c,d){const{matched:p,consumedSegments:g,lastChild:v,positionalParamSegments:E}=rv(e,a,c);if(!p)return av(e);const D=this.applyRedirectCommands(g,a.redirectTo,E);return a.redirectTo.startsWith("/")?oO(D):this.lineralizeSegments(a,D).pipe(Dn(x=>this.expandSegment(t,e,o,x.concat(c.slice(v)),d,!1)))}matchSegmentAgainstRoute(t,e,o,a,c){if("**"===o.path)return o.loadChildren?(o._loadedConfig?zt(o._loadedConfig):this.configLoader.load(t.injector,o)).pipe(He(x=>(o._loadedConfig=x,new $i(a,{})))):zt(new $i(a,{}));const{matched:d,consumedSegments:p,lastChild:g}=rv(e,o,a);if(!d)return av(e);const v=a.slice(g);return this.getChildConfig(t,o,a).pipe(Dn(D=>{const x=D.module,L=D.routes,{segmentGroup:U,slicedSegments:ee}=ov(e,p,v,L),$=new $i(U.segments,U.children);if(0===ee.length&&$.hasChildren())return this.expandChildren(x,L,$).pipe(He(et=>new $i(p,et)));if(0===L.length&&0===ee.length)return zt(new $i(p,{}));const ge=Qs(o)===c;return this.expandSegment(x,$,L,ee,ge?ji:c,!0).pipe(He($e=>new $i(p.concat($e.segments),$e.children)))}))}getChildConfig(t,e,o){return e.children?zt(new rT(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?zt(e._loadedConfig):this.runCanLoadGuards(t.injector,e,o).pipe(Dn(a=>{return a?this.configLoader.load(t.injector,e).pipe(He(c=>(e._loadedConfig=c,c))):(r=e,new re(t=>t.error($C(`Cannot load children because the guard of the route "path: '${r.path}'" returned false`))));var r})):zt(new rT([],t))}runCanLoadGuards(t,e,o){const a=e.canLoad;return a&&0!==a.length?zt(a.map(d=>{const p=t.get(d);let g;if((r=p)&&tu(r.canLoad))g=p.canLoad(e,o);else{if(!tu(p))throw new Error("Invalid CanLoad guard");g=p(e,o)}var r;return cl(g)})).pipe(Tg(),Ir(d=>{if(!yd(d))return;const p=$C(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw p.url=d,p}),He(d=>!0===d)):zt(!0)}lineralizeSegments(t,e){let o=[],a=e.root;for(;;){if(o=o.concat(a.segments),0===a.numberOfChildren)return zt(o);if(a.numberOfChildren>1||!a.children[ji])return y8(t.redirectTo);a=a.children[ji]}}applyRedirectCommands(t,e,o){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,o)}applyRedirectCreatreUrlTree(t,e,o,a){const c=this.createSegmentGroup(t,e.root,o,a);return new _d(c,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const o={};return ro(t,(a,c)=>{if("string"==typeof a&&a.startsWith(":")){const p=a.substring(1);o[c]=e[p]}else o[c]=a}),o}createSegmentGroup(t,e,o,a){const c=this.createSegments(t,e.segments,o,a);let d={};return ro(e.children,(p,g)=>{d[g]=this.createSegmentGroup(t,p,o,a)}),new $i(c,d)}createSegments(t,e,o,a){return e.map(c=>c.path.startsWith(":")?this.findPosParam(t,c,a):this.findOrReturn(c,o))}findPosParam(t,e,o){const a=o[e.path.substring(1)];if(!a)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return a}findOrReturn(t,e){let o=0;for(const a of e){if(a.path===t.path)return e.splice(o),a;o++}return t}}function aT(r){const t={};for(const o of Object.keys(r.children)){const c=aT(r.children[o]);(c.segments.length>0||c.hasChildren())&&(t[o]=c)}return function(r){if(1===r.numberOfChildren&&r.children[ji]){const t=r.children[ji];return new $i(r.segments.concat(t.segments),t.children)}return r}(new $i(r.segments,t))}class sO{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class lv{constructor(t,e){this.component=t,this.route=e}}function D8(r,t,e){const o=r._root;return Dg(o,t?t._root:null,e,[o.value])}function cv(r,t,e){const o=function(r){if(!r)return null;for(let t=r.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(o?o.module.injector:e).get(r)}function Dg(r,t,e,o,a={canDeactivateChecks:[],canActivateChecks:[]}){const c=yp(t);return r.children.forEach(d=>{(function(r,t,e,o,a={canDeactivateChecks:[],canActivateChecks:[]}){const c=r.value,d=t?t.value:null,p=e?e.getContext(r.value.outlet):null;if(d&&c.routeConfig===d.routeConfig){const g=function(r,t,e){if("function"==typeof e)return e(r,t);switch(e){case"pathParamsChange":return!vd(r.url,t.url);case"pathParamsOrQueryParamsChange":return!vd(r.url,t.url)||!ll(r.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!eT(r,t)||!ll(r.queryParams,t.queryParams);default:return!eT(r,t)}}(d,c,c.routeConfig.runGuardsAndResolvers);g?a.canActivateChecks.push(new sO(o)):(c.data=d.data,c._resolvedData=d._resolvedData),Dg(r,t,c.component?p?p.children:null:e,o,a),g&&p&&p.outlet&&p.outlet.isActivated&&a.canDeactivateChecks.push(new lv(p.outlet.component,d))}else d&&Rg(t,p,a),a.canActivateChecks.push(new sO(o)),Dg(r,null,c.component?p?p.children:null:e,o,a)})(d,c[d.value.outlet],e,o.concat([d.value]),a),delete c[d.value.outlet]}),ro(c,(d,p)=>Rg(d,e.getContext(p),a)),a}function Rg(r,t,e){const o=yp(r),a=r.value;ro(o,(c,d)=>{Rg(c,a.component?t?t.children.getContext(d):null:t,e)}),e.canDeactivateChecks.push(new lv(a.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,a))}class V8{}function aO(r){return new re(t=>t.error(r))}class U8{constructor(t,e,o,a,c,d){this.rootComponentType=t,this.config=e,this.urlTree=o,this.url=a,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=d}recognize(){const t=ov(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,ji);if(null===e)return null;const o=new tv([],Object.freeze({}),Object.freeze(ht({},this.urlTree.queryParams)),this.urlTree.fragment,{},ji,this.rootComponentType,null,this.urlTree.root,-1,{}),a=new ec(o,e),c=new zA(this.url,a);return this.inheritParamsAndData(c._root),c}inheritParamsAndData(t){const e=t.value,o=WA(e,this.paramsInheritanceStrategy);e.params=Object.freeze(o.params),e.data=Object.freeze(o.data),t.children.forEach(a=>this.inheritParamsAndData(a))}processSegmentGroup(t,e,o){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,o)}processChildren(t,e){const o=[];for(const c of Object.keys(e.children)){const d=e.children[c],p=eO(t,c),g=this.processSegmentGroup(p,d,c);if(null===g)return null;o.push(...g)}const a=lO(o);return a.sort((t,e)=>t.value.outlet===ji?-1:e.value.outlet===ji?1:t.value.outlet.localeCompare(e.value.outlet)),a}processSegment(t,e,o,a){for(const c of t){const d=this.processSegmentAgainstRoute(c,e,o,a);if(null!==d)return d}return nO(e,o,a)?[]:null}processSegmentAgainstRoute(t,e,o,a){if(t.redirectTo||!iO(t,e,o,a))return null;let c,d=[],p=[];if("**"===t.path){const L=o.length>0?xA(o).parameters:{};c=new tv(o,L,Object.freeze(ht({},this.urlTree.queryParams)),this.urlTree.fragment,dO(t),Qs(t),t.component,t,cO(e),uO(e)+o.length,hO(t))}else{const L=rv(e,t,o);if(!L.matched)return null;d=L.consumedSegments,p=o.slice(L.lastChild),c=new tv(d,L.parameters,Object.freeze(ht({},this.urlTree.queryParams)),this.urlTree.fragment,dO(t),Qs(t),t.component,t,cO(e),uO(e)+d.length,hO(t))}const g=(r=t).children?r.children:r.loadChildren?r._loadedConfig.routes:[],{segmentGroup:v,slicedSegments:E}=ov(e,d,p,g.filter(L=>void 0===L.redirectTo),this.relativeLinkResolution);var r;if(0===E.length&&v.hasChildren()){const L=this.processChildren(g,v);return null===L?null:[new ec(c,L)]}if(0===g.length&&0===E.length)return[new ec(c,[])];const D=Qs(t)===a,x=this.processSegment(g,v,E,D?ji:a);return null===x?null:[new ec(c,x)]}}function W8(r){const t=r.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function lO(r){const t=[],e=new Set;for(const o of r){if(!W8(o)){t.push(o);continue}const a=t.find(c=>o.value.routeConfig===c.value.routeConfig);void 0!==a?(a.children.push(...o.children),e.add(a)):t.push(o)}for(const o of e){const a=lO(o.children);t.push(new ec(o.value,a))}return t.filter(o=>!e.has(o))}function cO(r){let t=r;for(;t._sourceSegment;)t=t._sourceSegment;return t}function uO(r){let t=r,e=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift?t._segmentIndexShift:0;return e-1}function dO(r){return r.data||{}}function hO(r){return r.resolve||{}}function lT(r){return Ks(t=>{const e=r(t);return e?On(e).pipe(He(()=>t)):zt(t)})}class Z8 extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const cT=new xe("ROUTES");class pO{constructor(t,e,o,a){this.injector=t,this.compiler=e,this.onLoadStartListener=o,this.onLoadEndListener=a}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const a=this.loadModuleFactory(e.loadChildren).pipe(He(c=>{this.onLoadEndListener&&this.onLoadEndListener(e);const d=c.create(t);return new rT(IA(d.injector.get(cT,void 0,xt.Self|xt.Optional)).map(sT),d)}),Zl(c=>{throw e._loader$=void 0,c}));return e._loader$=new dz(a,()=>new Se).pipe(vA()),e._loader$}loadModuleFactory(t){return cl(t()).pipe(Dn(e=>e instanceof BR?zt(e):On(this.compiler.compileModuleAsync(e))))}}class e5{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function t5(r){throw r}function n5(r,t,e){return t.parse("/")}function fO(r,t){return zt(null)}const r5={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},o5={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let bs=(()=>{class r{constructor(e,o,a,c,d,p,g){this.rootComponentType=e,this.urlSerializer=o,this.rootContexts=a,this.location=c,this.config=g,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Se,this.errorHandler=t5,this.malformedUriErrorHandler=n5,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:fO,afterPreactivation:fO},this.urlHandlingStrategy=new e5,this.routeReuseStrategy=new Z8,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(sl),this.console=d.get(n_);const D=d.get(bi);this.isNgZoneEnabled=D instanceof bi&&bi.isInAngularZone(),this.resetConfig(g),this.currentUrlTree=new _d(new $i([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new pO(d,p,x=>this.triggerEvent(new wA(x)),x=>this.triggerEvent(new SA(x))),this.routerState=jA(this.currentUrlTree,this.rootComponentType),this.transitions=new Qo({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null==(e=this.location.getState())?void 0:e.\u0275routerPageId}setupNavigations(e){const o=this.events;return e.pipe(un(a=>0!==a.id),He(a=>Nr(ht({},a),{extractedUrl:this.urlHandlingStrategy.extract(a.rawUrl)})),Ks(a=>{let c=!1,d=!1;return zt(a).pipe(Ir(p=>{this.currentNavigation={id:p.id,initialUrl:p.currentRawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?Nr(ht({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Ks(p=>{const g=this.browserUrlTree.toString(),v=!this.navigated||p.extractedUrl.toString()!==g||g!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||v)&&this.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return uv(p.source)&&(this.browserUrlTree=p.extractedUrl),zt(p).pipe(Ks(D=>{const x=this.transitions.getValue();return o.next(new XC(D.id,this.serializeUrl(D.extractedUrl),D.source,D.restoredState)),x!==this.transitions.getValue()?co:Promise.resolve(D)}),function(r,t,e,o){return Ks(a=>function(r,t,e,o,a){return new T8(r,t,e,o,a).apply()}(r,t,e,a.extractedUrl,o).pipe(He(c=>Nr(ht({},a),{urlAfterRedirects:c}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Ir(D=>{this.currentNavigation=Nr(ht({},this.currentNavigation),{finalUrl:D.urlAfterRedirects})}),function(r,t,e,o,a){return Dn(c=>function(r,t,e,o,a="emptyOnly",c="legacy"){try{const d=new U8(r,t,e,o,a,c).recognize();return null===d?aO(new V8):zt(d)}catch(d){return aO(d)}}(r,t,c.urlAfterRedirects,e(c.urlAfterRedirects),o,a).pipe(He(d=>Nr(ht({},c),{targetSnapshot:d}))))}(this.rootComponentType,this.config,D=>this.serializeUrl(D),this.paramsInheritanceStrategy,this.relativeLinkResolution),Ir(D=>{if("eager"===this.urlUpdateStrategy){if(!D.extras.skipLocationChange){const L=this.urlHandlingStrategy.merge(D.urlAfterRedirects,D.rawUrl);this.setBrowserUrl(L,D)}this.browserUrlTree=D.urlAfterRedirects}const x=new mz(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(D.urlAfterRedirects),D.targetSnapshot);o.next(x)}));if(v&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:x,extractedUrl:L,source:U,restoredState:ee,extras:$}=p,ge=new XC(x,this.serializeUrl(L),U,ee);o.next(ge);const be=jA(L,this.rootComponentType).snapshot;return zt(Nr(ht({},p),{targetSnapshot:be,urlAfterRedirects:L,extras:Nr(ht({},$),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=p.rawUrl,p.resolve(null),co}),lT(p=>{const{targetSnapshot:g,id:v,extractedUrl:E,rawUrl:D,extras:{skipLocationChange:x,replaceUrl:L}}=p;return this.hooks.beforePreactivation(g,{navigationId:v,appliedUrlTree:E,rawUrlTree:D,skipLocationChange:!!x,replaceUrl:!!L})}),Ir(p=>{const g=new _z(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(g)}),He(p=>Nr(ht({},p),{guards:D8(p.targetSnapshot,p.currentSnapshot,this.rootContexts)})),function(r,t){return Dn(e=>{const{targetSnapshot:o,currentSnapshot:a,guards:{canActivateChecks:c,canDeactivateChecks:d}}=e;return 0===d.length&&0===c.length?zt(Nr(ht({},e),{guardsResult:!0})):function(r,t,e,o){return On(r).pipe(Dn(a=>function(r,t,e,o,a){const c=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return c&&0!==c.length?zt(c.map(p=>{const g=cv(p,t,a);let v;if(function(r){return r&&tu(r.canDeactivate)}(g))v=cl(g.canDeactivate(r,t,e,o));else{if(!tu(g))throw new Error("Invalid CanDeactivate guard");v=cl(g(r,t,e,o))}return v.pipe(vp())})).pipe(Tg()):zt(!0)}(a.component,a.route,e,t,o)),vp(a=>!0!==a,!0))}(d,o,a,r).pipe(Dn(p=>p&&function(r){return"boolean"==typeof r}(p)?function(r,t,e,o){return On(t).pipe(_p(a=>mg(function(r,t){return null!==r&&t&&t(new Ez(r)),zt(!0)}(a.route.parent,o),function(r,t){return null!==r&&t&&t(new Tz(r)),zt(!0)}(a.route,o),function(r,t,e){const o=t[t.length-1],c=t.slice(0,t.length-1).reverse().map(d=>function(r){const t=r.routeConfig?r.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:r,guards:t}:null}(d)).filter(d=>null!==d).map(d=>K_(()=>zt(d.guards.map(g=>{const v=cv(g,d.node,e);let E;if(function(r){return r&&tu(r.canActivateChild)}(v))E=cl(v.canActivateChild(o,r));else{if(!tu(v))throw new Error("Invalid CanActivateChild guard");E=cl(v(o,r))}return E.pipe(vp())})).pipe(Tg())));return zt(c).pipe(Tg())}(r,a.path,e),function(r,t,e){const o=t.routeConfig?t.routeConfig.canActivate:null;if(!o||0===o.length)return zt(!0);const a=o.map(c=>K_(()=>{const d=cv(c,t,e);let p;if(function(r){return r&&tu(r.canActivate)}(d))p=cl(d.canActivate(t,r));else{if(!tu(d))throw new Error("Invalid CanActivate guard");p=cl(d(t,r))}return p.pipe(vp())}));return zt(a).pipe(Tg())}(r,a.route,e))),vp(a=>!0!==a,!0))}(o,c,r,t):zt(p)),He(p=>Nr(ht({},e),{guardsResult:p})))})}(this.ngModule.injector,p=>this.triggerEvent(p)),Ir(p=>{if(yd(p.guardsResult)){const v=$C(`Redirecting to "${this.serializeUrl(p.guardsResult)}"`);throw v.url=p.guardsResult,v}const g=new vz(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.triggerEvent(g)}),un(p=>!!p.guardsResult||(this.restoreHistory(p),this.cancelNavigationTransition(p,""),!1)),lT(p=>{if(p.guards.canActivateChecks.length)return zt(p).pipe(Ir(g=>{const v=new bz(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(v)}),Ks(g=>{let v=!1;return zt(g).pipe(function(r,t){return Dn(e=>{const{targetSnapshot:o,guards:{canActivateChecks:a}}=e;if(!a.length)return zt(e);let c=0;return On(a).pipe(_p(d=>function(r,t,e,o){return function(r,t,e,o){const a=Object.keys(r);if(0===a.length)return zt({});const c={};return On(a).pipe(Dn(d=>function(r,t,e,o){const a=cv(r,t,o);return cl(a.resolve?a.resolve(t,e):a(t,e))}(r[d],t,e,o).pipe(Ir(p=>{c[d]=p}))),YC(1),Dn(()=>Object.keys(c).length===a.length?zt(c):co))}(r._resolve,r,t,o).pipe(He(c=>(r._resolvedData=c,r.data=ht(ht({},r.data),WA(r,e).resolve),null)))}(d.route,o,r,t)),Ir(()=>c++),YC(1),Dn(d=>c===a.length?zt(e):co))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Ir({next:()=>v=!0,complete:()=>{v||(this.restoreHistory(g),this.cancelNavigationTransition(g,"At least one route resolver didn't emit any value."))}}))}),Ir(g=>{const v=new yz(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(v)}))}),lT(p=>{const{targetSnapshot:g,id:v,extractedUrl:E,rawUrl:D,extras:{skipLocationChange:x,replaceUrl:L}}=p;return this.hooks.afterPreactivation(g,{navigationId:v,appliedUrlTree:E,rawUrlTree:D,skipLocationChange:!!x,replaceUrl:!!L})}),He(p=>{const g=function(r,t,e){const o=yg(r,t._root,e?e._root:void 0);return new GA(o,t)}(this.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return Nr(ht({},p),{targetRouterState:g})}),Ir(p=>{this.currentUrlTree=p.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl),this.routerState=p.targetRouterState,"deferred"===this.urlUpdateStrategy&&(p.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,p),this.browserUrlTree=p.urlAfterRedirects)}),((r,t,e)=>He(o=>(new o8(t,o.targetRouterState,o.currentRouterState,e).activate(r),o)))(this.rootContexts,this.routeReuseStrategy,p=>this.triggerEvent(p)),Ir({next(){c=!0},complete(){c=!0}}),CA(()=>{var p;c||d||this.cancelNavigationTransition(a,`Navigation ID ${a.id} is not equal to the current navigation id ${this.navigationId}`),(null==(p=this.currentNavigation)?void 0:p.id)===a.id&&(this.currentNavigation=null)}),Zl(p=>{if(d=!0,function(r){return r&&r[RA]}(p)){const g=yd(p.url);g||(this.navigated=!0,this.restoreHistory(a,!0));const v=new TA(a.id,this.serializeUrl(a.extractedUrl),p.message);o.next(v),g?setTimeout(()=>{const E=this.urlHandlingStrategy.merge(p.url,this.rawUrlTree),D={skipLocationChange:a.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||uv(a.source)};this.scheduleNavigation(E,"imperative",null,D,{resolve:a.resolve,reject:a.reject,promise:a.promise})},0):a.resolve(!1)}else{this.restoreHistory(a,!0);const g=new gz(a.id,this.serializeUrl(a.extractedUrl),p);o.next(g);try{a.resolve(this.errorHandler(p))}catch(v){a.reject(v)}}return co}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next(ht(ht({},this.transitions.value),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const o="popstate"===e.type?"popstate":"hashchange";"popstate"===o&&setTimeout(()=>{var p;const a={replaceUrl:!0},c=(null==(p=e.state)?void 0:p.navigationId)?e.state:null;if(c){const g=ht({},c);delete g.navigationId,delete g.\u0275routerPageId,0!==Object.keys(g).length&&(a.state=g)}const d=this.parseUrl(e.url);this.scheduleNavigation(d,o,c,a)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){qA(e),this.config=e.map(sT),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,o={}){const{relativeTo:a,queryParams:c,fragment:d,queryParamsHandling:p,preserveFragment:g}=o,v=a||this.routerState.root,E=g?this.currentUrlTree.fragment:d;let D=null;switch(p){case"merge":D=ht(ht({},this.currentUrlTree.queryParams),c);break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=c||null}return null!==D&&(D=this.removeEmptyProps(D)),function(r,t,e,o,a){if(0===e.length)return tT(t.root,t.root,t,o,a);const c=function(r){if("string"==typeof r[0]&&1===r.length&&"/"===r[0])return new $A(!0,0,r);let t=0,e=!1;const o=r.reduce((a,c,d)=>{if("object"==typeof c&&null!=c){if(c.outlets){const p={};return ro(c.outlets,(g,v)=>{p[v]="string"==typeof g?g.split("/"):g}),[...a,{outlets:p}]}if(c.segmentPath)return[...a,c.segmentPath]}return"string"!=typeof c?[...a,c]:0===d?(c.split("/").forEach((p,g)=>{0==g&&"."===p||(0==g&&""===p?e=!0:".."===p?t++:""!=p&&a.push(p))}),a):[...a,c]},[]);return new $A(e,t,o)}(e);if(c.toRoot())return tT(t.root,new $i([],{}),t,o,a);const d=function(r,t,e){if(r.isAbsolute)return new iT(t.root,!0,0);if(-1===e.snapshot._lastPathIndex){const c=e.snapshot._urlSegment;return new iT(c,c===t.root,0)}const o=iv(r.commands[0])?0:1;return function(r,t,e){let o=r,a=t,c=e;for(;c>a;){if(c-=a,o=o.parent,!o)throw new Error("Invalid number of '../'");a=o.segments.length}return new iT(o,!1,a-c)}(e.snapshot._urlSegment,e.snapshot._lastPathIndex+o,r.numberOfDoubleDots)}(c,t,r),p=d.processChildren?nv(d.segmentGroup,d.index,c.commands):KA(d.segmentGroup,d.index,c.commands);return tT(d.segmentGroup,p,t,o,a)}(v,this.currentUrlTree,e,D,null!=E?E:null)}navigateByUrl(e,o={skipLocationChange:!1}){const a=yd(e)?e:this.parseUrl(e),c=this.urlHandlingStrategy.merge(a,this.rawUrlTree);return this.scheduleNavigation(c,"imperative",null,o)}navigate(e,o={skipLocationChange:!1}){return function(r){for(let t=0;t<r.length;t++){const e=r[t];if(null==e)throw new Error(`The requested path contains ${e} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,o),o)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let o;try{o=this.urlSerializer.parse(e)}catch(a){o=this.malformedUriErrorHandler(a,this.urlSerializer,e)}return o}isActive(e,o){let a;if(a=!0===o?ht({},r5):!1===o?ht({},o5):o,yd(e))return OA(this.currentUrlTree,e,a);const c=this.parseUrl(e);return OA(this.currentUrlTree,c,a)}removeEmptyProps(e){return Object.keys(e).reduce((o,a)=>{const c=e[a];return null!=c&&(o[a]=c),o},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new _g(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,o,a,c,d){var ge,be,$e;if(this.disposed)return Promise.resolve(!1);const p=this.transitions.value,g=uv(o)&&p&&!uv(p.source),v=p.rawUrl.toString()===e.toString(),E=p.id===(null==(ge=this.currentNavigation)?void 0:ge.id);if(g&&v&&E)return Promise.resolve(!0);let x,L,U;d?(x=d.resolve,L=d.reject,U=d.promise):U=new Promise((et,Bt)=>{x=et,L=Bt});const ee=++this.navigationId;let $;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(a=this.location.getState()),$=a&&a.\u0275routerPageId?a.\u0275routerPageId:c.replaceUrl||c.skipLocationChange?null!=(be=this.browserPageId)?be:0:(null!=($e=this.browserPageId)?$e:0)+1):$=0,this.setTransition({id:ee,targetPageId:$,source:o,restoredState:a,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:c,resolve:x,reject:L,promise:U,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),U.catch(et=>Promise.reject(et))}setBrowserUrl(e,o){const a=this.urlSerializer.serialize(e),c=ht(ht({},o.extras.state),this.generateNgRouterState(o.id,o.targetPageId));this.location.isCurrentPathEqualTo(a)||o.extras.replaceUrl?this.location.replaceState(a,"",c):this.location.go(a,"",c)}restoreHistory(e,o=!1){var a,c;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null==(a=this.currentNavigation)?void 0:a.finalUrl)||0===d?this.currentUrlTree===(null==(c=this.currentNavigation)?void 0:c.finalUrl)&&0===d&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(o&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,o){const a=new TA(e.id,this.serializeUrl(e.extractedUrl),o);this.triggerEvent(a),e.resolve(!1)}generateNgRouterState(e,o){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:o}:{navigationId:e}}}return r.\u0275fac=function(e){Kh()},r.\u0275prov=rt({token:r,factory:r.\u0275fac}),r})();function uv(r){return"imperative"!==r}let Mg=(()=>{class r{constructor(e,o,a){this.router=e,this.route=o,this.locationStrategy=a,this.commands=null,this.href=null,this.onChanges=new Se,this.subscription=e.events.subscribe(c=>{c instanceof _g&&this.updateTargetUrlAndHref()})}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:null}ngOnChanges(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,o,a,c,d){if(0!==e||o||a||c||d||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const p={skipLocationChange:Ep(this.skipLocationChange),replaceUrl:Ep(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,p),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ep(this.preserveFragment)})}}return r.\u0275fac=function(e){return new(e||r)(X(bs),X(bd),X(gp))},r.\u0275dir=Ge({type:r,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,o){1&e&&ci("click",function(c){return o.onClick(c.button,c.ctrlKey,c.shiftKey,c.altKey,c.metaKey)}),2&e&&ni("target",o.target)("href",o.href,qn)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[vn]}),r})();function Ep(r){return""===r||!!r}class gO{}class mO{preload(t,e){return zt(null)}}let _O=(()=>{class r{constructor(e,o,a,c){this.router=e,this.injector=a,this.preloadingStrategy=c,this.loader=new pO(a,o,g=>e.triggerEvent(new wA(g)),g=>e.triggerEvent(new SA(g)))}setUpPreloading(){this.subscription=this.router.events.pipe(un(e=>e instanceof _g),_p(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(sl);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,o){const a=[];for(const c of o)if(c.loadChildren&&!c.canLoad&&c._loadedConfig){const d=c._loadedConfig;a.push(this.processRoutes(d.module,d.routes))}else c.loadChildren&&!c.canLoad?a.push(this.preloadConfig(e,c)):c.children&&a.push(this.processRoutes(e,c.children));return On(a).pipe(Un(),He(c=>{}))}preloadConfig(e,o){return this.preloadingStrategy.preload(o,()=>(o._loadedConfig?zt(o._loadedConfig):this.loader.load(e.injector,o)).pipe(Dn(c=>(o._loadedConfig=c,this.processRoutes(c.module,c.routes)))))}}return r.\u0275fac=function(e){return new(e||r)(Oe(bs),Oe(r_),Oe(tn),Oe(gO))},r.\u0275prov=rt({token:r,factory:r.\u0275fac}),r})(),dT=(()=>{class r{constructor(e,o,a={}){this.router=e,this.viewportScroller=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof XC?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof _g&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof DA&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,o){this.router.triggerEvent(new DA(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,o))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return r.\u0275fac=function(e){Kh()},r.\u0275prov=rt({token:r,factory:r.\u0275fac}),r})();const Ed=new xe("ROUTER_CONFIGURATION"),vO=new xe("ROUTER_FORROOT_GUARD"),u5=[og,{provide:LA,useClass:FA},{provide:bs,useFactory:function(r,t,e,o,a,c,d={},p,g){const v=new bs(null,r,t,e,o,a,IA(c));return p&&(v.urlHandlingStrategy=p),g&&(v.routeReuseStrategy=g),function(r,t){r.errorHandler&&(t.errorHandler=r.errorHandler),r.malformedUriErrorHandler&&(t.malformedUriErrorHandler=r.malformedUriErrorHandler),r.onSameUrlNavigation&&(t.onSameUrlNavigation=r.onSameUrlNavigation),r.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=r.paramsInheritanceStrategy),r.relativeLinkResolution&&(t.relativeLinkResolution=r.relativeLinkResolution),r.urlUpdateStrategy&&(t.urlUpdateStrategy=r.urlUpdateStrategy),r.canceledNavigationResolution&&(t.canceledNavigationResolution=r.canceledNavigationResolution)}(d,v),d.enableTracing&&v.events.subscribe(E=>{var D,x;null==(D=console.group)||D.call(console,`Router Event: ${E.constructor.name}`),console.log(E.toString()),console.log(E),null==(x=console.groupEnd)||x.call(console)}),v},deps:[LA,wg,og,tn,r_,cT,Ed,[class{},new Ln],[class{},new Ln]]},wg,{provide:bd,useFactory:function(r){return r.routerState.root},deps:[bs]},_O,mO,class{preload(t,e){return e().pipe(Zl(()=>zt(null)))}},{provide:Ed,useValue:{enableTracing:!1}}];function d5(){return new ME("Router",bs)}let bO=(()=>{class r{constructor(e,o){}static forRoot(e,o){return{ngModule:r,providers:[u5,yO(e),{provide:vO,useFactory:f5,deps:[[bs,new Ln,new gr]]},{provide:Ed,useValue:o||{}},{provide:gp,useFactory:p5,deps:[gd,[new Gc(rC),new Ln],Ed]},{provide:dT,useFactory:h5,deps:[bs,dj,Ed]},{provide:gO,useExisting:o&&o.preloadingStrategy?o.preloadingStrategy:mO},{provide:ME,multi:!0,useFactory:d5},[hT,{provide:ap,multi:!0,useFactory:v5,deps:[hT]},{provide:EO,useFactory:b5,deps:[hT]},{provide:vM,multi:!0,useExisting:EO}]]}}static forChild(e){return{ngModule:r,providers:[yO(e)]}}}return r.\u0275fac=function(e){return new(e||r)(Oe(vO,8),Oe(bs,8))},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({}),r})();function h5(r,t,e){return e.scrollOffset&&t.setOffset(e.scrollOffset),new dT(r,t,e)}function p5(r,t,e={}){return e.useHash?new KG(r,t):new xI(r,t)}function f5(r){return"guarded"}function yO(r){return[{provide:zn,multi:!0,useValue:r},{provide:cT,multi:!0,useValue:r}]}let hT=(()=>{class r{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Se}appInitializer(){return this.injector.get(YG,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let o=null;const a=new Promise(p=>o=p),c=this.injector.get(bs),d=this.injector.get(Ed);return"disabled"===d.initialNavigation?(c.setUpLocationChangeListener(),o(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(c.hooks.afterPreactivation=()=>this.initNavigation?zt(null):(this.initNavigation=!0,o(!0),this.resultOfPreactivationDone),c.initialNavigation()):o(!0),a})}bootstrapListener(e){const o=this.injector.get(Ed),a=this.injector.get(_O),c=this.injector.get(dT),d=this.injector.get(bs),p=this.injector.get(ud);e===p.components[0]&&(("enabledNonBlocking"===o.initialNavigation||void 0===o.initialNavigation)&&d.initialNavigation(),a.setUpPreloading(),c.init(),d.resetRootComponentType(p.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return r.\u0275fac=function(e){return new(e||r)(Oe(tn))},r.\u0275prov=rt({token:r,factory:r.\u0275fac}),r})();function v5(r){return r.appInitializer.bind(r)}function b5(r){return r.bootstrapListener.bind(r)}const EO=new xe("Router Initializer");function CO(r,t,e,o,a,c,d){try{var p=r[c](d),g=p.value}catch(v){return void e(v)}p.done?t(g):Promise.resolve(g).then(o,a)}function pT(r){return function(){var t=this,e=arguments;return new Promise(function(o,a){var c=r.apply(t,e);function d(g){CO(c,o,a,d,p,"next",g)}function p(g){CO(c,o,a,d,p,"throw",g)}d(void 0)})}}var Fi=m(5389),oo=m(75610),In=m(78011),Cp=m(84575),E5=m(80184),C5=m(3138);class Ma{constructor(t){this.table=t}reloadData(t,e){return this.table.dataLoader.load(t,void 0,void 0,void 0,e)}langText(){return this.table.modules.localize.getText(...arguments)}langBind(){return this.table.modules.localize.bind(...arguments)}langLocale(){return this.table.modules.localize.getLocale(...arguments)}commsConnections(){return this.table.modules.comms.getConnections(...arguments)}commsSend(){return this.table.modules.comms.send(...arguments)}layoutMode(){return this.table.modules.layout.getMode()}layoutRefresh(){return this.table.modules.layout.layout()}subscribe(){return this.table.eventBus.subscribe(...arguments)}unsubscribe(){return this.table.eventBus.unsubscribe(...arguments)}subscribed(t){return this.table.eventBus.subscribed(t)}subscriptionChange(){return this.table.eventBus.subscriptionChange(...arguments)}dispatch(){return this.table.eventBus.dispatch(...arguments)}chain(){return this.table.eventBus.chain(...arguments)}confirm(){return this.table.eventBus.confirm(...arguments)}dispatchExternal(){return this.table.externalEvents.dispatch(...arguments)}subscribedExternal(t){return this.table.externalEvents.subscribed(t)}subscriptionChangeExternal(){return this.table.externalEvents.subscriptionChange(...arguments)}options(t,e){return void 0!==e&&(this.table.options[t]=e),this.table.options[t]}setOption(t,e){return void 0!==e&&(this.table.options[t]=e),this.table.options[t]}module(t){return this.table.module(t)}}class Zi extends Ma{constructor(t,e){super(t),this._handler=null}initialize(){}registerTableOption(t,e){this.table.optionsList.register(t,e)}registerColumnOption(t,e){this.table.columnManager.optionsList.register(t,e)}registerTableFunction(t,e){void 0===this.table[t]?this.table[t]=e:console.warn("Unable to bind table function, name already in use",t)}registerComponentFunction(t,e,o){return this.table.componentFunctionBinder.bind(t,e,o)}registerDataHandler(t,e){this.table.rowManager.registerDataPipelineHandler(t,e),this._handler=t}registerDisplayHandler(t,e){this.table.rowManager.registerDisplayPipelineHandler(t,e),this._handler=t}refreshData(t,e){e||(e=this._handler),e&&this.table.rowManager.refreshActiveData(e,!1,t)}}class Jn{static elVisible(t){return!(t.offsetWidth<=0&&t.offsetHeight<=0)}static elOffset(t){var e=t.getBoundingClientRect();return{top:e.top+window.pageYOffset-document.documentElement.clientTop,left:e.left+window.pageXOffset-document.documentElement.clientLeft}}static deepClone(t,e,o=[]){var a={}.__proto__,c=[].__proto__;for(var d in e||(e=Object.assign(Array.isArray(t)?[]:{},t)),t){let g,v,p=t[d];null!=p&&"object"==typeof p&&(p.__proto__===a||p.__proto__===c)&&(g=o.findIndex(E=>E.subject===p),g>-1?e[d]=o[g].copy:(v=Object.assign(Array.isArray(p)?[]:{},p),o.unshift({subject:p,copy:v}),e[d]=this.deepClone(p,v,o)))}return e}}var T5={};let w5=(()=>{class r extends Zi{constructor(e){super(e),this.allowedTypes=["","data","download","clipboard","print","htmlOutput"],this.registerColumnOption("accessor"),this.registerColumnOption("accessorParams"),this.registerColumnOption("accessorData"),this.registerColumnOption("accessorDataParams"),this.registerColumnOption("accessorDownload"),this.registerColumnOption("accessorDownloadParams"),this.registerColumnOption("accessorClipboard"),this.registerColumnOption("accessorClipboardParams"),this.registerColumnOption("accessorPrint"),this.registerColumnOption("accessorPrintParams"),this.registerColumnOption("accessorHtmlOutput"),this.registerColumnOption("accessorHtmlOutputParams")}initialize(){this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("row-data-retrieve",this.transformRow.bind(this))}initializeColumn(e){var o=!1,a={};this.allowedTypes.forEach(c=>{var p,d="accessor"+(c.charAt(0).toUpperCase()+c.slice(1));e.definition[d]&&(p=this.lookupAccessor(e.definition[d]))&&(o=!0,a[d]={accessor:p,params:e.definition[d+"Params"]||{}})}),o&&(e.modules.accessor=a)}lookupAccessor(e){var o=!1;switch(typeof e){case"string":r.accessors[e]?o=r.accessors[e]:console.warn("Accessor Error - No such accessor found, ignoring: ",e);break;case"function":o=e}return o}transformRow(e,o){var a="accessor"+(o.charAt(0).toUpperCase()+o.slice(1)),c=e.getComponent(),d=Jn.deepClone(e.data||{});return this.table.columnManager.traverse(function(p){var g,v,E,D;p.modules.accessor&&(v=p.modules.accessor[a]||p.modules.accessor.accessor||!1)&&"undefined"!=(g=p.getFieldValue(d))&&(D=p.getComponent(),E="function"==typeof v.params?v.params(g,d,o,D,c):v.params,p.setFieldValue(d,v.accessor(g,d,o,E,D,c)))}),d}}return r.moduleName="accessor",r.accessors=T5,r})();var S5={method:"GET"};function fT(r,t){var e=[];if(t=t||"",Array.isArray(r))r.forEach((a,c)=>{e=e.concat(fT(a,t?t+"["+c+"]":c))});else if("object"==typeof r)for(var o in r)e=e.concat(fT(r[o],t?t+"["+o+"]":o));else e.push({key:t,value:r});return e}function D5(r){var t=fT(r),e=[];return t.forEach(function(o){e.push(encodeURIComponent(o.key)+"="+encodeURIComponent(o.value))}),e.join("&")}function R5(r,t,e){return r&&e&&Object.keys(e).length&&(!t.method||"get"==t.method.toLowerCase())&&(t.method="get",r+=(r.includes("?")?"&":"?")+D5(e)),r}function M5(r,t,e){var o;return new Promise((a,c)=>{if(r=this.urlGenerator.call(this.table,r,t,e),"GET"!=t.method.toUpperCase())if(o="object"==typeof this.table.options.ajaxContentType?this.table.options.ajaxContentType:this.contentTypeFormatters[this.table.options.ajaxContentType]){for(var d in o.headers)t.headers||(t.headers={}),void 0===t.headers[d]&&(t.headers[d]=o.headers[d]);t.body=o.body.call(this,r,t,e)}else console.warn("Ajax Error - Invalid ajaxContentType value:",this.table.options.ajaxContentType);r?(void 0===t.headers&&(t.headers={}),void 0===t.headers.Accept&&(t.headers.Accept="application/json"),void 0===t.headers["X-Requested-With"]&&(t.headers["X-Requested-With"]="XMLHttpRequest"),void 0===t.mode&&(t.mode="cors"),"cors"==t.mode?(void 0===t.headers.Origin&&(t.headers.Origin=window.location.origin),void 0===t.credentials&&(t.credentials="same-origin")):void 0===t.credentials&&(t.credentials="include"),fetch(r,t).then(p=>{p.ok?p.json().then(g=>{a(g)}).catch(g=>{c(g),console.warn("Ajax Load Error - Invalid JSON returned",g)}):(console.error("Ajax Load Error - Connection Error: "+p.status,p.statusText),c(p))}).catch(p=>{console.error("Ajax Load Error - Connection Error: ",p),c(p)})):(console.warn("Ajax Load Error - No URL Set"),a([]))})}function gT(r,t){var e=[];if(t=t||"",Array.isArray(r))r.forEach((a,c)=>{e=e.concat(gT(a,t?t+"["+c+"]":c))});else if("object"==typeof r)for(var o in r)e=e.concat(gT(r[o],t?t+"["+o+"]":o));else e.push({key:t,value:r});return e}var I5={json:{headers:{"Content-Type":"application/json"},body:function(r,t,e){return JSON.stringify(e)}},form:{headers:{},body:function(r,t,e){var o=gT(e),a=new FormData;return o.forEach(function(c){a.append(c.key,c.value)}),a}}};let x5=(()=>{class r extends Zi{constructor(e){super(e),this.config=!1,this.url="",this.urlGenerator=!1,this.params=!1,this.loaderPromise=!1,this.registerTableOption("ajaxURL",!1),this.registerTableOption("ajaxURLGenerator",!1),this.registerTableOption("ajaxParams",{}),this.registerTableOption("ajaxConfig","get"),this.registerTableOption("ajaxContentType","form"),this.registerTableOption("ajaxRequestFunc",!1),this.registerTableOption("ajaxRequesting",function(){}),this.registerTableOption("ajaxResponse",!1),this.contentTypeFormatters=r.contentTypeFormatters}initialize(){this.loaderPromise=this.table.options.ajaxRequestFunc||r.defaultLoaderPromise,this.urlGenerator=this.table.options.ajaxURLGenerator||r.defaultURLGenerator,this.table.options.ajaxParams&&this.setParams(this.table.options.ajaxParams),this.table.options.ajaxConfig&&this.setConfig(this.table.options.ajaxConfig),this.table.options.ajaxURL&&this.setUrl(this.table.options.ajaxURL),this.registerTableFunction("getAjaxUrl",this.getUrl.bind(this)),this.subscribe("data-loading",this.requestDataCheck.bind(this)),this.subscribe("data-load",this.requestData.bind(this))}requestDataCheck(e,o,a,c){return!((e||!this.url)&&"string"!=typeof e)}requestData(e,o,a,c,d){return this.requestDataCheck(e)?(e&&this.setUrl(e),o&&this.setParams(o,!0),a&&this.setConfig(a),this.sendRequest()):d}setParams(e,o){if(o){this.params=this.params||{};for(let a in e)this.params[a]=e[a]}else this.params=e}getParams(){return this.params||{}}setConfig(e){if(this._loadDefaultConfig(),"string"==typeof e)this.config.method=e;else for(let o in e)this.config[o]=e[o]}_loadDefaultConfig(e){if(!this.config||e){this.config={};for(let o in r.defaultConfig)this.config[o]=r.defaultConfig[o]}}setUrl(e){this.url=e}getUrl(){return this.url}sendRequest(e){var o=this.url;return this._loadDefaultConfig(),!1!==this.table.options.ajaxRequesting.call(this.table,this.url,this.params)?this.loaderPromise(o,this.config,this.params).then(a=>(this.table.options.ajaxResponse&&(a=this.table.options.ajaxResponse.call(this.table,this.url,this.params,a)),a)):Promise.reject()}}return r.moduleName="ajax",r.defaultConfig=S5,r.defaultURLGenerator=R5,r.defaultLoaderPromise=M5,r.contentTypeFormatters=I5,r})();var A5={replace:function(r){return this.table.setData(r)},update:function(r){return this.table.updateOrAddData(r)},insert:function(r){return this.table.addData(r)}},O5={table:function(r){var t=[],e=!0,o=this.table.columnManager.columns,a=[],c=[];return(r=r.split("\n")).forEach(function(d){t.push(d.split("\t"))}),!(!t.length||1===t.length&&t[0].length<2)&&(t[0].forEach(function(d){var p=o.find(function(g){return d&&g.definition.title&&d.trim()&&g.definition.title.trim()===d.trim()});p?a.push(p):e=!1}),e||(e=!0,a=[],t[0].forEach(function(d){var p=o.find(function(g){return d&&g.field&&d.trim()&&g.field.trim()===d.trim()});p?a.push(p):e=!1}),e||(a=this.table.columnManager.columnsByIndex)),e&&t.shift(),t.forEach(function(d){var p={};d.forEach(function(g,v){a[v]&&(p[a[v].field]=g)}),c.push(p)}),c)}};let k5=(()=>{class r extends Zi{constructor(e){super(e),this.mode=!0,this.pasteParser=function(){},this.pasteAction=function(){},this.customSelection=!1,this.rowRange=!1,this.blocked=!0,this.registerTableOption("clipboard",!1),this.registerTableOption("clipboardCopyStyled",!0),this.registerTableOption("clipboardCopyConfig",!1),this.registerTableOption("clipboardCopyFormatter",!1),this.registerTableOption("clipboardCopyRowRange","active"),this.registerTableOption("clipboardPasteParser","table"),this.registerTableOption("clipboardPasteAction","insert"),this.registerColumnOption("clipboard"),this.registerColumnOption("titleClipboard")}initialize(){this.mode=this.table.options.clipboard,this.rowRange=this.table.options.clipboardCopyRowRange,(!0===this.mode||"copy"===this.mode)&&this.table.element.addEventListener("copy",e=>{var o,a;if(!this.blocked){if(e.preventDefault(),this.customSelection)o=this.customSelection,this.table.options.clipboardCopyFormatter&&(o=this.table.options.clipboardCopyFormatter("plain",o));else{var c=this.table.modules.export.generateExportList(this.table.options.clipboardCopyConfig,this.table.options.clipboardCopyStyled,this.rowRange,"clipboard");o=(a=this.table.modules.export.genereateHTMLTable(c))?this.generatePlainContent(c):"",this.table.options.clipboardCopyFormatter&&(o=this.table.options.clipboardCopyFormatter("plain",o),a=this.table.options.clipboardCopyFormatter("html",a))}window.clipboardData&&window.clipboardData.setData?window.clipboardData.setData("Text",o):e.clipboardData&&e.clipboardData.setData?(e.clipboardData.setData("text/plain",o),a&&e.clipboardData.setData("text/html",a)):e.originalEvent&&e.originalEvent.clipboardData.setData&&(e.originalEvent.clipboardData.setData("text/plain",o),a&&e.originalEvent.clipboardData.setData("text/html",a)),this.dispatchExternal("clipboardCopied",o,a),this.reset()}}),(!0===this.mode||"paste"===this.mode)&&this.table.element.addEventListener("paste",e=>{this.paste(e)}),this.setPasteParser(this.table.options.clipboardPasteParser),this.setPasteAction(this.table.options.clipboardPasteAction),this.registerTableFunction("copyToClipboard",this.copy.bind(this))}reset(){this.blocked=!0,this.customSelection=!1}generatePlainContent(e){var o=[];return e.forEach(a=>{var c=[];a.columns.forEach(d=>{var p="";if(d)if("group"===a.type&&(d.value=d.component.getKey()),null===d.value)p="";else switch(typeof d.value){case"object":p=JSON.stringify(d.value);break;case"undefined":p="";break;default:p=d.value}c.push(p)}),o.push(c.join("\t"))}),o.join("\n")}copy(e,o){var a,c;this.blocked=!1,this.customSelection=!1,(!0===this.mode||"copy"===this.mode)&&(this.rowRange=e||this.table.options.clipboardCopyRowRange,void 0!==window.getSelection&&void 0!==document.createRange?((e=document.createRange()).selectNodeContents(this.table.element),(a=window.getSelection()).toString()&&o&&(this.customSelection=a.toString()),a.removeAllRanges(),a.addRange(e)):void 0!==document.selection&&void 0!==document.body.createTextRange&&((c=document.body.createTextRange()).moveToElementText(this.table.element),c.select()),document.execCommand("copy"),a&&a.removeAllRanges())}setPasteAction(e){switch(typeof e){case"string":this.pasteAction=r.pasteActions[e],this.pasteAction||console.warn("Clipboard Error - No such paste action found:",e);break;case"function":this.pasteAction=e}}setPasteParser(e){switch(typeof e){case"string":this.pasteParser=r.pasteParsers[e],this.pasteParser||console.warn("Clipboard Error - No such paste parser found:",e);break;case"function":this.pasteParser=e}}paste(e){var o,a,c;this.checkPaseOrigin(e)&&(o=this.getPasteData(e),(a=this.pasteParser.call(this,o))?(e.preventDefault(),this.table.modExists("mutator")&&(a=this.mutateData(a)),c=this.pasteAction.call(this,a),this.dispatchExternal("clipboardPasted",o,a,c)):this.dispatchExternal("clipboardPasteError",o))}mutateData(e){var o=[];return Array.isArray(e)?e.forEach(a=>{o.push(this.table.modules.mutator.transformRow(a,"clipboard"))}):o=e,o}checkPaseOrigin(e){var o=!0;return("DIV"!=e.target.tagName||this.table.modules.edit.currentCell)&&(o=!1),o}getPasteData(e){var o;return window.clipboardData&&window.clipboardData.getData?o=window.clipboardData.getData("Text"):e.clipboardData&&e.clipboardData.getData?o=e.clipboardData.getData("text/plain"):e.originalEvent&&e.originalEvent.clipboardData.getData&&(o=e.originalEvent.clipboardData.getData("text/plain")),o}}return r.moduleName="clipboard",r.pasteActions=A5,r.pasteParsers=O5,r})();class N5{constructor(t){return this._row=t,new Proxy(this,{get:function(e,o,a){return void 0!==e[o]?e[o]:e._row.table.componentFunctionBinder.handle("row",e._row,o)}})}getData(t){return this._row.getData(t)}getElement(){return this._row.getElement()}getTable(){return this._row.table}getCells(){var t=[];return this._row.getCells().forEach(function(e){t.push(e.getComponent())}),t}getCell(t){var e=this._row.getCell(t);return!!e&&e.getComponent()}_getSelf(){return this._row}}class TO{constructor(t){return this._cell=t,new Proxy(this,{get:function(e,o,a){return void 0!==e[o]?e[o]:e._cell.table.componentFunctionBinder.handle("cell",e._cell,o)}})}getValue(){return this._cell.getValue()}getOldValue(){return this._cell.getOldValue()}getInitialValue(){return this._cell.initialValue}getElement(){return this._cell.getElement()}getRow(){return this._cell.row.getComponent()}getData(){return this._cell.row.getData()}getField(){return this._cell.column.getField()}getColumn(){return this._cell.column.getComponent()}setValue(t,e){void 0===e&&(e=!0),this._cell.setValue(t,e)}restoreOldValue(){this._cell.setValueActual(this._cell.getOldValue())}restoreInitialValue(){this._cell.setValueActual(this._cell.initialValue)}checkHeight(){this._cell.checkHeight()}getTable(){return this._cell.table}_getSelf(){return this._cell}}class dv extends Ma{constructor(t,e){super(t.table),this.table=t.table,this.column=t,this.row=e,this.element=null,this.value=null,this.oldValue=null,this.modules={},this.height=null,this.width=null,this.minWidth=null,this.component=null,this.loaded=!1,this.build()}build(){this.generateElement(),this.setWidth(),this._configureCell(),this.setValueActual(this.column.getFieldValue(this.row.data)),this.initialValue=this.value}generateElement(){this.element=document.createElement("div"),this.element.className="tabulator-cell",this.element.setAttribute("role","gridcell"),this.element=this.element}_configureCell(){var t=this.element,e=this.column.getField();t.style.textAlign=this.column.hozAlign,this.column.vertAlign&&(t.style.display="inline-flex",t.style.alignItems={top:"flex-start",bottom:"flex-end",middle:"center"}[this.column.vertAlign]||"",this.column.hozAlign&&(t.style.justifyContent={left:"flex-start",right:"flex-end",center:"center"}[this.column.hozAlign]||"")),e&&t.setAttribute("tabulator-field",e),this.column.definition.cssClass&&this.column.definition.cssClass.split(" ").forEach(d=>{t.classList.add(d)}),"hover"===this.table.options.tooltipGenerationMode&&t.addEventListener("mouseenter",d=>{this._generateTooltip()}),this.dispatch("cell-init",this),this.column.visible||this.hide()}_generateContents(){var t;switch(typeof(t=this.chain("cell-format",this,null,()=>this.element.innerHTML=this.value))){case"object":if(t instanceof Node){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.appendChild(t)}else this.element.innerHTML="",null!=t&&console.warn("Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",t);break;case"undefined":case"null":this.element.innerHTML="";break;default:this.element.innerHTML=t}}cellRendered(){this.dispatch("cell-rendered",this)}_generateTooltip(){var t=this.column.tooltip;t?(!0===t?t=this.value:"function"==typeof t&&!1===(t=t(this.getComponent()))&&(t=""),void 0===t&&(t=""),this.element.setAttribute("title",t)):this.element.setAttribute("title","")}getElement(t){return this.loaded||(this.loaded=!0,t||this.layoutElement()),this.element}getValue(){return this.value}getOldValue(){return this.oldValue}setValue(t,e){this.setValueProcessData(t,e)&&(this.dispatch("cell-value-updated",this),this.cellRendered(),this.dispatchExternal("cellEdited",this.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()))}setValueProcessData(t,e){var o=!1;return this.value!=t&&(o=!0,e&&(t=this.chain("cell-value-changing",[this,t],null,t))),this.setValueActual(t),o&&this.dispatch("cell-value-changed",this),o}setValueActual(t){this.oldValue=this.value,this.value=t,this.dispatch("cell-value-save-before",this),this.column.setFieldValue(this.row.data,t),this.dispatch("cell-value-save-after",this),this.loaded&&this.layoutElement()}layoutElement(){this._generateContents(),this._generateTooltip(),this.dispatch("cell-layout",this)}setWidth(){this.width=this.column.width,this.element.style.width=this.column.widthStyled}clearWidth(){this.width="",this.element.style.width=""}getWidth(){return this.width||this.element.offsetWidth}setMinWidth(){this.minWidth=this.column.minWidth,this.element.style.minWidth=this.column.minWidthStyled}setMaxWidth(){this.maxWidth=this.column.maxWidth,this.element.style.maxWidth=this.column.maxWidthStyled}checkHeight(){this.row.reinitializeHeight()}clearHeight(){this.element.style.height="",this.height=null}setHeight(){this.height=this.row.height,this.element.style.height=this.row.heightStyled}getHeight(){return this.height||this.element.offsetHeight}show(){this.element.style.display=this.column.vertAlign?"inline-flex":""}hide(){this.element.style.display="none"}delete(){this.dispatch("cell-delete",this),!this.table.rowManager.redrawBlock&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=!1,this.column.deleteCell(this),this.row.deleteCell(this),this.calcs={}}getIndex(){return this.row.getCellIndex(this)}getComponent(){return this.component||(this.component=new TO(this)),this.component}}class wO{constructor(t){return this._column=t,this.type="ColumnComponent",new Proxy(this,{get:function(e,o,a){return void 0!==e[o]?e[o]:e._column.table.componentFunctionBinder.handle("column",e._column,o)}})}getElement(){return this._column.getElement()}getDefinition(){return this._column.getDefinition()}getField(){return this._column.getField()}getCells(){var t=[];return this._column.cells.forEach(function(e){t.push(e.getComponent())}),t}isVisible(){return this._column.visible}show(){this._column.isGroup?this._column.columns.forEach(function(t){t.show()}):this._column.show()}hide(){this._column.isGroup?this._column.columns.forEach(function(t){t.hide()}):this._column.hide()}toggle(){this._column.visible?this.hide():this.show()}delete(){return this._column.delete()}getSubColumns(){var t=[];return this._column.columns.length&&this._column.columns.forEach(function(e){t.push(e.getComponent())}),t}getParentColumn(){return this._column.parent instanceof Column&&this._column.parent.getComponent()}_getSelf(){return this._column}scrollTo(){return this._column.table.columnManager.scrollToColumn(this._column)}getTable(){return this._column.table}move(t,e){var o=this._column.table.columnManager.findColumn(t);o?this._column.table.columnManager.moveColumn(this._column,o,e):console.warn("Move Error - No matching column found:",o)}getNextColumn(){var t=this._column.nextColumn();return!!t&&t.getComponent()}getPrevColumn(){var t=this._column.prevColumn();return!!t&&t.getComponent()}updateDefinition(t){return this._column.updateDefinition(t)}getWidth(){return this._column.getWidth()}setWidth(t){var e;return e=!0===t?this._column.reinitializeWidth(!0):this._column.setWidth(t),this._column.table.columnManager.renderer.rerenderColumns(!0),e}}var P5={title:void 0,field:void 0,columns:void 0,visible:void 0,hozAlign:void 0,vertAlign:void 0,width:void 0,minWidth:40,maxWidth:void 0,tooltip:void 0,cssClass:void 0,variableHeight:void 0,headerTooltip:void 0,headerVertical:void 0,headerHozAlign:void 0,editableTitle:void 0};let Ig=(()=>{class r extends Ma{constructor(e,o){super(o.table),this.definition=e,this.parent=o,this.type="column",this.columns=[],this.cells=[],this.element=this.createElement(),this.contentElement=!1,this.titleHolderElement=!1,this.titleElement=!1,this.groupElement=this.createGroupElement(),this.isGroup=!1,this.tooltip=!1,this.hozAlign="",this.vertAlign="",this.field="",this.fieldStructure="",this.getFieldValue="",this.setFieldValue="",this.titleFormatterRendered=!1,this.mapDefinitions(),this.setField(this.definition.field),this.modules={},this.width=null,this.widthStyled="",this.maxWidth=null,this.maxWidthStyled="",this.minWidth=null,this.minWidthStyled="",this.widthFixed=!1,this.visible=!0,this.component=null,this.definition.columns?(this.isGroup=!0,this.definition.columns.forEach((a,c)=>{var d=new r(a,this);this.attachColumn(d)}),this.checkColumnVisibility()):o.registerColumnField(this),this._initialize(),this.bindModuleColumns()}createElement(){var e=document.createElement("div");return e.classList.add("tabulator-col"),e.setAttribute("role","columnheader"),e.setAttribute("aria-sort","none"),e}createGroupElement(){var e=document.createElement("div");return e.classList.add("tabulator-col-group-cols"),e}mapDefinitions(){var e=this.table.options.columnDefaults;if(e)for(let o in e)void 0===this.definition[o]&&(this.definition[o]=e[o]);this.definition=this.table.columnManager.optionsList.generate(r.defaultOptionList,this.definition)}checkDefinition(){Object.keys(this.definition).forEach(e=>{-1===r.defaultOptionList.indexOf(e)&&console.warn("Invalid column definition option in '"+(this.field||this.definition.title)+"' column:",e)})}setField(e){this.field=e,this.fieldStructure=e?this.table.options.nestedFieldSeparator?e.split(this.table.options.nestedFieldSeparator):[e]:[],this.getFieldValue=this.fieldStructure.length>1?this._getNestedData:this._getFlatData,this.setFieldValue=this.fieldStructure.length>1?this._setNestedData:this._setFlatData}registerColumnPosition(e){this.parent.registerColumnPosition(e)}registerColumnField(e){this.parent.registerColumnField(e)}reRegisterPosition(){this.isGroup?this.columns.forEach(function(e){e.reRegisterPosition()}):this.registerColumnPosition(this)}_mapDepricatedFunctionality(){}setTooltip(){var e=this.definition,o=void 0===e.headerTooltip?e.tooltip:e.headerTooltip;o?!0===o?e.field?this.langBind("columns|"+e.field,a=>{this.element.setAttribute("title",a||e.title)}):this.element.setAttribute("title",e.title):("function"==typeof o&&!1===(o=o(this.getComponent()))&&(o=""),this.element.setAttribute("title",o)):this.element.setAttribute("title","")}_initialize(){for(var e=this.definition;this.element.firstChild;)this.element.removeChild(this.element.firstChild);e.headerVertical&&(this.element.classList.add("tabulator-col-vertical"),"flip"===e.headerVertical&&this.element.classList.add("tabulator-col-vertical-flip")),this.contentElement=this._bindEvents(),this.contentElement=this._buildColumnHeaderContent(),this.element.appendChild(this.contentElement),this.isGroup?this._buildGroupHeader():this._buildColumnHeader(),this.setTooltip(),this.dispatch("column-init",this),this.element.addEventListener("mouseenter",o=>{this.setTooltip()})}_bindEvents(){var o,a,c,e=this.definition;"function"==typeof e.headerClick&&this.element.addEventListener("click",d=>{e.headerClick(d,this.getComponent())}),"function"==typeof e.headerDblClick&&this.element.addEventListener("dblclick",d=>{e.headerDblClick(d,this.getComponent())}),"function"==typeof e.headerContext&&this.element.addEventListener("contextmenu",d=>{e.headerContext(d,this.getComponent())}),"function"==typeof e.headerTap&&(c=!1,this.element.addEventListener("touchstart",d=>{c=!0},{passive:!0}),this.element.addEventListener("touchend",d=>{c&&e.headerTap(d,this.getComponent()),c=!1})),"function"==typeof e.headerDblTap&&(o=null,this.element.addEventListener("touchend",d=>{o?(clearTimeout(o),o=null,e.headerDblTap(d,this.getComponent())):o=setTimeout(()=>{clearTimeout(o),o=null},300)})),"function"==typeof e.headerTapHold&&(a=null,this.element.addEventListener("touchstart",d=>{clearTimeout(a),a=setTimeout(function(){clearTimeout(a),a=null,c=!1,e.headerTapHold(d,this.getComponent())},1e3)},{passive:!0}),this.element.addEventListener("touchend",d=>{clearTimeout(a),a=null}))}_buildColumnHeader(){var e=this.definition;this.dispatch("column-layout",this),void 0!==e.visible&&(e.visible?this.show(!0):this.hide(!0)),e.cssClass&&e.cssClass.split(" ").forEach(c=>{this.element.classList.add(c)}),e.field&&this.element.setAttribute("tabulator-field",e.field),this.setMinWidth(parseInt(e.minWidth)),e.maxWidth&&this.setMaxWidth(parseInt(e.maxWidth)),this.reinitializeWidth(),this.tooltip=this.definition.tooltip,this.hozAlign=this.definition.hozAlign,this.vertAlign=this.definition.vertAlign,this.titleElement.style.textAlign=this.definition.headerHozAlign}_buildColumnHeaderContent(){var a=document.createElement("div");return a.classList.add("tabulator-col-content"),this.titleHolderElement=document.createElement("div"),this.titleHolderElement.classList.add("tabulator-col-title-holder"),a.appendChild(this.titleHolderElement),this.titleElement=this._buildColumnHeaderTitle(),this.titleHolderElement.appendChild(this.titleElement),a}_buildColumnHeaderTitle(){var e=this.definition,o=document.createElement("div");if(o.classList.add("tabulator-col-title"),e.editableTitle){var a=document.createElement("input");a.classList.add("tabulator-title-editor"),a.addEventListener("click",c=>{c.stopPropagation(),a.focus()}),a.addEventListener("change",()=>{e.title=a.value,this.dispatchExternal("columnTitleChanged",this.getComponent())}),o.appendChild(a),e.field?this.langBind("columns|"+e.field,c=>{a.value=c||e.title||"&nbsp;"}):a.value=e.title||"&nbsp;"}else e.field?this.langBind("columns|"+e.field,c=>{this._formatColumnHeaderTitle(o,c||e.title||"&nbsp;")}):this._formatColumnHeaderTitle(o,e.title||"&nbsp;");return o}_formatColumnHeaderTitle(e,o){var a=this.chain("column-format",[this,o,e],null,()=>o);switch(typeof a){case"object":a instanceof Node?e.appendChild(a):(e.innerHTML="",console.warn("Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",a));break;case"undefined":case"null":e.innerHTML="";break;default:e.innerHTML=a}}_buildGroupHeader(){this.element.classList.add("tabulator-col-group"),this.element.setAttribute("role","columngroup"),this.element.setAttribute("aria-title",this.definition.title),this.definition.cssClass&&this.definition.cssClass.split(" ").forEach(o=>{this.element.classList.add(o)}),this.titleElement.style.textAlign=this.definition.headerHozAlign,this.element.appendChild(this.groupElement)}_getFlatData(e){return e[this.field]}_getNestedData(e){var d,o=e,a=this.fieldStructure,c=a.length;for(let p=0;p<c&&(d=o=o[a[p]],o);p++);return d}_setFlatData(e,o){this.field&&(e[this.field]=o)}_setNestedData(e,o){var a=e,c=this.fieldStructure,d=c.length;for(let p=0;p<d;p++)if(p==d-1)a[c[p]]=o;else{if(!a[c[p]]){if(void 0===o)break;a[c[p]]={}}a=a[c[p]]}}attachColumn(e){this.groupElement?(this.columns.push(e),this.groupElement.appendChild(e.getElement())):console.warn("Column Warning - Column being attached to another column instead of column group")}verticalAlign(e,o){var a=this.parent.isGroup?this.parent.getGroupElement().clientHeight:o||this.parent.getHeadersElement().clientHeight;this.element.style.height=a+"px",this.isGroup&&(this.groupElement.style.minHeight=a-this.contentElement.offsetHeight+"px"),!this.isGroup&&"top"!==e&&(this.element.style.paddingTop="bottom"===e?this.element.clientHeight-this.contentElement.offsetHeight+"px":(this.element.clientHeight-this.contentElement.offsetHeight)/2+"px"),this.columns.forEach(function(c){c.verticalAlign(e)})}clearVerticalAlign(){this.element.style.paddingTop="",this.element.style.height="",this.element.style.minHeight="",this.groupElement.style.minHeight="",this.columns.forEach(function(e){e.clearVerticalAlign()})}bindModuleColumns(){"rownum"==this.definition.formatter&&(this.table.rowManager.rowNumColumn=this)}getElement(){return this.element}getGroupElement(){return this.groupElement}getField(){return this.field}getFirstColumn(){return this.isGroup?!!this.columns.length&&this.columns[0].getFirstColumn():this}getLastColumn(){return this.isGroup?!!this.columns.length&&this.columns[this.columns.length-1].getLastColumn():this}getColumns(){return this.columns}getCells(){return this.cells}getTopColumn(){return this.parent.isGroup?this.parent.getTopColumn():this}getDefinition(e){var o=[];return this.isGroup&&e&&(this.columns.forEach(function(a){o.push(a.getDefinition(!0))}),this.definition.columns=o),this.definition}checkColumnVisibility(){var e=!1;this.columns.forEach(function(o){o.visible&&(e=!0)}),e?(this.show(),this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!1)):this.hide()}show(e,o){this.visible||(this.visible=!0,this.element.style.display="",this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(a){a.show()}),!this.isGroup&&null===this.width&&this.reinitializeWidth(),this.table.columnManager.verticalAlignHeaders(),this.dispatch("column-show",this,o),e||this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!0),this.parent.isGroup&&this.parent.matchChildWidths(),this.silent||this.table.columnManager.renderer.rerenderColumns())}hide(e,o){this.visible&&(this.visible=!1,this.element.style.display="none",this.table.columnManager.verticalAlignHeaders(),this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(a){a.hide()}),this.dispatch("column-hide",this),e||this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!1),this.parent.isGroup&&this.parent.matchChildWidths(),this.silent||this.table.columnManager.renderer.rerenderColumns())}matchChildWidths(){var e=0;this.contentElement&&this.columns.length&&(this.columns.forEach(function(o){o.visible&&(e+=o.getWidth())}),this.contentElement.style.maxWidth=e-1+"px",this.parent.isGroup&&this.parent.matchChildWidths())}removeChild(e){var o=this.columns.indexOf(e);o>-1&&this.columns.splice(o,1),this.columns.length||this.delete()}setWidth(e){this.widthFixed=!0,this.setWidthActual(e)}setWidthActual(e){isNaN(e)&&(e=Math.floor(this.table.element.clientWidth/100*parseInt(e))),e=Math.max(this.minWidth,e),this.maxWidth&&(e=Math.min(this.maxWidth,e)),this.width=e,this.widthStyled=e?e+"px":"",this.element.style.width=this.widthStyled,this.isGroup||this.cells.forEach(function(o){o.setWidth()}),this.parent.isGroup&&this.parent.matchChildWidths(),this.dispatch("column-width",this)}checkCellHeights(){var e=[];this.cells.forEach(function(o){o.row.heightInitialized&&(null!==o.row.getElement().offsetParent?(e.push(o.row),o.row.clearCellHeight()):o.row.heightInitialized=!1)}),e.forEach(function(o){o.calcHeight()}),e.forEach(function(o){o.setCellHeight()})}getWidth(){var e=0;return this.isGroup?this.columns.forEach(function(o){o.visible&&(e+=o.getWidth())}):e=this.width,e}getHeight(){return this.element.offsetHeight}setMinWidth(e){this.minWidth=e,this.minWidthStyled=e?e+"px":"",this.element.style.minWidth=this.minWidthStyled,this.cells.forEach(function(o){o.setMinWidth()})}setMaxWidth(e){this.maxWidth=e,this.maxWidthStyled=e?e+"px":"",this.element.style.maxWidth=this.maxWidthStyled,this.cells.forEach(function(o){o.setMaxWidth()})}delete(){return new Promise((e,o)=>{this.isGroup&&this.columns.forEach(function(c){c.delete()}),this.dispatch("column-delete",this);var a=this.cells.length;for(let c=0;c<a;c++)this.cells[0].delete();this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=!1,this.contentElement=!1,this.titleElement=!1,this.groupElement=!1,this.parent.isGroup&&this.parent.removeChild(this),this.table.columnManager.deregisterColumn(this),this.table.columnManager.renderer.rerenderColumns(!0),e()})}columnRendered(){this.titleFormatterRendered&&this.titleFormatterRendered()}generateCell(e){var o=new dv(this,e);return this.cells.push(o),o}nextColumn(){var e=this.table.columnManager.findColumnIndex(this);return e>-1&&this._nextVisibleColumn(e+1)}_nextVisibleColumn(e){var o=this.table.columnManager.getColumnByIndex(e);return!o||o.visible?o:this._nextVisibleColumn(e+1)}prevColumn(){var e=this.table.columnManager.findColumnIndex(this);return e>-1&&this._prevVisibleColumn(e-1)}_prevVisibleColumn(e){var o=this.table.columnManager.getColumnByIndex(e);return!o||o.visible?o:this._prevVisibleColumn(e-1)}reinitializeWidth(e){this.widthFixed=!1,void 0!==this.definition.width&&!e&&this.setWidth(this.definition.width),this.dispatch("column-width-fit-before",this),this.fitToData(),this.dispatch("column-width-fit-after",this)}fitToData(){if(!this.isGroup){this.widthFixed||(this.element.style.width="",this.cells.forEach(o=>{o.clearWidth()}));var e=this.element.offsetWidth;(!this.width||!this.widthFixed)&&(this.cells.forEach(o=>{var a=o.getWidth();a>e&&(e=a)}),e&&this.setWidthActual(e+1))}}updateDefinition(e){var o;return this.isGroup||this.parent.isGroup?(console.error("Column Update Error - The updateDefinition function is only available on ungrouped columns"),Promise.reject("Column Update Error - The updateDefinition function is only available on columns, not column groups")):(o=Object.assign({},this.getDefinition()),o=Object.assign(o,e),this.table.columnManager.addColumn(o,!1,this).then(a=>(o.field==this.field&&(this.field=!1),this.delete().then(()=>a.getComponent()))))}deleteCell(e){var o=this.cells.indexOf(e);o>-1&&this.cells.splice(o,1)}getComponent(){return this.component||(this.component=new wO(this)),this.component}}return r.defaultOptionList=P5,r})();class mT{constructor(t){return this._row=t,new Proxy(this,{get:function(e,o,a){return void 0!==e[o]?e[o]:e._row.table.componentFunctionBinder.handle("row",e._row,o)}})}getData(t){return this._row.getData(t)}getElement(){return this._row.getElement()}getCells(){var t=[];return this._row.getCells().forEach(function(e){t.push(e.getComponent())}),t}getCell(t){var e=this._row.getCell(t);return!!e&&e.getComponent()}getIndex(){return this._row.getData("data")[this._row.table.options.index]}getPosition(t){return this._row.table.rowManager.getRowPosition(this._row,t)}delete(){return this._row.delete()}scrollTo(){return this._row.table.rowManager.scrollToRow(this._row)}move(t,e){this._row.moveToRow(t,e)}update(t){return this._row.updateData(t)}normalizeHeight(){this._row.normalizeHeight(!0)}_getSelf(){return this._row}reformat(){return this._row.reinitialize()}getTable(){return this._row.table}getNextRow(){var t=this._row.nextRow();return t&&t.getComponent()}getPrevRow(){var t=this._row.prevRow();return t&&t.getComponent()}}class Zo extends Ma{constructor(t,e,o="row"){super(e.table),this.parent=e,this.data={},this.type=o,this.element=!1,this.modules={},this.cells=[],this.height=0,this.heightStyled="",this.manualHeight=!1,this.outerHeight=0,this.initialized=!1,this.heightInitialized=!1,this.component=null,this.created=!1,this.setData(t)}create(){this.created||(this.created=!0,this.generateElement())}createElement(){var t=document.createElement("div");t.classList.add("tabulator-row"),t.setAttribute("role","row"),this.element=t}getElement(){return this.create(),this.element}detachElement(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}generateElement(){this.createElement(),this.dispatch("row-init",this)}generateCells(){this.cells=this.table.columnManager.generateCells(this)}initialize(t){if(this.create(),!this.initialized||t){for(this.deleteCells();this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.dispatch("row-layout-before",this),this.generateCells(),this.table.columnManager.renderer.renderRowCells(this),t&&this.normalizeHeight(),this.dispatch("row-layout",this),this.table.options.rowFormatter&&this.table.options.rowFormatter(this.getComponent()),this.initialized=!0,this.dispatch("row-layout-after",this)}else this.table.columnManager.renderer.rerenderRowCells(this)}reinitializeHeight(){this.heightInitialized=!1,this.element&&null!==this.element.offsetParent&&this.normalizeHeight(!0)}deinitializeHeight(){this.heightInitialized=!1}reinitialize(t){this.initialized=!1,this.heightInitialized=!1,this.manualHeight||(this.height=0,this.heightStyled=""),this.element&&null!==this.element.offsetParent&&this.initialize(!0),this.dispatch("row-relayout",this)}calcHeight(t){var e=0,o=this.table.options.resizableRows?this.element.clientHeight:0;this.cells.forEach(function(a){var c=a.getHeight();c>e&&(e=c)}),this.height=t?Math.max(e,o):this.manualHeight?this.height:Math.max(e,o),this.heightStyled=this.height?this.height+"px":"",this.outerHeight=this.element.offsetHeight}setCellHeight(){this.cells.forEach(function(t){t.setHeight()}),this.heightInitialized=!0}clearCellHeight(){this.cells.forEach(function(t){t.clearHeight()})}normalizeHeight(t){t&&this.clearCellHeight(),this.calcHeight(t),this.setCellHeight()}setHeight(t,e){(this.height!=t||e)&&(this.manualHeight=!0,this.height=t,this.heightStyled=t?t+"px":"",this.setCellHeight(),this.outerHeight=this.element.offsetHeight)}getHeight(){return this.outerHeight}getWidth(){return this.element.offsetWidth}deleteCell(t){var e=this.cells.indexOf(t);e>-1&&this.cells.splice(e,1)}setData(t){this.data=this.chain("row-data-init-before",[this,t],void 0,t),this.dispatch("row-data-init-after",this)}updateData(t){var a,e=this.element&&Jn.elVisible(this.element),o={};return new Promise((c,d)=>{for(var p in"string"==typeof t&&(t=JSON.parse(t)),this.dispatch("row-data-save-before",this),this.subscribed("row-data-changing")&&(o=Object.assign(o,this.data),o=Object.assign(o,t)),a=this.chain("row-data-changing",[this,o,t],null,t))this.data[p]=a[p];for(var p in this.dispatch("row-data-save-after",this),t)this.table.columnManager.getColumnsByFieldRoot(p).forEach(E=>{let D=this.getCell(E.getField());if(D){let x=E.getFieldValue(a);D.getValue()!=x&&(D.setValueProcessData(x),e&&D.cellRendered())}});e?(this.normalizeHeight(!0),this.table.options.rowFormatter&&this.table.options.rowFormatter(this.getComponent())):(this.initialized=!1,this.height=0,this.heightStyled=""),this.dispatch("row-data-changed",this,e,t),this.dispatchExternal("rowUpdated",this.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()),c()})}getData(t){return t?this.chain("row-data-retrieve",[this,t],null,this.data):this.data}getCell(t){return t=this.table.columnManager.findColumn(t),this.initialized||this.generateCells(),this.cells.find(function(o){return o.column===t})}getCellIndex(t){return this.cells.findIndex(function(e){return e===t})}findCell(t){return this.cells.find(e=>e.element===t)}getCells(){return this.initialized||this.generateCells(),this.cells}nextRow(){return this.table.rowManager.nextDisplayRow(this,!0)||!1}prevRow(){return this.table.rowManager.prevDisplayRow(this,!0)||!1}moveToRow(t,e){var o=this.table.rowManager.findRow(t);o?(this.table.rowManager.moveRowActual(this,o,!e),this.table.rowManager.refreshActiveData("display",!1,!0)):console.warn("Move Error - No matching row found:",t)}delete(){return this.dispatch("row-delete",this),this.deleteActual(),Promise.resolve()}deleteActual(t){this.table.rowManager.getRowIndex(this),this.detatchModules(),this.table.rowManager.deleteRow(this,t),this.deleteCells(),this.initialized=!1,this.heightInitialized=!1,this.element=!1,this.dispatch("row-deleted",this)}detatchModules(){this.dispatch("row-deleting",this)}deleteCells(){var t=this.cells.length;for(let e=0;e<t;e++)this.cells[0].delete()}wipe(){if(this.detatchModules(),this.deleteCells(),this.element){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.parentNode&&this.element.parentNode.removeChild(this.element)}this.element=!1,this.modules={}}getGroup(){return this.modules.group||!1}getComponent(){return this.component||(this.component=new mT(this)),this.component}}var L5={avg:function(r,t,e){var o=0,a=void 0!==e.precision?e.precision:2;return r.length&&(o=r.reduce(function(c,d){return Number(c)+Number(d)}),o/=r.length,o=!1!==a?o.toFixed(a):o),parseFloat(o).toString()},max:function(r,t,e){var o=null,a=void 0!==e.precision&&e.precision;return r.forEach(function(c){((c=Number(c))>o||null===o)&&(o=c)}),null!==o?!1!==a?o.toFixed(a):o:""},min:function(r,t,e){var o=null,a=void 0!==e.precision&&e.precision;return r.forEach(function(c){((c=Number(c))<o||null===o)&&(o=c)}),null!==o?!1!==a?o.toFixed(a):o:""},sum:function(r,t,e){var o=0,a=void 0!==e.precision&&e.precision;return r.length&&r.forEach(function(c){c=Number(c),o+=isNaN(c)?0:Number(c)}),!1!==a?o.toFixed(a):o},concat:function(r,t,e){var o=0;return r.length&&(o=r.reduce(function(a,c){return String(a)+String(c)})),o},count:function(r,t,e){var o=0;return r.length&&r.forEach(function(a){a&&o++}),o}};let F5=(()=>{class r extends Zi{constructor(e){super(e),this.topCalcs=[],this.botCalcs=[],this.genColumn=!1,this.topElement=this.createElement(),this.botElement=this.createElement(),this.topRow=!1,this.botRow=!1,this.topInitialized=!1,this.botInitialized=!1,this.registerTableOption("columnCalcs",!0),this.registerColumnOption("topCalc"),this.registerColumnOption("topCalcParams"),this.registerColumnOption("topCalcFormatter"),this.registerColumnOption("topCalcFormatterParams"),this.registerColumnOption("bottomCalc"),this.registerColumnOption("bottomCalcParams"),this.registerColumnOption("bottomCalcFormatter"),this.registerColumnOption("bottomCalcFormatterParams")}createElement(){var e=document.createElement("div");return e.classList.add("tabulator-calcs-holder"),e}initialize(){this.genColumn=new Ig({field:"value"},this),this.subscribe("cell-value-changed",this.cellValueChanged.bind(this)),this.subscribe("column-init",this.initializeColumnCheck.bind(this)),this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this)),this.subscribe("row-added",this.rowsUpdated.bind(this)),this.subscribe("column-moved",this.recalcActiveRows.bind(this)),this.subscribe("column-add",this.recalcActiveRows.bind(this)),this.subscribe("data-refeshed",this.recalcActiveRows.bind(this)),this.subscribe("table-redraw",this.tableRedraw.bind(this)),this.registerTableFunction("getCalcResults",this.getResults.bind(this)),this.registerTableFunction("recalc",this.userRecalc.bind(this))}tableRedraw(e){this.recalc(this.table.rowManager.activeRows),e&&this.redraw()}userRecalc(){this.recalc(this.table.rowManager.activeRows)}rowsUpdated(e){this.table.options.groupBy?this.recalcRowGroup(this):this.recalcActiveRows()}recalcActiveRows(){this.recalc(this.table.rowManager.activeRows)}cellValueChanged(e){(e.column.definition.topCalc||e.column.definition.bottomCalc)&&(this.table.options.groupBy?(("table"==this.table.options.columnCalcs||"both"==this.table.options.columnCalcs)&&this.recalcActiveRows(),"table"!=this.table.options.columnCalcs&&this.recalcRowGroup(e.row)):this.recalcActiveRows())}initializeColumnCheck(e){(e.definition.topCalc||e.definition.bottomCalc)&&this.initializeColumn(e)}initializeColumn(e){var o=e.definition,a={topCalcParams:o.topCalcParams||{},botCalcParams:o.bottomCalcParams||{}};if(o.topCalc){switch(typeof o.topCalc){case"string":r.calculations[o.topCalc]?a.topCalc=r.calculations[o.topCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",o.topCalc);break;case"function":a.topCalc=o.topCalc}a.topCalc&&(e.modules.columnCalcs=a,this.topCalcs.push(e),"group"!=this.table.options.columnCalcs&&this.initializeTopRow())}if(o.bottomCalc){switch(typeof o.bottomCalc){case"string":r.calculations[o.bottomCalc]?a.botCalc=r.calculations[o.bottomCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",o.bottomCalc);break;case"function":a.botCalc=o.bottomCalc}a.botCalc&&(e.modules.columnCalcs=a,this.botCalcs.push(e),"group"!=this.table.options.columnCalcs&&this.initializeBottomRow())}}registerColumnField(){}removeCalcs(){var e=!1;this.topInitialized&&(this.topInitialized=!1,this.topElement.parentNode.removeChild(this.topElement),e=!0),this.botInitialized&&(this.botInitialized=!1,this.table.footerManager.remove(this.botElement),e=!0),e&&this.table.rowManager.adjustTableSize()}initializeTopRow(){this.topInitialized||(this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling),this.topInitialized=!0)}initializeBottomRow(){this.botInitialized||(this.table.footerManager.prepend(this.botElement),this.botInitialized=!0)}scrollHorizontal(e){this.botInitialized&&this.botRow&&(this.botRow.getElement().style.marginLeft=-e+"px")}recalc(e){var o;if(this.topInitialized||this.botInitialized){if(this.rowsToData(e),this.topInitialized){for(this.topRow&&this.topRow.deleteCells(),o=this.generateRow("top",this.rowsToData(e)),this.topRow=o;this.topElement.firstChild;)this.topElement.removeChild(this.topElement.firstChild);this.topElement.appendChild(o.getElement()),o.initialize(!0)}if(this.botInitialized){for(this.botRow&&this.botRow.deleteCells(),o=this.generateRow("bottom",this.rowsToData(e)),this.botRow=o;this.botElement.firstChild;)this.botElement.removeChild(this.botElement.firstChild);this.botElement.appendChild(o.getElement()),o.initialize(!0)}this.table.rowManager.adjustTableSize(),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout()}}recalcRowGroup(e){this.recalcGroup(this.table.modules.groupRows.getRowGroup(e))}recalcAll(){(this.topCalcs.length||this.botCalcs.length)&&("group"!==this.table.options.columnCalcs&&this.recalcActiveRows(),this.table.options.groupBy&&"table"!==this.table.options.columnCalcs)&&this.table.modules.groupRows.getChildGroups().forEach(o=>{this.recalcGroup(o)})}recalcGroup(e){var o,a;e&&e.calcs&&(e.calcs.bottom&&(o=this.rowsToData(e.rows),a=this.generateRowData("bottom",o),e.calcs.bottom.updateData(a),e.calcs.bottom.reinitialize()),e.calcs.top&&(o=this.rowsToData(e.rows),a=this.generateRowData("top",o),e.calcs.top.updateData(a),e.calcs.top.reinitialize()))}generateTopRow(e){return this.generateRow("top",this.rowsToData(e))}generateBottomRow(e){return this.generateRow("bottom",this.rowsToData(e))}rowsToData(e){var o=[];return e.forEach(a=>{if(o.push(a.getData()),this.table.options.dataTree&&this.table.options.dataTreeChildColumnCalcs&&a.modules.dataTree.open){var c=this.rowsToData(this.table.modules.dataTree.getFilteredTreeChildren(a));o=o.concat(c)}}),o}generateRow(e,o){var c,a=this.generateRowData(e,o);return this.table.modExists("mutator")&&this.table.modules.mutator.disable(),c=new Zo(a,this,"calc"),this.table.modExists("mutator")&&this.table.modules.mutator.enable(),c.getElement().classList.add("tabulator-calcs","tabulator-calcs-"+e),c.component=!1,c.getComponent=()=>(c.component||(c.component=new N5(this)),c.component),c.generateCells=()=>{var d=[];this.table.columnManager.columnsByIndex.forEach(p=>{this.genColumn.setField(p.getField()),this.genColumn.hozAlign=p.hozAlign,this.genColumn.modules.format=p.definition[e+"CalcFormatter"]&&this.table.modExists("format")?{formatter:this.table.modules.format.getFormatter(p.definition[e+"CalcFormatter"]),params:p.definition[e+"CalcFormatterParams"]||{}}:{formatter:this.table.modules.format.getFormatter("plaintext"),params:{}},this.genColumn.definition.cssClass=p.definition.cssClass;var g=new dv(this.genColumn,c);g.getElement(),g.column=p,g.setWidth(),p.cells.push(g),d.push(g),p.visible||g.hide()}),c.cells=d},c}generateRowData(e,o){var p,g,a={},d="top"==e?"topCalc":"botCalc";return("top"==e?this.topCalcs:this.botCalcs).forEach(function(v){var E=[];v.modules.columnCalcs&&v.modules.columnCalcs[d]&&(o.forEach(function(D){E.push(v.getFieldValue(D))}),p="function"==typeof v.modules.columnCalcs[g=d+"Params"]?v.modules.columnCalcs[g](E,o):v.modules.columnCalcs[g],v.setFieldValue(a,v.modules.columnCalcs[d](E,o,p)))}),a}hasTopCalcs(){return!!this.topCalcs.length}hasBottomCalcs(){return!!this.botCalcs.length}redraw(){this.topRow&&this.topRow.normalizeHeight(!0),this.botRow&&this.botRow.normalizeHeight(!0)}getResults(){var e={};return this.table.options.groupBy&&this.table.modExists("groupRows")?this.table.modules.groupRows.getGroups(!0).forEach(a=>{e[a.getKey()]=this.getGroupResults(a)}):e={top:this.topRow?this.topRow.getData():{},bottom:this.botRow?this.botRow.getData():{}},e}getGroupResults(e){var o=e._getSelf(),a=e.getSubGroups(),c={};return a.forEach(p=>{c[p.getKey()]=this.getGroupResults(p)}),{top:o.calcs.top?o.calcs.top.getData():{},bottom:o.calcs.bottom?o.calcs.bottom.getData():{},groups:c}}}return r.moduleName="columnCalcs",r.calculations=L5,r})(),B5=(()=>{class r extends Zi{constructor(e){super(e),this.indent=10,this.field="",this.collapseEl=null,this.expandEl=null,this.branchEl=null,this.elementField=!1,this.startOpen=function(){},this.displayIndex=0,this.registerTableOption("dataTree",!1),this.registerTableOption("dataTreeFilter",!0),this.registerTableOption("dataTreeSort",!0),this.registerTableOption("dataTreeElementColumn",!1),this.registerTableOption("dataTreeBranchElement",!0),this.registerTableOption("dataTreeChildIndent",9),this.registerTableOption("dataTreeChildField","_children"),this.registerTableOption("dataTreeCollapseElement",!1),this.registerTableOption("dataTreeExpandElement",!1),this.registerTableOption("dataTreeStartExpanded",!1),this.registerTableOption("dataTreeChildColumnCalcs",!1),this.registerTableOption("dataTreeSelectPropagate",!1),this.registerComponentFunction("row","treeCollapse",this.collapseRow.bind(this)),this.registerComponentFunction("row","treeExpand",this.expandRow.bind(this)),this.registerComponentFunction("row","treeToggle",this.toggleRow.bind(this)),this.registerComponentFunction("row","getTreeParent",this.getTreeParent.bind(this)),this.registerComponentFunction("row","getTreeChildren",this.getRowChildren.bind(this)),this.registerComponentFunction("row","addTreeChild",this.addTreeChildRow.bind(this))}initialize(){if(this.table.options.dataTree){var e=null,o=this.table.columnManager.getFirstVisibileColumn(),a=this.table.options;switch(this.field=a.dataTreeChildField,this.indent=a.dataTreeChildIndent,this.elementField=a.dataTreeElementColumn||!!o&&o.field,a.dataTreeBranchElement&&(!0===a.dataTreeBranchElement?(this.branchEl=document.createElement("div"),this.branchEl.classList.add("tabulator-data-tree-branch")):"string"==typeof a.dataTreeBranchElement?((e=document.createElement("div")).innerHTML=a.dataTreeBranchElement,this.branchEl=e.firstChild):this.branchEl=a.dataTreeBranchElement),a.dataTreeCollapseElement?"string"==typeof a.dataTreeCollapseElement?((e=document.createElement("div")).innerHTML=a.dataTreeCollapseElement,this.collapseEl=e.firstChild):this.collapseEl=a.dataTreeCollapseElement:(this.collapseEl=document.createElement("div"),this.collapseEl.classList.add("tabulator-data-tree-control"),this.collapseEl.tabIndex=0,this.collapseEl.innerHTML="<div class='tabulator-data-tree-control-collapse'></div>"),a.dataTreeExpandElement?"string"==typeof a.dataTreeExpandElement?((e=document.createElement("div")).innerHTML=a.dataTreeExpandElement,this.expandEl=e.firstChild):this.expandEl=a.dataTreeExpandElement:(this.expandEl=document.createElement("div"),this.expandEl.classList.add("tabulator-data-tree-control"),this.expandEl.tabIndex=0,this.expandEl.innerHTML="<div class='tabulator-data-tree-control-expand'></div>"),typeof a.dataTreeStartExpanded){case"boolean":this.startOpen=function(c,d){return a.dataTreeStartExpanded};break;case"function":this.startOpen=a.dataTreeStartExpanded;break;default:this.startOpen=function(c,d){return a.dataTreeStartExpanded[d]}}this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-layout-after",this.layoutRow.bind(this)),this.subscribe("row-relayout",this.layoutRow.bind(this)),this.subscribe("row-deleted",this.rowDelete.bind(this),0),this.subscribe("row-data-changed",this.rowDataChanged.bind(this),10),this.subscribe("column-moving-rows",this.columnMoving.bind(this)),this.registerDisplayHandler(this.getRows.bind(this),30)}}getRowChildren(e){return this.getTreeChildren(e,!0)}columnMoving(){var e=[];return this.table.rowManager.rows.forEach(o=>{e=e.concat(this.getTreeChildren(o,!1,!0))}),e}rowDataChanged(e,o,a){this.redrawNeeded(a)&&(this.initializeRow(e),o&&(this.layoutRow(e),this.refreshData(!0)))}initializeRow(e){var o=e.getData()[this.field],a=Array.isArray(o),c=a||!a&&"object"==typeof o&&null!==o;!c&&e.modules.dataTree&&e.modules.dataTree.branchEl&&e.modules.dataTree.branchEl.parentNode.removeChild(e.modules.dataTree.branchEl),!c&&e.modules.dataTree&&e.modules.dataTree.controlEl&&e.modules.dataTree.controlEl.parentNode.removeChild(e.modules.dataTree.controlEl),e.modules.dataTree={index:e.modules.dataTree?e.modules.dataTree.index:0,open:!!c&&(e.modules.dataTree?e.modules.dataTree.open:this.startOpen(e.getComponent(),0)),controlEl:!(!e.modules.dataTree||!c)&&e.modules.dataTree.controlEl,branchEl:!(!e.modules.dataTree||!c)&&e.modules.dataTree.branchEl,parent:!!e.modules.dataTree&&e.modules.dataTree.parent,children:c}}reinitializeRowChildren(e){this.getTreeChildren(e,!1,!0).forEach(function(a){a.reinitialize(!0)})}layoutRow(e){var a=(this.elementField?e.getCell(this.elementField):e.getCells()[0]).getElement(),c=e.modules.dataTree;c.branchEl&&(c.branchEl.parentNode&&c.branchEl.parentNode.removeChild(c.branchEl),c.branchEl=!1),c.controlEl&&(c.controlEl.parentNode&&c.controlEl.parentNode.removeChild(c.controlEl),c.controlEl=!1),this.generateControlElement(e,a),e.getElement().classList.add("tabulator-tree-level-"+c.index),c.index&&(this.branchEl?(c.branchEl=this.branchEl.cloneNode(!0),a.insertBefore(c.branchEl,a.firstChild),this.table.rtl?c.branchEl.style.marginRight=(c.branchEl.offsetWidth+c.branchEl.style.marginLeft)*(c.index-1)+c.index*this.indent+"px":c.branchEl.style.marginLeft=(c.branchEl.offsetWidth+c.branchEl.style.marginRight)*(c.index-1)+c.index*this.indent+"px"):this.table.rtl?a.style.paddingRight=parseInt(window.getComputedStyle(a,null).getPropertyValue("padding-right"))+c.index*this.indent+"px":a.style.paddingLeft=parseInt(window.getComputedStyle(a,null).getPropertyValue("padding-left"))+c.index*this.indent+"px")}generateControlElement(e,o){var a=e.modules.dataTree,c=(o=o||e.getCells()[0].getElement(),a.controlEl);!1!==a.children&&(a.open?(a.controlEl=this.collapseEl.cloneNode(!0),a.controlEl.addEventListener("click",d=>{d.stopPropagation(),this.collapseRow(e)})):(a.controlEl=this.expandEl.cloneNode(!0),a.controlEl.addEventListener("click",d=>{d.stopPropagation(),this.expandRow(e)})),a.controlEl.addEventListener("mousedown",d=>{d.stopPropagation()}),c&&c.parentNode===o?c.parentNode.replaceChild(a.controlEl,c):o.insertBefore(a.controlEl,o.firstChild))}setDisplayIndex(e){this.displayIndex=e}getDisplayIndex(){return this.displayIndex}getRows(e){var o=[];return e.forEach((a,c)=>{var d;o.push(a),a instanceof Zo&&(a.create(),!(d=a.modules.dataTree.children).index&&!1!==d.children&&this.getChildren(a).forEach(g=>{g.create(),o.push(g)}))}),o}getChildren(e,o){var a=e.modules.dataTree,c=[],d=[];return!1!==a.children&&(a.open||o)&&(Array.isArray(a.children)||(a.children=this.generateChildren(e)),c=this.table.modExists("filter")&&this.table.options.dataTreeFilter?this.table.modules.filter.filter(a.children):a.children,this.table.modExists("sort")&&this.table.options.dataTreeSort&&this.table.modules.sort.sort(c),c.forEach(p=>{d.push(p),this.getChildren(p).forEach(v=>{d.push(v)})})),d}generateChildren(e){var o=[],a=e.getData()[this.field];return Array.isArray(a)||(a=[a]),a.forEach(c=>{var d=new Zo(c||{},this.table.rowManager);d.create(),d.modules.dataTree.index=e.modules.dataTree.index+1,d.modules.dataTree.parent=e,d.modules.dataTree.children&&(d.modules.dataTree.open=this.startOpen(d.getComponent(),d.modules.dataTree.index)),o.push(d)}),o}expandRow(e,o){var a=e.modules.dataTree;!1!==a.children&&(a.open=!0,e.reinitialize(),this.refreshData(!0),this.dispatchExternal("dataTreeRowExpanded",e.getComponent(),e.modules.dataTree.index))}collapseRow(e){var o=e.modules.dataTree;!1!==o.children&&(o.open=!1,e.reinitialize(),this.refreshData(!0),this.dispatchExternal("dataTreeRowCollapsed",e.getComponent(),e.modules.dataTree.index))}toggleRow(e){var o=e.modules.dataTree;!1!==o.children&&(o.open?this.collapseRow(e):this.expandRow(e))}getTreeParent(e){return!!e.modules.dataTree.parent&&e.modules.dataTree.parent.getComponent()}getFilteredTreeChildren(e){var o=e.modules.dataTree,a=[];return o.children&&(Array.isArray(o.children)||(o.children=this.generateChildren(e)),(this.table.modExists("filter")&&this.table.options.dataTreeFilter?this.table.modules.filter.filter(o.children):o.children).forEach(d=>{d instanceof Zo&&a.push(d)})),a}rowDelete(e){var a,o=e.modules.dataTree.parent;o&&(!1!==(a=this.findChildIndex(e,o))&&o.data[this.field].splice(a,1),o.data[this.field].length||delete o.data[this.field],this.initializeRow(o),this.layoutRow(o)),this.refreshData(!0)}addTreeChildRow(e,o,a,c){var d=!1;"string"==typeof o&&(o=JSON.parse(o)),Array.isArray(e.data[this.field])||(e.data[this.field]=[],e.modules.dataTree.open=this.startOpen(e.getComponent(),e.modules.dataTree.index)),void 0!==c&&!1!==(d=this.findChildIndex(c,e))&&e.data[this.field].splice(a?d:d+1,0,o),!1===d&&(a?e.data[this.field].unshift(o):e.data[this.field].push(o)),this.initializeRow(e),this.layoutRow(e),this.refreshData(!0)}findChildIndex(e,o){var a=!1;return"object"==typeof e?e instanceof Zo?a=e.data:e instanceof RowComponent?a=e._getSelf().data:"undefined"!=typeof HTMLElement&&e instanceof HTMLElement&&o.modules.dataTree&&(a=o.modules.dataTree.children.find(c=>c instanceof Zo&&c.element===e))&&(a=a.data):a=null!=e&&o.data[this.field].find(c=>c.data[this.table.options.index]==e),a&&(Array.isArray(o.data[this.field])&&(a=o.data[this.field].indexOf(a)),-1==a&&(a=!1)),a}getTreeChildren(e,o,a){var c=e.modules.dataTree,d=[];return c.children&&(Array.isArray(c.children)||(c.children=this.generateChildren(e)),c.children.forEach(p=>{p instanceof Zo&&(d.push(o?p.getComponent():p),a&&(d=d.concat(this.getTreeChildren(p,o,a))))})),d}checkForRestyle(e){e.row.cells.indexOf(e)||this.layoutRow(e.row)}getChildField(){return this.field}redrawNeeded(e){return!!this.field&&void 0!==e[this.field]||!!this.elementField&&void 0!==e[this.elementField]}}return r.moduleName="dataTree",r})();var W5={csv:function(r,t,e){var o=t&&t.delimiter?t.delimiter:",",a=[],c=[];r.forEach(d=>{var p=[];switch(d.type){case"group":console.warn("Download Warning - CSV downloader cannot process row groups");break;case"calc":console.warn("Download Warning - CSV downloader cannot process column calculations");break;case"header":d.columns.forEach((g,v)=>{g&&1===g.depth&&(c[v]=null==g.value?"":'"'+String(g.value).split('"').join('""')+'"')});break;case"row":d.columns.forEach(g=>{if(g){switch(typeof g.value){case"object":g.value=JSON.stringify(g.value);break;case"undefined":case"null":g.value=""}p.push('"'+String(g.value).split('"').join('""')+'"')}}),a.push(p.join(o))}}),c.length&&a.unshift(c.join(o)),a=a.join("\n"),t.bom&&(a="\ufeff"+a),e(a,"text/csv")},json:function(r,t,e){var o=[];r.forEach(a=>{var c={};switch(a.type){case"header":break;case"group":console.warn("Download Warning - JSON downloader cannot process row groups");break;case"calc":console.warn("Download Warning - JSON downloader cannot process column calculations");break;case"row":a.columns.forEach(d=>{d&&(c[d.component.getField()]=d.value)}),o.push(c)}}),e(o=JSON.stringify(o,null,"\t"),"application/json")},pdf:function(r,t,e){var o=[],a=[],c={},d=t.rowGroupStyles||{fontStyle:"bold",fontSize:12,cellPadding:6,fillColor:220},p=t.rowCalcStyles||{fontStyle:"bold",fontSize:10,cellPadding:4,fillColor:232},g=t.jsPDF||{},v=t&&t.title?t.title:"";function E(x,L){var U=[];return x.columns.forEach(ee=>{var $;if(ee){switch(typeof ee.value){case"object":ee.value=JSON.stringify(ee.value);break;case"undefined":case"null":ee.value=""}$={content:ee.value,colSpan:ee.width,rowSpan:ee.height},L&&($.styles=L),U.push($)}else U.push("")}),U}g.orientation||(g.orientation=t.orientation||"landscape"),g.unit||(g.unit="pt"),r.forEach(x=>{switch(x.type){case"header":o.push(E(x));break;case"group":a.push(E(x,d));break;case"calc":a.push(E(x,p));break;case"row":a.push(E(x))}});var D=new jspdf.jsPDF(g);t&&t.autoTable&&(c="function"==typeof t.autoTable?t.autoTable(D)||{}:t.autoTable),v&&(c.didDrawPage=function(x){D.text(v,40,30)}),c.head=o,c.body=a,D.autoTable(c),t&&t.documentProcessing&&t.documentProcessing(D),e(D.output("arraybuffer"),"application/pdf")},xlsx:function(r,t,e){var a=t.sheetName||"Sheet1",c=XLSX.utils.book_new(),d=new Ma(this);function g(){var D=[],x=[],L={},U={s:{c:0,r:0},e:{c:r[0]?r[0].columns.reduce((ee,$)=>ee+($&&$.width?$.width:1),0):0,r:r.length}};return r.forEach((ee,$)=>{var ge=[];ee.columns.forEach(function(be,$e){be?(ge.push(be.value instanceof Date||"object"!=typeof be.value?be.value:JSON.stringify(be.value)),(be.width>1||be.height>-1)&&x.push({s:{r:$,c:$e},e:{r:$+be.height-1,c:$e+be.width-1}})):ge.push("")}),D.push(ge)}),XLSX.utils.sheet_add_aoa(L,D),L["!ref"]=XLSX.utils.encode_range(U),x.length&&(L["!merges"]=x),L}if(c.SheetNames=[],c.Sheets={},t.sheetOnly)e(g());else{if(t.sheets)for(var v in t.sheets)!0===t.sheets[v]?(c.SheetNames.push(v),c.Sheets[v]=g()):(c.SheetNames.push(v),d.commsSend(t.sheets[v],"download","intercept",{type:"xlsx",options:{sheetOnly:!0},active:this.active,intercept:function(D){c.Sheets[v]=D}}));else c.SheetNames.push(a),c.Sheets[a]=g();t.documentProcessing&&(c=t.documentProcessing(c)),e(function(D){for(var x=new ArrayBuffer(D.length),L=new Uint8Array(x),U=0;U!=D.length;++U)L[U]=255&D.charCodeAt(U);return x}(XLSX.write(c,{bookType:"xlsx",bookSST:!0,type:"binary"})),"application/octet-stream")}},html:function(r,t,e){this.modExists("export",!0)&&e(this.modules.export.genereateHTMLTable(r),"text/html")}};let z5=(()=>{class r extends Zi{constructor(e){super(e),this.registerTableOption("downloadReady",function(o,a){return a}),this.registerTableOption("downloadConfig",{}),this.registerTableOption("downloadRowRange","active"),this.registerColumnOption("download"),this.registerColumnOption("titleDownload")}initialize(){this.registerTableFunction("download",this.download.bind(this)),this.registerTableFunction("downloadToTab",this.downloadToTab.bind(this))}downloadToTab(e,o,a,c){this.download(e,o,a,c,!0)}download(e,o,a,c,d){var p=!1;if("function"==typeof e?p=e:r.downloaders[e]?p=r.downloaders[e]:console.warn("Download Error - No such download type found: ",e),p){var v=this.generateExportList(c);p.call(this.table,v,a||{},function(E,D){d?!0===d?this.triggerDownload(E,D,e,o,!0):d(E):this.triggerDownload(E,D,e,o)}.bind(this))}}generateExportList(e){var o=this.table.modules.export.generateExportList(this.table.options.downloadConfig,!1,e||this.table.options.downloadRowRange,"download"),a=this.table.options.groupHeaderDownload;return a&&!Array.isArray(a)&&(a=[a]),o.forEach(c=>{var d;"group"===c.type&&(d=c.columns[0],a&&a[c.indent]&&(d.value=a[c.indent](d.value,c.component._group.getRowCount(),c.component._group.getData(),c.component)))}),o}triggerDownload(e,o,a,c,d){var p=document.createElement("a"),g=new Blob([e],{type:o});c=c||"Tabulator."+("function"==typeof a?"txt":a),(g=this.table.options.downloadReady(e,g))&&(d?window.open(window.URL.createObjectURL(g)):navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(g,c):(p.setAttribute("href",window.URL.createObjectURL(g)),p.setAttribute("download",c),p.style.display="none",document.body.appendChild(p),p.click(),document.body.removeChild(p)),this.dispatchExternal("downloadComplete"))}commsReceived(e,o,a){"intercept"===o&&this.download(a.type,"",a.options,a.active,a.intercept)}}return r.moduleName="download",r.downloaders=W5,r})();function hv(r,t){var e=t.mask,o=void 0!==t.maskLetterChar?t.maskLetterChar:"A",a=void 0!==t.maskNumberChar?t.maskNumberChar:"9",c=void 0!==t.maskWildcardChar?t.maskWildcardChar:"*";function d(p){var g=e[p];void 0!==g&&g!==c&&g!==o&&g!==a&&(r.value=r.value+""+g,d(p+1))}r.addEventListener("keydown",p=>{var g=r.value.length,v=p.key;if(p.keyCode>46){if(g>=e.length)return p.preventDefault(),p.stopPropagation(),!1;switch(e[g]){case o:if(v.toUpperCase()==v.toLowerCase())return p.preventDefault(),p.stopPropagation(),!1;break;case a:if(isNaN(v))return p.preventDefault(),p.stopPropagation(),!1;break;case c:break;default:if(v!==e[g])return p.preventDefault(),p.stopPropagation(),!1}}}),r.addEventListener("keyup",p=>{p.keyCode>46&&t.maskAutoFill&&d(r.value.length)}),r.placeholder||(r.placeholder=e),t.maskAutoFill&&d(r.value.length)}var t4={input:function(r,t,e,o,a){var c=r.getValue(),d=document.createElement("input");if(d.setAttribute("type",a.search?"search":"text"),d.style.padding="4px",d.style.width="100%",d.style.boxSizing="border-box",a.elementAttributes&&"object"==typeof a.elementAttributes)for(let g in a.elementAttributes)"+"==g.charAt(0)?(g=g.slice(1),d.setAttribute(g,d.getAttribute(g)+a.elementAttributes["+"+g])):d.setAttribute(g,a.elementAttributes[g]);function p(g){null==c&&""!==d.value||d.value!==c?e(d.value)&&(c=d.value):o()}return d.value=void 0!==c?c:"",t(function(){d.focus({preventScroll:!0}),d.style.height="100%"}),d.addEventListener("change",p),d.addEventListener("blur",p),d.addEventListener("keydown",function(g){switch(g.keyCode){case 13:p();break;case 27:o();break;case 35:case 36:g.stopPropagation()}}),a.mask&&hv(d,a),d},textarea:function(r,t,e,o,a){var c=r.getValue(),d=a.verticalNavigation||"hybrid",p=String(null!=c?c:""),v=(p.match(/(?:\r\n|\r|\n)/g),document.createElement("textarea")),E=0;if(v.style.display="block",v.style.padding="2px",v.style.height="100%",v.style.width="100%",v.style.boxSizing="border-box",v.style.whiteSpace="pre-wrap",v.style.resize="none",a.elementAttributes&&"object"==typeof a.elementAttributes)for(let x in a.elementAttributes)"+"==x.charAt(0)?(x=x.slice(1),v.setAttribute(x,v.getAttribute(x)+a.elementAttributes["+"+x])):v.setAttribute(x,a.elementAttributes[x]);function D(x){null==c&&""!==v.value||v.value!==c?(e(v.value)&&(c=v.value),setTimeout(function(){r.getRow().normalizeHeight()},300)):o()}return v.value=p,t(function(){v.focus({preventScroll:!0}),v.style.height="100%",v.style.height=v.scrollHeight+"px",r.getRow().normalizeHeight()}),v.addEventListener("change",D),v.addEventListener("blur",D),v.addEventListener("keyup",function(){v.style.height="";var x=v.scrollHeight;v.style.height=x+"px",x!=E&&(E=x,r.getRow().normalizeHeight())}),v.addEventListener("keydown",function(x){switch(x.keyCode){case 27:o();break;case 38:("editor"==d||"hybrid"==d&&v.selectionStart)&&(x.stopImmediatePropagation(),x.stopPropagation());break;case 40:("editor"==d||"hybrid"==d&&v.selectionStart!==v.value.length)&&(x.stopImmediatePropagation(),x.stopPropagation());break;case 35:case 36:x.stopPropagation()}}),a.mask&&hv(v,a),v},number:function(r,t,e,o,a){var c=r.getValue(),d=a.verticalNavigation||"editor",p=document.createElement("input");if(p.setAttribute("type","number"),void 0!==a.max&&p.setAttribute("max",a.max),void 0!==a.min&&p.setAttribute("min",a.min),void 0!==a.step&&p.setAttribute("step",a.step),p.style.padding="4px",p.style.width="100%",p.style.boxSizing="border-box",a.elementAttributes&&"object"==typeof a.elementAttributes)for(let E in a.elementAttributes)"+"==E.charAt(0)?(E=E.slice(1),p.setAttribute(E,p.getAttribute(E)+a.elementAttributes["+"+E])):p.setAttribute(E,a.elementAttributes[E]);p.value=c;var g=function(E){v()};function v(){var E=p.value;!isNaN(E)&&""!==E&&(E=Number(E)),E!==c?e(E)&&(c=E):o()}return t(function(){p.removeEventListener("blur",g),p.focus({preventScroll:!0}),p.style.height="100%",p.addEventListener("blur",g)}),p.addEventListener("keydown",function(E){switch(E.keyCode){case 13:v();break;case 27:o();break;case 38:case 40:"editor"==d&&(E.stopImmediatePropagation(),E.stopPropagation());break;case 35:case 36:E.stopPropagation()}}),a.mask&&hv(p,a),p},range:function(r,t,e,o,a){var c=r.getValue(),d=document.createElement("input");if(d.setAttribute("type","range"),void 0!==a.max&&d.setAttribute("max",a.max),void 0!==a.min&&d.setAttribute("min",a.min),void 0!==a.step&&d.setAttribute("step",a.step),d.style.padding="4px",d.style.width="100%",d.style.boxSizing="border-box",a.elementAttributes&&"object"==typeof a.elementAttributes)for(let g in a.elementAttributes)"+"==g.charAt(0)?(g=g.slice(1),d.setAttribute(g,d.getAttribute(g)+a.elementAttributes["+"+g])):d.setAttribute(g,a.elementAttributes[g]);function p(){var g=d.value;!isNaN(g)&&""!==g&&(g=Number(g)),g!=c?e(g)&&(c=g):o()}return d.value=c,t(function(){d.focus({preventScroll:!0}),d.style.height="100%"}),d.addEventListener("blur",function(g){p()}),d.addEventListener("keydown",function(g){switch(g.keyCode){case 13:p();break;case 27:o()}}),d},select:function(r,t,e,o,a){var c=this,d=r.getElement(),p=r.getValue(),g=a.verticalNavigation||"editor",v=void 0!==p||null===p?Array.isArray(p)?p:[p]:void 0!==a.defaultValue?a.defaultValue:[],E=document.createElement("input"),D=document.createElement("div"),x=a.multiselect,L=[],U={},ee=[],$=[],ge=!0,be=!1,$e="",et=null;function Bt(Qe){var zi,Dt={},hn=c.table.getData();return(zi=Qe?c.table.columnManager.getColumnByField(Qe):r.getColumn()._getSelf())?hn.forEach(function(Vp){var Jr=zi.getFieldValue(Vp);null!=Jr&&""!==Jr&&(Dt[Jr]=!0)}):console.warn("unable to find matching column to create select lookup list:",Qe),Object.keys(Dt)}function Sn(Qe,Dt){!x&&U&&U.element&&U.element.classList.remove("active"),U&&U.element&&U.element.classList.remove("focused"),U=Qe,Qe.element&&(Qe.element.classList.add("focused"),Dt&&Qe.element.classList.add("active")),Qe&&Qe.element&&Qe.element.scrollIntoView&&Qe.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}function Hn(Qe){-1==$.indexOf(Qe)&&($.push(Qe),Sn(Qe,!0)),St()}function Cn(Qe){var Dt=$[Qe];Qe>-1&&($.splice(Qe,1),Dt.element&&Dt.element.classList.remove("active"))}function Ei(Qe){Qe||(Qe=U);var Dt=$.indexOf(Qe);Dt>-1?Cn(Dt):(!0!==x&&$.length>=x&&Cn(0),Hn(Qe)),St()}function ao(Qe){yt(),Qe||(Qe=U),Qe&&(E.value=Qe.label,e(Qe.value)),v=[Qe.value]}function Or(Qe){Qe||yt();var Dt=[];$.forEach(hn=>{Dt.push(hn.value)}),v=Dt,e(Dt)}function St(){var Qe=[];$.forEach(Dt=>{Qe.push(Dt.label)}),E.value=Qe.join(", "),!1===c.currentCell&&Or(!0)}function ot(){yt(),o()}function yt(){D.parentNode&&D.parentNode.removeChild(D),c.table.rowManager.element.removeEventListener("scroll",ot)}if((Array.isArray(a)||!Array.isArray(a)&&"object"==typeof a&&!a.values)&&(console.warn("DEPRECATION WARNING - values for the select editor must now be passed into the values property of the editorParams object, not as the editorParams object"),a={values:a}),E.setAttribute("type","text"),E.style.padding="4px",E.style.width="100%",E.style.boxSizing="border-box",E.style.cursor="default",E.readOnly=0!=this.currentCell,a.elementAttributes&&"object"==typeof a.elementAttributes)for(let Qe in a.elementAttributes)"+"==Qe.charAt(0)?(Qe=Qe.slice(1),E.setAttribute(Qe,E.getAttribute(Qe)+a.elementAttributes["+"+Qe])):E.setAttribute(Qe,a.elementAttributes[Qe]);return E.value=void 0!==p||null===p?p:"",E.addEventListener("search",function(Qe){E.value||(function(){var Qe=$.length;for(let Dt=0;Dt<Qe;Dt++)Cn(0)}(),Or())}),E.addEventListener("keydown",function(Qe){var Dt;switch(Qe.keyCode){case 38:Dt=L.indexOf(U),("editor"==g||"hybrid"==g&&Dt)&&(Qe.stopImmediatePropagation(),Qe.stopPropagation(),Qe.preventDefault(),Dt>0&&Sn(L[Dt-1],!x));break;case 40:Dt=L.indexOf(U),("editor"==g||"hybrid"==g&&Dt<L.length-1)&&(Qe.stopImmediatePropagation(),Qe.stopPropagation(),Qe.preventDefault(),Dt<L.length-1&&Sn(-1==Dt?L[0]:L[Dt+1],!x));break;case 37:case 39:Qe.stopImmediatePropagation(),Qe.stopPropagation(),Qe.preventDefault();break;case 13:x?Ei():ao();break;case 27:ot();break;case 9:break;default:!1===c.currentCell&&Qe.preventDefault(),Qe.keyCode>=38&&Qe.keyCode<=90&&function(Qe){clearTimeout(et);var Dt=String.fromCharCode(event.keyCode).toLowerCase();$e+=Dt.toLowerCase();var hn=L.find(zi=>void 0!==zi.label&&zi.label.toLowerCase().startsWith($e));hn&&Sn(hn,!x),et=setTimeout(()=>{$e=""},800)}()}}),E.addEventListener("blur",function(Qe){ge&&(x?Or():ot())}),E.addEventListener("focus",function(Qe){be||function(){if($=[],!D.parentNode){!function(Qe,Dt){var hn=[],zi=[];function Vp(pn){return Dt.indexOf((pn={label:pn.label,value:pn.value,itemParams:pn.itemParams,elementAttributes:pn.elementAttributes,element:!1}).value)>-1&&Hn(pn),hn.push(pn),zi.push(pn),pn}if("function"==typeof Qe&&(Qe=Qe(r)),Array.isArray(Qe))Qe.forEach(function(pn){var Er;"object"==typeof pn?pn.options?(zi.push(Er={label:pn.label,group:!0,itemParams:pn.itemParams,elementAttributes:pn.elementAttributes,element:!1}),pn.options.forEach(function(Qg){Vp(Qg)})):Vp(pn):(Dt.indexOf((Er={label:pn,value:pn,element:!1}).value)>-1&&Hn(Er),hn.push(Er),zi.push(Er))});else for(var Jr in Qe){var pl={label:Qe[Jr],value:Jr,element:!1};Dt.indexOf(pl.value)>-1&&Hn(pl),hn.push(pl),zi.push(pl)}a.sortValuesList&&(hn.sort((pn,Er)=>pn.label<Er.label?-1:pn.label>Er.label?1:0),zi.sort((pn,Er)=>pn.label<Er.label?-1:pn.label>Er.label?1:0),"asc"!==a.sortValuesList&&(hn.reverse(),zi.reverse())),L=hn,ee=zi,function(){for(;D.firstChild;)D.removeChild(D.firstChild);ee.forEach(function(Qe){var Dt=Qe.element;if(!Dt){if(Dt=document.createElement("div"),Qe.label=a.listItemFormatter?a.listItemFormatter(Qe.value,Qe.label,r,Dt,Qe.itemParams):Qe.label,Qe.group?(Dt.classList.add("tabulator-edit-select-list-group"),Dt.tabIndex=0,Dt.innerHTML=""===Qe.label?"&nbsp;":Qe.label):(Dt.classList.add("tabulator-edit-select-list-item"),Dt.tabIndex=0,Dt.innerHTML=""===Qe.label?"&nbsp;":Qe.label,Dt.addEventListener("click",function(){be=!0,setTimeout(()=>{be=!1},10),x?(Ei(Qe),E.focus()):ao(Qe)}),$.indexOf(Qe)>-1&&Dt.classList.add("active")),Qe.elementAttributes&&"object"==typeof Qe.elementAttributes)for(let hn in Qe.elementAttributes)"+"==hn.charAt(0)?(hn=hn.slice(1),Dt.setAttribute(hn,E.getAttribute(hn)+Qe.elementAttributes["+"+hn])):Dt.setAttribute(hn,Qe.elementAttributes[hn]);Dt.addEventListener("mousedown",function(){ge=!1,setTimeout(function(){ge=!0},10)}),Qe.element=Dt}D.appendChild(Dt)})}()}(!0===a.values?Bt():"string"==typeof a.values?Bt(a.values):a.values||[],v);var Qe=Jn.elOffset(d);D.style.minWidth=d.offsetWidth+"px",D.style.top=Qe.top+d.offsetHeight+"px",D.style.left=Qe.left+"px",D.addEventListener("mousedown",function(Dt){ge=!1,setTimeout(function(){ge=!0},10)}),document.body.appendChild(D)}}()}),(D=document.createElement("div")).classList.add("tabulator-edit-select-list"),t(function(){E.style.height="100%",E.focus({preventScroll:!0})}),setTimeout(()=>{this.table.rowManager.element.addEventListener("scroll",ot)},10),E},autocomplete:function(r,t,e,o,a){var c=this,d=r.getElement(),p=r.getValue(),g=a.verticalNavigation||"editor",v=void 0!==p||null===p?p:void 0!==a.defaultValue?a.defaultValue:"",E=document.createElement("input"),D=document.createElement("div"),x=[],L=!1,U=!0,ee=!1;if(E.setAttribute("type","search"),E.style.padding="4px",E.style.width="100%",E.style.boxSizing="border-box",a.elementAttributes&&"object"==typeof a.elementAttributes)for(let St in a.elementAttributes)"+"==St.charAt(0)?(St=St.slice(1),E.setAttribute(St,E.getAttribute(St)+a.elementAttributes["+"+St])):E.setAttribute(St,a.elementAttributes[St]);function $(){!0===a.values?ee=ge():"string"==typeof a.values&&(ee=ge(a.values))}function ge(St){var vt,si={},ot=c.table.getData();return(vt=St?c.table.columnManager.getColumnByField(St):r.getColumn()._getSelf())?(ot.forEach(function(yt){var Gt=vt.getFieldValue(yt);null!=Gt&&""!==Gt&&(si[Gt]=!0)}),si=a.sortValuesList?"asc"==a.sortValuesList?Object.keys(si).sort():Object.keys(si).sort().reverse():Object.keys(si)):console.warn("unable to find matching column to create autocomplete lookup list:",St),si}function be(St,si){var vt,yt,ot=[];vt=ee||a.values||[],a.searchFunc?(ot=a.searchFunc(St,vt))instanceof Promise?($e(void 0!==a.searchingPlaceholder?a.searchingPlaceholder:"Searching..."),ot.then(Gt=>{Mi(et(Gt),si)}).catch(Gt=>{console.err("error in autocomplete search promise:",Gt)})):Mi(et(ot),si):(yt=et(vt),""===St?a.showListOnEmpty&&(ot=yt):yt.forEach(function(Gt){(null!==Gt.value||void 0!==Gt.value)&&(String(Gt.value).toLowerCase().indexOf(String(St).toLowerCase())>-1||String(Gt.title).toLowerCase().indexOf(String(St).toLowerCase())>-1)&&ot.push(Gt)}),Mi(ot,si))}function $e(St){var si=document.createElement("div");Bt(),!1!==St&&(si.classList.add("tabulator-edit-select-list-notice"),si.tabIndex=0,St instanceof Node?si.appendChild(St):si.innerHTML=St,D.appendChild(si))}function et(St){var si=[];if(Array.isArray(St))St.forEach(function(yt){var Gt={};"object"==typeof yt?(Gt.title=a.listItemFormatter?a.listItemFormatter(yt.value,yt.label):yt.label,Gt.value=yt.value):(Gt.title=a.listItemFormatter?a.listItemFormatter(yt,yt):yt,Gt.value=yt),si.push(Gt)});else for(var ot in St){var vt={title:a.listItemFormatter?a.listItemFormatter(ot,St[ot]):St[ot],value:ot};si.push(vt)}return si}function Bt(){for(;D.firstChild;)D.removeChild(D.firstChild)}function Mi(St,si){St.length?function(St,si){var ot=!1;Bt(),(x=St).forEach(function(vt){var yt=vt.element;yt||((yt=document.createElement("div")).classList.add("tabulator-edit-select-list-item"),yt.tabIndex=0,yt.innerHTML=vt.title,yt.addEventListener("click",function(Gt){Cn(vt),Sn()}),yt.addEventListener("mousedown",function(Gt){U=!1,setTimeout(function(){U=!0},10)}),vt.element=yt,si&&vt.value==p&&(E.value=vt.title,vt.element.classList.add("active"),ot=!0),vt===L&&(vt.element.classList.add("active"),ot=!0)),D.appendChild(yt)}),ot||Cn(!1)}(St,si):a.emptyPlaceholder&&$e(a.emptyPlaceholder)}function Sn(){Ei(),L?p!==L.value?(p=L.value,E.value=L.title,e(L.value)):o():a.freetext||a.allowEmpty&&""===E.value?(p=E.value,e(E.value)):o()}function Cn(St,si){L&&L.element&&L.element.classList.remove("active"),L=St,St&&St.element&&St.element.classList.add("active"),St&&St.element&&St.element.scrollIntoView&&St.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}function Ei(){D.parentNode&&D.parentNode.removeChild(D),c.table.rowManager.element.removeEventListener("scroll",ao)}function ao(){Ei(),o()}return D.classList.add("tabulator-edit-select-list"),D.addEventListener("mousedown",function(St){U=!1,setTimeout(function(){U=!0},10)}),E.addEventListener("keydown",function(St){var si;switch(St.keyCode){case 38:si=x.indexOf(L),("editor"==g||"hybrid"==g&&si)&&(St.stopImmediatePropagation(),St.stopPropagation(),St.preventDefault(),Cn(si>0&&x[si-1]));break;case 40:si=x.indexOf(L),("editor"==g||"hybrid"==g&&si<x.length-1)&&(St.stopImmediatePropagation(),St.stopPropagation(),St.preventDefault(),si<x.length-1&&Cn(-1==si?x[0]:x[si+1]));break;case 37:case 39:St.stopImmediatePropagation(),St.stopPropagation();break;case 13:Sn();break;case 27:ao();break;case 36:case 35:St.stopImmediatePropagation()}}),E.addEventListener("keyup",function(St){switch(St.keyCode){case 38:case 37:case 39:case 40:case 13:case 27:break;default:be(E.value)}}),E.addEventListener("search",function(St){be(E.value)}),E.addEventListener("blur",function(St){U&&Sn()}),E.addEventListener("focus",function(St){var si=v;$(),function(){if(!D.parentNode){for(;D.firstChild;)D.removeChild(D.firstChild);var St=Jn.elOffset(d);D.style.minWidth=d.offsetWidth+"px",D.style.top=St.top+d.offsetHeight+"px",D.style.left=St.left+"px",document.body.appendChild(D)}}(),E.value=si,be(si,!0)}),t(function(){E.style.height="100%",E.focus({preventScroll:!0})}),a.mask&&hv(E,a),setTimeout(()=>{this.table.rowManager.element.addEventListener("scroll",ao)},10),$(),E.value=v,be(v,!0),E},star:function(r,t,e,o,a){var c=this,d=r.getElement(),p=r.getValue(),g=d.getElementsByTagName("svg").length||5,v=d.getElementsByTagName("svg")[0]?d.getElementsByTagName("svg")[0].getAttribute("width"):14,E=[],D=document.createElement("div"),x=document.createElementNS("http://www.w3.org/2000/svg","svg");function L(ge){E.forEach(function(be,$e){$e<ge?("ie"==c.table.browser?be.setAttribute("class","tabulator-star-active"):be.classList.replace("tabulator-star-inactive","tabulator-star-active"),be.innerHTML='<polygon fill="#488CE9" stroke="#014AAE" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>'):("ie"==c.table.browser?be.setAttribute("class","tabulator-star-inactive"):be.classList.replace("tabulator-star-active","tabulator-star-inactive"),be.innerHTML='<polygon fill="#010155" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>')})}function U(ge){var be=document.createElement("span"),$e=x.cloneNode(!0);E.push($e),be.addEventListener("mouseenter",function(et){et.stopPropagation(),et.stopImmediatePropagation(),L(ge)}),be.addEventListener("mousemove",function(et){et.stopPropagation(),et.stopImmediatePropagation()}),be.addEventListener("click",function(et){et.stopPropagation(),et.stopImmediatePropagation(),e(ge),d.blur()}),be.appendChild($e),D.appendChild(be)}function ee(ge){p=ge,L(ge)}if(d.style.whiteSpace="nowrap",d.style.overflow="hidden",d.style.textOverflow="ellipsis",D.style.verticalAlign="middle",D.style.display="inline-block",D.style.padding="4px",x.setAttribute("width",v),x.setAttribute("height",v),x.setAttribute("viewBox","0 0 512 512"),x.setAttribute("xml:space","preserve"),x.style.padding="0 1px",a.elementAttributes&&"object"==typeof a.elementAttributes)for(let ge in a.elementAttributes)"+"==ge.charAt(0)?(ge=ge.slice(1),D.setAttribute(ge,D.getAttribute(ge)+a.elementAttributes["+"+ge])):D.setAttribute(ge,a.elementAttributes[ge]);for(var $=1;$<=g;$++)U($);return L(p=Math.min(parseInt(p),g)),D.addEventListener("mousemove",function(ge){L(0)}),D.addEventListener("click",function(ge){e(0)}),d.addEventListener("blur",function(ge){o()}),d.addEventListener("keydown",function(ge){switch(ge.keyCode){case 39:ee(p+1);break;case 37:ee(p-1);break;case 13:e(p);break;case 27:o()}}),D},progress:function(r,t,e,o,a){var ee,$,x,L,c=r.getElement(),d=void 0===a.max?(null==(ee=c.getElementsByTagName("div")[0])?void 0:ee.getAttribute("max"))||100:a.max,p=void 0===a.min?(null==($=c.getElementsByTagName("div")[0])?void 0:$.getAttribute("min"))||0:a.min,g=(d-p)/100,v=r.getValue()||0,E=document.createElement("div"),D=document.createElement("div");function U(){var ge=window.getComputedStyle(c,null),be=g*Math.round(D.offsetWidth/((c.clientWidth-parseInt(ge.getPropertyValue("padding-left"))-parseInt(ge.getPropertyValue("padding-right")))/100))+p;e(be),c.setAttribute("aria-valuenow",be),c.setAttribute("aria-label",v)}if(E.style.position="absolute",E.style.right="0",E.style.top="0",E.style.bottom="0",E.style.width="5px",E.classList.add("tabulator-progress-handle"),D.style.display="inline-block",D.style.position="relative",D.style.height="100%",D.style.backgroundColor="#488CE9",D.style.maxWidth="100%",D.style.minWidth="0%",a.elementAttributes&&"object"==typeof a.elementAttributes)for(let ge in a.elementAttributes)"+"==ge.charAt(0)?(ge=ge.slice(1),D.setAttribute(ge,D.getAttribute(ge)+a.elementAttributes["+"+ge])):D.setAttribute(ge,a.elementAttributes[ge]);return c.style.padding="4px 4px",v=Math.min(parseFloat(v),d),v=Math.max(parseFloat(v),p),v=Math.round((v-p)/g),D.style.width=v+"%",c.setAttribute("aria-valuemin",p),c.setAttribute("aria-valuemax",d),D.appendChild(E),E.addEventListener("mousedown",function(ge){x=ge.screenX,L=D.offsetWidth}),E.addEventListener("mouseover",function(){E.style.cursor="ew-resize"}),c.addEventListener("mousemove",function(ge){x&&(D.style.width=L+ge.screenX-x+"px")}),c.addEventListener("mouseup",function(ge){x&&(ge.stopPropagation(),ge.stopImmediatePropagation(),x=!1,L=!1,U())}),c.addEventListener("keydown",function(ge){switch(ge.keyCode){case 39:ge.preventDefault(),D.style.width=D.clientWidth+c.clientWidth/100+"px";break;case 37:ge.preventDefault(),D.style.width=D.clientWidth-c.clientWidth/100+"px";break;case 9:case 13:U();break;case 27:o()}}),c.addEventListener("blur",function(){o()}),D},tickCross:function(r,t,e,o,a){var c=r.getValue(),d=document.createElement("input"),p=a.tristate,g=void 0===a.indeterminateValue?null:a.indeterminateValue,v=!1;if(d.setAttribute("type","checkbox"),d.style.marginTop="5px",d.style.boxSizing="border-box",a.elementAttributes&&"object"==typeof a.elementAttributes)for(let D in a.elementAttributes)"+"==D.charAt(0)?(D=D.slice(1),d.setAttribute(D,d.getAttribute(D)+a.elementAttributes["+"+D])):d.setAttribute(D,a.elementAttributes[D]);function E(D){return p?D?v?g:d.checked:d.checked&&!v?(d.checked=!1,d.indeterminate=!0,v=!0,g):(v=!1,d.checked):d.checked}return d.value=c,p&&(void 0===c||c===g||""===c)&&(v=!0,d.indeterminate=!0),"firefox"!=this.table.browser&&t(function(){d.focus({preventScroll:!0})}),d.checked=!0===c||"true"===c||"True"===c||1===c,t(function(){d.focus()}),d.addEventListener("change",function(D){e(E())}),d.addEventListener("blur",function(D){e(E(!0))}),d.addEventListener("keydown",function(D){13==D.keyCode&&e(E()),27==D.keyCode&&o()}),d}};let n4=(()=>{class r extends Zi{constructor(e){super(e),this.currentCell=!1,this.mouseClick=!1,this.recursionBlock=!1,this.invalidEdit=!1,this.editedCells=[],this.editors=r.editors,this.registerColumnOption("editable"),this.registerColumnOption("editor"),this.registerColumnOption("editorParams"),this.registerColumnOption("cellEditing"),this.registerColumnOption("cellEdited"),this.registerColumnOption("cellEditCancelled"),this.registerTableFunction("getEditedCells",this.getEditedCells.bind(this)),this.registerTableFunction("clearCellEdited",this.clearCellEdited.bind(this)),this.registerTableFunction("navigatePrev",this.navigatePrev.bind(this)),this.registerTableFunction("navigateNext",this.navigateNext.bind(this)),this.registerTableFunction("navigateLeft",this.navigateLeft.bind(this)),this.registerTableFunction("navigateRight",this.navigateRight.bind(this)),this.registerTableFunction("navigateUp",this.navigateUp.bind(this)),this.registerTableFunction("navigateDown",this.navigateDown.bind(this)),this.registerComponentFunction("cell","isEdited",this.cellisEdited.bind(this)),this.registerComponentFunction("cell","clearEdited",this.clearEdited.bind(this)),this.registerComponentFunction("cell","edit",this.editCell.bind(this)),this.registerComponentFunction("cell","cancelEdit",this.cellCancelEdit.bind(this)),this.registerComponentFunction("cell","navigatePrev",this.navigatePrev.bind(this)),this.registerComponentFunction("cell","navigateNext",this.navigateNext.bind(this)),this.registerComponentFunction("cell","navigateLeft",this.navigateLeft.bind(this)),this.registerComponentFunction("cell","navigateRight",this.navigateRight.bind(this)),this.registerComponentFunction("cell","navigateUp",this.navigateUp.bind(this)),this.registerComponentFunction("cell","navigateDown",this.navigateDown.bind(this))}initialize(){this.subscribe("cell-init",this.bindEditor.bind(this)),this.subscribe("cell-delete",this.clearEdited.bind(this)),this.subscribe("column-layout",this.initializeColumnCheck.bind(this)),this.subscribe("column-delete",this.columnDeleteCheck.bind(this)),this.subscribe("row-deleting",this.rowDeleteCheck.bind(this)),this.subscribe("data-refeshing",this.cancelEdit.bind(this)),this.subscribe("keybinding-nav-prev",this.navigatePrev.bind(this)),this.subscribe("keybinding-nav-next",this.keybindingNavigateNext.bind(this)),this.subscribe("keybinding-nav-left",this.navigateLeft.bind(this)),this.subscribe("keybinding-nav-right",this.navigateRight.bind(this)),this.subscribe("keybinding-nav-up",this.navigateUp.bind(this)),this.subscribe("keybinding-nav-down",this.navigateDown.bind(this))}keybindingNavigateNext(e){var o=this.currentCell,a=this.options("tabEndNewRow");o&&(this.navigateNext(e)||a&&(o.getElement().firstChild.blur(),(a=this.table.addRow(!0===a?{}:"function"==typeof a?a(o.row.getComponent()):Object.assign({},a))).then(()=>{setTimeout(()=>{nav.next()})})))}cellisEdited(e){return!!e.modules.edit&&e.modules.edit.edited}cellCancelEdit(e){e===this.currentCell?this.table.modules.edit.cancelEdit():console.warn("Cancel Editor Error - This cell is not currently being edited ")}clearCellEdited(e){e||(e=this.modules.edit.getEditedCells()),Array.isArray(e)||(e=[e]),e.forEach(o=>{this.modules.edit.clearEdited(o._getSelf())})}navigatePrev(e){var a,c,o=this.currentCell;if(o){if(e&&e.preventDefault(),a=this.navigateLeft())return!0;if((c=this.table.rowManager.prevDisplayRow(o.row,!0))&&(a=this.findNextEditableCell(c,c.cells.length)))return a.getComponent().edit(),!0}return!1}navigateNext(e){var a,c,o=this.currentCell;if(o){if(e&&e.preventDefault(),a=this.navigateRight())return!0;if((c=this.table.rowManager.nextDisplayRow(o.row,!0))&&(a=this.findNextEditableCell(c,-1)))return a.getComponent().edit(),!0}return!1}navigateLeft(e){var a,c,o=this.currentCell;return!(!o||(e&&e.preventDefault(),a=o.getIndex(),c=this.findPrevEditableCell(o.row,a),!c)||(c.getComponent().edit(),0))}navigateRight(e){var a,c,o=this.currentCell;return!(!o||(e&&e.preventDefault(),a=o.getIndex(),c=this.findNextEditableCell(o.row,a),!c)||(c.getComponent().edit(),0))}navigateUp(e){var a,c,o=this.currentCell;return!(!o||(e&&e.preventDefault(),a=o.getIndex(),c=this.table.rowManager.prevDisplayRow(o.row,!0),!c)||(c.cells[a].getComponent().edit(),0))}navigateDown(e){var a,c,o=this.currentCell;return!(!o||(e&&e.preventDefault(),a=o.getIndex(),c=this.table.rowManager.nextDisplayRow(o.row,!0),!c)||(c.cells[a].getComponent().edit(),0))}findNextEditableCell(e,o){var a=!1;if(o<e.cells.length-1)for(var c=o+1;c<e.cells.length;c++){let d=e.cells[c];if(d.column.modules.edit&&Jn.elVisible(d.getElement())){let p=!0;if("function"==typeof d.column.modules.edit.check&&(p=d.column.modules.edit.check(d.getComponent())),p){a=d;break}}}return a}findPrevEditableCell(e,o){var a=!1;if(o>0)for(var c=o-1;c>=0;c--){let d=e.cells[c],p=!0;if(d.column.modules.edit&&Jn.elVisible(d.getElement())&&("function"==typeof d.column.modules.edit.check&&(p=d.column.modules.edit.check(d.getComponent())),p)){a=d;break}}return a}initializeColumnCheck(e){void 0!==e.definition.editor&&this.initializeColumn(e)}columnDeleteCheck(e){this.currentCell&&this.currentCell.column===e&&this.cancelEdit()}rowDeleteCheck(e){this.currentCell&&this.currentCell.row===e&&this.cancelEdit()}initializeColumn(e){var o={editor:!1,blocked:!1,check:e.definition.editable,params:e.definition.editorParams||{}};switch(typeof e.definition.editor){case"string":this.editors[e.definition.editor]?o.editor=this.editors[e.definition.editor]:console.warn("Editor Error - No such editor found: ",e.definition.editor);break;case"function":o.editor=e.definition.editor;break;case"boolean":!0===e.definition.editor&&("function"!=typeof e.definition.formatter?o.editor=this.editors[e.definition.formatter]?this.editors[e.definition.formatter]:this.editors.input:console.warn("Editor Error - Cannot auto lookup editor for a custom formatter: ",e.definition.formatter))}o.editor&&(e.modules.edit=o)}getCurrentCell(){return!!this.currentCell&&this.currentCell.getComponent()}clearEditor(e){var a,o=this.currentCell;if(this.invalidEdit=!1,o){for(this.currentCell=!1,a=o.getElement(),e?o.validate&&o.validate():a.classList.remove("tabulator-validation-fail"),a.classList.remove("tabulator-editing");a.firstChild;)a.removeChild(a.firstChild);o.row.getElement().classList.remove("tabulator-row-editing")}}cancelEdit(){if(this.currentCell){var e=this.currentCell,o=this.currentCell.getComponent();this.clearEditor(!0),e.setValueActual(e.getValue()),e.cellRendered(),("textarea"==e.column.definition.editor||e.column.definition.variableHeight)&&e.row.normalizeHeight(!0),e.column.definition.cellEditCancelled&&e.column.definition.cellEditCancelled.call(this.table,o),this.dispatchExternal("cellEditCancelled",o)}}bindEditor(e){if(e.column.modules.edit){var o=this,a=e.getElement(!0);a.setAttribute("tabindex",0),a.addEventListener("click",function(c){a.classList.contains("tabulator-editing")||a.focus({preventScroll:!0})}),a.addEventListener("mousedown",function(c){2===c.button?c.preventDefault():o.mouseClick=!0}),a.addEventListener("focus",function(c){o.recursionBlock||o.edit(e,c,!1)})}}focusCellNoEvent(e,o){this.recursionBlock=!0,o&&"ie"===this.table.browser||e.getElement().focus({preventScroll:!0}),this.recursionBlock=!1}editCell(e,o){this.focusCellNoEvent(e),this.edit(e,!1,o)}focusScrollAdjust(e){if("virtual"==this.table.rowManager.getRenderMode()){var o=this.table.rowManager.element.scrollTop,a=this.table.rowManager.element.clientHeight+this.table.rowManager.element.scrollTop,c=e.row.getElement();c.offsetTop<o?this.table.rowManager.element.scrollTop-=o-c.offsetTop:c.offsetTop+c.offsetHeight>a&&(this.table.rowManager.element.scrollTop+=c.offsetTop+c.offsetHeight-a);var p=this.table.rowManager.element.scrollLeft,g=this.table.rowManager.element.clientWidth+this.table.rowManager.element.scrollLeft,v=e.getElement();this.table.modExists("frozenColumns")&&(p+=parseInt(this.table.modules.frozenColumns.leftMargin),g-=parseInt(this.table.modules.frozenColumns.rightMargin)),"virtual"===this.table.options.renderHorizontal&&(p-=parseInt(this.table.columnManager.renderer.vDomPadLeft),g-=parseInt(this.table.columnManager.renderer.vDomPadLeft)),v.offsetLeft<p?this.table.rowManager.element.scrollLeft-=p-v.offsetLeft:v.offsetLeft+v.offsetWidth>g&&(this.table.rowManager.element.scrollLeft+=v.offsetLeft+v.offsetWidth-g)}}edit(e,o,a){var v,E,D,c=this,d=!0,p=function(){},g=e.getElement();if(!this.currentCell){if(e.column.modules.edit.blocked)return this.mouseClick=!1,g.blur(),!1;switch(o&&o.stopPropagation(),typeof e.column.modules.edit.check){case"function":d=e.column.modules.edit.check(e.getComponent());break;case"boolean":d=e.column.modules.edit.check}if(d||a){if(c.cancelEdit(),c.currentCell=e,this.focusScrollAdjust(e),E=e.getComponent(),this.mouseClick&&(this.mouseClick=!1,e.column.definition.cellClick&&e.column.definition.cellClick.call(this.table,o,E)),e.column.definition.cellEditing&&e.column.definition.cellEditing.call(this.table,E),this.dispatchExternal("cellEditing",E),D="function"==typeof e.column.modules.edit.params?e.column.modules.edit.params(E):e.column.modules.edit.params,!1===(v=e.column.modules.edit.editor.call(c,E,function(ge){p=ge},function(ge){if(c.currentCell===e){var be=!0;return e.column.modules.validate&&c.table.modExists("validate")&&"manual"!=c.table.options.validationMode&&(be=c.table.modules.validate.validate(e.column.modules.validate,e,ge)),!0===be||"highlight"===c.table.options.validationMode?(c.clearEditor(),e.modules.edit||(e.modules.edit={}),e.modules.edit.edited=!0,-1==c.editedCells.indexOf(e)&&c.editedCells.push(e),e.setValue(ge,!0),c.table.options.dataTree&&c.table.modExists("dataTree")&&c.table.modules.dataTree.checkForRestyle(e),!0===be||(g.classList.add("tabulator-validation-fail"),c.table.externalEvents.dispatch("validationFailed",e.getComponent(),ge,be),!1)):(c.invalidEdit=!0,g.classList.add("tabulator-validation-fail"),c.focusCellNoEvent(e,!0),p(),c.table.externalEvents.dispatch("validationFailed",e.getComponent(),ge,be),!1)}},function(){c.currentCell===e&&(c.cancelEdit(),c.table.options.dataTree&&c.table.modExists("dataTree")&&c.table.modules.dataTree.checkForRestyle(e))},D)))return g.blur(),!1;if(!(v instanceof Node))return console.warn("Edit Error - Editor should return an instance of Node, the editor returned:",v),g.blur(),!1;for(g.classList.add("tabulator-editing"),e.row.getElement().classList.add("tabulator-row-editing");g.firstChild;)g.removeChild(g.firstChild);g.appendChild(v),p();for(var ee=g.children,$=0;$<ee.length;$++)ee[$].addEventListener("click",function(ge){ge.stopPropagation()});return!0}return this.mouseClick=!1,g.blur(),!1}this.invalidEdit||this.cancelEdit()}getEditedCells(){var e=[];return this.editedCells.forEach(o=>{e.push(o.getComponent())}),e}clearEdited(e){var o;e.modules.edit&&e.modules.edit.edited&&(e.modules.edit.edited=!1,e.modules.validate&&(e.modules.validate.invalid=!1)),(o=this.editedCells.indexOf(e))>-1&&this.editedCells.splice(o,1)}}return r.moduleName="edit",r.editors=t4,r})();class SO{constructor(t,e,o,a){this.type=t,this.columns=e,this.component=o||!1,this.indent=a||0}}class _T{constructor(t,e,o,a,c){this.value=t,this.component=e||!1,this.width=o,this.height=a,this.depth=c}}let r4=(()=>{class r extends Zi{constructor(e){super(e),this.config={},this.cloneTableStyle=!0,this.colVisProp="",this.registerTableOption("htmlOutputConfig",!1),this.registerColumnOption("htmlOutput"),this.registerColumnOption("titleHtmlOutput")}initialize(){this.registerTableFunction("getHtml",this.getHtml.bind(this))}generateExportList(e,o,a,c){this.cloneTableStyle=o,this.config=e||{},this.colVisProp=c;var d=!1!==this.config.columnHeaders?this.headersToExportRows(this.generateColumnGroupHeaders()):[],p=this.bodyToExportRows(this.rowLookup(a));return d.concat(p)}genereateTable(e,o,a,c){var d=this.generateExportList(e,o,a,c);return this.genereateTableElement(d)}rowLookup(e){var o=[];if("function"==typeof e)e.call(this.table).forEach(a=>{(a=this.table.rowManager.findRow(a))&&o.push(a)});else switch(e){case!0:case"visible":o=this.table.rowManager.getVisibleRows(!0);break;case"all":o=this.table.rowManager.rows;break;case"selected":o=this.table.modules.selectRow.selectedRows;break;default:o=this.table.options.pagination?this.table.rowManager.getDisplayRows(this.table.rowManager.displayRows.length-2):this.table.rowManager.getDisplayRows()}return Object.assign([],o)}generateColumnGroupHeaders(){var e=[];return(!1!==this.config.columnGroups?this.table.columnManager.columns:this.table.columnManager.columnsByIndex).forEach(a=>{var c=this.processColumnGroup(a);c&&e.push(c)}),e}processColumnGroup(e){var o=e.columns,a=0,d={title:e.definition["title"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))]||e.definition.title,column:e,depth:1};if(o.length){if(d.subGroups=[],d.width=0,o.forEach(p=>{var g=this.processColumnGroup(p);g&&(d.width+=g.width,d.subGroups.push(g),g.depth>a&&(a=g.depth))}),d.depth+=a,!d.width)return!1}else{if(!this.columnVisCheck(e))return!1;d.width=1}return d}columnVisCheck(e){return!1!==e.definition[this.colVisProp]&&(e.visible||!e.visible&&e.definition[this.colVisProp])}headersToExportRows(e){var o=[],a=0,c=[];function d(p,g){var v=a-g;if(void 0===o[g]&&(o[g]=[]),p.height=p.subGroups?1:v-p.depth+1,o[g].push(p),p.height>1)for(let E=1;E<p.height;E++)void 0===o[g+E]&&(o[g+E]=[]),o[g+E].push(!1);if(p.width>1)for(let E=1;E<p.width;E++)o[g].push(!1);p.subGroups&&p.subGroups.forEach(function(E){d(E,g+1)})}return e.forEach(function(p){p.depth>a&&(a=p.depth)}),e.forEach(function(p){d(p,0)}),o.forEach(p=>{var g=[];p.forEach(v=>{g.push(v?new _T(v.title,v.column.getComponent(),v.width,v.height,v.depth):null)}),c.push(new SO("header",g))}),c}bodyToExportRows(e){var o=[],a=[];return this.table.columnManager.columnsByIndex.forEach(c=>{this.columnVisCheck(c)&&o.push(c.getComponent())}),!1!==this.config.columnCalcs&&this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&e.unshift(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&e.push(this.table.modules.columnCalcs.botRow)),(e=e.filter(c=>{switch(c.type){case"group":return!1!==this.config.rowGroups;case"calc":return!1!==this.config.columnCalcs;case"row":return!(this.table.options.dataTree&&!1===this.config.dataTree&&c.modules.dataTree.parent)}return!0})).forEach((c,d)=>{var p=c.getData(this.colVisProp),g=[],v=0;switch(c.type){case"group":v=c.level,g.push(new _T(c.key,c.getComponent(),o.length,1));break;case"calc":case"row":o.forEach(E=>{g.push(new _T(E._column.getFieldValue(p),E,1,1))}),this.table.options.dataTree&&!1!==this.config.dataTree&&(v=c.modules.dataTree.index)}a.push(new SO(c.type,g,c.getComponent(),v))}),a}genereateTableElement(e){var o=document.createElement("table"),a=document.createElement("thead"),c=document.createElement("tbody"),d=this.lookupTableStyles(),p=this.table.options["rowFormatter"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))],g={};return g.rowFormatter=null!==p?p:this.table.options.rowFormatter,this.table.options.dataTree&&!1!==this.config.dataTree&&this.table.modExists("columnCalcs")&&(g.treeElementField=this.table.modules.dataTree.elementField),g.groupHeader=this.table.options["groupHeader"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))],g.groupHeader&&!Array.isArray(g.groupHeader)&&(g.groupHeader=[g.groupHeader]),o.classList.add("tabulator-print-table"),this.mapElementStyles(this.table.columnManager.getHeadersElement(),a,["border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),e.length>1e3&&console.warn("It may take a long time to render an HTML table with more than 1000 rows"),e.forEach((v,E)=>{switch(v.type){case"header":a.appendChild(this.genereateHeaderElement(v,g,d));break;case"group":c.appendChild(this.genereateGroupElement(v,g,d));break;case"calc":c.appendChild(this.genereateCalcElement(v,g,d));break;case"row":let D=this.genereateRowElement(v,g,d);this.mapElementStyles(E%2&&d.evenRow?d.evenRow:d.oddRow,D,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),c.appendChild(D)}}),a.innerHTML&&o.appendChild(a),o.appendChild(c),this.mapElementStyles(this.table.element,o,["border-top","border-left","border-right","border-bottom"]),o}lookupTableStyles(){var e={};return this.cloneTableStyle&&window.getComputedStyle&&(e.oddRow=this.table.element.querySelector(".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)"),e.evenRow=this.table.element.querySelector(".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)"),e.calcRow=this.table.element.querySelector(".tabulator-row.tabulator-calcs"),e.firstRow=this.table.element.querySelector(".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)"),e.firstGroup=this.table.element.getElementsByClassName("tabulator-group")[0],e.firstRow&&(e.styleCells=e.firstRow.getElementsByClassName("tabulator-cell"),e.firstCell=e.styleCells[0],e.lastCell=e.styleCells[e.styleCells.length-1])),e}genereateHeaderElement(e,o,a){var c=document.createElement("tr");return e.columns.forEach(d=>{if(d){var p=document.createElement("th"),g=d.component._column.definition.cssClass?d.component._column.definition.cssClass.split(" "):[];p.colSpan=d.width,p.rowSpan=d.height,p.innerHTML=d.value,this.cloneTableStyle&&(p.style.boxSizing="border-box"),g.forEach(function(v){p.classList.add(v)}),this.mapElementStyles(d.component.getElement(),p,["text-align","border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),this.mapElementStyles(d.component._column.contentElement,p,["padding-top","padding-left","padding-right","padding-bottom"]),d.component._column.visible?this.mapElementStyles(d.component.getElement(),p,["width"]):d.component._column.definition.width&&(p.style.width=d.component._column.definition.width+"px"),d.component._column.parent&&this.mapElementStyles(d.component._column.parent.groupElement,p,["border-top"]),c.appendChild(p)}}),c}genereateGroupElement(e,o,a){var c=document.createElement("tr"),d=document.createElement("td"),p=e.columns[0];return c.classList.add("tabulator-print-table-row"),p.value=o.groupHeader&&o.groupHeader[e.indent]?o.groupHeader[e.indent](p.value,e.component._group.getRowCount(),e.component._group.getData(),e.component):!1===o.groupHeader?p.value:e.component._group.generator(p.value,e.component._group.getRowCount(),e.component._group.getData(),e.component),d.colSpan=p.width,d.innerHTML=p.value,c.classList.add("tabulator-print-table-group"),c.classList.add("tabulator-group-level-"+e.indent),p.component.isVisible()&&c.classList.add("tabulator-group-visible"),this.mapElementStyles(a.firstGroup,c,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),this.mapElementStyles(a.firstGroup,d,["padding-top","padding-left","padding-right","padding-bottom"]),c.appendChild(d),c}genereateCalcElement(e,o,a){var c=this.genereateRowElement(e,o,a);return c.classList.add("tabulator-print-table-calcs"),this.mapElementStyles(a.calcRow,c,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),c}genereateRowElement(e,o,a){var c=document.createElement("tr");return c.classList.add("tabulator-print-table-row"),e.columns.forEach(d=>{if(d){var p=document.createElement("td"),g=d.component._column,v=d.value,E={modules:{},getValue:function(){return v},getField:function(){return g.definition.field},getElement:function(){return p},getColumn:function(){return g.getComponent()},getData:function(){return e.component.getData()},getRow:function(){return e.component},getComponent:function(){return E},column:g};if((g.definition.cssClass?g.definition.cssClass.split(" "):[]).forEach(function(x){p.classList.add(x)}),this.table.modExists("format")&&!1!==this.config.formatCells)v=this.table.modules.format.formatExportValue(E,this.colVisProp);else switch(typeof v){case"object":v=JSON.stringify(v);break;case"undefined":case"null":v="";break;default:v=v}v instanceof Node?p.appendChild(v):p.innerHTML=v,a.firstCell&&(this.mapElementStyles(a.firstCell,p,["padding-top","padding-left","padding-right","padding-bottom","border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size"]),g.definition.align&&(p.style.textAlign=g.definition.align)),this.table.options.dataTree&&!1!==this.config.dataTree&&(o.treeElementField&&o.treeElementField==g.field||!o.treeElementField&&0==i)&&(e.component._row.modules.dataTree.controlEl&&p.insertBefore(e.component._row.modules.dataTree.controlEl.cloneNode(!0),p.firstChild),e.component._row.modules.dataTree.branchEl&&p.insertBefore(e.component._row.modules.dataTree.branchEl.cloneNode(!0),p.firstChild)),c.appendChild(p),E.modules.format&&E.modules.format.renderedCallback&&E.modules.format.renderedCallback(),o.rowFormatter&&!1!==this.config.formatCells&&o.rowFormatter(e.component)}}),c}genereateHTMLTable(e){var o=document.createElement("div");return o.appendChild(this.genereateTableElement(e)),o.innerHTML}getHtml(e,o,a,c){var d=this.generateExportList(a||this.table.options.htmlOutputConfig,o,e,c||"htmlOutput");return this.genereateHTMLTable(d)}mapElementStyles(e,o,a){if(this.cloneTableStyle&&e&&o){var c={"background-color":"backgroundColor",color:"fontColor",width:"width","font-weight":"fontWeight","font-family":"fontFamily","font-size":"fontSize","text-align":"textAlign","border-top":"borderTop","border-left":"borderLeft","border-right":"borderRight","border-bottom":"borderBottom","padding-top":"paddingTop","padding-left":"paddingLeft","padding-right":"paddingRight","padding-bottom":"paddingBottom"};if(window.getComputedStyle){var d=window.getComputedStyle(e);a.forEach(function(p){o.style[c[p]]=d.getPropertyValue(p)})}}}}return r.moduleName="export",r})();var o4={"=":function(r,t,e,o){return t==r},"<":function(r,t,e,o){return t<r},"<=":function(r,t,e,o){return t<=r},">":function(r,t,e,o){return t>r},">=":function(r,t,e,o){return t>=r},"!=":function(r,t,e,o){return t!=r},regex:function(r,t,e,o){return"string"==typeof r&&(r=new RegExp(r)),r.test(t)},like:function(r,t,e,o){return null==r?t===r:null!=t&&String(t).toLowerCase().indexOf(r.toLowerCase())>-1},keywords:function(r,t,e,o){var a=r.toLowerCase().split(void 0===o.separator?" ":o.separator),c=String(null==t?"":t).toLowerCase(),d=[];return a.forEach(p=>{c.includes(p)&&d.push(!0)}),o.matchAll?d.length===a.length:!!d.length},starts:function(r,t,e,o){return null==r?t===r:null!=t&&String(t).toLowerCase().startsWith(r.toLowerCase())},ends:function(r,t,e,o){return null==r?t===r:null!=t&&String(t).toLowerCase().endsWith(r.toLowerCase())},in:function(r,t,e,o){return Array.isArray(r)?!r.length||r.indexOf(t)>-1:(console.warn("Filter Error - filter value is not an array:",r),!1)}};let s4=(()=>{class r extends Zi{constructor(e){super(e),this.filterList=[],this.headerFilters={},this.headerFilterColumns=[],this.prevHeaderFilterChangeCheck="",this.prevHeaderFilterChangeCheck="{}",this.changed=!1,this.tableInitialized=!1,this.registerTableOption("filterMode","local"),this.registerTableOption("initialFilter",!1),this.registerTableOption("initialHeaderFilter",!1),this.registerTableOption("headerFilterLiveFilterDelay",300),this.registerColumnOption("headerFilter"),this.registerColumnOption("headerFilterPlaceholder"),this.registerColumnOption("headerFilterParams"),this.registerColumnOption("headerFilterEmptyCheck"),this.registerColumnOption("headerFilterFunc"),this.registerColumnOption("headerFilterFuncParams"),this.registerColumnOption("headerFilterLiveFilter"),this.registerTableFunction("searchRows",this.searchRows.bind(this)),this.registerTableFunction("searchData",this.searchData.bind(this)),this.registerTableFunction("setFilter",this.userSetFilter.bind(this)),this.registerTableFunction("refreshFilter",this.userRefreshFilter.bind(this)),this.registerTableFunction("addFilter",this.userAddFilter.bind(this)),this.registerTableFunction("getFilters",this.getFilters.bind(this)),this.registerTableFunction("setHeaderFilterFocus",this.userSetHeaderFilterFocus.bind(this)),this.registerTableFunction("getHeaderFilterValue",this.userGetHeaderFilterValue.bind(this)),this.registerTableFunction("setHeaderFilterValue",this.userSetHeaderFilterValue.bind(this)),this.registerTableFunction("getHeaderFilters",this.getHeaderFilters.bind(this)),this.registerTableFunction("removeFilter",this.userRemoveFilter.bind(this)),this.registerTableFunction("clearFilter",this.userClearFilter.bind(this)),this.registerTableFunction("clearHeaderFilter",this.userClearHeaderFilter.bind(this)),this.registerComponentFunction("column","headerFilterFocus",this.setHeaderFilterFocus.bind(this)),this.registerComponentFunction("column","reloadHeaderFilter",this.reloadHeaderFilter.bind(this)),this.registerComponentFunction("column","getHeaderFilterValue",this.getHeaderFilterValue.bind(this)),this.registerComponentFunction("column","setHeaderFilterValue",this.setHeaderFilterValue.bind(this))}initialize(){this.subscribe("column-init",this.initializeColumnHeaderFilter.bind(this)),this.subscribe("column-width-fit-before",this.hideHeaderFilterElements.bind(this)),this.subscribe("column-width-fit-after",this.showHeaderFilterElements.bind(this)),this.subscribe("table-built",this.tableBuilt.bind(this)),"remote"===this.table.options.filterMode&&this.subscribe("data-params",this.remoteFilterParams.bind(this)),this.registerDataHandler(this.filter.bind(this),10)}tableBuilt(){this.table.options.initialFilter&&this.setFilter(this.table.options.initialFilter),this.table.options.initialHeaderFilter&&this.table.options.initialHeaderFilter.forEach(e=>{var o=this.table.columnManager.findColumn(e.field);if(!o)return console.warn("Column Filter Error - No matching column found:",e.field),!1;this.setHeaderFilterValue(o,e.value)}),this.tableInitialized=!0}remoteFilterParams(e,o,a,c){return c.filter=this.getFilters(!0,!0),c}userSetFilter(e,o,a,c){this.setFilter(e,o,a,c),this.refreshFilter()}userRefreshFilter(){this.refreshFilter()}userAddFilter(e,o,a,c){this.addFilter(e,o,a,c),this.refreshFilter()}userSetHeaderFilterFocus(e){var o=this.table.columnManager.findColumn(e);if(!o)return console.warn("Column Filter Focus Error - No matching column found:",e),!1;this.setHeaderFilterFocus(o)}userGetHeaderFilterValue(e){var o=this.table.columnManager.findColumn(e);if(o)return this.getHeaderFilterValue(o);console.warn("Column Filter Error - No matching column found:",e)}userSetHeaderFilterValue(e,o){var a=this.table.columnManager.findColumn(e);if(!a)return console.warn("Column Filter Error - No matching column found:",e),!1;this.setHeaderFilterValue(a,o)}userRemoveFilter(e,o,a){this.removeFilter(e,o,a),this.refreshFilter()}userClearFilter(e){this.clearFilter(e),this.refreshFilter()}userClearHeaderFilter(){this.clearHeaderFilter(),this.refreshFilter()}searchRows(e,o,a){return this.search("rows",e,o,a)}searchData(e,o,a){return this.search("data",e,o,a)}initializeColumnHeaderFilter(e){var o=e.definition;o.headerFilter&&(void 0!==o.headerFilterPlaceholder&&o.field&&this.module("localize").setHeaderFilterColumnPlaceholder(o.field,o.headerFilterPlaceholder),this.initializeColumn(e))}initializeColumn(e,o){var a=this,c=e.getField();e.modules.filter={success:function(p){var D,g="input"==e.modules.filter.tagType&&"text"==e.modules.filter.attrType||"textarea"==e.modules.filter.tagType?"partial":"match",v="",E="";if(void 0===e.modules.filter.prevSuccess||e.modules.filter.prevSuccess!==p){if(e.modules.filter.prevSuccess=p,e.modules.filter.emptyFunc(p))delete a.headerFilters[c];else{switch(e.modules.filter.value=p,typeof e.definition.headerFilterFunc){case"string":r.filters[e.definition.headerFilterFunc]?(v=e.definition.headerFilterFunc,D=function(x){var L=e.definition.headerFilterFuncParams||{},U=e.getFieldValue(x);return L="function"==typeof L?L(p,U,x):L,r.filters[e.definition.headerFilterFunc](p,U,x,L)}):console.warn("Header Filter Error - Matching filter function not found: ",e.definition.headerFilterFunc);break;case"function":v=D=function(x){var L=e.definition.headerFilterFuncParams||{},U=e.getFieldValue(x);return L="function"==typeof L?L(p,U,x):L,e.definition.headerFilterFunc(p,U,x,L)}}D||("partial"===g?(D=function(x){var L=e.getFieldValue(x);return null!=L&&String(L).toLowerCase().indexOf(String(p).toLowerCase())>-1},v="like"):(D=function(x){return e.getFieldValue(x)==p},v="=")),a.headerFilters[c]={value:p,func:D,type:v,params:{}}}E=JSON.stringify(a.headerFilters),a.prevHeaderFilterChangeCheck!==E&&(a.prevHeaderFilterChangeCheck=E,a.trackChanges(),a.refreshFilter())}return!0},attrType:!1,tagType:!1,emptyFunc:!1},this.generateHeaderFilterElement(e)}generateHeaderFilterElement(e,o,a){var g,v,E,D,x,L,U,c=this,d=e.modules.filter.success,p=e.getField();if(e.modules.filter.headerElement&&e.modules.filter.headerElement.parentNode&&e.contentElement.removeChild(e.modules.filter.headerElement.parentNode),p){switch(e.modules.filter.emptyFunc=e.definition.headerFilterEmptyCheck||function($){return!$&&"0"!==$&&0!==$},(g=document.createElement("div")).classList.add("tabulator-header-filter"),typeof e.definition.headerFilter){case"string":c.table.modules.edit.editors[e.definition.headerFilter]?(v=c.table.modules.edit.editors[e.definition.headerFilter],("tick"===e.definition.headerFilter||"tickCross"===e.definition.headerFilter)&&!e.definition.headerFilterEmptyCheck&&(e.modules.filter.emptyFunc=function($){return!0!==$&&!1!==$})):console.warn("Filter Error - Cannot build header filter, No such editor found: ",e.definition.editor);break;case"function":v=e.definition.headerFilter;break;case"boolean":e.modules.edit&&e.modules.edit.editor?v=e.modules.edit.editor:e.definition.formatter&&c.table.modules.edit.editors[e.definition.formatter]?(v=c.table.modules.edit.editors[e.definition.formatter],("tick"===e.definition.formatter||"tickCross"===e.definition.formatter)&&!e.definition.headerFilterEmptyCheck&&(e.modules.filter.emptyFunc=function($){return!0!==$&&!1!==$})):v=c.table.modules.edit.editors.input}if(v){if(D={getValue:function(){return void 0!==o?o:""},getField:function(){return e.definition.field},getElement:function(){return g},getColumn:function(){return e.getComponent()},getRow:function(){return{normalizeHeight:function(){}}}},U="function"==typeof(U=e.definition.headerFilterParams||{})?U.call(c.table):U,!(E=v.call(this.table.modules.edit,D,function(){},d,function(){},U)))return void console.warn("Filter Error - Cannot add filter to "+p+" column, editor returned a value of false");if(!(E instanceof Node))return void console.warn("Filter Error - Cannot add filter to "+p+" column, editor should return an instance of Node, the editor returned:",E);p?c.langBind("headerFilters|columns|"+e.definition.field,function($){E.setAttribute("placeholder",void 0!==$&&$?$:c.langText("headerFilters|default"))}):c.langBind("headerFilters|default",function($){E.setAttribute("placeholder",$)}),E.addEventListener("click",function($){$.stopPropagation(),E.focus()}),E.addEventListener("focus",$=>{var ge=this.table.columnManager.element.scrollLeft;ge!==this.table.rowManager.element.scrollLeft&&(this.table.rowManager.scrollHorizontal(ge),this.table.columnManager.scrollHorizontal(ge))}),x=!1,L=function($){x&&clearTimeout(x),x=setTimeout(function(){d(E.value)},c.table.options.headerFilterLiveFilterDelay)},e.modules.filter.headerElement=E,e.modules.filter.attrType=E.hasAttribute("type")?E.getAttribute("type").toLowerCase():"",e.modules.filter.tagType=E.tagName.toLowerCase(),!1!==e.definition.headerFilterLiveFilter&&("autocomplete"===e.definition.headerFilter||"tickCross"===e.definition.headerFilter||("autocomplete"===e.definition.editor||"tickCross"===e.definition.editor)&&!0===e.definition.headerFilter||(E.addEventListener("keyup",L),E.addEventListener("search",L),"number"==e.modules.filter.attrType&&E.addEventListener("change",function($){d(E.value)}),"text"==e.modules.filter.attrType&&"ie"!==this.table.browser&&E.setAttribute("type","search")),("input"==e.modules.filter.tagType||"select"==e.modules.filter.tagType||"textarea"==e.modules.filter.tagType)&&E.addEventListener("mousedown",function($){$.stopPropagation()})),g.appendChild(E),e.contentElement.appendChild(g),a||c.headerFilterColumns.push(e)}}else console.warn("Filter Error - Cannot add header filter, column has no field set:",e.definition.title)}hideHeaderFilterElements(){this.headerFilterColumns.forEach(function(e){e.modules.filter&&e.modules.filter.headerElement&&(e.modules.filter.headerElement.style.display="none")})}showHeaderFilterElements(){this.headerFilterColumns.forEach(function(e){e.modules.filter&&e.modules.filter.headerElement&&(e.modules.filter.headerElement.style.display="")})}setHeaderFilterFocus(e){e.modules.filter&&e.modules.filter.headerElement?e.modules.filter.headerElement.focus():console.warn("Column Filter Focus Error - No header filter set on column:",e.getField())}getHeaderFilterValue(e){if(e.modules.filter&&e.modules.filter.headerElement)return e.modules.filter.headerElement.value;console.warn("Column Filter Error - No header filter set on column:",e.getField())}setHeaderFilterValue(e,o){e&&(e.modules.filter&&e.modules.filter.headerElement?(this.generateHeaderFilterElement(e,o,!0),e.modules.filter.success(o)):console.warn("Column Filter Error - No header filter set on column:",e.getField()))}reloadHeaderFilter(e){e&&(e.modules.filter&&e.modules.filter.headerElement?this.generateHeaderFilterElement(e,e.modules.filter.value,!0):console.warn("Column Filter Error - No header filter set on column:",e.getField()))}refreshFilter(){this.tableInitialized&&("remote"===this.table.options.filterMode?this.reloadData():this.refreshData())}trackChanges(){this.changed=!0,this.dispatch("filter-changed")}hasChanged(){var e=this.changed;return this.changed=!1,e}setFilter(e,o,a,c){this.filterList=[],Array.isArray(e)||(e=[{field:e,type:o,value:a,params:c}]),this.addFilter(e)}addFilter(e,o,a,c){Array.isArray(e)||(e=[{field:e,type:o,value:a,params:c}]),e.forEach(d=>{(d=this.findFilter(d))&&(this.filterList.push(d),this.changed=!0)})}findFilter(e){var o;if(Array.isArray(e))return this.findSubFilters(e);var a=!1;return"function"==typeof e.field?a=function(c){return e.field(c,e.type||{})}:r.filters[e.type]?a=(o=this.table.columnManager.getColumnByField(e.field))?function(c){return r.filters[e.type](e.value,o.getFieldValue(c),c,e.params||{})}:function(c){return r.filters[e.type](e.value,c[e.field],c,e.params||{})}:console.warn("Filter Error - No such filter type found, ignoring: ",e.type),e.func=a,!!e.func&&e}findSubFilters(e){var o=[];return e.forEach(a=>{(a=this.findFilter(a))&&o.push(a)}),!!o.length&&o}getFilters(e,o){var a=[];return e&&(a=this.getHeaderFilters()),o&&a.forEach(function(c){"function"==typeof c.type&&(c.type="function")}),a.concat(this.filtersToArray(this.filterList,o))}filtersToArray(e,o){var a=[];return e.forEach(c=>{var d;Array.isArray(c)?a.push(this.filtersToArray(c,o)):(d={field:c.field,type:c.type,value:c.value},o&&"function"==typeof d.type&&(d.type="function"),a.push(d))}),a}getHeaderFilters(){var e=[];for(var o in this.headerFilters)e.push({field:o,type:this.headerFilters[o].type,value:this.headerFilters[o].value});return e}removeFilter(e,o,a){Array.isArray(e)||(e=[{field:e,type:o,value:a}]),e.forEach(c=>{var d;(d=this.filterList.findIndex("object"==typeof c.field?p=>c===p:p=>c.field===p.field&&c.type===p.type&&c.value===p.value))>-1?this.filterList.splice(d,1):console.warn("Filter Error - No matching filter type found, ignoring: ",c.type)}),this.trackChanges()}clearFilter(e){this.filterList=[],e&&this.clearHeaderFilter(),this.trackChanges()}clearHeaderFilter(){this.headerFilters={},this.prevHeaderFilterChangeCheck="{}",this.headerFilterColumns.forEach(e=>{void 0!==e.modules.filter.value&&delete e.modules.filter.value,e.modules.filter.prevSuccess=void 0,this.reloadHeaderFilter(e)}),this.trackChanges()}search(e,o,a,c){var d=[],p=[];return Array.isArray(o)||(o=[{field:o,type:a,value:c}]),o.forEach(g=>{(g=this.findFilter(g))&&p.push(g)}),this.table.rowManager.rows.forEach(g=>{var v=!0;p.forEach(E=>{this.filterRecurse(E,g.getData())||(v=!1)}),v&&d.push("data"===e?g.getData("data"):g.getComponent())}),d}filter(e,o){var a=[],c=[];return this.subscribedExternal("dataFiltering")&&this.dispatchExternal("dataFiltering",this.getFilters()),"remote"!==this.table.options.filterMode&&(this.filterList.length||Object.keys(this.headerFilters).length)?e.forEach(d=>{this.filterRow(d)&&a.push(d)}):a=e.slice(0),this.subscribedExternal("dataFiltered")&&(a.forEach(d=>{c.push(d.getComponent())}),this.dispatchExternal("dataFiltered",this.getFilters(),c)),a}filterRow(e,o){var a=!0,c=e.getData();for(var d in this.filterList.forEach(p=>{this.filterRecurse(p,c)||(a=!1)}),this.headerFilters)this.headerFilters[d].func(c)||(a=!1);return a}filterRecurse(e,o){var a=!1;return Array.isArray(e)?e.forEach(c=>{this.filterRecurse(c,o)&&(a=!0)}):a=e.func(o),a}}return r.moduleName="filter",r.filters=o4,r})();var R4={plaintext:function(r,t,e){return this.emptyToSpace(this.sanitizeHTML(r.getValue()))},html:function(r,t,e){return r.getValue()},textarea:function(r,t,e){return r.getElement().style.whiteSpace="pre-wrap",this.emptyToSpace(this.sanitizeHTML(r.getValue()))},money:function(r,t,e){var c,d,p,g,o=parseFloat(r.getValue()),a="",v=t.decimal||".",E=t.thousand||",",D=t.negativeSign||"-",x=t.symbol||"",L=!!t.symbolAfter,U=void 0!==t.precision?t.precision:2;if(isNaN(o))return this.emptyToSpace(this.sanitizeHTML(r.getValue()));for(o<0&&(o=Math.abs(o),a=D),c=!1!==U?o.toFixed(U):o,d=(c=String(c).split("."))[0],p=c.length>1?v+c[1]:"",g=/(\d+)(\d{3})/;g.test(d);)d=d.replace(g,"$1"+E+"$2");return L?a+d+p+x:a+x+d+p},link:function(r,t,e){var o=r.getValue(),a=t.urlPrefix||"",c=t.download,d=o,p=document.createElement("a");if(t.labelField&&(d=r.getData()[t.labelField]),t.label)switch(typeof t.label){case"string":d=t.label;break;case"function":d=t.label(r)}if(d){if(t.urlField&&(o=r.getData()[t.urlField]),t.url)switch(typeof t.url){case"string":o=t.url;break;case"function":o=t.url(r)}return p.setAttribute("href",a+o),t.target&&p.setAttribute("target",t.target),t.download&&(c="function"==typeof c?c(r):!0===c?"":c,p.setAttribute("download",c)),p.innerHTML=this.emptyToSpace(this.sanitizeHTML(d)),p}return"&nbsp;"},image:function(r,t,e){var o=document.createElement("img"),a=r.getValue();switch(t.urlPrefix&&(a=t.urlPrefix+r.getValue()),t.urlSuffix&&(a+=t.urlSuffix),o.setAttribute("src",a),typeof t.height){case"number":o.style.height=t.height+"px";break;case"string":o.style.height=t.height}switch(typeof t.width){case"number":o.style.width=t.width+"px";break;case"string":o.style.width=t.width}return o.addEventListener("load",function(){r.getRow().normalizeHeight()}),o},tickCross:function(r,t,e){var o=r.getValue(),a=r.getElement(),c=t.allowEmpty,p=void 0!==t.tickElement?t.tickElement:'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>',g=void 0!==t.crossElement?t.crossElement:'<svg enable-background="new 0 0 24 24" height="14" width="14"  viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>';return t.allowTruthy&&o||!0===o||"true"===o||"True"===o||1===o||"1"===o?(a.setAttribute("aria-checked",!0),p||""):!c||"null"!==o&&""!==o&&null!=o?(a.setAttribute("aria-checked",!1),g||""):(a.setAttribute("aria-checked","mixed"),"")},datetime:function(r,t,e){var o=window.DateTime||luxon.DateTime,a=t.inputFormat||"yyyy-MM-dd HH:mm:ss",c=t.outputFormat||"dd/MM/yyyy HH:mm:ss",d=void 0!==t.invalidPlaceholder?t.invalidPlaceholder:"",p=r.getValue();if(void 0!==o){var g=(window.DateTime||luxon.DateTime).fromFormat(p,a);return g.isValid?(t.timezone&&(g=g.shiftTimezone(t.timezone)),g.toFormat(c)):!0===d?p:"function"==typeof d?d(p):d}console.error("Format Error - 'datetime' formatter is dependant on luxon.js")},datetimediff:function(r,t,e){var o=window.DateTime||luxon.DateTime,a=t.inputFormat||"yyyy-MM-dd HH:mm:ss",c=void 0!==t.invalidPlaceholder?t.invalidPlaceholder:"",d=void 0!==t.suffix&&t.suffix,p=void 0!==t.unit?t.unit:"days",g=void 0!==t.humanize&&t.humanize,v=void 0!==t.date?t.date:o.now(),E=r.getValue();if(void 0!==o){var D=o.fromFormat(E,a);if(!D.isValid)return!0===c?E:"function"==typeof c?c(E):c;if(!g)return parseInt(D.diff(v,p)[p])+(d?" "+d:"")}else console.error("Format Error - 'datetimediff' formatter is dependant on luxon.js")},lookup:function(r,t,e){var o=r.getValue();return void 0===t[o]?(console.warn("Missing display value for "+o),o):t[o]},star:function(r,t,e){var o=r.getValue(),a=r.getElement(),c=t&&t.stars?t.stars:5,d=document.createElement("span"),p=document.createElementNS("http://www.w3.org/2000/svg","svg");d.style.verticalAlign="middle",p.setAttribute("width","14"),p.setAttribute("height","14"),p.setAttribute("viewBox","0 0 512 512"),p.setAttribute("xml:space","preserve"),p.style.padding="0 1px",o=o&&!isNaN(o)?parseInt(o):0,o=Math.max(0,Math.min(o,c));for(var E=1;E<=c;E++){var D=p.cloneNode(!0);D.innerHTML=E<=o?'<polygon fill="#FFEA00" stroke="#C1AB60" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>':'<polygon fill="#D2D2D2" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>',d.appendChild(D)}return a.style.whiteSpace="nowrap",a.style.overflow="hidden",a.style.textOverflow="ellipsis",a.setAttribute("aria-label",o),d},traffic:function(r,t,e){var E,o=this.sanitizeHTML(r.getValue())||0,a=document.createElement("span"),c=t&&t.max?t.max:100,d=t&&t.min?t.min:0,p=t&&void 0!==t.color?t.color:["red","orange","green"],g="#666666";if(!isNaN(o)&&void 0!==r.getValue()){switch(a.classList.add("tabulator-traffic-light"),E=parseFloat(o)<=c?parseFloat(o):c,E=parseFloat(E)>=d?parseFloat(E):d,E=Math.round((E-d)/((c-d)/100)),typeof p){case"string":g=p;break;case"function":g=p(o);break;case"object":if(Array.isArray(p)){var x=Math.floor(E/(100/p.length));x=Math.min(x,p.length-1),g=p[x=Math.max(x,0)];break}}return a.style.backgroundColor=g,a}},progress:function(r,t,e){var v,E,D,x,o=this.sanitizeHTML(r.getValue())||0,a=r.getElement(),c=t&&t.max?t.max:100,d=t&&t.min?t.min:0,p=t&&t.legendAlign?t.legendAlign:"center";switch(v=parseFloat(o)<=c?parseFloat(o):c,v=parseFloat(v)>=d?parseFloat(v):d,v=Math.round((v-d)/((c-d)/100)),typeof t.color){case"string":E=t.color;break;case"function":E=t.color(o);break;case"object":if(Array.isArray(t.color)){var L=100/t.color.length,U=Math.floor(v/L);U=Math.min(U,t.color.length-1),U=Math.max(U,0),E=t.color[U];break}default:E="#2DC214"}switch(typeof t.legend){case"string":D=t.legend;break;case"function":D=t.legend(o);break;case"boolean":D=o;break;default:D=!1}switch(typeof t.legendColor){case"string":x=t.legendColor;break;case"function":x=t.legendColor(o);break;case"object":Array.isArray(t.legendColor)&&(L=100/t.legendColor.length,U=Math.floor(v/L),U=Math.min(U,t.legendColor.length-1),U=Math.max(U,0),x=t.legendColor[U]);break;default:x="#000"}a.style.minWidth="30px",a.style.position="relative",a.setAttribute("aria-label",v);var ee=document.createElement("div");ee.style.display="inline-block",ee.style.position="absolute",ee.style.width=v+"%",ee.style.backgroundColor=E,ee.style.height="100%",ee.setAttribute("data-max",c),ee.setAttribute("data-min",d);var $=document.createElement("div");if($.style.position="relative",$.style.width="100%",$.style.height="100%",D){var ge=document.createElement("div");ge.style.position="absolute",ge.style.top=0,ge.style.left=0,ge.style.textAlign=p,ge.style.width="100%",ge.style.color=x,ge.innerHTML=D}return e(function(){if(!(r instanceof TO)){var be=document.createElement("div");be.style.position="absolute",be.style.top="4px",be.style.bottom="4px",be.style.left="4px",be.style.right="4px",a.appendChild(be),a=be}a.appendChild($),$.appendChild(ee),D&&$.appendChild(ge)}),""},color:function(r,t,e){return r.getElement().style.backgroundColor=this.sanitizeHTML(r.getValue()),""},buttonTick:function(r,t,e){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>'},buttonCross:function(r,t,e){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>'},rownum:function(r,t,e){return this.table.rowManager.activeRows.indexOf(r.getRow()._getSelf())+1},handle:function(r,t,e){return r.getElement().classList.add("tabulator-row-handle"),"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>"},responsiveCollapse:function(r,t,e){var o=document.createElement("div"),a=r.getRow()._row.modules.responsiveLayout;function c(d){var p=a.element;a.open=d,p&&(a.open?(o.classList.add("open"),p.style.display=""):(o.classList.remove("open"),p.style.display="none"))}return o.classList.add("tabulator-responsive-collapse-toggle"),o.innerHTML="<span class='tabulator-responsive-collapse-toggle-open'>+</span><span class='tabulator-responsive-collapse-toggle-close'>-</span>",r.getElement().classList.add("tabulator-row-handle"),o.addEventListener("click",function(d){d.stopImmediatePropagation(),c(!a.open)}),c(a.open),o},rowSelection:function(r,t,e){var o=document.createElement("input");if(o.type="checkbox",this.table.modExists("selectRow",!0))if(o.addEventListener("click",c=>{c.stopPropagation()}),"function"==typeof r.getRow){var a=r.getRow();a instanceof mT?(o.addEventListener("change",c=>{a.toggleSelect()}),o.checked=a.isSelected&&a.isSelected(),this.table.modules.selectRow.registerRowSelectCheckbox(a,o)):o=""}else o.addEventListener("change",c=>{this.table.modules.selectRow.selectedRows.length?this.table.deselectRow():this.table.selectRow(t.rowRange)}),this.table.modules.selectRow.registerHeaderSelectCheckbox(o);return o}};let M4=(()=>{class r extends Zi{constructor(e){super(e),this.registerColumnOption("formatter"),this.registerColumnOption("formatterParams"),this.registerColumnOption("formatterPrint"),this.registerColumnOption("formatterPrintParams"),this.registerColumnOption("formatterClipboard"),this.registerColumnOption("formatterClipboardParams"),this.registerColumnOption("formatterHtmlOutput"),this.registerColumnOption("formatterHtmlOutputParams"),this.registerColumnOption("titleFormatter"),this.registerColumnOption("titleFormatterParams")}initialize(){this.subscribe("cell-format",this.formatValue.bind(this)),this.subscribe("cell-rendered",this.cellRendered.bind(this)),this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("column-format",this.formatHeader.bind(this))}initializeColumn(e){e.modules.format=this.lookupFormatter(e,""),void 0!==e.definition.formatterPrint&&(e.modules.format.print=this.lookupFormatter(e,"Print")),void 0!==e.definition.formatterClipboard&&(e.modules.format.clipboard=this.lookupFormatter(e,"Clipboard")),void 0!==e.definition.formatterHtmlOutput&&(e.modules.format.htmlOutput=this.lookupFormatter(e,"HtmlOutput"))}lookupFormatter(e,o){var a={params:e.definition["formatter"+o+"Params"]||{}},c=e.definition["formatter"+o];switch(typeof c){case"string":r.formatters[c]?a.formatter=r.formatters[c]:(console.warn("Formatter Error - No such formatter found: ",c),a.formatter=r.formatters.plaintext);break;case"function":a.formatter=c;break;default:a.formatter=r.formatters.plaintext}return a}cellRendered(e){e.modules.format&&e.modules.format.renderedCallback&&!e.modules.format.rendered&&(e.modules.format.renderedCallback(),e.modules.format.rendered=!0)}formatHeader(e,o,a){var c,d,p,g;return e.definition.titleFormatter?(c=this.getFormatter(e.definition.titleFormatter),p=v=>{e.titleFormatterRendered=v},g={getValue:function(){return o},getElement:function(){return a}},d="function"==typeof(d=e.definition.titleFormatterParams||{})?d():d,c.call(this,g,d,p)):o}formatValue(e){var o=e.getComponent(),a="function"==typeof e.column.modules.format.params?e.column.modules.format.params(o):e.column.modules.format.params;return e.column.modules.format.formatter.call(this,o,a,function(d){e.modules.format||(e.modules.format={}),e.modules.format.renderedCallback=d,e.modules.format.rendered=!1})}formatExportValue(e,o){var c,a=e.column.modules.format[o];if(a){let d=function(p){e.modules.format||(e.modules.format={}),e.modules.format.renderedCallback=p,e.modules.format.rendered=!1};return c="function"==typeof a.params?a.params(component):a.params,a.formatter.call(this,e.getComponent(),c,d)}return this.formatValue(e)}sanitizeHTML(e){if(e){var o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(e).replace(/[&<>"'`=\/]/g,function(a){return o[a]})}return e}emptyToSpace(e){return null==e||""===e?"&nbsp;":e}getFormatter(e){switch(typeof e){case"string":r.formatters[e]?e=r.formatters[e]:(console.warn("Formatter Error - No such formatter found: ",e),e=r.formatters.plaintext);break;case"function":e=e;break;default:e=r.formatters.plaintext}return e}}return r.moduleName="format",r.formatters=R4,r})(),I4=(()=>{class r extends Zi{constructor(e){super(e),this.leftColumns=[],this.rightColumns=[],this.leftMargin=0,this.rightMargin=0,this.rightPadding=0,this.initializationMode="left",this.active=!1,this.scrollEndTimer=!1,this.registerColumnOption("frozen")}reset(){this.initializationMode="left",this.leftColumns=[],this.rightColumns=[],this.leftMargin=0,this.rightMargin=0,this.rightMargin=0,this.active=!1,this.table.columnManager.headersElement.style.marginLeft=0,this.table.columnManager.element.style.paddingRight=0}initialize(){this.subscribe("cell-layout",this.layoutCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-width",this.layout.bind(this)),this.subscribe("row-layout-before",this.layoutRow.bind(this)),this.subscribe("table-layout",this.layout.bind(this)),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this)),this.subscribe("columns-loading",this.reset.bind(this)),this.subscribe("table-redraw",this.layout.bind(this))}layoutCell(e){this.layoutElement(e.element,e.column)}initializeColumn(e){var o={margin:0,edge:!1};e.isGroup||(this.frozenCheck(e)?(o.position=this.initializationMode,"left"==this.initializationMode?this.leftColumns.push(e):this.rightColumns.unshift(e),this.active=!0,e.modules.frozen=o):this.initializationMode="right")}frozenCheck(e){return e.parent.isGroup&&e.definition.frozen&&console.warn("Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups"),e.parent.isGroup?this.frozenCheck(e.parent):e.definition.frozen}scrollHorizontal(){var e;this.active&&(clearTimeout(this.scrollEndTimer),this.scrollEndTimer=setTimeout(()=>{this.layout()},100),e=this.table.rowManager.getVisibleRows(),this.calcMargins(),this.layoutColumnPosition(),this.layoutCalcRows(),e.forEach(o=>{"row"===o.type&&this.layoutRow(o)}),this.table.rowManager.tableElement.style.marginRight=this.rightMargin)}calcMargins(){this.leftMargin=this._calcSpace(this.leftColumns,this.leftColumns.length)+"px",this.table.columnManager.headersElement.style.marginLeft=this.leftMargin,this.rightMargin=this._calcSpace(this.rightColumns,this.rightColumns.length)+"px",this.table.columnManager.element.style.paddingRight=this.rightMargin,this.rightPadding=this.table.rowManager.element.clientWidth+this.table.columnManager.scrollLeft}layoutCalcRows(){this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&this.table.modules.columnCalcs.topRow&&this.layoutRow(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&this.table.modules.columnCalcs.botRow&&this.layoutRow(this.table.modules.columnCalcs.botRow),this.table.modExists("groupRows")&&this.layoutGroupCalcs(this.table.modules.groupRows.getGroups()))}layoutGroupCalcs(e){e.forEach(o=>{o.calcs.top&&this.layoutRow(o.calcs.top),o.calcs.bottom&&this.layoutRow(o.calcs.bottom),o.groupList&&o.groupList.length&&this.layoutGroupCalcs(o.groupList&&o.groupList)})}layoutColumnPosition(e){var o=[];this.leftColumns.forEach((a,c)=>{if(a.modules.frozen.margin=this._calcSpace(this.leftColumns,c)+this.table.columnManager.scrollLeft+"px",a.modules.frozen.edge=c==this.leftColumns.length-1,a.parent.isGroup){var d=this.getColGroupParentElement(a);o.includes(d)||(this.layoutElement(d,a),o.push(d)),a.modules.frozen.edge&&d.classList.add("tabulator-frozen-"+a.modules.frozen.position)}else this.layoutElement(a.getElement(),a);e&&a.cells.forEach(p=>{this.layoutElement(p.getElement(!0),a)})}),this.rightColumns.forEach((a,c)=>{a.modules.frozen.margin=this.rightPadding-this._calcSpace(this.rightColumns,c+1)+"px",a.modules.frozen.edge=c==this.rightColumns.length-1,this.layoutElement(a.parent.isGroup?this.getColGroupParentElement(a):a.getElement(),a),e&&a.cells.forEach(d=>{this.layoutElement(d.getElement(!0),a)})})}getColGroupParentElement(e){return e.parent.isGroup?this.getColGroupParentElement(e.parent):e.getElement()}layout(){this.active&&(this.calcMargins(),this.table.rowManager.getDisplayRows().forEach(e=>{"row"===e.type&&this.layoutRow(e)}),this.layoutCalcRows(),this.layoutColumnPosition(!0),this.table.rowManager.tableElement.style.marginRight=this.rightMargin)}layoutRow(e){e.getElement().style.paddingLeft=this.leftMargin,this.leftColumns.forEach(a=>{var c=e.getCell(a);c&&this.layoutElement(c.getElement(!0),a)}),this.rightColumns.forEach(a=>{var c=e.getCell(a);c&&this.layoutElement(c.getElement(!0),a)})}layoutElement(e,o){o.modules.frozen&&(e.style.position="absolute",e.style.left=o.modules.frozen.margin,e.classList.add("tabulator-frozen"),o.modules.frozen.edge&&e.classList.add("tabulator-frozen-"+o.modules.frozen.position))}_calcSpace(e,o){var a=0;for(let c=0;c<o;c++)e[c].visible&&(a+=e[c].getWidth());return a}}return r.moduleName="frozenColumns",r})(),x4=(()=>{class r extends Zi{constructor(e){super(e),this.topElement=document.createElement("div"),this.rows=[],this.registerComponentFunction("row","freeze",this.freezeRow.bind(this)),this.registerComponentFunction("row","unfreeze",this.unfreezeRow.bind(this)),this.registerComponentFunction("row","isFrozen",this.isRowFrozen.bind(this))}initialize(){this.rows=[],this.topElement.classList.add("tabulator-frozen-rows-holder"),this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling),this.subscribe("row-deleting",this.detachRow.bind(this)),this.registerDisplayHandler(this.getRows.bind(this),10)}isRowFrozen(e){return this.rows.indexOf(e)>-1}isFrozen(){return!!this.rows.length}getRows(e){var o=e.slice(0);return this.rows.forEach(function(a){var c=o.indexOf(a);c>-1&&o.splice(c,1)}),o}freezeRow(e){e.modules.frozen?console.warn("Freeze Error - Row is already frozen"):(e.modules.frozen=!0,this.topElement.appendChild(e.getElement()),e.initialize(),e.normalizeHeight(),this.table.rowManager.adjustTableSize(),this.rows.push(e),this.refreshData(!1,"display"),this.styleRows())}unfreezeRow(e){this.rows.indexOf(e),e.modules.frozen?(e.modules.frozen=!1,this.detachRow(e),this.table.rowManager.adjustTableSize(),this.refreshData(!1,"display"),this.rows.length&&this.styleRows()):console.warn("Freeze Error - Row is already unfrozen")}detachRow(e){var o=this.rows.indexOf(e);if(o>-1){var a=e.getElement();a.parentNode&&a.parentNode.removeChild(a),this.rows.splice(o,1)}}styleRows(e){this.rows.forEach((o,a)=>{this.table.rowManager.styleRow(o,a)})}}return r.moduleName="frozenRows",r})();class A4{constructor(t){return this._group=t,this.type="GroupComponent",new Proxy(this,{get:function(e,o,a){return void 0!==e[o]?e[o]:e._group.table.componentFunctionBinder.handle("row",e._group,o)}})}getKey(){return this._group.key}getField(){return this._group.field}getElement(){return this._group.element}getRows(){return this._group.getRows(!0)}getSubGroups(){return this._group.getSubGroups(!0)}getParentGroup(){return!!this._group.parent&&this._group.parent.getComponent()}isVisible(){return this._group.visible}show(){this._group.show()}hide(){this._group.hide()}toggle(){this._group.toggleVisibility()}_getSelf(){return this._group}getTable(){return this._group.groupManager.table}}class Tp{constructor(t,e,o,a,c,d,p){this.groupManager=t,this.parent=e,this.key=a,this.level=o,this.field=c,this.hasSubGroups=o<t.groupIDLookups.length-1,this.addRow=this.hasSubGroups?this._addRowToGroup:this._addRow,this.type="group",this.old=p,this.rows=[],this.groups=[],this.groupList=[],this.generator=d,this.elementContents=!1,this.height=0,this.outerHeight=0,this.initialized=!1,this.calcs={},this.initialized=!1,this.modules={},this.arrowElement=!1,this.visible=p?p.visible:void 0!==t.startOpen[o]?t.startOpen[o]:t.startOpen[0],this.component=null,this.createElements(),this.addBindings(),this.createValueGroups()}wipe(){this.groupList.length?this.groupList.forEach(function(t){t.wipe()}):(this.element=!1,this.arrowElement=!1,this.elementContents=!1)}createElements(){var t=document.createElement("div");t.classList.add("tabulator-arrow"),this.element=document.createElement("div"),this.element.classList.add("tabulator-row"),this.element.classList.add("tabulator-group"),this.element.classList.add("tabulator-group-level-"+this.level),this.element.setAttribute("role","rowgroup"),this.arrowElement=document.createElement("div"),this.arrowElement.classList.add("tabulator-group-toggle"),this.arrowElement.appendChild(t),!1!==this.groupManager.table.options.movableRows&&this.groupManager.table.modExists("moveRow")&&this.groupManager.table.modules.moveRow.initializeGroupHeader(this)}createValueGroups(){var t=this.level+1;this.groupManager.allowedValues&&this.groupManager.allowedValues[t]&&this.groupManager.allowedValues[t].forEach(e=>{this._createGroup(e,t)})}addBindings(){var t,e,o;(this.groupManager.table.options.groupContextMenu||this.groupManager.table.options.groupClickMenu)&&this.groupManager.table.modExists("menu")&&this.groupManager.table.modules.menu.initializeGroup.call(this.groupManager.table.modules.menu,this),this.groupManager.table.options.groupTap&&(o=!1,this.element.addEventListener("touchstart",c=>{o=!0},{passive:!0}),this.element.addEventListener("touchend",c=>{o&&this.groupManager.table.options.groupTap(c,this.getComponent()),o=!1})),this.groupManager.table.options.groupDblTap&&(t=null,this.element.addEventListener("touchend",c=>{t?(clearTimeout(t),t=null,this.groupManager.table.options.groupDblTap(c,this.getComponent())):t=setTimeout(()=>{clearTimeout(t),t=null},300)})),this.groupManager.table.options.groupTapHold&&(e=null,this.element.addEventListener("touchstart",c=>{clearTimeout(e),e=setTimeout(()=>{clearTimeout(e),e=null,o=!1,this.groupManager.table.options.groupTapHold(c,this.getComponent())},1e3)},{passive:!0}),this.element.addEventListener("touchend",c=>{clearTimeout(e),e=null})),this.groupManager.table.options.groupToggleElement&&("arrow"==this.groupManager.table.options.groupToggleElement?this.arrowElement:this.element).addEventListener("click",c=>{c.stopPropagation(),c.stopImmediatePropagation(),this.toggleVisibility()})}_createGroup(t,e){var o=e+"_"+t,a=new Tp(this.groupManager,this,e,t,this.groupManager.groupIDLookups[e].field,this.groupManager.headerGenerator[e]||this.groupManager.headerGenerator[0],!!this.old&&this.old.groups[o]);this.groups[o]=a,this.groupList.push(a)}_addRowToGroup(t){var e=this.level+1;if(this.hasSubGroups){var o=this.groupManager.groupIDLookups[e].func(t.getData()),a=e+"_"+o;this.groupManager.allowedValues&&this.groupManager.allowedValues[e]?this.groups[a]&&this.groups[a].addRow(t):(this.groups[a]||this._createGroup(o,e),this.groups[a].addRow(t))}}_addRow(t){this.rows.push(t),t.modules.group=this}insertRow(t,e,o){var a=this.conformRowData({});t.updateData(a);var c=this.rows.indexOf(e);c>-1?this.rows.splice(o?c+1:c,0,t):o?this.rows.push(t):this.rows.unshift(t),t.modules.group=this,this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modules.columnCalcs.recalcGroup(this),this.groupManager.updateGroupRows(!0)}scrollHeader(t){this.arrowElement.style.marginLeft=t,this.groupList.forEach(function(e){e.scrollHeader(t)})}getRowIndex(t){}conformRowData(t){return this.field?t[this.field]=this.key:console.warn("Data Conforming Error - Cannot conform row data to match new group as groupBy is a function"),this.parent&&(t=this.parent.conformRowData(t)),t}removeRow(t){var e=this.rows.indexOf(t),o=t.getElement();e>-1&&this.rows.splice(e,1),this.groupManager.table.options.groupValues||this.rows.length?(o.parentNode&&o.parentNode.removeChild(o),this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modules.columnCalcs.recalcGroup(this)):(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this),this.groupManager.updateGroupRows(!0))}removeGroup(t){var o,e=t.level+"_"+t.key;this.groups[e]&&(delete this.groups[e],(o=this.groupList.indexOf(t))>-1&&this.groupList.splice(o,1),this.groupList.length||(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this)))}getHeadersAndRows(t){var e=[];return e.push(this),this._visSet(),this.visible?this.groupList.length?this.groupList.forEach(function(o){e=e.concat(o.getHeadersAndRows(t))}):(!t&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top&&(this.calcs.top.detachElement(),this.calcs.top.deleteCells()),this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),e.push(this.calcs.top)),e=e.concat(this.rows),!t&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom&&(this.calcs.bottom.detachElement(),this.calcs.bottom.deleteCells()),this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),e.push(this.calcs.bottom))):!this.groupList.length&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&(!t&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top&&(this.calcs.top.detachElement(),this.calcs.top.deleteCells()),this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),e.push(this.calcs.top))),!t&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom&&(this.calcs.bottom.detachElement(),this.calcs.bottom.deleteCells()),this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),e.push(this.calcs.bottom)))),e}getData(t,e){var o=[];return this._visSet(),(!t||t&&this.visible)&&this.rows.forEach(a=>{o.push(a.getData(e||"data"))}),o}getRowCount(){var t=0;return this.groupList.length?this.groupList.forEach(e=>{t+=e.getRowCount()}):t=this.rows.length,t}toggleVisibility(){this.visible?this.hide():this.show()}hide(){this.visible=!1,"classic"!=this.groupManager.table.rowManager.getRenderMode()||this.groupManager.table.options.pagination?this.groupManager.updateGroupRows(!0):(this.element.classList.remove("tabulator-group-visible"),this.groupList.length?this.groupList.forEach(t=>{t.getHeadersAndRows().forEach(o=>{o.detachElement()})}):this.rows.forEach(t=>{var e=t.getElement();e.parentNode.removeChild(e)}),this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex()),this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth()),this.groupManager.table.externalEvents.dispatch("groupVisibilityChanged",this.getComponent(),!1)}show(){if(this.visible=!0,"classic"!=this.groupManager.table.rowManager.getRenderMode()||this.groupManager.table.options.pagination)this.groupManager.updateGroupRows(!0);else{this.element.classList.add("tabulator-group-visible");var t=this.getElement();this.groupList.length?this.groupList.forEach(e=>{e.getHeadersAndRows().forEach(a=>{var c=a.getElement();t.parentNode.insertBefore(c,t.nextSibling),a.initialize(),t=c})}):this.rows.forEach(e=>{var o=e.getElement();t.parentNode.insertBefore(o,t.nextSibling),e.initialize(),t=o}),this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex()),this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth()}this.groupManager.table.externalEvents.dispatch("groupVisibilityChanged",this.getComponent(),!0)}_visSet(){var t=[];"function"==typeof this.visible&&(this.rows.forEach(function(e){t.push(e.getData())}),this.visible=this.visible(this.key,this.getRowCount(),t,this.getComponent()))}getRowGroup(t){var e=!1;return this.groupList.length?this.groupList.forEach(function(o){var a=o.getRowGroup(t);a&&(e=a)}):this.rows.find(function(o){return o===t})&&(e=this),e}getSubGroups(t){var e=[];return this.groupList.forEach(function(o){e.push(t?o.getComponent():o)}),e}getRows(t){var e=[];return this.rows.forEach(function(o){e.push(t?o.getComponent():o)}),e}generateGroupHeaderContents(){var t=[];for(this.rows.forEach(function(e){t.push(e.getData())}),this.elementContents=this.generator(this.key,this.getRowCount(),t,this.getComponent());this.element.firstChild;)this.element.removeChild(this.element.firstChild);"string"==typeof this.elementContents?this.element.innerHTML=this.elementContents:this.element.appendChild(this.elementContents),this.element.insertBefore(this.arrowElement,this.element.firstChild)}getPath(t=[]){return t.unshift(this.key),this.parent&&this.parent.getPath(t),t}getElement(){this.addBindingsd=!1,this._visSet(),this.visible?this.element.classList.add("tabulator-group-visible"):this.element.classList.remove("tabulator-group-visible");for(var t=0;t<this.element.childNodes.length;++t)this.element.childNodes[t].parentNode.removeChild(this.element.childNodes[t]);return this.generateGroupHeaderContents(),this.element}detachElement(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}normalizeHeight(){this.setHeight(this.element.clientHeight)}initialize(t){(!this.initialized||t)&&(this.normalizeHeight(),this.initialized=!0)}reinitialize(){this.initialized=!1,this.height=0,Jn.elVisible(this.element)&&this.initialize(!0)}setHeight(t){this.height!=t&&(this.height=t,this.outerHeight=this.element.offsetHeight)}getHeight(){return this.outerHeight}getGroup(){return this}reinitializeHeight(){}calcHeight(){}setCellHeight(){}clearCellHeight(){}deinitializeHeight(){}getComponent(){return this.component||(this.component=new A4(this)),this.component}}let O4=(()=>{class r extends Zi{constructor(e){super(e),this.groupIDLookups=!1,this.startOpen=[function(){return!1}],this.headerGenerator=[function(){return""}],this.groupList=[],this.allowedValues=!1,this.groups={},this.displayIndex=0,this.displayHandler=this.getRows.bind(this),this.registerTableOption("groupBy",!1),this.registerTableOption("groupStartOpen",!0),this.registerTableOption("groupValues",!1),this.registerTableOption("groupUpdateOnCellEdit",!1),this.registerTableOption("groupHeader",!1),this.registerTableOption("groupHeaderPrint",null),this.registerTableOption("groupHeaderClipboard",null),this.registerTableOption("groupHeaderHtmlOutput",null),this.registerTableOption("groupHeaderDownload",null),this.registerTableOption("groupToggleElement","arrow"),this.registerTableOption("groupClosedShowCalcs",!1),this.registerTableFunction("setGroupBy",this.setGroupBy.bind(this)),this.registerTableFunction("setGroupValues",this.setGroupValues.bind(this)),this.registerTableFunction("setGroupStartOpen",this.setGroupStartOpen.bind(this)),this.registerTableFunction("setGroupHeader",this.setGroupHeader.bind(this)),this.registerTableFunction("getGroups",this.userGetGroups.bind(this)),this.registerTableFunction("getGroupedData",this.userGetGroupedData.bind(this)),this.registerComponentFunction("row","getGroup",this.rowGetGroup.bind(this))}initialize(){this.table.options.groupBy&&(this.configureGroupSetup(),this.table.options.groupUpdateOnCellEdit&&(this.subscribe("cell-value-updated",this.cellUpdated.bind(this)),this.subscribe("row-data-changed",this.reassignRowToGroup.bind(this),0)),this.subscribe("row-deleting",this.rowDeleting.bind(this)),this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("scroll-horizontal",this.scrollHeaders.bind(this)),this.subscribe("rows-wipe",this.wipe.bind(this)),this.subscribe("rows-added",this.rowsUpdated.bind(this)),this.subscribe("row-moving",this.rowMoving.bind(this)),this.subscribe("row-adding-index",this.rowAddingIndex.bind(this)),this.subscribe("rows-sample",this.rowSample.bind(this)),this.subscribe("render-virtual-fill",this.virtualRenderFill.bind(this)),this.registerDisplayHandler(this.displayHandler,20),this.initialized=!0)}configureGroupSetup(){if(this.table.options.groupBy){var e=this.table.options.groupBy,o=this.table.options.groupStartOpen,a=this.table.options.groupHeader;this.allowedValues=this.table.options.groupValues,Array.isArray(e)&&Array.isArray(a)&&e.length>a.length&&console.warn("Error creating group headers, groupHeader array is shorter than groupBy array"),this.headerGenerator=[function(){return""}],this.startOpen=[function(){return!1}],this.langBind("groups|item",(d,p)=>{this.headerGenerator[0]=(g,v,E)=>(void 0===g?"":g)+"<span>("+v+" "+(1===v?d:p.groups.items)+")</span>"}),this.groupIDLookups=[],Array.isArray(e)||e?this.table.modExists("columnCalcs")&&"table"!=this.table.options.columnCalcs&&"both"!=this.table.options.columnCalcs&&this.table.modules.columnCalcs.removeCalcs():this.table.modExists("columnCalcs")&&"group"!=this.table.options.columnCalcs&&this.table.columnManager.getRealColumns().forEach(d=>{d.definition.topCalc&&this.table.modules.columnCalcs.initializeTopRow(),d.definition.bottomCalc&&this.table.modules.columnCalcs.initializeBottomRow()}),Array.isArray(e)||(e=[e]),e.forEach((d,p)=>{var g,v;g="function"==typeof d?d:(v=this.table.columnManager.getColumnByField(d))?function(E){return v.getFieldValue(E)}:function(E){return E[d]},this.groupIDLookups.push({field:"function"!=typeof d&&d,func:g,values:!!this.allowedValues&&this.allowedValues[p]})}),o&&(Array.isArray(o)||(o=[o]),o.forEach(d=>{}),this.startOpen=o),a&&(this.headerGenerator=Array.isArray(a)?a:[a])}}rowSample(e,o){var a=this.getGroups(!1)[0];return o.push(a.getRows(!1)[0]),o}virtualRenderFill(){var e=this.table.rowManager.tableElement,o=this.table.rowManager.getVisibleRows();o=o.filter(a=>"group"!==a.type),e.style.minWidth=o.length?"":this.table.columnManager.getWidth()+"px"}rowAddingIndex(e,o,a){this.assignRowToGroup(e);var c=e.modules.group.rows;return c.length>1&&(!o||o&&-1==c.indexOf(o)?a?c[0]!==e&&this.table.rowManager.moveRowInArray(e.modules.group.rows,e,o=c[0],!a):c[c.length-1]!==e&&this.table.rowManager.moveRowInArray(e.modules.group.rows,e,o=c[c.length-1],!a):this.table.rowManager.moveRowInArray(e.modules.group.rows,e,o,!a)),o}trackChanges(){this.dispatch("group-changed")}setGroupBy(e){this.table.options.groupBy=e,this.configureGroupSetup(),this.refreshData(),this.trackChanges()}setGroupValues(e){this.table.options.groupValues=e,this.configureGroupSetup(),this.refreshData(),this.trackChanges()}setGroupStartOpen(e){this.table.options.groupStartOpen=e,this.configureGroupSetup(),this.table.options.groupBy?(this.refreshData(),this.trackChanges()):console.warn("Grouping Update - cant refresh view, no groups have been set")}setGroupHeader(e){this.table.options.groupHeader=e,this.configureGroupSetup(),this.table.options.groupBy?(this.refreshData(),this.trackChanges()):console.warn("Grouping Update - cant refresh view, no groups have been set")}userGetGroups(e){return this.getGroups(!0)}userGetGroupedData(){return this.table.options.groupBy?this.getGroupedData():this.getData()}rowGetGroup(e){return!!e.modules.group&&e.modules.group.getComponent()}rowMoving(e,o,a){!a&&o instanceof Tp&&(o=this.table.rowManager.prevDisplayRow(e)||o);var c=o instanceof Tp?o:o.modules.group,d=e instanceof Tp?e:e.modules.group;c===d?this.table.rowManager.moveRowInArray(c.rows,e,o,a):(d&&d.removeRow(e),c.insertRow(e,o,a))}rowDeleting(e){e.modules.group&&e.modules.group.removeRow(e)}rowsUpdated(e){this.updateGroupRows(!0)}cellUpdated(e){this.reassignRowToGroup(e.row)}setDisplayIndex(e){this.displayIndex=e}getDisplayIndex(){return this.displayIndex}getRows(e){return this.table.options.groupBy&&this.groupIDLookups.length?(this.dispatchExternal("dataGrouping"),this.generateGroups(e),this.subscribedExternal("dataGrouped")&&this.dispatchExternal("dataGrouped",this.getGroups(!0)),this.updateGroupRows()):e.slice(0)}getGroups(e){var o=[];return this.groupList.forEach(function(a){o.push(e?a.getComponent():a)}),o}getChildGroups(e){var o=[];return e||(e=this),e.groupList.forEach(a=>{a.groupList.length?o=o.concat(this.getChildGroups(a)):o.push(a)}),o}wipe(){this.groupList.forEach(function(e){e.wipe()})}pullGroupListData(e){var o=[];return e.forEach(a=>{var c={level:0,rowCount:0,headerContent:""},d=[];a.hasSubGroups?(d=this.pullGroupListData(a.groupList),c.level=a.level,c.rowCount=d.length-a.groupList.length,c.headerContent=a.generator(a.key,c.rowCount,a.rows,a),o.push(c),o=o.concat(d)):(c.level=a.level,c.headerContent=a.generator(a.key,a.rows.length,a.rows,a),c.rowCount=a.getRows().length,o.push(c),a.getRows().forEach(p=>{o.push(p.getData("data"))}))}),o}getGroupedData(){return this.pullGroupListData(this.groupList)}getRowGroup(e){var o=!1;return this.groupList.forEach(a=>{var c=a.getRowGroup(e);c&&(o=c)}),o}countGroups(){return this.groupList.length}generateGroups(e){var o=this.groups;this.groups={},this.groupList=[],this.allowedValues&&this.allowedValues[0]?(this.allowedValues[0].forEach(a=>{this.createGroup(a,0,o)}),e.forEach(a=>{this.assignRowToExistingGroup(a,o)})):e.forEach(a=>{this.assignRowToGroup(a,o)})}createGroup(e,o,a){var d,c=o+"_"+e;d=new Tp(this,!1,o,e,this.groupIDLookups[0].field,this.headerGenerator[0],(a=a||[])[c]),this.groups[c]=d,this.groupList.push(d)}assignRowToExistingGroup(e,o){var c="0_"+this.groupIDLookups[0].func(e.getData());this.groups[c]&&this.groups[c].addRow(e)}assignRowToGroup(e,o){var a=this.groupIDLookups[0].func(e.getData()),c=!this.groups["0_"+a];return c&&this.createGroup(a,0,o),this.groups["0_"+a].addRow(e),!c}reassignRowToGroup(e){if("row"===e.type){var o=e.modules.group,a=o.getPath(),c=this.getExpectedPath(e);a.length==c.length&&a.every((p,g)=>p===c[g])||(o.removeRow(e),this.assignRowToGroup(e,this.groups),this.refreshData(!0))}}getExpectedPath(e){var o=[],a=e.getData();return this.groupIDLookups.forEach(c=>{o.push(c.func(a))}),o}updateGroupRows(e){var o=[];return this.groupList.forEach(a=>{o=o.concat(a.getHeadersAndRows())}),e&&this.refreshData(!0,this.displayHandler),o}scrollHeaders(e){"virtual"===this.table.options.renderHorizontal&&(e-=this.table.columnManager.renderer.vDomPadLeft),e+="px",this.groupList.forEach(o=>{o.scrollHeader(e)})}removeGroup(e){var a,o=e.level+"_"+e.key;this.groups[o]&&(delete this.groups[o],(a=this.groupList.indexOf(e))>-1&&this.groupList.splice(a,1))}}return r.moduleName="groupRows",r})();var k4={cellEdit:function(r){r.component.setValueProcessData(r.data.oldValue),r.component.cellRendered()},rowAdd:function(r){r.component.deleteActual()},rowDelete:function(r){var t=this.table.rowManager.addRowActual(r.data.data,r.data.pos,r.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(r.component,t)},rowMove:function(r){this.table.rowManager.moveRowActual(r.component,this.table.rowManager.rows[r.data.posFrom],!r.data.after),this.table.rowManager.redraw()}},N4={cellEdit:function(r){r.component.setValueProcessData(r.data.newValue),r.component.cellRendered()},rowAdd:function(r){var t=this.table.rowManager.addRowActual(r.data.data,r.data.pos,r.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(r.component,t)},rowDelete:function(r){r.component.deleteActual()},rowMove:function(r){this.table.rowManager.moveRowActual(r.component,this.table.rowManager.rows[r.data.posTo],r.data.after),this.table.rowManager.redraw()}};let P4=(()=>{class r extends Zi{constructor(e){super(e),this.history=[],this.index=-1,this.registerTableOption("history",!1)}initialize(){this.table.options.history&&(this.subscribe("cell-value-updated",this.cellUpdated.bind(this)),this.subscribe("cell-delete",this.clearComponentHistory.bind(this)),this.subscribe("row-delete",this.rowDeleted.bind(this)),this.subscribe("rows-wipe",this.clear.bind(this)),this.subscribe("row-added",this.rowAdded.bind(this)),this.subscribe("row-move",this.rowMoved.bind(this))),this.registerTableFunction("undo",this.undo.bind(this)),this.registerTableFunction("redo",this.redo.bind(this)),this.registerTableFunction("getHistoryUndoSize",this.getHistoryUndoSize.bind(this)),this.registerTableFunction("getHistoryRedoSize",this.getHistoryRedoSize.bind(this)),this.registerTableFunction("clearHistory",this.clear.bind(this))}rowMoved(e,o,a){this.action("rowMove",e,{posFrom:this.table.rowManager.getRowPosition(e),posTo:this.table.rowManager.getRowPosition(o),to:o,after:a})}rowAdded(e,o,a,c){this.action("rowAdd",e,{data:o,pos:a,index:c})}rowDeleted(e){var o,a;this.table.options.groupBy?(o=(a=e.getComponent().getGroup().rows).indexOf(e))&&(o=a[o-1]):(o=e.table.rowManager.getRowIndex(e))&&(o=e.table.rowManager.rows[o-1]),this.action("rowDelete",e,{data:e.getData(),pos:!o,index:o})}cellUpdated(e){this.action("cellEdit",e,{oldValue:e.oldValue,newValue:e.value})}clear(){this.history=[],this.index=-1}action(e,o,a){this.history=this.history.slice(0,this.index+1),this.history.push({type:e,component:o,data:a}),this.index++}getHistoryUndoSize(){return this.index+1}getHistoryRedoSize(){return this.history.length-(this.index+1)}clearComponentHistory(e){var o=this.history.findIndex(function(a){return a.component===e});o>-1&&(this.history.splice(o,1),o<=this.index&&this.index--,this.clearComponentHistory(e))}undo(){if(this.index>-1){let e=this.history[this.index];return r.undoers[e.type].call(this,e),this.index--,this.dispatchExternal("historyUndo",e.type,e.component.getComponent(),e.data),!0}return console.warn("History Undo Error - No more history to undo"),!1}redo(){if(this.history.length-1>this.index){this.index++;let e=this.history[this.index];return r.redoers[e.type].call(this,e),this.dispatchExternal("historyRedo",e.type,e.component.getComponent(),e.data),!0}return console.warn("History Redo Error - No more history to redo"),!1}_rebindRow(e,o){this.history.forEach(function(a){if(a.component instanceof Zo)a.component===e&&(a.component=o);else if(a.component instanceof dv&&a.component.row===e){var c=a.component.column.getField();c&&(a.component=o.getCell(c))}})}}return r.moduleName="history",r.undoers=k4,r.redoers=N4,r})(),L4=(()=>{class r extends Zi{constructor(e){super(e),this.fieldIndex=[],this.hasIndex=!1}initialize(){this.tableElementCheck()}tableElementCheck(){this.table.originalElement&&"TABLE"===this.table.originalElement.tagName&&this.parseTable()}parseTable(){var e=this.table.originalElement,o=this.table.options,c=e.getElementsByTagName("th"),d=e.getElementsByTagName("tbody")[0],p=[];this.hasIndex=!1,this.dispatchExternal("htmlImporting"),d=d?d.getElementsByTagName("tr"):[],this._extractOptions(e,o),c.length?this._extractHeaders(c,d):this._generateBlankHeaders(c,d);for(var g=0;g<d.length;g++){var E=d[g].getElementsByTagName("td"),D={};this.hasIndex||(D[o.index]=g);for(var x=0;x<E.length;x++)void 0!==this.fieldIndex[x]&&(D[this.fieldIndex[x]]=E[x].innerHTML);p.push(D)}o.data=p,this.dispatchExternal("htmlImported")}_extractOptions(e,o,a){var c=e.attributes,d=a?Object.assign([],a):Object.keys(o),p={};for(var g in d.forEach(D=>{p[D.toLowerCase()]=D}),c){var E,v=c[g];v&&"object"==typeof v&&v.name&&0===v.name.indexOf("tabulator-")&&(E=v.name.replace("tabulator-",""),void 0!==p[E]&&(o[p[E]]=this._attribValue(v.value)))}}_attribValue(e){return"true"===e||"false"!==e&&e}_findCol(e){return this.table.options.columns.find(a=>a.title===e)||!1}_extractHeaders(e,o){for(var a=0;a<e.length;a++){var g,c=e[a],d=!1,p=this._findCol(c.textContent);p?d=!0:p={title:c.textContent.trim()},p.field||(p.field=c.textContent.trim().toLowerCase().replace(" ","_")),(g=c.getAttribute("width"))&&!p.width&&(p.width=g),this._extractOptions(c,p,Ig.prototype.defaultOptionList),this.fieldIndex[a]=p.field,p.field==this.table.options.index&&(this.hasIndex=!0),d||this.table.options.columns.push(p)}}_generateBlankHeaders(e,o){for(var a=0;a<e.length;a++){var c=e[a],d={title:"",field:"col"+a};this.fieldIndex[a]=d.field;var p=c.getAttribute("width");p&&(d.width=p),this.table.options.columns.push(d)}}}return r.moduleName="htmlTableImport",r})(),F4=(()=>{class r extends Zi{constructor(e){super(e),this.eventMap={rowClick:"row-click",rowDblClick:"row-dblclick",rowContext:"row-contextmenu",rowMouseEnter:"row-mouseenter",rowMouseLeave:"row-mouseleave",rowMouseOver:"row-mouseover",rowMouseOut:"row-mouseout",rowMouseMove:"row-mousemove",rowTap:"row",rowDblTap:"row",rowTapHold:"row",cellClick:"cell-click",cellDblClick:"cell-dblclick",cellContext:"cell-contextmenu",cellMouseEnter:"cell-mouseenter",cellMouseLeave:"cell-mouseleave",cellMouseOver:"cell-mouseover",cellMouseOut:"cell-mouseout",cellMouseMove:"cell-mousemove",cellTap:"cell",cellDblTap:"cell",cellTapHold:"cell",headerClick:"column-click",headerDblClick:"column-dblclick",headerContext:"column-contextmenu",headerMouseEnter:"column-mouseenter",headerMouseLeave:"column-mouseleave",headerMouseOver:"column-mouseover",headerMouseOut:"column-mouseout",headerMouseMove:"column-mousemove",headerTap:"column",headerDblTap:"column",headerTapHold:"column",groupClick:"group-click",groupDblClick:"group-dblclick",groupContext:"group-contextmenu",groupMouseEnter:"group-mouseenter",groupMouseLeave:"group-mouseleave",groupMouseOver:"group-mouseover",groupMouseOut:"group-mouseout",groupMouseMove:"group-mousemove",groupTap:"group",groupDblTap:"group",groupTapHold:"group"},this.subscribers={},this.touchSubscribers={},this.columnSubscribers={},this.touchWatchers={row:{tap:null,tapDbl:null,tapHold:null},cell:{tap:null,tapDbl:null,tapHold:null},column:{tap:null,tapDbl:null,tapHold:null}},this.registerColumnOption("headerClick"),this.registerColumnOption("headerDblClick"),this.registerColumnOption("headerContext"),this.registerColumnOption("headerMouseEnter"),this.registerColumnOption("headerMouseLeave"),this.registerColumnOption("headerMouseOver"),this.registerColumnOption("headerMouseOut"),this.registerColumnOption("headerMouseMove"),this.registerColumnOption("headerTap"),this.registerColumnOption("headerDblTap"),this.registerColumnOption("headerTapHold"),this.registerColumnOption("cellClick"),this.registerColumnOption("cellDblClick"),this.registerColumnOption("cellContext"),this.registerColumnOption("cellMouseEnter"),this.registerColumnOption("cellMouseLeave"),this.registerColumnOption("cellMouseOver"),this.registerColumnOption("cellMouseOut"),this.registerColumnOption("cellMouseMove"),this.registerColumnOption("cellTap"),this.registerColumnOption("cellDblTap"),this.registerColumnOption("cellTapHold")}initialize(){this.initializeExternalEvents(),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("cell-dblclick",this.cellContentsSelectionFixer.bind(this))}cellContentsSelectionFixer(e,o){if(!this.table.modExists("edit")||this.table.modules.edit.currentCell!==this){e.preventDefault();try{if(document.selection)(a=document.body.createTextRange()).moveToElementText(this.element),a.select();else if(window.getSelection){var a;(a=document.createRange()).selectNode(this.element),window.getSelection().removeAllRanges(),window.getSelection().addRange(a)}}catch(c){}}}initializeExternalEvents(){for(let e in this.eventMap)this.subscriptionChangeExternal(e,this.subscriptionChanged.bind(this,e))}subscriptionChanged(e,o){o?this.subscribers[e]||(this.eventMap[e].includes("-")?(this.subscribers[e]=this.handle.bind(this,e),this.subscribe(this.eventMap[e],this.subscribers[e])):this.subscribeTouchEvents(e)):this.eventMap[e].includes("-")?this.subscribers[e]&&!this.columnSubscribers[e]&&!this.subscribedExternal(e)&&(this.unsubscribe(this.eventMap[e],this.subscribers[e]),delete this.subscribers[e]):this.unsubscribeTouchEvents(e)}subscribeTouchEvents(e){var o=this.eventMap[e];this.touchSubscribers[o+"-touchstart"]||(this.touchSubscribers[o+"-touchstart"]=this.handleTouch.bind(this,o,"start"),this.touchSubscribers[o+"-touchend"]=this.handleTouch.bind(this,o,"end"),this.subscribe(o+"-touchstart",this.touchSubscribers[o+"-touchstart"]),this.subscribe(o+"-touchend",this.touchSubscribers[o+"-touchend"])),this.subscribers[e]=!0}unsubscribeTouchEvents(e){var o=!0,a=this.eventMap[e];if(this.subscribers[e]&&!this.subscribedExternal(e)){delete this.subscribers[e];for(let c in this.eventMap)this.eventMap[c]===a&&this.subscribers[c]&&(o=!1);o&&(this.unsubscribe(a+"-touchstart",this.touchSubscribers[a+"-touchstart"]),this.unsubscribe(a+"-touchend",this.touchSubscribers[a+"-touchend"]),delete this.touchSubscribers[a+"-touchstart"],delete this.touchSubscribers[a+"-touchend"])}}initializeColumn(e){var o=e.definition;for(let a in this.eventMap)o[a]&&(this.subscriptionChanged(a,!0),this.columnSubscribers[a]||(this.columnSubscribers[a]=[]),this.columnSubscribers[a].push(e))}handle(e,o,a){this.dispatchEvent(e,o,a)}handleTouch(e,o,a,c){var d=this.touchWatchers[e];switch("column"===e&&(e="header"),o){case"start":d.tap=!0,clearTimeout(d.tapHold),d.tapHold=setTimeout(()=>{clearTimeout(d.tapHold),d.tapHold=null,d.tap=null,clearTimeout(d.tapDbl),d.tapDbl=null,this.dispatchEvent(e+"TapHold",a,c)},1e3);break;case"end":d.tap&&(d.tap=null,this.dispatchEvent(e+"Tap",a,c)),d.tapDbl?(clearTimeout(d.tapDbl),d.tapDbl=null,this.dispatchEvent(e+"DblTap",a,c)):d.tapDbl=setTimeout(()=>{clearTimeout(d.tapDbl),d.tapDbl=null},300),clearTimeout(d.tapHold),d.tapHold=null}}dispatchEvent(e,o,a){var d,c=a.getComponent();this.columnSubscribers[e]&&(a instanceof dv?d=a.column.definition[e]:a instanceof Ig&&(d=a.definition[e]),d&&d(o,c)),this.dispatchExternal(e,o,c)}}return r.moduleName="interaction",r})();var B4={navPrev:"shift + 9",navNext:9,navUp:38,navDown:40,scrollPageUp:33,scrollPageDown:34,scrollToStart:36,scrollToEnd:35,undo:"ctrl + 90",redo:"ctrl + 89",copyToClipboard:"ctrl + 67"},V4={keyBlock:function(r){r.stopPropagation(),r.preventDefault()},scrollPageUp:function(r){var t=this.table.rowManager,e=t.scrollTop-t.element.clientHeight;r.preventDefault(),t.displayRowsCount&&(e>=0?t.element.scrollTop=e:t.scrollToRow(t.getDisplayRows()[0])),this.table.element.focus()},scrollPageDown:function(r){var t=this.table.rowManager,e=t.scrollTop+t.element.clientHeight,o=t.element.scrollHeight;r.preventDefault(),t.displayRowsCount&&(e<=o?t.element.scrollTop=e:t.scrollToRow(t.getDisplayRows()[t.displayRowsCount-1])),this.table.element.focus()},scrollToStart:function(r){var t=this.table.rowManager;r.preventDefault(),t.displayRowsCount&&t.scrollToRow(t.getDisplayRows()[0]),this.table.element.focus()},scrollToEnd:function(r){var t=this.table.rowManager;r.preventDefault(),t.displayRowsCount&&t.scrollToRow(t.getDisplayRows()[t.displayRowsCount-1]),this.table.element.focus()},navPrev:function(r){this.dispatch("keybinding-nav-prev",r)},navNext:function(r){this.dispatch("keybinding-nav-next",r)},navLeft:function(r){this.dispatch("keybinding-nav-left",r)},navRight:function(r){this.dispatch("keybinding-nav-right",r)},navUp:function(r){this.dispatch("keybinding-nav-up",r)},navDown:function(r){this.dispatch("keybinding-nav-down",r)},undo:function(r){this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(this.table.modules.edit.currentCell||(r.preventDefault(),this.table.modules.history.undo()))},redo:function(r){this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(this.table.modules.edit.currentCell||(r.preventDefault(),this.table.modules.history.redo()))},copyToClipboard:function(r){this.table.modules.edit.currentCell||this.table.modExists("clipboard",!0)&&this.table.modules.clipboard.copy(!1,!0)}};let H4=(()=>{class r extends Zi{constructor(e){super(e),this.watchKeys=null,this.pressedKeys=null,this.keyupBinding=!1,this.keydownBinding=!1,this.registerTableOption("keybindings",[]),this.registerTableOption("tabEndNewRow",!1)}initialize(){var e=this.table.options.keybindings,o={};if(this.watchKeys={},this.pressedKeys=[],!1!==e){for(let a in r.bindings)o[a]=r.bindings[a];if(Object.keys(e).length)for(let a in e)o[a]=e[a];this.mapBindings(o),this.bindEvents()}this.subscribe("table-destroy",this.clearBindings.bind(this))}mapBindings(e){for(let o in e)r.actions[o]?e[o]&&("object"!=typeof e[o]&&(e[o]=[e[o]]),e[o].forEach(a=>{this.mapBinding(o,a)})):console.warn("Key Binding Error - no such action:",o)}mapBinding(e,o){var a={action:r.actions[e],keys:[],ctrl:!1,shift:!1,meta:!1};o.toString().toLowerCase().split(" ").join("").split("+").forEach(d=>{switch(d){case"ctrl":a.ctrl=!0;break;case"shift":a.shift=!0;break;case"meta":a.meta=!0;break;default:d=parseInt(d),a.keys.push(d),this.watchKeys[d]||(this.watchKeys[d]=[]),this.watchKeys[d].push(a)}})}bindEvents(){var e=this;this.keyupBinding=function(o){var a=o.keyCode,c=e.watchKeys[a];c&&(e.pressedKeys.push(a),c.forEach(function(d){e.checkBinding(o,d)}))},this.keydownBinding=function(o){var a=o.keyCode;if(e.watchKeys[a]){var d=e.pressedKeys.indexOf(a);d>-1&&e.pressedKeys.splice(d,1)}},this.table.element.addEventListener("keydown",this.keyupBinding),this.table.element.addEventListener("keyup",this.keydownBinding)}clearBindings(){this.keyupBinding&&this.table.element.removeEventListener("keydown",this.keyupBinding),this.keydownBinding&&this.table.element.removeEventListener("keyup",this.keydownBinding)}checkBinding(e,o){var a=!0;return e.ctrlKey==o.ctrl&&e.shiftKey==o.shift&&e.metaKey==o.meta&&(o.keys.forEach(c=>{-1==this.pressedKeys.indexOf(c)&&(a=!1)}),a&&o.action.call(this,e),!0)}}return r.moduleName="keybindings",r.bindings=B4,r.actions=V4,r})(),U4=(()=>{class r extends Zi{constructor(e){super(e),this.menuElements=[],this.blurEvent=this.hideMenu.bind(this),this.escEvent=this.escMenu.bind(this),this.nestedMenuBlock=!1,this.positionReversedX=!1,this.registerTableOption("rowContextMenu",!1),this.registerTableOption("rowClickMenu",!1),this.registerTableOption("groupContextMenu",!1),this.registerTableOption("groupClickMenu",!1),this.registerColumnOption("headerContextMenu"),this.registerColumnOption("headerMenu"),this.registerColumnOption("contextMenu"),this.registerColumnOption("clickMenu")}initialize(){this.subscribe("cell-layout",this.layoutCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("row-init",this.initializeRow.bind(this))}layoutCell(e){(e.column.definition.contextMenu||e.column.definition.clickMenu)&&this.initializeCell(e)}initializeColumn(e){var o=e.definition;(o.headerContextMenu||o.headerClickMenu||o.headerMenu)&&this.initializeColumnHeader(e)}initializeColumnHeader(e){var o;e.definition.headerContextMenu&&(e.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,e,e.definition.headerContextMenu)),this.tapHold(e,e.definition.headerContextMenu)),e.definition.headerMenu&&((o=document.createElement("span")).classList.add("tabulator-header-menu-button"),o.innerHTML="&vellip;",o.addEventListener("click",a=>{a.stopPropagation(),a.preventDefault(),this.LoadMenuEvent(e,e.definition.headerMenu,a)}),e.titleElement.insertBefore(o,e.titleElement.firstChild))}LoadMenuEvent(e,o,a){o="function"==typeof o?o.call(this.table,e.getComponent(),a):o,this.loadMenu(a,e,o)}tapHold(e,o){var a=e.getElement(),c=null,d=!1;a.addEventListener("touchstart",p=>{clearTimeout(c),d=!1,c=setTimeout(()=>{clearTimeout(c),c=null,d=!0,this.LoadMenuEvent(e,o,p)},1e3)},{passive:!0}),a.addEventListener("touchend",p=>{clearTimeout(c),c=null,d&&p.preventDefault()})}initializeCell(e){e.column.definition.contextMenu&&(e.getElement(!0).addEventListener("contextmenu",this.LoadMenuEvent.bind(this,e,e.column.definition.contextMenu)),this.tapHold(e,e.column.definition.contextMenu)),e.column.definition.clickMenu&&e.getElement(!0).addEventListener("click",this.LoadMenuEvent.bind(this,e,e.column.definition.clickMenu))}initializeRow(e){this.table.options.rowContextMenu&&(e.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,e,this.table.options.rowContextMenu)),this.tapHold(e,this.table.options.rowContextMenu)),this.table.options.rowClickMenu&&e.getElement().addEventListener("click",this.LoadMenuEvent.bind(this,e,this.table.options.rowClickMenu))}initializeGroup(e){this.table.options.groupContextMenu&&(e.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,e,this.table.options.groupContextMenu)),this.tapHold(e,this.table.options.groupContextMenu)),this.table.options.groupClickMenu&&e.getElement().addEventListener("click",this.LoadMenuEvent.bind(this,e,this.table.options.groupClickMenu))}loadMenu(e,o,a,c){var d=!(e instanceof MouseEvent),p=document.createElement("div");if(p.classList.add("tabulator-menu"),d||e.preventDefault(),a&&a.length){if(!c){if(this.nestedMenuBlock){if(this.isOpen())return}else this.nestedMenuBlock=setTimeout(()=>{this.nestedMenuBlock=!1},100);this.hideMenu(),this.menuElements=[]}a.forEach(g=>{var v=document.createElement("div"),E=g.label,D=g.disabled;g.separator?v.classList.add("tabulator-menu-separator"):(v.classList.add("tabulator-menu-item"),"function"==typeof E&&(E=E.call(this.table,o.getComponent())),E instanceof Node?v.appendChild(E):v.innerHTML=E,"function"==typeof D&&(D=D.call(this.table,o.getComponent())),D?(v.classList.add("tabulator-menu-item-disabled"),v.addEventListener("click",x=>{x.stopPropagation()})):g.menu&&g.menu.length?v.addEventListener("click",x=>{x.stopPropagation(),this.hideOldSubMenus(p),this.loadMenu(x,o,g.menu,v)}):g.action&&v.addEventListener("click",x=>{g.action(x,o.getComponent())}),g.menu&&g.menu.length&&v.classList.add("tabulator-menu-item-submenu")),p.appendChild(v)}),p.addEventListener("click",g=>{this.hideMenu()}),this.menuElements.push(p),this.positionMenu(p,c,d,e)}}hideOldSubMenus(e){var o=this.menuElements.indexOf(e);if(o>-1)for(let c=this.menuElements.length-1;c>o;c--){var a=this.menuElements[c];a.parentNode&&a.parentNode.removeChild(a),this.menuElements.pop()}}positionMenu(e,o,a,c){var p,g,v,d=Math.max(document.body.offsetHeight,window.innerHeight);o?(p=(v=Jn.elOffset(o)).left+o.offsetWidth,g=v.top-1):(p=a?c.touches[0].pageX:c.pageX,g=a?c.touches[0].pageY:c.pageY,this.positionReversedX=!1),e.style.top=g+"px",e.style.left=p+"px",setTimeout(()=>{this.table.rowManager.element.addEventListener("scroll",this.blurEvent),document.body.addEventListener("click",this.blurEvent),document.body.addEventListener("contextmenu",this.blurEvent),window.addEventListener("resize",this.blurEvent),document.body.addEventListener("keydown",this.escEvent)},100),document.body.appendChild(e),g+e.offsetHeight>=d&&(e.style.top="",e.style.bottom=o?d-v.top-o.offsetHeight-1+"px":d-g+"px"),(p+e.offsetWidth>=document.body.offsetWidth||this.positionReversedX)&&(e.style.left="",e.style.right=o?document.documentElement.offsetWidth-v.left+"px":document.documentElement.offsetWidth-p+"px",this.positionReversedX=!0)}isOpen(){return!!this.menuElements.length}escMenu(e){27==e.keyCode&&this.hideMenu()}hideMenu(){this.menuElements.forEach(e=>{e.parentNode&&e.parentNode.removeChild(e)}),document.body.removeEventListener("keydown",this.escEvent),document.body.removeEventListener("click",this.blurEvent),document.body.removeEventListener("contextmenu",this.blurEvent),window.removeEventListener("resize",this.blurEvent),this.table.rowManager.element.removeEventListener("scroll",this.blurEvent)}}return r.moduleName="menu",r})(),G4=(()=>{class r extends Zi{constructor(e){super(e),this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=250,this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.startX=0,this.autoScrollMargin=40,this.autoScrollStep=5,this.autoScrollTimeout=!1,this.touchMove=!1,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.registerTableOption("movableColumns",!1)}createPlaceholderElement(){var e=document.createElement("div");return e.classList.add("tabulator-col"),e.classList.add("tabulator-col-placeholder"),e}initialize(){this.subscribe("column-init",this.initializeColumn.bind(this))}initializeColumn(e){var c,o=this,a={};e.modules.frozen||(c=e.getElement(),a.mousemove=function(d){e.parent===o.moving.parent&&((o.touchMove?d.touches[0].pageX:d.pageX)-Jn.elOffset(c).left+o.table.columnManager.element.scrollLeft>e.getWidth()/2?(o.toCol!==e||!o.toColAfter)&&(c.parentNode.insertBefore(o.placeholderElement,c.nextSibling),o.moveColumn(e,!0)):(o.toCol!==e||o.toColAfter)&&(c.parentNode.insertBefore(o.placeholderElement,c),o.moveColumn(e,!1)))}.bind(o),c.addEventListener("mousedown",function(d){o.touchMove=!1,1===d.which&&(o.checkTimeout=setTimeout(function(){o.startMove(d,e)},o.checkPeriod))}),c.addEventListener("mouseup",function(d){1===d.which&&o.checkTimeout&&clearTimeout(o.checkTimeout)}),o.bindTouchEvents(e)),e.modules.moveColumn=a}bindTouchEvents(e){var c,d,p,g,v,E,o=e.getElement(),a=!1;o.addEventListener("touchstart",D=>{this.checkTimeout=setTimeout(()=>{this.touchMove=!0,c=e.nextColumn(),p=c?c.getWidth()/2:0,d=e.prevColumn(),g=d?d.getWidth()/2:0,v=0,E=0,a=!1,this.startMove(D,e)},this.checkPeriod)},{passive:!0}),o.addEventListener("touchmove",D=>{var x,L;this.moving&&(this.moveHover(D),a||(a=D.touches[0].pageX),(x=D.touches[0].pageX-a)>0?c&&x-v>p&&(L=c)!==e&&(a=D.touches[0].pageX,L.getElement().parentNode.insertBefore(this.placeholderElement,L.getElement().nextSibling),this.moveColumn(L,!0)):d&&-x-E>g&&(L=d)!==e&&(a=D.touches[0].pageX,L.getElement().parentNode.insertBefore(this.placeholderElement,L.getElement()),this.moveColumn(L,!1)),L&&(c=L.nextColumn(),v=p,p=c?c.getWidth()/2:0,d=L.prevColumn(),E=g,g=d?d.getWidth()/2:0))},{passive:!0}),o.addEventListener("touchend",D=>{this.checkTimeout&&clearTimeout(this.checkTimeout),this.moving&&this.endMove(D)})}startMove(e,o){var a=o.getElement(),c=this.table.columnManager.getElement(),d=this.table.columnManager.getHeadersElement();this.moving=o,this.startX=(this.touchMove?e.touches[0].pageX:e.pageX)-Jn.elOffset(a).left,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=o.getWidth()+"px",this.placeholderElement.style.height=o.getHeight()+"px",a.parentNode.insertBefore(this.placeholderElement,a),a.parentNode.removeChild(a),this.hoverElement=a.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.table.columnManager.getElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.bottom=c.clientHeight-d.offsetHeight+"px",this.touchMove||(this._bindMouseMove(),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove)),this.moveHover(e)}_bindMouseMove(){this.table.columnManager.columnsByIndex.forEach(function(e){e.modules.moveColumn.mousemove&&e.getElement().addEventListener("mousemove",e.modules.moveColumn.mousemove)})}_unbindMouseMove(){this.table.columnManager.columnsByIndex.forEach(function(e){e.modules.moveColumn.mousemove&&e.getElement().removeEventListener("mousemove",e.modules.moveColumn.mousemove)})}moveColumn(e,o){var a=this.moving.getCells();this.toCol=e,this.toColAfter=o,o?e.getCells().forEach(function(c,d){var p=c.getElement(!0);p.parentNode&&a[d]&&p.parentNode.insertBefore(a[d].getElement(),p.nextSibling)}):e.getCells().forEach(function(c,d){var p=c.getElement(!0);p.parentNode&&a[d]&&p.parentNode.insertBefore(a[d].getElement(),p)})}endMove(e){(1===e.which||this.touchMove)&&(this._unbindMouseMove(),this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toCol&&this.table.columnManager.moveColumnActual(this.moving,this.toCol,this.toColAfter),this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.touchMove||(document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove)))}moveHover(e){var d,o=this.table.columnManager.getElement(),a=o.scrollLeft,c=(this.touchMove?e.touches[0].pageX:e.pageX)-Jn.elOffset(o).left+a;this.hoverElement.style.left=c-this.startX+"px",c-a<this.autoScrollMargin&&(this.autoScrollTimeout||(this.autoScrollTimeout=setTimeout(()=>{d=Math.max(0,a-5),this.table.rowManager.getElement().scrollLeft=d,this.autoScrollTimeout=!1},1))),a+o.clientWidth-c<this.autoScrollMargin&&(this.autoScrollTimeout||(this.autoScrollTimeout=setTimeout(()=>{d=Math.min(o.clientWidth,a+5),this.table.rowManager.getElement().scrollLeft=d,this.autoScrollTimeout=!1},1)))}}return r.moduleName="moveColumn",r})();class pv extends Zi{constructor(t){super(t),this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=150,this.moving=!1,this.toRow=!1,this.toRowAfter=!1,this.hasHandle=!1,this.startY=0,this.startX=0,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.tableRowDropEvent=!1,this.touchMove=!1,this.connection=!1,this.connectionSelectorsTables=!1,this.connectionSelectorsElements=!1,this.connectionElements=[],this.connections=[],this.connectedTable=!1,this.connectedRow=!1,this.registerTableOption("movableRows",!1),this.registerTableOption("movableRowsConnectedTables",!1),this.registerTableOption("movableRowsConnectedElements",!1),this.registerTableOption("movableRowsSender",!1),this.registerTableOption("movableRowsReceiver","insert"),this.registerColumnOption("rowHandle")}createPlaceholderElement(){var t=document.createElement("div");return t.classList.add("tabulator-row"),t.classList.add("tabulator-row-placeholder"),t}initialize(){this.table.options.movableRows&&(this.connectionSelectorsTables=this.table.options.movableRowsConnectedTables,this.connectionSelectorsElements=this.table.options.movableRowsConnectedElements,this.connection=this.connectionSelectorsTables||this.connectionSelectorsElements,this.subscribe("cell-init",this.initializeCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("row-init",this.initializeRow.bind(this)))}initializeGroupHeader(t){var e=this,o={};o.mouseup=function(a){e.tableRowDrop(a,row)}.bind(e),o.mousemove=function(a){if(a.pageY-Jn.elOffset(t.element).top+e.table.rowManager.element.scrollTop>t.getHeight()/2)e.toRow===t&&e.toRowAfter||((c=t.getElement()).parentNode.insertBefore(e.placeholderElement,c.nextSibling),e.moveRow(t,!0));else if(e.toRow!==t||e.toRowAfter){var c;(c=t.getElement()).previousSibling&&(c.parentNode.insertBefore(e.placeholderElement,c),e.moveRow(t,!1))}}.bind(e),t.modules.moveRow=o}initializeRow(t){var a,e=this,o={};o.mouseup=function(c){e.tableRowDrop(c,t)}.bind(e),o.mousemove=function(c){var d=t.getElement();c.pageY-Jn.elOffset(d).top+e.table.rowManager.element.scrollTop>t.getHeight()/2?(e.toRow!==t||!e.toRowAfter)&&(d.parentNode.insertBefore(e.placeholderElement,d.nextSibling),e.moveRow(t,!0)):(e.toRow!==t||e.toRowAfter)&&(d.parentNode.insertBefore(e.placeholderElement,d),e.moveRow(t,!1))}.bind(e),this.hasHandle||((a=t.getElement()).addEventListener("mousedown",function(c){1===c.which&&(e.checkTimeout=setTimeout(function(){e.startMove(c,t)},e.checkPeriod))}),a.addEventListener("mouseup",function(c){1===c.which&&e.checkTimeout&&clearTimeout(e.checkTimeout)}),this.bindTouchEvents(t,t.getElement())),t.modules.moveRow=o}initializeColumn(t){t.definition.rowHandle&&!1!==this.table.options.movableRows&&(this.hasHandle=!0)}initializeCell(t){if(t.column.definition.rowHandle&&!1!==this.table.options.movableRows){var e=this,o=t.getElement(!0);o.addEventListener("mousedown",function(a){1===a.which&&(e.checkTimeout=setTimeout(function(){e.startMove(a,t.row)},e.checkPeriod))}),o.addEventListener("mouseup",function(a){1===a.which&&e.checkTimeout&&clearTimeout(e.checkTimeout)}),this.bindTouchEvents(t.row,o)}}bindTouchEvents(t,e){var a,c,d,p,g,v,o=!1;e.addEventListener("touchstart",E=>{this.checkTimeout=setTimeout(()=>{this.touchMove=!0,a=t.nextRow(),d=a?a.getHeight()/2:0,c=t.prevRow(),p=c?c.getHeight()/2:0,g=0,v=0,o=!1,this.startMove(E,t)},this.checkPeriod)},{passive:!0}),e.addEventListener("touchmove",E=>{var D,x;this.moving&&(E.preventDefault(),this.moveHover(E),o||(o=E.touches[0].pageY),(D=E.touches[0].pageY-o)>0?a&&D-g>d&&(x=a)!==t&&(o=E.touches[0].pageY,x.getElement().parentNode.insertBefore(this.placeholderElement,x.getElement().nextSibling),this.moveRow(x,!0)):c&&-D-v>p&&(x=c)!==t&&(o=E.touches[0].pageY,x.getElement().parentNode.insertBefore(this.placeholderElement,x.getElement()),this.moveRow(x,!1)),x&&(a=x.nextRow(),g=d,d=a?a.getHeight()/2:0,c=x.prevRow(),v=p,p=c?c.getHeight()/2:0))}),e.addEventListener("touchend",E=>{this.checkTimeout&&clearTimeout(this.checkTimeout),this.moving&&(this.endMove(E),this.touchMove=!1)})}_bindMouseMove(){this.table.rowManager.getDisplayRows().forEach(t=>{("row"===t.type||"group"===t.type)&&t.modules.moveRow&&t.modules.moveRow.mousemove&&t.getElement().addEventListener("mousemove",t.modules.moveRow.mousemove)})}_unbindMouseMove(){this.table.rowManager.getDisplayRows().forEach(t=>{("row"===t.type||"group"===t.type)&&t.modules.moveRow&&t.modules.moveRow.mousemove&&t.getElement().removeEventListener("mousemove",t.modules.moveRow.mousemove)})}startMove(t,e){var o=e.getElement();this.setStartPosition(t,e),this.moving=e,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=e.getWidth()+"px",this.placeholderElement.style.height=e.getHeight()+"px",this.connection?(this.table.element.classList.add("tabulator-movingrow-sending"),this.connectToTables(e)):(o.parentNode.insertBefore(this.placeholderElement,o),o.parentNode.removeChild(o)),this.hoverElement=o.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.connection?(document.body.appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this.hoverElement.style.width=this.table.element.clientWidth+"px",this.hoverElement.style.whiteSpace="nowrap",this.hoverElement.style.overflow="hidden",this.hoverElement.style.pointerEvents="none"):(this.table.rowManager.getTableElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this._bindMouseMove()),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove),this.moveHover(t)}setStartPosition(t,e){var c,d,o=this.touchMove?t.touches[0].pageX:t.pageX,a=this.touchMove?t.touches[0].pageY:t.pageY;c=e.getElement(),this.connection?(d=c.getBoundingClientRect(),this.startX=d.left-o+window.pageXOffset,this.startY=d.top-a+window.pageYOffset):this.startY=a-c.getBoundingClientRect().top}endMove(t){(!t||1===t.which||this.touchMove)&&(this._unbindMouseMove(),this.connection||(this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement)),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toRow&&this.table.rowManager.moveRow(this.moving,this.toRow,this.toRowAfter),this.moving=!1,this.toRow=!1,this.toRowAfter=!1,document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove),this.connection&&(this.table.element.classList.remove("tabulator-movingrow-sending"),this.disconnectFromTables()))}moveRow(t,e){this.toRow=t,this.toRowAfter=e}moveHover(t){this.connection?this.moveHoverConnections.call(this,t):this.moveHoverTable.call(this,t)}moveHoverTable(t){var e=this.table.rowManager.getElement(),o=e.scrollTop,a=(this.touchMove?t.touches[0].pageY:t.pageY)-e.getBoundingClientRect().top+o;this.hoverElement.style.top=a-this.startY+"px"}moveHoverConnections(t){this.hoverElement.style.left=this.startX+(this.touchMove?t.touches[0].pageX:t.pageX)+"px",this.hoverElement.style.top=this.startY+(this.touchMove?t.touches[0].pageY:t.pageY)+"px"}elementRowDrop(t,e,o){this.dispatchExternal("movableRowsElementDrop",t,e,!!o&&o.getComponent())}connectToTables(t){var e;this.connectionSelectorsTables&&(e=this.commsConnections(this.connectionSelectorsTables),this.dispatchExternal("movableRowsSendingStart",e),this.commsSend(this.connectionSelectorsTables,"moveRow","connect",{row:t})),this.connectionSelectorsElements&&(this.connectionElements=[],Array.isArray(this.connectionSelectorsElements)||(this.connectionSelectorsElements=[this.connectionSelectorsElements]),this.connectionSelectorsElements.forEach(o=>{"string"==typeof o?this.connectionElements=this.connectionElements.concat(Array.prototype.slice.call(document.querySelectorAll(o))):this.connectionElements.push(o)}),this.connectionElements.forEach(o=>{var a=c=>{this.elementRowDrop(c,o,this.moving)};o.addEventListener("mouseup",a),o.tabulatorElementDropEvent=a,o.classList.add("tabulator-movingrow-receiving")}))}disconnectFromTables(){var t;this.connectionSelectorsTables&&(t=this.commsConnections(this.connectionSelectorsTables),this.dispatchExternal("movableRowsSendingStop",t),this.commsSend(this.connectionSelectorsTables,"moveRow","disconnect")),this.connectionElements.forEach(e=>{e.classList.remove("tabulator-movingrow-receiving"),e.removeEventListener("mouseup",e.tabulatorElementDropEvent),delete e.tabulatorElementDropEvent})}connect(t,e){return this.connectedTable?(console.warn("Move Row Error - Table cannot accept connection, already connected to table:",this.connectedTable),!1):(this.connectedTable=t,this.connectedRow=e,this.table.element.classList.add("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach(o=>{"row"===o.type&&o.modules.moveRow&&o.modules.moveRow.mouseup&&o.getElement().addEventListener("mouseup",o.modules.moveRow.mouseup)}),this.tableRowDropEvent=this.tableRowDrop.bind(this),this.table.element.addEventListener("mouseup",this.tableRowDropEvent),this.dispatchExternal("movableRowsReceivingStart",e,t),!0)}disconnect(t){t===this.connectedTable?(this.connectedTable=!1,this.connectedRow=!1,this.table.element.classList.remove("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach(e=>{"row"===e.type&&e.modules.moveRow&&e.modules.moveRow.mouseup&&e.getElement().removeEventListener("mouseup",e.modules.moveRow.mouseup)}),this.table.element.removeEventListener("mouseup",this.tableRowDropEvent),this.dispatchExternal("movableRowsReceivingStop",t)):console.warn("Move Row Error - trying to disconnect from non connected table")}dropComplete(t,e,o){var a=!1;if(o){switch(typeof this.table.options.movableRowsSender){case"string":a=this.senders[this.table.options.movableRowsSender];break;case"function":a=this.table.options.movableRowsSender}a?a.call(this,this.moving.getComponent(),e?e.getComponent():void 0,t):this.table.options.movableRowsSender&&console.warn("Mover Row Error - no matching sender found:",this.table.options.movableRowsSender),this.dispatchExternal("movableRowsSent",this.moving.getComponent(),e?e.getComponent():void 0,t)}else this.dispatchExternal("movableRowsSentFailed",this.moving.getComponent(),e?e.getComponent():void 0,t);this.endMove()}tableRowDrop(t,e){var o=!1,a=!1;switch(t.stopImmediatePropagation(),typeof this.table.options.movableRowsReceiver){case"string":o=this.receivers[this.table.options.movableRowsReceiver];break;case"function":o=this.table.options.movableRowsReceiver}o?a=o.call(this,this.connectedRow.getComponent(),e?e.getComponent():void 0,this.connectedTable):console.warn("Mover Row Error - no matching receiver found:",this.table.options.movableRowsReceiver),this.dispatchExternal(a?"movableRowsReceived":"movableRowsReceivedFailed",this.connectedRow.getComponent(),e?e.getComponent():void 0,this.connectedTable),this.commsSend(this.connectedTable,"moveRow","dropcomplete",{row:e,success:a})}commsReceived(t,e,o){switch(e){case"connect":return this.connect(t,o.row);case"disconnect":return this.disconnect(t);case"dropcomplete":return this.dropComplete(t,o.row,o.success)}}}pv.prototype.receivers={insert:function(r,t,e){return this.table.addRow(r.getData(),void 0,t),!0},add:function(r,t,e){return this.table.addRow(r.getData()),!0},update:function(r,t,e){return!!t&&(t.update(r.getData()),!0)},replace:function(r,t,e){return!!t&&(this.table.addRow(r.getData(),void 0,t),t.delete(),!0)}},pv.prototype.senders={delete:function(r,t,e){r.delete()}},pv.moduleName="moveRow";var j4={};let W4=(()=>{class r extends Zi{constructor(e){super(e),this.allowedTypes=["","data","edit","clipboard"],this.enabled=!0,this.registerColumnOption("mutator"),this.registerColumnOption("mutatorParams"),this.registerColumnOption("mutatorData"),this.registerColumnOption("mutatorDataParams"),this.registerColumnOption("mutatorEdit"),this.registerColumnOption("mutatorEditParams"),this.registerColumnOption("mutatorClipboard"),this.registerColumnOption("mutatorClipboardParams")}initialize(){this.subscribe("cell-value-changing",this.transformCell.bind(this)),this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("row-data-init-before",this.rowDataChanged.bind(this)),this.subscribe("row-data-changing",this.rowDataChanged.bind(this))}rowDataChanged(e,o,a){return this.transformRow(o,"data",a)}initializeColumn(e){var o=!1,a={};this.allowedTypes.forEach(c=>{var p,d="mutator"+(c.charAt(0).toUpperCase()+c.slice(1));e.definition[d]&&(p=this.lookupMutator(e.definition[d]))&&(o=!0,a[d]={mutator:p,params:e.definition[d+"Params"]||{}})}),o&&(e.modules.mutate=a)}lookupMutator(e){var o=!1;switch(typeof e){case"string":r.mutators[e]?o=r.mutators[e]:console.warn("Mutator Error - No such mutator found, ignoring: ",e);break;case"function":o=e}return o}transformRow(e,o,a){var d,c="mutator"+(o.charAt(0).toUpperCase()+o.slice(1));return this.enabled&&this.table.columnManager.traverse(p=>{var g,v,E;p.modules.mutate&&(g=p.modules.mutate[c]||p.modules.mutate.mutator||!1)&&(d=p.getFieldValue(void 0!==a?a:e),("data"==o||void 0!==d)&&(E=p.getComponent(),v="function"==typeof g.params?g.params(d,e,o,E):g.params,p.setFieldValue(e,g.mutator(d,e,o,v,E))))}),e}transformCell(e,o){if(e.column.modules.mutate){var a=e.column.modules.mutate.mutatorEdit||e.column.modules.mutate.mutator||!1,c={};if(a)return c=Object.assign(c,e.row.getData()),e.column.setFieldValue(c,o),a.mutator(o,c,"edit",a.params,e.getComponent())}return o}enable(){this.enabled=!0}disable(){this.enabled=!1}}return r.moduleName="mutator",r.mutators=j4,r})(),z4=(()=>{class r extends Zi{constructor(e){super(e),this.mode="local",this.progressiveLoad=!1,this.size=0,this.page=1,this.count=5,this.max=1,this.displayIndex=0,this.initialLoad=!0,this.dataChanging=!1,this.pageSizes=[],this.dataReceivedNames={},this.dataSentNames={},this.registerTableOption("pagination",!1),this.registerTableOption("paginationMode","local"),this.registerTableOption("paginationSize",!1),this.registerTableOption("paginationInitialPage",1),this.registerTableOption("paginationButtonCount",5),this.registerTableOption("paginationSizeSelector",!1),this.registerTableOption("paginationElement",!1),this.registerTableOption("paginationAddRow","page"),this.registerTableOption("progressiveLoad",!1),this.registerTableOption("progressiveLoadDelay",0),this.registerTableOption("progressiveLoadScrollMargin",0),this.registerTableFunction("setMaxPage",this.setMaxPage.bind(this)),this.registerTableFunction("setPage",this.setPage.bind(this)),this.registerTableFunction("setPageToRow",this.userSetPageToRow.bind(this)),this.registerTableFunction("setPageSize",this.userSetPageSize.bind(this)),this.registerTableFunction("getPageSize",this.getPageSize.bind(this)),this.registerTableFunction("previousPage",this.previousPage.bind(this)),this.registerTableFunction("nextPage",this.nextPage.bind(this)),this.registerTableFunction("getPage",this.getPage.bind(this)),this.registerTableFunction("getPageMax",this.getPageMax.bind(this)),this.registerComponentFunction("row","pageTo",this.setPageToRow.bind(this))}initialize(){this.table.options.pagination?(this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("row-adding-position",this.rowAddingPosition.bind(this)),this.subscribe("row-added",this.rowsUpdated.bind(this)),this.subscribe("data-processed",this.initialLoadComplete.bind(this)),this.subscribe("table-built",this.calculatePageSizes.bind(this)),"remote"===this.table.options.paginationMode&&(this.subscribe("data-params",this.remotePageParams.bind(this)),this.subscribe("data-loaded",this._parseRemoteData.bind(this))),this.table.options.progressiveLoad&&console.error("Progressive Load Error - Pagination and progressive load cannot be used at the same time"),this.registerDisplayHandler(this.restOnRenderBefore.bind(this),40),this.registerDisplayHandler(this.getRows.bind(this),50),this.createElements(),this.initializePaginator()):this.table.options.progressiveLoad&&(this.subscribe("data-params",this.remotePageParams.bind(this)),this.subscribe("data-loaded",this._parseRemoteData.bind(this)),this.subscribe("table-built",this.calculatePageSizes.bind(this)),this.initializeProgressive(this.table.options.progressiveLoad),"scroll"===this.table.options.progressiveLoad&&this.subscribe("scroll-vertical",this.scrollVertical.bind(this)))}rowAddingPosition(e,o){var d,a=this.table.rowManager,c=a.getDisplayRows();return o?c.length?d=c[0]:a.activeRows.length&&(d=a.activeRows[a.activeRows.length-1],o=!1):c.length&&(d=c[c.length-1],o=!(c.length<this.size)),{index:d,top:o}}calculatePageSizes(){var e,o;this.table.options.paginationSize?this.size=this.table.options.paginationSize:((e=document.createElement("div")).classList.add("tabulator-row"),e.style.visibility="hidden",(o=document.createElement("div")).classList.add("tabulator-cell"),o.innerHTML="Page Row Test",e.appendChild(o),this.table.rowManager.getTableElement().appendChild(e),this.size=Math.floor(this.table.rowManager.getElement().clientHeight/e.offsetHeight),this.table.rowManager.getTableElement().removeChild(e)),this.generatePageSizeSelectList()}initialLoadComplete(){this.initialLoad=!1}remotePageParams(e,o,a,c){return this.initialLoad||(this.progressiveLoad&&!a||!this.progressiveLoad&&!this.dataChanging)&&this.reset(!0),c.page=this.page,this.size&&(c.size=this.size),c}userSetPageToRow(e){return this.table.options.pagination&&(e=this.rowManager.findRow(e))?this.setPageToRow(e):Promise.reject()}userSetPageSize(e){return!!this.table.options.pagination&&(this.setPageSize(e),this.setPage(1))}scrollVertical(e,o){var a;!o&&!this.table.dataLoader.loading&&(a=this.table.rowManager.getElement()).scrollHeight-a.clientHeight-e<(this.table.options.progressiveLoadScrollMargin||2*a.clientHeight)&&this.nextPage()}restOnRenderBefore(e,o){return o||"local"===this.mode&&this.reset(),e}rowsUpdated(){this.refreshData(!0,"all")}createElements(){var e;this.element=document.createElement("span"),this.element.classList.add("tabulator-paginator"),this.pagesElement=document.createElement("span"),this.pagesElement.classList.add("tabulator-pages"),(e=document.createElement("button")).classList.add("tabulator-page"),e.setAttribute("type","button"),e.setAttribute("role","button"),e.setAttribute("aria-label",""),e.setAttribute("title",""),this.firstBut=e.cloneNode(!0),this.firstBut.setAttribute("data-page","first"),this.prevBut=e.cloneNode(!0),this.prevBut.setAttribute("data-page","prev"),this.nextBut=e.cloneNode(!0),this.nextBut.setAttribute("data-page","next"),this.lastBut=e.cloneNode(!0),this.lastBut.setAttribute("data-page","last"),this.table.options.paginationSizeSelector&&(this.pageSizeSelect=document.createElement("select"),this.pageSizeSelect.classList.add("tabulator-page-size"))}generatePageSizeSelectList(){var e=[];if(this.pageSizeSelect){if(Array.isArray(this.table.options.paginationSizeSelector))this.pageSizes=e=this.table.options.paginationSizeSelector,-1==this.pageSizes.indexOf(this.size)&&e.unshift(this.size);else if(-1==this.pageSizes.indexOf(this.size)){e=[];for(let o=1;o<5;o++)e.push(this.size*o);this.pageSizes=e}else e=this.pageSizes;for(;this.pageSizeSelect.firstChild;)this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild);e.forEach(o=>{var a=document.createElement("option");a.value=o,!0===o?this.langBind("pagination|all",function(c){a.innerHTML=c}):a.innerHTML=o,this.pageSizeSelect.appendChild(a)}),this.pageSizeSelect.value=this.size}}initializePaginator(e){var o;e||(this.langBind("pagination|first",a=>{this.firstBut.innerHTML=a}),this.langBind("pagination|first_title",a=>{this.firstBut.setAttribute("aria-label",a),this.firstBut.setAttribute("title",a)}),this.langBind("pagination|prev",a=>{this.prevBut.innerHTML=a}),this.langBind("pagination|prev_title",a=>{this.prevBut.setAttribute("aria-label",a),this.prevBut.setAttribute("title",a)}),this.langBind("pagination|next",a=>{this.nextBut.innerHTML=a}),this.langBind("pagination|next_title",a=>{this.nextBut.setAttribute("aria-label",a),this.nextBut.setAttribute("title",a)}),this.langBind("pagination|last",a=>{this.lastBut.innerHTML=a}),this.langBind("pagination|last_title",a=>{this.lastBut.setAttribute("aria-label",a),this.lastBut.setAttribute("title",a)}),this.firstBut.addEventListener("click",()=>{this.setPage(1)}),this.prevBut.addEventListener("click",()=>{this.previousPage()}),this.nextBut.addEventListener("click",()=>{this.nextPage()}),this.lastBut.addEventListener("click",()=>{this.setPage(this.max)}),this.table.options.paginationElement&&(this.element=this.table.options.paginationElement),this.pageSizeSelect&&(o=document.createElement("label"),this.langBind("pagination|page_size",a=>{this.pageSizeSelect.setAttribute("aria-label",a),this.pageSizeSelect.setAttribute("title",a),o.innerHTML=a}),this.element.appendChild(o),this.element.appendChild(this.pageSizeSelect),this.pageSizeSelect.addEventListener("change",a=>{this.setPageSize("true"==this.pageSizeSelect.value||this.pageSizeSelect.value),this.setPage(1)})),this.element.appendChild(this.firstBut),this.element.appendChild(this.prevBut),this.element.appendChild(this.pagesElement),this.element.appendChild(this.nextBut),this.element.appendChild(this.lastBut),!this.table.options.paginationElement&&!e&&this.table.footerManager.append(this.element,this),this.page=this.table.options.paginationInitialPage,this.count=this.table.options.paginationButtonCount),this.mode=this.table.options.paginationMode}initializeProgressive(e){this.initializePaginator(!0),this.mode="progressive_"+e,this.progressiveLoad=!0}trackChanges(){this.dispatch("page-changed")}setDisplayIndex(e){this.displayIndex=e}getDisplayIndex(){return this.displayIndex}setMaxRows(e){this.max=e?!0===this.size?1:Math.ceil(e/this.size):1,this.page>this.max&&(this.page=this.max)}reset(e){this.initialLoad||("local"==this.mode||e)&&(this.page=1)}setMaxPage(e){e=parseInt(e),this.max=e||1,this.page>this.max&&(this.page=this.max,this.trigger())}setPage(e){switch(e){case"first":return this.setPage(1);case"prev":return this.previousPage();case"next":return this.nextPage();case"last":return this.setPage(this.max)}return(e=parseInt(e))>0&&e<=this.max||"local"!==this.mode?(this.page=e,this.trackChanges(),this.trigger()):(console.warn("Pagination Error - Requested page is out of range of 1 - "+this.max+":",e),Promise.reject())}setPageToRow(e){var a=this.table.rowManager.getDisplayRows(this.displayIndex-1).indexOf(e);if(a>-1){var c=!0===this.size?1:Math.ceil((a+1)/this.size);return this.setPage(c)}return console.warn("Pagination Error - Requested row is not visible"),Promise.reject()}setPageSize(e){!0!==e&&(e=parseInt(e)),e>0&&(this.size=e),this.pageSizeSelect&&this.generatePageSizeSelectList(),this.trackChanges()}_setPageButtons(){let e=Math.floor((this.count-1)/2),o=Math.ceil((this.count-1)/2),a=this.max-this.page+e+1<this.count?this.max-this.count+1:Math.max(this.page-e,1),c=this.page<=o?Math.min(this.count,this.max):Math.min(this.page+o,this.max);for(;this.pagesElement.firstChild;)this.pagesElement.removeChild(this.pagesElement.firstChild);1==this.page?(this.firstBut.disabled=!0,this.prevBut.disabled=!0):(this.firstBut.disabled=!1,this.prevBut.disabled=!1),this.page==this.max?(this.lastBut.disabled=!0,this.nextBut.disabled=!0):(this.lastBut.disabled=!1,this.nextBut.disabled=!1);for(let d=a;d<=c;d++)d>0&&d<=this.max&&this.pagesElement.appendChild(this._generatePageButton(d));this.footerRedraw()}_generatePageButton(e){var o=document.createElement("button");return o.classList.add("tabulator-page"),e==this.page&&o.classList.add("active"),o.setAttribute("type","button"),o.setAttribute("role","button"),this.langBind("pagination|page_title",a=>{o.setAttribute("aria-label",a+" "+e),o.setAttribute("title",a+" "+e)}),o.setAttribute("data-page",e),o.textContent=e,o.addEventListener("click",a=>{this.setPage(e)}),o}previousPage(){return this.page>1?(this.page--,this.trackChanges(),this.trigger()):(console.warn("Pagination Error - Previous page would be less than page 1:",0),Promise.reject())}nextPage(){return this.page<this.max?(this.page++,this.trackChanges(),this.trigger()):(this.progressiveLoad||console.warn("Pagination Error - Next page would be greater than maximum page of "+this.max+":",this.max+1),Promise.reject())}getPage(){return this.page}getPageMax(){return this.max}getPageSize(e){return this.size}getMode(){return this.mode}getRows(e){var o,a,c;if("local"==this.mode){o=[],this.setMaxRows(e.length),!0===this.size?(a=0,c=e.length):c=(a=this.size*(this.page-1))+parseInt(this.size),this._setPageButtons();for(let d=a;d<c;d++)e[d]&&o.push(e[d]);return o}return this._setPageButtons(),e.slice(0)}trigger(){var e;switch(this.mode){case"local":return e=this.table.rowManager.scrollLeft,this.refreshData(),this.table.rowManager.scrollHorizontal(e),this.dispatchExternal("pageLoaded",this.getPage()),Promise.resolve();case"remote":return this.dataChanging=!0,this.reloadData(null).finally(()=>{this.dataChanging=!1});case"progressive_load":case"progressive_scroll":return this.reloadData(null,!0);default:return console.warn("Pagination Error - no such pagination mode:",this.mode),Promise.reject()}}_parseRemoteData(e){if(void 0===e.last_page&&console.warn("Remote Pagination Error - Server response missing '"+this.dataReceivedNames.last_page+"' property"),e.data){if(this.max=parseInt(e.last_page)||1,this.progressiveLoad){switch(this.mode){case"progressive_load":1==this.page?this.table.rowManager.setData(e.data,!1,1==this.page):this.table.rowManager.addRows(e.data),this.page<this.max&&setTimeout(()=>{this.nextPage()},this.table.options.progressiveLoadDelay);break;case"progressive_scroll":e=this.table.rowManager.getData().concat(e.data),this.table.rowManager.setData(e,1!==this.page,1==this.page),this.table.rowManager.element.scrollHeight<=this.table.rowManager.element.clientHeight+(this.table.options.progressiveLoadScrollMargin||2*this.table.rowManager.element.clientHeight)&&setTimeout(()=>{this.nextPage()})}return!1}this.dispatchExternal("pageLoaded",this.getPage())}else console.warn("Remote Pagination Error - Server response missing '"+this.dataReceivedNames.data+"' property");return e.data}footerRedraw(){var e=this.table.footerManager.element;Math.ceil(e.clientWidth)-e.scrollWidth<0?this.pagesElement.style.display="none":(this.pagesElement.style.display="",Math.ceil(e.clientWidth)-e.scrollWidth<0&&(this.pagesElement.style.display="none"))}}return r.moduleName="page",r})();var Y4={local:function(r,t){var e=localStorage.getItem(r+"-"+t);return!!e&&JSON.parse(e)},cookie:function(r,t){var c,d,e=document.cookie,o=r+"-"+t,a=e.indexOf(o+"=");return a>-1&&((c=(e=e.substr(a)).indexOf(";"))>-1&&(e=e.substr(0,c)),d=e.replace(o+"=","")),!!d&&JSON.parse(d)}},X4={local:function(r,t,e){localStorage.setItem(r+"-"+t,JSON.stringify(e))},cookie:function(r,t,e){var o=new Date;o.setDate(o.getDate()+1e4),document.cookie=r+"-"+t+"="+JSON.stringify(e)+"; expires="+o.toUTCString()}};let $4=(()=>{class r extends Zi{constructor(e){super(e),this.mode="",this.id="",this.defWatcherBlock=!1,this.config={},this.readFunc=!1,this.writeFunc=!1,this.registerTableOption("persistence",!1),this.registerTableOption("persistenceID",""),this.registerTableOption("persistenceMode",!0),this.registerTableOption("persistenceReaderFunc",!1),this.registerTableOption("persistenceWriterFunc",!1)}localStorageTest(){var e="_tabulator_test";try{return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch(o){return!1}}initialize(){if(this.table.options.persistence){var a,e=this.table.options.persistenceMode,o=this.table.options.persistenceID;this.mode=!0!==e?e:this.localStorageTest()?"local":"cookie",this.table.options.persistenceReaderFunc?"function"==typeof this.table.options.persistenceReaderFunc?this.readFunc=this.table.options.persistenceReaderFunc:r.readers[this.table.options.persistenceReaderFunc]?this.readFunc=r.readers[this.table.options.persistenceReaderFunc]:console.warn("Persistence Read Error - invalid reader set",this.table.options.persistenceReaderFunc):r.readers[this.mode]?this.readFunc=r.readers[this.mode]:console.warn("Persistence Read Error - invalid reader set",this.mode),this.table.options.persistenceWriterFunc?"function"==typeof this.table.options.persistenceWriterFunc?this.writeFunc=this.table.options.persistenceWriterFunc:r.writers[this.table.options.persistenceWriterFunc]?this.writeFunc=r.writers[this.table.options.persistenceWriterFunc]:console.warn("Persistence Write Error - invalid reader set",this.table.options.persistenceWriterFunc):r.writers[this.mode]?this.writeFunc=r.writers[this.mode]:console.warn("Persistence Write Error - invalid writer set",this.mode),this.id="tabulator-"+(o||this.table.element.getAttribute("id")||""),this.config={sort:!0===this.table.options.persistence||this.table.options.persistence.sort,filter:!0===this.table.options.persistence||this.table.options.persistence.filter,group:!0===this.table.options.persistence||this.table.options.persistence.group,page:!0===this.table.options.persistence||this.table.options.persistence.page,columns:!0===this.table.options.persistence?["title","width","visible"]:this.table.options.persistence.columns},this.config.page&&(a=this.retreiveData("page"))&&(void 0!==a.paginationSize&&(!0===this.config.page||this.config.page.size)&&(this.table.options.paginationSize=a.paginationSize),void 0!==a.paginationInitialPage&&(!0===this.config.page||this.config.page.page)&&(this.table.options.paginationInitialPage=a.paginationInitialPage)),this.config.group&&(a=this.retreiveData("group"))&&(void 0!==a.groupBy&&(!0===this.config.group||this.config.group.groupBy)&&(this.table.options.groupBy=a.groupBy),void 0!==a.groupStartOpen&&(!0===this.config.group||this.config.group.groupStartOpen)&&(this.table.options.groupStartOpen=a.groupStartOpen),void 0!==a.groupHeader&&(!0===this.config.group||this.config.group.groupHeader)&&(this.table.options.groupHeader=a.groupHeader)),this.config.columns&&(this.table.options.columns=this.load("columns",this.table.options.columns),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-show",this.save.bind(this,"columns")),this.subscribe("column-hide",this.save.bind(this,"columns")),this.subscribe("column-moved",this.save.bind(this,"columns")),this.subscribe("table-built",this.tableBuilt.bind(this),0)),this.subscribe("table-redraw",this.tableRedraw.bind(this)),this.subscribe("filter-changed",this.eventSave.bind(this,"filter")),this.subscribe("sort-changed",this.eventSave.bind(this,"sort")),this.subscribe("group-changed",this.eventSave.bind(this,"group")),this.subscribe("page-changed",this.eventSave.bind(this,"page")),this.subscribe("column-resized",this.eventSave.bind(this,"columns")),this.subscribe("layout-refreshed",this.eventSave.bind(this,"columns"))}this.registerTableFunction("getColumnLayout",this.getColumnLayout.bind(this)),this.registerTableFunction("setColumnLayout",this.setColumnLayout.bind(this))}eventSave(e){this.config[e]&&this.save(e)}tableBuilt(){var o,a;this.config.sort&&(o=this.load("sort"))&&(this.table.initialSort=o),this.config.filter&&(a=this.load("filter"))&&(this.table.initialFilter=a)}tableRedraw(e){e&&this.config.columns&&this.save("columns")}getColumnLayout(){return this.parseColumns(this.table.columnManager.getColumns())}setColumnLayout(e){return this.table.columnManager.setColumns(this.mergeDefinition(this.table.options.columns,e)),!0}initializeColumn(e){var o;this.config.columns&&(this.defWatcherBlock=!0,o=e.getDefinition(),(!0===this.config.columns?Object.keys(o):this.config.columns).forEach(c=>{var d=Object.getOwnPropertyDescriptor(o,c),p=o[c];d&&Object.defineProperty(o,c,{set:function(g){p=g,this.defWatcherBlock||this.save("columns"),d.set&&d.set(g)},get:function(){return d.get&&d.get(),p}})}),this.defWatcherBlock=!1)}load(e,o){var a=this.retreiveData(e);return o&&(a=a?this.mergeDefinition(o,a):o),a}retreiveData(e){return!!this.readFunc&&this.readFunc(this.id,e)}mergeDefinition(e,o){var a=[];return(o=o||[]).forEach((c,d)=>{var g,p=this._findColumn(e,c);p&&(!0===this.config.columns||null==this.config.columns?(g=Object.keys(p)).push("width"):g=this.config.columns,g.forEach(v=>{"columns"!==v&&void 0!==c[v]&&(p[v]=c[v])}),p.columns&&(p.columns=this.mergeDefinition(p.columns,c.columns)),a.push(p))}),e.forEach((c,d)=>{this._findColumn(o,c)||(a.length>d?a.splice(d,0,c):a.push(c))}),a}_findColumn(e,o){var a=o.columns?"group":o.field?"field":"object";return e.find(function(c){switch(a){case"group":return c.title===o.title&&c.columns.length===o.columns.length;case"field":return c.field===o.field;case"object":return c===o}})}save(e){var o={};switch(e){case"columns":o=this.parseColumns(this.table.columnManager.getColumns());break;case"filter":o=this.table.modules.filter.getFilters();break;case"sort":o=this.validateSorters(this.table.modules.sort.getSort());break;case"group":o=this.getGroupConfig();break;case"page":o=this.getPageConfig()}this.writeFunc&&this.writeFunc(this.id,e,o)}validateSorters(e){return e.forEach(function(o){o.column=o.field,delete o.field}),e}getGroupConfig(){var e={};return this.config.group&&((!0===this.config.group||this.config.group.groupBy)&&(e.groupBy=this.table.options.groupBy),(!0===this.config.group||this.config.group.groupStartOpen)&&(e.groupStartOpen=this.table.options.groupStartOpen),(!0===this.config.group||this.config.group.groupHeader)&&(e.groupHeader=this.table.options.groupHeader)),e}getPageConfig(){var e={};return this.config.page&&((!0===this.config.page||this.config.page.size)&&(e.paginationSize=this.table.modules.page.getPageSize()),(!0===this.config.page||this.config.page.page)&&(e.paginationInitialPage=this.table.modules.page.getPage())),e}parseColumns(e){var o=[],a=["headerContextMenu","headerMenu","contextMenu","clickMenu"];return e.forEach(c=>{var g,d={},p=c.getDefinition();c.isGroup?(d.title=p.title,d.columns=this.parseColumns(c.getColumns())):(d.field=c.getField(),!0===this.config.columns||null==this.config.columns?(g=Object.keys(p)).push("width"):g=this.config.columns,g.forEach(v=>{switch(v){case"width":d.width=c.getWidth();break;case"visible":d.visible=c.visible;break;default:"function"!=typeof p[v]&&-1===a.indexOf(v)&&(d[v]=p[v])}})),o.push(d)}),o}}return r.moduleName="persistence",r.readers=Y4,r.writers=X4,r})(),K4=(()=>{class r extends Zi{constructor(e){super(e),this.element=!1,this.manualBlock=!1,this.registerTableOption("printAsHtml",!1),this.registerTableOption("printFormatter",!1),this.registerTableOption("printHeader",!1),this.registerTableOption("printFooter",!1),this.registerTableOption("printStyled",!0),this.registerTableOption("printRowRange","visible"),this.registerTableOption("printConfig",{}),this.registerColumnOption("print"),this.registerColumnOption("titlePrint")}initialize(){this.table.options.printAsHtml&&(window.addEventListener("beforeprint",this.replaceTable.bind(this)),window.addEventListener("afterprint",this.cleanup.bind(this))),this.registerTableFunction("print",this.printFullscreen.bind(this))}replaceTable(){this.manualBlock||(this.element=document.createElement("div"),this.element.classList.add("tabulator-print-table"),this.element.appendChild(this.table.modules.export.genereateTable(this.table.options.printConfig,this.table.options.printStyled,this.table.options.printRowRange,"print")),this.table.element.style.display="none",this.table.element.parentNode.insertBefore(this.element,this.table.element))}cleanup(){document.body.classList.remove("tabulator-print-fullscreen-hide"),this.element&&this.element.parentNode&&(this.element.parentNode.removeChild(this.element),this.table.element.style.display="")}printFullscreen(e,o,a){var E,D,c=window.scrollX,d=window.scrollY,p=document.createElement("div"),g=document.createElement("div"),v=this.table.modules.export.genereateTable(void 0!==a?a:this.table.options.printConfig,void 0!==o?o:this.table.options.printStyled,e||this.table.options.printRowRange,"print");this.manualBlock=!0,this.element=document.createElement("div"),this.element.classList.add("tabulator-print-fullscreen"),this.table.options.printHeader&&(p.classList.add("tabulator-print-header"),"string"==typeof(E="function"==typeof this.table.options.printHeader?this.table.options.printHeader.call(this.table):this.table.options.printHeader)?p.innerHTML=E:p.appendChild(E),this.element.appendChild(p)),this.element.appendChild(v),this.table.options.printFooter&&(g.classList.add("tabulator-print-footer"),"string"==typeof(D="function"==typeof this.table.options.printFooter?this.table.options.printFooter.call(this.table):this.table.options.printFooter)?g.innerHTML=D:g.appendChild(D),this.element.appendChild(g)),document.body.classList.add("tabulator-print-fullscreen-hide"),document.body.appendChild(this.element),this.table.options.printFormatter&&this.table.options.printFormatter(this.element,v),window.print(),this.cleanup(),window.scrollTo(c,d),this.manualBlock=!1}}return r.moduleName="print",r})(),J4=(()=>{class r extends Zi{constructor(e){super(e),this.data=!1,this.blocked=!1,this.origFuncs={},this.currentVersion=0,this.registerTableOption("reactiveData",!1)}initialize(){this.table.options.reactiveData&&(this.subscribe("cell-value-save-before",this.block.bind(this)),this.subscribe("cell-value-save-after",this.unblock.bind(this)),this.subscribe("row-data-save-before",this.block.bind(this)),this.subscribe("row-data-save-after",this.unblock.bind(this)),this.subscribe("row-data-init-after",this.watchRow.bind(this)),this.subscribe("data-processing",this.watchData.bind(this)),this.subscribe("table-destroy",this.unwatchData.bind(this)))}watchData(e){var a,o=this;this.currentVersion++,a=this.currentVersion,this.unwatchData(),this.data=e,this.origFuncs.push=e.push,Object.defineProperty(this.data,"push",{enumerable:!1,configurable:!0,value:function(){var c=Array.from(arguments);return!o.blocked&&a===o.currentVersion&&c.forEach(d=>{o.table.rowManager.addRowActual(d,!1)}),o.origFuncs.push.apply(e,arguments)}}),this.origFuncs.unshift=e.unshift,Object.defineProperty(this.data,"unshift",{enumerable:!1,configurable:!0,value:function(){var c=Array.from(arguments);return!o.blocked&&a===o.currentVersion&&c.forEach(d=>{o.table.rowManager.addRowActual(d,!0)}),o.origFuncs.unshift.apply(e,arguments)}}),this.origFuncs.shift=e.shift,Object.defineProperty(this.data,"shift",{enumerable:!1,configurable:!0,value:function(){var c;return!o.blocked&&a===o.currentVersion&&o.data.length&&(c=o.table.rowManager.getRowFromDataObject(o.data[0]))&&c.deleteActual(),o.origFuncs.shift.call(e)}}),this.origFuncs.pop=e.pop,Object.defineProperty(this.data,"pop",{enumerable:!1,configurable:!0,value:function(){var c;return!o.blocked&&a===o.currentVersion&&o.data.length&&(c=o.table.rowManager.getRowFromDataObject(o.data[o.data.length-1]))&&c.deleteActual(),o.origFuncs.pop.call(e)}}),this.origFuncs.splice=e.splice,Object.defineProperty(this.data,"splice",{enumerable:!1,configurable:!0,value:function(){var v,c=Array.from(arguments),d=c[0]<0?e.length+c[0]:c[0],p=c[1],g=!!c[2]&&c.slice(2);if(!o.blocked&&a===o.currentVersion){if(g&&((v=!!e[d]&&o.table.rowManager.getRowFromDataObject(e[d]))?g.forEach(D=>{o.table.rowManager.addRowActual(D,!0,v,!0)}):(g=g.slice().reverse()).forEach(D=>{o.table.rowManager.addRowActual(D,!0,!1,!0)})),0!==p){var E=e.slice(d,void 0===c[1]?c[1]:d+p);E.forEach((D,x)=>{var L=o.table.rowManager.getRowFromDataObject(D);L&&L.deleteActual(x!==E.length-1)})}(g||0!==p)&&o.table.rowManager.reRenderInPosition()}return o.origFuncs.splice.apply(e,arguments)}})}unwatchData(){if(!1!==this.data)for(var e in this.origFuncs)Object.defineProperty(this.data,e,{enumerable:!0,configurable:!0,writable:!0,value:this.origFuncs.key})}watchRow(e){var o=e.getData();for(var a in this.blocked=!0,o)this.watchKey(e,o,a);this.table.options.dataTree&&this.watchTreeChildren(e),this.blocked=!1}watchTreeChildren(e){var o=e.getData()[this.table.options.dataTreeChildField],a={};function c(){this.table.modules.dataTree.initializeRow(e),this.table.modules.dataTree.layoutRow(e),this.table.rowManager.refreshActiveData("tree",!1,!0)}o&&(a.push=o.push,Object.defineProperty(o,"push",{enumerable:!1,configurable:!0,value:()=>{var d=a.push.apply(o,arguments);return c(),d}}),a.unshift=o.unshift,Object.defineProperty(o,"unshift",{enumerable:!1,configurable:!0,value:()=>{var d=a.unshift.apply(o,arguments);return c(),d}}),a.shift=o.shift,Object.defineProperty(o,"shift",{enumerable:!1,configurable:!0,value:()=>{var d=a.shift.call(o);return c(),d}}),a.pop=o.pop,Object.defineProperty(o,"pop",{enumerable:!1,configurable:!0,value:()=>{var d=a.pop.call(o);return c(),d}}),a.splice=o.splice,Object.defineProperty(o,"splice",{enumerable:!1,configurable:!0,value:()=>{var d=a.splice.apply(o,arguments);return c(),d}}))}watchKey(e,o,a){var c=Object.getOwnPropertyDescriptor(o,a),d=o[a],p=this.currentVersion;Object.defineProperty(o,a,{set:g=>{if(d=g,!this.blocked&&p===this.currentVersion){var v={};v[a]=g,e.updateData(v)}c.set&&c.set(g)},get:()=>(c.get&&c.get(),d)})}unwatchRow(e){var o=e.getData();for(var a in o)Object.defineProperty(o,a,{value:o[a]})}block(){this.blocked=!0}unblock(){this.blocked=!1}}return r.moduleName="reactiveData",r})(),Q4=(()=>{class r extends Zi{constructor(e){super(e),this.startColumn=!1,this.startX=!1,this.startWidth=!1,this.handle=null,this.prevHandle=null,this.registerColumnOption("resizable",!0)}initialize(){this.subscribe("cell-layout",this.layoutCellHandles.bind(this)),this.subscribe("column-init",this.layoutColumnHeader.bind(this))}layoutCellHandles(e){"row"===e.row.type&&this.initializeColumn("cell",e.column,e.element)}layoutColumnHeader(e){this.initializeColumn("header",e,e.element)}initializeColumn(e,o,a){var c=this,p=o.definition.resizable;if("header"===e&&(o.modules.resize={variableHeight:"textarea"==o.definition.formatter||o.definition.variableHeight}),!0===p||p==e){var g=document.createElement("div");g.className="tabulator-col-resize-handle";var v=document.createElement("div");v.className="tabulator-col-resize-handle prev",g.addEventListener("click",function(x){x.stopPropagation()});var E=function(x){var L=o.getLastColumn();L&&c._checkResizability(L)&&(c.startColumn=o,c._mouseDown(x,L,g))};g.addEventListener("mousedown",E),g.addEventListener("touchstart",E,{passive:!0}),g.addEventListener("dblclick",function(x){var L=o.getLastColumn();L&&c._checkResizability(L)&&(x.stopPropagation(),L.reinitializeWidth(!0))}),v.addEventListener("click",function(x){x.stopPropagation()});var D=function(x){var L,U,ee;(L=o.getFirstColumn())&&(ee=(U=c.table.columnManager.findColumnIndex(L))>0&&c.table.columnManager.getColumnByIndex(U-1))&&c._checkResizability(ee)&&(c.startColumn=o,c._mouseDown(x,ee,v))};v.addEventListener("mousedown",D),v.addEventListener("touchstart",D,{passive:!0}),v.addEventListener("dblclick",function(x){var L,U,ee;(L=o.getFirstColumn())&&(ee=(U=c.table.columnManager.findColumnIndex(L))>0&&c.table.columnManager.getColumnByIndex(U-1))&&c._checkResizability(ee)&&(x.stopPropagation(),ee.reinitializeWidth(!0))}),a.appendChild(g),a.appendChild(v)}}_checkResizability(e){return e.definition.resizable}_mouseDown(e,o,a){var c=this;function d(g){o.setWidth(c.table.rtl?c.startWidth-((void 0===g.screenX?g.touches[0].screenX:g.screenX)-c.startX):c.startWidth+((void 0===g.screenX?g.touches[0].screenX:g.screenX)-c.startX)),c.table.columnManager.renderer.rerenderColumns(!0),!c.table.browserSlow&&o.modules.resize&&o.modules.resize.variableHeight&&o.checkCellHeights()}function p(g){c.startColumn.modules.edit&&(c.startColumn.modules.edit.blocked=!1),c.table.browserSlow&&o.modules.resize&&o.modules.resize.variableHeight&&o.checkCellHeights(),document.body.removeEventListener("mouseup",p),document.body.removeEventListener("mousemove",d),a.removeEventListener("touchmove",d),a.removeEventListener("touchend",p),c.table.element.classList.remove("tabulator-block-select"),c.dispatch("column-resized",o),c.table.externalEvents.dispatch("columnResized",o.getComponent())}c.table.element.classList.add("tabulator-block-select"),e.stopPropagation(),c.startColumn.modules.edit&&(c.startColumn.modules.edit.blocked=!0),c.startX=void 0===e.screenX?e.touches[0].screenX:e.screenX,c.startWidth=o.getWidth(),document.body.addEventListener("mousemove",d),document.body.addEventListener("mouseup",p),a.addEventListener("touchmove",d,{passive:!0}),a.addEventListener("touchend",p)}}return r.moduleName="resizeColumns",r})(),Z4=(()=>{class r extends Zi{constructor(e){super(e),this.startColumn=!1,this.startY=!1,this.startHeight=!1,this.handle=null,this.prevHandle=null,this.registerTableOption("resizableRows",!1)}initialize(){this.table.options.resizableRows&&this.subscribe("row-layout-after",this.initializeRow.bind(this))}initializeRow(e){var o=this,a=e.getElement(),c=document.createElement("div");c.className="tabulator-row-resize-handle";var d=document.createElement("div");d.className="tabulator-row-resize-handle prev",c.addEventListener("click",function(v){v.stopPropagation()});var p=function(v){o.startRow=e,o._mouseDown(v,e,c)};c.addEventListener("mousedown",p),c.addEventListener("touchstart",p,{passive:!0}),d.addEventListener("click",function(v){v.stopPropagation()});var g=function(v){var E=o.table.rowManager.prevDisplayRow(e);E&&(o.startRow=E,o._mouseDown(v,E,d))};d.addEventListener("mousedown",g),d.addEventListener("touchstart",g,{passive:!0}),a.appendChild(c),a.appendChild(d)}_mouseDown(e,o,a){var c=this;function d(g){o.setHeight(c.startHeight+((void 0===g.screenY?g.touches[0].screenY:g.screenY)-c.startY))}function p(g){document.body.removeEventListener("mouseup",d),document.body.removeEventListener("mousemove",d),a.removeEventListener("touchmove",d),a.removeEventListener("touchend",p),c.table.element.classList.remove("tabulator-block-select"),this.dispatchExternal("rowResized",o.getComponent())}c.table.element.classList.add("tabulator-block-select"),e.stopPropagation(),c.startY=void 0===e.screenY?e.touches[0].screenY:e.screenY,c.startHeight=o.getHeight(),document.body.addEventListener("mousemove",d),document.body.addEventListener("mouseup",p),a.addEventListener("touchmove",d,{passive:!0}),a.addEventListener("touchend",p)}}return r.moduleName="resizeRows",r})(),q4=(()=>{class r extends Zi{constructor(e){super(e),this.binding=!1,this.observer=!1,this.containerObserver=!1,this.tableHeight=0,this.tableWidth=0,this.containerHeight=0,this.containerWidth=0,this.autoResize=!1,this.registerTableOption("autoResize",!0)}initialize(){if(this.table.options.autoResize){var o,e=this.table;this.tableHeight=e.element.clientHeight,this.tableWidth=e.element.clientWidth,e.element.parentNode&&(this.containerHeight=e.element.parentNode.clientHeight,this.containerWidth=e.element.parentNode.clientWidth),"undefined"!=typeof ResizeObserver&&"virtual"===e.rowManager.getRenderMode()?(this.autoResize=!0,this.observer=new ResizeObserver(a=>{if(!e.browserMobile||e.browserMobile&&!e.modules.edit.currentCell){var c=Math.floor(a[0].contentRect.height),d=Math.floor(a[0].contentRect.width);(this.tableHeight!=c||this.tableWidth!=d)&&(this.tableHeight=c,this.tableWidth=d,e.element.parentNode&&(this.containerHeight=e.element.parentNode.clientHeight,this.containerWidth=e.element.parentNode.clientWidth),this.table.columnManager.renderer.rerenderColumns(!0),e.redraw())}}),this.observer.observe(e.element),o=window.getComputedStyle(e.element),this.table.element.parentNode&&!this.table.rowManager.fixedHeight&&(o.getPropertyValue("max-height")||o.getPropertyValue("min-height"))&&(this.containerObserver=new ResizeObserver(a=>{if(!e.browserMobile||e.browserMobile&&!e.modules.edit.currentCell){var c=Math.floor(a[0].contentRect.height),d=Math.floor(a[0].contentRect.width);(this.containerHeight!=c||this.containerWidth!=d)&&(this.containerHeight=c,this.containerWidth=d,this.tableHeight=e.element.clientHeight,this.tableWidth=e.element.clientWidth),e.columnManager.renderer.rerenderColumns(!0),e.redraw()}}),this.containerObserver.observe(this.table.element.parentNode)),this.subscribe("table-resize",this.tableResized.bind(this))):(this.binding=function(){(!e.browserMobile||e.browserMobile&&!e.modules.edit.currentCell)&&(e.columnManager.renderer.rerenderColumns(!0),e.redraw())},window.addEventListener("resize",this.binding)),this.subscribe("table-destroy",this.clearBindings.bind(this))}}tableResized(){this.table.rowManager.redraw()}clearBindings(){this.binding&&window.removeEventListener("resize",this.binding),this.observer&&this.observer.unobserve(this.table.element),this.containerObserver&&this.containerObserver.unobserve(this.table.element.parentNode)}}return r.moduleName="resizeTable",r})(),e6=(()=>{class r extends Zi{constructor(e){super(e),this.columns=[],this.hiddenColumns=[],this.mode="",this.index=0,this.collapseFormatter=[],this.collapseStartOpen=!0,this.collapseHandleColumn=!1,this.registerTableOption("responsiveLayout",!1),this.registerTableOption("responsiveLayoutCollapseStartOpen",!0),this.registerTableOption("responsiveLayoutCollapseUseFormatters",!0),this.registerTableOption("responsiveLayoutCollapseFormatter",!1),this.registerColumnOption("responsive")}initialize(){this.table.options.responsiveLayout&&(this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("column-show",this.updateColumnVisibility.bind(this)),this.subscribe("column-hide",this.updateColumnVisibility.bind(this)),this.subscribe("columns-loaded",this.initializeResponsivity.bind(this)),this.subscribe("column-moved",this.initializeResponsivity.bind(this)),this.subscribe("column-add",this.initializeResponsivity.bind(this)),this.subscribe("column-delete",this.initializeResponsivity.bind(this)),this.subscribe("table-redrawing",this.tableRedraw.bind(this)),"collapse"===this.table.options.responsiveLayout&&(this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-layout",this.layoutRow.bind(this))))}tableRedraw(e){-1===["fitColumns","fitDataStretch"].indexOf(this.layoutMode())&&(e||this.update())}initializeResponsivity(){var e=[];this.mode=this.table.options.responsiveLayout,this.collapseFormatter=this.table.options.responsiveLayoutCollapseFormatter||this.formatCollapsedData,this.collapseStartOpen=this.table.options.responsiveLayoutCollapseStartOpen,this.hiddenColumns=[],this.table.columnManager.columnsByIndex.forEach(function(o,a){o.modules.responsive&&o.modules.responsive.order&&o.modules.responsive.visible&&(o.modules.responsive.index=a,e.push(o),!o.visible&&"collapse"===self.mode&&self.hiddenColumns.push(o))}),e=(e=e.reverse()).sort(function(o,a){return a.modules.responsive.order-o.modules.responsive.order||a.modules.responsive.index-o.modules.responsive.index}),this.columns=e,"collapse"===this.mode&&this.generateCollapsedContent();for(let o of this.table.columnManager.columnsByIndex)if("responsiveCollapse"==o.definition.formatter){this.collapseHandleColumn=o;break}this.collapseHandleColumn&&(this.hiddenColumns.length?this.collapseHandleColumn.show():this.collapseHandleColumn.hide())}initializeColumn(e){var o=e.getDefinition();e.modules.responsive={order:void 0===o.responsive?1:o.responsive,visible:!1!==o.visible}}initializeRow(e){var o;"calc"!==e.type&&((o=document.createElement("div")).classList.add("tabulator-responsive-collapse"),e.modules.responsiveLayout={element:o,open:this.collapseStartOpen},this.collapseStartOpen||(o.style.display="none"))}layoutRow(e){var o=e.getElement();e.modules.responsiveLayout&&(o.appendChild(e.modules.responsiveLayout.element),this.generateCollapsedRowContent(e))}updateColumnVisibility(e,o){!o&&e.modules.responsive&&(e.modules.responsive.visible=e.visible,this.initialize())}hideColumn(e){var o=this.hiddenColumns.length;e.hide(!1,!0),"collapse"===this.mode&&(this.hiddenColumns.unshift(e),this.generateCollapsedContent(),this.collapseHandleColumn&&!o&&this.collapseHandleColumn.show())}showColumn(e){var o;e.show(!1,!0),e.setWidth(e.getWidth()),"collapse"===this.mode&&((o=this.hiddenColumns.indexOf(e))>-1&&this.hiddenColumns.splice(o,1),this.generateCollapsedContent(),this.collapseHandleColumn&&!this.hiddenColumns.length&&this.collapseHandleColumn.hide())}update(){for(var e=this,o=!0;o;){let a="fitColumns"==e.table.modules.layout.getMode()?e.table.columnManager.getFlexBaseWidth():e.table.columnManager.getWidth(),c=(e.table.options.headerVisible?e.table.columnManager.element.clientWidth:e.table.element.clientWidth)-a;if(c<0){let d=e.columns[e.index];d?(e.hideColumn(d),e.index++):o=!1}else{let d=e.columns[e.index-1];d&&c>0&&c>=d.getWidth()?(e.showColumn(d),e.index--):o=!1}e.table.rowManager.activeRowsCount||e.table.rowManager.renderEmptyScroll()}}generateCollapsedContent(){var e=this;this.table.rowManager.getDisplayRows().forEach(function(a){e.generateCollapsedRowContent(a)})}generateCollapsedRowContent(e){var o,a;if(e.modules.responsiveLayout){for(o=e.modules.responsiveLayout.element;o.firstChild;)o.removeChild(o.firstChild);(a=this.collapseFormatter(this.generateCollapsedRowData(e)))&&o.appendChild(a)}}generateCollapsedRowData(e){var d,o=this,a=e.getData(),c=[];return this.hiddenColumns.forEach(function(p){var g=p.getFieldValue(a);p.definition.title&&p.field&&(p.modules.format&&o.table.options.responsiveLayoutCollapseUseFormatters?(d={value:!1,data:{},getValue:function(){return g},getData:function(){return a},getElement:function(){return document.createElement("div")},getRow:function(){return e.getComponent()},getColumn:function(){return p.getComponent()}},c.push({field:p.field,title:p.definition.title,value:p.modules.format.formatter.call(o.table.modules.format,d,p.modules.format.params,function(E){E()})})):c.push({field:p.field,title:p.definition.title,value:g}))}),c}formatCollapsedData(e){var o=document.createElement("table");return e.forEach(function(a){var g,c=document.createElement("tr"),d=document.createElement("td"),p=document.createElement("td"),v=document.createElement("strong");d.appendChild(v),this.langBind("columns|"+a.field,function(E){v.innerText=E||a.title}),a.value instanceof Node?((g=document.createElement("div")).appendChild(a.value),p.appendChild(g)):p.innerHTML=a.value,c.appendChild(d),c.appendChild(p),o.appendChild(c)},this),Object.keys(e).length?o:""}}return r.moduleName="responsiveLayout",r})();function vT(r,t,e,o,a,c,d){var p=window.DateTime||luxon.DateTime,g=d.format||"dd/MM/yyyy HH:mm:ss",v=d.alignEmptyValues,E=0;if(void 0!==p){if(r=p.fromFormat(r,g),t=p.fromFormat(t,g),r.isValid){if(t.isValid)return r-t;E=1}else E=t.isValid?-1:0;return("top"===v&&"desc"===c||"bottom"===v&&"asc"===c)&&(E*=-1),E}console.error("Sort Error - 'datetime' sorter is dependant on luxon.js")}var d6={number:function(r,t,e,o,a,c,d){var p=d.alignEmptyValues,g=d.decimalSeparator,v=d.thousandSeparator,E=0;if(r=String(r),t=String(t),v&&(r=r.split(v).join(""),t=t.split(v).join("")),g&&(r=r.split(g).join("."),t=t.split(g).join(".")),r=parseFloat(r),t=parseFloat(t),isNaN(r))E=isNaN(t)?0:-1;else{if(!isNaN(t))return r-t;E=1}return("top"===p&&"desc"===c||"bottom"===p&&"asc"===c)&&(E*=-1),E},string:function(r,t,e,o,a,c,d){var v,p=d.alignEmptyValues,g=0;if(r){if(t){switch(typeof d.locale){case"boolean":d.locale&&(v=this.langLocale());break;case"string":v=d.locale}return String(r).toLowerCase().localeCompare(String(t).toLowerCase(),v)}g=1}else g=t?-1:0;return("top"===p&&"desc"===c||"bottom"===p&&"asc"===c)&&(g*=-1),g},date:function(r,t,e,o,a,c,d){return d.format||(d.format="dd/MM/yyyy"),vT.call(this,r,t,e,o,a,c,d)},time:function(r,t,e,o,a,c,d){return d.format||(d.format="HH:mm"),vT.call(this,r,t,e,o,a,c,d)},datetime:vT,boolean:function(r,t,e,o,a,c,d){return(!0===r||"true"===r||"True"===r||1===r?1:0)-(!0===t||"true"===t||"True"===t||1===t?1:0)},array:function(r,t,e,o,a,c,d){var v=d.type||"length",E=d.alignEmptyValues,D=0;function x(L){switch(v){case"length":return L.length;case"sum":return L.reduce(function(U,ee){return U+ee});case"max":return Math.max.apply(null,L);case"min":return Math.min.apply(null,L);case"avg":return L.reduce(function(U,ee){return U+ee})/L.length}}if(Array.isArray(r)){if(Array.isArray(t))return(r?x(r):0)-(t?x(t):0);E=1}else E=Array.isArray(t)?-1:0;return("top"===E&&"desc"===c||"bottom"===E&&"asc"===c)&&(D*=-1),D},exists:function(r,t,e,o,a,c,d){return(void 0===r?0:1)-(void 0===t?0:1)},alphanum:function(r,t,e,o,a,c,d){var p,g,v,E,x,D=0,L=/(\d+)|(\D+)/g,U=/\d/,ee=d.alignEmptyValues,$=0;if(r||0===r){if(t||0===t){if(isFinite(r)&&isFinite(t))return r-t;if((p=String(r).toLowerCase())===(g=String(t).toLowerCase()))return 0;if(!U.test(p)||!U.test(g))return p>g?1:-1;for(p=p.match(L),g=g.match(L),x=p.length>g.length?g.length:p.length;D<x;)if((v=p[D])!==(E=g[D++]))return isFinite(v)&&isFinite(E)?("0"===v.charAt(0)&&(v="."+v),"0"===E.charAt(0)&&(E="."+E),v-E):v>E?1:-1;return p.length>g.length}$=1}else $=t||0===t?-1:0;return("top"===ee&&"desc"===c||"bottom"===ee&&"asc"===c)&&($*=-1),$}},p6={integer:function(r,t,e){return""===t||null==t||"number"==typeof(t=Number(t))&&isFinite(t)&&Math.floor(t)===t},float:function(r,t,e){return""===t||null==t||"number"==typeof(t=Number(t))&&isFinite(t)&&t%1!=0},numeric:function(r,t,e){return""===t||null==t||!isNaN(t)},string:function(r,t,e){return""===t||null==t||isNaN(t)},max:function(r,t,e){return""===t||null==t||parseFloat(t)<=e},min:function(r,t,e){return""===t||null==t||parseFloat(t)>=e},starts:function(r,t,e){return""===t||null==t||String(t).toLowerCase().startsWith(String(e).toLowerCase())},ends:function(r,t,e){return""===t||null==t||String(t).toLowerCase().endsWith(String(e).toLowerCase())},minLength:function(r,t,e){return""===t||null==t||String(t).length>=e},maxLength:function(r,t,e){return""===t||null==t||String(t).length<=e},in:function(r,t,e){return""===t||null==t||("string"==typeof e&&(e=e.split("|")),""===t||e.indexOf(t)>-1)},regex:function(r,t,e){return""===t||null==t||new RegExp(e).test(t)},unique:function(r,t,e){if(""===t||null==t)return!0;var o=!0,a=r.getData(),c=r.getColumn()._getSelf();return this.table.rowManager.rows.forEach(function(d){var p=d.getData();p!==a&&t==c.getFieldValue(p)&&(o=!1)}),o},required:function(r,t,e){return""!==t&&null!=t}},f6=Object.freeze({__proto__:null,AccessorModule:w5,AjaxModule:x5,ClipboardModule:k5,ColumnCalcsModule:F5,DataTreeModule:B5,DownloadModule:z5,EditModule:n4,ExportModule:r4,FilterModule:s4,FormatModule:M4,FrozenColumnsModule:I4,FrozenRowsModule:x4,GroupRowsModule:O4,HistoryModule:P4,HtmlTableImportModule:L4,InteractionModule:F4,KeybindingsModule:H4,MenuModule:U4,MoveColumnsModule:G4,MoveRowsModule:pv,MutatorModule:W4,PageModule:z4,PersistenceModule:$4,PrintModule:K4,ReactiveDataModule:J4,ResizeColumnsModule:Q4,ResizeRowsModule:Z4,ResizeTableModule:q4,ResponsiveLayoutModule:e6,SelectRowModule:(()=>{class r extends Zi{constructor(e){super(e),this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],this.headerCheckboxElement=null,this.registerTableOption("selectable","highlight"),this.registerTableOption("selectableRangeMode","drag"),this.registerTableOption("selectableRollingSelection",!0),this.registerTableOption("selectablePersistence",!0),this.registerTableOption("selectableCheck",function(o,a){return!0}),this.registerTableFunction("selectRow",this.selectRows.bind(this)),this.registerTableFunction("deselectRow",this.deselectRows.bind(this)),this.registerTableFunction("toggleSelectRow",this.toggleRow.bind(this)),this.registerTableFunction("getSelectedRows",this.getSelectedRows.bind(this)),this.registerTableFunction("getSelectedData",this.getSelectedData.bind(this)),this.registerComponentFunction("row","select",this.selectRows.bind(this)),this.registerComponentFunction("row","deselect",this.deselectRows.bind(this)),this.registerComponentFunction("row","toggleSelect",this.toggleRow.bind(this)),this.registerComponentFunction("row","isSelected",this.isRowSelected.bind(this))}initialize(){!1!==this.table.options.selectable&&(this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-deleting",this.rowDeleted.bind(this)),this.subscribe("rows-wipe",this.clearSelectionData.bind(this)),this.subscribe("rows-retrieve",this.rowRetrieve.bind(this)),this.table.options.selectable&&this.table.options.selectablePersistence&&this.subscribe("data-refeshing",this.deselectRows.bind(this)))}rowRetrieve(e,o){return"selected"===e?this.selectedRows:o}rowDeleted(e){this._deselectRow(e,!0)}clearSelectionData(e){this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],!0!==e&&this._rowSelectionChanged()}initializeRow(e){var o=this,a=e.getElement(),c=function(){setTimeout(function(){o.selecting=!1},50),document.body.removeEventListener("mouseup",c)};e.modules.select={selected:!1},o.table.options.selectableCheck.call(this.table,e.getComponent())?(a.classList.add("tabulator-selectable"),a.classList.remove("tabulator-unselectable"),o.table.options.selectable&&"highlight"!=o.table.options.selectable&&("click"===o.table.options.selectableRangeMode?a.addEventListener("click",function(d){if(d.shiftKey){o.table._clearSelection(),o.lastClickedRow=o.lastClickedRow||e;var p=o.table.rowManager.getDisplayRowIndex(o.lastClickedRow),g=o.table.rowManager.getDisplayRowIndex(e),v=p<=g?p:g,E=p>=g?p:g,x=o.table.rowManager.getDisplayRows().slice(0).splice(v,E-v+1);d.ctrlKey||d.metaKey?(x.forEach(function(L){L!==o.lastClickedRow&&(!0===o.table.options.selectable||o.isRowSelected(e)||o.selectedRows.length<o.table.options.selectable)&&o.toggleRow(L)}),o.lastClickedRow=e):(o.deselectRows(void 0,!0),!0!==o.table.options.selectable&&x.length>o.table.options.selectable&&(x=x.slice(0,o.table.options.selectable)),o.selectRows(x)),o.table._clearSelection()}else d.ctrlKey||d.metaKey?(o.toggleRow(e),o.lastClickedRow=e):(o.deselectRows(void 0,!0),o.selectRows(e),o.lastClickedRow=e)}):(a.addEventListener("click",function(d){(!o.table.modExists("edit")||!o.table.modules.edit.getCurrentCell())&&o.table._clearSelection(),o.selecting||o.toggleRow(e)}),a.addEventListener("mousedown",function(d){if(d.shiftKey)return o.table._clearSelection(),o.selecting=!0,o.selectPrev=[],document.body.addEventListener("mouseup",c),document.body.addEventListener("keyup",c),o.toggleRow(e),!1}),a.addEventListener("mouseenter",function(d){o.selecting&&(o.table._clearSelection(),o.toggleRow(e),o.selectPrev[1]==e&&o.toggleRow(o.selectPrev[0]))}),a.addEventListener("mouseout",function(d){o.selecting&&(o.table._clearSelection(),o.selectPrev.unshift(e))})))):(a.classList.add("tabulator-unselectable"),a.classList.remove("tabulator-selectable"))}toggleRow(e){this.table.options.selectableCheck.call(this.table,e.getComponent())&&(e.modules.select&&e.modules.select.selected?this._deselectRow(e):this._selectRow(e))}selectRows(e){var o;switch(typeof e){case"undefined":this.table.rowManager.rows.forEach(a=>{this._selectRow(a,!0,!0)}),this._rowSelectionChanged();break;case"string":(o=this.table.rowManager.findRow(e))?this._selectRow(o,!0,!0):this.table.rowManager.getRows(e).forEach(a=>{this._selectRow(a,!0,!0)}),this._rowSelectionChanged();break;default:Array.isArray(e)?(e.forEach(a=>{this._selectRow(a,!0,!0)}),this._rowSelectionChanged()):this._selectRow(e,!1,!0)}}_selectRow(e,o,a){if(!isNaN(this.table.options.selectable)&&!0!==this.table.options.selectable&&!a&&this.selectedRows.length>=this.table.options.selectable){if(!this.table.options.selectableRollingSelection)return!1;this._deselectRow(this.selectedRows[0])}var c=this.table.rowManager.findRow(e);c?-1==this.selectedRows.indexOf(c)&&(c.getElement().classList.add("tabulator-selected"),c.modules.select||(c.modules.select={}),c.modules.select.selected=!0,c.modules.select.checkboxEl&&(c.modules.select.checkboxEl.checked=!0),this.selectedRows.push(c),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(c,!0),o||this.dispatchExternal("rowSelected",c.getComponent()),this._rowSelectionChanged(o)):o||console.warn("Selection Error - No such row found, ignoring selection:"+e)}isRowSelected(e){return-1!==this.selectedRows.indexOf(e)}deselectRows(e,o){var c,a=this;if(void 0===e){c=a.selectedRows.length;for(let d=0;d<c;d++)a._deselectRow(a.selectedRows[0],!0);a._rowSelectionChanged(o)}else Array.isArray(e)?(e.forEach(function(d){a._deselectRow(d,!0)}),a._rowSelectionChanged(o)):a._deselectRow(e,o)}_deselectRow(e,o){var d,a=this,c=a.table.rowManager.findRow(e);c?(d=a.selectedRows.findIndex(function(p){return p==c}))>-1&&(c.getElement().classList.remove("tabulator-selected"),c.modules.select||(c.modules.select={}),c.modules.select.selected=!1,c.modules.select.checkboxEl&&(c.modules.select.checkboxEl.checked=!1),a.selectedRows.splice(d,1),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(c,!1),o||this.dispatchExternal("rowDeselected",c.getComponent()),a._rowSelectionChanged(o)):o||console.warn("Deselection Error - No such row found, ignoring selection:"+e)}getSelectedData(){var e=[];return this.selectedRows.forEach(function(o){e.push(o.getData())}),e}getSelectedRows(){var e=[];return this.selectedRows.forEach(function(o){e.push(o.getComponent())}),e}_rowSelectionChanged(e){this.headerCheckboxElement&&(0===this.selectedRows.length?(this.headerCheckboxElement.checked=!1,this.headerCheckboxElement.indeterminate=!1):this.table.rowManager.rows.length===this.selectedRows.length?(this.headerCheckboxElement.checked=!0,this.headerCheckboxElement.indeterminate=!1):(this.headerCheckboxElement.indeterminate=!0,this.headerCheckboxElement.checked=!1)),e||this.dispatchExternal("rowSelectionChanged",this.getSelectedData(),this.getSelectedRows())}registerRowSelectCheckbox(e,o){e._row.modules.select||(e._row.modules.select={}),e._row.modules.select.checkboxEl=o}registerHeaderSelectCheckbox(e){this.headerCheckboxElement=e}childRowSelection(e,o){var a=this.table.modules.dataTree.getChildren(e,!0);if(o)for(let c of a)this._selectRow(c,!0);else for(let c of a)this._deselectRow(c,!0)}}return r.moduleName="selectRow",r})(),SortModule:(()=>{class r extends Zi{constructor(e){super(e),this.sortList=[],this.changed=!1,this.registerTableOption("sortMode","local"),this.registerTableOption("initialSort",!1),this.registerTableOption("columnHeaderSortMulti",!0),this.registerTableOption("sortOrderReverse",!1),this.registerTableOption("headerSortElement","<div class='tabulator-arrow'></div>"),this.registerColumnOption("sorter"),this.registerColumnOption("sorterParams"),this.registerColumnOption("headerSort",!0),this.registerColumnOption("headerSortStartingDir"),this.registerColumnOption("headerSortTristate")}initialize(){this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("table-built",this.tableBuilt.bind(this)),this.registerDataHandler(this.sort.bind(this),20),this.registerTableFunction("setSort",this.userSetSort.bind(this)),this.registerTableFunction("getSorters",this.getSort.bind(this)),this.registerTableFunction("clearSort",this.clearSort.bind(this)),"remote"===this.table.options.sortMode&&this.subscribe("data-params",this.remoteSortParams.bind(this))}tableBuilt(){this.table.options.initialSort&&this.setSort(this.table.options.initialSort)}remoteSortParams(e,o,a,c){var d=this.getSort();return d.forEach(p=>{delete p.column}),c.sort=d,c}userSetSort(e,o){this.setSort(e,o),this.refreshSort()}clearSort(){this.clear(),this.refreshSort()}initializeColumn(e){var a,c,o=!1;switch(typeof e.definition.sorter){case"string":r.sorters[e.definition.sorter]?o=r.sorters[e.definition.sorter]:console.warn("Sort Error - No such sorter found: ",e.definition.sorter);break;case"function":o=e.definition.sorter}e.modules.sort={sorter:o,dir:"none",params:e.definition.sorterParams||{},startingDir:e.definition.headerSortStartingDir||"asc",tristate:e.definition.headerSortTristate},!1!==e.definition.headerSort&&((a=e.getElement()).classList.add("tabulator-sortable"),(c=document.createElement("div")).classList.add("tabulator-col-sorter"),"object"==typeof this.table.options.headerSortElement?c.appendChild(this.table.options.headerSortElement):c.innerHTML=this.table.options.headerSortElement,e.titleHolderElement.appendChild(c),e.modules.sort.element=c,a.addEventListener("click",d=>{var p="",g=[],v=!1;if(e.modules.sort){if(e.modules.sort.tristate)p="none"==e.modules.sort.dir?e.modules.sort.startingDir:e.modules.sort.dir==e.modules.sort.startingDir?"asc"==e.modules.sort.dir?"desc":"asc":"none";else switch(e.modules.sort.dir){case"asc":p="desc";break;case"desc":p="asc";break;default:p=e.modules.sort.startingDir}this.table.options.columnHeaderSortMulti&&(d.shiftKey||d.ctrlKey)?((v=(g=this.getSort()).findIndex(E=>E.field===e.getField()))>-1?(g[v].dir=p,v!=g.length-1&&(v=g.splice(v,1)[0],"none"!=p&&g.push(v))):"none"!=p&&g.push({column:e,dir:p}),this.setSort(g)):"none"==p?this.clear():this.setSort(e,p),this.refreshSort()}}))}refreshSort(){"remote"===this.table.options.sortMode?this.reloadData():this.refreshData()}hasChanged(){var e=this.changed;return this.changed=!1,e}getSort(){var o=[];return this.sortList.forEach(function(a){a.column&&o.push({column:a.column.getComponent(),field:a.column.getField(),dir:a.dir})}),o}setSort(e,o){var a=this,c=[];Array.isArray(e)||(e=[{column:e,dir:o}]),e.forEach(function(d){var p;(p=a.table.columnManager.findColumn(d.column))?(d.column=p,c.push(d),a.changed=!0):console.warn("Sort Warning - Sort field does not exist and is being ignored: ",d.column)}),a.sortList=c,this.dispatch("sort-changed")}clear(){this.setSort([])}findSorter(e){var d,o=this.table.rowManager.activeRows[0],a="string";if(o&&(o=o.getData(),e.getField()))switch(d=e.getFieldValue(o),typeof d){case"undefined":a="string";break;case"boolean":a="boolean";break;default:isNaN(d)||""===d?d.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)&&(a="alphanum"):a="number"}return r.sorters[a]}sort(e){var o=this,a=this.table.options.sortOrderReverse?o.sortList.slice().reverse():o.sortList,c=[],d=[];return this.subscribedExternal("dataSorting")&&this.dispatchExternal("dataSorting",o.getSort()),o.clearColumnHeaders(),"remote"!==this.table.options.sortMode?(a.forEach(function(p,g){var v=p.column.modules.sort;p.column&&v&&(v.sorter||(v.sorter=o.findSorter(p.column)),p.params="function"==typeof v.params?v.params(p.column.getComponent(),p.dir):v.params,c.push(p)),o.setColumnHeader(p.column,p.dir)}),c.length&&o._sortItems(e,c)):a.forEach(function(p,g){o.setColumnHeader(p.column,p.dir)}),this.subscribedExternal("dataSorted")&&(e.forEach(p=>{d.push(p.getComponent())}),this.dispatchExternal("dataSorted",o.getSort(),d)),e}clearColumnHeaders(){this.table.columnManager.getRealColumns().forEach(function(e){e.modules.sort&&(e.modules.sort.dir="none",e.getElement().setAttribute("aria-sort","none"))})}setColumnHeader(e,o){e.modules.sort.dir=o,e.getElement().setAttribute("aria-sort",o)}_sortItems(e,o){var a=o.length-1;e.sort((c,d)=>{for(var p,g=a;g>=0;g--){let v=o[g];if(0!==(p=this._sortRow(c,d,v.column,v.dir,v.params)))break}return p})}_sortRow(e,o,a,c,d){var p,g,v="asc"==c?e:o,E="asc"==c?o:e;return e=void 0!==(e=a.getFieldValue(v.getData()))?e:"",o=void 0!==(o=a.getFieldValue(E.getData()))?o:"",p=v.getComponent(),g=E.getComponent(),a.modules.sort.sorter.call(this,e,o,p,g,a.getComponent(),c,d)}}return r.moduleName="sort",r.sorters=d6,r})(),ValidateModule:(()=>{class r extends Zi{constructor(e){super(e),this.invalidCells=[],this.registerTableOption("validationMode","blocking"),this.registerColumnOption("validator"),this.registerTableFunction("getInvalidCells",this.getInvalidCells.bind(this)),this.registerTableFunction("clearCellValidation",this.userClearCellValidation.bind(this)),this.registerTableFunction("validate",this.userValidate.bind(this)),this.registerComponentFunction("cell","isValid",this.cellIsValid.bind(this)),this.registerComponentFunction("cell","clearValidation",this.clearValidation.bind(this)),this.registerComponentFunction("cell","validate",this.cellValidate.bind(this)),this.registerComponentFunction("column","validate",this.columnValidate.bind(this)),this.registerComponentFunction("row","validate",this.rowValidate.bind(this))}initialize(){this.subscribe("cell-delete",this.clearValidation.bind(this)),this.subscribe("column-layout",this.initializeColumnCheck.bind(this))}cellIsValid(e){return!e.modules.validate||!e.modules.validate.invalid}cellValidate(e){return this.validate(e.column.modules.validate,e,e.getValue())}columnValidate(e){var o=[];return e.cells.forEach(function(a){this.cellValidate(a)||o.push(a.getComponent())}),!o.length||o}rowValidate(e){var o=[];return e.cells.forEach(function(a){this.cellValidate(a)||o.push(a.getComponent())}),!o.length||o}userClearCellValidation(e){e||(e=this.getInvalidCells()),Array.isArray(e)||(e=[e]),e.forEach(o=>{this.clearValidation(o._getSelf())})}userValidate(e){var o=[];return this.table.rowManager.rows.forEach(function(a){var c=a.validate();!0!==c&&(o=o.concat(c))}),!o.length||o}initializeColumnCheck(e){void 0!==e.definition.validator&&this.initializeColumn(e)}initializeColumn(e){var c,o=this,a=[];e.definition.validator&&(Array.isArray(e.definition.validator)?e.definition.validator.forEach(function(d){(c=o._extractValidator(d))&&a.push(c)}):(c=this._extractValidator(e.definition.validator))&&a.push(c),e.modules.validate=!!a.length&&a)}_extractValidator(e){var o,a,c;switch(typeof e){case"string":return(c=e.indexOf(":"))>-1?(o=e.substring(0,c),a=e.substring(c+1)):o=e,this._buildValidator(o,a);case"function":return this._buildValidator(e);case"object":return this._buildValidator(e.type,e.parameters)}}_buildValidator(e,o){var a="function"==typeof e?e:r.validators[e];return a?{type:"function"==typeof e?"function":e,func:a,params:o}:(console.warn("Validator Setup Error - No matching validator found:",e),!1)}validate(e,o,a){var c=this,d=[],p=this.invalidCells.indexOf(o);return e&&e.forEach(function(g){g.func.call(c,o.getComponent(),a,g.params)||d.push({type:g.type,parameters:g.params})}),d=!d.length||d,o.modules.validate||(o.modules.validate={}),!0===d?(o.modules.validate.invalid=!1,o.getElement().classList.remove("tabulator-validation-fail"),p>-1&&this.invalidCells.splice(p,1)):(o.modules.validate.invalid=!0,"manual"!==this.table.options.validationMode&&o.getElement().classList.add("tabulator-validation-fail"),-1==p&&this.invalidCells.push(o)),d}getInvalidCells(){var e=[];return this.invalidCells.forEach(o=>{e.push(o.getComponent())}),e}clearValidation(e){var o;e.modules.validate&&e.modules.validate.invalid&&(e.getElement().classList.remove("tabulator-validation-fail"),e.modules.validate.invalid=!1,(o=this.invalidCells.indexOf(e))>-1&&this.invalidCells.splice(o,1))}}return r.moduleName="validate",r.validators=p6,r})()}),g6={debugEventsExternal:!1,debugEventsInternal:!1,debugInvalidOptions:!0,height:!1,minHeight:!1,maxHeight:!1,columnMaxWidth:!1,columnHeaderVertAlign:"top",columns:[],columnDefaults:{},data:!1,autoColumns:!1,autoColumnsDefinitions:!1,nestedFieldSeparator:".",tooltipGenerationMode:"load",footerElement:!1,index:"id",textDirection:"auto",addRowPos:"bottom",headerVisible:!0,renderVertical:"virtual",renderHorizontal:"basic",renderVerticalBuffer:0,scrollToRowPosition:"top",scrollToRowIfVisible:!0,scrollToColumnPosition:"left",scrollToColumnIfVisible:!0,rowFormatter:!1,rowFormatterPrint:null,rowFormatterClipboard:null,rowFormatterHtmlOutput:null,placeholder:!1,dataLoader:!0,dataLoaderLoading:!1,dataLoaderError:!1,dataSendParams:{},dataReceiveParams:{}};class DO{constructor(t,e){this.table=t,this.msgType=e,this.registeredDefaults={}}register(t,e){this.registeredDefaults[t]=e}generate(t,e={}){var o=Object.assign({},this.registeredDefaults);if(Object.assign(o,t),!1!==e.debugInvalidOptions||this.table.options.debugInvalidOptions)for(var a in e)o.hasOwnProperty(a)||console.warn("Invalid "+this.msgType+" option:",a);for(var a in o)a in e?o[a]=e[a]:Array.isArray(o[a])?o[a]=Object.assign([],o[a]):"object"==typeof o[a]&&null!==o[a]?o[a]=Object.assign({},o[a]):void 0===o[a]&&delete o[a];return o}}class fv extends Ma{constructor(t){super(t),this.elementVertical=t.rowManager.element,this.elementHorizontal=t.columnManager.element,this.tableElement=t.rowManager.tableElement,this.verticalFillMode="fit"}initialize(){}clearRows(){}clearColumns(){}reinitializeColumnWidths(t){}renderRows(){}renderColumns(){}rerenderRows(t){t&&t()}rerenderColumns(t,e){}renderRowCells(t){}rerenderRowCells(t,e){}scrollColumns(t,e){}scrollRows(t,e){}resize(){}scrollToRow(t){}scrollToRowNearestTop(t){}visibleRows(t){return[]}rows(){return this.table.rowManager.getDisplayRows()}styleRow(t,e){var o=t.getElement();e%2?(o.classList.add("tabulator-row-even"),o.classList.remove("tabulator-row-odd")):(o.classList.add("tabulator-row-odd"),o.classList.remove("tabulator-row-even"))}clear(){this.clearRows(),this.clearColumns()}render(){this.renderRows(),this.renderColumns()}rerender(t){this.rerenderRows(),this.rerenderColumns()}scrollToRowPosition(t,e,o){var a=this.rows().indexOf(t),c=t.getElement(),d=0;return new Promise((p,g)=>{if(a>-1){if(void 0===o&&(o=this.table.options.scrollToRowIfVisible),!o&&Jn.elVisible(c)&&(d=Jn.elOffset(c).top-Jn.elOffset(this.elementVertical).top)>0&&d<this.elementVertical.clientHeight-c.offsetHeight)return!1;switch(void 0===e&&(e=this.table.options.scrollToRowPosition),"nearest"===e&&(e=this.scrollToRowNearestTop(t)?"top":"bottom"),this.scrollToRow(t),e){case"middle":case"center":this.elementVertical.scrollTop=this.elementVertical.scrollHeight-this.elementVertical.scrollTop==this.elementVertical.clientHeight?this.elementVertical.scrollTop+(c.offsetTop-this.elementVertical.scrollTop)-(this.elementVertical.scrollHeight-c.offsetTop)/2:this.elementVertical.scrollTop-this.elementVertical.clientHeight/2;break;case"bottom":this.elementVertical.scrollTop=this.elementVertical.scrollHeight-this.elementVertical.scrollTop==this.elementVertical.clientHeight?this.elementVertical.scrollTop-(this.elementVertical.scrollHeight-c.offsetTop)+c.offsetHeight:this.elementVertical.scrollTop-this.elementVertical.clientHeight+c.offsetHeight}p()}else console.warn("Scroll Error - Row not visible"),g("Scroll Error - Row not visible")})}}class m6 extends fv{constructor(t){super(t)}renderRowCells(t){t.cells.forEach(e=>{t.element.appendChild(e.getElement()),e.cellRendered()})}reinitializeColumnWidths(t){t.forEach(function(e){e.reinitializeWidth()})}}class _6 extends fv{constructor(t){super(t),this.leftCol=0,this.rightCol=0,this.scrollLeft=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0,this.fitDataColAvg=0,this.window=200,this.initialized=!1,this.columns=[]}initialize(){this.compatabilityCheck()}compatabilityCheck(){var t=this.options("columns"),o=!0;return"fitDataTable"==this.options("layout")&&(console.warn("Horizontal Vitrual DOM is not compatible with fitDataTable layout mode"),o=!1),this.options("responsiveLayout")&&(console.warn("Horizontal Vitrual DOM is not compatible with responsive columns"),o=!1),this.options("rtl")&&(console.warn("Horizontal Vitrual DOM is not currently compatible with RTL text direction"),o=!1),t&&t.find(a=>a.frozen)&&(console.warn("Horizontal Vitrual DOM is not compatible with frozen columns"),o=!1),o}renderColumns(t,e){this.dataChange()}scrollColumns(t,e){this.scrollLeft!=t&&(this.scrollLeft=t,this.scroll(t-(this.vDomScrollPosLeft+this.window)))}rerenderColumns(t,e){var o={cols:this.columns,leftCol:this.leftCol,rightCol:this.rightCol};if(!t||this.initialized){this.clear(),this.scrollLeft=this.elementVertical.scrollLeft,this.vDomScrollPosLeft=this.scrollLeft-this.window,this.vDomScrollPosRight=this.scrollLeft+this.elementVertical.clientWidth+this.window;var a=0;this.table.columnManager.columnsByIndex.forEach(c=>{var d={};if(c.visible){var p=c.getWidth();d.leftPos=a,d.rightPos=a+p,d.width=p,"fitData"===this.options("layout")&&(d.fitDataCheck=!0),a+p>this.vDomScrollPosLeft&&a<this.vDomScrollPosRight?(-1==this.leftCol&&(this.leftCol=this.columns.length,this.vDomPadLeft=a),this.rightCol=this.columns.length):-1!==this.leftCol&&(this.vDomPadRight+=p),this.columns.push(c),c.modules.vdomHoz=d,a+=p}}),this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.initialized=!0,e||(!t||this.reinitChanged(o))&&this.renitializeRows(),this.elementVertical.scrollLeft=this.scrollLeft}}renderRowCells(t){this.initialized?this.initializeRow(t):t.cells.forEach(e=>{t.element.appendChild(e.getElement()),e.cellRendered()})}rerenderRowCells(t,e){this.reinitializeRow(t,e)}reinitializeColumnWidths(t){for(let e=this.leftCol;e<=this.rightCol;e++)this.columns[e].reinitializeWidth()}deinitialize(){this.initialized=!1}clear(){this.columns=[],this.leftCol=-1,this.rightCol=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0}dataChange(){var c,a,t=!1,e=0,o=0;if("fitData"===this.options("layout")){if(this.table.columnManager.columnsByIndex.forEach(d=>{!d.definition.width&&d.visible&&(t=!0)}),t&&t&&this.table.rowManager.getDisplayRows().length&&(this.vDomScrollPosRight=this.scrollLeft+this.elementVertical.clientWidth+this.window,a=this.chain("rows-sample",[1],[],()=>this.table.rowManager.getDisplayRows()[0])[0])){for(c=a.getElement(),a.generateCells(),this.tableElement.appendChild(c),o=0;o<a.cells.length;o++){let g=a.cells[o];if(c.appendChild(g.getElement()),g.column.reinitializeWidth(),(e+=g.column.getWidth())>this.vDomScrollPosRight)break}for(c.parentNode.removeChild(c),this.fitDataColAvg=Math.floor(e/(o+1));o<this.table.columnManager.columnsByIndex.length;o++)this.table.columnManager.columnsByIndex[o].setWidth(this.fitDataColAvg);this.rerenderColumns(!1,!0)}}else"fitColumns"===this.options("layout")&&(this.layoutRefresh(),this.rerenderColumns(!1,!0))}reinitChanged(t){var e=!0;return t.cols.length!==this.columns.length||t.leftCol!==this.leftCol||t.rightCol!==this.rightCol||(t.cols.forEach((o,a)=>{o!==this.columns[a]&&(e=!1)}),!e)}renitializeRows(){this.table.rowManager.getVisibleRows().forEach(e=>{this.reinitializeRow(e,!0)})}scroll(t){this.vDomScrollPosLeft+=t,this.vDomScrollPosRight+=t,t>.8*this.elementVertical.clientWidth?this.rerenderColumns():t>0?(this.addColRight(),this.removeColLeft()):(this.addColLeft(),this.removeColRight())}colPositionAdjust(t,e,o){for(let a=t;a<e;a++){let c=this.columns[a];c.modules.vdomHoz.leftPos+=o,c.modules.vdomHoz.rightPos+=o}}addColRight(){var t=this.columns[this.rightCol+1];t&&t.modules.vdomHoz.leftPos<=this.vDomScrollPosRight&&(this.table.rowManager.getVisibleRows().forEach(o=>{if("group"!==o.type){var a=o.getCell(t);o.getElement().appendChild(a.getElement()),a.cellRendered()}}),this.fitDataColActualWidthCheck(t),this.rightCol++,this.rightCol>=this.columns.length-1?this.vDomPadRight=0:this.vDomPadRight-=t.getWidth(),this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.addColRight())}addColLeft(){var t=this.columns[this.leftCol-1];t&&t.modules.vdomHoz.rightPos>=this.vDomScrollPosLeft&&(this.table.rowManager.getVisibleRows().forEach(a=>{if("group"!==a.type){var c=a.getCell(t);a.getElement().prepend(c.getElement()),c.cellRendered()}}),this.fitDataColActualWidthCheck(t),this.leftCol?this.vDomPadLeft-=t.getWidth():this.vDomPadLeft=0,this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.leftCol--,this.addColLeft())}removeColRight(t){var e;(t=this.columns[this.rightCol])&&t.modules.vdomHoz.leftPos>this.vDomScrollPosRight&&(e=this.table.rowManager.getVisibleRows(),t.modules.vdomHoz.visible=!1,e.forEach(o=>{if("group"!==o.type){var a=o.getCell(t);o.getElement().removeChild(a.getElement())}}),this.vDomPadRight+=t.getWidth(),this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.rightCol--,this.removeColRight())}removeColLeft(){var t=this.columns[this.leftCol];t&&t.modules.vdomHoz.rightPos<this.vDomScrollPosLeft&&(this.table.rowManager.getVisibleRows().forEach(o=>{if("group"!==o.type){var a=o.getCell(t);a.parentNode&&o.getElement().removeChild(a.getElement())}}),this.vDomPadLeft+=t.getWidth(),this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.leftCol++,this.removeColLeft())}fitDataColActualWidthCheck(t){var e,o;t.modules.vdomHoz.fitDataCheck&&(t.reinitializeWidth(),(o=(e=t.getWidth())-t.modules.vdomHoz.width)&&(t.modules.vdomHoz.rightPos+=o,t.modules.vdomHoz.width=e,this.colPositionAdjust(this.rightCol+2,this.columns.length,o)),t.modules.vdomHoz.fitDataCheck=!1)}initializeRow(t){if("group"!==t.type){t.modules.vdomHoz={leftCol:this.leftCol,rightCol:this.rightCol};for(let e=this.leftCol;e<=this.rightCol;e++){let o=this.columns[e];if(o&&o.visible){let a=t.getCell(o);t.getElement().appendChild(a.getElement()),a.cellRendered()}}}}reinitializeRow(t,e){if("group"!==t.type&&(e||!t.modules.vdomHoz||t.modules.vdomHoz.leftCol!==this.leftCol||t.modules.vdomHoz.rightCol!==this.rightCol)){for(var o=t.getElement();o.firstChild;)o.removeChild(o.firstChild);this.initializeRow(t)}}}class v6 extends Ma{constructor(t){super(t),this.blockHozScrollEvent=!1,this.headersElement=null,this.element=null,this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.scrollLeft=0,this.optionsList=new DO(this.table,"column definition"),this.renderer=null}initialize(){this.initializeRenderer(),this.headersElement=this.createHeadersElement(),this.element=this.createHeaderElement(),this.element.insertBefore(this.headersElement,this.element.firstChild),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this))}initializeRenderer(){var t;(t="string"==typeof this.table.options.renderHorizontal?{virtual:_6,basic:m6}[this.table.options.renderHorizontal]:this.table.options.renderHorizontal)?(this.renderer=new t(this.table,this.element,this.tableElement),this.renderer.initialize()):console.error("Unable to find matching renderer:",table.options.renderHorizontal)}createHeadersElement(){var t=document.createElement("div");return t.classList.add("tabulator-headers"),t.setAttribute("role","row"),t}createHeaderElement(){var t=document.createElement("div");return t.classList.add("tabulator-header"),t.setAttribute("role","rowgroup"),this.table.options.headerVisible||t.classList.add("tabulator-header-hidden"),t}getElement(){return this.element}getHeadersElement(){return this.headersElement}scrollHorizontal(t){var o=this.element.scrollWidth-this.table.element.clientWidth;this.element.scrollLeft=t,this.element.style.marginLeft=t>o?-(t-o)+"px":0,this.scrollLeft=t,this.renderer.scrollColumns(t)}generateColumnsFromRowData(t){var a,c,e=[],o=this.table.options.autoColumnsDefinitions;if(t&&t.length){for(var d in a=t[0]){let p={field:d,title:d},g=a[d];switch(typeof g){case"undefined":c="string";break;case"boolean":c="boolean";break;case"object":c=Array.isArray(g)?"array":"string";break;default:c=isNaN(g)||""===g?g.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)?"alphanum":"string":"number"}p.sorter=c,e.push(p)}if(o)switch(typeof o){case"function":this.table.options.columns=o.call(this.table,e);break;case"object":Array.isArray(o)?e.forEach(p=>{var g=o.find(v=>v.field===p.field);g&&Object.assign(p,g)}):e.forEach(p=>{o[p.field]&&Object.assign(p,o[p.field])}),this.table.options.columns=e}else this.table.options.columns=e;this.setColumns(this.table.options.columns)}}setColumns(t,e){for(;this.headersElement.firstChild;)this.headersElement.removeChild(this.headersElement.firstChild);this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.dispatch("columns-loading"),t.forEach((o,a)=>{this._addColumn(o)}),this._reIndexColumns(),this.dispatch("columns-loaded"),this.renderer.rerenderColumns(!1,!0),this.redraw(!0)}_addColumn(t,e,o){var a=new Ig(t,this),c=a.getElement(),d=o&&this.findColumnIndex(o);if(o&&d>-1){var p=o.getTopColumn(),g=this.columns.indexOf(p),v=p.getElement();e?(this.columns.splice(g,0,a),v.parentNode.insertBefore(c,v)):(this.columns.splice(g+1,0,a),v.parentNode.insertBefore(c,v.nextSibling))}else e?(this.columns.unshift(a),this.headersElement.insertBefore(a.getElement(),this.headersElement.firstChild)):(this.columns.push(a),this.headersElement.appendChild(a.getElement()));return a.columnRendered(),a}registerColumnField(t){t.definition.field&&(this.columnsByField[t.definition.field]=t)}registerColumnPosition(t){this.columnsByIndex.push(t)}_reIndexColumns(){this.columnsByIndex=[],this.columns.forEach(function(t){t.reRegisterPosition()})}verticalAlignHeaders(){var t=0;this.columns.forEach(e=>{var o;e.clearVerticalAlign(),(o=e.getHeight())>t&&(t=o)}),this.columns.forEach(e=>{e.verticalAlign(this.table.options.columnHeaderVertAlign,t)}),this.table.rowManager.adjustTableSize()}findColumn(t){return"object"!=typeof t?this.columnsByField[t]||!1:t instanceof Ig?t:t instanceof wO?t._getSelf()||!1:"undefined"!=typeof HTMLElement&&t instanceof HTMLElement&&this.columns.find(o=>o.element===t)||!1}getColumnByField(t){return this.columnsByField[t]}getColumnsByFieldRoot(t){var e=[];return Object.keys(this.columnsByField).forEach(o=>{o.split(".")[0]===t&&e.push(this.columnsByField[o])}),e}getColumnByIndex(t){return this.columnsByIndex[t]}getFirstVisibileColumn(t){return(t=this.columnsByIndex.findIndex(e=>e.visible))>-1&&this.columnsByIndex[t]}getColumns(){return this.columns}findColumnIndex(t){return this.columnsByIndex.findIndex(e=>t===e)}getRealColumns(){return this.columnsByIndex}traverse(t){this.columnsByIndex.forEach((e,o)=>{t(e,o)})}getDefinitions(t){var e=[];return this.columnsByIndex.forEach(o=>{(!t||t&&o.visible)&&e.push(o.getDefinition())}),e}getDefinitionTree(){var t=[];return this.columns.forEach(e=>{t.push(e.getDefinition(!0))}),t}getComponents(t){var e=[];return(t?this.columns:this.columnsByIndex).forEach(a=>{e.push(a.getComponent())}),e}getWidth(){var t=0;return this.columnsByIndex.forEach(e=>{e.visible&&(t+=e.getWidth())}),t}moveColumn(t,e,o){this.moveColumnActual(t,e,o),e.element.parentNode.insertBefore(t.element,e.element),o&&e.element.parentNode.insertBefore(e.element,t.element),this.verticalAlignHeaders(),this.table.rowManager.reinitialize()}moveColumnActual(t,e,o){this._moveColumnInArray(t.parent.isGroup?t.parent.columns:this.columns,t,e,o),this._moveColumnInArray(this.columnsByIndex,t,e,o,!0),this.renderer.rerenderColumns(!0),this.dispatch("column-moved",t,e,o),this.subscribedExternal("columnMoved")&&this.dispatchExternal("columnMoved",t.getComponent(),this.table.columnManager.getComponents())}_moveColumnInArray(t,e,o,a,c){var p,d=t.indexOf(e);d>-1&&(t.splice(d,1),(p=t.indexOf(o))>-1?a&&(p+=1):p=d,t.splice(p,0,e),c&&(this.chain("column-moving-rows",[e,o,a],null,[])||[]).concat(this.table.rowManager.rows).forEach(function(v){if(v.cells.length){var E=v.cells.splice(d,1)[0];v.cells.splice(p,0,E)}}))}scrollToColumn(t,e,o){var a=0,c=0,d=0,p=t.getElement();return new Promise((g,v)=>{if(void 0===e&&(e=this.table.options.scrollToColumnPosition),void 0===o&&(o=this.table.options.scrollToColumnIfVisible),t.visible){switch(e){case"middle":case"center":d=-this.element.clientWidth/2;break;case"right":d=p.clientWidth-this.headersElement.clientWidth}if(!o&&(c=p.offsetLeft)>0&&c+p.offsetWidth<this.element.clientWidth)return!1;a=p.offsetLeft+d,a=Math.max(Math.min(a,this.table.rowManager.element.scrollWidth-this.table.rowManager.element.clientWidth),0),this.table.rowManager.scrollHorizontal(a),this.scrollHorizontal(a),g()}else console.warn("Scroll Error - Column not visible"),v("Scroll Error - Column not visible")})}generateCells(t){var e=[];return this.columnsByIndex.forEach(o=>{e.push(o.generateCell(t))}),e}getFlexBaseWidth(){var t=this.table.element.clientWidth,e=0;return this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(t-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),this.columnsByIndex.forEach(function(o){var a,c,d;o.visible&&(a=o.definition.width||0,c=parseInt(o.minWidth),d="string"==typeof a?a.indexOf("%")>-1?t/100*parseInt(a):parseInt(a):a,e+=d>c?d:c)}),e}addColumn(t,e,o){return new Promise((a,c)=>{var d=this._addColumn(t,e,o);this._reIndexColumns(),this.dispatch("column-add",t,e,o),"fitColumns"!=this.layoutMode()&&d.reinitializeWidth(),this.redraw(!0),this.table.rowManager.reinitialize(),this.renderer.rerenderColumns(),a(d)})}deregisterColumn(t){var o,e=t.getField();e&&delete this.columnsByField[e],(o=this.columnsByIndex.indexOf(t))>-1&&this.columnsByIndex.splice(o,1),(o=this.columns.indexOf(t))>-1&&this.columns.splice(o,1),this.verticalAlignHeaders(),this.redraw()}redraw(t){Jn.elVisible(this.element)&&this.verticalAlignHeaders(),t&&(this.table.rowManager.resetScroll(),this.table.rowManager.reinitialize()),this.confirm("table-redrawing",t)||this.layoutRefresh(),this.dispatch("table-redraw",t),this.table.footerManager.redraw()}}class b6 extends fv{constructor(t){super(t),this.verticalFillMode="fill",this.scrollTop=0,this.scrollLeft=0,this.scrollTop=0,this.scrollLeft=0}clearRows(){for(var t=this.tableElement;t.firstChild;)t.removeChild(t.firstChild);t.scrollTop=0,t.scrollLeft=0,t.style.minWidth="",t.style.minHeight="",t.style.display="",t.style.visibility=""}renderRows(){var t=this.tableElement,e=!0;this.rows().forEach((o,a)=>{this.styleRow(o,a),t.appendChild(o.getElement()),o.initialize(!0),"group"!==o.type&&(e=!1)}),t.style.minWidth=e?this.table.columnManager.getWidth()+"px":""}rerenderRows(t){this.render(),t&&t()}scrollToRowNearestTop(t){var e=Jn.elOffset(t.getElement()).top;return!(Math.abs(this.elementVertical.scrollTop-e)>Math.abs(this.elementVertical.scrollTop+this.elementVertical.clientHeight-e))}scrollToRow(t){var e=t.getElement();this.elementVertical.scrollTop=Jn.elOffset(e).top-Jn.elOffset(this.elementVertical).top+this.elementVertical.scrollTop}visibleRows(t){return this.rows()}}class y6 extends fv{constructor(t){super(t),this.verticalFillMode="fill",this.scrollTop=0,this.scrollLeft=0,this.vDomRowHeight=20,this.vDomTop=0,this.vDomBottom=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomMaxRenderChain=90,this.vDomWindowBuffer=0,this.vDomWindowMinTotalRows=20,this.vDomWindowMinMarginRows=5,this.vDomTopNewRows=[],this.vDomBottomNewRows=[]}clearRows(){for(var t=this.tableElement;t.firstChild;)t.removeChild(t.firstChild);t.style.paddingTop="",t.style.paddingBottom="",t.style.minWidth="",t.style.minHeight="",t.style.display="",t.style.visibility="",this.elementVertical.scrollTop=0,this.elementVertical.scrollLeft=0,this.scrollTop=0,this.scrollLeft=0,this.vDomTop=0,this.vDomBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0}renderRows(){this._virtualRenderFill()}rerenderRows(t){for(var e=this.elementVertical.scrollTop,o=!1,a=!1,c=this.table.rowManager.scrollLeft,d=this.rows(),p=this.vDomTop;p<=this.vDomBottom;p++)if(d[p]){var g=e-d[p].getElement().offsetTop;if(!(!1===a||Math.abs(g)<a))break;a=g,o=p}d.forEach(v=>{v.deinitializeHeight()}),t&&t(),this._virtualRenderFill(!1===o?this.rows.length-1:o,!0,a||0),this.scrollColumns(c)}scrollColumns(t){this.table.rowManager.scrollHorizontal(t)}scrollRows(t,e){var o=t-this.vDomScrollPosTop,a=t-this.vDomScrollPosBottom,c=2*this.vDomWindowBuffer,d=this.rows();if(this.scrollTop=t,-o>c||a>c){var p=this.table.rowManager.scrollLeft;this._virtualRenderFill(Math.floor(this.elementVertical.scrollTop/this.elementVertical.scrollHeight*d.length)),this.scrollColumns(p)}else e?(o<0&&this._addTopRow(d,-o),a<0&&(this.vDomScrollHeight-this.scrollTop>this.vDomWindowBuffer?this._removeBottomRow(d,-a):this.vDomScrollPosBottom=this.scrollTop)):(a>=0&&this._addBottomRow(d,a),o>=0&&(this.scrollTop>this.vDomWindowBuffer?this._removeTopRow(d,o):this.vDomScrollPosTop=this.scrollTop))}resize(){this.vDomWindowBuffer=this.table.options.renderVerticalBuffer||this.elementVertical.clientHeight}scrollToRowNearestTop(t){var e=this.rows().indexOf(t);return!(Math.abs(this.vDomTop-e)>Math.abs(this.vDomBottom-e))}scrollToRow(t){var e=this.rows().indexOf(t);e>-1&&this._virtualRenderFill(e,!0)}visibleRows(t){var e=this.elementVertical.scrollTop,o=this.elementVertical.clientHeight+e,a=!1,c=0,d=0,p=this.rows();if(t)c=this.vDomTop,d=this.vDomBottom;else for(var g=this.vDomTop;g<=this.vDomBottom;g++)if(p[g])if(a){if(!(o-p[g].getElement().offsetTop>=0))break;d=g}else if(e-p[g].getElement().offsetTop>=0)c=g;else{if(a=!0,!(o-p[g].getElement().offsetTop>=0))break;d=g}return p.slice(c,d+1)}_virtualRenderFill(t,e,o){var a=this.tableElement,c=this.elementVertical,d=0,p=0,g=0,v=0,E=0,D=this.rows(),x=D.length,L=this.elementVertical.clientHeight;if(o=o||0,t=t||0){for(;a.firstChild;)a.removeChild(a.firstChild);(g=(x-t+1)*this.vDomRowHeight)<L&&(t-=Math.ceil((L-g)/this.vDomRowHeight))<0&&(t=0),t-=d=Math.min(Math.max(Math.floor(this.vDomWindowBuffer/this.vDomRowHeight),this.vDomWindowMinMarginRows),t)}else this.clear();if(x&&Jn.elVisible(this.elementVertical)){for(this.vDomTop=t,this.vDomBottom=t-1;(p<=L+this.vDomWindowBuffer||E<this.vDomWindowMinTotalRows)&&this.vDomBottom<x-1;){var $,U=this.vDomBottom+1,ee=D[U];this.styleRow(ee,U),a.appendChild(ee.getElement()),ee.initialize(),ee.heightInitialized||ee.normalizeHeight(!0),$=ee.getHeight(),E<d?v+=$:p+=$,$>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*$),this.vDomBottom++,E++}t?(this.vDomTopPad=e?this.vDomRowHeight*this.vDomTop+o:this.scrollTop-v,this.vDomBottomPad=this.vDomBottom==x-1?0:Math.max(this.vDomScrollHeight-this.vDomTopPad-p-v,0)):(this.vDomTopPad=0,this.vDomRowHeight=Math.floor((p+v)/E),this.vDomBottomPad=this.vDomRowHeight*(x-this.vDomBottom-1),this.vDomScrollHeight=v+p+this.vDomBottomPad-L),a.style.paddingTop=this.vDomTopPad+"px",a.style.paddingBottom=this.vDomBottomPad+"px",e&&(this.scrollTop=this.vDomTopPad+v+o-(this.elementVertical.scrollWidth>this.elementVertical.clientWidth?this.elementVertical.offsetHeight-L:0)),this.scrollTop=Math.min(this.scrollTop,this.elementVertical.scrollHeight-L),this.elementVertical.scrollWidth>this.elementVertical.offsetWidth&&e&&(this.scrollTop+=this.elementVertical.offsetHeight-L),this.vDomScrollPosTop=this.scrollTop,this.vDomScrollPosBottom=this.scrollTop,c.scrollTop=this.scrollTop,this.dispatch("render-virtual-fill")}}_addTopRow(t,e){for(var o=this.tableElement,a=[],c=0,d=this.vDomTop-1,p=0;this.vDomTop;){let v,E,g=t[d];if(!(g&&p<this.vDomMaxRenderChain))break;if(v=g.getHeight()||this.vDomRowHeight,E=g.initialized,!(e>=v))break;this.styleRow(g,d),o.insertBefore(g.getElement(),o.firstChild),(!g.initialized||!g.heightInitialized)&&a.push(g),g.initialize(),E||(v=g.getElement().offsetHeight,v>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*v)),e-=v,c+=v,this.vDomTop--,d--,p++}for(let g of a)g.clearCellHeight();this._quickNormalizeRowHeight(a),c&&(this.vDomTopPad-=c,this.vDomTopPad<0&&(this.vDomTopPad=d*this.vDomRowHeight),d<1&&(this.vDomTopPad=0),o.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop-=c)}_removeTopRow(t,e){for(var o=[],a=0,c=0;;){let p,d=t[this.vDomTop];if(!(d&&c<this.vDomMaxRenderChain))break;if(p=d.getHeight()||this.vDomRowHeight,!(e>=p))break;this.vDomTop++,e-=p,a+=p,o.push(d),c++}for(let d of o){let p=d.getElement();p.parentNode&&p.parentNode.removeChild(p)}a&&(this.vDomTopPad+=a,this.tableElement.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop+=this.vDomTop?a:a+this.vDomWindowBuffer)}_addBottomRow(t,e){for(var o=this.tableElement,a=[],c=0,d=this.vDomBottom+1,p=0;;){let v,E,g=t[d];if(!(g&&p<this.vDomMaxRenderChain))break;if(v=g.getHeight()||this.vDomRowHeight,E=g.initialized,!(e>=v))break;this.styleRow(g,d),o.appendChild(g.getElement()),(!g.initialized||!g.heightInitialized)&&a.push(g),g.initialize(),E||(v=g.getElement().offsetHeight,v>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*v)),e-=v,c+=v,this.vDomBottom++,d++,p++}for(let g of a)g.clearCellHeight();this._quickNormalizeRowHeight(a),c&&(this.vDomBottomPad-=c,(this.vDomBottomPad<0||d==t.length-1)&&(this.vDomBottomPad=0),o.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom+=c)}_removeBottomRow(t,e){for(var o=[],a=0,c=0;;){let p,d=t[this.vDomBottom];if(!(d&&c<this.vDomMaxRenderChain))break;if(p=d.getHeight()||this.vDomRowHeight,!(e>=p))break;this.vDomBottom--,e-=p,a+=p,o.push(d),c++}for(let d of o){let p=d.getElement();p.parentNode&&p.parentNode.removeChild(p)}a&&(this.vDomBottomPad+=a,this.vDomBottomPad<0&&(this.vDomBottomPad=0),this.tableElement.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom-=a)}_quickNormalizeRowHeight(t){for(let e of t)e.calcHeight();for(let e of t)e.setCellHeight()}}class E6 extends Ma{constructor(t){super(t),this.element=this.createHolderElement(),this.tableElement=this.createTableElement(),this.heightFixer=this.createTableElement(),this.firstRender=!1,this.renderMode="virtual",this.fixedHeight=!1,this.rows=[],this.activeRowsPipeline=[],this.activeRows=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0,this.scrollTop=0,this.scrollLeft=0,this.rowNumColumn=!1,this.redrawBlock=!1,this.redrawBlockRestoreConfig=!1,this.redrawBlockRederInPosition=!1,this.dataPipeline=[],this.displayPipeline=[],this.renderer=null}createHolderElement(){var t=document.createElement("div");return t.classList.add("tabulator-tableholder"),t.setAttribute("tabindex",0),t.setAttribute("role","rowgroup"),t}createTableElement(){var t=document.createElement("div");return t.classList.add("tabulator-table"),t.setAttribute("role","rowgroup"),t}getElement(){return this.element}getTableElement(){return this.tableElement}getRowPosition(t,e){return e?this.activeRows.indexOf(t):this.rows.indexOf(t)}initialize(){this.initializeRenderer(),this.element.appendChild(this.tableElement),this.firstRender=!0,this.element.addEventListener("scroll",()=>{var t=this.element.scrollLeft,e=this.scrollLeft>t,o=this.element.scrollTop,a=this.scrollTop>o;this.scrollLeft!=t&&(this.scrollLeft=t,this.dispatch("scroll-horizontal",t,e),this.dispatchExternal("scrollHorizontal",t,e)),this.scrollTop!=o&&(this.scrollTop=o,this.renderer.scrollRows(o,a),this.dispatch("scroll-vertical",o,a),this.dispatchExternal("scrollVertical",o,a))})}findRow(t){return"object"!=typeof t?null!=t&&(this.rows.find(o=>o.data[this.table.options.index]==t)||!1):t instanceof Zo?t:t instanceof mT?t._getSelf()||!1:"undefined"!=typeof HTMLElement&&t instanceof HTMLElement&&this.rows.find(o=>o.getElement()===t)||!1}getRowFromDataObject(t){return this.rows.find(o=>o.data===t)||!1}getRowFromPosition(t,e){return e?this.activeRows[t]:this.rows[t]}scrollToRow(t,e,o){return this.renderer.scrollToRowPosition(t,e,o)}setData(t,e,o){return new Promise((a,c)=>{e&&this.getDisplayRows().length?this.table.options.pagination?this._setDataActual(t,!0):this.reRenderInPosition(()=>{this._setDataActual(t)}):(this.table.options.autoColumns&&o&&this.table.initialized&&this.table.columnManager.generateColumnsFromRowData(t),this.resetScroll(),this._setDataActual(t)),a()})}_setDataActual(t,e){this.dispatchExternal("dataProcessing",t),this._wipeElements(),Array.isArray(t)?(this.dispatch("data-processing",t),t.forEach((o,a)=>{if(o&&"object"==typeof o){var c=new Zo(o,this);this.rows.push(c)}else console.warn("Data Loading Warning - Invalid row data detected and ignored, expecting object but received:",o)}),this.refreshActiveData(!1,!1,e),this.dispatch("data-processed",t),this.dispatchExternal("dataProcessed",t)):console.error("Data Loading Error - Unable to process data due to invalid data type \nExpecting: array \nReceived: ",typeof t,"\nData:     ",t)}_wipeElements(){this.dispatch("rows-wipe"),this.rows.forEach(t=>{t.wipe()}),this.rows=[],this.activeRows=[],this.activeRowsPipeline=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0,this.adjustTableSize()}deleteRow(t,e){var o=this.rows.indexOf(t),a=this.activeRows.indexOf(t);a>-1&&this.activeRows.splice(a,1),o>-1&&this.rows.splice(o,1),this.setActiveRows(this.activeRows),this.displayRowIterator(c=>{var d=c.indexOf(t);d>-1&&c.splice(d,1)}),e||this.reRenderInPosition(),this.regenerateRowNumbers(),this.dispatchExternal("rowDeleted",t.getComponent()),this.displayRowsCount||this._showPlaceholder(),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.getData())}addRow(t,e,o,a){var c=this.addRowActual(t,e,o,a);return this.dispatch("row-added",c,t,e,o),c}addRows(t,e,o){var a=[];return new Promise((c,d)=>{e=this.findAddRowPos(e),Array.isArray(t)||(t=[t]),(void 0===o&&e||void 0!==o&&!e)&&t.reverse(),t.forEach((p,g)=>{var v=this.addRow(p,e,o,!0);a.push(v),this.dispatch("row-added",v,t,e,o)}),this.refreshActiveData(!1,!1,!0),this.regenerateRowNumbers(),a.length&&this._clearPlaceholder(),c(a)})}findAddRowPos(t){return void 0===t&&(t=this.table.options.addRowPos),"pos"===t&&(t=!0),"bottom"===t&&(t=!1),t}addRowActual(t,e,o,a){var g,v,c=t instanceof Zo?t:new Zo(t||{},this),d=this.findAddRowPos(e),p=-1;return o||(v=this.chain("row-adding-position",[c,d],null,{index:o,top:d}),o=v.index,d=v.top),void 0!==o&&(o=this.findRow(o)),(o=this.chain("row-adding-index",[c,o,d],null,o))&&(p=this.rows.indexOf(o)),o&&p>-1?(g=this.activeRows.indexOf(o),this.displayRowIterator(function(E){var D=E.indexOf(o);D>-1&&E.splice(d?D:D+1,0,c)}),g>-1&&this.activeRows.splice(d?g:g+1,0,c),this.rows.splice(d?p:p+1,0,c)):d?(this.displayRowIterator(function(E){E.unshift(c)}),this.activeRows.unshift(c),this.rows.unshift(c)):(this.displayRowIterator(function(E){E.push(c)}),this.activeRows.push(c),this.rows.push(c)),this.setActiveRows(this.activeRows),this.dispatchExternal("rowAdded",c.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()),a||this.reRenderInPosition(),c}moveRow(t,e,o){this.dispatch("row-move",t,e,o),this.moveRowActual(t,e,o),this.regenerateRowNumbers(),this.dispatch("row-moved",t,e,o),this.dispatchExternal("rowMoved",t.getComponent())}moveRowActual(t,e,o){this.moveRowInArray(this.rows,t,e,o),this.moveRowInArray(this.activeRows,t,e,o),this.displayRowIterator(a=>{this.moveRowInArray(a,t,e,o)}),this.dispatch("row-moving",t,e,o)}moveRowInArray(t,e,o,a){var c,d,g;if(e!==o&&((c=t.indexOf(e))>-1&&(t.splice(c,1),d=t.indexOf(o),t.splice(d>-1?a?d+1:d:c,0,e)),t===this.getDisplayRows())){g=d>c?d:c+1;for(let v=c<d?c:d;v<=g;v++)t[v]&&this.styleRow(t[v],v)}}clearData(){this.setData([])}getRowIndex(t){return this.findRowIndex(t,this.rows)}getDisplayRowIndex(t){var e=this.getDisplayRows().indexOf(t);return e>-1&&e}nextDisplayRow(t,e){var o=this.getDisplayRowIndex(t),a=!1;return!1!==o&&o<this.displayRowsCount-1&&(a=this.getDisplayRows()[o+1]),!a||a instanceof Zo&&"row"==a.type?a:this.nextDisplayRow(a,e)}prevDisplayRow(t,e){var o=this.getDisplayRowIndex(t),a=!1;return o&&(a=this.getDisplayRows()[o-1]),!e||!a||a instanceof Zo&&"row"==a.type?a:this.prevDisplayRow(a,e)}findRowIndex(t,e){var o;return!!((t=this.findRow(t))&&(o=e.indexOf(t),o>-1))&&o}getData(t,e){var o=[];return this.getRows(t).forEach(function(c){"row"==c.type&&o.push(c.getData(e||"data"))}),o}getComponents(t){var e=[];return this.getRows(t).forEach(function(a){e.push(a.getComponent())}),e}getDataCount(t){return this.getRows(t).length}scrollHorizontal(t){this.scrollLeft=t,this.element.scrollLeft=t,this.dispatch("scroll-horizontal",t)}registerDataPipelineHandler(t,e){void 0!==e?(this.dataPipeline.push({handler:t,priority:e}),this.dataPipeline.sort((o,a)=>o.priority-a.priority)):console.error("Data pipeline handlers must have a priority in order to be registered")}registerDisplayPipelineHandler(t,e){void 0!==e?(this.displayPipeline.push({handler:t,priority:e}),this.displayPipeline.sort((o,a)=>o.priority-a.priority)):console.error("Display pipeline handlers must have a priority in order to be registered")}refreshActiveData(t,e,o){var a=this.table,c="",d=0,p=["all","dataPipeline","display","displayPipeline","end"];if("function"==typeof t)if((d=this.dataPipeline.findIndex(g=>g.handler===t))>-1)c="dataPipeline",e&&(d==this.dataPipeline.length-1?c="display":d++);else{if(!((d=this.displayPipeline.findIndex(g=>g.handler===t))>-1))return void console.error("Unable to refresh data, invalid handler provided",t);c="displayPipeline",e&&(d==this.displayPipeline.length-1?c="end":d++)}else c=t||"all",d=0;if(this.redrawBlock)(!this.redrawBlockRestoreConfig||this.redrawBlockRestoreConfig&&(this.redrawBlockRestoreConfig.stage===c&&d<this.redrawBlockRestoreConfig.index||p.indexOf(c)<p.indexOf(this.redrawBlockRestoreConfig.stage)))&&(this.redrawBlockRestoreConfig={handler:t,skipStage:e,renderInPosition:o,stage:c,index:d});else{switch(this.dispatch("data-refeshing"),t||(this.activeRowsPipeline[0]=this.rows.slice(0)),c){case"all":case"dataPipeline":for(let g=d;g<this.dataPipeline.length;g++){let v=this.dataPipeline[g].handler(this.activeRowsPipeline[g].slice(0));this.activeRowsPipeline[g+1]=v||this.activeRowsPipeline[g].slice(0)}this.setActiveRows(this.activeRowsPipeline[this.dataPipeline.length]),this.regenerateRowNumbers();case"display":d=0,this.resetDisplayRows();case"displayPipeline":for(let g=d;g<this.displayPipeline.length;g++){let v=this.displayPipeline[g].handler((g?this.getDisplayRows(g-1):this.activeRows).slice(0),o);this.setDisplayRows(v||this.getDisplayRows(g-1).slice(0),g)}}Jn.elVisible(this.element)&&(o?this.reRenderInPosition():(t||this.table.columnManager.renderer.renderColumns(),this.renderTable(),a.options.layoutColumnsOnNewData&&this.table.columnManager.redraw(!0))),this.dispatch("data-refeshed")}}regenerateRowNumbers(){this.rowNumColumn&&this.activeRows.forEach(t=>{var e=t.getCell(this.rowNumColumn);e&&e._generateContents()})}setActiveRows(t){this.activeRows=t,this.activeRowsCount=this.activeRows.length}resetDisplayRows(){this.displayRows=[],this.displayRows.push(this.activeRows.slice(0)),this.displayRowsCount=this.displayRows[0].length}getNextDisplayIndex(){return this.displayRows.length}setDisplayRows(t,e){var o=!0;return e&&void 0!==this.displayRows[e]?(this.displayRows[e]=t,o=!0):(this.displayRows.push(t),o=e=this.displayRows.length-1),e==this.displayRows.length-1&&(this.displayRowsCount=this.displayRows[this.displayRows.length-1].length),o}getDisplayRows(t){return void 0===t?this.displayRows.length?this.displayRows[this.displayRows.length-1]:[]:this.displayRows[t]||[]}getVisibleRows(t){return this.renderer.visibleRows(!t)}displayRowIterator(t){this.activeRowsPipeline.forEach(t),this.displayRows.forEach(t),this.displayRowsCount=this.displayRows[this.displayRows.length-1].length}getRows(t){var e;switch(t){case"active":e=this.activeRows;break;case"display":e=this.table.rowManager.getDisplayRows();break;case"visible":e=this.getVisibleRows(!0);break;default:e=this.chain("rows-retrieve",t,null,this.rows)||this.rows}return e}reRenderInPosition(t){this.redrawBlock?t?t():this.redrawBlockRederInPosition=!0:this.renderer.rerenderRows(t)}initializeRenderer(){var t;(t="string"==typeof this.table.options.renderVertical?{virtual:y6,basic:b6}[this.table.options.renderVertical]:this.table.options.renderVertical)?(this.renderer=new t(this.table,this.element,this.tableElement),this.renderer.initialize(),this.fixedHeight=!(!this.table.element.clientHeight&&!this.table.options.height)):console.error("Unable to find matching renderer:",table.options.renderVertical)}getRenderMode(){return this.renderMode}renderTable(){this.dispatchExternal("renderStarted"),this.element.scrollTop=0,this._clearTable(),this.displayRowsCount?(this.renderer.renderRows(),this.firstRender&&(this.firstRender=!1,this.layoutRefresh())):this.renderEmptyScroll(),this.fixedHeight||this.adjustTableSize(),this.dispatch("table-layout"),this.displayRowsCount||this._showPlaceholder(),this.dispatchExternal("renderComplete")}renderEmptyScroll(){this.table.options.placeholder?this.tableElement.style.display="none":this.tableElement.style.minWidth=this.table.columnManager.getWidth()+"px"}_clearTable(){this._clearPlaceholder(),this.scrollTop=0,this.scrollLeft=0,this.renderer.clearRows()}_showPlaceholder(){this.table.options.placeholder&&(this.table.options.placeholder.setAttribute("tabulator-render-mode",this.renderMode),this.getElement().appendChild(this.table.options.placeholder),this.table.options.placeholder.style.width=this.table.columnManager.getWidth()+"px")}_clearPlaceholder(){this.table.options.placeholder&&this.table.options.placeholder.parentNode&&this.table.options.placeholder.parentNode.removeChild(this.table.options.placeholder)}styleRow(t,e){var o=t.getElement();e%2?(o.classList.add("tabulator-row-even"),o.classList.remove("tabulator-row-odd")):(o.classList.add("tabulator-row-odd"),o.classList.remove("tabulator-row-even"))}normalizeHeight(){this.activeRows.forEach(function(t){t.normalizeHeight()})}adjustTableSize(){var t=this.element.clientHeight;if("fill"===this.renderer.verticalFillMode){let e=Math.floor(this.table.columnManager.getElement().getBoundingClientRect().height+(this.table.footerManager&&this.table.footerManager.active&&!this.table.footerManager.external?this.table.footerManager.getElement().getBoundingClientRect().height:0));this.fixedHeight?(this.element.style.minHeight="calc(100% - "+e+"px)",this.element.style.height="calc(100% - "+e+"px)",this.element.style.maxHeight="calc(100% - "+e+"px)"):(this.element.style.height="",this.element.style.height=this.table.element.clientHeight-e+"px",this.element.scrollTop=this.scrollTop),this.renderer.resize(),!this.fixedHeight&&t!=this.element.clientHeight&&(this.subscribed("table-resize")?this.dispatch("table-resize"):this.redraw())}}reinitialize(){this.rows.forEach(function(t){t.reinitialize(!0)})}blockRedraw(){this.redrawBlock=!0,this.redrawBlockRestoreConfig=!1}restoreRedraw(){this.redrawBlock=!1,this.redrawBlockRestoreConfig?(this.refreshActiveData(this.redrawBlockRestoreConfig.handler,this.redrawBlockRestoreConfig.skipStage,this.redrawBlockRestoreConfig.renderInPosition),this.redrawBlockRestoreConfig=!1):this.redrawBlockRederInPosition&&this.reRenderInPosition(),this.redrawBlockRederInPosition=!1}redraw(t){var e=this.scrollLeft;this.adjustTableSize(),this.table.tableWidth=this.table.element.clientWidth,t?this.renderTable():(this.reRenderInPosition(),this.scrollHorizontal(e),this.displayRowsCount||this.table.options.placeholder&&this.getElement().appendChild(this.table.options.placeholder))}resetScroll(){if(this.element.scrollLeft=0,this.element.scrollTop=0,"ie"===this.table.browser){var t=document.createEvent("Event");t.initEvent("scroll",!1,!0),this.element.dispatchEvent(t)}else this.element.dispatchEvent(new Event("scroll"))}}class C6 extends Ma{constructor(t){super(t),this.active=!1,this.element=this.createElement(),this.external=!1,this.links=[],this.initializeElement()}initialize(){this.initializeElement()}createElement(){var t=document.createElement("div");return t.classList.add("tabulator-footer"),t}initializeElement(){this.table.options.footerElement&&("string"==typeof this.table.options.footerElement?"<"===this.table.options.footerElement[0]?this.element.innerHTML=this.table.options.footerElement:(this.external=!0,this.element=document.querySelector(this.table.options.footerElement)):this.element=this.table.options.footerElement)}getElement(){return this.element}append(t,e){this.activate(e),this.element.appendChild(t),this.table.rowManager.adjustTableSize()}prepend(t,e){this.activate(e),this.element.insertBefore(t,this.element.firstChild),this.table.rowManager.adjustTableSize()}remove(t){t.parentNode.removeChild(t),this.deactivate()}deactivate(t){(!this.element.firstChild||t)&&(this.external||this.element.parentNode.removeChild(this.element),this.active=!1)}activate(t){this.active||(this.active=!0,this.external||(this.table.element.appendChild(this.getElement()),this.table.element.style.display="")),t&&this.links.push(t)}redraw(){this.links.forEach(function(t){t.footerRedraw()})}}class T6 extends Ma{constructor(t){super(t),this.el=this.table.element,this.abortClasses=["tabulator-headers","tabulator-table"],this.previousTargets={},this.listeners=["click","dblclick","contextmenu","mouseenter","mouseleave","mouseover","mouseout","mousemove","touchstart","touchend"],this.componentMap={"tabulator-cell":"cell","tabulator-row":"row","tabulator-group":"group","tabulator-col":"column"},this.buildListenerMap(),this.bindSubscriptionWatchers()}buildListenerMap(){var t={};this.listeners.forEach(e=>{t[e]={handler:null,components:[]}}),this.listeners=t}bindSubscriptionWatchers(){var t=Object.keys(this.listeners),e=Object.values(this.componentMap);for(let o of e)for(let a of t)this.subscriptionChange(o+"-"+a,this.subscriptionChanged.bind(this,o,a))}subscriptionChanged(t,e,o){var a=this.listeners[e].components,c=a.indexOf(t),d=!1;o?-1===c&&(a.push(t),d=!0):this.subscribed(t+"-"+e)||c>-1&&(a.splice(c,1),d=!0),d&&this.updateEventListeners()}updateEventListeners(){for(let t in this.listeners){let e=this.listeners[t];e.components.length?e.handler||(e.handler=this.track.bind(this,t),this.el.addEventListener(t,e.handler)):e.handler&&(this.el.removeEventListener(t,e.handler),e.handler=null)}}track(t,e){var o=e.composedPath&&e.composedPath()||e.path,a=this.findTargets(o);a=this.bindComponents(t,a),this.triggerEvents(t,e,a)}findTargets(t){var e={};let o=Object.keys(this.componentMap);for(let a of t){let c=a.classList?[...a.classList]:[];if(c.filter(g=>this.abortClasses.includes(g)).length)break;let p=c.filter(g=>o.includes(g));for(let g of p)e[this.componentMap[g]]=a}return e.group&&e.group===e.row&&delete e.row,e}bindComponents(t,e){var o=Object.keys(e).reverse(),a=this.listeners[t],c={};for(let d of o){let p,g=e[d],v=this.previousTargets[d];if(v&&v.target===g)p=v.component;else switch(d){case"row":case"group":(a.components.includes("row")||a.components.includes("cell"))&&(p=this.table.rowManager.getVisibleRows().find(D=>D.getElement()===g));break;case"column":a.components.includes("column")&&(p=this.table.columnManager.findColumn(g));break;case"cell":a.components.includes("cell")&&(p=e.row.findCell(g))}p&&(e[d]=p,c[d]={target:g,component:p})}return this.previousTargets=c,e}triggerEvents(t,e,o){var a=this.listeners[t];for(let c in o)o[c]&&a.components.includes(c)&&this.dispatch(c+"-"+t,e,o[c])}}class w6{constructor(t){this.table=t,this.bindings={}}bind(t,e,o){this.bindings[t]||(this.bindings[t]={}),this.bindings[t][e]?console.warn("Unable to bind component handler, a matching function name is already bound",t,e,hanlder):this.bindings[t][e]=o}handle(t,e,o){if(this.bindings[t]&&this.bindings[t][o])return this.bindings[t][o].bind(null,e);"then"!==o&&"string"==typeof o&&!o.startsWith("_")&&console.error("The "+t+" component does not have a "+o+" function, have you checked that you have the correct Tabulator module installed?")}}class S6 extends Ma{constructor(t){super(t),this.loaderElement=this.createLoaderElement(),this.msgElement=this.createMsgElement(),this.loadingElement=null,this.errorElement=null,this.requestOrder=0,this.loading=!1}initialize(){var t;this.loaderElement.appendChild(this.msgElement),this.table.options.dataLoaderLoading&&("string"==typeof this.table.options.dataLoaderLoading?((t=document.createElement("template")).innerHTML=this.table.options.dataLoaderLoading.trim(),this.loadingElement=t.firstElementChild):this.loadingElement=this.table.options.dataLoaderLoading),this.table.options.dataLoaderError&&("string"==typeof this.table.options.dataLoaderError?((t=document.createElement("template")).innerHTML=this.table.options.dataLoaderError.trim(),this.errorElement=t.firstElementChild):this.errorElement=this.table.options.dataLoaderError)}createLoaderElement(){var t=document.createElement("div");return t.classList.add("tabulator-loader"),t}createMsgElement(){var t=document.createElement("div");return t.classList.add("tabulator-loader-msg"),t.setAttribute("role","alert"),t}load(t,e,o,a,c){var d=++this.requestOrder;return this.dispatchExternal("dataLoading",t),t&&(0==t.indexOf("{")||0==t.indexOf("["))&&(t=JSON.parse(t)),this.confirm("data-loading",t,e,o,c)?(this.loading=!0,c||this.showLoader(),e=this.chain("data-params",[t,o,c],e||{},{}),e=this.mapParams(e,this.table.options.dataSendParams),this.chain("data-load",[t,e,o,c],Promise.resolve([])).then(v=>{!Array.isArray(v)&&"object"==typeof v&&(v=this.mapParams(v,this.objectInvert(this.table.options.dataReceiveParams)));var E=this.chain("data-loaded",v,null,v);d==this.requestOrder?(this.hideLoader(),!1!==E&&(this.dispatchExternal("dataLoaded",E),this.table.rowManager.setData(E,a,!a))):console.warn("Data Load Response Blocked - An active data load request was blocked by an attempt to change table data while the request was being made")}).catch(v=>{console.error("Data Load Error: ",v),this.dispatchExternal("dataLoadError",v),c||this.showError(),setTimeout(()=>{this.hideLoader()},3e3)}).finally(()=>{this.loading=!1})):(this.dispatchExternal("dataLoaded",t),t||(t=[]),this.table.rowManager.setData(t,a,!a),Promise.resolve())}mapParams(t,e){var o={};for(let a in t)o[e.hasOwnProperty(a)?e[a]:a]=t[a];return o}objectInvert(t){var e={};for(let o in t)e[t[o]]=o;return e}blockActiveLoad(){this.requestOrder++}showLoader(){if("function"==typeof this.table.options.dataLoader?this.table.options.dataLoader():this.table.options.dataLoader){for(this.hideLoader();this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.remove("tabulator-error"),this.msgElement.classList.add("tabulator-loading"),this.loadingElement?this.msgElement.appendChild(this.loadingElement):this.msgElement.innerHTML=this.langText("data|loading"),this.table.element.appendChild(this.loaderElement)}}showError(){for(this.hideLoader();this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.remove("tabulator-loading"),this.msgElement.classList.add("tabulator-error"),this.errorElement?this.msgElement.appendChild(this.errorElement):this.msgElement.innerHTML=this.langText("data|error"),this.table.element.appendChild(this.loaderElement)}hideLoader(){this.loaderElement.parentNode&&this.loaderElement.parentNode.removeChild(this.loaderElement)}}class D6{constructor(t,e,o){this.table=t,this.events={},this.optionsList=e||{},this.subscriptionNotifiers={},this.dispatch=o?this._debugDispatch.bind(this):this._dispatch.bind(this),this.debug=o}subscriptionChange(t,e){this.subscriptionNotifiers[t]||(this.subscriptionNotifiers[t]=[]),this.subscriptionNotifiers[t].push(e),this.subscribed(t)&&this._notifiySubscriptionChange(t,!0)}subscribe(t,e){this.events[t]||(this.events[t]=[]),this.events[t].push(e),this._notifiySubscriptionChange(t,!0)}unsubscribe(t,e){var o;if(this.events[t]){if(e){if(!((o=this.events[t].findIndex(a=>a===e))>-1))return void console.warn("Cannot remove event, no matching event found:",t,e);this.events[t].splice(o,1)}else delete this.events[t];this._notifiySubscriptionChange(t,!1)}else console.warn("Cannot remove event, no events set on:",t)}subscribed(t){return this.events[t]&&this.events[t].length}_notifiySubscriptionChange(t,e){var o=this.subscriptionNotifiers[t];o&&o.forEach(a=>{a(e)})}_dispatch(){var o,t=Array.from(arguments),e=t.shift();return this.events[e]&&this.events[e].forEach((a,c)=>{let d=a.apply(this.table,t);c||(o=d)}),o}_debugDispatch(){var t=Array.from(arguments),e=t[0];return t[0]="ExternalEvent:"+t[0],(!0===this.debug||this.debug.includes(e))&&console.log(...t),this._dispatch(...arguments)}}class R6{constructor(t){this.events={},this.subscriptionNotifiers={},this.dispatch=t?this._debugDispatch.bind(this):this._dispatch.bind(this),this.chain=t?this._debugChain.bind(this):this._chain.bind(this),this.confirm=t?this._debugConfirm.bind(this):this._confirm.bind(this),this.debug=t}subscriptionChange(t,e){this.subscriptionNotifiers[t]||(this.subscriptionNotifiers[t]=[]),this.subscriptionNotifiers[t].push(e),this.subscribed(t)&&this._notifiySubscriptionChange(t,!0)}subscribe(t,e,o=1e4){this.events[t]||(this.events[t]=[]),this.events[t].push({callback:e,priority:o}),this.events[t].sort((a,c)=>a.priority-c.priority),this._notifiySubscriptionChange(t,!0)}unsubscribe(t,e){var o;if(this.events[t]){if(e){if(!((o=this.events[t].findIndex(a=>a.callback===e))>-1))return void console.warn("Cannot remove event, no matching event found:",t,e);this.events[t].splice(o,1)}this._notifiySubscriptionChange(t,!1)}else console.warn("Cannot remove event, no events set on:",t)}subscribed(t){return this.events[t]&&this.events[t].length}_chain(t,e,o,a){var c=o;return Array.isArray(e)||(e=[e]),this.subscribed(t)?(this.events[t].forEach((d,p)=>{c=d.callback.apply(this,e.concat([c]))}),c):"function"==typeof a?a():a}_confirm(t,e){var o=!1;return Array.isArray(e)||(e=[e]),this.subscribed(t)&&this.events[t].forEach((a,c)=>{a.callback.apply(this,e)&&(o=!0)}),o}_notifiySubscriptionChange(t,e){var o=this.subscriptionNotifiers[t];o&&o.forEach(a=>{a(e)})}_dispatch(){var t=Array.from(arguments),e=t.shift();this.events[e]&&this.events[e].forEach(o=>{o.callback.apply(this,t)})}_debugDispatch(){var t=Array.from(arguments),e=t[0];return t[0]="InternalEvent:"+e,(!0===this.debug||this.debug.includes(e))&&console.log(...t),this._dispatch(...arguments)}_debugChain(){var t=Array.from(arguments),e=t[0];return t[0]="InternalEvent:"+e,(!0===this.debug||this.debug.includes(e))&&console.log(...t),this._chain(...arguments)}_debugConfirm(){var t=Array.from(arguments),e=t[0];return t[0]="InternalEvent:"+e,(!0===this.debug||this.debug.includes(e))&&console.log(...t),this._confirm(...arguments)}}let gv=(()=>{class r{static register(e){r.tables.push(e)}static deregister(e){var o=r.tables.indexOf(e);o>-1&&r.tables.splice(o,1)}static lookupTable(e,o){var c,d,a=[];if("string"==typeof e){if((c=document.querySelectorAll(e)).length)for(var p=0;p<c.length;p++)(d=r.matchElement(c[p]))&&a.push(d)}else"undefined"!=typeof HTMLElement&&e instanceof HTMLElement||e instanceof wp?(d=r.matchElement(e))&&a.push(d):Array.isArray(e)?e.forEach(function(g){a=a.concat(r.lookupTable(g))}):o||console.warn("Table Connection Error - Invalid Selector",e);return a}static matchElement(e){return r.tables.find(function(o){return e instanceof wp?o===e:o.element===e})}}return r.tables=[],r})();function RO(r){r.forEach(function(t){t.reinitializeWidth()}),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()}var A6={fitData:function(r){this.table.columnManager.renderer.reinitializeColumnWidths(r),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitDataFill:RO,fitDataTable:RO,fitDataStretch:function(r){var t=0,e=this.table.rowManager.element.clientWidth,o=0,a=!1;r.forEach((c,d)=>{c.widthFixed||c.reinitializeWidth(),(this.table.options.responsiveLayout?c.modules.responsive.visible:c.visible)&&(a=c),c.visible&&(t+=c.getWidth())}),a?(o=e-t+a.getWidth(),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&(a.setWidth(0),this.table.modules.responsiveLayout.update()),o>0?a.setWidth(o):a.reinitializeWidth()):this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitColumns:function(r){var c,v,t=this.table.element.clientWidth,e=0,o=0,a=0,d=[],p=[],g=0,E=0;function D(L){return"string"==typeof L?L.indexOf("%")>-1?t/100*parseInt(L):parseInt(L):L}function x(L,U,ee,$){var ge=[],be=0,$e=0,et=0,Bt=a,Mi=0,ki=0,Sn=[];function Hn(Ei){return ee*(Ei.column.definition.widthGrow||1)}function Cn(Ei){return D(Ei.width)-ee*(Ei.column.definition.widthShrink||0)}return L.forEach(function(Ei,ao){var Or=$?Cn(Ei):Hn(Ei);Ei.column.minWidth>=Or?ge.push(Ei):Ei.column.maxWidth&&Ei.column.maxWidth<Or?(Ei.width=Ei.column.maxWidth,U-=Ei.column.maxWidth,(Bt-=$?Ei.column.definition.widthShrink||1:Ei.column.definition.widthGrow||1)&&(ee=Math.floor(U/Bt))):(Sn.push(Ei),ki+=$?Ei.column.definition.widthShrink||1:Ei.column.definition.widthGrow||1)}),ge.length?(ge.forEach(function(Ei){be+=$?Ei.width-Ei.column.minWidth:Ei.column.minWidth,Ei.width=Ei.column.minWidth}),Mi=($e=U-be)-(et=ki?Math.floor($e/ki):$e)*ki,Mi+=x(Sn,$e,et,$)):(Mi=ki?U-Math.floor(U/ki)*ki:U,Sn.forEach(function(Ei){Ei.width=$?Cn(Ei):Hn(Ei)})),Mi}this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update(),this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(t-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),r.forEach(function(L){var U,ee,$;L.visible&&(U=L.definition.width,ee=parseInt(L.minWidth),U?($=D(U),e+=$>ee?$:ee,L.definition.widthShrink&&(p.push({column:L,width:$>ee?$:ee}),g+=L.definition.widthShrink)):(d.push({column:L,width:0}),a+=L.definition.widthGrow||1))}),o=t-e,c=Math.floor(o/a),E=x(d,o,c,!1),d.length&&E>0&&(d[d.length-1].width+=+E),d.forEach(function(L){o-=L.width}),(v=Math.abs(E)+o)>0&&g&&(E=x(p,v,Math.floor(v/g),!0)),p.length&&(p[p.length-1].width-=E),d.forEach(function(L){L.column.setWidth(L.width)}),p.forEach(function(L){L.column.setWidth(L.width)})}},k6={default:{groups:{item:"item",items:"items"},columns:{},data:{loading:"Loading",error:"Error"},pagination:{page_size:"Page Size",page_title:"Show Page",first:"First",first_title:"First Page",last:"Last",last_title:"Last Page",prev:"Prev",prev_title:"Prev Page",next:"Next",next_title:"Next Page",all:"All"},headerFilters:{default:"filter column...",columns:{}}}},N6=Object.freeze({__proto__:null,LayoutModule:(()=>{class r extends Zi{constructor(e){super(e,"layout"),this.mode=null,this.registerTableOption("layout","fitData"),this.registerTableOption("layoutColumnsOnNewData",!1),this.registerColumnOption("widthGrow"),this.registerColumnOption("widthShrink")}initialize(){var e=this.table.options.layout;r.modes[e]?this.mode=e:(console.warn("Layout Error - invalid mode set, defaulting to 'fitData' : "+e),this.mode="fitData"),this.table.element.setAttribute("tabulator-layout",this.mode)}getMode(){return this.mode}layout(){r.modes[this.mode].call(this,this.table.columnManager.columnsByIndex),this.dispatch("layout-refreshed")}}return r.moduleName="layout",r.modes=A6,r})(),LocalizeModule:(()=>{class r extends Zi{constructor(e){super(e),this.locale="default",this.lang=!1,this.bindings={},this.langList={},this.registerTableOption("locale",!1),this.registerTableOption("langs",{})}initialize(){this.langList=Jn.deepClone(r.langs),!1!==this.table.options.columnDefaults.headerFilterPlaceholder&&this.setHeaderFilterPlaceholder(this.table.options.columnDefaults.headerFilterPlaceholder);for(let e in this.table.options.langs)this.installLang(e,this.table.options.langs[e]);this.setLocale(this.table.options.locale),this.registerTableFunction("setLocale",this.setLocale.bind(this)),this.registerTableFunction("getLocale",this.getLocale.bind(this)),this.registerTableFunction("getLang",this.getLang.bind(this))}setHeaderFilterPlaceholder(e){this.langList.default.headerFilters.default=e}setHeaderFilterColumnPlaceholder(e,o){this.langList.default.headerFilters.columns[e]=o,this.lang&&!this.lang.headerFilters.columns[e]&&(this.lang.headerFilters.columns[e]=o)}installLang(e,o){this.langList[e]?this._setLangProp(this.langList[e],o):this.langList[e]=o}_setLangProp(e,o){for(let a in o)e[a]&&"object"==typeof e[a]?this._setLangProp(e[a],o[a]):e[a]=o[a]}setLocale(e){if(!0===(e=e||"default")&&navigator.language&&(e=navigator.language.toLowerCase()),e&&!this.langList[e]){let a=e.split("-")[0];this.langList[a]?(console.warn("Localization Error - Exact matching locale not found, using closest match: ",e,a),e=a):(console.warn("Localization Error - Matching locale not found, using default: ",e),e="default")}this.locale=e,this.lang=Jn.deepClone(this.langList.default||{}),"default"!=e&&function o(a,c){for(var d in a)"object"==typeof a[d]?(c[d]||(c[d]={}),o(a[d],c[d])):c[d]=a[d]}(this.langList[e],this.lang),this.dispatchExternal("localized",this.locale,this.lang),this._executeBindings()}getLocale(e){return this.locale}getLang(e){return e?this.langList[e]:this.lang}getText(e,o){var a=(e=o?e+"|"+o:e).split("|");return this._getLangElement(a,this.locale)||""}_getLangElement(e,o){var a=this.lang;return e.forEach(function(c){var d;a&&(a=void 0!==(d=a[c])&&d)}),a}bind(e,o){this.bindings[e]||(this.bindings[e]=[]),this.bindings[e].push(o),o(this.getText(e),this.lang)}_executeBindings(){for(let e in this.bindings)this.bindings[e].forEach(o=>{o(this.getText(e),this.lang)})}}return r.moduleName="localize",r.langs=k6,r})(),CommsModule:(()=>{class r extends Zi{constructor(e){super(e)}initialize(){this.registerTableFunction("tableComms",this.receive.bind(this))}getConnections(e){var o=[];return gv.lookupTable(e).forEach(c=>{this.table!==c&&o.push(c)}),o}send(e,o,a,c){var d=this.getConnections(e);d.forEach(p=>{p.tableComms(this.table.element,o,a,c)}),!d.length&&e&&console.warn("Table Connection Error - No tables matching selector found",e)}receive(e,o,a,c){if(this.table.modExists(o))return this.table.modules[o].commsReceived(e,a,c);console.warn("Inter-table Comms Error - no such module:",o)}}return r.moduleName="comms",r})()});class MO{constructor(t,e){this.bindStaticFuctionality(t),this.bindModules(t,N6,!0),e&&this.bindModules(t,e)}bindStaticFuctionality(t){t.moduleBindings={},t.extendModule=function(e,o,a){if(t.moduleBindings[e]){var c=t.moduleBindings[e][o];if(c)if("object"==typeof a)for(let d in a)c[d]=a[d];else console.warn("Module Error - Invalid value type, it must be an object");else console.warn("Module Error - property does not exist:",o)}else console.warn("Module Error - module does not exist:",e)},t.registerModule=function(e){Array.isArray(e)||(e=[e]),e.forEach(o=>{t.registerModuleBinding(o)})},t.registerModuleBinding=function(e){t.moduleBindings[e.moduleName]=e},t.findTable=function(e){var o=gv.lookupTable(e,!0);return!(Array.isArray(o)&&!o.length)&&o},t.prototype.bindModules=function(){for(var e in this.modules={},t.moduleBindings){let o=t.moduleBindings[e];this.modules[e]=new o(this),o.prototype.moduleCore?this.modulesCore[e]=this.modules[e]:this.modulesRegular[e]=this.modules[e]}}}bindModules(t,e,o){var a=Object.values(e);o&&a.forEach(c=>{c.prototype.moduleCore=!0}),t.registerModule(a)}}let wp=(()=>{class r{constructor(e,o){this.options={},this.columnManager=null,this.rowManager=null,this.footerManager=null,this.vdomHoz=null,this.externalEvents=null,this.eventBus=null,this.interactionMonitor=!1,this.browser="",this.browserSlow=!1,this.browserMobile=!1,this.rtl=!1,this.originalElement=null,this.componentFunctionBinder=new w6(this),this.dataLoader=!1,this.modules={},this.modulesCore={},this.modulesRegular={},this.optionsList=new DO(this,"table constructor"),this.initialized=!1,this.initializeElement(e)&&(this.initialzeCoreSystems(o),setTimeout(()=>{this._create()})),gv.register(this)}initializeElement(e){return"undefined"!=typeof HTMLElement&&e instanceof HTMLElement?(this.element=e,!0):"string"==typeof e?(this.element=document.querySelector(e),!!this.element||(console.error("Tabulator Creation Error - no element found matching selector: ",e),!1)):(console.error("Tabulator Creation Error - Invalid element provided:",e),!1)}initialzeCoreSystems(e){this.columnManager=new v6(this),this.rowManager=new E6(this),this.footerManager=new C6(this),this.dataLoader=new S6(this),this.bindModules(),this.options=this.optionsList.generate(r.defaultOptions,e),this._clearObjectPointers(),this._mapDepricatedFunctionality(),this.externalEvents=new D6(this,this.options,this.options.debugEventsExternal),this.eventBus=new R6(this.options.debugEventsInternal),this.interactionMonitor=new T6(this),this.dataLoader.initialize(),this.columnManager.initialize(),this.rowManager.initialize(),this.footerManager.initialize()}_mapDepricatedFunctionality(){}_clearSelection(){this.element.classList.add("tabulator-block-select"),window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty(),this.element.classList.remove("tabulator-block-select")}_create(){this.externalEvents.dispatch("tableBuilding"),this.eventBus.dispatch("table-building"),this._rtlCheck(),this._buildElement(),this._initializeTable(),this._loadInitialData(),this.initialized=!0,this.externalEvents.dispatch("tableBuilt")}_rtlCheck(){var e=window.getComputedStyle(this.element);switch(this.options.textDirection){case"auto":if("rtl"!==e.direction)break;case"rtl":this.element.classList.add("tabulator-rtl"),this.rtl=!0;break;case"ltr":this.element.classList.add("tabulator-ltr");default:this.rtl=!1}}_clearObjectPointers(){this.options.columns=this.options.columns.slice(0),this.options.data&&!this.options.reactiveData&&(this.options.data=this.options.data.slice(0))}_buildElement(){var a,e=this.element,o=this.options;if("TABLE"===e.tagName){this.originalElement=this.element,a=document.createElement("div");var c=e.attributes;for(var d in c)"object"==typeof c[d]&&a.setAttribute(c[d].name,c[d].value);e.parentNode.replaceChild(a,e),this.element=e=a}for(e.classList.add("tabulator"),e.setAttribute("role","grid");e.firstChild;)e.removeChild(e.firstChild);o.height&&(o.height=isNaN(o.height)?o.height:o.height+"px",e.style.height=o.height),!1!==o.minHeight&&(o.minHeight=isNaN(o.minHeight)?o.minHeight:o.minHeight+"px",e.style.minHeight=o.minHeight),!1!==o.maxHeight&&(o.maxHeight=isNaN(o.maxHeight)?o.maxHeight:o.maxHeight+"px",e.style.maxHeight=o.maxHeight)}_initializeTable(){var e=this.element,o=this.options;this.columnManager.initialize(),this.rowManager.initialize(),this._detectBrowser();for(let d in this.modulesCore)this.modulesCore[d].initialize();if("string"==typeof o.placeholder){var a=document.createElement("div");a.classList.add("tabulator-placeholder");var c=document.createElement("span");c.innerHTML=o.placeholder,a.appendChild(c),o.placeholder=a}e.appendChild(this.columnManager.getElement()),e.appendChild(this.rowManager.getElement()),o.footerElement&&this.footerManager.activate(),o.autoColumns&&o.data&&this.columnManager.generateColumnsFromRowData(this.options.data);for(let d in this.modulesRegular)this.modulesRegular[d].initialize();this.columnManager.setColumns(o.columns),this.eventBus.dispatch("table-built")}_loadInitialData(){this.dataLoader.load(this.options.data)}destroy(){var e=this.element;for(gv.deregister(this),this.eventBus.dispatch("table-destroy"),this.rowManager.rows.forEach(function(o){o.wipe()}),this.rowManager.rows=[],this.rowManager.activeRows=[],this.rowManager.displayRows=[];e.firstChild;)e.removeChild(e.firstChild);e.classList.remove("tabulator")}_detectBrowser(){var e=navigator.userAgent||navigator.vendor||window.opera;e.indexOf("Trident")>-1?(this.browser="ie",this.browserSlow=!0):e.indexOf("Edge")>-1?(this.browser="edge",this.browserSlow=!0):e.indexOf("Firefox")>-1?(this.browser="firefox",this.browserSlow=!1):(this.browser="other",this.browserSlow=!1),this.browserMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}blockRedraw(){return this.rowManager.blockRedraw()}restoreRedraw(){return this.rowManager.restoreRedraw()}setDataFromLocalFile(e){return new Promise((o,a)=>{var c=document.createElement("input");c.type="file",c.accept=e||".json,application/json",c.addEventListener("change",d=>{var v,p=c.files[0],g=new FileReader;g.readAsText(p),g.onload=E=>{try{v=JSON.parse(g.result)}catch(D){return console.warn("File Load Error - File contents is invalid JSON",D),void a(D)}this.setData(v).then(D=>{o(D)}).catch(D=>{o(D)})},g.onerror=E=>{console.warn("File Load Error - Unable to read file"),a()}}),c.click()})}setData(e,o,a){if(this.initialized)return this.dataLoader.load(e,o,a,!1);console.warn("setData failed - table not yet initialized. To set initial data please use the 'data' property in the table constructor.")}clearData(){this.dataLoader.blockActiveLoad(),this.rowManager.clearData()}getData(e){return this.rowManager.getData(e)}getDataCount(e){return this.rowManager.getDataCount(e)}replaceData(e,o,a){if(this.initialized)return this.dataLoader.load(e,o,a,!0,!0);console.warn("replaceData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}updateData(e){var o=0;if(this.initialized)return new Promise((a,c)=>{this.dataLoader.blockActiveLoad(),"string"==typeof e&&(e=JSON.parse(e)),e?e.forEach(d=>{var p=this.rowManager.findRow(d[this.options.index]);p&&(o++,p.updateData(d).then(()=>{--o||a()}))}):(console.warn("Update Error - No data provided"),c("Update Error - No data provided"))});console.warn("updateData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}addData(e,o,a){if(this.initialized)return new Promise((c,d)=>{this.dataLoader.blockActiveLoad(),"string"==typeof e&&(e=JSON.parse(e)),e?this.rowManager.addRows(e,o,a).then(p=>{var g=[];p.forEach(function(v){g.push(v.getComponent())}),c(g)}):(console.warn("Update Error - No data provided"),d("Update Error - No data provided"))});console.warn("addData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}updateOrAddData(e){var o=[],a=0;if(this.initialized)return new Promise((c,d)=>{this.dataLoader.blockActiveLoad(),"string"==typeof e&&(e=JSON.parse(e)),e?e.forEach(p=>{var g=this.rowManager.findRow(p[this.options.index]);a++,g?g.updateData(p).then(()=>{a--,o.push(g.getComponent()),a||c(o)}):this.rowManager.addRows(p).then(v=>{a--,o.push(v[0].getComponent()),a||c(o)})}):(console.warn("Update Error - No data provided"),d("Update Error - No data provided"))});console.warn("updateOrAddData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}getRow(e){var o=this.rowManager.findRow(e);return o?o.getComponent():(console.warn("Find Error - No matching row found:",e),!1)}getRowFromPosition(e,o){var a=this.rowManager.getRowFromPosition(e,o);return a?a.getComponent():(console.warn("Find Error - No matching row found:",e),!1)}deleteRow(e){var o=[];Array.isArray(e)||(e=[e]);for(let a of e){let c=this.rowManager.findRow(a,!0);if(!c)return console.error("Delete Error - No matching row found:",a),Promise.reject("Delete Error - No matching row found");o.push(c)}return o.sort((a,c)=>this.rowManager.rows.indexOf(a)>this.rowManager.rows.indexOf(c)?1:-1),o.forEach(a=>{a.delete()}),this.rowManager.reRenderInPosition(),Promise.resolve()}addRow(e,o,a){if(this.initialized)return"string"==typeof e&&(e=JSON.parse(e)),this.rowManager.addRows(e,o,a).then(c=>c[0].getComponent());console.warn("addRow failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}updateOrAddRow(e,o){var a=this.rowManager.findRow(e);return"string"==typeof o&&(o=JSON.parse(o)),a?a.updateData(o).then(()=>a.getComponent()):this.rowManager.addRows(o).then(c=>c[0].getComponent())}updateRow(e,o){var a=this.rowManager.findRow(e);return"string"==typeof o&&(o=JSON.parse(o)),a?a.updateData(o).then(()=>{resolve(a.getComponent())}):(console.warn("Update Error - No matching row found:",e),Promise.reject("Update Error - No matching row found"))}scrollToRow(e,o,a){var c=this.rowManager.findRow(e);return c?this.rowManager.scrollToRow(c,o,a):(console.warn("Scroll Error - No matching row found:",e),Promise.reject("Scroll Error - No matching row found"))}moveRow(e,o,a){var c=this.rowManager.findRow(e);c?c.moveToRow(o,a):console.warn("Move Error - No matching row found:",e)}getRows(e){if(this.initialized)return this.rowManager.getComponents(e);console.warn("getRows failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}getRowPosition(e,o){var a=this.rowManager.findRow(e);return a?this.rowManager.getRowPosition(a,o):(console.warn("Position Error - No matching row found:",e),!1)}setColumns(e){this.initialized?this.columnManager.setColumns(e):console.warn("setColumns failed - table not yet initialized. To set initial data please use the 'columns' property in the table constructor.")}getColumns(e){return this.columnManager.getComponents(e)}getColumn(e){var o=this.columnManager.findColumn(e);return o?o.getComponent():(console.warn("Find Error - No matching column found:",e),!1)}getColumnDefinitions(){return this.columnManager.getDefinitionTree()}showColumn(e){var o=this.columnManager.findColumn(e);if(!o)return console.warn("Column Show Error - No matching column found:",e),!1;o.show()}hideColumn(e){var o=this.columnManager.findColumn(e);if(!o)return console.warn("Column Hide Error - No matching column found:",e),!1;o.hide()}toggleColumn(e){var o=this.columnManager.findColumn(e);if(!o)return console.warn("Column Visibility Toggle Error - No matching column found:",e),!1;o.visible?o.hide():o.show()}addColumn(e,o,a){var c=this.columnManager.findColumn(a);return this.columnManager.addColumn(e,o,c).then(d=>d.getComponent())}deleteColumn(e){var o=this.columnManager.findColumn(e);return o?o.delete():(console.warn("Column Delete Error - No matching column found:",e),Promise.reject())}updateColumnDefinition(e,o){var a=this.columnManager.findColumn(e);return a?a.updateDefinition(o):(console.warn("Column Update Error - No matching column found:",e),Promise.reject())}moveColumn(e,o,a){var c=this.columnManager.findColumn(e),d=this.columnManager.findColumn(o);c?d?this.columnManager.moveColumn(c,d,a):console.warn("Move Error - No matching column found:",d):console.warn("Move Error - No matching column found:",e)}scrollToColumn(e,o,a){return new Promise((c,d)=>{var p=this.columnManager.findColumn(e);return p?this.columnManager.scrollToColumn(p,o,a):(console.warn("Scroll Error - No matching column found:",e),Promise.reject("Scroll Error - No matching column found"))})}redraw(e){this.initialized?(this.columnManager.redraw(e),this.rowManager.redraw(e)):console.warn("redraw failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}setHeight(e){this.options.height=isNaN(e)?e:e+"px",this.element.style.height=this.options.height,this.rowManager.initializeRenderer(),this.rowManager.redraw()}on(e,o){this.externalEvents.subscribe(e,o)}off(e,o){this.externalEvents.unsubscribe(e,o)}dispatchEvent(){Array.from(arguments).shift(),this.externalEvents.dispatch(...arguments)}modExists(e,o){return!!this.modules[e]||(o&&console.error("Tabulator Module Not Installed: "+e),!1)}module(e){var o=this.modules[e];return o||console.error("Tabulator module not installed: "+e),o}}return r.defaultOptions=g6,r})();new MO(wp),new MO(class extends wp{},f6);let L6=(()=>{class r{constructor(){this.a=null,this.b=null,this.dataObject=[],this.objectsForGrid=[],this.stringsForGrid=[],this.hotInstance=null}get hot(){if(null!=this.hotInstance)return this.hotInstance;throw new Error("hot is null")}initGrid(e){this.hotInstance=new wp(e,{columns:[{title:"Step",field:"id"}],layout:"fitColumns",footerElement:'<div>\n        \x3c!-- <a href="javascript:copyClip()">Copy Clipboard</a>\n        &nbsp;&nbsp;&nbsp;&nbsp;\n        <a href="javascript:copyCSV()">CSV</a>\n        --\x3e\n    </div>',placeholder:"please press execute button"}),this.hot.replaceData([]),this.hot.redraw(!0)}AddStringToGrid(e){if(e.startsWith("{")&&e.endsWith("}"))try{var o=JSON.parse(e);return void this.objectsForGrid.push(o)}catch(d){}if(e.startsWith("[")&&e.endsWith("]"))try{for(var a=JSON.parse(e),c=0;c<a.length;c++)this.objectsForGrid.push(a[c]);return}catch(d){}this.stringsForGrid.push(e)}AddDataToGrid(e){this.dataObject.push([e]),this.AddStringToGrid("string"!=typeof e?"object"!=typeof e?e.toString():JSON.stringify(e):e)}ClearDataGrid(){this.dataObject=[],this.objectsForGrid=[],this.stringsForGrid=[],null!=this.hot&&(this.hot.setColumns([{title:"Step",field:"id"},{title:"Value",field:"val"}]),this.hot.replaceData([]),this.hot.redraw(!0))}hasOwnProperty(e,o){return null!=e&&e.hasOwnProperty(o)}AddObjectToFinishGrid(){for(var e=[],o=this.objectsForGrid,a=0;a<o.length;a++)"string"==typeof(c=o[a])?e.push("_"):e.push(...Object.keys(c));var d=new Set(e);e=Array.from(d);var p=[...e],g=[];for(a=0;a<o.length;a++){for(var c=o[a],v={Nr:a+1},E=0;E<e.length;E++){var D=e[E],x=this.goodNameForKey(D);if(c&&this.hasOwnProperty(c,D)){var L=c[D];v[x]="object"==typeof L?JSON.stringify(L):L}else v[x]="string"==typeof c&&0===E?c:""}g.push(v)}e.splice(0,0,"Nr"),p.splice(0,0,"Nr");var U=this.Headers(p);this.hot.setColumns(U),this.hot.replaceData(g)}Headers(e){return e.map(o=>({cellClick:function(a,c){var d=c.getRow().getData().Nr;c.getColumn().getField(),alert(`The row at : ${d} , col: ${d} has value :\n `+c.getValue())},title:o,field:this.goodNameForKey(o),headerFilter:!0,formatter:function(a,c,d){try{var p=a.getValue().toString();if(p.length<2)return p;if(p.startsWith("[")&&p.endsWith("]"))try{var g=JSON.parse(p),v=a.getRow().getData().Nr,D=a.getColumn().getField()+"_"+v;return d(function(){new wp("#"+D,{data:g,autoColumns:!0,layout:"fitDataFill",headerSort:!1})}),"<div id='"+D+"'>"+p+"</div>"}catch(x){return p}}catch(x){return p}return a.getValue()}}))}AddStringToFinishGrid(){for(var e=[],o=0;o<this.stringsForGrid.length;o++)e.push({Nr:o+1,Text:this.stringsForGrid[o]});var c=this.Headers(["Nr","Text"]);this.hot.setColumns(c),this.hot.replaceData(e)}FinishGrid(){this.objectsForGrid.length+this.stringsForGrid.length!=0&&(this.objectsForGrid.length>0?this.AddObjectToFinishGrid():this.AddStringToFinishGrid(),this.hot.redraw(!0))}goodNameForKey(e){var o=e;return o.replace(".","_")}copyClip(){this.hot.copyToClipboard("all")}copyCSV(){this.hot.download("csv","data.csv",{bom:!0})}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const{isArray:F6}=Array;class H6 extends l{constructor(t,e){super()}schedule(t,e=0){return this}}const mv={setInterval(...r){const{delegate:t}=mv;return((null==t?void 0:t.setInterval)||setInterval)(...r)},clearInterval(r){const{delegate:t}=mv;return((null==t?void 0:t.clearInterval)||clearInterval)(r)},delegate:void 0};class bT extends H6{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const o=this.id,a=this.scheduler;return null!=o&&(this.id=this.recycleAsyncId(a,o,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(a,this.id,e),this}requestAsyncId(t,e,o=0){return mv.setInterval(t.flush.bind(t,this),o)}recycleAsyncId(t,e,o=0){if(null!=o&&this.delay===o&&!1===this.pending)return e;mv.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const o=this._execute(t,e);if(o)return o;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let a,o=!1;try{this.work(t)}catch(c){o=!0,a=c||new Error("Scheduled action threw falsy error")}if(o)return this.unsubscribe(),a}unsubscribe(){if(!this.closed){const{id:t,scheduler:e}=this,{actions:o}=e;this.work=this.state=this.scheduler=null,this.pending=!1,n(o,this),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}}const yT={now:()=>(yT.delegate||Date).now(),delegate:void 0};class xg{constructor(t,e=xg.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,o){return new this.schedulerActionCtor(this,t).schedule(o,e)}}xg.now=yT.now;class ET extends xg{constructor(t,e=xg.now){super(t,e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(t){const{actions:e}=this;if(this._active)return void e.push(t);let o;this._active=!0;do{if(o=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,o){for(;t=e.shift();)t.unsubscribe();throw o}}}const CT=new ET(bT),IO=CT;function TT(r){return He(()=>r)}function xO(r,t){return t?e=>mg(t.pipe(Rn(1),Le((r,t)=>{r.subscribe(new Ue(t,H))})),e.pipe(xO(r))):Dn((e,o)=>r(e,o).pipe(Rn(1),TT(e)))}function AO(r=0,t,e=IO){let o=-1;return null!=t&&(ta(t)?e=t:o=t),new re(a=>{let c=function(r){return r instanceof Date&&!isNaN(r)}(r)?+r-e.now():r;c<0&&(c=0);let d=0;return e.schedule(function(){a.closed||(a.next(d++),0<=o?this.schedule(void 0,o):a.complete())},c)})}function _v(r,t=CT){const e=AO(r,t);return xO(()=>e)}class OO{}class kO{}class tc{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const o=e.indexOf(":");if(o>0){const a=e.slice(0,o),c=a.toLowerCase(),d=e.slice(o+1).trim();this.maybeSetNormalizedName(a,c),this.headers.has(c)?this.headers.get(c).push(d):this.headers.set(c,[d])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let o=t[e];const a=e.toLowerCase();"string"==typeof o&&(o=[o]),o.length>0&&(this.headers.set(a,o),this.maybeSetNormalizedName(e,a))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof tc?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new tc;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof tc?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let o=t.value;if("string"==typeof o&&(o=[o]),0===o.length)return;this.maybeSetNormalizedName(t.name,e);const a=("a"===t.op?this.headers.get(e):void 0)||[];a.push(...o),this.headers.set(e,a);break;case"d":const c=t.value;if(c){let d=this.headers.get(e);if(!d)return;d=d.filter(p=>-1===c.indexOf(p)),0===d.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,d)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class j6{encodeKey(t){return NO(t)}encodeValue(t){return NO(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const z6=/%(\d[a-f0-9])/gi,Y6={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function NO(r){return encodeURIComponent(r).replace(z6,(t,e)=>{var o;return null!=(o=Y6[e])?o:t})}function PO(r){return`${r}`}class iu{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new j6,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(r,t){const e=new Map;return r.length>0&&r.replace(/^\?/,"").split("&").forEach(a=>{const c=a.indexOf("="),[d,p]=-1==c?[t.decodeKey(a),""]:[t.decodeKey(a.slice(0,c)),t.decodeValue(a.slice(c+1))],g=e.get(d)||[];g.push(p),e.set(d,g)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const o=t.fromObject[e];this.map.set(e,Array.isArray(o)?o:[o])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(o=>{const a=t[o];Array.isArray(a)?a.forEach(c=>{e.push({param:o,value:c,op:"a"})}):e.push({param:o,value:a,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(o=>e+"="+this.encoder.encodeValue(o)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new iu({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(PO(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let o=this.map.get(t.param)||[];const a=o.indexOf(PO(t.value));-1!==a&&o.splice(a,1),o.length>0?this.map.set(t.param,o):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class X6{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}keys(){return this.map.keys()}}function LO(r){return"undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer}function FO(r){return"undefined"!=typeof Blob&&r instanceof Blob}function BO(r){return"undefined"!=typeof FormData&&r instanceof FormData}class Ag{constructor(t,e,o,a){let c;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(r){switch(r){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||a?(this.body=void 0!==o?o:null,c=a):c=o,c&&(this.reportProgress=!!c.reportProgress,this.withCredentials=!!c.withCredentials,c.responseType&&(this.responseType=c.responseType),c.headers&&(this.headers=c.headers),c.context&&(this.context=c.context),c.params&&(this.params=c.params)),this.headers||(this.headers=new tc),this.context||(this.context=new X6),this.params){const d=this.params.toString();if(0===d.length)this.urlWithParams=e;else{const p=e.indexOf("?");this.urlWithParams=e+(-1===p?"?":p<e.length-1?"&":"")+d}}else this.params=new iu,this.urlWithParams=e}serializeBody(){return null===this.body?null:LO(this.body)||FO(this.body)||BO(this.body)||"undefined"!=typeof URLSearchParams&&this.body instanceof URLSearchParams||"string"==typeof this.body?this.body:this.body instanceof iu?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||BO(this.body)?null:FO(this.body)?this.body.type||null:LO(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof iu?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){var D;const e=t.method||this.method,o=t.url||this.url,a=t.responseType||this.responseType,c=void 0!==t.body?t.body:this.body,d=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,p=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let g=t.headers||this.headers,v=t.params||this.params;const E=null!=(D=t.context)?D:this.context;return void 0!==t.setHeaders&&(g=Object.keys(t.setHeaders).reduce((x,L)=>x.set(L,t.setHeaders[L]),g)),t.setParams&&(v=Object.keys(t.setParams).reduce((x,L)=>x.set(L,t.setParams[L]),v)),new Ag(e,o,c,{params:v,headers:g,context:E,reportProgress:p,responseType:a,withCredentials:d})}}var xr=(()=>((xr=xr||{})[xr.Sent=0]="Sent",xr[xr.UploadProgress=1]="UploadProgress",xr[xr.ResponseHeader=2]="ResponseHeader",xr[xr.DownloadProgress=3]="DownloadProgress",xr[xr.Response=4]="Response",xr[xr.User=5]="User",xr))();class wT{constructor(t,e=200,o="OK"){this.headers=t.headers||new tc,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||o,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class ST extends wT{constructor(t={}){super(t),this.type=xr.ResponseHeader}clone(t={}){return new ST({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class vv extends wT{constructor(t={}){super(t),this.type=xr.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new vv({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class VO extends wT{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function DT(r,t){return{body:t,headers:r.headers,context:r.context,observe:r.observe,params:r.params,reportProgress:r.reportProgress,responseType:r.responseType,withCredentials:r.withCredentials}}let Og=(()=>{class r{constructor(e){this.handler=e}request(e,o,a={}){let c;if(e instanceof Ag)c=e;else{let g,v;g=a.headers instanceof tc?a.headers:new tc(a.headers),a.params&&(v=a.params instanceof iu?a.params:new iu({fromObject:a.params})),c=new Ag(e,o,void 0!==a.body?a.body:null,{headers:g,context:a.context,params:v,reportProgress:a.reportProgress,responseType:a.responseType||"json",withCredentials:a.withCredentials})}const d=zt(c).pipe(_p(g=>this.handler.handle(g)));if(e instanceof Ag||"events"===a.observe)return d;const p=d.pipe(un(g=>g instanceof vv));switch(a.observe||"body"){case"body":switch(c.responseType){case"arraybuffer":return p.pipe(He(g=>{if(null!==g.body&&!(g.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return g.body}));case"blob":return p.pipe(He(g=>{if(null!==g.body&&!(g.body instanceof Blob))throw new Error("Response is not a Blob.");return g.body}));case"text":return p.pipe(He(g=>{if(null!==g.body&&"string"!=typeof g.body)throw new Error("Response is not a string.");return g.body}));default:return p.pipe(He(g=>g.body))}case"response":return p;default:throw new Error(`Unreachable: unhandled observe type ${a.observe}}`)}}delete(e,o={}){return this.request("DELETE",e,o)}get(e,o={}){return this.request("GET",e,o)}head(e,o={}){return this.request("HEAD",e,o)}jsonp(e,o){return this.request("JSONP",e,{params:(new iu).append(o,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,o={}){return this.request("OPTIONS",e,o)}patch(e,o,a={}){return this.request("PATCH",e,DT(a,o))}post(e,o,a={}){return this.request("POST",e,DT(a,o))}put(e,o,a={}){return this.request("PUT",e,DT(a,o))}}return r.\u0275fac=function(e){return new(e||r)(Oe(OO))},r.\u0275prov=rt({token:r,factory:r.\u0275fac}),r})();class HO{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const UO=new xe("HTTP_INTERCEPTORS");let J6=(()=>{class r{intercept(e,o){return o.handle(e)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=rt({token:r,factory:r.\u0275fac}),r})();const Q6=/^\)\]\}',?\n/;let GO=(()=>{class r{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new re(o=>{const a=this.xhrFactory.build();if(a.open(e.method,e.urlWithParams),e.withCredentials&&(a.withCredentials=!0),e.headers.forEach((L,U)=>a.setRequestHeader(L,U.join(","))),e.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const L=e.detectContentTypeHeader();null!==L&&a.setRequestHeader("Content-Type",L)}if(e.responseType){const L=e.responseType.toLowerCase();a.responseType="json"!==L?L:"text"}const c=e.serializeBody();let d=null;const p=()=>{if(null!==d)return d;const L=1223===a.status?204:a.status,U=a.statusText||"OK",ee=new tc(a.getAllResponseHeaders()),$=function(r){return"responseURL"in r&&r.responseURL?r.responseURL:/^X-Request-URL:/m.test(r.getAllResponseHeaders())?r.getResponseHeader("X-Request-URL"):null}(a)||e.url;return d=new ST({headers:ee,status:L,statusText:U,url:$}),d},g=()=>{let{headers:L,status:U,statusText:ee,url:$}=p(),ge=null;204!==U&&(ge=void 0===a.response?a.responseText:a.response),0===U&&(U=ge?200:0);let be=U>=200&&U<300;if("json"===e.responseType&&"string"==typeof ge){const $e=ge;ge=ge.replace(Q6,"");try{ge=""!==ge?JSON.parse(ge):null}catch(et){ge=$e,be&&(be=!1,ge={error:et,text:ge})}}be?(o.next(new vv({body:ge,headers:L,status:U,statusText:ee,url:$||void 0})),o.complete()):o.error(new VO({error:ge,headers:L,status:U,statusText:ee,url:$||void 0}))},v=L=>{const{url:U}=p(),ee=new VO({error:L,status:a.status||0,statusText:a.statusText||"Unknown Error",url:U||void 0});o.error(ee)};let E=!1;const D=L=>{E||(o.next(p()),E=!0);let U={type:xr.DownloadProgress,loaded:L.loaded};L.lengthComputable&&(U.total=L.total),"text"===e.responseType&&!!a.responseText&&(U.partialText=a.responseText),o.next(U)},x=L=>{let U={type:xr.UploadProgress,loaded:L.loaded};L.lengthComputable&&(U.total=L.total),o.next(U)};return a.addEventListener("load",g),a.addEventListener("error",v),a.addEventListener("timeout",v),a.addEventListener("abort",v),e.reportProgress&&(a.addEventListener("progress",D),null!==c&&a.upload&&a.upload.addEventListener("progress",x)),a.send(c),o.next({type:xr.Sent}),()=>{a.removeEventListener("error",v),a.removeEventListener("abort",v),a.removeEventListener("load",g),a.removeEventListener("timeout",v),e.reportProgress&&(a.removeEventListener("progress",D),null!==c&&a.upload&&a.upload.removeEventListener("progress",x)),a.readyState!==a.DONE&&a.abort()}})}}return r.\u0275fac=function(e){return new(e||r)(Oe(ZI))},r.\u0275prov=rt({token:r,factory:r.\u0275fac}),r})();const RT=new xe("XSRF_COOKIE_NAME"),MT=new xe("XSRF_HEADER_NAME");class jO{}let NT,q6=(()=>{class r{constructor(e,o,a){this.doc=e,this.platform=o,this.cookieName=a,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=HI(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return r.\u0275fac=function(e){return new(e||r)(Oe(Kt),Oe(Xf),Oe(RT))},r.\u0275prov=rt({token:r,factory:r.\u0275fac}),r})(),IT=(()=>{class r{constructor(e,o){this.tokenService=e,this.headerName=o}intercept(e,o){const a=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||a.startsWith("http://")||a.startsWith("https://"))return o.handle(e);const c=this.tokenService.getToken();return null!==c&&!e.headers.has(this.headerName)&&(e=e.clone({headers:e.headers.set(this.headerName,c)})),o.handle(e)}}return r.\u0275fac=function(e){return new(e||r)(Oe(jO),Oe(MT))},r.\u0275prov=rt({token:r,factory:r.\u0275fac}),r})(),e7=(()=>{class r{constructor(e,o){this.backend=e,this.injector=o,this.chain=null}handle(e){if(null===this.chain){const o=this.injector.get(UO,[]);this.chain=o.reduceRight((a,c)=>new HO(a,c),this.backend)}return this.chain.handle(e)}}return r.\u0275fac=function(e){return new(e||r)(Oe(kO),Oe(tn))},r.\u0275prov=rt({token:r,factory:r.\u0275fac}),r})(),t7=(()=>{class r{static disable(){return{ngModule:r,providers:[{provide:IT,useClass:J6}]}}static withOptions(e={}){return{ngModule:r,providers:[e.cookieName?{provide:RT,useValue:e.cookieName}:[],e.headerName?{provide:MT,useValue:e.headerName}:[]]}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({providers:[IT,{provide:UO,useExisting:IT,multi:!0},{provide:jO,useClass:q6},{provide:RT,useValue:"XSRF-TOKEN"},{provide:MT,useValue:"X-XSRF-TOKEN"}]}),r})(),n7=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({providers:[Og,{provide:OO,useClass:e7},GO,{provide:kO,useExisting:GO}],imports:[[t7.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),r})(),xT=(()=>{class r{constructor(e){this.http=e}getDemoBlocks(){var e=(new Date).toISOString();return this.http.get(`assets/showUsage/demoBlocks/all.txt?${e}`,{responseType:"text"}).pipe(He(o=>JSON.parse(o)))}getSwaggerLinks(){var e=(new Date).toISOString();return this.http.get(`assets/loadAtStartup/swaggers.json?${e}`,{responseType:"text"}).pipe(He(o=>JSON.parse(o)))}getDemoBlock(e){var o=(new Date).toISOString();return this.http.get(`assets/showUsage/demoBlocks/${e}.txt?${o}`,{responseType:"text"}).pipe(Ir(c=>{}),He(c=>c.toString()))}}return r.\u0275fac=function(e){return new(e||r)(Oe(Og))},r.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),bv=(()=>{class r{constructor(e,o){this.http=e,this.loadShowUsageService=o,this.settings=null,this.links=[],this.demoBlocks=[]}Init(){return function(...r){const t=pu(r),e=function(r){return 1===r.length&&F6(r[0])?r[0]:r}(r);return e.length?new re(o=>{let a=e.map(()=>[]),c=e.map(()=>!1);o.add(()=>{a=c=null});for(let d=0;!o.closed&&d<e.length;d++)dt(e[d]).subscribe(new Ue(o,p=>{if(a[d].push(p),a.every(g=>g.length)){const g=a.map(v=>v.shift());o.next(t?t(...g):g),a.some((v,E)=>!v.length&&c[E])&&o.complete()}},()=>{c[d]=!0,!a[d].length&&o.complete()}));return()=>{a=c=null}}):co}(this.getSettings(),this.loadShowUsageService.getSwaggerLinks(),this.loadShowUsageService.getDemoBlocks()).pipe(_v(2e3),Ir(([e,o,a])=>{this.settings=e,this.links=o,this.demoBlocks=a}),Ks(()=>""))}getSettings(){var e=(new Date).toISOString();return this.http.get(`assets/settings.json?${e}`,{responseType:"text"}).pipe(He(o=>JSON.parse(o)))}}return r.\u0275fac=function(e){return new(e||r)(Oe(Og),Oe(xT))},r.\u0275prov=rt({token:r,factory:r.\u0275fac}),r})();function ys(r,...t){return t.length?t.some(e=>r[e]):r.altKey||r.shiftKey||r.ctrlKey||r.metaKey}function Tv(r,t=CT){return Le((e,o)=>{let a=null,c=null,d=null;const p=()=>{if(a){a.unsubscribe(),a=null;const v=c;c=null,o.next(v)}};function g(){const v=d+r,E=t.now();if(E<v)return a=this.schedule(void 0,v-E),void o.add(a);p()}e.subscribe(new Ue(o,v=>{c=v,d=t.now(),a||(a=t.schedule(g,r),o.add(a))},()=>{p(),o.complete()},void 0,()=>{c=a=null}))})}function XO(r){return un((t,e)=>r<=e)}function kT(r,t=K){return r=null!=r?r:g7,Le((e,o)=>{let a,c=!0;e.subscribe(new Ue(o,d=>{const p=t(d);(c||!r(a,p))&&(c=!1,a=p,o.next(d))}))})}function g7(r,t){return r===t}function dn(r){return Le((t,e)=>{dt(r).subscribe(new Ue(e,()=>e.complete(),H)),!e.closed&&t.subscribe(e)})}function Ft(r){return null!=r&&"false"!=`${r}`}function To(r,t=0){return function(r){return!isNaN(parseFloat(r))&&!isNaN(Number(r))}(r)?Number(r):t}function wv(r){return Array.isArray(r)?r:[r]}function Ar(r){return null==r?"":"string"==typeof r?r:`${r}px`}function Cd(r){return r instanceof It?r.nativeElement:r}try{NT="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(r){NT=!1}let Pg,Sv,Td,PT,so=(()=>{class r{constructor(e){this._platformId=e,this.isBrowser=this._platformId?function(r){return r===JI}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!NT)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return r.\u0275fac=function(e){return new(e||r)(Oe(Xf))},r.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Rp=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({}),r})();function nu(r){return function(){if(null==Pg&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Pg=!0}))}finally{Pg=Pg||!1}return Pg}()?r:!!r.capture}function KO(){if(null==Td){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Td=!1,Td;if("scrollBehavior"in document.documentElement.style)Td=!0;else{const r=Element.prototype.scrollTo;Td=!!r&&!/\{\s*\[native code\]\s*\}/.test(r.toString())}}return Td}function Lg(){if("object"!=typeof document||!document)return 0;if(null==Sv){const r=document.createElement("div"),t=r.style;r.dir="rtl",t.width="1px",t.overflow="auto",t.visibility="hidden",t.pointerEvents="none",t.position="absolute";const e=document.createElement("div"),o=e.style;o.width="2px",o.height="1px",r.appendChild(e),document.body.appendChild(r),Sv=0,0===r.scrollLeft&&(r.scrollLeft=1,Sv=0===r.scrollLeft?1:2),r.remove()}return Sv}function JO(r){if(function(){if(null==PT){const r="undefined"!=typeof document?document.head:null;PT=!(!r||!r.createShadowRoot&&!r.attachShadow)}return PT}()){const t=r.getRootNode?r.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function LT(){let r="undefined"!=typeof document&&document?document.activeElement:null;for(;r&&r.shadowRoot;){const t=r.shadowRoot.activeElement;if(t===r)break;r=t}return r}function ru(r){return r.composedPath?r.composedPath()[0]:r.target}function FT(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}let QO=(()=>{class r{create(e){return"undefined"==typeof MutationObserver?null:new MutationObserver(e)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Fg=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({providers:[QO]}),r})();class BT extends class{constructor(t){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Se,this._typeaheadSubscription=l.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=e=>e.disabled,this._pressedLetters=[],this.tabOut=new Se,this.change=new Se,t instanceof $c&&t.changes.subscribe(e=>{if(this._activeItem){const a=e.toArray().indexOf(this._activeItem);a>-1&&a!==this._activeItemIndex&&(this._activeItemIndex=a)}})}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(Ir(e=>this._pressedLetters.push(e)),Tv(t),un(()=>this._pressedLetters.length>0),He(()=>this._pressedLetters.join(""))).subscribe(e=>{const o=this._getItemsArray();for(let a=1;a<o.length+1;a++){const c=(this._activeItemIndex+a)%o.length,d=o[c];if(!this._skipPredicateFn(d)&&0===d.getLabel().toUpperCase().trim().indexOf(e)){this.setActiveItem(c);break}}this._pressedLetters=[]}),this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}setActiveItem(t){const e=this._activeItem;this.updateActiveItem(t),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){const e=t.keyCode,a=["altKey","ctrlKey","metaKey","shiftKey"].every(c=>!t[c]||this._allowedModifierKeys.indexOf(c)>-1);switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical&&a){this.setNextItemActive();break}return;case 38:if(this._vertical&&a){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&a){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&a){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&a){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&a){this.setLastItemActive();break}return;default:return void((a||ys(t,"shiftKey"))&&(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){const e=this._getItemsArray(),o="number"==typeof t?t:e.indexOf(t),a=e[o];this._activeItem=null==a?null:a,this._activeItemIndex=o}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){const e=this._getItemsArray();for(let o=1;o<=e.length;o++){const a=(this._activeItemIndex+t*o+e.length)%e.length;if(!this._skipPredicateFn(e[a]))return void this.setActiveItem(a)}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){const o=this._getItemsArray();if(o[t]){for(;this._skipPredicateFn(o[t]);)if(!o[t+=e])return;this.setActiveItem(t)}}_getItemsArray(){return this._items instanceof $c?this._items.toArray():this._items}}{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(t){return this._origin=t,this}setActiveItem(t){super.setActiveItem(t),this.activeItem&&this.activeItem.focus(this._origin)}}let VT=(()=>{class r{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function(r){return!!(r.offsetWidth||r.offsetHeight||"function"==typeof r.getClientRects&&r.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const o=function(r){try{return r.frameElement}catch(t){return null}}(function(r){return r.ownerDocument&&r.ownerDocument.defaultView||window}(e));if(o&&(-1===ik(o)||!this.isVisible(o)))return!1;let a=e.nodeName.toLowerCase(),c=ik(e);return e.hasAttribute("contenteditable")?-1!==c:!("iframe"===a||"object"===a||this._platform.WEBKIT&&this._platform.IOS&&!function(r){let t=r.nodeName.toLowerCase(),e="input"===t&&r.type;return"text"===e||"password"===e||"select"===t||"textarea"===t}(e))&&("audio"===a?!!e.hasAttribute("controls")&&-1!==c:"video"===a?-1!==c&&(null!==c||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,o){return function(r){return!function(r){return function(r){return"input"==r.nodeName.toLowerCase()}(r)&&"hidden"==r.type}(r)&&(function(r){let t=r.nodeName.toLowerCase();return"input"===t||"select"===t||"button"===t||"textarea"===t}(r)||function(r){return function(r){return"a"==r.nodeName.toLowerCase()}(r)&&r.hasAttribute("href")}(r)||r.hasAttribute("contenteditable")||tk(r))}(e)&&!this.isDisabled(e)&&((null==o?void 0:o.ignoreVisibility)||this.isVisible(e))}}return r.\u0275fac=function(e){return new(e||r)(Oe(so))},r.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function tk(r){if(!r.hasAttribute("tabindex")||void 0===r.tabIndex)return!1;let t=r.getAttribute("tabindex");return!(!t||isNaN(parseInt(t,10)))}function ik(r){if(!tk(r))return null;const t=parseInt(r.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}class k7{constructor(t,e,o,a,c=!1){this._element=t,this._checker=e,this._ngZone=o,this._document=a,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,c||this.attachAnchors()}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){let e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);for(let o=0;o<e.length;o++)e[o].hasAttribute(`cdk-focus-${t}`)?console.warn(`Found use of deprecated attribute 'cdk-focus-${t}', use 'cdkFocusRegion${t}' instead. The deprecated attribute will be removed in 8.0.0.`,e[o]):e[o].hasAttribute(`cdk-focus-region-${t}`)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${t}', use 'cdkFocusRegion${t}' instead. The deprecated attribute will be removed in 8.0.0.`,e[o]);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(e.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",e),!this._checker.isFocusable(e)){const o=this._getFirstTabbableElement(e);return null==o||o.focus(t),!!o}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){const e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){const e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let o=0;o<e.length;o++){const a=e[o].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[o]):null;if(a)return a}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let o=e.length-1;o>=0;o--){const a=e[o].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[o]):null;if(a)return a}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe(Rn(1)).subscribe(t)}}let nk=(()=>{class r{constructor(e,o,a){this._checker=e,this._ngZone=o,this._document=a}create(e,o=!1){return new k7(e,this._checker,this._ngZone,this._document,o)}}return r.\u0275fac=function(e){return new(e||r)(Oe(VT),Oe(bi),Oe(Kt))},r.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function HT(r){return 0===r.offsetX&&0===r.offsetY}function UT(r){const t=r.touches&&r.touches[0]||r.changedTouches&&r.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}const N7=new xe("cdk-input-modality-detector-options"),P7={ignoreKeys:[18,17,224,91,16]},Ip=nu({passive:!0,capture:!0});let L7=(()=>{class r{constructor(e,o,a,c){this._platform=e,this._mostRecentTarget=null,this._modality=new Qo(null),this._lastTouchMs=0,this._onKeydown=d=>{var p,g;(null==(g=null==(p=this._options)?void 0:p.ignoreKeys)?void 0:g.some(v=>v===d.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=ru(d))},this._onMousedown=d=>{Date.now()-this._lastTouchMs<650||(this._modality.next(HT(d)?"keyboard":"mouse"),this._mostRecentTarget=ru(d))},this._onTouchstart=d=>{UT(d)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=ru(d))},this._options=ht(ht({},P7),c),this.modalityDetected=this._modality.pipe(XO(1)),this.modalityChanged=this.modalityDetected.pipe(kT()),e.isBrowser&&o.runOutsideAngular(()=>{a.addEventListener("keydown",this._onKeydown,Ip),a.addEventListener("mousedown",this._onMousedown,Ip),a.addEventListener("touchstart",this._onTouchstart,Ip)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Ip),document.removeEventListener("mousedown",this._onMousedown,Ip),document.removeEventListener("touchstart",this._onTouchstart,Ip))}}return r.\u0275fac=function(e){return new(e||r)(Oe(so),Oe(bi),Oe(Kt),Oe(N7,8))},r.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const B7=new xe("cdk-focus-monitor-default-options"),Dv=nu({passive:!0,capture:!0});let Es=(()=>{class r{constructor(e,o,a,c,d){this._ngZone=e,this._platform=o,this._inputModalityDetector=a,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Se,this._rootNodeFocusAndBlurListener=p=>{const g=ru(p),v="focus"===p.type?this._onFocus:this._onBlur;for(let E=g;E;E=E.parentElement)v.call(this,p,E)},this._document=c,this._detectionMode=(null==d?void 0:d.detectionMode)||0}monitor(e,o=!1){const a=Cd(e);if(!this._platform.isBrowser||1!==a.nodeType)return zt(null);const c=JO(a)||this._getDocument(),d=this._elementInfo.get(a);if(d)return o&&(d.checkChildren=!0),d.subject;const p={checkChildren:o,subject:new Se,rootNode:c};return this._elementInfo.set(a,p),this._registerGlobalListeners(p),p.subject}stopMonitoring(e){const o=Cd(e),a=this._elementInfo.get(o);a&&(a.subject.complete(),this._setClasses(o),this._elementInfo.delete(o),this._removeGlobalListeners(a))}focusVia(e,o,a){const c=Cd(e);c===this._getDocument().activeElement?this._getClosestElementsInfo(c).forEach(([p,g])=>this._originChanged(p,o,g)):(this._setOrigin(o),"function"==typeof c.focus&&c.focus(a))}ngOnDestroy(){this._elementInfo.forEach((e,o)=>this.stopMonitoring(o))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!(null==e?void 0:e.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(e,o){e.classList.toggle("cdk-focused",!!o),e.classList.toggle("cdk-touch-focused","touch"===o),e.classList.toggle("cdk-keyboard-focused","keyboard"===o),e.classList.toggle("cdk-mouse-focused","mouse"===o),e.classList.toggle("cdk-program-focused","program"===o)}_setOrigin(e,o=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&o,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,o){const a=this._elementInfo.get(o),c=ru(e);!a||!a.checkChildren&&o!==c||this._originChanged(o,this._getFocusOrigin(c),a)}_onBlur(e,o){const a=this._elementInfo.get(o);!a||a.checkChildren&&e.relatedTarget instanceof Node&&o.contains(e.relatedTarget)||(this._setClasses(o),this._emitOrigin(a.subject,null))}_emitOrigin(e,o){this._ngZone.run(()=>e.next(o))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const o=e.rootNode,a=this._rootNodeFocusListenerCount.get(o)||0;a||this._ngZone.runOutsideAngular(()=>{o.addEventListener("focus",this._rootNodeFocusAndBlurListener,Dv),o.addEventListener("blur",this._rootNodeFocusAndBlurListener,Dv)}),this._rootNodeFocusListenerCount.set(o,a+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(dn(this._stopInputModalityDetector)).subscribe(c=>{this._setOrigin(c,!0)}))}_removeGlobalListeners(e){const o=e.rootNode;if(this._rootNodeFocusListenerCount.has(o)){const a=this._rootNodeFocusListenerCount.get(o);a>1?this._rootNodeFocusListenerCount.set(o,a-1):(o.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Dv),o.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Dv),this._rootNodeFocusListenerCount.delete(o))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,o,a){this._setClasses(e,o),this._emitOrigin(a.subject,o),this._lastFocusOrigin=o}_getClosestElementsInfo(e){const o=[];return this._elementInfo.forEach((a,c)=>{(c===e||a.checkChildren&&c.contains(e))&&o.push([c,a])}),o}}return r.\u0275fac=function(e){return new(e||r)(Oe(bi),Oe(so),Oe(L7),Oe(Kt,8),Oe(B7,8))},r.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const ok="cdk-high-contrast-black-on-white",sk="cdk-high-contrast-white-on-black",GT="cdk-high-contrast-active";let ak=(()=>{class r{constructor(e,o){this._platform=e,this._document=o}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const o=this._document.defaultView||window,a=o&&o.getComputedStyle?o.getComputedStyle(e):null,c=(a&&a.backgroundColor||"").replace(/ /g,"");switch(e.remove(),c){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(GT),e.remove(ok),e.remove(sk),this._hasCheckedHighContrastMode=!0;const o=this.getHighContrastMode();1===o?(e.add(GT),e.add(ok)):2===o&&(e.add(GT),e.add(sk))}}}return r.\u0275fac=function(e){return new(e||r)(Oe(so),Oe(Kt))},r.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Rv=(()=>{class r{constructor(e){e._applyBodyHighContrastModeCssClasses()}}return r.\u0275fac=function(e){return new(e||r)(Oe(ak))},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({imports:[[Rp,Fg]]}),r})();const V7=new xe("cdk-dir-doc",{providedIn:"root",factory:function(){return ed(Kt)}});let Ia=(()=>{class r{constructor(e){if(this.value="ltr",this.change=new Pt,e){const a=e.documentElement?e.documentElement.dir:null,c=(e.body?e.body.dir:null)||a;this.value="ltr"===c||"rtl"===c?c:"ltr"}}ngOnDestroy(){this.change.complete()}}return r.\u0275fac=function(e){return new(e||r)(Oe(V7,8))},r.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),xp=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({}),r})();const lk=new Xc("13.0.1");class ck{}const ic="*";function nr(r,t){return{type:7,name:r,definitions:t,options:{}}}function Ki(r,t=null){return{type:4,styles:t,timings:r}}function uk(r,t=null){return{type:2,steps:r,options:t}}function wt(r){return{type:6,styles:r,offset:null}}function Ri(r,t,e){return{type:0,name:r,styles:t,options:e}}function Wi(r,t,e=null){return{type:1,expr:r,animation:t,options:e}}function pk(r){Promise.resolve(null).then(r)}class Ap{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){pk(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(o=>o()),e.length=0}}class fk{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,o=0,a=0;const c=this.players.length;0==c?pk(()=>this._onFinish()):this.players.forEach(d=>{d.onDone(()=>{++e==c&&this._onFinish()}),d.onDestroy(()=>{++o==c&&this._onDestroy()}),d.onStart(()=>{++a==c&&this._onStart()})}),this.totalTime=this.players.reduce((d,p)=>Math.max(d,p.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(o=>{const a=o.totalTime?Math.min(1,e/o.totalTime):1;o.setPosition(a)})}getPosition(){const t=this.players.reduce((e,o)=>null===e||o.totalTime>e.totalTime?o:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(o=>o()),e.length=0}}function gk(){return"undefined"!=typeof window&&void 0!==window.document}function WT(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function ou(r){switch(r.length){case 0:return new Ap;case 1:return r[0];default:return new fk(r)}}function mk(r,t,e,o,a={},c={}){const d=[],p=[];let g=-1,v=null;if(o.forEach(E=>{const D=E.offset,x=D==g,L=x&&v||{};Object.keys(E).forEach(U=>{let ee=U,$=E[U];if("offset"!==U)switch(ee=t.normalizePropertyName(ee,d),$){case"!":$=a[U];break;case ic:$=c[U];break;default:$=t.normalizeStyleValue(U,ee,$,d)}L[ee]=$}),x||p.push(L),v=L,g=D}),d.length){const E="\n - ";throw new Error(`Unable to animate due to the following errors:${E}${d.join(E)}`)}return p}function zT(r,t,e,o){switch(t){case"start":r.onStart(()=>o(e&&YT(e,"start",r)));break;case"done":r.onDone(()=>o(e&&YT(e,"done",r)));break;case"destroy":r.onDestroy(()=>o(e&&YT(e,"destroy",r)))}}function YT(r,t,e){const o=e.totalTime,c=XT(r.element,r.triggerName,r.fromState,r.toState,t||r.phaseName,null==o?r.totalTime:o,!!e.disabled),d=r._data;return null!=d&&(c._data=d),c}function XT(r,t,e,o,a="",c=0,d){return{element:r,triggerName:t,fromState:e,toState:o,phaseName:a,totalTime:c,disabled:!!d}}function Cs(r,t,e){let o;return r instanceof Map?(o=r.get(t),o||r.set(t,o=e)):(o=r[t],o||(o=r[t]=e)),o}function _k(r){const t=r.indexOf(":");return[r.substring(1,t),r.substr(t+1)]}let $T=(r,t)=>!1,KT=(r,t)=>!1,vk=(r,t,e)=>[];const bk=WT();(bk||"undefined"!=typeof Element)&&($T=gk()?(r,t)=>{for(;t&&t!==document.documentElement;){if(t===r)return!0;t=t.parentNode||t.host}return!1}:(r,t)=>r.contains(t),KT=(()=>{if(bk||Element.prototype.matches)return(r,t)=>r.matches(t);{const r=Element.prototype,t=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector;return t?(e,o)=>t.apply(e,[o]):KT}})(),vk=(r,t,e)=>{let o=[];if(e){const a=r.querySelectorAll(t);for(let c=0;c<a.length;c++)o.push(a[c])}else{const a=r.querySelector(t);a&&o.push(a)}return o});let Sd=null,yk=!1;function JT(r){Sd||(Sd=("undefined"!=typeof document?document.body:null)||{},yk=!!Sd.style&&"WebkitAppearance"in Sd.style);let t=!0;return Sd.style&&!function(r){return"ebkit"==r.substring(1,6)}(r)&&(t=r in Sd.style,!t&&yk&&(t="Webkit"+r.charAt(0).toUpperCase()+r.substr(1)in Sd.style)),t}const QT=KT,ZT=$T,qT=vk;function Ek(r){const t={};return Object.keys(r).forEach(e=>{const o=e.replace(/([a-z])([A-Z])/g,"$1-$2");t[o]=r[e]}),t}let Ck=(()=>{class r{validateStyleProperty(e){return JT(e)}matchesElement(e,o){return QT(e,o)}containsElement(e,o){return ZT(e,o)}query(e,o,a){return qT(e,o,a)}computeStyle(e,o,a){return a||""}animate(e,o,a,c,d,p=[],g){return new Ap(a,c)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=rt({token:r,factory:r.\u0275fac}),r})(),ew=(()=>{class r{}return r.NOOP=new Ck,r})();const tw="ng-enter",Mv="ng-leave",Iv="ng-trigger",xv=".ng-trigger",wk="ng-animating",iw=".ng-animating";function Dd(r){if("number"==typeof r)return r;const t=r.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:nw(parseFloat(t[1]),t[2])}function nw(r,t){return"s"===t?1e3*r:r}function Av(r,t,e){return r.hasOwnProperty("duration")?r:function(r,t,e){let a,c=0,d="";if("string"==typeof r){const p=r.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===p)return t.push(`The provided timing value "${r}" is invalid.`),{duration:0,delay:0,easing:""};a=nw(parseFloat(p[1]),p[2]);const g=p[3];null!=g&&(c=nw(parseFloat(g),p[4]));const v=p[5];v&&(d=v)}else a=r;if(!e){let p=!1,g=t.length;a<0&&(t.push("Duration values below 0 are not allowed for this animation step."),p=!0),c<0&&(t.push("Delay values below 0 are not allowed for this animation step."),p=!0),p&&t.splice(g,0,`The provided timing value "${r}" is invalid.`)}return{duration:a,delay:c,easing:d}}(r,t,e)}function Op(r,t={}){return Object.keys(r).forEach(e=>{t[e]=r[e]}),t}function su(r,t,e={}){if(t)for(let o in r)e[o]=r[o];else Op(r,e);return e}function Dk(r,t,e){return e?t+":"+e+";":""}function Rk(r){let t="";for(let e=0;e<r.style.length;e++){const o=r.style.item(e);t+=Dk(0,o,r.style.getPropertyValue(o))}for(const e in r.style)r.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=Dk(0,K7(e),r.style[e]));r.setAttribute("style",t)}function ul(r,t,e){r.style&&(Object.keys(t).forEach(o=>{const a=ow(o);e&&!e.hasOwnProperty(o)&&(e[o]=r.style[a]),r.style[a]=t[o]}),WT()&&Rk(r))}function Rd(r,t){r.style&&(Object.keys(t).forEach(e=>{const o=ow(e);r.style[o]=""}),WT()&&Rk(r))}function Bg(r){return Array.isArray(r)?1==r.length?r[0]:uk(r):r}const rw=new RegExp("{{\\s*(.+?)\\s*}}","g");function Mk(r){let t=[];if("string"==typeof r){let e;for(;e=rw.exec(r);)t.push(e[1]);rw.lastIndex=0}return t}function Ov(r,t,e){const o=r.toString(),a=o.replace(rw,(c,d)=>{let p=t[d];return t.hasOwnProperty(d)||(e.push(`Please provide a value for the animation param ${d}`),p=""),p.toString()});return a==o?r:a}function kv(r){const t=[];let e=r.next();for(;!e.done;)t.push(e.value),e=r.next();return t}const $7=/-+([a-z0-9])/g;function ow(r){return r.replace($7,(...t)=>t[1].toUpperCase())}function K7(r){return r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Ik(r,t){return 0===r||0===t}function xk(r,t,e){const o=Object.keys(e);if(o.length&&t.length){let c=t[0],d=[];if(o.forEach(p=>{c.hasOwnProperty(p)||d.push(p),c[p]=e[p]}),d.length)for(var a=1;a<t.length;a++){let p=t[a];d.forEach(function(g){p[g]=sw(r,g)})}}return t}function Ts(r,t,e){switch(t.type){case 7:return r.visitTrigger(t,e);case 0:return r.visitState(t,e);case 1:return r.visitTransition(t,e);case 2:return r.visitSequence(t,e);case 3:return r.visitGroup(t,e);case 4:return r.visitAnimate(t,e);case 5:return r.visitKeyframes(t,e);case 6:return r.visitStyle(t,e);case 8:return r.visitReference(t,e);case 9:return r.visitAnimateChild(t,e);case 10:return r.visitAnimateRef(t,e);case 11:return r.visitQuery(t,e);case 12:return r.visitStagger(t,e);default:throw new Error(`Unable to resolve animation metadata node #${t.type}`)}}function sw(r,t){return window.getComputedStyle(r)[t]}function J7(r,t){const e=[];return"string"==typeof r?r.split(/\s*,\s*/).forEach(o=>function(r,t,e){if(":"==r[0]){const g=function(r,t){switch(r){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,o)=>parseFloat(o)>parseFloat(e);case":decrement":return(e,o)=>parseFloat(o)<parseFloat(e);default:return t.push(`The transition alias value "${r}" is not supported`),"* => *"}}(r,e);if("function"==typeof g)return void t.push(g);r=g}const o=r.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==o||o.length<4)return e.push(`The provided transition expression "${r}" is not supported`),t;const a=o[1],c=o[2],d=o[3];t.push(Ak(a,d));"<"==c[0]&&!("*"==a&&"*"==d)&&t.push(Ak(d,a))}(o,e,t)):e.push(r),e}const Pv=new Set(["true","1"]),Lv=new Set(["false","0"]);function Ak(r,t){const e=Pv.has(r)||Lv.has(r),o=Pv.has(t)||Lv.has(t);return(a,c)=>{let d="*"==r||r==a,p="*"==t||t==c;return!d&&e&&"boolean"==typeof a&&(d=a?Pv.has(r):Lv.has(r)),!p&&o&&"boolean"==typeof c&&(p=c?Pv.has(t):Lv.has(t)),d&&p}}const q7=new RegExp("s*:selfs*,?","g");function aw(r,t,e){return new e9(r).build(t,e)}class e9{constructor(t){this._driver=t}build(t,e){const o=new r9(e);return this._resetContextStyleTimingState(o),Ts(this,Bg(t),o)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let o=e.queryCount=0,a=e.depCount=0;const c=[],d=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(p=>{if(this._resetContextStyleTimingState(e),0==p.type){const g=p,v=g.name;v.toString().split(/\s*,\s*/).forEach(E=>{g.name=E,c.push(this.visitState(g,e))}),g.name=v}else if(1==p.type){const g=this.visitTransition(p,e);o+=g.queryCount,a+=g.depCount,d.push(g)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:c,transitions:d,queryCount:o,depCount:a,options:null}}visitState(t,e){const o=this.visitStyle(t.styles,e),a=t.options&&t.options.params||null;if(o.containsDynamicStyles){const c=new Set,d=a||{};if(o.styles.forEach(p=>{if(Fv(p)){const g=p;Object.keys(g).forEach(v=>{Mk(g[v]).forEach(E=>{d.hasOwnProperty(E)||c.add(E)})})}}),c.size){const p=kv(c.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${p.join(", ")}`)}}return{type:0,name:t.name,style:o,options:a?{params:a}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const o=Ts(this,Bg(t.animation),e);return{type:1,matchers:J7(t.expr,e.errors),animation:o,queryCount:e.queryCount,depCount:e.depCount,options:Md(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(o=>Ts(this,o,e)),options:Md(t.options)}}visitGroup(t,e){const o=e.currentTime;let a=0;const c=t.steps.map(d=>{e.currentTime=o;const p=Ts(this,d,e);return a=Math.max(a,e.currentTime),p});return e.currentTime=a,{type:3,steps:c,options:Md(t.options)}}visitAnimate(t,e){const o=function(r,t){let e=null;if(r.hasOwnProperty("duration"))e=r;else if("number"==typeof r)return lw(Av(r,t).duration,0,"");const o=r;if(o.split(/\s+/).some(c=>"{"==c.charAt(0)&&"{"==c.charAt(1))){const c=lw(0,0,"");return c.dynamic=!0,c.strValue=o,c}return e=e||Av(o,t),lw(e.duration,e.delay,e.easing)}(t.timings,e.errors);e.currentAnimateTimings=o;let a,c=t.styles?t.styles:wt({});if(5==c.type)a=this.visitKeyframes(c,e);else{let d=t.styles,p=!1;if(!d){p=!0;const v={};o.easing&&(v.easing=o.easing),d=wt(v)}e.currentTime+=o.duration+o.delay;const g=this.visitStyle(d,e);g.isEmptyStep=p,a=g}return e.currentAnimateTimings=null,{type:4,timings:o,style:a,options:null}}visitStyle(t,e){const o=this._makeStyleAst(t,e);return this._validateStyleAst(o,e),o}_makeStyleAst(t,e){const o=[];Array.isArray(t.styles)?t.styles.forEach(d=>{"string"==typeof d?d==ic?o.push(d):e.errors.push(`The provided style string value ${d} is not allowed.`):o.push(d)}):o.push(t.styles);let a=!1,c=null;return o.forEach(d=>{if(Fv(d)){const p=d,g=p.easing;if(g&&(c=g,delete p.easing),!a)for(let v in p)if(p[v].toString().indexOf("{{")>=0){a=!0;break}}}),{type:6,styles:o,easing:c,offset:t.offset,containsDynamicStyles:a,options:null}}_validateStyleAst(t,e){const o=e.currentAnimateTimings;let a=e.currentTime,c=e.currentTime;o&&c>0&&(c-=o.duration+o.delay),t.styles.forEach(d=>{"string"!=typeof d&&Object.keys(d).forEach(p=>{if(!this._driver.validateStyleProperty(p))return void e.errors.push(`The provided animation property "${p}" is not a supported CSS property for animations`);const g=e.collectedStyles[e.currentQuerySelector],v=g[p];let E=!0;v&&(c!=a&&c>=v.startTime&&a<=v.endTime&&(e.errors.push(`The CSS property "${p}" that exists between the times of "${v.startTime}ms" and "${v.endTime}ms" is also being animated in a parallel animation between the times of "${c}ms" and "${a}ms"`),E=!1),c=v.startTime),E&&(g[p]={startTime:c,endTime:a}),e.options&&function(r,t,e){const o=t.params||{},a=Mk(r);a.length&&a.forEach(c=>{o.hasOwnProperty(c)||e.push(`Unable to resolve the local animation param ${c} in the given list of values`)})}(d[p],e.options,e.errors)})})}visitKeyframes(t,e){const o={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),o;let c=0;const d=[];let p=!1,g=!1,v=0;const E=t.steps.map(ge=>{const be=this._makeStyleAst(ge,e);let $e=null!=be.offset?be.offset:function(r){if("string"==typeof r)return null;let t=null;if(Array.isArray(r))r.forEach(e=>{if(Fv(e)&&e.hasOwnProperty("offset")){const o=e;t=parseFloat(o.offset),delete o.offset}});else if(Fv(r)&&r.hasOwnProperty("offset")){const e=r;t=parseFloat(e.offset),delete e.offset}return t}(be.styles),et=0;return null!=$e&&(c++,et=be.offset=$e),g=g||et<0||et>1,p=p||et<v,v=et,d.push(et),be});g&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),p&&e.errors.push("Please ensure that all keyframe offsets are in order");const D=t.steps.length;let x=0;c>0&&c<D?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==c&&(x=1/(D-1));const L=D-1,U=e.currentTime,ee=e.currentAnimateTimings,$=ee.duration;return E.forEach((ge,be)=>{const $e=x>0?be==L?1:x*be:d[be],et=$e*$;e.currentTime=U+ee.delay+et,ee.duration=et,this._validateStyleAst(ge,e),ge.offset=$e,o.styles.push(ge)}),o}visitReference(t,e){return{type:8,animation:Ts(this,Bg(t.animation),e),options:Md(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:Md(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Md(t.options)}}visitQuery(t,e){const o=e.currentQuerySelector,a=t.options||{};e.queryCount++,e.currentQuery=t;const[c,d]=function(r){const t=!!r.split(/\s*,\s*/).find(e=>":self"==e);return t&&(r=r.replace(q7,"")),r=r.replace(/@\*/g,xv).replace(/@\w+/g,e=>xv+"-"+e.substr(1)).replace(/:animating/g,iw),[r,t]}(t.selector);e.currentQuerySelector=o.length?o+" "+c:c,Cs(e.collectedStyles,e.currentQuerySelector,{});const p=Ts(this,Bg(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=o,{type:11,selector:c,limit:a.limit||0,optional:!!a.optional,includeSelf:d,animation:p,originalSelector:t.selector,options:Md(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const o="full"===t.timings?{duration:0,delay:0,easing:"full"}:Av(t.timings,e.errors,!0);return{type:12,animation:Ts(this,Bg(t.animation),e),timings:o,options:null}}}class r9{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function Fv(r){return!Array.isArray(r)&&"object"==typeof r}function Md(r){return r?(r=Op(r)).params&&(r.params=function(r){return r?Op(r):null}(r.params)):r={},r}function lw(r,t,e){return{duration:r,delay:t,easing:e}}function cw(r,t,e,o,a,c,d=null,p=!1){return{type:1,element:r,keyframes:t,preStyleProps:e,postStyleProps:o,duration:a,delay:c,totalTime:a+c,easing:d,subTimeline:p}}class Bv{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let o=this._map.get(t);o||this._map.set(t,o=[]),o.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const c9=new RegExp(":enter","g"),d9=new RegExp(":leave","g");function uw(r,t,e,o,a,c={},d={},p,g,v=[]){return(new h9).buildKeyframes(r,t,e,o,a,c,d,p,g,v)}class h9{buildKeyframes(t,e,o,a,c,d,p,g,v,E=[]){v=v||new Bv;const D=new dw(t,e,v,a,c,E,[]);D.options=g,D.currentTimeline.setStyles([d],null,D.errors,g),Ts(this,o,D);const x=D.timelines.filter(L=>L.containsAnimation());if(x.length&&Object.keys(p).length){const L=x[x.length-1];L.allowOnlyTimelineStyles()||L.setStyles([p],null,D.errors,g)}return x.length?x.map(L=>L.buildKeyframes()):[cw(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const o=e.subInstructions.consume(e.element);if(o){const a=e.createSubContext(t.options),c=e.currentTimeline.currentTime,d=this._visitSubInstructions(o,a,a.options);c!=d&&e.transformIntoNewTimeline(d)}e.previousNode=t}visitAnimateRef(t,e){const o=e.createSubContext(t.options);o.transformIntoNewTimeline(),this.visitReference(t.animation,o),e.transformIntoNewTimeline(o.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,o){let c=e.currentTimeline.currentTime;const d=null!=o.duration?Dd(o.duration):null,p=null!=o.delay?Dd(o.delay):null;return 0!==d&&t.forEach(g=>{const v=e.appendInstructionToTimeline(g,d,p);c=Math.max(c,v.duration+v.delay)}),c}visitReference(t,e){e.updateOptions(t.options,!0),Ts(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const o=e.subContextCount;let a=e;const c=t.options;if(c&&(c.params||c.delay)&&(a=e.createSubContext(c),a.transformIntoNewTimeline(),null!=c.delay)){6==a.previousNode.type&&(a.currentTimeline.snapshotCurrentStyles(),a.previousNode=Vv);const d=Dd(c.delay);a.delayNextStep(d)}t.steps.length&&(t.steps.forEach(d=>Ts(this,d,a)),a.currentTimeline.applyStylesToKeyframe(),a.subContextCount>o&&a.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const o=[];let a=e.currentTimeline.currentTime;const c=t.options&&t.options.delay?Dd(t.options.delay):0;t.steps.forEach(d=>{const p=e.createSubContext(t.options);c&&p.delayNextStep(c),Ts(this,d,p),a=Math.max(a,p.currentTimeline.currentTime),o.push(p.currentTimeline)}),o.forEach(d=>e.currentTimeline.mergeTimelineCollectedStyles(d)),e.transformIntoNewTimeline(a),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const o=t.strValue;return Av(e.params?Ov(o,e.params,e.errors):o,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const o=e.currentAnimateTimings=this._visitTiming(t.timings,e),a=e.currentTimeline;o.delay&&(e.incrementTime(o.delay),a.snapshotCurrentStyles());const c=t.style;5==c.type?this.visitKeyframes(c,e):(e.incrementTime(o.duration),this.visitStyle(c,e),a.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const o=e.currentTimeline,a=e.currentAnimateTimings;!a&&o.getCurrentStyleProperties().length&&o.forwardFrame();const c=a&&a.easing||t.easing;t.isEmptyStep?o.applyEmptyStep(c):o.setStyles(t.styles,c,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const o=e.currentAnimateTimings,a=e.currentTimeline.duration,c=o.duration,p=e.createSubContext().currentTimeline;p.easing=o.easing,t.styles.forEach(g=>{p.forwardTime((g.offset||0)*c),p.setStyles(g.styles,g.easing,e.errors,e.options),p.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(p),e.transformIntoNewTimeline(a+c),e.previousNode=t}visitQuery(t,e){const o=e.currentTimeline.currentTime,a=t.options||{},c=a.delay?Dd(a.delay):0;c&&(6===e.previousNode.type||0==o&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Vv);let d=o;const p=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!a.optional,e.errors);e.currentQueryTotal=p.length;let g=null;p.forEach((v,E)=>{e.currentQueryIndex=E;const D=e.createSubContext(t.options,v);c&&D.delayNextStep(c),v===e.element&&(g=D.currentTimeline),Ts(this,t.animation,D),D.currentTimeline.applyStylesToKeyframe(),d=Math.max(d,D.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(d),g&&(e.currentTimeline.mergeTimelineCollectedStyles(g),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const o=e.parentContext,a=e.currentTimeline,c=t.timings,d=Math.abs(c.duration),p=d*(e.currentQueryTotal-1);let g=d*e.currentQueryIndex;switch(c.duration<0?"reverse":c.easing){case"reverse":g=p-g;break;case"full":g=o.currentStaggerTime}const E=e.currentTimeline;g&&E.delayNextStep(g);const D=E.currentTime;Ts(this,t.animation,e),e.previousNode=t,o.currentStaggerTime=a.currentTime-D+(a.startTime-o.currentTimeline.startTime)}}const Vv={};class dw{constructor(t,e,o,a,c,d,p,g){this._driver=t,this.element=e,this.subInstructions=o,this._enterClassName=a,this._leaveClassName=c,this.errors=d,this.timelines=p,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Vv,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=g||new Hv(this._driver,e,0),p.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const o=t;let a=this.options;null!=o.duration&&(a.duration=Dd(o.duration)),null!=o.delay&&(a.delay=Dd(o.delay));const c=o.params;if(c){let d=a.params;d||(d=this.options.params={}),Object.keys(c).forEach(p=>{(!e||!d.hasOwnProperty(p))&&(d[p]=Ov(c[p],d,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const o=t.params={};Object.keys(e).forEach(a=>{o[a]=e[a]})}}return t}createSubContext(t=null,e,o){const a=e||this.element,c=new dw(this._driver,a,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(a,o||0));return c.previousNode=this.previousNode,c.currentAnimateTimings=this.currentAnimateTimings,c.options=this._copyOptions(),c.updateOptions(t),c.currentQueryIndex=this.currentQueryIndex,c.currentQueryTotal=this.currentQueryTotal,c.parentContext=this,this.subContextCount++,c}transformIntoNewTimeline(t){return this.previousNode=Vv,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,o){const a={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=o?o:0)+t.delay,easing:""},c=new p9(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,a,t.stretchStartingKeyframe);return this.timelines.push(c),a}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,o,a,c,d){let p=[];if(a&&p.push(this.element),t.length>0){t=(t=t.replace(c9,"."+this._enterClassName)).replace(d9,"."+this._leaveClassName);let v=this._driver.query(this.element,t,1!=o);0!==o&&(v=o<0?v.slice(v.length+o,v.length):v.slice(0,o)),p.push(...v)}return!c&&0==p.length&&d.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),p}}class Hv{constructor(t,e,o,a){this._driver=t,this.element=e,this.startTime=o,this._elementTimelineStylesLookup=a,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new Hv(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(e=>{this._backFill[e]=this._globalTimelineStyles[e]||ic,this._currentKeyframe[e]=ic}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,o,a){e&&(this._previousKeyframe.easing=e);const c=a&&a.params||{},d=function(r,t){const e={};let o;return r.forEach(a=>{"*"===a?(o=o||Object.keys(t),o.forEach(c=>{e[c]=ic})):su(a,!1,e)}),e}(t,this._globalTimelineStyles);Object.keys(d).forEach(p=>{const g=Ov(d[p],c,o);this._pendingStyles[p]=g,this._localTimelineStyles.hasOwnProperty(p)||(this._backFill[p]=this._globalTimelineStyles.hasOwnProperty(p)?this._globalTimelineStyles[p]:ic),this._updateStyle(p,g)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(o=>{this._currentKeyframe[o]=t[o]}),Object.keys(this._localTimelineStyles).forEach(o=>{this._currentKeyframe.hasOwnProperty(o)||(this._currentKeyframe[o]=this._localTimelineStyles[o])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const o=this._styleSummary[e],a=t._styleSummary[e];(!o||a.time>o.time)&&this._updateStyle(e,a.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,o=1===this._keyframes.size&&0===this.duration;let a=[];this._keyframes.forEach((p,g)=>{const v=su(p,!0);Object.keys(v).forEach(E=>{const D=v[E];"!"==D?t.add(E):D==ic&&e.add(E)}),o||(v.offset=g/this.duration),a.push(v)});const c=t.size?kv(t.values()):[],d=e.size?kv(e.values()):[];if(o){const p=a[0],g=Op(p);p.offset=0,g.offset=1,a=[p,g]}return cw(this.element,a,c,d,this.duration,this.startTime,this.easing,!1)}}class p9 extends Hv{constructor(t,e,o,a,c,d,p=!1){super(t,e,d.delay),this.keyframes=o,this.preStyleProps=a,this.postStyleProps=c,this._stretchStartingKeyframe=p,this.timings={duration:d.duration,delay:d.delay,easing:d.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:o,easing:a}=this.timings;if(this._stretchStartingKeyframe&&e){const c=[],d=o+e,p=e/d,g=su(t[0],!1);g.offset=0,c.push(g);const v=su(t[0],!1);v.offset=Nk(p),c.push(v);const E=t.length-1;for(let D=1;D<=E;D++){let x=su(t[D],!1);x.offset=Nk((e+x.offset*o)/d),c.push(x)}o=d,e=0,a="",t=c}return cw(this.element,t,this.preStyleProps,this.postStyleProps,o,e,a,!0)}}function Nk(r,t=3){const e=Math.pow(10,t-1);return Math.round(r*e)/e}class hw{}class g9 extends hw{normalizePropertyName(t,e){return ow(t)}normalizeStyleValue(t,e,o,a){let c="";const d=o.toString().trim();if(m9[e]&&0!==o&&"0"!==o)if("number"==typeof o)c="px";else{const p=o.match(/^[+-]?[\d\.]+([a-z]*)$/);p&&0==p[1].length&&a.push(`Please provide a CSS unit value for ${t}:${o}`)}return d+c}}const m9=(()=>function(r){const t={};return r.forEach(e=>t[e]=!0),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function Pk(r,t,e,o,a,c,d,p,g,v,E,D,x){return{type:0,element:r,triggerName:t,isRemovalTransition:a,fromState:e,fromStyles:c,toState:o,toStyles:d,timelines:p,queriedElements:g,preStyleProps:v,postStyleProps:E,totalTime:D,errors:x}}const pw={};class Lk{constructor(t,e,o){this._triggerName=t,this.ast=e,this._stateStyles=o}match(t,e,o,a){return function(r,t,e,o,a){return r.some(c=>c(t,e,o,a))}(this.ast.matchers,t,e,o,a)}buildStyles(t,e,o){const a=this._stateStyles["*"],c=this._stateStyles[t],d=a?a.buildStyles(e,o):{};return c?c.buildStyles(e,o):d}build(t,e,o,a,c,d,p,g,v,E){const D=[],x=this.ast.options&&this.ast.options.params||pw,U=this.buildStyles(o,p&&p.params||pw,D),ee=g&&g.params||pw,$=this.buildStyles(a,ee,D),ge=new Set,be=new Map,$e=new Map,et="void"===a,Bt={params:ht(ht({},x),ee)},Mi=E?[]:uw(t,e,this.ast.animation,c,d,U,$,Bt,v,D);let ki=0;if(Mi.forEach(Hn=>{ki=Math.max(Hn.duration+Hn.delay,ki)}),D.length)return Pk(e,this._triggerName,o,a,et,U,$,[],[],be,$e,ki,D);Mi.forEach(Hn=>{const Cn=Hn.element,Ei=Cs(be,Cn,{});Hn.preStyleProps.forEach(Or=>Ei[Or]=!0);const ao=Cs($e,Cn,{});Hn.postStyleProps.forEach(Or=>ao[Or]=!0),Cn!==e&&ge.add(Cn)});const Sn=kv(ge.values());return Pk(e,this._triggerName,o,a,et,U,$,Mi,Sn,be,$e,ki)}}class b9{constructor(t,e,o){this.styles=t,this.defaultParams=e,this.normalizer=o}buildStyles(t,e){const o={},a=Op(this.defaultParams);return Object.keys(t).forEach(c=>{const d=t[c];null!=d&&(a[c]=d)}),this.styles.styles.forEach(c=>{if("string"!=typeof c){const d=c;Object.keys(d).forEach(p=>{let g=d[p];g.length>1&&(g=Ov(g,a,e));const v=this.normalizer.normalizePropertyName(p,e);g=this.normalizer.normalizeStyleValue(p,v,g,e),o[v]=g})}}),o}}class E9{constructor(t,e,o){this.name=t,this.ast=e,this._normalizer=o,this.transitionFactories=[],this.states={},e.states.forEach(a=>{this.states[a.name]=new b9(a.style,a.options&&a.options.params||{},o)}),Fk(this.states,"true","1"),Fk(this.states,"false","0"),e.transitions.forEach(a=>{this.transitionFactories.push(new Lk(t,a,this.states))}),this.fallbackTransition=function(r,t,e){return new Lk(r,{type:1,animation:{type:2,steps:[],options:null},matchers:[(d,p)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,o,a){return this.transitionFactories.find(d=>d.match(t,e,o,a))||null}matchStyles(t,e,o){return this.fallbackTransition.buildStyles(t,e,o)}}function Fk(r,t,e){r.hasOwnProperty(t)?r.hasOwnProperty(e)||(r[e]=r[t]):r.hasOwnProperty(e)&&(r[t]=r[e])}const T9=new Bv;class w9{constructor(t,e,o){this.bodyNode=t,this._driver=e,this._normalizer=o,this._animations={},this._playersById={},this.players=[]}register(t,e){const o=[],a=aw(this._driver,e,o);if(o.length)throw new Error(`Unable to build the animation due to the following errors: ${o.join("\n")}`);this._animations[t]=a}_buildPlayer(t,e,o){const a=t.element,c=mk(0,this._normalizer,0,t.keyframes,e,o);return this._driver.animate(a,c,t.duration,t.delay,t.easing,[],!0)}create(t,e,o={}){const a=[],c=this._animations[t];let d;const p=new Map;if(c?(d=uw(this._driver,e,c,tw,Mv,{},{},o,T9,a),d.forEach(E=>{const D=Cs(p,E.element,{});E.postStyleProps.forEach(x=>D[x]=null)})):(a.push("The requested animation doesn't exist or has already been destroyed"),d=[]),a.length)throw new Error(`Unable to create the animation due to the following errors: ${a.join("\n")}`);p.forEach((E,D)=>{Object.keys(E).forEach(x=>{E[x]=this._driver.computeStyle(D,x,ic)})});const v=ou(d.map(E=>{const D=p.get(E.element);return this._buildPlayer(E,{},D)}));return this._playersById[t]=v,v.onDestroy(()=>this.destroy(t)),this.players.push(v),v}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const o=this.players.indexOf(e);o>=0&&this.players.splice(o,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,o,a){const c=XT(e,"","","");return zT(this._getPlayer(t),o,c,a),()=>{}}command(t,e,o,a){if("register"==o)return void this.register(t,a[0]);if("create"==o)return void this.create(t,e,a[0]||{});const c=this._getPlayer(t);switch(o){case"play":c.play();break;case"pause":c.pause();break;case"reset":c.reset();break;case"restart":c.restart();break;case"finish":c.finish();break;case"init":c.init();break;case"setPosition":c.setPosition(parseFloat(a[0]));break;case"destroy":this.destroy(t)}}}const Bk="ng-animate-queued",Vk="ng-animate-disabled",Hk=".ng-animate-disabled",M9=[],Uk={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},I9={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Zs="__ng_removed";class fw{constructor(t,e=""){this.namespaceId=e;const o=t&&t.hasOwnProperty("value");if(this.value=null!=(r=o?t.value:t)?r:null,o){const c=Op(t);delete c.value,this.options=c}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const o=this.options.params;Object.keys(e).forEach(a=>{null==o[a]&&(o[a]=e[a])})}}}const Vg="void",gw=new fw(Vg);class x9{constructor(t,e,o){this.id=t,this.hostElement=e,this._engine=o,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,qs(e,this._hostClassName)}listen(t,e,o,a){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${o}" because the animation trigger "${e}" doesn't exist!`);if(null==o||0==o.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(r=o)&&"done"!=r)throw new Error(`The provided animation trigger event "${o}" for the animation trigger "${e}" is not supported!`);var r;const c=Cs(this._elementListeners,t,[]),d={name:e,phase:o,callback:a};c.push(d);const p=Cs(this._engine.statesByElement,t,{});return p.hasOwnProperty(e)||(qs(t,Iv),qs(t,Iv+"-"+e),p[e]=gw),()=>{this._engine.afterFlush(()=>{const g=c.indexOf(d);g>=0&&c.splice(g,1),this._triggers[e]||delete p[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,o,a=!0){const c=this._getTrigger(e),d=new mw(this.id,e,t);let p=this._engine.statesByElement.get(t);p||(qs(t,Iv),qs(t,Iv+"-"+e),this._engine.statesByElement.set(t,p={}));let g=p[e];const v=new fw(o,this.id);if(!(o&&o.hasOwnProperty("value"))&&g&&v.absorbOptions(g.options),p[e]=v,g||(g=gw),v.value!==Vg&&g.value===v.value){if(!function(r,t){const e=Object.keys(r),o=Object.keys(t);if(e.length!=o.length)return!1;for(let a=0;a<e.length;a++){const c=e[a];if(!t.hasOwnProperty(c)||r[c]!==t[c])return!1}return!0}(g.params,v.params)){const ee=[],$=c.matchStyles(g.value,g.params,ee),ge=c.matchStyles(v.value,v.params,ee);ee.length?this._engine.reportError(ee):this._engine.afterFlush(()=>{Rd(t,$),ul(t,ge)})}return}const x=Cs(this._engine.playersByElement,t,[]);x.forEach(ee=>{ee.namespaceId==this.id&&ee.triggerName==e&&ee.queued&&ee.destroy()});let L=c.matchTransition(g.value,v.value,t,v.params),U=!1;if(!L){if(!a)return;L=c.fallbackTransition,U=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:L,fromState:g,toState:v,player:d,isFallbackTransition:U}),U||(qs(t,Bk),d.onStart(()=>{kp(t,Bk)})),d.onDone(()=>{let ee=this.players.indexOf(d);ee>=0&&this.players.splice(ee,1);const $=this._engine.playersByElement.get(t);if($){let ge=$.indexOf(d);ge>=0&&$.splice(ge,1)}}),this.players.push(d),x.push(d),d}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,o)=>{delete e[t]}),this._elementListeners.forEach((e,o)=>{this._elementListeners.set(o,e.filter(a=>a.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(o=>o.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const o=this._engine.driver.query(t,xv,!0);o.forEach(a=>{if(a[Zs])return;const c=this._engine.fetchNamespacesByElement(a);c.size?c.forEach(d=>d.triggerLeaveAnimation(a,e,!1,!0)):this.clearElementCache(a)}),this._engine.afterFlushAnimationsDone(()=>o.forEach(a=>this.clearElementCache(a)))}triggerLeaveAnimation(t,e,o,a){const c=this._engine.statesByElement.get(t);if(c){const d=[];if(Object.keys(c).forEach(p=>{if(this._triggers[p]){const g=this.trigger(t,p,Vg,a);g&&d.push(g)}}),d.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),o&&ou(d).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),o=this._engine.statesByElement.get(t);if(e&&o){const a=new Set;e.forEach(c=>{const d=c.name;if(a.has(d))return;a.add(d);const g=this._triggers[d].fallbackTransition,v=o[d]||gw,E=new fw(Vg),D=new mw(this.id,d,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:d,transition:g,fromState:v,toState:E,player:D,isFallbackTransition:!0})})}}removeNode(t,e){const o=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let a=!1;if(o.totalAnimations){const c=o.players.length?o.playersByQueriedElement.get(t):[];if(c&&c.length)a=!0;else{let d=t;for(;d=d.parentNode;)if(o.statesByElement.get(d)){a=!0;break}}}if(this.prepareLeaveAnimationListeners(t),a)o.markElementAsRemoved(this.id,t,!1,e);else{const c=t[Zs];(!c||c===Uk)&&(o.afterFlush(()=>this.clearElementCache(t)),o.destroyInnerAnimations(t),o._onRemovalComplete(t,e))}}insertNode(t,e){qs(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(o=>{const a=o.player;if(a.destroyed)return;const c=o.element,d=this._elementListeners.get(c);d&&d.forEach(p=>{if(p.name==o.triggerName){const g=XT(c,o.triggerName,o.fromState.value,o.toState.value);g._data=t,zT(o.player,p.phase,g,p.callback)}}),a.markedForDestroy?this._engine.afterFlush(()=>{a.destroy()}):e.push(o)}),this._queue=[],e.sort((o,a)=>{const c=o.transition.ast.depCount,d=a.transition.ast.depCount;return 0==c||0==d?c-d:this._engine.driver.containsElement(o.element,a.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(o=>o.element===t)||e,e}}class A9{constructor(t,e,o){this.bodyNode=t,this.driver=e,this._normalizer=o,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(a,c)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(o=>{o.queued&&t.push(o)})}),t}createNamespace(t,e){const o=new x9(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(o,e):(this.newHostElements.set(e,o),this.collectEnterElement(e)),this._namespaceLookup[t]=o}_balanceNamespaceList(t,e){const o=this._namespaceList.length-1;if(o>=0){let a=!1;for(let c=o;c>=0;c--)if(this.driver.containsElement(this._namespaceList[c].hostElement,e)){this._namespaceList.splice(c+1,0,t),a=!0;break}a||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let o=this._namespaceLookup[t];return o||(o=this.createNamespace(t,e)),o}registerTrigger(t,e,o){let a=this._namespaceLookup[t];a&&a.register(e,o)&&this.totalAnimations++}destroy(t,e){if(!t)return;const o=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(o.hostElement),delete this._namespaceLookup[t];const a=this._namespaceList.indexOf(o);a>=0&&this._namespaceList.splice(a,1)}),this.afterFlushAnimationsDone(()=>o.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,o=this.statesByElement.get(t);if(o){const a=Object.keys(o);for(let c=0;c<a.length;c++){const d=o[a[c]].namespaceId;if(d){const p=this._fetchNamespace(d);p&&e.add(p)}}}return e}trigger(t,e,o,a){if(Uv(e)){const c=this._fetchNamespace(t);if(c)return c.trigger(e,o,a),!0}return!1}insertNode(t,e,o,a){if(!Uv(e))return;const c=e[Zs];if(c&&c.setForRemoval){c.setForRemoval=!1,c.setForMove=!0;const d=this.collectedLeaveElements.indexOf(e);d>=0&&this.collectedLeaveElements.splice(d,1)}if(t){const d=this._fetchNamespace(t);d&&d.insertNode(e,o)}a&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),qs(t,Vk)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),kp(t,Vk))}removeNode(t,e,o,a){if(Uv(e)){const c=t?this._fetchNamespace(t):null;if(c?c.removeNode(e,a):this.markElementAsRemoved(t,e,!1,a),o){const d=this.namespacesByHostElement.get(e);d&&d.id!==t&&d.removeNode(e,a)}}else this._onRemovalComplete(e,a)}markElementAsRemoved(t,e,o,a){this.collectedLeaveElements.push(e),e[Zs]={namespaceId:t,setForRemoval:a,hasAnimation:o,removedBeforeQueried:!1}}listen(t,e,o,a,c){return Uv(e)?this._fetchNamespace(t).listen(e,o,a,c):()=>{}}_buildInstruction(t,e,o,a,c){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,o,a,t.fromState.options,t.toState.options,e,c)}destroyInnerAnimations(t){let e=this.driver.query(t,xv,!0);e.forEach(o=>this.destroyActiveAnimationsForElement(o)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,iw,!0),e.forEach(o=>this.finishActiveQueriedAnimationOnElement(o)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(o=>{o.queued?o.markedForDestroy=!0:o.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(o=>o.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return ou(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[Zs];if(e&&e.setForRemoval){if(t[Zs]=Uk,e.namespaceId){this.destroyInnerAnimations(t);const o=this._fetchNamespace(e.namespaceId);o&&o.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,Hk)&&this.markElementAsDisabled(t,!1),this.driver.query(t,Hk,!0).forEach(o=>{this.markElementAsDisabled(o,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((o,a)=>this._balanceNamespaceList(o,a)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let o=0;o<this.collectedEnterElements.length;o++)qs(this.collectedEnterElements[o],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const o=[];try{e=this._flushAnimations(o,t)}finally{for(let a=0;a<o.length;a++)o[a]()}}else for(let o=0;o<this.collectedLeaveElements.length;o++)this.processLeaveNode(this.collectedLeaveElements[o]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(o=>o()),this._flushFns=[],this._whenQuietFns.length){const o=this._whenQuietFns;this._whenQuietFns=[],e.length?ou(e).onDone(()=>{o.forEach(a=>a())}):o.forEach(a=>a())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const o=new Bv,a=[],c=new Map,d=[],p=new Map,g=new Map,v=new Map,E=new Set;this.disabledNodes.forEach(ot=>{E.add(ot);const vt=this.driver.query(ot,".ng-animate-queued",!0);for(let yt=0;yt<vt.length;yt++)E.add(vt[yt])});const D=this.bodyNode,x=Array.from(this.statesByElement.keys()),L=Wk(x,this.collectedEnterElements),U=new Map;let ee=0;L.forEach((ot,vt)=>{const yt=tw+ee++;U.set(vt,yt),ot.forEach(Gt=>qs(Gt,yt))});const $=[],ge=new Set,be=new Set;for(let ot=0;ot<this.collectedLeaveElements.length;ot++){const vt=this.collectedLeaveElements[ot],yt=vt[Zs];yt&&yt.setForRemoval&&($.push(vt),ge.add(vt),yt.hasAnimation?this.driver.query(vt,".ng-star-inserted",!0).forEach(Gt=>ge.add(Gt)):be.add(vt))}const $e=new Map,et=Wk(x,Array.from(ge));et.forEach((ot,vt)=>{const yt=Mv+ee++;$e.set(vt,yt),ot.forEach(Gt=>qs(Gt,yt))}),t.push(()=>{L.forEach((ot,vt)=>{const yt=U.get(vt);ot.forEach(Gt=>kp(Gt,yt))}),et.forEach((ot,vt)=>{const yt=$e.get(vt);ot.forEach(Gt=>kp(Gt,yt))}),$.forEach(ot=>{this.processLeaveNode(ot)})});const Bt=[],Mi=[];for(let ot=this._namespaceList.length-1;ot>=0;ot--)this._namespaceList[ot].drainQueuedTransitions(e).forEach(yt=>{const Gt=yt.player,kr=yt.element;if(Bt.push(Gt),this.collectedEnterElements.length){const Jr=kr[Zs];if(Jr&&Jr.setForMove)return void Gt.destroy()}const Qe=!D||!this.driver.containsElement(D,kr),Dt=$e.get(kr),hn=U.get(kr),zi=this._buildInstruction(yt,o,hn,Dt,Qe);if(zi.errors&&zi.errors.length)Mi.push(zi);else{if(Qe)return Gt.onStart(()=>Rd(kr,zi.fromStyles)),Gt.onDestroy(()=>ul(kr,zi.toStyles)),void a.push(Gt);if(yt.isFallbackTransition)return Gt.onStart(()=>Rd(kr,zi.fromStyles)),Gt.onDestroy(()=>ul(kr,zi.toStyles)),void a.push(Gt);zi.timelines.forEach(Jr=>Jr.stretchStartingKeyframe=!0),o.append(kr,zi.timelines),d.push({instruction:zi,player:Gt,element:kr}),zi.queriedElements.forEach(Jr=>Cs(p,Jr,[]).push(Gt)),zi.preStyleProps.forEach((Jr,pl)=>{const pn=Object.keys(Jr);if(pn.length){let Er=g.get(pl);Er||g.set(pl,Er=new Set),pn.forEach(Qg=>Er.add(Qg))}}),zi.postStyleProps.forEach((Jr,pl)=>{const pn=Object.keys(Jr);let Er=v.get(pl);Er||v.set(pl,Er=new Set),pn.forEach(Qg=>Er.add(Qg))})}});if(Mi.length){const ot=[];Mi.forEach(vt=>{ot.push(`@${vt.triggerName} has failed due to:\n`),vt.errors.forEach(yt=>ot.push(`- ${yt}\n`))}),Bt.forEach(vt=>vt.destroy()),this.reportError(ot)}const ki=new Map,Sn=new Map;d.forEach(ot=>{const vt=ot.element;o.has(vt)&&(Sn.set(vt,vt),this._beforeAnimationBuild(ot.player.namespaceId,ot.instruction,ki))}),a.forEach(ot=>{const vt=ot.element;this._getPreviousPlayers(vt,!1,ot.namespaceId,ot.triggerName,null).forEach(Gt=>{Cs(ki,vt,[]).push(Gt),Gt.destroy()})});const Hn=$.filter(ot=>Yk(ot,g,v)),Cn=new Map;jk(Cn,this.driver,be,v,ic).forEach(ot=>{Yk(ot,g,v)&&Hn.push(ot)});const ao=new Map;L.forEach((ot,vt)=>{jk(ao,this.driver,new Set(ot),g,"!")}),Hn.forEach(ot=>{const vt=Cn.get(ot),yt=ao.get(ot);Cn.set(ot,ht(ht({},vt),yt))});const Or=[],St=[],si={};d.forEach(ot=>{const{element:vt,player:yt,instruction:Gt}=ot;if(o.has(vt)){if(E.has(vt))return yt.onDestroy(()=>ul(vt,Gt.toStyles)),yt.disabled=!0,yt.overrideTotalTime(Gt.totalTime),void a.push(yt);let kr=si;if(Sn.size>1){let Dt=vt;const hn=[];for(;Dt=Dt.parentNode;){const zi=Sn.get(Dt);if(zi){kr=zi;break}hn.push(Dt)}hn.forEach(zi=>Sn.set(zi,kr))}const Qe=this._buildAnimation(yt.namespaceId,Gt,ki,c,ao,Cn);if(yt.setRealPlayer(Qe),kr===si)Or.push(yt);else{const Dt=this.playersByElement.get(kr);Dt&&Dt.length&&(yt.parentPlayer=ou(Dt)),a.push(yt)}}else Rd(vt,Gt.fromStyles),yt.onDestroy(()=>ul(vt,Gt.toStyles)),St.push(yt),E.has(vt)&&a.push(yt)}),St.forEach(ot=>{const vt=c.get(ot.element);if(vt&&vt.length){const yt=ou(vt);ot.setRealPlayer(yt)}}),a.forEach(ot=>{ot.parentPlayer?ot.syncPlayerEvents(ot.parentPlayer):ot.destroy()});for(let ot=0;ot<$.length;ot++){const vt=$[ot],yt=vt[Zs];if(kp(vt,Mv),yt&&yt.hasAnimation)continue;let Gt=[];if(p.size){let Qe=p.get(vt);Qe&&Qe.length&&Gt.push(...Qe);let Dt=this.driver.query(vt,iw,!0);for(let hn=0;hn<Dt.length;hn++){let zi=p.get(Dt[hn]);zi&&zi.length&&Gt.push(...zi)}}const kr=Gt.filter(Qe=>!Qe.destroyed);kr.length?P9(this,vt,kr):this.processLeaveNode(vt)}return $.length=0,Or.forEach(ot=>{this.players.push(ot),ot.onDone(()=>{ot.destroy();const vt=this.players.indexOf(ot);this.players.splice(vt,1)}),ot.play()}),Or}elementContainsData(t,e){let o=!1;const a=e[Zs];return a&&a.setForRemoval&&(o=!0),this.playersByElement.has(e)&&(o=!0),this.playersByQueriedElement.has(e)&&(o=!0),this.statesByElement.has(e)&&(o=!0),this._fetchNamespace(t).elementContainsData(e)||o}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,o,a,c){let d=[];if(e){const p=this.playersByQueriedElement.get(t);p&&(d=p)}else{const p=this.playersByElement.get(t);if(p){const g=!c||c==Vg;p.forEach(v=>{v.queued||!g&&v.triggerName!=a||d.push(v)})}}return(o||a)&&(d=d.filter(p=>!(o&&o!=p.namespaceId||a&&a!=p.triggerName))),d}_beforeAnimationBuild(t,e,o){const c=e.element,d=e.isRemovalTransition?void 0:t,p=e.isRemovalTransition?void 0:e.triggerName;for(const g of e.timelines){const v=g.element,E=v!==c,D=Cs(o,v,[]);this._getPreviousPlayers(v,E,d,p,e.toState).forEach(L=>{const U=L.getRealPlayer();U.beforeDestroy&&U.beforeDestroy(),L.destroy(),D.push(L)})}Rd(c,e.fromStyles)}_buildAnimation(t,e,o,a,c,d){const p=e.triggerName,g=e.element,v=[],E=new Set,D=new Set,x=e.timelines.map(U=>{const ee=U.element;E.add(ee);const $=ee[Zs];if($&&$.removedBeforeQueried)return new Ap(U.duration,U.delay);const ge=ee!==g,be=function(r){const t=[];return zk(r,t),t}((o.get(ee)||M9).map(ki=>ki.getRealPlayer())).filter(ki=>!!ki.element&&ki.element===ee),$e=c.get(ee),et=d.get(ee),Bt=mk(0,this._normalizer,0,U.keyframes,$e,et),Mi=this._buildPlayer(U,Bt,be);if(U.subTimeline&&a&&D.add(ee),ge){const ki=new mw(t,p,ee);ki.setRealPlayer(Mi),v.push(ki)}return Mi});v.forEach(U=>{Cs(this.playersByQueriedElement,U.element,[]).push(U),U.onDone(()=>function(r,t,e){let o;if(r instanceof Map){if(o=r.get(t),o){if(o.length){const a=o.indexOf(e);o.splice(a,1)}0==o.length&&r.delete(t)}}else if(o=r[t],o){if(o.length){const a=o.indexOf(e);o.splice(a,1)}0==o.length&&delete r[t]}return o}(this.playersByQueriedElement,U.element,U))}),E.forEach(U=>qs(U,wk));const L=ou(x);return L.onDestroy(()=>{E.forEach(U=>kp(U,wk)),ul(g,e.toStyles)}),D.forEach(U=>{Cs(a,U,[]).push(L)}),L}_buildPlayer(t,e,o){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,o):new Ap(t.duration,t.delay)}}class mw{constructor(t,e,o){this.namespaceId=t,this.triggerName=e,this.element=o,this._player=new Ap,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(o=>zT(t,e,void 0,o))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Cs(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function Uv(r){return r&&1===r.nodeType}function Gk(r,t){const e=r.style.display;return r.style.display=null!=t?t:"none",e}function jk(r,t,e,o,a){const c=[];e.forEach(g=>c.push(Gk(g)));const d=[];o.forEach((g,v)=>{const E={};g.forEach(D=>{const x=E[D]=t.computeStyle(v,D,a);(!x||0==x.length)&&(v[Zs]=I9,d.push(v))}),r.set(v,E)});let p=0;return e.forEach(g=>Gk(g,c[p++])),d}function Wk(r,t){const e=new Map;if(r.forEach(p=>e.set(p,[])),0==t.length)return e;const a=new Set(t),c=new Map;function d(p){if(!p)return 1;let g=c.get(p);if(g)return g;const v=p.parentNode;return g=e.has(v)?v:a.has(v)?1:d(v),c.set(p,g),g}return t.forEach(p=>{const g=d(p);1!==g&&e.get(g).push(p)}),e}const Gv="$$classes";function qs(r,t){if(r.classList)r.classList.add(t);else{let e=r[Gv];e||(e=r[Gv]={}),e[t]=!0}}function kp(r,t){if(r.classList)r.classList.remove(t);else{let e=r[Gv];e&&delete e[t]}}function P9(r,t,e){ou(e).onDone(()=>r.processLeaveNode(t))}function zk(r,t){for(let e=0;e<r.length;e++){const o=r[e];o instanceof fk?zk(o.players,t):t.push(o)}}function Yk(r,t,e){const o=e.get(r);if(!o)return!1;let a=t.get(r);return a?o.forEach(c=>a.add(c)):t.set(r,o),e.delete(r),!0}class jv{constructor(t,e,o){this.bodyNode=t,this._driver=e,this._normalizer=o,this._triggerCache={},this.onRemovalComplete=(a,c)=>{},this._transitionEngine=new A9(t,e,o),this._timelineEngine=new w9(t,e,o),this._transitionEngine.onRemovalComplete=(a,c)=>this.onRemovalComplete(a,c)}registerTrigger(t,e,o,a,c){const d=t+"-"+a;let p=this._triggerCache[d];if(!p){const g=[],v=aw(this._driver,c,g);if(g.length)throw new Error(`The animation trigger "${a}" has failed to build due to the following errors:\n - ${g.join("\n - ")}`);p=function(r,t,e){return new E9(r,t,e)}(a,v,this._normalizer),this._triggerCache[d]=p}this._transitionEngine.registerTrigger(e,a,p)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,o,a){this._transitionEngine.insertNode(t,e,o,a)}onRemove(t,e,o,a){this._transitionEngine.removeNode(t,e,a||!1,o)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,o,a){if("@"==o.charAt(0)){const[c,d]=_k(o);this._timelineEngine.command(c,e,d,a)}else this._transitionEngine.trigger(t,e,o,a)}listen(t,e,o,a,c){if("@"==o.charAt(0)){const[d,p]=_k(o);return this._timelineEngine.listen(d,e,p,c)}return this._transitionEngine.listen(t,e,o,a,c)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function Xk(r,t){let e=null,o=null;return Array.isArray(t)&&t.length?(e=_w(t[0]),t.length>1&&(o=_w(t[t.length-1]))):t&&(e=_w(t)),e||o?new B9(r,e,o):null}let B9=(()=>{class r{constructor(e,o,a){this._element=e,this._startStyles=o,this._endStyles=a,this._state=0;let c=r.initialStylesByElement.get(e);c||r.initialStylesByElement.set(e,c={}),this._initialStyles=c}start(){this._state<1&&(this._startStyles&&ul(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ul(this._element,this._initialStyles),this._endStyles&&(ul(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(r.initialStylesByElement.delete(this._element),this._startStyles&&(Rd(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Rd(this._element,this._endStyles),this._endStyles=null),ul(this._element,this._initialStyles),this._state=3)}}return r.initialStylesByElement=new WeakMap,r})();function _w(r){let t=null;const e=Object.keys(r);for(let o=0;o<e.length;o++){const a=e[o];V9(a)&&(t=t||{},t[a]=r[a])}return t}function V9(r){return"display"===r||"position"===r}const $k="animation",Kk="animationend";class G9{constructor(t,e,o,a,c,d,p){this._element=t,this._name=e,this._duration=o,this._delay=a,this._easing=c,this._fillMode=d,this._onDoneFn=p,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=g=>this._handleCallback(g)}apply(){(function(r,t){const e=bw(r,"").trim();let o=0;e.length&&(function(r,t){let e=0;for(let o=0;o<r.length;o++)","===r.charAt(o)&&e++;return e}(e)+1,t=`${e}, ${t}`),Wv(r,"",t)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),Zk(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){Jk(this._element,this._name,"paused")}resume(){Jk(this._element,this._name,"running")}setPosition(t){const e=Qk(this._element,this._name);this._position=t*this._duration,Wv(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),o=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&o>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),Zk(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(r,t){const o=bw(r,"").split(","),a=vw(o,t);a>=0&&(o.splice(a,1),Wv(r,"",o.join(",")))}(this._element,this._name))}}function Jk(r,t,e){Wv(r,"PlayState",e,Qk(r,t))}function Qk(r,t){const e=bw(r,"");return e.indexOf(",")>0?vw(e.split(","),t):vw([e],t)}function vw(r,t){for(let e=0;e<r.length;e++)if(r[e].indexOf(t)>=0)return e;return-1}function Zk(r,t,e){e?r.removeEventListener(Kk,t):r.addEventListener(Kk,t)}function Wv(r,t,e,o){const a=$k+t;if(null!=o){const c=r.style[a];if(c.length){const d=c.split(",");d[o]=e,e=d.join(",")}}r.style[a]=e}function bw(r,t){return r.style[$k+t]||""}class qk{constructor(t,e,o,a,c,d,p,g){this.element=t,this.keyframes=e,this.animationName=o,this._duration=a,this._delay=c,this._finalStyles=p,this._specialStyles=g,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=d||"linear",this.totalTime=a+c,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new G9(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(o=>o()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(o=>{"offset"!=o&&(t[o]=e?this._finalStyles[o]:sw(this.element,o))})}this.currentSnapshot=t}}class $9 extends Ap{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=Ek(e)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class t1{constructor(){this._count=0}validateStyleProperty(t){return JT(t)}matchesElement(t,e){return QT(t,e)}containsElement(t,e){return ZT(t,e)}query(t,e,o){return qT(t,e,o)}computeStyle(t,e,o){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,o){o=o.map(p=>Ek(p));let a=`@keyframes ${e} {\n`,c="";o.forEach(p=>{c=" ";const g=parseFloat(p.offset);a+=`${c}${100*g}% {\n`,c+=" ",Object.keys(p).forEach(v=>{const E=p[v];switch(v){case"offset":return;case"easing":return void(E&&(a+=`${c}animation-timing-function: ${E};\n`));default:return void(a+=`${c}${v}: ${E};\n`)}}),a+=`${c}}\n`}),a+="}\n";const d=document.createElement("style");return d.textContent=a,d}animate(t,e,o,a,c,d=[],p){const g=d.filter($=>$ instanceof qk),v={};Ik(o,a)&&g.forEach($=>{let ge=$.currentSnapshot;Object.keys(ge).forEach(be=>v[be]=ge[be])});const E=function(r){let t={};return r&&(Array.isArray(r)?r:[r]).forEach(o=>{Object.keys(o).forEach(a=>{"offset"==a||"easing"==a||(t[a]=o[a])})}),t}(e=xk(t,e,v));if(0==o)return new $9(t,E);const D="gen_css_kf_"+this._count++,x=this.buildKeyframeElement(t,D,e);(function(r){var e;const t=null==(e=r.getRootNode)?void 0:e.call(r);return"undefined"!=typeof ShadowRoot&&t instanceof ShadowRoot?t:document.head})(t).appendChild(x);const U=Xk(t,e),ee=new qk(t,e,D,o,a,c,E,U);return ee.onDestroy(()=>{var r;(r=x).parentNode.removeChild(r)}),ee}}class r1{constructor(t,e,o,a){this.element=t,this.keyframes=e,this.options=o,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=o.duration,this._delay=o.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,o){return t.animate(e,o)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:sw(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(o=>o()),e.length=0}}class q9{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(o1().toString()),this._cssKeyframesDriver=new t1}validateStyleProperty(t){return JT(t)}matchesElement(t,e){return QT(t,e)}containsElement(t,e){return ZT(t,e)}query(t,e,o){return qT(t,e,o)}computeStyle(t,e,o){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,o,a,c,d=[],p){if(!p&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,o,a,c,d);const E={duration:o,delay:a,fill:0==a?"both":"forwards"};c&&(E.easing=c);const D={},x=d.filter(U=>U instanceof r1);Ik(o,a)&&x.forEach(U=>{let ee=U.currentSnapshot;Object.keys(ee).forEach($=>D[$]=ee[$])});const L=Xk(t,e=xk(t,e=e.map(U=>su(U,!1)),D));return new r1(t,e,E,L)}}function o1(){return gk()&&Element.prototype.animate||{}}let tY=(()=>{class r extends ck{constructor(e,o){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(o.body,{id:"0",encapsulation:or.None,styles:[],data:{animation:[]}})}build(e){const o=this._nextAnimationId.toString();this._nextAnimationId++;const a=Array.isArray(e)?uk(e):e;return s1(this._renderer,null,o,"register",[a]),new iY(o,this._renderer)}}return r.\u0275fac=function(e){return new(e||r)(Oe(cd),Oe(Kt))},r.\u0275prov=rt({token:r,factory:r.\u0275fac}),r})();class iY extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new nY(this._id,t,e||{},this._renderer)}}class nY{constructor(t,e,o,a){this.id=t,this.element=e,this._renderer=a,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",o)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return s1(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!=(e=null==(t=this._renderer.engine.players[+this.id])?void 0:t.getPosition())?e:0}}function s1(r,t,e,o,a){return r.setProperty(t,`@@${e}:${o}`,a)}const a1="@.disabled";let rY=(()=>{class r{constructor(e,o,a){this.delegate=e,this.engine=o,this._zone=a,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),o.onRemovalComplete=(c,d)=>{d&&d.parentNode(c)&&d.removeChild(c.parentNode,c)}}createRenderer(e,o){const c=this.delegate.createRenderer(e,o);if(!(e&&o&&o.data&&o.data.animation)){let E=this._rendererCache.get(c);return E||(E=new l1("",c,this.engine),this._rendererCache.set(c,E)),E}const d=o.id,p=o.id+"-"+this._currentId;this._currentId++,this.engine.register(p,e);const g=E=>{Array.isArray(E)?E.forEach(g):this.engine.registerTrigger(d,p,e,E.name,E)};return o.data.animation.forEach(g),new oY(this,p,c,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,o,a){e>=0&&e<this._microtaskId?this._zone.run(()=>o(a)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(c=>{const[d,p]=c;d(p)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([o,a]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return r.\u0275fac=function(e){return new(e||r)(Oe(cd),Oe(jv),Oe(bi))},r.\u0275prov=rt({token:r,factory:r.\u0275fac}),r})();class l1{constructor(t,e,o){this.namespaceId=t,this.delegate=e,this.engine=o,this.destroyNode=this.delegate.destroyNode?a=>e.destroyNode(a):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,o,a=!0){this.delegate.insertBefore(t,e,o),this.engine.onInsert(this.namespaceId,e,t,a)}removeChild(t,e,o){this.engine.onRemove(this.namespaceId,e,this.delegate,o)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,o,a){this.delegate.setAttribute(t,e,o,a)}removeAttribute(t,e,o){this.delegate.removeAttribute(t,e,o)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,o,a){this.delegate.setStyle(t,e,o,a)}removeStyle(t,e,o){this.delegate.removeStyle(t,e,o)}setProperty(t,e,o){"@"==e.charAt(0)&&e==a1?this.disableAnimations(t,!!o):this.delegate.setProperty(t,e,o)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,o){return this.delegate.listen(t,e,o)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class oY extends l1{constructor(t,e,o,a){super(e,o,a),this.factory=t,this.namespaceId=e}setProperty(t,e,o){"@"==e.charAt(0)?"."==e.charAt(1)&&e==a1?this.disableAnimations(t,o=void 0===o||!!o):this.engine.process(this.namespaceId,t,e.substr(1),o):this.delegate.setProperty(t,e,o)}listen(t,e,o){if("@"==e.charAt(0)){const a=function(r){switch(r){case"body":return document.body;case"document":return document;case"window":return window;default:return r}}(t);let c=e.substr(1),d="";return"@"!=c.charAt(0)&&([c,d]=function(r){const t=r.indexOf(".");return[r.substring(0,t),r.substr(t+1)]}(c)),this.engine.listen(this.namespaceId,a,c,d,p=>{this.factory.scheduleListenerCallback(p._data||-1,o,p)})}return this.delegate.listen(t,e,o)}}let lY=(()=>{class r extends jv{constructor(e,o,a){super(e.body,o,a)}ngOnDestroy(){this.flush()}}return r.\u0275fac=function(e){return new(e||r)(Oe(Kt),Oe(ew),Oe(hw))},r.\u0275prov=rt({token:r,factory:r.\u0275fac}),r})();const wo=new xe("AnimationModuleType"),c1=[{provide:ck,useClass:tY},{provide:hw,useFactory:function(){return new g9}},{provide:jv,useClass:lY},{provide:cd,useFactory:function(r,t,e){return new rY(r,t,e)},deps:[N_,jv,bi]}],u1=[{provide:ew,useFactory:function(){return"function"==typeof o1()?new q9:new t1}},{provide:wo,useValue:"BrowserAnimations"},...c1],hY=[{provide:ew,useClass:Ck},{provide:wo,useValue:"NoopAnimations"},...c1];let pY=(()=>{class r{static withConfig(e){return{ngModule:r,providers:e.disableAnimations?hY:u1}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({providers:u1,imports:[ux]}),r})();const d1=new Xc("13.0.1"),gY=new xe("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let Mt=(()=>{class r{constructor(e,o,a){this._hasDoneGlobalChecks=!1,this._document=a,e._applyBodyHighContrastModeCssClasses(),this._sanityChecks=o,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!(!RE()||FT())&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}_checkDoctypeIsDefined(){this._checkIsEnabled("doctype")&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checkIsEnabled("theme")||!this._document.body||"function"!=typeof getComputedStyle)return;const e=this._document.createElement("div");e.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(e);const o=getComputedStyle(e);o&&"none"!==o.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),e.remove()}_checkCdkVersionMatch(){this._checkIsEnabled("version")&&d1.full!==lk.full&&console.warn("The Angular Material version ("+d1.full+") does not match the Angular CDK version ("+lk.full+").\nPlease ensure the versions of these two packages exactly match.")}}return r.\u0275fac=function(e){return new(e||r)(Oe(ak),Oe(gY,8),Oe(Kt))},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({imports:[[xp],xp]}),r})();function Id(r){return class extends r{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=Ft(t)}}}function au(r,t){return class extends r{constructor(...e){super(...e),this.defaultColor=t,this.color=t}get color(){return this._color}set color(e){const o=e||this.defaultColor;o!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),o&&this._elementRef.nativeElement.classList.add(`mat-${o}`),this._color=o)}}}function xa(r){return class extends r{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=Ft(t)}}}function xd(r,t=0){return class extends r{constructor(...e){super(...e),this._tabIndex=t,this.defaultTabIndex=t}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(e){this._tabIndex=null!=e?To(e):this.defaultTabIndex}}}const _Y=new xe("MAT_DATE_LOCALE",{providedIn:"root",factory:function(){return ed(Yl)}});class dl{constructor(){this._localeChanges=new Se,this.localeChanges=this._localeChanges}getValidDateOrNull(t){return this.isDateInstance(t)&&this.isValid(t)?t:null}deserialize(t){return null==t||this.isDateInstance(t)&&this.isValid(t)?t:this.invalid()}setLocale(t){this.locale=t,this._localeChanges.next()}compareDate(t,e){return this.getYear(t)-this.getYear(e)||this.getMonth(t)-this.getMonth(e)||this.getDate(t)-this.getDate(e)}sameDate(t,e){if(t&&e){let o=this.isValid(t),a=this.isValid(e);return o&&a?!this.compareDate(t,e):o==a}return t==e}clampDate(t,e,o){return e&&this.compareDate(t,e)<0?e:o&&this.compareDate(t,o)>0?o:t}}const Cw=new xe("mat-date-formats"),bY=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function Tw(r,t){const e=Array(r);for(let o=0;o<r;o++)e[o]=t(o);return e}let yY=(()=>{class r extends dl{constructor(e,o){super(),this.useUtcForDisplay=!1,super.setLocale(e)}getYear(e){return e.getFullYear()}getMonth(e){return e.getMonth()}getDate(e){return e.getDate()}getDayOfWeek(e){return e.getDay()}getMonthNames(e){const o=new Intl.DateTimeFormat(this.locale,{month:e,timeZone:"utc"});return Tw(12,a=>this._format(o,new Date(2017,a,1)))}getDateNames(){const e=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return Tw(31,o=>this._format(e,new Date(2017,0,o+1)))}getDayOfWeekNames(e){const o=new Intl.DateTimeFormat(this.locale,{weekday:e,timeZone:"utc"});return Tw(7,a=>this._format(o,new Date(2017,0,a+1)))}getYearName(e){const o=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._format(o,e)}getFirstDayOfWeek(){return 0}getNumDaysInMonth(e){return this.getDate(this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+1,0))}clone(e){return new Date(e.getTime())}createDate(e,o,a){let c=this._createDateWithOverflow(e,o,a);return c.getMonth(),c}today(){return new Date}parse(e){return"number"==typeof e?new Date(e):e?new Date(Date.parse(e)):null}format(e,o){if(!this.isValid(e))throw Error("NativeDateAdapter: Cannot format invalid date.");const a=new Intl.DateTimeFormat(this.locale,Nr(ht({},o),{timeZone:"utc"}));return this._format(a,e)}addCalendarYears(e,o){return this.addCalendarMonths(e,12*o)}addCalendarMonths(e,o){let a=this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+o,this.getDate(e));return this.getMonth(a)!=((this.getMonth(e)+o)%12+12)%12&&(a=this._createDateWithOverflow(this.getYear(a),this.getMonth(a),0)),a}addCalendarDays(e,o){return this._createDateWithOverflow(this.getYear(e),this.getMonth(e),this.getDate(e)+o)}toIso8601(e){return[e.getUTCFullYear(),this._2digit(e.getUTCMonth()+1),this._2digit(e.getUTCDate())].join("-")}deserialize(e){if("string"==typeof e){if(!e)return null;if(bY.test(e)){let o=new Date(e);if(this.isValid(o))return o}}return super.deserialize(e)}isDateInstance(e){return e instanceof Date}isValid(e){return!isNaN(e.getTime())}invalid(){return new Date(NaN)}_createDateWithOverflow(e,o,a){const c=new Date;return c.setFullYear(e,o,a),c.setHours(0,0,0,0),c}_2digit(e){return("00"+e).slice(-2)}_format(e,o){const a=new Date;return a.setUTCFullYear(o.getFullYear(),o.getMonth(),o.getDate()),a.setUTCHours(o.getHours(),o.getMinutes(),o.getSeconds(),o.getMilliseconds()),e.format(a)}}return r.\u0275fac=function(e){return new(e||r)(Oe(_Y,8),Oe(so))},r.\u0275prov=rt({token:r,factory:r.\u0275fac}),r})();const EY={parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}};let CY=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({providers:[{provide:dl,useClass:yY}],imports:[[Rp]]}),r})(),TY=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({providers:[{provide:Cw,useValue:EY}],imports:[[CY]]}),r})(),Yv=(()=>{class r{isErrorState(e,o){return!!(e&&e.invalid&&(e.touched||o&&o.submitted))}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),h1=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=Ge({type:r,selectors:[["","mat-line",""],["","matLine",""]],hostAttrs:[1,"mat-line"]}),r})();function Hg(r,t,e){r.nativeElement.classList.toggle(t,e)}let Xv=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({imports:[[Mt],Mt]}),r})();class wY{constructor(t,e,o){this._renderer=t,this.element=e,this.config=o,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const f1={enterDuration:225,exitDuration:150},ww=nu({passive:!0}),g1=["mousedown","touchstart"],m1=["mouseup","mouseleave","touchend","touchcancel"];class _1{constructor(t,e,o,a){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,a.isBrowser&&(this._containerElement=Cd(o))}fadeInRipple(t,e,o={}){const a=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),c=ht(ht({},f1),o.animation);o.centered&&(t=a.left+a.width/2,e=a.top+a.height/2);const d=o.radius||function(r,t,e){const o=Math.max(Math.abs(r-e.left),Math.abs(r-e.right)),a=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(o*o+a*a)}(t,e,a),p=t-a.left,g=e-a.top,v=c.enterDuration,E=document.createElement("div");E.classList.add("mat-ripple-element"),E.style.left=p-d+"px",E.style.top=g-d+"px",E.style.height=2*d+"px",E.style.width=2*d+"px",null!=o.color&&(E.style.backgroundColor=o.color),E.style.transitionDuration=`${v}ms`,this._containerElement.appendChild(E),window.getComputedStyle(E).getPropertyValue("opacity"),E.style.transform="scale(1)";const D=new wY(this,E,o);return D.state=0,this._activeRipples.add(D),o.persistent||(this._mostRecentTransientRipple=D),this._runTimeoutOutsideZone(()=>{const x=D===this._mostRecentTransientRipple;D.state=1,!o.persistent&&(!x||!this._isPointerDown)&&D.fadeOut()},v),D}fadeOutRipple(t){const e=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!e)return;const o=t.element,a=ht(ht({},f1),t.config.animation);o.style.transitionDuration=`${a.exitDuration}ms`,o.style.opacity="0",t.state=2,this._runTimeoutOutsideZone(()=>{t.state=3,o.remove()},a.exitDuration)}fadeOutAll(){this._activeRipples.forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=Cd(t);!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(g1))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(m1),this._pointerUpEventsRegistered=!0)}_onMousedown(t){const e=HT(t),o=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!o&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!UT(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let o=0;o<e.length;o++)this.fadeInRipple(e[o].clientX,e[o].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_runTimeoutOutsideZone(t,e=0){this._ngZone.runOutsideAngular(()=>setTimeout(t,e))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(e=>{this._triggerElement.addEventListener(e,this,ww)})})}_removeTriggerEvents(){this._triggerElement&&(g1.forEach(t=>{this._triggerElement.removeEventListener(t,this,ww)}),this._pointerUpEventsRegistered&&m1.forEach(t=>{this._triggerElement.removeEventListener(t,this,ww)}))}}const v1=new xe("mat-ripple-global-options");let Aa=(()=>{class r{constructor(e,o,a,c,d){this._elementRef=e,this._animationMode=d,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=c||{},this._rippleRenderer=new _1(this,o,e,a)}get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:ht(ht(ht({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,o=0,a){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,o,ht(ht({},this.rippleConfig),a)):this._rippleRenderer.fadeInRipple(0,0,ht(ht({},this.rippleConfig),e))}}return r.\u0275fac=function(e){return new(e||r)(X(It),X(bi),X(so),X(v1,8),X(wo,8))},r.\u0275dir=Ge({type:r,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,o){2&e&&Li("mat-ripple-unbounded",o.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),r})(),Oa=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({imports:[[Mt,Rp],Mt]}),r})(),Sw=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({imports:[[Mt]]}),r})(),$v=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({imports:[[Oa,Hr,Mt,Sw]]}),r})();const b1=["mat-button",""],y1=["*"],NY=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],PY=au(Id(xa(class{constructor(r){this._elementRef=r}})));let Rw,Dw=(()=>{class r extends PY{constructor(e,o,a){super(e),this._focusMonitor=o,this._animationMode=a,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const c of NY)this._hasHostAttributes(c)&&this._getHostElement().classList.add(c);e.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e,o){e?this._focusMonitor.focusVia(this._getHostElement(),e,o):this._getHostElement().focus(o)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...e){return e.some(o=>this._getHostElement().hasAttribute(o))}}return r.\u0275fac=function(e){return new(e||r)(X(It),X(Es),X(wo,8))},r.\u0275cmp=Qt({type:r,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(e,o){if(1&e&&Kn(Aa,5),2&e){let a;Ht(a=Ut())&&(o.ripple=a.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(e,o){2&e&&(ni("disabled",o.disabled||null),Li("_mat-animation-noopable","NoopAnimations"===o._animationMode)("mat-button-disabled",o.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[st],attrs:b1,ngContentSelectors:y1,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(e,o){1&e&&(Fn(),it(0,"span",0),Oi(1),nt(),Gi(2,"span",1),Gi(3,"span",2)),2&e&&($t(2),Li("mat-button-ripple-round",o.isRoundButton||o.isIconButton),ri("matRippleDisabled",o._isRippleDisabled())("matRippleCentered",o.isIconButton)("matRippleTrigger",o._getHostElement()))},directives:[Aa],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),r})(),LY=(()=>{class r extends Dw{constructor(e,o,a){super(o,e,a)}_haltDisabledEvents(e){this.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}}return r.\u0275fac=function(e){return new(e||r)(X(Es),X(It),X(wo,8))},r.\u0275cmp=Qt({type:r,selectors:[["a","mat-button",""],["a","mat-raised-button",""],["a","mat-icon-button",""],["a","mat-fab",""],["a","mat-mini-fab",""],["a","mat-stroked-button",""],["a","mat-flat-button",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:7,hostBindings:function(e,o){1&e&&ci("click",function(c){return o._haltDisabledEvents(c)}),2&e&&(ni("tabindex",o.disabled?-1:o.tabIndex||0)("disabled",o.disabled||null)("aria-disabled",o.disabled.toString()),Li("_mat-animation-noopable","NoopAnimations"===o._animationMode)("mat-button-disabled",o.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matButton","matAnchor"],features:[st],attrs:b1,ngContentSelectors:y1,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(e,o){1&e&&(Fn(),it(0,"span",0),Oi(1),nt(),Gi(2,"span",1),Gi(3,"span",2)),2&e&&($t(2),Li("mat-button-ripple-round",o.isRoundButton||o.isIconButton),ri("matRippleDisabled",o._isRippleDisabled())("matRippleCentered",o.isIconButton)("matRippleTrigger",o._getHostElement()))},directives:[Aa],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),r})(),Ad=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({imports:[[Oa,Mt],Mt]}),r})(),FY=1;const Kv={};function E1(r){return r in Kv&&(delete Kv[r],!0)}const BY={setImmediate(r){const t=FY++;return Kv[t]=!0,Rw||(Rw=Promise.resolve()),Rw.then(()=>E1(t)&&r()),t},clearImmediate(r){E1(r)}},{setImmediate:VY,clearImmediate:HY}=BY,Jv={setImmediate(...r){const{delegate:t}=Jv;return((null==t?void 0:t.setImmediate)||VY)(...r)},clearImmediate(r){const{delegate:t}=Jv;return((null==t?void 0:t.clearImmediate)||HY)(r)},delegate:void 0},Mw=new class extends ET{flush(t){this._active=!0,this._scheduled=void 0;const{actions:e}=this;let o,a=-1;t=t||e.shift();const c=e.length;do{if(o=t.execute(t.state,t.delay))break}while(++a<c&&(t=e.shift()));if(this._active=!1,o){for(;++a<c&&(t=e.shift());)t.unsubscribe();throw o}}}(class extends bT{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,o=0){return null!==o&&o>0?super.requestAsyncId(t,e,o):(t.actions.push(this),t._scheduled||(t._scheduled=Jv.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,o=0){if(null!=o&&o>0||null==o&&this.delay>0)return super.recycleAsyncId(t,e,o);0===t.actions.length&&(Jv.clearImmediate(e),t._scheduled=void 0)}});class Iw{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class xw extends Iw{constructor(t,e,o,a){super(),this.component=t,this.viewContainerRef=e,this.injector=o,this.componentFactoryResolver=a}}class Ug extends Iw{constructor(t,e,o){super(),this.templateRef=t,this.viewContainerRef=e,this.context=o}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class jY extends Iw{constructor(t){super(),this.element=t instanceof It?t.nativeElement:t}}class Aw{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof xw?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof Ug?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof jY?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class WY extends Aw{constructor(t,e,o,a,c){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=o,this._defaultInjector=a,this.attachDomPortal=d=>{const p=d.element,g=this._document.createComment("dom-portal");p.parentNode.insertBefore(g,p),this.outletElement.appendChild(p),this._attachedPortal=d,super.setDisposeFn(()=>{g.parentNode&&g.parentNode.replaceChild(p,g)})},this._document=c}attachComponentPortal(t){const o=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let a;return t.viewContainerRef?(a=t.viewContainerRef.createComponent(o,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>a.destroy())):(a=o.create(t.injector||this._defaultInjector),this._appRef.attachView(a.hostView),this.setDisposeFn(()=>{this._appRef.detachView(a.hostView),a.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(a)),this._attachedPortal=t,a}attachTemplatePortal(t){let e=t.viewContainerRef,o=e.createEmbeddedView(t.templateRef,t.context);return o.rootNodes.forEach(a=>this.outletElement.appendChild(a)),o.detectChanges(),this.setDisposeFn(()=>{let a=e.indexOf(o);-1!==a&&e.remove(a)}),this._attachedPortal=t,o}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let Ow=(()=>{class r extends Aw{constructor(e,o,a){super(),this._componentFactoryResolver=e,this._viewContainerRef=o,this._isInitialized=!1,this.attached=new Pt,this.attachDomPortal=c=>{const d=c.element,p=this._document.createComment("dom-portal");c.setAttachedHost(this),d.parentNode.insertBefore(p,d),this._getRootNode().appendChild(d),this._attachedPortal=c,super.setDisposeFn(()=>{p.parentNode&&p.parentNode.replaceChild(d,p)})},this._document=a}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(e){e.setAttachedHost(this);const o=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,c=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),d=o.createComponent(c,o.length,e.injector||o.injector);return o!==this._viewContainerRef&&this._getRootNode().appendChild(d.hostView.rootNodes[0]),super.setDisposeFn(()=>d.destroy()),this._attachedPortal=e,this._attachedRef=d,this.attached.emit(d),d}attachTemplatePortal(e){e.setAttachedHost(this);const o=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=o,this.attached.emit(o),o}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return r.\u0275fac=function(e){return new(e||r)(X(Wl),X(hr),X(Kt))},r.\u0275dir=Ge({type:r,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[st]}),r})(),lu=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({}),r})();const zY=["addListener","removeListener"],YY=["addEventListener","removeEventListener"],XY=["on","off"];function cu(r,t,e,o){if(y(e)&&(o=e,e=void 0),o)return cu(r,t,e).pipe(DC(o));const[a,c]=function(r){return y(r.addEventListener)&&y(r.removeEventListener)}(r)?YY.map(d=>p=>r[d](t,p,e)):function(r){return y(r.addListener)&&y(r.removeListener)}(r)?zY.map(C1(r,t)):function(r){return y(r.on)&&y(r.off)}(r)?XY.map(C1(r,t)):[];if(!a&&fi(r))return Dn(d=>cu(d,t,e))(dt(r));if(!a)throw new TypeError("Invalid event target");return new re(d=>{const p=(...g)=>d.next(1<g.length?g:g[0]);return a(p),()=>c(p)})}function C1(r,t){return e=>o=>r[e](t,o)}const Gg={schedule(r){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:o}=Gg;o&&(t=o.requestAnimationFrame,e=o.cancelAnimationFrame);const a=t(c=>{e=void 0,r(c)});return new l(()=>null==e?void 0:e(a))},requestAnimationFrame(...r){const{delegate:t}=Gg;return((null==t?void 0:t.requestAnimationFrame)||requestAnimationFrame)(...r)},cancelAnimationFrame(...r){const{delegate:t}=Gg;return((null==t?void 0:t.cancelAnimationFrame)||cancelAnimationFrame)(...r)},delegate:void 0};new class extends ET{flush(t){this._active=!0,this._scheduled=void 0;const{actions:e}=this;let o,a=-1;t=t||e.shift();const c=e.length;do{if(o=t.execute(t.state,t.delay))break}while(++a<c&&(t=e.shift()));if(this._active=!1,o){for(;++a<c&&(t=e.shift());)t.unsubscribe();throw o}}}(class extends bT{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,o=0){return null!==o&&o>0?super.requestAsyncId(t,e,o):(t.actions.push(this),t._scheduled||(t._scheduled=Gg.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,o=0){if(null!=o&&o>0||null==o&&this.delay>0)return super.recycleAsyncId(t,e,o);0===t.actions.length&&(Gg.cancelAnimationFrame(e),t._scheduled=void 0)}});function T1(r,t=IO){return function(r){return Le((t,e)=>{let o=!1,a=null,c=null,d=!1;const p=()=>{if(null==c||c.unsubscribe(),c=null,o){o=!1;const v=a;a=null,e.next(v)}d&&e.complete()},g=()=>{c=null,d&&e.complete()};t.subscribe(new Ue(e,v=>{o=!0,a=v,c||dt(r()).subscribe(c=new Ue(e,p,g))},()=>{d=!0,(!o||!c||c.closed)&&e.complete()}))})}(()=>AO(r,t))}let Qv=(()=>{class r{constructor(e,o,a){this._ngZone=e,this._platform=o,this._scrolled=new Se,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=a}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const o=this.scrollContainers.get(e);o&&(o.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new re(o=>{this._globalSubscription||this._addGlobalListener();const a=e>0?this._scrolled.pipe(T1(e)).subscribe(o):this._scrolled.subscribe(o);return this._scrolledCount++,()=>{a.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):zt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,o)=>this.deregister(o)),this._scrolled.complete()}ancestorScrolled(e,o){const a=this.getAncestorScrollContainers(e);return this.scrolled(o).pipe(un(c=>!c||a.indexOf(c)>-1))}getAncestorScrollContainers(e){const o=[];return this.scrollContainers.forEach((a,c)=>{this._scrollableContainsElement(c,e)&&o.push(c)}),o}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,o){let a=Cd(o),c=e.getElementRef().nativeElement;do{if(a==c)return!0}while(a=a.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>cu(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return r.\u0275fac=function(e){return new(e||r)(Oe(bi),Oe(so),Oe(Kt,8))},r.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Zv=(()=>{class r{constructor(e,o,a,c){this.elementRef=e,this.scrollDispatcher=o,this.ngZone=a,this.dir=c,this._destroyed=new Se,this._elementScrolled=new re(d=>this.ngZone.runOutsideAngular(()=>cu(this.elementRef.nativeElement,"scroll").pipe(dn(this._destroyed)).subscribe(d)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){const o=this.elementRef.nativeElement,a=this.dir&&"rtl"==this.dir.value;null==e.left&&(e.left=a?e.end:e.start),null==e.right&&(e.right=a?e.start:e.end),null!=e.bottom&&(e.top=o.scrollHeight-o.clientHeight-e.bottom),a&&0!=Lg()?(null!=e.left&&(e.right=o.scrollWidth-o.clientWidth-e.left),2==Lg()?e.left=e.right:1==Lg()&&(e.left=e.right?-e.right:e.right)):null!=e.right&&(e.left=o.scrollWidth-o.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){const o=this.elementRef.nativeElement;KO()?o.scrollTo(e):(null!=e.top&&(o.scrollTop=e.top),null!=e.left&&(o.scrollLeft=e.left))}measureScrollOffset(e){const o="left",a="right",c=this.elementRef.nativeElement;if("top"==e)return c.scrollTop;if("bottom"==e)return c.scrollHeight-c.clientHeight-c.scrollTop;const d=this.dir&&"rtl"==this.dir.value;return"start"==e?e=d?a:o:"end"==e&&(e=d?o:a),d&&2==Lg()?e==o?c.scrollWidth-c.clientWidth-c.scrollLeft:c.scrollLeft:d&&1==Lg()?e==o?c.scrollLeft+c.scrollWidth-c.clientWidth:-c.scrollLeft:e==o?c.scrollLeft:c.scrollWidth-c.clientWidth-c.scrollLeft}}return r.\u0275fac=function(e){return new(e||r)(X(It),X(Qv),X(bi),X(Ia,8))},r.\u0275dir=Ge({type:r,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),r})(),jg=(()=>{class r{constructor(e,o,a){this._platform=e,this._change=new Se,this._changeListener=c=>{this._change.next(c)},this._document=a,o.runOutsideAngular(()=>{if(e.isBrowser){const c=this._getWindow();c.addEventListener("resize",this._changeListener),c.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:o,height:a}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+a,right:e.left+o,height:a,width:o}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,o=this._getWindow(),a=e.documentElement,c=a.getBoundingClientRect();return{top:-c.top||e.body.scrollTop||o.scrollY||a.scrollTop||0,left:-c.left||e.body.scrollLeft||o.scrollX||a.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(T1(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return r.\u0275fac=function(e){return new(e||r)(Oe(so),Oe(bi),Oe(Kt,8))},r.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),nc=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({}),r})(),kw=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({imports:[[xp,Rp,nc],xp,nc]}),r})();const w1=KO();class nX{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=Ar(-this._previousScrollPosition.left),t.style.top=Ar(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,o=t.style,a=this._document.body.style,c=o.scrollBehavior||"",d=a.scrollBehavior||"";this._isEnabled=!1,o.left=this._previousHTMLStyles.left,o.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),w1&&(o.scrollBehavior=a.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),w1&&(o.scrollBehavior=c,a.scrollBehavior=d)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,o=this._viewportRuler.getViewportSize();return e.scrollHeight>o.height||e.scrollWidth>o.width}}class rX{constructor(t,e,o,a){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=o,this._config=a,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class S1{enable(){}disable(){}attach(){}}function Nw(r,t){return t.some(e=>r.bottom<e.top||r.top>e.bottom||r.right<e.left||r.left>e.right)}function D1(r,t){return t.some(e=>r.top<e.top||r.bottom>e.bottom||r.left<e.left||r.right>e.right)}class oX{constructor(t,e,o,a){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=o,this._config=a,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:o,height:a}=this._viewportRuler.getViewportSize();Nw(e,[{width:o,height:a,bottom:a,right:o,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let sX=(()=>{class r{constructor(e,o,a,c){this._scrollDispatcher=e,this._viewportRuler=o,this._ngZone=a,this.noop=()=>new S1,this.close=d=>new rX(this._scrollDispatcher,this._ngZone,this._viewportRuler,d),this.block=()=>new nX(this._viewportRuler,this._document),this.reposition=d=>new oX(this._scrollDispatcher,this._viewportRuler,this._ngZone,d),this._document=c}}return r.\u0275fac=function(e){return new(e||r)(Oe(Qv),Oe(jg),Oe(bi),Oe(Kt))},r.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();class qv{constructor(t){if(this.scrollStrategy=new S1,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const o of e)void 0!==t[o]&&(this[o]=t[o])}}}class aX{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let R1=(()=>{class r{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const o=this._attachedOverlays.indexOf(e);o>-1&&this._attachedOverlays.splice(o,1),0===this._attachedOverlays.length&&this.detach()}}return r.\u0275fac=function(e){return new(e||r)(Oe(Kt))},r.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),lX=(()=>{class r extends R1{constructor(e){super(e),this._keydownListener=o=>{const a=this._attachedOverlays;for(let c=a.length-1;c>-1;c--)if(a[c]._keydownEvents.observers.length>0){a[c]._keydownEvents.next(o);break}}}add(e){super.add(e),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return r.\u0275fac=function(e){return new(e||r)(Oe(Kt))},r.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),cX=(()=>{class r extends R1{constructor(e,o){super(e),this._platform=o,this._cursorStyleIsSet=!1,this._pointerDownListener=a=>{this._pointerDownEventTarget=ru(a)},this._clickListener=a=>{const c=ru(a),d="click"===a.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:c;this._pointerDownEventTarget=null;const p=this._attachedOverlays.slice();for(let g=p.length-1;g>-1;g--){const v=p[g];if(!(v._outsidePointerEvents.observers.length<1)&&v.hasAttached()){if(v.overlayElement.contains(c)||v.overlayElement.contains(d))break;v._outsidePointerEvents.next(a)}}}}add(e){if(super.add(e),!this._isAttached){const o=this._document.body;o.addEventListener("pointerdown",this._pointerDownListener,!0),o.addEventListener("click",this._clickListener,!0),o.addEventListener("auxclick",this._clickListener,!0),o.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=o.style.cursor,o.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return r.\u0275fac=function(e){return new(e||r)(Oe(Kt),Oe(so))},r.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Pw=(()=>{class r{constructor(e,o){this._platform=o,this._document=e}ngOnDestroy(){var e;null==(e=this._containerElement)||e.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||FT()){const a=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let c=0;c<a.length;c++)a[c].remove()}const o=this._document.createElement("div");o.classList.add(e),FT()?o.setAttribute("platform","test"):this._platform.isBrowser||o.setAttribute("platform","server"),this._document.body.appendChild(o),this._containerElement=o}}return r.\u0275fac=function(e){return new(e||r)(Oe(Kt),Oe(so))},r.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();class uX{constructor(t,e,o,a,c,d,p,g,v){this._portalOutlet=t,this._host=e,this._pane=o,this._config=a,this._ngZone=c,this._keyboardDispatcher=d,this._document=p,this._location=g,this._outsideClickDispatcher=v,this._backdropElement=null,this._backdropClick=new Se,this._attachments=new Se,this._detachments=new Se,this._locationChanges=l.EMPTY,this._backdropClickHandler=E=>this._backdropClick.next(E),this._keydownEvents=new Se,this._outsidePointerEvents=new Se,a.scrollStrategy&&(this._scrollStrategy=a.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=a.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){let e=this._portalOutlet.attach(t);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Rn(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){var e;const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null==(e=this._host)||e.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=ht(ht({},this._config),t),this._updateElementSize()}setDirection(t){this._config=Nr(ht({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=Ar(this._config.width),t.height=Ar(this._config.height),t.minWidth=Ar(this._config.minWidth),t.minHeight=Ar(this._config.minHeight),t.maxWidth=Ar(this._config.maxWidth),t.maxHeight=Ar(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;if(!t)return;let e;const o=()=>{t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",o),this._disposeBackdrop(t)),this._config.backdropClass&&this._toggleClasses(t,this._config.backdropClass,!1),clearTimeout(e)};t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",o)}),t.style.pointerEvents="none",e=this._ngZone.runOutsideAngular(()=>setTimeout(o,500))}_toggleClasses(t,e,o){const a=wv(e||[]).filter(c=>!!c);a.length&&(o?t.classList.add(...a):t.classList.remove(...a))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(dn(Cr(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.remove(),this._backdropElement===t&&(this._backdropElement=null))}}const M1="cdk-overlay-connected-position-bounding-box",dX=/([A-Za-z%]+)$/;class hX{constructor(t,e,o,a,c){this._viewportRuler=e,this._document=o,this._platform=a,this._overlayContainer=c,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Se,this._resizeSubscription=l.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(M1),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const t=this._originRect,e=this._overlayRect,o=this._viewportRect,a=[];let c;for(let d of this._preferredPositions){let p=this._getOriginPoint(t,d),g=this._getOverlayPoint(p,e,d),v=this._getOverlayFit(g,e,o,d);if(v.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(d,p);this._canFitWithFlexibleDimensions(v,g,o)?a.push({position:d,origin:p,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(p,d)}):(!c||c.overlayFit.visibleArea<v.visibleArea)&&(c={overlayFit:v,overlayPoint:g,originPoint:p,position:d,overlayRect:e})}if(a.length){let d=null,p=-1;for(const g of a){const v=g.boundingBoxRect.width*g.boundingBoxRect.height*(g.position.weight||1);v>p&&(p=v,d=g)}return this._isPushed=!1,void this._applyPosition(d.position,d.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(c.position,c.originPoint);this._applyPosition(c.position,c.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Od(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(M1),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const t=this._lastPosition||this._preferredPositions[0],e=this._getOriginPoint(this._originRect,t);this._applyPosition(t,e)}}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e){let o,a;if("center"==e.originX)o=t.left+t.width/2;else{const c=this._isRtl()?t.right:t.left,d=this._isRtl()?t.left:t.right;o="start"==e.originX?c:d}return a="center"==e.originY?t.top+t.height/2:"top"==e.originY?t.top:t.bottom,{x:o,y:a}}_getOverlayPoint(t,e,o){let a,c;return a="center"==o.overlayX?-e.width/2:"start"===o.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,c="center"==o.overlayY?-e.height/2:"top"==o.overlayY?0:-e.height,{x:t.x+a,y:t.y+c}}_getOverlayFit(t,e,o,a){const c=x1(e);let{x:d,y:p}=t,g=this._getOffset(a,"x"),v=this._getOffset(a,"y");g&&(d+=g),v&&(p+=v);let x=0-p,L=p+c.height-o.height,U=this._subtractOverflows(c.width,0-d,d+c.width-o.width),ee=this._subtractOverflows(c.height,x,L),$=U*ee;return{visibleArea:$,isCompletelyWithinViewport:c.width*c.height===$,fitsInViewportVertically:ee===c.height,fitsInViewportHorizontally:U==c.width}}_canFitWithFlexibleDimensions(t,e,o){if(this._hasFlexibleDimensions){const a=o.bottom-e.y,c=o.right-e.x,d=I1(this._overlayRef.getConfig().minHeight),p=I1(this._overlayRef.getConfig().minWidth),v=t.fitsInViewportHorizontally||null!=p&&p<=c;return(t.fitsInViewportVertically||null!=d&&d<=a)&&v}return!1}_pushOverlayOnScreen(t,e,o){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const a=x1(e),c=this._viewportRect,d=Math.max(t.x+a.width-c.width,0),p=Math.max(t.y+a.height-c.height,0),g=Math.max(c.top-o.top-t.y,0),v=Math.max(c.left-o.left-t.x,0);let E=0,D=0;return E=a.width<=c.width?v||-d:t.x<this._viewportMargin?c.left-o.left-t.x:0,D=a.height<=c.height?g||-p:t.y<this._viewportMargin?c.top-o.top-t.y:0,this._previousPushAmount={x:E,y:D},{x:t.x+E,y:t.y+D}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const o=this._getScrollVisibility(),a=new aX(t,o);this._positionChanges.next(a)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let o,a=t.overlayY;o="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let c=0;c<e.length;c++)e[c].style.transformOrigin=`${o} ${a}`}_calculateBoundingBoxRect(t,e){const o=this._viewportRect,a=this._isRtl();let c,d,p,E,D,x;if("top"===e.overlayY)d=t.y,c=o.height-d+this._viewportMargin;else if("bottom"===e.overlayY)p=o.height-t.y+2*this._viewportMargin,c=o.height-p+this._viewportMargin;else{const L=Math.min(o.bottom-t.y+o.top,t.y),U=this._lastBoundingBoxSize.height;c=2*L,d=t.y-L,c>U&&!this._isInitialRender&&!this._growAfterOpen&&(d=t.y-U/2)}if("end"===e.overlayX&&!a||"start"===e.overlayX&&a)x=o.width-t.x+this._viewportMargin,E=t.x-this._viewportMargin;else if("start"===e.overlayX&&!a||"end"===e.overlayX&&a)D=t.x,E=o.right-t.x;else{const L=Math.min(o.right-t.x+o.left,t.x),U=this._lastBoundingBoxSize.width;E=2*L,D=t.x-L,E>U&&!this._isInitialRender&&!this._growAfterOpen&&(D=t.x-U/2)}return{top:d,left:D,bottom:p,right:x,width:E,height:c}}_setBoundingBoxStyles(t,e){const o=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(o.height=Math.min(o.height,this._lastBoundingBoxSize.height),o.width=Math.min(o.width,this._lastBoundingBoxSize.width));const a={};if(this._hasExactPosition())a.top=a.left="0",a.bottom=a.right=a.maxHeight=a.maxWidth="",a.width=a.height="100%";else{const c=this._overlayRef.getConfig().maxHeight,d=this._overlayRef.getConfig().maxWidth;a.height=Ar(o.height),a.top=Ar(o.top),a.bottom=Ar(o.bottom),a.width=Ar(o.width),a.left=Ar(o.left),a.right=Ar(o.right),a.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",a.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",c&&(a.maxHeight=Ar(c)),d&&(a.maxWidth=Ar(d))}this._lastBoundingBoxSize=o,Od(this._boundingBox.style,a)}_resetBoundingBoxStyles(){Od(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Od(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const o={},a=this._hasExactPosition(),c=this._hasFlexibleDimensions,d=this._overlayRef.getConfig();if(a){const E=this._viewportRuler.getViewportScrollPosition();Od(o,this._getExactOverlayY(e,t,E)),Od(o,this._getExactOverlayX(e,t,E))}else o.position="static";let p="",g=this._getOffset(e,"x"),v=this._getOffset(e,"y");g&&(p+=`translateX(${g}px) `),v&&(p+=`translateY(${v}px)`),o.transform=p.trim(),d.maxHeight&&(a?o.maxHeight=Ar(d.maxHeight):c&&(o.maxHeight="")),d.maxWidth&&(a?o.maxWidth=Ar(d.maxWidth):c&&(o.maxWidth="")),Od(this._pane.style,o)}_getExactOverlayY(t,e,o){let a={top:"",bottom:""},c=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(c=this._pushOverlayOnScreen(c,this._overlayRect,o));let d=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return c.y-=d,"bottom"===t.overlayY?a.bottom=this._document.documentElement.clientHeight-(c.y+this._overlayRect.height)+"px":a.top=Ar(c.y),a}_getExactOverlayX(t,e,o){let d,a={left:"",right:""},c=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(c=this._pushOverlayOnScreen(c,this._overlayRect,o)),d=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===d?a.right=this._document.documentElement.clientWidth-(c.x+this._overlayRect.width)+"px":a.left=Ar(c.x),a}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),o=this._scrollables.map(a=>a.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:D1(t,o),isOriginOutsideView:Nw(t,o),isOverlayClipped:D1(e,o),isOverlayOutsideView:Nw(e,o)}}_subtractOverflows(t,...e){return e.reduce((o,a)=>o-Math.max(a,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,o=this._viewportRuler.getViewportScrollPosition();return{top:o.top+this._viewportMargin,left:o.left+this._viewportMargin,right:o.left+t-this._viewportMargin,bottom:o.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&wv(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof It)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,o=t.height||0;return{top:t.y,bottom:t.y+o,left:t.x,right:t.x+e,height:o,width:e}}}function Od(r,t){for(let e in t)t.hasOwnProperty(e)&&(r[e]=t[e]);return r}function I1(r){if("number"!=typeof r&&null!=r){const[t,e]=r.split(dX);return e&&"px"!==e?null:parseFloat(t)}return r||null}function x1(r){return{top:Math.floor(r.top),right:Math.floor(r.right),bottom:Math.floor(r.bottom),left:Math.floor(r.left),width:Math.floor(r.width),height:Math.floor(r.height)}}const A1="cdk-global-overlay-wrapper";class pX{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(A1),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._rightOffset="",this._leftOffset=t,this._justifyContent="flex-start",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._leftOffset="",this._rightOffset=t,this._justifyContent="flex-end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._justifyContent="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,o=this._overlayRef.getConfig(),{width:a,height:c,maxWidth:d,maxHeight:p}=o,g=!("100%"!==a&&"100vw"!==a||d&&"100%"!==d&&"100vw"!==d),v=!("100%"!==c&&"100vh"!==c||p&&"100%"!==p&&"100vh"!==p);t.position=this._cssPosition,t.marginLeft=g?"0":this._leftOffset,t.marginTop=v?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=this._rightOffset,g?e.justifyContent="flex-start":"center"===this._justifyContent?e.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?e.justifyContent="flex-end":"flex-end"===this._justifyContent&&(e.justifyContent="flex-start"):e.justifyContent=this._justifyContent,e.alignItems=v?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,o=e.style;e.classList.remove(A1),o.justifyContent=o.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let fX=(()=>{class r{constructor(e,o,a,c){this._viewportRuler=e,this._document=o,this._platform=a,this._overlayContainer=c}global(){return new pX}flexibleConnectedTo(e){return new hX(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return r.\u0275fac=function(e){return new(e||r)(Oe(jg),Oe(Kt),Oe(so),Oe(Pw))},r.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),gX=0,ka=(()=>{class r{constructor(e,o,a,c,d,p,g,v,E,D,x){this.scrollStrategies=e,this._overlayContainer=o,this._componentFactoryResolver=a,this._positionBuilder=c,this._keyboardDispatcher=d,this._injector=p,this._ngZone=g,this._document=v,this._directionality=E,this._location=D,this._outsideClickDispatcher=x}create(e){const o=this._createHostElement(),a=this._createPaneElement(o),c=this._createPortalOutlet(a),d=new qv(e);return d.direction=d.direction||this._directionality.value,new uX(c,o,a,d,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(e){const o=this._document.createElement("div");return o.id="cdk-overlay-"+gX++,o.classList.add("cdk-overlay-pane"),e.appendChild(o),o}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(ud)),new WY(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return r.\u0275fac=function(e){return new(e||r)(Oe(sX),Oe(Pw),Oe(Wl),Oe(fX),Oe(lX),Oe(tn),Oe(bi),Oe(Kt),Oe(Ia),Oe(og),Oe(cX))},r.\u0275prov=rt({token:r,factory:r.\u0275fac}),r})();const vX={provide:new xe("cdk-connected-overlay-scroll-strategy"),deps:[ka],useFactory:function(r){return()=>r.scrollStrategies.reposition()}};let uu=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({providers:[ka,vX],imports:[[xp,lu,kw],kw]}),r})();const bX=["mat-menu-item",""];function yX(r,t){1&r&&(Il(),it(0,"svg",2),Gi(1,"polygon",3),nt())}const O1=["*"];function EX(r,t){if(1&r){const e=Jh();it(0,"div",0),ci("keydown",function(a){return cs(e),vr()._handleKeydown(a)})("click",function(){return cs(e),vr().closed.emit("click")})("@transformMenu.start",function(a){return cs(e),vr()._onAnimationStart(a)})("@transformMenu.done",function(a){return cs(e),vr()._onAnimationDone(a)}),it(1,"div",1),Oi(2),nt(),nt()}if(2&r){const e=vr();ri("id",e.panelId)("ngClass",e._classList)("@transformMenu",e._panelAnimationState),ni("aria-label",e.ariaLabel||null)("aria-labelledby",e.ariaLabelledby||null)("aria-describedby",e.ariaDescribedby||null)}}const eb={transformMenu:nr("transformMenu",[Ri("void",wt({opacity:0,transform:"scale(0.8)"})),Wi("void => enter",Ki("120ms cubic-bezier(0, 0, 0.2, 1)",wt({opacity:1,transform:"scale(1)"}))),Wi("* => void",Ki("100ms 25ms linear",wt({opacity:0})))]),fadeInItems:nr("fadeInItems",[Ri("showing",wt({opacity:1})),Wi("void => *",[wt({opacity:0}),Ki("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},CX=new xe("MatMenuContent"),Lw=new xe("MAT_MENU_PANEL"),TX=xa(Id(class{}));let tb=(()=>{class r extends TX{constructor(e,o,a,c,d){super(),this._elementRef=e,this._focusMonitor=a,this._parentMenu=c,this._changeDetectorRef=d,this.role="menuitem",this._hovered=new Se,this._focused=new Se,this._highlighted=!1,this._triggersSubmenu=!1,c&&c.addItem&&c.addItem(this)}focus(e,o){this._focusMonitor&&e?this._focusMonitor.focusVia(this._getHostElement(),e,o):this._getHostElement().focus(o),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(e){this.disabled&&(e.preventDefault(),e.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){var a;const e=this._elementRef.nativeElement.cloneNode(!0),o=e.querySelectorAll("mat-icon, .material-icons");for(let c=0;c<o.length;c++)o[c].remove();return(null==(a=e.textContent)?void 0:a.trim())||""}_setHighlighted(e){var o;this._highlighted=e,null==(o=this._changeDetectorRef)||o.markForCheck()}}return r.\u0275fac=function(e){return new(e||r)(X(It),X(Kt),X(Es),X(Lw,8),X(Bn))},r.\u0275cmp=Qt({type:r,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(e,o){1&e&&ci("click",function(c){return o._checkDisabled(c)})("mouseenter",function(){return o._handleMouseEnter()}),2&e&&(ni("role",o.role)("tabindex",o._getTabIndex())("aria-disabled",o.disabled.toString())("disabled",o.disabled||null),Li("mat-menu-item",!0)("mat-menu-item-highlighted",o._highlighted)("mat-menu-item-submenu-trigger",o._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[st],attrs:bX,ngContentSelectors:O1,decls:3,vars:3,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(e,o){1&e&&(Fn(),Oi(0),Gi(1,"div",0),er(2,yX,2,0,"svg",1)),2&e&&($t(1),ri("matRippleDisabled",o.disableRipple||o.disabled)("matRippleTrigger",o._getHostElement()),$t(1),ri("ngIf",o._triggersSubmenu))},directives:[Aa,Qc],encapsulation:2,changeDetection:0}),r})();const k1=new xe("mat-menu-default-options",{providedIn:"root",factory:function(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let SX=0,Wg=(()=>{class r{constructor(e,o,a){this._elementRef=e,this._ngZone=o,this._defaultOptions=a,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new $c,this._tabSubscription=l.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new Se,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new Pt,this.close=this.closed,this.panelId="mat-menu-panel-"+SX++}get xPosition(){return this._xPosition}set xPosition(e){this._xPosition=e,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(e){this._yPosition=e,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(e){this._overlapTrigger=Ft(e)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=Ft(e)}set panelClass(e){const o=this._previousPanelClass;o&&o.length&&o.split(" ").forEach(a=>{this._classList[a]=!1}),this._previousPanelClass=e,e&&e.length&&(e.split(" ").forEach(a=>{this._classList[a]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(e){this.panelClass=e}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new BT(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(Js(this._directDescendantItems),Ks(e=>Cr(...e.map(o=>o._focused)))).subscribe(e=>this._keyManager.updateActiveItem(e))}ngOnDestroy(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}_hovered(){return this._directDescendantItems.changes.pipe(Js(this._directDescendantItems),Ks(o=>Cr(...o.map(a=>a._hovered))))}addItem(e){}removeItem(e){}_handleKeydown(e){const o=e.keyCode,a=this._keyManager;switch(o){case 27:ys(e)||(e.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:(38===o||40===o)&&a.setFocusOrigin("keyboard"),a.onKeydown(e)}}focusFirstItem(e="program"){this.lazyContent?this._ngZone.onStable.pipe(Rn(1)).subscribe(()=>this._focusFirstItem(e)):this._focusFirstItem(e)}_focusFirstItem(e){const o=this._keyManager;if(o.setFocusOrigin(e).setFirstItemActive(),!o.activeItem&&this._directDescendantItems.length){let a=this._directDescendantItems.first._getHostElement().parentElement;for(;a;){if("menu"===a.getAttribute("role")){a.focus();break}a=a.parentElement}}}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(e){const o=Math.min(this._baseElevation+e,24),a=`${this._elevationPrefix}${o}`,c=Object.keys(this._classList).find(d=>d.startsWith(this._elevationPrefix));(!c||c===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[a]=!0,this._previousElevation=a)}setPositionClasses(e=this.xPosition,o=this.yPosition){const a=this._classList;a["mat-menu-before"]="before"===e,a["mat-menu-after"]="after"===e,a["mat-menu-above"]="above"===o,a["mat-menu-below"]="below"===o}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(e){this._animationDone.next(e),this._isAnimating=!1}_onAnimationStart(e){this._isAnimating=!0,"enter"===e.toState&&0===this._keyManager.activeItemIndex&&(e.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(Js(this._allItems)).subscribe(e=>{this._directDescendantItems.reset(e.filter(o=>o._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return r.\u0275fac=function(e){return new(e||r)(X(It),X(bi),X(k1))},r.\u0275dir=Ge({type:r,contentQueries:function(e,o,a){if(1&e&&(Qi(a,CX,5),Qi(a,tb,5),Qi(a,tb,4)),2&e){let c;Ht(c=Ut())&&(o.lazyContent=c.first),Ht(c=Ut())&&(o._allItems=c),Ht(c=Ut())&&(o.items=c)}},viewQuery:function(e,o){if(1&e&&Kn(br,5),2&e){let a;Ht(a=Ut())&&(o.templateRef=a.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}}),r})(),N1=(()=>{class r extends Wg{constructor(e,o,a){super(e,o,a),this._elevationPrefix="mat-elevation-z",this._baseElevation=4}}return r.\u0275fac=function(e){return new(e||r)(X(It),X(bi),X(k1))},r.\u0275cmp=Qt({type:r,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(e,o){2&e&&ni("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[Rt([{provide:Lw,useExisting:r}]),st],ngContentSelectors:O1,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(e,o){1&e&&(Fn(),er(0,EX,3,6,"ng-template"))},directives:[UI],styles:["mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]{pointer-events:none}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.cdk-high-contrast-active .mat-menu-item.cdk-program-focused,.cdk-high-contrast-active .mat-menu-item.cdk-keyboard-focused,.cdk-high-contrast-active .mat-menu-item-highlighted{outline:dotted 1px}.mat-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.mat-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-menu-submenu-icon{fill:CanvasText}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}\n"],encapsulation:2,data:{animation:[eb.transformMenu,eb.fadeInItems]},changeDetection:0}),r})();const P1=new xe("mat-menu-scroll-strategy"),RX={provide:P1,deps:[ka],useFactory:function(r){return()=>r.scrollStrategies.reposition()}},F1=nu({passive:!0});let MX=(()=>{class r{constructor(e,o,a,c,d,p,g,v){this._overlay=e,this._element=o,this._viewContainerRef=a,this._menuItemInstance=p,this._dir=g,this._focusMonitor=v,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=l.EMPTY,this._hoverSubscription=l.EMPTY,this._menuCloseSubscription=l.EMPTY,this._handleTouchStart=E=>{UT(E)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new Pt,this.onMenuOpen=this.menuOpened,this.menuClosed=new Pt,this.onMenuClose=this.menuClosed,this._scrollStrategy=c,this._parentMaterialMenu=d instanceof Wg?d:void 0,o.nativeElement.addEventListener("touchstart",this._handleTouchStart,F1),p&&(p._triggersSubmenu=this.triggersSubmenu())}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(e){this.menu=e}get menu(){return this._menu}set menu(e){e!==this._menu&&(this._menu=e,this._menuCloseSubscription.unsubscribe(),e&&(this._menuCloseSubscription=e.close.subscribe(o=>{this._destroyMenu(o),("click"===o||"tab"===o)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(o)})))}ngAfterContentInit(){this._checkMenu(),this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,F1),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){if(this._menuOpen)return;this._checkMenu();const e=this._createOverlay(),o=e.getConfig();this._setPosition(o.positionStrategy),o.hasBackdrop=null==this.menu.hasBackdrop?!this.triggersSubmenu():this.menu.hasBackdrop,e.attach(this._getPortal()),this.menu.lazyContent&&this.menu.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(),this.menu instanceof Wg&&this.menu._startAnimation()}closeMenu(){this.menu.close.emit()}focus(e,o){this._focusMonitor&&e?this._focusMonitor.focusVia(this._element,e,o):this._element.nativeElement.focus(o)}updatePosition(){var e;null==(e=this._overlayRef)||e.updatePosition()}_destroyMenu(e){if(!this._overlayRef||!this.menuOpen)return;const o=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===e||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,o instanceof Wg?(o._resetAnimation(),o.lazyContent?o._animationDone.pipe(un(a=>"void"===a.toState),Rn(1),dn(o.lazyContent._attached)).subscribe({next:()=>o.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),o.lazyContent&&o.lazyContent.detach())}_initMenu(){this.menu.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,this.menu.direction=this.dir,this._setMenuElevation(),this.menu.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(){if(this.menu.setElevation){let e=0,o=this.menu.parentMenu;for(;o;)e++,o=o.parentMenu;this.menu.setElevation(e)}}_setIsMenuOpen(e){this._menuOpen=e,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(e)}_checkMenu(){}_createOverlay(){if(!this._overlayRef){const e=this._getOverlayConfig();this._subscribeToPositions(e.positionStrategy),this._overlayRef=this._overlay.create(e),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(){return new qv({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:this.menu.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:this.menu.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(e){this.menu.setPositionClasses&&e.positionChanges.subscribe(o=>{this.menu.setPositionClasses("start"===o.connectionPair.overlayX?"after":"before","top"===o.connectionPair.overlayY?"below":"above")})}_setPosition(e){let[o,a]="before"===this.menu.xPosition?["end","start"]:["start","end"],[c,d]="above"===this.menu.yPosition?["bottom","top"]:["top","bottom"],[p,g]=[c,d],[v,E]=[o,a],D=0;this.triggersSubmenu()?(E=o="before"===this.menu.xPosition?"start":"end",a=v="end"===o?"start":"end",D="bottom"===c?8:-8):this.menu.overlapTrigger||(p="top"===c?"bottom":"top",g="top"===d?"bottom":"top"),e.withPositions([{originX:o,originY:p,overlayX:v,overlayY:c,offsetY:D},{originX:a,originY:p,overlayX:E,overlayY:c,offsetY:D},{originX:o,originY:g,overlayX:v,overlayY:d,offsetY:-D},{originX:a,originY:g,overlayX:E,overlayY:d,offsetY:-D}])}_menuClosingActions(){const e=this._overlayRef.backdropClick(),o=this._overlayRef.detachments();return Cr(e,this._parentMaterialMenu?this._parentMaterialMenu.closed:zt(),this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(un(d=>d!==this._menuItemInstance),un(()=>this._menuOpen)):zt(),o)}_handleMousedown(e){HT(e)||(this._openedBy=0===e.button?"mouse":void 0,this.triggersSubmenu()&&e.preventDefault())}_handleKeydown(e){const o=e.keyCode;(13===o||32===o)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===o&&"ltr"===this.dir||37===o&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(e){this.triggersSubmenu()?(e.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(un(e=>e===this._menuItemInstance&&!e.disabled),_v(0,Mw)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof Wg&&this.menu._isAnimating?this.menu._animationDone.pipe(Rn(1),_v(0,Mw),dn(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(){return(!this._portal||this._portal.templateRef!==this.menu.templateRef)&&(this._portal=new Ug(this.menu.templateRef,this._viewContainerRef)),this._portal}}return r.\u0275fac=function(e){return new(e||r)(X(ka),X(It),X(hr),X(P1),X(Lw,8),X(tb,10),X(Ia,8),X(Es))},r.\u0275dir=Ge({type:r,hostAttrs:["aria-haspopup","true"],hostVars:2,hostBindings:function(e,o){1&e&&ci("click",function(c){return o._handleClick(c)})("mousedown",function(c){return o._handleMousedown(c)})("keydown",function(c){return o._handleKeydown(c)}),2&e&&ni("aria-expanded",o.menuOpen||null)("aria-controls",o.menuOpen?o.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),r})(),B1=(()=>{class r extends MX{}return r.\u0275fac=function(){let t;return function(o){return(t||(t=pi(r)))(o||r)}}(),r.\u0275dir=Ge({type:r,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-menu-trigger"],exportAs:["matMenuTrigger"],features:[st]}),r})(),IX=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({providers:[RX],imports:[[Hr,Mt,Oa,uu],nc,Mt]}),r})();function xX(r,t){if(1&r){const e=Jh();it(0,"button",14),ci("click",function(){const c=cs(e).$implicit;return vr(2).ShowDemo(c.id)}),xi(1),nt()}if(2&r){const e=t.$implicit,o=t.index;$t(1),zm("",o+1," ",e.description,"")}}function AX(r,t){if(1&r&&(it(0,"button",13),xi(1),nt(),it(2,"mat-menu",null,5),er(4,xX,2,2,"ng-template",6),nt()),2&r){const e=t.$implicit,o=t.index;ri("matMenuTriggerFor",Ws(3)),$t(1),Jy("",o+1," ",e.key," (",e.value.length,")"),$t(3),ri("ngForOf",e.value)}}const OX=function(r){return["/","automation","loadexample",r]};function kX(r,t){if(1&r&&(it(0,"a",15),xi(1),nt()),2&r){const e=vr();ri("routerLink",np(2,OX,e.mustLoadDemoBlock)),$t(1),ol("Direct link ",e.mustLoadDemoBlock,"")}}function NX(r,t){1&r&&(it(0,"span"),xi(1,"Loading"),nt())}let V1=(()=>{class r{constructor(e,o,a,c){this.tabulator=e,this.settings=o,this.loadDemo=a,this.ar=c,this.swaggerLoaded=0,this.demoWorkspace=null,this.demos=[],this.demosCategories=new Map,this.mustLoadDemoBlock="",this.intro=C5(),this.step=0,this.swaggerData=[],this.showInner="",this.toolboxXML="",this.ar.paramMap.subscribe(d=>{this.mustLoadDemoBlock=d.get("demoblock")})}createIntro(){var e,o,a=(null===(e=this.settings.settings)||void 0===e?void 0:e.title)||"",c=null===(o=this.settings.settings)||void 0===o?void 0:o.tourSteps.map(d=>({title:a,intro:d.text,element:document.querySelector(d.query)||void 0}));this.intro.setOptions({exitOnEsc:!0,showStepNumbers:!0,doneLabel:"Exit",steps:c}).start()}clearOutput(){this.step=0,this.showInner="",this.tabulator.ClearDataGrid()}RunCode(){var e;this.run=Cp.interpreterHelper.createInterpreter(this.demoWorkspace,oo),this.clearOutput(),this.showInner="start program",e=this,this.run.runCode((a,c)=>{try{return new Interpreter(this.run.latestCode,c)}catch(d){e.ShowInnerWorkings(),window.alert("please copy the left output and report there is an error at "+JSON.stringify(d))}},a=>{e.step++,e.showInner+=`\n ${e.step} : ${a}`,this.tabulator.AddDataToGrid(a)},()=>{e.showInner+="\n program executed",this.tabulator.FinishGrid()})}ShowDemo(e){this.mustLoadDemoBlock=e,this.loadDemo.getDemoBlock(e).subscribe(o=>{var a=Fi.Xml.textToDom(o);null!=this.demoWorkspace&&(Fi.Xml.clearWorkspaceAndLoadFromXml(a,this.demoWorkspace),window.alert("please press run code button"))})}registerSwaggerBlocksObjects(e,o){return o.fieldXMLObjects.map(c=>Fi.Xml.textToDom(c))}registerSwaggerBlocksAPIControllers(e,o,a){var d=o.operations.filter(p=>p.controller==a);return o.fieldXMLFunctions.filter(p=>{if(""==p.id)return!0;var g=p.id+"/",v=!1;return d.forEach(E=>{g.startsWith(E.id)&&(v=!0)}),v}).map(p=>Fi.Xml.textToDom(p.gui))}registerSwaggerBlocksAPI(e,o){return o.fieldXMLFunctions.map(c=>Fi.Xml.textToDom(c.gui))}ngOnInit(){this.StartRegister(),this.createIntro()}LoadSwagger(){var e=window.prompt("Swagger url? ","https://swagger-tax-calc-api.herokuapp.com/api-docs");if(e){if(e.endsWith(".html")||e.endsWith(".htm"))return void window.alert("Swagger should end with .json - see source of html page");this.LoadSwaggerFromUrl(e).then(o=>{this.afterTimeout(this,this.toolboxXML),window.alert("done")})}}LoadSwaggerFromUrl(e,o){var a=this;return pT(function*(){var c=new E5.parseData(e),d=yield c.ParseSwagger();d.name=o||e,a.swaggerData.push(d);for(var p=0;p<d.GenerateBlocks.length;p++)(0,d.GenerateBlocks[p])(Fi.Blocks,oo,E=>new Fi.FieldDropdown(E));for(p=0;p<d.GenerateFunctions.length;p++)(0,d.GenerateFunctions[p])(Fi.Blocks,oo,function(x){return new Fi.FieldImage(`assets/httpImages/${x}.png`,90,20,x)});return d})()}StartRegister(){var e=this;return pT(function*(){var o=e.settings.links,a=new Map;o.forEach(function(){var E=pT(function*(D){a.set(D.id,yield e.LoadSwaggerFromUrl(D.link,D.id))});return function(D){return E.apply(this,arguments)}}());var c=[...Array(50).keys()].map(E=>e.CategorySwaggerHidden(E)),d=e.settings.demoBlocks;e.demos=d.sort((E,D)=>E.description.localeCompare(D.description));var p=d.map(E=>E.categories).filter(E=>(null==E?void 0:E.length)>0).flatMap(E=>E.split(";")).filter(E=>(null==E?void 0:E.length)>0);e.demosCategories.set("All",e.demos),p.forEach(E=>{e.demosCategories.set(E,d.filter(D=>{var x;return(null===(x=D.categories)||void 0===x?void 0:x.length)>0}).filter(D=>(";"+D.categories+";").indexOf(";"+E+";")>-1))});const g=document.getElementById("steps");if(null!=g){e.tabulator.initGrid(g),In.filterBlocks.definitionBlocks(Fi.Blocks,oo),In.waitBlocks.definitionBlocks(Fi.defineBlocksWithJsonArray,oo),In.xhrBlocks.definitionBlocks(Fi.Blocks,oo,function(E){return new Fi.FieldDropdown(E)}),In.propBlocks.definitionBlocks(Fi.Blocks,oo,function(E){return new Fi.FieldLabelSerializable(E)}),In.guiBlocks.definitionBlocks(Fi.Blocks,oo),In.convertersBlocks.definitionBlocks(Fi.Blocks,oo),In.exportFileBlock.definitionBlocks(Fi.Blocks,oo),In.createObjectBlocks.definitionBlocks(Fi.Blocks,oo,Fi.Extensions,E=>new Fi.FieldTextInput(E)),In.currentDateBlock.definitionBlocks(Fi.Blocks,oo,function(E){return new Fi.FieldDropdown(E)}),In.dateFromTextBlock.definitionBlocks(Fi.Blocks,oo),In.waitBlocks.definitionBlocks(Fi.Blocks,oo),In.commentBlock.definitionBlocks(Fi.Blocks,oo,E=>new Fi.FieldLabelSerializable(E)),In.auth0Blocks.definitionBlocks(Fi.Blocks,oo);var v=[In.defaultBlocks.generalBlocks(),`    \n            ${In.filterBlocks.fieldXML()}\n            ${In.xhrBlocks.fieldXML()}\n            \n            ${In.propBlocks.fieldXML()}\n            <category id="catGUI" name="GUI">\n            ${In.guiBlocks.fieldXML()}\n            </category>\n        `,`<category id="catTimers"  name="Timers">\n          ${In.waitBlocks.fieldXML()}\n        </category>`,`<category id="catConverters"  name="Converters">\n          ${In.convertersBlocks.fieldXML()}\n        </category>`,`<category id="catExporter"  name="Exporter">\n          ${In.exportFileBlock.fieldXML()}\n        </category>`,`<category id="catDates"  name="Dates">\n          ${In.currentDateBlock.fieldXML()}\n          ${In.dateFromTextBlock.fieldXML()}\n          ${In.waitBlocks.fieldXML()}\n        </category>`,`${In.commentBlock.fieldXML()}`,`${In.createObjectBlocks.fieldXML()}`,`${In.auth0Blocks.fieldXML()}`,`<category name="Swagger" id="catSwagger" expanded='true' >          \n          ${c}\n        </category> `];e.initialize(v)}else window.alert("gridElement is null")})()}SaveBlocks(){Cp.saveBlocksUrl.saveState(Fi.Xml,this.demoWorkspace)}ShowInnerWorkings(){if(null!=this.demoWorkspace){var e=Fi.Xml.workspaceToDom(this.demoWorkspace,!0),o=Fi.Xml.domToPrettyText(e);this.showInner=`\n            ${this.run.latestCode}\n            ========\n            ${o}\n            ========\n           \n            `}else window.alert("demoWorkspace is null")}Download(){var e=window.prompt("Name?","blocks.txt");null!=e&&Cp.saveLoad.DownloadBlocks(Fi.Xml,this.demoWorkspace,e)}changeListener(e){this.readThis(e.target)}readThis(e){var o=e.files[0],a=new FileReader,c=this;a.onloadend=function(d){Cp.saveLoad.LoadFile(Fi.Xml,c.demoWorkspace,a.result),c.run.resetInterpreter()},a.readAsText(o)}CategorySwaggerHidden(e){return`<category name='swagger_hidden_${e}' hidden='true' >${e}</category>`}initialize(e){var o,a,c;const d=document.getElementById("blocklyDiv");if(null!=d){var p=e.map(D=>`<sep></sep>${D}`);this.toolboxXML=`<xml xmlns="https://developers.google.com/blockly/xml" id="toolbox-simple" style="display: none">\n    ${p}\n    </xml>`,this.demoWorkspace=Fi.inject(d,{readOnly:!1,media:"media/",trashcan:!0,move:{scrollbars:!0,drag:!0,wheel:!0},toolbox:this.toolboxXML});var g=this;if(((null===(a=null===(o=this.settings.settings)||void 0===o?void 0:o.defaultBlocks)||void 0===a?void 0:a.length)||0)>0)try{var v=((null===(c=this.settings.settings)||void 0===c?void 0:c.defaultBlocks)||[]).join("\n"),E=Fi.Xml.textToDom(v);Fi.Xml.clearWorkspaceAndLoadFromXml(E,this.demoWorkspace)}catch(D){console.error("error when load default blocks",D)}window.setTimeout(g.afterTimeout,2e3,this,this.toolboxXML),this.run=Cp.interpreterHelper.createInterpreter(this.demoWorkspace,oo),g=this,this.demoWorkspace.addChangeListener(function(D){D.isUiEvent||(g.run.resetInterpreter(),g.run.generateCodeAndLoadIntoInterpreter(),g.ShowInnerWorkings())})}else window.alert("blocklyDiv is null")}restoreBlocks(){Cp.saveBlocksUrl.restoreState(Fi.Xml,this.demoWorkspace)}afterTimeout(e,o){var a,c,d,p,g;if(null!=(null==e?void 0:e.swaggerData))if(o=o.replace("Swagger",`Swagger(${e.swaggerData.length})`),e.swaggerData.forEach(L=>{var U=L.findCategSwaggerFromPaths().map($=>`<category name='${$}' custom='func_${L.name}_${$}'></category>`).join("\n"),ee=(null==e?void 0:e.CategorySwaggerHidden(null==e?void 0:e.swaggerLoaded))||"";o=o.replace(ee,`<category name='${L.name}'>\n      <category name='API' id='func_${L.name}'>\n      ${U}\n      </category>\n      ${L.categSwagger()}\n      </category>\n    `),e.swaggerLoaded++}),null===(a=null==e?void 0:e.demoWorkspace)||void 0===a||a.updateToolbox(o),null===(c=null==e?void 0:e.swaggerData)||void 0===c||c.forEach(L=>{if(null!=(null==e?void 0:e.demoWorkspace)){var ee="objects_"+L.nameCategSwagger(),$="api_"+L.nameCategSwagger();e.demoWorkspace.registerToolboxCategoryCallback(ee,ge=>e.registerSwaggerBlocksObjects(ge,L)),e.demoWorkspace.registerToolboxCategoryCallback($,ge=>e.registerSwaggerBlocksAPI(ge,L)),L.findCategSwaggerFromPaths().forEach(ge=>{var be;null===(be=null==e?void 0:e.demoWorkspace)||void 0===be||be.registerToolboxCategoryCallback(`func_${L.name}_${ge}`,$e=>e.registerSwaggerBlocksAPIControllers($e,L,ge))})}}),null!=(null==e?void 0:e.mustLoadDemoBlock))e.ShowDemo(null==e?void 0:e.mustLoadDemoBlock);else{if(((null===(p=null===(d=this.settings.settings)||void 0===d?void 0:d.defaultBlocks)||void 0===p?void 0:p.length)||0)>0)try{var D=((null===(g=e.settings.settings)||void 0===g?void 0:g.defaultBlocks)||[]).join("\n");if(D.length>62){var x=Fi.Xml.textToDom(D);Fi.Xml.clearWorkspaceAndLoadFromXml(x,e.demoWorkspace)}}catch(L){console.error("error when load default blocks",L)}e.restoreBlocks()}}}return r.\u0275fac=function(e){return new(e||r)(X(L6),X(bv),X(xT),X(bd))},r.\u0275cmp=Qt({type:r,selectors:[["app-display-blockly"]],decls:28,vars:8,consts:[["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","primary","id","runButton",3,"click"],["id","downloadBlocks","mat-raised-button","","color","primary",3,"click"],["type","file",3,"change"],["mat-raised-button","","id","demos","color","primary",3,"matMenuTriggerFor"],["menu","matMenu"],["ngFor","",3,"ngForOf"],["target","_blank","mat-raised-button","","color","primary",3,"routerLink",4,"ngIf"],[4,"ngIf"],[2,"width","100%"],["id","blocklyDiv",2,"display","inline-block","height","750px","width","58%"],["id","output","disabled","disabled",2,"display","inline-block","height","750px","width","38%",3,"ngModel","ngModelChange"],["id","steps",2,"display","inline-block","width","96%"],["mat-menu-item","",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],["target","_blank","mat-raised-button","","color","primary",3,"routerLink"]],template:function(e,o){if(1&e&&(it(0,"button",0),ci("click",function(){return o.LoadSwagger()}),xi(1,"Load Swagger"),nt(),it(2,"button",0),ci("click",function(){return o.ShowInnerWorkings()}),xi(3,"Show blocks"),nt(),xi(4," \xa0 "),it(5,"button",0),ci("click",function(){return o.SaveBlocks()}),xi(6,"Persist in browser"),nt(),xi(7," \xa0 "),it(8,"button",1),ci("click",function(){return o.RunCode()}),xi(9,"Run Code"),nt(),xi(10," \xa0 "),it(11,"button",2),ci("click",function(){return o.Download()}),xi(12,"Download blocks"),nt(),xi(13," \xa0 "),it(14,"input",3),ci("change",function(c){return o.changeListener(c)}),nt(),it(15,"button",4),xi(16),nt(),it(17,"mat-menu",null,5),er(19,AX,5,5,"ng-template",6),rp(20,"keyvalue"),nt(),er(21,kX,2,4,"a",7),er(22,NX,2,0,"span",8),it(23,"div",9),Gi(24,"div",10),it(25,"textarea",11),ci("ngModelChange",function(c){return o.showInner=c}),xi(26,"    "),nt(),nt(),Gi(27,"div",12)),2&e){const a=Ws(18);$t(15),ri("matMenuTriggerFor",a),$t(1),ol("Demos (",o.demos.length,")"),$t(3),ri("ngForOf",op(20,6,o.demosCategories)),$t(2),ri("ngIf",null==o.mustLoadDemoBlock?null:o.mustLoadDemoBlock.length),$t(1),ri("ngIf",null==o.demoWorkspace),$t(3),ri("ngModel",o.showInner)}},directives:[Dw,B1,N1,pC,Qc,P_,Gx,HC,tb,LY,Mg],pipes:[$I],styles:[".tabulator[_ngcontent-%COMP%]{font-size:12px;border:none}.tabulator[_ngcontent-%COMP%]   .tabulator-header[_ngcontent-%COMP%]{font-weight:normal;border-bottom:1px solid;border-bottom-color:#0000001f;color:#0000008a}.tabulator[_ngcontent-%COMP%]   .tabulator-header[_ngcontent-%COMP%]   .tabulator-col[_ngcontent-%COMP%]{height:48px;background-color:#fff;border:none;padding:0 7px}.tabulator-row[_ngcontent-%COMP%]{border-bottom:1px solid;border-bottom-color:#0000001f;min-height:48px;vertical-align:middle}.tabulator-row[_ngcontent-%COMP%]   .tabulator-cell[_ngcontent-%COMP%]{padding:16px 7px;border-right:none;vertical-align:middle}.tabulator-row[_ngcontent-%COMP%]   .tabulator-cell[_ngcontent-%COMP%]:first-of-type, .tabulator[_ngcontent-%COMP%]   .tabulator-header[_ngcontent-%COMP%]   .tabulator-col[_ngcontent-%COMP%]:first-of-type{padding-left:24px}.tabulator-row.tabulator-row-even[_ngcontent-%COMP%]{background-color:#fff}"]}),r})();const PX=[{path:"",redirectTo:"automation/main",pathMatch:"full"},{path:"automation/main",component:V1},{path:"automation/loadexample/:demoblock",component:V1}];let LX=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({imports:[[bO.forRoot(PX)],bO]}),r})();const H1=new Set;let Np,FX=(()=>{class r{constructor(e){this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):VX}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function(r){if(!H1.has(r))try{Np||(Np=document.createElement("style"),Np.setAttribute("type","text/css"),document.head.appendChild(Np)),Np.sheet&&(Np.sheet.insertRule(`@media ${r} {body{ }}`,0),H1.add(r))}catch(t){console.error(t)}}(e),this._matchMedia(e)}}return r.\u0275fac=function(e){return new(e||r)(Oe(so))},r.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function VX(r){return{matches:"all"===r||""===r,media:r,addListener:()=>{},removeListener:()=>{}}}let HX=(()=>{class r{constructor(e,o){this._mediaMatcher=e,this._zone=o,this._queries=new Map,this._destroySubject=new Se}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return U1(wv(e)).some(a=>this._registerQuery(a).mql.matches)}observe(e){let c=mA(U1(wv(e)).map(d=>this._registerQuery(d).observable));return c=mg(c.pipe(Rn(1)),c.pipe(XO(1),Tv(0))),c.pipe(He(d=>{const p={matches:!1,breakpoints:{}};return d.forEach(({matches:g,query:v})=>{p.matches=p.matches||g,p.breakpoints[v]=g}),p}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const o=this._mediaMatcher.matchMedia(e),c={observable:new re(d=>{const p=g=>this._zone.run(()=>d.next(g));return o.addListener(p),()=>{o.removeListener(p)}}).pipe(Js(o),He(({matches:d})=>({query:e,matches:d})),dn(this._destroySubject)),mql:o};return this._queries.set(e,c),c}}return r.\u0275fac=function(e){return new(e||r)(Oe(FX),Oe(bi))},r.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function U1(r){return r.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}class GX extends Se{constructor(t=1/0,e=1/0,o=yT){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=o,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:o,_infiniteTimeWindow:a,_timestampProvider:c,_windowTime:d}=this;e||(o.push(t),!a&&o.push(c.now()+d)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:o,_buffer:a}=this,c=a.slice();for(let d=0;d<c.length&&!t.closed;d+=o?1:2)t.next(c[d]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:o,_infiniteTimeWindow:a}=this,c=(a?1:2)*t;if(t<1/0&&c<o.length&&o.splice(0,o.length-c),!a){const d=e.now();let p=0;for(let g=1;g<o.length&&o[g]<=d;g+=2)p=g;p&&o.splice(0,p+1)}}}const ib=["*"];function WX(r,t){if(1&r){const e=Jh();it(0,"div",2),ci("click",function(){return cs(e),vr()._onBackdropClicked()}),nt()}2&r&&Li("mat-drawer-shown",vr()._isShowingBackdrop())}function zX(r,t){1&r&&(it(0,"mat-drawer-content"),Oi(1,2),nt())}const YX=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],XX=["mat-drawer","mat-drawer-content","*"];function $X(r,t){if(1&r){const e=Jh();it(0,"div",2),ci("click",function(){return cs(e),vr()._onBackdropClicked()}),nt()}2&r&&Li("mat-drawer-shown",vr()._isShowingBackdrop())}function KX(r,t){1&r&&(it(0,"mat-sidenav-content",3),Oi(1,2),nt())}const JX=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],QX=["mat-sidenav","mat-sidenav-content","*"],G1={transformDrawer:nr("transform",[Ri("open, open-instant",wt({transform:"none",visibility:"visible"})),Ri("void",wt({"box-shadow":"none",visibility:"hidden"})),Wi("void => open-instant",Ki("0ms")),Wi("void <=> open, open-instant => void",Ki("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},qX=new xe("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function(){return!1}}),Fw=new xe("MAT_DRAWER_CONTAINER");let nb=(()=>{class r extends Zv{constructor(e,o,a,c,d){super(a,c,d),this._changeDetectorRef=e,this._container=o}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return r.\u0275fac=function(e){return new(e||r)(X(Bn),X(hi(()=>W1)),X(It),X(Qv),X(bi))},r.\u0275cmp=Qt({type:r,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(e,o){2&e&&Ko("margin-left",o._container._contentMargins.left,"px")("margin-right",o._container._contentMargins.right,"px")},features:[st],ngContentSelectors:ib,decls:1,vars:0,template:function(e,o){1&e&&(Fn(),Oi(0))},encapsulation:2,changeDetection:0}),r})(),j1=(()=>{class r{constructor(e,o,a,c,d,p,g,v){this._elementRef=e,this._focusTrapFactory=o,this._focusMonitor=a,this._platform=c,this._ngZone=d,this._interactivityChecker=p,this._doc=g,this._container=v,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new Se,this._animationEnd=new Se,this._animationState="void",this.openedChange=new Pt(!0),this._openedStream=this.openedChange.pipe(un(E=>E),He(()=>{})),this.openedStart=this._animationStarted.pipe(un(E=>E.fromState!==E.toState&&0===E.toState.indexOf("open")),TT(void 0)),this._closedStream=this.openedChange.pipe(un(E=>!E),He(()=>{})),this.closedStart=this._animationStarted.pipe(un(E=>E.fromState!==E.toState&&"void"===E.toState),TT(void 0)),this._destroyed=new Se,this.onPositionChanged=new Pt,this._modeChanged=new Se,this.openedChange.subscribe(E=>{E?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{cu(this._elementRef.nativeElement,"keydown").pipe(un(E=>27===E.keyCode&&!this.disableClose&&!ys(E)),dn(this._destroyed)).subscribe(E=>this._ngZone.run(()=>{this.close(),E.stopPropagation(),E.preventDefault()}))}),this._animationEnd.pipe(kT((E,D)=>E.fromState===D.fromState&&E.toState===D.toState)).subscribe(E=>{const{fromState:D,toState:x}=E;(0===x.indexOf("open")&&"void"===D||"void"===x&&0===D.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(e){(e="end"===e?"end":"start")!=this._position&&(this._position=e,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(e){this._mode=e,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(e){this._disableClose=Ft(e)}get autoFocus(){const e=this._autoFocus;return null==e?"side"===this.mode?"dialog":"first-tabbable":e}set autoFocus(e){("true"===e||"false"===e)&&(e=Ft(e)),this._autoFocus=e}get opened(){return this._opened}set opened(e){this.toggle(Ft(e))}_forceFocus(e,o){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{e.addEventListener("blur",()=>e.removeAttribute("tabindex")),e.addEventListener("mousedown",()=>e.removeAttribute("tabindex"))})),e.focus(o)}_focusByCssSelector(e,o){let a=this._elementRef.nativeElement.querySelector(e);a&&this._forceFocus(a,o)}_takeFocus(){if(!this._focusTrap)return;const e=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(o=>{!o&&"function"==typeof this._elementRef.nativeElement.focus&&e.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(e){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,e):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){var o;const e=null==(o=this._doc)?void 0:o.activeElement;return!!e&&this._elementRef.nativeElement.contains(e)}ngAfterContentInit(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState()}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(e){return this.toggle(!0,e)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(e=!this.opened,o){e&&o&&(this._openedVia=o);const a=this._setOpen(e,!e&&this._isFocusWithinDrawer(),this._openedVia||"program");return e||(this._openedVia=null),a}_setOpen(e,o,a){return this._opened=e,e?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",o&&this._restoreFocus(a)),this._updateFocusTrapState(),new Promise(c=>{this.openedChange.pipe(Rn(1)).subscribe(d=>c(d?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}}return r.\u0275fac=function(e){return new(e||r)(X(It),X(nk),X(Es),X(so),X(bi),X(VT),X(Kt,8),X(Fw,8))},r.\u0275cmp=Qt({type:r,selectors:[["mat-drawer"]],hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(e,o){1&e&&jm("@transform.start",function(c){return o._animationStarted.next(c)})("@transform.done",function(c){return o._animationEnd.next(c)}),2&e&&(ni("align",null),Ym("@transform",o._animationState),Li("mat-drawer-end","end"===o.position)("mat-drawer-over","over"===o.mode)("mat-drawer-push","push"===o.mode)("mat-drawer-side","side"===o.mode)("mat-drawer-opened",o.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:ib,decls:2,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(e,o){1&e&&(Fn(),it(0,"div",0),Oi(1),nt())},directives:[Zv],encapsulation:2,data:{animation:[G1.transformDrawer]},changeDetection:0}),r})(),W1=(()=>{class r{constructor(e,o,a,c,d,p=!1,g){this._dir=e,this._element=o,this._ngZone=a,this._changeDetectorRef=c,this._animationMode=g,this._drawers=new $c,this.backdropClick=new Pt,this._destroyed=new Se,this._doCheckSubject=new Se,this._contentMargins={left:null,right:null},this._contentMarginChanges=new Se,e&&e.change.pipe(dn(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),d.change().pipe(dn(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=p}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(e){this._autosize=Ft(e)}get hasBackdrop(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride}set hasBackdrop(e){this._backdropOverride=null==e?null:Ft(e)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe(Js(this._allDrawers),dn(this._destroyed)).subscribe(e=>{this._drawers.reset(e.filter(o=>!o._container||o._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(Js(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(e=>{this._watchDrawerToggle(e),this._watchDrawerPosition(e),this._watchDrawerMode(e)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(Tv(10),dn(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(e=>e.open())}close(){this._drawers.forEach(e=>e.close())}updateContentMargins(){let e=0,o=0;if(this._left&&this._left.opened)if("side"==this._left.mode)e+=this._left._getWidth();else if("push"==this._left.mode){const a=this._left._getWidth();e+=a,o-=a}if(this._right&&this._right.opened)if("side"==this._right.mode)o+=this._right._getWidth();else if("push"==this._right.mode){const a=this._right._getWidth();o+=a,e-=a}e=e||null,o=o||null,(e!==this._contentMargins.left||o!==this._contentMargins.right)&&(this._contentMargins={left:e,right:o},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(e){e._animationStarted.pipe(un(o=>o.fromState!==o.toState),dn(this._drawers.changes)).subscribe(o=>{"open-instant"!==o.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==e.mode&&e.openedChange.pipe(dn(this._drawers.changes)).subscribe(()=>this._setContainerClass(e.opened))}_watchDrawerPosition(e){!e||e.onPositionChanged.pipe(dn(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe(Rn(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(e){e&&e._modeChanged.pipe(dn(Cr(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(e){const o=this._element.nativeElement.classList,a="mat-drawer-container-has-open";e?o.add(a):o.remove(a)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(e=>{"end"==e.position?this._end=e:this._start=e}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(e=>e&&!e.disableClose&&this._canHaveBackdrop(e)).forEach(e=>e._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(e){return"side"!==e.mode||!!this._backdropOverride}_isDrawerOpen(e){return null!=e&&e.opened}}return r.\u0275fac=function(e){return new(e||r)(X(Ia,8),X(It),X(bi),X(Bn),X(jg),X(qX),X(wo,8))},r.\u0275cmp=Qt({type:r,selectors:[["mat-drawer-container"]],contentQueries:function(e,o,a){if(1&e&&(Qi(a,nb,5),Qi(a,j1,5)),2&e){let c;Ht(c=Ut())&&(o._content=c.first),Ht(c=Ut())&&(o._allDrawers=c)}},viewQuery:function(e,o){if(1&e&&Kn(nb,5),2&e){let a;Ht(a=Ut())&&(o._userContent=a.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(e,o){2&e&&Li("mat-drawer-container-explicit-backdrop",o._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[Rt([{provide:Fw,useExisting:r}])],ngContentSelectors:XX,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(e,o){1&e&&(Fn(YX),er(0,WX,1,2,"div",0),Oi(1),Oi(2,1),er(3,zX,2,0,"mat-drawer-content",1)),2&e&&(ri("ngIf",o.hasBackdrop),$t(3),ri("ngIf",!o._content))},directives:[Qc,nb],styles:[".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n"],encapsulation:2,changeDetection:0}),r})(),Bw=(()=>{class r extends nb{constructor(e,o,a,c,d){super(e,o,a,c,d)}}return r.\u0275fac=function(e){return new(e||r)(X(Bn),X(hi(()=>Y1)),X(It),X(Qv),X(bi))},r.\u0275cmp=Qt({type:r,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],hostVars:4,hostBindings:function(e,o){2&e&&Ko("margin-left",o._container._contentMargins.left,"px")("margin-right",o._container._contentMargins.right,"px")},features:[st],ngContentSelectors:ib,decls:1,vars:0,template:function(e,o){1&e&&(Fn(),Oi(0))},encapsulation:2,changeDetection:0}),r})(),z1=(()=>{class r extends j1{constructor(){super(...arguments),this._fixedInViewport=!1,this._fixedTopGap=0,this._fixedBottomGap=0}get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(e){this._fixedInViewport=Ft(e)}get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(e){this._fixedTopGap=To(e)}get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(e){this._fixedBottomGap=To(e)}}return r.\u0275fac=function(){let t;return function(o){return(t||(t=pi(r)))(o||r)}}(),r.\u0275cmp=Qt({type:r,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1",1,"mat-drawer","mat-sidenav"],hostVars:17,hostBindings:function(e,o){2&e&&(ni("align",null),Ko("top",o.fixedInViewport?o.fixedTopGap:null,"px")("bottom",o.fixedInViewport?o.fixedBottomGap:null,"px"),Li("mat-drawer-end","end"===o.position)("mat-drawer-over","over"===o.mode)("mat-drawer-push","push"===o.mode)("mat-drawer-side","side"===o.mode)("mat-drawer-opened",o.opened)("mat-sidenav-fixed",o.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],features:[st],ngContentSelectors:ib,decls:2,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(e,o){1&e&&(Fn(),it(0,"div",0),Oi(1),nt())},directives:[Zv],encapsulation:2,data:{animation:[G1.transformDrawer]},changeDetection:0}),r})(),Y1=(()=>{class r extends W1{}return r.\u0275fac=function(){let t;return function(o){return(t||(t=pi(r)))(o||r)}}(),r.\u0275cmp=Qt({type:r,selectors:[["mat-sidenav-container"]],contentQueries:function(e,o,a){if(1&e&&(Qi(a,Bw,5),Qi(a,z1,5)),2&e){let c;Ht(c=Ut())&&(o._content=c.first),Ht(c=Ut())&&(o._allDrawers=c)}},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(e,o){2&e&&Li("mat-drawer-container-explicit-backdrop",o._backdropOverride)},exportAs:["matSidenavContainer"],features:[Rt([{provide:Fw,useExisting:r}]),st],ngContentSelectors:QX,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],["cdkScrollable","",4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"],["cdkScrollable",""]],template:function(e,o){1&e&&(Fn(JX),er(0,$X,1,2,"div",0),Oi(1),Oi(2,1),er(3,KX,2,0,"mat-sidenav-content",1)),2&e&&(ri("ngIf",o.hasBackdrop),$t(3),ri("ngIf",!o._content))},directives:[Qc,Bw,Zv],styles:[".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n"],encapsulation:2,changeDetection:0}),r})(),X1=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({imports:[[Hr,Mt,Rp,nc],nc,Mt]}),r})();const t$=["*",[["mat-toolbar-row"]]],i$=["*","mat-toolbar-row"],n$=au(class{constructor(r){this._elementRef=r}});let r$=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=Ge({type:r,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),r})(),o$=(()=>{class r extends n${constructor(e,o,a){super(e),this._platform=o,this._document=a}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return r.\u0275fac=function(e){return new(e||r)(X(It),X(so),X(Kt))},r.\u0275cmp=Qt({type:r,selectors:[["mat-toolbar"]],contentQueries:function(e,o,a){if(1&e&&Qi(a,r$,5),2&e){let c;Ht(c=Ut())&&(o._toolbarRows=c)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(e,o){2&e&&Li("mat-toolbar-multiple-rows",o._toolbarRows.length>0)("mat-toolbar-single-row",0===o._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[st],ngContentSelectors:i$,decls:2,vars:0,template:function(e,o){1&e&&(Fn(t$),Oi(0),Oi(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),r})(),$1=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({imports:[[Mt],Mt]}),r})(),Vw=(()=>{class r{constructor(){this._listeners=[]}notify(e,o){for(let a of this._listeners)a(e,o)}listen(e){return this._listeners.push(e),()=>{this._listeners=this._listeners.filter(o=>e!==o)}}ngOnDestroy(){this._listeners=[]}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),s$=(()=>{class r{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(e){this._vertical=Ft(e)}get inset(){return this._inset}set inset(e){this._inset=Ft(e)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=Qt({type:r,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(e,o){2&e&&(ni("aria-orientation",o.vertical?"vertical":"horizontal"),Li("mat-divider-vertical",o.vertical)("mat-divider-horizontal",!o.vertical)("mat-divider-inset",o.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(e,o){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}\n"],encapsulation:2,changeDetection:0}),r})(),Q1=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({imports:[[Mt],Mt]}),r})();const Z1=["*"],l$=[[["","mat-list-avatar",""],["","mat-list-icon",""],["","matListAvatar",""],["","matListIcon",""]],[["","mat-line",""],["","matLine",""]],"*"],c$=["[mat-list-avatar], [mat-list-icon], [matListAvatar], [matListIcon]","[mat-line], [matLine]","*"],f$=Id(xa(class{})),g$=xa(class{}),m$=new xe("MatList"),q1=new xe("MatNavList");let _$=(()=>{class r extends f${constructor(){super(...arguments),this._stateChanges=new Se}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return r.\u0275fac=function(){let t;return function(o){return(t||(t=pi(r)))(o||r)}}(),r.\u0275cmp=Qt({type:r,selectors:[["mat-nav-list"]],hostAttrs:["role","navigation",1,"mat-nav-list","mat-list-base"],inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matNavList"],features:[Rt([{provide:q1,useExisting:r}]),st,vn],ngContentSelectors:Z1,decls:1,vars:0,template:function(e,o){1&e&&(Fn(),Oi(0))},styles:['.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:transparent}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:transparent;text-align:left}[dir=rtl] mat-action-list button{text-align:right}mat-action-list button::-moz-focus-inner{border:0}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-selection-list:focus{outline-style:dotted}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-list-option:focus,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:focus,.cdk-high-contrast-active mat-action-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:focus{outline:dotted 1px;z-index:1}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}\n'],encapsulation:2,changeDetection:0}),r})(),eN=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=Ge({type:r,selectors:[["","mat-list-avatar",""],["","matListAvatar",""]],hostAttrs:[1,"mat-list-avatar"]}),r})(),tN=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=Ge({type:r,selectors:[["","mat-list-icon",""],["","matListIcon",""]],hostAttrs:[1,"mat-list-icon"]}),r})(),v$=(()=>{class r extends g${constructor(e,o,a,c){super(),this._element=e,this._isInteractiveList=!1,this._destroyed=new Se,this._disabled=!1,this._isInteractiveList=!!(a||c&&"action-list"===c._getListType()),this._list=a||c;const d=this._getHostElement();"button"===d.nodeName.toLowerCase()&&!d.hasAttribute("type")&&d.setAttribute("type","button"),this._list&&this._list._stateChanges.pipe(dn(this._destroyed)).subscribe(()=>{o.markForCheck()})}get disabled(){return this._disabled||!(!this._list||!this._list.disabled)}set disabled(e){this._disabled=Ft(e)}ngAfterContentInit(){!function(r,t,e="mat"){r.changes.pipe(Js(r)).subscribe(({length:o})=>{Hg(t,`${e}-2-line`,!1),Hg(t,`${e}-3-line`,!1),Hg(t,`${e}-multi-line`,!1),2===o||3===o?Hg(t,`${e}-${o}-line`,!0):o>3&&Hg(t,`${e}-multi-line`,!0)})}(this._lines,this._element)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_isRippleDisabled(){return!this._isInteractiveList||this.disableRipple||!(!this._list||!this._list.disableRipple)}_getHostElement(){return this._element.nativeElement}}return r.\u0275fac=function(e){return new(e||r)(X(It),X(Bn),X(q1,8),X(m$,8))},r.\u0275cmp=Qt({type:r,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(e,o,a){if(1&e&&(Qi(a,eN,5),Qi(a,tN,5),Qi(a,h1,5)),2&e){let c;Ht(c=Ut())&&(o._avatar=c.first),Ht(c=Ut())&&(o._icon=c.first),Ht(c=Ut())&&(o._lines=c)}},hostAttrs:[1,"mat-list-item","mat-focus-indicator"],hostVars:6,hostBindings:function(e,o){2&e&&Li("mat-list-item-disabled",o.disabled)("mat-list-item-avatar",o._avatar||o._icon)("mat-list-item-with-avatar",o._avatar||o._icon)},inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matListItem"],features:[st],ngContentSelectors:c$,decls:6,vars:2,consts:[[1,"mat-list-item-content"],["mat-ripple","",1,"mat-list-item-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-list-text"]],template:function(e,o){1&e&&(Fn(l$),it(0,"div",0),Gi(1,"div",1),Oi(2),it(3,"div",2),Oi(4,1),nt(),Oi(5,2),nt()),2&e&&($t(1),ri("matRippleTrigger",o._getHostElement())("matRippleDisabled",o._isRippleDisabled()))},directives:[Aa],encapsulation:2,changeDetection:0}),r})(),nN=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({imports:[[Xv,Oa,Mt,Sw,Hr],Xv,Mt,Sw,Q1]}),r})();const S$=["*"];let sb;function Yg(r){var t;return(null==(t=function(){if(void 0===sb&&(sb=null,"undefined"!=typeof window)){const r=window;void 0!==r.trustedTypes&&(sb=r.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return sb}())?void 0:t.createHTML(r))||r}function rN(r){return Error(`Unable to find icon with the name "${r}"`)}function oN(r){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${r}".`)}function sN(r){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${r}".`)}class kd{constructor(t,e,o){this.url=t,this.svgText=e,this.options=o}}let ab=(()=>{class r{constructor(e,o,a,c){this._httpClient=e,this._sanitizer=o,this._errorHandler=c,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=a}addSvgIcon(e,o,a){return this.addSvgIconInNamespace("",e,o,a)}addSvgIconLiteral(e,o,a){return this.addSvgIconLiteralInNamespace("",e,o,a)}addSvgIconInNamespace(e,o,a,c){return this._addSvgIconConfig(e,o,new kd(a,null,c))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,o,a,c){const d=this._sanitizer.sanitize(ii.HTML,a);if(!d)throw sN(a);const p=Yg(d);return this._addSvgIconConfig(e,o,new kd("",p,c))}addSvgIconSet(e,o){return this.addSvgIconSetInNamespace("",e,o)}addSvgIconSetLiteral(e,o){return this.addSvgIconSetLiteralInNamespace("",e,o)}addSvgIconSetInNamespace(e,o,a){return this._addSvgIconSetConfig(e,new kd(o,null,a))}addSvgIconSetLiteralInNamespace(e,o,a){const c=this._sanitizer.sanitize(ii.HTML,o);if(!c)throw sN(o);const d=Yg(c);return this._addSvgIconSetConfig(e,new kd("",d,a))}registerFontClassAlias(e,o=e){return this._fontCssClassesByAlias.set(e,o),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const o=this._sanitizer.sanitize(ii.RESOURCE_URL,e);if(!o)throw oN(e);const a=this._cachedIconsByUrl.get(o);return a?zt(lb(a)):this._loadSvgIconFromConfig(new kd(e,null)).pipe(Ir(c=>this._cachedIconsByUrl.set(o,c)),He(c=>lb(c)))}getNamedSvgIcon(e,o=""){const a=aN(o,e);let c=this._svgIconConfigs.get(a);if(c)return this._getSvgFromConfig(c);if(c=this._getIconConfigFromResolvers(o,e),c)return this._svgIconConfigs.set(a,c),this._getSvgFromConfig(c);const d=this._iconSetConfigs.get(o);return d?this._getSvgFromIconSetConfigs(e,d):function(r,t){const e=y(r)?r:()=>r,o=a=>a.error(e());return new re(o)}(rN(a))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?zt(lb(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(He(o=>lb(o)))}_getSvgFromIconSetConfigs(e,o){const a=this._extractIconWithNameFromAnySet(e,o);return a?zt(a):gx(o.filter(d=>!d.svgText).map(d=>this._loadSvgIconSetFromConfig(d).pipe(Zl(p=>{const v=`Loading icon set URL: ${this._sanitizer.sanitize(ii.RESOURCE_URL,d.url)} failed: ${p.message}`;return this._errorHandler.handleError(new Error(v)),zt(null)})))).pipe(He(()=>{const d=this._extractIconWithNameFromAnySet(e,o);if(!d)throw rN(e);return d}))}_extractIconWithNameFromAnySet(e,o){for(let a=o.length-1;a>=0;a--){const c=o[a];if(c.svgText&&c.svgText.toString().indexOf(e)>-1){const d=this._svgElementFromConfig(c),p=this._extractSvgIconFromSet(d,e,c.options);if(p)return p}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(Ir(o=>e.svgText=o),He(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?zt(null):this._fetchIcon(e).pipe(Ir(o=>e.svgText=o))}_extractSvgIconFromSet(e,o,a){const c=e.querySelector(`[id="${o}"]`);if(!c)return null;const d=c.cloneNode(!0);if(d.removeAttribute("id"),"svg"===d.nodeName.toLowerCase())return this._setSvgAttributes(d,a);if("symbol"===d.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(d),a);const p=this._svgElementFromString(Yg("<svg></svg>"));return p.appendChild(d),this._setSvgAttributes(p,a)}_svgElementFromString(e){const o=this._document.createElement("DIV");o.innerHTML=e;const a=o.querySelector("svg");if(!a)throw Error("<svg> tag not found");return a}_toSvgElement(e){const o=this._svgElementFromString(Yg("<svg></svg>")),a=e.attributes;for(let c=0;c<a.length;c++){const{name:d,value:p}=a[c];"id"!==d&&o.setAttribute(d,p)}for(let c=0;c<e.childNodes.length;c++)e.childNodes[c].nodeType===this._document.ELEMENT_NODE&&o.appendChild(e.childNodes[c].cloneNode(!0));return o}_setSvgAttributes(e,o){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),o&&o.viewBox&&e.setAttribute("viewBox",o.viewBox),e}_fetchIcon(e){var v;const{url:o,options:a}=e,c=null!=(v=null==a?void 0:a.withCredentials)&&v;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==o)throw Error(`Cannot fetch icon from URL "${o}".`);const d=this._sanitizer.sanitize(ii.RESOURCE_URL,o);if(!d)throw oN(o);const p=this._inProgressUrlFetches.get(d);if(p)return p;const g=this._httpClient.get(d,{responseType:"text",withCredentials:c}).pipe(He(E=>Yg(E)),CA(()=>this._inProgressUrlFetches.delete(d)),qo());return this._inProgressUrlFetches.set(d,g),g}_addSvgIconConfig(e,o,a){return this._svgIconConfigs.set(aN(e,o),a),this}_addSvgIconSetConfig(e,o){const a=this._iconSetConfigs.get(e);return a?a.push(o):this._iconSetConfigs.set(e,[o]),this}_svgElementFromConfig(e){if(!e.svgElement){const o=this._svgElementFromString(e.svgText);this._setSvgAttributes(o,e.options),e.svgElement=o}return e.svgElement}_getIconConfigFromResolvers(e,o){for(let a=0;a<this._resolvers.length;a++){const c=this._resolvers[a](o,e);if(c)return I$(c)?new kd(c.url,null,c.options):new kd(c,null)}}}return r.\u0275fac=function(e){return new(e||r)(Oe(Og,8),Oe(dg),Oe(Kt,8),Oe(qa))},r.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function lb(r){return r.cloneNode(!0)}function aN(r,t){return r+":"+t}function I$(r){return!(!r.url||!r.options)}const x$=au(class{constructor(r){this._elementRef=r}}),A$=new xe("mat-icon-location",{providedIn:"root",factory:function(){const r=ed(Kt),t=r?r.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}}),lN=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],k$=lN.map(r=>`[${r}]`).join(", "),N$=/^url\(['"]?#(.*?)['"]?\)$/;let P$=(()=>{class r extends x${constructor(e,o,a,c,d){super(e),this._iconRegistry=o,this._location=c,this._errorHandler=d,this._inline=!1,this._currentIconFetch=l.EMPTY,a||e.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(e){this._inline=Ft(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const o=this._cleanupFontValue(e);o!==this._fontSet&&(this._fontSet=o,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const o=this._cleanupFontValue(e);o!==this._fontIcon&&(this._fontIcon=o,this._updateFontIconClasses())}_splitIconName(e){if(!e)return["",""];const o=e.split(":");switch(o.length){case 1:return["",o[0]];case 2:return o;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const o=this._location.getPathname();o!==this._previousPath&&(this._previousPath=o,this._prependPathToReferences(o))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const o=e.querySelectorAll("style");for(let c=0;c<o.length;c++)o[c].textContent+=" ";const a=this._location.getPathname();this._previousPath=a,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(a),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let o=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();o--;){const a=e.childNodes[o];(1!==a.nodeType||"svg"===a.nodeName.toLowerCase())&&a.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,o=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();o!=this._previousFontSetClass&&(this._previousFontSetClass&&e.classList.remove(this._previousFontSetClass),o&&e.classList.add(o),this._previousFontSetClass=o),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const o=this._elementsWithExternalReferences;o&&o.forEach((a,c)=>{a.forEach(d=>{c.setAttribute(d.name,`url('${e}#${d.value}')`)})})}_cacheChildrenWithExternalReferences(e){const o=e.querySelectorAll(k$),a=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let c=0;c<o.length;c++)lN.forEach(d=>{const p=o[c],g=p.getAttribute(d),v=g?g.match(N$):null;if(v){let E=a.get(p);E||(E=[],a.set(p,E)),E.push({name:d,value:v[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[o,a]=this._splitIconName(e);o&&(this._svgNamespace=o),a&&(this._svgName=a),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(a,o).pipe(Rn(1)).subscribe(c=>this._setSvgElement(c),c=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${o}:${a}! ${c.message}`))})}}}return r.\u0275fac=function(e){return new(e||r)(X(It),X(ab),P("aria-hidden"),X(A$),X(qa))},r.\u0275cmp=Qt({type:r,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(e,o){2&e&&(ni("data-mat-icon-type",o._usingFontIcon()?"font":"svg")("data-mat-icon-name",o._svgName||o.fontIcon)("data-mat-icon-namespace",o._svgNamespace||o.fontSet),Li("mat-icon-inline",o.inline)("mat-icon-no-color","primary"!==o.color&&"accent"!==o.color&&"warn"!==o.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[st],ngContentSelectors:S$,decls:1,vars:0,template:function(e,o){1&e&&(Fn(),Oi(0))},styles:[".mat-icon{-webkit-user-select:none;-moz-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),r})(),Hw=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({imports:[[Mt],Mt]}),r})();const cN=new xe("CdkAccordion");let L$=0,F$=(()=>{class r{constructor(e,o,a){this.accordion=e,this._changeDetectorRef=o,this._expansionDispatcher=a,this._openCloseAllSubscription=l.EMPTY,this.closed=new Pt,this.opened=new Pt,this.destroyed=new Pt,this.expandedChange=new Pt,this.id="cdk-accordion-child-"+L$++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=a.listen((c,d)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===d&&this.id!==c&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}get expanded(){return this._expanded}set expanded(e){e=Ft(e),this._expanded!==e&&(this._expanded=e,this.expandedChange.emit(e),e?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(e){this._disabled=Ft(e)}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(e=>{this.disabled||(this.expanded=e)})}}return r.\u0275fac=function(e){return new(e||r)(X(cN,12),X(Bn),X(Vw))},r.\u0275dir=Ge({type:r,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[Rt([{provide:cN,useValue:void 0}])]}),r})(),B$=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({}),r})();const V$=["body"];function H$(r,t){}const U$=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],G$=["mat-expansion-panel-header","*","mat-action-row"];function j$(r,t){1&r&&Gi(0,"span",2),2&r&&ri("@indicatorRotate",vr()._getExpandedState())}const W$=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],z$=["mat-panel-title","mat-panel-description","*"],uN=new xe("MAT_ACCORDION"),dN="225ms cubic-bezier(0.4,0.0,0.2,1)",hN={indicatorRotate:nr("indicatorRotate",[Ri("collapsed, void",wt({transform:"rotate(0deg)"})),Ri("expanded",wt({transform:"rotate(180deg)"})),Wi("expanded <=> collapsed, void => collapsed",Ki(dN))]),bodyExpansion:nr("bodyExpansion",[Ri("collapsed, void",wt({height:"0px",visibility:"hidden"})),Ri("expanded",wt({height:"*",visibility:"visible"})),Wi("expanded <=> collapsed, void => collapsed",Ki(dN))])};let Y$=(()=>{class r{constructor(e){this._template=e}}return r.\u0275fac=function(e){return new(e||r)(X(br))},r.\u0275dir=Ge({type:r,selectors:[["ng-template","matExpansionPanelContent",""]]}),r})(),X$=0;const pN=new xe("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let fN=(()=>{class r extends F${constructor(e,o,a,c,d,p,g){super(e,o,a),this._viewContainerRef=c,this._animationMode=p,this._hideToggle=!1,this.afterExpand=new Pt,this.afterCollapse=new Pt,this._inputChanges=new Se,this._headerId="mat-expansion-panel-header-"+X$++,this._bodyAnimationDone=new Se,this.accordion=e,this._document=d,this._bodyAnimationDone.pipe(kT((v,E)=>v.fromState===E.fromState&&v.toState===E.toState)).subscribe(v=>{"void"!==v.fromState&&("expanded"===v.toState?this.afterExpand.emit():"collapsed"===v.toState&&this.afterCollapse.emit())}),g&&(this.hideToggle=g.hideToggle)}get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(e){this._hideToggle=Ft(e)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(e){this._togglePosition=e}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this.opened.pipe(Js(null),un(()=>this.expanded&&!this._portal),Rn(1)).subscribe(()=>{this._portal=new Ug(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(e){this._inputChanges.next(e)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const e=this._document.activeElement,o=this._body.nativeElement;return e===o||o.contains(e)}return!1}}return r.\u0275fac=function(e){return new(e||r)(X(uN,12),X(Bn),X(Vw),X(hr),X(Kt),X(wo,8),X(pN,8))},r.\u0275cmp=Qt({type:r,selectors:[["mat-expansion-panel"]],contentQueries:function(e,o,a){if(1&e&&Qi(a,Y$,5),2&e){let c;Ht(c=Ut())&&(o._lazyContent=c.first)}},viewQuery:function(e,o){if(1&e&&Kn(V$,5),2&e){let a;Ht(a=Ut())&&(o._body=a.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(e,o){2&e&&Li("mat-expanded",o.expanded)("_mat-animation-noopable","NoopAnimations"===o._animationMode)("mat-expansion-panel-spacing",o._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[Rt([{provide:uN,useValue:void 0}]),st,vn],ngContentSelectors:G$,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(e,o){1&e&&(Fn(U$),Oi(0),it(1,"div",0,1),ci("@bodyExpansion.done",function(c){return o._bodyAnimationDone.next(c)}),it(3,"div",2),Oi(4,1),er(5,H$,0,0,"ng-template",3),nt(),Oi(6,2),nt()),2&e&&($t(1),ri("@bodyExpansion",o._getExpandedState())("id",o.id),ni("aria-labelledby",o._headerId),$t(4),ri("cdkPortalOutlet",o._portal))},directives:[Ow],styles:[".mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row button.mat-button-base,.mat-action-row button.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row button.mat-button-base,[dir=rtl] .mat-action-row button.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[hN.bodyExpansion]},changeDetection:0}),r})();class $${}const K$=xd($$);let J$=(()=>{class r extends K${constructor(e,o,a,c,d,p,g){super(),this.panel=e,this._element=o,this._focusMonitor=a,this._changeDetectorRef=c,this._animationMode=p,this._parentChangeSubscription=l.EMPTY;const v=e.accordion?e.accordion._stateChanges.pipe(un(E=>!(!E.hideToggle&&!E.togglePosition))):co;this.tabIndex=parseInt(g||"")||0,this._parentChangeSubscription=Cr(e.opened,e.closed,v,e._inputChanges.pipe(un(E=>!!(E.hideToggle||E.disabled||E.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),e.closed.pipe(un(()=>e._containsFocus())).subscribe(()=>a.focusVia(o,"program")),d&&(this.expandedHeight=d.expandedHeight,this.collapsedHeight=d.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const e=this._isExpanded();return e&&this.expandedHeight?this.expandedHeight:!e&&this.collapsedHeight?this.collapsedHeight:null}_keydown(e){switch(e.keyCode){case 32:case 13:ys(e)||(e.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(e))}}focus(e,o){e?this._focusMonitor.focusVia(this._element,e,o):this._element.nativeElement.focus(o)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(e=>{e&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return r.\u0275fac=function(e){return new(e||r)(X(fN,1),X(It),X(Es),X(Bn),X(pN,8),X(wo,8),P("tabindex"))},r.\u0275cmp=Qt({type:r,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(e,o){1&e&&ci("click",function(){return o._toggle()})("keydown",function(c){return o._keydown(c)}),2&e&&(ni("id",o.panel._headerId)("tabindex",o.tabIndex)("aria-controls",o._getPanelId())("aria-expanded",o._isExpanded())("aria-disabled",o.panel.disabled),Ko("height",o._getHeaderHeight()),Li("mat-expanded",o._isExpanded())("mat-expansion-toggle-indicator-after","after"===o._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===o._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===o._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[st],ngContentSelectors:z$,decls:5,vars:1,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(e,o){1&e&&(Fn(W$),it(0,"span",0),Oi(1),Oi(2,1),Oi(3,2),nt(),er(4,j$,1,1,"span",1)),2&e&&($t(4),ri("ngIf",o._showToggle()))},directives:[Qc],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;margin-right:16px}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-keyboard-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-program-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:hover:not([aria-disabled=true])::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;border:3px solid;border-radius:4px;content:""}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}\n'],encapsulation:2,data:{animation:[hN.indicatorRotate]},changeDetection:0}),r})(),Q$=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=Ge({type:r,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]}),r})(),Z$=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({imports:[[Hr,Mt,B$,lu]]}),r})();const q$=function(r){return["/","automation","loadexample",r]};function eK(r,t){if(1&r&&(it(0,"a",15),it(1,"mat-icon"),xi(2," https "),nt(),xi(3),nt()),2&r){const e=t.index,o=t.$implicit;ri("routerLink",np(3,q$,o.id)),$t(3),zm(" ",e+1," ",o.description,"")}}function tK(r,t){if(1&r){const e=Jh();it(0,"button",16),ci("click",function(){return cs(e),vr(),Ws(2).toggle()}),it(1,"mat-icon",17),xi(2,"menu"),nt(),nt()}}let iK=(()=>{class r{constructor(e,o){this.breakpointObserver=e,this.loadDemo=o,this.demoBlocks=[],this.isHandset$=this.breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)").pipe(He(a=>a.matches),function(r,t,e){let c,d=!1;return c=1/0,qo({connector:()=>new GX(c,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:d})}())}ngOnInit(){this.loadDemo.getDemoBlocks().subscribe(e=>{this.demoBlocks=e.sort((o,a)=>o.description.localeCompare(a.description))})}}return r.\u0275fac=function(e){return new(e||r)(X(HX),X(xT))},r.\u0275cmp=Qt({type:r,selectors:[["app-primary-navig"]],decls:54,vars:16,consts:[[1,"sidenav-container"],["fixedInViewport","",1,"sidenav",3,"mode","opened"],["drawer",""],["mat-list-item","","routerLink","/"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation","target","_blank"],["mat-list-item","","href","https://ignatandrei.github.io/BlocklyAutomation","target","_blank"],["mat-list-item","","target","_blank",3,"routerLink",4,"ngFor","ngForOf"],["color","primary"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click",4,"ngIf"],[1,"example-spacer"],["id","download","mat-button","",3,"matMenuTriggerFor"],["download","matMenu"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseBlocklyAutomation.zip/","target","_blank"],["mat-button","",3,"matMenuTriggerFor"],["examples","matMenu"],["mat-list-item","","target","_blank",3,"routerLink"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click"],["aria-label","Side nav toggle icon"]],template:function(e,o){if(1&e&&(it(0,"mat-sidenav-container",0),it(1,"mat-sidenav",1,2),rp(3,"async"),rp(4,"async"),rp(5,"async"),it(6,"mat-toolbar"),it(7,"a",3),xi(8,"Menu"),nt(),nt(),it(9,"mat-nav-list"),it(10,"a",4),it(11,"mat-icon"),xi(12," source "),nt(),xi(13," Github"),nt(),Gi(14,"mat-divider"),it(15,"a",5),it(16,"mat-icon"),xi(17," https "),nt(),xi(18," Demo online"),nt(),Gi(19,"mat-divider"),it(20,"mat-expansion-panel"),it(21,"mat-expansion-panel-header"),it(22,"mat-panel-title"),xi(23),nt(),nt(),er(24,eK,4,5,"a",6),nt(),nt(),nt(),it(25,"mat-sidenav-content"),it(26,"mat-toolbar",7),er(27,tK,3,0,"button",8),rp(28,"async"),it(29,"span"),xi(30,"Automation per Blockly "),nt(),Gi(31,"span",9),it(32,"button",10),it(33,"mat-icon"),xi(34," file_download "),nt(),nt(),it(35,"mat-menu",null,11),it(37,"a",12),xi(38," Download "),nt(),nt(),it(39,"button",13),it(40,"mat-icon"),xi(41," source "),nt(),nt(),it(42,"mat-menu",null,14),it(44,"a",4),it(45,"mat-icon"),xi(46," source "),nt(),xi(47," Github"),nt(),Gi(48,"mat-divider"),it(49,"a",5),it(50,"mat-icon"),xi(51," https "),nt(),xi(52," Demo online"),nt(),nt(),nt(),Gi(53,"router-outlet"),nt(),nt()),2&e){const a=Ws(36),c=Ws(43);$t(1),ri("mode",op(4,10,o.isHandset$)?"over":"side")("opened",!1===op(5,12,o.isHandset$)),ni("role",op(3,8,o.isHandset$)?"dialog":"navigation"),$t(22),ol(" Demos ",o.demoBlocks.length," "),$t(1),ri("ngForOf",o.demoBlocks),$t(3),ri("ngIf",op(28,14,o.isHandset$)),$t(5),ri("matMenuTriggerFor",a),$t(7),ri("matMenuTriggerFor",c)}},directives:[Y1,z1,o$,v$,Mg,_$,P$,s$,fN,J$,Q$,pC,Bw,Qc,Dw,B1,N1,oT],pipes:[XI],styles:[".sidenav-container[_ngcontent-%COMP%]{height:100%}.sidenav[_ngcontent-%COMP%]{width:200px}.sidenav[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{background:inherit}.mat-toolbar.mat-primary[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}"]}),r})(),nK=(()=>{class r{constructor(e,o){var a,c;this.titleService=e,this.title="AutoBlocklyApp",console.log(null===(a=o.settings)||void 0===a?void 0:a.title),this.titleService.setTitle((null===(c=o.settings)||void 0===c?void 0:c.title)||"")}}return r.\u0275fac=function(e){return new(e||r)(X(dx),X(bv))},r.\u0275cmp=Qt({type:r,selectors:[["app-root"]],decls:1,vars:0,template:function(e,o){1&e&&Gi(0,"app-primary-navig")},directives:[iK],styles:[""]}),r})(),Uw=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({imports:[[Hr,Mt,Fg],Mt]}),r})();const hK={provide:new xe("mat-autocomplete-scroll-strategy"),deps:[ka],useFactory:function(r){return()=>r.scrollStrategies.reposition()}};let mK=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({providers:[hK],imports:[[uu,$v,Mt,Hr],nc,$v,Mt]}),r})(),_K=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({imports:[[Rv,Mt],Mt]}),r})(),vK=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({imports:[[uu,Mt,lu],Mt]}),r})(),SK=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({imports:[[Mt,Oa],Mt]}),r})(),DK=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({imports:[[Mt],Mt]}),r})(),TN=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({}),r})(),BK=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({imports:[[Oa,Mt,Fg,TN],Mt,TN]}),r})();const RN=new xe("mat-chips-default-options");let QK=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({providers:[Yv,{provide:RN,useValue:{separatorKeyCodes:[13]}}],imports:[[Mt]]}),r})(),ZK=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({imports:[[xp]]}),r})(),jw=(()=>{class r{constructor(){this.changes=new Se,this.optionalLabel="Optional",this.completedLabel="Completed",this.editableLabel="Editable"}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const cJ={provide:jw,deps:[[new Ln,new gr,jw]],useFactory:function(r){return r||new jw}};let uJ=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({providers:[cJ,Yv],imports:[[Mt,Hr,lu,Ad,ZK,Hw,Oa],Mt]}),r})(),IN=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({imports:[[Rp]]}),r})(),hJ=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({providers:[Yv],imports:[[IN,Uw,Mt],IN,Uw]}),r})(),gJ=(()=>{class r{constructor(){this.changes=new Se,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 24 years",this.nextMultiYearLabel="Next 24 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year"}formatYearRange(e,o){return`${e} \u2013 ${o}`}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const SJ={provide:new xe("mat-datepicker-scroll-strategy"),deps:[ka],useFactory:function(r){return()=>r.scrollStrategies.reposition()}};let xJ=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({providers:[gJ,SJ],imports:[[Hr,Ad,uu,Rv,lu,Mt],nc]}),r})();function AJ(r,t){}class Ww{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0}}const OJ={dialogContainer:nr("dialogContainer",[Ri("void, exit",wt({opacity:0,transform:"scale(0.7)"})),Ri("enter",wt({transform:"none"})),Wi("* => enter",Ki("150ms cubic-bezier(0, 0, 0.2, 1)",wt({transform:"none",opacity:1}))),Wi("* => void, * => exit",Ki("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",wt({opacity:0})))])};let kJ=(()=>{class r extends Aw{constructor(e,o,a,c,d,p,g,v){super(),this._elementRef=e,this._focusTrapFactory=o,this._changeDetectorRef=a,this._config=d,this._interactivityChecker=p,this._ngZone=g,this._focusMonitor=v,this._animationStateChanged=new Pt,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=E=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(E)),this._ariaLabelledBy=d.ariaLabelledBy||null,this._document=c}_initializeWithAttachedContent(){this._setupFocusTrap(),this._capturePreviouslyFocusedElement()}attachComponentPortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(e)}attachTemplatePortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(e)}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,o){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{e.addEventListener("blur",()=>e.removeAttribute("tabindex")),e.addEventListener("mousedown",()=>e.removeAttribute("tabindex"))})),e.focus(o)}_focusByCssSelector(e,o){let a=this._elementRef.nativeElement.querySelector(e);a&&this._forceFocus(a,o)}_trapFocus(){const e=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||e.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(o=>{o||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const e=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&e&&"function"==typeof e.focus){const o=LT(),a=this._elementRef.nativeElement;(!o||o===this._document.body||o===a||a.contains(o))&&(this._focusMonitor?(this._focusMonitor.focusVia(e,this._closeInteractionType),this._closeInteractionType=null):e.focus())}this._focusTrap&&this._focusTrap.destroy()}_setupFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)}_capturePreviouslyFocusedElement(){this._document&&(this._elementFocusedBeforeDialogWasOpened=LT())}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const e=this._elementRef.nativeElement,o=LT();return e===o||e.contains(o)}}return r.\u0275fac=function(e){return new(e||r)(X(It),X(nk),X(Bn),X(Kt,8),X(Ww),X(VT),X(bi),X(Es))},r.\u0275dir=Ge({type:r,viewQuery:function(e,o){if(1&e&&Kn(Ow,7),2&e){let a;Ht(a=Ut())&&(o._portalOutlet=a.first)}},features:[st]}),r})(),NJ=(()=>{class r extends kJ{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:e,totalTime:o}){"enter"===e?(this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:o})):"exit"===e&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:o}))}_onAnimationStart({toState:e,totalTime:o}){"enter"===e?this._animationStateChanged.next({state:"opening",totalTime:o}):("exit"===e||"void"===e)&&this._animationStateChanged.next({state:"closing",totalTime:o})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}}return r.\u0275fac=function(){let t;return function(o){return(t||(t=pi(r)))(o||r)}}(),r.\u0275cmp=Qt({type:r,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(e,o){1&e&&jm("@dialogContainer.start",function(c){return o._onAnimationStart(c)})("@dialogContainer.done",function(c){return o._onAnimationDone(c)}),2&e&&(jl("id",o._id),ni("role",o._config.role)("aria-labelledby",o._config.ariaLabel?null:o._ariaLabelledBy)("aria-label",o._config.ariaLabel)("aria-describedby",o._config.ariaDescribedBy||null),Ym("@dialogContainer",o._state))},features:[st],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,o){1&e&&er(0,AJ,0,0,"ng-template",0)},directives:[Ow],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[OJ.dialogContainer]}}),r})(),PJ=0;class LJ{constructor(t,e,o="mat-dialog-"+PJ++){this._overlayRef=t,this._containerInstance=e,this.id=o,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new Se,this._afterClosed=new Se,this._beforeClosed=new Se,this._state=0,e._id=o,e._animationStateChanged.pipe(un(a=>"opened"===a.state),Rn(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),e._animationStateChanged.pipe(un(a=>"closed"===a.state),Rn(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),t.keydownEvents().pipe(un(a=>27===a.keyCode&&!this.disableClose&&!ys(a))).subscribe(a=>{a.preventDefault(),kN(this,"keyboard")}),t.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():kN(this,"mouse")})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe(un(e=>"closing"===e.state),Rn(1)).subscribe(e=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(t){let e=this._getPositionStrategy();return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(t="",e=""){return this._overlayRef.updateSize({width:t,height:e}),this._overlayRef.updatePosition(),this}addPanelClass(t){return this._overlayRef.addPanelClass(t),this}removePanelClass(t){return this._overlayRef.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function kN(r,t,e){return void 0!==r._containerInstance&&(r._containerInstance._closeInteractionType=t),r.close(e)}const FJ=new xe("MatDialogData"),BJ=new xe("mat-dialog-default-options"),NN=new xe("mat-dialog-scroll-strategy"),HJ={provide:NN,deps:[ka],useFactory:function(r){return()=>r.scrollStrategies.block()}};let UJ=(()=>{class r{constructor(e,o,a,c,d,p,g,v,E,D){this._overlay=e,this._injector=o,this._defaultOptions=a,this._parentDialog=c,this._overlayContainer=d,this._dialogRefConstructor=g,this._dialogContainerType=v,this._dialogDataToken=E,this._animationMode=D,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Se,this._afterOpenedAtThisLevel=new Se,this._ariaHiddenElements=new Map,this._dialogAnimatingOpen=!1,this.afterAllClosed=K_(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Js(void 0))),this._scrollStrategy=p}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(e,o){if(o=function(r,t){return ht(ht({},t),r)}(o,this._defaultOptions||new Ww),o.id&&this.getDialogById(o.id),this._dialogAnimatingOpen)return this._lastDialogRef;const a=this._createOverlay(o),c=this._attachDialogContainer(a,o);if("NoopAnimations"!==this._animationMode){const p=c._animationStateChanged.subscribe(g=>{"opening"===g.state&&(this._dialogAnimatingOpen=!0),"opened"===g.state&&(this._dialogAnimatingOpen=!1,p.unsubscribe())});this._animationStateSubscriptions||(this._animationStateSubscriptions=new l),this._animationStateSubscriptions.add(p)}const d=this._attachDialogContent(e,c,a,o);return this._lastDialogRef=d,this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(d),d.afterClosed().subscribe(()=>this._removeOpenDialog(d)),this.afterOpened.next(d),c._initializeWithAttachedContent(),d}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(o=>o.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._animationStateSubscriptions&&this._animationStateSubscriptions.unsubscribe()}_createOverlay(e){const o=this._getOverlayConfig(e);return this._overlay.create(o)}_getOverlayConfig(e){const o=new qv({positionStrategy:this._overlay.position().global(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(o.backdropClass=e.backdropClass),o}_attachDialogContainer(e,o){const c=tn.create({parent:o&&o.viewContainerRef&&o.viewContainerRef.injector||this._injector,providers:[{provide:Ww,useValue:o}]}),d=new xw(this._dialogContainerType,o.viewContainerRef,c,o.componentFactoryResolver);return e.attach(d).instance}_attachDialogContent(e,o,a,c){const d=new this._dialogRefConstructor(a,o,c.id);if(e instanceof br)o.attachTemplatePortal(new Ug(e,null,{$implicit:c.data,dialogRef:d}));else{const p=this._createInjector(c,d,o),g=o.attachComponentPortal(new xw(e,c.viewContainerRef,p));d.componentInstance=g.instance}return d.updateSize(c.width,c.height).updatePosition(c.position),d}_createInjector(e,o,a){const c=e&&e.viewContainerRef&&e.viewContainerRef.injector,d=[{provide:this._dialogContainerType,useValue:a},{provide:this._dialogDataToken,useValue:e.data},{provide:this._dialogRefConstructor,useValue:o}];return e.direction&&(!c||!c.get(Ia,null,xt.Optional))&&d.push({provide:Ia,useValue:{value:e.direction,change:zt()}}),tn.create({parent:c||this._injector,providers:d})}_removeOpenDialog(e){const o=this.openDialogs.indexOf(e);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((a,c)=>{a?c.setAttribute("aria-hidden",a):c.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const o=e.parentElement.children;for(let a=o.length-1;a>-1;a--){let c=o[a];c!==e&&"SCRIPT"!==c.nodeName&&"STYLE"!==c.nodeName&&!c.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(c,c.getAttribute("aria-hidden")),c.setAttribute("aria-hidden","true"))}}}_closeDialogs(e){let o=e.length;for(;o--;)e[o].close()}}return r.\u0275fac=function(e){Kh()},r.\u0275dir=Ge({type:r}),r})(),GJ=(()=>{class r extends UJ{constructor(e,o,a,c,d,p,g,v){super(e,o,c,p,g,d,LJ,NJ,FJ,v)}}return r.\u0275fac=function(e){return new(e||r)(Oe(ka),Oe(tn),Oe(og,8),Oe(BJ,8),Oe(NN),Oe(r,12),Oe(Pw),Oe(wo,8))},r.\u0275prov=rt({token:r,factory:r.\u0275fac}),r})(),WJ=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({providers:[GJ,HJ],imports:[[uu,lu,Mt],Mt]}),r})(),XJ=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({imports:[[Xv,Mt],Xv,Mt]}),r})();const ZJ={provide:new xe("mat-select-scroll-strategy"),deps:[ka],useFactory:function(r){return()=>r.scrollStrategies.reposition()}};let FN=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({providers:[ZJ],imports:[[Hr,uu,$v,Mt],nc,Uw,$v,Mt]}),r})();const iQ={provide:new xe("mat-tooltip-scroll-strategy"),deps:[ka],useFactory:function(r){return()=>r.scrollStrategies.reposition({scrollThrottle:20})}};let BN=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({providers:[iQ],imports:[[Rv,Hr,uu,Mt],Mt,nc]}),r})(),zw=(()=>{class r{constructor(){this.changes=new Se,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(e,o,a)=>{if(0==a||0==o)return`0 of ${a}`;const c=e*o;return`${c+1} \u2013 ${c<(a=Math.max(a,0))?Math.min(c+o,a):c+o} of ${a}`}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const lQ={provide:zw,deps:[[new Ln,new gr,zw]],useFactory:function(r){return r||new zw}};let cQ=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({providers:[lQ],imports:[[Hr,Ad,FN,BN,Mt]]}),r})(),dQ=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({imports:[[Hr,Mt],Mt]}),r})();function hQ(r,t){if(1&r&&(Il(),Gi(0,"circle",3)),2&r){const e=vr();Ko("animation-name","mat-progress-spinner-stroke-rotate-"+e._spinnerAnimationLabel)("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%"),ni("r",e._getCircleRadius())}}function pQ(r,t){if(1&r&&(Il(),Gi(0,"circle",3)),2&r){const e=vr();Ko("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%"),ni("r",e._getCircleRadius())}}const gQ=au(class{constructor(r){this._elementRef=r}},"primary"),mQ=new xe("mat-progress-spinner-default-options",{providedIn:"root",factory:function(){return{diameter:100}}});class du extends gQ{constructor(t,e,o,a,c){super(t),this._document=o,this._diameter=100,this._value=0,this.mode="determinate";const d=du._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),d.has(o.head)||d.set(o.head,new Set([100])),this._noopAnimations="NoopAnimations"===a&&!!c&&!c._forceAnimations,c&&(c.diameter&&(this.diameter=c.diameter),c.strokeWidth&&(this.strokeWidth=c.strokeWidth))}get diameter(){return this._diameter}set diameter(t){this._diameter=To(t),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(t){this._strokeWidth=To(t)}get value(){return"determinate"===this.mode?this._value:0}set value(t){this._value=Math.max(0,Math.min(100,To(t)))}ngOnInit(){const t=this._elementRef.nativeElement;this._styleRoot=JO(t)||this._document.head,this._attachStyleNode(),t.classList.add("mat-progress-spinner-indeterminate-animation")}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const t=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${t} ${t}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_attachStyleNode(){const t=this._styleRoot,e=this._diameter,o=du._diameters;let a=o.get(t);if(!a||!a.has(e)){const c=this._document.createElement("style");c.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),c.textContent=this._getAnimationText(),t.appendChild(c),a||(a=new Set,o.set(t,a)),a.add(e)}}_getAnimationText(){const t=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*t).replace(/END_VALUE/g,""+.2*t).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}du._diameters=new WeakMap,du.\u0275fac=function(t){return new(t||du)(X(It),X(so),X(Kt,8),X(wo,8),X(mQ))},du.\u0275cmp=Qt({type:du,selectors:[["mat-progress-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner"],hostVars:10,hostBindings:function(t,e){2&t&&(ni("aria-valuemin","determinate"===e.mode?0:null)("aria-valuemax","determinate"===e.mode?100:null)("aria-valuenow","determinate"===e.mode?e.value:null)("mode",e.mode),Ko("width",e.diameter,"px")("height",e.diameter,"px"),Li("_mat-animation-noopable",e._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[st],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(t,e){1&t&&(Il(),it(0,"svg",0),er(1,hQ,1,9,"circle",1),er(2,pQ,1,7,"circle",2),nt()),2&t&&(Ko("width",e.diameter,"px")("height",e.diameter,"px"),ri("ngSwitch","indeterminate"===e.mode),ni("viewBox",e._getViewBox()),$t(1),ri("ngSwitchCase",!0),$t(1),ri("ngSwitchCase",!1))},directives:[I_,WI],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transform-origin:center;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}\n"],encapsulation:2,changeDetection:0});let bQ=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({imports:[[Mt,Hr],Mt]}),r})(),OQ=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({imports:[[Oa,Mt],Mt]}),r})(),jN=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({imports:[[Hr,Mt],Mt]}),r})(),WN=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({}),r})(),iZ=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({imports:[[WN,Oa,Mt,Fg],WN,Mt]}),r})(),oZ=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({imports:[[uu,lu,Hr,Ad,Mt],Mt]}),r})(),$w=(()=>{class r{constructor(){this.changes=new Se}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=rt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const lZ={provide:$w,deps:[[new Ln,new gr,$w]],useFactory:function(r){return r||new $w}};let cZ=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({providers:[lZ],imports:[[Hr,Mt]]}),r})(),TZ=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({imports:[[kw]]}),r})(),HZ=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({imports:[[TZ,Mt],Mt]}),r})(),YZ=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({imports:[[Hr,Mt,lu,Oa,Fg,Rv],Mt]}),r})(),QZ=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({}),r})(),oq=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r}),r.\u0275inj=pt({imports:[[QZ,Mt],Mt]}),r})(),sq=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=bt({type:r,bootstrap:[nK]}),r.\u0275inj=pt({providers:[bv,{provide:ap,useFactory:aq,deps:[bv],multi:!0}],imports:[[ux,LX,lz,pY,jN,Ad,n7,mK,_K,vK,Ad,SK,DK,BK,QK,uJ,xJ,WJ,Q1,Z$,XJ,Hw,hJ,nN,IX,TY,cQ,dQ,bQ,OQ,Oa,FN,X1,jN,iZ,oZ,cZ,HZ,YZ,$1,BN,oq,$1,Ad,X1,Hw,nN]]}),r})();function aq(r){return()=>r.Init()}(function(){if(DM)throw new Error("Cannot enable prod mode after platform setup.");SM=!1})(),qj().bootstrapModule(sq).catch(r=>console.error(r))},84575:(T,I,m)=>{T.exports={interpreterHelper:m(19203),saveBlocksUrl:m(83435),saveLoad:m(82008)}},19203:(T,I,m)=>{I.createInterpreter=function(y,S){return{latestCode:"",workspace:y,BlocklyJavaScript:S,step:0,highlightPause:!1,myInterpreter:null,runner:null,generateCodeAndLoadIntoInterpreter:function(){this.BlocklyJavaScript.STATEMENT_PREFIX="highlightBlock(%1);\n",this.BlocklyJavaScript.addReservedWords("highlightBlock"),this.latestCode=this.BlocklyJavaScript.workspaceToCode(y),this.resetStepUi(!0)},resetStepUi:function(s){this.step=0,this.workspace.highlightBlock(null),this.highlightPause=!1},resetInterpreter:function(){this.myInterpreter=null,this.runner&&(window.clearTimeout(this.runner),this.runner=null)},highlightBlock:function(s){this.workspace.highlightBlock(s),highlightPause=!0},runCode:function(s,n,l){this.myInterpreter||this.resetStepUi(!0),this.generateCodeAndLoadIntoInterpreter();var u=this;setTimeout(function(){this.highlightPause=!1,u.myInterpreter=s(u.latestCode,(h,_)=>u.initApiJS(h,_,u,n,l)),u.runner=function(){u.myInterpreter&&(u.myInterpreter.run()?setTimeout(u.runner,10):(l?l():console.log("\n\n<< Program complete >>"),u.resetInterpreter(),u.resetStepUi(!1)))},u.runner&&u.runner()},100)},initInterpreterWaitForSeconds:function(s,n){this.BlocklyJavaScript.addReservedWords("waitForSeconds");var l=s.createAsyncFunction(function(u,h){setTimeout(h,1e3*u)});s.setProperty(n,"waitForSeconds",l)},doGet:function(s,n,l,u){console.log(s,n);let h=new XMLHttpRequest;if(h.open("GET",s,!0),h.withCredentials=u,l&&l.length>0)for(var _=0;_<l.length;_++){var b=l[_];h.setRequestHeader(b.name,b.value)}h.onreadystatechange=function(){if(4==h.readyState){if(h.status>=200&&h.status<300){var R=JSON.stringify({origHref:s,objectToSend:"",status:h.status,statusOK:!0,text:h.responseText});return n(R)}return R=JSON.stringify({origHref:s,objectToSend:"",status:h.status,statusOK:!1,text:h.responseText}),n(R)}},h.send(null)},exportToFile:function(s,n,l){var h,u=m(48086);return h=l?this.b64toBlob(n):new Blob([n],{type:"text/plain;charset=utf-8"}),u.saveAs(h,s),s},b64toBlob:function(s,n="",l=512){const u=atob(s),h=[];for(let b=0;b<u.length;b+=l){const R=u.slice(b,b+l),O=new Array(R.length);for(let W=0;W<R.length;W++)O[W]=R.charCodeAt(W);const H=new Uint8Array(O);h.push(H)}return new Blob(h,{type:n})},displayDateCurrentAsHuman:function(){return(new Date).toLocaleDateString(void 0,{day:"numeric",month:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})},displayDateCurrentAsIso:function(){return(new Date).toISOString()},displayDateCurrentAsUnix:function(){return Date.now()},displayDateFormatted:function(s){switch(s){case"human":return this.displayDateCurrentAsHuman();case"iso":return this.displayDateCurrentAsIso();case"unix":return this.displayDateCurrentAsUnix();default:console.log("Date time format not suported")}},doPut:(s,n,l)=>{let u=n,h=new XMLHttpRequest;h.open("PUT",s,!0),h.setRequestHeader("Content-Type","application/json;charset=UTF-8"),h.onreadystatechange=function(){if(4==h.readyState){if(h.status>=200&&h.status<300){var _=JSON.stringify({origHref:s,objectToSend:n,status:h.status,statusOK:!0,text:h.responseText});return l(_)}return _=JSON.stringify({origHref:s,objectToSend:n,status:h.status,statusOK:!1,text:h.responseText}),l(_)}},h.send(u)},doDelete:(s,n)=>{var l=new XMLHttpRequest;l.open("DELETE",s,!0),l.onreadystatechange=function(){if(4==l.readyState){if(l.status>=200&&l.status<300){var u=JSON.stringify({origHref:s,objectToSend:"",status:l.status,statusOK:!0,text:l.responseText});return n(u)}return u=JSON.stringify({origHref:s,objectToSend:"",status:l.status,statusOK:!1,text:l.responseText}),n(u)}},l.send(null)},doPost:function(s,n,l){let u=n,h=new XMLHttpRequest;h.open("POST",s,!0),h.setRequestHeader("Content-Type","application/json;charset=UTF-8"),h.onreadystatechange=function(){if(4==h.readyState){if(h.status>=200&&h.status<300){var _=JSON.stringify({origHref:s,objectToSend:n,status:h.status,statusOK:!0,text:h.responseText});return l(_)}return _=JSON.stringify({origHref:s,objectToSend:n,status:h.status,statusOK:!1,text:h.responseText}),l(_)}},h.send(u)},initApiJS:function(s,n,l,u,h){s.setProperty(n,"errHandler",s.createNativeFunction(_=O=>{u?u("\n error --\n"+O+"\n error --"):console.log(O)}));var b=s.nativeToPseudo({"(localSite)":!1});s.setProperty(n,"withCredsForDomain",b);var R=s.nativeToPseudo({"(localSite)":[]});s.setProperty(n,"headersForDomain",R),s.setProperty(n,"alert",s.createNativeFunction(_=function(O){O=O?O.toString():"",u?u(O):console.log(O)})),s.setProperty(n,"waitTime",s.createAsyncFunction(_=(O,H)=>{console.log(`waiting seconds ${O}`),setTimeout(H,1e3*O)})),s.setProperty(n,"displayDateFormatted",s.createNativeFunction(_=O=>l.displayDateFormatted(O))),s.setProperty(n,"exportToFile",s.createNativeFunction(_=(O,H,W)=>l.exportToFile(O,H,W))),s.setProperty(n,"convertToCSV",s.createNativeFunction(_=O=>{let H="object"!=typeof O?JSON.parse(O):{};return H=[Object.keys(H[0])].concat(H),H.map(G=>Object.values(G).toString()).join("\n")})),s.setProperty(n,"open",s.createNativeFunction(_=function(O){window.open(O)}));var _=function(O){return O=O?O.toString():"",s.createPrimitive(prompt(O))};s.setProperty(n,"prompt",s.createNativeFunction(_)),l.BlocklyJavaScript.addReservedWords("waitForSeconds"),_=s.createAsyncFunction(function(O,H){setTimeout(H,1e3*O)}),s.setProperty(n,"waitForSeconds",_),_=(O,H)=>{var W=s.pseudoToNative(b),G=s.pseudoToNative(R),Z="(localSite)";(O.startsWith("http://")||O.startsWith("https://"))&&(Z=new URL(O).hostname);var Q=!1,Y=[];return Z in G&&(Y=G[Z]),Z in W&&(Q=W[Z]),l.doGet(O,H,Y,Q)},s.setProperty(n,"getXhr",s.createAsyncFunction(_)),_=(O,H,W)=>{try{s.pseudoToNative(R);(O.startsWith("http://")||O.startsWith("https://"))&&new URL(O).hostname,l.doPost(O,H,W)}catch(Y){alert("is an error"+Y)}},s.setProperty(n,"postXhr",s.createAsyncFunction(_)),_=(O,H)=>{try{s.pseudoToNative(R);(O.startsWith("http://")||O.startsWith("https://"))&&new URL(O).hostname,l.doDelete(O,H)}catch(Q){alert("is an error"+Q)}},s.setProperty(n,"deleteXhr",s.createAsyncFunction(_)),_=(O,H,W)=>{try{var G=s.pseudoToNative(R),Z="(localSite)";(O.startsWith("http://")||O.startsWith("https://"))&&(Z=new URL(O).hostname);var Q=[];Z in G&&(Q=G[Z]),l.doPut(O,H,W,Q,!1)}catch(ue){alert("is an error"+ue)}},s.setProperty(n,"putXhr",s.createAsyncFunction(_)),_=function(O){return O=O?O.toString():"",s.createPrimitive(l.highlightBlock(O))},s.setProperty(n,"highlightBlock",s.createNativeFunction(_))}}}},83435:(T,I)=>{I.saveState=function(S,s){var l=S.workspaceToDom(s,!0),u=S.domToPrettyText(l);window.localStorage.setItem("BlocklyState",u)},I.restoreState=function(S,s){var l=window.localStorage.getItem("BlocklyState");if(l.length>62){var u=S.textToDom(l);S.clearWorkspaceAndLoadFromXml(u,s)}return""}},82008:(T,I,m)=>{var y=m(48086);I.DownloadBlocks=function(S,s,n){var l=S.workspaceToDom(s,!0),u=S.domToPrettyText(l),h=new Blob([u],{type:"text/plain;charset=utf-16"});y.saveAs(h,n)},I.LoadFile=function(S,s,n){s.clear();var l=S.textToDom(n);S.domToWorkspace(l,s)}},85135:(T,I)=>{I.definitionBlocks=function(m,y){m.auth0webapidata={init:function(){this.appendDummyInput().appendField("Auth0"),this.appendValueInput("client_id").setCheck(null).appendField("client_id"),this.appendValueInput("client_secret").setCheck(null).appendField("client_secret"),this.appendValueInput("audience").setCheck(null).appendField("audience"),this.appendValueInput("grant_type").setCheck(null).appendField("grant_type"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},y.auth0webapidata=function(n){var b='{"client_id":'+y.valueToCode(n,"client_id",0);return b+=',"client_secret":'+y.valueToCode(n,"client_secret",0),b+=',"audience":'+y.valueToCode(n,"audience",0),b+=',"grant_type":'+y.valueToCode(n,"grant_type",0),[b+="}",99]}},I.fieldXML=function(){return'<category id="Auth0" name="Auth0">\n    <block type="auth0webapidata">\n        <value name="client_id">\n            <shadow type="text">\n                <field name="TEXT">client_id?</field>\n            </shadow>\n\n        </value>\n        <value name="client_secret">\n            <shadow type="text">\n                <field name="TEXT">client_secret?</field>\n            </shadow>\n\n        </value>\n        <value name="audience">\n            <shadow type="text">\n                <field name="TEXT">audience</field>\n            </shadow>\n\n        </value>\n        <value name="grant_type">\n            <shadow type="text">\n                <field name="TEXT">grant_type?</field>\n            </shadow>\n\n        </value>\n    </block>\n</category>\n'}},69570:(T,I)=>{I.definitionBlocks=function(m,y,S){m.comment={init:function(){this.appendValueInput("TEXT").setCheck(null).appendField("comment /* */").appendField(S(""),"NAME"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(""),this.setHelpUrl("")}},y.comment=function(n){return"/*\n"+(y.valueToCode(n,"TEXT",0)||"''")+"\n*/;\n"}},I.fieldXML=function(){return'<block type="comment">\n    <value name="TEXT">\n        <shadow type="text">\n            <field name="TEXT">Put here comments</field>\n        </shadow>\n    </value>\n</block>\n'}},14147:(T,I)=>{I.definitionBlocks=function(m,y){m.converttojson={init:function(){this.appendDummyInput().appendField("ConvertToJSON"),this.appendValueInput("ValueToConvert").setCheck(null),this.setInputsInline(!0),this.setOutput(!0,null),this.setTooltip("Convert to JSON"),this.setHelpUrl("")}},y.converttojson=function(l){return["JSON.parse("+y.valueToCode(l,"ValueToConvert",0)+")",99]},m.converttostring={init:function(){this.appendDummyInput().appendField("ConvertToString"),this.appendValueInput("ValueToConvert").setCheck(null),this.setInputsInline(!0),this.setOutput(!0,null),this.setTooltip("Convert to String"),this.setHelpUrl("")}},y.converttostring=function(l){return["JSON.stringify("+y.valueToCode(l,"ValueToConvert",0)+")",99]},m.convertcsv={init:function(){this.appendDummyInput().appendField("Convert CSV"),this.appendValueInput("ArrayToConvert").setCheck(null).appendField("Array to convert"),this.setOutput(!0,null),this.setTooltip(""),this.setHelpUrl("")}},y.convertcsv=function(l){return["convertToCSV("+y.valueToCode(l,"ArrayToConvert",y.ORDER_ATOMIC)+")",99]}},I.fieldXML=function(){return'<block type="converttojson"></block>\n <block type="converttostring"></block>\n <block type="convertcsv"></block>\n'}},52446:(T,I)=>{I.definitionBlocks=function(m,y,S,s){y.object_from_json=function(F){return[`JSON.parse(${y.valueToCode(F,"JSON",0)})`,99]},y.object_to_json=function(F){return[`JSON.stringify(${y.valueToCode(F,"object",0)})`,99]},y.object_get=function(F){const fe=F.getFieldValue("field_name");return[`${y.valueToCode(F,"object",0)}['${fe}']`,99]},y.object_set=function(F){const fe=F.getFieldValue("field_name");return`${y.valueToCode(F,"object_field",0)}['${fe}'] = ${y.valueToCode(F,"value_field",0)};\n`},y.object_create=function(F){if(!F.numFields)return["{}",99];let fe="";for(let ie=1;ie<=F.numFields;ie++)fe+=`"${F.getFieldValue("field"+ie)}": ${y.valueToCode(F,"field_input"+ie,0)}, `;return[`{ ${fe} }`,99]};const W="object_field",G="object_create_mutator_top",Z="#F99EA3",Q=(F,...fe)=>({object_from_json:"get object from JSON %1",object_from_json_tooltip:"Create object from JSON string.",object_to_json:"generate JSON from object %1",object_to_json_tooltip:"Save object as a JSON string.",object_get_json:"get property %1 %2 of object %3",object_get_json_tooltip:"Get a property of an object.",object_set_json:"set property %1 %2 of object %3 to %4",object_set_json_tooltip:"Set a property of an object.",object_create:"create object",object_create_tooltip:"Create a new object, optionally with some property values.",object_field_name:"property name"}[F]),Y={type:"object_from_json",message0:Q("object_from_json"),args0:[{type:"input_value",name:"JSON",check:"String"}],output:"Object",colour:Z,tooltip:Q("object_from_json_tooltip"),helpUrl:"http://www.json.org/"};m.object_from_json={init:function(){this.jsonInit(Y)}};const ue={type:"object_to_json",message0:Q("object_to_json"),args0:[{type:"input_value",name:"object",check:"Object"}],output:null,colour:Z,tooltip:Q("object_to_json_tooltip"),helpUrl:"http://www.json.org/"};m.object_to_json={init:function(){this.jsonInit(ue)}};const ne={type:"object_get",message0:Q("object_get_json"),args0:[{type:"field_input",name:"field_name",text:"default"},{type:"input_dummy"},{type:"input_value",name:"object",check:"Object",align:"RIGHT"}],output:null,colour:Z,tooltip:Q("object_get_json_tooltip"),helpUrl:""};m.object_get={init:function(){this.jsonInit(ne)}};const he={type:"object_set",message0:Q("object_set_json"),args0:[{type:"field_input",name:"field_name",text:Q("object_field_name")},{type:"input_dummy"},{type:"input_value",name:"object_field",check:"Object",align:"RIGHT"},{type:"input_value",name:"value_field",align:"RIGHT"}],previousStatement:null,nextStatement:null,colour:Z,tooltip:Q("object_set_json_tooltip"),helpUrl:""};m.object_set={init:function(){this.jsonInit(he)}};const te={type:"object_create",message0:Q("object_create"),output:"Object",mutator:"controls_create_mutator",colour:15,tooltip:Q("object_create_tooltip"),helpUrl:""};m.object_create={init:function(){this.jsonInit(te)}};const oe={type:"object_field",message0:"%1 %2",args0:[{type:"field_input",name:"field_name",text:Q("object_field_name")},{type:"input_value",name:"field_value"}],previousStatement:null,nextStatement:null,colour:15,tooltip:"",helpUrl:""};m[W]={init:function(){this.jsonInit(oe)}};const q={type:"object_create_mutator",message0:Q("object_create"),nextStatement:null,colour:15,tooltip:Q("object_create_tooltip"),helpUrl:""};m[G]={init:function(){this.jsonInit(q)}},S.registerMutator("controls_create_mutator",{numFields:0,fields:[],domToMutation:function(F){this.fields=[];for(let K,fe=0;K=F.childNodes[fe];fe++)"field"==K.nodeName.toLowerCase()&&this.fields.push(K.getAttribute("name"));this.numFields=this.fields.length,this.updateShape()},mutationToDom:function(){if(!this.numFields)return null;const F=document.createElement("mutation");F.setAttribute("num_fields",""+this.numFields);for(let fe=0;fe<this.fields.length;fe++){const K=document.createElement("field");K.setAttribute("name",this.fields[fe]),F.appendChild(K)}return F},compose:function(F){let fe=F.nextConnection&&F.nextConnection.targetBlock();this.numFields=0,this.fields=[];let K=[null];for(;fe;)this.fields.push(fe.getFieldValue("field_name")),this.numFields++,K.push(fe.savedConnection),fe=fe.nextConnection&&fe.nextConnection.targetBlock();this.updateShape();for(let ie=1;ie<=this.numFields;ie++)Blockly.Mutator.reconnect(K[ie],this,"field_input"+ie)},decompose:function(F){const fe=F.newBlock(G);fe.initSvg();let K=fe.nextConnection;for(let ie=0;ie<this.fields.length;ie++){const le=F.newBlock(W);le.initSvg(),le.setFieldValue(this.fields[ie],"field_name"),K.connect(le.previousConnection),K=le.nextConnection}return fe},saveConnections:function(F){let fe=F.nextConnection&&F.nextConnection.targetBlock(),K=1;for(;fe;){const ie=this.getInput("field_input"+K);fe.savedConnection=ie&&ie.connection.targetConnection,fe.setFieldValue(this.getFieldValue("field"+K),"field_name"),K++,fe=fe.nextConnection&&fe.nextConnection.targetBlock()}},updateShape:function(){this.getInput("with")&&this.removeInput("with");let F=1;for(;this.getInput("field_input"+F);)this.removeInput("field_input"+F),F++;this.numFields>0&&this.appendDummyInput("with").setAlign(1).appendField("with fields");for(let fe=1;fe<=this.numFields;fe++){const K=this.fields[fe-1];this.appendValueInput("field_input"+fe).setCheck(null).setAlign(1).appendField(s(K),"field"+fe)}}},null,["object_field"])},I.fieldXML=function(){return'    <category name="Objects" id="Objects">\n    <block type="modifyproperty"></block>\n    <block type="getproperty"></block>\n    <block type="object_create"></block>\n    \x3c!--<block type="object_from_json"></block>\n<block type="object_to_json"></block>\n<block type="object_get"></block>\n<block type="object_set"></block>--\x3e\n</category>\n'}},70081:(T,I)=>{I.definitionBlocks=function(m,y,S){m.displayCurrentDate={init:function(){this.appendDummyInput().appendField("Current Date"),this.appendDummyInput().appendField("Pick date format:").appendField(new S([["Unix format","unix"],["ISO format","iso"],["Human format","human"]]),"dateFormat"),this.setOutput(!0,null),this.setColour(100),this.setTooltip("Show current date."),this.setHelpUrl("https://www.w3schools.com/jsref/jsref_obj_date.asp")}};y.displayCurrentDate=l=>{let h="";switch(l.getFieldValue("dateFormat").toString()){case"human":h="displayDateFormatted('human')";break;case"iso":h="displayDateFormatted('iso')";break;case"unix":h="displayDateFormatted('unix')";break;default:console.log("Date time format not suported")}return[h,99]}},I.fieldXML=function(){return'<block type="displayCurrentDate"></block>'}},55126:(T,I)=>{I.definitionBlocks=function(m,y){m.DateFromText={init:function(){this.appendValueInput("VALUE").appendField("Date from "),this.setOutput(!0,null),this.setHelpUrl("https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/parse#Date_Time_String_Format")}},y.DateFromText=s=>["Date.parse("+(y.valueToCode(s,"VALUE",y.ORDER_ATOMIC)||"")+")",99]},I.fieldXML=function(){return'<block type="DateFromText">\n    <value name="VALUE">\n        <shadow type="text">\n            <field name="TEXT">1970-04-16T02:00:00</field>\n        </shadow>\n    </value>\n</block>\n'}},41175:(T,I)=>{I.generalBlocks=function(){return'\n    \n    <category name="BlocklyCore=>">\n\n    <category id="catLogic" colour="210" name="Logic">\n        <block type="controls_if"></block>\n        <block type="logic_compare"></block>\n        <block type="logic_operation"></block>\n        <block type="logic_negate"></block>\n        <block type="logic_boolean"></block>\n        <block type="logic_null"></block>\n        <block type="logic_ternary"></block>\n    </category>\n    <category id="catLoops" colour="120" name="Loops">\n        <block type="controls_repeat_ext">\n            <value name="TIMES">\n                <shadow type="math_number">\n                    <field name="NUM">10</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="controls_whileUntil"></block>\n        <block type="controls_for">\n            <value name="FROM">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="TO">\n                <shadow type="math_number">\n                    <field name="NUM">10</field>\n                </shadow>\n            </value>\n            <value name="BY">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="controls_forEach"></block>\n        <block type="controls_flow_statements"></block>\n    </category>\n    <category id="catMath" colour="230" name="Math">\n        <block type="math_number"></block>\n        <block type="math_arithmetic">\n            <value name="A">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="B">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_single">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">9</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_trig">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">45</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_constant"></block>\n        <block type="math_number_property">\n            <value name="NUMBER_TO_CHECK">\n                <shadow type="math_number">\n                    <field name="NUM">0</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_change">\n            <value name="DELTA">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_round">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">3.1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_on_list"></block>\n        <block type="math_modulo">\n            <value name="DIVIDEND">\n                <shadow type="math_number">\n                    <field name="NUM">64</field>\n                </shadow>\n            </value>\n            <value name="DIVISOR">\n                <shadow type="math_number">\n                    <field name="NUM">10</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_constrain">\n            <value name="VALUE">\n                <shadow type="math_number">\n                    <field name="NUM">50</field>\n                </shadow>\n            </value>\n            <value name="LOW">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="HIGH">\n                <shadow type="math_number">\n                    <field name="NUM">100</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_random_int">\n            <value name="FROM">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="TO">\n                <shadow type="math_number">\n                    <field name="NUM">100</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_random_float"></block>\n    </category>\n    <category id="catText" colour="160" name="Text">\n        <block type="text"></block>\n        <block type="text_join"></block>\n        <block type="text_append">\n            <value name="TEXT">\n                <shadow type="text"></shadow>\n            </value>\n        </block>\n        <block type="text_length">\n            <value name="VALUE">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_isEmpty">\n            <value name="VALUE">\n                <shadow type="text">\n                    <field name="TEXT"></field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_indexOf">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">text</field>\n                </block>\n            </value>\n            <value name="FIND">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_charAt">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">text</field>\n                </block>\n            </value>\n        </block>\n        <block type="text_getSubstring">\n            <value name="STRING">\n                <block type="variables_get">\n                    <field name="VAR">text</field>\n                </block>\n            </value>\n        </block>\n        <block type="text_changeCase">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_trim">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_print">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_prompt_ext">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n    </category>\n    <category id="catLists" colour="260" name="Lists">\n        <block type="lists_create_with">\n            <mutation items="0"></mutation>\n        </block>\n        <block type="lists_create_with"></block>\n        <block type="lists_repeat">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">5</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="lists_length"></block>\n        <block type="lists_isEmpty"></block>\n        <block type="lists_indexOf">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_getIndex">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_setIndex">\n            <value name="LIST">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_getSublist">\n            <value name="LIST">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_split">\n            <value name="DELIM">\n                <shadow type="text">\n                    <field name="TEXT">,</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="lists_sort"></block>\n    </category>\n    <category id="catColour" colour="20" name="Color">\n        <block type="colour_picker"></block>\n        <block type="colour_random"></block>\n        <block type="colour_rgb">\n            <value name="RED">\n                <shadow type="math_number">\n                    <field name="NUM">100</field>\n                </shadow>\n            </value>\n            <value name="GREEN">\n                <shadow type="math_number">\n                    <field name="NUM">50</field>\n                </shadow>\n            </value>\n            <value name="BLUE">\n                <shadow type="math_number">\n                    <field name="NUM">0</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="colour_blend">\n            <value name="COLOUR1">\n                <shadow type="colour_picker">\n                    <field name="COLOUR">#ff0000</field>\n                </shadow>\n            </value>\n            <value name="COLOUR2">\n                <shadow type="colour_picker">\n                    <field name="COLOUR">#3333ff</field>\n                </shadow>\n            </value>\n            <value name="RATIO">\n                <shadow type="math_number">\n                    <field name="NUM">0.5</field>\n                </shadow>\n            </value>\n        </block>\n    </category>\n    <category id="catVariables" colour="330" custom="VARIABLE" name="Variables"></category>\n    <category id="catFunctions" colour="290" custom="PROCEDURE" name="Functions"></category>\n</category>\n\n      '}},54766:(T,I)=>{I.definitionBlocks=function(m,y){m.exportfile={init:function(){this.appendDummyInput().appendField("ExportToFile"),this.appendValueInput("fileName").setCheck(null).appendField("FileName"),this.appendValueInput("contentFile").setCheck(null).appendField("Content"),this.appendValueInput("convertToByte").setCheck("Boolean").appendField("ConvertToByteFromBase64"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},y.exportfile=function(n){return"exportToFile("+y.valueToCode(n,"fileName",0)+","+y.valueToCode(n,"contentFile",0)+","+y.valueToCode(n,"convertToByte",0)+");\n"}},I.fieldXML=function(){return'<block type="exportfile">\n    <value name="fileName">\n        <shadow type="text">\n            <field name="TEXT">abc</field>\n        </shadow>\n    </value>\n    <value name="convertToByte">\n        <shadow type="logic_boolean">\n            <field name="BOOL">FALSE</field>\n        </shadow>\n    </value>\n</block>\n'}},41944:(T,I)=>{I.definitionBlocks=function(m,y){m.filterList={init:function(){this.appendDummyInput().appendField("filterList"),this.appendValueInput("LIST").setCheck("Array"),this.appendValueInput("Logic").setCheck("String").appendField("item=>"),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},y.filterList=function(S){var s=y.valueToCode(S,"LIST",y.ORDER_MEMBER)||"[]",n=y.valueToCode(S,"Logic",y.ORDER_ATOMIC);"string"==typeof n&&(n=n.substr(1,n.length-2));var l="";return l+='(function(t){ if (typeof t === "string") return JSON.parse(t);  return t;}('+s+")).filter(function (item){ return "+n+";})",[l+="",y.ORDER_FUNCTION_CALL]},m.mapList={init:function(){this.appendDummyInput().appendField("mapList"),this.appendValueInput("LIST").setCheck("Array"),this.appendValueInput("Logic").setCheck("String").appendField("item=>"),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},y.mapList=function(S){var s=y.valueToCode(S,"LIST",y.ORDER_MEMBER)||"[]",n=y.valueToCode(S,"Logic",y.ORDER_ATOMIC);"string"==typeof n&&(n=n.substr(1,n.length-2));var l="";return l+='(function(t){ if (typeof t === "string") return JSON.parse(t);  return t;}('+s+")).map(function (item){ return "+n+";})",[l+="",y.ORDER_FUNCTION_CALL]}},I.fieldXML=function(){return'\n        <category id="catA" name="Array">\n            <block type="filterList">\n                <value name="LIST">\n                    <block type="variables_get">\n                        <field name="VAR">list</field>\n                    </block>\n                </value>\n                <value name="Logic">\n                    <shadow type="text">\n                        <field name="TEXT">item.property == "value"</field>\n                    </shadow>\n                </value>\n            </block>\n            <block type="mapList">\n            <value name="LIST">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n            <value name="Logic">\n                <shadow type="text">\n                    <field name="TEXT">item.property</field>\n                </shadow>\n            </value>\n        </block>\n\n        </category>\n\n'}},50929:(T,I)=>{I.definitionBlocks=function(m,y){m.window_open={init:function(){this.jsonInit({message0:"Open %1",args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks"})}},y.window_open=function(n){return"open("+(y.valueToCode(n,"TEXT",99)||"''")+");\n"},m.valuefromtext={init:function(){this.appendDummyInput().appendField("InputFromText"),this.appendValueInput("IdOfText").setCheck("String").appendField("Text id"),this.appendValueInput("ValueToObtain").setCheck("String").appendField("Property"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},y.valuefromtext=function(n){return["getIDProp("+y.valueToCode(n,"IdOfText",0)+","+(y.valueToCode(n,"ValueToObtain",0)||'"value"')+")",99]}},I.fieldXML=function(){return'<block type="window_open"></block>\n    <block type="valuefromtext">\n        <value name="IdOfText">\n            <shadow type="text">\n                <field name="TEXT">output</field>\n            </shadow>\n        </value>\n        <value name="ValueToObtain">\n            <shadow type="text">\n                <field name="TEXT">value</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="text_print"></block>\n    <block type="text_prompt_ext">\n    </block>\n    '}},78011:(T,I,m)=>{T.exports={defaultBlocks:m(41175),filterBlocks:m(41944),waitBlocks:m(62851),xhrBlocks:m(76989),propBlocks:m(35958),guiBlocks:m(50929),convertersBlocks:m(14147),exportFileBlock:m(54766),createObjectBlocks:m(52446),currentDateBlock:m(70081),dateFromTextBlock:m(55126),waitBlocks:m(35999),commentBlock:m(69570),auth0Blocks:m(85135)}},35958:(T,I)=>{I.definitionBlocks=function(m,y,S){m.modifyproperty={init:function(){this.appendDummyInput().appendField("Modify "),this.appendValueInput("ObjectToChange").setCheck(null).setAlign(0).appendField(S("object"),"objectName"),this.appendValueInput("PropertyName").setCheck(null).setAlign(1).appendField(S(",property"),"prop"),this.appendValueInput("NewValue").setCheck(null).setAlign(1).appendField(S("toValue"),"newValue"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(""),this.setHelpUrl("")}},y.modifyproperty=function(h){return y.valueToCode(h,"ObjectToChange",0)+"["+y.valueToCode(h,"PropertyName",0)+"]="+y.valueToCode(h,"NewValue",0)+";"},m.getproperty={init:function(){this.appendDummyInput().appendField("Get from"),this.appendValueInput("ObjectToChange").setCheck(null).setAlign(0).appendField(S("object"),"objectName"),this.appendValueInput("PropertyName").setCheck(null).setAlign(1).appendField(S("property"),"prop"),this.setInputsInline(!0),this.setOutput(!0,null)}},y.getproperty=function(h){return['(function(t){ if (typeof t === "string") return JSON.parse(t);  return t;}('+y.valueToCode(h,"ObjectToChange",0)+"))["+y.valueToCode(h,"PropertyName",0)+"]",99]}},I.fieldXML=function(){return'\n    <category name="Objects" id="Objects">\n    <block type="modifyproperty">\n        <value name="PropertyName">\n            <shadow type="text">\n                <field name="TEXT">enter property name</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="getproperty">\n        <value name="PropertyName">\n            <shadow type="text">\n                <field name="TEXT">enter property name</field>\n            </shadow>\n        </value>\n\n    </block>    \n</category>\n'}},35999:(T,I)=>{I.definitionBlocks=function(m,y){m.wait={init:function(){this.appendValueInput("VALUE").appendField("wait secs"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},y.wait=function(s){return"waitTime("+(y.valueToCode(s,"VALUE",y.ORDER_ATOMIC)||"")+");"},m.wait_until={init:function(){this.appendValueInput("VALUE").appendField("wait until date"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},y.wait_until=function(s){return"waitTime(("+(y.valueToCode(s,"VALUE",0)||"")+"-new Date())/1000);"}},I.fieldXML=function(){return'\n    <block type="wait">\n\n    <value name="VALUE">\n        <shadow type="math_number">\n            <field name="NUM">10</field>\n        </shadow>\n    </value>\n\n</block>\n<block type="wait_until">\n\n</block>'}},62851:(T,I)=>{I.definitionBlocks=function(m,y){m([{type:"wait_seconds",message0:" wait %1 seconds",args0:[{type:"field_number",name:"SECONDS",min:0,max:600,value:1}],previousStatement:null,nextStatement:null,colour:"%{BKY_LOOPS_HUE}"}]),y.wait_seconds=function(S){return"waitForSeconds("+Number(S.getFieldValue("SECONDS"))+");\n"}},I.fieldXML=function(){return'\n  <block type="wait_seconds"></block>\n'}},76989:(T,I)=>{I.definitionBlocks=function(m,y,S){m.headersbeforehttp={init:function(){this.appendDummyInput().appendField("Add Headers"),this.appendValueInput("HttpDomain").setCheck("String").appendField("Domain"),this.appendValueInput("HeaderName").setCheck("String").appendField("Header Name"),this.appendValueInput("HeaderValue").setCheck("String").appendField("Header Value"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},y.headersbeforehttp=function(l){var u=y.valueToCode(l,"HttpDomain",0)||"(localSite)",b="\n";return b+="{\n",b+="if(!("+u+" in headersForDomain))\n",b+="{\n",b+="headersForDomain["+u+"]=[];\n",b+="};\n",b+="var arr = headersForDomain["+u+"];\n",b+="arr.push({name:"+y.valueToCode(l,"HeaderName",0)+", value:"+y.valueToCode(l,"HeaderValue",0)+"});\n",b+='//alert("a" + JSON.stringify(arr)+"a");\n',(b+='//alert("a" + JSON.stringify(headersForDomain['+u+'])+"a");\n')+"};\n"},m.httprequest={init:function(){this.appendDummyInput().appendField(S([["JSON","JSON"],["Text","Text"]]),"TypeOutput").appendField("HttpRequest"),this.appendValueInput("TheUrl").setCheck(null).appendField(S([["GET","GET"],["POST","POST"]]),"TypeRequest").appendField("URL"),this.appendValueInput("Data").setCheck(null).appendField("Data"),this.setOutput(!0,null)}},y.httprequest=function(l){var u=l.getFieldValue("TypeOutput"),h=l.getFieldValue("TypeRequest"),_=y.valueToCode(l,"TheUrl",0),b=y.valueToCode(l,"Data",0),R="";switch(h.toString()){case"GET":R="(function(url){ var res=JSON.parse(getXhr(url)); if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;}("+_+") )";break;case"POST":R="(function(url,data){ var res=JSON.parse(postXhr(url,JSON.stringify(data))); if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;}("+_+","+b+") )"}var O=R;return"JSON"===u&&(O="JSON.parse("+O+")"),[O,99]}},I.fieldXML=function(){return'\n    <category id="XHR" name="Request">\n    <block type="headersbeforehttp">\n    <value name="HttpDomain">\n        <shadow type="text">\n            <field name="TEXT">(localSite)</field>\n        </shadow>\n    </value>\n    <value name="HeaderName">\n        <shadow type="text">\n            <field name="TEXT">Authorization</field>\n        </shadow>\n    </value>\n    <value name="HeaderValue">\n        <shadow type="text_join">\n\n        </shadow>\n    </value>\n</block>\n    <block type="httprequest">\n    <value name="TheUrl">\n        <shadow type="text">\n            <field name="TEXT">https://httpbin.org/get</field>\n        </shadow>\n    </value>\n    \n</block>\n\n</category>\n'}},22456:(T,I,m)=>{var y=m(38506).default;T.exports=class{constructor(n){Na(this,"GenerateBlocks",[]),Na(this,"GenerateFunctions",[]),Na(this,"fieldXMLObjects",[]),Na(this,"fieldXMLFunctions",[]),Na(this,"hasError",!0),Na(this,"paths",[]),Na(this,"name",""),Na(this,"operations",[]),Na(this,"openApiDocument",null),Na(this,"basePath",""),this.swaggerUrl=n}nameCategSwagger(){return`catSwagger${this.findHostNameRegular()}`}findCategSwaggerFromPaths(){var n=this.paths.filter(u=>u&&u.id&&u.id.length>0).map(u=>{var h=u.id.indexOf("{");return h>0&&(u.id=u.id.substring(0,h)),u}).map(u=>(u.id.lastIndexOf("/")!=u.id.length-1&&(u.id+="/"),u));this.operations=n.filter(u=>u.nrOps>1).map(u=>({arr:u.id.split("/").filter(_=>_.length>0),id:u.id})).map(u=>({controller:u.arr[u.arr.length-1],id:u.id}));var l=n.filter(u=>1==u.nrOps).map(u=>({arr:u.id.split("/").filter(h=>h.length>0),id:u.id})).map(u=>1==u.arr.length?{controller:u.arr[0],id:u.id}:{controller:u.arr[u.arr.length-2],id:u.id});return this.operations.push(...l),[...new Set(this.operations.map(u=>u.controller))]}categSwagger(){var n=this.findHostNameRegular();(n=n.replaceAll(".","")).length>5&&n.substring(0,5);var h=this.nameCategSwagger();return'<category name="Objects" custom="objects_'+h+'"></category><category name="AllApi" custom="api_'+h+'"></category>'}findRootSite(){var n=this.swaggerUrl,l="";if(n.startsWith("http://")||n.startsWith("https://")){var u=new URL(n);l=u.protocol+"//"+u.hostname,u.port.length>0&&(l+=":"+u.port)}return l}findHostNameRegular(){var _,n=this.swaggerUrl,l="(localSite)";if(n.startsWith("http://")||n.startsWith("https://")){var u=new URL(n),h=null!=(_=u.port)?_:80;l=u.hostname+h}return l.replaceAll(".","")}ParseSwagger(){var n=this;return y(function*(){var R,l=n;l.fieldXMLObjects.push(`<label text="${l.swaggerUrl}"></label>`),l.fieldXMLFunctions.push({id:"",gui:`<label text="${l.swaggerUrl}"></label>`});var u=null;try{u=(yield m(12763).default(n.swaggerUrl)).spec}catch(O){return console.error(`parseSwagger ${n.swaggerUrl}`,O),l.fieldXMLObjects.push("<label text='Error parsing!'></label>"),n}n.hasError=!1,n.basePath=u.basePath||"";var _=null==(R=u.components)?void 0:R.schemas;return(null==_||null==_)&&(_=u.definitions),_?Object.keys(_).sort().forEach(function(O){l.fieldXMLObjects.push(`<block type="${O}"></block>`),l.GenerateBlocks.push(l.GenerateBlock(_[O],O))}):console.log("_A",u),u.paths&&Object.keys(u.paths).forEach(function(O){var H=u.paths[O];l.paths.push({id:O,nrOps:Object.keys(H).length}),Object.keys(H).forEach(function(W){l.GenerateFunctions.push(l.GenerateFunction(H,O,H[W],W))})}),l.openApiDocument=u,l})()}findProperties(n){var l=[];return n.properties&&Object.keys(n.properties).forEach(u=>{l.push({key:u,value:n.properties[u]})}),l}GenerateNameFunction(n,l,u,h){return h+"_"+l.replaceAll("/","_").replaceAll("{","__").replaceAll("}","")}GenerateFunction(n,l,u,h){var _=this,b=_.GenerateNameFunction(n,l,u,h),O=u;return _.fieldXMLFunctions.push({id:l,gui:`<block type="${b}"></block>`}),function(H,W,G){H[b]={init:function(){var Z=l;Z.length>15&&(Z=Z.substring(0,25)+"..."),this.appendDummyInput().appendField(G(h)).appendField(`${h} ${Z}`);var Q=_.findRootSite();if(O.parameters&&O.parameters.forEach(he=>{var te=he.name;if(he.required&&(te+="*"),he.schema&&he.schema.type)if("object"==he.schema.type){var oe=he.schema.$$ref||"";oe.length>0&&(te+=":"+(oe=oe.substring(oe.lastIndexOf("/")+1)))}else te+=":"+he.schema.type;this.appendValueInput(`val_${he.name}`).appendField(te)}),O.requestBody){var Y="";if(O.requestBody.content){var ue=O.requestBody.content["application/json"];if(ue&&ue.schema){var ne=ue.schema.$$ref;ne&&(Y="=>"+ne.substring(ne.lastIndexOf("/")+1))}}this.appendValueInput("val_values").appendField("values"+Y).setCheck()}this.setTooltip(`${h} ${Q}${l}`),this.setOutput(!0,"")}},W[b]=function(Z){var ne=_.openApiDocument.paths[l][h],he=[];"parameters"in ne&&(he=ne.parameters);var te=!1,oe=he.filter(de=>"body"==de.in).length>0;(oe||"requestBody"in ne)&&(te=!0);var q={},J={};te&&(q.val_values=W.valueToCode(Z,"val_values",0),J.val_values=q.val_values),he.forEach(de=>{q[`val_${de.name}`]=W.valueToCode(Z,`val_${de.name}`,0)});var F=he.map(de=>de.name);te&!oe&&F.push("values"),F.push("extraData"),he.map(de=>`\${obj['val_${de.name}']},`);var K="function(";K+=F.join(","),K+="){\n",K+='var strUrl ="'+_.findRootSite()+_.basePath+l+'";\n';var ie=he.filter(de=>"query"==de.in);if(ie.length>0){K+='strUrl+="?";\n;';var le=ie.map(de=>`${de.name}={`+de.name+"}").join("&");K+='strUrl += "'+le+'";\n;'}var re=he.filter(de=>"path"==de.in||"query"==de.in).map(de=>`strUrl = strUrl.replace("{${de.name}}",${de.name});`);if(K+=re.join("\n"),K+=`\n{var res= ${h}Xhr(strUrl`,te){var Re="values";oe&&(Re=he.filter(de=>"body"==de.in)[0].name),K+=`,JSON.stringify(${Re})`}return K+=");\n",K+="var resJS=JSON.parse(res);\n",K+="if(resJS.statusOK) return resJS.text;\n",K+="errHandler(res);\n}\n",K+="}",K+="(",he.forEach(de=>{K+=q[`val_${de.name}`]+","}),te&!oe&&(K+=J.val_values+","),K+="1",[K+=")",99]}}}GenerateBlock(n,l){var u=this,h=l,b=u.findProperties(n);return function(R,O,H){R[h]={init:function(){var W=!1,G=[];n.enum&&(W=!0,G=Object.keys(n.enum).map(Y=>[n.enum[Y],Y]));var Q=this.appendDummyInput().appendField(l);W?Q.appendField(H(G),`val_${l}`):b.forEach(Y=>{var oe,ue=Y.key;if(Y.value.nullable&&0==Y.value.nullable&&(ue+="*"),null==(oe=Y.value)?void 0:oe.type){var ne=Y.value.type||"";if("object"==ne){var he=Y.value.$$ref||"";he.length>0&&(ne=he.substring(he.lastIndexOf("/")+1))}ue+=":"+ne}Y.value.$ref&&(ue+="->"+Y.value.$ref.replaceAll("#/components/schemas/","")),this.appendValueInput(`val_${Y.key}`).appendField(`${ue}`)}),this.setOutput(!0,h)}},O[h]=function(W){{var G=!1;n.enum&&(G=!0);var Z=u.findProperties(n);const ne=99,he=0;var Q="",Y=[];return Z.forEach(te=>{let oe=O.valueToCode(W,`val_${te.key}`,he);""===oe&&(oe="null"),null==oe&&(oe="null"),Y.push(`"${te.key}":${oe}`)}),Q="{ "+Y.join(",")+" }",G&&(Q=W.getFieldValue(`val_${l}`)),[Q,ne]}}}}TranslateToBlocklyType(n){return"integer"==n?"Number":"string"==n?"String":"bool"==n?"Boolean":"array"==n?"Array":(console.error("not found TranslateToBlocklyType item"+n),"not found type"+n)}}},80184:(T,I,m)=>{T.exports={parseSwagger:m(44063),parseData:m(22456)}},44063:(T,I,m)=>{var y=m(38506).default;I.parseSwagger=function(){var n=y(function*(l){var H;new(m(22456))(l);var _=[],O=(yield m(50208).default(l)).response;return console.log(O.components.schemas),(null==(H=O.components)?void 0:H.schemas)&&Object.keys(O.components.schemas).forEach(function(W){_.push(function(n,l){var u=l;return n.properties&&Object.keys(n.properties).forEach(h=>{}),function(h,_){h[u]={init:function(){this.appendDummyInput().appendField(l),this.setOutput(!0,u)}}}}(O.components.schemas[W],W))}),_});return function(l){return n.apply(this,arguments)}}(),I.parseSwagger1=function(n){return m(50208).default(n)}},65612:(T,I,m)=>{"use strict";Object.defineProperty(I,"__esModule",{value:!0}),I.Api=void 0;var y=m(16443);I.Api=function(n,l){void 0===l&&(l={}),this.entrypoint=n,y.assignSealed(this,l)}},97542:(T,I,m)=>{"use strict";Object.defineProperty(I,"__esModule",{value:!0}),I.Field=void 0;var y=m(16443);I.Field=function(n,l){void 0===l&&(l={}),this.name=n,y.assignSealed(this,l)}},63039:(T,I,m)=>{"use strict";Object.defineProperty(I,"__esModule",{value:!0}),I.Resource=void 0;var y=m(16443);I.Resource=function(n,l,u){void 0===u&&(u={}),this.name=n,this.url=l,y.assignSealed(this,u)}},36121:(T,I,m)=>{"use strict";Object.defineProperty(I,"__esModule",{value:!0}),I.removeTrailingSlash=void 0;var S=m(2805).__importDefault(m(41510)),s=m(97542),n=m(63039),l=m(8272);I.removeTrailingSlash=function(_){return _.endsWith("/")&&(_=_.slice(0,-1)),_},I.default=function(_,b){return l.getResources(_.paths).map(function(H){var W=H.replace("/",""),G=I.removeTrailingSlash(b)+H,Z=Object.keys(_.paths[H])[0],Q=_.paths[H][Z];if(!Q.tags)throw new Error;var Y=Q.tags[0];if(!_.components)throw new Error;if(!_.components.schemas)throw new Error;var ne=_.components.schemas[Y].properties;if(!ne)throw new Error;var he=Object.keys(ne),te=S.default(_,["components","schemas",Y,"required"],[]),oe=he.map(function(q){return new s.Field(q,{id:null,range:null,reference:null,required:!!te.find(function(J){return J===q}),description:S.default(ne[q],"description","")})});return new n.Resource(W,G,{id:null,title:Y,fields:oe,readableFields:oe,writableFields:oe})})}},50208:(T,I,m)=>{"use strict";Object.defineProperty(I,"__esModule",{value:!0});var y=m(2805),S=m(65612),s=y.__importStar(m(36121));I.default=function(l){return l=s.removeTrailingSlash(l),fetch(l).then(function(u){return Promise.all([u,u.json()])}).then(function(u){var h=u[0],_=u[1],b=_.info.title,R=s.default(_,l);return Promise.resolve({api:new S.Api(l,{title:b,resources:R}),response:_,status:h.status})},function(u){var h=u[0],_=u[1];return Promise.reject({api:new S.Api(l,{resources:[]}),response:_,status:h.status})})}},16443:(T,I)=>{"use strict";Object.defineProperty(I,"__esModule",{value:!0}),I.assignSealed=void 0,I.assignSealed=function(y,S){Object.keys(S).forEach(function(s){Object.defineProperty(y,s,{writable:!0,enumerable:!0,configurable:!1,value:S[s]})})}},8272:(T,I)=>{"use strict";Object.defineProperty(I,"__esModule",{value:!0}),I.getResources=void 0,I.getResources=function(y){var S=[];return Object.keys(y).forEach(function(s){s.includes("/{id}")||S.find(function(n){return n.startsWith("/"+s.split("/")[1])})||S.push(s)}),S}},53112:T=>{!function(){"use strict";T.exports=function(m){return(m instanceof Buffer?m:Buffer.from(m.toString(),"binary")).toString("base64")}}()},4220:(T,I,m)=>{"use strict";var y=m(1326),S=m(35956),s=S(y("String.prototype.indexOf"));T.exports=function(l,u){var h=y(l,!!u);return"function"==typeof h&&s(l,".prototype.")>-1?S(h):h}},35956:(T,I,m)=>{"use strict";var y=m(11138),S=m(1326),s=S("%Function.prototype.apply%"),n=S("%Function.prototype.call%"),l=S("%Reflect.apply%",!0)||y.call(n,s),u=S("%Object.getOwnPropertyDescriptor%",!0),h=S("%Object.defineProperty%",!0),_=S("%Math.max%");if(h)try{h({},"a",{value:1})}catch(R){h=null}T.exports=function(O){var H=l(y,n,arguments);if(u&&h){var W=u(H,"length");W.configurable&&h(H,"length",{value:1+_(0,O.length-(arguments.length-1))})}return H};var b=function(){return l(y,s,arguments)};h?h(T.exports,"apply",{value:b}):T.exports.apply=b},32946:(T,I)=>{"use strict";I.parse=function(h,_){if("string"!=typeof h)throw new TypeError("argument str must be a string");for(var b={},R=_||{},O=h.split(S),H=R.decode||m,W=0;W<O.length;W++){var G=O[W],Z=G.indexOf("=");if(!(Z<0)){var Q=G.substr(0,Z).trim(),Y=G.substr(++Z,G.length).trim();'"'==Y[0]&&(Y=Y.slice(1,-1)),null==b[Q]&&(b[Q]=u(Y,H))}}return b},I.serialize=function(h,_,b){var R=b||{},O=R.encode||y;if("function"!=typeof O)throw new TypeError("option encode is invalid");if(!s.test(h))throw new TypeError("argument name is invalid");var H=O(_);if(H&&!s.test(H))throw new TypeError("argument val is invalid");var W=h+"="+H;if(null!=R.maxAge){var G=R.maxAge-0;if(isNaN(G)||!isFinite(G))throw new TypeError("option maxAge is invalid");W+="; Max-Age="+Math.floor(G)}if(R.domain){if(!s.test(R.domain))throw new TypeError("option domain is invalid");W+="; Domain="+R.domain}if(R.path){if(!s.test(R.path))throw new TypeError("option path is invalid");W+="; Path="+R.path}if(R.expires){if("function"!=typeof R.expires.toUTCString)throw new TypeError("option expires is invalid");W+="; Expires="+R.expires.toUTCString()}if(R.httpOnly&&(W+="; HttpOnly"),R.secure&&(W+="; Secure"),R.sameSite)switch("string"==typeof R.sameSite?R.sameSite.toLowerCase():R.sameSite){case!0:case"strict":W+="; SameSite=Strict";break;case"lax":W+="; SameSite=Lax";break;case"none":W+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return W};var m=decodeURIComponent,y=encodeURIComponent,S=/; */,s=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function u(h,_){try{return _(h)}catch(b){return h}}},28430:(T,I,m)=>{m(21446),m(13122);var y=m(35361);T.exports=y.Array.from},19117:(T,I,m)=>{m(90418);var y=m(35361);T.exports=y.Array.isArray},14149:(T,I,m)=>{m(80706);var y=m(27824);T.exports=y("Array").concat},37311:(T,I,m)=>{m(68905),m(94666);var y=m(27824);T.exports=y("Array").entries},96154:(T,I,m)=>{m(81136);var y=m(27824);T.exports=y("Array").filter},68592:(T,I,m)=>{m(89543);var y=m(27824);T.exports=y("Array").find},52535:(T,I,m)=>{m(46152);var y=m(27824);T.exports=y("Array").forEach},39457:(T,I,m)=>{m(96875);var y=m(27824);T.exports=y("Array").includes},7184:(T,I,m)=>{m(22616);var y=m(27824);T.exports=y("Array").indexOf},45218:(T,I,m)=>{m(36850);var y=m(27824);T.exports=y("Array").map},30705:(T,I,m)=>{m(62693);var y=m(27824);T.exports=y("Array").slice},22280:(T,I,m)=>{m(72101);var y=m(27824);T.exports=y("Array").splice},38615:(T,I,m)=>{m(68905),m(21446);var y=m(27556);T.exports=y},59597:(T,I,m)=>{var y=m(49778),S=m(14149),s=Array.prototype;T.exports=function(n){var l=n.concat;return n===s||y(s,n)&&l===s.concat?S:l}},46824:(T,I,m)=>{var y=m(49778),S=m(96154),s=Array.prototype;T.exports=function(n){var l=n.filter;return n===s||y(s,n)&&l===s.filter?S:l}},45600:(T,I,m)=>{var y=m(49778),S=m(68592),s=Array.prototype;T.exports=function(n){var l=n.find;return n===s||y(s,n)&&l===s.find?S:l}},85923:(T,I,m)=>{var y=m(49778),S=m(39457),s=m(48781),n=Array.prototype,l=String.prototype;T.exports=function(u){var h=u.includes;return u===n||y(n,u)&&h===n.includes?S:"string"==typeof u||u===l||y(l,u)&&h===l.includes?s:h}},77146:(T,I,m)=>{var y=m(49778),S=m(7184),s=Array.prototype;T.exports=function(n){var l=n.indexOf;return n===s||y(s,n)&&l===s.indexOf?S:l}},24773:(T,I,m)=>{var y=m(49778),S=m(45218),s=Array.prototype;T.exports=function(n){var l=n.map;return n===s||y(s,n)&&l===s.map?S:l}},58445:(T,I,m)=>{var y=m(49778),S=m(30705),s=Array.prototype;T.exports=function(n){var l=n.slice;return n===s||y(s,n)&&l===s.slice?S:l}},8138:(T,I,m)=>{var y=m(49778),S=m(22280),s=Array.prototype;T.exports=function(n){var l=n.splice;return n===s||y(s,n)&&l===s.splice?S:l}},41108:(T,I,m)=>{var y=m(49778),S=m(30566),s=String.prototype;T.exports=function(n){var l=n.startsWith;return"string"==typeof n||n===s||y(s,n)&&l===s.startsWith?S:l}},27615:(T,I,m)=>{m(39481);var y=m(35361),S=m(27549);y.JSON||(y.JSON={stringify:JSON.stringify}),T.exports=function(n,l,u){return S(y.JSON.stringify,null,arguments)}},92889:(T,I,m)=>{m(1476);var y=m(35361);T.exports=y.Object.assign},5318:(T,I,m)=>{m(63851);var S=m(35361).Object,s=T.exports=function(l,u){return S.defineProperties(l,u)};S.defineProperties.sham&&(s.sham=!0)},75634:(T,I,m)=>{m(23179);var S=m(35361).Object,s=T.exports=function(l,u,h){return S.defineProperty(l,u,h)};S.defineProperty.sham&&(s.sham=!0)},36669:(T,I,m)=>{m(69178);var y=m(35361);T.exports=y.Object.entries},88095:(T,I,m)=>{m(67827);var S=m(35361).Object,s=T.exports=function(l,u){return S.getOwnPropertyDescriptor(l,u)};S.getOwnPropertyDescriptor.sham&&(s.sham=!0)},89439:(T,I,m)=>{m(53603);var y=m(35361);T.exports=y.Object.getOwnPropertyDescriptors},13799:(T,I,m)=>{m(5001);var y=m(35361);T.exports=y.Object.getOwnPropertySymbols},33054:(T,I,m)=>{m(63596);var y=m(35361);T.exports=y.Object.keys},649:(T,I,m)=>{m(96476),m(68905),m(94666),m(47110),m(5823),m(78084),m(31296),m(21446);var y=m(35361);T.exports=y.Promise},48781:(T,I,m)=>{m(54840);var y=m(27824);T.exports=y("String").includes},30566:(T,I,m)=>{m(93784);var y=m(27824);T.exports=y("String").startsWith},67079:(T,I,m)=>{m(80706),m(94666),m(5001),m(55623),m(19060),m(43364),m(97447),m(70830),m(85873),m(5623),m(98499),m(81281),m(91348),m(25609),m(69538),m(64827),m(5256),m(897),m(6603),m(73609);var y=m(35361);T.exports=y.Symbol},41519:(T,I,m)=>{m(68905),m(94666),m(21446),m(70830);var y=m(12506);T.exports=y.f("iterator")},21643:(T,I,m)=>{m(68905),m(94666),m(58871);var y=m(35361);T.exports=y.WeakMap},15814:(T,I,m)=>{var y=m(16775);T.exports=y},80345:(T,I,m)=>{var y=m(4718);T.exports=y},90974:(T,I,m)=>{var y=m(81826);T.exports=y},23458:(T,I,m)=>{var y=m(40779);T.exports=y},75223:(T,I,m)=>{var y=m(48596);T.exports=y},31151:(T,I,m)=>{var y=m(35093);T.exports=y},31175:(T,I,m)=>{var y=m(71166);T.exports=y},60918:(T,I,m)=>{var y=m(71258);T.exports=y},68625:(T,I,m)=>{var y=m(72102);T.exports=y},58917:(T,I,m)=>{var y=m(87440);T.exports=y},2126:(T,I,m)=>{var y=m(48021);T.exports=y},93648:(T,I,m)=>{var y=m(4490);T.exports=y},58300:(T,I,m)=>{var y=m(16625);T.exports=y},7137:(T,I,m)=>{var y=m(95609);m(69797),m(24101),m(1127),m(96860),T.exports=y},24435:(T,I,m)=>{var y=m(35875);m(67924),m(27907),m(59331),m(97515),m(97601),m(61061),m(98377),T.exports=y},30218:(T,I,m)=>{var y=m(34542);T.exports=y},62057:(T,I,m)=>{var y=m(71186),S=m(89982),s=m(75885),n=y.TypeError;T.exports=function(l){if(S(l))return l;throw n(s(l)+" is not a function")}},12144:(T,I,m)=>{var y=m(71186),S=m(2043),s=m(75885),n=y.TypeError;T.exports=function(l){if(S(l))return l;throw n(s(l)+" is not a constructor")}},57690:(T,I,m)=>{var y=m(71186),S=m(89982),s=y.String,n=y.TypeError;T.exports=function(l){if("object"==typeof l||S(l))return l;throw n("Can't set "+s(l)+" as a prototype")}},81382:T=>{T.exports=function(){}},37368:(T,I,m)=>{var y=m(71186),S=m(49778),s=y.TypeError;T.exports=function(n,l){if(S(l,n))return n;throw s("Incorrect invocation")}},64808:(T,I,m)=>{var y=m(71186),S=m(4559),s=y.String,n=y.TypeError;T.exports=function(l){if(S(l))return l;throw n(s(l)+" is not an object")}},99844:(T,I,m)=>{var y=m(72194);T.exports=y(function(){if("function"==typeof ArrayBuffer){var S=new ArrayBuffer(8);Object.isExtensible(S)&&Object.defineProperty(S,"a",{value:8})}})},7330:(T,I,m)=>{"use strict";var y=m(32794).forEach,s=m(79444)("forEach");T.exports=s?[].forEach:function(l){return y(this,l,arguments.length>1?arguments[1]:void 0)}},96005:(T,I,m)=>{"use strict";var y=m(71186),S=m(56875),s=m(74217),n=m(12784),l=m(8025),u=m(23969),h=m(2043),_=m(50842),b=m(68140),R=m(80009),O=m(27556),H=y.Array;T.exports=function(G){var Z=n(G),Q=h(this),Y=arguments.length,ue=Y>1?arguments[1]:void 0,ne=void 0!==ue;ne&&(ue=S(ue,Y>2?arguments[2]:void 0));var oe,q,J,F,fe,K,he=O(Z),te=0;if(!he||this==H&&u(he))for(oe=_(Z),q=Q?new this(oe):H(oe);oe>te;te++)K=ne?ue(Z[te],te):Z[te],b(q,te,K);else for(fe=(F=R(Z,he)).next,q=Q?new this:[];!(J=s(fe,F)).done;te++)K=ne?l(F,ue,[J.value,te],!0):J.value,b(q,te,K);return q.length=te,q}},77118:(T,I,m)=>{var y=m(38611),S=m(40771),s=m(50842),n=function(l){return function(u,h,_){var H,b=y(u),R=s(b),O=S(_,R);if(l&&h!=h){for(;R>O;)if((H=b[O++])!=H)return!0}else for(;R>O;O++)if((l||O in b)&&b[O]===h)return l||O||0;return!l&&-1}};T.exports={includes:n(!0),indexOf:n(!1)}},32794:(T,I,m)=>{var y=m(56875),S=m(83232),s=m(28560),n=m(12784),l=m(50842),u=m(75458),h=S([].push),_=function(b){var R=1==b,O=2==b,H=3==b,W=4==b,G=6==b,Z=7==b,Q=5==b||G;return function(Y,ue,ne,he){for(var ie,le,te=n(Y),oe=s(te),q=y(ue,ne),J=l(oe),F=0,fe=he||u,K=R?fe(Y,J):O||Z?fe(Y,0):void 0;J>F;F++)if((Q||F in oe)&&(le=q(ie=oe[F],F,te),b))if(R)K[F]=le;else if(le)switch(b){case 3:return!0;case 5:return ie;case 6:return F;case 2:h(K,ie)}else switch(b){case 4:return!1;case 7:h(K,ie)}return G?-1:H||W?W:K}};T.exports={forEach:_(0),map:_(1),filter:_(2),some:_(3),every:_(4),find:_(5),findIndex:_(6),filterReject:_(7)}},63294:(T,I,m)=>{var y=m(72194),S=m(51227),s=m(47803),n=S("species");T.exports=function(l){return s>=51||!y(function(){var u=[];return(u.constructor={})[n]=function(){return{foo:1}},1!==u[l](Boolean).foo})}},79444:(T,I,m)=>{"use strict";var y=m(72194);T.exports=function(S,s){var n=[][S];return!!n&&y(function(){n.call(null,s||function(){throw 1},1)})}},60462:(T,I,m)=>{var y=m(83232);T.exports=y([].slice)},25278:(T,I,m)=>{var y=m(60462),S=Math.floor,s=function(u,h){var _=u.length,b=S(_/2);return _<8?n(u,h):l(u,s(y(u,0,b),h),s(y(u,b),h),h)},n=function(u,h){for(var R,O,_=u.length,b=1;b<_;){for(O=b,R=u[b];O&&h(u[O-1],R)>0;)u[O]=u[--O];O!==b++&&(u[O]=R)}return u},l=function(u,h,_,b){for(var R=h.length,O=_.length,H=0,W=0;H<R||W<O;)u[H+W]=H<R&&W<O?b(h[H],_[W])<=0?h[H++]:_[W++]:H<R?h[H++]:_[W++];return u};T.exports=s},55666:(T,I,m)=>{var y=m(71186),S=m(21284),s=m(2043),n=m(4559),u=m(51227)("species"),h=y.Array;T.exports=function(_){var b;return S(_)&&(s(b=_.constructor)&&(b===h||S(b.prototype))||n(b)&&null===(b=b[u]))&&(b=void 0),void 0===b?h:b}},75458:(T,I,m)=>{var y=m(55666);T.exports=function(S,s){return new(y(S))(0===s?0:s)}},8025:(T,I,m)=>{var y=m(64808),S=m(48508);T.exports=function(s,n,l,u){try{return u?n(y(l)[0],l[1]):n(l)}catch(h){S(s,"throw",h)}}},92807:(T,I,m)=>{var S=m(51227)("iterator"),s=!1;try{var n=0,l={next:function(){return{done:!!n++}},return:function(){s=!0}};l[S]=function(){return this},Array.from(l,function(){throw 2})}catch(u){}T.exports=function(u,h){if(!h&&!s)return!1;var _=!1;try{var b={};b[S]=function(){return{next:function(){return{done:_=!0}}}},u(b)}catch(R){}return _}},36166:(T,I,m)=>{var y=m(83232),S=y({}.toString),s=y("".slice);T.exports=function(n){return s(S(n),8,-1)}},36346:(T,I,m)=>{var y=m(71186),S=m(98086),s=m(89982),n=m(36166),u=m(51227)("toStringTag"),h=y.Object,_="Arguments"==n(function(){return arguments}());T.exports=S?n:function(R){var O,H,W;return void 0===R?"Undefined":null===R?"Null":"string"==typeof(H=function(R,O){try{return R[O]}catch(H){}}(O=h(R),u))?H:_?n(O):"Object"==(W=n(O))&&s(O.callee)?"Arguments":W}},84089:(T,I,m)=>{var y=m(83232),S=m(60462),s=y("".replace),n=y("".split),l=y([].join),u=String(Error("zxcasd").stack),h=/\n\s*at [^:]*:[^\n]*/,_=h.test(u),b=/@[^\n]*\n/.test(u)&&!/zxcasd/.test(u);T.exports=function(R,O){if("string"!=typeof R)return R;if(_)for(;O--;)R=s(R,h,"");else if(b)return l(S(n(R,"\n"),O),"\n");return R}},2387:(T,I,m)=>{"use strict";var y=m(83232),S=m(61306),s=m(77699).getWeakData,n=m(64808),l=m(4559),u=m(37368),h=m(64837),_=m(32794),b=m(63262),R=m(59066),O=R.set,H=R.getterFor,W=_.find,G=_.findIndex,Z=y([].splice),Q=0,Y=function(he){return he.frozen||(he.frozen=new ue)},ue=function(){this.entries=[]},ne=function(he,te){return W(he.entries,function(oe){return oe[0]===te})};ue.prototype={get:function(he){var te=ne(this,he);if(te)return te[1]},has:function(he){return!!ne(this,he)},set:function(he,te){var oe=ne(this,he);oe?oe[1]=te:this.entries.push([he,te])},delete:function(he){var te=G(this.entries,function(oe){return oe[0]===he});return~te&&Z(this.entries,te,1),!!~te}},T.exports={getConstructor:function(he,te,oe,q){var J=he(function(ie,le){u(ie,F),O(ie,{type:te,id:Q++,frozen:void 0}),null!=le&&h(le,ie[q],{that:ie,AS_ENTRIES:oe})}),F=J.prototype,fe=H(te),K=function(ie,le,re){var Re=fe(ie),de=s(n(le),!0);return!0===de?Y(Re).set(le,re):de[Re.id]=re,ie};return S(F,{delete:function(ie){var le=fe(this);if(!l(ie))return!1;var re=s(ie);return!0===re?Y(le).delete(ie):re&&b(re,le.id)&&delete re[le.id]},has:function(le){var re=fe(this);if(!l(le))return!1;var Re=s(le);return!0===Re?Y(re).has(le):Re&&b(Re,re.id)}}),S(F,oe?{get:function(le){var re=fe(this);if(l(le)){var Re=s(le);return!0===Re?Y(re).get(le):Re?Re[re.id]:void 0}},set:function(le,re){return K(this,le,re)}}:{add:function(le){return K(this,le,!0)}}),J}}},8394:(T,I,m)=>{"use strict";var y=m(47695),S=m(71186),s=m(77699),n=m(72194),l=m(30259),u=m(64837),h=m(37368),_=m(89982),b=m(4559),R=m(81488),O=m(38360).f,H=m(32794).forEach,W=m(93628),G=m(59066),Z=G.set,Q=G.getterFor;T.exports=function(Y,ue,ne){var fe,he=-1!==Y.indexOf("Map"),te=-1!==Y.indexOf("Weak"),oe=he?"set":"add",q=S[Y],J=q&&q.prototype,F={};if(W&&_(q)&&(te||J.forEach&&!n(function(){(new q).entries().next()}))){var K=(fe=ue(function(le,re){Z(h(le,K),{type:Y,collection:new q}),null!=re&&u(re,le[oe],{that:le,AS_ENTRIES:he})})).prototype,ie=Q(Y);H(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(le){var re="add"==le||"set"==le;le in J&&(!te||"clear"!=le)&&l(K,le,function(Re,de){var ve=ie(this).collection;if(!re&&te&&!b(Re))return"get"==le&&void 0;var Pe=ve[le](0===Re?0:Re,de);return re?this:Pe})}),te||O(K,"size",{configurable:!0,get:function(){return ie(this).collection.size}})}else fe=ne.getConstructor(ue,Y,he,oe),s.enable();return R(fe,Y,!1,!0),F[Y]=fe,y({global:!0,forced:!0},F),te||ne.setStrong(fe,Y,he),fe}},78356:(T,I,m)=>{var y=m(63262),S=m(69093),s=m(3182),n=m(38360);T.exports=function(l,u){for(var h=S(u),_=n.f,b=s.f,R=0;R<h.length;R++){var O=h[R];y(l,O)||_(l,O,b(u,O))}}},80736:(T,I,m)=>{var S=m(51227)("match");T.exports=function(s){var n=/./;try{"/./"[s](n)}catch(l){try{return n[S]=!1,"/./"[s](n)}catch(u){}}return!1}},65192:(T,I,m)=>{var y=m(72194);T.exports=!y(function(){function S(){}return S.prototype.constructor=null,Object.getPrototypeOf(new S)!==S.prototype})},68603:(T,I,m)=>{"use strict";var y=m(17518).IteratorPrototype,S=m(47579),s=m(79695),n=m(81488),l=m(57160),u=function(){return this};T.exports=function(h,_,b){var R=_+" Iterator";return h.prototype=S(y,{next:s(1,b)}),n(h,R,!1,!0),l[R]=u,h}},30259:(T,I,m)=>{var y=m(93628),S=m(38360),s=m(79695);T.exports=y?function(n,l,u){return S.f(n,l,s(1,u))}:function(n,l,u){return n[l]=u,n}},79695:T=>{T.exports=function(I,m){return{enumerable:!(1&I),configurable:!(2&I),writable:!(4&I),value:m}}},68140:(T,I,m)=>{"use strict";var y=m(66943),S=m(38360),s=m(79695);T.exports=function(n,l,u){var h=y(l);h in n?S.f(n,h,s(0,u)):n[h]=u}},8672:(T,I,m)=>{"use strict";var y=m(47695),S=m(74217),s=m(83546),n=m(88197),l=m(89982),u=m(68603),h=m(41340),_=m(86447),b=m(81488),R=m(30259),O=m(64519),H=m(51227),W=m(57160),G=m(17518),Z=n.PROPER,Q=n.CONFIGURABLE,Y=G.IteratorPrototype,ue=G.BUGGY_SAFARI_ITERATORS,ne=H("iterator"),te="values",oe="entries",q=function(){return this};T.exports=function(J,F,fe,K,ie,le,re){u(fe,F,K);var Le,Ue,He,Re=function(je){if(je===ie&&Te)return Te;if(!ue&&je in Pe)return Pe[je];switch(je){case"keys":case te:case oe:return function(){return new fe(this,je)}}return function(){return new fe(this)}},de=F+" Iterator",ve=!1,Pe=J.prototype,Se=Pe[ne]||Pe["@@iterator"]||ie&&Pe[ie],Te=!ue&&Se||Re(ie),Ve="Array"==F&&Pe.entries||Se;if(Ve&&(Le=h(Ve.call(new J)))!==Object.prototype&&Le.next&&(!s&&h(Le)!==Y&&(_?_(Le,Y):l(Le[ne])||O(Le,ne,q)),b(Le,de,!0,!0),s&&(W[de]=q)),Z&&ie==te&&Se&&Se.name!==te&&(!s&&Q?R(Pe,"name",te):(ve=!0,Te=function(){return S(Se,this)})),ie)if(Ue={values:Re(te),keys:le?Te:Re("keys"),entries:Re(oe)},re)for(He in Ue)(ue||ve||!(He in Pe))&&O(Pe,He,Ue[He]);else y({target:F,proto:!0,forced:ue||ve},Ue);return(!s||re)&&Pe[ne]!==Te&&O(Pe,ne,Te,{name:ie}),W[F]=Te,Ue}},35985:(T,I,m)=>{var y=m(35361),S=m(63262),s=m(12506),n=m(38360).f;T.exports=function(l){var u=y.Symbol||(y.Symbol={});S(u,l)||n(u,l,{value:s.f(l)})}},93628:(T,I,m)=>{var y=m(72194);T.exports=!y(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},67386:(T,I,m)=>{var y=m(71186),S=m(4559),s=y.document,n=S(s)&&S(s.createElement);T.exports=function(l){return n?s.createElement(l):{}}},27634:T=>{T.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},33700:T=>{T.exports="object"==typeof window},33763:(T,I,m)=>{var y=m(96535),S=m(71186);T.exports=/ipad|iphone|ipod/i.test(y)&&void 0!==S.Pebble},30346:(T,I,m)=>{var y=m(96535);T.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(y)},62151:(T,I,m)=>{var y=m(36166),S=m(71186);T.exports="process"==y(S.process)},145:(T,I,m)=>{var y=m(96535);T.exports=/web0s(?!.*chrome)/i.test(y)},96535:(T,I,m)=>{var y=m(31542);T.exports=y("navigator","userAgent")||""},47803:(T,I,m)=>{var h,_,y=m(71186),S=m(96535),s=y.process,n=y.Deno,l=s&&s.versions||n&&n.version,u=l&&l.v8;u&&(_=(h=u.split("."))[0]>0&&h[0]<4?1:+(h[0]+h[1])),!_&&S&&(!(h=S.match(/Edge\/(\d+)/))||h[1]>=74)&&(h=S.match(/Chrome\/(\d+)/))&&(_=+h[1]),T.exports=_},27824:(T,I,m)=>{var y=m(35361);T.exports=function(S){return y[S+"Prototype"]}},30412:T=>{T.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},59154:(T,I,m)=>{var y=m(72194),S=m(79695);T.exports=!y(function(){var s=Error("a");return!("stack"in s)||(Object.defineProperty(s,"stack",S(1,7)),7!==s.stack)})},47695:(T,I,m)=>{"use strict";var y=m(71186),S=m(27549),s=m(83232),n=m(89982),l=m(3182).f,u=m(33699),h=m(35361),_=m(56875),b=m(30259),R=m(63262),O=function(H){var W=function(G,Z,Q){if(this instanceof W){switch(arguments.length){case 0:return new H;case 1:return new H(G);case 2:return new H(G,Z)}return new H(G,Z,Q)}return S(H,this,arguments)};return W.prototype=H.prototype,W};T.exports=function(H,W){var oe,q,J,F,fe,K,ie,le,G=H.target,Z=H.global,Q=H.stat,Y=H.proto,ue=Z?y:Q?y[G]:(y[G]||{}).prototype,ne=Z?h:h[G]||b(h,G,{})[G],he=ne.prototype;for(J in W)oe=!u(Z?J:G+(Q?".":"#")+J,H.forced)&&ue&&R(ue,J),fe=ne[J],oe&&(K=H.noTargetGet?(le=l(ue,J))&&le.value:ue[J]),F=oe&&K?K:W[J],(!oe||typeof fe!=typeof F)&&(ie=H.bind&&oe?_(F,y):H.wrap&&oe?O(F):Y&&n(F)?s(F):F,(H.sham||F&&F.sham||fe&&fe.sham)&&b(ie,"sham",!0),b(ne,J,ie),Y&&(R(h,q=G+"Prototype")||b(h,q,{}),b(h[q],J,F),H.real&&he&&!he[J]&&b(he,J,F)))}},72194:T=>{T.exports=function(I){try{return!!I()}catch(m){return!0}}},418:(T,I,m)=>{var y=m(72194);T.exports=!y(function(){return Object.isExtensible(Object.preventExtensions({}))})},27549:T=>{var I=Function.prototype,m=I.apply,S=I.call;T.exports="object"==typeof Reflect&&Reflect.apply||(I.bind?S.bind(m):function(){return S.apply(m,arguments)})},56875:(T,I,m)=>{var y=m(83232),S=m(62057),s=y(y.bind);T.exports=function(n,l){return S(n),void 0===l?n:s?s(n,l):function(){return n.apply(l,arguments)}}},74217:T=>{var I=Function.prototype.call;T.exports=I.bind?I.bind(I):function(){return I.apply(I,arguments)}},88197:(T,I,m)=>{var y=m(93628),S=m(63262),s=Function.prototype,n=y&&Object.getOwnPropertyDescriptor,l=S(s,"name"),u=l&&"something"===function(){}.name,h=l&&(!y||y&&n(s,"name").configurable);T.exports={EXISTS:l,PROPER:u,CONFIGURABLE:h}},83232:T=>{var I=Function.prototype,m=I.bind,y=I.call,S=m&&m.bind(y);T.exports=m?function(s){return s&&S(y,s)}:function(s){return s&&function(){return y.apply(s,arguments)}}},31542:(T,I,m)=>{var y=m(35361),S=m(71186),s=m(89982),n=function(l){return s(l)?l:void 0};T.exports=function(l,u){return arguments.length<2?n(y[l])||n(S[l]):y[l]&&y[l][u]||S[l]&&S[l][u]}},27556:(T,I,m)=>{var y=m(36346),S=m(82209),s=m(57160),l=m(51227)("iterator");T.exports=function(u){if(null!=u)return S(u,l)||S(u,"@@iterator")||s[y(u)]}},80009:(T,I,m)=>{var y=m(71186),S=m(74217),s=m(62057),n=m(64808),l=m(75885),u=m(27556),h=y.TypeError;T.exports=function(_,b){var R=arguments.length<2?u(_):b;if(s(R))return n(S(R,_));throw h(l(_)+" is not iterable")}},82209:(T,I,m)=>{var y=m(62057);T.exports=function(S,s){var n=S[s];return null==n?void 0:y(n)}},71186:T=>{var I=function(m){return m&&m.Math==Math&&m};T.exports=I("object"==typeof globalThis&&globalThis)||I("object"==typeof window&&window)||I("object"==typeof self&&self)||I("object"==typeof global&&global)||function(){return this}()||Function("return this")()},63262:(T,I,m)=>{var y=m(83232),S=m(12784),s=y({}.hasOwnProperty);T.exports=Object.hasOwn||function(l,u){return s(S(l),u)}},16998:T=>{T.exports={}},38478:(T,I,m)=>{var y=m(71186);T.exports=function(S,s){var n=y.console;n&&n.error&&(1==arguments.length?n.error(S):n.error(S,s))}},44737:(T,I,m)=>{var y=m(31542);T.exports=y("document","documentElement")},36546:(T,I,m)=>{var y=m(93628),S=m(72194),s=m(67386);T.exports=!y&&!S(function(){return 7!=Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a})},28560:(T,I,m)=>{var y=m(71186),S=m(83232),s=m(72194),n=m(36166),l=y.Object,u=S("".split);T.exports=s(function(){return!l("z").propertyIsEnumerable(0)})?function(h){return"String"==n(h)?u(h,""):l(h)}:l},96307:(T,I,m)=>{var y=m(83232),S=m(89982),s=m(85452),n=y(Function.toString);S(s.inspectSource)||(s.inspectSource=function(l){return n(l)}),T.exports=s.inspectSource},369:(T,I,m)=>{var y=m(4559),S=m(30259);T.exports=function(s,n){y(n)&&"cause"in n&&S(s,"cause",n.cause)}},77699:(T,I,m)=>{var y=m(47695),S=m(83232),s=m(16998),n=m(4559),l=m(63262),u=m(38360).f,h=m(80679),_=m(22690),b=m(67616),R=m(39900),O=m(418),H=!1,W=R("meta"),G=0,Z=function(te){u(te,W,{value:{objectID:"O"+G++,weakData:{}}})},he=T.exports={enable:function(){he.enable=function(){},H=!0;var te=h.f,oe=S([].splice),q={};q[W]=1,te(q).length&&(h.f=function(J){for(var F=te(J),fe=0,K=F.length;fe<K;fe++)if(F[fe]===W){oe(F,fe,1);break}return F},y({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:_.f}))},fastKey:function(te,oe){if(!n(te))return"symbol"==typeof te?te:("string"==typeof te?"S":"P")+te;if(!l(te,W)){if(!b(te))return"F";if(!oe)return"E";Z(te)}return te[W].objectID},getWeakData:function(te,oe){if(!l(te,W)){if(!b(te))return!0;if(!oe)return!1;Z(te)}return te[W].weakData},onFreeze:function(te){return O&&H&&b(te)&&!l(te,W)&&Z(te),te}};s[W]=!0},59066:(T,I,m)=>{var W,G,Z,y=m(43491),S=m(71186),s=m(83232),n=m(4559),l=m(30259),u=m(63262),h=m(85452),_=m(71063),b=m(16998),R="Object already initialized",O=S.TypeError;if(y||h.state){var ue=h.state||(h.state=new(0,S.WeakMap)),ne=s(ue.get),he=s(ue.has),te=s(ue.set);W=function(q,J){if(he(ue,q))throw new O(R);return J.facade=q,te(ue,q,J),J},G=function(q){return ne(ue,q)||{}},Z=function(q){return he(ue,q)}}else{var oe=_("state");b[oe]=!0,W=function(q,J){if(u(q,oe))throw new O(R);return J.facade=q,l(q,oe,J),J},G=function(q){return u(q,oe)?q[oe]:{}},Z=function(q){return u(q,oe)}}T.exports={set:W,get:G,has:Z,enforce:function(q){return Z(q)?G(q):W(q,{})},getterFor:function(q){return function(J){var F;if(!n(J)||(F=G(J)).type!==q)throw O("Incompatible receiver, "+q+" required");return F}}}},23969:(T,I,m)=>{var y=m(51227),S=m(57160),s=y("iterator"),n=Array.prototype;T.exports=function(l){return void 0!==l&&(S.Array===l||n[s]===l)}},21284:(T,I,m)=>{var y=m(36166);T.exports=Array.isArray||function(s){return"Array"==y(s)}},89982:T=>{T.exports=function(I){return"function"==typeof I}},2043:(T,I,m)=>{var y=m(83232),S=m(72194),s=m(89982),n=m(36346),l=m(31542),u=m(96307),h=function(){},_=[],b=l("Reflect","construct"),R=/^\s*(?:class|function)\b/,O=y(R.exec),H=!R.exec(h),W=function(Z){if(!s(Z))return!1;try{return b(h,_,Z),!0}catch(Q){return!1}};T.exports=!b||S(function(){var Z;return W(W.call)||!W(Object)||!W(function(){Z=!0})||Z})?function(Z){if(!s(Z))return!1;switch(n(Z)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return H||!!O(R,u(Z))}:W},33699:(T,I,m)=>{var y=m(72194),S=m(89982),s=/#|\.prototype\./,n=function(b,R){var O=u[l(b)];return O==_||O!=h&&(S(R)?y(R):!!R)},l=n.normalize=function(b){return String(b).replace(s,".").toLowerCase()},u=n.data={},h=n.NATIVE="N",_=n.POLYFILL="P";T.exports=n},4559:(T,I,m)=>{var y=m(89982);T.exports=function(S){return"object"==typeof S?null!==S:y(S)}},83546:T=>{T.exports=!0},9463:(T,I,m)=>{var y=m(4559),S=m(36166),n=m(51227)("match");T.exports=function(l){var u;return y(l)&&(void 0!==(u=l[n])?!!u:"RegExp"==S(l))}},92271:(T,I,m)=>{var y=m(71186),S=m(31542),s=m(89982),n=m(49778),l=m(43065),u=y.Object;T.exports=l?function(h){return"symbol"==typeof h}:function(h){var _=S("Symbol");return s(_)&&n(_.prototype,u(h))}},64837:(T,I,m)=>{var y=m(71186),S=m(56875),s=m(74217),n=m(64808),l=m(75885),u=m(23969),h=m(50842),_=m(49778),b=m(80009),R=m(27556),O=m(48508),H=y.TypeError,W=function(Z,Q){this.stopped=Z,this.result=Q},G=W.prototype;T.exports=function(Z,Q,Y){var q,J,F,fe,K,ie,le,ne=!(!Y||!Y.AS_ENTRIES),he=!(!Y||!Y.IS_ITERATOR),te=!(!Y||!Y.INTERRUPTED),oe=S(Q,Y&&Y.that),re=function(de){return q&&O(q,"normal",de),new W(!0,de)},Re=function(de){return ne?(n(de),te?oe(de[0],de[1],re):oe(de[0],de[1])):te?oe(de,re):oe(de)};if(he)q=Z;else{if(!(J=R(Z)))throw H(l(Z)+" is not iterable");if(u(J)){for(F=0,fe=h(Z);fe>F;F++)if((K=Re(Z[F]))&&_(G,K))return K;return new W(!1)}q=b(Z,J)}for(ie=q.next;!(le=s(ie,q)).done;){try{K=Re(le.value)}catch(de){O(q,"throw",de)}if("object"==typeof K&&K&&_(G,K))return K}return new W(!1)}},48508:(T,I,m)=>{var y=m(74217),S=m(64808),s=m(82209);T.exports=function(n,l,u){var h,_;S(n);try{if(!(h=s(n,"return"))){if("throw"===l)throw u;return u}h=y(h,n)}catch(b){_=!0,h=b}if("throw"===l)throw u;if(_)throw h;return S(h),u}},17518:(T,I,m)=>{"use strict";var R,O,H,y=m(72194),S=m(89982),s=m(47579),n=m(41340),l=m(64519),u=m(51227),h=m(83546),_=u("iterator"),b=!1;[].keys&&("next"in(H=[].keys())?(O=n(n(H)))!==Object.prototype&&(R=O):b=!0),null==R||y(function(){var G={};return R[_].call(G)!==G})?R={}:h&&(R=s(R)),S(R[_])||l(R,_,function(){return this}),T.exports={IteratorPrototype:R,BUGGY_SAFARI_ITERATORS:b}},57160:T=>{T.exports={}},50842:(T,I,m)=>{var y=m(71673);T.exports=function(S){return y(S.length)}},84607:(T,I,m)=>{var Z,Q,Y,ue,ne,he,te,oe,y=m(71186),S=m(56875),s=m(3182).f,n=m(20284).set,l=m(30346),u=m(33763),h=m(145),_=m(62151),b=y.MutationObserver||y.WebKitMutationObserver,R=y.document,O=y.process,H=y.Promise,W=s(y,"queueMicrotask"),G=W&&W.value;G||(Z=function(){var q,J;for(_&&(q=O.domain)&&q.exit();Q;){J=Q.fn,Q=Q.next;try{J()}catch(F){throw Q?ue():Y=void 0,F}}Y=void 0,q&&q.enter()},l||_||h||!b||!R?!u&&H&&H.resolve?((te=H.resolve(void 0)).constructor=H,oe=S(te.then,te),ue=function(){oe(Z)}):_?ue=function(){O.nextTick(Z)}:(n=S(n,y),ue=function(){n(Z)}):(ne=!0,he=R.createTextNode(""),new b(Z).observe(he,{characterData:!0}),ue=function(){he.data=ne=!ne})),T.exports=G||function(q){var J={fn:q,next:void 0};Y&&(Y.next=J),Q||(Q=J,ue()),Y=J}},98133:(T,I,m)=>{var y=m(71186);T.exports=y.Promise},96596:(T,I,m)=>{var y=m(47803),S=m(72194);T.exports=!!Object.getOwnPropertySymbols&&!S(function(){var s=Symbol();return!String(s)||!(Object(s)instanceof Symbol)||!Symbol.sham&&y&&y<41})},20836:(T,I,m)=>{var y=m(72194),S=m(51227),s=m(83546),n=S("iterator");T.exports=!y(function(){var l=new URL("b?a=1&b=2&c=3","http://a"),u=l.searchParams,h="";return l.pathname="c%20d",u.forEach(function(_,b){u.delete("b"),h+=b+_}),s&&!l.toJSON||!u.sort||"http://a/c%20d?a=1&c=3"!==l.href||"3"!==u.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!u[n]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==h||"x"!==new URL("http://x",void 0).host})},43491:(T,I,m)=>{var y=m(71186),S=m(89982),s=m(96307),n=y.WeakMap;T.exports=S(n)&&/native code/.test(s(n))},86343:(T,I,m)=>{"use strict";var y=m(62057),S=function(s){var n,l;this.promise=new s(function(u,h){if(void 0!==n||void 0!==l)throw TypeError("Bad Promise constructor");n=u,l=h}),this.resolve=y(n),this.reject=y(l)};T.exports.f=function(s){return new S(s)}},23895:(T,I,m)=>{var y=m(40208);T.exports=function(S,s){return void 0===S?arguments.length<2?"":s:y(S)}},72566:(T,I,m)=>{var y=m(71186),S=m(9463),s=y.TypeError;T.exports=function(n){if(S(n))throw s("The method doesn't accept regular expressions");return n}},49855:(T,I,m)=>{"use strict";var y=m(93628),S=m(83232),s=m(74217),n=m(72194),l=m(44637),u=m(39557),h=m(52750),_=m(12784),b=m(28560),R=Object.assign,O=Object.defineProperty,H=S([].concat);T.exports=!R||n(function(){if(y&&1!==R({b:1},R(O({},"a",{enumerable:!0,get:function(){O(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var W={},G={},Z=Symbol(),Q="abcdefghijklmnopqrst";return W[Z]=7,Q.split("").forEach(function(Y){G[Y]=Y}),7!=R({},W)[Z]||l(R({},G)).join("")!=Q})?function(G,Z){for(var Q=_(G),Y=arguments.length,ue=1,ne=u.f,he=h.f;Y>ue;)for(var F,te=b(arguments[ue++]),oe=ne?H(l(te),ne(te)):l(te),q=oe.length,J=0;q>J;)F=oe[J++],(!y||s(he,te,F))&&(Q[F]=te[F]);return Q}:R},47579:(T,I,m)=>{var Y,y=m(64808),S=m(8584),s=m(30412),n=m(16998),l=m(44737),u=m(67386),h=m(71063),R="prototype",O="script",H=h("IE_PROTO"),W=function(){},G=function(ne){return"<"+O+">"+ne+"</"+O+">"},Z=function(ne){ne.write(G("")),ne.close();var he=ne.parentWindow.Object;return ne=null,he},ue=function(){try{Y=new ActiveXObject("htmlfile")}catch(he){}ue="undefined"!=typeof document?document.domain&&Y?Z(Y):function(){var te,ne=u("iframe");return ne.style.display="none",l.appendChild(ne),ne.src=String("javascript:"),(te=ne.contentWindow.document).open(),te.write(G("document.F=Object")),te.close(),te.F}():Z(Y);for(var ne=s.length;ne--;)delete ue[R][s[ne]];return ue()};n[H]=!0,T.exports=Object.create||function(he,te){var oe;return null!==he?(W[R]=y(he),oe=new W,W[R]=null,oe[H]=he):oe=ue(),void 0===te?oe:S(oe,te)}},8584:(T,I,m)=>{var y=m(93628),S=m(38360),s=m(64808),n=m(38611),l=m(44637);T.exports=y?Object.defineProperties:function(h,_){s(h);for(var W,b=n(_),R=l(_),O=R.length,H=0;O>H;)S.f(h,W=R[H++],b[W]);return h}},38360:(T,I,m)=>{var y=m(71186),S=m(93628),s=m(36546),n=m(64808),l=m(66943),u=y.TypeError,h=Object.defineProperty;I.f=S?h:function(b,R,O){if(n(b),R=l(R),n(O),s)try{return h(b,R,O)}catch(H){}if("get"in O||"set"in O)throw u("Accessors not supported");return"value"in O&&(b[R]=O.value),b}},3182:(T,I,m)=>{var y=m(93628),S=m(74217),s=m(52750),n=m(79695),l=m(38611),u=m(66943),h=m(63262),_=m(36546),b=Object.getOwnPropertyDescriptor;I.f=y?b:function(O,H){if(O=l(O),H=u(H),_)try{return b(O,H)}catch(W){}if(h(O,H))return n(!S(s.f,O,H),O[H])}},22690:(T,I,m)=>{var y=m(36166),S=m(38611),s=m(80679).f,n=m(60462),l="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];T.exports.f=function(_){return l&&"Window"==y(_)?function(h){try{return s(h)}catch(_){return n(l)}}(_):s(S(_))}},80679:(T,I,m)=>{var y=m(20552),s=m(30412).concat("length","prototype");I.f=Object.getOwnPropertyNames||function(l){return y(l,s)}},39557:(T,I)=>{I.f=Object.getOwnPropertySymbols},41340:(T,I,m)=>{var y=m(71186),S=m(63262),s=m(89982),n=m(12784),l=m(71063),u=m(65192),h=l("IE_PROTO"),_=y.Object,b=_.prototype;T.exports=u?_.getPrototypeOf:function(R){var O=n(R);if(S(O,h))return O[h];var H=O.constructor;return s(H)&&O instanceof H?H.prototype:O instanceof _?b:null}},67616:(T,I,m)=>{var y=m(72194),S=m(4559),s=m(36166),n=m(99844),l=Object.isExtensible,u=y(function(){l(1)});T.exports=u||n?function(_){return!(!S(_)||n&&"ArrayBuffer"==s(_))&&(!l||l(_))}:l},49778:(T,I,m)=>{var y=m(83232);T.exports=y({}.isPrototypeOf)},20552:(T,I,m)=>{var y=m(83232),S=m(63262),s=m(38611),n=m(77118).indexOf,l=m(16998),u=y([].push);T.exports=function(h,_){var H,b=s(h),R=0,O=[];for(H in b)!S(l,H)&&S(b,H)&&u(O,H);for(;_.length>R;)S(b,H=_[R++])&&(~n(O,H)||u(O,H));return O}},44637:(T,I,m)=>{var y=m(20552),S=m(30412);T.exports=Object.keys||function(n){return y(n,S)}},52750:(T,I)=>{"use strict";var m={}.propertyIsEnumerable,y=Object.getOwnPropertyDescriptor,S=y&&!m.call({1:2},1);I.f=S?function(n){var l=y(this,n);return!!l&&l.enumerable}:m},86447:(T,I,m)=>{var y=m(83232),S=m(64808),s=m(57690);T.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var u,n=!1,l={};try{(u=y(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(l,[]),n=l instanceof Array}catch(h){}return function(_,b){return S(_),s(b),n?u(_,b):_.__proto__=b,_}}():void 0)},94559:(T,I,m)=>{var y=m(93628),S=m(83232),s=m(44637),n=m(38611),u=S(m(52750).f),h=S([].push),_=function(b){return function(R){for(var Q,O=n(R),H=s(O),W=H.length,G=0,Z=[];W>G;)Q=H[G++],(!y||u(O,Q))&&h(Z,b?[Q,O[Q]]:O[Q]);return Z}};T.exports={entries:_(!0),values:_(!1)}},71470:(T,I,m)=>{"use strict";var y=m(98086),S=m(36346);T.exports=y?{}.toString:function(){return"[object "+S(this)+"]"}},91421:(T,I,m)=>{var y=m(71186),S=m(74217),s=m(89982),n=m(4559),l=y.TypeError;T.exports=function(u,h){var _,b;if("string"===h&&s(_=u.toString)&&!n(b=S(_,u))||s(_=u.valueOf)&&!n(b=S(_,u))||"string"!==h&&s(_=u.toString)&&!n(b=S(_,u)))return b;throw l("Can't convert object to primitive value")}},69093:(T,I,m)=>{var y=m(31542),S=m(83232),s=m(80679),n=m(39557),l=m(64808),u=S([].concat);T.exports=y("Reflect","ownKeys")||function(_){var b=s.f(l(_)),R=n.f;return R?u(b,R(_)):b}},35361:T=>{T.exports={}},83061:T=>{T.exports=function(I){try{return{error:!1,value:I()}}catch(m){return{error:!0,value:m}}}},93186:(T,I,m)=>{var y=m(64808),S=m(4559),s=m(86343);T.exports=function(n,l){if(y(n),S(l)&&l.constructor===n)return l;var u=s.f(n);return(0,u.resolve)(l),u.promise}},61306:(T,I,m)=>{var y=m(64519);T.exports=function(S,s,n){for(var l in s)n&&n.unsafe&&S[l]?S[l]=s[l]:y(S,l,s[l],n);return S}},64519:(T,I,m)=>{var y=m(30259);T.exports=function(S,s,n,l){l&&l.enumerable?S[s]=n:y(S,s,n)}},94087:(T,I,m)=>{var S=m(71186).TypeError;T.exports=function(s){if(null==s)throw S("Can't call method on "+s);return s}},56836:(T,I,m)=>{var y=m(71186),S=Object.defineProperty;T.exports=function(s,n){try{S(y,s,{value:n,configurable:!0,writable:!0})}catch(l){y[s]=n}return n}},36524:(T,I,m)=>{"use strict";var y=m(31542),S=m(38360),s=m(51227),n=m(93628),l=s("species");T.exports=function(u){var h=y(u);n&&h&&!h[l]&&(0,S.f)(h,l,{configurable:!0,get:function(){return this}})}},81488:(T,I,m)=>{var y=m(98086),S=m(38360).f,s=m(30259),n=m(63262),l=m(71470),h=m(51227)("toStringTag");T.exports=function(_,b,R,O){if(_){var H=R?_:_.prototype;n(H,h)||S(H,h,{configurable:!0,value:b}),O&&!y&&s(H,"toString",l)}}},71063:(T,I,m)=>{var y=m(22196),S=m(39900),s=y("keys");T.exports=function(n){return s[n]||(s[n]=S(n))}},85452:(T,I,m)=>{var y=m(71186),S=m(56836),s="__core-js_shared__",n=y[s]||S(s,{});T.exports=n},22196:(T,I,m)=>{var y=m(83546),S=m(85452);(T.exports=function(s,n){return S[s]||(S[s]=void 0!==n?n:{})})("versions",[]).push({version:"3.19.1",mode:y?"pure":"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})},21379:(T,I,m)=>{var y=m(64808),S=m(12144),n=m(51227)("species");T.exports=function(l,u){var _,h=y(l).constructor;return void 0===h||null==(_=y(h)[n])?u:S(_)}},12206:(T,I,m)=>{var y=m(83232),S=m(74518),s=m(40208),n=m(94087),l=y("".charAt),u=y("".charCodeAt),h=y("".slice),_=function(b){return function(R,O){var Z,Q,H=s(n(R)),W=S(O),G=H.length;return W<0||W>=G?b?"":void 0:(Z=u(H,W))<55296||Z>56319||W+1===G||(Q=u(H,W+1))<56320||Q>57343?b?l(H,W):Z:b?h(H,W,W+2):Q-56320+(Z-55296<<10)+65536}};T.exports={codeAt:_(!1),charAt:_(!0)}},20284:(T,I,m)=>{var oe,q,J,F,y=m(71186),S=m(27549),s=m(56875),n=m(89982),l=m(63262),u=m(72194),h=m(44737),_=m(60462),b=m(67386),R=m(30346),O=m(62151),H=y.setImmediate,W=y.clearImmediate,G=y.process,Z=y.Dispatch,Q=y.Function,Y=y.MessageChannel,ue=y.String,ne=0,he={},te="onreadystatechange";try{oe=y.location}catch(re){}var fe=function(re){if(l(he,re)){var Re=he[re];delete he[re],Re()}},K=function(re){return function(){fe(re)}},ie=function(re){fe(re.data)},le=function(re){y.postMessage(ue(re),oe.protocol+"//"+oe.host)};(!H||!W)&&(H=function(Re){var de=_(arguments,1);return he[++ne]=function(){S(n(Re)?Re:Q(Re),void 0,de)},q(ne),ne},W=function(Re){delete he[Re]},O?q=function(re){G.nextTick(K(re))}:Z&&Z.now?q=function(re){Z.now(K(re))}:Y&&!R?(F=(J=new Y).port2,J.port1.onmessage=ie,q=s(F.postMessage,F)):y.addEventListener&&n(y.postMessage)&&!y.importScripts&&oe&&"file:"!==oe.protocol&&!u(le)?(q=le,y.addEventListener("message",ie,!1)):q=te in b("script")?function(re){h.appendChild(b("script"))[te]=function(){h.removeChild(this),fe(re)}}:function(re){setTimeout(K(re),0)}),T.exports={set:H,clear:W}},40771:(T,I,m)=>{var y=m(74518),S=Math.max,s=Math.min;T.exports=function(n,l){var u=y(n);return u<0?S(u+l,0):s(u,l)}},38611:(T,I,m)=>{var y=m(28560),S=m(94087);T.exports=function(s){return y(S(s))}},74518:T=>{var I=Math.ceil,m=Math.floor;T.exports=function(y){var S=+y;return S!=S||0===S?0:(S>0?m:I)(S)}},71673:(T,I,m)=>{var y=m(74518),S=Math.min;T.exports=function(s){return s>0?S(y(s),9007199254740991):0}},12784:(T,I,m)=>{var y=m(71186),S=m(94087),s=y.Object;T.exports=function(n){return s(S(n))}},11436:(T,I,m)=>{var y=m(71186),S=m(74217),s=m(4559),n=m(92271),l=m(82209),u=m(91421),h=m(51227),_=y.TypeError,b=h("toPrimitive");T.exports=function(R,O){if(!s(R)||n(R))return R;var W,H=l(R,b);if(H){if(void 0===O&&(O="default"),W=S(H,R,O),!s(W)||n(W))return W;throw _("Can't convert object to primitive value")}return void 0===O&&(O="number"),u(R,O)}},66943:(T,I,m)=>{var y=m(11436),S=m(92271);T.exports=function(s){var n=y(s,"string");return S(n)?n:n+""}},98086:(T,I,m)=>{var s={};s[m(51227)("toStringTag")]="z",T.exports="[object z]"===String(s)},40208:(T,I,m)=>{var y=m(71186),S=m(36346),s=y.String;T.exports=function(n){if("Symbol"===S(n))throw TypeError("Cannot convert a Symbol value to a string");return s(n)}},75885:(T,I,m)=>{var S=m(71186).String;T.exports=function(s){try{return S(s)}catch(n){return"Object"}}},39900:(T,I,m)=>{var y=m(83232),S=0,s=Math.random(),n=y(1..toString);T.exports=function(l){return"Symbol("+(void 0===l?"":l)+")_"+n(++S+s,36)}},43065:(T,I,m)=>{var y=m(96596);T.exports=y&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},12506:(T,I,m)=>{var y=m(51227);I.f=y},51227:(T,I,m)=>{var y=m(71186),S=m(22196),s=m(63262),n=m(39900),l=m(96596),u=m(43065),h=S("wks"),_=y.Symbol,b=_&&_.for,R=u?_:_&&_.withoutSetter||n;T.exports=function(O){if(!s(h,O)||!l&&"string"!=typeof h[O]){var H="Symbol."+O;h[O]=l&&s(_,O)?_[O]:u&&b?b(H):R(H)}return h[O]}},96476:(T,I,m)=>{"use strict";var y=m(47695),S=m(71186),s=m(49778),n=m(41340),l=m(86447),u=m(78356),h=m(47579),_=m(30259),b=m(79695),R=m(84089),O=m(369),H=m(64837),W=m(23895),G=m(51227),Z=m(59154),Q=G("toStringTag"),Y=S.Error,ue=[].push,ne=function(oe,q){var fe,J=arguments.length>2?arguments[2]:void 0,F=s(he,this);l?fe=l(new Y(void 0),F?n(this):he):(fe=F?this:h(he),_(fe,Q,"Error")),_(fe,"message",W(q,"")),Z&&_(fe,"stack",R(fe.stack,1)),O(fe,J);var K=[];return H(oe,ue,{that:K}),_(fe,"errors",K),fe};l?l(ne,Y):u(ne,Y);var he=ne.prototype=h(Y.prototype,{constructor:b(1,ne),message:b(1,""),name:b(1,"AggregateError")});y({global:!0},{AggregateError:ne})},80706:(T,I,m)=>{"use strict";var y=m(47695),S=m(71186),s=m(72194),n=m(21284),l=m(4559),u=m(12784),h=m(50842),_=m(68140),b=m(75458),R=m(63294),O=m(51227),H=m(47803),W=O("isConcatSpreadable"),G=9007199254740991,Z="Maximum allowed index exceeded",Q=S.TypeError,Y=H>=51||!s(function(){var te=[];return te[W]=!1,te.concat()[0]!==te}),ue=R("concat"),ne=function(te){if(!l(te))return!1;var oe=te[W];return void 0!==oe?!!oe:n(te)};y({target:"Array",proto:!0,forced:!Y||!ue},{concat:function(oe){var fe,K,ie,le,re,q=u(this),J=b(q,0),F=0;for(fe=-1,ie=arguments.length;fe<ie;fe++)if(ne(re=-1===fe?q:arguments[fe])){if(F+(le=h(re))>G)throw Q(Z);for(K=0;K<le;K++,F++)K in re&&_(J,F,re[K])}else{if(F>=G)throw Q(Z);_(J,F++,re)}return J.length=F,J}})},81136:(T,I,m)=>{"use strict";var y=m(47695),S=m(32794).filter;y({target:"Array",proto:!0,forced:!m(63294)("filter")},{filter:function(u){return S(this,u,arguments.length>1?arguments[1]:void 0)}})},89543:(T,I,m)=>{"use strict";var y=m(47695),S=m(32794).find,s=m(81382),n="find",l=!0;n in[]&&Array(1)[n](function(){l=!1}),y({target:"Array",proto:!0,forced:l},{find:function(h){return S(this,h,arguments.length>1?arguments[1]:void 0)}}),s(n)},46152:(T,I,m)=>{"use strict";var y=m(47695),S=m(7330);y({target:"Array",proto:!0,forced:[].forEach!=S},{forEach:S})},13122:(T,I,m)=>{var y=m(47695),S=m(96005);y({target:"Array",stat:!0,forced:!m(92807)(function(l){Array.from(l)})},{from:S})},96875:(T,I,m)=>{"use strict";var y=m(47695),S=m(77118).includes,s=m(81382);y({target:"Array",proto:!0},{includes:function(l){return S(this,l,arguments.length>1?arguments[1]:void 0)}}),s("includes")},22616:(T,I,m)=>{"use strict";var y=m(47695),S=m(83232),s=m(77118).indexOf,n=m(79444),l=S([].indexOf),u=!!l&&1/l([1],1,-0)<0,h=n("indexOf");y({target:"Array",proto:!0,forced:u||!h},{indexOf:function(b){var R=arguments.length>1?arguments[1]:void 0;return u?l(this,b,R)||0:s(this,b,R)}})},90418:(T,I,m)=>{m(47695)({target:"Array",stat:!0},{isArray:m(21284)})},68905:(T,I,m)=>{"use strict";var y=m(38611),S=m(81382),s=m(57160),n=m(59066),l=m(8672),u="Array Iterator",h=n.set,_=n.getterFor(u);T.exports=l(Array,"Array",function(b,R){h(this,{type:u,target:y(b),index:0,kind:R})},function(){var b=_(this),R=b.target,O=b.kind,H=b.index++;return!R||H>=R.length?(b.target=void 0,{value:void 0,done:!0}):"keys"==O?{value:H,done:!1}:"values"==O?{value:R[H],done:!1}:{value:[H,R[H]],done:!1}},"values"),s.Arguments=s.Array,S("keys"),S("values"),S("entries")},36850:(T,I,m)=>{"use strict";var y=m(47695),S=m(32794).map;y({target:"Array",proto:!0,forced:!m(63294)("map")},{map:function(u){return S(this,u,arguments.length>1?arguments[1]:void 0)}})},62693:(T,I,m)=>{"use strict";var y=m(47695),S=m(71186),s=m(21284),n=m(2043),l=m(4559),u=m(40771),h=m(50842),_=m(38611),b=m(68140),R=m(51227),O=m(63294),H=m(60462),W=O("slice"),G=R("species"),Z=S.Array,Q=Math.max;y({target:"Array",proto:!0,forced:!W},{slice:function(ue,ne){var J,F,fe,he=_(this),te=h(he),oe=u(ue,te),q=u(void 0===ne?te:ne,te);if(s(he)&&((n(J=he.constructor)&&(J===Z||s(J.prototype))||l(J)&&null===(J=J[G]))&&(J=void 0),J===Z||void 0===J))return H(he,oe,q);for(F=new(void 0===J?Z:J)(Q(q-oe,0)),fe=0;oe<q;oe++,fe++)oe in he&&b(F,fe,he[oe]);return F.length=fe,F}})},72101:(T,I,m)=>{"use strict";var y=m(47695),S=m(71186),s=m(40771),n=m(74518),l=m(50842),u=m(12784),h=m(75458),_=m(68140),R=m(63294)("splice"),O=S.TypeError,H=Math.max,W=Math.min,G=9007199254740991,Z="Maximum allowed length exceeded";y({target:"Array",proto:!0,forced:!R},{splice:function(Y,ue){var q,J,F,fe,K,ie,ne=u(this),he=l(ne),te=s(Y,he),oe=arguments.length;if(0===oe?q=J=0:1===oe?(q=0,J=he-te):(q=oe-2,J=W(H(n(ue),0),he-te)),he+q-J>G)throw O(Z);for(F=h(ne,J),fe=0;fe<J;fe++)(K=te+fe)in ne&&_(F,fe,ne[K]);if(F.length=J,q<J){for(fe=te;fe<he-J;fe++)ie=fe+q,(K=fe+J)in ne?ne[ie]=ne[K]:delete ne[ie];for(fe=he;fe>he-J+q;fe--)delete ne[fe-1]}else if(q>J)for(fe=he-J;fe>te;fe--)ie=fe+q-1,(K=fe+J-1)in ne?ne[ie]=ne[K]:delete ne[ie];for(fe=0;fe<q;fe++)ne[fe+te]=arguments[fe+2];return ne.length=he-J+q,F}})},39481:(T,I,m)=>{var y=m(47695),S=m(71186),s=m(31542),n=m(27549),l=m(83232),u=m(72194),h=S.Array,_=s("JSON","stringify"),b=l(/./.exec),R=l("".charAt),O=l("".charCodeAt),H=l("".replace),W=l(1..toString),G=/[\uD800-\uDFFF]/g,Z=/^[\uD800-\uDBFF]$/,Q=/^[\uDC00-\uDFFF]$/,Y=function(ne,he,te){var oe=R(te,he-1),q=R(te,he+1);return b(Z,ne)&&!b(Q,q)||b(Q,ne)&&!b(Z,oe)?"\\u"+W(O(ne,0),16):ne},ue=u(function(){return'"\\udf06\\ud834"'!==_("\udf06\ud834")||'"\\udead"'!==_("\udead")});_&&y({target:"JSON",stat:!0,forced:ue},{stringify:function(he,te,oe){for(var q=0,J=arguments.length,F=h(J);q<J;q++)F[q]=arguments[q];var fe=n(_,null,F);return"string"==typeof fe?H(fe,G,Y):fe}})},897:(T,I,m)=>{var y=m(71186);m(81488)(y.JSON,"JSON",!0)},6603:()=>{},1476:(T,I,m)=>{var y=m(47695),S=m(49855);y({target:"Object",stat:!0,forced:Object.assign!==S},{assign:S})},63851:(T,I,m)=>{var y=m(47695),S=m(93628);y({target:"Object",stat:!0,forced:!S,sham:!S},{defineProperties:m(8584)})},23179:(T,I,m)=>{var y=m(47695),S=m(93628);y({target:"Object",stat:!0,forced:!S,sham:!S},{defineProperty:m(38360).f})},69178:(T,I,m)=>{var y=m(47695),S=m(94559).entries;y({target:"Object",stat:!0},{entries:function(n){return S(n)}})},67827:(T,I,m)=>{var y=m(47695),S=m(72194),s=m(38611),n=m(3182).f,l=m(93628),u=S(function(){n(1)});y({target:"Object",stat:!0,forced:!l||u,sham:!l},{getOwnPropertyDescriptor:function(b,R){return n(s(b),R)}})},53603:(T,I,m)=>{var y=m(47695),S=m(93628),s=m(69093),n=m(38611),l=m(3182),u=m(68140);y({target:"Object",stat:!0,sham:!S},{getOwnPropertyDescriptors:function(_){for(var G,Z,b=n(_),R=l.f,O=s(b),H={},W=0;O.length>W;)void 0!==(Z=R(b,G=O[W++]))&&u(H,G,Z);return H}})},63596:(T,I,m)=>{var y=m(47695),S=m(12784),s=m(44637);y({target:"Object",stat:!0,forced:m(72194)(function(){s(1)})},{keys:function(h){return s(S(h))}})},94666:()=>{},5823:(T,I,m)=>{"use strict";var y=m(47695),S=m(74217),s=m(62057),n=m(86343),l=m(83061),u=m(64837);y({target:"Promise",stat:!0},{allSettled:function(_){var b=this,R=n.f(b),O=R.resolve,H=R.reject,W=l(function(){var G=s(b.resolve),Z=[],Q=0,Y=1;u(_,function(ue){var ne=Q++,he=!1;Y++,S(G,b,ue).then(function(te){he||(he=!0,Z[ne]={status:"fulfilled",value:te},--Y||O(Z))},function(te){he||(he=!0,Z[ne]={status:"rejected",reason:te},--Y||O(Z))})}),--Y||O(Z)});return W.error&&H(W.value),R.promise}})},78084:(T,I,m)=>{"use strict";var y=m(47695),S=m(62057),s=m(31542),n=m(74217),l=m(86343),u=m(83061),h=m(64837),_="No one promise resolved";y({target:"Promise",stat:!0},{any:function(R){var O=this,H=s("AggregateError"),W=l.f(O),G=W.resolve,Z=W.reject,Q=u(function(){var Y=S(O.resolve),ue=[],ne=0,he=1,te=!1;h(R,function(oe){var q=ne++,J=!1;he++,n(Y,O,oe).then(function(F){J||te||(te=!0,G(F))},function(F){J||te||(J=!0,ue[q]=F,--he||Z(new H(ue,_)))})}),--he||Z(new H(ue,_))});return Q.error&&Z(Q.value),W.promise}})},31296:(T,I,m)=>{"use strict";var y=m(47695),S=m(83546),s=m(98133),n=m(72194),l=m(31542),u=m(89982),h=m(21379),_=m(93186),b=m(64519);if(y({target:"Promise",proto:!0,real:!0,forced:!!s&&n(function(){s.prototype.finally.call({then:function(){}},function(){})})},{finally:function(H){var W=h(this,l("Promise")),G=u(H);return this.then(G?function(Z){return _(W,H()).then(function(){return Z})}:H,G?function(Z){return _(W,H()).then(function(){throw Z})}:H)}}),!S&&u(s)){var O=l("Promise").prototype.finally;s.prototype.finally!==O&&b(s.prototype,"finally",O,{unsafe:!0})}},47110:(T,I,m)=>{"use strict";var on,wi,fn,xn,y=m(47695),S=m(83546),s=m(71186),n=m(31542),l=m(74217),u=m(98133),h=m(64519),_=m(61306),b=m(86447),R=m(81488),O=m(36524),H=m(62057),W=m(89982),G=m(4559),Z=m(37368),Q=m(96307),Y=m(64837),ue=m(92807),ne=m(21379),he=m(20284).set,te=m(84607),oe=m(93186),q=m(38478),J=m(86343),F=m(83061),fe=m(59066),K=m(33699),ie=m(51227),le=m(33700),re=m(62151),Re=m(47803),de=ie("species"),ve="Promise",Pe=fe.get,Se=fe.set,Te=fe.getterFor(ve),Ve=u&&u.prototype,Le=u,Ue=Ve,He=s.TypeError,je=s.document,ut=s.process,gt=J.f,At=gt,mi=!!(je&&je.createEvent&&s.dispatchEvent),Bi=W(s.PromiseRejectionEvent),Ci="unhandledrejection",Yt=!1,Ie=K(ve,function(){var Ne=Q(Le),Ke=Ne!==String(Le);if(!Ke&&66===Re||S&&!Ue.finally)return!0;if(Re>=51&&/native code/.test(Ne))return!1;var me=new Le(function(ct){ct(1)}),Ae=function(ct){ct(function(){},function(){})};return(me.constructor={})[de]=Ae,!(Yt=me.then(function(){})instanceof Ae)||!Ke&&le&&!Bi}),Me=Ie||!ue(function(Ne){Le.all(Ne).catch(function(){})}),Xt=function(Ne){var Ke;return!(!G(Ne)||!W(Ke=Ne.then))&&Ke},qt=function(Ne,Ke){if(!Ne.notified){Ne.notified=!0;var me=Ne.reactions;te(function(){for(var Ae=Ne.value,Xe=1==Ne.state,ct=0;me.length>ct;){var di,gn,lo,Ii=me[ct++],dt=Xe?Ii.ok:Ii.fail,_t=Ii.resolve,Ot=Ii.reject,Vt=Ii.domain;try{dt?(Xe||(2===Ne.rejection&&An(Ne),Ne.rejection=1),!0===dt?di=Ae:(Vt&&Vt.enter(),di=dt(Ae),Vt&&(Vt.exit(),lo=!0)),di===Ii.promise?Ot(He("Promise-chain cycle")):(gn=Xt(di))?l(gn,di,_t,Ot):_t(di)):Ot(Ae)}catch(qi){Vt&&!lo&&Vt.exit(),Ot(qi)}}Ne.reactions=[],Ne.notified=!1,Ke&&!Ne.rejection&&ei(Ne)})}},ai=function(Ne,Ke,me){var Ae,Xe;mi?((Ae=je.createEvent("Event")).promise=Ke,Ae.reason=me,Ae.initEvent(Ne,!1,!0),s.dispatchEvent(Ae)):Ae={promise:Ke,reason:me},!Bi&&(Xe=s["on"+Ne])?Xe(Ae):Ne===Ci&&q("Unhandled promise rejection",me)},ei=function(Ne){l(he,s,function(){var Xe,Ke=Ne.facade,me=Ne.value;if(Si(Ne)&&(Xe=F(function(){re?ut.emit("unhandledRejection",me,Ke):ai(Ci,Ke,me)}),Ne.rejection=re||Si(Ne)?2:1,Xe.error))throw Xe.value})},Si=function(Ne){return 1!==Ne.rejection&&!Ne.parent},An=function(Ne){l(he,s,function(){var Ke=Ne.facade;re?ut.emit("rejectionHandled",Ke):ai("rejectionhandled",Ke,Ne.value)})},fi=function(Ne,Ke,me){return function(Ae){Ne(Ke,Ae,me)}},at=function(Ne,Ke,me){Ne.done||(Ne.done=!0,me&&(Ne=me),Ne.value=Ke,Ne.state=2,qt(Ne,!0))},lt=function(Ne,Ke,me){if(!Ne.done){Ne.done=!0,me&&(Ne=me);try{if(Ne.facade===Ke)throw He("Promise can't be resolved itself");var Ae=Xt(Ke);Ae?te(function(){var Xe={done:!1};try{l(Ae,Ke,fi(lt,Xe,Ne),fi(at,Xe,Ne))}catch(ct){at(Xe,ct,Ne)}}):(Ne.value=Ke,Ne.state=1,qt(Ne,!1))}catch(Xe){at({done:!1},Xe,Ne)}}};if(Ie&&(Le=function(Ke){Z(this,Ue),H(Ke),l(on,this);var me=Pe(this);try{Ke(fi(lt,me),fi(at,me))}catch(Ae){at(me,Ae)}},(on=function(Ke){Se(this,{type:ve,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=_(Ue=Le.prototype,{then:function(Ke,me){var Ae=Te(this),Xe=Ae.reactions,ct=gt(ne(this,Le));return ct.ok=!W(Ke)||Ke,ct.fail=W(me)&&me,ct.domain=re?ut.domain:void 0,Ae.parent=!0,Xe[Xe.length]=ct,0!=Ae.state&&qt(Ae,!1),ct.promise},catch:function(Ne){return this.then(void 0,Ne)}}),wi=function(){var Ne=new on,Ke=Pe(Ne);this.promise=Ne,this.resolve=fi(lt,Ke),this.reject=fi(at,Ke)},J.f=gt=function(Ne){return Ne===Le||Ne===fn?new wi(Ne):At(Ne)},!S&&W(u)&&Ve!==Object.prototype)){xn=Ve.then,Yt||(h(Ve,"then",function(Ke,me){var Ae=this;return new Le(function(Xe,ct){l(xn,Ae,Xe,ct)}).then(Ke,me)},{unsafe:!0}),h(Ve,"catch",Ue.catch,{unsafe:!0}));try{delete Ve.constructor}catch(Ne){}b&&b(Ve,Ue)}y({global:!0,wrap:!0,forced:Ie},{Promise:Le}),R(Le,ve,!1,!0),O(ve),fn=n(ve),y({target:ve,stat:!0,forced:Ie},{reject:function(Ke){var me=gt(this);return l(me.reject,void 0,Ke),me.promise}}),y({target:ve,stat:!0,forced:S||Ie},{resolve:function(Ke){return oe(S&&this===fn?Le:this,Ke)}}),y({target:ve,stat:!0,forced:Me},{all:function(Ke){var me=this,Ae=gt(me),Xe=Ae.resolve,ct=Ae.reject,Ii=F(function(){var dt=H(me.resolve),_t=[],Ot=0,Vt=1;Y(Ke,function(di){var gn=Ot++,lo=!1;Vt++,l(dt,me,di).then(function(qi){lo||(lo=!0,_t[gn]=qi,--Vt||Xe(_t))},ct)}),--Vt||Xe(_t)});return Ii.error&&ct(Ii.value),Ae.promise},race:function(Ke){var me=this,Ae=gt(me),Xe=Ae.reject,ct=F(function(){var Ii=H(me.resolve);Y(Ke,function(dt){l(Ii,me,dt).then(Ae.resolve,Xe)})});return ct.error&&Xe(ct.value),Ae.promise}})},73609:()=>{},54840:(T,I,m)=>{"use strict";var y=m(47695),S=m(83232),s=m(72566),n=m(94087),l=m(40208),u=m(80736),h=S("".indexOf);y({target:"String",proto:!0,forced:!u("includes")},{includes:function(b){return!!~h(l(n(this)),l(s(b)),arguments.length>1?arguments[1]:void 0)}})},21446:(T,I,m)=>{"use strict";var y=m(12206).charAt,S=m(40208),s=m(59066),n=m(8672),l="String Iterator",u=s.set,h=s.getterFor(l);n(String,"String",function(_){u(this,{type:l,string:S(_),index:0})},function(){var H,b=h(this),R=b.string,O=b.index;return O>=R.length?{value:void 0,done:!0}:(H=y(R,O),b.index+=H.length,{value:H,done:!1})})},93784:(T,I,m)=>{"use strict";var Z,y=m(47695),S=m(83232),s=m(3182).f,n=m(71673),l=m(40208),u=m(72566),h=m(94087),_=m(80736),b=m(83546),R=S("".startsWith),O=S("".slice),H=Math.min,W=_("startsWith");y({target:"String",proto:!0,forced:!(!b&&!W&&(Z=s(String.prototype,"startsWith"),Z&&!Z.writable)||W)},{startsWith:function(Q){var Y=l(h(this));u(Q);var ue=n(H(arguments.length>1?arguments[1]:void 0,Y.length)),ne=l(Q);return R?R(Y,ne,ue):O(Y,ue,ue+ne.length)===ne}})},55623:(T,I,m)=>{m(35985)("asyncIterator")},19060:()=>{},43364:(T,I,m)=>{m(35985)("hasInstance")},97447:(T,I,m)=>{m(35985)("isConcatSpreadable")},70830:(T,I,m)=>{m(35985)("iterator")},5001:(T,I,m)=>{"use strict";var y=m(47695),S=m(71186),s=m(31542),n=m(27549),l=m(74217),u=m(83232),h=m(83546),_=m(93628),b=m(96596),R=m(72194),O=m(63262),H=m(21284),W=m(89982),G=m(4559),Z=m(49778),Q=m(92271),Y=m(64808),ue=m(12784),ne=m(38611),he=m(66943),te=m(40208),oe=m(79695),q=m(47579),J=m(44637),F=m(80679),fe=m(22690),K=m(39557),ie=m(3182),le=m(38360),re=m(52750),Re=m(60462),de=m(64519),ve=m(22196),Pe=m(71063),Se=m(16998),Te=m(39900),Ve=m(51227),Le=m(12506),Ue=m(35985),He=m(81488),je=m(59066),ut=m(32794).forEach,gt=Pe("hidden"),At="Symbol",mi="prototype",Bi=Ve("toPrimitive"),Ci=je.set,Et=je.getterFor(At),ui=Object[mi],mt=S.Symbol,nn=mt&&mt[mi],ze=S.TypeError,rn=S.QObject,Yt=s("JSON","stringify"),on=ie.f,wi=le.f,fn=fe.f,xn=re.f,Ie=u([].push),Me=ve("symbols"),Xt=ve("op-symbols"),qt=ve("string-to-symbol-registry"),ai=ve("symbol-to-string-registry"),ei=ve("wks"),Si=!rn||!rn[mi]||!rn[mi].findChild,An=_&&R(function(){return 7!=q(wi({},"a",{get:function(){return wi(this,"a",{value:7}).a}})).a})?function(dt,_t,Ot){var Vt=on(ui,_t);Vt&&delete ui[_t],wi(dt,_t,Ot),Vt&&dt!==ui&&wi(ui,_t,Vt)}:wi,fi=function(dt,_t){var Ot=Me[dt]=q(nn);return Ci(Ot,{type:At,tag:dt,description:_t}),_||(Ot.description=_t),Ot},at=function(_t,Ot,Vt){_t===ui&&at(Xt,Ot,Vt),Y(_t);var di=he(Ot);return Y(Vt),O(Me,di)?(Vt.enumerable?(O(_t,gt)&&_t[gt][di]&&(_t[gt][di]=!1),Vt=q(Vt,{enumerable:oe(0,!1)})):(O(_t,gt)||wi(_t,gt,oe(1,{})),_t[gt][di]=!0),An(_t,di,Vt)):wi(_t,di,Vt)},lt=function(_t,Ot){Y(_t);var Vt=ne(Ot),di=J(Vt).concat(Xe(Vt));return ut(di,function(gn){(!_||l(Ke,Vt,gn))&&at(_t,gn,Vt[gn])}),_t},Ke=function(_t){var Ot=he(_t),Vt=l(xn,this,Ot);return!(this===ui&&O(Me,Ot)&&!O(Xt,Ot))&&(!(Vt||!O(this,Ot)||!O(Me,Ot)||O(this,gt)&&this[gt][Ot])||Vt)},me=function(_t,Ot){var Vt=ne(_t),di=he(Ot);if(Vt!==ui||!O(Me,di)||O(Xt,di)){var gn=on(Vt,di);return gn&&O(Me,di)&&!(O(Vt,gt)&&Vt[gt][di])&&(gn.enumerable=!0),gn}},Ae=function(_t){var Ot=fn(ne(_t)),Vt=[];return ut(Ot,function(di){!O(Me,di)&&!O(Se,di)&&Ie(Vt,di)}),Vt},Xe=function(_t){var Ot=_t===ui,Vt=fn(Ot?Xt:ne(_t)),di=[];return ut(Vt,function(gn){O(Me,gn)&&(!Ot||O(ui,gn))&&Ie(di,Me[gn])}),di};if(b||(de(nn=(mt=function(){if(Z(nn,this))throw ze("Symbol is not a constructor");var _t=arguments.length&&void 0!==arguments[0]?te(arguments[0]):void 0,Ot=Te(_t),Vt=function(di){this===ui&&l(Vt,Xt,di),O(this,gt)&&O(this[gt],Ot)&&(this[gt][Ot]=!1),An(this,Ot,oe(1,di))};return _&&Si&&An(ui,Ot,{configurable:!0,set:Vt}),fi(Ot,_t)})[mi],"toString",function(){return Et(this).tag}),de(mt,"withoutSetter",function(dt){return fi(Te(dt),dt)}),re.f=Ke,le.f=at,ie.f=me,F.f=fe.f=Ae,K.f=Xe,Le.f=function(dt){return fi(Ve(dt),dt)},_&&(wi(nn,"description",{configurable:!0,get:function(){return Et(this).description}}),h||de(ui,"propertyIsEnumerable",Ke,{unsafe:!0}))),y({global:!0,wrap:!0,forced:!b,sham:!b},{Symbol:mt}),ut(J(ei),function(dt){Ue(dt)}),y({target:At,stat:!0,forced:!b},{for:function(dt){var _t=te(dt);if(O(qt,_t))return qt[_t];var Ot=mt(_t);return qt[_t]=Ot,ai[Ot]=_t,Ot},keyFor:function(_t){if(!Q(_t))throw ze(_t+" is not a symbol");if(O(ai,_t))return ai[_t]},useSetter:function(){Si=!0},useSimple:function(){Si=!1}}),y({target:"Object",stat:!0,forced:!b,sham:!_},{create:function(_t,Ot){return void 0===Ot?q(_t):lt(q(_t),Ot)},defineProperty:at,defineProperties:lt,getOwnPropertyDescriptor:me}),y({target:"Object",stat:!0,forced:!b},{getOwnPropertyNames:Ae,getOwnPropertySymbols:Xe}),y({target:"Object",stat:!0,forced:R(function(){K.f(1)})},{getOwnPropertySymbols:function(_t){return K.f(ue(_t))}}),Yt&&y({target:"JSON",stat:!0,forced:!b||R(function(){var dt=mt();return"[null]"!=Yt([dt])||"{}"!=Yt({a:dt})||"{}"!=Yt(Object(dt))})},{stringify:function(_t,Ot,Vt){var di=Re(arguments),gn=Ot;if((G(Ot)||void 0!==_t)&&!Q(_t))return H(Ot)||(Ot=function(lo,qi){if(W(gn)&&(qi=l(gn,this,lo,qi)),!Q(qi))return qi}),di[1]=Ot,n(Yt,null,di)}}),!nn[Bi]){var Ii=nn.valueOf;de(nn,Bi,function(dt){return l(Ii,this)})}He(mt,At),Se[gt]=!0},5623:(T,I,m)=>{m(35985)("matchAll")},85873:(T,I,m)=>{m(35985)("match")},98499:(T,I,m)=>{m(35985)("replace")},81281:(T,I,m)=>{m(35985)("search")},91348:(T,I,m)=>{m(35985)("species")},25609:(T,I,m)=>{m(35985)("split")},69538:(T,I,m)=>{m(35985)("toPrimitive")},64827:(T,I,m)=>{m(35985)("toStringTag")},5256:(T,I,m)=>{m(35985)("unscopables")},58871:(T,I,m)=>{"use strict";var H,y=m(71186),S=m(83232),s=m(61306),n=m(77699),l=m(8394),u=m(2387),h=m(4559),_=m(67616),b=m(59066).enforce,R=m(43491),O=!y.ActiveXObject&&"ActiveXObject"in y,W=function(he){return function(){return he(this,arguments.length?arguments[0]:void 0)}},G=l("WeakMap",W,u);if(R&&O){H=u.getConstructor(W,"WeakMap",!0),n.enable();var Z=G.prototype,Q=S(Z.delete),Y=S(Z.has),ue=S(Z.get),ne=S(Z.set);s(Z,{delete:function(he){if(h(he)&&!_(he)){var te=b(this);return te.frozen||(te.frozen=new H),Q(this,he)||te.frozen.delete(he)}return Q(this,he)},has:function(te){if(h(te)&&!_(te)){var oe=b(this);return oe.frozen||(oe.frozen=new H),Y(this,te)||oe.frozen.has(te)}return Y(this,te)},get:function(te){if(h(te)&&!_(te)){var oe=b(this);return oe.frozen||(oe.frozen=new H),Y(this,te)?ue(this,te):oe.frozen.get(te)}return ue(this,te)},set:function(te,oe){if(h(te)&&!_(te)){var q=b(this);q.frozen||(q.frozen=new H),Y(this,te)?ne(this,te,oe):q.frozen.set(te,oe)}else ne(this,te,oe);return this}})}},69797:(T,I,m)=>{m(96476)},24101:(T,I,m)=>{m(5823)},96860:(T,I,m)=>{m(78084)},1127:(T,I,m)=>{"use strict";var y=m(47695),S=m(86343),s=m(83061);y({target:"Promise",stat:!0},{try:function(n){var l=S.f(this),u=s(n);return(u.error?l.reject:l.resolve)(u.value),l.promise}})},67924:(T,I,m)=>{m(35985)("asyncDispose")},27907:(T,I,m)=>{m(35985)("dispose")},59331:(T,I,m)=>{m(35985)("matcher")},97515:(T,I,m)=>{m(35985)("metadata")},97601:(T,I,m)=>{m(35985)("observable")},61061:(T,I,m)=>{m(35985)("patternMatch")},98377:(T,I,m)=>{m(35985)("replaceAll")},33840:(T,I,m)=>{m(68905);var y=m(27634),S=m(71186),s=m(36346),n=m(30259),l=m(57160),h=m(51227)("toStringTag");for(var _ in y){var b=S[_],R=b&&b.prototype;R&&s(R)!==h&&n(R,h,_),l[_]=l.Array}},56269:(T,I,m)=>{"use strict";m(68905);var y=m(47695),S=m(71186),s=m(31542),n=m(74217),l=m(83232),u=m(20836),h=m(64519),_=m(61306),b=m(81488),R=m(68603),O=m(59066),H=m(37368),W=m(89982),G=m(63262),Z=m(56875),Q=m(36346),Y=m(64808),ue=m(4559),ne=m(40208),he=m(47579),te=m(79695),oe=m(80009),q=m(27556),J=m(51227),F=m(25278),fe=J("iterator"),K="URLSearchParams",ie=K+"Iterator",le=O.set,re=O.getterFor(K),Re=O.getterFor(ie),de=s("fetch"),ve=s("Request"),Pe=s("Headers"),Se=ve&&ve.prototype,Te=Pe&&Pe.prototype,Ve=S.RegExp,Le=S.TypeError,Ue=S.decodeURIComponent,He=S.encodeURIComponent,je=l("".charAt),ut=l([].join),gt=l([].push),At=l("".replace),mi=l([].shift),Bi=l([].splice),Ci=l("".split),Et=l("".slice),ui=/\+/g,mt=Array(4),nn=function(at){return mt[at-1]||(mt[at-1]=Ve("((?:%[\\da-f]{2}){"+at+"})","gi"))},ze=function(at){try{return Ue(at)}catch(lt){return at}},rn=function(at){var lt=At(at,ui," "),Ne=4;try{return Ue(lt)}catch(Ke){for(;Ne;)lt=At(lt,nn(Ne--),ze);return lt}},Yt=/[!'()~]|%20/g,on={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},wi=function(at){return on[at]},fn=function(at){return At(He(at),Yt,wi)},xn=function(at,lt){if(lt)for(var me,Ae,Ne=Ci(lt,"&"),Ke=0;Ke<Ne.length;)(me=Ne[Ke++]).length&&(Ae=Ci(me,"="),gt(at,{key:rn(mi(Ae)),value:rn(ut(Ae,"="))}))},Ie=function(at){this.entries.length=0,xn(this.entries,at)},Me=function(at,lt){if(at<lt)throw Le("Not enough arguments")},Xt=R(function(lt,Ne){le(this,{type:ie,iterator:oe(re(lt).entries),kind:Ne})},"Iterator",function(){var lt=Re(this),Ne=lt.kind,Ke=lt.iterator.next(),me=Ke.value;return Ke.done||(Ke.value="keys"===Ne?me.key:"values"===Ne?me.value:[me.key,me.value]),Ke}),qt=function(){H(this,ai);var me,Ae,Xe,ct,Ii,dt,_t,Ot,Vt,lt=arguments.length>0?arguments[0]:void 0,Ne=this,Ke=[];if(le(Ne,{type:K,entries:Ke,updateURL:function(){},updateSearchParams:Ie}),void 0!==lt)if(ue(lt))if(me=q(lt))for(Xe=(Ae=oe(lt,me)).next;!(ct=n(Xe,Ae)).done;){if(Ii=oe(Y(ct.value)),(_t=n(dt=Ii.next,Ii)).done||(Ot=n(dt,Ii)).done||!n(dt,Ii).done)throw Le("Expected sequence with length 2");gt(Ke,{key:ne(_t.value),value:ne(Ot.value)})}else for(Vt in lt)G(lt,Vt)&&gt(Ke,{key:Vt,value:ne(lt[Vt])});else xn(Ke,"string"==typeof lt?"?"===je(lt,0)?Et(lt,1):lt:ne(lt))},ai=qt.prototype;if(_(ai,{append:function(lt,Ne){Me(arguments.length,2);var Ke=re(this);gt(Ke.entries,{key:ne(lt),value:ne(Ne)}),Ke.updateURL()},delete:function(at){Me(arguments.length,1);for(var lt=re(this),Ne=lt.entries,Ke=ne(at),me=0;me<Ne.length;)Ne[me].key===Ke?Bi(Ne,me,1):me++;lt.updateURL()},get:function(lt){Me(arguments.length,1);for(var Ne=re(this).entries,Ke=ne(lt),me=0;me<Ne.length;me++)if(Ne[me].key===Ke)return Ne[me].value;return null},getAll:function(lt){Me(arguments.length,1);for(var Ne=re(this).entries,Ke=ne(lt),me=[],Ae=0;Ae<Ne.length;Ae++)Ne[Ae].key===Ke&&gt(me,Ne[Ae].value);return me},has:function(lt){Me(arguments.length,1);for(var Ne=re(this).entries,Ke=ne(lt),me=0;me<Ne.length;)if(Ne[me++].key===Ke)return!0;return!1},set:function(lt,Ne){Me(arguments.length,1);for(var dt,Ke=re(this),me=Ke.entries,Ae=!1,Xe=ne(lt),ct=ne(Ne),Ii=0;Ii<me.length;Ii++)(dt=me[Ii]).key===Xe&&(Ae?Bi(me,Ii--,1):(Ae=!0,dt.value=ct));Ae||gt(me,{key:Xe,value:ct}),Ke.updateURL()},sort:function(){var lt=re(this);F(lt.entries,function(Ne,Ke){return Ne.key>Ke.key?1:-1}),lt.updateURL()},forEach:function(lt){for(var Ae,Ne=re(this).entries,Ke=Z(lt,arguments.length>1?arguments[1]:void 0),me=0;me<Ne.length;)Ke((Ae=Ne[me++]).value,Ae.key,this)},keys:function(){return new Xt(this,"keys")},values:function(){return new Xt(this,"values")},entries:function(){return new Xt(this,"entries")}},{enumerable:!0}),h(ai,fe,ai.entries,{name:"entries"}),h(ai,"toString",function(){for(var me,lt=re(this).entries,Ne=[],Ke=0;Ke<lt.length;)me=lt[Ke++],gt(Ne,fn(me.key)+"="+fn(me.value));return ut(Ne,"&")},{enumerable:!0}),b(qt,K),y({global:!0,forced:!u},{URLSearchParams:qt}),!u&&W(Pe)){var ei=l(Te.has),Si=l(Te.set),An=function(at){if(ue(at)){var Ne,lt=at.body;if(Q(lt)===K)return Ne=at.headers?new Pe(at.headers):new Pe,ei(Ne,"content-type")||Si(Ne,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),he(at,{body:te(0,ne(lt)),headers:te(0,Ne)})}return at};if(W(de)&&y({global:!0,enumerable:!0,forced:!0},{fetch:function(lt){return de(lt,arguments.length>1?An(arguments[1]):{})}}),W(ve)){var fi=function(lt){return H(this,Se),new ve(lt,arguments.length>1?An(arguments[1]):{})};Se.constructor=fi,fi.prototype=Se,y({global:!0,forced:!0},{Request:fi})}}T.exports={URLSearchParams:qt,getState:re}},16775:(T,I,m)=>{var y=m(28430);T.exports=y},4718:(T,I,m)=>{var y=m(19117);T.exports=y},15593:(T,I,m)=>{var y=m(37311);T.exports=y},29568:(T,I,m)=>{var y=m(52535);T.exports=y},81826:(T,I,m)=>{var y=m(38615);m(33840),T.exports=y},29032:(T,I,m)=>{var y=m(59597);T.exports=y},93928:(T,I,m)=>{m(33840);var y=m(36346),S=m(63262),s=m(49778),n=m(15593),l=Array.prototype,u={DOMTokenList:!0,NodeList:!0};T.exports=function(h){var _=h.entries;return h===l||s(l,h)&&_===l.entries||S(u,y(h))?n:_}},40779:(T,I,m)=>{var y=m(46824);T.exports=y},88092:(T,I,m)=>{var y=m(45600);T.exports=y},48596:(T,I,m)=>{m(33840);var y=m(36346),S=m(63262),s=m(49778),n=m(29568),l=Array.prototype,u={DOMTokenList:!0,NodeList:!0};T.exports=function(h){var _=h.forEach;return h===l||s(l,h)&&_===l.forEach||S(u,y(h))?n:_}},43910:(T,I,m)=>{var y=m(85923);T.exports=y},35093:(T,I,m)=>{var y=m(77146);T.exports=y},89412:(T,I,m)=>{var y=m(24773);T.exports=y},71166:(T,I,m)=>{var y=m(58445);T.exports=y},14570:(T,I,m)=>{var y=m(8138);T.exports=y},68786:(T,I,m)=>{var y=m(41108);T.exports=y},94768:(T,I,m)=>{var y=m(27615);T.exports=y},5219:(T,I,m)=>{var y=m(92889);T.exports=y},71258:(T,I,m)=>{var y=m(5318);T.exports=y},72102:(T,I,m)=>{var y=m(75634);T.exports=y},47833:(T,I,m)=>{var y=m(36669);T.exports=y},87440:(T,I,m)=>{var y=m(88095);T.exports=y},48021:(T,I,m)=>{var y=m(89439);T.exports=y},4490:(T,I,m)=>{var y=m(13799);T.exports=y},16625:(T,I,m)=>{var y=m(33054);T.exports=y},95609:(T,I,m)=>{var y=m(649);m(33840),T.exports=y},35875:(T,I,m)=>{var y=m(67079);m(33840),T.exports=y},34542:(T,I,m)=>{var y=m(41519);m(33840),T.exports=y},56447:(T,I,m)=>{var y=m(84253);m(33840),T.exports=y},3024:(T,I,m)=>{var y=m(21643);m(33840),T.exports=y},84253:(T,I,m)=>{m(56269);var y=m(35361);T.exports=y.URLSearchParams},36316:function(){var T;T="undefined"!=typeof self?self:this,function(m){var y_searchParams="URLSearchParams"in T,y_iterable="Symbol"in T&&"iterator"in Symbol,y_blob="FileReader"in T&&"Blob"in T&&function(){try{return new Blob,!0}catch(J){return!1}}(),y_formData="FormData"in T,y_arrayBuffer="ArrayBuffer"in T;if(y_arrayBuffer)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],n=ArrayBuffer.isView||function(J){return J&&s.indexOf(Object.prototype.toString.call(J))>-1};function l(J){if("string"!=typeof J&&(J=String(J)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(J))throw new TypeError("Invalid character in header field name");return J.toLowerCase()}function u(J){return"string"!=typeof J&&(J=String(J)),J}function h(J){var F={next:function(){var fe=J.shift();return{done:void 0===fe,value:fe}}};return y_iterable&&(F[Symbol.iterator]=function(){return F}),F}function _(J){this.map={},J instanceof _?J.forEach(function(F,fe){this.append(fe,F)},this):Array.isArray(J)?J.forEach(function(F){this.append(F[0],F[1])},this):J&&Object.getOwnPropertyNames(J).forEach(function(F){this.append(F,J[F])},this)}function b(J){if(J.bodyUsed)return Promise.reject(new TypeError("Already read"));J.bodyUsed=!0}function R(J){return new Promise(function(F,fe){J.onload=function(){F(J.result)},J.onerror=function(){fe(J.error)}})}function O(J){var F=new FileReader,fe=R(F);return F.readAsArrayBuffer(J),fe}function G(J){if(J.slice)return J.slice(0);var F=new Uint8Array(J.byteLength);return F.set(new Uint8Array(J)),F.buffer}function Z(){return this.bodyUsed=!1,this._initBody=function(J){this._bodyInit=J,J?"string"==typeof J?this._bodyText=J:y_blob&&Blob.prototype.isPrototypeOf(J)?this._bodyBlob=J:y_formData&&FormData.prototype.isPrototypeOf(J)?this._bodyFormData=J:y_searchParams&&URLSearchParams.prototype.isPrototypeOf(J)?this._bodyText=J.toString():y_arrayBuffer&&y_blob&&function(J){return J&&DataView.prototype.isPrototypeOf(J)}(J)?(this._bodyArrayBuffer=G(J.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):y_arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(J)||n(J))?this._bodyArrayBuffer=G(J):this._bodyText=J=Object.prototype.toString.call(J):this._bodyText="",this.headers.get("content-type")||("string"==typeof J?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):y_searchParams&&URLSearchParams.prototype.isPrototypeOf(J)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},y_blob&&(this.blob=function(){var J=b(this);if(J)return J;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?b(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(O)}),this.text=function(){var J=b(this);if(J)return J;if(this._bodyBlob)return function(J){var F=new FileReader,fe=R(F);return F.readAsText(J),fe}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(J){for(var F=new Uint8Array(J),fe=new Array(F.length),K=0;K<F.length;K++)fe[K]=String.fromCharCode(F[K]);return fe.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},y_formData&&(this.formData=function(){return this.text().then(ne)}),this.json=function(){return this.text().then(JSON.parse)},this}_.prototype.append=function(J,F){J=l(J),F=u(F);var fe=this.map[J];this.map[J]=fe?fe+", "+F:F},_.prototype.delete=function(J){delete this.map[l(J)]},_.prototype.get=function(J){return J=l(J),this.has(J)?this.map[J]:null},_.prototype.has=function(J){return this.map.hasOwnProperty(l(J))},_.prototype.set=function(J,F){this.map[l(J)]=u(F)},_.prototype.forEach=function(J,F){for(var fe in this.map)this.map.hasOwnProperty(fe)&&J.call(F,this.map[fe],fe,this)},_.prototype.keys=function(){var J=[];return this.forEach(function(F,fe){J.push(fe)}),h(J)},_.prototype.values=function(){var J=[];return this.forEach(function(F){J.push(F)}),h(J)},_.prototype.entries=function(){var J=[];return this.forEach(function(F,fe){J.push([fe,F])}),h(J)},y_iterable&&(_.prototype[Symbol.iterator]=_.prototype.entries);var Q=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function ue(J,F){var fe=(F=F||{}).body;if(J instanceof ue){if(J.bodyUsed)throw new TypeError("Already read");this.url=J.url,this.credentials=J.credentials,F.headers||(this.headers=new _(J.headers)),this.method=J.method,this.mode=J.mode,this.signal=J.signal,!fe&&null!=J._bodyInit&&(fe=J._bodyInit,J.bodyUsed=!0)}else this.url=String(J);if(this.credentials=F.credentials||this.credentials||"same-origin",(F.headers||!this.headers)&&(this.headers=new _(F.headers)),this.method=function(J){var F=J.toUpperCase();return Q.indexOf(F)>-1?F:J}(F.method||this.method||"GET"),this.mode=F.mode||this.mode||null,this.signal=F.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&fe)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(fe)}function ne(J){var F=new FormData;return J.trim().split("&").forEach(function(fe){if(fe){var K=fe.split("="),ie=K.shift().replace(/\+/g," "),le=K.join("=").replace(/\+/g," ");F.append(decodeURIComponent(ie),decodeURIComponent(le))}}),F}function he(J){var F=new _;return J.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(K){var ie=K.split(":"),le=ie.shift().trim();if(le){var re=ie.join(":").trim();F.append(le,re)}}),F}function te(J,F){F||(F={}),this.type="default",this.status=void 0===F.status?200:F.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in F?F.statusText:"OK",this.headers=new _(F.headers),this.url=F.url||"",this._initBody(J)}ue.prototype.clone=function(){return new ue(this,{body:this._bodyInit})},Z.call(ue.prototype),Z.call(te.prototype),te.prototype.clone=function(){return new te(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new _(this.headers),url:this.url})},te.error=function(){var J=new te(null,{status:0,statusText:""});return J.type="error",J};var oe=[301,302,303,307,308];te.redirect=function(J,F){if(-1===oe.indexOf(F))throw new RangeError("Invalid status code");return new te(null,{status:F,headers:{location:J}})},m.DOMException=T.DOMException;try{new m.DOMException}catch(J){m.DOMException=function(F,fe){this.message=F,this.name=fe;var K=Error(F);this.stack=K.stack},m.DOMException.prototype=Object.create(Error.prototype),m.DOMException.prototype.constructor=m.DOMException}function q(J,F){return new Promise(function(fe,K){var ie=new ue(J,F);if(ie.signal&&ie.signal.aborted)return K(new m.DOMException("Aborted","AbortError"));var le=new XMLHttpRequest;function re(){le.abort()}le.onload=function(){var Re={status:le.status,statusText:le.statusText,headers:he(le.getAllResponseHeaders()||"")};Re.url="responseURL"in le?le.responseURL:Re.headers.get("X-Request-URL"),fe(new te("response"in le?le.response:le.responseText,Re))},le.onerror=function(){K(new TypeError("Network request failed"))},le.ontimeout=function(){K(new TypeError("Network request failed"))},le.onabort=function(){K(new m.DOMException("Aborted","AbortError"))},le.open(ie.method,ie.url,!0),"include"===ie.credentials?le.withCredentials=!0:"omit"===ie.credentials&&(le.withCredentials=!1),"responseType"in le&&y_blob&&(le.responseType="blob"),ie.headers.forEach(function(Re,de){le.setRequestHeader(de,Re)}),ie.signal&&(ie.signal.addEventListener("abort",re),le.onreadystatechange=function(){4===le.readyState&&ie.signal.removeEventListener("abort",re)}),le.send(void 0===ie._bodyInit?null:ie._bodyInit)})}q.polyfill=!0,T.fetch||(T.fetch=q,T.Headers=_,T.Request=ue,T.Response=te),m.Headers=_,m.Request=ue,m.Response=te,m.fetch=q,Object.defineProperty(m,"__esModule",{value:!0})}({})},60910:T=>{"use strict";function I(n){return n instanceof Buffer||n instanceof Date||n instanceof RegExp}function m(n){if(n instanceof Buffer){var l=Buffer.alloc?Buffer.alloc(n.length):new Buffer(n.length);return n.copy(l),l}if(n instanceof Date)return new Date(n.getTime());if(n instanceof RegExp)return new RegExp(n);throw new Error("Unexpected situation")}function y(n){var l=[];return n.forEach(function(u,h){l[h]="object"==typeof u&&null!==u?Array.isArray(u)?y(u):I(u)?m(u):s({},u):u}),l}function S(n,l){return"__proto__"===l?void 0:n[l]}var s=T.exports=function(){if(arguments.length<1||"object"!=typeof arguments[0])return!1;if(arguments.length<2)return arguments[0];var u,h,n=arguments[0],l=Array.prototype.slice.call(arguments,1);return l.forEach(function(b){"object"!=typeof b||null===b||Array.isArray(b)||Object.keys(b).forEach(function(R){if(h=S(n,R),(u=S(b,R))!==n)return"object"!=typeof u||null===u?void(n[R]=u):Array.isArray(u)?void(n[R]=y(u)):I(u)?void(n[R]=m(u)):"object"!=typeof h||null===h||Array.isArray(h)?void(n[R]=s({},u)):void(n[R]=s(h,u))})}),n}},48086:function(T,I){var S;void 0!==(S=function(){"use strict";function n(R,O,H){var W=new XMLHttpRequest;W.open("GET",R),W.responseType="blob",W.onload=function(){b(W.response,O,H)},W.onerror=function(){console.error("could not download file")},W.send()}function l(R){var O=new XMLHttpRequest;O.open("HEAD",R,!1);try{O.send()}catch(H){}return 200<=O.status&&299>=O.status}function u(R){try{R.dispatchEvent(new MouseEvent("click"))}catch(H){var O=document.createEvent("MouseEvents");O.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),R.dispatchEvent(O)}}var h="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,_=h.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),b=h.saveAs||("object"!=typeof window||window!==h?function(){}:"download"in HTMLAnchorElement.prototype&&!_?function(R,O,H){var W=h.URL||h.webkitURL,G=document.createElement("a");G.download=O=O||R.name||"download",G.rel="noopener","string"==typeof R?(G.href=R,G.origin===location.origin?u(G):l(G.href)?n(R,O,H):u(G,G.target="_blank")):(G.href=W.createObjectURL(R),setTimeout(function(){W.revokeObjectURL(G.href)},4e4),setTimeout(function(){u(G)},0))}:"msSaveOrOpenBlob"in navigator?function(R,O,H){if(O=O||R.name||"download","string"!=typeof R)navigator.msSaveOrOpenBlob(function(R,O){return void 0===O?O={autoBom:!1}:"object"!=typeof O&&(console.warn("Deprecated: Expected third argument to be a object"),O={autoBom:!O}),O.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(R.type)?new Blob(["\ufeff",R],{type:R.type}):R}(R,H),O);else if(l(R))n(R,O,H);else{var W=document.createElement("a");W.href=R,W.target="_blank",setTimeout(function(){u(W)})}}:function(R,O,H,W){if((W=W||open("","_blank"))&&(W.document.title=W.document.body.innerText="downloading..."),"string"==typeof R)return n(R,O,H);var G="application/octet-stream"===R.type,Z=/constructor/i.test(h.HTMLElement)||h.safari,Q=/CriOS\/[\d]+/.test(navigator.userAgent);if((Q||G&&Z||_)&&"undefined"!=typeof FileReader){var Y=new FileReader;Y.onloadend=function(){var he=Y.result;he=Q?he:he.replace(/^data:[^;]*;/,"data:attachment/file;"),W?W.location.href=he:location=he,W=null},Y.readAsDataURL(R)}else{var ue=h.URL||h.webkitURL,ne=ue.createObjectURL(R);W?W.location=ne:location.href=ne,W=null,setTimeout(function(){ue.revokeObjectURL(ne)},4e4)}});h.saveAs=b.saveAs=b,T.exports=b}.apply(I,[]))&&(T.exports=S)},78953:T=>{"use strict";var I="Function.prototype.bind called on incompatible ",m=Array.prototype.slice,y=Object.prototype.toString,S="[object Function]";T.exports=function(n){var l=this;if("function"!=typeof l||y.call(l)!==S)throw new TypeError(I+l);for(var h,u=m.call(arguments,1),_=function(){if(this instanceof h){var W=l.apply(this,u.concat(m.call(arguments)));return Object(W)===W?W:this}return l.apply(n,u.concat(m.call(arguments)))},b=Math.max(0,l.length-u.length),R=[],O=0;O<b;O++)R.push("$"+O);if(h=Function("binder","return function ("+R.join(",")+"){ return binder.apply(this,arguments); }")(_),l.prototype){var H=function(){};H.prototype=l.prototype,h.prototype=new H,H.prototype=null}return h}},11138:(T,I,m)=>{"use strict";var y=m(78953);T.exports=Function.prototype.bind||y},1326:(T,I,m)=>{"use strict";var y,S=SyntaxError,s=Function,n=TypeError,l=function(fe){try{return s('"use strict"; return ('+fe+").constructor;")()}catch(K){}},u=Object.getOwnPropertyDescriptor;if(u)try{u({},"")}catch(fe){u=null}var h=function(){throw new n},_=u?function(){try{return h}catch(fe){try{return u(arguments,"callee").get}catch(K){return h}}}():h,b=m(18097)(),R=Object.getPrototypeOf||function(fe){return fe.__proto__},O={},H="undefined"==typeof Uint8Array?y:R(Uint8Array),W={"%AggregateError%":"undefined"==typeof AggregateError?y:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?y:ArrayBuffer,"%ArrayIteratorPrototype%":b?R([][Symbol.iterator]()):y,"%AsyncFromSyncIteratorPrototype%":y,"%AsyncFunction%":O,"%AsyncGenerator%":O,"%AsyncGeneratorFunction%":O,"%AsyncIteratorPrototype%":O,"%Atomics%":"undefined"==typeof Atomics?y:Atomics,"%BigInt%":"undefined"==typeof BigInt?y:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?y:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?y:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?y:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?y:FinalizationRegistry,"%Function%":s,"%GeneratorFunction%":O,"%Int8Array%":"undefined"==typeof Int8Array?y:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?y:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?y:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":b?R(R([][Symbol.iterator]())):y,"%JSON%":"object"==typeof JSON?JSON:y,"%Map%":"undefined"==typeof Map?y:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&b?R((new Map)[Symbol.iterator]()):y,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?y:Promise,"%Proxy%":"undefined"==typeof Proxy?y:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?y:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?y:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&b?R((new Set)[Symbol.iterator]()):y,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?y:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":b?R(""[Symbol.iterator]()):y,"%Symbol%":b?Symbol:y,"%SyntaxError%":S,"%ThrowTypeError%":_,"%TypedArray%":H,"%TypeError%":n,"%Uint8Array%":"undefined"==typeof Uint8Array?y:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?y:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?y:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?y:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?y:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?y:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?y:WeakSet},G=function fe(K){var ie;if("%AsyncFunction%"===K)ie=l("async function () {}");else if("%GeneratorFunction%"===K)ie=l("function* () {}");else if("%AsyncGeneratorFunction%"===K)ie=l("async function* () {}");else if("%AsyncGenerator%"===K){var le=fe("%AsyncGeneratorFunction%");le&&(ie=le.prototype)}else if("%AsyncIteratorPrototype%"===K){var re=fe("%AsyncGenerator%");re&&(ie=R(re.prototype))}return W[K]=ie,ie},Z={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Q=m(11138),Y=m(51142),ue=Q.call(Function.call,Array.prototype.concat),ne=Q.call(Function.apply,Array.prototype.splice),he=Q.call(Function.call,String.prototype.replace),te=Q.call(Function.call,String.prototype.slice),oe=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,q=/\\(\\)?/g,J=function(K){var ie=te(K,0,1),le=te(K,-1);if("%"===ie&&"%"!==le)throw new S("invalid intrinsic syntax, expected closing `%`");if("%"===le&&"%"!==ie)throw new S("invalid intrinsic syntax, expected opening `%`");var re=[];return he(K,oe,function(Re,de,ve,Pe){re[re.length]=ve?he(Pe,q,"$1"):de||Re}),re},F=function(K,ie){var re,le=K;if(Y(Z,le)&&(le="%"+(re=Z[le])[0]+"%"),Y(W,le)){var Re=W[le];if(Re===O&&(Re=G(le)),void 0===Re&&!ie)throw new n("intrinsic "+K+" exists, but is not available. Please file an issue!");return{alias:re,name:le,value:Re}}throw new S("intrinsic "+K+" does not exist!")};T.exports=function(K,ie){if("string"!=typeof K||0===K.length)throw new n("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof ie)throw new n('"allowMissing" argument must be a boolean');var le=J(K),re=le.length>0?le[0]:"",Re=F("%"+re+"%",ie),de=Re.name,ve=Re.value,Pe=!1,Se=Re.alias;Se&&(re=Se[0],ne(le,ue([0,1],Se)));for(var Te=1,Ve=!0;Te<le.length;Te+=1){var Le=le[Te],Ue=te(Le,0,1),He=te(Le,-1);if(('"'===Ue||"'"===Ue||"`"===Ue||'"'===He||"'"===He||"`"===He)&&Ue!==He)throw new S("property names with quotes must have matching quotes");if(("constructor"===Le||!Ve)&&(Pe=!0),Y(W,de="%"+(re+="."+Le)+"%"))ve=W[de];else if(null!=ve){if(!(Le in ve)){if(!ie)throw new n("base intrinsic for "+K+" exists, but the property is not available.");return}if(u&&Te+1>=le.length){var je=u(ve,Le);ve=(Ve=!!je)&&"get"in je&&!("originalValue"in je.get)?je.get:ve[Le]}else Ve=Y(ve,Le),ve=ve[Le];Ve&&!Pe&&(W[de]=ve)}}return ve}},18097:(T,I,m)=>{"use strict";var y="undefined"!=typeof Symbol&&Symbol,S=m(14933);T.exports=function(){return"function"==typeof y&&"function"==typeof Symbol&&"symbol"==typeof y("foo")&&"symbol"==typeof Symbol("bar")&&S()}},14933:T=>{"use strict";T.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var m={},y=Symbol("test"),S=Object(y);if("string"==typeof y||"[object Symbol]"!==Object.prototype.toString.call(y)||"[object Symbol]"!==Object.prototype.toString.call(S))return!1;for(y in m[y]=42,m)return!1;if("function"==typeof Object.keys&&0!==Object.keys(m).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(m).length)return!1;var n=Object.getOwnPropertySymbols(m);if(1!==n.length||n[0]!==y||!Object.prototype.propertyIsEnumerable.call(m,y))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var l=Object.getOwnPropertyDescriptor(m,y);if(42!==l.value||!0!==l.enumerable)return!1}return!0}},51142:(T,I,m)=>{"use strict";var y=m(11138);T.exports=y.call(Function.call,Object.prototype.hasOwnProperty)},41510:T=>{var me,m="__lodash_hash_undefined__",y=1/0,l=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,u=/^\w*$/,h=/^\./,_=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,R=/\\(\\)?/g,O=/^\[object .+?Constructor\]$/,H="object"==typeof global&&global&&global.Object===Object&&global,W="object"==typeof self&&self&&self.Object===Object&&self,G=H||W||Function("return this")(),Y=Array.prototype,ue=Function.prototype,ne=Object.prototype,he=G["__core-js_shared__"],te=(me=/[^.]+$/.exec(he&&he.keys&&he.keys.IE_PROTO||""))?"Symbol(src)_1."+me:"",oe=ue.toString,q=ne.hasOwnProperty,J=ne.toString,F=RegExp("^"+oe.call(q).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),fe=G.Symbol,K=Y.splice,ie=wi(G,"Map"),le=wi(Object,"create"),re=fe?fe.prototype:void 0,Re=re?re.toString:void 0;function de(me){var Ae=-1,Xe=me?me.length:0;for(this.clear();++Ae<Xe;){var ct=me[Ae];this.set(ct[0],ct[1])}}function Le(me){var Ae=-1,Xe=me?me.length:0;for(this.clear();++Ae<Xe;){var ct=me[Ae];this.set(ct[0],ct[1])}}function At(me){var Ae=-1,Xe=me?me.length:0;for(this.clear();++Ae<Xe;){var ct=me[Ae];this.set(ct[0],ct[1])}}function mt(me,Ae){for(var Xe=me.length;Xe--;)if(ei(me[Xe][0],Ae))return Xe;return-1}function on(me,Ae){var Xe=me.__data__;return function(me){var Ae=typeof me;return"string"==Ae||"number"==Ae||"symbol"==Ae||"boolean"==Ae?"__proto__"!==me:null===me}(Ae)?Xe["string"==typeof Ae?"string":"hash"]:Xe.map}function wi(me,Ae){var Xe=function(me,Ae){return null==me?void 0:me[Ae]}(me,Ae);return function(me){if(!fi(me)||function(me){return!!te&&te in me}(me))return!1;var Ae=function(me){var Ae=fi(me)?J.call(me):"";return"[object Function]"==Ae||"[object GeneratorFunction]"==Ae}(me)||function(me){var Ae=!1;if(null!=me&&"function"!=typeof me.toString)try{Ae=!!(me+"")}catch(Xe){}return Ae}(me)?F:O;return Ae.test(function(me){if(null!=me){try{return oe.call(me)}catch(Ae){}try{return me+""}catch(Ae){}}return""}(me))}(Xe)?Xe:void 0}de.prototype.clear=function(){this.__data__=le?le(null):{}},de.prototype.delete=function(me){return this.has(me)&&delete this.__data__[me]},de.prototype.get=function(me){var Ae=this.__data__;if(le){var Xe=Ae[me];return Xe===m?void 0:Xe}return q.call(Ae,me)?Ae[me]:void 0},de.prototype.has=function(me){var Ae=this.__data__;return le?void 0!==Ae[me]:q.call(Ae,me)},de.prototype.set=function(me,Ae){return this.__data__[me]=le&&void 0===Ae?m:Ae,this},Le.prototype.clear=function(){this.__data__=[]},Le.prototype.delete=function(me){var Ae=this.__data__,Xe=mt(Ae,me);return!(Xe<0||(Xe==Ae.length-1?Ae.pop():K.call(Ae,Xe,1),0))},Le.prototype.get=function(me){var Ae=this.__data__,Xe=mt(Ae,me);return Xe<0?void 0:Ae[Xe][1]},Le.prototype.has=function(me){return mt(this.__data__,me)>-1},Le.prototype.set=function(me,Ae){var Xe=this.__data__,ct=mt(Xe,me);return ct<0?Xe.push([me,Ae]):Xe[ct][1]=Ae,this},At.prototype.clear=function(){this.__data__={hash:new de,map:new(ie||Le),string:new de}},At.prototype.delete=function(me){return on(this,me).delete(me)},At.prototype.get=function(me){return on(this,me).get(me)},At.prototype.has=function(me){return on(this,me).has(me)},At.prototype.set=function(me,Ae){return on(this,me).set(me,Ae),this};var Me=ai(function(me){me=function(me){return null==me?"":function(me){if("string"==typeof me)return me;if(lt(me))return Re?Re.call(me):"";var Ae=me+"";return"0"==Ae&&1/me==-y?"-0":Ae}(me)}(me);var Ae=[];return h.test(me)&&Ae.push(""),me.replace(_,function(Xe,ct,Ii,dt){Ae.push(Ii?dt.replace(R,"$1"):ct||Xe)}),Ae});function Xt(me){if("string"==typeof me||lt(me))return me;var Ae=me+"";return"0"==Ae&&1/me==-y?"-0":Ae}function ai(me,Ae){if("function"!=typeof me||Ae&&"function"!=typeof Ae)throw new TypeError("Expected a function");var Xe=function(){var ct=arguments,Ii=Ae?Ae.apply(this,ct):ct[0],dt=Xe.cache;if(dt.has(Ii))return dt.get(Ii);var _t=me.apply(this,ct);return Xe.cache=dt.set(Ii,_t),_t};return Xe.cache=new(ai.Cache||At),Xe}function ei(me,Ae){return me===Ae||me!=me&&Ae!=Ae}ai.Cache=At;var Si=Array.isArray;function fi(me){var Ae=typeof me;return!!me&&("object"==Ae||"function"==Ae)}function lt(me){return"symbol"==typeof me||function(me){return!!me&&"object"==typeof me}(me)&&"[object Symbol]"==J.call(me)}T.exports=function(me,Ae,Xe){var ct=null==me?void 0:function(me,Ae){Ae=function(me,Ae){if(Si(me))return!1;var Xe=typeof me;return!("number"!=Xe&&"symbol"!=Xe&&"boolean"!=Xe&&null!=me&&!lt(me))||u.test(me)||!l.test(me)||null!=Ae&&me in Object(Ae)}(Ae,me)?[Ae]:function(me){return Si(me)?me:Me(me)}(Ae);for(var Xe=0,ct=Ae.length;null!=me&&Xe<ct;)me=me[Xt(Ae[Xe++])];return Xe&&Xe==ct?me:void 0}(me,Ae);return void 0===ct?Xe:ct}},92778:(T,I,m)=>{var s=m(30573)(m(13737),"DataView");T.exports=s},95581:(T,I,m)=>{var y=m(58529),S=m(95882),s=m(93067),n=m(28726),l=m(3609);function u(h){var _=-1,b=null==h?0:h.length;for(this.clear();++_<b;){var R=h[_];this.set(R[0],R[1])}}u.prototype.clear=y,u.prototype.delete=S,u.prototype.get=s,u.prototype.has=n,u.prototype.set=l,T.exports=u},55961:(T,I,m)=>{var y=m(82626),S=m(28471),s=m(39349),n=m(80268),l=m(36032);function u(h){var _=-1,b=null==h?0:h.length;for(this.clear();++_<b;){var R=h[_];this.set(R[0],R[1])}}u.prototype.clear=y,u.prototype.delete=S,u.prototype.get=s,u.prototype.has=n,u.prototype.set=l,T.exports=u},46741:(T,I,m)=>{var s=m(30573)(m(13737),"Map");T.exports=s},40281:(T,I,m)=>{var y=m(78176),S=m(48116),s=m(22679),n=m(22230),l=m(99766);function u(h){var _=-1,b=null==h?0:h.length;for(this.clear();++_<b;){var R=h[_];this.set(R[0],R[1])}}u.prototype.clear=y,u.prototype.delete=S,u.prototype.get=s,u.prototype.has=n,u.prototype.set=l,T.exports=u},96442:(T,I,m)=>{var s=m(30573)(m(13737),"Promise");T.exports=s},35435:(T,I,m)=>{var s=m(30573)(m(13737),"Set");T.exports=s},68366:(T,I,m)=>{var y=m(55961),S=m(38359),s=m(35987),n=m(40286),l=m(62709),u=m(92764);function h(_){var b=this.__data__=new y(_);this.size=b.size}h.prototype.clear=S,h.prototype.delete=s,h.prototype.get=n,h.prototype.has=l,h.prototype.set=u,T.exports=h},73555:(T,I,m)=>{var y=m(13737);T.exports=y.Symbol},7025:(T,I,m)=>{var y=m(13737);T.exports=y.Uint8Array},89885:(T,I,m)=>{var s=m(30573)(m(13737),"WeakMap");T.exports=s},8914:T=>{T.exports=function(m,y){for(var S=-1,s=null==m?0:m.length;++S<s&&!1!==y(m[S],S,m););return m}},71236:T=>{T.exports=function(m,y){for(var S=-1,s=null==m?0:m.length,n=0,l=[];++S<s;){var u=m[S];y(u,S,m)&&(l[n++]=u)}return l}},50185:(T,I,m)=>{var y=m(34110),S=m(12208),s=m(52092),n=m(44735),l=m(14846),u=m(83483),_=Object.prototype.hasOwnProperty;T.exports=function(R,O){var H=s(R),W=!H&&S(R),G=!H&&!W&&n(R),Z=!H&&!W&&!G&&u(R),Q=H||W||G||Z,Y=Q?y(R.length,String):[],ue=Y.length;for(var ne in R)(O||_.call(R,ne))&&(!Q||!("length"==ne||G&&("offset"==ne||"parent"==ne)||Z&&("buffer"==ne||"byteLength"==ne||"byteOffset"==ne)||l(ne,ue)))&&Y.push(ne);return Y}},11981:T=>{T.exports=function(m,y){for(var S=-1,s=null==m?0:m.length,n=Array(s);++S<s;)n[S]=y(m[S],S,m);return n}},60583:T=>{T.exports=function(m,y){for(var S=-1,s=y.length,n=m.length;++S<s;)m[n+S]=y[S];return m}},30919:(T,I,m)=>{var y=m(20826),S=m(9412),n=Object.prototype.hasOwnProperty;T.exports=function(u,h,_){var b=u[h];(!n.call(u,h)||!S(b,_)||void 0===_&&!(h in u))&&y(u,h,_)}},58459:(T,I,m)=>{var y=m(9412);T.exports=function(s,n){for(var l=s.length;l--;)if(y(s[l][0],n))return l;return-1}},88244:(T,I,m)=>{var y=m(14976),S=m(5773);T.exports=function(n,l){return n&&y(l,S(l),n)}},91948:(T,I,m)=>{var y=m(14976),S=m(39754);T.exports=function(n,l){return n&&y(l,S(l),n)}},20826:(T,I,m)=>{var y=m(32062);T.exports=function(s,n,l){"__proto__"==n&&y?y(s,n,{configurable:!0,enumerable:!0,value:l,writable:!0}):s[n]=l}},17584:(T,I,m)=>{var y=m(68366),S=m(8914),s=m(30919),n=m(88244),l=m(91948),u=m(59352),h=m(35004),_=m(67703),b=m(42058),R=m(12818),O=m(16233),H=m(96435),W=m(47176),G=m(53678),Z=m(80177),Q=m(52092),Y=m(44735),ue=m(56432),ne=m(27954),he=m(65871),te=m(5773),oe=m(39754),fe="[object Arguments]",Re="[object Function]",Se="[object Object]",ze={};ze[fe]=ze["[object Array]"]=ze["[object ArrayBuffer]"]=ze["[object DataView]"]=ze["[object Boolean]"]=ze["[object Date]"]=ze["[object Float32Array]"]=ze["[object Float64Array]"]=ze["[object Int8Array]"]=ze["[object Int16Array]"]=ze["[object Int32Array]"]=ze["[object Map]"]=ze["[object Number]"]=ze[Se]=ze["[object RegExp]"]=ze["[object Set]"]=ze["[object String]"]=ze["[object Symbol]"]=ze["[object Uint8Array]"]=ze["[object Uint8ClampedArray]"]=ze["[object Uint16Array]"]=ze["[object Uint32Array]"]=!0,ze["[object Error]"]=ze[Re]=ze["[object WeakMap]"]=!1,T.exports=function rn(Yt,on,wi,fn,xn,Ie){var Me,Xt=1&on,qt=2&on,ai=4&on;if(wi&&(Me=xn?wi(Yt,fn,xn,Ie):wi(Yt)),void 0!==Me)return Me;if(!ne(Yt))return Yt;var ei=Q(Yt);if(ei){if(Me=W(Yt),!Xt)return h(Yt,Me)}else{var Si=H(Yt),An=Si==Re||"[object GeneratorFunction]"==Si;if(Y(Yt))return u(Yt,Xt);if(Si==Se||Si==fe||An&&!xn){if(Me=qt||An?{}:Z(Yt),!Xt)return qt?b(Yt,l(Me,Yt)):_(Yt,n(Me,Yt))}else{if(!ze[Si])return xn?Yt:{};Me=G(Yt,Si,Xt)}}Ie||(Ie=new y);var fi=Ie.get(Yt);if(fi)return fi;Ie.set(Yt,Me),he(Yt)?Yt.forEach(function(Ne){Me.add(rn(Ne,on,wi,Ne,Yt,Ie))}):ue(Yt)&&Yt.forEach(function(Ne,Ke){Me.set(Ke,rn(Ne,on,wi,Ke,Yt,Ie))});var lt=ei?void 0:(ai?qt?O:R:qt?oe:te)(Yt);return S(lt||Yt,function(Ne,Ke){lt&&(Ne=Yt[Ke=Ne]),s(Me,Ke,rn(Ne,on,wi,Ke,Yt,Ie))}),Me}},30866:(T,I,m)=>{var y=m(27954),S=Object.create,s=function(){function n(){}return function(l){if(!y(l))return{};if(S)return S(l);n.prototype=l;var u=new n;return n.prototype=void 0,u}}();T.exports=s},80255:(T,I,m)=>{var y=m(52426),S=m(41162);T.exports=function(n,l){for(var u=0,h=(l=y(l,n)).length;null!=n&&u<h;)n=n[S(l[u++])];return u&&u==h?n:void 0}},20702:(T,I,m)=>{var y=m(60583),S=m(52092);T.exports=function(n,l,u){var h=l(n);return S(n)?h:y(h,u(n))}},15687:(T,I,m)=>{var y=m(73555),S=m(23531),s=m(98406),u=y?y.toStringTag:void 0;T.exports=function(_){return null==_?void 0===_?"[object Undefined]":"[object Null]":u&&u in Object(_)?S(_):s(_)}},11760:(T,I,m)=>{var y=m(15687),S=m(12142);T.exports=function(l){return S(l)&&"[object Arguments]"==y(l)}},54929:(T,I,m)=>{var y=m(96435),S=m(12142);T.exports=function(l){return S(l)&&"[object Map]"==y(l)}},67097:(T,I,m)=>{var y=m(27660),S=m(94996),s=m(27954),n=m(25850),u=/^\[object .+?Constructor\]$/,O=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");T.exports=function(W){return!(!s(W)||S(W))&&(y(W)?O:u).test(n(W))}},77480:(T,I,m)=>{var y=m(96435),S=m(12142);T.exports=function(l){return S(l)&&"[object Set]"==y(l)}},89638:(T,I,m)=>{var y=m(15687),S=m(85353),s=m(12142),ie={};ie["[object Float32Array]"]=ie["[object Float64Array]"]=ie["[object Int8Array]"]=ie["[object Int16Array]"]=ie["[object Int32Array]"]=ie["[object Uint8Array]"]=ie["[object Uint8ClampedArray]"]=ie["[object Uint16Array]"]=ie["[object Uint32Array]"]=!0,ie["[object Arguments]"]=ie["[object Array]"]=ie["[object ArrayBuffer]"]=ie["[object Boolean]"]=ie["[object DataView]"]=ie["[object Date]"]=ie["[object Error]"]=ie["[object Function]"]=ie["[object Map]"]=ie["[object Number]"]=ie["[object Object]"]=ie["[object RegExp]"]=ie["[object Set]"]=ie["[object String]"]=ie["[object WeakMap]"]=!1,T.exports=function(re){return s(re)&&S(re.length)&&!!ie[y(re)]}},85924:(T,I,m)=>{var y=m(21900),S=m(16585),n=Object.prototype.hasOwnProperty;T.exports=function(u){if(!y(u))return S(u);var h=[];for(var _ in Object(u))n.call(u,_)&&"constructor"!=_&&h.push(_);return h}},71300:(T,I,m)=>{var y=m(27954),S=m(21900),s=m(91355),l=Object.prototype.hasOwnProperty;T.exports=function(h){if(!y(h))return s(h);var _=S(h),b=[];for(var R in h)"constructor"==R&&(_||!l.call(h,R))||b.push(R);return b}},34110:T=>{T.exports=function(m,y){for(var S=-1,s=Array(m);++S<m;)s[S]=y(S);return s}},19917:(T,I,m)=>{var y=m(73555),S=m(11981),s=m(52092),n=m(23088),u=y?y.prototype:void 0,h=u?u.toString:void 0;T.exports=function _(b){if("string"==typeof b)return b;if(s(b))return S(b,_)+"";if(n(b))return h?h.call(b):"";var R=b+"";return"0"==R&&1/b==-1/0?"-0":R}},49613:T=>{T.exports=function(m){return function(y){return m(y)}}},52426:(T,I,m)=>{var y=m(52092),S=m(21056),s=m(55715),n=m(19169);T.exports=function(u,h){return y(u)?u:S(u,h)?[u]:s(n(u))}},70799:(T,I,m)=>{var y=m(7025);T.exports=function(s){var n=new s.constructor(s.byteLength);return new y(n).set(new y(s)),n}},59352:(T,I,m)=>{T=m.nmd(T);var y=m(13737),S=I&&!I.nodeType&&I,s=S&&T&&!T.nodeType&&T,l=s&&s.exports===S?y.Buffer:void 0,u=l?l.allocUnsafe:void 0;T.exports=function(_,b){if(b)return _.slice();var R=_.length,O=u?u(R):new _.constructor(R);return _.copy(O),O}},88752:(T,I,m)=>{var y=m(70799);T.exports=function(s,n){var l=n?y(s.buffer):s.buffer;return new s.constructor(l,s.byteOffset,s.byteLength)}},47366:T=>{var I=/\w*$/;T.exports=function(y){var S=new y.constructor(y.source,I.exec(y));return S.lastIndex=y.lastIndex,S}},45486:(T,I,m)=>{var y=m(73555),S=y?y.prototype:void 0,s=S?S.valueOf:void 0;T.exports=function(l){return s?Object(s.call(l)):{}}},83650:(T,I,m)=>{var y=m(70799);T.exports=function(s,n){var l=n?y(s.buffer):s.buffer;return new s.constructor(l,s.byteOffset,s.length)}},35004:T=>{T.exports=function(m,y){var S=-1,s=m.length;for(y||(y=Array(s));++S<s;)y[S]=m[S];return y}},14976:(T,I,m)=>{var y=m(30919),S=m(20826);T.exports=function(n,l,u,h){var _=!u;u||(u={});for(var b=-1,R=l.length;++b<R;){var O=l[b],H=h?h(u[O],n[O],O,u,n):void 0;void 0===H&&(H=n[O]),_?S(u,O,H):y(u,O,H)}return u}},67703:(T,I,m)=>{var y=m(14976),S=m(93003);T.exports=function(n,l){return y(n,S(n),l)}},42058:(T,I,m)=>{var y=m(14976),S=m(48871);T.exports=function(n,l){return y(n,S(n),l)}},96871:(T,I,m)=>{var y=m(13737);T.exports=y["__core-js_shared__"]},32062:(T,I,m)=>{var y=m(30573),S=function(){try{var s=y(Object,"defineProperty");return s({},"",{}),s}catch(n){}}();T.exports=S},35684:T=>{var I="object"==typeof global&&global&&global.Object===Object&&global;T.exports=I},12818:(T,I,m)=>{var y=m(20702),S=m(93003),s=m(5773);T.exports=function(l){return y(l,s,S)}},16233:(T,I,m)=>{var y=m(20702),S=m(48871),s=m(39754);T.exports=function(l){return y(l,s,S)}},53234:(T,I,m)=>{var y=m(38754);T.exports=function(s,n){var l=s.__data__;return y(n)?l["string"==typeof n?"string":"hash"]:l.map}},30573:(T,I,m)=>{var y=m(67097),S=m(19052);T.exports=function(n,l){var u=S(n,l);return y(u)?u:void 0}},79748:(T,I,m)=>{var S=m(1265)(Object.getPrototypeOf,Object);T.exports=S},23531:(T,I,m)=>{var y=m(73555),S=Object.prototype,s=S.hasOwnProperty,n=S.toString,l=y?y.toStringTag:void 0;T.exports=function(h){var _=s.call(h,l),b=h[l];try{h[l]=void 0;var R=!0}catch(H){}var O=n.call(h);return R&&(_?h[l]=b:delete h[l]),O}},93003:(T,I,m)=>{var y=m(71236),S=m(11186),n=Object.prototype.propertyIsEnumerable,l=Object.getOwnPropertySymbols;T.exports=l?function(h){return null==h?[]:(h=Object(h),y(l(h),function(_){return n.call(h,_)}))}:S},48871:(T,I,m)=>{var y=m(60583),S=m(79748),s=m(93003),n=m(11186);T.exports=Object.getOwnPropertySymbols?function(h){for(var _=[];h;)y(_,s(h)),h=S(h);return _}:n},96435:(T,I,m)=>{var y=m(92778),S=m(46741),s=m(96442),n=m(35435),l=m(89885),u=m(15687),h=m(25850),_="[object Map]",R="[object Promise]",O="[object Set]",H="[object WeakMap]",W="[object DataView]",G=h(y),Z=h(S),Q=h(s),Y=h(n),ue=h(l),ne=u;(y&&ne(new y(new ArrayBuffer(1)))!=W||S&&ne(new S)!=_||s&&ne(s.resolve())!=R||n&&ne(new n)!=O||l&&ne(new l)!=H)&&(ne=function(he){var te=u(he),oe="[object Object]"==te?he.constructor:void 0,q=oe?h(oe):"";if(q)switch(q){case G:return W;case Z:return _;case Q:return R;case Y:return O;case ue:return H}return te}),T.exports=ne},19052:T=>{T.exports=function(m,y){return null==m?void 0:m[y]}},58529:(T,I,m)=>{var y=m(87642);T.exports=function(){this.__data__=y?y(null):{},this.size=0}},95882:T=>{T.exports=function(m){var y=this.has(m)&&delete this.__data__[m];return this.size-=y?1:0,y}},93067:(T,I,m)=>{var y=m(87642),n=Object.prototype.hasOwnProperty;T.exports=function(u){var h=this.__data__;if(y){var _=h[u];return"__lodash_hash_undefined__"===_?void 0:_}return n.call(h,u)?h[u]:void 0}},28726:(T,I,m)=>{var y=m(87642),s=Object.prototype.hasOwnProperty;T.exports=function(l){var u=this.__data__;return y?void 0!==u[l]:s.call(u,l)}},3609:(T,I,m)=>{var y=m(87642);T.exports=function(n,l){var u=this.__data__;return this.size+=this.has(n)?0:1,u[n]=y&&void 0===l?"__lodash_hash_undefined__":l,this}},47176:T=>{var m=Object.prototype.hasOwnProperty;T.exports=function(S){var s=S.length,n=new S.constructor(s);return s&&"string"==typeof S[0]&&m.call(S,"index")&&(n.index=S.index,n.input=S.input),n}},53678:(T,I,m)=>{var y=m(70799),S=m(88752),s=m(47366),n=m(45486),l=m(83650);T.exports=function(fe,K,ie){var le=fe.constructor;switch(K){case"[object ArrayBuffer]":return y(fe);case"[object Boolean]":case"[object Date]":return new le(+fe);case"[object DataView]":return S(fe,ie);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return l(fe,ie);case"[object Map]":case"[object Set]":return new le;case"[object Number]":case"[object String]":return new le(fe);case"[object RegExp]":return s(fe);case"[object Symbol]":return n(fe)}}},80177:(T,I,m)=>{var y=m(30866),S=m(79748),s=m(21900);T.exports=function(l){return"function"!=typeof l.constructor||s(l)?{}:y(S(l))}},14846:T=>{var m=/^(?:0|[1-9]\d*)$/;T.exports=function(S,s){var n=typeof S;return!!(s=null==s?9007199254740991:s)&&("number"==n||"symbol"!=n&&m.test(S))&&S>-1&&S%1==0&&S<s}},21056:(T,I,m)=>{var y=m(52092),S=m(23088),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;T.exports=function(u,h){if(y(u))return!1;var _=typeof u;return!("number"!=_&&"symbol"!=_&&"boolean"!=_&&null!=u&&!S(u))||n.test(u)||!s.test(u)||null!=h&&u in Object(h)}},38754:T=>{T.exports=function(m){var y=typeof m;return"string"==y||"number"==y||"symbol"==y||"boolean"==y?"__proto__"!==m:null===m}},94996:(T,I,m)=>{var n,y=m(96871),S=(n=/[^.]+$/.exec(y&&y.keys&&y.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";T.exports=function(n){return!!S&&S in n}},21900:T=>{var I=Object.prototype;T.exports=function(y){var S=y&&y.constructor;return y===("function"==typeof S&&S.prototype||I)}},82626:T=>{T.exports=function(){this.__data__=[],this.size=0}},28471:(T,I,m)=>{var y=m(58459),s=Array.prototype.splice;T.exports=function(l){var u=this.__data__,h=y(u,l);return!(h<0||(h==u.length-1?u.pop():s.call(u,h,1),--this.size,0))}},39349:(T,I,m)=>{var y=m(58459);T.exports=function(s){var n=this.__data__,l=y(n,s);return l<0?void 0:n[l][1]}},80268:(T,I,m)=>{var y=m(58459);T.exports=function(s){return y(this.__data__,s)>-1}},36032:(T,I,m)=>{var y=m(58459);T.exports=function(s,n){var l=this.__data__,u=y(l,s);return u<0?(++this.size,l.push([s,n])):l[u][1]=n,this}},78176:(T,I,m)=>{var y=m(95581),S=m(55961),s=m(46741);T.exports=function(){this.size=0,this.__data__={hash:new y,map:new(s||S),string:new y}}},48116:(T,I,m)=>{var y=m(53234);T.exports=function(s){var n=y(this,s).delete(s);return this.size-=n?1:0,n}},22679:(T,I,m)=>{var y=m(53234);T.exports=function(s){return y(this,s).get(s)}},22230:(T,I,m)=>{var y=m(53234);T.exports=function(s){return y(this,s).has(s)}},99766:(T,I,m)=>{var y=m(53234);T.exports=function(s,n){var l=y(this,s),u=l.size;return l.set(s,n),this.size+=l.size==u?0:1,this}},764:(T,I,m)=>{var y=m(84369);T.exports=function(n){var l=y(n,function(h){return 500===u.size&&u.clear(),h}),u=l.cache;return l}},87642:(T,I,m)=>{var S=m(30573)(Object,"create");T.exports=S},16585:(T,I,m)=>{var S=m(1265)(Object.keys,Object);T.exports=S},91355:T=>{T.exports=function(m){var y=[];if(null!=m)for(var S in Object(m))y.push(S);return y}},27447:(T,I,m)=>{T=m.nmd(T);var y=m(35684),S=I&&!I.nodeType&&I,s=S&&T&&!T.nodeType&&T,l=s&&s.exports===S&&y.process,u=function(){try{return s&&s.require&&s.require("util").types||l&&l.binding&&l.binding("util")}catch(_){}}();T.exports=u},98406:T=>{var m=Object.prototype.toString;T.exports=function(S){return m.call(S)}},1265:T=>{T.exports=function(m,y){return function(S){return m(y(S))}}},13737:(T,I,m)=>{var y=m(35684),S="object"==typeof self&&self&&self.Object===Object&&self,s=y||S||Function("return this")();T.exports=s},38359:(T,I,m)=>{var y=m(55961);T.exports=function(){this.__data__=new y,this.size=0}},35987:T=>{T.exports=function(m){var y=this.__data__,S=y.delete(m);return this.size=y.size,S}},40286:T=>{T.exports=function(m){return this.__data__.get(m)}},62709:T=>{T.exports=function(m){return this.__data__.has(m)}},92764:(T,I,m)=>{var y=m(55961),S=m(46741),s=m(40281);T.exports=function(u,h){var _=this.__data__;if(_ instanceof y){var b=_.__data__;if(!S||b.length<199)return b.push([u,h]),this.size=++_.size,this;_=this.__data__=new s(b)}return _.set(u,h),this.size=_.size,this}},55715:(T,I,m)=>{var y=m(764),S=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,n=y(function(l){var u=[];return 46===l.charCodeAt(0)&&u.push(""),l.replace(S,function(h,_,b,R){u.push(b?R.replace(s,"$1"):_||h)}),u});T.exports=n},41162:(T,I,m)=>{var y=m(23088);T.exports=function(n){if("string"==typeof n||y(n))return n;var l=n+"";return"0"==l&&1/n==-1/0?"-0":l}},25850:T=>{var m=Function.prototype.toString;T.exports=function(S){if(null!=S){try{return m.call(S)}catch(s){}try{return S+""}catch(s){}}return""}},32005:(T,I,m)=>{var y=m(17584);T.exports=function(l){return y(l,5)}},9412:T=>{T.exports=function(m,y){return m===y||m!=m&&y!=y}},87578:(T,I,m)=>{var y=m(80255);T.exports=function(s,n,l){var u=null==s?void 0:y(s,n);return void 0===u?l:u}},12208:(T,I,m)=>{var y=m(11760),S=m(12142),s=Object.prototype,n=s.hasOwnProperty,l=s.propertyIsEnumerable,u=y(function(){return arguments}())?y:function(h){return S(h)&&n.call(h,"callee")&&!l.call(h,"callee")};T.exports=u},52092:T=>{T.exports=Array.isArray},54528:(T,I,m)=>{var y=m(27660),S=m(85353);T.exports=function(n){return null!=n&&S(n.length)&&!y(n)}},44735:(T,I,m)=>{T=m.nmd(T);var y=m(13737),S=m(96585),s=I&&!I.nodeType&&I,n=s&&T&&!T.nodeType&&T,u=n&&n.exports===s?y.Buffer:void 0;T.exports=(u?u.isBuffer:void 0)||S},36593:(T,I,m)=>{var y=m(85924),S=m(96435),s=m(12208),n=m(52092),l=m(54528),u=m(44735),h=m(21900),_=m(83483),H=Object.prototype.hasOwnProperty;T.exports=function(G){if(null==G)return!0;if(l(G)&&(n(G)||"string"==typeof G||"function"==typeof G.splice||u(G)||_(G)||s(G)))return!G.length;var Z=S(G);if("[object Map]"==Z||"[object Set]"==Z)return!G.size;if(h(G))return!y(G).length;for(var Q in G)if(H.call(G,Q))return!1;return!0}},27660:(T,I,m)=>{var y=m(15687),S=m(27954);T.exports=function(_){if(!S(_))return!1;var b=y(_);return"[object Function]"==b||"[object GeneratorFunction]"==b||"[object AsyncFunction]"==b||"[object Proxy]"==b}},85353:T=>{T.exports=function(y){return"number"==typeof y&&y>-1&&y%1==0&&y<=9007199254740991}},56432:(T,I,m)=>{var y=m(54929),S=m(49613),s=m(27447),n=s&&s.isMap,l=n?S(n):y;T.exports=l},27954:T=>{T.exports=function(m){var y=typeof m;return null!=m&&("object"==y||"function"==y)}},12142:T=>{T.exports=function(m){return null!=m&&"object"==typeof m}},1794:(T,I,m)=>{var y=m(15687),S=m(79748),s=m(12142),h=Function.prototype.toString,_=Object.prototype.hasOwnProperty,b=h.call(Object);T.exports=function(O){if(!s(O)||"[object Object]"!=y(O))return!1;var H=S(O);if(null===H)return!0;var W=_.call(H,"constructor")&&H.constructor;return"function"==typeof W&&W instanceof W&&h.call(W)==b}},65871:(T,I,m)=>{var y=m(77480),S=m(49613),s=m(27447),n=s&&s.isSet,l=n?S(n):y;T.exports=l},23088:(T,I,m)=>{var y=m(15687),S=m(12142);T.exports=function(l){return"symbol"==typeof l||S(l)&&"[object Symbol]"==y(l)}},83483:(T,I,m)=>{var y=m(89638),S=m(49613),s=m(27447),n=s&&s.isTypedArray,l=n?S(n):y;T.exports=l},5773:(T,I,m)=>{var y=m(50185),S=m(85924),s=m(54528);T.exports=function(l){return s(l)?y(l):S(l)}},39754:(T,I,m)=>{var y=m(50185),S=m(71300),s=m(54528);T.exports=function(l){return s(l)?y(l,!0):S(l)}},84369:(T,I,m)=>{var y=m(40281);function s(n,l){if("function"!=typeof n||null!=l&&"function"!=typeof l)throw new TypeError("Expected a function");var u=function(){var h=arguments,_=l?l.apply(this,h):h[0],b=u.cache;if(b.has(_))return b.get(_);var R=n.apply(this,h);return u.cache=b.set(_,R)||b,R};return u.cache=new(s.Cache||y),u}s.Cache=y,T.exports=s},11186:T=>{T.exports=function(){return[]}},96585:T=>{T.exports=function(){return!1}},19169:(T,I,m)=>{var y=m(19917);T.exports=function(s){return null==s?"":y(s)}},29007:(T,I,m)=>{var y="function"==typeof Map&&Map.prototype,S=Object.getOwnPropertyDescriptor&&y?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,s=y&&S&&"function"==typeof S.get?S.get:null,n=y&&Map.prototype.forEach,l="function"==typeof Set&&Set.prototype,u=Object.getOwnPropertyDescriptor&&l?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,h=l&&u&&"function"==typeof u.get?u.get:null,_=l&&Set.prototype.forEach,R="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,H="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,G="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,Z=Boolean.prototype.valueOf,Q=Object.prototype.toString,Y=Function.prototype.toString,ue=String.prototype.match,ne="function"==typeof BigInt?BigInt.prototype.valueOf:null,he=Object.getOwnPropertySymbols,te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,oe="function"==typeof Symbol&&"object"==typeof Symbol.iterator,q=Object.prototype.propertyIsEnumerable,J=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(Ie){return Ie.__proto__}:null),F=m(96553).custom,fe=F&&Ve(F)?F:null,K="function"==typeof Symbol&&void 0!==Symbol.toStringTag?Symbol.toStringTag:null;function ie(Ie,Me,Xt){var qt="double"===(Xt.quoteStyle||Me)?'"':"'";return qt+Ie+qt}function le(Ie){return String(Ie).replace(/"/g,"&quot;")}function re(Ie){return!("[object Array]"!==je(Ie)||K&&"object"==typeof Ie&&K in Ie)}function Ve(Ie){if(oe)return Ie&&"object"==typeof Ie&&Ie instanceof Symbol;if("symbol"==typeof Ie)return!0;if(!Ie||"object"!=typeof Ie||!te)return!1;try{return te.call(Ie),!0}catch(Me){}return!1}T.exports=function Ie(Me,Xt,qt,ai){var ei=Xt||{};if(He(ei,"quoteStyle")&&"single"!==ei.quoteStyle&&"double"!==ei.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(He(ei,"maxStringLength")&&("number"==typeof ei.maxStringLength?ei.maxStringLength<0&&ei.maxStringLength!==1/0:null!==ei.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var Si=!He(ei,"customInspect")||ei.customInspect;if("boolean"!=typeof Si&&"symbol"!==Si)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(He(ei,"indent")&&null!==ei.indent&&"\t"!==ei.indent&&!(parseInt(ei.indent,10)===ei.indent&&ei.indent>0))throw new TypeError('options "indent" must be "\\t", an integer > 0, or `null`');if(void 0===Me)return"undefined";if(null===Me)return"null";if("boolean"==typeof Me)return Me?"true":"false";if("string"==typeof Me)return mt(Me,ei);if("number"==typeof Me)return 0===Me?1/0/Me>0?"0":"-0":String(Me);if("bigint"==typeof Me)return String(Me)+"n";var An=void 0===ei.depth?5:ei.depth;if(void 0===qt&&(qt=0),qt>=An&&An>0&&"object"==typeof Me)return re(Me)?"[Array]":"[Object]";var fi=function(Ie,Me){var Xt;if("\t"===Ie.indent)Xt="\t";else{if(!("number"==typeof Ie.indent&&Ie.indent>0))return null;Xt=Array(Ie.indent+1).join(" ")}return{base:Xt,prev:Array(Me+1).join(Xt)}}(ei,qt);if(void 0===ai)ai=[];else if(gt(ai,Me)>=0)return"[Circular]";function at(rr,Pa,Dn){if(Pa&&(ai=ai.slice()).push(Pa),Dn){var Un={depth:ei.depth};return He(ei,"quoteStyle")&&(Un.quoteStyle=ei.quoteStyle),Ie(rr,Un,qt+1,ai)}return Ie(rr,ei,qt+1,ai)}if("function"==typeof Me){var lt=function(Ie){if(Ie.name)return Ie.name;var Me=ue.call(Y.call(Ie),/^function\s*([\w$]+)/);return Me?Me[1]:null}(Me),Ne=xn(Me,at);return"[Function"+(lt?": "+lt:" (anonymous)")+"]"+(Ne.length>0?" { "+Ne.join(", ")+" }":"")}if(Ve(Me)){var Ke=oe?String(Me).replace(/^(Symbol\(.*\))_[^)]*$/,"$1"):te.call(Me);return"object"!=typeof Me||oe?Ke:ze(Ke)}if(function(Ie){return!(!Ie||"object"!=typeof Ie)&&("undefined"!=typeof HTMLElement&&Ie instanceof HTMLElement||"string"==typeof Ie.nodeName&&"function"==typeof Ie.getAttribute)}(Me)){for(var me="<"+String(Me.nodeName).toLowerCase(),Ae=Me.attributes||[],Xe=0;Xe<Ae.length;Xe++)me+=" "+Ae[Xe].name+"="+ie(le(Ae[Xe].value),"double",ei);return me+=">",Me.childNodes&&Me.childNodes.length&&(me+="..."),me+"</"+String(Me.nodeName).toLowerCase()+">"}if(re(Me)){if(0===Me.length)return"[]";var ct=xn(Me,at);return fi&&!function(Ie){for(var Me=0;Me<Ie.length;Me++)if(gt(Ie[Me],"\n")>=0)return!1;return!0}(ct)?"["+fn(ct,fi)+"]":"[ "+ct.join(", ")+" ]"}if(function(Ie){return!("[object Error]"!==je(Ie)||K&&"object"==typeof Ie&&K in Ie)}(Me)){var Ii=xn(Me,at);return 0===Ii.length?"["+String(Me)+"]":"{ ["+String(Me)+"] "+Ii.join(", ")+" }"}if("object"==typeof Me&&Si){if(fe&&"function"==typeof Me[fe])return Me[fe]();if("symbol"!==Si&&"function"==typeof Me.inspect)return Me.inspect()}if(function(Ie){if(!s||!Ie||"object"!=typeof Ie)return!1;try{s.call(Ie);try{h.call(Ie)}catch(Me){return!0}return Ie instanceof Map}catch(Me){}return!1}(Me)){var dt=[];return n.call(Me,function(rr,Pa){dt.push(at(Pa,Me,!0)+" => "+at(rr,Me))}),Yt("Map",s.call(Me),dt,fi)}if(function(Ie){if(!h||!Ie||"object"!=typeof Ie)return!1;try{h.call(Ie);try{s.call(Ie)}catch(Me){return!0}return Ie instanceof Set}catch(Me){}return!1}(Me)){var _t=[];return _.call(Me,function(rr){_t.push(at(rr,Me))}),Yt("Set",h.call(Me),_t,fi)}if(function(Ie){if(!R||!Ie||"object"!=typeof Ie)return!1;try{R.call(Ie,R);try{H.call(Ie,H)}catch(Me){return!0}return Ie instanceof WeakMap}catch(Me){}return!1}(Me))return rn("WeakMap");if(function(Ie){if(!H||!Ie||"object"!=typeof Ie)return!1;try{H.call(Ie,H);try{R.call(Ie,R)}catch(Me){return!0}return Ie instanceof WeakSet}catch(Me){}return!1}(Me))return rn("WeakSet");if(function(Ie){if(!G||!Ie||"object"!=typeof Ie)return!1;try{return G.call(Ie),!0}catch(Me){}return!1}(Me))return rn("WeakRef");if(function(Ie){return!("[object Number]"!==je(Ie)||K&&"object"==typeof Ie&&K in Ie)}(Me))return ze(at(Number(Me)));if(function(Ie){if(!Ie||"object"!=typeof Ie||!ne)return!1;try{return ne.call(Ie),!0}catch(Me){}return!1}(Me))return ze(at(ne.call(Me)));if(function(Ie){return!("[object Boolean]"!==je(Ie)||K&&"object"==typeof Ie&&K in Ie)}(Me))return ze(Z.call(Me));if(function(Ie){return!("[object String]"!==je(Ie)||K&&"object"==typeof Ie&&K in Ie)}(Me))return ze(at(String(Me)));if(!function(Ie){return!("[object Date]"!==je(Ie)||K&&"object"==typeof Ie&&K in Ie)}(Me)&&!function(Ie){return!("[object RegExp]"!==je(Ie)||K&&"object"==typeof Ie&&K in Ie)}(Me)){var Ot=xn(Me,at),Vt=J?J(Me)===Object.prototype:Me instanceof Object||Me.constructor===Object,di=Me instanceof Object?"":"null prototype",gn=!Vt&&K&&Object(Me)===Me&&K in Me?je(Me).slice(8,-1):di?"Object":"",qi=(Vt||"function"!=typeof Me.constructor?"":Me.constructor.name?Me.constructor.name+" ":"")+(gn||di?"["+[].concat(gn||[],di||[]).join(": ")+"] ":"");return 0===Ot.length?qi+"{}":fi?qi+"{"+fn(Ot,fi)+"}":qi+"{ "+Ot.join(", ")+" }"}return String(Me)};var Ue=Object.prototype.hasOwnProperty||function(Ie){return Ie in this};function He(Ie,Me){return Ue.call(Ie,Me)}function je(Ie){return Q.call(Ie)}function gt(Ie,Me){if(Ie.indexOf)return Ie.indexOf(Me);for(var Xt=0,qt=Ie.length;Xt<qt;Xt++)if(Ie[Xt]===Me)return Xt;return-1}function mt(Ie,Me){if(Ie.length>Me.maxStringLength){var Xt=Ie.length-Me.maxStringLength,qt="... "+Xt+" more character"+(Xt>1?"s":"");return mt(Ie.slice(0,Me.maxStringLength),Me)+qt}return ie(Ie.replace(/(['\\])/g,"\\$1").replace(/[\x00-\x1f]/g,nn),"single",Me)}function nn(Ie){var Me=Ie.charCodeAt(0),Xt={8:"b",9:"t",10:"n",12:"f",13:"r"}[Me];return Xt?"\\"+Xt:"\\x"+(Me<16?"0":"")+Me.toString(16).toUpperCase()}function ze(Ie){return"Object("+Ie+")"}function rn(Ie){return Ie+" { ? }"}function Yt(Ie,Me,Xt,qt){return Ie+" ("+Me+") {"+(qt?fn(Xt,qt):Xt.join(", "))+"}"}function fn(Ie,Me){if(0===Ie.length)return"";var Xt="\n"+Me.prev+Me.base;return Xt+Ie.join(","+Xt)+"\n"+Me.prev}function xn(Ie,Me){var Xt=re(Ie),qt=[];if(Xt){qt.length=Ie.length;for(var ai=0;ai<Ie.length;ai++)qt[ai]=He(Ie,ai)?Me(Ie[ai],Ie):""}var Si,ei="function"==typeof he?he(Ie):[];if(oe){Si={};for(var An=0;An<ei.length;An++)Si["$"+ei[An]]=ei[An]}for(var fi in Ie)!He(Ie,fi)||Xt&&String(Number(fi))===fi&&fi<Ie.length||oe&&Si["$"+fi]instanceof Symbol||(/[^\w$]/.test(fi)?qt.push(Me(fi,Ie)+": "+Me(Ie[fi],Ie)):qt.push(fi+": "+Me(Ie[fi],Ie)));if("function"==typeof he)for(var at=0;at<ei.length;at++)q.call(Ie,ei[at])&&qt.push("["+Me(ei[at])+"]: "+Me(Ie[ei[at]],Ie));return qt}},73881:T=>{"use strict";function I(m,y){return Object.prototype.hasOwnProperty.call(m,y)}T.exports=function(m,y,S,s){S=S||"=";var n={};if("string"!=typeof m||0===m.length)return n;var l=/\+/g;m=m.split(y=y||"&");var u=1e3;s&&"number"==typeof s.maxKeys&&(u=s.maxKeys);var h=m.length;u>0&&h>u&&(h=u);for(var _=0;_<h;++_){var O,H,W,G,b=m[_].replace(l,"%20"),R=b.indexOf(S);R>=0?(O=b.substr(0,R),H=b.substr(R+1)):(O=b,H=""),W=decodeURIComponent(O),G=decodeURIComponent(H),I(n,W)?Array.isArray(n[W])?n[W].push(G):n[W]=[n[W],G]:n[W]=G}return n}},15338:T=>{"use strict";var I=function(m){switch(typeof m){case"string":return m;case"boolean":return m?"true":"false";case"number":return isFinite(m)?m:"";default:return""}};T.exports=function(m,y,S,s){return y=y||"&",S=S||"=",null===m&&(m=void 0),"object"==typeof m?Object.keys(m).map(function(n){var l=encodeURIComponent(I(n))+S;return Array.isArray(m[n])?m[n].map(function(u){return l+encodeURIComponent(I(u))}).join(y):l+encodeURIComponent(I(m[n]))}).join(y):s?encodeURIComponent(I(s))+S+encodeURIComponent(I(m)):""}},89069:(T,I,m)=>{"use strict";I.decode=I.parse=m(73881),I.encode=I.stringify=m(15338)},91388:T=>{var I=function(m){"use strict";var s,y=Object.prototype,S=y.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},l=n.iterator||"@@iterator",u=n.asyncIterator||"@@asyncIterator",h=n.toStringTag||"@@toStringTag";function _(de,ve,Pe){return Object.defineProperty(de,ve,{value:Pe,enumerable:!0,configurable:!0,writable:!0}),de[ve]}try{_({},"")}catch(de){_=function(ve,Pe,Se){return ve[Pe]=Se}}function b(de,ve,Pe,Se){var Ve=Object.create((ve&&ve.prototype instanceof Q?ve:Q).prototype),Le=new le(Se||[]);return Ve._invoke=function(de,ve,Pe){var Se=O;return function(Ve,Le){if(Se===W)throw new Error("Generator is already running");if(Se===G){if("throw"===Ve)throw Le;return Re()}for(Pe.method=Ve,Pe.arg=Le;;){var Ue=Pe.delegate;if(Ue){var He=fe(Ue,Pe);if(He){if(He===Z)continue;return He}}if("next"===Pe.method)Pe.sent=Pe._sent=Pe.arg;else if("throw"===Pe.method){if(Se===O)throw Se=G,Pe.arg;Pe.dispatchException(Pe.arg)}else"return"===Pe.method&&Pe.abrupt("return",Pe.arg);Se=W;var je=R(de,ve,Pe);if("normal"===je.type){if(Se=Pe.done?G:H,je.arg===Z)continue;return{value:je.arg,done:Pe.done}}"throw"===je.type&&(Se=G,Pe.method="throw",Pe.arg=je.arg)}}}(de,Pe,Le),Ve}function R(de,ve,Pe){try{return{type:"normal",arg:de.call(ve,Pe)}}catch(Se){return{type:"throw",arg:Se}}}m.wrap=b;var O="suspendedStart",H="suspendedYield",W="executing",G="completed",Z={};function Q(){}function Y(){}function ue(){}var ne={};_(ne,l,function(){return this});var he=Object.getPrototypeOf,te=he&&he(he(re([])));te&&te!==y&&S.call(te,l)&&(ne=te);var oe=ue.prototype=Q.prototype=Object.create(ne);function q(de){["next","throw","return"].forEach(function(ve){_(de,ve,function(Pe){return this._invoke(ve,Pe)})})}function J(de,ve){function Pe(Ve,Le,Ue,He){var je=R(de[Ve],de,Le);if("throw"!==je.type){var ut=je.arg,gt=ut.value;return gt&&"object"==typeof gt&&S.call(gt,"__await")?ve.resolve(gt.__await).then(function(At){Pe("next",At,Ue,He)},function(At){Pe("throw",At,Ue,He)}):ve.resolve(gt).then(function(At){ut.value=At,Ue(ut)},function(At){return Pe("throw",At,Ue,He)})}He(je.arg)}var Se;this._invoke=function(Ve,Le){function Ue(){return new ve(function(He,je){Pe(Ve,Le,He,je)})}return Se=Se?Se.then(Ue,Ue):Ue()}}function fe(de,ve){var Pe=de.iterator[ve.method];if(Pe===s){if(ve.delegate=null,"throw"===ve.method){if(de.iterator.return&&(ve.method="return",ve.arg=s,fe(de,ve),"throw"===ve.method))return Z;ve.method="throw",ve.arg=new TypeError("The iterator does not provide a 'throw' method")}return Z}var Se=R(Pe,de.iterator,ve.arg);if("throw"===Se.type)return ve.method="throw",ve.arg=Se.arg,ve.delegate=null,Z;var Te=Se.arg;return Te?Te.done?(ve[de.resultName]=Te.value,ve.next=de.nextLoc,"return"!==ve.method&&(ve.method="next",ve.arg=s),ve.delegate=null,Z):Te:(ve.method="throw",ve.arg=new TypeError("iterator result is not an object"),ve.delegate=null,Z)}function K(de){var ve={tryLoc:de[0]};1 in de&&(ve.catchLoc=de[1]),2 in de&&(ve.finallyLoc=de[2],ve.afterLoc=de[3]),this.tryEntries.push(ve)}function ie(de){var ve=de.completion||{};ve.type="normal",delete ve.arg,de.completion=ve}function le(de){this.tryEntries=[{tryLoc:"root"}],de.forEach(K,this),this.reset(!0)}function re(de){if(de){var ve=de[l];if(ve)return ve.call(de);if("function"==typeof de.next)return de;if(!isNaN(de.length)){var Pe=-1,Se=function Te(){for(;++Pe<de.length;)if(S.call(de,Pe))return Te.value=de[Pe],Te.done=!1,Te;return Te.value=s,Te.done=!0,Te};return Se.next=Se}}return{next:Re}}function Re(){return{value:s,done:!0}}return Y.prototype=ue,_(oe,"constructor",ue),_(ue,"constructor",Y),Y.displayName=_(ue,h,"GeneratorFunction"),m.isGeneratorFunction=function(de){var ve="function"==typeof de&&de.constructor;return!!ve&&(ve===Y||"GeneratorFunction"===(ve.displayName||ve.name))},m.mark=function(de){return Object.setPrototypeOf?Object.setPrototypeOf(de,ue):(de.__proto__=ue,_(de,h,"GeneratorFunction")),de.prototype=Object.create(oe),de},m.awrap=function(de){return{__await:de}},q(J.prototype),_(J.prototype,u,function(){return this}),m.AsyncIterator=J,m.async=function(de,ve,Pe,Se,Te){void 0===Te&&(Te=Promise);var Ve=new J(b(de,ve,Pe,Se),Te);return m.isGeneratorFunction(ve)?Ve:Ve.next().then(function(Le){return Le.done?Le.value:Ve.next()})},q(oe),_(oe,h,"Generator"),_(oe,l,function(){return this}),_(oe,"toString",function(){return"[object Generator]"}),m.keys=function(de){var ve=[];for(var Pe in de)ve.push(Pe);return ve.reverse(),function Se(){for(;ve.length;){var Te=ve.pop();if(Te in de)return Se.value=Te,Se.done=!1,Se}return Se.done=!0,Se}},m.values=re,le.prototype={constructor:le,reset:function(de){if(this.prev=0,this.next=0,this.sent=this._sent=s,this.done=!1,this.delegate=null,this.method="next",this.arg=s,this.tryEntries.forEach(ie),!de)for(var ve in this)"t"===ve.charAt(0)&&S.call(this,ve)&&!isNaN(+ve.slice(1))&&(this[ve]=s)},stop:function(){this.done=!0;var ve=this.tryEntries[0].completion;if("throw"===ve.type)throw ve.arg;return this.rval},dispatchException:function(de){if(this.done)throw de;var ve=this;function Pe(He,je){return Ve.type="throw",Ve.arg=de,ve.next=He,je&&(ve.method="next",ve.arg=s),!!je}for(var Se=this.tryEntries.length-1;Se>=0;--Se){var Te=this.tryEntries[Se],Ve=Te.completion;if("root"===Te.tryLoc)return Pe("end");if(Te.tryLoc<=this.prev){var Le=S.call(Te,"catchLoc"),Ue=S.call(Te,"finallyLoc");if(Le&&Ue){if(this.prev<Te.catchLoc)return Pe(Te.catchLoc,!0);if(this.prev<Te.finallyLoc)return Pe(Te.finallyLoc)}else if(Le){if(this.prev<Te.catchLoc)return Pe(Te.catchLoc,!0)}else{if(!Ue)throw new Error("try statement without catch or finally");if(this.prev<Te.finallyLoc)return Pe(Te.finallyLoc)}}}},abrupt:function(de,ve){for(var Pe=this.tryEntries.length-1;Pe>=0;--Pe){var Se=this.tryEntries[Pe];if(Se.tryLoc<=this.prev&&S.call(Se,"finallyLoc")&&this.prev<Se.finallyLoc){var Te=Se;break}}Te&&("break"===de||"continue"===de)&&Te.tryLoc<=ve&&ve<=Te.finallyLoc&&(Te=null);var Ve=Te?Te.completion:{};return Ve.type=de,Ve.arg=ve,Te?(this.method="next",this.next=Te.finallyLoc,Z):this.complete(Ve)},complete:function(de,ve){if("throw"===de.type)throw de.arg;return"break"===de.type||"continue"===de.type?this.next=de.arg:"return"===de.type?(this.rval=this.arg=de.arg,this.method="return",this.next="end"):"normal"===de.type&&ve&&(this.next=ve),Z},finish:function(de){for(var ve=this.tryEntries.length-1;ve>=0;--ve){var Pe=this.tryEntries[ve];if(Pe.finallyLoc===de)return this.complete(Pe.completion,Pe.afterLoc),ie(Pe),Z}},catch:function(de){for(var ve=this.tryEntries.length-1;ve>=0;--ve){var Pe=this.tryEntries[ve];if(Pe.tryLoc===de){var Se=Pe.completion;if("throw"===Se.type){var Te=Se.arg;ie(Pe)}return Te}}throw new Error("illegal catch attempt")},delegateYield:function(de,ve,Pe){return this.delegate={iterator:re(de),resultName:ve,nextLoc:Pe},"next"===this.method&&(this.arg=s),Z}},m}(T.exports);try{regeneratorRuntime=I}catch(m){"object"==typeof globalThis?globalThis.regeneratorRuntime=I:Function("r","regeneratorRuntime = r")(I)}},69109:(T,I,m)=>{"use strict";var y=m(1326),S=m(4220),s=m(29007),n=y("%TypeError%"),l=y("%WeakMap%",!0),u=y("%Map%",!0),h=S("WeakMap.prototype.get",!0),_=S("WeakMap.prototype.set",!0),b=S("WeakMap.prototype.has",!0),R=S("Map.prototype.get",!0),O=S("Map.prototype.set",!0),H=S("Map.prototype.has",!0),W=function(Y,ue){for(var he,ne=Y;null!==(he=ne.next);ne=he)if(he.key===ue)return ne.next=he.next,he.next=Y.next,Y.next=he,he};T.exports=function(){var ue,ne,he,te={assert:function(oe){if(!te.has(oe))throw new n("Side channel does not contain "+s(oe))},get:function(oe){if(l&&oe&&("object"==typeof oe||"function"==typeof oe)){if(ue)return h(ue,oe)}else if(u){if(ne)return R(ne,oe)}else if(he)return function(Y,ue){var ne=W(Y,ue);return ne&&ne.value}(he,oe)},has:function(oe){if(l&&oe&&("object"==typeof oe||"function"==typeof oe)){if(ue)return b(ue,oe)}else if(u){if(ne)return H(ne,oe)}else if(he)return function(Y,ue){return!!W(Y,ue)}(he,oe);return!1},set:function(oe,q){l&&oe&&("object"==typeof oe||"function"==typeof oe)?(ue||(ue=new l),_(ue,oe,q)):u?(ne||(ne=new u),O(ne,oe,q)):(he||(he={key:{},next:null}),function(Y,ue,ne){var he=W(Y,ue);he?he.value=ne:Y.next={key:ue,next:Y.next,value:ne}}(he,oe,q))}};return te}},12763:(T,I,m)=>{"use strict";m.r(I),m.d(I,{default:()=>rd,helpers:()=>Qb});var y={};m.r(y),m.d(y,{JsonPatchError:()=>Pn,_areEquals:()=>xl,applyOperation:()=>Fr,applyPatch:()=>xo,applyReducer:()=>uf,deepClone:()=>ph,getValueByPointer:()=>Fs,validate:()=>Bs,validator:()=>fo});var S={};m.r(S),m.d(S,{compare:()=>fa,generate:()=>Al,observe:()=>xc,unobserve:()=>hf});var s={};m.r(s),m.d(s,{cookie:()=>ym,header:()=>bm,path:()=>gS,query:()=>xh});var n=m(23005),l=m(12988),u=m(66360),h=m(18753),_=m(71094),b=m(90343),R=m(84916),O=m(31946);function H(f,C,w){return C in f?O(f,C,{value:w,enumerable:!0,configurable:!0,writable:!0}):f[C]=w,f}function W(f,C){var w=n(f);if(l){var M=l(f);C&&(M=u(M).call(M,function(N){return h(f,N).enumerable})),w.push.apply(w,M)}return w}function G(f){for(var C=1;C<arguments.length;C++){var M,w=null!=arguments[C]?arguments[C]:{};if(C%2)_(M=W(Object(w),!0)).call(M,function(V){H(f,V,w[V])});else if(b)R(f,b(w));else{var N;_(N=W(Object(w))).call(N,function(V){O(f,V,h(w,V))})}}return f}var Z=m(53130),Q=m.n(Z),Y=m(38330),ue=m.n(Y),ne=m(23402),he=m(93449),te=m(57272),oe=m(57124),q=m(19898),J=m(97326);function F(f,C){(null==C||C>f.length)&&(C=f.length);for(var w=0,M=new Array(C);w<C;w++)M[w]=f[w];return M}function fe(f,C){var w;if(f){if("string"==typeof f)return F(f,C);var M=q(w=Object.prototype.toString.call(f)).call(w,8,-1);if("Object"===M&&f.constructor&&(M=f.constructor.name),"Map"===M||"Set"===M)return J(f);if("Arguments"===M||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(M))return F(f,C)}}function K(f,C){var w=void 0!==he&&te(f)||f["@@iterator"];if(!w){if(oe(f)||(w=fe(f))||C&&f&&"number"==typeof f.length){w&&(f=w);var M=0,N=function(){};return{s:N,n:function(){return M>=f.length?{done:!0}:{done:!1,value:f[M++]}},e:function(ce){throw ce},f:N}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var z,V=!0,B=!1;return{s:function(){w=w.call(f)},n:function(){var ce=w.next();return V=ce.done,ce},e:function(ce){B=!0,z=ce},f:function(){try{!V&&null!=w.return&&w.return()}finally{if(B)throw z}}}}var ie=m(3599);function le(f){return(le="function"==typeof he&&"symbol"==typeof ie?function(w){return typeof w}:function(w){return w&&"function"==typeof he&&w.constructor===he&&w!==he.prototype?"symbol":typeof w})(f)}function ve(f,C){return function(f){if(oe(f))return f}(f)||function(f,C){var w=null==f?null:void 0!==he&&te(f)||f["@@iterator"];if(null!=w){var B,z,M=[],N=!0,V=!1;try{for(w=w.call(f);!(N=(B=w.next()).done)&&(M.push(B.value),!C||M.length!==C);N=!0);}catch(ae){V=!0,z=ae}finally{try{!N&&null!=w.return&&w.return()}finally{if(V)throw z}}return M}}(f,C)||fe(f,C)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Pe=m(26394);function Se(f,C,w,M,N,V,B){try{var z=f[V](B),ae=z.value}catch(ce){return void w(ce)}z.done?C(ae):Pe.resolve(ae).then(M,N)}function Te(f){return function(){var C=this,w=arguments;return new Pe(function(M,N){var V=f.apply(C,w);function B(ae){Se(V,M,N,B,z,"next",ae)}function z(ae){Se(V,M,N,B,z,"throw",ae)}B(void 0)})}}var Ve=m(39126),Le=m.n(Ve),Ue=m(11761),He=m.n(Ue),je=m(20272),ut=m.n(je),gt=m(89926),At=m.n(gt),mi=m(23289),Bi=m.n(mi),Ci=m(64770),Et=m.n(Ci),ui=m(45635),mt=m.n(ui),nn=m(87048),ze=m.n(nn),rn=m(45107),Yt=m.n(rn),on=m(26775),wi=m.n(on),xn=(m(36316),m(9325)),Ie=m.n(xn);function Me(f){return null==f}var me={isNothing:Me,isObject:function(f){return"object"==typeof f&&null!==f},toArray:function(f){return Array.isArray(f)?f:Me(f)?[]:[f]},repeat:function(f,C){var M,w="";for(M=0;M<C;M+=1)w+=f;return w},isNegativeZero:function(f){return 0===f&&Number.NEGATIVE_INFINITY===1/f},extend:function(f,C){var w,M,N,V;if(C)for(w=0,M=(V=Object.keys(C)).length;w<M;w+=1)f[N=V[w]]=C[N];return f}};function Ae(f,C){var w="",M=f.reason||"(unknown reason)";return f.mark?(f.mark.name&&(w+='in "'+f.mark.name+'" '),w+="("+(f.mark.line+1)+":"+(f.mark.column+1)+")",!C&&f.mark.snippet&&(w+="\n\n"+f.mark.snippet),M+" "+w):M}function Xe(f,C){Error.call(this),this.name="YAMLException",this.reason=f,this.mark=C,this.message=Ae(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}(Xe.prototype=Object.create(Error.prototype)).constructor=Xe,Xe.prototype.toString=function(C){return this.name+": "+Ae(this,C)};var ct=Xe;function Ii(f,C,w,M,N){var V="",B="",z=Math.floor(N/2)-1;return M-C>z&&(C=M-z+(V=" ... ").length),w-M>z&&(w=M+z-(B=" ...").length),{str:V+f.slice(C,w).replace(/\t/g,"\u2192")+B,pos:M-C+V.length}}function dt(f,C){return me.repeat(" ",C-f.length)+f}var Vt=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],di=["scalar","sequence","mapping"],qi=function(f,C){if(C=C||{},Object.keys(C).forEach(function(w){if(-1===Vt.indexOf(w))throw new ct('Unknown option "'+w+'" is met in definition of "'+f+'" YAML type.')}),this.options=C,this.tag=f,this.kind=C.kind||null,this.resolve=C.resolve||function(){return!0},this.construct=C.construct||function(w){return w},this.instanceOf=C.instanceOf||null,this.predicate=C.predicate||null,this.represent=C.represent||null,this.representName=C.representName||null,this.defaultStyle=C.defaultStyle||null,this.multi=C.multi||!1,this.styleAliases=function(f){var C={};return null!==f&&Object.keys(f).forEach(function(w){f[w].forEach(function(M){C[String(M)]=w})}),C}(C.styleAliases||null),-1===di.indexOf(this.kind))throw new ct('Unknown kind "'+this.kind+'" is specified for "'+f+'" YAML type.')};function rr(f,C){var w=[];return f[C].forEach(function(M){var N=w.length;w.forEach(function(V,B){V.tag===M.tag&&V.kind===M.kind&&V.multi===M.multi&&(N=B)}),w[N]=M}),w}function Dn(f){return this.extend(f)}Dn.prototype.extend=function(C){var w=[],M=[];if(C instanceof qi)M.push(C);else if(Array.isArray(C))M=M.concat(C);else{if(!C||!Array.isArray(C.implicit)&&!Array.isArray(C.explicit))throw new ct("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");C.implicit&&(w=w.concat(C.implicit)),C.explicit&&(M=M.concat(C.explicit))}w.forEach(function(V){if(!(V instanceof qi))throw new ct("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(V.loadKind&&"scalar"!==V.loadKind)throw new ct("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(V.multi)throw new ct("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),M.forEach(function(V){if(!(V instanceof qi))throw new ct("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var N=Object.create(Dn.prototype);return N.implicit=(this.implicit||[]).concat(w),N.explicit=(this.explicit||[]).concat(M),N.compiledImplicit=rr(N,"implicit"),N.compiledExplicit=rr(N,"explicit"),N.compiledTypeMap=function(){var C,w,f={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function M(N){N.multi?(f.multi[N.kind].push(N),f.multi.fallback.push(N)):f[N.kind][N.tag]=f.fallback[N.tag]=N}for(C=0,w=arguments.length;C<w;C+=1)arguments[C].forEach(M);return f}(N.compiledImplicit,N.compiledExplicit),N};var Un=Dn,co=new qi("tag:yaml.org,2002:str",{kind:"scalar",construct:function(f){return null!==f?f:""}}),Pd=new qi("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(f){return null!==f?f:[]}}),Ld=new qi("tag:yaml.org,2002:map",{kind:"mapping",construct:function(f){return null!==f?f:{}}}),ta=new Un({explicit:[co,Pd,Ld]}),fu=new qi("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(f){if(null===f)return!0;var C=f.length;return 1===C&&"~"===f||4===C&&("null"===f||"Null"===f||"NULL"===f)},construct:function(){return null},predicate:function(f){return null===f},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"}),ac=new qi("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(f){if(null===f)return!1;var C=f.length;return 4===C&&("true"===f||"True"===f||"TRUE"===f)||5===C&&("false"===f||"False"===f||"FALSE"===f)},construct:function(f){return"true"===f||"True"===f||"TRUE"===f},predicate:function(f){return"[object Boolean]"===Object.prototype.toString.call(f)},represent:{lowercase:function(f){return f?"true":"false"},uppercase:function(f){return f?"TRUE":"FALSE"},camelcase:function(f){return f?"True":"False"}},defaultStyle:"lowercase"});function Vd(f){return 48<=f&&f<=57||65<=f&&f<=70||97<=f&&f<=102}function mu(f){return 48<=f&&f<=55}function Hd(f){return 48<=f&&f<=57}var Cr=new qi("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(f){if(null===f)return!1;var N,C=f.length,w=0,M=!1;if(!C)return!1;if(("-"===(N=f[w])||"+"===N)&&(N=f[++w]),"0"===N){if(w+1===C)return!0;if("b"===(N=f[++w])){for(w++;w<C;w++)if("_"!==(N=f[w])){if("0"!==N&&"1"!==N)return!1;M=!0}return M&&"_"!==N}if("x"===N){for(w++;w<C;w++)if("_"!==(N=f[w])){if(!Vd(f.charCodeAt(w)))return!1;M=!0}return M&&"_"!==N}if("o"===N){for(w++;w<C;w++)if("_"!==(N=f[w])){if(!mu(f.charCodeAt(w)))return!1;M=!0}return M&&"_"!==N}}if("_"===N)return!1;for(;w<C;w++)if("_"!==(N=f[w])){if(!Hd(f.charCodeAt(w)))return!1;M=!0}return!(!M||"_"===N)},construct:function(f){var M,C=f,w=1;if(-1!==C.indexOf("_")&&(C=C.replace(/_/g,"")),("-"===(M=C[0])||"+"===M)&&("-"===M&&(w=-1),M=(C=C.slice(1))[0]),"0"===C)return 0;if("0"===M){if("b"===C[1])return w*parseInt(C.slice(2),2);if("x"===C[1])return w*parseInt(C.slice(2),16);if("o"===C[1])return w*parseInt(C.slice(2),8)}return w*parseInt(C,10)},predicate:function(f){return"[object Number]"===Object.prototype.toString.call(f)&&f%1==0&&!me.isNegativeZero(f)},represent:{binary:function(f){return f>=0?"0b"+f.toString(2):"-0b"+f.toString(2).slice(1)},octal:function(f){return f>=0?"0o"+f.toString(8):"-0o"+f.toString(8).slice(1)},decimal:function(f){return f.toString(10)},hexadecimal:function(f){return f>=0?"0x"+f.toString(16).toUpperCase():"-0x"+f.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Rn=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),en=/^[-+]?[0-9]+e/,La=new qi("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(f){return!(null===f||!Rn.test(f)||"_"===f[f.length-1])},construct:function(f){var C,w;return w="-"===(C=f.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(C[0])>=0&&(C=C.slice(1)),".inf"===C?1===w?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===C?NaN:w*parseFloat(C,10)},predicate:function(f){return"[object Number]"===Object.prototype.toString.call(f)&&(f%1!=0||me.isNegativeZero(f))},represent:function(f,C){var w;if(isNaN(f))switch(C){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===f)switch(C){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===f)switch(C){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(me.isNegativeZero(f))return"-0.0";return w=f.toString(10),en.test(w)?w.replace("e",".e"):w},defaultStyle:"lowercase"}),bu=ta.extend({implicit:[fu,ac,Cr,La]}),hi=bu,Nt=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),yu=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$"),uc=new qi("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(f){return null!==f&&(null!==Nt.exec(f)||null!==yu.exec(f))},construct:function(f){var C,w,M,N,V,B,z,De,ae=0,ce=null;if(null===(C=Nt.exec(f))&&(C=yu.exec(f)),null===C)throw new Error("Date resolve error");if(w=+C[1],M=+C[2]-1,N=+C[3],!C[4])return new Date(Date.UTC(w,M,N));if(V=+C[4],B=+C[5],z=+C[6],C[7]){for(ae=C[7].slice(0,3);ae.length<3;)ae+="0";ae=+ae}return C[9]&&(ce=6e4*(60*+C[10]+ +(C[11]||0)),"-"===C[9]&&(ce=-ce)),De=new Date(Date.UTC(w,M,N,V,B,z,ae)),ce&&De.setTime(De.getTime()-ce),De},instanceOf:Date,represent:function(f){return f.toISOString()}}),Xn=new qi("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(f){return"<<"===f||null===f}}),Eu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r",Fa=new qi("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(f){if(null===f)return!1;var C,w,M=0,N=f.length,V=Eu;for(w=0;w<N;w++)if(!((C=V.indexOf(f.charAt(w)))>64)){if(C<0)return!1;M+=6}return M%8==0},construct:function(f){var C,w,M=f.replace(/[\r\n=]/g,""),N=M.length,V=Eu,B=0,z=[];for(C=0;C<N;C++)C%4==0&&C&&(z.push(B>>16&255),z.push(B>>8&255),z.push(255&B)),B=B<<6|V.indexOf(M.charAt(C));return 0==(w=N%4*6)?(z.push(B>>16&255),z.push(B>>8&255),z.push(255&B)):18===w?(z.push(B>>10&255),z.push(B>>2&255)):12===w&&z.push(B>>4&255),new Uint8Array(z)},predicate:function(f){return"[object Uint8Array]"===Object.prototype.toString.call(f)},represent:function(f){var M,N,C="",w=0,V=f.length,B=Eu;for(M=0;M<V;M++)M%3==0&&M&&(C+=B[w>>18&63],C+=B[w>>12&63],C+=B[w>>6&63],C+=B[63&w]),w=(w<<8)+f[M];return 0==(N=V%3)?(C+=B[w>>18&63],C+=B[w>>12&63],C+=B[w>>6&63],C+=B[63&w]):2===N?(C+=B[w>>10&63],C+=B[w>>4&63],C+=B[w<<2&63],C+=B[64]):1===N&&(C+=B[w>>2&63],C+=B[w<<4&63],C+=B[64],C+=B[64]),C}}),Ud=Object.prototype.hasOwnProperty,Hp=Object.prototype.toString,Gd=new qi("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(f){if(null===f)return!0;var w,M,N,V,B,C=[],z=f;for(w=0,M=z.length;w<M;w+=1){if(B=!1,"[object Object]"!==Hp.call(N=z[w]))return!1;for(V in N)if(Ud.call(N,V)){if(B)return!1;B=!0}if(!B)return!1;if(-1!==C.indexOf(V))return!1;C.push(V)}return!0},construct:function(f){return null!==f?f:[]}}),Tu=Object.prototype.toString,jp=new qi("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(f){if(null===f)return!0;var C,w,M,N,V,B=f;for(V=new Array(B.length),C=0,w=B.length;C<w;C+=1){if("[object Object]"!==Tu.call(M=B[C])||1!==(N=Object.keys(M)).length)return!1;V[C]=[N[0],M[N[0]]]}return!0},construct:function(f){if(null===f)return[];var C,w,M,N,V,B=f;for(V=new Array(B.length),C=0,w=B.length;C<w;C+=1)M=B[C],N=Object.keys(M),V[C]=[N[0],M[N[0]]];return V}}),Wp=Object.prototype.hasOwnProperty,mn=new qi("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(f){if(null===f)return!0;var C,w=f;for(C in w)if(Wp.call(w,C)&&null!==w[C])return!1;return!0},construct:function(f){return null!==f?f:{}}}),jd=hi.extend({implicit:[uc,Xn],explicit:[Fa,Gd,jp,mn]}),ra=Object.prototype.hasOwnProperty,Lo=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Yd=/[\x85\u2028\u2029]/,gl=/[,\[\]\{\}]/,Ba=/^(?:!|!!|![a-z\-]+!)$/i,wu=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Xd(f){return Object.prototype.toString.call(f)}function xt(f){return 10===f||13===f}function ts(f){return 9===f||32===f}function wr(f){return 9===f||32===f||10===f||13===f}function Zr(f){return 44===f||91===f||93===f||123===f||125===f}function Gn(f){var C;return 48<=f&&f<=57?f-48:97<=(C=32|f)&&C<=102?C-97+10:-1}function Xp(f){return 120===f?2:117===f?4:85===f?8:0}function is(f){return 48<=f&&f<=57?f-48:-1}function qr(f){return 48===f?"\0":97===f?"\x07":98===f?"\b":116===f||9===f?"\t":110===f?"\n":118===f?"\v":102===f?"\f":114===f?"\r":101===f?"\x1b":32===f?" ":34===f?'"':47===f?"/":92===f?"\\":78===f?"\x85":95===f?"\xa0":76===f?"\u2028":80===f?"\u2029":""}function tm(f){return f<=65535?String.fromCharCode(f):String.fromCharCode(55296+(f-65536>>10),56320+(f-65536&1023))}for(var Su=new Array(256),or=new Array(256),Va=0;Va<256;Va++)Su[Va]=qr(Va)?1:0,or[Va]=qr(Va);function $p(f,C){this.input=f,this.filename=C.filename||null,this.schema=C.schema||jd,this.onWarning=C.onWarning||null,this.legacy=C.legacy||!1,this.json=C.json||!1,this.listener=C.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=f.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Du(f,C){var w={name:f.filename,buffer:f.input.slice(0,-1),position:f.position,line:f.line,column:f.position-f.lineStart};return w.snippet=function(f,C){if(C=Object.create(C||null),!f.buffer)return null;C.maxLength||(C.maxLength=79),"number"!=typeof C.indent&&(C.indent=1),"number"!=typeof C.linesBefore&&(C.linesBefore=3),"number"!=typeof C.linesAfter&&(C.linesAfter=2);for(var V,w=/\r?\n|\r|\0/g,M=[0],N=[],B=-1;V=w.exec(f.buffer);)N.push(V.index),M.push(V.index+V[0].length),f.position<=V.index&&B<0&&(B=M.length-2);B<0&&(B=M.length-1);var ae,ce,z="",Ee=Math.min(f.line+C.linesAfter,N.length).toString().length,Ce=C.maxLength-(C.indent+Ee+3);for(ae=1;ae<=C.linesBefore&&!(B-ae<0);ae++)ce=Ii(f.buffer,M[B-ae],N[B-ae],f.position-(M[B]-M[B-ae]),Ce),z=me.repeat(" ",C.indent)+dt((f.line-ae+1).toString(),Ee)+" | "+ce.str+"\n"+z;for(ce=Ii(f.buffer,M[B],N[B],f.position,Ce),z+=me.repeat(" ",C.indent)+dt((f.line+1).toString(),Ee)+" | "+ce.str+"\n",z+=me.repeat("-",C.indent+Ee+3+ce.pos)+"^\n",ae=1;ae<=C.linesAfter&&!(B+ae>=N.length);ae++)ce=Ii(f.buffer,M[B+ae],N[B+ae],f.position-(M[B]-M[B+ae]),Ce),z+=me.repeat(" ",C.indent)+dt((f.line+ae+1).toString(),Ee)+" | "+ce.str+"\n";return z.replace(/\n$/,"")}(w),new ct(C,w)}function Lt(f,C){throw Du(f,C)}function Ni(f,C){f.onWarning&&f.onWarning.call(null,Du(f,C))}var Ru={YAML:function(C,w,M){var N,V,B;null!==C.version&&Lt(C,"duplication of %YAML directive"),1!==M.length&&Lt(C,"YAML directive accepts exactly one argument"),null===(N=/^([0-9]+)\.([0-9]+)$/.exec(M[0]))&&Lt(C,"ill-formed argument of the YAML directive"),V=parseInt(N[1],10),B=parseInt(N[2],10),1!==V&&Lt(C,"unacceptable YAML version of the document"),C.version=M[0],C.checkLineBreaks=B<2,1!==B&&2!==B&&Ni(C,"unsupported YAML version of the document")},TAG:function(C,w,M){var N,V;2!==M.length&&Lt(C,"TAG directive accepts exactly two arguments"),V=M[1],Ba.test(N=M[0])||Lt(C,"ill-formed tag handle (first argument) of the TAG directive"),ra.call(C.tagMap,N)&&Lt(C,'there is a previously declared suffix for "'+N+'" tag handle'),wu.test(V)||Lt(C,"ill-formed tag prefix (second argument) of the TAG directive");try{V=decodeURIComponent(V)}catch(B){Lt(C,"tag prefix is malformed: "+V)}C.tagMap[N]=V}};function Ss(f,C,w,M){var N,V,B,z;if(C<w){if(z=f.input.slice(C,w),M)for(N=0,V=z.length;N<V;N+=1)9===(B=z.charCodeAt(N))||32<=B&&B<=1114111||Lt(f,"expected valid JSON character");else Lo.test(z)&&Lt(f,"the stream contains non-printable characters");f.result+=z}}function ns(f,C,w,M){var N,V,B,z;for(me.isObject(w)||Lt(f,"cannot merge mappings; the provided source object is unacceptable"),B=0,z=(N=Object.keys(w)).length;B<z;B+=1)ra.call(C,V=N[B])||(C[V]=w[V],M[V]=!0)}function Vi(f,C,w,M,N,V,B,z,ae){var ce,Ee;if(Array.isArray(N))for(ce=0,Ee=(N=Array.prototype.slice.call(N)).length;ce<Ee;ce+=1)Array.isArray(N[ce])&&Lt(f,"nested arrays are not supported inside keys"),"object"==typeof N&&"[object Object]"===Xd(N[ce])&&(N[ce]="[object Object]");if("object"==typeof N&&"[object Object]"===Xd(N)&&(N="[object Object]"),N=String(N),null===C&&(C={}),"tag:yaml.org,2002:merge"===M)if(Array.isArray(V))for(ce=0,Ee=V.length;ce<Ee;ce+=1)ns(f,C,V[ce],w);else ns(f,C,V,w);else!f.json&&!ra.call(w,N)&&ra.call(C,N)&&(f.line=B||f.line,f.lineStart=z||f.lineStart,f.position=ae||f.position,Lt(f,"duplicated mapping key")),"__proto__"===N?Object.defineProperty(C,N,{configurable:!0,enumerable:!0,writable:!0,value:V}):C[N]=V,delete w[N];return C}function sa(f){var C;10===(C=f.input.charCodeAt(f.position))?f.position++:13===C?(f.position++,10===f.input.charCodeAt(f.position)&&f.position++):Lt(f,"a line break is expected"),f.line+=1,f.lineStart=f.position,f.firstTabInLine=-1}function kn(f,C,w){for(var M=0,N=f.input.charCodeAt(f.position);0!==N;){for(;ts(N);)9===N&&-1===f.firstTabInLine&&(f.firstTabInLine=f.position),N=f.input.charCodeAt(++f.position);if(C&&35===N)do{N=f.input.charCodeAt(++f.position)}while(10!==N&&13!==N&&0!==N);if(!xt(N))break;for(sa(f),N=f.input.charCodeAt(f.position),M++,f.lineIndent=0;32===N;)f.lineIndent++,N=f.input.charCodeAt(++f.position)}return-1!==w&&0!==M&&f.lineIndent<w&&Ni(f,"deficient indentation"),M}function rs(f){var w,C=f.position;return!(45!==(w=f.input.charCodeAt(C))&&46!==w||w!==f.input.charCodeAt(C+1)||w!==f.input.charCodeAt(C+2)||(C+=3,w=f.input.charCodeAt(C),0!==w&&!wr(w)))}function aa(f,C){1===C?f.result+=" ":C>1&&(f.result+=me.repeat("\n",C-1))}function Mu(f,C){var w,ae,M=f.tag,N=f.anchor,V=[],z=!1;if(-1!==f.firstTabInLine)return!1;for(null!==f.anchor&&(f.anchorMap[f.anchor]=V),ae=f.input.charCodeAt(f.position);0!==ae&&(-1!==f.firstTabInLine&&(f.position=f.firstTabInLine,Lt(f,"tab characters must not be used in indentation")),45===ae&&wr(f.input.charCodeAt(f.position+1)));)if(z=!0,f.position++,kn(f,!0,-1)&&f.lineIndent<=C)V.push(null),ae=f.input.charCodeAt(f.position);else if(w=f.line,la(f,C,3,!1,!0),V.push(f.result),kn(f,!0,-1),ae=f.input.charCodeAt(f.position),(f.line===w||f.lineIndent>C)&&0!==ae)Lt(f,"bad indentation of a sequence entry");else if(f.lineIndent<C)break;return!!z&&(f.tag=M,f.anchor=N,f.kind="sequence",f.result=V,!0)}function _l(f){var C,N,V,B,w=!1,M=!1;if(33!==(B=f.input.charCodeAt(f.position)))return!1;if(null!==f.tag&&Lt(f,"duplication of a tag property"),60===(B=f.input.charCodeAt(++f.position))?(w=!0,B=f.input.charCodeAt(++f.position)):33===B?(M=!0,N="!!",B=f.input.charCodeAt(++f.position)):N="!",C=f.position,w){do{B=f.input.charCodeAt(++f.position)}while(0!==B&&62!==B);f.position<f.length?(V=f.input.slice(C,f.position),B=f.input.charCodeAt(++f.position)):Lt(f,"unexpected end of the stream within a verbatim tag")}else{for(;0!==B&&!wr(B);)33===B&&(M?Lt(f,"tag suffix cannot contain exclamation marks"):(N=f.input.slice(C-1,f.position+1),Ba.test(N)||Lt(f,"named tag handle cannot contain such characters"),M=!0,C=f.position+1)),B=f.input.charCodeAt(++f.position);V=f.input.slice(C,f.position),gl.test(V)&&Lt(f,"tag suffix cannot contain flow indicator characters")}V&&!wu.test(V)&&Lt(f,"tag name cannot contain such characters: "+V);try{V=decodeURIComponent(V)}catch(z){Lt(f,"tag name is malformed: "+V)}return w?f.tag=V:ra.call(f.tagMap,N)?f.tag=f.tagMap[N]+V:"!"===N?f.tag="!"+V:"!!"===N?f.tag="tag:yaml.org,2002:"+V:Lt(f,'undeclared tag handle "'+N+'"'),!0}function bt(f){var C,w;if(38!==(w=f.input.charCodeAt(f.position)))return!1;for(null!==f.anchor&&Lt(f,"duplication of an anchor property"),w=f.input.charCodeAt(++f.position),C=f.position;0!==w&&!wr(w)&&!Zr(w);)w=f.input.charCodeAt(++f.position);return f.position===C&&Lt(f,"name of an anchor node must contain at least one character"),f.anchor=f.input.slice(C,f.position),!0}function la(f,C,w,M,N){var V,B,z,Ce,De,ke,Ye,qe,tt,ae=1,ce=!1,Ee=!1;if(null!==f.listener&&f.listener("open",f),f.tag=null,f.anchor=null,f.kind=null,f.result=null,V=B=z=4===w||3===w,M&&kn(f,!0,-1)&&(ce=!0,f.lineIndent>C?ae=1:f.lineIndent===C?ae=0:f.lineIndent<C&&(ae=-1)),1===ae)for(;_l(f)||bt(f);)kn(f,!0,-1)?(ce=!0,z=V,f.lineIndent>C?ae=1:f.lineIndent===C?ae=0:f.lineIndent<C&&(ae=-1)):z=!1;if(z&&(z=ce||N),(1===ae||4===w)&&(qe=1===w||2===w?C:C+1,tt=f.position-f.lineStart,1===ae?z&&(Mu(f,tt)||function(f,C,w){var M,N,V,B,z,ae,Ze,ce=f.tag,Ee=f.anchor,Ce={},De=Object.create(null),ke=null,Ye=null,qe=null,tt=!1,Ct=!1;if(-1!==f.firstTabInLine)return!1;for(null!==f.anchor&&(f.anchorMap[f.anchor]=Ce),Ze=f.input.charCodeAt(f.position);0!==Ze;){if(!tt&&-1!==f.firstTabInLine&&(f.position=f.firstTabInLine,Lt(f,"tab characters must not be used in indentation")),M=f.input.charCodeAt(f.position+1),V=f.line,63!==Ze&&58!==Ze||!wr(M)){if(B=f.line,z=f.lineStart,ae=f.position,!la(f,w,2,!1,!0))break;if(f.line===V){for(Ze=f.input.charCodeAt(f.position);ts(Ze);)Ze=f.input.charCodeAt(++f.position);if(58===Ze)wr(Ze=f.input.charCodeAt(++f.position))||Lt(f,"a whitespace character is expected after the key-value separator within a block mapping"),tt&&(Vi(f,Ce,De,ke,Ye,null,B,z,ae),ke=Ye=qe=null),Ct=!0,tt=!1,N=!1,ke=f.tag,Ye=f.result;else{if(!Ct)return f.tag=ce,f.anchor=Ee,!0;Lt(f,"can not read an implicit mapping pair; a colon is missed")}}else{if(!Ct)return f.tag=ce,f.anchor=Ee,!0;Lt(f,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===Ze?(tt&&(Vi(f,Ce,De,ke,Ye,null,B,z,ae),ke=Ye=qe=null),Ct=!0,tt=!0,N=!0):tt?(tt=!1,N=!0):Lt(f,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),f.position+=1,Ze=M;if((f.line===V||f.lineIndent>C)&&(tt&&(B=f.line,z=f.lineStart,ae=f.position),la(f,C,4,!0,N)&&(tt?Ye=f.result:qe=f.result),tt||(Vi(f,Ce,De,ke,Ye,qe,B,z,ae),ke=Ye=qe=null),kn(f,!0,-1),Ze=f.input.charCodeAt(f.position)),(f.line===V||f.lineIndent>C)&&0!==Ze)Lt(f,"bad indentation of a mapping entry");else if(f.lineIndent<C)break}return tt&&Vi(f,Ce,De,ke,Ye,null,B,z,ae),Ct&&(f.tag=ce,f.anchor=Ee,f.kind="mapping",f.result=Ce),Ct}(f,tt,qe))||function(f,C){var M,N,V,z,Ee,Ce,De,ke,qe,tt,Ct,Ze,w=!0,B=f.tag,ae=f.anchor,Ye=Object.create(null);if(91===(Ze=f.input.charCodeAt(f.position)))Ee=93,ke=!1,z=[];else{if(123!==Ze)return!1;Ee=125,ke=!0,z={}}for(null!==f.anchor&&(f.anchorMap[f.anchor]=z),Ze=f.input.charCodeAt(++f.position);0!==Ze;){if(kn(f,!0,C),(Ze=f.input.charCodeAt(f.position))===Ee)return f.position++,f.tag=B,f.anchor=ae,f.kind=ke?"mapping":"sequence",f.result=z,!0;w?44===Ze&&Lt(f,"expected the node content, but found ','"):Lt(f,"missed comma between flow collection entries"),Ct=null,Ce=De=!1,63===Ze&&wr(f.input.charCodeAt(f.position+1))&&(Ce=De=!0,f.position++,kn(f,!0,C)),M=f.line,N=f.lineStart,V=f.position,la(f,C,1,!1,!0),tt=f.tag,qe=f.result,kn(f,!0,C),Ze=f.input.charCodeAt(f.position),(De||f.line===M)&&58===Ze&&(Ce=!0,Ze=f.input.charCodeAt(++f.position),kn(f,!0,C),la(f,C,1,!1,!0),Ct=f.result),ke?Vi(f,z,Ye,tt,qe,Ct,M,N,V):z.push(Ce?Vi(f,null,Ye,tt,qe,Ct,M,N,V):qe),kn(f,!0,C),44===(Ze=f.input.charCodeAt(f.position))?(w=!0,Ze=f.input.charCodeAt(++f.position)):w=!1}Lt(f,"unexpected end of the stream within a flow collection")}(f,qe)?Ee=!0:(B&&function(f,C){var w,M,Ee,Ce,N=1,V=!1,B=!1,z=C,ae=0,ce=!1;if(124===(Ce=f.input.charCodeAt(f.position)))M=!1;else{if(62!==Ce)return!1;M=!0}for(f.kind="scalar",f.result="";0!==Ce;)if(43===(Ce=f.input.charCodeAt(++f.position))||45===Ce)1===N?N=43===Ce?3:2:Lt(f,"repeat of a chomping mode identifier");else{if(!((Ee=is(Ce))>=0))break;0===Ee?Lt(f,"bad explicit indentation width of a block scalar; it cannot be less than one"):B?Lt(f,"repeat of an indentation width identifier"):(z=C+Ee-1,B=!0)}if(ts(Ce)){do{Ce=f.input.charCodeAt(++f.position)}while(ts(Ce));if(35===Ce)do{Ce=f.input.charCodeAt(++f.position)}while(!xt(Ce)&&0!==Ce)}for(;0!==Ce;){for(sa(f),f.lineIndent=0,Ce=f.input.charCodeAt(f.position);(!B||f.lineIndent<z)&&32===Ce;)f.lineIndent++,Ce=f.input.charCodeAt(++f.position);if(!B&&f.lineIndent>z&&(z=f.lineIndent),xt(Ce))ae++;else{if(f.lineIndent<z){3===N?f.result+=me.repeat("\n",V?1+ae:ae):1===N&&V&&(f.result+="\n");break}for(M?ts(Ce)?(ce=!0,f.result+=me.repeat("\n",V?1+ae:ae)):ce?(ce=!1,f.result+=me.repeat("\n",ae+1)):0===ae?V&&(f.result+=" "):f.result+=me.repeat("\n",ae):f.result+=me.repeat("\n",V?1+ae:ae),V=!0,B=!0,ae=0,w=f.position;!xt(Ce)&&0!==Ce;)Ce=f.input.charCodeAt(++f.position);Ss(f,w,f.position,!1)}}return!0}(f,qe)||function(f,C){var w,M,N;if(39!==(w=f.input.charCodeAt(f.position)))return!1;for(f.kind="scalar",f.result="",f.position++,M=N=f.position;0!==(w=f.input.charCodeAt(f.position));)if(39===w){if(Ss(f,M,f.position,!0),39!==(w=f.input.charCodeAt(++f.position)))return!0;M=f.position,f.position++,N=f.position}else xt(w)?(Ss(f,M,N,!0),aa(f,kn(f,!1,C)),M=N=f.position):f.position===f.lineStart&&rs(f)?Lt(f,"unexpected end of the document within a single quoted scalar"):(f.position++,N=f.position);Lt(f,"unexpected end of the stream within a single quoted scalar")}(f,qe)||function(f,C){var w,M,N,V,B,z;if(34!==(z=f.input.charCodeAt(f.position)))return!1;for(f.kind="scalar",f.result="",f.position++,w=M=f.position;0!==(z=f.input.charCodeAt(f.position));){if(34===z)return Ss(f,w,f.position,!0),f.position++,!0;if(92===z){if(Ss(f,w,f.position,!0),xt(z=f.input.charCodeAt(++f.position)))kn(f,!1,C);else if(z<256&&Su[z])f.result+=or[z],f.position++;else if((B=Xp(z))>0){for(N=B,V=0;N>0;N--)(B=Gn(z=f.input.charCodeAt(++f.position)))>=0?V=(V<<4)+B:Lt(f,"expected hexadecimal character");f.result+=tm(V),f.position++}else Lt(f,"unknown escape sequence");w=M=f.position}else xt(z)?(Ss(f,w,M,!0),aa(f,kn(f,!1,C)),w=M=f.position):f.position===f.lineStart&&rs(f)?Lt(f,"unexpected end of the document within a double quoted scalar"):(f.position++,M=f.position)}Lt(f,"unexpected end of the stream within a double quoted scalar")}(f,qe)?Ee=!0:function(f){var C,w,M;if(42!==(M=f.input.charCodeAt(f.position)))return!1;for(M=f.input.charCodeAt(++f.position),C=f.position;0!==M&&!wr(M)&&!Zr(M);)M=f.input.charCodeAt(++f.position);return f.position===C&&Lt(f,"name of an alias node must contain at least one character"),w=f.input.slice(C,f.position),ra.call(f.anchorMap,w)||Lt(f,'unidentified alias "'+w+'"'),f.result=f.anchorMap[w],kn(f,!0,-1),!0}(f)?(Ee=!0,(null!==f.tag||null!==f.anchor)&&Lt(f,"alias node should not have any properties")):function(f,C,w){var N,V,B,z,ae,ce,Ee,ke,Ce=f.kind,De=f.result;if(wr(ke=f.input.charCodeAt(f.position))||Zr(ke)||35===ke||38===ke||42===ke||33===ke||124===ke||62===ke||39===ke||34===ke||37===ke||64===ke||96===ke||(63===ke||45===ke)&&(wr(N=f.input.charCodeAt(f.position+1))||w&&Zr(N)))return!1;for(f.kind="scalar",f.result="",V=B=f.position,z=!1;0!==ke;){if(58===ke){if(wr(N=f.input.charCodeAt(f.position+1))||w&&Zr(N))break}else if(35===ke){if(wr(f.input.charCodeAt(f.position-1)))break}else{if(f.position===f.lineStart&&rs(f)||w&&Zr(ke))break;if(xt(ke)){if(ae=f.line,ce=f.lineStart,Ee=f.lineIndent,kn(f,!1,-1),f.lineIndent>=C){z=!0,ke=f.input.charCodeAt(f.position);continue}f.position=B,f.line=ae,f.lineStart=ce,f.lineIndent=Ee;break}}z&&(Ss(f,V,B,!1),aa(f,f.line-ae),V=B=f.position,z=!1),ts(ke)||(B=f.position+1),ke=f.input.charCodeAt(++f.position)}return Ss(f,V,B,!1),!!f.result||(f.kind=Ce,f.result=De,!1)}(f,qe,1===w)&&(Ee=!0,null===f.tag&&(f.tag="?")),null!==f.anchor&&(f.anchorMap[f.anchor]=f.result)):0===ae&&(Ee=z&&Mu(f,tt))),null===f.tag)null!==f.anchor&&(f.anchorMap[f.anchor]=f.result);else if("?"===f.tag){for(null!==f.result&&"scalar"!==f.kind&&Lt(f,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+f.kind+'"'),Ce=0,De=f.implicitTypes.length;Ce<De;Ce+=1)if((Ye=f.implicitTypes[Ce]).resolve(f.result)){f.result=Ye.construct(f.result),f.tag=Ye.tag,null!==f.anchor&&(f.anchorMap[f.anchor]=f.result);break}}else if("!"!==f.tag){if(ra.call(f.typeMap[f.kind||"fallback"],f.tag))Ye=f.typeMap[f.kind||"fallback"][f.tag];else for(Ye=null,Ce=0,De=(ke=f.typeMap.multi[f.kind||"fallback"]).length;Ce<De;Ce+=1)if(f.tag.slice(0,ke[Ce].tag.length)===ke[Ce].tag){Ye=ke[Ce];break}Ye||Lt(f,"unknown tag !<"+f.tag+">"),null!==f.result&&Ye.kind!==f.kind&&Lt(f,"unacceptable node kind for !<"+f.tag+'> tag; it should be "'+Ye.kind+'", not "'+f.kind+'"'),Ye.resolve(f.result,f.tag)?(f.result=Ye.construct(f.result,f.tag),null!==f.anchor&&(f.anchorMap[f.anchor]=f.result)):Lt(f,"cannot resolve a node with !<"+f.tag+"> explicit tag")}return null!==f.listener&&f.listener("close",f),null!==f.tag||null!==f.anchor||Ee}function Ge(f){var w,M,N,B,C=f.position,V=!1;for(f.version=null,f.checkLineBreaks=f.legacy,f.tagMap=Object.create(null),f.anchorMap=Object.create(null);0!==(B=f.input.charCodeAt(f.position))&&(kn(f,!0,-1),B=f.input.charCodeAt(f.position),!(f.lineIndent>0||37!==B));){for(V=!0,B=f.input.charCodeAt(++f.position),w=f.position;0!==B&&!wr(B);)B=f.input.charCodeAt(++f.position);for(N=[],(M=f.input.slice(w,f.position)).length<1&&Lt(f,"directive name must not be less than one character in length");0!==B;){for(;ts(B);)B=f.input.charCodeAt(++f.position);if(35===B){do{B=f.input.charCodeAt(++f.position)}while(0!==B&&!xt(B));break}if(xt(B))break;for(w=f.position;0!==B&&!wr(B);)B=f.input.charCodeAt(++f.position);N.push(f.input.slice(w,f.position))}0!==B&&sa(f),ra.call(Ru,M)?Ru[M](f,M,N):Ni(f,'unknown document directive "'+M+'"')}kn(f,!0,-1),0===f.lineIndent&&45===f.input.charCodeAt(f.position)&&45===f.input.charCodeAt(f.position+1)&&45===f.input.charCodeAt(f.position+2)?(f.position+=3,kn(f,!0,-1)):V&&Lt(f,"directives end mark is expected"),la(f,f.lineIndent-1,4,!1,!0),kn(f,!0,-1),f.checkLineBreaks&&Yd.test(f.input.slice(C,f.position))&&Ni(f,"non-ASCII line breaks are interpreted as content"),f.documents.push(f.result),f.position===f.lineStart&&rs(f)?46===f.input.charCodeAt(f.position)&&(f.position+=3,kn(f,!0,-1)):f.position<f.length-1&&Lt(f,"end of the stream or a document separator is expected")}function pr(f,C){C=C||{},0!==(f=String(f)).length&&(10!==f.charCodeAt(f.length-1)&&13!==f.charCodeAt(f.length-1)&&(f+="\n"),65279===f.charCodeAt(0)&&(f=f.slice(1)));var w=new $p(f,C),M=f.indexOf("\0");for(-1!==M&&(w.position=M,Lt(w,"null byte is not allowed in input")),w.input+="\0";32===w.input.charCodeAt(w.position);)w.lineIndent+=1,w.position+=1;for(;w.position<w.length-1;)Ge(w);return w.documents}var fr={loadAll:function(f,C,w){null!==C&&"object"==typeof C&&void 0===w&&(w=C,C=null);var M=pr(f,w);if("function"!=typeof C)return M;for(var N=0,V=M.length;N<V;N+=1)C(M[N])},load:function(f,C){var w=pr(f,C);if(0!==w.length){if(1===w.length)return w[0];throw new ct("expected a single document in the stream, but found more")}}},ft=Object.prototype.toString,_i=Object.prototype.hasOwnProperty,Ji={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},pc=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],Ro=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function fc(f){var C,w,M;if(C=f.toString(16).toUpperCase(),f<=255)w="x",M=2;else if(f<=65535)w="u",M=4;else{if(!(f<=4294967295))throw new ct("code point within a string may not be greater than 0xFFFFFFFF");w="U",M=8}return"\\"+w+me.repeat("0",M-C.length)+C}function Mo(f){this.schema=f.schema||jd,this.indent=Math.max(1,f.indent||2),this.noArrayIndent=f.noArrayIndent||!1,this.skipInvalid=f.skipInvalid||!1,this.flowLevel=me.isNothing(f.flowLevel)?-1:f.flowLevel,this.styleMap=function(f,C){var w,M,N,V,B,z,ae;if(null===C)return{};for(w={},N=0,V=(M=Object.keys(C)).length;N<V;N+=1)B=M[N],z=String(C[B]),"!!"===B.slice(0,2)&&(B="tag:yaml.org,2002:"+B.slice(2)),(ae=f.compiledTypeMap.fallback[B])&&_i.call(ae.styleAliases,z)&&(z=ae.styleAliases[z]),w[B]=z;return w}(this.schema,f.styles||null),this.sortKeys=f.sortKeys||!1,this.lineWidth=f.lineWidth||80,this.noRefs=f.noRefs||!1,this.noCompatMode=f.noCompatMode||!1,this.condenseFlow=f.condenseFlow||!1,this.quotingType='"'===f.quotingType?2:1,this.forceQuotes=f.forceQuotes||!1,this.replacer="function"==typeof f.replacer?f.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Jd(f,C){for(var B,w=me.repeat(" ",C),M=0,N=-1,V="",z=f.length;M<z;)-1===(N=f.indexOf("\n",M))?(B=f.slice(M),M=z):(B=f.slice(M,N+1),M=N+1),B.length&&"\n"!==B&&(V+=w),V+=B;return V}function Qd(f,C){return"\n"+me.repeat(" ",f.indent*C)}function gc(f){return 32===f||9===f}function Ua(f){return 32<=f&&f<=126||161<=f&&f<=55295&&8232!==f&&8233!==f||57344<=f&&f<=65533&&65279!==f||65536<=f&&f<=1114111}function xu(f){return Ua(f)&&65279!==f&&13!==f&&10!==f}function Zd(f,C,w){var M=xu(f),N=M&&!gc(f);return(w?M:M&&44!==f&&91!==f&&93!==f&&123!==f&&125!==f)&&35!==f&&!(58===C&&!N)||xu(C)&&!gc(C)&&35===f||58===C&&N}function mc(f,C){var M,w=f.charCodeAt(C);return w>=55296&&w<=56319&&C+1<f.length&&(M=f.charCodeAt(C+1))>=56320&&M<=57343?1024*(w-55296)+M-56320+65536:w}function Au(f){return/^\n* /.test(f)}function rm(f,C,w,M,N){f.dump=function(){if(0===C.length)return 2===f.quotingType?'""':"''";if(!f.noCompatMode&&(-1!==pc.indexOf(C)||Ro.test(C)))return 2===f.quotingType?'"'+C+'"':"'"+C+"'";var V=f.indent*Math.max(1,w),B=-1===f.lineWidth?-1:Math.max(Math.min(f.lineWidth,40),f.lineWidth-V);switch(function(f,C,w,M,N,V,B,z){var ae,ce=0,Ee=null,Ce=!1,De=!1,ke=-1!==M,Ye=-1,qe=function(f){return Ua(f)&&65279!==f&&!gc(f)&&45!==f&&63!==f&&58!==f&&44!==f&&91!==f&&93!==f&&123!==f&&125!==f&&35!==f&&38!==f&&42!==f&&33!==f&&124!==f&&61!==f&&62!==f&&39!==f&&34!==f&&37!==f&&64!==f&&96!==f}(mc(f,0))&&function(f){return!gc(f)&&58!==f}(mc(f,f.length-1));if(C||B)for(ae=0;ae<f.length;ce>=65536?ae+=2:ae++){if(!Ua(ce=mc(f,ae)))return 5;qe=qe&&Zd(ce,Ee,z),Ee=ce}else{for(ae=0;ae<f.length;ce>=65536?ae+=2:ae++){if(10===(ce=mc(f,ae)))Ce=!0,ke&&(De=De||ae-Ye-1>M&&" "!==f[Ye+1],Ye=ae);else if(!Ua(ce))return 5;qe=qe&&Zd(ce,Ee,z),Ee=ce}De=De||ke&&ae-Ye-1>M&&" "!==f[Ye+1]}return Ce||De?w>9&&Au(f)?5:B?2===V?5:2:De?4:3:!qe||B||N(f)?2===V?5:2:1}(C,M||f.flowLevel>-1&&w>=f.flowLevel,f.indent,B,function(ce){return function(f,C){var w,M;for(w=0,M=f.implicitTypes.length;w<M;w+=1)if(f.implicitTypes[w].resolve(C))return!0;return!1}(f,ce)},f.quotingType,f.forceQuotes&&!M,N)){case 1:return C;case 2:return"'"+C.replace(/'/g,"''")+"'";case 3:return"|"+Ou(C,f.indent)+_c(Jd(C,V));case 4:return">"+Ou(C,f.indent)+_c(Jd(function(f,C){for(var V,B,w=/(\n+)([^\n]*)/g,M=(ce=void 0,ce=f.indexOf("\n"),w.lastIndex=ce=-1!==ce?ce:f.length,Cl(f.slice(0,ce),C)),N="\n"===f[0]||" "===f[0];B=w.exec(f);){var ae=B[2];V=" "===ae[0],M+=B[1]+(N||V||""===ae?"":"\n")+Cl(ae,C),N=V}var ce;return M}(C,B),V));case 5:return'"'+function(f){for(var M,C="",w=0,N=0;N<f.length;w>=65536?N+=2:N++)w=mc(f,N),!(M=Ji[w])&&Ua(w)?(C+=f[N],w>=65536&&(C+=f[N+1])):C+=M||fc(w);return C}(C)+'"';default:throw new ct("impossible error: invalid scalar style")}}()}function Ou(f,C){var w=Au(f)?String(C):"",M="\n"===f[f.length-1];return w+(!M||"\n"!==f[f.length-2]&&"\n"!==f?M?"":"-":"+")+"\n"}function _c(f){return"\n"===f[f.length-1]?f.slice(0,-1):f}function Cl(f,C){if(""===f||" "===f[0])return f;for(var M,V,w=/ [^ ]/g,N=0,B=0,z=0,ae="";M=w.exec(f);)(z=M.index)-N>C&&(ae+="\n"+f.slice(N,V=B>N?B:z),N=V+1),B=z;return ae+="\n",(ae+=f.length-N>C&&B>N?f.slice(N,B)+"\n"+f.slice(B+1):f.slice(N)).slice(1)}function da(f,C,w){var M,N,V,B,z,ae;for(V=0,B=(N=w?f.explicitTypes:f.implicitTypes).length;V<B;V+=1)if(((z=N[V]).instanceOf||z.predicate)&&(!z.instanceOf||"object"==typeof C&&C instanceof z.instanceOf)&&(!z.predicate||z.predicate(C))){if(f.tag=w?z.multi&&z.representName?z.representName(C):z.tag:"?",z.represent){if(ae=f.styleMap[z.tag]||z.defaultStyle,"[object Function]"===ft.call(z.represent))M=z.represent(C,ae);else{if(!_i.call(z.represent,ae))throw new ct("!<"+z.tag+'> tag resolver accepts not "'+ae+'" style');M=z.represent[ae](C,ae)}f.dump=M}return!0}return!1}function to(f,C,w,M,N,V,B){f.tag=null,f.dump=w,da(f,w,!1)||da(f,w,!0);var ce,z=ft.call(f.dump),ae=M;M&&(M=f.flowLevel<0||f.flowLevel>C);var Ce,De,Ee="[object Object]"===z||"[object Array]"===z;if(Ee&&(De=-1!==(Ce=f.duplicates.indexOf(w))),(null!==f.tag&&"?"!==f.tag||De||2!==f.indent&&C>0)&&(N=!1),De&&f.usedDuplicates[Ce])f.dump="*ref_"+Ce;else{if(Ee&&De&&!f.usedDuplicates[Ce]&&(f.usedDuplicates[Ce]=!0),"[object Object]"===z)M&&0!==Object.keys(f.dump).length?(function(f,C,w,M){var z,ae,ce,Ee,Ce,De,N="",V=f.tag,B=Object.keys(w);if(!0===f.sortKeys)B.sort();else if("function"==typeof f.sortKeys)B.sort(f.sortKeys);else if(f.sortKeys)throw new ct("sortKeys must be a boolean or a function");for(z=0,ae=B.length;z<ae;z+=1)De="",(!M||""!==N)&&(De+=Qd(f,C)),Ee=w[ce=B[z]],f.replacer&&(Ee=f.replacer.call(w,ce,Ee)),to(f,C+1,ce,!0,!0,!0)&&((Ce=null!==f.tag&&"?"!==f.tag||f.dump&&f.dump.length>1024)&&(f.dump&&10===f.dump.charCodeAt(0)?De+="?":De+="? "),De+=f.dump,Ce&&(De+=Qd(f,C)),to(f,C+1,Ee,!0,Ce)&&(f.dump&&10===f.dump.charCodeAt(0)?De+=":":De+=": ",N+=De+=f.dump));f.tag=V,f.dump=N||"{}"}(f,C,f.dump,N),De&&(f.dump="&ref_"+Ce+f.dump)):(function(f,C,w){var B,z,ae,ce,Ee,M="",N=f.tag,V=Object.keys(w);for(B=0,z=V.length;B<z;B+=1)Ee="",""!==M&&(Ee+=", "),f.condenseFlow&&(Ee+='"'),ce=w[ae=V[B]],f.replacer&&(ce=f.replacer.call(w,ae,ce)),to(f,C,ae,!1,!1)&&(f.dump.length>1024&&(Ee+="? "),Ee+=f.dump+(f.condenseFlow?'"':"")+":"+(f.condenseFlow?"":" "),to(f,C,ce,!1,!1)&&(M+=Ee+=f.dump));f.tag=N,f.dump="{"+M+"}"}(f,C,f.dump),De&&(f.dump="&ref_"+Ce+" "+f.dump));else if("[object Array]"===z)M&&0!==f.dump.length?(function(f,C,w,M){var B,z,ae,N="",V=f.tag;for(B=0,z=w.length;B<z;B+=1)ae=w[B],f.replacer&&(ae=f.replacer.call(w,String(B),ae)),(to(f,C+1,ae,!0,!0,!1,!0)||void 0===ae&&to(f,C+1,null,!0,!0,!1,!0))&&((!M||""!==N)&&(N+=Qd(f,C)),f.dump&&10===f.dump.charCodeAt(0)?N+="-":N+="- ",N+=f.dump);f.tag=V,f.dump=N||"[]"}(f,f.noArrayIndent&&!B&&C>0?C-1:C,f.dump,N),De&&(f.dump="&ref_"+Ce+f.dump)):(function(f,C,w){var V,B,z,M="",N=f.tag;for(V=0,B=w.length;V<B;V+=1)z=w[V],f.replacer&&(z=f.replacer.call(w,String(V),z)),(to(f,C,z,!1,!1)||void 0===z&&to(f,C,null,!1,!1))&&(""!==M&&(M+=","+(f.condenseFlow?"":" ")),M+=f.dump);f.tag=N,f.dump="["+M+"]"}(f,C,f.dump),De&&(f.dump="&ref_"+Ce+" "+f.dump));else{if("[object String]"!==z){if("[object Undefined]"===z)return!1;if(f.skipInvalid)return!1;throw new ct("unacceptable kind of an object to dump "+z)}"?"!==f.tag&&rm(f,f.dump,C,V,ae)}null!==f.tag&&"?"!==f.tag&&(ce=encodeURI("!"===f.tag[0]?f.tag.slice(1):f.tag).replace(/!/g,"%21"),ce="!"===f.tag[0]?"!"+ce:"tag:yaml.org,2002:"===ce.slice(0,18)?"!!"+ce.slice(18):"!<"+ce+">",f.dump=ce+" "+f.dump)}return!0}function rh(f,C){var N,V,w=[],M=[];for(io(f,w,M),N=0,V=M.length;N<V;N+=1)C.duplicates.push(w[M[N]]);C.usedDuplicates=new Array(V)}function io(f,C,w){var M,N,V;if(null!==f&&"object"==typeof f)if(-1!==(N=C.indexOf(f)))-1===w.indexOf(N)&&w.push(N);else if(C.push(f),Array.isArray(f))for(N=0,V=f.length;N<V;N+=1)io(f[N],C,w);else for(N=0,V=(M=Object.keys(f)).length;N<V;N+=1)io(f[M[N]],C,w)}function Pr(f,C){return function(){throw new Error("Function yaml."+f+" is removed in js-yaml 4. Use yaml."+C+" instead, which is now safe by default.")}}const Cc={Type:qi,Schema:Un,FAILSAFE_SCHEMA:ta,JSON_SCHEMA:bu,CORE_SCHEMA:hi,DEFAULT_SCHEMA:jd,load:fr.load,loadAll:fr.loadAll,dump:function(f,C){var w=new Mo(C=C||{});w.noRefs||rh(f,w);var M=f;return w.replacer&&(M=w.replacer.call({"":M},"",M)),to(w,0,M,!0,!0)?w.dump+"\n":""},YAMLException:ct,types:{binary:Fa,float:La,map:Ld,null:fu,pairs:jp,set:mn,timestamp:uc,bool:ac,int:Cr,merge:Xn,omap:Gd,seq:Pd,str:co},safeLoad:Pr("safeLoad","load"),safeLoadAll:Pr("safeLoadAll","loadAll"),safeDump:Pr("safeDump","dump")},Ga="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:window,{FormData:Sr,Blob:Sl,File:Tc}=Ga;function Go(f){return function(f){if(oe(f))return F(f)}(f)||function(f){if(void 0!==he&&null!=te(f)||null!=f["@@iterator"])return J(f)}(f)||fe(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Zt=m(71049),jo=m.n(Zt),ah=function(C){return":/?#[]@!$&'()*+,;=".indexOf(C)>-1},af=function(C){return/^[a-z0-9\-._~]+$/i.test(C)};function ks(f){var C,w=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},M=w.escape,N=arguments.length>2?arguments[2]:void 0;return"number"==typeof f&&(f=f.toString()),"string"==typeof f&&f.length&&M?N?JSON.parse(f):Et()(C=Go(f)).call(C,function(V){var B,z;if(af(V)||ah(V)&&"unsafe"===M)return V;var ae=new TextEncoder;return Et()(B=Et()(z=At()(ae.encode(V))).call(z,function(Ee){var Ce;return jo()(Ce="0".concat(Ee.toString(16).toUpperCase())).call(Ce,-2)})).call(B,function(Ee){return"%".concat(Ee)}).join("")}).join(""):f}function Io(f){var C=f.value;return Array.isArray(C)?function(f){var C=f.key,w=f.value,M=f.style,N=f.explode,V=f.escape,B=function(Ce){return ks(Ce,{escape:V})};if("simple"===M)return Et()(w).call(w,function(Ee){return B(Ee)}).join(",");if("label"===M)return".".concat(Et()(w).call(w,function(Ee){return B(Ee)}).join("."));if("matrix"===M)return Et()(w).call(w,function(Ee){return B(Ee)}).reduce(function(Ee,Ce){var De,ke,Ye;return!Ee||N?ze()(ke=ze()(Ye="".concat(Ee||"",";")).call(Ye,C,"=")).call(ke,Ce):ze()(De="".concat(Ee,",")).call(De,Ce)},"");if("form"===M){var z=N?"&".concat(C,"="):",";return Et()(w).call(w,function(Ee){return B(Ee)}).join(z)}if("spaceDelimited"===M){var ae=N?"".concat(C,"="):"";return Et()(w).call(w,function(Ee){return B(Ee)}).join(" ".concat(ae))}if("pipeDelimited"===M){var ce=N?"".concat(C,"="):"";return Et()(w).call(w,function(Ee){return B(Ee)}).join("|".concat(ce))}}(f):"object"===le(C)?function(f){var C=f.key,w=f.value,M=f.style,N=f.explode,V=f.escape,B=function(ce){return ks(ce,{escape:V})},z=mt()(w);return"simple"===M?z.reduce(function(ae,ce){var Ee,Ce,De,ke=B(w[ce]),Ye=N?"=":",",qe=ae?"".concat(ae,","):"";return ze()(Ee=ze()(Ce=ze()(De="".concat(qe)).call(De,ce)).call(Ce,Ye)).call(Ee,ke)},""):"label"===M?z.reduce(function(ae,ce){var Ee,Ce,De,ke=B(w[ce]),Ye=N?"=":".",qe=ae?"".concat(ae,"."):".";return ze()(Ee=ze()(Ce=ze()(De="".concat(qe)).call(De,ce)).call(Ce,Ye)).call(Ee,ke)},""):"matrix"===M&&N?z.reduce(function(ae,ce){var Ee,Ce,De=B(w[ce]),ke=ae?"".concat(ae,";"):";";return ze()(Ee=ze()(Ce="".concat(ke)).call(Ce,ce,"=")).call(Ee,De)},""):"matrix"===M?z.reduce(function(ae,ce){var Ee,Ce,De=B(w[ce]),ke=ae?"".concat(ae,","):";".concat(C,"=");return ze()(Ee=ze()(Ce="".concat(ke)).call(Ce,ce,",")).call(Ee,De)},""):"form"===M?z.reduce(function(ae,ce){var Ee,Ce,De,ke,Ye=B(w[ce]),qe=ae?ze()(Ee="".concat(ae)).call(Ee,N?"&":","):"",tt=N?"=":",";return ze()(Ce=ze()(De=ze()(ke="".concat(qe)).call(ke,ce)).call(De,tt)).call(Ce,Ye)},""):void 0}(f):function(f){var B,C=f.key,w=f.value,M=f.style,N=f.escape,V=function(ae){return ks(ae,{escape:N})};return"simple"===M?V(w):"label"===M?".".concat(V(w)):"matrix"===M?ze()(B=";".concat(C,"=")).call(B,V(w)):"form"===M||"deepObject"===M?V(w):void 0}(f)}const cs=function(C,w){w.body=C};var Wn={serializeRes:wc,mergeInQueryOrForm:zo};function Dl(f){return us.apply(this,arguments)}function us(){return us=Te(Le().mark(function f(C){var w,N,V,B,z=arguments;return Le().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:if(w=z.length>1&&void 0!==z[1]?z[1]:{},"object"===le(C)&&(C=(w=C).url),w.headers=w.headers||{},Wn.mergeInQueryOrForm(w),w.headers&&mt()(w.headers).forEach(function(Ee){var Ce=w.headers[Ee];"string"==typeof Ce&&(w.headers[Ee]=Ce.replace(/\n+/g," "))}),!w.requestInterceptor){ce.next=12;break}return ce.next=8,w.requestInterceptor(w);case 8:if(ce.t0=ce.sent,ce.t0){ce.next=11;break}ce.t0=w;case 11:w=ce.t0;case 12:return/multipart\/form-data/i.test(w.headers["content-type"]||w.headers["Content-Type"])&&w.body instanceof Sr&&(delete w.headers["content-type"],delete w.headers["Content-Type"]),ce.prev=14,ce.next=17,(w.userFetch||fetch)(w.url,w);case 17:return N=ce.sent,ce.next=20,Wn.serializeRes(N,C,w);case 20:if(N=ce.sent,!w.responseInterceptor){ce.next=28;break}return ce.next=24,w.responseInterceptor(N);case 24:if(ce.t1=ce.sent,ce.t1){ce.next=27;break}ce.t1=N;case 27:N=ce.t1;case 28:ce.next=39;break;case 30:if(ce.prev=30,ce.t2=ce.catch(14),N){ce.next=34;break}throw ce.t2;case 34:throw(V=new Error(N.statusText||"response status is ".concat(N.status))).status=N.status,V.statusCode=N.status,V.responseError=ce.t2,V;case 39:if(N.ok){ce.next=45;break}throw(B=new Error(N.statusText||"response status is ".concat(N.status))).status=N.status,B.statusCode=N.status,B.response=N,B;case 45:return ce.abrupt("return",N);case 46:case"end":return ce.stop()}},f,null,[[14,30]])})),us.apply(this,arguments)}var Wo=function(){var C=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return/(json|xml|yaml|text)\b/.test(C)};function Vu(f,C){return C&&(0===C.indexOf("application/json")||C.indexOf("+json")>0)?JSON.parse(f):Cc.load(f)}function wc(f,C){var w=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},M=w.loadSpec,N=void 0!==M&&M,V={ok:f.ok,url:f.url||C,status:f.status,statusText:f.statusText,headers:lh(f.headers)},B=V.headers["content-type"],z=N||Wo(B),ae=z?f.text:f.blob||f.buffer;return ae.call(f).then(function(ce){if(V.text=ce,V.data=ce,z)try{var Ee=Vu(ce,B);V.body=Ee,V.obj=Ee}catch(Ce){V.parseError=Ce}return V})}function sm(f){return He()(f).call(f,", ")?f.split(", "):f}function lh(){var f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"function"!=typeof ut()(f)?{}:At()(ut()(f).call(f)).reduce(function(C,w){var M=ve(w,2);return C[M[0]]=sm(M[1]),C},{})}function ja(f,C){return!C&&"undefined"!=typeof navigator&&(C=navigator),C&&"ReactNative"===C.product?!(!f||"object"!==le(f)||"string"!=typeof f.uri):!!(void 0!==Tc&&f instanceof Tc||void 0!==Sl&&f instanceof Sl||ArrayBuffer.isView(f))||null!==f&&"object"===le(f)&&"function"==typeof f.pipe}function Wa(f,C){return Array.isArray(f)&&f.some(function(w){return ja(w,C)})}var Lr={form:",",spaceDelimited:"%20",pipeDelimited:"|"},ds={csv:",",ssv:"%20",tsv:"%09",pipes:"|"};function Hu(f,C){var w=arguments.length>2&&void 0!==arguments[2]&&arguments[2],M=C.collectionFormat,N=C.allowEmptyValue,V=C.serializationOption,B=C.encoding,z="object"!==le(C)||Array.isArray(C)?C:C.value,ae=w?function(Ye){return Ye.toString()}:function(Ye){return encodeURIComponent(Ye)},ce=ae(f);if(void 0===z&&N)return[[ce,""]];if(ja(z)||Wa(z))return[[ce,z]];if(V)return Ns(f,z,w,V);if(B){if([le(B.style),le(B.explode),le(B.allowReserved)].some(function(Ye){return"undefined"!==Ye})){var Ee=B.style,Ce=B.explode,De=B.allowReserved;return Ns(f,z,w,{style:Ee,explode:Ce,allowReserved:De})}if(B.contentType){if("application/json"===B.contentType){var ke="string"==typeof z?z:Bi()(z);return[[ce,ae(ke)]]}return[[ce,ae(z.toString())]]}return"object"!==le(z)?[[ce,ae(z)]]:Array.isArray(z)&&z.every(function(Ye){return"object"!==le(Ye)})?[[ce,Et()(z).call(z,ae).join(",")]]:[[ce,ae(Bi()(z))]]}return"object"!==le(z)?[[ce,ae(z)]]:Array.isArray(z)?"multi"===M?[[ce,Et()(z).call(z,ae)]]:[[ce,Et()(z).call(z,ae).join(ds[M||"csv"])]]:[[ce,""]]}function Ns(f,C,w,M){var N,Ee,Ce,V=M.style||"form",B=void 0===M.explode?"form"===V:M.explode,z=!w&&(M&&M.allowReserved?"unsafe":"reserved"),ae=function(ke){return ks(ke,{escape:z})},ce=w?function(De){return De}:function(De){return ks(De,{escape:z})};return"object"!==le(C)?[[ce(f),ae(C)]]:Array.isArray(C)?B?[[ce(f),Et()(C).call(C,ae)]]:[[ce(f),Et()(C).call(C,ae).join(Lr[V])]]:"deepObject"===V?Et()(Ee=mt()(C)).call(Ee,function(De){var ke;return[ce(ze()(ke="".concat(f,"[")).call(ke,De,"]")),ae(C[De])]}):B?Et()(Ce=mt()(C)).call(Ce,function(De){return[ce(De),ae(C[De])]}):[[ce(f),Et()(N=mt()(C)).call(N,function(De){var ke;return[ze()(ke="".concat(ce(De),",")).call(ke,ae(C[De]))]}).join(",")]]}function hs(f){return Yt()(f).reduce(function(C,w){var z,M=ve(w,2),B=K(Hu(M[0],M[1],!0));try{for(B.s();!(z=B.n()).done;){var ae=ve(z.value,2),ce=ae[0],Ee=ae[1];if(Array.isArray(Ee)){var De,Ce=K(Ee);try{for(Ce.s();!(De=Ce.n()).done;){var ke=De.value;if(ArrayBuffer.isView(ke)){var Ye=new Sl([ke]);C.append(ce,Ye)}else C.append(ce,ke)}}catch(tt){Ce.e(tt)}finally{Ce.f()}}else if(ArrayBuffer.isView(Ee)){var qe=new Sl([Ee]);C.append(ce,qe)}else C.append(ce,Ee)}}catch(tt){B.e(tt)}finally{B.f()}return C},new Sr)}function Uu(f){var C=mt()(f).reduce(function(w,M){var V,N=K(Hu(M,f[M]));try{for(N.s();!(V=N.n()).done;){var B=ve(V.value,2);w[B[0]]=B[1]}}catch(ce){N.e(ce)}finally{N.f()}return w},{});return Ie().stringify(C,{encode:!1,indices:!1})||""}function zo(){var f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},C=f.url,w=void 0===C?"":C,M=f.query,N=f.form,V=function(){for(var Ze=arguments.length,Pi=new Array(Ze),Di=0;Di<Ze;Di++)Pi[Di]=arguments[Di];var Yn=wi()(Pi).call(Pi,function(yn){return yn}).join("&");return Yn?"?".concat(Yn):""};if(N){var B=mt()(N).some(function(Ct){var Ze=N[Ct].value;return ja(Ze)||Wa(Ze)}),z=f.headers["content-type"]||f.headers["Content-Type"];if(B||/multipart\/form-data/i.test(z)){var ae=hs(f.form);cs(ae,f)}else f.body=Uu(N);delete f.form}if(M){var ce=w.split("?"),Ee=ve(ce,2),Ce=Ee[0],De=Ee[1],ke="";if(De){var Ye=Ie().parse(De),qe=mt()(M);qe.forEach(function(Ct){return delete Ye[Ct]}),ke=Ie().stringify(Ye,{encode:!0})}var tt=V(ke,Uu(M));f.url=Ce+tt,delete f.query}return f}function ch(f,C){if(!(f instanceof C))throw new TypeError("Cannot call a class as a function")}function Sc(f,C){for(var w=0;w<C.length;w++){var M=C[w];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),O(f,M.key,M)}}function ha(f,C,w){return C&&Sc(f.prototype,C),w&&Sc(f,w),f}var f,Rl=m(78804),Gu=m.n(Rl),cf=m(96916),Ps=m.n(cf),Dc=m(3498),uh=m.n(Dc),dh=(f=function(C,w){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,N){M.__proto__=N}||function(M,N){for(var V in N)N.hasOwnProperty(V)&&(M[V]=N[V])})(C,w)},function(C,w){function M(){this.constructor=C}f(C,w),C.prototype=null===w?Object.create(w):(M.prototype=w.prototype,new M)}),Ls=Object.prototype.hasOwnProperty;function Ml(f,C){return Ls.call(f,C)}function za(f){if(Array.isArray(f)){for(var w=new Array(f.length),C=0;C<w.length;C++)w[C]=""+C;return w}if(Object.keys)return Object.keys(f);for(var M in w=[],f)Ml(f,M)&&w.push(M);return w}function Dr(f){switch(typeof f){case"object":return JSON.parse(JSON.stringify(f));case"undefined":return null;default:return f}}function Rc(f){for(var M,C=0,w=f.length;C<w;){if(!((M=f.charCodeAt(C))>=48&&M<=57))return!1;C++}return!0}function jt(f){return-1===f.indexOf("/")&&-1===f.indexOf("~")?f:f.replace(/~/g,"~0").replace(/\//g,"~1")}function Yo(f){return f.replace(/~1/g,"/").replace(/~0/g,"~")}function Mc(f){if(void 0===f)return!0;if(f)if(Array.isArray(f)){for(var C=0,w=f.length;C<w;C++)if(Mc(f[C]))return!0}else if("object"==typeof f){var M=za(f),N=M.length;for(C=0;C<N;C++)if(Mc(f[M[C]]))return!0}return!1}function ju(f,C){var w=[f];for(var M in C){var N="object"==typeof C[M]?JSON.stringify(C[M],null,2):C[M];void 0!==N&&w.push(M+": "+N)}return w.join("\n")}var hh=function(f){function C(w,M,N,V,B){var z=this.constructor,ae=f.call(this,ju(w,{name:M,index:N,operation:V,tree:B}))||this;return ae.name=M,ae.index=N,ae.operation=V,ae.tree=B,Object.setPrototypeOf(ae,z.prototype),ae.message=ju(w,{name:M,index:N,operation:V,tree:B}),ae}return dh(C,f),C}(Error),Pn=hh,ph=Dr,Xo={add:function(f,C,w){return f[C]=this.value,{newDocument:w}},remove:function(f,C,w){var M=f[C];return delete f[C],{newDocument:w,removed:M}},replace:function(f,C,w){var M=f[C];return f[C]=this.value,{newDocument:w,removed:M}},move:function(f,C,w){var M=Fs(w,this.path);M&&(M=Dr(M));var N=Fr(w,{op:"remove",path:this.from}).removed;return Fr(w,{op:"add",path:this.path,value:N}),{newDocument:w,removed:M}},copy:function(f,C,w){var M=Fs(w,this.from);return Fr(w,{op:"add",path:this.path,value:Dr(M)}),{newDocument:w}},test:function(f,C,w){return{newDocument:w,test:xl(f[C],this.value)}},_get:function(f,C,w){return this.value=f[C],{newDocument:w}}},Ic={add:function(f,C,w){return Rc(C)?f.splice(C,0,this.value):f[C]=this.value,{newDocument:w,index:C}},remove:function(f,C,w){return{newDocument:w,removed:f.splice(C,1)[0]}},replace:function(f,C,w){var M=f[C];return f[C]=this.value,{newDocument:w,removed:M}},move:Xo.move,copy:Xo.copy,test:Xo.test,_get:Xo._get};function Fs(f,C){if(""==C)return f;var w={op:"_get",path:C};return Fr(f,w),w.value}function Fr(f,C,w,M,N,V){if(void 0===w&&(w=!1),void 0===M&&(M=!0),void 0===N&&(N=!0),void 0===V&&(V=0),w&&("function"==typeof w?w(C,0,f,C.path):fo(C,0)),""===C.path){var B={newDocument:f};if("add"===C.op)return B.newDocument=C.value,B;if("replace"===C.op)return B.newDocument=C.value,B.removed=f,B;if("move"===C.op||"copy"===C.op)return B.newDocument=Fs(f,C.from),"move"===C.op&&(B.removed=f),B;if("test"===C.op){if(B.test=xl(f,C.value),!1===B.test)throw new Pn("Test operation failed","TEST_OPERATION_FAILED",V,C,f);return B.newDocument=f,B}if("remove"===C.op)return B.removed=f,B.newDocument=null,B;if("_get"===C.op)return C.value=f,B;if(w)throw new Pn("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",V,C,f);return B}M||(f=Dr(f));var ae=(C.path||"").split("/"),ce=f,Ee=1,Ce=ae.length,De=void 0,ke=void 0,Ye=void 0;for(Ye="function"==typeof w?w:fo;;){if((ke=ae[Ee])&&-1!=ke.indexOf("~")&&(ke=Yo(ke)),N&&"__proto__"==ke)throw new TypeError("JSON-Patch: modifying `__proto__` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(w&&void 0===De&&(void 0===ce[ke]?De=ae.slice(0,Ee).join("/"):Ee==Ce-1&&(De=C.path),void 0!==De&&Ye(C,0,f,De)),Ee++,Array.isArray(ce)){if("-"===ke)ke=ce.length;else{if(w&&!Rc(ke))throw new Pn("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",V,C,f);Rc(ke)&&(ke=~~ke)}if(Ee>=Ce){if(w&&"add"===C.op&&ke>ce.length)throw new Pn("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",V,C,f);if(!1===(B=Ic[C.op].call(C,ce,ke,f)).test)throw new Pn("Test operation failed","TEST_OPERATION_FAILED",V,C,f);return B}}else if(Ee>=Ce){if(!1===(B=Xo[C.op].call(C,ce,ke,f)).test)throw new Pn("Test operation failed","TEST_OPERATION_FAILED",V,C,f);return B}if(ce=ce[ke],w&&Ee<Ce&&(!ce||"object"!=typeof ce))throw new Pn("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",V,C,f)}}function xo(f,C,w,M,N){if(void 0===M&&(M=!0),void 0===N&&(N=!0),w&&!Array.isArray(C))throw new Pn("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");M||(f=Dr(f));for(var V=new Array(C.length),B=0,z=C.length;B<z;B++)V[B]=Fr(f,C[B],w,!0,N,B),f=V[B].newDocument;return V.newDocument=f,V}function uf(f,C,w){var M=Fr(f,C);if(!1===M.test)throw new Pn("Test operation failed","TEST_OPERATION_FAILED",w,C,f);return M.newDocument}function fo(f,C,w,M){if("object"!=typeof f||null===f||Array.isArray(f))throw new Pn("Operation is not an object","OPERATION_NOT_AN_OBJECT",C,f,w);if(!Xo[f.op])throw new Pn("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",C,f,w);if("string"!=typeof f.path)throw new Pn("Operation `path` property is not a string","OPERATION_PATH_INVALID",C,f,w);if(0!==f.path.indexOf("/")&&f.path.length>0)throw new Pn('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",C,f,w);if(("move"===f.op||"copy"===f.op)&&"string"!=typeof f.from)throw new Pn("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",C,f,w);if(("add"===f.op||"replace"===f.op||"test"===f.op)&&void 0===f.value)throw new Pn("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",C,f,w);if(("add"===f.op||"replace"===f.op||"test"===f.op)&&Mc(f.value))throw new Pn("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",C,f,w);if(w)if("add"==f.op){var N=f.path.split("/").length,V=M.split("/").length;if(N!==V+1&&N!==V)throw new Pn("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",C,f,w)}else if("replace"===f.op||"remove"===f.op||"_get"===f.op){if(f.path!==M)throw new Pn("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",C,f,w)}else if("move"===f.op||"copy"===f.op){var z=Bs([{op:"_get",path:f.from,value:void 0}],w);if(z&&"OPERATION_PATH_UNRESOLVABLE"===z.name)throw new Pn("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",C,f,w)}}function Bs(f,C,w){try{if(!Array.isArray(f))throw new Pn("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(C)xo(Dr(C),Dr(f),w||!0);else{w=w||fo;for(var M=0;M<f.length;M++)w(f[M],M,C,void 0)}}catch(N){if(N instanceof Pn)return N;throw N}}function xl(f,C){if(f===C)return!0;if(f&&C&&"object"==typeof f&&"object"==typeof C){var N,V,B,w=Array.isArray(f),M=Array.isArray(C);if(w&&M){if((V=f.length)!=C.length)return!1;for(N=V;0!=N--;)if(!xl(f[N],C[N]))return!1;return!0}if(w!=M)return!1;var z=Object.keys(f);if((V=z.length)!==Object.keys(C).length)return!1;for(N=V;0!=N--;)if(!C.hasOwnProperty(z[N]))return!1;for(N=V;0!=N--;)if(!xl(f[B=z[N]],C[B]))return!1;return!0}return f!=f&&C!=C}var Vs=new WeakMap,pa=function(C){this.observers=new Map,this.obj=C},Wu=function(C,w){this.callback=C,this.observer=w};function hf(f,C){C.unobserve()}function xc(f,C){var M,N=function(f){return Vs.get(f)}(f);if(N){var V=function(f,C){return f.observers.get(C)}(N,C);M=V&&V.observer}else N=new pa(f),Vs.set(f,N);if(M)return M;if(M={},N.value=Dr(f),C){M.callback=C,M.next=null;var B=function(){Al(M)},z=function(){clearTimeout(M.next),M.next=setTimeout(B)};"undefined"!=typeof window&&(window.addEventListener("mouseup",z),window.addEventListener("keyup",z),window.addEventListener("mousedown",z),window.addEventListener("keydown",z),window.addEventListener("change",z))}return M.patches=[],M.object=f,M.unobserve=function(){Al(M),clearTimeout(M.next),function(f,C){f.observers.delete(C.callback)}(N,M),"undefined"!=typeof window&&(window.removeEventListener("mouseup",z),window.removeEventListener("keyup",z),window.removeEventListener("mousedown",z),window.removeEventListener("keydown",z),window.removeEventListener("change",z))},N.observers.set(C,new Wu(C,M)),M}function Al(f,C){void 0===C&&(C=!1);var w=Vs.get(f.object);Ya(w.value,f.object,f.patches,"",C),f.patches.length&&xo(w.value,f.patches);var M=f.patches;return M.length>0&&(f.patches=[],f.callback&&f.callback(M)),M}function Ya(f,C,w,M,N){if(C!==f){"function"==typeof C.toJSON&&(C=C.toJSON());for(var V=za(C),B=za(f),ae=!1,ce=B.length-1;ce>=0;ce--){var Ce=f[Ee=B[ce]];if(!Ml(C,Ee)||void 0===C[Ee]&&void 0!==Ce&&!1===Array.isArray(C))Array.isArray(f)===Array.isArray(C)?(N&&w.push({op:"test",path:M+"/"+jt(Ee),value:Dr(Ce)}),w.push({op:"remove",path:M+"/"+jt(Ee)}),ae=!0):(N&&w.push({op:"test",path:M,value:f}),w.push({op:"replace",path:M,value:C}));else{var De=C[Ee];"object"==typeof Ce&&null!=Ce&&"object"==typeof De&&null!=De&&Array.isArray(Ce)===Array.isArray(De)?Ya(Ce,De,w,M+"/"+jt(Ee),N):Ce!==De&&(N&&w.push({op:"test",path:M+"/"+jt(Ee),value:Dr(Ce)}),w.push({op:"replace",path:M+"/"+jt(Ee),value:Dr(De)}))}}if(ae||V.length!=B.length)for(ce=0;ce<V.length;ce++){var Ee;!Ml(f,Ee=V[ce])&&void 0!==C[Ee]&&w.push({op:"add",path:M+"/"+jt(Ee),value:Dr(C[Ee])})}}}function fa(f,C,w){void 0===w&&(w=!1);var M=[];return Ya(f,C,M,"",w),M}Object.assign({},y,S,{JsonPatchError:hh,deepClone:Dr,escapePathComponent:jt,unescapePathComponent:Yo});var Ol=m(60910),Xa=m.n(Ol),zu=m(32005),$a=m.n(zu);const Xi={add:function(f,C){return{op:"add",path:f,value:C}},replace:Oc,remove:function(f){return{op:"remove",path:f}},merge:function(f,C){return{type:"mutation",op:"merge",path:f,value:C}},mergeDeep:function(f,C){return{type:"mutation",op:"mergeDeep",path:f,value:C}},context:function(f,C){return{type:"context",path:f,value:C}},getIn:function(f,C){return C.reduce(function(w,M){return void 0!==M&&w?w[M]:w},f)},applyPatch:function(f,C,w){if(w=w||{},"merge"===(C=G(G({},C),{},{path:C.path&&mh(C.path)})).op){var M=pe(f,C.path);Q()(M,C.value),xo(f,[Oc(C.path,M)])}else if("mergeDeep"===C.op){var N=pe(f,C.path);for(var V in C.value){var B=C.value[V],z=Array.isArray(B);if(z){var ae=N[V]||[];N[V]=ze()(ae).call(ae,B)}else if(lr(B)&&!z){var ce=G({},N[V]);for(var Ee in B){if(Object.prototype.hasOwnProperty.call(ce,Ee)){ce=Xa()($a()(ce),B);break}Q()(ce,H({},Ee,B[Ee]))}N[V]=ce}else N[V]=B}}else if("add"===C.op&&""===C.path&&lr(C.value)){xo(f,mt()(C.value).reduce(function(tt,Ct){return tt.push({op:"add",path:"/".concat(mh(Ct)),value:C.value[Ct]}),tt},[]))}else if("replace"===C.op&&""===C.path){var ke=C.value;w.allowMetaPatches&&C.meta&&P(C)&&(Array.isArray(C.value)||lr(C.value))&&(ke=G(G({},ke),C.meta)),f=ke}else if(xo(f,[C]),w.allowMetaPatches&&C.meta&&P(C)&&(Array.isArray(C.value)||lr(C.value))){var qe=G(G({},pe(f,C.path)),C.meta);xo(f,[Oc(C.path,qe)])}return f},parentPathMatch:function(f,C){if(!Array.isArray(C))return!1;for(var w=0,M=C.length;w<M;w+=1)if(C[w]!==f[w])return!1;return!0},flatten:Ka,fullyNormalizeArray:function(f){return ps(Ka(Ju(f)))},normalizeArray:Ju,isPromise:function(f){return lr(f)&&Qu(f.then)},forEachNew:function(f,C){try{return kl(f,Nl,C)}catch(w){return w}},forEachNewPrimitive:function(f,C){try{return kl(f,$u,C)}catch(w){return w}},isJsonPatch:Ao,isContextPatch:function(f){return se(f)&&"context"===f.type},isPatch:se,isMutation:k,isAdditiveMutation:P,isGenerator:function(f){return"[object GeneratorFunction]"===Object.prototype.toString.call(f)},isFunction:Qu,isObject:lr,isError:function(f){return f instanceof Error}};function mh(f){return Array.isArray(f)?f.length<1?"":"/".concat(Et()(f).call(f,function(C){return(C+"").replace(/~/g,"~0").replace(/\//g,"~1")}).join("/")):f}function Oc(f,C,w){return{op:"replace",path:f,value:C,meta:w}}function kl(f,C,w){var M;return ps(Ka(Et()(M=wi()(f).call(f,P)).call(M,function(z){return C(z.value,w,z.path)})||[]))}function $u(f,C,w){return w=w||[],Array.isArray(f)?Et()(f).call(f,function(N,V){return $u(N,C,ze()(w).call(w,V))}):lr(f)?Et()(M=mt()(f)).call(M,function(N){return $u(f[N],C,ze()(w).call(w,N))}):C(f,w[w.length-1],w);var M}function Nl(f,C,w){var M=[];if((w=w||[]).length>0){var N=C(f,w[w.length-1],w);N&&(M=ze()(M).call(M,N))}if(Array.isArray(f)){var V=Et()(f).call(f,function(ae,ce){return Nl(ae,C,ze()(w).call(w,ce))});V&&(M=ze()(M).call(M,V))}else if(lr(f)){var B,z=Et()(B=mt()(f)).call(B,function(ae){return Nl(f[ae],C,ze()(w).call(w,ae))});z&&(M=ze()(M).call(M,z))}return Ka(M)}function Ju(f){return Array.isArray(f)?f:[f]}function Ka(f){var C;return ze()(C=[]).apply(C,Go(Et()(f).call(f,function(w){return Array.isArray(w)?Ka(w):w})))}function ps(f){return wi()(f).call(f,function(C){return void 0!==C})}function lr(f){return f&&"object"===le(f)}function Qu(f){return f&&"function"==typeof f}function Ao(f){if(se(f)){var C=f.op;return"add"===C||"remove"===C||"replace"===C}return!1}function k(f){return Ao(f)||se(f)&&"mutation"===f.type}function P(f){return k(f)&&("add"===f.op||"replace"===f.op||"merge"===f.op||"mergeDeep"===f.op)}function se(f){return f&&"object"===le(f)}function pe(f,C){try{return Fs(f,C)}catch(w){return console.error(w),{}}}var we=m(14569),_e=m.n(we),ye=m(58258),Fe=m.n(ye);function Be(f,C){function w(){Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack;for(var M=arguments.length,N=new Array(M),V=0;V<M;V++)N[V]=arguments[V];this.message=N[0],C&&C.apply(this,N)}return(w.prototype=new Error).name=f,w.prototype.constructor=w,w}var We=m(86439),Wt=m.n(We),kt=["properties"],xe=["properties"],zn=["definitions","parameters","responses","securityDefinitions","components/schemas","components/responses","components/parameters","components/securitySchemes"],ln=["schema/example","items/example"];function sn(f){var C=f[f.length-1],w=f[f.length-2],M=f.join("/");return kt.indexOf(C)>-1&&-1===xe.indexOf(w)||zn.indexOf(M)>-1||ln.some(function(N){return M.indexOf(N)>-1})}function $n(f,C){var w,N=ve(f.split("#"),2),B=N[1],z=ne.resolve(N[0]||"",C||"");return B?ze()(w="".concat(z,"#")).call(w,B):z}var Qn="application/json, application/yaml",fs=new RegExp("^([a-z]+://|//)","i"),cr=Be("JSONRefError",function(C,w,M){this.originalError=M,Q()(this,w||{})}),Wr={},wn=new(_e()),Pc=[function(f){return"paths"===f[0]&&"responses"===f[3]&&"examples"===f[5]},function(f){return"paths"===f[0]&&"responses"===f[3]&&"content"===f[5]&&"example"===f[7]},function(f){return"paths"===f[0]&&"responses"===f[3]&&"content"===f[5]&&"examples"===f[7]&&"value"===f[9]},function(f){return"paths"===f[0]&&"requestBody"===f[3]&&"content"===f[4]&&"example"===f[6]},function(f){return"paths"===f[0]&&"requestBody"===f[3]&&"content"===f[4]&&"examples"===f[6]&&"value"===f[8]},function(f){return"paths"===f[0]&&"parameters"===f[2]&&"example"===f[4]},function(f){return"paths"===f[0]&&"parameters"===f[3]&&"example"===f[5]},function(f){return"paths"===f[0]&&"parameters"===f[2]&&"examples"===f[4]&&"value"===f[6]},function(f){return"paths"===f[0]&&"parameters"===f[3]&&"examples"===f[5]&&"value"===f[7]},function(f){return"paths"===f[0]&&"parameters"===f[2]&&"content"===f[4]&&"example"===f[6]},function(f){return"paths"===f[0]&&"parameters"===f[2]&&"content"===f[4]&&"examples"===f[6]&&"value"===f[8]},function(f){return"paths"===f[0]&&"parameters"===f[3]&&"content"===f[4]&&"example"===f[7]},function(f){return"paths"===f[0]&&"parameters"===f[3]&&"content"===f[5]&&"examples"===f[7]&&"value"===f[9]}],dS={key:"$ref",plugin:function(C,w,M,N){var V=N.getInstance(),B=jo()(M).call(M,0,-1);if(!sn(B)&&!function(C){return Pc.some(function(w){return w(C)})}(B)){var ae=N.getContext(M).baseDoc;if("string"!=typeof C)return new cr("$ref: must be a string (JSON-Ref)",{$ref:C,baseDoc:ae,fullPath:M});var De,ke,Ye,ce=Ja(C),Ee=ce[0],Ce=ce[1]||"";try{De=ae||Ee?gs(Ee,ae):null}catch(Ze){return Lc(Ze,{pointer:Ce,$ref:C,basePath:De,fullPath:M})}if(function(f,C,w,M){var N,V,B=wn.get(M);B||wn.set(M,B={});var z=function(f){return 0===f.length?"":"/".concat(Et()(f).call(f,mo).join("/"))}(w),ae=ze()(N="".concat(C||"<specmap-base>","#")).call(N,f),ce=z.replace(/allOf\/\d+\/?/g,"");if(C===M.contextTree.get([]).baseDoc&&pm(ce,f))return!0;var Ce="",De=w.some(function(ke){var Ye;return Ce=ze()(Ye="".concat(Ce,"/")).call(Ye,mo(ke)),B[Ce]&&B[Ce].some(function(qe){return pm(qe,ae)||pm(ae,qe)})});if(De)return!0;B[ce]=ze()(V=B[ce]||[]).call(V,ae)}(Ce,De,B,N)&&!V.useCircularStructures){var qe=$n(C,De);return C===qe?null:Xi.replace(M,qe)}if(null==De?(Ye=hm(Ce),void 0===(ke=N.get(Ye))&&(ke=new cr("Could not resolve reference: ".concat(C),{pointer:Ce,$ref:C,baseDoc:ae,fullPath:M}))):ke=null!=(ke=ga(De,Ce)).__value?ke.__value:ke.catch(function(Ze){throw Lc(Ze,{pointer:Ce,$ref:C,baseDoc:ae,fullPath:M})}),ke instanceof Error)return[Xi.remove(M),ke];var tt=$n(C,De),Ct=Xi.replace(B,ke,{$$ref:tt});if(De&&De!==ae)return[Ct,Xi.context(B,{baseDoc:De})];try{if(!function(f,C){var w=[f];return C.path.reduce(function(N,V){return w.push(N[V]),N[V]},f),function M(N){return Xi.isObject(N)&&(w.indexOf(N)>=0||mt()(N).some(function(V){return M(N[V])}))}(C.value)}(N.state,Ct)||V.useCircularStructures)return Ct}catch(Ze){return null}}}},lm=Q()(dS,{docCache:Wr,absoluteify:gs,clearCache:function(f){void 0!==f?delete Wr[f]:mt()(Wr).forEach(function(C){delete Wr[C]})},JSONRefError:cr,wrapError:Lc,getDoc:um,split:Ja,extractFromDoc:ga,fetchJSON:function(f){return fetch(f,{headers:{Accept:Qn},loadSpec:!0}).then(function(C){return C.text()}).then(function(C){return Cc.load(C)})},extract:dm,jsonPointerToArray:hm,unescapeJsonPointerToken:ff});const $o=lm;function gs(f,C){if(!fs.test(f)){var w;if(!C)throw new cr(ze()(w="Tried to resolve a relative URL, without having a basePath. path: '".concat(f,"' basePath: '")).call(w,C,"'"));return ne.resolve(C,f)}return f}function Lc(f,C){var w,M;return w=f&&f.response&&f.response.body?ze()(M="".concat(f.response.body.code," ")).call(M,f.response.body.message):f.message,new cr("Could not resolve reference: ".concat(w),C,f)}function Ja(f){return(f+"").split("#")}function ga(f,C){var w=Wr[f];if(w&&!Xi.isPromise(w))try{var M=dm(C,w);return Q()(Ps().resolve(M),{__value:M})}catch(N){return Ps().reject(N)}return um(f).then(function(N){return dm(C,N)})}function um(f){var C=Wr[f];return C?Xi.isPromise(C)?C:Ps().resolve(C):(Wr[f]=lm.fetchJSON(f).then(function(w){return Wr[f]=w,w}),Wr[f])}function dm(f,C){var w=hm(f);if(w.length<1)return C;var M=Xi.getIn(C,w);if(void 0===M)throw new cr("Could not resolve pointer: ".concat(f," does not exist in document"),{pointer:f});return M}function hm(f){var C;if("string"!=typeof f)throw new TypeError("Expected a string, got a ".concat(le(f)));return"/"===f[0]&&(f=f.substr(1)),""===f?[]:Et()(C=f.split("/")).call(C,ff)}function ff(f){return"string"!=typeof f?f:new(Fe())("=".concat(f.replace(/~1/g,"/").replace(/~0/g,"~"))).get("")}function mo(f){var C,w=new(Fe())([["",f.replace(/~/g,"~0").replace(/\//g,"~1")]]);return jo()(C=w.toString()).call(C,1)}function pm(f,C){if(function(C){return!C||"/"===C||"#"===C}(C))return!0;var w=f.charAt(C.length),M=jo()(C).call(C,-1);return 0===f.indexOf(C)&&(!w||"/"===w||"#"===w)&&"#"!==M}var Sb=m(36593),Db=m.n(Sb);const Rb={key:"allOf",plugin:function(C,w,M,N,V){if(!V.meta||!V.meta.$$ref){var B=jo()(M).call(M,0,-1);if(!sn(B)){if(!Array.isArray(C)){var z=new TypeError("allOf must be an array");return z.fullPath=M,z}var ae=!1,ce=V.value;if(B.forEach(function(De){!ce||(ce=ce[De])}),ce=G({},ce),!Db()(ce)){delete ce.allOf;var Ce,Ee=[];return Ee.push(N.replace(B,{})),C.forEach(function(De,ke){if(!N.isObject(De)){if(ae)return null;ae=!0;var Ye=new TypeError("Elements in allOf must be objects");return Ye.fullPath=M,Ee.push(Ye)}Ee.push(N.mergeDeep(B,De));var tt=function(f,C){var w=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},M=w.specmap,N=w.getBaseUrlForNodePath,V=void 0===N?function(ce){var Ee;return M.getContext(ze()(Ee=[]).call(Ee,Go(C),Go(ce))).baseDoc}:N,B=w.targetKeys,z=void 0===B?["$ref","$$ref"]:B,ae=[];return Wt()(f).forEach(function(){if(He()(z).call(z,this.key)&&"string"==typeof this.node){var Ee=this.path,Ce=ze()(C).call(C,this.path),De=$n(this.node,V(Ee));ae.push(M.replace(Ce,De))}}),ae}(De,jo()(M).call(M,0,-1),{getBaseUrlForNodePath:function(Ze){var Pi;return N.getContext(ze()(Pi=[]).call(Pi,Go(M),[ke],Go(Ze))).baseDoc},specmap:N});Ee.push.apply(Ee,Go(tt))}),Ee.push(N.mergeDeep(B,ce)),ce.$$ref||Ee.push(N.remove(ze()(Ce=[]).call(Ce,B,"$$ref"))),Ee}}}}},Mb={key:"parameters",plugin:function(C,w,M,N){if(Array.isArray(C)&&C.length){var V=Q()([],C),B=jo()(M).call(M,0,-1),z=G({},Xi.getIn(N.spec,B));return C.forEach(function(ae,ce){try{V[ce].default=N.parameterMacro(z,ae)}catch(Ce){var Ee=new Error(Ce);return Ee.fullPath=M,Ee}}),Xi.replace(M,V)}return Xi.replace(M,C)}},qu={key:"properties",plugin:function(C,w,M,N){var V=G({},C);for(var B in C)try{V[B].default=N.modelPropertyMacro(V[B])}catch(ce){var z=new Error(ce);return z.fullPath=M,z}return Xi.replace(M,V)}};var mf=function(){function f(C){ch(this,f),this.root=Bc(C||{})}return ha(f,[{key:"set",value:function(w,M){var N=this.getParent(w,!0);if(N){var V=w[w.length-1],B=N.children;B[V]?_f(B[V],M,N):B[V]=Bc(M,N)}else _f(this.root,M,null)}},{key:"get",value:function(w){if((w=w||[]).length<1)return this.root.value;for(var N,V,M=this.root,B=0;B<w.length&&(N=M.children)[V=w[B]];B+=1)M=N[V];return M&&M.protoValue}},{key:"getParent",value:function(w,M){return!w||w.length<1?null:w.length<2?this.root:jo()(w).call(w,0,-1).reduce(function(N,V){if(!N)return N;var B=N.children;return!B[V]&&M&&(B[V]=Bc(null,N)),B[V]},this.root)}}]),f}();function Bc(f,C){return _f({children:{}},f,C)}function _f(f,C,w){return f.value=C||{},f.protoValue=w?G(G({},w.protoValue),f.value):f.value,mt()(f.children).forEach(function(M){var N=f.children[M];f.children[M]=_f(N,N.value,f)}),f}var Ch=function(){},Hc=function(){function f(C){var M,N,w=this;ch(this,f),Q()(this,{spec:"",debugLevel:"info",plugins:[],pluginHistory:{},errors:[],mutations:[],promisedPatches:[],state:{},patches:[],context:{},contextTree:new mf,showDebug:!1,allPatches:[],pluginProp:"specMap",libMethods:Q()(Object.create(this),Xi,{getInstance:function(){return w}}),allowMetaPatches:!1},C),this.get=this._get.bind(this),this.getContext=this._getContext.bind(this),this.hasRun=this._hasRun.bind(this),this.wrappedPlugins=wi()(M=Et()(N=this.plugins).call(N,this.wrapPlugin.bind(this))).call(M,Xi.isFunction),this.patches.push(Xi.add([],this.spec)),this.patches.push(Xi.context([],this.context)),this.updatePatches(this.patches)}return ha(f,[{key:"debug",value:function(w){if(this.debugLevel===w){for(var M,N=arguments.length,V=new Array(N>1?N-1:0),B=1;B<N;B++)V[B-1]=arguments[B];(M=console).log.apply(M,V)}}},{key:"verbose",value:function(w){if("verbose"===this.debugLevel){for(var M,N,V=arguments.length,B=new Array(V>1?V-1:0),z=1;z<V;z++)B[z-1]=arguments[z];(M=console).log.apply(M,ze()(N=["[".concat(w,"]   ")]).call(N,B))}}},{key:"wrapPlugin",value:function(w,M){var B,ae,ce,N=this.pathDiscriminator,V=null;return w[this.pluginProp]?(V=w,B=w[this.pluginProp]):Xi.isFunction(w)?B=w:Xi.isObject(w)&&(ae=w,ce=function(Ce,De){return!Array.isArray(Ce)||Ce.every(function(ke,Ye){return ke===De[Ye]})},B=Le().mark(function Ee(Ce,De){var ke,Ye,qe,tt,Ct,Ze;return Le().wrap(function(Di){for(;;)switch(Di.prev=Di.next){case 0:Ze=function(yn,cn,ii){var vo,ur,qn,Ui,mr,_r,Za,Us,od,wm,Zb,Bl,zr;return Le().wrap(function(Yr){for(;;)switch(Yr.prev=Yr.next){case 0:if(Xi.isObject(yn)){Yr.next=6;break}if(ae.key!==cn[cn.length-1]){Yr.next=4;break}return Yr.next=4,ae.plugin(yn,ae.key,cn,De);case 4:Yr.next=30;break;case 6:ur=cn[vo=cn.length-1],qn=cn.indexOf("properties"),Ui="properties"===ur&&vo===qn,mr=De.allowMetaPatches&&Ye[yn.$$ref],_r=0,Za=mt()(yn);case 12:if(!(_r<Za.length)){Yr.next=30;break}if(od=yn[Us=Za[_r]],wm=ze()(cn).call(cn,Us),Zb=Xi.isObject(od),Bl=yn.$$ref,mr){Yr.next=22;break}if(!Zb){Yr.next=22;break}return De.allowMetaPatches&&Bl&&(Ye[Bl]=!0),Yr.delegateYield(Ze(od,wm,ii),"t0",22);case 22:if(Ui||Us!==ae.key){Yr.next=27;break}if(zr=ce(N,cn),N&&!zr){Yr.next=27;break}return Yr.next=27,ae.plugin(od,Us,wm,De,ii);case 27:_r++,Yr.next=12;break;case 30:case"end":return Yr.stop()}},ke)},ke=Le().mark(Ze),Ye={},qe=K(wi()(Ce).call(Ce,Xi.isAdditiveMutation)),Di.prev=4,qe.s();case 6:if((tt=qe.n()).done){Di.next=11;break}return Di.delegateYield(Ze((Ct=tt.value).value,Ct.path,Ct),"t0",9);case 9:Di.next=6;break;case 11:Di.next=16;break;case 13:Di.prev=13,Di.t1=Di.catch(4),qe.e(Di.t1);case 16:return Di.prev=16,qe.f(),Di.finish(16);case 19:case"end":return Di.stop()}},Ee,null,[[4,13,16,19]])})),Q()(B.bind(V),{pluginName:w.name||M,isGenerator:Xi.isGenerator(B)})}},{key:"nextPlugin",value:function(){var w,M=this;return Gu()(w=this.wrappedPlugins).call(w,function(N){return M.getMutationsForPlugin(N).length>0})}},{key:"nextPromisedPatch",value:function(){var w;if(this.promisedPatches.length>0)return Ps().race(Et()(w=this.promisedPatches).call(w,function(M){return M.value}))}},{key:"getPluginHistory",value:function(w){var M=this.constructor.getPluginName(w);return this.pluginHistory[M]||[]}},{key:"getPluginRunCount",value:function(w){return this.getPluginHistory(w).length}},{key:"getPluginHistoryTip",value:function(w){var M=this.getPluginHistory(w);return M&&M[M.length-1]||{}}},{key:"getPluginMutationIndex",value:function(w){var M=this.getPluginHistoryTip(w).mutationIndex;return"number"!=typeof M?-1:M}},{key:"updatePluginHistory",value:function(w,M){var N=this.constructor.getPluginName(w);this.pluginHistory[N]=this.pluginHistory[N]||[],this.pluginHistory[N].push(M)}},{key:"updatePatches",value:function(w){var M=this;Xi.normalizeArray(w).forEach(function(N){if(N instanceof Error)M.errors.push(N);else try{if(!Xi.isObject(N))return void M.debug("updatePatches","Got a non-object patch",N);if(M.showDebug&&M.allPatches.push(N),Xi.isPromise(N.value))return M.promisedPatches.push(N),void M.promisedPatchThen(N);if(Xi.isContextPatch(N))return void M.setContext(N.path,N.value);if(Xi.isMutation(N))return void M.updateMutations(N)}catch(V){console.error(V),M.errors.push(V)}})}},{key:"updateMutations",value:function(w){"object"===le(w.value)&&!Array.isArray(w.value)&&this.allowMetaPatches&&(w.value=G({},w.value));var M=Xi.applyPatch(this.state,w,{allowMetaPatches:this.allowMetaPatches});M&&(this.mutations.push(w),this.state=M)}},{key:"removePromisedPatch",value:function(w){var M,N=this.promisedPatches.indexOf(w);N<0?this.debug("Tried to remove a promisedPatch that isn't there!"):uh()(M=this.promisedPatches).call(M,N,1)}},{key:"promisedPatchThen",value:function(w){var M=this;return w.value=w.value.then(function(N){var V=G(G({},w),{},{value:N});M.removePromisedPatch(w),M.updatePatches(V)}).catch(function(N){M.removePromisedPatch(w),M.updatePatches(N)}),w.value}},{key:"getMutations",value:function(w,M){var N;return w=w||0,"number"!=typeof M&&(M=this.mutations.length),jo()(N=this.mutations).call(N,w,M)}},{key:"getCurrentMutations",value:function(){return this.getMutationsForPlugin(this.getCurrentPlugin())}},{key:"getMutationsForPlugin",value:function(w){var M=this.getPluginMutationIndex(w);return this.getMutations(M+1)}},{key:"getCurrentPlugin",value:function(){return this.currentPlugin}},{key:"getLib",value:function(){return this.libMethods}},{key:"_get",value:function(w){return Xi.getIn(this.state,w)}},{key:"_getContext",value:function(w){return this.contextTree.get(w)}},{key:"setContext",value:function(w,M){return this.contextTree.set(w,M)}},{key:"_hasRun",value:function(w){return this.getPluginRunCount(this.getCurrentPlugin())>(w||0)}},{key:"dispatch",value:function(){var z,w=this,M=this,N=this.nextPlugin();if(!N){var V=this.nextPromisedPatch();if(V)return V.then(function(){return w.dispatch()}).catch(function(){return w.dispatch()});var B={spec:this.state,errors:this.errors};return this.showDebug&&(B.patches=this.allPatches),Ps().resolve(B)}if(M.pluginCount=M.pluginCount||{},M.pluginCount[N]=(M.pluginCount[N]||0)+1,M.pluginCount[N]>100)return Ps().resolve({spec:M.state,errors:ze()(z=M.errors).call(z,new Error("We've reached a hard limit of ".concat(100," plugin runs")))});if(N!==this.currentPlugin&&this.promisedPatches.length){var ae,ce=Et()(ae=this.promisedPatches).call(ae,function(De){return De.value});return Ps().all(Et()(ce).call(ce,function(De){return De.then(Ch,Ch)})).then(function(){return w.dispatch()})}return function(){M.currentPlugin=N;var De=M.getCurrentMutations(),ke=M.mutations.length-1;try{if(N.isGenerator){var qe,Ye=K(N(De,M.getLib()));try{for(Ye.s();!(qe=Ye.n()).done;)Ce(qe.value)}catch(Ze){Ye.e(Ze)}finally{Ye.f()}}else Ce(N(De,M.getLib()))}catch(Ze){console.error(Ze),Ce([Q()(Object.create(Ze),{plugin:N})])}finally{M.updatePluginHistory(N,{mutationIndex:ke})}return M.dispatch()}();function Ce(De){De&&(De=Xi.fullyNormalizeArray(De),M.updatePatches(De,N))}}}],[{key:"getPluginName",value:function(w){return w.pluginName}},{key:"getPatchesOfType",value:function(w,M){return wi()(w).call(w,M)}}]),f}(),Pl={refs:$o,allOf:Rb,parameters:Mb,properties:qu},xb=m(27954),Th=m.n(xb),wh=function(C){return String.prototype.toLowerCase.call(C)},Uc=function(C){return C.replace(/[^\w]/gi,"_")};function Ll(f){var C=f.openapi;return!!C&&ue()(C).call(C,"3")}function Oe(f,C){var w=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",M=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},N=M.v2OperationIdCompatibilityMode;if(!f||"object"!==le(f))return null;var V=(f.operationId||"").replace(/\s/g,"");return V.length?Uc(f.operationId):gm(C,w,{v2OperationIdCompatibilityMode:N})}function gm(f,C){var w,M=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},N=M.v2OperationIdCompatibilityMode;if(N){var V,B,z=ze()(V="".concat(C.toLowerCase(),"_")).call(V,f).replace(/[\s!@#$%^&*()_+=[{\]};:<>|./?,\\'""-]/g,"_");return(z=z||ze()(B="".concat(f.substring(1),"_")).call(B,C)).replace(/((_){2,})/g,"_").replace(/^(_)*/g,"").replace(/([_])*$/g,"")}return ze()(w="".concat(wh(C))).call(w,Uc(f))}function ed(f,C){var w;return ze()(w="".concat(wh(C),"-")).call(w,f)}function mm(f,C,w){if(!f||"object"!==le(f)||!f.paths||"object"!==le(f.paths))return null;var M=f.paths;for(var N in M)for(var V in M[N])if("PARAMETERS"!==V.toUpperCase()){var B=M[N][V];if(B&&"object"===le(B)){var z={spec:f,pathName:N,method:V.toUpperCase(),operation:B},ae=C(z);if(w&&ae)return z}}}function vf(f){var C=f.spec,w=C.paths,M={};if(!w||C.$$normalized)return f;for(var N in w){var V=w[N];if(Th()(V)){var B=V.parameters,z=function(Ce){var De=V[Ce];if(!Th()(De))return"continue";var ke=Oe(De,N,Ce);if(ke){M[ke]?M[ke].push(De):M[ke]=[De];var Ye=M[ke];if(Ye.length>1)Ye.forEach(function(ur,qn){var Ui;ur.__originalOperationId=ur.__originalOperationId||ur.operationId,ur.operationId=ze()(Ui="".concat(ke)).call(Ui,qn+1)});else if(void 0!==De.operationId){var qe=Ye[0];qe.__originalOperationId=qe.__originalOperationId||De.operationId,qe.operationId=ke}}if("parameters"!==Ce){var tt=[],Ct={};for(var Ze in C)("produces"===Ze||"consumes"===Ze||"security"===Ze)&&(Ct[Ze]=C[Ze],tt.push(Ct));if(B&&(Ct.parameters=B,tt.push(Ct)),tt.length){var Di,Pi=K(tt);try{for(Pi.s();!(Di=Pi.n()).done;){var Yn=Di.value;for(var yn in Yn)if(De[yn]){if("parameters"===yn){var ii,cn=K(Yn[yn]);try{var vo=function(){var qn=ii.value;De[yn].some(function(mr){return mr.name&&mr.name===qn.name||mr.$ref&&mr.$ref===qn.$ref||mr.$$ref&&mr.$$ref===qn.$$ref||mr===qn})||De[yn].push(qn)};for(cn.s();!(ii=cn.n()).done;)vo()}catch(ur){cn.e(ur)}finally{cn.f()}}}else De[yn]=Yn[yn]}}catch(ur){Pi.e(ur)}finally{Pi.f()}}}};for(var ae in V)z(ae)}}return C.$$normalized=!0,f}function bf(f){var C=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},w=C.requestInterceptor,M=C.responseInterceptor,N=f.withCredentials?"include":"same-origin";return function(V){return f({url:V,loadSpec:!0,requestInterceptor:w,responseInterceptor:M,headers:{Accept:Qn},credentials:N}).then(function(B){return B.body})}}function Ln(f){var w=f.spec,N=f.mode,V=f.allowMetaPatches,B=void 0===V||V,z=f.pathDiscriminator,ae=f.modelPropertyMacro,ce=f.parameterMacro,Ee=f.requestInterceptor,Ce=f.responseInterceptor,De=f.skipNormalization,ke=f.useCircularStructures,Ye=f.http,qe=f.baseDoc;return qe=qe||f.url,Ye=f.fetch||Ye||Dl,w?tt(w):bf(Ye,{requestInterceptor:Ee,responseInterceptor:Ce})(qe).then(tt);function tt(Ct){qe&&(Pl.refs.docCache[qe]=Ct),Pl.refs.fetchJSON=bf(Ye,{requestInterceptor:Ee,responseInterceptor:Ce});var Ze=[Pl.refs];return"function"==typeof ce&&Ze.push(Pl.parameters),"function"==typeof ae&&Ze.push(Pl.properties),"strict"!==N&&Ze.push(Pl.allOf),function(f){return new Hc(f).dispatch()}({spec:Ct,context:{baseDoc:qe},plugins:Ze,allowMetaPatches:B,pathDiscriminator:z,parameterMacro:ce,modelPropertyMacro:ae,useCircularStructures:ke}).then(De?function(){var Pi=Te(Le().mark(function Di(Yn){return Le().wrap(function(cn){for(;;)switch(cn.prev=cn.next){case 0:return cn.abrupt("return",Yn);case 1:case"end":return cn.stop()}},Di)}));return function(Di){return Pi.apply(this,arguments)}}():vf)}}var Sh=m(87578),gr=m.n(Sh);function Dh(){return Dh=Te(Le().mark(function f(C,w){var M,N,Ce,De,ke,Ye,qe=arguments;return Le().wrap(function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:return N=(M=qe.length>2&&void 0!==qe[2]?qe[2]:{}).returnEntireTree,Ce={pathDiscriminator:w,baseDoc:M.baseDoc,requestInterceptor:M.requestInterceptor,responseInterceptor:M.responseInterceptor,parameterMacro:M.parameterMacro,modelPropertyMacro:M.modelPropertyMacro,useCircularStructures:M.useCircularStructures},De=vf({spec:C}),ke=De.spec,Ct.next=6,Ln(G(G({},Ce),{},{spec:ke,allowMetaPatches:!0,skipNormalization:!0}));case 6:return Ye=Ct.sent,!N&&Array.isArray(w)&&w.length&&(Ye.spec=gr()(Ye.spec,w)||null),Ct.abrupt("return",Ye);case 9:case"end":return Ct.stop()}},f)})),Dh.apply(this,arguments)}var yf=function(){return null},id_mapTagOperations=function(f){var C=f.spec,w=f.cb,M=void 0===w?yf:w,N=f.defaultTag,V=void 0===N?"default":N,B=f.v2OperationIdCompatibilityMode,z={},ae={};return mm(C,function(ce){var Ee=ce.pathName,Ce=ce.method,De=ce.operation,ke=De.tags?function(C){return Array.isArray(C)?C:[C]}(De.tags):[V];ke.forEach(function(Ye){if("string"==typeof Ye){ae[Ye]=ae[Ye]||{};var Ze,qe=ae[Ye],tt=Oe(De,Ee,Ce,{v2OperationIdCompatibilityMode:B}),Ct=M({spec:C,pathName:Ee,method:Ce,operation:De,operationId:tt});if(z[tt])z[tt]+=1,qe[ze()(Ze="".concat(tt)).call(Ze,z[tt])]=Ct;else if(void 0!==qe[tt]){var Pi,Di,Yn=z[tt]||1;z[tt]=Yn+1,qe[ze()(Pi="".concat(tt)).call(Pi,z[tt])]=Ct;var yn=qe[tt];delete qe[tt],qe[ze()(Di="".concat(tt)).call(Di,Yn)]=yn}else qe[tt]=Ct}})}),ae},id_makeExecute=function(){var f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(C){var w=C.pathName,M=C.method,N=C.operationId;return function(V){var B=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},z=f.requestInterceptor,ae=f.responseInterceptor,ce=f.userFetch;return f.execute(G({spec:f.spec,requestInterceptor:z,responseInterceptor:ae,userFetch:ce,pathName:w,method:M,parameters:V,operationId:N},B))}}},_m=m(93165);var kb=m(1794),Nb=m.n(kb),Pb=m(32946);const Lb={body:function(f){f.req.body=f.value},header:function(f){var C=f.req,w=f.parameter,M=f.value;C.headers=C.headers||{},void 0!==M&&(C.headers[w.name]=M)},query:function(f){var C=f.req,w=f.value,M=f.parameter;if(C.query=C.query||{},!1===w&&"boolean"===M.type&&(w="false"),0===w&&["number","integer"].indexOf(M.type)>-1&&(w="0"),w)C.query[M.name]={collectionFormat:M.collectionFormat,value:w};else if(M.allowEmptyValue&&void 0!==w){var N=M.name;C.query[N]=C.query[N]||{},C.query[N].allowEmptyValue=!0}},path:function(f){var C=f.req,w=f.value;C.url=C.url.split("{".concat(f.parameter.name,"}")).join(encodeURIComponent(w))},formData:function(f){var C=f.req,w=f.value,M=f.parameter;(w||M.allowEmptyValue)&&(C.form=C.form||{},C.form[M.name]={value:w,allowEmptyValue:M.allowEmptyValue,collectionFormat:M.collectionFormat})}};function Ih(f,C){return He()(C).call(C,"application/json")?"string"==typeof f?f:Bi()(f):f.toString()}function gS(f){var C=f.req,w=f.value,M=f.parameter,N=M.name,V=M.style,B=M.explode,z=M.content;if(z){var ae=mt()(z)[0];C.url=C.url.split("{".concat(N,"}")).join(ks(Ih(w,ae),{escape:!0}))}else{var ce=Io({key:M.name,value:w,style:V||"simple",explode:B||!1,escape:!0});C.url=C.url.split("{".concat(N,"}")).join(ce)}}function xh(f){var C=f.req,w=f.value,M=f.parameter;if(C.query=C.query||{},M.content){var N=mt()(M.content)[0];C.query[M.name]=Ih(w,N)}else if(!1===w&&(w="false"),0===w&&(w="0"),w)C.query[M.name]={value:w,serializationOption:{style:M.style,explode:M.explode,allowReserved:M.allowReserved}};else if(M.allowEmptyValue&&void 0!==w){var ae=M.name;C.query[ae]=C.query[ae]||{},C.query[ae].allowEmptyValue=!0}}var Cf=["accept","authorization","content-type"];function bm(f){var C=f.req,w=f.parameter,M=f.value;if(C.headers=C.headers||{},!(Cf.indexOf(w.name.toLowerCase())>-1)){if(w.content){var N=mt()(w.content)[0];return void(C.headers[w.name]=Ih(M,N))}void 0!==M&&(C.headers[w.name]=Io({key:w.name,value:M,style:w.style||"simple",explode:void 0!==w.explode&&w.explode,escape:!1}))}}function ym(f){var C=f.req,w=f.parameter,M=f.value;C.headers=C.headers||{};var N=le(M);if(w.content){var V,B=mt()(w.content)[0];C.headers.Cookie=ze()(V="".concat(w.name,"=")).call(V,Ih(M,B))}else if("undefined"!==N){var z="object"===N&&!Array.isArray(M)&&w.explode?"":"".concat(w.name,"=");C.headers.Cookie=z+Io({key:w.name,value:M,escape:!1,style:w.style||"form",explode:void 0!==w.explode&&w.explode})}}var Em=m(53112),Qa=m.n(Em);var jb=["http","fetch","spec","operationId","pathName","method","parameters","securities"],_o=function(C){return Array.isArray(C)?C:[]},Hs=Be("OperationNotFoundError",function(C,w,M){this.originalError=M,Q()(this,w||{})}),zb={buildRequest:Tm};function Tm(f){var C,w,M=f.spec,N=f.operationId,V=f.responseContentType,B=f.scheme,z=f.requestInterceptor,ae=f.responseInterceptor,ce=f.contextUrl,Ee=f.userFetch,Ce=f.server,De=f.serverVariables,ke=f.http,Ye=f.parameters,qe=f.parameterBuilders,tt=Ll(M);qe||(qe=tt?s:Lb);var Ze={url:"",credentials:ke&&ke.withCredentials?"include":"same-origin",headers:{},cookies:{}};z&&(Ze.requestInterceptor=z),ae&&(Ze.responseInterceptor=ae),Ee&&(Ze.userFetch=Ee);var Pi=function(f,C){return f&&f.paths?function(f,C){return mm(f,C,!0)||null}(f,function(w){var M=w.pathName,N=w.method,V=w.operation;if(!V||"object"!==le(V))return!1;var B=V.operationId;return[Oe(V,M,N),ed(M,N),B].some(function(ce){return ce&&ce===C})}):null}(M,N);if(!Pi)throw new Hs("Operation ".concat(N," not found"));var Di=Pi.operation,Yn=void 0===Di?{}:Di,yn=Pi.method,cn=Pi.pathName;if(Ze.url+=wf({spec:M,scheme:B,contextUrl:ce,server:Ce,serverVariables:De,pathName:cn,method:yn}),!N)return delete Ze.cookies,Ze;Ze.url+=cn,Ze.method="".concat(yn).toUpperCase(),Ye=Ye||{};var ii=M.paths[cn]||{};V&&(Ze.headers.accept=V);var vo=function(C){var w={};C.forEach(function(N){w[N.in]||(w[N.in]={}),w[N.in][N.name]=N});var M=[];return mt()(w).forEach(function(N){mt()(w[N]).forEach(function(V){M.push(w[N][V])})}),M}(ze()(C=ze()(w=[]).call(w,_o(Yn.parameters))).call(C,_o(ii.parameters)));vo.forEach(function(Ui){var _r,Za,mr=qe[Ui.in];if("body"===Ui.in&&Ui.schema&&Ui.schema.properties&&(_r=Ye),void 0===(_r=Ui&&Ui.name&&Ye[Ui.name]))_r=Ui&&Ui.name&&Ye[ze()(Za="".concat(Ui.in,".")).call(Za,Ui.name)];else if(function(C,w){return wi()(w).call(w,function(M){return M.name===C})}(Ui.name,vo).length>1){var Us;console.warn(ze()(Us="Parameter '".concat(Ui.name,"' is ambiguous because the defined spec has more than one parameter with the name: '")).call(Us,Ui.name,"' and the passed-in parameter values did not define an 'in' value."))}if(null!==_r){if(void 0!==Ui.default&&void 0===_r&&(_r=Ui.default),void 0===_r&&Ui.required&&!Ui.allowEmptyValue)throw new Error("Required parameter ".concat(Ui.name," is not provided"));if(tt&&Ui.schema&&"object"===Ui.schema.type&&"string"==typeof _r)try{_r=JSON.parse(_r)}catch(od){throw new Error("Could not parse object parameter value string as JSON")}mr&&mr({req:Ze,parameter:Ui,value:_r,operation:Yn,spec:M})}});var ur=G(G({},f),{},{operation:Yn});if((Ze=tt?function(f,C){var w=f.operation,M=f.requestBody,B=f.attachContentTypeForEmptyPayload,z=f.requestContentType;C=function(f){var C=f.request,w=f.securities,M=void 0===w?{}:w,N=f.operation,V=void 0===N?{}:N,B=f.spec,z=G({},C),ae=M.authorized,ce=void 0===ae?{}:ae,Ee=V.security||B.security||[],Ce=ce&&!!mt()(ce).length,De=gr()(B,["components","securitySchemes"])||{};return z.headers=z.headers||{},z.query=z.query||{},mt()(M).length&&Ce&&Ee&&(!Array.isArray(V.security)||V.security.length)?(Ee.forEach(function(ke){mt()(ke).forEach(function(Ye){var qe=ce[Ye],tt=De[Ye];if(qe){var Ct=qe.value||qe,Ze=tt.type;if(qe)if("apiKey"===Ze)"query"===tt.in&&(z.query[tt.name]=Ct),"header"===tt.in&&(z.headers[tt.name]=Ct),"cookie"===tt.in&&(z.cookies[tt.name]=Ct);else if("http"===Ze){if(/^basic$/i.test(tt.scheme)){var Pi,Di=Ct.username||"",Yn=Ct.password||"",yn=Qa()(ze()(Pi="".concat(Di,":")).call(Pi,Yn));z.headers.Authorization="Basic ".concat(yn)}/^bearer$/i.test(tt.scheme)&&(z.headers.Authorization="Bearer ".concat(Ct))}else if("oauth2"===Ze||"openIdConnect"===Ze){var cn,ii=qe.token||{},ur=ii[tt["x-tokenName"]||"access_token"],qn=ii.token_type;(!qn||"bearer"===qn.toLowerCase())&&(qn="Bearer"),z.headers.Authorization=ze()(cn="".concat(qn," ")).call(cn,ur)}}})}),z):C}({request:C,securities:f.securities,operation:w,spec:f.spec});var ae=w.requestBody||{},ce=mt()(ae.content||{}),Ee=z&&ce.indexOf(z)>-1;if(M||B){if(z&&Ee)C.headers["Content-Type"]=z;else if(!z){var Ce=ce[0];Ce&&(C.headers["Content-Type"]=Ce,z=Ce)}}else z&&Ee&&(C.headers["Content-Type"]=z);if(!f.responseContentType&&w.responses){var De,ke=wi()(De=Yt()(w.responses)).call(De,function(qe){var tt=ve(qe,2),Ze=tt[1],Pi=parseInt(tt[0],10);return Pi>=200&&Pi<300&&Nb()(Ze.content)}).reduce(function(qe,tt){var Ze=ve(tt,2)[1];return ze()(qe).call(qe,mt()(Ze.content))},[]);ke.length>0&&(C.headers.accept=ke.join(", "))}if(M)if(z){if(ce.indexOf(z)>-1)if("application/x-www-form-urlencoded"===z||"multipart/form-data"===z)if("object"===le(M)){var Ye=(ae.content[z]||{}).encoding||{};C.form={},mt()(M).forEach(function(qe){C.form[qe]={value:M[qe],encoding:Ye[qe]||{}}})}else C.form=M;else C.body=M}else C.body=M;return C}(ur,Ze):function(f,C){var ae,ce,w=f.spec,M=f.operation,V=f.requestContentType,B=f.responseContentType,z=f.attachContentTypeForEmptyPayload;if(C=function(f){var C=f.request,w=f.securities,M=void 0===w?{}:w,N=f.operation,V=void 0===N?{}:N,B=f.spec,z=G({},C),ae=M.authorized,ce=void 0===ae?{}:ae,Ee=M.specSecurity,De=V.security||(void 0===Ee?[]:Ee),ke=ce&&!!mt()(ce).length,Ye=B.securityDefinitions;return z.headers=z.headers||{},z.query=z.query||{},mt()(M).length&&ke&&De&&(!Array.isArray(V.security)||V.security.length)?(De.forEach(function(qe){mt()(qe).forEach(function(tt){var Ct=ce[tt];if(Ct){var Ze=Ct.token,Pi=Ct.value||Ct,Di=Ye[tt],Yn=Di.type,cn=Ze&&Ze[Di["x-tokenName"]||"access_token"],ii=Ze&&Ze.token_type;if(Ct)if("apiKey"===Yn){var vo="query"===Di.in?"query":"headers";z[vo]=z[vo]||{},z[vo][Di.name]=Pi}else if("basic"===Yn)if(Pi.header)z.headers.authorization=Pi.header;else{var ur,qn=Pi.username||"",Ui=Pi.password||"";Pi.base64=Qa()(ze()(ur="".concat(qn,":")).call(ur,Ui)),z.headers.authorization="Basic ".concat(Pi.base64)}else if("oauth2"===Yn&&cn){var mr;ii=ii&&"bearer"!==ii.toLowerCase()?ii:"Bearer",z.headers.authorization=ze()(mr="".concat(ii," ")).call(mr,cn)}}})}),z):C}({request:C,securities:f.securities,operation:M,spec:w}),C.body||C.form||z)if(V)C.headers["Content-Type"]=V;else if(Array.isArray(M.consumes)){var Ee=ve(M.consumes,1);C.headers["Content-Type"]=Ee[0]}else if(Array.isArray(w.consumes)){var Ce=ve(w.consumes,1);C.headers["Content-Type"]=Ce[0]}else M.parameters&&wi()(ae=M.parameters).call(ae,function(tt){return"file"===tt.type}).length?C.headers["Content-Type"]="multipart/form-data":M.parameters&&wi()(ce=M.parameters).call(ce,function(tt){return"formData"===tt.in}).length&&(C.headers["Content-Type"]="application/x-www-form-urlencoded");else if(V){var De,ke,Ye=M.parameters&&wi()(De=M.parameters).call(De,function(tt){return"body"===tt.in}).length>0,qe=M.parameters&&wi()(ke=M.parameters).call(ke,function(tt){return"formData"===tt.in}).length>0;(Ye||qe)&&(C.headers["Content-Type"]=V)}return!B&&Array.isArray(M.produces)&&M.produces.length>0&&(C.headers.accept=M.produces.join(", ")),C}(ur,Ze)).cookies&&mt()(Ze.cookies).length){var qn=mt()(Ze.cookies).reduce(function(Ui,mr){return Ui+(Ui?"&":"")+Pb.serialize(mr,Ze.cookies[mr])},"");Ze.headers.Cookie=qn}return Ze.cookies&&delete Ze.cookies,zo(Ze),Ze}var Tf=function(C){return C?C.replace(/\W/g,""):null};function wf(f){return Ll(f.spec)?function(f){var C=f.spec,w=f.pathName,M=f.method,N=f.server,V=f.contextUrl,B=f.serverVariables,z=void 0===B?{}:B,ae=gr()(C,["paths",w,(M||"").toLowerCase(),"servers"])||gr()(C,["paths",w,"servers"])||gr()(C,["servers"]),ce="",Ee=null;if(N&&ae&&ae.length){var Ce=Et()(ae).call(ae,function(Ye){return Ye.url});Ce.indexOf(N)>-1&&(ce=N,Ee=ae[Ce.indexOf(N)])}if(!ce&&ae&&ae.length){ce=ae[0].url;var De=ve(ae,1);Ee=De[0]}if(ce.indexOf("{")>-1){var ke=function(f){for(var M,C=[],w=/{([^}]+)}/g;M=w.exec(f);)C.push(M[1]);return C}(ce);ke.forEach(function(Ye){if(Ee.variables&&Ee.variables[Ye]){var tt=z[Ye]||Ee.variables[Ye].default,Ct=new RegExp("{".concat(Ye,"}"),"g");ce=ce.replace(Ct,tt)}})}return function(){var z,ae,f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",C=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",w=ne.parse(f&&C?ne.resolve(C,f):f),M=ne.parse(C),N=Tf(w.protocol)||Tf(M.protocol)||"",V=w.host||M.host,B=w.pathname||"";return"/"===(z=N&&V?ze()(ae="".concat(N,"://")).call(ae,V+B):B)[z.length-1]?jo()(z).call(z,0,-1):z}(ce,V)}(f):function(f){var Ee,Ce,C=f.spec,w=f.scheme,M=f.contextUrl,V=ne.parse(void 0===M?"":M),B=Array.isArray(C.schemes)?C.schemes[0]:null,z=w||B||Tf(V.protocol)||"http",ae=C.host||V.host||"",ce=C.basePath||"";return"/"===(Ee=z&&ae?ze()(Ce="".concat(z,"://")).call(Ce,ae+ce):ce)[Ee.length-1]?jo()(Ee).call(Ee,0,-1):Ee}(f)}function Zn(f){var C=this,w=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof f?w.url=f:w=f,!(this instanceof Zn))return new Zn(w);Q()(this,w);var M=this.resolve().then(function(){return C.disableInterfaces||Q()(C,Zn.makeApisTagOperation(C)),C});return M.client=this,M}Zn.makeHttp=function(f,C,w){return w=w||function(M){return M},C=C||function(M){return M},function(M){return"string"==typeof M&&(M={url:M}),Wn.mergeInQueryOrForm(M),M=C(M),w(f(M))}}.bind(null,Zn.http=Dl),Zn.resolve=Ln,Zn.resolveSubtree=function(f,C){return Dh.apply(this,arguments)},Zn.execute=function(f){var C=f.http,w=f.fetch,M=f.spec,N=f.operationId,V=f.pathName,B=f.method,z=f.parameters,ae=f.securities,ce=function(f,C){if(null==f)return{};var M,N,w=function(f,C){if(null==f)return{};var N,V,w={},M=n(f);for(V=0;V<M.length;V++)N=M[V],!(_m(C).call(C,N)>=0)&&(w[N]=f[N]);return w}(f,C);if(l){var V=l(f);for(N=0;N<V.length;N++)M=V[N],!(_m(C).call(C,M)>=0)&&(!Object.prototype.propertyIsEnumerable.call(f,M)||(w[M]=f[M]))}return w}(f,jb),Ee=C||w||Dl;V&&B&&!N&&(N=ed(V,B));var Ce=zb.buildRequest(G({spec:M,operationId:N,parameters:z,securities:ae,http:Ee},ce));return Ce.body&&(Nb()(Ce.body)||Array.isArray(Ce.body))&&(Ce.body=Bi()(Ce.body)),Ee(Ce)},Zn.serializeRes=wc,Zn.serializeHeaders=lh,Zn.clearCache=function(){Pl.refs.clearCache()},Zn.makeApisTagOperation=function(){var f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},C=id_makeExecute(f);return{apis:id_mapTagOperations({v2OperationIdCompatibilityMode:f.v2OperationIdCompatibilityMode,spec:f.spec,cb:C})}},Zn.buildRequest=Tm,Zn.helpers={opId:Oe},Zn.getBaseUrl=wf,(Zn.prototype={http:Dl,execute:function(C){return this.applyDefaults(),Zn.execute(G({spec:this.spec,http:this.http,securities:{authorized:this.authorizations},contextUrl:"string"==typeof this.url?this.url:void 0,requestInterceptor:this.requestInterceptor||null,responseInterceptor:this.responseInterceptor||null},C))},resolve:function(){var C=this,w=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Zn.resolve(G({spec:this.spec,url:this.url,http:this.http||this.fetch,allowMetaPatches:this.allowMetaPatches,useCircularStructures:this.useCircularStructures,requestInterceptor:this.requestInterceptor||null,responseInterceptor:this.responseInterceptor||null,skipNormalization:this.skipNormalization||!1},w)).then(function(M){return C.originalSpec=C.spec,C.spec=M.spec,C.errors=M.errors,C})}}).applyDefaults=function(){var C=this.spec,w=this.url;if(w&&ue()(w).call(w,"http")){var M=ne.parse(w);C.host||(C.host=M.host),C.schemes||(C.schemes=[M.protocol.replace(":","")]),C.basePath||(C.basePath="/")}};var Qb=Zn.helpers;const rd=Zn},83082:T=>{"use strict";var I=String.prototype.replace,m=/%20/g;T.exports={default:"RFC3986",formatters:{RFC1738:function(S){return I.call(S,m,"+")},RFC3986:function(S){return String(S)}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},9325:(T,I,m)=>{"use strict";var y=m(51641),S=m(48185),s=m(83082);T.exports={formats:s,parse:S,stringify:y}},48185:(T,I,m)=>{"use strict";var y=m(29499),S=Object.prototype.hasOwnProperty,s=Array.isArray,n={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:y.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},u=function(W,G){return W&&"string"==typeof W&&G.comma&&W.indexOf(",")>-1?W.split(","):W},O=function(G,Z,Q,Y){if(G){var ue=Q.allowDots?G.replace(/\.([^.[]+)/g,"[$1]"):G,he=/(\[[^[\]]*])/g,te=Q.depth>0&&/(\[[^[\]]*])/.exec(ue),oe=te?ue.slice(0,te.index):ue,q=[];if(oe){if(!Q.plainObjects&&S.call(Object.prototype,oe)&&!Q.allowPrototypes)return;q.push(oe)}for(var J=0;Q.depth>0&&null!==(te=he.exec(ue))&&J<Q.depth;){if(J+=1,!Q.plainObjects&&S.call(Object.prototype,te[1].slice(1,-1))&&!Q.allowPrototypes)return;q.push(te[1])}return te&&q.push("["+ue.slice(te.index)+"]"),function(W,G,Z,Q){for(var Y=Q?G:u(G,Z),ue=W.length-1;ue>=0;--ue){var ne,he=W[ue];if("[]"===he&&Z.parseArrays)ne=[].concat(Y);else{ne=Z.plainObjects?Object.create(null):{};var te="["===he.charAt(0)&&"]"===he.charAt(he.length-1)?he.slice(1,-1):he,oe=parseInt(te,10);Z.parseArrays||""!==te?!isNaN(oe)&&he!==te&&String(oe)===te&&oe>=0&&Z.parseArrays&&oe<=Z.arrayLimit?(ne=[])[oe]=Y:ne[te]=Y:ne={0:Y}}Y=ne}return Y}(q,Z,Q,Y)}};T.exports=function(W,G){var Z=function(G){if(!G)return n;if(null!=G.decoder&&"function"!=typeof G.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==G.charset&&"utf-8"!==G.charset&&"iso-8859-1"!==G.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");return{allowDots:void 0===G.allowDots?n.allowDots:!!G.allowDots,allowPrototypes:"boolean"==typeof G.allowPrototypes?G.allowPrototypes:n.allowPrototypes,allowSparse:"boolean"==typeof G.allowSparse?G.allowSparse:n.allowSparse,arrayLimit:"number"==typeof G.arrayLimit?G.arrayLimit:n.arrayLimit,charset:void 0===G.charset?n.charset:G.charset,charsetSentinel:"boolean"==typeof G.charsetSentinel?G.charsetSentinel:n.charsetSentinel,comma:"boolean"==typeof G.comma?G.comma:n.comma,decoder:"function"==typeof G.decoder?G.decoder:n.decoder,delimiter:"string"==typeof G.delimiter||y.isRegExp(G.delimiter)?G.delimiter:n.delimiter,depth:"number"==typeof G.depth||!1===G.depth?+G.depth:n.depth,ignoreQueryPrefix:!0===G.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof G.interpretNumericEntities?G.interpretNumericEntities:n.interpretNumericEntities,parameterLimit:"number"==typeof G.parameterLimit?G.parameterLimit:n.parameterLimit,parseArrays:!1!==G.parseArrays,plainObjects:"boolean"==typeof G.plainObjects?G.plainObjects:n.plainObjects,strictNullHandling:"boolean"==typeof G.strictNullHandling?G.strictNullHandling:n.strictNullHandling}}(G);if(""===W||null==W)return Z.plainObjects?Object.create(null):{};for(var Q="string"==typeof W?function(G,Z){var te,Q={},ne=(Z.ignoreQueryPrefix?G.replace(/^\?/,""):G).split(Z.delimiter,Z.parameterLimit===1/0?void 0:Z.parameterLimit),he=-1,oe=Z.charset;if(Z.charsetSentinel)for(te=0;te<ne.length;++te)0===ne[te].indexOf("utf8=")&&("utf8=%E2%9C%93"===ne[te]?oe="utf-8":"utf8=%26%2310003%3B"===ne[te]&&(oe="iso-8859-1"),he=te,te=ne.length);for(te=0;te<ne.length;++te)if(te!==he){var fe,K,q=ne[te],J=q.indexOf("]="),F=-1===J?q.indexOf("="):J+1;-1===F?(fe=Z.decoder(q,n.decoder,oe,"key"),K=Z.strictNullHandling?null:""):(fe=Z.decoder(q.slice(0,F),n.decoder,oe,"key"),K=y.maybeMap(u(q.slice(F+1),Z),function(ie){return Z.decoder(ie,n.decoder,oe,"value")})),K&&Z.interpretNumericEntities&&"iso-8859-1"===oe&&(K=K.replace(/&#(\d+);/g,function(G,Z){return String.fromCharCode(parseInt(Z,10))})),q.indexOf("[]=")>-1&&(K=s(K)?[K]:K),Q[fe]=S.call(Q,fe)?y.combine(Q[fe],K):K}return Q}(W,Z):W,Y=Z.plainObjects?Object.create(null):{},ue=Object.keys(Q),ne=0;ne<ue.length;++ne){var he=ue[ne],te=O(he,Q[he],Z,"string"==typeof W);Y=y.merge(Y,te,Z)}return!0===Z.allowSparse?Y:y.compact(Y)}},51641:(T,I,m)=>{"use strict";var y=m(69109),S=m(29499),s=m(83082),n=Object.prototype.hasOwnProperty,l={brackets:function(Q){return Q+"[]"},comma:"comma",indices:function(Q,Y){return Q+"["+Y+"]"},repeat:function(Q){return Q}},u=Array.isArray,h=Array.prototype.push,_=function(Z,Q){h.apply(Z,u(Q)?Q:[Q])},b=Date.prototype.toISOString,R=s.default,O={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:S.encode,encodeValuesOnly:!1,format:R,formatter:s.formatters[R],indices:!1,serializeDate:function(Q){return b.call(Q)},skipNulls:!1,strictNullHandling:!1},W=function Z(Q,Y,ue,ne,he,te,oe,q,J,F,fe,K,ie,le,re){var Re=Q;if(re.has(Q))throw new RangeError("Cyclic object value");if("function"==typeof oe?Re=oe(Y,Re):Re instanceof Date?Re=F(Re):"comma"===ue&&u(Re)&&(Re=S.maybeMap(Re,function(je){return je instanceof Date?F(je):je})),null===Re){if(ne)return te&&!ie?te(Y,O.encoder,le,"key",fe):Y;Re=""}if(function(Q){return"string"==typeof Q||"number"==typeof Q||"boolean"==typeof Q||"symbol"==typeof Q||"bigint"==typeof Q}(Re)||S.isBuffer(Re))return te?[K(ie?Y:te(Y,O.encoder,le,"key",fe))+"="+K(te(Re,O.encoder,le,"value",fe))]:[K(Y)+"="+K(String(Re))];var Pe,ve=[];if(void 0===Re)return ve;if("comma"===ue&&u(Re))Pe=[{value:Re.length>0?Re.join(",")||null:void 0}];else if(u(oe))Pe=oe;else{var Se=Object.keys(Re);Pe=q?Se.sort(q):Se}for(var Te=0;Te<Pe.length;++Te){var Ve=Pe[Te],Le="object"==typeof Ve&&void 0!==Ve.value?Ve.value:Re[Ve];if(!he||null!==Le){var Ue=u(Re)?"function"==typeof ue?ue(Y,Ve):Y:Y+(J?"."+Ve:"["+Ve+"]");re.set(Q,!0);var He=y();_(ve,Z(Le,Ue,ue,ne,he,te,oe,q,J,F,fe,K,ie,le,He))}}return ve};T.exports=function(Z,Q){var ne,Y=Z,ue=function(Q){if(!Q)return O;if(null!=Q.encoder&&"function"!=typeof Q.encoder)throw new TypeError("Encoder has to be a function.");var Y=Q.charset||O.charset;if(void 0!==Q.charset&&"utf-8"!==Q.charset&&"iso-8859-1"!==Q.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var ue=s.default;if(void 0!==Q.format){if(!n.call(s.formatters,Q.format))throw new TypeError("Unknown format option provided.");ue=Q.format}var ne=s.formatters[ue],he=O.filter;return("function"==typeof Q.filter||u(Q.filter))&&(he=Q.filter),{addQueryPrefix:"boolean"==typeof Q.addQueryPrefix?Q.addQueryPrefix:O.addQueryPrefix,allowDots:void 0===Q.allowDots?O.allowDots:!!Q.allowDots,charset:Y,charsetSentinel:"boolean"==typeof Q.charsetSentinel?Q.charsetSentinel:O.charsetSentinel,delimiter:void 0===Q.delimiter?O.delimiter:Q.delimiter,encode:"boolean"==typeof Q.encode?Q.encode:O.encode,encoder:"function"==typeof Q.encoder?Q.encoder:O.encoder,encodeValuesOnly:"boolean"==typeof Q.encodeValuesOnly?Q.encodeValuesOnly:O.encodeValuesOnly,filter:he,format:ue,formatter:ne,serializeDate:"function"==typeof Q.serializeDate?Q.serializeDate:O.serializeDate,skipNulls:"boolean"==typeof Q.skipNulls?Q.skipNulls:O.skipNulls,sort:"function"==typeof Q.sort?Q.sort:null,strictNullHandling:"boolean"==typeof Q.strictNullHandling?Q.strictNullHandling:O.strictNullHandling}}(Q);"function"==typeof ue.filter?Y=(0,ue.filter)("",Y):u(ue.filter)&&(ne=ue.filter);var te=[];if("object"!=typeof Y||null===Y)return"";var q=l[Q&&Q.arrayFormat in l?Q.arrayFormat:Q&&"indices"in Q?Q.indices?"indices":"repeat":"indices"];ne||(ne=Object.keys(Y)),ue.sort&&ne.sort(ue.sort);for(var J=y(),F=0;F<ne.length;++F){var fe=ne[F];ue.skipNulls&&null===Y[fe]||_(te,W(Y[fe],fe,q,ue.strictNullHandling,ue.skipNulls,ue.encode?ue.encoder:null,ue.filter,ue.sort,ue.allowDots,ue.serializeDate,ue.format,ue.formatter,ue.encodeValuesOnly,ue.charset,J))}var K=te.join(ue.delimiter),ie=!0===ue.addQueryPrefix?"?":"";return ue.charsetSentinel&&(ie+="iso-8859-1"===ue.charset?"utf8=%26%2310003%3B&":"utf8=%E2%9C%93&"),K.length>0?ie+K:""}},29499:(T,I,m)=>{"use strict";var y=m(83082),S=Object.prototype.hasOwnProperty,s=Array.isArray,n=function(){for(var Q=[],Y=0;Y<256;++Y)Q.push("%"+((Y<16?"0":"")+Y.toString(16)).toUpperCase());return Q}(),u=function(Y,ue){for(var ne=ue&&ue.plainObjects?Object.create(null):{},he=0;he<Y.length;++he)void 0!==Y[he]&&(ne[he]=Y[he]);return ne};T.exports={arrayToObject:u,assign:function(Y,ue){return Object.keys(ue).reduce(function(ne,he){return ne[he]=ue[he],ne},Y)},combine:function(Y,ue){return[].concat(Y,ue)},compact:function(Y){for(var ue=[{obj:{o:Y},prop:"o"}],ne=[],he=0;he<ue.length;++he)for(var te=ue[he],oe=te.obj[te.prop],q=Object.keys(oe),J=0;J<q.length;++J){var F=q[J],fe=oe[F];"object"==typeof fe&&null!==fe&&-1===ne.indexOf(fe)&&(ue.push({obj:oe,prop:F}),ne.push(fe))}return function(Y){for(;Y.length>1;){var ue=Y.pop(),ne=ue.obj[ue.prop];if(s(ne)){for(var he=[],te=0;te<ne.length;++te)void 0!==ne[te]&&he.push(ne[te]);ue.obj[ue.prop]=he}}}(ue),Y},decode:function(Q,Y,ue){var ne=Q.replace(/\+/g," ");if("iso-8859-1"===ue)return ne.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(ne)}catch(he){return ne}},encode:function(Y,ue,ne,he,te){if(0===Y.length)return Y;var oe=Y;if("symbol"==typeof Y?oe=Symbol.prototype.toString.call(Y):"string"!=typeof Y&&(oe=String(Y)),"iso-8859-1"===ne)return escape(oe).replace(/%u[0-9a-f]{4}/gi,function(fe){return"%26%23"+parseInt(fe.slice(2),16)+"%3B"});for(var q="",J=0;J<oe.length;++J){var F=oe.charCodeAt(J);45===F||46===F||95===F||126===F||F>=48&&F<=57||F>=65&&F<=90||F>=97&&F<=122||te===y.RFC1738&&(40===F||41===F)?q+=oe.charAt(J):F<128?q+=n[F]:F<2048?q+=n[192|F>>6]+n[128|63&F]:F<55296||F>=57344?q+=n[224|F>>12]+n[128|F>>6&63]+n[128|63&F]:(F=65536+((1023&F)<<10|1023&oe.charCodeAt(J+=1)),q+=n[240|F>>18]+n[128|F>>12&63]+n[128|F>>6&63]+n[128|63&F])}return q},isBuffer:function(Y){return!(!Y||"object"!=typeof Y||!(Y.constructor&&Y.constructor.isBuffer&&Y.constructor.isBuffer(Y)))},isRegExp:function(Y){return"[object RegExp]"===Object.prototype.toString.call(Y)},maybeMap:function(Y,ue){if(s(Y)){for(var ne=[],he=0;he<Y.length;he+=1)ne.push(ue(Y[he]));return ne}return ue(Y)},merge:function Q(Y,ue,ne){if(!ue)return Y;if("object"!=typeof ue){if(s(Y))Y.push(ue);else{if(!Y||"object"!=typeof Y)return[Y,ue];(ne&&(ne.plainObjects||ne.allowPrototypes)||!S.call(Object.prototype,ue))&&(Y[ue]=!0)}return Y}if(!Y||"object"!=typeof Y)return[Y].concat(ue);var he=Y;return s(Y)&&!s(ue)&&(he=u(Y,ne)),s(Y)&&s(ue)?(ue.forEach(function(te,oe){if(S.call(Y,oe)){var q=Y[oe];q&&"object"==typeof q&&te&&"object"==typeof te?Y[oe]=Q(q,te,ne):Y.push(te)}else Y[oe]=te}),Y):Object.keys(ue).reduce(function(te,oe){var q=ue[oe];return te[oe]=S.call(te,oe)?Q(te[oe],q,ne):q,te},he)}}},86439:T=>{var I=T.exports=function(G){return new m(G)};function m(G){this.value=G}function y(G,Z,Q){var Y=[],ue=[],ne=!0;return function he(te){var oe=Q?S(te):te,q={},J=!0,F={node:oe,node_:te,path:[].concat(Y),parent:ue[ue.length-1],parents:ue,key:Y.slice(-1)[0],isRoot:0===Y.length,level:Y.length,circular:null,update:function(ie,le){F.isRoot||(F.parent.node[F.key]=ie),F.node=ie,le&&(J=!1)},delete:function(ie){delete F.parent.node[F.key],ie&&(J=!1)},remove:function(ie){O(F.parent.node)?F.parent.node.splice(F.key,1):delete F.parent.node[F.key],ie&&(J=!1)},keys:null,before:function(ie){q.before=ie},after:function(ie){q.after=ie},pre:function(ie){q.pre=ie},post:function(ie){q.post=ie},stop:function(){ne=!1},block:function(){J=!1}};if(!ne)return F;function fe(){if("object"==typeof F.node&&null!==F.node){(!F.keys||F.node_!==F.node)&&(F.keys=s(F.node)),F.isLeaf=0==F.keys.length;for(var ie=0;ie<ue.length;ie++)if(ue[ie].node_===te){F.circular=ue[ie];break}}else F.isLeaf=!0,F.keys=null;F.notLeaf=!F.isLeaf,F.notRoot=!F.isRoot}fe();var K=Z.call(F,F.node);return void 0!==K&&F.update&&F.update(K),q.before&&q.before.call(F,F.node),J&&("object"==typeof F.node&&null!==F.node&&!F.circular&&(ue.push(F),fe(),H(F.keys,function(ie,le){Y.push(ie),q.pre&&q.pre.call(F,F.node[ie],ie);var re=he(F.node[ie]);Q&&W.call(F.node,ie)&&(F.node[ie]=re.node),re.isLast=le==F.keys.length-1,re.isFirst=0==le,q.post&&q.post.call(F,re),Y.pop()}),ue.pop()),q.after&&q.after.call(F,F.node)),F}(G).node}function S(G){if("object"==typeof G&&null!==G){var Z;if(O(G))Z=[];else if(function(G){return"[object Date]"===n(G)}(G))Z=new Date(G.getTime?G.getTime():G);else if(function(G){return"[object RegExp]"===n(G)}(G))Z=new RegExp(G);else if(function(G){return"[object Error]"===n(G)}(G))Z={message:G.message};else if(function(G){return"[object Boolean]"===n(G)}(G))Z=new Boolean(G);else if(function(G){return"[object Number]"===n(G)}(G))Z=new Number(G);else if(function(G){return"[object String]"===n(G)}(G))Z=new String(G);else if(Object.create&&Object.getPrototypeOf)Z=Object.create(Object.getPrototypeOf(G));else if(G.constructor===Object)Z={};else{var Y=function(){};Y.prototype=G.constructor&&G.constructor.prototype||G.__proto__||{},Z=new Y}return H(s(G),function(ue){Z[ue]=G[ue]}),Z}return G}m.prototype.get=function(G){for(var Z=this.value,Q=0;Q<G.length;Q++){var Y=G[Q];if(!Z||!W.call(Z,Y)){Z=void 0;break}Z=Z[Y]}return Z},m.prototype.has=function(G){for(var Z=this.value,Q=0;Q<G.length;Q++){var Y=G[Q];if(!Z||!W.call(Z,Y))return!1;Z=Z[Y]}return!0},m.prototype.set=function(G,Z){for(var Q=this.value,Y=0;Y<G.length-1;Y++){var ue=G[Y];W.call(Q,ue)||(Q[ue]={}),Q=Q[ue]}return Q[G[Y]]=Z,Z},m.prototype.map=function(G){return y(this.value,G,!0)},m.prototype.forEach=function(G){return this.value=y(this.value,G,!1),this.value},m.prototype.reduce=function(G,Z){var Q=1===arguments.length,Y=Q?this.value:Z;return this.forEach(function(ue){(!this.isRoot||!Q)&&(Y=G.call(this,Y,ue))}),Y},m.prototype.paths=function(){var G=[];return this.forEach(function(Z){G.push(this.path)}),G},m.prototype.nodes=function(){var G=[];return this.forEach(function(Z){G.push(this.node)}),G},m.prototype.clone=function(){var G=[],Z=[];return function Q(Y){for(var ue=0;ue<G.length;ue++)if(G[ue]===Y)return Z[ue];if("object"==typeof Y&&null!==Y){var ne=S(Y);return G.push(Y),Z.push(ne),H(s(Y),function(he){ne[he]=Q(Y[he])}),G.pop(),Z.pop(),ne}return Y}(this.value)};var s=Object.keys||function(Z){var Q=[];for(var Y in Z)Q.push(Y);return Q};function n(G){return Object.prototype.toString.call(G)}var O=Array.isArray||function(Z){return"[object Array]"===Object.prototype.toString.call(Z)},H=function(G,Z){if(G.forEach)return G.forEach(Z);for(var Q=0;Q<G.length;Q++)Z(G[Q],Q,G)};H(s(m.prototype),function(G){I[G]=function(Z){var Q=[].slice.call(arguments,1),Y=new m(Z);return Y[G].apply(Y,Q)}});var W=Object.hasOwnProperty||function(G,Z){return Z in G}},51397:function(T,I,m){var y;T=m.nmd(T),function(S){"object"==typeof global&&global;var u,h=2147483647,_=36,Q=/^xn--/,Y=/[^\x20-\x7E]/,ue=/[\x2E\u3002\uFF0E\uFF61]/g,ne={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},te=Math.floor,oe=String.fromCharCode;function J(Te){throw RangeError(ne[Te])}function F(Te,Ve){for(var Le=Te.length,Ue=[];Le--;)Ue[Le]=Ve(Te[Le]);return Ue}function fe(Te,Ve){var Le=Te.split("@"),Ue="";return Le.length>1&&(Ue=Le[0]+"@",Te=Le[1]),Ue+F((Te=Te.replace(ue,".")).split("."),Ve).join(".")}function K(Te){for(var He,je,Ve=[],Le=0,Ue=Te.length;Le<Ue;)(He=Te.charCodeAt(Le++))>=55296&&He<=56319&&Le<Ue?56320==(64512&(je=Te.charCodeAt(Le++)))?Ve.push(((1023&He)<<10)+(1023&je)+65536):(Ve.push(He),Le--):Ve.push(He);return Ve}function ie(Te){return F(Te,function(Ve){var Le="";return Ve>65535&&(Le+=oe((Ve-=65536)>>>10&1023|55296),Ve=56320|1023&Ve),Le+oe(Ve)}).join("")}function le(Te){return Te-48<10?Te-22:Te-65<26?Te-65:Te-97<26?Te-97:_}function re(Te,Ve){return Te+22+75*(Te<26)-((0!=Ve)<<5)}function Re(Te,Ve,Le){var Ue=0;for(Te=Le?te(Te/700):Te>>1,Te+=te(Te/Ve);Te>455;Ue+=_)Te=te(Te/35);return te(Ue+36*Te/(Te+38))}function de(Te){var Ue,gt,At,mi,Bi,Ci,Et,ui,mt,nn,Ve=[],Le=Te.length,He=0,je=128,ut=72;for((gt=Te.lastIndexOf("-"))<0&&(gt=0),At=0;At<gt;++At)Te.charCodeAt(At)>=128&&J("not-basic"),Ve.push(Te.charCodeAt(At));for(mi=gt>0?gt+1:0;mi<Le;){for(Bi=He,Ci=1,Et=_;mi>=Le&&J("invalid-input"),((ui=le(Te.charCodeAt(mi++)))>=_||ui>te((h-He)/Ci))&&J("overflow"),He+=ui*Ci,!(ui<(mt=Et<=ut?1:Et>=ut+26?26:Et-ut));Et+=_)Ci>te(h/(nn=_-mt))&&J("overflow"),Ci*=nn;ut=Re(He-Bi,Ue=Ve.length+1,0==Bi),te(He/Ue)>h-je&&J("overflow"),je+=te(He/Ue),He%=Ue,Ve.splice(He++,0,je)}return ie(Ve)}function ve(Te){var Ve,Le,Ue,He,je,ut,gt,At,mi,Bi,Ci,ui,mt,nn,ze,Et=[];for(ui=(Te=K(Te)).length,Ve=128,Le=0,je=72,ut=0;ut<ui;++ut)(Ci=Te[ut])<128&&Et.push(oe(Ci));for(Ue=He=Et.length,He&&Et.push("-");Ue<ui;){for(gt=h,ut=0;ut<ui;++ut)(Ci=Te[ut])>=Ve&&Ci<gt&&(gt=Ci);for(gt-Ve>te((h-Le)/(mt=Ue+1))&&J("overflow"),Le+=(gt-Ve)*mt,Ve=gt,ut=0;ut<ui;++ut)if((Ci=Te[ut])<Ve&&++Le>h&&J("overflow"),Ci==Ve){for(At=Le,mi=_;!(At<(Bi=mi<=je?1:mi>=je+26?26:mi-je));mi+=_)Et.push(oe(re(Bi+(ze=At-Bi)%(nn=_-Bi),0))),At=te(ze/nn);Et.push(oe(re(At,0))),je=Re(Le,mt,Ue==He),Le=0,++Ue}++Le,++Ve}return Et.join("")}u={version:"1.3.2",ucs2:{decode:K,encode:ie},decode:de,encode:ve,toASCII:function(Te){return fe(Te,function(Ve){return Y.test(Ve)?"xn--"+ve(Ve):Ve})},toUnicode:function(Te){return fe(Te,function(Ve){return Q.test(Ve)?de(Ve.slice(4).toLowerCase()):Ve})}},void 0!==(y=function(){return u}.call(I,m,I,T))&&(T.exports=y)}()},23402:(T,I,m)=>{"use strict";var y=m(51397),S=m(70880);function s(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}I.parse=ne,I.resolve=function(q,J){return ne(q,!1,!0).resolve(J)},I.resolveObject=function(q,J){return q?ne(q,!1,!0).resolveObject(J):J},I.format=function(q){return S.isString(q)&&(q=ne(q)),q instanceof s?q.format():s.prototype.format.call(q)},I.Url=s;var n=/^([a-z0-9.+-]+:)/i,l=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,_=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),b=["'"].concat(_),R=["%","/","?",";","#"].concat(b),O=["/","?","#"],W=/^[+a-z0-9A-Z_-]{0,63}$/,G=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Z={javascript:!0,"javascript:":!0},Q={javascript:!0,"javascript:":!0},Y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},ue=m(89069);function ne(q,J,F){if(q&&S.isObject(q)&&q instanceof s)return q;var fe=new s;return fe.parse(q,J,F),fe}s.prototype.parse=function(q,J,F){if(!S.isString(q))throw new TypeError("Parameter 'url' must be a string, not "+typeof q);var fe=q.indexOf("?"),K=-1!==fe&&fe<q.indexOf("#")?"?":"#",ie=q.split(K);ie[0]=ie[0].replace(/\\/g,"/");var re=q=ie.join(K);if(re=re.trim(),!F&&1===q.split("#").length){var Re=u.exec(re);if(Re)return this.path=re,this.href=re,this.pathname=Re[1],Re[2]?(this.search=Re[2],this.query=J?ue.parse(this.search.substr(1)):this.search.substr(1)):J&&(this.search="",this.query={}),this}var de=n.exec(re);if(de){var ve=(de=de[0]).toLowerCase();this.protocol=ve,re=re.substr(de.length)}if(F||de||re.match(/^\/\/[^@\/]+@[^@\/]+/)){var Pe="//"===re.substr(0,2);Pe&&(!de||!Q[de])&&(re=re.substr(2),this.slashes=!0)}if(!Q[de]&&(Pe||de&&!Y[de])){for(var Se=-1,Te=0;Te<O.length;Te++)-1!==(Ve=re.indexOf(O[Te]))&&(-1===Se||Ve<Se)&&(Se=Ve);var Le,Ue;for(-1!==(Ue=-1===Se?re.lastIndexOf("@"):re.lastIndexOf("@",Se))&&(Le=re.slice(0,Ue),re=re.slice(Ue+1),this.auth=decodeURIComponent(Le)),Se=-1,Te=0;Te<R.length;Te++){var Ve;-1!==(Ve=re.indexOf(R[Te]))&&(-1===Se||Ve<Se)&&(Se=Ve)}-1===Se&&(Se=re.length),this.host=re.slice(0,Se),re=re.slice(Se),this.parseHost(),this.hostname=this.hostname||"";var He="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!He)for(var je=this.hostname.split(/\./),ut=(Te=0,je.length);Te<ut;Te++){var gt=je[Te];if(gt&&!gt.match(W)){for(var At="",mi=0,Bi=gt.length;mi<Bi;mi++)gt.charCodeAt(mi)>127?At+="x":At+=gt[mi];if(!At.match(W)){var Ci=je.slice(0,Te),Et=je.slice(Te+1),ui=gt.match(G);ui&&(Ci.push(ui[1]),Et.unshift(ui[2])),Et.length&&(re="/"+Et.join(".")+re),this.hostname=Ci.join(".");break}}}this.hostname=this.hostname.length>255?"":this.hostname.toLowerCase(),He||(this.hostname=y.toASCII(this.hostname)),this.host=(this.hostname||"")+(this.port?":"+this.port:""),this.href+=this.host,He&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==re[0]&&(re="/"+re))}if(!Z[ve])for(Te=0,ut=b.length;Te<ut;Te++){var ze=b[Te];if(-1!==re.indexOf(ze)){var rn=encodeURIComponent(ze);rn===ze&&(rn=escape(ze)),re=re.split(ze).join(rn)}}var Yt=re.indexOf("#");-1!==Yt&&(this.hash=re.substr(Yt),re=re.slice(0,Yt));var on=re.indexOf("?");return-1!==on?(this.search=re.substr(on),this.query=re.substr(on+1),J&&(this.query=ue.parse(this.query)),re=re.slice(0,on)):J&&(this.search="",this.query={}),re&&(this.pathname=re),Y[ve]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(this.path=(this.pathname||"")+(this.search||"")),this.href=this.format(),this},s.prototype.format=function(){var q=this.auth||"";q&&(q=(q=encodeURIComponent(q)).replace(/%3A/i,":"),q+="@");var J=this.protocol||"",F=this.pathname||"",fe=this.hash||"",K=!1,ie="";this.host?K=q+this.host:this.hostname&&(K=q+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(K+=":"+this.port)),this.query&&S.isObject(this.query)&&Object.keys(this.query).length&&(ie=ue.stringify(this.query));var le=this.search||ie&&"?"+ie||"";return J&&":"!==J.substr(-1)&&(J+=":"),this.slashes||(!J||Y[J])&&!1!==K?(K="//"+(K||""),F&&"/"!==F.charAt(0)&&(F="/"+F)):K||(K=""),fe&&"#"!==fe.charAt(0)&&(fe="#"+fe),le&&"?"!==le.charAt(0)&&(le="?"+le),J+K+(F=F.replace(/[?#]/g,function(re){return encodeURIComponent(re)}))+(le=le.replace("#","%23"))+fe},s.prototype.resolve=function(q){return this.resolveObject(ne(q,!1,!0)).format()},s.prototype.resolveObject=function(q){if(S.isString(q)){var J=new s;J.parse(q,!1,!0),q=J}for(var F=new s,fe=Object.keys(this),K=0;K<fe.length;K++){var ie=fe[K];F[ie]=this[ie]}if(F.hash=q.hash,""===q.href)return F.href=F.format(),F;if(q.slashes&&!q.protocol){for(var le=Object.keys(q),re=0;re<le.length;re++){var Re=le[re];"protocol"!==Re&&(F[Re]=q[Re])}return Y[F.protocol]&&F.hostname&&!F.pathname&&(F.path=F.pathname="/"),F.href=F.format(),F}if(q.protocol&&q.protocol!==F.protocol){if(!Y[q.protocol]){for(var de=Object.keys(q),ve=0;ve<de.length;ve++){var Pe=de[ve];F[Pe]=q[Pe]}return F.href=F.format(),F}if(F.protocol=q.protocol,q.host||Q[q.protocol])F.pathname=q.pathname;else{for(var ut=(q.pathname||"").split("/");ut.length&&!(q.host=ut.shift()););q.host||(q.host=""),q.hostname||(q.hostname=""),""!==ut[0]&&ut.unshift(""),ut.length<2&&ut.unshift(""),F.pathname=ut.join("/")}return F.search=q.search,F.query=q.query,F.host=q.host||"",F.auth=q.auth,F.hostname=q.hostname||q.host,F.port=q.port,(F.pathname||F.search)&&(F.path=(F.pathname||"")+(F.search||"")),F.slashes=F.slashes||q.slashes,F.href=F.format(),F}var Ve=F.pathname&&"/"===F.pathname.charAt(0),Le=q.host||q.pathname&&"/"===q.pathname.charAt(0),Ue=Le||Ve||F.host&&q.pathname,He=Ue,je=F.pathname&&F.pathname.split("/")||[],gt=(ut=q.pathname&&q.pathname.split("/")||[],F.protocol&&!Y[F.protocol]);if(gt&&(F.hostname="",F.port=null,F.host&&(""===je[0]?je[0]=F.host:je.unshift(F.host)),F.host="",q.protocol&&(q.hostname=null,q.port=null,q.host&&(""===ut[0]?ut[0]=q.host:ut.unshift(q.host)),q.host=null),Ue=Ue&&(""===ut[0]||""===je[0])),Le)F.host=q.host||""===q.host?q.host:F.host,F.hostname=q.hostname||""===q.hostname?q.hostname:F.hostname,F.search=q.search,F.query=q.query,je=ut;else if(ut.length)je||(je=[]),je.pop(),je=je.concat(ut),F.search=q.search,F.query=q.query;else if(!S.isNullOrUndefined(q.search))return gt&&(F.hostname=F.host=je.shift(),(At=!!(F.host&&F.host.indexOf("@")>0)&&F.host.split("@"))&&(F.auth=At.shift(),F.host=F.hostname=At.shift())),F.search=q.search,F.query=q.query,(!S.isNull(F.pathname)||!S.isNull(F.search))&&(F.path=(F.pathname?F.pathname:"")+(F.search?F.search:"")),F.href=F.format(),F;if(!je.length)return F.pathname=null,F.path=F.search?"/"+F.search:null,F.href=F.format(),F;for(var mi=je.slice(-1)[0],Bi=(F.host||q.host||je.length>1)&&("."===mi||".."===mi)||""===mi,Ci=0,Et=je.length;Et>=0;Et--)"."===(mi=je[Et])?je.splice(Et,1):".."===mi?(je.splice(Et,1),Ci++):Ci&&(je.splice(Et,1),Ci--);if(!Ue&&!He)for(;Ci--;Ci)je.unshift("..");Ue&&""!==je[0]&&(!je[0]||"/"!==je[0].charAt(0))&&je.unshift(""),Bi&&"/"!==je.join("/").substr(-1)&&je.push("");var At,ui=""===je[0]||je[0]&&"/"===je[0].charAt(0);return gt&&(F.hostname=F.host=ui?"":je.length?je.shift():"",(At=!!(F.host&&F.host.indexOf("@")>0)&&F.host.split("@"))&&(F.auth=At.shift(),F.host=F.hostname=At.shift())),(Ue=Ue||F.host&&je.length)&&!ui&&je.unshift(""),je.length?F.pathname=je.join("/"):(F.pathname=null,F.path=null),(!S.isNull(F.pathname)||!S.isNull(F.search))&&(F.path=(F.pathname?F.pathname:"")+(F.search?F.search:"")),F.auth=q.auth||F.auth,F.slashes=F.slashes||q.slashes,F.href=F.format(),F},s.prototype.parseHost=function(){var q=this.host,J=l.exec(q);J&&(":"!==(J=J[0])&&(this.port=J.substr(1)),q=q.substr(0,q.length-J.length)),q&&(this.hostname=q)}},70880:T=>{"use strict";T.exports={isString:function(I){return"string"==typeof I},isObject:function(I){return"object"==typeof I&&null!==I},isNull:function(I){return null===I},isNullOrUndefined:function(I){return null==I}}},96553:()=>{}},T=>{T(T.s=16384)}]);